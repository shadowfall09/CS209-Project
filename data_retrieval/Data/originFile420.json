{"items":[{"tags":["java","redis","stream","jedis","redisjson"],"answers":[{"tags":[],"owner":{"account_id":4829511,"reputation":5855,"user_id":4021802,"display_name":"sazzad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684754482,"creation_date":1684754482,"answer_id":76305645,"question_id":76304463,"body_markdown":"In `xgroupCreate` method, send `new StreamEntryID()` instead of StreamEntryID.LAST_ENTRY.","title":"Redis streams Data missing","body":"<p>In <code>xgroupCreate</code> method, send <code>new StreamEntryID()</code> instead of StreamEntryID.LAST_ENTRY.</p>\n"}],"owner":{"account_id":28652526,"reputation":13,"user_id":21939232,"display_name":"vincent_01"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76305645,"answer_count":1,"score":0,"last_activity_date":1684754482,"creation_date":1684745480,"question_id":76304463,"body_markdown":"I am using Redis with the Jedis client , I have two classes , a Producer one and a Consumer one .The data sent by the producer class over streams is not being recieved well by the Consumer class . It seems there is loss of data but I do not know the source or how to mitigate this problem .\r\nMy Streams producer code snippet : \r\n```\r\n    Map&lt;String, String&gt; messageBody  = new HashMap&lt;&gt;();\r\n        for(String basekey : args){\r\n            Set&lt;String&gt; prices =  client.keys(&quot;RTSH:&quot;+basekey +&quot;*&quot;);\r\n            for(String price_key : prices){\r\n                messageBody.put(&quot;json_key&quot;, price_key);\r\n                client.xadd(STREAMS_KEY, StreamEntryID.NEW_ENTRY, messageBody);\r\n                System.out.println(messageBody);\r\n            }\r\n        }\r\n\r\n```\r\nMy streams consumer snippet : \r\n```\r\nHostAndPort config = new HostAndPort(Protocol.DEFAULT_HOST, 6379);\r\n        PooledConnectionProvider provider = new PooledConnectionProvider(config);\r\n        UnifiedJedis client = new UnifiedJedis(provider);\r\n        XReadGroupParams xReadGroupParams = new XReadGroupParams();\r\n        xReadGroupParams.block(0);\r\n        xReadGroupParams.count(1);\r\n        xReadGroupParams.noAck();\r\n        try {\r\n            client.xgroupCreate(STREAMS_KEY, &quot;RTSH_consumers&quot;,StreamEntryID.LAST_ENTRY,true);\r\n        }catch(Exception redisBusyException) {\r\n            System.out.println( String.format(&quot;\\t Group &#39;%s&#39; already exists&quot;, &quot;application_1&quot;));\r\n        }\r\n        Map&lt;String, StreamEntryID&gt; stream =  new HashMap&lt;&gt;();\r\n        stream.put(STREAMS_KEY,StreamEntryID.UNRECEIVED_ENTRY);\r\n        while(true) {\r\n            List&lt;Map.Entry&lt;String, List&lt;StreamEntry&gt;&gt;&gt; messages = client.xreadGroup(&quot;RTSH_consumers&quot;, &quot;consumer_RTSH&quot;, xReadGroupParams, stream);\r\n            if (!messages.isEmpty()) {\r\n                for (Map.Entry&lt;String, List&lt;StreamEntry&gt;&gt; entry : messages) {\r\n                    String key = entry.getKey();//key is the stream name\r\n                    List&lt;StreamEntry&gt; value = entry.getValue();\r\n                    for (StreamEntry StreamEntry : value) {\r\n                        String json_key = StreamEntry.getFields().get(&quot;json_key&quot;);\r\n                        Object prices =  client.jsonGet(json_key);\r\n                        System.out.println(prices);\r\n                        System.out.println(&quot;\\n&quot;);\r\n                        client.xack(STREAMS_KEY, &quot;RTSH_consumers&quot;, StreamEntry.getID());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n```\r\nI tried fetching less data but the problem persists.","title":"Redis streams Data missing","body":"<p>I am using Redis with the Jedis client , I have two classes , a Producer one and a Consumer one .The data sent by the producer class over streams is not being recieved well by the Consumer class . It seems there is loss of data but I do not know the source or how to mitigate this problem .\nMy Streams producer code snippet :</p>\n<pre><code>    Map&lt;String, String&gt; messageBody  = new HashMap&lt;&gt;();\n        for(String basekey : args){\n            Set&lt;String&gt; prices =  client.keys(&quot;RTSH:&quot;+basekey +&quot;*&quot;);\n            for(String price_key : prices){\n                messageBody.put(&quot;json_key&quot;, price_key);\n                client.xadd(STREAMS_KEY, StreamEntryID.NEW_ENTRY, messageBody);\n                System.out.println(messageBody);\n            }\n        }\n\n</code></pre>\n<p>My streams consumer snippet :</p>\n<pre><code>HostAndPort config = new HostAndPort(Protocol.DEFAULT_HOST, 6379);\n        PooledConnectionProvider provider = new PooledConnectionProvider(config);\n        UnifiedJedis client = new UnifiedJedis(provider);\n        XReadGroupParams xReadGroupParams = new XReadGroupParams();\n        xReadGroupParams.block(0);\n        xReadGroupParams.count(1);\n        xReadGroupParams.noAck();\n        try {\n            client.xgroupCreate(STREAMS_KEY, &quot;RTSH_consumers&quot;,StreamEntryID.LAST_ENTRY,true);\n        }catch(Exception redisBusyException) {\n            System.out.println( String.format(&quot;\\t Group '%s' already exists&quot;, &quot;application_1&quot;));\n        }\n        Map&lt;String, StreamEntryID&gt; stream =  new HashMap&lt;&gt;();\n        stream.put(STREAMS_KEY,StreamEntryID.UNRECEIVED_ENTRY);\n        while(true) {\n            List&lt;Map.Entry&lt;String, List&lt;StreamEntry&gt;&gt;&gt; messages = client.xreadGroup(&quot;RTSH_consumers&quot;, &quot;consumer_RTSH&quot;, xReadGroupParams, stream);\n            if (!messages.isEmpty()) {\n                for (Map.Entry&lt;String, List&lt;StreamEntry&gt;&gt; entry : messages) {\n                    String key = entry.getKey();//key is the stream name\n                    List&lt;StreamEntry&gt; value = entry.getValue();\n                    for (StreamEntry StreamEntry : value) {\n                        String json_key = StreamEntry.getFields().get(&quot;json_key&quot;);\n                        Object prices =  client.jsonGet(json_key);\n                        System.out.println(prices);\n                        System.out.println(&quot;\\n&quot;);\n                        client.xack(STREAMS_KEY, &quot;RTSH_consumers&quot;, StreamEntry.getID());\n                    }\n                }\n            }\n        }\n</code></pre>\n<p>I tried fetching less data but the problem persists.</p>\n"},{"tags":["java","tomcat8","jersey-2.0"],"comments":[{"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"score":0,"creation_date":1554790694,"post_id":55586050,"comment_id":97869653,"body_markdown":"shouldn&#39;t be an issue since there is no significant change from 1.4 to 1.6, also class is present: https://commons.apache.org/proper/commons-validator/apidocs/index.html, https://commons.apache.org/proper/commons-validator/changes-report.html","body":"shouldn&#39;t be an issue since there is no significant change from 1.4 to 1.6, also class is present: <a href=\"https://commons.apache.org/proper/commons-validator/apidocs/index.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-validator/apidocs/index.ht&zwnj;&#8203;ml</a>, <a href=\"https://commons.apache.org/proper/commons-validator/changes-report.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-validator/changes-report.h&zwnj;&#8203;tml</a>"}],"answers":[{"tags":[],"owner":{"account_id":7512957,"reputation":377,"user_id":5707347,"accept_rate":80,"display_name":"Shaq"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554789914,"creation_date":1554789914,"answer_id":55586085,"question_id":55586050,"body_markdown":"This means that the class `org.apache.commons.validator.routines.UrlValidator` is missing in the runtime classpath.","title":"java.lang.NoClassDefFoundError: Lorg apache commons validator routines UrlValidator exception when upgrading common-validator from 1.4.0 to 1.6","body":"<p>This means that the class <code>org.apache.commons.validator.routines.UrlValidator</code> is missing in the runtime classpath.</p>\n"},{"comments":[{"owner":{"account_id":4725648,"reputation":53,"user_id":3822376,"display_name":"Shahab Askarian"},"score":0,"creation_date":1554791891,"post_id":55586274,"comment_id":97870188,"body_markdown":"Thank you.\nMy problem was solved after adding the common-validator to the artifact and rebuilding it.","body":"Thank you. My problem was solved after adding the common-validator to the artifact and rebuilding it."}],"tags":[],"owner":{"account_id":15147294,"reputation":4578,"user_id":10931455,"display_name":"Freddy"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1554790834,"creation_date":1554790834,"answer_id":55586274,"question_id":55586050,"body_markdown":"Check if your `commons-validator.jar` exists in your war file. The class [still exists](https://commons.apache.org/proper/commons-validator/apidocs/org/apache/commons/validator/routines/UrlValidator.html) in 1.6 and no dependencies have been changed since version 1.4. See the [release notes](https://commons.apache.org/proper/commons-validator/changes-report.html).","title":"java.lang.NoClassDefFoundError: Lorg apache commons validator routines UrlValidator exception when upgrading common-validator from 1.4.0 to 1.6","body":"<p>Check if your <code>commons-validator.jar</code> exists in your war file. The class <a href=\"https://commons.apache.org/proper/commons-validator/apidocs/org/apache/commons/validator/routines/UrlValidator.html\" rel=\"nofollow noreferrer\">still exists</a> in 1.6 and no dependencies have been changed since version 1.4. See the <a href=\"https://commons.apache.org/proper/commons-validator/changes-report.html\" rel=\"nofollow noreferrer\">release notes</a>.</p>\n"},{"tags":[],"owner":{"account_id":28653761,"reputation":1,"user_id":21940244,"display_name":"IOANNA PRASSA"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684754464,"creation_date":1684754464,"answer_id":76305642,"question_id":55586050,"body_markdown":"For me the problem was solved by adding the jar files in the path : C:\\Jboss_Seam\\jboss-6.1.0.Final\\server\\default\\lib","title":"java.lang.NoClassDefFoundError: Lorg apache commons validator routines UrlValidator exception when upgrading common-validator from 1.4.0 to 1.6","body":"<p>For me the problem was solved by adding the jar files in the path : C:\\Jboss_Seam\\jboss-6.1.0.Final\\server\\default\\lib</p>\n"}],"owner":{"account_id":4725648,"reputation":53,"user_id":3822376,"display_name":"Shahab Askarian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2054,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":55586274,"answer_count":3,"score":0,"last_activity_date":1684754464,"creation_date":1554789718,"question_id":55586050,"body_markdown":"I work on the url shortener project. To test the validation of a url, I use the common-validator version 1.4.0. I use jersey and my web server is tomcat. After upgrading common-validator to version 1.6, I get the following exception. Could anybody help me?\r\n\r\n    HTTP Status 500 – Internal Server Error&lt;/h1&gt;&lt;hr class=&quot;line&quot; /&gt;&lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Exception Report&lt;/p&gt;&lt;p&gt;&lt;b&gt;Message&lt;/b&gt; Servlet.init() for servlet [jersey-serlvet] threw exception&lt;/p&gt;&lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The server encountered an unexpected condition that prevented it from fulfilling the request.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Exception&lt;/b&gt;&lt;/p&gt;&lt;pre&gt;javax.servlet.ServletException: Servlet.init() for servlet [jersey-serlvet] threw exception\r\n    \torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)\r\n    \torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n    \torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)\r\n    \torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\r\n    \torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)\r\n    \torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n    \torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790)\r\n    \torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1468)\r\n    \torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tjava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tjava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tjava.lang.Thread.run(Thread.java:748)\r\n    &lt;/pre&gt;&lt;p&gt;&lt;b&gt;Root Cause&lt;/b&gt;&lt;/p&gt;&lt;pre&gt;java.lang.NoClassDefFoundError: Lorg&amp;#47;apache&amp;#47;commons&amp;#47;validator&amp;#47;routines&amp;#47;UrlValidator;\r\n    \tjava.lang.Class.getDeclaredFields0(Native Method)\r\n    \tjava.lang.Class.privateGetDeclaredFields(Class.java:2583)\r\n    \tjava.lang.Class.getDeclaredFields(Class.java:1916)\r\n    \torg.glassfish.jersey.internal.util.ReflectionHelper$4.run(ReflectionHelper.java:311)\r\n    \torg.glassfish.jersey.internal.util.ReflectionHelper$4.run(ReflectionHelper.java:308)\r\n    \tjava.security.AccessController.doPrivileged(Native Method)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller.checkResourceClassFields(IntrospectionModeller.java:210)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller.doCreateResourceBuilder(IntrospectionModeller.java:137)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller.access$000(IntrospectionModeller.java:80)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller$1.call(IntrospectionModeller.java:111)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller$1.call(IntrospectionModeller.java:108)\r\n    \torg.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n    \torg.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n    \torg.glassfish.jersey.internal.Errors.processWithException(Errors.java:255)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller.createResourceBuilder(IntrospectionModeller.java:108)\r\n    \torg.glassfish.jersey.server.model.Resource.from(Resource.java:776)\r\n    \torg.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:464)\r\n    \torg.glassfish.jersey.server.ApplicationHandler.access$500(ApplicationHandler.java:183)\r\n    \torg.glassfish.jersey.server.ApplicationHandler$3.call(ApplicationHandler.java:349)\r\n    \torg.glassfish.jersey.server.ApplicationHandler$3.call(ApplicationHandler.java:346)\r\n    \torg.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n    \torg.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n    \torg.glassfish.jersey.internal.Errors.processWithException(Errors.java:255)\r\n    \torg.glassfish.jersey.server.ApplicationHandler.&amp;lt;init&amp;gt;(ApplicationHandler.java:346)\r\n    \torg.glassfish.jersey.servlet.WebComponent.&amp;lt;init&amp;gt;(WebComponent.java:339)\r\n    \torg.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:170)\r\n    \torg.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:362)\r\n    \tjavax.servlet.GenericServlet.init(GenericServlet.java:158)\r\n    \torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)\r\n    \torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n    \torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)\r\n    \torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\r\n    \torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)\r\n    \torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n    \torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790)\r\n    \torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1468)\r\n    \torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tjava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tjava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tjava.lang.Thread.run(Thread.java:748)\r\n    &lt;/pre&gt;&lt;p&gt;&lt;b&gt;Root Cause&lt;/b&gt;&lt;/p&gt;&lt;pre&gt;java.lang.ClassNotFoundException: org.apache.commons.validator.routines.UrlValidator\r\n    \torg.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1308)\r\n    \torg.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1136)\r\n    \tjava.lang.Class.getDeclaredFields0(Native Method)\r\n    \tjava.lang.Class.privateGetDeclaredFields(Class.java:2583)\r\n    \tjava.lang.Class.getDeclaredFields(Class.java:1916)\r\n    \torg.glassfish.jersey.internal.util.ReflectionHelper$4.run(ReflectionHelper.java:311)\r\n    \torg.glassfish.jersey.internal.util.ReflectionHelper$4.run(ReflectionHelper.java:308)\r\n    \tjava.security.AccessController.doPrivileged(Native Method)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller.checkResourceClassFields(IntrospectionModeller.java:210)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller.doCreateResourceBuilder(IntrospectionModeller.java:137)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller.access$000(IntrospectionModeller.java:80)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller$1.call(IntrospectionModeller.java:111)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller$1.call(IntrospectionModeller.java:108)\r\n    \torg.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n    \torg.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n    \torg.glassfish.jersey.internal.Errors.processWithException(Errors.java:255)\r\n    \torg.glassfish.jersey.server.model.IntrospectionModeller.createResourceBuilder(IntrospectionModeller.java:108)\r\n    \torg.glassfish.jersey.server.model.Resource.from(Resource.java:776)\r\n    \torg.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:464)\r\n    \torg.glassfish.jersey.server.ApplicationHandler.access$500(ApplicationHandler.java:183)\r\n    \torg.glassfish.jersey.server.ApplicationHandler$3.call(ApplicationHandler.java:349)\r\n    \torg.glassfish.jersey.server.ApplicationHandler$3.call(ApplicationHandler.java:346)\r\n    \torg.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n    \torg.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n    \torg.glassfish.jersey.internal.Errors.processWithException(Errors.java:255)\r\n    \torg.glassfish.jersey.server.ApplicationHandler.&amp;lt;init&amp;gt;(ApplicationHandler.java:346)\r\n    \torg.glassfish.jersey.servlet.WebComponent.&amp;lt;init&amp;gt;(WebComponent.java:339)\r\n    \torg.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:170)\r\n    \torg.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:362)\r\n    \tjavax.servlet.GenericServlet.init(GenericServlet.java:158)\r\n    \torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)\r\n    \torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n    \torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)\r\n    \torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\r\n    \torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)\r\n    \torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n    \torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790)\r\n    \torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1468)\r\n    \torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tjava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tjava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tjava.lang.Thread.run(Thread.java:748)\r\n    &lt;/pre&gt;&lt;p&gt;&lt;b&gt;Note&lt;/b&gt; The full stack trace of the root cause is available in the server logs.&lt;/p&gt;&lt;hr class=&quot;line&quot; /&gt;&lt;h3&gt;Apache Tomcat/8.5.31&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;\r\n\r\nI only get this exception when I use tomcat.\r\n\r\nPOM file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.fanapium.tinylink&lt;/groupId&gt;\r\n        &lt;artifactId&gt;tinylink&lt;/artifactId&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        &lt;version&gt;0.0.2&lt;/version&gt;\r\n        &lt;name&gt;tinylink&lt;/name&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n            &lt;jersey2.version&gt;2.19&lt;/jersey2.version&gt;\r\n            &lt;jaxrs.version&gt;2.0.1&lt;/jaxrs.version&gt;\r\n            &lt;jdk.version&gt;1.8&lt;/jdk.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;commons-validator&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-validator&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;eu.bitwalker&lt;/groupId&gt;\r\n                &lt;artifactId&gt;UserAgentUtils&lt;/artifactId&gt;\r\n                &lt;version&gt;1.21&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.maxmind.geoip2&lt;/groupId&gt;\r\n                &lt;artifactId&gt;geoip2&lt;/artifactId&gt;\r\n                &lt;version&gt;2.12.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n                &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n                &lt;version&gt;25.1-jre&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hashids&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hashids&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n                &lt;artifactId&gt;swagger-jaxrs&lt;/artifactId&gt;\r\n                &lt;version&gt;1.5.16&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\r\n                &lt;artifactId&gt;transport&lt;/artifactId&gt;\r\n                &lt;version&gt;5.2.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.floragunn&lt;/groupId&gt;\r\n                &lt;artifactId&gt;search-guard-ssl&lt;/artifactId&gt;\r\n                &lt;version&gt;5.2.0-19&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fanapium.keylead&lt;/groupId&gt;\r\n                &lt;artifactId&gt;keylead-client&lt;/artifactId&gt;\r\n                &lt;version&gt;1.4.1.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n                &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n                &lt;version&gt;20160212&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.8.9&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n                &lt;version&gt;2.8.9&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n                &lt;version&gt;2.8.9&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2.17&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12 --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n                &lt;version&gt;1.7.7&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\r\n                &lt;version&gt;2.7&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;version&gt;4.11&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${jaxrs.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- Jersey 2.19 --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;\r\n                &lt;version&gt;${jersey2.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\r\n                &lt;version&gt;${jersey2.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n                &lt;version&gt;${jersey2.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\r\n                &lt;version&gt;${jersey2.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;pluginManagement&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;2.3.1&lt;/version&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;source&gt;1.7&lt;/source&gt;\r\n                            &lt;target&gt;1.7&lt;/target&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/pluginManagement&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.6&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;copy-resources&lt;/id&gt;\r\n                            &lt;phase&gt;validate&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;copy-resources&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;outputDirectory&gt;${basedir}/target/TinyLink&lt;/outputDirectory&gt;\r\n                                &lt;resources&gt;\r\n                                    &lt;resource&gt;\r\n                                        &lt;directory&gt;resources&lt;/directory&gt;\r\n                                        &lt;filtering&gt;false&lt;/filtering&gt;\r\n                                    &lt;/resource&gt;\r\n                                &lt;/resources&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;copy-dependencies&lt;/id&gt;\r\n                            &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;outputDirectory&gt;${project.build.directory}/TinyLink/lib&lt;/outputDirectory&gt;\r\n                                &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\r\n                                &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\r\n                                &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;archive&gt;\r\n                            &lt;manifest&gt;\r\n                                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                                &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n                                &lt;mainClass&gt;com.fanapium.tinylink.TinyLinkServer&lt;/mainClass&gt;\r\n                            &lt;/manifest&gt;\r\n                            &lt;manifestEntries&gt;\r\n                                &lt;Class-Path&gt;.&lt;/Class-Path&gt;\r\n                            &lt;/manifestEntries&gt;\r\n                        &lt;/archive&gt;\r\n    \r\n                        &lt;finalName&gt;TinyLink/tinylink&lt;/finalName&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;8&lt;/source&gt;\r\n                        &lt;target&gt;8&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n","title":"java.lang.NoClassDefFoundError: Lorg apache commons validator routines UrlValidator exception when upgrading common-validator from 1.4.0 to 1.6","body":"<p>I work on the url shortener project. To test the validation of a url, I use the common-validator version 1.4.0. I use jersey and my web server is tomcat. After upgrading common-validator to version 1.6, I get the following exception. Could anybody help me?</p>\n\n<pre><code>HTTP Status 500 – Internal Server Error&lt;/h1&gt;&lt;hr class=\"line\" /&gt;&lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Exception Report&lt;/p&gt;&lt;p&gt;&lt;b&gt;Message&lt;/b&gt; Servlet.init() for servlet [jersey-serlvet] threw exception&lt;/p&gt;&lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The server encountered an unexpected condition that prevented it from fulfilling the request.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Exception&lt;/b&gt;&lt;/p&gt;&lt;pre&gt;javax.servlet.ServletException: Servlet.init() for servlet [jersey-serlvet] threw exception\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1468)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.lang.Thread.run(Thread.java:748)\n&lt;/pre&gt;&lt;p&gt;&lt;b&gt;Root Cause&lt;/b&gt;&lt;/p&gt;&lt;pre&gt;java.lang.NoClassDefFoundError: Lorg&amp;#47;apache&amp;#47;commons&amp;#47;validator&amp;#47;routines&amp;#47;UrlValidator;\n    java.lang.Class.getDeclaredFields0(Native Method)\n    java.lang.Class.privateGetDeclaredFields(Class.java:2583)\n    java.lang.Class.getDeclaredFields(Class.java:1916)\n    org.glassfish.jersey.internal.util.ReflectionHelper$4.run(ReflectionHelper.java:311)\n    org.glassfish.jersey.internal.util.ReflectionHelper$4.run(ReflectionHelper.java:308)\n    java.security.AccessController.doPrivileged(Native Method)\n    org.glassfish.jersey.server.model.IntrospectionModeller.checkResourceClassFields(IntrospectionModeller.java:210)\n    org.glassfish.jersey.server.model.IntrospectionModeller.doCreateResourceBuilder(IntrospectionModeller.java:137)\n    org.glassfish.jersey.server.model.IntrospectionModeller.access$000(IntrospectionModeller.java:80)\n    org.glassfish.jersey.server.model.IntrospectionModeller$1.call(IntrospectionModeller.java:111)\n    org.glassfish.jersey.server.model.IntrospectionModeller$1.call(IntrospectionModeller.java:108)\n    org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n    org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n    org.glassfish.jersey.internal.Errors.processWithException(Errors.java:255)\n    org.glassfish.jersey.server.model.IntrospectionModeller.createResourceBuilder(IntrospectionModeller.java:108)\n    org.glassfish.jersey.server.model.Resource.from(Resource.java:776)\n    org.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:464)\n    org.glassfish.jersey.server.ApplicationHandler.access$500(ApplicationHandler.java:183)\n    org.glassfish.jersey.server.ApplicationHandler$3.call(ApplicationHandler.java:349)\n    org.glassfish.jersey.server.ApplicationHandler$3.call(ApplicationHandler.java:346)\n    org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n    org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n    org.glassfish.jersey.internal.Errors.processWithException(Errors.java:255)\n    org.glassfish.jersey.server.ApplicationHandler.&amp;lt;init&amp;gt;(ApplicationHandler.java:346)\n    org.glassfish.jersey.servlet.WebComponent.&amp;lt;init&amp;gt;(WebComponent.java:339)\n    org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:170)\n    org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:362)\n    javax.servlet.GenericServlet.init(GenericServlet.java:158)\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1468)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.lang.Thread.run(Thread.java:748)\n&lt;/pre&gt;&lt;p&gt;&lt;b&gt;Root Cause&lt;/b&gt;&lt;/p&gt;&lt;pre&gt;java.lang.ClassNotFoundException: org.apache.commons.validator.routines.UrlValidator\n    org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1308)\n    org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1136)\n    java.lang.Class.getDeclaredFields0(Native Method)\n    java.lang.Class.privateGetDeclaredFields(Class.java:2583)\n    java.lang.Class.getDeclaredFields(Class.java:1916)\n    org.glassfish.jersey.internal.util.ReflectionHelper$4.run(ReflectionHelper.java:311)\n    org.glassfish.jersey.internal.util.ReflectionHelper$4.run(ReflectionHelper.java:308)\n    java.security.AccessController.doPrivileged(Native Method)\n    org.glassfish.jersey.server.model.IntrospectionModeller.checkResourceClassFields(IntrospectionModeller.java:210)\n    org.glassfish.jersey.server.model.IntrospectionModeller.doCreateResourceBuilder(IntrospectionModeller.java:137)\n    org.glassfish.jersey.server.model.IntrospectionModeller.access$000(IntrospectionModeller.java:80)\n    org.glassfish.jersey.server.model.IntrospectionModeller$1.call(IntrospectionModeller.java:111)\n    org.glassfish.jersey.server.model.IntrospectionModeller$1.call(IntrospectionModeller.java:108)\n    org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n    org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n    org.glassfish.jersey.internal.Errors.processWithException(Errors.java:255)\n    org.glassfish.jersey.server.model.IntrospectionModeller.createResourceBuilder(IntrospectionModeller.java:108)\n    org.glassfish.jersey.server.model.Resource.from(Resource.java:776)\n    org.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:464)\n    org.glassfish.jersey.server.ApplicationHandler.access$500(ApplicationHandler.java:183)\n    org.glassfish.jersey.server.ApplicationHandler$3.call(ApplicationHandler.java:349)\n    org.glassfish.jersey.server.ApplicationHandler$3.call(ApplicationHandler.java:346)\n    org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n    org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n    org.glassfish.jersey.internal.Errors.processWithException(Errors.java:255)\n    org.glassfish.jersey.server.ApplicationHandler.&amp;lt;init&amp;gt;(ApplicationHandler.java:346)\n    org.glassfish.jersey.servlet.WebComponent.&amp;lt;init&amp;gt;(WebComponent.java:339)\n    org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:170)\n    org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:362)\n    javax.servlet.GenericServlet.init(GenericServlet.java:158)\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1468)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.lang.Thread.run(Thread.java:748)\n&lt;/pre&gt;&lt;p&gt;&lt;b&gt;Note&lt;/b&gt; The full stack trace of the root cause is available in the server logs.&lt;/p&gt;&lt;hr class=\"line\" /&gt;&lt;h3&gt;Apache Tomcat/8.5.31&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>I only get this exception when I use tomcat.</p>\n\n<p>POM file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.fanapium.tinylink&lt;/groupId&gt;\n    &lt;artifactId&gt;tinylink&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;version&gt;0.0.2&lt;/version&gt;\n    &lt;name&gt;tinylink&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n        &lt;jersey2.version&gt;2.19&lt;/jersey2.version&gt;\n        &lt;jaxrs.version&gt;2.0.1&lt;/jaxrs.version&gt;\n        &lt;jdk.version&gt;1.8&lt;/jdk.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-validator&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-validator&lt;/artifactId&gt;\n            &lt;version&gt;1.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;eu.bitwalker&lt;/groupId&gt;\n            &lt;artifactId&gt;UserAgentUtils&lt;/artifactId&gt;\n            &lt;version&gt;1.21&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.maxmind.geoip2&lt;/groupId&gt;\n            &lt;artifactId&gt;geoip2&lt;/artifactId&gt;\n            &lt;version&gt;2.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;25.1-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hashids&lt;/groupId&gt;\n            &lt;artifactId&gt;hashids&lt;/artifactId&gt;\n            &lt;version&gt;1.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-jaxrs&lt;/artifactId&gt;\n            &lt;version&gt;1.5.16&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\n            &lt;artifactId&gt;transport&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.floragunn&lt;/groupId&gt;\n            &lt;artifactId&gt;search-guard-ssl&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0-19&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fanapium.keylead&lt;/groupId&gt;\n            &lt;artifactId&gt;keylead-client&lt;/artifactId&gt;\n            &lt;version&gt;1.4.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20160212&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;2.8.9&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.8.9&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.8.9&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;1.7.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\n            &lt;version&gt;2.7&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.11&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\n            &lt;version&gt;${jaxrs.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Jersey 2.19 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;\n            &lt;version&gt;${jersey2.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\n            &lt;version&gt;${jersey2.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n            &lt;version&gt;${jersey2.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\n            &lt;version&gt;${jersey2.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.3.1&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;source&gt;1.7&lt;/source&gt;\n                        &lt;target&gt;1.7&lt;/target&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;copy-resources&lt;/id&gt;\n                        &lt;phase&gt;validate&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-resources&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${basedir}/target/TinyLink&lt;/outputDirectory&gt;\n                            &lt;resources&gt;\n                                &lt;resource&gt;\n                                    &lt;directory&gt;resources&lt;/directory&gt;\n                                    &lt;filtering&gt;false&lt;/filtering&gt;\n                                &lt;/resource&gt;\n                            &lt;/resources&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;copy-dependencies&lt;/id&gt;\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/TinyLink/lib&lt;/outputDirectory&gt;\n                            &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n                            &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\n                            &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                            &lt;mainClass&gt;com.fanapium.tinylink.TinyLinkServer&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                        &lt;manifestEntries&gt;\n                            &lt;Class-Path&gt;.&lt;/Class-Path&gt;\n                        &lt;/manifestEntries&gt;\n                    &lt;/archive&gt;\n\n                    &lt;finalName&gt;TinyLink/tinylink&lt;/finalName&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;8&lt;/source&gt;\n                    &lt;target&gt;8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","string","inputmismatchexception"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1684614708,"post_id":76296529,"comment_id":134543917,"body_markdown":"Aside from main question, compiler informs about problems via *errors* and/or *warnings*. The *exceptions* are thrown at *runtime*. But to run java code first it needs to compile without errors.","body":"Aside from main question, compiler informs about problems via <i>errors</i> and/or <i>warnings</i>. The <i>exceptions</i> are thrown at <i>runtime</i>. But to run java code first it needs to compile without errors."},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684655078,"post_id":76296529,"comment_id":134546364,"body_markdown":"@Pshemo yea it compiles without errors the question was about adding a condition for the error","body":"@Pshemo yea it compiles without errors the question was about adding a condition for the error"},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684655107,"post_id":76296529,"comment_id":134546366,"body_markdown":"during runtime input","body":"during runtime input"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684663133,"post_id":76296529,"comment_id":134547075,"body_markdown":"Sorry - mixed you up with OP. I&#39;ll delete, but think it really better here as it addresses the orig question and effects that were misleading the OP. Here is that comment: Super Coder, note I have deleted my comments. It is practicably impossible with your code (which should be corrected in the question for the equals stuff) to enter a name with whitespace, even with quoting (the reason why I deleted my comments). We are getting too academic about this question, and you should probably be doing nextLine, not next(). There&#39;s no reason why the user should not be able to enter a name with a space","body":"Sorry - mixed you up with OP. I&#39;ll delete, but think it really better here as it addresses the orig question and effects that were misleading the OP. Here is that comment: Super Coder, note I have deleted my comments. It is practicably impossible with your code (which should be corrected in the question for the equals stuff) to enter a name with whitespace, even with quoting (the reason why I deleted my comments). We are getting too academic about this question, and you should probably be doing nextLine, not next(). There&#39;s no reason why the user should not be able to enter a name with a space"},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684675500,"post_id":76296529,"comment_id":134548497,"body_markdown":"@g00se yea I figured that out about an hour after I wrote the program lol I thought someone would just figure that out using logic but first answer I got was about the q that I asked :D","body":"@g00se yea I figured that out about an hour after I wrote the program lol I thought someone would just figure that out using logic but first answer I got was about the q that I asked :D"}],"answers":[{"comments":[{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684604872,"post_id":76296573,"comment_id":134542713,"body_markdown":"yea I know I am just looking for a way to report an error in case there is a whitespace","body":"yea I know I am just looking for a way to report an error in case there is a whitespace"}],"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684604420,"creation_date":1684604420,"answer_id":76296573,"question_id":76296529,"body_markdown":"If you want to read a floating point number you have to explicitly ask for it using Scanner.nextDouble(). next() returns a String. You can not assign a string to a number in Java.","title":"Application throws InputMismatchException when string is assigned to double","body":"<p>If you want to read a floating point number you have to explicitly ask for it using Scanner.nextDouble(). next() returns a String. You can not assign a string to a number in Java.</p>\n"},{"comments":[{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684604990,"post_id":76296590,"comment_id":134542726,"body_markdown":"so there isn&#39;t any predefined functions ?","body":"so there isn&#39;t any predefined functions ?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684605609,"post_id":76296590,"comment_id":134542822,"body_markdown":"@g00se, you&#39;re right, actually, I was trying to avoid recommending a `Pattern`.  Thanks for the correction, I overlooked it.","body":"@g00se, you&#39;re right, actually, I was trying to avoid recommending a <code>Pattern</code>.  Thanks for the correction, I overlooked it."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1684605759,"post_id":76296590,"comment_id":134542840,"body_markdown":"Yes, you can use `String.matches`, which requires a regular expression, the pattern `\\s` will match any white-space character.  Or, if you are looking for a single character you can use the `String.indexOf` method.  So, `name.indexOf(&#39; &#39;) != -1` would mean an index was found, thus it contains a space character.","body":"Yes, you can use <code>String.matches</code>, which requires a regular expression, the pattern <code>\\s</code> will match any white-space character.  Or, if you are looking for a single character you can use the <code>String.indexOf</code> method.  So, <code>name.indexOf(&#39; &#39;) != -1</code> would mean an index was found, thus it contains a space character."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684605898,"creation_date":1684604719,"answer_id":76296590,"question_id":76296529,"body_markdown":"You can use the following method to determine if a `String` contains a white-space character.\r\n\r\n```java\r\nboolean containsSpace(String string) {\r\n    for (char character : string.toCharArray()) {\r\n        switch (character) {\r\n            case &#39; &#39;, &#39;\\t&#39;, &#39;\\n&#39;, &#39;\\r&#39;, &#39;\\f&#39; -&gt; {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n```\r\n\r\nAlso, you&#39;re going to want to test the `name` value using the `String.equals` method, as opposed to the `==` equality operator.\r\n\r\n```java\r\nif (name.equals(&quot;&quot;)) error = true;\r\n```\r\n\r\nFurthermore, the `main` method requires a single `String` array, or `String` varargs parameter, to be valid.\r\n\r\n```java\r\npublic static void main(String[] args)\r\n```\r\n\r\nHere is a quick demonstration of how I would implement the task.  \r\n```java\r\npublic static void main(String[] args) {\r\n    Scanner scanner = new Scanner(System.in);\r\n    \r\n    String name;\r\n    while (true) {\r\n        System.out.print(&quot;Name: &quot;);\r\n        name = scanner.nextLine();\r\n        if (!containsSpace(name))\r\n            break;\r\n        System.out.println(&quot;Name contains white-space.  Re-enter.&quot;);\r\n    }\r\n    \r\n    double amount;\r\n    while (true) {\r\n        System.out.print(&quot;Amount: &quot;);\r\n        try {\r\n            amount = Double.parseDouble(scanner.nextLine());\r\n            break;\r\n        } catch (NumberFormatException exception) {\r\n            System.out.println(&quot;Invalid amount.  Re-enter.&quot;);\r\n        }\r\n    }\r\n    \r\n    System.out.printf(&quot;Name is &#39;%s&#39;%n&quot;, name);\r\n    System.out.printf(&quot;Amount is %,f%n&quot;, amount);\r\n}\r\n```","title":"Application throws InputMismatchException when string is assigned to double","body":"<p>You can use the following method to determine if a <code>String</code> contains a white-space character.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean containsSpace(String string) {\n    for (char character : string.toCharArray()) {\n        switch (character) {\n            case ' ', '\\t', '\\n', '\\r', '\\f' -&gt; {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n</code></pre>\n<p>Also, you're going to want to test the <code>name</code> value using the <code>String.equals</code> method, as opposed to the <code>==</code> equality operator.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (name.equals(&quot;&quot;)) error = true;\n</code></pre>\n<p>Furthermore, the <code>main</code> method requires a single <code>String</code> array, or <code>String</code> varargs parameter, to be valid.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args)\n</code></pre>\n<p>Here is a quick demonstration of how I would implement the task.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n    \n    String name;\n    while (true) {\n        System.out.print(&quot;Name: &quot;);\n        name = scanner.nextLine();\n        if (!containsSpace(name))\n            break;\n        System.out.println(&quot;Name contains white-space.  Re-enter.&quot;);\n    }\n    \n    double amount;\n    while (true) {\n        System.out.print(&quot;Amount: &quot;);\n        try {\n            amount = Double.parseDouble(scanner.nextLine());\n            break;\n        } catch (NumberFormatException exception) {\n            System.out.println(&quot;Invalid amount.  Re-enter.&quot;);\n        }\n    }\n    \n    System.out.printf(&quot;Name is '%s'%n&quot;, name);\n    System.out.printf(&quot;Amount is %,f%n&quot;, amount);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23477672,"reputation":45,"user_id":17530250,"display_name":"Pavol Varga"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684754040,"creation_date":1684750768,"answer_id":76305176,"question_id":76296529,"body_markdown":"&gt; I am writing a program where I need to check if a string (name) contains any whitespaces or not.\r\n&gt; so there isn&#39;t any predefined functions?\r\n\r\nOf course, there is - isWhitespace,&lt;br&gt;\r\nplus the trim() method might be considered,&lt;br&gt;\r\nto remove leading and trailing spaces from the user input: name = scanner.next().trim();\r\n\r\n    boolean containsSpace(String string) {\r\n      for (char character : string.toCharArray()) {\r\n        if (Character.isWhitespace(character)) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\nAnd the second part of your problem - to get the &quot;amount&quot; as a double,\r\nI would split into two simplistic functions to follow single responsibility principle and improve maintainability and testability.\r\nAnd I will put method getDouble(String string) into a dedicated class, and package, let say: myproject.common.Numbers\r\n\r\nSo the whole program will consist methods like this:\r\n\r\n    public static void main(String[] args) {\r\n      final var instance = new StackOverflow();\r\n      instance.parseNameAndAmount();\r\n    }\r\n  \r\n    void parseNameAndAmount() {\r\n      Scanner scanner = new Scanner(System.in);\r\n      final var name = getName(scanner);\r\n      final var amount = getAmount(scanner);\r\n      scanner.close();\r\n  \r\n      print(&quot;Name is %s&quot;.formatted(name));\r\n      print(&quot;Amount is %s&quot;.formatted(amount));\r\n  \r\n    }\r\n  \r\n    String getName(Scanner scanner) {\r\n      String name;\r\n      do {\r\n        print(&quot;Enter a name with no spaces: &quot;);\r\n        name = getName(scanner.nextLine().trim());\r\n      } while (name == null);\r\n      return name;\r\n    }\r\n  \r\n    String getName(String string) {\r\n      if (string == null || string.isEmpty()) {\r\n        return null;\r\n      }\r\n\r\n      if (containsSpace(string)) {\r\n        return null;\r\n      }\r\n      return string;\r\n    }\r\n  \r\n    boolean containsSpace(String string) {\r\n      for (char character : string.toCharArray()) {\r\n        if (Character.isWhitespace(character)) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n  \r\n  \r\n    double getAmount(Scanner scanner) {\r\n      Double amount;\r\n      do {\r\n        print(&quot;Enter amount of purchase (valid number): &quot;);\r\n        amount = getDouble(scanner.nextLine().trim());\r\n      } while (amount == null);\r\n      return amount;\r\n    }\r\n  \r\n    Double getDouble(String string) {\r\n      if (string == null) {\r\n        return null;\r\n      }\r\n  \r\n      try {\r\n        return Double.valueOf(string);\r\n      } catch (NumberFormatException e) {\r\n        return null;\r\n      }\r\n    }\r\n  \r\n    void print(String string) {\r\n      System.out.println(string);\r\n    }\r\n\r\n\r\n\r\nAs I mentioned testability and maintainability,\r\none of the tests might look like this, of course to be thorough,\r\nmore tests needs to be done.\r\n\r\n    @Test\r\n    void getDouble_When_NegativeWithExponent() {\r\n      // Given\r\n      final var given = &quot;-12.45E9&quot;;\r\n  \r\n      // when\r\n      final var actual = stackOverflow.getDouble(given);\r\n  \r\n      // Then\r\n      assertThat(actual)\r\n          .isNotNull()\r\n          .isNegative();\r\n    }\r\n","title":"Application throws InputMismatchException when string is assigned to double","body":"<blockquote>\n<p>I am writing a program where I need to check if a string (name) contains any whitespaces or not.\nso there isn't any predefined functions?</p>\n</blockquote>\n<p>Of course, there is - isWhitespace,<br>\nplus the trim() method might be considered,<br>\nto remove leading and trailing spaces from the user input: name = scanner.next().trim();</p>\n<pre><code>boolean containsSpace(String string) {\n  for (char character : string.toCharArray()) {\n    if (Character.isWhitespace(character)) {\n      return true;\n    }\n  }\n  return false;\n}\n</code></pre>\n<p>And the second part of your problem - to get the &quot;amount&quot; as a double,\nI would split into two simplistic functions to follow single responsibility principle and improve maintainability and testability.\nAnd I will put method getDouble(String string) into a dedicated class, and package, let say: myproject.common.Numbers</p>\n<p>So the whole program will consist methods like this:</p>\n<pre><code>public static void main(String[] args) {\n  final var instance = new StackOverflow();\n  instance.parseNameAndAmount();\n}\n\nvoid parseNameAndAmount() {\n  Scanner scanner = new Scanner(System.in);\n  final var name = getName(scanner);\n  final var amount = getAmount(scanner);\n  scanner.close();\n\n  print(&quot;Name is %s&quot;.formatted(name));\n  print(&quot;Amount is %s&quot;.formatted(amount));\n\n}\n\nString getName(Scanner scanner) {\n  String name;\n  do {\n    print(&quot;Enter a name with no spaces: &quot;);\n    name = getName(scanner.nextLine().trim());\n  } while (name == null);\n  return name;\n}\n\nString getName(String string) {\n  if (string == null || string.isEmpty()) {\n    return null;\n  }\n\n  if (containsSpace(string)) {\n    return null;\n  }\n  return string;\n}\n\nboolean containsSpace(String string) {\n  for (char character : string.toCharArray()) {\n    if (Character.isWhitespace(character)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n\ndouble getAmount(Scanner scanner) {\n  Double amount;\n  do {\n    print(&quot;Enter amount of purchase (valid number): &quot;);\n    amount = getDouble(scanner.nextLine().trim());\n  } while (amount == null);\n  return amount;\n}\n\nDouble getDouble(String string) {\n  if (string == null) {\n    return null;\n  }\n\n  try {\n    return Double.valueOf(string);\n  } catch (NumberFormatException e) {\n    return null;\n  }\n}\n\nvoid print(String string) {\n  System.out.println(string);\n}\n</code></pre>\n<p>As I mentioned testability and maintainability,\none of the tests might look like this, of course to be thorough,\nmore tests needs to be done.</p>\n<pre><code>@Test\nvoid getDouble_When_NegativeWithExponent() {\n  // Given\n  final var given = &quot;-12.45E9&quot;;\n\n  // when\n  final var actual = stackOverflow.getDouble(given);\n\n  // Then\n  assertThat(actual)\n      .isNotNull()\n      .isNegative();\n}\n</code></pre>\n"}],"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76296590,"answer_count":3,"score":1,"last_activity_date":1684754040,"creation_date":1684603897,"question_id":76296529,"body_markdown":"I am writing a program where I need to check if a string (`name`) contains any whitespaces or not.\r\n\r\nHere&#39;s part of my program :\r\n\r\n``` java\r\n    public static void main()\r\n    {\r\n        Scanner sc = new Scanner(System.in) ;\r\n        String name = &quot;&quot; ;\r\n        boolean error = false ;\r\n        do {\r\n            if(error) System.out.println(&quot;Sorry, error. Try again&quot;) ;\r\n            error = false ;\r\n            \r\n            System.out.print(&quot;Enter your name : &quot;) ;\r\n            name = sc.next() ;\r\n            if(name==&quot;&quot;) error = true ;\r\n        } while(error) ;\r\n        \r\n        double amount = 0.00 ;\r\n        do {\r\n            if(error) System.out.println(&quot;Sorry, error. Try again&quot;) ;\r\n            error = false ;\r\n            \r\n            System.out.print(&quot;Enter amount of purchase : &quot;) ;\r\n            amount = sc.nextDouble() ;\r\n            if(amount&lt;=1) error = true ;\r\n        } while(error) ;\r\n    }\r\n}\r\n```\r\n\r\nFor checking errors in the `name` string input, I need to check if the string contains any whitespaces or not because otherwise `java.lang.InputMismatchException` is thrown when it accepts `amount` (and when the entered `name` contains whitespace with another string). \r\n\r\nIs there any predefined function that does this?","title":"Application throws InputMismatchException when string is assigned to double","body":"<p>I am writing a program where I need to check if a string (<code>name</code>) contains any whitespaces or not.</p>\n<p>Here's part of my program :</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main()\n    {\n        Scanner sc = new Scanner(System.in) ;\n        String name = &quot;&quot; ;\n        boolean error = false ;\n        do {\n            if(error) System.out.println(&quot;Sorry, error. Try again&quot;) ;\n            error = false ;\n            \n            System.out.print(&quot;Enter your name : &quot;) ;\n            name = sc.next() ;\n            if(name==&quot;&quot;) error = true ;\n        } while(error) ;\n        \n        double amount = 0.00 ;\n        do {\n            if(error) System.out.println(&quot;Sorry, error. Try again&quot;) ;\n            error = false ;\n            \n            System.out.print(&quot;Enter amount of purchase : &quot;) ;\n            amount = sc.nextDouble() ;\n            if(amount&lt;=1) error = true ;\n        } while(error) ;\n    }\n}\n</code></pre>\n<p>For checking errors in the <code>name</code> string input, I need to check if the string contains any whitespaces or not because otherwise <code>java.lang.InputMismatchException</code> is thrown when it accepts <code>amount</code> (and when the entered <code>name</code> contains whitespace with another string).</p>\n<p>Is there any predefined function that does this?</p>\n"},{"tags":["java","scala","spinalhdl"],"answers":[{"tags":[],"owner":{"account_id":934511,"reputation":4576,"user_id":963700,"display_name":"Darryl Miles"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684753945,"creation_date":1684753945,"answer_id":76305571,"question_id":72847225,"body_markdown":"A few things to point out.\r\n\r\nWhile the design is a copy from documentation, it doesn&#39;t really have multiple ClockDomains being used.  There is an implied toplevel ClockDomain that already exists can can be accessed with `this.clockDomain` from the Component.\r\n\r\nBecause all the active logic of the counter is tied to one ClockDomain (the one you created) and nothing is attached to the implicit clock domain the signals relating to the implicit ClockDomain may have got pruned from the Verilog.\r\n\r\nBut conceptually with SpinalHDL a `Component` always has a superior clock domain above it that it is attached to.  So the superior clock domain does not go away, even if signals do not appear to exist for it.\r\n\r\n...\r\n\r\nYou do not call `dut.clockDomain.waitSampling()` at any time to provide control to the simulator to do work.  Because of this simulation time (as reported by `simTime()`) is always zero.  This simTime=0 is an indicator the simulator is not getting to simulate anything.\r\n\r\nMaybe insert calls before `dut.clockDomain.waitSampling(count=50)`, inside `dut.clockDomain.waitSampling(count=1)` and after `dut.clockDomain.waitSampling(count=50)` the for() loop.\r\n\r\nDue to this you might hit the simTimeout() limit that has been set low at 1000, maybe increase this to 1000000.\r\n\r\n...\r\n\r\nOne issue if you are using the MyCounter as a toplevel module for SpinalSim and attempting to use APIs like forkStimulus() that assume the &#39;clk&#39; and &#39;reset&#39; implicit signals at the top level.\r\n\r\n**A few solutions:**\r\n\r\n**1)** Use SpinalHDL to elaborate the `MyCounter.v` file generated from your `MyCounterVerilog` main and create an independent testbench (that is not SpinalSim), that would drive the `io_clk` and `io_reset` as you expect.\r\n\r\nThis could be Verilator or cocotb or something-else, etc... a simulator that works with a Verilog file, this will demonstrate the Verilog design does work as generated by SpinalHDL.\r\n\r\n\r\n**2)** If you wish to use SpinalSim, don&#39;t expect any assistance from `forkStimulus()` API in your SpinalSim to manage a toplevel clk/reset signals if your toplevel design does not conform to what it expects.   That the toplevel module is attached to `this.clockDomain.readClockWire` as the master clock.\r\n\r\nIf you examine the generated verilog from suggestion 1 above, it has no toplevel signals called `clk` or `reset`.  Even if you attempt to rename your signal with `setName(&quot;clk&quot;)` or use `noIoPrefix()` I think you will run into problems because the implicit signal just gets renamed (maybe to `clk_1`) and still doesn&#39;t become joined to your signal.\r\n\r\nInstead to simulate this module you need to directly manage your independant clock in your simulation code.\r\nFrom your code the lines, try a sequence like:\r\n\r\n```\r\nvar myClock = false  // Consider using AtomicBoolean\r\nvar myReset = false  // Consider using AtomicBoolean\r\ndut.clockDomain.onSamplings({\r\n  myClock = !myClock\r\n  dut.io.clk #= myClock\r\n  dut.io.reset #= myReset\r\n})\r\n```\r\n\r\nHere you are taking control of the clock signal directly, not relying on `forkStimulus()` to assist.  So remove the `forkStimulus()` line of code.\r\n\r\nDue to this, consider the removal of `assertReset()` if you need to achieve this change the myReset state.  Again use of the API assume you are using the implicit toplevel ClockDomain.\r\n\r\n\r\n**3)** Insert a `Toplevel extends Component` module that is the toplevel for the Sim.  Place your `MyCounter extends Component` module, inside Topleve, and wire through.  This inserted Component would have regular ClockDomain inherited and the MyCounter would be a child module inside.  This may better emphasis what is already happening with regards to the superior ClockDomain of the Component hierarchy.\r\n\r\nYou can wire thru the 3 signals.  When you inspect the new Toplevel module it will now have 5 signals.  `clk, reset, io_clk, io_reset, io_num`\r\n\r\nAgain you still need to manually stimulate your io_* signals, but you will forkStimulus() is managing the other 2 signals `clk` and `reset`.\r\n\r\n\r\n**4)** Remove the 2 signals `clk` and `reset` from the io Bundle (delete the lines of code).  Yes this isn&#39;t exactly as the demonstration code in the SpinalHDL documentation suggests, but the other options exist above if you really need that.\r\n\r\nThen modify the 2 lines for the ClockDomain setup to read:\r\n\r\n```\r\n  clock = clockDomain.readClockWire,\r\n  reset = clockDomain.readResetWire,\r\n```\r\n\r\nKeep `forkStimulus()` because now you have a conforming toplevel Componment that regular `clk` and `reset` signals, which the SpinalSim expects to work with.   This can be confirmed if you examine the elaborated/generated `MyCounter.v` file, you will see, even after deleting the 2 signals you get the signals emitted by using the normal name, not `io_clk` and not `io_reset`.\r\n\r\n...\r\n\r\nUse of `dut.clockDomain.assertReset()` maybe problematic while using `forkStimulus()` that will also be manipulating the reset status early on after simulation startup.\r\n\r\nMaybe this ok, when `simTime()` is greater than a number, lets say 100.  The `forkStimulus()` call will generate reset line edges early in simulation but that should all be over by simulation step&gt;100.\r\n","title":"SpinalHDL ConfigClockDomain not work, how to drive configured clock domain when simulating?","body":"<p>A few things to point out.</p>\n<p>While the design is a copy from documentation, it doesn't really have multiple ClockDomains being used.  There is an implied toplevel ClockDomain that already exists can can be accessed with <code>this.clockDomain</code> from the Component.</p>\n<p>Because all the active logic of the counter is tied to one ClockDomain (the one you created) and nothing is attached to the implicit clock domain the signals relating to the implicit ClockDomain may have got pruned from the Verilog.</p>\n<p>But conceptually with SpinalHDL a <code>Component</code> always has a superior clock domain above it that it is attached to.  So the superior clock domain does not go away, even if signals do not appear to exist for it.</p>\n<p>...</p>\n<p>You do not call <code>dut.clockDomain.waitSampling()</code> at any time to provide control to the simulator to do work.  Because of this simulation time (as reported by <code>simTime()</code>) is always zero.  This simTime=0 is an indicator the simulator is not getting to simulate anything.</p>\n<p>Maybe insert calls before <code>dut.clockDomain.waitSampling(count=50)</code>, inside <code>dut.clockDomain.waitSampling(count=1)</code> and after <code>dut.clockDomain.waitSampling(count=50)</code> the for() loop.</p>\n<p>Due to this you might hit the simTimeout() limit that has been set low at 1000, maybe increase this to 1000000.</p>\n<p>...</p>\n<p>One issue if you are using the MyCounter as a toplevel module for SpinalSim and attempting to use APIs like forkStimulus() that assume the 'clk' and 'reset' implicit signals at the top level.</p>\n<p><strong>A few solutions:</strong></p>\n<p><strong>1)</strong> Use SpinalHDL to elaborate the <code>MyCounter.v</code> file generated from your <code>MyCounterVerilog</code> main and create an independent testbench (that is not SpinalSim), that would drive the <code>io_clk</code> and <code>io_reset</code> as you expect.</p>\n<p>This could be Verilator or cocotb or something-else, etc... a simulator that works with a Verilog file, this will demonstrate the Verilog design does work as generated by SpinalHDL.</p>\n<p><strong>2)</strong> If you wish to use SpinalSim, don't expect any assistance from <code>forkStimulus()</code> API in your SpinalSim to manage a toplevel clk/reset signals if your toplevel design does not conform to what it expects.   That the toplevel module is attached to <code>this.clockDomain.readClockWire</code> as the master clock.</p>\n<p>If you examine the generated verilog from suggestion 1 above, it has no toplevel signals called <code>clk</code> or <code>reset</code>.  Even if you attempt to rename your signal with <code>setName(&quot;clk&quot;)</code> or use <code>noIoPrefix()</code> I think you will run into problems because the implicit signal just gets renamed (maybe to <code>clk_1</code>) and still doesn't become joined to your signal.</p>\n<p>Instead to simulate this module you need to directly manage your independant clock in your simulation code.\nFrom your code the lines, try a sequence like:</p>\n<pre><code>var myClock = false  // Consider using AtomicBoolean\nvar myReset = false  // Consider using AtomicBoolean\ndut.clockDomain.onSamplings({\n  myClock = !myClock\n  dut.io.clk #= myClock\n  dut.io.reset #= myReset\n})\n</code></pre>\n<p>Here you are taking control of the clock signal directly, not relying on <code>forkStimulus()</code> to assist.  So remove the <code>forkStimulus()</code> line of code.</p>\n<p>Due to this, consider the removal of <code>assertReset()</code> if you need to achieve this change the myReset state.  Again use of the API assume you are using the implicit toplevel ClockDomain.</p>\n<p><strong>3)</strong> Insert a <code>Toplevel extends Component</code> module that is the toplevel for the Sim.  Place your <code>MyCounter extends Component</code> module, inside Topleve, and wire through.  This inserted Component would have regular ClockDomain inherited and the MyCounter would be a child module inside.  This may better emphasis what is already happening with regards to the superior ClockDomain of the Component hierarchy.</p>\n<p>You can wire thru the 3 signals.  When you inspect the new Toplevel module it will now have 5 signals.  <code>clk, reset, io_clk, io_reset, io_num</code></p>\n<p>Again you still need to manually stimulate your io_* signals, but you will forkStimulus() is managing the other 2 signals <code>clk</code> and <code>reset</code>.</p>\n<p><strong>4)</strong> Remove the 2 signals <code>clk</code> and <code>reset</code> from the io Bundle (delete the lines of code).  Yes this isn't exactly as the demonstration code in the SpinalHDL documentation suggests, but the other options exist above if you really need that.</p>\n<p>Then modify the 2 lines for the ClockDomain setup to read:</p>\n<pre><code>  clock = clockDomain.readClockWire,\n  reset = clockDomain.readResetWire,\n</code></pre>\n<p>Keep <code>forkStimulus()</code> because now you have a conforming toplevel Componment that regular <code>clk</code> and <code>reset</code> signals, which the SpinalSim expects to work with.   This can be confirmed if you examine the elaborated/generated <code>MyCounter.v</code> file, you will see, even after deleting the 2 signals you get the signals emitted by using the normal name, not <code>io_clk</code> and not <code>io_reset</code>.</p>\n<p>...</p>\n<p>Use of <code>dut.clockDomain.assertReset()</code> maybe problematic while using <code>forkStimulus()</code> that will also be manipulating the reset status early on after simulation startup.</p>\n<p>Maybe this ok, when <code>simTime()</code> is greater than a number, lets say 100.  The <code>forkStimulus()</code> call will generate reset line edges early in simulation but that should all be over by simulation step&gt;100.</p>\n"}],"owner":{"account_id":16346344,"reputation":31,"user_id":11805981,"display_name":"BossWangST"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684753945,"creation_date":1656857956,"question_id":72847225,"body_markdown":"# ClockDomainConfig Problem in SpinalHDL\r\nI tried to write a simple spinal HDL demo according to [ClockDomainConfig Example](https://spinalhdl.github.io/SpinalDoc-RTD/master/SpinalHDL/Structuring/clock_domain.html) to test a configured clock domain and an Area which use the clock domain. \r\n\r\nHere is my simple counter:\r\n```\r\npackage mytest\r\n\r\nimport spinal.core._\r\nimport spinal.core.sim._\r\nimport spinal.lib._\r\n\r\nclass MyCounter extends Component {\r\n  val io = new Bundle {\r\n    val clk = in Bool() simPublic()\r\n    val rst = in Bool() simPublic()\r\n    val num = out UInt (16 bits)\r\n  }\r\n  val myClockDomain = ClockDomain(\r\n    clock = io.clk,\r\n    reset = io.rst,\r\n    config = ClockDomainConfig(\r\n      clockEdge = FALLING,\r\n      resetKind = ASYNC,\r\n      resetActiveLevel = HIGH\r\n    )\r\n  )\r\n  val counterArea = new ClockingArea(myClockDomain) {\r\n    val counter = RegInit(U&quot;16&#39;xffff&quot;)\r\n    counter := counter + 1\r\n    io.num := counter\r\n  }\r\n}\r\n\r\nobject MyCounterVerilog {\r\n  def main(args: Array[String]): Unit = {\r\n    SpinalVerilog(new MyCounter)\r\n  }\r\n}\r\n\r\n```\r\n\r\nAlso here is my simulate object:\r\n```\r\nackage mytest\r\n\r\nimport spinal.core._\r\nimport spinal.sim._\r\nimport spinal.core.sim._\r\n\r\n//MyCounter&#39;s testbench\r\nobject MyCounterSim {\r\n  def main(args: Array[String]) {\r\n    SimConfig.withWave.compile(new MyCounter).doSim { dut =&gt;\r\n      //get clock\r\n      dut.clockDomain.forkStimulus(period = 10) //10 ps\r\n      SimTimeout(1000)\r\n      dut.io.clk #= dut.clockDomain.clock.toBoolean\r\n      dut.io.rst #= dut.clockDomain.reset.toBoolean\r\n      for (i &lt;- 0 until 100) {\r\n        if (i == 50)\r\n          dut.clockDomain.assertReset()\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nBut when I attempt to simulate, the JAVA reports such an Error:\r\n```\r\nException in thread &quot;main&quot; java.util.NoSuchElementException: key not found: (clk :  Bool)\r\n\tat scala.collection.MapLike$class.default(MapLike.scala:228)\r\n\tat scala.collection.AbstractMap.default(Map.scala:59)\r\n\tat scala.collection.mutable.HashMap.apply(HashMap.scala:65)\r\n\tat spinal.core.sim.package$SimClockDomainPimper.getBool(package.scala:449)\r\n\tat spinal.core.sim.package$SimClockDomainPimper.getSignal(package.scala:454)\r\n\tat spinal.core.sim.package$SimClockDomainPimper.fallingEdge(package.scala:471)\r\n\tat spinal.core.sim.package$SimClockDomainPimper.forkStimulus(package.scala:663)\r\n\tat mytest.MyCounterSim$$anonfun$main$2.apply(MyCounterSim.scala:12)\r\n\tat mytest.MyCounterSim$$anonfun$main$2.apply(MyCounterSim.scala:10)\r\n\tat spinal.core.sim.SimCompiled$$anonfun$doSimApi$2.apply$mcV$sp(SimBootstraps.scala:538)\r\n\tat spinal.sim.SimManager.spinal$sim$SimManager$$threadBody$1(SimManager.scala:222)\r\n\tat spinal.sim.SimManager$$anonfun$2.apply$mcV$sp(SimManager.scala:225)\r\n\tat spinal.sim.SimThread$$anonfun$1.apply$mcV$sp(SimThread.scala:93)\r\n\tat spinal.sim.JvmThread.run(SimManager.scala:51)\r\n```\r\n\r\nI do not know how does the problem pop up. When I test the MyCounter without an configured clock domain, everything works well. But once I add the `myClockDomain`, the error occurs.\r\n\r\nMy JDK version is OpenJDK 17.0.2 2022-01-18\r\n\r\nsbt version is 1.6.2\r\n\r\nverilator version is 4.222 2022-05-02\r\n\r\nIDE is IntelliJ IDEA","title":"SpinalHDL ConfigClockDomain not work, how to drive configured clock domain when simulating?","body":"<h1>ClockDomainConfig Problem in SpinalHDL</h1>\n<p>I tried to write a simple spinal HDL demo according to <a href=\"https://spinalhdl.github.io/SpinalDoc-RTD/master/SpinalHDL/Structuring/clock_domain.html\" rel=\"nofollow noreferrer\">ClockDomainConfig Example</a> to test a configured clock domain and an Area which use the clock domain.</p>\n<p>Here is my simple counter:</p>\n<pre><code>package mytest\n\nimport spinal.core._\nimport spinal.core.sim._\nimport spinal.lib._\n\nclass MyCounter extends Component {\n  val io = new Bundle {\n    val clk = in Bool() simPublic()\n    val rst = in Bool() simPublic()\n    val num = out UInt (16 bits)\n  }\n  val myClockDomain = ClockDomain(\n    clock = io.clk,\n    reset = io.rst,\n    config = ClockDomainConfig(\n      clockEdge = FALLING,\n      resetKind = ASYNC,\n      resetActiveLevel = HIGH\n    )\n  )\n  val counterArea = new ClockingArea(myClockDomain) {\n    val counter = RegInit(U&quot;16'xffff&quot;)\n    counter := counter + 1\n    io.num := counter\n  }\n}\n\nobject MyCounterVerilog {\n  def main(args: Array[String]): Unit = {\n    SpinalVerilog(new MyCounter)\n  }\n}\n\n</code></pre>\n<p>Also here is my simulate object:</p>\n<pre><code>ackage mytest\n\nimport spinal.core._\nimport spinal.sim._\nimport spinal.core.sim._\n\n//MyCounter's testbench\nobject MyCounterSim {\n  def main(args: Array[String]) {\n    SimConfig.withWave.compile(new MyCounter).doSim { dut =&gt;\n      //get clock\n      dut.clockDomain.forkStimulus(period = 10) //10 ps\n      SimTimeout(1000)\n      dut.io.clk #= dut.clockDomain.clock.toBoolean\n      dut.io.rst #= dut.clockDomain.reset.toBoolean\n      for (i &lt;- 0 until 100) {\n        if (i == 50)\n          dut.clockDomain.assertReset()\n      }\n    }\n  }\n}\n</code></pre>\n<p>But when I attempt to simulate, the JAVA reports such an Error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.NoSuchElementException: key not found: (clk :  Bool)\n    at scala.collection.MapLike$class.default(MapLike.scala:228)\n    at scala.collection.AbstractMap.default(Map.scala:59)\n    at scala.collection.mutable.HashMap.apply(HashMap.scala:65)\n    at spinal.core.sim.package$SimClockDomainPimper.getBool(package.scala:449)\n    at spinal.core.sim.package$SimClockDomainPimper.getSignal(package.scala:454)\n    at spinal.core.sim.package$SimClockDomainPimper.fallingEdge(package.scala:471)\n    at spinal.core.sim.package$SimClockDomainPimper.forkStimulus(package.scala:663)\n    at mytest.MyCounterSim$$anonfun$main$2.apply(MyCounterSim.scala:12)\n    at mytest.MyCounterSim$$anonfun$main$2.apply(MyCounterSim.scala:10)\n    at spinal.core.sim.SimCompiled$$anonfun$doSimApi$2.apply$mcV$sp(SimBootstraps.scala:538)\n    at spinal.sim.SimManager.spinal$sim$SimManager$$threadBody$1(SimManager.scala:222)\n    at spinal.sim.SimManager$$anonfun$2.apply$mcV$sp(SimManager.scala:225)\n    at spinal.sim.SimThread$$anonfun$1.apply$mcV$sp(SimThread.scala:93)\n    at spinal.sim.JvmThread.run(SimManager.scala:51)\n</code></pre>\n<p>I do not know how does the problem pop up. When I test the MyCounter without an configured clock domain, everything works well. But once I add the <code>myClockDomain</code>, the error occurs.</p>\n<p>My JDK version is OpenJDK 17.0.2 2022-01-18</p>\n<p>sbt version is 1.6.2</p>\n<p>verilator version is 4.222 2022-05-02</p>\n<p>IDE is IntelliJ IDEA</p>\n"},{"tags":["java","image","type-conversion","bufferedimage"],"answers":[{"comments":[{"owner":{"account_id":225072,"reputation":81659,"user_id":485343,"accept_rate":75,"display_name":"rustyx"},"score":1,"creation_date":1547811267,"post_id":54253015,"comment_id":95330225,"body_markdown":"Why not `TYPE_BYTE_GRAY`?","body":"Why not <code>TYPE_BYTE_GRAY</code>?"},{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":0,"creation_date":1547812404,"post_id":54253015,"comment_id":95330826,"body_markdown":"What should the `round` call accomplish here?","body":"What should the <code>round</code> call accomplish here?"},{"owner":{"account_id":7977662,"reputation":69,"user_id":6020261,"display_name":"Alexander Shaw"},"score":0,"creation_date":1547814373,"post_id":54253015,"comment_id":95331835,"body_markdown":"@rustyx It worked for me as well, though the contrast level was too low and due to that, some areas of the image were super dark. With the `TYPE_BYTE_INDEXED` everything looks OK (I used [http://rawpixels.net/](http://rawpixels.net/) to make a comparison).","body":"@rustyx It worked for me as well, though the contrast level was too low and due to that, some areas of the image were super dark. With the <code>TYPE_BYTE_INDEXED</code> everything looks OK (I used <a href=\"http://rawpixels.net/\" rel=\"nofollow noreferrer\">http://rawpixels.net/</a> to make a comparison)."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1547817940,"post_id":54253015,"comment_id":95333717,"body_markdown":"Using `TYPE_BYTE_INDEXED` without an explicit `IndexColorModel` parameter, will give you a default model, which is the [216 web safe colors](https://en.wikipedia.org/wiki/Web_colors#Color_table) + 40 grays. You will certainly lose some fidelity here. Also, the inverse lookup that happens using `setRGB` on a `BufferedImage` with `IndexColorModel` is *really* slow.","body":"Using <code>TYPE_BYTE_INDEXED</code> without an explicit <code>IndexColorModel</code> parameter, will give you a default model, which is the <a href=\"https://en.wikipedia.org/wiki/Web_colors#Color_table\" rel=\"nofollow noreferrer\">216 web safe colors</a> + 40 grays. You will certainly lose some fidelity here. Also, the inverse lookup that happens using <code>setRGB</code> on a <code>BufferedImage</code> with <code>IndexColorModel</code> is <i>really</i> slow."}],"tags":[],"owner":{"account_id":7977662,"reputation":69,"user_id":6020261,"display_name":"Alexander Shaw"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684753782,"creation_date":1547810754,"answer_id":54253015,"question_id":54252367,"body_markdown":"I&#39;ve managed to do the conversion for the 640x480 resolution the following way:\r\n\r\n    BufferedImage image = new BufferedImage(640,480,BufferedImage.TYPE_BYTE_INDEXED);\r\n\r\n    int i = 0;\r\n    for(int y = 0; y &lt; 480; y++)\r\n    {\r\n        for(int x = 0; x &lt; 640; x++)\r\n        {\r\n            int g = imageBytes[i++] &amp; 0xFF;\r\n            image.setRGB(x,y,new Color(g,g,g).getRGB());\r\n        }\r\n    }\r\n\r\nEDIT: removed useless code (thanks to Marco13)","title":"Convert 8bit Grayscale image byte array to a BufferedImage","body":"<p>I've managed to do the conversion for the 640x480 resolution the following way:</p>\n<pre><code>BufferedImage image = new BufferedImage(640,480,BufferedImage.TYPE_BYTE_INDEXED);\n\nint i = 0;\nfor(int y = 0; y &lt; 480; y++)\n{\n    for(int x = 0; x &lt; 640; x++)\n    {\n        int g = imageBytes[i++] &amp; 0xFF;\n        image.setRGB(x,y,new Color(g,g,g).getRGB());\n    }\n}\n</code></pre>\n<p>EDIT: removed useless code (thanks to Marco13)</p>\n"},{"tags":[],"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1547817534,"creation_date":1547814513,"answer_id":54254056,"question_id":54252367,"body_markdown":"There are two good ways to do this, depending on your use case. \r\n\r\nEither create a new, gray image, and copy the data into it. This will keep the image &quot;managed&quot;, which may lead to better rendering performance (ie. on screen). But it will need twice as much memory, and copy the data from your input to the image.\r\n\r\nThe other, is to create the gray image directly &quot;around&quot; your existing pixel data. This will be faster, and use almost no extra heap, as it avoids copying the pixel data. But the image will not be managed (as the backing array is exposed and mutable).\r\n\r\nBoth options are demonstrated below:\r\n\r\n    int w = 640;\r\n    int h = 480;\r\n\r\n    byte[] imageBytes = new byte[w * h];\r\n\r\n    // 1 Keeps the image &quot;managed&quot; at the expense of twice the memory + a large array copy\r\n    BufferedImage image = new BufferedImage(w, h, BufferedImage.TYPE_BYTE_GRAY);\r\n    image.getRaster().setDataElements(0, 0, w, h, imageBytes);\r\n\r\n    System.out.println(&quot;image: &quot; + image);\r\n\r\n    // 2 Faster, and uses less memory, but will make the image &quot;unmanaged&quot;\r\n    ColorModel cm = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_GRAY), false, false, Transparency.OPAQUE, DataBuffer.TYPE_BYTE);\r\n    WritableRaster raster = Raster.createInterleavedRaster(new DataBufferByte(imageBytes, imageBytes.length), w, h, w, 1, new int[]{0}, null);\r\n    BufferedImage image2 = new BufferedImage(cm, raster, cm.isAlphaPremultiplied(), null);\r\n\r\n    System.out.println(&quot;image2: &quot; + image2);\r\n\r\nIf the image data isn&#39;t in linear gray color space, one could use an `IndexColorModel` to map the input into whatever range you want:\r\n\r\n    // Alternate, using IndexColorModel, if your input isn&#39;t in linear gray color space\r\n    int[] cmap = new int[256]; // TODO: Add ARGB packed colors here...\r\n    IndexColorModel icm = new IndexColorModel(8, 256, cmap, 0, false, -1, DataBuffer.TYPE_BYTE);\r\n\r\n    // As 1\r\n    BufferedImage image3 = new BufferedImage(w, h, BufferedImage.TYPE_BYTE_INDEXED, icm);\r\n    image3.getRaster().setDataElements(0, 0, w, h, imageBytes);\r\n    System.out.println(&quot;image3: &quot; + image3);\r\n\r\n    // As 2\r\n    BufferedImage image4 = new BufferedImage(icm, raster, cm.isAlphaPremultiplied(), null);\r\n\r\n    System.out.println(&quot;image4: &quot; + image4);\r\n","title":"Convert 8bit Grayscale image byte array to a BufferedImage","body":"<p>There are two good ways to do this, depending on your use case. </p>\n\n<p>Either create a new, gray image, and copy the data into it. This will keep the image \"managed\", which may lead to better rendering performance (ie. on screen). But it will need twice as much memory, and copy the data from your input to the image.</p>\n\n<p>The other, is to create the gray image directly \"around\" your existing pixel data. This will be faster, and use almost no extra heap, as it avoids copying the pixel data. But the image will not be managed (as the backing array is exposed and mutable).</p>\n\n<p>Both options are demonstrated below:</p>\n\n<pre><code>int w = 640;\nint h = 480;\n\nbyte[] imageBytes = new byte[w * h];\n\n// 1 Keeps the image \"managed\" at the expense of twice the memory + a large array copy\nBufferedImage image = new BufferedImage(w, h, BufferedImage.TYPE_BYTE_GRAY);\nimage.getRaster().setDataElements(0, 0, w, h, imageBytes);\n\nSystem.out.println(\"image: \" + image);\n\n// 2 Faster, and uses less memory, but will make the image \"unmanaged\"\nColorModel cm = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_GRAY), false, false, Transparency.OPAQUE, DataBuffer.TYPE_BYTE);\nWritableRaster raster = Raster.createInterleavedRaster(new DataBufferByte(imageBytes, imageBytes.length), w, h, w, 1, new int[]{0}, null);\nBufferedImage image2 = new BufferedImage(cm, raster, cm.isAlphaPremultiplied(), null);\n\nSystem.out.println(\"image2: \" + image2);\n</code></pre>\n\n<p>If the image data isn't in linear gray color space, one could use an <code>IndexColorModel</code> to map the input into whatever range you want:</p>\n\n<pre><code>// Alternate, using IndexColorModel, if your input isn't in linear gray color space\nint[] cmap = new int[256]; // TODO: Add ARGB packed colors here...\nIndexColorModel icm = new IndexColorModel(8, 256, cmap, 0, false, -1, DataBuffer.TYPE_BYTE);\n\n// As 1\nBufferedImage image3 = new BufferedImage(w, h, BufferedImage.TYPE_BYTE_INDEXED, icm);\nimage3.getRaster().setDataElements(0, 0, w, h, imageBytes);\nSystem.out.println(\"image3: \" + image3);\n\n// As 2\nBufferedImage image4 = new BufferedImage(icm, raster, cm.isAlphaPremultiplied(), null);\n\nSystem.out.println(\"image4: \" + image4);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12016455,"reputation":1936,"user_id":8791436,"display_name":"mindlid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620372445,"creation_date":1620369482,"answer_id":67430088,"question_id":54252367,"body_markdown":"Java\r\n\r\n     BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);\r\n     image.getRaster().setDataElements(0, 0, width, height, array));\r\n\r\nKotlin\r\n\r\n\r\n    val image = BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY)\r\n    image.raster.setDataElements(0, 0, width, height, byteArray )","title":"Convert 8bit Grayscale image byte array to a BufferedImage","body":"<p>Java</p>\n<pre><code> BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);\n image.getRaster().setDataElements(0, 0, width, height, array));\n</code></pre>\n<p>Kotlin</p>\n<pre><code>val image = BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY)\nimage.raster.setDataElements(0, 0, width, height, byteArray )\n</code></pre>\n"}],"owner":{"account_id":7977662,"reputation":69,"user_id":6020261,"display_name":"Alexander Shaw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54254056,"answer_count":3,"score":0,"last_activity_date":1684753782,"creation_date":1547808458,"question_id":54252367,"body_markdown":"I have a byte array containing data of the raw grayscale 8bit image, which I need to convert to a BufferedImage. I&#39;ve tried doing:\r\n\r\n    BufferedImage image = ImageIO.read(new ByteArrayInputStream(bytes));\r\n\r\nHowever, the resulting `image` object is null which means I&#39;m doing something wrong here. \r\n\r\nWhat&#39;s the correct way of making such a conversion?","title":"Convert 8bit Grayscale image byte array to a BufferedImage","body":"<p>I have a byte array containing data of the raw grayscale 8bit image, which I need to convert to a BufferedImage. I've tried doing:</p>\n\n<pre><code>BufferedImage image = ImageIO.read(new ByteArrayInputStream(bytes));\n</code></pre>\n\n<p>However, the resulting <code>image</code> object is null which means I'm doing something wrong here. </p>\n\n<p>What's the correct way of making such a conversion?</p>\n"},{"tags":["java","spring","netty","ocsp"],"owner":{"account_id":27884225,"reputation":36,"user_id":21292052,"display_name":"user21292052"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684753605,"creation_date":1677435524,"question_id":75574097,"body_markdown":"We have a reactive application (server) written in Java 17 using Spring Webflux via Spring Boot 3.x.  \r\nBut when trying to use it together with a TLS certificate that has the must-staple extension (formally known as [status_request](https://www.rfc-editor.org/rfc/rfc6066#section-8)) one cannot create a connection. When accessing the API via Firefox one receives the error `MOZILLA_PKIX_ERROR_REQUIRED_TLS_FEATURE_MISSING`, similarly `openssl s_client -connect &lt;application-address&gt; -status -tlsextdebug &lt; /dev/null 2&gt;&amp;1 | grep -i &quot;OCSP response&quot;` yields `OCSP response: no response sent`.\r\n\r\nAn easy way to receive such a certificate would be to pass the `--staple-ocsp --must-staple` flags to certbot.\r\n\r\nWhat must be done that the Spring Webflux Server using Netty serves stapled OCSP responses?\r\n\r\nI have searched around a lot already and couldn&#39;t find anything useful.\r\n\r\nI found that the [JDK](https://docs.oracle.com/en/java/javase/17/security/java-pki-programmers-guide.html#GUID-E6E737DB-4000-4005-969E-BCD0238B1566) has built-in support for OCSP since JDK 9, though no mention about OCSP stapling and setting the `ocsp.enable` security property to `true` doesn&#39;t help either.\r\n\r\nNetty seems to have some OCSP support in [netty-handler-ssl-ocsp](https://netty.io/4.1/api/io/netty/handler/ssl/ocsp/package-summary.html), though simply adding it doesn&#39;t solve it either and I don&#39;t know what to do with the classes and it too looks more like a client side support to me.\r\n\r\nAlso there seems to be support in [netty-tcnative](https://github.com/netty/netty/commit/077a1988b9c96b5f3e5693a3bb1b2e118992f3a8), but we don&#39;t use Tomcat nor Tomcat Native Fork for Netty and I don&#39;t see how this helps me with the standard Spring setup.\r\n\r\nWe are also not using Apache or Nginx so the plentiful resources how to enable OCSP stapling with them didn&#39;t help either.","title":"How to enable OCSP stapling in a Spring Webflux application?","body":"<p>We have a reactive application (server) written in Java 17 using Spring Webflux via Spring Boot 3.x.<br />\nBut when trying to use it together with a TLS certificate that has the must-staple extension (formally known as <a href=\"https://www.rfc-editor.org/rfc/rfc6066#section-8\" rel=\"nofollow noreferrer\">status_request</a>) one cannot create a connection. When accessing the API via Firefox one receives the error <code>MOZILLA_PKIX_ERROR_REQUIRED_TLS_FEATURE_MISSING</code>, similarly <code>openssl s_client -connect &lt;application-address&gt; -status -tlsextdebug &lt; /dev/null 2&gt;&amp;1 | grep -i &quot;OCSP response&quot;</code> yields <code>OCSP response: no response sent</code>.</p>\n<p>An easy way to receive such a certificate would be to pass the <code>--staple-ocsp --must-staple</code> flags to certbot.</p>\n<p>What must be done that the Spring Webflux Server using Netty serves stapled OCSP responses?</p>\n<p>I have searched around a lot already and couldn't find anything useful.</p>\n<p>I found that the <a href=\"https://docs.oracle.com/en/java/javase/17/security/java-pki-programmers-guide.html#GUID-E6E737DB-4000-4005-969E-BCD0238B1566\" rel=\"nofollow noreferrer\">JDK</a> has built-in support for OCSP since JDK 9, though no mention about OCSP stapling and setting the <code>ocsp.enable</code> security property to <code>true</code> doesn't help either.</p>\n<p>Netty seems to have some OCSP support in <a href=\"https://netty.io/4.1/api/io/netty/handler/ssl/ocsp/package-summary.html\" rel=\"nofollow noreferrer\">netty-handler-ssl-ocsp</a>, though simply adding it doesn't solve it either and I don't know what to do with the classes and it too looks more like a client side support to me.</p>\n<p>Also there seems to be support in <a href=\"https://github.com/netty/netty/commit/077a1988b9c96b5f3e5693a3bb1b2e118992f3a8\" rel=\"nofollow noreferrer\">netty-tcnative</a>, but we don't use Tomcat nor Tomcat Native Fork for Netty and I don't see how this helps me with the standard Spring setup.</p>\n<p>We are also not using Apache or Nginx so the plentiful resources how to enable OCSP stapling with them didn't help either.</p>\n"},{"tags":["java","maven","testing","karate","junit5"],"comments":[{"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1684762395,"post_id":76305530,"comment_id":134559897,"body_markdown":"I have no idea about this, hope someone good at junit can answer. if it helps, karate does not &quot;require&quot; JUnit if you use the `Runner` API directly: https://stackoverflow.com/a/65578167/143475","body":"I have no idea about this, hope someone good at junit can answer. if it helps, karate does not &quot;require&quot; JUnit if you use the <code>Runner</code> API directly: <a href=\"https://stackoverflow.com/a/65578167/143475\">stackoverflow.com/a/65578167/143475</a>"}],"owner":{"account_id":8484598,"reputation":51,"user_id":6363250,"display_name":"Ahmed Hammad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684753565,"creation_date":1684753565,"question_id":76305530,"body_markdown":"I would like to run test cases at test project that include 2 modules karate framework and Junit5, and I want to specify the tag name for the test cases that I need to run.\r\n\r\nI tried\r\n```mvn clean install -Dkarate.options=&quot;--tags @pass&quot; -Dgroups=@pass``` but it doesn&#39;t work as karate modules doesn&#39;t fetch scenarios with tag name ```@pass```.\r\nand when I remove ```@-Dgroups=@pass``` it works karate scenarios works fine. \r\n\r\nso I think there is an interfere between environment parameter karate.options and groups.\r\n\r\nhow can I run test cases with specific tag name with one command in both modules?\r\n","title":"Run Test cases from karate and Junit5 module together","body":"<p>I would like to run test cases at test project that include 2 modules karate framework and Junit5, and I want to specify the tag name for the test cases that I need to run.</p>\n<p>I tried\n<code>mvn clean install -Dkarate.options=&quot;--tags @pass&quot; -Dgroups=@pass</code> but it doesn't work as karate modules doesn't fetch scenarios with tag name <code>@pass</code>.\nand when I remove <code>@-Dgroups=@pass</code> it works karate scenarios works fine.</p>\n<p>so I think there is an interfere between environment parameter karate.options and groups.</p>\n<p>how can I run test cases with specific tag name with one command in both modules?</p>\n"},{"tags":["java","android","paypal","lifecycle"],"owner":{"account_id":28653600,"reputation":1,"user_id":21940104,"display_name":"Carlos Alonso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684753485,"creation_date":1684753485,"question_id":76305519,"body_markdown":"Im trying to implement paypal in my android app. Im using java.\r\n\r\nimplementation &#39;com.paypal.checkout:android-sdk:0.2.0&#39;\r\n\r\nBut i get this 3 errors:\r\n\r\nFailed to resolve: android.arch.lifecycle:extensions:2.1.0\r\nShow in Project Structure dialog\r\nAffected Modules: app\r\nFailed to resolve: android.arch.lifecycle:runtime:2.1.0\r\nShow in Project Structure dialog\r\nAffected Modules: app\r\nFailed to resolve: org.jfrog.cardinalcommerce.gradle:cardinalmobilesdk:2.2.4-1\r\nShow in Project Structure dialog\r\nAffected Modules: app\r\n\r\nI tried to implement this but doesn&#39;t fix the problems. \r\n\r\nhttps://developer.android.com/jetpack/androidx/releases/lifecycle?hl=es-419#java\r\n`def lifecycle_version = &quot;2.5.1&quot;\r\n        def arch_version = &quot;2.1.0&quot;\r\n\r\n        // ViewModel\r\n        implementation &quot;androidx.lifecycle:lifecycle-viewmodel:$lifecycle_version&quot;\r\n        // LiveData\r\n        implementation &quot;androidx.lifecycle:lifecycle-livedata:$lifecycle_version&quot;\r\n        // Lifecycles only (without ViewModel or LiveData)\r\n        implementation &quot;androidx.lifecycle:lifecycle-runtime:$lifecycle_version&quot;\r\n\r\n        // Saved state module for ViewModel\r\n        implementation &quot;androidx.lifecycle:lifecycle-viewmodel-savedstate:$lifecycle_version&quot;\r\n\r\n        // Annotation processor\r\n        annotationProcessor &quot;androidx.lifecycle:lifecycle-compiler:$lifecycle_version&quot;\r\n        // alternately - if using Java8, use the following instead of lifecycle-compiler\r\n        implementation &quot;androidx.lifecycle:lifecycle-common-java8:$lifecycle_version&quot;\r\n\r\n        // optional - helpers for implementing LifecycleOwner in a Service\r\n        implementation &quot;androidx.lifecycle:lifecycle-service:$lifecycle_version&quot;\r\n\r\n        // optional - ProcessLifecycleOwner provides a lifecycle for the whole application process\r\n        implementation &quot;androidx.lifecycle:lifecycle-process:$lifecycle_version&quot;\r\n\r\n        // optional - ReactiveStreams support for LiveData\r\n        implementation &quot;androidx.lifecycle:lifecycle-reactivestreams:$lifecycle_version&quot;\r\n\r\n        // optional - Test helpers for LiveData\r\n        testImplementation &quot;androidx.arch.core:core-testing:$arch_version&quot;\r\n\r\n        // optional - Test helpers for Lifecycle runtime\r\n        testImplementation &quot;androidx.lifecycle:lifecycle-runtime-testing:$lifecycle_version&quot;`","title":"Implementing PayPal with Java in Android app is showing &quot;Failed to resolve&quot; errors. What could be the causes and how to resolve them?","body":"<p>Im trying to implement paypal in my android app. Im using java.</p>\n<p>implementation 'com.paypal.checkout:android-sdk:0.2.0'</p>\n<p>But i get this 3 errors:</p>\n<p>Failed to resolve: android.arch.lifecycle:extensions:2.1.0\nShow in Project Structure dialog\nAffected Modules: app\nFailed to resolve: android.arch.lifecycle:runtime:2.1.0\nShow in Project Structure dialog\nAffected Modules: app\nFailed to resolve: org.jfrog.cardinalcommerce.gradle:cardinalmobilesdk:2.2.4-1\nShow in Project Structure dialog\nAffected Modules: app</p>\n<p>I tried to implement this but doesn't fix the problems.</p>\n<p><a href=\"https://developer.android.com/jetpack/androidx/releases/lifecycle?hl=es-419#java\" rel=\"nofollow noreferrer\">https://developer.android.com/jetpack/androidx/releases/lifecycle?hl=es-419#java</a>\n`def lifecycle_version = &quot;2.5.1&quot;\ndef arch_version = &quot;2.1.0&quot;</p>\n<pre><code>    // ViewModel\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel:$lifecycle_version&quot;\n    // LiveData\n    implementation &quot;androidx.lifecycle:lifecycle-livedata:$lifecycle_version&quot;\n    // Lifecycles only (without ViewModel or LiveData)\n    implementation &quot;androidx.lifecycle:lifecycle-runtime:$lifecycle_version&quot;\n\n    // Saved state module for ViewModel\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-savedstate:$lifecycle_version&quot;\n\n    // Annotation processor\n    annotationProcessor &quot;androidx.lifecycle:lifecycle-compiler:$lifecycle_version&quot;\n    // alternately - if using Java8, use the following instead of lifecycle-compiler\n    implementation &quot;androidx.lifecycle:lifecycle-common-java8:$lifecycle_version&quot;\n\n    // optional - helpers for implementing LifecycleOwner in a Service\n    implementation &quot;androidx.lifecycle:lifecycle-service:$lifecycle_version&quot;\n\n    // optional - ProcessLifecycleOwner provides a lifecycle for the whole application process\n    implementation &quot;androidx.lifecycle:lifecycle-process:$lifecycle_version&quot;\n\n    // optional - ReactiveStreams support for LiveData\n    implementation &quot;androidx.lifecycle:lifecycle-reactivestreams:$lifecycle_version&quot;\n\n    // optional - Test helpers for LiveData\n    testImplementation &quot;androidx.arch.core:core-testing:$arch_version&quot;\n\n    // optional - Test helpers for Lifecycle runtime\n    testImplementation &quot;androidx.lifecycle:lifecycle-runtime-testing:$lifecycle_version&quot;`\n</code></pre>\n"},{"tags":["java","regex","substring"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":2,"creation_date":1684713636,"post_id":76302363,"comment_id":134552648,"body_markdown":"What is the general syntax you start with?  You give one example, which makes it hard to decide what the general case is supposed to be. Somehow I don&#39;t think `s.substring(0,113)` is the exact answer you want.","body":"What is the general syntax you start with?  You give one example, which makes it hard to decide what the general case is supposed to be. Somehow I don&#39;t think <code>s.substring(0,113)</code> is the exact answer you want."}],"answers":[{"comments":[{"owner":{"account_id":12637935,"reputation":49,"user_id":9186497,"display_name":"dev007"},"score":0,"creation_date":1684716374,"post_id":76302380,"comment_id":134552871,"body_markdown":"edited the post.. resource_name is the generic name which I had given.. Can you please suggest me accordingly ?","body":"edited the post.. resource_name is the generic name which I had given.. Can you please suggest me accordingly ?"}],"tags":[],"owner":{"account_id":25909017,"reputation":554,"user_id":19633625,"display_name":"Louis"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684713723,"creation_date":1684713723,"answer_id":76302380,"question_id":76302363,"body_markdown":"I have two solutions.\r\nusing indexOf:\r\n```java\r\nString input = &quot;resourceId=/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name/i=xxxxxxxxx/y=2021/m=03/d=13/h=15/m=00/PT1H.json&quot;;\r\n\r\n// Find the index of &quot;resource_name&quot;\r\nint endIndex = input.indexOf(&quot;/resource_name&quot;);\r\n\r\n// Extract the substring until &quot;resource_name&quot;\r\nString substring = input.substring(0, endIndex);\r\n\r\nSystem.out.println(substring);\r\n```\r\n\r\nusing replaceAll:\r\n```java\r\nString input = &quot;resourceId=/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name/i=xxxxxxxxx/y=2021/m=03/d=13/h=15/m=00/PT1H.json&quot;;\r\n\r\nString regex = &quot;/resource_name.*$&quot;;\r\nString substring = input.replaceAll(regex, &quot;&quot;);\r\n\r\nSystem.out.println(substring);\r\n```\r\n\r\nIn my end, it works well. Hope these would give you help.","title":"How to fetch substring in required format from a String in java?","body":"<p>I have two solutions.\nusing indexOf:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;resourceId=/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name/i=xxxxxxxxx/y=2021/m=03/d=13/h=15/m=00/PT1H.json&quot;;\n\n// Find the index of &quot;resource_name&quot;\nint endIndex = input.indexOf(&quot;/resource_name&quot;);\n\n// Extract the substring until &quot;resource_name&quot;\nString substring = input.substring(0, endIndex);\n\nSystem.out.println(substring);\n</code></pre>\n<p>using replaceAll:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;resourceId=/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name/i=xxxxxxxxx/y=2021/m=03/d=13/h=15/m=00/PT1H.json&quot;;\n\nString regex = &quot;/resource_name.*$&quot;;\nString substring = input.replaceAll(regex, &quot;&quot;);\n\nSystem.out.println(substring);\n</code></pre>\n<p>In my end, it works well. Hope these would give you help.</p>\n"},{"comments":[{"owner":{"account_id":12637935,"reputation":49,"user_id":9186497,"display_name":"dev007"},"score":0,"creation_date":1684716430,"post_id":76302407,"comment_id":134552876,"body_markdown":"edited the question.. resource_name is the generic name which I had given.. Can you please suggest me accordingly ?","body":"edited the question.. resource_name is the generic name which I had given.. Can you please suggest me accordingly ?"}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684728111,"creation_date":1684714381,"answer_id":76302407,"question_id":76302363,"body_markdown":"There are a few ways to do this.\r\n\r\nYou can use a `Pattern` and `Matcher`, to isolate the data using a regular expression capture.\r\n\r\nOr, you can use a `replace` procedure to remove the data you don&#39;t want.\r\n\r\nOr, finally, you can use an `indexOf` procedure to acquire an end-index for a `substring` method.\r\n\r\nBecause of the simplicity, I recommend the final option.\r\n\r\nConsider the following method, `parse`, which takes the `String` value as the first parameter, and the starting and ending `String` values as the second and third parameter.\r\n\r\n```java\r\nString parse(String string, String start, String end) {\r\n    int indexOf = string.indexOf(start);\r\n    return string.substring(indexOf, string.indexOf(end) + end.length());\r\n}\r\n```\r\n\r\nAnd, here is an example of it&#39;s usage.\r\n\r\n```java\r\nString string = &quot;resourceId=/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name/i=xxxxxxxxx/y=2021/m=03/d=13/h=15/m=00/PT1H.json&quot;;\r\nString value = parse(string, &quot;subscriptions&quot;, &quot;resource_name&quot;);\r\nSystem.out.println(value);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nsubscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name\r\n```","title":"How to fetch substring in required format from a String in java?","body":"<p>There are a few ways to do this.</p>\n<p>You can use a <code>Pattern</code> and <code>Matcher</code>, to isolate the data using a regular expression capture.</p>\n<p>Or, you can use a <code>replace</code> procedure to remove the data you don't want.</p>\n<p>Or, finally, you can use an <code>indexOf</code> procedure to acquire an end-index for a <code>substring</code> method.</p>\n<p>Because of the simplicity, I recommend the final option.</p>\n<p>Consider the following method, <code>parse</code>, which takes the <code>String</code> value as the first parameter, and the starting and ending <code>String</code> values as the second and third parameter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String parse(String string, String start, String end) {\n    int indexOf = string.indexOf(start);\n    return string.substring(indexOf, string.indexOf(end) + end.length());\n}\n</code></pre>\n<p>And, here is an example of it's usage.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;resourceId=/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name/i=xxxxxxxxx/y=2021/m=03/d=13/h=15/m=00/PT1H.json&quot;;\nString value = parse(string, &quot;subscriptions&quot;, &quot;resource_name&quot;);\nSystem.out.println(value);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26073403,"reputation":13,"user_id":19772668,"display_name":"Vijay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684737483,"creation_date":1684736927,"answer_id":76303518,"question_id":76302363,"body_markdown":"You can do something like this,\r\n```\r\n String sample = &quot;resourceId=/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name/i=xxxxxxxxx/y=2021/m=03/d=13/h=15/m=00/PT1H.json&quot;;\r\n StringBuilder subString = new StringBuilder(sample.substring(11, sample.indexOf(&quot;/i=xxxxxxxxx&quot;));\r\n String endString = sample.substring(sample.indexOf(&quot;/i=xxxxxxxxx&quot;));\r\n int lastIndex=subString.lastIndexOf(&quot;/&quot;);\r\n new StringBuilder(subString.replace(lastIndex,subString.length(),&quot;/vm_name&quot;).append(endString));\r\n ```","title":"How to fetch substring in required format from a String in java?","body":"<p>You can do something like this,</p>\n<pre><code> String sample = &quot;resourceId=/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name/i=xxxxxxxxx/y=2021/m=03/d=13/h=15/m=00/PT1H.json&quot;;\n StringBuilder subString = new StringBuilder(sample.substring(11, sample.indexOf(&quot;/i=xxxxxxxxx&quot;));\n String endString = sample.substring(sample.indexOf(&quot;/i=xxxxxxxxx&quot;));\n int lastIndex=subString.lastIndexOf(&quot;/&quot;);\n new StringBuilder(subString.replace(lastIndex,subString.length(),&quot;/vm_name&quot;).append(endString));\n</code></pre>\n"}],"owner":{"account_id":12637935,"reputation":49,"user_id":9186497,"display_name":"dev007"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":76302407,"answer_count":3,"score":-2,"last_activity_date":1684753155,"creation_date":1684713132,"question_id":76302363,"body_markdown":"I have the String in the below format. \r\n\r\n    &quot;resourceId=/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name/i=xxxxxxxxx/y=2021/m=03/d=13/h=15/m=00/PT1H.json&quot;\r\n\r\nI&#39;m trying to fetch the substring in the below manner by ideally splitting the string based on &quot;/&quot; and fetch the first part of string until resource_name :\r\n\r\n    /subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name\r\n\r\nHow to achieve this format either by using substring or regEx in java?\r\n\r\nEdited\r\n---\r\n\r\nIn the given string ,resource_name will be substituted with vm_name or akv_name. It will be not be resource_name for ever in the string, have given generic name. \r\n\r\nBasically, I need to go until virtualMachines from the start and fetch the resource_name which is appended next to virtualMachines by a slash \r\n\r\nThen in this scenario.. how to handle it?\r\n\r\n","title":"How to fetch substring in required format from a String in java?","body":"<p>I have the String in the below format.</p>\n<pre><code>&quot;resourceId=/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name/i=xxxxxxxxx/y=2021/m=03/d=13/h=15/m=00/PT1H.json&quot;\n</code></pre>\n<p>I'm trying to fetch the substring in the below manner by ideally splitting the string based on &quot;/&quot; and fetch the first part of string until resource_name :</p>\n<pre><code>/subscriptions/subscription_id/resourceGroups/rg_name/providers/Microsoft.Compute/virtualMachines/resource_name\n</code></pre>\n<p>How to achieve this format either by using substring or regEx in java?</p>\n<h2>Edited</h2>\n<p>In the given string ,resource_name will be substituted with vm_name or akv_name. It will be not be resource_name for ever in the string, have given generic name.</p>\n<p>Basically, I need to go until virtualMachines from the start and fetch the resource_name which is appended next to virtualMachines by a slash</p>\n<p>Then in this scenario.. how to handle it?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1684519729,"post_id":76291388,"comment_id":134534369,"body_markdown":"“i can only change the Graphics2D object color and if I did this the whole graph will be changed to the new color” …You can call g.setColor or g.setPaint multiple times in a single painting method.  You can change the color before you draw each shape.  I suspect you are currently storing only a list of shapes, without color information, but since you haven’t shown us any code, I can only guess about that.","body":"“i can only change the Graphics2D object color and if I did this the whole graph will be changed to the new color” …You can call g.setColor or g.setPaint multiple times in a single painting method.  You can change the color before you draw each shape.  I suspect you are currently storing only a list of shapes, without color information, but since you haven’t shown us any code, I can only guess about that."},{"owner":{"account_id":27582284,"reputation":1,"user_id":21051223,"display_name":"Mowafk Mha"},"score":0,"creation_date":1684523378,"post_id":76291388,"comment_id":134534969,"body_markdown":"I know that I can use g.setcolor before drawing any shape but how to change that color later for only one shape not all of them , I have the reference for all the shapes but they all share the same color variable  , for example I want to change the color of the second shape only not all the shapes","body":"I know that I can use g.setcolor before drawing any shape but how to change that color later for only one shape not all of them , I have the reference for all the shapes but they all share the same color variable  , for example I want to change the color of the second shape only not all the shapes"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1684525463,"post_id":76291388,"comment_id":134535257,"body_markdown":"Edit your question and show the code for your painting method.  We cannot answer without seeing how you store your shapes.","body":"Edit your question and show the code for your painting method.  We cannot answer without seeing how you store your shapes."},{"owner":{"account_id":27582284,"reputation":1,"user_id":21051223,"display_name":"Mowafk Mha"},"score":0,"creation_date":1684530936,"post_id":76291388,"comment_id":134536120,"body_markdown":"I added an example of what I&#39;m trying to do","body":"I added an example of what I&#39;m trying to do"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1684531120,"post_id":76291388,"comment_id":134536139,"body_markdown":"`Ellipse2D.Double oval_1;` cannot by itself record the color.  Why not add a `Color oval_color_1;` field, and use that in your paintComponent method?  (By the way, your paintComponent methods needs to call super.paintComponent(g); before doing anything else.  See https://docs.oracle.com/javase/tutorial/uiswing/painting/ for an explanation.)","body":"<code>Ellipse2D.Double oval_1;</code> cannot by itself record the color.  Why not add a <code>Color oval_color_1;</code> field, and use that in your paintComponent method?  (By the way, your paintComponent methods needs to call super.paintComponent(g); before doing anything else.  See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/painting</a> for an explanation.)"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1684531608,"post_id":76291388,"comment_id":134536210,"body_markdown":"Keep an ArrayList of objects to be painted. This way you can keep the properties such as the shape and color of the object. See: [Custom Painting Approaches](https://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/) for more information and working examples.","body":"Keep an ArrayList of objects to be painted. This way you can keep the properties such as the shape and color of the object. See: <a href=\"https://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/\" rel=\"nofollow noreferrer\">Custom Painting Approaches</a> for more information and working examples."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1684536016,"post_id":76291388,"comment_id":134536738,"body_markdown":"For [example](https://stackoverflow.com/questions/34168628/gui-application-that-allows-the-user-to-choose-the-shape-and-color-of-a-drawing/34168841#34168841)","body":"For <a href=\"https://stackoverflow.com/questions/34168628/gui-application-that-allows-the-user-to-choose-the-shape-and-color-of-a-drawing/34168841#34168841\">example</a>"}],"owner":{"account_id":27582284,"reputation":1,"user_id":21051223,"display_name":"Mowafk Mha"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684752908,"creation_date":1684518230,"question_id":76291388,"body_markdown":"im trying to make a gui visualizer for a certine graph (only one graph ) and I want to visulize the travelling sales man problem on it , so first i will draw the graph and then I will solve it using some algorithims, im using swing and im drawing all the shapes (circles and lines) on a panel by overriding the paint method , what im trying to do is to change the color of any shape I want  in the middle of my program   \r\n the problem im struggling with is how to change the color of any shape that I draw \r\n,all my vertices will hava a shape object  that i will add to the Graphics2D object of the panel that I will draw on, but how to change the color of only one shape from the many shapes that I draw on the same panel \r\nshape dosn&#39;t have setcolor() methode and i can only change the \r\nGraphics2D object color and if I did this the whole graph will be changed to the new color \r\n\r\nI want to draw many shapes inside the JPanel and I want to be able to change the color of any shape I want during my program\r\n\r\n   \r\n\r\n    public class Graphtesting {\r\n\r\n  \r\n    public static void main(String[] args) {\r\n        Scanner sc=new Scanner(System.in);\r\n        JFrame frame=new JFrame();\r\n        frame.setDefaultCloseOperation(3);\r\n        My_Panel panel=new My_Panel();\r\n        frame.add(panel);\r\n        frame.pack();\r\n        frame.setVisible(true);\r\n        int var=sc.nextInt();\r\n        if(var==0)\r\n        {\r\n            // i want to change the color of oval 2 only and not both \r\n            //panel.oval_1.setcolor()    i want to do something like this but shape dosn&#39;t have a function to set color \r\n            // its like i want a seprate graphics2d object for each one of my shapes because i want to be able to change the color of each one individualy \r\n        }\r\n        else\r\n        {\r\n            // i want to change the color of oval 1 only and not both \r\n        }\r\n         \r\n    }\r\n    }\r\n    \r\n    \r\n    class My_Panel extends JPanel\r\n    {\r\n        Ellipse2D.Double oval_1;\r\n        Ellipse2D.Double oval_2;\r\n        \r\n        My_Panel()\r\n        {\r\n            setPreferredSize(new Dimension(500,500));\r\n        \r\n        }\r\n        @Override\r\n        public void paintComponent(Graphics g){\r\n\r\n    Graphics2D g2d=(Graphics2D)g;\r\n\r\n     oval_1=new Ellipse2D.Double(10,10,50,50);\r\n\r\n     oval_2=new Ellipse2D.Double(60,60,50,50);\r\n\r\n    g2d.setColor(Color.orange);  \r\n    \r\n    g2d.fill(oval_2);    \r\n             \r\n    g2d.setColor(Color.red); \r\n\r\n    g2d.fill(oval_1);\r\n    }\r\n    }\r\n    ","title":"How can I change the color of a specific shape in a Java Swing JPanel containing many shapes?","body":"<p>im trying to make a gui visualizer for a certine graph (only one graph ) and I want to visulize the travelling sales man problem on it , so first i will draw the graph and then I will solve it using some algorithims, im using swing and im drawing all the shapes (circles and lines) on a panel by overriding the paint method , what im trying to do is to change the color of any shape I want  in the middle of my program<br />\nthe problem im struggling with is how to change the color of any shape that I draw\n,all my vertices will hava a shape object  that i will add to the Graphics2D object of the panel that I will draw on, but how to change the color of only one shape from the many shapes that I draw on the same panel\nshape dosn't have setcolor() methode and i can only change the\nGraphics2D object color and if I did this the whole graph will be changed to the new color</p>\n<p>I want to draw many shapes inside the JPanel and I want to be able to change the color of any shape I want during my program</p>\n<pre><code>public class Graphtesting {\n\n\npublic static void main(String[] args) {\n    Scanner sc=new Scanner(System.in);\n    JFrame frame=new JFrame();\n    frame.setDefaultCloseOperation(3);\n    My_Panel panel=new My_Panel();\n    frame.add(panel);\n    frame.pack();\n    frame.setVisible(true);\n    int var=sc.nextInt();\n    if(var==0)\n    {\n        // i want to change the color of oval 2 only and not both \n        //panel.oval_1.setcolor()    i want to do something like this but shape dosn't have a function to set color \n        // its like i want a seprate graphics2d object for each one of my shapes because i want to be able to change the color of each one individualy \n    }\n    else\n    {\n        // i want to change the color of oval 1 only and not both \n    }\n     \n}\n}\n\n\nclass My_Panel extends JPanel\n{\n    Ellipse2D.Double oval_1;\n    Ellipse2D.Double oval_2;\n    \n    My_Panel()\n    {\n        setPreferredSize(new Dimension(500,500));\n    \n    }\n    @Override\n    public void paintComponent(Graphics g){\n\nGraphics2D g2d=(Graphics2D)g;\n\n oval_1=new Ellipse2D.Double(10,10,50,50);\n\n oval_2=new Ellipse2D.Double(60,60,50,50);\n\ng2d.setColor(Color.orange);  \n\ng2d.fill(oval_2);    \n         \ng2d.setColor(Color.red); \n\ng2d.fill(oval_1);\n}\n}\n</code></pre>\n"},{"tags":["java","apparmor"],"answers":[{"tags":[],"owner":{"account_id":27884225,"reputation":36,"user_id":21292052,"display_name":"user21292052"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684752728,"creation_date":1684752728,"answer_id":76305433,"question_id":20495632,"body_markdown":"I have the same problem with a systemd service that starts an application via `java -jar ...`.\r\n\r\nAs `aa-genprof` and AppArmor in general only works with file path and not PIDs and the jar files are not executables, it seems to me like one has to write a profile manually, maybe assisted by `aa-easyprof`, `aa-genprof` or `aa-logprof` for java.\r\n\r\nThe profile can then be enforced with e.g. the `AppArmorProfile=` directive in systemd.","title":"apparmor profile for a java application run run with java -jar","body":"<p>I have the same problem with a systemd service that starts an application via <code>java -jar ...</code>.</p>\n<p>As <code>aa-genprof</code> and AppArmor in general only works with file path and not PIDs and the jar files are not executables, it seems to me like one has to write a profile manually, maybe assisted by <code>aa-easyprof</code>, <code>aa-genprof</code> or <code>aa-logprof</code> for java.</p>\n<p>The profile can then be enforced with e.g. the <code>AppArmorProfile=</code> directive in systemd.</p>\n"}],"owner":{"account_id":782232,"reputation":390,"user_id":833359,"accept_rate":62,"display_name":"Sushil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":909,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":1,"score":10,"last_activity_date":1684752728,"creation_date":1386681442,"question_id":20495632,"body_markdown":"I am working with `logstash` and it is unable to read some log files.\r\nTo be able to read, I think I have to add a profile in apparmor but am pretty lost at this point.\r\n\r\n1. The app is run as:\r\n    `java -jar ....`\r\nDo I have to add a profile for java or is there some other simpler way?\r\n2. Will simply adding a single line like \r\n   `/path/to/mylogs r `\r\nwork?\r\n\r\nThanks for any help.","title":"apparmor profile for a java application run run with java -jar","body":"<p>I am working with <code>logstash</code> and it is unable to read some log files.\nTo be able to read, I think I have to add a profile in apparmor but am pretty lost at this point.</p>\n\n<ol>\n<li>The app is run as:\n<code>java -jar ....</code>\nDo I have to add a profile for java or is there some other simpler way?</li>\n<li>Will simply adding a single line like \n<code>/path/to/mylogs r</code>\nwork?</li>\n</ol>\n\n<p>Thanks for any help.</p>\n"},{"tags":["java","append","double-quotes"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1506605382,"post_id":46469143,"comment_id":79895875,"body_markdown":"Have you tried anything yet though?","body":"Have you tried anything yet though?"},{"owner":{"account_id":10301316,"reputation":10,"user_id":7599979,"display_name":"veda"},"score":0,"creation_date":1506684523,"post_id":46469143,"comment_id":79930091,"body_markdown":"Yead ,I tried  I am able to append double quotes to my array values, I tried this     &quot;\\&quot;&quot;+a[x]+&quot;\\&quot;&quot;.\nThanks everyone for your inputs.","body":"Yead ,I tried  I am able to append double quotes to my array values, I tried this     &quot;\\&quot;&quot;+a[x]+&quot;\\&quot;&quot;. Thanks everyone for your inputs."}],"answers":[{"tags":[],"owner":{"account_id":397924,"reputation":1022,"user_id":762326,"display_name":"vegaasen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1506601743,"creation_date":1506601743,"answer_id":46469192,"question_id":46469143,"body_markdown":"I guess what you might be looking for is as follows:\r\n\r\n    region.append(&quot;\\&quot;&quot;).append(a[z]).append(&quot;\\&quot;&quot;).append(&#39;,&#39;);\r\n","title":"how to append Double quotes (&quot; &quot;) For a String Array Varible in java","body":"<p>I guess what you might be looking for is as follows:</p>\n\n<pre><code>region.append(\"\\\"\").append(a[z]).append(\"\\\"\").append(',');\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1506605454,"post_id":46469325,"comment_id":79895931,"body_markdown":"@araknoid, since OP didn&#39;t show any effort in question, this is effectively a free-for-all when it comes to answers.","body":"@araknoid, since OP didn&#39;t show any effort in question, this is effectively a free-for-all when it comes to answers."},{"owner":{"account_id":2377273,"reputation":3085,"user_id":2080264,"display_name":"araknoid"},"score":0,"creation_date":1506612763,"post_id":46469325,"comment_id":79901079,"body_markdown":"@M.Prokhorov You are correct but since the java version is not specified in the question, it should be at least in the answer.","body":"@M.Prokhorov You are correct but since the java version is not specified in the question, it should be at least in the answer."},{"owner":{"account_id":10301316,"reputation":10,"user_id":7599979,"display_name":"veda"},"score":0,"creation_date":1506684449,"post_id":46469325,"comment_id":79930037,"body_markdown":"Yup , I tried  with this its working fine  thank u guys","body":"Yup , I tried  with this its working fine  thank u guys"}],"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506602157,"creation_date":1506602117,"answer_id":46469325,"question_id":46469143,"body_markdown":"If you&#39;re using Java 8, what you probably want to do is\r\n\r\n    String region = Arrays.stream(a)\r\n        .map(s -&gt; String.format(&quot;\\&quot;%s\\&quot;&quot;, s)) // add double quotes around each string\r\n        .collect(Collectors.joining(&quot;,&quot;); // comma-separate values","title":"how to append Double quotes (&quot; &quot;) For a String Array Varible in java","body":"<p>If you're using Java 8, what you probably want to do is</p>\n\n<pre><code>String region = Arrays.stream(a)\n    .map(s -&gt; String.format(\"\\\"%s\\\"\", s)) // add double quotes around each string\n    .collect(Collectors.joining(\",\"); // comma-separate values\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8873451,"reputation":458,"user_id":6626496,"display_name":"Leonardo Pina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506603745,"creation_date":1506603745,"answer_id":46469881,"question_id":46469143,"body_markdown":" 1. for each string, surround it with quotes \r\n 2. for each string, except the last one, add a comma to its end\r\n 3. write all strings in the file.\r\n\r\nex:\r\n\r\n    int l = myStrings.length;\r\n    for(int i = 0; i &lt; l; i++){\r\n        // Adds &quot; to the begning of the string and &quot;, to the end of the string.\r\n        myStrings[i] = &quot;\\&quot;&quot; + mystrings[i] + &quot;\\&quot;,&quot;;\r\n        // if you want to use String.format:\r\n        //myStrings[i] = String.format(&quot;\\&quot;%s\\&quot;,&quot;, myStrings[i]);\r\n\r\n        // if it is the last string, remove the unwanted comma\r\n        if(i == l-1){\r\n            // gets the substring of the last string in the array, excluding only\r\n            // the last character, because it is an unwanted comma\r\n            myStrings[i] = myStrings[i].substring(0,l);\r\n        }\r\n        \r\n        // Write in your file here\r\n        // region.append(myStrings[i]);\r\n    }\r\n    ","title":"how to append Double quotes (&quot; &quot;) For a String Array Varible in java","body":"<ol>\n<li>for each string, surround it with quotes </li>\n<li>for each string, except the last one, add a comma to its end</li>\n<li>write all strings in the file.</li>\n</ol>\n\n<p>ex:</p>\n\n<pre><code>int l = myStrings.length;\nfor(int i = 0; i &lt; l; i++){\n    // Adds \" to the begning of the string and \", to the end of the string.\n    myStrings[i] = \"\\\"\" + mystrings[i] + \"\\\",\";\n    // if you want to use String.format:\n    //myStrings[i] = String.format(\"\\\"%s\\\",\", myStrings[i]);\n\n    // if it is the last string, remove the unwanted comma\n    if(i == l-1){\n        // gets the substring of the last string in the array, excluding only\n        // the last character, because it is an unwanted comma\n        myStrings[i] = myStrings[i].substring(0,l);\n    }\n\n    // Write in your file here\n    // region.append(myStrings[i]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25299934,"reputation":31,"user_id":19124332,"display_name":"Rahul Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684752378,"creation_date":1684751955,"answer_id":76305339,"question_id":46469143,"body_markdown":"```\r\nArrayList&lt;String&gt; str = new ArrayList&lt;String&gt;();\r\nstr.add(&quot;One&quot;);\r\nstr.add(&quot;Two&quot;);\r\nstr.add(&quot;Three&quot;);\r\nJSONArray array = new JSONArray();\r\nfor (String i : str) {\r\n    array.put(i);\r\n}\r\nJSONObject userData = new JSONObject();\r\nuserData.put(&quot;user&quot;, array);\r\nprint(&quot;&quot; + userData)\r\n```\r\nOutPut:\r\n\r\n    {&quot;user&quot;: [&quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;]}","title":"how to append Double quotes (&quot; &quot;) For a String Array Varible in java","body":"<pre><code>ArrayList&lt;String&gt; str = new ArrayList&lt;String&gt;();\nstr.add(&quot;One&quot;);\nstr.add(&quot;Two&quot;);\nstr.add(&quot;Three&quot;);\nJSONArray array = new JSONArray();\nfor (String i : str) {\n    array.put(i);\n}\nJSONObject userData = new JSONObject();\nuserData.put(&quot;user&quot;, array);\nprint(&quot;&quot; + userData)\n</code></pre>\n<p>OutPut:</p>\n<pre><code>{&quot;user&quot;: [&quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;]}\n</code></pre>\n"}],"owner":{"account_id":10301316,"reputation":10,"user_id":7599979,"display_name":"veda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5632,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1684752378,"creation_date":1506601588,"question_id":46469143,"body_markdown":"I am working with  writing files.I have a string array as in loop \r\nI need to append double quotes for the all values which are writing it on  files . Can any one help me how to append double quotes for the all values in String Array.Thanks in advance`\r\n\r\n    \t\t\t\r\n    \t\t","title":"how to append Double quotes (&quot; &quot;) For a String Array Varible in java","body":"<p>I am working with  writing files.I have a string array as in loop \nI need to append double quotes for the all values which are writing it on  files . Can any one help me how to append double quotes for the all values in String Array.Thanks in advance`</p>\n"},{"tags":["java","spring","spring-cloud-sleuth","micrometer-tracing"],"answers":[{"tags":[],"owner":{"account_id":7175240,"reputation":725,"user_id":5481419,"accept_rate":77,"display_name":"Dfarrelly"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684751907,"creation_date":1684751907,"answer_id":76305330,"question_id":76226277,"body_markdown":"I managed to make this work by autowiring a `Tracer` and instead adding the baggage inside the `Tracer`.\r\n\r\n    @Autowired\r\n    private final Tracer tracer;\r\n\r\n    tracer.createBaggageInScope(&quot;USER_ID&quot;, &quot;USER_ID_VALUE&quot;);","title":"Brave Baggage not working after switching from spring-cloud-sleuth to micrometer-tracing","body":"<p>I managed to make this work by autowiring a <code>Tracer</code> and instead adding the baggage inside the <code>Tracer</code>.</p>\n<pre><code>@Autowired\nprivate final Tracer tracer;\n\ntracer.createBaggageInScope(&quot;USER_ID&quot;, &quot;USER_ID_VALUE&quot;);\n</code></pre>\n"}],"owner":{"account_id":7175240,"reputation":725,"user_id":5481419,"accept_rate":77,"display_name":"Dfarrelly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2025,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76305330,"answer_count":1,"score":4,"last_activity_date":1684751907,"creation_date":1683798386,"question_id":76226277,"body_markdown":"I am updating my spring project to newer versions, and after updating I got the following message: \r\n\r\n&gt; Your project setup is incompatible with our requirements due to following reasons: Spring Cloud Sleuth is not compatible with this Spring Cloud release train, Action: Consider applying the following actions: Migrate from Spring Cloud Sleuth to Micrometer Tracing.\r\n\r\nSo I removed sleuth and added the micrometer-tracing and micrometer-tracing-bridge-brave dependencies and switched to the following configuration:\r\n\r\n    management:\r\n      tracing:\r\n        enabled: true\r\n        baggage:\r\n          enabled: true\r\n          correlation:\r\n            enabled: true\r\n            fields: USER_ID\r\n          remote-fields: USER_ID\r\n\r\nNow my `BaggageField` is not getting added to my MDCs as it was before. I have narrowed it down to the `tracing.currentTraceContext().get()` returning null when I call `BaggageField.updateValue()` but I cannot figure out why this is. \r\n\r\n    @Nullable static TraceContext currentTraceContext() {\r\n        Tracing tracing = Tracing.current();\r\n        return tracing != null ? tracing.currentTraceContext().get() : null;\r\n    }\r\n\r\nHere is my code that creates the BaggageField bean:\r\n\r\n    import brave.baggage.BaggageField;\r\n    import brave.baggage.CorrelationScopeConfig;\r\n    import brave.context.slf4j.MDCScopeDecorator;\r\n    import brave.propagation.CurrentTraceContext;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    public class BaggageConfig {\r\n    \r\n        public static final String USER_ID_KEY = &quot;USER_ID&quot;;\r\n    \r\n        @Bean\r\n        BaggageField userIdField() {\r\n            return BaggageField.create(USER_ID_KEY);\r\n        }\r\n        \r\n    \r\n        @Bean\r\n        public CurrentTraceContext.ScopeDecorator mdcScopeDecorator(BaggageField userIdField) {\r\n            return MDCScopeDecorator.newBuilder()\r\n                    .clear()\r\n                    .add(CorrelationScopeConfig.SingleCorrelationField.newBuilder(userIdField).flushOnUpdate().build())\r\n                    .build();\r\n        }\r\n    }\r\n\r\nAnd when I try to update the value I autowire in the BaggageField:\r\n\r\n    private final BaggageField userIdField;\r\n\r\nAnd update:\r\n\r\n    userIdField.updateValue(requestMetadataContext.getUserId());\r\n\r\nVersions:\r\n\r\n    org.springframework.boot:3.0.6\r\n    org.springframework.cloud:spring-cloud-starter-bootstrap:4.0.2\r\n    org.springframework.cloud:spring-cloud-starter-consul-all:4.0.2\r\n    io.micrometer:micrometer-tracing:1.1.0\r\n    io.micrometer:micrometer-tracing-bridge-brave:1.1.0\r\n\r\nEdit:\r\nSmall application to reproduce [Baggage Example][1]\r\n\r\n\r\n  [1]: https://github.com/davefarrelly/baggage-example","title":"Brave Baggage not working after switching from spring-cloud-sleuth to micrometer-tracing","body":"<p>I am updating my spring project to newer versions, and after updating I got the following message:</p>\n<blockquote>\n<p>Your project setup is incompatible with our requirements due to following reasons: Spring Cloud Sleuth is not compatible with this Spring Cloud release train, Action: Consider applying the following actions: Migrate from Spring Cloud Sleuth to Micrometer Tracing.</p>\n</blockquote>\n<p>So I removed sleuth and added the micrometer-tracing and micrometer-tracing-bridge-brave dependencies and switched to the following configuration:</p>\n<pre><code>management:\n  tracing:\n    enabled: true\n    baggage:\n      enabled: true\n      correlation:\n        enabled: true\n        fields: USER_ID\n      remote-fields: USER_ID\n</code></pre>\n<p>Now my <code>BaggageField</code> is not getting added to my MDCs as it was before. I have narrowed it down to the <code>tracing.currentTraceContext().get()</code> returning null when I call <code>BaggageField.updateValue()</code> but I cannot figure out why this is.</p>\n<pre><code>@Nullable static TraceContext currentTraceContext() {\n    Tracing tracing = Tracing.current();\n    return tracing != null ? tracing.currentTraceContext().get() : null;\n}\n</code></pre>\n<p>Here is my code that creates the BaggageField bean:</p>\n<pre><code>import brave.baggage.BaggageField;\nimport brave.baggage.CorrelationScopeConfig;\nimport brave.context.slf4j.MDCScopeDecorator;\nimport brave.propagation.CurrentTraceContext;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class BaggageConfig {\n\n    public static final String USER_ID_KEY = &quot;USER_ID&quot;;\n\n    @Bean\n    BaggageField userIdField() {\n        return BaggageField.create(USER_ID_KEY);\n    }\n    \n\n    @Bean\n    public CurrentTraceContext.ScopeDecorator mdcScopeDecorator(BaggageField userIdField) {\n        return MDCScopeDecorator.newBuilder()\n                .clear()\n                .add(CorrelationScopeConfig.SingleCorrelationField.newBuilder(userIdField).flushOnUpdate().build())\n                .build();\n    }\n}\n</code></pre>\n<p>And when I try to update the value I autowire in the BaggageField:</p>\n<pre><code>private final BaggageField userIdField;\n</code></pre>\n<p>And update:</p>\n<pre><code>userIdField.updateValue(requestMetadataContext.getUserId());\n</code></pre>\n<p>Versions:</p>\n<pre><code>org.springframework.boot:3.0.6\norg.springframework.cloud:spring-cloud-starter-bootstrap:4.0.2\norg.springframework.cloud:spring-cloud-starter-consul-all:4.0.2\nio.micrometer:micrometer-tracing:1.1.0\nio.micrometer:micrometer-tracing-bridge-brave:1.1.0\n</code></pre>\n<p>Edit:\nSmall application to reproduce <a href=\"https://github.com/davefarrelly/baggage-example\" rel=\"nofollow noreferrer\">Baggage Example</a></p>\n"},{"tags":["java","android","apache-poi"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1681378178,"post_id":76003739,"comment_id":134047763,"body_markdown":"`but less than API Android 33 save very well.` Because you use MANAGE_EXTERNAL_STIRAGE. Without that it will fail on 30+.","body":"<code>but less than API Android 33 save very well.</code> Because you use MANAGE_EXTERNAL_STIRAGE. Without that it will fail on 30+."},{"owner":{"account_id":14688816,"reputation":354,"user_id":10608055,"display_name":"Amin"},"score":0,"creation_date":1681378431,"post_id":76003739,"comment_id":134047829,"body_markdown":"@blackapps - I have used MANAGE_EXTERNAL_STORAGE in my project, but not work","body":"@blackapps - I have used MANAGE_EXTERNAL_STORAGE in my project, but not work"},{"owner":{"account_id":14688816,"reputation":354,"user_id":10608055,"display_name":"Amin"},"score":0,"creation_date":1681907287,"post_id":76003739,"comment_id":134132090,"body_markdown":"@blackapps ok I changed logcat to code block view","body":"@blackapps ok I changed logcat to code block view"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681918112,"post_id":76003739,"comment_id":134135340,"body_markdown":"`if (!file.exists()) {\n            file.mkdirs();\n        }` That should be: `if (!file.exists()) {\n            if(!file.mkdirs()) return;\n        }`","body":"<code>if (!file.exists()) {             file.mkdirs();         }</code> That should be: <code>if (!file.exists()) {             if(!file.mkdirs()) return;         }</code>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681918149,"post_id":76003739,"comment_id":134135349,"body_markdown":"You should use an existing public directory. Do not try to create one yourself.","body":"You should use an existing public directory. Do not try to create one yourself."},{"owner":{"account_id":14688816,"reputation":354,"user_id":10608055,"display_name":"Amin"},"score":0,"creation_date":1681988421,"post_id":76003739,"comment_id":134146650,"body_markdown":"@blackapps I changed it this way but I can&#39;t write the file I even change the path but did not get correct.","body":"@blackapps I changed it this way but I can&#39;t write the file I even change the path but did not get correct."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681988508,"post_id":76003739,"comment_id":134146663,"body_markdown":"Post your new code. Then tell what5 happens.","body":"Post your new code. Then tell what5 happens."},{"owner":{"account_id":14688816,"reputation":354,"user_id":10608055,"display_name":"Amin"},"score":0,"creation_date":1681989339,"post_id":76003739,"comment_id":134146859,"body_markdown":"@blackapps  : &gt;         String path = this.getExternalFilesDir(null).getAbsolutePath() + File.separator + folderName + File.separator + fileName;\n\n\n      File file = new File(path);\n        if (!file.exists()) {\n            File wallpaperDirectory = new File(path);\n            wallpaperDirectory.mkdirs();\n        }","body":"@blackapps  : &gt;         String path = this.getExternalFilesDir(null).getAbsolutePath() + File.separator + folderName + File.separator + fileName;         File file = new File(path);         if (!file.exists()) {             File wallpaperDirectory = new File(path);             wallpaperDirectory.mkdirs();         }"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1681989651,"post_id":76003739,"comment_id":134146933,"body_markdown":"Terrible. You have not used an existing public directory. You introduce a new File variable. You are not checking the return value of mkdirs(). You are doing nothing with all suggestions. And then you post code as comment. Unreadable. Post your code completely in your post. Also post the new logcat lines if anything goes wrong.","body":"Terrible. You have not used an existing public directory. You introduce a new File variable. You are not checking the return value of mkdirs(). You are doing nothing with all suggestions. And then you post code as comment. Unreadable. Post your code completely in your post. Also post the new logcat lines if anything goes wrong."},{"owner":{"account_id":14688816,"reputation":354,"user_id":10608055,"display_name":"Amin"},"score":0,"creation_date":1681990207,"post_id":76003739,"comment_id":134147053,"body_markdown":"@blackapps\nsorry for the comment but I want to share the link answer that I used \n\nhttps://stackoverflow.com/a/70419518/10608055","body":"@blackapps sorry for the comment but I want to share the link answer that I used   <a href=\"https://stackoverflow.com/a/70419518/10608055\">stackoverflow.com/a/70419518/10608055</a>"}],"answers":[{"comments":[{"owner":{"account_id":14688816,"reputation":354,"user_id":10608055,"display_name":"Amin"},"score":0,"creation_date":1681378203,"post_id":76003803,"comment_id":134047769,"body_markdown":"It&#39;s true, but all the features are in the manifest\n but I can&#39;t write on Android 13 that this problem still exists for me and I check anyway but I am confused to fix it for android API 33","body":"It&#39;s true, but all the features are in the manifest  but I can&#39;t write on Android 13 that this problem still exists for me and I check anyway but I am confused to fix it for android API 33"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681378398,"post_id":76003803,"comment_id":134047823,"body_markdown":"With MANAGE_EXTERNAL_STORAGE on an Android 13 device you can create your own files and folders also in root of external storage.","body":"With MANAGE_EXTERNAL_STORAGE on an Android 13 device you can create your own files and folders also in root of external storage."}],"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681377847,"creation_date":1681377847,"answer_id":76003803,"question_id":76003739,"body_markdown":"You cannot request write permission on Android 13 devices.\r\n\r\nYou automatically have write permission in all app specific directories and all public directories on external storage.","title":"How to request write permission on the file system Android 13","body":"<p>You cannot request write permission on Android 13 devices.</p>\n<p>You automatically have write permission in all app specific directories and all public directories on external storage.</p>\n"},{"tags":[],"owner":{"account_id":251880,"reputation":594,"user_id":5505680,"display_name":"matheszabi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684751898,"creation_date":1684751277,"answer_id":76305246,"question_id":76003739,"body_markdown":"In HomeFragment.kt is called like this:\r\n\r\n        binding.btHomeExport.setOnClickListener {\r\n            GlobalScope.launch {\r\n                exportData(requireActivity())\r\n            }\r\n        }\r\n\r\nThe `Export.kt` it is just a Java utility class converted to Kotlin, practically just to move out the code:\r\n\r\n\r\n\r\nobject Export {\r\n    suspend fun exportData(activity: Activity) {\r\n\r\n        try {\r\n            // read again from file?\r\n\r\n            val listMyDealWithMyClient = doReadFromFile(activity)\r\n\r\n            val timeZoneDate = SimpleDateFormat(&quot;yyyy-MMM-dd_HH-mm-ss&quot;, Locale.getDefault())\r\n            val formattedDate = timeZoneDate.format( Date())\r\n\r\n            val workbook = XSSFWorkbook()\r\n            val workSheet = workbook.createSheet(&quot;MyDeals_$formattedDate&quot;)\r\n            val colorMap = workbook.stylesSource.indexedColors\r\n\r\n            val cellStyleHeader = workbook.createCellStyle()\r\n            cellStyleHeader.fillForegroundColor = IndexedColors.AQUA.getIndex()\r\n            cellStyleHeader.fillPattern = FillPatternType.SOLID_FOREGROUND\r\n            cellStyleHeader.font.bold = true\r\n            cellStyleHeader.verticalAlignment = VerticalAlignment.CENTER\r\n            cellStyleHeader.alignment = HorizontalAlignment.CENTER\r\n            cellStyleHeader.setRightBorderColor( XSSFColor(byteArrayOf(0, 0, 0), colorMap))\r\n            cellStyleHeader.borderRight = BorderStyle.THIN\r\n\r\n\r\n            val row0 = workSheet.createRow(0)\r\n            row0.height = 800\r\n\r\nmore code here, which are data procesing ... \r\n\r\n            // save workbook to file:\r\n            val fileName = &quot;data_$formattedDate.xlsx&quot;\r\n            val fos: FileOutputStream =\r\n                activity.openFileOutput(fileName, Context.MODE_PRIVATE)!!\r\n\r\n            workbook.write(fos)\r\n            workbook.close()\r\n\r\n            withContext(Dispatchers.IO) {\r\n                fos.flush()\r\n                fos.close();\r\n            };\r\n\r\n            //need: fos.path, but it is private!\r\n\r\n            val appPath = activity.application?.filesDir?.absolutePath\r\n            // delete old .xlsx files\r\n            val dir = appPath?.let { File(it) }\r\n            dir?.listFiles()!!.forEach { file -&gt;\r\n                run {\r\n                    if (file.name.endsWith(&quot;.xlsx&quot;)) {\r\n                        file.deleteOnExit()\r\n                    }\r\n                }\r\n            }\r\n\r\n            val exportFile = File(appPath, fileName)\r\n\r\n\r\n            val sharingIntent = Intent(Intent.ACTION_SEND)\r\n\r\n            val fileUri =\r\n                FileProvider.getUriForFile(//\r\n                    activity.applicationContext!!,\r\n                    activity.packageName + &quot;.fileProvider&quot;,\r\n                    exportFile\r\n                );\r\n\r\nVERY IMPORTANT  `&quot;.fileProvider&quot;` must match the case with others:\r\nManifest:\r\n\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;false&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.MyAppTheme&quot;\r\n        tools:targetApi=&quot;33&quot;&gt;\r\n\r\n\r\n\r\n        &lt;provider\r\n            android:name=&quot;androidx.core.content.FileProvider&quot;\r\n            android:authorities=&quot;my.package.with.myid.fileProvider&quot;\r\n            android:grantUriPermissions=&quot;true&quot;\r\n            android:exported=&quot;false&quot;&gt;\r\n            &lt;meta-data\r\n                android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\r\n                android:resource=&quot;@xml/file_provider_path&quot;/&gt;\r\n        &lt;/provider&gt;\r\n\r\n        &lt;activity\r\n            android:name=\r\n\r\n\r\nNOT needed Read External, Write External permissions! None needed!\r\n\r\nAt `res/xml` create a file `file_provider_path.xml`\r\n\r\nPaste the content:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;paths&gt;\r\n        &lt;files-path\r\n            name=&quot;files&quot;\r\n            path=&quot;.&quot; /&gt;\r\n    &lt;/paths&gt;\r\n\r\nThe file it wil be exported, not sure how it can be accessed by other apps. That&#39;s why I do a share / send file and I let the user choose the Intent:\r\n\r\n                // add provider\r\n                sharingIntent.type = &quot;*/*&quot;\r\n                sharingIntent.putExtra(Intent.EXTRA_STREAM, fileUri)\r\n    \r\n                sharingIntent.flags = Intent.FLAG_GRANT_READ_URI_PERMISSION\r\n    \r\n                activity.startActivity(sharingIntent)\r\n    \r\n    \r\n            } catch (ex: Exception) {\r\n                ex.printStackTrace()\r\n                Toast.makeText(activity, ex.message, Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }\r\n\r\nThis is the final part of the `Export.kt`\r\n\r\nToday (May 22, 2023) it is working with Android 33...tomorrow maybe not -as how Google changes their API...\r\n\r\nI don&#39;t target other devices, just Android 33 - because it is a utility app for somebody. It were many changes at Androi pre 8, post 8, pre 9 , post 9, pre 10, post 10, pre 11, pre 12, post 12, pre 13, and +13\r\nSpent like 10 days to put the lego pieces together :)\r\n\r\nAs testing I am sending the .xlsx file via Bluetooth to Desktop PC ( Windowws 10) and checking there the data + formatting, and is working!","title":"How to request write permission on the file system Android 13","body":"<p>In HomeFragment.kt is called like this:</p>\n<pre><code>    binding.btHomeExport.setOnClickListener {\n        GlobalScope.launch {\n            exportData(requireActivity())\n        }\n    }\n</code></pre>\n<p>The <code>Export.kt</code> it is just a Java utility class converted to Kotlin, practically just to move out the code:</p>\n<p>object Export {\nsuspend fun exportData(activity: Activity) {</p>\n<pre><code>    try {\n        // read again from file?\n\n        val listMyDealWithMyClient = doReadFromFile(activity)\n\n        val timeZoneDate = SimpleDateFormat(&quot;yyyy-MMM-dd_HH-mm-ss&quot;, Locale.getDefault())\n        val formattedDate = timeZoneDate.format( Date())\n\n        val workbook = XSSFWorkbook()\n        val workSheet = workbook.createSheet(&quot;MyDeals_$formattedDate&quot;)\n        val colorMap = workbook.stylesSource.indexedColors\n\n        val cellStyleHeader = workbook.createCellStyle()\n        cellStyleHeader.fillForegroundColor = IndexedColors.AQUA.getIndex()\n        cellStyleHeader.fillPattern = FillPatternType.SOLID_FOREGROUND\n        cellStyleHeader.font.bold = true\n        cellStyleHeader.verticalAlignment = VerticalAlignment.CENTER\n        cellStyleHeader.alignment = HorizontalAlignment.CENTER\n        cellStyleHeader.setRightBorderColor( XSSFColor(byteArrayOf(0, 0, 0), colorMap))\n        cellStyleHeader.borderRight = BorderStyle.THIN\n\n\n        val row0 = workSheet.createRow(0)\n        row0.height = 800\n</code></pre>\n<p>more code here, which are data procesing ...</p>\n<pre><code>        // save workbook to file:\n        val fileName = &quot;data_$formattedDate.xlsx&quot;\n        val fos: FileOutputStream =\n            activity.openFileOutput(fileName, Context.MODE_PRIVATE)!!\n\n        workbook.write(fos)\n        workbook.close()\n\n        withContext(Dispatchers.IO) {\n            fos.flush()\n            fos.close();\n        };\n\n        //need: fos.path, but it is private!\n\n        val appPath = activity.application?.filesDir?.absolutePath\n        // delete old .xlsx files\n        val dir = appPath?.let { File(it) }\n        dir?.listFiles()!!.forEach { file -&gt;\n            run {\n                if (file.name.endsWith(&quot;.xlsx&quot;)) {\n                    file.deleteOnExit()\n                }\n            }\n        }\n\n        val exportFile = File(appPath, fileName)\n\n\n        val sharingIntent = Intent(Intent.ACTION_SEND)\n\n        val fileUri =\n            FileProvider.getUriForFile(//\n                activity.applicationContext!!,\n                activity.packageName + &quot;.fileProvider&quot;,\n                exportFile\n            );\n</code></pre>\n<p>VERY IMPORTANT  <code>&quot;.fileProvider&quot;</code> must match the case with others:\nManifest:</p>\n<pre><code>&lt;application\n    android:allowBackup=&quot;false&quot;\n    android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n    android:fullBackupContent=&quot;@xml/backup_rules&quot;\n    android:icon=&quot;@mipmap/ic_launcher&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n    android:supportsRtl=&quot;true&quot;\n    android:theme=&quot;@style/Theme.MyAppTheme&quot;\n    tools:targetApi=&quot;33&quot;&gt;\n\n\n\n    &lt;provider\n        android:name=&quot;androidx.core.content.FileProvider&quot;\n        android:authorities=&quot;my.package.with.myid.fileProvider&quot;\n        android:grantUriPermissions=&quot;true&quot;\n        android:exported=&quot;false&quot;&gt;\n        &lt;meta-data\n            android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\n            android:resource=&quot;@xml/file_provider_path&quot;/&gt;\n    &lt;/provider&gt;\n\n    &lt;activity\n        android:name=\n</code></pre>\n<p>NOT needed Read External, Write External permissions! None needed!</p>\n<p>At <code>res/xml</code> create a file <code>file_provider_path.xml</code></p>\n<p>Paste the content:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;paths&gt;\n    &lt;files-path\n        name=&quot;files&quot;\n        path=&quot;.&quot; /&gt;\n&lt;/paths&gt;\n</code></pre>\n<p>The file it wil be exported, not sure how it can be accessed by other apps. That's why I do a share / send file and I let the user choose the Intent:</p>\n<pre><code>            // add provider\n            sharingIntent.type = &quot;*/*&quot;\n            sharingIntent.putExtra(Intent.EXTRA_STREAM, fileUri)\n\n            sharingIntent.flags = Intent.FLAG_GRANT_READ_URI_PERMISSION\n\n            activity.startActivity(sharingIntent)\n\n\n        } catch (ex: Exception) {\n            ex.printStackTrace()\n            Toast.makeText(activity, ex.message, Toast.LENGTH_LONG).show();\n        }\n    }\n}\n</code></pre>\n<p>This is the final part of the <code>Export.kt</code></p>\n<p>Today (May 22, 2023) it is working with Android 33...tomorrow maybe not -as how Google changes their API...</p>\n<p>I don't target other devices, just Android 33 - because it is a utility app for somebody. It were many changes at Androi pre 8, post 8, pre 9 , post 9, pre 10, post 10, pre 11, pre 12, post 12, pre 13, and +13\nSpent like 10 days to put the lego pieces together :)</p>\n<p>As testing I am sending the .xlsx file via Bluetooth to Desktop PC ( Windowws 10) and checking there the data + formatting, and is working!</p>\n"}],"owner":{"account_id":14688816,"reputation":354,"user_id":10608055,"display_name":"Amin"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4002,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76003803,"answer_count":2,"score":0,"last_activity_date":1684751898,"creation_date":1681377392,"question_id":76003739,"body_markdown":"I am targeting my Android app for Android 13 (API 33)\r\n\r\nI have generated an Excel file from my list and saved it but it doesn&#39;t save in API 33 but less than API Android 33 save very well.\r\n\r\n&gt; If needed, these libraries have been used\r\n&gt;\r\n&gt;     implementation &#39;org.apache.poi:poi:4.0.0&#39;\r\n&gt;     implementation &#39;org.apache.poi:poi-ooxml:4.0.0&#39;\r\n&gt; \r\n\r\n\r\n&gt; Manifest permission\r\n&gt; \r\n&gt;     &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n&gt;     &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\r\n\r\n\r\nCheck Permission\r\n\r\n    private void checkPermission() {\r\n        if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.M) {\r\n            if (getApplicationContext().checkSelfPermission(Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_DENIED) {\r\n                String[] permissions = {Manifest.permission.WRITE_EXTERNAL_STORAGE};\r\n                requestPermissions(permissions, 1);\r\n            } else {\r\n                importData();\r\n            }\r\n        } else {\r\n            importData();\r\n        }\r\n    \r\n    }\r\n\r\nmake excel files and storage\r\n\r\n        private void importData() {\r\n            //get data from edit text\r\n    \r\n            try {\r\n                userList.add(new SheetModel(&quot;kawcher&quot;, &quot;0181238383&quot;, &quot;nmkawcher112@gmail.com&quot;));\r\n                userList.add(new SheetModel(&quot;shuvo&quot;, &quot;0171238383&quot;, &quot;demo1@gmail.com&quot;));\r\n                userList.add(new SheetModel(&quot;hasan&quot;, &quot;0161238383&quot;, &quot;demo2@gmail.com&quot;));\r\n                userList.add(new SheetModel(&quot;habib&quot;, &quot;0151238383&quot;, &quot;demo3@gmail.com&quot;));\r\n                userList.add(new SheetModel(&quot;selim&quot;, &quot;0131238383&quot;, &quot;demo4@gmail.com&quot;));\r\n                userList.add(new SheetModel(&quot;tayeb&quot;, &quot;0121238383&quot;, &quot;demo5@gmail.com&quot;));\r\n                userList.add(new SheetModel(&quot;abul kalam&quot;, &quot;0191238383&quot;, &quot;demo6@gmail.com&quot;));\r\n                userList.add(new SheetModel(&quot;Kamal&quot;, &quot;0101238383&quot;, &quot;demo7@gmail.com&quot;));\r\n    \r\n            }catch (Exception e){e.printStackTrace();}\r\n    \r\n            if (userList.size() &gt; 0) {\r\n                createXlFile();\r\n    \r\n    \r\n            } else {\r\n                Toast.makeText(this, &quot;list are empty&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n        private void createXlFile() {\r\n    \r\n            // File filePath = new File(Environment.getExternalStorageDirectory() + &quot;/Demo.xls&quot;);\r\n            Workbook wb = new HSSFWorkbook();\r\n    \r\n    \r\n            Cell cell = null;\r\n    \r\n            Sheet sheet = null;\r\n            sheet = wb.createSheet(&quot;Demo Excel Sheet&quot;);\r\n            //Now column and row\r\n            Row row = sheet.createRow(0);\r\n    \r\n            cell = row.createCell(0);\r\n            cell.setCellValue(&quot;Person Name&quot;);\r\n    \r\n    \r\n            cell = row.createCell(1);\r\n            cell.setCellValue(&quot;Phone Number&quot;);\r\n    \r\n    \r\n            cell = row.createCell(2);\r\n            cell.setCellValue(&quot;Email Address&quot;);\r\n    \r\n    \r\n            //column width\r\n            sheet.setColumnWidth(0, (20 * 200));\r\n            sheet.setColumnWidth(1, (30 * 200));\r\n            sheet.setColumnWidth(2, (30 * 200));\r\n    \r\n    \r\n            for (int i = 0; i &lt; userList.size(); i++) {\r\n                Row row1 = sheet.createRow(i + 1);\r\n    \r\n                cell = row1.createCell(0);\r\n                cell.setCellValue(userList.get(i).getName());\r\n    \r\n                cell = row1.createCell(1);\r\n                cell.setCellValue((userList.get(i).getPhoneNo()));\r\n                //  cell.setCellStyle(cellStyle);\r\n    \r\n                cell = row1.createCell(2);\r\n                cell.setCellValue(userList.get(i).getEmail());\r\n    \r\n    \r\n                sheet.setColumnWidth(0, (20 * 200));\r\n                sheet.setColumnWidth(1, (30 * 200));\r\n                sheet.setColumnWidth(2, (30 * 200));\r\n    \r\n            }\r\n            String folderName = &quot;Import Excel&quot;;\r\n            String fileName = folderName + System.currentTimeMillis() + &quot;.xls&quot;;\r\n            String path = Environment.getExternalStorageDirectory() + File.separator + folderName + File.separator + fileName;\r\n    \r\n            File file = new File(Environment.getExternalStorageDirectory() + File.separator + folderName);\r\n            if (!file.exists()) {\r\n                file.mkdirs();\r\n            }\r\n    //         file.deleteOnExit();\r\n    \r\n            FileOutputStream outputStream = null;\r\n    \r\n            try {\r\n    \r\n                //\r\n                outputStream = new FileOutputStream(path);\r\n    //            outputStream = new FileOutputStream(new File(getFilesDir()., path));\r\n                wb.write(outputStream);\r\n                // ShareViaEmail(file.getParentFile().getName(),file.getName());\r\n                Toast.makeText(getApplicationContext(), &quot;Excel Created in &quot; + path, Toast.LENGTH_SHORT).show();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n    \r\n                Toast.makeText(getApplicationContext(), &quot;Not OK&quot;, Toast.LENGTH_LONG).show();\r\n                try {\r\n                    outputStream.close();\r\n                } catch (Exception ex) {\r\n                    ex.printStackTrace();\r\n    \r\n                }\r\n            }\r\n    \r\n        }\r\n\r\n\r\nError logcat:\r\n\r\n         /System.err: java.io.FileNotFoundException: /storage/emulated/0/Import Excel/Import Excel1681376608447.xls: open\r\n     failed: ENOENT (No such file or directory)\r\n                 at libcore.io.IoBridge.open(IoBridge.java:574)\r\n                 at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:236)\r\n                 at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:125)\r\n                 at com.roomack.amlaak.view.activity.MainActivity.createXlFile(MainActivity.java:1125)\r\n                 at com.roomack.amlaak.view.activity.MainActivity.importData(MainActivity.java:1051)\r\n                 at com.roomack.amlaak.view.activity.MainActivity.checkPermission(MainActivity.java:1020)\r\n                 at com.roomack.amlaak.view.activity.MainActivity.access$300(MainActivity.java:100)\r\n                 at com.roomack.amlaak.view.activity.MainActivity$18.onClick(MainActivity.java:821)\r\n                 at android.view.View.performClick(View.java:7560)\r\n                 at android.view.View.performClickInternal(View.java:7533)\r\n                 at ndroid.view.View.-$$Nest$mperformClickInternal(Unknown Source:0)\r\n                 at android.view.View$PerformClick.run(View.java:29754)\r\n         W/System.err:     at android.os.Handler.handleCallback(Handler.java:942)\r\n                 at android.os.Handler.dispatchMessage(Handler.java:99)\r\n                 at android.os.Looper.loopOnce(Looper.java:211)\r\n                 at android.os.Looper.loop(Looper.java:300)\r\n                 at android.app.ActivityThread.main(ActivityThread.java:8143)\r\n                 at java.lang.reflect.Method.invoke(Native Method)\r\n                 at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:580)\r\n                 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1028)\r\n             Caused by: android.system.ErrnoException: open failed: ENOENT (No such file or directory)\r\n                 at libcore.io.Linux.open(Native Method)\r\n                 at libcore.io.ForwardingOs.open(ForwardingOs.java:563)\r\n                 at libcore.io.BlockGuardOs.open(BlockGuardOs.java:274)\r\n                 at libcore.io.ForwardingOs.open(ForwardingOs.java:563)\r\n                 at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:8019)\r\n                 at libcore.io.IoBridge.open(IoBridge.java:560)\r\n\r\n","title":"How to request write permission on the file system Android 13","body":"<p>I am targeting my Android app for Android 13 (API 33)</p>\n<p>I have generated an Excel file from my list and saved it but it doesn't save in API 33 but less than API Android 33 save very well.</p>\n<blockquote>\n<p>If needed, these libraries have been used</p>\n<pre><code>implementation 'org.apache.poi:poi:4.0.0'\nimplementation 'org.apache.poi:poi-ooxml:4.0.0'\n</code></pre>\n</blockquote>\n<blockquote>\n<p>Manifest permission</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n</blockquote>\n<p>Check Permission</p>\n<pre><code>private void checkPermission() {\n    if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.M) {\n        if (getApplicationContext().checkSelfPermission(Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_DENIED) {\n            String[] permissions = {Manifest.permission.WRITE_EXTERNAL_STORAGE};\n            requestPermissions(permissions, 1);\n        } else {\n            importData();\n        }\n    } else {\n        importData();\n    }\n\n}\n</code></pre>\n<p>make excel files and storage</p>\n<pre><code>    private void importData() {\n        //get data from edit text\n\n        try {\n            userList.add(new SheetModel(&quot;kawcher&quot;, &quot;0181238383&quot;, &quot;nmkawcher112@gmail.com&quot;));\n            userList.add(new SheetModel(&quot;shuvo&quot;, &quot;0171238383&quot;, &quot;demo1@gmail.com&quot;));\n            userList.add(new SheetModel(&quot;hasan&quot;, &quot;0161238383&quot;, &quot;demo2@gmail.com&quot;));\n            userList.add(new SheetModel(&quot;habib&quot;, &quot;0151238383&quot;, &quot;demo3@gmail.com&quot;));\n            userList.add(new SheetModel(&quot;selim&quot;, &quot;0131238383&quot;, &quot;demo4@gmail.com&quot;));\n            userList.add(new SheetModel(&quot;tayeb&quot;, &quot;0121238383&quot;, &quot;demo5@gmail.com&quot;));\n            userList.add(new SheetModel(&quot;abul kalam&quot;, &quot;0191238383&quot;, &quot;demo6@gmail.com&quot;));\n            userList.add(new SheetModel(&quot;Kamal&quot;, &quot;0101238383&quot;, &quot;demo7@gmail.com&quot;));\n\n        }catch (Exception e){e.printStackTrace();}\n\n        if (userList.size() &gt; 0) {\n            createXlFile();\n\n\n        } else {\n            Toast.makeText(this, &quot;list are empty&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    private void createXlFile() {\n\n        // File filePath = new File(Environment.getExternalStorageDirectory() + &quot;/Demo.xls&quot;);\n        Workbook wb = new HSSFWorkbook();\n\n\n        Cell cell = null;\n\n        Sheet sheet = null;\n        sheet = wb.createSheet(&quot;Demo Excel Sheet&quot;);\n        //Now column and row\n        Row row = sheet.createRow(0);\n\n        cell = row.createCell(0);\n        cell.setCellValue(&quot;Person Name&quot;);\n\n\n        cell = row.createCell(1);\n        cell.setCellValue(&quot;Phone Number&quot;);\n\n\n        cell = row.createCell(2);\n        cell.setCellValue(&quot;Email Address&quot;);\n\n\n        //column width\n        sheet.setColumnWidth(0, (20 * 200));\n        sheet.setColumnWidth(1, (30 * 200));\n        sheet.setColumnWidth(2, (30 * 200));\n\n\n        for (int i = 0; i &lt; userList.size(); i++) {\n            Row row1 = sheet.createRow(i + 1);\n\n            cell = row1.createCell(0);\n            cell.setCellValue(userList.get(i).getName());\n\n            cell = row1.createCell(1);\n            cell.setCellValue((userList.get(i).getPhoneNo()));\n            //  cell.setCellStyle(cellStyle);\n\n            cell = row1.createCell(2);\n            cell.setCellValue(userList.get(i).getEmail());\n\n\n            sheet.setColumnWidth(0, (20 * 200));\n            sheet.setColumnWidth(1, (30 * 200));\n            sheet.setColumnWidth(2, (30 * 200));\n\n        }\n        String folderName = &quot;Import Excel&quot;;\n        String fileName = folderName + System.currentTimeMillis() + &quot;.xls&quot;;\n        String path = Environment.getExternalStorageDirectory() + File.separator + folderName + File.separator + fileName;\n\n        File file = new File(Environment.getExternalStorageDirectory() + File.separator + folderName);\n        if (!file.exists()) {\n            file.mkdirs();\n        }\n//         file.deleteOnExit();\n\n        FileOutputStream outputStream = null;\n\n        try {\n\n            //\n            outputStream = new FileOutputStream(path);\n//            outputStream = new FileOutputStream(new File(getFilesDir()., path));\n            wb.write(outputStream);\n            // ShareViaEmail(file.getParentFile().getName(),file.getName());\n            Toast.makeText(getApplicationContext(), &quot;Excel Created in &quot; + path, Toast.LENGTH_SHORT).show();\n        } catch (IOException e) {\n            e.printStackTrace();\n\n            Toast.makeText(getApplicationContext(), &quot;Not OK&quot;, Toast.LENGTH_LONG).show();\n            try {\n                outputStream.close();\n            } catch (Exception ex) {\n                ex.printStackTrace();\n\n            }\n        }\n\n    }\n</code></pre>\n<p>Error logcat:</p>\n<pre><code>     /System.err: java.io.FileNotFoundException: /storage/emulated/0/Import Excel/Import Excel1681376608447.xls: open\n failed: ENOENT (No such file or directory)\n             at libcore.io.IoBridge.open(IoBridge.java:574)\n             at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:236)\n             at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:125)\n             at com.roomack.amlaak.view.activity.MainActivity.createXlFile(MainActivity.java:1125)\n             at com.roomack.amlaak.view.activity.MainActivity.importData(MainActivity.java:1051)\n             at com.roomack.amlaak.view.activity.MainActivity.checkPermission(MainActivity.java:1020)\n             at com.roomack.amlaak.view.activity.MainActivity.access$300(MainActivity.java:100)\n             at com.roomack.amlaak.view.activity.MainActivity$18.onClick(MainActivity.java:821)\n             at android.view.View.performClick(View.java:7560)\n             at android.view.View.performClickInternal(View.java:7533)\n             at ndroid.view.View.-$$Nest$mperformClickInternal(Unknown Source:0)\n             at android.view.View$PerformClick.run(View.java:29754)\n     W/System.err:     at android.os.Handler.handleCallback(Handler.java:942)\n             at android.os.Handler.dispatchMessage(Handler.java:99)\n             at android.os.Looper.loopOnce(Looper.java:211)\n             at android.os.Looper.loop(Looper.java:300)\n             at android.app.ActivityThread.main(ActivityThread.java:8143)\n             at java.lang.reflect.Method.invoke(Native Method)\n             at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:580)\n             at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1028)\n         Caused by: android.system.ErrnoException: open failed: ENOENT (No such file or directory)\n             at libcore.io.Linux.open(Native Method)\n             at libcore.io.ForwardingOs.open(ForwardingOs.java:563)\n             at libcore.io.BlockGuardOs.open(BlockGuardOs.java:274)\n             at libcore.io.ForwardingOs.open(ForwardingOs.java:563)\n             at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:8019)\n             at libcore.io.IoBridge.open(IoBridge.java:560)\n</code></pre>\n"},{"tags":["java","docker","maven","circleci","docker-build"],"answers":[{"comments":[{"owner":{"account_id":246941,"reputation":1582,"user_id":521347,"accept_rate":60,"display_name":"Sumit Desai"},"score":0,"creation_date":1684754264,"post_id":76305318,"comment_id":134558151,"body_markdown":"The step 3 succeeded after following your suggestion but getting an error step 4 &#39;Error: Unable to access jarfile application.jar&#39;. I also don&#39;t see the jar file copied from maven_builder to up-user-service/target which should have happened . What I might be doing wrong here?","body":"The step 3 succeeded after following your suggestion but getting an error step 4 &#39;Error: Unable to access jarfile application.jar&#39;. I also don&#39;t see the jar file copied from maven_builder to up-user-service/target which should have happened . What I might be doing wrong here?"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1684754977,"post_id":76305318,"comment_id":134558274,"body_markdown":"That seems to match the suggestion in the last half of my answer: as you&#39;ve written it you copy a jar file into `/up-user-service/target/myapp-0.0.1.jar`, but then you `RUN java -jar application.jar`.  So the last half of the answer suggests renaming the file to `application.jar` in the build stage, and consistently using a `/app` directory (not the container filesystem root directory) in all of the later stages.","body":"That seems to match the suggestion in the last half of my answer: as you&#39;ve written it you copy a jar file into <code>&#47;up-user-service&#47;target&#47;myapp-0.0.1.jar</code>, but then you <code>RUN java -jar application.jar</code>.  So the last half of the answer suggests renaming the file to <code>application.jar</code> in the build stage, and consistently using a <code>&#47;app</code> directory (not the container filesystem root directory) in all of the later stages."},{"owner":{"account_id":246941,"reputation":1582,"user_id":521347,"accept_rate":60,"display_name":"Sumit Desai"},"score":0,"creation_date":1684756934,"post_id":76305318,"comment_id":134558687,"body_markdown":"I have already renamed the jar to application.jar as you suggested,but still getting the same error. I tried accessing the file as &#39;RUN java -Djarmode=layertools -jar up-user-service/target/application.jar extract&#39; and &#39;RUN java -Djarmode=layertools -jar app/target/application.jar extract&#39;, but getting the same error.","body":"I have already renamed the jar to application.jar as you suggested,but still getting the same error. I tried accessing the file as &#39;RUN java -Djarmode=layertools -jar up-user-service/target/application.jar extract&#39; and &#39;RUN java -Djarmode=layertools -jar app/target/application.jar extract&#39;, but getting the same error."},{"owner":{"account_id":246941,"reputation":1582,"user_id":521347,"accept_rate":60,"display_name":"Sumit Desai"},"score":0,"creation_date":1684757940,"post_id":76305318,"comment_id":134558925,"body_markdown":"Am I still missing anything?","body":"Am I still missing anything?"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1684760194,"post_id":76305318,"comment_id":134559378,"body_markdown":"Immediately before that `RUN` line you `COPY` the jar file into the intermediate stage.  The destination path of that `COPY` needs to match the jar file argument to `java -jar`.","body":"Immediately before that <code>RUN</code> line you <code>COPY</code> the jar file into the intermediate stage.  The destination path of that <code>COPY</code> needs to match the jar file argument to <code>java -jar</code>."}],"tags":[],"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684751834,"creation_date":1684751834,"answer_id":76305318,"question_id":76304976,"body_markdown":"Delete these two lines\r\n\r\n```sh\r\n# delete me!\r\nARG JAR_FILE=target/*.jar\r\nCOPY ${JAR_FILE} application.jar\r\n```\r\n\r\nThose copy a jar file from your host system, any single `*.jar` file from the `target` directory relative to the build context; if you haven&#39;t separately built the application on your host this will fail.\r\n\r\nImmediately before this you have the correct line\r\n\r\n```sh\r\n# keep me!\r\nCOPY --from=maven_builder /app/target/*.jar up-user-service/target\r\n```\r\n\r\nwhich copies the jar file built by the `maven_builder` stage.  With that line the jar file is in fact in your image, the second set of lines is redundant.\r\n\r\nThe one other tricky thing here is that you require the jar file to be named `application.jar` when you run the Spring unpacker, but the build output will probably be named something like `myapp-0.0.1.jar`.  I might rename this in the build stage:\r\n\r\n```sh\r\nFROM maven:3.8.3-openjdk-17 as maven_builder\r\n...\r\nRUN mvn clean install\r\nRUN mv target/*.jar target/application.jar  # &lt;-- add\r\n\r\nFROM openjdk:17-jdk-alpine as builder\r\nWORKDIR /app\r\nCOPY --from=maven_builder /app/target/application.jar ./\r\nRUN java -Djarmode=layertools -jar application.jar extract\r\n\r\nFROM openjdk:17-jdk-alpine\r\nWORKDIR /app\r\nCOPY --from=builder /app/dependencies/ ./\r\n...\r\n```\r\n","title":"Error while copying maven generated jar file in Docker file build stage","body":"<p>Delete these two lines</p>\n<pre class=\"lang-bash prettyprint-override\"><code># delete me!\nARG JAR_FILE=target/*.jar\nCOPY ${JAR_FILE} application.jar\n</code></pre>\n<p>Those copy a jar file from your host system, any single <code>*.jar</code> file from the <code>target</code> directory relative to the build context; if you haven't separately built the application on your host this will fail.</p>\n<p>Immediately before this you have the correct line</p>\n<pre class=\"lang-bash prettyprint-override\"><code># keep me!\nCOPY --from=maven_builder /app/target/*.jar up-user-service/target\n</code></pre>\n<p>which copies the jar file built by the <code>maven_builder</code> stage.  With that line the jar file is in fact in your image, the second set of lines is redundant.</p>\n<p>The one other tricky thing here is that you require the jar file to be named <code>application.jar</code> when you run the Spring unpacker, but the build output will probably be named something like <code>myapp-0.0.1.jar</code>.  I might rename this in the build stage:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>FROM maven:3.8.3-openjdk-17 as maven_builder\n...\nRUN mvn clean install\nRUN mv target/*.jar target/application.jar  # &lt;-- add\n\nFROM openjdk:17-jdk-alpine as builder\nWORKDIR /app\nCOPY --from=maven_builder /app/target/application.jar ./\nRUN java -Djarmode=layertools -jar application.jar extract\n\nFROM openjdk:17-jdk-alpine\nWORKDIR /app\nCOPY --from=builder /app/dependencies/ ./\n...\n</code></pre>\n"}],"owner":{"account_id":246941,"reputation":1582,"user_id":521347,"accept_rate":60,"display_name":"Sumit Desai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":604,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76305318,"answer_count":1,"score":0,"last_activity_date":1684751834,"creation_date":1684749297,"question_id":76304976,"body_markdown":"I have a docker file having 2 stages. The first stage builds the application using maven and the  second one start the application. The file contents are as follows:-\r\n\r\n    FROM maven:3.8.3-openjdk-17 as maven_builder\r\n    WORKDIR /app\r\n    COPY up-user-service/pom.xml .\r\n    COPY up-user-service/src ./src\r\n    RUN mvn clean install\r\n    RUN ls -l /app/target\r\n    \r\n    \r\n    FROM openjdk:17-jdk-alpine as builder\r\n    COPY --from=maven_builder /app/target/*.jar up-user-service/target\r\n    ARG JAR_FILE=target/*.jar\r\n    COPY ${JAR_FILE} application.jar\r\n    RUN java -Djarmode=layertools -jar application.jar extract\r\n    FROM openjdk:17-jdk-alpine\r\n    COPY --from=builder dependencies/ ./\r\n    RUN true\r\n    COPY --from=builder snapshot-dependencies/ ./\r\n    RUN true\r\n    COPY --from=builder spring-boot-loader/ ./\r\n    RUN true\r\n    COPY --from=builder application/ ./\r\n    ENTRYPOINT [&quot;java&quot;, &quot;org.springframework.boot.loader.JarLauncher&quot;]\r\n\r\nHowever, when I build this using docker file, I am getting the error `ERROR: failed to solve: lstat /var/lib/docker/tmp/buildkit-mount1400144723/target: no such file or directory`. I am also unable to see the output of ls stage also as it disappears very fast from screen.\r\n\r\nCan someone please suggest what might be the issue here? \r\n","title":"Error while copying maven generated jar file in Docker file build stage","body":"<p>I have a docker file having 2 stages. The first stage builds the application using maven and the  second one start the application. The file contents are as follows:-</p>\n<pre><code>FROM maven:3.8.3-openjdk-17 as maven_builder\nWORKDIR /app\nCOPY up-user-service/pom.xml .\nCOPY up-user-service/src ./src\nRUN mvn clean install\nRUN ls -l /app/target\n\n\nFROM openjdk:17-jdk-alpine as builder\nCOPY --from=maven_builder /app/target/*.jar up-user-service/target\nARG JAR_FILE=target/*.jar\nCOPY ${JAR_FILE} application.jar\nRUN java -Djarmode=layertools -jar application.jar extract\nFROM openjdk:17-jdk-alpine\nCOPY --from=builder dependencies/ ./\nRUN true\nCOPY --from=builder snapshot-dependencies/ ./\nRUN true\nCOPY --from=builder spring-boot-loader/ ./\nRUN true\nCOPY --from=builder application/ ./\nENTRYPOINT [&quot;java&quot;, &quot;org.springframework.boot.loader.JarLauncher&quot;]\n</code></pre>\n<p>However, when I build this using docker file, I am getting the error <code>ERROR: failed to solve: lstat /var/lib/docker/tmp/buildkit-mount1400144723/target: no such file or directory</code>. I am also unable to see the output of ls stage also as it disappears very fast from screen.</p>\n<p>Can someone please suggest what might be the issue here?</p>\n"},{"tags":["java","bulkinsert","simultaneous"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1684779780,"post_id":76305306,"comment_id":134563783,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28653303,"reputation":1,"user_id":21939862,"display_name":"Murat D"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684751725,"creation_date":1684751725,"question_id":76305306,"body_markdown":"I have a Java app, clients send requests to this app and app executes SELECT (4 dif. column in WHERE condition) query on table A based on the fields existed in request. Other thread, in every 15 min. refreshes the data(that is fetched some external db) on this table A. Deleting all the data in table A and inserting new data (about 30k row) takes around 7-8 sec., it is a transactional connection. If SELECT query comes during this time interval it waits on &quot;dao&quot; level until delete/insert transaction will be committed.\r\n\r\nThis creates a delay for the clients and leads serious problems. I thought that this is a general problem, and wondered that whether there is a general approach/tech to cover this problem.\r\n\r\nThought that instead of executing SELECT query, maybe I can find matched records from memory through some list/map. But since multiple columns exist in WHERE clause, it will not be easy to use memory object as a table.","title":"Simultaneous Select and Insert operations on same database table","body":"<p>I have a Java app, clients send requests to this app and app executes SELECT (4 dif. column in WHERE condition) query on table A based on the fields existed in request. Other thread, in every 15 min. refreshes the data(that is fetched some external db) on this table A. Deleting all the data in table A and inserting new data (about 30k row) takes around 7-8 sec., it is a transactional connection. If SELECT query comes during this time interval it waits on &quot;dao&quot; level until delete/insert transaction will be committed.</p>\n<p>This creates a delay for the clients and leads serious problems. I thought that this is a general problem, and wondered that whether there is a general approach/tech to cover this problem.</p>\n<p>Thought that instead of executing SELECT query, maybe I can find matched records from memory through some list/map. But since multiple columns exist in WHERE clause, it will not be easy to use memory object as a table.</p>\n"},{"tags":["java","maven","junit","mockito","junit5"],"answers":[{"comments":[{"owner":{"account_id":5984442,"reputation":375,"user_id":4702372,"accept_rate":59,"display_name":"springenthusiast"},"score":0,"creation_date":1684739694,"post_id":76303508,"comment_id":134555181,"body_markdown":"I did remove mocking in 2 places as you suggested but getting nullpointer in the line &quot;return result.body().get()&quot; of method invokeApi , because &quot;java.net.http.HttpResponse.body()&quot; is null","body":"I did remove mocking in 2 places as you suggested but getting nullpointer in the line &quot;return result.body().get()&quot; of method invokeApi , because &quot;java.net.http.HttpResponse.body()&quot; is null"},{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":1,"creation_date":1684739807,"post_id":76303508,"comment_id":134555210,"body_markdown":"Congrats! You have new exception and you can go forward. You need to stub HttpResponse.body() with when() using powermockito or mockito-inline(which i suggest) because it`s static method.","body":"Congrats! You have new exception and you can go forward. You need to stub HttpResponse.body() with when() using powermockito or mockito-inline(which i suggest) because it`s static method."},{"owner":{"account_id":5984442,"reputation":375,"user_id":4702372,"accept_rate":59,"display_name":"springenthusiast"},"score":0,"creation_date":1684740208,"post_id":76303508,"comment_id":134555272,"body_markdown":"Thanks, you are right I missed stubbing HttpResponse.body(). But I still notice that it&#39;s actually calling the API instead of mocking , if I provide any dummy URL instead of actual API it gives &quot;java.net.ConnectException&quot;. I wanted it to mock the API calling instead of calling actual API.","body":"Thanks, you are right I missed stubbing HttpResponse.body(). But I still notice that it&#39;s actually calling the API instead of mocking , if I provide any dummy URL instead of actual API it gives &quot;java.net.ConnectException&quot;. I wanted it to mock the API calling instead of calling actual API."},{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1684740952,"post_id":76303508,"comment_id":134555421,"body_markdown":"Maybe you had a typo with createmyMnt() and you need to write create(). seems strange to me","body":"Maybe you had a typo with createmyMnt() and you need to write create(). seems strange to me"},{"owner":{"account_id":5984442,"reputation":375,"user_id":4702372,"accept_rate":59,"display_name":"springenthusiast"},"score":0,"creation_date":1684748705,"post_id":76303508,"comment_id":134557070,"body_markdown":"That was typo while posting question on here, updated the code to fix typo&#39;s. Still code is failing at &quot;return result.body().get();&quot; because of jackson parsing exception when code executes supplier.get() method, it&#39;s giving 404 response when supplier.get is executed and jackson parse fails due to invalid html content of 404 response","body":"That was typo while posting question on here, updated the code to fix typo&#39;s. Still code is failing at &quot;return result.body().get();&quot; because of jackson parsing exception when code executes supplier.get() method, it&#39;s giving 404 response when supplier.get is executed and jackson parse fails due to invalid html content of 404 response"},{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1684750234,"post_id":76303508,"comment_id":134557403,"body_markdown":"Note: \nYou mocked HttpResponse&lt;Object&gt; httpResponse; but in your method you are using \nHttpResponse&lt;Supplier&lt;MyResponse&gt;&gt; httpResponse;\nso you need to pass supplier \nwhen(httpResponse.body()).thenReturn(() -&gt; myResponse);","body":"Note:  You mocked HttpResponse&lt;Object&gt; httpResponse; but in your method you are using  HttpResponse&lt;Supplier&lt;MyResponse&gt;&gt; httpResponse; so you need to pass supplier  when(httpResponse.body()).thenReturn(() -&gt; myResponse);"},{"owner":{"account_id":5984442,"reputation":375,"user_id":4702372,"accept_rate":59,"display_name":"springenthusiast"},"score":0,"creation_date":1684751170,"post_id":76303508,"comment_id":134557583,"body_markdown":"Which I am already doing if you see my updated code above, I am returning a mocked supplier. So the main issue I mentioned in code still exists, the junit is calling actual API instead of mocking the behaviour and along with that now it&#39;s failing to get response from supplier also","body":"Which I am already doing if you see my updated code above, I am returning a mocked supplier. So the main issue I mentioned in code still exists, the junit is calling actual API instead of mocking the behaviour and along with that now it&#39;s failing to get response from supplier also"},{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1684751551,"post_id":76303508,"comment_id":134557657,"body_markdown":"Try my last *updated* version of the code. If it won&#39;t work. I can`t help with this. because code is not reproducible and i can not debug this","body":"Try my last <i>updated</i> version of the code. If it won&#39;t work. I can`t help with this. because code is not reproducible and i can not debug this"},{"owner":{"account_id":5984442,"reputation":375,"user_id":4702372,"accept_rate":59,"display_name":"springenthusiast"},"score":0,"creation_date":1684753394,"post_id":76303508,"comment_id":134557992,"body_markdown":"Thank you for your assistance, it didn&#39;t work. It&#39;s still trying to connect to google.com and supplier.get fails to parse","body":"Thank you for your assistance, it didn&#39;t work. It&#39;s still trying to connect to google.com and supplier.get fails to parse"}],"tags":[],"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"comment_count":9,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684751502,"creation_date":1684736783,"answer_id":76303508,"question_id":76303358,"body_markdown":"You are facing this because you are mocking the same dependencies 2 times.\r\nHere what i mean:\r\n\r\n     @Mock\r\n     private HttpClient httpClient;\r\n\r\nAnd then in beforeEach you again are mocking your dependency\r\n\r\n    httpClient = mock(HttpClient.class);\r\n\r\nI recommend choosing the approach that you need and don&#39;t mock 2 times.\r\nHere where you are mocking and use @InjectMocks. Also we need to add annotation @ExtendWith(MockitoExtension.class) this will handle initMocks(this) and we won&#39;t need to add it(this annotation helps to mocks be properly injected).\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class MyServiceTests {\r\n    \r\n        @InjectMocks\r\n        private MyService myService;\r\n    \r\n        @Mock\r\n        private HttpClient httpClient;\r\n        @Mock\r\n        HttpResponse&lt;Object&gt; httpResponse;\r\n    \r\n        @Mock\r\n        private HttpRequest request;\r\n    \r\n        @Test\r\n        void testSendMessage() throws Exception {\r\n            MyResponse myResponse=new MyResponse();\r\n    \r\n            when(httpClient.send(any(),any())).thenReturn(httpResponse);\r\n            when(myService.invokeApi(httpClient,request)).thenReturn(myResponse);\r\n            myService.createmyMnt(&quot;https://test.com&quot;, &quot;/v1/test?page_size=100&quot;);\r\n            verify(httpClient).send(request, HttpResponse.BodyHandlers.ofString());\r\n        }\r\n    }\r\n\r\nor use constructor injection like:\r\n\r\n    class MyServiceTests {\r\n    \r\n        private MyService myService;\r\n        private HttpClient httpClient;\r\n        private HttpResponse&lt;Supplier&lt;MyResponse&gt;&gt; httpResponse;\r\n        private HttpRequest request;\r\n    \r\n        @BeforeEach\r\n        void setUp() {\r\n            httpClient = mock(HttpClient.class);\r\n            httpResponse = mock(HttpResponse.class);\r\n            request = mock(HttpRequest.class);\r\n            myService = new MyService();\r\n        }\r\n    \r\n        @Test\r\n        void testSendMessage() throws Exception {\r\n            MyResponse myResponse = new MyResponse();\r\n    \r\n            when(httpClient.send(any(), any())).thenReturn(httpResponse);\r\n            when(httpResponse.body()).thenReturn(() -&gt; myResponse);\r\n    \r\n            myService.create(&quot;https://test.com&quot;, &quot;/v1/test?page_size=100&quot;);\r\n    \r\n            verify(httpClient).send(request, new JsonBodyHandler&lt;&gt;(MyResponse.class));\r\n        }\r\n    }\r\n\r\n\r\n-----------------------------------------------------------\r\nAccording to the comments try this please:\r\n\r\n        @ExtendWith(MockitoExtension.class)\r\n    class MyServiceTests {\r\n    \r\n        @InjectMocks\r\n        private MyService myService;\r\n    \r\n        @Mock\r\n        private HttpClient httpClient;\r\n    \r\n        @Mock\r\n        private HttpResponse&lt;Supplier&lt;MyResponse&gt;&gt; httpResponse;\r\n    \r\n        @Mock\r\n        private HttpRequest request;\r\n    \r\n        @Mock\r\n        private Supplier&lt;MyResponse&gt; myResponseSupplier;\r\n    \r\n        @Test\r\n        void testSendMessage() throws Exception {\r\n            MyResponse myResponse = getMyResponse();\r\n    \r\n            when(httpClient.send(any(), any())).thenReturn(httpResponse);\r\n            when(httpResponse.body()).thenReturn(() -&gt; myResponseSupplier);\r\n            when(myResponseSupplier.get()).thenReturn(myResponse);\r\n    \r\n            myService.create(&quot;https://www.google.com&quot;, &quot;/v1/test?page_size=100&quot;);\r\n    \r\n            verify(httpClient).send(request, HttpResponse.BodyHandlers.ofString());\r\n          \r\n        }\r\n    \r\n        private MyResponse getMyResponse() {\r\n            return new MyResponse();\r\n        }\r\n    }\r\n\r\n","title":"junit 5 is not mocking java.net.http.HttpClient.send","body":"<p>You are facing this because you are mocking the same dependencies 2 times.\nHere what i mean:</p>\n<pre><code> @Mock\n private HttpClient httpClient;\n</code></pre>\n<p>And then in beforeEach you again are mocking your dependency</p>\n<pre><code>httpClient = mock(HttpClient.class);\n</code></pre>\n<p>I recommend choosing the approach that you need and don't mock 2 times.\nHere where you are mocking and use @InjectMocks. Also we need to add annotation @ExtendWith(MockitoExtension.class) this will handle initMocks(this) and we won't need to add it(this annotation helps to mocks be properly injected).</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass MyServiceTests {\n\n    @InjectMocks\n    private MyService myService;\n\n    @Mock\n    private HttpClient httpClient;\n    @Mock\n    HttpResponse&lt;Object&gt; httpResponse;\n\n    @Mock\n    private HttpRequest request;\n\n    @Test\n    void testSendMessage() throws Exception {\n        MyResponse myResponse=new MyResponse();\n\n        when(httpClient.send(any(),any())).thenReturn(httpResponse);\n        when(myService.invokeApi(httpClient,request)).thenReturn(myResponse);\n        myService.createmyMnt(&quot;https://test.com&quot;, &quot;/v1/test?page_size=100&quot;);\n        verify(httpClient).send(request, HttpResponse.BodyHandlers.ofString());\n    }\n}\n</code></pre>\n<p>or use constructor injection like:</p>\n<pre><code>class MyServiceTests {\n\n    private MyService myService;\n    private HttpClient httpClient;\n    private HttpResponse&lt;Supplier&lt;MyResponse&gt;&gt; httpResponse;\n    private HttpRequest request;\n\n    @BeforeEach\n    void setUp() {\n        httpClient = mock(HttpClient.class);\n        httpResponse = mock(HttpResponse.class);\n        request = mock(HttpRequest.class);\n        myService = new MyService();\n    }\n\n    @Test\n    void testSendMessage() throws Exception {\n        MyResponse myResponse = new MyResponse();\n\n        when(httpClient.send(any(), any())).thenReturn(httpResponse);\n        when(httpResponse.body()).thenReturn(() -&gt; myResponse);\n\n        myService.create(&quot;https://test.com&quot;, &quot;/v1/test?page_size=100&quot;);\n\n        verify(httpClient).send(request, new JsonBodyHandler&lt;&gt;(MyResponse.class));\n    }\n}\n</code></pre>\n<hr />\n<p>According to the comments try this please:</p>\n<pre><code>    @ExtendWith(MockitoExtension.class)\nclass MyServiceTests {\n\n    @InjectMocks\n    private MyService myService;\n\n    @Mock\n    private HttpClient httpClient;\n\n    @Mock\n    private HttpResponse&lt;Supplier&lt;MyResponse&gt;&gt; httpResponse;\n\n    @Mock\n    private HttpRequest request;\n\n    @Mock\n    private Supplier&lt;MyResponse&gt; myResponseSupplier;\n\n    @Test\n    void testSendMessage() throws Exception {\n        MyResponse myResponse = getMyResponse();\n\n        when(httpClient.send(any(), any())).thenReturn(httpResponse);\n        when(httpResponse.body()).thenReturn(() -&gt; myResponseSupplier);\n        when(myResponseSupplier.get()).thenReturn(myResponse);\n\n        myService.create(&quot;https://www.google.com&quot;, &quot;/v1/test?page_size=100&quot;);\n\n        verify(httpClient).send(request, HttpResponse.BodyHandlers.ofString());\n      \n    }\n\n    private MyResponse getMyResponse() {\n        return new MyResponse();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5984442,"reputation":375,"user_id":4702372,"accept_rate":59,"display_name":"springenthusiast"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684751502,"creation_date":1684734980,"question_id":76303358,"body_markdown":"I am trying to write junit 5 code in a java maven project(not a springboot project) , which is calling an API and extracting response and creating a file. But when I tried to mock the API calling, junit still calls actual API, which is not the desired behaviour. Can someone help to identify issue here? \r\n\r\nI followed this link to write below unit tests https://stackoverflow.com/questions/69768931/how-to-mock-httpclients-send-method-in-junit-5\r\n\r\nActual service code -\r\n\r\n    public class MyService {\r\n    \r\n        public void create(String apiHost, String firstPage) {\r\n            HttpClient httpClient = HttpClient.newBuilder()\r\n                    .version(HttpClient.Version.HTTP_2)\r\n                    .connectTimeout(Duration.ofSeconds(30))\r\n                    .build();\r\n            HttpRequest httpRequest = getHttpRequest(apiHost, firstPage);\r\n     \r\n            MyResponse myResponse = invokeApi(httpClient, httpRequest);\r\n            List&lt;ResponseData&gt; responseDataList = new ArrayList&lt;&gt;(myResponse.getData());\r\n            while (null != myResponse.getLinks().getNext()) {\r\n    \r\n                myResponse = invokeApi(httpClient, getHttpRequest(apiHost, invokeApi.getLinks().getNext()));\r\n                locationDetailsList.addAll(invokeApi.getData());\r\n            }\r\n    \r\n            createFile(fileName, responseDataList);\r\n        }\r\n    \r\n        private HttpRequest getHttpRequest(String apiHost, String pageUri) {\r\n            return HttpRequest.newBuilder()\r\n                    .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                    .GET()\r\n                    .uri(URI.create(apiHost + pageUri))\r\n                    .build();\r\n        }\r\n    \r\n        @SneakyThrows\r\n        MyResponse invokeApi(HttpClient httpClient, HttpRequest httpRequest) {\r\n            HttpResponse&lt;Supplier&lt;MyResponse&gt;&gt; result = httpClient.send(httpRequest, new JsonBodyHandler&lt;&gt;(MyResponse.class));\r\n            return result.body().get();\r\n        }\r\n    \r\n        @SneakyThrows\r\n        void createFile(String fileName, List&lt;ResponseData&gt; responseDataList) {\r\n            Path filePath = Paths.get(&quot;test/path&quot; + fileName);\r\n            Files.createFile(filePath);\r\n            Files.writeString(filePath, header + System.lineSeparator(), StandardOpenOption.APPEND);\r\n            for (ResponseData responseData : responseDataList) {\r\n                Files.writeString(filePath, responseData + System.lineSeparator(), StandardOpenOption.APPEND);\r\n            }\r\n        }\r\n\r\nJunit 5 code -\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class MyServiceTests {\r\n    \r\n        @InjectMocks\r\n        private MyService myService;\r\n    \r\n        @Mock\r\n        private HttpClient httpClient;\r\n        @Mock\r\n        HttpResponse&lt;Object&gt; httpResponse;\r\n    \r\n        @Mock\r\n        private HttpRequest request;\r\n    \r\n        @Mock\r\n        Supplier&lt;MyResponse&gt; myResponseSupplier;\r\n    \r\n    \r\n        @Test\r\n        void testSendMessage() throws Exception {\r\n    \r\n            when(httpClient.send(any(),any())).thenReturn(httpResponse);\r\n            when(httpResponse.body()).thenReturn(myResponseSupplier);\r\n            when(myResponseSupplier.get()).thenReturn(getMyResponse());\r\n            myService.create(&quot;https://www.google.com&quot;, &quot;/v1/test?page_size=100&quot;);\r\n            verify(httpClient).send(request, HttpResponse.BodyHandlers.ofString());\r\n        }\r\n    }\r\n\r\nIn the above junit code when &quot;myService.createmyMnt&quot; is executed it actually tried to invoke https://test.com instead of mocking the call.","title":"junit 5 is not mocking java.net.http.HttpClient.send","body":"<p>I am trying to write junit 5 code in a java maven project(not a springboot project) , which is calling an API and extracting response and creating a file. But when I tried to mock the API calling, junit still calls actual API, which is not the desired behaviour. Can someone help to identify issue here?</p>\n<p>I followed this link to write below unit tests <a href=\"https://stackoverflow.com/questions/69768931/how-to-mock-httpclients-send-method-in-junit-5\">How to mock HttpClient&#39;s send method in junit 5?</a></p>\n<p>Actual service code -</p>\n<pre><code>public class MyService {\n\n    public void create(String apiHost, String firstPage) {\n        HttpClient httpClient = HttpClient.newBuilder()\n                .version(HttpClient.Version.HTTP_2)\n                .connectTimeout(Duration.ofSeconds(30))\n                .build();\n        HttpRequest httpRequest = getHttpRequest(apiHost, firstPage);\n \n        MyResponse myResponse = invokeApi(httpClient, httpRequest);\n        List&lt;ResponseData&gt; responseDataList = new ArrayList&lt;&gt;(myResponse.getData());\n        while (null != myResponse.getLinks().getNext()) {\n\n            myResponse = invokeApi(httpClient, getHttpRequest(apiHost, invokeApi.getLinks().getNext()));\n            locationDetailsList.addAll(invokeApi.getData());\n        }\n\n        createFile(fileName, responseDataList);\n    }\n\n    private HttpRequest getHttpRequest(String apiHost, String pageUri) {\n        return HttpRequest.newBuilder()\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                .GET()\n                .uri(URI.create(apiHost + pageUri))\n                .build();\n    }\n\n    @SneakyThrows\n    MyResponse invokeApi(HttpClient httpClient, HttpRequest httpRequest) {\n        HttpResponse&lt;Supplier&lt;MyResponse&gt;&gt; result = httpClient.send(httpRequest, new JsonBodyHandler&lt;&gt;(MyResponse.class));\n        return result.body().get();\n    }\n\n    @SneakyThrows\n    void createFile(String fileName, List&lt;ResponseData&gt; responseDataList) {\n        Path filePath = Paths.get(&quot;test/path&quot; + fileName);\n        Files.createFile(filePath);\n        Files.writeString(filePath, header + System.lineSeparator(), StandardOpenOption.APPEND);\n        for (ResponseData responseData : responseDataList) {\n            Files.writeString(filePath, responseData + System.lineSeparator(), StandardOpenOption.APPEND);\n        }\n    }\n</code></pre>\n<p>Junit 5 code -</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass MyServiceTests {\n\n    @InjectMocks\n    private MyService myService;\n\n    @Mock\n    private HttpClient httpClient;\n    @Mock\n    HttpResponse&lt;Object&gt; httpResponse;\n\n    @Mock\n    private HttpRequest request;\n\n    @Mock\n    Supplier&lt;MyResponse&gt; myResponseSupplier;\n\n\n    @Test\n    void testSendMessage() throws Exception {\n\n        when(httpClient.send(any(),any())).thenReturn(httpResponse);\n        when(httpResponse.body()).thenReturn(myResponseSupplier);\n        when(myResponseSupplier.get()).thenReturn(getMyResponse());\n        myService.create(&quot;https://www.google.com&quot;, &quot;/v1/test?page_size=100&quot;);\n        verify(httpClient).send(request, HttpResponse.BodyHandlers.ofString());\n    }\n}\n</code></pre>\n<p>In the above junit code when &quot;myService.createmyMnt&quot; is executed it actually tried to invoke <a href=\"https://test.com\" rel=\"nofollow noreferrer\">https://test.com</a> instead of mocking the call.</p>\n"},{"tags":["java","gradle","javafx","build.gradle","json-simple"],"comments":[{"owner":{"account_id":5534380,"reputation":268,"user_id":4472711,"display_name":"MNEMO"},"score":0,"creation_date":1684751737,"post_id":76305270,"comment_id":134557695,"body_markdown":"Does this help? https://stackoverflow.com/questions/32543197/error-json-simple-java-util-zip-zipexception-duplicate-entry-org-hamcrest-bas","body":"Does this help? <a href=\"https://stackoverflow.com/questions/32543197/error-json-simple-java-util-zip-zipexception-duplicate-entry-org-hamcrest-bas\" title=\"error json simple java util zip zipexception duplicate entry org hamcrest bas\">stackoverflow.com/questions/32543197/&hellip;</a>"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":3,"creation_date":1684755559,"post_id":76305270,"comment_id":134558388,"body_markdown":"Json simple has been abandoned for years. Better use some other json library.","body":"Json simple has been abandoned for years. Better use some other json library."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1684785844,"post_id":76305270,"comment_id":134564946,"body_markdown":"Please use the correct terminology.  The build errors and warnings you are receiving are not what would be normally termed a &quot;crash&quot;.","body":"Please use the correct terminology.  The build errors and warnings you are receiving are not what would be normally termed a &quot;crash&quot;."}],"owner":{"account_id":28653306,"reputation":1,"user_id":21939865,"display_name":"Dabouz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1684764439,"answer_count":0,"score":0,"last_activity_date":1684751434,"creation_date":1684751434,"question_id":76305270,"body_markdown":"I&#39;m encountering an issue with Gradle build of my javafx project after adding the json-simple library as a dependency. However, the build crashes, and I&#39;m unsure about the cause of the problem. Here are the details of my setup:\r\n\r\n- I added the following line to my build.gradle file within the dependencies block:\r\n`implementation &#39;com.googlecode.json-simple:json-simple:1.1.1&#39;`\r\n\r\n- I also included the line requires json.simple; in my module-info.java file.\r\n\r\nHowever, I&#39;m encountering the following error:\r\n\r\n\r\n```\r\nerror: module json.simple reads package org.hamcrest from both hamcrest.core and junit\r\nerror: module json.simple reads package org.hamcrest.internal from both hamcrest.core and junit\r\nerror: module json.simple reads package org.hamcrest.core from both hamcrest.core and junit\r\n```\r\n\r\nAdditionally, I received the following vuln&#233;rability warning:\r\n\r\n\r\n```\r\nProvides transitive vulnerable dependency maven:junit:junit:4.10\r\nCVE-2020-15250 5.5 Incorrect Permission Assignment for Critical Resource vulnerability pending CVSS allocation\r\nResults powered by Checkmarx(c)\r\n```\r\n\r\nThe error disappears if I remove the requires json.simple; line from the module-info.java file.","title":"Gradle build crashes with json-simple dependency","body":"<p>I'm encountering an issue with Gradle build of my javafx project after adding the json-simple library as a dependency. However, the build crashes, and I'm unsure about the cause of the problem. Here are the details of my setup:</p>\n<ul>\n<li><p>I added the following line to my build.gradle file within the dependencies block:\n<code>implementation 'com.googlecode.json-simple:json-simple:1.1.1'</code></p>\n</li>\n<li><p>I also included the line requires json.simple; in my module-info.java file.</p>\n</li>\n</ul>\n<p>However, I'm encountering the following error:</p>\n<pre><code>error: module json.simple reads package org.hamcrest from both hamcrest.core and junit\nerror: module json.simple reads package org.hamcrest.internal from both hamcrest.core and junit\nerror: module json.simple reads package org.hamcrest.core from both hamcrest.core and junit\n</code></pre>\n<p>Additionally, I received the following vulnérability warning:</p>\n<pre><code>Provides transitive vulnerable dependency maven:junit:junit:4.10\nCVE-2020-15250 5.5 Incorrect Permission Assignment for Critical Resource vulnerability pending CVSS allocation\nResults powered by Checkmarx(c)\n</code></pre>\n<p>The error disappears if I remove the requires json.simple; line from the module-info.java file.</p>\n"},{"tags":["java","oracle","jdbc"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1684731254,"post_id":76303075,"comment_id":134554024,"body_markdown":"Either use a debugger to step in `close` and see what is happening or added a debug statement to log `isClosed`","body":"Either use a debugger to step in <code>close</code> and see what is happening or added a debug statement to log <code>isClosed</code>"},{"owner":{"account_id":8361573,"reputation":573,"user_id":6279677,"display_name":"Suchandra T"},"score":0,"creation_date":1684736274,"post_id":76303075,"comment_id":134554595,"body_markdown":"There are several issues over here. Do not use plain getConnection instead consider something called a connection pool to connect to DB. second is for a priority resource like a database you can exception handling and in finally block mandatorily close the connection. lastly as mentioned by the scary debugger and a detailed review of db server configuration will solve the issue.","body":"There are several issues over here. Do not use plain getConnection instead consider something called a connection pool to connect to DB. second is for a priority resource like a database you can exception handling and in finally block mandatorily close the connection. lastly as mentioned by the scary debugger and a detailed review of db server configuration will solve the issue."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1684736933,"post_id":76303075,"comment_id":134554720,"body_markdown":"Are you using any connection pool like Hikari? If yes check the size of the pool - should not be greater then 8 in your case.","body":"Are you using any connection pool like Hikari? If yes check the size of the pool - should not be greater then 8 in your case."},{"owner":{"account_id":7957656,"reputation":81,"user_id":6250852,"display_name":"Miracle"},"score":0,"creation_date":1684749199,"post_id":76303075,"comment_id":134557196,"body_markdown":"@Mar-Z I am not using any connection pool","body":"@Mar-Z I am not using any connection pool"},{"owner":{"account_id":7957656,"reputation":81,"user_id":6250852,"display_name":"Miracle"},"score":0,"creation_date":1684749248,"post_id":76303075,"comment_id":134557206,"body_markdown":"@SuchandraT Yes, the code handles exception. I pasted only the important part of the code here","body":"@SuchandraT Yes, the code handles exception. I pasted only the important part of the code here"},{"owner":{"account_id":7957656,"reputation":81,"user_id":6250852,"display_name":"Miracle"},"score":0,"creation_date":1684759863,"post_id":76303075,"comment_id":134559310,"body_markdown":"@ScaryWombat It is hard to debug the issue. There are thousands of test cases, half of them run without any issue. The issue starts when around 50% of the total tests are completed","body":"@ScaryWombat It is hard to debug the issue. There are thousands of test cases, half of them run without any issue. The issue starts when around 50% of the total tests are completed"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684750737,"creation_date":1684750737,"answer_id":76305171,"question_id":76303075,"body_markdown":"&gt; I am running the validations in parallel on 10 different threads.\r\n\r\nI wonder how are you running the parallel tests? Is it possible that you will end up with 10 instances of the `DatabaseConnection` class? If yes then you will also get 10 semaphores counting 8 times each. In this case the maximum number of connections will be 80... You can avoid it declaring the semaphore as static.\r\n\r\n    static Semaphore counter = new Semaphore(8);","title":"connection.close() does not close the connection at server side","body":"<blockquote>\n<p>I am running the validations in parallel on 10 different threads.</p>\n</blockquote>\n<p>I wonder how are you running the parallel tests? Is it possible that you will end up with 10 instances of the <code>DatabaseConnection</code> class? If yes then you will also get 10 semaphores counting 8 times each. In this case the maximum number of connections will be 80... You can avoid it declaring the semaphore as static.</p>\n<pre><code>static Semaphore counter = new Semaphore(8);\n</code></pre>\n"}],"owner":{"account_id":7957656,"reputation":81,"user_id":6250852,"display_name":"Miracle"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684750737,"creation_date":1684730424,"question_id":76303075,"body_markdown":"I am doing some data validations on Oracle DB. There are 10 different types of validations I have to do. Each set of validation contains hundreds of test cases. To save time, I am running the validations in parallel on 10 different threads. Each thread opens a database connection, execute the test cases and then close the connection - and do the same for the next test case. The problem is that I can have maximum of 8 concurrent oracle sessions. It is currently not possible to increase the number of sessions. To handle this scenario, I am using `Semaphore` to limit the number of concurrent oracle sessions to 8\r\n\r\n    public class DatabaseConnection{\r\n     Semaphore counter = new Semaphore(8);\r\n     public Connection createConnection(){\r\n       ...\r\n       ...\r\n       counter.acquire();\r\n       Connection connection = DriverManager.getConnection(....\r\n       ...\r\n    }\r\n    \r\n    public closeConnection(Connection con){\r\n      ...\r\n      con.close();\r\n      counter.release();\r\n    }\r\n    }\r\n\r\nEventhough I am closing the connections properly after executing each test, I am getting `maximum number of sessions exceeded` exception. I suspects eventhough I close the connections, it is not properly closed at server side. What is the solution for this?","title":"connection.close() does not close the connection at server side","body":"<p>I am doing some data validations on Oracle DB. There are 10 different types of validations I have to do. Each set of validation contains hundreds of test cases. To save time, I am running the validations in parallel on 10 different threads. Each thread opens a database connection, execute the test cases and then close the connection - and do the same for the next test case. The problem is that I can have maximum of 8 concurrent oracle sessions. It is currently not possible to increase the number of sessions. To handle this scenario, I am using <code>Semaphore</code> to limit the number of concurrent oracle sessions to 8</p>\n<pre><code>public class DatabaseConnection{\n Semaphore counter = new Semaphore(8);\n public Connection createConnection(){\n   ...\n   ...\n   counter.acquire();\n   Connection connection = DriverManager.getConnection(....\n   ...\n}\n\npublic closeConnection(Connection con){\n  ...\n  con.close();\n  counter.release();\n}\n}\n</code></pre>\n<p>Eventhough I am closing the connections properly after executing each test, I am getting <code>maximum number of sessions exceeded</code> exception. I suspects eventhough I close the connections, it is not properly closed at server side. What is the solution for this?</p>\n"},{"tags":["java","math","java-8"],"answers":[{"comments":[{"owner":{"account_id":1200939,"reputation":29489,"user_id":1171620,"accept_rate":43,"display_name":"Suzan Cioc"},"score":0,"creation_date":1419472249,"post_id":27643634,"comment_id":43705992,"body_markdown":"Anyway I like your answer most.","body":"Anyway I like your answer most."},{"owner":{"account_id":1308673,"reputation":128,"user_id":1257142,"accept_rate":25,"display_name":"Hazem Mahsoub"},"score":0,"creation_date":1695638069,"post_id":27643634,"comment_id":136046481,"body_markdown":"That&#39;s what I call a neat solution!","body":"That&#39;s what I call a neat solution!"}],"tags":[],"owner":{"account_id":1686251,"reputation":4392,"user_id":1549476,"accept_rate":88,"display_name":"k_g"},"comment_count":2,"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1512645089,"creation_date":1419472114,"answer_id":27643634,"question_id":27643616,"body_markdown":"There is none in the `Math` class, but you can easily calculate it\r\n\r\n    long ceilDiv(long x, long y){\r\n        return -Math.floorDiv(-x,y);\r\n    }\r\n\r\nFor example, `ceilDiv(1,2)` = `-floorDiv(-1,2)` =`-(-1)`= 1 (correct answer). ","title":"ceil conterpart for Math.floorDiv in Java?","body":"<p>There is none in the <code>Math</code> class, but you can easily calculate it</p>\n\n<pre><code>long ceilDiv(long x, long y){\n    return -Math.floorDiv(-x,y);\n}\n</code></pre>\n\n<p>For example, <code>ceilDiv(1,2)</code> = <code>-floorDiv(-1,2)</code> =<code>-(-1)</code>= 1 (correct answer). </p>\n"},{"tags":[],"owner":{"account_id":1706986,"reputation":4611,"user_id":1565862,"display_name":"fejese"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1419472132,"creation_date":1419472132,"answer_id":27643636,"question_id":27643616,"body_markdown":"You can make use of the `floorDiv` function and fiddle with that:\r\n\r\n    int ceilDiv(int x, int y) {\r\n        return Math.floorDiv(x, y) + (x % y == 0 ? 0 : 1)\r\n    }","title":"ceil conterpart for Math.floorDiv in Java?","body":"<p>You can make use of the <code>floorDiv</code> function and fiddle with that:</p>\n\n<pre><code>int ceilDiv(int x, int y) {\n    return Math.floorDiv(x, y) + (x % y == 0 ? 0 : 1)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":67261,"reputation":181,"user_id":2504891,"display_name":"Vesal"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1432821134,"creation_date":1432821134,"answer_id":30508570,"question_id":27643616,"body_markdown":"I&#39;d also just use the negation of floorMod, but if you are going to define your own function, you could simply adapt the above code:\r\n\r\n    public static int ceilDiv(int x, int y) {\r\n        int r = x / y;\r\n        // if the signs are the same and modulo not zero, round up\r\n        if ((x ^ y) &gt;= 0 &amp;&amp; (r * y != x)) r++;\r\n        return r;\r\n    }\r\n\r\n","title":"ceil conterpart for Math.floorDiv in Java?","body":"<p>I'd also just use the negation of floorMod, but if you are going to define your own function, you could simply adapt the above code:</p>\n\n<pre><code>public static int ceilDiv(int x, int y) {\n    int r = x / y;\n    // if the signs are the same and modulo not zero, round up\n    if ((x ^ y) &gt;= 0 &amp;&amp; (r * y != x)) r++;\n    return r;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111883,"reputation":324,"user_id":1877010,"display_name":"DaHoC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684750472,"creation_date":1684749818,"answer_id":76305045,"question_id":27643616,"body_markdown":"Since Java 18, `Math.ceilDiv` is available, see https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Math.html#ceilDiv(int,int)","title":"ceil conterpart for Math.floorDiv in Java?","body":"<p>Since Java 18, <code>Math.ceilDiv</code> is available, see <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Math.html#ceilDiv(int,int)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Math.html#ceilDiv(int,int)</a></p>\n"}],"owner":{"account_id":1200939,"reputation":29489,"user_id":1171620,"accept_rate":43,"display_name":"Suzan Cioc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5726,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":27643634,"answer_count":4,"score":12,"last_activity_date":1684750472,"creation_date":1419471719,"question_id":27643616,"body_markdown":"Is there any `ceil` counterpart for [`Math.floorDiv()`][1]\r\n\r\nHow to calculate it fastest way with what we have?\r\n\r\n**UPDATE**\r\n\r\nThe code for `floorDiv()` is follows:\r\n\r\n     public static long floorDiv(long x, long y) {\r\n            long r = x / y;\r\n            // if the signs are different and modulo not zero, round down\r\n            if ((x ^ y) &lt; 0 &amp;&amp; (r * y != x)) {\r\n                r--;\r\n            }\r\n            return r;\r\n        }\r\n\r\nCan we code `ceil` the similar way?\r\n\r\n**UPDATE 2**\r\n\r\nI saw this answer https://stackoverflow.com/a/7446742/258483 but it seems to have too many unnecessary operations.\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#floorDiv-long-long-\r\n\r\n","title":"ceil conterpart for Math.floorDiv in Java?","body":"<p>Is there any <code>ceil</code> counterpart for <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#floorDiv-long-long-\" rel=\"noreferrer\"><code>Math.floorDiv()</code></a></p>\n\n<p>How to calculate it fastest way with what we have?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The code for <code>floorDiv()</code> is follows:</p>\n\n<pre><code> public static long floorDiv(long x, long y) {\n        long r = x / y;\n        // if the signs are different and modulo not zero, round down\n        if ((x ^ y) &lt; 0 &amp;&amp; (r * y != x)) {\n            r--;\n        }\n        return r;\n    }\n</code></pre>\n\n<p>Can we code <code>ceil</code> the similar way?</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>I saw this answer <a href=\"https://stackoverflow.com/a/7446742/258483\">https://stackoverflow.com/a/7446742/258483</a> but it seems to have too many unnecessary operations.</p>\n"},{"tags":["java","c#","c++","math"],"comments":[{"owner":{"account_id":99415,"reputation":1127,"user_id":268555,"accept_rate":78,"display_name":"rikkit"},"score":1,"creation_date":1344355380,"post_id":17944,"comment_id":15759531,"body_markdown":"Am I missing something? y/x + 1 works great (provided you know the / operator always rounds down).","body":"Am I missing something? y/x + 1 works great (provided you know the / operator always rounds down)."},{"owner":{"account_id":1557,"reputation":57601,"user_id":2084,"accept_rate":100,"display_name":"Ian Nelson"},"score":68,"creation_date":1344366940,"post_id":17944,"comment_id":15764115,"body_markdown":"@rikkit - if y and x are equal, y/x + 1 is one too high.","body":"@rikkit - if y and x are equal, y/x + 1 is one too high."},{"owner":{"account_id":5204645,"reputation":917,"user_id":4163002,"accept_rate":90,"display_name":"ZX9"},"score":1,"creation_date":1482332051,"post_id":17944,"comment_id":69731961,"body_markdown":"For anyone just now finding this, [this answer to a dupe question](http://stackoverflow.com/a/4846569/4163002) avoids unnecessary conversion to double *and* avoids overflow concerns in addition to providing a clear explanation.","body":"For anyone just now finding this, <a href=\"http://stackoverflow.com/a/4846569/4163002\">this answer to a dupe question</a> avoids unnecessary conversion to double <i>and</i> avoids overflow concerns in addition to providing a clear explanation."},{"owner":{"account_id":26160,"reputation":36958,"user_id":67824,"accept_rate":85,"display_name":"Ohad Schneider"},"score":3,"creation_date":1503580231,"post_id":17944,"comment_id":78683189,"body_markdown":"@IanNelson more generally if `x` is divisible by `y`, `y/x + 1` would be one too high.","body":"@IanNelson more generally if <code>x</code> is divisible by <code>y</code>, <code>y&#47;x + 1</code> would be one too high."},{"owner":{"account_id":89883,"reputation":23781,"user_id":247702,"accept_rate":92,"display_name":"user247702"},"score":1,"creation_date":1512138124,"post_id":17944,"comment_id":82148215,"body_markdown":"@ZX9 No, it does not avoid overflow concerns. It&#39;s exactly the same solution as Ian Nelson posted here.","body":"@ZX9 No, it does not avoid overflow concerns. It&#39;s exactly the same solution as Ian Nelson posted here."}],"answers":[{"tags":[],"owner":{"account_id":1392,"reputation":65576,"user_id":1862,"accept_rate":59,"display_name":"Kibbee"},"comment_count":0,"down_vote_count":7,"up_vote_count":2,"is_accepted":false,"score":-5,"last_activity_date":1219238997,"creation_date":1219238997,"answer_id":17949,"question_id":17944,"body_markdown":"You&#39;ll want to do floating point division, and then use the ceiling function, to round up the value to the next integer.","title":"How to round up the result of integer division?","body":"<p>You'll want to do floating point division, and then use the ceiling function, to round up the value to the next integer.</p>\n"},{"tags":[],"owner":{"account_id":813,"reputation":15500,"user_id":1061,"display_name":"Jarod Elliott"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1219239043,"creation_date":1219239043,"answer_id":17953,"question_id":17944,"body_markdown":"Another alternative is to use the mod() function (or &#39;%&#39;). If there is a non-zero remainder then increment the integer result of the division.","title":"How to round up the result of integer division?","body":"<p>Another alternative is to use the mod() function (or '%'). If there is a non-zero remainder then increment the integer result of the division.</p>\n"},{"comments":[{"owner":{"account_id":36350,"reputation":1262,"user_id":103640,"accept_rate":88,"display_name":"Rhys Ulerich"},"score":9,"creation_date":1264521446,"post_id":17954,"comment_id":2081210,"body_markdown":"x/y + !!(x % y) avoids the branch for C-like languages.  Odds are good, however, your compiler is doing that anyway.","body":"x/y + !!(x % y) avoids the branch for C-like languages.  Odds are good, however, your compiler is doing that anyway."},{"owner":{"account_id":53977,"reputation":22869,"user_id":161424,"accept_rate":100,"display_name":"Cogwheel"},"score":3,"creation_date":1424829244,"post_id":17954,"comment_id":45708557,"body_markdown":"+1 for not overflowing like the answers above... though converting ints to doubles just for Math.ceiling and then back again is a bad idea in performance sensitive code.","body":"+1 for not overflowing like the answers above... though converting ints to doubles just for Math.ceiling and then back again is a bad idea in performance sensitive code."},{"owner":{"account_id":3124965,"reputation":1776,"user_id":2644015,"accept_rate":100,"display_name":"smead"},"score":4,"creation_date":1460163900,"post_id":17954,"comment_id":60629585,"body_markdown":"@RhysUlerich that doesn&#39;t work in c# (can&#39;t directly convert an int to a bool). rjmunro&#39;s solution is the only way to avoid branching I think.","body":"@RhysUlerich that doesn&#39;t work in c# (can&#39;t directly convert an int to a bool). rjmunro&#39;s solution is the only way to avoid branching I think."},{"owner":{"account_id":4296649,"reputation":168,"user_id":3511538,"display_name":"Tim"},"score":0,"creation_date":1700671987,"post_id":17954,"comment_id":136684193,"body_markdown":"@smead No type cast/conversion is performed, just an inline function call. It does work rather elegantly in C# because it&#39;s an inline IF function returning an integer 1 or 0, where two operands are tested in a function call that (implicitly) returns int, which the compiler will certainly assume based on the type receiving the value assignment and the type compatibility of the literals returned by the IIF.","body":"@smead No type cast/conversion is performed, just an inline function call. It does work rather elegantly in C# because it&#39;s an inline IF function returning an integer 1 or 0, where two operands are tested in a function call that (implicitly) returns int, which the compiler will certainly assume based on the type receiving the value assignment and the type compatibility of the literals returned by the IIF."}],"tags":[],"owner":{"account_id":12,"reputation":54513,"user_id":17,"accept_rate":96,"display_name":"Nick Berardi"},"comment_count":4,"down_vote_count":2,"up_vote_count":89,"is_accepted":false,"score":87,"last_activity_date":1219239591,"creation_date":1219239068,"answer_id":17954,"question_id":17944,"body_markdown":"This should give you what you want.  You will definitely want x items divided by y items per page, the problem is when uneven numbers come up, so if there is a partial page we also want to add one page.\r\n\r\n    int x = number_of_items;\r\n    int y = items_per_page;\r\n\r\n    // with out library\r\n    int pages = x/y + (x % y &gt; 0 ? 1 : 0)\r\n\r\n    // with library\r\n    int pages = (int)Math.Ceiling((double)x / (double)y);","title":"How to round up the result of integer division?","body":"<p>This should give you what you want.  You will definitely want x items divided by y items per page, the problem is when uneven numbers come up, so if there is a partial page we also want to add one page.</p>\n\n<pre><code>int x = number_of_items;\nint y = items_per_page;\n\n// with out library\nint pages = x/y + (x % y &gt; 0 ? 1 : 0)\n\n// with library\nint pages = (int)Math.Ceiling((double)x / (double)y);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":138421,"reputation":4322,"user_id":343347,"accept_rate":75,"display_name":"felickz"},"score":4,"creation_date":1349124410,"post_id":17957,"comment_id":17114728,"body_markdown":"why is this answer so far down when the op asks for C# explicitly!","body":"why is this answer so far down when the op asks for C# explicitly!"},{"owner":{"account_id":1477445,"reputation":2203,"user_id":1387518,"accept_rate":80,"display_name":"DanM7"},"score":3,"creation_date":1350509288,"post_id":17957,"comment_id":17544515,"body_markdown":"You also need to cast the output to `int` because `Math.Ceiling` returns a `double` or `decimal`, depending on the input types.","body":"You also need to cast the output to <code>int</code> because <code>Math.Ceiling</code> returns a <code>double</code> or <code>decimal</code>, depending on the input types."},{"owner":{"account_id":544409,"reputation":5735,"user_id":913845,"display_name":"Zar Shardan"},"score":25,"creation_date":1365080718,"post_id":17957,"comment_id":22488638,"body_markdown":"because it is extremely inefficient","body":"because it is extremely inefficient"},{"owner":{"account_id":72486,"reputation":6809,"user_id":209249,"accept_rate":50,"display_name":"Jared Kells"},"score":11,"creation_date":1428387669,"post_id":17957,"comment_id":47129803,"body_markdown":"It may be inefficient but it&#39;s extremely easy to understand. Given calculating a page count is usually done once per request any performance loss wouldn&#39;t be measurable.","body":"It may be inefficient but it&#39;s extremely easy to understand. Given calculating a page count is usually done once per request any performance loss wouldn&#39;t be measurable."},{"owner":{"account_id":193050,"reputation":2615,"user_id":434537,"accept_rate":73,"display_name":"rollsch"},"score":3,"creation_date":1493016468,"post_id":17957,"comment_id":74212095,"body_markdown":"Its barely more readable than this &quot;(dividend + (divisor - 1)) / divisor;&quot; also its slow and requires the math library.","body":"Its barely more readable than this &quot;(dividend + (divisor - 1)) / divisor;&quot; also its slow and requires the math library."},{"owner":{"account_id":1880710,"reputation":915,"user_id":1700976,"accept_rate":75,"display_name":"Divisadero"},"score":0,"creation_date":1596654189,"post_id":17957,"comment_id":111883913,"body_markdown":"@rolls I think by readable he ment that intention is much clearer.","body":"@rolls I think by readable he ment that intention is much clearer."},{"owner":{"account_id":237529,"reputation":18988,"user_id":2621917,"accept_rate":80,"display_name":"Michael Piefel"},"score":0,"creation_date":1685462109,"post_id":17957,"comment_id":134661928,"body_markdown":"The intention is clear but the casts make it ugly.","body":"The intention is clear but the casts make it ugly."}],"tags":[],"owner":{"account_id":1372,"reputation":11302,"user_id":1830,"display_name":"Huppie"},"comment_count":7,"down_vote_count":9,"up_vote_count":109,"is_accepted":false,"score":100,"last_activity_date":1427664248,"creation_date":1219239184,"answer_id":17957,"question_id":17944,"body_markdown":"For C# the solution is to cast the values to a double (as Math.Ceiling takes a double):\r\n\r\n    int nPages = (int)Math.Ceiling((double)nItems / (double)nItemsPerPage);\r\n\r\nIn java you should do the same with Math.ceil().\r\n","title":"How to round up the result of integer division?","body":"<p>For C# the solution is to cast the values to a double (as Math.Ceiling takes a double):</p>\n\n<pre><code>int nPages = (int)Math.Ceiling((double)nItems / (double)nItemsPerPage);\n</code></pre>\n\n<p>In java you should do the same with Math.ceil().</p>\n"},{"comments":[{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":15,"creation_date":1304500893,"post_id":17974,"comment_id":6763864,"body_markdown":"-1 because of the overflow bug pointed out by [Brandon DuRette](http://stackoverflow.com/questions/17944/how-to-round-up-the-result-of-integer-division/96921#96921)","body":"-1 because of the overflow bug pointed out by <a href=\"http://stackoverflow.com/questions/17944/how-to-round-up-the-result-of-integer-division/96921#96921\">Brandon DuRette</a>"},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":36,"creation_date":1305805303,"post_id":17974,"comment_id":7011696,"body_markdown":"Mr Obvious says: Remember to make sure that recordsPerPage is not zero","body":"Mr Obvious says: Remember to make sure that recordsPerPage is not zero"},{"owner":{"account_id":1000632,"reputation":1567,"user_id":1015566,"accept_rate":60,"display_name":"gosukiwi"},"score":7,"creation_date":1346265152,"post_id":17974,"comment_id":16312738,"body_markdown":"Good job, I can&#39;t believe C# doesn&#39;t have integer ceiling.","body":"Good job, I can&#39;t believe C# doesn&#39;t have integer ceiling."},{"owner":{"account_id":7303671,"reputation":563,"user_id":5565406,"display_name":"Mifo"},"score":3,"creation_date":1501371707,"post_id":17974,"comment_id":77750774,"body_markdown":"Yup, here I am in mid-2017 stumbling across this great answer after trying several much more complex approaches.","body":"Yup, here I am in mid-2017 stumbling across this great answer after trying several much more complex approaches."},{"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"score":5,"creation_date":1530722729,"post_id":17974,"comment_id":89338688,"body_markdown":"For languages with a proper Euclidian-division operator such as Python, an even simpler approach would be `pageCount = -((-records) // recordsPerPage)`.","body":"For languages with a proper Euclidian-division operator such as Python, an even simpler approach would be <code>pageCount = -((-records) &#47;&#47; recordsPerPage)</code>."},{"owner":{"account_id":2781903,"reputation":5630,"user_id":2394284,"accept_rate":100,"display_name":"user2394284"},"score":1,"creation_date":1552916946,"post_id":17974,"comment_id":97180564,"body_markdown":"+1 because this also works with unsigned numbers (relevant in other languages): The &quot;simplification&quot; `(records - 1) / recordsPerPage + 1` underflows when records == 0.","body":"+1 because this also works with unsigned numbers (relevant in other languages): The &quot;simplification&quot; <code>(records - 1) &#47; recordsPerPage + 1</code> underflows when records == 0."},{"owner":{"account_id":12348172,"reputation":1962,"user_id":9008140,"display_name":"John Lord"},"score":0,"creation_date":1646433864,"post_id":17974,"comment_id":126130321,"body_markdown":"It does have Ceiling.  It&#39;s under Math, not Integer.","body":"It does have Ceiling.  It&#39;s under Math, not Integer."},{"owner":{"account_id":119615,"reputation":11742,"user_id":311420,"accept_rate":87,"display_name":"Raymond Chenon"},"score":0,"creation_date":1677063954,"post_id":17974,"comment_id":133262215,"body_markdown":"Thanks, the solution is elegant without external libraries.\n\n@finnw to avoid the overflow bug, just split in two divisions \n`int pageCount = records / recordsPerPage + (recordsPerPage - 1) / recordsPerPage;`","body":"Thanks, the solution is elegant without external libraries.  @finnw to avoid the overflow bug, just split in two divisions  <code>int pageCount = records &#47; recordsPerPage + (recordsPerPage - 1) &#47; recordsPerPage;</code>"},{"owner":{"account_id":4296649,"reputation":168,"user_id":3511538,"display_name":"Tim"},"score":0,"creation_date":1700689275,"post_id":17974,"comment_id":136686913,"body_markdown":"I spent awhile on ChatGPT and came up with `int result = x / y + ((x % y + y - 1) / y);`, but @Ian Nelson&#39;s answer is simpler to read and more computationally efficient (and GPT agrees).","body":"I spent awhile on ChatGPT and came up with <code>int result = x &#47; y + ((x % y + y - 1) &#47; y);</code>, but @Ian Nelson&#39;s answer is simpler to read and more computationally efficient (and GPT agrees)."}],"tags":[],"owner":{"account_id":1557,"reputation":57601,"user_id":2084,"accept_rate":100,"display_name":"Ian Nelson"},"comment_count":9,"down_vote_count":8,"up_vote_count":587,"is_accepted":true,"score":579,"last_activity_date":1219239728,"creation_date":1219239728,"answer_id":17974,"question_id":17944,"body_markdown":"Found an elegant solution:\r\n\r\n    int pageCount = (records + recordsPerPage - 1) / recordsPerPage;\r\n\r\nSource: [Number Conversion, Roland Backhouse, 2001][1]\r\n\r\n\r\n  [1]: http://www.cs.nott.ac.uk/~rcb/G51MPC/slides/NumberLogic.pdf","title":"How to round up the result of integer division?","body":"<p>Found an elegant solution:</p>\n\n<pre><code>int pageCount = (records + recordsPerPage - 1) / recordsPerPage;\n</code></pre>\n\n<p>Source: <a href=\"http://www.cs.nott.ac.uk/~rcb/G51MPC/slides/NumberLogic.pdf\" rel=\"noreferrer\">Number Conversion, Roland Backhouse, 2001</a></p>\n"},{"comments":[{"owner":{"account_id":2445,"reputation":27389,"user_id":3408,"accept_rate":51,"display_name":"rjmunro"},"score":6,"creation_date":1233793108,"post_id":96921,"comment_id":327784,"body_markdown":"I don&#39;t think you are realistically going to hit this bug in the scenario presented. 2^31 records is quite a lot to be having to page through.","body":"I don&#39;t think you are realistically going to hit this bug in the scenario presented. 2^31 records is quite a lot to be having to page through."},{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":8,"creation_date":1304500823,"post_id":96921,"comment_id":6763841,"body_markdown":"@rjmunro, [real-world example here](http://code.google.com/p/guava-libraries/issues/detail?id=616)","body":"@rjmunro, <a href=\"http://code.google.com/p/guava-libraries/issues/detail?id=616\" rel=\"nofollow noreferrer\">real-world example here</a>"},{"owner":{"account_id":2445,"reputation":27389,"user_id":3408,"accept_rate":51,"display_name":"rjmunro"},"score":1,"creation_date":1322567087,"post_id":96921,"comment_id":10240398,"body_markdown":"@finnw: AFAICS, there isn&#39;t a real-world example on that page, just a report of someone else finding the bug in a theoretical scenario.","body":"@finnw: AFAICS, there isn&#39;t a real-world example on that page, just a report of someone else finding the bug in a theoretical scenario."},{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":0,"creation_date":1322579479,"post_id":96921,"comment_id":10244670,"body_markdown":"@rjmunro, I was referring to this: *&quot;I came across this oddity while I was working on an SWT-based table viewer that supports pagination. Internally, the table viewer uses Lists.partition() to split its input elements into pages of a fixed size.&quot;*","body":"@rjmunro, I was referring to this: <i>&quot;I came across this oddity while I was working on an SWT-based table viewer that supports pagination. Internally, the table viewer uses Lists.partition() to split its input elements into pages of a fixed size.&quot;</i>"},{"owner":{"account_id":9610,"reputation":4810,"user_id":17834,"accept_rate":83,"display_name":"Brandon DuRette"},"score":6,"creation_date":1322589598,"post_id":96921,"comment_id":10248189,"body_markdown":"Yes, I was being pedantic in pointing out the bug. Many bugs can exist in perpetuity without ever causing any problems. A bug of the same form existed in the JDK&#39;s implementation of binarySearch for some nine years, before someone reported it (http://googleresearch.blogspot.com/2006/06/extra-extra-read-all-about-it-nearly.html). I guess the question is, regardless of how unlikely you are to encounter this bug, why not fix it up front?","body":"Yes, I was being pedantic in pointing out the bug. Many bugs can exist in perpetuity without ever causing any problems. A bug of the same form existed in the JDK&#39;s implementation of binarySearch for some nine years, before someone reported it (<a href=\"http://googleresearch.blogspot.com/2006/06/extra-extra-read-all-about-it-nearly.html\" rel=\"nofollow noreferrer\">googleresearch.blogspot.com/2006/06/&hellip;</a>). I guess the question is, regardless of how unlikely you are to encounter this bug, why not fix it up front?"},{"owner":{"account_id":9610,"reputation":4810,"user_id":17834,"accept_rate":83,"display_name":"Brandon DuRette"},"score":4,"creation_date":1322589822,"post_id":96921,"comment_id":10248254,"body_markdown":"Also, it should be noted that it&#39;s not just the number of elements that are paged that matter, it&#39;s also the page size. So, if you&#39;re building a library and someone chooses to not page by passing 2^31-1 (Integer.MAX_VALUE) as the page size, then the bug is triggered.","body":"Also, it should be noted that it&#39;s not just the number of elements that are paged that matter, it&#39;s also the page size. So, if you&#39;re building a library and someone chooses to not page by passing 2^31-1 (Integer.MAX_VALUE) as the page size, then the bug is triggered."}],"tags":[],"owner":{"account_id":9610,"reputation":4810,"user_id":17834,"accept_rate":83,"display_name":"Brandon DuRette"},"comment_count":6,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1535698317,"creation_date":1221771673,"answer_id":96921,"question_id":17944,"body_markdown":"The integer math solution that Ian provided is nice, but suffers from an integer overflow bug. Assuming the variables are all `int`, the solution could be rewritten to use `long` math and avoid the bug:\r\n\r\n `int pageCount = (-1L + records + recordsPerPage) / recordsPerPage;`\r\n\r\nIf `records` is a `long`, the bug remains. The modulus solution does not have the bug.","title":"How to round up the result of integer division?","body":"<p>The integer math solution that Ian provided is nice, but suffers from an integer overflow bug. Assuming the variables are all <code>int</code>, the solution could be rewritten to use <code>long</code> math and avoid the bug:</p>\n\n<p><code>int pageCount = (-1L + records + recordsPerPage) / recordsPerPage;</code></p>\n\n<p>If <code>records</code> is a <code>long</code>, the bug remains. The modulus solution does not have the bug.</p>\n"},{"comments":[{"owner":{"account_id":8130,"reputation":16886,"user_id":14454,"display_name":"Timothy Walters"},"score":7,"creation_date":1300329536,"post_id":503201,"comment_id":6021898,"body_markdown":"+1, the issue of zero records still returning 1 pageCount is actually handy, since I would still want 1 page, showing the placeholder/fake row of &quot;no records match your criteria&quot;, helps avoid any &quot;0 page count&quot; issues in whatever pagination control you use.","body":"+1, the issue of zero records still returning 1 pageCount is actually handy, since I would still want 1 page, showing the placeholder/fake row of &quot;no records match your criteria&quot;, helps avoid any &quot;0 page count&quot; issues in whatever pagination control you use."},{"owner":{"account_id":1557,"reputation":57601,"user_id":2084,"accept_rate":100,"display_name":"Ian Nelson"},"score":36,"creation_date":1315295320,"post_id":503201,"comment_id":8819292,"body_markdown":"Be aware that the two solutions do not return the same pageCount for zero records. This simplified version will return 1 pageCount for zero records, whereas the Roland Backhouse version returns 0 pageCount. Fine if that&#39;s what you desire, but the two equations are not equivalent when performed by C#/Java stylee integer division.","body":"Be aware that the two solutions do not return the same pageCount for zero records. This simplified version will return 1 pageCount for zero records, whereas the Roland Backhouse version returns 0 pageCount. Fine if that&#39;s what you desire, but the two equations are not equivalent when performed by C#/Java stylee integer division."},{"owner":{"account_id":214812,"reputation":791,"user_id":469016,"display_name":"dave heywood"},"score":13,"creation_date":1399020063,"post_id":503201,"comment_id":35897324,"body_markdown":"tiny edit for clarity for people scanning it and missing bodmas when changing to the simpification from the Nelson solution (like I did the first time !), the simplification with brackets is...\n\nint pageCount = ((records - 1) / recordsPerPage) + 1;","body":"tiny edit for clarity for people scanning it and missing bodmas when changing to the simpification from the Nelson solution (like I did the first time !), the simplification with brackets is...  int pageCount = ((records - 1) / recordsPerPage) + 1;"},{"owner":{"account_id":3894877,"reputation":348,"user_id":3224196,"accept_rate":75,"display_name":"Martin"},"score":1,"creation_date":1454695057,"post_id":503201,"comment_id":58175570,"body_markdown":"You should add parenthesis to the simplified version so that it doesn&#39;t rely on a specific order of operations. i.e., ((records - 1) / recordsPerPage) + 1.","body":"You should add parenthesis to the simplified version so that it doesn&#39;t rely on a specific order of operations. i.e., ((records - 1) / recordsPerPage) + 1."},{"owner":{"account_id":171301,"reputation":6297,"user_id":398630,"accept_rate":79,"display_name":"BrainSlugs83"},"score":0,"creation_date":1468013150,"post_id":503201,"comment_id":63970530,"body_markdown":"Also, it&#39;s simpler to translate it to other division problems; Good to know there&#39;s a simple way to do ceiling division with integers.","body":"Also, it&#39;s simpler to translate it to other division problems; Good to know there&#39;s a simple way to do ceiling division with integers."},{"owner":{"account_id":1334090,"reputation":141,"user_id":1277278,"display_name":"Michael"},"score":5,"creation_date":1515541199,"post_id":503201,"comment_id":83336651,"body_markdown":"@Ian, this answer doesn&#39;t ALWAYS return 1.  It can return 0 if your recordsPerPage is &quot;1&quot; and there are 0 records: `-1 / 1 + 1 = 0`.  While that&#39;s not a super common occurrence, it&#39;s important to keep in mind if you&#39;re allowing users to adjust page size.  So either don&#39;t allow users to have a page size of 1, do a check on page size, or both (probably preferable to avoid unexpected behavior).","body":"@Ian, this answer doesn&#39;t ALWAYS return 1.  It can return 0 if your recordsPerPage is &quot;1&quot; and there are 0 records: <code>-1 &#47; 1 + 1 = 0</code>.  While that&#39;s not a super common occurrence, it&#39;s important to keep in mind if you&#39;re allowing users to adjust page size.  So either don&#39;t allow users to have a page size of 1, do a check on page size, or both (probably preferable to avoid unexpected behavior)."},{"owner":{"account_id":1751450,"reputation":784,"user_id":1600445,"display_name":"JimmyMcHoover"},"score":0,"creation_date":1524831452,"post_id":503201,"comment_id":87140798,"body_markdown":"This is no solution for the overflow, though. With Ian&#39;s solution you get twice the usable range if you use unsigned integers, and `records + recordsPerPage` has an upper bound of 2^32 or 2^64. With this solution you can only use a signed integer for `records`, otherwise it will overflow at `0 - 1`, so `records` is upper bound by 2^31 or 2^63.","body":"This is no solution for the overflow, though. With Ian&#39;s solution you get twice the usable range if you use unsigned integers, and <code>records + recordsPerPage</code> has an upper bound of 2^32 or 2^64. With this solution you can only use a signed integer for <code>records</code>, otherwise it will overflow at <code>0 - 1</code>, so <code>records</code> is upper bound by 2^31 or 2^63."},{"owner":{"account_id":299163,"reputation":524,"user_id":605597,"display_name":"KevinVictor"},"score":1,"creation_date":1583441624,"post_id":503201,"comment_id":107128159,"body_markdown":"FWIW, I was doing something similar, calculating the max page number, and if the page numbers are 0-based, it becomes a nice, clean... maxPage = (records - 1) / recordsPerPage.  Only thing is it has the same issue when records==0... if recordsPerPage is 1, the result is -1 (what I&#39;d want) but if recordsPerPage&gt;1, you get 0.","body":"FWIW, I was doing something similar, calculating the max page number, and if the page numbers are 0-based, it becomes a nice, clean... maxPage = (records - 1) / recordsPerPage.  Only thing is it has the same issue when records==0... if recordsPerPage is 1, the result is -1 (what I&#39;d want) but if recordsPerPage&gt;1, you get 0."}],"tags":[],"owner":{"account_id":2445,"reputation":27389,"user_id":3408,"accept_rate":51,"display_name":"rjmunro"},"comment_count":8,"down_vote_count":3,"up_vote_count":251,"is_accepted":false,"score":248,"last_activity_date":1233581160,"creation_date":1233581160,"answer_id":503201,"question_id":17944,"body_markdown":"Converting to floating point and back seems like a huge waste of time at the CPU level.\r\n\r\nIan Nelson&#39;s solution:\r\n\r\n    int pageCount = (records + recordsPerPage - 1) / recordsPerPage;\r\n\r\nCan be simplified to:\r\n\r\n    int pageCount = (records - 1) / recordsPerPage + 1;\r\n\r\nAFAICS, this doesn&#39;t have the overflow bug that Brandon DuRette pointed out, and because it only uses it once, you don&#39;t need to store the recordsPerPage specially if it comes from  an expensive function to fetch the value from a config file or something.\r\n\r\nI.e. this might be inefficient, if config.fetch_value used a database lookup or something:\r\n\r\n    int pageCount = (records + config.fetch_value(&#39;records per page&#39;) - 1) / config.fetch_value(&#39;records per page&#39;);\r\n\r\nThis creates a variable you don&#39;t really need, which probably has (minor) memory implications and is just too much typing:\r\n\r\n    int recordsPerPage = config.fetch_value(&#39;records per page&#39;)\r\n    int pageCount = (records + recordsPerPage - 1) / recordsPerPage;\r\n\r\nThis is all one line, and only fetches the data once:\r\n\r\n    int pageCount = (records - 1) / config.fetch_value(&#39;records per page&#39;) + 1;\r\n","title":"How to round up the result of integer division?","body":"<p>Converting to floating point and back seems like a huge waste of time at the CPU level.</p>\n\n<p>Ian Nelson's solution:</p>\n\n<pre><code>int pageCount = (records + recordsPerPage - 1) / recordsPerPage;\n</code></pre>\n\n<p>Can be simplified to:</p>\n\n<pre><code>int pageCount = (records - 1) / recordsPerPage + 1;\n</code></pre>\n\n<p>AFAICS, this doesn't have the overflow bug that Brandon DuRette pointed out, and because it only uses it once, you don't need to store the recordsPerPage specially if it comes from  an expensive function to fetch the value from a config file or something.</p>\n\n<p>I.e. this might be inefficient, if config.fetch_value used a database lookup or something:</p>\n\n<pre><code>int pageCount = (records + config.fetch_value('records per page') - 1) / config.fetch_value('records per page');\n</code></pre>\n\n<p>This creates a variable you don't really need, which probably has (minor) memory implications and is just too much typing:</p>\n\n<pre><code>int recordsPerPage = config.fetch_value('records per page')\nint pageCount = (records + recordsPerPage - 1) / recordsPerPage;\n</code></pre>\n\n<p>This is all one line, and only fetches the data once:</p>\n\n<pre><code>int pageCount = (records - 1) / config.fetch_value('records per page') + 1;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":0,"creation_date":1304514877,"post_id":536219,"comment_id":6767724,"body_markdown":"This method is unlikely to be a performance bottleneck.  And if it is, you should also consider the cost of the branch.","body":"This method is unlikely to be a performance bottleneck.  And if it is, you should also consider the cost of the branch."}],"tags":[],"owner":{"account_id":25314,"reputation":1227,"user_id":65004,"display_name":"Mike"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1234348888,"creation_date":1234347494,"answer_id":536219,"question_id":17944,"body_markdown":"For records == 0, rjmunro&#39;s solution gives 1.  The correct solution is 0.  That said, if you know that records &gt; 0 (and I&#39;m sure we&#39;ve all assumed recordsPerPage &gt; 0), then rjmunro solution gives correct results and does not have any of the overflow issues.\r\n\r\n    int pageCount = 0;\r\n    if (records &gt; 0)\r\n    {\r\n        pageCount = (((records - 1) / recordsPerPage) + 1);\r\n    }\r\n    // no else required\r\n\r\n**All** the integer math solutions are going to be more efficient than *any* of the floating point solutions.","title":"How to round up the result of integer division?","body":"<p>For records == 0, rjmunro's solution gives 1.  The correct solution is 0.  That said, if you know that records > 0 (and I'm sure we've all assumed recordsPerPage > 0), then rjmunro solution gives correct results and does not have any of the overflow issues.</p>\n\n<pre><code>int pageCount = 0;\nif (records &gt; 0)\n{\n    pageCount = (((records - 1) / recordsPerPage) + 1);\n}\n// no else required\n</code></pre>\n\n<p><strong>All</strong> the integer math solutions are going to be more efficient than <em>any</em> of the floating point solutions.</p>\n"},{"tags":[],"owner":{"account_id":80881,"reputation":189,"user_id":228406,"accept_rate":80,"display_name":"flux"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1281669968,"creation_date":1281669968,"answer_id":3473687,"question_id":17944,"body_markdown":"Alternative to remove branching in testing for zero:\r\n\r\n    int pageCount = (records + recordsPerPage - 1) / recordsPerPage * (records != 0);\r\n\r\nNot sure if this will work in C#, should do in C/C++.","title":"How to round up the result of integer division?","body":"<p>Alternative to remove branching in testing for zero:</p>\n\n<pre><code>int pageCount = (records + recordsPerPage - 1) / recordsPerPage * (records != 0);\n</code></pre>\n\n<p>Not sure if this will work in C#, should do in C/C++.</p>\n"},{"comments":[{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":0,"creation_date":1304515296,"post_id":4043686,"comment_id":6767868,"body_markdown":"[Guava](http://code.google.com/p/guava-libraries/) has a similar method ([`Lists.partition(List, int)`](http://guava-libraries.googlecode.com/svn/tags/release09/javadoc/com/google/common/collect/Lists.html#partition%28java.util.List,%20int%29)) and ironically the `size()` method of the resulting `List` (as of `r09`) suffers from the overflow bug mentioned in [Brandon DuRette&#39;s answer](http://stackoverflow.com/questions/17944/how-to-round-up-the-result-of-integer-division/96921#96921).","body":"<a href=\"http://code.google.com/p/guava-libraries/\" rel=\"nofollow noreferrer\">Guava</a> has a similar method (<a href=\"http://guava-libraries.googlecode.com/svn/tags/release09/javadoc/com/google/common/collect/Lists.html#partition%28java.util.List,%20int%29\" rel=\"nofollow noreferrer\"><code>Lists.partition(List, int)</code></a>) and ironically the <code>size()</code> method of the resulting <code>List</code> (as of <code>r09</code>) suffers from the overflow bug mentioned in <a href=\"http://stackoverflow.com/questions/17944/how-to-round-up-the-result-of-integer-division/96921#96921\">Brandon DuRette&#39;s answer</a>."}],"tags":[],"owner":{"account_id":663931,"reputation":9,"user_id":490178,"display_name":"Jeremy Hadfied"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1288274955,"creation_date":1288274955,"answer_id":4043686,"question_id":17944,"body_markdown":"A generic method, whose result you can iterate over may be of interest:\r\n\r\n\tpublic static Object[][] chunk(Object[] src, int chunkSize) {\r\n\t\t\r\n\t\tint overflow = src.length%chunkSize;\r\n\t\tint numChunks = (src.length/chunkSize) + (overflow&gt;0?1:0);\r\n\t\tObject[][] dest = new Object[numChunks][];\t\t\r\n\t\tfor (int i=0; i&lt;numChunks; i++) {\r\n\t\t\tdest[i] = new Object[ (i&lt;numChunks-1 || overflow==0) ? chunkSize : overflow ];\r\n\t\t\tSystem.arraycopy(src, i*chunkSize, dest[i], 0, dest[i].length); \r\n\t\t}\r\n\t\treturn dest;\r\n\t}","title":"How to round up the result of integer division?","body":"<p>A generic method, whose result you can iterate over may be of interest:</p>\n\n<pre><code>public static Object[][] chunk(Object[] src, int chunkSize) {\n\n    int overflow = src.length%chunkSize;\n    int numChunks = (src.length/chunkSize) + (overflow&gt;0?1:0);\n    Object[][] dest = new Object[numChunks][];      \n    for (int i=0; i&lt;numChunks; i++) {\n        dest[i] = new Object[ (i&lt;numChunks-1 || overflow==0) ? chunkSize : overflow ];\n        System.arraycopy(src, i*chunkSize, dest[i], 0, dest[i].length); \n    }\n    return dest;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1304514024,"creation_date":1304514024,"answer_id":5883806,"question_id":17944,"body_markdown":"A variant of [Nick Berardi&#39;s answer](https://stackoverflow.com/questions/17944/how-to-round-up-the-result-of-integer-division/17954#17954) that avoids a branch:\r\n\r\n    int q = records / recordsPerPage, r = records % recordsPerPage;\r\n    int pageCount = q - (-r &gt;&gt; (Integer.SIZE - 1));\r\n\r\nNote: `(-r &gt;&gt; (Integer.SIZE - 1))` consists of the sign bit of `r`, repeated 32 times (thanks to sign extension of the `&gt;&gt;` operator.)  This evaluates to 0 if `r` is zero or negative, -1 if `r` is positive.  So subtracting it from `q` has the effect of adding 1 if `records % recordsPerPage &gt; 0`.","title":"How to round up the result of integer division?","body":"<p>A variant of <a href=\"https://stackoverflow.com/questions/17944/how-to-round-up-the-result-of-integer-division/17954#17954\">Nick Berardi's answer</a> that avoids a branch:</p>\n\n<pre><code>int q = records / recordsPerPage, r = records % recordsPerPage;\nint pageCount = q - (-r &gt;&gt; (Integer.SIZE - 1));\n</code></pre>\n\n<p>Note: <code>(-r &gt;&gt; (Integer.SIZE - 1))</code> consists of the sign bit of <code>r</code>, repeated 32 times (thanks to sign extension of the <code>&gt;&gt;</code> operator.)  This evaluates to 0 if <code>r</code> is zero or negative, -1 if <code>r</code> is positive.  So subtracting it from <code>q</code> has the effect of adding 1 if <code>records % recordsPerPage &gt; 0</code>.</p>\n"},{"tags":[],"owner":{"account_id":1335920,"reputation":1,"user_id":1278685,"display_name":"Richard Parsons"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1332176765,"creation_date":1332164820,"answer_id":9771364,"question_id":17944,"body_markdown":"I had a similar need where I needed to convert Minutes to hours &amp; minutes. What I used was:\r\n\r\n    int hrs = 0; int mins = 0;\r\n    \r\n    float tm = totalmins;\r\n    \r\n    if ( tm &gt; 60 ) ( hrs = (int) (tm / 60);\r\n    \r\n    mins = (int) (tm - (hrs * 60));\r\n    \r\n    System.out.println(&quot;Total time in Hours &amp; Minutes = &quot; + hrs + &quot;:&quot; + mins);\r\n\r\n\r\n","title":"How to round up the result of integer division?","body":"<p>I had a similar need where I needed to convert Minutes to hours &amp; minutes. What I used was:</p>\n\n<pre><code>int hrs = 0; int mins = 0;\n\nfloat tm = totalmins;\n\nif ( tm &gt; 60 ) ( hrs = (int) (tm / 60);\n\nmins = (int) (tm - (hrs * 60));\n\nSystem.out.println(\"Total time in Hours &amp; Minutes = \" + hrs + \":\" + mins);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2339684,"reputation":1,"user_id":2051259,"display_name":"Jim Watson"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1360250475,"creation_date":1360249354,"answer_id":14754238,"question_id":17944,"body_markdown":"The following should do rounding better than the above solutions, but at the expense of performance (due to floating point calculation of 0.5*rctDenominator):\r\n\r\n    uint64_t integerDivide( const uint64_t&amp; rctNumerator, const uint64_t&amp; rctDenominator )\r\n    {\r\n      // Ensure .5 upwards is rounded up (otherwise integer division just truncates - ie gives no remainder)\r\n      return (rctDenominator == 0) ? 0 : (rctNumerator + (int)(0.5*rctDenominator)) / rctDenominator;\r\n    }","title":"How to round up the result of integer division?","body":"<p>The following should do rounding better than the above solutions, but at the expense of performance (due to floating point calculation of 0.5*rctDenominator):</p>\n\n<pre><code>uint64_t integerDivide( const uint64_t&amp; rctNumerator, const uint64_t&amp; rctDenominator )\n{\n  // Ensure .5 upwards is rounded up (otherwise integer division just truncates - ie gives no remainder)\n  return (rctDenominator == 0) ? 0 : (rctNumerator + (int)(0.5*rctDenominator)) / rctDenominator;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1530863,"reputation":4503,"user_id":1428089,"accept_rate":48,"display_name":"Sam Jones"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1391506618,"creation_date":1391506618,"answer_id":21548669,"question_id":17944,"body_markdown":"I do the following, handles any overflows:\r\n\r\n    var totalPages = totalResults.IsDivisble(recordsperpage) ? totalResults/(recordsperpage) : totalResults/(recordsperpage) + 1;\r\n\r\nAnd use this extension for if there&#39;s 0 results:\r\n\r\n    public static bool IsDivisble(this int x, int n)\r\n    {\r\n               return (x%n) == 0;\r\n    }\r\n\r\nAlso, for the current page number (wasn&#39;t asked but could be useful):\r\n\r\n    var currentPage = (int) Math.Ceiling(recordsperpage/(double) recordsperpage) + 1;\r\n\r\n","title":"How to round up the result of integer division?","body":"<p>I do the following, handles any overflows:</p>\n\n<pre><code>var totalPages = totalResults.IsDivisble(recordsperpage) ? totalResults/(recordsperpage) : totalResults/(recordsperpage) + 1;\n</code></pre>\n\n<p>And use this extension for if there's 0 results:</p>\n\n<pre><code>public static bool IsDivisble(this int x, int n)\n{\n           return (x%n) == 0;\n}\n</code></pre>\n\n<p>Also, for the current page number (wasn't asked but could be useful):</p>\n\n<pre><code>var currentPage = (int) Math.Ceiling(recordsperpage/(double) recordsperpage) + 1;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1075394,"reputation":1508,"user_id":1073673,"accept_rate":100,"display_name":"Thash"},"score":1,"creation_date":1493155884,"post_id":39519292,"comment_id":74291738,"body_markdown":"This is incorrect. For example: `DivideUp(4, -2)` returns 0 (should be -2). **It is only correct for non-negative integers** which is not clear from the answer or from the function&#39;s interface.","body":"This is incorrect. For example: <code>DivideUp(4, -2)</code> returns 0 (should be -2). <b>It is only correct for non-negative integers</b> which is not clear from the answer or from the function&#39;s interface."},{"owner":{"account_id":97315,"reputation":9210,"user_id":264031,"accept_rate":88,"display_name":"Nicholas Petersen"},"score":8,"creation_date":1493162317,"post_id":39519292,"comment_id":74294028,"body_markdown":"Thash, why don&#39;t you do something useful like add the little extra check then if the number is negative, instead of voting my answer down, and incorrectly making the blanket statement: &quot;This is incorrect,&quot; when in fact it&#39;s just an edge case. I already made it clear you should do other checks first: &quot;No checks here (overflow, DivideByZero, etc), **feel free to add if you like**.&quot;","body":"Thash, why don&#39;t you do something useful like add the little extra check then if the number is negative, instead of voting my answer down, and incorrectly making the blanket statement: &quot;This is incorrect,&quot; when in fact it&#39;s just an edge case. I already made it clear you should do other checks first: &quot;No checks here (overflow, DivideByZero, etc), <b>feel free to add if you like</b>.&quot;"},{"owner":{"account_id":97315,"reputation":9210,"user_id":264031,"accept_rate":88,"display_name":"Nicholas Petersen"},"score":2,"creation_date":1493162544,"post_id":39519292,"comment_id":74294088,"body_markdown":"The question mentioned &quot;I&#39;m thinking in particular of how to display **pagination controls**&quot; so negative numbers would have been out of bounds anyways. Again, just do something useful and suggest an added check if you want, it&#39;s a team effort man.","body":"The question mentioned &quot;I&#39;m thinking in particular of how to display <b>pagination controls</b>&quot; so negative numbers would have been out of bounds anyways. Again, just do something useful and suggest an added check if you want, it&#39;s a team effort man."},{"owner":{"account_id":1075394,"reputation":1508,"user_id":1073673,"accept_rate":100,"display_name":"Thash"},"score":1,"creation_date":1493193061,"post_id":39519292,"comment_id":74304696,"body_markdown":"I didn&#39;t mean to be rude and I&#39;m sorry if you take it that way. The question was &quot;How to round up the result of integer division&quot;. The author mentioned pagination but other people may have different needs. I think it would be better if your function somehow reflected that it does not work for negative integers since it is not clear from the interface (for example a differen name or argument types). To work with negative integers,you can for example take an absolute value of the dividend and divisor and multiply the result by its sign.","body":"I didn&#39;t mean to be rude and I&#39;m sorry if you take it that way. The question was &quot;How to round up the result of integer division&quot;. The author mentioned pagination but other people may have different needs. I think it would be better if your function somehow reflected that it does not work for negative integers since it is not clear from the interface (for example a differen name or argument types). To work with negative integers,you can for example take an absolute value of the dividend and divisor and multiply the result by its sign."}],"tags":[],"owner":{"account_id":97315,"reputation":9210,"user_id":264031,"accept_rate":88,"display_name":"Nicholas Petersen"},"comment_count":4,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1473969137,"creation_date":1473969137,"answer_id":39519292,"question_id":17944,"body_markdown":"In need of an extension method: \r\n\r\n\t\tpublic static int DivideUp(this int dividend, int divisor)\r\n\t\t{\r\n\t\t\treturn (dividend + (divisor - 1)) / divisor;\r\n\t\t}\r\n\r\nNo checks here (overflow, `DivideByZero`, etc), feel free to add if you like. By the way, for those worried about method invocation overhead, simple functions like this might be inlined by the compiler anyways, so I don&#39;t think that&#39;s where to be concerned. Cheers.\r\n\r\nP.S. you might find it useful to be aware of this as well (it gets the remainder): \r\n\r\n\t\tint remainder; \r\n\t\tint result = Math.DivRem(dividend, divisor, out remainder);","title":"How to round up the result of integer division?","body":"<p>In need of an extension method: </p>\n\n<pre><code>    public static int DivideUp(this int dividend, int divisor)\n    {\n        return (dividend + (divisor - 1)) / divisor;\n    }\n</code></pre>\n\n<p>No checks here (overflow, <code>DivideByZero</code>, etc), feel free to add if you like. By the way, for those worried about method invocation overhead, simple functions like this might be inlined by the compiler anyways, so I don't think that's where to be concerned. Cheers.</p>\n\n<p>P.S. you might find it useful to be aware of this as well (it gets the remainder): </p>\n\n<pre><code>    int remainder; \n    int result = Math.DivRem(dividend, divisor, out remainder);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5909,"reputation":1182,"user_id":9744,"accept_rate":80,"display_name":"Jonas"},"score":1,"creation_date":1686852289,"post_id":63012251,"comment_id":134858703,"body_markdown":"Yeah, floating point division is pretty &quot;terrible&quot;. :) This truth goes way back since the dawn of the first floating point CPU&#39;s/FPU&#39;s, really. In fact, many game developers and others demanding high performance go through hoops to be able to use integer math.","body":"Yeah, floating point division is pretty &quot;terrible&quot;. :) This truth goes way back since the dawn of the first floating point CPU&#39;s/FPU&#39;s, really. In fact, many game developers and others demanding high performance go through hoops to be able to use integer math."},{"owner":{"account_id":7703242,"reputation":2880,"user_id":5835002,"accept_rate":25,"display_name":"SendETHToThisAddress"},"score":1,"creation_date":1686959935,"post_id":63012251,"comment_id":134875123,"body_markdown":"I&#39;m going to make an assumption that it takes longer because they&#39;re bigger data types, more digits to manage.","body":"I&#39;m going to make an assumption that it takes longer because they&#39;re bigger data types, more digits to manage."}],"tags":[],"owner":{"account_id":7703242,"reputation":2880,"user_id":5835002,"accept_rate":25,"display_name":"SendETHToThisAddress"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1595326335,"creation_date":1595326335,"answer_id":63012251,"question_id":17944,"body_markdown":"**HOW TO ROUND UP THE RESULT OF INTEGER DIVISION IN C#**\r\n\r\nI was interested to know what the best way is to do this in C# since I need to do this in a loop up to nearly 100k times. Solutions posted by others using *Math* are ranked high in the answers, but in testing I found them slow. Jarod Elliott proposed a better tactic in checking if mod produces anything. \r\n\r\n    int result = (int1 / int2);\r\n    if (int1 % int2 != 0) { result++; }\r\n    \r\nI ran this in a loop 1 million times and it took 8ms. Here is the code using *Math*:\r\n\r\n    int result = (int)Math.Ceiling((double)int1 / (double)int2);\r\nWhich ran at 14ms in my testing, considerably longer.","title":"How to round up the result of integer division?","body":"<p><strong>HOW TO ROUND UP THE RESULT OF INTEGER DIVISION IN C#</strong></p>\n<p>I was interested to know what the best way is to do this in C# since I need to do this in a loop up to nearly 100k times. Solutions posted by others using <em>Math</em> are ranked high in the answers, but in testing I found them slow. Jarod Elliott proposed a better tactic in checking if mod produces anything.</p>\n<pre><code>int result = (int1 / int2);\nif (int1 % int2 != 0) { result++; }\n</code></pre>\n<p>I ran this in a loop 1 million times and it took 8ms. Here is the code using <em>Math</em>:</p>\n<pre><code>int result = (int)Math.Ceiling((double)int1 / (double)int2);\n</code></pre>\n<p>Which ran at 14ms in my testing, considerably longer.</p>\n"},{"comments":[{"owner":{"account_id":5392262,"reputation":4671,"user_id":4294399,"display_name":"General Grievance"},"score":1,"creation_date":1633609590,"post_id":69479389,"comment_id":122808777,"body_markdown":"What if the number of records per page is something other than 4?","body":"What if the number of records per page is something other than 4?"},{"owner":{"account_id":18335586,"reputation":313,"user_id":13353041,"display_name":"Muzammil Ismail"},"score":1,"creation_date":1636778299,"post_id":69479389,"comment_id":123653719,"body_markdown":"Thank you.\nYour response is very helpful.","body":"Thank you. Your response is very helpful."}],"tags":[],"owner":{"account_id":22767347,"reputation":200,"user_id":16925201,"display_name":"H.M.Mubashir"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633601800,"creation_date":1633601800,"answer_id":69479389,"question_id":17944,"body_markdown":"you can use\r\n\r\n    (int)Math.Ceiling(((decimal)model.RecordCount )/ ((decimal)4));","title":"How to round up the result of integer division?","body":"<p>you can use</p>\n<pre><code>(int)Math.Ceiling(((decimal)model.RecordCount )/ ((decimal)4));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9721607,"reputation":105,"user_id":7210166,"display_name":"Jin-K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667500633,"creation_date":1666313983,"answer_id":74147725,"question_id":17944,"body_markdown":"I made this for me, thanks to [Jarod Elliott][1] &amp; [SendETHToThisAddress][2] replies.\r\n\r\n    public static int RoundedUpDivisionBy(this int @this, int divider)\r\n    {        \r\n        var result = @this / divider;\r\n        if (@this % divider is 0) return result;\r\n        return result + Math.Sign(@this * divider);\r\n    }\r\n\r\nThen I realized it is overkill for the CPU compared to the top answer.\r\nHowever, I think it&#39;s readable and works with negative numbers as well.\r\n\r\n  [1]: https://stackoverflow.com/a/17953/7210166\r\n  [2]: https://stackoverflow.com/a/63012251/7210166","title":"How to round up the result of integer division?","body":"<p>I made this for me, thanks to <a href=\"https://stackoverflow.com/a/17953/7210166\">Jarod Elliott</a> &amp; <a href=\"https://stackoverflow.com/a/63012251/7210166\">SendETHToThisAddress</a> replies.</p>\n<pre><code>public static int RoundedUpDivisionBy(this int @this, int divider)\n{        \n    var result = @this / divider;\n    if (@this % divider is 0) return result;\n    return result + Math.Sign(@this * divider);\n}\n</code></pre>\n<p>Then I realized it is overkill for the CPU compared to the top answer.\nHowever, I think it's readable and works with negative numbers as well.</p>\n"},{"tags":[],"owner":{"account_id":2111883,"reputation":324,"user_id":1877010,"display_name":"DaHoC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684750443,"creation_date":1684749918,"answer_id":76305061,"question_id":17944,"body_markdown":"Since Java 18, `Math.ceilDiv` is available for this purpose, see https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Math.html#ceilDiv(int,int)","title":"How to round up the result of integer division?","body":"<p>Since Java 18, <code>Math.ceilDiv</code> is available for this purpose, see <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Math.html#ceilDiv(int,int)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Math.html#ceilDiv(int,int)</a></p>\n"}],"owner":{"account_id":1557,"reputation":57601,"user_id":2084,"accept_rate":100,"display_name":"Ian Nelson"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":275453,"favorite_count":0,"down_vote_count":0,"up_vote_count":398,"accepted_answer_id":17974,"answer_count":19,"score":398,"last_activity_date":1684750443,"creation_date":1219238860,"question_id":17944,"body_markdown":"I&#39;m thinking in particular of how to display pagination controls, when using a language such as C# or Java.\r\n\r\nIf I have *x* items which I want to display in chunks of *y* per page, how many pages will be needed?","title":"How to round up the result of integer division?","body":"<p>I'm thinking in particular of how to display pagination controls, when using a language such as C# or Java.</p>\n\n<p>If I have <em>x</em> items which I want to display in chunks of <em>y</em> per page, how many pages will be needed?</p>\n"},{"tags":["java","android","android-viewpager","android-viewpager2"],"comments":[{"owner":{"account_id":8633322,"reputation":218443,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1684906811,"post_id":76305094,"comment_id":134583953,"body_markdown":"Don&#39;t show your whole code, give us a minimal self-contained code sample that demonstrates the problem.","body":"Don&#39;t show your whole code, give us a minimal self-contained code sample that demonstrates the problem."},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1685022791,"post_id":76305094,"comment_id":134605506,"body_markdown":"tbh is the smallest amount of code I can provide to express my problem via code..","body":"tbh is the smallest amount of code I can provide to express my problem via code.."}],"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684750172,"creation_date":1684750172,"question_id":76305094,"body_markdown":"I am building a Calendar app and I want it to be like Google Calendar. As I was informed Google Calendar uses ViewPager2. The problem is that I made my adapter and everything I need to populate my Calendar, and I don&#39;t know how to implement it to my ViewPager to show it as a total of ArrayList month per month. Currently it shows me only day per day. I think I have to populate it as an ArrayList but I don&#39;t know how. \r\n\r\n**MainActivity**\r\n\r\n    package com.example.calendarcapital;\r\n    \r\n    import static com.example.calendarcapital.CalendarUtils.daysInMonthArray;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.fragment.app.Fragment;\r\n    import androidx.fragment.app.FragmentPagerAdapter;\r\n    import androidx.viewpager2.widget.ViewPager2;\r\n    \r\n    import android.os.Bundle;\r\n    import android.view.MenuItem;\r\n    import android.view.ViewGroup;\r\n    import android.widget.GridLayout;\r\n    import android.widget.GridView;\r\n    import android.widget.LinearLayout;\r\n    \r\n    import com.google.android.material.navigation.NavigationView;\r\n    \r\n    import java.time.LocalDate;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class MainActivity2 extends AppCompatActivity implements CalendarAdapter.OnItemListener, NavigationView.OnNavigationItemSelectedListener {\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main2);\r\n            ViewPager2 viewPager2 = findViewById(R.id.viewPager);\r\n            ViewPager2Adapter viewPager2Adapter = new ViewPager2Adapter(daysInMonthArray(),this::onItemClick,MainActivity2.this);\r\n    \r\n            viewPager2.setAdapter(viewPager2Adapter);\r\n            \r\n            viewPager2.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {\r\n                @Override\r\n                // This method is triggered when there is any scrolling activity for the current page\r\n                public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\r\n                    super.onPageScrolled(position, positionOffset, positionOffsetPixels);\r\n                }\r\n    \r\n                // triggered when you select a new page\r\n                @Override\r\n                public void onPageSelected(int position) {\r\n                    super.onPageSelected(position);\r\n                }\r\n    \r\n                // triggered when there is\r\n                // scroll state will be changed\r\n                @Override\r\n                public void onPageScrollStateChanged(int state) {\r\n                    super.onPageScrollStateChanged(state);\r\n                }\r\n            });\r\n    \r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void onItemClick(int position, LocalDate date) {\r\n    \r\n    \r\n        }\r\n    \r\n        @Override\r\n        public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n**ViewPager2Adapter**\r\n\r\n    package com.example.calendarcapital;\r\n    \r\n    import android.content.Context;\r\n    import android.database.Cursor;\r\n    import android.graphics.Color;\r\n    import android.os.Build;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.LinearLayout;\r\n    import android.widget.TextView;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.core.content.ContextCompat;\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n    \r\n    import java.time.LocalDate;\r\n    import java.time.LocalTime;\r\n    import java.util.ArrayList;\r\n    import java.util.Calendar;\r\n    import java.util.Collections;\r\n    import java.util.Date;\r\n    import java.util.List;\r\n    \r\n    public class ViewPager2Adapter extends RecyclerView.Adapter&lt;ViewPager2Adapter.ViewHolder&gt; {\r\n    \r\n    \r\n    \r\n        private final ArrayList&lt;LocalDate&gt; days;\r\n        private final ArrayList&lt;Date&gt; daysForRepeat;\r\n        Calendar calendar = Calendar.getInstance();\r\n        private final OnItemListener onItemListener;\r\n        private MyDatabaseHelper myDB;\r\n        static int numEvents;\r\n        static  int numRepeatingEvents;\r\n        Context context;\r\n    \r\n        // Constructor of our ViewPager2Adapter class\r\n        public ViewPager2Adapter(ArrayList&lt;LocalDate&gt; days, OnItemListener onItemListener, Context context) {\r\n            this.days = days;\r\n            this.onItemListener = onItemListener;\r\n            this.myDB = new MyDatabaseHelper(context.getApplicationContext());\r\n            this.context = context;\r\n            this.daysForRepeat = new ArrayList&lt;&gt;();\r\n        }\r\n    \r\n        // This method returns our layout\r\n        @NonNull\r\n        @Override\r\n        public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n    \r\n            LayoutInflater inflater = LayoutInflater.from(parent.getContext());\r\n            View view = inflater.inflate(R.layout.calendar_cell, parent, false);\r\n            LinearLayout test = view.findViewById(R.id.LinCell);\r\n            ViewGroup.LayoutParams layoutParams = test.getLayoutParams();\r\n    \r\n            calendar.setTime(new Date());\r\n            int currentMonth = calendar.get(Calendar.MONTH);\r\n            int currentDay = calendar.get(Calendar.DAY_OF_MONTH);\r\n            int currentYear = calendar.get(Calendar.YEAR);\r\n    \r\n            calendar.set(Calendar.MONTH, Calendar.JANUARY);\r\n            calendar.set(Calendar.DAY_OF_MONTH, 1);\r\n    \r\n    \r\n            calendar.set(Calendar.MONTH, currentMonth);\r\n            calendar.set(Calendar.DAY_OF_MONTH, currentDay);\r\n            calendar.set(Calendar.YEAR, currentYear);\r\n    \r\n            calendar.set(Calendar.HOUR_OF_DAY, 8);\r\n            calendar.set(Calendar.MINUTE, 0);\r\n            calendar.set(Calendar.SECOND, 0);\r\n            calendar.set(Calendar.MILLISECOND, 0);\r\n    \r\n    \r\n    \r\n            if (days.size() &gt; 15) //month view\r\n            {\r\n    //            layoutParams.height = (int) (parent.getHeight() * 0.166666666);\r\n                layoutParams.height = (int) (test.getHeight() * 0.2);\r\n    \r\n            } else // week view\r\n                layoutParams.height = (int) test.getHeight();\r\n    \r\n    \r\n    \r\n            return new ViewHolder(view, onItemListener, days);\r\n        }\r\n    \r\n        // This method binds the screen with the view\r\n        @Override\r\n        public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n    \r\n            Cursor cursor = myDB.readAllEvents();\r\n            holder.eventDayText.setVisibility(View.GONE);\r\n            holder.eventDayText2.setVisibility(View.GONE);\r\n            holder.eventDayText3.setVisibility(View.GONE);\r\n            holder.eventRepeatText1.setVisibility(View.GONE);\r\n            holder.eventRepeatText2.setVisibility(View.GONE);\r\n            holder.eventRepeatText3.setVisibility(View.GONE);\r\n            holder.eventsMore.setVisibility(View.GONE);\r\n    \r\n    \r\n            final LocalDate date = days.get(position);\r\n    \r\n            for (LocalDate day : days) {\r\n                Calendar calendar1 = Calendar.getInstance();\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                    calendar1.set(day.getYear(), day.getMonthValue() - 1, day.getDayOfMonth());\r\n                }\r\n                calendar1.set(Calendar.HOUR_OF_DAY, 8);\r\n                calendar1.set(Calendar.MINUTE, 0);\r\n                calendar1.set(Calendar.SECOND, 0);\r\n                calendar1.set(Calendar.MILLISECOND, 0);\r\n                Date date2 = calendar1.getTime();\r\n                daysForRepeat.add(date2);\r\n            }\r\n    \r\n    \r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                holder.dayOfMonth.setText(String.valueOf(date.getDayOfMonth()));\r\n            }\r\n    \r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                if (date.equals(CalendarUtils.selectedDate))\r\n                {\r\n    \r\n                    holder.LinCell.setBackgroundColor(Color.LTGRAY);\r\n    \r\n                }else {\r\n    //                holder.parentView.setBackground(defaultBackgroundDrawable);\r\n                    holder.LinCell.setBackgroundResource(R.drawable.back);\r\n                }\r\n            }\r\n    \r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                if (date.getMonth().equals(CalendarUtils.selectedDate.getMonth())) {\r\n                    holder.dayOfMonth.setTextColor(Color.BLACK);\r\n                }\r\n                else\r\n                {\r\n                    holder.dayOfMonth.setTextColor(Color.LTGRAY);\r\n                }\r\n            }\r\n            ArrayList&lt;Event&gt; myEvents = new ArrayList&lt;&gt;();\r\n    \r\n    \r\n            cursor.moveToPosition(-1);\r\n            while (cursor.moveToNext()) {\r\n                Event eventDB = null;\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                    eventDB = new Event(cursor.getString(0), cursor.getString(1), cursor.getString(2),\r\n                            CalendarUtils.stringToLocalDate(cursor.getString(3)), LocalTime.parse(cursor.getString(4)),\r\n                            cursor.getString(5), cursor.getString(6),cursor.getString(7));\r\n                }\r\n    \r\n                myEvents.add(eventDB);\r\n    \r\n    \r\n            }\r\n    \r\n    \r\n            numEvents=0;\r\n            numRepeatingEvents=0;\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n                myEvents.sort((o1, o2) -&gt; o2.getName().compareTo(o1.getName()));\r\n            }\r\n            cursor.moveToPosition(-1);\r\n            for (int i=0; i&lt;days.size(); i++)\r\n            {\r\n    \r\n    \r\n                List&lt;String&gt; eventNames = new ArrayList&lt;&gt;();\r\n                for (Event event : myEvents) {\r\n    \r\n                    if (event.getDate().equals(date) &amp;&amp; event.getParent_id()==null) {\r\n                        eventNames.add(event.getName());\r\n    \r\n                    }\r\n                }\r\n    \r\n                Collections.sort(eventNames);\r\n    \r\n                numEvents = eventNames.size();\r\n    \r\n                if (numEvents &gt;= 1) {\r\n                    holder.eventDayText.setVisibility(View.VISIBLE);\r\n                    holder.eventDayText.setText(eventNames.get(0));\r\n                    holder.eventDayText.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                    holder.eventDayText.setBackgroundResource(R.drawable.rounded_corner);\r\n                }\r\n    \r\n                if (numEvents &gt;= 2) {\r\n                    holder.eventDayText2.setVisibility(View.VISIBLE);\r\n                    holder.eventDayText2.setText(eventNames.get(1));\r\n                    holder.eventDayText2.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                    holder.eventDayText2.setBackgroundResource(R.drawable.rounded_corner);\r\n                }\r\n    \r\n                if (numEvents &gt;= 3) {\r\n                    holder.eventDayText3.setVisibility(View.VISIBLE);\r\n                    holder.eventDayText3.setText(eventNames.get(2));\r\n                    holder.eventDayText3.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                    holder.eventDayText3.setBackgroundResource(R.drawable.rounded_corner);\r\n                }\r\n    \r\n                if (date.toString().equals(&quot;2023-05-11&quot;))\r\n                {\r\n                    System.out.println();\r\n                }\r\n                checkForMore( holder);\r\n    \r\n            }\r\n    \r\n            cursor.moveToPosition(-1);\r\n            for (int i=0; i&lt;days.size(); i++) {\r\n    \r\n                List&lt;String&gt; eventNamesRepeating = new ArrayList&lt;&gt;();\r\n                for (Event event : myEvents) {\r\n                    if (event.getDate().equals(date) &amp;&amp; !(event.getParent_id()==null)) {\r\n                        eventNamesRepeating.add(event.getName());\r\n                    }\r\n                }\r\n    \r\n                Collections.sort(eventNamesRepeating);\r\n    \r\n    \r\n                numRepeatingEvents = eventNamesRepeating.size();\r\n                if (numRepeatingEvents &gt;= 1 ) {\r\n                    holder.eventRepeatText1.setVisibility(View.VISIBLE);\r\n                    holder.eventRepeatText1.setText(eventNamesRepeating.get(0));\r\n                    holder.eventRepeatText1.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                    holder.eventRepeatText1.setBackgroundResource(R.drawable.rounded_corner);\r\n                }\r\n    \r\n                if (numRepeatingEvents &gt;= 2) {\r\n                    holder.eventRepeatText2.setVisibility(View.VISIBLE);\r\n                    holder.eventRepeatText2.setText(eventNamesRepeating.get(1));\r\n                    holder.eventRepeatText2.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                    holder.eventRepeatText2.setBackgroundResource(R.drawable.rounded_corner);\r\n                }\r\n    \r\n                if (numRepeatingEvents &gt;= 3) {\r\n                    holder.eventRepeatText3.setVisibility(View.VISIBLE);\r\n                    holder.eventRepeatText3.setText(eventNamesRepeating.get(2));\r\n                    holder.eventRepeatText3.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                    holder.eventRepeatText3.setBackgroundResource(R.drawable.rounded_corner);\r\n                }\r\n    \r\n                checkForMore( holder);\r\n            }\r\n    \r\n    \r\n    \r\n    \r\n            cursor.close();\r\n            myDB.close();\r\n        }\r\n        public void checkForMore(@NonNull ViewHolder holder)\r\n        {\r\n            if (numEvents&gt;=3 &amp;&amp; numRepeatingEvents&gt;=1)\r\n            {\r\n                holder.eventRepeatText1.setVisibility(View.GONE);\r\n                holder.eventRepeatText2.setVisibility(View.GONE);\r\n                holder.eventRepeatText3.setVisibility(View.GONE);\r\n                holder.eventsMore.setVisibility(View.VISIBLE);\r\n                holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\r\n    \r\n            }\r\n    \r\n            if (numRepeatingEvents&gt;=3 &amp;&amp; numEvents&gt;1)\r\n            {\r\n                holder.eventDayText.setVisibility(View.GONE);\r\n                holder.eventDayText2.setVisibility(View.GONE);\r\n                holder.eventDayText3.setVisibility(View.GONE);\r\n                holder.eventsMore.setVisibility(View.VISIBLE);\r\n                holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\r\n            }\r\n    \r\n            if (numRepeatingEvents==2 &amp;&amp; numEvents&gt;1)\r\n            {\r\n                holder.eventDayText2.setVisibility(View.GONE);\r\n                holder.eventDayText3.setVisibility(View.GONE);\r\n                holder.eventRepeatText3.setVisibility(View.GONE);\r\n                holder.eventsMore.setVisibility(View.VISIBLE);\r\n                holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\r\n            }\r\n    \r\n            if (numEvents==2 &amp;&amp; numRepeatingEvents&gt;1)\r\n            {\r\n                holder.eventRepeatText2.setVisibility(View.GONE);\r\n                holder.eventRepeatText3.setVisibility(View.GONE);\r\n                holder.eventDayText3.setVisibility(View.GONE);\r\n                holder.eventsMore.setVisibility(View.VISIBLE);\r\n                holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\r\n    \r\n            }\r\n    \r\n            if (numEvents&gt;3 &amp;&amp; numRepeatingEvents==0)\r\n            {\r\n                holder.eventsMore.setVisibility(View.VISIBLE);\r\n                holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\r\n            }\r\n    \r\n            if (numRepeatingEvents&gt;3 &amp;&amp; numEvents==0)\r\n            {\r\n                holder.eventsMore.setVisibility(View.VISIBLE);\r\n                holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\r\n            }\r\n            if (numEvents&gt;=3 &amp;&amp; numRepeatingEvents&gt;0)\r\n            {\r\n                holder.eventRepeatText1.setVisibility(View.GONE);\r\n                holder.eventRepeatText2.setVisibility(View.GONE);\r\n                holder.eventRepeatText3.setVisibility(View.GONE);\r\n                holder.eventsMore.setVisibility(View.VISIBLE);\r\n                holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\r\n            }\r\n    \r\n            if (numRepeatingEvents&gt;=3 &amp;&amp; numEvents&gt;0)\r\n            {\r\n                holder.eventDayText.setVisibility(View.GONE);\r\n                holder.eventDayText2.setVisibility(View.GONE);\r\n                holder.eventDayText3.setVisibility(View.GONE);\r\n                holder.eventsMore.setVisibility(View.VISIBLE);\r\n                holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\r\n                holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\r\n            }\r\n        }\r\n    \r\n        // This Method returns the size of the Array\r\n        @Override\r\n        public int getItemCount() {\r\n            return days.size();\r\n        }\r\n    \r\n        public interface OnItemListener {\r\n    \r\n            void onItemClick(int position, LocalDate date);\r\n    \r\n        }\r\n    \r\n        // The ViewHolder class holds the view\r\n        public static class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\r\n    \r\n            private final ArrayList&lt;LocalDate&gt; days;\r\n            public final View parentView;\r\n            public final TextView dayOfMonth, eventDayText, eventDayText2, eventDayText3;\r\n            public final TextView  eventRepeatText1, eventRepeatText2, eventRepeatText3,eventsMore;\r\n            public final LinearLayout LinCell;\r\n    \r\n    \r\n            private final OnItemListener onItemListener;\r\n    \r\n            public ViewHolder(@NonNull View itemView, OnItemListener onItemListener, ArrayList&lt;LocalDate&gt; days) {\r\n                super(itemView);\r\n                parentView = itemView.findViewById(R.id.parentView);\r\n                LinCell = itemView.findViewById(R.id.LinCell);\r\n                dayOfMonth = itemView.findViewById(R.id.cellDayText);\r\n                eventDayText = itemView.findViewById(R.id.eventDayText);\r\n                eventDayText2 = itemView.findViewById(R.id.eventDayText2);\r\n                eventDayText3 = itemView.findViewById(R.id.eventDayText3);\r\n                eventRepeatText1 = itemView.findViewById(R.id.eventRepeatText1);\r\n                eventRepeatText2= itemView.findViewById(R.id.eventRepeatText2);\r\n                eventRepeatText3= itemView.findViewById(R.id.eventRepeatText3);\r\n                eventsMore = itemView.findViewById(R.id.eventsMore);\r\n    \r\n    \r\n                this.onItemListener = onItemListener;\r\n                itemView.setOnClickListener(this);\r\n                this.days = days;\r\n    \r\n    \r\n            }\r\n    \r\n    \r\n            @Override\r\n            public void onClick(View view) {\r\n    \r\n                view.setSelected(true);\r\n                onItemListener.onItemClick(getAdapterPosition(), days.get(getAdapterPosition()));\r\n    \r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n\r\n**daysInMonthArray**\r\n\r\n    public static ArrayList&lt;LocalDate&gt; daysInMonthArray() //The arraylist that month will be stored\r\n        {\r\n            ArrayList&lt;LocalDate&gt; daysInMonthArray = new ArrayList&lt;&gt;();\r\n    \r\n            YearMonth yearMonth = null;\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                yearMonth = YearMonth.from(selectedDate);\r\n            }\r\n            int daysInMonth = 0; //get how many days are in month\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                daysInMonth = yearMonth.lengthOfMonth();\r\n            }\r\n    \r\n            LocalDate prevMonth = null;\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                prevMonth = selectedDate.minusMonths(1);\r\n            }\r\n            LocalDate nextMonth = null;\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                nextMonth = selectedDate.plusMonths(1);\r\n            }\r\n    \r\n            YearMonth prevYearMonth = null;\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                prevYearMonth = YearMonth.from(prevMonth);\r\n            }\r\n            int prevDaysInMonth = 0;\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                prevDaysInMonth = prevYearMonth.lengthOfMonth();\r\n            }\r\n    \r\n            LocalDate firstOfMonth = null; //get first day of month\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                firstOfMonth = CalendarUtils.selectedDate.withDayOfMonth(1);\r\n            }\r\n            int dayOfWeek = 0; // return int between 0-7 which is the day of the week\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                dayOfWeek = firstOfMonth.getDayOfWeek().getValue();\r\n            }\r\n    \r\n            for (int i = 1; i &lt;= 42; i++) {\r\n                if (i &lt;= dayOfWeek) {\r\n    \r\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                        daysInMonthArray.add(LocalDate.of(prevMonth.getYear(), prevMonth.getMonth(), prevDaysInMonth + i - dayOfWeek));\r\n                    }\r\n                    if (dayOfWeek == 7 &amp;&amp; daysInMonthArray.size() &gt;= 7) {\r\n    \r\n                        daysInMonthArray.clear();\r\n                    }\r\n    \r\n    \r\n                } else if (i &gt; daysInMonth + dayOfWeek) {\r\n    \r\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                        daysInMonthArray.add(LocalDate.of(nextMonth.getYear(), nextMonth.getMonth(), i - dayOfWeek - daysInMonth));\r\n                    }\r\n    \r\n    \r\n                }\r\n                else {\r\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                        daysInMonthArray.add(LocalDate.of(selectedDate.getYear(), selectedDate.getMonth(), i - dayOfWeek));\r\n                    }\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n    \r\n            return daysInMonthArray;\r\n    \r\n    \r\n        }\r\n\r\n\r\n**My xml is simple with the ViewPager only inside:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        tools:context=&quot;.MainActivity2&quot;&gt;\r\n    \r\n    \r\n        &lt;androidx.viewpager2.widget.ViewPager2\r\n            android:id=&quot;@+id/viewPager&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;","title":"ViewPager2 as gridview calendar application","body":"<p>I am building a Calendar app and I want it to be like Google Calendar. As I was informed Google Calendar uses ViewPager2. The problem is that I made my adapter and everything I need to populate my Calendar, and I don't know how to implement it to my ViewPager to show it as a total of ArrayList month per month. Currently it shows me only day per day. I think I have to populate it as an ArrayList but I don't know how.</p>\n<p><strong>MainActivity</strong></p>\n<pre><code>package com.example.calendarcapital;\n\nimport static com.example.calendarcapital.CalendarUtils.daysInMonthArray;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentPagerAdapter;\nimport androidx.viewpager2.widget.ViewPager2;\n\nimport android.os.Bundle;\nimport android.view.MenuItem;\nimport android.view.ViewGroup;\nimport android.widget.GridLayout;\nimport android.widget.GridView;\nimport android.widget.LinearLayout;\n\nimport com.google.android.material.navigation.NavigationView;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class MainActivity2 extends AppCompatActivity implements CalendarAdapter.OnItemListener, NavigationView.OnNavigationItemSelectedListener {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main2);\n        ViewPager2 viewPager2 = findViewById(R.id.viewPager);\n        ViewPager2Adapter viewPager2Adapter = new ViewPager2Adapter(daysInMonthArray(),this::onItemClick,MainActivity2.this);\n\n        viewPager2.setAdapter(viewPager2Adapter);\n        \n        viewPager2.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {\n            @Override\n            // This method is triggered when there is any scrolling activity for the current page\n            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n                super.onPageScrolled(position, positionOffset, positionOffsetPixels);\n            }\n\n            // triggered when you select a new page\n            @Override\n            public void onPageSelected(int position) {\n                super.onPageSelected(position);\n            }\n\n            // triggered when there is\n            // scroll state will be changed\n            @Override\n            public void onPageScrollStateChanged(int state) {\n                super.onPageScrollStateChanged(state);\n            }\n        });\n\n\n    }\n\n    @Override\n    public void onItemClick(int position, LocalDate date) {\n\n\n    }\n\n    @Override\n    public boolean onNavigationItemSelected(@NonNull MenuItem item) {\n        return false;\n    }\n}\n</code></pre>\n<p><strong>ViewPager2Adapter</strong></p>\n<pre><code>package com.example.calendarcapital;\n\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.graphics.Color;\nimport android.os.Build;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.LinearLayout;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.core.content.ContextCompat;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.time.LocalDate;\nimport java.time.LocalTime;\nimport java.util.ArrayList;\nimport java.util.Calendar;\nimport java.util.Collections;\nimport java.util.Date;\nimport java.util.List;\n\npublic class ViewPager2Adapter extends RecyclerView.Adapter&lt;ViewPager2Adapter.ViewHolder&gt; {\n\n\n\n    private final ArrayList&lt;LocalDate&gt; days;\n    private final ArrayList&lt;Date&gt; daysForRepeat;\n    Calendar calendar = Calendar.getInstance();\n    private final OnItemListener onItemListener;\n    private MyDatabaseHelper myDB;\n    static int numEvents;\n    static  int numRepeatingEvents;\n    Context context;\n\n    // Constructor of our ViewPager2Adapter class\n    public ViewPager2Adapter(ArrayList&lt;LocalDate&gt; days, OnItemListener onItemListener, Context context) {\n        this.days = days;\n        this.onItemListener = onItemListener;\n        this.myDB = new MyDatabaseHelper(context.getApplicationContext());\n        this.context = context;\n        this.daysForRepeat = new ArrayList&lt;&gt;();\n    }\n\n    // This method returns our layout\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n\n        LayoutInflater inflater = LayoutInflater.from(parent.getContext());\n        View view = inflater.inflate(R.layout.calendar_cell, parent, false);\n        LinearLayout test = view.findViewById(R.id.LinCell);\n        ViewGroup.LayoutParams layoutParams = test.getLayoutParams();\n\n        calendar.setTime(new Date());\n        int currentMonth = calendar.get(Calendar.MONTH);\n        int currentDay = calendar.get(Calendar.DAY_OF_MONTH);\n        int currentYear = calendar.get(Calendar.YEAR);\n\n        calendar.set(Calendar.MONTH, Calendar.JANUARY);\n        calendar.set(Calendar.DAY_OF_MONTH, 1);\n\n\n        calendar.set(Calendar.MONTH, currentMonth);\n        calendar.set(Calendar.DAY_OF_MONTH, currentDay);\n        calendar.set(Calendar.YEAR, currentYear);\n\n        calendar.set(Calendar.HOUR_OF_DAY, 8);\n        calendar.set(Calendar.MINUTE, 0);\n        calendar.set(Calendar.SECOND, 0);\n        calendar.set(Calendar.MILLISECOND, 0);\n\n\n\n        if (days.size() &gt; 15) //month view\n        {\n//            layoutParams.height = (int) (parent.getHeight() * 0.166666666);\n            layoutParams.height = (int) (test.getHeight() * 0.2);\n\n        } else // week view\n            layoutParams.height = (int) test.getHeight();\n\n\n\n        return new ViewHolder(view, onItemListener, days);\n    }\n\n    // This method binds the screen with the view\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n\n        Cursor cursor = myDB.readAllEvents();\n        holder.eventDayText.setVisibility(View.GONE);\n        holder.eventDayText2.setVisibility(View.GONE);\n        holder.eventDayText3.setVisibility(View.GONE);\n        holder.eventRepeatText1.setVisibility(View.GONE);\n        holder.eventRepeatText2.setVisibility(View.GONE);\n        holder.eventRepeatText3.setVisibility(View.GONE);\n        holder.eventsMore.setVisibility(View.GONE);\n\n\n        final LocalDate date = days.get(position);\n\n        for (LocalDate day : days) {\n            Calendar calendar1 = Calendar.getInstance();\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                calendar1.set(day.getYear(), day.getMonthValue() - 1, day.getDayOfMonth());\n            }\n            calendar1.set(Calendar.HOUR_OF_DAY, 8);\n            calendar1.set(Calendar.MINUTE, 0);\n            calendar1.set(Calendar.SECOND, 0);\n            calendar1.set(Calendar.MILLISECOND, 0);\n            Date date2 = calendar1.getTime();\n            daysForRepeat.add(date2);\n        }\n\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            holder.dayOfMonth.setText(String.valueOf(date.getDayOfMonth()));\n        }\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            if (date.equals(CalendarUtils.selectedDate))\n            {\n\n                holder.LinCell.setBackgroundColor(Color.LTGRAY);\n\n            }else {\n//                holder.parentView.setBackground(defaultBackgroundDrawable);\n                holder.LinCell.setBackgroundResource(R.drawable.back);\n            }\n        }\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            if (date.getMonth().equals(CalendarUtils.selectedDate.getMonth())) {\n                holder.dayOfMonth.setTextColor(Color.BLACK);\n            }\n            else\n            {\n                holder.dayOfMonth.setTextColor(Color.LTGRAY);\n            }\n        }\n        ArrayList&lt;Event&gt; myEvents = new ArrayList&lt;&gt;();\n\n\n        cursor.moveToPosition(-1);\n        while (cursor.moveToNext()) {\n            Event eventDB = null;\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                eventDB = new Event(cursor.getString(0), cursor.getString(1), cursor.getString(2),\n                        CalendarUtils.stringToLocalDate(cursor.getString(3)), LocalTime.parse(cursor.getString(4)),\n                        cursor.getString(5), cursor.getString(6),cursor.getString(7));\n            }\n\n            myEvents.add(eventDB);\n\n\n        }\n\n\n        numEvents=0;\n        numRepeatingEvents=0;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n            myEvents.sort((o1, o2) -&gt; o2.getName().compareTo(o1.getName()));\n        }\n        cursor.moveToPosition(-1);\n        for (int i=0; i&lt;days.size(); i++)\n        {\n\n\n            List&lt;String&gt; eventNames = new ArrayList&lt;&gt;();\n            for (Event event : myEvents) {\n\n                if (event.getDate().equals(date) &amp;&amp; event.getParent_id()==null) {\n                    eventNames.add(event.getName());\n\n                }\n            }\n\n            Collections.sort(eventNames);\n\n            numEvents = eventNames.size();\n\n            if (numEvents &gt;= 1) {\n                holder.eventDayText.setVisibility(View.VISIBLE);\n                holder.eventDayText.setText(eventNames.get(0));\n                holder.eventDayText.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n                holder.eventDayText.setBackgroundResource(R.drawable.rounded_corner);\n            }\n\n            if (numEvents &gt;= 2) {\n                holder.eventDayText2.setVisibility(View.VISIBLE);\n                holder.eventDayText2.setText(eventNames.get(1));\n                holder.eventDayText2.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n                holder.eventDayText2.setBackgroundResource(R.drawable.rounded_corner);\n            }\n\n            if (numEvents &gt;= 3) {\n                holder.eventDayText3.setVisibility(View.VISIBLE);\n                holder.eventDayText3.setText(eventNames.get(2));\n                holder.eventDayText3.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n                holder.eventDayText3.setBackgroundResource(R.drawable.rounded_corner);\n            }\n\n            if (date.toString().equals(&quot;2023-05-11&quot;))\n            {\n                System.out.println();\n            }\n            checkForMore( holder);\n\n        }\n\n        cursor.moveToPosition(-1);\n        for (int i=0; i&lt;days.size(); i++) {\n\n            List&lt;String&gt; eventNamesRepeating = new ArrayList&lt;&gt;();\n            for (Event event : myEvents) {\n                if (event.getDate().equals(date) &amp;&amp; !(event.getParent_id()==null)) {\n                    eventNamesRepeating.add(event.getName());\n                }\n            }\n\n            Collections.sort(eventNamesRepeating);\n\n\n            numRepeatingEvents = eventNamesRepeating.size();\n            if (numRepeatingEvents &gt;= 1 ) {\n                holder.eventRepeatText1.setVisibility(View.VISIBLE);\n                holder.eventRepeatText1.setText(eventNamesRepeating.get(0));\n                holder.eventRepeatText1.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n                holder.eventRepeatText1.setBackgroundResource(R.drawable.rounded_corner);\n            }\n\n            if (numRepeatingEvents &gt;= 2) {\n                holder.eventRepeatText2.setVisibility(View.VISIBLE);\n                holder.eventRepeatText2.setText(eventNamesRepeating.get(1));\n                holder.eventRepeatText2.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n                holder.eventRepeatText2.setBackgroundResource(R.drawable.rounded_corner);\n            }\n\n            if (numRepeatingEvents &gt;= 3) {\n                holder.eventRepeatText3.setVisibility(View.VISIBLE);\n                holder.eventRepeatText3.setText(eventNamesRepeating.get(2));\n                holder.eventRepeatText3.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n                holder.eventRepeatText3.setBackgroundResource(R.drawable.rounded_corner);\n            }\n\n            checkForMore( holder);\n        }\n\n\n\n\n        cursor.close();\n        myDB.close();\n    }\n    public void checkForMore(@NonNull ViewHolder holder)\n    {\n        if (numEvents&gt;=3 &amp;&amp; numRepeatingEvents&gt;=1)\n        {\n            holder.eventRepeatText1.setVisibility(View.GONE);\n            holder.eventRepeatText2.setVisibility(View.GONE);\n            holder.eventRepeatText3.setVisibility(View.GONE);\n            holder.eventsMore.setVisibility(View.VISIBLE);\n            holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n            holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\n\n        }\n\n        if (numRepeatingEvents&gt;=3 &amp;&amp; numEvents&gt;1)\n        {\n            holder.eventDayText.setVisibility(View.GONE);\n            holder.eventDayText2.setVisibility(View.GONE);\n            holder.eventDayText3.setVisibility(View.GONE);\n            holder.eventsMore.setVisibility(View.VISIBLE);\n            holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n            holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\n        }\n\n        if (numRepeatingEvents==2 &amp;&amp; numEvents&gt;1)\n        {\n            holder.eventDayText2.setVisibility(View.GONE);\n            holder.eventDayText3.setVisibility(View.GONE);\n            holder.eventRepeatText3.setVisibility(View.GONE);\n            holder.eventsMore.setVisibility(View.VISIBLE);\n            holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n            holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\n        }\n\n        if (numEvents==2 &amp;&amp; numRepeatingEvents&gt;1)\n        {\n            holder.eventRepeatText2.setVisibility(View.GONE);\n            holder.eventRepeatText3.setVisibility(View.GONE);\n            holder.eventDayText3.setVisibility(View.GONE);\n            holder.eventsMore.setVisibility(View.VISIBLE);\n            holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n            holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\n\n        }\n\n        if (numEvents&gt;3 &amp;&amp; numRepeatingEvents==0)\n        {\n            holder.eventsMore.setVisibility(View.VISIBLE);\n            holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n            holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\n        }\n\n        if (numRepeatingEvents&gt;3 &amp;&amp; numEvents==0)\n        {\n            holder.eventsMore.setVisibility(View.VISIBLE);\n            holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n            holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\n        }\n        if (numEvents&gt;=3 &amp;&amp; numRepeatingEvents&gt;0)\n        {\n            holder.eventRepeatText1.setVisibility(View.GONE);\n            holder.eventRepeatText2.setVisibility(View.GONE);\n            holder.eventRepeatText3.setVisibility(View.GONE);\n            holder.eventsMore.setVisibility(View.VISIBLE);\n            holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n            holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\n        }\n\n        if (numRepeatingEvents&gt;=3 &amp;&amp; numEvents&gt;0)\n        {\n            holder.eventDayText.setVisibility(View.GONE);\n            holder.eventDayText2.setVisibility(View.GONE);\n            holder.eventDayText3.setVisibility(View.GONE);\n            holder.eventsMore.setVisibility(View.VISIBLE);\n            holder.eventsMore.setTextColor(ContextCompat.getColor(context, R.color.primaryLightTirquiso));\n            holder.eventsMore.setBackgroundResource(R.drawable.rounded_corner);\n        }\n    }\n\n    // This Method returns the size of the Array\n    @Override\n    public int getItemCount() {\n        return days.size();\n    }\n\n    public interface OnItemListener {\n\n        void onItemClick(int position, LocalDate date);\n\n    }\n\n    // The ViewHolder class holds the view\n    public static class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n\n        private final ArrayList&lt;LocalDate&gt; days;\n        public final View parentView;\n        public final TextView dayOfMonth, eventDayText, eventDayText2, eventDayText3;\n        public final TextView  eventRepeatText1, eventRepeatText2, eventRepeatText3,eventsMore;\n        public final LinearLayout LinCell;\n\n\n        private final OnItemListener onItemListener;\n\n        public ViewHolder(@NonNull View itemView, OnItemListener onItemListener, ArrayList&lt;LocalDate&gt; days) {\n            super(itemView);\n            parentView = itemView.findViewById(R.id.parentView);\n            LinCell = itemView.findViewById(R.id.LinCell);\n            dayOfMonth = itemView.findViewById(R.id.cellDayText);\n            eventDayText = itemView.findViewById(R.id.eventDayText);\n            eventDayText2 = itemView.findViewById(R.id.eventDayText2);\n            eventDayText3 = itemView.findViewById(R.id.eventDayText3);\n            eventRepeatText1 = itemView.findViewById(R.id.eventRepeatText1);\n            eventRepeatText2= itemView.findViewById(R.id.eventRepeatText2);\n            eventRepeatText3= itemView.findViewById(R.id.eventRepeatText3);\n            eventsMore = itemView.findViewById(R.id.eventsMore);\n\n\n            this.onItemListener = onItemListener;\n            itemView.setOnClickListener(this);\n            this.days = days;\n\n\n        }\n\n\n        @Override\n        public void onClick(View view) {\n\n            view.setSelected(true);\n            onItemListener.onItemClick(getAdapterPosition(), days.get(getAdapterPosition()));\n\n        }\n    }\n\n}\n</code></pre>\n<p><strong>daysInMonthArray</strong></p>\n<pre><code>public static ArrayList&lt;LocalDate&gt; daysInMonthArray() //The arraylist that month will be stored\n    {\n        ArrayList&lt;LocalDate&gt; daysInMonthArray = new ArrayList&lt;&gt;();\n\n        YearMonth yearMonth = null;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            yearMonth = YearMonth.from(selectedDate);\n        }\n        int daysInMonth = 0; //get how many days are in month\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            daysInMonth = yearMonth.lengthOfMonth();\n        }\n\n        LocalDate prevMonth = null;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            prevMonth = selectedDate.minusMonths(1);\n        }\n        LocalDate nextMonth = null;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            nextMonth = selectedDate.plusMonths(1);\n        }\n\n        YearMonth prevYearMonth = null;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            prevYearMonth = YearMonth.from(prevMonth);\n        }\n        int prevDaysInMonth = 0;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            prevDaysInMonth = prevYearMonth.lengthOfMonth();\n        }\n\n        LocalDate firstOfMonth = null; //get first day of month\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            firstOfMonth = CalendarUtils.selectedDate.withDayOfMonth(1);\n        }\n        int dayOfWeek = 0; // return int between 0-7 which is the day of the week\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            dayOfWeek = firstOfMonth.getDayOfWeek().getValue();\n        }\n\n        for (int i = 1; i &lt;= 42; i++) {\n            if (i &lt;= dayOfWeek) {\n\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                    daysInMonthArray.add(LocalDate.of(prevMonth.getYear(), prevMonth.getMonth(), prevDaysInMonth + i - dayOfWeek));\n                }\n                if (dayOfWeek == 7 &amp;&amp; daysInMonthArray.size() &gt;= 7) {\n\n                    daysInMonthArray.clear();\n                }\n\n\n            } else if (i &gt; daysInMonth + dayOfWeek) {\n\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                    daysInMonthArray.add(LocalDate.of(nextMonth.getYear(), nextMonth.getMonth(), i - dayOfWeek - daysInMonth));\n                }\n\n\n            }\n            else {\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                    daysInMonthArray.add(LocalDate.of(selectedDate.getYear(), selectedDate.getMonth(), i - dayOfWeek));\n                }\n\n            }\n\n        }\n\n\n        return daysInMonthArray;\n\n\n    }\n</code></pre>\n<p><strong>My xml is simple with the ViewPager only inside:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.MainActivity2&quot;&gt;\n\n\n    &lt;androidx.viewpager2.widget.ViewPager2\n        android:id=&quot;@+id/viewPager&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java","swagger-core"],"answers":[{"comments":[{"owner":{"account_id":8928886,"reputation":1066,"user_id":9719337,"display_name":"Dred"},"score":0,"creation_date":1684751303,"post_id":76305046,"comment_id":134557608,"body_markdown":"Thank you for your answer. But I can&#39;t do that , because it is like 2 different big endpoints for core and additional part of application. We have 2 different classes which extends ResourceConfig class","body":"Thank you for your answer. But I can&#39;t do that , because it is like 2 different big endpoints for core and additional part of application. We have 2 different classes which extends ResourceConfig class"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1684752032,"post_id":76305046,"comment_id":134557751,"body_markdown":"I don&#39;t understand what in having a core/additional structure prevents using concatenated &#39;@Path over &#39;@ApplicationPath. Is core using ApplicationPath and can&#39;t be modified?","body":"I don&#39;t understand what in having a core/additional structure prevents using concatenated &#39;@Path over &#39;@ApplicationPath. Is core using ApplicationPath and can&#39;t be modified?"},{"owner":{"account_id":8928886,"reputation":1066,"user_id":9719337,"display_name":"Dred"},"score":0,"creation_date":1684752468,"post_id":76305046,"comment_id":134557833,"body_markdown":"because it seems I have to remake all pathes from our all controllers to new path?","body":"because it seems I have to remake all pathes from our all controllers to new path?"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1684753405,"post_id":76305046,"comment_id":134557993,"body_markdown":"That should have been considered when building the core application with a &#39;@ApplicationPath. That mandates the path for the application - both core and extensions.","body":"That should have been considered when building the core application with a &#39;@ApplicationPath. That mandates the path for the application - both core and extensions."}],"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684749827,"creation_date":1684749827,"answer_id":76305046,"question_id":76304355,"body_markdown":"What you are trying to achieve cannot be done with @ApplicationPath. Remove them and build that part of the path in the @Path annotations.\r\n\r\n    @Path(&quot;/endpoint_1/path1&quot;)\r\n    public class SomeObject1 {\r\n    }\r\n    \r\n    \r\n    @Path(&quot;/endpoint_2/path2&quot;)\r\n    public class SomeObject2 {\r\n    }","title":"swagger wrong api for different servlets","body":"<p>What you are trying to achieve cannot be done with @ApplicationPath. Remove them and build that part of the path in the @Path annotations.</p>\n<pre><code>@Path(&quot;/endpoint_1/path1&quot;)\npublic class SomeObject1 {\n}\n\n\n@Path(&quot;/endpoint_2/path2&quot;)\npublic class SomeObject2 {\n}\n</code></pre>\n"}],"owner":{"account_id":8928886,"reputation":1066,"user_id":9719337,"display_name":"Dred"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684749827,"creation_date":1684744425,"question_id":76304355,"body_markdown":"I have several endpoints. For example\r\n\r\n    @ApplicationPath(&quot;/endpoint_1&quot;)\r\n    public class Endpoint1 extends ResourceConfig {\r\n    \r\n\r\n     public Endpoint1(){\r\n        register(SomeObject1.class);\r\n        ...\r\n        }\r\n    \r\n    }\r\n    \r\n    @Path(&quot;/path1&quot;)\r\n    public class SomeObject1 {\r\n    }\r\n    \r\n    \r\n    @ApplicationPath(&quot;/endpoint_2&quot;)\r\n    public class Endpoint2 extends ResourceConfig {\r\n    \r\n    public Endpoint2(){\r\n        register(SomeObject2.class);\r\n        ...\r\n        }\r\n    \r\n    }\r\n\r\n\r\n    @Path(&quot;/path2&quot;)\r\n    public class SomeObject2 {\r\n    }\r\n\r\nAnd when I try to register swagger and get API for both endpoints, I get only for 1 and its swagger&#39;s endpoint\r\n\r\n\r\nI have tried many variants but this one was last one\r\n\r\n    @ApplicationPath(&quot;/swagger&quot;)\r\n    public class OpenApiCOnfig extends ResourceConfig {\r\n    \r\n      public OpenApiConfig() {\r\n        OpenApiResource r = new OpenApiResource();\r\n        SwaggerConfiguration oasConfig = new SwaggerConfiguration()\r\n                    .openAPI(new OpenAPI())\r\n                    .prettyPrint(true);\r\n    \r\n        r.setOpenApiConfiguration(oasConfig);\r\n    \r\n        register(r);\r\n      }\r\n    }\r\n\r\n\r\n\r\nand I get API like\r\n\r\n/swagger/path1; /swagger/path2;\r\n\r\nHow to get correct API like \r\n\r\nendpoint_1/path1;  endpoint_2/path2","title":"swagger wrong api for different servlets","body":"<p>I have several endpoints. For example</p>\n<pre><code>@ApplicationPath(&quot;/endpoint_1&quot;)\npublic class Endpoint1 extends ResourceConfig {\n\n\n public Endpoint1(){\n    register(SomeObject1.class);\n    ...\n    }\n\n}\n\n@Path(&quot;/path1&quot;)\npublic class SomeObject1 {\n}\n\n\n@ApplicationPath(&quot;/endpoint_2&quot;)\npublic class Endpoint2 extends ResourceConfig {\n\npublic Endpoint2(){\n    register(SomeObject2.class);\n    ...\n    }\n\n}\n\n\n@Path(&quot;/path2&quot;)\npublic class SomeObject2 {\n}\n</code></pre>\n<p>And when I try to register swagger and get API for both endpoints, I get only for 1 and its swagger's endpoint</p>\n<p>I have tried many variants but this one was last one</p>\n<pre><code>@ApplicationPath(&quot;/swagger&quot;)\npublic class OpenApiCOnfig extends ResourceConfig {\n\n  public OpenApiConfig() {\n    OpenApiResource r = new OpenApiResource();\n    SwaggerConfiguration oasConfig = new SwaggerConfiguration()\n                .openAPI(new OpenAPI())\n                .prettyPrint(true);\n\n    r.setOpenApiConfiguration(oasConfig);\n\n    register(r);\n  }\n}\n</code></pre>\n<p>and I get API like</p>\n<p>/swagger/path1; /swagger/path2;</p>\n<p>How to get correct API like</p>\n<p>endpoint_1/path1;  endpoint_2/path2</p>\n"},{"tags":["java","find-sec-bugs"],"owner":{"account_id":28634591,"reputation":1,"user_id":21924938,"display_name":"timer 9527"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684749792,"creation_date":1684749792,"question_id":76305041,"body_markdown":"How to quickly debug and modify code?\r\n\r\nI am not a professional java developer and I am confused about how to debug this find-sec-bugs project. Whenever I add a new detector, do I need to package the entire project and replace plugins.jar in findsecbugs-cli, can I debug the source code I wrote directly with IDEA?\r\n\r\n","title":"How can I debug new detectors in find-sec-bugs without repackaging the entire project?","body":"<p>How to quickly debug and modify code?</p>\n<p>I am not a professional java developer and I am confused about how to debug this find-sec-bugs project. Whenever I add a new detector, do I need to package the entire project and replace plugins.jar in findsecbugs-cli, can I debug the source code I wrote directly with IDEA?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","thymeleaf"],"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1624909958,"post_id":68169120,"comment_id":120481462,"body_markdown":"If you&#39;re including versions of Spring dependencies, you&#39;re usually clobbering the management and going to cause problems. In particular, you are pulling in 5.0.0 and 5.5.0; eliminate all of these versions and let Boot do its job.","body":"If you&#39;re including versions of Spring dependencies, you&#39;re usually clobbering the management and going to cause problems. In particular, you are pulling in 5.0.0 and 5.5.0; eliminate all of these versions and let Boot do its job."},{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":0,"creation_date":1624947390,"post_id":68169120,"comment_id":120488941,"body_markdown":"If you generate your project via [start.spring.io](https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=2.5.2.RELEASE&amp;packaging=jar&amp;jvmVersion=16&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=thymeleaf,security,data-jpa,devtools,mysql,lombok), you will see that you don&#39;t need all those versions specified. Spring Boot handles this automatically to select compatible versions.","body":"If you generate your project via <a href=\"https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=2.5.2.RELEASE&amp;packaging=jar&amp;jvmVersion=16&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=thymeleaf,security,data-jpa,devtools,mysql,lombok\" rel=\"nofollow noreferrer\">start.spring.io</a>, you will see that you don&#39;t need all those versions specified. Spring Boot handles this automatically to select compatible versions."},{"owner":{"display_name":"user16187195"},"score":0,"creation_date":1624957691,"post_id":68169120,"comment_id":120492812,"body_markdown":"Thanks that solved my problem","body":"Thanks that solved my problem"}],"answers":[{"tags":[],"owner":{"account_id":11171071,"reputation":1055,"user_id":8198017,"display_name":"VishnuVS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684749499,"creation_date":1684749499,"answer_id":76305000,"question_id":68169120,"body_markdown":"I got this error while running the application using IntelliJ. My issue was that I was using Java version 11 in the project settings. I changed it to version 1.8 from them project settings menu (Ctrl + Shift + Alt + S).","title":"Error creating bean with name &#39;requestMappingHandlerAdapter&#39; in Spring Boot application","body":"<p>I got this error while running the application using IntelliJ. My issue was that I was using Java version 11 in the project settings. I changed it to version 1.8 from them project settings menu (Ctrl + Shift + Alt + S).</p>\n"}],"owner":{"display_name":"user16187195"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":888,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684749499,"creation_date":1624908870,"question_id":68169120,"body_markdown":"I&#39;m using a Spring Boot application with Thymeleaf in a simple test project. I want to show a message if the user is logged in so I want to use the sec:authorize=&quot;isAuthenticated()&quot;. I made my config class(thats totally new for me) but I get an error\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;requestMappingHandlerAdapter&#39; defined in class path resource [org/springframework/web/servlet/config/annotation/DelegatingWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter]: Factory method &#39;requestMappingHandlerAdapter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/web/method/annotation/CurrentSecurityContextArgumentResolver\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1334) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:564) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.8.jar:5.3.8]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.8.jar:5.3.8]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.1.jar:2.5.1]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-2.5.1.jar:2.5.1]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-2.5.1.jar:2.5.1]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.1.jar:2.5.1]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.1.jar:2.5.1]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) ~[spring-boot-2.5.1.jar:2.5.1]\r\n\tat com.teszt.thymeleaftest.ThymeleaftestApplication.main(ThymeleaftestApplication.java:10) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.5.1.jar:2.5.1]\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter]: Factory method &#39;requestMappingHandlerAdapter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/web/method/annotation/CurrentSecurityContextArgumentResolver\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\t... 24 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: org/springframework/security/web/method/annotation/CurrentSecurityContextArgumentResolver\r\n\tat org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration.addArgumentResolvers(WebMvcSecurityConfiguration.java:61) ~[spring-security-config-5.5.0.jar:5.5.0]\r\n\tat org.springframework.web.servlet.config.annotation.WebMvcConfigurerComposite.addArgumentResolvers(WebMvcConfigurerComposite.java:123) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n\tat org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.addArgumentResolvers(DelegatingWebMvcConfiguration.java:108) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n\tat org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.getArgumentResolvers(WebMvcConfigurationSupport.java:812) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n\tat org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.requestMappingHandlerAdapter(WebMvcConfigurationSupport.java:675) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.8.jar:5.3.8]\r\n\t... 25 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: org.springframework.security.web.method.annotation.CurrentSecurityContextArgumentResolver\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:636) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:182) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:519) ~[na:na]\r\n\t... 35 common frames omitted\r\n```\r\nNow I&#39;m not sure which files should I share here but here is my pom.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.5.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.teszt&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;thymeleaftest&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;thymeleaftest&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;16&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.5.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.0.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.5.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nMy config class:\r\n```\r\npackage com.teszt.thymeleaftest.config;\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\n\r\n@Configuration\r\n@EnableWebMvc\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/&quot;).permitAll()\r\n                .and()\r\n                .formLogin()\r\n                    .loginPage(&quot;/login&quot;)\r\n                    .loginProcessingUrl(&quot;/logIn&quot;)\r\n                    .permitAll()\r\n                .and()\r\n                .csrf().disable();\r\n    }\r\n}\r\n```\r\nHere is my html page:\r\n```\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity5&quot;&gt;\r\n\r\n&lt;head&gt;\r\n\r\n    &lt;!-- Required meta tags --&gt;\r\n    &lt;meta charset=&quot;utf-8&quot;&gt;\r\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;\r\n\r\n    &lt;!-- Bootstrap CSS --&gt;\r\n    &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x&quot; crossorigin=&quot;anonymous&quot;&gt;\r\n\r\n\r\n    &lt;title&gt;Main Page&lt;/title&gt;\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n\r\n&lt;a th:href=&quot;@{/users/showUserForm}&quot;&gt;Click here&lt;/a&gt; to go to the User Registration page\r\n&lt;br&gt;\r\n&lt;a th:href=&quot;@{/users/list}&quot;&gt;Click here&lt;/a&gt; to go to the Users list page\r\n&lt;br&gt;\r\n&lt;a th:href=&quot;@{/login/signUp}&quot;&gt;Click here&lt;/a&gt; to go to the sign up page\r\n&lt;br&gt;\r\n&lt;a th:href=&quot;@{/login/members-list}&quot;&gt;Click here&lt;/a&gt; to see the list of the members\r\n&lt;br&gt;\r\n&lt;span sec:authorize=&quot;isAuthenticated()&quot;&gt;You are logged in&lt;/span&gt;\r\n\r\n&lt;/body&gt;\r\n\r\n&lt;/html&gt;\r\n```\r\nI hope somebody can help me.\r\n\r\n\r\n","title":"Error creating bean with name &#39;requestMappingHandlerAdapter&#39; in Spring Boot application","body":"<p>I'm using a Spring Boot application with Thymeleaf in a simple test project. I want to show a message if the user is logged in so I want to use the sec:authorize=&quot;isAuthenticated()&quot;. I made my config class(thats totally new for me) but I get an error</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/web/servlet/config/annotation/DelegatingWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter]: Factory method 'requestMappingHandlerAdapter' threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/web/method/annotation/CurrentSecurityContextArgumentResolver\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1334) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:564) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.8.jar:5.3.8]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.8.jar:5.3.8]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.1.jar:2.5.1]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-2.5.1.jar:2.5.1]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-2.5.1.jar:2.5.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.1.jar:2.5.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.1.jar:2.5.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) ~[spring-boot-2.5.1.jar:2.5.1]\n    at com.teszt.thymeleaftest.ThymeleaftestApplication.main(ThymeleaftestApplication.java:10) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.5.1.jar:2.5.1]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter]: Factory method 'requestMappingHandlerAdapter' threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/web/method/annotation/CurrentSecurityContextArgumentResolver\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.8.jar:5.3.8]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.8.jar:5.3.8]\n    ... 24 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: org/springframework/security/web/method/annotation/CurrentSecurityContextArgumentResolver\n    at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration.addArgumentResolvers(WebMvcSecurityConfiguration.java:61) ~[spring-security-config-5.5.0.jar:5.5.0]\n    at org.springframework.web.servlet.config.annotation.WebMvcConfigurerComposite.addArgumentResolvers(WebMvcConfigurerComposite.java:123) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.addArgumentResolvers(DelegatingWebMvcConfiguration.java:108) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.getArgumentResolvers(WebMvcConfigurationSupport.java:812) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.requestMappingHandlerAdapter(WebMvcConfigurationSupport.java:675) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.8.jar:5.3.8]\n    ... 25 common frames omitted\nCaused by: java.lang.ClassNotFoundException: org.springframework.security.web.method.annotation.CurrentSecurityContextArgumentResolver\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:636) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:182) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:519) ~[na:na]\n    ... 35 common frames omitted\n</code></pre>\n<p>Now I'm not sure which files should I share here but here is my pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.teszt&lt;/groupId&gt;\n    &lt;artifactId&gt;thymeleaftest&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;thymeleaftest&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;16&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n            &lt;version&gt;2.5.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n            &lt;version&gt;5.0.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.12.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n            &lt;version&gt;5.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>My config class:</p>\n<pre><code>package com.teszt.thymeleaftest.config;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\n\n@Configuration\n@EnableWebMvc\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests()\n                .antMatchers(&quot;/&quot;).permitAll()\n                .and()\n                .formLogin()\n                    .loginPage(&quot;/login&quot;)\n                    .loginProcessingUrl(&quot;/logIn&quot;)\n                    .permitAll()\n                .and()\n                .csrf().disable();\n    }\n}\n</code></pre>\n<p>Here is my html page:</p>\n<pre><code>&lt;!DOCTYPE HTML&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity5&quot;&gt;\n\n&lt;head&gt;\n\n    &lt;!-- Required meta tags --&gt;\n    &lt;meta charset=&quot;utf-8&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;\n\n    &lt;!-- Bootstrap CSS --&gt;\n    &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x&quot; crossorigin=&quot;anonymous&quot;&gt;\n\n\n    &lt;title&gt;Main Page&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;a th:href=&quot;@{/users/showUserForm}&quot;&gt;Click here&lt;/a&gt; to go to the User Registration page\n&lt;br&gt;\n&lt;a th:href=&quot;@{/users/list}&quot;&gt;Click here&lt;/a&gt; to go to the Users list page\n&lt;br&gt;\n&lt;a th:href=&quot;@{/login/signUp}&quot;&gt;Click here&lt;/a&gt; to go to the sign up page\n&lt;br&gt;\n&lt;a th:href=&quot;@{/login/members-list}&quot;&gt;Click here&lt;/a&gt; to see the list of the members\n&lt;br&gt;\n&lt;span sec:authorize=&quot;isAuthenticated()&quot;&gt;You are logged in&lt;/span&gt;\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p>I hope somebody can help me.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":36208,"reputation":240326,"user_id":103154,"display_name":"axtavt"},"score":0,"creation_date":1354805533,"post_id":13746080,"comment_id":18889577,"body_markdown":"See http://stackoverflow.com/questions/4370683/inject-util-class-with-google-guice-vs-static-methods","body":"See <a href=\"http://stackoverflow.com/questions/4370683/inject-util-class-with-google-guice-vs-static-methods\" title=\"inject util class with google guice vs static methods\">stackoverflow.com/questions/4370683/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1674405,"reputation":979,"user_id":1540241,"accept_rate":60,"display_name":"MychaL"},"score":0,"creation_date":1354809375,"post_id":13746277,"comment_id":18891804,"body_markdown":"I didn&#39;t understand your example. If i have a public static method which return a String depends on the parameters passed to the method without storing anything, so we should let the static method, and not manage the class by Spring. That&#39;s right ? in other case, create a Component or Service.","body":"I didn&#39;t understand your example. If i have a public static method which return a String depends on the parameters passed to the method without storing anything, so we should let the static method, and not manage the class by Spring. That&#39;s right ? in other case, create a Component or Service."},{"owner":{"account_id":8897,"reputation":11219,"user_id":16206,"accept_rate":78,"display_name":"borjab"},"score":0,"creation_date":1435306267,"post_id":13746277,"comment_id":50155717,"body_markdown":"More important: during testing you can inject a different DateServiceTestingImpl with different dates to test how your system work on different dates.\n\nOf course, in this case you will need to set it by configuration and not autowire it","body":"More important: during testing you can inject a different DateServiceTestingImpl with different dates to test how your system work on different dates.  Of course, in this case you will need to set it by configuration and not autowire it"}],"tags":[],"owner":{"account_id":1941613,"reputation":5357,"user_id":1747706,"accept_rate":100,"display_name":"Zutty"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1354805824,"creation_date":1354805824,"answer_id":13746277,"question_id":13746080,"body_markdown":"If it has any kind of state to maintain, or any collaborators then make a Spring component. If the functionality you need is stateless and doesn&#39;t rely on the state of any other methods it calls then make it static.\r\n\r\nFor example in my app I have a static util method that clamps integers between a min and max value, but a Spring bean that returns the current date...\r\n\r\n    @Service\r\n    public class DateServiceImpl implements DateService {\r\n        @Override\r\n        public Date getCurrentDate() {\r\n            return Calendar.getInstance().getTime();\r\n        }\r\n    }\r\n\r\nWhy? Because now I can unit test code that uses the current date.","title":"Spring or not Spring : should we create a @Component on a class with static methods?","body":"<p>If it has any kind of state to maintain, or any collaborators then make a Spring component. If the functionality you need is stateless and doesn't rely on the state of any other methods it calls then make it static.</p>\n\n<p>For example in my app I have a static util method that clamps integers between a min and max value, but a Spring bean that returns the current date...</p>\n\n<pre><code>@Service\npublic class DateServiceImpl implements DateService {\n    @Override\n    public Date getCurrentDate() {\n        return Calendar.getInstance().getTime();\n    }\n}\n</code></pre>\n\n<p>Why? Because now I can unit test code that uses the current date.</p>\n"},{"tags":[],"owner":{"account_id":6124082,"reputation":2803,"user_id":4776689,"accept_rate":61,"display_name":"P_M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684749430,"creation_date":1684749430,"answer_id":76304992,"question_id":13746080,"body_markdown":"With Spring it is always better to have Components then Util classes with static methods. \r\n\r\nHowever if you have a lot of util classes with static methods already, refactoring could be difficult, because of, besides of replacing the util classes with Spring beans you also will have to update all methods invocations in classes depending on those utils classes. This is even harder if your code used as library in other projects. Though this is well known and is the consequence of tight coupling, which leads to fragility. Somebody will have to pay for that.\r\n\r\nThus I would create all new classes as Spring beans (components) but about older code I would may be left it as is, because large change could break something unintentionally. So I would replace older util classes in case I have some feature update task on them.\r\n\r\nHere some details: https://stackoverflow.com/a/76304657/4776689","title":"Spring or not Spring : should we create a @Component on a class with static methods?","body":"<p>With Spring it is always better to have Components then Util classes with static methods.</p>\n<p>However if you have a lot of util classes with static methods already, refactoring could be difficult, because of, besides of replacing the util classes with Spring beans you also will have to update all methods invocations in classes depending on those utils classes. This is even harder if your code used as library in other projects. Though this is well known and is the consequence of tight coupling, which leads to fragility. Somebody will have to pay for that.</p>\n<p>Thus I would create all new classes as Spring beans (components) but about older code I would may be left it as is, because large change could break something unintentionally. So I would replace older util classes in case I have some feature update task on them.</p>\n<p>Here some details: <a href=\"https://stackoverflow.com/a/76304657/4776689\">https://stackoverflow.com/a/76304657/4776689</a></p>\n"}],"owner":{"account_id":1674405,"reputation":979,"user_id":1540241,"accept_rate":60,"display_name":"MychaL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9581,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":13746277,"answer_count":2,"score":11,"last_activity_date":1684749430,"creation_date":1354805263,"question_id":13746080,"body_markdown":"I have a package &quot;Utils&quot; where i have many classes. Some of them are just some classes with static methods and others some singleton where i pass some parameters in constructor (with @Value in order to replace the basic XML configuration by annotation).\r\n\r\nI have a configuration in ApplicationContext in order to scan the package.\r\n\r\nSo, my question : for classes with static methods, should we transform them with @Component annotation in order to have a singleton (still with static methods) or should we let them in this state without managed them by Spring ?\r\n\r\nthank you","title":"Spring or not Spring : should we create a @Component on a class with static methods?","body":"<p>I have a package \"Utils\" where i have many classes. Some of them are just some classes with static methods and others some singleton where i pass some parameters in constructor (with @Value in order to replace the basic XML configuration by annotation).</p>\n\n<p>I have a configuration in ApplicationContext in order to scan the package.</p>\n\n<p>So, my question : for classes with static methods, should we transform them with @Component annotation in order to have a singleton (still with static methods) or should we let them in this state without managed them by Spring ?</p>\n\n<p>thank you</p>\n"},{"tags":["java","hibernate","jpa","orm","many-to-many"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1587452670,"post_id":61337372,"comment_id":108509245,"body_markdown":"I assume you have found [this other question](https://stackoverflow.com/questions/19966486/hibernate-4-onetomany-liststring) and it doesn&#39;t work for you","body":"I assume you have found <a href=\"https://stackoverflow.com/questions/19966486/hibernate-4-onetomany-liststring\">this other question</a> and it doesn&#39;t work for you"},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1587452882,"post_id":61337372,"comment_id":108509349,"body_markdown":"You probably don&#39;t need the `@JoinTable` and `@Column` annotations","body":"You probably don&#39;t need the <code>@JoinTable</code> and <code>@Column</code> annotations"},{"owner":{"account_id":1670557,"reputation":904,"user_id":1537093,"accept_rate":100,"display_name":"dpelisek"},"score":0,"creation_date":1587471100,"post_id":61337372,"comment_id":108519092,"body_markdown":"Hi Lino. The thread you mentioned does not deal with many-to-many relationship, so it does not solve my problem. Thanks anyway!","body":"Hi Lino. The thread you mentioned does not deal with many-to-many relationship, so it does not solve my problem. Thanks anyway!"},{"owner":{"account_id":11213379,"reputation":210,"user_id":8226811,"display_name":"Julien"},"score":0,"creation_date":1633435893,"post_id":61337372,"comment_id":122754255,"body_markdown":"Did you find any solution ? I encounter the same problem. Thanks in advance","body":"Did you find any solution ? I encounter the same problem. Thanks in advance"},{"owner":{"account_id":1670557,"reputation":904,"user_id":1537093,"accept_rate":100,"display_name":"dpelisek"},"score":0,"creation_date":1633526355,"post_id":61337372,"comment_id":122782873,"body_markdown":"@Julien, sadly I have not. I&#39;m &#39;ve created a class for the Label","body":"@Julien, sadly I have not. I&#39;m &#39;ve created a class for the Label"}],"answers":[{"comments":[{"owner":{"account_id":1670557,"reputation":904,"user_id":1537093,"accept_rate":100,"display_name":"dpelisek"},"score":0,"creation_date":1587471501,"post_id":61337803,"comment_id":108519315,"body_markdown":"Thank you for your answer, CodeScale. It is a legacy DB and I cannot change the structure. Moreover, there are some benefits/reasons of having the label in its own table. I do have a Label entity at the moment but I&#39;m still looking for a better solution. If I don&#39;t find it any time soon, I&#39;ll mark your answer as accepted. Thanks again!","body":"Thank you for your answer, CodeScale. It is a legacy DB and I cannot change the structure. Moreover, there are some benefits/reasons of having the label in its own table. I do have a Label entity at the moment but I&#39;m still looking for a better solution. If I don&#39;t find it any time soon, I&#39;ll mark your answer as accepted. Thanks again!"},{"owner":{"account_id":251960,"reputation":1067,"user_id":529674,"display_name":"Pere"},"score":0,"creation_date":1684749369,"post_id":61337803,"comment_id":134557241,"body_markdown":"Just to remind you that it&#39;s been more than three years now and you didn&#39;t label his answer as the accepted one, @dpelisek","body":"Just to remind you that it&#39;s been more than three years now and you didn&#39;t label his answer as the accepted one, @dpelisek"},{"owner":{"account_id":1670557,"reputation":904,"user_id":1537093,"accept_rate":100,"display_name":"dpelisek"},"score":0,"creation_date":1684839523,"post_id":61337803,"comment_id":134572661,"body_markdown":"I still have not found a better solution. So creating a new entity and using n:n (as you&#39;ve suggested) seems to be the only way.","body":"I still have not found a better solution. So creating a new entity and using n:n (as you&#39;ve suggested) seems to be the only way."}],"tags":[],"owner":{"account_id":6325048,"reputation":3074,"user_id":4911775,"display_name":"CodeScale"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1587452971,"creation_date":1587452971,"answer_id":61337803,"question_id":61337372,"body_markdown":"`@JoinTable` is used to map following associations to database table: bidirectional many-to-one/one-to-many, unidirectional many-to-one, and one-to-one (both bidirectional and unidirectional) associations.\r\n\r\nIf you really want to have  `Label`with his own table you have to define it as an `Entity` and then using `ManyToMany` relation.\r\n\r\nThe other solution would be to remove `Label` table and keep label name as `LABEL` instead of label_id inside `item_label` table.\r\n\r\nSo your relation will become \r\n```java\r\n@ElementCollection\r\n@CollectionTable(name = &quot;ITEM_LABEL&quot;, joinColumns = @JoinColumn(name = &quot;ITEM_ID&quot;))\r\n@Column(name = &quot;LABEL&quot;)\r\n```","title":"JPA - many-to-many as ElementCollection","body":"<p><code>@JoinTable</code> is used to map following associations to database table: bidirectional many-to-one/one-to-many, unidirectional many-to-one, and one-to-one (both bidirectional and unidirectional) associations.</p>\n\n<p>If you really want to have  <code>Label</code>with his own table you have to define it as an <code>Entity</code> and then using <code>ManyToMany</code> relation.</p>\n\n<p>The other solution would be to remove <code>Label</code> table and keep label name as <code>LABEL</code> instead of label_id inside <code>item_label</code> table.</p>\n\n<p>So your relation will become </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ElementCollection\n@CollectionTable(name = \"ITEM_LABEL\", joinColumns = @JoinColumn(name = \"ITEM_ID\"))\n@Column(name = \"LABEL\")\n</code></pre>\n"}],"owner":{"account_id":1670557,"reputation":904,"user_id":1537093,"accept_rate":100,"display_name":"dpelisek"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2292,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":61337803,"answer_count":1,"score":3,"last_activity_date":1684749342,"creation_date":1587451167,"question_id":61337372,"body_markdown":"I&#39;ve got a many-to-many relationship that assigns labels (nothing but string) to items:\r\n\r\n    +------+   +------------+   +-------+\r\n    | ITEM |   | ITEM_LABEL |   | LABEL |\r\n    |------|   |------------|   |-------|\r\n    |  ID  |&lt;-&gt;|  ITEM_ID   | ┌&gt;|  ID   |\r\n    |------|   |------------| | |-------|\r\n    | .... |   |  LABEL_ID  |&lt;┘ | TEXT  |\r\n    +------+   +------------+   +-------+\r\n\r\n... and I&#39;d like to avoid creating POJO class for the label table and keep it in the Item class as a collection of strings. Is there a way to do it with JPA (hibernate) annotations?\r\n\r\nI&#39;ve tried to combine @CollectionTable with @JoinTable but it obviously does not work:\r\n\r\n```{java}\r\n@Entity\r\npublic class Item {\r\n\r\n\t@Id\r\n\tprivate long id;\r\n\r\n\t@ElementCollection\r\n\t@JoinTable(name = &quot;ITEM_LABEL&quot;,\tjoinColumns = @JoinColumn(name = &quot;ITEM_ID&quot;))\r\n\t@CollectionTable(name = &quot;LABEL&quot;, joinColumns = @JoinColumn(name = &quot;ID&quot;, referencedColumnName = &quot;LABEL_ID&quot;))\r\n\t@Column(name = &quot;TEXT&quot;)\r\n\tprivate Collection&lt;Strings&gt; labels;\r\n}\r\n```\r\n\r\nCan anyone tell me how could I include the labels as a collection of string in the item class, please? Many thanks! ","title":"JPA - many-to-many as ElementCollection","body":"<p>I've got a many-to-many relationship that assigns labels (nothing but string) to items:</p>\n\n<pre><code>+------+   +------------+   +-------+\n| ITEM |   | ITEM_LABEL |   | LABEL |\n|------|   |------------|   |-------|\n|  ID  |&lt;-&gt;|  ITEM_ID   | ┌&gt;|  ID   |\n|------|   |------------| | |-------|\n| .... |   |  LABEL_ID  |&lt;┘ | TEXT  |\n+------+   +------------+   +-------+\n</code></pre>\n\n<p>... and I'd like to avoid creating POJO class for the label table and keep it in the Item class as a collection of strings. Is there a way to do it with JPA (hibernate) annotations?</p>\n\n<p>I've tried to combine @CollectionTable with @JoinTable but it obviously does not work:</p>\n\n<pre><code>@Entity\npublic class Item {\n\n    @Id\n    private long id;\n\n    @ElementCollection\n    @JoinTable(name = \"ITEM_LABEL\", joinColumns = @JoinColumn(name = \"ITEM_ID\"))\n    @CollectionTable(name = \"LABEL\", joinColumns = @JoinColumn(name = \"ID\", referencedColumnName = \"LABEL_ID\"))\n    @Column(name = \"TEXT\")\n    private Collection&lt;Strings&gt; labels;\n}\n</code></pre>\n\n<p>Can anyone tell me how could I include the labels as a collection of string in the item class, please? Many thanks! </p>\n"},{"tags":["java","apache-axis"],"owner":{"account_id":28652564,"reputation":11,"user_id":21939263,"display_name":"null8l5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684749182,"creation_date":1684745003,"question_id":76304413,"body_markdown":"Occasionally we get invalid XML responses when calling webservices using Axis2. One reason beside others maybe a HTTP 500 on the other end, resulting in a non-XML response.\r\n\r\nFor better debugging it would be nice to log the HTTP response. \r\n\r\nIs there any possibility to get the actual HTTP response in case of an AxisFault exception?\r\n\r\n\r\n```\r\n[...]\r\nServiceClient sender;\r\nOperationClient mepClient;\r\n\t\t\r\nsender = new ServiceClient (\r\n\taxisConfiguration,\r\n\twsdlLocation,\r\n\tnew QName (\r\n\t\t\tns.getNamespaceURI(),\r\n\t\t\tserviceName ),\r\n\tnull );\r\n\r\nmepClient = sender.createClient (\r\n\tnew QName (\r\n\t\t\tns.getNamespaceURI(), action ) );\r\n\r\nMessageContext messageContext = createMessageContext(method, attachments);\r\nmepClient.addMessageContext (messageContext);\r\n\r\ntry {\r\n\r\n    mepClient.execute(true);\r\n\r\n} catch (AxisFault fault) {\r\n\r\n    // the other side responded with non-xml content for some\r\n    // reason - how to get the actual response?\r\n}\r\n```","title":"Axis2 AxisFault &quot;Content is not allowed in prolog.&quot; - How can i get the invalid XML message?","body":"<p>Occasionally we get invalid XML responses when calling webservices using Axis2. One reason beside others maybe a HTTP 500 on the other end, resulting in a non-XML response.</p>\n<p>For better debugging it would be nice to log the HTTP response.</p>\n<p>Is there any possibility to get the actual HTTP response in case of an AxisFault exception?</p>\n<pre><code>[...]\nServiceClient sender;\nOperationClient mepClient;\n        \nsender = new ServiceClient (\n    axisConfiguration,\n    wsdlLocation,\n    new QName (\n            ns.getNamespaceURI(),\n            serviceName ),\n    null );\n\nmepClient = sender.createClient (\n    new QName (\n            ns.getNamespaceURI(), action ) );\n\nMessageContext messageContext = createMessageContext(method, attachments);\nmepClient.addMessageContext (messageContext);\n\ntry {\n\n    mepClient.execute(true);\n\n} catch (AxisFault fault) {\n\n    // the other side responded with non-xml content for some\n    // reason - how to get the actual response?\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jackson","spring-cloud-stream","spring-cloud-stream-binder-kafka"],"answers":[{"comments":[{"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"score":1,"creation_date":1684445463,"post_id":76284615,"comment_id":134522803,"body_markdown":"Please don&#39;t forget to upvote this post if I helped you","body":"Please don&#39;t forget to upvote this post if I helped you"},{"owner":{"account_id":2909779,"reputation":928,"user_id":2494311,"accept_rate":50,"display_name":"Vadiraj Purohit"},"score":0,"creation_date":1684576864,"post_id":76284615,"comment_id":134539497,"body_markdown":"I tried solutions you suggested. But it is not working. Is it possible can you share a working repository or send a pull request using my repository","body":"I tried solutions you suggested. But it is not working. Is it possible can you share a working repository or send a pull request using my repository"},{"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"score":1,"creation_date":1684618973,"post_id":76284615,"comment_id":134544297,"body_markdown":"@Abc.Xyz I&#39;ve posted patch here: https://gist.github.com/yevheniisemenov/fee586998f608e188875465108588d60\n\nWith this patch I can see the message `Received dummy message = DummyMessage2(numbers=6469344427; 2017586291)` in logs and also json `{&quot;tokens&quot;:[&quot;6469344427&quot;,&quot;2017586291&quot;]}` that posted to kafka topic `this.is.output.example.topic`\n\nPls let me know is it work for you?","body":"@Abc.Xyz I&#39;ve posted patch here: <a href=\"https://gist.github.com/yevheniisemenov/fee586998f608e188875465108588d60\" rel=\"nofollow noreferrer\">gist.github.com/yevheniisemenov/&hellip;</a>  With this patch I can see the message <code>Received dummy message = DummyMessage2(numbers=6469344427; 2017586291)</code> in logs and also json <code>{&quot;tokens&quot;:[&quot;6469344427&quot;,&quot;2017586291&quot;]}</code> that posted to kafka topic <code>this.is.output.example.topic</code>  Pls let me know is it work for you?"},{"owner":{"account_id":2909779,"reputation":928,"user_id":2494311,"accept_rate":50,"display_name":"Vadiraj Purohit"},"score":1,"creation_date":1684747318,"post_id":76284615,"comment_id":134556772,"body_markdown":"Works as expected. Thanks for your detailed answer!","body":"Works as expected. Thanks for your detailed answer!"},{"owner":{"account_id":2909779,"reputation":928,"user_id":2494311,"accept_rate":50,"display_name":"Vadiraj Purohit"},"score":0,"creation_date":1684748742,"post_id":76284615,"comment_id":134557074,"body_markdown":"I have updated OP with another simple solution. Please see update","body":"I have updated OP with another simple solution. Please see update"}],"tags":[],"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684445442,"creation_date":1684445442,"answer_id":76284615,"question_id":76242570,"body_markdown":"The reason for such behavior is in your DummyMessage configuration. You have the `String numbers` field but ignore it for Jackson. Instead, you provide the `getToken` method. So Jackson thinks that your object has only the `List&lt;String&gt; tokens` field and doesn&#39;t understand your bytes when you unmarshal it. \r\n\r\nLet&#39;s look closer:\r\n\r\nWhen you call your `/mvc` endpoint, there is only marshaling happening, so it works. You have the following flow:\r\n\r\n`Request body (1)-&gt; DummyMessage1 (2)-&gt; Response body`\r\n\r\n```\r\n{\r\n  &quot;numbers&quot;: &quot;6469344427; 2017586291&quot;\r\n}\r\n\r\n(1) ====&gt; \r\n\r\nDummyMessage1(\r\n  String numbers = &quot;6469344427; 2017586291&quot;\r\n)\r\n\r\n(2) ====&gt; \r\n\r\n{\r\n  &quot;tokens&quot;: [\r\n    &quot;6469344427&quot;,\r\n    &quot;2017586291&quot;\r\n  ]\r\n}\r\n```\r\n\r\nBut in your `/message` endpoint, the flow is longer: \r\n\r\n`Request body (1)-&gt; DummyMessage2 (2)-&gt; Json (3)-&gt; DummyMessage2`\r\n\r\nAnd on step 3, at your `DummyMessageConsumerService`, spring tries to unmarshal `DummyMessage2` from JSON and can&#39;t do this because the Json has only the field &quot;tokens,&quot; but there is no such field in the object. \r\n\r\nTo fix this issue:\r\n1) Remove `@JsonProperty(access = JsonProperty.Access.READ_ONLY)` from `getTokens()` method \r\n\r\n2) Add the following setter to your `DummyMessage2`\r\n```\r\npublic void setTokens(List&lt;String&gt; tokens) {\r\n    this.numbers = String.join(&quot;;&quot;, tokens);\r\n}\r\n```\r\n\r\nOr you can create another DTO object like `DummyMessage3` with `List&lt;String&gt; tokens` instead of `String numbers`. In that case the flow will be `(1) -&gt; DummyMessage2 (2)-&gt; Json (3)-&gt; DummyMessage3`.\r\n","title":"Spring Cloud Stream: Spring Boot 3.x: JsonProperty, JsonIgnoreProperties behaving unexpectedly with Jackson in Message Converter","body":"<p>The reason for such behavior is in your DummyMessage configuration. You have the <code>String numbers</code> field but ignore it for Jackson. Instead, you provide the <code>getToken</code> method. So Jackson thinks that your object has only the <code>List&lt;String&gt; tokens</code> field and doesn't understand your bytes when you unmarshal it.</p>\n<p>Let's look closer:</p>\n<p>When you call your <code>/mvc</code> endpoint, there is only marshaling happening, so it works. You have the following flow:</p>\n<p><code>Request body (1)-&gt; DummyMessage1 (2)-&gt; Response body</code></p>\n<pre><code>{\n  &quot;numbers&quot;: &quot;6469344427; 2017586291&quot;\n}\n\n(1) ====&gt; \n\nDummyMessage1(\n  String numbers = &quot;6469344427; 2017586291&quot;\n)\n\n(2) ====&gt; \n\n{\n  &quot;tokens&quot;: [\n    &quot;6469344427&quot;,\n    &quot;2017586291&quot;\n  ]\n}\n</code></pre>\n<p>But in your <code>/message</code> endpoint, the flow is longer:</p>\n<p><code>Request body (1)-&gt; DummyMessage2 (2)-&gt; Json (3)-&gt; DummyMessage2</code></p>\n<p>And on step 3, at your <code>DummyMessageConsumerService</code>, spring tries to unmarshal <code>DummyMessage2</code> from JSON and can't do this because the Json has only the field &quot;tokens,&quot; but there is no such field in the object.</p>\n<p>To fix this issue:</p>\n<ol>\n<li><p>Remove <code>@JsonProperty(access = JsonProperty.Access.READ_ONLY)</code> from <code>getTokens()</code> method</p>\n</li>\n<li><p>Add the following setter to your <code>DummyMessage2</code></p>\n</li>\n</ol>\n<pre><code>public void setTokens(List&lt;String&gt; tokens) {\n    this.numbers = String.join(&quot;;&quot;, tokens);\n}\n</code></pre>\n<p>Or you can create another DTO object like <code>DummyMessage3</code> with <code>List&lt;String&gt; tokens</code> instead of <code>String numbers</code>. In that case the flow will be <code>(1) -&gt; DummyMessage2 (2)-&gt; Json (3)-&gt; DummyMessage3</code>.</p>\n"}],"owner":{"account_id":2909779,"reputation":928,"user_id":2494311,"accept_rate":50,"display_name":"Vadiraj Purohit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":433,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76284615,"answer_count":1,"score":2,"last_activity_date":1684749031,"creation_date":1683978660,"question_id":76242570,"body_markdown":"I am currently working on a Spring Boot application (version 3.0.6) and using Spring Cloud (version 2022.0.2). I have two different endpoints (&quot;/mvc&quot; and &quot;/message&quot;) that use two different request objects (**DummyMessage1** and **DummyMessage2**), and I&#39;m having some issues with Jackson&#39;s JsonProperty and JsonIgnoreProperties annotations.\r\n\r\nIn both the cases I&#39;m looking to supress **numbers** from response and get **tokens** in response.\r\n\r\nI have used JsonIgnoreProperties to suppress **numbers** from response.\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;numbers&quot;}, allowSetters = true)\r\n\r\nIn the **`/mvc`** endpoint, everything is working as expected. I&#39;m using **`DummyMessage1`** request object for this endpoint. The **`numbers`** field is suppressed from response as expected. Furthermore, the **`tokens`** field, is returned successfully in the JSON response and is not empty as it contains the list of tokens from the request.\r\n\r\nThe problem arises in the **`/message`** endpoint, which uses **`DummyMessage2`** to post a message to kafka. **`DummyMessage2`** is identical to **`DummyMessage1`**.\r\n\r\nWhen I attempted to post a JSON to the Kafka topic, an exception was thrown: \r\n\r\nFull stacktrace can be found [here](https://gist.github.com/cricketbackground/487eee625b1305076072164366a64635)\r\n\r\n```\r\njava.lang.ClassCastException: class [B cannot be cast to class com.example.marshaller.model.DummyMessage2 ([B is in module java.base of loader &#39;bootstrap&#39;; com.example.marshaller.model.DummyMessage2 is in unnamed module of loader &#39;app&#39;)\r\n\tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeConsumer(SimpleFunctionRegistry.java:990) ~[spring-cloud-function-context-4.0.2.jar:4.0.2]\r\n```\r\n\r\nHere are the request objects:\r\n\r\n`DummyMessage1`:\r\n\r\n    @EqualsAndHashCode(callSuper = false)\r\n    @Getter\r\n    @SuperBuilder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;numbers&quot;}, allowSetters = true)\r\n    public class DummyMessage1 extends BaseRequest {\r\n    \r\n        private String numbers;\r\n    \r\n        //@JsonProperty(access = JsonProperty.Access.READ_ONLY)\r\n        public List&lt;String&gt; getTokens() {\r\n            if (StringUtils.isBlank(this.numbers)) return Collections.emptyList();\r\n            return List.of(this.numbers.split(&quot;;\\\\s*&quot;));\r\n        }\r\n    }\r\n\r\n\r\n`DummyMessage2`:\r\n\r\n    @EqualsAndHashCode(callSuper = false)\r\n    @Getter\r\n    @SuperBuilder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;numbers&quot;}, allowSetters = true)\r\n    public class DummyMessage2 extends BaseRequest {\r\n    \r\n        private String numbers;\r\n    \r\n        @JsonProperty(access = JsonProperty.Access.READ_ONLY)\r\n        public List&lt;String&gt; getTokens() {\r\n            if (StringUtils.isBlank(this.numbers)) return Collections.emptyList();\r\n            return List.of(this.numbers.split(&quot;;\\\\s*&quot;));\r\n        }\r\n    }\r\n\r\n\r\nNext, to work around the the exception, I added the annotation **@JsonProperty(access = JsonProperty.Access.READ_ONLY)** on **getTokens()** method in **DummyMessage2**. However, this did not result in the desired outcome. The JSON posted to Kafka now did not include the numbers field as required, but also, the tokens field was as empty, which is not expected.\r\n\r\nWhy is this happening? I would expect the tokens field to be populated as it is in the /mvc endpoint. Any help or insights would be greatly appreciated.\r\n\r\nHere&#39;s repository to reproduce the issue: https://github.com/cricketbackground/marshaller\r\n\r\nPlease note for security reasons the kafka brokers and kafka zk nodes are purposefully not set in the repo.\r\n\r\nRequest Body:\r\n\r\n```json\r\n\r\n{\r\n    &quot;numbers&quot;:&quot;12345; 3982934823; 3248923492834; 324923434&quot;\r\n}\r\n```\r\n\r\nHow to use: please see [here](https://github.com/cricketbackground/marshaller#readme)\r\n\r\n**--- Update**\r\n\r\nHere&#39;s the simple working DummyMessage2 by adding a field for the utility getter. In the getter method the field itself is returned if it is not empty, thus retaining the field value across multiple message post hops\r\n\r\n```java\r\n\r\n    import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.EqualsAndHashCode;\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.experimental.SuperBuilder;\r\n    import org.apache.commons.lang3.StringUtils;\r\n    import org.springframework.util.CollectionUtils;\r\n    \r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    @EqualsAndHashCode(callSuper = false)\r\n    @Getter\r\n    @SuperBuilder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;numbers&quot;}, allowSetters = true)\r\n    public class DummyMessage2 extends BaseRequest {\r\n    \r\n        private String numbers;\r\n    \r\n        private List&lt;String&gt; tokens;\r\n    \r\n        public List&lt;String&gt; getTokens() {\r\n            if (!CollectionUtils.isEmpty(this.tokens)) return this.tokens;\r\n            if (StringUtils.isBlank(this.numbers)) return Collections.emptyList();\r\n            return List.of(this.numbers.split(&quot;;\\\\s*&quot;));\r\n        }\r\n    }\r\n\r\n```\r\n\r\nThe other solution suggested by Yevhenii Semenov also works but requires setter method logic to be written exactly reverse of getter logic. Setter method complexity increases based on getter method. Also, if there are more fields then writing/maintaining setter methods for each field becomes a problem","title":"Spring Cloud Stream: Spring Boot 3.x: JsonProperty, JsonIgnoreProperties behaving unexpectedly with Jackson in Message Converter","body":"<p>I am currently working on a Spring Boot application (version 3.0.6) and using Spring Cloud (version 2022.0.2). I have two different endpoints (&quot;/mvc&quot; and &quot;/message&quot;) that use two different request objects (<strong>DummyMessage1</strong> and <strong>DummyMessage2</strong>), and I'm having some issues with Jackson's JsonProperty and JsonIgnoreProperties annotations.</p>\n<p>In both the cases I'm looking to supress <strong>numbers</strong> from response and get <strong>tokens</strong> in response.</p>\n<p>I have used JsonIgnoreProperties to suppress <strong>numbers</strong> from response.</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;numbers&quot;}, allowSetters = true)\n</code></pre>\n<p>In the <strong><code>/mvc</code></strong> endpoint, everything is working as expected. I'm using <strong><code>DummyMessage1</code></strong> request object for this endpoint. The <strong><code>numbers</code></strong> field is suppressed from response as expected. Furthermore, the <strong><code>tokens</code></strong> field, is returned successfully in the JSON response and is not empty as it contains the list of tokens from the request.</p>\n<p>The problem arises in the <strong><code>/message</code></strong> endpoint, which uses <strong><code>DummyMessage2</code></strong> to post a message to kafka. <strong><code>DummyMessage2</code></strong> is identical to <strong><code>DummyMessage1</code></strong>.</p>\n<p>When I attempted to post a JSON to the Kafka topic, an exception was thrown:</p>\n<p>Full stacktrace can be found <a href=\"https://gist.github.com/cricketbackground/487eee625b1305076072164366a64635\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>java.lang.ClassCastException: class [B cannot be cast to class com.example.marshaller.model.DummyMessage2 ([B is in module java.base of loader 'bootstrap'; com.example.marshaller.model.DummyMessage2 is in unnamed module of loader 'app')\n    at org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeConsumer(SimpleFunctionRegistry.java:990) ~[spring-cloud-function-context-4.0.2.jar:4.0.2]\n</code></pre>\n<p>Here are the request objects:</p>\n<p><code>DummyMessage1</code>:</p>\n<pre><code>@EqualsAndHashCode(callSuper = false)\n@Getter\n@SuperBuilder\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;numbers&quot;}, allowSetters = true)\npublic class DummyMessage1 extends BaseRequest {\n\n    private String numbers;\n\n    //@JsonProperty(access = JsonProperty.Access.READ_ONLY)\n    public List&lt;String&gt; getTokens() {\n        if (StringUtils.isBlank(this.numbers)) return Collections.emptyList();\n        return List.of(this.numbers.split(&quot;;\\\\s*&quot;));\n    }\n}\n</code></pre>\n<p><code>DummyMessage2</code>:</p>\n<pre><code>@EqualsAndHashCode(callSuper = false)\n@Getter\n@SuperBuilder\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;numbers&quot;}, allowSetters = true)\npublic class DummyMessage2 extends BaseRequest {\n\n    private String numbers;\n\n    @JsonProperty(access = JsonProperty.Access.READ_ONLY)\n    public List&lt;String&gt; getTokens() {\n        if (StringUtils.isBlank(this.numbers)) return Collections.emptyList();\n        return List.of(this.numbers.split(&quot;;\\\\s*&quot;));\n    }\n}\n</code></pre>\n<p>Next, to work around the the exception, I added the annotation <strong>@JsonProperty(access = JsonProperty.Access.READ_ONLY)</strong> on <strong>getTokens()</strong> method in <strong>DummyMessage2</strong>. However, this did not result in the desired outcome. The JSON posted to Kafka now did not include the numbers field as required, but also, the tokens field was as empty, which is not expected.</p>\n<p>Why is this happening? I would expect the tokens field to be populated as it is in the /mvc endpoint. Any help or insights would be greatly appreciated.</p>\n<p>Here's repository to reproduce the issue: <a href=\"https://github.com/cricketbackground/marshaller\" rel=\"nofollow noreferrer\">https://github.com/cricketbackground/marshaller</a></p>\n<p>Please note for security reasons the kafka brokers and kafka zk nodes are purposefully not set in the repo.</p>\n<p>Request Body:</p>\n<pre class=\"lang-json prettyprint-override\"><code>\n{\n    &quot;numbers&quot;:&quot;12345; 3982934823; 3248923492834; 324923434&quot;\n}\n</code></pre>\n<p>How to use: please see <a href=\"https://github.com/cricketbackground/marshaller#readme\" rel=\"nofollow noreferrer\">here</a></p>\n<p><strong>--- Update</strong></p>\n<p>Here's the simple working DummyMessage2 by adding a field for the utility getter. In the getter method the field itself is returned if it is not empty, thus retaining the field value across multiple message post hops</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n    import lombok.AllArgsConstructor;\n    import lombok.EqualsAndHashCode;\n    import lombok.Getter;\n    import lombok.NoArgsConstructor;\n    import lombok.experimental.SuperBuilder;\n    import org.apache.commons.lang3.StringUtils;\n    import org.springframework.util.CollectionUtils;\n    \n    import java.util.Collections;\n    import java.util.List;\n    \n    @EqualsAndHashCode(callSuper = false)\n    @Getter\n    @SuperBuilder\n    @NoArgsConstructor\n    @AllArgsConstructor\n    @JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;numbers&quot;}, allowSetters = true)\n    public class DummyMessage2 extends BaseRequest {\n    \n        private String numbers;\n    \n        private List&lt;String&gt; tokens;\n    \n        public List&lt;String&gt; getTokens() {\n            if (!CollectionUtils.isEmpty(this.tokens)) return this.tokens;\n            if (StringUtils.isBlank(this.numbers)) return Collections.emptyList();\n            return List.of(this.numbers.split(&quot;;\\\\s*&quot;));\n        }\n    }\n\n</code></pre>\n<p>The other solution suggested by Yevhenii Semenov also works but requires setter method logic to be written exactly reverse of getter logic. Setter method complexity increases based on getter method. Also, if there are more fields then writing/maintaining setter methods for each field becomes a problem</p>\n"},{"tags":["java","encryption","hardware-security-module","oaep"],"answers":[{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682343891,"creation_date":1682343891,"answer_id":76092572,"question_id":76091513,"body_markdown":"OAEP decryption [is defined in the PKCS#1 RSA standard](https://www.rfc-editor.org/rfc/rfc8017#section-7.1.2). The decoding of the padding starts at step 3.\r\n\r\nYou *could* take a look at existing software implementations of RSA OAEP, e.g. for the open source Bouncy Castle library if you don&#39;t want to fully program it yourself.","title":"oaep decryption with HSM private key","body":"<p>OAEP decryption <a href=\"https://www.rfc-editor.org/rfc/rfc8017#section-7.1.2\" rel=\"nofollow noreferrer\">is defined in the PKCS#1 RSA standard</a>. The decoding of the padding starts at step 3.</p>\n<p>You <em>could</em> take a look at existing software implementations of RSA OAEP, e.g. for the open source Bouncy Castle library if you don't want to fully program it yourself.</p>\n"},{"tags":[],"owner":{"account_id":7060571,"reputation":153,"user_id":12854684,"display_name":"An Anita"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684748823,"creation_date":1684748823,"answer_id":76304915,"question_id":76091513,"body_markdown":"So, after some research I got the OAEP decryption.\r\nI use Bouncy Castle 1.7 and adjust code from `org.bouncycastle.crypto.encodings.OAEPEncoding` class.\r\n```\r\nCipher cipher = Cipher.getInstance(&quot;RSA/ECB/NoPadding&quot;, &quot;SunPKCS11-cknfast0&quot;);\r\ncipher.init(Cipher.DECRYPT_MODE, privatePK11Key); \r\ndecryptedWithOaep = cipher.doFinal(data);\r\n// this is for with OAEP SHA-256\r\nOAEPEncoding eng =  new OAEPEncoding(new SHA256Digest(), new SHA256Digest());\r\n// if you need with OAEP SHA-1\r\n//new OAEPEncoding();\r\nbyte[] decrypted = eng.decodeBlock(decryptedWithOaep,0,decryptedWithOaep.length, getOutputBlockSize(publicPK11Key.getModulus().bitLength());\r\n\r\n```\r\n\r\n```\r\npublic static int getOutputBlockSize(bitSize)\r\n{\r\n  return (bitSize + 7) / 8 - 1;\r\n}\r\n```\r\n\r\n```\r\nimport org.bouncycastle.crypto.Digest;\r\nimport org.bouncycastle.crypto.InvalidCipherTextException;\r\nimport org.bouncycastle.crypto.util.DigestFactory;\r\nimport org.bouncycastle.util.Arrays;\r\nimport org.bouncycastle.util.Pack;\r\n\r\npublic class OAEPEncoding\r\n{\r\n// this part is adjusting to my case\r\n\r\n    private byte[]                  defHash ;\r\n    private Digest                  mgf1Hash ;\r\n\r\n    public OAEPEncoding()\r\n    {\r\n        Digest hash = DigestFactory.createSHA1();\r\n        mgf1Hash = DigestFactory.createSHA1();\r\n        defHash = new byte[mgf1Hash.getDigestSize()];\r\n        hash.reset();\r\n        hash.doFinal(defHash, 0);\r\n    }\r\n\r\n    public OAEPEncoding(Digest sha256Digest, Digest sha256Digest1) {\r\n        mgf1Hash = sha256Digest1;\r\n        defHash = new byte[mgf1Hash.getDigestSize()];\r\n        sha256Digest.reset();\r\n        sha256Digest.doFinal(defHash, 0);\r\n    }\r\n\r\n    public byte[] decodeBlock(\r\n        byte[]  in,\r\n        int     inOff,\r\n        int     inLen,\r\n        int outputBlockSize)\r\n        throws InvalidCipherTextException\r\n    {\r\n        byte[]  data = in;\r\n        byte[]  block = new byte[outputBlockSize];\r\n\r\n// from here starting original org.bouncycastle.crypto.encodings.OAEPEncoding code\r\n        //\r\n        // as we may have zeros in our leading bytes for the block we produced\r\n        // on encryption, we need to make sure our decrypted block comes back\r\n        // the same size.\r\n        //\r\n\r\n        // i.e. wrong when block.length &lt; (2 * defHash.length) + 1\r\n        int wrongMask = (block.length - ((2 * defHash.length) + 1)) &gt;&gt; 31;\r\n\r\n        if (data.length &lt;= block.length)\r\n        {\r\n            System.arraycopy(data, 0, block, block.length - data.length, data.length);\r\n        }\r\n        else\r\n        {\r\n            System.arraycopy(data, 0, block, 0, block.length);\r\n            wrongMask |= 1;\r\n        }\r\n\r\n        //\r\n        // unmask the seed.\r\n        //\r\n        byte[] mask = maskGeneratorFunction1(\r\n                    block, defHash.length, block.length - defHash.length, defHash.length);\r\n\r\n        for (int i = 0; i != defHash.length; i++)\r\n        {\r\n            block[i] ^= mask[i];\r\n        }\r\n\r\n        //\r\n        // unmask the message block.\r\n        //\r\n        mask = maskGeneratorFunction1(block, 0, defHash.length, block.length - defHash.length);\r\n\r\n        for (int i = defHash.length; i != block.length; i++)\r\n        {\r\n            block[i] ^= mask[i - defHash.length];\r\n        }\r\n\r\n        //\r\n        // check the hash of the encoding params.\r\n        // long check to try to avoid this been a source of a timing attack.\r\n        //\r\n        for (int i = 0; i != defHash.length; i++)\r\n        {\r\n            wrongMask |= defHash[i] ^ block[defHash.length + i];\r\n        }\r\n\r\n        //\r\n        // find the data block\r\n        //\r\n        int start = -1;\r\n\r\n        for (int index = 2 * defHash.length; index != block.length; index++)\r\n        {\r\n            int octet = block[index] &amp; 0xFF;\r\n\r\n            // i.e. mask will be 0xFFFFFFFF if octet is non-zero and start is (still) negative, else 0.\r\n            int shouldSetMask = (-octet &amp; start) &gt;&gt; 31;\r\n\r\n            start += index &amp; shouldSetMask;\r\n        }\r\n\r\n        wrongMask |= start &gt;&gt; 31;\r\n        ++start;\r\n        wrongMask |= block[start] ^ 1;\r\n\r\n        if (wrongMask != 0)\r\n        {\r\n            Arrays.fill(block, (byte)0);\r\n            throw new InvalidCipherTextException(&quot;data wrong&quot;);\r\n        }\r\n\r\n        ++start;\r\n\r\n        //\r\n        // extract the data block\r\n        //\r\n        byte[]  output = new byte[block.length - start];\r\n\r\n        System.arraycopy(block, start, output, 0, output.length);\r\n        Arrays.fill(block, (byte)0);\r\n\r\n        return output;\r\n    }\r\n\r\n    /**\r\n     * mask generator function, as described in PKCS1v2.\r\n     */\r\n    private byte[] maskGeneratorFunction1(\r\n        byte[]  Z,\r\n        int     zOff,\r\n        int     zLen,\r\n        int     length)\r\n    {\r\n        byte[]  mask = new byte[length];\r\n        byte[]  hashBuf = new byte[mgf1Hash.getDigestSize()];\r\n        byte[]  C = new byte[4];\r\n        int     counter = 0;\r\n\r\n        mgf1Hash.reset();\r\n\r\n        while (counter &lt; (length / hashBuf.length))\r\n        {\r\n            Pack.intToBigEndian(counter, C, 0);\r\n\r\n            mgf1Hash.update(Z, zOff, zLen);\r\n            mgf1Hash.update(C, 0, C.length);\r\n            mgf1Hash.doFinal(hashBuf, 0);\r\n\r\n            System.arraycopy(hashBuf, 0, mask, counter * hashBuf.length, hashBuf.length);\r\n\r\n            counter++;\r\n        }\r\n\r\n        if ((counter * hashBuf.length) &lt; length)\r\n        {\r\n            Pack.intToBigEndian(counter, C, 0);\r\n\r\n            mgf1Hash.update(Z, zOff, zLen);\r\n            mgf1Hash.update(C, 0, C.length);\r\n            mgf1Hash.doFinal(hashBuf, 0);\r\n\r\n            System.arraycopy(hashBuf, 0, mask, counter * hashBuf.length, mask.length - (counter * hashBuf.length));\r\n        }\r\n\r\n        return mask;\r\n    }\r\n}\r\n```\r\n\r\nAlso, I have issue with decryptedWithOaep length, it was longer than getOutputBlockSize, for this I delete additional 0 from decrypted with SunPKCS11 data.\r\nBut if I try it for random RSA keys generated with bouncy castle it was not happening. ","title":"oaep decryption with HSM private key","body":"<p>So, after some research I got the OAEP decryption.\nI use Bouncy Castle 1.7 and adjust code from <code>org.bouncycastle.crypto.encodings.OAEPEncoding</code> class.</p>\n<pre><code>Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/NoPadding&quot;, &quot;SunPKCS11-cknfast0&quot;);\ncipher.init(Cipher.DECRYPT_MODE, privatePK11Key); \ndecryptedWithOaep = cipher.doFinal(data);\n// this is for with OAEP SHA-256\nOAEPEncoding eng =  new OAEPEncoding(new SHA256Digest(), new SHA256Digest());\n// if you need with OAEP SHA-1\n//new OAEPEncoding();\nbyte[] decrypted = eng.decodeBlock(decryptedWithOaep,0,decryptedWithOaep.length, getOutputBlockSize(publicPK11Key.getModulus().bitLength());\n\n</code></pre>\n<pre><code>public static int getOutputBlockSize(bitSize)\n{\n  return (bitSize + 7) / 8 - 1;\n}\n</code></pre>\n<pre><code>import org.bouncycastle.crypto.Digest;\nimport org.bouncycastle.crypto.InvalidCipherTextException;\nimport org.bouncycastle.crypto.util.DigestFactory;\nimport org.bouncycastle.util.Arrays;\nimport org.bouncycastle.util.Pack;\n\npublic class OAEPEncoding\n{\n// this part is adjusting to my case\n\n    private byte[]                  defHash ;\n    private Digest                  mgf1Hash ;\n\n    public OAEPEncoding()\n    {\n        Digest hash = DigestFactory.createSHA1();\n        mgf1Hash = DigestFactory.createSHA1();\n        defHash = new byte[mgf1Hash.getDigestSize()];\n        hash.reset();\n        hash.doFinal(defHash, 0);\n    }\n\n    public OAEPEncoding(Digest sha256Digest, Digest sha256Digest1) {\n        mgf1Hash = sha256Digest1;\n        defHash = new byte[mgf1Hash.getDigestSize()];\n        sha256Digest.reset();\n        sha256Digest.doFinal(defHash, 0);\n    }\n\n    public byte[] decodeBlock(\n        byte[]  in,\n        int     inOff,\n        int     inLen,\n        int outputBlockSize)\n        throws InvalidCipherTextException\n    {\n        byte[]  data = in;\n        byte[]  block = new byte[outputBlockSize];\n\n// from here starting original org.bouncycastle.crypto.encodings.OAEPEncoding code\n        //\n        // as we may have zeros in our leading bytes for the block we produced\n        // on encryption, we need to make sure our decrypted block comes back\n        // the same size.\n        //\n\n        // i.e. wrong when block.length &lt; (2 * defHash.length) + 1\n        int wrongMask = (block.length - ((2 * defHash.length) + 1)) &gt;&gt; 31;\n\n        if (data.length &lt;= block.length)\n        {\n            System.arraycopy(data, 0, block, block.length - data.length, data.length);\n        }\n        else\n        {\n            System.arraycopy(data, 0, block, 0, block.length);\n            wrongMask |= 1;\n        }\n\n        //\n        // unmask the seed.\n        //\n        byte[] mask = maskGeneratorFunction1(\n                    block, defHash.length, block.length - defHash.length, defHash.length);\n\n        for (int i = 0; i != defHash.length; i++)\n        {\n            block[i] ^= mask[i];\n        }\n\n        //\n        // unmask the message block.\n        //\n        mask = maskGeneratorFunction1(block, 0, defHash.length, block.length - defHash.length);\n\n        for (int i = defHash.length; i != block.length; i++)\n        {\n            block[i] ^= mask[i - defHash.length];\n        }\n\n        //\n        // check the hash of the encoding params.\n        // long check to try to avoid this been a source of a timing attack.\n        //\n        for (int i = 0; i != defHash.length; i++)\n        {\n            wrongMask |= defHash[i] ^ block[defHash.length + i];\n        }\n\n        //\n        // find the data block\n        //\n        int start = -1;\n\n        for (int index = 2 * defHash.length; index != block.length; index++)\n        {\n            int octet = block[index] &amp; 0xFF;\n\n            // i.e. mask will be 0xFFFFFFFF if octet is non-zero and start is (still) negative, else 0.\n            int shouldSetMask = (-octet &amp; start) &gt;&gt; 31;\n\n            start += index &amp; shouldSetMask;\n        }\n\n        wrongMask |= start &gt;&gt; 31;\n        ++start;\n        wrongMask |= block[start] ^ 1;\n\n        if (wrongMask != 0)\n        {\n            Arrays.fill(block, (byte)0);\n            throw new InvalidCipherTextException(&quot;data wrong&quot;);\n        }\n\n        ++start;\n\n        //\n        // extract the data block\n        //\n        byte[]  output = new byte[block.length - start];\n\n        System.arraycopy(block, start, output, 0, output.length);\n        Arrays.fill(block, (byte)0);\n\n        return output;\n    }\n\n    /**\n     * mask generator function, as described in PKCS1v2.\n     */\n    private byte[] maskGeneratorFunction1(\n        byte[]  Z,\n        int     zOff,\n        int     zLen,\n        int     length)\n    {\n        byte[]  mask = new byte[length];\n        byte[]  hashBuf = new byte[mgf1Hash.getDigestSize()];\n        byte[]  C = new byte[4];\n        int     counter = 0;\n\n        mgf1Hash.reset();\n\n        while (counter &lt; (length / hashBuf.length))\n        {\n            Pack.intToBigEndian(counter, C, 0);\n\n            mgf1Hash.update(Z, zOff, zLen);\n            mgf1Hash.update(C, 0, C.length);\n            mgf1Hash.doFinal(hashBuf, 0);\n\n            System.arraycopy(hashBuf, 0, mask, counter * hashBuf.length, hashBuf.length);\n\n            counter++;\n        }\n\n        if ((counter * hashBuf.length) &lt; length)\n        {\n            Pack.intToBigEndian(counter, C, 0);\n\n            mgf1Hash.update(Z, zOff, zLen);\n            mgf1Hash.update(C, 0, C.length);\n            mgf1Hash.doFinal(hashBuf, 0);\n\n            System.arraycopy(hashBuf, 0, mask, counter * hashBuf.length, mask.length - (counter * hashBuf.length));\n        }\n\n        return mask;\n    }\n}\n</code></pre>\n<p>Also, I have issue with decryptedWithOaep length, it was longer than getOutputBlockSize, for this I delete additional 0 from decrypted with SunPKCS11 data.\nBut if I try it for random RSA keys generated with bouncy castle it was not happening.</p>\n"}],"owner":{"account_id":7060571,"reputation":153,"user_id":12854684,"display_name":"An Anita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1684748823,"creation_date":1682336663,"question_id":76091513,"body_markdown":"I have a key pair storage in HSM. SP for HSM is not support &quot;RSA/ECB/OAEPPadding&quot; decryption.\r\nI can decrypt without padding with existing private key.\r\n\r\n```\r\nCipher cipher = Cipher.getInstance(&quot;RSA/ECB/NoPadding&quot;, &quot;SunPKCS11-cknfast0&quot;);\r\ncipher.init(Cipher.DECRYPT_MODE, privatePK11Key); \r\ndecrypted = cipher.doFinal(data);\r\n```\r\nnow how I can transform ```decrypted``` value to get original text?","title":"oaep decryption with HSM private key","body":"<p>I have a key pair storage in HSM. SP for HSM is not support &quot;RSA/ECB/OAEPPadding&quot; decryption.\nI can decrypt without padding with existing private key.</p>\n<pre><code>Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/NoPadding&quot;, &quot;SunPKCS11-cknfast0&quot;);\ncipher.init(Cipher.DECRYPT_MODE, privatePK11Key); \ndecrypted = cipher.doFinal(data);\n</code></pre>\n<p>now how I can transform <code>decrypted</code> value to get original text?</p>\n"},{"tags":["java","apache-flink","flink-streaming","flink-cep"],"comments":[{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1597413392,"post_id":63401125,"comment_id":112132642,"body_markdown":"Just a comment: since Flink already has a public class named ProcessFunction, it would be less confusing if you were to give your class a different name.","body":"Just a comment: since Flink already has a public class named ProcessFunction, it would be less confusing if you were to give your class a different name."},{"owner":{"account_id":5660794,"reputation":743,"user_id":4478526,"accept_rate":36,"display_name":"Vin"},"score":0,"creation_date":1647858611,"post_id":63401125,"comment_id":126468221,"body_markdown":"Hi! Did you find any solution? I cannot find any documentation for testing `ProcessWindowFunction.` .","body":"Hi! Did you find any solution? I cannot find any documentation for testing <code>ProcessWindowFunction.</code> ."},{"owner":{"account_id":8621268,"reputation":953,"user_id":6456107,"display_name":"Alter"},"score":0,"creation_date":1647866988,"post_id":63401125,"comment_id":126471364,"body_markdown":"Hi @Vin. Nothing man.","body":"Hi @Vin. Nothing man."}],"answers":[{"comments":[{"owner":{"account_id":1174445,"reputation":3883,"user_id":1150795,"display_name":"Piotr Wittchen"},"score":1,"creation_date":1623931785,"post_id":63414527,"comment_id":120221470,"body_markdown":"Could you please give the simple, basic example of testing Flink window function? Especially `SlidingProcessingTimeWindows` function. I looked into these code snippets, but they seem to be quite complicated for me. I&#39;m not able to apply them to my project. I also tried to unit test window function with custom sink, but I get no results on the output. There&#39;s nothing written about testing window functions in the Flink documentation too. I cannot find the very basic example of testing Flink window functions anywhere.","body":"Could you please give the simple, basic example of testing Flink window function? Especially <code>SlidingProcessingTimeWindows</code> function. I looked into these code snippets, but they seem to be quite complicated for me. I&#39;m not able to apply them to my project. I also tried to unit test window function with custom sink, but I get no results on the output. There&#39;s nothing written about testing window functions in the Flink documentation too. I cannot find the very basic example of testing Flink window functions anywhere."}],"tags":[],"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1684748719,"creation_date":1597414568,"answer_id":63414527,"question_id":63401125,"body_markdown":"In general these test harnesses expect to be testing an operator, rather than a user function. So in the case of a `ProcessWindowFunction`, you need to first create an suitable window operator to pass to the test harness.\r\n\r\nYou can test a `ProcessWindowFunction` using a `OneInputStreamOperatorTestHarness` that you instantiate with a `WindowOperator` wrapped around your `ProcessWindowFunction`. I&#39;m afraid this isn&#39;t particularly straightforward, but I can refer you to https://github.com/apache/flink/blob/release-1.11/flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/operators/windowing/WindowOperatorTest.java#L437 as an example.\r\n","title":"Flink Unit Test over ProcessWindowFunction&lt;IN, OUT, KEY, W&gt;","body":"<p>In general these test harnesses expect to be testing an operator, rather than a user function. So in the case of a <code>ProcessWindowFunction</code>, you need to first create an suitable window operator to pass to the test harness.</p>\n<p>You can test a <code>ProcessWindowFunction</code> using a <code>OneInputStreamOperatorTestHarness</code> that you instantiate with a <code>WindowOperator</code> wrapped around your <code>ProcessWindowFunction</code>. I'm afraid this isn't particularly straightforward, but I can refer you to <a href=\"https://github.com/apache/flink/blob/release-1.11/flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/operators/windowing/WindowOperatorTest.java#L437\" rel=\"nofollow noreferrer\">https://github.com/apache/flink/blob/release-1.11/flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/operators/windowing/WindowOperatorTest.java#L437</a> as an example.</p>\n"},{"comments":[{"owner":{"account_id":5172986,"reputation":97,"user_id":4140969,"accept_rate":50,"display_name":"Michele Guerriero"},"score":0,"creation_date":1674483026,"post_id":71571080,"comment_id":132717176,"body_markdown":"Is there any way to do this in Scala? I found no way to wrap a `org.apache.flink.streaming.api.scala.function.ProcessWindowFunction` with something like `InternalIterableProcessWindowFunction`, needed to construct a `WindowOperator`, as this requires a `org.apache.flink.streaming.api.functions.windowing.ProcessWindowFunction`.","body":"Is there any way to do this in Scala? I found no way to wrap a <code>org.apache.flink.streaming.api.scala.function.ProcessWindowF&zwnj;&#8203;unction</code> with something like <code>InternalIterableProcessWindowFunction</code>, needed to construct a <code>WindowOperator</code>, as this requires a <code>org.apache.flink.streaming.api.functions.windowing.ProcessWi&zwnj;&#8203;ndowFunction</code>."}],"tags":[],"owner":{"account_id":5660794,"reputation":743,"user_id":4478526,"accept_rate":36,"display_name":"Vin"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647962487,"creation_date":1647947481,"answer_id":71571080,"question_id":63401125,"body_markdown":"I found a solution, inspired to this method https://github.com/apache/flink/blob/release-1.11/flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/operators/windowing/WindowOperatorTest.java#L1340\r\n\r\nIn my case, I have to test a `TumblingProcessingTimeWindow` where the `process()` operator use a `ProcessWindowFunction` to count words keeping the previous window count (i.e not resetting the count each time the window is triggered)\r\n\r\n`WordCountPojo` is a simple POJO with two field: `word` and `count` (you can use `Tuple2` if you please)\r\n\r\nThis is the test I wrote:\r\n\r\n    @Test\r\n    void testCounter() throws Exception {\r\n        //create a WindowOperator&lt;Key, Input, Accumulator, Output, Window&gt;\r\n        WindowOperator&lt;String, WordCountPojo, Iterable&lt;WordCountPojo&gt;, WordCountPojo, TimeWindow&gt; operator =\r\n                new WindowOperator&lt;&gt;(\r\n                        TumblingProcessingTimeWindows.of(Time.seconds(3)), //window assigner\r\n                        new TimeWindow.Serializer(), //window serializer\r\n                        WordCountPojo::getWord, //key selector\r\n                        BasicTypeInfo.STRING_TYPE_INFO.createSerializer(new ExecutionConfig()), //key serializer\r\n                        new ListStateDescriptor&lt;&gt;( //window state descriptor (in order to accumulate events inside the window)\r\n                                &quot;window-content&quot;,\r\n                                TypeInformation.of(WordCountPojo.class).createSerializer(new ExecutionConfig())), //input serializer\r\n                        new InternalIterableProcessWindowFunction&lt;&gt;(new Counter()), //my custom ProcessWindowFunction to invoke\r\n                        ProcessingTimeTrigger.create(), //window trigger\r\n                        0,\r\n                        null);\r\n    \r\n        //Flink Test Harness\r\n        OneInputStreamOperatorTestHarness&lt;WordCountPojo, WordCountPojo&gt; harness =\r\n                new KeyedOneInputStreamOperatorTestHarness&lt;&gt;(operator, WordCountPojo::getWord, BasicTypeInfo.STRING_TYPE_INFO);\r\n    \r\n        ConcurrentLinkedQueue&lt;Object&gt; expected = new ConcurrentLinkedQueue&lt;&gt;();\r\n        harness.open();\r\n        harness.setProcessingTime(10);\r\n    \r\n        //Push data into window\r\n        harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;to&quot;, 1)));\r\n        harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;be&quot;, 1)));\r\n        harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;or&quot;, 1)));\r\n        harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;not&quot;, 1)));\r\n    \r\n        harness.setProcessingTime(3500); //Set processing time in order to trigger the window\r\n    \r\n        //Expected result\r\n        expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;to&quot;, 1), 2999));\r\n        expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;be&quot;, 1), 2999));\r\n        expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;or&quot;, 1), 2999));\r\n        expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;not&quot;, 1), 2999));\r\n    \r\n        TestHarnessUtil.assertOutputEqualsSorted(&quot;Output not equal to expected&quot;, expected, harness.getOutput(),\r\n                Comparator.comparing(streamRecord -&gt; ((StreamRecord&lt;WordCountPojo&gt;) streamRecord).getValue().getWord())\r\n                        .thenComparing(streamRecord -&gt; ((StreamRecord&lt;WordCountPojo&gt;) streamRecord).getTimestamp()));\r\n    \r\n        //push other WordCountPojos to test global counting\r\n        harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;to&quot;, 1)));\r\n        harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;be&quot;, 1)));\r\n    \r\n        harness.setProcessingTime(7000); //trigger the window again\r\n    \r\n        //Expected result\r\n        expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;to&quot;, 2), 5999));\r\n        expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;be&quot;, 2), 5999));\r\n    \r\n        TestHarnessUtil.assertOutputEqualsSorted(&quot;Output not equal to expected&quot;, expected, harness.getOutput(),\r\n                Comparator.comparing(streamRecord -&gt; ((StreamRecord&lt;WordCountPojo&gt;) streamRecord).getValue().getWord())\r\n                        .thenComparing(streamRecord -&gt; ((StreamRecord&lt;WordCountPojo&gt;) streamRecord).getTimestamp()));\r\n    \r\n        harness.close();\r\n    }\r\n\r\n**Attention points:**\r\n\r\n - Type of the accumulator for the `WindowOperator` is\r\n   `Iterable&lt;WordCountPojo&gt;` and NOT simply `WordCountPojo`. This\r\n   because my `Counter`&#39;s `process()` method receive an `Iterable` and\r\n   not a single `WordCountPojo` (remember that `Counter` extends\r\n   `WindowProcessFunction`)\r\n - `WindowOperator`&#39;s state descriptor parameter is a `ListStateDescriptor`,\r\nthis means that when window collects `WordCountPojo`s (`WindowOperatorTest` example use a `ReducingStateDescriptor` that reduce by sum, but I don&#39;t need to do these because I&#39;ve the `Counter` function that is the function that I want to test)\r\n - `WindowsOperator`&#39;s internal window function parameter is of type `InternaleIterableProcessWindowFunction`. This function wraps my `Counter` function and is invoked when the window is triggered. Because the window accumulate an `Iterable&lt;WordCountPojo&gt;` collected by using a`ListStateDescriptor`, when the `Counter` function is invoked this Iterable&lt;WordCountPojo&gt; is passed as input parameter of the `process()` method.\r\n\r\n","title":"Flink Unit Test over ProcessWindowFunction&lt;IN, OUT, KEY, W&gt;","body":"<p>I found a solution, inspired to this method <a href=\"https://github.com/apache/flink/blob/release-1.11/flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/operators/windowing/WindowOperatorTest.java#L1340\" rel=\"nofollow noreferrer\">https://github.com/apache/flink/blob/release-1.11/flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/operators/windowing/WindowOperatorTest.java#L1340</a></p>\n<p>In my case, I have to test a <code>TumblingProcessingTimeWindow</code> where the <code>process()</code> operator use a <code>ProcessWindowFunction</code> to count words keeping the previous window count (i.e not resetting the count each time the window is triggered)</p>\n<p><code>WordCountPojo</code> is a simple POJO with two field: <code>word</code> and <code>count</code> (you can use <code>Tuple2</code> if you please)</p>\n<p>This is the test I wrote:</p>\n<pre><code>@Test\nvoid testCounter() throws Exception {\n    //create a WindowOperator&lt;Key, Input, Accumulator, Output, Window&gt;\n    WindowOperator&lt;String, WordCountPojo, Iterable&lt;WordCountPojo&gt;, WordCountPojo, TimeWindow&gt; operator =\n            new WindowOperator&lt;&gt;(\n                    TumblingProcessingTimeWindows.of(Time.seconds(3)), //window assigner\n                    new TimeWindow.Serializer(), //window serializer\n                    WordCountPojo::getWord, //key selector\n                    BasicTypeInfo.STRING_TYPE_INFO.createSerializer(new ExecutionConfig()), //key serializer\n                    new ListStateDescriptor&lt;&gt;( //window state descriptor (in order to accumulate events inside the window)\n                            &quot;window-content&quot;,\n                            TypeInformation.of(WordCountPojo.class).createSerializer(new ExecutionConfig())), //input serializer\n                    new InternalIterableProcessWindowFunction&lt;&gt;(new Counter()), //my custom ProcessWindowFunction to invoke\n                    ProcessingTimeTrigger.create(), //window trigger\n                    0,\n                    null);\n\n    //Flink Test Harness\n    OneInputStreamOperatorTestHarness&lt;WordCountPojo, WordCountPojo&gt; harness =\n            new KeyedOneInputStreamOperatorTestHarness&lt;&gt;(operator, WordCountPojo::getWord, BasicTypeInfo.STRING_TYPE_INFO);\n\n    ConcurrentLinkedQueue&lt;Object&gt; expected = new ConcurrentLinkedQueue&lt;&gt;();\n    harness.open();\n    harness.setProcessingTime(10);\n\n    //Push data into window\n    harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;to&quot;, 1)));\n    harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;be&quot;, 1)));\n    harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;or&quot;, 1)));\n    harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;not&quot;, 1)));\n\n    harness.setProcessingTime(3500); //Set processing time in order to trigger the window\n\n    //Expected result\n    expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;to&quot;, 1), 2999));\n    expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;be&quot;, 1), 2999));\n    expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;or&quot;, 1), 2999));\n    expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;not&quot;, 1), 2999));\n\n    TestHarnessUtil.assertOutputEqualsSorted(&quot;Output not equal to expected&quot;, expected, harness.getOutput(),\n            Comparator.comparing(streamRecord -&gt; ((StreamRecord&lt;WordCountPojo&gt;) streamRecord).getValue().getWord())\n                    .thenComparing(streamRecord -&gt; ((StreamRecord&lt;WordCountPojo&gt;) streamRecord).getTimestamp()));\n\n    //push other WordCountPojos to test global counting\n    harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;to&quot;, 1)));\n    harness.processElement(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;be&quot;, 1)));\n\n    harness.setProcessingTime(7000); //trigger the window again\n\n    //Expected result\n    expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;to&quot;, 2), 5999));\n    expected.add(new StreamRecord&lt;&gt;(new WordCountPojo(&quot;be&quot;, 2), 5999));\n\n    TestHarnessUtil.assertOutputEqualsSorted(&quot;Output not equal to expected&quot;, expected, harness.getOutput(),\n            Comparator.comparing(streamRecord -&gt; ((StreamRecord&lt;WordCountPojo&gt;) streamRecord).getValue().getWord())\n                    .thenComparing(streamRecord -&gt; ((StreamRecord&lt;WordCountPojo&gt;) streamRecord).getTimestamp()));\n\n    harness.close();\n}\n</code></pre>\n<p><strong>Attention points:</strong></p>\n<ul>\n<li>Type of the accumulator for the <code>WindowOperator</code> is\n<code>Iterable&lt;WordCountPojo&gt;</code> and NOT simply <code>WordCountPojo</code>. This\nbecause my <code>Counter</code>'s <code>process()</code> method receive an <code>Iterable</code> and\nnot a single <code>WordCountPojo</code> (remember that <code>Counter</code> extends\n<code>WindowProcessFunction</code>)</li>\n<li><code>WindowOperator</code>'s state descriptor parameter is a <code>ListStateDescriptor</code>,\nthis means that when window collects <code>WordCountPojo</code>s (<code>WindowOperatorTest</code> example use a <code>ReducingStateDescriptor</code> that reduce by sum, but I don't need to do these because I've the <code>Counter</code> function that is the function that I want to test)</li>\n<li><code>WindowsOperator</code>'s internal window function parameter is of type <code>InternaleIterableProcessWindowFunction</code>. This function wraps my <code>Counter</code> function and is invoked when the window is triggered. Because the window accumulate an <code>Iterable&lt;WordCountPojo&gt;</code> collected by using a<code>ListStateDescriptor</code>, when the <code>Counter</code> function is invoked this Iterable is passed as input parameter of the <code>process()</code> method.</li>\n</ul>\n"}],"owner":{"account_id":8621268,"reputation":953,"user_id":6456107,"display_name":"Alter"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2206,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1684748719,"creation_date":1597343074,"question_id":63401125,"body_markdown":"How can I create a unit test for a Stateful Process Function. I have something like this:\r\n```\r\n private static SingleOutputStreamOperator&lt;Tuple&gt; methodName(KeyedStream&lt;Event, String&gt; stream) {\r\n        return stream.window(TumblingEventTimeWindows.of(Time.minutes(10)))\r\n                .process(new ProcessFunction());\r\n    }\r\n```\r\n\r\nand \r\n\r\n```\r\nProcessFunction extends ProcessWindowFunction&lt;IN, OUT, KEY, W&gt;\r\n```\r\n\r\nAll the Harness tests that I&#39;ve found in Flink page are extending from KeyedProcessFunction and this is not my case.\r\nThanks.\r\nKind regards!","title":"Flink Unit Test over ProcessWindowFunction&lt;IN, OUT, KEY, W&gt;","body":"<p>How can I create a unit test for a Stateful Process Function. I have something like this:</p>\n<pre><code> private static SingleOutputStreamOperator&lt;Tuple&gt; methodName(KeyedStream&lt;Event, String&gt; stream) {\n        return stream.window(TumblingEventTimeWindows.of(Time.minutes(10)))\n                .process(new ProcessFunction());\n    }\n</code></pre>\n<p>and</p>\n<pre><code>ProcessFunction extends ProcessWindowFunction&lt;IN, OUT, KEY, W&gt;\n</code></pre>\n<p>All the Harness tests that I've found in Flink page are extending from KeyedProcessFunction and this is not my case.\nThanks.\nKind regards!</p>\n"},{"tags":["java","automated-tests","selenium-chromedriver","webdrivermanager-java"],"comments":[{"owner":{"account_id":7183623,"reputation":384,"user_id":5486521,"display_name":"kajahno"},"score":0,"creation_date":1566026765,"post_id":57533827,"comment_id":101533588,"body_markdown":"Welcome to StackOverflow. For questions like this, it&#39;s very useful to show what you have tried and hasn&#39;t worked. Could you share what you have tried so far? (share your code)","body":"Welcome to StackOverflow. For questions like this, it&#39;s very useful to show what you have tried and hasn&#39;t worked. Could you share what you have tried so far? (share your code)"}],"answers":[{"comments":[{"owner":{"account_id":9172580,"reputation":396,"user_id":7047364,"accept_rate":0,"display_name":"Anjani Kumar"},"score":0,"creation_date":1598461418,"post_id":57534210,"comment_id":112469309,"body_markdown":"using the above code but it is not working\npublic class TestLogin{\n@BeforeTest\n\tpublic void Setup() {\n\t\tWebDriverManager.chromedriver().setup();\n\t\tDesiredCapabilities chrome = DesiredCapabilities.chrome();\n\t\t// Error\n\t\t * Multiple markers at this line - DesiredCapabilities cannot be resolved -\n\t\t * DesiredCapabilities cannot be resolved to a type\n\t\t */\n\t\tchrome.setJavascriptEnabled(true);\n\t\tchrome.setCapability(ChromeOptions.CAPABILITY, option);\n\t\tWebDriver driver = new ChromeDriver(option);\n\t\t// Error:Type mismatch: cannot convert from ChromeDriver to WebDriver}","body":"using the above code but it is not working public class TestLogin{ @BeforeTest \tpublic void Setup() { \t\tWebDriverManager.chromedriver().setup(); \t\tDesiredCapabilities chrome = DesiredCapabilities.chrome(); \t\t// Error \t\t * Multiple markers at this line - DesiredCapabilities cannot be resolved - \t\t * DesiredCapabilities cannot be resolved to a type \t\t */ \t\tchrome.setJavascriptEnabled(true); \t\tchrome.setCapability(ChromeOptions.CAPABILITY, option); \t\tWebDriver driver = new ChromeDriver(option); \t\t// Error:Type mismatch: cannot convert from ChromeDriver to WebDriver}"},{"owner":{"account_id":9172580,"reputation":396,"user_id":7047364,"accept_rate":0,"display_name":"Anjani Kumar"},"score":0,"creation_date":1598461476,"post_id":57534210,"comment_id":112469322,"body_markdown":"DesiredCapabilities chrome = DesiredCapabilities.chrome(); // Error * Multiple markers at this line - DesiredCapabilities cannot be resolved - * DesiredCapabilities cannot be resolved to a type */","body":"DesiredCapabilities chrome = DesiredCapabilities.chrome(); // Error * Multiple markers at this line - DesiredCapabilities cannot be resolved - * DesiredCapabilities cannot be resolved to a type */"},{"owner":{"account_id":9172580,"reputation":396,"user_id":7047364,"accept_rate":0,"display_name":"Anjani Kumar"},"score":0,"creation_date":1598461495,"post_id":57534210,"comment_id":112469334,"body_markdown":"WebDriver driver = new ChromeDriver(option); // Error:Type mismatch: cannot convert from ChromeDriver to WebDriver}","body":"WebDriver driver = new ChromeDriver(option); // Error:Type mismatch: cannot convert from ChromeDriver to WebDriver}"}],"tags":[],"owner":{"account_id":7945919,"reputation":137,"user_id":6267432,"display_name":"S Chathuranga Jayasinghe"},"comment_count":3,"down_vote_count":2,"up_vote_count":3,"is_accepted":true,"score":1,"last_activity_date":1566026870,"creation_date":1566026870,"answer_id":57534210,"question_id":57533827,"body_markdown":"    public void WebDriverManagerTest()\r\n    {\r\n        //setup the chromedriver using WebDriverManager\r\n        WebDriverManager.chromedriver().setup();\r\n \r\n        //Create Chrome Options\r\n        ChromeOptions option = new ChromeOptions();\r\n        option.addArguments(&quot;--test-type&quot;);\r\n        option.addArguments(&quot;--disable-popup-bloacking&quot;);\r\n        DesiredCapabilities chrome = DesiredCapabilities.chrome();\r\n        chrome.setJavascriptEnabled(true);\r\n        option.setCapability(ChromeOptions.CAPABILITY, option);\r\n\r\n        //Create driver object for Chrome\r\n        WebDriver driver = new ChromeDriver(option);\r\n \r\n        //Navigate to a URL\r\n        driver.get(&quot;http://toolsqa.com&quot;);\r\n \r\n        //quit the browser\r\n        driver.quit();\r\n    }\r\n\r\nFound the answer.. Check above!","title":"How to set Chrome Options when using WebDriverManager?","body":"<pre><code>public void WebDriverManagerTest()\n{\n    //setup the chromedriver using WebDriverManager\n    WebDriverManager.chromedriver().setup();\n\n    //Create Chrome Options\n    ChromeOptions option = new ChromeOptions();\n    option.addArguments(\"--test-type\");\n    option.addArguments(\"--disable-popup-bloacking\");\n    DesiredCapabilities chrome = DesiredCapabilities.chrome();\n    chrome.setJavascriptEnabled(true);\n    option.setCapability(ChromeOptions.CAPABILITY, option);\n\n    //Create driver object for Chrome\n    WebDriver driver = new ChromeDriver(option);\n\n    //Navigate to a URL\n    driver.get(\"http://toolsqa.com\");\n\n    //quit the browser\n    driver.quit();\n}\n</code></pre>\n\n<p>Found the answer.. Check above!</p>\n"},{"tags":[],"owner":{"account_id":19222066,"reputation":9,"user_id":14045638,"display_name":"AshishKumar"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1596544591,"creation_date":1596541889,"answer_id":63246294,"question_id":57533827,"body_markdown":"This is the example code:\r\n```\r\npublic class Test1{\r\n\t\r\n\t@Test\r\n\tpublic void WebDriverManagerTest()\r\n\t{\r\n    \t//setup the chromedriver using WebDriverManager\r\n    \tWebDriverManager.chromedriver().setup();\r\n    \t//Create driver object for Chrome\r\n    \tWebDriver driver = new ChromeDriver();\r\n    \t//Navigate to a URL\r\n    \tdriver.get(&quot;http://toolsqa.com&quot;);\r\n    \t//quit the browser\r\n    \tdriver.quit();\r\n    }\r\n}\r\n```\r\n","title":"How to set Chrome Options when using WebDriverManager?","body":"<p>This is the example code:</p>\n<pre><code>public class Test1{\n    \n    @Test\n    public void WebDriverManagerTest()\n    {\n        //setup the chromedriver using WebDriverManager\n        WebDriverManager.chromedriver().setup();\n        //Create driver object for Chrome\n        WebDriver driver = new ChromeDriver();\n        //Navigate to a URL\n        driver.get(&quot;http://toolsqa.com&quot;);\n        //quit the browser\n        driver.quit();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14867822,"reputation":109,"user_id":11563660,"display_name":"ndb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640345779,"creation_date":1640345779,"answer_id":70472482,"question_id":57533827,"body_markdown":"from https://pypi.org/project/webdriver-manager/, pass it in after .install()\r\n\r\n```\r\nfrom selenium import webdriver\r\nfrom webdriver_manager.opera import OperaDriverManager\r\n\r\noptions = webdriver.ChromeOptions()\r\noptions.add_argument(&#39;allow-elevated-browser&#39;)\r\noptions.binary_location = &quot;C:\\\\Users\\\\USERNAME\\\\FOLDERLOCATION\\\\Opera\\\\VERSION\\\\opera.exe&quot;\r\n\r\ndriver = webdriver.Opera(executable_path=OperaDriverManager().install(), options=options)\r\n","title":"How to set Chrome Options when using WebDriverManager?","body":"<p>from <a href=\"https://pypi.org/project/webdriver-manager/\" rel=\"nofollow noreferrer\">https://pypi.org/project/webdriver-manager/</a>, pass it in after .install()</p>\n<pre><code>from selenium import webdriver\nfrom webdriver_manager.opera import OperaDriverManager\n\noptions = webdriver.ChromeOptions()\noptions.add_argument('allow-elevated-browser')\noptions.binary_location = &quot;C:\\\\Users\\\\USERNAME\\\\FOLDERLOCATION\\\\Opera\\\\VERSION\\\\opera.exe&quot;\n\ndriver = webdriver.Opera(executable_path=OperaDriverManager().install(), options=options)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7377225,"reputation":1389,"user_id":5615357,"accept_rate":58,"display_name":"Philippe Simo"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1664455290,"creation_date":1651739637,"answer_id":72124218,"question_id":57533827,"body_markdown":"As of WebDriverManager 5.x you can instantiate the webDriver directly via the WebDriverManager builder with additional `capabilities` this way (in java) :\r\n\r\n    WebDriver driver;\r\n    //...\r\n    ChromeOptions chromeOptions = new ChromeOptions();  \r\n\r\n    chromeOptions.addArguments(&quot;--headless&quot;);  \r\n\r\n    //...  \r\n\r\n    //chromeOptions.addArguments(&lt;another-option&gt;);  \r\n\r\n    //...  \r\n\r\n    driver = WebDriverManager.chromedriver().capabilities(chromeOptions).create();\r\n\r\nThe capabilities method take a `Capabilities` as param.   \r\nLucky we are, `ChromeOptions` implements the `Capabilities` interface.","title":"How to set Chrome Options when using WebDriverManager?","body":"<p>As of WebDriverManager 5.x you can instantiate the webDriver directly via the WebDriverManager builder with additional <code>capabilities</code> this way (in java) :</p>\n<pre><code>WebDriver driver;\n//...\nChromeOptions chromeOptions = new ChromeOptions();  \n\nchromeOptions.addArguments(&quot;--headless&quot;);  \n\n//...  \n\n//chromeOptions.addArguments(&lt;another-option&gt;);  \n\n//...  \n\ndriver = WebDriverManager.chromedriver().capabilities(chromeOptions).create();\n</code></pre>\n<p>The capabilities method take a <code>Capabilities</code> as param.<br />\nLucky we are, <code>ChromeOptions</code> implements the <code>Capabilities</code> interface.</p>\n"},{"tags":[],"owner":{"account_id":2195221,"reputation":327,"user_id":1941095,"display_name":"Suraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684748118,"creation_date":1684748118,"answer_id":76304800,"question_id":57533827,"body_markdown":"In Pom.xml add Webdriver Manager Dependancy and While Creating a browser instance you can use the below code snipped for running in incognito and without being controlled by automation.\r\n\r\n    public void setUpChromeBrowser(){\r\n\r\n      WebDriverManager.chromedriver().setup();\r\n      ChromeOptions options = new ChromeOptions();\r\n      options.setCapability(CapabilityType.ACCEPT_INSECURE_CERTS, true);\r\n      options.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);                     \r\n      options.setCapability(CapabilityType.ForSeleniumServer.ENSURING_CLEAN_SESSION, true);\r\n                        options.setCapability(CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR, UnexpectedAlertBehaviour.ACCEPT);\r\n                        options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\r\n                        options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\r\n                        options.addArguments(&quot;--no-sandbox&quot;);\r\n                        options.addArguments(&quot;--ignore-certificate-errors&quot;);\r\n                        options.addArguments(&quot;--start-maximised&quot;);\r\n                        options.addArguments(&quot;--incognito&quot;);\r\n                        options.setExperimentalOption(&quot;w3c&quot;, false);\r\n                        Map&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\r\n                        prefs.put(&quot;credentials_enable_service&quot;, false);\r\n                        prefs.put(&quot;profile.password_manager_enabled&quot;, false);\r\n                        options.setExperimentalOption(&quot;prefs&quot;, prefs);\r\n                        DesiredCapabilities capabilities = DesiredCapabilities.chrome();\r\n                        capabilities.setCapability(ChromeOptions.CAPABILITY, options);\r\n                        driver = new ChromeDriver(options);\r\n}","title":"How to set Chrome Options when using WebDriverManager?","body":"<p>In Pom.xml add Webdriver Manager Dependancy and While Creating a browser instance you can use the below code snipped for running in incognito and without being controlled by automation.</p>\n<pre><code>public void setUpChromeBrowser(){\n\n  WebDriverManager.chromedriver().setup();\n  ChromeOptions options = new ChromeOptions();\n  options.setCapability(CapabilityType.ACCEPT_INSECURE_CERTS, true);\n  options.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);                     \n  options.setCapability(CapabilityType.ForSeleniumServer.ENSURING_CLEAN_SESSION, true);\n                    options.setCapability(CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR, UnexpectedAlertBehaviour.ACCEPT);\n                    options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\n                    options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\n                    options.addArguments(&quot;--no-sandbox&quot;);\n                    options.addArguments(&quot;--ignore-certificate-errors&quot;);\n                    options.addArguments(&quot;--start-maximised&quot;);\n                    options.addArguments(&quot;--incognito&quot;);\n                    options.setExperimentalOption(&quot;w3c&quot;, false);\n                    Map&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\n                    prefs.put(&quot;credentials_enable_service&quot;, false);\n                    prefs.put(&quot;profile.password_manager_enabled&quot;, false);\n                    options.setExperimentalOption(&quot;prefs&quot;, prefs);\n                    DesiredCapabilities capabilities = DesiredCapabilities.chrome();\n                    capabilities.setCapability(ChromeOptions.CAPABILITY, options);\n                    driver = new ChromeDriver(options);\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":7945919,"reputation":137,"user_id":6267432,"display_name":"S Chathuranga Jayasinghe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11203,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":57534210,"answer_count":5,"score":11,"last_activity_date":1684748118,"creation_date":1566023193,"question_id":57533827,"body_markdown":"I&#39;m **using Web driver manager** to setup chrome driver. When setting up the driver I want to add some **chrome options?** How can I do it when using web driver manager?\r\n\r\nI checked the WebDriverManager API but couldn&#39;t find any clue..","title":"How to set Chrome Options when using WebDriverManager?","body":"<p>I'm <strong>using Web driver manager</strong> to setup chrome driver. When setting up the driver I want to add some <strong>chrome options?</strong> How can I do it when using web driver manager?</p>\n\n<p>I checked the WebDriverManager API but couldn't find any clue..</p>\n"},{"tags":["java","captions","webvtt"],"comments":[{"owner":{"account_id":2209133,"reputation":3193,"user_id":1951544,"accept_rate":60,"display_name":"zibi"},"score":0,"creation_date":1551993220,"post_id":47400909,"comment_id":96855590,"body_markdown":"have you found anything good?","body":"have you found anything good?"}],"answers":[{"tags":[],"owner":{"account_id":2018842,"reputation":398,"user_id":1805493,"display_name":"Liam Mazy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684747867,"creation_date":1684747867,"answer_id":76304772,"question_id":47400909,"body_markdown":"You can use \r\n[Subtitle library][1],  supported formats: STL EBU, TTML SMI, VTT, SRT\r\n\r\n\r\n  [1]: https://github.com/noophq/subtitle","title":"Java VTT parser/validator","body":"<p>You can use\n<a href=\"https://github.com/noophq/subtitle\" rel=\"nofollow noreferrer\">Subtitle library</a>,  supported formats: STL EBU, TTML SMI, VTT, SRT</p>\n"}],"owner":{"account_id":3727728,"reputation":11,"user_id":5696996,"display_name":"user4843"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1267,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684747867,"creation_date":1511211401,"question_id":47400909,"body_markdown":"Are there any open source VTT parser/validators libraries available for java?  \r\n\r\nWe found several for Node and Python\r\n\r\n - https://www.npmjs.com/package/webvtt\r\n - https://github.com/kickstarter/caption_crunch\r\n - https://www.npmjs.com/package/webvtt","title":"Java VTT parser/validator","body":"<p>Are there any open source VTT parser/validators libraries available for java?  </p>\n\n<p>We found several for Node and Python</p>\n\n<ul>\n<li><a href=\"https://www.npmjs.com/package/webvtt\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/webvtt</a></li>\n<li><a href=\"https://github.com/kickstarter/caption_crunch\" rel=\"nofollow noreferrer\">https://github.com/kickstarter/caption_crunch</a></li>\n<li><a href=\"https://www.npmjs.com/package/webvtt\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/webvtt</a></li>\n</ul>\n"},{"tags":["java","oracle","hash","compatibility"],"comments":[{"owner":{"account_id":2342714,"reputation":6752,"user_id":2053650,"display_name":"g00dy"},"score":0,"creation_date":1505217708,"post_id":46175376,"comment_id":79313836,"body_markdown":"Instead of trying to reproduce the function in Java, why don&#39;t you just call it from Java using a service let&#39;s say(and let it execute on the DB side).","body":"Instead of trying to reproduce the function in Java, why don&#39;t you just call it from Java using a service let&#39;s say(and let it execute on the DB side)."}],"answers":[{"tags":[],"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505218270,"creation_date":1505218270,"answer_id":46176030,"question_id":46175376,"body_markdown":"If you&#39;re fine with using [Guava][1] on the Java side, the following code should produce equal results with Oracle&#39;s `STANDARD_HASH`:\r\n\r\n    import com.google.common.base.Charsets;\r\n    import com.google.common.hash.Hashing;\r\n    ...\r\n    \r\n    String input = &quot;1234&quot;;        \r\n    String hash = Hashing.sha256()\r\n           .hashString(input, Charsets.UTF_8)\r\n           .toString()\r\n           // toString() returns the HEX value as lower-case, whereas\r\n           // Oracle&#39;s STANDARD_HASH returns an upper-cased string\r\n           .toUpperCase(); \r\n            \r\n    System.out.println(hash);\r\n\r\nThis prints out `03AC674216F3E15C761EE1A5E255F067953623C8B388B4459E13F978D7C846F4` which is the same you get in Oracle with\r\n\r\n    select STANDARD_HASH(&#39;1234&#39;,&#39;SHA256&#39;) from dual;\r\n\r\n  [1]: https://github.com/google/guava/wiki/HashingExplained","title":"Using Oracle STANDARD_HASH, reproduce the hash in JAVA","body":"<p>If you're fine with using <a href=\"https://github.com/google/guava/wiki/HashingExplained\" rel=\"nofollow noreferrer\">Guava</a> on the Java side, the following code should produce equal results with Oracle's <code>STANDARD_HASH</code>:</p>\n\n<pre><code>import com.google.common.base.Charsets;\nimport com.google.common.hash.Hashing;\n...\n\nString input = \"1234\";        \nString hash = Hashing.sha256()\n       .hashString(input, Charsets.UTF_8)\n       .toString()\n       // toString() returns the HEX value as lower-case, whereas\n       // Oracle's STANDARD_HASH returns an upper-cased string\n       .toUpperCase(); \n\nSystem.out.println(hash);\n</code></pre>\n\n<p>This prints out <code>03AC674216F3E15C761EE1A5E255F067953623C8B388B4459E13F978D7C846F4</code> which is the same you get in Oracle with</p>\n\n<pre><code>select STANDARD_HASH('1234','SHA256') from dual;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":475351,"reputation":928,"user_id":885618,"accept_rate":78,"display_name":"Oliver"},"score":0,"creation_date":1505222681,"post_id":46176591,"comment_id":79317596,"body_markdown":"Thank you very much for your support","body":"Thank you very much for your support"}],"tags":[],"owner":{"account_id":37846,"reputation":6497,"user_id":108326,"display_name":"markusk"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1684747857,"creation_date":1505219853,"answer_id":46176591,"question_id":46175376,"body_markdown":"You can do this with standard libraries. Use [java.security.MessageDigest](https://docs.oracle.com/javase/8/docs/api/java/security/Signature.html) with algorithm `SHA-256`:\r\n\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.security.MessageDigest;\r\n    import javax.xml.bind.DatatypeConverter;\r\n    ...\r\n    \r\n    String input = &quot;1234&quot;;        \r\n    byte[] hashBytes = MessageDigest.getInstance(&quot;SHA-256&quot;)\r\n            .digest(input.getBytes(StandardCharsets.UTF_8));\r\n    String hash = DatatypeConverter.printHexBinary(hashBytes);\r\n    System.out.println(hash);\r\n\r\nThis prints `03AC674216F3E15C761EE1A5E255F067953623C8B388B4459E13F978D7C846F4`, the same string that `STANDARD_HASH` would return.\r\n\r\nAs discussed in [How to convert a byte array to a hex string in Java?](https://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java), there are faster ways to convert a `byte[]` to a hex string, but `DatatypeConverter.printHexBinary()` has the benefit of being part of the standard library, and should be fine for most use cases.\r\n\r\nJava 17 added [HexFormat][1] to the standard library, which lets you replace\r\n\r\n    String hash = DatatypeConverter.printHexBinary(hashBytes);\r\n\r\nwith\r\n\r\n    String hash = HexFormat.of().withUpperCase().formatHex(hashBytes);\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html","title":"Using Oracle STANDARD_HASH, reproduce the hash in JAVA","body":"<p>You can do this with standard libraries. Use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/security/Signature.html\" rel=\"nofollow noreferrer\">java.security.MessageDigest</a> with algorithm <code>SHA-256</code>:</p>\n<pre><code>import java.nio.charset.StandardCharsets;\nimport java.security.MessageDigest;\nimport javax.xml.bind.DatatypeConverter;\n...\n\nString input = &quot;1234&quot;;        \nbyte[] hashBytes = MessageDigest.getInstance(&quot;SHA-256&quot;)\n        .digest(input.getBytes(StandardCharsets.UTF_8));\nString hash = DatatypeConverter.printHexBinary(hashBytes);\nSystem.out.println(hash);\n</code></pre>\n<p>This prints <code>03AC674216F3E15C761EE1A5E255F067953623C8B388B4459E13F978D7C846F4</code>, the same string that <code>STANDARD_HASH</code> would return.</p>\n<p>As discussed in <a href=\"https://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java\">How to convert a byte array to a hex string in Java?</a>, there are faster ways to convert a <code>byte[]</code> to a hex string, but <code>DatatypeConverter.printHexBinary()</code> has the benefit of being part of the standard library, and should be fine for most use cases.</p>\n<p>Java 17 added <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html\" rel=\"nofollow noreferrer\">HexFormat</a> to the standard library, which lets you replace</p>\n<pre><code>String hash = DatatypeConverter.printHexBinary(hashBytes);\n</code></pre>\n<p>with</p>\n<pre><code>String hash = HexFormat.of().withUpperCase().formatHex(hashBytes);\n</code></pre>\n"}],"owner":{"account_id":475351,"reputation":928,"user_id":885618,"accept_rate":78,"display_name":"Oliver"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5423,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":46176591,"answer_count":2,"score":3,"last_activity_date":1684747857,"creation_date":1505216184,"question_id":46175376,"body_markdown":"I&#39;m using the STANDARD_HASH(&#39;input&#39;,&#39;SHA256&#39;) function within Oracle to populate records with their relative hash values.\r\n\r\nThis can be reproduced by connecting to Oracle doing:\r\n\r\n    select STANDARD_HASH(&#39;1234&#39;,&#39;SHA256&#39;) \r\n    from dual\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    Table X    \r\n    Column 1, Column 1-hashed    \r\n    1234, sha512hashresult    \r\n    1234, sha512hashresult    \r\n    1234, sha512hashresult    \r\n    1234, sha512hashresult    \r\n\r\n**Now whats the question;** What do I have to do in JAVA in order to reproduce exactly the hash values which are produced by STANDARD_HASH in Oracle? Does anyone have experience with this? \r\n\r\nNote; For some reason there is no seed on the recommended Oracle hash function. Does anyone know the Default seed or how to figure this out?\r\n\r\n**Background:** What do i want to do? Populate the table within Oracle with Oracle-Default-Tools and use a Java program to receive the input, hash it and select the correct record in the table.\r\n\r\n**What i don&#39;t want**; People who tell me how I can achieve it in a different way, I need it exactly this way otherwise save your time\r\n\r\n","title":"Using Oracle STANDARD_HASH, reproduce the hash in JAVA","body":"<p>I'm using the STANDARD_HASH('input','SHA256') function within Oracle to populate records with their relative hash values.</p>\n\n<p>This can be reproduced by connecting to Oracle doing:</p>\n\n<pre><code>select STANDARD_HASH('1234','SHA256') \nfrom dual\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>Table X    \nColumn 1, Column 1-hashed    \n1234, sha512hashresult    \n1234, sha512hashresult    \n1234, sha512hashresult    \n1234, sha512hashresult    \n</code></pre>\n\n<p><strong>Now whats the question;</strong> What do I have to do in JAVA in order to reproduce exactly the hash values which are produced by STANDARD_HASH in Oracle? Does anyone have experience with this? </p>\n\n<p>Note; For some reason there is no seed on the recommended Oracle hash function. Does anyone know the Default seed or how to figure this out?</p>\n\n<p><strong>Background:</strong> What do i want to do? Populate the table within Oracle with Oracle-Default-Tools and use a Java program to receive the input, hash it and select the correct record in the table.</p>\n\n<p><strong>What i don't want</strong>; People who tell me how I can achieve it in a different way, I need it exactly this way otherwise save your time</p>\n"},{"tags":["java","spring","spring-boot","caching","spring-cache"],"comments":[{"owner":{"account_id":3583855,"reputation":150,"user_id":2991440,"display_name":"krishnan"},"score":0,"creation_date":1678408232,"post_id":75691108,"comment_id":133531537,"body_markdown":"Does annotating with @Lazy help here ?","body":"Does annotating with @Lazy help here ?"},{"owner":{"account_id":4133097,"reputation":7506,"user_id":3390417,"display_name":"John Blum"},"score":2,"creation_date":1678470708,"post_id":75691108,"comment_id":133545110,"body_markdown":"Why do you want your caching (infrastructure) components and beans to be request scoped? Are you expecting the cache to be cleared (i.e. re-created) after each request? What is your UC? Setting the `CacheManageter` bean to request scope will not accomplish that, not unless the `CacheManager` provider implementation also implemented Spring&#39;s lifecycle interfaces. This would be a very expensive operation (recreating caches on each request) depending on the caching provider in use and not even practical in a distributed context using a client/server caching topology as is often the case.","body":"Why do you want your caching (infrastructure) components and beans to be request scoped? Are you expecting the cache to be cleared (i.e. re-created) after each request? What is your UC? Setting the <code>CacheManageter</code> bean to request scope will not accomplish that, not unless the <code>CacheManager</code> provider implementation also implemented Spring&#39;s lifecycle interfaces. This would be a very expensive operation (recreating caches on each request) depending on the caching provider in use and not even practical in a distributed context using a client/server caching topology as is often the case."}],"answers":[{"tags":[],"owner":{"account_id":7154253,"reputation":11,"user_id":5467275,"display_name":"huang kangda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678414141,"creation_date":1678414141,"answer_id":75691689,"question_id":75691108,"body_markdown":"add like this in @Configuration class:\r\n\r\n     @Bean(name = DispatcherServletAutoConfiguration. DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)\r\n        public DispatcherServlet dispatcherServlet (WebMvProperties webMvcProperties) {\r\n            DispatcherServlet dispatcherServlet = new DispatcherServletO:\r\n            dispatcherServlet.setDispatchOptionsRequest(webMvcProperties.isDispatchOptionsRequest());\r\n            dispatcherServlet.setDispatchTraceRequest(webMvcProperties.isDispatchTraceRequest());\r\n            dispatcherServlet.setThrowExceptionIfNoHandlerFound(webMvProperties.isThrowExceptionIfNoHandlerFound()); \r\n            dispatcherServlet.setPublishEvents(webMvcProperties.isPublishRequestHandledEvents());\r\n            dispatcherServlet.setEnableLoggingRequestDetails(webMvcProperties.isLogRequestDetails());\r\n            dispatcherServlet.setThreadContextInheritable(true);\r\n            log. debug(&quot;init project dispatcher servlet&quot;)\r\n            return dispatcherServlet;\r\n        }\r\n\r\n\r\n    @Bean\r\n        @ConditionalOnMissingBean({RequestContextListener.class, RequestContextFilter.class})\r\n        @ConditionalOnMissingFilterBean(RequestContextFilter.class)\r\n        public RequestContextFilter requestContextFilter() {\r\n            OrderedRequestContextFilter orderedRequestContextFilter = new OrderedRequestContextFilter();\r\n            orderedRequestContextFilter.setThreadContextInheritable(true);\r\n            log.debug(&quot;init project request context filter!&quot;);\r\n            return orderedRequestContextFilter;\r\n    \r\n        }","title":"Bean request scope: No thread-bound request found on Spring Boot start","body":"<p>add like this in @Configuration class:</p>\n<pre><code> @Bean(name = DispatcherServletAutoConfiguration. DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)\n    public DispatcherServlet dispatcherServlet (WebMvProperties webMvcProperties) {\n        DispatcherServlet dispatcherServlet = new DispatcherServletO:\n        dispatcherServlet.setDispatchOptionsRequest(webMvcProperties.isDispatchOptionsRequest());\n        dispatcherServlet.setDispatchTraceRequest(webMvcProperties.isDispatchTraceRequest());\n        dispatcherServlet.setThrowExceptionIfNoHandlerFound(webMvProperties.isThrowExceptionIfNoHandlerFound()); \n        dispatcherServlet.setPublishEvents(webMvcProperties.isPublishRequestHandledEvents());\n        dispatcherServlet.setEnableLoggingRequestDetails(webMvcProperties.isLogRequestDetails());\n        dispatcherServlet.setThreadContextInheritable(true);\n        log. debug(&quot;init project dispatcher servlet&quot;)\n        return dispatcherServlet;\n    }\n\n\n@Bean\n    @ConditionalOnMissingBean({RequestContextListener.class, RequestContextFilter.class})\n    @ConditionalOnMissingFilterBean(RequestContextFilter.class)\n    public RequestContextFilter requestContextFilter() {\n        OrderedRequestContextFilter orderedRequestContextFilter = new OrderedRequestContextFilter();\n        orderedRequestContextFilter.setThreadContextInheritable(true);\n        log.debug(&quot;init project request context filter!&quot;);\n        return orderedRequestContextFilter;\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5430343,"reputation":131,"user_id":4321414,"display_name":"Julien Antony"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684747562,"creation_date":1684747562,"answer_id":76304729,"question_id":75691108,"body_markdown":"# TL;DR;\r\n```java\r\n@Bean(autowireCandidate = false)\r\n@RequestScope\r\npublic CacheManager requestCacheManager() {\r\n  return new ConcurrentMapCacheManager(&quot;myValue&quot;);\r\n}\r\n```\r\n\r\n# Explanations\r\n\r\nYou are using spring boot and actuator, which comes with [CacheMetricsAutoConfiguration](https://github.com/spring-projects/spring-boot/blob/0ca3ab7249437fcacdc7dbd3021896bc4c79c81b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/metrics/cache/CacheMetricsAutoConfiguration.java#L37).\r\nWhen autoconfiguration kicks in, [CacheMetricsRegistrarConfiguration](https://github.com/spring-projects/spring-boot/blob/0ca3ab7249437fcacdc7dbd3021896bc4c79c81b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/metrics/cache/CacheMetricsRegistrarConfiguration.java#LL53C4-L53C43) will be instanciated with\r\n\r\n```java\r\nMap&lt;String, CacheManager&gt; cacheManagers;\r\n```\r\nSpring will populate this map with all candidates of &quot;CacheManager&quot; available as dependency injection. Since our CacheManager is supposed to be request scope, it will fail on instantiation because CacheMetricsRegistrarConfiguration does not have a request context, which it can&#39;t never had.\r\n\r\nThat is also the reason why @Lazy is not helping here, the candidate are instantiated eagerly anyway by this autoconfigure.\r\n","title":"Bean request scope: No thread-bound request found on Spring Boot start","body":"<h1>TL;DR;</h1>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean(autowireCandidate = false)\n@RequestScope\npublic CacheManager requestCacheManager() {\n  return new ConcurrentMapCacheManager(&quot;myValue&quot;);\n}\n</code></pre>\n<h1>Explanations</h1>\n<p>You are using spring boot and actuator, which comes with <a href=\"https://github.com/spring-projects/spring-boot/blob/0ca3ab7249437fcacdc7dbd3021896bc4c79c81b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/metrics/cache/CacheMetricsAutoConfiguration.java#L37\" rel=\"nofollow noreferrer\">CacheMetricsAutoConfiguration</a>.\nWhen autoconfiguration kicks in, <a href=\"https://github.com/spring-projects/spring-boot/blob/0ca3ab7249437fcacdc7dbd3021896bc4c79c81b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/metrics/cache/CacheMetricsRegistrarConfiguration.java#LL53C4-L53C43\" rel=\"nofollow noreferrer\">CacheMetricsRegistrarConfiguration</a> will be instanciated with</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, CacheManager&gt; cacheManagers;\n</code></pre>\n<p>Spring will populate this map with all candidates of &quot;CacheManager&quot; available as dependency injection. Since our CacheManager is supposed to be request scope, it will fail on instantiation because CacheMetricsRegistrarConfiguration does not have a request context, which it can't never had.</p>\n<p>That is also the reason why @Lazy is not helping here, the candidate are instantiated eagerly anyway by this autoconfigure.</p>\n"}],"owner":{"account_id":2099937,"reputation":6301,"user_id":1867854,"accept_rate":44,"display_name":"mitchkman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1251,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1684747562,"creation_date":1678406389,"question_id":75691108,"body_markdown":"I am trying to instantiate a simple cache that is request-scoped.\r\n\r\n```\r\n@Configuration\r\n@EnableCaching\r\npublic class CacheConfiguration {\r\n\r\n  @Bean\r\n  @Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\r\n  public CacheManager requestCacheManager() {\r\n    return new ConcurrentMapCacheManager(&quot;myValue&quot;);\r\n  }\r\n}\r\n\r\n...\r\n\r\npublic interface MyRepository {\r\n\r\n  @Cacheable(cacheNames = &quot;myValue&quot;, cacheManager = &quot;requestCacheManager&quot;)\r\n  Integer getValue();\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI expect that the application starts up correctly, however, it fails directly at start up, without any requests happening. I am not calling `MyRepository.getValue()` any outside of the scope of a controller.\r\n\r\n\r\n```\r\n2023-03-09 15:55:02.596 ERROR 13171 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration&#39;: Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration]: Constructor threw exception; nested exception is org.springframework.beans.factory.support.ScopeNotActiveException: Error creating bean with name &#39;scopedTarget.requestCacheManager&#39;: Scope &#39;request&#39; is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:315)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:296)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1312)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301)\r\n\tat tld.company.package.MyApplication.main(MyApplication.java:12)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration]: Constructor threw exception; nested exception is org.springframework.beans.factory.support.ScopeNotActiveException: Error creating bean with name &#39;scopedTarget.requestCacheManager&#39;: Scope &#39;request&#39; is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:117)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:311)\r\n\t... 22 common frames omitted\r\nCaused by: org.springframework.beans.factory.support.ScopeNotActiveException: Error creating bean with name &#39;scopedTarget.requestCacheManager&#39;: Scope &#39;request&#39; is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:383)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:195)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy123.getCacheNames(Unknown Source)\r\n\tat org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration.bindCacheManagerToRegistry(CacheMetricsRegistrarConfiguration.java:70)\r\n\tat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\r\n\tat org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration.bindCachesToRegistry(CacheMetricsRegistrarConfiguration.java:66)\r\n\tat org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration.&lt;init&gt;(CacheMetricsRegistrarConfiguration.java:57)\r\n\tat java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:483)\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211)\r\n\t... 24 common frames omitted\r\nCaused by: java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\r\n\tat org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)\r\n\tat org.springframework.web.context.request.AbstractRequestAttributesScope.get(AbstractRequestAttributesScope.java:42)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:371)\r\n\t... 36 common frames omitted\r\n\r\n```","title":"Bean request scope: No thread-bound request found on Spring Boot start","body":"<p>I am trying to instantiate a simple cache that is request-scoped.</p>\n<pre><code>@Configuration\n@EnableCaching\npublic class CacheConfiguration {\n\n  @Bean\n  @Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\n  public CacheManager requestCacheManager() {\n    return new ConcurrentMapCacheManager(&quot;myValue&quot;);\n  }\n}\n\n...\n\npublic interface MyRepository {\n\n  @Cacheable(cacheNames = &quot;myValue&quot;, cacheManager = &quot;requestCacheManager&quot;)\n  Integer getValue();\n\n}\n\n</code></pre>\n<p>I expect that the application starts up correctly, however, it fails directly at start up, without any requests happening. I am not calling <code>MyRepository.getValue()</code> any outside of the scope of a controller.</p>\n<pre><code>2023-03-09 15:55:02.596 ERROR 13171 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration': Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration]: Constructor threw exception; nested exception is org.springframework.beans.factory.support.ScopeNotActiveException: Error creating bean with name 'scopedTarget.requestCacheManager': Scope 'request' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:315)\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:296)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301)\n    at tld.company.package.MyApplication.main(MyApplication.java:12)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577)\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration]: Constructor threw exception; nested exception is org.springframework.beans.factory.support.ScopeNotActiveException: Error creating bean with name 'scopedTarget.requestCacheManager': Scope 'request' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:117)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:311)\n    ... 22 common frames omitted\nCaused by: org.springframework.beans.factory.support.ScopeNotActiveException: Error creating bean with name 'scopedTarget.requestCacheManager': Scope 'request' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:383)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:195)\n    at jdk.proxy3/jdk.proxy3.$Proxy123.getCacheNames(Unknown Source)\n    at org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration.bindCacheManagerToRegistry(CacheMetricsRegistrarConfiguration.java:70)\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\n    at org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration.bindCachesToRegistry(CacheMetricsRegistrarConfiguration.java:66)\n    at org.springframework.boot.actuate.autoconfigure.metrics.cache.CacheMetricsRegistrarConfiguration.&lt;init&gt;(CacheMetricsRegistrarConfiguration.java:57)\n    at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:483)\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211)\n    ... 24 common frames omitted\nCaused by: java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n    at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)\n    at org.springframework.web.context.request.AbstractRequestAttributesScope.get(AbstractRequestAttributesScope.java:42)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:371)\n    ... 36 common frames omitted\n\n</code></pre>\n"},{"tags":["java","android","google-maps","android-canvas"],"comments":[{"owner":{"account_id":1738441,"reputation":1310,"user_id":1590479,"accept_rate":80,"display_name":"oli.G"},"score":0,"creation_date":1500036158,"post_id":3501126,"comment_id":77177551,"body_markdown":"As I posted in my answer, just don&#39;t moveTo() after each lineTo(), that&#39;s all there is.","body":"As I posted in my answer, just don&#39;t moveTo() after each lineTo(), that&#39;s all there is."},{"owner":{"account_id":1738441,"reputation":1310,"user_id":1590479,"accept_rate":80,"display_name":"oli.G"},"score":0,"creation_date":1500036210,"post_id":3501126,"comment_id":77177593,"body_markdown":"I know it&#39;s an old question which already has an (incorrect) accepted answer, and you also posted your final solution which works... but you&#39;re not stating why it works, and I hope my comment can save someone the time I&#39;ve just spent on this :)","body":"I know it&#39;s an old question which already has an (incorrect) accepted answer, and you also posted your final solution which works... but you&#39;re not stating why it works, and I hope my comment can save someone the time I&#39;ve just spent on this :)"}],"answers":[{"comments":[{"owner":{"account_id":1738441,"reputation":1310,"user_id":1590479,"accept_rate":80,"display_name":"oli.G"},"score":0,"creation_date":1500036126,"post_id":3501210,"comment_id":77177535,"body_markdown":"Unfortunately this does not help","body":"Unfortunately this does not help"},{"owner":{"account_id":9432099,"reputation":6329,"user_id":7062071,"accept_rate":100,"display_name":"pallav bohara"},"score":0,"creation_date":1510573855,"post_id":3501210,"comment_id":81478026,"body_markdown":"@Nicolas What to use instead of ARGB, if we have to customize color with RGB value instead of using pre-defined values?","body":"@Nicolas What to use instead of ARGB, if we have to customize color with RGB value instead of using pre-defined values?"}],"tags":[],"owner":{"account_id":181277,"reputation":983,"user_id":415159,"accept_rate":75,"display_name":"Nicolas C."},"comment_count":2,"down_vote_count":3,"up_vote_count":47,"is_accepted":true,"score":44,"last_activity_date":1282038636,"creation_date":1282038636,"answer_id":3501210,"question_id":3501126,"body_markdown":"You probably need to do something like :\r\n\r\n    Paint red = new Paint();\r\n    \r\n    red.setColor(android.graphics.Color.RED);\r\n    red.setStyle(Paint.Style.FILL);\r\n\r\nAnd use this color for your path, instead of your ARGB. Make sure the last point of your path ends on the first one, it makes sense also.\r\n\r\nTell me if it works please !","title":"How to draw a filled triangle in android canvas?","body":"<p>You probably need to do something like :</p>\n\n<pre><code>Paint red = new Paint();\n\nred.setColor(android.graphics.Color.RED);\nred.setStyle(Paint.Style.FILL);\n</code></pre>\n\n<p>And use this color for your path, instead of your ARGB. Make sure the last point of your path ends on the first one, it makes sense also.</p>\n\n<p>Tell me if it works please !</p>\n"},{"comments":[{"owner":{"account_id":97993,"reputation":90071,"user_id":265521,"accept_rate":58,"display_name":"Timmmm"},"score":7,"creation_date":1348738480,"post_id":3501643,"comment_id":17011693,"body_markdown":"I&#39;m pretty sure you don&#39;t need the last `lineTo()`. `close()` does that automatically.","body":"I&#39;m pretty sure you don&#39;t need the last <code>lineTo()</code>. <code>close()</code> does that automatically."},{"owner":{"account_id":467215,"reputation":1332,"user_id":872433,"display_name":"banxi1988"},"score":0,"creation_date":1358742037,"post_id":3501643,"comment_id":20092787,"body_markdown":"@Timmmm I&#39;ve test ,you are right,no need the last lineTo().Thank you.","body":"@Timmmm I&#39;ve test ,you are right,no need the last lineTo().Thank you."},{"owner":{"account_id":1352668,"reputation":4159,"user_id":1291812,"accept_rate":100,"display_name":"Achal Dave"},"score":0,"creation_date":1366701582,"post_id":3501643,"comment_id":23098599,"body_markdown":"Thank you so much. I don&#39;t know why I had so many issues drawing a triangle, but I&#39;ve spent the past 20 minutes with various bugs on this tiny problem.","body":"Thank you so much. I don&#39;t know why I had so many issues drawing a triangle, but I&#39;ve spent the past 20 minutes with various bugs on this tiny problem."},{"owner":{"account_id":2192217,"reputation":1362,"user_id":1938904,"accept_rate":47,"display_name":"steveh"},"score":0,"creation_date":1404998819,"post_id":3501643,"comment_id":38261302,"body_markdown":"i wonder, would this work with a series of arcTo? not sure how the arcs would be connected, since each arc is specified separately, not as a continuation of the last","body":"i wonder, would this work with a series of arcTo? not sure how the arcs would be connected, since each arc is specified separately, not as a continuation of the last"},{"owner":{"account_id":999642,"reputation":805,"user_id":1014809,"accept_rate":88,"display_name":"ZirconCode"},"score":1,"creation_date":1413446342,"post_id":3501643,"comment_id":41448726,"body_markdown":"Here&#39;s the simple method for copy-pasting (based on @Pavel&#39;s code):\nhttps://gist.github.com/ZirconCode/59cae1e2615279eafb29","body":"Here&#39;s the simple method for copy-pasting (based on @Pavel&#39;s code): <a href=\"https://gist.github.com/ZirconCode/59cae1e2615279eafb29\" rel=\"nofollow noreferrer\">gist.github.com/ZirconCode/59cae1e2615279eafb29</a>"},{"owner":{"account_id":897749,"reputation":11521,"user_id":934646,"accept_rate":73,"display_name":"Shirish Herwade"},"score":0,"creation_date":1429106479,"post_id":3501643,"comment_id":47444465,"body_markdown":"can you pleas share your whole code related to triangle drawing. I think you have extended View class, so in that case the extended class and few lines where it is used. It will help me a lot","body":"can you pleas share your whole code related to triangle drawing. I think you have extended View class, so in that case the extended class and few lines where it is used. It will help me a lot"},{"owner":{"account_id":1738441,"reputation":1310,"user_id":1590479,"accept_rate":80,"display_name":"oli.G"},"score":0,"creation_date":1500036095,"post_id":3501643,"comment_id":77177511,"body_markdown":"I would just like to point out that the reason this works is that he removed the unnecessary (and as it turns out, malicious) moveTo() calls after every lineTo().","body":"I would just like to point out that the reason this works is that he removed the unnecessary (and as it turns out, malicious) moveTo() calls after every lineTo()."},{"owner":{"account_id":10692508,"reputation":5229,"user_id":7870874,"accept_rate":70,"display_name":"Sira Lam"},"score":1,"creation_date":1522831347,"post_id":3501643,"comment_id":86300969,"body_markdown":"if you changed `path` to an instance variable, remember to call `path.reset()` after `canvas.drawPath()`.","body":"if you changed <code>path</code> to an instance variable, remember to call <code>path.reset()</code> after <code>canvas.drawPath()</code>."}],"tags":[],"owner":{"account_id":148111,"reputation":5263,"user_id":359656,"accept_rate":85,"display_name":"Pavel"},"comment_count":8,"down_vote_count":0,"up_vote_count":78,"is_accepted":false,"score":78,"last_activity_date":1374144571,"creation_date":1282042711,"answer_id":3501643,"question_id":3501126,"body_markdown":"Ok I&#39;ve done it. I&#39;m sharing this code in case someone else will need it:\r\n\r\n    super.draw(canvas, mapView, true);\r\n\t\t\r\n    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);\r\n\t\t\r\n    paint.setStrokeWidth(2);\r\n    paint.setColor(android.graphics.Color.RED);\t\t\r\n    paint.setStyle(Paint.Style.FILL_AND_STROKE);\r\n    paint.setAntiAlias(true);\r\n\t\t\r\n    Point point1_draw = new Point();\t\t\r\n    Point point2_draw = new Point();  \t\r\n    Point point3_draw = new Point();\r\n    \t\r\n    mapView.getProjection().toPixels(point1, point1_draw);\r\n    mapView.getProjection().toPixels(point2, point2_draw);\r\n    mapView.getProjection().toPixels(point3, point3_draw);\r\n\t\t\r\n    Path path = new Path();\r\n    path.setFillType(Path.FillType.EVEN_ODD);\r\n    path.moveTo(point1_draw.x,point1_draw.y);\r\n    path.lineTo(point2_draw.x,point2_draw.y);\r\n    path.lineTo(point3_draw.x,point3_draw.y);\r\n    path.lineTo(point1_draw.x,point1_draw.y);\r\n    path.close();\r\n\t\t\r\n    canvas.drawPath(path, paint);\r\n\r\n    //canvas.drawLine(point1_draw.x,point1_draw.y,point2_draw.x,point2_draw.y, paint);\r\n    \t\r\n    return true;\r\n\r\nThanks for the hint Nicolas!","title":"How to draw a filled triangle in android canvas?","body":"<p>Ok I've done it. I'm sharing this code in case someone else will need it:</p>\n\n<pre><code>super.draw(canvas, mapView, true);\n\nPaint paint = new Paint(Paint.ANTI_ALIAS_FLAG);\n\npaint.setStrokeWidth(2);\npaint.setColor(android.graphics.Color.RED);     \npaint.setStyle(Paint.Style.FILL_AND_STROKE);\npaint.setAntiAlias(true);\n\nPoint point1_draw = new Point();        \nPoint point2_draw = new Point();    \nPoint point3_draw = new Point();\n\nmapView.getProjection().toPixels(point1, point1_draw);\nmapView.getProjection().toPixels(point2, point2_draw);\nmapView.getProjection().toPixels(point3, point3_draw);\n\nPath path = new Path();\npath.setFillType(Path.FillType.EVEN_ODD);\npath.moveTo(point1_draw.x,point1_draw.y);\npath.lineTo(point2_draw.x,point2_draw.y);\npath.lineTo(point3_draw.x,point3_draw.y);\npath.lineTo(point1_draw.x,point1_draw.y);\npath.close();\n\ncanvas.drawPath(path, paint);\n\n//canvas.drawLine(point1_draw.x,point1_draw.y,point2_draw.x,point2_draw.y, paint);\n\nreturn true;\n</code></pre>\n\n<p>Thanks for the hint Nicolas!</p>\n"},{"comments":[{"owner":{"account_id":181277,"reputation":983,"user_id":415159,"accept_rate":75,"display_name":"Nicolas C."},"score":2,"creation_date":1282124434,"post_id":3509969,"comment_id":3669505,"body_markdown":"I don&#39;t think this solution handles filled shapes. (cannot test, I don&#39;t have my IDE at the moment)","body":"I don&#39;t think this solution handles filled shapes. (cannot test, I don&#39;t have my IDE at the moment)"},{"owner":{"account_id":386005,"reputation":463,"user_id":743523,"display_name":"SurlyDre"},"score":3,"creation_date":1384483342,"post_id":3509969,"comment_id":29765793,"body_markdown":"This seems like the more performant solution, but unfortunately this method is not supported on hardware-accelerated views.  You can disable hardware acceleration, but then you lose its performance gains: http://developer.android.com/guide/topics/graphics/hardware-accel.html","body":"This seems like the more performant solution, but unfortunately this method is not supported on hardware-accelerated views.  You can disable hardware acceleration, but then you lose its performance gains: <a href=\"http://developer.android.com/guide/topics/graphics/hardware-accel.html\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/graphics/hardware-accel.h&zwnj;&#8203;tml</a>"}],"tags":[],"owner":{"account_id":178544,"reputation":480,"user_id":410585,"display_name":"GBouerat"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1374145075,"creation_date":1282117867,"answer_id":3509969,"question_id":3501126,"body_markdown":"you can also use vertice : \r\n\r\n    private static final int verticesColors[] = {\r\n    \tColor.LTGRAY, Color.LTGRAY, Color.LTGRAY, 0xFF000000, 0xFF000000, 0xFF000000\r\n    };\r\n    float verts[] = {\r\n    \tpoint1.x, point1.y, point2.x, point2.y,\tpoint3.x, point3.y\r\n    };\r\n    canvas.drawVertices(Canvas.VertexMode.TRIANGLES, verts.length, verts, 0, null, 0, verticesColors,\t0, null, 0, 0, new Paint());","title":"How to draw a filled triangle in android canvas?","body":"<p>you can also use vertice : </p>\n\n<pre><code>private static final int verticesColors[] = {\n    Color.LTGRAY, Color.LTGRAY, Color.LTGRAY, 0xFF000000, 0xFF000000, 0xFF000000\n};\nfloat verts[] = {\n    point1.x, point1.y, point2.x, point2.y, point3.x, point3.y\n};\ncanvas.drawVertices(Canvas.VertexMode.TRIANGLES, verts.length, verts, 0, null, 0, verticesColors,   0, null, 0, 0, new Paint());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3203236,"reputation":5435,"user_id":2704885,"accept_rate":56,"display_name":"Boldijar Paul"},"score":1,"creation_date":1412262535,"post_id":10497398,"comment_id":41017815,"body_markdown":"This is working! Don&#39;t forget to use paint.setAntiAlias(true) in order to get a smooth triangle.","body":"This is working! Don&#39;t forget to use paint.setAntiAlias(true) in order to get a smooth triangle."},{"owner":{"account_id":17528,"reputation":1671,"user_id":39319,"accept_rate":60,"display_name":"PsiX"},"score":2,"creation_date":1418895835,"post_id":10497398,"comment_id":43513845,"body_markdown":"What is the drawVertices call for?","body":"What is the drawVertices call for?"}],"tags":[],"owner":{"account_id":1430389,"reputation":3996,"user_id":1352919,"display_name":"Fakhar"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1374144262,"creation_date":1336475207,"answer_id":10497398,"question_id":3501126,"body_markdown":"    private void drawArrows(Point[] point, Canvas canvas, Paint paint) {\r\n    \t\t\r\n        float [] points  = new float[8];    \t\t \r\n        points[0] = point[0].x;    \t \r\n        points[1] = point[0].y;    \t \r\n        points[2] = point[1].x;    \t \r\n        points[3] = point[1].y;      \t\r\n        points[4] = point[2].x;    \t \r\n        points[5] = point[2].y;    \t     \t \r\n        points[6] = point[0].x;    \t \r\n        points[7] = point[0].y;\r\n    \t\t\r\n        canvas.drawVertices(VertexMode.TRIANGLES, 8, points, 0, null, 0, null, 0, null, 0, 0, paint);\r\n    \tPath path = new Path();\r\n    \tpath.moveTo(point[0].x , point[0].y);\r\n    \tpath.lineTo(point[1].x,point[1].y);\r\n     \tpath.lineTo(point[2].x,point[2].y);\r\n    \tcanvas.drawPath(path,paint);\r\n    \t\t\r\n    }","title":"How to draw a filled triangle in android canvas?","body":"<pre><code>private void drawArrows(Point[] point, Canvas canvas, Paint paint) {\n\n    float [] points  = new float[8];             \n    points[0] = point[0].x;      \n    points[1] = point[0].y;      \n    points[2] = point[1].x;      \n    points[3] = point[1].y;         \n    points[4] = point[2].x;      \n    points[5] = point[2].y;              \n    points[6] = point[0].x;      \n    points[7] = point[0].y;\n\n    canvas.drawVertices(VertexMode.TRIANGLES, 8, points, 0, null, 0, null, 0, null, 0, 0, paint);\n    Path path = new Path();\n    path.moveTo(point[0].x , point[0].y);\n    path.lineTo(point[1].x,point[1].y);\n    path.lineTo(point[2].x,point[2].y);\n    canvas.drawPath(path,paint);\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2980596,"reputation":4200,"user_id":2991983,"accept_rate":36,"display_name":"Pranav"},"score":0,"creation_date":1444041384,"post_id":27231954,"comment_id":53717892,"body_markdown":"I dont have 3 point but have only one point x nad y how can i draw a triangle from that point.","body":"I dont have 3 point but have only one point x nad y how can i draw a triangle from that point."}],"tags":[],"owner":{"account_id":2893710,"reputation":480,"user_id":2481934,"display_name":"kaftanati"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1417448739,"creation_date":1417448739,"answer_id":27231954,"question_id":3501126,"body_markdown":"You need remove path.moveTo after first initial.\r\n\r\n    Path path = new Path();\r\n    path.moveTo(point1_returned.x, point1_returned.y);\r\n    path.lineTo(point2_returned.x, point2_returned.y);\r\n    path.lineTo(point3_returned.x, point3_returned.y);\r\n    path.lineTo(point1_returned.x, point1_returned.y);\r\n    path.close();","title":"How to draw a filled triangle in android canvas?","body":"<p>You need remove path.moveTo after first initial.</p>\n\n<pre><code>Path path = new Path();\npath.moveTo(point1_returned.x, point1_returned.y);\npath.lineTo(point2_returned.x, point2_returned.y);\npath.lineTo(point3_returned.x, point3_returned.y);\npath.lineTo(point1_returned.x, point1_returned.y);\npath.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15164,"reputation":23711,"user_id":31751,"accept_rate":80,"display_name":"scottyab"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1457456783,"creation_date":1457456783,"answer_id":35873562,"question_id":3501126,"body_markdown":"Using @Pavel&#39;s answer as guide, here&#39;s a helper method if you don&#39;t have the points but have start x,y and height and width. Also can draw inverted/upside down - which is useful for me as it was used as end of vertical barchart. \r\n\r\n     private void drawTriangle(int x, int y, int width, int height, boolean inverted, Paint paint, Canvas canvas){\r\n    \r\n            Point p1 = new Point(x,y);\r\n            int pointX = x + width/2;\r\n            int pointY = inverted?  y + height : y - height;\r\n    \r\n            Point p2 = new Point(pointX,pointY);\r\n            Point p3 = new Point(x+width,y);\r\n    \r\n    \r\n            Path path = new Path();\r\n            path.setFillType(Path.FillType.EVEN_ODD);\r\n            path.moveTo(p1.x,p1.y);\r\n            path.lineTo(p2.x,p2.y);\r\n            path.lineTo(p3.x,p3.y);\r\n            path.close();\r\n    \r\n            canvas.drawPath(path, paint);\r\n        }\r\n","title":"How to draw a filled triangle in android canvas?","body":"<p>Using @Pavel's answer as guide, here's a helper method if you don't have the points but have start x,y and height and width. Also can draw inverted/upside down - which is useful for me as it was used as end of vertical barchart. </p>\n\n<pre><code> private void drawTriangle(int x, int y, int width, int height, boolean inverted, Paint paint, Canvas canvas){\n\n        Point p1 = new Point(x,y);\n        int pointX = x + width/2;\n        int pointY = inverted?  y + height : y - height;\n\n        Point p2 = new Point(pointX,pointY);\n        Point p3 = new Point(x+width,y);\n\n\n        Path path = new Path();\n        path.setFillType(Path.FillType.EVEN_ODD);\n        path.moveTo(p1.x,p1.y);\n        path.lineTo(p2.x,p2.y);\n        path.lineTo(p3.x,p3.y);\n        path.close();\n\n        canvas.drawPath(path, paint);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4727728,"reputation":2172,"user_id":6579192,"accept_rate":50,"display_name":"Daniel Nyamasyo"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1684745863,"creation_date":1483267977,"answer_id":41414932,"question_id":3501126,"body_markdown":" \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nthis function shows how to create a triangle from bitmap. That is, create triangular shaped cropped image.\r\n\r\n     public static Bitmap getTriangleBitmap(Bitmap bitmap, int radius) {\r\n            Bitmap finalBitmap;\r\n            if (bitmap.getWidth() != radius || bitmap.getHeight() != radius)\r\n                finalBitmap = Bitmap.createScaledBitmap(bitmap, radius, radius,\r\n                        false);\r\n            else\r\n                finalBitmap = bitmap;\r\n            Bitmap output = Bitmap.createBitmap(finalBitmap.getWidth(),\r\n                    finalBitmap.getHeight(), Bitmap.Config.ARGB_8888);\r\n            Canvas canvas = new Canvas(output);\r\n    \r\n            Paint paint = new Paint();\r\n            final Rect rect = new Rect(0, 0, finalBitmap.getWidth(),\r\n                    finalBitmap.getHeight());\r\n    \r\n            Point point1_draw = new Point(75, 0);\r\n            Point point2_draw = new Point(0, 180);\r\n            Point point3_draw = new Point(180, 180);\r\n    \r\n            Path path = new Path();\r\n            path.moveTo(point1_draw.x, point1_draw.y);\r\n            path.lineTo(point2_draw.x, point2_draw.y);\r\n            path.lineTo(point3_draw.x, point3_draw.y);\r\n            path.lineTo(point1_draw.x, point1_draw.y);\r\n            path.close();\r\n            canvas.drawARGB(0, 0, 0, 0);\r\n            paint.setColor(Color.parseColor(&quot;#BAB399&quot;));\r\n            canvas.drawPath(path, paint);\r\n            paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));\r\n            canvas.drawBitmap(finalBitmap, rect, rect, paint);\r\n    \r\n            return output;\r\n        }\r\n\r\nThe function above returns a triangular image drawn on canvas.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zMtSz.jpg","title":"How to draw a filled triangle in android canvas?","body":"<p><a href=\"https://i.stack.imgur.com/zMtSz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zMtSz.jpg\" alt=\"enter image description here\" /></a></p>\n<p>this function shows how to create a triangle from bitmap. That is, create triangular shaped cropped image.</p>\n<pre><code> public static Bitmap getTriangleBitmap(Bitmap bitmap, int radius) {\n        Bitmap finalBitmap;\n        if (bitmap.getWidth() != radius || bitmap.getHeight() != radius)\n            finalBitmap = Bitmap.createScaledBitmap(bitmap, radius, radius,\n                    false);\n        else\n            finalBitmap = bitmap;\n        Bitmap output = Bitmap.createBitmap(finalBitmap.getWidth(),\n                finalBitmap.getHeight(), Bitmap.Config.ARGB_8888);\n        Canvas canvas = new Canvas(output);\n\n        Paint paint = new Paint();\n        final Rect rect = new Rect(0, 0, finalBitmap.getWidth(),\n                finalBitmap.getHeight());\n\n        Point point1_draw = new Point(75, 0);\n        Point point2_draw = new Point(0, 180);\n        Point point3_draw = new Point(180, 180);\n\n        Path path = new Path();\n        path.moveTo(point1_draw.x, point1_draw.y);\n        path.lineTo(point2_draw.x, point2_draw.y);\n        path.lineTo(point3_draw.x, point3_draw.y);\n        path.lineTo(point1_draw.x, point1_draw.y);\n        path.close();\n        canvas.drawARGB(0, 0, 0, 0);\n        paint.setColor(Color.parseColor(&quot;#BAB399&quot;));\n        canvas.drawPath(path, paint);\n        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));\n        canvas.drawBitmap(finalBitmap, rect, rect, paint);\n\n        return output;\n    }\n</code></pre>\n<p>The function above returns a triangular image drawn on canvas.</p>\n"},{"comments":[{"owner":{"account_id":3662174,"reputation":1052,"user_id":3051660,"accept_rate":50,"display_name":"Angad Singh"},"score":0,"creation_date":1536043718,"post_id":45103045,"comment_id":91270261,"body_markdown":"You should have added a comment for this. This isn&#39;t an answer.","body":"You should have added a comment for this. This isn&#39;t an answer."}],"tags":[],"owner":{"account_id":1738441,"reputation":1310,"user_id":1590479,"accept_rate":80,"display_name":"oli.G"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1500036316,"creation_date":1500035347,"answer_id":45103045,"question_id":3501126,"body_markdown":"**Don&#39;t `moveTo()` after each `lineTo()`**\r\n\r\nIn other words, remove every `moveTo()` except the first one.\r\n\r\nSeriously, if I just copy-paste OP&#39;s code and remove the unnecessary `moveTo()` calls, it works.\r\n\r\nNothing else needs to be done.\r\n\r\n---\r\n\r\nEDIT: I know the OP already posted his &quot;final working solution&quot;, but he didn&#39;t state *why* it works. The actual reason was quite surprising to me, so I felt the need to add an answer.","title":"How to draw a filled triangle in android canvas?","body":"<p><strong>Don't <code>moveTo()</code> after each <code>lineTo()</code></strong></p>\n\n<p>In other words, remove every <code>moveTo()</code> except the first one.</p>\n\n<p>Seriously, if I just copy-paste OP's code and remove the unnecessary <code>moveTo()</code> calls, it works.</p>\n\n<p>Nothing else needs to be done.</p>\n\n<hr>\n\n<p>EDIT: I know the OP already posted his \"final working solution\", but he didn't state <em>why</em> it works. The actual reason was quite surprising to me, so I felt the need to add an answer.</p>\n"}],"owner":{"account_id":148111,"reputation":5263,"user_id":359656,"accept_rate":85,"display_name":"Pavel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110438,"favorite_count":0,"down_vote_count":1,"up_vote_count":96,"accepted_answer_id":3501210,"answer_count":8,"score":95,"last_activity_date":1684745863,"creation_date":1282037855,"question_id":3501126,"body_markdown":"So I&#39;m drawing this triangle in android maps using the code below in my draw method:\r\n\r\n    paint.setARGB(255, 153, 29, 29);\r\n    paint.setStyle(Paint.Style.FILL_AND_STROKE);\r\n    paint.setAntiAlias(true);\r\n\r\n    Path path = new Path();\r\n    path.moveTo(point1_returned.x, point1_returned.y);\r\n    path.lineTo(point2_returned.x, point2_returned.y);\r\n    path.moveTo(point2_returned.x, point2_returned.y);\r\n    path.lineTo(point3_returned.x, point3_returned.y);\r\n    path.moveTo(point3_returned.x, point3_returned.y);\r\n    path.lineTo(point1_returned.x, point1_returned.y);\r\n    path.close();\r\n        \t\r\n    canvas.drawPath(path, paint);\r\n\r\nThe pointX_returned are the coordinates which I&#39;m getting from the fields. They are basically latitudes and longitudes.\r\nThe result is a nice triangle but the insider is empty and therefore I can see the map. Is there a way to fill it up somehow? \r\n\r\n","title":"How to draw a filled triangle in android canvas?","body":"<p>So I'm drawing this triangle in android maps using the code below in my draw method:</p>\n\n<pre><code>paint.setARGB(255, 153, 29, 29);\npaint.setStyle(Paint.Style.FILL_AND_STROKE);\npaint.setAntiAlias(true);\n\nPath path = new Path();\npath.moveTo(point1_returned.x, point1_returned.y);\npath.lineTo(point2_returned.x, point2_returned.y);\npath.moveTo(point2_returned.x, point2_returned.y);\npath.lineTo(point3_returned.x, point3_returned.y);\npath.moveTo(point3_returned.x, point3_returned.y);\npath.lineTo(point1_returned.x, point1_returned.y);\npath.close();\n\ncanvas.drawPath(path, paint);\n</code></pre>\n\n<p>The pointX_returned are the coordinates which I'm getting from the fields. They are basically latitudes and longitudes.\nThe result is a nice triangle but the insider is empty and therefore I can see the map. Is there a way to fill it up somehow? </p>\n"},{"tags":["java","spring-boot","sentry"],"owner":{"account_id":20886137,"reputation":63,"user_id":15342690,"display_name":"Anjula Paulus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1684745582,"creation_date":1684745582,"question_id":76304472,"body_markdown":" Even though I set the traces sample rate to 0.0 so as to stop the transactions being published to sentry in the spring boot application.We would be using sentry for error reporting but not for performance monitoring. \r\n\r\nThanks in advance!\r\n \r\n    sentry:\r\n      dsn: -\r\n      traces-sample-rate: 0.0","title":"How to disable transactions being published to sentry?","body":"<p>Even though I set the traces sample rate to 0.0 so as to stop the transactions being published to sentry in the spring boot application.We would be using sentry for error reporting but not for performance monitoring.</p>\n<p>Thanks in advance!</p>\n<pre><code>sentry:\n  dsn: -\n  traces-sample-rate: 0.0\n</code></pre>\n"},{"tags":["java","arraylist","size"],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1285148425,"creation_date":1285148425,"answer_id":3767994,"question_id":3767979,"body_markdown":"As much as your available memory will allow.  There&#39;s no size limit except for the heap.\r\n","title":"How much data can a List can hold at the maximum?","body":"<p>As much as your available memory will allow.  There's no size limit except for the heap.</p>\n"},{"comments":[{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":0,"creation_date":1285148554,"post_id":3767996,"comment_id":3987467,"body_markdown":"@Bozho are you sure, i don&#39;t think it is.. if this is the case then int can also hold -ve  value","body":"@Bozho are you sure, i don&#39;t think it is.. if this is the case then int can also hold -ve  value"},{"owner":{"account_id":63571,"reputation":14881,"user_id":188107,"accept_rate":63,"display_name":"musiKk"},"score":0,"creation_date":1285148555,"post_id":3767996,"comment_id":3987468,"body_markdown":"I think that&#39;s wrong. Or else why would `Collection#size()` say: _If this collection contains more than Integer.MAX_VALUE elements, returns Integer.MAX_VALUE._ This depends on the specific implementation.","body":"I think that&#39;s wrong. Or else why would <code>Collection#size()</code> say: <i>If this collection contains more than Integer.MAX_VALUE elements, returns Integer.MAX_VALUE.</i> This depends on the specific implementation."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":1,"creation_date":1285152633,"post_id":3767996,"comment_id":3987990,"body_markdown":"According to docs the elements must fit in an array (See toArray method).","body":"According to docs the elements must fit in an array (See toArray method)."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1285153332,"post_id":3767996,"comment_id":3988071,"body_markdown":"@aioobe - the method will throw an exception, because the `size` field will be negative (due to int overflow), but the list itself will work.","body":"@aioobe - the method will throw an exception, because the <code>size</code> field will be negative (due to int overflow), but the list itself will work."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1285154365,"post_id":3767996,"comment_id":3988208,"body_markdown":"Well, depends on how you define &quot;a list that works&quot;. Is an implementation that does nothing but throwing an exception in each List-method a working list?","body":"Well, depends on how you define &quot;a list that works&quot;. Is an implementation that does nothing but throwing an exception in each List-method a working list?"},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1285154904,"post_id":3767996,"comment_id":3988293,"body_markdown":"that one no, but you know there are list implementations that don&#39;t support some operations :)","body":"that one no, but you know there are list implementations that don&#39;t support some operations :)"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1285158227,"post_id":3767996,"comment_id":3988800,"body_markdown":"hehe, ok :) In the API? So I guess the maximum size of a list depends on where you draw the line for what a correct list is :-)","body":"hehe, ok :) In the API? So I guess the maximum size of a list depends on where you draw the line for what a correct list is :-)"}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":7,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1285149223,"creation_date":1285148428,"answer_id":3767996,"question_id":3767979,"body_markdown":"It would depend on the implementation, but the limit is not defined by the `List` interface.\r\n\r\nThe interface however defines the `size()` method, which returns an `int`. \r\n\r\n&gt; Returns the number of elements in this list.  If this list contains more than `Integer.MAX_VALUE` elements, returns `Integer.MAX_VALUE`.\r\n\r\nSo, no limit, but after you reach `Integer.MAX_VALUE`, the behaviour of the list changes _a bit_\r\n\r\n`ArrayList` (which is tagged) is backed by an array, and is limited to the size of the array - i.e. `Integer.MAX_VALUE`","title":"How much data can a List can hold at the maximum?","body":"<p>It would depend on the implementation, but the limit is not defined by the <code>List</code> interface.</p>\n\n<p>The interface however defines the <code>size()</code> method, which returns an <code>int</code>. </p>\n\n<blockquote>\n  <p>Returns the number of elements in this list.  If this list contains more than <code>Integer.MAX_VALUE</code> elements, returns <code>Integer.MAX_VALUE</code>.</p>\n</blockquote>\n\n<p>So, no limit, but after you reach <code>Integer.MAX_VALUE</code>, the behaviour of the list changes <em>a bit</em></p>\n\n<p><code>ArrayList</code> (which is tagged) is backed by an array, and is limited to the size of the array - i.e. <code>Integer.MAX_VALUE</code></p>\n"},{"comments":[{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1285152605,"post_id":3767997,"comment_id":3987983,"body_markdown":"According to docs the elements must fit in an array (See toArray method).","body":"According to docs the elements must fit in an array (See toArray method)."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1618217561,"post_id":3767997,"comment_id":118526002,"body_markdown":"@aioobe One can always throw an `UnsupportedOperationException` for `toArray()`.","body":"@aioobe One can always throw an <code>UnsupportedOperationException</code> for <code>toArray()</code>."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1618296235,"post_id":3767997,"comment_id":118551667,"body_markdown":"@MCEmperor right, that&#39;s possible, since it&#39;s an unchecked exception. Note however: many `List` methods are documented to (possibly) throw `UnsupportedOperationException`. `toArray` is _not_ one of them.","body":"@MCEmperor right, that&#39;s possible, since it&#39;s an unchecked exception. Note however: many <code>List</code> methods are documented to (possibly) throw <code>UnsupportedOperationException</code>. <code>toArray</code> is <i>not</i> one of them."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1618297187,"post_id":3767997,"comment_id":118551984,"body_markdown":"@aioobe Yes, I noticed that as well. I think that&#39;s a little strange, because I think it&#39;s not up to the `List` interface how something is implemented, but to the implementing class instead. But apparently, the API designers had something different in mind.","body":"@aioobe Yes, I noticed that as well. I think that&#39;s a little strange, because I think it&#39;s not up to the <code>List</code> interface how something is implemented, but to the implementing class instead. But apparently, the API designers had something different in mind."}],"tags":[],"owner":{"account_id":32058,"reputation":6692,"user_id":88485,"accept_rate":100,"display_name":"Gerco Dries"},"comment_count":4,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1285148434,"creation_date":1285148434,"answer_id":3767997,"question_id":3767979,"body_markdown":"`java.util.List` is an interface. How much data a list can hold is dependant on the specific implementation of List you choose to use. \r\n\r\nGenerally, a List implementation can hold any number of items (If you use an indexed List, it may be limited to `Integer.MAX_VALUE` or `Long.MAX_VALUE`). As long as you don&#39;t run out of memory, the List doesn&#39;t become &quot;full&quot; or anything.","title":"How much data can a List can hold at the maximum?","body":"<p><code>java.util.List</code> is an interface. How much data a list can hold is dependant on the specific implementation of List you choose to use. </p>\n\n<p>Generally, a List implementation can hold any number of items (If you use an indexed List, it may be limited to <code>Integer.MAX_VALUE</code> or <code>Long.MAX_VALUE</code>). As long as you don't run out of memory, the List doesn't become \"full\" or anything.</p>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1462519310,"creation_date":1285148801,"answer_id":3768038,"question_id":3767979,"body_markdown":"&gt; *How much data can be added in java.util.List in Java at the maximum?*\r\n\r\nThis is very similar to [Theoretical limit for number of keys (objects) that can be stored in a HashMap?](https://stackoverflow.com/questions/4123743)\r\n\r\nThe documentation of `java.util.List` does not explicitly documented any limit on the maximum number of elements. The documentation of [`List.toArray`](http://download.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28T[]%29) however, states that ...\r\n\r\n&gt; Return an array containing **all** of the elements in this list in proper sequence (from first to last element);\r\n would have trouble implementing certain methods faithfully, such as \r\n\r\n... so strictly speaking it would not be possible to faithfully implement this method if the list had more than 2&lt;sup&gt;31&lt;/sup&gt;-1 = 2147483647 elements since that is the largest possible array.\r\n\r\nSome will argue that the documentation of `size()`...\r\n\r\n&gt; Returns the number of elements in this list. If this list contains more than `Integer.MAX_VALUE` elements, returns `Integer.MAX_VALUE`.\r\n\r\n...indicates that there is no upper limit, but this view leads to numerous inconsistencies. See [this bug report](https://bugs.openjdk.java.net/browse/JDK-8032900).\r\n\r\n&gt; *Is there any default size an array list?*\r\n\r\nIf you&#39;re referring to `ArrayList` then I&#39;d say that the default size is 0. The default *capacity* however (the number of elements you can insert, without forcing the list to reallocate memory) is 10. See the documentation of the [default constructor](http://download.oracle.com/javase/6/docs/api/java/util/ArrayList.html#ArrayList%28%29).\r\n\r\nThe size limit of `ArrayList` is `Integer.MAX_VALUE` since it&#39;s backed by an ordinary array.","title":"How much data can a List can hold at the maximum?","body":"<blockquote>\n  <p><em>How much data can be added in java.util.List in Java at the maximum?</em></p>\n</blockquote>\n\n<p>This is very similar to <a href=\"https://stackoverflow.com/questions/4123743\">Theoretical limit for number of keys (objects) that can be stored in a HashMap?</a></p>\n\n<p>The documentation of <code>java.util.List</code> does not explicitly documented any limit on the maximum number of elements. The documentation of <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28T[]%29\" rel=\"nofollow noreferrer\"><code>List.toArray</code></a> however, states that ...</p>\n\n<blockquote>\n  <p>Return an array containing <strong>all</strong> of the elements in this list in proper sequence (from first to last element);\n   would have trouble implementing certain methods faithfully, such as </p>\n</blockquote>\n\n<p>... so strictly speaking it would not be possible to faithfully implement this method if the list had more than 2<sup>31</sup>-1 = 2147483647 elements since that is the largest possible array.</p>\n\n<p>Some will argue that the documentation of <code>size()</code>...</p>\n\n<blockquote>\n  <p>Returns the number of elements in this list. If this list contains more than <code>Integer.MAX_VALUE</code> elements, returns <code>Integer.MAX_VALUE</code>.</p>\n</blockquote>\n\n<p>...indicates that there is no upper limit, but this view leads to numerous inconsistencies. See <a href=\"https://bugs.openjdk.java.net/browse/JDK-8032900\" rel=\"nofollow noreferrer\">this bug report</a>.</p>\n\n<blockquote>\n  <p><em>Is there any default size an array list?</em></p>\n</blockquote>\n\n<p>If you're referring to <code>ArrayList</code> then I'd say that the default size is 0. The default <em>capacity</em> however (the number of elements you can insert, without forcing the list to reallocate memory) is 10. See the documentation of the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/ArrayList.html#ArrayList%28%29\" rel=\"nofollow noreferrer\">default constructor</a>.</p>\n\n<p>The size limit of <code>ArrayList</code> is <code>Integer.MAX_VALUE</code> since it's backed by an ordinary array.</p>\n"},{"comments":[{"owner":{"account_id":234817,"reputation":3508,"user_id":501217,"display_name":"Kim Burgaard"},"score":9,"creation_date":1292653770,"post_id":3768057,"comment_id":4894811,"body_markdown":"What would you have size(), get(int), set(int, E) and remove(int) do for lists with more than Integer.MAX_VALUE elements? Due to those constraints, I would think the upper limit of elements will always be Integer.MAX_VALUE because the index type is imposed by the java.util.List interface.","body":"What would you have size(), get(int), set(int, E) and remove(int) do for lists with more than Integer.MAX_VALUE elements? Due to those constraints, I would think the upper limit of elements will always be Integer.MAX_VALUE because the index type is imposed by the java.util.List interface."},{"owner":{"account_id":23503,"reputation":28545,"user_id":58956,"accept_rate":91,"display_name":"gustafc"},"score":14,"creation_date":1292832280,"post_id":3768057,"comment_id":4908799,"body_markdown":"The [spec for `size()`](http://download.oracle.com/javase/1.5.0/docs/api/java/util/List.html#size%28%29) clearly says: *Returns the number of elements in this list. If this list contains more than `Integer.MAX_VALUE` elements, returns `Integer.MAX_VALUE`.* Indexing operations won&#39;t work for elements after index `Integer.MAX_VALUE`, but unless the implementation relies on indexing (which `ArrayList` does out of necessity), you could still iterate over the list, add things to it (either at the tail or before index `Integer.MAX_VALUE`), remove elements (again, not after `Integer.MAX_VALUE`), etc.","body":"The <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/util/List.html#size%28%29\" rel=\"nofollow noreferrer\">spec for <code>size()</code></a> clearly says: <i>Returns the number of elements in this list. If this list contains more than <code>Integer.MAX_VALUE</code> elements, returns <code>Integer.MAX_VALUE</code>.</i> Indexing operations won&#39;t work for elements after index <code>Integer.MAX_VALUE</code>, but unless the implementation relies on indexing (which <code>ArrayList</code> does out of necessity), you could still iterate over the list, add things to it (either at the tail or before index <code>Integer.MAX_VALUE</code>), remove elements (again, not after <code>Integer.MAX_VALUE</code>), etc."},{"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"score":0,"creation_date":1481488618,"post_id":3768057,"comment_id":69386468,"body_markdown":"I got this question wrong on a exam ( I said it was true) and according to you , its only true as a LinkedList:  `ArrayList cannot resize dynamically if you add more number of elements than its capacity.` .  Am I correct then and the exam was wrong?  (it was a ucertify.com exam)","body":"I got this question wrong on a exam ( I said it was true) and according to you , its only true as a LinkedList:  <code>ArrayList cannot resize dynamically if you add more number of elements than its capacity.</code> .  Am I correct then and the exam was wrong?  (it was a ucertify.com exam)"},{"owner":{"account_id":23503,"reputation":28545,"user_id":58956,"accept_rate":91,"display_name":"gustafc"},"score":0,"creation_date":1481705421,"post_id":3768057,"comment_id":69479744,"body_markdown":"@djangofan I&#39;m not sure what your question is, or what how the question you got wrong was phrased, but here&#39;s the deal: The `List` interface _does not_ specify a maximum size, but all implementations will be limited in some way. `ArrayList`, for example, is limited by the [maximum size of arrays](http://stackoverflow.com/a/31388054/58956), while `Collections.EMPTY_LIST` has a maximum capacity of zero elements because that&#39;s how its specification is, etc. (And all implementations are of course limited by memory available, unless they have some kind of out-of-RAM infinitely size storage).","body":"@djangofan I&#39;m not sure what your question is, or what how the question you got wrong was phrased, but here&#39;s the deal: The <code>List</code> interface <i>does not</i> specify a maximum size, but all implementations will be limited in some way. <code>ArrayList</code>, for example, is limited by the <a href=\"http://stackoverflow.com/a/31388054/58956\">maximum size of arrays</a>, while <code>Collections.EMPTY_LIST</code> has a maximum capacity of zero elements because that&#39;s how its specification is, etc. (And all implementations are of course limited by memory available, unless they have some kind of out-of-RAM infinitely size storage)."},{"owner":{"account_id":5068712,"reputation":2406,"user_id":4068123,"display_name":"Michael Sims"},"score":0,"creation_date":1674631769,"post_id":3768057,"comment_id":132753257,"body_markdown":"I&#39;m not sure that what you say about LinkedList having no element storage limits is true because when I try to do `linkedList.get(index)` and index is a long variable type, the IDE tells me that I can only use int as the index that I&#39;m looking for which means that LinkedList is also limited to 2^31 elements, no?","body":"I&#39;m not sure that what you say about LinkedList having no element storage limits is true because when I try to do <code>linkedList.get(index)</code> and index is a long variable type, the IDE tells me that I can only use int as the index that I&#39;m looking for which means that LinkedList is also limited to 2^31 elements, no?"},{"owner":{"account_id":23503,"reputation":28545,"user_id":58956,"accept_rate":91,"display_name":"gustafc"},"score":0,"creation_date":1674635276,"post_id":3768057,"comment_id":132754117,"body_markdown":"@MichaelSims This has already been discussed in comments above, see my comment from 2010-12-20.","body":"@MichaelSims This has already been discussed in comments above, see my comment from 2010-12-20."},{"owner":{"account_id":5068712,"reputation":2406,"user_id":4068123,"display_name":"Michael Sims"},"score":0,"creation_date":1684503876,"post_id":3768057,"comment_id":134531036,"body_markdown":"@gustafc - as a side note, I attempted to create a `LinkedList&lt;String&gt;` then looping from 0 to `Integer.MAX_VALUE` I tried to fill it with empty Strings `&quot;&quot;` but no matter how much memory I gave the JVM, it starts slowing to a crawl and seemingly stopping around 1 billion adds ... wanted to test the limit but no dice apparently.","body":"@gustafc - as a side note, I attempted to create a <code>LinkedList&lt;String&gt;</code> then looping from 0 to <code>Integer.MAX_VALUE</code> I tried to fill it with empty Strings <code>&quot;&quot;</code> but no matter how much memory I gave the JVM, it starts slowing to a crawl and seemingly stopping around 1 billion adds ... wanted to test the limit but no dice apparently."}],"tags":[],"owner":{"account_id":23503,"reputation":28545,"user_id":58956,"accept_rate":91,"display_name":"gustafc"},"comment_count":7,"down_vote_count":1,"up_vote_count":79,"is_accepted":true,"score":78,"last_activity_date":1684745422,"creation_date":1285148986,"answer_id":3768057,"question_id":3767979,"body_markdown":"It depends on the `List` implementation. Since you index arrays with `int`s, an `ArrayList` can&#39;t hold more than `Integer.MAX_VALUE` elements. A `LinkedList` isn&#39;t limited in the same way, though, and can contain any amount of elements. \r\n\r\n**Edit:** I realize this sounds like an endorsement of `LinkedList`. But please note that although they don&#39;t have a _theoretical_ capacity limit, [linked lists are usually an inferior choice to array-based data structures][1] because of higher memory use per element (which lowers the list&#39;s _actual_ capacity limit) and poor cache locality (because nodes are spread all over RAM). It&#39;s definitely not the data structure you want if you have more items than can be crammed into an array.\r\n\r\n  [1]: https://stackoverflow.com/a/322742/58956","title":"How much data can a List can hold at the maximum?","body":"<p>It depends on the <code>List</code> implementation. Since you index arrays with <code>int</code>s, an <code>ArrayList</code> can't hold more than <code>Integer.MAX_VALUE</code> elements. A <code>LinkedList</code> isn't limited in the same way, though, and can contain any amount of elements.</p>\n<p><strong>Edit:</strong> I realize this sounds like an endorsement of <code>LinkedList</code>. But please note that although they don't have a <em>theoretical</em> capacity limit, <a href=\"https://stackoverflow.com/a/322742/58956\">linked lists are usually an inferior choice to array-based data structures</a> because of higher memory use per element (which lowers the list's <em>actual</em> capacity limit) and poor cache locality (because nodes are spread all over RAM). It's definitely not the data structure you want if you have more items than can be crammed into an array.</p>\n"},{"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1285153968,"post_id":3768096,"comment_id":3988152,"body_markdown":"And if you try to add the eleventh element, what happens?  (Hint: It succeeds.)  Your answer is &quot;correct&quot;, since you cut &amp; pasted this out of source, but it implies a max of ten elements, which is not correct.","body":"And if you try to add the eleventh element, what happens?  (Hint: It succeeds.)  Your answer is &quot;correct&quot;, since you cut &amp; pasted this out of source, but it implies a max of ten elements, which is not correct."},{"owner":{"account_id":159523,"reputation":12477,"user_id":378968,"accept_rate":87,"display_name":"Dead Programmer"},"score":0,"creation_date":1285154781,"post_id":3768096,"comment_id":3988273,"body_markdown":"@duffymo i was trying to say when u create a ArrayList like this List l = new ArrayList();  the default size would be ten.","body":"@duffymo i was trying to say when u create a ArrayList like this List l = new ArrayList();  the default size would be ten."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":3,"creation_date":1285156267,"post_id":3768096,"comment_id":3988505,"body_markdown":"I know, but that&#39;s not what the question asked about.  It had to do with the max allowable size of an array, not the initial size.  See the difference?","body":"I know, but that&#39;s not what the question asked about.  It had to do with the max allowable size of an array, not the initial size.  See the difference?"}],"tags":[],"owner":{"account_id":159523,"reputation":12477,"user_id":378968,"accept_rate":87,"display_name":"Dead Programmer"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1285154892,"creation_date":1285149295,"answer_id":3768096,"question_id":3767979,"body_markdown":"see the code below of arraylist default it is 10 when u create \r\nList l = new ArrayList();\r\n\r\n       public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;,\r\n               Cloneable, Serializable, RandomAccess {\r\n          \r\n              private static final long serialVersionUID = 8683452581122892189L;\r\n          \r\n              private transient int firstIndex;\r\n          \r\n              private transient int lastIndex;\r\n          \r\n              private transient E[] array;\r\n          \r\n              /**\r\n               * Constructs a new instance of {@code ArrayList} with ten capacity.\r\n               */\r\n              public ArrayList() {\r\n                  this(10);\r\n              }\r\n\r\n","title":"How much data can a List can hold at the maximum?","body":"<p>see the code below of arraylist default it is 10 when u create \nList l = new ArrayList();</p>\n\n<pre><code>   public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;,\n           Cloneable, Serializable, RandomAccess {\n\n          private static final long serialVersionUID = 8683452581122892189L;\n\n          private transient int firstIndex;\n\n          private transient int lastIndex;\n\n          private transient E[] array;\n\n          /**\n           * Constructs a new instance of {@code ArrayList} with ten capacity.\n           */\n          public ArrayList() {\n              this(10);\n          }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3854465,"reputation":121,"user_id":3193782,"display_name":"Mohammad"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390476016,"creation_date":1390476016,"answer_id":21306663,"question_id":3767979,"body_markdown":"The interface however defines the size() method, which returns an int.\r\n\r\n    Returns the number of elements in this list. If this list contains more than Integer.MAX_VALUE elements, returns Integer.MAX_VALUE.\r\n\r\nSo, no limit, but after you reach Integer.MAX_VALUE, the behaviour of the list changes a bit\r\n\r\nArrayList (which is tagged) is backed by an array, and is limited to the size of the array - i.e. Integer.MAX_VALUE","title":"How much data can a List can hold at the maximum?","body":"<p>The interface however defines the size() method, which returns an int.</p>\n\n<pre><code>Returns the number of elements in this list. If this list contains more than Integer.MAX_VALUE elements, returns Integer.MAX_VALUE.\n</code></pre>\n\n<p>So, no limit, but after you reach Integer.MAX_VALUE, the behaviour of the list changes a bit</p>\n\n<p>ArrayList (which is tagged) is backed by an array, and is limited to the size of the array - i.e. Integer.MAX_VALUE</p>\n"},{"comments":[{"owner":{"account_id":4356593,"reputation":5306,"user_id":3555000,"accept_rate":68,"display_name":"Enamul Hassan"},"score":2,"creation_date":1437040103,"post_id":31450371,"comment_id":50869234,"body_markdown":"this is your thought, but it is not a discussion. answer should be on the basis of clear view and proof.","body":"this is your thought, but it is not a discussion. answer should be on the basis of clear view and proof."}],"tags":[],"owner":{"account_id":5785724,"reputation":1,"user_id":4565030,"display_name":"Oleksy Ostanin"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1437038857,"creation_date":1437038857,"answer_id":31450371,"question_id":3767979,"body_markdown":"Numbering an items in the java array should start from zero. This was i think we can have access to Integer.MAX_VALUE+1 an items.","title":"How much data can a List can hold at the maximum?","body":"<p>Numbering an items in the java array should start from zero. This was i think we can have access to Integer.MAX_VALUE+1 an items.</p>\n"}],"owner":{"account_id":115097,"reputation":1380,"user_id":302340,"accept_rate":75,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163925,"favorite_count":0,"down_vote_count":0,"up_vote_count":76,"accepted_answer_id":3768057,"answer_count":8,"score":76,"last_activity_date":1684745422,"creation_date":1285148294,"question_id":3767979,"body_markdown":"How much data can be added in java.util.List in Java at the maximum?\r\n\r\nIs there any default size of an ArrayList?","title":"How much data can a List can hold at the maximum?","body":"<p>How much data can be added in java.util.List in Java at the maximum?</p>\n\n<p>Is there any default size of an ArrayList?</p>\n"},{"tags":["java","c++","swig","auto"],"comments":[{"owner":{"account_id":5140045,"reputation":112686,"user_id":4117728,"accept_rate":91,"display_name":"463035818_is_not_an_ai"},"score":2,"creation_date":1684745406,"post_id":76304442,"comment_id":134556377,"body_markdown":"whats the advantage of not writing `const std::vector&lt;int&gt;&amp;` for the return type?","body":"whats the advantage of not writing <code>const std::vector&lt;int&gt;&amp;</code> for the return type?"},{"owner":{"account_id":175154,"reputation":65064,"user_id":404970,"display_name":"molbdnilo"},"score":0,"creation_date":1684746766,"post_id":76304442,"comment_id":134556624,"body_markdown":"You can&#39;t do that. Use explicit types. (This is a good idea anyway; as a user of `A`, I don&#39;t want to have to look at the private implementation details in order to figure out what the return type is.)","body":"You can&#39;t do that. Use explicit types. (This is a good idea anyway; as a user of <code>A</code>, I don&#39;t want to have to look at the private implementation details in order to figure out what the return type is.)"},{"owner":{"account_id":5140045,"reputation":112686,"user_id":4117728,"accept_rate":91,"display_name":"463035818_is_not_an_ai"},"score":0,"creation_date":1684746929,"post_id":76304442,"comment_id":134556670,"body_markdown":"maybe trailing return type works, tough thats more typing rather than less.","body":"maybe trailing return type works, tough thats more typing rather than less."},{"owner":{"account_id":11602809,"reputation":67,"user_id":8499430,"display_name":"AnDevi"},"score":0,"creation_date":1684747519,"post_id":76304442,"comment_id":134556818,"body_markdown":"@463035818_is_not_a_number - it has advantages but they&#39;re not significant. \nI think it&#39;s less typing, less redundancy, less work if vector inner type will change.","body":"@463035818_is_not_a_number - it has advantages but they&#39;re not significant.  I think it&#39;s less typing, less redundancy, less work if vector inner type will change."}],"owner":{"account_id":11602809,"reputation":67,"user_id":8499430,"display_name":"AnDevi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684745313,"creation_date":1684745313,"question_id":76304442,"body_markdown":"I want to write in c++ code like this and generate it&#39;s wrapper in java:\r\n```\r\nclass A() {\r\npublic:\r\n   const auto &amp; getNumbers() const { return _numbers; }\r\nprivate:\r\n   vector&lt;int&gt; _numbers; \r\n}\r\n```\r\n\r\nbut SWIG returns error (`Error: Syntax error in input(3).`) in line with auto. \r\n\r\n`const vector&lt;int&gt; &amp; getNumbers() const { return _numbers; }` works fine, but I&#39;d prefer to use `auto` syntax in this case. \r\n\r\nAnyone knows how to use `auto` with SWIG ? \r\n\r\n","title":"How to use auto return type with SWIG","body":"<p>I want to write in c++ code like this and generate it's wrapper in java:</p>\n<pre><code>class A() {\npublic:\n   const auto &amp; getNumbers() const { return _numbers; }\nprivate:\n   vector&lt;int&gt; _numbers; \n}\n</code></pre>\n<p>but SWIG returns error (<code>Error: Syntax error in input(3).</code>) in line with auto.</p>\n<p><code>const vector&lt;int&gt; &amp; getNumbers() const { return _numbers; }</code> works fine, but I'd prefer to use <code>auto</code> syntax in this case.</p>\n<p>Anyone knows how to use <code>auto</code> with SWIG ?</p>\n"},{"tags":["java","ms-word","apache-poi"],"answers":[{"comments":[{"owner":{"account_id":11317917,"reputation":51,"user_id":8299076,"display_name":"Bharath Naidu Yenumula"},"score":0,"creation_date":1684742904,"post_id":76303175,"comment_id":134555818,"body_markdown":"Hi Axel Richter. Thanks for commenting. I have created a pie chart and bar chart with apache poi and those charts were coming one after another. Edited the question and added the code. Would you please guide me how to set pie chart and bar chart side by side? Thanks again for comment.","body":"Hi Axel Richter. Thanks for commenting. I have created a pie chart and bar chart with apache poi and those charts were coming one after another. Edited the question and added the code. Would you please guide me how to set pie chart and bar chart side by side? Thanks again for comment."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1684745382,"post_id":76303175,"comment_id":134556373,"body_markdown":"@Bharath Naidu Yenumula: The answer stays the same. I have updated my example. Now it creates a bar chart and a pie chart.","body":"@Bharath Naidu Yenumula: The answer stays the same. I have updated my example. Now it creates a bar chart and a pie chart."},{"owner":{"account_id":11317917,"reputation":51,"user_id":8299076,"display_name":"Bharath Naidu Yenumula"},"score":0,"creation_date":1684834474,"post_id":76303175,"comment_id":134571495,"body_markdown":"The way you have provided the details instead of only providing the solution is commendable. Exactly what i was looking for. Solved my doubt and thank you.","body":"The way you have provided the details instead of only providing the solution is commendable. Exactly what i was looking for. Solved my doubt and thank you."},{"owner":{"account_id":11317917,"reputation":51,"user_id":8299076,"display_name":"Bharath Naidu Yenumula"},"score":0,"creation_date":1685027518,"post_id":76303175,"comment_id":134606780,"body_markdown":"Hi @Axel Richter just out of curiosity, is there any way to create chart area shape to rectangle instead of above shape. Thank you so much.","body":"Hi @Axel Richter just out of curiosity, is there any way to create chart area shape to rectangle instead of above shape. Thank you so much."},{"owner":{"account_id":11317917,"reputation":51,"user_id":8299076,"display_name":"Bharath Naidu Yenumula"},"score":0,"creation_date":1685029156,"post_id":76303175,"comment_id":134607184,"body_markdown":"Solved it from your answer to https://stackoverflow.com/questions/44255527/changing-the-shape-of-chart-generated-by-apache-poi-for-excel-sheet. Thank you for providing the details. It was very helpful.","body":"Solved it from your answer to <a href=\"https://stackoverflow.com/questions/44255527/changing-the-shape-of-chart-generated-by-apache-poi-for-excel-sheet\" title=\"changing the shape of chart generated by apache poi for excel sheet\">stackoverflow.com/questions/44255527/&hellip;</a>. Thank you for providing the details. It was very helpful."}],"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684745300,"creation_date":1684732161,"answer_id":76303175,"question_id":76289142,"body_markdown":"In a Microsoft Word document in Office Open XML format (`*.docx`), charts are embedded in the documents body. Same as pictures or other shapes too, they either are in anchored drawings or are inline with text. So far, Apache POI only supports charts inline with text. Those are in text runs (`XWPFRun`). So they are placed where the text run is placed in the document.\r\n\r\nUsing current Apache POI version `5.2.3` \r\nthere are three `XWPFDocument.createChart` methods to create `XWPFChart`. See [XWPFDocument](https://poi.apache.org/apidocs/5.0/org/apache/poi/xwpf/usermodel/XWPFDocument.html). \r\n\r\nThe first one, without parameters, creates a chart in a new text run in a new paragraph, having default size. The second one has parameters `width` and `height` and creates a chart in a new text run in a new paragraph, having the size given. The third one has parameters `run`, `width` and `height` and creates a chart in the text run given, having the size given. So using the third one, one has full control where the chart shall be placed in the text.\r\n\r\nFollowing complete example creates two charts in one paragraph in different text runs in that paragraph. So, as long not automated line breaks occur, the charts will be placed side by side.\r\n\r\n\r\n\r\n    import java.io.FileOutputStream;\r\n    import org.apache.poi.util.Units;\r\n    import org.apache.poi.xddf.usermodel.*;\r\n    import org.apache.poi.xddf.usermodel.chart.*;\r\n    import org.apache.poi.xwpf.usermodel.*;\r\n    \r\n    public class CreateWordCharts {\r\n        \r\n     private static void createBarChart(XWPFRun run, String[] categories, Double[] values, PresetColor color, \r\n      BarDirection direction, String chartTitleText, String seriesTitle, \r\n      int width, int height) throws Exception {\r\n          \r\n      // Create the chart\r\n      XWPFDocument\tdocument = run.getParent().getDocument();\r\n      XWPFChart chart = document.createChart(run, width * Units.EMU_PER_CENTIMETER, height * Units.EMU_PER_CENTIMETER);\r\n      \r\n      // Create chart data sources\r\n      XDDFDataSource&lt;String&gt; categoryDataSource = XDDFDataSourcesFactory.fromArray(categories);\r\n      XDDFNumericalDataSource&lt;Double&gt; valueDataSource = XDDFDataSourcesFactory.fromArray(values);\r\n             \r\n      // Create the category axis\r\n      XDDFCategoryAxis categoryAxis = chart.createCategoryAxis(AxisPosition.BOTTOM);\r\n      \r\n      // Create the value axis\r\n      XDDFValueAxis valueAxis = chart.createValueAxis(AxisPosition.LEFT);\r\n      \r\n      // Set how the axis cross - for example at zero point of value axis\r\n      valueAxis.setCrosses(AxisCrosses.AUTO_ZERO);\r\n      \r\n      // Set AxisCrossBetween, so the value axis crosses the category axis between the categories.\r\n      // Else first and last category is exactly on cross points and the bars are only half visible.\r\n      valueAxis.setCrossBetween(AxisCrossBetween.BETWEEN);\r\n    \r\n      // Create chart data\r\n      XDDFChartData data = chart.createData(ChartTypes.BAR, categoryAxis, valueAxis);\r\n      \r\n      // Set bar direction\r\n      ((XDDFBarChartData)data).setBarDirection(direction);   \r\n      \r\n      // Set chart title - optinal\r\n      if (chartTitleText != null &amp;&amp; !chartTitleText.isBlank())\r\n       chart.setTitleText(chartTitleText);\r\n      \r\n      // Add series\r\n      XDDFChartData.Series series = data.addSeries(categoryDataSource, valueDataSource);\r\n      \r\n      // Set series title - not optional \r\n      if (seriesTitle == null || seriesTitle.isBlank()) seriesTitle = &quot;Series1&quot;;\r\n      series.setTitle(seriesTitle, null);\r\n    \r\n      // Set series fill color - necessary for LibreOffice as this will not use default colors\r\n      solidFillSeries(series, color);\r\n    \r\n      // Plot the chart\r\n      chart.plot(data);\r\n         \r\n     }\r\n    \r\n     private static void createPieChart(XWPFRun run, String[] categories, Double[] values, byte[][] colors, \r\n      String chartTitleText, String seriesTitle, \r\n      int width, int height) throws Exception {\r\n          \r\n      // Create the chart\r\n      XWPFDocument\tdocument = run.getParent().getDocument();\r\n      XWPFChart chart = document.createChart(run, width * Units.EMU_PER_CENTIMETER, height * Units.EMU_PER_CENTIMETER);\r\n      \r\n      // Create chart data sources\r\n      XDDFDataSource&lt;String&gt; categoryDataSource = XDDFDataSourcesFactory.fromArray(categories);\r\n      XDDFNumericalDataSource&lt;Double&gt; valueDataSource = XDDFDataSourcesFactory.fromArray(values);\r\n             \r\n      // Create chart data\r\n      XDDFChartData data = chart.createData(ChartTypes.PIE, null, null);\r\n      \r\n      // Set chart title - optinal\r\n      if (chartTitleText != null &amp;&amp; !chartTitleText.isBlank())\r\n       chart.setTitleText(chartTitleText);\r\n      \r\n      // Add series\r\n      XDDFChartData.Series series = data.addSeries(categoryDataSource, valueDataSource);\r\n      \r\n      // Set series title - not optional \r\n      if (seriesTitle == null || seriesTitle.isBlank()) seriesTitle = &quot;Series1&quot;;\r\n      series.setTitle(seriesTitle, null);\r\n      \r\n      // data point colors; is necessary for showing data points in LibreOffice\r\n      int pointCount = series.getCategoryData().getPointCount();\r\n      for (int p = 0; p &lt; pointCount; p++) {\r\n       chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).addNewDPt().addNewIdx().setVal(p);\r\n       chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDPtArray(p)\r\n        .addNewSpPr().addNewSolidFill().addNewSrgbClr().setVal(colors[p]);\r\n      }\r\n    \r\n      // Plot the chart\r\n      chart.plot(data);\r\n         \r\n     }\r\n    \r\n     private static void solidFillSeries(XDDFChartData.Series series, PresetColor color) {\r\n      XDDFSolidFillProperties fill = new XDDFSolidFillProperties(XDDFColor.from(color));\r\n      XDDFShapeProperties properties = series.getShapeProperties();\r\n      if (properties == null) {\r\n       properties = new XDDFShapeProperties();\r\n      }\r\n      properties.setFillProperties(fill);\r\n      series.setShapeProperties(properties);\r\n     }\r\n        \r\n     public static void main(String[] args) throws Exception {\r\n      XWPFDocument document = new XWPFDocument();\r\n    \r\n      // Create some normal XWPF content \r\n      XWPFParagraph paragraph = document.createParagraph();\r\n      XWPFRun run = paragraph.createRun();\r\n      run.setText(&quot;Chart Examples&quot;);\r\n    \r\n      // Create paragraph for the charts\r\n      paragraph = document.createParagraph();\r\n      // Create run for text\r\n      run = paragraph.createRun();\r\n      run.setText(&quot;Chart1: &quot;);\r\n    \r\n      // Create a run to place the first chart\r\n      run = paragraph.createRun();\r\n      String[] categories = new String[]{&quot;Cat1&quot;, &quot;Cat2&quot;, &quot;Cat3&quot;, &quot;Cat4&quot;, &quot;Cat5&quot;};\r\n      Double[] values = new Double[]{3d, 5d, 2d, 4d, 1d};\r\n      createBarChart(run, categories, values, PresetColor.BLUE, BarDirection.COL, &quot;Bar Chart&quot;, &quot;Series1&quot;, 5, 5);\r\n      \r\n      // Create run for text\r\n      run = paragraph.createRun();\r\n      run.setText(&quot; Chart2: &quot;);\r\n      \r\n      // Create a run to place the second chart\r\n      run = paragraph.createRun();\r\n      categories = new String[]{&quot;Cat1&quot;, &quot;Cat2&quot;, &quot;Cat3&quot;, &quot;Cat4&quot;};\r\n      values = new Double[]{1d, 4d, 3d, 2d};\r\n      byte[][] colors = new byte[][]{\r\n       new byte[]{(byte)255,0,0}, \r\n       new byte[]{0, (byte)255,0}, \r\n       new byte[]{0,0,(byte)255}, \r\n       new byte[]{(byte)255, (byte)255, 0}, \r\n      };\r\n      createPieChart(run, categories, values, colors, &quot;Pie Chart&quot;, null, 5, 5);\r\n    \r\n      // Create paragraph below the charts\r\n      paragraph = document.createParagraph();\r\n        \r\n      // Save the document\r\n      FileOutputStream out = new FileOutputStream(&quot;./WorddocumentWithCharts.docx&quot;);\r\n      document.write(out);\r\n      out.close();\r\n      document.close();\r\n     }\r\n     \r\n    }\r\n\r\nResult:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4HMSN.png","title":"Apache POI - Set two Charts side by side on word document","body":"<p>In a Microsoft Word document in Office Open XML format (<code>*.docx</code>), charts are embedded in the documents body. Same as pictures or other shapes too, they either are in anchored drawings or are inline with text. So far, Apache POI only supports charts inline with text. Those are in text runs (<code>XWPFRun</code>). So they are placed where the text run is placed in the document.</p>\n<p>Using current Apache POI version <code>5.2.3</code>\nthere are three <code>XWPFDocument.createChart</code> methods to create <code>XWPFChart</code>. See <a href=\"https://poi.apache.org/apidocs/5.0/org/apache/poi/xwpf/usermodel/XWPFDocument.html\" rel=\"nofollow noreferrer\">XWPFDocument</a>.</p>\n<p>The first one, without parameters, creates a chart in a new text run in a new paragraph, having default size. The second one has parameters <code>width</code> and <code>height</code> and creates a chart in a new text run in a new paragraph, having the size given. The third one has parameters <code>run</code>, <code>width</code> and <code>height</code> and creates a chart in the text run given, having the size given. So using the third one, one has full control where the chart shall be placed in the text.</p>\n<p>Following complete example creates two charts in one paragraph in different text runs in that paragraph. So, as long not automated line breaks occur, the charts will be placed side by side.</p>\n<pre><code>import java.io.FileOutputStream;\nimport org.apache.poi.util.Units;\nimport org.apache.poi.xddf.usermodel.*;\nimport org.apache.poi.xddf.usermodel.chart.*;\nimport org.apache.poi.xwpf.usermodel.*;\n\npublic class CreateWordCharts {\n    \n private static void createBarChart(XWPFRun run, String[] categories, Double[] values, PresetColor color, \n  BarDirection direction, String chartTitleText, String seriesTitle, \n  int width, int height) throws Exception {\n      \n  // Create the chart\n  XWPFDocument  document = run.getParent().getDocument();\n  XWPFChart chart = document.createChart(run, width * Units.EMU_PER_CENTIMETER, height * Units.EMU_PER_CENTIMETER);\n  \n  // Create chart data sources\n  XDDFDataSource&lt;String&gt; categoryDataSource = XDDFDataSourcesFactory.fromArray(categories);\n  XDDFNumericalDataSource&lt;Double&gt; valueDataSource = XDDFDataSourcesFactory.fromArray(values);\n         \n  // Create the category axis\n  XDDFCategoryAxis categoryAxis = chart.createCategoryAxis(AxisPosition.BOTTOM);\n  \n  // Create the value axis\n  XDDFValueAxis valueAxis = chart.createValueAxis(AxisPosition.LEFT);\n  \n  // Set how the axis cross - for example at zero point of value axis\n  valueAxis.setCrosses(AxisCrosses.AUTO_ZERO);\n  \n  // Set AxisCrossBetween, so the value axis crosses the category axis between the categories.\n  // Else first and last category is exactly on cross points and the bars are only half visible.\n  valueAxis.setCrossBetween(AxisCrossBetween.BETWEEN);\n\n  // Create chart data\n  XDDFChartData data = chart.createData(ChartTypes.BAR, categoryAxis, valueAxis);\n  \n  // Set bar direction\n  ((XDDFBarChartData)data).setBarDirection(direction);   \n  \n  // Set chart title - optinal\n  if (chartTitleText != null &amp;&amp; !chartTitleText.isBlank())\n   chart.setTitleText(chartTitleText);\n  \n  // Add series\n  XDDFChartData.Series series = data.addSeries(categoryDataSource, valueDataSource);\n  \n  // Set series title - not optional \n  if (seriesTitle == null || seriesTitle.isBlank()) seriesTitle = &quot;Series1&quot;;\n  series.setTitle(seriesTitle, null);\n\n  // Set series fill color - necessary for LibreOffice as this will not use default colors\n  solidFillSeries(series, color);\n\n  // Plot the chart\n  chart.plot(data);\n     \n }\n\n private static void createPieChart(XWPFRun run, String[] categories, Double[] values, byte[][] colors, \n  String chartTitleText, String seriesTitle, \n  int width, int height) throws Exception {\n      \n  // Create the chart\n  XWPFDocument  document = run.getParent().getDocument();\n  XWPFChart chart = document.createChart(run, width * Units.EMU_PER_CENTIMETER, height * Units.EMU_PER_CENTIMETER);\n  \n  // Create chart data sources\n  XDDFDataSource&lt;String&gt; categoryDataSource = XDDFDataSourcesFactory.fromArray(categories);\n  XDDFNumericalDataSource&lt;Double&gt; valueDataSource = XDDFDataSourcesFactory.fromArray(values);\n         \n  // Create chart data\n  XDDFChartData data = chart.createData(ChartTypes.PIE, null, null);\n  \n  // Set chart title - optinal\n  if (chartTitleText != null &amp;&amp; !chartTitleText.isBlank())\n   chart.setTitleText(chartTitleText);\n  \n  // Add series\n  XDDFChartData.Series series = data.addSeries(categoryDataSource, valueDataSource);\n  \n  // Set series title - not optional \n  if (seriesTitle == null || seriesTitle.isBlank()) seriesTitle = &quot;Series1&quot;;\n  series.setTitle(seriesTitle, null);\n  \n  // data point colors; is necessary for showing data points in LibreOffice\n  int pointCount = series.getCategoryData().getPointCount();\n  for (int p = 0; p &lt; pointCount; p++) {\n   chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).addNewDPt().addNewIdx().setVal(p);\n   chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDPtArray(p)\n    .addNewSpPr().addNewSolidFill().addNewSrgbClr().setVal(colors[p]);\n  }\n\n  // Plot the chart\n  chart.plot(data);\n     \n }\n\n private static void solidFillSeries(XDDFChartData.Series series, PresetColor color) {\n  XDDFSolidFillProperties fill = new XDDFSolidFillProperties(XDDFColor.from(color));\n  XDDFShapeProperties properties = series.getShapeProperties();\n  if (properties == null) {\n   properties = new XDDFShapeProperties();\n  }\n  properties.setFillProperties(fill);\n  series.setShapeProperties(properties);\n }\n    \n public static void main(String[] args) throws Exception {\n  XWPFDocument document = new XWPFDocument();\n\n  // Create some normal XWPF content \n  XWPFParagraph paragraph = document.createParagraph();\n  XWPFRun run = paragraph.createRun();\n  run.setText(&quot;Chart Examples&quot;);\n\n  // Create paragraph for the charts\n  paragraph = document.createParagraph();\n  // Create run for text\n  run = paragraph.createRun();\n  run.setText(&quot;Chart1: &quot;);\n\n  // Create a run to place the first chart\n  run = paragraph.createRun();\n  String[] categories = new String[]{&quot;Cat1&quot;, &quot;Cat2&quot;, &quot;Cat3&quot;, &quot;Cat4&quot;, &quot;Cat5&quot;};\n  Double[] values = new Double[]{3d, 5d, 2d, 4d, 1d};\n  createBarChart(run, categories, values, PresetColor.BLUE, BarDirection.COL, &quot;Bar Chart&quot;, &quot;Series1&quot;, 5, 5);\n  \n  // Create run for text\n  run = paragraph.createRun();\n  run.setText(&quot; Chart2: &quot;);\n  \n  // Create a run to place the second chart\n  run = paragraph.createRun();\n  categories = new String[]{&quot;Cat1&quot;, &quot;Cat2&quot;, &quot;Cat3&quot;, &quot;Cat4&quot;};\n  values = new Double[]{1d, 4d, 3d, 2d};\n  byte[][] colors = new byte[][]{\n   new byte[]{(byte)255,0,0}, \n   new byte[]{0, (byte)255,0}, \n   new byte[]{0,0,(byte)255}, \n   new byte[]{(byte)255, (byte)255, 0}, \n  };\n  createPieChart(run, categories, values, colors, &quot;Pie Chart&quot;, null, 5, 5);\n\n  // Create paragraph below the charts\n  paragraph = document.createParagraph();\n    \n  // Save the document\n  FileOutputStream out = new FileOutputStream(&quot;./WorddocumentWithCharts.docx&quot;);\n  document.write(out);\n  out.close();\n  document.close();\n }\n \n}\n</code></pre>\n<p>Result:</p>\n<p><a href=\"https://i.stack.imgur.com/4HMSN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4HMSN.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":11317917,"reputation":51,"user_id":8299076,"display_name":"Bharath Naidu Yenumula"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76303175,"answer_count":1,"score":0,"last_activity_date":1684745300,"creation_date":1684499856,"question_id":76289142,"body_markdown":"Is there any way to set two charts side by side on the word document using Apache poi? I have created two charts which are coming one after another onto the word document.\r\n\r\n```\r\nimport java.io.FileOutputStream;\r\nimport org.apache.poi.util.Units;\r\nimport org.apache.poi.xddf.usermodel.chart.*;\r\nimport org.apache.poi.xwpf.usermodel.*;\r\n\r\n\r\npublic class daf {\r\n    public static void main(String[] args) throws Exception {\r\n        // Create a new Word document\r\n        XWPFDocument doc = new XWPFDocument();\r\n\r\n        \r\n\r\n        // Create a severitychart\r\n        XWPFChart severityChart = doc.createChart(10 * Units.EMU_PER_CENTIMETER, 5 * Units.EMU_PER_CENTIMETER);\r\n\r\n        // Create chart data source\r\n        String[] categories = new String[]{&quot;Critical&quot;, &quot;High&quot;, &quot;Medium&quot;,&quot;Low&quot;,&quot;Best Practice&quot;};\r\n        Double[] values = new Double[]{(double) 1,(double) 2,(double) 3,(double) 4,(double) 5};\r\n        XDDFDataSource&lt;String&gt; categoryDataSource = XDDFDataSourcesFactory.fromArray(categories);\r\n        XDDFNumericalDataSource&lt;Double&gt; valueDataSource = XDDFDataSourcesFactory.fromArray(values);\r\n\r\n        // Create chart data\r\n        XDDFPieChartData data = (XDDFPieChartData) severityChart.createData(ChartTypes.PIE, null, null);\r\n        \r\n        severityChart.setTitleText(&quot;# of Vulnerabilites by Severity&quot;);\r\n        severityChart.setTitleOverlay(false);\r\n                \r\n        XDDFChartData.Series series = data.addSeries(categoryDataSource, valueDataSource);\r\n      \r\n\r\n        // Plot the chart\r\n        severityChart.plot(data);\r\n        severityChart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).addNewDLbls().addNewShowPercent().setVal(false);;\r\n        severityChart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDLbls().addNewShowSerName().setVal(false);\r\n        severityChart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDLbls().setSeparator(&quot; - &quot;);\r\n        \r\n        \r\n\t     // Create a categorychart\r\n\t        XWPFChart categoryChart = doc.createChart(10 * Units.EMU_PER_CENTIMETER, 5 * Units.EMU_PER_CENTIMETER);\r\n\r\n\t        // Create chart data source\r\n\t        String[] categories1 = new String[]{&quot;Critical&quot;, &quot;High&quot;, &quot;Medium&quot;,&quot;Low&quot;,&quot;Best Practice&quot;};\r\n\t        Double[] values1 = new Double[]{(double) 1,(double) 2,(double) 3,(double) 4,(double) 5};\r\n\t        XDDFDataSource&lt;String&gt; categoryDataSource1 = XDDFDataSourcesFactory.fromArray(categories1);\r\n\t        XDDFNumericalDataSource&lt;Double&gt; valueDataSource1 = XDDFDataSourcesFactory.fromArray(values1);\r\n\t             \t\r\n\t     // Create the category axis\r\n\t     XDDFCategoryAxis categoryAxis = categoryChart.createCategoryAxis(AxisPosition.BOTTOM);\r\n\t     XDDFValueAxis valueAxis = categoryChart.createValueAxis(AxisPosition.LEFT);\r\n\t     \r\n\t     XDDFChartData data1 = categoryChart.createData(ChartTypes.BAR,  categoryAxis, valueAxis);\r\n\t     \r\n\t       \r\n\t        XDDFChartData.Series series1 = data1.addSeries(categoryDataSource1, valueDataSource1);\r\n\t        series1.setTitle(null); //Title should be mandatory.\r\n\t        // Plot the chart\r\n\t        categoryChart.plot(data1);\r\n\t        \r\n        // Save the document\r\n        FileOutputStream out = new FileOutputStream(&quot;chart_document.docx&quot;);\r\n        doc.write(out);\r\n        out.close();\r\n        doc.close();\r\n\r\n        System.out.println(&quot;chart created successfully!&quot;);\r\n    }\r\n}\r\n```\r\nThis code creates a pie chart and bar chart one after another. Can we modify the above code so that we can make the charts side by side?","title":"Apache POI - Set two Charts side by side on word document","body":"<p>Is there any way to set two charts side by side on the word document using Apache poi? I have created two charts which are coming one after another onto the word document.</p>\n<pre><code>import java.io.FileOutputStream;\nimport org.apache.poi.util.Units;\nimport org.apache.poi.xddf.usermodel.chart.*;\nimport org.apache.poi.xwpf.usermodel.*;\n\n\npublic class daf {\n    public static void main(String[] args) throws Exception {\n        // Create a new Word document\n        XWPFDocument doc = new XWPFDocument();\n\n        \n\n        // Create a severitychart\n        XWPFChart severityChart = doc.createChart(10 * Units.EMU_PER_CENTIMETER, 5 * Units.EMU_PER_CENTIMETER);\n\n        // Create chart data source\n        String[] categories = new String[]{&quot;Critical&quot;, &quot;High&quot;, &quot;Medium&quot;,&quot;Low&quot;,&quot;Best Practice&quot;};\n        Double[] values = new Double[]{(double) 1,(double) 2,(double) 3,(double) 4,(double) 5};\n        XDDFDataSource&lt;String&gt; categoryDataSource = XDDFDataSourcesFactory.fromArray(categories);\n        XDDFNumericalDataSource&lt;Double&gt; valueDataSource = XDDFDataSourcesFactory.fromArray(values);\n\n        // Create chart data\n        XDDFPieChartData data = (XDDFPieChartData) severityChart.createData(ChartTypes.PIE, null, null);\n        \n        severityChart.setTitleText(&quot;# of Vulnerabilites by Severity&quot;);\n        severityChart.setTitleOverlay(false);\n                \n        XDDFChartData.Series series = data.addSeries(categoryDataSource, valueDataSource);\n      \n\n        // Plot the chart\n        severityChart.plot(data);\n        severityChart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).addNewDLbls().addNewShowPercent().setVal(false);;\n        severityChart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDLbls().addNewShowSerName().setVal(false);\n        severityChart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDLbls().setSeparator(&quot; - &quot;);\n        \n        \n         // Create a categorychart\n            XWPFChart categoryChart = doc.createChart(10 * Units.EMU_PER_CENTIMETER, 5 * Units.EMU_PER_CENTIMETER);\n\n            // Create chart data source\n            String[] categories1 = new String[]{&quot;Critical&quot;, &quot;High&quot;, &quot;Medium&quot;,&quot;Low&quot;,&quot;Best Practice&quot;};\n            Double[] values1 = new Double[]{(double) 1,(double) 2,(double) 3,(double) 4,(double) 5};\n            XDDFDataSource&lt;String&gt; categoryDataSource1 = XDDFDataSourcesFactory.fromArray(categories1);\n            XDDFNumericalDataSource&lt;Double&gt; valueDataSource1 = XDDFDataSourcesFactory.fromArray(values1);\n                    \n         // Create the category axis\n         XDDFCategoryAxis categoryAxis = categoryChart.createCategoryAxis(AxisPosition.BOTTOM);\n         XDDFValueAxis valueAxis = categoryChart.createValueAxis(AxisPosition.LEFT);\n         \n         XDDFChartData data1 = categoryChart.createData(ChartTypes.BAR,  categoryAxis, valueAxis);\n         \n           \n            XDDFChartData.Series series1 = data1.addSeries(categoryDataSource1, valueDataSource1);\n            series1.setTitle(null); //Title should be mandatory.\n            // Plot the chart\n            categoryChart.plot(data1);\n            \n        // Save the document\n        FileOutputStream out = new FileOutputStream(&quot;chart_document.docx&quot;);\n        doc.write(out);\n        out.close();\n        doc.close();\n\n        System.out.println(&quot;chart created successfully!&quot;);\n    }\n}\n</code></pre>\n<p>This code creates a pie chart and bar chart one after another. Can we modify the above code so that we can make the charts side by side?</p>\n"},{"tags":["java","jakarta-ee","servlets","logging","tomcat7"],"answers":[{"comments":[{"owner":{"account_id":4183173,"reputation":1162,"user_id":3427540,"accept_rate":45,"display_name":"user3427540"},"score":1,"creation_date":1435290033,"post_id":31064219,"comment_id":50148971,"body_markdown":"`When running as a service on Windows, the console output is also caught and redirected, but the file names are different`. Where can I find these files?","body":"<code>When running as a service on Windows, the console output is also caught and redirected, but the file names are different</code>. Where can I find these files?"},{"owner":{"account_id":6132115,"reputation":202,"user_id":4781985,"display_name":"Maks"},"score":0,"creation_date":1435386955,"post_id":31064219,"comment_id":50189156,"body_markdown":"well, I&#39;m mac user, so I don&#39;t know, but you can check this: http://stackoverflow.com/questions/8362280/where-is-tomcat-console-output-on-windows","body":"well, I&#39;m mac user, so I don&#39;t know, but you can check this: <a href=\"http://stackoverflow.com/questions/8362280/where-is-tomcat-console-output-on-windows\" title=\"where is tomcat console output on windows\">stackoverflow.com/questions/8362280/&hellip;</a>"}],"tags":[],"owner":{"account_id":6132115,"reputation":202,"user_id":4781985,"display_name":"Maks"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684745201,"creation_date":1435287960,"answer_id":31064219,"question_id":31063812,"body_markdown":"https://tomcat.apache.org/tomcat-7.0-doc/logging.html\r\n\r\n&gt; The calls to `javax.servlet.ServletContext.log(...)` to write log messages are handled by internal Tomcat logging. Such messages are logged to the category named\r\n&gt; \r\n&gt; `org.apache.catalina.core.ContainerBase.[${engine}].[${host}].[${context}]`\r\n&gt;\r\n&gt;This logging is performed according to the Tomcat logging configuration. You cannot overwrite it in a web application.\r\n\r\n[Where the logs live](https://tomcat.apache.org/tomcat-7.0-doc/logging.html#Console):\r\n\r\n&gt; When running Tomcat on unixes, the console output is usually redirected to the file named `catalina.out`. The name is configurable using an environment variable.  \r\n&gt; ...  \r\n&gt; When running as a service on Windows, the console output is also caught and redirected, but the file names are different.","title":"Where does the ServletContext.log messages go in tomcat 7?","body":"<p><a href=\"https://tomcat.apache.org/tomcat-7.0-doc/logging.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-7.0-doc/logging.html</a></p>\n<blockquote>\n<p>The calls to <code>javax.servlet.ServletContext.log(...)</code> to write log messages are handled by internal Tomcat logging. Such messages are logged to the category named</p>\n<p><code>org.apache.catalina.core.ContainerBase.[${engine}].[${host}].[${context}]</code></p>\n<p>This logging is performed according to the Tomcat logging configuration. You cannot overwrite it in a web application.</p>\n</blockquote>\n<p><a href=\"https://tomcat.apache.org/tomcat-7.0-doc/logging.html#Console\" rel=\"nofollow noreferrer\">Where the logs live</a>:</p>\n<blockquote>\n<p>When running Tomcat on unixes, the console output is usually redirected to the file named <code>catalina.out</code>. The name is configurable using an environment variable.<br />\n...<br />\nWhen running as a service on Windows, the console output is also caught and redirected, but the file names are different.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1570938,"reputation":1142,"user_id":1458639,"accept_rate":69,"display_name":"Peter Clause"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1463643486,"creation_date":1463643486,"answer_id":37316813,"question_id":31063812,"body_markdown":"They will be logged to the file localhost.${today}.log.\r\n\r\nAs Maks said, ServletContext#log will logged with the category `org.apache.catalina.core.ContainerBase.` and when you look at Tomcat&#39;s logging configuration in `conf/logging.properties`, you&#39;ll see that these messages go to files with the prefix `localhost.`","title":"Where does the ServletContext.log messages go in tomcat 7?","body":"<p>They will be logged to the file localhost.${today}.log.</p>\n\n<p>As Maks said, ServletContext#log will logged with the category <code>org.apache.catalina.core.ContainerBase.</code> and when you look at Tomcat's logging configuration in <code>conf/logging.properties</code>, you'll see that these messages go to files with the prefix <code>localhost.</code></p>\n"}],"owner":{"account_id":4183173,"reputation":1162,"user_id":3427540,"accept_rate":45,"display_name":"user3427540"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6104,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1538254306,"answer_count":2,"score":3,"last_activity_date":1684745201,"creation_date":1435284923,"question_id":31063812,"body_markdown":"I am using Java 7, tomcat 7. While learning about servlet logging I wrote a simple program.\r\n\r\n    package net.codejava;\r\n\r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n\r\n    import javax.servlet.Servlet;\r\n    import javax.servlet.ServletContext;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.annotation.WebServlet;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n\r\n    /**\r\n     * Servlet implementation class LogCheck\r\n     */\r\n    @WebServlet(&quot;/LogCheck&quot;)\r\n    public class LogCheck extends HttpServlet {\r\n\tprivate static final long serialVersionUID = 1L;\r\n       \r\n    /**\r\n     * @see HttpServlet#HttpServlet()\r\n     */\r\n    public LogCheck() {\r\n        super();\r\n        // TODO Auto-generated constructor stub\r\n    }\r\n\r\n\t/**\r\n\t * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\r\n\t */\r\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t\tServletContext context = getServletContext();\r\n\t\tString par = request.getParameter(&quot;msg&quot;);\r\n\t\t\r\n\t\tif (par == null || par.equals(&quot;&quot;)){\r\n\t\t\tcontext.log(&quot;No Message received&quot;,new IllegalStateException(&quot;Missing Parameter&quot;));\r\n\t\t}else{\r\n\t\t\tcontext.log(&quot;Here is visitor&#39;s message:&quot;+par);\r\n\t\t}\r\n\t\t\r\n\t\tPrintWriter out = response.getWriter();\r\n\t\tout.println(&quot;Log Testing.&quot;);\r\n\t\t\r\n\t}\r\n\r\n    }\r\n\r\n\r\n\r\nNow I am able to see the log messages in my Eclipse console. But I do not see any files under Tomcat Home/logs folder ?\r\nBut I read that it should store the log messages in some log files. I do not see any log file in my case.\r\n\r\nAm I missing some configuraions? Please help","title":"Where does the ServletContext.log messages go in tomcat 7?","body":"<p>I am using Java 7, tomcat 7. While learning about servlet logging I wrote a simple program.</p>\n\n<pre><code>package net.codejava;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\nimport javax.servlet.Servlet;\nimport javax.servlet.ServletContext;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n/**\n * Servlet implementation class LogCheck\n */\n@WebServlet(\"/LogCheck\")\npublic class LogCheck extends HttpServlet {\nprivate static final long serialVersionUID = 1L;\n\n/**\n * @see HttpServlet#HttpServlet()\n */\npublic LogCheck() {\n    super();\n    // TODO Auto-generated constructor stub\n}\n\n/**\n * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\n */\nprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    // TODO Auto-generated method stub\n\n    ServletContext context = getServletContext();\n    String par = request.getParameter(\"msg\");\n\n    if (par == null || par.equals(\"\")){\n        context.log(\"No Message received\",new IllegalStateException(\"Missing Parameter\"));\n    }else{\n        context.log(\"Here is visitor's message:\"+par);\n    }\n\n    PrintWriter out = response.getWriter();\n    out.println(\"Log Testing.\");\n\n}\n\n}\n</code></pre>\n\n<p>Now I am able to see the log messages in my Eclipse console. But I do not see any files under Tomcat Home/logs folder ?\nBut I read that it should store the log messages in some log files. I do not see any log file in my case.</p>\n\n<p>Am I missing some configuraions? Please help</p>\n"},{"tags":["java","timeout","multithreading","timer"],"comments":[{"owner":{"account_id":99559,"reputation":17675,"user_id":268850,"accept_rate":68,"display_name":"java_geek"},"score":0,"creation_date":1266893650,"post_id":2275443,"comment_id":2283802,"body_markdown":"EDIT: Adding a bounty as i needed more clear answer.\n\nthe ExecutorService code given below does not address my problem. Why should i sleep() after executing my code? If the code is completed and the sleep() is interrupted, how can that be a timeOut?","body":"EDIT: Adding a bounty as i needed more clear answer.  the ExecutorService code given below does not address my problem. Why should i sleep() after executing my code? If the code is completed and the sleep() is interrupted, how can that be a timeOut?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":7,"creation_date":1266943987,"post_id":2275443,"comment_id":2288342,"body_markdown":"That `sleep()` was just a stub to represent &quot;long time running task&quot;. Just replace it with your real task ;)","body":"That <code>sleep()</code> was just a stub to represent &quot;long time running task&quot;. Just replace it with your real task ;)"},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":1,"creation_date":1266945327,"post_id":2275443,"comment_id":2288504,"body_markdown":"... a &quot;long time running task&quot; that happens to respond to `interrupt()` calls on its thread... not all &quot;blocking&quot; calls do, as I tried to point out in my answer. The specifics of the task you are trying to abort make a huge difference in the approach that ought to be used. More information about the task would be helpful.","body":"... a &quot;long time running task&quot; that happens to respond to <code>interrupt()</code> calls on its thread... not all &quot;blocking&quot; calls do, as I tried to point out in my answer. The specifics of the task you are trying to abort make a huge difference in the approach that ought to be used. More information about the task would be helpful."},{"owner":{"account_id":63705,"reputation":1576,"user_id":188449,"accept_rate":100,"display_name":"Elister"},"score":0,"creation_date":1267037794,"post_id":2275443,"comment_id":2298460,"body_markdown":"If these answers are not solving the problem, then I guess more details/code should help to answer.","body":"If these answers are not solving the problem, then I guess more details/code should help to answer."},{"owner":{"account_id":97538,"reputation":3909,"user_id":264540,"accept_rate":88,"display_name":"Scott Smith"},"score":0,"creation_date":1267496898,"post_id":2275443,"comment_id":2335431,"body_markdown":"These threads that you want to time-limit; are they making blocking calls, or are they in some loop where you could easily check some variable to see if it&#39;s time to quit?","body":"These threads that you want to time-limit; are they making blocking calls, or are they in some loop where you could easily check some variable to see if it&#39;s time to quit?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1338389307,"post_id":2275443,"comment_id":14081303,"body_markdown":"@java_geek: is the answer now more clear?","body":"@java_geek: is the answer now more clear?"}],"answers":[{"comments":[{"owner":{"account_id":2296998,"reputation":1114,"user_id":2018219,"accept_rate":10,"display_name":"DanielM"},"score":0,"creation_date":1661789724,"post_id":2275522,"comment_id":129849717,"body_markdown":"What if blocking the current thread is not desirable? What options would one have then?","body":"What if blocking the current thread is not desirable? What options would one have then?"}],"tags":[],"owner":{"account_id":46925,"reputation":8408,"user_id":138837,"accept_rate":60,"display_name":"Drew Wills"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1266346858,"creation_date":1266346858,"answer_id":2275522,"question_id":2275443,"body_markdown":"Consider using an instance of [ExecutorService][1].  Both `invokeAll()` and `invokeAny()` methods are available with a `timeout` parameter.  \r\n\r\nThe current thread will block until the method completes (not sure if this is desirable) either because the task(s) completed normally or the timeout was reached.  You can inspect the returned `Future`(s) to determine what happened.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html","title":"How to timeout a thread","body":"<p>Consider using an instance of <a href=\"http://java.sun.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"noreferrer\">ExecutorService</a>.  Both <code>invokeAll()</code> and <code>invokeAny()</code> methods are available with a <code>timeout</code> parameter.  </p>\n\n<p>The current thread will block until the method completes (not sure if this is desirable) either because the task(s) completed normally or the timeout was reached.  You can inspect the returned <code>Future</code>(s) to determine what happened.</p>\n"},{"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1375219717,"post_id":2275565,"comment_id":26246494,"body_markdown":"In my experience the only code not reacting to begin interrupted is blocking in native code (waiting for the operating system).","body":"In my experience the only code not reacting to begin interrupted is blocking in native code (waiting for the operating system)."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1375227483,"post_id":2275565,"comment_id":26249244,"body_markdown":"@Thorbj&#248;rnRavnAndersen I agree, but that&#39;s a lot of code. My point is that there&#39;s no general-purpose mechanism for this; you have to understand the interruption policy of the task.","body":"@Thorbj&#248;rnRavnAndersen I agree, but that&#39;s a lot of code. My point is that there&#39;s no general-purpose mechanism for this; you have to understand the interruption policy of the task."},{"owner":{"account_id":1840178,"reputation":1403,"user_id":1669747,"accept_rate":53,"display_name":"AKS"},"score":0,"creation_date":1378446250,"post_id":2275565,"comment_id":27462771,"body_markdown":"@erickson, I agree with your. To the point answer, There must be a cancellation policy defined for each task, if you are interested in stopping it in it way. Or thread should be aware of what it is supposed to do when it is interrupted. After all, interruption and stopping any thread is just a request which the target thread might accept or reject, so its better to write task keeping this in mind.","body":"@erickson, I agree with your. To the point answer, There must be a cancellation policy defined for each task, if you are interested in stopping it in it way. Or thread should be aware of what it is supposed to do when it is interrupted. After all, interruption and stopping any thread is just a request which the target thread might accept or reject, so its better to write task keeping this in mind."},{"owner":{"account_id":1277874,"reputation":740,"user_id":1232726,"accept_rate":55,"display_name":"filthy_wizard"},"score":0,"creation_date":1441979068,"post_id":2275565,"comment_id":52907712,"body_markdown":"cant executorservice opt to run the task on the calling thread? also executorservice may opt to execute the task sometime in the future?","body":"cant executorservice opt to run the task on the calling thread? also executorservice may opt to execute the task sometime in the future?"},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1441999136,"post_id":2275565,"comment_id":52919486,"body_markdown":"@user1232726 The `execute()` method of the parent interface, `Executor` may run a task in the calling thread. There&#39;s no similar statement for the `submit()` methods of `ExecutorService` that return `Future` instances. The implication of the the service is that there are worker threads that have to be cleaned up via shutdown, and that tasks are executed asynchronously. That said, there&#39;s nothing in the contract that says that the `ExecutorService` is prohibited from executing tasks in the submitting thread; those guarantees come from the implementation APIs, like `Executors` factories.","body":"@user1232726 The <code>execute()</code> method of the parent interface, <code>Executor</code> may run a task in the calling thread. There&#39;s no similar statement for the <code>submit()</code> methods of <code>ExecutorService</code> that return <code>Future</code> instances. The implication of the the service is that there are worker threads that have to be cleaned up via shutdown, and that tasks are executed asynchronously. That said, there&#39;s nothing in the contract that says that the <code>ExecutorService</code> is prohibited from executing tasks in the submitting thread; those guarantees come from the implementation APIs, like <code>Executors</code> factories."}],"tags":[],"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":5,"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1266347285,"creation_date":1266347285,"answer_id":2275565,"question_id":2275443,"body_markdown":"There isn&#39;t a 100% reliable way to do this for any old task. The task has to be written with this ability in mind.\r\n\r\nCore Java libraries like `ExecutorService` cancel asynchronous tasks with [`interrupt()`][1] calls on the worker thread. So, for example, if the task contains some sort of loop, you should be checking its [interrupt status][2] on each iteration. If the task is doing I/O operations, they should be interruptible too&amp;mdash;and setting that up can be tricky. In any case, keep in mind that code has to actively check for interrupts; setting an interrupt doesn&#39;t necessarily do anything.\r\n\r\nOf course, if your task is some simple loop, you can just check the current time at each iteration and give up when a specified timeout has elapsed. A worker thread isn&#39;t needed in that case.\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#interrupt()\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#interrupted()","title":"How to timeout a thread","body":"<p>There isn't a 100% reliable way to do this for any old task. The task has to be written with this ability in mind.</p>\n\n<p>Core Java libraries like <code>ExecutorService</code> cancel asynchronous tasks with <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#interrupt()\" rel=\"noreferrer\"><code>interrupt()</code></a> calls on the worker thread. So, for example, if the task contains some sort of loop, you should be checking its <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#interrupted()\" rel=\"noreferrer\">interrupt status</a> on each iteration. If the task is doing I/O operations, they should be interruptible too&mdash;and setting that up can be tricky. In any case, keep in mind that code has to actively check for interrupts; setting an interrupt doesn't necessarily do anything.</p>\n\n<p>Of course, if your task is some simple loop, you can just check the current time at each iteration and give up when a specified timeout has elapsed. A worker thread isn't needed in that case.</p>\n"},{"comments":[{"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"score":32,"creation_date":1364382661,"post_id":2275596,"comment_id":22220239,"body_markdown":"Replace `Thread.sleep(4000)` with some other long-running statement and the example won&#39;t work. In other words, this example would work **only** if the `Task` is designed to understand `Thread.isInterrupted()` status change.","body":"Replace <code>Thread.sleep(4000)</code> with some other long-running statement and the example won&#39;t work. In other words, this example would work <b>only</b> if the <code>Task</code> is designed to understand <code>Thread.isInterrupted()</code> status change."},{"owner":{"account_id":2534519,"reputation":366,"user_id":2202007,"accept_rate":74,"display_name":"syfantid"},"score":0,"creation_date":1456162233,"post_id":2275596,"comment_id":58808394,"body_markdown":"@BalusC I tried this approach trying to terminate my threads, but couldn&#39;t make it work. You can check it out here: http://stackoverflow.com/questions/35553420/producer-consumer-in-java-using-threads-never-terminates","body":"@BalusC I tried this approach trying to terminate my threads, but couldn&#39;t make it work. You can check it out here: <a href=\"http://stackoverflow.com/questions/35553420/producer-consumer-in-java-using-threads-never-terminates\" title=\"producer consumer in java using threads never terminates\">stackoverflow.com/questions/35553420/&hellip;</a>"},{"owner":{"account_id":276058,"reputation":156,"user_id":2080840,"accept_rate":75,"display_name":"bolei"},"score":0,"creation_date":1460661778,"post_id":2275596,"comment_id":60859590,"body_markdown":"How is InterruptedException cuased by future.cancel(true) handled?","body":"How is InterruptedException cuased by future.cancel(true) handled?"},{"owner":{"account_id":5063185,"reputation":832,"user_id":4064070,"accept_rate":50,"display_name":"ATP"},"score":1,"creation_date":1481222168,"post_id":2275596,"comment_id":69300601,"body_markdown":"n number of people have commented about the package name, and here&#39;s yet another +1 for it. That&#39;s such a nice skill to be imbibed. Thanks!","body":"n number of people have commented about the package name, and here&#39;s yet another +1 for it. That&#39;s such a nice skill to be imbibed. Thanks!"},{"owner":{"account_id":5581199,"reputation":185,"user_id":4423025,"accept_rate":69,"display_name":"Adeel Ahmad"},"score":0,"creation_date":1496243084,"post_id":2275596,"comment_id":75583398,"body_markdown":"@BalusC I have a doubt, whether the Future will execute synchronously and if it takes more than a predefined time then it would be terminated.\nElse it would execute in future some time meanwhile we are counting on time...\nThank you","body":"@BalusC I have a doubt, whether the Future will execute synchronously and if it takes more than a predefined time then it would be terminated. Else it would execute in future some time meanwhile we are counting on time... Thank you"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1496243208,"post_id":2275596,"comment_id":75583497,"body_markdown":"@Adeel: it&#39;s definitely not executed synchronously. Otherwise there&#39;s no point of this all. Perhaps you meant to ask if it&#39;s executed in parallel. Absolutely it is. Otherwise there&#39;s also no point of this all.","body":"@Adeel: it&#39;s definitely not executed synchronously. Otherwise there&#39;s no point of this all. Perhaps you meant to ask if it&#39;s executed in parallel. Absolutely it is. Otherwise there&#39;s also no point of this all."},{"owner":{"account_id":5581199,"reputation":185,"user_id":4423025,"accept_rate":69,"display_name":"Adeel Ahmad"},"score":0,"creation_date":1496245087,"post_id":2275596,"comment_id":75584842,"body_markdown":"I have a use-case of switching between two data sources in case one is taking time. Would you recommend this method? \nMy doubt is what if the method execution did not even start while breaching the timeout limit? I am confused with parallel vs async method execution.\nThanks","body":"I have a use-case of switching between two data sources in case one is taking time. Would you recommend this method?  My doubt is what if the method execution did not even start while breaching the timeout limit? I am confused with parallel vs async method execution. Thanks"},{"owner":{"account_id":5581199,"reputation":185,"user_id":4423025,"accept_rate":69,"display_name":"Adeel Ahmad"},"score":0,"creation_date":1496245788,"post_id":2275596,"comment_id":75585299,"body_markdown":"...For instance, we can execute a method async which we don&#39;t care when the response comes even if it is a parallel execution but we don&#39;t want to wait for it and we don&#39;t care when the method will start execution. But in my case, it&#39;s crucial...\nThanks","body":"...For instance, we can execute a method async which we don&#39;t care when the response comes even if it is a parallel execution but we don&#39;t want to wait for it and we don&#39;t care when the method will start execution. But in my case, it&#39;s crucial... Thanks"},{"owner":{"account_id":5581199,"reputation":185,"user_id":4423025,"accept_rate":69,"display_name":"Adeel Ahmad"},"score":0,"creation_date":1496335103,"post_id":2275596,"comment_id":75631359,"body_markdown":"@BalusC I have started another thread for my doubt. Feel free to suggest.\nhttps://stackoverflow.com/questions/44312834/switch-between-primary-to-secondary-source-on-timeout-in-java\nAppreciate your comments on it.","body":"@BalusC I have started another thread for my doubt. Feel free to suggest. <a href=\"https://stackoverflow.com/questions/44312834/switch-between-primary-to-secondary-source-on-timeout-in-java\" title=\"switch between primary to secondary source on timeout in java\">stackoverflow.com/questions/44312834/&hellip;</a> Appreciate your comments on it."},{"owner":{"account_id":39816,"reputation":3747,"user_id":115030,"display_name":"Anders Kaseorg"},"score":0,"creation_date":1535501689,"post_id":2275596,"comment_id":91085730,"body_markdown":"After `executor.shutdownNow()`, you may want to `while (true) {try {if (executor.awaitTermination(1, TimeUnit.SECONDS)) break;} catch (InterruptedException ie) {}}`, since actually stopping the task may take some time.","body":"After <code>executor.shutdownNow()</code>, you may want to <code>while (true) {try {if (executor.awaitTermination(1, TimeUnit.SECONDS)) break;} catch (InterruptedException ie) {}}</code>, since actually stopping the task may take some time."}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":10,"down_vote_count":5,"up_vote_count":406,"is_accepted":true,"score":401,"last_activity_date":1433965341,"creation_date":1266347575,"answer_id":2275596,"question_id":2275443,"body_markdown":"Indeed rather use [`ExecutorService`][1] instead of `Timer`, here&#39;s an [SSCCE][2]:\r\n\r\n    package com.stackoverflow.q2275443;\r\n    \r\n    import java.util.concurrent.Callable;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.Future;\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.concurrent.TimeoutException;\r\n    \r\n    public class Test {\r\n        public static void main(String[] args) throws Exception {\r\n            ExecutorService executor = Executors.newSingleThreadExecutor();\r\n            Future&lt;String&gt; future = executor.submit(new Task());\r\n    \r\n            try {\r\n                System.out.println(&quot;Started..&quot;);\r\n                System.out.println(future.get(3, TimeUnit.SECONDS));\r\n                System.out.println(&quot;Finished!&quot;);\r\n            } catch (TimeoutException e) {\r\n                future.cancel(true);\r\n                System.out.println(&quot;Terminated!&quot;);\r\n            }\r\n    \r\n            executor.shutdownNow();\r\n        }\r\n    }\r\n    \r\n    class Task implements Callable&lt;String&gt; {\r\n        @Override\r\n        public String call() throws Exception {\r\n            Thread.sleep(4000); // Just to demo a long running task of 4 seconds.\r\n            return &quot;Ready!&quot;;\r\n        }\r\n    }\r\n\r\nPlay a bit with the `timeout` argument in [`Future#get()`][3] method, e.g. increase it to 5 and you&#39;ll see that the thread finishes. You can intercept the timeout in the `catch (TimeoutException e)` block.\r\n\r\n**Update:** to clarify a conceptual misunderstanding, the `sleep()` is **not** required. It is just used for SSCCE/demonstration purposes. Just do **your** long running task right there in place of `sleep()`. Inside your long running task, you should be checking if the thread is not [interrupted][4] as follows:\r\n\r\n    while (!Thread.interrupted()) {\r\n        // Do your long running task here.\r\n    }\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html\r\n  [2]: http://sscce.org\r\n  [3]: http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupted()","title":"How to timeout a thread","body":"<p>Indeed rather use <a href=\"http://java.sun.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"noreferrer\"><code>ExecutorService</code></a> instead of <code>Timer</code>, here's an <a href=\"http://sscce.org\" rel=\"noreferrer\">SSCCE</a>:</p>\n\n<pre><code>package com.stackoverflow.q2275443;\n\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.TimeoutException;\n\npublic class Test {\n    public static void main(String[] args) throws Exception {\n        ExecutorService executor = Executors.newSingleThreadExecutor();\n        Future&lt;String&gt; future = executor.submit(new Task());\n\n        try {\n            System.out.println(\"Started..\");\n            System.out.println(future.get(3, TimeUnit.SECONDS));\n            System.out.println(\"Finished!\");\n        } catch (TimeoutException e) {\n            future.cancel(true);\n            System.out.println(\"Terminated!\");\n        }\n\n        executor.shutdownNow();\n    }\n}\n\nclass Task implements Callable&lt;String&gt; {\n    @Override\n    public String call() throws Exception {\n        Thread.sleep(4000); // Just to demo a long running task of 4 seconds.\n        return \"Ready!\";\n    }\n}\n</code></pre>\n\n<p>Play a bit with the <code>timeout</code> argument in <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29\" rel=\"noreferrer\"><code>Future#get()</code></a> method, e.g. increase it to 5 and you'll see that the thread finishes. You can intercept the timeout in the <code>catch (TimeoutException e)</code> block.</p>\n\n<p><strong>Update:</strong> to clarify a conceptual misunderstanding, the <code>sleep()</code> is <strong>not</strong> required. It is just used for SSCCE/demonstration purposes. Just do <strong>your</strong> long running task right there in place of <code>sleep()</code>. Inside your long running task, you should be checking if the thread is not <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupted()\" rel=\"noreferrer\">interrupted</a> as follows:</p>\n\n<pre><code>while (!Thread.interrupted()) {\n    // Do your long running task here.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":59692,"reputation":35753,"user_id":178526,"accept_rate":85,"display_name":"sfussenegger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1266943498,"creation_date":1266943498,"answer_id":2319967,"question_id":2275443,"body_markdown":"I think the answer mainly depends on the task itself.\r\n\r\n - Is it doing one task over and over again? \r\n - Is it necessary that the timeout interrupts a currently running task immediately after it expires?\r\n\r\nIf the first answer is yes and the second is no, you could keep it as simple as this:\r\n\r\n    public class Main {\r\n    \r\n        private static final class TimeoutTask extends Thread {\r\n            private final long _timeoutMs;\r\n            private Runnable _runnable;\r\n    \r\n            private TimeoutTask(long timeoutMs, Runnable runnable) {\r\n                _timeoutMs = timeoutMs;\r\n                _runnable = runnable;\r\n            }\r\n    \r\n            @Override\r\n            public void run() {\r\n                long start = System.currentTimeMillis();\r\n                while (System.currentTimeMillis() &lt; (start + _timeoutMs)) {\r\n                    _runnable.run();\r\n                }\r\n                System.out.println(&quot;execution took &quot; + (System.currentTimeMillis() - start) +&quot; ms&quot;);\r\n            }\r\n    \r\n        }\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            new TimeoutTask(2000L, new Runnable() {\r\n                \r\n                @Override\r\n                public void run() {\r\n                    System.out.println(&quot;doing something ...&quot;);\r\n                    try {\r\n                        // pretend it&#39;s taking somewhat longer than it really does\r\n                        Thread.sleep(100);\r\n                    } catch (InterruptedException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n            }).start();\r\n        }\r\n    }\r\n\r\nIf this isn&#39;t an option, please narrow your requirements - or show some code.","title":"How to timeout a thread","body":"<p>I think the answer mainly depends on the task itself.</p>\n\n<ul>\n<li>Is it doing one task over and over again? </li>\n<li>Is it necessary that the timeout interrupts a currently running task immediately after it expires?</li>\n</ul>\n\n<p>If the first answer is yes and the second is no, you could keep it as simple as this:</p>\n\n<pre><code>public class Main {\n\n    private static final class TimeoutTask extends Thread {\n        private final long _timeoutMs;\n        private Runnable _runnable;\n\n        private TimeoutTask(long timeoutMs, Runnable runnable) {\n            _timeoutMs = timeoutMs;\n            _runnable = runnable;\n        }\n\n        @Override\n        public void run() {\n            long start = System.currentTimeMillis();\n            while (System.currentTimeMillis() &lt; (start + _timeoutMs)) {\n                _runnable.run();\n            }\n            System.out.println(\"execution took \" + (System.currentTimeMillis() - start) +\" ms\");\n        }\n\n    }\n\n    public static void main(String[] args) throws Exception {\n        new TimeoutTask(2000L, new Runnable() {\n\n            @Override\n            public void run() {\n                System.out.println(\"doing something ...\");\n                try {\n                    // pretend it's taking somewhat longer than it really does\n                    Thread.sleep(100);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }).start();\n    }\n}\n</code></pre>\n\n<p>If this isn't an option, please narrow your requirements - or show some code.</p>\n"},{"tags":[],"owner":{"account_id":95634,"reputation":1154,"user_id":260329,"display_name":"Dieter"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1267039343,"creation_date":1267036454,"answer_id":2328503,"question_id":2275443,"body_markdown":"I think you should take a look at proper concurrency handling mechanisms (threads running into infinite loops doesn&#39;t sound good per se, btw). Make sure you read a little about the [&quot;killing&quot; or &quot;stopping&quot; Threads][5] topic.\r\n\r\nWhat you are describing,sound very much like a &quot;rendezvous&quot;, so you may want to take a look at the [CyclicBarrier][1].\r\n\r\nThere may be other constructs (like using [CountDownLatch][2] for example) that can resolve your problem (one thread waiting with a timeout for the latch, the other should count down the latch if it has done it&#39;s work, which would release your first thread either after a timeout or when the latch countdown is invoked).\r\n\r\nI usually recommend two books in this area: [Concurrent Programming in Java][3] and [Java Concurrency in Practice][4].\r\n\r\n[1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html\r\n[2]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html\r\n[3]: http://www.amazon.com/Concurrent-Programming-Java-TM-Principles/dp/0201310090\r\n[4]: http://www.amazon.com/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601/ref=dp_cp_ob_b_title_1\r\n[5]: http://java.sun.com/j2se/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html","title":"How to timeout a thread","body":"<p>I think you should take a look at proper concurrency handling mechanisms (threads running into infinite loops doesn't sound good per se, btw). Make sure you read a little about the <a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html\" rel=\"noreferrer\">\"killing\" or \"stopping\" Threads</a> topic.</p>\n\n<p>What you are describing,sound very much like a \"rendezvous\", so you may want to take a look at the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html\" rel=\"noreferrer\">CyclicBarrier</a>.</p>\n\n<p>There may be other constructs (like using <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"noreferrer\">CountDownLatch</a> for example) that can resolve your problem (one thread waiting with a timeout for the latch, the other should count down the latch if it has done it's work, which would release your first thread either after a timeout or when the latch countdown is invoked).</p>\n\n<p>I usually recommend two books in this area: <a href=\"https://rads.stackoverflow.com/amzn/click/com/0201310090\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Concurrent Programming in Java</a> and <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321349601\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Java Concurrency in Practice</a>.</p>\n"},{"tags":[],"owner":{"account_id":105355,"reputation":1262,"user_id":281188,"accept_rate":100,"display_name":"elou"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1267517331,"creation_date":1267105437,"answer_id":2334328,"question_id":2275443,"body_markdown":"I post you a piece of code which show a way how to solve the problem.\r\nAs exemple I&#39;m reading a file.\r\nYou could use this method for another operation, but you need to implements the kill() method so that the main operation will be interrupted.\r\n\r\nhope it helps\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\n\r\n/**\r\n * Main class\r\n * \r\n * @author el\r\n * \r\n */\r\npublic class Main {\r\n\t/**\r\n\t * Thread which perform the task which should be timed out.\r\n\t * \r\n\t * @author el\r\n\t * \r\n\t */\r\n\tpublic static class MainThread extends Thread {\r\n\t\t/**\r\n\t\t * For example reading a file. File to read.\r\n\t\t */\r\n\t\tfinal private File fileToRead;\r\n\t\t/**\r\n\t\t * InputStream from the file.\r\n\t\t */\r\n\t\tfinal private InputStream myInputStream;\r\n\t\t/**\r\n\t\t * Thread for timeout.\r\n\t\t */\r\n\t\tfinal private TimeOutThread timeOutThread;\r\n\r\n\t\t/**\r\n\t\t * true if the thread has not ended.\r\n\t\t */\r\n\t\tboolean isRunning = true;\r\n\r\n\t\t/**\r\n\t\t * true if all tasks where done.\r\n\t\t */\r\n\t\tboolean everythingDone = false;\r\n\r\n\t\t/**\r\n\t\t * if every thing could not be done, an {@link Exception} may have\r\n\t\t * Happens.\r\n\t\t */\r\n\t\tThrowable endedWithException = null;\r\n\r\n\t\t/**\r\n\t\t * Constructor.\r\n\t\t * \r\n\t\t * @param file\r\n\t\t * @throws FileNotFoundException\r\n\t\t */\r\n\t\tMainThread(File file) throws FileNotFoundException {\r\n\t\t\tsetDaemon(false);\r\n\t\t\tfileToRead = file;\r\n\t\t\t// open the file stream.\r\n\t\t\tmyInputStream = new FileInputStream(fileToRead);\r\n\t\t\t// Instantiate the timeout thread.\r\n\t\t\ttimeOutThread = new TimeOutThread(10000, this);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Used by the {@link TimeOutThread}.\r\n\t\t */\r\n\t\tpublic void kill() {\r\n\t\t\tif (isRunning) {\r\n\t\t\t\tisRunning = false;\r\n\t\t\t\tif (myInputStream != null) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t// close the stream, it may be the problem.\r\n\t\t\t\t\t\tmyInputStream.close();\r\n\t\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\t\t// Not interesting\r\n\t\t\t\t\t\tSystem.out.println(e.toString());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsynchronized (this) {\r\n\t\t\t\t\tnotify();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * The task which should be timed out.\r\n\t\t */\r\n\t\t@Override\r\n\t\tpublic void run() {\r\n\t\t\ttimeOutThread.start();\r\n\t\t\tint bytes = 0;\r\n\t\t\ttry {\r\n\t\t\t\t// do something\r\n\t\t\t\twhile (myInputStream.read() &gt;= 0) {\r\n\t\t\t\t\t// may block the thread.\r\n\t\t\t\t\tmyInputStream.read();\r\n\t\t\t\t\tbytes++;\r\n\t\t\t\t\t// simulate a slow stream.\r\n\t\t\t\t\tsynchronized (this) {\r\n\t\t\t\t\t\twait(10);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\teverythingDone = true;\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\tendedWithException = e;\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\tendedWithException = e;\r\n\t\t\t} finally {\r\n\t\t\t\ttimeOutThread.kill();\r\n\t\t\t\tSystem.out.println(&quot;--&gt;read &quot; + bytes + &quot; bytes.&quot;);\r\n\t\t\t\tisRunning = false;\r\n\t\t\t\tsynchronized (this) {\r\n\t\t\t\t\tnotifyAll();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Timeout Thread. Kill the main task if necessary.\r\n\t * \r\n\t * @author el\r\n\t * \r\n\t */\r\n\tpublic static class TimeOutThread extends Thread {\r\n\t\tfinal long timeout;\r\n\t\tfinal MainThread controlledObj;\r\n\r\n\t\tTimeOutThread(long timeout, MainThread controlledObj) {\r\n\t\t\tsetDaemon(true);\r\n\t\t\tthis.timeout = timeout;\r\n\t\t\tthis.controlledObj = controlledObj;\r\n\t\t}\r\n\r\n\t\tboolean isRunning = true;\r\n\r\n\t\t/**\r\n\t\t * If we done need the {@link TimeOutThread} thread, we may kill it.\r\n\t\t */\r\n\t\tpublic void kill() {\r\n\t\t\tisRunning = false;\r\n\t\t\tsynchronized (this) {\r\n\t\t\t\tnotify();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * \r\n\t\t */\r\n\t\t@Override\r\n\t\tpublic void run() {\r\n\t\t\tlong deltaT = 0l;\r\n\t\t\ttry {\r\n\t\t\t\tlong start = System.currentTimeMillis();\r\n\t\t\t\twhile (isRunning &amp;&amp; deltaT &amp;lt; timeout) {\r\n\t\t\t\t\tsynchronized (this) {\r\n\t\t\t\t\t\twait(Math.max(100, timeout - deltaT));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdeltaT = System.currentTimeMillis() - start;\r\n\t\t\t\t}\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t// If the thread is interrupted,\r\n\t\t\t\t// you may not want to kill the main thread,\r\n\t\t\t\t// but probably yes.\r\n\t\t\t} finally {\r\n\t\t\t\tisRunning = false;\r\n\t\t\t}\r\n\t\t\tcontrolledObj.kill();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Start the main task and wait for the end.\r\n\t * \r\n\t * @param args\r\n\t * @throws FileNotFoundException\r\n\t */\r\n\tpublic static void main(String[] args) throws FileNotFoundException {\r\n\t\tlong start = System.currentTimeMillis();\r\n\t\tMainThread main = new MainThread(new File(args[0]));\r\n\t\tmain.start();\r\n\t\ttry {\r\n\t\t\twhile (main.isRunning) {\r\n\t\t\t\tsynchronized (main) {\r\n\t\t\t\t\tmain.wait(1000);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlong stop = System.currentTimeMillis();\r\n\r\n\t\t\tif (main.everythingDone)\r\n\t\t\t\tSystem.out.println(&quot;all done in &quot; + (stop - start) + &quot; ms.&quot;);\r\n\t\t\telse {\r\n\t\t\t\tSystem.out.println(&quot;could not do everything in &quot;\r\n\t\t\t\t\t\t+ (stop - start) + &quot; ms.&quot;);\r\n\t\t\t\tif (main.endedWithException != null)\r\n\t\t\t\t\tmain.endedWithException.printStackTrace();\r\n\t\t\t}\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\tSystem.out.println(&quot;You&#39;ve killed me!&quot;);\r\n\t\t}\r\n\t}\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nRegards","title":"How to timeout a thread","body":"<p>I post you a piece of code which show a way how to solve the problem.\nAs exemple I'm reading a file.\nYou could use this method for another operation, but you need to implements the kill() method so that the main operation will be interrupted.</p>\n\n<p>hope it helps</p>\n\n<pre><code>\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\n\n/**\n * Main class\n * \n * @author el\n * \n */\npublic class Main {\n    /**\n     * Thread which perform the task which should be timed out.\n     * \n     * @author el\n     * \n     */\n    public static class MainThread extends Thread {\n        /**\n         * For example reading a file. File to read.\n         */\n        final private File fileToRead;\n        /**\n         * InputStream from the file.\n         */\n        final private InputStream myInputStream;\n        /**\n         * Thread for timeout.\n         */\n        final private TimeOutThread timeOutThread;\n\n        /**\n         * true if the thread has not ended.\n         */\n        boolean isRunning = true;\n\n        /**\n         * true if all tasks where done.\n         */\n        boolean everythingDone = false;\n\n        /**\n         * if every thing could not be done, an {@link Exception} may have\n         * Happens.\n         */\n        Throwable endedWithException = null;\n\n        /**\n         * Constructor.\n         * \n         * @param file\n         * @throws FileNotFoundException\n         */\n        MainThread(File file) throws FileNotFoundException {\n            setDaemon(false);\n            fileToRead = file;\n            // open the file stream.\n            myInputStream = new FileInputStream(fileToRead);\n            // Instantiate the timeout thread.\n            timeOutThread = new TimeOutThread(10000, this);\n        }\n\n        /**\n         * Used by the {@link TimeOutThread}.\n         */\n        public void kill() {\n            if (isRunning) {\n                isRunning = false;\n                if (myInputStream != null) {\n                    try {\n                        // close the stream, it may be the problem.\n                        myInputStream.close();\n                    } catch (IOException e) {\n                        // Not interesting\n                        System.out.println(e.toString());\n                    }\n                }\n                synchronized (this) {\n                    notify();\n                }\n            }\n        }\n\n        /**\n         * The task which should be timed out.\n         */\n        @Override\n        public void run() {\n            timeOutThread.start();\n            int bytes = 0;\n            try {\n                // do something\n                while (myInputStream.read() >= 0) {\n                    // may block the thread.\n                    myInputStream.read();\n                    bytes++;\n                    // simulate a slow stream.\n                    synchronized (this) {\n                        wait(10);\n                    }\n                }\n                everythingDone = true;\n            } catch (IOException e) {\n                endedWithException = e;\n            } catch (InterruptedException e) {\n                endedWithException = e;\n            } finally {\n                timeOutThread.kill();\n                System.out.println(\"-->read \" + bytes + \" bytes.\");\n                isRunning = false;\n                synchronized (this) {\n                    notifyAll();\n                }\n            }\n        }\n    }\n\n    /**\n     * Timeout Thread. Kill the main task if necessary.\n     * \n     * @author el\n     * \n     */\n    public static class TimeOutThread extends Thread {\n        final long timeout;\n        final MainThread controlledObj;\n\n        TimeOutThread(long timeout, MainThread controlledObj) {\n            setDaemon(true);\n            this.timeout = timeout;\n            this.controlledObj = controlledObj;\n        }\n\n        boolean isRunning = true;\n\n        /**\n         * If we done need the {@link TimeOutThread} thread, we may kill it.\n         */\n        public void kill() {\n            isRunning = false;\n            synchronized (this) {\n                notify();\n            }\n        }\n\n        /**\n         * \n         */\n        @Override\n        public void run() {\n            long deltaT = 0l;\n            try {\n                long start = System.currentTimeMillis();\n                while (isRunning && deltaT &lt; timeout) {\n                    synchronized (this) {\n                        wait(Math.max(100, timeout - deltaT));\n                    }\n                    deltaT = System.currentTimeMillis() - start;\n                }\n            } catch (InterruptedException e) {\n                // If the thread is interrupted,\n                // you may not want to kill the main thread,\n                // but probably yes.\n            } finally {\n                isRunning = false;\n            }\n            controlledObj.kill();\n        }\n    }\n\n    /**\n     * Start the main task and wait for the end.\n     * \n     * @param args\n     * @throws FileNotFoundException\n     */\n    public static void main(String[] args) throws FileNotFoundException {\n        long start = System.currentTimeMillis();\n        MainThread main = new MainThread(new File(args[0]));\n        main.start();\n        try {\n            while (main.isRunning) {\n                synchronized (main) {\n                    main.wait(1000);\n                }\n            }\n            long stop = System.currentTimeMillis();\n\n            if (main.everythingDone)\n                System.out.println(\"all done in \" + (stop - start) + \" ms.\");\n            else {\n                System.out.println(\"could not do everything in \"\n                        + (stop - start) + \" ms.\");\n                if (main.endedWithException != null)\n                    main.endedWithException.printStackTrace();\n            }\n        } catch (InterruptedException e) {\n            System.out.println(\"You've killed me!\");\n        }\n    }\n}\n</code></pre>\n\n<p>Regards</p>\n"},{"comments":[{"owner":{"account_id":483242,"reputation":915,"user_id":898154,"accept_rate":100,"display_name":"Alessandro S."},"score":0,"creation_date":1437121754,"post_id":2350682,"comment_id":50908413,"body_markdown":"Without a context a statement like yours sounds too restrictive. In academic setting I&#39;ve got very often the need to test something up to a timeout, and when it occurs I simply drop all the computation and record that the timeout occurred. Probably it is rare in the industry, but still...","body":"Without a context a statement like yours sounds too restrictive. In academic setting I&#39;ve got very often the need to test something up to a timeout, and when it occurs I simply drop all the computation and record that the timeout occurred. Probably it is rare in the industry, but still..."},{"owner":{"account_id":105593,"reputation":33764,"user_id":281678,"display_name":"Dan Puzey"},"score":0,"creation_date":1437123264,"post_id":2350682,"comment_id":50909221,"body_markdown":"@AlessandroS: that&#39;s a reasonable point, though the OP asked for &quot;better solutions,&quot; by which I took to mean that robustness and reliability were preferred over brute force.","body":"@AlessandroS: that&#39;s a reasonable point, though the OP asked for &quot;better solutions,&quot; by which I took to mean that robustness and reliability were preferred over brute force."}],"tags":[],"owner":{"account_id":105593,"reputation":33764,"user_id":281678,"display_name":"Dan Puzey"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1332181468,"creation_date":1267350817,"answer_id":2350682,"question_id":2275443,"body_markdown":"One thing that I&#39;ve not seen mentioned is that killing threads is generally a Bad Idea.  There are techniques for making threaded methods *cleanly abortable*, but that&#39;s different to just killing a thread after a timeout.\r\n\r\nThe risk with what you&#39;re suggesting is that you probably don&#39;t know what state the thread will be in when you kill it - so you risk introducing instability. A better solution is to make sure your threaded code either doesn&#39;t hang itself, or will respond nicely to an abort request.","title":"How to timeout a thread","body":"<p>One thing that I've not seen mentioned is that killing threads is generally a Bad Idea.  There are techniques for making threaded methods <em>cleanly abortable</em>, but that's different to just killing a thread after a timeout.</p>\n\n<p>The risk with what you're suggesting is that you probably don't know what state the thread will be in when you kill it - so you risk introducing instability. A better solution is to make sure your threaded code either doesn't hang itself, or will respond nicely to an abort request.</p>\n"},{"comments":[{"owner":{"account_id":1152709,"reputation":9229,"user_id":1134080,"accept_rate":68,"display_name":"ADTC"},"score":0,"creation_date":1431591133,"post_id":2358525,"comment_id":48567420,"body_markdown":"What are the imports required? What are `SomeClass` and `Future`?","body":"What are the imports required? What are <code>SomeClass</code> and <code>Future</code>?"}],"tags":[],"owner":{"account_id":37846,"reputation":6497,"user_id":108326,"display_name":"markusk"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1267472335,"creation_date":1267472335,"answer_id":2358525,"question_id":2275443,"body_markdown":"The following snippet will start an operation in a separate thread, then wait for up to 10 seconds for the operation to complete. If the operation does not complete in time, the code will attempt to cancel the operation, then continue on its merry way. Even if the operation cannot be cancelled easily, the parent thread will not wait for the child thread to terminate.\r\n\r\n    ExecutorService executorService = getExecutorService();\r\n    Future&lt;SomeClass&gt; future = executorService.submit(new Callable&lt;SomeClass&gt;() {\r\n        public SomeClass call() {\r\n            // Perform long-running task, return result. The code should check\r\n            // interrupt status regularly, to facilitate cancellation.\r\n        }\r\n    });\r\n    try {\r\n        // Real life code should define the timeout as a constant or\r\n        // retrieve it from configuration\r\n        SomeClass result = future.get(10, TimeUnit.SECONDS);\r\n        // Do something with the result\r\n    } catch (TimeoutException e) {\r\n        future.cancel(true);\r\n        // Perform other error handling, e.g. logging, throwing an exception\r\n    }\r\n\r\n\r\nThe `getExecutorService()` method can be implemented in a number of ways. If you do not have any particular requirements, you can simply call `Executors.newCachedThreadPool()` for thread pooling with no upper limit on the number of threads.","title":"How to timeout a thread","body":"<p>The following snippet will start an operation in a separate thread, then wait for up to 10 seconds for the operation to complete. If the operation does not complete in time, the code will attempt to cancel the operation, then continue on its merry way. Even if the operation cannot be cancelled easily, the parent thread will not wait for the child thread to terminate.</p>\n\n<pre><code>ExecutorService executorService = getExecutorService();\nFuture&lt;SomeClass&gt; future = executorService.submit(new Callable&lt;SomeClass&gt;() {\n    public SomeClass call() {\n        // Perform long-running task, return result. The code should check\n        // interrupt status regularly, to facilitate cancellation.\n    }\n});\ntry {\n    // Real life code should define the timeout as a constant or\n    // retrieve it from configuration\n    SomeClass result = future.get(10, TimeUnit.SECONDS);\n    // Do something with the result\n} catch (TimeoutException e) {\n    future.cancel(true);\n    // Perform other error handling, e.g. logging, throwing an exception\n}\n</code></pre>\n\n<p>The <code>getExecutorService()</code> method can be implemented in a number of ways. If you do not have any particular requirements, you can simply call <code>Executors.newCachedThreadPool()</code> for thread pooling with no upper limit on the number of threads.</p>\n"},{"tags":[],"owner":{"account_id":105176,"reputation":13693,"user_id":280783,"accept_rate":91,"display_name":"Peter Tseng"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1467105552,"creation_date":1310771633,"answer_id":6714123,"question_id":2275443,"body_markdown":"Assuming the thread code is out of your control:\r\n\r\nFrom the Java [documentation][1] mentioned above:\r\n\r\n&gt; **What if a thread doesn&#39;t respond to Thread.interrupt?**\r\n&gt; \r\n&gt; In some cases, you can use application specific tricks. For example,\r\n&gt; if a thread is waiting on a known socket, you can close the socket to\r\n&gt; cause the thread to return immediately. Unfortunately, there really\r\n&gt; isn&#39;t any technique that works in general. *It should be noted that in\r\n&gt; all situations where a waiting thread doesn&#39;t respond to\r\n&gt; Thread.interrupt, it wouldn&#39;t respond to Thread.stop either.* Such\r\n&gt; cases include deliberate denial-of-service attacks, and I/O operations\r\n&gt; for which thread.stop and thread.interrupt do not work properly.\r\n\r\n**Bottom Line:**\r\n\r\nMake sure all threads can be interrupted, or else you need specific knowledge of the thread - like having a flag to set. Maybe you can require that the task be given to you along with the code needed to stop it - define an interface with a `stop()` method. You can also warn when you failed to stop a task.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html","title":"How to timeout a thread","body":"<p>Assuming the thread code is out of your control:</p>\n\n<p>From the Java <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html\" rel=\"noreferrer\">documentation</a> mentioned above:</p>\n\n<blockquote>\n  <p><strong>What if a thread doesn't respond to Thread.interrupt?</strong></p>\n  \n  <p>In some cases, you can use application specific tricks. For example,\n  if a thread is waiting on a known socket, you can close the socket to\n  cause the thread to return immediately. Unfortunately, there really\n  isn't any technique that works in general. <em>It should be noted that in\n  all situations where a waiting thread doesn't respond to\n  Thread.interrupt, it wouldn't respond to Thread.stop either.</em> Such\n  cases include deliberate denial-of-service attacks, and I/O operations\n  for which thread.stop and thread.interrupt do not work properly.</p>\n</blockquote>\n\n<p><strong>Bottom Line:</strong></p>\n\n<p>Make sure all threads can be interrupted, or else you need specific knowledge of the thread - like having a flag to set. Maybe you can require that the task be given to you along with the code needed to stop it - define an interface with a <code>stop()</code> method. You can also warn when you failed to stop a task.</p>\n"},{"comments":[{"owner":{"account_id":100406,"reputation":2215,"user_id":1138058,"accept_rate":82,"display_name":"Roberto Linares"},"score":0,"creation_date":1365779645,"post_id":9994232,"comment_id":22771246,"body_markdown":"The way I do it is to add a &#180;throws Exception&#180; in the public Class&lt;T&gt; call {} method","body":"The way I do it is to add a &#180;throws Exception&#180; in the public Class&lt;T&gt; call {} method"}],"tags":[],"owner":{"account_id":1376610,"reputation":567,"user_id":1310503,"accept_rate":83,"display_name":"user1310503"},"comment_count":1,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1334159008,"creation_date":1333459507,"answer_id":9994232,"question_id":2275443,"body_markdown":"BalusC said:\r\n\r\n&gt; Update: to clarify a conceptual misunderstanding, the sleep() is not required. It is just used for SSCCE/demonstration purposes. Just do your long running task right there in place of sleep().\r\n\r\nBut if you replace `Thread.sleep(4000);` with `for (int i = 0; i &lt; 5E8; i++) {}` then it doesn&#39;t compile, because the empty loop doesn&#39;t throw an `InterruptedException`.\r\n\r\nAnd for the thread to be interruptible, it needs to throw an `InterruptedException`. \r\n\r\nThis seems like a serious problem to me. I can&#39;t see how to adapt this answer to work with a general long-running task. \r\n\r\nEdited to add: I reasked this as a new question: [ https://stackoverflow.com/questions/10031607/interrupting-a-thread-after-fixed-time-does-it-have-to-throw-interruptedexcepti ]","title":"How to timeout a thread","body":"<p>BalusC said:</p>\n\n<blockquote>\n  <p>Update: to clarify a conceptual misunderstanding, the sleep() is not required. It is just used for SSCCE/demonstration purposes. Just do your long running task right there in place of sleep().</p>\n</blockquote>\n\n<p>But if you replace <code>Thread.sleep(4000);</code> with <code>for (int i = 0; i &lt; 5E8; i++) {}</code> then it doesn't compile, because the empty loop doesn't throw an <code>InterruptedException</code>.</p>\n\n<p>And for the thread to be interruptible, it needs to throw an <code>InterruptedException</code>. </p>\n\n<p>This seems like a serious problem to me. I can't see how to adapt this answer to work with a general long-running task. </p>\n\n<p>Edited to add: I reasked this as a new question: [ <a href=\"https://stackoverflow.com/questions/10031607/interrupting-a-thread-after-fixed-time-does-it-have-to-throw-interruptedexcepti\">interrupting a thread after fixed time, does it have to throw InterruptedException?</a> ]</p>\n"},{"tags":[],"owner":{"account_id":1797790,"reputation":61,"user_id":1636824,"display_name":"Peter Goransson"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1349349934,"creation_date":1346349882,"answer_id":12202874,"question_id":2275443,"body_markdown":"I created a helper class just for this some time ago. Works great: \r\n\r\n\r\n    import java.util.concurrent.BrokenBarrierException;\r\n    import java.util.concurrent.CyclicBarrier;\r\n    /**\r\n     * TimeOut class - used for stopping a thread that is taking too long\r\n     * @author Peter Goransson\r\n     *\r\n     */\r\n    public class TimeOut {\r\n    \r\n    \tThread interrupter;\r\n    \tThread target;\r\n    \tlong timeout;\r\n    \tboolean success;\r\n    \tboolean forceStop;\r\n    \t\r\n    \tCyclicBarrier barrier;\r\n    \t\r\n    \t/**\r\n    \t * \r\n    \t * @param target The Runnable target to be executed\r\n    \t * @param timeout The time in milliseconds before target will be interrupted or stopped\r\n    \t * @param forceStop If true, will Thread.stop() this target instead of just interrupt() \r\n    \t */\r\n    \tpublic TimeOut(Runnable target, long timeout, boolean forceStop) {\t\t\r\n    \t\tthis.timeout = timeout;\r\n    \t\tthis.forceStop = forceStop;\r\n    \t\t\r\n    \t\tthis.target = new Thread(target);\t\t\r\n    \t\tthis.interrupter = new Thread(new Interrupter());\r\n    \t\t\r\n    \t\tbarrier = new CyclicBarrier(2); // There will always be just 2 threads waiting on this barrier\r\n    \t}\r\n    \t\r\n    \tpublic boolean execute() throws InterruptedException {\t\r\n    \t\t\r\n    \t\t// Start target and interrupter\r\n    \t\ttarget.start();\r\n    \t\tinterrupter.start();\r\n    \t\t\r\n    \t\t// Wait for target to finish or be interrupted by interrupter\r\n    \t\ttarget.join();\t\r\n    \t\t\t\t\r\n    \t\tinterrupter.interrupt(); // stop the interrupter\t\r\n    \t\ttry {\r\n    \t\t\tbarrier.await(); // Need to wait on this barrier to make sure status is set\r\n    \t\t} catch (BrokenBarrierException e) {\r\n    \t\t\t// Something horrible happened, assume we failed\r\n    \t\t\tsuccess = false;\r\n    \t\t} \r\n    \r\n    \t\treturn success; // status is set in the Interrupter inner class\r\n    \t}\r\n    \t\r\n    \tprivate class Interrupter implements Runnable {\r\n    \t\t\r\n    \t\tInterrupter() {}\r\n    \r\n    \t\tpublic void run() {\r\n    \t\t\ttry {\r\n    \t\t\t\tThread.sleep(timeout); // Wait for timeout period and then kill this target\r\n    \t\t\t\tif (forceStop) {\r\n    \t\t\t\t  target.stop(); // Need to use stop instead of interrupt since we&#39;re trying to kill this thread\r\n    \t\t\t\t}\r\n    \t\t\t\telse {\r\n    \t\t\t\t\ttarget.interrupt(); // Gracefully interrupt the waiting thread\r\n    \t\t\t\t}\r\n    \t\t\t\tSystem.out.println(&quot;done&quot;);\t\t\t\t\r\n    \t\t\t\tsuccess = false;\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\tsuccess = true;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \r\n    \t\t\ttry {\r\n    \t\t\t\tbarrier.await(); // Need to wait on this barrier\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t// If the Child and Interrupter finish at the exact same millisecond we&#39;ll get here\r\n    \t\t\t\t// In this weird case assume it failed\r\n    \t\t\t\tsuccess = false;\t\t\t\t\r\n    \t\t\t} \r\n    \t\t\tcatch (BrokenBarrierException e) {\r\n    \t\t\t\t// Something horrible happened, assume we failed\r\n    \t\t\t\tsuccess = false;\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\n\r\nIt is called like this:\r\n\r\n    long timeout = 10000; // number of milliseconds before timeout\r\n    TimeOut t = new TimeOut(new PhotoProcessor(filePath, params), timeout, true);\r\n    try {    \t\t    \t\t\r\n      boolean sucess = t.execute(); // Will return false if this times out\r\n      if (!sucess) {\r\n        // This thread timed out\r\n      }\r\n      else {\r\n        // This thread ran completely and did not timeout\r\n      }\r\n    } catch (InterruptedException e) {}  ","title":"How to timeout a thread","body":"<p>I created a helper class just for this some time ago. Works great: </p>\n\n<pre><code>import java.util.concurrent.BrokenBarrierException;\nimport java.util.concurrent.CyclicBarrier;\n/**\n * TimeOut class - used for stopping a thread that is taking too long\n * @author Peter Goransson\n *\n */\npublic class TimeOut {\n\n    Thread interrupter;\n    Thread target;\n    long timeout;\n    boolean success;\n    boolean forceStop;\n\n    CyclicBarrier barrier;\n\n    /**\n     * \n     * @param target The Runnable target to be executed\n     * @param timeout The time in milliseconds before target will be interrupted or stopped\n     * @param forceStop If true, will Thread.stop() this target instead of just interrupt() \n     */\n    public TimeOut(Runnable target, long timeout, boolean forceStop) {      \n        this.timeout = timeout;\n        this.forceStop = forceStop;\n\n        this.target = new Thread(target);       \n        this.interrupter = new Thread(new Interrupter());\n\n        barrier = new CyclicBarrier(2); // There will always be just 2 threads waiting on this barrier\n    }\n\n    public boolean execute() throws InterruptedException {  \n\n        // Start target and interrupter\n        target.start();\n        interrupter.start();\n\n        // Wait for target to finish or be interrupted by interrupter\n        target.join();  \n\n        interrupter.interrupt(); // stop the interrupter    \n        try {\n            barrier.await(); // Need to wait on this barrier to make sure status is set\n        } catch (BrokenBarrierException e) {\n            // Something horrible happened, assume we failed\n            success = false;\n        } \n\n        return success; // status is set in the Interrupter inner class\n    }\n\n    private class Interrupter implements Runnable {\n\n        Interrupter() {}\n\n        public void run() {\n            try {\n                Thread.sleep(timeout); // Wait for timeout period and then kill this target\n                if (forceStop) {\n                  target.stop(); // Need to use stop instead of interrupt since we're trying to kill this thread\n                }\n                else {\n                    target.interrupt(); // Gracefully interrupt the waiting thread\n                }\n                System.out.println(\"done\");             \n                success = false;\n            } catch (InterruptedException e) {\n                success = true;\n            }\n\n\n            try {\n                barrier.await(); // Need to wait on this barrier\n            } catch (InterruptedException e) {\n                // If the Child and Interrupter finish at the exact same millisecond we'll get here\n                // In this weird case assume it failed\n                success = false;                \n            } \n            catch (BrokenBarrierException e) {\n                // Something horrible happened, assume we failed\n                success = false;\n            }\n\n        }\n\n    }\n}\n</code></pre>\n\n<p>It is called like this:</p>\n\n<pre><code>long timeout = 10000; // number of milliseconds before timeout\nTimeOut t = new TimeOut(new PhotoProcessor(filePath, params), timeout, true);\ntry {                       \n  boolean sucess = t.execute(); // Will return false if this times out\n  if (!sucess) {\n    // This thread timed out\n  }\n  else {\n    // This thread ran completely and did not timeout\n  }\n} catch (InterruptedException e) {}  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":334117,"reputation":15586,"user_id":660350,"accept_rate":54,"display_name":"Pascal"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1387348523,"creation_date":1387014677,"answer_id":20581835,"question_id":2275443,"body_markdown":"Here is my really ***simple to use*** helper class to ***[run][1]*** or ***[call][2]*** piece of Java code :-)\r\n\r\nThis is based on the excellent [answer][3] from [BalusC][4]  \r\n\r\n\tpackage com.mycompany.util.concurrent;\r\n\t\r\n\timport java.util.concurrent.Callable;\r\n\timport java.util.concurrent.ExecutionException;\r\n\timport java.util.concurrent.ExecutorService;\r\n\timport java.util.concurrent.Executors;\r\n\timport java.util.concurrent.Future;\r\n\timport java.util.concurrent.TimeUnit;\r\n\timport java.util.concurrent.TimeoutException;\r\n\t\r\n\t/**\r\n\t * Calling {@link Callable#call()} or Running {@link Runnable#run()} code\r\n\t * with a timeout based on {@link Future#get(long, TimeUnit))}\r\n\t * @author pascaldalfarra\r\n\t *\r\n\t */\r\n\tpublic class CallableHelper\r\n\t{\r\n\t\r\n\t\tprivate CallableHelper()\r\n\t\t{\r\n\t\t}\r\n\t\r\n\t\tpublic static final void run(final Runnable runnable, int timeoutInSeconds)\r\n\t\t{\r\n\t\t\trun(runnable, null, timeoutInSeconds);\r\n\t\t}\r\n\t\t\r\n\t\tpublic static final void run(final Runnable runnable, Runnable timeoutCallback, int timeoutInSeconds)\r\n\t\t{\r\n\t\t\tcall(new Callable&lt;Void&gt;()\r\n\t\t\t{\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic Void call() throws Exception\r\n\t\t\t\t{\r\n\t\t\t\t\trunnable.run();\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}, timeoutCallback, timeoutInSeconds); \r\n\t\t}\r\n\t\t\r\n\t\tpublic static final &lt;T&gt; T call(final Callable&lt;T&gt; callable, int timeoutInSeconds)\r\n\t\t{\r\n\t\t\treturn call(callable, null, timeoutInSeconds); \r\n\t\t}\r\n\t\t\r\n\t\tpublic static final &lt;T&gt; T call(final Callable&lt;T&gt; callable, Runnable timeoutCallback, int timeoutInSeconds)\r\n\t\t{\r\n\t\t\tExecutorService executor = Executors.newSingleThreadExecutor();\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tFuture&lt;T&gt; future = executor.submit(callable);\r\n\t\t\t\tT result = future.get(timeoutInSeconds, TimeUnit.SECONDS);\r\n\t\t\t\tSystem.out.println(&quot;CallableHelper - Finished!&quot;);\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tcatch (TimeoutException e)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(&quot;CallableHelper - TimeoutException!&quot;);\r\n\t\t\t\tif(timeoutCallback != null)\r\n\t\t\t\t{\r\n\t\t\t\t\ttimeoutCallback.run();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (InterruptedException e)\r\n\t\t\t{\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\tcatch (ExecutionException e)\r\n\t\t\t{\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\tfinally\r\n\t\t\t{\r\n\t\t\t\texecutor.shutdownNow();\r\n\t\t\t\texecutor = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html#run%28%29\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html#call%28%29\r\n  [3]: https://stackoverflow.com/questions/2275443/how-to-timeout-a-thread#2275596\r\n  [4]: https://stackoverflow.com/users/157882/balusc","title":"How to timeout a thread","body":"<p>Here is my really <strong><em>simple to use</em></strong> helper class to <strong><em><a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html#run%28%29\" rel=\"nofollow noreferrer\">run</a></em></strong> or <strong><em><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html#call%28%29\" rel=\"nofollow noreferrer\">call</a></em></strong> piece of Java code :-)</p>\n\n<p>This is based on the excellent <a href=\"https://stackoverflow.com/questions/2275443/how-to-timeout-a-thread#2275596\">answer</a> from <a href=\"https://stackoverflow.com/users/157882/balusc\">BalusC</a>  </p>\n\n<pre><code>package com.mycompany.util.concurrent;\n\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.TimeoutException;\n\n/**\n * Calling {@link Callable#call()} or Running {@link Runnable#run()} code\n * with a timeout based on {@link Future#get(long, TimeUnit))}\n * @author pascaldalfarra\n *\n */\npublic class CallableHelper\n{\n\n    private CallableHelper()\n    {\n    }\n\n    public static final void run(final Runnable runnable, int timeoutInSeconds)\n    {\n        run(runnable, null, timeoutInSeconds);\n    }\n\n    public static final void run(final Runnable runnable, Runnable timeoutCallback, int timeoutInSeconds)\n    {\n        call(new Callable&lt;Void&gt;()\n        {\n            @Override\n            public Void call() throws Exception\n            {\n                runnable.run();\n                return null;\n            }\n        }, timeoutCallback, timeoutInSeconds); \n    }\n\n    public static final &lt;T&gt; T call(final Callable&lt;T&gt; callable, int timeoutInSeconds)\n    {\n        return call(callable, null, timeoutInSeconds); \n    }\n\n    public static final &lt;T&gt; T call(final Callable&lt;T&gt; callable, Runnable timeoutCallback, int timeoutInSeconds)\n    {\n        ExecutorService executor = Executors.newSingleThreadExecutor();\n        try\n        {\n            Future&lt;T&gt; future = executor.submit(callable);\n            T result = future.get(timeoutInSeconds, TimeUnit.SECONDS);\n            System.out.println(\"CallableHelper - Finished!\");\n            return result;\n        }\n        catch (TimeoutException e)\n        {\n            System.out.println(\"CallableHelper - TimeoutException!\");\n            if(timeoutCallback != null)\n            {\n                timeoutCallback.run();\n            }\n        }\n        catch (InterruptedException e)\n        {\n            e.printStackTrace();\n        }\n        catch (ExecutionException e)\n        {\n            e.printStackTrace();\n        }\n        finally\n        {\n            executor.shutdownNow();\n            executor = null;\n        }\n\n        return null;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":60136,"reputation":6403,"user_id":179744,"accept_rate":88,"display_name":"Robocide"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1433965646,"creation_date":1433965646,"answer_id":30765917,"question_id":2275443,"body_markdown":"Great answer by BalusC&#39;s:\t\r\n\r\nbut Just to add that the timeout itself does not interrupt the thread itself. even if you are checking with while(!Thread.interrupted()) in your task. if you want to make sure thread is stopped you should also make sure future.cancel() is invoked when timeout exception is catch.\r\n\r\n\r\n    package com.stackoverflow.q2275443; \r\n     \r\n    import java.util.concurrent.Callable;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.Future;\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.concurrent.TimeoutException;\r\n     \r\n\r\n    public class Test { \r\n        public static void main(String[] args) throws Exception {\r\n            ExecutorService executor = Executors.newSingleThreadExecutor();\r\n            Future&lt;String&gt; future = executor.submit(new Task());\r\n     \r\n            try { \r\n                System.out.println(&quot;Started..&quot;);\r\n                System.out.println(future.get(3, TimeUnit.SECONDS));\r\n                System.out.println(&quot;Finished!&quot;);\r\n            } catch (TimeoutException e) {\r\n                //Without the below cancel the thread will continue to live \r\n                // even though the timeout exception thrown.\r\n                future.cancel();\r\n                System.out.println(&quot;Terminated!&quot;);\r\n            } \r\n     \r\n            executor.shutdownNow();\r\n        } \r\n    } \r\n     \r\n    class Task implements Callable&lt;String&gt; {\r\n        @Override \r\n        public String call() throws Exception {\r\n          while(!Thread.currentThread.isInterrupted()){\r\n              System.out.println(&quot;Im still running baby!!&quot;);\r\n          }          \r\n        } \r\n    } ","title":"How to timeout a thread","body":"<p>Great answer by BalusC's:   </p>\n\n<p>but Just to add that the timeout itself does not interrupt the thread itself. even if you are checking with while(!Thread.interrupted()) in your task. if you want to make sure thread is stopped you should also make sure future.cancel() is invoked when timeout exception is catch.</p>\n\n<pre><code>package com.stackoverflow.q2275443; \n\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.TimeoutException;\n\n\npublic class Test { \n    public static void main(String[] args) throws Exception {\n        ExecutorService executor = Executors.newSingleThreadExecutor();\n        Future&lt;String&gt; future = executor.submit(new Task());\n\n        try { \n            System.out.println(\"Started..\");\n            System.out.println(future.get(3, TimeUnit.SECONDS));\n            System.out.println(\"Finished!\");\n        } catch (TimeoutException e) {\n            //Without the below cancel the thread will continue to live \n            // even though the timeout exception thrown.\n            future.cancel();\n            System.out.println(\"Terminated!\");\n        } \n\n        executor.shutdownNow();\n    } \n} \n\nclass Task implements Callable&lt;String&gt; {\n    @Override \n    public String call() throws Exception {\n      while(!Thread.currentThread.isInterrupted()){\n          System.out.println(\"Im still running baby!!\");\n      }          \n    } \n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1961485,"reputation":3248,"user_id":1762932,"accept_rate":84,"display_name":"Tom"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1438785157,"creation_date":1438784791,"answer_id":31835331,"question_id":2275443,"body_markdown":"I was looking for an ExecutorService that can interrupt all timed out Runnables executed by it, but found none. After a few hours I created one as below. This class can be modified to enhance robustness.\r\n\r\n    public class TimedExecutorService extends ThreadPoolExecutor {\r\n\t\tlong timeout;\r\n\t\tpublic TimedExecutorService(int numThreads, long timeout, TimeUnit unit) {\r\n\t\t\tsuper(numThreads, numThreads, 0L, TimeUnit.MILLISECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(numThreads + 1));\r\n\t\t\tthis.timeout = unit.toMillis(timeout);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tprotected void beforeExecute(Thread thread, Runnable runnable) {\r\n\t\t\tThread interruptionThread = new Thread(new Runnable() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t// Wait until timeout and interrupt this thread\r\n\t\t\t\t\t\tThread.sleep(timeout);\r\n\t\t\t\t\t\tSystem.out.println(&quot;The runnable times out.&quot;);\r\n\t\t\t\t\t\tthread.interrupt();\r\n\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tinterruptionThread.start();\r\n\t\t}\r\n\t}\r\n\r\nUsage:\r\n\r\n    public static void main(String[] args) {\r\n\r\n\t\tRunnable abcdRunnable = new Runnable() {\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t\tSystem.out.println(&quot;abcdRunnable started&quot;);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(20000);\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t// logger.info(&quot;The runnable times out.&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;abcdRunnable ended&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tRunnable xyzwRunnable = new Runnable() {\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t\tSystem.out.println(&quot;xyzwRunnable started&quot;);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(20000);\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t// logger.info(&quot;The runnable times out.&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;xyzwRunnable ended&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tint numThreads = 2, timeout = 5;\r\n\t\tExecutorService timedExecutor = new TimedExecutorService(numThreads, timeout, TimeUnit.SECONDS);\r\n\t\ttimedExecutor.execute(abcdRunnable);\r\n\t\ttimedExecutor.execute(xyzwRunnable);\r\n\t\ttimedExecutor.shutdown();\r\n\t}\r\n\r\n","title":"How to timeout a thread","body":"<p>I was looking for an ExecutorService that can interrupt all timed out Runnables executed by it, but found none. After a few hours I created one as below. This class can be modified to enhance robustness.</p>\n\n<pre><code>public class TimedExecutorService extends ThreadPoolExecutor {\n    long timeout;\n    public TimedExecutorService(int numThreads, long timeout, TimeUnit unit) {\n        super(numThreads, numThreads, 0L, TimeUnit.MILLISECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(numThreads + 1));\n        this.timeout = unit.toMillis(timeout);\n    }\n\n    @Override\n    protected void beforeExecute(Thread thread, Runnable runnable) {\n        Thread interruptionThread = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    // Wait until timeout and interrupt this thread\n                    Thread.sleep(timeout);\n                    System.out.println(\"The runnable times out.\");\n                    thread.interrupt();\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n        interruptionThread.start();\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>public static void main(String[] args) {\n\n    Runnable abcdRunnable = new Runnable() {\n        @Override\n        public void run() {\n            System.out.println(\"abcdRunnable started\");\n            try {\n                Thread.sleep(20000);\n            } catch (InterruptedException e) {\n                // logger.info(\"The runnable times out.\");\n            }\n            System.out.println(\"abcdRunnable ended\");\n        }\n    };\n\n    Runnable xyzwRunnable = new Runnable() {\n        @Override\n        public void run() {\n            System.out.println(\"xyzwRunnable started\");\n            try {\n                Thread.sleep(20000);\n            } catch (InterruptedException e) {\n                // logger.info(\"The runnable times out.\");\n            }\n            System.out.println(\"xyzwRunnable ended\");\n        }\n    };\n\n    int numThreads = 2, timeout = 5;\n    ExecutorService timedExecutor = new TimedExecutorService(numThreads, timeout, TimeUnit.SECONDS);\n    timedExecutor.execute(abcdRunnable);\n    timedExecutor.execute(xyzwRunnable);\n    timedExecutor.shutdown();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7331281,"reputation":11,"user_id":5584078,"display_name":"Liu Jing"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447988242,"creation_date":1447988242,"answer_id":33818245,"question_id":2275443,"body_markdown":"Now , l meet a issue like this. It happens to decode picture. The process of decode takes too much time that the screen keep black. l add a time controler: when the time is too long, then pop up from the current Thread.\r\nThe following is the diff:\r\n \r\n\r\n       ExecutorService executor = Executors.newSingleThreadExecutor();\r\n       Future&lt;Bitmap&gt; future = executor.submit(new Callable&lt;Bitmap&gt;() {\r\n           @Override\r\n           public Bitmap call() throws Exception {\r\n           Bitmap bitmap = decodeAndScaleBitmapFromStream(context, inputUri);// do some time consuming operation\r\n           return null;\r\n                }\r\n           });\r\n           try {\r\n               Bitmap result = future.get(1, TimeUnit.SECONDS);\r\n           } catch (TimeoutException e){\r\n               future.cancel(true);\r\n           }\r\n           executor.shutdown();\r\n           return (bitmap!= null);\r\n","title":"How to timeout a thread","body":"<p>Now , l meet a issue like this. It happens to decode picture. The process of decode takes too much time that the screen keep black. l add a time controler: when the time is too long, then pop up from the current Thread.\nThe following is the diff:</p>\n\n<pre><code>   ExecutorService executor = Executors.newSingleThreadExecutor();\n   Future&lt;Bitmap&gt; future = executor.submit(new Callable&lt;Bitmap&gt;() {\n       @Override\n       public Bitmap call() throws Exception {\n       Bitmap bitmap = decodeAndScaleBitmapFromStream(context, inputUri);// do some time consuming operation\n       return null;\n            }\n       });\n       try {\n           Bitmap result = future.get(1, TimeUnit.SECONDS);\n       } catch (TimeoutException e){\n           future.cancel(true);\n       }\n       executor.shutdown();\n       return (bitmap!= null);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5510900,"reputation":99,"user_id":4377200,"display_name":"Niroshan Abeywickrama"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502351634,"creation_date":1502351634,"answer_id":45607666,"question_id":2275443,"body_markdown":"I had the same problem. So i came up with a simple solution like this. \r\n\r\n    public class TimeoutBlock {\r\n    \r\n   \t private final long timeoutMilliSeconds;\r\n\t\tprivate long timeoutInteval=100;\r\n\t\t\r\n\t\tpublic TimeoutBlock(long timeoutMilliSeconds){\r\n\t\t\tthis.timeoutMilliSeconds=timeoutMilliSeconds;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void addBlock(Runnable runnable) throws Throwable{\r\n\t\t\tlong collectIntervals=0;\r\n\t\t\tThread timeoutWorker=new Thread(runnable);\r\n\t\t\ttimeoutWorker.start();\r\n\t\t\tdo{ \r\n\t\t\t\tif(collectIntervals&gt;=this.timeoutMilliSeconds){\r\n\t\t\t\t\ttimeoutWorker.stop();\r\n\t\t\t\t\tthrow new Exception(&quot;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;****&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Timeout Block Execution Time Exceeded In &quot;+timeoutMilliSeconds+&quot; Milli Seconds. Thread Block Terminated.&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tcollectIntervals+=timeoutInteval;           \r\n\t\t\t\tThread.sleep(timeoutInteval);\r\n\t\t\t\t\r\n\t\t\t}while(timeoutWorker.isAlive());\r\n\t\t\tSystem.out.println(&quot;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;####&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Timeout Block Executed Within &quot;+collectIntervals+&quot; Milli Seconds.&quot;);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * @return the timeoutInteval\r\n\t\t */\r\n\t\tpublic long getTimeoutInteval() {\r\n\t\t\treturn timeoutInteval;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * @param timeoutInteval the timeoutInteval to set\r\n\t\t */\r\n\t\tpublic void setTimeoutInteval(long timeoutInteval) {\r\n\t\t\tthis.timeoutInteval = timeoutInteval;\r\n\t\t}\r\n\t}\r\n\r\n    \r\n\r\nGuarantees that if block didn&#39;t execute within the time limit. the process will terminate and throws an exception.\r\n\r\nexample :\r\n\r\n    try {\r\n            TimeoutBlock timeoutBlock = new TimeoutBlock(10 * 60 * 1000);//set timeout in milliseconds\r\n            Runnable block=new Runnable() {\r\n\r\n                @Override\r\n                public void run() {\r\n                    //TO DO write block of code \r\n                }\r\n            };\r\n            \r\n            timeoutBlock.addBlock(block);// execute the runnable block \r\n            \r\n        } catch (Throwable e) {\r\n            //catch the exception here . Which is block didn&#39;t execute within the time limit\r\n        }\r\n\r\n","title":"How to timeout a thread","body":"<p>I had the same problem. So i came up with a simple solution like this. </p>\n\n<pre><code>public class TimeoutBlock {\n\n private final long timeoutMilliSeconds;\n    private long timeoutInteval=100;\n\n    public TimeoutBlock(long timeoutMilliSeconds){\n        this.timeoutMilliSeconds=timeoutMilliSeconds;\n    }\n\n    public void addBlock(Runnable runnable) throws Throwable{\n        long collectIntervals=0;\n        Thread timeoutWorker=new Thread(runnable);\n        timeoutWorker.start();\n        do{ \n            if(collectIntervals&gt;=this.timeoutMilliSeconds){\n                timeoutWorker.stop();\n                throw new Exception(\"&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;****&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Timeout Block Execution Time Exceeded In \"+timeoutMilliSeconds+\" Milli Seconds. Thread Block Terminated.\");\n            }\n            collectIntervals+=timeoutInteval;           \n            Thread.sleep(timeoutInteval);\n\n        }while(timeoutWorker.isAlive());\n        System.out.println(\"&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;####&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Timeout Block Executed Within \"+collectIntervals+\" Milli Seconds.\");\n    }\n\n    /**\n     * @return the timeoutInteval\n     */\n    public long getTimeoutInteval() {\n        return timeoutInteval;\n    }\n\n    /**\n     * @param timeoutInteval the timeoutInteval to set\n     */\n    public void setTimeoutInteval(long timeoutInteval) {\n        this.timeoutInteval = timeoutInteval;\n    }\n}\n</code></pre>\n\n<p>Guarantees that if block didn't execute within the time limit. the process will terminate and throws an exception.</p>\n\n<p>example :</p>\n\n<pre><code>try {\n        TimeoutBlock timeoutBlock = new TimeoutBlock(10 * 60 * 1000);//set timeout in milliseconds\n        Runnable block=new Runnable() {\n\n            @Override\n            public void run() {\n                //TO DO write block of code \n            }\n        };\n\n        timeoutBlock.addBlock(block);// execute the runnable block \n\n    } catch (Throwable e) {\n        //catch the exception here . Which is block didn't execute within the time limit\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4033647,"reputation":131,"user_id":3318900,"display_name":"Sumeet Sahu"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1540389282,"creation_date":1540388931,"answer_id":52970708,"question_id":2275443,"body_markdown":"In the solution given by [BalusC][1], the main thread will stay blocked for the timeout period. If you have a thread pool with more than one thread, you will need the same number of additional thread that will be using [Future.get(long timeout,TimeUnit unit)][2] blocking call to wait and close the thread if it exceeds the timeout period. \r\n\r\nA generic solution to this problem is to create a ThreadPoolExecutor Decorator that can add the timeout functionality. This Decorator class should create as many threads as ThreadPoolExecutor has, and all these threads should be used only to wait and close the ThreadPoolExecutor.\r\n\r\nThe generic class should be implemented like below:\r\n\r\n    import java.util.List;\r\n    import java.util.concurrent.*;\r\n\r\n    public class TimeoutThreadPoolDecorator extends ThreadPoolExecutor {\r\n\r\n\r\n        private final ThreadPoolExecutor commandThreadpool;\r\n        private final long timeout;\r\n        private final TimeUnit unit;\r\n\r\n        public TimeoutThreadPoolDecorator(ThreadPoolExecutor threadpool,\r\n                                          long timeout,\r\n                                          TimeUnit unit ){\r\n            super(  threadpool.getCorePoolSize(),\r\n                    threadpool.getMaximumPoolSize(),\r\n                    threadpool.getKeepAliveTime(TimeUnit.MILLISECONDS),\r\n                    TimeUnit.MILLISECONDS,\r\n                    threadpool.getQueue());\r\n\r\n            this.commandThreadpool = threadpool;\r\n            this.timeout=timeout;\r\n            this.unit=unit;\r\n        }\r\n\r\n        @Override\r\n        public void execute(Runnable command) {\r\n            super.execute(() -&gt; {\r\n                Future&lt;?&gt; future = commandThreadpool.submit(command);\r\n                try {\r\n                    future.get(timeout, unit);\r\n                } catch (InterruptedException e) {\r\n                    Thread.currentThread().interrupt();\r\n                } catch (ExecutionException | TimeoutException e) {\r\n                    throw new RejectedExecutionException(e);\r\n                } finally {\r\n                    future.cancel(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        @Override\r\n        public void setCorePoolSize(int corePoolSize) {\r\n            super.setCorePoolSize(corePoolSize);\r\n            commandThreadpool.setCorePoolSize(corePoolSize);\r\n        }\r\n\r\n        @Override\r\n        public void setThreadFactory(ThreadFactory threadFactory) {\r\n            super.setThreadFactory(threadFactory);\r\n            commandThreadpool.setThreadFactory(threadFactory);\r\n        }\r\n\r\n        @Override\r\n        public void setMaximumPoolSize(int maximumPoolSize) {\r\n            super.setMaximumPoolSize(maximumPoolSize);\r\n            commandThreadpool.setMaximumPoolSize(maximumPoolSize);\r\n        }\r\n\r\n        @Override\r\n        public void setKeepAliveTime(long time, TimeUnit unit) {\r\n            super.setKeepAliveTime(time, unit);\r\n            commandThreadpool.setKeepAliveTime(time, unit);\r\n        }\r\n\r\n        @Override\r\n        public void setRejectedExecutionHandler(RejectedExecutionHandler handler) {\r\n            super.setRejectedExecutionHandler(handler);\r\n            commandThreadpool.setRejectedExecutionHandler(handler);\r\n        }\r\n\r\n        @Override\r\n        public List&lt;Runnable&gt; shutdownNow() {\r\n            List&lt;Runnable&gt; taskList = super.shutdownNow();\r\n            taskList.addAll(commandThreadpool.shutdownNow());\r\n            return taskList;\r\n        }\r\n\r\n        @Override\r\n        public void shutdown() {\r\n            super.shutdown();\r\n            commandThreadpool.shutdown();\r\n        }\r\n    }\r\n\r\n\r\nThe above decorator can be used as below:\r\n\r\n    import java.util.concurrent.SynchronousQueue;\r\n    import java.util.concurrent.ThreadPoolExecutor;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args){\r\n    \r\n            long timeout = 2000;\r\n    \r\n            ThreadPoolExecutor threadPool = new ThreadPoolExecutor(3, 10, 0, TimeUnit.MILLISECONDS, new SynchronousQueue&lt;&gt;(true));\r\n    \r\n            threadPool = new TimeoutThreadPoolDecorator( threadPool ,\r\n                    timeout,\r\n                    TimeUnit.MILLISECONDS);\r\n    \r\n    \r\n            threadPool.execute(command(1000));\r\n            threadPool.execute(command(1500));\r\n            threadPool.execute(command(2100));\r\n            threadPool.execute(command(2001));\r\n    \r\n            while(threadPool.getActiveCount()&gt;0);\r\n            threadPool.shutdown();\r\n    \r\n    \r\n        }\r\n    \r\n        private static Runnable command(int i) {\r\n    \r\n            return () -&gt; {\r\n                System.out.println(&quot;Running Thread:&quot;+Thread.currentThread().getName());\r\n                System.out.println(&quot;Starting command with sleep:&quot;+i);\r\n                try {\r\n                    Thread.sleep(i);\r\n                } catch (InterruptedException e) {\r\n                    System.out.println(&quot;Thread &quot;+Thread.currentThread().getName()+&quot; with sleep of &quot;+i+&quot; is Interrupted!!!&quot;);\r\n                    return;\r\n                }\r\n                System.out.println(&quot;Completing Thread &quot;+Thread.currentThread().getName()+&quot; after sleep of &quot;+i);\r\n            };\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/157882/balusc\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#get(long,%20java.util.concurrent.TimeUnit)","title":"How to timeout a thread","body":"<p>In the solution given by <a href=\"https://stackoverflow.com/users/157882/balusc\">BalusC</a>, the main thread will stay blocked for the timeout period. If you have a thread pool with more than one thread, you will need the same number of additional thread that will be using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#get(long,%20java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\">Future.get(long timeout,TimeUnit unit)</a> blocking call to wait and close the thread if it exceeds the timeout period. </p>\n\n<p>A generic solution to this problem is to create a ThreadPoolExecutor Decorator that can add the timeout functionality. This Decorator class should create as many threads as ThreadPoolExecutor has, and all these threads should be used only to wait and close the ThreadPoolExecutor.</p>\n\n<p>The generic class should be implemented like below:</p>\n\n<pre><code>import java.util.List;\nimport java.util.concurrent.*;\n\npublic class TimeoutThreadPoolDecorator extends ThreadPoolExecutor {\n\n\n    private final ThreadPoolExecutor commandThreadpool;\n    private final long timeout;\n    private final TimeUnit unit;\n\n    public TimeoutThreadPoolDecorator(ThreadPoolExecutor threadpool,\n                                      long timeout,\n                                      TimeUnit unit ){\n        super(  threadpool.getCorePoolSize(),\n                threadpool.getMaximumPoolSize(),\n                threadpool.getKeepAliveTime(TimeUnit.MILLISECONDS),\n                TimeUnit.MILLISECONDS,\n                threadpool.getQueue());\n\n        this.commandThreadpool = threadpool;\n        this.timeout=timeout;\n        this.unit=unit;\n    }\n\n    @Override\n    public void execute(Runnable command) {\n        super.execute(() -&gt; {\n            Future&lt;?&gt; future = commandThreadpool.submit(command);\n            try {\n                future.get(timeout, unit);\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            } catch (ExecutionException | TimeoutException e) {\n                throw new RejectedExecutionException(e);\n            } finally {\n                future.cancel(true);\n            }\n        });\n    }\n\n    @Override\n    public void setCorePoolSize(int corePoolSize) {\n        super.setCorePoolSize(corePoolSize);\n        commandThreadpool.setCorePoolSize(corePoolSize);\n    }\n\n    @Override\n    public void setThreadFactory(ThreadFactory threadFactory) {\n        super.setThreadFactory(threadFactory);\n        commandThreadpool.setThreadFactory(threadFactory);\n    }\n\n    @Override\n    public void setMaximumPoolSize(int maximumPoolSize) {\n        super.setMaximumPoolSize(maximumPoolSize);\n        commandThreadpool.setMaximumPoolSize(maximumPoolSize);\n    }\n\n    @Override\n    public void setKeepAliveTime(long time, TimeUnit unit) {\n        super.setKeepAliveTime(time, unit);\n        commandThreadpool.setKeepAliveTime(time, unit);\n    }\n\n    @Override\n    public void setRejectedExecutionHandler(RejectedExecutionHandler handler) {\n        super.setRejectedExecutionHandler(handler);\n        commandThreadpool.setRejectedExecutionHandler(handler);\n    }\n\n    @Override\n    public List&lt;Runnable&gt; shutdownNow() {\n        List&lt;Runnable&gt; taskList = super.shutdownNow();\n        taskList.addAll(commandThreadpool.shutdownNow());\n        return taskList;\n    }\n\n    @Override\n    public void shutdown() {\n        super.shutdown();\n        commandThreadpool.shutdown();\n    }\n}\n</code></pre>\n\n<p>The above decorator can be used as below:</p>\n\n<pre><code>import java.util.concurrent.SynchronousQueue;\nimport java.util.concurrent.ThreadPoolExecutor;\nimport java.util.concurrent.TimeUnit;\n\npublic class Main {\n\n    public static void main(String[] args){\n\n        long timeout = 2000;\n\n        ThreadPoolExecutor threadPool = new ThreadPoolExecutor(3, 10, 0, TimeUnit.MILLISECONDS, new SynchronousQueue&lt;&gt;(true));\n\n        threadPool = new TimeoutThreadPoolDecorator( threadPool ,\n                timeout,\n                TimeUnit.MILLISECONDS);\n\n\n        threadPool.execute(command(1000));\n        threadPool.execute(command(1500));\n        threadPool.execute(command(2100));\n        threadPool.execute(command(2001));\n\n        while(threadPool.getActiveCount()&gt;0);\n        threadPool.shutdown();\n\n\n    }\n\n    private static Runnable command(int i) {\n\n        return () -&gt; {\n            System.out.println(\"Running Thread:\"+Thread.currentThread().getName());\n            System.out.println(\"Starting command with sleep:\"+i);\n            try {\n                Thread.sleep(i);\n            } catch (InterruptedException e) {\n                System.out.println(\"Thread \"+Thread.currentThread().getName()+\" with sleep of \"+i+\" is Interrupted!!!\");\n                return;\n            }\n            System.out.println(\"Completing Thread \"+Thread.currentThread().getName()+\" after sleep of \"+i);\n        };\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1699329,"reputation":3150,"user_id":1559874,"display_name":"abhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684745189,"creation_date":1684745189,"answer_id":76304427,"question_id":2275443,"body_markdown":"I would suggest to use `ExecutorCompletionService`&#39;s poll method with timeout parameter. `ExecutorCompletionService` internally uses `LinkedBlockingQueue` for the completed tasks.\r\n\r\n    ExecutorService executorService = Executors.newFixedThreadPool(1);\r\n    ExecutorCompletionService executorCompletionService = new ExecutorCompletionService(executorService);\r\n    executorCompletionService.submit(() - &gt; yourTask());\r\n    Future&lt;ReturnType&gt; future = executorCompletionService.poll(yourTimeout, TimeUnit.SECONDS);\r\n    if (Objects.isNull(future)) {\r\n          // Here future is null, it means your task was not completed within the given time.\r\n    }\r\n\r\nAbove code snippet is for `Callable&lt;ReturnType&gt;`, if your task is `Runnable` then you may use `executorCompletionService.submit(() - &gt; yourTask(), yourReturnObject)` ","title":"How to timeout a thread","body":"<p>I would suggest to use <code>ExecutorCompletionService</code>'s poll method with timeout parameter. <code>ExecutorCompletionService</code> internally uses <code>LinkedBlockingQueue</code> for the completed tasks.</p>\n<pre><code>ExecutorService executorService = Executors.newFixedThreadPool(1);\nExecutorCompletionService executorCompletionService = new ExecutorCompletionService(executorService);\nexecutorCompletionService.submit(() - &gt; yourTask());\nFuture&lt;ReturnType&gt; future = executorCompletionService.poll(yourTimeout, TimeUnit.SECONDS);\nif (Objects.isNull(future)) {\n      // Here future is null, it means your task was not completed within the given time.\n}\n</code></pre>\n<p>Above code snippet is for <code>Callable&lt;ReturnType&gt;</code>, if your task is <code>Runnable</code> then you may use <code>executorCompletionService.submit(() - &gt; yourTask(), yourReturnObject)</code></p>\n"}],"owner":{"account_id":99559,"reputation":17675,"user_id":268850,"accept_rate":68,"display_name":"java_geek"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":297862,"favorite_count":0,"down_vote_count":0,"up_vote_count":283,"accepted_answer_id":2275596,"answer_count":18,"score":283,"last_activity_date":1684745189,"creation_date":1266346265,"question_id":2275443,"body_markdown":"I want to run a thread for some fixed amount of time. If it is not completed within that time, I want to either kill it, throw some exception, or handle it in some way. How can it be done?\r\n\r\nOne way of doing it as I figured out from [this thread](http://groups.google.com.br/group/comp.lang.java.programmer/msg/0fea9dd5f0117a7f)\r\nis to use a TimerTask inside the run() method of the Thread.\r\n\r\nAre there any better solutions for this?\r\n\r\n&amp;nbsp;  \r\nEDIT: Adding a bounty as I needed a clearer answer. The ExecutorService code given below does not address my problem. Why should I sleep() after executing (some code - I have no handle over this piece of code)? If the code is completed and the sleep() is interrupted, how can that be a timeOut?\r\n\r\nThe task that needs to be executed is not in my control. It can be any piece of code. The problem is this piece of code might run into an infinite loop. I don&#39;t want that to happen. So, I just want to run that task in a separate thread. The parent thread has to wait till that thread finishes and needs to know the status of the task (i.e whether it timed out or some exception occured or if its a success). If the task goes into an infinite loop, my parent thread keeps on waiting indefinitely, which is not an ideal situation.","title":"How to timeout a thread","body":"<p>I want to run a thread for some fixed amount of time. If it is not completed within that time, I want to either kill it, throw some exception, or handle it in some way. How can it be done?</p>\n\n<p>One way of doing it as I figured out from <a href=\"http://groups.google.com.br/group/comp.lang.java.programmer/msg/0fea9dd5f0117a7f\" rel=\"noreferrer\">this thread</a>\nis to use a TimerTask inside the run() method of the Thread.</p>\n\n<p>Are there any better solutions for this?</p>\n\n<p>&nbsp;<br>\nEDIT: Adding a bounty as I needed a clearer answer. The ExecutorService code given below does not address my problem. Why should I sleep() after executing (some code - I have no handle over this piece of code)? If the code is completed and the sleep() is interrupted, how can that be a timeOut?</p>\n\n<p>The task that needs to be executed is not in my control. It can be any piece of code. The problem is this piece of code might run into an infinite loop. I don't want that to happen. So, I just want to run that task in a separate thread. The parent thread has to wait till that thread finishes and needs to know the status of the task (i.e whether it timed out or some exception occured or if its a success). If the task goes into an infinite loop, my parent thread keeps on waiting indefinitely, which is not an ideal situation.</p>\n"},{"tags":["java","intellij-idea","intellij-plugin"],"comments":[{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1683903388,"post_id":76237296,"comment_id":134442606,"body_markdown":"You just configure these projects as modules in IntelliJ IDEA. Different VCS repositories will work as well. Define dependencies between the modules per https://www.jetbrains.com/help/idea/working-with-module-dependencies.html#add-a-new-dependency. Refactorings will work across your modules. See https://www.jetbrains.com/help/idea/migrating-from-eclipse-to-intellij-idea.html#no-workspace.","body":"You just configure these projects as modules in IntelliJ IDEA. Different VCS repositories will work as well. Define dependencies between the modules per <a href=\"https://www.jetbrains.com/help/idea/working-with-module-dependencies.html#add-a-new-dependency\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>. Refactorings will work across your modules. See <a href=\"https://www.jetbrains.com/help/idea/migrating-from-eclipse-to-intellij-idea.html#no-workspace\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>."},{"owner":{"account_id":12296497,"reputation":155,"user_id":8971977,"display_name":"mkcons"},"score":0,"creation_date":1683905160,"post_id":76237296,"comment_id":134443015,"body_markdown":"Should have mentioned I use maven for dependency management. When I manually add the dependency the way you describe I get a warning from Intellij &quot;module app is imported From Maven. Any changes made in its configuration might be lost after reimporting&quot;, basically telling me not to tinker with buildpath outside maven. I know I could create a new project in maven and put these two as submodules, but I would like to avoid that.","body":"Should have mentioned I use maven for dependency management. When I manually add the dependency the way you describe I get a warning from Intellij &quot;module app is imported From Maven. Any changes made in its configuration might be lost after reimporting&quot;, basically telling me not to tinker with buildpath outside maven. I know I could create a new project in maven and put these two as submodules, but I would like to avoid that."},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1683905280,"post_id":76237296,"comment_id":134443057,"body_markdown":"Maven multi-module project is the way to go.","body":"Maven multi-module project is the way to go."},{"owner":{"account_id":12296497,"reputation":155,"user_id":8971977,"display_name":"mkcons"},"score":0,"creation_date":1683907947,"post_id":76237296,"comment_id":134443723,"body_markdown":"But, can I use a plugin to override Intellij&#39;s refactor behaviour?","body":"But, can I use a plugin to override Intellij&#39;s refactor behaviour?"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1683907994,"post_id":76237296,"comment_id":134443739,"body_markdown":"Probably, but that would be an overkill.","body":"Probably, but that would be an overkill."}],"answers":[{"tags":[],"owner":{"account_id":12296497,"reputation":155,"user_id":8971977,"display_name":"mkcons"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684745115,"creation_date":1684315512,"answer_id":76270534,"question_id":76237296,"body_markdown":"What I ended doing: I created a third project to act as a parent, checked out both app and lib as github submodules and then modified the parent pom to also include them as modules. Both projects are visible from Intellij, refactoring works and projects remain independent in their respective repos. ","title":"Intellij: refactor across separate projects - plugin or pull request?","body":"<p>What I ended doing: I created a third project to act as a parent, checked out both app and lib as github submodules and then modified the parent pom to also include them as modules. Both projects are visible from Intellij, refactoring works and projects remain independent in their respective repos.</p>\n"}],"owner":{"account_id":12296497,"reputation":155,"user_id":8971977,"display_name":"mkcons"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76270534,"answer_count":1,"score":0,"last_activity_date":1684745115,"creation_date":1683901588,"question_id":76237296,"body_markdown":"I have two Java projects, App and Lib. App depends on Lib, yet they are in different repositories. \r\n\r\nI would like to have them both open in the same Intellij window, refactor a constant within Lib, and have that applied in App as well. \r\n\r\nI am wondering what is the best way to approach this: implementing the function in Intellij src and submit a PR or creating a plugin. \r\n\r\nMy preference would be to create a plugin because the PR may not be accepted. At the same time, I would like to avoid implementing refactoring if I can, my intention is just to extend Intellij&#39;s refactoring scope to include all open projects. Not sure if a plugin can just override application functionality.  \r\n\r\nEdit: Maven is used for dependency management. ","title":"Intellij: refactor across separate projects - plugin or pull request?","body":"<p>I have two Java projects, App and Lib. App depends on Lib, yet they are in different repositories.</p>\n<p>I would like to have them both open in the same Intellij window, refactor a constant within Lib, and have that applied in App as well.</p>\n<p>I am wondering what is the best way to approach this: implementing the function in Intellij src and submit a PR or creating a plugin.</p>\n<p>My preference would be to create a plugin because the PR may not be accepted. At the same time, I would like to avoid implementing refactoring if I can, my intention is just to extend Intellij's refactoring scope to include all open projects. Not sure if a plugin can just override application functionality.</p>\n<p>Edit: Maven is used for dependency management.</p>\n"},{"tags":["java","java.util.scanner"],"answers":[{"tags":[],"owner":{"account_id":1090437,"reputation":6796,"user_id":1085186,"accept_rate":100,"display_name":"StackFlowed"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1411937634,"creation_date":1411937494,"answer_id":26089537,"question_id":26089522,"body_markdown":"You problem is that the next int doesn&#39;t consider the new line character which goes in the input for your name part. Hence name is returned as blank.\r\n\r\nYou can change your code in 2 ways:\r\n\r\n    System.out.print(&quot;Enter your age : &quot;);\r\n    age = keyboard.nextInt();\r\n    keyboard.nextLine();\r\n    System.out.print(&quot;Enter your name: &quot;);\r\n    name = keyboard.nextLine();\r\n\r\nor\r\n\r\n    System.out.print(&quot;Enter your age : &quot;);\r\n    age = Integer.parseInt(keyboard.nextLine().trim());\r\n    System.out.print(&quot;Enter your name: &quot;);\r\n    name = keyboard.nextLine();\r\n\r\nI personally like the second way.","title":"Trouble using nextInt and nextLine()","body":"<p>You problem is that the next int doesn't consider the new line character which goes in the input for your name part. Hence name is returned as blank.</p>\n\n<p>You can change your code in 2 ways:</p>\n\n<pre><code>System.out.print(\"Enter your age : \");\nage = keyboard.nextInt();\nkeyboard.nextLine();\nSystem.out.print(\"Enter your name: \");\nname = keyboard.nextLine();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>System.out.print(\"Enter your age : \");\nage = Integer.parseInt(keyboard.nextLine().trim());\nSystem.out.print(\"Enter your name: \");\nname = keyboard.nextLine();\n</code></pre>\n\n<p>I personally like the second way.</p>\n"}],"owner":{"account_id":5069681,"reputation":47,"user_id":4068770,"accept_rate":88,"display_name":"user4068770"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":26089537,"answer_count":1,"score":0,"last_activity_date":1684744362,"creation_date":1411937369,"question_id":26089522,"body_markdown":"It&#39;s not letting me put my name in but it does the age works fine.\r\nI know i can change the order of the statements but is there another way I could do it?\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class ScannerErr2\r\n    {\r\n      public static void main(String [] args)\r\n      {\r\n        Scanner keyboard= new Scanner(System.in);\r\n        String name;\r\n        int    age;\r\n    \r\n        System.out.print(&quot;Enter your age : &quot;);\r\n        age= keyboard.nextInt();\r\n        System.out.print(&quot;Enter your name: &quot;);\r\n        name= keyboard.nextLine();\r\n    \r\n        System.out.println(&quot;Age : &quot;+age);\r\n        System.out.println(&quot;Name: &quot;+name);\r\n      }\r\n    }","title":"Trouble using nextInt and nextLine()","body":"<p>It's not letting me put my name in but it does the age works fine.\nI know i can change the order of the statements but is there another way I could do it?</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class ScannerErr2\n{\n  public static void main(String [] args)\n  {\n    Scanner keyboard= new Scanner(System.in);\n    String name;\n    int    age;\n\n    System.out.print(\"Enter your age : \");\n    age= keyboard.nextInt();\n    System.out.print(\"Enter your name: \");\n    name= keyboard.nextLine();\n\n    System.out.println(\"Age : \"+age);\n    System.out.println(\"Name: \"+name);\n  }\n}\n</code></pre>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1424066624,"post_id":28535367,"comment_id":45385060,"body_markdown":"Consume a line at a time. Split the line on space, convert the resulting strings to ints.","body":"Consume a line at a time. Split the line on space, convert the resulting strings to ints."},{"owner":{"account_id":3579096,"reputation":2576,"user_id":2987706,"accept_rate":90,"display_name":"Prashant"},"score":0,"creation_date":1424066678,"post_id":28535367,"comment_id":45385070,"body_markdown":"do You want to read only single and first row??","body":"do You want to read only single and first row??"}],"answers":[{"comments":[{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":0,"creation_date":1424068171,"post_id":28535400,"comment_id":45385566,"body_markdown":"@Maxitus - You are wc :)","body":"@Maxitus - You are wc :)"}],"tags":[],"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1424066633,"creation_date":1424066633,"answer_id":28535400,"question_id":28535367,"body_markdown":"1. Use `hasNextLine()` in a `while` loop\r\n2. read the *lines* using `nextLine()` \r\n3. then split the values based on &quot;space[s]&quot;\r\n4. Parse each value as an Integer\r\n5. add them.\r\n\r\nAnd *realize* OMG, this is faster than using `nextInt()`","title":"Java: How to check for next ints without going to the next line (Scanner)","body":"<ol>\n<li>Use <code>hasNextLine()</code> in a <code>while</code> loop</li>\n<li>read the <em>lines</em> using <code>nextLine()</code> </li>\n<li>then split the values based on \"space[s]\"</li>\n<li>Parse each value as an Integer</li>\n<li>add them.</li>\n</ol>\n\n<p>And <em>realize</em> OMG, this is faster than using <code>nextInt()</code></p>\n"}],"owner":{"account_id":5794324,"reputation":13,"user_id":4570587,"display_name":"Maxitus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":28535400,"answer_count":1,"score":1,"last_activity_date":1684744295,"creation_date":1424066471,"question_id":28535367,"body_markdown":"Quick Java question: So I have a set of integers on two different lines, however, I want to regard them in different scenarios.\r\n\r\nSo I have a for loop that I want to continue through a list of integers and add them to, say an ArrayList, but I want it to stop before going to the next line.\r\n\r\nLike I would want it to stop at 2 in this situation:\r\n\r\n    1 4 2 91 4 0 2\r\n    3 5 8 6 9 88\r\nhasNextInt() stops at 88 instead of 2 like I would want it to (which makes sense).\r\n\r\nSo my question: is there a way to make it stop before going to the next line? I tried both nextInt() and next() and they both continued to the next line.\r\n\r\nMy code:\r\n\r\n    while (scan.hasNextInt())\r\n\t\t\t{\r\n\t\t\t\tif (stop == &#39;A&#39;)\r\n\t\t\t\t\tpassengers.put(stop, scan.nextInt() + subtract);\r\n\t\t\t\telse \r\n\t\t\t\t\tpassengers.put(stop, passengers.get((char)(stop - 1)) + scan.nextInt() + subtract);\r\n\t\t\t\tSystem.out.println(passengers);\r\n\t\t\t\tif (scan.hasNext())\r\n\t\t\t\t\tsubtract = scan.nextInt();\r\n\t\t\t\telse\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tstop++;\r\n\t\t\t}","title":"Java: How to check for next ints without going to the next line (Scanner)","body":"<p>Quick Java question: So I have a set of integers on two different lines, however, I want to regard them in different scenarios.</p>\n\n<p>So I have a for loop that I want to continue through a list of integers and add them to, say an ArrayList, but I want it to stop before going to the next line.</p>\n\n<p>Like I would want it to stop at 2 in this situation:</p>\n\n<pre><code>1 4 2 91 4 0 2\n3 5 8 6 9 88\n</code></pre>\n\n<p>hasNextInt() stops at 88 instead of 2 like I would want it to (which makes sense).</p>\n\n<p>So my question: is there a way to make it stop before going to the next line? I tried both nextInt() and next() and they both continued to the next line.</p>\n\n<p>My code:</p>\n\n<pre><code>while (scan.hasNextInt())\n        {\n            if (stop == 'A')\n                passengers.put(stop, scan.nextInt() + subtract);\n            else \n                passengers.put(stop, passengers.get((char)(stop - 1)) + scan.nextInt() + subtract);\n            System.out.println(passengers);\n            if (scan.hasNext())\n                subtract = scan.nextInt();\n            else\n                break;\n            stop++;\n        }\n</code></pre>\n"},{"tags":["java","ssl","jboss","jax-rs","httpclient"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1684498628,"post_id":76288795,"comment_id":134529872,"body_markdown":"That is an *incomplete* stacktrace.  You have omitted the part of the log message that shows the exception message.   And if you are getting an exception, that is not an indication that it is &quot;stuck&quot;.  Rather, it most likely means that it failed.","body":"That is an <i>incomplete</i> stacktrace.  You have omitted the part of the log message that shows the exception message.   And if you are getting an exception, that is not an indication that it is &quot;stuck&quot;.  Rather, it most likely means that it failed."},{"owner":{"account_id":11204964,"reputation":111,"user_id":8269948,"display_name":"Олег Гаврилів"},"score":0,"creation_date":1684499499,"post_id":76288795,"comment_id":134530090,"body_markdown":"updated stack trace. The request stuck for approximately one minute and then I see this log. But the successful response I got for approximately 2 seconds.","body":"updated stack trace. The request stuck for approximately one minute and then I see this log. But the successful response I got for approximately 2 seconds."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1684499652,"post_id":76288795,"comment_id":134530137,"body_markdown":"Possible reasons for &quot;random&quot; failure could be: 1) random network failures, 2) problems caused by network, router, firewall, etc misconfiguration, 3) network congestion, 4) some kind of anti-DOS or anti-scraper defenses being triggered, 5) bugs on the server side, 6) etcetera.","body":"Possible reasons for &quot;random&quot; failure could be: 1) random network failures, 2) problems caused by network, router, firewall, etc misconfiguration, 3) network congestion, 4) some kind of anti-DOS or anti-scraper defenses being triggered, 5) bugs on the server side, 6) etcetera."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1684499852,"post_id":76288795,"comment_id":134530172,"body_markdown":"Ah ... based on your updated log message, another possibility strikes me.  It could be that the server is draining its source of entropy (for generating random keys) and that is blocking it.   But that presupposes that that the server has been set up the wrong way; see https://serverfault.com/questions/1012010/can-ssl-tls-deplete-the-entropy-pool-of-my-server","body":"Ah ... based on your updated log message, another possibility strikes me.  It could be that the server is draining its source of entropy (for generating random keys) and that is blocking it.   But that presupposes that that the server has been set up the wrong way; see <a href=\"https://serverfault.com/questions/1012010/can-ssl-tls-deplete-the-entropy-pool-of-my-server\" title=\"can ssl tls deplete the entropy pool of my server\">serverfault.com/questions/1012010/&hellip;</a>"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1684500109,"post_id":76288795,"comment_id":134530216,"body_markdown":"My advice would be to look on the server side to see if problems show up there; e.g. in the logs.  If that doesn&#39;t help, use your favorite packet sniffing tool to try to isolate the problem to the client, server or network.","body":"My advice would be to look on the server side to see if problems show up there; e.g. in the logs.  If that doesn&#39;t help, use your favorite packet sniffing tool to try to isolate the problem to the client, server or network."},{"owner":{"account_id":11204964,"reputation":111,"user_id":8269948,"display_name":"Олег Гаврилів"},"score":0,"creation_date":1684500390,"post_id":76288795,"comment_id":134530276,"body_markdown":"@StephenC same code is working well on another env. It&#39;s some infra issue I guess. The server is located in the China region. But why it&#39;s not repro with curl command then.","body":"@StephenC same code is working well on another env. It&#39;s some infra issue I guess. The server is located in the China region. But why it&#39;s not repro with curl command then."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1684503031,"post_id":76288795,"comment_id":134530843,"body_markdown":"Probably because what you are sending with curl is (maybe subtly) different.  Packet sniffing may show what the differences are.","body":"Probably because what you are sending with curl is (maybe subtly) different.  Packet sniffing may show what the differences are."}],"owner":{"account_id":11204964,"reputation":111,"user_id":8269948,"display_name":"Олег Гаврилів"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684743946,"creation_date":1684497322,"question_id":76288795,"body_markdown":"I am using java 8 and Jboss EAP 7.3.9. When I call 3-d party service randomly my application sometimes didn&#39;t get response. It&#39;s repro only on specific env(It&#39;s located in China region). On other env with same code it&#39;s not repro. In logs I see next warning: \r\n\r\n    13:30:05,000 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper) ARJUNA012117: TransactionReaper::check timeout for TX 0:ffff0a9c8950:73df8c47:646382ee:1257 in state  RUN\r\n    13:30:05,003 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA012095: Abort of action id 0:ffff0a9c8950:73df8c47:646382ee:1257 invoked while multiple threads active within it.\r\n    13:30:05,006 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA012381: Action id 0:ffff0a9c8950:73df8c47:646382ee:1257 completed with multiple threads - thread default task-2 was in progress with java.net.SocketInputStream.socketRead0(Native Method)\r\n        java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n        java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n        java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n        sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:464)\r\n        sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:165)\r\n        sun.security.ssl.SSLTransport.decode(SSLTransport.java:109)\r\n        sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1397)\r\n        sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1305)\r\n        sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:440)\r\n        org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:436)\r\n        org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:384)\r\n        org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\r\n        org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)\r\n        org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)\r\n        org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\r\n        org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\r\n        org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n        org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n        org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n        org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n        org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n        org.jboss.resteasy.client.jaxrs.engines.ApacheHttpClient4Engine.invoke(ApacheHttpClient4Engine.java:320)\r\n        org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:447)\r\n        org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:64)\r\n        org.jboss.resteasy.client.jaxrs.internal.ClientInvocationBuilder.get(ClientInvocationBuilder.java:191)\r\n        com.my.service.impl.ClientServiceImpl.validate(ClientServiceImpl.java:99)\r\n\r\nI use next code to execute request :\r\n\r\n    Client restClient = ClientBuilder.newBuilder();\r\n    WebTarget target = restClient.target(uri);\r\n                   response = target.queryParam(&quot;token&quot;, value).queryParam(&quot;key&quot;, Key).request().get().readEntity(Response.class);\r\n\r\n\r\nWhat is the possible reasons why it randomly fails? Tried to reproduce with the curl command but without success.\r\n\r\n\r\n\r\n\r\n","title":"Https requst to external resourse get stuck randomly and no response for 3 minutes","body":"<p>I am using java 8 and Jboss EAP 7.3.9. When I call 3-d party service randomly my application sometimes didn't get response. It's repro only on specific env(It's located in China region). On other env with same code it's not repro. In logs I see next warning:</p>\n<pre><code>13:30:05,000 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper) ARJUNA012117: TransactionReaper::check timeout for TX 0:ffff0a9c8950:73df8c47:646382ee:1257 in state  RUN\n13:30:05,003 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA012095: Abort of action id 0:ffff0a9c8950:73df8c47:646382ee:1257 invoked while multiple threads active within it.\n13:30:05,006 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA012381: Action id 0:ffff0a9c8950:73df8c47:646382ee:1257 completed with multiple threads - thread default task-2 was in progress with java.net.SocketInputStream.socketRead0(Native Method)\n    java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\n    java.net.SocketInputStream.read(SocketInputStream.java:171)\n    java.net.SocketInputStream.read(SocketInputStream.java:141)\n    sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:464)\n    sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:165)\n    sun.security.ssl.SSLTransport.decode(SSLTransport.java:109)\n    sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1397)\n    sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1305)\n    sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:440)\n    org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:436)\n    org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:384)\n    org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\n    org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)\n    org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)\n    org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\n    org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\n    org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n    org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\n    org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n    org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n    org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    org.jboss.resteasy.client.jaxrs.engines.ApacheHttpClient4Engine.invoke(ApacheHttpClient4Engine.java:320)\n    org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:447)\n    org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:64)\n    org.jboss.resteasy.client.jaxrs.internal.ClientInvocationBuilder.get(ClientInvocationBuilder.java:191)\n    com.my.service.impl.ClientServiceImpl.validate(ClientServiceImpl.java:99)\n</code></pre>\n<p>I use next code to execute request :</p>\n<pre><code>Client restClient = ClientBuilder.newBuilder();\nWebTarget target = restClient.target(uri);\n               response = target.queryParam(&quot;token&quot;, value).queryParam(&quot;key&quot;, Key).request().get().readEntity(Response.class);\n</code></pre>\n<p>What is the possible reasons why it randomly fails? Tried to reproduce with the curl command but without success.</p>\n"},{"tags":["java","json","string","jackson"],"comments":[{"owner":{"account_id":3444631,"reputation":8971,"user_id":3872976,"accept_rate":85,"display_name":"deathangel908"},"score":2,"creation_date":1547737516,"post_id":54238693,"comment_id":95301968,"body_markdown":"Why don&#39;t you check performance yourself under load or using currentMillis and tell us? It really depends on various number of factors like json size and etc","body":"Why don&#39;t you check performance yourself under load or using currentMillis and tell us? It really depends on various number of factors like json size and etc"},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":5,"creation_date":1547737538,"post_id":54238693,"comment_id":95301979,"body_markdown":"Everytime you have to decide between parse and regex, go for parse. A parser has strict rules which get maintained (almost always) by a team of professionals. Whereas writing your own regex is quite error-prone","body":"Everytime you have to decide between parse and regex, go for parse. A parser has strict rules which get maintained (almost always) by a team of professionals. Whereas writing your own regex is quite error-prone"},{"owner":{"account_id":3444631,"reputation":8971,"user_id":3872976,"accept_rate":85,"display_name":"deathangel908"},"score":0,"creation_date":1547737634,"post_id":54238693,"comment_id":95302052,"body_markdown":"`Everytime you have to decide between parse and regex, go for parse` Well it&#39;s not true, if performance is really a bottleneck you can consider to do something crazy. As as I said if it&#39;s really so.","body":"<code>Everytime you have to decide between parse and regex, go for parse</code> Well it&#39;s not true, if performance is really a bottleneck you can consider to do something crazy. As as I said if it&#39;s really so."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1547737860,"post_id":54238693,"comment_id":95302206,"body_markdown":"@deathangel908 true, with highly specialized code you might be able to squeeze out some performance but string manipulation on Json you can&#39;t control is bound to get buggy in a nasty way. And if you can control the Json (structure, contents etc.) then there are probably faster, easier and less error prone ways to implement it by changing the Json/api itself.","body":"@deathangel908 true, with highly specialized code you might be able to squeeze out some performance but string manipulation on Json you can&#39;t control is bound to get buggy in a nasty way. And if you can control the Json (structure, contents etc.) then there are probably faster, easier and less error prone ways to implement it by changing the Json/api itself."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1547738159,"post_id":54238693,"comment_id":95302409,"body_markdown":"Ways regex can break when &quot;just appending a few zeroes to a number&quot; if you don&#39;t fully control possible inputs: the string expected to be a number contains non-digits (e.g. `.` or `E`)  - what do you do? Silently leave the input unmodified? Throw? Append zeroes anyway? What if the &quot;number&quot; is `0` - is appending a few more zeroes the right thing to do, or did you mean to add `+1000`?","body":"Ways regex can break when &quot;just appending a few zeroes to a number&quot; if you don&#39;t fully control possible inputs: the string expected to be a number contains non-digits (e.g. <code>.</code> or <code>E</code>)  - what do you do? Silently leave the input unmodified? Throw? Append zeroes anyway? What if the &quot;number&quot; is <code>0</code> - is appending a few more zeroes the right thing to do, or did you mean to add <code>+1000</code>?"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1547738900,"post_id":54238693,"comment_id":95302935,"body_markdown":"Of course, there are rare occasions where &quot;just appending&quot; something is correct - for example, these numbers might be some kind of serial number, where one of two systems appends some additional digits that the other one omits because they are known to be always zero anyway. Still, I would always prefer parsing, because it gives you more flexibility as to how to react when encountering unexpected input.","body":"Of course, there are rare occasions where &quot;just appending&quot; something is correct - for example, these numbers might be some kind of serial number, where one of two systems appends some additional digits that the other one omits because they are known to be always zero anyway. Still, I would always prefer parsing, because it gives you more flexibility as to how to react when encountering unexpected input."}],"answers":[{"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1547799254,"post_id":54240917,"comment_id":95323992,"body_markdown":"this question is about java and not javascript, though you have a probable valid answer in the second paragraph","body":"this question is about java and not javascript, though you have a probable valid answer in the second paragraph"},{"owner":{"account_id":12587200,"reputation":787,"user_id":9155551,"display_name":"Itai Steinherz"},"score":0,"creation_date":1547799758,"post_id":54240917,"comment_id":95324186,"body_markdown":"Thanks, I didn&#39;t even notice. I&#39;ll update my answer.","body":"Thanks, I didn&#39;t even notice. I&#39;ll update my answer."},{"owner":{"account_id":4906361,"reputation":3077,"user_id":3952994,"accept_rate":76,"display_name":"Holm"},"score":0,"creation_date":1547806903,"post_id":54240917,"comment_id":95327910,"body_markdown":"I add more manipulations based on your link, and it shows JSON.parse performs better  https://jsbench.me/93jr1w6k5b/1","body":"I add more manipulations based on your link, and it shows JSON.parse performs better  <a href=\"https://jsbench.me/93jr1w6k5b/1\" rel=\"nofollow noreferrer\">jsbench.me/93jr1w6k5b/1</a>"},{"owner":{"account_id":12587200,"reputation":787,"user_id":9155551,"display_name":"Itai Steinherz"},"score":0,"creation_date":1547807388,"post_id":54240917,"comment_id":95328191,"body_markdown":"@AkiraSendoh That&#39;s because you are comparing two pieces of code which do different things. The first sets `number1`...`number13` to be `{jsonObject.number}000`, and the second sets `number` to be `{number}000` 13 times.","body":"@AkiraSendoh That&#39;s because you are comparing two pieces of code which do different things. The first sets <code>number1</code>...<code>number13</code> to be <code>{jsonObject.number}000</code>, and the second sets <code>number</code> to be <code>{number}000</code> 13 times."},{"owner":{"account_id":4906361,"reputation":3077,"user_id":3952994,"accept_rate":76,"display_name":"Holm"},"score":0,"creation_date":1547807690,"post_id":54240917,"comment_id":95328380,"body_markdown":"I changed to .number instead of number1 ... number13, the result was the same. if several new attributes are created and it should further slow Json Parse approach, or?","body":"I changed to .number instead of number1 ... number13, the result was the same. if several new attributes are created and it should further slow Json Parse approach, or?"},{"owner":{"account_id":12587200,"reputation":787,"user_id":9155551,"display_name":"Itai Steinherz"},"score":0,"creation_date":1547832987,"post_id":54240917,"comment_id":95341886,"body_markdown":"@AkiraSendoh In your fork, the `JSON.parse` benckmark does a different thing than the `.replace` one - it set 13 different properties, whereas the second sets the same property 13 different times. Also, the `.replace` appends `000` to `jsonObj.number` on every line.","body":"@AkiraSendoh In your fork, the <code>JSON.parse</code> benckmark does a different thing than the <code>.replace</code> one - it set 13 different properties, whereas the second sets the same property 13 different times. Also, the <code>.replace</code> appends <code>000</code> to <code>jsonObj.number</code> on every line."},{"owner":{"account_id":4906361,"reputation":3077,"user_id":3952994,"accept_rate":76,"display_name":"Holm"},"score":0,"creation_date":1548061059,"post_id":54240917,"comment_id":95393684,"body_markdown":"changing to set 1 property the `JSON.parse` approach performs still better, and to set 1 property should be less expensive than to set 13 properties. For your second  question, appending 000 indicates one operation for an attribute(or several attributes). This mimics the case that after parsing to JSON, several operations are executed on a Json Object. For manipulating directly on a String, `.replace` on every line is the only way","body":"changing to set 1 property the <code>JSON.parse</code> approach performs still better, and to set 1 property should be less expensive than to set 13 properties. For your second  question, appending 000 indicates one operation for an attribute(or several attributes). This mimics the case that after parsing to JSON, several operations are executed on a Json Object. For manipulating directly on a String, <code>.replace</code> on every line is the only way"}],"tags":[],"owner":{"account_id":12587200,"reputation":787,"user_id":9155551,"display_name":"Itai Steinherz"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547800441,"creation_date":1547744695,"answer_id":54240917,"question_id":54238693,"body_markdown":"Since I&#39;m not very familiar with JSON parsing/manipulation in Java, I&#39;ll compare the same operations in JavaScript (which I am more experienced in).\r\n\r\nComparing using a basic regex with `.replace` and using `JSON.parse` &amp; `JSON.stringify`, the result are that **using `JSON.parse` is slower by a small percentage** (4.37% to be precise).\r\n\r\nHowever, I don&#39;t think the perf gain is worth it, and I would always go with more readable and maintainable code (the `JSON.parse` approach) rather than the more performant (the `.replace` approach).\r\n\r\nSee the complete benchmark I used [here](https://jsbench.me/i3jr0v0svh/1).","title":"Should I parse json string to json object or manipulate the string directly","body":"<p>Since I'm not very familiar with JSON parsing/manipulation in Java, I'll compare the same operations in JavaScript (which I am more experienced in).</p>\n\n<p>Comparing using a basic regex with <code>.replace</code> and using <code>JSON.parse</code> &amp; <code>JSON.stringify</code>, the result are that <strong>using <code>JSON.parse</code> is slower by a small percentage</strong> (4.37% to be precise).</p>\n\n<p>However, I don't think the perf gain is worth it, and I would always go with more readable and maintainable code (the <code>JSON.parse</code> approach) rather than the more performant (the <code>.replace</code> approach).</p>\n\n<p>See the complete benchmark I used <a href=\"https://jsbench.me/i3jr0v0svh/1\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684743840,"creation_date":1684743840,"answer_id":76304288,"question_id":54238693,"body_markdown":"I would just use the regular expression.\r\n\r\nI imagine the parser is using some form of pattern matching, or most-likely a for-loop on a character stream.\r\n\r\n```regex\r\n\\&quot;number\\&quot;:\\s+\\&quot;(\\d+)\\&quot;\r\n```\r\n\r\nYou can reference [RFC 8259](https://www.rfc-editor.org/rfc/rfc8259) for a complete BNF on the JSON grammar and syntax.","title":"Should I parse json string to json object or manipulate the string directly","body":"<p>I would just use the regular expression.</p>\n<p>I imagine the parser is using some form of pattern matching, or most-likely a for-loop on a character stream.</p>\n<pre><code>\\&quot;number\\&quot;:\\s+\\&quot;(\\d+)\\&quot;\n</code></pre>\n<p>You can reference <a href=\"https://www.rfc-editor.org/rfc/rfc8259\" rel=\"nofollow noreferrer\">RFC 8259</a> for a complete BNF on the JSON grammar and syntax.</p>\n"}],"owner":{"account_id":4906361,"reputation":3077,"user_id":3952994,"accept_rate":76,"display_name":"Holm"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1443,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1684743840,"creation_date":1547737403,"question_id":54238693,"body_markdown":"normally I parse a json string to json object instead of manipulating the json string directly. for example, a json string like\r\n\r\n```\r\n{&quot;number&quot;: &quot;1234567&quot;}\r\n\r\n```\r\nif I have to add 000 at the end\r\n```\r\n...\r\n{...,&quot;number&quot; : &quot;1234567000&quot;,...}\r\n....\r\n```\r\nI will use jackson either parse it as Json Object or POJO\r\n\r\nI understand readability perspective parsing to Json object or POJO is much better, but I&#39;m curious about the performance. In this case, if I manipulate the json string directly, I have to use regex to extract the number attribute, and add 000 at the end, which is much more expensive than parsing to Json Object if having lots of data? because string object basically creates a new string object?\r\n\r\n\r\n**EDIT**:\r\nBased on @Itai Steinherz&#39;s link I also make a benchmark in JS, and it shows json parse is better\r\nhttps://jsbench.me/93jr1w6k5b/1","title":"Should I parse json string to json object or manipulate the string directly","body":"<p>normally I parse a json string to json object instead of manipulating the json string directly. for example, a json string like</p>\n\n<pre><code>{\"number\": \"1234567\"}\n\n</code></pre>\n\n<p>if I have to add 000 at the end</p>\n\n<pre><code>...\n{...,\"number\" : \"1234567000\",...}\n....\n</code></pre>\n\n<p>I will use jackson either parse it as Json Object or POJO</p>\n\n<p>I understand readability perspective parsing to Json object or POJO is much better, but I'm curious about the performance. In this case, if I manipulate the json string directly, I have to use regex to extract the number attribute, and add 000 at the end, which is much more expensive than parsing to Json Object if having lots of data? because string object basically creates a new string object?</p>\n\n<p><strong>EDIT</strong>:\nBased on @Itai Steinherz's link I also make a benchmark in JS, and it shows json parse is better\n<a href=\"https://jsbench.me/93jr1w6k5b/1\" rel=\"nofollow noreferrer\">https://jsbench.me/93jr1w6k5b/1</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":24564,"reputation":123812,"user_id":62576,"accept_rate":100,"display_name":"Ken White"},"score":0,"creation_date":1520391712,"post_id":49143379,"comment_id":85292229,"body_markdown":"Fix your code. Stopping updates is like inviting malware in, and you should not do so. Any app that requires stopping updates gets an instant blacklist from every computer on my network and my persona machines. Want yours to join them on every network?","body":"Fix your code. Stopping updates is like inviting malware in, and you should not do so. Any app that requires stopping updates gets an instant blacklist from every computer on my network and my persona machines. Want yours to join them on every network?"},{"owner":{"account_id":3292440,"reputation":2216,"user_id":7088038,"display_name":"avigil"},"score":0,"creation_date":1520399449,"post_id":49143379,"comment_id":85294227,"body_markdown":"windows is not installing java updates. The JRE has its own updater.","body":"windows is not installing java updates. The JRE has its own updater."},{"owner":{"account_id":9616794,"reputation":61,"user_id":7139303,"display_name":"Vic Liu"},"score":0,"creation_date":1520399751,"post_id":49143379,"comment_id":85294305,"body_markdown":"yes, I want to disable the JRE own updates","body":"yes, I want to disable the JRE own updates"}],"answers":[{"tags":[],"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1520393318,"creation_date":1520393318,"answer_id":49143635,"question_id":49143379,"body_markdown":"It is highly recommended that you **do not** disable automatic updates, as your programs can become prone to malware.  If you decide to follow through with this, the consequences are your own.\r\n\r\nIn the Java Control Panel (which you can get to from Windows&#39; Control Panel), navigate to the `Update` tab, and verify that `Automatically check for updates (Recommended)` is **unchecked**, as seen in the image below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nNext, navigate to the `Advanced` tab and select the `Application Installation` sub-tab.  Verify that the `Never install` radio button **is ticked**, as seen in the image below.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAfter this, you should be good to go!\r\n\r\n**Note**: Remember to hit `Apply` after making any changes to settings within these menus.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/44D5T.png\r\n  [2]: https://i.stack.imgur.com/GLwSO.png","title":"How to disable JRE auto update in Windows 10?","body":"<p>It is highly recommended that you <strong>do not</strong> disable automatic updates, as your programs can become prone to malware.  If you decide to follow through with this, the consequences are your own.</p>\n\n<p>In the Java Control Panel (which you can get to from Windows' Control Panel), navigate to the <code>Update</code> tab, and verify that <code>Automatically check for updates (Recommended)</code> is <strong>unchecked</strong>, as seen in the image below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/44D5T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/44D5T.png\" alt=\"enter image description here\"></a></p>\n\n<p>Next, navigate to the <code>Advanced</code> tab and select the <code>Application Installation</code> sub-tab.  Verify that the <code>Never install</code> radio button <strong>is ticked</strong>, as seen in the image below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GLwSO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GLwSO.png\" alt=\"enter image description here\"></a></p>\n\n<p>After this, you should be good to go!</p>\n\n<p><strong>Note</strong>: Remember to hit <code>Apply</code> after making any changes to settings within these menus.</p>\n"}],"owner":{"account_id":9616794,"reputation":61,"user_id":7139303,"display_name":"Vic Liu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10722,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1684743584,"creation_date":1520391426,"question_id":49143379,"body_markdown":"Windows will automatically update the JRE when Java posts new updates, but my Elasticsearch only uses jRE of the specified version, how to disable JRE auto-update in Windows system?","title":"How to disable JRE auto update in Windows 10?","body":"<p>Windows will automatically update the JRE when Java posts new updates, but my Elasticsearch only uses jRE of the specified version, how to disable JRE auto-update in Windows system?</p>\n"},{"tags":["java","mysql","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1683887966,"post_id":76235394,"comment_id":134438871,"body_markdown":"Are you sure that the repository is properly auto-configured as JPA repository by Spring Boot? Did the same code actually work in Spring Boot 2? Can you see in the logs: &quot;Bootstrapping Spring Data JPA repositories&quot; and &quot;Found NNN JPA repository interfaces&quot;","body":"Are you sure that the repository is properly auto-configured as JPA repository by Spring Boot? Did the same code actually work in Spring Boot 2? Can you see in the logs: &quot;Bootstrapping Spring Data JPA repositories&quot; and &quot;Found NNN JPA repository interfaces&quot;"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1683888410,"post_id":76235394,"comment_id":134438966,"body_markdown":"If &quot;SELECT c FROM MyClass c WHERE c.delivered = *true*&quot; works, doesn&#39;t that mean that DELIVERED is actually a BOOLEAN and not a VARCHAR?","body":"If &quot;SELECT c FROM MyClass c WHERE c.delivered = <i>true</i>&quot; works, doesn&#39;t that mean that DELIVERED is actually a BOOLEAN and not a VARCHAR?"},{"owner":{"account_id":4862517,"reputation":1544,"user_id":3921725,"display_name":"Alex Roig"},"score":0,"creation_date":1683965954,"post_id":76235394,"comment_id":134450030,"body_markdown":"The same code works in SB 2. The JPA is properly configured and I see the mentioned log. Also, rewriting the query as `findAllByDelivered(Boolean delivered);` would work. As mentioned, at database layer the underlying type is VARCHAR and a converter is used","body":"The same code works in SB 2. The JPA is properly configured and I see the mentioned log. Also, rewriting the query as <code>findAllByDelivered(Boolean delivered);</code> would work. As mentioned, at database layer the underlying type is VARCHAR and a converter is used"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1684141405,"post_id":76235394,"comment_id":134467892,"body_markdown":"@AlexRoig have you tried **to not** use `is` verb? i.e. `findAllByDeliveredTrue` instead of `findAllByDeliveredIsTrue`?","body":"@AlexRoig have you tried <b>to not</b> use <code>is</code> verb? i.e. <code>findAllByDeliveredTrue</code> instead of <code>findAllByDeliveredIsTrue</code>?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1684143936,"post_id":76235394,"comment_id":134468504,"body_markdown":"@AndreyB.Panfilov Please state exactly how changing the method name as you suggest could possibly fix this problem. It can&#39;t.","body":"@AndreyB.Panfilov Please state exactly how changing the method name as you suggest could possibly fix this problem. It can&#39;t."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1684144019,"post_id":76235394,"comment_id":134468530,"body_markdown":"@OP There is no such thing as an `isTrue` keyword anywhere in your post. Please clarify.","body":"@OP There is no such thing as an <code>isTrue</code> keyword anywhere in your post. Please clarify."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1684144267,"post_id":76235394,"comment_id":134468584,"body_markdown":"@user207421 I would suggest to read [official documentation](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation) first: &quot;True findByActiveTrue() … where x.active = true&quot;","body":"@user207421 I would suggest to read <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation\" rel=\"nofollow noreferrer\">official documentation</a> first: &quot;True findByActiveTrue() … where x.active = true&quot;"},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":0,"creation_date":1684169419,"post_id":76235394,"comment_id":134474642,"body_markdown":"You are carefully handling &quot;null&quot; as a third possible value.  Perhaps the problem is there?","body":"You are carefully handling &quot;null&quot; as a third possible value.  Perhaps the problem is there?"}],"answers":[{"comments":[{"owner":{"account_id":4862517,"reputation":1544,"user_id":3921725,"display_name":"Alex Roig"},"score":1,"creation_date":1684180204,"post_id":76256341,"comment_id":134476846,"body_markdown":"Null handling is a good point but the BooleanToString converter implementation I have already covers it. The thing is that these queries worked on SpringBoot 2 and out of the blue on Spring Boot 3 they no longer work. It looks like there&#39;s some new query optimiser that replaces the JPQL to `c1_0.COND_ACTIU` to implicitly test the boolean true state instead of specifying it and as it doesn&#39;t go through the converter, the DB doesn&#39;t actually know what to compare it against. The DB is something I can&#39;t change and there&#39;s a custom ERP and we don&#39;t have control over it.","body":"Null handling is a good point but the BooleanToString converter implementation I have already covers it. The thing is that these queries worked on SpringBoot 2 and out of the blue on Spring Boot 3 they no longer work. It looks like there&#39;s some new query optimiser that replaces the JPQL to <code>c1_0.COND_ACTIU</code> to implicitly test the boolean true state instead of specifying it and as it doesn&#39;t go through the converter, the DB doesn&#39;t actually know what to compare it against. The DB is something I can&#39;t change and there&#39;s a custom ERP and we don&#39;t have control over it."}],"tags":[],"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684169864,"creation_date":1684169864,"answer_id":76256341,"question_id":76235394,"body_markdown":"The code you showed does not work with a boolean, but rather a tri-state value.  Decide what you will do with NULLs.  Then be sure to have 3 cases throughout your code.\r\n\r\nI would not bother trying to fix the yes/no being in a VARCHAR unless you can actually fix the schema and the data.  Instead, test for `== &#39;N&#39;` as needed.  (I picked the &quot;no&quot; side because that works with most European languages.\r\n\r\nNote, however, that `== &#39;Y&#39;` is not the same as `!= &#39;N&#39;` -- because of the NULL option.\r\n\r\nAlso, check that the `COLLATION` of that `VARCHAR` is case-folding so that &#39;n&#39; == &#39;N&#39;.  The collation name should end in `_ci``.","title":"SpringBoot 3 (Data) keyword isTrue doesn&#39;t work","body":"<p>The code you showed does not work with a boolean, but rather a tri-state value.  Decide what you will do with NULLs.  Then be sure to have 3 cases throughout your code.</p>\n<p>I would not bother trying to fix the yes/no being in a VARCHAR unless you can actually fix the schema and the data.  Instead, test for <code>== 'N'</code> as needed.  (I picked the &quot;no&quot; side because that works with most European languages.</p>\n<p>Note, however, that <code>== 'Y'</code> is not the same as <code>!= 'N'</code> -- because of the NULL option.</p>\n<p>Also, check that the <code>COLLATION</code> of that <code>VARCHAR</code> is case-folding so that 'n' == 'N'.  The collation name should end in `_ci``.</p>\n"},{"tags":[],"owner":{"account_id":4862517,"reputation":1544,"user_id":3921725,"display_name":"Alex Roig"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684742950,"creation_date":1684742950,"answer_id":76304177,"question_id":76235394,"body_markdown":"It turns out it&#39;s an issue on CriteriaBuilder on Spring Data. The issue is being tracked on the [repository issue #2800](https://github.com/spring-projects/spring-data-jpa/issues/2800). At the moment of answering it&#39;s still not resolved and affected versions are at least `Spring Boot 3.0.2`","title":"SpringBoot 3 (Data) keyword isTrue doesn&#39;t work","body":"<p>It turns out it's an issue on CriteriaBuilder on Spring Data. The issue is being tracked on the <a href=\"https://github.com/spring-projects/spring-data-jpa/issues/2800\" rel=\"nofollow noreferrer\">repository issue #2800</a>. At the moment of answering it's still not resolved and affected versions are at least <code>Spring Boot 3.0.2</code></p>\n"}],"owner":{"account_id":4862517,"reputation":1544,"user_id":3921725,"display_name":"Alex Roig"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":76304177,"answer_count":2,"score":5,"last_activity_date":1684742950,"creation_date":1683887368,"question_id":76235394,"body_markdown":"I&#39;m seeing something strange after upgrading my app to SpringBoot 3 from SpringBoot 2.\r\n\r\nThe application relies on an existing database (MySQL) which doesn&#39;t use good practices. One of them is using `Y` `N` for booleans stored in a VARCHAR.\r\n\r\nTo make things easier on the Java side, I created a converter that looks like this:\r\n\r\n``` java\r\n@Converter\r\npublic class BooleanToStringConverter implements AttributeConverter&lt;Boolean, String&gt; {\r\n\r\n    @Override\r\n    public String convertToDatabaseColumn(Boolean attribute) {\r\n        if (attribute == null) {\r\n            return null;\r\n        }\r\n        return attribute ? &quot;Y&quot; : &quot;N&quot;;\r\n    }\r\n\r\n    @Override\r\n    public Boolean convertToEntityAttribute(String dbData) {\r\n        if (dbData == null) {\r\n            return null;\r\n        }\r\n        return dbData.equals(&quot;Y&quot;);\r\n    }\r\n}\r\n```\r\n\r\nAnd on my beans I use it as:\r\n``` java\r\n@Column(name = &quot;DELIVERED&quot;)\r\n@Convert(converter = BooleanToStringConverter.class)\r\nprivate Boolean delivered;\r\n```\r\n\r\nSo far so good.\r\n\r\nIf I create a repository to query all delivered entities I&#39;d write something like this in SpringBoot 2:\r\n\r\n```\r\nList&lt;MyClass&gt; findAllByDeliveredIsTrue();\r\n```\r\n\r\nBut if I run this in SpringBoot 3 it returns an empty list.\r\n\r\nI need to write the query manually to make it work.\r\n\r\n```\r\n@Query(&quot;SELECT c FROM MyClass c WHERE c.delivered = true&quot;)\r\nList&lt;MyClass&gt; findAllByDeliveredIsTrue();\r\n```\r\n\r\nAny idea why it&#39;s happening?\r\n\r\n\r\n----------\r\nEdit:\r\n\r\nI&#39;ve enabled SQL Logs and definitely queries are created differently. For sake of simplicity I translated some things on the post because on real scenario the database is in Spanish and it uses `S`/`N` instead of `Y`/`N`.\r\n\r\n```java\r\nJava service\r\n    @PostConstruct\r\n    public void init() {\r\n        log.error(&quot;DEBUG INIT&quot;);\r\n        repo.findFirstByActiuIsTrueOrderByDataDesc();\r\n        repo.findFirstByActiuIsTrueOrderByDataDesc1(); ///Working case\r\n        log.error(&quot;DEBUG END&quot;);\r\n    }\r\n\r\n```\r\n```java\r\nRepository\r\n\r\n//Failing case\r\nOptional&lt;Condicio&gt; findFirstByActiuIsTrueOrderByDataDesc();\r\n\r\n\r\n@Query(&quot;SELECT c FROM Condicio c WHERE c.actiu = true ORDER BY c.data ASC&quot;)\r\nOptional&lt;Condicio&gt; findFirstByActiuIsTrueOrderByDataDesc1(); //Working case\r\n\r\n```\r\n \r\n\r\n```\r\n2023-05-13T10:23:19.336+02:00 ERROR 42936 --- [  restartedMain] c.n.a.backend.service.CondicioService    : DEBUG INIT\r\nHibernate: select c1_0.COND_CONDICIO,c1_0.COND_ACTIU,c1_0.COND_DATA,c1_0.COND_DESCRIPCIO from CONDICIONS c1_0 where c1_0.COND_ACTIU order by c1_0.COND_DATA desc limit ?\r\nHibernate: select c1_0.COND_CONDICIO,c1_0.COND_ACTIU,c1_0.COND_DATA,c1_0.COND_DESCRIPCIO from CONDICIONS c1_0 where c1_0.COND_ACTIU=&#39;S&#39; order by c1_0.COND_DATA asc\r\n2023-05-13T10:23:19.451+02:00 ERROR 42936 --- [  restartedMain] c.n.a.backend.service.CondicioService    : DEBUG END\r\n```\r\n","title":"SpringBoot 3 (Data) keyword isTrue doesn&#39;t work","body":"<p>I'm seeing something strange after upgrading my app to SpringBoot 3 from SpringBoot 2.</p>\n<p>The application relies on an existing database (MySQL) which doesn't use good practices. One of them is using <code>Y</code> <code>N</code> for booleans stored in a VARCHAR.</p>\n<p>To make things easier on the Java side, I created a converter that looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Converter\npublic class BooleanToStringConverter implements AttributeConverter&lt;Boolean, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(Boolean attribute) {\n        if (attribute == null) {\n            return null;\n        }\n        return attribute ? &quot;Y&quot; : &quot;N&quot;;\n    }\n\n    @Override\n    public Boolean convertToEntityAttribute(String dbData) {\n        if (dbData == null) {\n            return null;\n        }\n        return dbData.equals(&quot;Y&quot;);\n    }\n}\n</code></pre>\n<p>And on my beans I use it as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Column(name = &quot;DELIVERED&quot;)\n@Convert(converter = BooleanToStringConverter.class)\nprivate Boolean delivered;\n</code></pre>\n<p>So far so good.</p>\n<p>If I create a repository to query all delivered entities I'd write something like this in SpringBoot 2:</p>\n<pre><code>List&lt;MyClass&gt; findAllByDeliveredIsTrue();\n</code></pre>\n<p>But if I run this in SpringBoot 3 it returns an empty list.</p>\n<p>I need to write the query manually to make it work.</p>\n<pre><code>@Query(&quot;SELECT c FROM MyClass c WHERE c.delivered = true&quot;)\nList&lt;MyClass&gt; findAllByDeliveredIsTrue();\n</code></pre>\n<p>Any idea why it's happening?</p>\n<hr />\n<p>Edit:</p>\n<p>I've enabled SQL Logs and definitely queries are created differently. For sake of simplicity I translated some things on the post because on real scenario the database is in Spanish and it uses <code>S</code>/<code>N</code> instead of <code>Y</code>/<code>N</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Java service\n    @PostConstruct\n    public void init() {\n        log.error(&quot;DEBUG INIT&quot;);\n        repo.findFirstByActiuIsTrueOrderByDataDesc();\n        repo.findFirstByActiuIsTrueOrderByDataDesc1(); ///Working case\n        log.error(&quot;DEBUG END&quot;);\n    }\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Repository\n\n//Failing case\nOptional&lt;Condicio&gt; findFirstByActiuIsTrueOrderByDataDesc();\n\n\n@Query(&quot;SELECT c FROM Condicio c WHERE c.actiu = true ORDER BY c.data ASC&quot;)\nOptional&lt;Condicio&gt; findFirstByActiuIsTrueOrderByDataDesc1(); //Working case\n\n</code></pre>\n<pre><code>2023-05-13T10:23:19.336+02:00 ERROR 42936 --- [  restartedMain] c.n.a.backend.service.CondicioService    : DEBUG INIT\nHibernate: select c1_0.COND_CONDICIO,c1_0.COND_ACTIU,c1_0.COND_DATA,c1_0.COND_DESCRIPCIO from CONDICIONS c1_0 where c1_0.COND_ACTIU order by c1_0.COND_DATA desc limit ?\nHibernate: select c1_0.COND_CONDICIO,c1_0.COND_ACTIU,c1_0.COND_DATA,c1_0.COND_DESCRIPCIO from CONDICIONS c1_0 where c1_0.COND_ACTIU='S' order by c1_0.COND_DATA asc\n2023-05-13T10:23:19.451+02:00 ERROR 42936 --- [  restartedMain] c.n.a.backend.service.CondicioService    : DEBUG END\n</code></pre>\n"},{"tags":["java","database","hibernate","join"],"comments":[{"owner":{"account_id":39274,"reputation":6968,"user_id":113173,"accept_rate":75,"display_name":"jdc0589"},"score":1,"creation_date":1282605099,"post_id":3552330,"comment_id":3721769,"body_markdown":"By convention, you should not really be interacting between multiple databases like this, even if some do support it. You should get the information you need from each database separately and consolidate into instances of some business object yourself.","body":"By convention, you should not really be interacting between multiple databases like this, even if some do support it. You should get the information you need from each database separately and consolidate into instances of some business object yourself."},{"owner":{"account_id":189507,"reputation":121,"user_id":428873,"display_name":"Oberoc"},"score":0,"creation_date":1282605997,"post_id":3552330,"comment_id":3721843,"body_markdown":"@JDC0589 Are you referring to the Repository Pattern or some of the other exotic ways that I am trying to coax Hibernate into doing what I need it to do?","body":"@JDC0589 Are you referring to the Repository Pattern or some of the other exotic ways that I am trying to coax Hibernate into doing what I need it to do?"}],"answers":[{"comments":[{"owner":{"account_id":189507,"reputation":121,"user_id":428873,"display_name":"Oberoc"},"score":0,"creation_date":1282606102,"post_id":3552375,"comment_id":3721854,"body_markdown":"Thanks. I will see how much of a bureaucratic red tape that will involve (synonyms are easy - convincing managers - less so)","body":"Thanks. I will see how much of a bureaucratic red tape that will involve (synonyms are easy - convincing managers - less so)"}],"tags":[],"owner":{"account_id":62054,"reputation":22899,"user_id":184581,"accept_rate":62,"display_name":"Mike Q"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1282604829,"creation_date":1282604829,"answer_id":3552375,"question_id":3552330,"body_markdown":"You have a couple of problems unfortunately.\r\n\r\n- Hibernate does not supporting joining across multiple &quot;physical&quot; database instances\r\n- Out of the box, most database don&#39;t support joining across multiple &quot;physical&quot; database instances\r\n\r\nFundamentally DBs are only good/performant at joining tables that are in the same database.  There are ways of joining across databases but if the size of both tables is big this can be a problem, and peformance may suffer.  Do some googling on &quot;oracle join across database&quot; and you&#39;ll find some pointers on how to do this but it involves fiddling around with Oracle create a virtual link from one DB to the other.\r\n\r\nI would consider either doing the join in memory, if you are comfortable the data set will fit within the memory constraints AND you are only doing this in one special case.\r\n\r\nIf you&#39;ll need to do different joins between these two databases then I would go for a more permanent solution, like the Oracle linking above.\r\n","title":"Doing a join over 2 tables in different databases using Hibernate","body":"<p>You have a couple of problems unfortunately.</p>\n\n<ul>\n<li>Hibernate does not supporting joining across multiple \"physical\" database instances</li>\n<li>Out of the box, most database don't support joining across multiple \"physical\" database instances</li>\n</ul>\n\n<p>Fundamentally DBs are only good/performant at joining tables that are in the same database.  There are ways of joining across databases but if the size of both tables is big this can be a problem, and peformance may suffer.  Do some googling on \"oracle join across database\" and you'll find some pointers on how to do this but it involves fiddling around with Oracle create a virtual link from one DB to the other.</p>\n\n<p>I would consider either doing the join in memory, if you are comfortable the data set will fit within the memory constraints AND you are only doing this in one special case.</p>\n\n<p>If you'll need to do different joins between these two databases then I would go for a more permanent solution, like the Oracle linking above.</p>\n"},{"tags":[],"owner":{"account_id":140076,"reputation":14964,"user_id":346112,"accept_rate":97,"display_name":"Jim Tough"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684742944,"creation_date":1282606558,"answer_id":3552498,"question_id":3552330,"body_markdown":"I have no experience with doing this myself, but I know that Oracle supports database &quot;links&quot; ([tag:dblink]) between two separate database instances.  Maybe this article will help you?\r\n\r\n[Post on Hibernate forums about using Oracle link between two instances][1]\r\n\r\n\r\n  [1]: https://forum.hibernate.org/viewtopic.php?t=994403&amp;sid=c54ddfe21ace9706fd9fddd4a335c43e","title":"Doing a join over 2 tables in different databases using Hibernate","body":"<p>I have no experience with doing this myself, but I know that Oracle supports database &quot;links&quot; (<a href=\"/questions/tagged/dblink\" class=\"post-tag\" title=\"show questions tagged &#39;dblink&#39;\" aria-label=\"show questions tagged &#39;dblink&#39;\" rel=\"tag\" aria-labelledby=\"tag-dblink-tooltip-container\">dblink</a>) between two separate database instances.  Maybe this article will help you?</p>\n<p><a href=\"https://forum.hibernate.org/viewtopic.php?t=994403&amp;sid=c54ddfe21ace9706fd9fddd4a335c43e\" rel=\"nofollow noreferrer\">Post on Hibernate forums about using Oracle link between two instances</a></p>\n"}],"owner":{"account_id":189507,"reputation":121,"user_id":428873,"display_name":"Oberoc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11610,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":2,"score":12,"last_activity_date":1684742944,"creation_date":1282604129,"question_id":3552330,"body_markdown":"I have two tables in two separate **Oracle databases** (not schemas) that I need to **join in Hibernate**.  Currently, I have two Hibernate sessions going out to the separate databases. Before anybody says look at **Hibernate Shards**, I have spent a better part of a day looking at that sub-project and have found that: it is for horizontal partitioned data (all the tables must be in all of the databases AFAIK), there is no way for one to tell Shards to look only in one database ([Hibernate Shards Docs][1]), and is no longer being worked on.\r\n\r\nThings that I have thought about to try to solve this problem:  \r\n\r\n * Doing a `findAll()` or some restricted variant of that on both of the tables, and manually doing the join using some loops. (Ok for very small tables - prohibitive from small tables on up)\r\n\r\n * Have the sessions do some kind of interaction (I have no idea if this is even feasible - will have to look at the Hibernate Session API)  \r\n\r\n * Removing the database name from the URL string of different hibernate-xxxx.cfg.xml and insert them into the separate hbm.xml files like this:    \r\n`&lt;class name=&quot;foo&quot; table=&quot;foo_table&quot; schema=&quot;foo_schema&quot; catalog=&quot;foo_db&quot;&gt;`  \r\n(Doesn&#39;t seem to work from my initial tests and that seems like truck sized security hole)  \r\n \r\n * Use the Repository Pattern (Unsure if my Java-Fu is strong enough)\r\n\r\nIs there something that I&#39;m overlooking in one of the cases above or can it be another way that I haven&#39;t listed above?\r\n\r\n  [1]: http://bit.ly/bEuXKw","title":"Doing a join over 2 tables in different databases using Hibernate","body":"<p>I have two tables in two separate <strong>Oracle databases</strong> (not schemas) that I need to <strong>join in Hibernate</strong>.  Currently, I have two Hibernate sessions going out to the separate databases. Before anybody says look at <strong>Hibernate Shards</strong>, I have spent a better part of a day looking at that sub-project and have found that: it is for horizontal partitioned data (all the tables must be in all of the databases AFAIK), there is no way for one to tell Shards to look only in one database (<a href=\"http://bit.ly/bEuXKw\" rel=\"noreferrer\">Hibernate Shards Docs</a>), and is no longer being worked on.</p>\n\n<p>Things that I have thought about to try to solve this problem:  </p>\n\n<ul>\n<li><p>Doing a <code>findAll()</code> or some restricted variant of that on both of the tables, and manually doing the join using some loops. (Ok for very small tables - prohibitive from small tables on up)</p></li>\n<li><p>Have the sessions do some kind of interaction (I have no idea if this is even feasible - will have to look at the Hibernate Session API)  </p></li>\n<li><p>Removing the database name from the URL string of different hibernate-xxxx.cfg.xml and insert them into the separate hbm.xml files like this:<br>\n<code>&lt;class name=\"foo\" table=\"foo_table\" schema=\"foo_schema\" catalog=\"foo_db\"&gt;</code><br>\n(Doesn't seem to work from my initial tests and that seems like truck sized security hole)  </p></li>\n<li><p>Use the Repository Pattern (Unsure if my Java-Fu is strong enough)</p></li>\n</ul>\n\n<p>Is there something that I'm overlooking in one of the cases above or can it be another way that I haven't listed above?</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":2044914,"reputation":324,"user_id":1825224,"display_name":"jbowman"},"score":0,"creation_date":1449854455,"post_id":34228942,"comment_id":56202069,"body_markdown":"What have you tried so far? Are you having problems with code you&#39;ve written or are we to undertake the entire task for you?","body":"What have you tried so far? Are you having problems with code you&#39;ve written or are we to undertake the entire task for you?"},{"owner":{"account_id":2227343,"reputation":7894,"user_id":1965774,"accept_rate":95,"display_name":"Pandemonium"},"score":2,"creation_date":1449854561,"post_id":34228942,"comment_id":56202128,"body_markdown":"Read the doc! This is a simple problem any programming language should be able to do. I&#39;m not familiar with Java but here is the pseudocode you might want to run by:\n1. Loop through all characters in the string\n2. If &quot;_&quot; is found, remove it\n3. Capitalize the next character\n4. Return the new string","body":"Read the doc! This is a simple problem any programming language should be able to do. I&#39;m not familiar with Java but here is the pseudocode you might want to run by: 1. Loop through all characters in the string 2. If &quot;_&quot; is found, remove it 3. Capitalize the next character 4. Return the new string"},{"owner":{"account_id":7412091,"reputation":169,"user_id":5639151,"display_name":"achin"},"score":1,"creation_date":1449854592,"post_id":34228942,"comment_id":56202149,"body_markdown":"You can split the string with _ and then use StringUtils.join after capitalizing the first char of all (except first) splitted string parts","body":"You can split the string with _ and then use StringUtils.join after capitalizing the first char of all (except first) splitted string parts"}],"answers":[{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1449854816,"post_id":34229081,"comment_id":56202255,"body_markdown":"I would just use `split` and `Character.toUpperCase`. Not sure where `substring` comes into play","body":"I would just use <code>split</code> and <code>Character.toUpperCase</code>. Not sure where <code>substring</code> comes into play"},{"owner":{"account_id":6346397,"reputation":4691,"user_id":4926817,"accept_rate":92,"display_name":"Noam Hacker"},"score":0,"creation_date":1449854944,"post_id":34229081,"comment_id":56202323,"body_markdown":"@cricket_007 that should work too, I wasn&#39;t aware of `split`, but I&#39;m not very familiar with regex either","body":"@cricket_007 that should work too, I wasn&#39;t aware of <code>split</code>, but I&#39;m not very familiar with regex either"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":3,"creation_date":1449854974,"post_id":34229081,"comment_id":56202343,"body_markdown":"Don&#39;t need regex, you can simply split on underscore","body":"Don&#39;t need regex, you can simply split on underscore"}],"tags":[],"owner":{"account_id":6346397,"reputation":4691,"user_id":4926817,"accept_rate":92,"display_name":"Noam Hacker"},"comment_count":3,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1449854539,"creation_date":1449854539,"answer_id":34229081,"question_id":34228942,"body_markdown":"Take a look at oracle&#39;s documentation for the [string](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html) class, notably [substring](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring(int,%20int)), [charAt](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt(int)), [indexOf](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)), and [toUpperCase](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toUpperCase())\r\n\r\n(You can use these as puzzle pieces to solve your problem)\r\n\r\n","title":"From snake_case to camelCase in Java","body":"<p>Take a look at oracle's documentation for the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html\" rel=\"nofollow\">string</a> class, notably <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring(int,%20int)\" rel=\"nofollow\">substring</a>, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt(int)\" rel=\"nofollow\">charAt</a>, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)\" rel=\"nofollow\">indexOf</a>, and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toUpperCase()\" rel=\"nofollow\">toUpperCase</a></p>\n\n<p>(You can use these as puzzle pieces to solve your problem)</p>\n"},{"tags":[],"owner":{"account_id":7456745,"reputation":61,"user_id":5669775,"display_name":"hallgren"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1621432864,"creation_date":1449855368,"answer_id":34229320,"question_id":34228942,"body_markdown":"This isn&#39;t pretty, but it works:\r\n\r\n    String phrase = &quot;camel_case&quot;;\r\n    String[] words = phrase.split(&quot;_&quot;);\r\n    String newPhrase = words[0];\r\n    for(int i=1; i&lt;words.length; i++){\r\n      newPhrase += words[i].substring(0,1).toUpperCase() + words[i].substring(1);\r\n    }","title":"From snake_case to camelCase in Java","body":"<p>This isn't pretty, but it works:</p>\n<pre><code>String phrase = &quot;camel_case&quot;;\nString[] words = phrase.split(&quot;_&quot;);\nString newPhrase = words[0];\nfor(int i=1; i&lt;words.length; i++){\n  newPhrase += words[i].substring(0,1).toUpperCase() + words[i].substring(1);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1449860324,"post_id":34230342,"comment_id":56204982,"body_markdown":"This doesn&#39;t work for me. `Character.toUpper` is not a method and the second parameter to `String.replace` needs to be a String. I think you meant `replaceAll`? But even then, calling `indexOf(&quot;_&quot;)` will always return the first `_` because the underscores aren&#39;t iteratively replaced","body":"This doesn&#39;t work for me. <code>Character.toUpper</code> is not a method and the second parameter to <code>String.replace</code> needs to be a String. I think you meant <code>replaceAll</code>? But even then, calling <code>indexOf(&quot;_&quot;)</code> will always return the first <code>_</code> because the underscores aren&#39;t iteratively replaced"},{"owner":{"account_id":7453773,"reputation":372,"user_id":5667615,"display_name":"Sher Alam"},"score":0,"creation_date":1449862300,"post_id":34230342,"comment_id":56205963,"body_markdown":"My apologies. I was on another system without Eclipse. Now check my updated and verified answer.","body":"My apologies. I was on another system without Eclipse. Now check my updated and verified answer."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1449863880,"post_id":34230342,"comment_id":56206804,"body_markdown":"It only works for phrases with one or no underscores such as &quot;camel_case&quot;. It still will not work for &quot;camel_case_test&quot;. That will return &quot;camelCaseCest&quot; since `indexOf(&quot;_&quot;)` returns the underscore before &quot;case&quot;.","body":"It only works for phrases with one or no underscores such as &quot;camel_case&quot;. It still will not work for &quot;camel_case_test&quot;. That will return &quot;camelCaseCest&quot; since <code>indexOf(&quot;_&quot;)</code> returns the underscore before &quot;case&quot;."},{"owner":{"account_id":7453773,"reputation":372,"user_id":5667615,"display_name":"Sher Alam"},"score":1,"creation_date":1449865208,"post_id":34230342,"comment_id":56207552,"body_markdown":"Please check my updated answer. Now it will convert any length string to camel back notation. The while loop takes care of it.","body":"Please check my updated answer. Now it will convert any length string to camel back notation. The while loop takes care of it."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1449865843,"post_id":34230342,"comment_id":56207882,"body_markdown":"Yup. Works now. However, (I know it isn&#39;t a concern here), the runtime complexity is high with this approach.","body":"Yup. Works now. However, (I know it isn&#39;t a concern here), the runtime complexity is high with this approach."},{"owner":{"account_id":172794,"reputation":7482,"user_id":401059,"display_name":"Caesar"},"score":0,"creation_date":1605083811,"post_id":34230342,"comment_id":114540951,"body_markdown":"This may loop forever if the string contains things like `permit_2pc`. Might be better to modify it with `phrase.charAt(pos = (phrase.indexOf(&quot;_&quot;, pos) + 1))` (And likewise adjust the loop condition to `s.substring(pos).contains(&quot;_&quot;)` or similar - I haven&#39;t tested this)","body":"This may loop forever if the string contains things like <code>permit_2pc</code>. Might be better to modify it with <code>phrase.charAt(pos = (phrase.indexOf(&quot;_&quot;, pos) + 1))</code> (And likewise adjust the loop condition to <code>s.substring(pos).contains(&quot;_&quot;)</code> or similar - I haven&#39;t tested this)"}],"tags":[],"owner":{"account_id":7453773,"reputation":372,"user_id":5667615,"display_name":"Sher Alam"},"comment_count":6,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1589694662,"creation_date":1449859118,"answer_id":34230342,"question_id":34228942,"body_markdown":"This might be pretty, and it works\r\n\r\n    public class Test {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString phrase = &quot;always_use_camel_back_notation_in_java&quot;;\r\n    \t\twhile(phrase.contains(&quot;_&quot;)) {\r\n    \t\t\t    phrase = phrase.replaceFirst(&quot;_[a-z]&quot;, String.valueOf(Character.toUpperCase(phrase.charAt(phrase.indexOf(&quot;_&quot;) + 1))));\r\n    \t\t    }\r\n    \t\t    System.out.println(phrase);\r\n    \t    }\r\n        }","title":"From snake_case to camelCase in Java","body":"<p>This might be pretty, and it works</p>\n\n<pre><code>public class Test {\n\n    public static void main(String[] args) {\n        String phrase = \"always_use_camel_back_notation_in_java\";\n        while(phrase.contains(\"_\")) {\n                phrase = phrase.replaceFirst(\"_[a-z]\", String.valueOf(Character.toUpperCase(phrase.charAt(phrase.indexOf(\"_\") + 1))));\n            }\n            System.out.println(phrase);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1449860666,"creation_date":1449860666,"answer_id":34230748,"question_id":34228942,"body_markdown":"Using `split(&quot;_&quot;)` and looping over those parts is one way to do it. \r\n\r\nHere is an alternative using a `StringBuilder`. \r\n\r\n    String s = &quot;make_me_camel_case&quot;;\r\n    StringBuilder sb = new StringBuilder(s);\r\n\r\n    for (int i = 0; i &lt; sb.length(); i++) {\r\n        if (sb.charAt(i) == &#39;_&#39;) {\r\n            sb.deleteCharAt(i);\r\n            sb.replace(i, i+1, String.valueOf(Character.toUpperCase(sb.charAt(i))));\r\n        }\r\n    }\r\n\r\n    System.out.println(sb.toString()); // makeMeCamelCase","title":"From snake_case to camelCase in Java","body":"<p>Using <code>split(\"_\")</code> and looping over those parts is one way to do it. </p>\n\n<p>Here is an alternative using a <code>StringBuilder</code>. </p>\n\n<pre><code>String s = \"make_me_camel_case\";\nStringBuilder sb = new StringBuilder(s);\n\nfor (int i = 0; i &lt; sb.length(); i++) {\n    if (sb.charAt(i) == '_') {\n        sb.deleteCharAt(i);\n        sb.replace(i, i+1, String.valueOf(Character.toUpperCase(sb.charAt(i))));\n    }\n}\n\nSystem.out.println(sb.toString()); // makeMeCamelCase\n</code></pre>\n"},{"tags":[],"owner":{"account_id":433987,"reputation":5865,"user_id":819651,"accept_rate":90,"display_name":"Lu&#237;s Soares"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1551976741,"creation_date":1527119191,"answer_id":50498978,"question_id":34228942,"body_markdown":"You can use [`toCamelCase`][1] util:\r\n\r\n    CaseUtils.toCamelCase(&quot;camel_case&quot;, false, new char[]{&#39;_&#39;}); // returns &quot;camelCase&quot;\r\n\r\nfrom [Apache Commons Text][1].\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/CaseUtils.html#toCamelCase(java.lang.String,boolean,char...)","title":"From snake_case to camelCase in Java","body":"<p>You can use <a href=\"https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/CaseUtils.html#toCamelCase(java.lang.String,boolean,char...)\" rel=\"noreferrer\"><code>toCamelCase</code></a> util:</p>\n\n<pre><code>CaseUtils.toCamelCase(\"camel_case\", false, new char[]{'_'}); // returns \"camelCase\"\n</code></pre>\n\n<p>from <a href=\"https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/CaseUtils.html#toCamelCase(java.lang.String,boolean,char...)\" rel=\"noreferrer\">Apache Commons Text</a>.</p>\n"},{"comments":[{"owner":{"account_id":2570597,"reputation":1648,"user_id":2229437,"display_name":"kai"},"score":0,"creation_date":1645084060,"post_id":59275805,"comment_id":125777679,"body_markdown":"`CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, &quot;camelCase&quot;);` will return &quot;camelcase&quot;, this may not be expected","body":"<code>CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, &quot;camelCase&quot;);</code> will return &quot;camelcase&quot;, this may not be expected"},{"owner":{"account_id":6606513,"reputation":1158,"user_id":5103183,"accept_rate":50,"display_name":"Alex"},"score":0,"creation_date":1652884615,"post_id":59275805,"comment_id":127715852,"body_markdown":"Why not? `LOWER_UNDERSCORE` would be a format like `camel_case`, i. e. only an underscore character breaks a word. The string `&quot;camelCase&quot;` is in this sense only one word and if you consequentially convert a one word string to `LOWER_CAMEL`, you will get everything in lower case.","body":"Why not? <code>LOWER_UNDERSCORE</code> would be a format like <code>camel_case</code>, i. e. only an underscore character breaks a word. The string <code>&quot;camelCase&quot;</code> is in this sense only one word and if you consequentially convert a one word string to <code>LOWER_CAMEL</code>, you will get everything in lower case."}],"tags":[],"owner":{"account_id":6606513,"reputation":1158,"user_id":5103183,"accept_rate":50,"display_name":"Alex"},"comment_count":2,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1576014179,"creation_date":1576014179,"answer_id":59275805,"question_id":34228942,"body_markdown":"Also Guava&#39;s [CaseFormat][1] offers quite a neat solution that allows you to transform from and to camel case and even other specific cases.\r\n\r\n    CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, &quot;camel_case&quot;); // returns camelCase\r\n    CaseFormat.UPPER_UNDERSCORE.to(CaseFormat.UPPER_CAMEL, &quot;CAMEL_CASE&quot;); // returns CamelCase\r\n    CaseFormat.LOWER_CAMEL.to(CaseFormat.UPPER_UNDERSCORE, &quot;camelCase&quot;); // returns CAMEL_CASE\r\n    CaseFormat.UPPER_CAMEL.to(CaseFormat.LOWER_HYPHEN, &quot;CamelCase&quot;); // returns camel-case\r\n\r\n  [1]: https://github.com/google/guava/wiki/StringsExplained#caseformat","title":"From snake_case to camelCase in Java","body":"<p>Also Guava's <a href=\"https://github.com/google/guava/wiki/StringsExplained#caseformat\" rel=\"noreferrer\">CaseFormat</a> offers quite a neat solution that allows you to transform from and to camel case and even other specific cases.</p>\n\n<pre><code>CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, \"camel_case\"); // returns camelCase\nCaseFormat.UPPER_UNDERSCORE.to(CaseFormat.UPPER_CAMEL, \"CAMEL_CASE\"); // returns CamelCase\nCaseFormat.LOWER_CAMEL.to(CaseFormat.UPPER_UNDERSCORE, \"camelCase\"); // returns CAMEL_CASE\nCaseFormat.UPPER_CAMEL.to(CaseFormat.LOWER_HYPHEN, \"CamelCase\"); // returns camel-case\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1621438138,"creation_date":1621434059,"answer_id":67605103,"question_id":34228942,"body_markdown":"# Java SE 8+\r\n\r\nUsing [Java-8 Stream API][1], we can do it in a single statement.\r\n\r\n    import java.util.Arrays;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString str = &quot;snake_case_to_camel_case&quot;;\r\n    \r\n    \t\tstr = str.indexOf(&quot;_&quot;) != -1\r\n    \t\t\t\t? str.substring(0, str.indexOf(&quot;_&quot;)) + \r\n    \t\t\t\t\tArrays.stream(str.substring(str.indexOf(&quot;_&quot;) + 1).split(&quot;_&quot;))\r\n    \t\t\t\t\t\t.map(s -&gt; Character.toUpperCase(s.charAt(0)) + s.substring(1)).collect(Collectors.joining())\r\n    \t\t\t\t: str;\r\n    \r\n    \t\tSystem.out.println(str);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    snakeCaseToCamelCase\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][2]\r\n\r\n# Java SE 9+\r\n\r\n[`Matcher#replaceAll​(Function&lt;MatchResult, String&gt; replacer)`][3] introduced with Java SE 9, makes it further easy.\r\n\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString str = &quot;snake_case_to_camel_case&quot;;\r\n    \r\n    \t\tstr = Pattern.compile(&quot;_([a-z])&quot;)\r\n    \t\t\t\t\t.matcher(str)\r\n    \t\t\t\t\t.replaceAll(m -&gt; m.group(1).toUpperCase());\r\n    \r\n    \t\tSystem.out.println(str);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    snakeCaseToCamelCase\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][4]\r\n\r\n\r\n  [1]: https://www.oracle.com/technical-resources/articles/java/ma14-java-se-8-streams.html\r\n  [2]: https://ideone.com/zXu0gN\r\n  [3]: https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#replaceAll-java.util.function.Function-\r\n  [4]: https://ideone.com/YmquyW\r\n","title":"From snake_case to camelCase in Java","body":"<h1>Java SE 8+</h1>\n<p>Using <a href=\"https://www.oracle.com/technical-resources/articles/java/ma14-java-se-8-streams.html\" rel=\"noreferrer\">Java-8 Stream API</a>, we can do it in a single statement.</p>\n<pre><code>import java.util.Arrays;\nimport java.util.stream.Collectors;\n\npublic class Main {\n    public static void main(String[] args) {\n        String str = &quot;snake_case_to_camel_case&quot;;\n\n        str = str.indexOf(&quot;_&quot;) != -1\n                ? str.substring(0, str.indexOf(&quot;_&quot;)) + \n                    Arrays.stream(str.substring(str.indexOf(&quot;_&quot;) + 1).split(&quot;_&quot;))\n                        .map(s -&gt; Character.toUpperCase(s.charAt(0)) + s.substring(1)).collect(Collectors.joining())\n                : str;\n\n        System.out.println(str);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>snakeCaseToCamelCase\n</code></pre>\n<p><a href=\"https://ideone.com/zXu0gN\" rel=\"noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<h1>Java SE 9+</h1>\n<p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#replaceAll-java.util.function.Function-\" rel=\"noreferrer\"><code>Matcher#replaceAll​(Function&lt;MatchResult, String&gt; replacer)</code></a> introduced with Java SE 9, makes it further easy.</p>\n<pre><code>import java.util.regex.Pattern;\n\npublic class Main {\n    public static void main(String[] args) {\n        String str = &quot;snake_case_to_camel_case&quot;;\n\n        str = Pattern.compile(&quot;_([a-z])&quot;)\n                    .matcher(str)\n                    .replaceAll(m -&gt; m.group(1).toUpperCase());\n\n        System.out.println(str);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>snakeCaseToCamelCase\n</code></pre>\n<p><a href=\"https://ideone.com/YmquyW\" rel=\"noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n"},{"comments":[{"owner":{"account_id":23428052,"reputation":6895,"user_id":17487348,"display_name":"Mushroomator"},"score":5,"creation_date":1649151604,"post_id":71748439,"comment_id":126797543,"body_markdown":"Please improve your answer by providing more information on how it works and what&#39;s required such as used libraries. `WordUtils` is part of an external library.","body":"Please improve your answer by providing more information on how it works and what&#39;s required such as used libraries. <code>WordUtils</code> is part of an external library."},{"owner":{"account_id":12558993,"reputation":44,"user_id":9137528,"display_name":"Mohammed El Amine Mahmoudi"},"score":0,"creation_date":1650226958,"post_id":71748439,"comment_id":127061685,"body_markdown":"import org.apache.commons.lang3.text.WordUtils;","body":"import org.apache.commons.lang3.text.WordUtils;"},{"owner":{"account_id":1439570,"reputation":614,"user_id":2730667,"display_name":"Frederik Claus"},"score":0,"creation_date":1657018576,"post_id":71748439,"comment_id":128704618,"body_markdown":"`org.apache.commons.lang3.text.WordUtils` is deprecated as of 3.6","body":"<code>org.apache.commons.lang3.text.WordUtils</code> is deprecated as of 3.6"},{"owner":{"account_id":13580905,"reputation":1768,"user_id":9796935,"display_name":"ennth"},"score":0,"creation_date":1657817847,"post_id":71748439,"comment_id":128906213,"body_markdown":"@FrederikClaus what is the alternative if its deprecated?","body":"@FrederikClaus what is the alternative if its deprecated?"},{"owner":{"account_id":1439570,"reputation":614,"user_id":2730667,"display_name":"Frederik Claus"},"score":0,"creation_date":1658163206,"post_id":71748439,"comment_id":128978007,"body_markdown":"@ennth WordUtils from commons-text: https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/WordUtils.html\n\nThe project I worked on had no dependency on commons-text and therefore I went with the Java 9+ solution by Arvind Kumar Avinash","body":"@ennth WordUtils from commons-text: <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/WordUtils.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-text/javadocs/api-release/&zwnj;&#8203;org/&hellip;</a>  The project I worked on had no dependency on commons-text and therefore I went with the Java 9+ solution by Arvind Kumar Avinash"}],"tags":[],"owner":{"account_id":12558993,"reputation":44,"user_id":9137528,"display_name":"Mohammed El Amine Mahmoudi"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1650489617,"creation_date":1649146942,"answer_id":71748439,"question_id":34228942,"body_markdown":"    \r\n    import org.apache.commons.lang3.text.WordUtils;\r\n\r\n    public String snakeToCamelCase(String snakeWord) {\r\n        String camelWord = snakeWord.replaceAll(&quot;_&quot;, &quot; &quot;);\r\n        camelWord = WordUtils.capitalizeFully(camelWord);\r\n        return camelWord.replaceAll(&quot; &quot;, &quot;&quot;);\r\n    }","title":"From snake_case to camelCase in Java","body":"<pre><code>import org.apache.commons.lang3.text.WordUtils;\n\npublic String snakeToCamelCase(String snakeWord) {\n    String camelWord = snakeWord.replaceAll(&quot;_&quot;, &quot; &quot;);\n    camelWord = WordUtils.capitalizeFully(camelWord);\n    return camelWord.replaceAll(&quot; &quot;, &quot;&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683788637,"creation_date":1683786358,"answer_id":76224702,"question_id":34228942,"body_markdown":"    /**\r\n     * Converts AlphaNumeric String to camelcase based on any non AlphaNumeric char as delimiter\r\n     * @param input\r\n     * @return camelCase String\r\n     */\r\n    public static String toCamelCase(String input) {\r\n\r\n        StringBuilder result = new StringBuilder(input.length());\r\n        boolean toUpper = false;\r\n        for (int i = 0; i &lt; input.length(); i++) {\r\n\r\n            if (Character.isAlphabetic(input.charAt(i))) {\r\n\r\n                if (toUpper) {\r\n\r\n                    result.append(Character.toUpperCase(input.charAt(i)));\r\n                    toUpper = false;\r\n                } else {\r\n\r\n                    result.append(Character.toLowerCase(input.charAt(i)));\r\n                }\r\n            } else if (Character.isDigit(input.charAt(i))){\r\n\r\n                result.append(input.charAt(i));\r\n            } else {\r\n\r\n                toUpper = true;\r\n            }\r\n        }\r\n        return result.toString();\r\n    }\r\n\r\n    @Test\r\n    public void toCamelCaseTest() {\r\n\r\n        List&lt;String&gt; inputs = List.of(&quot;Hello World&quot;, &quot;helloWorld&quot;,\r\n                &quot;Hello_World&quot;, &quot;helloWorld&quot;,\r\n                &quot;Hello-World&quot;, &quot;helloWorld&quot;,\r\n                &quot;HELLO WORLD&quot;, &quot;helloWorld&quot;,\r\n                &quot;HELlo_WORld&quot;, &quot;helloWorld&quot;,\r\n                &quot;Hello1world&quot;, &quot;hello1world&quot;,\r\n                &quot;2Hello world&quot;, &quot;2helloWorld&quot;\r\n        );\r\n        for (int i = 0; i &lt; inputs.size();) {\r\n            Truth.assertThat(StringUtils.toCamelCase(inputs.get(i++)))\r\n                    .isEqualTo(inputs.get(i++));\r\n        }\r\n    }","title":"From snake_case to camelCase in Java","body":"<pre><code>/**\n * Converts AlphaNumeric String to camelcase based on any non AlphaNumeric char as delimiter\n * @param input\n * @return camelCase String\n */\npublic static String toCamelCase(String input) {\n\n    StringBuilder result = new StringBuilder(input.length());\n    boolean toUpper = false;\n    for (int i = 0; i &lt; input.length(); i++) {\n\n        if (Character.isAlphabetic(input.charAt(i))) {\n\n            if (toUpper) {\n\n                result.append(Character.toUpperCase(input.charAt(i)));\n                toUpper = false;\n            } else {\n\n                result.append(Character.toLowerCase(input.charAt(i)));\n            }\n        } else if (Character.isDigit(input.charAt(i))){\n\n            result.append(input.charAt(i));\n        } else {\n\n            toUpper = true;\n        }\n    }\n    return result.toString();\n}\n\n@Test\npublic void toCamelCaseTest() {\n\n    List&lt;String&gt; inputs = List.of(&quot;Hello World&quot;, &quot;helloWorld&quot;,\n            &quot;Hello_World&quot;, &quot;helloWorld&quot;,\n            &quot;Hello-World&quot;, &quot;helloWorld&quot;,\n            &quot;HELLO WORLD&quot;, &quot;helloWorld&quot;,\n            &quot;HELlo_WORld&quot;, &quot;helloWorld&quot;,\n            &quot;Hello1world&quot;, &quot;hello1world&quot;,\n            &quot;2Hello world&quot;, &quot;2helloWorld&quot;\n    );\n    for (int i = 0; i &lt; inputs.size();) {\n        Truth.assertThat(StringUtils.toCamelCase(inputs.get(i++)))\n                .isEqualTo(inputs.get(i++));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684742895,"creation_date":1684742895,"answer_id":76304166,"question_id":34228942,"body_markdown":"This task can be done with the `String.split` method, and a for-loop.\r\n\r\n```java\r\nString convert(String string) {\r\n    String[] strings = string.split(&quot;_+&quot;);\r\n    StringBuilder converted = new StringBuilder();\r\n    String stringA, stringB;\r\n    for (String value : strings) {\r\n        if (converted.isEmpty()) {\r\n            if (!value.isEmpty()) converted.append(value.toLowerCase());\r\n        } else {\r\n            stringA = value.substring(0, 1).toUpperCase();\r\n            stringB = value.substring(1).toLowerCase();\r\n            converted.append(stringA).append(stringB);\r\n        }\r\n    }\r\n    return converted.toString();\r\n}\r\n```\r\n\r\nInput\r\n\r\n```none\r\nconvert_snake_case_to_camel_case\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nconvertSnakeCaseToCamelCase\r\n```","title":"From snake_case to camelCase in Java","body":"<p>This task can be done with the <code>String.split</code> method, and a for-loop.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String convert(String string) {\n    String[] strings = string.split(&quot;_+&quot;);\n    StringBuilder converted = new StringBuilder();\n    String stringA, stringB;\n    for (String value : strings) {\n        if (converted.isEmpty()) {\n            if (!value.isEmpty()) converted.append(value.toLowerCase());\n        } else {\n            stringA = value.substring(0, 1).toUpperCase();\n            stringB = value.substring(1).toLowerCase();\n            converted.append(stringA).append(stringB);\n        }\n    }\n    return converted.toString();\n}\n</code></pre>\n<p>Input</p>\n<pre class=\"lang-none prettyprint-override\"><code>convert_snake_case_to_camel_case\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>convertSnakeCaseToCamelCase\n</code></pre>\n"}],"owner":{"account_id":5862812,"reputation":241,"user_id":4617902,"display_name":"Domenico"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35802,"favorite_count":0,"down_vote_count":2,"up_vote_count":24,"answer_count":10,"score":22,"last_activity_date":1684742895,"creation_date":1449854011,"question_id":34228942,"body_markdown":"Can anyone tell me how to convert a string in snake_case as: \r\n    \r\n    camel_case\r\n\r\nto a string in camelCase as:\r\n\r\n    camelCase\r\n\r\nin Java?\r\n\r\nThank you in advance.","title":"From snake_case to camelCase in Java","body":"<p>Can anyone tell me how to convert a string in snake_case as: </p>\n\n<pre><code>camel_case\n</code></pre>\n\n<p>to a string in camelCase as:</p>\n\n<pre><code>camelCase\n</code></pre>\n\n<p>in Java?</p>\n\n<p>Thank you in advance.</p>\n"},{"tags":["java","android","linux","filesystems"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1344190107,"post_id":11818802,"comment_id":15710007,"body_markdown":"Why would moving files between two different file systems cause a crash to begin with?  The files themselves are kludges of binary data; the file system only represents how that kludge of data is stored, represented, and removed.","body":"Why would moving files between two different file systems cause a crash to begin with?  The files themselves are kludges of binary data; the file system only represents how that kludge of data is stored, represented, and removed."},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":1,"creation_date":1344190307,"post_id":11818802,"comment_id":15710050,"body_markdown":"Moving a file in itself wouldn&#39;t be expected to cause a crash, but using `mv` on a file _whilst it is still being written to_ probably would (since in general a system that writes to a file should be able to assume that the file stays in the same location from write-opening to write-closing). I am trying to understand if the latter case holds true for all Linux (or Java, or Android) systems. Extra scout/brownie points for anyone who can explain why this succeeds!","body":"Moving a file in itself wouldn&#39;t be expected to cause a crash, but using <code>mv</code> on a file <i>whilst it is still being written to</i> probably would (since in general a system that writes to a file should be able to assume that the file stays in the same location from write-opening to write-closing). I am trying to understand if the latter case holds true for all Linux (or Java, or Android) systems. Extra scout/brownie points for anyone who can explain why this succeeds!"},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1589837928,"post_id":11818802,"comment_id":109447667,"body_markdown":"@ain&#39;tshabby: please don&#39;t edit posts here until you&#39;ve had some practice with the platform. I&#39;ve rejected the edit because it inverts the meaning of the title.","body":"@ain&#39;tshabby: please don&#39;t edit posts here until you&#39;ve had some practice with the platform. I&#39;ve rejected the edit because it inverts the meaning of the title."}],"answers":[{"comments":[{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":2,"creation_date":1344197541,"post_id":11819101,"comment_id":15711562,"body_markdown":"Great answer, thank you Mat. Yes, I was moving the file inside the one file system. I&#39;ve developed on Unix-like systems for some years, but not encountered this ability before; I&#39;d have expected it to have upset the writer process. Pretty clever stuff!","body":"Great answer, thank you Mat. Yes, I was moving the file inside the one file system. I&#39;ve developed on Unix-like systems for some years, but not encountered this ability before; I&#39;d have expected it to have upset the writer process. Pretty clever stuff!"},{"owner":{"account_id":332228,"reputation":3217,"user_id":657401,"accept_rate":85,"display_name":"Witiko"},"score":0,"creation_date":1641813012,"post_id":11819101,"comment_id":124896051,"body_markdown":"Out of curiosity, are there ways to move a file between filesystems in a way that is transparent to applications, i.e. where the application can read, write and seek on top of a file descriptor while the underlying filesystem has changed?","body":"Out of curiosity, are there ways to move a file between filesystems in a way that is transparent to applications, i.e. where the application can read, write and seek on top of a file descriptor while the underlying filesystem has changed?"},{"owner":{"account_id":318397,"reputation":203598,"user_id":635608,"display_name":"Mat"},"score":0,"creation_date":1641813950,"post_id":11819101,"comment_id":124896435,"body_markdown":"@Witiko: not that I know of.","body":"@Witiko: not that I know of."}],"tags":[],"owner":{"account_id":318397,"reputation":203598,"user_id":635608,"display_name":"Mat"},"comment_count":3,"down_vote_count":0,"up_vote_count":64,"is_accepted":true,"score":64,"last_activity_date":1344193075,"creation_date":1344192474,"answer_id":11819101,"question_id":11818802,"body_markdown":"When you move a file **inside the same filesystem**, the file itself (the _inode_) isn&#39;t moved at all. The only thing that changes are the directory entries in that filesystem. (The system call invoked by `mv` in this case is [`rename(2)`][1] - check that page for additional information and restrictions.)\r\n\r\nWhen a process opens a file, the filename is passed to the OS to indicate which file is meant, but the file descriptor you get back isn&#39;t linked to that name at all (you can&#39;t get back a filename from it) &amp;ndash; it is linked to the inode.  \r\nSince the inode remains unchanged when you rename a file (inside the same filesystem), processes that have it open can happily keep reading from and writing to it &amp;ndash; nothing changed for them, their file descriptor is still valid and pointing to the right data.\r\n\r\nSame thing if you delete a file. Processes can keep reading and writing from it even if the file is no longer reachable through any directory entry. (This can lead to confusing situations where `df` reports that your disk is full, but `du` says you&#39;re using much less space that `df` reports. The blocks assigned to deleted files that are still open won&#39;t be released until those processes close their file descriptor.)\r\n\r\nIf the `mv` moves the file across filesystems, then the behavior is different since inodes are specific to each filesystem. In that case, `mv` will actually copy the data over, creating a new inode (and directory entry) on the destination filesystem. When the copy is over, the old file is unlinked, and removed _if_ there are no open filehandles on it, as above.  \r\nIn your case, if you had crossed a filesystem boundary, you&#39;d have a partial file in the destination. And your upload process happily writing to a deleted file you can&#39;t easily access, possibly filling up that filesystem, until the upload finished at which point the inode would get dropped.\r\n\r\nSome posts on [Unix &amp; Linux][2] that you could find interesting:\r\n\r\n* [How are directories implemented in Unix filesystems?][3]\r\n* [What is a Superblock, Inode, Dentry and a File?][4]\r\n\r\n[1]: http://www.kernel.org/doc/man-pages/online/pages/man2/rename.2.html\r\n[2]: https://unix.stackexchange.com/\r\n[3]: https://unix.stackexchange.com/questions/18605/how-are-directories-implemented-in-unix-filesystems\r\n[4]: https://unix.stackexchange.com/questions/4402/what-is-a-superblock-inode-dentry-and-a-file","title":"Why can I successfully move a file in Linux while it is being written to?","body":"<p>When you move a file <strong>inside the same filesystem</strong>, the file itself (the <em>inode</em>) isn't moved at all. The only thing that changes are the directory entries in that filesystem. (The system call invoked by <code>mv</code> in this case is <a href=\"http://www.kernel.org/doc/man-pages/online/pages/man2/rename.2.html\" rel=\"noreferrer\"><code>rename(2)</code></a> - check that page for additional information and restrictions.)</p>\n\n<p>When a process opens a file, the filename is passed to the OS to indicate which file is meant, but the file descriptor you get back isn't linked to that name at all (you can't get back a filename from it) &ndash; it is linked to the inode.<br>\nSince the inode remains unchanged when you rename a file (inside the same filesystem), processes that have it open can happily keep reading from and writing to it &ndash; nothing changed for them, their file descriptor is still valid and pointing to the right data.</p>\n\n<p>Same thing if you delete a file. Processes can keep reading and writing from it even if the file is no longer reachable through any directory entry. (This can lead to confusing situations where <code>df</code> reports that your disk is full, but <code>du</code> says you're using much less space that <code>df</code> reports. The blocks assigned to deleted files that are still open won't be released until those processes close their file descriptor.)</p>\n\n<p>If the <code>mv</code> moves the file across filesystems, then the behavior is different since inodes are specific to each filesystem. In that case, <code>mv</code> will actually copy the data over, creating a new inode (and directory entry) on the destination filesystem. When the copy is over, the old file is unlinked, and removed <em>if</em> there are no open filehandles on it, as above.<br>\nIn your case, if you had crossed a filesystem boundary, you'd have a partial file in the destination. And your upload process happily writing to a deleted file you can't easily access, possibly filling up that filesystem, until the upload finished at which point the inode would get dropped.</p>\n\n<p>Some posts on <a href=\"https://unix.stackexchange.com/\">Unix &amp; Linux</a> that you could find interesting:</p>\n\n<ul>\n<li><a href=\"https://unix.stackexchange.com/questions/18605/how-are-directories-implemented-in-unix-filesystems\">How are directories implemented in Unix filesystems?</a></li>\n<li><a href=\"https://unix.stackexchange.com/questions/4402/what-is-a-superblock-inode-dentry-and-a-file\">What is a Superblock, Inode, Dentry and a File?</a></li>\n</ul>\n"}],"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14793,"favorite_count":0,"down_vote_count":6,"up_vote_count":37,"accepted_answer_id":11819101,"answer_count":1,"score":31,"last_activity_date":1684742673,"creation_date":1344189897,"question_id":11818802,"body_markdown":"I think this question  is technical enough for Stack Overflow and, probably, too programming-oriented for _Android_. I am intrigued as to how files are handled in Android (or Java or Linux, as appropriate), since I did something with my new smartphone and I&#39;d curious to know how it happened.\r\n\r\nI was transferring a file from my laptop to my Android phone via Bluetooth. I saw the new file in the file explorer and assumed it was fully transferred so I moved it from `/sdcard/bluetooth` to `/sdcard/torrents`. After I had done so, I noticed it was in fact still being transferred. To my surprise, it successfully completed, confirmed with a notification icon on the phone, and by a manual MD5 check on both sides. In most systems the file move would have caused a crash.\r\n\r\nWhat is the reason for this successful transfer? I&#39;m aware that in general, the file path is separate to the file location on the file system (in this case, an SD card). I imagine that the Bluetooth app has opened a handle to the file, and when I did the file move, a table of &#39;open files&#39; was updated with a new path. Is this feature generally true of any Linux system? Could I do a `mv` on a file being written and expect the copy - in its new location - to be correct?","title":"Why can I successfully move a file in Linux while it is being written to?","body":"<p>I think this question  is technical enough for Stack Overflow and, probably, too programming-oriented for <em>Android</em>. I am intrigued as to how files are handled in Android (or Java or Linux, as appropriate), since I did something with my new smartphone and I'd curious to know how it happened.</p>\n<p>I was transferring a file from my laptop to my Android phone via Bluetooth. I saw the new file in the file explorer and assumed it was fully transferred so I moved it from <code>/sdcard/bluetooth</code> to <code>/sdcard/torrents</code>. After I had done so, I noticed it was in fact still being transferred. To my surprise, it successfully completed, confirmed with a notification icon on the phone, and by a manual MD5 check on both sides. In most systems the file move would have caused a crash.</p>\n<p>What is the reason for this successful transfer? I'm aware that in general, the file path is separate to the file location on the file system (in this case, an SD card). I imagine that the Bluetooth app has opened a handle to the file, and when I did the file move, a table of 'open files' was updated with a new path. Is this feature generally true of any Linux system? Could I do a <code>mv</code> on a file being written and expect the copy - in its new location - to be correct?</p>\n"},{"tags":["java","sql-server","stored-procedures","jdbc"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1486803523,"post_id":42169951,"comment_id":71511945,"body_markdown":"Related: http://stackoverflow.com/questions/14213824/java-sql-statement-hasresultset and http://stackoverflow.com/questions/24694442/expecting-multiple-resultsets-but-only-get-one and http://stackoverflow.com/questions/32561550/jdbc-sql-server-raised-error-handling-in-multi-statement-stored-procedures","body":"Related: <a href=\"http://stackoverflow.com/questions/14213824/java-sql-statement-hasresultset\" title=\"java sql statement hasresultset\">stackoverflow.com/questions/14213824/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/24694442/expecting-multiple-resultsets-but-only-get-one\" title=\"expecting multiple resultsets but only get one\">stackoverflow.com/questions/24694442/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/32561550/jdbc-sql-server-raised-error-handling-in-multi-statement-stored-procedures\" title=\"jdbc sql server raised error handling in multi statement stored procedures\">stackoverflow.com/questions/32561550/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"score":2,"creation_date":1533726404,"post_id":42169952,"comment_id":90449893,"body_markdown":"The explanation is great.  The JDBC voodoo stinks.","body":"The explanation is great.  The JDBC voodoo stinks."}],"tags":[],"owner":{"account_id":2460030,"reputation":118398,"user_id":2144390,"accept_rate":100,"display_name":"Gord Thompson"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1538776449,"creation_date":1486767221,"answer_id":42169952,"question_id":42169951,"body_markdown":"When we execute a stored procedure in JDBC we get back a series of zero or more &quot;results&quot;. We can then process those &quot;results&quot; sequentially by calling `CallableStatement#getMoreResults()`. Each &quot;result&quot; can contain\r\n\r\n- zero or more rows of data that we can retrieve with a `ResultSet` object,\r\n- an update count for a DML statement (INSERT, UPDATE, DELETE) that we can retrieve with `CallableStatement#getUpdateCount()`, or\r\n- an error that throws an SQLServerException.\r\n\r\nFor &quot;Issue 1&quot; the problem is often that the stored procedure does not begin with `SET NOCOUNT ON;` and executes a DML statement before doing a SELECT to produce a result set. The update count for the DML is returned as the first &quot;result&quot;, and the data rows are &quot;stuck behind it&quot; until we call `getMoreResults`.\r\n\r\n&quot;Issue 2&quot; is essentially same problem. The stored procedure produces a &quot;result&quot; (usually a SELECT, or possibly an update count) before the error occurs. The error is returned in a subsequent &quot;result&quot; and does not cause an exception until we &quot;retrieve&quot; it using `getMoreResults`.\r\n\r\nIn many cases the problem can be avoided by simply adding `SET NOCOUNT ON;` as the first executable statement in the stored procedure. However, a change to the stored procedure is not always possible and the fact remains that in order to get *everything* back from the stored procedure we need to keep calling `getMoreResults` until, as the Javadoc says:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    There are no more results when the following is true: \r\n    \r\n         // stmt is a Statement object\r\n         ((stmt.getMoreResults() == false) &amp;&amp; (stmt.getUpdateCount() == -1))\r\n\r\nThat sounds simple enough but as usual, &quot;the devil is in the details&quot;, as illustrated by the following example. For a SQL Server stored procedure ...\r\n\r\n&lt;!-- language: lang-sql --&gt;\r\n\r\n    ALTER PROCEDURE dbo.TroublesomeSP AS\r\n    BEGIN\r\n        -- note: no `SET NOCOUNT ON;`\r\n        DECLARE @tbl TABLE (id VARCHAR(3) PRIMARY KEY);\r\n        \r\n        DROP TABLE NonExistent;\r\n        INSERT INTO @tbl (id) VALUES (&#39;001&#39;);\r\n        SELECT id FROM @tbl;\r\n        INSERT INTO @tbl (id) VALUES (&#39;001&#39;);  -- duplicate key error\r\n        SELECT 1/0;  -- error _inside_ ResultSet\r\n        INSERT INTO @tbl (id) VALUES (&#39;101&#39;);\r\n        INSERT INTO @tbl (id) VALUES (&#39;201&#39;),(&#39;202&#39;);\r\n        SELECT id FROM @tbl;\r\n    END\r\n\r\n... the following Java code will return everything ...\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    try (CallableStatement cs = conn.prepareCall(&quot;{call dbo.TroublesomeSP}&quot;)) {\r\n        boolean resultSetAvailable = false;\r\n        int numberOfResultsProcessed = 0;\r\n        try {\r\n            resultSetAvailable = cs.execute();\r\n        } catch (SQLServerException sse) {\r\n            System.out.printf(&quot;Exception thrown on execute: %s%n%n&quot;, sse.getMessage());\r\n            numberOfResultsProcessed++;\r\n        }\r\n        int updateCount = -2;  // initialize to impossible(?) value\r\n        while (true) {\r\n            boolean exceptionOccurred = true; \r\n            do {\r\n                try {\r\n                    if (numberOfResultsProcessed &gt; 0) {\r\n                        resultSetAvailable = cs.getMoreResults();\r\n                    }\r\n                    exceptionOccurred = false;\r\n                    updateCount = cs.getUpdateCount();\r\n                } catch (SQLServerException sse) {\r\n                    System.out.printf(&quot;Current result is an exception: %s%n%n&quot;, sse.getMessage());\r\n                }\r\n                numberOfResultsProcessed++;\r\n            } while (exceptionOccurred);\r\n\r\n            if ((!resultSetAvailable) &amp;&amp; (updateCount == -1)) {\r\n                break;  // we&#39;re done\r\n            }\r\n\r\n            if (resultSetAvailable) {\r\n                System.out.println(&quot;Current result is a ResultSet:&quot;);\r\n                try (ResultSet rs = cs.getResultSet()) {\r\n                    try {\r\n                        while (rs.next()) {\r\n                            System.out.println(rs.getString(1));\r\n                        }\r\n                    } catch (SQLServerException sse) {\r\n                        System.out.printf(&quot;Exception while processing ResultSet: %s%n&quot;, sse.getMessage());\r\n                    }\r\n                }\r\n            } else {\r\n                System.out.printf(&quot;Current result is an update count: %d %s affected%n&quot;,\r\n                        updateCount,\r\n                        updateCount == 1 ? &quot;row was&quot; : &quot;rows were&quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n        System.out.println(&quot;[end of results]&quot;);\r\n    }\r\n\r\n... producing the following console output:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Exception thrown on execute: Cannot drop the table &#39;NonExistent&#39;, because it does not exist or you do not have permission.\r\n\r\n    Current result is an update count: 1 row was affected\r\n\r\n    Current result is a ResultSet:\r\n    001\r\n\r\n    Current result is an exception: Violation of PRIMARY KEY constraint &#39;PK__#314D4EA__3213E83F3335971A&#39;. Cannot insert duplicate key in object &#39;dbo.@tbl&#39;. The duplicate key value is (001).\r\n\r\n    Current result is a ResultSet:\r\n    Exception while processing ResultSet: Divide by zero error encountered.\r\n\r\n    Current result is an update count: 1 row was affected\r\n\r\n    Current result is an update count: 2 rows were affected\r\n\r\n    Current result is a ResultSet:\r\n    001\r\n    101\r\n    201\r\n    202\r\n\r\n    [end of results]\r\n","title":"How to get *everything* back from a stored procedure using JDBC","body":"<p>When we execute a stored procedure in JDBC we get back a series of zero or more \"results\". We can then process those \"results\" sequentially by calling <code>CallableStatement#getMoreResults()</code>. Each \"result\" can contain</p>\n\n<ul>\n<li>zero or more rows of data that we can retrieve with a <code>ResultSet</code> object,</li>\n<li>an update count for a DML statement (INSERT, UPDATE, DELETE) that we can retrieve with <code>CallableStatement#getUpdateCount()</code>, or</li>\n<li>an error that throws an SQLServerException.</li>\n</ul>\n\n<p>For \"Issue 1\" the problem is often that the stored procedure does not begin with <code>SET NOCOUNT ON;</code> and executes a DML statement before doing a SELECT to produce a result set. The update count for the DML is returned as the first \"result\", and the data rows are \"stuck behind it\" until we call <code>getMoreResults</code>.</p>\n\n<p>\"Issue 2\" is essentially same problem. The stored procedure produces a \"result\" (usually a SELECT, or possibly an update count) before the error occurs. The error is returned in a subsequent \"result\" and does not cause an exception until we \"retrieve\" it using <code>getMoreResults</code>.</p>\n\n<p>In many cases the problem can be avoided by simply adding <code>SET NOCOUNT ON;</code> as the first executable statement in the stored procedure. However, a change to the stored procedure is not always possible and the fact remains that in order to get <em>everything</em> back from the stored procedure we need to keep calling <code>getMoreResults</code> until, as the Javadoc says:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>There are no more results when the following is true: \n\n     // stmt is a Statement object\n     ((stmt.getMoreResults() == false) &amp;&amp; (stmt.getUpdateCount() == -1))\n</code></pre>\n\n<p>That sounds simple enough but as usual, \"the devil is in the details\", as illustrated by the following example. For a SQL Server stored procedure ...</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>ALTER PROCEDURE dbo.TroublesomeSP AS\nBEGIN\n    -- note: no `SET NOCOUNT ON;`\n    DECLARE @tbl TABLE (id VARCHAR(3) PRIMARY KEY);\n\n    DROP TABLE NonExistent;\n    INSERT INTO @tbl (id) VALUES ('001');\n    SELECT id FROM @tbl;\n    INSERT INTO @tbl (id) VALUES ('001');  -- duplicate key error\n    SELECT 1/0;  -- error _inside_ ResultSet\n    INSERT INTO @tbl (id) VALUES ('101');\n    INSERT INTO @tbl (id) VALUES ('201'),('202');\n    SELECT id FROM @tbl;\nEND\n</code></pre>\n\n<p>... the following Java code will return everything ...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>try (CallableStatement cs = conn.prepareCall(\"{call dbo.TroublesomeSP}\")) {\n    boolean resultSetAvailable = false;\n    int numberOfResultsProcessed = 0;\n    try {\n        resultSetAvailable = cs.execute();\n    } catch (SQLServerException sse) {\n        System.out.printf(\"Exception thrown on execute: %s%n%n\", sse.getMessage());\n        numberOfResultsProcessed++;\n    }\n    int updateCount = -2;  // initialize to impossible(?) value\n    while (true) {\n        boolean exceptionOccurred = true; \n        do {\n            try {\n                if (numberOfResultsProcessed &gt; 0) {\n                    resultSetAvailable = cs.getMoreResults();\n                }\n                exceptionOccurred = false;\n                updateCount = cs.getUpdateCount();\n            } catch (SQLServerException sse) {\n                System.out.printf(\"Current result is an exception: %s%n%n\", sse.getMessage());\n            }\n            numberOfResultsProcessed++;\n        } while (exceptionOccurred);\n\n        if ((!resultSetAvailable) &amp;&amp; (updateCount == -1)) {\n            break;  // we're done\n        }\n\n        if (resultSetAvailable) {\n            System.out.println(\"Current result is a ResultSet:\");\n            try (ResultSet rs = cs.getResultSet()) {\n                try {\n                    while (rs.next()) {\n                        System.out.println(rs.getString(1));\n                    }\n                } catch (SQLServerException sse) {\n                    System.out.printf(\"Exception while processing ResultSet: %s%n\", sse.getMessage());\n                }\n            }\n        } else {\n            System.out.printf(\"Current result is an update count: %d %s affected%n\",\n                    updateCount,\n                    updateCount == 1 ? \"row was\" : \"rows were\");\n        }\n        System.out.println();\n    }\n    System.out.println(\"[end of results]\");\n}\n</code></pre>\n\n<p>... producing the following console output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Exception thrown on execute: Cannot drop the table 'NonExistent', because it does not exist or you do not have permission.\n\nCurrent result is an update count: 1 row was affected\n\nCurrent result is a ResultSet:\n001\n\nCurrent result is an exception: Violation of PRIMARY KEY constraint 'PK__#314D4EA__3213E83F3335971A'. Cannot insert duplicate key in object 'dbo.@tbl'. The duplicate key value is (001).\n\nCurrent result is a ResultSet:\nException while processing ResultSet: Divide by zero error encountered.\n\nCurrent result is an update count: 1 row was affected\n\nCurrent result is an update count: 2 rows were affected\n\nCurrent result is a ResultSet:\n001\n101\n201\n202\n\n[end of results]\n</code></pre>\n"}],"owner":{"account_id":2460030,"reputation":118398,"user_id":2144390,"accept_rate":100,"display_name":"Gord Thompson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4676,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":42169952,"answer_count":1,"score":4,"last_activity_date":1684742590,"creation_date":1486767221,"question_id":42169951,"body_markdown":"I occasionally encounter two forms of strange behaviour when using JDBC to work with SQL Server stored procedures:\r\n\r\n**Issue 1:** I run a stored procedure in SQL Server Management Studio (SSMS) and it returns a result set. However, when I try\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    try (CallableStatement cs = conn.prepareCall(&quot;{call dbo.TroublesomeSP}&quot;)) {\r\n        ResultSet rs = cs.executeQuery();\r\n\r\nI get the exception\r\n\r\n&gt; com.microsoft.sqlserver.jdbc.SQLServerException: The statement did not return a result set.\r\n\r\n**Issue 2:** I run a stored procedure in SSMS and it raises an error, but when I use JDBC to `.execute` the stored procedure no exception is thrown.\r\n\r\nWhy do these issues occur and how can I avoid them?\r\n","title":"How to get *everything* back from a stored procedure using JDBC","body":"<p>I occasionally encounter two forms of strange behaviour when using JDBC to work with SQL Server stored procedures:</p>\n\n<p><strong>Issue 1:</strong> I run a stored procedure in SQL Server Management Studio (SSMS) and it returns a result set. However, when I try</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>try (CallableStatement cs = conn.prepareCall(\"{call dbo.TroublesomeSP}\")) {\n    ResultSet rs = cs.executeQuery();\n</code></pre>\n\n<p>I get the exception</p>\n\n<blockquote>\n  <p>com.microsoft.sqlserver.jdbc.SQLServerException: The statement did not return a result set.</p>\n</blockquote>\n\n<p><strong>Issue 2:</strong> I run a stored procedure in SSMS and it raises an error, but when I use JDBC to <code>.execute</code> the stored procedure no exception is thrown.</p>\n\n<p>Why do these issues occur and how can I avoid them?</p>\n"},{"tags":["java","garbage-collection","g1gc","concurrent-mark-sweep"],"comments":[{"owner":{"account_id":83448,"reputation":1396,"user_id":233965,"accept_rate":93,"display_name":"IceMan"},"score":0,"creation_date":1470351086,"post_id":38752782,"comment_id":64928476,"body_markdown":"Is the G1 flag in the last command `-XX:+G1GC` a typo?","body":"Is the G1 flag in the last command <code>-XX:+G1GC</code> a typo?"},{"owner":{"account_id":418291,"reputation":1283,"user_id":794763,"display_name":"Ashu Pachauri"},"score":0,"creation_date":1470427066,"post_id":38752782,"comment_id":64964137,"body_markdown":"@IceMan Yes it was, thanks for pointing it out. I just corrected it.","body":"@IceMan Yes it was, thanks for pointing it out. I just corrected it."}],"answers":[{"comments":[{"owner":{"account_id":418291,"reputation":1283,"user_id":794763,"display_name":"Ashu Pachauri"},"score":1,"creation_date":1470427257,"post_id":38787003,"comment_id":64964210,"body_markdown":"That&#39;s the thing. I am not using more than 32GB heap. Both 32766 MB and 32736 MB are less than 32 GB. CMS uses compressed pointers till 32766 MB but G1 uses only till 32736 MB heap. I cannot understand what accounts for difference between these thresholds. (Edited the question to clearly reflect the confusion I am having.)","body":"That&#39;s the thing. I am not using more than 32GB heap. Both 32766 MB and 32736 MB are less than 32 GB. CMS uses compressed pointers till 32766 MB but G1 uses only till 32736 MB heap. I cannot understand what accounts for difference between these thresholds. (Edited the question to clearly reflect the confusion I am having.)"},{"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"score":1,"creation_date":1470460604,"post_id":38787003,"comment_id":64971359,"body_markdown":"Why does that miniscule difference even matter? Anyway, the answer I linked contains diagnostic flags, they may help with your &quot;problem&quot;.","body":"Why does that miniscule difference even matter? Anyway, the answer I linked contains diagnostic flags, they may help with your &quot;problem&quot;."}],"tags":[],"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1684742505,"creation_date":1470392894,"answer_id":38787003,"question_id":38752782,"body_markdown":"&gt; but cannot get it compressed pointer optimization to kick in for heap sizes above 32736 MB\r\n\r\nThat&#39;s normal because objects are aligned to 8byte boundaries by default, which means the lowest 3 bits are always zero and can be eliminated by a shift, which in turn means 32bit object pointers can at most address 4GB * 8 worth of objects with that alignment.\r\n\r\nYou need to bump the object alignment to 16 bytes via `-XX:ObjectAlignmentInBytes=16` if you want to use more than 32GB with compressed oops. Note that this makes small objects larger, i.e. wastes some memory, so you will have to measure whether it actually gains you anything.\r\n\r\n[This answer][1] has some additional diagnostic options that might be of interest.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/37251787/1362755","title":"UseCompressedOops kick-in threshold different for G1 and CMS","body":"<blockquote>\n<p>but cannot get it compressed pointer optimization to kick in for heap sizes above 32736 MB</p>\n</blockquote>\n<p>That's normal because objects are aligned to 8byte boundaries by default, which means the lowest 3 bits are always zero and can be eliminated by a shift, which in turn means 32bit object pointers can at most address 4GB * 8 worth of objects with that alignment.</p>\n<p>You need to bump the object alignment to 16 bytes via <code>-XX:ObjectAlignmentInBytes=16</code> if you want to use more than 32GB with compressed oops. Note that this makes small objects larger, i.e. wastes some memory, so you will have to measure whether it actually gains you anything.</p>\n<p><a href=\"https://stackoverflow.com/a/37251787/1362755\">This answer</a> has some additional diagnostic options that might be of interest.</p>\n"}],"owner":{"account_id":418291,"reputation":1283,"user_id":794763,"display_name":"Ashu Pachauri"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1622,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1684742505,"creation_date":1470255139,"question_id":38752782,"body_markdown":"I am running a 64 bit Java 1.8 Hotspot JVM by Oracle. I have been trying to wrap my head around a difference in behavior of JVM to kick in compressed object pointers when different GC mechanisms are used. For example:\r\n\r\n    $ java -XX:+UseConcMarkSweepGC -XX:+PrintFlagsFinal -Xms32766m -Xmx32766m\r\n    \r\n    bool UseCompressedClassPointers        := true        {lp64_product}\r\n    bool UseCompressedOops                 := true        {lp64_product}\r\n\r\n    $ java -XX:+UseConcMarkSweepGC -XX:+PrintFlagsFinal -Xms32767m -Xmx32767m\r\n    \r\n    bool UseCompressedClassPointers        = false        {lp64_product}\r\n    bool UseCompressedOops                 = false        {lp64_product}\r\n\r\n    $ java -XX:+UseG1GC -XX:+PrintFlagsFinal -Xms32736m -Xmx32736m\r\n    \r\n    bool UseCompressedClassPointers        := true        {lp64_product}\r\n    bool UseCompressedOops                 := true        {lp64_product}\r\n\r\n    $ java -XX:+UseG1GC -XX:+PrintFlagsFinal -Xms32737m -Xmx32737m\r\n    \r\n    bool UseCompressedClassPointers        = false        {lp64_product}\r\n    bool UseCompressedOops                 = false        {lp64_product}\r\n\r\nI have tried changing a few other G1GC knobs but cannot get compressed pointer optimization to kick in for heap sizes above 32736 MB for G1. But, as you can see clearly that CMS can use compressed pointers for heap sizes up to 32766 MB. I am trying to understand what controls this threshold for different GC algorithms.","title":"UseCompressedOops kick-in threshold different for G1 and CMS","body":"<p>I am running a 64 bit Java 1.8 Hotspot JVM by Oracle. I have been trying to wrap my head around a difference in behavior of JVM to kick in compressed object pointers when different GC mechanisms are used. For example:</p>\n\n<pre><code>$ java -XX:+UseConcMarkSweepGC -XX:+PrintFlagsFinal -Xms32766m -Xmx32766m\n\nbool UseCompressedClassPointers        := true        {lp64_product}\nbool UseCompressedOops                 := true        {lp64_product}\n\n$ java -XX:+UseConcMarkSweepGC -XX:+PrintFlagsFinal -Xms32767m -Xmx32767m\n\nbool UseCompressedClassPointers        = false        {lp64_product}\nbool UseCompressedOops                 = false        {lp64_product}\n\n$ java -XX:+UseG1GC -XX:+PrintFlagsFinal -Xms32736m -Xmx32736m\n\nbool UseCompressedClassPointers        := true        {lp64_product}\nbool UseCompressedOops                 := true        {lp64_product}\n\n$ java -XX:+UseG1GC -XX:+PrintFlagsFinal -Xms32737m -Xmx32737m\n\nbool UseCompressedClassPointers        = false        {lp64_product}\nbool UseCompressedOops                 = false        {lp64_product}\n</code></pre>\n\n<p>I have tried changing a few other G1GC knobs but cannot get compressed pointer optimization to kick in for heap sizes above 32736 MB for G1. But, as you can see clearly that CMS can use compressed pointers for heap sizes up to 32766 MB. I am trying to understand what controls this threshold for different GC algorithms.</p>\n"},{"tags":["java","exception","iterator","resultset"],"comments":[{"owner":{"account_id":1299032,"reputation":5308,"user_id":1249325,"accept_rate":50,"display_name":"KhAn SaAb"},"score":0,"creation_date":1369217523,"post_id":16689044,"comment_id":24017419,"body_markdown":"i thing your query return single record and you are trying fetch more than that.","body":"i thing your query return single record and you are trying fetch more than that."},{"owner":{"account_id":2257919,"reputation":31825,"user_id":1988693,"accept_rate":76,"display_name":"drew moore"},"score":2,"creation_date":1369217638,"post_id":16689044,"comment_id":24017475,"body_markdown":"This is unrelated to the given exception, but `String[] perfiles = {};` is highly problematic. Adding anything to `perfiles`, even at index 0, will throw an `ArrayIndexOutOfBoundsException`","body":"This is unrelated to the given exception, but <code>String[] perfiles = {};</code> is highly problematic. Adding anything to <code>perfiles</code>, even at index 0, will throw an <code>ArrayIndexOutOfBoundsException</code>"},{"owner":{"account_id":2775963,"reputation":3,"user_id":2389548,"display_name":"bateras"},"score":0,"creation_date":1369220751,"post_id":16689044,"comment_id":24019161,"body_markdown":"so how do i pass the resulset to an array?","body":"so how do i pass the resulset to an array?"},{"owner":{"account_id":2775963,"reputation":3,"user_id":2389548,"display_name":"bateras"},"score":0,"creation_date":1369220939,"post_id":16689044,"comment_id":24019261,"body_markdown":"this is the query\n    `String PERFILESQUERY = &quot;SELECT * FROM perfiles&quot;;`","body":"this is the query     <code>String PERFILESQUERY = &quot;SELECT * FROM perfiles&quot;;</code>"},{"owner":{"account_id":2775963,"reputation":3,"user_id":2389548,"display_name":"bateras"},"score":0,"creation_date":1369301780,"post_id":16689044,"comment_id":24055544,"body_markdown":"At last it was an inocent glitch in other part of the code. **I left an statement opened** so the first query was working but these others weren&#39;t. I closed them all after getting the data and _changed the array for an arraylist [just in case]_ and it&#39;s **working properly now**.\nThank you all for your help","body":"At last it was an inocent glitch in other part of the code. <b>I left an statement opened</b> so the first query was working but these others weren&#39;t. I closed them all after getting the data and <i>changed the array for an arraylist [just in case]</i> and it&#39;s <b>working properly now</b>. Thank you all for your help"}],"owner":{"account_id":2775963,"reputation":3,"user_id":2389548,"display_name":"bateras"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684742315,"creation_date":1369217226,"question_id":16689044,"body_markdown":"I&#39;m having some bad trouble related to a resulset.\r\nI have one statement, resulset, ... with the very same structure and it works but this one doesn&#39;t.\r\nI&#39;ve seen some people with similar problems but related to the lack of .next(). As you can see, I already have it and I still don&#39;t understand.\r\n\r\nconex is the Connection, which it&#39;s received from the session of a jsp.\r\n\r\nLet&#39;s see if you can enlight me\r\n\r\n    public String[] getPerfiles(Connection conex) throws SQLException {\r\n        String[] perfiles = {};\r\n        int i = 0;\r\n        Statement st = conex.createStatement();\r\n        ResultSet rs1 = st.executeQuery(q.PERFILESQUERY);\r\n        while (rs1.next()) {\r\n            perfiles[i] = rs1.getString(2);\r\n            i++;\r\n        }\r\n        return perfiles;\r\n    }\r\n\r\nThe Query\r\n\r\n        String PERFILESQUERY = &quot;SELECT * FROM perfiles&quot;;\r\n\r\nHere is the error trace\r\n\r\n&gt; Exception occurred in target VM: Before start of result set \r\n&gt; java.sql.SQLException: Before start of result set \tat\r\n&gt; com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1078) \tat\r\n&gt; com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989) \tat\r\n&gt; com.mysql.jdbc.SQLError.createSQLException(SQLError.java:975) \tat\r\n&gt; com.mysql.jdbc.SQLError.createSQLException(SQLError.java:920) \tat\r\n&gt; com.mysql.jdbc.ResultSetImpl.checkRowPos(ResultSetImpl.java:855) \tat\r\n&gt; com.mysql.jdbc.ResultSetImpl.getStringInternal(ResultSetImpl.java:5773)\r\n&gt; \tat com.mysql.jdbc.ResultSetImpl.getString(ResultSetImpl.java:5693)\r\n&gt; \tat clases.Funciones.getPerfiles(Funciones.java:123) \tat\r\n&gt; org.apache.jsp.formUsuario_jsp._jspService(formUsuario_jsp.java:101)\r\n&gt; \tat\r\n&gt; org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)\r\n&gt; \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:770) \tat","title":"SQL exception before Start (with .next())","body":"<p>I'm having some bad trouble related to a resulset.\nI have one statement, resulset, ... with the very same structure and it works but this one doesn't.\nI've seen some people with similar problems but related to the lack of .next(). As you can see, I already have it and I still don't understand.</p>\n\n<p>conex is the Connection, which it's received from the session of a jsp.</p>\n\n<p>Let's see if you can enlight me</p>\n\n<pre><code>public String[] getPerfiles(Connection conex) throws SQLException {\n    String[] perfiles = {};\n    int i = 0;\n    Statement st = conex.createStatement();\n    ResultSet rs1 = st.executeQuery(q.PERFILESQUERY);\n    while (rs1.next()) {\n        perfiles[i] = rs1.getString(2);\n        i++;\n    }\n    return perfiles;\n}\n</code></pre>\n\n<p>The Query</p>\n\n<pre><code>    String PERFILESQUERY = \"SELECT * FROM perfiles\";\n</code></pre>\n\n<p>Here is the error trace</p>\n\n<blockquote>\n  <p>Exception occurred in target VM: Before start of result set \n  java.sql.SQLException: Before start of result set     at\n  com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1078)    at\n  com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)     at\n  com.mysql.jdbc.SQLError.createSQLException(SQLError.java:975)     at\n  com.mysql.jdbc.SQLError.createSQLException(SQLError.java:920)     at\n  com.mysql.jdbc.ResultSetImpl.checkRowPos(ResultSetImpl.java:855)  at\n  com.mysql.jdbc.ResultSetImpl.getStringInternal(ResultSetImpl.java:5773)\n    at com.mysql.jdbc.ResultSetImpl.getString(ResultSetImpl.java:5693)\n    at clases.Funciones.getPerfiles(Funciones.java:123)     at\n  org.apache.jsp.formUsuario_jsp._jspService(formUsuario_jsp.java:101)\n    at\n  org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)     at</p>\n</blockquote>\n"},{"tags":["java","calendar"],"answers":[{"tags":[],"owner":{"account_id":2029491,"reputation":9823,"user_id":1813616,"display_name":"Uwe Plonus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1370962951,"creation_date":1370962951,"answer_id":17047400,"question_id":17046756,"body_markdown":"This is a nice example...\r\n\r\nThe `Calendar` is not easy to handle. You problem is the evaluation of the date.\r\n\r\nThe date of the `Calendar` is newly evaluated if you call e.g. `getTime()` or `add()`.\r\n\r\nIn the second (correct) example you call `getTime()` after setting the first day of the week and the calendar is set to `2013-06-06`. After that you change the day of the week and set the calendar new (via `getTime()`). Therefore it is now set to Monday.\r\n\r\nIn the first example you set the `Calendar` to the date and set the day of week. This leads to an invalid date (temporarily). `2013-06-06` is a Thursday and you set Monday. Now which one is the correct day of week? The `Calendar` implementation now chooses Thursday.\r\n\r\nThis is also [well documented](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html) in the Javadoc. The section is named **Calendar Fields Resolution**.","title":"Calendar add behaviour","body":"<p>This is a nice example...</p>\n\n<p>The <code>Calendar</code> is not easy to handle. You problem is the evaluation of the date.</p>\n\n<p>The date of the <code>Calendar</code> is newly evaluated if you call e.g. <code>getTime()</code> or <code>add()</code>.</p>\n\n<p>In the second (correct) example you call <code>getTime()</code> after setting the first day of the week and the calendar is set to <code>2013-06-06</code>. After that you change the day of the week and set the calendar new (via <code>getTime()</code>). Therefore it is now set to Monday.</p>\n\n<p>In the first example you set the <code>Calendar</code> to the date and set the day of week. This leads to an invalid date (temporarily). <code>2013-06-06</code> is a Thursday and you set Monday. Now which one is the correct day of week? The <code>Calendar</code> implementation now chooses Thursday.</p>\n\n<p>This is also <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html\" rel=\"nofollow\">well documented</a> in the Javadoc. The section is named <strong>Calendar Fields Resolution</strong>.</p>\n"}],"owner":{"account_id":770961,"reputation":125,"user_id":811968,"accept_rate":40,"display_name":"Dmitry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684742268,"creation_date":1370961262,"question_id":17046756,"body_markdown":"Want to get first day of the next week (next monday), but call to `getTime()` changes the Calendar object. \r\n\r\nPlease tell me the right way to get first day of the next week.\r\n\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.GregorianCalendar;\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            {\r\n                final SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n                final Calendar cal = new GregorianCalendar( 2013, 5, 6 );\r\n                cal.setFirstDayOfWeek( Calendar.MONDAY );\r\n                //System.out.println( sdf.format( cal.getTime() ) );\r\n                cal.set( Calendar.DAY_OF_WEEK,  Calendar.MONDAY );\r\n                System.out.println( sdf.format( cal.getTime() ) );  // 2013-06-06\r\n                cal.add( Calendar.WEEK_OF_YEAR, 1 );\r\n                System.out.println( sdf.format( cal.getTime() ) );  // 2013-06-13\r\n            }\r\n            {\r\n                final SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n                final Calendar cal = new GregorianCalendar( 2013, 5, 6 );\r\n                cal.setFirstDayOfWeek( Calendar.MONDAY );\r\n                System.out.println( sdf.format( cal.getTime() ) );  // 2013-06-06\r\n                cal.set( Calendar.DAY_OF_WEEK,  Calendar.MONDAY );\r\n                System.out.println( sdf.format( cal.getTime() ) );  // 2013-06-03\r\n                cal.add( Calendar.WEEK_OF_YEAR, 1 );\r\n                System.out.println( sdf.format( cal.getTime() ) );  // 2013-06-10\r\n            }\r\n        }\r\n    }\r\n","title":"Calendar add behaviour","body":"<p>Want to get first day of the next week (next monday), but call to <code>getTime()</code> changes the Calendar object. </p>\n\n<p>Please tell me the right way to get first day of the next week.</p>\n\n<pre><code>import java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.GregorianCalendar;\npublic class Main {\n    public static void main(String[] args) {\n        {\n            final SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd\");\n            final Calendar cal = new GregorianCalendar( 2013, 5, 6 );\n            cal.setFirstDayOfWeek( Calendar.MONDAY );\n            //System.out.println( sdf.format( cal.getTime() ) );\n            cal.set( Calendar.DAY_OF_WEEK,  Calendar.MONDAY );\n            System.out.println( sdf.format( cal.getTime() ) );  // 2013-06-06\n            cal.add( Calendar.WEEK_OF_YEAR, 1 );\n            System.out.println( sdf.format( cal.getTime() ) );  // 2013-06-13\n        }\n        {\n            final SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd\");\n            final Calendar cal = new GregorianCalendar( 2013, 5, 6 );\n            cal.setFirstDayOfWeek( Calendar.MONDAY );\n            System.out.println( sdf.format( cal.getTime() ) );  // 2013-06-06\n            cal.set( Calendar.DAY_OF_WEEK,  Calendar.MONDAY );\n            System.out.println( sdf.format( cal.getTime() ) );  // 2013-06-03\n            cal.add( Calendar.WEEK_OF_YEAR, 1 );\n            System.out.println( sdf.format( cal.getTime() ) );  // 2013-06-10\n        }\n    }\n}\n</code></pre>\n"},{"tags":["python","java","node.js","json","regex-group"],"comments":[{"owner":{"account_id":8361573,"reputation":573,"user_id":6279677,"display_name":"Suchandra T"},"score":0,"creation_date":1684741032,"post_id":76303655,"comment_id":134555437,"body_markdown":"As the error suggests it is not able to find .tf file in the current directory.","body":"As the error suggests it is not able to find .tf file in the current directory."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1684741847,"post_id":76303655,"comment_id":134555600,"body_markdown":"What do *any* of the tags have to do with your question?  Is this a *programming* question at all?","body":"What do <i>any</i> of the tags have to do with your question?  Is this a <i>programming</i> question at all?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1684741950,"post_id":76303655,"comment_id":134555612,"body_markdown":"(And how does the question demonstrate research effort?  How is it useful and clear?   What command did you run? What args?  An EC2 *what* ...)","body":"(And how does the question demonstrate research effort?  How is it useful and clear?   What command did you run? What args?  An EC2 <i>what</i> ...)"}],"owner":{"account_id":28651873,"reputation":17,"user_id":21938698,"display_name":"vino"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":0,"score":0,"last_activity_date":1684742186,"creation_date":1684738536,"question_id":76303655,"body_markdown":"The details are thus;\r\n\r\n     Error: No configuration files\r\n    │ \r\n    │ Plan requires configuration to be present. Planning without a configuration would mark everything for\r\n    │ destruction, which is normally not what is desired. If you would like to destroy everything, run plan with the\r\n    │ -destroy option. Otherwise, create a Terraform configuration file (.tf file) and try again.\r\n\r\nHave try to resolve it with alias &quot;env&quot; but it does not seem to be go. ","title":"How can I resolve this issue I have with creating an Ec2 on terraform please?","body":"<p>The details are thus;</p>\n<pre><code> Error: No configuration files\n│ \n│ Plan requires configuration to be present. Planning without a configuration would mark everything for\n│ destruction, which is normally not what is desired. If you would like to destroy everything, run plan with the\n│ -destroy option. Otherwise, create a Terraform configuration file (.tf file) and try again.\n</code></pre>\n<p>Have try to resolve it with alias &quot;env&quot; but it does not seem to be go.</p>\n"},{"tags":["java","openapi","swagger-3.0"],"answers":[{"tags":[],"owner":{"account_id":3965207,"reputation":1491,"user_id":3271380,"accept_rate":80,"display_name":"ulrich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624892888,"creation_date":1624892888,"answer_id":68165786,"question_id":66174633,"body_markdown":"I was getting the same issue today when using \r\n\r\n    @ApiResponse(\r\n        responseCode = &quot;200&quot;, \r\n        content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = MyDto.class)), \r\n        description = &quot;Returns MyDto.&quot;)\r\n\r\nwith `io.swagger.v3.oas.annotations.media.Schema` from `swagger 2.1.9`.\r\n\r\nAfter trying different swagger versions (which were producing other errors in my setup), it worked when downgrading to `swagger 2.0.10`.\r\n","title":"Overriding any parameter in io.swagger.v3.oas.annotations.media.Schema throws exception","body":"<p>I was getting the same issue today when using</p>\n<pre><code>@ApiResponse(\n    responseCode = &quot;200&quot;, \n    content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = MyDto.class)), \n    description = &quot;Returns MyDto.&quot;)\n</code></pre>\n<p>with <code>io.swagger.v3.oas.annotations.media.Schema</code> from <code>swagger 2.1.9</code>.</p>\n<p>After trying different swagger versions (which were producing other errors in my setup), it worked when downgrading to <code>swagger 2.0.10</code>.</p>\n"},{"tags":[],"owner":{"account_id":23126524,"reputation":1,"user_id":17232222,"display_name":"Wilmar Zapata"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683126896,"creation_date":1683126896,"answer_id":76165538,"question_id":66174633,"body_markdown":"I changed `@Schema(type = &quot;integer&quot;)` by `@Schema(implementation = Integer.class)`","title":"Overriding any parameter in io.swagger.v3.oas.annotations.media.Schema throws exception","body":"<p>I changed <code>@Schema(type = &quot;integer&quot;)</code> by <code>@Schema(implementation = Integer.class)</code></p>\n"},{"tags":[],"owner":{"account_id":954177,"reputation":785,"user_id":979765,"accept_rate":71,"display_name":"Ahmad R. Nazemi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684742051,"creation_date":1684742051,"answer_id":76304056,"question_id":66174633,"body_markdown":"Add this Dependency\r\n```xml\r\n &lt;dependency&gt;\r\n            &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\r\n            &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.10&lt;/version&gt;\r\n &lt;/dependency&gt;","title":"Overriding any parameter in io.swagger.v3.oas.annotations.media.Schema throws exception","body":"<p>Add this Dependency</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.2.10&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6954,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1684742051,"creation_date":1613143973,"question_id":66174633,"body_markdown":"I have this open API annotation\r\n\r\n   \r\n\r\n        @GET\r\n        @Operation(method = &quot;Get orders&quot;, description = &quot;GetOrdersRoute&quot;,\r\n                parameters = {\r\n                        @Parameter(in = ParameterIn.QUERY, name = &quot;batchSize&quot;, required = true,\r\n                                schema = @Schema(type = &quot;&quot;)),\r\n                        @Parameter(in = ParameterIn.QUERY, name = &quot;fromDate&quot;, required = true),\r\n                        @Parameter(in = ParameterIn.QUERY, name = &quot;filter&quot;, required = true)},\r\n                responses = {\r\n                        @ApiResponse(description = &quot;The order&quot;,\r\n                                content = @Content(mediaType = &quot;application/json&quot;,\r\n                                        schema = @Schema(implementation = OrderDto.class)))})\r\n        @Override\r\n        public String handle(@Parameter(hidden = true) Request request, @Parameter(hidden = true) Response response) {\r\n            return api.exec();\r\n        }\r\n\r\n It works. But when I add to `@Parameter` to `@Schema` any value like `schema = @Schema(type = &quot;integer&quot;))` I get an exception:\r\n\r\n\t\r\n\r\n    java.lang.NoSuchMethodError: org.apache.commons.lang3.math.NumberUtils.isCreatable(Ljava/lang/String;)Z\r\n\r\nIn other words:  `@Schema(type = &quot;&quot;))` works fine but  `@Schema(type = &quot;integer&quot;))` doesn&#39;t work.\r\n\r\nAnd not only `type` parameter in `@Schema` annotation. Any override parameter in  `@Schema` annotation throws this exception.\r\n\r\nBut `@Schema` in `@ApiResponse` works fine with any override parameter.","title":"Overriding any parameter in io.swagger.v3.oas.annotations.media.Schema throws exception","body":"<p>I have this open API annotation</p>\n<pre><code>    @GET\n    @Operation(method = &quot;Get orders&quot;, description = &quot;GetOrdersRoute&quot;,\n            parameters = {\n                    @Parameter(in = ParameterIn.QUERY, name = &quot;batchSize&quot;, required = true,\n                            schema = @Schema(type = &quot;&quot;)),\n                    @Parameter(in = ParameterIn.QUERY, name = &quot;fromDate&quot;, required = true),\n                    @Parameter(in = ParameterIn.QUERY, name = &quot;filter&quot;, required = true)},\n            responses = {\n                    @ApiResponse(description = &quot;The order&quot;,\n                            content = @Content(mediaType = &quot;application/json&quot;,\n                                    schema = @Schema(implementation = OrderDto.class)))})\n    @Override\n    public String handle(@Parameter(hidden = true) Request request, @Parameter(hidden = true) Response response) {\n        return api.exec();\n    }\n</code></pre>\n<p>It works. But when I add to <code>@Parameter</code> to <code>@Schema</code> any value like <code>schema = @Schema(type = &quot;integer&quot;))</code> I get an exception:</p>\n<pre><code>java.lang.NoSuchMethodError: org.apache.commons.lang3.math.NumberUtils.isCreatable(Ljava/lang/String;)Z\n</code></pre>\n<p>In other words:  <code>@Schema(type = &quot;&quot;))</code> works fine but  <code>@Schema(type = &quot;integer&quot;))</code> doesn't work.</p>\n<p>And not only <code>type</code> parameter in <code>@Schema</code> annotation. Any override parameter in  <code>@Schema</code> annotation throws this exception.</p>\n<p>But <code>@Schema</code> in <code>@ApiResponse</code> works fine with any override parameter.</p>\n"},{"tags":["java","gradle","swagger","swagger-codegen"],"answers":[{"comments":[{"owner":{"account_id":17432142,"reputation":287,"user_id":12635940,"display_name":"Esther"},"score":0,"creation_date":1663706936,"post_id":68848391,"comment_id":130302377,"body_markdown":"This did the job for me in a multimodule project, where the master-pom already had swagger configured.\n\nI disabled the master-pom swagger with exclusions inside &lt;dependencyManagement&gt;&lt;dependencies&gt;(&lt;/master artifactId&gt; and &lt;/groupid&gt;) &lt;exclusions&gt; &lt;/exclusion&gt;(groupid &amp; artifactid)\n\nIt will make sense for someone tangled in this\n\nLeaving me with two dependencies in the childpom: org.springdoc.springdoc-openapi-ui &amp; io.swagger.core.v3.swagger-annotations","body":"This did the job for me in a multimodule project, where the master-pom already had swagger configured.  I disabled the master-pom swagger with exclusions inside &lt;dependencyManagement&gt;&lt;dependencies&gt;(&lt;/master artifactId&gt; and &lt;/groupid&gt;) &lt;exclusions&gt; &lt;/exclusion&gt;(groupid &amp; artifactid)  It will make sense for someone tangled in this  Leaving me with two dependencies in the childpom: org.springdoc.springdoc-openapi-ui &amp; io.swagger.core.v3.swagger-annotations"}],"tags":[],"owner":{"account_id":7129150,"reputation":307,"user_id":5451050,"accept_rate":64,"display_name":"Alok Nath Saha"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1629378118,"creation_date":1629378118,"answer_id":68848391,"question_id":68843312,"body_markdown":"I was able to get the dependency issue fixed by adding the swagger-annotations library during the compile time in the build.gradle file:\r\n\r\n    dependencies {\r\n    implementation &quot;io.swagger.core.v3:swagger-annotations:2.1.10&quot;\r\n    }","title":"Package io.swagger.v3.oas.annotations.media does not exist (Swagger Codegen)","body":"<p>I was able to get the dependency issue fixed by adding the swagger-annotations library during the compile time in the build.gradle file:</p>\n<pre><code>dependencies {\nimplementation &quot;io.swagger.core.v3:swagger-annotations:2.1.10&quot;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":954177,"reputation":785,"user_id":979765,"accept_rate":71,"display_name":"Ahmad R. Nazemi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684741981,"creation_date":1684741981,"answer_id":76304047,"question_id":68843312,"body_markdown":"Add this dependency\r\n```code\r\n &lt;dependency&gt;\r\n            &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\r\n            &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.10&lt;/version&gt;\r\n&lt;/dependency&gt;```","title":"Package io.swagger.v3.oas.annotations.media does not exist (Swagger Codegen)","body":"<p>Add this dependency</p>\n<pre><code> &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.2.10&lt;/version&gt;\n&lt;/dependency&gt;```\n</code></pre>\n"}],"owner":{"account_id":7129150,"reputation":307,"user_id":5451050,"accept_rate":64,"display_name":"Alok Nath Saha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18146,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1684741981,"creation_date":1629356324,"question_id":68843312,"body_markdown":"I&#39;m generate a java client using swagger codegen cli tool (version 3.0.25) in gradle:\r\n\r\n    task doCodeGenSdk(type: JavaExec) {\r\n    main = &quot;io.swagger.codegen.v3.Codegen&quot;\r\n    classpath = configurations.codeGenCli\r\n    inputs.files file(&quot;${swaggerSpecDir}/*.json&quot;)\r\n    outputs.dir file(&quot;${codeGenDirSdk}&quot;)\r\n    args = [&quot;generate&quot;, &quot;--lang&quot;, &quot;java&quot;, &quot;--input-spec&quot;, &quot;${swaggerSpecFile}&quot;,\r\n            &quot;--config&quot;, &quot;${swaggerConfig}&quot;,\r\n            &quot;--template-dir&quot;, &quot;${swaggerTemplateDir}&quot;,\r\n            &quot;--output&quot;, &quot;${codeGenDirSdk}&quot;]\r\n    systemProperty &quot;apiTests&quot;, &quot;false&quot;\r\n    systemProperty &quot;apiDocs&quot;, &quot;false&quot;\r\n    systemProperty &quot;modelTests&quot;, &quot;false&quot;\r\n    systemProperty &quot;modelDocs&quot;, &quot;false&quot;}\r\n\r\nThe swagger config file is as shown below:\r\n\r\n    {\r\n    &quot;library&quot;: &quot;resttemplate&quot;,\r\n    &quot;artifactVersion&quot;: &quot;__VERSION__&quot;,\r\n    &quot;artifactId&quot;: &quot;__ARTIFACT_ID__&quot;,\r\n    &quot;modelPackage&quot;: &quot;com.model&quot;,\r\n    &quot;apiPackage&quot;: &quot;com.api&quot;,\r\n    &quot;invokerPackage&quot;: &quot;com.invoker&quot;,\r\n    &quot;dateLibrary&quot;: &quot;java8&quot;,\r\n    &quot;apiTests&quot;: false,\r\n    &quot;java8&quot;: true,\r\n    &quot;serializableModel&quot;: true,\r\n    &quot;useBeanValidation&quot;: true,\r\n    &quot;performBeanValidation&quot;: true}\r\n\r\nThe template-directory has the following mustache files:\r\n\r\n    ApiClient.mustache, generatedAnnotation.mustache, licenseInfo.mustach, pojo.mustache\r\n\r\nThe gradle file:\r\n\r\n    buildscript {\r\n    repositories {\r\n        maven {\r\n            url &quot;https://plugins.gradle.org/m2/&quot;\r\n        }\r\n    }\r\n    dependencies {\r\n        classpath &quot;io.swagger.core.v3:swagger-gradle-plugin:2.1.10&quot;\r\n      }\r\n    }\r\n    apply plugin: io.swagger.v3.plugins.gradle.SwaggerPlugin\r\n    configurations {\r\n        codeGenCli\r\n    }\r\n    dependencies {\r\n        codeGenCli &quot;io.swagger.codegen.v3:swagger-codegen-cli:3.0.25&quot;\r\n    }\r\n\r\nThe swagger codegen generates the files in the build directory, however there are import error for some of the packages.\r\n\r\n    error: package io.swagger.v3.oas.annotations.media does not exist\r\n\r\n\r\nWe were using swagger codegen tool to generate client code using swagger spec file in 2.0.\r\n\r\nThis is the first time, we&#39;re trying to generate a client using a swagger spec file in 3.0. \r\n\r\nAny help would be much appreciated.\r\n\r\n\r\n","title":"Package io.swagger.v3.oas.annotations.media does not exist (Swagger Codegen)","body":"<p>I'm generate a java client using swagger codegen cli tool (version 3.0.25) in gradle:</p>\n<pre><code>task doCodeGenSdk(type: JavaExec) {\nmain = &quot;io.swagger.codegen.v3.Codegen&quot;\nclasspath = configurations.codeGenCli\ninputs.files file(&quot;${swaggerSpecDir}/*.json&quot;)\noutputs.dir file(&quot;${codeGenDirSdk}&quot;)\nargs = [&quot;generate&quot;, &quot;--lang&quot;, &quot;java&quot;, &quot;--input-spec&quot;, &quot;${swaggerSpecFile}&quot;,\n        &quot;--config&quot;, &quot;${swaggerConfig}&quot;,\n        &quot;--template-dir&quot;, &quot;${swaggerTemplateDir}&quot;,\n        &quot;--output&quot;, &quot;${codeGenDirSdk}&quot;]\nsystemProperty &quot;apiTests&quot;, &quot;false&quot;\nsystemProperty &quot;apiDocs&quot;, &quot;false&quot;\nsystemProperty &quot;modelTests&quot;, &quot;false&quot;\nsystemProperty &quot;modelDocs&quot;, &quot;false&quot;}\n</code></pre>\n<p>The swagger config file is as shown below:</p>\n<pre><code>{\n&quot;library&quot;: &quot;resttemplate&quot;,\n&quot;artifactVersion&quot;: &quot;__VERSION__&quot;,\n&quot;artifactId&quot;: &quot;__ARTIFACT_ID__&quot;,\n&quot;modelPackage&quot;: &quot;com.model&quot;,\n&quot;apiPackage&quot;: &quot;com.api&quot;,\n&quot;invokerPackage&quot;: &quot;com.invoker&quot;,\n&quot;dateLibrary&quot;: &quot;java8&quot;,\n&quot;apiTests&quot;: false,\n&quot;java8&quot;: true,\n&quot;serializableModel&quot;: true,\n&quot;useBeanValidation&quot;: true,\n&quot;performBeanValidation&quot;: true}\n</code></pre>\n<p>The template-directory has the following mustache files:</p>\n<pre><code>ApiClient.mustache, generatedAnnotation.mustache, licenseInfo.mustach, pojo.mustache\n</code></pre>\n<p>The gradle file:</p>\n<pre><code>buildscript {\nrepositories {\n    maven {\n        url &quot;https://plugins.gradle.org/m2/&quot;\n    }\n}\ndependencies {\n    classpath &quot;io.swagger.core.v3:swagger-gradle-plugin:2.1.10&quot;\n  }\n}\napply plugin: io.swagger.v3.plugins.gradle.SwaggerPlugin\nconfigurations {\n    codeGenCli\n}\ndependencies {\n    codeGenCli &quot;io.swagger.codegen.v3:swagger-codegen-cli:3.0.25&quot;\n}\n</code></pre>\n<p>The swagger codegen generates the files in the build directory, however there are import error for some of the packages.</p>\n<pre><code>error: package io.swagger.v3.oas.annotations.media does not exist\n</code></pre>\n<p>We were using swagger codegen tool to generate client code using swagger spec file in 2.0.</p>\n<p>This is the first time, we're trying to generate a client using a swagger spec file in 3.0.</p>\n<p>Any help would be much appreciated.</p>\n"},{"tags":["java","spring","jms","activemq","spring-jms"],"comments":[{"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":0,"creation_date":1399822353,"post_id":23593980,"comment_id":36215330,"body_markdown":"On what basis do you say same message is redelivered after fixed interval. Can you show logs?","body":"On what basis do you say same message is redelivered after fixed interval. Can you show logs?"},{"owner":{"account_id":3605469,"reputation":1723,"user_id":3007732,"accept_rate":64,"display_name":"Ayelet"},"score":0,"creation_date":1399824043,"post_id":23593980,"comment_id":36215849,"body_markdown":"See my edit - as you can tell, there are fixed 5 seconds intervals between re-deliveries.","body":"See my edit - as you can tell, there are fixed 5 seconds intervals between re-deliveries."},{"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":0,"creation_date":1399824321,"post_id":23593980,"comment_id":36215966,"body_markdown":"Ans is it for the same message?","body":"Ans is it for the same message?"},{"owner":{"account_id":3605469,"reputation":1723,"user_id":3007732,"accept_rate":64,"display_name":"Ayelet"},"score":0,"creation_date":1399824435,"post_id":23593980,"comment_id":36216018,"body_markdown":"Yes, as I already said, these are all re-deliveries of the same message.","body":"Yes, as I already said, these are all re-deliveries of the same message."},{"owner":{"account_id":1474276,"reputation":4564,"user_id":1385087,"display_name":"Konstantin V. Salikhov"},"score":0,"creation_date":1399832220,"post_id":23593980,"comment_id":36218861,"body_markdown":"try to use different consumer cache settings at listener container","body":"try to use different consumer cache settings at listener container"},{"owner":{"account_id":1474276,"reputation":4564,"user_id":1385087,"display_name":"Konstantin V. Salikhov"},"score":0,"creation_date":1399832267,"post_id":23593980,"comment_id":36218880,"body_markdown":"http://forum.spring.io/forum/spring-projects/integration/jms/114247-jms-dmlc-not-caching-connection-when-using-tx-despite-cachelevel-cache-consumer","body":"<a href=\"http://forum.spring.io/forum/spring-projects/integration/jms/114247-jms-dmlc-not-caching-connection-when-using-tx-despite-cachelevel-cache-consumer\" rel=\"nofollow noreferrer\">forum.spring.io/forum/spring-projects/integration/jms/&hellip;</a>"},{"owner":{"account_id":1474276,"reputation":4564,"user_id":1385087,"display_name":"Konstantin V. Salikhov"},"score":0,"creation_date":1399832305,"post_id":23593980,"comment_id":36218902,"body_markdown":"http://tmielke.blogspot.ru/2012/03/camel-jms-with-transactions-lessons.html","body":"<a href=\"http://tmielke.blogspot.ru/2012/03/camel-jms-with-transactions-lessons.html\" rel=\"nofollow noreferrer\">tmielke.blogspot.ru/2012/03/&hellip;</a>"},{"owner":{"account_id":3605469,"reputation":1723,"user_id":3007732,"accept_rate":64,"display_name":"Ayelet"},"score":0,"creation_date":1399875791,"post_id":23593980,"comment_id":36230078,"body_markdown":"@Konstantin V. Salikhov - I changed the cache level to &quot;none&quot;, but it didn&#39;t make any difference.","body":"@Konstantin V. Salikhov - I changed the cache level to &quot;none&quot;, but it didn&#39;t make any difference."},{"owner":{"account_id":4999088,"reputation":333,"user_id":4018646,"accept_rate":60,"display_name":"tyfyh"},"score":1,"creation_date":1546778681,"post_id":23593980,"comment_id":94956546,"body_markdown":"in my case the problem was with cache settings, I changed cache level to &quot;CACHE_CONSUMER&quot; and it started to work","body":"in my case the problem was with cache settings, I changed cache level to &quot;CACHE_CONSUMER&quot; and it started to work"}],"answers":[{"comments":[{"owner":{"account_id":21094,"reputation":1458,"user_id":51016,"accept_rate":100,"display_name":"Christoffer Soop"},"score":0,"creation_date":1449164806,"post_id":23603151,"comment_id":55898594,"body_markdown":"I believe the JMS Exceptions are assumed to be related to the JMS connection and not the business case you have at hand. Thus on a JMS exception it should retry indefinitely whereas if there is another type of exception it should stop as per the RedeliveryPolicy.","body":"I believe the JMS Exceptions are assumed to be related to the JMS connection and not the business case you have at hand. Thus on a JMS exception it should retry indefinitely whereas if there is another type of exception it should stop as per the RedeliveryPolicy."},{"owner":{"account_id":2338104,"reputation":9101,"user_id":2049986,"accept_rate":89,"display_name":"Jacob van Lingen"},"score":0,"creation_date":1684748246,"post_id":23603151,"comment_id":134556954,"body_markdown":"Probably because JMSException is a checked exception; `@Transactional` only rollbacks runtime exception by default, you need to configure that yourself. See also [@Transactional won&#39;t rollback](https://stackoverflow.com/questions/73897990/spring-boot-jdbc-transactional-wont-rollback).","body":"Probably because JMSException is a checked exception; <code>@Transactional</code> only rollbacks runtime exception by default, you need to configure that yourself. See also <a href=\"https://stackoverflow.com/questions/73897990/spring-boot-jdbc-transactional-wont-rollback\">@Transactional won&#39;t rollback</a>."}],"tags":[],"owner":{"account_id":3605469,"reputation":1723,"user_id":3007732,"accept_rate":64,"display_name":"Ayelet"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1399879153,"creation_date":1399879153,"answer_id":23603151,"question_id":23593980,"body_markdown":"So, I think I found the problem:\r\nWhen I was testing the policy before, I threw JMSException to get the messages to be re-delivered.\r\n\r\nOne I changed the exception that was thrown to Exception/RuntimeException, the exponential back off worked.\r\n\r\nI&#39;m not sure why JMSException causes the exponential back off policy to be ignored...Does anyone have any ideas?","title":"Spring JMS - Exponential message re-delivery policy is ignored","body":"<p>So, I think I found the problem:\nWhen I was testing the policy before, I threw JMSException to get the messages to be re-delivered.</p>\n\n<p>One I changed the exception that was thrown to Exception/RuntimeException, the exponential back off worked.</p>\n\n<p>I'm not sure why JMSException causes the exponential back off policy to be ignored...Does anyone have any ideas?</p>\n"},{"tags":[],"owner":{"account_id":2338104,"reputation":9101,"user_id":2049986,"accept_rate":89,"display_name":"Jacob van Lingen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684741977,"creation_date":1684741977,"answer_id":76304043,"question_id":23593980,"body_markdown":"To make @tyfyh&#39;s comment stand out a little more, let&#39;s expand it as an answer. By setting the cache level to [CACHE_CONSUMER][1], it means that the JMS consumer (message receiver) is cached, allowing it to be reused for multiple message deliveries. This caching behavior can impact the redelivery behavior and handling of exceptions, and a such fix above problem.\r\n\r\nYou can define the DefaultJmsListenerContainerFactory yourself:\r\n\r\n    @Bean\r\n    public DefaultJmsListenerContainerFactory jmsListenerContainerFactory(PlatformTransactionManager txManager, ConnectionFactory connectionFactory) {\r\n      var factory = new DefaultJmsListenerContainerFactory();\r\n      factory.setTransactionManager(txManager);\r\n      factory.setConnectionFactory(connectionFactory);\r\n      factory.setCacheLevel(DefaultMessageListenerContainer.CACHE_CONSUMER);\r\n\r\n      return factory;\r\n    }\r\n\r\nOr use existing bean and just set the cache level:\r\n\r\n    @Configuration\r\n    public class JmsListenerConfig {\r\n\r\n      private final DefaultJmsListenerContainerFactory factory;\r\n\r\n      public JmsListenerConfig(DefaultJmsListenerContainerFactory factory) {\r\n        this.factory = factory;\r\n      }\r\n\r\n      @PostConstruct\r\n      public void customizeJmsListenerContainerFactory() {\r\n        factory.setCacheLevel(DefaultMessageListenerContainer.CACHE_CONSUMER);\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jms/listener/DefaultMessageListenerContainer.html#CACHE_CONSUMER","title":"Spring JMS - Exponential message re-delivery policy is ignored","body":"<p>To make @tyfyh's comment stand out a little more, let's expand it as an answer. By setting the cache level to <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jms/listener/DefaultMessageListenerContainer.html#CACHE_CONSUMER\" rel=\"nofollow noreferrer\">CACHE_CONSUMER</a>, it means that the JMS consumer (message receiver) is cached, allowing it to be reused for multiple message deliveries. This caching behavior can impact the redelivery behavior and handling of exceptions, and a such fix above problem.</p>\n<p>You can define the DefaultJmsListenerContainerFactory yourself:</p>\n<pre><code>@Bean\npublic DefaultJmsListenerContainerFactory jmsListenerContainerFactory(PlatformTransactionManager txManager, ConnectionFactory connectionFactory) {\n  var factory = new DefaultJmsListenerContainerFactory();\n  factory.setTransactionManager(txManager);\n  factory.setConnectionFactory(connectionFactory);\n  factory.setCacheLevel(DefaultMessageListenerContainer.CACHE_CONSUMER);\n\n  return factory;\n}\n</code></pre>\n<p>Or use existing bean and just set the cache level:</p>\n<pre><code>@Configuration\npublic class JmsListenerConfig {\n\n  private final DefaultJmsListenerContainerFactory factory;\n\n  public JmsListenerConfig(DefaultJmsListenerContainerFactory factory) {\n    this.factory = factory;\n  }\n\n  @PostConstruct\n  public void customizeJmsListenerContainerFactory() {\n    factory.setCacheLevel(DefaultMessageListenerContainer.CACHE_CONSUMER);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":3605469,"reputation":1723,"user_id":3007732,"accept_rate":64,"display_name":"Ayelet"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7029,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1684741977,"creation_date":1399819539,"question_id":23593980,"body_markdown":"We&#39;re trying to set a re-delivery policy for ActiveMQ using spring jms. We&#39;ve set an exponential back-off for the re-deliveries, but it seems to be ignored - the intervals between the message re-deliveries are fixed instead of exponentially growing.\r\n\r\nDoes anyone know what might be the problem? This is our spring-jms configuration:\r\n\r\n\t&lt;bean id=&quot;connectionFactory&quot; class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot;\r\n\t\tp:brokerURL=&quot;${activemq_url}&quot;&gt;\r\n\t\t&lt;property name=&quot;redeliveryPolicy&quot; ref=&quot;redeliveryPolicy&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n\t&lt;bean id=&quot;redeliveryPolicy&quot; class=&quot;org.apache.activemq.RedeliveryPolicy&quot;&gt;\r\n\t\t&lt;property name=&quot;queue&quot; value=&quot;*&quot; /&gt;\r\n\t\t&lt;property name=&quot;initialRedeliveryDelay&quot; value=&quot;10000&quot; /&gt;\r\n\t\t&lt;property name=&quot;redeliveryDelay&quot; value=&quot;10000&quot; /&gt;\r\n\t\t&lt;property name=&quot;maximumRedeliveries&quot; value=&quot;-1&quot; /&gt;\r\n\t\t&lt;property name=&quot;useExponentialBackOff&quot; value=&quot;true&quot; /&gt;\r\n\t\t&lt;property name=&quot;backOffMultiplier&quot; value=&quot;5&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n\t&lt;bean id=&quot;cachingConnectionFactory&quot; class=&quot;org.springframework.jms.connection.CachingConnectionFactory&quot; \r\n\t\tp:targetConnectionFactory-ref=&quot;connectionFactory&quot; p:sessionCacheSize=&quot;10&quot; \r\n\t\t/&gt;\r\n\r\n\t&lt;!-- A JmsTemplate instance that uses the cached connection and destination --&gt;\r\n\t&lt;bean id=&quot;jmsTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;\r\n\t\t&lt;property name=&quot;connectionFactory&quot; ref=&quot;cachingConnectionFactory&quot; /&gt;\r\n\t\t&lt;property name=&quot;messageConverter&quot; ref=&quot;messageConverter&quot; /&gt;\r\n\t\t&lt;property name=&quot;sessionTransacted&quot; value=&quot;true&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n\t&lt;!-- The Spring message listener container configuration --&gt;\r\n\t&lt;jms:listener-container container-type=&quot;default&quot;\r\n\t\tdestination-type=&quot;queue&quot; connection-factory=&quot;connectionFactory&quot;\r\n\t\tacknowledge=&quot;transacted&quot; concurrency=&quot;1&quot; cache=&quot;consumer&quot;&gt;\r\n\t\t&lt;jms:listener destination=&quot;testQueue&quot; ref=&quot;testService&quot;\r\n\t\t\tmethod=&quot;onMessage&quot; /&gt;\r\n\t&lt;/jms:listener-container&gt;\r\n\r\nThanks!\r\n\r\n**EDIT:** This is a log example, the re-deliveries happen every 5 seconds:\r\n\r\n    11 May 2014 18:52:00  WARN DefaultMessageListenerContainer - Execution of JMS message listener failed, and no ErrorHandler has been set.\r\n    javax.jms.JMSException: Sun May 11 18:52:00 IDT 2014\r\n\tat ...\r\n    11 May 2014 18:52:05  WARN DefaultMessageListenerContainer - Execution of JMS message listener failed, and no ErrorHandler has been set.\r\n    javax.jms.JMSException: Sun May 11 18:52:05 IDT 2014\r\n\tat ...\r\n    11 May 2014 18:52:10  WARN DefaultMessageListenerContainer - Execution of JMS message listener failed, and no ErrorHandler has been set.\r\n    javax.jms.JMSException: Sun May 11 18:52:10 IDT 2014\r\n\tat ...\r\n    11 May 2014 18:52:15  WARN DefaultMessageListenerContainer - Execution of JMS message listener failed, and no ErrorHandler has been set.\r\n    javax.jms.JMSException: Sun May 11 18:52:15 IDT 2014\r\n\tat ...\r\n    11 May 2014 18:52:20  WARN DefaultMessageListenerContainer - Execution of JMS message listener failed, and no ErrorHandler has been set.\r\n    javax.jms.JMSException: Sun May 11 18:52:20 IDT 2014\r\n\tat ...","title":"Spring JMS - Exponential message re-delivery policy is ignored","body":"<p>We're trying to set a re-delivery policy for ActiveMQ using spring jms. We've set an exponential back-off for the re-deliveries, but it seems to be ignored - the intervals between the message re-deliveries are fixed instead of exponentially growing.</p>\n\n<p>Does anyone know what might be the problem? This is our spring-jms configuration:</p>\n\n<pre><code>&lt;bean id=\"connectionFactory\" class=\"org.apache.activemq.ActiveMQConnectionFactory\"\n    p:brokerURL=\"${activemq_url}\"&gt;\n    &lt;property name=\"redeliveryPolicy\" ref=\"redeliveryPolicy\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"redeliveryPolicy\" class=\"org.apache.activemq.RedeliveryPolicy\"&gt;\n    &lt;property name=\"queue\" value=\"*\" /&gt;\n    &lt;property name=\"initialRedeliveryDelay\" value=\"10000\" /&gt;\n    &lt;property name=\"redeliveryDelay\" value=\"10000\" /&gt;\n    &lt;property name=\"maximumRedeliveries\" value=\"-1\" /&gt;\n    &lt;property name=\"useExponentialBackOff\" value=\"true\" /&gt;\n    &lt;property name=\"backOffMultiplier\" value=\"5\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"cachingConnectionFactory\" class=\"org.springframework.jms.connection.CachingConnectionFactory\" \n    p:targetConnectionFactory-ref=\"connectionFactory\" p:sessionCacheSize=\"10\" \n    /&gt;\n\n&lt;!-- A JmsTemplate instance that uses the cached connection and destination --&gt;\n&lt;bean id=\"jmsTemplate\" class=\"org.springframework.jms.core.JmsTemplate\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"cachingConnectionFactory\" /&gt;\n    &lt;property name=\"messageConverter\" ref=\"messageConverter\" /&gt;\n    &lt;property name=\"sessionTransacted\" value=\"true\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- The Spring message listener container configuration --&gt;\n&lt;jms:listener-container container-type=\"default\"\n    destination-type=\"queue\" connection-factory=\"connectionFactory\"\n    acknowledge=\"transacted\" concurrency=\"1\" cache=\"consumer\"&gt;\n    &lt;jms:listener destination=\"testQueue\" ref=\"testService\"\n        method=\"onMessage\" /&gt;\n&lt;/jms:listener-container&gt;\n</code></pre>\n\n<p>Thanks!</p>\n\n<p><strong>EDIT:</strong> This is a log example, the re-deliveries happen every 5 seconds:</p>\n\n<pre><code>11 May 2014 18:52:00  WARN DefaultMessageListenerContainer - Execution of JMS message listener failed, and no ErrorHandler has been set.\njavax.jms.JMSException: Sun May 11 18:52:00 IDT 2014\nat ...\n11 May 2014 18:52:05  WARN DefaultMessageListenerContainer - Execution of JMS message listener failed, and no ErrorHandler has been set.\njavax.jms.JMSException: Sun May 11 18:52:05 IDT 2014\nat ...\n11 May 2014 18:52:10  WARN DefaultMessageListenerContainer - Execution of JMS message listener failed, and no ErrorHandler has been set.\njavax.jms.JMSException: Sun May 11 18:52:10 IDT 2014\nat ...\n11 May 2014 18:52:15  WARN DefaultMessageListenerContainer - Execution of JMS message listener failed, and no ErrorHandler has been set.\njavax.jms.JMSException: Sun May 11 18:52:15 IDT 2014\nat ...\n11 May 2014 18:52:20  WARN DefaultMessageListenerContainer - Execution of JMS message listener failed, and no ErrorHandler has been set.\njavax.jms.JMSException: Sun May 11 18:52:20 IDT 2014\nat ...\n</code></pre>\n"},{"tags":["java","json","log4j"],"comments":[{"owner":{"account_id":239780,"reputation":3693,"user_id":509614,"accept_rate":88,"display_name":"Dennis"},"score":0,"creation_date":1583578440,"post_id":24652128,"comment_id":107169461,"body_markdown":"Any reason for the f-bomb?","body":"Any reason for the f-bomb?"}],"answers":[{"tags":[],"owner":{"account_id":3628710,"reputation":333,"user_id":3025557,"accept_rate":80,"display_name":"nimble_ninja"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1416853201,"creation_date":1416853201,"answer_id":27111550,"question_id":24652128,"body_markdown":"I&#39;m basing my response on [this manual reference][1].\r\n\r\n1) Apparently the only parameters the JSONLayout takes are charset, compact, complete, properties, and locationInfo.  Unfortunately based on my limited research, removing endOfBatch and loggerFqcn doesn&#39;t appear possible.  (This is odd, however, since the example output in the referenced manual does not include these fields.)\r\n\r\n2) This is almost certainly not possible.  The concept of a log entry in log4j involves a string message, possibly a throwable, a log level, and a few other static things.  Custom fields aren&#39;t possible without writing a custom class.  [This SO question][2] describes doing that, though for the purpose of that question, MDC was used in the end.  MDC wouldn&#39;t serve your purposes since you want to have custom fields that are different in each entry.  I&#39;m not sure what you mean by &quot;flatten.&quot;\r\n\r\n3) Unfortunately this doesn&#39;t look like it&#39;s available either.  PatternLayout is much more customizable; AFAIK you will have to customize JSONLayout yourself.\r\n\r\n\r\n  [1]: http://logging.apache.org/log4j/2.0/manual/layouts.html\r\n  [2]: https://stackoverflow.com/questions/1687473/log4j-custom-fields","title":"How to modify log4j JsonLayout field names","body":"<p>I'm basing my response on <a href=\"http://logging.apache.org/log4j/2.0/manual/layouts.html\" rel=\"nofollow noreferrer\">this manual reference</a>.</p>\n\n<p>1) Apparently the only parameters the JSONLayout takes are charset, compact, complete, properties, and locationInfo.  Unfortunately based on my limited research, removing endOfBatch and loggerFqcn doesn't appear possible.  (This is odd, however, since the example output in the referenced manual does not include these fields.)</p>\n\n<p>2) This is almost certainly not possible.  The concept of a log entry in log4j involves a string message, possibly a throwable, a log level, and a few other static things.  Custom fields aren't possible without writing a custom class.  <a href=\"https://stackoverflow.com/questions/1687473/log4j-custom-fields\">This SO question</a> describes doing that, though for the purpose of that question, MDC was used in the end.  MDC wouldn't serve your purposes since you want to have custom fields that are different in each entry.  I'm not sure what you mean by \"flatten.\"</p>\n\n<p>3) Unfortunately this doesn't look like it's available either.  PatternLayout is much more customizable; AFAIK you will have to customize JSONLayout yourself.</p>\n"},{"tags":[],"owner":{"account_id":6704479,"reputation":31,"user_id":5169965,"display_name":"user5169965"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1441963409,"creation_date":1441961203,"answer_id":32519271,"question_id":24652128,"body_markdown":"You can customize `JacksonFactory` class to include only field names that you want  in log entry. Default implementation in `JacksonFactory` is excluding only two fields from log entry which are location and properties (that too based on parameters properties and source). But if you want to exclude more fields you could add more field names to exclude in set of properties to exclude, Here is the example \r\n\r\n    ObjectWriter newWriter(final boolean locationInfo, final boolean properties, final boolean compact) {\r\n            final SimpleFilterProvider filters = new SimpleFilterProvider();\r\n            final Set&lt;String&gt; except = new HashSet&lt;&gt;(5);\r\n            if (!locationInfo) {\r\n                except.add(this.getPropertNameForSource());\r\n            }\r\n            if (!properties) {\r\n                except.add(this.getPropertNameForContextMap());\r\n        }\r\n\r\n        except.add(this.getPropertNameForNanoTime());\r\n      \r\n        except.add(&quot;loggerFqcn&quot;);\r\n        except.add(&quot;endOfBatch&quot;);\r\n        filters.addFilter(Log4jLogEvent.class.getName(), SimpleBeanPropertyFilter.serializeAllExcept(except));\r\n\r\n        final ObjectWriter writer = this.newObjectMapper().writer(compact ? this.newCompactPrinter() : this.newPrettyPrinter());\r\n\r\n        return writer.with(filters);\r\n    }\r\n","title":"How to modify log4j JsonLayout field names","body":"<p>You can customize <code>JacksonFactory</code> class to include only field names that you want  in log entry. Default implementation in <code>JacksonFactory</code> is excluding only two fields from log entry which are location and properties (that too based on parameters properties and source). But if you want to exclude more fields you could add more field names to exclude in set of properties to exclude, Here is the example </p>\n\n<pre><code>ObjectWriter newWriter(final boolean locationInfo, final boolean properties, final boolean compact) {\n        final SimpleFilterProvider filters = new SimpleFilterProvider();\n        final Set&lt;String&gt; except = new HashSet&lt;&gt;(5);\n        if (!locationInfo) {\n            except.add(this.getPropertNameForSource());\n        }\n        if (!properties) {\n            except.add(this.getPropertNameForContextMap());\n    }\n\n    except.add(this.getPropertNameForNanoTime());\n\n    except.add(\"loggerFqcn\");\n    except.add(\"endOfBatch\");\n    filters.addFilter(Log4jLogEvent.class.getName(), SimpleBeanPropertyFilter.serializeAllExcept(except));\n\n    final ObjectWriter writer = this.newObjectMapper().writer(compact ? this.newCompactPrinter() : this.newPrettyPrinter());\n\n    return writer.with(filters);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":337029,"reputation":43,"user_id":665049,"display_name":"user665049"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524673726,"creation_date":1524673726,"answer_id":50027159,"question_id":24652128,"body_markdown":"It is possible to do this with a Log4j extension. See https://github.com/metamx/sumologic-log4j2-appender/blob/master/src/main/java/com/sumologic/log4j/core/SumoJsonLayout.java#L117-L237 for an example. Basically you can extend `LogEvent` with whatever Jackson annotations you want to customize how things are printed out, but then you need some kind of layout in order to coerce the events into your custom-field-named event object.","title":"How to modify log4j JsonLayout field names","body":"<p>It is possible to do this with a Log4j extension. See <a href=\"https://github.com/metamx/sumologic-log4j2-appender/blob/master/src/main/java/com/sumologic/log4j/core/SumoJsonLayout.java#L117-L237\" rel=\"nofollow noreferrer\">https://github.com/metamx/sumologic-log4j2-appender/blob/master/src/main/java/com/sumologic/log4j/core/SumoJsonLayout.java#L117-L237</a> for an example. Basically you can extend <code>LogEvent</code> with whatever Jackson annotations you want to customize how things are printed out, but then you need some kind of layout in order to coerce the events into your custom-field-named event object.</p>\n"},{"tags":[],"owner":{"account_id":2892776,"reputation":3221,"user_id":2481153,"display_name":"HungNM2"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1624774642,"creation_date":1624774642,"answer_id":68148523,"question_id":24652128,"body_markdown":"user [JsonTemplateLayout][1]:\r\n\r\n\r\n**Pom.xml:**\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;log4j-layout-template-json&lt;/artifactId&gt;\r\n        &lt;version&gt;2.14.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**log4j2.xml:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;INFO&quot;&gt;\r\n    \t&lt;Appenders&gt;\r\n    \t\t&lt;Console name=&quot;console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n    \t\t\t&lt;JsonTemplateLayout eventTemplateUri=&quot;classpath:JsonTemplateLayout.json&quot; /&gt;\r\n    \t\t&lt;/Console&gt;\r\n    \t&lt;/Appenders&gt;\r\n    \t&lt;Loggers&gt;\r\n    \t\t&lt;Logger name=&quot;com.logging.a.b&quot; level=&quot;error&quot; additivity=&quot;false&quot;&gt;\r\n    \t\t\t&lt;AppenderRef ref=&quot;console&quot; /&gt;\r\n    \t\t&lt;/Logger&gt;\r\n    \t&lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\n**src/main/resources/JsonTemplateLayout.json:**\r\n\r\n    {\r\n    \t&quot;version&quot;: &quot;1.1&quot;,\r\n    \t&quot;hostName&quot;: &quot;${hostName}&quot;,\r\n    \t&quot;field1&quot;: &quot;${env:JAVA_HOME}&quot;,\r\n    \t&quot;field2&quot;: &quot;${sys:os.name}&quot;,\r\n    \t&quot;time&quot;: {\r\n    \t\t&quot;$resolver&quot;: &quot;timestamp&quot;,\r\n    \t\t&quot;pattern&quot;: {\r\n    \t\t\t&quot;format&quot;: &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;,\r\n    \t\t\t&quot;timeZone&quot;: &quot;UTC&quot;\r\n    \t\t}\r\n    \t},\r\n    \t&quot;level&quot;: {\r\n    \t\t&quot;$resolver&quot;: &quot;level&quot;,\r\n    \t\t&quot;field&quot;: &quot;name&quot;\r\n    \t},\r\n    \t&quot;loggerName&quot;: {\r\n    \t\t&quot;$resolver&quot;: &quot;logger&quot;,\r\n    \t\t&quot;field&quot;: &quot;name&quot;\r\n    \t},\r\n    \t&quot;message&quot;: {\r\n    \t\t&quot;$resolver&quot;: &quot;message&quot;,\r\n    \t\t&quot;stringified&quot;: true\r\n    \t},\r\n    \t&quot;source&quot;: {\r\n    \t\t&quot;class&quot;: {\r\n    \t\t\t&quot;$resolver&quot;: &quot;source&quot;,\r\n    \t\t\t&quot;field&quot;: &quot;className&quot;\r\n    \t\t},\r\n    \t\t&quot;method&quot;: {\r\n    \t\t\t&quot;$resolver&quot;: &quot;source&quot;,\r\n    \t\t\t&quot;field&quot;: &quot;methodName&quot;\r\n    \t\t},\r\n    \t\t&quot;file&quot;: {\r\n    \t\t\t&quot;$resolver&quot;: &quot;source&quot;,\r\n    \t\t\t&quot;field&quot;: &quot;fileName&quot;\r\n    \t\t},\r\n    \t\t&quot;line&quot;: {\r\n    \t\t\t&quot;$resolver&quot;: &quot;source&quot;,\r\n    \t\t\t&quot;field&quot;: &quot;lineNumber&quot;\r\n    \t\t}\r\n    \t},\r\n    }\r\n\r\nYou can add and remove fields, or change name of fields by changing the above template file.\r\nSee more examples here: [json template file][2]\r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/manual/json-template-layout.html\r\n  [2]: https://github.com/apache/logging-log4j2/tree/master/log4j-layout-template-json/src/main/resources","title":"How to modify log4j JsonLayout field names","body":"<p>user <a href=\"https://logging.apache.org/log4j/2.x/manual/json-template-layout.html\" rel=\"nofollow noreferrer\">JsonTemplateLayout</a>:</p>\n<p><strong>Pom.xml:</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-layout-template-json&lt;/artifactId&gt;\n    &lt;version&gt;2.14.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>log4j2.xml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;INFO&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;JsonTemplateLayout eventTemplateUri=&quot;classpath:JsonTemplateLayout.json&quot; /&gt;\n        &lt;/Console&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;com.logging.a.b&quot; level=&quot;error&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef ref=&quot;console&quot; /&gt;\n        &lt;/Logger&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p><strong>src/main/resources/JsonTemplateLayout.json:</strong></p>\n<pre><code>{\n    &quot;version&quot;: &quot;1.1&quot;,\n    &quot;hostName&quot;: &quot;${hostName}&quot;,\n    &quot;field1&quot;: &quot;${env:JAVA_HOME}&quot;,\n    &quot;field2&quot;: &quot;${sys:os.name}&quot;,\n    &quot;time&quot;: {\n        &quot;$resolver&quot;: &quot;timestamp&quot;,\n        &quot;pattern&quot;: {\n            &quot;format&quot;: &quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;,\n            &quot;timeZone&quot;: &quot;UTC&quot;\n        }\n    },\n    &quot;level&quot;: {\n        &quot;$resolver&quot;: &quot;level&quot;,\n        &quot;field&quot;: &quot;name&quot;\n    },\n    &quot;loggerName&quot;: {\n        &quot;$resolver&quot;: &quot;logger&quot;,\n        &quot;field&quot;: &quot;name&quot;\n    },\n    &quot;message&quot;: {\n        &quot;$resolver&quot;: &quot;message&quot;,\n        &quot;stringified&quot;: true\n    },\n    &quot;source&quot;: {\n        &quot;class&quot;: {\n            &quot;$resolver&quot;: &quot;source&quot;,\n            &quot;field&quot;: &quot;className&quot;\n        },\n        &quot;method&quot;: {\n            &quot;$resolver&quot;: &quot;source&quot;,\n            &quot;field&quot;: &quot;methodName&quot;\n        },\n        &quot;file&quot;: {\n            &quot;$resolver&quot;: &quot;source&quot;,\n            &quot;field&quot;: &quot;fileName&quot;\n        },\n        &quot;line&quot;: {\n            &quot;$resolver&quot;: &quot;source&quot;,\n            &quot;field&quot;: &quot;lineNumber&quot;\n        }\n    },\n}\n</code></pre>\n<p>You can add and remove fields, or change name of fields by changing the above template file.\nSee more examples here: <a href=\"https://github.com/apache/logging-log4j2/tree/master/log4j-layout-template-json/src/main/resources\" rel=\"nofollow noreferrer\">json template file</a></p>\n"},{"tags":[],"owner":{"account_id":15375039,"reputation":508,"user_id":11092008,"display_name":"Shapur"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684741876,"creation_date":1684741876,"answer_id":76304028,"question_id":24652128,"body_markdown":"You can use the solution in the below link to customize these attributes.\r\n\r\nhttps://stackoverflow.com/a/76303815/11092008","title":"How to modify log4j JsonLayout field names","body":"<p>You can use the solution in the below link to customize these attributes.</p>\n<p><a href=\"https://stackoverflow.com/a/76303815/11092008\">https://stackoverflow.com/a/76303815/11092008</a></p>\n"}],"owner":{"account_id":330259,"reputation":5603,"user_id":654269,"accept_rate":93,"display_name":"Majid Azimi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14890,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":5,"score":8,"last_activity_date":1684741876,"creation_date":1404904251,"question_id":24652128,"body_markdown":"I have configured log4j 2 with this config file to write my `MapMessage` to console:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;ERROR&quot;&gt;\r\n        &lt;Properties&gt;\r\n            &lt;Property name=&quot;disableThreadContext&quot;&gt;true&lt;/Property&gt;\r\n            &lt;Property name=&quot;disableThreadContextStack&quot;&gt;true&lt;/Property&gt;\r\n            &lt;Property name=&quot;disableThreadContextMap&quot;&gt;true&lt;/Property&gt;\r\n            &lt;Property name=&quot;log4j2.disable.jmx&quot;&gt;true&lt;/Property&gt;\r\n        &lt;/Properties&gt;\r\n        &lt;Appenders&gt;\r\n            &lt;Console name=&quot;CONSOLE&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n                &lt;JsonLayout locationInfo=&quot;true&quot; complete=&quot;false&quot; /&gt;\r\n            &lt;/Console&gt;\r\n        &lt;/Appenders&gt;\r\n        &lt;Loggers&gt;\r\n            &lt;logger name=&quot;ir.cvas.logger&quot; level=&quot;info&quot; /&gt;\r\n            &lt;Root level=&quot;warn&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt;\r\n            &lt;/Root&gt;\r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\nThe output of this configuration is like:\r\n\r\n    {\r\n      &quot;timeMillis&quot; : 1404902036494,\r\n      &quot;thread&quot; : &quot;main&quot;,\r\n      &quot;level&quot; : &quot;ERROR&quot;,\r\n      &quot;loggerName&quot; : &quot;ir.cvas.log4j.json.Main&quot;,\r\n      &quot;message&quot; : &quot;description=\\&quot;I&#39;m so fucked...\\&quot; id=\\&quot;12312312312312321\\&quot;&quot;,\r\n      &quot;endOfBatch&quot; : false,\r\n      &quot;loggerFqcn&quot; : &quot;org.apache.logging.log4j.spi.AbstractLogger&quot;,\r\n      &quot;source&quot; : {\r\n        &quot;class&quot; : &quot;ir.cvas.log4j.json.Main&quot;,\r\n        &quot;method&quot; : &quot;main&quot;,\r\n        &quot;file&quot; : &quot;Main.java&quot;,\r\n        &quot;line&quot; : 24\r\n      }\r\n    }\r\n\r\n 1. I need to remove some fields from output such as `endOfBatch` and `loggerFqcn`. Is it possible?\r\n 2. I don&#39;t really like how `MapMessage` is converted. I would want something like Json object instead of single string, Something like thisthis: `&quot;message&quot;: { &quot;description&quot;=&quot;I&#39;m so fucked...&quot;, &quot;id&quot;=&quot;12312312312312321&quot; }` or at least flatten `MapMessage` fields in to log message.\r\n 3. I want to convert timestamp field to unix time with milliseconds removed.\r\n\r\nCan anyone help?","title":"How to modify log4j JsonLayout field names","body":"<p>I have configured log4j 2 with this config file to write my <code>MapMessage</code> to console:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration status=\"ERROR\"&gt;\n    &lt;Properties&gt;\n        &lt;Property name=\"disableThreadContext\"&gt;true&lt;/Property&gt;\n        &lt;Property name=\"disableThreadContextStack\"&gt;true&lt;/Property&gt;\n        &lt;Property name=\"disableThreadContextMap\"&gt;true&lt;/Property&gt;\n        &lt;Property name=\"log4j2.disable.jmx\"&gt;true&lt;/Property&gt;\n    &lt;/Properties&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=\"CONSOLE\" target=\"SYSTEM_OUT\"&gt;\n            &lt;JsonLayout locationInfo=\"true\" complete=\"false\" /&gt;\n        &lt;/Console&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;logger name=\"ir.cvas.logger\" level=\"info\" /&gt;\n        &lt;Root level=\"warn\"&gt;\n            &lt;AppenderRef ref=\"CONSOLE\"/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n\n<p>The output of this configuration is like:</p>\n\n<pre><code>{\n  \"timeMillis\" : 1404902036494,\n  \"thread\" : \"main\",\n  \"level\" : \"ERROR\",\n  \"loggerName\" : \"ir.cvas.log4j.json.Main\",\n  \"message\" : \"description=\\\"I'm so fucked...\\\" id=\\\"12312312312312321\\\"\",\n  \"endOfBatch\" : false,\n  \"loggerFqcn\" : \"org.apache.logging.log4j.spi.AbstractLogger\",\n  \"source\" : {\n    \"class\" : \"ir.cvas.log4j.json.Main\",\n    \"method\" : \"main\",\n    \"file\" : \"Main.java\",\n    \"line\" : 24\n  }\n}\n</code></pre>\n\n<ol>\n<li>I need to remove some fields from output such as <code>endOfBatch</code> and <code>loggerFqcn</code>. Is it possible?</li>\n<li>I don't really like how <code>MapMessage</code> is converted. I would want something like Json object instead of single string, Something like thisthis: <code>\"message\": { \"description\"=\"I'm so fucked...\", \"id\"=\"12312312312312321\" }</code> or at least flatten <code>MapMessage</code> fields in to log message.</li>\n<li>I want to convert timestamp field to unix time with milliseconds removed.</li>\n</ol>\n\n<p>Can anyone help?</p>\n"},{"tags":["java","arrays","string","for-loop"],"comments":[{"owner":{"account_id":28203287,"reputation":31,"user_id":21556763,"display_name":"Jharokha "},"score":0,"creation_date":1680666199,"post_id":75935395,"comment_id":133935040,"body_markdown":"`list.removeIf(e-&gt;e.replaceAll(&quot;\\\\W+&quot;,&quot;&quot;).length() ==0 );` worked for me","body":"<code>list.removeIf(e-&gt;e.replaceAll(&quot;\\\\W+&quot;,&quot;&quot;).length() ==0 );</code> worked for me"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684386910,"post_id":75935395,"comment_id":134511467,"body_markdown":"What about contracted words, like &quot;can&#39;t&quot; or &quot;don&#39;t&quot;?  Also, hyphenated words, like &quot;stack-overflow&quot;.  Should they be filtered?","body":"What about contracted words, like &quot;can&#39;t&quot; or &quot;don&#39;t&quot;?  Also, hyphenated words, like &quot;stack-overflow&quot;.  Should they be filtered?"}],"answers":[{"comments":[{"owner":{"account_id":9866227,"reputation":48,"user_id":7307613,"display_name":"Akbar  Amanov"},"score":0,"creation_date":1680665582,"post_id":75935427,"comment_id":133934985,"body_markdown":"I think using `for(String i : list)`  should also work","body":"I think using <code>for(String i : list)</code>  should also work"},{"owner":{"account_id":9866227,"reputation":48,"user_id":7307613,"display_name":"Akbar  Amanov"},"score":0,"creation_date":1680665954,"post_id":75935427,"comment_id":133935018,"body_markdown":"Also delete semicolon in the end of if statemenet.","body":"Also delete semicolon in the end of if statemenet."}],"tags":[],"owner":{"account_id":9866227,"reputation":48,"user_id":7307613,"display_name":"Akbar  Amanov"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1681104798,"creation_date":1680665383,"answer_id":75935427,"question_id":75935395,"body_markdown":"I suggest you add `i--;` to the end of your `if` clause, or use another datastructure like `Stack` or something similar. \r\n\r\nAfter `List.remove()`, all your indexes will have shifted. ","title":"Strictly checking for alphanumeric in string not special characters","body":"<p>I suggest you add <code>i--;</code> to the end of your <code>if</code> clause, or use another datastructure like <code>Stack</code> or something similar.</p>\n<p>After <code>List.remove()</code>, all your indexes will have shifted.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680666007,"creation_date":1680666007,"answer_id":75935464,"question_id":75935395,"body_markdown":"3 lines of code and 4 problems. Impressive :)\r\n\r\n&gt; `if(StringUtils.isAlphanumeric(list.get(i)));`\r\n\r\nThe semi-colon __is__ the instruction that is being run, i.e. nothing. And then the next line (`list.remove(i);`) is therefore always run. Just use braces, or at least, no semi-colons at the end of an `if`.\r\n\r\n&gt; `list.remove(i);`\r\n\r\nThis shifts all elements down by one, effectively, making you skip entries. For example, if element &#39;0&#39; is to be removed, you remove it, and then what used to be element 1, is now element 0. But, `i` is going to go to `1`, so, you don&#39;t look at this at all. Either copy data over to a new list, or iterate from the end (`for (int i = list.size() -1; i &gt;= 0; i--)`).\r\n\r\n&gt; `short`\r\n\r\nNo. `int`. short is less efficient (I&#39;m guessing you think it&#39;s more efficient. It is less so. Writing code casually more performant is effectively impossible so stop it. Just write code that is easy to understand. If you don&#39;t know how, make it look like every example and snippet. If you think you know better, it takes about 15 years before you might actually be likely to be right when you do).\r\n\r\n&gt; `if(StringUtils.isAlphanumeric(list.get(i)))`\r\n\r\nI believe you meant `if (!StringUtils...)` - you want to remove them if they are __not__ alphanumeric.\r\n","title":"Strictly checking for alphanumeric in string not special characters","body":"<p>3 lines of code and 4 problems. Impressive :)</p>\n<blockquote>\n<p><code>if(StringUtils.isAlphanumeric(list.get(i)));</code></p>\n</blockquote>\n<p>The semi-colon <strong>is</strong> the instruction that is being run, i.e. nothing. And then the next line (<code>list.remove(i);</code>) is therefore always run. Just use braces, or at least, no semi-colons at the end of an <code>if</code>.</p>\n<blockquote>\n<p><code>list.remove(i);</code></p>\n</blockquote>\n<p>This shifts all elements down by one, effectively, making you skip entries. For example, if element '0' is to be removed, you remove it, and then what used to be element 1, is now element 0. But, <code>i</code> is going to go to <code>1</code>, so, you don't look at this at all. Either copy data over to a new list, or iterate from the end (<code>for (int i = list.size() -1; i &gt;= 0; i--)</code>).</p>\n<blockquote>\n<p><code>short</code></p>\n</blockquote>\n<p>No. <code>int</code>. short is less efficient (I'm guessing you think it's more efficient. It is less so. Writing code casually more performant is effectively impossible so stop it. Just write code that is easy to understand. If you don't know how, make it look like every example and snippet. If you think you know better, it takes about 15 years before you might actually be likely to be right when you do).</p>\n<blockquote>\n<p><code>if(StringUtils.isAlphanumeric(list.get(i)))</code></p>\n</blockquote>\n<p>I believe you meant <code>if (!StringUtils...)</code> - you want to remove them if they are <strong>not</strong> alphanumeric.</p>\n"},{"tags":[],"owner":{"account_id":18341423,"reputation":63,"user_id":13357589,"display_name":"EpicOweo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680666688,"creation_date":1680666077,"answer_id":75935470,"question_id":75935395,"body_markdown":"If you want to remove the strings with special characters, you should be checking if the string is *not* alphanumeric rather than if it is. Also, you need to put curly braces after your if statement rather than a semicolon:\r\n\r\n```\r\n for(short i=0;i&lt;list.size();i++) {\r\n         if(!StringUtils.isAlphanumeric(list.get(i))) {\r\n                 list.remove(i);\r\n         }\r\n }\r\n```\r\n\r\nEDIT: Also, while I don&#39;t believe that @rzwitserloot&#39;s sarcasm at the beginning of their comment was warranted, they do have a good point regarding `list.remove(i)` shifting the array.\r\n\r\nUpdated code:\r\n```\r\n for(short i=list.size()-1;i&gt;=0;i--) {\r\n         if(!StringUtils.isAlphanumeric(list.get(i))) {\r\n                 list.remove(i);\r\n         }\r\n }\r\n```\r\n ","title":"Strictly checking for alphanumeric in string not special characters","body":"<p>If you want to remove the strings with special characters, you should be checking if the string is <em>not</em> alphanumeric rather than if it is. Also, you need to put curly braces after your if statement rather than a semicolon:</p>\n<pre><code> for(short i=0;i&lt;list.size();i++) {\n         if(!StringUtils.isAlphanumeric(list.get(i))) {\n                 list.remove(i);\n         }\n }\n</code></pre>\n<p>EDIT: Also, while I don't believe that @rzwitserloot's sarcasm at the beginning of their comment was warranted, they do have a good point regarding <code>list.remove(i)</code> shifting the array.</p>\n<p>Updated code:</p>\n<pre><code> for(short i=list.size()-1;i&gt;=0;i--) {\n         if(!StringUtils.isAlphanumeric(list.get(i))) {\n                 list.remove(i);\n         }\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684386693,"post_id":75935805,"comment_id":134511448,"body_markdown":"This is going to be the most idiomatic approach; most likely will execute faster than a `StringUtils` call, also.","body":"This is going to be the most idiomatic approach; most likely will execute faster than a <code>StringUtils</code> call, also."}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680671059,"creation_date":1680671059,"answer_id":75935805,"question_id":75935395,"body_markdown":"Here&#39;s a 1-liner:\r\n\r\n    list.removeIf(s -&gt; s.matches(&quot;[^a-zA-Z0-9]*&quot;));\r\n\r\nThe works by removing strings that are made entirely of non-alphanumeric chars.","title":"Strictly checking for alphanumeric in string not special characters","body":"<p>Here's a 1-liner:</p>\n<pre><code>list.removeIf(s -&gt; s.matches(&quot;[^a-zA-Z0-9]*&quot;));\n</code></pre>\n<p>The works by removing strings that are made entirely of non-alphanumeric chars.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684741857,"creation_date":1684387268,"answer_id":76277940,"question_id":75935395,"body_markdown":"The reason why your code isn&#39;t working is because you&#39;re trying to remove an item in a list that you&#39;re iterating over.  \r\nThis will throw a `ConcurrentModificationException`.\r\n\r\nTo avoid this, use an iterator, and make sure `list` is assigned an `ArrayList`.\r\n\r\n```java\r\nIterator&lt;String&gt; iterator = list.iterator();\r\nwhile (iterator.hasNext()) {\r\n    if (!StringUtils.isAlphanumeric(iterator.next()))\r\n        iterator.remove();\r\n}\r\n```","title":"Strictly checking for alphanumeric in string not special characters","body":"<p>The reason why your code isn't working is because you're trying to remove an item in a list that you're iterating over.<br />\nThis will throw a <code>ConcurrentModificationException</code>.</p>\n<p>To avoid this, use an iterator, and make sure <code>list</code> is assigned an <code>ArrayList</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Iterator&lt;String&gt; iterator = list.iterator();\nwhile (iterator.hasNext()) {\n    if (!StringUtils.isAlphanumeric(iterator.next()))\n        iterator.remove();\n}\n</code></pre>\n"}],"owner":{"account_id":28203287,"reputation":31,"user_id":21556763,"display_name":"Jharokha "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":5,"score":-1,"last_activity_date":1684741857,"creation_date":1680664891,"question_id":75935395,"body_markdown":"I am having list of strings `&quot;This is plain text&quot; ,&quot;[]&quot;,&quot;{}&quot;,&quot;()&quot;`  i want to filter out all those where there is only special characters for e.g i want to exclude `&quot;[]&quot;,&quot;{}&quot;,&quot;()&quot;` as there isn&#39;t any number or char (A-Z ,a-z ,0-9).\r\n\r\n     `\r\n              for(short i=0;i&lt;list.size();i++) {\r\n\t\t\t    \tif(StringUtils.isAlphanumeric(list.get(i)))\r\n\t\t\t\t     list.remove(i);\r\n     \t\t\t}`    \r\n\r\nBut it is not working . Not removing `[] , () ,{}`","title":"Strictly checking for alphanumeric in string not special characters","body":"<p>I am having list of strings <code>&quot;This is plain text&quot; ,&quot;[]&quot;,&quot;{}&quot;,&quot;()&quot;</code>  i want to filter out all those where there is only special characters for e.g i want to exclude <code>&quot;[]&quot;,&quot;{}&quot;,&quot;()&quot;</code> as there isn't any number or char (A-Z ,a-z ,0-9).</p>\n<pre><code> `\n          for(short i=0;i&lt;list.size();i++) {\n                if(StringUtils.isAlphanumeric(list.get(i)))\n                 list.remove(i);\n            }`    \n</code></pre>\n<p>But it is not working . Not removing <code>[] , () ,{}</code></p>\n"},{"tags":["java","string","split"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":1,"creation_date":1435952834,"post_id":31213333,"comment_id":50428028,"body_markdown":"Just do `substring()` in a loop.","body":"Just do <code>substring()</code> in a loop."},{"owner":{"account_id":6315972,"reputation":1776,"user_id":4905916,"display_name":"Filip Bulovic"},"score":0,"creation_date":1435952965,"post_id":31213333,"comment_id":50428079,"body_markdown":"Check here [http://stackoverflow.com/questions/5235401/split-string-into-array-of-character-strings","body":"Check here [<a href=\"http://stackoverflow.com/questions/5235401/split-string-into-array-of-character-strings\" title=\"split string into array of character strings\">stackoverflow.com/questions/5235401/&hellip;</a>"},{"owner":{"account_id":1284503,"reputation":665,"user_id":1237872,"accept_rate":6,"display_name":"Sanket990"},"score":0,"creation_date":1435953057,"post_id":31213333,"comment_id":50428111,"body_markdown":"Thanks Flip Bulovic but I am getting my crieteria wiss solution below answer","body":"Thanks Flip Bulovic but I am getting my crieteria wiss solution below answer"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1435953376,"post_id":31213333,"comment_id":50428227,"body_markdown":"@FilipBulovic [Since Java 8 we don&#39;t need `(?!^)` magic anymore](http://stackoverflow.com/q/22718744/1393766).","body":"@FilipBulovic <a href=\"http://stackoverflow.com/q/22718744/1393766\">Since Java 8 we don&#39;t need <code>(?!^)</code> magic anymore</a>."}],"answers":[{"comments":[{"owner":{"account_id":1284503,"reputation":665,"user_id":1237872,"accept_rate":6,"display_name":"Sanket990"},"score":0,"creation_date":1435953014,"post_id":31213381,"comment_id":50428093,"body_markdown":"Thanks Pshemo for giving to me solution","body":"Thanks Pshemo for giving to me solution"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1435953288,"post_id":31213381,"comment_id":50428191,"body_markdown":"@Sanket990 I was hoping more for giving you explanation rather than solution. If some part of my answer is not clear feel free to ask about it. Otherwise my answer may be kind of pointless for you.","body":"@Sanket990 I was hoping more for giving you explanation rather than solution. If some part of my answer is not clear feel free to ask about it. Otherwise my answer may be kind of pointless for you."},{"owner":{"account_id":1284503,"reputation":665,"user_id":1237872,"accept_rate":6,"display_name":"Sanket990"},"score":0,"creation_date":1435953905,"post_id":31213381,"comment_id":50428393,"body_markdown":"I am running your logic code and my criteria wise this answer is full filled  i am already upvotted your answer .tnx","body":"I am running your logic code and my criteria wise this answer is full filled  i am already upvotted your answer .tnx"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1435954614,"post_id":31213381,"comment_id":50428651,"body_markdown":"It is not that I am concern about upvotes. It is more like I would rather know if you are able to easily understand my answer. If there is something unclear feel free to ask.","body":"It is not that I am concern about upvotes. It is more like I would rather know if you are able to easily understand my answer. If there is something unclear feel free to ask."},{"owner":{"account_id":1284503,"reputation":665,"user_id":1237872,"accept_rate":6,"display_name":"Sanket990"},"score":0,"creation_date":1435954757,"post_id":31213381,"comment_id":50428696,"body_markdown":"ya ya i got your logic and i am easily understand thanks.","body":"ya ya i got your logic and i am easily understand thanks."}],"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"comment_count":5,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1684517838,"creation_date":1435952798,"answer_id":31213381,"question_id":31213333,"body_markdown":"`String#split` method simply searches for places to split, it can&#39;t add anything new to result. In other words you can&#39;t split like\r\n\r\n    &quot;abc&quot;` -&gt; [&quot;ab&quot;, &quot;bc&quot;]\r\n\r\nbecause `b` can appear in only one element in resulting array. \r\n\r\nWhat you can do is use `Pattern`/`Matcher`, specifically `Matcher#find()` method and consume one character at a time, while &quot;peeking&quot; at next character without consuming it. The &quot;peeking&quot; part can be achieved with [look-around mechanism][1] because it is [zero-length][2] technique. \r\n\r\nDemo:\r\n\r\n    Pattern p = Pattern.compile(&quot;.(?=(.))&quot;);\r\n    Matcher m = p.matcher(yourString);\r\n    while(m.find()){\r\n        System.out.println(m.group() + m.group(1));\r\n    }\r\n\r\nAlternatively you can also use `String#substring(start, end)`\r\n\r\n\tString data = &quot;Testing&quot;;\r\n\tfor (int i=0; i&lt;data.length()-1; i++){\r\n\t\tSystem.out.println(data.substring(i,i+2));\r\n\t}\r\n\r\nor using `String#charAt(index)`\r\n\r\n    String data = &quot;Testing&quot;;\r\n    for (int i = 0; i &lt; data.length() - 1;i++) {\r\n        System.out.append(data.charAt(i)).println(data.charAt(i+1));\r\n    }\r\n\r\n\r\n\r\n  [1]: http://www.regular-expressions.info/lookaround.html\r\n  [2]: http://www.regular-expressions.info/zerolength.html\r\n","title":"How to split a string into overlapping pairs of characters","body":"<p><code>String#split</code> method simply searches for places to split, it can't add anything new to result. In other words you can't split like</p>\n<pre><code>&quot;abc&quot;` -&gt; [&quot;ab&quot;, &quot;bc&quot;]\n</code></pre>\n<p>because <code>b</code> can appear in only one element in resulting array.</p>\n<p>What you can do is use <code>Pattern</code>/<code>Matcher</code>, specifically <code>Matcher#find()</code> method and consume one character at a time, while &quot;peeking&quot; at next character without consuming it. The &quot;peeking&quot; part can be achieved with <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">look-around mechanism</a> because it is <a href=\"http://www.regular-expressions.info/zerolength.html\" rel=\"nofollow noreferrer\">zero-length</a> technique.</p>\n<p>Demo:</p>\n<pre><code>Pattern p = Pattern.compile(&quot;.(?=(.))&quot;);\nMatcher m = p.matcher(yourString);\nwhile(m.find()){\n    System.out.println(m.group() + m.group(1));\n}\n</code></pre>\n<p>Alternatively you can also use <code>String#substring(start, end)</code></p>\n<pre><code>String data = &quot;Testing&quot;;\nfor (int i=0; i&lt;data.length()-1; i++){\n    System.out.println(data.substring(i,i+2));\n}\n</code></pre>\n<p>or using <code>String#charAt(index)</code></p>\n<pre><code>String data = &quot;Testing&quot;;\nfor (int i = 0; i &lt; data.length() - 1;i++) {\n    System.out.append(data.charAt(i)).println(data.charAt(i+1));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1040530,"reputation":2118,"user_id":1046657,"accept_rate":64,"display_name":"Nasser"},"score":0,"creation_date":1523444244,"post_id":33601511,"comment_id":86561335,"body_markdown":"Perfect solution","body":"Perfect solution"}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1447035405,"creation_date":1447035405,"answer_id":33601511,"question_id":31213333,"body_markdown":"As [@pshemo&#39;s answer][1] said, a split consumes input, so you can&#39;t get a given character from the input in two parts of the split.\r\n\r\nHowever, here a one-line solution that gets the job done:\r\n\r\n    Arrays.stream(s.split(&quot;&quot;)).reduce((a, b) -&gt; {System.out.println(a + b); return b;});\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/31213381/256196","title":"How to split a string into overlapping pairs of characters","body":"<p>As <a href=\"https://stackoverflow.com/a/31213381/256196\">@pshemo's answer</a> said, a split consumes input, so you can't get a given character from the input in two parts of the split.</p>\n\n<p>However, here a one-line solution that gets the job done:</p>\n\n<pre><code>Arrays.stream(s.split(\"\")).reduce((a, b) -&gt; {System.out.println(a + b); return b;});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684741570,"creation_date":1684741570,"answer_id":76303998,"question_id":31213333,"body_markdown":"It would be quicker, theoretically, to just use a for-loop.\r\n\r\n```java\r\nList&lt;String&gt; split(String string) {\r\n    List&lt;String&gt; split = new ArrayList&lt;&gt;();\r\n    for (int index = 0; index &lt; string.length() - 1; index++)\r\n        split.add(string.substring(index, index + 2));\r\n    return split;\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[Te, es, st, ti, in, ng]\r\n```","title":"How to split a string into overlapping pairs of characters","body":"<p>It would be quicker, theoretically, to just use a for-loop.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; split(String string) {\n    List&lt;String&gt; split = new ArrayList&lt;&gt;();\n    for (int index = 0; index &lt; string.length() - 1; index++)\n        split.add(string.substring(index, index + 2));\n    return split;\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[Te, es, st, ti, in, ng]\n</code></pre>\n"}],"owner":{"account_id":1284503,"reputation":665,"user_id":1237872,"accept_rate":6,"display_name":"Sanket990"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1518,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1684741570,"creation_date":1435952604,"question_id":31213333,"body_markdown":"I need to split a string into pairs of characters, but where the pairs overlap. For example, I have a string `Testing`, and I want the output:\r\n\r\n\t[Te, es, st, ti, in, ng]\r\n\r\nI tried some things with `String.split` but I am not getting the right output:\r\n\r\n\tString s = &quot;Testing&quot;;\r\n\tSystem.out.println(java.util.Arrays.toString(s.split(&quot;(?&lt;=\\\\G..)&quot;)));\r\n\r\nThat gives me:\r\n\r\n\t[Te, st, in, g]\r\n\r\nCan anyone help me?","title":"How to split a string into overlapping pairs of characters","body":"<p>I need to split a string into pairs of characters, but where the pairs overlap. For example, I have a string <code>Testing</code>, and I want the output:</p>\n\n<pre><code>[Te, es, st, ti, in, ng]\n</code></pre>\n\n<p>I tried some things with <code>String.split</code> but I am not getting the right output:</p>\n\n<pre><code>String s = \"Testing\";\nSystem.out.println(java.util.Arrays.toString(s.split(\"(?&lt;=\\\\G..)\")));\n</code></pre>\n\n<p>That gives me:</p>\n\n<pre><code>[Te, st, in, g]\n</code></pre>\n\n<p>Can anyone help me?</p>\n"},{"tags":["java","controller","javafx","fxml"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1393956914,"post_id":22178533,"comment_id":33665076,"body_markdown":"possible duplicate of [Passing Parameters JavaFX FXML](http://stackoverflow.com/questions/14187963/passing-parameters-javafx-fxml)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/14187963/passing-parameters-javafx-fxml\">Passing Parameters JavaFX FXML</a>"},{"owner":{"account_id":1345093,"reputation":2590,"user_id":1286009,"accept_rate":75,"display_name":"Hendrik Ebbers"},"score":0,"creation_date":1394028647,"post_id":22178533,"comment_id":33701145,"body_markdown":"You can use the DataFX Controller Framework and inject the same datamodel in both controllers: http://www.guigarage.com/2013/12/datafx-controller-framework-preview/","body":"You can use the DataFX Controller Framework and inject the same datamodel in both controllers: <a href=\"http://www.guigarage.com/2013/12/datafx-controller-framework-preview/\" rel=\"nofollow noreferrer\">guigarage.com/2013/12/datafx-controller-framework-preview</a>"}],"answers":[{"comments":[{"owner":{"account_id":1077771,"reputation":3845,"user_id":1075543,"accept_rate":80,"display_name":"jbrtrnd"},"score":0,"creation_date":1394030236,"post_id":22179980,"comment_id":33702328,"body_markdown":"Thanks you I&#39;ve used EventBus API http://eventbus.org/ which is really simple to use and to implement !","body":"Thanks you I&#39;ve used EventBus API <a href=\"http://eventbus.org/\" rel=\"nofollow noreferrer\">eventbus.org</a> which is really simple to use and to implement !"},{"owner":{"account_id":8981716,"reputation":884,"user_id":6696702,"accept_rate":60,"display_name":"Lakshitha Kanchana"},"score":0,"creation_date":1486012546,"post_id":22179980,"comment_id":71166141,"body_markdown":"@NikosParaskevopoulos,  what if I have loaded one of the above sub fxml documents multiple times.?","body":"@NikosParaskevopoulos,  what if I have loaded one of the above sub fxml documents multiple times.?"},{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1486040725,"post_id":22179980,"comment_id":71182148,"body_markdown":"You need to define the `fx:id` for each `fx:include` element for the controller injection to work. The `fx:id`s cannot be the same anyway, so things still work.","body":"You need to define the <code>fx:id</code> for each <code>fx:include</code> element for the controller injection to work. The <code>fx:id</code>s cannot be the same anyway, so things still work."}],"tags":[],"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1393957614,"creation_date":1393957614,"answer_id":22179980,"question_id":22178533,"body_markdown":"Two ways come into my mind:\r\n\r\n1. Based on the &quot;Nested Controllers&quot; section of &quot;Introduction to FXML&quot; ([link][1]), you could inject the children controllers (2 &amp; 3) into the parent (1) and have the parent coordinate their interactions:\r\n\r\n    FXML (1):\r\n\r\n        &lt;fx:include source=&quot;FolderList.fxml&quot; fx:id=&quot;list&quot; /&gt;\r\n        ...\r\n        &lt;fx:include source=&quot;FolderFormAdd.fxml&quot; fx:id=&quot;addForm&quot; /&gt;\r\n\r\n    Java (1) (beware the names of the fields; must match `&lt;fx:id&gt;Controller`, i.e.):\r\n\r\n        public class FolderController extends AbstractController {\r\n            @FXML private FolderListController listController;\r\n            @FXML private FolderFormAddController addFormController;\r\n            void initialize() {\r\n                // add code to coordinate them\r\n            }\r\n        }\r\n\r\n    **I do not like this solution much for this case, as it leads to strong coupling between the components.** On the other hand, it may be the quickest.\r\n\r\n2. Use an event bus (e.g. from [Google Guava][2]). This can actually decouple your logic (e.g. the list component listens to the `PersonAdded` event, no matter how it was created; the form generates this event, without caring who is listening - if any). I think I would prefer this solution in your case. The event bus can optionally be retrieved using dependency injection.\r\n\r\nCheck out the answer pointed by the comment from jewelsea, it is great - I have already upvoted it myself :)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#nested_controllers\r\n  [2]: http://code.google.com/p/guava-libraries/wiki/EventBusExplained","title":"Communication between two JavaFx controllers","body":"<p>Two ways come into my mind:</p>\n\n<ol>\n<li><p>Based on the \"Nested Controllers\" section of \"Introduction to FXML\" (<a href=\"http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#nested_controllers\" rel=\"noreferrer\">link</a>), you could inject the children controllers (2 &amp; 3) into the parent (1) and have the parent coordinate their interactions:</p>\n\n<p>FXML (1):</p>\n\n<pre><code>&lt;fx:include source=\"FolderList.fxml\" fx:id=\"list\" /&gt;\n...\n&lt;fx:include source=\"FolderFormAdd.fxml\" fx:id=\"addForm\" /&gt;\n</code></pre>\n\n<p>Java (1) (beware the names of the fields; must match <code>&lt;fx:id&gt;Controller</code>, i.e.):</p>\n\n<pre><code>public class FolderController extends AbstractController {\n    @FXML private FolderListController listController;\n    @FXML private FolderFormAddController addFormController;\n    void initialize() {\n        // add code to coordinate them\n    }\n}\n</code></pre>\n\n<p><strong>I do not like this solution much for this case, as it leads to strong coupling between the components.</strong> On the other hand, it may be the quickest.</p></li>\n<li><p>Use an event bus (e.g. from <a href=\"http://code.google.com/p/guava-libraries/wiki/EventBusExplained\" rel=\"noreferrer\">Google Guava</a>). This can actually decouple your logic (e.g. the list component listens to the <code>PersonAdded</code> event, no matter how it was created; the form generates this event, without caring who is listening - if any). I think I would prefer this solution in your case. The event bus can optionally be retrieved using dependency injection.</p></li>\n</ol>\n\n<p>Check out the answer pointed by the comment from jewelsea, it is great - I have already upvoted it myself :)</p>\n"},{"tags":[],"owner":{"account_id":2767605,"reputation":196,"user_id":2382934,"display_name":"Jim Daehn"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1423770723,"creation_date":1423770723,"answer_id":28486560,"question_id":22178533,"body_markdown":"Nikos makes a good point (Software Engineering principle) about coupling. There is one way though, to accomplish the &quot;spirit&quot; of the first (simple) approach and not encroach upon this principle by using the Mediator pattern. As taken from wikipedia (which is referencing the GoF):\r\n\r\n&gt; &quot;The essence of the Mediator Pattern is to &quot;define an object that encapsulates how a set of objects interact&quot;. It promotes loose coupling by keeping objects from referring to each other explicitly, and it allows their interaction to be varied independently. Client classes can use the mediator to send messages to other clients, and can receive messages from other clients via an event on the mediator class.&quot;\r\n\r\nHere you can consider your Controllers as the clients. What you need to have happen then is use the mediator to mediate &quot;conversations&quot; between each other.\r\n\r\nFirst create a mediator interface:\r\n\r\n    public interface IMediateControllers {\r\n        void registerController2(Controller2 controller);\r\n        void registerController3(Controller3 controller);\r\n        void controller2DoSomething();\r\n        void controller3OperateOn(String data);\r\n    }\r\n\r\nAnd then a concrete mediator (as a Singleton)\r\n\r\n    public class ControllerMediator implements IMediateControllers {\r\n        private Controller2 controller2;\r\n        private Controller3 controller3;\r\n\r\n        @Override\r\n        void registerController2(Controller2 controller) {\r\n            controller2 = controller;\r\n        }\r\n\r\n        @Override\r\n        void registerController3(Controller3 controller) {\r\n            controller3 = controller;\r\n        }\r\n\r\n        @Override\r\n        void controller2DoSomething() {\r\n             controller2.doSomething();\r\n        }\r\n\r\n        void controller3OperateOn(String data) {\r\n            controller3.operateOn(data);\r\n        }\r\n\r\n        /**\r\n         * Everything below here is in support of Singleton pattern\r\n         */\r\n        private ControllerMediator() {}\r\n\r\n        public static ControllerMediator getInstance() {\r\n            return ControllerMediatorHolder.INSTANCE;\r\n        }\r\n\r\n        private static class ControllerMediatorHolder {\r\n            private static final ControllerMediator INSTANCE = new ControllerMediator();\r\n        }\r\n    }\r\n\r\nNow, since Controller1 has Controller2 and Controller3 injected (as noted in the fxml file), you could do the following in Controller1::initialize() method:\r\n\r\n    @Override\r\n    public void initialize(Url url, ResourceBundle resource) {\r\n        ControllerMediator.getInstance().registerController2(controller2Controller);\r\n        ControllerMediator.getInstance().registerController3(controller3Controller);\r\n     }\r\n\r\n\r\nNow, anywhere you need Controller2 to communicate with Controller3, you simple use the mediator:\r\n\r\n    // ... somewhere in Controller2\r\n    ControllerMediator.getInstance().controller3OperateOn(&quot;my data&quot;);\r\n\r\nand Controller 3 can communicate back to Controller2 using the same mediator:\r\n \r\n    // ... somewhere in Controller3\r\n    ControllerMediator.getInstance().controller2DoSomething();\r\n\r\nOf course, this relies on Controller2 having implemented the `doSomething()` operation and Controller3 having implemented the `operateOn(String data)` operation.\r\n\r\nThe important thing is that you&#39;ve decoupled Controller2 and Controller3 (they don&#39;t know about each other). I just used this pattern in a little project I&#39;m working on right now (inspired by Nikos&#39; first solution, but thinking immediately of the Mediator pattern to remove the coupling he (properly) griped about.","title":"Communication between two JavaFx controllers","body":"<p>Nikos makes a good point (Software Engineering principle) about coupling. There is one way though, to accomplish the \"spirit\" of the first (simple) approach and not encroach upon this principle by using the Mediator pattern. As taken from wikipedia (which is referencing the GoF):</p>\n\n<blockquote>\n  <p>\"The essence of the Mediator Pattern is to \"define an object that encapsulates how a set of objects interact\". It promotes loose coupling by keeping objects from referring to each other explicitly, and it allows their interaction to be varied independently. Client classes can use the mediator to send messages to other clients, and can receive messages from other clients via an event on the mediator class.\"</p>\n</blockquote>\n\n<p>Here you can consider your Controllers as the clients. What you need to have happen then is use the mediator to mediate \"conversations\" between each other.</p>\n\n<p>First create a mediator interface:</p>\n\n<pre><code>public interface IMediateControllers {\n    void registerController2(Controller2 controller);\n    void registerController3(Controller3 controller);\n    void controller2DoSomething();\n    void controller3OperateOn(String data);\n}\n</code></pre>\n\n<p>And then a concrete mediator (as a Singleton)</p>\n\n<pre><code>public class ControllerMediator implements IMediateControllers {\n    private Controller2 controller2;\n    private Controller3 controller3;\n\n    @Override\n    void registerController2(Controller2 controller) {\n        controller2 = controller;\n    }\n\n    @Override\n    void registerController3(Controller3 controller) {\n        controller3 = controller;\n    }\n\n    @Override\n    void controller2DoSomething() {\n         controller2.doSomething();\n    }\n\n    void controller3OperateOn(String data) {\n        controller3.operateOn(data);\n    }\n\n    /**\n     * Everything below here is in support of Singleton pattern\n     */\n    private ControllerMediator() {}\n\n    public static ControllerMediator getInstance() {\n        return ControllerMediatorHolder.INSTANCE;\n    }\n\n    private static class ControllerMediatorHolder {\n        private static final ControllerMediator INSTANCE = new ControllerMediator();\n    }\n}\n</code></pre>\n\n<p>Now, since Controller1 has Controller2 and Controller3 injected (as noted in the fxml file), you could do the following in Controller1::initialize() method:</p>\n\n<pre><code>@Override\npublic void initialize(Url url, ResourceBundle resource) {\n    ControllerMediator.getInstance().registerController2(controller2Controller);\n    ControllerMediator.getInstance().registerController3(controller3Controller);\n }\n</code></pre>\n\n<p>Now, anywhere you need Controller2 to communicate with Controller3, you simple use the mediator:</p>\n\n<pre><code>// ... somewhere in Controller2\nControllerMediator.getInstance().controller3OperateOn(\"my data\");\n</code></pre>\n\n<p>and Controller 3 can communicate back to Controller2 using the same mediator:</p>\n\n<pre><code>// ... somewhere in Controller3\nControllerMediator.getInstance().controller2DoSomething();\n</code></pre>\n\n<p>Of course, this relies on Controller2 having implemented the <code>doSomething()</code> operation and Controller3 having implemented the <code>operateOn(String data)</code> operation.</p>\n\n<p>The important thing is that you've decoupled Controller2 and Controller3 (they don't know about each other). I just used this pattern in a little project I'm working on right now (inspired by Nikos' first solution, but thinking immediately of the Mediator pattern to remove the coupling he (properly) griped about.</p>\n"},{"tags":[],"owner":{"account_id":12587682,"reputation":282,"user_id":9173346,"display_name":"Nicholas_Jones"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515094592,"creation_date":1515094592,"answer_id":48102343,"question_id":22178533,"body_markdown":"I figured out an easy to implement solution for programmers who are confused on how to pass fx:controller=&quot;Controller&quot; from their FXML files into the Main Class, and/or Controllers. To allow for an object reference between these Classes.\r\n\r\nFrom Main.java -&gt; start method: (With fx:controller=&quot;Controller&quot;) in FXML File\r\n\r\n        FXMLLoader loader = new FXMLLoader();\r\n        Parent root = loader.load(getClass().getResource(&quot;Window1.fxml&quot;).openStream());\r\n        Controller controller = loader.getController();\r\n        controller.setReferenceToController(controller);\r\n\r\nThe last line [controller.setReferenceToController(controller);] passes the object &quot;Controller&quot; loaded from the FXML file to itself. \r\n\r\nIn the Controller Class:\r\n\r\n        private Controller controller;\r\n        private DataProcess data;\r\n        \r\n        public void setReferenceToController(Controller controller){\r\n        this.controller = controller;\r\n        data = new DataProcess(controller);\r\n    }\r\n\r\nNow each time you open or start a new &quot;Window&quot; or create a separate class(such as DataProcess) just pass the controller object references between them. This will allow full communication between controllers, FXML, and Classes.\r\n\r\nExample of methods:\r\n\r\n   \r\n\r\n        public DataProcess(Controller controller) {\r\n                this.controller = controller;\r\n            }\r\n    \r\n        //Call this method from Controller\r\n        public void handleSaveClick(){\r\n            if(file != null){\r\n                \r\n            //save a bunch of data\r\n            controller.setSaveStatus(true);\r\n            \r\n            }\r\n            else\r\n            controller.setSaveStatus(false);\r\n\r\n\r\n\r\nHope this Helps.\r\n\r\n\r\n\r\n","title":"Communication between two JavaFx controllers","body":"<p>I figured out an easy to implement solution for programmers who are confused on how to pass fx:controller=\"Controller\" from their FXML files into the Main Class, and/or Controllers. To allow for an object reference between these Classes.</p>\n\n<p>From Main.java -> start method: (With fx:controller=\"Controller\") in FXML File</p>\n\n<pre><code>    FXMLLoader loader = new FXMLLoader();\n    Parent root = loader.load(getClass().getResource(\"Window1.fxml\").openStream());\n    Controller controller = loader.getController();\n    controller.setReferenceToController(controller);\n</code></pre>\n\n<p>The last line [controller.setReferenceToController(controller);] passes the object \"Controller\" loaded from the FXML file to itself. </p>\n\n<p>In the Controller Class:</p>\n\n<pre><code>    private Controller controller;\n    private DataProcess data;\n\n    public void setReferenceToController(Controller controller){\n    this.controller = controller;\n    data = new DataProcess(controller);\n}\n</code></pre>\n\n<p>Now each time you open or start a new \"Window\" or create a separate class(such as DataProcess) just pass the controller object references between them. This will allow full communication between controllers, FXML, and Classes.</p>\n\n<p>Example of methods:</p>\n\n<pre><code>    public DataProcess(Controller controller) {\n            this.controller = controller;\n        }\n\n    //Call this method from Controller\n    public void handleSaveClick(){\n        if(file != null){\n\n        //save a bunch of data\n        controller.setSaveStatus(true);\n\n        }\n        else\n        controller.setSaveStatus(false);\n</code></pre>\n\n<p>Hope this Helps.</p>\n"},{"tags":[],"owner":{"account_id":25403785,"reputation":1,"user_id":19212823,"display_name":"AK."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684741359,"creation_date":1684739914,"answer_id":76303804,"question_id":22178533,"body_markdown":"so this is my first time answering a question. I am really new to programming. So what I discovered was you can only communicate with a controller only if you have the specific FXMLLoader you used to load that specific controller. \r\n\r\nEven if you create a new FXMLLoader with the resource it&#39;s of no use. You need the exact one you used to load that specific scene.\r\n\r\nWhat I did was whenever I loaded a controller I go and store the FXMLLoader used in a method. And when I need to access that controller I get it from that method.\r\n\r\n`MyController controller = MyMethod.getMyControllerFXMLLoader().getController;\r\ncontroller.methodYouNeedToAccess();`\r\n\r\n\r\n`getMyControllerFXMLLoader()` is the method I created so that it returns that specific fxmlloader.`MyMethod` is the class I specifically created to do this.\r\n\r\nAlso when that controller is closed the FXMLLoader value for that controller is set to become null.\r\n\r\nThis works really well. Whether it abides by the rules and regulations I don&#39;t really know.\r\n","title":"Communication between two JavaFx controllers","body":"<p>so this is my first time answering a question. I am really new to programming. So what I discovered was you can only communicate with a controller only if you have the specific FXMLLoader you used to load that specific controller.</p>\n<p>Even if you create a new FXMLLoader with the resource it's of no use. You need the exact one you used to load that specific scene.</p>\n<p>What I did was whenever I loaded a controller I go and store the FXMLLoader used in a method. And when I need to access that controller I get it from that method.</p>\n<p><code>MyController controller = MyMethod.getMyControllerFXMLLoader().getController; controller.methodYouNeedToAccess();</code></p>\n<p><code>getMyControllerFXMLLoader()</code> is the method I created so that it returns that specific fxmlloader.<code>MyMethod</code> is the class I specifically created to do this.</p>\n<p>Also when that controller is closed the FXMLLoader value for that controller is set to become null.</p>\n<p>This works really well. Whether it abides by the rules and regulations I don't really know.</p>\n"}],"owner":{"account_id":1077771,"reputation":3845,"user_id":1075543,"accept_rate":80,"display_name":"jbrtrnd"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27064,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":22179980,"answer_count":4,"score":12,"last_activity_date":1684741359,"creation_date":1393953282,"question_id":22178533,"body_markdown":"I made a structure to of Controllers and Views (fxml) to separate my code as much as I could, and I&#39;m wondering how to communicate between 2 controllers. I mean, a controller have to call some functions of another controller to set it up to date.\r\n\r\nI think a schema of my current structure will be more explicit:\r\n\r\n\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Controller 1\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\\\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;fx:include&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fx:include\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\\\r\n&lt;br /&gt;\r\nController2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Controller3\r\n\r\nEach controller has is own fxml view.\r\n&lt;br /&gt;\r\n- Controller 1 : a container controller which has a TabPane element with 2 tabs (each tab correspond to 1 controller)\r\n&lt;br /&gt;\r\n- Controller 2 : a list\r\n&lt;br /&gt;\r\n- Controller 3 : a form\r\n&lt;br /&gt;&lt;br /&gt;\r\nYou&#39;ve probably guessed that I want my form (controller 3) to automatically update my list (controller 2).\r\nFor the moment, the form is only a &quot;creation form&quot;, so I just want to add row in my list.\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nI&#39;ve already tried to get my Controller 2 with FXMLoader and call the functions to relaod my tableView, no success..\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n***Controller 1 (.java + .fxml) :***\r\n\r\n    package pappu.controllers;\r\n    \r\n    import pappu.core.controller.AbstractController;\r\n    \r\n    public class FolderController extends AbstractController\r\n    {\r\n    \t\r\n    }\r\n\r\n&lt;br /&gt;\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import java.lang.*?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    \r\n    &lt;VBox fx:id=&quot;view&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; xmlns=&quot;http://javafx.com/javafx/2.2&quot; fx:controller=&quot;pappu.controllers.FolderController&quot;&gt;\r\n      &lt;TabPane&gt;\r\n        &lt;tabs&gt;\r\n          &lt;Tab text=&quot;RECHERCHE&quot;&gt;\r\n            &lt;content&gt;\r\n              &lt;AnchorPane id=&quot;Content&quot;&gt;\r\n                &lt;children&gt;\r\n                \t&lt;fx:include source=&quot;FolderList.fxml&quot; /&gt;  \r\n                &lt;/children&gt;\r\n              &lt;/AnchorPane&gt;\r\n            &lt;/content&gt;\r\n          &lt;/Tab&gt;\r\n          &lt;Tab text=&quot;DOSSIER&quot;&gt;\r\n            &lt;content&gt;\r\n              &lt;AnchorPane id=&quot;Content&quot;&gt;\r\n              \t&lt;children&gt;\r\n              \t\t&lt;fx:include source=&quot;FolderFormAdd.fxml&quot; /&gt;  \r\n            \t&lt;/children&gt;\r\n              &lt;/AnchorPane&gt;\r\n            &lt;/content&gt;\r\n          &lt;/Tab&gt;\r\n        &lt;/tabs&gt;\r\n      &lt;/TabPane&gt;\r\n    &lt;/VBox&gt;\r\n\r\n***Controller 2 (.java + .fxml) :***\r\n\r\n    package pappu.controllers;\r\n    \r\n    import java.net.URL;\r\n    import java.util.Date;\r\n    import java.util.List;\r\n    import java.util.ResourceBundle;\r\n    \r\n    import org.hibernate.Session;\r\n    \r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.beans.value.ObservableValue;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.fxml.FXML;\r\n    import javafx.fxml.Initializable;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableColumn.CellDataFeatures;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.scene.control.cell.PropertyValueFactory;\r\n    import javafx.util.Callback;\r\n    import pappu.core.controller.AbstractController;\r\n    import pappu.entities.Folder;\r\n    \r\n    public class FolderListController extends AbstractController implements Initializable\r\n    {\r\n    \t/**\r\n    \t * TableView object\r\n    \t */\r\n    \t@FXML private TableView&lt;Folder&gt; foldersTableView;\r\n    \t\r\n    \t/**\r\n    \t * FolderNumber column object\r\n    \t */\r\n    \t@FXML private TableColumn&lt;Folder, String&gt; colFolderNumber;\r\n    \t\r\n    \t/**\r\n    \t * Person column object\r\n    \t */\r\n    \t@FXML private TableColumn&lt;Folder, String&gt; colPerson;\r\n    \t\r\n    \t/**\r\n    \t * Birthday date column object\r\n    \t */\r\n    \t@FXML private TableColumn&lt;Folder, Date&gt; colBirthdayDate;\r\n    \t\r\n    \t/**\r\n    \t * List of folders\r\n    \t */\r\n    \tprivate static List&lt;Folder&gt; foldersList;\r\n    \t\r\n    \t/**\r\n    \t * Constructor\r\n    \t * Will make a call to initializeFoldersList()\r\n    \t */\r\n    \tpublic FolderListController()\r\n    \t{\r\n    \t\tinitializeFoldersList();\r\n    \t}\r\n    \t\r\n    \t\r\n    \t/**\r\n    \t * Initialize implementation of the Initializable interface\r\n    \t * \r\n    \t * @param location\r\n    \t * @param resources\r\n    \t */\r\n    \t@Override \r\n    \tpublic void initialize(URL location, ResourceBundle resources) \r\n    \t{\r\n    \t\tinitializeTableColumns();\r\n    \t\tloadData();\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * Query the database to retrieve the folder list\r\n    \t */\r\n    \t@SuppressWarnings(&quot;unchecked&quot;) \r\n    \tpublic void initializeFoldersList()\r\n    \t{\r\n    \t\tSession session = sessionFactory.getCurrentSession();\r\n    \t\tsession.beginTransaction();\r\n    \t\tfoldersList = session.createQuery(&quot;from Folder&quot;).list();\r\n    \t\tsession.close();\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * Initialize columns binding to folders properties\r\n    \t */\r\n    \tpublic void initializeTableColumns()\r\n    \t{\r\n    \t\tcolFolderNumber.setCellValueFactory(\r\n    \t\t          new PropertyValueFactory&lt;Folder,String&gt;(&quot;folderNumber&quot;)\r\n    \t\t              );\r\n    \t\tcolPerson.setCellValueFactory(\r\n    \t\t\t\tnew Callback&lt;CellDataFeatures&lt;Folder, String&gt;, ObservableValue&lt;String&gt;&gt;() {\r\n    \t\t\t\t     public ObservableValue&lt;String&gt; call(CellDataFeatures&lt;Folder, String&gt; p) {\r\n    \t\t\t\t         return new SimpleStringProperty(p.getValue().getFirstName() + &quot; &quot; + p.getValue().getLastName());\r\n    \t\t\t\t     }}\r\n              );\r\n    \t\tcolBirthdayDate.setCellValueFactory(\r\n    \t\t          new PropertyValueFactory&lt;Folder,Date&gt;(&quot;birthdayDate&quot;)\r\n    \t\t              );\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * Put the folders list in the TableView object\r\n    \t */\r\n    \tpublic void loadData()\r\n    \t{\t\r\n    \t\tObservableList&lt;Folder&gt; listFold = FXCollections.observableArrayList(foldersList);\t\t\r\n    \t\tfoldersTableView.setItems(listFold);\r\n    \t}\t\r\n    }\r\n\r\n&lt;br /&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import java.lang.*?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    &lt;?import javafx.scene.control.Label?&gt;\r\n    \r\n    \r\n    &lt;VBox fx:id=&quot;view&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; xmlns=&quot;http://javafx.com/javafx/2.2&quot; fx:controller=&quot;pappu.controllers.FolderListController&quot;&gt;\r\n    \t&lt;Label fx:id=&quot;lblTest&quot;&gt;&lt;/Label&gt;\r\n    \t&lt;TableView fx:id=&quot;foldersTableView&quot;&gt;\r\n    \t\t&lt;columns&gt;\r\n    \t\t    &lt;TableColumn prefWidth=&quot;75.0&quot; text=&quot;N&#176;&quot; fx:id=&quot;colFolderNumber&quot;&gt;\r\n    \t\t    &lt;/TableColumn&gt;\r\n    \t\t    &lt;TableColumn prefWidth=&quot;75.0&quot; text=&quot;Personne&quot; fx:id=&quot;colPerson&quot;&gt;\r\n    \t\t    &lt;/TableColumn&gt;\r\n    \t\t    &lt;TableColumn prefWidth=&quot;75.0&quot; text=&quot;Date de naissance&quot; fx:id=&quot;colBirthdayDate&quot;&gt;\r\n    \t\t    &lt;/TableColumn&gt;\r\n    \t \t&lt;/columns&gt;\r\n    \t&lt;/TableView&gt;\r\n    &lt;/VBox&gt;\r\n\r\n\r\n***Controller 3 (.java + .fxml) :***\r\n\r\n    package pappu.controllers;\r\n    \r\n    import java.io.IOException;\r\n    import java.net.URL;\r\n    import java.util.ResourceBundle;\r\n    \r\n    import org.hibernate.Session;\r\n    import org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n    \r\n    import javafx.fxml.FXML;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.fxml.Initializable;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.scene.layout.Pane;\r\n    import pappu.core.AppFactory;\r\n    import pappu.core.controller.AbstractController;\r\n    import pappu.entities.Folder;\r\n    import pappu.entities.Gender;\r\n    \r\n    public class FolderFormAddController extends AbstractController\r\n    {\t\r\n    \t@FXML TextField folderNumber;\r\n    \t@FXML TextField firstName;\r\n    \t@FXML TextField lastName;\r\n    \tpublic void submitForm() throws IOException\r\n    \t{\t\r\n    \t\tSession session = sessionFactory.getCurrentSession();\r\n    \t\tsession.beginTransaction();\r\n    \t\t\r\n    \t\tFolder folder = new Folder();\r\n    \t\t\r\n    \t\tfolder.setFolderNumber(folderNumber.getText());\r\n    \t\tfolder.setFirstName(firstName.getText());\r\n    \t\tfolder.setLastName(lastName.getText());\r\n    \t\tfolder.setGender(Gender.m);\r\n    \t\t\r\n    \t\tsession.save(folder);\r\n    \t\tsession.getTransaction().commit();\r\n                // This doesn&#39;t work.. even tried with a simple Label\r\n    \t\tAppFactory app = new AppFactory();\r\n    \t\tFolderListController flc = app.folderListController();\r\n    \t\tflc.initializeFoldersList();\r\n    \t\tflc.loadData();\r\n    \t}\r\n    }\r\n\r\n&lt;br /&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import java.lang.*?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    \r\n    &lt;VBox fx:id=&quot;view&quot; prefHeight=&quot;216.0&quot; prefWidth=&quot;421.0&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; xmlns=&quot;http://javafx.com/javafx/2.2&quot; fx:controller=&quot;pappu.controllers.FolderFormAddController&quot;&gt;\r\n      &lt;children&gt;\r\n        &lt;Label prefHeight=&quot;26.0&quot; prefWidth=&quot;102.0&quot; text=&quot;Num&#233;ro de dossier&quot; /&gt;\r\n        &lt;TextField prefWidth=&quot;200.0&quot; fx:id=&quot;folderNumber&quot;/&gt;\r\n        &lt;Label text=&quot;Pr&#233;nom&quot; /&gt;\r\n        &lt;TextField prefWidth=&quot;200.0&quot; fx:id=&quot;firstName&quot;/&gt;\r\n        &lt;Label text=&quot;Nom&quot; /&gt;\r\n        &lt;TextField prefWidth=&quot;200.0&quot; fx:id=&quot;lastName&quot;/&gt;\r\n        &lt;Button mnemonicParsing=&quot;false&quot; onAction=&quot;#submitForm&quot; text=&quot;Enregistrer&quot; /&gt;\r\n      &lt;/children&gt;\r\n    &lt;/VBox&gt;\r\n\r\n\r\n**Precisions:**  \r\nI made my application on this base:\r\nhttp://www.zenjava.com/2011/10/25/views-within-views-controllers-within-controllers/ and I use JavaFX 2 on Java JDK 7\r\n\r\nI feel something missing in global functioning of a JavaFX application.\r\n","title":"Communication between two JavaFx controllers","body":"<p>I made a structure to of Controllers and Views (fxml) to separate my code as much as I could, and I'm wondering how to communicate between 2 controllers. I mean, a controller have to call some functions of another controller to set it up to date.</p>\n\n<p>I think a schema of my current structure will be more explicit:</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Controller 1\n<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\n<br />\n&nbsp;&nbsp;&nbsp;fx:include&nbsp;&nbsp;&nbsp;&nbsp;fx:include\n<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\n<br />\nController2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Controller3</p>\n\n<p>Each controller has is own fxml view.\n<br />\n- Controller 1 : a container controller which has a TabPane element with 2 tabs (each tab correspond to 1 controller)\n<br />\n- Controller 2 : a list\n<br />\n- Controller 3 : a form\n<br /><br />\nYou've probably guessed that I want my form (controller 3) to automatically update my list (controller 2).\nFor the moment, the form is only a \"creation form\", so I just want to add row in my list.\n<br />\n<br />\nI've already tried to get my Controller 2 with FXMLoader and call the functions to relaod my tableView, no success..\n<br />\n<br />\n<strong><em>Controller 1 (.java + .fxml) :</em></strong></p>\n\n<pre><code>package pappu.controllers;\n\nimport pappu.core.controller.AbstractController;\n\npublic class FolderController extends AbstractController\n{\n\n}\n</code></pre>\n\n<p><br />\n    </p>\n\n<pre><code>&lt;?import java.lang.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;VBox fx:id=\"view\" xmlns:fx=\"http://javafx.com/fxml/1\" xmlns=\"http://javafx.com/javafx/2.2\" fx:controller=\"pappu.controllers.FolderController\"&gt;\n  &lt;TabPane&gt;\n    &lt;tabs&gt;\n      &lt;Tab text=\"RECHERCHE\"&gt;\n        &lt;content&gt;\n          &lt;AnchorPane id=\"Content\"&gt;\n            &lt;children&gt;\n                &lt;fx:include source=\"FolderList.fxml\" /&gt;  \n            &lt;/children&gt;\n          &lt;/AnchorPane&gt;\n        &lt;/content&gt;\n      &lt;/Tab&gt;\n      &lt;Tab text=\"DOSSIER\"&gt;\n        &lt;content&gt;\n          &lt;AnchorPane id=\"Content\"&gt;\n            &lt;children&gt;\n                &lt;fx:include source=\"FolderFormAdd.fxml\" /&gt;  \n            &lt;/children&gt;\n          &lt;/AnchorPane&gt;\n        &lt;/content&gt;\n      &lt;/Tab&gt;\n    &lt;/tabs&gt;\n  &lt;/TabPane&gt;\n&lt;/VBox&gt;\n</code></pre>\n\n<p><strong><em>Controller 2 (.java + .fxml) :</em></strong></p>\n\n<pre><code>package pappu.controllers;\n\nimport java.net.URL;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.ResourceBundle;\n\nimport org.hibernate.Session;\n\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.value.ObservableValue;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableColumn.CellDataFeatures;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.util.Callback;\nimport pappu.core.controller.AbstractController;\nimport pappu.entities.Folder;\n\npublic class FolderListController extends AbstractController implements Initializable\n{\n    /**\n     * TableView object\n     */\n    @FXML private TableView&lt;Folder&gt; foldersTableView;\n\n    /**\n     * FolderNumber column object\n     */\n    @FXML private TableColumn&lt;Folder, String&gt; colFolderNumber;\n\n    /**\n     * Person column object\n     */\n    @FXML private TableColumn&lt;Folder, String&gt; colPerson;\n\n    /**\n     * Birthday date column object\n     */\n    @FXML private TableColumn&lt;Folder, Date&gt; colBirthdayDate;\n\n    /**\n     * List of folders\n     */\n    private static List&lt;Folder&gt; foldersList;\n\n    /**\n     * Constructor\n     * Will make a call to initializeFoldersList()\n     */\n    public FolderListController()\n    {\n        initializeFoldersList();\n    }\n\n\n    /**\n     * Initialize implementation of the Initializable interface\n     * \n     * @param location\n     * @param resources\n     */\n    @Override \n    public void initialize(URL location, ResourceBundle resources) \n    {\n        initializeTableColumns();\n        loadData();\n    }\n\n    /**\n     * Query the database to retrieve the folder list\n     */\n    @SuppressWarnings(\"unchecked\") \n    public void initializeFoldersList()\n    {\n        Session session = sessionFactory.getCurrentSession();\n        session.beginTransaction();\n        foldersList = session.createQuery(\"from Folder\").list();\n        session.close();\n    }\n\n    /**\n     * Initialize columns binding to folders properties\n     */\n    public void initializeTableColumns()\n    {\n        colFolderNumber.setCellValueFactory(\n                  new PropertyValueFactory&lt;Folder,String&gt;(\"folderNumber\")\n                      );\n        colPerson.setCellValueFactory(\n                new Callback&lt;CellDataFeatures&lt;Folder, String&gt;, ObservableValue&lt;String&gt;&gt;() {\n                     public ObservableValue&lt;String&gt; call(CellDataFeatures&lt;Folder, String&gt; p) {\n                         return new SimpleStringProperty(p.getValue().getFirstName() + \" \" + p.getValue().getLastName());\n                     }}\n          );\n        colBirthdayDate.setCellValueFactory(\n                  new PropertyValueFactory&lt;Folder,Date&gt;(\"birthdayDate\")\n                      );\n\n    }\n\n    /**\n     * Put the folders list in the TableView object\n     */\n    public void loadData()\n    {   \n        ObservableList&lt;Folder&gt; listFold = FXCollections.observableArrayList(foldersList);       \n        foldersTableView.setItems(listFold);\n    }   \n}\n</code></pre>\n\n<p><br /></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;?import java.lang.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n\n\n&lt;VBox fx:id=\"view\" xmlns:fx=\"http://javafx.com/fxml/1\" xmlns=\"http://javafx.com/javafx/2.2\" fx:controller=\"pappu.controllers.FolderListController\"&gt;\n    &lt;Label fx:id=\"lblTest\"&gt;&lt;/Label&gt;\n    &lt;TableView fx:id=\"foldersTableView\"&gt;\n        &lt;columns&gt;\n            &lt;TableColumn prefWidth=\"75.0\" text=\"N°\" fx:id=\"colFolderNumber\"&gt;\n            &lt;/TableColumn&gt;\n            &lt;TableColumn prefWidth=\"75.0\" text=\"Personne\" fx:id=\"colPerson\"&gt;\n            &lt;/TableColumn&gt;\n            &lt;TableColumn prefWidth=\"75.0\" text=\"Date de naissance\" fx:id=\"colBirthdayDate\"&gt;\n            &lt;/TableColumn&gt;\n        &lt;/columns&gt;\n    &lt;/TableView&gt;\n&lt;/VBox&gt;\n</code></pre>\n\n<p><strong><em>Controller 3 (.java + .fxml) :</em></strong></p>\n\n<pre><code>package pappu.controllers;\n\nimport java.io.IOException;\nimport java.net.URL;\nimport java.util.ResourceBundle;\n\nimport org.hibernate.Session;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\n\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.fxml.Initializable;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.Pane;\nimport pappu.core.AppFactory;\nimport pappu.core.controller.AbstractController;\nimport pappu.entities.Folder;\nimport pappu.entities.Gender;\n\npublic class FolderFormAddController extends AbstractController\n{   \n    @FXML TextField folderNumber;\n    @FXML TextField firstName;\n    @FXML TextField lastName;\n    public void submitForm() throws IOException\n    {   \n        Session session = sessionFactory.getCurrentSession();\n        session.beginTransaction();\n\n        Folder folder = new Folder();\n\n        folder.setFolderNumber(folderNumber.getText());\n        folder.setFirstName(firstName.getText());\n        folder.setLastName(lastName.getText());\n        folder.setGender(Gender.m);\n\n        session.save(folder);\n        session.getTransaction().commit();\n            // This doesn't work.. even tried with a simple Label\n        AppFactory app = new AppFactory();\n        FolderListController flc = app.folderListController();\n        flc.initializeFoldersList();\n        flc.loadData();\n    }\n}\n</code></pre>\n\n<p><br /></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;?import java.lang.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;VBox fx:id=\"view\" prefHeight=\"216.0\" prefWidth=\"421.0\" xmlns:fx=\"http://javafx.com/fxml/1\" xmlns=\"http://javafx.com/javafx/2.2\" fx:controller=\"pappu.controllers.FolderFormAddController\"&gt;\n  &lt;children&gt;\n    &lt;Label prefHeight=\"26.0\" prefWidth=\"102.0\" text=\"Numéro de dossier\" /&gt;\n    &lt;TextField prefWidth=\"200.0\" fx:id=\"folderNumber\"/&gt;\n    &lt;Label text=\"Prénom\" /&gt;\n    &lt;TextField prefWidth=\"200.0\" fx:id=\"firstName\"/&gt;\n    &lt;Label text=\"Nom\" /&gt;\n    &lt;TextField prefWidth=\"200.0\" fx:id=\"lastName\"/&gt;\n    &lt;Button mnemonicParsing=\"false\" onAction=\"#submitForm\" text=\"Enregistrer\" /&gt;\n  &lt;/children&gt;\n&lt;/VBox&gt;\n</code></pre>\n\n<p><strong>Precisions:</strong><br>\nI made my application on this base:\n<a href=\"http://www.zenjava.com/2011/10/25/views-within-views-controllers-within-controllers/\" rel=\"noreferrer\">http://www.zenjava.com/2011/10/25/views-within-views-controllers-within-controllers/</a> and I use JavaFX 2 on Java JDK 7</p>\n\n<p>I feel something missing in global functioning of a JavaFX application.</p>\n"},{"tags":["java","maven","tomcat","plugins","tomcat8.5"],"answers":[{"tags":[],"owner":{"account_id":13024677,"reputation":11,"user_id":9413021,"display_name":"guest"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1519652049,"creation_date":1519644592,"answer_id":48987475,"question_id":47363490,"body_markdown":"I had faced the same issue.\r\n\r\nTurned out maven tomcat plugin tried to upload as `admin` even though I specified another username. I then set tomcat user to `admin` with blank password and it worked.\r\n\r\nLame workaround but at least now you know where to look into.","title":"Tomcat deploy using tomcat7-maven-plugin fails with error &quot;Cannot invoke Tomcat manager: Connection reset by peer: socket write error&quot;","body":"<p>I had faced the same issue.</p>\n\n<p>Turned out maven tomcat plugin tried to upload as <code>admin</code> even though I specified another username. I then set tomcat user to <code>admin</code> with blank password and it worked.</p>\n\n<p>Lame workaround but at least now you know where to look into.</p>\n"},{"comments":[{"owner":{"account_id":7582249,"reputation":619,"user_id":5752597,"display_name":"SKBo"},"score":0,"creation_date":1559135360,"post_id":49033346,"comment_id":99326106,"body_markdown":"I had this problem, and it&#39;s what was missing. This can be marked as resolved.","body":"I had this problem, and it&#39;s what was missing. This can be marked as resolved."}],"tags":[],"owner":{"account_id":11601050,"reputation":294,"user_id":8498147,"accept_rate":57,"display_name":"Patz"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1519833691,"creation_date":1519832537,"answer_id":49033346,"question_id":47363490,"body_markdown":"I resolved the issue. Problem was that the admin user I was using had access for the manager-gui and manager-status. For the deployment, it needs manager-script role access. I created new user having this role and used that one in my `pom.xml` and it worked.\r\n\r\nFollowing is the entry I added in `tomcat-users.xml`:\r\n\r\n    &lt;user username=&quot;script&quot; password=&quot;xxxx&quot; roles=&quot;manager-script,manager-jmx&quot;/&gt;","title":"Tomcat deploy using tomcat7-maven-plugin fails with error &quot;Cannot invoke Tomcat manager: Connection reset by peer: socket write error&quot;","body":"<p>I resolved the issue. Problem was that the admin user I was using had access for the manager-gui and manager-status. For the deployment, it needs manager-script role access. I created new user having this role and used that one in my <code>pom.xml</code> and it worked.</p>\n\n<p>Following is the entry I added in <code>tomcat-users.xml</code>:</p>\n\n<pre><code>&lt;user username=\"script\" password=\"xxxx\" roles=\"manager-script,manager-jmx\"/&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681215701,"post_id":75947375,"comment_id":134017382,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75947375/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28230192,"reputation":1,"user_id":21579530,"display_name":"Ben Brand"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680769811,"creation_date":1680769811,"answer_id":75947375,"question_id":47363490,"body_markdown":"Relatively late to this one. I came across this issue when porting from Ubuntu to Windows 11. \r\n\r\nAdding the username/password for Tomcat to the POM resolved the problem (and, of course, having the tomcat-users.xml set up for that user). \r\n\r\nStrangely enough, on Linux, it all worked without that combo. O well.","title":"Tomcat deploy using tomcat7-maven-plugin fails with error &quot;Cannot invoke Tomcat manager: Connection reset by peer: socket write error&quot;","body":"<p>Relatively late to this one. I came across this issue when porting from Ubuntu to Windows 11.</p>\n<p>Adding the username/password for Tomcat to the POM resolved the problem (and, of course, having the tomcat-users.xml set up for that user).</p>\n<p>Strangely enough, on Linux, it all worked without that combo. O well.</p>\n"},{"tags":[],"owner":{"account_id":28652191,"reputation":1,"user_id":21938958,"display_name":"Dicluu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684741203,"creation_date":1684740675,"answer_id":76303894,"question_id":47363490,"body_markdown":"The same exception appears when you didn&#39;t make install (mvn install tomcat7:deploy) and trying to deploy WAR (mvn tomcat7:deploy)\r\n\r\nBy the way, your IDE can use own maven so be careful when you configurating settings.xml \r\n\r\nAnother one case this exception appears it&#39;s when your WAR file already deployed on tomcat, so you need to redeploy (mvn tomcat7:redeploy)","title":"Tomcat deploy using tomcat7-maven-plugin fails with error &quot;Cannot invoke Tomcat manager: Connection reset by peer: socket write error&quot;","body":"<p>The same exception appears when you didn't make install (mvn install tomcat7:deploy) and trying to deploy WAR (mvn tomcat7:deploy)</p>\n<p>By the way, your IDE can use own maven so be careful when you configurating settings.xml</p>\n<p>Another one case this exception appears it's when your WAR file already deployed on tomcat, so you need to redeploy (mvn tomcat7:redeploy)</p>\n"}],"owner":{"account_id":11601050,"reputation":294,"user_id":8498147,"accept_rate":57,"display_name":"Patz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6301,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1684741203,"creation_date":1510988526,"question_id":47363490,"body_markdown":"I am trying to set auto-deploy for my war to Tomcat using the Tomcat7-Maven-Plugin. However, its failing to deploy the file. From the console messages, it looks like it starts deploying but gets interrupted in between after ard 2 MB of transfer. Same happens for all retries and finally it fails.\r\n\r\n    $ mvn tomcat7:redeploy\r\n\t\t.\r\n\t\t.\r\n\t\t.  \r\n\t[INFO] Deploying war to http://localhost:8080/policy-service\r\n    Uploading: http://localhost:8080/manager/text/deploy?path=%2Fpolicy-service&amp;update=true\r\n    2244/52241 KB\r\n    [INFO] I/O exception (java.net.SocketException) caught when processing request: Connection reset by peer: socket write error\r\n    [INFO] Retrying request\r\n    Uploading: http://localhost:8080/manager/text/deploy?path=%2Fpolicy-service&amp;update=true\r\n    2242/52241 KB\r\n    [INFO] I/O exception (java.net.SocketException) caught when processing request: Connection reset by peer: socket write error\r\n    [INFO] Retrying request\r\n    Uploading: http://localhost:8080/manager/text/deploy?path=%2Fpolicy-service&amp;update=true\r\n    2242/52241 KB\r\n    [INFO] I/O exception (java.net.SocketException) caught when processing request: Connection reset by peer: socket write error\r\n    [INFO] Retrying request\r\n    Uploading: http://localhost:8080/manager/text/deploy?path=%2Fpolicy-service&amp;update=true\r\n    2242/52241 KB\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n                                    \r\nI tried all possible solutions which I could gather, but no luck:\r\n\r\n1. Changing POM config url from /manager/text to /manager/html.\r\n2. Not allocating manager-script or manager-jmx role to the same user having manager-gui role in tomcat-users.xml.\r\n3. Setting connector timeout from 20 sec to 60 sec in server.xml \r\n    &lt;Connector connectionTimeout=&quot;60000&quot; ...&gt;\r\n4. Changed max-file-size from default 50 MB to 80 MB. (As my war file size is 55 MBs.)\r\n\r\nSome additional details as follows:\r\n\r\n - Pom.xml snippet:\r\n\r\n\t\t&lt;plugins&gt;\t\t\t \r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\t\t\t\r\n\t\t\t\r\n\t\t\t&lt;plugin&gt;\r\n\t\t     &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n\t\t     &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\r\n\t\t     &lt;version&gt;2.2&lt;/version&gt;\r\n\t\t     &lt;configuration&gt;  \r\n\t\t\t\t\t  &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;  \r\n\t\t\t\t\t  &lt;server&gt;TomcatServer&lt;/server&gt;    \r\n\t\t\t\t\t  &lt;username&gt;xxx&lt;/username&gt;  \r\n\t\t\t\t\t  &lt;password&gt;xxx&lt;/password&gt;\r\n\t\t\t\t\t  &lt;path&gt;/policy-service&lt;/path&gt;   \r\n \t\t\t\t&lt;/configuration&gt;\r\n        \t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\r\n - Maven verion: 3.5.2\r\n\r\n - Tomcat version: 8.5.32 \r\n\r\n - JDK version: 1.8.0_144 \r\n\r\n - Full stack trace of the exception I get while deploying war to tomcat\r\n\r\n          [ERROR] Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.2:redeploy (default-cli) on project policy-service: Cannot invoke Tomcat manager: Connection reset by peer: socket write error -&gt; [Help 1]\r\n          org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.2:redeploy (default-cli) on project policy-service: Cannot invoke Tomcat manager\r\n              at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)\r\n              at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\r\n              at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\r\n              at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n              at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n              at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:51)\r\n              at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n              at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:309)\r\n              at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:194)\r\n              at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:107)\r\n              at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)\r\n              at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)\r\n              at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)\r\n              at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n              at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n              at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n              at java.lang.reflect.Method.invoke (Method.java:498)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\r\n          Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot invoke Tomcat manager\r\n              at org.apache.tomcat.maven.plugin.tomcat7.AbstractCatalinaMojo.execute (AbstractCatalinaMojo.java:141)\r\n              at org.apache.tomcat.maven.plugin.tomcat7.AbstractWarCatalinaMojo.execute (AbstractWarCatalinaMojo.java:68)\r\n              at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:134)\r\n              at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\r\n              at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\r\n              at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\r\n              at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n              at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n              at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:51)\r\n              at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n              at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:309)\r\n              at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:194)\r\n              at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:107)\r\n              at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)\r\n              at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)\r\n              at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)\r\n              at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n              at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n              at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n              at java.lang.reflect.Method.invoke (Method.java:498)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\r\n          Caused by: java.net.SocketException: Connection reset by peer: socket write error\r\n              at java.net.SocketOutputStream.socketWrite0 (Native Method)\r\n              at java.net.SocketOutputStream.socketWrite (SocketOutputStream.java:111)\r\n              at java.net.SocketOutputStream.write (SocketOutputStream.java:155)\r\n              at org.apache.http.impl.io.AbstractSessionOutputBuffer.write (AbstractSessionOutputBuffer.java:181)\r\n              at org.apache.http.impl.conn.LoggingSessionOutputBuffer.write (LoggingSessionOutputBuffer.java:73)\r\n              at org.apache.http.impl.io.ContentLengthOutputStream.write (ContentLengthOutputStream.java:115)\r\n              at org.apache.tomcat.maven.common.deployer.TomcatManager$RequestEntityImplementation.writeTo (TomcatManager.java:880)\r\n              at org.apache.http.entity.HttpEntityWrapper.writeTo (HttpEntityWrapper.java:89)\r\n              at org.apache.http.impl.client.EntityEnclosingRequestWrapper$EntityWrapper.writeTo (EntityEnclosingRequestWrapper.java:108)\r\n              at org.apache.http.impl.entity.EntitySerializer.serialize (EntitySerializer.java:117)\r\n              at org.apache.http.impl.AbstractHttpClientConnection.sendRequestEntity (AbstractHttpClientConnection.java:265)\r\n              at org.apache.http.impl.conn.ManagedClientConnectionImpl.sendRequestEntity (ManagedClientConnectionImpl.java:203)\r\n              at org.apache.http.protocol.HttpRequestExecutor.doSendRequest (HttpRequestExecutor.java:236)\r\n              at org.apache.http.protocol.HttpRequestExecutor.execute (HttpRequestExecutor.java:121)\r\n              at org.apache.http.impl.client.DefaultRequestDirector.tryExecute (DefaultRequestDirector.java:682)\r\n              at org.apache.http.impl.client.DefaultRequestDirector.execute (DefaultRequestDirector.java:486)\r\n              at org.apache.http.impl.client.AbstractHttpClient.doExecute (AbstractHttpClient.java:863)\r\n              at org.apache.http.impl.client.CloseableHttpClient.execute (CloseableHttpClient.java:82)\r\n              at org.apache.tomcat.maven.common.deployer.TomcatManager.invoke (TomcatManager.java:742)\r\n              at org.apache.tomcat.maven.common.deployer.TomcatManager.deployImpl (TomcatManager.java:705)\r\n              at org.apache.tomcat.maven.common.deployer.TomcatManager.deploy (TomcatManager.java:388)\r\n              at org.apache.tomcat.maven.plugin.tomcat7.deploy.AbstractDeployWarMojo.deployWar (AbstractDeployWarMojo.java:85)\r\n              at org.apache.tomcat.maven.plugin.tomcat7.deploy.AbstractDeployMojo.invokeManager (AbstractDeployMojo.java:82)\r\n              at org.apache.tomcat.maven.plugin.tomcat7.AbstractCatalinaMojo.execute (AbstractCatalinaMojo.java:132)\r\n              at org.apache.tomcat.maven.plugin.tomcat7.AbstractWarCatalinaMojo.execute (AbstractWarCatalinaMojo.java:68)\r\n              at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:134)\r\n              at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\r\n              at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\r\n              at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\r\n              at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n              at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n              at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:51)\r\n              at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n              at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:309)\r\n              at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:194)\r\n              at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:107)\r\n              at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)\r\n              at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)\r\n              at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)\r\n              at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n              at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n              at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n              at java.lang.reflect.Method.invoke (Method.java:498)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n              at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)","title":"Tomcat deploy using tomcat7-maven-plugin fails with error &quot;Cannot invoke Tomcat manager: Connection reset by peer: socket write error&quot;","body":"<p>I am trying to set auto-deploy for my war to Tomcat using the Tomcat7-Maven-Plugin. However, its failing to deploy the file. From the console messages, it looks like it starts deploying but gets interrupted in between after ard 2 MB of transfer. Same happens for all retries and finally it fails.</p>\n\n<pre><code>$ mvn tomcat7:redeploy\n    .\n    .\n    .  \n[INFO] Deploying war to http://localhost:8080/policy-service\nUploading: http://localhost:8080/manager/text/deploy?path=%2Fpolicy-service&amp;update=true\n2244/52241 KB\n[INFO] I/O exception (java.net.SocketException) caught when processing request: Connection reset by peer: socket write error\n[INFO] Retrying request\nUploading: http://localhost:8080/manager/text/deploy?path=%2Fpolicy-service&amp;update=true\n2242/52241 KB\n[INFO] I/O exception (java.net.SocketException) caught when processing request: Connection reset by peer: socket write error\n[INFO] Retrying request\nUploading: http://localhost:8080/manager/text/deploy?path=%2Fpolicy-service&amp;update=true\n2242/52241 KB\n[INFO] I/O exception (java.net.SocketException) caught when processing request: Connection reset by peer: socket write error\n[INFO] Retrying request\nUploading: http://localhost:8080/manager/text/deploy?path=%2Fpolicy-service&amp;update=true\n2242/52241 KB\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n\n<p>I tried all possible solutions which I could gather, but no luck:</p>\n\n<ol>\n<li>Changing POM config url from /manager/text to /manager/html.</li>\n<li>Not allocating manager-script or manager-jmx role to the same user having manager-gui role in tomcat-users.xml.</li>\n<li>Setting connector timeout from 20 sec to 60 sec in server.xml \n</li>\n<li>Changed max-file-size from default 50 MB to 80 MB. (As my war file size is 55 MBs.)</li>\n</ol>\n\n<p>Some additional details as follows:</p>\n\n<ul>\n<li><p>Pom.xml snippet:</p>\n\n<pre><code>&lt;plugins&gt;            \n    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n            &lt;source&gt;1.8&lt;/source&gt;\n            &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n    &lt;/plugin&gt;           \n\n    &lt;plugin&gt;\n     &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n     &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\n     &lt;version&gt;2.2&lt;/version&gt;\n     &lt;configuration&gt;  \n              &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;  \n              &lt;server&gt;TomcatServer&lt;/server&gt;    \n              &lt;username&gt;xxx&lt;/username&gt;  \n              &lt;password&gt;xxx&lt;/password&gt;\n              &lt;path&gt;/policy-service&lt;/path&gt;   \n        &lt;/configuration&gt;\n    &lt;/plugin&gt;\n&lt;/plugins&gt;\n</code></pre></li>\n<li><p>Maven verion: 3.5.2</p></li>\n<li><p>Tomcat version: 8.5.32 </p></li>\n<li><p>JDK version: 1.8.0_144 </p></li>\n<li><p>Full stack trace of the exception I get while deploying war to tomcat</p>\n\n<pre><code>  [ERROR] Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.2:redeploy (default-cli) on project policy-service: Cannot invoke Tomcat manager: Connection reset by peer: socket write error -&gt; [Help 1]\n  org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.2:redeploy (default-cli) on project policy-service: Cannot invoke Tomcat manager\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n      at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:51)\n      at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:309)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:194)\n      at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:107)\n      at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)\n      at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)\n      at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke (Method.java:498)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\n  Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot invoke Tomcat manager\n      at org.apache.tomcat.maven.plugin.tomcat7.AbstractCatalinaMojo.execute (AbstractCatalinaMojo.java:141)\n      at org.apache.tomcat.maven.plugin.tomcat7.AbstractWarCatalinaMojo.execute (AbstractWarCatalinaMojo.java:68)\n      at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:134)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n      at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:51)\n      at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:309)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:194)\n      at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:107)\n      at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)\n      at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)\n      at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke (Method.java:498)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\n  Caused by: java.net.SocketException: Connection reset by peer: socket write error\n      at java.net.SocketOutputStream.socketWrite0 (Native Method)\n      at java.net.SocketOutputStream.socketWrite (SocketOutputStream.java:111)\n      at java.net.SocketOutputStream.write (SocketOutputStream.java:155)\n      at org.apache.http.impl.io.AbstractSessionOutputBuffer.write (AbstractSessionOutputBuffer.java:181)\n      at org.apache.http.impl.conn.LoggingSessionOutputBuffer.write (LoggingSessionOutputBuffer.java:73)\n      at org.apache.http.impl.io.ContentLengthOutputStream.write (ContentLengthOutputStream.java:115)\n      at org.apache.tomcat.maven.common.deployer.TomcatManager$RequestEntityImplementation.writeTo (TomcatManager.java:880)\n      at org.apache.http.entity.HttpEntityWrapper.writeTo (HttpEntityWrapper.java:89)\n      at org.apache.http.impl.client.EntityEnclosingRequestWrapper$EntityWrapper.writeTo (EntityEnclosingRequestWrapper.java:108)\n      at org.apache.http.impl.entity.EntitySerializer.serialize (EntitySerializer.java:117)\n      at org.apache.http.impl.AbstractHttpClientConnection.sendRequestEntity (AbstractHttpClientConnection.java:265)\n      at org.apache.http.impl.conn.ManagedClientConnectionImpl.sendRequestEntity (ManagedClientConnectionImpl.java:203)\n      at org.apache.http.protocol.HttpRequestExecutor.doSendRequest (HttpRequestExecutor.java:236)\n      at org.apache.http.protocol.HttpRequestExecutor.execute (HttpRequestExecutor.java:121)\n      at org.apache.http.impl.client.DefaultRequestDirector.tryExecute (DefaultRequestDirector.java:682)\n      at org.apache.http.impl.client.DefaultRequestDirector.execute (DefaultRequestDirector.java:486)\n      at org.apache.http.impl.client.AbstractHttpClient.doExecute (AbstractHttpClient.java:863)\n      at org.apache.http.impl.client.CloseableHttpClient.execute (CloseableHttpClient.java:82)\n      at org.apache.tomcat.maven.common.deployer.TomcatManager.invoke (TomcatManager.java:742)\n      at org.apache.tomcat.maven.common.deployer.TomcatManager.deployImpl (TomcatManager.java:705)\n      at org.apache.tomcat.maven.common.deployer.TomcatManager.deploy (TomcatManager.java:388)\n      at org.apache.tomcat.maven.plugin.tomcat7.deploy.AbstractDeployWarMojo.deployWar (AbstractDeployWarMojo.java:85)\n      at org.apache.tomcat.maven.plugin.tomcat7.deploy.AbstractDeployMojo.invokeManager (AbstractDeployMojo.java:82)\n      at org.apache.tomcat.maven.plugin.tomcat7.AbstractCatalinaMojo.execute (AbstractCatalinaMojo.java:132)\n      at org.apache.tomcat.maven.plugin.tomcat7.AbstractWarCatalinaMojo.execute (AbstractWarCatalinaMojo.java:68)\n      at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:134)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n      at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:51)\n      at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:309)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:194)\n      at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:107)\n      at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)\n      at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)\n      at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke (Method.java:498)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\n</code></pre></li>\n</ul>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1684705979,"post_id":76302062,"comment_id":134552014,"body_markdown":"The solution is to use a `ScrollPane`. In what way does the code in your question not work for you? Please provide a [mre].","body":"The solution is to use a <code>ScrollPane</code>. In what way does the code in your question not work for you? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1684706007,"post_id":76302062,"comment_id":134552016,"body_markdown":"The other option is to use a `ListView`, which is preferred if you have a significant number of graphs to display.","body":"The other option is to use a <code>ListView</code>, which is preferred if you have a significant number of graphs to display."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1684717522,"post_id":76302062,"comment_id":134552959,"body_markdown":"“the code I found doesn&#39;t work” —How can you tell?","body":"“the code I found doesn&#39;t work” —How can you tell?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1684731700,"post_id":76302062,"comment_id":134554070,"body_markdown":"You wrote in your question: _the code I found doesn&#39;t work in my version of the library_ What &quot;library&quot; are you referring to? Is the code in your question the code that you found?","body":"You wrote in your question: <i>the code I found doesn&#39;t work in my version of the library</i> What &quot;library&quot; are you referring to? Is the code in your question the code that you found?"},{"owner":{"account_id":20509166,"reputation":37,"user_id":18729480,"display_name":"PluggaRose"},"score":0,"creation_date":1684735722,"post_id":76302062,"comment_id":134554507,"body_markdown":"I understand that a minimal reproducible example is needed here.  But as I said earlier I am new to javafx.  I just need to put 7 lines of charts in one window so that it looks at least not pinched. Does it make sense to add even more code here - I don&#39;t think so.  Because you certainly don&#39;t need my calculations.","body":"I understand that a minimal reproducible example is needed here.  But as I said earlier I am new to javafx.  I just need to put 7 lines of charts in one window so that it looks at least not pinched. Does it make sense to add even more code here - I don&#39;t think so.  Because you certainly don&#39;t need my calculations."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1684737185,"post_id":76302062,"comment_id":134554772,"body_markdown":"&quot;_Does it make sense to add even more code here - I don&#39;t think so._&quot; – But we **do** think so. Or at least we think you should show your actual attempt (in the form of a [mre]). From our perspective, you have apparently already found a solution. So, we don&#39;t really understand what you&#39;re actually asking. You state using a `ScrollPane` &quot;doesn&#39;t work&quot;. But **how** doesn&#39;t it work? What did you try? In other words, a [mre] would help us help you (plus any errors you&#39;re getting).","body":"&quot;<i>Does it make sense to add even more code here - I don&#39;t think so.</i>&quot; – But we <b>do</b> think so. Or at least we think you should show your actual attempt (in the form of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). From our perspective, you have apparently already found a solution. So, we don&#39;t really understand what you&#39;re actually asking. You state using a <code>ScrollPane</code> &quot;doesn&#39;t work&quot;. But <b>how</b> doesn&#39;t it work? What did you try? In other words, a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would help us help you (plus any errors you&#39;re getting)."},{"owner":{"account_id":20509166,"reputation":37,"user_id":18729480,"display_name":"PluggaRose"},"score":0,"creation_date":1684739836,"post_id":76302062,"comment_id":134555217,"body_markdown":"OK, I was wrong. Now I will add a little explanation of how it should look like.","body":"OK, I was wrong. Now I will add a little explanation of how it should look like."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1684743823,"post_id":76302062,"comment_id":134556016,"body_markdown":"&quot;_There is no setContent method when I try to repeat the example_&quot; – I think this was the piece of information we were missing. As you can see in [the documentation](https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/ScrollPane.html#setContent(javafx.scene.Node)), that method does indeed exist and has existed since JavaFX 2.0 (which is approximately 10 major versions older than the version you&#39;re using). My guess is you erroneously imported `java.awt.ScrollPane`. But `javafx.scene.control.ScrollPane` is the class you want to import.","body":"&quot;<i>There is no setContent method when I try to repeat the example</i>&quot; – I think this was the piece of information we were missing. As you can see in <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/ScrollPane.html#setContent(javafx.scene.Node)\" rel=\"nofollow noreferrer\">the documentation</a>, that method does indeed exist and has existed since JavaFX 2.0 (which is approximately 10 major versions older than the version you&#39;re using). My guess is you erroneously imported <code>java.awt.ScrollPane</code>. But <code>javafx.scene.control.ScrollPane</code> is the class you want to import."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1684744023,"post_id":76302062,"comment_id":134556058,"body_markdown":"As a general rule, unless you really know what you&#39;re doing, avoid importing anything from the `java.awt.*` or `java.swing.*` packages when creating a JavaFX application. All code related to the JavaFX standard library is in packages starting with `javafx.*`.","body":"As a general rule, unless you really know what you&#39;re doing, avoid importing anything from the <code>java.awt.*</code> or <code>java.swing.*</code> packages when creating a JavaFX application. All code related to the JavaFX standard library is in packages starting with <code>javafx.*</code>."},{"owner":{"account_id":20509166,"reputation":37,"user_id":18729480,"display_name":"PluggaRose"},"score":1,"creation_date":1684744340,"post_id":76302062,"comment_id":134556126,"body_markdown":"Yes, you&#39;re right. The example did not say that you need to use ``javafx.scene.control.ScrollPane``. And Intellij IDEA suggested importing the wrong class. Thanks for the help.","body":"Yes, you&#39;re right. The example did not say that you need to use <code>javafx.scene.control.ScrollPane</code>. And Intellij IDEA suggested importing the wrong class. Thanks for the help."}],"owner":{"account_id":20509166,"reputation":37,"user_id":18729480,"display_name":"PluggaRose"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1684748887,"answer_count":0,"score":1,"last_activity_date":1684741167,"creation_date":1684705886,"question_id":76302062,"body_markdown":"I&#39;m new to javafx. My task is to make several graphs in one window. But the problem is that there are too many of them and they do not fit in the window correctly. \r\n\r\nIn other cases I used GridPane and it worked. But now I am faced with the problem described above. How can I implement a scrollable window in the likeness of a grid? If possible, provide a link to the example/documentation.\r\n\r\nAt the moment, my charts look like this. And they look acceptable. Do not pay attention to the signatures, they will be made later.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI use the GridPane to determine the position of the graphs. Here is my code:\r\n\r\n```\r\n        GridPane pane = new GridPane();\r\n        pane.add(lineChart0,0,0);\r\n        pane.add(lineChart1,1,0);\r\n        pane.add(lineChart2,2,0);\r\n        pane.add(lineChart3,0,1);\r\n        pane.add(lineChart4,1,1);\r\n        pane.add(lineChart5,2,1);\r\n        pane.add(lineChart6,3,1);\r\n        pane.add(lineChart7,0,2);\r\n        pane.add(lineChart8,1,2);\r\n        pane.add(lineChart9,2,2);\r\n        pane.add(lineChart10,3,2);\r\n        pane.add(lineChart11,0,3);\r\n        pane.add(lineChart12,1,3);\r\n        pane.add(lineChart13,2,3);\r\n        pane.add(lineChart14,3,3);\r\n\r\n\r\n        Scene scene = new Scene(pane, 1920, 1000);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n```\r\n\r\nBut now I need to add some more charts lines. When I add these lines, this happens:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nData signatures and the last chart line disappear.  Don&#39;t pay attention to the empty spaces in the grid. Here I&#39;m just checking how charts will behave with a given number of rows.\r\n\r\n```\r\n        GridPane pane = new GridPane();\r\n        pane.add(lineChart0,0,0);\r\n        pane.add(lineChart1,1,0);\r\n        pane.add(lineChart2,2,0);\r\n        pane.add(lineChart3,0,1);\r\n        pane.add(lineChart4,1,1);\r\n        pane.add(lineChart5,2,1);\r\n        pane.add(lineChart6,3,1);\r\n        pane.add(lineChart7,0,2);\r\n        pane.add(lineChart8,1,2);\r\n        pane.add(lineChart9,2,2);\r\n        pane.add(lineChart10,3,2);\r\n        pane.add(lineChart11,0,3);\r\n        pane.add(lineChart12,1,4);\r\n        pane.add(lineChart13,2,5);\r\n        pane.add(lineChart14,3,6);\r\n\r\n\r\n        Scene scene = new Scene(pane, 1920, 1000);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n```\r\n\r\nI need the graphs to be displayed correctly in one window. According to my idea, this can be done by scrolling the page. But maybe my idea is wrong. I tried to find an example of how to combine grid pane and scrollpane, but code  that I found doesn&#39;t work in my version of the library(17.0.2). There is no ```setContent``` method when I try to repeat the example. Here is an example of this code:\r\n```\r\nScrollPane scrollPane = new ScrollPane();\r\n\r\nGridPane gridPane = new GridPane();\r\ngridPane.add(new Label(&quot;Name:&quot;), 0, 0);\r\ngridPane.add(new TextField(), 1, 0);\r\ngridPane.add(new Label(&quot;Description:&quot;), 0, 1);\r\ngridPane.add(new TextArea(), 1, 1);\r\n\r\nscrollPane.setContent(gridPane);\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wJ8Ed.png\r\n  [2]: https://i.stack.imgur.com/i7EO9.png","title":"Scrollable grid in javafx","body":"<p>I'm new to javafx. My task is to make several graphs in one window. But the problem is that there are too many of them and they do not fit in the window correctly.</p>\n<p>In other cases I used GridPane and it worked. But now I am faced with the problem described above. How can I implement a scrollable window in the likeness of a grid? If possible, provide a link to the example/documentation.</p>\n<p>At the moment, my charts look like this. And they look acceptable. Do not pay attention to the signatures, they will be made later.</p>\n<p><a href=\"https://i.stack.imgur.com/wJ8Ed.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wJ8Ed.png\" alt=\"enter image description here\" /></a></p>\n<p>I use the GridPane to determine the position of the graphs. Here is my code:</p>\n<pre><code>        GridPane pane = new GridPane();\n        pane.add(lineChart0,0,0);\n        pane.add(lineChart1,1,0);\n        pane.add(lineChart2,2,0);\n        pane.add(lineChart3,0,1);\n        pane.add(lineChart4,1,1);\n        pane.add(lineChart5,2,1);\n        pane.add(lineChart6,3,1);\n        pane.add(lineChart7,0,2);\n        pane.add(lineChart8,1,2);\n        pane.add(lineChart9,2,2);\n        pane.add(lineChart10,3,2);\n        pane.add(lineChart11,0,3);\n        pane.add(lineChart12,1,3);\n        pane.add(lineChart13,2,3);\n        pane.add(lineChart14,3,3);\n\n\n        Scene scene = new Scene(pane, 1920, 1000);\n        stage.setScene(scene);\n        stage.show();\n</code></pre>\n<p>But now I need to add some more charts lines. When I add these lines, this happens:</p>\n<p><a href=\"https://i.stack.imgur.com/i7EO9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i7EO9.png\" alt=\"enter image description here\" /></a></p>\n<p>Data signatures and the last chart line disappear.  Don't pay attention to the empty spaces in the grid. Here I'm just checking how charts will behave with a given number of rows.</p>\n<pre><code>        GridPane pane = new GridPane();\n        pane.add(lineChart0,0,0);\n        pane.add(lineChart1,1,0);\n        pane.add(lineChart2,2,0);\n        pane.add(lineChart3,0,1);\n        pane.add(lineChart4,1,1);\n        pane.add(lineChart5,2,1);\n        pane.add(lineChart6,3,1);\n        pane.add(lineChart7,0,2);\n        pane.add(lineChart8,1,2);\n        pane.add(lineChart9,2,2);\n        pane.add(lineChart10,3,2);\n        pane.add(lineChart11,0,3);\n        pane.add(lineChart12,1,4);\n        pane.add(lineChart13,2,5);\n        pane.add(lineChart14,3,6);\n\n\n        Scene scene = new Scene(pane, 1920, 1000);\n        stage.setScene(scene);\n        stage.show();\n</code></pre>\n<p>I need the graphs to be displayed correctly in one window. According to my idea, this can be done by scrolling the page. But maybe my idea is wrong. I tried to find an example of how to combine grid pane and scrollpane, but code  that I found doesn't work in my version of the library(17.0.2). There is no <code>setContent</code> method when I try to repeat the example. Here is an example of this code:</p>\n<pre><code>ScrollPane scrollPane = new ScrollPane();\n\nGridPane gridPane = new GridPane();\ngridPane.add(new Label(&quot;Name:&quot;), 0, 0);\ngridPane.add(new TextField(), 1, 0);\ngridPane.add(new Label(&quot;Description:&quot;), 0, 1);\ngridPane.add(new TextArea(), 1, 1);\n\nscrollPane.setContent(gridPane);\n</code></pre>\n"},{"tags":["java","simpledateformat"],"answers":[{"comments":[{"owner":{"account_id":18229672,"reputation":18798,"user_id":13268855,"display_name":"Peter Csala"},"score":0,"creation_date":1684739757,"post_id":31187578,"comment_id":134555197,"body_markdown":"Hey Jon, did you mean `dateString` when you have written `text`? Also, did you mean `sdf.parse` not `format.parse`, right?","body":"Hey Jon, did you mean <code>dateString</code> when you have written <code>text</code>? Also, did you mean <code>sdf.parse</code> not <code>format.parse</code>, right?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1684741145,"post_id":31187578,"comment_id":134555467,"body_markdown":"@PeterCsala: I meant to change the parameter name to `text` (which I&#39;ve now done) - and yes, I meant `sdf.parse`. Fixed now.","body":"@PeterCsala: I meant to change the parameter name to <code>text</code> (which I&#39;ve now done) - and yes, I meant <code>sdf.parse</code>. Fixed now."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684741107,"creation_date":1435847954,"answer_id":31187578,"question_id":31187493,"body_markdown":"You can use the overload of `parse` which takes a `ParsePosition`:\r\n\r\n    public static Date parseDate(final String text, final String[] acceptedFormats) {\r\n        ParsePosition position = new ParsePosition(0);\r\n        for (String format : acceptedFormats) {\r\n            // TODO: Specify time zone and locale\r\n            SimpleDateFormat sdf = new SimpleDateFormat(format);\r\n            Date date = sdf.parse(text, position);\r\n            if (date != null &amp;&amp; position.getIndex() == text.length()) {\r\n                return date;\r\n            }\r\n            position.setIndex(0);\r\n        }\r\n        return null; // dateString does not match any accepted format\r\n    }\r\n\r\nNote the check that the parse position is the length of the string - that prevents false positives where *some* of the text has been parsed, but there&#39;s more left over - such as a format of &quot;yyyy-MM-dd&quot; and text of &quot;2015-07-02T15:40&quot;.","title":"SimpleDateFormat try parse, avoid empty catch block","body":"<p>You can use the overload of <code>parse</code> which takes a <code>ParsePosition</code>:</p>\n<pre><code>public static Date parseDate(final String text, final String[] acceptedFormats) {\n    ParsePosition position = new ParsePosition(0);\n    for (String format : acceptedFormats) {\n        // TODO: Specify time zone and locale\n        SimpleDateFormat sdf = new SimpleDateFormat(format);\n        Date date = sdf.parse(text, position);\n        if (date != null &amp;&amp; position.getIndex() == text.length()) {\n            return date;\n        }\n        position.setIndex(0);\n    }\n    return null; // dateString does not match any accepted format\n}\n</code></pre>\n<p>Note the check that the parse position is the length of the string - that prevents false positives where <em>some</em> of the text has been parsed, but there's more left over - such as a format of &quot;yyyy-MM-dd&quot; and text of &quot;2015-07-02T15:40&quot;.</p>\n"}],"owner":{"account_id":4747063,"reputation":1250,"user_id":3838107,"accept_rate":28,"display_name":"lucian.marcuta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1834,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1684741107,"creation_date":1435847711,"question_id":31187493,"body_markdown":"I implemented the following method that can be used to convert a String to an accepted format: \r\n\r\n    public static Date parseDate(final String dateString, final String[] acceptedFormats) {\r\n            for (String format : acceptedFormats) {\r\n                try {\r\n                    return new SimpleDateFormat(format).parse(dateString);\r\n                } catch (ParseException e) {\r\n                    // dateString does not have this format\r\n                }\r\n            }\r\n            return null; // dateString does not match any accepted format\r\n        }\r\n\r\nAs I read from some Java books, it`s not a good practice to use exceptions to control the flow. In this case, I use an empty catch block and that`s not a good practice. Can you help me to to write a method that does the same thing but in a different way? \r\nI have to mention that I am not allowed to use external libs( I know that there a lib from apachee that can do this thing in a nice manner)","title":"SimpleDateFormat try parse, avoid empty catch block","body":"<p>I implemented the following method that can be used to convert a String to an accepted format: </p>\n\n<pre><code>public static Date parseDate(final String dateString, final String[] acceptedFormats) {\n        for (String format : acceptedFormats) {\n            try {\n                return new SimpleDateFormat(format).parse(dateString);\n            } catch (ParseException e) {\n                // dateString does not have this format\n            }\n        }\n        return null; // dateString does not match any accepted format\n    }\n</code></pre>\n\n<p>As I read from some Java books, it<code>s not a good practice to use exceptions to control the flow. In this case, I use an empty catch block and that</code>s not a good practice. Can you help me to to write a method that does the same thing but in a different way? \nI have to mention that I am not allowed to use external libs( I know that there a lib from apachee that can do this thing in a nice manner)</p>\n"},{"tags":["java","mongodb","mongo-java-driver"],"answers":[{"comments":[{"owner":{"account_id":12800258,"reputation":77,"user_id":9261801,"display_name":"Deepak Aggarwal"},"score":0,"creation_date":1551080252,"post_id":54860746,"comment_id":96493455,"body_markdown":"I am not sure which external mongo db driver you have mentioned, but I am using mongo-java-driver  and in it there is no authenticate() function available on database.\n\nBelow is how I access database:\nMongoDatabase database = mongoClient.getDatabase(mongoDBdatabase);\n\t\tMongoCollection&lt;Document&gt; metadata_collection = getMetadataCollectionName(database, type);","body":"I am not sure which external mongo db driver you have mentioned, but I am using mongo-java-driver  and in it there is no authenticate() function available on database.  Below is how I access database: MongoDatabase database = mongoClient.getDatabase(mongoDBdatabase); \t\tMongoCollection&lt;Document&gt; metadata_collection = getMetadataCollectionName(database, type);"},{"owner":{"account_id":2824708,"reputation":199,"user_id":2427589,"display_name":"Dilyano Senders"},"score":0,"creation_date":1551081010,"post_id":54860746,"comment_id":96493785,"body_markdown":"Could you give me your maven dependency?","body":"Could you give me your maven dependency?"},{"owner":{"account_id":12800258,"reputation":77,"user_id":9261801,"display_name":"Deepak Aggarwal"},"score":0,"creation_date":1551082784,"post_id":54860746,"comment_id":96494590,"body_markdown":"&lt;dependency&gt;\n      &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n      &lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt;\n      &lt;version&gt;3.6.0&lt;&lt;/version&gt;\n    &lt;/dependency&gt;","body":"&lt;dependency&gt;       &lt;groupId&gt;org.mongodb&lt;/groupId&gt;       &lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt;       &lt;version&gt;3.6.0&lt;&lt;/version&gt;     &lt;/dependency&gt;"},{"owner":{"account_id":2824708,"reputation":199,"user_id":2427589,"display_name":"Dilyano Senders"},"score":0,"creation_date":1551084251,"post_id":54860746,"comment_id":96495291,"body_markdown":"I updated my answer to include the solution, this way it can be read in java code","body":"I updated my answer to include the solution, this way it can be read in java code"},{"owner":{"account_id":12800258,"reputation":77,"user_id":9261801,"display_name":"Deepak Aggarwal"},"score":0,"creation_date":1551086069,"post_id":54860746,"comment_id":96496222,"body_markdown":"new MongoClient(new ServerAddress(&quot;host1&quot;, 27017), Arrays.asList(mongoCredential)) is deprecated. This is the reason, i cannot use this way. I already mentioned this in question :)","body":"new MongoClient(new ServerAddress(&quot;host1&quot;, 27017), Arrays.asList(mongoCredential)) is deprecated. This is the reason, i cannot use this way. I already mentioned this in question :)"},{"owner":{"account_id":2824708,"reputation":199,"user_id":2427589,"display_name":"Dilyano Senders"},"score":0,"creation_date":1551252952,"post_id":54860746,"comment_id":96568079,"body_markdown":"Hi Deepak, Sorry I wasn&#39;t paying to attention, I have rewritten my solution to contain the new not deprecated method, is this what you are looking for? - Sorry for the late response","body":"Hi Deepak, Sorry I wasn&#39;t paying to attention, I have rewritten my solution to contain the new not deprecated method, is this what you are looking for? - Sorry for the late response"}],"tags":[],"owner":{"account_id":2824708,"reputation":199,"user_id":2427589,"display_name":"Dilyano Senders"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1551252897,"creation_date":1551076822,"answer_id":54860746,"question_id":54860650,"body_markdown":"For the find command to execute, you need to authenticate with mongo first.\r\nAn example of how you may be doing authentication:\r\n\r\n\tMongo mongo = new Mongo(&quot;localhost&quot;, 27017);\r\n\tDB db = mongo.getDB(&quot;testdb&quot;);\r\n\t\t\t\r\n\tboolean auth = db.authenticate(&quot;testdb&quot;, &quot;password&quot;.toCharArray());\r\n\tif (auth) {\r\n\t\t\t\r\n\t\tDBCollection table = db.getCollection(&quot;user&quot;);\r\n\r\n\t\tBasicDBObject document = new BasicDBObject();\r\n\t\tdocument.put(&quot;name&quot;, &quot;mkyong&quot;);\r\n\t\ttable.insert(document);\r\n\t\r\n\t\tSystem.out.println(&quot;Login is successful!&quot;);\r\n\t} else {\r\n\t\tSystem.out.println(&quot;Login is failed!&quot;);\r\n\t}\r\n\r\nThis should work fine for you. \r\n\r\nYou can check the example code in this article: https://www.mkyong.com/mongodb/java-authentication-access-to-mongodb/\r\n\r\nWhen using the mongo-java-driver the following would be appropriate:\r\n- note this is not using the deprecated method anymore, but setting the writeconcern to Journaled (which is recommended)\r\n\r\n    \r\n\r\n    String username = &quot;test&quot;;\r\n    String database = &quot;something&quot;;\r\n    String password = &quot;secret&quot;;\r\n\r\n    MongoCredential mongoCredential = MongoCredential.createCredential(username, database, password.toCharArray());\r\n    MongoClientOptions options = MongoClientOptions.builder()\r\n    .writeConcern(WriteConcern.JOURNALED).build();\r\n    \r\n    MongoClient mongoClient = new MongoClient(new ServerAddress(&quot;host1&quot;, 27017), Arrays.asList(mongoCredential), options);\r\n\r\n\r\n\r\n \r\n","title":"JAVA com.mongodb.MongoQueryException: Query failed with error code 13 and error message &#39;command find requires authentication&#39;","body":"<p>For the find command to execute, you need to authenticate with mongo first.\nAn example of how you may be doing authentication:</p>\n\n<pre><code>Mongo mongo = new Mongo(\"localhost\", 27017);\nDB db = mongo.getDB(\"testdb\");\n\nboolean auth = db.authenticate(\"testdb\", \"password\".toCharArray());\nif (auth) {\n\n    DBCollection table = db.getCollection(\"user\");\n\n    BasicDBObject document = new BasicDBObject();\n    document.put(\"name\", \"mkyong\");\n    table.insert(document);\n\n    System.out.println(\"Login is successful!\");\n} else {\n    System.out.println(\"Login is failed!\");\n}\n</code></pre>\n\n<p>This should work fine for you. </p>\n\n<p>You can check the example code in this article: <a href=\"https://www.mkyong.com/mongodb/java-authentication-access-to-mongodb/\" rel=\"nofollow noreferrer\">https://www.mkyong.com/mongodb/java-authentication-access-to-mongodb/</a></p>\n\n<p>When using the mongo-java-driver the following would be appropriate:\n- note this is not using the deprecated method anymore, but setting the writeconcern to Journaled (which is recommended)</p>\n\n<pre><code>String username = \"test\";\nString database = \"something\";\nString password = \"secret\";\n\nMongoCredential mongoCredential = MongoCredential.createCredential(username, database, password.toCharArray());\nMongoClientOptions options = MongoClientOptions.builder()\n.writeConcern(WriteConcern.JOURNALED).build();\n\nMongoClient mongoClient = new MongoClient(new ServerAddress(\"host1\", 27017), Arrays.asList(mongoCredential), options);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4900086,"reputation":3091,"user_id":3948697,"accept_rate":67,"display_name":"Atul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684741098,"creation_date":1684741098,"answer_id":76303938,"question_id":54860650,"body_markdown":"If you are using **MongoDB Atlas**, then you have to give access to the DB for the given Role of a db user.\r\n\r\nThe issue is mainly because of the permissions not given to the user to access it.","title":"JAVA com.mongodb.MongoQueryException: Query failed with error code 13 and error message &#39;command find requires authentication&#39;","body":"<p>If you are using <strong>MongoDB Atlas</strong>, then you have to give access to the DB for the given Role of a db user.</p>\n<p>The issue is mainly because of the permissions not given to the user to access it.</p>\n"}],"owner":{"account_id":12800258,"reputation":77,"user_id":9261801,"display_name":"Deepak Aggarwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13433,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684741098,"creation_date":1551076284,"question_id":54860650,"body_markdown":"&gt; com.mongodb.MongoQueryException: Query failed with error code 13 and\r\n&gt; error message &#39;command find requires authentication&#39;\r\n\r\nHow to create a mongo client using a password in java.\r\n\r\nI know there was method like this:\r\n\r\n    public MongoClient(final ServerAddress addr, final List&lt;MongoCredential&gt; credentialsList);\r\n\r\nBut it is shown as deprecated, there is another method which requires MongoClientOptions:\r\n\r\n    public MongoClient(final ServerAddress addr, final MongoCredential credential, final MongoClientOptions options)\r\n\r\nBut I do not have any options to send. So, is there any way I can create mongo client in java using a password?","title":"JAVA com.mongodb.MongoQueryException: Query failed with error code 13 and error message &#39;command find requires authentication&#39;","body":"<blockquote>\n  <p>com.mongodb.MongoQueryException: Query failed with error code 13 and\n  error message 'command find requires authentication'</p>\n</blockquote>\n\n<p>How to create a mongo client using a password in java.</p>\n\n<p>I know there was method like this:</p>\n\n<pre><code>public MongoClient(final ServerAddress addr, final List&lt;MongoCredential&gt; credentialsList);\n</code></pre>\n\n<p>But it is shown as deprecated, there is another method which requires MongoClientOptions:</p>\n\n<pre><code>public MongoClient(final ServerAddress addr, final MongoCredential credential, final MongoClientOptions options)\n</code></pre>\n\n<p>But I do not have any options to send. So, is there any way I can create mongo client in java using a password?</p>\n"},{"tags":["java","sockets"],"comments":[{"owner":{"account_id":20059,"reputation":80086,"user_id":47550,"accept_rate":89,"display_name":"Paul Sasik"},"score":0,"creation_date":1298733951,"post_id":5127687,"comment_id":5751847,"body_markdown":"Your question has more to do with management of internet protocols and communications settings rather than programming. It would be better asked at ServerFault.com. Btw, your problem is multi-layered. It&#39;s fairly easy to get going on a home or even company network but when you get into the wild you have to account for firewalls, DNS, ISPs (which often do not allow server traffic) etc. If you want to code at the socket level, you will definitely have to learn TCP/IP inside out. No escaping it.","body":"Your question has more to do with management of internet protocols and communications settings rather than programming. It would be better asked at ServerFault.com. Btw, your problem is multi-layered. It&#39;s fairly easy to get going on a home or even company network but when you get into the wild you have to account for firewalls, DNS, ISPs (which often do not allow server traffic) etc. If you want to code at the socket level, you will definitely have to learn TCP/IP inside out. No escaping it."},{"owner":{"account_id":85749,"reputation":43318,"user_id":238884,"accept_rate":60,"display_name":"Michael Lorton"},"score":1,"creation_date":1298769841,"post_id":5127687,"comment_id":5755753,"body_markdown":"Regarding the strategy discussed in your edit.  There&#39;s a dead-easy way to get started: [Google App Engine](http://code.google.com/appengine/).  You have to learned a tiny bit about servlets and a tiny bit about Google-specific data stores, but total work should be less than an hour.","body":"Regarding the strategy discussed in your edit.  There&#39;s a dead-easy way to get started: <a href=\"http://code.google.com/appengine/\" rel=\"nofollow noreferrer\">Google App Engine</a>.  You have to learned a tiny bit about servlets and a tiny bit about Google-specific data stores, but total work should be less than an hour."},{"owner":{"account_id":259097,"reputation":7157,"user_id":541729,"accept_rate":83,"display_name":"Kritz"},"score":0,"creation_date":1298796785,"post_id":5127687,"comment_id":5757683,"body_markdown":"@Malvolio. Thanks, that sounds like a great idea. Would it be much more difficult if I create my own server that does this than using the google app engine?","body":"@Malvolio. Thanks, that sounds like a great idea. Would it be much more difficult if I create my own server that does this than using the google app engine?"},{"owner":{"account_id":85749,"reputation":43318,"user_id":238884,"accept_rate":60,"display_name":"Michael Lorton"},"score":1,"creation_date":1298798006,"post_id":5127687,"comment_id":5757798,"body_markdown":"The issue is, you need to find a host.  You have to find somebody with a data center who will let you use a computer.  There are a lot of commercial outfits out there who will do it for money, there are even some other (partially) free ones, including [Amazon Web Services](http://aws.amazon.com/), you could even set up your own data center, with just a static IP and an unused Linux box.  GAE is just the easiest, about an hour&#39;s work.  On AWS&#39;s free-tier Beanstalk service, probably two hours.  Those are the only ones I&#39;ve tried myself this month, but the others would probably be comparable.","body":"The issue is, you need to find a host.  You have to find somebody with a data center who will let you use a computer.  There are a lot of commercial outfits out there who will do it for money, there are even some other (partially) free ones, including <a href=\"http://aws.amazon.com/\" rel=\"nofollow noreferrer\">Amazon Web Services</a>, you could even set up your own data center, with just a static IP and an unused Linux box.  GAE is just the easiest, about an hour&#39;s work.  On AWS&#39;s free-tier Beanstalk service, probably two hours.  Those are the only ones I&#39;ve tried myself this month, but the others would probably be comparable."}],"answers":[{"comments":[{"owner":{"account_id":94218,"reputation":27823,"user_id":257356,"accept_rate":59,"display_name":"SyntaxT3rr0r"},"score":0,"creation_date":1298733728,"post_id":5127711,"comment_id":5751819,"body_markdown":"@Orbit: the OP states that he want to *&quot;transfer data (mostly simple commands)&quot;* while *scp* is meant to copy files.  I&#39;m not sure this is what the OP wants.","body":"@Orbit: the OP states that he want to <i>&quot;transfer data (mostly simple commands)&quot;</i> while <i>scp</i> is meant to copy files.  I&#39;m not sure this is what the OP wants."},{"owner":{"account_id":153959,"reputation":17661,"user_id":369591,"accept_rate":88,"display_name":"Brandon Frohbieter"},"score":0,"creation_date":1298733803,"post_id":5127711,"comment_id":5751829,"body_markdown":"Yes, but trying anyway without knowing what exactly he wants.","body":"Yes, but trying anyway without knowing what exactly he wants."},{"owner":{"account_id":20059,"reputation":80086,"user_id":47550,"accept_rate":89,"display_name":"Paul Sasik"},"score":0,"creation_date":1298734047,"post_id":5127711,"comment_id":5751862,"body_markdown":"His socket code already works so this question is more a matter of configuration rather than programming.","body":"His socket code already works so this question is more a matter of configuration rather than programming."},{"owner":{"account_id":20059,"reputation":80086,"user_id":47550,"accept_rate":89,"display_name":"Paul Sasik"},"score":0,"creation_date":1298734210,"post_id":5127711,"comment_id":5751890,"body_markdown":"There&#39;s a difference between what the OP thinks he wants and what he needs: In this case I think that the OP needs to figure out the vagaries of TCP/IP on the internet. He&#39;s already got his stuff working at home (LAN) and he&#39;s trying to move it to the public internet (WAN.) Johan really needs to understand what all needs to happen to enable such a move.","body":"There&#39;s a difference between what the OP thinks he wants and what he needs: In this case I think that the OP needs to figure out the vagaries of TCP/IP on the internet. He&#39;s already got his stuff working at home (LAN) and he&#39;s trying to move it to the public internet (WAN.) Johan really needs to understand what all needs to happen to enable such a move."},{"owner":{"account_id":153959,"reputation":17661,"user_id":369591,"accept_rate":88,"display_name":"Brandon Frohbieter"},"score":0,"creation_date":1298734291,"post_id":5127711,"comment_id":5751899,"body_markdown":"True this, I should have just ignored the last question within the question.","body":"True this, I should have just ignored the last question within the question."},{"owner":{"account_id":259097,"reputation":7157,"user_id":541729,"accept_rate":83,"display_name":"Kritz"},"score":0,"creation_date":1298734452,"post_id":5127711,"comment_id":5751919,"body_markdown":"I want to use it in a existing security program at home that I created. I want to be able to connect remotely to the program and then monitor and control certain aspects of the program.","body":"I want to use it in a existing security program at home that I created. I want to be able to connect remotely to the program and then monitor and control certain aspects of the program."},{"owner":{"account_id":259097,"reputation":7157,"user_id":541729,"accept_rate":83,"display_name":"Kritz"},"score":0,"creation_date":1298735609,"post_id":5127711,"comment_id":5752080,"body_markdown":"@Orbit: Yes, it is a Java program","body":"@Orbit: Yes, it is a Java program"}],"tags":[],"owner":{"account_id":153959,"reputation":17661,"user_id":369591,"accept_rate":88,"display_name":"Brandon Frohbieter"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1298733598,"creation_date":1298733598,"answer_id":5127711,"question_id":5127687,"body_markdown":"No need to write networking code for this, unless it really floats your boat. Take a look at SCP. http://amath.colorado.edu/computing/software/man/scp.html. There is a windows implementation where you can download putty (windows ssh client), and it is on most linux distributions. Alternatively, you could set up an FTP or SSH server on one or both of the machines.\r\n\r\n&quot;a fixed name for my computer that I can use instead of entering the IP address&quot; would be a domain name, these are purchasable online for a few bucks.","title":"How do I send data between two computers over the internet","body":"<p>No need to write networking code for this, unless it really floats your boat. Take a look at SCP. <a href=\"http://amath.colorado.edu/computing/software/man/scp.html\" rel=\"nofollow\">http://amath.colorado.edu/computing/software/man/scp.html</a>. There is a windows implementation where you can download putty (windows ssh client), and it is on most linux distributions. Alternatively, you could set up an FTP or SSH server on one or both of the machines.</p>\n\n<p>\"a fixed name for my computer that I can use instead of entering the IP address\" would be a domain name, these are purchasable online for a few bucks.</p>\n"},{"comments":[{"owner":{"account_id":259097,"reputation":7157,"user_id":541729,"accept_rate":83,"display_name":"Kritz"},"score":0,"creation_date":1298734639,"post_id":5127729,"comment_id":5751945,"body_markdown":"Thanks, comet technology sounds like an interesting approach. I think I&#39;ll take a look at that.","body":"Thanks, comet technology sounds like an interesting approach. I think I&#39;ll take a look at that."},{"owner":{"account_id":85749,"reputation":43318,"user_id":238884,"accept_rate":60,"display_name":"Michael Lorton"},"score":0,"creation_date":1298734952,"post_id":5127729,"comment_id":5751988,"body_markdown":"if you don&#39;t mind my saying so, the COMET approach is a subset of the more general solution of using an open proxy, and an unnecessarily complicated one.  COMET is great if you are stuck in a browser and *must* tunnel through HTTP, but that isn&#39;t the case here.","body":"if you don&#39;t mind my saying so, the COMET approach is a subset of the more general solution of using an open proxy, and an unnecessarily complicated one.  COMET is great if you are stuck in a browser and <i>must</i> tunnel through HTTP, but that isn&#39;t the case here."},{"owner":{"account_id":110651,"reputation":22074,"user_id":292712,"accept_rate":83,"display_name":"Jerome WAGNER"},"score":0,"creation_date":1298737690,"post_id":5127729,"comment_id":5752315,"body_markdown":"@Malvolio - you are right i restricted the problem to a browser based question.","body":"@Malvolio - you are right i restricted the problem to a browser based question."}],"tags":[],"owner":{"account_id":110651,"reputation":22074,"user_id":292712,"accept_rate":83,"display_name":"Jerome WAGNER"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1298733809,"creation_date":1298733809,"answer_id":5127729,"question_id":5127687,"body_markdown":"using a direct socket connection with a port like 3333 is usually complicated because different network configurations.\r\n\r\nfirewalls will make a pleasure preventing the connection, or killing it from time to time.\r\n\r\nmaintaining a 2-way connection can be a nighmare. the SIP protocol is struggling with this kind of problems.\r\n\r\nFor a simple application, i suggest you look into the [comet technology][1], where your clients can establish an http connection with a shared server. The server can then bridge commands between them.\r\n\r\nhtml5 will also bring the [websocket protocol][2] to the table.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Comet_%28programming%29\r\n  [2]: http://en.wikipedia.org/wiki/WebSockets","title":"How do I send data between two computers over the internet","body":"<p>using a direct socket connection with a port like 3333 is usually complicated because different network configurations.</p>\n\n<p>firewalls will make a pleasure preventing the connection, or killing it from time to time.</p>\n\n<p>maintaining a 2-way connection can be a nighmare. the SIP protocol is struggling with this kind of problems.</p>\n\n<p>For a simple application, i suggest you look into the <a href=\"http://en.wikipedia.org/wiki/Comet_%28programming%29\" rel=\"nofollow\">comet technology</a>, where your clients can establish an http connection with a shared server. The server can then bridge commands between them.</p>\n\n<p>html5 will also bring the <a href=\"http://en.wikipedia.org/wiki/WebSockets\" rel=\"nofollow\">websocket protocol</a> to the table.</p>\n"},{"comments":[{"owner":{"account_id":259097,"reputation":7157,"user_id":541729,"accept_rate":83,"display_name":"Kritz"},"score":0,"creation_date":1298735217,"post_id":5127790,"comment_id":5752029,"body_markdown":"Thanks, I checked and my IP address starts with 41. If I am not behind a NAT should the IP address that used work? How do I get my IP address &quot;within the Internet&quot;? Should I use DynDNS to accomplish this?","body":"Thanks, I checked and my IP address starts with 41. If I am not behind a NAT should the IP address that used work? How do I get my IP address &quot;within the Internet&quot;? Should I use DynDNS to accomplish this?"},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1298735785,"post_id":5127790,"comment_id":5752098,"body_markdown":"@Johan, if it starts with 41, then you are probably directly connected to the Internet. Did you compare the address returned by &quot;ipconfig&quot; to whatever whatismyip.com says? If they are the same, then you&#39;re definitely safe. You should use this address at the client side to connect. If you have firewall software, you may have to disable it or configure to open the port used. DynDNS is not used to obtain IP addresses, it just registers a name for you, and a DynDNS client updates this name to point to your IP address each time it changes.","body":"@Johan, if it starts with 41, then you are probably directly connected to the Internet. Did you compare the address returned by &quot;ipconfig&quot; to whatever whatismyip.com says? If they are the same, then you&#39;re definitely safe. You should use this address at the client side to connect. If you have firewall software, you may have to disable it or configure to open the port used. DynDNS is not used to obtain IP addresses, it just registers a name for you, and a DynDNS client updates this name to point to your IP address each time it changes."},{"owner":{"account_id":259097,"reputation":7157,"user_id":541729,"accept_rate":83,"display_name":"Kritz"},"score":0,"creation_date":1298737437,"post_id":5127790,"comment_id":5752276,"body_markdown":"@Sergey, yes they are the same. I&#39;ll try a few other options, it could be the firewall or something like that.","body":"@Sergey, yes they are the same. I&#39;ll try a few other options, it could be the firewall or something like that."},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1298738120,"post_id":5127790,"comment_id":5752373,"body_markdown":"@Johan, what error are you getting anyway when trying to connect?","body":"@Johan, what error are you getting anyway when trying to connect?"},{"owner":{"account_id":259097,"reputation":7157,"user_id":541729,"accept_rate":83,"display_name":"Kritz"},"score":0,"creation_date":1298738483,"post_id":5127790,"comment_id":5752416,"body_markdown":"@Sergey. After a few seconds a get an IOException on the client side. I edited my original question, if you don&#39;t mind, can you take a look at that and let me know what you think. Thanks!","body":"@Sergey. After a few seconds a get an IOException on the client side. I edited my original question, if you don&#39;t mind, can you take a look at that and let me know what you think. Thanks!"},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1298740446,"post_id":5127790,"comment_id":5752694,"body_markdown":"@Johan, what does the IOException say? Connection timed out, rejected, etc.? I&#39;ve seen your edited question, but I have never tried something like that, so I can&#39;t give you any good advice here. It is certainly possible, but I don&#39;t know if it can be done for free and also how reliable and secure it would be, not to mention other possible problems we have no idea of.","body":"@Johan, what does the IOException say? Connection timed out, rejected, etc.? I&#39;ve seen your edited question, but I have never tried something like that, so I can&#39;t give you any good advice here. It is certainly possible, but I don&#39;t know if it can be done for free and also how reliable and secure it would be, not to mention other possible problems we have no idea of."},{"owner":{"account_id":259097,"reputation":7157,"user_id":541729,"accept_rate":83,"display_name":"Kritz"},"score":0,"creation_date":1298755970,"post_id":5127790,"comment_id":5754618,"body_markdown":"The message that I get is: &quot;The operation timed out&quot;, not very helpful.","body":"The message that I get is: &quot;The operation timed out&quot;, not very helpful."},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1298788067,"post_id":5127790,"comment_id":5757064,"body_markdown":"@Johan, quite helpful in fact. It means that the client didn&#39;t get any reply, positive or negative. Could be because of a firewall or because of some network misconfiguration. Did you try to ping the server from the client?","body":"@Johan, quite helpful in fact. It means that the client didn&#39;t get any reply, positive or negative. Could be because of a firewall or because of some network misconfiguration. Did you try to ping the server from the client?"},{"owner":{"account_id":259097,"reputation":7157,"user_id":541729,"accept_rate":83,"display_name":"Kritz"},"score":0,"creation_date":1298796571,"post_id":5127790,"comment_id":5757666,"body_markdown":"I&#39;ll try to ping the server, but it also seems to me that it is some sort of network setup error.","body":"I&#39;ll try to ping the server, but it also seems to me that it is some sort of network setup error."}],"tags":[],"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"comment_count":9,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1298735929,"creation_date":1298734479,"answer_id":5127790,"question_id":5127687,"body_markdown":"&gt; I got the IP address by right-clicking\r\n&gt; on the connection, status, support.\r\n\r\nNot sure about the &quot;support&quot; part, and I&#39;m not on a Windows machine right now, but I think that the most easy and reliable way to figure out the IP address on Windows is to run &quot;ipconfig&quot; from the command line (Win+R, type &quot;cmd&quot;, then &quot;ipconfig&quot; in the opened window). This, of course, should be done on the server side.\r\n\r\nHowever, the problem is that depending on the ISP your IP address may be not within the Internet, but within a local ISP network (so-called NAT). In this case, you&#39;ll need to use some sort of black magic called [TCP hole punching][1], which is very complicated and not guaranteed to work. You can figure out if your address is local or not by looking at it. For IPv4 local addresses are almost always like 10.x.x.x or 172.16-31.x.x, or 192.168.x.x. Don&#39;t know about IPv6.\r\n\r\nYou can also check your IP by visiting one of the special sites like [www.whatismyip.com][2]. If the address they tell you is different from the one you see by running &quot;ipconfig&quot; or looking at the connection properties, then you&#39;re almost certainly behind a NAT (or your ISP is using a transparent proxy, but that&#39;s rare).\r\n\r\nIf you are directly connected to Internet (no local addresses and NAT), then you should also check if you have any firewall software and either to configure it to allow connections to the port you use, or make sure it&#39;s in &quot;ask the user&quot; (and not &quot;silently reject&quot;) mode, or just disable it completely (this may put your computer at risk, especially if there is no anti-virus software or the system isn&#39;t up-to-date).\r\n\r\n&gt; Also, is it possible to get a fixed\r\n&gt; name for my computer that I can use\r\n&gt; instead of entering the IP address, as\r\n&gt; this changes every time I connect to\r\n&gt; the internet using my mobile phone?\r\n\r\nYes, it&#39;s possible. There is the thing called DynDNS, and there are DynDNS providers like [DynDNS.com][3], where you can get a third-level domain name for free (like mycoolpc.dyndns.org). You&#39;ll have to install and configure some DynDNS client on your PC that will tell the DynDNS server its new IP each time each changed. I don&#39;t know anything about particular clients to use because I&#39;m using the one built-in in my home router.\r\n\r\n\r\n  [1]: http://www.brynosaurus.com/pub/net/p2pnat/\r\n  [2]: http://www.whatismyip.com/\r\n  [3]: http://www.dyndns.com/","title":"How do I send data between two computers over the internet","body":"<blockquote>\n  <p>I got the IP address by right-clicking\n  on the connection, status, support.</p>\n</blockquote>\n\n<p>Not sure about the \"support\" part, and I'm not on a Windows machine right now, but I think that the most easy and reliable way to figure out the IP address on Windows is to run \"ipconfig\" from the command line (Win+R, type \"cmd\", then \"ipconfig\" in the opened window). This, of course, should be done on the server side.</p>\n\n<p>However, the problem is that depending on the ISP your IP address may be not within the Internet, but within a local ISP network (so-called NAT). In this case, you'll need to use some sort of black magic called <a href=\"http://www.brynosaurus.com/pub/net/p2pnat/\" rel=\"nofollow\">TCP hole punching</a>, which is very complicated and not guaranteed to work. You can figure out if your address is local or not by looking at it. For IPv4 local addresses are almost always like 10.x.x.x or 172.16-31.x.x, or 192.168.x.x. Don't know about IPv6.</p>\n\n<p>You can also check your IP by visiting one of the special sites like <a href=\"http://www.whatismyip.com/\" rel=\"nofollow\">www.whatismyip.com</a>. If the address they tell you is different from the one you see by running \"ipconfig\" or looking at the connection properties, then you're almost certainly behind a NAT (or your ISP is using a transparent proxy, but that's rare).</p>\n\n<p>If you are directly connected to Internet (no local addresses and NAT), then you should also check if you have any firewall software and either to configure it to allow connections to the port you use, or make sure it's in \"ask the user\" (and not \"silently reject\") mode, or just disable it completely (this may put your computer at risk, especially if there is no anti-virus software or the system isn't up-to-date).</p>\n\n<blockquote>\n  <p>Also, is it possible to get a fixed\n  name for my computer that I can use\n  instead of entering the IP address, as\n  this changes every time I connect to\n  the internet using my mobile phone?</p>\n</blockquote>\n\n<p>Yes, it's possible. There is the thing called DynDNS, and there are DynDNS providers like <a href=\"http://www.dyndns.com/\" rel=\"nofollow\">DynDNS.com</a>, where you can get a third-level domain name for free (like mycoolpc.dyndns.org). You'll have to install and configure some DynDNS client on your PC that will tell the DynDNS server its new IP each time each changed. I don't know anything about particular clients to use because I'm using the one built-in in my home router.</p>\n"},{"comments":[{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1298736344,"post_id":5127804,"comment_id":5752159,"body_markdown":"It depends on the ISP how expensive a static IP address is. I have two connections from different ISPs, one with static IP for about $2/month, another one with semi-static IP for free. &quot;Semi-static&quot; means it isn&#39;t guaranteed to be static, but only really changes when there are serious changes in the ISP software/hardware, and last time it happened a few years ago.","body":"It depends on the ISP how expensive a static IP address is. I have two connections from different ISPs, one with static IP for about $2/month, another one with semi-static IP for free. &quot;Semi-static&quot; means it isn&#39;t guaranteed to be static, but only really changes when there are serious changes in the ISP software/hardware, and last time it happened a few years ago."}],"tags":[],"owner":{"account_id":85749,"reputation":43318,"user_id":238884,"accept_rate":60,"display_name":"Michael Lorton"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1684740955,"creation_date":1298734647,"answer_id":5127804,"question_id":5127687,"body_markdown":"When you connected to the server that serves StackOverflow, did you type in the IP address?  It&#39;s 64.34.119.12, if that jogs your memory.\r\n\r\nYou probably didn&#39;t.  You probably typed &quot;stackoverflow.com&quot;.  There&#39;s a huge, complex, clever, and [in some ways][1], poorly implemented system called [DNS][2] that translates sensible and human-readable names into IP addresses.\r\n\r\nOne problem with DNS, though, is you need a &quot;static IP&quot;, which is exactly what it sounds like: an IP address that doesn&#39;t change, which is exactly what you don&#39;t have.\r\n\r\nSo, what can you do?\r\n\r\n 1. You can buy a static IP account from your ISP (pretty expensive)\r\n 2. You can use some proxy out in the Internet (a machine that *does* have a static IP and is willing to bounce your packets back and forth -- I&#39;m not aware of any service\\* that does this for you; you could write one and put it up on Amazon Web Services or Google App Engine, both of which would be free at your level of usage, but they&#39;d be slow, since every packet trying to cross your living room would have have to go via some data-center in Virginia).\r\n 3. You can keep doing what you&#39;re doing, looking in the net-configuration of your machine.\r\n 4. You could speed (3) up a little by having your server program look up its own IP address and print it out where you could see it and type it into the server by hand.\r\n 5. You can use DynDNS, as Sergey mentioned (this is the &quot;right&quot; solution, in that it&#39;s very general, it just might be a little complicated to set up)\r\n 6. You can use [multi-casting][3].\r\n\r\nMulti-casting is an interesting solution, and it may work for you.  The idea is, when your server starts up, it announces to the net, &quot;Here I am, I&#39;m providing X server, here&#39;s my IP address, talk to me.&quot;  The problem is, a multi-cast won&#39;t leave your living room.  Obviously, if every multi-cast were spread to every computer on the Internet, the whole thing would collapse, so your router will ignore, and not route, multi-cast packets.  That may or may not be a deal-breaker for you.  **EDIT** Re-reading your question, I see it *is* a deal-breaker for you.  I&#39;d go with #5, but be aware there may be routing issues (address translations that prevent a server from knowing the address that other computers can find it at) or fire-wall issues (that is, your ISP may prevent your server from receiving incoming packets even if the address is correct).\r\n\r\n\r\n  [1]: http://www.h-online.com/security/news/item/Massive-DNS-security-problem-endangers-the-internet-736419.html\r\n  [2]: http://en.wikipedia.org/wiki/Domain_Name_System\r\n  [3]: http://en.wikipedia.org/wiki/IP_multicast\r\n\r\n\\* in the dozen odd years since I wrote this reply, several such services have arisen, including Ngrok, Localtunnel, Serveo, Teleconsole, and Pagekite.","title":"How do I send data between two computers over the internet","body":"<p>When you connected to the server that serves StackOverflow, did you type in the IP address?  It's 64.34.119.12, if that jogs your memory.</p>\n<p>You probably didn't.  You probably typed &quot;stackoverflow.com&quot;.  There's a huge, complex, clever, and <a href=\"http://www.h-online.com/security/news/item/Massive-DNS-security-problem-endangers-the-internet-736419.html\" rel=\"nofollow noreferrer\">in some ways</a>, poorly implemented system called <a href=\"http://en.wikipedia.org/wiki/Domain_Name_System\" rel=\"nofollow noreferrer\">DNS</a> that translates sensible and human-readable names into IP addresses.</p>\n<p>One problem with DNS, though, is you need a &quot;static IP&quot;, which is exactly what it sounds like: an IP address that doesn't change, which is exactly what you don't have.</p>\n<p>So, what can you do?</p>\n<ol>\n<li>You can buy a static IP account from your ISP (pretty expensive)</li>\n<li>You can use some proxy out in the Internet (a machine that <em>does</em> have a static IP and is willing to bounce your packets back and forth -- I'm not aware of any service* that does this for you; you could write one and put it up on Amazon Web Services or Google App Engine, both of which would be free at your level of usage, but they'd be slow, since every packet trying to cross your living room would have have to go via some data-center in Virginia).</li>\n<li>You can keep doing what you're doing, looking in the net-configuration of your machine.</li>\n<li>You could speed (3) up a little by having your server program look up its own IP address and print it out where you could see it and type it into the server by hand.</li>\n<li>You can use DynDNS, as Sergey mentioned (this is the &quot;right&quot; solution, in that it's very general, it just might be a little complicated to set up)</li>\n<li>You can use <a href=\"http://en.wikipedia.org/wiki/IP_multicast\" rel=\"nofollow noreferrer\">multi-casting</a>.</li>\n</ol>\n<p>Multi-casting is an interesting solution, and it may work for you.  The idea is, when your server starts up, it announces to the net, &quot;Here I am, I'm providing X server, here's my IP address, talk to me.&quot;  The problem is, a multi-cast won't leave your living room.  Obviously, if every multi-cast were spread to every computer on the Internet, the whole thing would collapse, so your router will ignore, and not route, multi-cast packets.  That may or may not be a deal-breaker for you.  <strong>EDIT</strong> Re-reading your question, I see it <em>is</em> a deal-breaker for you.  I'd go with #5, but be aware there may be routing issues (address translations that prevent a server from knowing the address that other computers can find it at) or fire-wall issues (that is, your ISP may prevent your server from receiving incoming packets even if the address is correct).</p>\n<p>* in the dozen odd years since I wrote this reply, several such services have arisen, including Ngrok, Localtunnel, Serveo, Teleconsole, and Pagekite.</p>\n"}],"owner":{"account_id":259097,"reputation":7157,"user_id":541729,"accept_rate":83,"display_name":"Kritz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30026,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":5127804,"answer_count":4,"score":10,"last_activity_date":1684740955,"creation_date":1298733260,"question_id":5127687,"body_markdown":"I have been struggling with this for the entire day now, I hope somebody can help me with this.\r\n\r\nMy problem is fairly simple: I wish to transfer data (mostly simple commands) from one PC to another over the internet. \r\n\r\nI have been able to achieve this using sockets in Java when both computers are connected to my home router. I then connected both computers to the internet using two different mobile phones and attempted to transmit the data again. I used the mobile phones as this provides a direct route to the internet and if I use my router I have to set up port forwarding, at least, that is how I understand it.\r\n\r\nI think the problem lies in the method that I set up the client socket. I used: \r\n\r\n    Socket kkSocket = new Socket(ipAddress, 3333);\r\n\r\nwhere ipAddress is the IP address of the computer running the server. I got the IP address by right-clicking on the connection, status, support. Is that the correct IP address to use or where can I obtain the address of the server? Also, is it possible to get a fixed name for my computer that I can use instead of entering the IP address, as this changes every time I connect to the internet using my mobile phone?\r\n\r\nAlternatively, are there better methods to solving my problem such as using http, and if so, where can I find more information about this?\r\n\r\n**EDIT:**\r\nWould it be possible to have the server program running on a server on the internet somewhere. My original server would then be a client that send information to this server. This server would then pass this information to my original client and vice versa. That way, the IP address of my computer won&#39;t matter, as I only need to know the address of the server hosted somewhere on the web. Does this seem like a better solution? Where do I begin implementing such a solution? \r\n\r\nThanks!\r\n\r\n","title":"How do I send data between two computers over the internet","body":"<p>I have been struggling with this for the entire day now, I hope somebody can help me with this.</p>\n\n<p>My problem is fairly simple: I wish to transfer data (mostly simple commands) from one PC to another over the internet. </p>\n\n<p>I have been able to achieve this using sockets in Java when both computers are connected to my home router. I then connected both computers to the internet using two different mobile phones and attempted to transmit the data again. I used the mobile phones as this provides a direct route to the internet and if I use my router I have to set up port forwarding, at least, that is how I understand it.</p>\n\n<p>I think the problem lies in the method that I set up the client socket. I used: </p>\n\n<pre><code>Socket kkSocket = new Socket(ipAddress, 3333);\n</code></pre>\n\n<p>where ipAddress is the IP address of the computer running the server. I got the IP address by right-clicking on the connection, status, support. Is that the correct IP address to use or where can I obtain the address of the server? Also, is it possible to get a fixed name for my computer that I can use instead of entering the IP address, as this changes every time I connect to the internet using my mobile phone?</p>\n\n<p>Alternatively, are there better methods to solving my problem such as using http, and if so, where can I find more information about this?</p>\n\n<p><strong>EDIT:</strong>\nWould it be possible to have the server program running on a server on the internet somewhere. My original server would then be a client that send information to this server. This server would then pass this information to my original client and vice versa. That way, the IP address of my computer won't matter, as I only need to know the address of the server hosted somewhere on the web. Does this seem like a better solution? Where do I begin implementing such a solution? </p>\n\n<p>Thanks!</p>\n"},{"tags":["java","logging","log4j2","spring-logback","spring-boot-2"],"comments":[{"owner":{"account_id":2892776,"reputation":3221,"user_id":2481153,"display_name":"HungNM2"},"score":0,"creation_date":1624774728,"post_id":61620495,"comment_id":120445855,"body_markdown":"the same question:  https://stackoverflow.com/questions/24652128/how-to-modify-log4j-jsonlayout-field-names/68148523#68148523","body":"the same question:  <a href=\"https://stackoverflow.com/questions/24652128/how-to-modify-log4j-jsonlayout-field-names/68148523#68148523\" title=\"how to modify log4j jsonlayout field names\">stackoverflow.com/questions/24652128/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":8146898,"reputation":453,"user_id":6135309,"display_name":"Ravikumar"},"score":1,"creation_date":1588746838,"post_id":61622284,"comment_id":109013355,"body_markdown":"thanks, about solution gets **JSON** structure with _**PatternLayout**_ but is there any possibility to define required attribute or remove unwanted attribute with _**JsonLayout**_ ?","body":"thanks, about solution gets <b>JSON</b> structure with <i><b>PatternLayout</b></i> but is there any possibility to define required attribute or remove unwanted attribute with <i><b>JsonLayout</b></i> ?"},{"owner":{"account_id":16580238,"reputation":263,"user_id":11981028,"display_name":"Han"},"score":0,"creation_date":1588747374,"post_id":61622284,"comment_id":109013548,"body_markdown":"@Ravikumar You can define `&lt;pattern&gt;define here&lt;/pattern&gt;` I attached link at my answer. **The parameter are described at here. Find Patterns at Pattern Layout.**","body":"@Ravikumar You can define <code>&lt;pattern&gt;define here&lt;&#47;pattern&gt;</code> I attached link at my answer. <b>The parameter are described at here. Find Patterns at Pattern Layout.</b>"},{"owner":{"account_id":8146898,"reputation":453,"user_id":6135309,"display_name":"Ravikumar"},"score":0,"creation_date":1588750186,"post_id":61622284,"comment_id":109014778,"body_markdown":"**your the solution is perfectly okay**, which brings me logs in JSON Format. But here we are using _pattern_ inside _**PatterLayout**_ to bring JSON format in logs its totally fine. But Slf4j2 supports JSON format by default in _**JsonLayout**_ with default attributes like _timeMillis_, _endOfBatch_ and so on. so here how can we limit / remove default attributes in _**JsonLayout**_. So is that possible with _**JsonLayout**_ ?.","body":"<b>your the solution is perfectly okay</b>, which brings me logs in JSON Format. But here we are using <i>pattern</i> inside <i><b>PatterLayout</b></i> to bring JSON format in logs its totally fine. But Slf4j2 supports JSON format by default in <i><b>JsonLayout</b></i> with default attributes like <i>timeMillis</i>, <i>endOfBatch</i> and so on. so here how can we limit / remove default attributes in <i><b>JsonLayout</b></i>. So is that possible with <i><b>JsonLayout</b></i> ?."},{"owner":{"account_id":16580238,"reputation":263,"user_id":11981028,"display_name":"Han"},"score":0,"creation_date":1588759425,"post_id":61622284,"comment_id":109019680,"body_markdown":"@Ravikumar In my case, I only use `&lt;PatternLayout&gt;&lt;pattern&gt;...&lt;/pattern&gt;&lt;/PatternLayout&gt;` and print log well. `&lt;pattern&gt;{&quot;level&quot;:&quot;%p&quot;,&quot;loggerName&quot;:&quot;%c&quot;}&lt;/pattern&gt;` print `{&quot;level&quot;:&quot;INFO&quot;,&quot;loggerName&quot;:&quot;com.test.LogTest&quot;}`","body":"@Ravikumar In my case, I only use <code>&lt;PatternLayout&gt;&lt;pattern&gt;...&lt;&#47;pattern&gt;&lt;&#47;PatternLayout&gt;</code> and print log well. <code>&lt;pattern&gt;{&quot;level&quot;:&quot;%p&quot;,&quot;loggerName&quot;:&quot;%c&quot;}&lt;&#47;pattern&gt;</code> print <code>{&quot;level&quot;:&quot;INFO&quot;,&quot;loggerName&quot;:&quot;com.test.LogTest&quot;}</code>"},{"owner":{"account_id":16580238,"reputation":263,"user_id":11981028,"display_name":"Han"},"score":0,"creation_date":1588806688,"post_id":61622284,"comment_id":109045458,"body_markdown":"@Ravikumar Good luck!","body":"@Ravikumar Good luck!"}],"tags":[],"owner":{"account_id":16580238,"reputation":263,"user_id":11981028,"display_name":"Han"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1588709883,"creation_date":1588709883,"answer_id":61622284,"question_id":61620495,"body_markdown":"If you want to log only `level` and `loggerName` than customize like below in your configuration file.\r\n```\r\n...\r\n&lt;PatternLayout&gt;\r\n    &lt;pattern&gt;{&quot;level&quot;:&quot;%p&quot;,&quot;loggerName&quot;:&quot;%c&quot;}&lt;/pattern&gt;\r\n&lt;/PatternLayout&gt;\r\n...\r\n```\r\n\r\nThe parameter are described at [here](https://logging.apache.org/log4j/2.x/manual/layouts.html). Find `Patterns` at `Pattern Layout`.","title":"How to customize or remove default attributes in Log4j2 - JSON Layout","body":"<p>If you want to log only <code>level</code> and <code>loggerName</code> than customize like below in your configuration file.</p>\n\n<pre><code>...\n&lt;PatternLayout&gt;\n    &lt;pattern&gt;{\"level\":\"%p\",\"loggerName\":\"%c\"}&lt;/pattern&gt;\n&lt;/PatternLayout&gt;\n...\n</code></pre>\n\n<p>The parameter are described at <a href=\"https://logging.apache.org/log4j/2.x/manual/layouts.html\" rel=\"nofollow noreferrer\">here</a>. Find <code>Patterns</code> at <code>Pattern Layout</code>.</p>\n"},{"tags":[],"owner":{"account_id":15375039,"reputation":508,"user_id":11092008,"display_name":"Shapur"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684740744,"creation_date":1684740028,"answer_id":76303815,"question_id":61620495,"body_markdown":"For this purpose, I slightly changed the `JSONLayout` class and created the new `JSONLayoutV2` class. \r\nYou can use the `JSONLayoutV2` class to customize these attributes until the `JSONLayout` class is modified.\r\n\r\n\r\n    &lt;JSONLayoutV2 objectMessageAsJsonObject=&quot;true&quot; thread=&quot;true&quot; threadId=&quot;true&quot; eventEol=&quot;true&quot; complete=&quot;true&quot; compact=&quot;false&quot;  properties=&quot;true&quot; /&gt;\r\n\r\n`JSONLayoutV2` class:\r\n\r\n    package org.apache.logging.log4j.core.layout;\r\n    \r\n    import com.fasterxml.jackson.databind.ObjectWriter;\r\n    import com.fasterxml.jackson.databind.ser.impl.SimpleBeanPropertyFilter;\r\n    import com.fasterxml.jackson.databind.ser.impl.SimpleFilterProvider;\r\n    import org.apache.logging.log4j.core.LogEvent;\r\n    import org.apache.logging.log4j.core.config.Configuration;\r\n    import org.apache.logging.log4j.core.config.DefaultConfiguration;\r\n    import org.apache.logging.log4j.core.config.plugins.Plugin;\r\n    import org.apache.logging.log4j.core.config.plugins.PluginBuilderAttribute;\r\n    import org.apache.logging.log4j.core.config.plugins.PluginBuilderFactory;\r\n    import org.apache.logging.log4j.core.config.plugins.PluginElement;\r\n    import org.apache.logging.log4j.core.impl.Log4jLogEvent;\r\n    import org.apache.logging.log4j.core.util.KeyValuePair;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.Writer;\r\n    import java.nio.charset.Charset;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.util.HashMap;\r\n    import java.util.HashSet;\r\n    import java.util.Map;\r\n    import java.util.Set;\r\n    \r\n    \r\n    @Plugin(\r\n            name = &quot;JsonLayoutV2&quot;,\r\n            category = &quot;Core&quot;,\r\n            elementType = &quot;layout&quot;,\r\n            printObject = true\r\n    )\r\n    public final class JsonLayoutV2 extends AbstractJacksonLayout {\r\n        private static final String DEFAULT_FOOTER = &quot;]&quot;;\r\n        private static final String DEFAULT_HEADER = &quot;[&quot;;\r\n        static final String CONTENT_TYPE = &quot;application/json&quot;;\r\n    \r\n        /** @deprecated */\r\n        @Deprecated\r\n        protected JsonLayoutV2(final Configuration config, final boolean locationInfo, final boolean properties, final boolean encodeThreadContextAsList, final boolean complete, final boolean compact, final boolean eventEol, final String endOfLine, final String headerPattern, final String footerPattern, final Charset charset, final boolean includeStacktrace) {\r\n            super(config, (new JacksonFactory.JSON(encodeThreadContextAsList, includeStacktrace, false, false)).newWriter(locationInfo, properties, compact), charset, compact, complete, eventEol, endOfLine, PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(headerPattern).setDefaultPattern(&quot;[&quot;).build(), PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(footerPattern).setDefaultPattern(&quot;]&quot;).build(), false, (KeyValuePair[])null);\r\n        }\r\n    \r\n        private JsonLayoutV2(final Configuration config, final boolean locationInfo, final boolean properties, final boolean encodeThreadContextAsList, final boolean complete, final boolean compact, final boolean eventEol, final String endOfLine, final String headerPattern, final String footerPattern, final Charset charset, final boolean includeStacktrace, final boolean stacktraceAsString, final boolean includeNullDelimiter, final boolean includeTimeMillis, final KeyValuePair[] additionalFields, final boolean objectMessageAsJsonObject,\r\n                             final boolean instant, final boolean loggerFqcn, final boolean endOfBatch, final boolean loggerName, final boolean thread, final boolean threadId, final boolean threadPriority) {\r\n    //        super(config, (new JacksonFactory.JSON(encodeThreadContextAsList, includeStacktrace, stacktraceAsString, objectMessageAsJsonObject)).newWriter(locationInfo, properties, compact, includeTimeMillis), charset, compact, complete, eventEol, endOfLine, PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(headerPattern).setDefaultPattern(&quot;[&quot;).build(), PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(footerPattern).setDefaultPattern(&quot;]&quot;).build(), includeNullDelimiter, additionalFields);\r\n            super(config, newWriter((new JacksonFactory.JSON(encodeThreadContextAsList, includeStacktrace, stacktraceAsString, objectMessageAsJsonObject)), locationInfo, properties, compact, includeTimeMillis,\r\n                    instant,  loggerFqcn,  endOfBatch,  loggerName,  thread,  threadId,  threadPriority), charset, compact, complete, eventEol, endOfLine, PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(headerPattern).setDefaultPattern(&quot;[&quot;).build(), PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(footerPattern).setDefaultPattern(&quot;]&quot;).build(), includeNullDelimiter, additionalFields);\r\n        }\r\n    \r\n        static ObjectWriter newWriter(JacksonFactory.JSON jacksonFactory, final boolean locationInfo, final boolean properties, final boolean compact, final boolean includeMillis,\r\n                                      final boolean instant, final boolean loggerFqcn, final boolean endOfBatch, final boolean loggerName, final boolean thread, final boolean threadId, final boolean threadPriority) {\r\n            SimpleFilterProvider filters = new SimpleFilterProvider();\r\n            Set&lt;String&gt; except = new HashSet(3);\r\n            if (!locationInfo) {\r\n                except.add(jacksonFactory.getPropertNameForSource());\r\n            }\r\n    \r\n            if (!properties) {\r\n                except.add(jacksonFactory.getPropertNameForContextMap());\r\n            }\r\n    \r\n            if (includeMillis) {\r\n                except.add(jacksonFactory.getPropertyNameForInstant());\r\n            } else {\r\n                except.add(jacksonFactory.getPropertyNameForTimeMillis());\r\n            }\r\n    \r\n            if (!instant)           except.add(&quot;instant&quot;);\r\n            if (!loggerFqcn)        except.add(&quot;loggerFqcn&quot;);\r\n            if (!endOfBatch)        except.add(&quot;endOfBatch&quot;);\r\n            if (!loggerName)        except.add(&quot;loggerName&quot;);\r\n            if (!thread)            except.add(&quot;thread&quot;);\r\n            if (!threadId)          except.add(&quot;threadId&quot;);\r\n            if (!threadPriority)    except.add(&quot;threadPriority&quot;);\r\n    \r\n            except.add(jacksonFactory.getPropertNameForNanoTime());\r\n            filters.addFilter(Log4jLogEvent.class.getName(), SimpleBeanPropertyFilter.serializeAllExcept(except));\r\n            ObjectWriter writer = jacksonFactory.newObjectMapper().writer(compact ? jacksonFactory.newCompactPrinter() : jacksonFactory.newPrettyPrinter());\r\n            return writer.with(filters);\r\n        }\r\n    \r\n        public byte[] getHeader() {\r\n            if (!this.complete) {\r\n                return null;\r\n            } else {\r\n                StringBuilder buf = new StringBuilder();\r\n                String str = this.serializeToString(this.getHeaderSerializer());\r\n                if (str != null) {\r\n                    buf.append(str);\r\n                }\r\n    \r\n                buf.append(this.eol);\r\n                return this.getBytes(buf.toString());\r\n            }\r\n        }\r\n    \r\n        public byte[] getFooter() {\r\n            if (!this.complete) {\r\n                return null;\r\n            } else {\r\n                StringBuilder buf = new StringBuilder();\r\n                buf.append(this.eol);\r\n                String str = this.serializeToString(this.getFooterSerializer());\r\n                if (str != null) {\r\n                    buf.append(str);\r\n                }\r\n    \r\n                buf.append(this.eol);\r\n                return this.getBytes(buf.toString());\r\n            }\r\n        }\r\n    \r\n        public Map&lt;String, String&gt; getContentFormat() {\r\n            Map&lt;String, String&gt; result = new HashMap();\r\n            result.put(&quot;version&quot;, &quot;2.0&quot;);\r\n            return result;\r\n        }\r\n    \r\n        public String getContentType() {\r\n            return &quot;application/json; charset=&quot; + this.getCharset();\r\n        }\r\n    \r\n        /** @deprecated */\r\n    //    @Deprecated\r\n    //    public static JsonLayoutV2 createLayout(final Configuration config, final boolean locationInfo, final boolean properties, final boolean propertiesAsList, final boolean complete, final boolean compact, final boolean eventEol, final String headerPattern, final String footerPattern, final Charset charset, final boolean includeStacktrace) {\r\n    //        boolean encodeThreadContextAsList = properties &amp;&amp; propertiesAsList;\r\n    //        return new JsonLayoutV2(config, locationInfo, properties, encodeThreadContextAsList, complete, compact, eventEol, (String)null, headerPattern, footerPattern, charset, includeStacktrace, false, false, false, (KeyValuePair[])null, false);\r\n    //    }\r\n    \r\n        @PluginBuilderFactory\r\n        public static &lt;B extends Builder&lt;B&gt;&gt; B newBuilder() {\r\n            return (B) new Builder();\r\n        }\r\n    \r\n        public static JsonLayoutV2 createDefaultLayout() {\r\n            return new JsonLayoutV2(new DefaultConfiguration(), false, false, false, false, false, false, (String)null, &quot;[&quot;, &quot;]&quot;, StandardCharsets.UTF_8, true, false, false, false, (KeyValuePair[])null, false,\r\n                    false,false,false,false,false,false,false);\r\n        }\r\n    \r\n        public void toSerializable(final LogEvent event, final Writer writer) throws IOException {\r\n            if (this.complete &amp;&amp; this.eventCount &gt; 0L) {\r\n                writer.append(&quot;, &quot;);\r\n            }\r\n    \r\n            super.toSerializable(event, writer);\r\n        }\r\n    \r\n        public static class Builder&lt;B extends Builder&lt;B&gt;&gt; extends AbstractJacksonLayout.Builder&lt;B&gt; implements org.apache.logging.log4j.core.util.Builder&lt;JsonLayoutV2&gt; {\r\n            @PluginBuilderAttribute\r\n            private boolean propertiesAsList;\r\n            @PluginBuilderAttribute\r\n            private boolean objectMessageAsJsonObject;\r\n            @PluginElement(&quot;AdditionalField&quot;)\r\n            private KeyValuePair[] additionalFields;\r\n    \r\n            @PluginBuilderAttribute\r\n            private boolean instant;\r\n    \r\n            @PluginBuilderAttribute\r\n            private boolean loggerFqcn;\r\n    \r\n            @PluginBuilderAttribute\r\n            private boolean endOfBatch;\r\n    \r\n            @PluginBuilderAttribute\r\n            private boolean loggerName;\r\n    \r\n            @PluginBuilderAttribute\r\n            private boolean thread;\r\n    \r\n            @PluginBuilderAttribute\r\n            private boolean threadId;\r\n    \r\n            @PluginBuilderAttribute\r\n            private boolean threadPriority;\r\n    \r\n            public Builder() {\r\n                this.setCharset(StandardCharsets.UTF_8);\r\n            }\r\n    \r\n            public JsonLayoutV2 build() {\r\n                boolean encodeThreadContextAsList = this.isProperties() &amp;&amp; this.propertiesAsList;\r\n                String headerPattern = this.toStringOrNull(this.getHeader());\r\n                String footerPattern = this.toStringOrNull(this.getFooter());\r\n                return new JsonLayoutV2(this.getConfiguration(), this.isLocationInfo(), this.isProperties(), encodeThreadContextAsList, this.isComplete(), this.isCompact(), this.getEventEol(), this.getEndOfLine(), headerPattern, footerPattern, this.getCharset(), this.isIncludeStacktrace(), this.isStacktraceAsString(), this.isIncludeNullDelimiter(), this.isIncludeTimeMillis(), this.getAdditionalFields(), this.getObjectMessageAsJsonObject(),\r\n                        instant, loggerFqcn, endOfBatch, loggerName, thread, threadId, threadPriority);\r\n            }\r\n    \r\n            public boolean isPropertiesAsList() {\r\n                return this.propertiesAsList;\r\n            }\r\n    \r\n            public B setPropertiesAsList(final boolean propertiesAsList) {\r\n                this.propertiesAsList = propertiesAsList;\r\n                return this.asBuilder();\r\n            }\r\n    \r\n            public boolean getObjectMessageAsJsonObject() {\r\n                return this.objectMessageAsJsonObject;\r\n            }\r\n    \r\n            public B setObjectMessageAsJsonObject(final boolean objectMessageAsJsonObject) {\r\n                this.objectMessageAsJsonObject = objectMessageAsJsonObject;\r\n                return this.asBuilder();\r\n            }\r\n    \r\n            public KeyValuePair[] getAdditionalFields() {\r\n                return this.additionalFields;\r\n            }\r\n    \r\n            public B setAdditionalFields(final KeyValuePair[] additionalFields) {\r\n                this.additionalFields = additionalFields;\r\n                return this.asBuilder();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to customize or remove default attributes in Log4j2 - JSON Layout","body":"<p>For this purpose, I slightly changed the <code>JSONLayout</code> class and created the new <code>JSONLayoutV2</code> class.\nYou can use the <code>JSONLayoutV2</code> class to customize these attributes until the <code>JSONLayout</code> class is modified.</p>\n<pre><code>&lt;JSONLayoutV2 objectMessageAsJsonObject=&quot;true&quot; thread=&quot;true&quot; threadId=&quot;true&quot; eventEol=&quot;true&quot; complete=&quot;true&quot; compact=&quot;false&quot;  properties=&quot;true&quot; /&gt;\n</code></pre>\n<p><code>JSONLayoutV2</code> class:</p>\n<pre><code>package org.apache.logging.log4j.core.layout;\n\nimport com.fasterxml.jackson.databind.ObjectWriter;\nimport com.fasterxml.jackson.databind.ser.impl.SimpleBeanPropertyFilter;\nimport com.fasterxml.jackson.databind.ser.impl.SimpleFilterProvider;\nimport org.apache.logging.log4j.core.LogEvent;\nimport org.apache.logging.log4j.core.config.Configuration;\nimport org.apache.logging.log4j.core.config.DefaultConfiguration;\nimport org.apache.logging.log4j.core.config.plugins.Plugin;\nimport org.apache.logging.log4j.core.config.plugins.PluginBuilderAttribute;\nimport org.apache.logging.log4j.core.config.plugins.PluginBuilderFactory;\nimport org.apache.logging.log4j.core.config.plugins.PluginElement;\nimport org.apache.logging.log4j.core.impl.Log4jLogEvent;\nimport org.apache.logging.log4j.core.util.KeyValuePair;\n\nimport java.io.IOException;\nimport java.io.Writer;\nimport java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\n\n\n@Plugin(\n        name = &quot;JsonLayoutV2&quot;,\n        category = &quot;Core&quot;,\n        elementType = &quot;layout&quot;,\n        printObject = true\n)\npublic final class JsonLayoutV2 extends AbstractJacksonLayout {\n    private static final String DEFAULT_FOOTER = &quot;]&quot;;\n    private static final String DEFAULT_HEADER = &quot;[&quot;;\n    static final String CONTENT_TYPE = &quot;application/json&quot;;\n\n    /** @deprecated */\n    @Deprecated\n    protected JsonLayoutV2(final Configuration config, final boolean locationInfo, final boolean properties, final boolean encodeThreadContextAsList, final boolean complete, final boolean compact, final boolean eventEol, final String endOfLine, final String headerPattern, final String footerPattern, final Charset charset, final boolean includeStacktrace) {\n        super(config, (new JacksonFactory.JSON(encodeThreadContextAsList, includeStacktrace, false, false)).newWriter(locationInfo, properties, compact), charset, compact, complete, eventEol, endOfLine, PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(headerPattern).setDefaultPattern(&quot;[&quot;).build(), PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(footerPattern).setDefaultPattern(&quot;]&quot;).build(), false, (KeyValuePair[])null);\n    }\n\n    private JsonLayoutV2(final Configuration config, final boolean locationInfo, final boolean properties, final boolean encodeThreadContextAsList, final boolean complete, final boolean compact, final boolean eventEol, final String endOfLine, final String headerPattern, final String footerPattern, final Charset charset, final boolean includeStacktrace, final boolean stacktraceAsString, final boolean includeNullDelimiter, final boolean includeTimeMillis, final KeyValuePair[] additionalFields, final boolean objectMessageAsJsonObject,\n                         final boolean instant, final boolean loggerFqcn, final boolean endOfBatch, final boolean loggerName, final boolean thread, final boolean threadId, final boolean threadPriority) {\n//        super(config, (new JacksonFactory.JSON(encodeThreadContextAsList, includeStacktrace, stacktraceAsString, objectMessageAsJsonObject)).newWriter(locationInfo, properties, compact, includeTimeMillis), charset, compact, complete, eventEol, endOfLine, PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(headerPattern).setDefaultPattern(&quot;[&quot;).build(), PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(footerPattern).setDefaultPattern(&quot;]&quot;).build(), includeNullDelimiter, additionalFields);\n        super(config, newWriter((new JacksonFactory.JSON(encodeThreadContextAsList, includeStacktrace, stacktraceAsString, objectMessageAsJsonObject)), locationInfo, properties, compact, includeTimeMillis,\n                instant,  loggerFqcn,  endOfBatch,  loggerName,  thread,  threadId,  threadPriority), charset, compact, complete, eventEol, endOfLine, PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(headerPattern).setDefaultPattern(&quot;[&quot;).build(), PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(footerPattern).setDefaultPattern(&quot;]&quot;).build(), includeNullDelimiter, additionalFields);\n    }\n\n    static ObjectWriter newWriter(JacksonFactory.JSON jacksonFactory, final boolean locationInfo, final boolean properties, final boolean compact, final boolean includeMillis,\n                                  final boolean instant, final boolean loggerFqcn, final boolean endOfBatch, final boolean loggerName, final boolean thread, final boolean threadId, final boolean threadPriority) {\n        SimpleFilterProvider filters = new SimpleFilterProvider();\n        Set&lt;String&gt; except = new HashSet(3);\n        if (!locationInfo) {\n            except.add(jacksonFactory.getPropertNameForSource());\n        }\n\n        if (!properties) {\n            except.add(jacksonFactory.getPropertNameForContextMap());\n        }\n\n        if (includeMillis) {\n            except.add(jacksonFactory.getPropertyNameForInstant());\n        } else {\n            except.add(jacksonFactory.getPropertyNameForTimeMillis());\n        }\n\n        if (!instant)           except.add(&quot;instant&quot;);\n        if (!loggerFqcn)        except.add(&quot;loggerFqcn&quot;);\n        if (!endOfBatch)        except.add(&quot;endOfBatch&quot;);\n        if (!loggerName)        except.add(&quot;loggerName&quot;);\n        if (!thread)            except.add(&quot;thread&quot;);\n        if (!threadId)          except.add(&quot;threadId&quot;);\n        if (!threadPriority)    except.add(&quot;threadPriority&quot;);\n\n        except.add(jacksonFactory.getPropertNameForNanoTime());\n        filters.addFilter(Log4jLogEvent.class.getName(), SimpleBeanPropertyFilter.serializeAllExcept(except));\n        ObjectWriter writer = jacksonFactory.newObjectMapper().writer(compact ? jacksonFactory.newCompactPrinter() : jacksonFactory.newPrettyPrinter());\n        return writer.with(filters);\n    }\n\n    public byte[] getHeader() {\n        if (!this.complete) {\n            return null;\n        } else {\n            StringBuilder buf = new StringBuilder();\n            String str = this.serializeToString(this.getHeaderSerializer());\n            if (str != null) {\n                buf.append(str);\n            }\n\n            buf.append(this.eol);\n            return this.getBytes(buf.toString());\n        }\n    }\n\n    public byte[] getFooter() {\n        if (!this.complete) {\n            return null;\n        } else {\n            StringBuilder buf = new StringBuilder();\n            buf.append(this.eol);\n            String str = this.serializeToString(this.getFooterSerializer());\n            if (str != null) {\n                buf.append(str);\n            }\n\n            buf.append(this.eol);\n            return this.getBytes(buf.toString());\n        }\n    }\n\n    public Map&lt;String, String&gt; getContentFormat() {\n        Map&lt;String, String&gt; result = new HashMap();\n        result.put(&quot;version&quot;, &quot;2.0&quot;);\n        return result;\n    }\n\n    public String getContentType() {\n        return &quot;application/json; charset=&quot; + this.getCharset();\n    }\n\n    /** @deprecated */\n//    @Deprecated\n//    public static JsonLayoutV2 createLayout(final Configuration config, final boolean locationInfo, final boolean properties, final boolean propertiesAsList, final boolean complete, final boolean compact, final boolean eventEol, final String headerPattern, final String footerPattern, final Charset charset, final boolean includeStacktrace) {\n//        boolean encodeThreadContextAsList = properties &amp;&amp; propertiesAsList;\n//        return new JsonLayoutV2(config, locationInfo, properties, encodeThreadContextAsList, complete, compact, eventEol, (String)null, headerPattern, footerPattern, charset, includeStacktrace, false, false, false, (KeyValuePair[])null, false);\n//    }\n\n    @PluginBuilderFactory\n    public static &lt;B extends Builder&lt;B&gt;&gt; B newBuilder() {\n        return (B) new Builder();\n    }\n\n    public static JsonLayoutV2 createDefaultLayout() {\n        return new JsonLayoutV2(new DefaultConfiguration(), false, false, false, false, false, false, (String)null, &quot;[&quot;, &quot;]&quot;, StandardCharsets.UTF_8, true, false, false, false, (KeyValuePair[])null, false,\n                false,false,false,false,false,false,false);\n    }\n\n    public void toSerializable(final LogEvent event, final Writer writer) throws IOException {\n        if (this.complete &amp;&amp; this.eventCount &gt; 0L) {\n            writer.append(&quot;, &quot;);\n        }\n\n        super.toSerializable(event, writer);\n    }\n\n    public static class Builder&lt;B extends Builder&lt;B&gt;&gt; extends AbstractJacksonLayout.Builder&lt;B&gt; implements org.apache.logging.log4j.core.util.Builder&lt;JsonLayoutV2&gt; {\n        @PluginBuilderAttribute\n        private boolean propertiesAsList;\n        @PluginBuilderAttribute\n        private boolean objectMessageAsJsonObject;\n        @PluginElement(&quot;AdditionalField&quot;)\n        private KeyValuePair[] additionalFields;\n\n        @PluginBuilderAttribute\n        private boolean instant;\n\n        @PluginBuilderAttribute\n        private boolean loggerFqcn;\n\n        @PluginBuilderAttribute\n        private boolean endOfBatch;\n\n        @PluginBuilderAttribute\n        private boolean loggerName;\n\n        @PluginBuilderAttribute\n        private boolean thread;\n\n        @PluginBuilderAttribute\n        private boolean threadId;\n\n        @PluginBuilderAttribute\n        private boolean threadPriority;\n\n        public Builder() {\n            this.setCharset(StandardCharsets.UTF_8);\n        }\n\n        public JsonLayoutV2 build() {\n            boolean encodeThreadContextAsList = this.isProperties() &amp;&amp; this.propertiesAsList;\n            String headerPattern = this.toStringOrNull(this.getHeader());\n            String footerPattern = this.toStringOrNull(this.getFooter());\n            return new JsonLayoutV2(this.getConfiguration(), this.isLocationInfo(), this.isProperties(), encodeThreadContextAsList, this.isComplete(), this.isCompact(), this.getEventEol(), this.getEndOfLine(), headerPattern, footerPattern, this.getCharset(), this.isIncludeStacktrace(), this.isStacktraceAsString(), this.isIncludeNullDelimiter(), this.isIncludeTimeMillis(), this.getAdditionalFields(), this.getObjectMessageAsJsonObject(),\n                    instant, loggerFqcn, endOfBatch, loggerName, thread, threadId, threadPriority);\n        }\n\n        public boolean isPropertiesAsList() {\n            return this.propertiesAsList;\n        }\n\n        public B setPropertiesAsList(final boolean propertiesAsList) {\n            this.propertiesAsList = propertiesAsList;\n            return this.asBuilder();\n        }\n\n        public boolean getObjectMessageAsJsonObject() {\n            return this.objectMessageAsJsonObject;\n        }\n\n        public B setObjectMessageAsJsonObject(final boolean objectMessageAsJsonObject) {\n            this.objectMessageAsJsonObject = objectMessageAsJsonObject;\n            return this.asBuilder();\n        }\n\n        public KeyValuePair[] getAdditionalFields() {\n            return this.additionalFields;\n        }\n\n        public B setAdditionalFields(final KeyValuePair[] additionalFields) {\n            this.additionalFields = additionalFields;\n            return this.asBuilder();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8146898,"reputation":453,"user_id":6135309,"display_name":"Ravikumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3005,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":61622284,"answer_count":2,"score":3,"last_activity_date":1684740744,"creation_date":1588703792,"question_id":61620495,"body_markdown":"In `Spring Boot 2` application I have configured `Log4j2` with `JsonLayout` like below\r\n\r\n```    \r\n    ....\r\n    \r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;ConsoleJSONAppender&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;JsonLayout complete=&quot;false&quot; compact=&quot;false&quot;&gt;\r\n            &lt;/JsonLayout&gt;\r\n        &lt;/Console&gt;\r\n    &lt;/Appenders&gt; \r\n    &lt;Logger name=&quot;CONSOLE_JSON_APPENDER&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\r\n        &lt;AppenderRef ref=&quot;ConsoleJSONAppender&quot; /&gt;\r\n    &lt;/Logger&gt;\r\n    \r\n    .....\r\n```\r\n\r\nand I got output like below\r\n\r\n```\r\n    {\r\n            &quot;timeMillis&quot; : 1496306649058,\r\n            &quot;thread&quot; : &quot;main&quot;,\r\n            &quot;level&quot; : &quot;INFO&quot;,\r\n            &quot;loggerName&quot; : &quot;ConsoleJSONAppender&quot;,\r\n            &quot;message&quot; : &quot;Json Message&quot;,\r\n            &quot;endOfBatch&quot; : false,\r\n            &quot;loggerFqcn&quot; : &quot;org.apache.logging.log4j.spi.AbstractLogger&quot;,\r\n            &quot;threadId&quot; : 1,\r\n            &quot;threadPriority&quot; : 5\r\n    }\r\n    \r\n```\r\n\r\nOutput is fine but ***I don&#39;t want attributes like &quot;endofBatch&quot;, &quot;threadPriority&quot; and others*** but it is getting displayed in logs, ***how to avoid unwanted (default) attributes in `JsonLayout` based logs***.","title":"How to customize or remove default attributes in Log4j2 - JSON Layout","body":"<p>In <code>Spring Boot 2</code> application I have configured <code>Log4j2</code> with <code>JsonLayout</code> like below</p>\n\n<pre><code>    ....\n\n    &lt;Appenders&gt;\n        &lt;Console name=\"ConsoleJSONAppender\" target=\"SYSTEM_OUT\"&gt;\n            &lt;JsonLayout complete=\"false\" compact=\"false\"&gt;\n            &lt;/JsonLayout&gt;\n        &lt;/Console&gt;\n    &lt;/Appenders&gt; \n    &lt;Logger name=\"CONSOLE_JSON_APPENDER\" level=\"INFO\" additivity=\"false\"&gt;\n        &lt;AppenderRef ref=\"ConsoleJSONAppender\" /&gt;\n    &lt;/Logger&gt;\n\n    .....\n</code></pre>\n\n<p>and I got output like below</p>\n\n<pre><code>    {\n            \"timeMillis\" : 1496306649058,\n            \"thread\" : \"main\",\n            \"level\" : \"INFO\",\n            \"loggerName\" : \"ConsoleJSONAppender\",\n            \"message\" : \"Json Message\",\n            \"endOfBatch\" : false,\n            \"loggerFqcn\" : \"org.apache.logging.log4j.spi.AbstractLogger\",\n            \"threadId\" : 1,\n            \"threadPriority\" : 5\n    }\n\n</code></pre>\n\n<p>Output is fine but <strong><em>I don't want attributes like \"endofBatch\", \"threadPriority\" and others</em></strong> but it is getting displayed in logs, <strong><em>how to avoid unwanted (default) attributes in <code>JsonLayout</code> based logs</em></strong>.</p>\n"},{"tags":["java","encoding","utf-8","ascii","apache-tika"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":3,"creation_date":1684424768,"post_id":76282246,"comment_id":134518626,"body_markdown":"Encoding detection is not 100%. Also `ASCII` is a subset of `UTF8`, so there should not be any issues. Run tests to make sure things are fine. Encoding can be a headache. Everyone suggests reading [this](https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/). Good luck!","body":"Encoding detection is not 100%. Also <code>ASCII</code> is a subset of <code>UTF8</code>, so there should not be any issues. Run tests to make sure things are fine. Encoding can be a headache. Everyone suggests reading <a href=\"https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\" rel=\"nofollow noreferrer\">this</a>. Good luck!"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":2,"creation_date":1684424957,"post_id":76282246,"comment_id":134518678,"body_markdown":"I don&#39;t think you have to worry about your machine encoding. I think you just need to know the file encoding. If you know that, read using the file encoding. You can write to whatever encoding you like, given you do the proper conversion. I would suggest you keep using `UTF8`.","body":"I don&#39;t think you have to worry about your machine encoding. I think you just need to know the file encoding. If you know that, read using the file encoding. You can write to whatever encoding you like, given you do the proper conversion. I would suggest you keep using <code>UTF8</code>."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684425701,"post_id":76282246,"comment_id":134518859,"body_markdown":"It&#39;s conceivably impossible to distinguish between UTF-8 and ASCII depending on the content (because there *might* be no difference/distinction)","body":"It&#39;s conceivably impossible to distinguish between UTF-8 and ASCII depending on the content (because there <i>might</i> be no difference/distinction)"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1684426262,"post_id":76282246,"comment_id":134518993,"body_markdown":"The `detectEncoding(String filePath)` code you&#39;ve shown will never detect file encoding as `new InputStreamReader(bis)` uses the default charset and so `isr.getEncoding()` always equals `Charset.defaultCharset()` whatever file you read, it isn&#39;t autodetected from reading the file.","body":"The <code>detectEncoding(String filePath)</code> code you&#39;ve shown will never detect file encoding as <code>new InputStreamReader(bis)</code> uses the default charset and so <code>isr.getEncoding()</code> always equals <code>Charset.defaultCharset()</code> whatever file you read, it isn&#39;t autodetected from reading the file."},{"owner":{"account_id":24342544,"reputation":39,"user_id":18279733,"display_name":"anonimos"},"score":0,"creation_date":1684426357,"post_id":76282246,"comment_id":134519016,"body_markdown":"Problem is that in the file I have lines such as TR&#239;&#191;&#189;&#239;&#191;&#189; and on my local machine this symbol are replaced with ?? and it is important to be UTF because I create a signature based on the content of the file. The problem is that on my local machine I have a signature and on deployed machine I have another one because of ASCII encoding. When setting the encoding to UTF8 by passing as argument to the JVM than same signature is generated on both machines.","body":"Problem is that in the file I have lines such as TR&#239;&#191;&#189;&#239;&#191;&#189; and on my local machine this symbol are replaced with ?? and it is important to be UTF because I create a signature based on the content of the file. The problem is that on my local machine I have a signature and on deployed machine I have another one because of ASCII encoding. When setting the encoding to UTF8 by passing as argument to the JVM than same signature is generated on both machines."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1684426602,"post_id":76282246,"comment_id":134519076,"body_markdown":"You need to be looking at code that writes the file as that is what is determing the file encoding, and then use the same charset for reads.","body":"You need to be looking at code that writes the file as that is what is determing the file encoding, and then use the same charset for reads."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1684427220,"post_id":76282246,"comment_id":134519189,"body_markdown":"*Problem is that in the file I have lines such as TR&#239;&#191;&#189;&#239;&#191;&#189;* That *already* looks like garbage... And you don&#39;t show us *how* you&#39;re generating the sig (the read op) so it&#39;s difficult to help","body":"<i>Problem is that in the file I have lines such as TR&#239;&#191;&#189;&#239;&#191;&#189;</i> That <i>already</i> looks like garbage... And you don&#39;t show us <i>how</i> you&#39;re generating the sig (the read op) so it&#39;s difficult to help"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1684438335,"post_id":76282246,"comment_id":134521509,"body_markdown":"Your problem is likely file *writing*, not file *reading*. Until recently, the character encoding for Java file writing defaulted to the default of the host OS. In Java 18+, [UTF-8 is the default](https://openjdk.org/jeps/400) for most purposes. I did not see any disclosure in your Question about file creation. I’m voting to close for lack of debugging details.","body":"Your problem is likely file <i>writing</i>, not file <i>reading</i>. Until recently, the character encoding for Java file writing defaulted to the default of the host OS. In Java 18+, <a href=\"https://openjdk.org/jeps/400\" rel=\"nofollow noreferrer\">UTF-8 is the default</a> for most purposes. I did not see any disclosure in your Question about file creation. I’m voting to close for lack of debugging details."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1684438886,"post_id":76282246,"comment_id":134521618,"body_markdown":"FYI, every 8-bit US-ASCII file is also a UTF-8 file.","body":"FYI, every 8-bit US-ASCII file is also a UTF-8 file."},{"owner":{"account_id":24342544,"reputation":39,"user_id":18279733,"display_name":"anonimos"},"score":0,"creation_date":1684480242,"post_id":76282246,"comment_id":134526329,"body_markdown":"@BasilBourque I&#39;ve added more information on the description.","body":"@BasilBourque I&#39;ve added more information on the description."},{"owner":{"account_id":24342544,"reputation":39,"user_id":18279733,"display_name":"anonimos"},"score":0,"creation_date":1684481113,"post_id":76282246,"comment_id":134526504,"body_markdown":"@BasilBourque you got me thinking: when setting `LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(fileName), StandardCharsets.UTF_8))`, my understanding is that I read the file and I say that the chars in it should be interpreted as utf8 chars, regardless of the actual encoding of the file. I am wrong?","body":"@BasilBourque you got me thinking: when setting <code>LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(fileName), StandardCharsets.UTF_8))</code>, my understanding is that I read the file and I say that the chars in it should be interpreted as utf8 chars, regardless of the actual encoding of the file. I am wrong?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684486807,"post_id":76282246,"comment_id":134527576,"body_markdown":"You&#39;re dead right. Got to say, again, that the portion I mentioned looks a bit garbagey","body":"You&#39;re dead right. Got to say, again, that the portion I mentioned looks a bit garbagey"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1684487835,"post_id":76282246,"comment_id":134527798,"body_markdown":"Also `String.getBytes()` is dangerous without specifying an encoding","body":"Also <code>String.getBytes()</code> is dangerous without specifying an encoding"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1684530088,"post_id":76282246,"comment_id":134535996,"body_markdown":"For what it&#39;s worth: The [Unicode replacement character](https://www.fileformat.info/info/unicode/char/fffd/index.htm) � has a UTF-8 value of `0xEF 0xBF 0xBD`. When you attempt to display that character using ISO-8859-1, you get those three `&#239;`, `&#191;`, `&#189;` characters you mentioned in an earlier comment - because those three characters have those three bytes in ISO-8859-1 (and maybe other encodings also, such as Windows-1252). (As has already been said, your problem is likely file writing, not file reading.)","body":"For what it&#39;s worth: The <a href=\"https://www.fileformat.info/info/unicode/char/fffd/index.htm\" rel=\"nofollow noreferrer\">Unicode replacement character</a> � has a UTF-8 value of <code>0xEF 0xBF 0xBD</code>. When you attempt to display that character using ISO-8859-1, you get those three <code>&#239;</code>, <code>&#191;</code>, <code>&#189;</code> characters you mentioned in an earlier comment - because those three characters have those three bytes in ISO-8859-1 (and maybe other encodings also, such as Windows-1252). (As has already been said, your problem is likely file writing, not file reading.)"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1684580004,"post_id":76282246,"comment_id":134539792,"body_markdown":"@anonimos For your last edit adding `encodeAsMD5`: of course you will get different signatures on machines with different file.encoding as `value.getBytes()` uses the platform encoding to derive the bytes that you pass on to the digest. Thats why they only match when you pass in the same character set UTF-8.","body":"@anonimos For your last edit adding <code>encodeAsMD5</code>: of course you will get different signatures on machines with different file.encoding as <code>value.getBytes()</code> uses the platform encoding to derive the bytes that you pass on to the digest. Thats why they only match when you pass in the same character set UTF-8."}],"answers":[{"tags":[],"owner":{"account_id":24342544,"reputation":39,"user_id":18279733,"display_name":"anonimos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684740401,"creation_date":1684740401,"answer_id":76303863,"question_id":76282246,"body_markdown":"Thanks a lot for your answers. You were right, the problem was with the encoding method, specifically with `byte[] messageDigest = md.digest(value.getBytes());`. Changing the line to: `byte[] messageDigest = md.digest(value.getBytes(StandardCharsets.UTF_8));`\r\ndid the trick so no need for passing the encoding to the JVM.","title":"different encoding for the same file on different machines even though the encoding is explicitly set by java code when reading the file","body":"<p>Thanks a lot for your answers. You were right, the problem was with the encoding method, specifically with <code>byte[] messageDigest = md.digest(value.getBytes());</code>. Changing the line to: <code>byte[] messageDigest = md.digest(value.getBytes(StandardCharsets.UTF_8));</code>\ndid the trick so no need for passing the encoding to the JVM.</p>\n"}],"owner":{"account_id":24342544,"reputation":39,"user_id":18279733,"display_name":"anonimos"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684740401,"creation_date":1684423580,"question_id":76282246,"body_markdown":"I have a file that my java code reads inside a job and sets the encoding to be UTF8 in this line:\r\n```\r\nLineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(mutationInputFileName), StandardCharsets.UTF_8));\r\n```\r\nRight after this line I ckeck the encoding: \t\tdetectEncoding(mutationInputFileName);\r\n\r\nWhen I run the job locally on my mac, the encoding of the file is UTF8. When I run the code on the deploy machine is ASCII.\r\nI&#39;m using tika to detect the file encoding:\r\n```\t\r\npublic void detectEncoding(String filePath) {\r\n\t\ttry (FileInputStream fis = new FileInputStream(filePath);\r\n\t\t\t BufferedInputStream bis = new BufferedInputStream(fis);\r\n\t\t\t InputStreamReader isr = new InputStreamReader(bis)) {\r\n\r\n\t\t\tString encoding = isr.getEncoding();\r\n\t\t\tSystem.out.println(&quot;Detected encoding of file: &quot; + filePath + &quot; is : &quot; + encoding);\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n```\r\n\r\nI&#39;ve added :\t\t\r\n```\r\nSystem.out.println(&quot;System encoding: &quot;+System.getProperty(&quot;file.encoding&quot;));\r\n```\r\nto see more and on my local machine it is stil utf8, on the deploy machine it is: System encoding: ANSI_X3.4-1968. The deploy machine uses linux and I&#39;m using java 8 on both machines.\r\n\r\nEven more strange is that if in terminal I check the encoding with: file -bi text1.txt on my local machine says: &quot;regular file&quot; but on the deployed version:&quot;text/plain; charset=utf-8&quot;.\r\nI managed to set the encoding to be UTF8 on the deployed machine by giving  \r\n```\r\n-Dfile.encoding=UTF-8\r\n``` \r\nas arguments of the program when running the class.\r\n\r\nAny idea why LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(mutationInputFileName), StandardCharsets.UTF_8)) doesn&#39;t set the encoding to utf-8 on the deploy machine?\r\n\r\n-- adding a bit more infos\r\nI am talking about same file, let&#39;s say file1.txt. I&#39;ve downloaded the file from  the deploy machine. This file is created by another process that I cannot access.  The steps are:\r\n\r\n 1. LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(mutationInputFileName), StandardCharsets.UTF_8)); -- here I would expect to have the contet file in UTF8\r\n 2. detectEncoding(mutationInputFileName); \r\n 3. extract information from the file: using fin.lines() and String[] cols = line.split(TAB_SEPARATOR, -1); to get the columns. I&#39;m interested in cols[0] which might have special characters such as &#239;&#191;&#189;&#239;&#191;&#189;.\r\n 4. encoding the signature as md5\r\n```\r\nString signature = encodeAsMD5(signatureBeforeEncoding)\r\n```\r\nwhere signatureBeforeEncoding is col[0] and :\r\n```\r\n\tpublic static String encodeAsMD5(String value) {\r\n\t\tMessageDigest md = null;\r\n\t\ttry {\r\n\t\t\tmd = MessageDigest.getInstance(&quot;MD5&quot;);\r\n\t\t} catch (NoSuchAlgorithmException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t\tbyte[] messageDigest = md.digest(value.getBytes());\r\n\t\tBigInteger number = new BigInteger(1, messageDigest);\r\n\t\treturn number.toString(16);\r\n\t}\r\n```\r\nI get different signature on local machine vs dev. I get same signature if I pass   \r\n```\r\n-Dfile.encoding=UTF-8\r\n``` \r\nas arguments of the program when running the class.\r\n\r\n","title":"different encoding for the same file on different machines even though the encoding is explicitly set by java code when reading the file","body":"<p>I have a file that my java code reads inside a job and sets the encoding to be UTF8 in this line:</p>\n<pre><code>LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(mutationInputFileName), StandardCharsets.UTF_8));\n</code></pre>\n<p>Right after this line I ckeck the encoding:         detectEncoding(mutationInputFileName);</p>\n<p>When I run the job locally on my mac, the encoding of the file is UTF8. When I run the code on the deploy machine is ASCII.\nI'm using tika to detect the file encoding:</p>\n<pre><code>public void detectEncoding(String filePath) {\n        try (FileInputStream fis = new FileInputStream(filePath);\n             BufferedInputStream bis = new BufferedInputStream(fis);\n             InputStreamReader isr = new InputStreamReader(bis)) {\n\n            String encoding = isr.getEncoding();\n            System.out.println(&quot;Detected encoding of file: &quot; + filePath + &quot; is : &quot; + encoding);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>I've added :</p>\n<pre><code>System.out.println(&quot;System encoding: &quot;+System.getProperty(&quot;file.encoding&quot;));\n</code></pre>\n<p>to see more and on my local machine it is stil utf8, on the deploy machine it is: System encoding: ANSI_X3.4-1968. The deploy machine uses linux and I'm using java 8 on both machines.</p>\n<p>Even more strange is that if in terminal I check the encoding with: file -bi text1.txt on my local machine says: &quot;regular file&quot; but on the deployed version:&quot;text/plain; charset=utf-8&quot;.\nI managed to set the encoding to be UTF8 on the deployed machine by giving</p>\n<pre><code>-Dfile.encoding=UTF-8\n</code></pre>\n<p>as arguments of the program when running the class.</p>\n<p>Any idea why LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(mutationInputFileName), StandardCharsets.UTF_8)) doesn't set the encoding to utf-8 on the deploy machine?</p>\n<p>-- adding a bit more infos\nI am talking about same file, let's say file1.txt. I've downloaded the file from  the deploy machine. This file is created by another process that I cannot access.  The steps are:</p>\n<ol>\n<li>LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(mutationInputFileName), StandardCharsets.UTF_8)); -- here I would expect to have the contet file in UTF8</li>\n<li>detectEncoding(mutationInputFileName);</li>\n<li>extract information from the file: using fin.lines() and String[] cols = line.split(TAB_SEPARATOR, -1); to get the columns. I'm interested in cols[0] which might have special characters such as ï¿½ï¿½.</li>\n<li>encoding the signature as md5</li>\n</ol>\n<pre><code>String signature = encodeAsMD5(signatureBeforeEncoding)\n</code></pre>\n<p>where signatureBeforeEncoding is col[0] and :</p>\n<pre><code>    public static String encodeAsMD5(String value) {\n        MessageDigest md = null;\n        try {\n            md = MessageDigest.getInstance(&quot;MD5&quot;);\n        } catch (NoSuchAlgorithmException e) {\n            throw new RuntimeException(e);\n        }\n        byte[] messageDigest = md.digest(value.getBytes());\n        BigInteger number = new BigInteger(1, messageDigest);\n        return number.toString(16);\n    }\n</code></pre>\n<p>I get different signature on local machine vs dev. I get same signature if I pass</p>\n<pre><code>-Dfile.encoding=UTF-8\n</code></pre>\n<p>as arguments of the program when running the class.</p>\n"},{"tags":["java","android","mongodb","kotlin","realm"],"comments":[{"owner":{"account_id":3399229,"reputation":34668,"user_id":2851937,"accept_rate":67,"display_name":"Jay"},"score":0,"creation_date":1684673080,"post_id":76299504,"comment_id":134548196,"body_markdown":"Question: Does it work if you delete all local data on client reset and allow the app to re-sync to the server? (assuming the schema matches the schema on the server)","body":"Question: Does it work if you delete all local data on client reset and allow the app to re-sync to the server? (assuming the schema matches the schema on the server)"}],"answers":[{"tags":[],"owner":{"account_id":4911774,"reputation":539,"user_id":7011829,"display_name":"Vikash Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684740096,"creation_date":1684740096,"answer_id":76303823,"question_id":76299504,"body_markdown":"Here is the solution I found which was nowhere mentioned. As I&#39;m new to mongo db I had to go through lots of documentation reading but nowhere I found that when client reset occurs or if there is any issue with sync we must check logs in mongo db atlas. \r\n\r\nLogs give us the exact reason why syncing has stopped and we can fix it accordingly. After fixing my client reset code started working properly.\r\n[![enter image description here][1]][1]  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/snvMK.png\r\n\r\nHope it helps. ","title":"Unable to perform client reset after doing schema changes using given sample in mongo db for realm android java sdk","body":"<p>Here is the solution I found which was nowhere mentioned. As I'm new to mongo db I had to go through lots of documentation reading but nowhere I found that when client reset occurs or if there is any issue with sync we must check logs in mongo db atlas.</p>\n<p>Logs give us the exact reason why syncing has stopped and we can fix it accordingly. After fixing my client reset code started working properly.\n<a href=\"https://i.stack.imgur.com/snvMK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/snvMK.png\" alt=\"enter image description here\" /></a></p>\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":4911774,"reputation":539,"user_id":7011829,"display_name":"Vikash Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684740096,"creation_date":1684666416,"question_id":76299504,"body_markdown":"Unable to perform client reset after doing schema changes using given sample in mongo db for realm android java sdk. But i was able to perform client reset after toggling sync in atlas.  The problem lies client reset not happening after breaking schema changes. Even I fixed schema.\r\nThis is the given sample in Mongo reference. And is there any process where we could now client reset triggers??\r\n\r\n    String appID = YOUR_APP_ID; // replace this with your App ID\r\n    App app = null;\r\n    AtomicReference&lt;App&gt; globalApp = new AtomicReference&lt;&gt;(app);\r\n    // accessing the app from within the lambda below requires an effectively final object\r\n    app = new App(new AppConfiguration.Builder(appID)\r\n            .defaultSyncClientResetStrategy(new DiscardUnsyncedChangesStrategy() {\r\n                @Override\r\n                public void onBeforeReset(Realm realm) {\r\n                    Log.w(&quot;EXAMPLE&quot;, &quot;Beginning client reset for &quot; + realm.getPath());\r\n                }\r\n                @Override\r\n                public void onAfterReset(Realm before, Realm after) {\r\n                    Log.w(&quot;EXAMPLE&quot;, &quot;Finished client reset for &quot; + before.getPath());\r\n                }\r\n                @Override\r\n                public void onError(SyncSession session, ClientResetRequiredError error) {\r\n                    Log.e(&quot;EXAMPLE&quot;, &quot;Couldn&#39;t handle the client reset automatically.&quot; +\r\n                            &quot; Falling back to manual client reset execution: &quot;\r\n                            + error.getErrorMessage());\r\n                    // close all instances of your realm -- this application only uses one\r\n                    globalRealm.close();\r\n                    try {\r\n                        Log.w(&quot;EXAMPLE&quot;, &quot;About to execute the client reset.&quot;);\r\n                        // execute the client reset, moving the current realm to a backup file\r\n                        error.executeClientReset();\r\n                        Log.w(&quot;EXAMPLE&quot;, &quot;Executed the client reset.&quot;);\r\n                    } catch (IllegalStateException e) {\r\n                        Log.e(&quot;EXAMPLE&quot;, &quot;Failed to execute the client reset: &quot; + e.getMessage());\r\n                        // The client reset can only proceed if there are no open realms.\r\n                        // if execution failed, ask the user to restart the app, and we&#39;ll client reset\r\n                        // when we first open the app connection.\r\n                        AlertDialog restartDialog = new AlertDialog.Builder(activity)\r\n                                .setMessage(&quot;Sync error. Restart the application to resume sync.&quot;)\r\n                                .setTitle(&quot;Restart to Continue&quot;)\r\n                                .create();\r\n                        restartDialog.show();\r\n                    }\r\n                    // open a new instance of the realm. This initializes a new file for the new realm\r\n                    // and downloads the backend state. Do this in a background thread so we can wait\r\n                    // for server changes to fully download.\r\n                    ExecutorService executor = Executors.newSingleThreadExecutor();\r\n                    executor.execute(() -&gt; {\r\n                        Realm newRealm = Realm.getInstance(globalConfig);\r\n                        // ensure that the backend state is fully downloaded before proceeding\r\n                        try {\r\n                            globalApp.get().getSync().getSession(globalConfig).downloadAllServerChanges(10000,\r\n                                    TimeUnit.MILLISECONDS);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        Log.w(&quot;EXAMPLE&quot;,\r\n                                &quot;Downloaded server changes for a fresh instance of the realm.&quot;);\r\n                        newRealm.close();\r\n                    });\r\n                    // execute the recovery logic on a background thread\r\n                    try {\r\n                        executor.awaitTermination(20000, TimeUnit.MILLISECONDS);\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            })\r\n            .build());\r\n    globalApp.set(app);\r\n\r\n","title":"Unable to perform client reset after doing schema changes using given sample in mongo db for realm android java sdk","body":"<p>Unable to perform client reset after doing schema changes using given sample in mongo db for realm android java sdk. But i was able to perform client reset after toggling sync in atlas.  The problem lies client reset not happening after breaking schema changes. Even I fixed schema.\nThis is the given sample in Mongo reference. And is there any process where we could now client reset triggers??</p>\n<pre><code>String appID = YOUR_APP_ID; // replace this with your App ID\nApp app = null;\nAtomicReference&lt;App&gt; globalApp = new AtomicReference&lt;&gt;(app);\n// accessing the app from within the lambda below requires an effectively final object\napp = new App(new AppConfiguration.Builder(appID)\n        .defaultSyncClientResetStrategy(new DiscardUnsyncedChangesStrategy() {\n            @Override\n            public void onBeforeReset(Realm realm) {\n                Log.w(&quot;EXAMPLE&quot;, &quot;Beginning client reset for &quot; + realm.getPath());\n            }\n            @Override\n            public void onAfterReset(Realm before, Realm after) {\n                Log.w(&quot;EXAMPLE&quot;, &quot;Finished client reset for &quot; + before.getPath());\n            }\n            @Override\n            public void onError(SyncSession session, ClientResetRequiredError error) {\n                Log.e(&quot;EXAMPLE&quot;, &quot;Couldn't handle the client reset automatically.&quot; +\n                        &quot; Falling back to manual client reset execution: &quot;\n                        + error.getErrorMessage());\n                // close all instances of your realm -- this application only uses one\n                globalRealm.close();\n                try {\n                    Log.w(&quot;EXAMPLE&quot;, &quot;About to execute the client reset.&quot;);\n                    // execute the client reset, moving the current realm to a backup file\n                    error.executeClientReset();\n                    Log.w(&quot;EXAMPLE&quot;, &quot;Executed the client reset.&quot;);\n                } catch (IllegalStateException e) {\n                    Log.e(&quot;EXAMPLE&quot;, &quot;Failed to execute the client reset: &quot; + e.getMessage());\n                    // The client reset can only proceed if there are no open realms.\n                    // if execution failed, ask the user to restart the app, and we'll client reset\n                    // when we first open the app connection.\n                    AlertDialog restartDialog = new AlertDialog.Builder(activity)\n                            .setMessage(&quot;Sync error. Restart the application to resume sync.&quot;)\n                            .setTitle(&quot;Restart to Continue&quot;)\n                            .create();\n                    restartDialog.show();\n                }\n                // open a new instance of the realm. This initializes a new file for the new realm\n                // and downloads the backend state. Do this in a background thread so we can wait\n                // for server changes to fully download.\n                ExecutorService executor = Executors.newSingleThreadExecutor();\n                executor.execute(() -&gt; {\n                    Realm newRealm = Realm.getInstance(globalConfig);\n                    // ensure that the backend state is fully downloaded before proceeding\n                    try {\n                        globalApp.get().getSync().getSession(globalConfig).downloadAllServerChanges(10000,\n                                TimeUnit.MILLISECONDS);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    Log.w(&quot;EXAMPLE&quot;,\n                            &quot;Downloaded server changes for a fresh instance of the realm.&quot;);\n                    newRealm.close();\n                });\n                // execute the recovery logic on a background thread\n                try {\n                    executor.awaitTermination(20000, TimeUnit.MILLISECONDS);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        })\n        .build());\nglobalApp.set(app);\n</code></pre>\n"},{"tags":["java","string","split","java.util.scanner"],"comments":[{"owner":{"account_id":434849,"reputation":9817,"user_id":821110,"accept_rate":95,"display_name":"W.K.S"},"score":1,"creation_date":1326661967,"post_id":8873351,"comment_id":11089704,"body_markdown":"Could you please edit your question to include punctuation. Its really hard to understand what your question is.","body":"Could you please edit your question to include punctuation. Its really hard to understand what your question is."}],"answers":[{"tags":[],"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1326662235,"creation_date":1326661478,"answer_id":8873377,"question_id":8873351,"body_markdown":"Put `keyboard.nextLine()` after this line:\r\n\r\n    int answer=keyboard.nextInt();\r\n\r\nThis is a common problem that usually happens when you use `nextLine()` method after `nextInt()` method of `Scanner` class.\r\n\r\nWhat actually happens is that when the user enters an integer at `int answer = keyboard.nextInt();`, the scanner will take the digits only and leave the new-line character `\\n`. So you need to do a trick by calling `keyboard.nextLine();` just to discard that new-line character and then you can call `String input = keyboard.nextLine();` without any problem.","title":"Reading Strings next() and nextLine() Java","body":"<p>Put <code>keyboard.nextLine()</code> after this line:</p>\n\n<pre><code>int answer=keyboard.nextInt();\n</code></pre>\n\n<p>This is a common problem that usually happens when you use <code>nextLine()</code> method after <code>nextInt()</code> method of <code>Scanner</code> class.</p>\n\n<p>What actually happens is that when the user enters an integer at <code>int answer = keyboard.nextInt();</code>, the scanner will take the digits only and leave the new-line character <code>\\n</code>. So you need to do a trick by calling <code>keyboard.nextLine();</code> just to discard that new-line character and then you can call <code>String input = keyboard.nextLine();</code> without any problem.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684739493,"creation_date":1684739493,"answer_id":76303761,"question_id":8873351,"body_markdown":"My first suggestion is to just add the entire line, split on a space, to a `String` array.  \r\nThen, assign `answer` the 0 index of the array, utilizing the `Integer.parseInt` method.\r\n\r\nHere is your code, refactored.\r\n\r\n```java\r\nScanner keyboard = new Scanner(System.in);\r\nString[] strings = keyboard.nextLine().split(&quot; &quot;);\r\nint answer = Integer.parseInt(strings[0]);\r\nint left = 0, right = 0, forward = 0, back = 0;\r\nfor (int countA = 0; countA &lt; answer; countA++) {\r\n    for (String string : strings) {\r\n        switch (string.toLowerCase()) {\r\n            case &quot;left&quot; -&gt; left++;\r\n            case &quot;right&quot; -&gt; right++;\r\n            case &quot;forward&quot; -&gt; forward++;\r\n            case &quot;back&quot; -&gt; back++;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nInput\r\n\r\n```none\r\n10 left right back left\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nanswer = 10\r\nstrings = [10, left, right, back, left]\r\nleft = 20\r\nright = 10\r\nforward = 0\r\nback = 10\r\n```","title":"Reading Strings next() and nextLine() Java","body":"<p>My first suggestion is to just add the entire line, split on a space, to a <code>String</code> array.<br />\nThen, assign <code>answer</code> the 0 index of the array, utilizing the <code>Integer.parseInt</code> method.</p>\n<p>Here is your code, refactored.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner keyboard = new Scanner(System.in);\nString[] strings = keyboard.nextLine().split(&quot; &quot;);\nint answer = Integer.parseInt(strings[0]);\nint left = 0, right = 0, forward = 0, back = 0;\nfor (int countA = 0; countA &lt; answer; countA++) {\n    for (String string : strings) {\n        switch (string.toLowerCase()) {\n            case &quot;left&quot; -&gt; left++;\n            case &quot;right&quot; -&gt; right++;\n            case &quot;forward&quot; -&gt; forward++;\n            case &quot;back&quot; -&gt; back++;\n        }\n    }\n}\n</code></pre>\n<p>Input</p>\n<pre class=\"lang-none prettyprint-override\"><code>10 left right back left\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>answer = 10\nstrings = [10, left, right, back, left]\nleft = 20\nright = 10\nforward = 0\nback = 10\n</code></pre>\n"}],"owner":{"account_id":1078756,"reputation":447,"user_id":1076331,"display_name":"user1076331"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42234,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1684739493,"creation_date":1326661257,"question_id":8873351,"body_markdown":"The problem is I cant read the variable input with next() cause when I try to split (.split&quot; &quot;) every whitespace then the array just get the first two words I type so I had to use keyboard.nextLine() and the splitting process works the way it should work and I get all the words in the array but the problem is that If I use nextLine() then I have to create another keyboard object to read the first variable (answer) and that is the only way I can make it work here is the code\r\n\r\n\r\n\r\n        Scanner keyboard=new Scanner(System.in);\r\n        Scanner keyboard2=new Scanner(System.in);//just to make answer word\r\n\r\n        int answer=keyboard.nextInt();//if I don&#39;t use the keyboard2 here then the program will not work as it should work, but if I use next() instead of nextLine down there this will not be a problem but then the splitting part is a problem(this variable counts number of lines the program will have).\r\n\r\n        int current=1;\r\n        int left=0,right=0,forward=0,back=0;\r\n        \r\n        for(int count=0;count&lt;answer;count++,current++)\r\n        {\r\n            String input=keyboard.nextLine();\r\n            String array[]=input.split(&quot; &quot;);\r\n            for (int counter=0;counter&lt;array.length;counter++)\r\n            {\r\n                if (array[counter].equalsIgnoreCase(&quot;left&quot;))\r\n                {\r\n                    left++;\r\n                }\r\n                else if (array[counter].equalsIgnoreCase(&quot;right&quot;))\r\n                {     \r\n                    right++;\r\n                }\r\n                else if (array[counter].equalsIgnoreCase(&quot;forward&quot;))\r\n                {\r\n                    forward++;   \r\n                }\r\n                else if (array[counter].equalsIgnoreCase(&quot;back&quot;))\r\n                {     \r\n                    back++;\r\n                }\r\n            }\r\n\r\n       }\r\n    }\r\n\r\nThanks :)","title":"Reading Strings next() and nextLine() Java","body":"<p>The problem is I cant read the variable input with next() cause when I try to split (.split\" \") every whitespace then the array just get the first two words I type so I had to use keyboard.nextLine() and the splitting process works the way it should work and I get all the words in the array but the problem is that If I use nextLine() then I have to create another keyboard object to read the first variable (answer) and that is the only way I can make it work here is the code</p>\n\n<pre><code>    Scanner keyboard=new Scanner(System.in);\n    Scanner keyboard2=new Scanner(System.in);//just to make answer word\n\n    int answer=keyboard.nextInt();//if I don't use the keyboard2 here then the program will not work as it should work, but if I use next() instead of nextLine down there this will not be a problem but then the splitting part is a problem(this variable counts number of lines the program will have).\n\n    int current=1;\n    int left=0,right=0,forward=0,back=0;\n\n    for(int count=0;count&lt;answer;count++,current++)\n    {\n        String input=keyboard.nextLine();\n        String array[]=input.split(\" \");\n        for (int counter=0;counter&lt;array.length;counter++)\n        {\n            if (array[counter].equalsIgnoreCase(\"left\"))\n            {\n                left++;\n            }\n            else if (array[counter].equalsIgnoreCase(\"right\"))\n            {     \n                right++;\n            }\n            else if (array[counter].equalsIgnoreCase(\"forward\"))\n            {\n                forward++;   \n            }\n            else if (array[counter].equalsIgnoreCase(\"back\"))\n            {     \n                back++;\n            }\n        }\n\n   }\n}\n</code></pre>\n\n<p>Thanks :)</p>\n"},{"tags":["java","spring","mapstruct"],"comments":[{"owner":{"account_id":1212711,"reputation":2020,"user_id":1180963,"accept_rate":75,"display_name":"eduyayo"},"score":0,"creation_date":1684534497,"post_id":76292575,"comment_id":134536549,"body_markdown":"does your IDE show a warningabout the duplication?","body":"does your IDE show a warningabout the duplication?"},{"owner":{"account_id":28515520,"reputation":15,"user_id":21824932,"display_name":"Oleksandr Zhytariuk"},"score":0,"creation_date":1684583785,"post_id":76292575,"comment_id":134540194,"body_markdown":"@eduyayo no my IDE doesnt show warning","body":"@eduyayo no my IDE doesnt show warning"}],"answers":[{"tags":[],"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684606056,"creation_date":1684606056,"answer_id":76296695,"question_id":76292575,"body_markdown":"One solution is to group together multiple mapping annotations into a custom annotation. For example, you can create an annotation for ignoring audit mappings:\r\n```java\r\n@Target({ElementType.METHOD})\r\n@Retention(RUNTIME)\r\n@Mapping(target = &quot;createdAt&quot;, ignore = true)\r\n@Mapping(target = &quot;updatedAt&quot;, ignore = true)\r\n@Mapping(target = &quot;createdBy&quot;, ignore = true)\r\n@Mapping(target = &quot;modifiedBy&quot;, ignore = true)\r\npublic @interface IgnoreAuditMapping {}\r\n```\r\nThe annotation can be used in mappers to reduce duplication:\r\n```\r\n@Mapper(config = MapperConfiguration.class)\r\npublic interface CategoryMapper {\r\n    ...\r\n\r\n    @IgnoreAuditMapping\r\n    @Mapping(target = &quot;id&quot;, ignore = true)\r\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\r\n    Category toCategory(final CategoryDto categoryDto);\r\n\r\n    ...\r\n}\r\n```\r\n","title":"Efficiently removing duplicate @Mapping annotations for audit fields in MapStruct Spring Core","body":"<p>One solution is to group together multiple mapping annotations into a custom annotation. For example, you can create an annotation for ignoring audit mappings:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target({ElementType.METHOD})\n@Retention(RUNTIME)\n@Mapping(target = &quot;createdAt&quot;, ignore = true)\n@Mapping(target = &quot;updatedAt&quot;, ignore = true)\n@Mapping(target = &quot;createdBy&quot;, ignore = true)\n@Mapping(target = &quot;modifiedBy&quot;, ignore = true)\npublic @interface IgnoreAuditMapping {}\n</code></pre>\n<p>The annotation can be used in mappers to reduce duplication:</p>\n<pre><code>@Mapper(config = MapperConfiguration.class)\npublic interface CategoryMapper {\n    ...\n\n    @IgnoreAuditMapping\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\n    Category toCategory(final CategoryDto categoryDto);\n\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":28515520,"reputation":15,"user_id":21824932,"display_name":"Oleksandr Zhytariuk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76296695,"answer_count":1,"score":1,"last_activity_date":1684739239,"creation_date":1684532617,"question_id":76292575,"body_markdown":"There are ways how can I remove the same ignore mapping without reapeated @Mapping annotations on different methods, for example audit fields in one short annotation or interface like IgnoreMappingAuditionFields or other ways?\r\nSo what ways you can recommend for resolve this problem?\r\n\r\n\r\n\r\n\r\n\r\n```\r\n@Mapper(config = MapperConfiguration.class)\r\npublic interface CategoryMapper {\r\n    CategoryDto toDto(final Category category);\r\n\r\n    @Mapping(target = &quot;createdAt&quot;, ignore = true)\r\n    @Mapping(target = &quot;updatedAt&quot;, ignore = true)\r\n    @Mapping(target = &quot;createdBy&quot;, ignore = true)\r\n    @Mapping(target = &quot;modifiedBy&quot;, ignore = true)\r\n    @Mapping(target = &quot;id&quot;, ignore = true)\r\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\r\n    Category toCategory(final CategoryDto categoryDto);\r\n\r\n    @Mapping(target = &quot;createdAt&quot;, ignore = true)\r\n    @Mapping(target = &quot;updatedAt&quot;, ignore = true)\r\n    @Mapping(target = &quot;createdBy&quot;, ignore = true)\r\n    @Mapping(target = &quot;modifiedBy&quot;, ignore = true)\r\n    @Mapping(target = &quot;id&quot;, ignore = true)\r\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\r\n    @Mapping(target = &quot;parentCategory&quot;, ignore = true)\r\n    @Mapping(target = &quot;childCategories&quot;, ignore = true)\r\n    Category toDomain(final CategoryCreationRequest categoryCreationRequest);\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nRemove repeated fields","title":"Efficiently removing duplicate @Mapping annotations for audit fields in MapStruct Spring Core","body":"<p>There are ways how can I remove the same ignore mapping without reapeated @Mapping annotations on different methods, for example audit fields in one short annotation or interface like IgnoreMappingAuditionFields or other ways?\nSo what ways you can recommend for resolve this problem?</p>\n<pre><code>@Mapper(config = MapperConfiguration.class)\npublic interface CategoryMapper {\n    CategoryDto toDto(final Category category);\n\n    @Mapping(target = &quot;createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\n    Category toCategory(final CategoryDto categoryDto);\n\n    @Mapping(target = &quot;createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory&quot;, ignore = true)\n    @Mapping(target = &quot;childCategories&quot;, ignore = true)\n    Category toDomain(final CategoryCreationRequest categoryCreationRequest);\n}\n</code></pre>\n<p>Remove repeated fields</p>\n"},{"tags":["java","maven","intellij-idea","javafx","jpackage"],"answers":[{"comments":[{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1684592631,"post_id":76295676,"comment_id":134541264,"body_markdown":"Hi. That makes sense. I don&#39;t have the controlsfx.jmod, not sure it exists. I will try what you recommend when only having the .rar. Can you please add a little bit more information about the dependency part, not completely sure where to start :) I read that I don&#39;t have to pass any information about Controlsfx to JPackage?","body":"Hi. That makes sense. I don&#39;t have the controlsfx.jmod, not sure it exists. I will try what you recommend when only having the .rar. Can you please add a little bit more information about the dependency part, not completely sure where to start :) I read that I don&#39;t have to pass any information about Controlsfx to JPackage?"},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":1,"creation_date":1684592998,"post_id":76295676,"comment_id":134541319,"body_markdown":"Edit: Its working now, using what you recommended. Thank you very much.","body":"Edit: Its working now, using what you recommended. Thank you very much."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1684620876,"post_id":76295676,"comment_id":134544435,"body_markdown":"`jlink` does not require JMOD files. As long as the JAR file has a `module-info` descriptor it will work just fine. You only need a JMOD file if you want to package things like native code and licenses along with your class files in a clean manner.","body":"<code>jlink</code> does not require JMOD files. As long as the JAR file has a <code>module-info</code> descriptor it will work just fine. You only need a JMOD file if you want to package things like native code and licenses along with your class files in a clean manner."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1684621115,"post_id":76295676,"comment_id":134544454,"body_markdown":"@droid You have `--add-modules javafx.controls,controlsfx` in your question, but the [module name](https://github.com/controlsfx/controlsfx/blob/0a8caa4ad2abb3dea48fecb10819ea540748e308/controlsfx/src/main/java/module-info.java#L31) for _ControlsFX_ is `org.controlsfx.controls`.","body":"@droid You have <code>--add-modules javafx.controls,controlsfx</code> in your question, but the <a href=\"https://github.com/controlsfx/controlsfx/blob/0a8caa4ad2abb3dea48fecb10819ea540748e308/controlsfx/src/main/java/module-info.java#L31\" rel=\"nofollow noreferrer\">module name</a> for <i>ControlsFX</i> is <code>org.controlsfx.controls</code>."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1684654935,"post_id":76295676,"comment_id":134546356,"body_markdown":"@Slaw that is useful info about jmod files, I shall amend my answer.","body":"@Slaw that is useful info about jmod files, I shall amend my answer."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1684682245,"post_id":76295676,"comment_id":134549288,"body_markdown":"I just tried again with the correct package name and this time JPackage runs fine and the installed program also works fine. Thanks. I learned a lot.","body":"I just tried again with the correct package name and this time JPackage runs fine and the installed program also works fine. Thanks. I learned a lot."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1684737603,"post_id":76295676,"comment_id":134554839,"body_markdown":"@droid Sorry to be pedantic, but you used the wrong **module** name, not the wrong _package_ name. Regardless, I&#39;m glad you got it to work :)","body":"@droid Sorry to be pedantic, but you used the wrong <b>module</b> name, not the wrong <i>package</i> name. Regardless, I&#39;m glad you got it to work :)"}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":7,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1684738866,"creation_date":1684592260,"answer_id":76295676,"question_id":76295523,"body_markdown":"As mentioned by @Slaw in comments below, you have used the wrong module name. You can confirm the module name of a jar by viewing the [module definition][1]. This tells you the name of the module to use with jpackage eg `org.controlsfx.controls` or will print `No module descriptor found.  Derived automatic module.` if a non module jar:\r\n\r\n    jar --file=controlsfx.jar --describe-module\r\n    org.controlsfx.controls@11.1.2 jar:file:///c:/dev/mods/controlsfx.jar!/module-info.class\r\n    ... plus details of exports\r\n\r\nThe `jpackage` command will use `jlink` internally to build a runtime image that contains all the modules listed:\r\n\r\n    jpackage --input myinput --add-modules javafx.controls,org.controlsfx.controls --module-path c:\\xyz...\\javafx-jmods-NN --module-path c:\\abc...\\controlsfx.jar  --dest myoutput {otherargs}\r\n\r\nAfter installation you can check which modules are in the installed runtime with:\r\n\r\n     C:\\Program Files\\XYZ\\runtime\\bin\\java --list-modules\r\n     ...\r\n     javafx.controls@somever\r\n     ...\r\n     org.controlsfx.controls@somever\r\n\r\n\r\nAlternatively you can use a jar (module or non module) with `jpackage` by copying the jar into your target release structure somewhere under the `--input` directory. Then it will be picked up as a classpath jar dependency (inside the release directories) rather than as a module dependency (inside the runtime image as above).\r\n\r\nYou can check if a jar was added as as classpath dependency by looking at the generated `{launcher}.cfg`, it should contain a line:\r\n\r\n     app.classpath=$APPDIR\\whateverplaceunder--input.dir\\controlsfx.jar\r\n\r\n  [1]: https://stackoverflow.com/questions/46616520/list-modules-in-jar-file/46617033#comment134547336_46617033","title":"Jpackage with ControlsFX","body":"<p>As mentioned by @Slaw in comments below, you have used the wrong module name. You can confirm the module name of a jar by viewing the <a href=\"https://stackoverflow.com/questions/46616520/list-modules-in-jar-file/46617033#comment134547336_46617033\">module definition</a>. This tells you the name of the module to use with jpackage eg <code>org.controlsfx.controls</code> or will print <code>No module descriptor found.  Derived automatic module.</code> if a non module jar:</p>\n<pre><code>jar --file=controlsfx.jar --describe-module\norg.controlsfx.controls@11.1.2 jar:file:///c:/dev/mods/controlsfx.jar!/module-info.class\n... plus details of exports\n</code></pre>\n<p>The <code>jpackage</code> command will use <code>jlink</code> internally to build a runtime image that contains all the modules listed:</p>\n<pre><code>jpackage --input myinput --add-modules javafx.controls,org.controlsfx.controls --module-path c:\\xyz...\\javafx-jmods-NN --module-path c:\\abc...\\controlsfx.jar  --dest myoutput {otherargs}\n</code></pre>\n<p>After installation you can check which modules are in the installed runtime with:</p>\n<pre><code> C:\\Program Files\\XYZ\\runtime\\bin\\java --list-modules\n ...\n javafx.controls@somever\n ...\n org.controlsfx.controls@somever\n</code></pre>\n<p>Alternatively you can use a jar (module or non module) with <code>jpackage</code> by copying the jar into your target release structure somewhere under the <code>--input</code> directory. Then it will be picked up as a classpath jar dependency (inside the release directories) rather than as a module dependency (inside the runtime image as above).</p>\n<p>You can check if a jar was added as as classpath dependency by looking at the generated <code>{launcher}.cfg</code>, it should contain a line:</p>\n<pre><code> app.classpath=$APPDIR\\whateverplaceunder--input.dir\\controlsfx.jar\n</code></pre>\n"}],"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76295676,"answer_count":1,"score":4,"last_activity_date":1684738866,"creation_date":1684589976,"question_id":76295523,"body_markdown":"I’m having some issues including Controlsfx when using Jpackage.\r\n\r\nI have set up a project in IntelliJ with JavaFX using a Archetype from Maven Central. Works fine with JavaFX in IntelliJ. I can package it with Maven (from IntelliJ) and use JPackage for making an exe-installer, that also works fine. I’m using this command with JPackage:\r\n\r\n    jpackage --input C:\\...\\target --add-modules javafx.controls --module-path C:\\...\\openjfx-20.0.1_windows-x64_bin-jmods\\javafx-jmods-20.0.1 --module-path --win-console --dest c:\\outputs --main-jar tests-1.0-SNAPSHOT.jar --main-class tests.App\r\n\r\nNow I want to incorporate ControlsFX so I download the ControlsFX .JAR from Maven: https://mvnrepository.com/artifact/org.controlsfx/controlsfx/11.1.2IntelliJ \r\nIn IntelliJ I add it as a Module. All fine, I wan use ControlsFX in my project.\r\n\r\nNow I want to make an exe-installer (like above without ControlsFX) so I add ControlsFX to my JPackage command:\r\n\r\n    jpackage --input C:\\...\\target --add-modules javafx.controls,controlsfx --module-path C:\\...\\openjfx-20.0.1_windows-x64_bin-jmods\\javafx-jmods-20.0.1 --module-path C:\\..\\controlsfx --win-console --dest c:\\test --main-jar tests-1.0-SNAPSHOT.jar --main-class tests.App\r\n\r\nWhen running the command I get this:\r\n\r\njava.lang.module.FindException: Module controlsfx not found\r\n\r\nI know my issue is related to the command I pass to JPackage but cant figure out what is.\r\n\r\n","title":"Jpackage with ControlsFX","body":"<p>I’m having some issues including Controlsfx when using Jpackage.</p>\n<p>I have set up a project in IntelliJ with JavaFX using a Archetype from Maven Central. Works fine with JavaFX in IntelliJ. I can package it with Maven (from IntelliJ) and use JPackage for making an exe-installer, that also works fine. I’m using this command with JPackage:</p>\n<pre><code>jpackage --input C:\\...\\target --add-modules javafx.controls --module-path C:\\...\\openjfx-20.0.1_windows-x64_bin-jmods\\javafx-jmods-20.0.1 --module-path --win-console --dest c:\\outputs --main-jar tests-1.0-SNAPSHOT.jar --main-class tests.App\n</code></pre>\n<p>Now I want to incorporate ControlsFX so I download the ControlsFX .JAR from Maven: <a href=\"https://mvnrepository.com/artifact/org.controlsfx/controlsfx/11.1.2IntelliJ\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.controlsfx/controlsfx/11.1.2IntelliJ</a>\nIn IntelliJ I add it as a Module. All fine, I wan use ControlsFX in my project.</p>\n<p>Now I want to make an exe-installer (like above without ControlsFX) so I add ControlsFX to my JPackage command:</p>\n<pre><code>jpackage --input C:\\...\\target --add-modules javafx.controls,controlsfx --module-path C:\\...\\openjfx-20.0.1_windows-x64_bin-jmods\\javafx-jmods-20.0.1 --module-path C:\\..\\controlsfx --win-console --dest c:\\test --main-jar tests-1.0-SNAPSHOT.jar --main-class tests.App\n</code></pre>\n<p>When running the command I get this:</p>\n<p>java.lang.module.FindException: Module controlsfx not found</p>\n<p>I know my issue is related to the command I pass to JPackage but cant figure out what is.</p>\n"},{"tags":["java","string","diacritics"],"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":0,"creation_date":1680032153,"post_id":75870129,"comment_id":133827016,"body_markdown":"Nice work! The code works, that&#39;s most important. The `public static void main(String[] args)` already is a method. But you can just rename it to whatever you want, remove the argument, and you&#39;ll have your method. It would probably be best as `public static String removeDiacritics(String textWithDiacritics)` that takes the input string as a parameter and returns the text without diacritics instead of printing it out. Then you can use that from your main method.","body":"Nice work! The code works, that&#39;s most important. The <code>public static void main(String[] args)</code> already is a method. But you can just rename it to whatever you want, remove the argument, and you&#39;ll have your method. It would probably be best as <code>public static String removeDiacritics(String textWithDiacritics)</code> that takes the input string as a parameter and returns the text without diacritics instead of printing it out. Then you can use that from your main method."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1684644055,"post_id":75870129,"comment_id":134545723,"body_markdown":"Just a comment on &quot;normal&quot; letters-  that isn&#39;t really how things work in all languages.  In some, they think of the letter with the diacritics as a different letter.  For example, &#252; in some languages is not a u with an attachment, they are different letters and the speakers do not think of the two as being related in any way.","body":"Just a comment on &quot;normal&quot; letters-  that isn&#39;t really how things work in all languages.  In some, they think of the letter with the diacritics as a different letter.  For example, &#252; in some languages is not a u with an attachment, they are different letters and the speakers do not think of the two as being related in any way."},{"owner":{"account_id":5688520,"reputation":7765,"user_id":4497253,"display_name":"CoronA"},"score":0,"creation_date":1684644339,"post_id":75870129,"comment_id":134545733,"body_markdown":"Does this link help? https://www.baeldung.com/java-remove-accents-from-text. It uses `java.text.Normalizer` to split the composed characters and then removes the attached accents.","body":"Does this link help? <a href=\"https://www.baeldung.com/java-remove-accents-from-text\" rel=\"nofollow noreferrer\">baeldung.com/java-remove-accents-from-text</a>. It uses <code>java.text.Normalizer</code> to split the composed characters and then removes the attached accents."}],"answers":[{"tags":[],"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680039176,"creation_date":1680039176,"answer_id":75871254,"question_id":75870129,"body_markdown":"There&#39;s still more to do, but the below code could give you a basic idea on how to create various methods.\r\n\r\nI separated two methods out of the original code. You could improve it still, first and foremost go ahead and create a `private static void printReversed()` method to contain the reverse-text printing code. Next, slightly more advanced and more involved would be making all the methods return something instead of directly printing out stuff (like `removeDiacritics()` does). In programming we generally frown upon methods with &quot;side-effects&quot; (like printing) and prefer pure methods that take something in, transform it and return something back, so that the calling code can do whatever it wants with it. Like printing :).\r\n\r\n```java\r\npublic class Main {\r\n\r\n\tpublic static void main(String... args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tString input = sc.nextLine();\r\n\t\tSystem.out.println(input);\r\n\t\tSystem.out.println();\r\n\r\n\t\tprintStatistics(input);\r\n\r\n\t\tchar[] reversedText = input.toCharArray();\r\n\t\tfor (int i = (reversedText.length) - 1; i &gt;= 0; i--) {\r\n\t\t\tSystem.out.print(reversedText[i]);\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\r\n\t\tString normalized = removeDiacritics(input);\r\n\t\tSystem.out.println(normalized);\r\n\t}\r\n\r\n\tprivate static void printStatistics(String input) {\r\n\t\tString[] sentences = input.split(&quot;\\\\. &quot;);\r\n\r\n\t\tint sentenceCount = 0;\r\n\t\tint vowelCount = 0;\r\n\t\tint consonantCount = 0;\r\n\t\tfor (String sentence : sentences) {\r\n\t\t\tvowelCount = 0;\r\n\t\t\tconsonantCount = 0;\r\n\t\t\tsentenceCount++;\r\n\t\t\tSystem.out.println(sentence);\r\n\t\t\tString[] words = sentence.split(&quot; &quot;);\r\n\t\t\tSystem.out.println(&quot;Number of words is &quot; + words.length);\r\n\t\t\tString lowerCase = sentence.toLowerCase();\r\n\t\t\tchar[] chars = lowerCase.toCharArray();\r\n\t\t\tSystem.out.println(&quot;Number of characters is &quot; + sentence.length());\r\n\t\t\tfor (char c : chars) {\r\n\t\t\t\tif (c == &#39;a&#39; || c == &#39;e&#39; || c == &#39;i&#39; || c == &#39;o&#39; || c == &#39;u&#39; || c == &#39;y&#39;) {\r\n\t\t\t\t\tvowelCount++;\r\n\t\t\t\t} else if (c == &#39;h&#39; || c == &#39;k&#39; || c == &#39;r&#39; || c == &#39;d&#39; || c == &#39;t&#39; || c == &#39;n&#39;) {\r\n\t\t\t\t\tconsonantCount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;Number of vowels is &quot; + vowelCount);\r\n\t\t\tSystem.out.println(&quot;Number of consonants is &quot; + consonantCount);\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\t\tSystem.out.println(&quot;Number of sentences is &quot; + sentenceCount);\r\n\t\tSystem.out.println();\r\n\t}\r\n\r\n\tprivate static String removeDiacritics(String textWithDiacritics) {\r\n\t\tchar[] normalizedText = textWithDiacritics.toCharArray();\r\n\t\tchar[] diacritics = { &#39;ě&#39;, &#39;š&#39;, &#39;č&#39;, &#39;ř&#39;, &#39;ž&#39;, &#39;&#253;&#39;, &#39;&#225;&#39;, &#39;&#237;&#39;, &#39;&#233;&#39;, &#39;&#250;&#39;, &#39;ů&#39;, &#39;Ě&#39;, &#39;Š&#39;, &#39;Č&#39;, &#39;Ř&#39;, &#39;Ž&#39;, &#39;&#221;&#39;, &#39;&#193;&#39;, &#39;&#205;&#39;, &#39;&#201;&#39;, &#39;&#218;&#39;, &#39;Ů&#39; };\r\n\t\tchar[] normal = { &#39;e&#39;, &#39;s&#39;, &#39;c&#39;, &#39;r&#39;, &#39;z&#39;, &#39;y&#39;, &#39;a&#39;, &#39;i&#39;, &#39;e&#39;, &#39;u&#39;, &#39;u&#39;, &#39;E&#39;, &#39;S&#39;, &#39;C&#39;, &#39;R&#39;, &#39;Z&#39;, &#39;Y&#39;, &#39;A&#39;, &#39;I&#39;, &#39;E&#39;, &#39;U&#39;, &#39;U&#39; };\r\n\t\tfor (int i = 0; i &lt; normalizedText.length; i++) {\r\n\t\t\tchar c = normalizedText[i];\r\n\t\t\tint index = -1;\r\n\t\t\tfor (int j = 0; j &lt; diacritics.length; j++) {\r\n\t\t\t\tif (c == diacritics[j]) {\r\n\t\t\t\t\tindex = j;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (index != -1) {\r\n\t\t\t\tnormalizedText[i] = normal[index];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn String.valueOf(normalizedText);\r\n\t}\r\n}\r\n```","title":"Work with Strings, Java, Diacritic Method","body":"<p>There's still more to do, but the below code could give you a basic idea on how to create various methods.</p>\n<p>I separated two methods out of the original code. You could improve it still, first and foremost go ahead and create a <code>private static void printReversed()</code> method to contain the reverse-text printing code. Next, slightly more advanced and more involved would be making all the methods return something instead of directly printing out stuff (like <code>removeDiacritics()</code> does). In programming we generally frown upon methods with &quot;side-effects&quot; (like printing) and prefer pure methods that take something in, transform it and return something back, so that the calling code can do whatever it wants with it. Like printing :).</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n\n    public static void main(String... args) {\n        Scanner sc = new Scanner(System.in);\n        String input = sc.nextLine();\n        System.out.println(input);\n        System.out.println();\n\n        printStatistics(input);\n\n        char[] reversedText = input.toCharArray();\n        for (int i = (reversedText.length) - 1; i &gt;= 0; i--) {\n            System.out.print(reversedText[i]);\n        }\n        System.out.println();\n\n        String normalized = removeDiacritics(input);\n        System.out.println(normalized);\n    }\n\n    private static void printStatistics(String input) {\n        String[] sentences = input.split(&quot;\\\\. &quot;);\n\n        int sentenceCount = 0;\n        int vowelCount = 0;\n        int consonantCount = 0;\n        for (String sentence : sentences) {\n            vowelCount = 0;\n            consonantCount = 0;\n            sentenceCount++;\n            System.out.println(sentence);\n            String[] words = sentence.split(&quot; &quot;);\n            System.out.println(&quot;Number of words is &quot; + words.length);\n            String lowerCase = sentence.toLowerCase();\n            char[] chars = lowerCase.toCharArray();\n            System.out.println(&quot;Number of characters is &quot; + sentence.length());\n            for (char c : chars) {\n                if (c == 'a' || c == 'e' || c == 'i' || c == 'o' || c == 'u' || c == 'y') {\n                    vowelCount++;\n                } else if (c == 'h' || c == 'k' || c == 'r' || c == 'd' || c == 't' || c == 'n') {\n                    consonantCount++;\n                }\n            }\n            System.out.println(&quot;Number of vowels is &quot; + vowelCount);\n            System.out.println(&quot;Number of consonants is &quot; + consonantCount);\n        }\n        System.out.println();\n        System.out.println(&quot;Number of sentences is &quot; + sentenceCount);\n        System.out.println();\n    }\n\n    private static String removeDiacritics(String textWithDiacritics) {\n        char[] normalizedText = textWithDiacritics.toCharArray();\n        char[] diacritics = { 'ě', 'š', 'č', 'ř', 'ž', 'ý', 'á', 'í', 'é', 'ú', 'ů', 'Ě', 'Š', 'Č', 'Ř', 'Ž', 'Ý', 'Á', 'Í', 'É', 'Ú', 'Ů' };\n        char[] normal = { 'e', 's', 'c', 'r', 'z', 'y', 'a', 'i', 'e', 'u', 'u', 'E', 'S', 'C', 'R', 'Z', 'Y', 'A', 'I', 'E', 'U', 'U' };\n        for (int i = 0; i &lt; normalizedText.length; i++) {\n            char c = normalizedText[i];\n            int index = -1;\n            for (int j = 0; j &lt; diacritics.length; j++) {\n                if (c == diacritics[j]) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index != -1) {\n                normalizedText[i] = normal[index];\n            }\n        }\n\n        return String.valueOf(normalizedText);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684644046,"creation_date":1684643128,"answer_id":76298295,"question_id":75870129,"body_markdown":"To replace all the diacritics with normal characters, you&#39;ll need a way to map one character to another.  \r\nIt appears you have this already, 2 separate arrays, where the index indicates the relationship.\r\n\r\nI was able to produce valid results with the following method.\r\n\r\n```java\r\nString replace(String string) {\r\n    char[] diacritics = { &#39;ě&#39;, &#39;š&#39;, &#39;č&#39;, &#39;ř&#39;, &#39;ž&#39;, &#39;&#253;&#39;, &#39;&#225;&#39;, &#39;&#237;&#39;, &#39;&#233;&#39;, &#39;&#250;&#39;, &#39;ů&#39;, &#39;Ě&#39;, &#39;Š&#39;, &#39;Č&#39;, &#39;Ř&#39;, &#39;Ž&#39;, &#39;&#221;&#39;, &#39;&#193;&#39;, &#39;&#205;&#39;, &#39;&#201;&#39;, &#39;&#218;&#39;, &#39;Ů&#39; };\r\n    char[] normal = { &#39;e&#39;, &#39;s&#39;, &#39;c&#39;, &#39;r&#39;, &#39;z&#39;, &#39;y&#39;, &#39;a&#39;, &#39;i&#39;, &#39;e&#39;, &#39;u&#39;, &#39;u&#39;, &#39;E&#39;, &#39;S&#39;, &#39;C&#39;, &#39;R&#39;, &#39;Z&#39;, &#39;Y&#39;, &#39;A&#39;, &#39;I&#39;, &#39;E&#39;, &#39;U&#39;, &#39;U&#39; };\r\n    int index = 0;\r\n    for (char character : diacritics)\r\n        string = string.replace(character, normal[index++]);\r\n    return string;\r\n}\r\n```\r\n\r\nExample output\r\n\r\n```none\r\nexpos&#233; = expose\r\nlam&#233; = lame\r\nmat&#233; = mate\r\nros&#233; = rose\r\nr&#233;sum&#233; = resume\r\n```\r\n\r\nI reviewed your code, and made a few changes as recommendations.  \r\nYou can replace the vowel and consonant counting procedures with regular expression pattern matching.\r\n\r\n\r\n```java\r\nScanner sc = new Scanner(System.in);\r\nString input = sc.nextLine();\r\nSystem.out.println(input);\r\nString[] sentences = input.split(&quot;\\\\. &quot;);\r\nchar[] reversedText = input.toCharArray();\r\nchar[] normalizedText;\r\nint sentenceCount = 0, vowelCount, consonantCount;\r\nfor (String sentence : sentences) {\r\n    vowelCount = consonantCount = 0;\r\n    sentenceCount++;\r\n    System.out.println(sentence);\r\n    String[] words = sentence.split(&quot; &quot;);\r\n    System.out.println(&quot;Number of words is &quot; + words.length);\r\n    String lowerCase = sentence.toLowerCase();\r\n    char[] chars = lowerCase.toCharArray();\r\n    System.out.println(&quot;Number of characters is &quot; + sentence.length());\r\n    for (char c : chars) {\r\n        if (String.valueOf(c).matches(&quot;[aeiouy]&quot;)) vowelCount++;\r\n        else if (String.valueOf(c).matches(&quot;[hkrdtn]&quot;)) consonantCount++;\r\n    }\r\n    System.out.println(&quot;Number of vowels is &quot; + vowelCount);\r\n    System.out.println(&quot;Number of consonants is &quot; + consonantCount);\r\n}\r\nSystem.out.println(&quot; &quot;);\r\nSystem.out.println(&quot;Number of sentences is &quot; + sentenceCount);\r\nfor (int i = (reversedText.length) - 1; i &gt;= 0; i--)\r\n    System.out.print(reversedText[i]);\r\nSystem.out.println(&quot; &quot;);\r\nnormalizedText = replace(input).toCharArray();\r\nSystem.out.println(normalizedText);\r\n```","title":"Work with Strings, Java, Diacritic Method","body":"<p>To replace all the diacritics with normal characters, you'll need a way to map one character to another.<br />\nIt appears you have this already, 2 separate arrays, where the index indicates the relationship.</p>\n<p>I was able to produce valid results with the following method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String replace(String string) {\n    char[] diacritics = { 'ě', 'š', 'č', 'ř', 'ž', 'ý', 'á', 'í', 'é', 'ú', 'ů', 'Ě', 'Š', 'Č', 'Ř', 'Ž', 'Ý', 'Á', 'Í', 'É', 'Ú', 'Ů' };\n    char[] normal = { 'e', 's', 'c', 'r', 'z', 'y', 'a', 'i', 'e', 'u', 'u', 'E', 'S', 'C', 'R', 'Z', 'Y', 'A', 'I', 'E', 'U', 'U' };\n    int index = 0;\n    for (char character : diacritics)\n        string = string.replace(character, normal[index++]);\n    return string;\n}\n</code></pre>\n<p>Example output</p>\n<pre class=\"lang-none prettyprint-override\"><code>exposé = expose\nlamé = lame\nmaté = mate\nrosé = rose\nrésumé = resume\n</code></pre>\n<p>I reviewed your code, and made a few changes as recommendations.<br />\nYou can replace the vowel and consonant counting procedures with regular expression pattern matching.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in);\nString input = sc.nextLine();\nSystem.out.println(input);\nString[] sentences = input.split(&quot;\\\\. &quot;);\nchar[] reversedText = input.toCharArray();\nchar[] normalizedText;\nint sentenceCount = 0, vowelCount, consonantCount;\nfor (String sentence : sentences) {\n    vowelCount = consonantCount = 0;\n    sentenceCount++;\n    System.out.println(sentence);\n    String[] words = sentence.split(&quot; &quot;);\n    System.out.println(&quot;Number of words is &quot; + words.length);\n    String lowerCase = sentence.toLowerCase();\n    char[] chars = lowerCase.toCharArray();\n    System.out.println(&quot;Number of characters is &quot; + sentence.length());\n    for (char c : chars) {\n        if (String.valueOf(c).matches(&quot;[aeiouy]&quot;)) vowelCount++;\n        else if (String.valueOf(c).matches(&quot;[hkrdtn]&quot;)) consonantCount++;\n    }\n    System.out.println(&quot;Number of vowels is &quot; + vowelCount);\n    System.out.println(&quot;Number of consonants is &quot; + consonantCount);\n}\nSystem.out.println(&quot; &quot;);\nSystem.out.println(&quot;Number of sentences is &quot; + sentenceCount);\nfor (int i = (reversedText.length) - 1; i &gt;= 0; i--)\n    System.out.print(reversedText[i]);\nSystem.out.println(&quot; &quot;);\nnormalizedText = replace(input).toCharArray();\nSystem.out.println(normalizedText);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684738088,"creation_date":1684738088,"answer_id":76303616,"question_id":75870129,"body_markdown":"I would rewrite your code to break out each operation into its own, unit-testable and well named, method:\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        String input = sc.nextLine();\r\n        System.out.println(input);\r\n        String[] sentences = input.split(&quot; ?\\\\. ?&quot;);\r\n        for (String sentence : sentences) {\r\n            System.out.println(&quot;Number of words is &quot; + countWords(sentence));\r\n            System.out.println(&quot;Number of characters is &quot; + sentence.length());\r\n            System.out.println(&quot;Reversed is &quot; + new StringBuilder(sentence).reverse());\r\n            System.out.println(&quot;Diacritics removed is &quot; + removeDiacritics(sentence));\r\n            System.out.println(&quot;Number of vowels is &quot; + countVowels(sentence));\r\n            System.out.println(&quot;Number of consonants is &quot; + countConsonants(sentence));\r\n        }\r\n    }\r\n\r\n    private static final Map&lt;String, String&gt; DIACRITIC_MAPPINGS = new HashMap&lt;&gt;() {{\r\n        put(&quot;ě&quot;, &quot;e&quot;);\r\n        put(&quot;š&quot;, &quot;s&quot;);\r\n        put(&quot;č&quot;, &quot;c&quot;);\r\n        put(&quot;ř&quot;, &quot;r&quot;);\r\n        put(&quot;ž&quot;, &quot;z&quot;);\r\n        put(&quot;&#253;&quot;, &quot;y&quot;);\r\n        put(&quot;&#225;&quot;, &quot;a&quot;);\r\n        put(&quot;&#237;&quot;, &quot;i&quot;);\r\n        put(&quot;&#233;&quot;, &quot;e&quot;);\r\n        put(&quot;&#250;&quot;, &quot;u&quot;);\r\n        put(&quot;ů&quot;, &quot;u&quot;);\r\n        put(&quot;Ě&quot;, &quot;E&quot;);\r\n        put(&quot;Š&quot;, &quot;S&quot;);\r\n        put(&quot;Č&quot;, &quot;C&quot;);\r\n        put(&quot;Ř&quot;, &quot;R&quot;);\r\n        put(&quot;Ž&quot;, &quot;Z&quot;);\r\n        put(&quot;&#221;&quot;, &quot;Y&quot;);\r\n        put(&quot;&#193;&quot;, &quot;A&quot;);\r\n        put(&quot;&#205;&quot;, &quot;I&quot;);\r\n        put(&quot;&#201;&quot;, &quot;E&quot;);\r\n        put(&quot;&#218;&quot;, &quot;U&quot;);\r\n        put(&quot;Ů&quot;, &quot;U&quot;);\r\n    }};\r\n\r\n    private static final Pattern DIACRITICS = Pattern.compile(&#39;[&#39; + String.join(&quot;&quot;, DIACRITIC_MAPPINGS.keySet()) + &#39;]&#39;);\r\n\r\n    public static int countWords(String str) {\r\n        return str.trim().split(&quot; +&quot;).length;\r\n    }\r\n\r\n    public static int countVowels(String str) {\r\n        return str.replaceAll(&quot;(?i)[^aeiou]&quot;, &quot;&quot;).length();\r\n    }\r\n\r\n    public static int countConsonants(String str) {\r\n        return str.replaceAll(&quot;(?i)[ .aeiou]&quot;, &quot;&quot;).length();\r\n    }\r\n\r\n    public static String removeDiacritics(String str) {\r\n        return DIACRITICS.matcher(str).replaceAll(mr -&gt; DIACRITIC_MAPPINGS.get(mr.group()));\r\n    }\r\n}\r\n```","title":"Work with Strings, Java, Diacritic Method","body":"<p>I would rewrite your code to break out each operation into its own, unit-testable and well named, method:</p>\n<pre><code>    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String input = sc.nextLine();\n        System.out.println(input);\n        String[] sentences = input.split(&quot; ?\\\\. ?&quot;);\n        for (String sentence : sentences) {\n            System.out.println(&quot;Number of words is &quot; + countWords(sentence));\n            System.out.println(&quot;Number of characters is &quot; + sentence.length());\n            System.out.println(&quot;Reversed is &quot; + new StringBuilder(sentence).reverse());\n            System.out.println(&quot;Diacritics removed is &quot; + removeDiacritics(sentence));\n            System.out.println(&quot;Number of vowels is &quot; + countVowels(sentence));\n            System.out.println(&quot;Number of consonants is &quot; + countConsonants(sentence));\n        }\n    }\n\n    private static final Map&lt;String, String&gt; DIACRITIC_MAPPINGS = new HashMap&lt;&gt;() {{\n        put(&quot;ě&quot;, &quot;e&quot;);\n        put(&quot;š&quot;, &quot;s&quot;);\n        put(&quot;č&quot;, &quot;c&quot;);\n        put(&quot;ř&quot;, &quot;r&quot;);\n        put(&quot;ž&quot;, &quot;z&quot;);\n        put(&quot;ý&quot;, &quot;y&quot;);\n        put(&quot;á&quot;, &quot;a&quot;);\n        put(&quot;í&quot;, &quot;i&quot;);\n        put(&quot;é&quot;, &quot;e&quot;);\n        put(&quot;ú&quot;, &quot;u&quot;);\n        put(&quot;ů&quot;, &quot;u&quot;);\n        put(&quot;Ě&quot;, &quot;E&quot;);\n        put(&quot;Š&quot;, &quot;S&quot;);\n        put(&quot;Č&quot;, &quot;C&quot;);\n        put(&quot;Ř&quot;, &quot;R&quot;);\n        put(&quot;Ž&quot;, &quot;Z&quot;);\n        put(&quot;Ý&quot;, &quot;Y&quot;);\n        put(&quot;Á&quot;, &quot;A&quot;);\n        put(&quot;Í&quot;, &quot;I&quot;);\n        put(&quot;É&quot;, &quot;E&quot;);\n        put(&quot;Ú&quot;, &quot;U&quot;);\n        put(&quot;Ů&quot;, &quot;U&quot;);\n    }};\n\n    private static final Pattern DIACRITICS = Pattern.compile('[' + String.join(&quot;&quot;, DIACRITIC_MAPPINGS.keySet()) + ']');\n\n    public static int countWords(String str) {\n        return str.trim().split(&quot; +&quot;).length;\n    }\n\n    public static int countVowels(String str) {\n        return str.replaceAll(&quot;(?i)[^aeiou]&quot;, &quot;&quot;).length();\n    }\n\n    public static int countConsonants(String str) {\n        return str.replaceAll(&quot;(?i)[ .aeiou]&quot;, &quot;&quot;).length();\n    }\n\n    public static String removeDiacritics(String str) {\n        return DIACRITICS.matcher(str).replaceAll(mr -&gt; DIACRITIC_MAPPINGS.get(mr.group()));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27545743,"reputation":21,"user_id":21021708,"display_name":"QuackGaming1220"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1684738088,"creation_date":1680030219,"question_id":75870129,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n            public static void main(String[] args) {\r\n                Scanner sc = new Scanner(System.in);\r\n                String input = sc.nextLine();\r\n                System.out.println(input);\r\n                String[] sentences = input.split(&quot;\\\\. &quot;);\r\n                char[] reversedText = input.toCharArray();\r\n                char[] normalizedText = input.toCharArray();\r\n                int sentenceCount = 0;\r\n                int vowelCount = 0;\r\n                int consonantCount = 0;\r\n                for (String sentence : sentences) {\r\n                    vowelCount = 0;\r\n                    consonantCount = 0;\r\n                    sentenceCount++;\r\n                    System.out.println(sentence);\r\n                    String[] words = sentence.split(&quot; &quot;);\r\n                    System.out.println(&quot;Number of words is &quot; + words.length);\r\n                    String lowerCase = sentence.toLowerCase();\r\n                    char[] chars = lowerCase.toCharArray();\r\n                    System.out.println(&quot;Number of characters is &quot; + sentence.length());\r\n                    for (char c : chars) {\r\n                        if (c == &#39;a&#39; || c == &#39;e&#39; || c == &#39;i&#39; || c == &#39;o&#39; || c == &#39;u&#39; || c == &#39;y&#39;) {\r\n                            vowelCount++;\r\n                        } else if (c == &#39;h&#39; || c == &#39;k&#39; || c == &#39;r&#39; || c == &#39;d&#39; || c == &#39;t&#39; || c == &#39;n&#39;) {\r\n                            consonantCount++;\r\n                        }\r\n                    }\r\n                    System.out.println(&quot;Number of vowels is &quot; + vowelCount);\r\n                    System.out.println(&quot;Number of consonants is &quot; + consonantCount);\r\n                }\r\n                System.out.println(&quot; &quot;);\r\n                System.out.println(&quot;Number of sentences is &quot; + sentenceCount);\r\n                for (int i = (reversedText.length) - 1; i &gt;= 0; i--) {\r\n                    System.out.print(reversedText[i]);\r\n                }\r\n                System.out.println(&quot; &quot;);\r\n                char[] diacritics = {&#39;ě&#39;, &#39;š&#39;, &#39;č&#39;, &#39;ř&#39;, &#39;ž&#39;, &#39;&#253;&#39;, &#39;&#225;&#39;, &#39;&#237;&#39;, &#39;&#233;&#39;, &#39;&#250;&#39;, &#39;ů&#39;, &#39;Ě&#39;, &#39;Š&#39;, &#39;Č&#39;, &#39;Ř&#39;, &#39;Ž&#39;, &#39;&#221;&#39;, &#39;&#193;&#39;, &#39;&#205;&#39;, &#39;&#201;&#39;, &#39;&#218;&#39;, &#39;Ů&#39; };\r\n                char[] normal = {&#39;e&#39;, &#39;s&#39;, &#39;c&#39;, &#39;r&#39;, &#39;z&#39;, &#39;y&#39;, &#39;a&#39;, &#39;i&#39;, &#39;e&#39;, &#39;u&#39;, &#39;u&#39;, &#39;E&#39;, &#39;S&#39;, &#39;C&#39;, &#39;R&#39;, &#39;Z&#39;, &#39;Y&#39;, &#39;A&#39;, &#39;I&#39;, &#39;E&#39;, &#39;U&#39;, &#39;U&#39; };\r\n                for (int i = 0; i &lt; normalizedText.length; i++) {\r\n                    char c = normalizedText[i];\r\n                    int index = -1;\r\n                    for (int j = 0; j &lt; diacritics.length; j++) {\r\n                        if (c == diacritics[j]) {\r\n                            index = j;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (index != -1) {\r\n                        normalizedText[i] = normal[index];\r\n                    }\r\n                }\r\n\r\n                System.out.println(normalizedText);\r\n\r\n            }}\r\n```\r\nI was working with Strings.\r\nCan someone show me how to do this with a method? Also please point out things that are wrong with my code in general.\r\n\r\nI was trying to replace all of the diacritics, with &quot;normal&quot; text, this is what I came up with, but it&#180;s not a method but done manually.","title":"Work with Strings, Java, Diacritic Method","body":"<pre><code>import java.util.Scanner;\n\npublic class Main {\n            public static void main(String[] args) {\n                Scanner sc = new Scanner(System.in);\n                String input = sc.nextLine();\n                System.out.println(input);\n                String[] sentences = input.split(&quot;\\\\. &quot;);\n                char[] reversedText = input.toCharArray();\n                char[] normalizedText = input.toCharArray();\n                int sentenceCount = 0;\n                int vowelCount = 0;\n                int consonantCount = 0;\n                for (String sentence : sentences) {\n                    vowelCount = 0;\n                    consonantCount = 0;\n                    sentenceCount++;\n                    System.out.println(sentence);\n                    String[] words = sentence.split(&quot; &quot;);\n                    System.out.println(&quot;Number of words is &quot; + words.length);\n                    String lowerCase = sentence.toLowerCase();\n                    char[] chars = lowerCase.toCharArray();\n                    System.out.println(&quot;Number of characters is &quot; + sentence.length());\n                    for (char c : chars) {\n                        if (c == 'a' || c == 'e' || c == 'i' || c == 'o' || c == 'u' || c == 'y') {\n                            vowelCount++;\n                        } else if (c == 'h' || c == 'k' || c == 'r' || c == 'd' || c == 't' || c == 'n') {\n                            consonantCount++;\n                        }\n                    }\n                    System.out.println(&quot;Number of vowels is &quot; + vowelCount);\n                    System.out.println(&quot;Number of consonants is &quot; + consonantCount);\n                }\n                System.out.println(&quot; &quot;);\n                System.out.println(&quot;Number of sentences is &quot; + sentenceCount);\n                for (int i = (reversedText.length) - 1; i &gt;= 0; i--) {\n                    System.out.print(reversedText[i]);\n                }\n                System.out.println(&quot; &quot;);\n                char[] diacritics = {'ě', 'š', 'č', 'ř', 'ž', 'ý', 'á', 'í', 'é', 'ú', 'ů', 'Ě', 'Š', 'Č', 'Ř', 'Ž', 'Ý', 'Á', 'Í', 'É', 'Ú', 'Ů' };\n                char[] normal = {'e', 's', 'c', 'r', 'z', 'y', 'a', 'i', 'e', 'u', 'u', 'E', 'S', 'C', 'R', 'Z', 'Y', 'A', 'I', 'E', 'U', 'U' };\n                for (int i = 0; i &lt; normalizedText.length; i++) {\n                    char c = normalizedText[i];\n                    int index = -1;\n                    for (int j = 0; j &lt; diacritics.length; j++) {\n                        if (c == diacritics[j]) {\n                            index = j;\n                            break;\n                        }\n                    }\n                    if (index != -1) {\n                        normalizedText[i] = normal[index];\n                    }\n                }\n\n                System.out.println(normalizedText);\n\n            }}\n</code></pre>\n<p>I was working with Strings.\nCan someone show me how to do this with a method? Also please point out things that are wrong with my code in general.</p>\n<p>I was trying to replace all of the diacritics, with &quot;normal&quot; text, this is what I came up with, but it´s not a method but done manually.</p>\n"},{"tags":["java","maven","intellij-idea","javadoc","maven-javadoc-plugin"],"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1684686650,"post_id":76300711,"comment_id":134549827,"body_markdown":"You need to attach the javadocs when building your artifact in its Pom.xml. Then they go together in the maven repository b","body":"You need to attach the javadocs when building your artifact in its Pom.xml. Then they go together in the maven repository b"},{"owner":{"account_id":7221749,"reputation":175,"user_id":5511940,"accept_rate":75,"display_name":"Francis Rubio"},"score":0,"creation_date":1684688257,"post_id":76300711,"comment_id":134550025,"body_markdown":"When I build my project, it produces two JAR files. How do I attach the javadocs JAR to the artifact?","body":"When I build my project, it produces two JAR files. How do I attach the javadocs JAR to the artifact?"}],"answers":[{"comments":[{"owner":{"account_id":7221749,"reputation":175,"user_id":5511940,"accept_rate":75,"display_name":"Francis Rubio"},"score":0,"creation_date":1684688850,"post_id":76301015,"comment_id":134550094,"body_markdown":"I don&#39;t think this would work in this situation because the library I need Javadocs for is a local one that I made in another project. I just tried this and it indicates that my library has not been resolved.","body":"I don&#39;t think this would work in this situation because the library I need Javadocs for is a local one that I made in another project. I just tried this and it indicates that my library has not been resolved."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1684688984,"post_id":76301015,"comment_id":134550111,"body_markdown":"what means &quot;local one&quot; ? (is it released to a maven repo? or `&lt;scope&gt;system&lt;/scope&gt;`!? ;(","body":"what means &quot;local one&quot; ? (is it released to a maven repo? or <code>&lt;scope&gt;system&lt;&#47;scope&gt;</code>!? ;("},{"owner":{"account_id":7221749,"reputation":175,"user_id":5511940,"accept_rate":75,"display_name":"Francis Rubio"},"score":0,"creation_date":1684689525,"post_id":76301015,"comment_id":134550180,"body_markdown":"It is `&lt;scope&gt;system&lt;/scope&gt;`, yes.","body":"It is <code>&lt;scope&gt;system&lt;&#47;scope&gt;</code>, yes."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1684690352,"post_id":76301015,"comment_id":134550290,"body_markdown":"for long term: you have to &quot;mavenize&quot; this! (install/deploy it (with sources and javadoc!) to local/repo), to quickly work in ide..: see screenshot ;)","body":"for long term: you have to &quot;mavenize&quot; this! (install/deploy it (with sources and javadoc!) to local/repo), to quickly work in ide..: see screenshot ;)"},{"owner":{"account_id":7221749,"reputation":175,"user_id":5511940,"accept_rate":75,"display_name":"Francis Rubio"},"score":1,"creation_date":1684690859,"post_id":76301015,"comment_id":134550358,"body_markdown":"Thank you for pointing me in the right direction! I ended up &quot;mavenizing&quot; my library by deploying the library + javadoc to a local repository (.m2 directory), and adding that path into my `pom.xml` repositories. I also removed the `&lt;scope&gt;system&lt;/scope&gt;`. Javadocs are working now even after Maven reloads.","body":"Thank you for pointing me in the right direction! I ended up &quot;mavenizing&quot; my library by deploying the library + javadoc to a local repository (.m2 directory), and adding that path into my <code>pom.xml</code> repositories. I also removed the <code>&lt;scope&gt;system&lt;&#47;scope&gt;</code>. Javadocs are working now even after Maven reloads."}],"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1684692626,"creation_date":1684688552,"answer_id":76301015,"question_id":76300711,"body_markdown":"Pure Maven (good IDEs should recognize these):\r\n```lang-bash\r\nmvn dependency:resolve -Dclassifier=javadoc\r\n```\r\n\r\nRef: https://maven.apache.org/plugins/maven-dependency-plugin/resolve-mojo.html\r\n\r\nNotes: It&#39;s rather unusual (unless explicitly ordered) to &quot;package&quot; (dependency) javadocs with the main artifact... In maven, &quot;we&quot; rather maintain (own!) artifacts for &quot;main&quot;/sources/and javadocs (See: https://maven.apache.org/repository/guide-central-repository-upload.html)\r\n\r\nAs mentioned, good IDEs should be capable of processing the &quot;local repository&quot; for javadoc (and source) artifacts of undrlying dependencies.\r\n\r\nTo &quot;download sources&quot; use:\r\n```lang-bash\r\nmvn dependency:sources\r\n```\r\n\r\nRef: https://maven.apache.org/plugins/maven-dependency-plugin/sources-mojo.html ;)\r\n\r\n\r\n----------\r\nWhen your (remote) Repository does not comply with &quot;central requirements&quot; (has no &quot;source&quot; and &quot;javadoc&quot; artifacts attached),\r\nalso to eliminate (any) `&lt;scope&gt;system&lt;/scope&gt;` dependency, I would strongly recommend (to &quot;mavenize&quot; the dependencies and) install/deploy sources and javadocs artifacts for this:\r\n- locally with: `mvn install:install ...`\r\n- to a &quot;repo&quot;: `mvn deploy:...`\r\n\r\nFor &quot;mavenize&quot; refer to:\r\n- locally: https://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html\r\n- for &quot;deployments&quot;: https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html\r\n\r\nSpecifically for sources and javadocs artifacts (once you have/generate these):\r\n\r\n- deploy: https://maven.apache.org/plugins/maven-deploy-plugin/examples/deploying-sources-javadoc.html\r\n- accordingly with &quot;install-file&quot;\r\n\r\n\r\n----------\r\n\r\n\r\nThe &quot;pure IDE&quot; way, would be to link to the (external!) sources/javadocs (in file system/zip/jar archive):\r\n... See screenshot:\r\n\r\n[![screenshot][1]][1]\r\n\r\n- `com.example:my-dep:0.0.1-SNAPSHOT` is my (fake) `system` scoped dependency.\r\n- After &quot;applying&quot; changes and confirming the warn dialog (iml vs pom, re-import...), IntelliJ should recoginze javadocs and sources.\r\n- According to the warning our &quot;modifications&quot; get lost in case of a &quot;maven re-import&quot;.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C7GsK.png","title":"How to add a Javadoc JAR file to a Maven project in IntelliJ IDEA?","body":"<p>Pure Maven (good IDEs should recognize these):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn dependency:resolve -Dclassifier=javadoc\n</code></pre>\n<p>Ref: <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/resolve-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-dependency-plugin/resolve-mojo.html</a></p>\n<p>Notes: It's rather unusual (unless explicitly ordered) to &quot;package&quot; (dependency) javadocs with the main artifact... In maven, &quot;we&quot; rather maintain (own!) artifacts for &quot;main&quot;/sources/and javadocs (See: <a href=\"https://maven.apache.org/repository/guide-central-repository-upload.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/repository/guide-central-repository-upload.html</a>)</p>\n<p>As mentioned, good IDEs should be capable of processing the &quot;local repository&quot; for javadoc (and source) artifacts of undrlying dependencies.</p>\n<p>To &quot;download sources&quot; use:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn dependency:sources\n</code></pre>\n<p>Ref: <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/sources-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-dependency-plugin/sources-mojo.html</a> ;)</p>\n<hr />\n<p>When your (remote) Repository does not comply with &quot;central requirements&quot; (has no &quot;source&quot; and &quot;javadoc&quot; artifacts attached),\nalso to eliminate (any) <code>&lt;scope&gt;system&lt;/scope&gt;</code> dependency, I would strongly recommend (to &quot;mavenize&quot; the dependencies and) install/deploy sources and javadocs artifacts for this:</p>\n<ul>\n<li>locally with: <code>mvn install:install ...</code></li>\n<li>to a &quot;repo&quot;: <code>mvn deploy:...</code></li>\n</ul>\n<p>For &quot;mavenize&quot; refer to:</p>\n<ul>\n<li>locally: <a href=\"https://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html</a></li>\n<li>for &quot;deployments&quot;: <a href=\"https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html</a></li>\n</ul>\n<p>Specifically for sources and javadocs artifacts (once you have/generate these):</p>\n<ul>\n<li>deploy: <a href=\"https://maven.apache.org/plugins/maven-deploy-plugin/examples/deploying-sources-javadoc.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-deploy-plugin/examples/deploying-sources-javadoc.html</a></li>\n<li>accordingly with &quot;install-file&quot;</li>\n</ul>\n<hr />\n<p>The &quot;pure IDE&quot; way, would be to link to the (external!) sources/javadocs (in file system/zip/jar archive):\n... See screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/C7GsK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C7GsK.png\" alt=\"screenshot\" /></a></p>\n<ul>\n<li><code>com.example:my-dep:0.0.1-SNAPSHOT</code> is my (fake) <code>system</code> scoped dependency.</li>\n<li>After &quot;applying&quot; changes and confirming the warn dialog (iml vs pom, re-import...), IntelliJ should recoginze javadocs and sources.</li>\n<li>According to the warning our &quot;modifications&quot; get lost in case of a &quot;maven re-import&quot;.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684737896,"creation_date":1684691191,"answer_id":76301182,"question_id":76300711,"body_markdown":"There is a more general maven-style way and should be preferred over the &quot;IDE way&quot;. You can use a local &quot;fake&quot; repository inside your project. Add the jar files to your repo. The maven call depends on the type of the jar.\r\n\r\n**The jar:**\r\n\r\n    mvn deploy:deploy-file \\\r\n      -DgroupId=org.example \\\r\n      -DartifactId=mylib\\\r\n      -Dversion=1.1 \\\r\n      -Dfile=/path/to/mylib-1.1.jar \\\r\n      -Dpackaging=jar \\\r\n      -Durl=file://path/to/your-project/fake-repo\r\n\r\n**The sources:**\r\n\r\n    mvn deploy:deploy-file \\\r\n      -DgroupId=org.example \\\r\n      -DartifactId=mylib\\\r\n      -Dversion=1.1 \\\r\n      -Dfile=/path/to/mylib-1.1-sources.jar \\\r\n      -Dpackaging=jar \\\r\n      -Durl=file://path/to/your-project/fake-repo \\\r\n      -Dclassifier=sources\r\n\r\n**The javadoc:**\r\n\r\n    mvn deploy:deploy-file \\\r\n      -DgroupId=org.example \\\r\n      -DartifactId=mylib\\\r\n      -Dversion=1.1 \\\r\n      -Dfile=/path/to/mylib-1.1-javadoc.jar \\\r\n      -Dpackaging=jar \\\r\n      -Durl=file://path/to/your-project/fake-repo \\\r\n      -Dclassifier=javadoc\r\n\r\nThe next step is adding the repo and the dependency to your pom:\r\n\r\n    &lt;repositories&gt;\r\n      &lt;repository&gt;\r\n        &lt;id&gt;fake-repo&lt;/id&gt;\r\n        &lt;name&gt;Just a fake repository.&lt;/name&gt;\r\n        &lt;url&gt;file://${project.basedir}/fake-repo&lt;/url&gt;\r\n      &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mylib&lt;/artifactId&gt;\r\n        &lt;version&gt;1.1&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;","title":"How to add a Javadoc JAR file to a Maven project in IntelliJ IDEA?","body":"<p>There is a more general maven-style way and should be preferred over the &quot;IDE way&quot;. You can use a local &quot;fake&quot; repository inside your project. Add the jar files to your repo. The maven call depends on the type of the jar.</p>\n<p><strong>The jar:</strong></p>\n<pre><code>mvn deploy:deploy-file \\\n  -DgroupId=org.example \\\n  -DartifactId=mylib\\\n  -Dversion=1.1 \\\n  -Dfile=/path/to/mylib-1.1.jar \\\n  -Dpackaging=jar \\\n  -Durl=file://path/to/your-project/fake-repo\n</code></pre>\n<p><strong>The sources:</strong></p>\n<pre><code>mvn deploy:deploy-file \\\n  -DgroupId=org.example \\\n  -DartifactId=mylib\\\n  -Dversion=1.1 \\\n  -Dfile=/path/to/mylib-1.1-sources.jar \\\n  -Dpackaging=jar \\\n  -Durl=file://path/to/your-project/fake-repo \\\n  -Dclassifier=sources\n</code></pre>\n<p><strong>The javadoc:</strong></p>\n<pre><code>mvn deploy:deploy-file \\\n  -DgroupId=org.example \\\n  -DartifactId=mylib\\\n  -Dversion=1.1 \\\n  -Dfile=/path/to/mylib-1.1-javadoc.jar \\\n  -Dpackaging=jar \\\n  -Durl=file://path/to/your-project/fake-repo \\\n  -Dclassifier=javadoc\n</code></pre>\n<p>The next step is adding the repo and the dependency to your pom:</p>\n<pre><code>&lt;repositories&gt;\n  &lt;repository&gt;\n    &lt;id&gt;fake-repo&lt;/id&gt;\n    &lt;name&gt;Just a fake repository.&lt;/name&gt;\n    &lt;url&gt;file://${project.basedir}/fake-repo&lt;/url&gt;\n  &lt;/repository&gt;\n&lt;/repositories&gt;\n\n&lt;dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;mylib&lt;/artifactId&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":7221749,"reputation":175,"user_id":5511940,"accept_rate":75,"display_name":"Francis Rubio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76301182,"answer_count":2,"score":2,"last_activity_date":1684737896,"creation_date":1684684082,"question_id":76300711,"body_markdown":"I am making a local Java utility library and building it into a JAR file. I am also building a JAR file for the Javadocs. \r\n\r\nThese are the JAR files generated by Maven:\r\n\r\n[![inside target/ directory, JAR files called redacted-libraries-0.0.1.jar and redacted-libraries-0.0.1-javadocs.jar][1]][1]\r\n\r\nNow, I am trying to use the Javadocs JAR file with IntelliJ IDEA by importing it in File &gt; Project Structure, and it works. I get hints and documentation for code references in my IDE. But as soon as I reload my Maven project, the Javadocs are gone and I have to manually add it back.\r\n\r\nI am also getting this warning from IntelliJ everytime I add the Javadoc JAR file back.\r\n\r\n[![Library &#39;Maven:com.redacted-library.0.0.1&#39; is imported from Maven. Any changes made in its configuration might be lost after reimporting.][2]][2]\r\n\r\nWhat is the proper way of adding a Javadoc JAR file into a Maven project?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/G3hzP.png\r\n  [2]: https://i.stack.imgur.com/Ptmzo.png","title":"How to add a Javadoc JAR file to a Maven project in IntelliJ IDEA?","body":"<p>I am making a local Java utility library and building it into a JAR file. I am also building a JAR file for the Javadocs.</p>\n<p>These are the JAR files generated by Maven:</p>\n<p><a href=\"https://i.stack.imgur.com/G3hzP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G3hzP.png\" alt=\"inside target/ directory, JAR files called redacted-libraries-0.0.1.jar and redacted-libraries-0.0.1-javadocs.jar\" /></a></p>\n<p>Now, I am trying to use the Javadocs JAR file with IntelliJ IDEA by importing it in File &gt; Project Structure, and it works. I get hints and documentation for code references in my IDE. But as soon as I reload my Maven project, the Javadocs are gone and I have to manually add it back.</p>\n<p>I am also getting this warning from IntelliJ everytime I add the Javadoc JAR file back.</p>\n<p><a href=\"https://i.stack.imgur.com/Ptmzo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ptmzo.png\" alt=\"Library 'Maven:com.redacted-library.0.0.1' is imported from Maven. Any changes made in its configuration might be lost after reimporting.\" /></a></p>\n<p>What is the proper way of adding a Javadoc JAR file into a Maven project?</p>\n"},{"tags":["java","stack-trace","systemexit"],"answers":[{"tags":[],"owner":{"account_id":28637891,"reputation":196,"user_id":21927668,"display_name":"Almaz Shakirov"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1684737862,"creation_date":1684524049,"answer_id":76291918,"question_id":76290683,"body_markdown":"How about using shutdown hook?\r\nIt could be like this:\r\n\r\n    Thread printStackTracesOnShutdownHook = new Thread(() -&gt; {\r\n        LOG.info(&quot;Shutdown hook called&quot;);\r\n        for (Map.Entry&lt;Thread, StackTraceElement[]&gt; pair : \r\n                 Thread.getAllStackTraces().entrySet()) {\r\n            LOG.info(pair.getKey() + &quot; : &quot; + Arrays.toString(pair.getValue()));\r\n        }\r\n    });\r\n\r\n    Runtime.getRuntime().addShutdownHook(printStackTracesOnShutdownHook);\r\n\r\nYou can add this code somewhere in your application (where it will be executed). Then on shutdown `printStackTracesOnShutdownHook` will write to logs all stackTraces. And you will be able to find from these stackTraces where `System.exit()` was called.","title":"Is there a way to log stacktrace which called System.exit in Java","body":"<p>How about using shutdown hook?\nIt could be like this:</p>\n<pre><code>Thread printStackTracesOnShutdownHook = new Thread(() -&gt; {\n    LOG.info(&quot;Shutdown hook called&quot;);\n    for (Map.Entry&lt;Thread, StackTraceElement[]&gt; pair : \n             Thread.getAllStackTraces().entrySet()) {\n        LOG.info(pair.getKey() + &quot; : &quot; + Arrays.toString(pair.getValue()));\n    }\n});\n\nRuntime.getRuntime().addShutdownHook(printStackTracesOnShutdownHook);\n</code></pre>\n<p>You can add this code somewhere in your application (where it will be executed). Then on shutdown <code>printStackTracesOnShutdownHook</code> will write to logs all stackTraces. And you will be able to find from these stackTraces where <code>System.exit()</code> was called.</p>\n"}],"owner":{"account_id":101412,"reputation":5107,"user_id":272869,"accept_rate":96,"display_name":"VextoR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76291918,"answer_count":1,"score":4,"last_activity_date":1684737862,"creation_date":1684511699,"question_id":76290683,"body_markdown":"I think there is a way to do this with `SecurityManager`, but I don&#39;t want to introduce it in an App just for this.\r\n\r\nIs there a way to catch and log stacktrace of what called exit() using some other solution?","title":"Is there a way to log stacktrace which called System.exit in Java","body":"<p>I think there is a way to do this with <code>SecurityManager</code>, but I don't want to introduce it in an App just for this.</p>\n<p>Is there a way to catch and log stacktrace of what called exit() using some other solution?</p>\n"},{"tags":["java","amazon-web-services","spring-3","aws-xray","jakarta-migration"],"comments":[{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1669738900,"post_id":74616492,"comment_id":131708869,"body_markdown":"Sounds like a Spring lib issue vs an AWS issue.","body":"Sounds like a Spring lib issue vs an AWS issue."},{"owner":{"account_id":18773357,"reputation":11,"user_id":13689708,"display_name":"snnhbyb"},"score":0,"creation_date":1669875889,"post_id":74616492,"comment_id":131743512,"body_markdown":"@smac2020 thx for the comment. As I understand still there is no update for aws in spring. So just waiting for that","body":"@smac2020 thx for the comment. As I understand still there is no update for aws in spring. So just waiting for that"}],"answers":[{"tags":[],"owner":{"account_id":19339303,"reputation":36,"user_id":14139229,"display_name":"Adam Shaw"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670954478,"creation_date":1670953983,"answer_id":74789039,"question_id":74616492,"body_markdown":"Thanks for bringing this to our attention.\r\n\r\nThere is an issue with the latest version of Spring since it is using Jakarta instead of javax.\r\n\r\nI will add this as a work item for us.","title":"Cannot access javax.servlet.Filter class file for javax.servlet.Filter not found","body":"<p>Thanks for bringing this to our attention.</p>\n<p>There is an issue with the latest version of Spring since it is using Jakarta instead of javax.</p>\n<p>I will add this as a work item for us.</p>\n"},{"tags":[],"owner":{"account_id":17074189,"reputation":163,"user_id":12354182,"display_name":"cherish sham"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684737800,"creation_date":1684737800,"answer_id":76303589,"question_id":74616492,"body_markdown":"This is fixed in latest upgrade.  \r\nYou need to import com.amazonaws:aws-xray-recorder-sdk-core:2.14.0 \r\nand other related libraries","title":"Cannot access javax.servlet.Filter class file for javax.servlet.Filter not found","body":"<p>This is fixed in latest upgrade.<br />\nYou need to import com.amazonaws:aws-xray-recorder-sdk-core:2.14.0\nand other related libraries</p>\n"}],"owner":{"account_id":18773357,"reputation":11,"user_id":13689708,"display_name":"snnhbyb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":551,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1684737800,"creation_date":1669735982,"question_id":74616492,"body_markdown":"I&#39;m working in a project and right now I&#39;m migrating the project to Spring 3.0. So I made some changes in some classes. I can not share the classes because of the job rules but this class about the AwsXrayConfig class. And using filter. But when I try to build project I&#39;m getting this &quot;cannot access javax.servlet.Filter&quot; error. In the class I already updated javax to jakarta but AWSXRayServletFilter still using com.amazon.xray.javax.servlet.AWSXRayServletFilter library. So I&#39;m stuck here. Also I&#39;m not sure about looking the true place? Is that about jakarta or spring or aws libraries I&#39;&#39;m not sure. Any ideas? Thx\r\n\r\nI already removed import part about AWSXRayServletFilter but it&#39;s complaining. I changed javax.servlet.Filter to jakarta.servlet.Filter. Thats it","title":"Cannot access javax.servlet.Filter class file for javax.servlet.Filter not found","body":"<p>I'm working in a project and right now I'm migrating the project to Spring 3.0. So I made some changes in some classes. I can not share the classes because of the job rules but this class about the AwsXrayConfig class. And using filter. But when I try to build project I'm getting this &quot;cannot access javax.servlet.Filter&quot; error. In the class I already updated javax to jakarta but AWSXRayServletFilter still using com.amazon.xray.javax.servlet.AWSXRayServletFilter library. So I'm stuck here. Also I'm not sure about looking the true place? Is that about jakarta or spring or aws libraries I''m not sure. Any ideas? Thx</p>\n<p>I already removed import part about AWSXRayServletFilter but it's complaining. I changed javax.servlet.Filter to jakarta.servlet.Filter. Thats it</p>\n"},{"tags":["java","jakarta-ee","jvm","classloader","hotdeploy"],"comments":[{"owner":{"account_id":7821678,"reputation":2208,"user_id":5914654,"display_name":"vincrichaud"},"score":1,"creation_date":1521733897,"post_id":49432964,"comment_id":85867871,"body_markdown":"Have you tried ?","body":"Have you tried ?"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1521733941,"post_id":49432964,"comment_id":85867891,"body_markdown":"You should not do this.  A better bet would be to use a JVM that allows hot redeploy.","body":"You should not do this.  A better bet would be to use a JVM that allows hot redeploy."},{"owner":{"account_id":2756352,"reputation":10990,"user_id":2374302,"accept_rate":86,"display_name":"Axel Amthor"},"score":1,"creation_date":1521734144,"post_id":49432964,"comment_id":85868039,"body_markdown":"An Idea would be an OSGI environment like Apache Felix or Equinox. These enable dynamic loading, starting and stopping of soocalled bundles etc.","body":"An Idea would be an OSGI environment like Apache Felix or Equinox. These enable dynamic loading, starting and stopping of soocalled bundles etc."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1521734179,"post_id":49432964,"comment_id":85868063,"body_markdown":"So people and/or automated testing runs 24/7?  There is no time slice to update the server?  Which is more important: deploy fixed defects or keep the environment up?","body":"So people and/or automated testing runs 24/7?  There is no time slice to update the server?  Which is more important: deploy fixed defects or keep the environment up?"},{"owner":{"account_id":12939056,"reputation":35,"user_id":9355458,"accept_rate":0,"display_name":"Ram"},"score":0,"creation_date":1521734311,"post_id":49432964,"comment_id":85868152,"body_markdown":"actually its a small teating environment and almost no scope for OSGI, Apache Flex.  seems the requirement is to write a java program to dovthe job ...         will that be possible ?","body":"actually its a small teating environment and almost no scope for OSGI, Apache Flex.  seems the requirement is to write a java program to dovthe job ...         will that be possible ?"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1521735125,"post_id":49432964,"comment_id":85868753,"body_markdown":"Why would a deploy/restart of a small test environment be so disruptive?  How much time, 5 minutes?  Over lunch?  Scheduled at night?  Assuming it is possible, would it be acceptable to have the test environment not as close as the production environment?","body":"Why would a deploy/restart of a small test environment be so disruptive?  How much time, 5 minutes?  Over lunch?  Scheduled at night?  Assuming it is possible, would it be acceptable to have the test environment not as close as the production environment?"},{"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"score":0,"creation_date":1521924552,"post_id":49432964,"comment_id":85941980,"body_markdown":"consider multiple nodes + rolling restarts","body":"consider multiple nodes + rolling restarts"}],"answers":[{"tags":[],"owner":{"account_id":4500391,"reputation":2003,"user_id":3659052,"accept_rate":55,"display_name":"logger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521734218,"creation_date":1521734218,"answer_id":49433170,"question_id":49432964,"body_markdown":"No you cannot, you would need to have the container on the server side. Although for your server like tomcat, jboss, websphere etc. you can configure them to hot deploy but the server side would still needs restart once new class file is placed. If you are trying to hot deploy a class file you can try using JRebel it will allow you to hot deploy the class file without actually restarting because it is managed within JRebel container. (also note that JRebel is not free)","title":"Java Program to load an changed class without server restart","body":"<p>No you cannot, you would need to have the container on the server side. Although for your server like tomcat, jboss, websphere etc. you can configure them to hot deploy but the server side would still needs restart once new class file is placed. If you are trying to hot deploy a class file you can try using JRebel it will allow you to hot deploy the class file without actually restarting because it is managed within JRebel container. (also note that JRebel is not free)</p>\n"},{"tags":[],"owner":{"account_id":5677340,"reputation":280,"user_id":4489994,"display_name":"Abhay Phougat"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684737139,"creation_date":1684734279,"answer_id":76303318,"question_id":49432964,"body_markdown":"There are quite a few solutions/plugins which help you with hot-deployment of java code saving you with complete build and server restart. I had used jRebel earlier available at https://www.jrebel.com/products/jrebel. There are other such solutions/tools that can help you with the hot deployment. ","title":"Java Program to load an changed class without server restart","body":"<p>There are quite a few solutions/plugins which help you with hot-deployment of java code saving you with complete build and server restart. I had used jRebel earlier available at <a href=\"https://www.jrebel.com/products/jrebel\" rel=\"nofollow noreferrer\">https://www.jrebel.com/products/jrebel</a>. There are other such solutions/tools that can help you with the hot deployment.</p>\n"}],"owner":{"account_id":12939056,"reputation":35,"user_id":9355458,"accept_rate":0,"display_name":"Ram"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":798,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1684737139,"creation_date":1521733629,"question_id":49432964,"body_markdown":"I need a java/j2ee program, that will load an updated class file when the server is still on. In our Web Application testing environment few classes(Java files) are being frequently changed to fix defects and need to load them in JVM fresh.\r\nWe can not restart the server to impact on going testing .\r\n\r\nCan we write a program to load it using class loader?","title":"Java Program to load an changed class without server restart","body":"<p>I need a java/j2ee program, that will load an updated class file when the server is still on. In our Web Application testing environment few classes(Java files) are being frequently changed to fix defects and need to load them in JVM fresh.\nWe can not restart the server to impact on going testing .</p>\n\n<p>Can we write a program to load it using class loader?</p>\n"},{"tags":["java","junit","mockito","junit4"],"answers":[{"comments":[{"owner":{"account_id":17968187,"reputation":79,"user_id":13057627,"display_name":"TheFastestTurtle"},"score":0,"creation_date":1684698042,"post_id":76301111,"comment_id":134551252,"body_markdown":"I have still the same error","body":"I have still the same error"},{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1684699151,"post_id":76301111,"comment_id":134551372,"body_markdown":"Verify that the vinService dependency is used within the CarService class, check your dependencies in gradle/maven too.","body":"Verify that the vinService dependency is used within the CarService class, check your dependencies in gradle/maven too."},{"owner":{"account_id":17968187,"reputation":79,"user_id":13057627,"display_name":"TheFastestTurtle"},"score":0,"creation_date":1684736513,"post_id":76301111,"comment_id":134554641,"body_markdown":"I found possible reason. Inside test class I am initializing CarService in additional method: carService = new CarService(vinService) and vinService = new VinService(anotherService). So I have real object and @Mock. I suppose in this case it is not possible to use verify method because it can be probably used only on Mock.","body":"I found possible reason. Inside test class I am initializing CarService in additional method: carService = new CarService(vinService) and vinService = new VinService(anotherService). So I have real object and @Mock. I suppose in this case it is not possible to use verify method because it can be probably used only on Mock."},{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1684737002,"post_id":76301111,"comment_id":134554737,"body_markdown":"Updated my comment. Just mock Class inside the test. and your test will use this mock.","body":"Updated my comment. Just mock Class inside the test. and your test will use this mock."}],"tags":[],"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684736951,"creation_date":1684690040,"answer_id":76301111,"question_id":76300968,"body_markdown":"Actually, it`s very simple. You just need to use **@InjectMocks** instead **@Mock** for the service that you are testing:\r\n\r\n    @InjectMocks\r\n    private CarService carService;\r\n\r\nThis annotation says that Mockito will properly inject all mocks into your service(VinService into CarService).\r\n\r\n**Updated for comment**\r\nif you have somewhere initializing your service then you can easily add your mock inside test.\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n        public class CarServiceTest {\r\n    \r\n            private static final String VIN = &quot;1G100000000000000&quot;\r\n    \r\n            @InjectMocks\r\n            private CarService carService;\r\n    \r\n            @Test\r\n            void vinShouldBeCheckedSuccessfully() {\r\n                VinService vinService = Mockito.mock(VinService.class);\r\n    \r\n                //when\r\n                carService.checkCar(VIN);\r\n    \r\n                //then\r\n                Mockito.verify(vinService, Mockito.times(1)).checkVIN(\r\n                    Mockito.anyList(),\r\n                    Mockito.anyString(),\r\n                    Mockito.any()); // Consumer parameter\r\n            }\r\n        }","title":"NotAMockException when trying to use verify method","body":"<p>Actually, it`s very simple. You just need to use <strong>@InjectMocks</strong> instead <strong>@Mock</strong> for the service that you are testing:</p>\n<pre><code>@InjectMocks\nprivate CarService carService;\n</code></pre>\n<p>This annotation says that Mockito will properly inject all mocks into your service(VinService into CarService).</p>\n<p><strong>Updated for comment</strong>\nif you have somewhere initializing your service then you can easily add your mock inside test.</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n    public class CarServiceTest {\n\n        private static final String VIN = &quot;1G100000000000000&quot;\n\n        @InjectMocks\n        private CarService carService;\n\n        @Test\n        void vinShouldBeCheckedSuccessfully() {\n            VinService vinService = Mockito.mock(VinService.class);\n\n            //when\n            carService.checkCar(VIN);\n\n            //then\n            Mockito.verify(vinService, Mockito.times(1)).checkVIN(\n                Mockito.anyList(),\n                Mockito.anyString(),\n                Mockito.any()); // Consumer parameter\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":17968187,"reputation":79,"user_id":13057627,"display_name":"TheFastestTurtle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76301111,"answer_count":1,"score":0,"last_activity_date":1684736951,"creation_date":1684687780,"question_id":76300968,"body_markdown":"My first steps with unit tests and Mockito. I would like to use verify() method to check if it was called once.\r\n\r\n\r\n    public class CarService {\r\n    \r\n        private final VinService vinService;\r\n    \r\n        public void checkCar(String VIN) {\r\n            (here there is some business logic like:create list, pass the VIN, and add Consumer)\r\n    \r\n            vinService.checkVin(list, VIN, consumer); //checkVin inside VinService.class is also void\r\n        }\r\n    }\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class CarServiceTest {\r\n    \r\n        private static final String VIN = &quot;1G100000000000000&quot;\r\n    \r\n        @Mock\r\n        private CarService carService;\r\n    \r\n        @Mock\r\n        private VinService vinService;\r\n    \r\n        @Test\r\n        void vinShouldBeCheckedSuccessfully() {\r\n    \r\n            //when\r\n            carService.checkCar(VIN);\r\n    \r\n            //then\r\n            Mockito.verify(vinService, Mockito.times(1)).checkVIN(\r\n                    Mockito.anyList(),\r\n                    Mockito.anyString(),\r\n                    Mockito.any()); // Consumer parameter\r\n        }\r\n    }\r\n\r\nHowever I am getting the error:\r\n\r\n   \r\n\r\n     org.mockito.exceptions.misusing.NotAMockException: \r\n        Argument passed to verify() is of type VinService and is not a mock!\r\n        Make sure you place the parenthesis correctly!\r\n        See the examples of correct verifications:\r\n            verify(mock).someMethod();\r\n            verify(mock, times(10)).someMethod();\r\n            verify(mock, atLeastOnce()).someMethod();\r\n\r\nCould you help me to understand why?","title":"NotAMockException when trying to use verify method","body":"<p>My first steps with unit tests and Mockito. I would like to use verify() method to check if it was called once.</p>\n<pre><code>public class CarService {\n\n    private final VinService vinService;\n\n    public void checkCar(String VIN) {\n        (here there is some business logic like:create list, pass the VIN, and add Consumer)\n\n        vinService.checkVin(list, VIN, consumer); //checkVin inside VinService.class is also void\n    }\n}\n\n@ExtendWith(MockitoExtension.class)\npublic class CarServiceTest {\n\n    private static final String VIN = &quot;1G100000000000000&quot;\n\n    @Mock\n    private CarService carService;\n\n    @Mock\n    private VinService vinService;\n\n    @Test\n    void vinShouldBeCheckedSuccessfully() {\n\n        //when\n        carService.checkCar(VIN);\n\n        //then\n        Mockito.verify(vinService, Mockito.times(1)).checkVIN(\n                Mockito.anyList(),\n                Mockito.anyString(),\n                Mockito.any()); // Consumer parameter\n    }\n}\n</code></pre>\n<p>However I am getting the error:</p>\n<pre><code> org.mockito.exceptions.misusing.NotAMockException: \n    Argument passed to verify() is of type VinService and is not a mock!\n    Make sure you place the parenthesis correctly!\n    See the examples of correct verifications:\n        verify(mock).someMethod();\n        verify(mock, times(10)).someMethod();\n        verify(mock, atLeastOnce()).someMethod();\n</code></pre>\n<p>Could you help me to understand why?</p>\n"},{"tags":["java","plugins","minecraft"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1684736952,"post_id":76274261,"comment_id":134554724,"body_markdown":"So you are sure the player used with the method is the right one? Because I don&#39;t see issue myself","body":"So you are sure the player used with the method is the right one? Because I don&#39;t see issue myself"},{"owner":{"account_id":27396340,"reputation":5,"user_id":21196393,"display_name":"Nopfp"},"score":0,"creation_date":1684742021,"post_id":76274261,"comment_id":134555625,"body_markdown":"Yeah im sure. I have no idea why its not working.","body":"Yeah im sure. I have no idea why its not working."},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1684746898,"post_id":76274261,"comment_id":134556659,"body_markdown":"Can you show the first call of those method? Like part of event or command","body":"Can you show the first call of those method? Like part of event or command"},{"owner":{"account_id":27396340,"reputation":5,"user_id":21196393,"display_name":"Nopfp"},"score":0,"creation_date":1684749862,"post_id":76274261,"comment_id":134557335,"body_markdown":"You mean like how it starts? it starts when you join the game or type /gui. It checks if you&#39;re a bedrock player thats joining first.","body":"You mean like how it starts? it starts when you join the game or type /gui. It checks if you&#39;re a bedrock player thats joining first."},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1684754096,"post_id":76274261,"comment_id":134558124,"body_markdown":"Ok, and you&#39;re simply doing `CentoriUI23.getInstance().ui_screen_market(playerThatRanCommand)` ?","body":"Ok, and you&#39;re simply doing <code>CentoriUI23.getInstance().ui_screen_market(playerThatRanComm&zwnj;&#8203;and)</code> ?"},{"owner":{"account_id":27396340,"reputation":5,"user_id":21196393,"display_name":"Nopfp"},"score":0,"creation_date":1684774322,"post_id":76274261,"comment_id":134562676,"body_markdown":"uh not really lol.","body":"uh not really lol."}],"owner":{"account_id":27396340,"reputation":5,"user_id":21196393,"display_name":"Nopfp"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684736868,"creation_date":1684340804,"question_id":76274261,"body_markdown":"I&#39;m currently working on a plugin that includes a marketplace feature where players can open a GUI to browse and purchase items from other players. I have a method called `ui_screen_market` that displays a list of player names as buttons, and when a player clicks on a button, it should open a new GUI with the items that the corresponding player is selling. However, I&#39;m facing an issue where clicking on a username in the ui_screen_market GUI opens another person&#39;s screen instead of the expected player&#39;s shop GUI.\r\n\r\nI have tried debugging the code and verifying the values being passed to the methods, but I couldn&#39;t find any obvious mistakes. I suspect there might be an issue with how I&#39;m handling the button clicks or accessing the player&#39;s data.\r\n\r\nExpected behavior:\r\n\r\nClicking on a player&#39;s name in the ui_screen_market GUI should open a new GUI displaying the items that the corresponding player is selling.\r\n\r\nActual behavior:\r\n\r\nClicking on a player&#39;s name in the ui_screen_market GUI opens another person&#39;s shop GUI instead of the expected player&#39;s shop GUI.\r\n\r\nFull code: https://pastebin.com/3Vffumk3\r\n\r\nMethod with issue:\r\n\r\n    public void ui_screen_market_create(Player player) {\r\n        FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\r\n        if (floodgatePlayer != null) {\r\n            floodgatePlayer.sendForm(CustomForm.builder()\r\n                    .title(&quot;Centori UI / MARKET / CREATE&quot;)\r\n                    .input(&quot;Shop name&quot;)\r\n                    .toggle(&quot;Confirm shop creation&quot;)\r\n                    .validResultHandler(response -&gt; {\r\n                        player.sendMessage(&quot;Shop creation in progress...&quot;);\r\n                        boolean toggleValue = response.asToggle(1);\r\n                        String inputValue = response.asInput(0);\r\n                        if (toggleValue) {\r\n                            Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;CentoriUI23&quot;);\r\n                            assert plugin != null;\r\n                            File directory = new File(plugin.getDataFolder(), &quot;bdata/&quot; + floodgatePlayer.getUsername());\r\n                            boolean exists = directory.exists();\r\n\r\n                            if (exists) {\r\n                                player.sendMessage(&quot;An error occurred. Your shop might already exist.&quot;);\r\n                            } else {\r\n                                if (directory.mkdirs()) {\r\n                                    File file = new File(directory, &quot;shops.json&quot;);\r\n                                    try (FileWriter writer = new FileWriter(file)) {\r\n                                        writer.write(&quot;{\\n   &#39;shop-name&#39;: &#39;&quot; + inputValue + &quot;&#39; \\n }&quot;);\r\n                                        writer.flush();\r\n                                        player.sendMessage(&quot;Shop created with name: &quot; + inputValue);\r\n                                    } catch (IOException e) {\r\n                                        e.printStackTrace();\r\n                                        player.sendMessage(&quot;Something went wrong while creating the shop. Please open a ticket in Discord.&quot;);\r\n                                        System.err.println(&quot;Failed to write to file: &quot; + file.getAbsolutePath());\r\n                                    }\r\n                                } else {\r\n                                    player.sendMessage(&quot;Something went wrong while creating the directory. Please open a ticket in Discord.&quot;);\r\n                                    System.err.println(&quot;Failed to create the directory: &quot; + directory.getAbsolutePath());\r\n                                }\r\n                            }\r\n                        } else {\r\n                            player.sendMessage(&quot;Shop creation has been canceled&quot;);\r\n                        }\r\n                    })\r\n                    .closedOrInvalidResultHandler(response -&gt; {\r\n                        player.sendMessage(&quot;Form closed or invalid&quot;);\r\n                    })\r\n                    .build());\r\n        }\r\n    }\r\n    public void ui_screen_market(Player player) {\r\n        FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\r\n        if (floodgatePlayer != null) {\r\n            List&lt;String&gt; shopNames = new ArrayList&lt;&gt;();\r\n\r\n            Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;CentoriUI23&quot;);\r\n            assert plugin != null;\r\n            File bdataFolder = new File(plugin.getDataFolder(), &quot;bdata&quot;);\r\n            File[] shopDirectories = bdataFolder.listFiles();\r\n\r\n            if (shopDirectories != null) {\r\n                for (File directory : shopDirectories) {\r\n                    if (directory.isDirectory()) {\r\n                        shopNames.add(directory.getName());\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!shopNames.isEmpty()) {\r\n                SimpleForm.Builder formBuilder = SimpleForm.builder()\r\n                        .title(&quot;Centori UI / MARKET TEST&quot;)\r\n                        .button(&quot;Go Back&quot;)\r\n                        .button(&quot;Create shop&quot;)\r\n                        .button(&quot;Delete shop&quot;)\r\n                        .button(&quot;Add item to your shop&quot;)\r\n                        .validResultHandler(response -&gt; {\r\n                            int clickedButtonId = response.getClickedButtonId();\r\n                            if (clickedButtonId == 0) {\r\n                                ui_screen_join_main(player);\r\n                            } else if (clickedButtonId == 1) {\r\n                                ui_screen_market_create(player);\r\n                            } else if (clickedButtonId &gt;= 3) {\r\n                                String clickedShopName = shopNames.get(clickedButtonId - 3);\r\n                                openPlayerItemsGUI(player, clickedShopName); // Updated method call\r\n                            }\r\n                        })\r\n                        .closedOrInvalidResultHandler(response -&gt; {\r\n                            player.sendMessage(&quot;Form closed or invalid&quot;);\r\n                        });\r\n\r\n                for (String shopName : shopNames) {\r\n                    formBuilder.button(shopName);\r\n                }\r\n\r\n                floodgatePlayer.sendForm(formBuilder.build());\r\n            } else {\r\n                player.sendMessage(&quot;No shops found.&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    public void ui_screen_market_add(Player player) {\r\n        FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\r\n        if (floodgatePlayer != null) {\r\n            floodgatePlayer.sendForm(CustomForm.builder()\r\n                    .title(&quot;Centori UI / MARKET / ADD&quot;)\r\n                            .input(&quot;Enter Price&quot;)\r\n                            .slider(&quot;Amount to sell for price&quot;,1,64)\r\n                            .toggle(&quot;I confirm that the item in my possession will not be returned to me. (the item in your hand)&quot;)\r\n                    .validResultHandler(response -&gt; {\r\n                        ItemStack heldItem = player.getInventory().getItemInMainHand();\r\n\r\n                            if (heldItem.getType() != Material.AIR) {\r\n\r\n                                Material heldMaterial = heldItem.getType();\r\n                                String itemName = heldItem.getType().toString();\r\n                                int itemPrice = Integer.parseInt(Objects.requireNonNull(response.asInput(0)));\r\n                                int itemAmount = heldItem.getAmount();\r\n                                if (itemAmount &lt; response.asSlider(1)) {\r\n                                    player.sendMessage(&quot;You dont have enough of this item.&quot;);\r\n                                } else {\r\n                                    JsonObject itemObject = new JsonObject();\r\n                                    itemObject.addProperty(&quot;price&quot;, itemPrice);\r\n                                    itemObject.addProperty(&quot;amount&quot;, itemAmount);\r\n                                    String itemDetails = itemObject.toString();\r\n                                    Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;&quot;);\r\n                                    player.getInventory().setItemInMainHand(null);\r\n                                }\r\n\r\n                            } else {\r\n                                // The player is not holding any item or holding air\r\n                                player.sendMessage(&quot;You are not holding anything.&quot;);\r\n                            }\r\n                    })\r\n                    .closedOrInvalidResultHandler(response -&gt; {\r\n                        player.sendMessage(&quot;GUI closed, type /gui to reopen!&quot;);\r\n                    })\r\n                    .build());\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    private void openPlayerItemsGUI(Player player, String playerName) {\r\n        FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\r\n        if (floodgatePlayer != null) {\r\n            SimpleForm.Builder formBuilder = SimpleForm.builder()\r\n                    .title(&quot;Items for Sale by: &quot; + playerName)\r\n                    .validResultHandler(response -&gt; {\r\n                        player.sendMessage(&quot;Loading...&quot;);\r\n                        // Implement the click event handling for the item buttons\r\n                        // Add your desired logic here based on the clicked button\r\n                    })\r\n                    .closedOrInvalidResultHandler(response -&gt; {\r\n                        player.sendMessage(&quot;Form closed or invalid&quot;);\r\n                    });\r\n\r\n            Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;CentoriUI23&quot;);\r\n            assert plugin != null;\r\n            File bdataFolder = new File(plugin.getDataFolder(), &quot;bdata&quot;);\r\n            File playerDirectory = new File(bdataFolder, playerName); // Use playerName parameter directly\r\n            File itemsFile = new File(playerDirectory, &quot;items.json&quot;);\r\n            if (!playerDirectory.exists()) {\r\n                player.sendMessage(&quot;Player directory does not exist: &quot; + playerName);\r\n                return;\r\n            }\r\n\r\n            // Check if the items file exists\r\n            if (!itemsFile.exists()) {\r\n                player.sendMessage(&quot;Items file does not exist: &quot; + itemsFile.getAbsolutePath());\r\n                return;\r\n            }\r\n            if (itemsFile.exists()) {\r\n                try (FileReader reader = new FileReader(itemsFile)) {\r\n                    JsonParser parser = new JsonParser();\r\n                    JsonElement jsonElement = parser.parse(reader);\r\n                    JsonObject jsonObject = jsonElement.getAsJsonObject();\r\n\r\n                    for (Map.Entry&lt;String, JsonElement&gt; entry : jsonObject.entrySet()) {\r\n                        String itemName = entry.getKey();\r\n                        String itemDetails = entry.getValue().getAsString();\r\n\r\n                        // Extract price and amount from the item details\r\n                        String[] priceAmount = itemDetails.split(&quot;\\\\. amount &quot;);\r\n                        int itemPrice = Integer.parseInt(priceAmount[0].split(&quot;:&quot;)[1].trim());\r\n                        int itemAmount = Integer.parseInt(priceAmount[1].trim());\r\n\r\n                        // Add the item as a button to the form\r\n                        formBuilder.button(itemName + &quot; - Price: &quot; + itemPrice + &quot;, Amount: &quot; + itemAmount);\r\n                    }\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            floodgatePlayer.sendForm(formBuilder.build());\r\n        }\r\n    }\r\n","title":"Issue with opening correct player&#39;s shop GUI in ui_screen_market method","body":"<p>I'm currently working on a plugin that includes a marketplace feature where players can open a GUI to browse and purchase items from other players. I have a method called <code>ui_screen_market</code> that displays a list of player names as buttons, and when a player clicks on a button, it should open a new GUI with the items that the corresponding player is selling. However, I'm facing an issue where clicking on a username in the ui_screen_market GUI opens another person's screen instead of the expected player's shop GUI.</p>\n<p>I have tried debugging the code and verifying the values being passed to the methods, but I couldn't find any obvious mistakes. I suspect there might be an issue with how I'm handling the button clicks or accessing the player's data.</p>\n<p>Expected behavior:</p>\n<p>Clicking on a player's name in the ui_screen_market GUI should open a new GUI displaying the items that the corresponding player is selling.</p>\n<p>Actual behavior:</p>\n<p>Clicking on a player's name in the ui_screen_market GUI opens another person's shop GUI instead of the expected player's shop GUI.</p>\n<p>Full code: <a href=\"https://pastebin.com/3Vffumk3\" rel=\"nofollow noreferrer\">https://pastebin.com/3Vffumk3</a></p>\n<p>Method with issue:</p>\n<pre><code>public void ui_screen_market_create(Player player) {\n    FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\n    if (floodgatePlayer != null) {\n        floodgatePlayer.sendForm(CustomForm.builder()\n                .title(&quot;Centori UI / MARKET / CREATE&quot;)\n                .input(&quot;Shop name&quot;)\n                .toggle(&quot;Confirm shop creation&quot;)\n                .validResultHandler(response -&gt; {\n                    player.sendMessage(&quot;Shop creation in progress...&quot;);\n                    boolean toggleValue = response.asToggle(1);\n                    String inputValue = response.asInput(0);\n                    if (toggleValue) {\n                        Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;CentoriUI23&quot;);\n                        assert plugin != null;\n                        File directory = new File(plugin.getDataFolder(), &quot;bdata/&quot; + floodgatePlayer.getUsername());\n                        boolean exists = directory.exists();\n\n                        if (exists) {\n                            player.sendMessage(&quot;An error occurred. Your shop might already exist.&quot;);\n                        } else {\n                            if (directory.mkdirs()) {\n                                File file = new File(directory, &quot;shops.json&quot;);\n                                try (FileWriter writer = new FileWriter(file)) {\n                                    writer.write(&quot;{\\n   'shop-name': '&quot; + inputValue + &quot;' \\n }&quot;);\n                                    writer.flush();\n                                    player.sendMessage(&quot;Shop created with name: &quot; + inputValue);\n                                } catch (IOException e) {\n                                    e.printStackTrace();\n                                    player.sendMessage(&quot;Something went wrong while creating the shop. Please open a ticket in Discord.&quot;);\n                                    System.err.println(&quot;Failed to write to file: &quot; + file.getAbsolutePath());\n                                }\n                            } else {\n                                player.sendMessage(&quot;Something went wrong while creating the directory. Please open a ticket in Discord.&quot;);\n                                System.err.println(&quot;Failed to create the directory: &quot; + directory.getAbsolutePath());\n                            }\n                        }\n                    } else {\n                        player.sendMessage(&quot;Shop creation has been canceled&quot;);\n                    }\n                })\n                .closedOrInvalidResultHandler(response -&gt; {\n                    player.sendMessage(&quot;Form closed or invalid&quot;);\n                })\n                .build());\n    }\n}\npublic void ui_screen_market(Player player) {\n    FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\n    if (floodgatePlayer != null) {\n        List&lt;String&gt; shopNames = new ArrayList&lt;&gt;();\n\n        Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;CentoriUI23&quot;);\n        assert plugin != null;\n        File bdataFolder = new File(plugin.getDataFolder(), &quot;bdata&quot;);\n        File[] shopDirectories = bdataFolder.listFiles();\n\n        if (shopDirectories != null) {\n            for (File directory : shopDirectories) {\n                if (directory.isDirectory()) {\n                    shopNames.add(directory.getName());\n                }\n            }\n        }\n\n        if (!shopNames.isEmpty()) {\n            SimpleForm.Builder formBuilder = SimpleForm.builder()\n                    .title(&quot;Centori UI / MARKET TEST&quot;)\n                    .button(&quot;Go Back&quot;)\n                    .button(&quot;Create shop&quot;)\n                    .button(&quot;Delete shop&quot;)\n                    .button(&quot;Add item to your shop&quot;)\n                    .validResultHandler(response -&gt; {\n                        int clickedButtonId = response.getClickedButtonId();\n                        if (clickedButtonId == 0) {\n                            ui_screen_join_main(player);\n                        } else if (clickedButtonId == 1) {\n                            ui_screen_market_create(player);\n                        } else if (clickedButtonId &gt;= 3) {\n                            String clickedShopName = shopNames.get(clickedButtonId - 3);\n                            openPlayerItemsGUI(player, clickedShopName); // Updated method call\n                        }\n                    })\n                    .closedOrInvalidResultHandler(response -&gt; {\n                        player.sendMessage(&quot;Form closed or invalid&quot;);\n                    });\n\n            for (String shopName : shopNames) {\n                formBuilder.button(shopName);\n            }\n\n            floodgatePlayer.sendForm(formBuilder.build());\n        } else {\n            player.sendMessage(&quot;No shops found.&quot;);\n        }\n    }\n}\n\n\n\n\n\npublic void ui_screen_market_add(Player player) {\n    FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\n    if (floodgatePlayer != null) {\n        floodgatePlayer.sendForm(CustomForm.builder()\n                .title(&quot;Centori UI / MARKET / ADD&quot;)\n                        .input(&quot;Enter Price&quot;)\n                        .slider(&quot;Amount to sell for price&quot;,1,64)\n                        .toggle(&quot;I confirm that the item in my possession will not be returned to me. (the item in your hand)&quot;)\n                .validResultHandler(response -&gt; {\n                    ItemStack heldItem = player.getInventory().getItemInMainHand();\n\n                        if (heldItem.getType() != Material.AIR) {\n\n                            Material heldMaterial = heldItem.getType();\n                            String itemName = heldItem.getType().toString();\n                            int itemPrice = Integer.parseInt(Objects.requireNonNull(response.asInput(0)));\n                            int itemAmount = heldItem.getAmount();\n                            if (itemAmount &lt; response.asSlider(1)) {\n                                player.sendMessage(&quot;You dont have enough of this item.&quot;);\n                            } else {\n                                JsonObject itemObject = new JsonObject();\n                                itemObject.addProperty(&quot;price&quot;, itemPrice);\n                                itemObject.addProperty(&quot;amount&quot;, itemAmount);\n                                String itemDetails = itemObject.toString();\n                                Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;&quot;);\n                                player.getInventory().setItemInMainHand(null);\n                            }\n\n                        } else {\n                            // The player is not holding any item or holding air\n                            player.sendMessage(&quot;You are not holding anything.&quot;);\n                        }\n                })\n                .closedOrInvalidResultHandler(response -&gt; {\n                    player.sendMessage(&quot;GUI closed, type /gui to reopen!&quot;);\n                })\n                .build());\n    }\n}\n\n\n\n\n\n\nprivate void openPlayerItemsGUI(Player player, String playerName) {\n    FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\n    if (floodgatePlayer != null) {\n        SimpleForm.Builder formBuilder = SimpleForm.builder()\n                .title(&quot;Items for Sale by: &quot; + playerName)\n                .validResultHandler(response -&gt; {\n                    player.sendMessage(&quot;Loading...&quot;);\n                    // Implement the click event handling for the item buttons\n                    // Add your desired logic here based on the clicked button\n                })\n                .closedOrInvalidResultHandler(response -&gt; {\n                    player.sendMessage(&quot;Form closed or invalid&quot;);\n                });\n\n        Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;CentoriUI23&quot;);\n        assert plugin != null;\n        File bdataFolder = new File(plugin.getDataFolder(), &quot;bdata&quot;);\n        File playerDirectory = new File(bdataFolder, playerName); // Use playerName parameter directly\n        File itemsFile = new File(playerDirectory, &quot;items.json&quot;);\n        if (!playerDirectory.exists()) {\n            player.sendMessage(&quot;Player directory does not exist: &quot; + playerName);\n            return;\n        }\n\n        // Check if the items file exists\n        if (!itemsFile.exists()) {\n            player.sendMessage(&quot;Items file does not exist: &quot; + itemsFile.getAbsolutePath());\n            return;\n        }\n        if (itemsFile.exists()) {\n            try (FileReader reader = new FileReader(itemsFile)) {\n                JsonParser parser = new JsonParser();\n                JsonElement jsonElement = parser.parse(reader);\n                JsonObject jsonObject = jsonElement.getAsJsonObject();\n\n                for (Map.Entry&lt;String, JsonElement&gt; entry : jsonObject.entrySet()) {\n                    String itemName = entry.getKey();\n                    String itemDetails = entry.getValue().getAsString();\n\n                    // Extract price and amount from the item details\n                    String[] priceAmount = itemDetails.split(&quot;\\\\. amount &quot;);\n                    int itemPrice = Integer.parseInt(priceAmount[0].split(&quot;:&quot;)[1].trim());\n                    int itemAmount = Integer.parseInt(priceAmount[1].trim());\n\n                    // Add the item as a button to the form\n                    formBuilder.button(itemName + &quot; - Price: &quot; + itemPrice + &quot;, Amount: &quot; + itemAmount);\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n\n        floodgatePlayer.sendForm(formBuilder.build());\n    }\n}\n</code></pre>\n"},{"tags":["java","linux","ssl","tls1.2","nessus"],"comments":[{"owner":{"account_id":3701398,"reputation":116692,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":0,"creation_date":1663751582,"post_id":73797872,"comment_id":130310994,"body_markdown":"What does Nessus even scan? You show running openssl and nmap running against port 8443 - is this really what Nessus also does?","body":"What does Nessus even scan? You show running openssl and nmap running against port 8443 - is this really what Nessus also does?"},{"owner":{"account_id":19469961,"reputation":91,"user_id":14242535,"display_name":"Learner"},"score":0,"creation_date":1663759984,"post_id":73797872,"comment_id":130314025,"body_markdown":"@SteffenUllrich..No, Nessus doesn&#39;t scan against port 8443. But it scans the entire server.","body":"@SteffenUllrich..No, Nessus doesn&#39;t scan against port 8443. But it scans the entire server."},{"owner":{"account_id":3701398,"reputation":116692,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":1,"creation_date":1663763473,"post_id":73797872,"comment_id":130315239,"body_markdown":"If the results from Nessus regarding TLS 1.0 are not from scanning port 8443 but a different port, then you need to look at the configuration of whatever is running on this port instead.","body":"If the results from Nessus regarding TLS 1.0 are not from scanning port 8443 but a different port, then you need to look at the configuration of whatever is running on this port instead."},{"owner":{"account_id":19469961,"reputation":91,"user_id":14242535,"display_name":"Learner"},"score":0,"creation_date":1664889008,"post_id":73797872,"comment_id":130569318,"body_markdown":"@SteffenUllrich..Please find my edited details at the end of my question.","body":"@SteffenUllrich..Please find my edited details at the end of my question."}],"answers":[{"tags":[],"owner":{"account_id":2611193,"reputation":1067,"user_id":2261349,"display_name":"Znik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684736414,"creation_date":1684736414,"answer_id":76303469,"question_id":73797872,"body_markdown":"Nessus is only scanner. This situation tells you. default tools and system services are secured, but it is not tomcat run inside JVM.\r\nYou have two ways for resolve this one:\r\n1. Disable old crypto protocols globally in JVM or Tomcat. Usually it is in JVM. You can do int in mail JVM config for all java process, or by specyfing variable for JVM run. It is described here: https://stackoverflow.com/questions/41181696/disabling-tlsv1-0-in-java8\r\n2. Better way, is configuring apache as a proxy to tomcat, and completly disable tomcat for allowing TCP connection. You can do it by loopback netwok.","title":"How to fix &quot;TLS Version 1.0 Protocol Detection and TLS Version 1.1 Protocol Deprecated&quot; Nessus Scan Vulnerability","body":"<p>Nessus is only scanner. This situation tells you. default tools and system services are secured, but it is not tomcat run inside JVM.\nYou have two ways for resolve this one:</p>\n<ol>\n<li>Disable old crypto protocols globally in JVM or Tomcat. Usually it is in JVM. You can do int in mail JVM config for all java process, or by specyfing variable for JVM run. It is described here: <a href=\"https://stackoverflow.com/questions/41181696/disabling-tlsv1-0-in-java8\">Disabling TLSv1.0 in java8</a></li>\n<li>Better way, is configuring apache as a proxy to tomcat, and completly disable tomcat for allowing TCP connection. You can do it by loopback netwok.</li>\n</ol>\n"}],"owner":{"account_id":19469961,"reputation":91,"user_id":14242535,"display_name":"Learner"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3880,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1684736414,"creation_date":1663750100,"question_id":73797872,"body_markdown":"We are running our Java Application on RHEL 8.5 OS platform. In our Apache&#39;s ssl.conf file, we have enabled only TLSv1.2 protocol. And we are not using TLSv1 and TLSv1.1 protocols in our application. \r\n\r\nFrom the below details, it is confirmed that the above protocols are disabled from an OS perspective also.\r\n\r\n```\r\nupdate-crypto-policies --show\r\nDEFAULT\r\n```\r\n\r\nFrom RHEL, it is confirmed that &quot;The TLS versions TLS 1.0 and TLS 1.1 protocols are disabled in the DEFAULT system-wide cryptographic policy level. &quot;\r\n\r\nAnd from the below command results, it is confirmed that TLS 1.0 and TLS 1.1 is disabled from the Application Side.\r\n\r\n```\r\n[root@test ~]# openssl s_client -connect &lt;IP_ADDRESS&gt;:8443 -tls1\r\nCONNECTED(00000003)\r\n139679030896448:error:1409442E:SSL routines:ssl3_read_bytes:tlsv1 alert protocol version:ssl/record/rec_layer_s3.c:1544:SSL alert number 70\r\n---\r\nno peer certificate available\r\n---\r\nNo client certificate CA names sent\r\n---\r\nSSL handshake has read 7 bytes and written 104 bytes\r\nVerification: OK\r\n---\r\nNew, (NONE), Cipher is (NONE)\r\nSecure Renegotiation IS NOT supported\r\nCompression: NONE\r\nExpansion: NONE\r\nNo ALPN negotiated\r\nSSL-Session:\r\n    Protocol  : TLSv1\r\n    Cipher    : 0000\r\n    Session-ID:\r\n    Session-ID-ctx:\r\n    Master-Key:\r\n    PSK identity: None\r\n    PSK identity hint: None\r\n    SRP username: None\r\n    Start Time: 1662128840\r\n    Timeout   : 7200 (sec)\r\n    Verify return code: 0 (ok)\r\n    Extended master secret: no\r\n-----------------------------------------\r\n\r\n[root@test ~]# nmap -sV --script ssl-enum-ciphers -p 8443 &lt;IP_ADDRESS&gt;\r\nStarting Nmap 7.70 ( https://nmap.org ) at 2022-09-20 20:02 IST\r\nmass_dns: warning: Unable to open /etc/resolv.conf. Try using --system-dns or specify valid servers with --dns-servers\r\nmass_dns: warning: Unable to determine any DNS servers. Reverse DNS is disabled. Try using --system-dns or specify valid servers with --dns-servers\r\nNmap scan report for XXXXX (IP_ADDRESS)\r\nHost is up (0.00067s latency).\r\n\r\nPORT     STATE SERVICE  VERSION\r\n8443/tcp open  ssl/http Apache httpd\r\n|_http-server-header: Apache\r\n| ssl-enum-ciphers:\r\n|   TLSv1.2:\r\n|     ciphers:\r\n|       TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 (secp256r1) - A\r\n|       TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 (secp256r1) - A\r\n|       TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 (secp256r1) - A\r\n|     compressors:\r\n|       NULL\r\n|     cipher preference: client\r\n|_  least strength: A\r\nMAC Address: 00:50:56:A7:92:7B (VMware)\r\n\r\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\r\nNmap done: 1 IP address (1 host up) scanned in 12.90 seconds\r\n\r\n-----------------------------------------\r\n```\r\n\r\nPlease find the configurations on &quot;ssl.conf&quot;,\r\n```\r\nSSLProtocol -ALL +TLSv1.2\r\nSSLCipherSuite ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:AES256-CCM:DHE-RSA-AES256-CCM\r\n```\r\n\r\nBut we are in confusion that why the Nessus scan vulnerability shows the TLS 1.0 and TLS 1.1 protocols even though those 2 protocols are disabled in all possibilities.\r\n\r\nVulnerability Details are listed below,\r\n\r\n 1. 104743 TLS Version 1.0 Protocol Detection\r\n 2. 157288 TLS Version 1.1 Protocol Deprecated\r\n\r\n\r\nFrom Nessus team, we came to know that port 4567 is using the below ciphers,\r\n```\r\nTLS1_DHE_DSS_WITH_AES_128_CBC_SHA256\r\nTLS1_DHE_DSS_WITH_AES_256_CBC_SHA256\r\nTLS1_CK_DHE_DSS_WITH_AES_128_CBC_SHA\r\nTLS1_CK_DHE_DSS_WITH_AES_256_CBC_SHA\r\nTLS1_CK_DHE_DSS_WITH_3DES_EDE_CBC_SHA\r\n```\r\n\r\nIn our application, we are using port 4567 as TRUSTSTORE_PORT where it is downloading the required certificates for the application to run.\r\n\r\nBut we enabled only the TLSv1.2 protocol. How the TLS1 ciphers are enabled?\r\n\r\nPlease let me know how to overcome these vulnerabilities.\r\n\r\nThanks in Advance.\r\n\r\n\r\n","title":"How to fix &quot;TLS Version 1.0 Protocol Detection and TLS Version 1.1 Protocol Deprecated&quot; Nessus Scan Vulnerability","body":"<p>We are running our Java Application on RHEL 8.5 OS platform. In our Apache's ssl.conf file, we have enabled only TLSv1.2 protocol. And we are not using TLSv1 and TLSv1.1 protocols in our application.</p>\n<p>From the below details, it is confirmed that the above protocols are disabled from an OS perspective also.</p>\n<pre><code>update-crypto-policies --show\nDEFAULT\n</code></pre>\n<p>From RHEL, it is confirmed that &quot;The TLS versions TLS 1.0 and TLS 1.1 protocols are disabled in the DEFAULT system-wide cryptographic policy level. &quot;</p>\n<p>And from the below command results, it is confirmed that TLS 1.0 and TLS 1.1 is disabled from the Application Side.</p>\n<pre><code>[root@test ~]# openssl s_client -connect &lt;IP_ADDRESS&gt;:8443 -tls1\nCONNECTED(00000003)\n139679030896448:error:1409442E:SSL routines:ssl3_read_bytes:tlsv1 alert protocol version:ssl/record/rec_layer_s3.c:1544:SSL alert number 70\n---\nno peer certificate available\n---\nNo client certificate CA names sent\n---\nSSL handshake has read 7 bytes and written 104 bytes\nVerification: OK\n---\nNew, (NONE), Cipher is (NONE)\nSecure Renegotiation IS NOT supported\nCompression: NONE\nExpansion: NONE\nNo ALPN negotiated\nSSL-Session:\n    Protocol  : TLSv1\n    Cipher    : 0000\n    Session-ID:\n    Session-ID-ctx:\n    Master-Key:\n    PSK identity: None\n    PSK identity hint: None\n    SRP username: None\n    Start Time: 1662128840\n    Timeout   : 7200 (sec)\n    Verify return code: 0 (ok)\n    Extended master secret: no\n-----------------------------------------\n\n[root@test ~]# nmap -sV --script ssl-enum-ciphers -p 8443 &lt;IP_ADDRESS&gt;\nStarting Nmap 7.70 ( https://nmap.org ) at 2022-09-20 20:02 IST\nmass_dns: warning: Unable to open /etc/resolv.conf. Try using --system-dns or specify valid servers with --dns-servers\nmass_dns: warning: Unable to determine any DNS servers. Reverse DNS is disabled. Try using --system-dns or specify valid servers with --dns-servers\nNmap scan report for XXXXX (IP_ADDRESS)\nHost is up (0.00067s latency).\n\nPORT     STATE SERVICE  VERSION\n8443/tcp open  ssl/http Apache httpd\n|_http-server-header: Apache\n| ssl-enum-ciphers:\n|   TLSv1.2:\n|     ciphers:\n|       TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 (secp256r1) - A\n|       TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 (secp256r1) - A\n|       TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 (secp256r1) - A\n|     compressors:\n|       NULL\n|     cipher preference: client\n|_  least strength: A\nMAC Address: 00:50:56:A7:92:7B (VMware)\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 12.90 seconds\n\n-----------------------------------------\n</code></pre>\n<p>Please find the configurations on &quot;ssl.conf&quot;,</p>\n<pre><code>SSLProtocol -ALL +TLSv1.2\nSSLCipherSuite ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:AES256-CCM:DHE-RSA-AES256-CCM\n</code></pre>\n<p>But we are in confusion that why the Nessus scan vulnerability shows the TLS 1.0 and TLS 1.1 protocols even though those 2 protocols are disabled in all possibilities.</p>\n<p>Vulnerability Details are listed below,</p>\n<ol>\n<li>104743 TLS Version 1.0 Protocol Detection</li>\n<li>157288 TLS Version 1.1 Protocol Deprecated</li>\n</ol>\n<p>From Nessus team, we came to know that port 4567 is using the below ciphers,</p>\n<pre><code>TLS1_DHE_DSS_WITH_AES_128_CBC_SHA256\nTLS1_DHE_DSS_WITH_AES_256_CBC_SHA256\nTLS1_CK_DHE_DSS_WITH_AES_128_CBC_SHA\nTLS1_CK_DHE_DSS_WITH_AES_256_CBC_SHA\nTLS1_CK_DHE_DSS_WITH_3DES_EDE_CBC_SHA\n</code></pre>\n<p>In our application, we are using port 4567 as TRUSTSTORE_PORT where it is downloading the required certificates for the application to run.</p>\n<p>But we enabled only the TLSv1.2 protocol. How the TLS1 ciphers are enabled?</p>\n<p>Please let me know how to overcome these vulnerabilities.</p>\n<p>Thanks in Advance.</p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb"],"owner":{"account_id":22960907,"reputation":43,"user_id":17090789,"display_name":"Thomas124124"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684736314,"creation_date":1684313793,"question_id":76270267,"body_markdown":"In the past while using DynamoDBMapper I was able to get information after batch put items about the error message. Right now doing the batch using EnchancedDynamoDBClient I can only get key of that item. Any way to get information why the batch for specific item didint work?\r\n\r\n```\r\nprivate void saveToDb(DynamoDbTable&lt;PartImportWarehouse&gt;partStockDataTable, List&lt;PartImportWarehouse&gt; modifiedImportaWrehouse, DynamoDbEnhancedClient dynamoDbEnhancedClient) {\r\n        WriteBatch.Builder&lt;PartImportWarehouse&gt; writeBatchBuilder = WriteBatch.builder(PartImportWarehouse.class)\r\n                .mappedTableResource(partStockDataTable);\r\n\r\n        modifiedImportaWrehouse.forEach(writeBatchBuilder::addPutItem);\r\n\r\n        BatchWriteItemEnhancedRequest batchRequestBuilder = BatchWriteItemEnhancedRequest.builder()\r\n                .addWriteBatch(writeBatchBuilder.build())\r\n                .build();\r\n\r\n        BatchWriteResult batchWriteResult = dynamoDbEnhancedClient.batchWriteItem(batchRequestBuilder);\r\n\r\n        if (!CollectionUtils.isEmpty(batchWriteResult.unprocessedPutItemsForTable(partStockDataTable))) {\r\n            log.warn(batchWriteResult.unprocessedPutItemsForTable(partStockDataTable).stream()\r\n                    .map(i -&gt; &quot;issue with &quot; + i.getKey())\r\n                    .collect(Collectors.joining(&quot;, &quot;)));\r\n        }\r\n    }\r\n\r\n```\r\n\r\n@Edit\r\nIn past I was able to get partial response for failed part with code like:\r\n[![enter image description here][1]][1]\r\nDont mind the errors. I havent reloaded the project. But I was able to get errors for each part.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kRLCO.png","title":"DynamoDB enchanced client batch error response","body":"<p>In the past while using DynamoDBMapper I was able to get information after batch put items about the error message. Right now doing the batch using EnchancedDynamoDBClient I can only get key of that item. Any way to get information why the batch for specific item didint work?</p>\n<pre><code>private void saveToDb(DynamoDbTable&lt;PartImportWarehouse&gt;partStockDataTable, List&lt;PartImportWarehouse&gt; modifiedImportaWrehouse, DynamoDbEnhancedClient dynamoDbEnhancedClient) {\n        WriteBatch.Builder&lt;PartImportWarehouse&gt; writeBatchBuilder = WriteBatch.builder(PartImportWarehouse.class)\n                .mappedTableResource(partStockDataTable);\n\n        modifiedImportaWrehouse.forEach(writeBatchBuilder::addPutItem);\n\n        BatchWriteItemEnhancedRequest batchRequestBuilder = BatchWriteItemEnhancedRequest.builder()\n                .addWriteBatch(writeBatchBuilder.build())\n                .build();\n\n        BatchWriteResult batchWriteResult = dynamoDbEnhancedClient.batchWriteItem(batchRequestBuilder);\n\n        if (!CollectionUtils.isEmpty(batchWriteResult.unprocessedPutItemsForTable(partStockDataTable))) {\n            log.warn(batchWriteResult.unprocessedPutItemsForTable(partStockDataTable).stream()\n                    .map(i -&gt; &quot;issue with &quot; + i.getKey())\n                    .collect(Collectors.joining(&quot;, &quot;)));\n        }\n    }\n\n</code></pre>\n<p>@Edit\nIn past I was able to get partial response for failed part with code like:\n<a href=\"https://i.stack.imgur.com/kRLCO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kRLCO.png\" alt=\"enter image description here\" /></a>\nDont mind the errors. I havent reloaded the project. But I was able to get errors for each part.</p>\n"},{"tags":["java","apache-camel","camel-routes"],"owner":{"account_id":28651418,"reputation":1,"user_id":21938324,"display_name":"Pew Die"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684735877,"creation_date":1684735615,"question_id":76303408,"body_markdown":"I have multiple messages which should be sent to a MQ &#39;foo&#39;.\r\nAfter sending a message from &#39;route-1&#39;, the program should wait for a reply on MQ &#39;bar&#39;. \r\nOnly after getting a reply on queue &#39;bar&#39;, the next message should be sent.\r\n\r\n[Apache camel Documentation](https://camel.apache.org/manual/faq/how-can-i-stop-a-route-from-a-route.html)\r\n\r\nI have followed the steps given in the documentation. All the messages are getting routed and then the route is getting suspended.\r\n\r\ninput.txt\r\n`msg1,msg2,msg3,msg4,msg5`\r\n\r\nbeans.xml\r\n```\r\n    &lt;camelContext id=&quot;orc-1&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;\r\n        &lt;route id=&quot;route-1&quot;&gt;\r\n            &lt;from uri=&quot;file://D://camelInput?fileName=input.txt&quot; /&gt;\r\n            &lt;split&gt;\r\n                &lt;tokenize token=&quot;,&quot; /&gt;\r\n                &lt;log message=&quot;${body}&quot; /&gt;\r\n                &lt;to uri=&quot;jms:queue:foo&quot; /&gt;\r\n                &lt;process ref=&quot;postProcessor&quot; /&gt;\r\n            &lt;/split&gt;\r\n        &lt;/route&gt;\r\n        &lt;route id=&quot;route-2&quot;&gt;\r\n            &lt;from uri=&quot;jms:queue:bar&quot; /&gt;\r\n\t\t&lt;!--restart route-1--&gt;\r\n        &lt;/route&gt;\r\n    &lt;/camelContext&gt;\r\n```\r\n\r\nPostProcessor.java\r\n```\r\npublic class PostProcessor implements Processor {\r\n\r\n    Thread stop;\r\n\r\n    @Override\r\n    public void process(Exchange exchange) throws Exception {\r\n        // stop this route using a thread that will stop\r\n        // this route gracefully while we are still running\r\n        if (stop == null) {\r\n            stop = new Thread() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        exchange.getContext().getRouteController().suspendRoute(&quot;route-1&quot;);\r\n                    } catch (Exception e) {\r\n                        // ignore\r\n                    }\r\n                }\r\n            };\r\n        }\r\n        // start the thread that stops this route\r\n        stop.start();\r\n    }\r\n}\r\n\r\n```\r\n\r\nlogs\r\n\r\n```\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::               (v2.7.11)\r\n\r\n2023-05-22 11:01:52.812  INFO 23484 --- [           main] com.persistent.camel.CamelApplication    : Starting CamelApplication using Java 14.0.2 on PSL-5Q47XM3 with PID 23484 (D:\\camel\\camel\\target\\classes started by shashank_mugatkar in D:\\camel\\camel)\r\n2023-05-22 11:01:52.815  INFO 23484 --- [           main] com.persistent.camel.CamelApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-05-22 11:01:54.951  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.3 (orc-1) is starting\r\n2023-05-22 11:01:55.146  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:3)\r\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route-1 (file://D://camelInput)\r\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route-2 (jms://queue:bar)\r\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route-3 (direct://suspendRoute1)\r\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.3 (orc-1) started in 453ms (build:64ms init:195ms start:194ms)\r\n2023-05-22 11:01:55.157  INFO 23484 --- [           main] com.persistent.camel.CamelApplication    : Started CamelApplication in 2.742 seconds (JVM running for 3.157)\r\n2023-05-22 11:01:56.007  INFO 23484 --- [/D://camelInput] route-1                                  : msg0\r\n2023-05-22 11:01:56.035  INFO 23484 --- [/D://camelInput] route-1                                  : msg1\r\n2023-05-22 11:01:56.040  INFO 23484 --- [ - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 2 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route-1 = 2]\r\n2023-05-22 11:01:56.050 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000001 on ExchangeId: 23D21B5DF3A3295-0000000000000001). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\r\n\r\nMessage History (source location and message history is disabled)\r\n---------------------------------------------------------------------------------------------------------------------------------------\r\nSource                                   ID                             Processor                                          Elapsed (ms)\r\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539704\r\n\t...\r\n                                         route-1/process1               ref:postProcessor                                             0\r\n\r\nStacktrace\r\n---------------------------------------------------------------------------------------------------------------------------------------\r\n\r\njava.lang.IllegalThreadStateException: null\r\n\tat java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\r\n\tat com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\r\n\tat org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n\r\n2023-05-22 11:01:56.051  INFO 23484 --- [/D://camelInput] route-1                                  : msg2\r\n2023-05-22 11:01:56.061 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000002 on ExchangeId: 23D21B5DF3A3295-0000000000000002). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\r\n\r\nMessage History (source location and message history is disabled)\r\n---------------------------------------------------------------------------------------------------------------------------------------\r\nSource                                   ID                             Processor                                          Elapsed (ms)\r\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539720\r\n\t...\r\n                                         route-1/process1               ref:postProcessor                                             0\r\n\r\nStacktrace\r\n---------------------------------------------------------------------------------------------------------------------------------------\r\n\r\njava.lang.IllegalThreadStateException: null\r\n\tat java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\r\n\tat com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\r\n\tat org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n\r\n2023-05-22 11:01:56.062  INFO 23484 --- [/D://camelInput] route-1                                  : msg3\r\n2023-05-22 11:01:56.072 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000003 on ExchangeId: 23D21B5DF3A3295-0000000000000003). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\r\n\r\nMessage History (source location and message history is disabled)\r\n---------------------------------------------------------------------------------------------------------------------------------------\r\nSource                                   ID                             Processor                                          Elapsed (ms)\r\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539730\r\n\t...\r\n                                         route-1/process1               ref:postProcessor                                             0\r\n\r\nStacktrace\r\n---------------------------------------------------------------------------------------------------------------------------------------\r\n\r\njava.lang.IllegalThreadStateException: null\r\n\tat java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\r\n\tat com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\r\n\tat org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n\r\n2023-05-22 11:01:56.072  INFO 23484 --- [/D://camelInput] route-1                                  : msg4\r\n\r\n2023-05-22 11:01:56.083 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000004 on ExchangeId: 23D21B5DF3A3295-0000000000000004). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\r\n\r\nMessage History (source location and message history is disabled)\r\n---------------------------------------------------------------------------------------------------------------------------------------\r\nSource                                   ID                             Processor                                          Elapsed (ms)\r\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539741\r\n\t...\r\n                                         route-1/process1               ref:postProcessor                                             0\r\n\r\nStacktrace\r\n---------------------------------------------------------------------------------------------------------------------------------------\r\n\r\njava.lang.IllegalThreadStateException: null\r\n\tat java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\r\n\tat com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\r\n\tat org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n\r\n2023-05-22 11:01:56.083  WARN 23484 --- [/D://camelInput] o.a.c.c.file.GenericFileOnCompletion     : Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@4436c7b8 for file: GenericFile[D:\\camelInput\\input.txt]\r\n2023-05-22 11:01:57.047  INFO 23484 --- [       Thread-3] o.a.c.impl.engine.AbstractCamelContext   : Suspended route-1 (file://D://camelInput)\r\n\r\n```\r\n\r\n\r\n","title":"Suspend and Resume Apache Camel routes","body":"<p>I have multiple messages which should be sent to a MQ 'foo'.\nAfter sending a message from 'route-1', the program should wait for a reply on MQ 'bar'.\nOnly after getting a reply on queue 'bar', the next message should be sent.</p>\n<p><a href=\"https://camel.apache.org/manual/faq/how-can-i-stop-a-route-from-a-route.html\" rel=\"nofollow noreferrer\">Apache camel Documentation</a></p>\n<p>I have followed the steps given in the documentation. All the messages are getting routed and then the route is getting suspended.</p>\n<p>input.txt\n<code>msg1,msg2,msg3,msg4,msg5</code></p>\n<p>beans.xml</p>\n<pre><code>    &lt;camelContext id=&quot;orc-1&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;\n        &lt;route id=&quot;route-1&quot;&gt;\n            &lt;from uri=&quot;file://D://camelInput?fileName=input.txt&quot; /&gt;\n            &lt;split&gt;\n                &lt;tokenize token=&quot;,&quot; /&gt;\n                &lt;log message=&quot;${body}&quot; /&gt;\n                &lt;to uri=&quot;jms:queue:foo&quot; /&gt;\n                &lt;process ref=&quot;postProcessor&quot; /&gt;\n            &lt;/split&gt;\n        &lt;/route&gt;\n        &lt;route id=&quot;route-2&quot;&gt;\n            &lt;from uri=&quot;jms:queue:bar&quot; /&gt;\n        &lt;!--restart route-1--&gt;\n        &lt;/route&gt;\n    &lt;/camelContext&gt;\n</code></pre>\n<p>PostProcessor.java</p>\n<pre><code>public class PostProcessor implements Processor {\n\n    Thread stop;\n\n    @Override\n    public void process(Exchange exchange) throws Exception {\n        // stop this route using a thread that will stop\n        // this route gracefully while we are still running\n        if (stop == null) {\n            stop = new Thread() {\n                @Override\n                public void run() {\n                    try {\n                        exchange.getContext().getRouteController().suspendRoute(&quot;route-1&quot;);\n                    } catch (Exception e) {\n                        // ignore\n                    }\n                }\n            };\n        }\n        // start the thread that stops this route\n        stop.start();\n    }\n}\n\n</code></pre>\n<p>logs</p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::               (v2.7.11)\n\n2023-05-22 11:01:52.812  INFO 23484 --- [           main] com.persistent.camel.CamelApplication    : Starting CamelApplication using Java 14.0.2 on PSL-5Q47XM3 with PID 23484 (D:\\camel\\camel\\target\\classes started by shashank_mugatkar in D:\\camel\\camel)\n2023-05-22 11:01:52.815  INFO 23484 --- [           main] com.persistent.camel.CamelApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-05-22 11:01:54.951  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.3 (orc-1) is starting\n2023-05-22 11:01:55.146  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:3)\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route-1 (file://D://camelInput)\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route-2 (jms://queue:bar)\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route-3 (direct://suspendRoute1)\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.3 (orc-1) started in 453ms (build:64ms init:195ms start:194ms)\n2023-05-22 11:01:55.157  INFO 23484 --- [           main] com.persistent.camel.CamelApplication    : Started CamelApplication in 2.742 seconds (JVM running for 3.157)\n2023-05-22 11:01:56.007  INFO 23484 --- [/D://camelInput] route-1                                  : msg0\n2023-05-22 11:01:56.035  INFO 23484 --- [/D://camelInput] route-1                                  : msg1\n2023-05-22 11:01:56.040  INFO 23484 --- [ - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 2 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route-1 = 2]\n2023-05-22 11:01:56.050 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000001 on ExchangeId: 23D21B5DF3A3295-0000000000000001). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\n\nMessage History (source location and message history is disabled)\n---------------------------------------------------------------------------------------------------------------------------------------\nSource                                   ID                             Processor                                          Elapsed (ms)\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539704\n    ...\n                                         route-1/process1               ref:postProcessor                                             0\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\n\njava.lang.IllegalThreadStateException: null\n    at java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\n    at com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\n    at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n\n2023-05-22 11:01:56.051  INFO 23484 --- [/D://camelInput] route-1                                  : msg2\n2023-05-22 11:01:56.061 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000002 on ExchangeId: 23D21B5DF3A3295-0000000000000002). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\n\nMessage History (source location and message history is disabled)\n---------------------------------------------------------------------------------------------------------------------------------------\nSource                                   ID                             Processor                                          Elapsed (ms)\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539720\n    ...\n                                         route-1/process1               ref:postProcessor                                             0\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\n\njava.lang.IllegalThreadStateException: null\n    at java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\n    at com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\n    at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n\n2023-05-22 11:01:56.062  INFO 23484 --- [/D://camelInput] route-1                                  : msg3\n2023-05-22 11:01:56.072 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000003 on ExchangeId: 23D21B5DF3A3295-0000000000000003). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\n\nMessage History (source location and message history is disabled)\n---------------------------------------------------------------------------------------------------------------------------------------\nSource                                   ID                             Processor                                          Elapsed (ms)\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539730\n    ...\n                                         route-1/process1               ref:postProcessor                                             0\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\n\njava.lang.IllegalThreadStateException: null\n    at java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\n    at com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\n    at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n\n2023-05-22 11:01:56.072  INFO 23484 --- [/D://camelInput] route-1                                  : msg4\n\n2023-05-22 11:01:56.083 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000004 on ExchangeId: 23D21B5DF3A3295-0000000000000004). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\n\nMessage History (source location and message history is disabled)\n---------------------------------------------------------------------------------------------------------------------------------------\nSource                                   ID                             Processor                                          Elapsed (ms)\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539741\n    ...\n                                         route-1/process1               ref:postProcessor                                             0\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\n\njava.lang.IllegalThreadStateException: null\n    at java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\n    at com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\n    at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n\n2023-05-22 11:01:56.083  WARN 23484 --- [/D://camelInput] o.a.c.c.file.GenericFileOnCompletion     : Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@4436c7b8 for file: GenericFile[D:\\camelInput\\input.txt]\n2023-05-22 11:01:57.047  INFO 23484 --- [       Thread-3] o.a.c.impl.engine.AbstractCamelContext   : Suspended route-1 (file://D://camelInput)\n\n</code></pre>\n"},{"tags":["java","selenium-webdriver","jenkins","extentreports"],"owner":{"account_id":28555200,"reputation":1,"user_id":21859515,"display_name":"Vishva Nagaria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684735678,"creation_date":1684735678,"question_id":76303412,"body_markdown":"in jenkins when run the freestyle project it show the blank report.\r\n\r\n[enter image description here](https://i.stack.imgur.com/PDVbL.png)\r\n\r\n-- i need all the log which run in my local machine but does not generate in the jenkins. also it generated the html file but it show blank white page. ","title":"Is there a way to retrieve logs not generated in Jenkins for a freestyle project using ExtentReports, Selenium, and Java?","body":"<p>in jenkins when run the freestyle project it show the blank report.</p>\n<p><a href=\"https://i.stack.imgur.com/PDVbL.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>-- i need all the log which run in my local machine but does not generate in the jenkins. also it generated the html file but it show blank white page.</p>\n"},{"tags":["java","rabbitmq","spring-rabbit"],"answers":[{"comments":[{"owner":{"account_id":13256005,"reputation":75,"user_id":9572083,"display_name":"Harry"},"score":0,"creation_date":1525727945,"post_id":50222513,"comment_id":87462659,"body_markdown":"I just added my missing config which starts up my containers upon another event, this way: \n`\n\t\tfor (final MessageListenerContainer listenerContainer : registry.getListenerContainers()) {\n\t\t\tlistenerContainer.start();\n\t\t}","body":"I just added my missing config which starts up my containers upon another event, this way:  ` \t\tfor (final MessageListenerContainer listenerContainer : registry.getListenerContainers()) { \t\t\tlistenerContainer.start(); \t\t}"},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1525728852,"post_id":50222513,"comment_id":87463089,"body_markdown":"Right but that won&#39;t start the `messageListenerContainer` `@Bean` - that one is a bean rather than being created for a `@RabbitListener`. You have to add the post processors to the listener container factory, not that container bean, if you want them applied to annotated listeners. It looks like you might be confusing `DirectMessageListenerContainer` with `DirectRabbitListenerContainerFactory` which is what is used to create one of the former for each listener.","body":"Right but that won&#39;t start the <code>messageListenerContainer</code> <code>@Bean</code> - that one is a bean rather than being created for a <code>@RabbitListener</code>. You have to add the post processors to the listener container factory, not that container bean, if you want them applied to annotated listeners. It looks like you might be confusing <code>DirectMessageListenerContainer</code> with <code>DirectRabbitListenerContainerFactory</code> which is what is used to create one of the former for each listener."},{"owner":{"account_id":13256005,"reputation":75,"user_id":9572083,"display_name":"Harry"},"score":0,"creation_date":1525730622,"post_id":50222513,"comment_id":87463693,"body_markdown":"Fixed.   I am now using the DirectRabbitListenerContainerFactory and have set my post processors on it.  They&#39;re now being used.   Big thanks Gary.","body":"Fixed.   I am now using the DirectRabbitListenerContainerFactory and have set my post processors on it.  They&#39;re now being used.   Big thanks Gary."},{"owner":{"account_id":13256005,"reputation":75,"user_id":9572083,"display_name":"Harry"},"score":0,"creation_date":1525731537,"post_id":50222513,"comment_id":87463977,"body_markdown":"Gary, I got an exception:\n\n`Caused by: java.io.UnsupportedEncodingException: gzip:UTF-8`\n`\tat java.lang.StringCoding.decode(StringCoding.java:190) ~[?:1.8.0_152]`\n`\tat java.lang.String.&lt;init&gt;(String.java:426) ~[?:1.8.0_152]`\n`\tat java.lang.String.&lt;init&gt;(String.java:491) ~[?:1.8.0_152]`\n`\tat org.springframework.amqp.support.converter.Jackson2JsonMessageConverter.convertBytesToObject(Jackson2JsonMessageConverter.java:215)`\n`\tat org.springframework.amqp.support.converter.Jackson2JsonMessageConverter.fromMessage(Jackson2JsonMessageConverter.java:179) `","body":"Gary, I got an exception:  <code>Caused by: java.io.UnsupportedEncodingException: gzip:UTF-8</code> `\tat java.lang.StringCoding.decode(StringCoding.java:190) ~[?:1.8.0_152]` `\tat java.lang.String.&lt;init&gt;(String.java:426) ~[?:1.8.0_152]` `\tat java.lang.String.&lt;init&gt;(String.java:491) ~[?:1.8.0_152]` `\tat org.springframework.amqp.support.converter.Jackson2JsonMessa&zwnj;&#8203;geConverter.convertB&zwnj;&#8203;ytesToObject(Jackson&zwnj;&#8203;2JsonMessageConverte&zwnj;&#8203;r.java:215)` `\tat org.springframework.amqp.support.converter.Jackson2JsonMessa&zwnj;&#8203;geConverter.fromMess&zwnj;&#8203;age(Jackson2JsonMess&zwnj;&#8203;ageConverter.java:17&zwnj;&#8203;9) `"},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1525732355,"post_id":50222513,"comment_id":87464214,"body_markdown":"Don&#39;t put stuff like that in comments; it&#39;s hard to read. I suggest you start a new question, showing your current code/configuration. It sounds like the uncompress MPP is not being applied. The Gzip MPP prefixes the `contentEncoding` message property with `gzip:` and the Unzip MPP strips the prefix off. The fact that the prefix is still there when the JSON converter is called indicates it was not unzipped.","body":"Don&#39;t put stuff like that in comments; it&#39;s hard to read. I suggest you start a new question, showing your current code/configuration. It sounds like the uncompress MPP is not being applied. The Gzip MPP prefixes the <code>contentEncoding</code> message property with <code>gzip:</code> and the Unzip MPP strips the prefix off. The fact that the prefix is still there when the JSON converter is called indicates it was not unzipped."}],"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1525727621,"creation_date":1525727621,"answer_id":50222513,"question_id":50222164,"body_markdown":"It doesn&#39;t work that way, you can&#39;t autowire containers for `@RabbitListener`s; they are not beans; they are created by the container factory and registered in the registry. Instead you have to retrieve them from the registry (by id).\r\n\r\nHowever, since you have `autoStartup` set to false, it shouldn&#39;t be &quot;stealing&quot; messages from your `@RabbitListener`.\r\n\r\nGenerally, DEBUG logging should help.","title":"Compressing and decompressing Spring RabbitMQ messages with a DirectMessageListenerContainer","body":"<p>It doesn't work that way, you can't autowire containers for <code>@RabbitListener</code>s; they are not beans; they are created by the container factory and registered in the registry. Instead you have to retrieve them from the registry (by id).</p>\n\n<p>However, since you have <code>autoStartup</code> set to false, it shouldn't be \"stealing\" messages from your <code>@RabbitListener</code>.</p>\n\n<p>Generally, DEBUG logging should help.</p>\n"},{"tags":[],"owner":{"account_id":3673566,"reputation":2692,"user_id":3060133,"accept_rate":92,"display_name":"Shirishkumar Bari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684735455,"creation_date":1684735455,"answer_id":76303396,"question_id":50222164,"body_markdown":"The official guide explains it at [https://docs.spring.io/spring-amqp/reference/html/#post-processing][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-amqp/reference/html/#post-processing\r\n\r\nBasically there are couple of options i.e. \r\n\r\n 1. Configure Message convertor like below \r\n\r\n        public class CompressionMessageConverter {\r\n        public static MessageConverter messageConverter() {\r\n            final MessageConverter simpleMessageConverter = new SimpleMessageConverter();\r\n            return new MessageConverter() {\r\n                @Override\r\n                public Message toMessage(Object messagePayload, MessageProperties messageProperties)\r\n                        throws MessageConversionException {\r\n                    final Message m = simpleMessageConverter.toMessage(messagePayload, messageProperties);\r\n                    final ByteArrayOutputStream os = new ByteArrayOutputStream();\r\n                    try (GZIPOutputStream gz = new GZIPOutputStream(os)) {\r\n                        gz.write(m.getBody());\r\n                    } catch (IOException e) {\r\n                        throw new MessageConversionException(e.getMessage());\r\n                    }\r\n    \r\n                    return new Message(os.toByteArray(), messageProperties);\r\n                }\r\n    \r\n                @Override\r\n                public Object fromMessage(Message messagePayload) throws MessageConversionException {\r\n                    final ByteArrayOutputStream os = new ByteArrayOutputStream();\r\n                    try (GZIPInputStream is = new GZIPInputStream(new ByteArrayInputStream(messagePayload.getBody()))) {\r\n                        byte[] b = new byte[2048];\r\n                        int r;\r\n                        while ((r = is.read(b)) != -1) {\r\n                            os.write(b, 0, r);\r\n                        }\r\n                    } catch (IOException ioException) {\r\n                        throw new RuntimeException(ioException);\r\n                    }\r\n    \r\n                    return simpleMessageConverter.fromMessage(new Message(os.toByteArray(), messagePayload.getMessageProperties()));\r\n                }\r\n            };\r\n        }\r\n   \r\n  Use it in RabbitTemplate as \r\n\r\n    rabbitTemplate.setMessageConverter(CompressionMessageConverter .messageConverter());\r\n\r\n \r\n2. Use post processors\r\n    \r\n    rabbitTemplate.setBeforePublishPostProcessors(new GZipPostProcessor());\r\n    rabbitTemplate.setAfterReceivePostProcessors(new GUnzipPostProcessor());\r\n\r\n","title":"Compressing and decompressing Spring RabbitMQ messages with a DirectMessageListenerContainer","body":"<p>The official guide explains it at <a href=\"https://docs.spring.io/spring-amqp/reference/html/#post-processing\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-amqp/reference/html/#post-processing</a></p>\n<p>Basically there are couple of options i.e.</p>\n<ol>\n<li><p>Configure Message convertor like below</p>\n<pre><code>public class CompressionMessageConverter {\npublic static MessageConverter messageConverter() {\n    final MessageConverter simpleMessageConverter = new SimpleMessageConverter();\n    return new MessageConverter() {\n        @Override\n        public Message toMessage(Object messagePayload, MessageProperties messageProperties)\n                throws MessageConversionException {\n            final Message m = simpleMessageConverter.toMessage(messagePayload, messageProperties);\n            final ByteArrayOutputStream os = new ByteArrayOutputStream();\n            try (GZIPOutputStream gz = new GZIPOutputStream(os)) {\n                gz.write(m.getBody());\n            } catch (IOException e) {\n                throw new MessageConversionException(e.getMessage());\n            }\n\n            return new Message(os.toByteArray(), messageProperties);\n        }\n\n        @Override\n        public Object fromMessage(Message messagePayload) throws MessageConversionException {\n            final ByteArrayOutputStream os = new ByteArrayOutputStream();\n            try (GZIPInputStream is = new GZIPInputStream(new ByteArrayInputStream(messagePayload.getBody()))) {\n                byte[] b = new byte[2048];\n                int r;\n                while ((r = is.read(b)) != -1) {\n                    os.write(b, 0, r);\n                }\n            } catch (IOException ioException) {\n                throw new RuntimeException(ioException);\n            }\n\n            return simpleMessageConverter.fromMessage(new Message(os.toByteArray(), messagePayload.getMessageProperties()));\n        }\n    };\n}\n</code></pre>\n</li>\n</ol>\n<p>Use it in RabbitTemplate as</p>\n<pre><code>rabbitTemplate.setMessageConverter(CompressionMessageConverter .messageConverter());\n</code></pre>\n<ol start=\"2\">\n<li><p>Use post processors</p>\n<p>rabbitTemplate.setBeforePublishPostProcessors(new GZipPostProcessor());\nrabbitTemplate.setAfterReceivePostProcessors(new GUnzipPostProcessor());</p>\n</li>\n</ol>\n"}],"owner":{"account_id":13256005,"reputation":75,"user_id":9572083,"display_name":"Harry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2415,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":50222513,"answer_count":2,"score":2,"last_activity_date":1684735455,"creation_date":1525725868,"question_id":50222164,"body_markdown":"I have modified my RabbitMQ from a previous post (https://stackoverflow.com/questions/49566278/spring-rabbit-json-deserialization-for-arraylist-contents) to now use a DirectMessageListener with MessagePostProcessors to GZip and GUnzip the message payloads.\r\n\r\nHowever, it doesn&#39;t appear to be working as the breakpoints are not activated, but also because my `RabbitListener`s are no longer receiving messages, whereas they did with a `SimpleMessageFactoryListenerContainer`.\r\nAlso, it appears the SimpleMessageListenerContainer(?) is still being used.  On a side-note, I am autowiring the `DirectMessageListenerContainer` so I can dynamically set the queues I used.\r\n***\r\n***spring-rabbit: 2.0.3.RELEASE.***\r\n***spring-boot:  2.0.1.RELEASE.***\r\n***\r\n\r\n**RabbitMQ configuration:**\r\n\r\n    @Configuration\r\n    @EnableRabbit\r\n    public class MessagingConfiguration implements ShutdownListener {\r\n\t\r\n\t\t@Autowired\r\n\t\tprivate RabbitListenerEndpointRegistry registry;\r\n\t\r\n\t\t@Autowired\r\n\t\tprivate DirectMessageListenerContainer container;\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic DirectMessageListenerContainer messageListenerContainer(final ConnectionFactory connectionFactory) {\r\n\t\t\tfinal DirectMessageListenerContainer listenerContainer = new DirectMessageListenerContainer();\r\n\t\t\tlistenerContainer.setConnectionFactory(connectionFactory);\r\n\t\t\tlistenerContainer.setMessageConverter(jsonConverter()); // i.e.@RabbitListener to use Jackson2JsonMessageConverter\r\n\t\t\tlistenerContainer.setAutoStartup(false);\r\n\t\t\t// container.setErrorHandler(errorHandler);\r\n\t\t\tfinal MessageListenerAdapter messageListener = new MessageListenerAdapter(new Object() {\r\n\t\t\t\t@SuppressWarnings(&quot;unused&quot;)\r\n\t\t\t\tpublic String handleMessage(final String message) {\r\n\t\t\t\t\treturn message.toUpperCase();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tmessageListener.setBeforeSendReplyPostProcessors(new GZipPostProcessor());\r\n\t\t\tlistenerContainer.setMessageListener(messageListener);\r\n\t\t\tlistenerContainer.setAfterReceivePostProcessors(new GUnzipPostProcessor());\r\n\t\t\treturn listenerContainer;\r\n\t\t}\r\n\r\n\t\t@EventListener(ApplicationDatabaseReadyEvent.class)\r\n\t\tpublic void onApplicationDatabaseReadyEvent() {\r\n\t\t\tlog.info(&quot;Starting all RabbitMQ Listeners...&quot;); //$NON-NLS-1$\r\n\t\t\tfor (final MessageListenerContainer listenerContainer : registry.getListenerContainers()) {\r\n\t\t\t\tlistenerContainer.start();\r\n\t\t\t}\r\n\t\t\tlog.info(&quot;Register is running: {}&quot;, registry.isRunning()); //$NON-NLS-1$\r\n\t\t\tlog.info(&quot;Started all RabbitMQ Listeners.&quot;); //$NON-NLS-1$\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic List&lt;Declarable&gt; bindings() {\r\n\t\tfinal List&lt;Declarable&gt; declarations = new ArrayList&lt;&gt;();\r\n\t\t\tfinal FanoutExchange exchange = new FanoutExchange(&quot;fx&quot;, true, false);\r\n\t\t\tfinal Queue queue = QueueBuilder.durable(&quot;orders&quot;).build();\r\n\t\t\tdeclarations.add(exchange);\r\n\t\t\tdeclarations.add(queue);\r\n\t\t\tdeclarations.add(BindingBuilder.bind(queue).to(exchange));\r\n\t\t    List&lt;String&gt; q = new ArrayList&lt;&gt;();\r\n\t\t    q.add(queue.getName());\r\n\t\tcontainer.addQueueNames(q.toArray(new String[queues.size()]));\r\n\r\n\t\t\treturn declarations;\r\n\t\t}\r\n\t\r\n\t\t@Bean\r\n\t\tpublic Jackson2JsonMessageConverter jsonConverter() {\r\n\t\t\tfinal Jackson2JsonMessageConverter converter = new Jackson2JsonMessageConverter();\r\n\t\t\tconverter.setClassMapper(classMapper());\r\n\t\t\treturn converter;\r\n\t\t}\r\n\r\n\t\tprivate static DefaultJackson2JavaTypeMapper classMapper() {\r\n\t\t\tfinal DefaultJackson2JavaTypeMapper classMapper = new DefaultJackson2JavaTypeMapper();\r\n\t\t\tclassMapper.setTrustedPackages(&quot;*&quot;); //$NON-NLS-1$  //TODO add trusted packages\r\n\t\t\treturn classMapper;\r\n\t\t}\r\n\r\n\t\t@ConditionalOnProperty(name = &quot;consumer&quot;, havingValue = &quot;true&quot;)\r\n\t\t@Bean\r\n\t\tpublic ConsumerListener listenerConsumer() {\r\n\t\t\treturn new ConsumerListener();\r\n\t\t}\r\n\t\r\n\t\t@ConditionalOnProperty(name = &quot;producer&quot;, havingValue = &quot;true&quot;)\r\n\t\t@Bean\r\n\t\tpublic ProducerListener listenerProducer() {\r\n\t\t\treturn new ProducerListener();\r\n\t\t}\r\n\t\r\n\t\t@Bean\r\n\t\tpublic RabbitAdmin rabbitAdmin(final CachingConnectionFactory connectionFactory) {\r\n\t\t\treturn new RabbitAdmin(connectionFactory);\r\n\t\t}\r\n\t\r\n\t\t@Bean\r\n\t\tpublic RabbitTemplate rabbitTemplate(final ConnectionFactory connectionFactory) {\r\n\t\t\tfinal RabbitTemplate rabbitTemplate = new RabbitTemplate(connectionFactory);\r\n\t\t\trabbitTemplate.setMessageConverter(jsonConverter()); // convert all sent messages to JSON\r\n\t\t\trabbitTemplate.setReplyTimeout(TimeUnit.SECONDS.toMillis(3));\r\n\t\t\trabbitTemplate.setReceiveTimeout(TimeUnit.SECONDS.toMillis(3));\r\n\t\t\treturn rabbitTemplate;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void shutdownCompleted(final ShutdownSignalException arg0) {\r\n\t\t}\r\n\t}\r\n\r\n","title":"Compressing and decompressing Spring RabbitMQ messages with a DirectMessageListenerContainer","body":"<p>I have modified my RabbitMQ from a previous post (<a href=\"https://stackoverflow.com/questions/49566278/spring-rabbit-json-deserialization-for-arraylist-contents\">spring-rabbit JSON deserialization for ArrayList contents</a>) to now use a DirectMessageListener with MessagePostProcessors to GZip and GUnzip the message payloads.</p>\n\n<p>However, it doesn't appear to be working as the breakpoints are not activated, but also because my <code>RabbitListener</code>s are no longer receiving messages, whereas they did with a <code>SimpleMessageFactoryListenerContainer</code>.\nAlso, it appears the SimpleMessageListenerContainer(?) is still being used.  On a side-note, I am autowiring the <code>DirectMessageListenerContainer</code> so I can dynamically set the queues I used.</p>\n\n<hr>\n\n<p><strong><em>spring-rabbit: 2.0.3.RELEASE.</em></strong>\n<strong><em>spring-boot:  2.0.1.RELEASE.</em></strong></p>\n\n<hr>\n\n<p><strong>RabbitMQ configuration:</strong></p>\n\n<pre><code>@Configuration\n@EnableRabbit\npublic class MessagingConfiguration implements ShutdownListener {\n\n    @Autowired\n    private RabbitListenerEndpointRegistry registry;\n\n    @Autowired\n    private DirectMessageListenerContainer container;\n\n    @Bean\n    public DirectMessageListenerContainer messageListenerContainer(final ConnectionFactory connectionFactory) {\n        final DirectMessageListenerContainer listenerContainer = new DirectMessageListenerContainer();\n        listenerContainer.setConnectionFactory(connectionFactory);\n        listenerContainer.setMessageConverter(jsonConverter()); // i.e.@RabbitListener to use Jackson2JsonMessageConverter\n        listenerContainer.setAutoStartup(false);\n        // container.setErrorHandler(errorHandler);\n        final MessageListenerAdapter messageListener = new MessageListenerAdapter(new Object() {\n            @SuppressWarnings(\"unused\")\n            public String handleMessage(final String message) {\n                return message.toUpperCase();\n            }\n        });\n        messageListener.setBeforeSendReplyPostProcessors(new GZipPostProcessor());\n        listenerContainer.setMessageListener(messageListener);\n        listenerContainer.setAfterReceivePostProcessors(new GUnzipPostProcessor());\n        return listenerContainer;\n    }\n\n    @EventListener(ApplicationDatabaseReadyEvent.class)\n    public void onApplicationDatabaseReadyEvent() {\n        log.info(\"Starting all RabbitMQ Listeners...\"); //$NON-NLS-1$\n        for (final MessageListenerContainer listenerContainer : registry.getListenerContainers()) {\n            listenerContainer.start();\n        }\n        log.info(\"Register is running: {}\", registry.isRunning()); //$NON-NLS-1$\n        log.info(\"Started all RabbitMQ Listeners.\"); //$NON-NLS-1$\n    }\n\n    @Bean\n    public List&lt;Declarable&gt; bindings() {\n    final List&lt;Declarable&gt; declarations = new ArrayList&lt;&gt;();\n        final FanoutExchange exchange = new FanoutExchange(\"fx\", true, false);\n        final Queue queue = QueueBuilder.durable(\"orders\").build();\n        declarations.add(exchange);\n        declarations.add(queue);\n        declarations.add(BindingBuilder.bind(queue).to(exchange));\n        List&lt;String&gt; q = new ArrayList&lt;&gt;();\n        q.add(queue.getName());\n    container.addQueueNames(q.toArray(new String[queues.size()]));\n\n        return declarations;\n    }\n\n    @Bean\n    public Jackson2JsonMessageConverter jsonConverter() {\n        final Jackson2JsonMessageConverter converter = new Jackson2JsonMessageConverter();\n        converter.setClassMapper(classMapper());\n        return converter;\n    }\n\n    private static DefaultJackson2JavaTypeMapper classMapper() {\n        final DefaultJackson2JavaTypeMapper classMapper = new DefaultJackson2JavaTypeMapper();\n        classMapper.setTrustedPackages(\"*\"); //$NON-NLS-1$  //TODO add trusted packages\n        return classMapper;\n    }\n\n    @ConditionalOnProperty(name = \"consumer\", havingValue = \"true\")\n    @Bean\n    public ConsumerListener listenerConsumer() {\n        return new ConsumerListener();\n    }\n\n    @ConditionalOnProperty(name = \"producer\", havingValue = \"true\")\n    @Bean\n    public ProducerListener listenerProducer() {\n        return new ProducerListener();\n    }\n\n    @Bean\n    public RabbitAdmin rabbitAdmin(final CachingConnectionFactory connectionFactory) {\n        return new RabbitAdmin(connectionFactory);\n    }\n\n    @Bean\n    public RabbitTemplate rabbitTemplate(final ConnectionFactory connectionFactory) {\n        final RabbitTemplate rabbitTemplate = new RabbitTemplate(connectionFactory);\n        rabbitTemplate.setMessageConverter(jsonConverter()); // convert all sent messages to JSON\n        rabbitTemplate.setReplyTimeout(TimeUnit.SECONDS.toMillis(3));\n        rabbitTemplate.setReceiveTimeout(TimeUnit.SECONDS.toMillis(3));\n        return rabbitTemplate;\n    }\n\n    @Override\n    public void shutdownCompleted(final ShutdownSignalException arg0) {\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","jackson"],"answers":[{"tags":[],"owner":{"account_id":10637559,"reputation":2455,"user_id":7833793,"display_name":"R4N"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684535524,"creation_date":1684535524,"answer_id":76292768,"question_id":76292553,"body_markdown":"You&#39;re attempting to map a json object to a json array (the json sample you provided starts and ends with curly braces `{}`)\r\n\r\nIf you&#39;re controlling the json, you should be able to switch the format to something like this if you want to map it directly to a json array of EstatePropertyCreatorDto&#39;s:\r\n\r\n```\r\n[\r\n        {\r\n            &quot;id&quot;: &quot;8bd050b0-6578-443a-8e22-bf48318734ce&quot;,\r\n            &quot;title&quot;: &quot;test title&quot;,\r\n            &quot;type&quot;: &quot;APARTMENT&quot;,\r\n            &quot;floor&quot;: &quot;5&quot;,\r\n            &quot;details&quot;: &quot;This details should be aware of!&quot;\r\n        },\r\n        {\r\n            &quot;id&quot;: &quot;69786c5f-e35a-476d-82de-1d5833a12818&quot;,\r\n            &quot;title&quot;: &quot;test title for 2nd&quot;,\r\n            &quot;type&quot;: &quot;GARAGE&quot;,\r\n            &quot;alias&quot;: &quot;jamie garage&quot;,\r\n            &quot;floor&quot;: &quot;1&quot;,\r\n            &quot;details&quot;: &quot;Details for Jamie Garage&quot;\r\n        },\r\n        {\r\n            &quot;id&quot;: &quot;c935f330-eebe-4d35-818d-d2248fc8ca9e&quot;,\r\n            &quot;title&quot;: &quot;test title for 3rd&quot;,\r\n            &quot;type&quot;: &quot;OFFICE&quot;,\r\n            &quot;floor&quot;: &quot;2&quot;,\r\n            &quot;details&quot;: &quot;Details for Jamie office&quot;,\r\n            &quot;commonParts&quot;: &quot;Office common parts&quot;\r\n        }\r\n    ]\r\n```\r\n\r\nIn which case it should be able to be mapped to the straight json array\r\n\r\n\r\nIf you&#39;re not controlling the json, you&#39;ll need an additional wrapper class along these lines:\r\n\r\n```\r\npublic class MappedObject {\r\n\r\n    public MappedObject() {\r\n    }\r\n\r\n    List&lt;EstatePropertyCreatorDto&gt; estateProperties;\r\n\r\n    public List&lt;EstatePropertyCreatorDto&gt; getEstateProperties() {\r\n        return estateProperties;\r\n    }\r\n\r\n    public void setEstateProperties(List&lt;EstatePropertyCreatorDto&gt; estateProperties) {\r\n        this.estateProperties = estateProperties;\r\n    }\r\n}\r\n```\r\n\r\nwhich should allow the json object to be properly mapped and the list be filled/mapped with the estateProperties jsonArray","title":"JSON Parse Error com.fasterxml.jackson.databind.exc.MismatchedInputException","body":"<p>You're attempting to map a json object to a json array (the json sample you provided starts and ends with curly braces <code>{}</code>)</p>\n<p>If you're controlling the json, you should be able to switch the format to something like this if you want to map it directly to a json array of EstatePropertyCreatorDto's:</p>\n<pre><code>[\n        {\n            &quot;id&quot;: &quot;8bd050b0-6578-443a-8e22-bf48318734ce&quot;,\n            &quot;title&quot;: &quot;test title&quot;,\n            &quot;type&quot;: &quot;APARTMENT&quot;,\n            &quot;floor&quot;: &quot;5&quot;,\n            &quot;details&quot;: &quot;This details should be aware of!&quot;\n        },\n        {\n            &quot;id&quot;: &quot;69786c5f-e35a-476d-82de-1d5833a12818&quot;,\n            &quot;title&quot;: &quot;test title for 2nd&quot;,\n            &quot;type&quot;: &quot;GARAGE&quot;,\n            &quot;alias&quot;: &quot;jamie garage&quot;,\n            &quot;floor&quot;: &quot;1&quot;,\n            &quot;details&quot;: &quot;Details for Jamie Garage&quot;\n        },\n        {\n            &quot;id&quot;: &quot;c935f330-eebe-4d35-818d-d2248fc8ca9e&quot;,\n            &quot;title&quot;: &quot;test title for 3rd&quot;,\n            &quot;type&quot;: &quot;OFFICE&quot;,\n            &quot;floor&quot;: &quot;2&quot;,\n            &quot;details&quot;: &quot;Details for Jamie office&quot;,\n            &quot;commonParts&quot;: &quot;Office common parts&quot;\n        }\n    ]\n</code></pre>\n<p>In which case it should be able to be mapped to the straight json array</p>\n<p>If you're not controlling the json, you'll need an additional wrapper class along these lines:</p>\n<pre><code>public class MappedObject {\n\n    public MappedObject() {\n    }\n\n    List&lt;EstatePropertyCreatorDto&gt; estateProperties;\n\n    public List&lt;EstatePropertyCreatorDto&gt; getEstateProperties() {\n        return estateProperties;\n    }\n\n    public void setEstateProperties(List&lt;EstatePropertyCreatorDto&gt; estateProperties) {\n        this.estateProperties = estateProperties;\n    }\n}\n</code></pre>\n<p>which should allow the json object to be properly mapped and the list be filled/mapped with the estateProperties jsonArray</p>\n"}],"owner":{"account_id":19763397,"reputation":13,"user_id":14471993,"display_name":"martoiliev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76292768,"answer_count":1,"score":1,"last_activity_date":1684732995,"creation_date":1684532278,"question_id":76292553,"body_markdown":"POST Request with `@RequestBody` of `List&lt;T&gt;` -&gt; then I am getting the Json Parse Error Cannot deserialize value of type `java.util.ArrayList&lt;&quot;my path to the DTO class&quot;&gt;` from Object value `(token JsonToken.START_OBJECT); `\r\n\r\nnested exception is \r\n\r\n&gt; com.fasterxml.jackson.databind.exc.MismatchedInputException\r\n\r\n\r\nHere is my DTO \r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@ToString\r\npublic class EstatePropertyCreatorDto {\r\n\r\n    private UUID id;\r\n    private String title;\r\n    @NotNull private PropertyTypes type;\r\n    @Null private String alias;\r\n    @NotNull private String floor;\r\n    @NotNull private String details;\r\n    @Null private String commonParts;\r\n}\r\n```\r\n\r\nAnd Here is my controller method: \r\n```\r\n\r\n    @PostMapping(&quot;/{buildingId}/properties&quot;)\r\n    public List&lt;EstatePropertyCreatorDto&gt; addPropertiesToBuilding(@PathVariable UUID buildingId, @RequestBody List&lt;EstatePropertyCreatorDto&gt; estateProperties) {\r\n        buildingService.addPropertiesToBuilding(buildingId, estateProperties);\r\n\r\n        return List.of(&quot;Once I reach the method I will implement the return&quot;);\r\n    }\r\n```\r\n\r\nAnd here is my post request body: \r\n\r\n```\r\n  {\r\n    &quot;estateProperties&quot;: [\r\n        {\r\n            &quot;id&quot;: &quot;8bd050b0-6578-443a-8e22-bf48318734ce&quot;,\r\n            &quot;title&quot;: &quot;test title&quot;,\r\n            &quot;type&quot;: &quot;APARTMENT&quot;,\r\n            &quot;floor&quot;: &quot;5&quot;,\r\n            &quot;details&quot;: &quot;This details should be aware of!&quot;\r\n        },\r\n        {\r\n            &quot;id&quot;: &quot;69786c5f-e35a-476d-82de-1d5833a12818&quot;,\r\n            &quot;title&quot;: &quot;test title for 2nd&quot;,\r\n            &quot;type&quot;: &quot;GARAGE&quot;,\r\n            &quot;alias&quot;: &quot;jamie garage&quot;,\r\n            &quot;floor&quot;: &quot;1&quot;,\r\n            &quot;details&quot;: &quot;Details for Jamie Garage&quot;\r\n        },\r\n        {\r\n            &quot;id&quot;: &quot;c935f330-eebe-4d35-818d-d2248fc8ca9e&quot;,\r\n            &quot;title&quot;: &quot;test title for 3rd&quot;,\r\n            &quot;type&quot;: &quot;OFFICE&quot;,\r\n            &quot;floor&quot;: &quot;2&quot;,\r\n            &quot;details&quot;: &quot;Details for Jamie office&quot;,\r\n            &quot;commonParts&quot;: &quot;Office common parts&quot;\r\n        }\r\n    ]\r\n  }\r\n```\r\n\r\nThen I am getting the following error: \r\n\r\n```\r\nCannot deserialize value of type `java.util.ArrayList&lt;&gt; from Object value (token `JsonToken.START_OBJECT`); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException\r\n```","title":"JSON Parse Error com.fasterxml.jackson.databind.exc.MismatchedInputException","body":"<p>POST Request with <code>@RequestBody</code> of <code>List&lt;T&gt;</code> -&gt; then I am getting the Json Parse Error Cannot deserialize value of type <code>java.util.ArrayList&lt;&quot;my path to the DTO class&quot;&gt;</code> from Object value <code>(token JsonToken.START_OBJECT); </code></p>\n<p>nested exception is</p>\n<blockquote>\n<p>com.fasterxml.jackson.databind.exc.MismatchedInputException</p>\n</blockquote>\n<p>Here is my DTO</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@ToString\npublic class EstatePropertyCreatorDto {\n\n    private UUID id;\n    private String title;\n    @NotNull private PropertyTypes type;\n    @Null private String alias;\n    @NotNull private String floor;\n    @NotNull private String details;\n    @Null private String commonParts;\n}\n</code></pre>\n<p>And Here is my controller method:</p>\n<pre><code>\n    @PostMapping(&quot;/{buildingId}/properties&quot;)\n    public List&lt;EstatePropertyCreatorDto&gt; addPropertiesToBuilding(@PathVariable UUID buildingId, @RequestBody List&lt;EstatePropertyCreatorDto&gt; estateProperties) {\n        buildingService.addPropertiesToBuilding(buildingId, estateProperties);\n\n        return List.of(&quot;Once I reach the method I will implement the return&quot;);\n    }\n</code></pre>\n<p>And here is my post request body:</p>\n<pre><code>  {\n    &quot;estateProperties&quot;: [\n        {\n            &quot;id&quot;: &quot;8bd050b0-6578-443a-8e22-bf48318734ce&quot;,\n            &quot;title&quot;: &quot;test title&quot;,\n            &quot;type&quot;: &quot;APARTMENT&quot;,\n            &quot;floor&quot;: &quot;5&quot;,\n            &quot;details&quot;: &quot;This details should be aware of!&quot;\n        },\n        {\n            &quot;id&quot;: &quot;69786c5f-e35a-476d-82de-1d5833a12818&quot;,\n            &quot;title&quot;: &quot;test title for 2nd&quot;,\n            &quot;type&quot;: &quot;GARAGE&quot;,\n            &quot;alias&quot;: &quot;jamie garage&quot;,\n            &quot;floor&quot;: &quot;1&quot;,\n            &quot;details&quot;: &quot;Details for Jamie Garage&quot;\n        },\n        {\n            &quot;id&quot;: &quot;c935f330-eebe-4d35-818d-d2248fc8ca9e&quot;,\n            &quot;title&quot;: &quot;test title for 3rd&quot;,\n            &quot;type&quot;: &quot;OFFICE&quot;,\n            &quot;floor&quot;: &quot;2&quot;,\n            &quot;details&quot;: &quot;Details for Jamie office&quot;,\n            &quot;commonParts&quot;: &quot;Office common parts&quot;\n        }\n    ]\n  }\n</code></pre>\n<p>Then I am getting the following error:</p>\n<pre><code>Cannot deserialize value of type `java.util.ArrayList&lt;&gt; from Object value (token `JsonToken.START_OBJECT`); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1684732539,"post_id":76303173,"comment_id":134554161,"body_markdown":"Here is a similar question I answered, the links to tutorials might be helpful https://stackoverflow.com/a/76110117/217324. I&#39;m not a fan of the code posted here, using ID for equals is not the best idea and the ID generation is normally done with annotations on the entities, you don&#39;t use a repository for it. My preference would be not to use the abstract classes.","body":"Here is a similar question I answered, the links to tutorials might be helpful <a href=\"https://stackoverflow.com/a/76110117/217324\">stackoverflow.com/a/76110117/217324</a>. I&#39;m not a fan of the code posted here, using ID for equals is not the best idea and the ID generation is normally done with annotations on the entities, you don&#39;t use a repository for it. My preference would be not to use the abstract classes."},{"owner":{"account_id":23254441,"reputation":49,"user_id":17341714,"display_name":"user17341714"},"score":0,"creation_date":1684732708,"post_id":76303173,"comment_id":134554181,"body_markdown":"Hey ty for your response. But im still not understanding it :(","body":"Hey ty for your response. But im still not understanding it :("},{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":1,"creation_date":1684732851,"post_id":76303173,"comment_id":134554194,"body_markdown":"If this code is a representative sample of what the book is like, you need to find a better book.","body":"If this code is a representative sample of what the book is like, you need to find a better book."},{"owner":{"account_id":23254441,"reputation":49,"user_id":17341714,"display_name":"user17341714"},"score":0,"creation_date":1684733139,"post_id":76303173,"comment_id":134554223,"body_markdown":"can you care to explain?","body":"can you care to explain?"},{"owner":{"account_id":13838923,"reputation":115,"user_id":9989781,"display_name":"Mirza Prangon"},"score":0,"creation_date":1684733242,"post_id":76303173,"comment_id":134554232,"body_markdown":"Are you looking for `@jakarta.persistence.Id` and \n`@jakarta.persistence.GeneratedValue(strategy=jakarta.persistence.GenerationType.AUTO)` annotations? The column in the DB will also need to be configured to auto generate like so `id   INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY`. You can find more [here](https://www.baeldung.com/jpa-get-auto-generated-id).","body":"Are you looking for <code>@jakarta.persistence.Id</code> and  <code>@jakarta.persistence.GeneratedValue(strategy=jakarta.persist&zwnj;&#8203;ence.GenerationType.&zwnj;&#8203;AUTO)</code> annotations? The column in the DB will also need to be configured to auto generate like so <code>id   INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY</code>. You can find more <a href=\"https://www.baeldung.com/jpa-get-auto-generated-id\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":23254441,"reputation":49,"user_id":17341714,"display_name":"user17341714"},"score":0,"creation_date":1684733634,"post_id":76303173,"comment_id":134554263,"body_markdown":"@MirzaPrangon the book seemed to miss out on the implementation of generator.getNextUniqueId(). Idts its mentioned anywhere to annotate the id column. Im asking help for the implementation of the getNextUniqueId() method","body":"@MirzaPrangon the book seemed to miss out on the implementation of generator.getNextUniqueId(). Idts its mentioned anywhere to annotate the id column. Im asking help for the implementation of the getNextUniqueId() method"}],"owner":{"account_id":23254441,"reputation":49,"user_id":17341714,"display_name":"user17341714"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":435,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684732113,"creation_date":1684732113,"question_id":76303173,"body_markdown":"I am working on a CRUD application by referring to Practical Guide to Building API backend with Spring Boot by Wim Deblauwe. I&#39;m stuck in the part where they are telling to implement an unique id generator whenever we create an instance of the entity class to save to the database. Could someone please help with the implementation part of the id generator as I tried but failed miserably.\r\n\r\n```\r\nAbstractEntityId.java\r\npackage com.example.orm.jpa;\r\nimport com.example.util.ArtifactForFramework;\r\nimport javax.persistence.MappedSuperclass;\r\nimport java.io.Serializable;\r\nimport java.util.Objects;\r\nimport static com.google.common.base.MoreObjects.toStringHelper;\r\n@MappedSuperclass\r\npublic abstract class AbstractEntityId&lt;T extends Serializable&gt; implements Serializable,\r\nEntityId&lt;T&gt; {\r\n  private T id;\r\n  @ArtifactForFramework\r\n  protected AbstractEntityId() {\r\n  }\r\n  protected AbstractEntityId(T id) {\r\n  this.id = Objects.requireNonNull(id);\r\n  }\r\n  @Override\r\n\r\n  public T getId() {\r\n  return id;\r\n  }\r\n  @Override\r\n  public String asString() {\r\n  return id.toString();\r\n  }\r\n  @Override\r\n  public boolean equals(Object o) {\r\n  boolean result = false;\r\n  if (this == o) {\r\n  result = true;\r\n  } else if (o instanceof AbstractEntityId) {\r\n  AbstractEntityId other = (AbstractEntityId) o;\r\n  result = Objects.equals(id, other.id);\r\n  }\r\n  return result;\r\n  }\r\n  @Override\r\n  public int hashCode() {\r\n  return Objects.hash(id);\r\n  }\r\n  @Override\r\n  public String toString() {\r\n  return toStringHelper(this)\r\n  .add(&quot;id&quot;, id)\r\n  .toString();\r\n  }\r\n}\r\n```\r\n```\r\nAbstractEntity.java\r\n\r\npackage com.example.orm.jpa;\r\nimport com.example.util.ArtifactForFramework;\r\nimport javax.persistence.EmbeddedId;\r\nimport javax.persistence.MappedSuperclass;\r\nimport java.util.Objects;\r\nimport static com.google.common.base.MoreObjects.toStringHelper;\r\nimport static com.google.common.base.Preconditions.checkNotNull;\r\n/**\r\n * Abstract super class for entities. We are assuming that early primary key\r\n * generation will be used.\r\n *\r\n\r\n * @param &lt;T&gt; the type of {@link EntityId} that will be used for this entity\r\n */\r\n@MappedSuperclass\r\npublic abstract class AbstractEntity&lt;T extends EntityId&gt; implements Entity&lt;T&gt; {\r\n  @EmbeddedId\r\n  private T id;\r\n  @ArtifactForFramework\r\n  protected AbstractEntity() {\r\n  }\r\n  public AbstractEntity(T id) {\r\n  this.id = checkNotNull(id);\r\n  }\r\n  @Override\r\n  public T getId() {\r\n  return id;\r\n  }\r\n  @Override\r\n  public boolean equals(Object obj) {\r\n  boolean result = false;\r\n  if (this == obj) {\r\n  result = true;\r\n  } else if (obj instanceof AbstractEntity) {\r\n  AbstractEntity other = (AbstractEntity) obj;\r\n  result = Objects.equals(id, other.id);\r\n  }\r\n  return result;\r\n  }\r\n  @Override\r\n  public int hashCode() {\r\n  return Objects.hash(id);\r\n  }\r\n  @Override\r\n  public String toString() {\r\n  return toStringHelper(this)\r\n  .add(&quot;id&quot;, id)\r\n  .toString();\r\n\r\n  }\r\n}\r\n```\r\n\r\n```\r\nEntityId.java\r\npackage com.example.orm.jpa;\r\nimport java.io.Serializable;\r\n/**\r\n * Interface for primary keys of entities.\r\n *\r\n * @param &lt;T&gt; the underlying type of the entity id\r\n */\r\npublic interface EntityId&lt;T&gt; extends Serializable {\r\n  T getId();\r\n  String asString(); ①\r\n}\r\n```\r\n\r\n```\r\npackage com.example.copsboot.user;\r\npublic interface UserRepositoryCustom {\r\n  UserId nextId();\r\n}\r\n```\r\n```\r\npublic interface UserRepository extends CrudRepository&lt;User, UUID&gt;, UserRepositoryCustom\r\n{\r\n}\r\n```\r\n```\r\npackage com.example.copsboot.user;\r\nimport com.example.orm.jpa.UniqueIdGenerator;\r\nimport java.util.UUID;\r\npublic class UserRepositoryImpl implements UserRepositoryCustom {\r\n  private final UniqueIdGenerator&lt;UUID&gt; generator;\r\n  public UserRepositoryImpl(UniqueIdGenerator&lt;UUID&gt; generator) {\r\n  this.generator = generator;\r\n  }\r\n  @Override\r\n  public UserId nextId() {\r\n  return new UserId(generator.getNextUniqueId());\r\n  }\r\n}\r\n```\r\n\r\nThe last section of code is where they are asking for the generation(generator.getNextUniqueId()). All the above codes are for context. It could be really helpful if someone also explained why they are implementing these abstract entity classes for id generation. \r\n\r\nThanks in advance\r\n","title":"Dont know how to create an Unique Id Generator [Spring Boot]","body":"<p>I am working on a CRUD application by referring to Practical Guide to Building API backend with Spring Boot by Wim Deblauwe. I'm stuck in the part where they are telling to implement an unique id generator whenever we create an instance of the entity class to save to the database. Could someone please help with the implementation part of the id generator as I tried but failed miserably.</p>\n<pre><code>AbstractEntityId.java\npackage com.example.orm.jpa;\nimport com.example.util.ArtifactForFramework;\nimport javax.persistence.MappedSuperclass;\nimport java.io.Serializable;\nimport java.util.Objects;\nimport static com.google.common.base.MoreObjects.toStringHelper;\n@MappedSuperclass\npublic abstract class AbstractEntityId&lt;T extends Serializable&gt; implements Serializable,\nEntityId&lt;T&gt; {\n  private T id;\n  @ArtifactForFramework\n  protected AbstractEntityId() {\n  }\n  protected AbstractEntityId(T id) {\n  this.id = Objects.requireNonNull(id);\n  }\n  @Override\n\n  public T getId() {\n  return id;\n  }\n  @Override\n  public String asString() {\n  return id.toString();\n  }\n  @Override\n  public boolean equals(Object o) {\n  boolean result = false;\n  if (this == o) {\n  result = true;\n  } else if (o instanceof AbstractEntityId) {\n  AbstractEntityId other = (AbstractEntityId) o;\n  result = Objects.equals(id, other.id);\n  }\n  return result;\n  }\n  @Override\n  public int hashCode() {\n  return Objects.hash(id);\n  }\n  @Override\n  public String toString() {\n  return toStringHelper(this)\n  .add(&quot;id&quot;, id)\n  .toString();\n  }\n}\n</code></pre>\n<pre><code>AbstractEntity.java\n\npackage com.example.orm.jpa;\nimport com.example.util.ArtifactForFramework;\nimport javax.persistence.EmbeddedId;\nimport javax.persistence.MappedSuperclass;\nimport java.util.Objects;\nimport static com.google.common.base.MoreObjects.toStringHelper;\nimport static com.google.common.base.Preconditions.checkNotNull;\n/**\n * Abstract super class for entities. We are assuming that early primary key\n * generation will be used.\n *\n\n * @param &lt;T&gt; the type of {@link EntityId} that will be used for this entity\n */\n@MappedSuperclass\npublic abstract class AbstractEntity&lt;T extends EntityId&gt; implements Entity&lt;T&gt; {\n  @EmbeddedId\n  private T id;\n  @ArtifactForFramework\n  protected AbstractEntity() {\n  }\n  public AbstractEntity(T id) {\n  this.id = checkNotNull(id);\n  }\n  @Override\n  public T getId() {\n  return id;\n  }\n  @Override\n  public boolean equals(Object obj) {\n  boolean result = false;\n  if (this == obj) {\n  result = true;\n  } else if (obj instanceof AbstractEntity) {\n  AbstractEntity other = (AbstractEntity) obj;\n  result = Objects.equals(id, other.id);\n  }\n  return result;\n  }\n  @Override\n  public int hashCode() {\n  return Objects.hash(id);\n  }\n  @Override\n  public String toString() {\n  return toStringHelper(this)\n  .add(&quot;id&quot;, id)\n  .toString();\n\n  }\n}\n</code></pre>\n<pre><code>EntityId.java\npackage com.example.orm.jpa;\nimport java.io.Serializable;\n/**\n * Interface for primary keys of entities.\n *\n * @param &lt;T&gt; the underlying type of the entity id\n */\npublic interface EntityId&lt;T&gt; extends Serializable {\n  T getId();\n  String asString(); ①\n}\n</code></pre>\n<pre><code>package com.example.copsboot.user;\npublic interface UserRepositoryCustom {\n  UserId nextId();\n}\n</code></pre>\n<pre><code>public interface UserRepository extends CrudRepository&lt;User, UUID&gt;, UserRepositoryCustom\n{\n}\n</code></pre>\n<pre><code>package com.example.copsboot.user;\nimport com.example.orm.jpa.UniqueIdGenerator;\nimport java.util.UUID;\npublic class UserRepositoryImpl implements UserRepositoryCustom {\n  private final UniqueIdGenerator&lt;UUID&gt; generator;\n  public UserRepositoryImpl(UniqueIdGenerator&lt;UUID&gt; generator) {\n  this.generator = generator;\n  }\n  @Override\n  public UserId nextId() {\n  return new UserId(generator.getNextUniqueId());\n  }\n}\n</code></pre>\n<p>The last section of code is where they are asking for the generation(generator.getNextUniqueId()). All the above codes are for context. It could be really helpful if someone also explained why they are implementing these abstract entity classes for id generation.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684386356,"post_id":76277691,"comment_id":134511420,"body_markdown":"Can you provide the code for the `Person` class?  Or, at least an outline.","body":"Can you provide the code for the <code>Person</code> class?  Or, at least an outline."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1684389603,"post_id":76277691,"comment_id":134511760,"body_markdown":"it would be better to not rely on Exceptions to check for `null`... this can eventually hide some errors, like something else being `null` (e.g. `a` or `b`)","body":"it would be better to not rely on Exceptions to check for <code>null</code>... this can eventually hide some errors, like something else being <code>null</code> (e.g. <code>a</code> or <code>b</code>)"}],"answers":[{"comments":[{"owner":{"account_id":22913397,"reputation":19,"user_id":17050343,"display_name":"manyProblem"},"score":0,"creation_date":1684383974,"post_id":76277712,"comment_id":134511221,"body_markdown":"I have tried this, but then it will get &quot;The target type of this expression must be a functional interface&quot; error","body":"I have tried this, but then it will get &quot;The target type of this expression must be a functional interface&quot; error"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1684384169,"post_id":76277712,"comment_id":134511240,"body_markdown":"I just tested it, and it worked for me. Can you try copy and pasting my code exactly as is over your equivalent methods? And when it fails, show me the exact lines of code. You can edit your original question with the exact lines of code, then ping me here to let me know that you did so.","body":"I just tested it, and it worked for me. Can you try copy and pasting my code exactly as is over your equivalent methods? And when it fails, show me the exact lines of code. You can edit your original question with the exact lines of code, then ping me here to let me know that you did so."},{"owner":{"account_id":22913397,"reputation":19,"user_id":17050343,"display_name":"manyProblem"},"score":1,"creation_date":1684384643,"post_id":76277712,"comment_id":134511282,"body_markdown":"Thank you. I just change the order of the parameters from  &#39;&#39;&#39;String message, RunnableExc r&#39;&#39;&#39; to &#39;&#39;&#39;RunnableExc r, String message&#39;&#39;&#39; and it works now!","body":"Thank you. I just change the order of the parameters from  &#39;&#39;&#39;String message, RunnableExc r&#39;&#39;&#39; to &#39;&#39;&#39;RunnableExc r, String message&#39;&#39;&#39; and it works now!"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1684384672,"post_id":76277712,"comment_id":134511287,"body_markdown":"Glad to hear it. Let me know if any other issues come up","body":"Glad to hear it. Let me know if any other issues come up"}],"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684383720,"creation_date":1684383720,"answer_id":76277712,"question_id":76277691,"body_markdown":"You could pass in a `String` as well. This is common practice for some of the precondition tools in Java. Take a look at [`Objects#requireNonNull(T)`][1] vs [`Objects#requireNonNull(T,String)`][2].\r\n\r\nSo, like this.\r\n\r\n```java\r\n    private static void ignoringExc(RunnableExc r, String message) {\r\n        try {\r\n            r.run();\r\n        } catch (Exception e) {\r\n            log.error(message);\r\n        }\r\n    }\r\n\r\n    @FunctionalInterface\r\n    private interface RunnableExc {\r\n        void run() throws Exception;\r\n    }\r\n```\r\n\r\nWhich would then allow you to do this.\r\n\r\n```java\r\nignoringExc(() -&gt; a.setAddress(b.getPerson(&quot;address&quot;)), &quot;address message&quot;);\r\nignoringExc(() -&gt; a.setName(b.getPerson(&quot;name&quot;)),       &quot;name message&quot;);\r\nignoringExc(() -&gt; a.setAge(b.getPerson(&quot;age&quot;)),         &quot;age message&quot;);\r\n...\r\n```\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Objects.html#requireNonNull(T)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Objects.html#requireNonNull(T,java.lang.String)","title":"Passing variable to an exception","body":"<p>You could pass in a <code>String</code> as well. This is common practice for some of the precondition tools in Java. Take a look at <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Objects.html#requireNonNull(T)\" rel=\"nofollow noreferrer\"><code>Objects#requireNonNull(T)</code></a> vs <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Objects.html#requireNonNull(T,java.lang.String)\" rel=\"nofollow noreferrer\"><code>Objects#requireNonNull(T,String)</code></a>.</p>\n<p>So, like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static void ignoringExc(RunnableExc r, String message) {\n        try {\n            r.run();\n        } catch (Exception e) {\n            log.error(message);\n        }\n    }\n\n    @FunctionalInterface\n    private interface RunnableExc {\n        void run() throws Exception;\n    }\n</code></pre>\n<p>Which would then allow you to do this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ignoringExc(() -&gt; a.setAddress(b.getPerson(&quot;address&quot;)), &quot;address message&quot;);\nignoringExc(() -&gt; a.setName(b.getPerson(&quot;name&quot;)),       &quot;name message&quot;);\nignoringExc(() -&gt; a.setAge(b.getPerson(&quot;age&quot;)),         &quot;age message&quot;);\n...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22913397,"reputation":19,"user_id":17050343,"display_name":"manyProblem"},"score":0,"creation_date":1684722049,"post_id":76278201,"comment_id":134553298,"body_markdown":"I have tried this method but it still throws an exception error. For my case, my getter is like this b.getName().getString(&quot;surname&quot;). How can I handle this case? @tgdavies","body":"I have tried this method but it still throws an exception error. For my case, my getter is like this b.getName().getString(&quot;surname&quot;). How can I handle this case? @tgdavies"},{"owner":{"account_id":22913397,"reputation":19,"user_id":17050343,"display_name":"manyProblem"},"score":0,"creation_date":1684722584,"post_id":76278201,"comment_id":134553333,"body_markdown":"the null error occurs in this getName, not getString. so when running the code, it directly skips calling the &quot;setIfNotNull&quot; method and throws the error from this line: setIfNotNull(b.getName(), a::setName); @tgdavies","body":"the null error occurs in this getName, not getString. so when running the code, it directly skips calling the &quot;setIfNotNull&quot; method and throws the error from this line: setIfNotNull(b.getName(), a::setName); @tgdavies"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1684729932,"post_id":76278201,"comment_id":134553892,"body_markdown":"This is completely different to the scenario in your question, where the exception was being thrown by the setter.","body":"This is completely different to the scenario in your question, where the exception was being thrown by the setter."},{"owner":{"account_id":22913397,"reputation":19,"user_id":17050343,"display_name":"manyProblem"},"score":0,"creation_date":1684736066,"post_id":76278201,"comment_id":134554563,"body_markdown":"if for this case, is using NullPointerException the suitable way to solve it? @tgdavies","body":"if for this case, is using NullPointerException the suitable way to solve it? @tgdavies"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1684741607,"post_id":76278201,"comment_id":134555552,"body_markdown":"It&#39;s hard to say without seeing your actual code.","body":"It&#39;s hard to say without seeing your actual code."},{"owner":{"account_id":22913397,"reputation":19,"user_id":17050343,"display_name":"manyProblem"},"score":0,"creation_date":1684744655,"post_id":76278201,"comment_id":134556213,"body_markdown":"My code is like this &#39;&#39;&#39;a.setAddress(b.getPerson(&quot;address&quot;).getString(&quot;Stress&quot;);\na.setAddress(b.getPerson(&quot;address&quot;).getString(&quot;Country&quot;);\na.setName(b.getPerson(&quot;name&quot;).getString(&quot;Surname&quot;);&#39;&#39;&#39;\ngetPerson with a specific value may get a null value, getString as well. So, how can i catch run these without using notpotinerexception","body":"My code is like this &#39;&#39;&#39;a.setAddress(b.getPerson(&quot;address&quot;).getString(&quot;Stress&quot;); a.setAddress(b.getPerson(&quot;address&quot;).getString(&quot;Country&quot;); a.setName(b.getPerson(&quot;name&quot;).getString(&quot;Surname&quot;);&#39;&#39;&#39; getPerson with a specific value may get a null value, getString as well. So, how can i catch run these without using notpotinerexception"}],"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"comment_count":6,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1684731180,"creation_date":1684390594,"answer_id":76278201,"question_id":76277691,"body_markdown":"You shouldn&#39;t be using `NullPointerException` to do null checks. Throwing an exception is relatively expensive, as @user16320675 points out, other NPE&#39;s may occur, and you are also catching `Exception` which will ignore other problems.\r\n\r\nInstead, use a function like:\r\n```\r\n    static &lt;T&gt; void setIfNotNull(T value, Consumer&lt;T&gt; setter) {\r\n        if (value != null) {\r\n            setter.accept(value);\r\n        } else {\r\n            // logging if needed\r\n        }\r\n    }\r\n```\r\n\r\nand call it like this:\r\n```\r\n        setIfNotNull(b.getName(), a::setName);\r\n```\r\n\r\nOf course you could also consider making the setters on `A` silently ignore `null` instead of throwing an exception, but that depends on your requirements.\r\n\r\n","title":"Passing variable to an exception","body":"<p>You shouldn't be using <code>NullPointerException</code> to do null checks. Throwing an exception is relatively expensive, as @user16320675 points out, other NPE's may occur, and you are also catching <code>Exception</code> which will ignore other problems.</p>\n<p>Instead, use a function like:</p>\n<pre><code>    static &lt;T&gt; void setIfNotNull(T value, Consumer&lt;T&gt; setter) {\n        if (value != null) {\n            setter.accept(value);\n        } else {\n            // logging if needed\n        }\n    }\n</code></pre>\n<p>and call it like this:</p>\n<pre><code>        setIfNotNull(b.getName(), a::setName);\n</code></pre>\n<p>Of course you could also consider making the setters on <code>A</code> silently ignore <code>null</code> instead of throwing an exception, but that depends on your requirements.</p>\n"}],"owner":{"account_id":22913397,"reputation":19,"user_id":17050343,"display_name":"manyProblem"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76277712,"answer_count":2,"score":0,"last_activity_date":1684731180,"creation_date":1684383259,"question_id":76277691,"body_markdown":"```\r\n\tprivate static void ignoringExc(RunnableExc r) {\r\n\t\ttry {\r\n\t\t\tr.run();\r\n\t\t} catch (Exception e) {\r\n\t\t\tlog.error(&quot;&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t@FunctionalInterface\r\n\tprivate interface RunnableExc {\r\n\t\tvoid run() throws Exception;\r\n\t}\r\n\r\n```\r\n\r\nI have multiple variables that need to be set into a Person a. However, some variables from Person b may be null. So I use the above function to avoid null pointer exception error. But  I want to customise the error message in log.error() in ignoringExc function, such as &quot;The age of Person B is null&quot;. How to do that?\r\n\r\n```\r\nignoringExc(() -&gt; a.setAddress(b.getPerson(&quot;address&quot;)));\r\nignoringExc(() -&gt; a.setName(b.getPerson(&quot;name&quot;)));\r\nignoringExc(() -&gt; a.setAge(b.getPerson(&quot;age&quot;)));\r\n...\r\n```","title":"Passing variable to an exception","body":"<pre><code>    private static void ignoringExc(RunnableExc r) {\n        try {\n            r.run();\n        } catch (Exception e) {\n            log.error(&quot;&quot;);\n        }\n    }\n\n    @FunctionalInterface\n    private interface RunnableExc {\n        void run() throws Exception;\n    }\n\n</code></pre>\n<p>I have multiple variables that need to be set into a Person a. However, some variables from Person b may be null. So I use the above function to avoid null pointer exception error. But  I want to customise the error message in log.error() in ignoringExc function, such as &quot;The age of Person B is null&quot;. How to do that?</p>\n<pre><code>ignoringExc(() -&gt; a.setAddress(b.getPerson(&quot;address&quot;)));\nignoringExc(() -&gt; a.setName(b.getPerson(&quot;name&quot;)));\nignoringExc(() -&gt; a.setAge(b.getPerson(&quot;age&quot;)));\n...\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1684722079,"post_id":76302694,"comment_id":134553305,"body_markdown":"Don&#39;t you need nested for loops to adequately and deeply copy the 2D array? Or a single for loop and arraycopy calls?","body":"Don&#39;t you need nested for loops to adequately and deeply copy the 2D array? Or a single for loop and arraycopy calls?"},{"owner":{"account_id":472765,"reputation":22587,"user_id":881441,"display_name":"Stephen Quan"},"score":1,"creation_date":1684722306,"post_id":76302694,"comment_id":134553319,"body_markdown":"Despite a copy being implied the line `int[][] copyArr = arr;` actually doesn&#39;t do a deep copy of `arr`. Both `copyArr` and `arr` are pointing to the same thing. So, any changes made to `copyArr` will change `arr`.  This question is possibly a duplicate of: https://stackoverflow.com/questions/1564832/how-do-i-do-a-deep-copy-of-a-2d-array-in-java","body":"Despite a copy being implied the line <code>int[][] copyArr = arr;</code> actually doesn&#39;t do a deep copy of <code>arr</code>. Both <code>copyArr</code> and <code>arr</code> are pointing to the same thing. So, any changes made to <code>copyArr</code> will change <code>arr</code>.  This question is possibly a duplicate of: <a href=\"https://stackoverflow.com/questions/1564832/how-do-i-do-a-deep-copy-of-a-2d-array-in-java\" title=\"how do i do a deep copy of a 2d array in java\">stackoverflow.com/questions/1564832/&hellip;</a>"},{"owner":{"account_id":28650617,"reputation":11,"user_id":21937652,"display_name":"Kian Power"},"score":0,"creation_date":1684722659,"post_id":76302694,"comment_id":134553340,"body_markdown":"Thank you, you were right about the copying confusion. I used a loop instead to iterate through and create a replica array and it works now.","body":"Thank you, you were right about the copying confusion. I used a loop instead to iterate through and create a replica array and it works now."}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684722377,"creation_date":1684722377,"answer_id":76302720,"question_id":76302694,"body_markdown":"Assigning a variable to another variable in Java doesn&#39;t create a copy. It creates a second reference to the same object, or array in this case. You need to use a method to actually create a copy if that is your intention: https://www.baeldung.com/java-array-copy","title":"Method is changing the value of the 2d array but I don&#39;t want it to","body":"<p>Assigning a variable to another variable in Java doesn't create a copy. It creates a second reference to the same object, or array in this case. You need to use a method to actually create a copy if that is your intention: <a href=\"https://www.baeldung.com/java-array-copy\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-array-copy</a></p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684729176,"creation_date":1684724033,"answer_id":76302789,"question_id":76302694,"body_markdown":"You won&#39;t be able to just assign `copyArr` to `arr` to make a legitimate copy.  \r\nDoing so will cause any updates within `arr` to also happen in `copyArr`.\r\n\r\n_How that is useful, I&#39;m not sure._\r\n\r\nYou&#39;ll need to iterate over the values of `arr` and assign them to the corresponding indices of `copyArr`.\r\n\r\nIt&#39;s fairly simple, you can use the following code.\r\n\r\n```java\r\nint[][] copyArr = new int[arr.length][];\r\nfor (int index = 0; index &lt; arr.length; index++)\r\n    System.arraycopy(arr[i], 0, copyArr[i], 0, arr.length);\r\n```","title":"Method is changing the value of the 2d array but I don&#39;t want it to","body":"<p>You won't be able to just assign <code>copyArr</code> to <code>arr</code> to make a legitimate copy.<br />\nDoing so will cause any updates within <code>arr</code> to also happen in <code>copyArr</code>.</p>\n<p><em>How that is useful, I'm not sure.</em></p>\n<p>You'll need to iterate over the values of <code>arr</code> and assign them to the corresponding indices of <code>copyArr</code>.</p>\n<p>It's fairly simple, you can use the following code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[][] copyArr = new int[arr.length][];\nfor (int index = 0; index &lt; arr.length; index++)\n    System.arraycopy(arr[i], 0, copyArr[i], 0, arr.length);\n</code></pre>\n"}],"owner":{"account_id":28650617,"reputation":11,"user_id":21937652,"display_name":"Kian Power"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1684729176,"creation_date":1684721881,"question_id":76302694,"body_markdown":"    public static int[][] submatrix(int[][] arr, int i, int j)\r\n    {\r\n        int[][] copyArr = arr;\r\n        int[][] newArr = new int[copyArr.length - 1][copyArr[0].length - 1];\r\n        \r\n        for(int k = 0; k &lt; copyArr[0].length; k++)\r\n        {\r\n            copyArr[j - 1][k] = 0;\r\n        }\r\n        \r\n        for(int x = 0; x &lt; copyArr.length; x++)\r\n        {\r\n            copyArr[x][i - 1] = 0;\r\n        }\r\n        printMatrix(copyArr);\r\n        System.out.println();\r\n        int row = 0;\r\n        int col = 0;\r\n        \r\n        for(int x = 0; x &lt; copyArr.length; x++)\r\n        {\r\n            for(int y = 0; y &lt; copyArr[0].length; y++)\r\n            {\r\n                if(copyArr[x][y] != 0)\r\n                {\r\n                    newArr[row][col] = copyArr[x][y];\r\n                    col += 1;\r\n                    if(col == newArr[0].length)\r\n                    {\r\n                        col -= newArr[0].length;\r\n                        row += 1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return newArr;\r\n    }\r\n\r\nWhen I run this and use the 2d array: \r\n\r\nint[][] matrixI = new int[][]{{11, 12, 13, 14}, {21, 22, 23, 24}, {31, 32, 33, 34}, {41, 42, 43, 44}};\r\n\r\nIt correctly calculates the sub matrix, but when I call the method again on the same 2d array with different parameters(for the row and column I am getting rid of) it uses the array that was made when I called it the first time. I tried to use a copy of the array to avoid it changing the value of the inputted arr but it is still changing it. \r\n\r\nThe program is changing my value of arr when I dont want it to. ","title":"Method is changing the value of the 2d array but I don&#39;t want it to","body":"<pre><code>public static int[][] submatrix(int[][] arr, int i, int j)\n{\n    int[][] copyArr = arr;\n    int[][] newArr = new int[copyArr.length - 1][copyArr[0].length - 1];\n    \n    for(int k = 0; k &lt; copyArr[0].length; k++)\n    {\n        copyArr[j - 1][k] = 0;\n    }\n    \n    for(int x = 0; x &lt; copyArr.length; x++)\n    {\n        copyArr[x][i - 1] = 0;\n    }\n    printMatrix(copyArr);\n    System.out.println();\n    int row = 0;\n    int col = 0;\n    \n    for(int x = 0; x &lt; copyArr.length; x++)\n    {\n        for(int y = 0; y &lt; copyArr[0].length; y++)\n        {\n            if(copyArr[x][y] != 0)\n            {\n                newArr[row][col] = copyArr[x][y];\n                col += 1;\n                if(col == newArr[0].length)\n                {\n                    col -= newArr[0].length;\n                    row += 1;\n                }\n            }\n        }\n    }\n    return newArr;\n}\n</code></pre>\n<p>When I run this and use the 2d array:</p>\n<p>int[][] matrixI = new int[][]{{11, 12, 13, 14}, {21, 22, 23, 24}, {31, 32, 33, 34}, {41, 42, 43, 44}};</p>\n<p>It correctly calculates the sub matrix, but when I call the method again on the same 2d array with different parameters(for the row and column I am getting rid of) it uses the array that was made when I called it the first time. I tried to use a copy of the array to avoid it changing the value of the inputted arr but it is still changing it.</p>\n<p>The program is changing my value of arr when I dont want it to.</p>\n"},{"tags":["java","spring","hibernate"],"owner":{"account_id":28651078,"reputation":1,"user_id":21938043,"display_name":"T&#226;n Nguy&#234;n Huy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684729053,"creation_date":1684729053,"question_id":76303014,"body_markdown":"When a new order arises, I want to update the number of products again and an error occurred.\r\nThe program reported an error in the command:productDao.updateProduct(product); \r\n```\r\n@RequestMapping(&quot;checkOut&quot;)\r\n    public String checkOut(HttpSession session, Model model) {\r\n        Orders orders = new Orders();\r\n        List&lt;OrderDetail&gt; orderDetailList = (List&lt;OrderDetail&gt;) session.getAttribute(&quot;orderDetailList&quot;);\r\n        User user = (User) session.getAttribute(&quot;user&quot;);\r\n        int totalPrice = 0;\r\n        for (OrderDetail orderDetail : orderDetailList) {\r\n            totalPrice = totalPrice + orderDetail.getUnitPrice() * orderDetail.getQuantity();\r\n        }\r\n        int shipPrice = 40000;\r\n        int totalPriceOrder = totalPrice + shipPrice;\r\n        if (orderDetailList.size() != 0) {\r\n            orders.setShipAddress(user.getAddress());\r\n            orders.setUser(user);\r\n            orders.setStatus(1);\r\n            orders.setTotalPrice(totalPriceOrder);\r\n            LocalDate currentDate = LocalDate.now();\r\n            orders.setOrderDate(java.sql.Date.valueOf(currentDate));\r\n        }\r\n        boolean bl = ordersDao.insertOrders(orders);\r\n        if (bl) {\r\n            int temp = 0;\r\n            for (OrderDetail orderDetail : orderDetailList) {\r\n                orderDetail.setOrders(orders);\r\n                orderDetailDao.insertOrderDetail(orderDetail);\r\n\r\n                Product product = orderDetail.getProduct();\r\n                int quantityToReduce = orderDetail.getQuantity();\r\n                int currentQuantity = product.getQuantity();\r\n                if (currentQuantity &gt;= quantityToReduce) {\r\n                    product.setQuantity(currentQuantity - quantityToReduce);\r\n                    productDao.updateProduct(product);\r\n                }\r\n\r\n                temp++;\r\n            }\r\n\r\n            if (temp == orderDetailList.size()) {\r\n                orderDetailList.clear();\r\n                session.setAttribute(&quot;orderDetailList&quot;, orderDetailList);\r\n            }\r\n        }\r\n        if (orderDetailList.size() == 0) {\r\n            Thread thread = new Thread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    sendMail(user.getEmail(), mailAutoDao.getMailById(2).getMailType(), mailAutoDao.getMailById(2).getMailContent());\r\n                }\r\n            });\r\n            thread.start();\r\n            return &quot;redirect:/home&quot;;\r\n        } else {\r\n            return &quot;redirect:/listCart&quot;;\r\n        }\r\n    }\r\n```\r\nMy program gives an error when trying to update a product\r\nMy DAO function: \r\n```\r\n@Override\r\n\tpublic boolean updateProduct(Product product) {\r\n\t\tSession session = sessionFactory.openSession();\r\n\t\tTransaction tx = session.beginTransaction();\r\n\t\ttry {\r\n\t\t\tsession.update(product);\r\n\t\t\ttx.commit();\r\n\t\t\treturn true;\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\ttx.rollback();\r\n\t\t\t// TODO: handle exception\r\n\t\t}finally {\r\n\t\t\tsession.close();\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n```\r\nWhen I go to the admin page to update the product, everything goes normally, the error only appears when the user makes a purchase\r\n\r\n\r\n\r\nI tried many ways to fix it but couldn&#39;t, hope you can help, thanks","title":"Illegal attempt to associate a collection with two open sessions. Collection","body":"<p>When a new order arises, I want to update the number of products again and an error occurred.\nThe program reported an error in the command:productDao.updateProduct(product);</p>\n<pre><code>@RequestMapping(&quot;checkOut&quot;)\n    public String checkOut(HttpSession session, Model model) {\n        Orders orders = new Orders();\n        List&lt;OrderDetail&gt; orderDetailList = (List&lt;OrderDetail&gt;) session.getAttribute(&quot;orderDetailList&quot;);\n        User user = (User) session.getAttribute(&quot;user&quot;);\n        int totalPrice = 0;\n        for (OrderDetail orderDetail : orderDetailList) {\n            totalPrice = totalPrice + orderDetail.getUnitPrice() * orderDetail.getQuantity();\n        }\n        int shipPrice = 40000;\n        int totalPriceOrder = totalPrice + shipPrice;\n        if (orderDetailList.size() != 0) {\n            orders.setShipAddress(user.getAddress());\n            orders.setUser(user);\n            orders.setStatus(1);\n            orders.setTotalPrice(totalPriceOrder);\n            LocalDate currentDate = LocalDate.now();\n            orders.setOrderDate(java.sql.Date.valueOf(currentDate));\n        }\n        boolean bl = ordersDao.insertOrders(orders);\n        if (bl) {\n            int temp = 0;\n            for (OrderDetail orderDetail : orderDetailList) {\n                orderDetail.setOrders(orders);\n                orderDetailDao.insertOrderDetail(orderDetail);\n\n                Product product = orderDetail.getProduct();\n                int quantityToReduce = orderDetail.getQuantity();\n                int currentQuantity = product.getQuantity();\n                if (currentQuantity &gt;= quantityToReduce) {\n                    product.setQuantity(currentQuantity - quantityToReduce);\n                    productDao.updateProduct(product);\n                }\n\n                temp++;\n            }\n\n            if (temp == orderDetailList.size()) {\n                orderDetailList.clear();\n                session.setAttribute(&quot;orderDetailList&quot;, orderDetailList);\n            }\n        }\n        if (orderDetailList.size() == 0) {\n            Thread thread = new Thread(new Runnable() {\n                @Override\n                public void run() {\n                    sendMail(user.getEmail(), mailAutoDao.getMailById(2).getMailType(), mailAutoDao.getMailById(2).getMailContent());\n                }\n            });\n            thread.start();\n            return &quot;redirect:/home&quot;;\n        } else {\n            return &quot;redirect:/listCart&quot;;\n        }\n    }\n</code></pre>\n<p>My program gives an error when trying to update a product\nMy DAO function:</p>\n<pre><code>@Override\n    public boolean updateProduct(Product product) {\n        Session session = sessionFactory.openSession();\n        Transaction tx = session.beginTransaction();\n        try {\n            session.update(product);\n            tx.commit();\n            return true;\n        } catch (Exception e) {\n            e.printStackTrace();\n            tx.rollback();\n            // TODO: handle exception\n        }finally {\n            session.close();\n        }\n        return false;\n    }\n</code></pre>\n<p>When I go to the admin page to update the product, everything goes normally, the error only appears when the user makes a purchase</p>\n<p>I tried many ways to fix it but couldn't, hope you can help, thanks</p>\n"},{"tags":["java","algorithm","performance","lambda"],"comments":[{"owner":{"account_id":4254130,"reputation":13758,"user_id":3480246,"display_name":"Jan"},"score":3,"creation_date":1451887687,"post_id":34585444,"comment_id":56916252,"body_markdown":"Have you **repeatedly** run this method and measured time?","body":"Have you <b>repeatedly</b> run this method and measured time?"},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":6,"creation_date":1451888072,"post_id":34585444,"comment_id":56916360,"body_markdown":"See http://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java","body":"See <a href=\"http://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\" title=\"how do i write a correct micro benchmark in java\">stackoverflow.com/questions/504103/&hellip;</a>"},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1451893505,"post_id":34585444,"comment_id":56918380,"body_markdown":"I don&#39;t have access to the test cases, so I can&#39;t exactly run it repeatedly. I don&#39;t know what LeetCode does to achieve this weird performance, so the question is this: what it _could_ be doing to make it that bad?","body":"I don&#39;t have access to the test cases, so I can&#39;t exactly run it repeatedly. I don&#39;t know what LeetCode does to achieve this weird performance, so the question is this: what it <i>could</i> be doing to make it that bad?"},{"owner":{"account_id":2702906,"reputation":22668,"user_id":2333222,"display_name":"SubOptimal"},"score":14,"creation_date":1451895203,"post_id":34585444,"comment_id":56919054,"body_markdown":"If the code is executed only once (for the examples on [leetcode](https://leetcode.com/problems/insert-interval/)) the decreasing execution time might be related due to the fact that the lambda bytecode is **generated at runtime**. Whereas your anonymous comparator class is created **at compile time**.","body":"If the code is executed only once (for the examples on <a href=\"https://leetcode.com/problems/insert-interval/\" rel=\"nofollow noreferrer\">leetcode</a>) the decreasing execution time might be related due to the fact that the lambda bytecode is <b>generated at runtime</b>. Whereas your anonymous comparator class is created <b>at compile time</b>."},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1451902813,"post_id":34585444,"comment_id":56922721,"body_markdown":"I believe that should really be the answer, thank you! I had no idea. I thought that lambdas were something like syntactic sugar for anonymous classes.","body":"I believe that should really be the answer, thank you! I had no idea. I thought that lambdas were something like syntactic sugar for anonymous classes."},{"owner":{"account_id":8655,"reputation":20729,"user_id":15689,"accept_rate":91,"display_name":"Brian Knoblauch"},"score":0,"creation_date":1452113634,"post_id":34585444,"comment_id":57031025,"body_markdown":"So far, my anecdotal experience (from my own use cases) is that lambdas are just slower than anonymous classes.  However, by like a few percent, not any 20x...","body":"So far, my anecdotal experience (from my own use cases) is that lambdas are just slower than anonymous classes.  However, by like a few percent, not any 20x..."}],"answers":[{"comments":[{"owner":{"account_id":4719664,"reputation":3937,"user_id":3817953,"accept_rate":80,"display_name":"yunandtidus"},"score":2,"creation_date":1452112049,"post_id":34642063,"comment_id":57030199,"body_markdown":"Any documentation to enforce your answer (and help us to convince sceptical) ?","body":"Any documentation to enforce your answer (and help us to convince sceptical) ?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":6,"creation_date":1452112684,"post_id":34642063,"comment_id":57030546,"body_markdown":"@yunandtidus: I added links to other questions (whose answers provide even more links). The fact, that ASM is used, is an implementation detail, that won’t appear in a specification, but can be seen by looking at the [source code](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/invoke/InnerClassLambdaMetafactory.java#249)","body":"@yunandtidus: I added links to other questions (whose answers provide even more links). The fact, that ASM is used, is an implementation detail, that won’t appear in a specification, but can be seen by looking at the <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/invoke/InnerClassLambdaMetafactory.java#249\" rel=\"nofollow noreferrer\">source code</a>"},{"owner":{"account_id":4719664,"reputation":3937,"user_id":3817953,"accept_rate":80,"display_name":"yunandtidus"},"score":0,"creation_date":1452112951,"post_id":34642063,"comment_id":57030677,"body_markdown":"This is maybe more than initially expected by OP, but very interesting in my opinion. Thanks for pointing this out.","body":"This is maybe more than initially expected by OP, but very interesting in my opinion. Thanks for pointing this out."},{"owner":{"account_id":3337989,"reputation":404,"user_id":2804966,"display_name":"lalo"},"score":0,"creation_date":1548772711,"post_id":34642063,"comment_id":95656854,"body_markdown":"Has the first-time initialization overhead of lambda expressions improved in JDK 11?","body":"Has the first-time initialization overhead of lambda expressions improved in JDK 11?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1548775895,"post_id":34642063,"comment_id":95659060,"body_markdown":"@lalo a quick test on my machine suggests that the first time initialization has been improved by factor four between JDK&#160;8 and JDK&#160;11, though, it’s not clear whether this is the result of a dedicated lambda optimization or a general speedup. It’s still more than the initialization of a single inner class, but mind that we’re talking about a single-time overhead of ~10&#160;ms on my machine.  Also, you only notice it when no-one used them before; just specifying a `--module-path` on the command line make it disappear; apparently, the code handling application modules does use lambda expressions.","body":"@lalo a quick test on my machine suggests that the first time initialization has been improved by factor four between JDK 8 and JDK 11, though, it’s not clear whether this is the result of a dedicated lambda optimization or a general speedup. It’s still more than the initialization of a single inner class, but mind that we’re talking about a single-time overhead of ~10 ms on my machine.  Also, you only notice it when no-one used them before; just specifying a <code>--module-path</code> on the command line make it disappear; apparently, the code handling application modules does use lambda expressions."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1548794433,"post_id":34642063,"comment_id":95668578,"body_markdown":"@Holger this &quot;first-time&quot; slowness was part why my team abandoned `Nashhorn`; we have *lots* of code that relied on it, but because of `invokedynamic` used and being rather slow for the first runs (in our case in some cases it was 25-30 s) we dropped it a few years ago. Might be time to test this against java-11, but no idea if someone would want to re-write those portions of the code though","body":"@Holger this &quot;first-time&quot; slowness was part why my team abandoned <code>Nashhorn</code>; we have <i>lots</i> of code that relied on it, but because of <code>invokedynamic</code> used and being rather slow for the first runs (in our case in some cases it was 25-30 s) we dropped it a few years ago. Might be time to test this against java-11, but no idea if someone would want to re-write those portions of the code though"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1548833858,"post_id":34642063,"comment_id":95680267,"body_markdown":"@Eugene It’s “Nashorn” (German for rhinoceros) and it has been deprecated for removal with JDK&#160;11 ([JDK-8202786](https://bugs.openjdk.java.net/browse/JDK-8202786)). Honestly, I never understood why someone would want to have JavaScript in their application, unless when implementing a web browser…","body":"@Eugene It’s “Nashorn” (German for rhinoceros) and it has been deprecated for removal with JDK 11 (<a href=\"https://bugs.openjdk.java.net/browse/JDK-8202786\" rel=\"nofollow noreferrer\">JDK-8202786</a>). Honestly, I never understood why someone would want to have JavaScript in their application, unless when implementing a web browser…"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1548838006,"post_id":34642063,"comment_id":95682220,"body_markdown":"@Holger as usual, it&#39;s some decision that was not really in developers control, anyway very useful info that it is removed! thank you","body":"@Holger as usual, it&#39;s some decision that was not really in developers control, anyway very useful info that it is removed! thank you"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1548838361,"post_id":34642063,"comment_id":95682448,"body_markdown":"@Eugene not “is” but “will be”","body":"@Eugene not “is” but “will be”"},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":1,"creation_date":1596791016,"post_id":34642063,"comment_id":111930214,"body_markdown":"@Holger I would suggest moving [this comment](https://stackoverflow.com/questions/34585444/java-lambdas-20-times-slower-than-anonymous-classes#comment95659060_34642063) as a part of an edit. It becomes relevant now that JDK-11 has been around for some time.","body":"@Holger I would suggest moving <a href=\"https://stackoverflow.com/questions/34585444/java-lambdas-20-times-slower-than-anonymous-classes#comment95659060_34642063\">this comment</a> as a part of an edit. It becomes relevant now that JDK-11 has been around for some time."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":10,"down_vote_count":0,"up_vote_count":82,"is_accepted":true,"score":82,"last_activity_date":1597054216,"creation_date":1452111808,"answer_id":34642063,"question_id":34585444,"body_markdown":"You are obviously encountering the first-time initialization overhead of lambda expressions. As already mentioned in the comments, the classes for lambda expressions are generated at runtime rather than being loaded from your class path.\r\n\r\nHowever, being generated isn’t the cause for the slowdown. After all, generating a class having a simple structure can be even faster than loading the same bytes from an external source. And the inner class has to be loaded too. But when the application hasn’t used lambda expressions before&#185;, even the framework for generating the lambda classes has to be loaded (Oracle’s current implementation uses ASM under the hood). This is the actual cause of the slowdown, loading and initialization of a dozen internally used classes, not the lambda expression itself&#178;.\r\n\r\nYou can easily verify this. In your current code using lambda expressions, you have two identical expressions `(i1, i2) -&gt; Integer.compare(i1.start, i2.start)`. The current implementation doesn’t recognize this (actually, the compiler doesn’t provide a hint neither). So here, two lambda instances, having even different classes, are generated. You can refactor the code to have only one comparator, similar to your inner class variant:\r\n\r\n    final Comparator&lt;? super Interval&gt; comparator\r\n      = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\r\n    int start = Collections.binarySearch(intervals, newInterval, comparator);\r\n    int skip = start &gt;= 0 ? start : -start - 1;\r\n    int end = Collections.binarySearch(intervals.subList(skip, intervals.size()),\r\n                                       new Interval(newInterval.end, 0),\r\n                                       comparator);\r\n\r\nYou won’t notice any significant performance difference, as it’s not the number of lambda expressions that matters, but just the class loading and initialization of the framework, which happens exactly once.\r\n\r\nYou can even max it out by inserting additional lambda expressions like\r\n\r\n    final Comparator&lt;? super Interval&gt; comparator1\r\n        = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\r\n    final Comparator&lt;? super Interval&gt; comparator2\r\n        = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\r\n    final Comparator&lt;? super Interval&gt; comparator3\r\n        = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\r\n    final Comparator&lt;? super Interval&gt; comparator4\r\n        = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\r\n    final Comparator&lt;? super Interval&gt; comparator5\r\n        = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\r\n\r\nwithout seeing any slowdown. It’s really the initial overhead of the very first lambda expression of the entire runtime you are noticing here. Since Leetcode itself apparently doesn’t use lambda expressions before entering your code, whose execution time gets measured, this overhead adds to your execution time here.\r\n\r\nSee also [“How will Java lambda functions be compiled?”](https://stackoverflow.com/questions/16827262/how-will-java-lambda-functions-be-compiled) and [“Does a lambda expression create an object on the heap every time it&#39;s executed?”](https://stackoverflow.com/questions/27524445/does-a-lambda-expression-create-an-object-on-the-heap-every-time-its-executed)\r\n\r\n&#185; This implies that JDK code that will be executed before handing control over to your application doesn’t use lambda expressions itself. Since this code stems from times before the introduction of lambda expressions, this is usually the case. With newer JDKs, modular software will be initialized by different, newer code, which seems to use lambda expressions, so the initialization of the runtime facility can’t be measured within the application anymore in these setups.\r\n\r\n&#178; The initialization time has been reduced significantly in newer JDKs. There are different possible causes, general performance improvements, dedicated lambda optimizations, or both. Improving initialization time in general, is an issue that the JDK developers did not forget.","title":"Java lambdas 20 times slower than anonymous classes","body":"<p>You are obviously encountering the first-time initialization overhead of lambda expressions. As already mentioned in the comments, the classes for lambda expressions are generated at runtime rather than being loaded from your class path.</p>\n<p>However, being generated isn’t the cause for the slowdown. After all, generating a class having a simple structure can be even faster than loading the same bytes from an external source. And the inner class has to be loaded too. But when the application hasn’t used lambda expressions before¹, even the framework for generating the lambda classes has to be loaded (Oracle’s current implementation uses ASM under the hood). This is the actual cause of the slowdown, loading and initialization of a dozen internally used classes, not the lambda expression itself².</p>\n<p>You can easily verify this. In your current code using lambda expressions, you have two identical expressions <code>(i1, i2) -&gt; Integer.compare(i1.start, i2.start)</code>. The current implementation doesn’t recognize this (actually, the compiler doesn’t provide a hint neither). So here, two lambda instances, having even different classes, are generated. You can refactor the code to have only one comparator, similar to your inner class variant:</p>\n<pre><code>final Comparator&lt;? super Interval&gt; comparator\n  = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\nint start = Collections.binarySearch(intervals, newInterval, comparator);\nint skip = start &gt;= 0 ? start : -start - 1;\nint end = Collections.binarySearch(intervals.subList(skip, intervals.size()),\n                                   new Interval(newInterval.end, 0),\n                                   comparator);\n</code></pre>\n<p>You won’t notice any significant performance difference, as it’s not the number of lambda expressions that matters, but just the class loading and initialization of the framework, which happens exactly once.</p>\n<p>You can even max it out by inserting additional lambda expressions like</p>\n<pre><code>final Comparator&lt;? super Interval&gt; comparator1\n    = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\nfinal Comparator&lt;? super Interval&gt; comparator2\n    = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\nfinal Comparator&lt;? super Interval&gt; comparator3\n    = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\nfinal Comparator&lt;? super Interval&gt; comparator4\n    = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\nfinal Comparator&lt;? super Interval&gt; comparator5\n    = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\n</code></pre>\n<p>without seeing any slowdown. It’s really the initial overhead of the very first lambda expression of the entire runtime you are noticing here. Since Leetcode itself apparently doesn’t use lambda expressions before entering your code, whose execution time gets measured, this overhead adds to your execution time here.</p>\n<p>See also <a href=\"https://stackoverflow.com/questions/16827262/how-will-java-lambda-functions-be-compiled\">“How will Java lambda functions be compiled?”</a> and <a href=\"https://stackoverflow.com/questions/27524445/does-a-lambda-expression-create-an-object-on-the-heap-every-time-its-executed\">“Does a lambda expression create an object on the heap every time it's executed?”</a></p>\n<p>¹ This implies that JDK code that will be executed before handing control over to your application doesn’t use lambda expressions itself. Since this code stems from times before the introduction of lambda expressions, this is usually the case. With newer JDKs, modular software will be initialized by different, newer code, which seems to use lambda expressions, so the initialization of the runtime facility can’t be measured within the application anymore in these setups.</p>\n<p>² The initialization time has been reduced significantly in newer JDKs. There are different possible causes, general performance improvements, dedicated lambda optimizations, or both. Improving initialization time in general, is an issue that the JDK developers did not forget.</p>\n"}],"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24270,"favorite_count":0,"down_vote_count":1,"up_vote_count":51,"accepted_answer_id":34642063,"answer_count":1,"score":50,"last_activity_date":1684726214,"creation_date":1451887086,"question_id":34585444,"body_markdown":"I&#39;ve seen a lot of questions here about Java lambdas performance, but most of them go like &quot;Lambdas are slightly faster, but become slower when using closures&quot; or &quot;Warm-up vs execution times are different&quot; or other such things.\r\n\r\nHowever, I hit a rather strange thing here. Consider [this LeetCode problem][1]:\r\n\r\n&gt; Given a set of non-overlapping intervals, insert a new interval into\r\n&gt; the intervals (merge if necessary).\r\n&gt; \r\n&gt; You may assume that the intervals were initially sorted according to\r\n&gt; their start times.\r\n\r\nThe problem was tagged hard, so I assumed that a linear approach is not what they want there. So I decided to come up with a clever way to combine binary search with modifications to the input list. Now the problem is not very clear on modifying the input list—it says &quot;insert&quot;, even though the signature requires to return a reference to list, but never mind that for now. Here&#39;s the full code, but only the first few lines are relevant to this question. I&#39;m keeping the rest here just so that anyone can try it:\r\n```\r\npublic List&lt;Interval&gt; insert(List&lt;Interval&gt; intervals, Interval newInterval) {\r\n    int start = Collections.binarySearch(intervals, newInterval,\r\n                                         (i1, i2) -&gt; Integer.compare(i1.start, i2.start));\r\n    int skip = start &gt;= 0 ? start : -start - 1;\r\n    int end = Collections.binarySearch(intervals.subList(skip, intervals.size()),\r\n                                       new Interval(newInterval.end, 0),\r\n                                       (i1, i2) -&gt; Integer.compare(i1.start, i2.start));\r\n    if (end &gt;= 0) {\r\n        end += skip; // back to original indexes\r\n    } else {\r\n        end -= skip; // ditto\r\n    }\r\n    int newStart = newInterval.start;\r\n    int headEnd;\r\n    if (-start - 2 &gt;= 0) {\r\n        Interval prev = intervals.get(-start - 2);\r\n        if (prev.end &lt; newInterval.start) {\r\n            // the new interval doesn&#39;t overlap the one before the insertion point\r\n            headEnd = -start - 1;\r\n        } else {\r\n            newStart = prev.start;\r\n            headEnd = -start - 2;\r\n        }\r\n    } else if (start &gt;= 0) {\r\n        // merge the first interval\r\n        headEnd = start;\r\n    } else { // start == -1, insertion point = 0\r\n        headEnd = 0;\r\n    }\r\n    int newEnd = newInterval.end;\r\n    int tailStart;\r\n    if (-end - 2 &gt;= 0) {\r\n        // merge the end with the previous interval\r\n        newEnd = Math.max(newEnd, intervals.get(-end - 2).end);\r\n        tailStart = -end - 1;\r\n    } else if (end &gt;= 0) {\r\n        newEnd = intervals.get(end).end;\r\n        tailStart = end + 1;\r\n    } else { // end == -1, insertion point = 0\r\n        tailStart = 0;\r\n    }\r\n    intervals.subList(headEnd, tailStart).clear();\r\n    intervals.add(headEnd, new Interval(newStart, newEnd));\r\n    return intervals;\r\n}\r\n```\r\nThis worked fine and got accepted, but with 80 ms runtime, while most solutions were 4-5 ms and some 18-19 ms. When I looked them up, they were all linear and very primitive. Not something one would expect from a problem tagged &quot;hard&quot;.\r\n\r\nBut here comes the question: my solution is also linear at worst case (because add/clear operations are linear time). Why is it _that_ slower? And then I did this:\r\n```\r\nComparator&lt;Interval&gt; comparator = new Comparator&lt;Interval&gt;() {\r\n    @Override\r\n    public int compare(Interval i1, Interval i2) {\r\n        return Integer.compare(i1.start, i2.start);\r\n    }\r\n};\r\nint start = Collections.binarySearch(intervals, newInterval, comparator);\r\nint skip = start &gt;= 0 ? start : -start - 1;\r\nint end = Collections.binarySearch(intervals.subList(skip, intervals.size()),\r\n                                   new Interval(newInterval.end, 0),\r\n                                   comparator);\r\n```\r\nFrom 80 ms down to 4 ms! What&#39;s going on here? Unfortunately I have no idea what kind of tests LeetCode runs or under what environment, but still, isn&#39;t 20 times too much?\r\n\r\n  [1]: https://leetcode.com/problems/insert-interval/","title":"Java lambdas 20 times slower than anonymous classes","body":"<p>I've seen a lot of questions here about Java lambdas performance, but most of them go like &quot;Lambdas are slightly faster, but become slower when using closures&quot; or &quot;Warm-up vs execution times are different&quot; or other such things.</p>\n<p>However, I hit a rather strange thing here. Consider <a href=\"https://leetcode.com/problems/insert-interval/\" rel=\"nofollow noreferrer\">this LeetCode problem</a>:</p>\n<blockquote>\n<p>Given a set of non-overlapping intervals, insert a new interval into\nthe intervals (merge if necessary).</p>\n<p>You may assume that the intervals were initially sorted according to\ntheir start times.</p>\n</blockquote>\n<p>The problem was tagged hard, so I assumed that a linear approach is not what they want there. So I decided to come up with a clever way to combine binary search with modifications to the input list. Now the problem is not very clear on modifying the input list—it says &quot;insert&quot;, even though the signature requires to return a reference to list, but never mind that for now. Here's the full code, but only the first few lines are relevant to this question. I'm keeping the rest here just so that anyone can try it:</p>\n<pre><code>public List&lt;Interval&gt; insert(List&lt;Interval&gt; intervals, Interval newInterval) {\n    int start = Collections.binarySearch(intervals, newInterval,\n                                         (i1, i2) -&gt; Integer.compare(i1.start, i2.start));\n    int skip = start &gt;= 0 ? start : -start - 1;\n    int end = Collections.binarySearch(intervals.subList(skip, intervals.size()),\n                                       new Interval(newInterval.end, 0),\n                                       (i1, i2) -&gt; Integer.compare(i1.start, i2.start));\n    if (end &gt;= 0) {\n        end += skip; // back to original indexes\n    } else {\n        end -= skip; // ditto\n    }\n    int newStart = newInterval.start;\n    int headEnd;\n    if (-start - 2 &gt;= 0) {\n        Interval prev = intervals.get(-start - 2);\n        if (prev.end &lt; newInterval.start) {\n            // the new interval doesn't overlap the one before the insertion point\n            headEnd = -start - 1;\n        } else {\n            newStart = prev.start;\n            headEnd = -start - 2;\n        }\n    } else if (start &gt;= 0) {\n        // merge the first interval\n        headEnd = start;\n    } else { // start == -1, insertion point = 0\n        headEnd = 0;\n    }\n    int newEnd = newInterval.end;\n    int tailStart;\n    if (-end - 2 &gt;= 0) {\n        // merge the end with the previous interval\n        newEnd = Math.max(newEnd, intervals.get(-end - 2).end);\n        tailStart = -end - 1;\n    } else if (end &gt;= 0) {\n        newEnd = intervals.get(end).end;\n        tailStart = end + 1;\n    } else { // end == -1, insertion point = 0\n        tailStart = 0;\n    }\n    intervals.subList(headEnd, tailStart).clear();\n    intervals.add(headEnd, new Interval(newStart, newEnd));\n    return intervals;\n}\n</code></pre>\n<p>This worked fine and got accepted, but with 80 ms runtime, while most solutions were 4-5 ms and some 18-19 ms. When I looked them up, they were all linear and very primitive. Not something one would expect from a problem tagged &quot;hard&quot;.</p>\n<p>But here comes the question: my solution is also linear at worst case (because add/clear operations are linear time). Why is it <em>that</em> slower? And then I did this:</p>\n<pre><code>Comparator&lt;Interval&gt; comparator = new Comparator&lt;Interval&gt;() {\n    @Override\n    public int compare(Interval i1, Interval i2) {\n        return Integer.compare(i1.start, i2.start);\n    }\n};\nint start = Collections.binarySearch(intervals, newInterval, comparator);\nint skip = start &gt;= 0 ? start : -start - 1;\nint end = Collections.binarySearch(intervals.subList(skip, intervals.size()),\n                                   new Interval(newInterval.end, 0),\n                                   comparator);\n</code></pre>\n<p>From 80 ms down to 4 ms! What's going on here? Unfortunately I have no idea what kind of tests LeetCode runs or under what environment, but still, isn't 20 times too much?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1556557,"reputation":1548,"user_id":1447477,"accept_rate":80,"display_name":"Matter Cat"},"score":0,"creation_date":1437450184,"post_id":31529908,"comment_id":51020849,"body_markdown":"Also you haven&#39;t used `setContentView` in your `onCreate`. Not related to the permission error but you need to fix that before it&#39;ll work.","body":"Also you haven&#39;t used <code>setContentView</code> in your <code>onCreate</code>. Not related to the permission error but you need to fix that before it&#39;ll work."},{"owner":{"account_id":4686941,"reputation":2426,"user_id":3794140,"accept_rate":67,"display_name":"Sheychan"},"score":0,"creation_date":1437450265,"post_id":31529908,"comment_id":51020871,"body_markdown":"@MatterCat it might be a service or a fragment","body":"@MatterCat it might be a service or a fragment"},{"owner":{"account_id":1556557,"reputation":1548,"user_id":1447477,"accept_rate":80,"display_name":"Matter Cat"},"score":0,"creation_date":1437450332,"post_id":31529908,"comment_id":51020878,"body_markdown":"If they&#39;re just starting out, it&#39;s most likely that it&#39;s an Activity. I suppose that&#39;s fair, though.","body":"If they&#39;re just starting out, it&#39;s most likely that it&#39;s an Activity. I suppose that&#39;s fair, though."},{"owner":{"account_id":4686941,"reputation":2426,"user_id":3794140,"accept_rate":67,"display_name":"Sheychan"},"score":0,"creation_date":1437451993,"post_id":31529908,"comment_id":51021242,"body_markdown":"@MatterCat hmmm yup true, but we should focus on his error, the permission error.","body":"@MatterCat hmmm yup true, but we should focus on his error, the permission error."},{"owner":{"account_id":5961850,"reputation":25,"user_id":4686783,"display_name":"snwflake"},"score":0,"creation_date":1438940921,"post_id":31529908,"comment_id":51667210,"body_markdown":"it is indeed a service, i may just started out with java, but i am familiar with service based architecture in software development.","body":"it is indeed a service, i may just started out with java, but i am familiar with service based architecture in software development."}],"answers":[{"comments":[{"owner":{"account_id":5961850,"reputation":25,"user_id":4686783,"display_name":"snwflake"},"score":0,"creation_date":1437451867,"post_id":31529976,"comment_id":51021210,"body_markdown":"that solved it for me, thanks. the completion of android studio made it fully upper case...","body":"that solved it for me, thanks. the completion of android studio made it fully upper case..."}],"tags":[],"owner":{"account_id":4686941,"reputation":2426,"user_id":3794140,"accept_rate":67,"display_name":"Sheychan"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1437450141,"creation_date":1437450141,"answer_id":31529976,"question_id":31529908,"body_markdown":"Use small caps on ANDROID.PERMISSION\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;","title":"Permission Denied in order to load Image from Android Internal Storage","body":"<p>Use small caps on ANDROID.PERMISSION</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/&gt;\n</code></pre>\n"}],"owner":{"account_id":5961850,"reputation":25,"user_id":4686783,"display_name":"snwflake"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4938,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31529976,"answer_count":1,"score":1,"last_activity_date":1684725831,"creation_date":1437449721,"question_id":31529908,"body_markdown":"Started learning java and app development. I tried to display a single Picture with a hard-coded path. I got left with an Error telling me, that the necessary permissions are missing:\r\n\r\n***Unable to decode stream: java.io.FileNotFoundException: /storage/emulated/0/media/logo.jpg: open failed: EACCES (Permission denied)***\r\n\r\n***AndroidManifest.xml*:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.snwflake22.helloworld&quot; &gt;\r\n        &lt;uses-permission android:name=&quot;ANDROID.PERMISSION.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;ANDROID.PERMISSION.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n        &lt;application\r\n        (...)\r\n        &lt;/application&gt;\r\n    &lt;/manifest&gt;\r\n\r\n\r\nThe function itself looks like this:\r\n \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        File image = new File(Environment.getExternalStorageDirectory()+&quot;/media/&quot;, &quot;logo.jpg&quot;);\r\n        BitmapFactory.Options bmOptions = new BitmapFactory.Options();\r\n        Bitmap bitmap = BitmapFactory.decodeFile(image.getAbsolutePath(), bmOptions);\r\n        ImageView imageView = (ImageView) findViewById(R.id.imageView);\r\n        imageView.setImageBitmap(bitmap);\r\n    }\r\n\r\n\r\nAre there any other permissions I need to set to access the storage? or the media folder?\r\n","title":"Permission Denied in order to load Image from Android Internal Storage","body":"<p>Started learning java and app development. I tried to display a single Picture with a hard-coded path. I got left with an Error telling me, that the necessary permissions are missing:</p>\n<p><em><strong>Unable to decode stream: java.io.FileNotFoundException: /storage/emulated/0/media/logo.jpg: open failed: EACCES (Permission denied)</strong></em></p>\n<p><strong><em>AndroidManifest.xml</em>:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\npackage=&quot;com.snwflake22.helloworld&quot; &gt;\n    &lt;uses-permission android:name=&quot;ANDROID.PERMISSION.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;ANDROID.PERMISSION.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;application\n    (...)\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>The function itself looks like this:</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    File image = new File(Environment.getExternalStorageDirectory()+&quot;/media/&quot;, &quot;logo.jpg&quot;);\n    BitmapFactory.Options bmOptions = new BitmapFactory.Options();\n    Bitmap bitmap = BitmapFactory.decodeFile(image.getAbsolutePath(), bmOptions);\n    ImageView imageView = (ImageView) findViewById(R.id.imageView);\n    imageView.setImageBitmap(bitmap);\n}\n</code></pre>\n<p>Are there any other permissions I need to set to access the storage? or the media folder?</p>\n"},{"tags":["java","json","arraylist","json-deserialization"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1684727688,"post_id":76301356,"comment_id":134553700,"body_markdown":"I found a few answers, [Jackson: is there a way to serialize POJOs directly to treemodel?](https://stackoverflow.com/questions/6967583/jackson-is-there-a-way-to-serialize-pojos-directly-to-treemodel), and [Convert Java Object to JsonNode in Jackson](https://stackoverflow.com/questions/11828368/convert-java-object-to-jsonnode-in-jackson)","body":"I found a few answers, <a href=\"https://stackoverflow.com/questions/6967583/jackson-is-there-a-way-to-serialize-pojos-directly-to-treemodel\">Jackson: is there a way to serialize POJOs directly to treemodel?</a>, and <a href=\"https://stackoverflow.com/questions/11828368/convert-java-object-to-jsonnode-in-jackson\">Convert Java Object to JsonNode in Jackson</a>"}],"owner":{"account_id":315708,"reputation":187,"user_id":631523,"accept_rate":0,"display_name":"Orgil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684725410,"creation_date":1684693736,"question_id":76301356,"body_markdown":"How to convert json to ArrayList&lt;ArrayList&lt;Object&gt;&gt; in java.\r\n&lt;br&gt;Corresponding c# code using NewtonJson is like:\r\n\r\n    JsonConvert.DeserializeObject&lt;List&lt;List&lt;Object&gt;&gt;&gt;(jsonstr)\r\n\r\nBut what would it be in Java? I could not find package for this.&lt;br&gt;If target type were some class then it would be easy using gson. But my problem is target type being double list ArrayList&lt;ArrayList&lt;Object&gt;&gt;.\r\n\r\nRegards Orgil.D","title":"how to convert json to ArrayList&lt;ArrayList&lt;String&gt;&gt; in java like JsonConvert.DeserializeObject&lt;List&lt;List&lt;object&gt;&gt;&gt;(jsonstr) in c#","body":"<p>How to convert json to ArrayList&lt;ArrayList&gt; in java.\n<br>Corresponding c# code using NewtonJson is like:</p>\n<pre><code>JsonConvert.DeserializeObject&lt;List&lt;List&lt;Object&gt;&gt;&gt;(jsonstr)\n</code></pre>\n<p>But what would it be in Java? I could not find package for this.<br>If target type were some class then it would be easy using gson. But my problem is target type being double list ArrayList&lt;ArrayList&gt;.</p>\n<p>Regards Orgil.D</p>\n"},{"tags":["java","package","file-structure"],"comments":[{"owner":{"account_id":7630,"reputation":22523,"user_id":13295,"accept_rate":92,"display_name":"Lance Roberts"},"score":1,"creation_date":1249580715,"post_id":1240387,"comment_id":1066532,"body_markdown":"What OS are you dealing with?","body":"What OS are you dealing with?"}],"answers":[{"tags":[],"owner":{"account_id":43112,"reputation":58953,"user_id":125844,"accept_rate":85,"display_name":"notnoop"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1249580726,"creation_date":1249580726,"answer_id":1240400,"question_id":1240387,"body_markdown":"You can try unzipping/unjarring rt.jar, which is usually available in `$JAVA_HOME/lib/rt.jar`.  The jar file should include the classfiles of all the `JDK`, if that is what you are asking about.","title":"Where are the Java System Packages stored?","body":"<p>You can try unzipping/unjarring rt.jar, which is usually available in <code>$JAVA_HOME/lib/rt.jar</code>.  The jar file should include the classfiles of all the <code>JDK</code>, if that is what you are asking about.</p>\n"},{"tags":[],"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"comment_count":0,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1249581309,"creation_date":1249580759,"answer_id":1240405,"question_id":1240387,"body_markdown":"If you want a list of packages in the standard installation, just go to the [Javadocs][1] and look in the upper left corner.\r\n\r\nIf you want to see the .class files, they&#39;re in `lib\\rt.jar` in the JRE directory (`.jar` is the same as `.zip`, so you can open it with anything that can open zip files).\r\n\r\nIf you want to see the source code, look in `src.zip` in the JDK directory. If it&#39;s not there, you probably elected not to install it when you installed the JDK.\r\n\r\nKeep in mind that packages are represented as folders on disk, so you might be a little disappointed by what you see.\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/index.html","title":"Where are the Java System Packages stored?","body":"<p>If you want a list of packages in the standard installation, just go to the <a href=\"http://java.sun.com/javase/6/docs/api/index.html\" rel=\"noreferrer\">Javadocs</a> and look in the upper left corner.</p>\n\n<p>If you want to see the .class files, they're in <code>lib\\rt.jar</code> in the JRE directory (<code>.jar</code> is the same as <code>.zip</code>, so you can open it with anything that can open zip files).</p>\n\n<p>If you want to see the source code, look in <code>src.zip</code> in the JDK directory. If it's not there, you probably elected not to install it when you installed the JDK.</p>\n\n<p>Keep in mind that packages are represented as folders on disk, so you might be a little disappointed by what you see.</p>\n"},{"tags":[],"owner":{"account_id":20694,"reputation":24019,"user_id":49713,"accept_rate":80,"display_name":"lavinio"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1249581111,"creation_date":1249580798,"answer_id":1240407,"question_id":1240387,"body_markdown":"Assuming you mean the packages that include the class libraries like java.lang.* and java.util.*, these live in the &quot;lib&quot; directory under wherever your Java Runtime Environment (JRE) is installed.\r\n\r\nOn Windows, it would be something like this:\r\n\r\n    C:\\Program Files\\Java\\j2re1.4.2_12\\lib\r\n\r\nIn there, you should see files like `rt.jar` which contains the core Java classes and `charsets.jar` which contains many of the extended encoding support for EBCDIC and the CJK languages.\r\n\r\nIn a parallel `bin` directory are the executables for Java and related utilities.\r\n\r\nIf you&#39;ve installed the Java Development Kit (JDK), in the directory above where you find the libs you will probably find a `src.jar` file. This can be unpacked either with the `jar.exe` utility, or with a standard *zip*-style tool, and contains the Java sources to the standard class library.\r\n\r\nSome of Java, such as the virtual machine itself, is machine-specific, and will be part of some of the DLL&#39;s or EXE&#39;s present.\r\n\r\n","title":"Where are the Java System Packages stored?","body":"<p>Assuming you mean the packages that include the class libraries like java.lang.* and java.util.*, these live in the \"lib\" directory under wherever your Java Runtime Environment (JRE) is installed.</p>\n\n<p>On Windows, it would be something like this:</p>\n\n<pre><code>C:\\Program Files\\Java\\j2re1.4.2_12\\lib\n</code></pre>\n\n<p>In there, you should see files like <code>rt.jar</code> which contains the core Java classes and <code>charsets.jar</code> which contains many of the extended encoding support for EBCDIC and the CJK languages.</p>\n\n<p>In a parallel <code>bin</code> directory are the executables for Java and related utilities.</p>\n\n<p>If you've installed the Java Development Kit (JDK), in the directory above where you find the libs you will probably find a <code>src.jar</code> file. This can be unpacked either with the <code>jar.exe</code> utility, or with a standard <em>zip</em>-style tool, and contains the Java sources to the standard class library.</p>\n\n<p>Some of Java, such as the virtual machine itself, is machine-specific, and will be part of some of the DLL's or EXE's present.</p>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1249601681,"creation_date":1249601681,"answer_id":1242097,"question_id":1240387,"body_markdown":"My JDK 1.6.0_13 has a src.zip containing all the source code.  Give that a look.\r\n\r\n","title":"Where are the Java System Packages stored?","body":"<p>My JDK 1.6.0_13 has a src.zip containing all the source code.  Give that a look.</p>\n"},{"tags":[],"owner":{"account_id":3949260,"reputation":1019,"user_id":3260410,"display_name":"Venkataswamy"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1391483389,"creation_date":1391483389,"answer_id":21542271,"question_id":1240387,"body_markdown":"**Windows:**\r\n\r\nFor compressed compiled java packages( Java Class Library, JCL): program files/java/jdk/jre/lib/rt.jar\r\n\r\nFor source of packages: program files/java/jdk/src.zip\r\n\r\nwe can use any unzipping software to look into them. ","title":"Where are the Java System Packages stored?","body":"<p><strong>Windows:</strong></p>\n\n<p>For compressed compiled java packages( Java Class Library, JCL): program files/java/jdk/jre/lib/rt.jar</p>\n\n<p>For source of packages: program files/java/jdk/src.zip</p>\n\n<p>we can use any unzipping software to look into them. </p>\n"},{"comments":[{"owner":{"account_id":14019908,"reputation":73,"user_id":10126356,"display_name":"Anuj Mittal"},"score":0,"creation_date":1653973502,"post_id":53897006,"comment_id":127974290,"body_markdown":"How to call this in python? , we have a python script where we used rt.jar, now after upgrading java we are facing errors","body":"How to call this in python? , we have a python script where we used rt.jar, now after upgrading java we are facing errors"}],"tags":[],"owner":{"account_id":2027945,"reputation":4954,"user_id":1812434,"accept_rate":57,"display_name":"Venkata Raju"},"comment_count":1,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1591892696,"creation_date":1545493002,"answer_id":53897006,"question_id":1240387,"body_markdown":"From Java 9 onwards `rt.jar` was [removed](http://openjdk.java.net/jeps/220)\r\n\r\n&gt; The class and resource files previously stored in `lib/rt.jar`, `lib/tools.jar`, `lib/dt.jar`, and various other internal JAR files are now stored in a more efficient format in implementation-specific files in the lib directory. The format of these files is not specified and is subject to change without notice.\r\n\r\nThe System class files can now be accessed as shown below\r\n\r\n    FileSystem fs = FileSystems.getFileSystem(URI.create(&quot;jrt:/&quot;));\r\n\tPath objClassFilePath = fs.getPath(&quot;modules&quot;, &quot;java.base&quot;, &quot;java/lang/Object.class&quot;);","title":"Where are the Java System Packages stored?","body":"<p>From Java 9 onwards <code>rt.jar</code> was <a href=\"http://openjdk.java.net/jeps/220\" rel=\"noreferrer\">removed</a></p>\n\n<blockquote>\n  <p>The class and resource files previously stored in <code>lib/rt.jar</code>, <code>lib/tools.jar</code>, <code>lib/dt.jar</code>, and various other internal JAR files are now stored in a more efficient format in implementation-specific files in the lib directory. The format of these files is not specified and is subject to change without notice.</p>\n</blockquote>\n\n<p>The System class files can now be accessed as shown below</p>\n\n<pre><code>FileSystem fs = FileSystems.getFileSystem(URI.create(\"jrt:/\"));\nPath objClassFilePath = fs.getPath(\"modules\", \"java.base\", \"java/lang/Object.class\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11897465,"reputation":23,"user_id":8706420,"display_name":"Rahul Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1565248724,"creation_date":1565248724,"answer_id":57407176,"question_id":1240387,"body_markdown":"As answered by @VenkataRaju i would like to put 2 more points that \r\n\r\n 1. we have ./bin, ./conf, ./include, ./jmods, ./legal, ./lib\r\n 2. we can see all the classlist in ./lib/classlist and ./lib/src.jar\r\n in java 11\r\n","title":"Where are the Java System Packages stored?","body":"<p>As answered by @VenkataRaju i would like to put 2 more points that </p>\n\n<ol>\n<li>we have ./bin, ./conf, ./include, ./jmods, ./legal, ./lib</li>\n<li>we can see all the classlist in ./lib/classlist and ./lib/src.jar\nin java 11</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15191583,"reputation":551,"user_id":10962180,"display_name":"Levon Minasian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657696963,"creation_date":1657696963,"answer_id":72962376,"question_id":1240387,"body_markdown":"`rt.jar` is removed since Java 9. So, to find sources of JCL you should:\r\n```\r\nsudo find / -name java.base\r\n```","title":"Where are the Java System Packages stored?","body":"<p><code>rt.jar</code> is removed since Java 9. So, to find sources of JCL you should:</p>\n<pre><code>sudo find / -name java.base\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28650798,"reputation":1,"user_id":21937801,"display_name":"Manoranjan Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684725225,"creation_date":1684725225,"answer_id":76302834,"question_id":1240387,"body_markdown":"In a JDK version 18.0.1.1, all packages are present in the jrt-fs.jar file.\r\n\r\n\r\npath:- jdk-18.0.1.1\\lib\\jrt-fs.jar.\r\n\r\ninside this jrt-fs.jar file, all pre-defined classes are present in the package path like java\\io for java.io, java\\lang for java.lang, java\\util for java.util, java\\sql for java.sql etc..","title":"Where are the Java System Packages stored?","body":"<p>In a JDK version 18.0.1.1, all packages are present in the jrt-fs.jar file.</p>\n<p>path:- jdk-18.0.1.1\\lib\\jrt-fs.jar.</p>\n<p>inside this jrt-fs.jar file, all pre-defined classes are present in the package path like java\\io for java.io, java\\lang for java.lang, java\\util for java.util, java\\sql for java.sql etc..</p>\n"}],"owner":{"account_id":50331,"reputation":910,"user_id":150110,"accept_rate":36,"display_name":"asb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75093,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"answer_count":9,"score":23,"last_activity_date":1684725225,"creation_date":1249580576,"question_id":1240387,"body_markdown":"I want to see all the java packages. Where are the packages stored in my machine? Can anyone help. I did search in jdk folder and found awt.dll and all. But its only a few. Can i see all of them?","title":"Where are the Java System Packages stored?","body":"<p>I want to see all the java packages. Where are the packages stored in my machine? Can anyone help. I did search in jdk folder and found awt.dll and all. But its only a few. Can i see all of them?</p>\n"},{"tags":["java","list","search","contains"],"comments":[{"owner":{"account_id":218057,"reputation":67738,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":0,"creation_date":1379426772,"post_id":18852059,"comment_id":27815218,"body_markdown":"Your stated goal and your code example don&#39;t seem to match. Do you want to compare the objects only on the basis of one field value?","body":"Your stated goal and your code example don&#39;t seem to match. Do you want to compare the objects only on the basis of one field value?"},{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":1,"creation_date":1379426779,"post_id":18852059,"comment_id":27815224,"body_markdown":"Override the `equals(Object)` method of your custom object?","body":"Override the <code>equals(Object)</code> method of your custom object?"},{"owner":{"account_id":446208,"reputation":8611,"user_id":839128,"accept_rate":75,"display_name":"MikeFHay"},"score":1,"creation_date":1379431229,"post_id":18852059,"comment_id":27818186,"body_markdown":"`for(Person p:list) if (p.getName().equals(&quot;John&quot;) return true; return false;`\nYou won&#39;t find a more concise way in Java I&#39;m afraid.","body":"<code>for(Person p:list) if (p.getName().equals(&quot;John&quot;) return true; return false;</code> You won&#39;t find a more concise way in Java I&#39;m afraid."},{"owner":{"account_id":446208,"reputation":8611,"user_id":839128,"accept_rate":75,"display_name":"MikeFHay"},"score":0,"creation_date":1424793822,"post_id":18852059,"comment_id":45691150,"body_markdown":"@Rajdeep sorry, I don&#39;t understand your question. `p.equals(p)` _should_ always be true, so I&#39;m confused what you&#39;re trying to achieve. Hopefully if you [ask a new question](http://stackoverflow.com/questions/ask) you can get better help.","body":"@Rajdeep sorry, I don&#39;t understand your question. <code>p.equals(p)</code> <i>should</i> always be true, so I&#39;m confused what you&#39;re trying to achieve. Hopefully if you <a href=\"http://stackoverflow.com/questions/ask\">ask a new question</a> you can get better help."}],"answers":[{"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":3,"creation_date":1379426969,"post_id":18852137,"comment_id":27815357,"body_markdown":"Unless the setter returns `this`.","body":"Unless the setter returns <code>this</code>."},{"owner":{"account_id":2510282,"reputation":12462,"user_id":2182928,"accept_rate":97,"display_name":"Rudi Kershaw"},"score":0,"creation_date":1379427404,"post_id":18852137,"comment_id":27815669,"body_markdown":"So, if I override the equals method of the custom Objects being added to the list... can I get it to just return true if certain class variables are the same?","body":"So, if I override the equals method of the custom Objects being added to the list... can I get it to just return true if certain class variables are the same?"},{"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"score":0,"creation_date":1379427509,"post_id":18852137,"comment_id":27815748,"body_markdown":"@RudiKershaw Yes that is the idea, you can return true on the basis of one/two/all fields. So if you believe it is logically correct to say that two objects with same name are equal objects then return true by just comapring the names.","body":"@RudiKershaw Yes that is the idea, you can return true on the basis of one/two/all fields. So if you believe it is logically correct to say that two objects with same name are equal objects then return true by just comapring the names."},{"owner":{"account_id":446208,"reputation":8611,"user_id":839128,"accept_rate":75,"display_name":"MikeFHay"},"score":2,"creation_date":1379430357,"post_id":18852137,"comment_id":27817636,"body_markdown":"It&#39;s really not advisable to override `equals` for a single use case, unless it makes sense for the class in general. You&#39;d be much better off just writing the loop.","body":"It&#39;s really not advisable to override <code>equals</code> for a single use case, unless it makes sense for the class in general. You&#39;d be much better off just writing the loop."},{"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"score":0,"creation_date":1379430942,"post_id":18852137,"comment_id":27818014,"body_markdown":"@MikeFHay agreed, thats why i mentioned in the comment &quot;So if you believe it is logically correct to say that two objects with same name are equal objects then return true&quot;","body":"@MikeFHay agreed, thats why i mentioned in the comment &quot;So if you believe it is logically correct to say that two objects with same name are equal objects then return true&quot;"}],"tags":[],"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"comment_count":5,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1379426787,"creation_date":1379426787,"answer_id":18852137,"question_id":18852059,"body_markdown":"`contains` method uses `equals` internally. So you need to override the `equals` method for your class as per your need.\r\n\r\nBtw this does not look syntatically correct: \r\n\r\n    new Object().setName(&quot;John&quot;)","title":"Java List.contains(Object with field value equal to x)","body":"<p><code>contains</code> method uses <code>equals</code> internally. So you need to override the <code>equals</code> method for your class as per your need.</p>\n\n<p>Btw this does not look syntatically correct: </p>\n\n<pre><code>new Object().setName(\"John\")\n</code></pre>\n"},{"comments":[{"owner":{"account_id":446208,"reputation":8611,"user_id":839128,"accept_rate":75,"display_name":"MikeFHay"},"score":1,"creation_date":1379427148,"post_id":18852162,"comment_id":27815476,"body_markdown":"Alternatively you could use `Iterables.any(list, predicate)`, which is practically the same, and you may or may not prefer it stylistically.","body":"Alternatively you could use <code>Iterables.any(list, predicate)</code>, which is practically the same, and you may or may not prefer it stylistically."},{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":0,"creation_date":1379427384,"post_id":18852162,"comment_id":27815661,"body_markdown":"@EricJablow Yup. :) You could look at my solution.","body":"@EricJablow Yup. :) You could look at my solution."}],"tags":[],"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"comment_count":2,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1453171211,"creation_date":1379426838,"answer_id":18852162,"question_id":18852059,"body_markdown":"# Google Guava\r\n\r\nIf you&#39;re using [Guava][1], you can take a functional approach and do the following\r\n\r\n    FluentIterable.from(list).find(new Predicate&lt;MyObject&gt;() {\r\n       public boolean apply(MyObject input) {\r\n          return &quot;John&quot;.equals(input.getName());\r\n       }\r\n    }).Any();\r\n\r\nwhich looks a little verbose. However the predicate is an object and you can provide different variants for different searches. Note how the library itself separates the iteration of the collection and the function you wish to apply. You don&#39;t have to override `equals()` for a particular behaviour.\r\n\r\nAs noted below, the [java.util.Stream](http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html) framework built into Java 8 and later provides something similar.\r\n\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/","title":"Java List.contains(Object with field value equal to x)","body":"<h1>Google Guava</h1>\n\n<p>If you're using <a href=\"http://code.google.com/p/guava-libraries/\">Guava</a>, you can take a functional approach and do the following</p>\n\n<pre><code>FluentIterable.from(list).find(new Predicate&lt;MyObject&gt;() {\n   public boolean apply(MyObject input) {\n      return \"John\".equals(input.getName());\n   }\n}).Any();\n</code></pre>\n\n<p>which looks a little verbose. However the predicate is an object and you can provide different variants for different searches. Note how the library itself separates the iteration of the collection and the function you wish to apply. You don't have to override <code>equals()</code> for a particular behaviour.</p>\n\n<p>As noted below, the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\">java.util.Stream</a> framework built into Java 8 and later provides something similar.</p>\n"},{"comments":[{"owner":{"account_id":2510282,"reputation":12462,"user_id":2182928,"accept_rate":97,"display_name":"Rudi Kershaw"},"score":0,"creation_date":1379427160,"post_id":18852245,"comment_id":27815486,"body_markdown":"So, if I override the equals method of the custom Objects being added to the list... can I get it to just return true if certain class variables are the same?","body":"So, if I override the equals method of the custom Objects being added to the list... can I get it to just return true if certain class variables are the same?"},{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":1,"creation_date":1379427610,"post_id":18852245,"comment_id":27815815,"body_markdown":"No, the idea behind `equals()` is very limited. It means to check for &quot;object identity&quot; - whatever that might mean for some class of objects. If you added a flag which fields should be included, that could cause all kinds of trouble. I strongly advise against it.","body":"No, the idea behind <code>equals()</code> is very limited. It means to check for &quot;object identity&quot; - whatever that might mean for some class of objects. If you added a flag which fields should be included, that could cause all kinds of trouble. I strongly advise against it."},{"owner":{"account_id":2856333,"reputation":666,"user_id":2452531,"accept_rate":10,"display_name":"ken"},"score":0,"creation_date":1467982713,"post_id":18852245,"comment_id":63954010,"body_markdown":"Love groovy, so the &quot;new&quot; Java 8 Lambda really don&#39;t give us this coolness still?  `def result = list.find{ it.name == &#39;John&#39; }` Oracle/JCP should be sued for war crimes against programmers.","body":"Love groovy, so the &quot;new&quot; Java 8 Lambda really don&#39;t give us this coolness still?  <code>def result = list.find{ it.name == &#39;John&#39; }</code> Oracle/JCP should be sued for war crimes against programmers."}],"tags":[],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":3,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1467983788,"creation_date":1379427060,"answer_id":18852245,"question_id":18852059,"body_markdown":"`Collection.contains()` is implemented by calling `equals()` on each object until one returns `true`.\r\n\r\nSo one way to implement this is to override `equals()` but of course, you can only have one equals.\r\n\r\nFrameworks like [Guava][1] therefore use predicates for this. With `Iterables.find(list, predicate)`, you can search for arbitrary fields by putting the test into the predicate.\r\n\r\nOther languages built on top of the VM have this built in. In [Groovy][2], for example, you simply write:\r\n\r\n    def result = list.find{ it.name == &#39;John&#39; }\r\n\r\nJava 8 made all our lives easier, too:\r\n\r\n    List&lt;Foo&gt; result = list.stream()\r\n        .filter(it -&gt; &quot;John&quot;.equals(it.getName())\r\n        .collect(Collectors.toList());\r\n\r\nIf you care about things like this, I suggest the book &quot;Beyond Java&quot;. It contains many examples for the numerous shortcomings of Java and how other languages do better.\r\n\r\n  [1]: https://code.google.com/p/guava-libraries/\r\n  [2]: http://groovy.codehaus.org/","title":"Java List.contains(Object with field value equal to x)","body":"<p><code>Collection.contains()</code> is implemented by calling <code>equals()</code> on each object until one returns <code>true</code>.</p>\n\n<p>So one way to implement this is to override <code>equals()</code> but of course, you can only have one equals.</p>\n\n<p>Frameworks like <a href=\"https://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a> therefore use predicates for this. With <code>Iterables.find(list, predicate)</code>, you can search for arbitrary fields by putting the test into the predicate.</p>\n\n<p>Other languages built on top of the VM have this built in. In <a href=\"http://groovy.codehaus.org/\" rel=\"noreferrer\">Groovy</a>, for example, you simply write:</p>\n\n<pre><code>def result = list.find{ it.name == 'John' }\n</code></pre>\n\n<p>Java 8 made all our lives easier, too:</p>\n\n<pre><code>List&lt;Foo&gt; result = list.stream()\n    .filter(it -&gt; \"John\".equals(it.getName())\n    .collect(Collectors.toList());\n</code></pre>\n\n<p>If you care about things like this, I suggest the book \"Beyond Java\". It contains many examples for the numerous shortcomings of Java and how other languages do better.</p>\n"},{"comments":[{"owner":{"account_id":2316842,"reputation":7874,"user_id":2033703,"display_name":"Eric Jablow"},"score":2,"creation_date":1379428120,"post_id":18852327,"comment_id":27816174,"body_markdown":"Then, the second example should be `public boolean`. Also, you might want to use `Objects.equals()` in case `o.getName()` can be `null`.","body":"Then, the second example should be <code>public boolean</code>. Also, you might want to use <code>Objects.equals()</code> in case <code>o.getName()</code> can be <code>null</code>."},{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":0,"creation_date":1379428467,"post_id":18852327,"comment_id":27816387,"body_markdown":"@EricJablow Right, I just copied and pasted after writing the `perform` method. Also, there&#39;s a fairly large chance that it will never be `null`. Have you noticed that no other answers perform a `null` check? Or are you just pointing it out to me?","body":"@EricJablow Right, I just copied and pasted after writing the <code>perform</code> method. Also, there&#39;s a fairly large chance that it will never be <code>null</code>. Have you noticed that no other answers perform a <code>null</code> check? Or are you just pointing it out to me?"},{"owner":{"account_id":2316842,"reputation":7874,"user_id":2033703,"display_name":"Eric Jablow"},"score":1,"creation_date":1379433797,"post_id":18852327,"comment_id":27819788,"body_markdown":"I&#39;m just a paranoid programmer.  I&#39;ve dealt with projects where people were fast and loose with nulls, so I tend to be defensive.  Far better to ensure items not be null, ever.","body":"I&#39;m just a paranoid programmer.  I&#39;ve dealt with projects where people were fast and loose with nulls, so I tend to be defensive.  Far better to ensure items not be null, ever."},{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":5,"creation_date":1379451213,"post_id":18852327,"comment_id":27829315,"body_markdown":"@EricJablow Perhaps you should comment on **ALL** of the answers that don&#39;t perform `null` checks, as opposed to just one (mine).","body":"@EricJablow Perhaps you should comment on <b>ALL</b> of the answers that don&#39;t perform <code>null</code> checks, as opposed to just one (mine)."},{"owner":{"account_id":1047596,"reputation":9325,"user_id":1052284,"accept_rate":44,"display_name":"Mark Jeronimus"},"score":0,"creation_date":1461693836,"post_id":18852327,"comment_id":61311612,"body_markdown":"The first one is more flexible. You can return the found object with the name if you replace `isPresent()` with `.orElse(null)`","body":"The first one is more flexible. You can return the found object with the name if you replace <code>isPresent()</code> with <code>.orElse(null)</code>"},{"owner":{"account_id":3040009,"reputation":311,"user_id":2577276,"display_name":"MK10"},"score":79,"creation_date":1474560641,"post_id":18852327,"comment_id":66591395,"body_markdown":"Even shorter and easier to understand:\n\n```return list.stream().anyMatch(o -&gt; o.getName().equals(name));```","body":"Even shorter and easier to understand:  <code>return list.stream().anyMatch(o -&gt; o.getName().equals(name));</code>"},{"owner":{"account_id":411443,"reputation":1215,"user_id":783887,"display_name":"tobijdc"},"score":4,"creation_date":1474894647,"post_id":18852327,"comment_id":66705061,"body_markdown":"I aggree with @MK10 but i would use `java.util.Objects` for nullsafe comparison\n`return list.stream().anyMatch(o -&gt; Objects.euqals(o.getName(), name);` If you want to check objects in stream for null, you can add a `.filter(Objects::nonNull)` before anyMatch.","body":"I aggree with @MK10 but i would use <code>java.util.Objects</code> for nullsafe comparison <code>return list.stream().anyMatch(o -&gt; Objects.euqals(o.getName(), name);</code> If you want to check objects in stream for null, you can add a <code>.filter(Objects::nonNull)</code> before anyMatch."},{"owner":{"account_id":2120368,"reputation":425,"user_id":5097395,"accept_rate":39,"display_name":"karlihnos"},"score":0,"creation_date":1512574504,"post_id":18852327,"comment_id":82314978,"body_markdown":"Can you pls explain me what type of magic in that :) ? How can the void method &quot;perfom&quot; return something?","body":"Can you pls explain me what type of magic in that :) ? How can the void method &quot;perfom&quot; return something?"},{"owner":{"account_id":2928505,"reputation":2489,"user_id":2561119,"accept_rate":89,"display_name":"GabrielBB"},"score":1,"creation_date":1540230426,"post_id":18852327,"comment_id":92779139,"body_markdown":"I can&#39;t believe this answer has so many points. Stream.anyMatch method does the work","body":"I can&#39;t believe this answer has so many points. Stream.anyMatch method does the work"},{"owner":{"account_id":379606,"reputation":5664,"user_id":733092,"accept_rate":86,"display_name":"Noumenon"},"score":0,"creation_date":1581980315,"post_id":18852327,"comment_id":106611351,"body_markdown":"I copied this answer and even my static linter realized I should just replace it with `anyMatch`. I wonder if the correct answer will ever reach the top, given it has just 20 votes in 2020.","body":"I copied this answer and even my static linter realized I should just replace it with <code>anyMatch</code>. I wonder if the correct answer will ever reach the top, given it has just 20 votes in 2020."},{"owner":{"account_id":13210522,"reputation":414,"user_id":9540910,"display_name":"Collin"},"score":0,"creation_date":1645050687,"post_id":18852327,"comment_id":125771136,"body_markdown":"If you wanted to do &quot;contains()&quot; to see if an object is in a list, but wanted to skip checking one particular field (like the date modified of a file), how would you do that?","body":"If you wanted to do &quot;contains()&quot; to see if an object is in a list, but wanted to skip checking one particular field (like the date modified of a file), how would you do that?"},{"owner":{"account_id":9795789,"reputation":513,"user_id":7258885,"display_name":"qleoz12"},"score":0,"creation_date":1672091064,"post_id":18852327,"comment_id":132220259,"body_markdown":"@MK10 how check match for 2  conditions for objects stream, im just want to validate if stream contains 2 object tha each fill one of the 2 confitions, actually Im doing 2 stream validation, but its posible to do in just 1","body":"@MK10 how check match for 2  conditions for objects stream, im just want to validate if stream contains 2 object tha each fill one of the 2 confitions, actually Im doing 2 stream validation, but its posible to do in just 1"}],"tags":[],"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"comment_count":12,"down_vote_count":1,"up_vote_count":395,"is_accepted":true,"score":394,"last_activity_date":1662384460,"creation_date":1379427318,"answer_id":18852327,"question_id":18852059,"body_markdown":"# Streams\r\n\r\nIf you are using Java 8, perhaps you could try something like this:\r\n\r\n    public boolean containsName(final List&lt;MyObject&gt; list, final String name){\r\n        return list.stream().filter(o -&gt; o.getName().equals(name)).findFirst().isPresent();\r\n    }\r\n\r\nOr alternatively, you could try something like this:\r\n\r\n    public boolean containsName(final List&lt;MyObject&gt; list, final String name){\r\n        return list.stream().map(MyObject::getName).filter(name::equals).findFirst().isPresent();\r\n    }\r\n\r\nThis method will return `true` if the `List&lt;MyObject&gt;` contains a `MyObject` with the name `name`. If you want to perform an operation on each of the `MyObject`s that `getName().equals(name)`, then you could try something like this:\r\n\r\n    public void perform(final List&lt;MyObject&gt; list, final String name){\r\n        list.stream().filter(o -&gt; o.getName().equals(name)).forEach(\r\n                o -&gt; {\r\n                    //...\r\n                }\r\n        );\r\n    }\r\n\r\nWhere `o` represents a `MyObject` instance.\r\n\r\nAlternatively, as the comments suggest (Thanks MK10), you could use the `Stream#anyMatch` method:\r\n\r\n    public boolean containsName(final List&lt;MyObject&gt; list, final String name){\r\n        return list.stream().anyMatch(o -&gt; name.equals(o.getName()));\r\n    }","title":"Java List.contains(Object with field value equal to x)","body":"<h1>Streams</h1>\n<p>If you are using Java 8, perhaps you could try something like this:</p>\n<pre><code>public boolean containsName(final List&lt;MyObject&gt; list, final String name){\n    return list.stream().filter(o -&gt; o.getName().equals(name)).findFirst().isPresent();\n}\n</code></pre>\n<p>Or alternatively, you could try something like this:</p>\n<pre><code>public boolean containsName(final List&lt;MyObject&gt; list, final String name){\n    return list.stream().map(MyObject::getName).filter(name::equals).findFirst().isPresent();\n}\n</code></pre>\n<p>This method will return <code>true</code> if the <code>List&lt;MyObject&gt;</code> contains a <code>MyObject</code> with the name <code>name</code>. If you want to perform an operation on each of the <code>MyObject</code>s that <code>getName().equals(name)</code>, then you could try something like this:</p>\n<pre><code>public void perform(final List&lt;MyObject&gt; list, final String name){\n    list.stream().filter(o -&gt; o.getName().equals(name)).forEach(\n            o -&gt; {\n                //...\n            }\n    );\n}\n</code></pre>\n<p>Where <code>o</code> represents a <code>MyObject</code> instance.</p>\n<p>Alternatively, as the comments suggest (Thanks MK10), you could use the <code>Stream#anyMatch</code> method:</p>\n<pre><code>public boolean containsName(final List&lt;MyObject&gt; list, final String name){\n    return list.stream().anyMatch(o -&gt; name.equals(o.getName()));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":80866,"reputation":11667,"user_id":228369,"accept_rate":79,"display_name":"chrismarx"},"score":0,"creation_date":1409840982,"post_id":18852332,"comment_id":40112205,"body_markdown":"This is a great solution for small projects that don&#39;t want to use guava. One question though, the docs on binarySearch state that: &quot;The list must be sorted into ascending order according to the specified comparator, prior to making this call. If it is not sorted, the results are undefined&quot;. But in seems in some cases, depending on what&#39;s being compared, this might not be the case?","body":"This is a great solution for small projects that don&#39;t want to use guava. One question though, the docs on binarySearch state that: &quot;The list must be sorted into ascending order according to the specified comparator, prior to making this call. If it is not sorted, the results are undefined&quot;. But in seems in some cases, depending on what&#39;s being compared, this might not be the case?"},{"owner":{"account_id":3323930,"reputation":967,"user_id":2794395,"display_name":"fiorentinoing"},"score":0,"creation_date":1479389705,"post_id":18852332,"comment_id":68543562,"body_markdown":"and the negative number represents where the object will be inserted if you add it and re-sort.","body":"and the negative number represents where the object will be inserted if you add it and re-sort."}],"tags":[],"owner":{"account_id":1712852,"reputation":10572,"user_id":1570523,"display_name":"Debojit Saikia"},"comment_count":2,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1453170799,"creation_date":1379427348,"answer_id":18852332,"question_id":18852059,"body_markdown":"# Binary Search\r\n\r\nYou can use [Collections.binarySearch][1] to search an element in your list (assuming the list is sorted):\r\n\r\n    Collections.binarySearch(list, new YourObject(&quot;a1&quot;, &quot;b&quot;,\r\n    \t\t\t\t&quot;c&quot;), new Comparator&lt;YourObject&gt;() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic int compare(YourObject o1, YourObject o2) {\r\n    \t\t\t\treturn o1.getName().compareTo(o2.getName());\r\n    \t\t\t}\r\n    \t\t});\r\n\r\nwhich will return a negative number if the object is not present in the collection or else it will return the `index` of the object. With this you can search for objects with different searching strategies.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#binarySearch(java.util.List,%20T,%20java.util.Comparator)","title":"Java List.contains(Object with field value equal to x)","body":"<h1>Binary Search</h1>\n\n<p>You can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#binarySearch(java.util.List,%20T,%20java.util.Comparator)\" rel=\"noreferrer\">Collections.binarySearch</a> to search an element in your list (assuming the list is sorted):</p>\n\n<pre><code>Collections.binarySearch(list, new YourObject(\"a1\", \"b\",\n                \"c\"), new Comparator&lt;YourObject&gt;() {\n\n            @Override\n            public int compare(YourObject o1, YourObject o2) {\n                return o1.getName().compareTo(o2.getName());\n            }\n        });\n</code></pre>\n\n<p>which will return a negative number if the object is not present in the collection or else it will return the <code>index</code> of the object. With this you can search for objects with different searching strategies.</p>\n"},{"comments":[{"owner":{"account_id":5269973,"reputation":92,"user_id":4208564,"display_name":"op_"},"score":0,"creation_date":1580996024,"post_id":18852968,"comment_id":106287331,"body_markdown":"I think you forgot brackets for getter in  if(o != null &amp;&amp; o.getLocation.equals(location))","body":"I think you forgot brackets for getter in  if(o != null &amp;&amp; o.getLocation.equals(location))"}],"tags":[],"owner":{"account_id":1708399,"reputation":8104,"user_id":1566990,"accept_rate":67,"display_name":"James Dunn"},"comment_count":1,"down_vote_count":2,"up_vote_count":87,"is_accepted":false,"score":85,"last_activity_date":1379431216,"creation_date":1379429068,"answer_id":18852968,"question_id":18852059,"body_markdown":"&lt;p&gt;&lt;b&gt;You have two choices.&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;1.  The first choice, which is preferable, is to override the `equals()` method in your Object class.&lt;/p&gt;\r\n&lt;p&gt;Let&#39;s say, for example, you have this Object class:&lt;/p&gt;\r\n\r\n    public class MyObject {\r\n        private String name;\r\n        private String location;\r\n        //getters and setters\r\n    }\r\n&lt;p&gt;Now let&#39;s say you only care about the MyObject&#39;s name, that it should be unique so if two `MyObject`s have the same name they should be considered equal.  In that case, you would want to override the `equals()` method (and also the `hashcode()` method) so that it compares the names to determine equality.&lt;/p&gt;\r\n&lt;p&gt;Once you&#39;ve done this, you can check to see if a Collection contains a MyObject with the name &quot;foo&quot; by like so:&lt;/p&gt;\r\n\r\n    MyObject object = new MyObject();\r\n    object.setName(&quot;foo&quot;);\r\n    collection.contains(object);\r\n\r\n&lt;p&gt;However, this might not be an option for you if:&lt;/p&gt;\r\n&lt;ul&gt;\r\n&lt;li&gt;You are using both the name and location to check for equality, but you only want to check if a Collection has any `MyObject`s with a certain location.  In this case, you&#39;ve already overridden `equals()`.&lt;/li&gt;\r\n&lt;li&gt;`MyObject` is part of an API that you don&#39;t have liberty to change.&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;i&gt;If either of these are the case, you&#39;ll want option 2:&lt;/i&gt;\r\n&lt;p&gt;2.  Write your own utility method:&lt;/p&gt;\r\n\r\n    public static boolean containsLocation(Collection&lt;MyObject&gt; c, String location) {\r\n        for(MyObject o : c) {\r\n            if(o != null &amp;&amp; o.getLocation.equals(location)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n&lt;p&gt;Alternatively, you could extend ArrayList&lt;MyObject&gt; (or some other collection) and then add your own method to it:&lt;/p&gt;\r\n\r\n    public boolean containsLocation(String location) {\r\n        for(MyObject o : this) {\r\n            if(o != null &amp;&amp; o.getLocation.equals(location)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n            \r\n&lt;p&gt;Unfortunately there&#39;s not a better way around it.&lt;/p&gt;\r\n\r\n","title":"Java List.contains(Object with field value equal to x)","body":"<p><b>You have two choices.</b></p>\n\n<p>1.  The first choice, which is preferable, is to override the `equals()` method in your Object class.</p>\n\n<p>Let's say, for example, you have this Object class:</p>\n\n<pre><code>public class MyObject {\n    private String name;\n    private String location;\n    //getters and setters\n}\n</code></pre>\n\n<p>Now let's say you only care about the MyObject's name, that it should be unique so if two `MyObject`s have the same name they should be considered equal.  In that case, you would want to override the `equals()` method (and also the `hashcode()` method) so that it compares the names to determine equality.</p>\n\n<p>Once you've done this, you can check to see if a Collection contains a MyObject with the name \"foo\" by like so:</p>\n\n<pre><code>MyObject object = new MyObject();\nobject.setName(\"foo\");\ncollection.contains(object);\n</code></pre>\n\n<p>However, this might not be an option for you if:</p>\n\n<ul>\n<li>You are using both the name and location to check for equality, but you only want to check if a Collection has any `MyObject`s with a certain location.  In this case, you've already overridden `equals()`.</li>\n<li>`MyObject` is part of an API that you don't have liberty to change.</li>\n</ul>\n\n<p><i>If either of these are the case, you'll want option 2:</i></p>\n\n<p>2.  Write your own utility method:</p>\n\n<pre><code>public static boolean containsLocation(Collection&lt;MyObject&gt; c, String location) {\n    for(MyObject o : c) {\n        if(o != null &amp;&amp; o.getLocation.equals(location)) {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>Alternatively, you could extend ArrayList (or some other collection) and then add your own method to it:</p>\n\n<pre><code>public boolean containsLocation(String location) {\n    for(MyObject o : this) {\n        if(o != null &amp;&amp; o.getLocation.equals(location)) {\n                return true;\n            }\n        }\n        return false;\n    }\n</code></pre>\n\n<p>Unfortunately there's not a better way around it.</p>\n"},{"tags":[],"owner":{"account_id":12059,"reputation":26552,"user_id":23572,"accept_rate":63,"display_name":"Craig P. Motlin"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1453208336,"creation_date":1379443982,"answer_id":18857682,"question_id":18852059,"body_markdown":"# Eclipse Collections\r\n\r\nIf you&#39;re using [Eclipse Collections][1], you can use the `anySatisfy()` method. Either adapt your `List` in a `ListAdapter` or change your `List` into a `ListIterable` if possible.\r\n\r\n    ListIterable&lt;MyObject&gt; list = ...;\r\n\r\n    boolean result =\r\n        list.anySatisfy(myObject -&gt; myObject.getName().equals(&quot;John&quot;));\r\n\r\nIf you&#39;ll do operations like this frequently, it&#39;s better to extract a method which answers whether the type has the attribute.\r\n\r\n    public class MyObject\r\n    {\r\n        private final String name;\r\n    \r\n        public MyObject(String name)\r\n        {\r\n            this.name = name;\r\n        }\r\n        \r\n        public boolean named(String name)\r\n        {\r\n            return Objects.equals(this.name, name);\r\n        }\r\n    }\r\n\r\nYou can use the alternate form `anySatisfyWith()` together with a method reference.\r\n\r\n    boolean result = list.anySatisfyWith(MyObject::named, &quot;John&quot;);\r\n\r\nIf you cannot change your `List` into a `ListIterable`, here&#39;s how you&#39;d use `ListAdapter`.\r\n\r\n    boolean result = \r\n        ListAdapter.adapt(list).anySatisfyWith(MyObject::named, &quot;John&quot;);\r\n\r\nNote: I am a committer for Eclipse ollections.\r\n\r\n\r\n  [1]: https://github.com/eclipse/eclipse-collections","title":"Java List.contains(Object with field value equal to x)","body":"<h1>Eclipse Collections</h1>\n\n<p>If you're using <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow\">Eclipse Collections</a>, you can use the <code>anySatisfy()</code> method. Either adapt your <code>List</code> in a <code>ListAdapter</code> or change your <code>List</code> into a <code>ListIterable</code> if possible.</p>\n\n<pre><code>ListIterable&lt;MyObject&gt; list = ...;\n\nboolean result =\n    list.anySatisfy(myObject -&gt; myObject.getName().equals(\"John\"));\n</code></pre>\n\n<p>If you'll do operations like this frequently, it's better to extract a method which answers whether the type has the attribute.</p>\n\n<pre><code>public class MyObject\n{\n    private final String name;\n\n    public MyObject(String name)\n    {\n        this.name = name;\n    }\n\n    public boolean named(String name)\n    {\n        return Objects.equals(this.name, name);\n    }\n}\n</code></pre>\n\n<p>You can use the alternate form <code>anySatisfyWith()</code> together with a method reference.</p>\n\n<pre><code>boolean result = list.anySatisfyWith(MyObject::named, \"John\");\n</code></pre>\n\n<p>If you cannot change your <code>List</code> into a <code>ListIterable</code>, here's how you'd use <code>ListAdapter</code>.</p>\n\n<pre><code>boolean result = \n    ListAdapter.adapt(list).anySatisfyWith(MyObject::named, \"John\");\n</code></pre>\n\n<p>Note: I am a committer for Eclipse ollections.</p>\n"},{"tags":[],"owner":{"account_id":2141855,"reputation":211,"user_id":1900307,"display_name":"Magda"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442406255,"creation_date":1442405199,"answer_id":32608149,"question_id":18852059,"body_markdown":"If you need to perform this `List.contains(Object with field value equal to x)` repeatedly, a simple and efficient workaround would be:\r\n\r\n    List&lt;field obj type&gt; fieldOfInterestValues = new ArrayList&lt;field obj type&gt;;\r\n    for(Object obj : List) {\r\n        fieldOfInterestValues.add(obj.getFieldOfInterest());\r\n    }\r\n\r\nThen the `List.contains(Object with field value equal to x)` would be have the same result as `fieldOfInterestValues.contains(x);`","title":"Java List.contains(Object with field value equal to x)","body":"<p>If you need to perform this <code>List.contains(Object with field value equal to x)</code> repeatedly, a simple and efficient workaround would be:</p>\n\n<pre><code>List&lt;field obj type&gt; fieldOfInterestValues = new ArrayList&lt;field obj type&gt;;\nfor(Object obj : List) {\n    fieldOfInterestValues.add(obj.getFieldOfInterest());\n}\n</code></pre>\n\n<p>Then the <code>List.contains(Object with field value equal to x)</code> would be have the same result as <code>fieldOfInterestValues.contains(x);</code></p>\n"},{"tags":[],"owner":{"account_id":485835,"reputation":8478,"user_id":902383,"accept_rate":90,"display_name":"user902383"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1453170763,"creation_date":1442406064,"answer_id":32608461,"question_id":18852059,"body_markdown":"# `Predicate`\r\n\r\nIf you dont use Java 8, or library which gives you more functionality for dealing with collections, you could implement something which can be more reusable than your solution.\r\n\r\n    interface Predicate&lt;T&gt;{\r\n    \t\tboolean contains(T item);\r\n    \t}\r\n    \t\r\n    \tstatic class CollectionUtil{\r\n    \t\t\r\n    \t\tpublic static &lt;T&gt; T find(final Collection&lt;T&gt; collection,final  Predicate&lt;T&gt; predicate){\r\n    \t\t\tfor (T item : collection){\r\n    \t\t\t\tif (predicate.contains(item)){\r\n    \t\t\t\t\treturn item;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \t// and many more methods to deal with collection\t\r\n    \t}\r\n\r\ni&#39;m using something like that, i have predicate interface, and i&#39;m passing it implementation to my util class.\r\n\r\n What is advantage of doing this in my way? you have one method which deals with searching in any type collection. and you dont have to create separate methods if you want to search by different field. alll what you need to do is provide different predicate which can be destroyed as soon as it no longer usefull/\r\n\r\nif you want to use it, all what you need to do is call method and define tyour predicate\r\n\r\n    CollectionUtil.find(list, new Predicate&lt;MyObject&gt;{\r\n        public boolean contains(T item){\r\n            return &quot;John&quot;.equals(item.getName());\r\n         }\r\n    });","title":"Java List.contains(Object with field value equal to x)","body":"<h1><code>Predicate</code></h1>\n\n<p>If you dont use Java 8, or library which gives you more functionality for dealing with collections, you could implement something which can be more reusable than your solution.</p>\n\n<pre><code>interface Predicate&lt;T&gt;{\n        boolean contains(T item);\n    }\n\n    static class CollectionUtil{\n\n        public static &lt;T&gt; T find(final Collection&lt;T&gt; collection,final  Predicate&lt;T&gt; predicate){\n            for (T item : collection){\n                if (predicate.contains(item)){\n                    return item;\n                }\n            }\n            return null;\n        }\n    // and many more methods to deal with collection    \n    }\n</code></pre>\n\n<p>i'm using something like that, i have predicate interface, and i'm passing it implementation to my util class.</p>\n\n<p>What is advantage of doing this in my way? you have one method which deals with searching in any type collection. and you dont have to create separate methods if you want to search by different field. alll what you need to do is provide different predicate which can be destroyed as soon as it no longer usefull/</p>\n\n<p>if you want to use it, all what you need to do is call method and define tyour predicate</p>\n\n<pre><code>CollectionUtil.find(list, new Predicate&lt;MyObject&gt;{\n    public boolean contains(T item){\n        return \"John\".equals(item.getName());\n     }\n});\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2510282,"reputation":12462,"user_id":2182928,"accept_rate":97,"display_name":"Rudi Kershaw"},"score":0,"creation_date":1486732788,"post_id":42158130,"comment_id":71485711,"body_markdown":"+1 Although it means a little overhead in putting the details into the map in the first place you then get constant time lookup. I&#39;m surprised no one has suggested this until now.","body":"+1 Although it means a little overhead in putting the details into the map in the first place you then get constant time lookup. I&#39;m surprised no one has suggested this until now."}],"tags":[],"owner":{"display_name":"user7110558"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1486725598,"creation_date":1486725598,"answer_id":42158130,"question_id":18852059,"body_markdown":"# Map #\r\n\r\nYou could create a `Hashmap&lt;String, Object&gt;` using one of the values as a key, and then seeing if `yourHashMap.keySet().contains(yourValue)` returns true.","title":"Java List.contains(Object with field value equal to x)","body":"<h1>Map</h1>\n\n<p>You could create a <code>Hashmap&lt;String, Object&gt;</code> using one of the values as a key, and then seeing if <code>yourHashMap.keySet().contains(yourValue)</code> returns true.</p>\n"},{"tags":[],"owner":{"account_id":7957692,"reputation":1544,"user_id":6006402,"display_name":"Pasha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503380067,"creation_date":1503380067,"answer_id":45809583,"question_id":18852059,"body_markdown":"Despite JAVA 8 SDK there is a lot of collection tools libraries can help you to work with, for instance:\r\n [http://commons.apache.org/proper/commons-collections/][1]\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-collections/\r\n\r\n\r\n    Predicate condition = new Predicate() {\r\n       boolean evaluate(Object obj) {\r\n            return ((Sample)obj).myField.equals(&quot;myVal&quot;);\r\n       }\r\n    };\r\n    List result = CollectionUtils.select( list, condition );","title":"Java List.contains(Object with field value equal to x)","body":"<p>Despite JAVA 8 SDK there is a lot of collection tools libraries can help you to work with, for instance:\n <a href=\"http://commons.apache.org/proper/commons-collections/\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-collections/</a></p>\n\n<pre><code>Predicate condition = new Predicate() {\n   boolean evaluate(Object obj) {\n        return ((Sample)obj).myField.equals(\"myVal\");\n   }\n};\nList result = CollectionUtils.select( list, condition );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7022638,"reputation":58840,"user_id":5381331,"accept_rate":60,"display_name":"Linh"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1511232933,"creation_date":1511232933,"answer_id":47404446,"question_id":18852059,"body_markdown":"Here is a solution using [Guava][1]\r\n\r\n    private boolean checkUserListContainName(List&lt;User&gt; userList, final String targetName){\r\n    \r\n        return FluentIterable.from(userList).anyMatch(new Predicate&lt;User&gt;() {\r\n            @Override\r\n            public boolean apply(@Nullable User input) {\r\n                return input.getName().equals(targetName);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n  [1]: https://github.com/google/guava","title":"Java List.contains(Object with field value equal to x)","body":"<p>Here is a solution using <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a></p>\n\n<pre><code>private boolean checkUserListContainName(List&lt;User&gt; userList, final String targetName){\n\n    return FluentIterable.from(userList).anyMatch(new Predicate&lt;User&gt;() {\n        @Override\n        public boolean apply(@Nullable User input) {\n            return input.getName().equals(targetName);\n        }\n    });\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1412551,"reputation":1225,"user_id":1338875,"display_name":"Thyag"},"score":4,"creation_date":1599670446,"post_id":52934936,"comment_id":112847489,"body_markdown":"Tried the filter based answer by Josh above, but Intellij also suggested your anyMatch answer. Great!","body":"Tried the filter based answer by Josh above, but Intellij also suggested your anyMatch answer. Great!"},{"owner":{"account_id":9092502,"reputation":189,"user_id":6767721,"display_name":"B Thuy"},"score":4,"creation_date":1637834629,"post_id":52934936,"comment_id":123933609,"body_markdown":"Please flip the string equality check to avoid a potential null pointer exception\n `&quot;John&quot;.equals(o.getName())`","body":"Please flip the string equality check to avoid a potential null pointer exception  <code>&quot;John&quot;.equals(o.getName())</code>"},{"owner":{"account_id":2722678,"reputation":2391,"user_id":2348614,"accept_rate":68,"display_name":"Starwave"},"score":0,"creation_date":1695282970,"post_id":52934936,"comment_id":136004362,"body_markdown":"Which one should come first in that equality check?","body":"Which one should come first in that equality check?"}],"tags":[],"owner":{"account_id":2928505,"reputation":2489,"user_id":2561119,"accept_rate":89,"display_name":"GabrielBB"},"comment_count":3,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1647193018,"creation_date":1540230309,"answer_id":52934936,"question_id":18852059,"body_markdown":"This is how to do it using Java 8+ :\r\n\r\n    boolean isJohnAlive = list.stream().anyMatch(o -&gt; &quot;John&quot;.equals(o.getName());","title":"Java List.contains(Object with field value equal to x)","body":"<p>This is how to do it using Java 8+ :</p>\n<pre><code>boolean isJohnAlive = list.stream().anyMatch(o -&gt; &quot;John&quot;.equals(o.getName());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21876842,"reputation":1,"user_id":16165755,"display_name":"Amit Singh"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684724955,"creation_date":1684621286,"answer_id":76297558,"question_id":18852059,"body_markdown":"Try this:\r\n\r\n    list.stream().filter(req -&gt; \r\n    req.getName().equals(&quot;John&quot;)).findFirst().isPresent()","title":"Java List.contains(Object with field value equal to x)","body":"<p>Try this:</p>\n<pre><code>list.stream().filter(req -&gt; \nreq.getName().equals(&quot;John&quot;)).findFirst().isPresent()\n</code></pre>\n"}],"owner":{"account_id":2510282,"reputation":12462,"user_id":2182928,"accept_rate":97,"display_name":"Rudi Kershaw"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":610935,"favorite_count":0,"down_vote_count":1,"up_vote_count":292,"accepted_answer_id":18852327,"answer_count":14,"score":291,"last_activity_date":1684724955,"creation_date":1379426557,"question_id":18852059,"body_markdown":"I want to check whether a `List` contains an object that has a field with a certain value. Now, I could use a loop to go through and check, but I was curious if there was anything more code efficient. \r\n\r\nSomething like;\r\n\r\n    if(list.contains(new Object().setName(&quot;John&quot;))){\r\n        //Do some stuff\r\n    }\r\n\r\nI know the above code doesn&#39;t do anything, it&#39;s just to demonstrate roughly what I am trying to achieve.\r\n\r\nAlso, just to clarify, the reason I don&#39;t want to use a simple loop is because this code will currently go inside a loop that is inside a loop which is inside a loop. For readability I don&#39;t want to keep adding loops to these loops. So I wondered if there were any simple(ish) alternatives.","title":"Java List.contains(Object with field value equal to x)","body":"<p>I want to check whether a <code>List</code> contains an object that has a field with a certain value. Now, I could use a loop to go through and check, but I was curious if there was anything more code efficient. </p>\n\n<p>Something like;</p>\n\n<pre><code>if(list.contains(new Object().setName(\"John\"))){\n    //Do some stuff\n}\n</code></pre>\n\n<p>I know the above code doesn't do anything, it's just to demonstrate roughly what I am trying to achieve.</p>\n\n<p>Also, just to clarify, the reason I don't want to use a simple loop is because this code will currently go inside a loop that is inside a loop which is inside a loop. For readability I don't want to keep adding loops to these loops. So I wondered if there were any simple(ish) alternatives.</p>\n"},{"tags":["java","azure","azure-active-directory","azure-functions","azure-appservice"],"answers":[{"tags":[],"owner":{"account_id":16194832,"reputation":582,"user_id":11692715,"display_name":"Mohit Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684724506,"creation_date":1684724506,"answer_id":76302809,"question_id":76301186,"body_markdown":"In my case, I didn&#39;t have Managed Identity turned on for the Api Function (and App Service which will inherit Api Function&#39;s Managed Identity)\r\n\r\n 1. To turn this on you need to navigate through the sidebar to Identity\r\n\r\n    &lt;img src=&quot;https://i.stack.imgur.com/YUfAo.png&quot; height=&quot;400&quot; /&gt;\r\n 2. Then you need to turn System Assigned status On\r\n    &lt;img src=&quot;https://i.stack.imgur.com/6bDRX.png&quot; height=&quot;300&quot; /&gt;\r\n 3. Then you need to assign the required role which was &quot;Storage Blob Data Contributor&quot;\r\n    &lt;img src=&quot;https://i.stack.imgur.com/5G3qy.png&quot; height=&quot;300&quot; /&gt;\r\n\r\nCaution: I added &quot;Contributor&quot; role instead of &quot;Storage Blob Data Contributor&quot; which didn&#39;t worked and gave me 403. My thinking here was it will be more superior role but didn&#39;t work that way.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9HwVb.png","title":"How to save a file to Azure Storage Account through App Service?","body":"<p>In my case, I didn't have Managed Identity turned on for the Api Function (and App Service which will inherit Api Function's Managed Identity)</p>\n<ol>\n<li><p>To turn this on you need to navigate through the sidebar to Identity</p>\n<img src=\"https://i.stack.imgur.com/YUfAo.png\" height=\"400\" />\n</li>\n<li><p>Then you need to turn System Assigned status On\n<img src=\"https://i.stack.imgur.com/6bDRX.png\" height=\"300\" /></p>\n</li>\n<li><p>Then you need to assign the required role which was &quot;Storage Blob Data Contributor&quot;\n<img src=\"https://i.stack.imgur.com/5G3qy.png\" height=\"300\" /></p>\n</li>\n</ol>\n<p>Caution: I added &quot;Contributor&quot; role instead of &quot;Storage Blob Data Contributor&quot; which didn't worked and gave me 403. My thinking here was it will be more superior role but didn't work that way.\n<a href=\"https://i.stack.imgur.com/9HwVb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9HwVb.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":16194832,"reputation":582,"user_id":11692715,"display_name":"Mohit Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684724506,"creation_date":1684691262,"question_id":76301186,"body_markdown":"I am new to Azure. What I am **trying to do is upload a file to Azure Storage Account** from  a **spring boot** application running inside a **Azure App Function** (using **Azure App Service**)?\r\n\r\nThe **code** I am using **to get the Azure Credentials**\r\n```java\r\nDefaultAzureCredential defaultCredential = new DefaultAzureCredentialBuilder().build();\r\n```\r\n\r\nbut this code throws **exception**:\r\n\r\n```text\r\nResult: Failure Exception: CredentialUnavailableException: EnvironmentCredential authentication unavailable. \r\nEnvironment variables are not fully configured.To mitigate this issue, please refer to the troubleshooting \r\nguidelines here at https://aka.ms/azsdk/java/identity/environmentcredential/troubleshoot Managed Identity \r\nauthentication is not available. SharedTokenCacheCredential authentication unavailable. No accounts were \r\nfound in the cache. IntelliJ Authentication not available. Please log in with Azure Tools for IntelliJ plugin \r\nin the IDE. AzureCliCredential authentication unavailable. Azure CLI not installed.To mitigate this issue, \r\nplease refer to the troubleshooting guidelines here at https://aka.ms/azsdk/java/identity/azclicredential/troubleshoot \r\nAzure PowerShell authentication failed using defaultpowershell(pwsh) with following error: Unable to execute \r\nPowerShell. Please make sure that it is installed in your system. Azure PowerShell authentication failed using powershell-core(powershell) with following error: Encountered error when deserializing response from Azure Power Shell.To mitigate this issue, please refer to the troubleshooting guidelines here at https://aka.ms/azure-identity-java-default-azure-credential-troubleshoot Stack: java.lang.reflect.InvocationTargetException at\r\n```\r\n\r\nIf I try to run this **locally then there is no problem**, but **in the Azure App Service it throws this error**. \r\n\r\nCan anybody help me regarding adding the right code to get the credentials?","title":"How to save a file to Azure Storage Account through App Service?","body":"<p>I am new to Azure. What I am <strong>trying to do is upload a file to Azure Storage Account</strong> from  a <strong>spring boot</strong> application running inside a <strong>Azure App Function</strong> (using <strong>Azure App Service</strong>)?</p>\n<p>The <strong>code</strong> I am using <strong>to get the Azure Credentials</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>DefaultAzureCredential defaultCredential = new DefaultAzureCredentialBuilder().build();\n</code></pre>\n<p>but this code throws <strong>exception</strong>:</p>\n<pre><code>Result: Failure Exception: CredentialUnavailableException: EnvironmentCredential authentication unavailable. \nEnvironment variables are not fully configured.To mitigate this issue, please refer to the troubleshooting \nguidelines here at https://aka.ms/azsdk/java/identity/environmentcredential/troubleshoot Managed Identity \nauthentication is not available. SharedTokenCacheCredential authentication unavailable. No accounts were \nfound in the cache. IntelliJ Authentication not available. Please log in with Azure Tools for IntelliJ plugin \nin the IDE. AzureCliCredential authentication unavailable. Azure CLI not installed.To mitigate this issue, \nplease refer to the troubleshooting guidelines here at https://aka.ms/azsdk/java/identity/azclicredential/troubleshoot \nAzure PowerShell authentication failed using defaultpowershell(pwsh) with following error: Unable to execute \nPowerShell. Please make sure that it is installed in your system. Azure PowerShell authentication failed using powershell-core(powershell) with following error: Encountered error when deserializing response from Azure Power Shell.To mitigate this issue, please refer to the troubleshooting guidelines here at https://aka.ms/azure-identity-java-default-azure-credential-troubleshoot Stack: java.lang.reflect.InvocationTargetException at\n</code></pre>\n<p>If I try to run this <strong>locally then there is no problem</strong>, but <strong>in the Azure App Service it throws this error</strong>.</p>\n<p>Can anybody help me regarding adding the right code to get the credentials?</p>\n"},{"tags":["java","maven","karate","cucumber-java","web-api-testing"],"comments":[{"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1684735651,"post_id":76302750,"comment_id":134554496,"body_markdown":"we don&#39;t support old versions of karate so please upgrade. the linked Q&amp;A shows someone successfully running karate on maven + eclipse","body":"we don&#39;t support old versions of karate so please upgrade. the linked Q&amp;A shows someone successfully running karate on maven + eclipse"}],"owner":{"account_id":1472673,"reputation":33,"user_id":1383816,"accept_rate":20,"display_name":"sampath"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1684729493,"answer_count":0,"score":1,"last_activity_date":1684723239,"creation_date":1684723239,"question_id":76302750,"body_markdown":"Am unable to execute Karate Feature file. What am missing?\r\nAm using Eclipse IDE and trying to execute the feature file as &quot;Run As&quot; &gt;&gt; &quot;Cucumber Feature&quot;\r\n\r\nI have followed below methods but nothing is able to resolve the below error:\r\n\r\n**Method 1:**\r\nGo to Project Properties &gt;&gt; Java compiler &gt;&gt; Compiler &gt;&gt; JDK compliance level and modify to Java SE - 1.8\r\nModify to 1.7, 1.8, 14, 15 and checked\r\n\r\n**Method 2:**\r\nGo to Preferences &gt;&gt; Java &gt;&gt; Installed JREs and Preferences &gt;&gt; Java &gt;&gt; Installed JREs &gt;&gt; Execution Environments\r\nModify to JAVASE-1.7, JAVASE-1.8, JAVASE-14, JAVASE-15\r\n\r\n**Method 3:**\r\nGo to Run Configurations &gt;&gt; Runtime JRE &gt;&gt; Execution environment &gt;&gt; JAVASE-1.7, JAVASE-1.8, JAVASE-14, JAVASE-15.\r\n\r\n\r\nI have tried above 3 methods but still am receiving error as &quot;main&quot; java.lang.NoClassDefFoundError: jdk/nashorn/api/scripting/ScriptObjectMirror\r\n\r\n\r\n**pom.xml:**\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n \r\n    &lt;groupId&gt;org.sam.kdsl.pract&lt;/groupId&gt;\r\n    &lt;artifactId&gt;myproject&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n \r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\r\n        &lt;!--&lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;--&gt;\r\n        &lt;maven.surefire.version&gt;3.0.0-M1&lt;/maven.surefire.version&gt;      \r\n        &lt;karate.version&gt;0.9.5&lt;/karate.version&gt;\r\n    &lt;/properties&gt;    \r\n\r\n    &lt;dependencies&gt;         \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;karate-junit5&lt;/artifactId&gt;\r\n            &lt;version&gt;${karate.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;karate-apache&lt;/artifactId&gt;\r\n\t    &lt;version&gt;${karate.version}&lt;/version&gt;\r\n\t    &lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n   &lt;dependency&gt;\r\n    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n    &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n    &lt;version&gt;7.12.0&lt;/version&gt;\r\n  &lt;/dependency&gt;     \t\t\r\n        \t\t\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;testResources&gt;\r\n            &lt;testResource&gt;\r\n                &lt;directory&gt;src/test/java&lt;/directory&gt;\r\n                &lt;excludes&gt;\r\n                    &lt;exclude&gt;**/*.java&lt;/exclude&gt;\r\n                &lt;/excludes&gt;\r\n            &lt;/testResource&gt;\r\n        &lt;/testResources&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven.compiler.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                    &lt;source&gt;${java.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.version}&lt;/target&gt;\r\n                    &lt;compilerArgument&gt;-Werror&lt;/compilerArgument&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven.surefire.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;argLine&gt;-Dfile.encoding=UTF-8&lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;          \r\n        &lt;/plugins&gt;        \r\n    &lt;/build&gt;       \r\n    \r\n&lt;/project&gt;\r\n```\r\n\r\n**Java version**\r\n```\r\nJ:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;echo %JAVA_HOME%\r\nC:\\Program Files\\Java\\jdk1.8.0_261\r\nJ:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;\r\n```\r\n\r\n**Maven version**\r\n\r\n```\r\nJ:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;mvn --version\r\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\r\nMaven home: C:\\maven\\apache-maven-3.6.3\\bin\\..\r\nJava version: 1.8.0_261, vendor: Oracle Corporation, runtime: C:\\Program Files\\Java\\jdk1.8.0_261\\jre\r\nDefault locale: en_US, platform encoding: Cp1252\r\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\r\n\r\nJ:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;\r\n```\r\n\r\n**Error captured from Eclipse IDE Console**\r\n```\r\n\r\ncommand: J:/My Drive/API/Karate-DSL/kdsl/myproject/src/test/java/examples/users/users.feature --glue classpath: --plugin pretty --monochrome\r\n21:01:45.065 [main] INFO  com.intuit.karate.Runner - waiting for parallel features to complete ...\r\nKarate version: 0.9.5\r\n======================================================\r\nelapsed:   0.03 | threads:    1 | thread time: 0.00 \r\nfeatures:     0 | ignored:    0 | efficiency: 0.00\r\nscenarios:    0 | passed:     0 | failed: 0\r\n======================================================\r\n\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: jdk/nashorn/api/scripting/ScriptObjectMirror\r\n\tat com.intuit.karate.JsonUtils.&lt;clinit&gt;(JsonUtils.java:108)\r\n\tat com.intuit.karate.core.Engine.saveStatsJson(Engine.java:439)\r\n\tat com.intuit.karate.Runner.parallel(Runner.java:356)\r\n\tat com.intuit.karate.Runner$Builder.parallel(Runner.java:181)\r\n\tat com.intuit.karate.cli.Main.main(Main.java:66)\r\n\tat cucumber.api.cli.Main.main(Main.java:34)\r\nCaused by: java.lang.ClassNotFoundException: jdk.nashorn.api.scripting.ScriptObjectMirror\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n\t... 6 more\r\n```\r\n\r\n**Feature file**\r\n```\r\nFeature: sample karate test script\r\n  for help, see: https://github.com/karatelabs/karate/wiki/IDE-Support\r\n\r\n  Background:\r\n    * url &#39;https://jsonplaceholder.typicode.com&#39;\r\n\r\n  Scenario: get all users and then get the first user by id\r\n    Given path &#39;users&#39;\r\n    When method get\r\n    Then status 200\r\n\r\n    * def first = response[0]\r\n\r\n    Given path &#39;users&#39;, first.id\r\n    When method get\r\n    Then status 200\r\n\r\n  Scenario: create a user and then get it by id\r\n    * def user =\r\n      &quot;&quot;&quot;\r\n      {\r\n        &quot;name&quot;: &quot;Test User&quot;,\r\n        &quot;username&quot;: &quot;testuser&quot;,\r\n        &quot;email&quot;: &quot;test@user.com&quot;,\r\n        &quot;address&quot;: {\r\n          &quot;street&quot;: &quot;Has No Name&quot;,\r\n          &quot;suite&quot;: &quot;Apt. 123&quot;,\r\n          &quot;city&quot;: &quot;Electri&quot;,\r\n          &quot;zipcode&quot;: &quot;54321-6789&quot;\r\n        }\r\n      }\r\n      &quot;&quot;&quot;\r\n\r\n    Given url &#39;https://jsonplaceholder.typicode.com/users&#39;\r\n    And request user\r\n    When method post\r\n    Then status 201\r\n\r\n    * def id = response.id\r\n    * print &#39;created id is: &#39;, id\r\n\r\n    Given path id\r\n    # When method get\r\n    # Then status 200\r\n    # And match response contains user\r\n  \r\n```","title":"Not able to execute Karate Feature file on windows 10","body":"<p>Am unable to execute Karate Feature file. What am missing?\nAm using Eclipse IDE and trying to execute the feature file as &quot;Run As&quot; &gt;&gt; &quot;Cucumber Feature&quot;</p>\n<p>I have followed below methods but nothing is able to resolve the below error:</p>\n<p><strong>Method 1:</strong>\nGo to Project Properties &gt;&gt; Java compiler &gt;&gt; Compiler &gt;&gt; JDK compliance level and modify to Java SE - 1.8\nModify to 1.7, 1.8, 14, 15 and checked</p>\n<p><strong>Method 2:</strong>\nGo to Preferences &gt;&gt; Java &gt;&gt; Installed JREs and Preferences &gt;&gt; Java &gt;&gt; Installed JREs &gt;&gt; Execution Environments\nModify to JAVASE-1.7, JAVASE-1.8, JAVASE-14, JAVASE-15</p>\n<p><strong>Method 3:</strong>\nGo to Run Configurations &gt;&gt; Runtime JRE &gt;&gt; Execution environment &gt;&gt; JAVASE-1.7, JAVASE-1.8, JAVASE-14, JAVASE-15.</p>\n<p>I have tried above 3 methods but still am receiving error as &quot;main&quot; java.lang.NoClassDefFoundError: jdk/nashorn/api/scripting/ScriptObjectMirror</p>\n<p><strong>pom.xml:</strong></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n \n    &lt;groupId&gt;org.sam.kdsl.pract&lt;/groupId&gt;\n    &lt;artifactId&gt;myproject&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n \n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\n        &lt;!--&lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;--&gt;\n        &lt;maven.surefire.version&gt;3.0.0-M1&lt;/maven.surefire.version&gt;      \n        &lt;karate.version&gt;0.9.5&lt;/karate.version&gt;\n    &lt;/properties&gt;    \n\n    &lt;dependencies&gt;         \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\n            &lt;artifactId&gt;karate-junit5&lt;/artifactId&gt;\n            &lt;version&gt;${karate.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\n        &lt;artifactId&gt;karate-apache&lt;/artifactId&gt;\n        &lt;version&gt;${karate.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n    &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n    &lt;version&gt;7.12.0&lt;/version&gt;\n  &lt;/dependency&gt;             \n                \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;testResources&gt;\n            &lt;testResource&gt;\n                &lt;directory&gt;src/test/java&lt;/directory&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;**/*.java&lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/testResource&gt;\n        &lt;/testResources&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.compiler.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                    &lt;compilerArgument&gt;-Werror&lt;/compilerArgument&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.surefire.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;argLine&gt;-Dfile.encoding=UTF-8&lt;/argLine&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;          \n        &lt;/plugins&gt;        \n    &lt;/build&gt;       \n    \n&lt;/project&gt;\n</code></pre>\n<p><strong>Java version</strong></p>\n<pre><code>J:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;echo %JAVA_HOME%\nC:\\Program Files\\Java\\jdk1.8.0_261\nJ:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;\n</code></pre>\n<p><strong>Maven version</strong></p>\n<pre><code>J:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;mvn --version\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nMaven home: C:\\maven\\apache-maven-3.6.3\\bin\\..\nJava version: 1.8.0_261, vendor: Oracle Corporation, runtime: C:\\Program Files\\Java\\jdk1.8.0_261\\jre\nDefault locale: en_US, platform encoding: Cp1252\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\n\nJ:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;\n</code></pre>\n<p><strong>Error captured from Eclipse IDE Console</strong></p>\n<pre><code>\ncommand: J:/My Drive/API/Karate-DSL/kdsl/myproject/src/test/java/examples/users/users.feature --glue classpath: --plugin pretty --monochrome\n21:01:45.065 [main] INFO  com.intuit.karate.Runner - waiting for parallel features to complete ...\nKarate version: 0.9.5\n======================================================\nelapsed:   0.03 | threads:    1 | thread time: 0.00 \nfeatures:     0 | ignored:    0 | efficiency: 0.00\nscenarios:    0 | passed:     0 | failed: 0\n======================================================\n\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: jdk/nashorn/api/scripting/ScriptObjectMirror\n    at com.intuit.karate.JsonUtils.&lt;clinit&gt;(JsonUtils.java:108)\n    at com.intuit.karate.core.Engine.saveStatsJson(Engine.java:439)\n    at com.intuit.karate.Runner.parallel(Runner.java:356)\n    at com.intuit.karate.Runner$Builder.parallel(Runner.java:181)\n    at com.intuit.karate.cli.Main.main(Main.java:66)\n    at cucumber.api.cli.Main.main(Main.java:34)\nCaused by: java.lang.ClassNotFoundException: jdk.nashorn.api.scripting.ScriptObjectMirror\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 6 more\n</code></pre>\n<p><strong>Feature file</strong></p>\n<pre><code>Feature: sample karate test script\n  for help, see: https://github.com/karatelabs/karate/wiki/IDE-Support\n\n  Background:\n    * url 'https://jsonplaceholder.typicode.com'\n\n  Scenario: get all users and then get the first user by id\n    Given path 'users'\n    When method get\n    Then status 200\n\n    * def first = response[0]\n\n    Given path 'users', first.id\n    When method get\n    Then status 200\n\n  Scenario: create a user and then get it by id\n    * def user =\n      &quot;&quot;&quot;\n      {\n        &quot;name&quot;: &quot;Test User&quot;,\n        &quot;username&quot;: &quot;testuser&quot;,\n        &quot;email&quot;: &quot;test@user.com&quot;,\n        &quot;address&quot;: {\n          &quot;street&quot;: &quot;Has No Name&quot;,\n          &quot;suite&quot;: &quot;Apt. 123&quot;,\n          &quot;city&quot;: &quot;Electri&quot;,\n          &quot;zipcode&quot;: &quot;54321-6789&quot;\n        }\n      }\n      &quot;&quot;&quot;\n\n    Given url 'https://jsonplaceholder.typicode.com/users'\n    And request user\n    When method post\n    Then status 201\n\n    * def id = response.id\n    * print 'created id is: ', id\n\n    Given path id\n    # When method get\n    # Then status 200\n    # And match response contains user\n  \n</code></pre>\n"},{"tags":["java","selenium","webdriver"],"comments":[{"owner":{"account_id":9978796,"reputation":2603,"user_id":7382406,"accept_rate":75,"display_name":"Jainish Kapadia"},"score":0,"creation_date":1491196398,"post_id":43171988,"comment_id":73427294,"body_markdown":"Can you please explain why won&#39;t use your driver as static?","body":"Can you please explain why won&#39;t use your driver as static?"}],"answers":[{"comments":[{"owner":{"account_id":4417825,"reputation":1,"user_id":3598844,"display_name":"user3598844"},"score":0,"creation_date":1491160855,"post_id":43172323,"comment_id":73419024,"body_markdown":"I need to initialize it without declaring it as **Static** . Thanks","body":"I need to initialize it without declaring it as <b>Static</b> . Thanks"},{"owner":{"account_id":10427913,"reputation":967,"user_id":7688585,"display_name":"Akarsh"},"score":0,"creation_date":1491185265,"post_id":43172323,"comment_id":73424922,"body_markdown":"Updated my answer by removing static keyword of driver object, please verify and let me know if you have any queries","body":"Updated my answer by removing static keyword of driver object, please verify and let me know if you have any queries"},{"owner":{"account_id":4417825,"reputation":1,"user_id":3598844,"display_name":"user3598844"},"score":0,"creation_date":1491243461,"post_id":43172323,"comment_id":73456185,"body_markdown":"-Thanks.It work in this way but is it good practice to write the whole logic for initializing the webdriver instance inside constructor of Base class . How can i use annotation or if i need to perform some more action after initializing the driver.","body":"-Thanks.It work in this way but is it good practice to write the whole logic for initializing the webdriver instance inside constructor of Base class . How can i use annotation or if i need to perform some more action after initializing the driver."}],"tags":[],"owner":{"account_id":10427913,"reputation":967,"user_id":7688585,"display_name":"Akarsh"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491185207,"creation_date":1491159703,"answer_id":43172323,"question_id":43171988,"body_markdown":"Initialize web driver in base class constructor and extend Base class in Test class then assign driver to Base.driver.\r\n\r\nTry below code\r\n\r\n**Base Class:**\r\n\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n\r\n    public class Base \r\n    {\r\n    public WebDriver driver;\r\n\r\n    public Base(){\r\n    \tdriver = new ChromeDriver();\r\n    }\r\n    }\r\n\r\n\r\n**UseFunction class:**\r\n\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n\r\n    public class useFunction\r\n     {\r\n\t     WebDriver driver;\r\n\r\n      public useFunction(WebDriver driver)\r\n      {\r\n        this.driver = driver;\r\n      }\r\n\r\n      public void func1()\r\n      {\r\n        driver.findElement(By.id(&quot;id of the element&quot;)).click(); \r\n      }\r\n      }\r\n**Test1 class:**\r\n\r\n    import org.testng.annotations.Test;\r\n\r\n    public class Test1{\r\n\r\n\t@Test\r\n\tpublic void testMethod1()\r\n\t{\r\n\t\tBase base = new Base();\r\n\t\tuseFunction funObj = new useFunction(base.driver);\r\n\t\tfunObj.func1(); \r\n\r\n\t}\r\n    }\r\n\r\nTry it and let me know if it works for you\r\n","title":"How to use the initialized Webdriver instance from Base class to child class java","body":"<p>Initialize web driver in base class constructor and extend Base class in Test class then assign driver to Base.driver.</p>\n\n<p>Try below code</p>\n\n<p><strong>Base Class:</strong></p>\n\n<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class Base \n{\npublic WebDriver driver;\n\npublic Base(){\n    driver = new ChromeDriver();\n}\n}\n</code></pre>\n\n<p><strong>UseFunction class:</strong></p>\n\n<pre><code>import org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\n\npublic class useFunction\n {\n     WebDriver driver;\n\n  public useFunction(WebDriver driver)\n  {\n    this.driver = driver;\n  }\n\n  public void func1()\n  {\n    driver.findElement(By.id(\"id of the element\")).click(); \n  }\n  }\n</code></pre>\n\n<p><strong>Test1 class:</strong></p>\n\n<pre><code>import org.testng.annotations.Test;\n\npublic class Test1{\n\n@Test\npublic void testMethod1()\n{\n    Base base = new Base();\n    useFunction funObj = new useFunction(base.driver);\n    funObj.func1(); \n\n}\n}\n</code></pre>\n\n<p>Try it and let me know if it works for you</p>\n"},{"tags":[],"owner":{"account_id":26153184,"reputation":1,"user_id":19840815,"display_name":"Nitin Navadiya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684720973,"creation_date":1684439274,"answer_id":76284009,"question_id":43171988,"body_markdown":"\r\n```\r\npublic WebDriver Base() {\r\n\r\n  WebDriverManager.edgedriver().setup(); //Change for Chrome.\r\n\r\n\tEdgeOptions options = new EdgeOptions();\r\n\toptions.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n\r\n\tWebDriver ed = new EdgeDriver(options);\r\n\ted.manage().window().maximize();\r\n\ted.manage().timeouts().implicitlyWait(Duration.ofSeconds(30));\r\n\r\n\treturn ed;\r\n}\r\n```\r\n\r\nTest1:\r\n\r\n```\r\npublic class Test1 extends Base {\r\n\r\n\tpublic void Test1_TestNG() throws InterruptedException {\r\n\r\n\t\tWebDriver ed = Base();\r\n\t\ted.manage().timeouts().implicitlyWait(Duration.ofSeconds(30));\r\n\t}\t\r\n}\r\n```\r\nNow you can use &quot;ed&quot; WebDriver for any methods (OR) further Web Based automation, by simply calling &quot;ed&quot; WebDriver.","title":"How to use the initialized Webdriver instance from Base class to child class java","body":"<pre><code>public WebDriver Base() {\n\n  WebDriverManager.edgedriver().setup(); //Change for Chrome.\n\n    EdgeOptions options = new EdgeOptions();\n    options.addArguments(&quot;--remote-allow-origins=*&quot;);\n\n    WebDriver ed = new EdgeDriver(options);\n    ed.manage().window().maximize();\n    ed.manage().timeouts().implicitlyWait(Duration.ofSeconds(30));\n\n    return ed;\n}\n</code></pre>\n<p>Test1:</p>\n<pre><code>public class Test1 extends Base {\n\n    public void Test1_TestNG() throws InterruptedException {\n\n        WebDriver ed = Base();\n        ed.manage().timeouts().implicitlyWait(Duration.ofSeconds(30));\n    }   \n}\n</code></pre>\n<p>Now you can use &quot;ed&quot; WebDriver for any methods (OR) further Web Based automation, by simply calling &quot;ed&quot; WebDriver.</p>\n"}],"owner":{"account_id":4417825,"reputation":1,"user_id":3598844,"display_name":"user3598844"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6867,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1684720973,"creation_date":1491157645,"question_id":43171988,"body_markdown":"    public class Base \r\n    {\r\n        public WebDriver driver;\r\n        \r\n        @BeforeMethod \r\n        public void setUp()\r\n        {\r\n            driver = new FirefoxDriver();\r\n        }\r\n    \r\n    }\r\n    \r\n    public class useFunction extends Base\r\n    {\r\n       \r\n        public useFunction(WebDriver driver)\r\n        {\r\n            this.driver = driver;\r\n        }\r\n    \r\n        public void func1()\r\n        {\r\n            driver.findElement().click();  //driver is null\r\n            --------\r\n            ---------\r\n        }\r\n    }\r\n    \r\n    Public class Test extends Base\r\n    {\r\n        useFunction funObj = new useFunction(driver);\r\n        @Test\r\n        public void testMethod1()\r\n       {\r\n           funObj.func1();\r\n           ----\r\n           ------ \r\n         \r\n      }\r\n    }\r\n\r\n**How can i use the initialized value of WebDriver instance in `UseFunction class` without declaring the Webdriver instance as static.** When i pass the driver in constructor of `UseFunction class` while creating its object inside `Test class`, getting Null Pointer Exception","title":"How to use the initialized Webdriver instance from Base class to child class java","body":"<pre><code>public class Base \n{\n    public WebDriver driver;\n\n    @BeforeMethod \n    public void setUp()\n    {\n        driver = new FirefoxDriver();\n    }\n\n}\n\npublic class useFunction extends Base\n{\n\n    public useFunction(WebDriver driver)\n    {\n        this.driver = driver;\n    }\n\n    public void func1()\n    {\n        driver.findElement().click();  //driver is null\n        --------\n        ---------\n    }\n}\n\nPublic class Test extends Base\n{\n    useFunction funObj = new useFunction(driver);\n    @Test\n    public void testMethod1()\n   {\n       funObj.func1();\n       ----\n       ------ \n\n  }\n}\n</code></pre>\n\n<p><strong>How can i use the initialized value of WebDriver instance in <code>UseFunction class</code> without declaring the Webdriver instance as static.</strong> When i pass the driver in constructor of <code>UseFunction class</code> while creating its object inside <code>Test class</code>, getting Null Pointer Exception</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9805,"page":420,"page_size":100}
