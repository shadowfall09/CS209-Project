{"items":[{"tags":["java","spring","spring-security","vaadin","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":219684,"reputation":37267,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":14,"creation_date":1453985590,"post_id":23648756,"comment_id":57846756,"body_markdown":"This still causes / to redirect to /login, and /login to serve a login form","body":"This still causes / to redirect to /login, and /login to serve a login form"},{"owner":{"account_id":102371,"reputation":460,"user_id":274825,"accept_rate":57,"display_name":"Krum"},"score":25,"creation_date":1525447309,"post_id":23648756,"comment_id":87373802,"body_markdown":"this has been deprecated.  noobdev now has the correct answer.","body":"this has been deprecated.  noobdev now has the correct answer."},{"owner":{"account_id":1024933,"reputation":703,"user_id":1034461,"display_name":"horvoje"},"score":3,"creation_date":1673102182,"post_id":23648756,"comment_id":132424556,"body_markdown":"Not working in 2023","body":"Not working in 2023"}],"tags":[],"owner":{"account_id":4277851,"reputation":51792,"user_id":3498062,"display_name":"Andrei Stefan"},"comment_count":3,"down_vote_count":5,"up_vote_count":40,"is_accepted":true,"score":35,"last_activity_date":1400055263,"creation_date":1400054213,"answer_id":23648756,"question_id":23636368,"body_markdown":"The default security in Spring Boot is Basic. You could disable it by setting `security.basic.enabled=false`. More about this [here][1] and [here][2].\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security\r\n  [2]: http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#common-application-properties","title":"How to disable spring-security login screen?","body":"<p>The default security in Spring Boot is Basic. You could disable it by setting <code>security.basic.enabled=false</code>. More about this <a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security\" rel=\"noreferrer\">here</a> and <a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#common-application-properties\" rel=\"noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":3725987,"reputation":71,"user_id":3099886,"display_name":"Dosi Bingov"},"score":0,"creation_date":1550742465,"post_id":46155567,"comment_id":96384452,"body_markdown":"I like your solution. Thanks!","body":"I like your solution. Thanks!"},{"owner":{"account_id":971267,"reputation":1259,"user_id":993802,"accept_rate":66,"display_name":"peekay"},"score":1,"creation_date":1554753960,"post_id":46155567,"comment_id":97860437,"body_markdown":"This config does not change anything as far as I can tell.  I thought that providing your own config took precedence over spring config?","body":"This config does not change anything as far as I can tell.  I thought that providing your own config took precedence over spring config?"},{"owner":{"account_id":7119515,"reputation":6055,"user_id":5444618,"accept_rate":83,"display_name":"Guillaume F."},"score":16,"creation_date":1570101892,"post_id":46155567,"comment_id":102812195,"body_markdown":"You can add `.formLogin().disable()` as well to remove the login screen","body":"You can add <code>.formLogin().disable()</code> as well to remove the login screen"},{"owner":{"account_id":6022505,"reputation":3558,"user_id":4729203,"accept_rate":88,"display_name":"wonsuc"},"score":0,"creation_date":1573482698,"post_id":46155567,"comment_id":103886527,"body_markdown":"This actually works on the current latest version of `Spring Boot 2.2.1.BUILD-SNAPSHOT`.","body":"This actually works on the current latest version of <code>Spring Boot 2.2.1.BUILD-SNAPSHOT</code>."},{"owner":{"account_id":7246645,"reputation":49,"user_id":5528325,"display_name":"user771"},"score":1,"creation_date":1599564451,"post_id":46155567,"comment_id":112806513,"body_markdown":"Ok if i use above solution, login page is gone. But still getting 403 from POST requests. Anyone know how to solve this ?","body":"Ok if i use above solution, login page is gone. But still getting 403 from POST requests. Anyone know how to solve this ?"},{"owner":{"account_id":18479864,"reputation":349,"user_id":13462325,"display_name":"Prashant S"},"score":0,"creation_date":1632768278,"post_id":46155567,"comment_id":122577582,"body_markdown":"Above did work only for GET http calls. For POST review my comments below","body":"Above did work only for GET http calls. For POST review my comments below"},{"owner":{"account_id":12519323,"reputation":179,"user_id":9111270,"display_name":"alexdefelipe"},"score":1,"creation_date":1658162845,"post_id":46155567,"comment_id":128977887,"body_markdown":"In version 5.7.0-M2, [the use of WebSecurityConfigurerAdapter has been deprecated](https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter). Now it should be done by registering a SecurityFilterChain component.","body":"In version 5.7.0-M2, <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">the use of WebSecurityConfigurerAdapter has been deprecated</a>. Now it should be done by registering a SecurityFilterChain component."}],"tags":[],"owner":{"account_id":5301780,"reputation":1233,"user_id":4233170,"display_name":"noobdev"},"comment_count":7,"down_vote_count":3,"up_vote_count":108,"is_accepted":false,"score":105,"last_activity_date":1505132124,"creation_date":1505132124,"answer_id":46155567,"question_id":23636368,"body_markdown":"you can use java based configuration like this : \r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n\t    @Override\r\n\t    protected void configure(HttpSecurity security) throws Exception\r\n\t    {\r\n\t\t security.httpBasic().disable();\r\n\t    }\r\n    }\r\nand restart your application if it&#39;s refresh automatically.","title":"How to disable spring-security login screen?","body":"<p>you can use java based configuration like this : </p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity security) throws Exception\n    {\n     security.httpBasic().disable();\n    }\n}\n</code></pre>\n\n<p>and restart your application if it's refresh automatically.</p>\n"},{"comments":[{"owner":{"account_id":1970166,"reputation":2148,"user_id":1769353,"accept_rate":88,"display_name":"Amir Kost"},"score":2,"creation_date":1540730081,"post_id":51908496,"comment_id":92963651,"body_markdown":"Disabling Spring Security is a bad solution. Applications should be secure!","body":"Disabling Spring Security is a bad solution. Applications should be secure!"},{"owner":{"account_id":4154011,"reputation":826,"user_id":6113718,"accept_rate":75,"display_name":"Michiel Haisma"},"score":0,"creation_date":1540815752,"post_id":51908496,"comment_id":92990187,"body_markdown":"OP requests only to have certain classes available on the classpath, not to enable spring security. Spring Boot will enable Spring security automatically when it finds the jars on the classpath. My solution will make sure that this does not happen.","body":"OP requests only to have certain classes available on the classpath, not to enable spring security. Spring Boot will enable Spring security automatically when it finds the jars on the classpath. My solution will make sure that this does not happen."}],"tags":[],"owner":{"account_id":4154011,"reputation":826,"user_id":6113718,"accept_rate":75,"display_name":"Michiel Haisma"},"comment_count":2,"down_vote_count":2,"up_vote_count":21,"is_accepted":false,"score":19,"last_activity_date":1534594127,"creation_date":1534594127,"answer_id":51908496,"question_id":23636368,"body_markdown":"Disable the default spring security by excluding it from the autoconfiguration. Add `SecurityAutoConfiguration.class` to the `exclude` property of the `@SpringBootApplication` annotation on your main class. Like follows:\r\n\r\n    @SpringBootApplication(exclude = { SecurityAutoConfiguration.class })\r\n    public class MyApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(MyApplication.class, args);\r\n        }\r\n    }\r\n","title":"How to disable spring-security login screen?","body":"<p>Disable the default spring security by excluding it from the autoconfiguration. Add <code>SecurityAutoConfiguration.class</code> to the <code>exclude</code> property of the <code>@SpringBootApplication</code> annotation on your main class. Like follows:</p>\n\n<pre><code>@SpringBootApplication(exclude = { SecurityAutoConfiguration.class })\npublic class MyApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MyApplication.class, args);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7708814,"reputation":24811,"user_id":5838902,"display_name":"Fangming"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1556598308,"creation_date":1556598308,"answer_id":55913967,"question_id":23636368,"body_markdown":"There seems to be a simpler solution.\r\n\r\nSimply put this annotationabove your main class or the same place as your `SpingBootApplication` annotation\r\n\r\n`@EnableAutoConfiguration(exclude = {org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration.class})`","title":"How to disable spring-security login screen?","body":"<p>There seems to be a simpler solution.</p>\n\n<p>Simply put this annotationabove your main class or the same place as your <code>SpingBootApplication</code> annotation</p>\n\n<p><code>@EnableAutoConfiguration(exclude = {org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration.class})</code></p>\n"},{"comments":[{"owner":{"account_id":1024933,"reputation":703,"user_id":1034461,"display_name":"horvoje"},"score":1,"creation_date":1673102330,"post_id":56483549,"comment_id":132424588,"body_markdown":"It&#39;s a big NO. Not solving the issue, just introducing a dirty hack.","body":"It&#39;s a big NO. Not solving the issue, just introducing a dirty hack."}],"tags":[],"owner":{"account_id":16086079,"reputation":9,"user_id":11610753,"display_name":"Jefferson David Casta&#241;eda"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1559848572,"creation_date":1559847485,"answer_id":56483549,"question_id":23636368,"body_markdown":"If someone still needs the solution, put a method in the REST controller like this:\r\n```\r\n@RestController\r\npublic class myRestController{\r\n\r\n    @GetMapping(&quot;/login&quot;)\r\n    public String redirectTo(){\r\n        return &quot;yourRedirectLink&quot;;\r\n    }\r\n    \r\n}\r\n```\r\nThis solution is very good to work with spring and react packed in a jar","title":"How to disable spring-security login screen?","body":"<p>If someone still needs the solution, put a method in the REST controller like this:</p>\n\n<pre><code>@RestController\npublic class myRestController{\n\n    @GetMapping(\"/login\")\n    public String redirectTo(){\n        return \"yourRedirectLink\";\n    }\n\n}\n</code></pre>\n\n<p>This solution is very good to work with spring and react packed in a jar</p>\n"},{"comments":[{"owner":{"account_id":3782313,"reputation":129,"user_id":5164808,"display_name":"Ashutosh Agrawal"},"score":2,"creation_date":1591618246,"post_id":57046306,"comment_id":110115024,"body_markdown":"When this JAVA syntax got changed?","body":"When this JAVA syntax got changed?"},{"owner":{"account_id":7544713,"reputation":179,"user_id":5728198,"display_name":"Amarnath Reddy Dornala"},"score":0,"creation_date":1613471712,"post_id":57046306,"comment_id":117078922,"body_markdown":"It&#39;s Kotlin syntax.","body":"It&#39;s Kotlin syntax."},{"owner":{"account_id":1024933,"reputation":703,"user_id":1034461,"display_name":"horvoje"},"score":1,"creation_date":1673101867,"post_id":57046306,"comment_id":132424487,"body_markdown":"This is not Java. Why do you push it here?","body":"This is not Java. Why do you push it here?"},{"owner":{"account_id":1448448,"reputation":685,"user_id":1366169,"accept_rate":80,"display_name":"Bernhard"},"score":0,"creation_date":1693755385,"post_id":57046306,"comment_id":135799392,"body_markdown":"Because the configuration is the same no matter if its java or kotlin?","body":"Because the configuration is the same no matter if its java or kotlin?"}],"tags":[],"owner":{"account_id":1998422,"reputation":3866,"user_id":1790045,"accept_rate":56,"display_name":"nilobarp"},"comment_count":4,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1563220098,"creation_date":1563220098,"answer_id":57046306,"question_id":23636368,"body_markdown":"To completely disable the login route use Spring Security configuration object\r\n\r\nThe following snippet uses `org.springframework.boot:2.1.6.RELEASE`\r\n\r\n```kotlin\r\n@Configuration\r\n@EnableWebSecurity\r\nclass SecurityConfig : WebSecurityConfigurerAdapter() {\r\n  override fun configure(security: HttpSecurity) {\r\n    super.configure(security)\r\n\r\n    security.httpBasic().disable()\r\n\r\n    security.cors().and().csrf().disable().authorizeRequests()\r\n      .anyRequest().authenticated()\r\n      .and().formLogin().disable() // &lt;-- this will disable the login route\r\n      .addFilter(JWTAuthorizationFilter(authenticationManager()))\r\n      .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n  }\r\n\r\n  @Bean\r\n  fun corsConfigurationSource(): CorsConfigurationSource {\r\n    val source = UrlBasedCorsConfigurationSource()\r\n    val config = CorsConfiguration().applyPermitDefaultValues()\r\n    config.addExposedHeader(&quot;Authorization&quot;)\r\n    source.registerCorsConfiguration(&quot;/**&quot;, config)\r\n    return source\r\n  }\r\n}\r\n```","title":"How to disable spring-security login screen?","body":"<p>To completely disable the login route use Spring Security configuration object</p>\n\n<p>The following snippet uses <code>org.springframework.boot:2.1.6.RELEASE</code></p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\nclass SecurityConfig : WebSecurityConfigurerAdapter() {\n  override fun configure(security: HttpSecurity) {\n    super.configure(security)\n\n    security.httpBasic().disable()\n\n    security.cors().and().csrf().disable().authorizeRequests()\n      .anyRequest().authenticated()\n      .and().formLogin().disable() // &lt;-- this will disable the login route\n      .addFilter(JWTAuthorizationFilter(authenticationManager()))\n      .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n  }\n\n  @Bean\n  fun corsConfigurationSource(): CorsConfigurationSource {\n    val source = UrlBasedCorsConfigurationSource()\n    val config = CorsConfiguration().applyPermitDefaultValues()\n    config.addExposedHeader(\"Authorization\")\n    source.registerCorsConfiguration(\"/**\", config)\n    return source\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5227441,"reputation":515,"user_id":4179039,"display_name":"Semir Umut Kurt"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1581934622,"creation_date":1576343390,"answer_id":59337338,"question_id":23636368,"body_markdown":"On the main spring-boot application class (the class which has @SpringBootApplication annotation)\r\n\r\n    @SpringBootApplication(exclude={SecurityAutoConfiguration.class})\r\n\r\n","title":"How to disable spring-security login screen?","body":"<p>On the main spring-boot application class (the class which has @SpringBootApplication annotation)</p>\n\n<pre><code>@SpringBootApplication(exclude={SecurityAutoConfiguration.class})\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4514046,"reputation":749,"user_id":3669400,"display_name":"Randy"},"score":2,"creation_date":1639089874,"post_id":69351853,"comment_id":124267109,"body_markdown":"This worked as of   &#39;org.springframework.boot&#39; version &#39;2.3.4.RELEASE&#39;","body":"This worked as of   &#39;org.springframework.boot&#39; version &#39;2.3.4.RELEASE&#39;"}],"tags":[],"owner":{"account_id":18479864,"reputation":349,"user_id":13462325,"display_name":"Prashant S"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1632768453,"creation_date":1632768453,"answer_id":69351853,"question_id":23636368,"body_markdown":"This worked for me \r\n  \r\n\r\n                @Configuration\r\n                @EnableWebSecurity\r\n                public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n                    @Override\r\n                    protected void configure(HttpSecurity security) throws Exception\r\n                    {\r\n                     //security.httpBasic().disable(); // Did work only for GET     \r\n                     security.csrf().disable().authorizeRequests().anyRequest().permitAll(); // Works for GET, POST, PUT, DELETE\r\n                    }\r\n                }          \r\n\r\n  ","title":"How to disable spring-security login screen?","body":"<p>This worked for me</p>\n<pre><code>            @Configuration\n            @EnableWebSecurity\n            public class SecurityConfig extends WebSecurityConfigurerAdapter {\n                @Override\n                protected void configure(HttpSecurity security) throws Exception\n                {\n                 //security.httpBasic().disable(); // Did work only for GET     \n                 security.csrf().disable().authorizeRequests().anyRequest().permitAll(); // Works for GET, POST, PUT, DELETE\n                }\n            }          \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4514046,"reputation":749,"user_id":3669400,"display_name":"Randy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664705201,"creation_date":1639092744,"answer_id":70298042,"question_id":23636368,"body_markdown":"This is to help anyone else struggling to remove the default Spring Boot login screen and have some secured paths.  This worked for me with Spring Boot 2.3.4 and the spring-boot-security starter and this article: https://www.toptal.com/spring/spring-security-tutorial helped me.  This config allows a GET to /api/config-props and /actuator/health but requires auth  on any other actuator path or any other api path.  Then finally allows a GET for any other bit that might be served static content in /resources or /public etc.\r\n\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n      @Override\r\n      protected void configure(HttpSecurity security) throws Exception {\r\n        // Enable CORS and disable CSRF\r\n        security = security.cors().and().csrf().disable();\r\n    \r\n        // Set session management to stateless\r\n        security = security\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and();\r\n    \r\n        // Set permissions on endpoints\r\n        security.authorizeRequests()\r\n                // Our public endpoints, secured endpoints and then open everything else that is static resource stuff\r\n                .antMatchers(HttpMethod.GET, &quot;/api/config-props&quot;).permitAll()\r\n                .antMatchers(HttpMethod.GET, &quot;/actuator/health&quot;).permitAll()\r\n                .antMatchers(&quot;/actuator**&quot;).authenticated()\r\n                .antMatchers(&quot;/api/**&quot;).authenticated()\r\n                .antMatchers(HttpMethod.GET, &quot;/**&quot;).permitAll();\r\n      }\r\n    }","title":"How to disable spring-security login screen?","body":"<p>This is to help anyone else struggling to remove the default Spring Boot login screen and have some secured paths.  This worked for me with Spring Boot 2.3.4 and the spring-boot-security starter and this article: <a href=\"https://www.toptal.com/spring/spring-security-tutorial\" rel=\"nofollow noreferrer\">https://www.toptal.com/spring/spring-security-tutorial</a> helped me.  This config allows a GET to /api/config-props and /actuator/health but requires auth  on any other actuator path or any other api path.  Then finally allows a GET for any other bit that might be served static content in /resources or /public etc.</p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n  @Override\n  protected void configure(HttpSecurity security) throws Exception {\n    // Enable CORS and disable CSRF\n    security = security.cors().and().csrf().disable();\n\n    // Set session management to stateless\n    security = security\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            .and();\n\n    // Set permissions on endpoints\n    security.authorizeRequests()\n            // Our public endpoints, secured endpoints and then open everything else that is static resource stuff\n            .antMatchers(HttpMethod.GET, &quot;/api/config-props&quot;).permitAll()\n            .antMatchers(HttpMethod.GET, &quot;/actuator/health&quot;).permitAll()\n            .antMatchers(&quot;/actuator**&quot;).authenticated()\n            .antMatchers(&quot;/api/**&quot;).authenticated()\n            .antMatchers(HttpMethod.GET, &quot;/**&quot;).permitAll();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24308328,"reputation":9,"user_id":18250744,"display_name":"Shubham Freelancer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646719147,"creation_date":1646719147,"answer_id":71390629,"question_id":23636368,"body_markdown":"Just remove/comment out below Dependencies from your Project&#39;s POM.xml files:\r\n```\r\n    &lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n\r\n```\r\nand\r\n\r\n```\r\n    &lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;scope&gt;test&lt;/scope&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n\r\n```","title":"How to disable spring-security login screen?","body":"<p>Just remove/comment out below Dependencies from your Project's POM.xml files:</p>\n<pre><code>    &lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n</code></pre>\n<p>and</p>\n<pre><code>    &lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;scope&gt;test&lt;/scope&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2349320,"reputation":135,"user_id":2058617,"display_name":"Saleem gagguturu"},"score":1,"creation_date":1689084700,"post_id":73081927,"comment_id":135161209,"body_markdown":"In Spring boot 3, you can do `http.httpBasic(AbstractHttpConfigurer::disable).build();`","body":"In Spring boot 3, you can do <code>http.httpBasic(AbstractHttpConfigurer::disable).build();</code>"}],"tags":[],"owner":{"account_id":18044751,"reputation":71,"user_id":13116044,"display_name":"Pouya"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1658817546,"creation_date":1658499913,"answer_id":73081927,"question_id":23636368,"body_markdown":"You can use this code in new versions of spring boot (3.0.0-m4) and reactive model ( webflux )\r\n\r\n    @Configuration\r\n    @EnableWebFluxSecurity\r\n    public class SecurityConfig {\r\n       @Bean\r\n        public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\r\n        return http\r\n                .httpBasic().disable()\r\n                .build();\r\n    }\r\n    }\r\n","title":"How to disable spring-security login screen?","body":"<p>You can use this code in new versions of spring boot (3.0.0-m4) and reactive model ( webflux )</p>\n<pre><code>@Configuration\n@EnableWebFluxSecurity\npublic class SecurityConfig {\n   @Bean\n    public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\n    return http\n            .httpBasic().disable()\n            .build();\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26780346,"reputation":1,"user_id":20375285,"display_name":"Jean-Claude MBENG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669880459,"creation_date":1669500230,"answer_id":74585909,"question_id":23636368,"body_markdown":"This code perfectly worked for me, just add it to the main Class of your project\r\n\r\n    @SpringBootApplication(exclude = { SecurityAutoConfiguration.class })","title":"How to disable spring-security login screen?","body":"<p>This code perfectly worked for me, just add it to the main Class of your project</p>\n<pre><code>@SpringBootApplication(exclude = { SecurityAutoConfiguration.class })\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15401162,"reputation":395,"user_id":11110610,"display_name":"Himmels DJ"},"score":0,"creation_date":1674305387,"post_id":75064259,"comment_id":132688768,"body_markdown":"Where is this code implemented ?  And how does security.exceptionHandling().authenticationEntryPoint disables the login form ? Any links?","body":"Where is this code implemented ?  And how does security.exceptionHandling().authenticationEntryPoint disables the login form ? Any links?"}],"tags":[],"owner":{"account_id":19961933,"reputation":21,"user_id":14629312,"display_name":"martin195"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673310218,"creation_date":1673310218,"answer_id":75064259,"question_id":23636368,"body_markdown":"For me `.httpBasic().disable()` was not working, in browser, if unauthorised it still showed login form. \r\n\r\nWhat helped for me (webflux):\r\n\r\n    security.exceptionHandling().authenticationEntryPoint { exchange, ex -&gt;\r\n        exchange.response.statusCode = HttpStatus.UNAUTHORIZED\r\n    \texchange.response.setComplete()\r\n    }\r\nBehind the scene, `WWW-Authenticate` http header causes it, and Spring adds it in `HttpBasicServerAuthenticationEntryPoint` class.","title":"How to disable spring-security login screen?","body":"<p>For me <code>.httpBasic().disable()</code> was not working, in browser, if unauthorised it still showed login form.</p>\n<p>What helped for me (webflux):</p>\n<pre><code>security.exceptionHandling().authenticationEntryPoint { exchange, ex -&gt;\n    exchange.response.statusCode = HttpStatus.UNAUTHORIZED\n    exchange.response.setComplete()\n}\n</code></pre>\n<p>Behind the scene, <code>WWW-Authenticate</code> http header causes it, and Spring adds it in <code>HttpBasicServerAuthenticationEntryPoint</code> class.</p>\n"},{"tags":[],"owner":{"account_id":16731092,"reputation":45,"user_id":12093411,"display_name":"Suriya Ganesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674997577,"creation_date":1674997577,"answer_id":75275123,"question_id":23636368,"body_markdown":"Please note that the use of WebSecurityConfigurerAdapter has been deprecated in the recent Spring versions instead you should be using the SecurityFilterChain as per Spring Documentation \r\nhttps://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\r\n\r\nsharing the below code for the same\r\n\r\n``` \r\n    @Configuration\r\n    public class SecurityConfiguration {\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                .authorizeHttpRequests((authz) -&gt; authz\r\n                    .anyRequest().authenticated()\r\n                )\r\n                .httpBasic(withDefaults());\r\n            return http.build();\r\n        }\r\n    \r\n        @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n    \treturn (web) -&gt; web.ignoring().requestMatchers(&quot;/*&quot;);\r\n    }\r\n    }\r\n\r\n```\r\n\r\n\r\nIn the RequestMatchers I have allowed all endpoints without Spring Security whereas you can specify the only endpoints which needs to be exposed without Spring Security","title":"How to disable spring-security login screen?","body":"<p>Please note that the use of WebSecurityConfigurerAdapter has been deprecated in the recent Spring versions instead you should be using the SecurityFilterChain as per Spring Documentation\n<a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter</a></p>\n<p>sharing the below code for the same</p>\n<pre><code>    @Configuration\n    public class SecurityConfiguration {\n        @Bean\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n            http\n                .authorizeHttpRequests((authz) -&gt; authz\n                    .anyRequest().authenticated()\n                )\n                .httpBasic(withDefaults());\n            return http.build();\n        }\n    \n        @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.ignoring().requestMatchers(&quot;/*&quot;);\n    }\n    }\n\n</code></pre>\n<p>In the RequestMatchers I have allowed all endpoints without Spring Security whereas you can specify the only endpoints which needs to be exposed without Spring Security</p>\n"},{"tags":[],"owner":{"account_id":8341024,"reputation":1015,"user_id":6266336,"accept_rate":38,"display_name":"Diana"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683205071,"creation_date":1683205071,"answer_id":76173480,"question_id":23636368,"body_markdown":"# Without WebSecurityConfigurerAdapter\r\n\r\n**Kotlin**\r\n\r\n```\r\n@Configuration\r\nclass SecurityConfiguration {\r\n    @Bean\r\n    @Throws(Exception::class)\r\n    fun filterChain(http: HttpSecurity): SecurityFilterChain {\r\n        return http\r\n            .httpBasic().disable()\r\n            .build()\r\n    }\r\n}\r\n\r\n```","title":"How to disable spring-security login screen?","body":"<h1>Without WebSecurityConfigurerAdapter</h1>\n<p><strong>Kotlin</strong></p>\n<pre><code>@Configuration\nclass SecurityConfiguration {\n    @Bean\n    @Throws(Exception::class)\n    fun filterChain(http: HttpSecurity): SecurityFilterChain {\n        return http\n            .httpBasic().disable()\n            .build()\n    }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4225724,"reputation":66,"user_id":3459299,"display_name":"Andr&#233; Jakobsson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690450850,"creation_date":1690450850,"answer_id":76778447,"question_id":23636368,"body_markdown":"Example that works using Spring 6, Boot 3, Java 17. \r\n\r\n```\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.reactive.EnableWebFluxSecurity;\r\nimport org.springframework.security.config.web.server.ServerHttpSecurity;\r\nimport org.springframework.security.web.server.SecurityWebFilterChain;\r\n\r\n@Configuration\r\n@EnableWebFluxSecurity\r\npublic class WebConfig {\r\n    @Bean\r\n    public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\r\n        return http\r\n                .httpBasic(ServerHttpSecurity.HttpBasicSpec::disable)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nAlso don&#39;t forget to add your required modules if you haven&#39;t already. \r\n\r\n```\r\n    requires spring.webflux;\r\n    requires spring.security.config;\r\n    requires spring.security.web;\r\n```\r\n\r\nYou should of course replace your basic HTTP authentication with something more secure.\r\n","title":"How to disable spring-security login screen?","body":"<p>Example that works using Spring 6, Boot 3, Java 17.</p>\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.reactive.EnableWebFluxSecurity;\nimport org.springframework.security.config.web.server.ServerHttpSecurity;\nimport org.springframework.security.web.server.SecurityWebFilterChain;\n\n@Configuration\n@EnableWebFluxSecurity\npublic class WebConfig {\n    @Bean\n    public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\n        return http\n                .httpBasic(ServerHttpSecurity.HttpBasicSpec::disable)\n                .build();\n    }\n}\n</code></pre>\n<p>Also don't forget to add your required modules if you haven't already.</p>\n<pre><code>    requires spring.webflux;\n    requires spring.security.config;\n    requires spring.security.web;\n</code></pre>\n<p>You should of course replace your basic HTTP authentication with something more secure.</p>\n"},{"tags":[],"owner":{"account_id":7402185,"reputation":1651,"user_id":5632255,"accept_rate":88,"display_name":"Mehdi Rahimi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694848705,"creation_date":1694848705,"answer_id":77116756,"question_id":23636368,"body_markdown":"I&#39;m using Spring-Boot v3\r\n---------------------------\r\nand as *[Spring official blog][1]* said:\r\n\r\n&gt; In Spring Security 5.7.0-M2, `WebSecurityConfigurerAdapter` depricated.\r\n\r\nand `SecurityFilterChain` is recommended **So I created a configuration class as:**\r\n  \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration {\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            return http.authorizeHttpRequests((auth) -&gt; auth.anyRequest().permitAll()).build();\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter","title":"How to disable spring-security login screen?","body":"<h2>I'm using Spring-Boot v3</h2>\n<p>and as <em><a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">Spring official blog</a></em> said:</p>\n<blockquote>\n<p>In Spring Security 5.7.0-M2, <code>WebSecurityConfigurerAdapter</code> depricated.</p>\n</blockquote>\n<p>and <code>SecurityFilterChain</code> is recommended <strong>So I created a configuration class as:</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http.authorizeHttpRequests((auth) -&gt; auth.anyRequest().permitAll()).build();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29668709,"reputation":11,"user_id":22738518,"display_name":"Trung"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697259862,"creation_date":1697259862,"answer_id":77291688,"question_id":23636368,"body_markdown":"\r\n\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.ignoring().antMatchers(&quot;/login&quot;);\r\n    }\r\n\r\n\r\nyou can use this to deny access to the /login URL, which will prevent the login page of spring security from loading.\r\nThe **WebSecurityCustomizer** is a callback interface that can be used to customize WebSecurity.\r\n[WebSecurityCustomizer][1]\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter","title":"How to disable spring-security login screen?","body":"<pre><code>@Bean\npublic WebSecurityCustomizer webSecurityCustomizer() {\n    return (web) -&gt; web.ignoring().antMatchers(&quot;/login&quot;);\n}\n</code></pre>\n<p>you can use this to deny access to the /login URL, which will prevent the login page of spring security from loading.\nThe <strong>WebSecurityCustomizer</strong> is a callback interface that can be used to customize WebSecurity.\n<a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">WebSecurityCustomizer</a></p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147522,"favorite_count":0,"down_vote_count":0,"up_vote_count":63,"accepted_answer_id":23648756,"answer_count":18,"score":63,"last_activity_date":1697259862,"creation_date":1399997352,"question_id":23636368,"body_markdown":"I&#39;m using `spring-boot-starter-security` dependency, to make use of several classes that come with `spring-security`. But as I want to integrate it in an existing `vaadin` application, I only want to make use of the classes, and not of the default login/auth screen of spring.\r\n\r\nHow can I disable this screen?\r\n\r\nI cannot make any configurations by extending `WebSecurityConfigurerAdapter` as my main entry class already `extends SpringBootServletInitializer`. Also, vaadin applications basically run on the same URL path all the time and use internal navigation.\r\n\r\n    @EnableAutoConfiguration\r\n    public class MyApp extends SpringBootServletInitializer { \r\n        \r\n        \t@Override\r\n        \tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n        \t\treturn application.sources(MyApp.class);\r\n        \t}\r\n        \t  \r\n        \tpublic static void main(String[] args) {\r\n        \t\tSpringApplication.run(MyApp.class, args);\r\n        \t}\r\n    }\r\n\r\nSo, what could I do to disable the login screen, but though make use of spring security features?","title":"How to disable spring-security login screen?","body":"<p>I'm using <code>spring-boot-starter-security</code> dependency, to make use of several classes that come with <code>spring-security</code>. But as I want to integrate it in an existing <code>vaadin</code> application, I only want to make use of the classes, and not of the default login/auth screen of spring.</p>\n\n<p>How can I disable this screen?</p>\n\n<p>I cannot make any configurations by extending <code>WebSecurityConfigurerAdapter</code> as my main entry class already <code>extends SpringBootServletInitializer</code>. Also, vaadin applications basically run on the same URL path all the time and use internal navigation.</p>\n\n<pre><code>@EnableAutoConfiguration\npublic class MyApp extends SpringBootServletInitializer { \n\n        @Override\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n            return application.sources(MyApp.class);\n        }\n\n        public static void main(String[] args) {\n            SpringApplication.run(MyApp.class, args);\n        }\n}\n</code></pre>\n\n<p>So, what could I do to disable the login screen, but though make use of spring security features?</p>\n"},{"tags":["java","concurrency","parallel-processing","java-stream","completable-future"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":9,"creation_date":1570930633,"post_id":58359879,"comment_id":103072144,"body_markdown":"You can&#39;t. If this would be possible, you would know how many items each future would yield. What is possible is to turn it into a `CompletableFuture&lt;Stream&lt;Item&gt;&gt;`.","body":"You can&#39;t. If this would be possible, you would know how many items each future would yield. What is possible is to turn it into a <code>CompletableFuture&lt;Stream&lt;Item&gt;&gt;</code>."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695718337,"post_id":58359879,"comment_id":136058486,"body_markdown":"I have submitted a solution that meets the requirements listed. Please read it in its entirety, as it has some important details and unintuitive points.","body":"I have submitted a solution that meets the requirements listed. Please read it in its entirety, as it has some important details and unintuitive points."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1695787529,"post_id":58359879,"comment_id":136069486,"body_markdown":"As others have said, it&#39;s only possible if you know the list sizes in advance. Otherwise there&#39;s no way to know whether a given future is waiting on the current list or the next list in the source stream. Unless you&#39;re willing to wait on each list before proceeding to the next. Or if order doesn&#39;t matter at all, you can stream each list as it&#39;s returned.","body":"As others have said, it&#39;s only possible if you know the list sizes in advance. Otherwise there&#39;s no way to know whether a given future is waiting on the current list or the next list in the source stream. Unless you&#39;re willing to wait on each list before proceeding to the next. Or if order doesn&#39;t matter at all, you can stream each list as it&#39;s returned."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696733287,"post_id":58359879,"comment_id":136190520,"body_markdown":"@AlexR So, what is the actual requirement? Do you want to see a coding approach in JDK 21?","body":"@AlexR So, what is the actual requirement? Do you want to see a coding approach in JDK 21?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1696849762,"post_id":58359879,"comment_id":136201249,"body_markdown":"Do you need to retain the order of the elements (order within the list and/or order of the lists themselves)?","body":"Do you need to retain the order of the elements (order within the list and/or order of the lists themselves)?"},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696868803,"post_id":58359879,"comment_id":136205144,"body_markdown":"@Holger no, I do not. The only order that matters is to be able to process the task results in completion order for the purpose of avoiding unnecessary blocking.","body":"@Holger no, I do not. The only order that matters is to be able to process the task results in completion order for the purpose of avoiding unnecessary blocking."}],"answers":[{"comments":[{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696728901,"post_id":58461457,"comment_id":136190310,"body_markdown":"I still don&#39;t understand this answer. I wonder if it might be easier to understand if it used `CompletableFuture&lt;List&lt;Integer&gt;&gt;` in place of `CompletableFuture&lt;List&lt;Object&gt;&gt;` and each `getDiceRoll()` had a random `sleep()` within it.","body":"I still don&#39;t understand this answer. I wonder if it might be easier to understand if it used <code>CompletableFuture&lt;List&lt;Integer&gt;&gt;</code> in place of <code>CompletableFuture&lt;List&lt;Object&gt;&gt;</code> and each <code>getDiceRoll()</code> had a random <code>sleep()</code> within it."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1696767393,"post_id":58461457,"comment_id":136192944,"body_markdown":"The dice roll is just for creating the `CompletableFuture&lt;List&lt;Object&gt;&gt;`. It has as many elements as the dice will roll. If a general method as you requested would exist, I could get the result of the dice roll without waiting for it.","body":"The dice roll is just for creating the <code>CompletableFuture&lt;List&lt;Object&gt;&gt;</code>. It has as many elements as the dice will roll. If a general method as you requested would exist, I could get the result of the dice roll without waiting for it."}],"tags":[],"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571469827,"creation_date":1571469827,"answer_id":58461457,"question_id":58359879,"body_markdown":"As I wrote in my comment, this is impossible.\r\n\r\nConsider a some arbitrary service, which will return a `CompletableFuture&lt;Integer&gt;`:\r\n\r\n    CompletableFuture&lt;Integer&gt; getDiceRoll();\r\n\r\nI can now convert this `CompletableFuture&lt;Integer&gt;` to a `Stream&lt;CompletableFuture&lt;List&lt;Object&gt;&gt;&gt;` without any problem:\r\n\r\n    Stream&lt;CompletableFuture&lt;List&lt;Object&gt;&gt;&gt; futureList = Stream.of(getDiceRoll().thenApply(n -&gt; List.of(new Object[n])));\r\n\r\nLet&#39;s suppose there would be a general way to turn a `Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt;` into a `Stream&lt;CompletableFuture&lt;T&gt;&gt;`:\r\n\r\n    &lt;T&gt; Stream&lt;CompletableFuture&lt;T&gt; magic(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; arg);\r\n\r\nThen I can do the following:\r\n\r\n    int diceRoll = magic(Stream.of(getDiceRoll().thenApply(n -&gt; List.of(new Object[n])))).count();\r\n\r\nWait, what?  \r\nI am now able to get an arbitrary integer out of a `CompletableFuture`.\r\nWhich means, with some engineering effort I can get all the information out of a CompletableFuture - after all, memory is just some numbers.\r\n\r\nSo we have to conclude that a method like `magic` can not exist, without violating the time fabric.  \r\nAnd this is the answer: There is no such method, because it can not exist.","title":"How to flatten a list inside a stream of completable futures?","body":"<p>As I wrote in my comment, this is impossible.</p>\n\n<p>Consider a some arbitrary service, which will return a <code>CompletableFuture&lt;Integer&gt;</code>:</p>\n\n<pre><code>CompletableFuture&lt;Integer&gt; getDiceRoll();\n</code></pre>\n\n<p>I can now convert this <code>CompletableFuture&lt;Integer&gt;</code> to a <code>Stream&lt;CompletableFuture&lt;List&lt;Object&gt;&gt;&gt;</code> without any problem:</p>\n\n<pre><code>Stream&lt;CompletableFuture&lt;List&lt;Object&gt;&gt;&gt; futureList = Stream.of(getDiceRoll().thenApply(n -&gt; List.of(new Object[n])));\n</code></pre>\n\n<p>Let's suppose there would be a general way to turn a <code>Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt;</code> into a <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code>:</p>\n\n<pre><code>&lt;T&gt; Stream&lt;CompletableFuture&lt;T&gt; magic(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; arg);\n</code></pre>\n\n<p>Then I can do the following:</p>\n\n<pre><code>int diceRoll = magic(Stream.of(getDiceRoll().thenApply(n -&gt; List.of(new Object[n])))).count();\n</code></pre>\n\n<p>Wait, what?<br>\nI am now able to get an arbitrary integer out of a <code>CompletableFuture</code>.\nWhich means, with some engineering effort I can get all the information out of a CompletableFuture - after all, memory is just some numbers.</p>\n\n<p>So we have to conclude that a method like <code>magic</code> can not exist, without violating the time fabric.<br>\nAnd this is the answer: There is no such method, because it can not exist.</p>\n"},{"tags":[],"owner":{"account_id":21653617,"reputation":41,"user_id":15973811,"display_name":"Nishika"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1622459714,"creation_date":1621907655,"answer_id":67680771,"question_id":58359879,"body_markdown":"Agreed with Johannes Kuhn. You can&#39;t know Futures&#39;s state while it&#39;s still executing and thus can not convert from Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;\r\nto Stream&lt;CompletableFuture&lt;Item&gt;&gt; .\r\n\r\n\r\nAlthough the output of stream can be merged using following piece of code - \r\n```java Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; ``` to ```java List&lt;Item&gt; ``` or\r\n\r\n```java List&lt;CompletableFuture&lt;List&lt;AuditRecord&gt;&gt;&gt; ``` to ```java List&lt;Item&gt; ```\r\n\r\n```java   \r\nList&lt;Item&gt; output = input.map(CompletableFuture::join).collect(toList()).stream()\r\n    .flatMap(Collection::stream).collect(toList());\r\n```\r\n\r\n","title":"How to flatten a list inside a stream of completable futures?","body":"<p>Agreed with Johannes Kuhn. You can't know Futures's state while it's still executing and thus can not convert from Stream&lt;CompletableFuture&lt;List&gt;&gt;\nto Stream&lt;CompletableFuture&gt; .</p>\n<p>Although the output of stream can be merged using following piece of code -\n<code>java Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; </code> to <code>java List&lt;Item&gt; </code> or</p>\n<p><code>java List&lt;CompletableFuture&lt;List&lt;AuditRecord&gt;&gt;&gt; </code> to <code>java List&lt;Item&gt; </code></p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Item&gt; output = input.map(CompletableFuture::join).collect(toList()).stream()\n    .flatMap(Collection::stream).collect(toList());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1695785920,"post_id":77178436,"comment_id":136069373,"body_markdown":"Interesting response. We have some different assumptions at play here. Per the Java documentation, `CompletableFuture` _represents a future result of an asynchronous computation_. Your code uses a synthetic CompletableFuture that&#39;s not asynchronous at all. The original question is based on the premise that the `CompletableFuture`s run asynchronously, i.e. autonomously in some other thread(s), as afforded in the Java documentation. I&#39;ll clarify this in the question.","body":"Interesting response. We have some different assumptions at play here. Per the Java documentation, <code>CompletableFuture</code> <i>represents a future result of an asynchronous computation</i>. Your code uses a synthetic CompletableFuture that&#39;s not asynchronous at all. The original question is based on the premise that the <code>CompletableFuture</code>s run asynchronously, i.e. autonomously in some other thread(s), as afforded in the Java documentation. I&#39;ll clarify this in the question."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695788206,"post_id":77178436,"comment_id":136069522,"body_markdown":"@AlexR I&#39;m going to need more info than that. What part of my answer do you take issue with? Do you dislike the call to `CompletableFuture::completedFuture`? That can easily be swapped out with `CompletableFuture::supplyAsync` instead. Do you take issue with something else entirely?","body":"@AlexR I&#39;m going to need more info than that. What part of my answer do you take issue with? Do you dislike the call to <code>CompletableFuture::completedFuture</code>? That can easily be swapped out with <code>CompletableFuture::supplyAsync</code> instead. Do you take issue with something else entirely?"},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":1,"creation_date":1695840529,"post_id":77178436,"comment_id":136079175,"body_markdown":"specifically your test-case does not contain any asynchronous processing, and so it does not demonstrate how to efficiently wait for a stream of lists of asynchronous processes to complete.","body":"specifically your test-case does not contain any asynchronous processing, and so it does not demonstrate how to efficiently wait for a stream of lists of asynchronous processes to complete."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695844410,"post_id":77178436,"comment_id":136079798,"body_markdown":"@AlexR Oh that&#39;s incredibly easy. See where I put `sequential()`? Change that to parallel. It is now running asynchronously.","body":"@AlexR Oh that&#39;s incredibly easy. See where I put <code>sequential()</code>? Change that to parallel. It is now running asynchronously."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695844528,"post_id":77178436,"comment_id":136079818,"body_markdown":"@AlexR Please note, making it asynchronous means that you will not get deterministic behaviour. So, it will not always iterate through only the elements it needs to. It will sometimes go a little further than expected, since it is running asynchronously, and thus, checking multiple other lists while checking the one it is currently on.","body":"@AlexR Please note, making it asynchronous means that you will not get deterministic behaviour. So, it will not always iterate through only the elements it needs to. It will sometimes go a little further than expected, since it is running asynchronously, and thus, checking multiple other lists while checking the one it is currently on."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695844746,"post_id":77178436,"comment_id":136079851,"body_markdown":"I have edited my answer to include both of the changes @AlexR","body":"I have edited my answer to include both of the changes @AlexR"},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1695938286,"post_id":77178436,"comment_id":136094104,"body_markdown":"Thank you. I need to review this code a little more carefully.","body":"Thank you. I need to review this code a little more carefully."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696530372,"post_id":77178436,"comment_id":136168561,"body_markdown":"I don&#39;t think this code is correct. I believe the way to prevent blocking would be to spawn a thread for each item in the List as each List becomes available, then have threads populate a queue which in turn is drained by another Stream.","body":"I don&#39;t think this code is correct. I believe the way to prevent blocking would be to spawn a thread for each item in the List as each List becomes available, then have threads populate a queue which in turn is drained by another Stream."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696545873,"post_id":77178436,"comment_id":136170853,"body_markdown":"@AlexR If you did that, you would actually be ***slower*** than my solution. What you have just described is essentially recreating what `Strem::parallel` does. `Stream::parallel` does something similar to what you described, but it uses a Spliterator, which allows it to make a judgement call over when you should and SHOULD NOT use parallelism. If you just indiscriminately threads to grab each element, you would lose performance.","body":"@AlexR If you did that, you would actually be <b><i>slower</i></b> than my solution. What you have just described is essentially recreating what <code>Strem::parallel</code> does. <code>Stream::parallel</code> does something similar to what you described, but it uses a Spliterator, which allows it to make a judgement call over when you should and SHOULD NOT use parallelism. If you just indiscriminately threads to grab each element, you would lose performance."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696545970,"post_id":77178436,"comment_id":136170859,"body_markdown":"Now, if you want to squeeze every drop of performance out of this (and the lists in question are MASSIVE), I could add a few more `Stream::parallel` calls, which would help recreate what you seem to want, but again, it does it conditionally, and only when it proves to itself that it would be beneficial to do so. I have updated my answer to include parallel calls wherever possible.","body":"Now, if you want to squeeze every drop of performance out of this (and the lists in question are MASSIVE), I could add a few more <code>Stream::parallel</code> calls, which would help recreate what you seem to want, but again, it does it conditionally, and only when it proves to itself that it would be beneficial to do so. I have updated my answer to include parallel calls wherever possible."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696546239,"post_id":77178436,"comment_id":136170884,"body_markdown":"And even then, I actually have made my solution slower now in certain circumstances. If those sublists are small enough, then my decision to add a parallel call will actually make things slower than if I had done it sequentially. That conditional judgement call I talked about doesn&#39;t always get things right, so switching to all parallel like I just did should only ever be done when it is proven that it is faster. With performance tests.","body":"And even then, I actually have made my solution slower now in certain circumstances. If those sublists are small enough, then my decision to add a parallel call will actually make things slower than if I had done it sequentially. That conditional judgement call I talked about doesn&#39;t always get things right, so switching to all parallel like I just did should only ever be done when it is proven that it is faster. With performance tests."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696546713,"post_id":77178436,"comment_id":136170912,"body_markdown":"The only reason we should ever use parallelism is if we can get a speed boost. If we do not get the speed boost over sequential, then parallelism does literally nothing good for you. So do not tie yourself to concepts such as blocking and non-blocking. Tie yourself to the reality of &quot;does this strategy speed up my performance or not?&quot; And it is ***ONLY WHEN YOU KNOW THE ANSWER TO THAT QUESTION*** should you then dig into the next question of &quot;Why?&quot; If you do not follow this order of operations, you run the risk of making false assumptions.","body":"The only reason we should ever use parallelism is if we can get a speed boost. If we do not get the speed boost over sequential, then parallelism does literally nothing good for you. So do not tie yourself to concepts such as blocking and non-blocking. Tie yourself to the reality of &quot;does this strategy speed up my performance or not?&quot; And it is <b><i>ONLY WHEN YOU KNOW THE ANSWER TO THAT QUESTION</i></b> should you then dig into the next question of &quot;Why?&quot; If you do not follow this order of operations, you run the risk of making false assumptions."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696546827,"post_id":77178436,"comment_id":136170920,"body_markdown":"But all that said, after adding all those parallel calls, my solution truly is now non-blocking, even if it is at the detriment of the performance in certain edge cases. I would really love to learn what use case led to you having such strange and contradictory requirements. This whole question may just be an XY problem -- https://en.wikipedia.org/wiki/XY_problem","body":"But all that said, after adding all those parallel calls, my solution truly is now non-blocking, even if it is at the detriment of the performance in certain edge cases. I would really love to learn what use case led to you having such strange and contradictory requirements. This whole question may just be an XY problem -- <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/XY_problem</a>"},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696699977,"post_id":77178436,"comment_id":136188087,"body_markdown":"This scenario came up in a project that I worked on 4 years ago, and I no longer have the details of the use-case. But I still think it was a valid question, and I decided to revisit it now that Java 21 has come out with the virtual threads feature which should make this possible. The answer from Nishika is the most insightful: &quot;_You can&#39;t know Futures&#39;s state while it&#39;s still executing_&quot; - and that&#39;s the path to a solution. If we can create a virtual thread to monitor the each Future, it becomes possible to know each Future&#39;s completion state just in time to drive a stream of completions.","body":"This scenario came up in a project that I worked on 4 years ago, and I no longer have the details of the use-case. But I still think it was a valid question, and I decided to revisit it now that Java 21 has come out with the virtual threads feature which should make this possible. The answer from Nishika is the most insightful: &quot;<i>You can&#39;t know Futures&#39;s state while it&#39;s still executing</i>&quot; - and that&#39;s the path to a solution. If we can create a virtual thread to monitor the each Future, it becomes possible to know each Future&#39;s completion state just in time to drive a stream of completions."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696700611,"post_id":77178436,"comment_id":136188135,"body_markdown":"Thanks again for the deep discussion on this. Please note that the commentary regarding the parallel solution being slower is really not applicable here, because I seem to have left out an important assumption: the asynchronous tasks which are referenced in the Stream of Lists are I/O-bound, not CPU-bound. Apologies for not making this clear initially. I&#39;ll add it as a clarification.","body":"Thanks again for the deep discussion on this. Please note that the commentary regarding the parallel solution being slower is really not applicable here, because I seem to have left out an important assumption: the asynchronous tasks which are referenced in the Stream of Lists are I/O-bound, not CPU-bound. Apologies for not making this clear initially. I&#39;ll add it as a clarification."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696715391,"post_id":77178436,"comment_id":136189500,"body_markdown":"@AlexR Respectfully, that&#39;s pretty much the most important detail to leave out. It seems it really was an XY Problem. If that is true, then yes, you no longer care about speed at all, you care about ***throughput***. In that situation, a virtual thread per task makes sense. That is actually the officially suggested solution when you are willing to sacrifice speed in order to get throughput. Understanding that now, the question then becomes - ***how much*** speed are you willing to sacrifice to get throughput? Because, depending on the answer will decide which solution is best.","body":"@AlexR Respectfully, that&#39;s pretty much the most important detail to leave out. It seems it really was an XY Problem. If that is true, then yes, you no longer care about speed at all, you care about <b><i>throughput</i></b>. In that situation, a virtual thread per task makes sense. That is actually the officially suggested solution when you are willing to sacrifice speed in order to get throughput. Understanding that now, the question then becomes - <b><i>how much</i></b> speed are you willing to sacrifice to get throughput? Because, depending on the answer will decide which solution is best."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696715600,"post_id":77178436,"comment_id":136189512,"body_markdown":"If you are 100% certain that you have enough memory, CPU, network bandwidth (and maybe disk space, depending on if you need to store some of it locally) to handle this task at its worst, then virtual thread per task makes the most sense. But, if any of the above becomes false, then you need to start making changes. For example, how frequently are these requests coming in? Is it possible to have 2 requests being processed simultaneously, or can they only occur 1 after the other? What about the concurrency? Do you have other tasks besides this use case running on the same machine?","body":"If you are 100% certain that you have enough memory, CPU, network bandwidth (and maybe disk space, depending on if you need to store some of it locally) to handle this task at its worst, then virtual thread per task makes the most sense. But, if any of the above becomes false, then you need to start making changes. For example, how frequently are these requests coming in? Is it possible to have 2 requests being processed simultaneously, or can they only occur 1 after the other? What about the concurrency? Do you have other tasks besides this use case running on the same machine?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696715788,"post_id":77178436,"comment_id":136189528,"body_markdown":"And don&#39;t forget about the actual task at hand. What are you actually doing? Are you trying to find the first occurrence of a certain something? Are you looking for a number of them? Is there a &quot;likely candidate&quot;? All of these are questions that would influence the answer. As a result, a question like yours would be a much better fit for Code Review Stack Exchange, with the full context and code provided. That way, someone can help critique the strengths and weaknesses of your current solution. A virtual thread per task is a good starting point, but it will likely need to be iterated upon.","body":"And don&#39;t forget about the actual task at hand. What are you actually doing? Are you trying to find the first occurrence of a certain something? Are you looking for a number of them? Is there a &quot;likely candidate&quot;? All of these are questions that would influence the answer. As a result, a question like yours would be a much better fit for Code Review Stack Exchange, with the full context and code provided. That way, someone can help critique the strengths and weaknesses of your current solution. A virtual thread per task is a good starting point, but it will likely need to be iterated upon."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696716357,"post_id":77178436,"comment_id":136189566,"body_markdown":"Neither speed or throughput were an original requirement. The question was _How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?_","body":"Neither speed or throughput were an original requirement. The question was <i>How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?</i>"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696716556,"post_id":77178436,"comment_id":136189583,"body_markdown":"@AlexR To be perfectly frank, your requirements were contradictory in and of themselves. You want a stream that does not block, and yet, you don&#39;t want to prematurely consume more items than necessary. Those are contradictory requirements. Either we must do some unnecessary work (firing off a virtual thread per task, even though some of the tasks are stream items we will end up not caring about) or we will block.","body":"@AlexR To be perfectly frank, your requirements were contradictory in and of themselves. You want a stream that does not block, and yet, you don&#39;t want to prematurely consume more items than necessary. Those are contradictory requirements. Either we must do some unnecessary work (firing off a virtual thread per task, even though some of the tasks are stream items we will end up not caring about) or we will block."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696716724,"post_id":77178436,"comment_id":136189593,"body_markdown":"That said, contradictory requirements are common on this site. So, the best I (and others answering) could come up with was that you wanted efficiency, and you thought that getting it via that Stream of futures was somehow faster. So, we all gave our best suggestions, but we all acknowledged that it still won&#39;t get you what you likely really want, at least, not as your question phrased it.","body":"That said, contradictory requirements are common on this site. So, the best I (and others answering) could come up with was that you wanted efficiency, and you thought that getting it via that Stream of futures was somehow faster. So, we all gave our best suggestions, but we all acknowledged that it still won&#39;t get you what you likely really want, at least, not as your question phrased it."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696727712,"post_id":77178436,"comment_id":136190259,"body_markdown":"Well then. The other two answers saying it&#39;s impossible may be correct. I&#39;ll study the long answer form Johannes Kuhn again to try to understand his reasoning.","body":"Well then. The other two answers saying it&#39;s impossible may be correct. I&#39;ll study the long answer form Johannes Kuhn again to try to understand his reasoning."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696727847,"post_id":77178436,"comment_id":136190270,"body_markdown":"@AlexR If it were me, I would make a brand new question with the necessary context, then ping the 2 others above, and let them know. You&#39;ll probably get an answer that better addresses your true goals. Also link it to me as well. Of course, if you are happy with any of the answers we provided, then that works too.","body":"@AlexR If it were me, I would make a brand new question with the necessary context, then ping the 2 others above, and let them know. You&#39;ll probably get an answer that better addresses your true goals. Also link it to me as well. Of course, if you are happy with any of the answers we provided, then that works too."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696727992,"post_id":77178436,"comment_id":136190276,"body_markdown":"TBH, I think the question shows a profound misunderstanding I had over how Streams work. In my mind at the time I asked, I should have been able to use a Stream of Futures in places where I really needed a Nonblocking Queue. A new question would not properly express this confusion, and would be a different question.","body":"TBH, I think the question shows a profound misunderstanding I had over how Streams work. In my mind at the time I asked, I should have been able to use a Stream of Futures in places where I really needed a Nonblocking Queue. A new question would not properly express this confusion, and would be a different question."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696730087,"post_id":77178436,"comment_id":136190379,"body_markdown":"@AlexR Oh by all means, remove the misunderstandings, and you get a different question. That&#39;s my point - it sounded like you might still have a question that none of our answers have addressed. If so, feel free to raise a new question.","body":"@AlexR Oh by all means, remove the misunderstandings, and you get a different question. That&#39;s my point - it sounded like you might still have a question that none of our answers have addressed. If so, feel free to raise a new question."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696730399,"post_id":77178436,"comment_id":136190403,"body_markdown":"Hi David, I think the original question deserves an answer. Either it&#39;s impossible, or the question has an incorrect premise, or there is a clever way (which I was attempting in my original code, please have a look at that again). I&#39;ve added +100 bounty points. Also think about this - if I remove the misunderstandings, there is no question left to ask, is there?","body":"Hi David, I think the original question deserves an answer. Either it&#39;s impossible, or the question has an incorrect premise, or there is a clever way (which I was attempting in my original code, please have a look at that again). I&#39;ve added +100 bounty points. Also think about this - if I remove the misunderstandings, there is no question left to ask, is there?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696731149,"post_id":77178436,"comment_id":136190437,"body_markdown":"@AlexR Misunderstandings was not the right word for me to use, but I understand your point. Taking a look now.","body":"@AlexR Misunderstandings was not the right word for me to use, but I understand your point. Taking a look now."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696731383,"post_id":77178436,"comment_id":136190448,"body_markdown":"@AlexR LOL yes, I can answer this question. I never would have originally guessed that this is what your original question was asking. Rather than editing this answer, I&#39;ll simply submit a new answer.","body":"@AlexR LOL yes, I can answer this question. I never would have originally guessed that this is what your original question was asking. Rather than editing this answer, I&#39;ll simply submit a new answer."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696734506,"post_id":77178436,"comment_id":136190583,"body_markdown":"@AlexR I&#39;ll finish my answer tomorrow or something. But spoiler alert, now that I understand that this is your question, the answer is to use `ExecutorService::newVirtualThreadPerTask`. I&#39;ll go into more detail once I get a chance to finish this thing. Ideally tomorrow.","body":"@AlexR I&#39;ll finish my answer tomorrow or something. But spoiler alert, now that I understand that this is your question, the answer is to use <code>ExecutorService::newVirtualThreadPerTask</code>. I&#39;ll go into more detail once I get a chance to finish this thing. Ideally tomorrow."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1696798531,"post_id":77178436,"comment_id":136195992,"body_markdown":"&quot;_will IMMEDIATELY start computation_&quot; – Not really. The only stages that start an actual computation immediately, at least in the standard API, are `supplyAsync` and `runAsync`. You can have an entire chain/tree of stages all rooted with one built via `new CompletableFuture&lt;&gt;()` and nothing will actually happen until that root stage is completed &quot;manually&quot; (or some other stage in the chain/tree is completed, but that will only cause further computations in that stage&#39;s descendants, not any of its ancestors or stages in entirely separate branches).","body":"&quot;<i>will IMMEDIATELY start computation</i>&quot; – Not really. The only stages that start an actual computation immediately, at least in the standard API, are <code>supplyAsync</code> and <code>runAsync</code>. You can have an entire chain/tree of stages all rooted with one built via <code>new CompletableFuture&lt;&gt;()</code> and nothing will actually happen until that root stage is completed &quot;manually&quot; (or some other stage in the chain/tree is completed, but that will only cause further computations in that stage&#39;s descendants, not any of its ancestors or stages in entirely separate branches)."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696883800,"post_id":77178436,"comment_id":136207630,"body_markdown":"@Slaw touche. I&#39;m actually going to delete this answer because I think the other answers have captured what I wanted to say.","body":"@Slaw touche. I&#39;m actually going to delete this answer because I think the other answers have captured what I wanted to say."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1696883872,"post_id":77178436,"comment_id":136207647,"body_markdown":"@AlexR The bounty has brought in a lot of new answers, some of which have already said what I wanted to. I&#39;ll delete my answer and encourage you to read through those.","body":"@AlexR The bounty has brought in a lot of new answers, some of which have already said what I wanted to. I&#39;ll delete my answer and encourage you to read through those."}],"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":32,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696546059,"creation_date":1695718202,"answer_id":77178436,"question_id":58359879,"body_markdown":"&gt; I have this:\r\n&gt; \r\n&gt; `Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;`\r\n&gt; \r\n&gt; how can I convert it to\r\n&gt; \r\n&gt; `Stream&lt;CompletableFuture&lt;Item&gt;&gt;`\r\n&gt; \r\n&gt; I looked into thenCompose but that solves a completely different problem which is also referred to as &quot;flattening&quot;.\r\n&gt; \r\n&gt; How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?\r\n\r\nThis is absolutely possible, but long story short, it will save you no work, it will add overhead in ways that provide you no benefit, and will actually make your code slower in the long run. You will have accomplished nothing of value by doing this.\r\n\r\nThe reason for this is simple -- `CompletableFuture` operates on a [push-down design][1]. Meaning, the ***INSTANT*** you attempt to attach a chaining call (`thenApply`, `thenCompose`, etc) or a complete call (`get`, `join`, `complete`), `CompletableFuture` will IMMEDIATELY start computation. It may be easier to think of `CompletableFuture` to being eager evaluation the moment that you chain a follow-up function to it. Not every follow up function will trigger computation, but all of the useful ones will.\r\n\r\nWhat this means is that, the second you try to even touch (metaphorically) a `CompletableFuture`, you have triggered it to start computing. And this computation is &quot;necessary&quot;, so it still meets your requirements.\r\n\r\nI am happy to go into detail about why the function you wanted to call on the `CompletableFuture&lt;Item&gt;` would either be the same impact as just fetching from the `CompletableFuture&lt;List&lt;Item&gt;&gt;`, or would be even more expensive and slower for no benefit. Please tell me, then I will amend this answer and explain exactly why your desired function will not help you in any useful way, other than being the form that you like for whatever arbitrary reason.\r\n\r\nRegardless, if this is truly what you want, then here is how.\r\n\r\n```java\r\n\r\nimport java.util.List;\r\nimport java.util.concurrent.CompletableFuture;\r\nimport java.util.stream.Stream;\r\n\r\npublic class SOQ_20230926\r\n{\r\n\r\n   public static void main(String[] args) throws Exception\r\n   {\r\n   \r\n      record Item(int index) {}\r\n   \r\n      final Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; pointA =\r\n         create\r\n         (\r\n            List\r\n               .of\r\n               (\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(4), new Item(5), new Item(6)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9))\r\n               )\r\n         )\r\n         ;\r\n   \r\n      final Stream&lt;CompletableFuture&lt;Item&gt;&gt; pointZ = convert(pointA);\r\n   \r\n      final Item item =\r\n         pointZ\r\n            .parallel()\r\n            .map(CompletableFuture::join)\r\n            .filter(eachItem -&gt; eachItem.index() == 4)\r\n            .findFirst()\r\n            .orElseThrow()\r\n            ;\r\n   \r\n      System.out.println(item);\r\n   \r\n   }\r\n\r\n   private static &lt;T&gt; Stream&lt;CompletableFuture&lt;T&gt;&gt; convert(final Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; pointA)\r\n   {\r\n   \r\n      return\r\n         pointA\r\n            .parallel()\r\n            .map\r\n            (\r\n               eachFuture -&gt;\r\n                  eachFuture\r\n                     .thenApply\r\n                     (\r\n                        batch -&gt;\r\n                           batch\r\n                              .parallelStream()\r\n                              .map(eachElement -&gt; CompletableFuture.supplyAsync(() -&gt; eachElement))\r\n                              .toList()\r\n                     )\r\n            )\r\n            .map(CompletableFuture::join)\r\n            .flatMap(List::stream)\r\n            ;\r\n   \r\n   }\r\n\r\n   private static &lt;T&gt; Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; create(final List&lt;List&lt;T&gt;&gt; lists)\r\n   {\r\n   \r\n      return\r\n         lists\r\n            .parallelStream()\r\n            .map\r\n            (\r\n               eachList -&gt;\r\n                  CompletableFuture\r\n                     .supplyAsync\r\n                     (\r\n                        () -&gt;\r\n                        {\r\n                        \r\n                           System.out.println(&quot;COMPUTATION WAS PERFORMED&quot;);\r\n                        \r\n                           return eachList;\r\n                        \r\n                        }\r\n                     )\r\n         \r\n            )\r\n            ;\r\n   \r\n   }\r\n\r\n}\r\n```\r\n\r\nAnd here is the output.\r\n\r\n```\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nItem[index=4]\r\n```\r\n\r\nAs you can see, the `Stream` &quot;stopped early&quot;, only doing the work necessary to find the `Item` it needed.\r\n\r\nIf it had done more work than needed, we would have seen all 54 lines of `COMPUTATION WAS PERFORMED`, but we only see 31, because that was all that was needed to find our value. The rest of the batches remained unopened because we found what we needed.\r\n\r\nThis should meet your 2 requirements. Those are the following.\r\n\r\n&gt; I have this:\r\n&gt; \r\n&gt; `Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;`\r\n&gt; \r\n&gt; how can I convert it to\r\n&gt; \r\n&gt; `Stream&lt;CompletableFuture&lt;Item&gt;&gt;`\r\n\r\n\r\n&gt; How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?\r\n\r\n  [1]: https://stackoverflow.com/a/38421639/10118965","title":"How to flatten a list inside a stream of completable futures?","body":"<blockquote>\n<p>I have this:</p>\n<p><code>Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;</code></p>\n<p>how can I convert it to</p>\n<p><code>Stream&lt;CompletableFuture&lt;Item&gt;&gt;</code></p>\n<p>I looked into thenCompose but that solves a completely different problem which is also referred to as &quot;flattening&quot;.</p>\n<p>How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?</p>\n</blockquote>\n<p>This is absolutely possible, but long story short, it will save you no work, it will add overhead in ways that provide you no benefit, and will actually make your code slower in the long run. You will have accomplished nothing of value by doing this.</p>\n<p>The reason for this is simple -- <code>CompletableFuture</code> operates on a <a href=\"https://stackoverflow.com/a/38421639/10118965\">push-down design</a>. Meaning, the <em><strong>INSTANT</strong></em> you attempt to attach a chaining call (<code>thenApply</code>, <code>thenCompose</code>, etc) or a complete call (<code>get</code>, <code>join</code>, <code>complete</code>), <code>CompletableFuture</code> will IMMEDIATELY start computation. It may be easier to think of <code>CompletableFuture</code> to being eager evaluation the moment that you chain a follow-up function to it. Not every follow up function will trigger computation, but all of the useful ones will.</p>\n<p>What this means is that, the second you try to even touch (metaphorically) a <code>CompletableFuture</code>, you have triggered it to start computing. And this computation is &quot;necessary&quot;, so it still meets your requirements.</p>\n<p>I am happy to go into detail about why the function you wanted to call on the <code>CompletableFuture&lt;Item&gt;</code> would either be the same impact as just fetching from the <code>CompletableFuture&lt;List&lt;Item&gt;&gt;</code>, or would be even more expensive and slower for no benefit. Please tell me, then I will amend this answer and explain exactly why your desired function will not help you in any useful way, other than being the form that you like for whatever arbitrary reason.</p>\n<p>Regardless, if this is truly what you want, then here is how.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.stream.Stream;\n\npublic class SOQ_20230926\n{\n\n   public static void main(String[] args) throws Exception\n   {\n   \n      record Item(int index) {}\n   \n      final Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; pointA =\n         create\n         (\n            List\n               .of\n               (\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(4), new Item(5), new Item(6)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9))\n               )\n         )\n         ;\n   \n      final Stream&lt;CompletableFuture&lt;Item&gt;&gt; pointZ = convert(pointA);\n   \n      final Item item =\n         pointZ\n            .parallel()\n            .map(CompletableFuture::join)\n            .filter(eachItem -&gt; eachItem.index() == 4)\n            .findFirst()\n            .orElseThrow()\n            ;\n   \n      System.out.println(item);\n   \n   }\n\n   private static &lt;T&gt; Stream&lt;CompletableFuture&lt;T&gt;&gt; convert(final Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; pointA)\n   {\n   \n      return\n         pointA\n            .parallel()\n            .map\n            (\n               eachFuture -&gt;\n                  eachFuture\n                     .thenApply\n                     (\n                        batch -&gt;\n                           batch\n                              .parallelStream()\n                              .map(eachElement -&gt; CompletableFuture.supplyAsync(() -&gt; eachElement))\n                              .toList()\n                     )\n            )\n            .map(CompletableFuture::join)\n            .flatMap(List::stream)\n            ;\n   \n   }\n\n   private static &lt;T&gt; Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; create(final List&lt;List&lt;T&gt;&gt; lists)\n   {\n   \n      return\n         lists\n            .parallelStream()\n            .map\n            (\n               eachList -&gt;\n                  CompletableFuture\n                     .supplyAsync\n                     (\n                        () -&gt;\n                        {\n                        \n                           System.out.println(&quot;COMPUTATION WAS PERFORMED&quot;);\n                        \n                           return eachList;\n                        \n                        }\n                     )\n         \n            )\n            ;\n   \n   }\n\n}\n</code></pre>\n<p>And here is the output.</p>\n<pre><code>COMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nItem[index=4]\n</code></pre>\n<p>As you can see, the <code>Stream</code> &quot;stopped early&quot;, only doing the work necessary to find the <code>Item</code> it needed.</p>\n<p>If it had done more work than needed, we would have seen all 54 lines of <code>COMPUTATION WAS PERFORMED</code>, but we only see 31, because that was all that was needed to find our value. The rest of the batches remained unopened because we found what we needed.</p>\n<p>This should meet your 2 requirements. Those are the following.</p>\n<blockquote>\n<p>I have this:</p>\n<p><code>Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;</code></p>\n<p>how can I convert it to</p>\n<p><code>Stream&lt;CompletableFuture&lt;Item&gt;&gt;</code></p>\n</blockquote>\n<blockquote>\n<p>How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696821269,"post_id":77255485,"comment_id":136197411,"body_markdown":"Also, I think I see the flaw in my original code: the `queue.submit(() -&gt; ender.get());` probably executes before all the `thenApply()` consumers in the line above it.","body":"Also, I think I see the flaw in my original code: the <code>queue.submit(() -&gt; ender.get());</code> probably executes before all the <code>thenApply()</code> consumers in the line above it."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1696834068,"post_id":77255485,"comment_id":136198497,"body_markdown":"I&#39;ve edited my answer. Let me know if it still helps. Also, if you wouldn&#39;t mind, I recommend deleting most (if not all) of your existing comments under this answer to clean it up a bit.","body":"I&#39;ve edited my answer. Let me know if it still helps. Also, if you wouldn&#39;t mind, I recommend deleting most (if not all) of your existing comments under this answer to clean it up a bit."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696836382,"post_id":77255485,"comment_id":136198858,"body_markdown":"Thanks. I deleted all outdated comments. I&#39;ll have to study your current code in more detail, especially considering it&#39;s so much more verbose than the pseudo-code at  https://stackoverflow.com/a/77256137/196032","body":"Thanks. I deleted all outdated comments. I&#39;ll have to study your current code in more detail, especially considering it&#39;s so much more verbose than the pseudo-code at  <a href=\"https://stackoverflow.com/a/77256137/196032\">stackoverflow.com/a/77256137/196032</a>"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1696837115,"post_id":77255485,"comment_id":136198982,"body_markdown":"Yeah, it might be a little overengineered. And some parts might be able to be simplified. Let me know if something needs clarifying. I also didn&#39;t spend too much time analyzing it or testing it, so let me know if you spot an issue as well.","body":"Yeah, it might be a little overengineered. And some parts might be able to be simplified. Let me know if something needs clarifying. I also didn&#39;t spend too much time analyzing it or testing it, so let me know if you spot an issue as well."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1696883215,"post_id":77255485,"comment_id":136207554,"body_markdown":"If and when you accept an answer, I suggest Holger&#39;s. Their solution is more elegant than mine (as expected).","body":"If and when you accept an answer, I suggest Holger&#39;s. Their solution is more elegant than mine (as expected)."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696883640,"post_id":77255485,"comment_id":136207604,"body_markdown":"@Slaw Both of you have brought a lot of value to this site. We&#39;re blessed to have you both - neither one more than the other.","body":"@Slaw Both of you have brought a lot of value to this site. We&#39;re blessed to have you both - neither one more than the other."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1696888687,"post_id":77255485,"comment_id":136208192,"body_markdown":"@davidalayachew Thanks, I appreciate it. Though note I&#39;m not complaining nor disheartened. Always happy to see more elegant solutions. It&#39;s a great way to learn, and Holger is one of the top Java/JVM experts on this site.","body":"@davidalayachew Thanks, I appreciate it. Though note I&#39;m not complaining nor disheartened. Always happy to see more elegant solutions. It&#39;s a great way to learn, and Holger is one of the top Java/JVM experts on this site."}],"tags":[],"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697257837,"creation_date":1696802165,"answer_id":77255485,"question_id":58359879,"body_markdown":"# The Problem\r\n\r\nAs I understand it, your problem can be summarized by the following:\r\n\r\n1. You have multiple producers running concurrently. These producers are instances of `CompletableFuture`.\r\n\r\n    * In your case, you are getting these futures from a `Stream`, but the actual source of the futures doesn&#39;t seem critical, just so long as the source is a container that can be iterated in some way.\r\n\r\n2. You have a single consumer running concurrently with the producers. The consumer is a `Stream`.\r\n\r\n3. You want to stay within the stream API, at least from an external perspective. In other words, you want to map `Stream&lt;CompletableFuture&lt;T&gt;&gt;` (the producers) to `Stream&lt;T&gt;` (the consumer).\r\n\r\n4. You want to consume the result of a producer as soon as possible. No waiting to process a result because the consumer is blocked waiting for a different producer to complete.\r\n\r\nAt a fundamental level, the question seems to be how to stream the results from asynchronous computations without blocking on the futures themselves.\r\n\r\n\r\n---\r\n\r\n# Solution\r\n\r\nThe major hurdle to overcome here is that we don&#39;t know when a future will complete. That wouldn&#39;t matter much if you didn&#39;t care about processing results as soon as possible, because then you could just do:\r\n\r\n```java\r\nstream.map(CompletableFuture::join)\r\n```\r\n\r\nBut you do care about processing results as soon as possible, and the above will wait on a future even if another one has completed. To do what you want, we&#39;ll have to use an intermediate `BlockingQueue` that each future adds its result to when complete (without blocking). Then we need another _separate_ stream that reads from that queue until all results have been processed.\r\n\r\nHere&#39;s a slightly modified version of [Holger&#39;s solution][1] which:\r\n\r\n* Can work with any `CompletionStage` implementation.\r\n\r\n* Gives you the stage results directly instead of flattening them for you. If your results are lists, then you can just do `flatMap(List::stream)` when needed.\r\n\r\n    * As an aside, addressing the original question, I&#39;m of the opinion that if your results are lists, then wrapping each individual element of a list in its own `CompletableFuture` doesn&#39;t add much value. Especially since each future will have to be, by design, already completed (normally or exceptionally). If you want to launch asynchronous tasks for each element in a list, do that downstream. And if you want to handle exceptions, rather than crashing the stream on the first failure, then you can modify the below to expose the nested `Result` class (possibly modified itself) or handle the exceptions in the stages upstream (e.g., `exceptionally[Async]` or `handle[Async]` stages).\r\n\r\n* Implements splitting based on the result of calling `trySplit()` on the source `Spliterator`.\r\n\r\n**Note:** This replaces my old, inferior solution. You can look at the edit history to see the old solution if you want.\r\n&#160;\r\n```java\r\nimport java.util.Objects;\r\nimport java.util.Spliterator;\r\nimport java.util.concurrent.BlockingQueue;\r\nimport java.util.concurrent.CancellationException;\r\nimport java.util.concurrent.CompletableFuture;\r\nimport java.util.concurrent.CompletionException;\r\nimport java.util.concurrent.CompletionStage;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.LinkedBlockingQueue;\r\nimport java.util.concurrent.atomic.AtomicLong;\r\nimport java.util.function.Consumer;\r\nimport java.util.stream.Stream;\r\nimport java.util.stream.StreamSupport;\r\n\r\npublic class WhenCompleteSpliterator&lt;T&gt; implements Spliterator&lt;T&gt; {\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; streamResults(Iterable&lt;? extends CompletionStage&lt;T&gt;&gt; iterable) {\r\n        return StreamSupport.stream(new WhenCompleteSpliterator&lt;&gt;(iterable.spliterator()), false);\r\n    }\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; mapToResults(Stream&lt;? extends CompletionStage&lt;T&gt;&gt; stream) {\r\n        return StreamSupport.stream(new WhenCompleteSpliterator&lt;&gt;(stream.spliterator()), false);\r\n    }\r\n\r\n    private final BlockingQueue&lt;Result&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\r\n    private final AtomicLong pending = new AtomicLong();\r\n    private Result&lt;T&gt; immediate;\r\n\r\n    private final Spliterator&lt;? extends CompletionStage&lt;T&gt;&gt; upstream;\r\n    private final long estimatedSize;\r\n\r\n    public WhenCompleteSpliterator(Spliterator&lt;? extends CompletionStage&lt;T&gt;&gt; upstream) {\r\n        this.upstream = Objects.requireNonNull(upstream);\r\n        this.estimatedSize = upstream.estimateSize();\r\n    }\r\n\r\n    @Override\r\n    public long estimateSize() {\r\n        return estimatedSize;\r\n    }\r\n\r\n    @Override\r\n    public int characteristics() {\r\n        return 0; // No characteristics.\r\n    }\r\n\r\n    @Override\r\n    public Spliterator&lt;T&gt; trySplit() {\r\n        // Split based on upstream&#39;s ability to split.\r\n        var upstreamSplit = upstream.trySplit();\r\n        return upstreamSplit == null ? null : new WhenCompleteSpliterator&lt;&gt;(upstreamSplit);\r\n    }\r\n\r\n    @Override\r\n    public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n        Objects.requireNonNull(action);\r\n\r\n        // Take from queue immediately if not empty.\r\n        if (takeFromQueue(false, action)) {\r\n            return true;\r\n        }\r\n\r\n        // Consume upstream stages until all consumed or an already-completed stage is encountered.\r\n        while (upstream.tryAdvance(this::consumeStage)) {\r\n            if (takeImmediate(action)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        // Take from queue if not empty OR there are pending stages.\r\n        if (takeFromQueue(true, action)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private void consumeStage(CompletionStage&lt;T&gt; stage) {\r\n        var cf = stage instanceof CompletableFuture&lt;T&gt; self ? self : stage.toCompletableFuture();\r\n        if (cf.isDone()) {\r\n            try {\r\n                immediate = Result.ofSuccess(cf.join());\r\n            } catch (CompletionException | CancellationException ex) {\r\n                immediate = Result.ofFailure(ex);\r\n            }\r\n        } else {\r\n            pending.incrementAndGet();\r\n            stage.whenComplete((value, error) -&gt; {\r\n                queue.add(error == null ? Result.ofSuccess(value) : Result.ofFailure(error));\r\n                pending.decrementAndGet();\r\n            });\r\n        }\r\n    }\r\n\r\n    private boolean takeFromQueue(boolean waitForPending, Consumer&lt;? super T&gt; action) {\r\n        try {\r\n            if ((waitForPending &amp;&amp; pending.get() &gt; 0L) || !queue.isEmpty()) {\r\n                action.accept(queue.take().valueOrThrow());\r\n                return true;\r\n            }\r\n            return false;\r\n        } catch (InterruptedException ex) {\r\n            throw new CompletionException(&quot;Interrupted while waiting for upstream stage result.&quot;, ex);\r\n        }\r\n    }\r\n\r\n    private boolean takeImmediate(Consumer&lt;? super T&gt; action) {\r\n        var immediate = this.immediate;\r\n        if (immediate != null) {\r\n            this.immediate = null;\r\n            action.accept(immediate.valueOrThrow());\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private static class Result&lt;T&gt; {\r\n\r\n        static &lt;T&gt; Result&lt;T&gt; ofSuccess(T value) {\r\n            return new Result&lt;&gt;(value, null);\r\n        }\r\n\r\n        static &lt;T&gt; Result&lt;T&gt; ofFailure(Throwable error) {\r\n            assert error != null;\r\n            return new Result&lt;&gt;(null, error);\r\n        }\r\n\r\n        private final T value;\r\n        private final Throwable error;\r\n\r\n        private Result(T value, Throwable error) {\r\n            this.value = value;\r\n            this.error = error;\r\n        }\r\n\r\n        T valueOrThrow() {\r\n            if (error == null) {\r\n                return value;\r\n            } else {\r\n                var message = &quot;An upstream stage completed exceptionally.&quot;;\r\n                if (error instanceof CompletionException || error instanceof ExecutionException) {\r\n                    var cause = error.getCause();\r\n                    if (cause != null) {\r\n                        // Wrap exception in new CompletionException for stack trace purposes.\r\n                        throw new CompletionException(message, cause);\r\n                    }\r\n                }\r\n                // Wrap exception in new CompletionException for stack trace purposes.\r\n                throw new CompletionException(message, error);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd here&#39;s an example using the above:\r\n\r\n```java\r\nimport java.time.Clock;\r\nimport java.time.LocalTime;\r\nimport java.time.ZoneId;\r\nimport java.util.Random;\r\nimport java.util.concurrent.CompletableFuture;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        var clock = Clock.tickMillis(ZoneId.systemDefault());\r\n\r\n        var executor = Executors.newVirtualThreadPerTaskExecutor();\r\n        var futures = new Random().ints(5, 2, 30)\r\n                .mapToObj(seconds -&gt; CompletableFuture.supplyAsync(() -&gt; {\r\n                    try {\r\n                        System.out.printf(&quot;[%s] Beginning %,2d second sleep!%n&quot;, LocalTime.now(clock), seconds);\r\n                        Thread.sleep(seconds * 1000);\r\n                        return String.format(&quot;[%s] Slept for %,2d seconds!&quot;, LocalTime.now(clock), seconds);\r\n                    } catch (InterruptedException ex) {\r\n                        throw new RuntimeException(ex);\r\n                    }\r\n                }, executor));\r\n        WhenCompleteSpliterator.mapToResults(futures).forEach(System.out::println);\r\n        System.out.println(&quot;DONE!&quot;);\r\n    }\r\n}\r\n```\r\n\r\nNote the example uses a virtual thread pool simply to ensure all &quot;sleep tasks&quot; are started around the same time, regardless of how many there are. A &quot;normal&quot; cached thread pool could do the same job (though you&#39;d probably want to use daemon threads for the example).\r\n\r\nAnd example output:\r\n\r\n```none\r\n[22:07:24.134] Beginning 28 second sleep!\r\n[22:07:24.132] Beginning  4 second sleep!\r\n[22:07:24.134] Beginning 10 second sleep!\r\n[22:07:24.133] Beginning 20 second sleep!\r\n[22:07:24.133] Beginning  6 second sleep!\r\n[22:07:28.166] Slept for  4 seconds!\r\n[22:07:30.158] Slept for  6 seconds!\r\n[22:07:34.169] Slept for 10 seconds!\r\n[22:07:44.158] Slept for 20 seconds!\r\n[22:07:52.160] Slept for 28 seconds!\r\nDONE!\r\n```\r\n\r\n## Virtual Threads\r\n\r\nVirtual threads won&#39;t really help with the mapping from `Stream&lt;CompletableFuture&lt;T&gt;&gt;` to `Stream&lt;T&gt;`. Though since your background tasks are I/O bound, using a virtual thread pool to execute said background tasks _might_ be beneficial.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77260684/6395627\r\n","title":"How to flatten a list inside a stream of completable futures?","body":"<h1>The Problem</h1>\n<p>As I understand it, your problem can be summarized by the following:</p>\n<ol>\n<li><p>You have multiple producers running concurrently. These producers are instances of <code>CompletableFuture</code>.</p>\n<ul>\n<li>In your case, you are getting these futures from a <code>Stream</code>, but the actual source of the futures doesn't seem critical, just so long as the source is a container that can be iterated in some way.</li>\n</ul>\n</li>\n<li><p>You have a single consumer running concurrently with the producers. The consumer is a <code>Stream</code>.</p>\n</li>\n<li><p>You want to stay within the stream API, at least from an external perspective. In other words, you want to map <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code> (the producers) to <code>Stream&lt;T&gt;</code> (the consumer).</p>\n</li>\n<li><p>You want to consume the result of a producer as soon as possible. No waiting to process a result because the consumer is blocked waiting for a different producer to complete.</p>\n</li>\n</ol>\n<p>At a fundamental level, the question seems to be how to stream the results from asynchronous computations without blocking on the futures themselves.</p>\n<hr />\n<h1>Solution</h1>\n<p>The major hurdle to overcome here is that we don't know when a future will complete. That wouldn't matter much if you didn't care about processing results as soon as possible, because then you could just do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>stream.map(CompletableFuture::join)\n</code></pre>\n<p>But you do care about processing results as soon as possible, and the above will wait on a future even if another one has completed. To do what you want, we'll have to use an intermediate <code>BlockingQueue</code> that each future adds its result to when complete (without blocking). Then we need another <em>separate</em> stream that reads from that queue until all results have been processed.</p>\n<p>Here's a slightly modified version of <a href=\"https://stackoverflow.com/a/77260684/6395627\">Holger's solution</a> which:</p>\n<ul>\n<li><p>Can work with any <code>CompletionStage</code> implementation.</p>\n</li>\n<li><p>Gives you the stage results directly instead of flattening them for you. If your results are lists, then you can just do <code>flatMap(List::stream)</code> when needed.</p>\n<ul>\n<li>As an aside, addressing the original question, I'm of the opinion that if your results are lists, then wrapping each individual element of a list in its own <code>CompletableFuture</code> doesn't add much value. Especially since each future will have to be, by design, already completed (normally or exceptionally). If you want to launch asynchronous tasks for each element in a list, do that downstream. And if you want to handle exceptions, rather than crashing the stream on the first failure, then you can modify the below to expose the nested <code>Result</code> class (possibly modified itself) or handle the exceptions in the stages upstream (e.g., <code>exceptionally[Async]</code> or <code>handle[Async]</code> stages).</li>\n</ul>\n</li>\n<li><p>Implements splitting based on the result of calling <code>trySplit()</code> on the source <code>Spliterator</code>.</p>\n</li>\n</ul>\n<p><strong>Note:</strong> This replaces my old, inferior solution. You can look at the edit history to see the old solution if you want.\n </p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Objects;\nimport java.util.Spliterator;\nimport java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.CancellationException;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.CompletionException;\nimport java.util.concurrent.CompletionStage;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.LinkedBlockingQueue;\nimport java.util.concurrent.atomic.AtomicLong;\nimport java.util.function.Consumer;\nimport java.util.stream.Stream;\nimport java.util.stream.StreamSupport;\n\npublic class WhenCompleteSpliterator&lt;T&gt; implements Spliterator&lt;T&gt; {\n\n    public static &lt;T&gt; Stream&lt;T&gt; streamResults(Iterable&lt;? extends CompletionStage&lt;T&gt;&gt; iterable) {\n        return StreamSupport.stream(new WhenCompleteSpliterator&lt;&gt;(iterable.spliterator()), false);\n    }\n\n    public static &lt;T&gt; Stream&lt;T&gt; mapToResults(Stream&lt;? extends CompletionStage&lt;T&gt;&gt; stream) {\n        return StreamSupport.stream(new WhenCompleteSpliterator&lt;&gt;(stream.spliterator()), false);\n    }\n\n    private final BlockingQueue&lt;Result&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\n    private final AtomicLong pending = new AtomicLong();\n    private Result&lt;T&gt; immediate;\n\n    private final Spliterator&lt;? extends CompletionStage&lt;T&gt;&gt; upstream;\n    private final long estimatedSize;\n\n    public WhenCompleteSpliterator(Spliterator&lt;? extends CompletionStage&lt;T&gt;&gt; upstream) {\n        this.upstream = Objects.requireNonNull(upstream);\n        this.estimatedSize = upstream.estimateSize();\n    }\n\n    @Override\n    public long estimateSize() {\n        return estimatedSize;\n    }\n\n    @Override\n    public int characteristics() {\n        return 0; // No characteristics.\n    }\n\n    @Override\n    public Spliterator&lt;T&gt; trySplit() {\n        // Split based on upstream's ability to split.\n        var upstreamSplit = upstream.trySplit();\n        return upstreamSplit == null ? null : new WhenCompleteSpliterator&lt;&gt;(upstreamSplit);\n    }\n\n    @Override\n    public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n        Objects.requireNonNull(action);\n\n        // Take from queue immediately if not empty.\n        if (takeFromQueue(false, action)) {\n            return true;\n        }\n\n        // Consume upstream stages until all consumed or an already-completed stage is encountered.\n        while (upstream.tryAdvance(this::consumeStage)) {\n            if (takeImmediate(action)) {\n                return true;\n            }\n        }\n\n        // Take from queue if not empty OR there are pending stages.\n        if (takeFromQueue(true, action)) {\n            return true;\n        }\n\n        return false;\n    }\n\n    private void consumeStage(CompletionStage&lt;T&gt; stage) {\n        var cf = stage instanceof CompletableFuture&lt;T&gt; self ? self : stage.toCompletableFuture();\n        if (cf.isDone()) {\n            try {\n                immediate = Result.ofSuccess(cf.join());\n            } catch (CompletionException | CancellationException ex) {\n                immediate = Result.ofFailure(ex);\n            }\n        } else {\n            pending.incrementAndGet();\n            stage.whenComplete((value, error) -&gt; {\n                queue.add(error == null ? Result.ofSuccess(value) : Result.ofFailure(error));\n                pending.decrementAndGet();\n            });\n        }\n    }\n\n    private boolean takeFromQueue(boolean waitForPending, Consumer&lt;? super T&gt; action) {\n        try {\n            if ((waitForPending &amp;&amp; pending.get() &gt; 0L) || !queue.isEmpty()) {\n                action.accept(queue.take().valueOrThrow());\n                return true;\n            }\n            return false;\n        } catch (InterruptedException ex) {\n            throw new CompletionException(&quot;Interrupted while waiting for upstream stage result.&quot;, ex);\n        }\n    }\n\n    private boolean takeImmediate(Consumer&lt;? super T&gt; action) {\n        var immediate = this.immediate;\n        if (immediate != null) {\n            this.immediate = null;\n            action.accept(immediate.valueOrThrow());\n            return true;\n        }\n        return false;\n    }\n\n    private static class Result&lt;T&gt; {\n\n        static &lt;T&gt; Result&lt;T&gt; ofSuccess(T value) {\n            return new Result&lt;&gt;(value, null);\n        }\n\n        static &lt;T&gt; Result&lt;T&gt; ofFailure(Throwable error) {\n            assert error != null;\n            return new Result&lt;&gt;(null, error);\n        }\n\n        private final T value;\n        private final Throwable error;\n\n        private Result(T value, Throwable error) {\n            this.value = value;\n            this.error = error;\n        }\n\n        T valueOrThrow() {\n            if (error == null) {\n                return value;\n            } else {\n                var message = &quot;An upstream stage completed exceptionally.&quot;;\n                if (error instanceof CompletionException || error instanceof ExecutionException) {\n                    var cause = error.getCause();\n                    if (cause != null) {\n                        // Wrap exception in new CompletionException for stack trace purposes.\n                        throw new CompletionException(message, cause);\n                    }\n                }\n                // Wrap exception in new CompletionException for stack trace purposes.\n                throw new CompletionException(message, error);\n            }\n        }\n    }\n}\n</code></pre>\n<p>And here's an example using the above:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.Clock;\nimport java.time.LocalTime;\nimport java.time.ZoneId;\nimport java.util.Random;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.Executors;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        var clock = Clock.tickMillis(ZoneId.systemDefault());\n\n        var executor = Executors.newVirtualThreadPerTaskExecutor();\n        var futures = new Random().ints(5, 2, 30)\n                .mapToObj(seconds -&gt; CompletableFuture.supplyAsync(() -&gt; {\n                    try {\n                        System.out.printf(&quot;[%s] Beginning %,2d second sleep!%n&quot;, LocalTime.now(clock), seconds);\n                        Thread.sleep(seconds * 1000);\n                        return String.format(&quot;[%s] Slept for %,2d seconds!&quot;, LocalTime.now(clock), seconds);\n                    } catch (InterruptedException ex) {\n                        throw new RuntimeException(ex);\n                    }\n                }, executor));\n        WhenCompleteSpliterator.mapToResults(futures).forEach(System.out::println);\n        System.out.println(&quot;DONE!&quot;);\n    }\n}\n</code></pre>\n<p>Note the example uses a virtual thread pool simply to ensure all &quot;sleep tasks&quot; are started around the same time, regardless of how many there are. A &quot;normal&quot; cached thread pool could do the same job (though you'd probably want to use daemon threads for the example).</p>\n<p>And example output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[22:07:24.134] Beginning 28 second sleep!\n[22:07:24.132] Beginning  4 second sleep!\n[22:07:24.134] Beginning 10 second sleep!\n[22:07:24.133] Beginning 20 second sleep!\n[22:07:24.133] Beginning  6 second sleep!\n[22:07:28.166] Slept for  4 seconds!\n[22:07:30.158] Slept for  6 seconds!\n[22:07:34.169] Slept for 10 seconds!\n[22:07:44.158] Slept for 20 seconds!\n[22:07:52.160] Slept for 28 seconds!\nDONE!\n</code></pre>\n<h2>Virtual Threads</h2>\n<p>Virtual threads won't really help with the mapping from <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code> to <code>Stream&lt;T&gt;</code>. Though since your background tasks are I/O bound, using a virtual thread pool to execute said background tasks <em>might</em> be beneficial.</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1696849994,"post_id":77256137,"comment_id":136201301,"body_markdown":"This does not ensure that `queue.offer(EOL)` is done after the other `offer` calls. Further, `List.of()` might (and does in practice) return a shared object that may also occur as a normal result from one of the futures.","body":"This does not ensure that <code>queue.offer(EOL)</code> is done after the other <code>offer</code> calls. Further, <code>List.of()</code> might (and does in practice) return a shared object that may also occur as a normal result from one of the futures."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696869056,"post_id":77256137,"comment_id":136205190,"body_markdown":"Thanks, I made some fixes. Please note my own answer is not acceptable because it is pseudo-code that references things that don&#39;t exist.","body":"Thanks, I made some fixes. Please note my own answer is not acceptable because it is pseudo-code that references things that don&#39;t exist."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1696873586,"post_id":77256137,"comment_id":136205994,"body_markdown":"Well, there’s [`takeWhile`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#takeWhile(java.util.function.Predicate)) which you can use instead of the non-existing `stopWhen`; you just have to negate the condition. The `blockUntilAllAcceptAsyncsHaveExecuted()` could be implemented using `CompletableFuture.allOf` but when you use `allOf`, you can chain a `whenComplete(x -&gt; queue.offer(EOL))` in the first place, then you don’t need a virtual thread. Still, it implies eagerly traversing the entire source stream which my answer’s solution avoids.","body":"Well, there’s <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#takeWhile(java.util.function.Predicate)\" rel=\"nofollow noreferrer\"><code>takeWhile</code></a> which you can use instead of the non-existing <code>stopWhen</code>; you just have to negate the condition. The <code>blockUntilAllAcceptAsyncsHaveExecuted()</code> could be implemented using <code>CompletableFuture.allOf</code> but when you use <code>allOf</code>, you can chain a <code>whenComplete(x -&gt; queue.offer(EOL))</code> in the first place, then you don’t need a virtual thread. Still, it implies eagerly traversing the entire source stream which my answer’s solution avoids."}],"tags":[],"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696868997,"creation_date":1696822231,"answer_id":77256137,"question_id":58359879,"body_markdown":"Here&#39;s some **pseudo-code** of what I&#39;m thinking now after conversation with @Slaw:\r\n\r\n    public class StreamTest {\r\n    \r\n        static &lt;T&gt; Stream&lt;T&gt; flattenResults(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; stream) {\r\n            List&lt;T&gt; EOL = new ArrayList&lt;&gt;();\r\n            BlockingQueue&lt;List&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\r\n    \r\n            Thread thread = Thread.ofVirtual().start(() -&gt; {\r\n                stream.forEach(future -&gt; future.thenAcceptAsync(queue::offer));\r\n\r\n                // this pseudo-code method ensures EOL is not added prematurely\r\n                blockUntilAllAcceptAsyncsHaveExecuted();\r\n\r\n                queue.offer(EOL);\r\n            });\r\n    \r\n            return Stream.generate(() -&gt; {\r\n                        try {\r\n                            return queue.poll(Integer.MAX_VALUE, TimeUnit.SECONDS);\r\n                        } catch (InterruptedException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    })\r\n                    .stopWhen(i -&gt; i == EOL) // this method doesn&#39;t exist!\r\n                    .filter(i -&gt; i != EOL)\r\n                    .flatMap(List::stream);\r\n        }\r\n    }\r\n\r\n","title":"How to flatten a list inside a stream of completable futures?","body":"<p>Here's some <strong>pseudo-code</strong> of what I'm thinking now after conversation with @Slaw:</p>\n<pre><code>public class StreamTest {\n\n    static &lt;T&gt; Stream&lt;T&gt; flattenResults(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; stream) {\n        List&lt;T&gt; EOL = new ArrayList&lt;&gt;();\n        BlockingQueue&lt;List&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\n\n        Thread thread = Thread.ofVirtual().start(() -&gt; {\n            stream.forEach(future -&gt; future.thenAcceptAsync(queue::offer));\n\n            // this pseudo-code method ensures EOL is not added prematurely\n            blockUntilAllAcceptAsyncsHaveExecuted();\n\n            queue.offer(EOL);\n        });\n\n        return Stream.generate(() -&gt; {\n                    try {\n                        return queue.poll(Integer.MAX_VALUE, TimeUnit.SECONDS);\n                    } catch (InterruptedException e) {\n                        throw new RuntimeException(e);\n                    }\n                })\n                .stopWhen(i -&gt; i == EOL) // this method doesn't exist!\n                .filter(i -&gt; i != EOL)\n                .flatMap(List::stream);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696838286,"creation_date":1696838286,"answer_id":77257121,"question_id":58359879,"body_markdown":"This has been discussed, but I&#39;d still like to give my variation of Nishika&#39;s answer with a slight repositioning:\r\n\r\n```\r\nStream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; origStream = // ...\r\n// make streams out of the lists first\r\nfinal Stream&lt;CompletableFuture&lt;Stream&lt;Item&gt;&gt;&gt; streamFutures =\r\n             origStream.map(f -&gt; f.thenApply(Collection::stream));\r\n```\r\n\r\nThis makes it clearer that the actual item streams of the individual futures can only be retrieved when their completion stage is finished.\r\n\r\nAdditionally, you&#39;ll only be able to `flatMap` these streams by again waiting for the individual completion, ie `join`ing on the futures. So now you can just do:\r\n\r\n```\r\nfinal Stream&lt;Item&gt; itemStream = streamFutures.flatMap(CompletableFuture::join);\r\n```\r\n\r\nYou can make a `CompletableFuture` out of this:\r\n\r\n```\r\nfinal CompletableFuture&lt;Stream&lt;Item&gt;&gt; itemStreamFuture =\r\n                CompletableFuture.supplyAsync(() -&gt; streamFutures.flatMap(CompletableFuture::join));\r\n```\r\n\r\nbut you hardly gain any concurrency except the call isn&#39;t blocking. I&#39;d wager the `join`s themselves are handled concurrently if the stream is created as parallel.","title":"How to flatten a list inside a stream of completable futures?","body":"<p>This has been discussed, but I'd still like to give my variation of Nishika's answer with a slight repositioning:</p>\n<pre><code>Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; origStream = // ...\n// make streams out of the lists first\nfinal Stream&lt;CompletableFuture&lt;Stream&lt;Item&gt;&gt;&gt; streamFutures =\n             origStream.map(f -&gt; f.thenApply(Collection::stream));\n</code></pre>\n<p>This makes it clearer that the actual item streams of the individual futures can only be retrieved when their completion stage is finished.</p>\n<p>Additionally, you'll only be able to <code>flatMap</code> these streams by again waiting for the individual completion, ie <code>join</code>ing on the futures. So now you can just do:</p>\n<pre><code>final Stream&lt;Item&gt; itemStream = streamFutures.flatMap(CompletableFuture::join);\n</code></pre>\n<p>You can make a <code>CompletableFuture</code> out of this:</p>\n<pre><code>final CompletableFuture&lt;Stream&lt;Item&gt;&gt; itemStreamFuture =\n                CompletableFuture.supplyAsync(() -&gt; streamFutures.flatMap(CompletableFuture::join));\n</code></pre>\n<p>but you hardly gain any concurrency except the call isn't blocking. I'd wager the <code>join</code>s themselves are handled concurrently if the stream is created as parallel.</p>\n"},{"comments":[{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696869535,"post_id":77260398,"comment_id":136205274,"body_markdown":"Assume 3 futures that completes in 2, 5 and 10 seconds but processing takes an additional 4 seconds each. This code will complete in 22 seconds `(max(2,5,10) + 4*count([2,5,10])`, but the goal is to complete in 14 seconds `(max(2+4,5+4,10+4))`. Now if you add processing in a `thenAsync()` method, your solution would be pretty close, it&#39;s just missing a final step to return a `Stream`.","body":"Assume 3 futures that completes in 2, 5 and 10 seconds but processing takes an additional 4 seconds each. This code will complete in 22 seconds <code>(max(2,5,10) + 4*count([2,5,10])</code>, but the goal is to complete in 14 seconds <code>(max(2+4,5+4,10+4))</code>. Now if you add processing in a <code>thenAsync()</code> method, your solution would be pretty close, it&#39;s just missing a final step to return a <code>Stream</code>."},{"owner":{"account_id":9661155,"reputation":104,"user_id":22683654,"display_name":"Roma S"},"score":0,"creation_date":1696869701,"post_id":77260398,"comment_id":136205314,"body_markdown":"Nope blockingAnswer() completes in max of future delay, cause using countdown latch for blocking, try run it","body":"Nope blockingAnswer() completes in max of future delay, cause using countdown latch for blocking, try run it"},{"owner":{"account_id":9661155,"reputation":104,"user_id":22683654,"display_name":"Roma S"},"score":0,"creation_date":1696870070,"post_id":77260398,"comment_id":136205393,"body_markdown":"Hmm im not noticed &quot;processing each&quot;, so if each processing is 4 sec then you need 3 threads anyway for achieve a total time of 14","body":"Hmm im not noticed &quot;processing each&quot;, so if each processing is 4 sec then you need 3 threads anyway for achieve a total time of 14"}],"tags":[],"owner":{"account_id":9661155,"reputation":104,"user_id":22683654,"display_name":"Roma S"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696868582,"creation_date":1696868582,"answer_id":77260398,"question_id":58359879,"body_markdown":"In your update4 you say:  \r\n\r\n&gt; How can you take a Stream that&#39;s produced in arbitrary order, and re-order it into futures execution completion order, so that a flatMap() operation will not block unnecessaril  \r\n\r\nSuppose u have 3 futures that completes in 2, 5 and 10 seconds accordingly and u wants some `method` that returns an ordered by execution time stream, so in this way u have to wait until all futures are done (or fail) because until u dont know is future is done or fail u dont know how long was execution time.  \r\nYou can create ordered stream of results with blocking:\r\n```java\r\n    private static final ExecutorService executorService = Executors.newFixedThreadPool(15);\r\n    private static final ExecutorService consumerService = Executors.newFixedThreadPool(15);\r\n    private static final Random random = new Random();\r\n    private static final AtomicInteger ID = new AtomicInteger(0);\r\n    private static final List&lt;DelayedListSupplier&gt; completionOrder = Collections.synchronizedList(new ArrayList&lt;&gt;());\r\n\r\n    @RequiredArgsConstructor\r\n    @Getter\r\n    public static class DelayedListSupplier implements Supplier&lt;List&lt;String&gt;&gt; {\r\n        private final int delayMs;\r\n        private final int id;\r\n\r\n        @Override\r\n        public List&lt;String&gt; get() {\r\n            try {\r\n                if (random.nextInt(10) &lt; 2) {\r\n                    System.out.println(\r\n                            String.format(\r\n                                    &quot;Thread [%s]; Future %s FAILED.&quot;,\r\n                                    Thread.currentThread().getName(),\r\n                                    id\r\n                            )\r\n                    );\r\n                    throw new RuntimeException(&quot;Error!&quot; + id);\r\n                }\r\n                Thread.sleep(delayMs);\r\n                System.out.println(\r\n                        String.format(\r\n                                &quot;Thread [%s]; Future %s is completed.&quot;,\r\n                                Thread.currentThread().getName(),\r\n                                id\r\n                        )\r\n                );\r\n                //just for SOUT\r\n                completionOrder.add(this);\r\n                return List.of(&quot;Future&quot; + id);\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        System.out.println(&quot;Start blocking&quot;);\r\n        blockingAnswer();\r\n        System.out.println(&quot;Start non blocking&quot;);\r\n        nonBlockingAnswer();\r\n        executorService.shutdown();\r\n        consumerService.awaitTermination(10, TimeUnit.SECONDS);\r\n        consumerService.shutdown();\r\n    }\r\n\r\n    private static void nonBlockingAnswer() {\r\n        List&lt;DelayedListSupplier&gt; delayedSuppliers = createDelayedSuppliers();\r\n        Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; futuresStream = getFutures(delayedSuppliers);\r\n        futuresStream.forEachOrdered(cf -&gt; {\r\n            cf.whenComplete((r,e) -&gt; {\r\n                if (e == null) {\r\n                    consumerService.execute(() -&gt; {\r\n                        //handle results here\r\n                        System.out.println(&quot;Recevied results from future&quot; + r.get(0));\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    private static void blockingAnswer() throws InterruptedException {\r\n        //prepare futures\r\n        List&lt;DelayedListSupplier&gt; suppliers = createDelayedSuppliers();\r\n        //map them to CompletableFuture\r\n        Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; cf = getFutures(suppliers);\r\n        List&lt;List&lt;String&gt;&gt; results = Collections.synchronizedList(new LinkedList&lt;&gt;());\r\n\r\n        //we need collect futures for using CountDownLatch\r\n        List&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; futures = cf.collect(Collectors.toList());\r\n\r\n        int maxWaitTime = suppliers.stream()\r\n                .max(Comparator.comparing(DelayedListSupplier::getDelayMs))\r\n                .map(DelayedListSupplier::getDelayMs)\r\n                .orElseThrow();\r\n        long start = System.currentTimeMillis();\r\n        //for method exit we need to N futures completed or failed\r\n        CountDownLatch cdl = new CountDownLatch((int) futures.size());\r\n        futures.forEach(f -&gt; {\r\n            //add post-execution logic for each future\r\n            f.whenComplete((r, e) -&gt; {\r\n                cdl.countDown();\r\n                //if no exception this is actual result\r\n                if (e == null) {\r\n                    results.add(r);\r\n                }\r\n            });\r\n        });\r\n\r\n        //wait until each future will done or 1000 days\r\n        cdl.await(1000, TimeUnit.DAYS);\r\n        long end = System.currentTimeMillis();\r\n        System.out.println(\r\n                String.format(\r\n                        &quot;Execution time: %s ms; Max wait time: %s&quot;,\r\n                        end - start,\r\n                        maxWaitTime\r\n                )\r\n        );\r\n        System.out.println(&quot;Future Results: &quot; + completionOrder.stream().map(s -&gt; &quot;&quot; + s.getId()).collect(Collectors.joining(&quot;, &quot;)));\r\n\r\n        //our result stream here\r\n        Stream&lt;String&gt; resultStream = results.stream().flatMap(Collection::stream);\r\n        System.out.println(\r\n                String.format(\r\n                        &quot;FlatMap: %s&quot;,\r\n                        resultStream.collect(Collectors.joining(&quot;, &quot;))\r\n                )\r\n        );\r\n    }\r\n\r\n    private static List&lt;DelayedListSupplier&gt; createDelayedSuppliers() {\r\n        List&lt;DelayedListSupplier&gt; suppliers = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            suppliers.add(\r\n                    new DelayedListSupplier(\r\n                            (random.nextInt(6) + 1) * 1000,\r\n                            ID.incrementAndGet()\r\n                    )\r\n            );\r\n        }\r\n        return suppliers;\r\n    }\r\n\r\n    private static Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; getFutures(List&lt;DelayedListSupplier&gt; suppliers) {\r\n        return suppliers.stream()\r\n                .map(s -&gt; CompletableFuture.supplyAsync(s, executorService));\r\n    }\r\n```\r\n\r\nFor non blocking at all u have to use _Producer/Consumer_ pattern (see in method _nonBlockingAnswer_)\r\n","title":"How to flatten a list inside a stream of completable futures?","body":"<p>In your update4 you say:</p>\n<blockquote>\n<p>How can you take a Stream that's produced in arbitrary order, and re-order it into futures execution completion order, so that a flatMap() operation will not block unnecessaril</p>\n</blockquote>\n<p>Suppose u have 3 futures that completes in 2, 5 and 10 seconds accordingly and u wants some <code>method</code> that returns an ordered by execution time stream, so in this way u have to wait until all futures are done (or fail) because until u dont know is future is done or fail u dont know how long was execution time.<br />\nYou can create ordered stream of results with blocking:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static final ExecutorService executorService = Executors.newFixedThreadPool(15);\n    private static final ExecutorService consumerService = Executors.newFixedThreadPool(15);\n    private static final Random random = new Random();\n    private static final AtomicInteger ID = new AtomicInteger(0);\n    private static final List&lt;DelayedListSupplier&gt; completionOrder = Collections.synchronizedList(new ArrayList&lt;&gt;());\n\n    @RequiredArgsConstructor\n    @Getter\n    public static class DelayedListSupplier implements Supplier&lt;List&lt;String&gt;&gt; {\n        private final int delayMs;\n        private final int id;\n\n        @Override\n        public List&lt;String&gt; get() {\n            try {\n                if (random.nextInt(10) &lt; 2) {\n                    System.out.println(\n                            String.format(\n                                    &quot;Thread [%s]; Future %s FAILED.&quot;,\n                                    Thread.currentThread().getName(),\n                                    id\n                            )\n                    );\n                    throw new RuntimeException(&quot;Error!&quot; + id);\n                }\n                Thread.sleep(delayMs);\n                System.out.println(\n                        String.format(\n                                &quot;Thread [%s]; Future %s is completed.&quot;,\n                                Thread.currentThread().getName(),\n                                id\n                        )\n                );\n                //just for SOUT\n                completionOrder.add(this);\n                return List.of(&quot;Future&quot; + id);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n\n    public static void main(String[] args) throws Exception {\n        System.out.println(&quot;Start blocking&quot;);\n        blockingAnswer();\n        System.out.println(&quot;Start non blocking&quot;);\n        nonBlockingAnswer();\n        executorService.shutdown();\n        consumerService.awaitTermination(10, TimeUnit.SECONDS);\n        consumerService.shutdown();\n    }\n\n    private static void nonBlockingAnswer() {\n        List&lt;DelayedListSupplier&gt; delayedSuppliers = createDelayedSuppliers();\n        Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; futuresStream = getFutures(delayedSuppliers);\n        futuresStream.forEachOrdered(cf -&gt; {\n            cf.whenComplete((r,e) -&gt; {\n                if (e == null) {\n                    consumerService.execute(() -&gt; {\n                        //handle results here\n                        System.out.println(&quot;Recevied results from future&quot; + r.get(0));\n                    });\n                }\n            });\n        });\n    }\n\n    private static void blockingAnswer() throws InterruptedException {\n        //prepare futures\n        List&lt;DelayedListSupplier&gt; suppliers = createDelayedSuppliers();\n        //map them to CompletableFuture\n        Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; cf = getFutures(suppliers);\n        List&lt;List&lt;String&gt;&gt; results = Collections.synchronizedList(new LinkedList&lt;&gt;());\n\n        //we need collect futures for using CountDownLatch\n        List&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; futures = cf.collect(Collectors.toList());\n\n        int maxWaitTime = suppliers.stream()\n                .max(Comparator.comparing(DelayedListSupplier::getDelayMs))\n                .map(DelayedListSupplier::getDelayMs)\n                .orElseThrow();\n        long start = System.currentTimeMillis();\n        //for method exit we need to N futures completed or failed\n        CountDownLatch cdl = new CountDownLatch((int) futures.size());\n        futures.forEach(f -&gt; {\n            //add post-execution logic for each future\n            f.whenComplete((r, e) -&gt; {\n                cdl.countDown();\n                //if no exception this is actual result\n                if (e == null) {\n                    results.add(r);\n                }\n            });\n        });\n\n        //wait until each future will done or 1000 days\n        cdl.await(1000, TimeUnit.DAYS);\n        long end = System.currentTimeMillis();\n        System.out.println(\n                String.format(\n                        &quot;Execution time: %s ms; Max wait time: %s&quot;,\n                        end - start,\n                        maxWaitTime\n                )\n        );\n        System.out.println(&quot;Future Results: &quot; + completionOrder.stream().map(s -&gt; &quot;&quot; + s.getId()).collect(Collectors.joining(&quot;, &quot;)));\n\n        //our result stream here\n        Stream&lt;String&gt; resultStream = results.stream().flatMap(Collection::stream);\n        System.out.println(\n                String.format(\n                        &quot;FlatMap: %s&quot;,\n                        resultStream.collect(Collectors.joining(&quot;, &quot;))\n                )\n        );\n    }\n\n    private static List&lt;DelayedListSupplier&gt; createDelayedSuppliers() {\n        List&lt;DelayedListSupplier&gt; suppliers = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; 10; i++) {\n            suppliers.add(\n                    new DelayedListSupplier(\n                            (random.nextInt(6) + 1) * 1000,\n                            ID.incrementAndGet()\n                    )\n            );\n        }\n        return suppliers;\n    }\n\n    private static Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; getFutures(List&lt;DelayedListSupplier&gt; suppliers) {\n        return suppliers.stream()\n                .map(s -&gt; CompletableFuture.supplyAsync(s, executorService));\n    }\n</code></pre>\n<p>For non blocking at all u have to use <em>Producer/Consumer</em> pattern (see in method <em>nonBlockingAnswer</em>)</p>\n"},{"comments":[{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696896813,"post_id":77260684,"comment_id":136208832,"body_markdown":"Thanks, this is great! The way you modeled the states of New / Existing / Exhausted resolves an issue I encountered when thinking about a similar approach - it keeps the counter from reaching zero before the original stream ends. I wonder if the exception-handling can be simplified by returning a `Stream&lt;CompletableFuture&lt;T&gt;&gt;` instead of `Stream&lt;T&gt;`, as `CompletableFuture` already contains a representation of exception states.","body":"Thanks, this is great! The way you modeled the states of New / Existing / Exhausted resolves an issue I encountered when thinking about a similar approach - it keeps the counter from reaching zero before the original stream ends. I wonder if the exception-handling can be simplified by returning a <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code> instead of <code>Stream&lt;T&gt;</code>, as <code>CompletableFuture</code> already contains a representation of exception states."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1696922027,"post_id":77260684,"comment_id":136210993,"body_markdown":"That’s possible but not a simplification. Since this is flattening lists, returning a `Stream&lt;CompletableFuture&lt;T&gt;&gt;` would imply wrapping each `T` in a new future. Only the failed futures would have a one-to-one relationship between source and result futures. Re counter, note that the code cares to queue items before decreasing and to recheck the queue after detecting zero which is important when the execution of both operations overlaps.","body":"That’s possible but not a simplification. Since this is flattening lists, returning a <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code> would imply wrapping each <code>T</code> in a new future. Only the failed futures would have a one-to-one relationship between source and result futures. Re counter, note that the code cares to queue items before decreasing and to recheck the queue after detecting zero which is important when the execution of both operations overlaps."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1696874099,"creation_date":1696871715,"answer_id":77260684,"question_id":58359879,"body_markdown":"Here is a solution which not only avoids blocking, by preferring to process already completed futures, it even retains lazy processing of the original stream, as far as possible. As long as there are completed futures among the already encountered futures it will not advance in the source traversal.\r\n\r\nThis is best demonstrated by an example using an *infinite* source which still can complete in finite time (and quite fast due to the preference of completed futures).\r\n\r\n```java\r\nStream&lt;CompletableFuture&lt;List&lt;Integer&gt;&gt;&gt; streamOfFutures = Stream.generate(\r\n    () -&gt; CompletableFuture.supplyAsync(\r\n        () -&gt; ThreadLocalRandom.current().ints(10, 0, 200).boxed().toList(),\r\n        CompletableFuture.delayedExecutor(\r\n            ThreadLocalRandom.current().nextLong(5), TimeUnit.SECONDS))\r\n);\r\nSystem.out.println(flattenResults(streamOfFutures)\r\n    .peek(System.out::println)\r\n    .anyMatch(i -&gt; i == 123)\r\n);\r\n```\r\n\r\nThe implementation will process already completed futures immediately on encounter. Only if the future has not been completed yet, a queuing action will be chained and the pending counter increased. Care must be taken to decrease the counter even on exceptional completion and to queue an item (an empty list), to unblock the consumer thread in case it’s taking an element right at this point. The exception will be propagated to the caller when encountered. Like with short-circuiting parallel streams, it’s possible to miss errors if the result is found before processing all elements.\r\n\r\nIf the terminal operation is short-circuiting and finishes without processing the entire stream, the counter is irrelevant and the operation will not wait for the completion of pending futures. Only when the source stream has been traversed completely, the counter becomes relevant for detecting when all futures have been completed.\r\n\r\n```java\r\nstatic &lt;T&gt; Stream&lt;T&gt; flattenResults(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; stream) {\r\n    Spliterator&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; srcSp = stream.spliterator();\r\n    BlockingQueue&lt;List&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\r\n\r\n    return StreamSupport.stream(new Spliterators.AbstractSpliterator&lt;T&gt;(\r\n                                                 srcSp.estimateSize(), 0) {\r\n        final AtomicLong pending = new AtomicLong();\r\n        Spliterator&lt;T&gt; fromCurrentList;\r\n        Throwable failure;\r\n\r\n        @Override\r\n        public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n            if(checkExisting(action)) return true;\r\n\r\n            while(srcSp.tryAdvance(this::checkNew)) {\r\n                if(checkExisting(action)) return true;\r\n            }\r\n\r\n            return checkAfterSourceExhausted(action);\r\n        }\r\n        private boolean checkExisting(Consumer&lt;? super T&gt; action) {\r\n            for(;;) {\r\n                var sp = fromCurrentList;\r\n                if(sp == null) {\r\n                    List&lt;T&gt; newList = queue.poll();\r\n                    if(newList == null) return false;\r\n                    fromCurrentList = sp = newList.spliterator();\r\n                }\r\n                if(sp.tryAdvance(action)) return true;\r\n                fromCurrentList = null;\r\n            }\r\n        }\r\n\r\n        private void checkNew(CompletableFuture&lt;List&lt;T&gt;&gt; f) {\r\n            if(f.isDone()) fromCurrentList = f.join().spliterator();\r\n            else {\r\n                pending.incrementAndGet();\r\n                f.whenComplete((r, t) -&gt; {\r\n                    if(t != null) {\r\n                        failure = t;\r\n                        r = List.of();\r\n                    }\r\n                    queue.offer(r);\r\n                    pending.decrementAndGet();\r\n                });\r\n            }\r\n        }\r\n\r\n        private boolean checkAfterSourceExhausted(Consumer&lt;? super T&gt; action) {\r\n            while(pending.get() != 0 || !queue.isEmpty()) {\r\n                checkFailure();\r\n                try {\r\n                    List&lt;T&gt; newList = queue.take();\r\n                    fromCurrentList = newList.spliterator();\r\n                    if(checkExisting(action)) return true;\r\n                } catch(InterruptedException ex) {\r\n                    throw new CompletionException(ex);\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private void checkFailure() {\r\n            Throwable t = failure;\r\n            if(t != null) {\r\n                if(t instanceof RuntimeException rt) throw rt;\r\n                if(t instanceof Error e) throw e;\r\n                throw new CompletionException(t);\r\n            }\r\n        }\r\n    }, false);\r\n}\r\n```\r\n\r\n---\r\n\r\nYou may use something like\r\n\r\n```java\r\nStream&lt;CompletableFuture&lt;List&lt;Integer&gt;&gt;&gt; streamOfFutures = IntStream.range(0, 10)\r\n    .mapToObj(i -&gt; \r\n      CompletableFuture.supplyAsync(\r\n        () -&gt; IntStream.range(i * 10, (i + 1) * 10).boxed().toList(),\r\n        CompletableFuture.delayedExecutor(10 - i, TimeUnit.SECONDS)));\r\n\r\nSystem.out.println(flattenResults(streamOfFutures)\r\n    .peek(System.out::println)\r\n    .anyMatch(i -&gt; i == 34)\r\n);\r\n```\r\n\r\nto visualize the “first completed, first processed”. Or change the terminal operation to\r\n\r\n```java\r\nflattenResults(streamOfFutures).forEach(System.out::println);\r\n```\r\n\r\nto demonstrate the completion of all futures is correctly recognized or\r\n\r\n```java\r\nif(flattenResults(streamOfFutures).count() != 100)\r\n    throw new AssertionError();\r\nelse\r\n    System.out.println(&quot;Success&quot;);\r\n```\r\n\r\nto have something which can be integrated into automated test.\r\n","title":"How to flatten a list inside a stream of completable futures?","body":"<p>Here is a solution which not only avoids blocking, by preferring to process already completed futures, it even retains lazy processing of the original stream, as far as possible. As long as there are completed futures among the already encountered futures it will not advance in the source traversal.</p>\n<p>This is best demonstrated by an example using an <em>infinite</em> source which still can complete in finite time (and quite fast due to the preference of completed futures).</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;CompletableFuture&lt;List&lt;Integer&gt;&gt;&gt; streamOfFutures = Stream.generate(\n    () -&gt; CompletableFuture.supplyAsync(\n        () -&gt; ThreadLocalRandom.current().ints(10, 0, 200).boxed().toList(),\n        CompletableFuture.delayedExecutor(\n            ThreadLocalRandom.current().nextLong(5), TimeUnit.SECONDS))\n);\nSystem.out.println(flattenResults(streamOfFutures)\n    .peek(System.out::println)\n    .anyMatch(i -&gt; i == 123)\n);\n</code></pre>\n<p>The implementation will process already completed futures immediately on encounter. Only if the future has not been completed yet, a queuing action will be chained and the pending counter increased. Care must be taken to decrease the counter even on exceptional completion and to queue an item (an empty list), to unblock the consumer thread in case it’s taking an element right at this point. The exception will be propagated to the caller when encountered. Like with short-circuiting parallel streams, it’s possible to miss errors if the result is found before processing all elements.</p>\n<p>If the terminal operation is short-circuiting and finishes without processing the entire stream, the counter is irrelevant and the operation will not wait for the completion of pending futures. Only when the source stream has been traversed completely, the counter becomes relevant for detecting when all futures have been completed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static &lt;T&gt; Stream&lt;T&gt; flattenResults(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; stream) {\n    Spliterator&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; srcSp = stream.spliterator();\n    BlockingQueue&lt;List&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\n\n    return StreamSupport.stream(new Spliterators.AbstractSpliterator&lt;T&gt;(\n                                                 srcSp.estimateSize(), 0) {\n        final AtomicLong pending = new AtomicLong();\n        Spliterator&lt;T&gt; fromCurrentList;\n        Throwable failure;\n\n        @Override\n        public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n            if(checkExisting(action)) return true;\n\n            while(srcSp.tryAdvance(this::checkNew)) {\n                if(checkExisting(action)) return true;\n            }\n\n            return checkAfterSourceExhausted(action);\n        }\n        private boolean checkExisting(Consumer&lt;? super T&gt; action) {\n            for(;;) {\n                var sp = fromCurrentList;\n                if(sp == null) {\n                    List&lt;T&gt; newList = queue.poll();\n                    if(newList == null) return false;\n                    fromCurrentList = sp = newList.spliterator();\n                }\n                if(sp.tryAdvance(action)) return true;\n                fromCurrentList = null;\n            }\n        }\n\n        private void checkNew(CompletableFuture&lt;List&lt;T&gt;&gt; f) {\n            if(f.isDone()) fromCurrentList = f.join().spliterator();\n            else {\n                pending.incrementAndGet();\n                f.whenComplete((r, t) -&gt; {\n                    if(t != null) {\n                        failure = t;\n                        r = List.of();\n                    }\n                    queue.offer(r);\n                    pending.decrementAndGet();\n                });\n            }\n        }\n\n        private boolean checkAfterSourceExhausted(Consumer&lt;? super T&gt; action) {\n            while(pending.get() != 0 || !queue.isEmpty()) {\n                checkFailure();\n                try {\n                    List&lt;T&gt; newList = queue.take();\n                    fromCurrentList = newList.spliterator();\n                    if(checkExisting(action)) return true;\n                } catch(InterruptedException ex) {\n                    throw new CompletionException(ex);\n                }\n            }\n            return false;\n        }\n\n        private void checkFailure() {\n            Throwable t = failure;\n            if(t != null) {\n                if(t instanceof RuntimeException rt) throw rt;\n                if(t instanceof Error e) throw e;\n                throw new CompletionException(t);\n            }\n        }\n    }, false);\n}\n</code></pre>\n<hr />\n<p>You may use something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;CompletableFuture&lt;List&lt;Integer&gt;&gt;&gt; streamOfFutures = IntStream.range(0, 10)\n    .mapToObj(i -&gt; \n      CompletableFuture.supplyAsync(\n        () -&gt; IntStream.range(i * 10, (i + 1) * 10).boxed().toList(),\n        CompletableFuture.delayedExecutor(10 - i, TimeUnit.SECONDS)));\n\nSystem.out.println(flattenResults(streamOfFutures)\n    .peek(System.out::println)\n    .anyMatch(i -&gt; i == 34)\n);\n</code></pre>\n<p>to visualize the “first completed, first processed”. Or change the terminal operation to</p>\n<pre class=\"lang-java prettyprint-override\"><code>flattenResults(streamOfFutures).forEach(System.out::println);\n</code></pre>\n<p>to demonstrate the completion of all futures is correctly recognized or</p>\n<pre class=\"lang-java prettyprint-override\"><code>if(flattenResults(streamOfFutures).count() != 100)\n    throw new AssertionError();\nelse\n    System.out.println(&quot;Success&quot;);\n</code></pre>\n<p>to have something which can be integrated into automated test.</p>\n"}],"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1438,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"accepted_answer_id":77260684,"answer_count":8,"score":10,"last_activity_date":1697257837,"creation_date":1570929884,"question_id":58359879,"body_markdown":"I have this:\r\n\r\n    Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;\r\n\r\nhow can I convert it to\r\n\r\n    Stream&lt;CompletableFuture&lt;Item&gt;&gt;\r\n\r\nWhere: the second stream is comprised of each and all the Items inside each of the lists in the first stream.\r\n\r\nI looked into `thenCompose` but that solves a completely different problem which is also referred to as &quot;flattening&quot;.\r\n\r\nHow can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?\r\n\r\nHere is my best attempt so far:\r\n\r\n\t\tExecutorService pool = Executors.newFixedThreadPool(PARALLELISM);\r\n\t\tStream&lt;CompletableFuture&lt;List&lt;IncomingItem&gt;&gt;&gt; reload = ... ;\r\n\r\n\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\tCompletableFuture&lt;List&lt;IncomingItem&gt;&gt; allFutures[] = reload.toArray(CompletableFuture[]::new);\r\n\t\tCompletionService&lt;List&lt;IncomingItem&gt;&gt; queue = new ExecutorCompletionService&lt;&gt;(pool);\r\n\t\tfor(CompletableFuture&lt;List&lt;IncomingItem&gt;&gt; item: allFutures) {\r\n\t\t\tqueue.submit(item::get);\r\n\t\t}\r\n\t\tList&lt;IncomingItem&gt; THE_END = new ArrayList&lt;IncomingItem&gt;();\r\n\t\tCompletableFuture&lt;List&lt;IncomingItem&gt;&gt; ender = CompletableFuture.allOf(allFutures).thenApply(whatever -&gt; {\r\n\t\t\tqueue.submit(() -&gt; THE_END);\r\n\t\t\treturn THE_END;\r\n\t\t});\r\n\t\tqueue.submit(() -&gt; ender.get());\r\n\t\tIterable&lt;List&lt;IncomingItem&gt;&gt; iter = () -&gt; new Iterator&lt;List&lt;IncomingItem&gt;&gt;() {\r\n\t\t\tboolean checkNext = true;\r\n\t\t\tList&lt;IncomingItem&gt; next = null;\r\n\t\t\t@Override\r\n\t\t\tpublic boolean hasNext() {\r\n\t\t\t\tif(checkNext) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tnext = queue.take().get();\r\n\t\t\t\t\t} catch (InterruptedException | ExecutionException e) {\r\n\t\t\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcheckNext = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(next == THE_END || next == null) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t@Override\r\n\t\t\tpublic List&lt;IncomingItem&gt; next() {\r\n\t\t\t\tif(checkNext) {\r\n\t\t\t\t\thasNext();\r\n\t\t\t\t}\r\n\t\t\t\tif(!hasNext()) {\r\n\t\t\t\t\tthrow new IllegalStateException();\r\n\t\t\t\t}\r\n\t\t\t\tcheckNext = true;\r\n\t\t\t\treturn next;\r\n\t\t\t}\r\n\t\t};\r\n\t\tStream&lt;IncomingItem&gt; flat = StreamSupport.stream(iter.spliterator(), false).flatMap(List::stream);\r\n\r\nThis works at first, unfortunately, it has a fatal bug: the resulting stream seems to terminate prematurely, before retrieving all the items.\r\n\r\n**2023 UPDATE**\r\n\r\nFour years later, I still have not chosen an answer, because both answers at the moment are saying this is &quot;impossible&quot;. That doesn&#39;t sound right. I&#39;m simply asking for an efficient way to take items that are completed in batches and be able to monitor their completion individually. Perhaps this is easier with Virtual Threads in Java 21? I no longer maintain this codebase but the question remains a great unsolved problem.\r\n\r\nUpdate#2: Clarification of assumptions\r\n\r\n`CompletableFuture` _represents a future result of an asynchronous computation_ according to https://www.geeksforgeeks.org/completablefuture-in-java/ ... interestingly the [JavaDocs][1] are not quite as clear.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\r\n\r\nUpdate#3:\r\n\r\nPerformance is not the focus of the question, only efficiency, in a specific sense: if task 1 takes T1 to complete and task 2 takes T2 to complete, then waiting for a total of `max(T1,T2)` time for completion is more efficient than waiting for `T1+T2` time. Then extend that to `N`-sized lists of tasks `T, U, V, ...`, and it probably looks something like `max(T1..Tn)+max(U1..Un)+max(V1..Vn)` or hopefully `max(T1..Vn)`. Assuming the same N for all lists here is only an explanatory simplification (really should be `I`, `J`, `K`...). In other words, please assume that the asynchronous tasks which are represented in the Stream of Lists are I/O bound, not CPU-bound. This can be simulated by inserting random `Thread.sleep()` if you wish to demonstrate something in code. Apologies for the sloppy notation - I have a background in Computer Science but it&#39;s been a while since I&#39;ve tried to formally describe a problem like this.\r\n\r\n**Update#4**\r\n\r\nBased on the answer from @Slaw, I can see that the core problem I was facing is the mismatch between *stream arrival order* (the order in which futures are provided through the `Stream`) and *future completion order* (the order in which each `CompletableFuture` completes execution and unlocks the `List` within it). So a **new revised TL;DR** for this question is: *How can you take a `Stream` that&#39;s produced in arbitrary order, and re-order it into futures execution completion order, so that a `flatMap()` operation will not block unnecessarily?*","title":"How to flatten a list inside a stream of completable futures?","body":"<p>I have this:</p>\n<pre><code>Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;\n</code></pre>\n<p>how can I convert it to</p>\n<pre><code>Stream&lt;CompletableFuture&lt;Item&gt;&gt;\n</code></pre>\n<p>Where: the second stream is comprised of each and all the Items inside each of the lists in the first stream.</p>\n<p>I looked into <code>thenCompose</code> but that solves a completely different problem which is also referred to as &quot;flattening&quot;.</p>\n<p>How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?</p>\n<p>Here is my best attempt so far:</p>\n<pre><code>    ExecutorService pool = Executors.newFixedThreadPool(PARALLELISM);\n    Stream&lt;CompletableFuture&lt;List&lt;IncomingItem&gt;&gt;&gt; reload = ... ;\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    CompletableFuture&lt;List&lt;IncomingItem&gt;&gt; allFutures[] = reload.toArray(CompletableFuture[]::new);\n    CompletionService&lt;List&lt;IncomingItem&gt;&gt; queue = new ExecutorCompletionService&lt;&gt;(pool);\n    for(CompletableFuture&lt;List&lt;IncomingItem&gt;&gt; item: allFutures) {\n        queue.submit(item::get);\n    }\n    List&lt;IncomingItem&gt; THE_END = new ArrayList&lt;IncomingItem&gt;();\n    CompletableFuture&lt;List&lt;IncomingItem&gt;&gt; ender = CompletableFuture.allOf(allFutures).thenApply(whatever -&gt; {\n        queue.submit(() -&gt; THE_END);\n        return THE_END;\n    });\n    queue.submit(() -&gt; ender.get());\n    Iterable&lt;List&lt;IncomingItem&gt;&gt; iter = () -&gt; new Iterator&lt;List&lt;IncomingItem&gt;&gt;() {\n        boolean checkNext = true;\n        List&lt;IncomingItem&gt; next = null;\n        @Override\n        public boolean hasNext() {\n            if(checkNext) {\n                try {\n                    next = queue.take().get();\n                } catch (InterruptedException | ExecutionException e) {\n                    throw new RuntimeException(e);\n                }\n                checkNext = false;\n            }\n            if(next == THE_END || next == null) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        @Override\n        public List&lt;IncomingItem&gt; next() {\n            if(checkNext) {\n                hasNext();\n            }\n            if(!hasNext()) {\n                throw new IllegalStateException();\n            }\n            checkNext = true;\n            return next;\n        }\n    };\n    Stream&lt;IncomingItem&gt; flat = StreamSupport.stream(iter.spliterator(), false).flatMap(List::stream);\n</code></pre>\n<p>This works at first, unfortunately, it has a fatal bug: the resulting stream seems to terminate prematurely, before retrieving all the items.</p>\n<p><strong>2023 UPDATE</strong></p>\n<p>Four years later, I still have not chosen an answer, because both answers at the moment are saying this is &quot;impossible&quot;. That doesn't sound right. I'm simply asking for an efficient way to take items that are completed in batches and be able to monitor their completion individually. Perhaps this is easier with Virtual Threads in Java 21? I no longer maintain this codebase but the question remains a great unsolved problem.</p>\n<p>Update#2: Clarification of assumptions</p>\n<p><code>CompletableFuture</code> <em>represents a future result of an asynchronous computation</em> according to <a href=\"https://www.geeksforgeeks.org/completablefuture-in-java/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/completablefuture-in-java/</a> ... interestingly the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">JavaDocs</a> are not quite as clear.</p>\n<p>Update#3:</p>\n<p>Performance is not the focus of the question, only efficiency, in a specific sense: if task 1 takes T1 to complete and task 2 takes T2 to complete, then waiting for a total of <code>max(T1,T2)</code> time for completion is more efficient than waiting for <code>T1+T2</code> time. Then extend that to <code>N</code>-sized lists of tasks <code>T, U, V, ...</code>, and it probably looks something like <code>max(T1..Tn)+max(U1..Un)+max(V1..Vn)</code> or hopefully <code>max(T1..Vn)</code>. Assuming the same N for all lists here is only an explanatory simplification (really should be <code>I</code>, <code>J</code>, <code>K</code>...). In other words, please assume that the asynchronous tasks which are represented in the Stream of Lists are I/O bound, not CPU-bound. This can be simulated by inserting random <code>Thread.sleep()</code> if you wish to demonstrate something in code. Apologies for the sloppy notation - I have a background in Computer Science but it's been a while since I've tried to formally describe a problem like this.</p>\n<p><strong>Update#4</strong></p>\n<p>Based on the answer from @Slaw, I can see that the core problem I was facing is the mismatch between <em>stream arrival order</em> (the order in which futures are provided through the <code>Stream</code>) and <em>future completion order</em> (the order in which each <code>CompletableFuture</code> completes execution and unlocks the <code>List</code> within it). So a <strong>new revised TL;DR</strong> for this question is: <em>How can you take a <code>Stream</code> that's produced in arbitrary order, and re-order it into futures execution completion order, so that a <code>flatMap()</code> operation will not block unnecessarily?</em></p>\n"},{"tags":["java","json","spring","performance","coding-style"],"comments":[{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":1,"creation_date":1697282303,"post_id":77291509,"comment_id":136262052,"body_markdown":"Why not use a map like you are using to generate the `json` object using `gson`?","body":"Why not use a map like you are using to generate the <code>json</code> object using <code>gson</code>?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1697468820,"post_id":77291509,"comment_id":136280561,"body_markdown":"First of all, this is not even valid Java code. You don’t see a difference between these variants as the surrounding code, most likely code sending requests over the network dominates the execution time. Even if you look at the string generation in isolation, the work hidden beneath the `JSONObject` outweighs your processing of the eight strings. If seven of these strings are constants, why don’t write the JSON string in the first place, `String result = &quot;&quot;&quot; { &quot;schema&quot;: &quot;dbtrial&quot;, &quot;tablename&quot; : &quot;mastercustomer&quot;, &quot;where&quot; : &quot;&quot;&quot; + json + &quot;&quot;&quot;, &quot;clause&quot;: &quot;sort=id,date_&amp;limit=10&quot; } &quot;&quot;&quot;;`","body":"First of all, this is not even valid Java code. You don’t see a difference between these variants as the surrounding code, most likely code sending requests over the network dominates the execution time. Even if you look at the string generation in isolation, the work hidden beneath the <code>JSONObject</code> outweighs your processing of the eight strings. If seven of these strings are constants, why don’t write the JSON string in the first place, <code>String result = &quot;&quot;&quot; { &quot;schema&quot;: &quot;dbtrial&quot;, &quot;tablename&quot; : &quot;mastercustomer&quot;, &quot;where&quot; : &quot;&quot;&quot; + json + &quot;&quot;&quot;, &quot;clause&quot;: &quot;sort=id,date_&amp;limit=10&quot; } &quot;&quot;&quot;;</code>"}],"answers":[{"tags":[],"owner":{"account_id":29374668,"reputation":1,"user_id":22506512,"display_name":"fasthosting"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697257259,"creation_date":1697257259,"answer_id":77291610,"question_id":77291509,"body_markdown":"Your attempt to use arrays for `keyParams` and `valueParams` is a good idea to make the code cleaner and more maintainable. However, there&#39;s a minor issue with the way you&#39;re initializing arrays in Java. Here&#39;s the corrected code:\r\n\r\n    import org.json.JSONObject;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            JSONObject tempParam = new JSONObject();\r\n            tempParam.put(&quot;custid&quot;, &quot;123&quot;);\r\n            String json = tempParam.toString();\r\n    \r\n            String[] keyParams = {&quot;schema&quot;, &quot;tablename&quot;, &quot;where&quot;, &quot;clause&quot;};\r\n            String[] valueParams = {&quot;dbtrial&quot;, &quot;mastercustomer&quot;, json, &quot;sort=id,date_&amp;limit=10&quot;};\r\n    \r\n            String res = genJSON(keyParams, valueParams);\r\n            System.out.println(res);\r\n        }\r\n    \r\n        public static String genJSON(String[] keyParams, String[] valueParams) {\r\n            JSONObject objectMessage = new JSONObject();\r\n            for (int i = 0; i &lt; keyParams.length; i++) {\r\n                objectMessage.put(keyParams[i], valueParams[i]);\r\n            }\r\n    \r\n            return objectMessage.toString();\r\n        }\r\n    }\r\n\r\n\r\nThis code will work as expected, and it&#39;s a cleaner way to manage your `keyParams` and `valueParams`. The main advantage of using arrays is that it allows for better organization and readability of your code, especially if the number of parameters grows.\r\n","title":"How to generate JSON in Java with clean code","body":"<p>Your attempt to use arrays for <code>keyParams</code> and <code>valueParams</code> is a good idea to make the code cleaner and more maintainable. However, there's a minor issue with the way you're initializing arrays in Java. Here's the corrected code:</p>\n<pre><code>import org.json.JSONObject;\n\npublic class Main {\n    public static void main(String[] args) {\n        JSONObject tempParam = new JSONObject();\n        tempParam.put(&quot;custid&quot;, &quot;123&quot;);\n        String json = tempParam.toString();\n\n        String[] keyParams = {&quot;schema&quot;, &quot;tablename&quot;, &quot;where&quot;, &quot;clause&quot;};\n        String[] valueParams = {&quot;dbtrial&quot;, &quot;mastercustomer&quot;, json, &quot;sort=id,date_&amp;limit=10&quot;};\n\n        String res = genJSON(keyParams, valueParams);\n        System.out.println(res);\n    }\n\n    public static String genJSON(String[] keyParams, String[] valueParams) {\n        JSONObject objectMessage = new JSONObject();\n        for (int i = 0; i &lt; keyParams.length; i++) {\n            objectMessage.put(keyParams[i], valueParams[i]);\n        }\n\n        return objectMessage.toString();\n    }\n}\n</code></pre>\n<p>This code will work as expected, and it's a cleaner way to manage your <code>keyParams</code> and <code>valueParams</code>. The main advantage of using arrays is that it allows for better organization and readability of your code, especially if the number of parameters grows.</p>\n"}],"owner":{"account_id":14055666,"reputation":15,"user_id":10153085,"display_name":"mr.Gondar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697257259,"creation_date":1697254053,"question_id":77291509,"body_markdown":"I have code like this:\r\n\r\n\r\n```\r\nMap&lt;String, Object&gt; tempParam = new HashMap&lt;&gt;();\r\ntempParam.put(&quot;custid&quot;, &quot;123&quot;);\r\njson = gson.toJson(tempParam);\r\n\r\nString keyParams = &quot;schema;tablename;where;clause&quot;;\r\nString valueParams = &quot;dbtrial;mastercustomer;&quot;+json+&quot;;sort=id,date_&amp;limit=10&quot;;\r\n\r\nString res = genJSON(keyParams, valueParams);\r\n\r\nfunction genJSON(String keyParams, String valueParams){\r\n\r\n\tString[] key = keyParams.split(&quot;;&quot;);\r\n\tString[] value = valueParams.split(&quot;;&quot;);\r\n\r\n\tJSONObject objectMessage = new JSONObject();\r\n\tfor(int i = 0 ; i &lt; key.length ; i++){\r\n\t\tobjectMessage.put(key[i], value[i]);\r\n\t}\r\n\r\n\treturn objectMessage.toString();\r\n\t\r\n}\r\n\r\n```\r\n\r\nMy concern is the way of writing with semicolon separators, then split, \r\nIs there another way that is simpler or more effective ? can we make it more dynamicly ?\r\nbecause the &quot;genJSON&quot; function will be used globally for various needs.\r\nat least I want clean code.\r\n\r\nI&#39;ve tried using arrays like this, but it doesn&#39;t seem to make much of a difference.\r\n\r\n\r\n```\r\nString[] keyParams = [&quot;schema&quot;, &quot;tablename&quot;, &quot;where&quot;, &quot;clause&quot;];\r\nString[] valueParams = {&quot;dbtrial&quot;, &quot;mastercustomer&quot;, json, &quot;sort=id,date_&amp;limit=10&quot;};\r\n\r\nfunction genJSON(String[] keyParams, String[] valueParams){\r\n\r\n\tJSONObject objectMessage = new JSONObject();\r\n\tfor(int i = 0 ; i &lt; keyParams.length ; i++){\r\n\t\tobjectMessage.put(keyParams[i], valueParams[i]);\r\n\t}\r\n\r\n\treturn objectMessage.toString();\r\n}\r\n```\r\nDo you have any other thoughts or suggestions that might be better?\r\n\r\n\r\n\r\n\r\n*I used java 7*\r\n","title":"How to generate JSON in Java with clean code","body":"<p>I have code like this:</p>\n<pre><code>Map&lt;String, Object&gt; tempParam = new HashMap&lt;&gt;();\ntempParam.put(&quot;custid&quot;, &quot;123&quot;);\njson = gson.toJson(tempParam);\n\nString keyParams = &quot;schema;tablename;where;clause&quot;;\nString valueParams = &quot;dbtrial;mastercustomer;&quot;+json+&quot;;sort=id,date_&amp;limit=10&quot;;\n\nString res = genJSON(keyParams, valueParams);\n\nfunction genJSON(String keyParams, String valueParams){\n\n    String[] key = keyParams.split(&quot;;&quot;);\n    String[] value = valueParams.split(&quot;;&quot;);\n\n    JSONObject objectMessage = new JSONObject();\n    for(int i = 0 ; i &lt; key.length ; i++){\n        objectMessage.put(key[i], value[i]);\n    }\n\n    return objectMessage.toString();\n    \n}\n\n</code></pre>\n<p>My concern is the way of writing with semicolon separators, then split,\nIs there another way that is simpler or more effective ? can we make it more dynamicly ?\nbecause the &quot;genJSON&quot; function will be used globally for various needs.\nat least I want clean code.</p>\n<p>I've tried using arrays like this, but it doesn't seem to make much of a difference.</p>\n<pre><code>String[] keyParams = [&quot;schema&quot;, &quot;tablename&quot;, &quot;where&quot;, &quot;clause&quot;];\nString[] valueParams = {&quot;dbtrial&quot;, &quot;mastercustomer&quot;, json, &quot;sort=id,date_&amp;limit=10&quot;};\n\nfunction genJSON(String[] keyParams, String[] valueParams){\n\n    JSONObject objectMessage = new JSONObject();\n    for(int i = 0 ; i &lt; keyParams.length ; i++){\n        objectMessage.put(keyParams[i], valueParams[i]);\n    }\n\n    return objectMessage.toString();\n}\n</code></pre>\n<p>Do you have any other thoughts or suggestions that might be better?</p>\n<p><em>I used java 7</em></p>\n"},{"tags":["java","amazon-web-services","aws-lambda"],"answers":[{"comments":[{"owner":{"account_id":20862711,"reputation":11,"user_id":15324544,"display_name":"The Celt"},"score":0,"creation_date":1697278097,"post_id":77291477,"comment_id":136261765,"body_markdown":"You are completely right. And I intend to refactor this method once it is working, and do a best practices version of this.\n\nStill, thanks for the idea!","body":"You are completely right. And I intend to refactor this method once it is working, and do a best practices version of this.  Still, thanks for the idea!"},{"owner":{"display_name":"user22738196"},"score":0,"creation_date":1697278673,"post_id":77291477,"comment_id":136261801,"body_markdown":"Happy to know that it helped!","body":"Happy to know that it helped!"}],"tags":[],"owner":{"display_name":"user22738196"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697252814,"creation_date":1697252814,"answer_id":77291477,"question_id":77291408,"body_markdown":"May I suggest not storing aws credentials in code?\r\nInstead, create an AWS role which has the minimum necessary permissions (S3ReadOnly)  to access your S3 bucket. You can do that in the AWS Lambda console under Permissions.\r\nYou can use the AWS boto3 java sdk to get your bucket content in your Lambda code once your Lambda has the S3 permissions.\r\n","title":"java.lang.NoClassDefFoundError for an AWS Lambda","body":"<p>May I suggest not storing aws credentials in code?\nInstead, create an AWS role which has the minimum necessary permissions (S3ReadOnly)  to access your S3 bucket. You can do that in the AWS Lambda console under Permissions.\nYou can use the AWS boto3 java sdk to get your bucket content in your Lambda code once your Lambda has the S3 permissions.</p>\n"},{"comments":[{"owner":{"account_id":20862711,"reputation":11,"user_id":15324544,"display_name":"The Celt"},"score":0,"creation_date":1697278018,"post_id":77291539,"comment_id":136261757,"body_markdown":"Can you please explain further what do you mean by &quot;I added the PSVM method&quot;?","body":"Can you please explain further what do you mean by &quot;I added the PSVM method&quot;?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697650510,"post_id":77291539,"comment_id":136307843,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77291539/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26955746,"reputation":1,"user_id":20524150,"display_name":"Harry Marlowe"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697254949,"creation_date":1697254949,"answer_id":77291539,"question_id":77291408,"body_markdown":"I recreated your code in a new maven project on IntelliJ. I added the PSVM method, and ran the &quot;executeLambda&quot; from there, but I did not encounter any issues. \r\n\r\nI would suggest rebuilding your project, or reimporting your pom.xml file.\r\n\r\nFurtheremore, the other person here is very correct; it&#39;s not good practice to hard code in credentials.","title":"java.lang.NoClassDefFoundError for an AWS Lambda","body":"<p>I recreated your code in a new maven project on IntelliJ. I added the PSVM method, and ran the &quot;executeLambda&quot; from there, but I did not encounter any issues.</p>\n<p>I would suggest rebuilding your project, or reimporting your pom.xml file.</p>\n<p>Furtheremore, the other person here is very correct; it's not good practice to hard code in credentials.</p>\n"}],"owner":{"account_id":20862711,"reputation":11,"user_id":15324544,"display_name":"The Celt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697254949,"creation_date":1697250370,"question_id":77291408,"body_markdown":"I am trying to run a simple Java program in aws, but I am getting the error from the title.\r\n\r\nA little context:\r\n\r\nThis is my pom.xml\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;processador-de-dados&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;properties&gt;\r\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n  &lt;name&gt;Archetype - processador-de-dados&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/com.amazonaws/aws-java-sdk-s3 --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\r\n      &lt;version&gt;1.12.565&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/com.amazonaws/aws-lambda-java-core --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\r\n      &lt;version&gt;1.2.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/com.amazonaws/aws-java-sdk-core --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aws-java-sdk-core&lt;/artifactId&gt;\r\n      &lt;version&gt;1.12.565&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nAnd this is the class I want to run. Note that almost everything is commented out, because I was removing comments to find where the lambda is breaking\r\n```\r\npackage amazonenv;\r\n\r\nimport com.amazonaws.auth.BasicAWSCredentials;\r\nimport processador.ProcessadorDeDados;\r\n\r\nimport java.util.List;\r\n\r\npublic class Main {\r\n\r\n    public String executeLambda() {\r\n\r\n//         Utilizar aqui seus valores de chave de acesso, nome do bucket e regi&#227;o da sua conta AWS\r\n        String accessKey = &quot;hiddenValue&quot;;\r\n        String secretKey = &quot;hiddenValue&quot;;\r\n        BasicAWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);\r\n\r\n//        S3Downloader downloader = new S3Downloader();\r\n//        List&lt;String&gt; linhasCsv = downloader.downloadFileFromS3(credentials);\r\n\r\n//        if (linhasCsv != null) {\r\n\r\n//            ProcessadorDeDados processador = new ProcessadorDeDados();\r\n//            processador.processaDados(linhasCsv);\r\n//\r\n//            S3Uploader uploader = new S3Uploader();\r\n//            uploader.upload(credentials);\r\n\r\n            return &quot;Executed&quot;;\r\n//        }\r\n//        return &quot;Not executed&quot;;\r\n    }\r\n}\r\n\r\n```\r\n\r\nNote that by creating an instance of BasicAwsCredentials the method breaks. \r\n\r\nLastly, here is the error log from aws\r\n\r\n```\r\n{\r\n  &quot;errorMessage&quot;: &quot;com/amazonaws/auth/BasicAWSCredentials&quot;,\r\n  &quot;errorType&quot;: &quot;java.lang.NoClassDefFoundError&quot;,\r\n  &quot;stackTrace&quot;: [\r\n    &quot;amazonenv.Main.executeLambda(Main.java:15)&quot;,\r\n    &quot;java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&quot;,\r\n    &quot;java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&quot;,\r\n    &quot;java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&quot;,\r\n    &quot;java.base/java.lang.reflect.Method.invoke(Unknown Source)&quot;\r\n  ],\r\n  &quot;cause&quot;: {\r\n    &quot;errorMessage&quot;: &quot;com.amazonaws.auth.BasicAWSCredentials&quot;,\r\n    &quot;errorType&quot;: &quot;java.lang.ClassNotFoundException&quot;,\r\n    &quot;stackTrace&quot;: [\r\n      &quot;java.base/java.net.URLClassLoader.findClass(Unknown Source)&quot;,\r\n      &quot;java.base/java.lang.ClassLoader.loadClass(Unknown Source)&quot;,\r\n      &quot;java.base/java.lang.ClassLoader.loadClass(Unknown Source)&quot;,\r\n      &quot;amazonenv.Main.executeLambda(Main.java:15)&quot;,\r\n      &quot;java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&quot;,\r\n      &quot;java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&quot;,\r\n      &quot;java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&quot;,\r\n      &quot;java.base/java.lang.reflect.Method.invoke(Unknown Source)&quot;\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nIf I run this method locally it works. Also, if I call the method with only the return &quot;Executed&quot;, the Lambda also works\r\n\r\nAny help is appreciated.","title":"java.lang.NoClassDefFoundError for an AWS Lambda","body":"<p>I am trying to run a simple Java program in aws, but I am getting the error from the title.</p>\n<p>A little context:</p>\n<p>This is my pom.xml</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;processador-de-dados&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n  &lt;name&gt;Archetype - processador-de-dados&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.amazonaws/aws-java-sdk-s3 --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n      &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n      &lt;version&gt;1.12.565&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.amazonaws/aws-lambda-java-core --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n      &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\n      &lt;version&gt;1.2.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.amazonaws/aws-java-sdk-core --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n      &lt;artifactId&gt;aws-java-sdk-core&lt;/artifactId&gt;\n      &lt;version&gt;1.12.565&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>And this is the class I want to run. Note that almost everything is commented out, because I was removing comments to find where the lambda is breaking</p>\n<pre><code>package amazonenv;\n\nimport com.amazonaws.auth.BasicAWSCredentials;\nimport processador.ProcessadorDeDados;\n\nimport java.util.List;\n\npublic class Main {\n\n    public String executeLambda() {\n\n//         Utilizar aqui seus valores de chave de acesso, nome do bucket e região da sua conta AWS\n        String accessKey = &quot;hiddenValue&quot;;\n        String secretKey = &quot;hiddenValue&quot;;\n        BasicAWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);\n\n//        S3Downloader downloader = new S3Downloader();\n//        List&lt;String&gt; linhasCsv = downloader.downloadFileFromS3(credentials);\n\n//        if (linhasCsv != null) {\n\n//            ProcessadorDeDados processador = new ProcessadorDeDados();\n//            processador.processaDados(linhasCsv);\n//\n//            S3Uploader uploader = new S3Uploader();\n//            uploader.upload(credentials);\n\n            return &quot;Executed&quot;;\n//        }\n//        return &quot;Not executed&quot;;\n    }\n}\n\n</code></pre>\n<p>Note that by creating an instance of BasicAwsCredentials the method breaks.</p>\n<p>Lastly, here is the error log from aws</p>\n<pre><code>{\n  &quot;errorMessage&quot;: &quot;com/amazonaws/auth/BasicAWSCredentials&quot;,\n  &quot;errorType&quot;: &quot;java.lang.NoClassDefFoundError&quot;,\n  &quot;stackTrace&quot;: [\n    &quot;amazonenv.Main.executeLambda(Main.java:15)&quot;,\n    &quot;java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&quot;,\n    &quot;java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&quot;,\n    &quot;java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&quot;,\n    &quot;java.base/java.lang.reflect.Method.invoke(Unknown Source)&quot;\n  ],\n  &quot;cause&quot;: {\n    &quot;errorMessage&quot;: &quot;com.amazonaws.auth.BasicAWSCredentials&quot;,\n    &quot;errorType&quot;: &quot;java.lang.ClassNotFoundException&quot;,\n    &quot;stackTrace&quot;: [\n      &quot;java.base/java.net.URLClassLoader.findClass(Unknown Source)&quot;,\n      &quot;java.base/java.lang.ClassLoader.loadClass(Unknown Source)&quot;,\n      &quot;java.base/java.lang.ClassLoader.loadClass(Unknown Source)&quot;,\n      &quot;amazonenv.Main.executeLambda(Main.java:15)&quot;,\n      &quot;java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&quot;,\n      &quot;java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&quot;,\n      &quot;java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&quot;,\n      &quot;java.base/java.lang.reflect.Method.invoke(Unknown Source)&quot;\n    ]\n  }\n}\n</code></pre>\n<p>If I run this method locally it works. Also, if I call the method with only the return &quot;Executed&quot;, the Lambda also works</p>\n<p>Any help is appreciated.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697240588,"post_id":77291100,"comment_id":136259716,"body_markdown":"Execution begins with the `public static void main (String [] args)` method. What does that method do?  It calls `createPath ()`. There are no instructions to follow after that, so the program terminates normally.  And, by the way, in `main`, the `int[][]` returned by `createPath()` is ignored.","body":"Execution begins with the <code>public static void main (String [] args)</code> method. What does that method do?  It calls <code>createPath ()</code>. There are no instructions to follow after that, so the program terminates normally.  And, by the way, in <code>main</code>, the <code>int[][]</code> returned by <code>createPath()</code> is ignored."},{"owner":{"account_id":29667626,"reputation":11,"user_id":22737714,"display_name":"Khariu"},"score":0,"creation_date":1697242003,"post_id":77291100,"comment_id":136259797,"body_markdown":"completely forgot about the main method, its not used and I&#39;ve just been executing the run method specifically.","body":"completely forgot about the main method, its not used and I&#39;ve just been executing the run method specifically."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697246977,"post_id":77291100,"comment_id":136260062,"body_markdown":"By the way, have you tried running this in a debugger? You can set breakpoints. When code execution reaches a breakpoint, it halts. You can inspect variables, and run the code one-step-at-a-time.  Another way is to insert `System.println (` calls to display where the program is and the values of selected variables.  https://ericlippert.com/2014/03/05/how-to-debug-small-programs/","body":"By the way, have you tried running this in a debugger? You can set breakpoints. When code execution reaches a breakpoint, it halts. You can inspect variables, and run the code one-step-at-a-time.  Another way is to insert <code>System.println (</code> calls to display where the program is and the values of selected variables.  <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697248227,"post_id":77291100,"comment_id":136260106,"body_markdown":"Please also fine polish your indentation to make your code still easier or us to read and see what could be wrong. I believe your BlueJ can indent the code for you.","body":"Please also fine polish your indentation to make your code still easier or us to read and see what could be wrong. I believe your BlueJ can indent the code for you."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697248661,"post_id":77291100,"comment_id":136260121,"body_markdown":"Will `path` always be a &quot;square array&quot;? (i.e., number of rows == number of columns).","body":"Will <code>path</code> always be a &quot;square array&quot;? (i.e., number of rows == number of columns)."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1697248678,"post_id":77291100,"comment_id":136260123,"body_markdown":"Your 2D array is 20 by 20. So `path.length` is 20. So `for (int i = 0; i &lt; path.length+1; i++)` makes the program go 21 times through the loop. That doesn’t suffice for all the 1s. Also after you go down you sometimes need to left, sometimes right.","body":"Your 2D array is 20 by 20. So <code>path.length</code> is 20. So <code>for (int i = 0; i &lt; path.length+1; i++)</code> makes the program go 21 times through the loop. That doesn’t suffice for all the 1s. Also after you go down you sometimes need to left, sometimes right."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697249018,"post_id":77291100,"comment_id":136260138,"body_markdown":"Do you get an exception? If you do, the question should have a copy of the stack trace.  It looks to me like your code could throw an `ArrayIndexOutOfBoundsException`. For example, if the current column is the rightmost column, and you check the next column to the right.  It&#39;s made worse with the `+1` in ` for (int i = 0; i &lt; path.length+1; i++)`","body":"Do you get an exception? If you do, the question should have a copy of the stack trace.  It looks to me like your code could throw an <code>ArrayIndexOutOfBoundsException</code>. For example, if the current column is the rightmost column, and you check the next column to the right.  It&#39;s made worse with the <code>+1</code> in ` for (int i = 0; i &lt; path.length+1; i++)`"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697249197,"post_id":77291100,"comment_id":136260152,"body_markdown":"By the way, since you are new here, you might want to [take the tour](https://stackoverflow.com/tour), see [How to Ask](https://stackoverflow.com/tour), and pages they link to.","body":"By the way, since you are new here, you might want to <a href=\"https://stackoverflow.com/tour\">take the tour</a>, see <a href=\"https://stackoverflow.com/tour\">How to Ask</a>, and pages they link to."},{"owner":{"account_id":29667626,"reputation":11,"user_id":22737714,"display_name":"Khariu"},"score":0,"creation_date":1697249243,"post_id":77291100,"comment_id":136260156,"body_markdown":"I get no exception, it compiles fine just stops changing ones to sevens on the 20th column and 3rd row. it changes that 1 to a seven and than instead of continuing downward it stops. I have removed the +1 from path.length and it still works fine.","body":"I get no exception, it compiles fine just stops changing ones to sevens on the 20th column and 3rd row. it changes that 1 to a seven and than instead of continuing downward it stops. I have removed the +1 from path.length and it still works fine."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697249574,"post_id":77291100,"comment_id":136260176,"body_markdown":"I wonder if it does throw an exception, but you are not seeing it. It might have something to do with the way you are running the code. Try adding this line to your code early, where it is sure to be executed: `System.err.println (&quot;I can see stderr.&quot;);`","body":"I wonder if it does throw an exception, but you are not seeing it. It might have something to do with the way you are running the code. Try adding this line to your code early, where it is sure to be executed: <code>System.err.println (&quot;I can see stderr.&quot;);</code>"},{"owner":{"account_id":29667626,"reputation":11,"user_id":22737714,"display_name":"Khariu"},"score":0,"creation_date":1697250035,"post_id":77291100,"comment_id":136260187,"body_markdown":"I added the code provided to two different places to test, 1 to the very top of the finder method and one to the very top of the printPath method, the text &quot;I can see stderr.&quot; has appeared twice in the place errors typically show up but nothing else","body":"I added the code provided to two different places to test, 1 to the very top of the finder method and one to the very top of the printPath method, the text &quot;I can see stderr.&quot; has appeared twice in the place errors typically show up but nothing else"}],"answers":[{"comments":[{"owner":{"account_id":29667626,"reputation":11,"user_id":22737714,"display_name":"Khariu"},"score":1,"creation_date":1697244034,"post_id":77291189,"comment_id":136259923,"body_markdown":"Im not allowed to hard code / brute force this assignment. Also that for loop just doesnt work in my coding software, my school has us using the BlueJ application.","body":"Im not allowed to hard code / brute force this assignment. Also that for loop just doesnt work in my coding software, my school has us using the BlueJ application."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697246542,"post_id":77291189,"comment_id":136260044,"body_markdown":"@Khariu , I don&#39;t understand your objection. The question header says the assignment is to change all `1` to `7`. The best way to do that is to go cell-by-cell.  Now, if there is a restriction that all the cells with value `1`  have to be contiguous, and, once started, you are allowed to move only to an orthogonally adjacent cell that has value `1`, you should edit the question to state that. Do not rely on us inferring that from your code sample.","body":"@Khariu , I don&#39;t understand your objection. The question header says the assignment is to change all <code>1</code> to <code>7</code>. The best way to do that is to go cell-by-cell.  Now, if there is a restriction that all the cells with value <code>1</code>  have to be contiguous, and, once started, you are allowed to move only to an orthogonally adjacent cell that has value <code>1</code>, you should edit the question to state that. Do not rely on us inferring that from your code sample."},{"owner":{"account_id":29667626,"reputation":11,"user_id":22737714,"display_name":"Khariu"},"score":0,"creation_date":1697246704,"post_id":77291189,"comment_id":136260052,"body_markdown":"Very sorry, Iam new to all this stuff, I will edit the original question ASAP.","body":"Very sorry, Iam new to all this stuff, I will edit the original question ASAP."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1697247955,"post_id":77291189,"comment_id":136260086,"body_markdown":"@Khariu, this doesn&#39;t compile in _BlueJ_?","body":"@Khariu, this doesn&#39;t compile in <i>BlueJ</i>?"}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697242876,"creation_date":1697242547,"answer_id":77291189,"question_id":77291100,"body_markdown":"&gt; _&quot;... the goal is to get through the array and change all 1s to 7s no idea whats going wrong ...&quot;_\r\n\r\nYou&#39;ll need a _loop_ for each array.\r\n\r\n```java\r\nvoid f(int[][] x) {\r\n    int i, n;\r\n    for (int[] a : x)\r\n        for (i = 0, n = x.length; i &lt; n; i++)\r\n            if (a[i] == 1) a[i] = 7;\r\n}\r\n```","title":"2d array Program for an assignment should be a simple fix, the goal is to get through the array and change all 1s to 7s no idea whats going wrong","body":"<blockquote>\n<p><em>&quot;... the goal is to get through the array and change all 1s to 7s no idea whats going wrong ...&quot;</em></p>\n</blockquote>\n<p>You'll need a <em>loop</em> for each array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void f(int[][] x) {\n    int i, n;\n    for (int[] a : x)\n        for (i = 0, n = x.length; i &lt; n; i++)\n            if (a[i] == 1) a[i] = 7;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":29667626,"reputation":11,"user_id":22737714,"display_name":"Khariu"},"score":0,"creation_date":1697325384,"post_id":77291473,"comment_id":136266119,"body_markdown":"Thank you very much, I will implement this into my code asap.","body":"Thank you very much, I will implement this into my code asap."},{"owner":{"account_id":29667626,"reputation":11,"user_id":22737714,"display_name":"Khariu"},"score":0,"creation_date":1697326453,"post_id":77291473,"comment_id":136266186,"body_markdown":"It is indeed throwing the out of bounds exception, I have an idea of using  the if statement to check if its either a 1, 0 or 7. Do you have a possibly better / more efficient idea?","body":"It is indeed throwing the out of bounds exception, I have an idea of using  the if statement to check if its either a 1, 0 or 7. Do you have a possibly better / more efficient idea?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697330213,"post_id":77291473,"comment_id":136266380,"body_markdown":"@Khariu  The `if` statement guards would be something like this: `if (col + 1 &lt; path[row].length` for &quot;move right&quot; check. For &quot;move left&quot;, `if (col - 1 &gt;= 0`. For &quot;move down&quot;, `if (row + 1 &lt; path.length`.  Combine the guard clauses with the appropriate `if` / `else if`.  For example, `if (col + 1 &lt; path[row].length &amp;&amp; path[row][col + 1])`. The guard clause should be on the left side of the `&amp;&amp;` because you need short circuit evaluation.","body":"@Khariu  The <code>if</code> statement guards would be something like this: <code>if (col + 1 &lt; path[row].length</code> for &quot;move right&quot; check. For &quot;move left&quot;, <code>if (col - 1 &gt;= 0</code>. For &quot;move down&quot;, <code>if (row + 1 &lt; path.length</code>.  Combine the guard clauses with the appropriate <code>if</code> / <code>else if</code>.  For example, <code>if (col + 1 &lt; path[row].length &amp;&amp; path[row][col + 1])</code>. The guard clause should be on the left side of the <code>&amp;&amp;</code> because you need short circuit evaluation."},{"owner":{"account_id":29667626,"reputation":11,"user_id":22737714,"display_name":"Khariu"},"score":0,"creation_date":1697388667,"post_id":77291473,"comment_id":136270955,"body_markdown":"I&#39;ve implemented this and it has solved the out of bounds exception, but now the ones stop changing to sevens after the first digit, do you know why this is happening?","body":"I&#39;ve implemented this and it has solved the out of bounds exception, but now the ones stop changing to sevens after the first digit, do you know why this is happening?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697393450,"post_id":77291473,"comment_id":136271481,"body_markdown":"@Khariu do you mean it halts after only one iteration?  No, I don&#39;t know why that is happening. (But, I have not actually compiled or run the code.)   If it halts after one iteration, the bounds exception problem might not actually have been solved. In any case, check / debug your current code. If you don&#39;t figure it out, we might want to see it, which would require a new question.","body":"@Khariu do you mean it halts after only one iteration?  No, I don&#39;t know why that is happening. (But, I have not actually compiled or run the code.)   If it halts after one iteration, the bounds exception problem might not actually have been solved. In any case, check / debug your current code. If you don&#39;t figure it out, we might want to see it, which would require a new question."},{"owner":{"account_id":29667626,"reputation":11,"user_id":22737714,"display_name":"Khariu"},"score":0,"creation_date":1697425651,"post_id":77291473,"comment_id":136273873,"body_markdown":"No, for some reason it completes the change to the first cell and completes the change to the second cell changing two 1&#39;s to 7&#39;s total. I will go through the debug process again tomorrow and see if I can solve it myself.","body":"No, for some reason it completes the change to the first cell and completes the change to the second cell changing two 1&#39;s to 7&#39;s total. I will go through the debug process again tomorrow and see if I can solve it myself."}],"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697254698,"creation_date":1697252770,"answer_id":77291473,"question_id":77291100,"body_markdown":"The problem is with this line: `for (int i = 0; i &lt; path.length+1; i++) {`\r\n\r\nWhen I first saw that line, I thought it was iterating through each row of `path`.  But, it causes your program to look for `path.length` *cells*, not rows, then quits. Unless the path is straight down, there are more cells, likely many more, in the path than `path.length`.\r\n\r\nI suggest the following changes to your code:\r\n\r\n - Decide on how it will be determined that the end of the path has been reached. \r\n - Replace the `for` loop with a `while` loop or a `do while` loop, using the terminating condition. This is because the number of cells to be marked will be unknown when the loop begins.\r\n - Alternatively, use `while (true)` and have a `break` inside the loop when the terminating condition is reached.\r\n - Move `path[row][col] = 7` to the top of the loop, before the `if` statements that check if the next move is right, down, or left. Alternatively, move it after those `if` blocks. For simplicity, it is better to have it in one place.\r\n -  The *only* content of the right / down / left `if` blocks should be to change `row`  or `col`, and possibly to detect the terminating condition.\r\n - Add guard `if` statements to be sure checking the adjacent cells does not go out of bounds. \r\n\r\n````\r\nboolean advance = true;\r\nint row = 0;\r\nint col = 0;\r\nwhile ( advance ) { \r\n    path [row][col] = 7;\r\n    if (path [row][col+1] == 1) { col++; } // right\r\n    else if (path[row][col-1] == 1) { col--; } // left\r\n    else if (path[row+1][col] == 1) { row++; } // down\r\n    else { advance = false; }\r\n}\r\n````\r\n\r\nI did not include the guard checking. Without them, this code will throw an `ArrayIndexOutOfBounds` condition for most paths. You can add the guard conditions to the `if` statements using `&amp;&amp;` before the `path[` part.\r\n\r\nThis code assumes `path [0][0]` will initially have a value of `1`. It assumes there will be no turn in the up direction.\r\n \r\n\r\n ","title":"2d array Program for an assignment should be a simple fix, the goal is to get through the array and change all 1s to 7s no idea whats going wrong","body":"<p>The problem is with this line: <code>for (int i = 0; i &lt; path.length+1; i++) {</code></p>\n<p>When I first saw that line, I thought it was iterating through each row of <code>path</code>.  But, it causes your program to look for <code>path.length</code> <em>cells</em>, not rows, then quits. Unless the path is straight down, there are more cells, likely many more, in the path than <code>path.length</code>.</p>\n<p>I suggest the following changes to your code:</p>\n<ul>\n<li>Decide on how it will be determined that the end of the path has been reached.</li>\n<li>Replace the <code>for</code> loop with a <code>while</code> loop or a <code>do while</code> loop, using the terminating condition. This is because the number of cells to be marked will be unknown when the loop begins.</li>\n<li>Alternatively, use <code>while (true)</code> and have a <code>break</code> inside the loop when the terminating condition is reached.</li>\n<li>Move <code>path[row][col] = 7</code> to the top of the loop, before the <code>if</code> statements that check if the next move is right, down, or left. Alternatively, move it after those <code>if</code> blocks. For simplicity, it is better to have it in one place.</li>\n<li>The <em>only</em> content of the right / down / left <code>if</code> blocks should be to change <code>row</code>  or <code>col</code>, and possibly to detect the terminating condition.</li>\n<li>Add guard <code>if</code> statements to be sure checking the adjacent cells does not go out of bounds.</li>\n</ul>\n<pre><code>boolean advance = true;\nint row = 0;\nint col = 0;\nwhile ( advance ) { \n    path [row][col] = 7;\n    if (path [row][col+1] == 1) { col++; } // right\n    else if (path[row][col-1] == 1) { col--; } // left\n    else if (path[row+1][col] == 1) { row++; } // down\n    else { advance = false; }\n}\n</code></pre>\n<p>I did not include the guard checking. Without them, this code will throw an <code>ArrayIndexOutOfBounds</code> condition for most paths. You can add the guard conditions to the <code>if</code> statements using <code>&amp;&amp;</code> before the <code>path[</code> part.</p>\n<p>This code assumes <code>path [0][0]</code> will initially have a value of <code>1</code>. It assumes there will be no turn in the up direction.</p>\n"}],"owner":{"account_id":29667626,"reputation":11,"user_id":22737714,"display_name":"Khariu"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697254698,"creation_date":1697239933,"question_id":77291100,"body_markdown":"This is a program that is used to go through an array and change all 1 &#39;s that are connected to each-other to the number 7. \r\n\r\nIam having an issue with the program going to the far right side of the array and instead of continuing downward to complete the change to the other 1&#39;s it stops.\r\n\r\nThe program compiles fine with 0 errors.\r\nEarlier today I was running into an &quot;out of bounds exception&quot; error but fixed it by adding +1 or -1 to the col / row variables.\r\n\r\nWhy is it that the code stops working when it hits the far right column of the array?\r\n\r\n\r\n\r\n      `public static void run(){ \r\n        int[][]nums = createPath(); \r\n        finder(nums);   \r\n        createPath(); \r\n        printPath(nums); \r\n    } \r\n\r\n    \r\n    public static void finder(int[][] path){ \r\n\r\n    \r\n        int row = 0; \r\n        int col = 0; \r\n        for (int i = 0; i &lt; path.length+1; i++) {\r\n            // right control movement\r\n            if(path[row][col+1]==1) { //col + 1 \r\n                //path[row][col+1]==1\r\n                col++; \r\n\r\n                path[row][col]=7; \r\n\r\n            } \r\n            // downward control\r\n            else if(path[row+1][col]==1) { // row + 1 \r\n\r\n                row++; \r\n\r\n                path[row][col]=7; \r\n\r\n            } \r\n            // left control\r\n            else if(path[row][col-1]==1) { // col - 1 \r\n\r\n                col-- ; \r\n\r\n                path[row][col]=7; \r\n\r\n            } \r\n\r\n        }\r\n        System.out.println(&quot;congrats big man&quot;); \r\n\r\n    } \r\n    public static int[][] createPath(){ \r\n        int[][] path = { \r\n                {1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \r\n                {0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \r\n                {0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},\r\n                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, \r\n                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, \r\n                {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \r\n                {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \r\n                {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \r\n                {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0}, \r\n                {1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \r\n                {0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \r\n                {0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \r\n                {0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0}, \r\n                {0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0}, \r\n                {0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0}, \r\n                {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}, \r\n                {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}, \r\n                {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}, \r\n                {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}, \r\n                {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}}; \r\n    \r\n        return path; \r\n\r\n    } \r\n\r\n    public static void printPath(int[][] path) { \r\n\r\n        int[][]balls = createPath(); \r\n\r\n        for(int i=0; i&lt;path.length; i++) { \r\n\r\n            for(int j=0; j&lt;path[i].length; j++) { \r\n\r\n                System.out.print(path[i][j]+ &quot; &quot;); \r\n\r\n            } \r\n\r\n            System.out.println(); \r\n\r\n        } \r\n\r\n        System.out.println(); \r\n\r\n    } \r\n       `\r\n\r\n","title":"2d array Program for an assignment should be a simple fix, the goal is to get through the array and change all 1s to 7s no idea whats going wrong","body":"<p>This is a program that is used to go through an array and change all 1 's that are connected to each-other to the number 7.</p>\n<p>Iam having an issue with the program going to the far right side of the array and instead of continuing downward to complete the change to the other 1's it stops.</p>\n<p>The program compiles fine with 0 errors.\nEarlier today I was running into an &quot;out of bounds exception&quot; error but fixed it by adding +1 or -1 to the col / row variables.</p>\n<p>Why is it that the code stops working when it hits the far right column of the array?</p>\n<pre><code>  `public static void run(){ \n    int[][]nums = createPath(); \n    finder(nums);   \n    createPath(); \n    printPath(nums); \n} \n\n\npublic static void finder(int[][] path){ \n\n\n    int row = 0; \n    int col = 0; \n    for (int i = 0; i &lt; path.length+1; i++) {\n        // right control movement\n        if(path[row][col+1]==1) { //col + 1 \n            //path[row][col+1]==1\n            col++; \n\n            path[row][col]=7; \n\n        } \n        // downward control\n        else if(path[row+1][col]==1) { // row + 1 \n\n            row++; \n\n            path[row][col]=7; \n\n        } \n        // left control\n        else if(path[row][col-1]==1) { // col - 1 \n\n            col-- ; \n\n            path[row][col]=7; \n\n        } \n\n    }\n    System.out.println(&quot;congrats big man&quot;); \n\n} \npublic static int[][] createPath(){ \n    int[][] path = { \n            {1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \n            {0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \n            {0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},\n            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, \n            {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, \n            {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \n            {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \n            {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \n            {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0}, \n            {1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \n            {0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \n            {0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, \n            {0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0}, \n            {0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0}, \n            {0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0}, \n            {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}, \n            {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}, \n            {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}, \n            {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}, \n            {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}}; \n\n    return path; \n\n} \n\npublic static void printPath(int[][] path) { \n\n    int[][]balls = createPath(); \n\n    for(int i=0; i&lt;path.length; i++) { \n\n        for(int j=0; j&lt;path[i].length; j++) { \n\n            System.out.print(path[i][j]+ &quot; &quot;); \n\n        } \n\n        System.out.println(); \n\n    } \n\n    System.out.println(); \n\n} \n   `\n</code></pre>\n"},{"tags":["java","openjdk-17"],"comments":[{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":2,"creation_date":1662733156,"post_id":73663529,"comment_id":130081285,"body_markdown":"add `sun.util.calendar`, `add-opens` packages don&#39;t cascade","body":"add <code>sun.util.calendar</code>, <code>add-opens</code> packages don&#39;t cascade"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":5,"creation_date":1662736602,"post_id":73663529,"comment_id":130082550,"body_markdown":"Yea ... but why is the code using depending on `sun.util.calendar.BaseCalendar$Date`.  Is it your code?  A 3rd party library?","body":"Yea ... but why is the code using depending on <code>sun.util.calendar.BaseCalendar$Date</code>.  Is it your code?  A 3rd party library?"},{"owner":{"account_id":17123008,"reputation":335,"user_id":12390835,"display_name":"RAITON"},"score":0,"creation_date":1662737855,"post_id":73663529,"comment_id":130082940,"body_markdown":"This is come from 3rd party library, this is the output of mvn dependency:tree ----&gt; [INFO] +- uk.com.robust-it:cloning:jar:1.9.10:compile","body":"This is come from 3rd party library, this is the output of mvn dependency:tree ----&gt; [INFO] +- uk.com.robust-it:cloning:jar:1.9.10:compile"},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":4,"creation_date":1662737979,"post_id":73663529,"comment_id":130082977,"body_markdown":"@StephenC is driving at a good point.  Depending on how your code is run, using `add-opens` can be risky.  You&#39;re essentially turning off security features of the jvm.  This can be higher risk if your code is running in an environment you do not control, e.g. a user&#39;s system.  Just calling out for awareness, and thank you StephenC for raising.","body":"@StephenC is driving at a good point.  Depending on how your code is run, using <code>add-opens</code> can be risky.  You&#39;re essentially turning off security features of the jvm.  This can be higher risk if your code is running in an environment you do not control, e.g. a user&#39;s system.  Just calling out for awareness, and thank you StephenC for raising."},{"owner":{"account_id":17123008,"reputation":335,"user_id":12390835,"display_name":"RAITON"},"score":0,"creation_date":1662738120,"post_id":73663529,"comment_id":130083035,"body_markdown":"agree, my code is running inside container in private cloud, but for sure this is not recommended, I will remove this when this fixed in cloning api --&gt; https://github.com/kostaskougios/cloning/issues/118","body":"agree, my code is running inside container in private cloud, but for sure this is not recommended, I will remove this when this fixed in cloning api --&gt; <a href=\"https://github.com/kostaskougios/cloning/issues/118\" rel=\"nofollow noreferrer\">github.com/kostaskougios/cloning/issues/118</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1663057275,"post_id":73663529,"comment_id":130143421,"body_markdown":"The problem obviously is the `com.rits.cloning.Cloner` *in general*. It looks like a software designed to recursively copy objects using deep Reflection, without any understanding of those objects. This can break in so many way and is horribly inefficient at the same time.","body":"The problem obviously is the <code>com.rits.cloning.Cloner</code> <i>in general</i>. It looks like a software designed to recursively copy objects using deep Reflection, without any understanding of those objects. This can break in so many way and is horribly inefficient at the same time."}],"answers":[{"tags":[],"owner":{"account_id":6064008,"reputation":79,"user_id":4734968,"display_name":"Artur Linhart"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697254606,"creation_date":1697254606,"answer_id":77291527,"question_id":73663529,"body_markdown":"We had this problem too, so I have also searched for the solution for this problem.\r\n\r\nI would offer to you to use instead of Cloner the deep cloning through serialization into bytestream like described for example [here][1] in the chapter &quot;Deep Copy using Serialization&quot;. It is true you will get larger garbage collection and need your objects to be throroughly serializable, but not only should it be safe, but you should be rewarded by better performance - I have performed cloning through serialization on some large objects list runned 1000 times by both methods over same data and my test gave following:\r\n\r\ndeep copy by serialization millis: 231\r\n\r\ndeep copy by Cloner millis:        324\r\n\r\nOf course such test is not very over-representative, there is some difference in the case of the objects with more complex/less complex structure, but the difference +50% of processing time in the case of usage of Cloner gives, I think, good margin to be sure you will not not be worse with serialization cloning than with Cloner cloning.\r\n\r\n\r\n  [1]: https://www.studytonight.com/java-examples/how-to-make-a-deep-copy-of-an-object-in-java","title":"JDK 17 Unable to make field int sun.util.calendar.BaseCalendar","body":"<p>We had this problem too, so I have also searched for the solution for this problem.</p>\n<p>I would offer to you to use instead of Cloner the deep cloning through serialization into bytestream like described for example <a href=\"https://www.studytonight.com/java-examples/how-to-make-a-deep-copy-of-an-object-in-java\" rel=\"nofollow noreferrer\">here</a> in the chapter &quot;Deep Copy using Serialization&quot;. It is true you will get larger garbage collection and need your objects to be throroughly serializable, but not only should it be safe, but you should be rewarded by better performance - I have performed cloning through serialization on some large objects list runned 1000 times by both methods over same data and my test gave following:</p>\n<p>deep copy by serialization millis: 231</p>\n<p>deep copy by Cloner millis:        324</p>\n<p>Of course such test is not very over-representative, there is some difference in the case of the objects with more complex/less complex structure, but the difference +50% of processing time in the case of usage of Cloner gives, I think, good margin to be sure you will not not be worse with serialization cloning than with Cloner cloning.</p>\n"}],"owner":{"account_id":17123008,"reputation":335,"user_id":12390835,"display_name":"RAITON"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1544,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697254606,"creation_date":1662732992,"question_id":73663529,"body_markdown":"This exception occurs after java migration to OpenJDK Runtime Environment Temurin-17.0.3+7 build 17.0.3+7\r\n\r\nI have try to add add those JVM OPTIONS but not help\r\n\r\n    JVM_OPTIONS=&quot;$JVM_OPTIONS --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.base=ALL-UNNAMED --add-opens java.base/java.io=ALL-UNNAMED --add-opens java.base/sun.util=ALL-UNNAMED&quot;\r\n\r\n\r\nException \r\n    \r\n    \r\n    2022-09-09 16:05:46,132 [ERROR] [pool-48-thread-5] : cannot close object\r\n    java.lang.reflect.InaccessibleObjectException: Unable to make field int sun.util.calendar.BaseCalendar$Date.cachedYear accessible: module java.base does not &quot;opens sun.util.calendar&quot; to unnamed module @35fc6dc4\r\n    \tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n    \tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n    \tat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\r\n    \tat java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\r\n    \tat com.rits.cloning.Cloner.addAll(Cloner.java:561)\r\n    \tat com.rits.cloning.Cloner.allFields(Cloner.java:578)\r\n    \tat com.rits.cloning.Cloner.cloneObject(Cloner.java:463)\r\n    \tat com.rits.cloning.Cloner.cloneInternal(Cloner.java:454)\r\n    \tat com.rits.cloning.Cloner.applyCloningStrategy(Cloner.java:488)\r\n    \tat com.rits.cloning.Cloner.cloneObject(Cloner.java:471)\r\n    \tat com.rits.cloning.Cloner.cloneInternal(Cloner.java:454)\r\n    \tat com.rits.cloning.Cloner.applyCloningStrategy(Cloner.java:488)\r\n    \tat com.rits.cloning.Cloner.cloneObject(Cloner.java:471)\r\n    \tat com.rits.cloning.Cloner.cloneInternal(Cloner.java:454)\r\n    \tat com.rits.cloning.Cloner$1.deepClone(Cloner.java:121)\r\n    \tat com.rits.cloning.FastClonerArrayList.clone(FastClonerArrayList.java:19)\r\n    \tat com.rits.cloning.Cloner.fastClone(Cloner.java:132)\r\n    \tat com.rits.cloning.Cloner.cloneInternal(Cloner.java:439)\r\n    \tat com.rits.cloning.Cloner.deepClone(Cloner.java:324)\r\n\r\n\r\nany idea ?\r\n","title":"JDK 17 Unable to make field int sun.util.calendar.BaseCalendar","body":"<p>This exception occurs after java migration to OpenJDK Runtime Environment Temurin-17.0.3+7 build 17.0.3+7</p>\n<p>I have try to add add those JVM OPTIONS but not help</p>\n<pre><code>JVM_OPTIONS=&quot;$JVM_OPTIONS --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.base=ALL-UNNAMED --add-opens java.base/java.io=ALL-UNNAMED --add-opens java.base/sun.util=ALL-UNNAMED&quot;\n</code></pre>\n<p>Exception</p>\n<pre><code>2022-09-09 16:05:46,132 [ERROR] [pool-48-thread-5] : cannot close object\njava.lang.reflect.InaccessibleObjectException: Unable to make field int sun.util.calendar.BaseCalendar$Date.cachedYear accessible: module java.base does not &quot;opens sun.util.calendar&quot; to unnamed module @35fc6dc4\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n    at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\n    at java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\n    at com.rits.cloning.Cloner.addAll(Cloner.java:561)\n    at com.rits.cloning.Cloner.allFields(Cloner.java:578)\n    at com.rits.cloning.Cloner.cloneObject(Cloner.java:463)\n    at com.rits.cloning.Cloner.cloneInternal(Cloner.java:454)\n    at com.rits.cloning.Cloner.applyCloningStrategy(Cloner.java:488)\n    at com.rits.cloning.Cloner.cloneObject(Cloner.java:471)\n    at com.rits.cloning.Cloner.cloneInternal(Cloner.java:454)\n    at com.rits.cloning.Cloner.applyCloningStrategy(Cloner.java:488)\n    at com.rits.cloning.Cloner.cloneObject(Cloner.java:471)\n    at com.rits.cloning.Cloner.cloneInternal(Cloner.java:454)\n    at com.rits.cloning.Cloner$1.deepClone(Cloner.java:121)\n    at com.rits.cloning.FastClonerArrayList.clone(FastClonerArrayList.java:19)\n    at com.rits.cloning.Cloner.fastClone(Cloner.java:132)\n    at com.rits.cloning.Cloner.cloneInternal(Cloner.java:439)\n    at com.rits.cloning.Cloner.deepClone(Cloner.java:324)\n</code></pre>\n<p>any idea ?</p>\n"},{"tags":["java","pattern-matching","java-21","record-patterns"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":1,"creation_date":1695387759,"post_id":77157787,"comment_id":136021505,"body_markdown":"I&#39;m not entirely sure but I think `record`s aren&#39;t meant to be destructured per se. At least not with Java 21. I think the destructuring functionality is just something that `switch` and `instanceof` offer as a way to simplify handling objects","body":"I&#39;m not entirely sure but I think <code>record</code>s aren&#39;t meant to be destructured per se. At least not with Java 21. I think the destructuring functionality is just something that <code>switch</code> and <code>instanceof</code> offer as a way to simplify handling objects"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":3,"creation_date":1695387783,"post_id":77157787,"comment_id":136021513,"body_markdown":"I&#39;m not an expert on new features in Java 21 but I think the basic answer is no, and you shouldn&#39;t try to things like forcing an `instanceof` or `switch`.  Just call `point.x()` and `point.y()`.","body":"I&#39;m not an expert on new features in Java 21 but I think the basic answer is no, and you shouldn&#39;t try to things like forcing an <code>instanceof</code> or <code>switch</code>.  Just call <code>point.x()</code> and <code>point.y()</code>."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1695387933,"post_id":77157787,"comment_id":136021544,"body_markdown":"&quot;if we assume null-safety&quot; That&#39;s a *big* if. Java doesn&#39;t &quot;assume null-safety&quot;.","body":"&quot;if we assume null-safety&quot; That&#39;s a <i>big</i> if. Java doesn&#39;t &quot;assume null-safety&quot;."},{"owner":{"account_id":178797,"reputation":1794,"user_id":3402449,"display_name":"Ahmad Shahwan"},"score":0,"creation_date":1695388067,"post_id":77157787,"comment_id":136021567,"body_markdown":"&quot;Java doesn&#39;t &#39;assume null-safety&#39;&quot;. In a way it does; I don&#39;t have to provide a default clause in the `switch` statement, and code compiles.","body":"&quot;Java doesn&#39;t &#39;assume null-safety&#39;&quot;. In a way it does; I don&#39;t have to provide a default clause in the <code>switch</code> statement, and code compiles."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1695388457,"post_id":77157787,"comment_id":136021635,"body_markdown":"Okay, apparently `switch` does. `instanceof` doesn&#39;t though.","body":"Okay, apparently <code>switch</code> does. <code>instanceof</code> doesn&#39;t though."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1695389093,"post_id":77157787,"comment_id":136021761,"body_markdown":"@markspace &quot;*you shouldn&#39;t try to things like forcing an instanceof or switch. Just call `point.x()` and `point.y()`*&quot; I suppose this is a matter of code style, but in the JEP they are specifically &quot;forcing&quot; an instanceof, just to use destructuring.","body":"@markspace &quot;<i>you shouldn&#39;t try to things like forcing an instanceof or switch. Just call <code>point.x()</code> and <code>point.y()</code></i>&quot; I suppose this is a matter of code style, but in the JEP they are specifically &quot;forcing&quot; an instanceof, just to use destructuring."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695399546,"post_id":77157787,"comment_id":136024005,"body_markdown":"@QBrute and OP, I posted an answer that addresses your point. Long story short, the creators of pattern-matching in Java are actually considering a feature that is custom built to solve your exact problem. Check it out.","body":"@QBrute and OP, I posted an answer that addresses your point. Long story short, the creators of pattern-matching in Java are actually considering a feature that is custom built to solve your exact problem. Check it out."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695399624,"post_id":77157787,"comment_id":136024026,"body_markdown":"Adding @markspace, I&#39;ve addressed this point in a separate answer.","body":"Adding @markspace, I&#39;ve addressed this point in a separate answer."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695399634,"post_id":77157787,"comment_id":136024029,"body_markdown":"Also adding @Sweeper","body":"Also adding @Sweeper"}],"answers":[{"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1695404227,"post_id":77159261,"comment_id":136024824,"body_markdown":"Good video link, but I agree, this entire answer can be much improved. I personally find the bold, italic and caps style very annoying. You need 3 different kinds of emphasis? I would sum this up in one sentence &quot;*It doesn&#39;t exist yet but they&#39;re thinking of adding it in the future using a new keyword. [video link] [code example]*&quot;","body":"Good video link, but I agree, this entire answer can be much improved. I personally find the bold, italic and caps style very annoying. You need 3 different kinds of emphasis? I would sum this up in one sentence &quot;<i>It doesn&#39;t exist yet but they&#39;re thinking of adding it in the future using a new keyword. [video link] [code example]</i>&quot;"},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1695410061,"post_id":77159261,"comment_id":136025777,"body_markdown":"@Holger I&#39;ve de-loled the answer.  Although it conveyed that the answerer found those particular facts humorous, it didn&#39;t really convey anything of substance to the answer itself.","body":"@Holger I&#39;ve de-loled the answer.  Although it conveyed that the answerer found those particular facts humorous, it didn&#39;t really convey anything of substance to the answer itself."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1695414453,"post_id":77159261,"comment_id":136026376,"body_markdown":"Hello all. Fair criticisms. Thank you @M.Justin for the clean up.","body":"Hello all. Fair criticisms. Thank you @M.Justin for the clean up."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695414519,"post_id":77159261,"comment_id":136026388,"body_markdown":"@Michael I am incredibly excited about this coming future for Java. It is going to enable me to do things that would have been so much harder and error prone previously. That is where the ***ALL CAPS, BOLD AND ITALICIZED*** comes from.","body":"@Michael I am incredibly excited about this coming future for Java. It is going to enable me to do things that would have been so much harder and error prone previously. That is where the <b><i>ALL CAPS, BOLD AND ITALICIZED</i></b> comes from."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695414692,"post_id":77159261,"comment_id":136026407,"body_markdown":"@Holger As for the lols, see above comment.\\","body":"@Holger As for the lols, see above comment.\\"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1695634334,"post_id":77159261,"comment_id":136045720,"body_markdown":"I understood that you are very excited and it’s comprehensible. But here, “lol” has a negative connotation for those who didn’t know about it yet. And in general, we try to keep emotions out of the posts and try to present the facts.","body":"I understood that you are very excited and it’s comprehensible. But here, “lol” has a negative connotation for those who didn’t know about it yet. And in general, we try to keep emotions out of the posts and try to present the facts."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695677359,"post_id":77159261,"comment_id":136053866,"body_markdown":"@Holger Fair enough, understood.","body":"@Holger Fair enough, understood."}],"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":7,"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1697254182,"creation_date":1695399337,"answer_id":77159261,"question_id":77157787,"body_markdown":"As pointed out in [@Michael&#39;s answer](https://stackoverflow.com/a/77157869), currently `switch` or `instanceof` is required for destructuring records patterns.  However, that answer does not reflect what is coming down the pipeline.\r\n\r\nI talk to the creators of pattern-matching in Java on an infrequent basis (you can ask them questions on the [amber-dev mailing list][1]), and the features that have come out in Java 21 are ***only the start of pattern-matching***. We haven&#39;t even reached the half-way point of what they want to include in the language for pattern-matching. I don&#39;t think we&#39;ve even reached the 1/4 point.\r\n\r\nNow, to answer your specific question, the feature that they are currently deliberating on ***that is custom built to solve your exact, specific problem*** is *currently* called `match` (or `let`, again, this is work-in-progress, so the name is not even hammered down yet. All of this is still not guaranteed).\r\n\r\nHere is how they are *thinking* it might work: [The Future of Java: Records, Sealed Classes and Pattern Matching - Jose Paumard](https://youtu.be/L6BS2F0dWXQ?si=shbrG8JVRqUlmbfl&amp;t=4486).\r\n\r\n```lang-java\r\nCircle circle = ...;\r\n\r\nmatch Circle(var center, var radius) = circle;\r\n// center and radius are binding variables\r\n```\r\n\r\nNow, none of this is guaranteed, as they don&#39;t know for a fact that all of this stuff will work the way they expect. If something is not a good fit for the language, they refuse to include it. Hence why none of this is guaranteed. But there is so much more that they are going to ***try*** to put into the language.\r\n\r\nI would watch the rest of the video. They explore a ***lot more*** of what pattern-matching might be in Java. And again, that&#39;s not all. If even half of what they described comes out, then we are not even close to the halfway point. The future is exciting for Java!\r\n\r\nBut yeah, don&#39;t use `instanceof` or `switch` for this. You can, it&#39;s not a sin. But they&#39;re building the actual feature you are going to want to use for your exact use-case later. So maybe use `instanceof` or `switch` *for now*, and then fix them to use the proper thing if/when the actual feature comes out.\r\n\r\nNote that the person leading pattern-matching for Java is [@BrianGoetz](https://stackoverflow.com/users/3553087/brian-goetz).  If he sees this, he will be able to answer this question in better detail than I can.\r\n\r\nAlso, here is the official Java YouTube channel. They teach about stuff like this all the time. They have a great video series talking about Java 21, as well as Pattern-Matching in Java thus far.\r\n\r\nhttps://www.youtube.com/@java/videos\r\n\r\n  [1]: https://mail.openjdk.org/pipermail/amber-dev/","title":"Record patterns in java without instanceof or switch","body":"<p>As pointed out in <a href=\"https://stackoverflow.com/a/77157869\">@Michael's answer</a>, currently <code>switch</code> or <code>instanceof</code> is required for destructuring records patterns.  However, that answer does not reflect what is coming down the pipeline.</p>\n<p>I talk to the creators of pattern-matching in Java on an infrequent basis (you can ask them questions on the <a href=\"https://mail.openjdk.org/pipermail/amber-dev/\" rel=\"nofollow noreferrer\">amber-dev mailing list</a>), and the features that have come out in Java 21 are <em><strong>only the start of pattern-matching</strong></em>. We haven't even reached the half-way point of what they want to include in the language for pattern-matching. I don't think we've even reached the 1/4 point.</p>\n<p>Now, to answer your specific question, the feature that they are currently deliberating on <em><strong>that is custom built to solve your exact, specific problem</strong></em> is <em>currently</em> called <code>match</code> (or <code>let</code>, again, this is work-in-progress, so the name is not even hammered down yet. All of this is still not guaranteed).</p>\n<p>Here is how they are <em>thinking</em> it might work: <a href=\"https://youtu.be/L6BS2F0dWXQ?si=shbrG8JVRqUlmbfl&amp;t=4486\" rel=\"nofollow noreferrer\">The Future of Java: Records, Sealed Classes and Pattern Matching - Jose Paumard</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Circle circle = ...;\n\nmatch Circle(var center, var radius) = circle;\n// center and radius are binding variables\n</code></pre>\n<p>Now, none of this is guaranteed, as they don't know for a fact that all of this stuff will work the way they expect. If something is not a good fit for the language, they refuse to include it. Hence why none of this is guaranteed. But there is so much more that they are going to <em><strong>try</strong></em> to put into the language.</p>\n<p>I would watch the rest of the video. They explore a <em><strong>lot more</strong></em> of what pattern-matching might be in Java. And again, that's not all. If even half of what they described comes out, then we are not even close to the halfway point. The future is exciting for Java!</p>\n<p>But yeah, don't use <code>instanceof</code> or <code>switch</code> for this. You can, it's not a sin. But they're building the actual feature you are going to want to use for your exact use-case later. So maybe use <code>instanceof</code> or <code>switch</code> <em>for now</em>, and then fix them to use the proper thing if/when the actual feature comes out.</p>\n<p>Note that the person leading pattern-matching for Java is <a href=\"https://stackoverflow.com/users/3553087/brian-goetz\">@BrianGoetz</a>.  If he sees this, he will be able to answer this question in better detail than I can.</p>\n<p>Also, here is the official Java YouTube channel. They teach about stuff like this all the time. They have a great video series talking about Java 21, as well as Pattern-Matching in Java thus far.</p>\n<p><a href=\"https://www.youtube.com/@java/videos\" rel=\"nofollow noreferrer\">https://www.youtube.com/@java/videos</a></p>\n"}],"owner":{"account_id":178797,"reputation":1794,"user_id":3402449,"display_name":"Ahmad Shahwan"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":520,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":77159261,"answer_count":1,"score":6,"last_activity_date":1697254182,"creation_date":1695387191,"question_id":77157787,"body_markdown":"Java 21 [record patterns][1] promises the introduction of destructuring to the Java language. However, it seems to be tightly coupled to pattern matching that can only be used as part of `instanceof` comparison or in `switch` statements/expressions.\r\n\r\nConsider the following record.\r\n\r\n```java\r\npublic record Point(int x, int y) {}\r\n```\r\n\r\nIs there a way to destructure an object of that particular type without using `instanceof` or `switch`? The following attempts do destructure `point`. But the code makes little sense as neither `instanceof` nor `switch` are unnecessary if we assume null-safety. \r\n\r\n```java\r\nPoint point = new Point(0, 0);\r\n\r\n// destructuring with instanceof\r\nif (point instanceof Point(int x, int y)) {\r\n    System.out.printf(&quot;Point at (%d,%d)&quot;, x, y);\r\n}\r\n\r\n// destructuring with switch\r\nswitch (point) {\r\n    case Point(int x, int y) -&gt; System.out.printf(&quot;Point at (%d,%d)&quot;, x, y);\r\n}\r\n```\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/440","title":"Record patterns in java without instanceof or switch","body":"<p>Java 21 <a href=\"https://openjdk.org/jeps/440\" rel=\"nofollow noreferrer\">record patterns</a> promises the introduction of destructuring to the Java language. However, it seems to be tightly coupled to pattern matching that can only be used as part of <code>instanceof</code> comparison or in <code>switch</code> statements/expressions.</p>\n<p>Consider the following record.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record Point(int x, int y) {}\n</code></pre>\n<p>Is there a way to destructure an object of that particular type without using <code>instanceof</code> or <code>switch</code>? The following attempts do destructure <code>point</code>. But the code makes little sense as neither <code>instanceof</code> nor <code>switch</code> are unnecessary if we assume null-safety.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Point point = new Point(0, 0);\n\n// destructuring with instanceof\nif (point instanceof Point(int x, int y)) {\n    System.out.printf(&quot;Point at (%d,%d)&quot;, x, y);\n}\n\n// destructuring with switch\nswitch (point) {\n    case Point(int x, int y) -&gt; System.out.printf(&quot;Point at (%d,%d)&quot;, x, y);\n}\n</code></pre>\n"},{"tags":["java","arrays","sorting","double"],"comments":[{"owner":{"account_id":4663157,"reputation":15229,"user_id":3776927,"display_name":"derpirscher"},"score":3,"creation_date":1697202089,"post_id":77287893,"comment_id":136253739,"body_markdown":"I find that hard to believe, that a built-in sort function would &quot;invent&quot; new numbers ... I suspect, there is something wrong with your input (or input processing). Print your `inarr` before sorting and check if it contains the expected values. And why are you even reading doubles when all of your input seem to be integers?","body":"I find that hard to believe, that a built-in sort function would &quot;invent&quot; new numbers ... I suspect, there is something wrong with your input (or input processing). Print your <code>inarr</code> before sorting and check if it contains the expected values. And why are you even reading doubles when all of your input seem to be integers?"},{"owner":{"account_id":25799218,"reputation":35,"user_id":19541910,"display_name":"stanleysearles"},"score":0,"creation_date":1697202432,"post_id":77287893,"comment_id":136253828,"body_markdown":"@derprischer I did. And it worked. I already wrote that in the question description above. I tested exchanging the int values for doubles in case that could be an error, I&#39;m not that experienced in programming to specifically know whether these things could affect the output or not however it doesn&#39;t seem to have made a difference.","body":"@derprischer I did. And it worked. I already wrote that in the question description above. I tested exchanging the int values for doubles in case that could be an error, I&#39;m not that experienced in programming to specifically know whether these things could affect the output or not however it doesn&#39;t seem to have made a difference."},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":0,"creation_date":1697207087,"post_id":77287893,"comment_id":136254737,"body_markdown":"Are you sure your reading is correct? Maybe its locale issue?","body":"Are you sure your reading is correct? Maybe its locale issue?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697210041,"post_id":77287893,"comment_id":136255404,"body_markdown":"Your link does not work for me (and us, I believe).","body":"Your link does not work for me (and us, I believe)."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697210284,"post_id":77287893,"comment_id":136255454,"body_markdown":"We need a [mre], please? Which would include the values to be sorted being hard-coded in the program. Or at the very least the full input being limited to less than 10 numbers if possible, and being given in the question itself. (Obviously, if you can only reproduce the error with 100 numbers, initialize the array with 100 numbers, but do it in the code, not by reading input.)","body":"We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please? Which would include the values to be sorted being hard-coded in the program. Or at the very least the full input being limited to less than 10 numbers if possible, and being given in the question itself. (Obviously, if you can only reproduce the error with 100 numbers, initialize the array with 100 numbers, but do it in the code, not by reading input.)"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697228297,"post_id":77287893,"comment_id":136258587,"body_markdown":"Like @derpirscher says, `Arrays.sort` does not make up or invent new data. If there are zeroes in your array after sorting, they were there before sorting.","body":"Like @derpirscher says, <code>Arrays.sort</code> does not make up or invent new data. If there are zeroes in your array after sorting, they were there before sorting."}],"answers":[{"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697218750,"post_id":77288080,"comment_id":136257158,"body_markdown":"_+1_.  And, realistically they wouldn&#39;t even need the _hasNextDouble_ call, because the _loop_ is conditional to _n_.   _int i = 0; do inarr[i] = sc.nextDouble(); while (++i &lt; n);_","body":"<i>+1</i>.  And, realistically they wouldn&#39;t even need the <i>hasNextDouble</i> call, because the <i>loop</i> is conditional to <i>n</i>.   <i>int i = 0; do inarr[i] = sc.nextDouble(); while (++i &lt; n);</i>"},{"owner":{"account_id":25799218,"reputation":35,"user_id":19541910,"display_name":"stanleysearles"},"score":0,"creation_date":1697243496,"post_id":77288080,"comment_id":136259893,"body_markdown":"Thank you for your answer, I seemed to have judged the input being read in to be correct too quickly. Indeed, there were some inputs missing but this is fixed now.","body":"Thank you for your answer, I seemed to have judged the input being read in to be correct too quickly. Indeed, there were some inputs missing but this is fixed now."}],"tags":[],"owner":{"account_id":4663157,"reputation":15229,"user_id":3776927,"display_name":"derpirscher"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697203074,"creation_date":1697203074,"answer_id":77288080,"question_id":77287893,"body_markdown":"One issue could be \r\n\r\n    for (int i = 0; i&lt;n; i++){\r\n        if (sc.hasNextDouble()){\r\n            inarr[i] = sc.nextDouble();\r\n        }\r\n        sum += inarr[i];\r\n    } \r\n\r\nI don&#39;t know what environment you are running this in, but if there is any issue with your stdin you may skip values here. Ie, if `sc.hasNextDouble()` returns `false` for any reason you are still incrementing your `i` and the current place in the `inarray` stays at `0` ... \r\n\r\nAdd a counter and check how many values you are actually reading \r\n\r\n    int readCount = 0;\r\n    for (int i = 0; i&lt;n; i++){\r\n        if (sc.hasNextDouble()){\r\n            inarr[i] = sc.nextDouble();\r\n            readCount++;\r\n        }\r\n        sum += inarr[i];\r\n    } \r\n    System.out.println(readCount);\r\n\r\nIn your case you probably will receive a `readCount` that is less than `n`. Again, as we don&#39;t know your environment or how you get your data into stdin, I cannot help you solve this issue. But I can assure you, `Arrays.sort` won&#39;t create new numbers in the array. ","title":"java.util.Arrays.sort doesn&#39;t sort an array of doubles properly","body":"<p>One issue could be</p>\n<pre><code>for (int i = 0; i&lt;n; i++){\n    if (sc.hasNextDouble()){\n        inarr[i] = sc.nextDouble();\n    }\n    sum += inarr[i];\n} \n</code></pre>\n<p>I don't know what environment you are running this in, but if there is any issue with your stdin you may skip values here. Ie, if <code>sc.hasNextDouble()</code> returns <code>false</code> for any reason you are still incrementing your <code>i</code> and the current place in the <code>inarray</code> stays at <code>0</code> ...</p>\n<p>Add a counter and check how many values you are actually reading</p>\n<pre><code>int readCount = 0;\nfor (int i = 0; i&lt;n; i++){\n    if (sc.hasNextDouble()){\n        inarr[i] = sc.nextDouble();\n        readCount++;\n    }\n    sum += inarr[i];\n} \nSystem.out.println(readCount);\n</code></pre>\n<p>In your case you probably will receive a <code>readCount</code> that is less than <code>n</code>. Again, as we don't know your environment or how you get your data into stdin, I cannot help you solve this issue. But I can assure you, <code>Arrays.sort</code> won't create new numbers in the array.</p>\n"}],"owner":{"account_id":25799218,"reputation":35,"user_id":19541910,"display_name":"stanleysearles"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77288080,"answer_count":1,"score":-2,"last_activity_date":1697254061,"creation_date":1697201540,"question_id":77287893,"body_markdown":"Link to the full test case:\r\n\r\n[test case][1]\r\n\r\n\r\n  [1]: https://hr-testcases-us-east-1.s3.amazonaws.com/21180/input04.txt?response-content-type=text%2Fplain&amp;X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAR6O7GJNX5DNFO3PV%2F20231013%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20231013T121913Z&amp;X-Amz-Expires=7200&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=df6f3cd744b9f3435188eb3b7ceb637fb209b2688ff12206051a99cc09d75bcc\r\n\r\nThe test case consists of 2500 values, all being above 0. \r\nThe problem I have is: It doesn&#39;t sort properly.\r\nNeither with a coded sorting algorithm, nor with the Arrays.sort function. \r\n\r\nHow does this happen and how do I fix this? The result I&#39;m getting is the following:\r\n\r\nThe output shows the following: \r\n\r\n0.0\r\n0.0\r\n0.0\r\n46.0\r\n54.0\r\n118.0\r\n141.0\r\n220.0\r\n259.0\r\n273.0\r\n...\r\n\r\nThere are no zeros in the array. Also the amount of 3 digit numbers is way lower in the test case than in the sorted array. This is the snippet for the code. \r\n\r\nThe interesting thing being: I&#39;ve debugged the input already, reading in the input works without problems, however after the sorting, the whole array is broken and the values are all incorrect. \r\n\r\nThis is the code snippet:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\r\n            Scanner sc = new Scanner(System.in);\r\n            int n = sc.nextInt(); \r\n            double[] inarr = new double[n];\r\n            double sum = 0;\r\n            \r\n            for (int i = 0; i&lt;n; i++){\r\n                if (sc.hasNextDouble()){\r\n                    inarr[i] = sc.nextDouble();\r\n                }\r\n                \r\n                sum += inarr[i];\r\n            }\r\n            \r\n            // for (int i = 0; i&lt;n; i++){\r\n            //     System.out.println(inarr[i]);\r\n            // }\r\n            \r\n            Arrays.sort(inarr);\r\n            \r\n            for (int i = 0; i&lt;n; i++){\r\n                System.out.println(inarr[i]);\r\n            }\r\n```\r\n\r\nThanks in advance for your help!\r\n","title":"java.util.Arrays.sort doesn&#39;t sort an array of doubles properly","body":"<p>Link to the full test case:</p>\n<p><a href=\"https://hr-testcases-us-east-1.s3.amazonaws.com/21180/input04.txt?response-content-type=text%2Fplain&amp;X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAR6O7GJNX5DNFO3PV%2F20231013%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20231013T121913Z&amp;X-Amz-Expires=7200&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=df6f3cd744b9f3435188eb3b7ceb637fb209b2688ff12206051a99cc09d75bcc\" rel=\"nofollow noreferrer\">test case</a></p>\n<p>The test case consists of 2500 values, all being above 0.\nThe problem I have is: It doesn't sort properly.\nNeither with a coded sorting algorithm, nor with the Arrays.sort function.</p>\n<p>How does this happen and how do I fix this? The result I'm getting is the following:</p>\n<p>The output shows the following:</p>\n<p>0.0\n0.0\n0.0\n46.0\n54.0\n118.0\n141.0\n220.0\n259.0\n273.0\n...</p>\n<p>There are no zeros in the array. Also the amount of 3 digit numbers is way lower in the test case than in the sorted array. This is the snippet for the code.</p>\n<p>The interesting thing being: I've debugged the input already, reading in the input works without problems, however after the sorting, the whole array is broken and the values are all incorrect.</p>\n<p>This is the code snippet:</p>\n<pre><code>public static void main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\n            Scanner sc = new Scanner(System.in);\n            int n = sc.nextInt(); \n            double[] inarr = new double[n];\n            double sum = 0;\n            \n            for (int i = 0; i&lt;n; i++){\n                if (sc.hasNextDouble()){\n                    inarr[i] = sc.nextDouble();\n                }\n                \n                sum += inarr[i];\n            }\n            \n            // for (int i = 0; i&lt;n; i++){\n            //     System.out.println(inarr[i]);\n            // }\n            \n            Arrays.sort(inarr);\n            \n            for (int i = 0; i&lt;n; i++){\n                System.out.println(inarr[i]);\n            }\n</code></pre>\n<p>Thanks in advance for your help!</p>\n"},{"tags":["java","performance","memory","memory-leaks","javafx"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691016983,"post_id":28070918,"comment_id":135435438,"body_markdown":"[Garbage Collection](https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)) happens at some point in the future, eventually (unless your app ends first). When GC happens, when the used memory is actually freed up, is out of your control. Various garbage collector implementations have various scheduling policies about releasing various kinds of allocated memory. If you have cleared all unnecessary references, then your job is done.","body":"<a href=\"https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)\" rel=\"nofollow noreferrer\">Garbage Collection</a> happens at some point in the future, eventually (unless your app ends first). When GC happens, when the used memory is actually freed up, is out of your control. Various garbage collector implementations have various scheduling policies about releasing various kinds of allocated memory. If you have cleared all unnecessary references, then your job is done."}],"answers":[{"tags":[],"owner":{"account_id":5284809,"reputation":11024,"user_id":4219144,"display_name":"eckig"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1421865802,"creation_date":1421865802,"answer_id":28074507,"question_id":28070918,"body_markdown":"This is just the default Java behavior:\r\n\r\nYou are creating objects and if you no longer keep (strong) references to them, they are being garbage collected.\r\n\r\nIn your case you are creating objects solely in a local scope (method) and do not store any object otherwise.\r\n\r\nWhen and if the `Stage` is garbage collected is an implementation detail out of our reach. If you think there is a memory leak, you should probably file an issue in the [JavaFX tracker][1].\r\n\r\n\r\n  [1]: https://javafx-jira.kenai.com/","title":"JavaFX: Stage and Controller lifecycle...memory management","body":"<p>This is just the default Java behavior:</p>\n\n<p>You are creating objects and if you no longer keep (strong) references to them, they are being garbage collected.</p>\n\n<p>In your case you are creating objects solely in a local scope (method) and do not store any object otherwise.</p>\n\n<p>When and if the <code>Stage</code> is garbage collected is an implementation detail out of our reach. If you think there is a memory leak, you should probably file an issue in the <a href=\"https://javafx-jira.kenai.com/\" rel=\"nofollow\">JavaFX tracker</a>.</p>\n"},{"tags":[],"owner":{"account_id":15916114,"reputation":11,"user_id":11484611,"display_name":"Ayda Gholamy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697253583,"creation_date":1697253583,"answer_id":77291494,"question_id":28070918,"body_markdown":"I think before the initialize method of a JavaFX controller is called, the controller class is first instantiated when you load an FXML file using FXMLLoader. This instantiation is handled by FXMLLoader during the loading process. \r\nCheck you FXMLL","title":"JavaFX: Stage and Controller lifecycle...memory management","body":"<p>I think before the initialize method of a JavaFX controller is called, the controller class is first instantiated when you load an FXML file using FXMLLoader. This instantiation is handled by FXMLLoader during the loading process.\nCheck you FXMLL</p>\n"}],"owner":{"account_id":5600733,"reputation":47,"user_id":4437081,"accept_rate":75,"display_name":"GreatChing-aso"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3536,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":28074507,"answer_count":2,"score":1,"last_activity_date":1697253583,"creation_date":1421854240,"question_id":28070918,"body_markdown":" I would like to know what is the lifecycle of stages and controllers created on the fly(not the main one that extends Application), or in other words, any child window spawned from another window. I am concerned about any memory leaks and I just want to make sure I am building memory/resource efficient GUI application. Here is a sample code:\r\n\r\n    private void addNewAsset(ActionEvent event) {\r\n        AssetController assetController = new AssetController();\r\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;assetchooser.fxml&quot;));\r\n        loader.setController(assetController);\r\n        \r\n        Stage assetChooserStage = new Stage();\r\n        assetChooserStage.initModality(Modality.WINDOW_MODAL);\r\n        assetChooserStage.initOwner(listviewAssets.getScene().getWindow());\r\n        assetChooserStage.setTitle(&quot;Choose Asset(s)&quot;);\r\n        try {\r\n            assetChooserStage.setScene(new Scene((Parent)loader.load()));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        assetChooserStage.show();\r\n        assetChooserStage.setOnCloseRequest((windowEvent)-&gt;{\r\n            //DO STUFF: Get any data\r\n            List&lt;AssetChosenData&gt; listAssets = assetController.getListAssetChosen();\r\n            \r\n            System.out.println(&quot;CLOSING&quot;);}\r\n        );\r\n    }\r\n\r\n\r\nAs you can see, the method addNewAsset() is executed when the user clicks at a certain button. The method spawns a new Stage using FXMLLoader and using a controller. When this stage gets closed(setOnCloseRequest), I capture the data I want. What happens afterwards? Will the controller(AssetController) and Stage(assetChooserStage), as well as all the Controls and data used by them, be set to null and the GC come by later and dispose of them?\r\n\r\nIf you don&#39;t know specifics, maybe you can point me to an official Java/Oracle documentation that deals with this subject.\r\n\r\nThanks.","title":"JavaFX: Stage and Controller lifecycle...memory management","body":"<p>I would like to know what is the lifecycle of stages and controllers created on the fly(not the main one that extends Application), or in other words, any child window spawned from another window. I am concerned about any memory leaks and I just want to make sure I am building memory/resource efficient GUI application. Here is a sample code:</p>\n\n<pre><code>private void addNewAsset(ActionEvent event) {\n    AssetController assetController = new AssetController();\n    FXMLLoader loader = new FXMLLoader(getClass().getResource(\"assetchooser.fxml\"));\n    loader.setController(assetController);\n\n    Stage assetChooserStage = new Stage();\n    assetChooserStage.initModality(Modality.WINDOW_MODAL);\n    assetChooserStage.initOwner(listviewAssets.getScene().getWindow());\n    assetChooserStage.setTitle(\"Choose Asset(s)\");\n    try {\n        assetChooserStage.setScene(new Scene((Parent)loader.load()));\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    assetChooserStage.show();\n    assetChooserStage.setOnCloseRequest((windowEvent)-&gt;{\n        //DO STUFF: Get any data\n        List&lt;AssetChosenData&gt; listAssets = assetController.getListAssetChosen();\n\n        System.out.println(\"CLOSING\");}\n    );\n}\n</code></pre>\n\n<p>As you can see, the method addNewAsset() is executed when the user clicks at a certain button. The method spawns a new Stage using FXMLLoader and using a controller. When this stage gets closed(setOnCloseRequest), I capture the data I want. What happens afterwards? Will the controller(AssetController) and Stage(assetChooserStage), as well as all the Controls and data used by them, be set to null and the GC come by later and dispose of them?</p>\n\n<p>If you don't know specifics, maybe you can point me to an official Java/Oracle documentation that deals with this subject.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","null","nullpointerexception","integer"],"comments":[{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1392908475,"post_id":21911511,"comment_id":33185270,"body_markdown":"Are you sure the exception is thrown at this line? This is not possible.","body":"Are you sure the exception is thrown at this line? This is not possible."},{"owner":{"account_id":1432036,"reputation":14206,"user_id":1354251,"accept_rate":95,"display_name":"Kyle"},"score":1,"creation_date":1392908548,"post_id":21911511,"comment_id":33185324,"body_markdown":"If the `hForm` variable is null, it would throw a null pointer trying to access the `.getId()` method of the variable.","body":"If the <code>hForm</code> variable is null, it would throw a null pointer trying to access the <code>.getId()</code> method of the variable."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":4,"creation_date":1392908640,"post_id":21911511,"comment_id":33185400,"body_markdown":"@lakshman if that&#39;s the case, the code won&#39;t fall since it evaluates `if != null`...","body":"@lakshman if that&#39;s the case, the code won&#39;t fall since it evaluates <code>if != null</code>..."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1392908703,"post_id":21911511,"comment_id":33185450,"body_markdown":"Please show a short but *complete* program demonstrating the problem. It seems unlikely from what you&#39;ve posted...","body":"Please show a short but <i>complete</i> program demonstrating the problem. It seems unlikely from what you&#39;ve posted..."},{"owner":{"account_id":47398,"reputation":144,"user_id":140346,"accept_rate":83,"display_name":"pythonicate"},"score":0,"creation_date":1392908797,"post_id":21911511,"comment_id":33185516,"body_markdown":"hform itself isn&#39;t null. just the hform id value. Integer id is being set properly.","body":"hform itself isn&#39;t null. just the hform id value. Integer id is being set properly."},{"owner":{"account_id":47398,"reputation":144,"user_id":140346,"accept_rate":83,"display_name":"pythonicate"},"score":0,"creation_date":1392909028,"post_id":21911511,"comment_id":33185730,"body_markdown":"http://ideone.com/e.js/H0Mjaf example of problem. it seems to be the .intValue","body":"<a href=\"http://ideone.com/e.js/H0Mjaf\" rel=\"nofollow noreferrer\">ideone.com/e.js/H0Mjaf</a> example of problem. it seems to be the .intValue"},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1392911753,"post_id":21911511,"comment_id":33187992,"body_markdown":"The only way to reproduce this problem is using the bitwise AND, it means, using a single `&amp;` instead of two. Review your code and post a SSCCE and a stacktrace.","body":"The only way to reproduce this problem is using the bitwise AND, it means, using a single <code>&amp;</code> instead of two. Review your code and post a SSCCE and a stacktrace."}],"answers":[{"tags":[],"owner":{"account_id":2740662,"reputation":1,"user_id":2362271,"display_name":"paulohahn"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1580000283,"creation_date":1392908626,"answer_id":21911602,"question_id":21911511,"body_markdown":"You need to write like this:\r\n\r\n    private void ...(){\r\n      HierarchyForm hForm = (HierarchyForm)\r\n      Integer id = hForm.getId();\r\n      if (id != null)\r\n         if (id.intValue() &gt; 0){ &lt;-- exception thrown here\r\n         ...\r\n         }\r\n      }\r\n      . \r\n      .\r\n      .\r\n    }\r\n\r\n\r\nOkay, I had not contemplated that the &quot;&amp;&amp;&quot; in java had this behavior to solve the first expression and the second only solve if &quot;true&quot;.\r\n\r\nIn this case, of course, I&#39;m agree with the responses of colleagues and assuming you have posted the code correctly, &lt;b&gt;my guess&lt;/b&gt; is it has something to do with concurrent access to the same object hForm, some method may be assigning &quot;null&quot; for hForm or id.\r\n","title":"Java exception when checking if Integer value is null","body":"<p>You need to write like this:</p>\n\n<pre><code>private void ...(){\n  HierarchyForm hForm = (HierarchyForm)\n  Integer id = hForm.getId();\n  if (id != null)\n     if (id.intValue() &gt; 0){ &lt;-- exception thrown here\n     ...\n     }\n  }\n  . \n  .\n  .\n}\n</code></pre>\n\n<p>Okay, I had not contemplated that the \"&amp;&amp;\" in java had this behavior to solve the first expression and the second only solve if \"true\".</p>\n\n<p>In this case, of course, I'm agree with the responses of colleagues and assuming you have posted the code correctly, <b>my guess</b> is it has something to do with concurrent access to the same object hForm, some method may be assigning \"null\" for hForm or id.</p>\n"},{"comments":[{"owner":{"account_id":47398,"reputation":144,"user_id":140346,"accept_rate":83,"display_name":"pythonicate"},"score":0,"creation_date":1392910304,"post_id":21912266,"comment_id":33186805,"body_markdown":"That was my thought, but I&#39;ve tested with just &quot;if (id.intValue() &gt; 0)&quot; and still get the exception","body":"That was my thought, but I&#39;ve tested with just &quot;if (id.intValue() &gt; 0)&quot; and still get the exception"},{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1392910597,"post_id":21912266,"comment_id":33187038,"body_markdown":"@pythonicate If `id` is null, that&#39;s normal that `if (id.intValue() &gt; 0)` throws a NPE. However if your real code is `if (id != null &amp;&amp; id.intValue() &gt; 0)` then that&#39;s not possible.","body":"@pythonicate If <code>id</code> is null, that&#39;s normal that <code>if (id.intValue() &gt; 0)</code> throws a NPE. However if your real code is <code>if (id != null &amp;&amp; id.intValue() &gt; 0)</code> then that&#39;s not possible."},{"owner":{"account_id":47398,"reputation":144,"user_id":140346,"accept_rate":83,"display_name":"pythonicate"},"score":0,"creation_date":1392910729,"post_id":21912266,"comment_id":33187132,"body_markdown":"Exactly. that is why I am confused that it is failing even with the id !=null check.","body":"Exactly. that is why I am confused that it is failing even with the id !=null check."},{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":0,"creation_date":1392910751,"post_id":21912266,"comment_id":33187155,"body_markdown":"@pythonicate That can&#39;t. It&#39;s not possible.","body":"@pythonicate That can&#39;t. It&#39;s not possible."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1392910814,"post_id":21912266,"comment_id":33187202,"body_markdown":"@pythonicate looks like you&#39;re not executing the code you&#39;re seeing or the problem lies somewhere else. Again, post the stacktrace.","body":"@pythonicate looks like you&#39;re not executing the code you&#39;re seeing or the problem lies somewhere else. Again, post the stacktrace."}],"tags":[],"owner":{"account_id":3317025,"reputation":1954,"user_id":2789764,"accept_rate":92,"display_name":"Vivek Vermani"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392910184,"creation_date":1392910184,"answer_id":21912266,"question_id":21911511,"body_markdown":"The line shouldn&#39;t throw NPE if id is null.\r\n\r\nIf the first operand of &amp;&amp; is false, the second operand isn&#39;t evaluated and the result is just false.\r\n\r\nPlease recheck your code again and make sure that your are getting NPE on this line while evaluating id.intValue().  ","title":"Java exception when checking if Integer value is null","body":"<p>The line shouldn't throw NPE if id is null.</p>\n\n<p>If the first operand of &amp;&amp; is false, the second operand isn't evaluated and the result is just false.</p>\n\n<p>Please recheck your code again and make sure that your are getting NPE on this line while evaluating id.intValue().  </p>\n"},{"tags":[],"owner":{"account_id":3920722,"reputation":5994,"user_id":3242978,"accept_rate":100,"display_name":"jmail"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392960519,"creation_date":1392959896,"answer_id":21925861,"question_id":21911511,"body_markdown":"Use This format to and find right solutions:\r\n \r\n    String id = request.getParameter(&quot;id&quot;);\r\n    \r\n            if(id!=null &amp;&amp; !id.toString().equalsIgnoreCase(&quot;&quot;))\r\n            {\r\n            \tuser.setId(Integer.parseInt(id));\r\n            \tdao.updateUser(user);\r\n            }\r\n            else\r\n            {\r\n            \tdao.addUser(user);\r\n            }\r\n\r\nIf use that one otherwise type format:\r\n\r\n    String id = request.getParameter(&quot;id&quot;);\r\n    \r\n            if(id == null || id.isEmpty())\r\n            {\r\n                dao.addUser(user);\r\n            }\r\n            else\r\n            {\r\n                user.setId(Integer.parseInt(id));\r\n                dao.updateUser(user);\r\n            }\r\n\r\nIt is simple, put a null check! Surround your object with if statement like\r\n\r\n    Object mayBeNullObj = getTheObjectItMayReturnNull();\r\n    \r\n    if (mayBeNullObj != null) \r\n       { \r\n         mayBeNullObj.workOnIt(); // to avoid NullPointerException\r\n       }\r\n\r\nBut, All of them giving a same result. \r\n\r\n","title":"Java exception when checking if Integer value is null","body":"<p>Use This format to and find right solutions:</p>\n\n<pre><code>String id = request.getParameter(\"id\");\n\n        if(id!=null &amp;&amp; !id.toString().equalsIgnoreCase(\"\"))\n        {\n            user.setId(Integer.parseInt(id));\n            dao.updateUser(user);\n        }\n        else\n        {\n            dao.addUser(user);\n        }\n</code></pre>\n\n<p>If use that one otherwise type format:</p>\n\n<pre><code>String id = request.getParameter(\"id\");\n\n        if(id == null || id.isEmpty())\n        {\n            dao.addUser(user);\n        }\n        else\n        {\n            user.setId(Integer.parseInt(id));\n            dao.updateUser(user);\n        }\n</code></pre>\n\n<p>It is simple, put a null check! Surround your object with if statement like</p>\n\n<pre><code>Object mayBeNullObj = getTheObjectItMayReturnNull();\n\nif (mayBeNullObj != null) \n   { \n     mayBeNullObj.workOnIt(); // to avoid NullPointerException\n   }\n</code></pre>\n\n<p>But, All of them giving a same result. </p>\n"},{"tags":[],"owner":{"account_id":1308022,"reputation":9735,"user_id":1256583,"display_name":"darijan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506431654,"creation_date":1506431654,"answer_id":46427579,"question_id":21911511,"body_markdown":"Only way that this lines causes an NPE is for `id.intValue()` to be executed on a `null` element. \r\n\r\nJava would not execute `id.intValue()` if `id != null` is false, because the `&amp;&amp;` is short-cutting the execution.\r\n\r\nMy suspicion is that your code actually looks like this:\r\n\r\n    if (id != null &amp; id.intValue() &gt; 0) {\r\n\r\nwhereas it should look like this:\r\n\r\n    if (id != null &amp;&amp; id.intValue() &gt; 0) {","title":"Java exception when checking if Integer value is null","body":"<p>Only way that this lines causes an NPE is for <code>id.intValue()</code> to be executed on a <code>null</code> element. </p>\n\n<p>Java would not execute <code>id.intValue()</code> if <code>id != null</code> is false, because the <code>&amp;&amp;</code> is short-cutting the execution.</p>\n\n<p>My suspicion is that your code actually looks like this:</p>\n\n<pre><code>if (id != null &amp; id.intValue() &gt; 0) {\n</code></pre>\n\n<p>whereas it should look like this:</p>\n\n<pre><code>if (id != null &amp;&amp; id.intValue() &gt; 0) {\n</code></pre>\n"}],"owner":{"account_id":47398,"reputation":144,"user_id":140346,"accept_rate":83,"display_name":"pythonicate"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10984,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1697252520,"creation_date":1392908406,"question_id":21911511,"body_markdown":"The following snippet of code causes my program the throw a null pointer exception and I&#39;m struggling to determine why:\r\n\r\n    private void ...(){\r\n        HierarchyForm hForm = (HierarchyForm)\r\n        Integer id = hForm.getId();\r\n        if (id != null &amp;&amp; id.intValue() &gt; 0){ &lt;-- exception thrown here\r\n            ...\r\n        }\r\n        .\r\n        .\r\n        .\r\n    }\r\n\r\nWhen it crashes, the value of &quot;id&quot; is null. I know it&#39;s probably something simple but I can&#39;t understand why.\r\n\r\nedit:  here is a short program showing it failing. seems to be issue with .intValue comparison http://ideone.com/e.js/H0Mjaf\r\n\r\nedit: i&#39;m building for java 1.6.0_45","title":"Java exception when checking if Integer value is null","body":"<p>The following snippet of code causes my program the throw a null pointer exception and I'm struggling to determine why:</p>\n\n<pre><code>private void ...(){\n    HierarchyForm hForm = (HierarchyForm)\n    Integer id = hForm.getId();\n    if (id != null &amp;&amp; id.intValue() &gt; 0){ &lt;-- exception thrown here\n        ...\n    }\n    .\n    .\n    .\n}\n</code></pre>\n\n<p>When it crashes, the value of \"id\" is null. I know it's probably something simple but I can't understand why.</p>\n\n<p>edit:  here is a short program showing it failing. seems to be issue with .intValue comparison <a href=\"http://ideone.com/e.js/H0Mjaf\" rel=\"nofollow\">http://ideone.com/e.js/H0Mjaf</a></p>\n\n<p>edit: i'm building for java 1.6.0_45</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"score":0,"creation_date":1696579887,"post_id":77242671,"comment_id":136174017,"body_markdown":"Do check this again! I have `false` in both case for `11` and `17` Java.","body":"Do check this again! I have <code>false</code> in both case for <code>11</code> and <code>17</code> Java."},{"owner":{"account_id":29610573,"reputation":81,"user_id":22693948,"display_name":"Mattyeh"},"score":0,"creation_date":1696581137,"post_id":77242671,"comment_id":136174245,"body_markdown":"I&#39;ve checked and I still have true in the second case, I&#39;m so confused.","body":"I&#39;ve checked and I still have true in the second case, I&#39;m so confused."},{"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"score":0,"creation_date":1696581246,"post_id":77242671,"comment_id":136174264,"body_markdown":"Yep. This is really wired to me! I can&#39;t explain this.","body":"Yep. This is really wired to me! I can&#39;t explain this."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":3,"creation_date":1696581482,"post_id":77242671,"comment_id":136174310,"body_markdown":"@OlegCherednik Are you perhaps executing both snippets in the same run? I had 2 `false` results if I execute them together (as 2 separate methods called from main), but if I execute them independently, the second snippet prints `true`.","body":"@OlegCherednik Are you perhaps executing both snippets in the same run? I had 2 <code>false</code> results if I execute them together (as 2 separate methods called from main), but if I execute them independently, the second snippet prints <code>true</code>."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1696584254,"post_id":77242671,"comment_id":136174799,"body_markdown":"It&#39;s order of execution. In the first example, you have the string literal `&quot;Jav&quot;` _before_ the call to `a.intern()`, meaning there was already a `&quot;Jav&quot;` in the string pool. In the second example, the first time the string literal `&quot;Jav&quot;` appears is _after_ the call to `a.intern()`, meaning that call actually puts the object referenced by `a` in the pool. Then later, doing `c = &quot;Jav&quot;` gives you that object back (thus `a == c`).","body":"It&#39;s order of execution. In the first example, you have the string literal <code>&quot;Jav&quot;</code> <i>before</i> the call to <code>a.intern()</code>, meaning there was already a <code>&quot;Jav&quot;</code> in the string pool. In the second example, the first time the string literal <code>&quot;Jav&quot;</code> appears is <i>after</i> the call to <code>a.intern()</code>, meaning that call actually puts the object referenced by <code>a</code> in the pool. Then later, doing <code>c = &quot;Jav&quot;</code> gives you that object back (thus <code>a == c</code>)."}],"answers":[{"comments":[{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":0,"creation_date":1696579381,"post_id":77242762,"comment_id":136173925,"body_markdown":"then how it works in second case?","body":"then how it works in second case?"},{"owner":{"account_id":29610573,"reputation":81,"user_id":22693948,"display_name":"Mattyeh"},"score":0,"creation_date":1696579421,"post_id":77242762,"comment_id":136173930,"body_markdown":"I still don&#39;t know why the second one(StringBuilder using append method) doesn&#39;t need to change a = a.intern();but can print out true.","body":"I still don&#39;t know why the second one(StringBuilder using append method) doesn&#39;t need to change a = a.intern();but can print out true."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1696579672,"post_id":77242762,"comment_id":136173977,"body_markdown":"As I explained, the second one first _makes_ the `StringBuilder` created `String` canonical which works because there is no canonical `String` with that content before.","body":"As I explained, the second one first <i>makes</i> the <code>StringBuilder</code> created <code>String</code> canonical which works because there is no canonical <code>String</code> with that content before."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":5,"creation_date":1696582981,"post_id":77242762,"comment_id":136174570,"body_markdown":"You should note that there is basically no reason to muck around with `String.intern` at all. Just let the JVM handle it, it&#39;ll be fine.","body":"You should note that there is basically no reason to muck around with <code>String.intern</code> at all. Just let the JVM handle it, it&#39;ll be fine."}],"tags":[],"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"comment_count":4,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1696613539,"creation_date":1696578980,"answer_id":77242762,"question_id":77242671,"body_markdown":"### TL;DR and solution\r\n\r\nThe important difference is the location of the first `&quot;Jav&quot;` literal/interning.\r\n\r\n`intern()` _returns_ you the canonical reference. If a canonical reference already exists, it is not updated.\r\n\r\nHence, you need to change `a.intern();` to `a = a.intern();`:\r\n```java\r\npublic static void main(String[] args) {\r\n    String a = new StringBuilder(&quot;Jav&quot;).toString();\r\n    a = a.intern();\r\n    String c = &quot;Jav&quot;;\r\n    System.out.println(a == c); //this is true now\r\n}\r\n```\r\n\r\n### Why and how the examples are different\r\n\r\nIn your second example, `==` returns `true` because the `String` returned by `StringBuilder` is made the canonical reference in the first `intern()` call and the `String` literal is resolved lazily and gives.\r\n\r\nThe literal then gives you the canonical reference which is the same object you already have.\r\n\r\nIn the first example, a canonical `String` already exists with that content hence the `intern()` method just returns the _existing_ canonical `String` as opposed to making the current `String` canonical.\r\n\r\n### Further comments\r\n\r\nFor a more detailed analysis of your code, see @[Nidheesh R](https://stackoverflow.com/users/22588349/nidheesh-r)&#39;s [answer](https://stackoverflow.com/a/77242797/10871900).\r\n\r\nAs mentioned [in the comments](https://stackoverflow.com/questions/77242671/problem-of-java-string-intern-method-when-using-stringbuilder-with-append-method/77242762?noredirect=1#comment136174570_77242762) by @[Jorn](https://stackoverflow.com/users/8681/jorn), you shouldn&#39;t need `String#intern` anyways and you should also not use `==` on `String`s.\r\n\r\nAlso, depending on that behaviour is fragile. If you are using tools like GraalVM&#39;s `native-image`, using a different JVM or maybe some of [Project Leyden](https://openjdk.org/projects/leyden)&#39;s condensers, things like this might work a bit differently.","title":"Problem of Java String intern method when using StringBuilder with append method creating a String","body":"<h3>TL;DR and solution</h3>\n<p>The important difference is the location of the first <code>&quot;Jav&quot;</code> literal/interning.</p>\n<p><code>intern()</code> <em>returns</em> you the canonical reference. If a canonical reference already exists, it is not updated.</p>\n<p>Hence, you need to change <code>a.intern();</code> to <code>a = a.intern();</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    String a = new StringBuilder(&quot;Jav&quot;).toString();\n    a = a.intern();\n    String c = &quot;Jav&quot;;\n    System.out.println(a == c); //this is true now\n}\n</code></pre>\n<h3>Why and how the examples are different</h3>\n<p>In your second example, <code>==</code> returns <code>true</code> because the <code>String</code> returned by <code>StringBuilder</code> is made the canonical reference in the first <code>intern()</code> call and the <code>String</code> literal is resolved lazily and gives.</p>\n<p>The literal then gives you the canonical reference which is the same object you already have.</p>\n<p>In the first example, a canonical <code>String</code> already exists with that content hence the <code>intern()</code> method just returns the <em>existing</em> canonical <code>String</code> as opposed to making the current <code>String</code> canonical.</p>\n<h3>Further comments</h3>\n<p>For a more detailed analysis of your code, see @<a href=\"https://stackoverflow.com/users/22588349/nidheesh-r\">Nidheesh R</a>'s <a href=\"https://stackoverflow.com/a/77242797/10871900\">answer</a>.</p>\n<p>As mentioned <a href=\"https://stackoverflow.com/questions/77242671/problem-of-java-string-intern-method-when-using-stringbuilder-with-append-method/77242762?noredirect=1#comment136174570_77242762\">in the comments</a> by @<a href=\"https://stackoverflow.com/users/8681/jorn\">Jorn</a>, you shouldn't need <code>String#intern</code> anyways and you should also not use <code>==</code> on <code>String</code>s.</p>\n<p>Also, depending on that behaviour is fragile. If you are using tools like GraalVM's <code>native-image</code>, using a different JVM or maybe some of <a href=\"https://openjdk.org/projects/leyden\" rel=\"nofollow noreferrer\">Project Leyden</a>'s condensers, things like this might work a bit differently.</p>\n"},{"comments":[{"owner":{"account_id":29610573,"reputation":81,"user_id":22693948,"display_name":"Mattyeh"},"score":2,"creation_date":1696580649,"post_id":77242797,"comment_id":136174162,"body_markdown":"Both methods have String c = &quot;Jav&quot;; Why are the string pools different? (first one &quot;Jav&quot; is in the pool, the second one &quot;Jav&quot; is not in the pool.)","body":"Both methods have String c = &quot;Jav&quot;; Why are the string pools different? (first one &quot;Jav&quot; is in the pool, the second one &quot;Jav&quot; is not in the pool.)"},{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":0,"creation_date":1696580962,"post_id":77242797,"comment_id":136174219,"body_markdown":"the only change in the code is append() method then why its working differently?","body":"the only change in the code is append() method then why its working differently?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":4,"creation_date":1696582118,"post_id":77242797,"comment_id":136174410,"body_markdown":"It might help to note that in the first example the fragment `new StringBuilder(&quot;Jav&quot;)` requires a reference to the string &quot;Jav&quot; and already puts it into the string pool whereas in the second fragment `new StringBuilder(&quot;Ja&quot;).append(&quot;v&quot;)` the two strings &quot;Ja&quot; and &quot;v&quot; are added to the string pool.","body":"It might help to note that in the first example the fragment <code>new StringBuilder(&quot;Jav&quot;)</code> requires a reference to the string &quot;Jav&quot; and already puts it into the string pool whereas in the second fragment <code>new StringBuilder(&quot;Ja&quot;).append(&quot;v&quot;)</code> the two strings &quot;Ja&quot; and &quot;v&quot; are added to the string pool."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1696583472,"post_id":77242797,"comment_id":136174641,"body_markdown":"This answer is incorrect - but is easily fixed. &#39;first main&#39; point 1 says: &quot;Because of the `String c = &quot;jav&quot;;`&quot; - that&#39;s the wrong part. it&#39;s because of the `new StringBuilder(&quot;jav&quot;)` - that makes &quot;jav&quot; and as its from a string literal in a class file, is interned then and there, hence there&#39;s now `&quot;jav&quot;` in the pool, but `a` is not that (because stringbuilder doesn&#39;t look in the pool; most things don&#39;t). `a.intern()` then does not change the pool but returns the reference - the rest of this answer is then correct.","body":"This answer is incorrect - but is easily fixed. &#39;first main&#39; point 1 says: &quot;Because of the <code>String c = &quot;jav&quot;;</code>&quot; - that&#39;s the wrong part. it&#39;s because of the <code>new StringBuilder(&quot;jav&quot;)</code> - that makes &quot;jav&quot; and as its from a string literal in a class file, is interned then and there, hence there&#39;s now <code>&quot;jav&quot;</code> in the pool, but <code>a</code> is not that (because stringbuilder doesn&#39;t look in the pool; most things don&#39;t). <code>a.intern()</code> then does not change the pool but returns the reference - the rest of this answer is then correct."},{"owner":{"account_id":29476753,"reputation":233,"user_id":22588349,"display_name":"Nidheesh R"},"score":0,"creation_date":1696584839,"post_id":77242797,"comment_id":136174907,"body_markdown":"You&#39;re right! I have corrected it.","body":"You&#39;re right! I have corrected it."}],"tags":[],"owner":{"account_id":29476753,"reputation":233,"user_id":22588349,"display_name":"Nidheesh R"},"comment_count":5,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1696584803,"creation_date":1696579323,"answer_id":77242797,"question_id":77242671,"body_markdown":"As @dan1st mentioned, this is due to the way the `intern()` method works in Java.\r\n\r\n### first `main` method\r\n\r\n1. You are creating a new `String` object `a` using a `StringBuilder` and then call `toString()` on it. This creates a new `String` object with the value &quot;Jav.&quot;\r\n\r\n2. Then, you are calling `a.intern()`, which attempts to add the string &quot;Jav&quot; to the string pool. But there is already a string &quot;Jav&quot; in the string pool (because of `new StringBuilder(&quot;jav&quot;);`). So, the `intern()`-call does nothing and `a` still refers to the newly created `String` object.\r\n\r\n3. Finally, when you compare `a` and `c` using `a == c`, it checks if they both are referring to the same object. In this case, they do not because `a` refers to the newly created `String` object, and `c` refers to the &quot;Jav&quot; string in the string pool. Hence, the result is false.\r\n\r\n\r\n### second `main` method\r\n\r\n1. You are creating a new String object `a` using a `StringBuilder` by appending &quot;Ja&quot; and &quot;v&quot; together. This creates a new `String` object with the value &quot;Jav&quot;.\r\n\r\n2. Then, you are calling `a.intern()`, which attempts to add the string &quot;Jav&quot; to the string pool. But, as the string &quot;Jav&quot; is not in the string pool, it adds it, and the reference to the string in the string pool is returned.\r\n\r\n3. And now, when you compare `a` and `c` using `a == c`, they are referring to the same string object in the string pool (the one created by `a.intern()`), which returns the result as true.\r\n","title":"Problem of Java String intern method when using StringBuilder with append method creating a String","body":"<p>As @dan1st mentioned, this is due to the way the <code>intern()</code> method works in Java.</p>\n<h3>first <code>main</code> method</h3>\n<ol>\n<li><p>You are creating a new <code>String</code> object <code>a</code> using a <code>StringBuilder</code> and then call <code>toString()</code> on it. This creates a new <code>String</code> object with the value &quot;Jav.&quot;</p>\n</li>\n<li><p>Then, you are calling <code>a.intern()</code>, which attempts to add the string &quot;Jav&quot; to the string pool. But there is already a string &quot;Jav&quot; in the string pool (because of <code>new StringBuilder(&quot;jav&quot;);</code>). So, the <code>intern()</code>-call does nothing and <code>a</code> still refers to the newly created <code>String</code> object.</p>\n</li>\n<li><p>Finally, when you compare <code>a</code> and <code>c</code> using <code>a == c</code>, it checks if they both are referring to the same object. In this case, they do not because <code>a</code> refers to the newly created <code>String</code> object, and <code>c</code> refers to the &quot;Jav&quot; string in the string pool. Hence, the result is false.</p>\n</li>\n</ol>\n<h3>second <code>main</code> method</h3>\n<ol>\n<li><p>You are creating a new String object <code>a</code> using a <code>StringBuilder</code> by appending &quot;Ja&quot; and &quot;v&quot; together. This creates a new <code>String</code> object with the value &quot;Jav&quot;.</p>\n</li>\n<li><p>Then, you are calling <code>a.intern()</code>, which attempts to add the string &quot;Jav&quot; to the string pool. But, as the string &quot;Jav&quot; is not in the string pool, it adds it, and the reference to the string in the string pool is returned.</p>\n</li>\n<li><p>And now, when you compare <code>a</code> and <code>c</code> using <code>a == c</code>, they are referring to the same string object in the string pool (the one created by <code>a.intern()</code>), which returns the result as true.</p>\n</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1698749022,"post_id":77291449,"comment_id":136441973,"body_markdown":"Although this is true, it doesn&#39;t answer the question: *&quot;Can someone explain the difference?&quot;* Nothing in the question indicates that the poster does not know about strings and `equals`. They want to understand the behaviour of `intern` and `==` anyway.","body":"Although this is true, it doesn&#39;t answer the question: <i>&quot;Can someone explain the difference?&quot;</i> Nothing in the question indicates that the poster does not know about strings and <code>equals</code>. They want to understand the behaviour of <code>intern</code> and <code>==</code> anyway."},{"owner":{"account_id":5827221,"reputation":11,"user_id":4593118,"display_name":"bob r"},"score":0,"creation_date":1698847565,"post_id":77291449,"comment_id":136456730,"body_markdown":"OK Thanks, @Lii. I will pay attention to the exact question from now on.","body":"OK Thanks, @Lii. I will pay attention to the exact question from now on."}],"tags":[],"owner":{"account_id":5827221,"reputation":11,"user_id":4593118,"display_name":"bob r"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697251937,"creation_date":1697251937,"answer_id":77291449,"question_id":77242671,"body_markdown":"It is generally good practice to use the String.equals() method when comparing strings, not == .  \r\n\r\nWhen I use ` System.out.println(a.equals(c)); ` in your first example, the result is true. \r\n\r\nSee the [api spec here][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#intern()","title":"Problem of Java String intern method when using StringBuilder with append method creating a String","body":"<p>It is generally good practice to use the String.equals() method when comparing strings, not == .</p>\n<p>When I use <code>System.out.println(a.equals(c));</code> in your first example, the result is true.</p>\n<p>See the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#intern()\" rel=\"nofollow noreferrer\">api spec here</a>.</p>\n"}],"owner":{"account_id":29610573,"reputation":81,"user_id":22693948,"display_name":"Mattyeh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":77242762,"answer_count":3,"score":7,"last_activity_date":1697251937,"creation_date":1696578374,"question_id":77242671,"body_markdown":"```\r\n\tpublic static void main(String[] args) {\r\n\t\tString a = new StringBuilder(&quot;Jav&quot;).toString();\r\n\t\ta.intern();\r\n\t\tString c = &quot;Jav&quot;;\r\n\t\tSystem.out.println(a == c);  //false\r\n\t}\r\n```\r\n\r\n```\r\n\tpublic static void main(String[] args) {\r\n\t\tString a = new StringBuilder(&quot;Ja&quot;).append(&quot;v&quot;).toString();\r\n\t\ta.intern();\r\n\t\tString c = &quot;Jav&quot;;\r\n\t\tSystem.out.println(a == c);  //true\r\n\t}\r\n```\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI do not understand why first one would print out false, but the second one print out true. I think those should print out true because after calling the intern method, the reference of a would be written into the string pool and c will point to the reference of a. Can someone explain the difference? Thanks!\r\n\r\nMy JDK Version: OpenJDK 17.0.7\r\n\r\nBtw I also get the same result when using StringBuffer.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/g6pD2.png","title":"Problem of Java String intern method when using StringBuilder with append method creating a String","body":"<pre><code>    public static void main(String[] args) {\n        String a = new StringBuilder(&quot;Jav&quot;).toString();\n        a.intern();\n        String c = &quot;Jav&quot;;\n        System.out.println(a == c);  //false\n    }\n</code></pre>\n<pre><code>    public static void main(String[] args) {\n        String a = new StringBuilder(&quot;Ja&quot;).append(&quot;v&quot;).toString();\n        a.intern();\n        String c = &quot;Jav&quot;;\n        System.out.println(a == c);  //true\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/g6pD2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g6pD2.png\" alt=\"enter image description here\" /></a></p>\n<p>I do not understand why first one would print out false, but the second one print out true. I think those should print out true because after calling the intern method, the reference of a would be written into the string pool and c will point to the reference of a. Can someone explain the difference? Thanks!</p>\n<p>My JDK Version: OpenJDK 17.0.7</p>\n<p>Btw I also get the same result when using StringBuffer.</p>\n"},{"tags":["java","android","sqlite"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1516228150,"post_id":48310829,"comment_id":83607872,"body_markdown":"[Use `SQLiteAssetHelper`](https://github.com/jgilfelt/android-sqlite-asset-helper).","body":"<a href=\"https://github.com/jgilfelt/android-sqlite-asset-helper\" rel=\"nofollow noreferrer\">Use <code>SQLiteAssetHelper</code></a>."}],"answers":[{"tags":[],"owner":{"account_id":8288692,"reputation":1180,"user_id":6231079,"display_name":"Safvan CK"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1516228059,"creation_date":1516228059,"answer_id":48311035,"question_id":48310829,"body_markdown":"Change database path with fully qualified path like:\r\npath=context.getApplicationInfo().dataDir + &quot;/databases/&quot;;","title":"How to import existing SQLite database to Android Studio","body":"<p>Change database path with fully qualified path like:\npath=context.getApplicationInfo().dataDir + \"/databases/\";</p>\n"},{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516237125,"creation_date":1516232768,"answer_id":48311810,"question_id":48310829,"body_markdown":"I believe that your issue is due to using :-\r\n\r\n        if(!dbExist1)\r\n        {\r\n            this.getReadableDatabase();\r\n            try\r\n            {\r\n                this.close();\r\n                copyDataBase();\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                throw new Error(&quot;Error copying database&quot;);\r\n            }\r\n        }\r\n\r\nThis will result in the database being created as there is a call to `getReadableDatabase`. The database will then be empty (table less).\r\n\r\nSo change the above to :-\r\n\r\n        if(!dbExist1)\r\n        {\r\n            try\r\n            {\r\n                copyDataBase();\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                throw new Error(&quot;Error copying database&quot;);\r\n            }\r\n        }\r\n\r\nYou will need to delete the App&#39;s data or Uninstall the App before running the amended code as the database will exist. \r\n\r\n----\r\n\r\nThe following is something that I put together that extends SQLiteOpenHelper and has been written to understand the functionality of opening databases from the assets (or not if the database exists). As such it does have quite extensive logging and is a little long-winded :-\r\n\r\n    /**\r\n     * Database Helper that includes ability to open database from assets\r\n     * if the database doesn&#39;t exist.\r\n     * (i.e. a pre-defined database)\r\n     *\r\n     */\r\n    \r\n    public class OpenAssetDBHelper extends SQLiteOpenHelper {\r\n    \r\n        private static final String LOGTAG = &quot;OADB-HLPR&quot;;\r\n        public static final int MAXIMUM_HELPERS = 10;\r\n        private String mDBPath, mAssetPath;\r\n        private static OpenAssetDBHelper mInstance[] = new OpenAssetDBHelper[MAXIMUM_HELPERS];\r\n        private SQLiteDatabase mDB;\r\n    \r\n        /**\r\n         * OpenAssetDBHelper Class that will copy a predefined database\r\n         * from the assets folder and then open it is the database;\r\n         *\r\n         * The copy will only be done if the database does not exist.\r\n         *\r\n         * Note this code is intended to be used for development and/or\r\n         * experimentation, hence the extensive logging.\r\n         */\r\n    \r\n        /**\r\n         * get an OpenAssetDBHelper instance as a singleton;\r\n         * Note! caters for up to 10 OpenAssetDBHelpers for up to 10 databases\r\n         * as specified by the helper_index\r\n         *\r\n         * @param helper_index  Index to this instance/database\r\n         *                      (0-MAXIMUM_HELPERS less 1)\r\n         * @param context       Context for the database\r\n         * @param database      Database name (i.e. file name)\r\n         * @param dbversion     Database version (user_version)\r\n         * @param assetfile     Name of the asset file to be copied to the database\r\n         * @param asset_sub_directories String Array of the sub-directories where\r\n         *                              the asset file is located;\r\n         *                              MUST be in order\r\n         * @return              The resultant OpenAssetDBHelper\r\n         */\r\n        public static synchronized OpenAssetDBHelper getInstance(\r\n                int helper_index,\r\n                Context context,\r\n                String database,\r\n                int dbversion,\r\n                String assetfile,\r\n                String[] asset_sub_directories) {\r\n            // Checck that helper_index is within bounds\r\n            if (helper_index &gt; (MAXIMUM_HELPERS -1)) {\r\n                throw new RuntimeException(\r\n                        &quot;Helper Index greater than &quot; +\r\n                                MAXIMUM_HELPERS\r\n                );\r\n            }\r\n            if (helper_index &lt; 0) {\r\n                throw new RuntimeException(\r\n                        &quot;Helper Index cannot be negative, must be 0-&quot; +\r\n                                MAXIMUM_HELPERS\r\n                );\r\n            }\r\n            // Create the respective OpenAssetDBHelper instance\r\n            if(mInstance[helper_index] == null) {\r\n                mInstance[helper_index] = new OpenAssetDBHelper(context,\r\n                        database,\r\n                        dbversion,\r\n                        assetfile,\r\n                        asset_sub_directories);\r\n            }\r\n            return mInstance[helper_index];\r\n        }\r\n    \r\n        /**\r\n         * Construct an OpenAssetDBHelper instance;\r\n         * Note! can only be called within class\r\n         *\r\n         * @param context       the context to be used\r\n         * @param database      the database name (equates to filename)\r\n         * @param dbversion     the databaae version (user_version)\r\n         * @param assetfile     The name of the asset file i.e. the pre-defined db\r\n         * @param directories   The hierarchy of directories within the assets folder\r\n         *                      where the asset file is located\r\n         *                      (null or zero elements = in the assets folder)\r\n         */\r\n        private OpenAssetDBHelper(Context context,\r\n                                  String database,\r\n                                  int dbversion,\r\n                                  String assetfile,\r\n                                  String[] directories) {\r\n            super(context, database, null, dbversion);\r\n            Log.d(LOGTAG,&quot;OpenAssetDBHelper being constructed.&quot;);\r\n    \r\n            mDBPath = context.getDatabasePath(database).getPath();\r\n            if (assetfile == null || assetfile.length() &lt; 1) {\r\n                assetfile = database;\r\n            }\r\n            mAssetPath = buildAssetPath(directories,assetfile);\r\n    \r\n            if (!ifDatabaseExists(mDBPath)) {\r\n                Log.d(LOGTAG,&quot;Database &quot; + database + &quot; not found at &quot; + mDBPath + &quot; so attempting to copy from assets.&quot;);\r\n                if (copyDatabaseFromAssets(context,mDBPath, database, mAssetPath)) {\r\n                    Log.d(LOGTAG, &quot;Successfully Copied Database from Assets.&quot;);\r\n                } else {\r\n                    throw new RuntimeException(&quot;No Database Available.&quot;);\r\n                }\r\n            }\r\n            // Force Database open and store it\r\n            this.mDB = this.getWritableDatabase();\r\n            logDatabaseTableInformation(mDB);\r\n            Log.d(LOGTAG,&quot;OpenAssetDBHelper constructed.&quot;);\r\n        }\r\n    \r\n    \r\n        /**\r\n         * onCreate - This is where you would create tables;\r\n         * Typically this is where you would alter the structure of the database;\r\n         * Note that this is called once for the lifetime of the database.\r\n         * @param db The SQLitedatabase\r\n         */\r\n        @Override\r\n        public void onCreate(SQLiteDatabase db) {\r\n            Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + &quot; initiated.&quot;);\r\n            // As Database is copied from assets nothing to do in onCreate!\r\n            Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + &quot; completed.&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n            Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + &quot; initiated.&quot;);\r\n            // Nothing to do as it&#39;s early days in the Database&#39;s lifetime.\r\n            Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + &quot; completed.&quot;);\r\n        }\r\n    \r\n        /**\r\n         * Check to see if the Database exists,\r\n         * if it doesn&#39;t exists then check to see if\r\n         * the database directory exists,\r\n         * if the directory(ies) does(do) not exist then make the directory(ies);\r\n         *\r\n         *\r\n         * @param dbpath        The path to the database\r\n         * @return              true if the database exists, else false\r\n         */\r\n        private boolean ifDatabaseExists(String dbpath) {\r\n            Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + &quot; initiated.&quot;);\r\n            File db = new File(dbpath);\r\n            if(db.exists()) return true;\r\n            File dir = new File(db.getParent());\r\n            if (!dir.exists()) {\r\n                dir.mkdirs();\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        /**\r\n         * Copy the Database from the assets folder\r\n         * @param context\r\n         * @param dbpath\r\n         * @return\r\n         */\r\n        private boolean copyDatabaseFromAssets(Context context,String dbpath, String dbname, String asset) {\r\n            String thisclass = new Object(){}.getClass().getEnclosingMethod().getName();\r\n            Log.d(LOGTAG,thisclass + &quot; initiated&quot;);\r\n            InputStream assetsdb;\r\n            OutputStream database;\r\n            File db = new File(dbpath);\r\n            int filesize;\r\n            // Get the asset file\r\n            try {\r\n                Log.d(LOGTAG,thisclass + &quot; attempting to find asset &quot; + asset);\r\n                assetsdb = context.getAssets().open(asset);\r\n                filesize = assetsdb.available();\r\n                Log.d(LOGTAG,thisclass + &quot; asset &quot; + asset +\r\n                        &quot; located successfully with a size of &quot; +\r\n                        Integer.toString(filesize)\r\n                );\r\n            } catch (IOException e) {\r\n                Log.d(LOGTAG,thisclass + &quot; Did not locate asset &quot; + asset);\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n    \r\n            // Read the first 16 bytes from the asset file\r\n            byte[] dbcheck = new byte[16];\r\n            try {\r\n                assetsdb.read(dbcheck,0,16);\r\n            } catch (IOException e) {\r\n                Log.d(LOGTAG, thisclass + &quot; failed trying to read 16 bytes to check for a valid database. &quot;);\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n    \r\n            // Check that the asset file is an SQLite database\r\n            String chkdb = new String(dbcheck);\r\n            if(!chkdb.equals(&quot;SQLite format 3\\u0000&quot;)) {\r\n                Log.d(LOGTAG,thisclass + &quot; asset &quot; +\r\n                        asset +\r\n                        &quot; is not a valid SQLite Database File (found &quot; +\r\n                        chkdb +\r\n                        &quot; at bytes 1-16 instead of SQLite format 3)&quot;);\r\n                try {\r\n                    assetsdb.close();\r\n                } catch (IOException e) {\r\n                    // Not worth doing anything\r\n                }\r\n                return false;\r\n            }\r\n            // Close the asset file\r\n            try {\r\n                assetsdb.close();\r\n            } catch (IOException e) {\r\n                Log.d(LOGTAG,thisclass +\r\n                        &quot; failed to close assets file after checking for a valid database.&quot;\r\n                );\r\n                return false;\r\n            }\r\n            // Re-open the asset file\r\n            try {\r\n                assetsdb = context.getAssets().open(asset);\r\n                filesize = assetsdb.available();\r\n            } catch (IOException e) {\r\n                Log.d(LOGTAG, thisclass +\r\n                        &quot; failed trying to re-open asset &quot; +\r\n                        asset +\r\n                        &quot; after checking for a valid database.&quot;\r\n                );\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n    \r\n            // Read the entire asset file into a buffer\r\n            Log.d(LOGTAG, thisclass +\r\n                    &quot; copying asset database &quot; +\r\n                    dbname +\r\n                    &quot; into buffer of size &quot; +\r\n                    filesize\r\n            );\r\n            byte[] buffer = new byte[filesize];\r\n            // Close the asset file\r\n            try {\r\n                assetsdb.read(buffer);\r\n                Log.d(LOGTAG,thisclass +\r\n                        &quot; closing asset database &quot; + dbname\r\n                );\r\n                assetsdb.close();\r\n            } catch (IOException e) {\r\n                Log.d(LOGTAG, thisclass +\r\n                        &quot; failed while copying asset database &quot; +\r\n                        dbname +\r\n                        &quot; (or closing asset database).&quot;\r\n                );\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n            // Open the new database file\r\n            try {\r\n                Log.d(LOGTAG,thisclass + &quot; attempting to open new database file &quot; + dbpath);\r\n                database = new FileOutputStream(dbpath);\r\n            } catch (IOException e) {\r\n                Log.d(LOGTAG, thisclass + &quot; failed to open new database file.&quot;);\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n            // Write the new database file\r\n            try {\r\n                Log.d(LOGTAG, thisclass + &quot; writing new database file &quot; + dbpath);\r\n                database.write(buffer);\r\n            } catch (IOException e) {\r\n                Log.d(LOGTAG, thisclass + &quot; failed while writing new database file &quot; + dbpath);\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n            // Flush the new database file\r\n            try {\r\n                Log.d(LOGTAG, thisclass + &quot; flushing new database file &quot; + dbpath);\r\n                database.flush();\r\n            } catch (IOException e) {\r\n                Log.d(LOGTAG, thisclass + &quot; failed while flushing new database file &quot; + dbpath);\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n            // Close the new database file\r\n            try {\r\n                Log.d(LOGTAG, thisclass + &quot; closing new database file &quot; + dbpath);\r\n                database.close();\r\n            } catch (IOException e) {\r\n                Log.d(LOGTAG, thisclass + &quot; failed while closing new database file &quot; + dbpath);\r\n                e.printStackTrace();\r\n                return  false;\r\n            }\r\n            Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + &quot; completed.&quot;);\r\n            return true;\r\n        }\r\n    \r\n        /**\r\n         * Log Database table Information\r\n         */\r\n        private void logDatabaseTableInformation(SQLiteDatabase db) {\r\n            Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + &quot; initiated.&quot;);\r\n            String mastertable = &quot;sqlite_master&quot;;\r\n            String typecolumn = &quot;type&quot;;\r\n            String namecolumn = &quot;name&quot;;\r\n            String sqlcolumn = &quot;sql&quot;;\r\n            String[] args = new String[]{&quot;table&quot;,&quot;android_metadata&quot;};\r\n            Cursor csr = db.query(mastertable,\r\n                    null,\r\n                    typecolumn + &quot;=? AND &quot; + namecolumn + &quot;!=?&quot;,\r\n                     args,\r\n                    null,null,null\r\n            );\r\n            while (csr.moveToNext()) {\r\n                Log.d(LOGTAG,&quot;Database contains Table &quot; +\r\n                        csr.getString(csr.getColumnIndex(namecolumn)) +\r\n                        &quot; created by SQL &quot; +\r\n                        csr.getString(csr.getColumnIndex(sqlcolumn))\r\n                );\r\n                logTableInformation(db, csr.getString(csr.getColumnIndex(namecolumn)));\r\n            }\r\n            csr.close();\r\n            Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + &quot; completed.&quot;);\r\n        }\r\n    \r\n        /**\r\n         * Write Table information, Table name, Column Count,\r\n         * Row Count and Column Names to the Log\r\n         * @param table Name of the table to be reported on\r\n         */\r\n        private void logTableInformation(SQLiteDatabase db, String table) {\r\n            Cursor csr = db.query(table,\r\n                    null,\r\n                    null,\r\n                    null,\r\n                    null,\r\n                    null,\r\n                    null\r\n            );\r\n            Log.d(LOGTAG,&quot;Table is &quot; +\r\n                    table +\r\n                    &quot; Column Count = &quot; +\r\n                    Integer.toString(csr.getColumnCount()) +\r\n                    &quot; Row Count = &quot; +\r\n                    Long.toString(DatabaseUtils.queryNumEntries(mDB,table))\r\n            );\r\n            StringBuilder columns_as_string = new StringBuilder();\r\n            for (String s: csr.getColumnNames()) {\r\n                columns_as_string.append(s).append(&quot; &quot;);\r\n            }\r\n            Log.d(LOGTAG, &quot;\\tColumns are :- &quot; + columns_as_string);\r\n            csr.close();\r\n        }\r\n    \r\n        /**\r\n         * Build the sub-path to the asset, according to the directories specified\r\n         *\r\n         * @param directories   directories underneath the assets folder where\r\n         *                      the asset files is located, null or empty\r\n         *                      array if file is located directly in the\r\n         *                      assets folder;\r\n         *                      directories must be specified in the order\r\n         *                      in which they appear in the path.\r\n         * @param filename      The filename of the asset\r\n         * @return              The fill sub-path to the asset\r\n         */\r\n        private String buildAssetPath(String[] directories, String filename) {\r\n            StringBuilder sb = new StringBuilder();\r\n            final String SEPERATOR = &quot;/&quot;;\r\n            if (directories != null &amp;&amp; directories.length &gt; 0) {\r\n                for (String s: directories) {\r\n                    sb.append(s);\r\n                    if (!s.substring(s.length()-1,s.length()).equals(SEPERATOR)) {\r\n                        sb.append(SEPERATOR);\r\n                    }\r\n                }\r\n                sb.append(filename);\r\n                return sb.toString();\r\n            } else {\r\n                return filename;\r\n            }\r\n        }\r\n    }\r\n\r\nExample usage :-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        public static final int DBVERSION = 1;\r\n        public static final String DBNAME1 = &quot;openassetdb.db&quot;;\r\n        public static final int DB1_INDEX = 0;\r\n        public static final String DBNAME2 = &quot;myshopping&quot;;\r\n        public static final int DB2_INDEX = 1;\r\n        public static final String DBNAME3 = &quot;rumplestilskin&quot;;\r\n        public static final int DB3_INDEX = 2;\r\n    \r\n        OpenAssetDBHelper mOADBHlpr;\r\n        OpenAssetDBHelper mShoppingHelper;\r\n        OpenAssetDBHelper mShopper;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n            // Example 1 - Database file located in the assets folder and\r\n            //              database name same as file name\r\n            mOADBHlpr = OpenAssetDBHelper.getInstance(DB1_INDEX,\r\n                    this,\r\n                    DBNAME1,\r\n                    DBVERSION,\r\n                    DBNAME1,\r\n                    null\r\n            );\r\n            // Example 2 - Database file in databases directory of the assets folder\r\n            //              database name different to the asset filename\r\n            mShoppingHelper = OpenAssetDBHelper.getInstance(DB2_INDEX,\r\n                    this,\r\n                    DBNAME2,\r\n                    DBVERSION,\r\n                    &quot;shopper&quot;,\r\n                    new String[]{&quot;databases&quot;}\r\n                    );\r\n            // Example 3 - Databse file in databases directory of the assets folder\r\n            //              database name different to the asset filename\r\n            mShopper = OpenAssetDBHelper.getInstance(DB3_INDEX,\r\n                    this,\r\n                    DBNAME3,\r\n                    DBVERSION,\r\n                    &quot;Shopper.sqlite&quot;,\r\n                    new String[]{&quot;databases&quot;}\r\n                    );\r\n        }\r\n    }\r\n\r\nThis is example output :-\r\n\r\n    01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: OpenAssetDBHelper being constructed.\r\n    01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: ifDatabaseExists initiated.\r\n    01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: Database rumplestilskin not found at /data/data/mjt.openassetdb/databases/rumplestilskin so attempting to copy from assets.\r\n    01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets initiated\r\n    01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets attempting to find asset databases/Shopper.sqlite\r\n    01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets asset databases/Shopper.sqlite located successfully with a size of 524288\r\n    01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets copying asset database rumplestilskin into buffer of size 524288\r\n    01-18 00:57:36.586 3276-3276/? D/dalvikvm: GC_FOR_ALLOC freed 295K, 13% free 6197K/7111K, paused 3ms, total 3ms\r\n    01-18 00:57:36.586 3276-3276/? I/dalvikvm-heap: Grow heap (frag case) to 6.892MB for 524300-byte allocation\r\n    01-18 00:57:36.602 3276-3278/? D/dalvikvm: GC_CONCURRENT freed 7K, 13% free 6702K/7687K, paused 11ms+1ms, total 13ms\r\n    01-18 00:57:36.602 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets closing asset database rumplestilskin\r\n    01-18 00:57:36.602 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets attempting to open new database file /data/data/mjt.openassetdb/databases/rumplestilskin\r\n    01-18 00:57:36.602 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets writing new database file /data/data/mjt.openassetdb/databases/rumplestilskin\r\n    01-18 00:57:36.602 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets flushing new database file /data/data/mjt.openassetdb/databases/rumplestilskin\r\n    01-18 00:57:36.606 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets closing new database file /data/data/mjt.openassetdb/databases/rumplestilskin\r\n    01-18 00:57:36.606 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets completed.\r\n    01-18 00:57:36.606 3276-3276/? D/OADB-HLPR: Successfully Copied Database from Assets.\r\n    01-18 00:57:36.618 3276-3276/? D/OADB-HLPR: onCreate initiated.\r\n    01-18 00:57:36.618 3276-3276/? D/OADB-HLPR: onCreate completed.\r\n    01-18 00:57:36.622 3276-3276/? D/OADB-HLPR: logDatabaseTableInformation initiated.\r\n    01-18 00:57:36.622 3276-3276/? D/OADB-HLPR: Database contains Table shops created by SQL CREATE TABLE `shops` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `shopname` TEXT , `shoporder` BIGINT(20) NOT NULL  DEFAULT 100 , `shopstreet` TEXT , `shopcity` TEXT , `shopstate` TEXT , `shopphone` TEXT , `shopnotes` TEXT )\r\n    01-18 00:57:36.622 3276-3276/? D/OADB-HLPR: Table is shops Column Count = 8 Row Count = 7\r\n    01-18 00:57:36.622 3276-3276/? D/OADB-HLPR: \tColumns are :- _id shopname shoporder shopstreet shopcity shopstate shopphone shopnotes \r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table aisles created by SQL CREATE TABLE `aisles` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `aislename` TEXT , `aisleorder` BIGINT(20) NOT NULL  DEFAULT 100 , `aisleshopref` BIGINT(20) NOT NULL )\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is aisles Column Count = 4 Row Count = 63\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: \tColumns are :- _id aislename aisleorder aisleshopref \r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table products created by SQL CREATE TABLE `products` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `productname` TEXT , `productorder` BIGINT(20) NOT NULL  DEFAULT 100 , `productaisleref` BIGINT(20) NOT NULL , `productuses` BIGINT(20) NOT NULL  DEFAULT 0 , `productnotes` TEXT )\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is products Column Count = 6 Row Count = 106\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: \tColumns are :- _id productname productorder productaisleref productuses productnotes \r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table productusage created by SQL CREATE TABLE `productusage` (`productailseref` BIGINT(20) NOT NULL , `productproductref` BIGINT(20) NOT NULL , `productcost` REAL  DEFAULT 1.00 , `productbuycount` BIGINT(20) NOT NULL  DEFAULT 0 , `productfirstbuydate` BIGINT(20) NOT NULL  DEFAULT 0 , `productlatestbuydate` BIGINT(20) NOT NULL  DEFAULT 0 , `mincost` REAL , `orderinaisle` BIGINT(20) NOT NULL  DEFAULT 100 , PRIMARY KEY (productailseref, productproductref))\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is productusage Column Count = 8 Row Count = 106\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: \tColumns are :- productailseref productproductref productcost productbuycount productfirstbuydate productlatestbuydate mincost orderinaisle \r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table rules created by SQL CREATE TABLE `rules` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `rulename` TEXT , `ruletype` BIGINT(20) NOT NULL , `rulepromptflag` BIGINT(20) NOT NULL , `ruleperiod` BIGINT(20) NOT NULL , `rulemultiplier` BIGINT(20) NOT NULL , `ruleactiveon` BIGINT(20) NOT NULL , `ruleproductref` BIGINT(20) NOT NULL , `ruleaisleref` BIGINT(20) NOT NULL , `ruleuses` BIGINT(20) NOT NULL  DEFAULT 0 , `mincost` REAL  DEFAULT 0 , `maxcost` REAL  DEFAULT 0 , `rulesnumbettoget` BIGINT(20) NOT NULL  DEFAULT 1 )\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is rules Column Count = 13 Row Count = 24\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: \tColumns are :- _id rulename ruletype rulepromptflag ruleperiod rulemultiplier ruleactiveon ruleproductref ruleaisleref ruleuses mincost maxcost rulesnumbettoget \r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table shoplist created by SQL CREATE TABLE `shoplist` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `slproductid` BIGINT(20) NOT NULL , `sldateadded` BIGINT(20) NOT NULL  DEFAULT 0 , `slnumbertoget` BIGINT(20) NOT NULL  DEFAULT 1 , `sldone` BIGINT(20) NOT NULL  DEFAULT 0 , `sldategot` BIGINT(20) NOT NULL , `slcost` REAL  DEFAULT 0 , `productusageref` BIGINT(20) NOT NULL , `aisleref` BIGINT(20) NOT NULL )\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is shoplist Column Count = 9 Row Count = 485\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: \tColumns are :- _id slproductid sldateadded slnumbertoget sldone sldategot slcost productusageref aisleref \r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table appvalues created by SQL CREATE TABLE `appvalues` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `valuename` TEXT , `valuetype` TEXT , `valueint` BIGINT(20) NOT NULL  DEFAULT 0 , `valuereal` REAL  DEFAULT &#39;0.0&#39; , `valuetext` TEXT , `valueincludeinsettings` BIGINT(20) NOT NULL  DEFAULT 0 , `valuesettingsinfo` TEXT )\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is appvalues Column Count = 8 Row Count = 7\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: \tColumns are :- _id valuename valuetype valueint valuereal valuetext valueincludeinsettings valuesettingsinfo \r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: logDatabaseTableInformation completed.\r\n    01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: OpenAssetDBHelper constructed.","title":"How to import existing SQLite database to Android Studio","body":"<p>I believe that your issue is due to using :-</p>\n\n<pre><code>    if(!dbExist1)\n    {\n        this.getReadableDatabase();\n        try\n        {\n            this.close();\n            copyDataBase();\n        }\n        catch (IOException e)\n        {\n            throw new Error(\"Error copying database\");\n        }\n    }\n</code></pre>\n\n<p>This will result in the database being created as there is a call to <code>getReadableDatabase</code>. The database will then be empty (table less).</p>\n\n<p>So change the above to :-</p>\n\n<pre><code>    if(!dbExist1)\n    {\n        try\n        {\n            copyDataBase();\n        }\n        catch (IOException e)\n        {\n            throw new Error(\"Error copying database\");\n        }\n    }\n</code></pre>\n\n<p>You will need to delete the App's data or Uninstall the App before running the amended code as the database will exist. </p>\n\n<hr>\n\n<p>The following is something that I put together that extends SQLiteOpenHelper and has been written to understand the functionality of opening databases from the assets (or not if the database exists). As such it does have quite extensive logging and is a little long-winded :-</p>\n\n<pre><code>/**\n * Database Helper that includes ability to open database from assets\n * if the database doesn't exist.\n * (i.e. a pre-defined database)\n *\n */\n\npublic class OpenAssetDBHelper extends SQLiteOpenHelper {\n\n    private static final String LOGTAG = \"OADB-HLPR\";\n    public static final int MAXIMUM_HELPERS = 10;\n    private String mDBPath, mAssetPath;\n    private static OpenAssetDBHelper mInstance[] = new OpenAssetDBHelper[MAXIMUM_HELPERS];\n    private SQLiteDatabase mDB;\n\n    /**\n     * OpenAssetDBHelper Class that will copy a predefined database\n     * from the assets folder and then open it is the database;\n     *\n     * The copy will only be done if the database does not exist.\n     *\n     * Note this code is intended to be used for development and/or\n     * experimentation, hence the extensive logging.\n     */\n\n    /**\n     * get an OpenAssetDBHelper instance as a singleton;\n     * Note! caters for up to 10 OpenAssetDBHelpers for up to 10 databases\n     * as specified by the helper_index\n     *\n     * @param helper_index  Index to this instance/database\n     *                      (0-MAXIMUM_HELPERS less 1)\n     * @param context       Context for the database\n     * @param database      Database name (i.e. file name)\n     * @param dbversion     Database version (user_version)\n     * @param assetfile     Name of the asset file to be copied to the database\n     * @param asset_sub_directories String Array of the sub-directories where\n     *                              the asset file is located;\n     *                              MUST be in order\n     * @return              The resultant OpenAssetDBHelper\n     */\n    public static synchronized OpenAssetDBHelper getInstance(\n            int helper_index,\n            Context context,\n            String database,\n            int dbversion,\n            String assetfile,\n            String[] asset_sub_directories) {\n        // Checck that helper_index is within bounds\n        if (helper_index &gt; (MAXIMUM_HELPERS -1)) {\n            throw new RuntimeException(\n                    \"Helper Index greater than \" +\n                            MAXIMUM_HELPERS\n            );\n        }\n        if (helper_index &lt; 0) {\n            throw new RuntimeException(\n                    \"Helper Index cannot be negative, must be 0-\" +\n                            MAXIMUM_HELPERS\n            );\n        }\n        // Create the respective OpenAssetDBHelper instance\n        if(mInstance[helper_index] == null) {\n            mInstance[helper_index] = new OpenAssetDBHelper(context,\n                    database,\n                    dbversion,\n                    assetfile,\n                    asset_sub_directories);\n        }\n        return mInstance[helper_index];\n    }\n\n    /**\n     * Construct an OpenAssetDBHelper instance;\n     * Note! can only be called within class\n     *\n     * @param context       the context to be used\n     * @param database      the database name (equates to filename)\n     * @param dbversion     the databaae version (user_version)\n     * @param assetfile     The name of the asset file i.e. the pre-defined db\n     * @param directories   The hierarchy of directories within the assets folder\n     *                      where the asset file is located\n     *                      (null or zero elements = in the assets folder)\n     */\n    private OpenAssetDBHelper(Context context,\n                              String database,\n                              int dbversion,\n                              String assetfile,\n                              String[] directories) {\n        super(context, database, null, dbversion);\n        Log.d(LOGTAG,\"OpenAssetDBHelper being constructed.\");\n\n        mDBPath = context.getDatabasePath(database).getPath();\n        if (assetfile == null || assetfile.length() &lt; 1) {\n            assetfile = database;\n        }\n        mAssetPath = buildAssetPath(directories,assetfile);\n\n        if (!ifDatabaseExists(mDBPath)) {\n            Log.d(LOGTAG,\"Database \" + database + \" not found at \" + mDBPath + \" so attempting to copy from assets.\");\n            if (copyDatabaseFromAssets(context,mDBPath, database, mAssetPath)) {\n                Log.d(LOGTAG, \"Successfully Copied Database from Assets.\");\n            } else {\n                throw new RuntimeException(\"No Database Available.\");\n            }\n        }\n        // Force Database open and store it\n        this.mDB = this.getWritableDatabase();\n        logDatabaseTableInformation(mDB);\n        Log.d(LOGTAG,\"OpenAssetDBHelper constructed.\");\n    }\n\n\n    /**\n     * onCreate - This is where you would create tables;\n     * Typically this is where you would alter the structure of the database;\n     * Note that this is called once for the lifetime of the database.\n     * @param db The SQLitedatabase\n     */\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + \" initiated.\");\n        // As Database is copied from assets nothing to do in onCreate!\n        Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + \" completed.\");\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + \" initiated.\");\n        // Nothing to do as it's early days in the Database's lifetime.\n        Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + \" completed.\");\n    }\n\n    /**\n     * Check to see if the Database exists,\n     * if it doesn't exists then check to see if\n     * the database directory exists,\n     * if the directory(ies) does(do) not exist then make the directory(ies);\n     *\n     *\n     * @param dbpath        The path to the database\n     * @return              true if the database exists, else false\n     */\n    private boolean ifDatabaseExists(String dbpath) {\n        Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + \" initiated.\");\n        File db = new File(dbpath);\n        if(db.exists()) return true;\n        File dir = new File(db.getParent());\n        if (!dir.exists()) {\n            dir.mkdirs();\n        }\n        return false;\n    }\n\n    /**\n     * Copy the Database from the assets folder\n     * @param context\n     * @param dbpath\n     * @return\n     */\n    private boolean copyDatabaseFromAssets(Context context,String dbpath, String dbname, String asset) {\n        String thisclass = new Object(){}.getClass().getEnclosingMethod().getName();\n        Log.d(LOGTAG,thisclass + \" initiated\");\n        InputStream assetsdb;\n        OutputStream database;\n        File db = new File(dbpath);\n        int filesize;\n        // Get the asset file\n        try {\n            Log.d(LOGTAG,thisclass + \" attempting to find asset \" + asset);\n            assetsdb = context.getAssets().open(asset);\n            filesize = assetsdb.available();\n            Log.d(LOGTAG,thisclass + \" asset \" + asset +\n                    \" located successfully with a size of \" +\n                    Integer.toString(filesize)\n            );\n        } catch (IOException e) {\n            Log.d(LOGTAG,thisclass + \" Did not locate asset \" + asset);\n            e.printStackTrace();\n            return false;\n        }\n\n        // Read the first 16 bytes from the asset file\n        byte[] dbcheck = new byte[16];\n        try {\n            assetsdb.read(dbcheck,0,16);\n        } catch (IOException e) {\n            Log.d(LOGTAG, thisclass + \" failed trying to read 16 bytes to check for a valid database. \");\n            e.printStackTrace();\n            return false;\n        }\n\n        // Check that the asset file is an SQLite database\n        String chkdb = new String(dbcheck);\n        if(!chkdb.equals(\"SQLite format 3\\u0000\")) {\n            Log.d(LOGTAG,thisclass + \" asset \" +\n                    asset +\n                    \" is not a valid SQLite Database File (found \" +\n                    chkdb +\n                    \" at bytes 1-16 instead of SQLite format 3)\");\n            try {\n                assetsdb.close();\n            } catch (IOException e) {\n                // Not worth doing anything\n            }\n            return false;\n        }\n        // Close the asset file\n        try {\n            assetsdb.close();\n        } catch (IOException e) {\n            Log.d(LOGTAG,thisclass +\n                    \" failed to close assets file after checking for a valid database.\"\n            );\n            return false;\n        }\n        // Re-open the asset file\n        try {\n            assetsdb = context.getAssets().open(asset);\n            filesize = assetsdb.available();\n        } catch (IOException e) {\n            Log.d(LOGTAG, thisclass +\n                    \" failed trying to re-open asset \" +\n                    asset +\n                    \" after checking for a valid database.\"\n            );\n            e.printStackTrace();\n            return false;\n        }\n\n        // Read the entire asset file into a buffer\n        Log.d(LOGTAG, thisclass +\n                \" copying asset database \" +\n                dbname +\n                \" into buffer of size \" +\n                filesize\n        );\n        byte[] buffer = new byte[filesize];\n        // Close the asset file\n        try {\n            assetsdb.read(buffer);\n            Log.d(LOGTAG,thisclass +\n                    \" closing asset database \" + dbname\n            );\n            assetsdb.close();\n        } catch (IOException e) {\n            Log.d(LOGTAG, thisclass +\n                    \" failed while copying asset database \" +\n                    dbname +\n                    \" (or closing asset database).\"\n            );\n            e.printStackTrace();\n            return false;\n        }\n        // Open the new database file\n        try {\n            Log.d(LOGTAG,thisclass + \" attempting to open new database file \" + dbpath);\n            database = new FileOutputStream(dbpath);\n        } catch (IOException e) {\n            Log.d(LOGTAG, thisclass + \" failed to open new database file.\");\n            e.printStackTrace();\n            return false;\n        }\n        // Write the new database file\n        try {\n            Log.d(LOGTAG, thisclass + \" writing new database file \" + dbpath);\n            database.write(buffer);\n        } catch (IOException e) {\n            Log.d(LOGTAG, thisclass + \" failed while writing new database file \" + dbpath);\n            e.printStackTrace();\n            return false;\n        }\n        // Flush the new database file\n        try {\n            Log.d(LOGTAG, thisclass + \" flushing new database file \" + dbpath);\n            database.flush();\n        } catch (IOException e) {\n            Log.d(LOGTAG, thisclass + \" failed while flushing new database file \" + dbpath);\n            e.printStackTrace();\n            return false;\n        }\n        // Close the new database file\n        try {\n            Log.d(LOGTAG, thisclass + \" closing new database file \" + dbpath);\n            database.close();\n        } catch (IOException e) {\n            Log.d(LOGTAG, thisclass + \" failed while closing new database file \" + dbpath);\n            e.printStackTrace();\n            return  false;\n        }\n        Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + \" completed.\");\n        return true;\n    }\n\n    /**\n     * Log Database table Information\n     */\n    private void logDatabaseTableInformation(SQLiteDatabase db) {\n        Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + \" initiated.\");\n        String mastertable = \"sqlite_master\";\n        String typecolumn = \"type\";\n        String namecolumn = \"name\";\n        String sqlcolumn = \"sql\";\n        String[] args = new String[]{\"table\",\"android_metadata\"};\n        Cursor csr = db.query(mastertable,\n                null,\n                typecolumn + \"=? AND \" + namecolumn + \"!=?\",\n                 args,\n                null,null,null\n        );\n        while (csr.moveToNext()) {\n            Log.d(LOGTAG,\"Database contains Table \" +\n                    csr.getString(csr.getColumnIndex(namecolumn)) +\n                    \" created by SQL \" +\n                    csr.getString(csr.getColumnIndex(sqlcolumn))\n            );\n            logTableInformation(db, csr.getString(csr.getColumnIndex(namecolumn)));\n        }\n        csr.close();\n        Log.d(LOGTAG,new Object(){}.getClass().getEnclosingMethod().getName() + \" completed.\");\n    }\n\n    /**\n     * Write Table information, Table name, Column Count,\n     * Row Count and Column Names to the Log\n     * @param table Name of the table to be reported on\n     */\n    private void logTableInformation(SQLiteDatabase db, String table) {\n        Cursor csr = db.query(table,\n                null,\n                null,\n                null,\n                null,\n                null,\n                null\n        );\n        Log.d(LOGTAG,\"Table is \" +\n                table +\n                \" Column Count = \" +\n                Integer.toString(csr.getColumnCount()) +\n                \" Row Count = \" +\n                Long.toString(DatabaseUtils.queryNumEntries(mDB,table))\n        );\n        StringBuilder columns_as_string = new StringBuilder();\n        for (String s: csr.getColumnNames()) {\n            columns_as_string.append(s).append(\" \");\n        }\n        Log.d(LOGTAG, \"\\tColumns are :- \" + columns_as_string);\n        csr.close();\n    }\n\n    /**\n     * Build the sub-path to the asset, according to the directories specified\n     *\n     * @param directories   directories underneath the assets folder where\n     *                      the asset files is located, null or empty\n     *                      array if file is located directly in the\n     *                      assets folder;\n     *                      directories must be specified in the order\n     *                      in which they appear in the path.\n     * @param filename      The filename of the asset\n     * @return              The fill sub-path to the asset\n     */\n    private String buildAssetPath(String[] directories, String filename) {\n        StringBuilder sb = new StringBuilder();\n        final String SEPERATOR = \"/\";\n        if (directories != null &amp;&amp; directories.length &gt; 0) {\n            for (String s: directories) {\n                sb.append(s);\n                if (!s.substring(s.length()-1,s.length()).equals(SEPERATOR)) {\n                    sb.append(SEPERATOR);\n                }\n            }\n            sb.append(filename);\n            return sb.toString();\n        } else {\n            return filename;\n        }\n    }\n}\n</code></pre>\n\n<p>Example usage :-</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    public static final int DBVERSION = 1;\n    public static final String DBNAME1 = \"openassetdb.db\";\n    public static final int DB1_INDEX = 0;\n    public static final String DBNAME2 = \"myshopping\";\n    public static final int DB2_INDEX = 1;\n    public static final String DBNAME3 = \"rumplestilskin\";\n    public static final int DB3_INDEX = 2;\n\n    OpenAssetDBHelper mOADBHlpr;\n    OpenAssetDBHelper mShoppingHelper;\n    OpenAssetDBHelper mShopper;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        // Example 1 - Database file located in the assets folder and\n        //              database name same as file name\n        mOADBHlpr = OpenAssetDBHelper.getInstance(DB1_INDEX,\n                this,\n                DBNAME1,\n                DBVERSION,\n                DBNAME1,\n                null\n        );\n        // Example 2 - Database file in databases directory of the assets folder\n        //              database name different to the asset filename\n        mShoppingHelper = OpenAssetDBHelper.getInstance(DB2_INDEX,\n                this,\n                DBNAME2,\n                DBVERSION,\n                \"shopper\",\n                new String[]{\"databases\"}\n                );\n        // Example 3 - Databse file in databases directory of the assets folder\n        //              database name different to the asset filename\n        mShopper = OpenAssetDBHelper.getInstance(DB3_INDEX,\n                this,\n                DBNAME3,\n                DBVERSION,\n                \"Shopper.sqlite\",\n                new String[]{\"databases\"}\n                );\n    }\n}\n</code></pre>\n\n<p>This is example output :-</p>\n\n<pre><code>01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: OpenAssetDBHelper being constructed.\n01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: ifDatabaseExists initiated.\n01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: Database rumplestilskin not found at /data/data/mjt.openassetdb/databases/rumplestilskin so attempting to copy from assets.\n01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets initiated\n01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets attempting to find asset databases/Shopper.sqlite\n01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets asset databases/Shopper.sqlite located successfully with a size of 524288\n01-18 00:57:36.582 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets copying asset database rumplestilskin into buffer of size 524288\n01-18 00:57:36.586 3276-3276/? D/dalvikvm: GC_FOR_ALLOC freed 295K, 13% free 6197K/7111K, paused 3ms, total 3ms\n01-18 00:57:36.586 3276-3276/? I/dalvikvm-heap: Grow heap (frag case) to 6.892MB for 524300-byte allocation\n01-18 00:57:36.602 3276-3278/? D/dalvikvm: GC_CONCURRENT freed 7K, 13% free 6702K/7687K, paused 11ms+1ms, total 13ms\n01-18 00:57:36.602 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets closing asset database rumplestilskin\n01-18 00:57:36.602 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets attempting to open new database file /data/data/mjt.openassetdb/databases/rumplestilskin\n01-18 00:57:36.602 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets writing new database file /data/data/mjt.openassetdb/databases/rumplestilskin\n01-18 00:57:36.602 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets flushing new database file /data/data/mjt.openassetdb/databases/rumplestilskin\n01-18 00:57:36.606 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets closing new database file /data/data/mjt.openassetdb/databases/rumplestilskin\n01-18 00:57:36.606 3276-3276/? D/OADB-HLPR: copyDatabaseFromAssets completed.\n01-18 00:57:36.606 3276-3276/? D/OADB-HLPR: Successfully Copied Database from Assets.\n01-18 00:57:36.618 3276-3276/? D/OADB-HLPR: onCreate initiated.\n01-18 00:57:36.618 3276-3276/? D/OADB-HLPR: onCreate completed.\n01-18 00:57:36.622 3276-3276/? D/OADB-HLPR: logDatabaseTableInformation initiated.\n01-18 00:57:36.622 3276-3276/? D/OADB-HLPR: Database contains Table shops created by SQL CREATE TABLE `shops` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `shopname` TEXT , `shoporder` BIGINT(20) NOT NULL  DEFAULT 100 , `shopstreet` TEXT , `shopcity` TEXT , `shopstate` TEXT , `shopphone` TEXT , `shopnotes` TEXT )\n01-18 00:57:36.622 3276-3276/? D/OADB-HLPR: Table is shops Column Count = 8 Row Count = 7\n01-18 00:57:36.622 3276-3276/? D/OADB-HLPR:     Columns are :- _id shopname shoporder shopstreet shopcity shopstate shopphone shopnotes \n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table aisles created by SQL CREATE TABLE `aisles` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `aislename` TEXT , `aisleorder` BIGINT(20) NOT NULL  DEFAULT 100 , `aisleshopref` BIGINT(20) NOT NULL )\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is aisles Column Count = 4 Row Count = 63\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR:     Columns are :- _id aislename aisleorder aisleshopref \n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table products created by SQL CREATE TABLE `products` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `productname` TEXT , `productorder` BIGINT(20) NOT NULL  DEFAULT 100 , `productaisleref` BIGINT(20) NOT NULL , `productuses` BIGINT(20) NOT NULL  DEFAULT 0 , `productnotes` TEXT )\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is products Column Count = 6 Row Count = 106\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR:     Columns are :- _id productname productorder productaisleref productuses productnotes \n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table productusage created by SQL CREATE TABLE `productusage` (`productailseref` BIGINT(20) NOT NULL , `productproductref` BIGINT(20) NOT NULL , `productcost` REAL  DEFAULT 1.00 , `productbuycount` BIGINT(20) NOT NULL  DEFAULT 0 , `productfirstbuydate` BIGINT(20) NOT NULL  DEFAULT 0 , `productlatestbuydate` BIGINT(20) NOT NULL  DEFAULT 0 , `mincost` REAL , `orderinaisle` BIGINT(20) NOT NULL  DEFAULT 100 , PRIMARY KEY (productailseref, productproductref))\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is productusage Column Count = 8 Row Count = 106\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR:     Columns are :- productailseref productproductref productcost productbuycount productfirstbuydate productlatestbuydate mincost orderinaisle \n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table rules created by SQL CREATE TABLE `rules` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `rulename` TEXT , `ruletype` BIGINT(20) NOT NULL , `rulepromptflag` BIGINT(20) NOT NULL , `ruleperiod` BIGINT(20) NOT NULL , `rulemultiplier` BIGINT(20) NOT NULL , `ruleactiveon` BIGINT(20) NOT NULL , `ruleproductref` BIGINT(20) NOT NULL , `ruleaisleref` BIGINT(20) NOT NULL , `ruleuses` BIGINT(20) NOT NULL  DEFAULT 0 , `mincost` REAL  DEFAULT 0 , `maxcost` REAL  DEFAULT 0 , `rulesnumbettoget` BIGINT(20) NOT NULL  DEFAULT 1 )\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is rules Column Count = 13 Row Count = 24\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR:     Columns are :- _id rulename ruletype rulepromptflag ruleperiod rulemultiplier ruleactiveon ruleproductref ruleaisleref ruleuses mincost maxcost rulesnumbettoget \n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table shoplist created by SQL CREATE TABLE `shoplist` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `slproductid` BIGINT(20) NOT NULL , `sldateadded` BIGINT(20) NOT NULL  DEFAULT 0 , `slnumbertoget` BIGINT(20) NOT NULL  DEFAULT 1 , `sldone` BIGINT(20) NOT NULL  DEFAULT 0 , `sldategot` BIGINT(20) NOT NULL , `slcost` REAL  DEFAULT 0 , `productusageref` BIGINT(20) NOT NULL , `aisleref` BIGINT(20) NOT NULL )\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is shoplist Column Count = 9 Row Count = 485\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR:     Columns are :- _id slproductid sldateadded slnumbertoget sldone sldategot slcost productusageref aisleref \n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Database contains Table appvalues created by SQL CREATE TABLE `appvalues` (`_id` BIGINT(20) NOT NULL  PRIMARY KEY , `valuename` TEXT , `valuetype` TEXT , `valueint` BIGINT(20) NOT NULL  DEFAULT 0 , `valuereal` REAL  DEFAULT '0.0' , `valuetext` TEXT , `valueincludeinsettings` BIGINT(20) NOT NULL  DEFAULT 0 , `valuesettingsinfo` TEXT )\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: Table is appvalues Column Count = 8 Row Count = 7\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR:     Columns are :- _id valuename valuetype valueint valuereal valuetext valueincludeinsettings valuesettingsinfo \n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: logDatabaseTableInformation completed.\n01-18 00:57:36.626 3276-3276/? D/OADB-HLPR: OpenAssetDBHelper constructed.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12592661,"reputation":2175,"user_id":9158688,"display_name":"Md. Shofiulla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579759266,"creation_date":1579759266,"answer_id":59872388,"question_id":48310829,"body_markdown":"You can pick your db file by using any file picker.\r\nThis function for replace current database.\r\n&gt; This method working for my room database\r\n\r\n    private void importdb(String db_path) {\r\n            try {\r\n                File file=new File(db_path);\r\n                InputStream mInputStream = new DataInputStream(new FileInputStream(file));\r\n                String outFileName = getContext().getDatabasePath(getContext().getResources().getString(R.string.db_name)).getAbsolutePath();\r\n              OutputStream mOutputStream = new FileOutputStream(outFileName);\r\n                byte[] buffer = new byte[1024];\r\n                int length;\r\n                while ((length = mInputStream.read(buffer)) &gt; 0) {\r\n                    mOutputStream.write(buffer, 0, length);\r\n                }\r\n                mOutputStream.flush();\r\n                mOutputStream.close();\r\n                mInputStream.close();\r\n                new CustomMessage(getActivity(), &quot;Database replaced sucessfully&quot;);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                CustomLog.showLogD(&quot;WORKING_STOP&quot;,e.getMessage());\r\n            }\r\n        }","title":"How to import existing SQLite database to Android Studio","body":"<p>You can pick your db file by using any file picker.\nThis function for replace current database.</p>\n\n<blockquote>\n  <p>This method working for my room database</p>\n</blockquote>\n\n<pre><code>private void importdb(String db_path) {\n        try {\n            File file=new File(db_path);\n            InputStream mInputStream = new DataInputStream(new FileInputStream(file));\n            String outFileName = getContext().getDatabasePath(getContext().getResources().getString(R.string.db_name)).getAbsolutePath();\n          OutputStream mOutputStream = new FileOutputStream(outFileName);\n            byte[] buffer = new byte[1024];\n            int length;\n            while ((length = mInputStream.read(buffer)) &gt; 0) {\n                mOutputStream.write(buffer, 0, length);\n            }\n            mOutputStream.flush();\n            mOutputStream.close();\n            mInputStream.close();\n            new CustomMessage(getActivity(), \"Database replaced sucessfully\");\n        } catch (Exception e) {\n            e.printStackTrace();\n            CustomLog.showLogD(\"WORKING_STOP\",e.getMessage());\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":12074085,"reputation":55,"user_id":8828306,"display_name":"KOG"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13695,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":3,"score":0,"last_activity_date":1697249045,"creation_date":1516226962,"question_id":48310829,"body_markdown":"I&#39;ve got an existing SQLite database that I want to work with my Android application. I have looked at all the tutorials online, which are not working for me. I am getting an error when I launch the app in the emulator that says the table I have created in the database does not exist *(android.database.sqlite.SQLiteException: no such table: adk_peaks (code 1): , while compiling: SELECT * FROM adk_peaks WHERE 1)*. \r\n\r\nadk_peaks is the name of the table. Right now I am only trying to get the information from the table to display in a TextView.\r\n\r\nBelow is my extension of SQLiteOpenHelper:\r\n\r\n\r\n    package kyle.peaktracker;\r\n\r\n    import android.database.SQLException;\r\n    import android.database.sqlite.SQLiteException;\r\n    import android.database.sqlite.SQLiteOpenHelper;\r\n    import android.database.sqlite.SQLiteDatabase;\r\n    import android.database.Cursor;\r\n    import android.content.Context;\r\n    import android.content.ContentValues;\r\n    import android.util.Log;\r\n\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n\r\n    public class MyDBHandler extends SQLiteOpenHelper {\r\n\r\n        public static final int DATABASE_VERSION = 2;\r\n        private static final String DATABASE_NAME = &quot;peaks.db&quot;;\r\n        //private static final String DATABASE_PATH =             &quot;/app/src/main/assests/Database/&quot;;\r\n        //private static final String DATABASE_PATH =     &quot;/data/data/kyle.peaktracker/databases/&quot;;\r\n        //private static final String DATABASE_PATH = &quot;\\\\app\\\\src\\\\main\\\\assets\\\\Database\\\\&quot;;\r\n        public static String DATABASE_PATH = &quot;&quot;; //final?\r\n        private static final String TABLE_ADK = &quot;adk_peaks&quot;;\r\n        private SQLiteDatabase myDataBase;\r\n        private final Context myContext;\r\n\r\n\r\n        //Columns\r\n        private static final String COLUMN_ID = &quot;_id&quot;;\r\n        private static final String COLUMN_NAME = &quot;_name&quot;;\r\n        private static final String COLUMN_HEIGHT = &quot;_height&quot;;\r\n        private static final String COLUMN_CLIMBED = &quot;_climbed&quot;;\r\n        private static final String COLUMN_DATE = &quot;_date&quot;;\r\n        private static final String COLUMN_LIST = &quot;_list&quot;;\r\n\r\n        public MyDBHandler(Context context){\r\n            super(context, DATABASE_NAME, null, DATABASE_VERSION);\r\n            this.myContext = context;\r\n            DATABASE_PATH = myContext.getDatabasePath(DATABASE_NAME).toString();\r\n        }\r\n\r\n        public void createDatabase() throws IOException\r\n        {\r\n            boolean dbExist = checkDataBase();\r\n            if(dbExist)\r\n            {\r\n                Log.v(&quot;DB Exists&quot;, &quot;db exists&quot;);\r\n             \r\n            }\r\n            boolean dbExist1 = checkDataBase();\r\n            if(!dbExist1)\r\n            {\r\n                this.getReadableDatabase();\r\n                try\r\n                {\r\n                    this.close();\r\n                    copyDataBase();\r\n                }\r\n                catch (IOException e)\r\n                {\r\n                    throw new Error(&quot;Error copying database&quot;);\r\n                }\r\n            }\r\n        }\r\n\r\n        //Check database already exist or not\r\n        private boolean checkDataBase()\r\n        {\r\n            boolean checkDB = false;\r\n            try\r\n            {\r\n                String myPath = DATABASE_PATH;\r\n                File dbfile = new File(myPath);\r\n                checkDB = dbfile.exists();\r\n            }\r\n            catch(SQLiteException e)\r\n            {\r\n            }\r\n            return checkDB;\r\n        }\r\n\r\n   \r\n       private void copyDataBase() throws IOException\r\n       {\r\n            String outFileName = DATABASE_PATH;\r\n            OutputStream myOutput = new FileOutputStream(outFileName);\r\n            InputStream myInput = myContext.getAssets().open(DATABASE_NAME);\r\n            byte[] buffer = new byte[1024];\r\n            int length;\r\n            while ((length = myInput.read(buffer)) &gt; 0)\r\n            {\r\n                myOutput.write(buffer, 0, length);\r\n            }\r\n            myInput.close();\r\n            myOutput.flush();\r\n            myOutput.close();\r\n        }\r\n\r\n        public void db_delete()\r\n        {\r\n            File file = new File(DATABASE_PATH);\r\n            if(file.exists())\r\n            {\r\n                file.delete();\r\n                System.out.println(&quot;delete database file.&quot;);\r\n            }\r\n        }\r\n\r\n        //Open database\r\n        public void openDatabase() throws SQLException\r\n        {\r\n            String myPath = DATABASE_PATH;\r\n            myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);\r\n        }\r\n\r\n        public synchronized void closeDataBase()throws SQLException\r\n        {\r\n            if(myDataBase != null)\r\n                myDataBase.close();\r\n            super.close();\r\n        }\r\n\r\n\r\n        //Override onCreate and onUpgrade\r\n        public void onCreate(SQLiteDatabase db){\r\n            /*String query = &quot;CREATE TABLE &quot; + TABLE_ADK + &quot;(&quot; +\r\n                    COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT &quot; +\r\n                    COLUMN_NAME + &quot; TEXT &quot; +\r\n                    COLUMN_HEIGHT + &quot; INTEGER &quot; +\r\n                    COLUMN_CLIMBED + &quot; INTEGER &quot; +\r\n                    COLUMN_DATE + &quot; TEXT &quot; +\r\n                    COLUMN_LIST + &quot; TEXT &quot; +\r\n                    &quot;);&quot;;\r\n\r\n            db.execSQL(query); */\r\n        }\r\n\r\n        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)    {\r\n            db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_ADK);\r\n            onCreate(db);\r\n        }\r\n\r\n        public String databaseToString(){\r\n            String dbString = &quot;&quot;;\r\n            SQLiteDatabase db = getWritableDatabase();\r\n            String query = &quot;SELECT * FROM &quot; + TABLE_ADK + &quot; WHERE 1&quot;;\r\n\r\n            Cursor c = db.rawQuery(query, null);\r\n\r\n            c.moveToFirst();\r\n\r\n            while(!c.isAfterLast()){\r\n                if(c.getString(c.getColumnIndex(&quot;_name&quot;))!= null){\r\n                    dbString += c.getString(c.getColumnIndex(&quot;_name&quot;));\r\n                    dbString += &quot;\\n&quot;;\r\n                }\r\n            }\r\n            c.close(); //Added\r\n            db.close();\r\n            return dbString;\r\n        }\r\n    }\r\n\r\nThis is my MainActivity:\r\n    package kyle.peaktracker;\r\n\r\n    import android.database.SQLException;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.widget.TextView;\r\n\r\n    import java.io.IOException;\r\n    import java.util.List;\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n        TextView testText;\r\n        MyDBHandler dbHandler;\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n\r\n            testText = (TextView) findViewById(R.id.test_text);\r\n            //dbHandler = new MyDBHandler(this, null, null, 1);\r\n            dbHandler = new MyDBHandler(this);\r\n            try {\r\n                dbHandler.createDatabase();\r\n            } catch (IOException ioe){\r\n                throw new Error(&quot;Unable to create database&quot;);\r\n            }\r\n\r\n            try {\r\n\r\n                dbHandler.openDatabase();\r\n\r\n            }catch(SQLException sqle){\r\n\r\n                throw sqle;\r\n\r\n            }\r\n\r\n            printDatabase();\r\n        }\r\n\r\n        public void printDatabase(){\r\n            String dbString = dbHandler.databaseToString();\r\n            testText.setText(dbString);\r\n        }\r\n    }\r\n\r\nAny advice is appreciated!\r\n\r\n","title":"How to import existing SQLite database to Android Studio","body":"<p>I've got an existing SQLite database that I want to work with my Android application. I have looked at all the tutorials online, which are not working for me. I am getting an error when I launch the app in the emulator that says the table I have created in the database does not exist *(android.database.sqlite.SQLiteException: no such table: adk_peaks (code 1): , while compiling: SELECT * FROM adk_peaks WHERE 1)*. </p>\n\n<p>adk_peaks is the name of the table. Right now I am only trying to get the information from the table to display in a TextView.</p>\n\n<p>Below is my extension of SQLiteOpenHelper:</p>\n\n<pre><code>package kyle.peaktracker;\n\nimport android.database.SQLException;\nimport android.database.sqlite.SQLiteException;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.Cursor;\nimport android.content.Context;\nimport android.content.ContentValues;\nimport android.util.Log;\n\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\npublic class MyDBHandler extends SQLiteOpenHelper {\n\n    public static final int DATABASE_VERSION = 2;\n    private static final String DATABASE_NAME = \"peaks.db\";\n    //private static final String DATABASE_PATH =             \"/app/src/main/assests/Database/\";\n    //private static final String DATABASE_PATH =     \"/data/data/kyle.peaktracker/databases/\";\n    //private static final String DATABASE_PATH = \"\\\\app\\\\src\\\\main\\\\assets\\\\Database\\\\\";\n    public static String DATABASE_PATH = \"\"; //final?\n    private static final String TABLE_ADK = \"adk_peaks\";\n    private SQLiteDatabase myDataBase;\n    private final Context myContext;\n\n\n    //Columns\n    private static final String COLUMN_ID = \"_id\";\n    private static final String COLUMN_NAME = \"_name\";\n    private static final String COLUMN_HEIGHT = \"_height\";\n    private static final String COLUMN_CLIMBED = \"_climbed\";\n    private static final String COLUMN_DATE = \"_date\";\n    private static final String COLUMN_LIST = \"_list\";\n\n    public MyDBHandler(Context context){\n        super(context, DATABASE_NAME, null, DATABASE_VERSION);\n        this.myContext = context;\n        DATABASE_PATH = myContext.getDatabasePath(DATABASE_NAME).toString();\n    }\n\n    public void createDatabase() throws IOException\n    {\n        boolean dbExist = checkDataBase();\n        if(dbExist)\n        {\n            Log.v(\"DB Exists\", \"db exists\");\n\n        }\n        boolean dbExist1 = checkDataBase();\n        if(!dbExist1)\n        {\n            this.getReadableDatabase();\n            try\n            {\n                this.close();\n                copyDataBase();\n            }\n            catch (IOException e)\n            {\n                throw new Error(\"Error copying database\");\n            }\n        }\n    }\n\n    //Check database already exist or not\n    private boolean checkDataBase()\n    {\n        boolean checkDB = false;\n        try\n        {\n            String myPath = DATABASE_PATH;\n            File dbfile = new File(myPath);\n            checkDB = dbfile.exists();\n        }\n        catch(SQLiteException e)\n        {\n        }\n        return checkDB;\n    }\n\n\n   private void copyDataBase() throws IOException\n   {\n        String outFileName = DATABASE_PATH;\n        OutputStream myOutput = new FileOutputStream(outFileName);\n        InputStream myInput = myContext.getAssets().open(DATABASE_NAME);\n        byte[] buffer = new byte[1024];\n        int length;\n        while ((length = myInput.read(buffer)) &gt; 0)\n        {\n            myOutput.write(buffer, 0, length);\n        }\n        myInput.close();\n        myOutput.flush();\n        myOutput.close();\n    }\n\n    public void db_delete()\n    {\n        File file = new File(DATABASE_PATH);\n        if(file.exists())\n        {\n            file.delete();\n            System.out.println(\"delete database file.\");\n        }\n    }\n\n    //Open database\n    public void openDatabase() throws SQLException\n    {\n        String myPath = DATABASE_PATH;\n        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);\n    }\n\n    public synchronized void closeDataBase()throws SQLException\n    {\n        if(myDataBase != null)\n            myDataBase.close();\n        super.close();\n    }\n\n\n    //Override onCreate and onUpgrade\n    public void onCreate(SQLiteDatabase db){\n        /*String query = \"CREATE TABLE \" + TABLE_ADK + \"(\" +\n                COLUMN_ID + \" INTEGER PRIMARY KEY AUTOINCREMENT \" +\n                COLUMN_NAME + \" TEXT \" +\n                COLUMN_HEIGHT + \" INTEGER \" +\n                COLUMN_CLIMBED + \" INTEGER \" +\n                COLUMN_DATE + \" TEXT \" +\n                COLUMN_LIST + \" TEXT \" +\n                \");\";\n\n        db.execSQL(query); */\n    }\n\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)    {\n        db.execSQL(\"DROP TABLE IF EXISTS \" + TABLE_ADK);\n        onCreate(db);\n    }\n\n    public String databaseToString(){\n        String dbString = \"\";\n        SQLiteDatabase db = getWritableDatabase();\n        String query = \"SELECT * FROM \" + TABLE_ADK + \" WHERE 1\";\n\n        Cursor c = db.rawQuery(query, null);\n\n        c.moveToFirst();\n\n        while(!c.isAfterLast()){\n            if(c.getString(c.getColumnIndex(\"_name\"))!= null){\n                dbString += c.getString(c.getColumnIndex(\"_name\"));\n                dbString += \"\\n\";\n            }\n        }\n        c.close(); //Added\n        db.close();\n        return dbString;\n    }\n}\n</code></pre>\n\n<p>This is my MainActivity:\n    package kyle.peaktracker;</p>\n\n<pre><code>import android.database.SQLException;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.widget.TextView;\n\nimport java.io.IOException;\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity {\n\n    TextView testText;\n    MyDBHandler dbHandler;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        testText = (TextView) findViewById(R.id.test_text);\n        //dbHandler = new MyDBHandler(this, null, null, 1);\n        dbHandler = new MyDBHandler(this);\n        try {\n            dbHandler.createDatabase();\n        } catch (IOException ioe){\n            throw new Error(\"Unable to create database\");\n        }\n\n        try {\n\n            dbHandler.openDatabase();\n\n        }catch(SQLException sqle){\n\n            throw sqle;\n\n        }\n\n        printDatabase();\n    }\n\n    public void printDatabase(){\n        String dbString = dbHandler.databaseToString();\n        testText.setText(dbString);\n    }\n}\n</code></pre>\n\n<p>Any advice is appreciated!</p>\n"},{"tags":["java","reflection","lombok","builder"],"comments":[{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":0,"creation_date":1697355671,"post_id":77290494,"comment_id":136267600,"body_markdown":"There is a similar question with an answer [here](https://stackoverflow.com/questions/66783284/can-i-use-the-lombok-builder-passing-the-parent-class-as-parameter/66817135#66817135).","body":"There is a similar question with an answer <a href=\"https://stackoverflow.com/questions/66783284/can-i-use-the-lombok-builder-passing-the-parent-class-as-parameter/66817135#66817135\">here</a>."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697248238,"creation_date":1697247875,"answer_id":77291325,"question_id":77290494,"body_markdown":"You can add such a `parentBuilder` method into the parent&#39;s builder class, which will then be inherited by all the child builders. The parent builder has a private static method called `$fillValuesFromInstanceIntoBuilder`, which you can use to copy all the properties in an instance of the subclass to `this`.\r\n\r\nBecause `$fillValuesFromInstanceIntoBuilder` takes an instance of the built object, `parentBuilder` can just take an instance of `Parent`, instead of a builder type.\r\n\r\n```\r\n@SuperBuilder(toBuilder = true)\r\npublic abstract class Parent {\r\n    String parentProp;\r\n    // the name and generic parameters of this class must match the \r\n    // abstract builder class that lombok would have generated\r\n    public static abstract class ParentBuilder&lt;C extends Parent, B extends ParentBuilder&lt;C, B&gt;&gt; {\r\n        public B parentBuilder(Parent p) {\r\n            $fillValuesFromInstanceIntoBuilder(p, this);\r\n            return self();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nExample Usage:\r\n\r\n```\r\nChildA a = ChildA.builder()\r\n        .parentProp(&quot;Parent Prop&quot;)\r\n        .childAProp(&quot;Child A Prop&quot;)\r\n        .build();\r\nChildB b = ChildB.builder()\r\n        .parentBuilder(a)\r\n        .childBProp(&quot;Child B Prop&quot;)\r\n        .build();\r\nSystem.out.println(a);\r\nSystem.out.println(b);\r\n```\r\n\r\nI think (I haven&#39;t tried it) this generalises to multiple levels of inheritance. You just need to do something like the above for every class that have subclasses.","title":"Lombok @SuperBuilder - convert an object from one child class to another, preserving the parents&#39; fields","body":"<p>You can add such a <code>parentBuilder</code> method into the parent's builder class, which will then be inherited by all the child builders. The parent builder has a private static method called <code>$fillValuesFromInstanceIntoBuilder</code>, which you can use to copy all the properties in an instance of the subclass to <code>this</code>.</p>\n<p>Because <code>$fillValuesFromInstanceIntoBuilder</code> takes an instance of the built object, <code>parentBuilder</code> can just take an instance of <code>Parent</code>, instead of a builder type.</p>\n<pre><code>@SuperBuilder(toBuilder = true)\npublic abstract class Parent {\n    String parentProp;\n    // the name and generic parameters of this class must match the \n    // abstract builder class that lombok would have generated\n    public static abstract class ParentBuilder&lt;C extends Parent, B extends ParentBuilder&lt;C, B&gt;&gt; {\n        public B parentBuilder(Parent p) {\n            $fillValuesFromInstanceIntoBuilder(p, this);\n            return self();\n        }\n    }\n}\n</code></pre>\n<p>Example Usage:</p>\n<pre><code>ChildA a = ChildA.builder()\n        .parentProp(&quot;Parent Prop&quot;)\n        .childAProp(&quot;Child A Prop&quot;)\n        .build();\nChildB b = ChildB.builder()\n        .parentBuilder(a)\n        .childBProp(&quot;Child B Prop&quot;)\n        .build();\nSystem.out.println(a);\nSystem.out.println(b);\n</code></pre>\n<p>I think (I haven't tried it) this generalises to multiple levels of inheritance. You just need to do something like the above for every class that have subclasses.</p>\n"}],"owner":{"account_id":17684,"reputation":3311,"user_id":39843,"accept_rate":88,"display_name":"MK_Dev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697248238,"creation_date":1697229208,"question_id":77290494,"body_markdown":"I need to convert an instance of one class to a &quot;sibling&quot; class (both inheriting from the same parent) without explicitly setting common/parents&#39; fields. The goal is to make this &quot;mapping&quot; resilient to changes to the parent class as fields are added or removed. Here are the basics of the classes I&#39;m working with:\r\n\r\nParent:\r\n```\r\n@NonFinal\r\n@SuperBuilder(toBuilder = true)\r\npublic abstract class Parent {\r\n    String parentProp;\r\n}\r\n```\r\n\r\nChildA:\r\n```\r\n@SuperBuilder(toBuilder = true)\r\npublic class ChildA extends Parent {\r\n    String childAProp;\r\n}\r\n```\r\n\r\nChildB:\r\n```\r\n@SuperBuilder(toBuilder = true)\r\npublic class ChildB extends Parent {\r\n    String childBProp;\r\n}\r\n```\r\n\r\nGiven `childA` instance of `ClassA`, I want to convert/map it to `ClassB`, ideally doing something like this:\r\n```\r\nvar childB = ChildB.builder()\r\n  .parentBuilder((ParentBuilder)childA.toBuilder())\r\n  .setChildBProp(&quot;childB&quot;)\r\n  .build();\r\n```\r\n\r\nI haven&#39;t found a way to accomplish this using lombok, but wondering if I just missed something obvious. If this isn&#39;t possible with lombok, is reflection the best option here? I have access to the classes&#39; source, so I can modify them, but again, I want to avoid setting parents&#39; properties explicitly. Thanks!\r\n\r\nEdit: it looks like this is a [similar question][1], with a key different of their `Parent` class not being abstract.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/54197544/how-to-use-lomboks-tobuilder-on-superbuilder","title":"Lombok @SuperBuilder - convert an object from one child class to another, preserving the parents&#39; fields","body":"<p>I need to convert an instance of one class to a &quot;sibling&quot; class (both inheriting from the same parent) without explicitly setting common/parents' fields. The goal is to make this &quot;mapping&quot; resilient to changes to the parent class as fields are added or removed. Here are the basics of the classes I'm working with:</p>\n<p>Parent:</p>\n<pre><code>@NonFinal\n@SuperBuilder(toBuilder = true)\npublic abstract class Parent {\n    String parentProp;\n}\n</code></pre>\n<p>ChildA:</p>\n<pre><code>@SuperBuilder(toBuilder = true)\npublic class ChildA extends Parent {\n    String childAProp;\n}\n</code></pre>\n<p>ChildB:</p>\n<pre><code>@SuperBuilder(toBuilder = true)\npublic class ChildB extends Parent {\n    String childBProp;\n}\n</code></pre>\n<p>Given <code>childA</code> instance of <code>ClassA</code>, I want to convert/map it to <code>ClassB</code>, ideally doing something like this:</p>\n<pre><code>var childB = ChildB.builder()\n  .parentBuilder((ParentBuilder)childA.toBuilder())\n  .setChildBProp(&quot;childB&quot;)\n  .build();\n</code></pre>\n<p>I haven't found a way to accomplish this using lombok, but wondering if I just missed something obvious. If this isn't possible with lombok, is reflection the best option here? I have access to the classes' source, so I can modify them, but again, I want to avoid setting parents' properties explicitly. Thanks!</p>\n<p>Edit: it looks like this is a <a href=\"https://stackoverflow.com/questions/54197544/how-to-use-lomboks-tobuilder-on-superbuilder\">similar question</a>, with a key different of their <code>Parent</code> class not being abstract.</p>\n"},{"tags":["java","xml","listview"],"owner":{"account_id":29667918,"reputation":1,"user_id":22737931,"display_name":"Angus Maude"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697246285,"creation_date":1697246210,"question_id":77291289,"body_markdown":"I am trying to display data in a ListView in a fragment however nothing appears, I can see that the data is correctly created in &quot;chatLogList&quot; but it seems like &quot;notifyDataSetChanged()&quot; doesn&#39;t trigger &quot;GetView()&quot; in the adapter.\r\n\r\n**ChatFragment**\r\n\r\n\r\n```\r\npackage com.example.cyberpunkredagent.ui.chats;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ListView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport com.example.cyberpunkredagent.ChatLog;\r\nimport com.example.cyberpunkredagent.ChatLogViewAdapter;\r\nimport com.example.cyberpunkredagent.ChatMessage;\r\nimport com.example.cyberpunkredagent.Home;\r\nimport com.example.cyberpunkredagent.R;\r\nimport com.example.cyberpunkredagent.databinding.FragmentChatsBinding;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\npublic class ChatFragment extends Fragment {\r\n\r\n    View view;\r\n    String username;\r\n\r\n    ListView chatList;\r\n    ArrayList&lt;ChatLog&gt; chatLogList;\r\n\r\n    private FragmentChatsBinding binding;\r\n    ChatLogViewAdapter adapter;\r\n    DatabaseReference chatRef;\r\n\r\n\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n\r\n        username = ((Home)getActivity()).getUserName();\r\n        ChatViewModel chatViewModel = new ViewModelProvider(this).get(ChatViewModel.class);\r\n\r\n        binding = FragmentChatsBinding.inflate(inflater, container, false);\r\n        View root = binding.getRoot();\r\n\r\n        view = inflater.inflate(R.layout.fragment_chats, null);\r\n\r\n        return root;\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState){\r\n\r\n        displayChatList();\r\n    }\r\n\r\n    public void displayChatList(){\r\n        chatList = view.findViewById(R.id.list_of_chats);\r\n        chatLogList = new ArrayList&lt;&gt;();\r\n        adapter = new ChatLogViewAdapter(view.getContext(), chatLogList);\r\n\r\n        chatRef = FirebaseDatabase.getInstance().getReference().child(&quot;chats&quot;);\r\n        chatRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                Iterable&lt;DataSnapshot&gt; chats = dataSnapshot.getChildren();\r\n                for (DataSnapshot chat : chats) {\r\n                    ArrayList&lt;String&gt; users = (ArrayList&lt;String&gt;) chat.child(&quot;users&quot;).getValue();\r\n                    if (users.contains(username)){\r\n                        ChatLog toAdd = new ChatLog(users, (ArrayList&lt;ChatMessage&gt;)chat.child(&quot;messages&quot;).getValue());\r\n                        chatLogList.add(toAdd);\r\n                        adapter.notifyDataSetChanged();\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Toast.makeText(getContext(), &quot;Error Updating Database&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n        chatList.setAdapter(adapter);      \r\n    }\r\n\r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n        binding = null;\r\n    }\r\n}\r\n```\r\n\r\n**ChatLogViewAdapter**\r\n\r\n\r\n```\r\npackage com.example.cyberpunkredagent;\r\n\r\nimport android.content.Context;\r\nimport android.text.format.DateFormat;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.TextView;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class ChatLogViewAdapter extends ArrayAdapter&lt;ChatLog&gt; {\r\n    public ChatLogViewAdapter(Context context, ArrayList&lt;ChatLog&gt; chatLogList){\r\n        super(context, 0, chatLogList);\r\n    }\r\n\r\n    @Override\r\n    public View getView(int position, View convertView, ViewGroup parent){\r\n        ChatLog chatLog = getItem(position);\r\n        if (convertView == null){\r\n            convertView = LayoutInflater.from(getContext()).inflate(R.layout.chat_log_preview, parent, false);\r\n        }\r\n        TextView messageText = convertView.findViewById(R.id.message_text);\r\n        TextView messageUser = convertView.findViewById(R.id.message_user);\r\n        TextView messageTime = convertView.findViewById(R.id.message_time);\r\n\r\n        messageText.setText(chatLog.lastMessageText());\r\n        messageUser.setText(chatLog.chatUserString());\r\n        // Format the date before showing it\r\n        messageTime.setText(DateFormat.format(&quot;dd-MM-yyyy (HH:mm:ss)&quot;,\r\n                chatLog.lastMessageTime()));\r\n        return convertView;\r\n    }\r\n}\r\n\r\n```\r\n\r\n**chat_log_preview.xml**\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/message_user&quot;\r\n        android:text=&quot;Name&quot; /&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/message_time&quot;\r\n        android:text=&quot;Time&quot;/&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/message_text&quot;\r\n        android:text=&quot;Message&quot;/&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\nI have looked through similar questions but most of them revolve around a problem with redefining the list given to the adapter which I don&#39;t think I am doing.\r\n\r\nI know the data is being added and that &quot;notifyDataSetChanged()&quot; is being called. I just can&#39;t get the adapter to populate the listview, and it appears that it is because it never calls &quot;getView()&quot; in the adapter","title":"Custom adapter not displaying items in ListView","body":"<p>I am trying to display data in a ListView in a fragment however nothing appears, I can see that the data is correctly created in &quot;chatLogList&quot; but it seems like &quot;notifyDataSetChanged()&quot; doesn't trigger &quot;GetView()&quot; in the adapter.</p>\n<p><strong>ChatFragment</strong></p>\n<pre><code>package com.example.cyberpunkredagent.ui.chats;\n\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ListView;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.fragment.app.Fragment;\nimport androidx.lifecycle.ViewModelProvider;\n\nimport com.example.cyberpunkredagent.ChatLog;\nimport com.example.cyberpunkredagent.ChatLogViewAdapter;\nimport com.example.cyberpunkredagent.ChatMessage;\nimport com.example.cyberpunkredagent.Home;\nimport com.example.cyberpunkredagent.R;\nimport com.example.cyberpunkredagent.databinding.FragmentChatsBinding;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.ValueEventListener;\n\npublic class ChatFragment extends Fragment {\n\n    View view;\n    String username;\n\n    ListView chatList;\n    ArrayList&lt;ChatLog&gt; chatLogList;\n\n    private FragmentChatsBinding binding;\n    ChatLogViewAdapter adapter;\n    DatabaseReference chatRef;\n\n\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n\n        username = ((Home)getActivity()).getUserName();\n        ChatViewModel chatViewModel = new ViewModelProvider(this).get(ChatViewModel.class);\n\n        binding = FragmentChatsBinding.inflate(inflater, container, false);\n        View root = binding.getRoot();\n\n        view = inflater.inflate(R.layout.fragment_chats, null);\n\n        return root;\n    }\n\n    @Override\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState){\n\n        displayChatList();\n    }\n\n    public void displayChatList(){\n        chatList = view.findViewById(R.id.list_of_chats);\n        chatLogList = new ArrayList&lt;&gt;();\n        adapter = new ChatLogViewAdapter(view.getContext(), chatLogList);\n\n        chatRef = FirebaseDatabase.getInstance().getReference().child(&quot;chats&quot;);\n        chatRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n                Iterable&lt;DataSnapshot&gt; chats = dataSnapshot.getChildren();\n                for (DataSnapshot chat : chats) {\n                    ArrayList&lt;String&gt; users = (ArrayList&lt;String&gt;) chat.child(&quot;users&quot;).getValue();\n                    if (users.contains(username)){\n                        ChatLog toAdd = new ChatLog(users, (ArrayList&lt;ChatMessage&gt;)chat.child(&quot;messages&quot;).getValue());\n                        chatLogList.add(toAdd);\n                        adapter.notifyDataSetChanged();\n                    }\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n                Toast.makeText(getContext(), &quot;Error Updating Database&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n        chatList.setAdapter(adapter);      \n    }\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        binding = null;\n    }\n}\n</code></pre>\n<p><strong>ChatLogViewAdapter</strong></p>\n<pre><code>package com.example.cyberpunkredagent;\n\nimport android.content.Context;\nimport android.text.format.DateFormat;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ArrayAdapter;\nimport android.widget.TextView;\n\nimport java.util.ArrayList;\n\npublic class ChatLogViewAdapter extends ArrayAdapter&lt;ChatLog&gt; {\n    public ChatLogViewAdapter(Context context, ArrayList&lt;ChatLog&gt; chatLogList){\n        super(context, 0, chatLogList);\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent){\n        ChatLog chatLog = getItem(position);\n        if (convertView == null){\n            convertView = LayoutInflater.from(getContext()).inflate(R.layout.chat_log_preview, parent, false);\n        }\n        TextView messageText = convertView.findViewById(R.id.message_text);\n        TextView messageUser = convertView.findViewById(R.id.message_user);\n        TextView messageTime = convertView.findViewById(R.id.message_time);\n\n        messageText.setText(chatLog.lastMessageText());\n        messageUser.setText(chatLog.chatUserString());\n        // Format the date before showing it\n        messageTime.setText(DateFormat.format(&quot;dd-MM-yyyy (HH:mm:ss)&quot;,\n                chatLog.lastMessageTime()));\n        return convertView;\n    }\n}\n\n</code></pre>\n<p><strong>chat_log_preview.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/message_user&quot;\n        android:text=&quot;Name&quot; /&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/message_time&quot;\n        android:text=&quot;Time&quot;/&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/message_text&quot;\n        android:text=&quot;Message&quot;/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>I have looked through similar questions but most of them revolve around a problem with redefining the list given to the adapter which I don't think I am doing.</p>\n<p>I know the data is being added and that &quot;notifyDataSetChanged()&quot; is being called. I just can't get the adapter to populate the listview, and it appears that it is because it never calls &quot;getView()&quot; in the adapter</p>\n"},{"tags":["java","android","android-uiautomator"],"answers":[{"tags":[],"owner":{"account_id":340585,"reputation":2250,"user_id":670687,"accept_rate":69,"display_name":"Elec0"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697246206,"creation_date":1697246206,"answer_id":77291287,"question_id":77291286,"body_markdown":"The solution I finally got to work was using the built-in command `appops`:\r\n\r\n```java\r\nInstrumentation instrumentation = InstrumentationRegistry.getInstrumentation();\r\nUiDevice device = UiDevice.getInstance(instrumentation);\r\n\r\nString targetPackageName = instrumentation.getTargetContext().getPackageName();\r\nString permissionCommand = String.format(&quot;appops set %s WRITE_EXTERNAL_STORAGE allow&quot;, targetPackageName);\r\n\r\ndevice.executeShellCommand(permissionCommand);\r\n```\r\n\r\n","title":"How to grant Android runtime &amp; special permissions on GMD Android Test Device","body":"<p>The solution I finally got to work was using the built-in command <code>appops</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Instrumentation instrumentation = InstrumentationRegistry.getInstrumentation();\nUiDevice device = UiDevice.getInstance(instrumentation);\n\nString targetPackageName = instrumentation.getTargetContext().getPackageName();\nString permissionCommand = String.format(&quot;appops set %s WRITE_EXTERNAL_STORAGE allow&quot;, targetPackageName);\n\ndevice.executeShellCommand(permissionCommand);\n</code></pre>\n"}],"owner":{"account_id":340585,"reputation":2250,"user_id":670687,"accept_rate":69,"display_name":"Elec0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77291287,"answer_count":1,"score":0,"last_activity_date":1697246206,"creation_date":1697246206,"question_id":77291286,"body_markdown":"# The background\r\n[In 2021, Gradle Managed Devices (DMG), and Android Test Device (ATD) images were released](https://android-developers.googleblog.com/2021/10/whats-new-in-scalable-automated-testing.html). Using emulators with these images tends to be faster and use less resources for instrumentation tests.\r\n\r\nThe downside is there appears to be very little documentation about them.  \r\nI was unable to find anything talking about dealing with permissions &amp; instrumentation tests on ATDs pretty much anywhere.\r\n\r\nWhich was a problem because I&#39;m trying to get our app&#39;s instrumentation tests to work on these devices, to make running them in CICD easier.\r\n\r\n# The problem\r\nAfter Android 10, dealing with permissions changed. Now there are install permissions, runtime permissions, and special permissions.  \r\nWhen running tests on a GMD, they can easily be new images with no preset configurations. Which means you have to grant permissions.\r\n\r\nSpecial permissions were very challenging to get working.  \r\nUsually when requesting these permissions, you have to issue a special intent to have the user double-confirm the permission, such as `Settings.ACTION_MANAGE_WRITE_SETTINGS`.\r\n\r\nThis is a problem, because ATDs don&#39;t have Settings installed. Which means the app crashes, with this stack trace:\r\n```java\r\nandroid.content.ActivityNotFoundException: No Activity found to handle Intent\r\n\t{ act=android.settings.action.MANAGE_WRITE_SETTINGS\r\n\tcat=[android.intent.category.DEFAULT] dat=package:sequoia.gui.demo flg=0x50800000 }\r\n\tat android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:2087)\r\n\tat android.app.Instrumentation.execStartActivity(Instrumentation.java:1747)\r\n\tat\r\n\tandroidx.test.runner.MonitoringInstrumentation.execStartActivity(MonitoringInstrumentation.java:605)\r\n```\r\n\r\nI&#39;ve tried `GrantPermissionsRule`:\r\n```java\r\nPermission: android.permission.WRITE_SETTINGS cannot be granted!\r\nfailed: existence(sequoia.gui.test.app.MainActivityTest)\r\n----- begin exception -----\r\njunit.framework.AssertionFailedError: Failed to grant permissions, see logcat for details\r\n\tat junit.framework.Assert.fail(Assert.java:50)\r\n\tat\r\n\tandroidx.test.runner.permission.PermissionRequester.requestPermissions(PermissionRequester.java:111)\r\n\tat\r\n\tandroidx.test.rule.GrantPermissionRule$RequestPermissionStatement.evaluate(GrantPermissionRule.java:135)\r\n```\r\n\r\n\r\nAnd also `UiAutomation.grantRuntimePermission`:\r\n```java\r\njava.lang.SecurityException: Error granting runtime permission\r\n\tat android.app.UiAutomation.grantRuntimePermissionAsUser(UiAutomation.java:1271)\r\n\tat android.app.UiAutomation.grantRuntimePermission(UiAutomation.java:1238)\r\n```\r\n\r\nHow can this be achieved?","title":"How to grant Android runtime &amp; special permissions on GMD Android Test Device","body":"<h1>The background</h1>\n<p><a href=\"https://android-developers.googleblog.com/2021/10/whats-new-in-scalable-automated-testing.html\" rel=\"nofollow noreferrer\">In 2021, Gradle Managed Devices (DMG), and Android Test Device (ATD) images were released</a>. Using emulators with these images tends to be faster and use less resources for instrumentation tests.</p>\n<p>The downside is there appears to be very little documentation about them.<br />\nI was unable to find anything talking about dealing with permissions &amp; instrumentation tests on ATDs pretty much anywhere.</p>\n<p>Which was a problem because I'm trying to get our app's instrumentation tests to work on these devices, to make running them in CICD easier.</p>\n<h1>The problem</h1>\n<p>After Android 10, dealing with permissions changed. Now there are install permissions, runtime permissions, and special permissions.<br />\nWhen running tests on a GMD, they can easily be new images with no preset configurations. Which means you have to grant permissions.</p>\n<p>Special permissions were very challenging to get working.<br />\nUsually when requesting these permissions, you have to issue a special intent to have the user double-confirm the permission, such as <code>Settings.ACTION_MANAGE_WRITE_SETTINGS</code>.</p>\n<p>This is a problem, because ATDs don't have Settings installed. Which means the app crashes, with this stack trace:</p>\n<pre class=\"lang-java prettyprint-override\"><code>android.content.ActivityNotFoundException: No Activity found to handle Intent\n    { act=android.settings.action.MANAGE_WRITE_SETTINGS\n    cat=[android.intent.category.DEFAULT] dat=package:sequoia.gui.demo flg=0x50800000 }\n    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:2087)\n    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1747)\n    at\n    androidx.test.runner.MonitoringInstrumentation.execStartActivity(MonitoringInstrumentation.java:605)\n</code></pre>\n<p>I've tried <code>GrantPermissionsRule</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Permission: android.permission.WRITE_SETTINGS cannot be granted!\nfailed: existence(sequoia.gui.test.app.MainActivityTest)\n----- begin exception -----\njunit.framework.AssertionFailedError: Failed to grant permissions, see logcat for details\n    at junit.framework.Assert.fail(Assert.java:50)\n    at\n    androidx.test.runner.permission.PermissionRequester.requestPermissions(PermissionRequester.java:111)\n    at\n    androidx.test.rule.GrantPermissionRule$RequestPermissionStatement.evaluate(GrantPermissionRule.java:135)\n</code></pre>\n<p>And also <code>UiAutomation.grantRuntimePermission</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.SecurityException: Error granting runtime permission\n    at android.app.UiAutomation.grantRuntimePermissionAsUser(UiAutomation.java:1271)\n    at android.app.UiAutomation.grantRuntimePermission(UiAutomation.java:1238)\n</code></pre>\n<p>How can this be achieved?</p>\n"},{"tags":["java","rounding"],"comments":[{"owner":{"account_id":5031641,"reputation":3025,"user_id":4041633,"accept_rate":100,"display_name":"Thomas Stets"},"score":5,"creation_date":1434964446,"post_id":30976081,"comment_id":49983057,"body_markdown":"try Math.round(x + 0.2), i.e. just provide the offset to the regular rounding point","body":"try Math.round(x + 0.2), i.e. just provide the offset to the regular rounding point"},{"owner":{"account_id":1914807,"reputation":4272,"user_id":1727589,"accept_rate":70,"display_name":"Hadi Satrio"},"score":0,"creation_date":1434965233,"post_id":30976081,"comment_id":49983510,"body_markdown":"Thanks it worked! But can you please elaborate how could it do that?","body":"Thanks it worked! But can you please elaborate how could it do that?"}],"answers":[{"tags":[],"owner":{"account_id":4628781,"reputation":7731,"user_id":3751845,"accept_rate":67,"display_name":"NaN"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1434965523,"creation_date":1434964745,"answer_id":30976238,"question_id":30976081,"body_markdown":"`Math.floor(x+0.7)` should do it. \r\n\r\nThis should work for an arbitrary mantissa. Just add the offset to the next integer to your value and round down.\r\nThe rounding is done by floor. Here is what the java API says to floor:\r\n\r\n&gt; Returns the largest (closest to positive infinity) double value that\r\n&gt; is less than or equal to the argument and is equal to a mathematical\r\n&gt; integer.\r\n\r\nThis solution is similar to the one from @Thomas Stets, but imho it is easier to understand since rounding is done in only one direction.","title":"How to do custom rounding of numbers in Java?","body":"<p><code>Math.floor(x+0.7)</code> should do it. </p>\n\n<p>This should work for an arbitrary mantissa. Just add the offset to the next integer to your value and round down.\nThe rounding is done by floor. Here is what the java API says to floor:</p>\n\n<blockquote>\n  <p>Returns the largest (closest to positive infinity) double value that\n  is less than or equal to the argument and is equal to a mathematical\n  integer.</p>\n</blockquote>\n\n<p>This solution is similar to the one from @Thomas Stets, but imho it is easier to understand since rounding is done in only one direction.</p>\n"}],"owner":{"account_id":1914807,"reputation":4272,"user_id":1727589,"accept_rate":70,"display_name":"Hadi Satrio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2211,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":30976238,"answer_count":1,"score":4,"last_activity_date":1697244789,"creation_date":1434964270,"question_id":30976081,"body_markdown":"Suppose I want to round numbers that have [mantissa][1] greater than 0.3 &#39;up&#39; and those below &#39;down&#39;.\r\n\r\nHow can I do it in Java?\r\n\r\nThe only thing that came to my mind was `Math.round()`, but I can&#39;t seem to make it follow a certain rule.\r\n\r\n\r\n  [1]: http://mathworld.wolfram.com/Mantissa.html","title":"How to do custom rounding of numbers in Java?","body":"<p>Suppose I want to round numbers that have <a href=\"http://mathworld.wolfram.com/Mantissa.html\" rel=\"nofollow\">mantissa</a> greater than 0.3 'up' and those below 'down'.</p>\n\n<p>How can I do it in Java?</p>\n\n<p>The only thing that came to my mind was <code>Math.round()</code>, but I can't seem to make it follow a certain rule.</p>\n"},{"tags":["java","spring","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697242862,"creation_date":1697242862,"answer_id":77291198,"question_id":77290668,"body_markdown":"Ok so basically I got it to do what I wanted but in the reactive way. Just had to refactor a bunch of code. Guess I need to learn how to think in reactive ways. \r\n\r\nHowever if someone needs a way to get a claim in a non reactive way, **here is a hacky way I found**. Assuming you are in controll of the client that is calling your service just send the claims you want to access in the request. Ofcourse this is not good because someone could send false information. But to solve that all you have to so Is to compare them with your jwt token (in a reactive way xD). In the security filter chain add a custom filter that will make this verification. Here is an implementation:\r\n\r\n\r\n*In this example I want to get the value &quot;mainId&quot; from the token so I just send it in the path variable, and then in the security filter just for x path I check if the value sent in the path variable is the same as the one in the token, if so I know I can use it, if not the request is not correct and I return a 403* \r\n\r\n\r\nDeclare path to run filter on: \r\n\r\n    private final ServerWebExchangeMatcher pathMatcher = ServerWebExchangeMatchers.pathMatchers(&quot;/notification/getEvents/**&quot;);\r\n\r\nSecurity filter chain: \r\n\r\n    @Bean\r\n    public SecurityWebFilterChain filterChain(ServerHttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                    .authorizeExchange(authorize -&gt; {\r\n                    try {\r\n                        authorize.anyExchange().authenticated()\r\n                                .and()\r\n                                .addFilterAt(this::filter, SecurityWebFiltersOrder.AUTHORIZATION);;\r\n                    } catch (Exception e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                })\r\n                .oauth2ResourceServer(\r\n                        oauth2 -&gt; oauth2.authenticationManagerResolver(getJwtIssuerAuthenticationManagerResolver()));\r\n\r\n        http.headers()\r\n                .xssProtection()\r\n                .disable()\r\n                .frameOptions();\r\n\r\n        return http.build();\r\n\r\n\r\nYour filter: \r\n\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n        return pathMatcher.matches(exchange)\r\n                .flatMap(matchResult -&gt; {\r\n                    if (matchResult.isMatch()) {\r\n                        return checkClaim(exchange);\r\n                    } else {\r\n                        return chain.filter(exchange);\r\n                    }\r\n                });\r\n    }\r\n\r\nCheck the claim: \r\n \r\n\r\n       private Mono&lt;Void&gt; checkClaim(ServerWebExchange exchange) {\r\n    \r\n            return ReactiveSecurityContextHolder.getContext()\r\n                    .map(SecurityContext::getAuthentication)\r\n                    .flatMap(authentication -&gt; {\r\n                        if (authentication instanceof JwtAuthenticationToken) {\r\n                            JwtAuthenticationToken jwtAuthenticationToken = (JwtAuthenticationToken) authentication;\r\n                            String pathVariableMainId = getMainIdFromExchange(exchange);\r\n                            if (jwtAuthenticationToken.getTokenAttributes().containsKey(&quot;mainId&quot;)) {\r\n                                String claimMainId = jwtAuthenticationToken.getTokenAttributes().get(&quot;mainId&quot;).toString();\r\n                                if (pathVariableMainId.equals(claimMainId)) {\r\n                                    return Mono.empty(); // Authorized\r\n                                }\r\n                            }\r\n                        }\r\n                        return Mono.error(new AccessDeniedException(&quot;Access is denied&quot;));\r\n                    });\r\n        }\r\n\r\nGet the main Id from the path variable: \r\n\r\n    public String getMainIdFromExchange(ServerWebExchange exchange ){\r\n        String path = exchange.getRequest().getPath().value();\r\n        UriTemplate uriTemplate = new UriTemplate(&quot;/notification/getEvents/{mainId}&quot;);\r\n        Map&lt;String, String&gt; parameters = new HashMap&lt;&gt;();\r\n        parameters = uriTemplate.match(path); //extract values form template\r\n    \r\n        return parameters.get(&quot;mainId&quot;);\r\n    }\r\n\r\nI know this is extremly hacky, but it works. :) \r\n\r\nIf anybody knows of a better way please add a response :) ","title":"How to access JWT in Spring Webflux in ReactiveSecurityContextHolder","body":"<p>Ok so basically I got it to do what I wanted but in the reactive way. Just had to refactor a bunch of code. Guess I need to learn how to think in reactive ways.</p>\n<p>However if someone needs a way to get a claim in a non reactive way, <strong>here is a hacky way I found</strong>. Assuming you are in controll of the client that is calling your service just send the claims you want to access in the request. Ofcourse this is not good because someone could send false information. But to solve that all you have to so Is to compare them with your jwt token (in a reactive way xD). In the security filter chain add a custom filter that will make this verification. Here is an implementation:</p>\n<p><em>In this example I want to get the value &quot;mainId&quot; from the token so I just send it in the path variable, and then in the security filter just for x path I check if the value sent in the path variable is the same as the one in the token, if so I know I can use it, if not the request is not correct and I return a 403</em></p>\n<p>Declare path to run filter on:</p>\n<pre><code>private final ServerWebExchangeMatcher pathMatcher = ServerWebExchangeMatchers.pathMatchers(&quot;/notification/getEvents/**&quot;);\n</code></pre>\n<p>Security filter chain:</p>\n<pre><code>@Bean\npublic SecurityWebFilterChain filterChain(ServerHttpSecurity http) throws Exception {\n    http.csrf().disable()\n                .authorizeExchange(authorize -&gt; {\n                try {\n                    authorize.anyExchange().authenticated()\n                            .and()\n                            .addFilterAt(this::filter, SecurityWebFiltersOrder.AUTHORIZATION);;\n                } catch (Exception e) {\n                    throw new RuntimeException(e);\n                }\n            })\n            .oauth2ResourceServer(\n                    oauth2 -&gt; oauth2.authenticationManagerResolver(getJwtIssuerAuthenticationManagerResolver()));\n\n    http.headers()\n            .xssProtection()\n            .disable()\n            .frameOptions();\n\n    return http.build();\n</code></pre>\n<p>Your filter:</p>\n<pre><code>public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n    return pathMatcher.matches(exchange)\n            .flatMap(matchResult -&gt; {\n                if (matchResult.isMatch()) {\n                    return checkClaim(exchange);\n                } else {\n                    return chain.filter(exchange);\n                }\n            });\n}\n</code></pre>\n<p>Check the claim:</p>\n<pre><code>   private Mono&lt;Void&gt; checkClaim(ServerWebExchange exchange) {\n\n        return ReactiveSecurityContextHolder.getContext()\n                .map(SecurityContext::getAuthentication)\n                .flatMap(authentication -&gt; {\n                    if (authentication instanceof JwtAuthenticationToken) {\n                        JwtAuthenticationToken jwtAuthenticationToken = (JwtAuthenticationToken) authentication;\n                        String pathVariableMainId = getMainIdFromExchange(exchange);\n                        if (jwtAuthenticationToken.getTokenAttributes().containsKey(&quot;mainId&quot;)) {\n                            String claimMainId = jwtAuthenticationToken.getTokenAttributes().get(&quot;mainId&quot;).toString();\n                            if (pathVariableMainId.equals(claimMainId)) {\n                                return Mono.empty(); // Authorized\n                            }\n                        }\n                    }\n                    return Mono.error(new AccessDeniedException(&quot;Access is denied&quot;));\n                });\n    }\n</code></pre>\n<p>Get the main Id from the path variable:</p>\n<pre><code>public String getMainIdFromExchange(ServerWebExchange exchange ){\n    String path = exchange.getRequest().getPath().value();\n    UriTemplate uriTemplate = new UriTemplate(&quot;/notification/getEvents/{mainId}&quot;);\n    Map&lt;String, String&gt; parameters = new HashMap&lt;&gt;();\n    parameters = uriTemplate.match(path); //extract values form template\n\n    return parameters.get(&quot;mainId&quot;);\n}\n</code></pre>\n<p>I know this is extremly hacky, but it works. :)</p>\n<p>If anybody knows of a better way please add a response :)</p>\n"}],"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697242862,"creation_date":1697231569,"question_id":77290668,"body_markdown":"How do I access the JTW token? \r\n.block() throws exception and all other methods dont seem to work. \r\n\r\nHere is how I normaly do it in:\r\n\r\n    @Bean(&quot;CurrentUser&quot;)\r\n    public Supplier&lt;JwtAuthenticationToken&gt; currentUser() {\r\n        return () -&gt; (JwtAuthenticationToken) SecurityContextHolder.getContext().getAuthentication();\r\n    }\r\n\r\nThen I pass it in the constructor: \r\n\r\n    @Qualifier(&quot;CurrentUser&quot;) Supplier&lt;JwtAuthenticationToken&gt; currentUserSupplier\r\n\r\nAnd here is a use case: \r\n\r\n    currentUserSupplier.get().getTokenAttributes().get(USER_MAIN_ID_TOKEN)\r\n\r\n\r\nI am trying to do the same with *ReactiveSecurityContextHolder* but its proving imposible. \r\n\r\nI have tried the solutions in this questions. They all return either nothing or null.\r\n\r\nhttps://stackoverflow.com/questions/50905505/reactivesecuritycontextholder-is-empty-in-spring-webflux\r\n\r\nhttps://stackoverflow.com/questions/71859061/how-to-get-claims-from-jwt-token-in-spring-webflux\r\n\r\nhttps://stackoverflow.com/questions/51449889/block-blockfirst-blocklast-are-blocking-error-when-calling-bodytomono-afte\r\n\r\nhttps://stackoverflow.com/questions/47179937/how-to-get-string-from-monostring-in-reactive-java\r\n\r\nMaybe It is simply not possible to get it in a &quot;blocking manner&quot; since its a reactive framework. Can anybody give any further clarification? \r\n\r\n\r\n","title":"How to access JWT in Spring Webflux in ReactiveSecurityContextHolder","body":"<p>How do I access the JTW token?\n.block() throws exception and all other methods dont seem to work.</p>\n<p>Here is how I normaly do it in:</p>\n<pre><code>@Bean(&quot;CurrentUser&quot;)\npublic Supplier&lt;JwtAuthenticationToken&gt; currentUser() {\n    return () -&gt; (JwtAuthenticationToken) SecurityContextHolder.getContext().getAuthentication();\n}\n</code></pre>\n<p>Then I pass it in the constructor:</p>\n<pre><code>@Qualifier(&quot;CurrentUser&quot;) Supplier&lt;JwtAuthenticationToken&gt; currentUserSupplier\n</code></pre>\n<p>And here is a use case:</p>\n<pre><code>currentUserSupplier.get().getTokenAttributes().get(USER_MAIN_ID_TOKEN)\n</code></pre>\n<p>I am trying to do the same with <em>ReactiveSecurityContextHolder</em> but its proving imposible.</p>\n<p>I have tried the solutions in this questions. They all return either nothing or null.</p>\n<p><a href=\"https://stackoverflow.com/questions/50905505/reactivesecuritycontextholder-is-empty-in-spring-webflux\">ReactiveSecurityContextHolder is empty in Spring WebFlux</a></p>\n<p><a href=\"https://stackoverflow.com/questions/71859061/how-to-get-claims-from-jwt-token-in-spring-webflux\">How to get claims from jwt token in spring webflux</a></p>\n<p><a href=\"https://stackoverflow.com/questions/51449889/block-blockfirst-blocklast-are-blocking-error-when-calling-bodytomono-afte\">block()/blockFirst()/blockLast() are blocking error when calling bodyToMono AFTER exchange()</a></p>\n<p><a href=\"https://stackoverflow.com/questions/47179937/how-to-get-string-from-monostring-in-reactive-java\">How to get String from Mono&lt;String&gt; in reactive java</a></p>\n<p>Maybe It is simply not possible to get it in a &quot;blocking manner&quot; since its a reactive framework. Can anybody give any further clarification?</p>\n"},{"tags":["java","spring","tomcat"],"answers":[{"tags":[],"owner":{"account_id":14176255,"reputation":40,"user_id":10241414,"display_name":"Nakip Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697242534,"creation_date":1697242534,"answer_id":77291187,"question_id":77290814,"body_markdown":"For servlet stack applications, the spring-boot-starter-web (defined in your pom.xml or which dependency mng you use for file) includes Tomcat by including spring-boot-starter-tomcat , but you can use spring-boot-starter-jetty or spring-boot-starter-undertow instead.\r\nIf you want to change your application server or getting information, here is the  [official document][1]\r\n\r\n\r\nFor avoiding cors error , please check related  [solutions][2] . It might be related your API headers or browser.\r\n\r\nIf you want a store exact picture , you can save as BLOB(binary large object) column type. Here is the example project but you need some spesific practise for your improvement.\r\n Example project : [upload and download with spring boot][3]\r\n\r\nAt the beginning section , you should learn application context , bean scope and basically background of spring framework before developing api with spring boot to getting knowledge of fundemantals.\r\n\r\ni hope it helps.\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/2.0.6.RELEASE/reference/html/howto-embedded-web-servers.html\r\n  [2]: https://stackoverflow.com/questions/10883211/why-does-my-http-localhost-cors-origin-not-work\r\n  [3]: https://medium.com/shoutloudz/spring-boot-upload-and-download-images-using-jpa-b1c9ef174dc0","title":"How to handle file uploading and sharing them as an URL (not returning them) in spring boot app?","body":"<p>For servlet stack applications, the spring-boot-starter-web (defined in your pom.xml or which dependency mng you use for file) includes Tomcat by including spring-boot-starter-tomcat , but you can use spring-boot-starter-jetty or spring-boot-starter-undertow instead.\nIf you want to change your application server or getting information, here is the  <a href=\"https://docs.spring.io/spring-boot/docs/2.0.6.RELEASE/reference/html/howto-embedded-web-servers.html\" rel=\"nofollow noreferrer\">official document</a></p>\n<p>For avoiding cors error , please check related  <a href=\"https://stackoverflow.com/questions/10883211/why-does-my-http-localhost-cors-origin-not-work\">solutions</a> . It might be related your API headers or browser.</p>\n<p>If you want a store exact picture , you can save as BLOB(binary large object) column type. Here is the example project but you need some spesific practise for your improvement.\nExample project : <a href=\"https://medium.com/shoutloudz/spring-boot-upload-and-download-images-using-jpa-b1c9ef174dc0\" rel=\"nofollow noreferrer\">upload and download with spring boot</a></p>\n<p>At the beginning section , you should learn application context , bean scope and basically background of spring framework before developing api with spring boot to getting knowledge of fundemantals.</p>\n<p>i hope it helps.</p>\n"}],"owner":{"account_id":29667015,"reputation":3,"user_id":22737251,"display_name":"bertonBoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77291187,"answer_count":1,"score":0,"last_activity_date":1697242534,"creation_date":1697233820,"question_id":77290814,"body_markdown":"That is my first question on SO, so I will try to describe my problem as detailed as possible.\r\nI have a REST spring api on backend and angular app at frontend. I tried to implement following functionality:\r\n1) User at front uploades an image.\r\n2) Api receives the image, saves it and generates an URL for this file.\r\n3) User is able to display the image based on the received URL.\r\n\r\nMy question is following:\r\nHow should it be done? I would not like to save image to a database - I would rather prefer to store just the URL. I have read there is a possibility to share files in Tomcat (embedded for Spring Boot), but I do not actually know how that works (I am a begginer, so please forgive :)). Could someone explain how does it work, and if it is a soultion for my problem? ).\r\n\r\nI tried to save image on my local disk, then share the URL to frontend - unfortunately there was an cors-error, when I tried to display the image.","title":"How to handle file uploading and sharing them as an URL (not returning them) in spring boot app?","body":"<p>That is my first question on SO, so I will try to describe my problem as detailed as possible.\nI have a REST spring api on backend and angular app at frontend. I tried to implement following functionality:</p>\n<ol>\n<li>User at front uploades an image.</li>\n<li>Api receives the image, saves it and generates an URL for this file.</li>\n<li>User is able to display the image based on the received URL.</li>\n</ol>\n<p>My question is following:\nHow should it be done? I would not like to save image to a database - I would rather prefer to store just the URL. I have read there is a possibility to share files in Tomcat (embedded for Spring Boot), but I do not actually know how that works (I am a begginer, so please forgive :)). Could someone explain how does it work, and if it is a soultion for my problem? ).</p>\n<p>I tried to save image on my local disk, then share the URL to frontend - unfortunately there was an cors-error, when I tried to display the image.</p>\n"},{"tags":["java","spring-boot","graphql"],"comments":[{"owner":{"account_id":10004293,"reputation":2540,"user_id":7399631,"display_name":"bkis"},"score":1,"creation_date":1544089998,"post_id":53648431,"comment_id":94155667,"body_markdown":"Did you check the port you&#39;re requesting on? And does Spring log anything when receiving the request?","body":"Did you check the port you&#39;re requesting on? And does Spring log anything when receiving the request?"},{"owner":{"account_id":3107900,"reputation":3965,"user_id":2630326,"accept_rate":80,"display_name":"Wojciech Wirzbicki"},"score":0,"creation_date":1544090404,"post_id":53648431,"comment_id":94155894,"body_markdown":"Yes, I checked the port. 404 means that server received the request.","body":"Yes, I checked the port. 404 means that server received the request."},{"owner":{"account_id":10004293,"reputation":2540,"user_id":7399631,"display_name":"bkis"},"score":0,"creation_date":1544091361,"post_id":53648431,"comment_id":94156438,"body_markdown":"That&#39;s true, my bad. And this graphql package you have in your dependencies is supposed to expose the endpoint `/graphql` automatically? I see it&#39;s in your deps, but there&#39;s no further config regarding graphql api.","body":"That&#39;s true, my bad. And this graphql package you have in your dependencies is supposed to expose the endpoint <code>&#47;graphql</code> automatically? I see it&#39;s in your deps, but there&#39;s no further config regarding graphql api."},{"owner":{"account_id":3107900,"reputation":3965,"user_id":2630326,"accept_rate":80,"display_name":"Wojciech Wirzbicki"},"score":0,"creation_date":1544091720,"post_id":53648431,"comment_id":94156658,"body_markdown":"Docs are quite messy, cant find any minimal working example here https://github.com/graphql-java-kickstart/graphql-spring-boot. I must have been missed sth important.","body":"Docs are quite messy, cant find any minimal working example here <a href=\"https://github.com/graphql-java-kickstart/graphql-spring-boot\" rel=\"nofollow noreferrer\">github.com/graphql-java-kickstart/graphql-spring-boot</a>. I must have been missed sth important."}],"answers":[{"comments":[{"owner":{"account_id":14286485,"reputation":3521,"user_id":10319730,"display_name":"Andre Thiele"},"score":1,"creation_date":1596622603,"post_id":53649745,"comment_id":111868513,"body_markdown":"does not work, throws another error on startup saying that you need a bean of type GraphQL","body":"does not work, throws another error on startup saying that you need a bean of type GraphQL"}],"tags":[],"owner":{"account_id":10004293,"reputation":2540,"user_id":7399631,"display_name":"bkis"},"comment_count":1,"down_vote_count":1,"up_vote_count":11,"is_accepted":true,"score":10,"last_activity_date":1544093427,"creation_date":1544093427,"answer_id":53649745,"question_id":53648431,"body_markdown":"The docs (https://github.com/graphql-java-kickstart/graphql-spring-boot#enable-graphql-servlet) say:\r\n\r\n&gt; The servlet becomes accessible at /graphql if graphql-spring-boot-starter added as a dependency to a boot application and a GraphQLSchema bean is present in the application.\r\n\r\n...and the minimum example it links to looks like this:\r\n\r\n    @SpringBootApplication\r\n    public class ApplicationBootConfiguration {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(ApplicationBootConfiguration.class, args);\r\n        }\r\n\r\n        @Bean\r\n        GraphQLSchema schema() {\r\n            return GraphQLSchema.newSchema()\r\n                .query(GraphQLObjectType.newObject()\r\n                    .name(&quot;query&quot;)\r\n                    .field(field -&gt; field\r\n                        .name(&quot;test&quot;)\r\n                        .type(Scalars.GraphQLString)\r\n                        .dataFetcher(environment -&gt; &quot;response&quot;)\r\n                    )\r\n                    .build())\r\n                .build();\r\n        }\r\n    }\r\n\r\nSo you&#39;re missing a Graphql schema to be used. It says if there is one, the API endpoint will be exposed automatically.  \r\nGood luck!","title":"Problem with spring boot graphql. Request /graphql results with 404","body":"<p>The docs (<a href=\"https://github.com/graphql-java-kickstart/graphql-spring-boot#enable-graphql-servlet\" rel=\"noreferrer\">https://github.com/graphql-java-kickstart/graphql-spring-boot#enable-graphql-servlet</a>) say:</p>\n\n<blockquote>\n  <p>The servlet becomes accessible at /graphql if graphql-spring-boot-starter added as a dependency to a boot application and a GraphQLSchema bean is present in the application.</p>\n</blockquote>\n\n<p>...and the minimum example it links to looks like this:</p>\n\n<pre><code>@SpringBootApplication\npublic class ApplicationBootConfiguration {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ApplicationBootConfiguration.class, args);\n    }\n\n    @Bean\n    GraphQLSchema schema() {\n        return GraphQLSchema.newSchema()\n            .query(GraphQLObjectType.newObject()\n                .name(\"query\")\n                .field(field -&gt; field\n                    .name(\"test\")\n                    .type(Scalars.GraphQLString)\n                    .dataFetcher(environment -&gt; \"response\")\n                )\n                .build())\n            .build();\n    }\n}\n</code></pre>\n\n<p>So you're missing a Graphql schema to be used. It says if there is one, the API endpoint will be exposed automatically.<br>\nGood luck!</p>\n"},{"tags":[],"owner":{"account_id":2227719,"reputation":887,"user_id":1966079,"display_name":"Guilherme"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1597419095,"creation_date":1597418481,"answer_id":63415596,"question_id":53648431,"body_markdown":"I had a equal problem using graphiql and Swagger\r\nThe page graphiql got me erros 404 on browser console. The problem was that cannot get the js library from vendor resource.\r\n\r\nOn `class SwaggerConfig extends WebMvcConfigurationSupport`\r\n\r\nI did:\r\n\r\n    @Override\r\n    protected void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n    registry.addResourceHandler(&quot;swagger-ui.html&quot;)\r\n            .addResourceLocations(&quot;classpath:/META-INF/resources/&quot;);\r\n\r\n    registry.addResourceHandler(&quot;/webjars/**&quot;)\r\n            .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;);\r\n    //This is for graphiql works\r\n    registry.addResourceHandler(&quot;/vendor/**&quot;)\r\n          .addResourceLocations(&quot;classpath:/static/vendor/&quot;);\r\n  }\r\n      ","title":"Problem with spring boot graphql. Request /graphql results with 404","body":"<p>I had a equal problem using graphiql and Swagger\nThe page graphiql got me erros 404 on browser console. The problem was that cannot get the js library from vendor resource.</p>\n<p>On <code>class SwaggerConfig extends WebMvcConfigurationSupport</code></p>\n<p>I did:</p>\n<pre><code>@Override\nprotected void addResourceHandlers(ResourceHandlerRegistry registry) {\nregistry.addResourceHandler(&quot;swagger-ui.html&quot;)\n        .addResourceLocations(&quot;classpath:/META-INF/resources/&quot;);\n\nregistry.addResourceHandler(&quot;/webjars/**&quot;)\n        .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;);\n//This is for graphiql works\nregistry.addResourceHandler(&quot;/vendor/**&quot;)\n      .addResourceLocations(&quot;classpath:/static/vendor/&quot;);\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":72139,"reputation":1461,"user_id":208397,"accept_rate":80,"display_name":"CodingLab"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697241252,"creation_date":1697231908,"answer_id":77290690,"question_id":53648431,"body_markdown":"In my case, the following steps resolved the issue:\r\n\r\n 1. Create a directory named src/main/resources/graphql.\r\n 2. Within this directory, add a new file named anyname.graphqls.\r\n 3. Add the following schema to the file:\r\n\r\n```\r\ntype Query { \r\n    test: String \r\n}\r\n```\r\n\r\nIt was challenging to find a solution, as the absence of the directory and file didn&#39;t trigger any errors. Instead, accessing /graphql resulted in a 404 error.","title":"Problem with spring boot graphql. Request /graphql results with 404","body":"<p>In my case, the following steps resolved the issue:</p>\n<ol>\n<li>Create a directory named src/main/resources/graphql.</li>\n<li>Within this directory, add a new file named anyname.graphqls.</li>\n<li>Add the following schema to the file:</li>\n</ol>\n<pre><code>type Query { \n    test: String \n}\n</code></pre>\n<p>It was challenging to find a solution, as the absence of the directory and file didn't trigger any errors. Instead, accessing /graphql resulted in a 404 error.</p>\n"}],"owner":{"account_id":3107900,"reputation":3965,"user_id":2630326,"accept_rate":80,"display_name":"Wojciech Wirzbicki"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12002,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":53649745,"answer_count":3,"score":8,"last_activity_date":1697241252,"creation_date":1544089272,"question_id":53648431,"body_markdown":"I&#39;m trying to run simplest graphql example. I created application with spring initializer and only added graphql dependencies. My `build.gradle`\r\n\r\n    buildscript {\r\n    \text {\r\n    \t\tspringBootVersion = &#39;2.1.1.RELEASE&#39;\r\n    \t}\r\n    \trepositories {\r\n    \t\tmavenCentral()\r\n    \t}\r\n    \tdependencies {\r\n    \t\tclasspath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n    \t}\r\n    }\r\n    \r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;eclipse&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    apply plugin: &#39;io.spring.dependency-management&#39;\r\n    \r\n    group = &#39;com.example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = 1.8\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    }\r\n    \r\n    \r\n    dependencies {\r\n    \timplementation(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n    \ttestImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    \r\n        compile &#39;com.graphql-java-kickstart:graphql-spring-boot-starter:5.3.1&#39;\r\n        compile &#39;com.graphql-java-kickstart:graphiql-spring-boot-starter:5.3.1&#39;\r\n        compile &#39;com.graphql-java-kickstart:voyager-spring-boot-starter:5.3.1&#39;\r\n    }\r\n\r\nDemoApplication.java\r\n\r\n    package com.example.demo;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class DemoApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(DemoApplication.class, args);\r\n    \t}\r\n    }\r\n\r\nWhen I run the project and hit the endpoint `/graphql` it returns `404`. What is missing in my configuration?","title":"Problem with spring boot graphql. Request /graphql results with 404","body":"<p>I'm trying to run simplest graphql example. I created application with spring initializer and only added graphql dependencies. My <code>build.gradle</code></p>\n\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '2.1.1.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n    }\n}\n\napply plugin: 'java'\napply plugin: 'eclipse'\napply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n}\n\n\ndependencies {\n    implementation('org.springframework.boot:spring-boot-starter-web')\n    testImplementation('org.springframework.boot:spring-boot-starter-test')\n\n    compile 'com.graphql-java-kickstart:graphql-spring-boot-starter:5.3.1'\n    compile 'com.graphql-java-kickstart:graphiql-spring-boot-starter:5.3.1'\n    compile 'com.graphql-java-kickstart:voyager-spring-boot-starter:5.3.1'\n}\n</code></pre>\n\n<p>DemoApplication.java</p>\n\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>When I run the project and hit the endpoint <code>/graphql</code> it returns <code>404</code>. What is missing in my configuration?</p>\n"},{"tags":["java","apache-beam"],"answers":[{"tags":[],"owner":{"account_id":25595958,"reputation":1,"user_id":19371728,"display_name":"Poala Astrid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697241227,"creation_date":1697241227,"answer_id":77291146,"question_id":77247489,"body_markdown":"You mentioned that you&#39;ve created custom coders for the legacy classes. This is a good approach. When creating custom coders, you should make sure to handle **serialization** and **deserialization** of the legacy classes properly. You can implement custom coders by extending `Coder&lt;T\\&gt;` and overriding the `encode` and `decode` methods.\n\nExample custom coder for a legacy class:\n\n```\npublic class LegacyClassCoder extends CustomCoder&lt;LegacyClass&gt; {\n    @Override\n    public void encode(LegacyClass value, OutputStream outStream) {\n    // Serialize the LegacyClass to bytes and write them to outStream\n    }\n\n    @Override\n    public LegacyClass decode(InputStream inStream) {\n    // Read bytes from inStream and deserialize them to a LegacyClass instance\n    }\n}\n```\n\nYou indicated that you&#39;ve devised logical types for the legacy classes, which can be advantageous in encapsulating serialization logic and streamlining the interaction with these legacy classes.Also, beam allows the use of these logical types as elements within a Row PCollection. This approach is sound, provided that the logical types effectively manage the serialization and deserialization processes.\n\nWhen using operations like `Group.byFieldNames.aggregateField` or `Join`, avoid using the legacy classes as key fields. Instead, create intermediate keys that use a serializable type.","title":"How can I use a legacy class in a PCollection?","body":"<p>You mentioned that you've created custom coders for the legacy classes. This is a good approach. When creating custom coders, you should make sure to handle <strong>serialization</strong> and <strong>deserialization</strong> of the legacy classes properly. You can implement custom coders by extending <code>Coder&lt;T\\&gt;</code> and overriding the <code>encode</code> and <code>decode</code> methods.</p>\n<p>Example custom coder for a legacy class:</p>\n<pre><code>public class LegacyClassCoder extends CustomCoder&lt;LegacyClass&gt; {\n    @Override\n    public void encode(LegacyClass value, OutputStream outStream) {\n    // Serialize the LegacyClass to bytes and write them to outStream\n    }\n\n    @Override\n    public LegacyClass decode(InputStream inStream) {\n    // Read bytes from inStream and deserialize them to a LegacyClass instance\n    }\n}\n</code></pre>\n<p>You indicated that you've devised logical types for the legacy classes, which can be advantageous in encapsulating serialization logic and streamlining the interaction with these legacy classes.Also, beam allows the use of these logical types as elements within a Row PCollection. This approach is sound, provided that the logical types effectively manage the serialization and deserialization processes.</p>\n<p>When using operations like <code>Group.byFieldNames.aggregateField</code> or <code>Join</code>, avoid using the legacy classes as key fields. Instead, create intermediate keys that use a serializable type.</p>\n"}],"owner":{"account_id":8002284,"reputation":83,"user_id":6036704,"accept_rate":0,"display_name":"J. Bloom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697241227,"creation_date":1696628340,"question_id":77247489,"body_markdown":"I want use Java classes from a legacy API in Beam PCollections. I am working exclusively with PCollection of Row. I cannot access the source code of the legacy API, so cannot annotate them nor declare them serializable. Its classes generally do not implement Serializable. The errors I am getting generally indicate that the legacy classes in question cannot be serialized. \r\n\r\nI have created logical types for the legacy classes. Beam seems to accept them as Row components, and I can create and print PCollections including the legacy classes. However, when I try to transform the PCollections, I generally encounter the not serializable exception. \r\n\r\nAmong the transformations I need to use are AddFields, Group.byFieldNames.aggregateField, and Join. Right now, I&#39;m encountering the not serializable exception when I try to AddFields with the legacy class, the first transform in the chain.\r\n\r\nI have registered the schemas that include legacy components with the pipeline. I created custom coders for the legacy classes, using the readObject and writeObject methods of the ObjectInput/OutputStream classes and registered them with the pipeline.\r\n\r\nIs there any general advice on how to deal with legacy classes in Beam? Examples would be welcome.\r\n\r\nThanks.","title":"How can I use a legacy class in a PCollection?","body":"<p>I want use Java classes from a legacy API in Beam PCollections. I am working exclusively with PCollection of Row. I cannot access the source code of the legacy API, so cannot annotate them nor declare them serializable. Its classes generally do not implement Serializable. The errors I am getting generally indicate that the legacy classes in question cannot be serialized.</p>\n<p>I have created logical types for the legacy classes. Beam seems to accept them as Row components, and I can create and print PCollections including the legacy classes. However, when I try to transform the PCollections, I generally encounter the not serializable exception.</p>\n<p>Among the transformations I need to use are AddFields, Group.byFieldNames.aggregateField, and Join. Right now, I'm encountering the not serializable exception when I try to AddFields with the legacy class, the first transform in the chain.</p>\n<p>I have registered the schemas that include legacy components with the pipeline. I created custom coders for the legacy classes, using the readObject and writeObject methods of the ObjectInput/OutputStream classes and registered them with the pipeline.</p>\n<p>Is there any general advice on how to deal with legacy classes in Beam? Examples would be welcome.</p>\n<p>Thanks.</p>\n"},{"tags":["java","xml","json","xpath"],"comments":[{"owner":{"account_id":3034929,"reputation":331,"user_id":2573257,"display_name":"Malleswari"},"score":0,"creation_date":1404995718,"post_id":19977979,"comment_id":38259124,"body_markdown":"vinod,Have you got the solution for the above question, &quot;Writing your own attributes to XML tags generated from json&quot;.? I&#39;m also looking for the solution, if you found that, please post that in this thread. Thanks in advance.","body":"vinod,Have you got the solution for the above question, &quot;Writing your own attributes to XML tags generated from json&quot;.? I&#39;m also looking for the solution, if you found that, please post that in this thread. Thanks in advance."},{"owner":{"account_id":2203785,"reputation":2039,"user_id":1947482,"display_name":"Valentyn Kolesnikov"},"score":0,"creation_date":1578720552,"post_id":19977979,"comment_id":105539814,"body_markdown":"@Malleswari You may convert JSON to a map, modify it and then convert back.","body":"@Malleswari You may convert JSON to a map, modify it and then convert back."}],"answers":[{"comments":[{"owner":{"account_id":1125669,"reputation":1115,"user_id":1113009,"accept_rate":100,"display_name":"vinod"},"score":1,"creation_date":1384434298,"post_id":19978281,"comment_id":29740569,"body_markdown":"thanks for it. how to write json object to add attrubute to element like\n &lt;Private Provider=&quot;AB&quot;/&gt;","body":"thanks for it. how to write json object to add attrubute to element like  &lt;Private Provider=&quot;AB&quot;/&gt;"},{"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"score":0,"creation_date":1384439260,"post_id":19978281,"comment_id":29743813,"body_markdown":"I guess the only way will be to deserialize the JSON to a (custom) Java Object. Then, using a framework like XMLBeans or XStream and with the help of annotations, specify which property goes as element and which goes as attribute","body":"I guess the only way will be to deserialize the JSON to a (custom) Java Object. Then, using a framework like XMLBeans or XStream and with the help of annotations, specify which property goes as element and which goes as attribute"},{"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"score":0,"creation_date":1384439368,"post_id":19978281,"comment_id":29743894,"body_markdown":"Alternatively, use the XML from the simple two lines above and apply an XSLT to it","body":"Alternatively, use the XML from the simple two lines above and apply an XSLT to it"},{"owner":{"account_id":1125669,"reputation":1115,"user_id":1113009,"accept_rate":100,"display_name":"vinod"},"score":0,"creation_date":1384492722,"post_id":19978281,"comment_id":29768152,"body_markdown":"can i have am example of it","body":"can i have am example of it"},{"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"score":1,"creation_date":1449652395,"post_id":19978281,"comment_id":56096442,"body_markdown":"Very convenient for simple one-to-one JSON to XML conversion.","body":"Very convenient for simple one-to-one JSON to XML conversion."},{"owner":{"account_id":138184,"reputation":5890,"user_id":342947,"accept_rate":87,"display_name":"Fabian Zeindl"},"score":2,"creation_date":1452507726,"post_id":19978281,"comment_id":57183862,"body_markdown":"This does not work for me, I get invalid xml out of valid json.","body":"This does not work for me, I get invalid xml out of valid json."},{"owner":{"account_id":1138344,"reputation":487,"user_id":1122922,"display_name":"Alex Proca"},"score":0,"creation_date":1458288638,"post_id":19978281,"comment_id":59803103,"body_markdown":"URL for javadoc is broken. Here is the [good one](http://stleary.github.io/JSON-java/index.html) and also the [github repo](https://github.com/stleary/JSON-java)","body":"URL for javadoc is broken. Here is the <a href=\"http://stleary.github.io/JSON-java/index.html\" rel=\"nofollow noreferrer\">good one</a> and also the <a href=\"https://github.com/stleary/JSON-java\" rel=\"nofollow noreferrer\">github repo</a>"},{"owner":{"account_id":296895,"reputation":4387,"user_id":602119,"display_name":"Boris"},"score":0,"creation_date":1489222521,"post_id":19978281,"comment_id":72585037,"body_markdown":"This works great most of the time. But one hast to be careful if they have keys in the JSON that might be valid in JSON, but not valid tag names in XML. For example keys starting with numbers work fine in JSON but fail with a standard XML parser.","body":"This works great most of the time. But one hast to be careful if they have keys in the JSON that might be valid in JSON, but not valid tag names in XML. For example keys starting with numbers work fine in JSON but fail with a standard XML parser."},{"owner":{"account_id":1710594,"reputation":2861,"user_id":1568755,"accept_rate":34,"display_name":"vashishth"},"score":0,"creation_date":1490005283,"post_id":19978281,"comment_id":72901766,"body_markdown":"I have a query related to this lib, please have a look once - http://stackoverflow.com/questions/42900503/json-xml-converter-having-array-in-json-string","body":"I have a query related to this lib, please have a look once - <a href=\"http://stackoverflow.com/questions/42900503/json-xml-converter-having-array-in-json-string\" title=\"json xml converter having array in json string\">stackoverflow.com/questions/42900503/&hellip;</a>"},{"owner":{"account_id":984172,"reputation":594,"user_id":1003113,"display_name":"Martynas Jusevičius"},"score":0,"creation_date":1512741474,"post_id":19978281,"comment_id":82391758,"body_markdown":"This is not a valid answer as it generates invalid XML.","body":"This is not a valid answer as it generates invalid XML."},{"owner":{"account_id":2337627,"reputation":803,"user_id":2049580,"display_name":"Bagesh Sharma"},"score":0,"creation_date":1570617524,"post_id":19978281,"comment_id":102966958,"body_markdown":"This library is good but has some problems .. 1) Order of tags is disturbed 2) Big numbers are converted to their exponential forms like 10017686.01 will become 1.001768601E7","body":"This library is good but has some problems .. 1) Order of tags is disturbed 2) Big numbers are converted to their exponential forms like 10017686.01 will become 1.001768601E7"},{"owner":{"account_id":9423002,"reputation":648,"user_id":7008898,"display_name":"Dinith Rukshan Kumara"},"score":0,"creation_date":1607725027,"post_id":19978281,"comment_id":115372576,"body_markdown":"This library not work in android studio 4.1.4.","body":"This library not work in android studio 4.1.4."},{"owner":{"account_id":2203785,"reputation":2039,"user_id":1947482,"display_name":"Valentyn Kolesnikov"},"score":0,"creation_date":1640598089,"post_id":19978281,"comment_id":124611575,"body_markdown":"Underscore-java library can convert any json to xml. It has check for special characters like numbers.","body":"Underscore-java library can convert any json to xml. It has check for special characters like numbers."}],"tags":[],"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"comment_count":13,"down_vote_count":0,"up_vote_count":136,"is_accepted":true,"score":136,"last_activity_date":1458560043,"creation_date":1384433998,"answer_id":19978281,"question_id":19977979,"body_markdown":"Use the (excellent) JSON-Java library from json.org then\r\n\r\n    JSONObject json = new JSONObject(str);\r\n    String xml = XML.toString(json);\r\n\r\n`toString` can take a second argument to provide the name of the XML root node.\r\n\r\nThis library is also able to convert XML to JSON using `XML.toJSONObject(java.lang.String string)`\r\n\r\nCheck the [Javadoc][1] \r\n\r\nLink to the [the github repository][2]\r\n\r\n\r\n*POM*\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n        &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n        &lt;version&gt;20160212&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n  [1]: http://stleary.github.io/JSON-java/index.html\r\n  [2]: https://github.com/stleary/JSON-java\r\n\r\n*original post updated with new links*","title":"Converting JSON to XML in Java","body":"<p>Use the (excellent) JSON-Java library from json.org then</p>\n\n<pre><code>JSONObject json = new JSONObject(str);\nString xml = XML.toString(json);\n</code></pre>\n\n<p><code>toString</code> can take a second argument to provide the name of the XML root node.</p>\n\n<p>This library is also able to convert XML to JSON using <code>XML.toJSONObject(java.lang.String string)</code></p>\n\n<p>Check the <a href=\"http://stleary.github.io/JSON-java/index.html\">Javadoc</a> </p>\n\n<p>Link to the <a href=\"https://github.com/stleary/JSON-java\">the github repository</a></p>\n\n<p><em>POM</em></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.json&lt;/groupId&gt;\n    &lt;artifactId&gt;json&lt;/artifactId&gt;\n    &lt;version&gt;20160212&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><em>original post updated with new links</em></p>\n"},{"tags":[],"owner":{"account_id":5560251,"reputation":1345,"user_id":4418795,"display_name":"Piyush Chordia"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1463043180,"creation_date":1433913602,"answer_id":30747650,"question_id":19977979,"body_markdown":"If you have a valid dtd file for the xml then you can easily transform json to xml and xml to json using the eclipselink jar binary.\r\n\r\nRefer this: http://www.cubicrace.com/2015/06/How-to-convert-XML-to-JSON-format.html\r\n\r\nThe article also has a sample project (including the supporting third party jars) as a zip file which can be downloaded for reference purpose.\r\n\r\n\r\n","title":"Converting JSON to XML in Java","body":"<p>If you have a valid dtd file for the xml then you can easily transform json to xml and xml to json using the eclipselink jar binary.</p>\n\n<p>Refer this: <a href=\"http://www.cubicrace.com/2015/06/How-to-convert-XML-to-JSON-format.html\" rel=\"nofollow\">http://www.cubicrace.com/2015/06/How-to-convert-XML-to-JSON-format.html</a></p>\n\n<p>The article also has a sample project (including the supporting third party jars) as a zip file which can be downloaded for reference purpose.</p>\n"},{"tags":[],"owner":{"account_id":4468336,"reputation":498,"user_id":3775515,"display_name":"Saurabh"},"comment_count":0,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1498996399,"creation_date":1498995030,"answer_id":44870324,"question_id":19977979,"body_markdown":"If you want to replace any node value you can do like this\r\n\r\n    JSONObject json = new JSONObject(str);\r\n    String xml = XML.toString(json);\r\n    xml.replace(&quot;old value&quot;, &quot;new value&quot;);","title":"Converting JSON to XML in Java","body":"<p>If you want to replace any node value you can do like this</p>\n\n<pre><code>JSONObject json = new JSONObject(str);\nString xml = XML.toString(json);\nxml.replace(\"old value\", \"new value\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":984172,"reputation":594,"user_id":1003113,"display_name":"Martynas Jusevičius"},"score":0,"creation_date":1563610325,"post_id":47716504,"comment_id":100763498,"body_markdown":"This conversion now can also be done using our library: https://github.com/AtomGraph/JSON2XML","body":"This conversion now can also be done using our library: <a href=\"https://github.com/AtomGraph/JSON2XML\" rel=\"nofollow noreferrer\">github.com/AtomGraph/JSON2XML</a>"}],"tags":[],"owner":{"account_id":984172,"reputation":594,"user_id":1003113,"display_name":"Martynas Jusevičius"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512743866,"creation_date":1512743866,"answer_id":47716504,"question_id":19977979,"body_markdown":"Transforming with XSLT 3.0 is the only proper way to do it, as far as I can tell. It is guaranteed to produce valid XML, and a nice structure at that.\r\nhttps://www.w3.org/TR/xslt/#json","title":"Converting JSON to XML in Java","body":"<p>Transforming with XSLT 3.0 is the only proper way to do it, as far as I can tell. It is guaranteed to produce valid XML, and a nice structure at that.\n<a href=\"https://www.w3.org/TR/xslt/#json\" rel=\"nofollow noreferrer\">https://www.w3.org/TR/xslt/#json</a></p>\n"},{"comments":[{"owner":{"account_id":10680892,"reputation":582,"user_id":7863031,"display_name":"DubZ"},"score":0,"creation_date":1571915500,"post_id":48048778,"comment_id":103402030,"body_markdown":"thx for this. especially with mixed json object array structure its much easier than the top rated answer","body":"thx for this. especially with mixed json object array structure its much easier than the top rated answer"},{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1577178618,"post_id":48048778,"comment_id":105112440,"body_markdown":"@Valentyn - How to add `soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:soapenc=&quot;http://schemas.xmlsoap.org/soap/encoding/&quot; ` while converting Json to XML ?","body":"@Valentyn - How to add <code>soapenv:Envelope xmlns:soapenv=&quot;http:&#47;&#47;schemas.xmlsoap.org&#47;soap&#47;envelope&#47;&quot; xmlns:soapenc=&quot;http:&#47;&#47;schemas.xmlsoap.org&#47;soap&#47;encoding&#47;&quot; </code> while converting Json to XML ?"},{"owner":{"account_id":9423002,"reputation":648,"user_id":7008898,"display_name":"Dinith Rukshan Kumara"},"score":1,"creation_date":1607725307,"post_id":48048778,"comment_id":115372680,"body_markdown":"Thanks. This is best solution in 2020. Some other libraries not work.","body":"Thanks. This is best solution in 2020. Some other libraries not work."}],"tags":[],"owner":{"account_id":2203785,"reputation":2039,"user_id":1947482,"display_name":"Valentyn Kolesnikov"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1697241145,"creation_date":1514801455,"answer_id":48048778,"question_id":19977979,"body_markdown":"[Underscore-java][1] library has static method `U.jsonToXml(jsonstring)`. [Live example][2]\r\n\r\n    import com.github.underscore.U;\r\n\r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n            String json = &quot;{\\&quot;name\\&quot;:\\&quot;JSON\\&quot;,\\&quot;integer\\&quot;:1,\\&quot;double\\&quot;:2.0,\\&quot;boolean\\&quot;:true,\\&quot;nested\\&quot;:{\\&quot;id\\&quot;:42},\\&quot;array\\&quot;:[1,2,3]}&quot;;\r\n            String xml = U.jsonToXml(json, U.JsonToXmlMode.REMOVE_ATTRIBUTES);\r\n            System.out.println(xml);\r\n        }\r\n    }\r\n\r\nOutput:\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;root&gt;\r\n      &lt;name&gt;JSON&lt;/name&gt;\r\n      &lt;integer&gt;1&lt;/integer&gt;\r\n      &lt;double&gt;2.0&lt;/double&gt;\r\n      &lt;boolean&gt;true&lt;/boolean&gt;\r\n      &lt;nested&gt;\r\n        &lt;id&gt;42&lt;/id&gt;\r\n      &lt;/nested&gt;\r\n      &lt;array&gt;1&lt;/array&gt;\r\n      &lt;array&gt;2&lt;/array&gt;\r\n      &lt;array&gt;3&lt;/array&gt;\r\n    &lt;/root&gt;\r\n  [1]: https://github.com/javadev/underscore-java\r\n  [2]: https://www.jdoodle.com/embed/v0/x1U","title":"Converting JSON to XML in Java","body":"<p><a href=\"https://github.com/javadev/underscore-java\" rel=\"nofollow noreferrer\">Underscore-java</a> library has static method <code>U.jsonToXml(jsonstring)</code>. <a href=\"https://www.jdoodle.com/embed/v0/x1U\" rel=\"nofollow noreferrer\">Live example</a></p>\n<pre><code>import com.github.underscore.U;\n\npublic class MyClass {\n    public static void main(String args[]) {\n        String json = &quot;{\\&quot;name\\&quot;:\\&quot;JSON\\&quot;,\\&quot;integer\\&quot;:1,\\&quot;double\\&quot;:2.0,\\&quot;boolean\\&quot;:true,\\&quot;nested\\&quot;:{\\&quot;id\\&quot;:42},\\&quot;array\\&quot;:[1,2,3]}&quot;;\n        String xml = U.jsonToXml(json, U.JsonToXmlMode.REMOVE_ATTRIBUTES);\n        System.out.println(xml);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;root&gt;\n  &lt;name&gt;JSON&lt;/name&gt;\n  &lt;integer&gt;1&lt;/integer&gt;\n  &lt;double&gt;2.0&lt;/double&gt;\n  &lt;boolean&gt;true&lt;/boolean&gt;\n  &lt;nested&gt;\n    &lt;id&gt;42&lt;/id&gt;\n  &lt;/nested&gt;\n  &lt;array&gt;1&lt;/array&gt;\n  &lt;array&gt;2&lt;/array&gt;\n  &lt;array&gt;3&lt;/array&gt;\n&lt;/root&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":125029,"reputation":330,"user_id":682256,"display_name":"Simon Logic"},"score":0,"creation_date":1634896584,"post_id":63561066,"comment_id":123155558,"body_markdown":"You&#39;d better show how to override &quot;ObjectNode&quot;.","body":"You&#39;d better show how to override &quot;ObjectNode&quot;."},{"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"score":1,"creation_date":1635143284,"post_id":63561066,"comment_id":123206721,"body_markdown":"@SimonLogic Good hint! &#39;Feature&#39; added.","body":"@SimonLogic Good hint! &#39;Feature&#39; added."},{"owner":{"account_id":1514,"reputation":20669,"user_id":2024,"accept_rate":83,"display_name":"Elliot Vargas"},"score":0,"creation_date":1659992503,"post_id":63561066,"comment_id":129423205,"body_markdown":"Is there a way to convert an array of objects in the JSON to a wrapped list in the XML? Say the JSON has `&quot;objects&quot;: [{&quot;value&quot;: 1}, {&quot;value&quot;: 2}]`, is it possible to get `&lt;objects&gt;&lt;object&gt;&lt;value&gt;1&lt;/value&gt;&lt;/object&gt;&lt;object&gt;&lt;value&gt;2&lt;/value&gt;&lt;/object&gt;&lt;/objects&gt;`?","body":"Is there a way to convert an array of objects in the JSON to a wrapped list in the XML? Say the JSON has <code>&quot;objects&quot;: [{&quot;value&quot;: 1}, {&quot;value&quot;: 2}]</code>, is it possible to get <code>&lt;objects&gt;&lt;object&gt;&lt;value&gt;1&lt;&#47;value&gt;&lt;&#47;object&gt;&lt;object&gt;&lt;value&gt;2&lt;&#47;&zwnj;&#8203;value&gt;&lt;&#47;object&gt;&lt;&#47;obj&zwnj;&#8203;ects&gt;</code>?"}],"tags":[],"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1635143205,"creation_date":1598272112,"answer_id":63561066,"question_id":19977979,"body_markdown":"For **json to xml** use the following [Jackson](https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core) example:\r\n\r\n```\r\nfinal String str = &quot;{\\&quot;name\\&quot;:\\&quot;JSON\\&quot;,\\&quot;integer\\&quot;:1,\\&quot;double\\&quot;:2.0,\\&quot;boolean\\&quot;:true,\\&quot;nested\\&quot;:{\\&quot;id\\&quot;:42},\\&quot;array\\&quot;:[1,2,3]}&quot;;\r\nObjectMapper jsonMapper = new ObjectMapper();\r\nJsonNode node = jsonMapper.readValue(str, JsonNode.class);\r\nXmlMapper xmlMapper = new XmlMapper();\r\n\t\t        xmlMapper.configure(SerializationFeature.INDENT_OUTPUT, true);\r\n\t\t        xmlMapper.configure(ToXmlGenerator.Feature.WRITE_XML_DECLARATION, true);\r\n\t\t        xmlMapper.configure(ToXmlGenerator.Feature.WRITE_XML_1_1, true);\r\nObjectWriter ow = xmlMapper.writer().withRootName(&quot;root&quot;);\r\nStringWriter w = new StringWriter();\r\now.writeValue(w, node);\r\nSystem.out.println(w.toString());\r\n```\r\nPrints:\r\n\r\n```\r\n&lt;?xml version=&#39;1.1&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n&lt;root&gt;\r\n  &lt;name&gt;JSON&lt;/name&gt;\r\n  &lt;integer&gt;1&lt;/integer&gt;\r\n  &lt;double&gt;2.0&lt;/double&gt;\r\n  &lt;boolean&gt;true&lt;/boolean&gt;\r\n  &lt;nested&gt;\r\n    &lt;id&gt;42&lt;/id&gt;\r\n  &lt;/nested&gt;\r\n  &lt;array&gt;1&lt;/array&gt;\r\n  &lt;array&gt;2&lt;/array&gt;\r\n  &lt;array&gt;3&lt;/array&gt;\r\n&lt;/root&gt;\r\n```\r\n\r\nTo convert it back (**xml to json**) take a look at this answer https://stackoverflow.com/a/62468955/1485527 . \r\n","title":"Converting JSON to XML in Java","body":"<p>For <strong>json to xml</strong> use the following <a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core\" rel=\"nofollow noreferrer\">Jackson</a> example:</p>\n<pre><code>final String str = &quot;{\\&quot;name\\&quot;:\\&quot;JSON\\&quot;,\\&quot;integer\\&quot;:1,\\&quot;double\\&quot;:2.0,\\&quot;boolean\\&quot;:true,\\&quot;nested\\&quot;:{\\&quot;id\\&quot;:42},\\&quot;array\\&quot;:[1,2,3]}&quot;;\nObjectMapper jsonMapper = new ObjectMapper();\nJsonNode node = jsonMapper.readValue(str, JsonNode.class);\nXmlMapper xmlMapper = new XmlMapper();\n                xmlMapper.configure(SerializationFeature.INDENT_OUTPUT, true);\n                xmlMapper.configure(ToXmlGenerator.Feature.WRITE_XML_DECLARATION, true);\n                xmlMapper.configure(ToXmlGenerator.Feature.WRITE_XML_1_1, true);\nObjectWriter ow = xmlMapper.writer().withRootName(&quot;root&quot;);\nStringWriter w = new StringWriter();\now.writeValue(w, node);\nSystem.out.println(w.toString());\n</code></pre>\n<p>Prints:</p>\n<pre><code>&lt;?xml version='1.1' encoding='UTF-8'?&gt;\n&lt;root&gt;\n  &lt;name&gt;JSON&lt;/name&gt;\n  &lt;integer&gt;1&lt;/integer&gt;\n  &lt;double&gt;2.0&lt;/double&gt;\n  &lt;boolean&gt;true&lt;/boolean&gt;\n  &lt;nested&gt;\n    &lt;id&gt;42&lt;/id&gt;\n  &lt;/nested&gt;\n  &lt;array&gt;1&lt;/array&gt;\n  &lt;array&gt;2&lt;/array&gt;\n  &lt;array&gt;3&lt;/array&gt;\n&lt;/root&gt;\n</code></pre>\n<p>To convert it back (<strong>xml to json</strong>) take a look at this answer <a href=\"https://stackoverflow.com/a/62468955/1485527\">https://stackoverflow.com/a/62468955/1485527</a> .</p>\n"}],"owner":{"account_id":1125669,"reputation":1115,"user_id":1113009,"accept_rate":100,"display_name":"vinod"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":260233,"favorite_count":0,"down_vote_count":0,"up_vote_count":61,"accepted_answer_id":19978281,"answer_count":6,"score":61,"last_activity_date":1697241145,"creation_date":1384433022,"question_id":19977979,"body_markdown":"I am new to json. I am having a program to generate xml from json object. \r\n\r\n\r\n    String str = &quot;{&#39;name&#39;:&#39;JSON&#39;,&#39;integer&#39;:1,&#39;double&#39;:2.0,&#39;boolean&#39;:true,&#39;nested&#39;:{&#39;id&#39;:42},&#39;array&#39;:[1,2,3]}&quot;;  \r\n        JSON json = JSONSerializer.toJSON( str );  \r\n        XMLSerializer xmlSerializer = new XMLSerializer();  \r\n        xmlSerializer.setTypeHintsCompatibility( false );  \r\n        String xml = xmlSerializer.write( json );  \r\n        System.out.println(xml); \r\n    \r\nthe output is:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;o&gt;&lt;array json_class=&quot;array&quot;&gt;&lt;e json_type=&quot;number&quot;&gt;1&lt;/e&gt;&lt;e json_type=&quot;number&quot;&gt;2&lt;/e&gt;&lt;e json_type=&quot;number&quot;&gt;3&lt;/e&gt;&lt;/array&gt;&lt;boolean json_type=&quot;boolean&quot;&gt;true&lt;/boolean&gt;&lt;double json_type=&quot;number&quot;&gt;2.0&lt;/double&gt;&lt;integer json_type=&quot;number&quot;&gt;1&lt;/integer&gt;&lt;name json_type=&quot;string&quot;&gt;JSON&lt;/name&gt;&lt;nested json_class=&quot;object&quot;&gt;&lt;id json_type=&quot;number&quot;&gt;42&lt;/id&gt;&lt;/nested&gt;&lt;/o&gt;\r\n\r\n\r\nmy biggest problem is how to write my own attributes instead of json_type=&quot;number&quot; and also writing my own sub elements like &lt;e&gt;&lt;/e&gt;. \r\n","title":"Converting JSON to XML in Java","body":"<p>I am new to json. I am having a program to generate xml from json object. </p>\n\n<pre><code>String str = \"{'name':'JSON','integer':1,'double':2.0,'boolean':true,'nested':{'id':42},'array':[1,2,3]}\";  \n    JSON json = JSONSerializer.toJSON( str );  \n    XMLSerializer xmlSerializer = new XMLSerializer();  \n    xmlSerializer.setTypeHintsCompatibility( false );  \n    String xml = xmlSerializer.write( json );  \n    System.out.println(xml); \n</code></pre>\n\n<p>the output is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;o&gt;&lt;array json_class=\"array\"&gt;&lt;e json_type=\"number\"&gt;1&lt;/e&gt;&lt;e json_type=\"number\"&gt;2&lt;/e&gt;&lt;e json_type=\"number\"&gt;3&lt;/e&gt;&lt;/array&gt;&lt;boolean json_type=\"boolean\"&gt;true&lt;/boolean&gt;&lt;double json_type=\"number\"&gt;2.0&lt;/double&gt;&lt;integer json_type=\"number\"&gt;1&lt;/integer&gt;&lt;name json_type=\"string\"&gt;JSON&lt;/name&gt;&lt;nested json_class=\"object\"&gt;&lt;id json_type=\"number\"&gt;42&lt;/id&gt;&lt;/nested&gt;&lt;/o&gt;\n</code></pre>\n\n<p>my biggest problem is how to write my own attributes instead of json_type=\"number\" and also writing my own sub elements like . </p>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1697233099,"post_id":77290751,"comment_id":136259138,"body_markdown":"How is this different from [your previous question](https://stackoverflow.com/q/77289913/8681)?","body":"How is this different from <a href=\"https://stackoverflow.com/q/77289913/8681\">your previous question</a>?"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1697234062,"post_id":77290751,"comment_id":136259220,"body_markdown":"The &#39;previous question&#39; is about methods declared in an interface. Other than overridden from superclass, interface methods do not override parent implementations. So it is not entirely the same.","body":"The &#39;previous question&#39; is about methods declared in an interface. Other than overridden from superclass, interface methods do not override parent implementations. So it is not entirely the same."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697234156,"post_id":77290751,"comment_id":136259232,"body_markdown":"Here is a similar question and answer.  _https://stackoverflow.com/a/38554828/17758716_.","body":"Here is a similar question and answer.  <i><a href=\"https://stackoverflow.com/a/38554828/17758716\">stackoverflow.com/a/38554828/17758716</a></i>."},{"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"score":0,"creation_date":1697234846,"post_id":77290751,"comment_id":136259301,"body_markdown":"@Reilas This is not what I was looking for. This time, the declaring classes are the same for some reason.","body":"@Reilas This is not what I was looking for. This time, the declaring classes are the same for some reason."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1697235061,"post_id":77290751,"comment_id":136259318,"body_markdown":"You are overriding `e()` but changed the return type. That results in a synthetic method being generated (it&#39;s how covariant return types are implemented).","body":"You are overriding <code>e()</code> but changed the return type. That results in a synthetic method being generated (it&#39;s how covariant return types are implemented)."},{"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"score":0,"creation_date":1697235134,"post_id":77290751,"comment_id":136259324,"body_markdown":"@Slaw So how is it possible to see which method was defined in class B, not A? Why are both declaring classes the same when the second one was defined in class A?","body":"@Slaw So how is it possible to see which method was defined in class B, not A? Why are both declaring classes the same when the second one was defined in class A?"},{"owner":{"account_id":28943489,"reputation":100,"user_id":22169585,"display_name":"Jordan"},"score":1,"creation_date":1697236412,"post_id":77290751,"comment_id":136259434,"body_markdown":"The simplest way to understand this is that there isn&#39;t an override, they both exist. If you _absolutely_ need an override, then you should change both return types to `Object` and check if the return type is an `instanceof` String.","body":"The simplest way to understand this is that there isn&#39;t an override, they both exist. If you <i>absolutely</i> need an override, then you should change both return types to <code>Object</code> and check if the return type is an <code>instanceof</code> String."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1697452175,"post_id":77290751,"comment_id":136277367,"body_markdown":"When you call `B.class.getDeclaredMethods()` you only get methods whose `getDeclaringClass()` will return `B.class`. That’s already implied by the name of the method. It’s not clear how you can expect a method declared a `A` when you ask for methods declared in `B`.","body":"When you call <code>B.class.getDeclaredMethods()</code> you only get methods whose <code>getDeclaringClass()</code> will return <code>B.class</code>. That’s already implied by the name of the method. It’s not clear how you can expect a method declared a <code>A</code> when you ask for methods declared in <code>B</code>."}],"answers":[{"comments":[{"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"score":0,"creation_date":1697306704,"post_id":77291131,"comment_id":136264582,"body_markdown":"This doesn’t work. Both methods are declared in B.","body":"This doesn’t work. Both methods are declared in B."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697308363,"post_id":77291131,"comment_id":136264759,"body_markdown":"@DerekLi, so, I read your comment as well, I figured you may have misinterpreted it, so I added this answer.  You&#39;re saying it&#39;s incorrect, I don&#39;t know what to tell you.  If _e_ is _overridden_ in _B_ then the _&quot;declaring class&quot;_ would be _B_, and not _A_.","body":"@DerekLi, so, I read your comment as well, I figured you may have misinterpreted it, so I added this answer.  You&#39;re saying it&#39;s incorrect, I don&#39;t know what to tell you.  If <i>e</i> is <i>overridden</i> in <i>B</i> then the <i>&quot;declaring class&quot;</i> would be <i>B</i>, and not <i>A</i>."},{"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"score":0,"creation_date":1697308524,"post_id":77291131,"comment_id":136264778,"body_markdown":"Read my question. The declaring class of both the overridden and original method is B because it is synthetic.","body":"Read my question. The declaring class of both the overridden and original method is B because it is synthetic."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697310051,"post_id":77291131,"comment_id":136264913,"body_markdown":"@Derek, so check the _declaring class_ of B&#39;s method, _e_.  Which, if _overridden_ would return _B_.","body":"@Derek, so check the <i>declaring class</i> of B&#39;s method, <i>e</i>.  Which, if <i>overridden</i> would return <i>B</i>."},{"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"score":0,"creation_date":1697310829,"post_id":77291131,"comment_id":136264995,"body_markdown":"Quoting my answer:\n```Name: e\nDeclaring class: Main$B\nReturn type: java.lang.String\nName: e\nDeclaring class: Main$B\nReturn type: java.lang.Object```","body":"Quoting my answer: <code>Name: e Declaring class: Main$B Return type: java.lang.String Name: e Declaring class: Main$B Return type: java.lang.Object</code>"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697385155,"post_id":77291131,"comment_id":136270509,"body_markdown":"@DerekLi, At least, try the code.","body":"@DerekLi, At least, try the code."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697240904,"creation_date":1697240904,"answer_id":77291131,"question_id":77290751,"body_markdown":"Check the _declaring class_ against the _parent class_.\r\n\r\n```java\r\nB.class.getMethod(&quot;e&quot;).getDeclaringClass() != A.class\r\n```","title":"Difference between class method and superclass method","body":"<p>Check the <em>declaring class</em> against the <em>parent class</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>B.class.getMethod(&quot;e&quot;).getDeclaringClass() != A.class\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1697452510,"post_id":77291137,"comment_id":136277413,"body_markdown":"The nest feature does not change what you said; there are indeed no inner classes in the JVM, as the nest feature, contrary to its name, only permits access without implementing an actual inner class relationship. That’s still the compiler’s job.","body":"The nest feature does not change what you said; there are indeed no inner classes in the JVM, as the nest feature, contrary to its name, only permits access without implementing an actual inner class relationship. That’s still the compiler’s job."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697241053,"creation_date":1697241053,"answer_id":77291137,"question_id":77290751,"body_markdown":"You can&#39;t. You&#39;re possibly confused about what you&#39;re witnessing. Both of those methods are declared in B. You&#39;re not seeing the one declared in A! The reason there are 2 is.. some JLS/JVMS interactive weirdness that is unexpected. Possibly you knew that, in which case you can skip the first section.\r\n\r\n## Wait, what, 2 methods in B??\r\n\r\nYes, there really are 2 methods in B. There is a difference in how java (the language) works, and java (the virtual machine) works. As a trivial example, inner classes exist in java-the-language and do not exist&lt;sup&gt;1&lt;/sup&gt; in java-the-VM. Whenever this happens, javac needs to generate a bunch of extra code to &#39;fix it&#39;. Usually, these involve something called __synthetic members__ - methods (and, rarely, fields and constructors) that are made out of whole cloth by javac to make things work. These methods have the &#39;synthetic&#39; flag enabled and `javac` acts as if such things do not exist. However, the JVM (`java.exe`) doesn&#39;t take the synthetic flag into consideration whatsoever.\r\n\r\njavac generates an extra (synthetic) method when compiling B. That happens whenever you &#39;tighten&#39; the return type of a method you are overriding.\r\n\r\nThat&#39;s because java-the-language considers a method identity to be based on its name and its parameter types. However, java-the-VM is slightly different, in that it considers a method identity to be based on its name and its parameter types __and its return type__. Hence, in java, your `Object e()` from `A` and your `String e()` from `B` are considered the same method (as in, the one in B overrides the one in A), but at the JVM level, they are not.\r\n\r\nTo fix this conflict, javac generates a method. It compiles your B as if you wrote:\r\n\r\n```\r\npublic class B extends A {\r\n  @Override\r\n  public String e() { return &quot;hi&quot;; }\r\n\r\n  @Synthetic\r\n  public Object e() { return theOtherE(); }\r\n}\r\n```\r\n\r\nYou can literally see this: `javap -c -v B.class` after compiling it and this synthetic method will show up. With &#39;this is synthetic&#39; actually in the output of javap.\r\n\r\n__That__ is the &#39;second&#39; e() you are seeing in your code. You do not see A&#39;s `e()` method because `.getDeclaredMethods()` does not return any inherited methods, at all. `getMethods()` does (but only public ones).\r\n\r\n## So how do I get A&#39;s `e()` `java.lang.reflect.Method` object?\r\n\r\nThere _is_ a way to get a `Method` instance that represents that method. Including the notion that `md.getDeclaringClass()` would return A.\r\n\r\n`.getDeclaredMethods()` only returns methods declared in the class you call it on. `getMethods()` returns all methods a class has - even the ones it inherited - but only public/protected ones. There is no method that gets you all methods (including inherited ones) regardless of access level. We can see this:\r\n\r\n```\r\nclass Parent {\r\n  public void parentPublicMethod() {}\r\n  private void parentPrivateMethod() {}\r\n}\r\n\r\nclass Child extends Parent {\r\n  public void childPublicMethod() {}\r\n  private void childPrivateMethod() {}\r\n}\r\n\r\nclass Main {\r\n  public static void main(String[] args) throws Exception {\r\n    for (Method m : Child.class.getMethods()) {\r\n      System.out.println(&quot;getMethods: &quot; + m.getName());\r\n    }\r\n    for (Method m : Child.class.getDeclaredMethods()) {\r\n      System.out.println(&quot;getDeclaredMethods: &quot; + m.getName());\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThis prints:\r\n\r\n```\r\ngetMethods: childPublicMethod\r\ngetMethods: parentPublicMethod\r\ngetMethods: (every public method in Object, such as toString)\r\ngetDeclaredMethods: childPublicMethod\r\ngetDeclaredMethods: childPrivateMethod\r\n```\r\n\r\nThe one and only way you can get `parentPrivateMethod` to print is something like:\r\n\r\n```\r\nClass&lt;?&gt; c = Child.class;\r\nwhile (c != Object.class) {\r\n  for (Method m : c.getDeclaredMethods()) {\r\n    System.out.println(c.getName() + &quot;::&quot; + m.getName());\r\n  }\r\n  c = c.getSuperclass();\r\n}\r\n```\r\n\r\nthis will get you:\r\n\r\n```\r\nChild::childPublicMethod\r\nChild::childPrivateMethod\r\nParent::parentPublicMethod\r\nParent::parentPrivateMethod\r\n```\r\n\r\nNote that it is generally a bad idea to write code that tries to draw a distinction between whether a method is overridden or not. The only way to know that is to use reflection. Java programs do not normally care about it, it&#39;s bad practice to do so. Whatever reason you&#39;re asking this question, I&#39;m a bit afraid it&#39;s a bad idea, whatever you&#39;re thinking about using this for.\r\n\r\n\r\n-------\r\n\r\n[1] the nest mates feature makes this statement oversimplified (i.e. not exactly correct). But I can think of no other example that is likely to be somewhat familiar to even beginning java programmers.\r\n","title":"Difference between class method and superclass method","body":"<p>You can't. You're possibly confused about what you're witnessing. Both of those methods are declared in B. You're not seeing the one declared in A! The reason there are 2 is.. some JLS/JVMS interactive weirdness that is unexpected. Possibly you knew that, in which case you can skip the first section.</p>\n<h2>Wait, what, 2 methods in B??</h2>\n<p>Yes, there really are 2 methods in B. There is a difference in how java (the language) works, and java (the virtual machine) works. As a trivial example, inner classes exist in java-the-language and do not exist<sup>1</sup> in java-the-VM. Whenever this happens, javac needs to generate a bunch of extra code to 'fix it'. Usually, these involve something called <strong>synthetic members</strong> - methods (and, rarely, fields and constructors) that are made out of whole cloth by javac to make things work. These methods have the 'synthetic' flag enabled and <code>javac</code> acts as if such things do not exist. However, the JVM (<code>java.exe</code>) doesn't take the synthetic flag into consideration whatsoever.</p>\n<p>javac generates an extra (synthetic) method when compiling B. That happens whenever you 'tighten' the return type of a method you are overriding.</p>\n<p>That's because java-the-language considers a method identity to be based on its name and its parameter types. However, java-the-VM is slightly different, in that it considers a method identity to be based on its name and its parameter types <strong>and its return type</strong>. Hence, in java, your <code>Object e()</code> from <code>A</code> and your <code>String e()</code> from <code>B</code> are considered the same method (as in, the one in B overrides the one in A), but at the JVM level, they are not.</p>\n<p>To fix this conflict, javac generates a method. It compiles your B as if you wrote:</p>\n<pre><code>public class B extends A {\n  @Override\n  public String e() { return &quot;hi&quot;; }\n\n  @Synthetic\n  public Object e() { return theOtherE(); }\n}\n</code></pre>\n<p>You can literally see this: <code>javap -c -v B.class</code> after compiling it and this synthetic method will show up. With 'this is synthetic' actually in the output of javap.</p>\n<p><strong>That</strong> is the 'second' e() you are seeing in your code. You do not see A's <code>e()</code> method because <code>.getDeclaredMethods()</code> does not return any inherited methods, at all. <code>getMethods()</code> does (but only public ones).</p>\n<h2>So how do I get A's <code>e()</code> <code>java.lang.reflect.Method</code> object?</h2>\n<p>There <em>is</em> a way to get a <code>Method</code> instance that represents that method. Including the notion that <code>md.getDeclaringClass()</code> would return A.</p>\n<p><code>.getDeclaredMethods()</code> only returns methods declared in the class you call it on. <code>getMethods()</code> returns all methods a class has - even the ones it inherited - but only public/protected ones. There is no method that gets you all methods (including inherited ones) regardless of access level. We can see this:</p>\n<pre><code>class Parent {\n  public void parentPublicMethod() {}\n  private void parentPrivateMethod() {}\n}\n\nclass Child extends Parent {\n  public void childPublicMethod() {}\n  private void childPrivateMethod() {}\n}\n\nclass Main {\n  public static void main(String[] args) throws Exception {\n    for (Method m : Child.class.getMethods()) {\n      System.out.println(&quot;getMethods: &quot; + m.getName());\n    }\n    for (Method m : Child.class.getDeclaredMethods()) {\n      System.out.println(&quot;getDeclaredMethods: &quot; + m.getName());\n    }\n  }\n}\n</code></pre>\n<p>This prints:</p>\n<pre><code>getMethods: childPublicMethod\ngetMethods: parentPublicMethod\ngetMethods: (every public method in Object, such as toString)\ngetDeclaredMethods: childPublicMethod\ngetDeclaredMethods: childPrivateMethod\n</code></pre>\n<p>The one and only way you can get <code>parentPrivateMethod</code> to print is something like:</p>\n<pre><code>Class&lt;?&gt; c = Child.class;\nwhile (c != Object.class) {\n  for (Method m : c.getDeclaredMethods()) {\n    System.out.println(c.getName() + &quot;::&quot; + m.getName());\n  }\n  c = c.getSuperclass();\n}\n</code></pre>\n<p>this will get you:</p>\n<pre><code>Child::childPublicMethod\nChild::childPrivateMethod\nParent::parentPublicMethod\nParent::parentPrivateMethod\n</code></pre>\n<p>Note that it is generally a bad idea to write code that tries to draw a distinction between whether a method is overridden or not. The only way to know that is to use reflection. Java programs do not normally care about it, it's bad practice to do so. Whatever reason you're asking this question, I'm a bit afraid it's a bad idea, whatever you're thinking about using this for.</p>\n<hr />\n<p>[1] the nest mates feature makes this statement oversimplified (i.e. not exactly correct). But I can think of no other example that is likely to be somewhat familiar to even beginning java programmers.</p>\n"}],"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1697241053,"creation_date":1697232757,"question_id":77290751,"body_markdown":"I have code where I find all of the methods of the `B` class.\r\n```java\r\nimport java.lang.reflect.Method;\r\n\r\npublic class Main {\r\n\r\n    public static class A {\r\n        public Object e() { return new Object(); }\r\n    }\r\n\r\n    public static class B extends A {\r\n        @Override\r\n        public String e() { return &quot;hi&quot;; }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        for (Method md : B.class.getDeclaredMethods()) {\r\n            System.out.println(&quot;Name: &quot; + md.getName());\r\n            System.out.println(&quot;Declaring class: &quot; + md.getDeclaringClass().getName());\r\n            System.out.println(&quot;Return type: &quot; + md.getReturnType().getName());\r\n        }\r\n    }\r\n\r\n}\r\n```\r\nThis is what the code returns:\r\n```\r\nName: e\r\nDeclaring class: Main$B\r\nReturn type: java.lang.String\r\nName: e\r\nDeclaring class: Main$B\r\nReturn type: java.lang.Object\r\n```\r\nHowever, I cannot differentiate between the overrided method and the original one because they have the same declaring class. My question is: Without being given the code of the class, how do I find whether a method is inherited if it has a different return value than the superclass method.\r\n\r\n\r\nedit:\r\nThis is not the same as my previous question as it is about interfaces while this question is about inheritance.","title":"Difference between class method and superclass method","body":"<p>I have code where I find all of the methods of the <code>B</code> class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.reflect.Method;\n\npublic class Main {\n\n    public static class A {\n        public Object e() { return new Object(); }\n    }\n\n    public static class B extends A {\n        @Override\n        public String e() { return &quot;hi&quot;; }\n    }\n\n    public static void main(String[] args) {\n        for (Method md : B.class.getDeclaredMethods()) {\n            System.out.println(&quot;Name: &quot; + md.getName());\n            System.out.println(&quot;Declaring class: &quot; + md.getDeclaringClass().getName());\n            System.out.println(&quot;Return type: &quot; + md.getReturnType().getName());\n        }\n    }\n\n}\n</code></pre>\n<p>This is what the code returns:</p>\n<pre><code>Name: e\nDeclaring class: Main$B\nReturn type: java.lang.String\nName: e\nDeclaring class: Main$B\nReturn type: java.lang.Object\n</code></pre>\n<p>However, I cannot differentiate between the overrided method and the original one because they have the same declaring class. My question is: Without being given the code of the class, how do I find whether a method is inherited if it has a different return value than the superclass method.</p>\n<p>edit:\nThis is not the same as my previous question as it is about interfaces while this question is about inheritance.</p>\n"},{"tags":["java","integer","boolean","comparison","branchless"],"comments":[{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":3,"creation_date":1595956267,"post_id":63139315,"comment_id":111651397,"body_markdown":"*&quot;how would you write a similar solution&quot;* - Honestly, I think a better question is **why** would one write a similar solution?  This is the first I&#39;ve heard of &quot;branchless programming&quot; but from this example alone it looks like an endeavor to make code more esoteric/obtuse and difficult to support.","body":"<i>&quot;how would you write a similar solution&quot;</i> - Honestly, I think a better question is <b>why</b> would one write a similar solution?  This is the first I&#39;ve heard of &quot;branchless programming&quot; but from this example alone it looks like an endeavor to make code more esoteric/obtuse and difficult to support."},{"owner":{"account_id":123958,"reputation":109295,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"score":3,"creation_date":1595957592,"post_id":63139315,"comment_id":111652052,"body_markdown":"In Java, you&#39;re expected to trust the compiler to do optimizations of this level instead of trying to outsmart it. You should make code changes only when you observe the compiler is not generating the efficient code you expected it to generate.","body":"In Java, you&#39;re expected to trust the compiler to do optimizations of this level instead of trying to outsmart it. You should make code changes only when you observe the compiler is not generating the efficient code you expected it to generate."},{"owner":{"account_id":7970439,"reputation":2783,"user_id":6015339,"display_name":"Glains"},"score":2,"creation_date":1595958380,"post_id":63139315,"comment_id":111652459,"body_markdown":"Two find the smallest of two `int`, also consider to use `Math.min`, which is intrinsified.","body":"Two find the smallest of two <code>int</code>, also consider to use <code>Math.min</code>, which is intrinsified."},{"owner":{"account_id":18894667,"reputation":1124,"user_id":13784117,"display_name":"user13784117"},"score":1,"creation_date":1595986128,"post_id":63139315,"comment_id":111661537,"body_markdown":"@David - well, I never heard the term, but I do prefer &quot;not jumpy around programming&quot;.  For example, instead of `if (x) foo(&quot;this&quot;); else foo(&quot;that&quot;)` I write `foo(x ? this : that)` which better captures the meaning of what I am doing - calling a function with an argument that depends on `x`.","body":"@David - well, I never heard the term, but I do prefer &quot;not jumpy around programming&quot;.  For example, instead of <code>if (x) foo(&quot;this&quot;); else foo(&quot;that&quot;)</code> I write <code>foo(x ? this : that)</code> which better captures the meaning of what I am doing - calling a function with an argument that depends on <code>x</code>."},{"owner":{"account_id":18894667,"reputation":1124,"user_id":13784117,"display_name":"user13784117"},"score":0,"creation_date":1595986260,"post_id":63139315,"comment_id":111661557,"body_markdown":"But, &quot;multiplying by the result of a comparison&quot; is pretty ancient art, handy in the 1970s if you were stuck with a language that didn&#39;t have conditional expressions. I would not recommend it nowadays.","body":"But, &quot;multiplying by the result of a comparison&quot; is pretty ancient art, handy in the 1970s if you were stuck with a language that didn&#39;t have conditional expressions. I would not recommend it nowadays."},{"owner":{"account_id":7897391,"reputation":63,"user_id":5965597,"accept_rate":0,"display_name":"KiwiNinja"},"score":2,"creation_date":1602535083,"post_id":63139315,"comment_id":113746073,"body_markdown":"@David branchless programming can exponentially increase performance of a program (if done right), it is definitely not just &quot;an endeavor to make code more esoteric/obtuse&quot;, however, Joni is right, in Java, the compiler already makes a lot of these kind of optimizations in the background.","body":"@David branchless programming can exponentially increase performance of a program (if done right), it is definitely not just &quot;an endeavor to make code more esoteric/obtuse&quot;, however, Joni is right, in Java, the compiler already makes a lot of these kind of optimizations in the background."}],"owner":{"account_id":15985067,"reputation":368,"user_id":11535786,"display_name":"Ren&#233;"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1000,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1595956249,"answer_count":0,"score":3,"last_activity_date":1697238852,"creation_date":1595956056,"question_id":63139315,"body_markdown":"I recently heard about branchless programming and found some simple examples like:\r\n```\r\nint getSmaller( int a, int b )\r\n{\r\n    if ( a &lt; b )\r\n        return a;\r\n    else\r\n        return b;\r\n}\r\n```\r\nWhich can be written as\r\n```\r\nint getSmaller( int a, int b )\r\n{\r\n    return a * ( a &lt; b ) + b * ( b &lt;= a );\r\n}\r\n```\r\nThis all works because `a &lt; b` returns true/false or in cpp 1/0. I am mainly programming in Java in as far as I know true/false is not equal to 1/0 so how would you write a similar solution in Java","title":"Java Branchless Programming","body":"<p>I recently heard about branchless programming and found some simple examples like:</p>\n<pre><code>int getSmaller( int a, int b )\n{\n    if ( a &lt; b )\n        return a;\n    else\n        return b;\n}\n</code></pre>\n<p>Which can be written as</p>\n<pre><code>int getSmaller( int a, int b )\n{\n    return a * ( a &lt; b ) + b * ( b &lt;= a );\n}\n</code></pre>\n<p>This all works because <code>a &lt; b</code> returns true/false or in cpp 1/0. I am mainly programming in Java in as far as I know true/false is not equal to 1/0 so how would you write a similar solution in Java</p>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1589265169,"post_id":61745214,"comment_id":109216422,"body_markdown":"Are you sure that your index is refreshed after the first insert? What do you get when retrieving the [settings of the index](https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-get-settings.html) created as a result of the insertion?","body":"Are you sure that your index is refreshed after the first insert? What do you get when retrieving the <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-get-settings.html\" rel=\"nofollow noreferrer\">settings of the index</a> created as a result of the insertion?"},{"owner":{"account_id":1338998,"reputation":3368,"user_id":1281081,"accept_rate":90,"display_name":"AsfK"},"score":0,"creation_date":1589265916,"post_id":61745214,"comment_id":109216721,"body_markdown":"@Val, Thanks for your qucik repsonse, I add `GetSettingsRequest` and got an empty map, I edit the question and add a screenshot (GetSettingsRequest request = new GetSettingsRequest().indices(index);\nGetSettingsResponse getSettingsResponse = esPersistence.getESClient().indices().getSettings(request, RequestOptions.DEFAULT);)","body":"@Val, Thanks for your qucik repsonse, I add <code>GetSettingsRequest</code> and got an empty map, I edit the question and add a screenshot (GetSettingsRequest request = new GetSettingsRequest().indices(index); GetSettingsResponse getSettingsResponse = esPersistence.getESClient().indices().getSettings(request, RequestOptions.DEFAULT);)"},{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1589266546,"post_id":61745214,"comment_id":109216974,"body_markdown":"I&#39;m interested in the JSON on the first line","body":"I&#39;m interested in the JSON on the first line"},{"owner":{"account_id":1338998,"reputation":3368,"user_id":1281081,"accept_rate":90,"display_name":"AsfK"},"score":0,"creation_date":1589267386,"post_id":61745214,"comment_id":109217335,"body_markdown":"@Val, Thanks again, the json itself is regular json, pushed by bulks. move the `GetSettingsRequest` after the first insert. Thanks again!","body":"@Val, Thanks again, the json itself is regular json, pushed by bulks. move the <code>GetSettingsRequest</code> after the first insert. Thanks again!"},{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1589269241,"post_id":61745214,"comment_id":109218185,"body_markdown":"No, I meant the JSON that shows on the first line of your debug window","body":"No, I meant the JSON that shows on the first line of your debug window"},{"owner":{"account_id":1338998,"reputation":3368,"user_id":1281081,"accept_rate":90,"display_name":"AsfK"},"score":0,"creation_date":1589270154,"post_id":61745214,"comment_id":109218633,"body_markdown":"@Val I am sorry, but not sure I got you... the first line in the SettingsResponse is `{&quot;automationcdrdata&quot;:{&quot;settings&quot;:{&quot;index&quot;:{&quot;creation_date&quot;:&quot;1589270087249&quot;,&quot;number_of_shards&quot;:&quot;1&quot;,&quot;number_of_replicas&quot;:&quot;1&quot;,&quot;uuid&quot;:&quot;GHc9wg_FTn6sl1qPh4SmZg&quot;,&quot;version&quot;:{&quot;created&quot;:&quot;7060299&quot;},&quot;provided_name&quot;:&quot;automationcdrdata&quot;}}}}` do you mean for that? otherwise please guide me your steps, if you can...","body":"@Val I am sorry, but not sure I got you... the first line in the SettingsResponse is <code>{&quot;automationcdrdata&quot;:{&quot;settings&quot;:{&quot;index&quot;:{&quot;creation_date&quot;:&quot;&zwnj;&#8203;1589270087249&quot;,&quot;numb&zwnj;&#8203;er_of_shards&quot;:&quot;1&quot;,&quot;n&zwnj;&#8203;umber_of_replicas&quot;:&quot;&zwnj;&#8203;1&quot;,&quot;uuid&quot;:&quot;GHc9wg_FT&zwnj;&#8203;n6sl1qPh4SmZg&quot;,&quot;vers&zwnj;&#8203;ion&quot;:{&quot;created&quot;:&quot;706&zwnj;&#8203;0299&quot;},&quot;provided_nam&zwnj;&#8203;e&quot;:&quot;automationcdrdat&zwnj;&#8203;a&quot;}}}}</code> do you mean for that? otherwise please guide me your steps, if you can..."},{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1589270336,"post_id":61745214,"comment_id":109218710,"body_markdown":"Yes, that&#39;s what I wanted to see, if there was any `refresh_interval` being set in there. But that&#39;s not the case, so the default is `1s`","body":"Yes, that&#39;s what I wanted to see, if there was any <code>refresh_interval</code> being set in there. But that&#39;s not the case, so the default is <code>1s</code>"}],"answers":[{"tags":[],"owner":{"account_id":1338998,"reputation":3368,"user_id":1281081,"accept_rate":90,"display_name":"AsfK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1589293566,"creation_date":1589293566,"answer_id":61754274,"question_id":61745214,"body_markdown":"With a Speical thanks to David Pilato (from ES fourm) - need to refresh the index after the insert operation, like this:\r\n\r\n    client.indices().refresh(new RefreshRequest(index), RequestOptions.DEFAULT);\r\n\r\n[link][1].\r\n\r\n\r\n  [1]: https://discuss.elastic.co/t/cannot-found-inserted-document-after-delete-index/232225","title":"Cannot found inserted document after delete index","body":"<p>With a Speical thanks to David Pilato (from ES fourm) - need to refresh the index after the insert operation, like this:</p>\n\n<pre><code>client.indices().refresh(new RefreshRequest(index), RequestOptions.DEFAULT);\n</code></pre>\n\n<p><a href=\"https://discuss.elastic.co/t/cannot-found-inserted-document-after-delete-index/232225\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}],"owner":{"account_id":1338998,"reputation":3368,"user_id":1281081,"accept_rate":90,"display_name":"AsfK"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":61754274,"answer_count":1,"score":0,"last_activity_date":1697238731,"creation_date":1589264961,"question_id":61745214,"body_markdown":"I write a simple test validate duplicates are not exist, like this:\r\n\r\n    @Test\r\n    public void testSameDataNotPushedTwice() throws Exception {\r\n    \t// Do some logic\r\n    \t// index contains es index name\r\n    \t\r\n    \t// adding this line fail the test\r\n    \t// deleteOldData(esPersistence.getESClient(), index);\r\n    \tesPersistence.insert(cdrData);\r\n    \tesPersistence.insert(cdrData);\r\n    \r\n    \tSearchResponse searchResponse = getDataFromElastic(esPersistence.getESClient(), index);\r\n    \tassertThat(searchResponse.getHits().getHits().length).isEqualTo(1);\r\n    }\r\n\r\nAs you can see I push data to ES and check hits length equals 1.\r\n\r\nTest is passed when the delete line is in commnet.\r\n\r\nNow, I want to make sure there is no data from others tests, therefore I want to delete the index before the insert. The `delete` method works but search response return 0 hits after the insert.\r\n\r\nThe delete index method:\r\n\r\n    public static void deleteOldData(RestHighLevelClient client, String index) throws IOException {\r\n    \tGetIndexRequest request = new GetIndexRequest(index);\r\n    \tboolean exists = client.indices().exists(request, RequestOptions.DEFAULT);\r\n    \tif (exists) {\r\n    \t\tDeleteIndexRequest deleteRequest = new DeleteIndexRequest(index);\r\n    \t\tclient.indices().delete(deleteRequest, RequestOptions.DEFAULT);\r\n    \t}\r\n    }\r\n\r\nHighlights:\r\n\r\n - ES 7.6.2\r\n - The data is exist in ES.\r\n - Adding sleep not solve the problem (even for 10 seconds).\r\n - The search is working (document is found) while debugging.\r\n\r\n**Bottom line:** How can I perform delete index --&gt; insert --&gt; search and found the documents?\r\n\r\nEdit\r\n---\r\n\r\nAdd insert to ES and GetSettingsRequest:\r\n\r\n    deleteOldData(esPersistence.getESClient(), index);\r\n    esPersistence.insert(testData);\r\n    \r\n    GetSettingsRequest request = new GetSettingsRequest().indices(index);\r\n    GetSettingsResponse getSettingsResponse = esPersistence.getESClient().indices().getSettings(request, RequestOptions.DEFAULT);\r\n    \r\n    esPersistence.insert(testData);\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nInsert methods:\r\n\r\n    public boolean insert(List&lt;ProjectData&gt; projDataList) {\r\n    \t// Relevant Lines\r\n    \tBulkRequest bulkRequest = prepareBulkRequests(projDataList, esConfiguration.getCdrDataIndexName());\r\n    \tinsertBulk(bulkRequest)\r\n    }\r\n    \r\n    private BulkRequest prepareBulkRequests(List&lt;ProjectData&gt; data, String indexName) {\r\n    \tBulkRequest bulkRequest = new BulkRequest();\r\n    \tfor (ProjectData ProjectData : data) {\r\n    \t\tString json = jsonParser.parsePojo(ProjectData);\r\n    \r\n    \t\tbulkRequest.add(new IndexRequest(indexName)\r\n    \t\t\t\t.id(ProjectData.getId())\r\n    \t\t\t\t.source(json, XContentType.JSON));\r\n    \t}\r\n    \r\n    \treturn bulkRequest;\r\n    }\r\n    \r\n    private boolean insertBulk(BulkRequest bulkRequest) {\r\n    \ttry {\r\n    \t\tBulkResponse bulkResponse = rhlClient.bulk(bulkRequest, RequestOptions.DEFAULT);\r\n    \r\n    \t\tif (bulkResponse.hasFailures()) {\r\n    \t\t\tlogger.error(buildCustomBulkFailedMessage(bulkResponse));\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \r\n    \t} catch (IOException e) {\r\n    \t\tlogger.warn(&quot;Failed to insert csv fields. Error: {}&quot;, e.getMessage());\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \treturn true;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gIw9r.png\r\n","title":"Cannot found inserted document after delete index","body":"<p>I write a simple test validate duplicates are not exist, like this:</p>\n<pre><code>@Test\npublic void testSameDataNotPushedTwice() throws Exception {\n    // Do some logic\n    // index contains es index name\n    \n    // adding this line fail the test\n    // deleteOldData(esPersistence.getESClient(), index);\n    esPersistence.insert(cdrData);\n    esPersistence.insert(cdrData);\n\n    SearchResponse searchResponse = getDataFromElastic(esPersistence.getESClient(), index);\n    assertThat(searchResponse.getHits().getHits().length).isEqualTo(1);\n}\n</code></pre>\n<p>As you can see I push data to ES and check hits length equals 1.</p>\n<p>Test is passed when the delete line is in commnet.</p>\n<p>Now, I want to make sure there is no data from others tests, therefore I want to delete the index before the insert. The <code>delete</code> method works but search response return 0 hits after the insert.</p>\n<p>The delete index method:</p>\n<pre><code>public static void deleteOldData(RestHighLevelClient client, String index) throws IOException {\n    GetIndexRequest request = new GetIndexRequest(index);\n    boolean exists = client.indices().exists(request, RequestOptions.DEFAULT);\n    if (exists) {\n        DeleteIndexRequest deleteRequest = new DeleteIndexRequest(index);\n        client.indices().delete(deleteRequest, RequestOptions.DEFAULT);\n    }\n}\n</code></pre>\n<p>Highlights:</p>\n<ul>\n<li>ES 7.6.2</li>\n<li>The data is exist in ES.</li>\n<li>Adding sleep not solve the problem (even for 10 seconds).</li>\n<li>The search is working (document is found) while debugging.</li>\n</ul>\n<p><strong>Bottom line:</strong> How can I perform delete index --&gt; insert --&gt; search and found the documents?</p>\n<h2>Edit</h2>\n<p>Add insert to ES and GetSettingsRequest:</p>\n<pre><code>deleteOldData(esPersistence.getESClient(), index);\nesPersistence.insert(testData);\n\nGetSettingsRequest request = new GetSettingsRequest().indices(index);\nGetSettingsResponse getSettingsResponse = esPersistence.getESClient().indices().getSettings(request, RequestOptions.DEFAULT);\n\nesPersistence.insert(testData);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gIw9r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gIw9r.png\" alt=\"enter image description here\" /></a></p>\n<p>Insert methods:</p>\n<pre><code>public boolean insert(List&lt;ProjectData&gt; projDataList) {\n    // Relevant Lines\n    BulkRequest bulkRequest = prepareBulkRequests(projDataList, esConfiguration.getCdrDataIndexName());\n    insertBulk(bulkRequest)\n}\n\nprivate BulkRequest prepareBulkRequests(List&lt;ProjectData&gt; data, String indexName) {\n    BulkRequest bulkRequest = new BulkRequest();\n    for (ProjectData ProjectData : data) {\n        String json = jsonParser.parsePojo(ProjectData);\n\n        bulkRequest.add(new IndexRequest(indexName)\n                .id(ProjectData.getId())\n                .source(json, XContentType.JSON));\n    }\n\n    return bulkRequest;\n}\n\nprivate boolean insertBulk(BulkRequest bulkRequest) {\n    try {\n        BulkResponse bulkResponse = rhlClient.bulk(bulkRequest, RequestOptions.DEFAULT);\n\n        if (bulkResponse.hasFailures()) {\n            logger.error(buildCustomBulkFailedMessage(bulkResponse));\n            return false;\n        }\n\n    } catch (IOException e) {\n        logger.warn(&quot;Failed to insert csv fields. Error: {}&quot;, e.getMessage());\n        return false;\n    }\n\n    return true;\n}\n</code></pre>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"score":0,"creation_date":1697179740,"post_id":77285575,"comment_id":136249799,"body_markdown":"well, if you are  new to  spring and maven , you should have a look about quickstart  both of them . to slove the scenario   you  encoutering is  that  right click the path ```src/main/java  ``` and ```Mark dictory as source Root``` ,the same way  on   ```src/main/resource``` , and mark it as resource root","body":"well, if you are  new to  spring and maven , you should have a look about quickstart  both of them . to slove the scenario   you  encoutering is  that  right click the path <code>src&#47;main&#47;java  </code> and <code>Mark dictory as source Root</code> ,the same way  on   <code>src&#47;main&#47;resource</code> , and mark it as resource root"},{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1697180534,"post_id":77285575,"comment_id":136249917,"body_markdown":"hi @Peng I don&#39;t see that option, rightclicking on source folder  https://ibb.co/t8RLc9m","body":"hi @Peng I don&#39;t see that option, rightclicking on source folder  <a href=\"https://ibb.co/t8RLc9m\" rel=\"nofollow noreferrer\">ibb.co/t8RLc9m</a>"},{"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"score":0,"creation_date":1697180940,"post_id":77285575,"comment_id":136249969,"body_markdown":"may be your  IDEA  version is not supprt this feature , mine  idea version is ```IntelliJ IDEA 2023.2.2 (Community Edition)```","body":"may be your  IDEA  version is not supprt this feature , mine  idea version is <code>IntelliJ IDEA 2023.2.2 (Community Edition)</code>"}],"answers":[{"tags":[],"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697236743,"creation_date":1697179978,"answer_id":77285627,"question_id":77285575,"body_markdown":"#### Recently  Answer \r\nright-click directory and then mark directory as source root or resource root. If there is no  ```mark as ```  in your  IDEA  , please update your IDEA version ,  my version is ```IntelliJ IDEA 2023.2.2 (Community Edition)```","title":"IntelliJ Spring Boot Initializer with Maven: Yellow Background Project Files","body":"<h4>Recently  Answer</h4>\n<p>right-click directory and then mark directory as source root or resource root. If there is no  <code>mark as </code>  in your  IDEA  , please update your IDEA version ,  my version is <code>IntelliJ IDEA 2023.2.2 (Community Edition)</code></p>\n"},{"tags":[],"owner":{"account_id":28411028,"reputation":416,"user_id":21734429,"display_name":"romanv-jb"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697198925,"creation_date":1697198925,"answer_id":77287602,"question_id":77285575,"body_markdown":"Here&#39;s the general [list of IDEA&#39;s color codes][1] and [scope coloring][2].\r\n\r\nIt looks like IDEA considers all files and folders &quot;Non-Project Files&quot;, which normally only applies to SDKs and 3rd party libraries.\r\n\r\nThis might be a side-effect of the failed Project build/import, as seen on the first screenshot.\r\nSeems like Maven is failing to resolve the dependencies.\r\n\r\nThere might be more issues, not shown on the screenshot.\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/file-status-highlights.html\r\n  [2]: https://www.jetbrains.com/help/idea/configuring-scopes-and-file-colors.html","title":"IntelliJ Spring Boot Initializer with Maven: Yellow Background Project Files","body":"<p>Here's the general <a href=\"https://www.jetbrains.com/help/idea/file-status-highlights.html\" rel=\"nofollow noreferrer\">list of IDEA's color codes</a> and <a href=\"https://www.jetbrains.com/help/idea/configuring-scopes-and-file-colors.html\" rel=\"nofollow noreferrer\">scope coloring</a>.</p>\n<p>It looks like IDEA considers all files and folders &quot;Non-Project Files&quot;, which normally only applies to SDKs and 3rd party libraries.</p>\n<p>This might be a side-effect of the failed Project build/import, as seen on the first screenshot.\nSeems like Maven is failing to resolve the dependencies.</p>\n<p>There might be more issues, not shown on the screenshot.</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77285627,"answer_count":2,"score":0,"last_activity_date":1697236743,"creation_date":1697179407,"question_id":77285575,"body_markdown":"I used Spring boot initializer and created a Project. I tried opening with IntelliJ, but my project files background is yellow. I have Java and Maven installed. How can I fix this?\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nThis resource did not provide solution: https://stackoverflow.com/questions/69468250/webstorm-yellowish-project-folders\r\n\r\nCurrently using Windows.\r\nI cannot even get the project to run, no option provided. I don&#39;t see option &quot;Mark Directory as Source Root&quot; [![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\nUpdate: Opened Maven files as an Intelli Project, it removes the red lines in pom.xml file, but still cannot run it and yellow background files.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4YsLU.png\r\n  [2]: https://i.stack.imgur.com/Cxf3n.png\r\n  [3]: https://i.stack.imgur.com/hKGNS.png\r\n  [4]: https://i.stack.imgur.com/IP8nU.png","title":"IntelliJ Spring Boot Initializer with Maven: Yellow Background Project Files","body":"<p>I used Spring boot initializer and created a Project. I tried opening with IntelliJ, but my project files background is yellow. I have Java and Maven installed. How can I fix this?</p>\n<p><a href=\"https://i.stack.imgur.com/4YsLU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4YsLU.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Cxf3n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cxf3n.png\" alt=\"enter image description here\" /></a></p>\n<p>This resource did not provide solution: <a href=\"https://stackoverflow.com/questions/69468250/webstorm-yellowish-project-folders\">WebStorm yellowish project folders</a></p>\n<p>Currently using Windows.\nI cannot even get the project to run, no option provided. I don't see option &quot;Mark Directory as Source Root&quot; <a href=\"https://i.stack.imgur.com/hKGNS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hKGNS.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/IP8nU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IP8nU.png\" alt=\"enter image description here\" /></a></p>\n<p>Update: Opened Maven files as an Intelli Project, it removes the red lines in pom.xml file, but still cannot run it and yellow background files.</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1697177437,"post_id":77284122,"comment_id":136249461,"body_markdown":"Create a Java fiddle here - https://javafiddle.leaningtech.com/ or anywhere - and share with test data. Above code has missing method implementations of `countNeighbors`, `neighbors`, and maynot be much important, but `printGrid` too.","body":"Create a Java fiddle here - <a href=\"https://javafiddle.leaningtech.com/\" rel=\"nofollow noreferrer\">javafiddle.leaningtech.com</a> or anywhere - and share with test data. Above code has missing method implementations of <code>countNeighbors</code>, <code>neighbors</code>, and maynot be much important, but <code>printGrid</code> too."}],"owner":{"account_id":29659849,"reputation":1,"user_id":22731682,"display_name":"Ydpatel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697236301,"creation_date":1697149388,"question_id":77284122,"body_markdown":"I am trying to use BFS to find the shortest path to a spot in a 2x2 array. However, I am coming across an issue where my HashMap is always entering null values so I can&#39;t iterate through the HashMap to get the values I need. I&#39;m not sure if my code shows enough for this and I know it isn&#39;t the best when it comes to structuring and coding, but I just want to know why the HashMap is only holding null values. \r\n\r\nThe code works fine until I need to add values to the arraylist once the button is found. In the while loop where the &quot;nextSpot&quot; != &quot;button&quot;, I am getting only null values and also when I tried printing the values of the HashMap at the end of the while loop, it still only had null values.\r\n\r\nIt&#39;s not a matter of the return null statement at the end either, I just put that there because I assumed that the function would work properly regardless.\r\n\r\n\r\n```\r\n    public static ArrayList&lt;int[]&gt; BFSBOT1(char[][] array, int[] bot, int[] button){\r\n        printGrid(array, array.length);\r\n        Queue&lt;int[]&gt; queue = new LinkedList&lt;&gt;();\r\n        HashMap&lt;int[], int[]&gt; mapOfEverything = new HashMap&lt;&gt;();\r\n        boolean[][] visited = new boolean[array.length][array.length];\r\n\r\n        queue.add(bot);\r\n        visited[bot[0]][bot[1]] = true;\r\n        \r\n\r\n        while(!queue.isEmpty()){\r\n            \r\n            int[] nextSpot = queue.remove();\r\n\r\n\r\n            if(nextSpot[0] == button[0] &amp;&amp; nextSpot[1] == button[1]){\r\n                ArrayList&lt;int[]&gt; shortestPath = new ArrayList&lt;&gt;();\r\n                int[] path = button;\r\n                while(path[0] != bot[0] &amp;&amp; path[1] != bot[1]){\r\n                    shortestPath.add(path);\r\n                    path = mapOfEverything.get(path);\r\n                }\r\n                return shortestPath;\r\n\r\n            }\r\n            int neighbors = countNeighbors(array, array.length, nextSpot[0], nextSpot[1]);\r\n            Queue &lt;int[]&gt; neighborQueue = neighbors(array, array.length,nextSpot[0] ,nextSpot[1]);\r\n\r\n            for(int i = 0; i &lt; neighbors; i++){\r\n                int[] variable1 = neighborQueue.remove();\r\n                int c = variable1[0];\r\n                int d = variable1[1];\r\n\r\n                if(variable1[0] == button[0] &amp;&amp; variable1[1] == button[1]){\r\n                    queue.clear();\r\n                    queue.add(variable1);\r\n                    break;\r\n                }\r\n\r\n                if(!visited[variable1[0]][variable1[1]]){\r\n                    queue.add(variable1);\r\n                    mapOfEverything.put(nextSpot, variable1);\r\n                    visited[variable1[0]][variable1[1]] = true;\r\n\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n        return null;\r\n    }\r\n````\r\n\r\n\r\nI&#39;ve tried different things like changing names, using specific points and just many different things but nothing seemed to work. I don&#39;t really understand why the HashMap doesn&#39;t contain any actual int[] values.","title":"Hashmaps and BFS","body":"<p>I am trying to use BFS to find the shortest path to a spot in a 2x2 array. However, I am coming across an issue where my HashMap is always entering null values so I can't iterate through the HashMap to get the values I need. I'm not sure if my code shows enough for this and I know it isn't the best when it comes to structuring and coding, but I just want to know why the HashMap is only holding null values.</p>\n<p>The code works fine until I need to add values to the arraylist once the button is found. In the while loop where the &quot;nextSpot&quot; != &quot;button&quot;, I am getting only null values and also when I tried printing the values of the HashMap at the end of the while loop, it still only had null values.</p>\n<p>It's not a matter of the return null statement at the end either, I just put that there because I assumed that the function would work properly regardless.</p>\n<pre><code>    public static ArrayList&lt;int[]&gt; BFSBOT1(char[][] array, int[] bot, int[] button){\n        printGrid(array, array.length);\n        Queue&lt;int[]&gt; queue = new LinkedList&lt;&gt;();\n        HashMap&lt;int[], int[]&gt; mapOfEverything = new HashMap&lt;&gt;();\n        boolean[][] visited = new boolean[array.length][array.length];\n\n        queue.add(bot);\n        visited[bot[0]][bot[1]] = true;\n        \n\n        while(!queue.isEmpty()){\n            \n            int[] nextSpot = queue.remove();\n\n\n            if(nextSpot[0] == button[0] &amp;&amp; nextSpot[1] == button[1]){\n                ArrayList&lt;int[]&gt; shortestPath = new ArrayList&lt;&gt;();\n                int[] path = button;\n                while(path[0] != bot[0] &amp;&amp; path[1] != bot[1]){\n                    shortestPath.add(path);\n                    path = mapOfEverything.get(path);\n                }\n                return shortestPath;\n\n            }\n            int neighbors = countNeighbors(array, array.length, nextSpot[0], nextSpot[1]);\n            Queue &lt;int[]&gt; neighborQueue = neighbors(array, array.length,nextSpot[0] ,nextSpot[1]);\n\n            for(int i = 0; i &lt; neighbors; i++){\n                int[] variable1 = neighborQueue.remove();\n                int c = variable1[0];\n                int d = variable1[1];\n\n                if(variable1[0] == button[0] &amp;&amp; variable1[1] == button[1]){\n                    queue.clear();\n                    queue.add(variable1);\n                    break;\n                }\n\n                if(!visited[variable1[0]][variable1[1]]){\n                    queue.add(variable1);\n                    mapOfEverything.put(nextSpot, variable1);\n                    visited[variable1[0]][variable1[1]] = true;\n\n\n                }\n            }\n\n        }\n        return null;\n    }\n</code></pre>\n<p>I've tried different things like changing names, using specific points and just many different things but nothing seemed to work. I don't really understand why the HashMap doesn't contain any actual int[] values.</p>\n"},{"tags":["java","xml","maven"],"answers":[{"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1470483416,"creation_date":1470483416,"answer_id":38803851,"question_id":38803802,"body_markdown":"That is a reference to a property. It might be defined in the same pom like for example with:\r\n\r\n    &lt;properties&gt;\r\n      &lt;org.springframework.version&gt;a.b.c&lt;/org.springframework.version&gt;\r\n    &lt;/properties&gt;\r\n\r\nIf you do not find it in the pom.xml, check parent poms, it might be defined there.","title":"Where does Maven get the values of variables surrounded by ${}?","body":"<p>That is a reference to a property. It might be defined in the same pom like for example with:</p>\n\n<pre><code>&lt;properties&gt;\n  &lt;org.springframework.version&gt;a.b.c&lt;/org.springframework.version&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>If you do not find it in the pom.xml, check parent poms, it might be defined there.</p>\n"}],"owner":{"account_id":1021562,"reputation":26350,"user_id":1031769,"accept_rate":78,"display_name":"Searene"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":38803851,"answer_count":1,"score":2,"last_activity_date":1697236280,"creation_date":1470483166,"question_id":38803802,"body_markdown":"I often see something like this:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nWhere exactly does Maven get the value of `org.springframework.version` from? Does it mean the latest version?\r\n","title":"Where does Maven get the values of variables surrounded by ${}?","body":"<p>I often see something like this:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n    &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Where exactly does Maven get the value of <code>org.springframework.version</code> from? Does it mean the latest version?</p>\n"},{"tags":["java","spring-boot","ffmpeg","http-live-streaming","playlist"],"answers":[{"comments":[{"owner":{"account_id":5052350,"reputation":663,"user_id":4632971,"accept_rate":50,"display_name":"Ph33ly"},"score":0,"creation_date":1579633063,"post_id":59847312,"comment_id":105828687,"body_markdown":"When watching the playlist it doesn&#39;t seem to be grabbing the updated playlist and ts files though. So it just plays a single video instead of a stream.","body":"When watching the playlist it doesn&#39;t seem to be grabbing the updated playlist and ts files though. So it just plays a single video instead of a stream."}],"tags":[],"owner":{"account_id":14892907,"reputation":62,"user_id":10754044,"display_name":"Ankit Yadav"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579632020,"creation_date":1579632020,"answer_id":59847312,"question_id":59847199,"body_markdown":"With Spring 4.1 your approach will work there is no issue in it. Here below is another approach in case if you want to look \r\n\r\n   \r\n\r\n     @RequestMapping(value = &quot;/VMS-49001/playlist/{listName:.+}&quot;)\r\n        public ResponseEntity&lt;byte[]&gt; testphoto() throws IOException {\r\n        InputStream in = servletContext.getResourceAsStream(&quot;/images/no_image.jpg&quot;);\r\n    \r\n        final HttpHeaders headers = new HttpHeaders();\r\n      \r\n    \r\n        headers.setContentType(MediaType.parseMediaType(&quot;application/vnd.apple.mpegurl&quot;));\r\n        headers.setContentDispositionFormData(fileName, fileName);\r\n        \r\n        return new ResponseEntity&lt;byte[]&gt;(IOUtils.toByteArray(in), headers, HttpStatus.CREATED);\r\n        }","title":"Spring Boot serving an m3u8 playlist","body":"<p>With Spring 4.1 your approach will work there is no issue in it. Here below is another approach in case if you want to look </p>\n\n<pre><code> @RequestMapping(value = \"/VMS-49001/playlist/{listName:.+}\")\n    public ResponseEntity&lt;byte[]&gt; testphoto() throws IOException {\n    InputStream in = servletContext.getResourceAsStream(\"/images/no_image.jpg\");\n\n    final HttpHeaders headers = new HttpHeaders();\n\n\n    headers.setContentType(MediaType.parseMediaType(\"application/vnd.apple.mpegurl\"));\n    headers.setContentDispositionFormData(fileName, fileName);\n\n    return new ResponseEntity&lt;byte[]&gt;(IOUtils.toByteArray(in), headers, HttpStatus.CREATED);\n    }\n</code></pre>\n"}],"owner":{"account_id":5052350,"reputation":663,"user_id":4632971,"accept_rate":50,"display_name":"Ph33ly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1649,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697236225,"creation_date":1579631563,"question_id":59847199,"body_markdown":"I&#39;m trying to serve an m3u8 playlist through Spring Boot. I have a running ffmpeg process that is transcoding a multicast in real-time and sending the files to /src/resources/public/output.m3u8. I see the playlist updating and the new .ts files being generated correctly however when trying to watch the stream in a video player, it only plays a certain amount of video. Is there a way to properly serve up a running playlist in Java instead of serving it statically?\r\n\r\n\r\nEDIT: When starting a basic http server with python `python3 -m http.server`, I&#39;m able to view the stream perfectly fine. Is there a Spring Boot way to accomplish the same task?","title":"Spring Boot serving an m3u8 playlist","body":"<p>I'm trying to serve an m3u8 playlist through Spring Boot. I have a running ffmpeg process that is transcoding a multicast in real-time and sending the files to /src/resources/public/output.m3u8. I see the playlist updating and the new .ts files being generated correctly however when trying to watch the stream in a video player, it only plays a certain amount of video. Is there a way to properly serve up a running playlist in Java instead of serving it statically?</p>\n\n<p>EDIT: When starting a basic http server with python <code>python3 -m http.server</code>, I'm able to view the stream perfectly fine. Is there a Spring Boot way to accomplish the same task?</p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1697369522,"post_id":77290924,"comment_id":136268854,"body_markdown":"Mixing several spring boot versions that does not work...parent 3.1.4 while `pring-boot-starter-web` .. `2.4.2` also using `javax.persistence` or `javax.servlet`.. instead of jakarta ones... and `spring-security-config:4.1.3.RELEASE`? fist clean that up...","body":"Mixing several spring boot versions that does not work...parent 3.1.4 while <code>pring-boot-starter-web</code> .. <code>2.4.2</code> also using <code>javax.persistence</code> or <code>javax.servlet</code>.. instead of jakarta ones... and <code>spring-security-config:4.1.3.RELEASE</code>? fist clean that up..."}],"owner":{"account_id":27097500,"reputation":1,"user_id":20644542,"display_name":"Leslie Tientcheu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697235761,"creation_date":1697235515,"question_id":77290924,"body_markdown":"I just started a new project on maven and I this error that I have solved but can&#39;t. java: cannot access org.springframework.security.authentication.encoding.PasswordEncoder class file for org.springframework.security.authentication.encoding.PasswordEncoder not found\r\n\r\n&lt;!-- begin snippet: POM.XML hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-XML --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.4&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;LiveScoreData&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;LiveScoreData&lt;/name&gt;\r\n        &lt;description&gt;LiveScoreData&lt;/description&gt;\r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;17&lt;/java.version&gt;\r\n            &lt;spring-cloud-azure.version&gt;5.5.0&lt;/spring-cloud-azure.version&gt;\r\n            &lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.xerial&lt;/groupId&gt;\r\n                &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\r\n                &lt;version&gt;3.43.2.0&lt;/version&gt; &lt;!-- use the latest version --&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.2&lt;/version&gt; &lt;!-- Use the appropriate version --&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-integration&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.yaml&lt;/groupId&gt;\r\n                &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0&lt;/version&gt; &lt;!-- Use a newer, non-vulnerable version --&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n                &lt;version&gt;4.1.3.RELEASE&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.1&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-azure-starter&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-azure-starter-actuator&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-azure-starter-integration-storage-queue&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-azure-starter-jdbc-mysql&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-azure-starter-jdbc-postgresql&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-azure-starter-storage&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-integration-http&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-integration-jdbc&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-integration-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-integration-security&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-integration-stomp&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-integration-webflux&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-integration-websocket&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-integration-ws&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-session-jdbc&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n                &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n                &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n                &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n                &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\r\n                &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-integration-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-restdocs-mockmvc&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                    &lt;type&gt;pom&lt;/type&gt;\r\n                    &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-azure-dependencies&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring-cloud-azure.version}&lt;/version&gt;\r\n                    &lt;type&gt;pom&lt;/type&gt;\r\n                    &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.asciidoctor&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;asciidoctor-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.2.1&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;generate-docs&lt;/id&gt;\r\n                            &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;process-asciidoc&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;backend&gt;html&lt;/backend&gt;\r\n                                &lt;doctype&gt;book&lt;/doctype&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                    &lt;dependencies&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-restdocs-asciidoctor&lt;/artifactId&gt;\r\n                            &lt;version&gt;${spring-restdocs.version}&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/dependencies&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;excludes&gt;\r\n                            &lt;exclude&gt;\r\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;/exclude&gt;\r\n                        &lt;/excludes&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n\r\n    &lt;/project&gt;\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nI just started a new project on maven and I this error that I have solved but can&#39;t.\r\njava: cannot access org.springframework.security.authentication.encoding.PasswordEncoder\r\nclass file for org.springframework.security.authentication.encoding.PasswordEncoder not found\r\n\r\n```\r\npackage com.example.LiveScoreData.config;\r\n\r\nimport com.example.LiveScoreData.service.CustomUserDetailsService;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    private final CustomUserDetailsService userDetailsService;\r\n\r\n    public WebSecurityConfig(CustomUserDetailsService userDetailsService) {\r\n        this.userDetailsService = userDetailsService;\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                // Removed .csrf().disable() to re-enable CSRF protection\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/&quot;, &quot;/home&quot;, &quot;/resources/**&quot;).permitAll() // Assuming &quot;/resources/**&quot; is your static resources path; adjust as necessary\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .formLogin()\r\n                .loginPage(&quot;/login&quot;)\r\n                .defaultSuccessUrl(&quot;/dashboard&quot;, true) // Redirect to dashboard after successful login; adjust the path as necessary\r\n                .permitAll()\r\n                .and()\r\n                .logout()\r\n                .permitAll()\r\n                .logoutSuccessUrl(&quot;/login?logout&quot;) // Redirect to login page with query param after logout\r\n                .and()\r\n                .exceptionHandling().accessDeniedPage(&quot;/access-denied&quot;); // Provide an access-denied page or handler\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder(); // Changed return type to PasswordEncoder interface\r\n    }\r\n\r\n    @Override\r\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth\r\n                .userDetailsService(userDetailsService)\r\n                .passwordEncoder(passwordEncoder());\r\n    }\r\n}\r\n```","title":"java cannot access org.springframework.security.authentication.encoding.PasswordEncoder","body":"<p>I just started a new project on maven and I this error that I have solved but can't. java: cannot access org.springframework.security.authentication.encoding.PasswordEncoder class file for org.springframework.security.authentication.encoding.PasswordEncoder not found</p>\n\n<pre class=\"lang-XML prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;LiveScoreData&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;LiveScoreData&lt;/name&gt;\n    &lt;description&gt;LiveScoreData&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud-azure.version&gt;5.5.0&lt;/spring-cloud-azure.version&gt;\n        &lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;version&gt;2.4.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.xerial&lt;/groupId&gt;\n            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;3.43.2.0&lt;/version&gt; &lt;!-- use the latest version --&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt; &lt;!-- Use the appropriate version --&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-integration&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.yaml&lt;/groupId&gt;\n            &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\n            &lt;version&gt;2.0&lt;/version&gt; &lt;!-- Use a newer, non-vulnerable version --&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n            &lt;version&gt;4.1.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-azure-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-azure-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-azure-starter-integration-storage-queue&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-azure-starter-jdbc-mysql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-azure-starter-jdbc-postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-azure-starter-storage&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-integration-http&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-integration-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-integration-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-integration-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-integration-stomp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-integration-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-integration-websocket&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-integration-ws&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-session-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-integration-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-restdocs-mockmvc&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-azure-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud-azure.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.asciidoctor&lt;/groupId&gt;\n                &lt;artifactId&gt;asciidoctor-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.2.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;generate-docs&lt;/id&gt;\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;process-asciidoc&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;backend&gt;html&lt;/backend&gt;\n                            &lt;doctype&gt;book&lt;/doctype&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-restdocs-asciidoctor&lt;/artifactId&gt;\n                        &lt;version&gt;${spring-restdocs.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>I just started a new project on maven and I this error that I have solved but can't.\njava: cannot access org.springframework.security.authentication.encoding.PasswordEncoder\nclass file for org.springframework.security.authentication.encoding.PasswordEncoder not found</p>\n<pre><code>package com.example.LiveScoreData.config;\n\nimport com.example.LiveScoreData.service.CustomUserDetailsService;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private final CustomUserDetailsService userDetailsService;\n\n    public WebSecurityConfig(CustomUserDetailsService userDetailsService) {\n        this.userDetailsService = userDetailsService;\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                // Removed .csrf().disable() to re-enable CSRF protection\n                .authorizeRequests()\n                .antMatchers(&quot;/&quot;, &quot;/home&quot;, &quot;/resources/**&quot;).permitAll() // Assuming &quot;/resources/**&quot; is your static resources path; adjust as necessary\n                .anyRequest().authenticated()\n                .and()\n                .formLogin()\n                .loginPage(&quot;/login&quot;)\n                .defaultSuccessUrl(&quot;/dashboard&quot;, true) // Redirect to dashboard after successful login; adjust the path as necessary\n                .permitAll()\n                .and()\n                .logout()\n                .permitAll()\n                .logoutSuccessUrl(&quot;/login?logout&quot;) // Redirect to login page with query param after logout\n                .and()\n                .exceptionHandling().accessDeniedPage(&quot;/access-denied&quot;); // Provide an access-denied page or handler\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder(); // Changed return type to PasswordEncoder interface\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth\n                .userDetailsService(userDetailsService)\n                .passwordEncoder(passwordEncoder());\n    }\n}\n</code></pre>\n"},{"tags":["java","java.util.scanner","txt","enter"],"comments":[{"owner":{"account_id":1262633,"reputation":22925,"user_id":1220550,"display_name":"Peter B"},"score":1,"creation_date":1697233304,"post_id":77290640,"comment_id":136259158,"body_markdown":"javascript != java. Make sure you tag correctly.","body":"javascript != java. Make sure you tag correctly."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1697235238,"post_id":77290640,"comment_id":136259331,"body_markdown":"Welcome to Stack Overflow.\nPlease take the [tour] to learn how Stack Overflow works and read [ask] on how to improve the quality of your question.\nThen [edit] your question to include your source code as a working [mcve], which can be compiled and tested by others.","body":"Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how Stack Overflow works and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> on how to improve the quality of your question. Then <a href=\"https://stackoverflow.com/posts/77290640/edit\">edit</a> your question to include your source code as a working <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which can be compiled and tested by others."}],"answers":[{"comments":[{"owner":{"display_name":"user22737329"},"score":0,"creation_date":1697235157,"post_id":77290700,"comment_id":136259326,"body_markdown":"i did do /n, i just typed in the question wrong","body":"i did do /n, i just typed in the question wrong"}],"tags":[],"owner":{"account_id":21885866,"reputation":98,"user_id":16173510,"display_name":"harsh Kanodiya"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697232038,"creation_date":1697232038,"answer_id":77290700,"question_id":77290640,"body_markdown":"The correct escape sequence for a newline character is &quot;\\n&quot; (not &quot;/n&quot;), and you should use it within double quotes, not slashes.\r\n\r\n    Scanner scanner = new Scanner(new File(&quot;your_file.txt&quot;));\r\n\r\n    while (scanner.hasNext()) {\r\n    String line = scanner.nextLine();\r\n    // Process the line here\r\n    }\r\n\r\n    scanner.close();\r\nThe hasNext() method is a method provided by the java.util.Scanner class. It is used to check if there is another token available for reading from the input source, which could be a file, a stream, or other sources","title":"How to skip an enter using scanner?","body":"<p>The correct escape sequence for a newline character is &quot;\\n&quot; (not &quot;/n&quot;), and you should use it within double quotes, not slashes.</p>\n<pre><code>Scanner scanner = new Scanner(new File(&quot;your_file.txt&quot;));\n\nwhile (scanner.hasNext()) {\nString line = scanner.nextLine();\n// Process the line here\n}\n\nscanner.close();\n</code></pre>\n<p>The hasNext() method is a method provided by the java.util.Scanner class. It is used to check if there is another token available for reading from the input source, which could be a file, a stream, or other sources</p>\n"}],"owner":{"display_name":"user22737329"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1697235283,"creation_date":1697231113,"question_id":77290640,"body_markdown":"I&#39;ve been using a scanner to read a text file but get this output.\r\n\r\n[f, \r\n\r\n, \r\n\r\n, f, \r\n\r\n, \r\n\r\n, f, \r\n\r\n, \r\n\r\n, f, \r\n\r\n, \r\n\r\n, f]\r\n\r\nThe text file characters are all separated by enters. \r\n\r\nI&#39;ve tried using scanner.skip(&quot;\\n&quot;);, but that throws the NoSuchElementException. How do I fix it?\r\nThe loop:\r\n\r\n    File file = new File(&quot;src/crossword/squares/&quot; + Crossword + &quot;.txt&quot;);\r\n    ArrayList&lt;String&gt; values = new ArrayList&lt;String&gt;();\r\n    \t\tScanner scanner;\r\n    \twhile(scanner.hasNext())\r\n    \t\t\t{\r\n    \t\t\t\tscanner.skip(&quot;\\n&quot;);\r\n    \t\t\t\tscanner.useDelimiter(&quot;&quot;);\r\n    \t\t\t\tString value = scanner.next();\r\n    \t\t\t\tvalues.add(value);\r\n    \t\t\t}\r\n    \t\t} catch(FileNotFoundException e) {\r\n    \t\te.printStackTrace();\r\n    \t\t\r\n    \t\t}","title":"How to skip an enter using scanner?","body":"<p>I've been using a scanner to read a text file but get this output.</p>\n<p>[f,</p>\n<p>,</p>\n<p>, f,</p>\n<p>,</p>\n<p>, f,</p>\n<p>,</p>\n<p>, f,</p>\n<p>,</p>\n<p>, f]</p>\n<p>The text file characters are all separated by enters.</p>\n<p>I've tried using scanner.skip(&quot;\\n&quot;);, but that throws the NoSuchElementException. How do I fix it?\nThe loop:</p>\n<pre><code>File file = new File(&quot;src/crossword/squares/&quot; + Crossword + &quot;.txt&quot;);\nArrayList&lt;String&gt; values = new ArrayList&lt;String&gt;();\n        Scanner scanner;\n    while(scanner.hasNext())\n            {\n                scanner.skip(&quot;\\n&quot;);\n                scanner.useDelimiter(&quot;&quot;);\n                String value = scanner.next();\n                values.add(value);\n            }\n        } catch(FileNotFoundException e) {\n        e.printStackTrace();\n        \n        }\n</code></pre>\n"},{"tags":["java","swing","awt","alpha","jlayeredpane"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1697229641,"post_id":77290411,"comment_id":136258748,"body_markdown":"Did you make the child components transparent first (`setOpaque(false)`) - otherwise Swing will NOT paint what&#39;s beneath the components.  For better answers, provide a [mcve]","body":"Did you make the child components transparent first (<code>setOpaque(false)</code>) - otherwise Swing will NOT paint what&#39;s beneath the components.  For better answers, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"answers":[{"tags":[],"owner":{"account_id":258174,"reputation":5849,"user_id":540173,"accept_rate":83,"display_name":"Madoc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697234820,"creation_date":1697234820,"answer_id":77290881,"question_id":77290411,"body_markdown":"Sorry for the confusion, I was stupid. I took a screenshot and analyzed the colors and found out that there is no issue at all.\r\n\r\nMy intuitive color &quot;arithmetics&quot; was wrong: If you put a 50% blue over a 50% green, the result is not cyan. You don&#39;t get half green, half blue.\r\n\r\nInstead, what you get is 50% blue and 25% green. Because the green layer is at 50% alpha already, and it passes through another alpha of 50%. Those two need to get multiplied.","title":"JLayeredPane alpha composition not working","body":"<p>Sorry for the confusion, I was stupid. I took a screenshot and analyzed the colors and found out that there is no issue at all.</p>\n<p>My intuitive color &quot;arithmetics&quot; was wrong: If you put a 50% blue over a 50% green, the result is not cyan. You don't get half green, half blue.</p>\n<p>Instead, what you get is 50% blue and 25% green. Because the green layer is at 50% alpha already, and it passes through another alpha of 50%. Those two need to get multiplied.</p>\n"}],"owner":{"account_id":258174,"reputation":5849,"user_id":540173,"accept_rate":83,"display_name":"Madoc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697234820,"creation_date":1697227956,"question_id":77290411,"body_markdown":"TL;DR\r\n---\r\n\r\nWhen I stack multiple layers of components on top of each other using `JLayeredPane`, alpha composition does not work. Wherever there are multiple pixels on top of each other, each with an alpha color, only the topmost gets displayed, ignoring the alpha colors of the layers below.\r\n\r\nBasic setup\r\n---\r\n\r\nI have a `JLayeredPane` with several layers. Each layer displays a grid of components with their own `paint` method. All components have `setOpaque(false)`.\r\n\r\nPositive observation\r\n---\r\n\r\nDrawing images containing **fully** transparent colors in the different layers works as expected: For each pixel, only the color value of the topmost non-transparent layer is shown.\r\n\r\nNegative observation\r\n---\r\n\r\nWhen combining several layers where there is a semi-transparent pixel on each layer for a given coordinate, i.e. a color with an alpha value of 50%, only the topmost pixel seems to be shown.\r\n\r\nA top-layer alpha pixel *does* combine with a lower-layer opaque-colored pixel however. If the top-layer pixel is semi-transparent and a pixel on a layer below is fully opaque (alpha = 0%), then both pixels combine correctly.\r\n\r\nI made an image full of 50% alpha blue, which I show on the top layer. In the layer below, there is an image full of 50% alpha green. Those two should combine to cyan, but the `JLayeredPane` only displays blue in these places, the top-level color.\r\n\r\nThe same effect occurs when I use a custom `paint` method with `g.fillRect` and a semi-transparent color, instead of the images.\r\n\r\nHow can I make sure that my `JLayeredPane` combines the colors of multiple semi-transparent layers correctly?","title":"JLayeredPane alpha composition not working","body":"<h2>TL;DR</h2>\n<p>When I stack multiple layers of components on top of each other using <code>JLayeredPane</code>, alpha composition does not work. Wherever there are multiple pixels on top of each other, each with an alpha color, only the topmost gets displayed, ignoring the alpha colors of the layers below.</p>\n<h2>Basic setup</h2>\n<p>I have a <code>JLayeredPane</code> with several layers. Each layer displays a grid of components with their own <code>paint</code> method. All components have <code>setOpaque(false)</code>.</p>\n<h2>Positive observation</h2>\n<p>Drawing images containing <strong>fully</strong> transparent colors in the different layers works as expected: For each pixel, only the color value of the topmost non-transparent layer is shown.</p>\n<h2>Negative observation</h2>\n<p>When combining several layers where there is a semi-transparent pixel on each layer for a given coordinate, i.e. a color with an alpha value of 50%, only the topmost pixel seems to be shown.</p>\n<p>A top-layer alpha pixel <em>does</em> combine with a lower-layer opaque-colored pixel however. If the top-layer pixel is semi-transparent and a pixel on a layer below is fully opaque (alpha = 0%), then both pixels combine correctly.</p>\n<p>I made an image full of 50% alpha blue, which I show on the top layer. In the layer below, there is an image full of 50% alpha green. Those two should combine to cyan, but the <code>JLayeredPane</code> only displays blue in these places, the top-level color.</p>\n<p>The same effect occurs when I use a custom <code>paint</code> method with <code>g.fillRect</code> and a semi-transparent color, instead of the images.</p>\n<p>How can I make sure that my <code>JLayeredPane</code> combines the colors of multiple semi-transparent layers correctly?</p>\n"},{"tags":["java","floating-point","modulo"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":5,"creation_date":1361558988,"post_id":15031138,"comment_id":21122976,"body_markdown":"[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html).","body":"<a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>."},{"owner":{"account_id":2315554,"reputation":2566,"user_id":2032712,"display_name":"El Hocko"},"score":2,"creation_date":1361559098,"post_id":15031138,"comment_id":21123038,"body_markdown":"why are you guys all downvoting this, you need a deep understandig of floating point arithmetics to understand this..","body":"why are you guys all downvoting this, you need a deep understandig of floating point arithmetics to understand this.."},{"owner":{"account_id":17619,"reputation":15368,"user_id":39622,"accept_rate":78,"display_name":"Cyrille Ka"},"score":3,"creation_date":1361559275,"post_id":15031138,"comment_id":21123128,"body_markdown":"There&#39;s nothing very deep in &quot;float/double represents real numbers in a few bytes and they have to do approximations to do so.&quot;. That&#39;s basic computer science.","body":"There&#39;s nothing very deep in &quot;float/double represents real numbers in a few bytes and they have to do approximations to do so.&quot;. That&#39;s basic computer science."},{"owner":{"account_id":2315554,"reputation":2566,"user_id":2032712,"display_name":"El Hocko"},"score":0,"creation_date":1361559421,"post_id":15031138,"comment_id":21123195,"body_markdown":"@CyrilleKarmann ok.. knowing that is very easy, understanding that is quite harder.. but it&#39;s quiet hard to fully understand the article Pshemo posted...","body":"@CyrilleKarmann ok.. knowing that is very easy, understanding that is quite harder.. but it&#39;s quiet hard to fully understand the article Pshemo posted..."},{"owner":{"account_id":17619,"reputation":15368,"user_id":39622,"accept_rate":78,"display_name":"Cyrille Ka"},"score":0,"creation_date":1361559853,"post_id":15031138,"comment_id":21123446,"body_markdown":"I agree that the linked article is quite hard to digest for a beginner.","body":"I agree that the linked article is quite hard to digest for a beginner."},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1361560384,"post_id":15031138,"comment_id":21123705,"body_markdown":"The problem is that your CompSci 101 instructor failed, in the second or third day of class, to explain the representation of numbers (not just floating point), and the implications thereof.  (Or perhaps you slept through that class?)","body":"The problem is that your CompSci 101 instructor failed, in the second or third day of class, to explain the representation of numbers (not just floating point), and the implications thereof.  (Or perhaps you slept through that class?)"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1361560543,"post_id":15031138,"comment_id":21123785,"body_markdown":"(And it should be pointed out that 3.14 is a lousy approximation of pi.)","body":"(And it should be pointed out that 3.14 is a lousy approximation of pi.)"},{"owner":{"account_id":161962,"reputation":16675,"user_id":383124,"accept_rate":56,"display_name":"phant0m"},"score":0,"creation_date":1362393054,"post_id":15031138,"comment_id":21417464,"body_markdown":"@cIph3r Don&#39;t worry if you don&#39;t understand the article. It&#39;s one of those &quot;often linked, rarely read&quot;-kind of things.","body":"@cIph3r Don&#39;t worry if you don&#39;t understand the article. It&#39;s one of those &quot;often linked, rarely read&quot;-kind of things."}],"answers":[{"comments":[{"owner":{"account_id":133463,"reputation":32149,"user_id":334849,"accept_rate":100,"display_name":"LittleBobbyTables - Au Revoir"},"score":8,"creation_date":1361559069,"post_id":15031157,"comment_id":21123024,"body_markdown":"&quot;Precision issues&quot; makes it sound like a bug; it&#39;s not an issue, it&#39;s a floating point.","body":"&quot;Precision issues&quot; makes it sound like a bug; it&#39;s not an issue, it&#39;s a floating point."},{"owner":{"account_id":2315554,"reputation":2566,"user_id":2032712,"display_name":"El Hocko"},"score":0,"creation_date":1361560345,"post_id":15031157,"comment_id":21123691,"body_markdown":"And BigDecimal does not solve this:\n\n`import java.math.BigDecimal;\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tfinal BigDecimal d = new BigDecimal(5.55);\n\t\tfinal BigDecimal APPROXPI = new BigDecimal(3.14);\n\t\tSystem.out.println(d.remainder(APPROXPI));\n\t\t//2.409999999999999698019337301957421004772186279296875\n\t}\n}`","body":"And BigDecimal does not solve this:  <code>import java.math.BigDecimal; public class Main { \tpublic static void main(String[] args) { \t\tfinal BigDecimal d = new BigDecimal(5.55); \t\tfinal BigDecimal APPROXPI = new BigDecimal(3.14); \t\tSystem.out.println(d.remainder(APPROXPI)); \t\t&#47;&#47;2.409999999999999698019337301957421004772186279296875 \t} }</code>"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1361565380,"post_id":15031157,"comment_id":21126090,"body_markdown":"@cIph3r actually BigDecimal solves it, but we need to use String representation of numbers in constructor arguments like `BigDecimal(&quot;5.55&quot;)` and `BigDecimal(&quot;3.14&quot;)` to get precise values. Take a look at [this explanation](http://www.youtube.com/watch?feature=player_detailpage&amp;v=wbp-3BJWsU8#t=373s).","body":"@cIph3r actually BigDecimal solves it, but we need to use String representation of numbers in constructor arguments like <code>BigDecimal(&quot;5.55&quot;)</code> and <code>BigDecimal(&quot;3.14&quot;)</code> to get precise values. Take a look at <a href=\"http://www.youtube.com/watch?feature=player_detailpage&amp;v=wbp-3BJWsU8#t=373s\" rel=\"nofollow noreferrer\">this explanation</a>."},{"owner":{"account_id":2315554,"reputation":2566,"user_id":2032712,"display_name":"El Hocko"},"score":0,"creation_date":1361567531,"post_id":15031157,"comment_id":21127082,"body_markdown":"@Pshemo nice, this works:\n`import java.math.BigDecimal;\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tfinal BigDecimal d = new BigDecimal(&quot;5.55&quot;);\n\t\tfinal BigDecimal APPROXPI = new BigDecimal(&quot;3.14&quot;);\n\t\tSystem.out.println(d.remainder(APPROXPI));\t\t\t\n\t}\n\t\n}`\n\nAnd it absolutely makes sense","body":"@Pshemo nice, this works: <code>import java.math.BigDecimal; public class Main { \tpublic static void main(String[] args) { \t\tfinal BigDecimal d = new BigDecimal(&quot;5.55&quot;); \t\tfinal BigDecimal APPROXPI = new BigDecimal(&quot;3.14&quot;); \t\tSystem.out.println(d.remainder(APPROXPI));\t\t\t \t} \t }</code>  And it absolutely makes sense"}],"tags":[],"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1361558997,"creation_date":1361558997,"answer_id":15031157,"question_id":15031138,"body_markdown":"Java double can have precision issues.\r\n\r\nWhy don&#39;t you try `BigDecimal` ?","title":"Java modulo operator produces inexact result","body":"<p>Java double can have precision issues.</p>\n\n<p>Why don't you try <code>BigDecimal</code> ?</p>\n"},{"comments":[{"owner":{"account_id":2315554,"reputation":2566,"user_id":2032712,"display_name":"El Hocko"},"score":1,"creation_date":1361559839,"post_id":15031237,"comment_id":21123438,"body_markdown":"well, actually this does not really solve the problem, \nthe decimal formatter just rounds the inaccuracy away...\n\n`DecimalFormat df = new DecimalFormat(&quot;##.###################&quot;);`\nwill show you..","body":"well, actually this does not really solve the problem,  the decimal formatter just rounds the inaccuracy away...  <code>DecimalFormat df = new DecimalFormat(&quot;##.###################&quot;);</code> will show you.."},{"owner":{"account_id":280103,"reputation":3821,"user_id":575615,"accept_rate":59,"display_name":"Medo42"},"score":0,"creation_date":1361560092,"post_id":15031237,"comment_id":21123557,"body_markdown":"To be fair, under many circumstances this is a completely acceptable solution.","body":"To be fair, under many circumstances this is a completely acceptable solution."}],"tags":[],"owner":{"account_id":2403418,"reputation":114,"user_id":2100566,"display_name":"ThePr0gr4mm3r"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1361559810,"creation_date":1361559268,"answer_id":15031237,"question_id":15031138,"body_markdown":"    import java.text.DecimalFormat;\r\n\r\n    double d = 5.55%3.14;       \r\n    DecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\r\n    System.out.println( df.format( d ));\r\n\r\nAdd DecimalFormat\r\n\r\nEdit:\r\n\r\nYou can also\r\n\r\n        double d = 5.55%3.14;\r\n        System.out.printf(&quot;%1$.2f&quot;, d);","title":"Java modulo operator produces inexact result","body":"<pre><code>import java.text.DecimalFormat;\n\ndouble d = 5.55%3.14;       \nDecimalFormat df = new DecimalFormat(\"#.##\");\nSystem.out.println( df.format( d ));\n</code></pre>\n\n<p>Add DecimalFormat</p>\n\n<p>Edit:</p>\n\n<p>You can also</p>\n\n<pre><code>    double d = 5.55%3.14;\n    System.out.printf(\"%1$.2f\", d);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":280103,"reputation":3821,"user_id":575615,"accept_rate":59,"display_name":"Medo42"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1361559624,"creation_date":1361559624,"answer_id":15031332,"question_id":15031138,"body_markdown":"The problem is not the modulo operator, but rather the nature of floating point numbers. A double cannot hold the precise value of either 5.55, 3.14 or 2.41, so you get an approximate answer.\r\n\r\nTo understand this better, try to write down the value of 1/3 as a decimal, when you only have limited space on the paper to write it. You&#39;ll end up with something like `0.33333`, which is an approximation of the actual value. The same happens to 5.55 when you write it in binary - it turns into `101.10001100110011001100110011...` which gets cut off somewhere to fit the space of the double.","title":"Java modulo operator produces inexact result","body":"<p>The problem is not the modulo operator, but rather the nature of floating point numbers. A double cannot hold the precise value of either 5.55, 3.14 or 2.41, so you get an approximate answer.</p>\n\n<p>To understand this better, try to write down the value of 1/3 as a decimal, when you only have limited space on the paper to write it. You'll end up with something like <code>0.33333</code>, which is an approximation of the actual value. The same happens to 5.55 when you write it in binary - it turns into <code>101.10001100110011001100110011...</code> which gets cut off somewhere to fit the space of the double.</p>\n"},{"tags":[],"owner":{"account_id":2311755,"reputation":568,"user_id":2029739,"display_name":"Jeff Hawthorne"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1361559888,"creation_date":1361559888,"answer_id":15031405,"question_id":15031138,"body_markdown":"the reason is that java doesn&#39;t do math the way we do. java uses binary numbers (from chapter 4 of Horstmann&#39;s big java book) so to a computer, 435 = 4 * 10^2 + 3 * 10^1 + 5 * 10^0\r\n\r\nit does this because binary numbers (1 or 0) are easier to manipulate since switches in the computer are either on or off (1 or 0).\r\n\r\nthis results in occassional rounding issues. if you want to force it to round, then do things like use a decimal format, or if you just need the displayed value rounded you can use String.format or printf","title":"Java modulo operator produces inexact result","body":"<p>the reason is that java doesn't do math the way we do. java uses binary numbers (from chapter 4 of Horstmann's big java book) so to a computer, 435 = 4 * 10^2 + 3 * 10^1 + 5 * 10^0</p>\n\n<p>it does this because binary numbers (1 or 0) are easier to manipulate since switches in the computer are either on or off (1 or 0).</p>\n\n<p>this results in occassional rounding issues. if you want to force it to round, then do things like use a decimal format, or if you just need the displayed value rounded you can use String.format or printf</p>\n"}],"owner":{"account_id":943706,"reputation":1167,"user_id":971371,"accept_rate":6,"display_name":"AbhinavChoudhury"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":390,"favorite_count":0,"down_vote_count":4,"up_vote_count":4,"closed_date":1361563198,"answer_count":4,"score":0,"last_activity_date":1697234704,"creation_date":1361558915,"question_id":15031138,"body_markdown":"Why does this code print &lt;strong&gt;2.4099999999999997&lt;/strong&gt;, instead of just 2.41?\r\n\r\n\r\n    public class Main\r\n    {\r\n    \tpublic static void main(String args[])\r\n    \t{\r\n    \t\tdouble d = 5.55%3.14;\r\n    \t\tSystem.out.println(d);\r\n    \t}\r\n    }\r\n\r\n","title":"Java modulo operator produces inexact result","body":"<p>Why does this code print <strong>2.4099999999999997</strong>, instead of just 2.41?</p>\n<pre><code>public class Main\n{\n    public static void main(String args[])\n    {\n        double d = 5.55%3.14;\n        System.out.println(d);\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","circular-dependency","corba","jacorb"],"owner":{"account_id":20847162,"reputation":894,"user_id":15312420,"display_name":"Mehdi Charife"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697233583,"creation_date":1697232823,"question_id":77290757,"body_markdown":"I&#39;m trying to build [JacORB][1] via Maven under version 17 of the JDK. I&#39;ve run the command `mvn clean install` as instructed in page 14 of the [docs][2], but got the following error: \r\n\r\n```\r\n[ERROR] /home/mehdi/JacORB/idl-compiler/src/main/java/org/jacorb/idl/StructType.java:[146,29] package org.omg.CORBA does not exist\r\n```\r\nThe error seems to originate from the `idl-compiler` module.\r\nThe block that corresponds to the error is this: \r\n\r\n```\r\npublic int getTCKind() {\r\n    return org.omg.CORBA.TCKind._tk_struct;\r\n}\r\n```\r\n\r\nThe package `org.omg.CORBA` seems to exist under the module `omgapi` of the same project, so I thought to try and include this module as a dependency in the pom file of `idl-compiler` as follows:\r\n\r\n```\r\n&lt;dependency&gt;\r\n     &lt;groupId&gt;org.jacorb&lt;/groupId&gt;\r\n     &lt;artifactId&gt;jacorb-omgapi&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nHowever, after running `mvn clean install` I got a complaint about cyclic dependencies:\r\n\r\n&gt; [ERROR] [ERROR] The projects in the reactor contain a cyclic\r\n&gt; reference: Edge between\r\n&gt; &#39;Vertex{label=&#39;org.jacorb:jacorb-idl-compiler:3.10-SNAPSHOT&#39;}&#39; and\r\n&gt; &#39;Vertex{label=&#39;org.jacorb:jacorb-omgapi:3.10-SNAPSHOT&#39;}&#39; introduces to\r\n&gt; cycle in the graph org.jacorb:jacorb-omgapi:3.10-SNAPSHOT --&gt;\r\n&gt; org.jacorb:jacorb-idl-compiler:3.10-SNAPSHOT --&gt;\r\n&gt; org.jacorb:jacorb-omgapi:3.10-SNAPSHOT @\r\n\r\nThis doesn&#39;t seem to make sense as the pom file of the module `omgapi` doesn&#39;t have any `&lt;dependencies&gt;`. Is there a way to solve this? \r\n\r\nI also tried to remove the dependency and then execute the command:\r\n```\r\nmvn clean install -Dorg.omg.CORBA.ORBClass=org.jacorb.orb.ORB\r\n```\r\nBut got the same error indicating that there is no `org.omg.CORBA` package.\r\n\r\nNot sure if this might be helpful, but when I `echo $JAVA_HOME` I get the following result: \r\n\r\n```\r\n/usr/lib/jvm/java-17-openjdk-amd64\r\n```\r\n  [1]: https://github.com/JacORB/JacORB/tree/master\r\n  [2]: https://www.jacorb.org/releases/3.9/ProgrammingGuide.pdf","title":"Maven complains that &quot;org.omg.CORBA&quot; does not exist while trying to build JacORB","body":"<p>I'm trying to build <a href=\"https://github.com/JacORB/JacORB/tree/master\" rel=\"nofollow noreferrer\">JacORB</a> via Maven under version 17 of the JDK. I've run the command <code>mvn clean install</code> as instructed in page 14 of the <a href=\"https://www.jacorb.org/releases/3.9/ProgrammingGuide.pdf\" rel=\"nofollow noreferrer\">docs</a>, but got the following error:</p>\n<pre><code>[ERROR] /home/mehdi/JacORB/idl-compiler/src/main/java/org/jacorb/idl/StructType.java:[146,29] package org.omg.CORBA does not exist\n</code></pre>\n<p>The error seems to originate from the <code>idl-compiler</code> module.\nThe block that corresponds to the error is this:</p>\n<pre><code>public int getTCKind() {\n    return org.omg.CORBA.TCKind._tk_struct;\n}\n</code></pre>\n<p>The package <code>org.omg.CORBA</code> seems to exist under the module <code>omgapi</code> of the same project, so I thought to try and include this module as a dependency in the pom file of <code>idl-compiler</code> as follows:</p>\n<pre><code>&lt;dependency&gt;\n     &lt;groupId&gt;org.jacorb&lt;/groupId&gt;\n     &lt;artifactId&gt;jacorb-omgapi&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>However, after running <code>mvn clean install</code> I got a complaint about cyclic dependencies:</p>\n<blockquote>\n<p>[ERROR] [ERROR] The projects in the reactor contain a cyclic\nreference: Edge between\n'Vertex{label='org.jacorb:jacorb-idl-compiler:3.10-SNAPSHOT'}' and\n'Vertex{label='org.jacorb:jacorb-omgapi:3.10-SNAPSHOT'}' introduces to\ncycle in the graph org.jacorb:jacorb-omgapi:3.10-SNAPSHOT --&gt;\norg.jacorb:jacorb-idl-compiler:3.10-SNAPSHOT --&gt;\norg.jacorb:jacorb-omgapi:3.10-SNAPSHOT @</p>\n</blockquote>\n<p>This doesn't seem to make sense as the pom file of the module <code>omgapi</code> doesn't have any <code>&lt;dependencies&gt;</code>. Is there a way to solve this?</p>\n<p>I also tried to remove the dependency and then execute the command:</p>\n<pre><code>mvn clean install -Dorg.omg.CORBA.ORBClass=org.jacorb.orb.ORB\n</code></pre>\n<p>But got the same error indicating that there is no <code>org.omg.CORBA</code> package.</p>\n<p>Not sure if this might be helpful, but when I <code>echo $JAVA_HOME</code> I get the following result:</p>\n<pre><code>/usr/lib/jvm/java-17-openjdk-amd64\n</code></pre>\n"},{"tags":["java","xml","spring-boot","maven","enunciate"],"owner":{"account_id":15450425,"reputation":227,"user_id":11145980,"display_name":"MPK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697233211,"creation_date":1697233211,"question_id":77290784,"body_markdown":"\r\n\r\nI&#39;m encountering an issue with the Enunciate Maven plugin while trying to generate documentation for my Java project. I recently upgraded the Enunciate Maven Plugin from version 2.13.3 to 2.14.0, and when running the `enunciate:docs` goal, I get the following error message:\r\n\r\n```xml\r\n[ERROR] Failed to execute goal com.webcohesion.enunciate:enunciate-maven-plugin:2.14.0:docs (default) on project EnunciateDocs: Error invoking Enunciate.: java.lang.NoClassDefFoundError: com/webcohesion/enunciate/metadata/rs/JakartaResourceMethodSignature\r\n```\r\n\r\nMy project is a Java application with JAX-RS (Jakarta API) annotations.\r\nI&#39;ve upgraded the Enunciate Maven Plugin from version 2.13.3 to 2.14.0.\r\n\r\nPOM Configuration:\r\n```\r\n&lt;build&gt;\r\n    &lt;plugins&gt;\r\n        &lt;!-- Enunciate Maven Plugin --&gt;\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;com.webcohesion.enunciate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;enunciate-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.14.0&lt;/version&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;docs&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;!-- the directory where to put the docs --&gt;\r\n                        &lt;docsDir&gt;./docs&lt;/docsDir&gt;\r\n                        &lt;configFile&gt;./enunciate.xml&lt;/configFile&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.3.3&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n\r\n\r\n","title":"Enunciate Maven Plugin Error: `java.lang.NoClassDefFoundError` for `JakartaResourceMethodSignature` When Upgrading from 2.13.3 to 2.14.0","body":"<p>I'm encountering an issue with the Enunciate Maven plugin while trying to generate documentation for my Java project. I recently upgraded the Enunciate Maven Plugin from version 2.13.3 to 2.14.0, and when running the <code>enunciate:docs</code> goal, I get the following error message:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>[ERROR] Failed to execute goal com.webcohesion.enunciate:enunciate-maven-plugin:2.14.0:docs (default) on project EnunciateDocs: Error invoking Enunciate.: java.lang.NoClassDefFoundError: com/webcohesion/enunciate/metadata/rs/JakartaResourceMethodSignature\n</code></pre>\n<p>My project is a Java application with JAX-RS (Jakarta API) annotations.\nI've upgraded the Enunciate Maven Plugin from version 2.13.3 to 2.14.0.</p>\n<p>POM Configuration:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;!-- Enunciate Maven Plugin --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;com.webcohesion.enunciate&lt;/groupId&gt;\n            &lt;artifactId&gt;enunciate-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.14.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;docs&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;!-- the directory where to put the docs --&gt;\n                        &lt;docsDir&gt;./docs&lt;/docsDir&gt;\n                        &lt;configFile&gt;./enunciate.xml&lt;/configFile&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n                    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n                    &lt;version&gt;2.3.3&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n\n</code></pre>\n"},{"tags":["java","console"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1697201950,"post_id":77287935,"comment_id":136253705,"body_markdown":"new frame?  Please show a [mre] code example of just what you&#39;re asking about.","body":"new frame?  Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> code example of just what you&#39;re asking about."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1697202035,"post_id":77287935,"comment_id":136253726,"body_markdown":"I haven&#39;t tried this, but you can do what film projectors do: put a blank frame between actual frames.","body":"I haven&#39;t tried this, but you can do what film projectors do: put a blank frame between actual frames."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1697202076,"post_id":77287935,"comment_id":136253734,"body_markdown":"Also, it is entirely possible that your terminal just can&#39;t keep up. Try a smaller &quot;resolution&#39;.","body":"Also, it is entirely possible that your terminal just can&#39;t keep up. Try a smaller &quot;resolution&#39;."},{"owner":{"account_id":22256836,"reputation":51,"user_id":16488884,"display_name":"Yarik0urWorld"},"score":0,"creation_date":1697202142,"post_id":77287935,"comment_id":136253753,"body_markdown":"@FedericoklezCulloca or lower FPS","body":"@FedericoklezCulloca or lower FPS"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1697218172,"post_id":77287935,"comment_id":136257051,"body_markdown":"I imagine you can use a _[control sequence](https://en.wikipedia.org/wiki/ANSI_escape_code#CSI_(Control_Sequence_Introducer)_sequences)_ to remove and replace the specific ranges of text.","body":"I imagine you can use a <i><a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code#CSI_(Control_Sequence_Introducer)_sequences\" rel=\"nofollow noreferrer\">control sequence</a></i> to remove and replace the specific ranges of text."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1697228157,"post_id":77287935,"comment_id":136258575,"body_markdown":"I expect that this will be dependent on the command line you are using. Your in-IDE console might not support it at all.","body":"I expect that this will be dependent on the command line you are using. Your in-IDE console might not support it at all."}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697232734,"creation_date":1697230766,"answer_id":77290610,"question_id":77287935,"body_markdown":"You can clear the screen before each printing of an animation frame.  As Jorn pointed out, this will work in a Unix/Linux terminal and will work in a Windows command window, but probably won’t work in an IDE:\r\n\r\n    import java.io.IOException;\r\n\r\n    public class TerminalAnimation {\r\n        public void animate()\r\n        throws IOException,\r\n               InterruptedException {\r\n\r\n            ProcessBuilder clearScreenBuilder =\r\n                new ProcessBuilder(&quot;tput&quot;, &quot;clear&quot;);\r\n            clearScreenBuilder.inheritIO();\r\n\r\n            int x = 1;\r\n            int increment = 1;\r\n            while (true) {\r\n                if (System.getProperty(&quot;os.name&quot;).contains(&quot;Windows&quot;)) {\r\n                    System.out.print(&quot;\\u001b[H\\u001b[2J\\u001b[3J&quot;);\r\n                } else {\r\n                    clearScreenBuilder.start().waitFor();\r\n                }\r\n\r\n                System.out.printf(&quot;%&quot; + x + &quot;s&quot;, &quot;*&quot;);\r\n                System.out.flush();\r\n\r\n                Thread.sleep(125);\r\n\r\n                x += increment;\r\n                if (x &lt;= 0 || x &gt;= 40) {\r\n                    increment = -increment;\r\n                    x += increment * 2;\r\n                }\r\n            }\r\n        }\r\n\r\n        public static void main(String[] args)\r\n        throws IOException,\r\n               InterruptedException {\r\n\r\n            new TerminalAnimation().animate();\r\n        }\r\n    }\r\n","title":"Making console output not &#39;scroll&#39;","body":"<p>You can clear the screen before each printing of an animation frame.  As Jorn pointed out, this will work in a Unix/Linux terminal and will work in a Windows command window, but probably won’t work in an IDE:</p>\n<pre><code>import java.io.IOException;\n\npublic class TerminalAnimation {\n    public void animate()\n    throws IOException,\n           InterruptedException {\n\n        ProcessBuilder clearScreenBuilder =\n            new ProcessBuilder(&quot;tput&quot;, &quot;clear&quot;);\n        clearScreenBuilder.inheritIO();\n\n        int x = 1;\n        int increment = 1;\n        while (true) {\n            if (System.getProperty(&quot;os.name&quot;).contains(&quot;Windows&quot;)) {\n                System.out.print(&quot;\\u001b[H\\u001b[2J\\u001b[3J&quot;);\n            } else {\n                clearScreenBuilder.start().waitFor();\n            }\n\n            System.out.printf(&quot;%&quot; + x + &quot;s&quot;, &quot;*&quot;);\n            System.out.flush();\n\n            Thread.sleep(125);\n\n            x += increment;\n            if (x &lt;= 0 || x &gt;= 40) {\n                increment = -increment;\n                x += increment * 2;\n            }\n        }\n    }\n\n    public static void main(String[] args)\n    throws IOException,\n           InterruptedException {\n\n        new TerminalAnimation().animate();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2682087,"reputation":171,"user_id":3379965,"display_name":"Thanos Maravel"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77290610,"answer_count":1,"score":0,"last_activity_date":1697232734,"creation_date":1697201889,"question_id":77287935,"body_markdown":"I was working on a tutorial that simulates ascii animation on console by printing every new frame of the entire thing all over again, which does make sense.\r\n\r\nThe issue is that the console looks like it&#39;s &#39;scrolling&#39;, that is to say, rather than the new frame being printed instantly and replacing the previous &#39;frame&#39;, it looks more like what&#39;s actually happening, with the new frame (rapidly) being built and scrolled to from bellow.\r\n\r\nNow, the tutorial seems perfectly content with that, but I am not. I attempted to replace the individual &#39;print&#39; and &#39;println&#39; calls with appending to a stringbuilder buffer and printing it all in one go, and it may have helped, but it didn&#39;t solve it.\r\n\r\nHow can I smoothen the frame-by-frame perception? Is it even possible? I imagine a lot of very interesting expertise hides behind answering that question, but I do not have it.","title":"Making console output not &#39;scroll&#39;","body":"<p>I was working on a tutorial that simulates ascii animation on console by printing every new frame of the entire thing all over again, which does make sense.</p>\n<p>The issue is that the console looks like it's 'scrolling', that is to say, rather than the new frame being printed instantly and replacing the previous 'frame', it looks more like what's actually happening, with the new frame (rapidly) being built and scrolled to from bellow.</p>\n<p>Now, the tutorial seems perfectly content with that, but I am not. I attempted to replace the individual 'print' and 'println' calls with appending to a stringbuilder buffer and printing it all in one go, and it may have helped, but it didn't solve it.</p>\n<p>How can I smoothen the frame-by-frame perception? Is it even possible? I imagine a lot of very interesting expertise hides behind answering that question, but I do not have it.</p>\n"},{"tags":["java","garbage-collection","java-11","scala-2.13"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1697448418,"post_id":77290708,"comment_id":136276676,"body_markdown":"As said at the other question, you are unlikely to get answers if you require the reader to understand internals of Scala. How is a `case class` implemented? I don’t know, but it looks like you are trying to invoke a method `fn()` on the very object that is supposed to be garbage collected at cleanup time. This can’t work. As [the documentation](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ref/Cleaner.html#:~:text=it%20is%20important,to%20the%20object) says: “*it is important that the object implementing the cleaning action does not hold references to the object*”","body":"As said at the other question, you are unlikely to get answers if you require the reader to understand internals of Scala. How is a <code>case class</code> implemented? I don’t know, but it looks like you are trying to invoke a method <code>fn()</code> on the very object that is supposed to be garbage collected at cleanup time. This can’t work. As <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ref/Cleaner.html#:~:text=it%20is%20important,to%20the%20object\" rel=\"nofollow noreferrer\">the documentation</a> says: “<i>it is important that the object implementing the cleaning action does not hold references to the object</i>”"},{"owner":{"account_id":1920862,"reputation":3756,"user_id":1732418,"accept_rate":53,"display_name":"tribbloid"},"score":0,"creation_date":1697479718,"post_id":77290708,"comment_id":136282446,"body_markdown":"@Holger actually the reference is single-directional: Dummy hold reference to fn, but not vice versa. I&#39;ll rewrite the question using Java shortly.","body":"@Holger actually the reference is single-directional: Dummy hold reference to fn, but not vice versa. I&#39;ll rewrite the question using Java shortly."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1697530941,"post_id":77290708,"comment_id":136288086,"body_markdown":"Then, there’s the issue with the memory visibility. `count` is accessed by different threads…","body":"Then, there’s the issue with the memory visibility. <code>count</code> is accessed by different threads…"}],"owner":{"account_id":1920862,"reputation":3756,"user_id":1732418,"accept_rate":53,"display_name":"tribbloid"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697232140,"creation_date":1697232140,"question_id":77290708,"body_markdown":"Considering the following example in Scala 2.13.12 &amp; Java 11:\r\n\r\n```\r\nclass CleanableSpike extends AnyFunSpec {\r\n\r\n  import CleanableSpike._\r\n\r\n  it(&quot;triggered by GC&quot;) {\r\n\r\n    var v = Dummy(inc)\r\n    v = null\r\n\r\n    System.gc()\r\n\r\n    Thread.sleep(1000)\r\n    assert(count == 1)\r\n  }\r\n}\r\n\r\nobject CleanableSpike {\r\n\r\n  val jvmCleaner = Cleaner.create()\r\n\r\n  @transient var count = 0\r\n\r\n  val inc = () =&gt; count += 1\r\n\r\n  case class Dummy(fn: () =&gt; Unit) extends AutoCloseable {\r\n\r\n    final private val cleanable = jvmCleaner.register(\r\n      this,\r\n      { () =&gt;\r\n        println(&quot;\\ncleaned\\n&quot;)\r\n        fn()\r\n      }\r\n    )\r\n\r\n    override def close(): Unit = cleanable.clean()\r\n  }\r\n}\r\n```\r\n\r\nWhen the test is executed, it gave the following error:\r\n\r\n```\r\n\r\norg.scalatest.exceptions.TestFailedException: 0 did not equal 1\r\n\tat org.scalatest.Assertions.newAssertionFailedException(Assertions.scala:472)\r\n\tat org.scalatest.Assertions.newAssertionFailedException$(Assertions.scala:471)\r\n\tat org.scalatest.Assertions$.newAssertionFailedException(Assertions.scala:1231)\r\n\tat org.scalatest.Assertions$AssertionsHelper.macroAssert(Assertions.scala:1295)\r\n\tat com.tribbloids.spookystuff.lifespan.CleanableSpike.$anonfun$new$1(CleanableSpike.scala:19)\r\n```\r\n\r\nClearly, the cleanup function was not triggered, ironically, if I replace the Cleaner implementation with the now-obsolete `finalize()` function, the test will pass.\r\n\r\nWhat could go wrong here, and what implementation should I use to ensure that the new implementation can have the same capability (namely, to be triggered by System.gc())?","title":"In Java 9+ with Scala, how to make a Cleanable that can be triggered by `System.gc()`","body":"<p>Considering the following example in Scala 2.13.12 &amp; Java 11:</p>\n<pre><code>class CleanableSpike extends AnyFunSpec {\n\n  import CleanableSpike._\n\n  it(&quot;triggered by GC&quot;) {\n\n    var v = Dummy(inc)\n    v = null\n\n    System.gc()\n\n    Thread.sleep(1000)\n    assert(count == 1)\n  }\n}\n\nobject CleanableSpike {\n\n  val jvmCleaner = Cleaner.create()\n\n  @transient var count = 0\n\n  val inc = () =&gt; count += 1\n\n  case class Dummy(fn: () =&gt; Unit) extends AutoCloseable {\n\n    final private val cleanable = jvmCleaner.register(\n      this,\n      { () =&gt;\n        println(&quot;\\ncleaned\\n&quot;)\n        fn()\n      }\n    )\n\n    override def close(): Unit = cleanable.clean()\n  }\n}\n</code></pre>\n<p>When the test is executed, it gave the following error:</p>\n<pre><code>\norg.scalatest.exceptions.TestFailedException: 0 did not equal 1\n    at org.scalatest.Assertions.newAssertionFailedException(Assertions.scala:472)\n    at org.scalatest.Assertions.newAssertionFailedException$(Assertions.scala:471)\n    at org.scalatest.Assertions$.newAssertionFailedException(Assertions.scala:1231)\n    at org.scalatest.Assertions$AssertionsHelper.macroAssert(Assertions.scala:1295)\n    at com.tribbloids.spookystuff.lifespan.CleanableSpike.$anonfun$new$1(CleanableSpike.scala:19)\n</code></pre>\n<p>Clearly, the cleanup function was not triggered, ironically, if I replace the Cleaner implementation with the now-obsolete <code>finalize()</code> function, the test will pass.</p>\n<p>What could go wrong here, and what implementation should I use to ensure that the new implementation can have the same capability (namely, to be triggered by System.gc())?</p>\n"},{"tags":["java","class","visual-studio-code","compilation"],"comments":[{"owner":{"account_id":9553438,"reputation":3539,"user_id":7096763,"display_name":"MikaelF"},"score":0,"creation_date":1583971913,"post_id":60645947,"comment_id":107295551,"body_markdown":"Take a look at [this](https://stackoverflow.com/questions/7709041/javac-is-not-recognized-as-an-internal-or-external-command-operable-program-or).","body":"Take a look at <a href=\"https://stackoverflow.com/questions/7709041/javac-is-not-recognized-as-an-internal-or-external-command-operable-program-or\">this</a>."},{"owner":{"account_id":7245066,"reputation":1009,"user_id":7141562,"display_name":"admlz635"},"score":0,"creation_date":1583971976,"post_id":60645947,"comment_id":107295572,"body_markdown":"See https://code.visualstudio.com/docs/languages/java","body":"See <a href=\"https://code.visualstudio.com/docs/languages/java\" rel=\"nofollow noreferrer\">code.visualstudio.com/docs/languages/java</a>"}],"answers":[{"tags":[],"owner":{"account_id":7740827,"reputation":208,"user_id":5860649,"accept_rate":50,"display_name":"Vera F W C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583973003,"creation_date":1583973003,"answer_id":60646127,"question_id":60645947,"body_markdown":"Visual Studio Code is just a code *editor*. VS Code can&#39;t actually compile your code: Only help you write it. Various extentions to VS Code can automate the process of running the compiler, but you still need to install the compiler yourself.\r\n\r\nTo compile your code you&#39;ll need to install the Java Compiler (`javac`) which is a separate program. You can install the Java Compiler by installing the [Java Development Kit][1], which is a set of tool for developing Java programs.\r\n\r\nTypically the Java Develoment Kit (JDK) instillation will set up your operating systems paths so `javac` will refer to a valid program after your restart VS Code and your consoles. If it still doesn&#39;t, refer to the answer linked my MikaelF&#39;s answer. You&#39;ll need to manually tell your computer where you installed the JDK.\r\n\r\n  [1]: https://www.oracle.com/java/technologies/javase-jdk13-downloads.html","title":"Compile java class in VSCode","body":"<p>Visual Studio Code is just a code <em>editor</em>. VS Code can't actually compile your code: Only help you write it. Various extentions to VS Code can automate the process of running the compiler, but you still need to install the compiler yourself.</p>\n\n<p>To compile your code you'll need to install the Java Compiler (<code>javac</code>) which is a separate program. You can install the Java Compiler by installing the <a href=\"https://www.oracle.com/java/technologies/javase-jdk13-downloads.html\" rel=\"nofollow noreferrer\">Java Development Kit</a>, which is a set of tool for developing Java programs.</p>\n\n<p>Typically the Java Develoment Kit (JDK) instillation will set up your operating systems paths so <code>javac</code> will refer to a valid program after your restart VS Code and your consoles. If it still doesn't, refer to the answer linked my MikaelF's answer. You'll need to manually tell your computer where you installed the JDK.</p>\n"},{"tags":[],"owner":{"account_id":17942799,"reputation":7768,"user_id":13037676,"display_name":"Steven-MSFT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583992662,"creation_date":1583992662,"answer_id":60648352,"question_id":60645947,"body_markdown":"only jdk can help you to compile java class; \r\n\r\nopen cmd type:&quot;java -version&quot;; if not have proper response(the version of jdk),you should download jdk from oracle and install it,and ofcourse add the bin directory like this(D:\\workSoft\\JDK8\\bin) to the path environment; \r\n\r\nif you had install the jdk correctly then visual studio code will compile the .java file to .class file automatically","title":"Compile java class in VSCode","body":"<p>only jdk can help you to compile java class; </p>\n\n<p>open cmd type:\"java -version\"; if not have proper response(the version of jdk),you should download jdk from oracle and install it,and ofcourse add the bin directory like this(D:\\workSoft\\JDK8\\bin) to the path environment; </p>\n\n<p>if you had install the jdk correctly then visual studio code will compile the .java file to .class file automatically</p>\n"}],"owner":{"account_id":17956363,"reputation":1,"user_id":13048315,"display_name":"Tim Nguyen "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8507,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697231160,"creation_date":1583971332,"question_id":60645947,"body_markdown":"I&#39;m writing a code to run the original coded program from my professor through the class files. So basically I downloaded my coded program of my professor to start coding a class file in the visual studio code. But when I run, it could not find my class file which means that I haven&#39;t compiled it, then I have searched up some ways to compile the file which has the javac or some like that and it turned out:\r\n&quot;&#39;javac&#39; is not recognized as an internal or external command\r\noperable program or batch file.\r\nThe system cannot find the path specified.&quot;\r\nSo how can I easily compile the class file and set the classpath? \r\n","title":"Compile java class in VSCode","body":"<p>I'm writing a code to run the original coded program from my professor through the class files. So basically I downloaded my coded program of my professor to start coding a class file in the visual studio code. But when I run, it could not find my class file which means that I haven't compiled it, then I have searched up some ways to compile the file which has the javac or some like that and it turned out:\n\"'javac' is not recognized as an internal or external command\noperable program or batch file.\nThe system cannot find the path specified.\"\nSo how can I easily compile the class file and set the classpath? </p>\n"},{"tags":["java","asynchronous","openshift","latency","threadpoolexecutor"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697231159,"post_id":77290578,"comment_id":136258929,"body_markdown":"From [`ThreadPoolExecutor`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.html): &quot;_When a new task is submitted in method execute(Runnable), if fewer than corePoolSize threads are running, a new thread is created to handle the request, even if other worker threads are idle. Else if fewer than maximumPoolSize threads are running, a new thread will be created to handle the request **only if the queue is full**_&quot;.","body":"From <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"nofollow noreferrer\"><code>ThreadPoolExecutor</code></a>: &quot;<i>When a new task is submitted in method execute(Runnable), if fewer than corePoolSize threads are running, a new thread is created to handle the request, even if other worker threads are idle. Else if fewer than maximumPoolSize threads are running, a new thread will be created to handle the request <b>only if the queue is full</b></i>&quot;."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697231204,"post_id":77290578,"comment_id":136258932,"body_markdown":"You&#39;re using a `LinkedBlockingQueue` with a capacity of `Integer.MAX_VALUE`, so it is highly unlikely that the queue will ever become full.","body":"You&#39;re using a <code>LinkedBlockingQueue</code> with a capacity of <code>Integer.MAX_VALUE</code>, so it is highly unlikely that the queue will ever become full."},{"owner":{"account_id":29666131,"reputation":11,"user_id":22736607,"display_name":"Mohit Agarwal"},"score":0,"creation_date":1697480705,"post_id":77290578,"comment_id":136282602,"body_markdown":"Thank you @Slaw! So basically, creating an unbounded queue is resulting in no threads being allocated from outside the core pool, rendering the max pool size useless. There is no mention as to what should be the optimum value though. It is understood that these values are dependent upon each application (throughput requirements, load, etc.) but is it suggested that we keep max core pool size at 30 with _SynchronousQueue_ given our peak load could be 40-50 tps?","body":"Thank you @Slaw! So basically, creating an unbounded queue is resulting in no threads being allocated from outside the core pool, rendering the max pool size useless. There is no mention as to what should be the optimum value though. It is understood that these values are dependent upon each application (throughput requirements, load, etc.) but is it suggested that we keep max core pool size at 30 with <i>SynchronousQueue</i> given our peak load could be 40-50 tps?"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697674513,"post_id":77290578,"comment_id":136310903,"body_markdown":"Does &quot;tps&quot; stand for &quot;tasks per second&quot;? Because if yes, then using `SynchronousQueue` with a relatively small number of maximum threads is likely to result in a `RejectedExecutionException`. At least with the default `RejectedExecutionHandler`; perhaps you&#39;re okay with using [`CallerRunsPolicy`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.CallerRunsPolicy.html). Maybe you should consider setting the core thread count higher and possibly letting core threads die.","body":"Does &quot;tps&quot; stand for &quot;tasks per second&quot;? Because if yes, then using <code>SynchronousQueue</code> with a relatively small number of maximum threads is likely to result in a <code>RejectedExecutionException</code>. At least with the default <code>RejectedExecutionHandler</code>; perhaps you&#39;re okay with using <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.CallerRunsPolicy.html\" rel=\"nofollow noreferrer\"><code>CallerRunsPolicy</code></a>. Maybe you should consider setting the core thread count higher and possibly letting core threads die."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697674618,"post_id":77290578,"comment_id":136310912,"body_markdown":"In short, I would suggest profiling your application, during both normal operation and peak operation, and tune values such as the core thread count, maximum thread count, queue capacity, keep alive time, whether to let core threads die, and rejection policy until you get what you consider optimal behavior.","body":"In short, I would suggest profiling your application, during both normal operation and peak operation, and tune values such as the core thread count, maximum thread count, queue capacity, keep alive time, whether to let core threads die, and rejection policy until you get what you consider optimal behavior."},{"owner":{"account_id":29666131,"reputation":11,"user_id":22736607,"display_name":"Mohit Agarwal"},"score":0,"creation_date":1698096624,"post_id":77290578,"comment_id":136359724,"body_markdown":"By tps, I am referring to &#39;transactions per second&#39;. But I get your point. We are currently testing the performance of the application in lower environment, by tweaking thread pool size (core and max) and queue type, to find the right balance that works for us.","body":"By tps, I am referring to &#39;transactions per second&#39;. But I get your point. We are currently testing the performance of the application in lower environment, by tweaking thread pool size (core and max) and queue type, to find the right balance that works for us."}],"owner":{"account_id":29666131,"reputation":11,"user_id":22736607,"display_name":"Mohit Agarwal"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697230189,"creation_date":1697230189,"question_id":77290578,"body_markdown":"We have been noticing intermittent latency issues when there is a burst of traffic (~60-80 tps) for one of the flows within our application. In each occurrence of the increased response time, it has been observed that the maximum amount of time is being taken while allocating a new thread to start an async task.\r\n\r\n*Application Details*:\r\n**Java version**: 8, **Web server**: JBoss, **Framework**: SpringBoot, **Deployment**: On-Premise cloud (Openshift)\r\n\r\n*ExecutorService* configuration:\r\n\r\n`private final ExecutorService executorService = new ThreadPoolExecutor(3, 30, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;&gt;());`\r\n\r\nCode snippet below - *mainMethod* invokes *methodOne* and *methodTwo* using async process but the time taken between entering methodOne and methodTwo clearly shows significant delay under high load.\r\n\r\n    public void mainMethod() {\r\n        log.info(&quot;inside methodOne()&quot;); // for eg. 9:10:00 UTC\r\n        CompletableFuture&lt;someObj&gt; completableFuture = AsyncUtil.supply(\r\n                () -&gt; methodTwo(), executorService);\r\n\r\n    public void methodOne() {\r\n        log.info(&quot;inside methodOne()&quot;); // for eg. 9:10:05 UTC\r\n\r\n    public void methodTwo() {\r\n        log.info(&quot;inside methodTwo()&quot;); // for eg. 9:10:07 UTC\r\n   \r\n    CompletableFuture.allOf(methodOne, methodTwo).get();\r\n\r\n\r\n\r\nAs seen above, we have a core thread pool size of 3 with maximum thread count of 30. This application is deployed on 8 pods in the production environment. \r\n\r\n1. As part of our investigation, we collected thread dumps during peak hours.\r\n2. We have also verified the logs collected from Splunk and DynaTrace. Attaching DynaTrace view for reference which indicates that maximum time is taken waiting for thread allocation.[Dynatrace](https://i.stack.imgur.com/BvLSv.png)\r\n3. The pods have been restarted but the behavior is still the same.\r\n4. Both show a common pattern - on each pod, for each request that shows increased latency, JVM is waiting to **allocate a new thread to the async task from within the core pool only (3)**. \r\n5. The logs indicate that the async task is executing only from *pool17*: thread 1, 2, 3; even though the maximum pool size is 30.\r\n\r\nAttaching the Splunk logs below for reference:\r\n \r\n&gt; 10/6/23 **10:14:25.689** **PM**\t\r\n&gt; [0m22:14:25,689 INFO  [stdout] (Log4j2-TF-1-AsyncLoggerConfig-1) INFO  [**default task-1073**]: 2023-10-06T22:14:25,689 - requestTime=2023-10-06T22:14:24.537-0700\r\n&gt; Entering method *mainMethod* ...\r\n&gt;\r\n&gt; 10/6/23 **10:14:30.748 PM**\t\r\n&gt; [0m22:14:30,748 INFO  [stdout] (Log4j2-TF-1-AsyncLoggerConfig-1) INFO  [**pool-17-thread-3**]: 2023-10-06T22:14:30,748 - requestTime=2023-10-06T22:14:24.537-0700\r\n&gt; Entering method *methodOne* of ...\r\n&gt;\r\n&gt; 10/6/23 **10:14:31.509 PM**\t\r\n&gt; [0m22:14:31,509 INFO  [stdout] (Log4j2-TF-1-AsyncLoggerConfig-1) INFO  [**pool-17-thread-2**]: 2023-10-06T22:14:31,509 - requestTime=2023-10-06T22:14:24.537-0700\r\n&gt; Entering method *methodTwo* of ...\r\n\r\nAs seen above, there is a 5 second delay between first and second logger statements. As per our assumption, this is the wait time to allocate the thread to the async task. We have also highlighted the pool# and thread# being allocated to the tasks.\r\n\r\nAnother thing to note based on the logs, the async task is always using *pool17* on all the 8 pods.\r\n\r\nFew questions:\r\n1. Even though the logs indicate pool17 on all the pods, our assumption is that each pod maintains its own thread pool of objects. Is that understanding correct?\r\n2. Though *ExecutorService* maximum pool size is 30, logs always indicate that async tasks are always using thread 1, thread 2, thread 3; which is the core pool size. Why is the async task not leveraging other thread outside of the core pool.\r\n3. Each pod size is *1 CPU x 4 GB RAM*. Based on the pod configuration, should we tweak the ExecutorService configuration.","title":"Delay in thread allocation with ExecutorService","body":"<p>We have been noticing intermittent latency issues when there is a burst of traffic (~60-80 tps) for one of the flows within our application. In each occurrence of the increased response time, it has been observed that the maximum amount of time is being taken while allocating a new thread to start an async task.</p>\n<p><em>Application Details</em>:\n<strong>Java version</strong>: 8, <strong>Web server</strong>: JBoss, <strong>Framework</strong>: SpringBoot, <strong>Deployment</strong>: On-Premise cloud (Openshift)</p>\n<p><em>ExecutorService</em> configuration:</p>\n<p><code>private final ExecutorService executorService = new ThreadPoolExecutor(3, 30, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;&gt;());</code></p>\n<p>Code snippet below - <em>mainMethod</em> invokes <em>methodOne</em> and <em>methodTwo</em> using async process but the time taken between entering methodOne and methodTwo clearly shows significant delay under high load.</p>\n<pre><code>public void mainMethod() {\n    log.info(&quot;inside methodOne()&quot;); // for eg. 9:10:00 UTC\n    CompletableFuture&lt;someObj&gt; completableFuture = AsyncUtil.supply(\n            () -&gt; methodTwo(), executorService);\n\npublic void methodOne() {\n    log.info(&quot;inside methodOne()&quot;); // for eg. 9:10:05 UTC\n\npublic void methodTwo() {\n    log.info(&quot;inside methodTwo()&quot;); // for eg. 9:10:07 UTC\n\nCompletableFuture.allOf(methodOne, methodTwo).get();\n</code></pre>\n<p>As seen above, we have a core thread pool size of 3 with maximum thread count of 30. This application is deployed on 8 pods in the production environment.</p>\n<ol>\n<li>As part of our investigation, we collected thread dumps during peak hours.</li>\n<li>We have also verified the logs collected from Splunk and DynaTrace. Attaching DynaTrace view for reference which indicates that maximum time is taken waiting for thread allocation.<a href=\"https://i.stack.imgur.com/BvLSv.png\" rel=\"nofollow noreferrer\">Dynatrace</a></li>\n<li>The pods have been restarted but the behavior is still the same.</li>\n<li>Both show a common pattern - on each pod, for each request that shows increased latency, JVM is waiting to <strong>allocate a new thread to the async task from within the core pool only (3)</strong>.</li>\n<li>The logs indicate that the async task is executing only from <em>pool17</em>: thread 1, 2, 3; even though the maximum pool size is 30.</li>\n</ol>\n<p>Attaching the Splunk logs below for reference:</p>\n<blockquote>\n<p>10/6/23 <strong>10:14:25.689</strong> <strong>PM</strong><br />\n[0m22:14:25,689 INFO  [stdout] (Log4j2-TF-1-AsyncLoggerConfig-1) INFO  [<strong>default task-1073</strong>]: 2023-10-06T22:14:25,689 - requestTime=2023-10-06T22:14:24.537-0700\nEntering method <em>mainMethod</em> ...</p>\n<p>10/6/23 <strong>10:14:30.748 PM</strong><br />\n[0m22:14:30,748 INFO  [stdout] (Log4j2-TF-1-AsyncLoggerConfig-1) INFO  [<strong>pool-17-thread-3</strong>]: 2023-10-06T22:14:30,748 - requestTime=2023-10-06T22:14:24.537-0700\nEntering method <em>methodOne</em> of ...</p>\n<p>10/6/23 <strong>10:14:31.509 PM</strong><br />\n[0m22:14:31,509 INFO  [stdout] (Log4j2-TF-1-AsyncLoggerConfig-1) INFO  [<strong>pool-17-thread-2</strong>]: 2023-10-06T22:14:31,509 - requestTime=2023-10-06T22:14:24.537-0700\nEntering method <em>methodTwo</em> of ...</p>\n</blockquote>\n<p>As seen above, there is a 5 second delay between first and second logger statements. As per our assumption, this is the wait time to allocate the thread to the async task. We have also highlighted the pool# and thread# being allocated to the tasks.</p>\n<p>Another thing to note based on the logs, the async task is always using <em>pool17</em> on all the 8 pods.</p>\n<p>Few questions:</p>\n<ol>\n<li>Even though the logs indicate pool17 on all the pods, our assumption is that each pod maintains its own thread pool of objects. Is that understanding correct?</li>\n<li>Though <em>ExecutorService</em> maximum pool size is 30, logs always indicate that async tasks are always using thread 1, thread 2, thread 3; which is the core pool size. Why is the async task not leveraging other thread outside of the core pool.</li>\n<li>Each pod size is <em>1 CPU x 4 GB RAM</em>. Based on the pod configuration, should we tweak the ExecutorService configuration.</li>\n</ol>\n"},{"tags":["java","javac"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1697228836,"post_id":77288741,"comment_id":136258656,"body_markdown":"What is the problem in writing `javac -d ../compiled com/mycompany/projectname/comparators/* com/mycompany/projectname/init/MainClass.java`?","body":"What is the problem in writing <code>javac -d ..&#47;compiled com&#47;mycompany&#47;projectname&#47;comparators&#47;* com&#47;mycompany&#47;projectname&#47;init&#47;MainClass.java</code>?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697230437,"post_id":77288741,"comment_id":136258849,"body_markdown":"Are you running some kind of optimization tool like ProGuard? Those tend to throw out things that are only referenced reflectively. It might also help to show your build script (Maven or Gradle probably)","body":"Are you running some kind of optimization tool like ProGuard? Those tend to throw out things that are only referenced reflectively. It might also help to show your build script (Maven or Gradle probably)"},{"owner":{"account_id":12448976,"reputation":351,"user_id":9064287,"display_name":"nhaggen"},"score":0,"creation_date":1697461494,"post_id":77288741,"comment_id":136279022,"body_markdown":"@Progman, thanks that works. Would you mind to put it as an answer so I can accept it?","body":"@Progman, thanks that works. Would you mind to put it as an answer so I can accept it?"}],"owner":{"account_id":12448976,"reputation":351,"user_id":9064287,"display_name":"nhaggen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697229748,"creation_date":1697208843,"question_id":77288741,"body_markdown":"I noticed a severe difference in behaviour between the compiled application and when i run it from within my IDE (Eclipse). Digging in log files, results that in the compiled application some ```ClassNotFoundException``` are thrown when specific classes are loaded. **These classes are not referenced from within the code, but only loaded at runtime using reflection** (the class names stored in a config file). Within the IDE this works perfectly, in the compiled version the class files are missing.\r\n\r\nMy compile instructions look like this (shortened for better understanding):\r\n\r\n```javac -d ../compiled com/mycompany/projectname/init/MainClass.java```\r\n\r\n[According to a brief research on SO][1], this is not wat I expected. But at a closer look it is right: *MainClass* is compiled and all dependencies as well. The files that are not referenced, are not compiled.\r\n\r\n 1. The first workaround I worked out, is to import the files somewhere in another source file, so that they are referenced. I am aware that this is not a proper solution, since in future I might add another file and forget about the &quot;useless&quot; import, or worse i might delete the import statements to get rid of the warnings.\r\n 2. Second workaround is to compile at two stages, first the folder where the unreferenced files lie, then the whole project.\r\n\r\n    ```javac -d ../compiled com/mycompany/projectname/comparators/*``` \r\n    \r\n    followed by \r\n    \r\n    ```javac -d ../compiled com/mycompany/projectname/init/MainClass.java```\r\n\r\n    The first compile command will compile all files within the *comparators* directory, regardless of them being referenced anywhere, the second command will compile the *MainClass* and all its references. Since both compilation processes export to the same directory, I will then have all needed files in the *compiled* folder.\r\n\r\nIs there any way to do this with only one compilation-run and without the need to list all files explicitly? \r\n\r\nI tried following command\r\n\r\n```javac -d ../compiled com/mycompany/projectname/*``` but got an error ```invalid flag: com/mycompany/projectname``` This is probably caused by the fact, that there are no files, only folders under *com/mycompany/projectname/*\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8304019/do-classes-with-no-references-get-compiled","title":"Javac compile unreferenced files","body":"<p>I noticed a severe difference in behaviour between the compiled application and when i run it from within my IDE (Eclipse). Digging in log files, results that in the compiled application some <code>ClassNotFoundException</code> are thrown when specific classes are loaded. <strong>These classes are not referenced from within the code, but only loaded at runtime using reflection</strong> (the class names stored in a config file). Within the IDE this works perfectly, in the compiled version the class files are missing.</p>\n<p>My compile instructions look like this (shortened for better understanding):</p>\n<p><code>javac -d ../compiled com/mycompany/projectname/init/MainClass.java</code></p>\n<p><a href=\"https://stackoverflow.com/questions/8304019/do-classes-with-no-references-get-compiled\">According to a brief research on SO</a>, this is not wat I expected. But at a closer look it is right: <em>MainClass</em> is compiled and all dependencies as well. The files that are not referenced, are not compiled.</p>\n<ol>\n<li><p>The first workaround I worked out, is to import the files somewhere in another source file, so that they are referenced. I am aware that this is not a proper solution, since in future I might add another file and forget about the &quot;useless&quot; import, or worse i might delete the import statements to get rid of the warnings.</p>\n</li>\n<li><p>Second workaround is to compile at two stages, first the folder where the unreferenced files lie, then the whole project.</p>\n<p><code>javac -d ../compiled com/mycompany/projectname/comparators/*</code></p>\n<p>followed by</p>\n<p><code>javac -d ../compiled com/mycompany/projectname/init/MainClass.java</code></p>\n<p>The first compile command will compile all files within the <em>comparators</em> directory, regardless of them being referenced anywhere, the second command will compile the <em>MainClass</em> and all its references. Since both compilation processes export to the same directory, I will then have all needed files in the <em>compiled</em> folder.</p>\n</li>\n</ol>\n<p>Is there any way to do this with only one compilation-run and without the need to list all files explicitly?</p>\n<p>I tried following command</p>\n<p><code>javac -d ../compiled com/mycompany/projectname/*</code> but got an error <code>invalid flag: com/mycompany/projectname</code> This is probably caused by the fact, that there are no files, only folders under <em>com/mycompany/projectname/</em></p>\n"},{"tags":["java","json","serialization"],"comments":[{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1693076849,"post_id":76983750,"comment_id":135713399,"body_markdown":"It doesn&#39;t look like a Java syntax, so my guess that the fields are actually wrapped into some other object. What are the actual _Java_ types for the fields?","body":"It doesn&#39;t look like a Java syntax, so my guess that the fields are actually wrapped into some other object. What are the actual <i>Java</i> types for the fields?"},{"owner":{"account_id":19236458,"reputation":45,"user_id":14057316,"display_name":"miikey722"},"score":0,"creation_date":1693085343,"post_id":76983750,"comment_id":135714254,"body_markdown":"Sorry this is written in Gosu, which is built over Java","body":"Sorry this is written in Gosu, which is built over Java"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1693087096,"post_id":76983750,"comment_id":135714385,"body_markdown":"I understand that. My question is about the `Java type`, what Gosu uses for the final type when it compiles it to the bytecode? If it&#39;s some kind of a wrapper, that would be a reason.","body":"I understand that. My question is about the <code>Java type</code>, what Gosu uses for the final type when it compiles it to the bytecode? If it&#39;s some kind of a wrapper, that would be a reason."}],"owner":{"account_id":19236458,"reputation":45,"user_id":14057316,"display_name":"miikey722"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697229418,"creation_date":1693065387,"question_id":76983750,"body_markdown":"I&#39;m creating a DTO that looks like this:\r\n\r\n```\r\nuses com.fasterxml.jackson.annotation.JsonProperty\r\nuses com.fasterxml.jackson.annotation.JsonInclude\r\nuses gw.integration.document.production.json.JSONSerializable \r\n\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\nclass AccountDataForAPI extends JSONSerializable {\r\n\r\n    @JsonProperty(:value = &quot;Account5&quot;)\r\n    var account5: Boolean as account5\r\n\r\n    @JsonProperty(:value = &quot;SalesAmountOver5k&quot;)\r\n    var salesAmountOver5k: Integer as SalesAmountOver5k= 0\r\n\r\n    @JsonProperty(:value = &quot;SalesAmountOver10k&quot;)\r\n    var salesAmountOver10k: Integer as SalesAmountOver10k= 0\r\n    \r\n    @JsonProperty(:value = &quot;inventory_amount&quot;)\r\n    var inventoryAmount: Integer\r\n\r\n    @JsonProperty(:value = &quot;year&quot;)\r\n    var year: Integer\r\n\r\n    @JsonProperty(:value = &quot;num_losses&quot;)\r\n    var numLosses: Integer\r\n\r\n\r\n    construct () {}\r\n\r\n    construct(priorAccount: priorAccount) {\r\n        this.account5= null\r\n        this.salesAmountOver5k= null\r\n        this.salesAmountOver10k= null\r\n        this.inventoryAmount= priorAccount?.InventoryAmount\r\n        this.year= priorAccount?.priorAccount?.Year\r\n        this.numLosses= priorAccount?.NumLosses\r\n    }\r\n\r\n    function setPropertyByCodeIdentifier(question: Question) {\r\n        var typeInfo: ItypeInfo = this.IntrinsicType.getTypeInfo()\r\n        var prop : IPropertyInfo = typeInfo.getProperty(question.Question.CodeIdentifier)\r\n        var answerUnformatted = question.AnswerUnformatted\r\n\r\n        if(prop != null and prop.isWritable()) {\r\n            switch(prop.FeatureType.Name) {\r\n                case &quot;java.lang.Integer&quot;:\r\n                  prop.getAccessor().setValue(this, answerUnformatted.IntegerAnswer)\r\n                  break\r\n                case &quot;java.lang.Boolean&quot;:\r\n                    prop.getAccessor().setValue(this, answerUnformatted.BooleanAnswer)\r\n                    break\r\n                default:\r\n                    prop.getAccessor().setValue(this, answerUnformatted.TextAnswer)\r\n                    break\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBasically this DTO will be instantiated with either an empty constructor, or the priorAccount constructor. \r\n\r\nDepending on which constructor is initialized, we will create a JSON request object with only some of the fields. The rest of the fields that are null should NOT be returned. \r\n\r\nI followed the documentation - and it is returning a JSON object with some of the properties that have null values still. \r\n\r\n\r\nWhy is `@JsonInclude(JsonInclude.Include.NON_NULL)` not working?","title":"@JsonInclude(JsonInclude.Include.NON_NULL Not working","body":"<p>I'm creating a DTO that looks like this:</p>\n<pre><code>uses com.fasterxml.jackson.annotation.JsonProperty\nuses com.fasterxml.jackson.annotation.JsonInclude\nuses gw.integration.document.production.json.JSONSerializable \n\n@JsonInclude(JsonInclude.Include.NON_NULL)\nclass AccountDataForAPI extends JSONSerializable {\n\n    @JsonProperty(:value = &quot;Account5&quot;)\n    var account5: Boolean as account5\n\n    @JsonProperty(:value = &quot;SalesAmountOver5k&quot;)\n    var salesAmountOver5k: Integer as SalesAmountOver5k= 0\n\n    @JsonProperty(:value = &quot;SalesAmountOver10k&quot;)\n    var salesAmountOver10k: Integer as SalesAmountOver10k= 0\n    \n    @JsonProperty(:value = &quot;inventory_amount&quot;)\n    var inventoryAmount: Integer\n\n    @JsonProperty(:value = &quot;year&quot;)\n    var year: Integer\n\n    @JsonProperty(:value = &quot;num_losses&quot;)\n    var numLosses: Integer\n\n\n    construct () {}\n\n    construct(priorAccount: priorAccount) {\n        this.account5= null\n        this.salesAmountOver5k= null\n        this.salesAmountOver10k= null\n        this.inventoryAmount= priorAccount?.InventoryAmount\n        this.year= priorAccount?.priorAccount?.Year\n        this.numLosses= priorAccount?.NumLosses\n    }\n\n    function setPropertyByCodeIdentifier(question: Question) {\n        var typeInfo: ItypeInfo = this.IntrinsicType.getTypeInfo()\n        var prop : IPropertyInfo = typeInfo.getProperty(question.Question.CodeIdentifier)\n        var answerUnformatted = question.AnswerUnformatted\n\n        if(prop != null and prop.isWritable()) {\n            switch(prop.FeatureType.Name) {\n                case &quot;java.lang.Integer&quot;:\n                  prop.getAccessor().setValue(this, answerUnformatted.IntegerAnswer)\n                  break\n                case &quot;java.lang.Boolean&quot;:\n                    prop.getAccessor().setValue(this, answerUnformatted.BooleanAnswer)\n                    break\n                default:\n                    prop.getAccessor().setValue(this, answerUnformatted.TextAnswer)\n                    break\n            }\n        }\n    }\n}\n</code></pre>\n<p>Basically this DTO will be instantiated with either an empty constructor, or the priorAccount constructor.</p>\n<p>Depending on which constructor is initialized, we will create a JSON request object with only some of the fields. The rest of the fields that are null should NOT be returned.</p>\n<p>I followed the documentation - and it is returning a JSON object with some of the properties that have null values still.</p>\n<p>Why is <code>@JsonInclude(JsonInclude.Include.NON_NULL)</code> not working?</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1697228338,"post_id":77290422,"comment_id":136258594,"body_markdown":"You could use `Collectors.groupingBy(Function.identity(), Collectors.counting())`. Though note that will give you a `Map&lt;Character, Long&gt;`.","body":"You could use <code>Collectors.groupingBy(Function.identity(), Collectors.counting())</code>. Though note that will give you a <code>Map&lt;Character, Long&gt;</code>."},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":1,"creation_date":1697229256,"post_id":77290422,"comment_id":136258705,"body_markdown":"https://stackoverflow.com/questions/6712587/how-to-count-frequency-of-characters-in-a-string","body":"<a href=\"https://stackoverflow.com/questions/6712587/how-to-count-frequency-of-characters-in-a-string\" title=\"how to count frequency of characters in a string\">stackoverflow.com/questions/6712587/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697229223,"creation_date":1697228863,"answer_id":77290471,"question_id":77290422,"body_markdown":"[`Collectors.groupingBy`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)) with [`Collectors.counting`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#counting()) as the downstream function yields the desired result.\r\n\r\n```lang-java\r\ns.chars().mapToObj(i -&gt; (char) i).collect(\r\n        Collectors.groupingBy(Function.identity(), Collectors.counting()));\r\n```","title":"Converting Java String into Map&lt;Character, Integer&gt;","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\"><code>Collectors.groupingBy</code></a> with <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#counting()\" rel=\"nofollow noreferrer\"><code>Collectors.counting</code></a> as the downstream function yields the desired result.</p>\n<pre class=\"lang-java prettyprint-override\"><code>s.chars().mapToObj(i -&gt; (char) i).collect(\n        Collectors.groupingBy(Function.identity(), Collectors.counting()));\n</code></pre>\n"}],"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1697228978,"answer_count":1,"score":-1,"last_activity_date":1697229223,"creation_date":1697228158,"question_id":77290422,"body_markdown":"Given a String in Java, what is the Java 8 way of converting it into a `Map&lt;Character, Integer` where the value of the key is the number of times a character occurs in the String?\r\n\r\nIs this ideal or there are better methods available(Notice how in lambda, the data types are mentioned because as far as I understood, the compiler will give an error otherwise):\r\n```\r\nString s = &quot;abcdaaffeebb&quot;;\r\nvar m2 = s.chars().mapToObj(i-&gt;(char)i).\r\n                collect(Collectors.\r\n                        toMap((Character ch)-&gt;ch, (Character ch)-&gt;1,(oldV,newV)-&gt;oldV+newV));\r\n        System.out.println(m2);\r\n```\r\n\r\nOutput of the above snippet is:\r\n`{a=3, b=3, c=1, d=1, e=2, f=2}`\r\n","title":"Converting Java String into Map&lt;Character, Integer&gt;","body":"<p>Given a String in Java, what is the Java 8 way of converting it into a <code>Map&lt;Character, Integer</code> where the value of the key is the number of times a character occurs in the String?</p>\n<p>Is this ideal or there are better methods available(Notice how in lambda, the data types are mentioned because as far as I understood, the compiler will give an error otherwise):</p>\n<pre><code>String s = &quot;abcdaaffeebb&quot;;\nvar m2 = s.chars().mapToObj(i-&gt;(char)i).\n                collect(Collectors.\n                        toMap((Character ch)-&gt;ch, (Character ch)-&gt;1,(oldV,newV)-&gt;oldV+newV));\n        System.out.println(m2);\n</code></pre>\n<p>Output of the above snippet is:\n<code>{a=3, b=3, c=1, d=1, e=2, f=2}</code></p>\n"},{"tags":["java","android","mpandroidchart"],"comments":[{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1697427916,"post_id":77290489,"comment_id":136274017,"body_markdown":"&quot;sometime it shows and sometime it just cramble all the data and sometimes shows nothing&quot; sounds like an asynchronous programming issue, but since this behavior will depend on interactions between your program and both user actions (clicking buttons) and access to your database, you&#39;re unlikely to get any useful answers. Please take the time to create a minimum complete example that someone else could run that shows the issues you are seeing. You could do that using mock callbacks to mimic your asynchronous code instead of calling firebase.","body":"&quot;sometime it shows and sometime it just cramble all the data and sometimes shows nothing&quot; sounds like an asynchronous programming issue, but since this behavior will depend on interactions between your program and both user actions (clicking buttons) and access to your database, you&#39;re unlikely to get any useful answers. Please take the time to create a minimum complete example that someone else could run that shows the issues you are seeing. You could do that using mock callbacks to mimic your asynchronous code instead of calling firebase."},{"owner":{"account_id":26437245,"reputation":1,"user_id":20082416,"display_name":"Paul_m"},"score":0,"creation_date":1697456244,"post_id":77290489,"comment_id":136278068,"body_markdown":"Ok thanks I will try that","body":"Ok thanks I will try that"}],"owner":{"account_id":26437245,"reputation":1,"user_id":20082416,"display_name":"Paul_m"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697229145,"creation_date":1697229145,"question_id":77290489,"body_markdown":"i have been trying to use a single MPAndroid graphview with few function to show the data in the graph either monthly, weekly or yearly by the response of button click. The functions works but on the view sometime it shows and sometime it just cramble all the data and sometimes shows nothing, so i need help if anyone can help me with this.Thanks in advance.\r\n\r\nhere is the code\r\n\r\n```\r\n@Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_general_trend_access);\r\n        getSupportActionBar().setBackgroundDrawable(new ColorDrawable(getResources().getColor(R.color.blue)));\r\n        ActionBar actionBar = getSupportActionBar();\r\n        actionBar.setTitle(&quot;General Overview&quot;);\r\n        actionBar.setElevation(0);\r\n        barChart = findViewById(R.id.barChart);\r\n        sdsDatabaseHelper = new SdsDatabaseHelper(GeneralTrendAccess.this);\r\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;SalesData_&quot;+sdsDatabaseHelper.databaseName());\r\n        salesDataArrayList = new ArrayList&lt;&gt;();\r\n        arrayList = new ArrayList&lt;&gt;();\r\n        weekly = findViewById(R.id.weekly);\r\n        monthly = findViewById(R.id.monthly);\r\n        yearly = findViewById(R.id.yearly);\r\n\r\n        databaseReference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n\r\n                for (DataSnapshot dataSnapshot: snapshot.getChildren()) {\r\n                    salesData = new SalesData();\r\n                    salesData = dataSnapshot.getValue(SalesData.class);\r\n                    generalTrendData = new GeneralTrendData();\r\n                    generalTrendData.setDate(salesData.getUpload_and_sales_date());\r\n                    generalTrendData.setTotalExpense(salesData.getExpenses());\r\n                    generalTrendData.setTotalSales(salesData.getTotal_sales());\r\n                    generalTrendData.setTotalProfLoss(salesData.getProf_loss());\r\n                    arrayList.add(generalTrendData);\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                Toast.makeText(GeneralTrendAccess.this,&quot;data fetch error&quot;,Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n        });\r\n```\r\n\r\nand one of button response function\r\n\r\n\r\n```\r\nweekly.setOnClickListener(e-&gt;{\r\n            XAxis xAxis = barChart.getXAxis();\r\n            xAxis.setCenterAxisLabels(true);\r\n            xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);\r\n            xAxis.setGranularity(1);\r\n            xAxis.setGranularityEnabled(true);\r\n            xAxis.setValueFormatter(new IndexAxisValueFormatter(weeks));\r\n            barChart.setVisibleXRangeMaximum(4);\r\n            final Dialog mDialog = new Dialog(GeneralTrendAccess.this);\r\n            mDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n            mDialog.setContentView(R.layout.weekly_monthly_requirement);\r\n            _month = mDialog.findViewById(R.id.field_month);\r\n            _year = mDialog.findViewById(R.id.field_year);\r\n            cancelled = mDialog.findViewById(R.id.btn_cancelled);\r\n            allowed = mDialog.findViewById(R.id.btn_allowed);\r\n            mDialog.show();\r\n            mDialog.getWindow().setLayout(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);\r\n            mDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n\r\n            allowed.setOnClickListener(event-&gt;{\r\n                if ((_month.getText().toString()!=null) &amp;&amp; (_year.getText().toString()!=null)){\r\n                    makingBars((TreeMap) getWeeklyTrend(Integer.parseInt(_month.getText().toString()),\r\n                            Integer.parseInt(_year.getText().toString())));\r\n                }else {\r\n                    Toast.makeText(this, &quot;some fields are empty&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n                mDialog.dismiss();\r\n            });\r\n\r\n            cancelled.setOnClickListener(event-&gt;{\r\n                mDialog.dismiss();\r\n            });\r\n        });\r\n```\r\n\r\nand this one of method for setting data to the graph\r\n\r\n\r\n```\r\n@SuppressLint(&quot;SuspiciousIndentation&quot;)\r\n    public void makingBars(TreeMap treeMap){\r\n        ArrayList&lt;BarEntry&gt; barEntries = new ArrayList&lt;&gt;();\r\n        ArrayList&lt;BarEntry&gt; barEntries1 = new ArrayList&lt;&gt;();\r\n        ArrayList&lt;BarEntry&gt; barEntries2 = new ArrayList&lt;&gt;();\r\n        if (!treeMap.isEmpty()){\r\n            Set&lt;Map.Entry&lt;Integer,GraphData&gt;&gt; super_size = treeMap.entrySet();\r\n            for (Map.Entry&lt;Integer,GraphData&gt; entry : super_size){\r\n                if (entry != null) {\r\n                    barEntries.add(new BarEntry(entry.getKey(), (float) entry.getValue().getTs()));\r\n                    barEntries1.add(new BarEntry(entry.getKey(), (float) entry.getValue().getTe()));\r\n                    barEntries2.add(new BarEntry(entry.getKey(), (float) entry.getValue().getTpl()));\r\n                }else {\r\n                    Toast.makeText(this, &quot;No data added&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            if (!barEntries.isEmpty()){\r\n                BarDataSet profLossSet = new BarDataSet(barEntries2,&quot;Profit/Loss&quot;);\r\n                profLossSet.setColor(Color.GREEN);\r\n                BarDataSet totalSalesSet = new BarDataSet(barEntries,&quot;Total Sales&quot;);\r\n                totalSalesSet.setColor(Color.BLUE);\r\n                BarDataSet totalExpenseSet = new BarDataSet(barEntries1,&quot;Expenses&quot;);\r\n                totalExpenseSet.setColor(Color.RED);\r\n\r\n\r\n                BarData trendData = new BarData(totalSalesSet,profLossSet,totalExpenseSet);\r\n                trendData.setBarWidth(0.15f);\r\n                barChart.setDragEnabled(true);\r\n                barChart.zoomOut();\r\n                barChart.setData(trendData);\r\n                barChart.groupBars(0,0.5f,0.1f);\r\n                barChart.invalidate();\r\n            }else {\r\n                barChart.setNoDataText(&quot;Nothing to show here yet.&quot;);\r\n                barChart.setNoDataTextColor(Color.BLACK);\r\n                barChart.setNoDataTextTypeface(Typeface.DEFAULT);\r\n            }\r\n        }else {\r\n            barChart.setNoDataText(&quot;The month or year entered has no data stored.&quot;);\r\n            barChart.setNoDataTextColor(Color.BLACK);\r\n            barChart.setNoDataTextTypeface(Typeface.DEFAULT);\r\n        }\r\n\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n\r\ni tried reviewing the code and even looking up for tutorials and even trying to to check the MPAndroid project examples and doc but i got nothing to help","title":"is there a better way for reusing the MPAndroid graphview multiple time?","body":"<p>i have been trying to use a single MPAndroid graphview with few function to show the data in the graph either monthly, weekly or yearly by the response of button click. The functions works but on the view sometime it shows and sometime it just cramble all the data and sometimes shows nothing, so i need help if anyone can help me with this.Thanks in advance.</p>\n<p>here is the code</p>\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_general_trend_access);\n        getSupportActionBar().setBackgroundDrawable(new ColorDrawable(getResources().getColor(R.color.blue)));\n        ActionBar actionBar = getSupportActionBar();\n        actionBar.setTitle(&quot;General Overview&quot;);\n        actionBar.setElevation(0);\n        barChart = findViewById(R.id.barChart);\n        sdsDatabaseHelper = new SdsDatabaseHelper(GeneralTrendAccess.this);\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;SalesData_&quot;+sdsDatabaseHelper.databaseName());\n        salesDataArrayList = new ArrayList&lt;&gt;();\n        arrayList = new ArrayList&lt;&gt;();\n        weekly = findViewById(R.id.weekly);\n        monthly = findViewById(R.id.monthly);\n        yearly = findViewById(R.id.yearly);\n\n        databaseReference.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n\n                for (DataSnapshot dataSnapshot: snapshot.getChildren()) {\n                    salesData = new SalesData();\n                    salesData = dataSnapshot.getValue(SalesData.class);\n                    generalTrendData = new GeneralTrendData();\n                    generalTrendData.setDate(salesData.getUpload_and_sales_date());\n                    generalTrendData.setTotalExpense(salesData.getExpenses());\n                    generalTrendData.setTotalSales(salesData.getTotal_sales());\n                    generalTrendData.setTotalProfLoss(salesData.getProf_loss());\n                    arrayList.add(generalTrendData);\n                }\n\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n                Toast.makeText(GeneralTrendAccess.this,&quot;data fetch error&quot;,Toast.LENGTH_SHORT).show();\n\n            }\n        });\n</code></pre>\n<p>and one of button response function</p>\n<pre><code>weekly.setOnClickListener(e-&gt;{\n            XAxis xAxis = barChart.getXAxis();\n            xAxis.setCenterAxisLabels(true);\n            xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);\n            xAxis.setGranularity(1);\n            xAxis.setGranularityEnabled(true);\n            xAxis.setValueFormatter(new IndexAxisValueFormatter(weeks));\n            barChart.setVisibleXRangeMaximum(4);\n            final Dialog mDialog = new Dialog(GeneralTrendAccess.this);\n            mDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\n            mDialog.setContentView(R.layout.weekly_monthly_requirement);\n            _month = mDialog.findViewById(R.id.field_month);\n            _year = mDialog.findViewById(R.id.field_year);\n            cancelled = mDialog.findViewById(R.id.btn_cancelled);\n            allowed = mDialog.findViewById(R.id.btn_allowed);\n            mDialog.show();\n            mDialog.getWindow().setLayout(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);\n            mDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\n\n            allowed.setOnClickListener(event-&gt;{\n                if ((_month.getText().toString()!=null) &amp;&amp; (_year.getText().toString()!=null)){\n                    makingBars((TreeMap) getWeeklyTrend(Integer.parseInt(_month.getText().toString()),\n                            Integer.parseInt(_year.getText().toString())));\n                }else {\n                    Toast.makeText(this, &quot;some fields are empty&quot;, Toast.LENGTH_SHORT).show();\n                }\n                mDialog.dismiss();\n            });\n\n            cancelled.setOnClickListener(event-&gt;{\n                mDialog.dismiss();\n            });\n        });\n</code></pre>\n<p>and this one of method for setting data to the graph</p>\n<pre><code>@SuppressLint(&quot;SuspiciousIndentation&quot;)\n    public void makingBars(TreeMap treeMap){\n        ArrayList&lt;BarEntry&gt; barEntries = new ArrayList&lt;&gt;();\n        ArrayList&lt;BarEntry&gt; barEntries1 = new ArrayList&lt;&gt;();\n        ArrayList&lt;BarEntry&gt; barEntries2 = new ArrayList&lt;&gt;();\n        if (!treeMap.isEmpty()){\n            Set&lt;Map.Entry&lt;Integer,GraphData&gt;&gt; super_size = treeMap.entrySet();\n            for (Map.Entry&lt;Integer,GraphData&gt; entry : super_size){\n                if (entry != null) {\n                    barEntries.add(new BarEntry(entry.getKey(), (float) entry.getValue().getTs()));\n                    barEntries1.add(new BarEntry(entry.getKey(), (float) entry.getValue().getTe()));\n                    barEntries2.add(new BarEntry(entry.getKey(), (float) entry.getValue().getTpl()));\n                }else {\n                    Toast.makeText(this, &quot;No data added&quot;, Toast.LENGTH_SHORT).show();\n                }\n            }\n\n            if (!barEntries.isEmpty()){\n                BarDataSet profLossSet = new BarDataSet(barEntries2,&quot;Profit/Loss&quot;);\n                profLossSet.setColor(Color.GREEN);\n                BarDataSet totalSalesSet = new BarDataSet(barEntries,&quot;Total Sales&quot;);\n                totalSalesSet.setColor(Color.BLUE);\n                BarDataSet totalExpenseSet = new BarDataSet(barEntries1,&quot;Expenses&quot;);\n                totalExpenseSet.setColor(Color.RED);\n\n\n                BarData trendData = new BarData(totalSalesSet,profLossSet,totalExpenseSet);\n                trendData.setBarWidth(0.15f);\n                barChart.setDragEnabled(true);\n                barChart.zoomOut();\n                barChart.setData(trendData);\n                barChart.groupBars(0,0.5f,0.1f);\n                barChart.invalidate();\n            }else {\n                barChart.setNoDataText(&quot;Nothing to show here yet.&quot;);\n                barChart.setNoDataTextColor(Color.BLACK);\n                barChart.setNoDataTextTypeface(Typeface.DEFAULT);\n            }\n        }else {\n            barChart.setNoDataText(&quot;The month or year entered has no data stored.&quot;);\n            barChart.setNoDataTextColor(Color.BLACK);\n            barChart.setNoDataTextTypeface(Typeface.DEFAULT);\n        }\n\n    }\n</code></pre>\n<p>i tried reviewing the code and even looking up for tutorials and even trying to to check the MPAndroid project examples and doc but i got nothing to help</p>\n"},{"tags":["java","c","tcp","virtual-machine"],"comments":[{"owner":{"account_id":25916036,"reputation":3523,"user_id":19639413,"display_name":"pmacfarlane"},"score":0,"creation_date":1697230557,"post_id":77290434,"comment_id":136258860,"body_markdown":"Where did you run Wireshark - in the host or VM? You probably have a firewall running on one or both of your systems that may block this traffic.","body":"Where did you run Wireshark - in the host or VM? You probably have a firewall running on one or both of your systems that may block this traffic."},{"owner":{"account_id":7024615,"reputation":31237,"user_id":5382650,"display_name":"Craig Estey"},"score":0,"creation_date":1697231295,"post_id":77290434,"comment_id":136258945,"body_markdown":"Expanding on what pmacfarlane said, check that your firewalls are allowing traffic. In shell windows on both windows and ubuntu, can you `ping` the other system? Can you run `firefox` under ubuntu and connect to the internet (e.g. `www.cnn.com`)? Under ubuntu, can you `telnet` into the windows server? The `java` server seems to have an awful lot of complexity. Since you&#39;re writing the client in C, could you write the server in C as well? What are the exact commands given in a shell prompt (both systems) to invoke the requisite programs?","body":"Expanding on what pmacfarlane said, check that your firewalls are allowing traffic. In shell windows on both windows and ubuntu, can you <code>ping</code> the other system? Can you run <code>firefox</code> under ubuntu and connect to the internet (e.g. <code>www.cnn.com</code>)? Under ubuntu, can you <code>telnet</code> into the windows server? The <code>java</code> server seems to have an awful lot of complexity. Since you&#39;re writing the client in C, could you write the server in C as well? What are the exact commands given in a shell prompt (both systems) to invoke the requisite programs?"},{"owner":{"account_id":29666677,"reputation":11,"user_id":22737008,"display_name":"KimOneChan"},"score":0,"creation_date":1697269172,"post_id":77290434,"comment_id":136261127,"body_markdown":"I runned Wireshark on host. I runned server on Eclipse IDE using `Ctrl + F11`. I runned client with command `./tcp_client 192.168.56.1 8080`. I tried `ping 192.168.56.1` on VM and got `64 bytes from192.168.56.1: icmp_seq=1 ttl=128 time=1.99 ms`\n--------------------------------------\n\nWhile writing this comment, I checked the firewall and turned it off. After doing so, everything worked well. It turns out the firewall was the cause. Thank you for your help.","body":"I runned Wireshark on host. I runned server on Eclipse IDE using <code>Ctrl + F11</code>. I runned client with command <code>.&#47;tcp_client 192.168.56.1 8080</code>. I tried <code>ping 192.168.56.1</code> on VM and got <code>64 bytes from192.168.56.1: icmp_seq=1 ttl=128 time=1.99 ms</code> --------------------------------------  While writing this comment, I checked the firewall and turned it off. After doing so, everything worked well. It turns out the firewall was the cause. Thank you for your help."}],"owner":{"account_id":29666677,"reputation":11,"user_id":22737008,"display_name":"KimOneChan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697228449,"creation_date":1697228345,"question_id":77290434,"body_markdown":"I&#39;m making a simple server program in host (Windows 10) and a client program in virtual machine (Ubuntu 22.04)  \r\nThe server program receives an expression from a client, calculates it, and sends the result to the client,  \r\nand the client program sends an expression to a server, and receives the result from the server.\r\n\r\nThis is the server program written in Java.\r\n\r\n```\r\npackage server;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.BufferedWriter;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.io.OutputStream;\r\nimport java.io.OutputStreamWriter;\r\nimport java.net.InetSocketAddress;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\nimport java.net.SocketAddress;\r\n\r\nimport javax.script.ScriptEngine;\r\nimport javax.script.ScriptEngineManager;\r\nimport javax.script.ScriptException;\r\n\r\npublic class TcpServer {\r\n\t\r\n\tprivate static final int SERVER_PORT = 8080;\r\n\tprivate static ServerSocket serverSocket;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// Initialize server socket\r\n\t\ttry {\r\n\t\t\tserverSocket = new ServerSocket(SERVER_PORT);\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;created server socket&quot;);\r\n\t\tSystem.out.println(&quot;IPv4 address: &quot; + serverSocket.getInetAddress());\r\n\t\tSystem.out.println(&quot;port number: &quot; + serverSocket.getLocalPort());\r\n\t\t\r\n\t\ttry {\r\n\t\t\tSystem.out.println(&quot;waiting&quot;);\r\n\t\t\tSocket clientSocket = serverSocket.accept();\r\n\t\t\tSystem.out.println(&quot;connected&quot;);\r\n\t\t\tprocess(clientSocket);\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\ttry {\r\n\t\t\tserverSocket.close();\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static void process(Socket clientSocket) {\r\n\t\ttry (\r\n\t\t\t\tInputStream inputStream = clientSocket.getInputStream();\r\n\t\t\t\tOutputStream outputStream = clientSocket.getOutputStream();\r\n\t\t\t\tInputStreamReader inputStreamReader = new InputStreamReader(inputStream);\r\n\t\t\t\tOutputStreamWriter outputStreamWriter = new OutputStreamWriter(outputStream);\r\n\t\t\t\tBufferedReader bufferedReader = new BufferedReader(inputStreamReader);\r\n\t\t\t\tBufferedWriter bufferedWriter = new BufferedWriter(outputStreamWriter);\r\n\t\t\t\t) {\r\n\t\t\tString expression = bufferedReader.readLine();\r\n\t\t\tSystem.out.println(&quot;expression: &quot; + expression);\r\n\t\t\tString result = calculate(expression);\r\n\t\t\tSystem.out.println(&quot;answer: &quot; + result);\r\n\t\t\tbufferedWriter.write(result);\r\n\t\t\tbufferedWriter.flush();\r\n\t\t\tSystem.out.println(&quot;sended result&quot;);\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static String calculate(String expression) {\r\n\t\tScriptEngineManager scriptEngineManager = new ScriptEngineManager();\r\n\t\tScriptEngine scriptEngine = scriptEngineManager.getEngineByName(&quot;JavaScript&quot;);\r\n\t\t\r\n\t\tString result = null;\r\n\t\ttry {\r\n\t\t\tresult = (String) scriptEngine.eval(expression);\r\n\t\t} catch (ScriptException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\treturn result;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAnd this is the client program written in C.\r\n\r\n```\r\n#include &lt;stdio.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n#include &lt;string.h&gt;\r\n#include &lt;unistd.h&gt;\r\n#include &lt;arpa/inet.h&gt;\r\n#include &lt;sys/socket.h&gt;\r\n\r\nvoid error_handling(char *message);\r\n\r\nint main(int argc, char* argv[]) {\r\n    int sock;\r\n    struct sockaddr_in serv_addr;\r\n    char result[1024] = {&#39;\\0&#39;};\r\n    int str_len;\r\n   \r\n    if (argc != 3) {\r\n    \tprintf(&quot;Usage : %s &lt;IP&gt; &lt;port&gt; \\n&quot;, argv[0]);\r\n        exit(1);\r\n    }\r\n   \r\n    sock = socket(PF_INET, SOCK_STREAM, 0);\r\n   \r\n    if (sock == -1) {\r\n        error_handling(&quot;socket() error&quot;);\r\n    }\r\n   \r\n    memset(&amp;serv_addr, 0, sizeof(serv_addr));\r\n    serv_addr.sin_family = AF_INET;\r\n    serv_addr.sin_addr.s_addr = inet_addr(argv[1]);\r\n    serv_addr.sin_port = htons(atoi(argv[2]));\r\n   \r\n    if (connect(sock, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr)) == -1) {\r\n        error_handling(&quot;connect() error!&quot;);\r\n    }\r\n    printf(&quot;connected&quot;);\r\n\t\r\n    char expr[1024];\r\n    printf(&quot;enter expression.\\n&quot;);\r\n    fgets(expr, 1024, stdin);\r\n    if (send(sock, expr, 1024, 0) == -1) {\r\n        printf(&quot;send() error&quot;);\r\n    }\r\n   \r\n    if (recv(sock, result, 1024, 0) == -1) {\r\n        error_handling(&quot;read() error!&quot;);\r\n    }\r\n       \r\n    printf(&quot;Message from server: %s \\n&quot;, result);\r\n   \r\n    close(sock);\r\n   \r\n    return 0;\r\n}\r\n\r\nvoid error_handling(char *message) {\r\n    fputs(message, stderr);\r\n    fputc(&#39;\\n&#39;, stderr);\r\n    exit(1);\r\n}\r\n```\r\n\r\nI checked VirtualBox Host-Only Ethernet Adapter of VirtuaBox and it was like this:\r\n\r\n```\r\nAdapter\r\nIPv4 address: 192.168.56.1\r\nIPv4 subnet mask: 255.255.255.0\r\n\r\nDHCP server (Enabled)\r\nServer address: 192.168.56.100\r\nServer mask: 255.255.255.0\r\nLowest address: 192.168.56.101\r\nHighest address: 192.168.56.254\r\n```\r\n\r\nAnd I checked Ubuntu 22.04 virtual machine&#39;s network configuration and it was like this:\r\n\r\n```\r\nAdapter #1: enabled\r\nConnected to NAT\r\n\r\nAdapter #2: enabled\r\nConnected to Host-Only Adapter\r\nName: VirtualBox Host-Only Ethernet Adapter\r\n```\r\n\r\nI checked &#39;ipconfig&#39; in host(Windows 10) and it was like this:\r\n\r\n```\r\nEthernet Adapter Ethernet\r\n~~~\r\n   IPv4 Address . . . . . . . . . : 192.168.56.1\r\n   Subnet Mask . . . . . . . : 255.255.255.0\r\n~~~\r\n```\r\n\r\nAnd checked &#39;ifconfig&#39; in virtual machine(Ubuntu 22.04) and it was like this:\r\n\r\n```\r\nenp0s8: ...\r\n    inet 192.168.56.101 netmask 255.255.255.0 broadcast 192.168.56.255\r\n```\r\n\r\nI executed the server program and the client program, but the server program prints &quot;created server socket \\~\\~\\~ port number: 8080&quot;, the client program prints nothing, and no more happens.\r\n\r\nI executed Wireshark and checked Ethernet.\r\n\r\n```\r\nTransmission Control Protocol, Src Port: 58930, Dst Port: 8080, Seq: 0, Len: 0\r\n```\r\n\r\nIt seems that any connection is not made between the server and the client. What should I do to make a connection between them?\r\n\r\nI checked &quot;ipconfig&quot; in the host, &quot;ifconfig&quot; in the VM and Wireshark.   \r\nThe server program is expected to print &quot;connected&quot; and the client program is expected to get an expression but none of them happens.","title":"TCP communication using VirtualBox","body":"<p>I'm making a simple server program in host (Windows 10) and a client program in virtual machine (Ubuntu 22.04)<br />\nThe server program receives an expression from a client, calculates it, and sends the result to the client,<br />\nand the client program sends an expression to a server, and receives the result from the server.</p>\n<p>This is the server program written in Java.</p>\n<pre><code>package server;\n\nimport java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.OutputStream;\nimport java.io.OutputStreamWriter;\nimport java.net.InetSocketAddress;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.net.SocketAddress;\n\nimport javax.script.ScriptEngine;\nimport javax.script.ScriptEngineManager;\nimport javax.script.ScriptException;\n\npublic class TcpServer {\n    \n    private static final int SERVER_PORT = 8080;\n    private static ServerSocket serverSocket;\n\n    public static void main(String[] args) {\n        // Initialize server socket\n        try {\n            serverSocket = new ServerSocket(SERVER_PORT);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        System.out.println(&quot;created server socket&quot;);\n        System.out.println(&quot;IPv4 address: &quot; + serverSocket.getInetAddress());\n        System.out.println(&quot;port number: &quot; + serverSocket.getLocalPort());\n        \n        try {\n            System.out.println(&quot;waiting&quot;);\n            Socket clientSocket = serverSocket.accept();\n            System.out.println(&quot;connected&quot;);\n            process(clientSocket);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        \n        try {\n            serverSocket.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n    \n    private static void process(Socket clientSocket) {\n        try (\n                InputStream inputStream = clientSocket.getInputStream();\n                OutputStream outputStream = clientSocket.getOutputStream();\n                InputStreamReader inputStreamReader = new InputStreamReader(inputStream);\n                OutputStreamWriter outputStreamWriter = new OutputStreamWriter(outputStream);\n                BufferedReader bufferedReader = new BufferedReader(inputStreamReader);\n                BufferedWriter bufferedWriter = new BufferedWriter(outputStreamWriter);\n                ) {\n            String expression = bufferedReader.readLine();\n            System.out.println(&quot;expression: &quot; + expression);\n            String result = calculate(expression);\n            System.out.println(&quot;answer: &quot; + result);\n            bufferedWriter.write(result);\n            bufferedWriter.flush();\n            System.out.println(&quot;sended result&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n    \n    private static String calculate(String expression) {\n        ScriptEngineManager scriptEngineManager = new ScriptEngineManager();\n        ScriptEngine scriptEngine = scriptEngineManager.getEngineByName(&quot;JavaScript&quot;);\n        \n        String result = null;\n        try {\n            result = (String) scriptEngine.eval(expression);\n        } catch (ScriptException e) {\n            e.printStackTrace();\n        }\n        \n        return result;\n    }\n\n}\n</code></pre>\n<p>And this is the client program written in C.</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/socket.h&gt;\n\nvoid error_handling(char *message);\n\nint main(int argc, char* argv[]) {\n    int sock;\n    struct sockaddr_in serv_addr;\n    char result[1024] = {'\\0'};\n    int str_len;\n   \n    if (argc != 3) {\n        printf(&quot;Usage : %s &lt;IP&gt; &lt;port&gt; \\n&quot;, argv[0]);\n        exit(1);\n    }\n   \n    sock = socket(PF_INET, SOCK_STREAM, 0);\n   \n    if (sock == -1) {\n        error_handling(&quot;socket() error&quot;);\n    }\n   \n    memset(&amp;serv_addr, 0, sizeof(serv_addr));\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_addr.s_addr = inet_addr(argv[1]);\n    serv_addr.sin_port = htons(atoi(argv[2]));\n   \n    if (connect(sock, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr)) == -1) {\n        error_handling(&quot;connect() error!&quot;);\n    }\n    printf(&quot;connected&quot;);\n    \n    char expr[1024];\n    printf(&quot;enter expression.\\n&quot;);\n    fgets(expr, 1024, stdin);\n    if (send(sock, expr, 1024, 0) == -1) {\n        printf(&quot;send() error&quot;);\n    }\n   \n    if (recv(sock, result, 1024, 0) == -1) {\n        error_handling(&quot;read() error!&quot;);\n    }\n       \n    printf(&quot;Message from server: %s \\n&quot;, result);\n   \n    close(sock);\n   \n    return 0;\n}\n\nvoid error_handling(char *message) {\n    fputs(message, stderr);\n    fputc('\\n', stderr);\n    exit(1);\n}\n</code></pre>\n<p>I checked VirtualBox Host-Only Ethernet Adapter of VirtuaBox and it was like this:</p>\n<pre><code>Adapter\nIPv4 address: 192.168.56.1\nIPv4 subnet mask: 255.255.255.0\n\nDHCP server (Enabled)\nServer address: 192.168.56.100\nServer mask: 255.255.255.0\nLowest address: 192.168.56.101\nHighest address: 192.168.56.254\n</code></pre>\n<p>And I checked Ubuntu 22.04 virtual machine's network configuration and it was like this:</p>\n<pre><code>Adapter #1: enabled\nConnected to NAT\n\nAdapter #2: enabled\nConnected to Host-Only Adapter\nName: VirtualBox Host-Only Ethernet Adapter\n</code></pre>\n<p>I checked 'ipconfig' in host(Windows 10) and it was like this:</p>\n<pre><code>Ethernet Adapter Ethernet\n~~~\n   IPv4 Address . . . . . . . . . : 192.168.56.1\n   Subnet Mask . . . . . . . : 255.255.255.0\n~~~\n</code></pre>\n<p>And checked 'ifconfig' in virtual machine(Ubuntu 22.04) and it was like this:</p>\n<pre><code>enp0s8: ...\n    inet 192.168.56.101 netmask 255.255.255.0 broadcast 192.168.56.255\n</code></pre>\n<p>I executed the server program and the client program, but the server program prints &quot;created server socket ~~~ port number: 8080&quot;, the client program prints nothing, and no more happens.</p>\n<p>I executed Wireshark and checked Ethernet.</p>\n<pre><code>Transmission Control Protocol, Src Port: 58930, Dst Port: 8080, Seq: 0, Len: 0\n</code></pre>\n<p>It seems that any connection is not made between the server and the client. What should I do to make a connection between them?</p>\n<p>I checked &quot;ipconfig&quot; in the host, &quot;ifconfig&quot; in the VM and Wireshark.<br />\nThe server program is expected to print &quot;connected&quot; and the client program is expected to get an expression but none of them happens.</p>\n"},{"tags":["java","image","base64","arrays"],"comments":[{"owner":{"account_id":222406,"reputation":13699,"user_id":480975,"display_name":"lpiepiora"},"score":1,"creation_date":1375336294,"post_id":17986092,"comment_id":26296140,"body_markdown":"And what&#39;s your problem exactly?","body":"And what&#39;s your problem exactly?"},{"owner":{"account_id":390163,"reputation":17713,"user_id":750040,"accept_rate":68,"display_name":"Santosh"},"score":0,"creation_date":1375336418,"post_id":17986092,"comment_id":26296168,"body_markdown":"Yes. Thats correct way of doing it.","body":"Yes. Thats correct way of doing it."},{"owner":{"account_id":926701,"reputation":1165,"user_id":957359,"accept_rate":47,"display_name":"jcrshankar"},"score":0,"creation_date":1375336686,"post_id":17986092,"comment_id":26296266,"body_markdown":"i just want to confirm the way am doing is right,, because i need to pass the result ot webserivice request.","body":"i just want to confirm the way am doing is right,, because i need to pass the result ot webserivice request."}],"answers":[{"tags":[],"owner":{"account_id":2646969,"reputation":3091,"user_id":2289448,"accept_rate":56,"display_name":"Alok Agarwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375337194,"creation_date":1375337194,"answer_id":17986325,"question_id":17986092,"body_markdown":"if its not working than you can use\r\n\r\n\r\n    fileData.encode(&#39;base64&#39;)\r\n\r\n\r\nthis will solve the purpose","title":"How to convert blob image into binarybase64 in java?","body":"<p>if its not working than you can use</p>\n\n<pre><code>fileData.encode('base64')\n</code></pre>\n\n<p>this will solve the purpose</p>\n"},{"tags":[],"owner":{"account_id":1972221,"reputation":16711,"user_id":1770868,"accept_rate":95,"display_name":"Ahmad Aghazadeh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500624917,"creation_date":1500624917,"answer_id":45232515,"question_id":17986092,"body_markdown":"Try this code:\r\n\r\n       String imgString = Base64.encodeToString(bytes, \r\n                       Base64.NO_WRAP);","title":"How to convert blob image into binarybase64 in java?","body":"<p>Try this code:</p>\n\n<pre><code>   String imgString = Base64.encodeToString(bytes, \n                   Base64.NO_WRAP);\n</code></pre>\n"}],"owner":{"account_id":926701,"reputation":1165,"user_id":957359,"accept_rate":47,"display_name":"jcrshankar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16277,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697227600,"creation_date":1375336141,"question_id":17986092,"body_markdown":"I have image in blob format from DB , i am holding that blob image in byte array and  converting it to Binary Base64 format.\r\n\r\nFor encoding the blob to binary base 64 I am using below code,\r\n\r\n     byte[] imageByte = getblob();//from DB\r\n     byte[] encodedImage = Base64.encodeBase64(imageByte);\r\n\r\nis there any other way to do it or am doing it in right way please help me?","title":"How to convert blob image into binarybase64 in java?","body":"<p>I have image in blob format from DB , i am holding that blob image in byte array and  converting it to Binary Base64 format.</p>\n\n<p>For encoding the blob to binary base 64 I am using below code,</p>\n\n<pre><code> byte[] imageByte = getblob();//from DB\n byte[] encodedImage = Base64.encodeBase64(imageByte);\n</code></pre>\n\n<p>is there any other way to do it or am doing it in right way please help me?</p>\n"},{"tags":["java","spring-boot","hibernate-envers","spring-data-envers"],"owner":{"account_id":28714365,"reputation":1,"user_id":21989260,"display_name":"Kaian Luciano Alves Dos Santos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697227566,"creation_date":1697227566,"question_id":77290381,"body_markdown":"I am auditing an entity called Form, it has a relationship with two other entities, but the method it implements is annotated with transactional, thus reviewing only one entity, if I remove the transactional it will go, but if there is an error when saving any of the entities what has already been saved is not undone.\r\n\r\nBeing able to save the form by auditing its relationships without interfering with the transaction","title":"Audit of 1 entity with 3 relationships causes error","body":"<p>I am auditing an entity called Form, it has a relationship with two other entities, but the method it implements is annotated with transactional, thus reviewing only one entity, if I remove the transactional it will go, but if there is an error when saving any of the entities what has already been saved is not undone.</p>\n<p>Being able to save the form by auditing its relationships without interfering with the transaction</p>\n"},{"tags":["java","spring","tomcat","spring-boot-3"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1672915853,"post_id":75017269,"comment_id":132382500,"body_markdown":"Spring Boot 3 requires JDK17 and a JakartaEE container (this is all mentioned in the documentation). So you will need at least Tomcat10.0. Tomcat9 is a JavaEE server. As you can see when using the main your local Tomcat isn&#39;t even being used -&gt; `Starting Servlet engine: [Apache Tomcat/10.1.4]` as it will use the embedded instance.","body":"Spring Boot 3 requires JDK17 and a JakartaEE container (this is all mentioned in the documentation). So you will need at least Tomcat10.0. Tomcat9 is a JavaEE server. As you can see when using the main your local Tomcat isn&#39;t even being used -&gt; <code>Starting Servlet engine: [Apache Tomcat&#47;10.1.4]</code> as it will use the embedded instance."}],"answers":[{"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1672951565,"post_id":75017781,"comment_id":132394969,"body_markdown":"this isn&#39;t &quot;just&quot; package renaming btw, it&#39;s an entire specification","body":"this isn&#39;t &quot;just&quot; package renaming btw, it&#39;s an entire specification"}],"tags":[],"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1672918392,"creation_date":1672918392,"answer_id":75017781,"question_id":75017269,"body_markdown":"Spring boot 3 requires at least JDK17 and Tomcat 10 due to the package renaming from javax to jakarta.\r\n\r\nTomcat 9 does not work with jakarta packages which were changes introduced in Spring 6/Spring boot 3.\r\n\r\nIf you want to stay on Tomcat 9 you will need to downgrade to Spring boot version 2.x.x, any Spring boot 3 version will require Tomcat upgrade to version 10.","title":"Spring boot 3.0.1 application not running on tomcat9 external server","body":"<p>Spring boot 3 requires at least JDK17 and Tomcat 10 due to the package renaming from javax to jakarta.</p>\n<p>Tomcat 9 does not work with jakarta packages which were changes introduced in Spring 6/Spring boot 3.</p>\n<p>If you want to stay on Tomcat 9 you will need to downgrade to Spring boot version 2.x.x, any Spring boot 3 version will require Tomcat upgrade to version 10.</p>\n"}],"owner":{"account_id":25641738,"reputation":45,"user_id":19410521,"display_name":"Theo Huwume"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3190,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75017781,"answer_count":1,"score":2,"last_activity_date":1697227192,"creation_date":1672915708,"question_id":75017269,"body_markdown":"When using my Eclipse&#39;s Tomcat9 server (v9.0.62), my &quot;application&quot; runs normally.\r\nOnce deployed on my production server however (v9.0.43), 404 is returned.\r\nNo stacktraces are being logged by Tomcat.\r\n\r\nBoth servers use OpenJDK17 as JDK.\r\nThis problem does not happen when using versions of Spring &lt; 6.\r\n\r\n\r\nEclipse console output:\r\n```\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.0.1)\r\n\r\n2023-01-05T11:07:33.198+01:00  INFO 28395 --- [           main] com.example.demo.DemoApplication         : Starting DemoApplication using Java 17.0.5 with PID 28395 (/home/-----/demo/target/classes started by ----- in /home/-----/demo)\r\n2023-01-05T11:07:33.207+01:00  INFO 28395 --- [           main] com.example.demo.DemoApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-01-05T11:07:34.391+01:00  INFO 28395 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8081 (http)\r\n2023-01-05T11:07:34.403+01:00  INFO 28395 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-01-05T11:07:34.404+01:00  INFO 28395 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.4]\r\n2023-01-05T11:07:34.530+01:00  INFO 28395 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-01-05T11:07:34.532+01:00  INFO 28395 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1263 ms\r\n2023-01-05T11:07:34.889+01:00  INFO 28395 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8081 (http) with context path &#39;&#39;\r\n2023-01-05T11:07:34.895+01:00  INFO 28395 --- [           main] com.example.demo.DemoApplication         : Started DemoApplication in 2.316 seconds (process running for 2.652)\r\n2023-01-05T11:07:47.016+01:00  INFO 28395 --- [nio-8081-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-01-05T11:07:47.016+01:00  INFO 28395 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-01-05T11:07:47.017+01:00  INFO 28395 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n```\r\n\r\nWhen building (maven clean install) the war file, still no issue:\r\n```\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; com.example:demo &gt;--------------------------\r\n[INFO] Building demo 0.0.1-SNAPSHOT\r\n[INFO] --------------------------------[ war ]---------------------------------\r\n[INFO] \r\n[INFO] --- maven-clean-plugin:3.2.0:clean (default-clean) @ demo ---\r\n[INFO] Deleting /home/-----/demo/target\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:3.3.0:resources (default-resources) @ demo ---\r\n[INFO] Copying 1 resource\r\n[INFO] Copying 0 resource\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ demo ---\r\n[INFO] Changes detected - recompiling the module!\r\n[INFO] Compiling 3 source files to /home/-----/demo/target/classes\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:3.3.0:testResources (default-testResources) @ demo ---\r\n[INFO] Not copying test resources\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.10.1:testCompile (default-testCompile) @ demo ---\r\n[INFO] Not compiling test sources\r\n[INFO] \r\n[INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ demo ---\r\n[INFO] Tests are skipped.\r\n[INFO] \r\n[INFO] --- maven-war-plugin:3.3.2:war (default-war) @ demo ---\r\n[INFO] Packaging webapp\r\n[INFO] Assembling webapp [demo] in [/home/-----/demo/target/demo-0.0.1-SNAPSHOT]\r\n[INFO] Processing war project\r\n[INFO] Copying webapp resources [/home/-----/demo/src/main/webapp]\r\n[INFO] Building war: /home/-----/demo/target/demo-0.0.1-SNAPSHOT.war\r\n[INFO] \r\n[INFO] --- spring-boot-maven-plugin:3.0.1:repackage (repackage) @ demo ---\r\n[INFO] Replacing main artifact with repackaged archive\r\n[INFO] \r\n[INFO] --- maven-install-plugin:3.0.1:install (default-install) @ demo ---\r\n[INFO] Installing /home/-----/demo/pom.xml to /home/--/.m2/repository/com/example/demo/0.0.1-SNAPSHOT/demo-0.0.1-SNAPSHOT.pom\r\n[INFO] Installing /home/-----/demo/target/demo-0.0.1-SNAPSHOT.war to /home/--/.m2/repository/com/example/demo/0.0.1-SNAPSHOT/demo-0.0.1-SNAPSHOT.war\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  3.232 s\r\n[INFO] Finished at: 2023-01-05T11:09:35+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n\r\npom.xml:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n&lt;!--\t\t&lt;tomcat.version&gt;9.0.62&lt;/tomcat.version&gt;--&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nApplication:\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nServletInitializer:\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.builder.SpringApplicationBuilder;\r\nimport org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\r\n\r\npublic class ServletInitializer extends SpringBootServletInitializer {\r\n\r\n\t@Override\r\n\tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n\t\treturn application.sources(DemoApplication.class);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nController:\r\n```java\r\npackage com.example.demo.ctrl;\r\n\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.ResponseBody;\r\n\r\n@Controller\r\npublic class MainController {\r\n\r\n\t@GetMapping(value = &quot;/&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\r\n\tpublic @ResponseBody String getMain() {\r\n\t\treturn &quot;super&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nExpected (Eclipse&#39;s server):\r\n\r\n[![enter image description here](https://i.stack.imgur.com/MX8es.png)](https://i.stack.imgur.com/MX8es.png)\r\n\r\nFound (Production server):\r\n\r\n[![enter image description here](https://i.stack.imgur.com/iI5t3.png)](https://i.stack.imgur.com/iI5t3.png)\r\n[![enter image description here](https://i.stack.imgur.com/jufJO.png)](https://i.stack.imgur.com/jufJO.png)\r\n\r\n\r\nTo pinpoint the problem (as my project is rather large), I reproduced the issue with a simple app based on Spring Initializr.\r\n\r\nI attempted tweaking the pom.xml to no avail.\r\n","title":"Spring boot 3.0.1 application not running on tomcat9 external server","body":"<p>When using my Eclipse's Tomcat9 server (v9.0.62), my &quot;application&quot; runs normally.\nOnce deployed on my production server however (v9.0.43), 404 is returned.\nNo stacktraces are being logged by Tomcat.</p>\n<p>Both servers use OpenJDK17 as JDK.\nThis problem does not happen when using versions of Spring &lt; 6.</p>\n<p>Eclipse console output:</p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.1)\n\n2023-01-05T11:07:33.198+01:00  INFO 28395 --- [           main] com.example.demo.DemoApplication         : Starting DemoApplication using Java 17.0.5 with PID 28395 (/home/-----/demo/target/classes started by ----- in /home/-----/demo)\n2023-01-05T11:07:33.207+01:00  INFO 28395 --- [           main] com.example.demo.DemoApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-01-05T11:07:34.391+01:00  INFO 28395 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8081 (http)\n2023-01-05T11:07:34.403+01:00  INFO 28395 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-01-05T11:07:34.404+01:00  INFO 28395 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.4]\n2023-01-05T11:07:34.530+01:00  INFO 28395 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-01-05T11:07:34.532+01:00  INFO 28395 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1263 ms\n2023-01-05T11:07:34.889+01:00  INFO 28395 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8081 (http) with context path ''\n2023-01-05T11:07:34.895+01:00  INFO 28395 --- [           main] com.example.demo.DemoApplication         : Started DemoApplication in 2.316 seconds (process running for 2.652)\n2023-01-05T11:07:47.016+01:00  INFO 28395 --- [nio-8081-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-01-05T11:07:47.016+01:00  INFO 28395 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-01-05T11:07:47.017+01:00  INFO 28395 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n</code></pre>\n<p>When building (maven clean install) the war file, still no issue:</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; com.example:demo &gt;--------------------------\n[INFO] Building demo 0.0.1-SNAPSHOT\n[INFO] --------------------------------[ war ]---------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:3.2.0:clean (default-clean) @ demo ---\n[INFO] Deleting /home/-----/demo/target\n[INFO] \n[INFO] --- maven-resources-plugin:3.3.0:resources (default-resources) @ demo ---\n[INFO] Copying 1 resource\n[INFO] Copying 0 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ demo ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 3 source files to /home/-----/demo/target/classes\n[INFO] \n[INFO] --- maven-resources-plugin:3.3.0:testResources (default-testResources) @ demo ---\n[INFO] Not copying test resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.10.1:testCompile (default-testCompile) @ demo ---\n[INFO] Not compiling test sources\n[INFO] \n[INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ demo ---\n[INFO] Tests are skipped.\n[INFO] \n[INFO] --- maven-war-plugin:3.3.2:war (default-war) @ demo ---\n[INFO] Packaging webapp\n[INFO] Assembling webapp [demo] in [/home/-----/demo/target/demo-0.0.1-SNAPSHOT]\n[INFO] Processing war project\n[INFO] Copying webapp resources [/home/-----/demo/src/main/webapp]\n[INFO] Building war: /home/-----/demo/target/demo-0.0.1-SNAPSHOT.war\n[INFO] \n[INFO] --- spring-boot-maven-plugin:3.0.1:repackage (repackage) @ demo ---\n[INFO] Replacing main artifact with repackaged archive\n[INFO] \n[INFO] --- maven-install-plugin:3.0.1:install (default-install) @ demo ---\n[INFO] Installing /home/-----/demo/pom.xml to /home/--/.m2/repository/com/example/demo/0.0.1-SNAPSHOT/demo-0.0.1-SNAPSHOT.pom\n[INFO] Installing /home/-----/demo/target/demo-0.0.1-SNAPSHOT.war to /home/--/.m2/repository/com/example/demo/0.0.1-SNAPSHOT/demo-0.0.1-SNAPSHOT.war\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  3.232 s\n[INFO] Finished at: 2023-01-05T11:09:35+01:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n&lt;!--        &lt;tomcat.version&gt;9.0.62&lt;/tomcat.version&gt;--&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Application:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>ServletInitializer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\n\npublic class ServletInitializer extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(DemoApplication.class);\n    }\n\n}\n</code></pre>\n<p>Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo.ctrl;\n\nimport org.springframework.http.MediaType;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\n@Controller\npublic class MainController {\n\n    @GetMapping(value = &quot;/&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\n    public @ResponseBody String getMain() {\n        return &quot;super&quot;;\n    }\n}\n</code></pre>\n<p>Expected (Eclipse's server):</p>\n<p><a href=\"https://i.stack.imgur.com/MX8es.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MX8es.png\" alt=\"enter image description here\" /></a></p>\n<p>Found (Production server):</p>\n<p><a href=\"https://i.stack.imgur.com/iI5t3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iI5t3.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/jufJO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jufJO.png\" alt=\"enter image description here\" /></a></p>\n<p>To pinpoint the problem (as my project is rather large), I reproduced the issue with a simple app based on Spring Initializr.</p>\n<p>I attempted tweaking the pom.xml to no avail.</p>\n"},{"tags":["java","mirth"],"answers":[{"comments":[{"owner":{"account_id":1900288,"reputation":21,"user_id":1716278,"display_name":"user1716278"},"score":1,"creation_date":1349262949,"post_id":12705232,"comment_id":17156633,"body_markdown":"Using Mirth 2.2 version and increased the Mirth heap size from 256 MB to 1024 MB which is compatible with OS memory but still getting same error.","body":"Using Mirth 2.2 version and increased the Mirth heap size from 256 MB to 1024 MB which is compatible with OS memory but still getting same error."},{"owner":{"account_id":1900288,"reputation":21,"user_id":1716278,"display_name":"user1716278"},"score":0,"creation_date":1349263464,"post_id":12705232,"comment_id":17156848,"body_markdown":"Can you tell me where exactly I am suppose to set heap size to resolve this issue?","body":"Can you tell me where exactly I am suppose to set heap size to resolve this issue?"},{"owner":{"account_id":45159,"reputation":820,"user_id":133013,"display_name":"dividius"},"score":0,"creation_date":1349335972,"post_id":12705232,"comment_id":17181417,"body_markdown":"I suppose I was asking the same question in two different ways. In Mirth 2.0+ I believe there is an option in Settings to increase it. In  earlier versions you had to modify a configuration file.","body":"I suppose I was asking the same question in two different ways. In Mirth 2.0+ I believe there is an option in Settings to increase it. In  earlier versions you had to modify a configuration file."}],"tags":[],"owner":{"account_id":45159,"reputation":820,"user_id":133013,"display_name":"dividius"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1349255371,"creation_date":1349255371,"answer_id":12705232,"question_id":12703556,"body_markdown":"What version of Mirth are you running?\r\nWhat did you set the Heap size to, and where did you set it?\r\n\r\nHave you confirmed that the increased heap size is compatible with your OS memory limit? For example, I encountered this problem on Mirth 1.8 a couple of years ago and ended up increasing the memory available to my VM (to 1.5 from 1GB) in addition to changing the heap size setting.","title":"Out of memory error while processing message in Mirth","body":"<p>What version of Mirth are you running?\nWhat did you set the Heap size to, and where did you set it?</p>\n\n<p>Have you confirmed that the increased heap size is compatible with your OS memory limit? For example, I encountered this problem on Mirth 1.8 a couple of years ago and ended up increasing the memory available to my VM (to 1.5 from 1GB) in addition to changing the heap size setting.</p>\n"},{"tags":[],"owner":{"account_id":44503,"reputation":21986,"user_id":130673,"accept_rate":100,"display_name":"csj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1349392190,"creation_date":1349392190,"answer_id":12737310,"question_id":12703556,"body_markdown":"Go to the directory in which you installed Mirth. From the conf directory, open file wrapper.conf. Locate the line:\r\n\r\nwrapper.java.maxmemory=256\r\n\r\nIncrease the number as necessary, being careful to leave overhead for the rest of your server to function.","title":"Out of memory error while processing message in Mirth","body":"<p>Go to the directory in which you installed Mirth. From the conf directory, open file wrapper.conf. Locate the line:</p>\n\n<p>wrapper.java.maxmemory=256</p>\n\n<p>Increase the number as necessary, being careful to leave overhead for the rest of your server to function.</p>\n"},{"comments":[{"owner":{"account_id":375698,"reputation":346,"user_id":726707,"display_name":"KTYP"},"score":0,"creation_date":1488563739,"post_id":37407018,"comment_id":72303245,"body_markdown":"Also you might need to increase the memory size in mcservice.vmoptions and make sure you restart the service","body":"Also you might need to increase the memory size in mcservice.vmoptions and make sure you restart the service"}],"tags":[],"owner":{"account_id":3511610,"reputation":3120,"user_id":2935802,"display_name":"Sudhakar"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1464076182,"creation_date":1464074897,"answer_id":37407018,"question_id":12703556,"body_markdown":"In the Mirth 3.3.1 or later versions, To increase the heap size for\r\n\r\n**Mirth Server**\r\n\r\n1. Go to mirth installation directory and Change the value in **C:\\Program Files\\Mirth Connect\\mcserver.vmoptions**\r\n Change the Value for **&#39;-Xmx256m&#39;** to **&#39;-Xmx1024m&#39;**. This line sets the vlaues to 1GB.\r\n\r\nEG:\r\n\r\n    -server\r\n    -Xmx512m\r\n    -Djava.awt.headless=true\r\n\r\n**Mirth Client**\r\n\r\n1. Go to mirth installation directory and go to **Config** directory and Change the value in **C:\\Program Files\\Mirth Connect\\conf\\mirth.properties**\r\n\r\nChange the property value for **administrator.maxheapsize** = 512m\r\nEg:\r\n\r\n    # administrator\r\n    administrator.maxheapsize = 512m\r\n\r\nAfter these changes, please restart the mirth services.\r\n","title":"Out of memory error while processing message in Mirth","body":"<p>In the Mirth 3.3.1 or later versions, To increase the heap size for</p>\n\n<p><strong>Mirth Server</strong></p>\n\n<ol>\n<li>Go to mirth installation directory and Change the value in <strong>C:\\Program Files\\Mirth Connect\\mcserver.vmoptions</strong>\nChange the Value for <strong>'-Xmx256m'</strong> to <strong>'-Xmx1024m'</strong>. This line sets the vlaues to 1GB.</li>\n</ol>\n\n<p>EG:</p>\n\n<pre><code>-server\n-Xmx512m\n-Djava.awt.headless=true\n</code></pre>\n\n<p><strong>Mirth Client</strong></p>\n\n<ol>\n<li>Go to mirth installation directory and go to <strong>Config</strong> directory and Change the value in <strong>C:\\Program Files\\Mirth Connect\\conf\\mirth.properties</strong></li>\n</ol>\n\n<p>Change the property value for <strong>administrator.maxheapsize</strong> = 512m\nEg:</p>\n\n<pre><code># administrator\nadministrator.maxheapsize = 512m\n</code></pre>\n\n<p>After these changes, please restart the mirth services.</p>\n"},{"tags":[],"owner":{"account_id":15011496,"reputation":1072,"user_id":10835842,"display_name":"Gurdeep Singh Sidhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662117372,"creation_date":1662117372,"answer_id":73581725,"question_id":12703556,"body_markdown":"open mirth server manager and update the server memory to as per requirement.\r\nFor me the initial value was 256 MB, I changed it to 512 MB and then to 4096 MB","title":"Out of memory error while processing message in Mirth","body":"<p>open mirth server manager and update the server memory to as per requirement.\nFor me the initial value was 256 MB, I changed it to 512 MB and then to 4096 MB</p>\n"}],"owner":{"account_id":1900288,"reputation":21,"user_id":1716278,"display_name":"user1716278"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12733,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1697227068,"creation_date":1349248393,"question_id":12703556,"body_markdown":"Mirth service is giving the following error in one of my channels while retrieving processed messages\r\n\r\n&gt; There was an out of memory error when trying to retrieve messages. Increase your heap size or decrease your page size and search again.\r\n\r\nI tried by increasing heap size but it didn&#39;t work. I was able to retrieve messages only when my page size is 5 or less. Otherwise I am getting the same error. Can anyone tell me how to retrieve processed messages without encountering this error?","title":"Out of memory error while processing message in Mirth","body":"<p>Mirth service is giving the following error in one of my channels while retrieving processed messages</p>\n\n<blockquote>\n  <p>There was an out of memory error when trying to retrieve messages. Increase your heap size or decrease your page size and search again.</p>\n</blockquote>\n\n<p>I tried by increasing heap size but it didn't work. I was able to retrieve messages only when my page size is 5 or less. Otherwise I am getting the same error. Can anyone tell me how to retrieve processed messages without encountering this error?</p>\n"},{"tags":["java","css","themes","vaadin-flow"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1607846489,"post_id":65268904,"comment_id":115396912,"body_markdown":"Perhaps this new video on YouTube can help: [*Styling Web Components with Shadow DOM: CSS variables, parts, shared styles*](https://youtu.be/Y0uxb4ga44Y)","body":"Perhaps this new video on YouTube can help: <a href=\"https://youtu.be/Y0uxb4ga44Y\" rel=\"nofollow noreferrer\"><i>Styling Web Components with Shadow DOM: CSS variables, parts, shared styles</i></a>"}],"answers":[{"tags":[],"owner":{"account_id":15426288,"reputation":1199,"user_id":11982497,"display_name":"Tarek Oraby"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607929379,"creation_date":1607929379,"answer_id":65284864,"question_id":65268904,"body_markdown":"You cannot apply a Local Style Scope to your custom component, `HelloComponent`, because it doesn&#39;t even have a Shadow DOM. Local Style Scopes are relevant for regular Vaadin components (such as a `TextField` or a `Button`) because these components have a Shadow DOM. In your case, `HelloComponent` has to use the global style scope using regular CSS selectors. You can do this in Java code using the component&#39;s `getStyle()` method:\r\n```\r\nHelloComponent helloComponent = new HelloComponent();\r\nhelloComponent.getStyle().set(&quot;color&quot;, &quot;red&quot;);\r\n```\r\nOr, alternatively, you can import a global style sheet using the `@CssImport` annotation, then in this style sheet, target your `HelloComponent` using the regular CSS selectors. For example, you can add `@CssImport(&quot;./shared-styles.css&quot;)` to one of your classes, then in `shared-styles.css` place the following style:\r\n```\r\nhello {\r\n    color: red;\r\n}\r\n```\r\n\r\n\r\nIf you want to create a custom element with its own shadow DOM, you&#39;ll need to create a client-side component for that using Polymer or Lit-element. But even then, the `@CssImport` with `themeFor = &quot;MyCustomElement&quot;` will not work automatically. For that to work, your client-side custom element would also have to implement `ThemableMixin`(https://github.com/vaadin/vaadin-themable-mixin). The latter is the necessary ingredient that allows any component (including Vaadin own regular components) to have its shadow DOM stylable using the `@CssImport`.","title":"Vaadin Flow - Create Own Component with StyleSheet &quot;themeFor&quot;","body":"<p>You cannot apply a Local Style Scope to your custom component, <code>HelloComponent</code>, because it doesn't even have a Shadow DOM. Local Style Scopes are relevant for regular Vaadin components (such as a <code>TextField</code> or a <code>Button</code>) because these components have a Shadow DOM. In your case, <code>HelloComponent</code> has to use the global style scope using regular CSS selectors. You can do this in Java code using the component's <code>getStyle()</code> method:</p>\n<pre><code>HelloComponent helloComponent = new HelloComponent();\nhelloComponent.getStyle().set(&quot;color&quot;, &quot;red&quot;);\n</code></pre>\n<p>Or, alternatively, you can import a global style sheet using the <code>@CssImport</code> annotation, then in this style sheet, target your <code>HelloComponent</code> using the regular CSS selectors. For example, you can add <code>@CssImport(&quot;./shared-styles.css&quot;)</code> to one of your classes, then in <code>shared-styles.css</code> place the following style:</p>\n<pre><code>hello {\n    color: red;\n}\n</code></pre>\n<p>If you want to create a custom element with its own shadow DOM, you'll need to create a client-side component for that using Polymer or Lit-element. But even then, the <code>@CssImport</code> with <code>themeFor = &quot;MyCustomElement&quot;</code> will not work automatically. For that to work, your client-side custom element would also have to implement <code>ThemableMixin</code>(<a href=\"https://github.com/vaadin/vaadin-themable-mixin\" rel=\"nofollow noreferrer\">https://github.com/vaadin/vaadin-themable-mixin</a>). The latter is the necessary ingredient that allows any component (including Vaadin own regular components) to have its shadow DOM stylable using the <code>@CssImport</code>.</p>\n"}],"owner":{"account_id":4907986,"reputation":1440,"user_id":3997460,"accept_rate":62,"display_name":"megloff"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697227010,"creation_date":1607800847,"question_id":65268904,"body_markdown":"Hi There I am new to vaadin. I like to have an own component created for whichI like to import its own &quot;local&quot; css stylesheet. I tried to follow the guidelines (here and here) but it is not working. What I am doing wrong? I am using Vaadin v17.0.9. Thank you in advance.\r\n\r\n**Issues and Questions**\r\n\r\n - The @CssImport for my component seems to be ignored. Is there a way to set the text color to &quot;red&quot;?\r\n - Is there a way to set a default .css stylesheet file for my component which can be overriden?\r\n\r\n\r\n**Java Classes**\r\n```\r\n@Route(&quot;/&quot;)\r\n@Theme(value = Lumo.class)\r\n@CssImport(value = &quot;./styles/hello-component.css&quot;, themeFor = &quot;hello&quot;)\r\npublic class MainView extends VerticalLayout {\r\n\t\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t\r\n\t@PostConstruct\r\n\tprivate void init() {\r\n\t\tsetSizeFull();\r\n\t\tadd(new HelloComponent());\r\n\t}\r\n}\r\n\r\n@Tag(&quot;hello&quot;)\r\npublic class HelloComponent extends Div {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t\r\n\tpublic HelloComponent() {\r\n\t\tinit();\r\n\t}\r\n\t\r\n\tprivate void init() {\r\n\t\tsetSizeFull();\r\n\t\tsetText(&quot;Test&quot;);\r\n\t}\r\n}\r\n```\r\n**Stylesheet** &quot;frontend/styles/hello-component.css&quot;\r\n\r\n```\r\n:host  {\r\n\tcolor: red;\r\n}\r\n\r\n```\r\n","title":"Vaadin Flow - Create Own Component with StyleSheet &quot;themeFor&quot;","body":"<p>Hi There I am new to vaadin. I like to have an own component created for whichI like to import its own &quot;local&quot; css stylesheet. I tried to follow the guidelines (here and here) but it is not working. What I am doing wrong? I am using Vaadin v17.0.9. Thank you in advance.</p>\n<p><strong>Issues and Questions</strong></p>\n<ul>\n<li>The @CssImport for my component seems to be ignored. Is there a way to set the text color to &quot;red&quot;?</li>\n<li>Is there a way to set a default .css stylesheet file for my component which can be overriden?</li>\n</ul>\n<p><strong>Java Classes</strong></p>\n<pre><code>@Route(&quot;/&quot;)\n@Theme(value = Lumo.class)\n@CssImport(value = &quot;./styles/hello-component.css&quot;, themeFor = &quot;hello&quot;)\npublic class MainView extends VerticalLayout {\n    \n    private static final long serialVersionUID = 1L;\n    \n    @PostConstruct\n    private void init() {\n        setSizeFull();\n        add(new HelloComponent());\n    }\n}\n\n@Tag(&quot;hello&quot;)\npublic class HelloComponent extends Div {\n\n    private static final long serialVersionUID = 1L;\n    \n    public HelloComponent() {\n        init();\n    }\n    \n    private void init() {\n        setSizeFull();\n        setText(&quot;Test&quot;);\n    }\n}\n</code></pre>\n<p><strong>Stylesheet</strong> &quot;frontend/styles/hello-component.css&quot;</p>\n<pre><code>:host  {\n    color: red;\n}\n\n</code></pre>\n"},{"tags":["java","maps","polygon","kml","point"],"answers":[{"comments":[{"owner":{"account_id":260424,"reputation":23080,"user_id":543969,"accept_rate":86,"display_name":"CodeMonkey"},"score":2,"creation_date":1476445316,"post_id":40041232,"comment_id":67360164,"body_markdown":"If polygon wraps International dateline or poles then AWT Polygon won&#39;t always work. In those cases need a geospatial library such as [JTS Topology Suite](http://tsusiatsoftware.net/jts/main.html). See [contains](http://tsusiatsoftware.net/jts/javadoc/com/vividsolutions/jts/geom/Geometry.html#contains(com.vividsolutions.jts.geom.Geometry)).","body":"If polygon wraps International dateline or poles then AWT Polygon won&#39;t always work. In those cases need a geospatial library such as <a href=\"http://tsusiatsoftware.net/jts/main.html\" rel=\"nofollow noreferrer\">JTS Topology Suite</a>. See <a href=\"http://tsusiatsoftware.net/jts/javadoc/com/vividsolutions/jts/geom/Geometry.html#contains(com.vividsolutions.jts.geom.Geometry)\" rel=\"nofollow noreferrer\">contains</a>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1476452011,"post_id":40041232,"comment_id":67364866,"body_markdown":"AWT shapes assume a flat surface.  Not a good idea for geodetic computations.","body":"AWT shapes assume a flat surface.  Not a good idea for geodetic computations."}],"tags":[],"owner":{"account_id":2577707,"reputation":2286,"user_id":2235015,"display_name":"Florian Albrecht"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476441798,"creation_date":1476441798,"answer_id":40041232,"question_id":40040983,"body_markdown":"To parse the KML data, here is a library (took me two seconds of googling): https://github.com/micromata/javaapiforkml\r\n\r\nTo check if a coordinate falls into a shape, either the library offers a method for that (didn&#39;t check that) - or, you could just create a Java AWT `Polygon` from the coordinates of a shape (just treat them as points on a 2D surface). `Polygon` offers a `contains(Point2D)` method.\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/awt/Polygon.html\r\n","title":"JAVA : Point in polygon? How can I check if a user&#39;s location falls within a kml polygon?","body":"<p>To parse the KML data, here is a library (took me two seconds of googling): <a href=\"https://github.com/micromata/javaapiforkml\" rel=\"nofollow\">https://github.com/micromata/javaapiforkml</a></p>\n\n<p>To check if a coordinate falls into a shape, either the library offers a method for that (didn't check that) - or, you could just create a Java AWT <code>Polygon</code> from the coordinates of a shape (just treat them as points on a 2D surface). <code>Polygon</code> offers a <code>contains(Point2D)</code> method.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/Polygon.html\" rel=\"nofollow\">https://docs.oracle.com/javase/7/docs/api/java/awt/Polygon.html</a></p>\n"},{"comments":[{"owner":{"account_id":4812077,"reputation":905,"user_id":3885261,"accept_rate":61,"display_name":"Clemzd"},"score":0,"creation_date":1534432465,"post_id":40046484,"comment_id":90712156,"body_markdown":"Is JTS still the best to perform this calculation? Or Spatial4j is now a better candidate?","body":"Is JTS still the best to perform this calculation? Or Spatial4j is now a better candidate?"},{"owner":{"account_id":260424,"reputation":23080,"user_id":543969,"accept_rate":86,"display_name":"CodeMonkey"},"score":0,"creation_date":1534458342,"post_id":40046484,"comment_id":90723675,"body_markdown":"Polygons in Spatial4J are supported by wrapping JTS&#39;s Geometry.","body":"Polygons in Spatial4J are supported by wrapping JTS&#39;s Geometry."},{"owner":{"account_id":4812077,"reputation":905,"user_id":3885261,"accept_rate":61,"display_name":"Clemzd"},"score":0,"creation_date":1534768755,"post_id":40046484,"comment_id":90811646,"body_markdown":"Ok thank you @JasonM1! I have another question : is the results would be always correct? I mean is it average correct or precisely correct? I have the feelings that there is a risk that results won&#39;t be good because geospatial maths seems to be very complicated.","body":"Ok thank you @JasonM1! I have another question : is the results would be always correct? I mean is it average correct or precisely correct? I have the feelings that there is a risk that results won&#39;t be good because geospatial maths seems to be very complicated."},{"owner":{"account_id":260424,"reputation":23080,"user_id":543969,"accept_rate":86,"display_name":"CodeMonkey"},"score":0,"creation_date":1534772963,"post_id":40046484,"comment_id":90814368,"body_markdown":"If coordiantes of the points and polygon use the same reference coordinate system (e.g WGS84) then the math should be correct. If you require a high degree of accuracy then recommend to review the source code and/or the documenation for accuracy. If for example the length between the points in the polygon are large then that itself could introduce error.","body":"If coordiantes of the points and polygon use the same reference coordinate system (e.g WGS84) then the math should be correct. If you require a high degree of accuracy then recommend to review the source code and/or the documenation for accuracy. If for example the length between the points in the polygon are large then that itself could introduce error."},{"owner":{"account_id":1603708,"reputation":79,"user_id":1484228,"display_name":"Athlon"},"score":0,"creation_date":1697221640,"post_id":40046484,"comment_id":136257626,"body_markdown":"The above code got me most of the way there.  A few notes:\n1.  I needed to make sure the first and last point were identical to close the polygon or JTS threw an exception.\n2.  My test point, which definitely was contained in my polygon was returning false for the `contains` check until I changed from a LinearRing object to a Polygon object.  Yes, I know LinearRing is a child class of Polygon.\n3.  The maven library I needed to run the above code is called `jts-core`.  Another called `topology suite` did not work.\n\nHope this helps someone!","body":"The above code got me most of the way there.  A few notes: 1.  I needed to make sure the first and last point were identical to close the polygon or JTS threw an exception. 2.  My test point, which definitely was contained in my polygon was returning false for the <code>contains</code> check until I changed from a LinearRing object to a Polygon object.  Yes, I know LinearRing is a child class of Polygon. 3.  The maven library I needed to run the above code is called <code>jts-core</code>.  Another called <code>topology suite</code> did not work.  Hope this helps someone!"}],"tags":[],"owner":{"account_id":260424,"reputation":23080,"user_id":543969,"accept_rate":86,"display_name":"CodeMonkey"},"comment_count":5,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1697227001,"creation_date":1476457793,"answer_id":40046484,"question_id":40040983,"body_markdown":"The [JTS Topology Suite][1] is a good choice to correctly calculate geometric relationships in geospatial context. The KML can easily be parsed using an XML Parser or a Java library such as [JAK][2] or [GIScore][3] in which you can access the coordinates of the features.\r\n\r\nHere is snippet of Java code using JTS to test if a geospatial point is inside a polygon.\r\n\r\n    import org.locationtech.jts.geom.*;\r\n\r\n    // parse KML using JAK or another library\r\n    // ...\r\n    GeometryFactory gf = new GeometryFactory();\r\n    // create polygon\r\n    int numPoints = ...\r\n    Coordinate[] points = new Coordinate[numPoints];\r\n    // set points\r\n    points[0] = new Coordinate(...);\r\n    //...\r\n    LinearRing jtsRing = gf.createLinearRing(points);\r\n    Polygon poly = gf.createPolygon(jtsRing, null);\r\n\r\n    // now create point to test if contained inside polygon\r\n    Coordinate coord = new Coordinate(lon, lat);\r\n    Point pt = gf.createPoint(coord);\r\n    if (poly.contains(pt)) {\r\n      // point is contained within bounds of polygon\r\n      // do something here\r\n    }\r\n\r\nThe contains() geometry predicate is defined in the [JTS javadoc][4].\r\n\r\n\r\n  [1]: https://projects.eclipse.org/projects/locationtech.jts\r\n  [2]: https://github.com/micromata/javaapiforkml\r\n  [3]: https://github.com/OpenSextant/giscore\r\n  [4]: http://locationtech.github.io/jts/javadoc/org/locationtech/jts/geom/Geometry.html#contains(org.locationtech.jts.geom.Geometry)","title":"JAVA : Point in polygon? How can I check if a user&#39;s location falls within a kml polygon?","body":"<p>The <a href=\"https://projects.eclipse.org/projects/locationtech.jts\" rel=\"nofollow noreferrer\">JTS Topology Suite</a> is a good choice to correctly calculate geometric relationships in geospatial context. The KML can easily be parsed using an XML Parser or a Java library such as <a href=\"https://github.com/micromata/javaapiforkml\" rel=\"nofollow noreferrer\">JAK</a> or <a href=\"https://github.com/OpenSextant/giscore\" rel=\"nofollow noreferrer\">GIScore</a> in which you can access the coordinates of the features.</p>\n<p>Here is snippet of Java code using JTS to test if a geospatial point is inside a polygon.</p>\n<pre><code>import org.locationtech.jts.geom.*;\n\n// parse KML using JAK or another library\n// ...\nGeometryFactory gf = new GeometryFactory();\n// create polygon\nint numPoints = ...\nCoordinate[] points = new Coordinate[numPoints];\n// set points\npoints[0] = new Coordinate(...);\n//...\nLinearRing jtsRing = gf.createLinearRing(points);\nPolygon poly = gf.createPolygon(jtsRing, null);\n\n// now create point to test if contained inside polygon\nCoordinate coord = new Coordinate(lon, lat);\nPoint pt = gf.createPoint(coord);\nif (poly.contains(pt)) {\n  // point is contained within bounds of polygon\n  // do something here\n}\n</code></pre>\n<p>The contains() geometry predicate is defined in the <a href=\"http://locationtech.github.io/jts/javadoc/org/locationtech/jts/geom/Geometry.html#contains(org.locationtech.jts.geom.Geometry)\" rel=\"nofollow noreferrer\">JTS javadoc</a>.</p>\n"}],"owner":{"account_id":9238852,"reputation":55,"user_id":6862621,"display_name":"Noman Ellahi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6070,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":2,"score":2,"last_activity_date":1697227001,"creation_date":1476441017,"question_id":40040983,"body_markdown":"I have .kml shape files which contain region polygons, what I want to do is to find out that specific marker or point lies inside a polygon. I want to do this in java. Any library to parse through .KML files ?","title":"JAVA : Point in polygon? How can I check if a user&#39;s location falls within a kml polygon?","body":"<p>I have .kml shape files which contain region polygons, what I want to do is to find out that specific marker or point lies inside a polygon. I want to do this in java. Any library to parse through .KML files ?</p>\n"},{"tags":["java","spring","maven","spring-mvc","xml-configuration"],"answers":[{"comments":[{"owner":{"account_id":25433004,"reputation":41,"user_id":19237107,"display_name":"Quoc Hung"},"score":0,"creation_date":1654769559,"post_id":72558250,"comment_id":128173161,"body_markdown":"Oh, sr my bad. Actually, webapp is inside the main :-). It still inside and it still have a problem","body":"Oh, sr my bad. Actually, webapp is inside the main :-). It still inside and it still have a problem"}],"tags":[],"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654768382,"creation_date":1654768382,"answer_id":72558250,"question_id":72557783,"body_markdown":"The directory `webapp` should be inside `main`, not in the same parent directory.\r\n\r\n&gt; As per convention, we place our JSP files in the ${project.basedir}/main/webapp/WEB-INF/jsp/ directory.\r\n\r\nhttps://www.baeldung.com/spring-boot-jsp#view-resolver-configuration","title":"Spring MVC - HTTP Status 404 – Not Found","body":"<p>The directory <code>webapp</code> should be inside <code>main</code>, not in the same parent directory.</p>\n<blockquote>\n<p>As per convention, we place our JSP files in the ${project.basedir}/main/webapp/WEB-INF/jsp/ directory.</p>\n</blockquote>\n<p><a href=\"https://www.baeldung.com/spring-boot-jsp#view-resolver-configuration\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-jsp#view-resolver-configuration</a></p>\n"},{"comments":[{"owner":{"account_id":25433004,"reputation":41,"user_id":19237107,"display_name":"Quoc Hung"},"score":0,"creation_date":1654769666,"post_id":72558362,"comment_id":128173199,"body_markdown":"Thank you about this solution. It is a good solution but I want to create it from scratch to understand more about Spring MVC so I try to do this. Do you have any idea to fix my problem ?","body":"Thank you about this solution. It is a good solution but I want to create it from scratch to understand more about Spring MVC so I try to do this. Do you have any idea to fix my problem ?"},{"owner":{"display_name":"user18308772"},"score":0,"creation_date":1654772554,"post_id":72558362,"comment_id":128174188,"body_markdown":"You&#39;re trying to run the application by using Tomcat, but you&#39;re using Jetty Plugin in pom.xml.  Try to configure a Tomcat server. Install the Smart Tomcat plugin if you&#39;re using Intellij IDEA (go to settings -&gt; plugins -&gt; Smart Tomcat). If you use another IDE, then download Tomcat from the Apache web page and import it into your project. https://tomcat.apache.org/download-90.cgi","body":"You&#39;re trying to run the application by using Tomcat, but you&#39;re using Jetty Plugin in pom.xml.  Try to configure a Tomcat server. Install the Smart Tomcat plugin if you&#39;re using Intellij IDEA (go to settings -&gt; plugins -&gt; Smart Tomcat). If you use another IDE, then download Tomcat from the Apache web page and import it into your project. <a href=\"https://tomcat.apache.org/download-90.cgi\" rel=\"nofollow noreferrer\">tomcat.apache.org/download-90.cgi</a>"}],"tags":[],"owner":{"display_name":"user18308772"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654768876,"creation_date":1654768876,"answer_id":72558362,"question_id":72557783,"body_markdown":"Try to add this dependency first. It will automatically configure your web application and DispatcherServlet. You do not need your web.xml file anymore. Also, you can delete your webapp package. Everything will be done by Spring Boot. \r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;version&gt;2.7.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen, create a class annotated with *@SpringBootApplication*. It will start your application, and your *@RestController* class will be detected and scanned.\r\n\r\n    @SpringBootApplication\r\n    public class RunApp {\r\n        \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(RunApp.class, args);\r\n        }\r\n    }\r\n\r\nAlso, you do not need your applicationContext.xml file anymore. Spring Boot takes responsibility for this. Spring Boot creates its own ApplicationContext and contains all the controllers and other beans.\r\n\r\n Here, you can learn everything in more detail: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/\r\n\r\nGood luck!","title":"Spring MVC - HTTP Status 404 – Not Found","body":"<p>Try to add this dependency first. It will automatically configure your web application and DispatcherServlet. You do not need your web.xml file anymore. Also, you can delete your webapp package. Everything will be done by Spring Boot.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n  &lt;version&gt;2.7.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then, create a class annotated with <em>@SpringBootApplication</em>. It will start your application, and your <em>@RestController</em> class will be detected and scanned.</p>\n<pre><code>@SpringBootApplication\npublic class RunApp {\n    \n    public static void main(String[] args) {\n        SpringApplication.run(RunApp.class, args);\n    }\n}\n</code></pre>\n<p>Also, you do not need your applicationContext.xml file anymore. Spring Boot takes responsibility for this. Spring Boot creates its own ApplicationContext and contains all the controllers and other beans.</p>\n<p>Here, you can learn everything in more detail: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/</a></p>\n<p>Good luck!</p>\n"},{"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1654771730,"post_id":72558559,"comment_id":128173918,"body_markdown":"Why do you think, that the rootcontext should be set to `spring_war_exploded`?","body":"Why do you think, that the rootcontext should be set to <code>spring_war_exploded</code>?"},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1654775520,"post_id":72558559,"comment_id":128175278,"body_markdown":"That is mainly how intellij likes to call artifact when deploying it, so if it is spring\nit will add _war_exploded, it is a default setting","body":"That is mainly how intellij likes to call artifact when deploying it, so if it is spring it will add _war_exploded, it is a default setting"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1654775868,"post_id":72558559,"comment_id":128175395,"body_markdown":"it will be a great addition to your answer. Optimally you could add the property which needs to be set to override the default generated rootcontext.","body":"it will be a great addition to your answer. Optimally you could add the property which needs to be set to override the default generated rootcontext."},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1654775899,"post_id":72558559,"comment_id":128175408,"body_markdown":"But to be sure, he can set &quot;After Launch&quot; and Intellij will pop the window with the URL of server and artifact","body":"But to be sure, he can set &quot;After Launch&quot; and Intellij will pop the window with the URL of server and artifact"},{"owner":{"account_id":4344705,"reputation":324,"user_id":3547021,"display_name":"dclaudiud"},"score":0,"creation_date":1679837128,"post_id":72558559,"comment_id":133788545,"body_markdown":"Spring 6 + Tomcat 10 worked in my case. I was using Spring 5 with Tomcat 9. Now that I have updated the Tomcat version everything works. I can also see the servlet being initialized in the logs `org.springframework.web.servlet.FrameworkServlet.initServletBean Initializing Servlet &#39;HelloWeb&#39;`. Thumbs up","body":"Spring 6 + Tomcat 10 worked in my case. I was using Spring 5 with Tomcat 9. Now that I have updated the Tomcat version everything works. I can also see the servlet being initialized in the logs <code>org.springframework.web.servlet.FrameworkServlet.initServlet&zwnj;&#8203;Bean Initializing Servlet &#39;HelloWeb&#39;</code>. Thumbs up"}],"tags":[],"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"comment_count":5,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1655028321,"creation_date":1654769654,"answer_id":72558559,"question_id":72557783,"body_markdown":"Tomcat 10 does not work with Spring 5 due to the fact that Tomcat 10 is working with jakarta packages, which were renamed from javax.\r\n\r\nSpring 5 does not work with jakarta packages, Spring 6 will support that.\r\nSo with that in mind:\r\n\r\n 1. Spring 5 + Tomcat 9  \r\n 2. Spring 6 + Tomcat 10\r\n\r\nAlso from the picture that you provided your url should be\r\n\r\n    localhost:8080/spring_war_exploaded/hello\r\n   \r\n\r\nnot\r\n\r\n    localhost:8080/hello\r\n\r\nTo be sure which URL can be you can go to your Tomcat configuration &gt; Edit &gt; and check &quot;After Launch&quot; and select Google Chrome for an example, that will launch the app with the correct URL.\r\n\r\n*&quot;Why _war_exploded&quot;*\r\nThat is mainly how IntelliJ likes to call artifact when creating Artifact &gt; Web Exploaded, so if it is spring it will add _war_exploded, it is a default setting\r\n","title":"Spring MVC - HTTP Status 404 – Not Found","body":"<p>Tomcat 10 does not work with Spring 5 due to the fact that Tomcat 10 is working with jakarta packages, which were renamed from javax.</p>\n<p>Spring 5 does not work with jakarta packages, Spring 6 will support that.\nSo with that in mind:</p>\n<ol>\n<li>Spring 5 + Tomcat 9</li>\n<li>Spring 6 + Tomcat 10</li>\n</ol>\n<p>Also from the picture that you provided your url should be</p>\n<pre><code>localhost:8080/spring_war_exploaded/hello\n</code></pre>\n<p>not</p>\n<pre><code>localhost:8080/hello\n</code></pre>\n<p>To be sure which URL can be you can go to your Tomcat configuration &gt; Edit &gt; and check &quot;After Launch&quot; and select Google Chrome for an example, that will launch the app with the correct URL.</p>\n<p><em>&quot;Why _war_exploded&quot;</em>\nThat is mainly how IntelliJ likes to call artifact when creating Artifact &gt; Web Exploaded, so if it is spring it will add _war_exploded, it is a default setting</p>\n"},{"tags":[],"owner":{"account_id":22744935,"reputation":16,"user_id":16905844,"display_name":"PRARTHNA SHISHODIA"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679639008,"creation_date":1679639008,"answer_id":75830573,"question_id":72557783,"body_markdown":"if you are working with Spring MVC structure using the eclipse link and facing this error then please make sure that you add @Singleton annotation in your controller bcoz @singleton is used to define the scope of an object of your class and when you use singleton it means that you are defining a scope to use the same object everywhere no need to create a new object for all the time.  ","title":"Spring MVC - HTTP Status 404 – Not Found","body":"<p>if you are working with Spring MVC structure using the eclipse link and facing this error then please make sure that you add @Singleton annotation in your controller bcoz @singleton is used to define the scope of an object of your class and when you use singleton it means that you are defining a scope to use the same object everywhere no need to create a new object for all the time.</p>\n"}],"owner":{"account_id":25433004,"reputation":41,"user_id":19237107,"display_name":"Quoc Hung"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2824,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1697226955,"creation_date":1654766545,"question_id":72557783,"body_markdown":"I am trying to create a simple Spring MVC to view main-menu.jsp but I have problem and I do not how to fix it. I am using Intellij and create project by Maven.\r\n\r\nHere is my **structure** of my project \r\n```\r\nsrc\r\n  - main \r\n      - java \r\n        - com.example.mvc\r\n           - HomeController.java\r\n      -resources\r\n  - webapp\r\n      - WEB-INF\r\n        - view \r\n            - main-menu.jsp\r\n        - applicationContext.xml\r\n        - web.xml\r\n```\r\n\r\nMy pom.xml \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n  &lt;name&gt;Demo&lt;/name&gt;\r\n  &lt;properties&gt;\r\n    &lt;maven.compiler.source&gt;18&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;18&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;Demo&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;6.1.7&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;connectors&gt;\r\n            &lt;connector implementation=&quot;org.mortbay.jetty.nio.SelectChannelConnector&quot;&gt;\r\n              &lt;port&gt;8888&lt;/port&gt;\r\n              &lt;maxIdleTime&gt;30000&lt;/maxIdleTime&gt;\r\n            &lt;/connector&gt;\r\n          &lt;/connectors&gt;\r\n          &lt;webAppSourceDirectory&gt;${project.build.directory}/${pom.artifactId}-${pom.version}&lt;/webAppSourceDirectory&gt;\r\n          &lt;contextPath&gt;/&lt;/contextPath&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n      &lt;version&gt;5.3.20&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n      &lt;version&gt;5.3.20&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n      &lt;version&gt;5.3.20&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n      &lt;version&gt;4.0.1&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nMy web.xml \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;web-app version=&quot;2.4&quot;\r\n         xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;\r\n\r\n  &lt;servlet&gt;\r\n    &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;\r\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n  &lt;/servlet&gt;\r\n\r\n  &lt;context-param&gt;\r\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n    &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;\r\n  &lt;/context-param&gt;\r\n\r\n  &lt;listener&gt;\r\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n  &lt;/listener&gt;\r\n\r\n  &lt;servlet-mapping&gt;\r\n    &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;\r\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n  &lt;/servlet-mapping&gt;\r\n\r\n&lt;/web-app&gt;\r\n```\r\n\r\nMy applicationContext.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n       xmlns:configurator=&quot;http://cocoon.apache.org/schema/configurator&quot;\r\n       xmlns:avalon=&quot;http://cocoon.apache.org/schema/avalon&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/cache&quot;\r\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\r\n                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd\r\n                           http://cocoon.apache.org/schema/configurator http://cocoon.apache.org/schema/configurator/cocoon-configurator-1.0.1.xsd\r\n                           http://cocoon.apache.org/schema/avalon http://cocoon.apache.org/schema/avalon/cocoon-avalon-1.0.xsd http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n\r\n\r\n    &lt;context:component-scan base-package=&quot;com.example.mvc&quot;&gt;&lt;/context:component-scan&gt;\r\n    &lt;mvc:annotation-driven /&gt;\r\n    &lt;bean id=&quot;handlerMapping&quot; class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;/&gt;\r\n    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/view/&quot; /&gt;\r\n        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\r\n    &lt;/bean&gt;\r\n&lt;/beans&gt;\r\n```\r\n\r\nMy HomeController.java\r\n```\r\npackage com.example.mvc;\r\n\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n\r\n@Controller\r\npublic class HomeController {\r\n\r\n    @RequestMapping(value = &quot;/hello&quot;)\r\n    public String getPage(){\r\n        return &quot;main-menu&quot;;\r\n    }\r\n}\r\n```\r\n\r\nFinally, My main-menu.jsp \r\n```\r\n&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n    &lt;title&gt;Title&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;h2&gt;Spring MVC demo&lt;/h2&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\n```\r\n\r\nI try to run in Tomcat server in Intellij , And It give me 404 error like this\r\n\r\n[Error Image][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/50Xwb.png\r\n\r\nThank you for helping me fix this","title":"Spring MVC - HTTP Status 404 – Not Found","body":"<p>I am trying to create a simple Spring MVC to view main-menu.jsp but I have problem and I do not how to fix it. I am using Intellij and create project by Maven.</p>\n<p>Here is my <strong>structure</strong> of my project</p>\n<pre><code>src\n  - main \n      - java \n        - com.example.mvc\n           - HomeController.java\n      -resources\n  - webapp\n      - WEB-INF\n        - view \n            - main-menu.jsp\n        - applicationContext.xml\n        - web.xml\n</code></pre>\n<p>My pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n\n  &lt;name&gt;Demo&lt;/name&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;18&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;18&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;Demo&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;\n        &lt;version&gt;6.1.7&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;connectors&gt;\n            &lt;connector implementation=&quot;org.mortbay.jetty.nio.SelectChannelConnector&quot;&gt;\n              &lt;port&gt;8888&lt;/port&gt;\n              &lt;maxIdleTime&gt;30000&lt;/maxIdleTime&gt;\n            &lt;/connector&gt;\n          &lt;/connectors&gt;\n          &lt;webAppSourceDirectory&gt;${project.build.directory}/${pom.artifactId}-${pom.version}&lt;/webAppSourceDirectory&gt;\n          &lt;contextPath&gt;/&lt;/contextPath&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n      &lt;version&gt;5.3.20&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n      &lt;version&gt;5.3.20&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n      &lt;version&gt;5.3.20&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;4.0.1&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>My web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;web-app version=&quot;2.4&quot;\n         xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;\n\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n\n  &lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n  &lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n<p>My applicationContext.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\n       xmlns:configurator=&quot;http://cocoon.apache.org/schema/configurator&quot;\n       xmlns:avalon=&quot;http://cocoon.apache.org/schema/avalon&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/cache&quot;\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\n                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd\n                           http://cocoon.apache.org/schema/configurator http://cocoon.apache.org/schema/configurator/cocoon-configurator-1.0.1.xsd\n                           http://cocoon.apache.org/schema/avalon http://cocoon.apache.org/schema/avalon/cocoon-avalon-1.0.xsd http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n\n\n    &lt;context:component-scan base-package=&quot;com.example.mvc&quot;&gt;&lt;/context:component-scan&gt;\n    &lt;mvc:annotation-driven /&gt;\n    &lt;bean id=&quot;handlerMapping&quot; class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;/&gt;\n    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/view/&quot; /&gt;\n        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>My HomeController.java</p>\n<pre><code>package com.example.mvc;\n\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n\n@Controller\npublic class HomeController {\n\n    @RequestMapping(value = &quot;/hello&quot;)\n    public String getPage(){\n        return &quot;main-menu&quot;;\n    }\n}\n</code></pre>\n<p>Finally, My main-menu.jsp</p>\n<pre><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h2&gt;Spring MVC demo&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n<p>I try to run in Tomcat server in Intellij , And It give me 404 error like this</p>\n<p><a href=\"https://i.stack.imgur.com/50Xwb.png\" rel=\"nofollow noreferrer\">Error Image</a></p>\n<p>Thank you for helping me fix this</p>\n"},{"tags":["java","spring-boot","rest","java-8","download"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697225279,"post_id":77290216,"comment_id":136258161,"body_markdown":"Are you sure the problem is in your code? Is the download speed slower than you&#39;d expect? Or is the file just too large to be downloaded in under 30 seconds? Because if that&#39;s the case, you&#39;ll either have to break the file up into smaller parts or disable/enlarge the timeout for download endpoints.","body":"Are you sure the problem is in your code? Is the download speed slower than you&#39;d expect? Or is the file just too large to be downloaded in under 30 seconds? Because if that&#39;s the case, you&#39;ll either have to break the file up into smaller parts or disable/enlarge the timeout for download endpoints."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1697225462,"post_id":77290216,"comment_id":136258183,"body_markdown":"did you try flushing after each person?","body":"did you try flushing after each person?"},{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":0,"creation_date":1697225490,"post_id":77290216,"comment_id":136258188,"body_markdown":"The best way to handle &quot;Downloading context&quot; is to use &quot;Websockets&quot;.","body":"The best way to handle &quot;Downloading context&quot; is to use &quot;Websockets&quot;."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1697225602,"post_id":77290216,"comment_id":136258205,"body_markdown":"@JonathanJOhx why? http is perfectly capable of handling very long downloads without issue. it&#39;s just a matter of letting the client know that you still have stuff to send","body":"@JonathanJOhx why? http is perfectly capable of handling very long downloads without issue. it&#39;s just a matter of letting the client know that you still have stuff to send"},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1697225681,"post_id":77290216,"comment_id":136258218,"body_markdown":"@AMagic, you have an api that calls an api, gets the response, and sends it to its own client? isn&#39;t that what a proxy does?","body":"@AMagic, you have an api that calls an api, gets the response, and sends it to its own client? isn&#39;t that what a proxy does?"},{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":0,"creation_date":1697225920,"post_id":77290216,"comment_id":136258254,"body_markdown":"@njzk2 Using Websockets for Long Downloads: \nReal-time Updates &gt; Websockets are ideal when you need real-time updates during the download process. With Websockets, the server can send data to the client as soon as it&#39;s available, allowing for a more interactive and real-time experience. \nBidirectional Communication &gt; Websockets allow bidirectional communication, meaning the client can also send data or control messages to the server, which is useful for more interactive applications.","body":"@njzk2 Using Websockets for Long Downloads:  Real-time Updates &gt; Websockets are ideal when you need real-time updates during the download process. With Websockets, the server can send data to the client as soon as it&#39;s available, allowing for a more interactive and real-time experience.  Bidirectional Communication &gt; Websockets allow bidirectional communication, meaning the client can also send data or control messages to the server, which is useful for more interactive applications."},{"owner":{"account_id":1834364,"reputation":2700,"user_id":1665029,"display_name":"AMagic"},"score":0,"creation_date":1697226005,"post_id":77290216,"comment_id":136258266,"body_markdown":"@Jorn Breaking the files is a good idea but isn&#39;t an option. My guess is that it&#39;s taking longer in `StreamUtils.copy` on both client and server side. There could be some way to make it faster?","body":"@Jorn Breaking the files is a good idea but isn&#39;t an option. My guess is that it&#39;s taking longer in <code>StreamUtils.copy</code> on both client and server side. There could be some way to make it faster?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697226387,"post_id":77290216,"comment_id":136258312,"body_markdown":"You haven&#39;t shown where `StreamUtils` is coming from (Apache?), but I doubt there&#39;s a bottleneck there. Copying one stream to another is very much a solved problem, and if you&#39;re using a big library, I wouldn&#39;t assume it&#39;s the bottleneck. However, using the `ByteArrayInputStream` is a lot of unneccessary overhead. You&#39;d be better off writing to the output stream directly.","body":"You haven&#39;t shown where <code>StreamUtils</code> is coming from (Apache?), but I doubt there&#39;s a bottleneck there. Copying one stream to another is very much a solved problem, and if you&#39;re using a big library, I wouldn&#39;t assume it&#39;s the bottleneck. However, using the <code>ByteArrayInputStream</code> is a lot of unneccessary overhead. You&#39;d be better off writing to the output stream directly."},{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":0,"creation_date":1697226547,"post_id":77290216,"comment_id":136258330,"body_markdown":"You could also open a normal `java.net.ServerSocket`, get its local port, then forward the client to that port, or in any other way confer the message of the new port to the client. Maybe even use a `java.net.Socket` in the client. This way you could use the o-so-much-better raw Sockets instead of HTTP, maybe even use `ZipOutputStream`, and have no more timeouts to worry about. The big and ugly downside is how to handle firewalls and proxies and other routing interference...","body":"You could also open a normal <code>java.net.ServerSocket</code>, get its local port, then forward the client to that port, or in any other way confer the message of the new port to the client. Maybe even use a <code>java.net.Socket</code> in the client. This way you could use the o-so-much-better raw Sockets instead of HTTP, maybe even use <code>ZipOutputStream</code>, and have no more timeouts to worry about. The big and ugly downside is how to handle firewalls and proxies and other routing interference..."},{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":0,"creation_date":1697226770,"post_id":77290216,"comment_id":136258365,"body_markdown":"But it looks like the real problem in your code lies with you handling all that String data, wrapping all that up in a huge array (check your systems swap file activity!), and only once it&#39;s all there, then write it to the `OutputStream`. Maybe try writing every line that `person` has onto the stream directly. Maybe also `flush()` afterwards, if there&#39;s a lot of time between the last write and getting the next person ready... And another problem  is that the server does not send how much data it actually sends, so maybe the client is waiting for more. Try closing the connection after sending.","body":"But it looks like the real problem in your code lies with you handling all that String data, wrapping all that up in a huge array (check your systems swap file activity!), and only once it&#39;s all there, then write it to the <code>OutputStream</code>. Maybe try writing every line that <code>person</code> has onto the stream directly. Maybe also <code>flush()</code> afterwards, if there&#39;s a lot of time between the last write and getting the next person ready... And another problem  is that the server does not send how much data it actually sends, so maybe the client is waiting for more. Try closing the connection after sending."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697226909,"creation_date":1697226909,"answer_id":77290326,"question_id":77290216,"body_markdown":"Well, there&#39;s one optimization you can easily do. Writing to a `ByteArrayInputStream` first, then copying that to the `OutputStream` is not needed.\r\n\r\n```\r\n@GetMapping(&quot;/download&quot;)\r\npublic void downloadReport() {\r\n    List&lt;Person&gt; people = getPeople(); // data retrieval logic\r\n    \r\n    response.addHeader(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + fileName);\r\n    response.addHeader(HttpHeaders.CONTENT_TYPE, \r\n    \r\n    MediaType.APPLICATION_OCTET_STREAM_VALUE);\r\n\r\n    try (PrintWriter writer = new PrintWriter(response.getOutputStream(), false, StandardCharsets.UTF_8)) {\r\n        for (String person : people) {\r\n            writer.write(person);\r\n            writer.write(&quot;\\n&quot;);\r\n        }\r\n        response.flushBuffer();\r\n    }\r\n}\r\n```","title":"REST API to download large sized files in JAVA 8 without running into timeout","body":"<p>Well, there's one optimization you can easily do. Writing to a <code>ByteArrayInputStream</code> first, then copying that to the <code>OutputStream</code> is not needed.</p>\n<pre><code>@GetMapping(&quot;/download&quot;)\npublic void downloadReport() {\n    List&lt;Person&gt; people = getPeople(); // data retrieval logic\n    \n    response.addHeader(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + fileName);\n    response.addHeader(HttpHeaders.CONTENT_TYPE, \n    \n    MediaType.APPLICATION_OCTET_STREAM_VALUE);\n\n    try (PrintWriter writer = new PrintWriter(response.getOutputStream(), false, StandardCharsets.UTF_8)) {\n        for (String person : people) {\n            writer.write(person);\n            writer.write(&quot;\\n&quot;);\n        }\n        response.flushBuffer();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1834364,"reputation":2700,"user_id":1665029,"display_name":"AMagic"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697226909,"creation_date":1697225149,"question_id":77290216,"body_markdown":"I have client and server side apps which are designed to have a session no longer than 30 seconds. \r\n\r\nI am writing a rest api to download reports which sometimes contains really large amount of data but it&#39;s running into timeouts. Is there any better way to do this so it doesn&#39;t exceed time limit of 30 seconds? \r\n\r\nHere is the controller at server side:\r\n\r\n    @GetMapping(&quot;/download&quot;)\r\n    public void downloadReport() {\r\n        List&lt;Person&gt; people = getPeople(); // data retrieval logic\r\n        \r\n        response.addHeader(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + fileName);\r\n        response.addHeader(HttpHeaders.CONTENT_TYPE, \r\n        \r\n        MediaType.APPLICATION_OCTET_STREAM_VALUE);\r\n\r\n        for (String person : people) {\r\n            StreamUtils.copy(new ByteArrayInputStream(person.concat(&quot;\\n&quot;).getBytes(StandardCharsets.UTF_8)), \r\n       response.getOutputStream());\r\n        }\r\n        response.flushBuffer();\r\n    }\r\n\r\nHere is the code on client side:\r\n\r\n    @GetMapping(&quot;/download&quot;)\r\n    public void downloadReport(@RequestParam MultiValueMap&lt;String, String&gt; downloadRequest, HttpServletResponse response) throws Exception {\r\n        ResponseEntity&lt;byte[]&gt; result = restClient.downloadReport(URI, downloadRequest);\r\n        if (result.getStatusCode().equals(HttpStatus.OK)) {\r\n            String fileName = result.getHeaders().getContentDisposition().getFilename();\r\n            response.addHeader(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + fileName);\r\n            response.addHeader(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;);\r\n            StreamUtils.copy(result.getBody(), response.getOutputStream());\r\n            response.flushBuffer();\r\n        } else {\r\n            throw new Exception(&quot;Could not download report.&quot;);\r\n        }\r\n    }\r\n\r\nAny advice is much appreciated. ","title":"REST API to download large sized files in JAVA 8 without running into timeout","body":"<p>I have client and server side apps which are designed to have a session no longer than 30 seconds.</p>\n<p>I am writing a rest api to download reports which sometimes contains really large amount of data but it's running into timeouts. Is there any better way to do this so it doesn't exceed time limit of 30 seconds?</p>\n<p>Here is the controller at server side:</p>\n<pre><code>@GetMapping(&quot;/download&quot;)\npublic void downloadReport() {\n    List&lt;Person&gt; people = getPeople(); // data retrieval logic\n    \n    response.addHeader(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + fileName);\n    response.addHeader(HttpHeaders.CONTENT_TYPE, \n    \n    MediaType.APPLICATION_OCTET_STREAM_VALUE);\n\n    for (String person : people) {\n        StreamUtils.copy(new ByteArrayInputStream(person.concat(&quot;\\n&quot;).getBytes(StandardCharsets.UTF_8)), \n   response.getOutputStream());\n    }\n    response.flushBuffer();\n}\n</code></pre>\n<p>Here is the code on client side:</p>\n<pre><code>@GetMapping(&quot;/download&quot;)\npublic void downloadReport(@RequestParam MultiValueMap&lt;String, String&gt; downloadRequest, HttpServletResponse response) throws Exception {\n    ResponseEntity&lt;byte[]&gt; result = restClient.downloadReport(URI, downloadRequest);\n    if (result.getStatusCode().equals(HttpStatus.OK)) {\n        String fileName = result.getHeaders().getContentDisposition().getFilename();\n        response.addHeader(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + fileName);\n        response.addHeader(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;);\n        StreamUtils.copy(result.getBody(), response.getOutputStream());\n        response.flushBuffer();\n    } else {\n        throw new Exception(&quot;Could not download report.&quot;);\n    }\n}\n</code></pre>\n<p>Any advice is much appreciated.</p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb"],"comments":[{"owner":{"account_id":3046198,"reputation":2670,"user_id":2581783,"display_name":"Rene M."},"score":0,"creation_date":1459864187,"post_id":36428203,"comment_id":60470877,"body_markdown":"Have you compared the keynames of WCode class with the keynamens in your dynamodb in aws? As I remember they are case sensitive","body":"Have you compared the keynames of WCode class with the keynamens in your dynamodb in aws? As I remember they are case sensitive"},{"owner":{"account_id":4271760,"reputation":706,"user_id":3493420,"accept_rate":56,"display_name":"Marco"},"score":0,"creation_date":1459864306,"post_id":36428203,"comment_id":60470994,"body_markdown":"You&#39;re right; I did, they seem to be corrected.","body":"You&#39;re right; I did, they seem to be corrected."},{"owner":{"account_id":4271760,"reputation":706,"user_id":3493420,"accept_rate":56,"display_name":"Marco"},"score":0,"creation_date":1459865102,"post_id":36428203,"comment_id":60471663,"body_markdown":"No I mean you&#39;re right, it&#39;s case sensitive. I already checked the names match and there is no difference, they are correct.","body":"No I mean you&#39;re right, it&#39;s case sensitive. I already checked the names match and there is no difference, they are correct."},{"owner":{"account_id":3046198,"reputation":2670,"user_id":2581783,"display_name":"Rene M."},"score":0,"creation_date":1459866005,"post_id":36428203,"comment_id":60472427,"body_markdown":"I haven&#39;t used the mapper, I&#39;m using my own way over the low level API. But I checked my DynamoDB Table definitions and saw that I use camel case and no hyphens. Possible this is your problem. Because the error is protocol related, your code already send a create request to dynamodb and the result is an error saying a key mismatch, which could only be a mismatch between your table key definitions and used keys in your entity class.","body":"I haven&#39;t used the mapper, I&#39;m using my own way over the low level API. But I checked my DynamoDB Table definitions and saw that I use camel case and no hyphens. Possible this is your problem. Because the error is protocol related, your code already send a create request to dynamodb and the result is an error saying a key mismatch, which could only be a mismatch between your table key definitions and used keys in your entity class."},{"owner":{"account_id":4271760,"reputation":706,"user_id":3493420,"accept_rate":56,"display_name":"Marco"},"score":0,"creation_date":1459867812,"post_id":36428203,"comment_id":60473901,"body_markdown":"I use a hypen only in `globalSecondaryIndexName` but that&#39;s the name; anyway, I tried to change the specified names of the attributes into this (`id`, `cdIndex`, `cd`, `ex`) but I got the same error; I also tried to change the name of the table to `codesDev` but I obtained the `ResourceNotFoundException`.","body":"I use a hypen only in <code>globalSecondaryIndexName</code> but that&#39;s the name; anyway, I tried to change the specified names of the attributes into this (<code>id</code>, <code>cdIndex</code>, <code>cd</code>, <code>ex</code>) but I got the same error; I also tried to change the name of the table to <code>codesDev</code> but I obtained the <code>ResourceNotFoundException</code>."},{"owner":{"account_id":3046198,"reputation":2670,"user_id":2581783,"display_name":"Rene M."},"score":0,"creation_date":1459868094,"post_id":36428203,"comment_id":60474136,"body_markdown":"Sorry then it&#39;s out off my scope. I never used mapper. Have you tried a low level api test if you can create an item?","body":"Sorry then it&#39;s out off my scope. I never used mapper. Have you tried a low level api test if you can create an item?"}],"answers":[{"tags":[],"owner":{"account_id":8062418,"reputation":66,"user_id":6077577,"display_name":"Andrea Ciaccia"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1697226761,"creation_date":1460109440,"answer_id":36496691,"question_id":36428203,"body_markdown":"I had the same problem.\r\nI&#39;ve resolved using batchSave function instead of save:\r\n\r\n    mapper.batchSave(Arrays.asList(tmpCode));\r\n\r\nIt worked for me.","title":"ValidationException while saving on DynamoDB with mapper","body":"<p>I had the same problem.\nI've resolved using batchSave function instead of save:</p>\n<pre><code>mapper.batchSave(Arrays.asList(tmpCode));\n</code></pre>\n<p>It worked for me.</p>\n"}],"owner":{"account_id":4271760,"reputation":706,"user_id":3493420,"accept_rate":56,"display_name":"Marco"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1468,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":36496691,"answer_count":1,"score":3,"last_activity_date":1697226761,"creation_date":1459863919,"question_id":36428203,"body_markdown":"I have this error while saving a new item (`WCode`) into a DynamoDB instance by using `DynamoDBMapper`:\r\n\r\n    Exception in thread &quot;Thread-1&quot; com.amazonaws.AmazonServiceException: The provided key element does not match the schema (Service: AmazonDynamoDBv2; Status Code: 400; Error Code: ValidationException; Request ID: 4OOMKU7NS1VD19EN988SUUM3U7VV4KQNSO5AEMVJF66Q9ASUAAJG)\r\n      at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:1369)\r\n      at com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:913)\r\n      at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:631)\r\n      at com.amazonaws.http.AmazonHttpClient.doExecute(AmazonHttpClient.java:400)\r\n      at com.amazonaws.http.AmazonHttpClient.executeWithTimer(AmazonHttpClient.java:362)\r\n      at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:311)\r\n      at com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.invoke(AmazonDynamoDBClient.java:1966)\r\n      at com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.updateItem(AmazonDynamoDBClient.java:1780)\r\n      at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper$SaveObjectHandler.doUpdateItem(DynamoDBMapper.java:1110)\r\n      at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper$2.executeLowLevelRequest(DynamoDBMapper.java:806)\r\n      at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper$SaveObjectHandler.execute(DynamoDBMapper.java:989)\r\n      at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper.save(DynamoDBMapper.java:835)\r\n      at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper.save(DynamoDBMapper.java:669)\r\n      at com.wkt.cdmng.MessageAnalyzer.storeCode(MessageAnalyzer.java:220)\r\n      at com.wkt.cdmng.MessageAnalyzer.run(MessageAnalyzer.java:156)\r\n      at java.lang.Thread.run(Thread.java:745)\r\n\r\nI guest it&#39;s something related to the key attributes on the `WCode` class but I can&#39;t really understand which one and how to search for additional details problem.\r\n\r\nThe following is the `WCode` model class and all the attributes names are correctly reported:\r\n\r\n    import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBAttribute;\r\n    import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBHashKey;\r\n    import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBIndexHashKey;\r\n    import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTable;\r\n    import java.util.Date;\r\n\r\n    @DynamoDBTable(tableName = &quot;CODES_DEV&quot;)\r\n    public class WCode {\r\n      private String id;\r\n      private String code;\r\n      private String extra;\r\n\r\n      @DynamoDBHashKey(attributeName = &quot;ID&quot;)\r\n      public String getId() {return id;}\r\n      public void setId(String code) {id = &quot;0|&quot; + code + &quot;|&quot; + String.valueOf(new Date().getTime());}\r\n\r\n      @DynamoDBIndexHashKey(globalSecondaryIndexName = &quot;CD-index&quot;, attributeName = &quot;CD&quot;)\r\n      public String getCode() {return code;}\r\n      public void setCode(String code) {this.code = code;}\r\n\r\n      @DynamoDBAttribute(attributeName = &quot;EX&quot;)\r\n      public String getExtra() {return extra;}\r\n      public void setExtra(String extra) {this.extra = extra;}\r\n    }\r\n\r\nThis is the method I use to store the item (`storeCode`):\r\n\r\n    private void storeCode(String code) {\r\n      DynamoDBMapper mapper = awsDynamo.getMapper(); // singleton class I use to connect to DynamoDB\r\n      WCode tmpCode = new WCode();\r\n      tmpCode.setId(code);\r\n      tmpCode.setCode(code);\r\n      tmpCode.setExtra(&quot;&quot;);\r\n      mapper.save(tmpCode);\r\n    }\r\n\r\nI&#39;m using `aws-java-sdk-dynamodb` and `aws-java-sdk-sqs` (the latter for another part of the project) version `1.10.58`.\r\n\r\nDoes someone can point me to a possible solution or suggestion?\r\n\r\nThank you very much!","title":"ValidationException while saving on DynamoDB with mapper","body":"<p>I have this error while saving a new item (<code>WCode</code>) into a DynamoDB instance by using <code>DynamoDBMapper</code>:</p>\n\n<pre><code>Exception in thread \"Thread-1\" com.amazonaws.AmazonServiceException: The provided key element does not match the schema (Service: AmazonDynamoDBv2; Status Code: 400; Error Code: ValidationException; Request ID: 4OOMKU7NS1VD19EN988SUUM3U7VV4KQNSO5AEMVJF66Q9ASUAAJG)\n  at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:1369)\n  at com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:913)\n  at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:631)\n  at com.amazonaws.http.AmazonHttpClient.doExecute(AmazonHttpClient.java:400)\n  at com.amazonaws.http.AmazonHttpClient.executeWithTimer(AmazonHttpClient.java:362)\n  at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:311)\n  at com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.invoke(AmazonDynamoDBClient.java:1966)\n  at com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.updateItem(AmazonDynamoDBClient.java:1780)\n  at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper$SaveObjectHandler.doUpdateItem(DynamoDBMapper.java:1110)\n  at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper$2.executeLowLevelRequest(DynamoDBMapper.java:806)\n  at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper$SaveObjectHandler.execute(DynamoDBMapper.java:989)\n  at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper.save(DynamoDBMapper.java:835)\n  at com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBMapper.save(DynamoDBMapper.java:669)\n  at com.wkt.cdmng.MessageAnalyzer.storeCode(MessageAnalyzer.java:220)\n  at com.wkt.cdmng.MessageAnalyzer.run(MessageAnalyzer.java:156)\n  at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>I guest it's something related to the key attributes on the <code>WCode</code> class but I can't really understand which one and how to search for additional details problem.</p>\n\n<p>The following is the <code>WCode</code> model class and all the attributes names are correctly reported:</p>\n\n<pre><code>import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBAttribute;\nimport com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBHashKey;\nimport com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBIndexHashKey;\nimport com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTable;\nimport java.util.Date;\n\n@DynamoDBTable(tableName = \"CODES_DEV\")\npublic class WCode {\n  private String id;\n  private String code;\n  private String extra;\n\n  @DynamoDBHashKey(attributeName = \"ID\")\n  public String getId() {return id;}\n  public void setId(String code) {id = \"0|\" + code + \"|\" + String.valueOf(new Date().getTime());}\n\n  @DynamoDBIndexHashKey(globalSecondaryIndexName = \"CD-index\", attributeName = \"CD\")\n  public String getCode() {return code;}\n  public void setCode(String code) {this.code = code;}\n\n  @DynamoDBAttribute(attributeName = \"EX\")\n  public String getExtra() {return extra;}\n  public void setExtra(String extra) {this.extra = extra;}\n}\n</code></pre>\n\n<p>This is the method I use to store the item (<code>storeCode</code>):</p>\n\n<pre><code>private void storeCode(String code) {\n  DynamoDBMapper mapper = awsDynamo.getMapper(); // singleton class I use to connect to DynamoDB\n  WCode tmpCode = new WCode();\n  tmpCode.setId(code);\n  tmpCode.setCode(code);\n  tmpCode.setExtra(\"\");\n  mapper.save(tmpCode);\n}\n</code></pre>\n\n<p>I'm using <code>aws-java-sdk-dynamodb</code> and <code>aws-java-sdk-sqs</code> (the latter for another part of the project) version <code>1.10.58</code>.</p>\n\n<p>Does someone can point me to a possible solution or suggestion?</p>\n\n<p>Thank you very much!</p>\n"},{"tags":["java","build"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1684868646,"post_id":76317864,"comment_id":134579528,"body_markdown":"What did you do, exactly, that &quot;didn&#39;t work?&quot;  We&#39;ll need more info about what frameworks and libraries you used in your application, so we can advise you how to set up a real (without IntelliJ) environment.","body":"What did you do, exactly, that &quot;didn&#39;t work?&quot;  We&#39;ll need more info about what frameworks and libraries you used in your application, so we can advise you how to set up a real (without IntelliJ) environment."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1684869056,"post_id":76317864,"comment_id":134579582,"body_markdown":"The usual answer is to build a **war** file. Try `mvn package`","body":"The usual answer is to build a <b>war</b> file. Try <code>mvn package</code>"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1684872717,"post_id":76317864,"comment_id":134580298,"body_markdown":"Also a war file needs an execution environment. Building into a jar means (to me) the container should be bundled as well - something that is not achieved by just running mvn package.","body":"Also a war file needs an execution environment. Building into a jar means (to me) the container should be bundled as well - something that is not achieved by just running mvn package."},{"owner":{"account_id":28664967,"reputation":1,"user_id":21949186,"display_name":"Sebastian Schedl"},"score":0,"creation_date":1685012544,"post_id":76317864,"comment_id":134602809,"body_markdown":"I tried Build --&gt; Build Artifacts --&gt; Java_Dynamic_Web_Project:war exploded --&gt; Build","body":"I tried Build --&gt; Build Artifacts --&gt; Java_Dynamic_Web_Project:war exploded --&gt; Build"}],"answers":[{"comments":[{"owner":{"account_id":28664967,"reputation":1,"user_id":21949186,"display_name":"Sebastian Schedl"},"score":0,"creation_date":1685012328,"post_id":76318327,"comment_id":134602772,"body_markdown":"ok thx I will try this out. Yes Apache Tomcat was what I was referring to. The point of this is to set up a simple application with 2 servlets as an university project.","body":"ok thx I will try this out. Yes Apache Tomcat was what I was referring to. The point of this is to set up a simple application with 2 servlets as an university project."}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684872632,"creation_date":1684872632,"answer_id":76318327,"question_id":76317864,"body_markdown":"With the term &quot;Apache Server&quot; many people refer to [Apache httpd][1].\r\nThis one does not serve Java Web applications, therefore I assume you are referring to [Apache Tomcat][2].\r\n\r\nYour web application requires a runtime environment, which is not only the Java but also a servlet container. Apache Tomcat is one possible choice here.\r\n\r\nSo bundling both (the servlet container and your application) into one executable jar is possible. The [Jenkins project][3] has done so with their installation - just check out their [download for the generic package (war)][4]. You can drop it into an existing container like Apache Tomcat or run it directly like an executable jar.\r\n\r\nThe keyword you are searching for is `embedded Tomcat`. Googling for that produces results like\r\n- https://www.codejava.net/servers/tomcat/how-to-embed-tomcat-server-into-java-web-applications\r\n- https://devcenter.heroku.com/articles/create-a-java-web-application-using-embedded-tomcat\r\n- http://www.oxxus.net/tutorials/tomcat/embedding-tomcat\r\n\r\nBe aware that Tomcat is not the only servlet engine that can be embedded, and adding another framework like [Spring Boot][5] can make your life easier. It depends on what else you intend to do.\r\n\r\n\r\n  [1]: https://httpd.apache.org/\r\n  [2]: https://tomcat.apache.org/\r\n  [3]: https://www.jenkins.io/\r\n  [4]: https://www.jenkins.io/download/\r\n  [5]: https://spring.io/projects/spring-boot","title":"how can you make an executable file of a jakarta EE project in intellij","body":"<p>With the term &quot;Apache Server&quot; many people refer to <a href=\"https://httpd.apache.org/\" rel=\"nofollow noreferrer\">Apache httpd</a>.\nThis one does not serve Java Web applications, therefore I assume you are referring to <a href=\"https://tomcat.apache.org/\" rel=\"nofollow noreferrer\">Apache Tomcat</a>.</p>\n<p>Your web application requires a runtime environment, which is not only the Java but also a servlet container. Apache Tomcat is one possible choice here.</p>\n<p>So bundling both (the servlet container and your application) into one executable jar is possible. The <a href=\"https://www.jenkins.io/\" rel=\"nofollow noreferrer\">Jenkins project</a> has done so with their installation - just check out their <a href=\"https://www.jenkins.io/download/\" rel=\"nofollow noreferrer\">download for the generic package (war)</a>. You can drop it into an existing container like Apache Tomcat or run it directly like an executable jar.</p>\n<p>The keyword you are searching for is <code>embedded Tomcat</code>. Googling for that produces results like</p>\n<ul>\n<li><a href=\"https://www.codejava.net/servers/tomcat/how-to-embed-tomcat-server-into-java-web-applications\" rel=\"nofollow noreferrer\">https://www.codejava.net/servers/tomcat/how-to-embed-tomcat-server-into-java-web-applications</a></li>\n<li><a href=\"https://devcenter.heroku.com/articles/create-a-java-web-application-using-embedded-tomcat\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/create-a-java-web-application-using-embedded-tomcat</a></li>\n<li><a href=\"http://www.oxxus.net/tutorials/tomcat/embedding-tomcat\" rel=\"nofollow noreferrer\">http://www.oxxus.net/tutorials/tomcat/embedding-tomcat</a></li>\n</ul>\n<p>Be aware that Tomcat is not the only servlet engine that can be embedded, and adding another framework like <a href=\"https://spring.io/projects/spring-boot\" rel=\"nofollow noreferrer\">Spring Boot</a> can make your life easier. It depends on what else you intend to do.</p>\n"}],"owner":{"account_id":28664967,"reputation":1,"user_id":21949186,"display_name":"Sebastian Schedl"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697226682,"creation_date":1684868333,"question_id":76317864,"body_markdown":"i finished the coding of a dynamic web project with Java in IntelliJ and now I want to build an executable jar file so I don’t have to use an editor like IntelliJ to run it.  Is there a way to do it? It runs on an local Apache TomCat.","title":"how can you make an executable file of a jakarta EE project in intellij","body":"<p>i finished the coding of a dynamic web project with Java in IntelliJ and now I want to build an executable jar file so I don’t have to use an editor like IntelliJ to run it.  Is there a way to do it? It runs on an local Apache TomCat.</p>\n"},{"tags":["java","spring","multithreading","scheduled-tasks","java.util.concurrent"],"answers":[{"tags":[],"owner":{"account_id":1316033,"reputation":7855,"user_id":1262865,"accept_rate":50,"display_name":"john16384"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1487438688,"creation_date":1487438688,"answer_id":42318322,"question_id":42315164,"body_markdown":"You can&#39;t do this by using those two classes, because they are implementations that rely on an internal pool.\r\n\r\nHowever, you can implement your own `TaskExecutor` and `TaskScheduler` class that use a shared ThreadPool.\r\n\r\nNote though that a few idle threads is not going to have much of an impact on performance, so unless you know that having two pools is a major performance bottleneck, I wouldn&#39;t waste my time.\r\n","title":"Spring - Have TaskExecutor and TaskScheduler backed by the same thread pool","body":"<p>You can't do this by using those two classes, because they are implementations that rely on an internal pool.</p>\n\n<p>However, you can implement your own <code>TaskExecutor</code> and <code>TaskScheduler</code> class that use a shared ThreadPool.</p>\n\n<p>Note though that a few idle threads is not going to have much of an impact on performance, so unless you know that having two pools is a major performance bottleneck, I wouldn't waste my time.</p>\n"}],"owner":{"account_id":10250863,"reputation":37,"user_id":7565157,"display_name":"Dave Jeod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1288,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":42318322,"answer_count":1,"score":2,"last_activity_date":1697226588,"creation_date":1487421101,"question_id":42315164,"body_markdown":"I am a bean for TaskScheduler and TaskExecutor as following:\r\n\r\n    @Bean\r\n    public TaskScheduler taskScheduler() {\r\n        ThreadPoolTaskScheduler s = new ThreadPoolTaskScheduler();\r\n\r\n        s.setThreadNamePrefix(&quot;Task-Scheduler-&quot;);\r\n        s.setPoolSize(10);\r\n        s.setRemoveOnCancelPolicy(true);\r\n\r\n        return s;\r\n    }\r\n\r\n    @Bean\r\n    public TaskExecutor taskExecutor() {\r\n        ThreadPoolTaskExecutor e = new ThreadPoolTaskExecutor();\r\n\r\n        e.setThreadNamePrefix(&quot;Task-Executor-&quot;);\r\n        e.setMaxPoolSize(10);\r\n        e.setCorePoolSize(10);\r\n\r\n        return e;\r\n    }\r\n\r\nIs it possible to share the underlying thread pool executor service between the TaskExecutor and the TaskScheduler? Now I have twice a pool of each 10 fixed threads, but I would like to have one single pool of 20 threads.\r\n\r\nThese pools will be used for @Async, @Scheduled and @Retry annotatons.","title":"Spring - Have TaskExecutor and TaskScheduler backed by the same thread pool","body":"<p>I am a bean for TaskScheduler and TaskExecutor as following:</p>\n\n<pre><code>@Bean\npublic TaskScheduler taskScheduler() {\n    ThreadPoolTaskScheduler s = new ThreadPoolTaskScheduler();\n\n    s.setThreadNamePrefix(\"Task-Scheduler-\");\n    s.setPoolSize(10);\n    s.setRemoveOnCancelPolicy(true);\n\n    return s;\n}\n\n@Bean\npublic TaskExecutor taskExecutor() {\n    ThreadPoolTaskExecutor e = new ThreadPoolTaskExecutor();\n\n    e.setThreadNamePrefix(\"Task-Executor-\");\n    e.setMaxPoolSize(10);\n    e.setCorePoolSize(10);\n\n    return e;\n}\n</code></pre>\n\n<p>Is it possible to share the underlying thread pool executor service between the TaskExecutor and the TaskScheduler? Now I have twice a pool of each 10 fixed threads, but I would like to have one single pool of 20 threads.</p>\n\n<p>These pools will be used for @Async, @Scheduled and @Retry annotatons.</p>\n"},{"tags":["java","postgresql","spring-data-jpa"],"comments":[{"owner":{"account_id":657205,"reputation":884,"user_id":470530,"display_name":"V&#233;race"},"score":0,"creation_date":1696508318,"post_id":77236222,"comment_id":136163700,"body_markdown":"Can you bypass the ORM and send SQL directly to the server?","body":"Can you bypass the ORM and send SQL directly to the server?"},{"owner":{"account_id":1001733,"reputation":34918,"user_id":1016435,"display_name":"xQbert"},"score":0,"creation_date":1696515950,"post_id":77236222,"comment_id":136165586,"body_markdown":"https://www.postgresql.org/docs/current/queries-order.html#:~:text=The%20NULLS%20FIRST%20and%20NULLS,order%2C%20and%20NULLS%20LAST%20otherwise.  but you already know about nulls first....  so maybe: https://stackoverflow.com/questions/57623565/null-last-is-not-working-with-spring-data-jpa  which says to use: `spring.jpa.properties.hibernate.order_by.default_null_ordering=first` in the application.properties. or as a hack to assign null the earliest possible value with coalesce so... coalesce(orders,&#39;0&#39;) so 0 is assigned to orders assuming it would be the earliest order when sorted...","body":"<a href=\"https://www.postgresql.org/docs/current/queries-order.html#:~:text=The%20NULLS%20FIRST%20and%20NULLS,order%2C%20and%20NULLS%20LAST%20otherwise\" rel=\"nofollow noreferrer\">postgresql.org/docs/current/&hellip;</a>.  but you already know about nulls first....  so maybe: <a href=\"https://stackoverflow.com/questions/57623565/null-last-is-not-working-with-spring-data-jpa\" title=\"null last is not working with spring data jpa\">stackoverflow.com/questions/57623565/&hellip;</a>  which says to use: <code>spring.jpa.properties.hibernate.order_by.default_null_orderi&zwnj;&#8203;ng=first</code> in the application.properties. or as a hack to assign null the earliest possible value with coalesce so... coalesce(orders,&#39;0&#39;) so 0 is assigned to orders assuming it would be the earliest order when sorted..."}],"owner":{"account_id":27980139,"reputation":23,"user_id":21368032,"display_name":"Ymrik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697226433,"creation_date":1696501079,"question_id":77236222,"body_markdown":"I have a problem with sorting data from PostgreSQL. \r\n\r\nI am sorting data from DB using `PagingAndSortingRepository`. The code is shown below:\r\n\r\n```\r\nList&lt;Sort.Order&gt; orders = new ArrayList();\r\norders.add(Sort.Order.asc(s.getField()));\r\n\r\nSort sort = Sort.by(orders);\r\n\r\nPageable pageSort = PageRequest.of(pageNumber,pageSize, sort);\r\nList&lt;Result&gt; results = repository.findAll(pageSort);\r\n```\r\n\r\nAs a result I have sorted data, but data with NULL values comes last, when I prefer it to come first.\r\n\r\nI would like NULLS to go first when sorting in ascending order, and last when sorting in descending order.\r\n\r\nBut PostgreSQL by default puts NULLS at the end when sorting in ascending order and at the beginning when sorting in descending order.\r\n\r\nI tried to use \r\n\r\n    new Sort.Order(Sort.Direction.ASC, s.getField(), Sort.NullHandling.NULLS_FIRST)\r\n\r\nbut it seems like `NULLS_FIRST` property is ignored in generated query: \r\n\r\n    select generatedAlias0 \r\n    from Table as generatedAlias0 \r\n    order by generatedAlias0.targetField asc\r\n\r\nAs you can see there is no mention about NULL ORDERING.\r\n\r\nDo you know other way how to solve my problem?\r\n\r\nPlease notice, that I am asking not about pg script, but about how can I solve problem through java code.","title":"Make NULLS FIRST when asc sorting from PostgreSQL. Spring Data JPA","body":"<p>I have a problem with sorting data from PostgreSQL.</p>\n<p>I am sorting data from DB using <code>PagingAndSortingRepository</code>. The code is shown below:</p>\n<pre><code>List&lt;Sort.Order&gt; orders = new ArrayList();\norders.add(Sort.Order.asc(s.getField()));\n\nSort sort = Sort.by(orders);\n\nPageable pageSort = PageRequest.of(pageNumber,pageSize, sort);\nList&lt;Result&gt; results = repository.findAll(pageSort);\n</code></pre>\n<p>As a result I have sorted data, but data with NULL values comes last, when I prefer it to come first.</p>\n<p>I would like NULLS to go first when sorting in ascending order, and last when sorting in descending order.</p>\n<p>But PostgreSQL by default puts NULLS at the end when sorting in ascending order and at the beginning when sorting in descending order.</p>\n<p>I tried to use</p>\n<pre><code>new Sort.Order(Sort.Direction.ASC, s.getField(), Sort.NullHandling.NULLS_FIRST)\n</code></pre>\n<p>but it seems like <code>NULLS_FIRST</code> property is ignored in generated query:</p>\n<pre><code>select generatedAlias0 \nfrom Table as generatedAlias0 \norder by generatedAlias0.targetField asc\n</code></pre>\n<p>As you can see there is no mention about NULL ORDERING.</p>\n<p>Do you know other way how to solve my problem?</p>\n<p>Please notice, that I am asking not about pg script, but about how can I solve problem through java code.</p>\n"},{"tags":["java","cloud-document-ai"],"owner":{"account_id":27485549,"reputation":1,"user_id":20971867,"display_name":"Hari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697225497,"creation_date":1697181216,"question_id":77285732,"body_markdown":"I am trying to getDocument using Document AI Warehouse Java API&#39;s. I am getting the below error:\r\n\r\n    com.google.api.gax.rpc.InvalidArgumentException: io.grpc.StatusRuntimeException: INVALID_ARGUMENT: Request contains an invalid argument.\r\n    \tat com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:92)\r\n    \tat com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)\r\n    \tat com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)\r\n    \tat com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)\r\n    \tat com.google.api.gax.grpc.GrpcExceptionCallable$ExceptionTransformingFuture.onFailure(GrpcExceptionCallable.java:97)\r\n    \tat com.google.api.core.ApiFutures$1.onFailure(ApiFutures.java:84)\r\n    \tat com.google.common.util.concurrent.Futures$CallbackListener.run(Futures.java:1127)\r\n    \tat com.google.common.util.concurrent.DirectExecutor.execute(DirectExecutor.java:31)\r\n    \tat com.google.common.util.concurrent.AbstractFuture.executeListener(AbstractFuture.java:1286)\r\n    \tat com.google.common.util.concurrent.AbstractFuture.complete(AbstractFuture.java:1055)\r\n    \tat com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:807)\r\n    \tat io.grpc.stub.ClientCalls$GrpcFuture.setException(ClientCalls.java:568)\r\n    \tat io.grpc.stub.ClientCalls$UnaryStreamToFuture.onClose(ClientCalls.java:538)\r\n    \tat io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)\r\n    \tat io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)\r\n    \tat io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)\r\n    \tat com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)\r\n    \tat io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:489)\r\n    \tat io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:453)\r\n    \tat io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:486)\r\n    \tat io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)\r\n    \tat io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)\r\n    \tat io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)\r\n    \tat io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)\r\n    \tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\r\n    \tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    \tSuppressed: com.google.api.gax.rpc.AsyncTaskException: Asynchronous task failed\r\n    \t\tat com.google.api.gax.rpc.ApiExceptions.callAndTranslateApiException(ApiExceptions.java:57)\r\n    \t\tat com.google.api.gax.rpc.UnaryCallable.call(UnaryCallable.java:112)\r\n    \t\tat com.google.cloud.contentwarehouse.v1.DocumentServiceClient.getDocument(DocumentServiceClient.java:400) \r\n\r\nWhat am i missing. \r\n\r\nI have used the java sample mentioned in this link:\r\nhttps://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/content-warehouse/src/main/java/contentwarehouse/v1/GetDocument.java\r\nkindly help to find the issue. ","title":"Google Document AI Warehouse - getdocument issue","body":"<p>I am trying to getDocument using Document AI Warehouse Java API's. I am getting the below error:</p>\n<pre><code>com.google.api.gax.rpc.InvalidArgumentException: io.grpc.StatusRuntimeException: INVALID_ARGUMENT: Request contains an invalid argument.\n    at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:92)\n    at com.google.api.gax.rpc.ApiExceptionFactory.createException(ApiExceptionFactory.java:41)\n    at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:86)\n    at com.google.api.gax.grpc.GrpcApiExceptionFactory.create(GrpcApiExceptionFactory.java:66)\n    at com.google.api.gax.grpc.GrpcExceptionCallable$ExceptionTransformingFuture.onFailure(GrpcExceptionCallable.java:97)\n    at com.google.api.core.ApiFutures$1.onFailure(ApiFutures.java:84)\n    at com.google.common.util.concurrent.Futures$CallbackListener.run(Futures.java:1127)\n    at com.google.common.util.concurrent.DirectExecutor.execute(DirectExecutor.java:31)\n    at com.google.common.util.concurrent.AbstractFuture.executeListener(AbstractFuture.java:1286)\n    at com.google.common.util.concurrent.AbstractFuture.complete(AbstractFuture.java:1055)\n    at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:807)\n    at io.grpc.stub.ClientCalls$GrpcFuture.setException(ClientCalls.java:568)\n    at io.grpc.stub.ClientCalls$UnaryStreamToFuture.onClose(ClientCalls.java:538)\n    at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)\n    at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)\n    at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)\n    at com.google.api.gax.grpc.ChannelPool$ReleasingClientCall$1.onClose(ChannelPool.java:541)\n    at io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:489)\n    at io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:453)\n    at io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:486)\n    at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)\n    at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)\n    at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)\n    at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)\n    at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n    at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n    Suppressed: com.google.api.gax.rpc.AsyncTaskException: Asynchronous task failed\n        at com.google.api.gax.rpc.ApiExceptions.callAndTranslateApiException(ApiExceptions.java:57)\n        at com.google.api.gax.rpc.UnaryCallable.call(UnaryCallable.java:112)\n        at com.google.cloud.contentwarehouse.v1.DocumentServiceClient.getDocument(DocumentServiceClient.java:400) \n</code></pre>\n<p>What am i missing.</p>\n<p>I have used the java sample mentioned in this link:\n<a href=\"https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/content-warehouse/src/main/java/contentwarehouse/v1/GetDocument.java\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/content-warehouse/src/main/java/contentwarehouse/v1/GetDocument.java</a>\nkindly help to find the issue.</p>\n"},{"tags":["java","spring","spring-boot","jsp"],"answers":[{"comments":[{"owner":{"account_id":17937681,"reputation":33,"user_id":13033694,"display_name":"Lakshay Kumar"},"score":0,"creation_date":1692995983,"post_id":76973567,"comment_id":135706429,"body_markdown":"thanks,  i changed the version but its still not working.\nCan I share a link of repo of it to provide more details.","body":"thanks,  i changed the version but its still not working. Can I share a link of repo of it to provide more details."},{"owner":{"account_id":17937681,"reputation":33,"user_id":13033694,"display_name":"Lakshay Kumar"},"score":0,"creation_date":1692996307,"post_id":76973567,"comment_id":135706483,"body_markdown":"@zawaudo I have removed ServletInitializer class also, can you plz share your jsp file also","body":"@zawaudo I have removed ServletInitializer class also, can you plz share your jsp file also"},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1692996981,"post_id":76973567,"comment_id":135706578,"body_markdown":"it just has this &lt;p&gt;This is a paragraph.&lt;/p&gt;","body":"it just has this &lt;p&gt;This is a paragraph.&lt;/p&gt;"},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1692997028,"post_id":76973567,"comment_id":135706589,"body_markdown":"and I visit http://localhost:8080/ since i mapped the controller to &quot;/&quot; and that&#39;s it","body":"and I visit <a href=\"http://localhost:8080/\" rel=\"nofollow noreferrer\">localhost:8080</a> since i mapped the controller to &quot;/&quot; and that&#39;s it"},{"owner":{"account_id":17937681,"reputation":33,"user_id":13033694,"display_name":"Lakshay Kumar"},"score":0,"creation_date":1692997447,"post_id":76973567,"comment_id":135706672,"body_markdown":"oh, okay but it still it gives me 404 error on hitting URL, project structure is also same\n\npublic String home()\n    {\n        System.out.println(&quot;hello in home&quot;);\n        return &quot;home&quot;;\n    }\nI am doing like this but in console &quot;hello in home&quot; is printing which basically means that something in not working in jsp while returning from controller function\n\nIf you know something related to this @zawarudo","body":"oh, okay but it still it gives me 404 error on hitting URL, project structure is also same  public String home()     {         System.out.println(&quot;hello in home&quot;);         return &quot;home&quot;;     } I am doing like this but in console &quot;hello in home&quot; is printing which basically means that something in not working in jsp while returning from controller function  If you know something related to this @zawarudo"},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1693000343,"post_id":76973567,"comment_id":135707037,"body_markdown":"it might be the issue with the fact that you are using vscode instead of intellij, because as I said, I shared a working solution that I wrote and tested on my machine.","body":"it might be the issue with the fact that you are using vscode instead of intellij, because as I said, I shared a working solution that I wrote and tested on my machine."},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1693000424,"post_id":76973567,"comment_id":135707052,"body_markdown":"if you copy the code and follow the structure that i provided it will work.","body":"if you copy the code and follow the structure that i provided it will work."},{"owner":{"account_id":17937681,"reputation":33,"user_id":13033694,"display_name":"Lakshay Kumar"},"score":0,"creation_date":1693003658,"post_id":76973567,"comment_id":135707367,"body_markdown":"I have provided the code so can you run my code on intellij, it will let me know whether there is any problem with IDE or not\nJust need copy, paste but it will help me","body":"I have provided the code so can you run my code on intellij, it will let me know whether there is any problem with IDE or not Just need copy, paste but it will help me"},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1693008432,"post_id":76973567,"comment_id":135707724,"body_markdown":"code that you provided still has Tomcat 9 instead of 10, Spring Boot 3 does not work with Tomcat 9, i stated that in my answer","body":"code that you provided still has Tomcat 9 instead of 10, Spring Boot 3 does not work with Tomcat 9, i stated that in my answer"},{"owner":{"account_id":17937681,"reputation":33,"user_id":13033694,"display_name":"Lakshay Kumar"},"score":0,"creation_date":1693066424,"post_id":76973567,"comment_id":135712224,"body_markdown":"yeh I have made changes here now, plz run on intellij and let me know if it woking on hitting localhost:8585/home or not?","body":"yeh I have made changes here now, plz run on intellij and let me know if it woking on hitting localhost:8585/home or not?"},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1693070562,"post_id":76973567,"comment_id":135712697,"body_markdown":"http://localhost:8585/home is working fine, right click on main class &gt; run as java &gt; visit http://localhost:8585/home","body":"<a href=\"http://localhost:8585/home\" rel=\"nofollow noreferrer\">localhost:8585/home</a> is working fine, right click on main class &gt; run as java &gt; visit <a href=\"http://localhost:8585/home\" rel=\"nofollow noreferrer\">localhost:8585/home</a>"},{"owner":{"account_id":17937681,"reputation":33,"user_id":13033694,"display_name":"Lakshay Kumar"},"score":0,"creation_date":1693076233,"post_id":76973567,"comment_id":135713329,"body_markdown":"Its still not working for me, if I think this is a issue with VS code that is weird I guess as lot of people using with VS code.\nAny suggestions yours on this?","body":"Its still not working for me, if I think this is a issue with VS code that is weird I guess as lot of people using with VS code. Any suggestions yours on this?"},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1693387405,"post_id":76973567,"comment_id":135752744,"body_markdown":"VS code requires installation of plugins for spring to work on it, it is not designed to be used for spring development out of the box. My suggestion is to use intellij like everyone else.","body":"VS code requires installation of plugins for spring to work on it, it is not designed to be used for spring development out of the box. My suggestion is to use intellij like everyone else."}],"tags":[],"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"comment_count":13,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692923673,"creation_date":1692923022,"answer_id":76973567,"question_id":76973438,"body_markdown":"Your problem is the version of your Tomcat, it should be version 10. Spring Boot 3 does not work with Tomcat 9 due to the package being renamed from javax to jakarta.\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.tomcat.embed/tomcat-embed-jasper --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;10.1.10&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n\r\nI just followed one of basic examples and it is working as expected.\r\nHere are the snippets.\r\n\r\nMain Class\r\n\r\n    package com.example.demo;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class DemoApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(DemoApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\nController class\r\n\r\n    package com.example.demo.controller;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    \r\n    @Controller\r\n    public class HomeController {\r\n    \r\n        @GetMapping(&quot;/&quot;)\r\n        public String showJsp() {\r\n    \r\n            return &quot;foo&quot;;\r\n        }\r\n    \r\n    }\r\n\r\napplication.properties\r\n\r\n    spring.mvc.view.prefix=/views/\r\n    spring.mvc.view.suffix=.jsp\r\n\r\nAnd jsp page placed in this position\r\n\r\n    demo\\src\\main\\webapp\\views\\foo.jsp\r\n\r\nAnd pom.xml just in case\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.1.3&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;demo&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.tomcat.embed/tomcat-embed-jasper --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;10.1.10&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nI don&#39;t know what your class ServletInitializer is, but if it is a component you need to move it to the subpackage of your main class location in order for it to be scanned, as you can see from my example it is not required.\r\n\r\nIf needed here is a picture of the project structure\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere is the blog I used to create this demo project\r\n\r\nhttps://www.baeldung.com/spring-boot-jsp\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gI8tN.png","title":"Why did JSP file is not loading in springboot?","body":"<p>Your problem is the version of your Tomcat, it should be version 10. Spring Boot 3 does not work with Tomcat 9 due to the package being renamed from javax to jakarta.</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.apache.tomcat.embed/tomcat-embed-jasper --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n            &lt;version&gt;10.1.10&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I just followed one of basic examples and it is working as expected.\nHere are the snippets.</p>\n<p>Main Class</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Controller class</p>\n<pre><code>package com.example.demo.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\n\n@Controller\npublic class HomeController {\n\n    @GetMapping(&quot;/&quot;)\n    public String showJsp() {\n\n        return &quot;foo&quot;;\n    }\n\n}\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.mvc.view.prefix=/views/\nspring.mvc.view.suffix=.jsp\n</code></pre>\n<p>And jsp page placed in this position</p>\n<pre><code>demo\\src\\main\\webapp\\views\\foo.jsp\n</code></pre>\n<p>And pom.xml just in case</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.tomcat.embed/tomcat-embed-jasper --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n            &lt;version&gt;10.1.10&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I don't know what your class ServletInitializer is, but if it is a component you need to move it to the subpackage of your main class location in order for it to be scanned, as you can see from my example it is not required.</p>\n<p>If needed here is a picture of the project structure</p>\n<p><a href=\"https://i.stack.imgur.com/gI8tN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gI8tN.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the blog I used to create this demo project</p>\n<p><a href=\"https://www.baeldung.com/spring-boot-jsp\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-jsp</a></p>\n"}],"owner":{"account_id":17937681,"reputation":33,"user_id":13033694,"display_name":"Lakshay Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697225295,"creation_date":1692920140,"question_id":76973438,"body_markdown":"I was making a basic springboot project in which from controller I am calling jsp file to display but it is not showing and it is giving me error.\r\n\r\n    This application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n    Fri Aug 25 05:00:19 IST 2023\r\n    There was an unexpected error (type=Not Found, status=404).\r\n\r\nCan anyone please tell why 404 error is coming?\r\n\r\nHere is my project structure\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere are few files \r\n\r\nThis is my controller file\r\n\r\n```\r\n@Controller\r\npublic class MainController {\r\n\r\n    @GetMapping(&quot;/home&quot;)\r\n    public String home()\r\n    {\r\n        System.out.println(&quot;hello in home&quot;);\r\n        return &quot;home&quot;;\r\n    }\r\n\r\n    @RequestMapping(&quot;/contact&quot;)\r\n    @ResponseBody\r\n    public String contact()\r\n    {\r\n        return &quot;In contact&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\nThis is my application.properties file\r\n\r\n\r\n```\r\nserver.port=8585\r\nspring.mvc.view.prefix=/views/\r\nspring.mvc.view.suffix=.jsp\r\n```\r\n\r\nAnd in last this is my pom.xml file\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.1.3&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.springboot.learn&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;project&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;name&gt;project&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;10.1.10&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n    \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Mjopr.png","title":"Why did JSP file is not loading in springboot?","body":"<p>I was making a basic springboot project in which from controller I am calling jsp file to display but it is not showing and it is giving me error.</p>\n<pre><code>This application has no explicit mapping for /error, so you are seeing this as a fallback.\nFri Aug 25 05:00:19 IST 2023\nThere was an unexpected error (type=Not Found, status=404).\n</code></pre>\n<p>Can anyone please tell why 404 error is coming?</p>\n<p>Here is my project structure</p>\n<p><a href=\"https://i.stack.imgur.com/Mjopr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mjopr.png\" alt=\"enter image description here\" /></a></p>\n<p>Here are few files</p>\n<p>This is my controller file</p>\n<pre><code>@Controller\npublic class MainController {\n\n    @GetMapping(&quot;/home&quot;)\n    public String home()\n    {\n        System.out.println(&quot;hello in home&quot;);\n        return &quot;home&quot;;\n    }\n\n    @RequestMapping(&quot;/contact&quot;)\n    @ResponseBody\n    public String contact()\n    {\n        return &quot;In contact&quot;;\n    }\n\n}\n</code></pre>\n<p>This is my application.properties file</p>\n<pre><code>server.port=8585\nspring.mvc.view.prefix=/views/\nspring.mvc.view.suffix=.jsp\n</code></pre>\n<p>And in last this is my pom.xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.springboot.learn&lt;/groupId&gt;\n    &lt;artifactId&gt;project&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;project&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n            &lt;version&gt;10.1.10&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","maven","spring-mvc","spacy"],"comments":[{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1695884699,"post_id":77191005,"comment_id":136083995,"body_markdown":"How did you confirm that there is such dependency in Maven repository?","body":"How did you confirm that there is such dependency in Maven repository?"},{"owner":{"account_id":29293832,"reputation":1,"user_id":22443596,"display_name":"Ixyz"},"score":0,"creation_date":1696647285,"post_id":77191005,"comment_id":136183942,"body_markdown":"I have browsed but haven&#39;t found the Maven dependency related to that so alternatively I used the\n\n&lt;dependency&gt;\n            &lt;groupId&gt;org.apache.opennlp&lt;/groupId&gt;\n            &lt;artifactId&gt;opennlp-tools&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt; &lt;!-- Check for the latest version --&gt;\n        &lt;/dependency&gt;","body":"I have browsed but haven&#39;t found the Maven dependency related to that so alternatively I used the  &lt;dependency&gt;             &lt;groupId&gt;org.apache.opennlp&lt;/groupId&gt;             &lt;artifactId&gt;opennlp-tools&lt;/artifactId&gt;             &lt;version&gt;2.3.0&lt;/version&gt; &lt;!-- Check for the latest version --&gt;         &lt;/dependency&gt;"},{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1696719427,"post_id":77191005,"comment_id":136189798,"body_markdown":"Okay, because you stated that spacy exists in the maven and I&#39;ve also have not found it, so that is the reason why I posted a comment","body":"Okay, because you stated that spacy exists in the maven and I&#39;ve also have not found it, so that is the reason why I posted a comment"}],"owner":{"account_id":29293832,"reputation":1,"user_id":22443596,"display_name":"Ixyz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697225222,"creation_date":1695850137,"question_id":77191005,"body_markdown":"I&#39;m encountering difficulties resolving the spaCy dependency in my Maven project. I&#39;ve followed several steps to include it in my project&#39;s pom.xml, but I&#39;m still facing issues. Here&#39;s a summary of the problem and the steps I&#39;ve taken:\r\n\r\nProblem:\r\nWhen I try to include the spaCy dependency in my Maven project, I receive the following error message during the build process:\r\n\r\n\r\n`\r\nCould not find artifact com.explosion:spacy:pom:3.1.3 in central (https://repo.maven.apache.org/maven2)\r\n`\r\n\r\nActions Taken:\r\n\r\nAdded spaCy Dependency: In my pom.xml file, I included the spaCy dependency as follows:\r\n\r\n\r\n    `&lt;dependency&gt;\r\n        &lt;groupId&gt;com.explosion&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spacy&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.3&lt;/version&gt;\r\n     &lt;/dependency&gt;`\r\n\r\n\r\nChecked Central Repository: I confirmed that spaCy version 3.1.3 exists in the central Maven repository.\r\n\r\nTried Other Repositories: I attempted to resolve the issue by adding alternative repositories to my pom.xml as follows:\r\n\r\n\r\n    `&lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;explosion&lt;/id&gt;\r\n            &lt;url&gt;https://maven.anaconda.org/conda-forge/simple&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;`\r\n\r\nCleaned and Rebuilt: I ran mvn clean install to clean the project and rebuild it, but the issue persists.\r\n\r\nChecked Network Connection: I ensured that my network connection is stable and that I can access the repositories.\r\n\r\nDespite these efforts, I&#39;m still unable to resolve the spaCy dependency issue. What steps can I take to successfully include spaCy in my Maven project?","title":"Trouble Resolving spaCy Dependency in Maven Project","body":"<p>I'm encountering difficulties resolving the spaCy dependency in my Maven project. I've followed several steps to include it in my project's pom.xml, but I'm still facing issues. Here's a summary of the problem and the steps I've taken:</p>\n<p>Problem:\nWhen I try to include the spaCy dependency in my Maven project, I receive the following error message during the build process:</p>\n<p><code>Could not find artifact com.explosion:spacy:pom:3.1.3 in central (https://repo.maven.apache.org/maven2)</code></p>\n<p>Actions Taken:</p>\n<p>Added spaCy Dependency: In my pom.xml file, I included the spaCy dependency as follows:</p>\n<pre><code>`&lt;dependency&gt;\n    &lt;groupId&gt;com.explosion&lt;/groupId&gt;\n    &lt;artifactId&gt;spacy&lt;/artifactId&gt;\n    &lt;version&gt;3.1.3&lt;/version&gt;\n &lt;/dependency&gt;`\n</code></pre>\n<p>Checked Central Repository: I confirmed that spaCy version 3.1.3 exists in the central Maven repository.</p>\n<p>Tried Other Repositories: I attempted to resolve the issue by adding alternative repositories to my pom.xml as follows:</p>\n<pre><code>`&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;explosion&lt;/id&gt;\n        &lt;url&gt;https://maven.anaconda.org/conda-forge/simple&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;`\n</code></pre>\n<p>Cleaned and Rebuilt: I ran mvn clean install to clean the project and rebuild it, but the issue persists.</p>\n<p>Checked Network Connection: I ensured that my network connection is stable and that I can access the repositories.</p>\n<p>Despite these efforts, I'm still unable to resolve the spaCy dependency issue. What steps can I take to successfully include spaCy in my Maven project?</p>\n"},{"tags":["java","foreach","syntactic-sugar"],"comments":[{"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":4,"creation_date":1537764054,"post_id":85190,"comment_id":91887268,"body_markdown":"As per JLS it has two forms: https://stackoverflow.com/a/33232565/1216775","body":"As per JLS it has two forms: <a href=\"https://stackoverflow.com/a/33232565/1216775\">stackoverflow.com/a/33232565/1216775</a>"},{"owner":{"account_id":454024,"reputation":89,"user_id":851340,"accept_rate":12,"display_name":"Rahul Gupta"},"score":0,"creation_date":1595313351,"post_id":85190,"comment_id":111422966,"body_markdown":"There are different types of Java for loop as mentioned below. The working of for loop is the same for all the types and varies only in the syntax.\n* Simple for loop (https://www.tutorialcup.com/java/java-for-loop.htm#Simple_Java_For_Loop_example)\n* Enhanced for loop – for each loop (https://www.tutorialcup.com/java/java-for-loop.htm#Enhanced_Java_For_loop)\n* Nested for loop (https://www.tutorialcup.com/java/java-for-loop.htm#Nested_For_Loop)\n* Labeled for loop (https://www.tutorialcup.com/java/java-for-loop.htm#Labeled_For_loop)\n\nhttps://www.tutorialcup.com/java/java-for-loop.htm","body":"There are different types of Java for loop as mentioned below. The working of for loop is the same for all the types and varies only in the syntax. * Simple for loop (<a href=\"https://www.tutorialcup.com/java/java-for-loop.htm#Simple_Java_For_Loop_example\" rel=\"nofollow noreferrer\">tutorialcup.com/java/&hellip;</a>) * Enhanced for loop – for each loop (<a href=\"https://www.tutorialcup.com/java/java-for-loop.htm#Enhanced_Java_For_loop\" rel=\"nofollow noreferrer\">tutorialcup.com/java/java-for-loop.htm#Enhanced_Java_For_lo&zwnj;&#8203;op</a>) * Nested for loop (<a href=\"https://www.tutorialcup.com/java/java-for-loop.htm#Nested_For_Loop\" rel=\"nofollow noreferrer\">tutorialcup.com/java/java-for-loop.htm#Nested_For_Loop</a>) * Labeled for loop (<a href=\"https://www.tutorialcup.com/java/java-for-loop.htm#Labeled_For_loop\" rel=\"nofollow noreferrer\">tutorialcup.com/java/java-for-loop.htm#Labeled_For_loop</a>)  <a href=\"https://www.tutorialcup.com/java/java-for-loop.htm\" rel=\"nofollow noreferrer\">tutorialcup.com/java/java-for-loop.htm</a>"},{"owner":{"account_id":454024,"reputation":89,"user_id":851340,"accept_rate":12,"display_name":"Rahul Gupta"},"score":0,"creation_date":1595333785,"post_id":85190,"comment_id":111432794,"body_markdown":"We can use enhanced for loop to iterate elements for the below collection:\n\nArray\nArrayList\nMap\nSet\nLinkedList and so on. https://www.tutorialcup.com/java/java-for-each-loop.htm","body":"We can use enhanced for loop to iterate elements for the below collection:  Array ArrayList Map Set LinkedList and so on. <a href=\"https://www.tutorialcup.com/java/java-for-each-loop.htm\" rel=\"nofollow noreferrer\">tutorialcup.com/java/java-for-each-loop.htm</a>"}],"answers":[{"tags":[],"owner":{"account_id":7836,"reputation":16939,"user_id":13757,"accept_rate":74,"display_name":"nsayer"},"comment_count":0,"down_vote_count":5,"up_vote_count":1309,"is_accepted":true,"score":1304,"last_activity_date":1520093769,"creation_date":1221669988,"answer_id":85206,"question_id":85190,"body_markdown":"    for (Iterator&lt;String&gt; i = someIterable.iterator(); i.hasNext();) {\r\n        String item = i.next();\r\n        System.out.println(item);\r\n    }\r\n\r\nNote that if you need to use `i.remove();` in your loop, or access the actual iterator in some way, you cannot use the `for ( : )` idiom, since the actual iterator is merely inferred.\r\n\r\nAs was noted by Denis Bueno, this code works for any object that implements the [`Iterable` interface][1].\r\n\r\nAlso, if the right-hand side of the `for (:)` idiom is an `array` rather than an `Iterable` object, the internal code uses an int index counter and checks against `array.length` instead. See the [Java Language Specification][2].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html\r\n  [2]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.14.2","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<pre><code>for (Iterator&lt;String&gt; i = someIterable.iterator(); i.hasNext();) {\n    String item = i.next();\n    System.out.println(item);\n}\n</code></pre>\n\n<p>Note that if you need to use <code>i.remove();</code> in your loop, or access the actual iterator in some way, you cannot use the <code>for ( : )</code> idiom, since the actual iterator is merely inferred.</p>\n\n<p>As was noted by Denis Bueno, this code works for any object that implements the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html\" rel=\"noreferrer\"><code>Iterable</code> interface</a>.</p>\n\n<p>Also, if the right-hand side of the <code>for (:)</code> idiom is an <code>array</code> rather than an <code>Iterable</code> object, the internal code uses an int index counter and checks against <code>array.length</code> instead. See the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.14.2\" rel=\"noreferrer\">Java Language Specification</a>.</p>\n"},{"comments":[{"owner":{"account_id":5721858,"reputation":171,"user_id":4520074,"display_name":"Danny"},"score":1,"creation_date":1642070501,"post_id":85209,"comment_id":124976472,"body_markdown":"This is what people actually used before for-each, not the C-style for statement.","body":"This is what people actually used before for-each, not the C-style for statement."}],"tags":[],"owner":{"account_id":7223,"reputation":4097,"user_id":12457,"accept_rate":90,"display_name":"toluju"},"comment_count":1,"down_vote_count":1,"up_vote_count":49,"is_accepted":false,"score":48,"last_activity_date":1521205456,"creation_date":1221670013,"answer_id":85209,"question_id":85190,"body_markdown":"The for-each loop in Java uses the underlying iterator mechanism. So it&#39;s identical to the following:\r\n\r\n    Iterator&lt;String&gt; iterator = someList.iterator();\r\n\r\n    while (iterator.hasNext()) {\r\n      String item = iterator.next();\r\n      System.out.println(item);\r\n    }\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>The for-each loop in Java uses the underlying iterator mechanism. So it's identical to the following:</p>\n\n<pre><code>Iterator&lt;String&gt; iterator = someList.iterator();\n\nwhile (iterator.hasNext()) {\n  String item = iterator.next();\n  System.out.println(item);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4907,"reputation":2907,"user_id":7610,"display_name":"Hank"},"comment_count":0,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1221670090,"creation_date":1221670090,"answer_id":85220,"question_id":85190,"body_markdown":"Here&#39;s an equivalent expression.\r\n\r\n    for(Iterator&lt;String&gt; sit = someList.iterator(); sit.hasNext(); ) {\r\n        System.out.println(sit.next());\r\n    }\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>Here's an equivalent expression.</p>\n\n<pre><code>for(Iterator&lt;String&gt; sit = someList.iterator(); sit.hasNext(); ) {\n    System.out.println(sit.next());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7719,"reputation":1517,"user_id":13472,"display_name":"Pete"},"comment_count":0,"down_vote_count":3,"up_vote_count":12,"is_accepted":false,"score":9,"last_activity_date":1521205504,"creation_date":1221670095,"answer_id":85221,"question_id":85190,"body_markdown":"It would look something like this. Very crufty. \r\n\r\n    for (Iterator&lt;String&gt; i = someList.iterator(); i.hasNext(); )\r\n            System.out.println(i.next());\r\n\r\nThere is a good writeup on *for each* in the [Sun documentation][1].\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/guide/language/foreach.html\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>It would look something like this. Very crufty. </p>\n\n<pre><code>for (Iterator&lt;String&gt; i = someList.iterator(); i.hasNext(); )\n        System.out.println(i.next());\n</code></pre>\n\n<p>There is a good writeup on <em>for each</em> in the <a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/language/foreach.html\" rel=\"nofollow noreferrer\">Sun documentation</a>.</p>\n"},{"tags":[],"owner":{},"comment_count":0,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1324288700,"creation_date":1221670143,"answer_id":85232,"question_id":85190,"body_markdown":"    for (Iterator&lt;String&gt; itr = someList.iterator(); itr.hasNext(); ) {\r\n       String item = itr.next();\r\n       System.out.println(item);\r\n    }","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<pre><code>for (Iterator&lt;String&gt; itr = someList.iterator(); itr.hasNext(); ) {\n   String item = itr.next();\n   System.out.println(item);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7836,"reputation":16939,"user_id":13757,"accept_rate":74,"display_name":"nsayer"},"score":2,"creation_date":1221674094,"post_id":85242,"comment_id":11428,"body_markdown":"fd is right - the internal code when the right-hand side of the for(:) idiom uses an int and array.length instead of fetching an Iterator. http://forums.sun.com/thread.jspa?messageID=2743233","body":"fd is right - the internal code when the right-hand side of the for(:) idiom uses an int and array.length instead of fetching an Iterator. <a href=\"http://forums.sun.com/thread.jspa?messageID=2743233\" rel=\"nofollow noreferrer\">forums.sun.com/thread.jspa?messageID=2743233</a>"}],"tags":[],"owner":{"account_id":7996,"reputation":55846,"user_id":14113,"accept_rate":64,"display_name":"EfForEffort"},"comment_count":1,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1649886915,"creation_date":1221670202,"answer_id":85242,"question_id":85190,"body_markdown":"It&#39;s implied by [nsayer&#39;s answer][1], but it&#39;s worth noting that the OP&#39;s for(..) syntax will work when &quot;someList&quot; is _anything_ that implements java.lang.Iterable -- it doesn&#39;t have to be a list, or some collection from java.util. Even your own types, therefore, can be used with this syntax.\r\n\r\n  [1]: https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work/85206#85206\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>It's implied by <a href=\"https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work/85206#85206\">nsayer's answer</a>, but it's worth noting that the OP's for(..) syntax will work when &quot;someList&quot; is <em>anything</em> that implements java.lang.Iterable -- it doesn't have to be a list, or some collection from java.util. Even your own types, therefore, can be used with this syntax.</p>\n"},{"comments":[{"owner":{"account_id":213792,"reputation":4694,"user_id":467379,"accept_rate":75,"display_name":"ncmathsadist"},"score":1,"creation_date":1523386674,"post_id":85279,"comment_id":86537469,"body_markdown":"In those cases, the use of `removeIf` might be the right tool","body":"In those cases, the use of <code>removeIf</code> might be the right tool"}],"tags":[],"owner":{"account_id":7862,"reputation":14582,"user_id":13824,"accept_rate":83,"display_name":"billjamesdev"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1221670432,"creation_date":1221670432,"answer_id":85279,"question_id":85190,"body_markdown":"Also note that using the &quot;foreach&quot; method in the original question does have some limitations, such as not being able to remove items from the list during the iteration.\r\n\r\nThe new for-loop is easier to read and removes the need for a separate iterator, but is only really usable in read-only iteration passes.","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>Also note that using the \"foreach\" method in the original question does have some limitations, such as not being able to remove items from the list during the iteration.</p>\n\n<p>The new for-loop is easier to read and removes the need for a separate iterator, but is only really usable in read-only iteration passes.</p>\n"},{"comments":[{"owner":{"account_id":2929166,"reputation":365,"user_id":6338007,"display_name":"Kosaro"},"score":2,"creation_date":1599157309,"post_id":85424,"comment_id":112694796,"body_markdown":"I wouldn&#39;t say the 2nd example is &quot;essentially equivalent to the first&quot;, since if its a list of primitive values, any modification you make to the values will not modify the original list in example 1, but will modify the original list in example 2.","body":"I wouldn&#39;t say the 2nd example is &quot;essentially equivalent to the first&quot;, since if its a list of primitive values, any modification you make to the values will not modify the original list in example 1, but will modify the original list in example 2."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1661761493,"post_id":85424,"comment_id":129839899,"body_markdown":"@Kosaro what kind of modifications are you talking about? In neither example does modifying the loop variable, i.e. `fruit`, affect the array.","body":"@Kosaro what kind of modifications are you talking about? In neither example does modifying the loop variable, i.e. <code>fruit</code>, affect the array."}],"tags":[],"owner":{"account_id":3708,"reputation":16857,"user_id":5382,"display_name":"Mikezx6r"},"comment_count":2,"down_vote_count":1,"up_vote_count":558,"is_accepted":false,"score":557,"last_activity_date":1521205619,"creation_date":1221671199,"answer_id":85424,"question_id":85190,"body_markdown":"The construct *for each* is also valid for arrays. e.g.\r\n\r\n    String[] fruits = new String[] { &quot;Orange&quot;, &quot;Apple&quot;, &quot;Pear&quot;, &quot;Strawberry&quot; };\r\n\r\n    for (String fruit : fruits) {\r\n        // fruit is an element of the `fruits` array.\r\n    }\r\n\r\nwhich is essentially equivalent of\r\n\r\n    for (int i = 0; i &lt; fruits.length; i++) {\r\n        String fruit = fruits[i];\r\n        // fruit is an element of the `fruits` array.\r\n    }\r\n\r\nSo, overall summary: &lt;br/&gt;\r\n[\\[nsayer\\]][1] The following is the longer form of what is happening:\r\n\r\n&gt;     for(Iterator&lt;String&gt; i = someList.iterator(); i.hasNext(); ) {\r\n&gt;       String item = i.next();\r\n&gt;       System.out.println(item);\r\n&gt;     }\r\n&gt;\r\n&gt; Note that if you need to use\r\n&gt; i.remove(); in your loop, or access\r\n&gt; the actual iterator in some way, you\r\n&gt; cannot use the for( : ) idiom, since\r\n&gt; the actual Iterator is merely\r\n&gt; inferred.\r\n\r\n[\\[Denis Bueno\\]][2]\r\n\r\n&gt; It&#39;s implied by nsayer&#39;s answer, but\r\n&gt; it&#39;s worth noting that the OP&#39;s for(..)\r\n&gt; syntax will work when &quot;someList&quot; is\r\n&gt; anything that implements\r\n&gt; java.lang.Iterable -- it doesn&#39;t have\r\n&gt; to be a list, or some collection from\r\n&gt; java.util. Even your own types,\r\n&gt; therefore, can be used with this\r\n&gt; syntax.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work/85206#85206\r\n  [2]: https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work/85242#85242\r\n\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>The construct <em>for each</em> is also valid for arrays. e.g.</p>\n\n<pre><code>String[] fruits = new String[] { \"Orange\", \"Apple\", \"Pear\", \"Strawberry\" };\n\nfor (String fruit : fruits) {\n    // fruit is an element of the `fruits` array.\n}\n</code></pre>\n\n<p>which is essentially equivalent of</p>\n\n<pre><code>for (int i = 0; i &lt; fruits.length; i++) {\n    String fruit = fruits[i];\n    // fruit is an element of the `fruits` array.\n}\n</code></pre>\n\n<p>So, overall summary: <br/>\n<a href=\"https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work/85206#85206\">[nsayer]</a> The following is the longer form of what is happening:</p>\n\n<blockquote>\n<pre><code>for(Iterator&lt;String&gt; i = someList.iterator(); i.hasNext(); ) {\n  String item = i.next();\n  System.out.println(item);\n}\n</code></pre>\n  \n  <p>Note that if you need to use\n  i.remove(); in your loop, or access\n  the actual iterator in some way, you\n  cannot use the for( : ) idiom, since\n  the actual Iterator is merely\n  inferred.</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work/85242#85242\">[Denis Bueno]</a></p>\n\n<blockquote>\n  <p>It's implied by nsayer's answer, but\n  it's worth noting that the OP's for(..)\n  syntax will work when \"someList\" is\n  anything that implements\n  java.lang.Iterable -- it doesn't have\n  to be a list, or some collection from\n  java.util. Even your own types,\n  therefore, can be used with this\n  syntax.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6003,"reputation":7728,"user_id":9931,"accept_rate":94,"display_name":"Ryan Delucchi"},"comment_count":0,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1221674658,"creation_date":1221674658,"answer_id":85933,"question_id":85190,"body_markdown":"The Java &quot;for-each&quot; loop construct will allow iteration over two types of objects:\r\n\r\n  - `T[]` *(arrays of any type)*\r\n  - `java.lang.Iterable&lt;T&gt;`\r\n\r\nThe `Iterable&lt;T&gt;` interface has only one method: `Iterator&lt;T&gt; iterator()`.  This works on objects of type `Collection&lt;T&gt;` because the `Collection&lt;T&gt;` interface extends `Iterable&lt;T&gt;`.","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>The Java \"for-each\" loop construct will allow iteration over two types of objects:</p>\n\n<ul>\n<li><code>T[]</code> <em>(arrays of any type)</em></li>\n<li><code>java.lang.Iterable&lt;T&gt;</code></li>\n</ul>\n\n<p>The <code>Iterable&lt;T&gt;</code> interface has only one method: <code>Iterator&lt;T&gt; iterator()</code>.  This works on objects of type <code>Collection&lt;T&gt;</code> because the <code>Collection&lt;T&gt;</code> interface extends <code>Iterable&lt;T&gt;</code>.</p>\n"},{"tags":[],"owner":{"account_id":306077,"reputation":56013,"user_id":616616,"accept_rate":53,"display_name":"MRocklin"},"comment_count":0,"down_vote_count":2,"up_vote_count":139,"is_accepted":false,"score":137,"last_activity_date":1521205965,"creation_date":1320078957,"answer_id":7956673,"question_id":85190,"body_markdown":"Here is an answer which does not assume knowledge of Java Iterators. It is less precise, but it is useful for education.\r\n\r\nWhile programming we often write code that looks like the following:\r\n\r\n    char[] grades = ....\r\n    for(int i = 0; i &lt; grades.length; i++) {   // for i goes from 0 to grades.length\r\n        System.out.print(grades[i]);           // Print grades[i]\r\n    }\r\n\r\nThe foreach syntax allows this common pattern to be written in a more natural and less syntactically noisy way.\r\n\r\n    for(char grade : grades) {   // foreach grade in grades\r\n        System.out.print(grade); // print that grade\r\n    }\r\n\r\nAdditionally this syntax is valid for objects such as Lists or Sets which do not support array indexing, but which do implement the Java Iterable interface.\r\n\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>Here is an answer which does not assume knowledge of Java Iterators. It is less precise, but it is useful for education.</p>\n\n<p>While programming we often write code that looks like the following:</p>\n\n<pre><code>char[] grades = ....\nfor(int i = 0; i &lt; grades.length; i++) {   // for i goes from 0 to grades.length\n    System.out.print(grades[i]);           // Print grades[i]\n}\n</code></pre>\n\n<p>The foreach syntax allows this common pattern to be written in a more natural and less syntactically noisy way.</p>\n\n<pre><code>for(char grade : grades) {   // foreach grade in grades\n    System.out.print(grade); // print that grade\n}\n</code></pre>\n\n<p>Additionally this syntax is valid for objects such as Lists or Sets which do not support array indexing, but which do implement the Java Iterable interface.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1649887649,"post_id":12722557,"comment_id":126992575,"body_markdown":"How does this answer the question? *&quot;What would the equivalent for loop look like without using the for each syntax?&quot;*","body":"How does this answer the question? <i>&quot;What would the equivalent for loop look like without using the for each syntax?&quot;</i>"}],"tags":[],"owner":{"account_id":1628801,"reputation":320,"user_id":1503768,"display_name":"oneConsciousness"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1521206077,"creation_date":1349336863,"answer_id":12722557,"question_id":85190,"body_markdown":"The concept of a foreach loop as mentioned in Wikipedia is highlighted below:\r\n\r\n&gt; Unlike other for loop constructs, however, foreach loops usually\r\n&gt; maintain **no explicit counter**: they essentially say &quot;do this to\r\n&gt; everything in this set&quot;, rather than &quot;do this x times&quot;. This avoids\r\n&gt; potential **off-by-one errors** and makes code simpler to read.\r\n\r\nSo the concept of a foreach loop describes that the loop does not use any explicit counter which means that there is no need of using indexes to traverse in the list thus it saves user from off-by-one error. To describe the general concept of this off-by-one error, let us take an example of a loop to traverse in a list using indexes.\r\n    \r\n    // In this loop it is assumed that the list starts with index 0\r\n    for(int i=0; i&lt;list.length; i++){\r\n        \r\n    }\r\n\r\nBut suppose if the list starts with index 1 then this loop is going to throw an exception as it will found no element at index 0 and this error is called an off-by-one error. So to avoid this off-by-one error the concept of a foreach loop is used. There may be other advantages too, but this is what I think is the main concept and advantage of using a foreach loop.\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>The concept of a foreach loop as mentioned in Wikipedia is highlighted below:</p>\n\n<blockquote>\n  <p>Unlike other for loop constructs, however, foreach loops usually\n  maintain <strong>no explicit counter</strong>: they essentially say \"do this to\n  everything in this set\", rather than \"do this x times\". This avoids\n  potential <strong>off-by-one errors</strong> and makes code simpler to read.</p>\n</blockquote>\n\n<p>So the concept of a foreach loop describes that the loop does not use any explicit counter which means that there is no need of using indexes to traverse in the list thus it saves user from off-by-one error. To describe the general concept of this off-by-one error, let us take an example of a loop to traverse in a list using indexes.</p>\n\n<pre><code>// In this loop it is assumed that the list starts with index 0\nfor(int i=0; i&lt;list.length; i++){\n\n}\n</code></pre>\n\n<p>But suppose if the list starts with index 1 then this loop is going to throw an exception as it will found no element at index 0 and this error is called an off-by-one error. So to avoid this off-by-one error the concept of a foreach loop is used. There may be other advantages too, but this is what I think is the main concept and advantage of using a foreach loop.</p>\n"},{"tags":[],"owner":{"account_id":3016749,"reputation":363,"user_id":2923930,"display_name":"PrivateName"},"comment_count":0,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1649887718,"creation_date":1383802525,"answer_id":19828685,"question_id":85190,"body_markdown":"A foreach loop syntax is:\r\n\r\n    for (type obj:array) {...}\r\n\r\nExample:\r\n\r\n    String[] s = {&quot;Java&quot;, &quot;Coffe&quot;, &quot;Is&quot;, &quot;Cool&quot;};\r\n    for (String str:s /*s is the array*/) {\r\n        System.out.println(str);\r\n    }\r\n\r\nOutput:\r\n\r\n```lang-none\r\nJava\r\nCoffe\r\nIs\r\nCool\r\n```\r\n\r\nWARNING: You can access array elements with the foreach loop, but you can NOT initialize them. Use the original `for` loop for that.\r\n\r\nWARNING: You must match the type of the array with the other object.\r\n\r\n    for (double b:s) // Invalid-double is not String\r\n\r\nIf you want to edit elements, use the original `for` loop like this:\r\n\r\n    for (int i = 0; i &lt; s.length-1 /*-1 because of the 0 index */; i++) {\r\n        if (i==1) //1 because once again I say the 0 index\r\n            s[i]=&quot;2 is cool&quot;;\r\n        else\r\n            s[i] = &quot;hello&quot;;\r\n    }\r\n\r\nNow if we dump s to the console, we get:\r\n\r\n```lang-none\r\nhello\r\n2 is cool\r\nhello\r\nhello\r\n```\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>A foreach loop syntax is:</p>\n<pre><code>for (type obj:array) {...}\n</code></pre>\n<p>Example:</p>\n<pre><code>String[] s = {&quot;Java&quot;, &quot;Coffe&quot;, &quot;Is&quot;, &quot;Cool&quot;};\nfor (String str:s /*s is the array*/) {\n    System.out.println(str);\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Java\nCoffe\nIs\nCool\n</code></pre>\n<p>WARNING: You can access array elements with the foreach loop, but you can NOT initialize them. Use the original <code>for</code> loop for that.</p>\n<p>WARNING: You must match the type of the array with the other object.</p>\n<pre><code>for (double b:s) // Invalid-double is not String\n</code></pre>\n<p>If you want to edit elements, use the original <code>for</code> loop like this:</p>\n<pre><code>for (int i = 0; i &lt; s.length-1 /*-1 because of the 0 index */; i++) {\n    if (i==1) //1 because once again I say the 0 index\n        s[i]=&quot;2 is cool&quot;;\n    else\n        s[i] = &quot;hello&quot;;\n}\n</code></pre>\n<p>Now if we dump s to the console, we get:</p>\n<pre class=\"lang-none prettyprint-override\"><code>hello\n2 is cool\nhello\nhello\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3244487,"reputation":19947,"user_id":2736496,"accept_rate":74,"display_name":"aliteralmind"},"score":7,"creation_date":1397931792,"post_id":22114571,"comment_id":35440627,"body_markdown":"This answer is now a [blog post](http://aliteralmind.wordpress.com/2014/03/22/for_foreach/) and was created from two related answers that I&#39;ve written: [here](http://stackoverflow.com/questions/22540025/should-i-use-an-iterator-or-a-forloop-to-iterate/22540191#22540191) and [here](http://stackoverflow.com/questions/22110482/uses-and-syntax-for-for-each-loop-in-java/22110517#22110517). It also includes a generically useful class for comparing the speed of two functions (at the bottom).","body":"This answer is now a <a href=\"http://aliteralmind.wordpress.com/2014/03/22/for_foreach/\" rel=\"nofollow noreferrer\">blog post</a> and was created from two related answers that I&#39;ve written: <a href=\"http://stackoverflow.com/questions/22540025/should-i-use-an-iterator-or-a-forloop-to-iterate/22540191#22540191\">here</a> and <a href=\"http://stackoverflow.com/questions/22110482/uses-and-syntax-for-for-each-loop-in-java/22110517#22110517\">here</a>. It also includes a generically useful class for comparing the speed of two functions (at the bottom)."},{"owner":{"account_id":481449,"reputation":1180,"user_id":895295,"accept_rate":50,"display_name":"Leo"},"score":2,"creation_date":1411730704,"post_id":22114571,"comment_id":40824195,"body_markdown":"Just one minor comment here, you shouldn&#39;t categorically state that for(:) syntax is always better for accessing collections; if you are using an array list, the for (:) loop will be about 2 x slower than using for (int i = 0, len = arrayList.size(); i &lt; len; i++).  I think you mentioned that in the [link]( http://stackoverflow.com/questions/2113216/which-is-more-efficient-a-for-each-loop-or-an-iterator) link anyway, but is important to highlight that...","body":"Just one minor comment here, you shouldn&#39;t categorically state that for(:) syntax is always better for accessing collections; if you are using an array list, the for (:) loop will be about 2 x slower than using for (int i = 0, len = arrayList.size(); i &lt; len; i++).  I think you mentioned that in the [link]( <a href=\"http://stackoverflow.com/questions/2113216/which-is-more-efficient-a-for-each-loop-or-an-iterator\" title=\"which is more efficient a for each loop or an iterator\">stackoverflow.com/questions/2113216/&hellip;</a>) link anyway, but is important to highlight that..."},{"owner":{"account_id":3244487,"reputation":19947,"user_id":2736496,"accept_rate":74,"display_name":"aliteralmind"},"score":0,"creation_date":1411736860,"post_id":22114571,"comment_id":40827806,"body_markdown":"@Leo It&#39;s a good point. An ArrayList is Collection, but it&#39;s backed by an array, which is why the normal for is better for it.","body":"@Leo It&#39;s a good point. An ArrayList is Collection, but it&#39;s backed by an array, which is why the normal for is better for it."},{"owner":{"account_id":477853,"reputation":11601,"user_id":889583,"accept_rate":80,"display_name":"daiscog"},"score":1,"creation_date":1440060788,"post_id":22114571,"comment_id":52120328,"body_markdown":"I imagine the `for(int value : int_array) {/* loop content */}` is slowest in your test because it is syntactically equivalent to `for(int i = 0; i &lt; int_array.length; i++) {int value =  int_array[i]; /* loop content */}`, which isn&#39;t what your test compares.","body":"I imagine the <code>for(int value : int_array) {&#47;* loop content *&#47;}</code> is slowest in your test because it is syntactically equivalent to <code>for(int i = 0; i &lt; int_array.length; i++) {int value =  int_array[i]; &#47;* loop content *&#47;}</code>, which isn&#39;t what your test compares."},{"owner":{"account_id":477853,"reputation":11601,"user_id":889583,"accept_rate":80,"display_name":"daiscog"},"score":0,"creation_date":1440060991,"post_id":22114571,"comment_id":52120458,"body_markdown":"(by the way, I&#39;m not saying your test is invalid, but it might be worth noting the reasons behind the difference so that people can choose what is right for their particular scenario.  If they are doing a `int value = int_array[i];` at the start of their for loop, then they might as well use foreach.  Unless they need access to the index, too, for some reason.  In short, it all depends on context.)","body":"(by the way, I&#39;m not saying your test is invalid, but it might be worth noting the reasons behind the difference so that people can choose what is right for their particular scenario.  If they are doing a <code>int value = int_array[i];</code> at the start of their for loop, then they might as well use foreach.  Unless they need access to the index, too, for some reason.  In short, it all depends on context.)"},{"owner":{"account_id":593875,"reputation":20381,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":1,"creation_date":1571430959,"post_id":22114571,"comment_id":103252702,"body_markdown":"It&#39;s important to compare apples-to-apples, here. The question was about `for` versus `foreach`. You are comparing indexed-access versus iterated access. It&#39;s important to point out that `foreach` is just syntactic sugar wrapping &quot;iterator&quot; traversal of the collection. There is no discernible difference between `for` and `foreach` when you are always using an iterator, so it&#39;s not fair to imply that `foreach` is better for performance. Technically speaking, it generates the same code as a regular `for` loop *provided that you are still using an iterator in the for loop*.","body":"It&#39;s important to compare apples-to-apples, here. The question was about <code>for</code> versus <code>foreach</code>. You are comparing indexed-access versus iterated access. It&#39;s important to point out that <code>foreach</code> is just syntactic sugar wrapping &quot;iterator&quot; traversal of the collection. There is no discernible difference between <code>for</code> and <code>foreach</code> when you are always using an iterator, so it&#39;s not fair to imply that <code>foreach</code> is better for performance. Technically speaking, it generates the same code as a regular <code>for</code> loop <i>provided that you are still using an iterator in the for loop</i>."},{"owner":{"account_id":6558676,"reputation":5363,"user_id":5070577,"accept_rate":100,"display_name":"Walfrat"},"score":2,"creation_date":1591776874,"post_id":22114571,"comment_id":110181294,"body_markdown":"To me saying that foreach is more performant when going through Collection is terribly misleading. If it is a linked list in a for loop using the get(i), you&#39;re not traversing once, you&#39;re traversing 1+2+..n times. Using iterable is to make sure to go through the Collection in the most optimal way without having to have to write extra code (ex : current = current.getChild()). Of course for ArrayList, you will be a bit faster using a for instead fo foreach because you don&#39;t need to construct the intermediary Iterator. A logical explanation is way better than benchmarks in this case for me","body":"To me saying that foreach is more performant when going through Collection is terribly misleading. If it is a linked list in a for loop using the get(i), you&#39;re not traversing once, you&#39;re traversing 1+2+..n times. Using iterable is to make sure to go through the Collection in the most optimal way without having to have to write extra code (ex : current = current.getChild()). Of course for ArrayList, you will be a bit faster using a for instead fo foreach because you don&#39;t need to construct the intermediary Iterator. A logical explanation is way better than benchmarks in this case for me"},{"owner":{"account_id":1674243,"reputation":10078,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1600670838,"post_id":22114571,"comment_id":113149049,"body_markdown":"Just stumbled upon this accidentally.. and I think on one point, which I didn&#39;t pay much attention before: if for-each is defined to be the syntactic sugar when iterating over `Iterable`s, how, or why does it work in case of primitive `int[]`? because, primitive array doesn&#39;t really override `Iterator();`.","body":"Just stumbled upon this accidentally.. and I think on one point, which I didn&#39;t pay much attention before: if for-each is defined to be the syntactic sugar when iterating over <code>Iterable</code>s, how, or why does it work in case of primitive <code>int[]</code>? because, primitive array doesn&#39;t really override <code>Iterator();</code>."},{"owner":{"account_id":3244487,"reputation":19947,"user_id":2736496,"accept_rate":74,"display_name":"aliteralmind"},"score":0,"creation_date":1600679276,"post_id":22114571,"comment_id":113152482,"body_markdown":"@GiorgiTsiklauri If I remember correctly, ints are automatically and quietly wrapped into Integers.","body":"@GiorgiTsiklauri If I remember correctly, ints are automatically and quietly wrapped into Integers."},{"owner":{"account_id":4338492,"reputation":2723,"user_id":3542400,"accept_rate":100,"display_name":"davidgiga1993"},"score":1,"creation_date":1622623462,"post_id":22114571,"comment_id":119842301,"body_markdown":"@aliteralmind Actually your benchmark doesn&#39;t warmup the VM correctly and doesn&#39;t compensate for GC runs. The results can&#39;t be trusted. Make sure to read how to use JMH for executing these types of tests\nhttps://www.baeldung.com/java-microbenchmark-harness","body":"@aliteralmind Actually your benchmark doesn&#39;t warmup the VM correctly and doesn&#39;t compensate for GC runs. The results can&#39;t be trusted. Make sure to read how to use JMH for executing these types of tests <a href=\"https://www.baeldung.com/java-microbenchmark-harness\" rel=\"nofollow noreferrer\">baeldung.com/java-microbenchmark-harness</a>"},{"owner":{"account_id":3244487,"reputation":19947,"user_id":2736496,"accept_rate":74,"display_name":"aliteralmind"},"score":0,"creation_date":1622634725,"post_id":22114571,"comment_id":119847183,"body_markdown":"It was a good exercise, but I obviously didn’t know what the hell I was talking about.","body":"It was a good exercise, but I obviously didn’t know what the hell I was talking about."},{"owner":{"account_id":314772,"reputation":11799,"user_id":630136,"accept_rate":91,"display_name":"G_H"},"score":0,"creation_date":1634136766,"post_id":22114571,"comment_id":122946168,"body_markdown":"@GiorgiTsiklauri The compiler output of a for-each loop for an array is different than for an `Iterable`. It&#39;s actually two different cases of syntactic sugar designed to look consistent.","body":"@GiorgiTsiklauri The compiler output of a for-each loop for an array is different than for an <code>Iterable</code>. It&#39;s actually two different cases of syntactic sugar designed to look consistent."},{"owner":{"account_id":314772,"reputation":11799,"user_id":630136,"accept_rate":91,"display_name":"G_H"},"score":0,"creation_date":1634136985,"post_id":22114571,"comment_id":122946288,"body_markdown":"@aliteralmind Trying to compare performance of two small pieces of code is fraught with pitfalls. JVM warmup, memory loading and cache effects, compiler optimizations, the choice of collection to iterate over... In general, when the difference between two approaches must be measured in nanoseconds for one iteration and even with a million iterations the scale is still in seconds and not minutes, there&#39;s no point in worrying about the difference for 99.99% of your use cases. Go with what&#39;s most convenient. If it does matter, Java might be the wrong language for your purpose to begin with.","body":"@aliteralmind Trying to compare performance of two small pieces of code is fraught with pitfalls. JVM warmup, memory loading and cache effects, compiler optimizations, the choice of collection to iterate over... In general, when the difference between two approaches must be measured in nanoseconds for one iteration and even with a million iterations the scale is still in seconds and not minutes, there&#39;s no point in worrying about the difference for 99.99% of your use cases. Go with what&#39;s most convenient. If it does matter, Java might be the wrong language for your purpose to begin with."},{"owner":{"account_id":3244487,"reputation":19947,"user_id":2736496,"accept_rate":74,"display_name":"aliteralmind"},"score":0,"creation_date":1634137217,"post_id":22114571,"comment_id":122946390,"body_markdown":"@G_H Sure. I wrote this seven years ago. It was an interesting experience and experiment, even if the primary goal wasn’t meaningful. No one should be writing a code-timer unless you know what you’re doing. I didn’t.","body":"@G_H Sure. I wrote this seven years ago. It was an interesting experience and experiment, even if the primary goal wasn’t meaningful. No one should be writing a code-timer unless you know what you’re doing. I didn’t."}],"tags":[],"owner":{"account_id":3244487,"reputation":19947,"user_id":2736496,"accept_rate":74,"display_name":"aliteralmind"},"comment_count":14,"down_vote_count":0,"up_vote_count":196,"is_accepted":false,"score":196,"last_activity_date":1649887065,"creation_date":1393678040,"answer_id":22114571,"question_id":85190,"body_markdown":"The [for-each loop][1], added in [Java 5][2] (also called the &quot;enhanced for loop&quot;), is equivalent to using a [`java.util.Iterator`][3]--it&#39;s syntactic sugar for the same thing. Therefore, when reading each element, one by one and in order, a for-each should always be chosen over an iterator, as it is more convenient and concise.\r\n\r\n### For-each\r\n\r\n    for (int i : intList) {\r\n       System.out.println(&quot;An element in the list: &quot; + i);\r\n    }\r\n\r\n### Iterator\r\n\r\n    Iterator&lt;Integer&gt; intItr = intList.iterator();\r\n    while (intItr.hasNext()) {\r\n       System.out.println(&quot;An element in the list: &quot; + intItr.next());\r\n    }\r\n\r\nThere are situations where you must use an `Iterator` directly. For example, attempting to delete an element while using a for-each can (will?) result in a `ConcurrentModificationException`.\r\n\r\n## For-each vs. for-loop: Basic differences\r\n\r\nThe only practical difference between for-loop and for-each is that, in the case of indexable objects, you do not have access to the index. An example when the basic for-loop is required:\r\n\r\n    for (int i = 0; i &lt; array.length; i++) {\r\n       if(i &lt; 5) {\r\n          // Do something special\r\n       }  else {\r\n          // Do other stuff\r\n       }\r\n    }\r\n\r\nAlthough you could manually create a separate index int-variable with for-each,\r\n\r\n    int idx = -1;\r\n    for (int i : intArray) {\r\n       idx++;\r\n       ...\r\n    }\r\n\r\n...it is not recommended, since [variable-scope][4] is not ideal, and the basic `for` loop is simply the standard and expected format for this use case.\r\n\r\n## For-each vs. for-loop: Performance\r\n\r\nWhen accessing collections, a for-each is [significantly faster][5] than the basic `for` loop&#39;s array access. When accessing arrays, however--at least with primitive and wrapper-arrays--access via indexes is dramatically faster.\r\n\r\n### Timing the difference between iterator and index access for primitive int-arrays\r\n\r\nIndexes are 23-*40* percent faster than iterators when accessing `int` or `Integer` arrays. Here is the output from the testing class at the bottom of this post, which sums the numbers in a 100-element primitive-int array (A is iterator, B is index):\r\n\r\n```lang-none\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\r\nTest A: 358,597,622 nanoseconds\r\nTest B: 269,167,681 nanoseconds\r\nB faster by 89,429,941 nanoseconds (24.438799231635727% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\r\nTest A: 377,461,823 nanoseconds\r\nTest B: 278,694,271 nanoseconds\r\nB faster by 98,767,552 nanoseconds (25.666236154695838% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\r\nTest A: 288,953,495 nanoseconds\r\nTest B: 207,050,523 nanoseconds\r\nB faster by 81,902,972 nanoseconds (27.844689860906513% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\r\nTest A: 375,373,765 nanoseconds\r\nTest B: 283,813,875 nanoseconds\r\nB faster by 91,559,890 nanoseconds (23.891659337194227% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\r\nTest A: 375,790,818 nanoseconds\r\nTest B: 220,770,915 nanoseconds\r\nB faster by 155,019,903 nanoseconds (40.75164734599769% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\r\nTest A: 326,373,762 nanoseconds\r\nTest B: 202,555,566 nanoseconds\r\nB faster by 123,818,196 nanoseconds (37.437545972215744% faster)\r\n```\r\n\r\nI also ran this for an `Integer` array, and indexes are still the clear winner, but only between 18 and 25 percent faster.\r\n\r\n### For collections, iterators are faster than indexes\r\n\r\nFor a `List` of `Integers`, however, iterators are the clear winner. Just change the int-array in the test-class to:\r\n\r\n    List&lt;Integer&gt; intList = Arrays.asList(new Integer[] {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100});\r\n\r\nAnd make the necessary changes to the test-function (`int[]` to `List&lt;Integer&gt;`, `length` to `size()`, etc.):\r\n\r\n```lang-none\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntegerList 1000000\r\nTest A: 3,429,929,976 nanoseconds\r\nTest B: 5,262,782,488 nanoseconds\r\nA faster by 1,832,852,512 nanoseconds (34.326681820485675% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntegerList 1000000\r\nTest A: 2,907,391,427 nanoseconds\r\nTest B: 3,957,718,459 nanoseconds\r\nA faster by 1,050,327,032 nanoseconds (26.038700083921256% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntegerList 1000000\r\nTest A: 2,566,004,688 nanoseconds\r\nTest B: 4,221,746,521 nanoseconds\r\nA faster by 1,655,741,833 nanoseconds (38.71935684115413% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntegerList 1000000\r\nTest A: 2,770,945,276 nanoseconds\r\nTest B: 3,829,077,158 nanoseconds\r\nA faster by 1,058,131,882 nanoseconds (27.134122749113843% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntegerList 1000000\r\nTest A: 3,467,474,055 nanoseconds\r\nTest B: 5,183,149,104 nanoseconds\r\nA faster by 1,715,675,049 nanoseconds (32.60101667104192% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntList 1000000\r\nTest A: 3,439,983,933 nanoseconds\r\nTest B: 3,509,530,312 nanoseconds\r\nA faster by 69,546,379 nanoseconds (1.4816434912159906% faster)\r\n\r\n[C:\\java_code\\]java TimeIteratorVsIndexIntList 1000000\r\nTest A: 3,451,101,466 nanoseconds\r\nTest B: 5,057,979,210 nanoseconds\r\nA faster by 1,606,877,744 nanoseconds (31.269164666060377% faster)\r\n```\r\n\r\nIn one test they&#39;re almost equivalent, but with collections, iterator wins.\r\n\r\n*This post is based on two answers I wrote on Stack Overflow:\r\n\r\n * *[Uses and syntax for for-each loop in Java][6]*\r\n\r\n * *https://stackoverflow.com/questions/22540025/should-i-use-an-iterator-or-a-forloop-to-iterate/22540191#22540191*\r\n\r\nSome more information: *https://stackoverflow.com/questions/2113216/which-is-more-efficient-a-for-each-loop-or-an-iterator*\r\n\r\n### The full testing class\r\n\r\nI created this compare-the-time-it-takes-to-do-any-two-things class after reading [this question][7] on Stack Overflow:\r\n\r\n    import  java.text.NumberFormat;\r\n    import  java.util.Locale;\r\n\r\n    /**\r\n       &amp;lt;P&amp;gt;{@code java TimeIteratorVsIndexIntArray 1000000}&amp;lt;/P&amp;gt;\r\n\r\n       @see  &amp;lt;CODE&amp;gt;&amp;lt;A HREF=&amp;quot;https://stackoverflow.com/questions/180158/how-do-i-time-a-methods-execution-in-java&amp;quot;&amp;gt;https://stackoverflow.com/questions/180158/how-do-i-time-a-methods-execution-in-java&amp;lt;/A&amp;gt;&amp;lt;/CODE&amp;gt;\r\n     **/\r\n    public class TimeIteratorVsIndexIntArray {\r\n\r\n        public static final NumberFormat nf = NumberFormat.getNumberInstance(Locale.US);\r\n\r\n        public static final void main(String[] tryCount_inParamIdx0) {\r\n            int testCount;\r\n\r\n            // Get try-count from a command-line parameter\r\n            try {\r\n               testCount = Integer.parseInt(tryCount_inParamIdx0[0]);\r\n            }\r\n            catch(ArrayIndexOutOfBoundsException | NumberFormatException x) {\r\n               throw  new IllegalArgumentException(&quot;Missing or invalid command line parameter: The number of testCount for each test. &quot; + x);\r\n            }\r\n\r\n            //Test proper...START\r\n            int[] intArray = new int[] {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100};\r\n\r\n            long lStart = System.nanoTime();\r\n            for(int i = 0; i &lt; testCount; i++) {\r\n               testIterator(intArray);\r\n            }\r\n\r\n            long lADuration = outputGetNanoDuration(&quot;A&quot;, lStart);\r\n\r\n            lStart = System.nanoTime();\r\n            for(int i = 0; i &lt; testCount; i++) {\r\n               testFor(intArray);\r\n            }\r\n\r\n            long lBDuration = outputGetNanoDuration(&quot;B&quot;, lStart);\r\n\r\n            outputGetABTestNanoDifference(lADuration, lBDuration, &quot;A&quot;, &quot;B&quot;);\r\n        }\r\n\r\n        private static final void testIterator(int[] int_array) {\r\n           int total = 0;\r\n           for(int i = 0; i &lt; int_array.length; i++) {\r\n              total += int_array[i];\r\n           }\r\n        }\r\n\r\n        private static final void testFor(int[] int_array) {\r\n           int total = 0;\r\n           for(int i : int_array) {\r\n              total += i;\r\n           }\r\n        }\r\n        //Test proper...END\r\n\r\n        //Timer testing utilities...START\r\n        public static final long outputGetNanoDuration(String s_testName, long l_nanoStart) {\r\n            long lDuration = System.nanoTime() - l_nanoStart;\r\n            System.out.println(&quot;Test &quot; + s_testName + &quot;: &quot; + nf.format(lDuration) + &quot; nanoseconds&quot;);\r\n            return  lDuration;\r\n        }\r\n\r\n        public static final long outputGetABTestNanoDifference(long l_aDuration, long l_bDuration, String s_aTestName, String s_bTestName) {\r\n            long lDiff = -1;\r\n            double dPct = -1.0;\r\n            String sFaster = null;\r\n            if(l_aDuration &gt; l_bDuration) {\r\n                lDiff = l_aDuration - l_bDuration;\r\n                dPct = 100.00 - (l_bDuration * 100.0 / l_aDuration + 0.5);\r\n                sFaster = &quot;B&quot;;\r\n            }\r\n            else {\r\n                lDiff = l_bDuration - l_aDuration;\r\n                dPct = 100.00 - (l_aDuration * 100.0 / l_bDuration + 0.5);\r\n                sFaster = &quot;A&quot;;\r\n            }\r\n            System.out.println(sFaster + &quot; faster by &quot; + nf.format(lDiff) + &quot; nanoseconds (&quot; + dPct + &quot;% faster)&quot;);\r\n            return  lDiff;\r\n       }\r\n\r\n       //Timer testing utilities...END\r\n\r\n    }\r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html\r\n  [2]: http://docs.oracle.com/javase/1.5.0/docs/guide/language/index.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html\r\n  [4]: http://www.java-made-easy.com/variable-scope.html\r\n  [5]: https://stackoverflow.com/questions/1879255/traditional-for-loop-vs-iterator-in-java\r\n  [6]: https://stackoverflow.com/questions/22110482/uses-and-syntax-for-for-each-loop-in-java/22110517#22110517\r\n  [7]: https://stackoverflow.com/questions/180158/how-do-i-time-a-methods-execution-in-java\r\n\r\n\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>The <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html\" rel=\"noreferrer\">for-each loop</a>, added in <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/language/index.html\" rel=\"noreferrer\">Java 5</a> (also called the &quot;enhanced for loop&quot;), is equivalent to using a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html\" rel=\"noreferrer\"><code>java.util.Iterator</code></a>--it's syntactic sugar for the same thing. Therefore, when reading each element, one by one and in order, a for-each should always be chosen over an iterator, as it is more convenient and concise.</p>\n<h3>For-each</h3>\n<pre><code>for (int i : intList) {\n   System.out.println(&quot;An element in the list: &quot; + i);\n}\n</code></pre>\n<h3>Iterator</h3>\n<pre><code>Iterator&lt;Integer&gt; intItr = intList.iterator();\nwhile (intItr.hasNext()) {\n   System.out.println(&quot;An element in the list: &quot; + intItr.next());\n}\n</code></pre>\n<p>There are situations where you must use an <code>Iterator</code> directly. For example, attempting to delete an element while using a for-each can (will?) result in a <code>ConcurrentModificationException</code>.</p>\n<h2>For-each vs. for-loop: Basic differences</h2>\n<p>The only practical difference between for-loop and for-each is that, in the case of indexable objects, you do not have access to the index. An example when the basic for-loop is required:</p>\n<pre><code>for (int i = 0; i &lt; array.length; i++) {\n   if(i &lt; 5) {\n      // Do something special\n   }  else {\n      // Do other stuff\n   }\n}\n</code></pre>\n<p>Although you could manually create a separate index int-variable with for-each,</p>\n<pre><code>int idx = -1;\nfor (int i : intArray) {\n   idx++;\n   ...\n}\n</code></pre>\n<p>...it is not recommended, since <a href=\"http://www.java-made-easy.com/variable-scope.html\" rel=\"noreferrer\">variable-scope</a> is not ideal, and the basic <code>for</code> loop is simply the standard and expected format for this use case.</p>\n<h2>For-each vs. for-loop: Performance</h2>\n<p>When accessing collections, a for-each is <a href=\"https://stackoverflow.com/questions/1879255/traditional-for-loop-vs-iterator-in-java\">significantly faster</a> than the basic <code>for</code> loop's array access. When accessing arrays, however--at least with primitive and wrapper-arrays--access via indexes is dramatically faster.</p>\n<h3>Timing the difference between iterator and index access for primitive int-arrays</h3>\n<p>Indexes are 23-<em>40</em> percent faster than iterators when accessing <code>int</code> or <code>Integer</code> arrays. Here is the output from the testing class at the bottom of this post, which sums the numbers in a 100-element primitive-int array (A is iterator, B is index):</p>\n<pre class=\"lang-none prettyprint-override\"><code>[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\nTest A: 358,597,622 nanoseconds\nTest B: 269,167,681 nanoseconds\nB faster by 89,429,941 nanoseconds (24.438799231635727% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\nTest A: 377,461,823 nanoseconds\nTest B: 278,694,271 nanoseconds\nB faster by 98,767,552 nanoseconds (25.666236154695838% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\nTest A: 288,953,495 nanoseconds\nTest B: 207,050,523 nanoseconds\nB faster by 81,902,972 nanoseconds (27.844689860906513% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\nTest A: 375,373,765 nanoseconds\nTest B: 283,813,875 nanoseconds\nB faster by 91,559,890 nanoseconds (23.891659337194227% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\nTest A: 375,790,818 nanoseconds\nTest B: 220,770,915 nanoseconds\nB faster by 155,019,903 nanoseconds (40.75164734599769% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntArray 1000000\nTest A: 326,373,762 nanoseconds\nTest B: 202,555,566 nanoseconds\nB faster by 123,818,196 nanoseconds (37.437545972215744% faster)\n</code></pre>\n<p>I also ran this for an <code>Integer</code> array, and indexes are still the clear winner, but only between 18 and 25 percent faster.</p>\n<h3>For collections, iterators are faster than indexes</h3>\n<p>For a <code>List</code> of <code>Integers</code>, however, iterators are the clear winner. Just change the int-array in the test-class to:</p>\n<pre><code>List&lt;Integer&gt; intList = Arrays.asList(new Integer[] {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100});\n</code></pre>\n<p>And make the necessary changes to the test-function (<code>int[]</code> to <code>List&lt;Integer&gt;</code>, <code>length</code> to <code>size()</code>, etc.):</p>\n<pre class=\"lang-none prettyprint-override\"><code>[C:\\java_code\\]java TimeIteratorVsIndexIntegerList 1000000\nTest A: 3,429,929,976 nanoseconds\nTest B: 5,262,782,488 nanoseconds\nA faster by 1,832,852,512 nanoseconds (34.326681820485675% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntegerList 1000000\nTest A: 2,907,391,427 nanoseconds\nTest B: 3,957,718,459 nanoseconds\nA faster by 1,050,327,032 nanoseconds (26.038700083921256% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntegerList 1000000\nTest A: 2,566,004,688 nanoseconds\nTest B: 4,221,746,521 nanoseconds\nA faster by 1,655,741,833 nanoseconds (38.71935684115413% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntegerList 1000000\nTest A: 2,770,945,276 nanoseconds\nTest B: 3,829,077,158 nanoseconds\nA faster by 1,058,131,882 nanoseconds (27.134122749113843% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntegerList 1000000\nTest A: 3,467,474,055 nanoseconds\nTest B: 5,183,149,104 nanoseconds\nA faster by 1,715,675,049 nanoseconds (32.60101667104192% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntList 1000000\nTest A: 3,439,983,933 nanoseconds\nTest B: 3,509,530,312 nanoseconds\nA faster by 69,546,379 nanoseconds (1.4816434912159906% faster)\n\n[C:\\java_code\\]java TimeIteratorVsIndexIntList 1000000\nTest A: 3,451,101,466 nanoseconds\nTest B: 5,057,979,210 nanoseconds\nA faster by 1,606,877,744 nanoseconds (31.269164666060377% faster)\n</code></pre>\n<p>In one test they're almost equivalent, but with collections, iterator wins.</p>\n<p>*This post is based on two answers I wrote on Stack Overflow:</p>\n<ul>\n<li><p><em><a href=\"https://stackoverflow.com/questions/22110482/uses-and-syntax-for-for-each-loop-in-java/22110517#22110517\">Uses and syntax for for-each loop in Java</a></em></p>\n</li>\n<li><p><em><a href=\"https://stackoverflow.com/questions/22540025/should-i-use-an-iterator-or-a-forloop-to-iterate/22540191#22540191\">Should I use an Iterator or a forloop to iterate?</a></em></p>\n</li>\n</ul>\n<p>Some more information: <em><a href=\"https://stackoverflow.com/questions/2113216/which-is-more-efficient-a-for-each-loop-or-an-iterator\">Which is more efficient, a for-each loop, or an iterator?</a></em></p>\n<h3>The full testing class</h3>\n<p>I created this compare-the-time-it-takes-to-do-any-two-things class after reading <a href=\"https://stackoverflow.com/questions/180158/how-do-i-time-a-methods-execution-in-java\">this question</a> on Stack Overflow:</p>\n<pre><code>import  java.text.NumberFormat;\nimport  java.util.Locale;\n\n/**\n   &amp;lt;P&amp;gt;{@code java TimeIteratorVsIndexIntArray 1000000}&amp;lt;/P&amp;gt;\n\n   @see  &amp;lt;CODE&amp;gt;&amp;lt;A HREF=&amp;quot;https://stackoverflow.com/questions/180158/how-do-i-time-a-methods-execution-in-java&amp;quot;&amp;gt;https://stackoverflow.com/questions/180158/how-do-i-time-a-methods-execution-in-java&amp;lt;/A&amp;gt;&amp;lt;/CODE&amp;gt;\n **/\npublic class TimeIteratorVsIndexIntArray {\n\n    public static final NumberFormat nf = NumberFormat.getNumberInstance(Locale.US);\n\n    public static final void main(String[] tryCount_inParamIdx0) {\n        int testCount;\n\n        // Get try-count from a command-line parameter\n        try {\n           testCount = Integer.parseInt(tryCount_inParamIdx0[0]);\n        }\n        catch(ArrayIndexOutOfBoundsException | NumberFormatException x) {\n           throw  new IllegalArgumentException(&quot;Missing or invalid command line parameter: The number of testCount for each test. &quot; + x);\n        }\n\n        //Test proper...START\n        int[] intArray = new int[] {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100};\n\n        long lStart = System.nanoTime();\n        for(int i = 0; i &lt; testCount; i++) {\n           testIterator(intArray);\n        }\n\n        long lADuration = outputGetNanoDuration(&quot;A&quot;, lStart);\n\n        lStart = System.nanoTime();\n        for(int i = 0; i &lt; testCount; i++) {\n           testFor(intArray);\n        }\n\n        long lBDuration = outputGetNanoDuration(&quot;B&quot;, lStart);\n\n        outputGetABTestNanoDifference(lADuration, lBDuration, &quot;A&quot;, &quot;B&quot;);\n    }\n\n    private static final void testIterator(int[] int_array) {\n       int total = 0;\n       for(int i = 0; i &lt; int_array.length; i++) {\n          total += int_array[i];\n       }\n    }\n\n    private static final void testFor(int[] int_array) {\n       int total = 0;\n       for(int i : int_array) {\n          total += i;\n       }\n    }\n    //Test proper...END\n\n    //Timer testing utilities...START\n    public static final long outputGetNanoDuration(String s_testName, long l_nanoStart) {\n        long lDuration = System.nanoTime() - l_nanoStart;\n        System.out.println(&quot;Test &quot; + s_testName + &quot;: &quot; + nf.format(lDuration) + &quot; nanoseconds&quot;);\n        return  lDuration;\n    }\n\n    public static final long outputGetABTestNanoDifference(long l_aDuration, long l_bDuration, String s_aTestName, String s_bTestName) {\n        long lDiff = -1;\n        double dPct = -1.0;\n        String sFaster = null;\n        if(l_aDuration &gt; l_bDuration) {\n            lDiff = l_aDuration - l_bDuration;\n            dPct = 100.00 - (l_bDuration * 100.0 / l_aDuration + 0.5);\n            sFaster = &quot;B&quot;;\n        }\n        else {\n            lDiff = l_bDuration - l_aDuration;\n            dPct = 100.00 - (l_aDuration * 100.0 / l_bDuration + 0.5);\n            sFaster = &quot;A&quot;;\n        }\n        System.out.println(sFaster + &quot; faster by &quot; + nf.format(lDiff) + &quot; nanoseconds (&quot; + dPct + &quot;% faster)&quot;);\n        return  lDiff;\n   }\n\n   //Timer testing utilities...END\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2068268,"reputation":42279,"user_id":1843331,"accept_rate":100,"display_name":"Tim"},"score":14,"creation_date":1518792937,"post_id":23171818,"comment_id":84662523,"body_markdown":"this random information doesn&#39;t even remotely answer the question","body":"this random information doesn&#39;t even remotely answer the question"}],"tags":[],"owner":{"account_id":4351938,"reputation":327,"user_id":3551958,"display_name":"Jrovalle"},"comment_count":1,"down_vote_count":12,"up_vote_count":35,"is_accepted":false,"score":23,"last_activity_date":1506354195,"creation_date":1397920923,"answer_id":23171818,"question_id":85190,"body_markdown":"In Java 8 features you can use this:\r\n\r\n    List&lt;String&gt; messages = Arrays.asList(&quot;First&quot;, &quot;Second&quot;, &quot;Third&quot;);\r\n\t\r\n\tvoid forTest(){\r\n\t\tmessages.forEach(System.out::println);\r\n\t}\r\n\r\n\r\n###Output\r\n\r\n    First\r\n    Second\r\n    Third\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>In Java 8 features you can use this:</p>\n\n<pre><code>List&lt;String&gt; messages = Arrays.asList(\"First\", \"Second\", \"Third\");\n\nvoid forTest(){\n    messages.forEach(System.out::println);\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>First\nSecond\nThird\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3213845,"reputation":788,"user_id":2713162,"display_name":"Ondrej Skopek"},"score":0,"creation_date":1458321110,"post_id":30700135,"comment_id":59825043,"body_markdown":"-1: this is way less readable (generally): even your own example (the first one) is wrong, as it leaves out the first element in the array.","body":"-1: this is way less readable (generally): even your own example (the first one) is wrong, as it leaves out the first element in the array."}],"tags":[],"owner":{"account_id":6089055,"reputation":313,"user_id":4752024,"display_name":"TheArchon"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1458323008,"creation_date":1433726938,"answer_id":30700135,"question_id":85190,"body_markdown":"The Java for-each idiom can only be applied to arrays or objects of type ***Iterable**. This idiom is ***implicit*** as it truly backed by an Iterator. The Iterator is programmed by the programmer and often uses an integer index or a node (depending on the data structure) to keep track of its position. On paper it is slower than a regular for-loop, a least for &quot;linear&quot; structures like arrays and Lists but it provides greater abstraction. ","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>The Java for-each idiom can only be applied to arrays or objects of type <strong>*Iterable</strong>. This idiom is <strong><em>implicit</em></strong> as it truly backed by an Iterator. The Iterator is programmed by the programmer and often uses an integer index or a node (depending on the data structure) to keep track of its position. On paper it is slower than a regular for-loop, a least for \"linear\" structures like arrays and Lists but it provides greater abstraction. </p>\n"},{"tags":[],"owner":{"account_id":2325172,"reputation":653,"user_id":2039852,"accept_rate":33,"display_name":"Manohar"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1490990563,"creation_date":1443588289,"answer_id":32857986,"question_id":85190,"body_markdown":"It adds beauty to your code by removing all the basic looping clutter. It gives a clean look to your code, justified below.\r\n\r\n**Normal `for` loop:**\r\n\r\n    void cancelAll(Collection&lt;TimerTask&gt; list) {\r\n        for (Iterator&lt;TimerTask&gt; i = list.iterator(); i.hasNext();)\r\n             i.next().cancel();\r\n    }\r\n\r\n**Using for-each:**\r\n\r\n    void cancelAll(Collection&lt;TimerTask&gt; list) {\r\n        for (TimerTask t : list)\r\n            t.cancel();\r\n    }\r\n\r\n**for-each** is a construct over a collection that implements **Iterator**. Remember that, your collection should implement **Iterator**; otherwise you can&#39;t use it with for-each.\r\n\r\nThe following line is read as &quot;*for each TimerTask t in list.*&quot;\r\n\r\n    for (TimerTask t : list)\r\n\r\nThere is less chance for errors in case of for-each. You don&#39;t have to worry about initializing the iterator or initializing the loop counter and terminating it (where there is scope for errors).\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>It adds beauty to your code by removing all the basic looping clutter. It gives a clean look to your code, justified below.</p>\n\n<p><strong>Normal <code>for</code> loop:</strong></p>\n\n<pre><code>void cancelAll(Collection&lt;TimerTask&gt; list) {\n    for (Iterator&lt;TimerTask&gt; i = list.iterator(); i.hasNext();)\n         i.next().cancel();\n}\n</code></pre>\n\n<p><strong>Using for-each:</strong></p>\n\n<pre><code>void cancelAll(Collection&lt;TimerTask&gt; list) {\n    for (TimerTask t : list)\n        t.cancel();\n}\n</code></pre>\n\n<p><strong>for-each</strong> is a construct over a collection that implements <strong>Iterator</strong>. Remember that, your collection should implement <strong>Iterator</strong>; otherwise you can't use it with for-each.</p>\n\n<p>The following line is read as \"<em>for each TimerTask t in list.</em>\"</p>\n\n<pre><code>for (TimerTask t : list)\n</code></pre>\n\n<p>There is less chance for errors in case of for-each. You don't have to worry about initializing the iterator or initializing the loop counter and terminating it (where there is scope for errors).</p>\n"},{"comments":[{"owner":{"account_id":2171884,"reputation":283,"user_id":1923644,"accept_rate":100,"display_name":"Zarial"},"score":4,"creation_date":1506167859,"post_id":33232565,"comment_id":79717120,"body_markdown":"The most relevant and accurate answer. Enchansed for has two translations indeed.","body":"The most relevant and accurate answer. Enchansed for has two translations indeed."},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":2,"creation_date":1615459375,"post_id":33232565,"comment_id":117699284,"body_markdown":"I entirely disagree with: *Java 8 has introduced streams which perform generally better.*, streams are only really feasible if you work with a big enough data set. Also `.stream().forEach()` can be replaced with `.forEach()`","body":"I entirely disagree with: <i>Java 8 has introduced streams which perform generally better.</i>, streams are only really feasible if you work with a big enough data set. Also <code>.stream().forEach()</code> can be replaced with <code>.forEach()</code>"},{"owner":{"account_id":7544172,"reputation":417,"user_id":5727849,"display_name":"Thang"},"score":0,"creation_date":1632977675,"post_id":33232565,"comment_id":122639785,"body_markdown":"I&#39;m not so thinking about .forEach(), because the run times of forEeach more than for loop, so that&#39;s  forEarch don&#39;t best solutions","body":"I&#39;m not so thinking about .forEach(), because the run times of forEeach more than for loop, so that&#39;s  forEarch don&#39;t best solutions"}],"tags":[],"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"comment_count":3,"down_vote_count":1,"up_vote_count":49,"is_accepted":false,"score":48,"last_activity_date":1649887458,"creation_date":1445332372,"answer_id":33232565,"question_id":85190,"body_markdown":"As defined in [JLS][1], a *for-each* loop can have two forms:\r\n\r\n 1. If the type of expression is a subtype of `Iterable` then translation is as:\r\n\r\n        List&lt;String&gt; someList = new ArrayList&lt;String&gt;();\r\n        someList.add(&quot;Apple&quot;);\r\n        someList.add(&quot;Ball&quot;);\r\n        for (String item : someList) {\r\n            System.out.println(item);\r\n        }\r\n\r\n        // Is translated to:\r\n\r\n        for(Iterator&lt;String&gt; stringIterator = someList.iterator(); stringIterator.hasNext(); ) {\r\n            String item = stringIterator.next();\r\n            System.out.println(item);\r\n        }\r\n\r\n 2. If the expression necessarily has an array type `T[]` then:\r\n\r\n        String[] someArray = new String[2];\r\n        someArray[0] = &quot;Apple&quot;;\r\n        someArray[1] = &quot;Ball&quot;;\r\n\r\n        for(String item2 : someArray) {\r\n            System.out.println(item2);\r\n        }\r\n\r\n        // Is translated to:\r\n        for (int i = 0; i &lt; someArray.length; i++) {\r\n            String item2 = someArray[i];\r\n            System.out.println(item2);\r\n        }\r\n\r\nJava 8 has introduced streams which perform generally better with a decent size dataset. We can use them as:\r\n\r\n    someList.stream().forEach(System.out::println);\r\n    Arrays.stream(someArray).forEach(System.out::println);\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.14.2\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>As defined in <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.14.2\" rel=\"noreferrer\">JLS</a>, a <em>for-each</em> loop can have two forms:</p>\n<ol>\n<li><p>If the type of expression is a subtype of <code>Iterable</code> then translation is as:</p>\n<pre><code>List&lt;String&gt; someList = new ArrayList&lt;String&gt;();\nsomeList.add(&quot;Apple&quot;);\nsomeList.add(&quot;Ball&quot;);\nfor (String item : someList) {\n    System.out.println(item);\n}\n\n// Is translated to:\n\nfor(Iterator&lt;String&gt; stringIterator = someList.iterator(); stringIterator.hasNext(); ) {\n    String item = stringIterator.next();\n    System.out.println(item);\n}\n</code></pre>\n</li>\n<li><p>If the expression necessarily has an array type <code>T[]</code> then:</p>\n<pre><code>String[] someArray = new String[2];\nsomeArray[0] = &quot;Apple&quot;;\nsomeArray[1] = &quot;Ball&quot;;\n\nfor(String item2 : someArray) {\n    System.out.println(item2);\n}\n\n// Is translated to:\nfor (int i = 0; i &lt; someArray.length; i++) {\n    String item2 = someArray[i];\n    System.out.println(item2);\n}\n</code></pre>\n</li>\n</ol>\n<p>Java 8 has introduced streams which perform generally better with a decent size dataset. We can use them as:</p>\n<pre><code>someList.stream().forEach(System.out::println);\nArrays.stream(someArray).forEach(System.out::println);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1649888080,"post_id":40283536,"comment_id":126992661,"body_markdown":"I don&#39;t think we need this answer. See [this comment](https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work/59667941#comment121529936_66815146).","body":"I don&#39;t think we need this answer. See <a href=\"https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work/59667941#comment121529936_66815146\">this comment</a>."}],"tags":[],"owner":{"account_id":8003937,"reputation":121,"user_id":6037775,"display_name":"Santhosh Rajkumar"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1649887173,"creation_date":1477567880,"answer_id":40283536,"question_id":85190,"body_markdown":"    public static Boolean Add_Tag(int totalsize)\r\n    {\r\n        List&lt;String&gt; fullst = new ArrayList&lt;String&gt;();\r\n        for(int k=0; k&lt;totalsize; k++)\r\n        {\r\n            fullst.addAll();\r\n        }\r\n    }\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<pre><code>public static Boolean Add_Tag(int totalsize)\n{\n    List&lt;String&gt; fullst = new ArrayList&lt;String&gt;();\n    for(int k=0; k&lt;totalsize; k++)\n    {\n        fullst.addAll();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6949864,"reputation":155,"user_id":5332814,"display_name":"L Joey"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1649887973,"creation_date":1480389627,"answer_id":40857220,"question_id":85190,"body_markdown":"As so many good answers said, an object must implement the `Iterable interface` if it wants to use a `for-each` loop.\r\n\r\nI&#39;ll post a simple example and try to explain in a different way how a `for-each` loop works.\r\n\r\nThe `for-each` loop example:\r\n\r\n    public class ForEachTest {\r\n\r\n        public static void main(String[] args) {\r\n\r\n            List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n            list.add(&quot;111&quot;);\r\n            list.add(&quot;222&quot;);\r\n\r\n            for (String str : list) {\r\n                System.out.println(str);\r\n            }\r\n        }\r\n    }\r\n\r\nThen, if we use `javap` to decompile this class, we will get this bytecode sample:\r\n\r\n```lang-none\r\npublic static void main(java.lang.String[]);\r\n    flags: ACC_PUBLIC, ACC_STATIC\r\n    Code:\r\n      stack=2, locals=4, args_size=1\r\n         0: new           #16                 // class java/util/ArrayList\r\n         3: dup\r\n         4: invokespecial #18                 // Method java/util/ArrayList.&quot;&lt;init&gt;&quot;:()V\r\n         7: astore_1\r\n         8: aload_1\r\n         9: ldc           #19                 // String 111\r\n        11: invokeinterface #21,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z\r\n        16: pop\r\n        17: aload_1\r\n        18: ldc           #27                 // String 222\r\n        20: invokeinterface #21,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z\r\n        25: pop\r\n        26: aload_1\r\n        27: invokeinterface #29,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;\r\n```\r\n\r\nAs we can see from the last line of the sample, the compiler will automatically convert the use of `for-each` keyword to the use of an `Iterator` at compile time. That may explain why object, which doesn&#39;t implement the `Iterable interface`, will throw an `Exception` when it tries to use the `for-each` loop.\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>As so many good answers said, an object must implement the <code>Iterable interface</code> if it wants to use a <code>for-each</code> loop.</p>\n<p>I'll post a simple example and try to explain in a different way how a <code>for-each</code> loop works.</p>\n<p>The <code>for-each</code> loop example:</p>\n<pre><code>public class ForEachTest {\n\n    public static void main(String[] args) {\n\n        List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n        list.add(&quot;111&quot;);\n        list.add(&quot;222&quot;);\n\n        for (String str : list) {\n            System.out.println(str);\n        }\n    }\n}\n</code></pre>\n<p>Then, if we use <code>javap</code> to decompile this class, we will get this bytecode sample:</p>\n<pre class=\"lang-none prettyprint-override\"><code>public static void main(java.lang.String[]);\n    flags: ACC_PUBLIC, ACC_STATIC\n    Code:\n      stack=2, locals=4, args_size=1\n         0: new           #16                 // class java/util/ArrayList\n         3: dup\n         4: invokespecial #18                 // Method java/util/ArrayList.&quot;&lt;init&gt;&quot;:()V\n         7: astore_1\n         8: aload_1\n         9: ldc           #19                 // String 111\n        11: invokeinterface #21,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z\n        16: pop\n        17: aload_1\n        18: ldc           #27                 // String 222\n        20: invokeinterface #21,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z\n        25: pop\n        26: aload_1\n        27: invokeinterface #29,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;\n</code></pre>\n<p>As we can see from the last line of the sample, the compiler will automatically convert the use of <code>for-each</code> keyword to the use of an <code>Iterator</code> at compile time. That may explain why object, which doesn't implement the <code>Iterable interface</code>, will throw an <code>Exception</code> when it tries to use the <code>for-each</code> loop.</p>\n"},{"comments":[{"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"score":2,"creation_date":1501166577,"post_id":44018004,"comment_id":77669463,"body_markdown":"Should have mention that it&#39;s added in Java 1.8","body":"Should have mention that it&#39;s added in Java 1.8"},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1550492860,"post_id":44018004,"comment_id":96276442,"body_markdown":"We cant be 100% sure that the same thread is used. I like to use the `for(` form if I like to make sure the same thread is used. I like to use the stream-form if I like to allow multithreaded execution.","body":"We cant be 100% sure that the same thread is used. I like to use the <code>for(</code> form if I like to make sure the same thread is used. I like to use the stream-form if I like to allow multithreaded execution."}],"tags":[],"owner":{"account_id":1871673,"reputation":3967,"user_id":1693748,"accept_rate":29,"display_name":"Alexander Drobyshevsky"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1663254816,"creation_date":1495005248,"answer_id":44018004,"question_id":85190,"body_markdown":"An alternative to forEach in order to avoid your &quot;for each&quot;:\r\n```java\r\nList&lt;String&gt; someList = new ArrayList&lt;String&gt;();\r\n```\r\nVariant 1 (plain):\r\n```java\r\nsomeList.stream().forEach(listItem -&gt; {\r\n    System.out.println(listItem);\r\n});\r\n```\r\n\r\nVariant 2 (parallel execution (faster)):\r\n```java\r\nsomeList.parallelStream().forEach(listItem -&gt; {\r\n    System.out.println(listItem);\r\n});\r\n```","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>An alternative to forEach in order to avoid your &quot;for each&quot;:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; someList = new ArrayList&lt;String&gt;();\n</code></pre>\n<p>Variant 1 (plain):</p>\n<pre class=\"lang-java prettyprint-override\"><code>someList.stream().forEach(listItem -&gt; {\n    System.out.println(listItem);\n});\n</code></pre>\n<p>Variant 2 (parallel execution (faster)):</p>\n<pre class=\"lang-java prettyprint-override\"><code>someList.parallelStream().forEach(listItem -&gt; {\n    System.out.println(listItem);\n});\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5860398,"reputation":162,"user_id":4616324,"accept_rate":33,"display_name":"BARNI"},"score":1,"creation_date":1518679866,"post_id":48497277,"comment_id":84606430,"body_markdown":"This requires Java 1.8 +","body":"This requires Java 1.8 +"},{"owner":{"account_id":2068268,"reputation":42279,"user_id":1843331,"accept_rate":100,"display_name":"Tim"},"score":4,"creation_date":1518793040,"post_id":48497277,"comment_id":84662580,"body_markdown":"doesn&#39;t even remotely answer the question","body":"doesn&#39;t even remotely answer the question"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1649887893,"post_id":48497277,"comment_id":126992634,"body_markdown":"An explanation would be in order.","body":"An explanation would be in order."}],"tags":[],"owner":{"account_id":11393912,"reputation":185,"user_id":8352967,"accept_rate":86,"display_name":"Rei Brown"},"comment_count":3,"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1517215131,"creation_date":1517215131,"answer_id":48497277,"question_id":85190,"body_markdown":"This looks crazy but hey it works\r\n\r\n    List&lt;String&gt; someList = new ArrayList&lt;&gt;(); //has content\r\n    someList.forEach(System.out::println);\r\n\r\nThis works. ***Magic***","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>This looks crazy but hey it works</p>\n\n<pre><code>List&lt;String&gt; someList = new ArrayList&lt;&gt;(); //has content\nsomeList.forEach(System.out::println);\n</code></pre>\n\n<p>This works. <strong><em>Magic</em></strong></p>\n"},{"comments":[{"owner":{"account_id":6241436,"reputation":2512,"user_id":4854931,"accept_rate":33,"display_name":"Alex78191"},"score":0,"creation_date":1574363437,"post_id":49015283,"comment_id":104216877,"body_markdown":"`The foreach loop, added in Java 5 (also called the &quot;enhanced for loop&quot;), is equivalent to using a java.util.Iterator`","body":"<code>The foreach loop, added in Java 5 (also called the &quot;enhanced for loop&quot;), is equivalent to using a java.util.Iterator</code>"}],"tags":[],"owner":{"account_id":4028182,"reputation":1548,"user_id":3315482,"accept_rate":75,"display_name":"stackFan"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1521207615,"creation_date":1519755110,"answer_id":49015283,"question_id":85190,"body_markdown":"Prior to Java 8, you need to use the following:\r\n\r\n    Iterator&lt;String&gt; iterator = someList.iterator();\r\n\r\n    while (iterator.hasNext()) {\r\n        String item = iterator.next();\r\n        System.out.println(item);\r\n    }\r\n\r\nHowever, with the introduction of Streams in Java 8 you can do same thing in much less syntax. For example, for your `someList` you can do:\r\n\r\n    someList.stream().forEach(System.out::println);\r\n\r\nYou can find more about streams [here].\r\n\r\n [here]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>Prior to Java 8, you need to use the following:</p>\n\n<pre><code>Iterator&lt;String&gt; iterator = someList.iterator();\n\nwhile (iterator.hasNext()) {\n    String item = iterator.next();\n    System.out.println(item);\n}\n</code></pre>\n\n<p>However, with the introduction of Streams in Java 8 you can do same thing in much less syntax. For example, for your <code>someList</code> you can do:</p>\n\n<pre><code>someList.stream().forEach(System.out::println);\n</code></pre>\n\n<p>You can find more about streams <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":7531567,"reputation":2637,"user_id":5719544,"display_name":"gomisha"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1525266687,"creation_date":1525266687,"answer_id":50135519,"question_id":85190,"body_markdown":"The [Java for each loop][1] (aka enhanced for loop) is a simplified version of a for loop. The advantage is that there is less code to write and less variables to manage. The downside is that you have no control over the step value and no access to the loop index inside the loop body.\r\n\r\nThey are best used when the step value is a simple increment of 1 and when you only need access to the current loop element. For example, if you need to loop over every element in an array or Collection without peeking ahead or behind the current element.\r\n\r\nThere is no loop initialization, no boolean condition and the step value is implicit and is a simple increment. This is why they are considered so much simpler than regular for loops.\r\n\r\nEnhanced for loops follow this order of execution:\r\n\r\n1) loop body\r\n\r\n2) repeat from step 1 until entire array or collection has been traversed\r\n\r\n**Example – Integer Array**\r\n\r\n    int [] intArray = {1, 3, 5, 7, 9};\r\n    for(int currentValue : intArray) {\r\n      System.out.println(currentValue);\r\n    }\r\n\r\nThe currentValue variable holds the current value being looped over in the intArray array. Notice there’s no explicit step value – it’s always an increment by 1.\r\n\r\nThe colon can be thought of to mean “in”. So the enhanced for loop declaration states: loop over intArray and store the current array int value **in** the currentValue variable.\r\n\r\nOutput:\r\n\r\n    1\r\n    3\r\n    5\r\n    7\r\n    9\r\n\r\n**Example – String Array**\r\n\r\nWe can use the for-each loop to iterate over an array of strings. The loop declaration states: loop over myStrings String array and store the current String value **in** the currentString variable.\r\n\r\n    String [] myStrings  = {\r\n      &quot;alpha&quot;,\r\n      &quot;beta&quot;,\r\n      &quot;gamma&quot;,\r\n      &quot;delta&quot;\r\n    };\r\n    \r\n    for(String currentString : myStrings) {\r\n      System.out.println(currentString);\r\n    }\r\n\r\nOutput:\r\n\r\n    alpha\r\n    beta\r\n    gamma\r\n    delta\r\n\r\n**Example – List**\r\n\r\nThe enhanced for loop can also be used to iterate over a java.util.List as follows:\r\n\r\n    List&lt;String&gt; myList = new ArrayList&lt;String&gt;();\r\n    myList.add(&quot;alpha&quot;);\r\n    myList.add(&quot;beta&quot;);\r\n    myList.add(&quot;gamma&quot;);\r\n    myList.add(&quot;delta&quot;);\r\n    \r\n    for(String currentItem : myList) {\r\n      System.out.println(currentItem);\r\n    }\r\n\r\nThe loop declaration states: loop over myList List of Strings and store the current List value **in** the currentItem variable.\r\n\r\nOutput:\r\n\r\n    alpha\r\n    beta\r\n    gamma\r\n    delta\r\n\r\n**Example – Set**\r\n\r\nThe enhanced for loop can also be used to iterate over a java.util.Set as follows:\r\n\r\n    Set&lt;String&gt; mySet = new HashSet&lt;String&gt;();\r\n    mySet.add(&quot;alpha&quot;);\r\n    mySet.add(&quot;alpha&quot;);\r\n    mySet.add(&quot;beta&quot;);\r\n    mySet.add(&quot;gamma&quot;);\r\n    mySet.add(&quot;gamma&quot;);\r\n    mySet.add(&quot;delta&quot;);\r\n    \r\n    for(String currentItem : mySet) {\r\n      System.out.println(currentItem);\r\n    }\r\n\r\nThe loop declaration states: loop over mySet Set of Strings and store the current Set value **in** the currentItem variable. Notice that since this is a Set, duplicate String values are not stored.\r\n\r\nOutput:\r\n\r\n    alpha\r\n    delta\r\n    beta\r\n    gamma\r\n\r\nSource: [Loops in Java – Ultimate Guide][2]\r\n\r\n\r\n  [1]: https://funnelgarden.com/java-for-loop/#Enhanced_For_Loop\r\n  [2]: https://funnelgarden.com/java-for-loop/","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>The <a href=\"https://funnelgarden.com/java-for-loop/#Enhanced_For_Loop\" rel=\"noreferrer\">Java for each loop</a> (aka enhanced for loop) is a simplified version of a for loop. The advantage is that there is less code to write and less variables to manage. The downside is that you have no control over the step value and no access to the loop index inside the loop body.</p>\n\n<p>They are best used when the step value is a simple increment of 1 and when you only need access to the current loop element. For example, if you need to loop over every element in an array or Collection without peeking ahead or behind the current element.</p>\n\n<p>There is no loop initialization, no boolean condition and the step value is implicit and is a simple increment. This is why they are considered so much simpler than regular for loops.</p>\n\n<p>Enhanced for loops follow this order of execution:</p>\n\n<p>1) loop body</p>\n\n<p>2) repeat from step 1 until entire array or collection has been traversed</p>\n\n<p><strong>Example – Integer Array</strong></p>\n\n<pre><code>int [] intArray = {1, 3, 5, 7, 9};\nfor(int currentValue : intArray) {\n  System.out.println(currentValue);\n}\n</code></pre>\n\n<p>The currentValue variable holds the current value being looped over in the intArray array. Notice there’s no explicit step value – it’s always an increment by 1.</p>\n\n<p>The colon can be thought of to mean “in”. So the enhanced for loop declaration states: loop over intArray and store the current array int value <strong>in</strong> the currentValue variable.</p>\n\n<p>Output:</p>\n\n<pre><code>1\n3\n5\n7\n9\n</code></pre>\n\n<p><strong>Example – String Array</strong></p>\n\n<p>We can use the for-each loop to iterate over an array of strings. The loop declaration states: loop over myStrings String array and store the current String value <strong>in</strong> the currentString variable.</p>\n\n<pre><code>String [] myStrings  = {\n  \"alpha\",\n  \"beta\",\n  \"gamma\",\n  \"delta\"\n};\n\nfor(String currentString : myStrings) {\n  System.out.println(currentString);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>alpha\nbeta\ngamma\ndelta\n</code></pre>\n\n<p><strong>Example – List</strong></p>\n\n<p>The enhanced for loop can also be used to iterate over a java.util.List as follows:</p>\n\n<pre><code>List&lt;String&gt; myList = new ArrayList&lt;String&gt;();\nmyList.add(\"alpha\");\nmyList.add(\"beta\");\nmyList.add(\"gamma\");\nmyList.add(\"delta\");\n\nfor(String currentItem : myList) {\n  System.out.println(currentItem);\n}\n</code></pre>\n\n<p>The loop declaration states: loop over myList List of Strings and store the current List value <strong>in</strong> the currentItem variable.</p>\n\n<p>Output:</p>\n\n<pre><code>alpha\nbeta\ngamma\ndelta\n</code></pre>\n\n<p><strong>Example – Set</strong></p>\n\n<p>The enhanced for loop can also be used to iterate over a java.util.Set as follows:</p>\n\n<pre><code>Set&lt;String&gt; mySet = new HashSet&lt;String&gt;();\nmySet.add(\"alpha\");\nmySet.add(\"alpha\");\nmySet.add(\"beta\");\nmySet.add(\"gamma\");\nmySet.add(\"gamma\");\nmySet.add(\"delta\");\n\nfor(String currentItem : mySet) {\n  System.out.println(currentItem);\n}\n</code></pre>\n\n<p>The loop declaration states: loop over mySet Set of Strings and store the current Set value <strong>in</strong> the currentItem variable. Notice that since this is a Set, duplicate String values are not stored.</p>\n\n<p>Output:</p>\n\n<pre><code>alpha\ndelta\nbeta\ngamma\n</code></pre>\n\n<p>Source: <a href=\"https://funnelgarden.com/java-for-loop/\" rel=\"noreferrer\">Loops in Java – Ultimate Guide</a></p>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"comment_count":0,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1646831507,"creation_date":1529579115,"answer_id":50966962,"question_id":85190,"body_markdown":"Using older Java versions, including [Java&amp;nbsp;7][1], you can use a `foreach` loop as follows.\r\n\r\n    List&lt;String&gt; items = new ArrayList&lt;&gt;();\r\n    items.add(&quot;A&quot;);\r\n    items.add(&quot;B&quot;);\r\n    items.add(&quot;C&quot;);\r\n    items.add(&quot;D&quot;);\r\n    items.add(&quot;E&quot;);\r\n\r\n    for(String item : items) {\r\n        System.out.println(item);\r\n    }\r\n\r\nThe following is the very latest way of using a *for each* loop in [Java&amp;nbsp;8][2] (loop a List with `forEach` + lambda expression or method reference).\r\n\r\n### Lambda\r\n\r\n    // Output: A,B,C,D,E\r\n    items.forEach(item-&gt;System.out.println(item));\r\n\r\n### Method reference\r\n\r\n    // Output: A,B,C,D,E\r\n    items.forEach(System.out::println);\r\n\r\nFor more information, refer to *&quot;[Java 8 forEach examples][3]&quot;*.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\r\n  [2]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\r\n  [3]: https://www.mkyong.com/java8/java-8-foreach-examples/\r\n\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>Using older Java versions, including <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"nofollow noreferrer\">Java 7</a>, you can use a <code>foreach</code> loop as follows.</p>\n<pre><code>List&lt;String&gt; items = new ArrayList&lt;&gt;();\nitems.add(&quot;A&quot;);\nitems.add(&quot;B&quot;);\nitems.add(&quot;C&quot;);\nitems.add(&quot;D&quot;);\nitems.add(&quot;E&quot;);\n\nfor(String item : items) {\n    System.out.println(item);\n}\n</code></pre>\n<p>The following is the very latest way of using a <em>for each</em> loop in <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\">Java 8</a> (loop a List with <code>forEach</code> + lambda expression or method reference).</p>\n<h3>Lambda</h3>\n<pre><code>// Output: A,B,C,D,E\nitems.forEach(item-&gt;System.out.println(item));\n</code></pre>\n<h3>Method reference</h3>\n<pre><code>// Output: A,B,C,D,E\nitems.forEach(System.out::println);\n</code></pre>\n<p>For more information, refer to <em>&quot;<a href=\"https://www.mkyong.com/java8/java-8-foreach-examples/\" rel=\"nofollow noreferrer\">Java 8 forEach examples</a>&quot;</em>.</p>\n"},{"tags":[],"owner":{"account_id":4088027,"reputation":1554,"user_id":3356847,"display_name":"vivekkurien"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1535635395,"creation_date":1535635395,"answer_id":52098209,"question_id":85190,"body_markdown":"In Java 8, they introduced forEach. Using it List, Maps can be looped.\r\n\r\n**Loop a List using for each**\r\n\r\n    List&lt;String&gt; someList = new ArrayList&lt;String&gt;();\r\n    someList.add(&quot;A&quot;);\r\n    someList.add(&quot;B&quot;);\r\n    someList.add(&quot;C&quot;);\r\n\r\n    someList.forEach(listItem -&gt; System.out.println(listItem))\r\n\r\nor \r\n\r\n    someList.forEach(listItem-&gt; {\r\n         System.out.println(listItem); \r\n    });\r\n\r\n**Loop a Map using for each**\r\n\r\n    Map&lt;String, String&gt; mapList = new HashMap&lt;&gt;();\r\n    \tmapList.put(&quot;Key1&quot;, &quot;Value1&quot;);\r\n    \tmapList.put(&quot;Key2&quot;, &quot;Value2&quot;);\r\n    \tmapList.put(&quot;Key3&quot;, &quot;Value3&quot;);\r\n    \r\n    mapList.forEach((key,value)-&gt;System.out.println(&quot;Key: &quot; + key + &quot; Value : &quot; + value));\r\n\t\r\nor\r\n\r\n\tmapList.forEach((key,value)-&gt;{\r\n\t\tSystem.out.println(&quot;Key : &quot; + key + &quot; Value : &quot; + value);\r\n\t});\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>In Java 8, they introduced forEach. Using it List, Maps can be looped.</p>\n\n<p><strong>Loop a List using for each</strong></p>\n\n<pre><code>List&lt;String&gt; someList = new ArrayList&lt;String&gt;();\nsomeList.add(\"A\");\nsomeList.add(\"B\");\nsomeList.add(\"C\");\n\nsomeList.forEach(listItem -&gt; System.out.println(listItem))\n</code></pre>\n\n<p>or </p>\n\n<pre><code>someList.forEach(listItem-&gt; {\n     System.out.println(listItem); \n});\n</code></pre>\n\n<p><strong>Loop a Map using for each</strong></p>\n\n<pre><code>Map&lt;String, String&gt; mapList = new HashMap&lt;&gt;();\n    mapList.put(\"Key1\", \"Value1\");\n    mapList.put(\"Key2\", \"Value2\");\n    mapList.put(\"Key3\", \"Value3\");\n\nmapList.forEach((key,value)-&gt;System.out.println(\"Key: \" + key + \" Value : \" + value));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>mapList.forEach((key,value)-&gt;{\n    System.out.println(\"Key : \" + key + \" Value : \" + value);\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5565685,"reputation":8016,"user_id":4413098,"accept_rate":86,"display_name":"mightyWOZ"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1649888293,"creation_date":1578585937,"answer_id":59667941,"question_id":85190,"body_markdown":"As many of other answers correctly state, the *for each* loop is just syntactic sugar over the same old *for* loop and the compiler translates it to the same old *for* loop.\r\n\r\njavac ([OpenJDK][1]) has a switch, `-XD-printflat`, which generates a Java file with all the syntactic sugar removed. The complete command looks like this:\r\n\r\n    javac -XD-printflat -d src/ MyFile.java\r\n\r\n    //-d is used to specify the directory for output java file\r\n\r\n### So let’s remove the syntactical sugar\r\n\r\nTo answer this question, I created a file and wrote two versions of *for each*, one with *array* and another with a *list*. My Java file looked like this:\r\n\r\n    import java.util.*;\r\n\r\n    public class Temp{\r\n\r\n        private static void forEachArray(){\r\n            int[] arr = new int[]{1,2,3,4,5};\r\n            for(int i: arr){\r\n                System.out.print(i);\r\n            }\r\n        }\r\n\r\n        private static void forEachList(){\r\n            List&lt;Integer&gt; list = Arrays.asList(1,2,3,4,5);\r\n            for(Integer i: list){\r\n                System.out.print(i);\r\n            }\r\n        }\r\n    }\r\n\r\nWhen I `compiled` this file with above switch, I got the following output.\r\n\r\n    import java.util.*;\r\n\r\n    public class Temp {\r\n\r\n        public Temp() {\r\n            super();\r\n        }\r\n\r\n        private static void forEachArray() {\r\n            int[] arr = new int[]{1, 2, 3, 4, 5};\r\n            for (/*synthetic*/ int[] arr$ = arr, len$ = arr$.length, i$ = 0; i$ &lt; len$; ++i$) {\r\n                int i = arr$[i$];\r\n                {\r\n                    System.out.print(i);\r\n                }\r\n            }\r\n        }\r\n\r\n        private static void forEachList() {\r\n            List list = Arrays.asList(new Integer[]{Integer.valueOf(1), Integer.valueOf(2), Integer.valueOf(3), Integer.valueOf(4), Integer.valueOf(5)});\r\n            for (/*synthetic*/ Iterator i$ = list.iterator(); i$.hasNext(); ) {\r\n                Integer i = (Integer)i$.next();\r\n                {\r\n                    System.out.print(i);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nYou can see that along with the other syntactic sugar (Autoboxing), *for each* loops got changed to simple loops.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/OpenJDK\r\n\r\n\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>As many of other answers correctly state, the <em>for each</em> loop is just syntactic sugar over the same old <em>for</em> loop and the compiler translates it to the same old <em>for</em> loop.</p>\n<p>javac (<a href=\"https://en.wikipedia.org/wiki/OpenJDK\" rel=\"nofollow noreferrer\">OpenJDK</a>) has a switch, <code>-XD-printflat</code>, which generates a Java file with all the syntactic sugar removed. The complete command looks like this:</p>\n<pre><code>javac -XD-printflat -d src/ MyFile.java\n\n//-d is used to specify the directory for output java file\n</code></pre>\n<h3>So let’s remove the syntactical sugar</h3>\n<p>To answer this question, I created a file and wrote two versions of <em>for each</em>, one with <em>array</em> and another with a <em>list</em>. My Java file looked like this:</p>\n<pre><code>import java.util.*;\n\npublic class Temp{\n\n    private static void forEachArray(){\n        int[] arr = new int[]{1,2,3,4,5};\n        for(int i: arr){\n            System.out.print(i);\n        }\n    }\n\n    private static void forEachList(){\n        List&lt;Integer&gt; list = Arrays.asList(1,2,3,4,5);\n        for(Integer i: list){\n            System.out.print(i);\n        }\n    }\n}\n</code></pre>\n<p>When I <code>compiled</code> this file with above switch, I got the following output.</p>\n<pre><code>import java.util.*;\n\npublic class Temp {\n\n    public Temp() {\n        super();\n    }\n\n    private static void forEachArray() {\n        int[] arr = new int[]{1, 2, 3, 4, 5};\n        for (/*synthetic*/ int[] arr$ = arr, len$ = arr$.length, i$ = 0; i$ &lt; len$; ++i$) {\n            int i = arr$[i$];\n            {\n                System.out.print(i);\n            }\n        }\n    }\n\n    private static void forEachList() {\n        List list = Arrays.asList(new Integer[]{Integer.valueOf(1), Integer.valueOf(2), Integer.valueOf(3), Integer.valueOf(4), Integer.valueOf(5)});\n        for (/*synthetic*/ Iterator i$ = list.iterator(); i$.hasNext(); ) {\n            Integer i = (Integer)i$.next();\n            {\n                System.out.print(i);\n            }\n        }\n    }\n}\n</code></pre>\n<p>You can see that along with the other syntactic sugar (Autoboxing), <em>for each</em> loops got changed to simple loops.</p>\n"},{"comments":[{"owner":{"account_id":16439430,"reputation":1956,"user_id":11876201,"display_name":"phoenixstudio"},"score":1,"creation_date":1611685660,"post_id":65906872,"comment_id":116529126,"body_markdown":"Please explain why your code and try to answer the question &quot;How does the Java &#39;for each&#39; loop work?&quot;","body":"Please explain why your code and try to answer the question &quot;How does the Java &#39;for each&#39; loop work?&quot;"}],"tags":[],"owner":{"account_id":20042089,"reputation":211,"user_id":14692626,"display_name":"nabayram"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1611684545,"creation_date":1611684545,"answer_id":65906872,"question_id":85190,"body_markdown":"I think this will work:\r\n\r\n    for (Iterator&lt;String&gt; i = someList.iterator(); i.hasNext(); ) {\r\n       String x = i.next();\r\n       System.out.println(x);\r\n    }","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>I think this will work:</p>\n<pre><code>for (Iterator&lt;String&gt; i = someList.iterator(); i.hasNext(); ) {\n   String x = i.next();\n   System.out.println(x);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1628827262,"post_id":66815146,"comment_id":121529936,"body_markdown":"1) This is incorrect.  The direct equivalent to a for-each on an iterable (such as a list) uses an iterator.  That&#39;s what the JLS says.  Look it up. 2) We don&#39;t need more answers to this question.  Please don&#39;t waste everyone&#39;s time by adding yet another answer to old questions.  Find new questions that you can answer.","body":"1) This is incorrect.  The direct equivalent to a for-each on an iterable (such as a list) uses an iterator.  That&#39;s what the JLS says.  Look it up. 2) We don&#39;t need more answers to this question.  Please don&#39;t waste everyone&#39;s time by adding yet another answer to old questions.  Find new questions that you can answer."}],"tags":[],"owner":{"account_id":14436755,"reputation":448,"user_id":10428563,"display_name":"Java-Dev"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1646831218,"creation_date":1616754569,"answer_id":66815146,"question_id":85190,"body_markdown":"The code would be:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    public class ForLoopDemo {\r\n\r\n      public static void main(String[] args) {\r\n\r\n        List&lt;String&gt; someList = new ArrayList&lt;String&gt;();\r\n\r\n        someList.add(&quot;monkey&quot;);\r\n        someList.add(&quot;donkey&quot;);\r\n        someList.add(&quot;skeleton key&quot;);\r\n\r\n        // Iteration using For Each loop\r\n        System.out.println(&quot;Iteration using a For Each loop:&quot;);\r\n        for (String item : someList) {\r\n          System.out.println(item);\r\n        }\r\n\r\n        // Iteration using a normal For loop\r\n        System.out.println(&quot;\\nIteration using normal For loop: &quot;);\r\n        for (int index = 0; index &lt; someList.size(); index++) {\r\n          System.out.println(someList.get(index));\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>The code would be:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class ForLoopDemo {\n\n  public static void main(String[] args) {\n\n    List&lt;String&gt; someList = new ArrayList&lt;String&gt;();\n\n    someList.add(&quot;monkey&quot;);\n    someList.add(&quot;donkey&quot;);\n    someList.add(&quot;skeleton key&quot;);\n\n    // Iteration using For Each loop\n    System.out.println(&quot;Iteration using a For Each loop:&quot;);\n    for (String item : someList) {\n      System.out.println(item);\n    }\n\n    // Iteration using a normal For loop\n    System.out.println(&quot;\\nIteration using normal For loop: &quot;);\n    for (int index = 0; index &lt; someList.size(); index++) {\n      System.out.println(someList.get(index));\n    }\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":3,"creation_date":1645373454,"post_id":71194990,"comment_id":125848840,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/71194990/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":7738831,"reputation":29,"user_id":9877306,"display_name":"IsraelCena"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649887779,"creation_date":1645364547,"answer_id":71194990,"question_id":85190,"body_markdown":"Using *forEach*:\r\n\r\n```java\r\nint[] numbers = {1,2,3,4,5};\r\n\r\nArrays.stream(numbers).forEach(System.out::println);\r\n```\r\n\r\nResponse:\r\n\r\n```lang-none\r\n1\r\n2\r\n3\r\n4\r\n5\r\n\r\nThe process finished with exit code 0\r\n```\r\n\r\nPS: You need a Array (`int[] numbers`), and `import java.util.Arrays;`\r\n\r\n\r\n\r\n","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>Using <em>forEach</em>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] numbers = {1,2,3,4,5};\n\nArrays.stream(numbers).forEach(System.out::println);\n</code></pre>\n<p>Response:</p>\n<pre class=\"lang-none prettyprint-override\"><code>1\n2\n3\n4\n5\n\nThe process finished with exit code 0\n</code></pre>\n<p>PS: You need a Array (<code>int[] numbers</code>), and <code>import java.util.Arrays;</code></p>\n"}],"owner":{"account_id":3517,"reputation":31981,"user_id":5074,"accept_rate":78,"display_name":"Jay R."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2919572,"favorite_count":0,"down_vote_count":12,"up_vote_count":1731,"accepted_answer_id":85206,"answer_count":29,"score":1719,"last_activity_date":1697225111,"creation_date":1221669872,"question_id":85190,"body_markdown":"Consider:\r\n&lt;!-- language-all: java --&gt;\r\n\r\n    List&lt;String&gt; someList = new ArrayList&lt;&gt;();\r\n    // add &quot;monkey&quot;, &quot;donkey&quot;, &quot;skeleton key&quot; to someList\r\n\r\n&lt;!-- --&gt;\r\n\r\n    for (String item : someList) {\r\n        System.out.println(item);\r\n    }\r\n\r\nWhat would the equivalent `for` loop look like without using the *for each* syntax?\r\n\r\n----\r\n\r\n&lt;sub&gt;People new to Java commonly encounter issues when trying to *modify the original data* using the new style foreach loop. Use https://stackoverflow.com/questions/15844443 to close duplicates about that common problem. Note that other languages with analogous constructs generally have the same issue; for example, see https://stackoverflow.com/questions/15363138 for the same issue in Python.&lt;/sub&gt;","title":"In detail, how does the &#39;for each&#39; loop work in Java?","body":"<p>Consider:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; someList = new ArrayList&lt;&gt;();\n// add &quot;monkey&quot;, &quot;donkey&quot;, &quot;skeleton key&quot; to someList\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>for (String item : someList) {\n    System.out.println(item);\n}\n</code></pre>\n<p>What would the equivalent <code>for</code> loop look like without using the <em>for each</em> syntax?</p>\n<hr />\n<p><sub>People new to Java commonly encounter issues when trying to <em>modify the original data</em> using the new style foreach loop. Use <a href=\"https://stackoverflow.com/questions/15844443\">Why doesn&#39;t assigning to the iteration variable in a foreach loop change the underlying data?</a> to close duplicates about that common problem. Note that other languages with analogous constructs generally have the same issue; for example, see <a href=\"https://stackoverflow.com/questions/15363138\">Why doesn&#39;t modifying the iteration variable affect subsequent iterations?</a> for the same issue in Python.</sub></p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697224881,"creation_date":1697191242,"answer_id":77286808,"question_id":77284333,"body_markdown":"The binary name is stored in the class file. From [&#167;4.1 The `ClassFile` Structure][1] of the _Java Virtual Machine Specification_ (JVMS), you can see the following item:\r\n\r\n&gt; `this_class`\r\n&gt;\r\n&gt; The value of the `this_class` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Class_info` structure (&#167;4.4.1) representing the class or interface defined by this `class` file.\r\n\r\nAnd from [&#167;4.4.1 The `CONSTANT_Class_info` Structure][2] of the JVMS:\r\n\r\n&gt; The `CONSTANT_Class_info` structure is used to represent a class or an interface:\r\n&gt;\r\n&gt; ```none\r\n&gt; CONSTANT_Class_info {\r\n&gt;     u1 tag;\r\n&gt;     u2 name_index;\r\n&gt; }\r\n&gt; ```\r\n&gt; The items of the `CONSTANT_Class_info` structure are as follows:\r\n&gt;\r\n&gt; `tag`\r\n&gt;\r\n&gt; The tag item has the value `CONSTANT_Class` (7).\r\n&gt;\r\n&gt; `name_index`\r\n&gt;\r\n&gt; The value of the `name_index` item must be a valid index into the `constant_pool` table. The `constant_pool` entry at that index must be a `CONSTANT_Utf8_info` structure (&#167;4.4.7) representing a valid binary class or interface name encoded in internal form (&#167;4.2.1).\r\n&gt;\r\n&gt; _[...]_\r\n\r\nSo, you do not need to separately send the name of the class alongside the class file.\r\n\r\nIf this is related to class loading, note a `ClassLoader` accepts a binary name and then tries to load the corresponding class, not the other way around. And unless you&#39;re working with reflection the name is automatically given to the class loader; you don&#39;t need to know it ahead of time. Otherwise, if you are just trying to get the binary name from the class file, then you can study the specification linked above to manually parse the class file. But it would probably be much easier to use an existing library, such as _ASM_, _Javassist_, _Byte Buddy_, and so on. With [JEP 457: Class-File API (Preview)][3], there might eventually be a standard API provided by Java itself.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.1\r\n  [2]: https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.4.1\r\n  [3]: https://openjdk.org/jeps/457","title":"Is it possible to get the binary name of a class from the raw bytes of the class alone?","body":"<p>The binary name is stored in the class file. From <a href=\"https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.1\" rel=\"nofollow noreferrer\">§4.1 The <code>ClassFile</code> Structure</a> of the <em>Java Virtual Machine Specification</em> (JVMS), you can see the following item:</p>\n<blockquote>\n<p><code>this_class</code></p>\n<p>The value of the <code>this_class</code> item must be a valid index into the <code>constant_pool</code> table. The <code>constant_pool</code> entry at that index must be a <code>CONSTANT_Class_info</code> structure (§4.4.1) representing the class or interface defined by this <code>class</code> file.</p>\n</blockquote>\n<p>And from <a href=\"https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.4.1\" rel=\"nofollow noreferrer\">§4.4.1 The <code>CONSTANT_Class_info</code> Structure</a> of the JVMS:</p>\n<blockquote>\n<p>The <code>CONSTANT_Class_info</code> structure is used to represent a class or an interface:</p>\n<pre class=\"lang-none prettyprint-override\"><code>CONSTANT_Class_info {\n    u1 tag;\n    u2 name_index;\n}\n</code></pre>\n<p>The items of the <code>CONSTANT_Class_info</code> structure are as follows:</p>\n<p><code>tag</code></p>\n<p>The tag item has the value <code>CONSTANT_Class</code> (7).</p>\n<p><code>name_index</code></p>\n<p>The value of the <code>name_index</code> item must be a valid index into the <code>constant_pool</code> table. The <code>constant_pool</code> entry at that index must be a <code>CONSTANT_Utf8_info</code> structure (§4.4.7) representing a valid binary class or interface name encoded in internal form (§4.2.1).</p>\n<p><em>[...]</em></p>\n</blockquote>\n<p>So, you do not need to separately send the name of the class alongside the class file.</p>\n<p>If this is related to class loading, note a <code>ClassLoader</code> accepts a binary name and then tries to load the corresponding class, not the other way around. And unless you're working with reflection the name is automatically given to the class loader; you don't need to know it ahead of time. Otherwise, if you are just trying to get the binary name from the class file, then you can study the specification linked above to manually parse the class file. But it would probably be much easier to use an existing library, such as <em>ASM</em>, <em>Javassist</em>, <em>Byte Buddy</em>, and so on. With <a href=\"https://openjdk.org/jeps/457\" rel=\"nofollow noreferrer\">JEP 457: Class-File API (Preview)</a>, there might eventually be a standard API provided by Java itself.</p>\n"}],"owner":{"account_id":166796,"reputation":72317,"user_id":391161,"accept_rate":63,"display_name":"merlin2011"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77286808,"answer_count":1,"score":0,"last_activity_date":1697224881,"creation_date":1697153615,"question_id":77284333,"body_markdown":"Suppose I have a class file such as `Foo.class` or `Foo$Bar.class`, compiled from the following java source file:\r\n\r\n```\r\npackage com.foo.bar;\r\npublic class Foo {\r\n  class Bar {\r\n  }\r\n}\r\n```\r\n\r\n**Is it possible to analyze the bytes in the class and determine that the binary name of the class should be `com.foo.bar.Foo`?**\r\n\r\nI&#39;m sending classes over a network and I am trying to determine whether the bytes are sufficient or I also need to somehow pre-determine and send the binary names as well.","title":"Is it possible to get the binary name of a class from the raw bytes of the class alone?","body":"<p>Suppose I have a class file such as <code>Foo.class</code> or <code>Foo$Bar.class</code>, compiled from the following java source file:</p>\n<pre><code>package com.foo.bar;\npublic class Foo {\n  class Bar {\n  }\n}\n</code></pre>\n<p><strong>Is it possible to analyze the bytes in the class and determine that the binary name of the class should be <code>com.foo.bar.Foo</code>?</strong></p>\n<p>I'm sending classes over a network and I am trying to determine whether the bytes are sufficient or I also need to somehow pre-determine and send the binary names as well.</p>\n"},{"tags":["java","spring","string","jwt","token"],"comments":[{"owner":{"account_id":19670013,"reputation":193,"user_id":14399455,"display_name":"wishyouwerehere"},"score":0,"creation_date":1615304655,"post_id":66549737,"comment_id":117646695,"body_markdown":"I believe I have written all the code possible to make the question clear","body":"I believe I have written all the code possible to make the question clear"},{"owner":{"account_id":1449510,"reputation":48182,"user_id":1366871,"accept_rate":100,"display_name":"dreamcrash"},"score":0,"creation_date":1615305188,"post_id":66549737,"comment_id":117646983,"body_markdown":"Okey fair enough","body":"Okey fair enough"}],"answers":[{"comments":[{"owner":{"account_id":154192,"reputation":3472,"user_id":369946,"accept_rate":75,"display_name":"Matt"},"score":2,"creation_date":1662540832,"post_id":66550137,"comment_id":130026874,"body_markdown":"This won&#39;t work because `parseClaimsJws` will throw `io.jsonwebtoken.ExpiredJwtException` before you get a chance to extract the expiration date.\nYou&#39;ll still have to catch the exception.","body":"This won&#39;t work because <code>parseClaimsJws</code> will throw <code>io.jsonwebtoken.ExpiredJwtException</code> before you get a chance to extract the expiration date. You&#39;ll still have to catch the exception."}],"tags":[],"owner":{"account_id":5783334,"reputation":360,"user_id":4563347,"display_name":"Mohit Sharma"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1623957942,"creation_date":1615304743,"answer_id":66550137,"question_id":66549737,"body_markdown":"This can be achieved by using claims. Below sample code can help.\r\n\r\n    // Get Expiration and compare it with new Date()\r\n\r\n\tpublic boolean isTokenExpired(String token) {\r\n\t\treturn extractExpiration(token).before(new Date());\r\n\t}\r\n\r\n\r\n    public Date extractExpiration(String token) {\r\n        return extractClaim(token, Claims::getExpiration);\r\n    }\r\n\r\n\r\n    public &lt;T&gt; T extractClaim(String token , Function&lt;Claims, T&gt; claimResolver) {\r\n        final Claims claim= extractAllClaims(token);\r\n        return claimResolver.apply(claim);\r\n    }\r\n\r\n\r\n    private Claims extractAllClaims(String token) {\r\n        return Jwts.parser().setSigningKey(SECRET_KEY).parseClaimsJws(token).getBody();\r\n    }\r\n","title":"How to check if a JWT Token has expired without throw exceptions?","body":"<p>This can be achieved by using claims. Below sample code can help.</p>\n<pre><code>// Get Expiration and compare it with new Date()\n\npublic boolean isTokenExpired(String token) {\n    return extractExpiration(token).before(new Date());\n}\n\n\npublic Date extractExpiration(String token) {\n    return extractClaim(token, Claims::getExpiration);\n}\n\n\npublic &lt;T&gt; T extractClaim(String token , Function&lt;Claims, T&gt; claimResolver) {\n    final Claims claim= extractAllClaims(token);\n    return claimResolver.apply(claim);\n}\n\n\nprivate Claims extractAllClaims(String token) {\n    return Jwts.parser().setSigningKey(SECRET_KEY).parseClaimsJws(token).getBody();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"comment_count":0,"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1615305447,"creation_date":1615305447,"answer_id":66550344,"question_id":66549737,"body_markdown":"If you use a different JWT library, you can do it easily enough.  The [auth0 JWT library](https://github.com/auth0/java-jwt) has methods to parse and, optionally, verify the token:\r\n\r\n    import com.auth0.jwt.JWT;\r\n    import com.auth0.jwt.exceptions.JWTDecodeException;\r\n    import com.auth0.jwt.interfaces.DecodedJWT;\r\n    \r\n    \r\n    DecodedJWT jwt = JWT.decode(token);\r\n    if( jwt.getExpiresAt().before(new Date())) {\r\n        System.out.println(&quot;token is expired&quot;);\r\n    }\r\n\r\n","title":"How to check if a JWT Token has expired without throw exceptions?","body":"<p>If you use a different JWT library, you can do it easily enough.  The <a href=\"https://github.com/auth0/java-jwt\" rel=\"noreferrer\">auth0 JWT library</a> has methods to parse and, optionally, verify the token:</p>\n<pre><code>import com.auth0.jwt.JWT;\nimport com.auth0.jwt.exceptions.JWTDecodeException;\nimport com.auth0.jwt.interfaces.DecodedJWT;\n\n\nDecodedJWT jwt = JWT.decode(token);\nif( jwt.getExpiresAt().before(new Date())) {\n    System.out.println(&quot;token is expired&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7594758,"reputation":8039,"user_id":5761243,"display_name":"Muhammed Fasil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672044548,"creation_date":1672044548,"answer_id":74918663,"question_id":66549737,"body_markdown":"For this you can create another class for handling the token validation like below, in the class you will handle the ExpiredJwtException and give the extracted value back , other exceptions will throw it from the class\r\n \r\n\r\n    public class TokenValidator {\r\n        Boolean tokenExpired = true;\r\n        public boolean isTokenValid(String token) throws Exception {\r\n            validateToken(token);\r\n            return tokenExpired;\r\n        }\r\n    \r\n        public Map&lt;String,String&gt; getExtractedData(String token) throws Exception {\r\n            return validateToken(token);\r\n        }\r\n    \r\n        private Map&lt;String, String&gt; validateToken (String token) throws Exception{\r\n            try {\r\n                Claims claims = Jwts.parser().setSigningKey(&quot;jwtSecretKey&quot;)\r\n                        .parseClaimsJws(token).getBody();\r\n                tokenExpired = false;\r\n                return getClaimsInMap(claims);\r\n            } catch (ExpiredJwtException ex) {\r\n                DefaultClaims claims = (DefaultClaims) ex.getClaims();\r\n                return getClaimsInMap(claims);\r\n            } catch (Exception e) {\r\n                throw new Exception(e);\r\n            }\r\n        }\r\n        private Map&lt;String,String&gt; getClaimsInMap(Claims claims) {\r\n            Map&lt;String,String&gt; expectedMap = new HashMap&lt;&gt;();\r\n            claims.entrySet().stream().forEach(entry -&gt; expectedMap.put(entry.getKey(),entry.getValue().toString()));\r\n            return expectedMap;\r\n        }\r\n    }\r\n\r\n","title":"How to check if a JWT Token has expired without throw exceptions?","body":"<p>For this you can create another class for handling the token validation like below, in the class you will handle the ExpiredJwtException and give the extracted value back , other exceptions will throw it from the class</p>\n<pre><code>public class TokenValidator {\n    Boolean tokenExpired = true;\n    public boolean isTokenValid(String token) throws Exception {\n        validateToken(token);\n        return tokenExpired;\n    }\n\n    public Map&lt;String,String&gt; getExtractedData(String token) throws Exception {\n        return validateToken(token);\n    }\n\n    private Map&lt;String, String&gt; validateToken (String token) throws Exception{\n        try {\n            Claims claims = Jwts.parser().setSigningKey(&quot;jwtSecretKey&quot;)\n                    .parseClaimsJws(token).getBody();\n            tokenExpired = false;\n            return getClaimsInMap(claims);\n        } catch (ExpiredJwtException ex) {\n            DefaultClaims claims = (DefaultClaims) ex.getClaims();\n            return getClaimsInMap(claims);\n        } catch (Exception e) {\n            throw new Exception(e);\n        }\n    }\n    private Map&lt;String,String&gt; getClaimsInMap(Claims claims) {\n        Map&lt;String,String&gt; expectedMap = new HashMap&lt;&gt;();\n        claims.entrySet().stream().forEach(entry -&gt; expectedMap.put(entry.getKey(),entry.getValue().toString()));\n        return expectedMap;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17524302,"reputation":1,"user_id":12709686,"display_name":"One_Two"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686205565,"creation_date":1686205565,"answer_id":76429125,"question_id":66549737,"body_markdown":"Maybe you can create additional util method like this:\r\n\r\n    public boolean isTokenExpired(String token) {\r\n        try {\r\n            return getExpirationDateFromToken(token).before(new Date());\r\n        } catch (ExpiredJwtException e) {\r\n            return true;\r\n        }\r\n    }","title":"How to check if a JWT Token has expired without throw exceptions?","body":"<p>Maybe you can create additional util method like this:</p>\n<pre><code>public boolean isTokenExpired(String token) {\n    try {\n        return getExpirationDateFromToken(token).before(new Date());\n    } catch (ExpiredJwtException e) {\n        return true;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11524278,"reputation":15,"user_id":8445217,"display_name":"Khayelihle Ndumiso"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697224672,"creation_date":1697224672,"answer_id":77290187,"question_id":66549737,"body_markdown":"This what helped me [token has expired][1]\r\n\r\n    jwtToken = authHeader.substring(7);\r\n        try {\r\n            userEmail = jwtService.extractUsername(jwtToken); //extract user email from JWT token\r\n            if(userEmail != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null){\r\n                UserDetails userDetails = this.userDetailsService.loadUserByUsername(userEmail);\r\n                if(jwtService.isTokenValid(jwtToken, userDetails)){\r\n                    UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\r\n                            userDetails,\r\n                            null,\r\n                            userDetails.getAuthorities()\r\n                    );\r\n                    authToken.setDetails(\r\n                            new WebAuthenticationDetailsSource().buildDetails(request)\r\n                    );\r\n                    SecurityContextHolder.getContext().setAuthentication(authToken);\r\n                }\r\n            }\r\n            filterChain.doFilter(request, response);\r\n        } catch (ExpiredJwtException eje) {\r\n            log.info(&quot;Security exception for user {} - {}&quot;,\r\n                    eje.getClaims().getSubject(), eje.getMessage());\r\n\r\n            log.trace(&quot;Security exception trace: {}&quot;, eje);\r\n            ((HttpServletResponse) response).setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n        }\r\n\r\n\r\n  [1]: https://www.programcreek.com/java-api-examples/?api=io.jsonwebtoken.ExpiredJwtException","title":"How to check if a JWT Token has expired without throw exceptions?","body":"<p>This what helped me <a href=\"https://www.programcreek.com/java-api-examples/?api=io.jsonwebtoken.ExpiredJwtException\" rel=\"nofollow noreferrer\">token has expired</a></p>\n<pre><code>jwtToken = authHeader.substring(7);\n    try {\n        userEmail = jwtService.extractUsername(jwtToken); //extract user email from JWT token\n        if(userEmail != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null){\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(userEmail);\n            if(jwtService.isTokenValid(jwtToken, userDetails)){\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\n                        userDetails,\n                        null,\n                        userDetails.getAuthorities()\n                );\n                authToken.setDetails(\n                        new WebAuthenticationDetailsSource().buildDetails(request)\n                );\n                SecurityContextHolder.getContext().setAuthentication(authToken);\n            }\n        }\n        filterChain.doFilter(request, response);\n    } catch (ExpiredJwtException eje) {\n        log.info(&quot;Security exception for user {} - {}&quot;,\n                eje.getClaims().getSubject(), eje.getMessage());\n\n        log.trace(&quot;Security exception trace: {}&quot;, eje);\n        ((HttpServletResponse) response).setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n    }\n</code></pre>\n"}],"owner":{"account_id":19670013,"reputation":193,"user_id":14399455,"display_name":"wishyouwerehere"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30520,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":66550344,"answer_count":5,"score":10,"last_activity_date":1697224672,"creation_date":1615303358,"question_id":66549737,"body_markdown":"I&#39;m developing a Java application (using Spring Boot) and I need some help:\r\nThis application receives as input a **JWT token** which I process in a method. The method for now is the following:\r\n\r\n\tprivate UsernamePasswordAuthenticationToken myMethod(HttpServletRequest request) {\r\n\t\t\r\n\t\t// Code that gets the &#39;token&#39; String\r\n\r\n\t\ttry{\r\n\t\t\r\n\t\tMap&lt;String, String&gt; registry = ((Map&lt;String, String&gt;) (token.getBody().get(&quot;registry&quot;)));\r\n\t\tString sub = ((String) (parsedToken.getBody().get(&quot;sub&quot;)));\r\n\r\n\r\n\t\tUsernamePasswordAuthenticationToken finalToken = new UsernamePasswordAuthenticationToken(sub, null, null);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\r\n\t\treturn finalToken; \r\n\r\n\t\t\t\t\r\n\t\t} catch (ExpiredJwtException exception) { // Only here I have the certainty that the token has expired!\r\n\t\t\t\t// Code that handles the exception\r\n\t\t}\r\n\r\n}\r\n\r\nHowever, I need to implement a logic that must check in several places whether the token obtained has expired or not, **without running this method every time**. The only way I have to know if `token` has expired is the exception raised by `ExpiredJwtException`.\r\n\r\nIs there any way to know **if the token has expired without going through the catched exception**? For example, it would be very useful if there was a &quot;token&quot; class that has an `.isExpired` attribute, or something like that.\r\n\r\nI don&#39;t want to go into handling the exception because it means that I would always depend on the (long) code of the `try` block every time I need to check if a token has expired or not, and I don&#39;t want it to be.\r\n\r\n","title":"How to check if a JWT Token has expired without throw exceptions?","body":"<p>I'm developing a Java application (using Spring Boot) and I need some help:\nThis application receives as input a <strong>JWT token</strong> which I process in a method. The method for now is the following:</p>\n<pre><code>private UsernamePasswordAuthenticationToken myMethod(HttpServletRequest request) {\n    \n    // Code that gets the 'token' String\n\n    try{\n    \n    Map&lt;String, String&gt; registry = ((Map&lt;String, String&gt;) (token.getBody().get(&quot;registry&quot;)));\n    String sub = ((String) (parsedToken.getBody().get(&quot;sub&quot;)));\n\n\n    UsernamePasswordAuthenticationToken finalToken = new UsernamePasswordAuthenticationToken(sub, null, null);\n                            \n            \n    return finalToken; \n\n            \n    } catch (ExpiredJwtException exception) { // Only here I have the certainty that the token has expired!\n            // Code that handles the exception\n    }\n</code></pre>\n<p>}</p>\n<p>However, I need to implement a logic that must check in several places whether the token obtained has expired or not, <strong>without running this method every time</strong>. The only way I have to know if <code>token</code> has expired is the exception raised by <code>ExpiredJwtException</code>.</p>\n<p>Is there any way to know <strong>if the token has expired without going through the catched exception</strong>? For example, it would be very useful if there was a &quot;token&quot; class that has an <code>.isExpired</code> attribute, or something like that.</p>\n<p>I don't want to go into handling the exception because it means that I would always depend on the (long) code of the <code>try</code> block every time I need to check if a token has expired or not, and I don't want it to be.</p>\n"},{"tags":["java","android","firebase-authentication"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697231971,"post_id":77289892,"comment_id":136259011,"body_markdown":"`getText().toString()` is double talk. It’s already a `String`.","body":"<code>getText().toString()</code> is double talk. It’s already a <code>String</code>."},{"owner":{"account_id":26875236,"reputation":13,"user_id":20456581,"display_name":"Nebobrod"},"score":0,"creation_date":1697252063,"post_id":77289892,"comment_id":136260249,"body_markdown":"@user207421 at this particular example you maybe right but strictly saying `getText()` returns an `Editable` what is not exactly the `String`. [Here is details](https://stackoverflow.com/a/31169001/20456581).","body":"@user207421 at this particular example you maybe right but strictly saying <code>getText()</code> returns an <code>Editable</code> what is not exactly the <code>String</code>. <a href=\"https://stackoverflow.com/a/31169001/20456581\">Here is details</a>."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697363032,"post_id":77289892,"comment_id":136268265,"body_markdown":"If there had been any information in your post that you were using `Editable` you might have a point.","body":"If there had been any information in your post that you were using <code>Editable</code> you might have a point."}],"answers":[{"comments":[{"owner":{"account_id":26875236,"reputation":13,"user_id":20456581,"display_name":"Nebobrod"},"score":0,"creation_date":1697251368,"post_id":77290095,"comment_id":136260222,"body_markdown":"Wow, @marcin-orlowski that&#39;s exactly I was looking for -- the _strange_ behaviour of `name`. (Of course I&#39;d better to avoid that _strange_ `resMessage[0]` but it&#39;s already another question). Thanks!","body":"Wow, @marcin-orlowski that&#39;s exactly I was looking for -- the <i>strange</i> behaviour of <code>name</code>. (Of course I&#39;d better to avoid that <i>strange</i> <code>resMessage[0]</code> but it&#39;s already another question). Thanks!"}],"tags":[],"owner":{"account_id":1281728,"reputation":73134,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697223841,"creation_date":1697223417,"answer_id":77290095,"question_id":77289892,"body_markdown":"You&#39;re getting the compiler error for `resMessage` because you&#39;re modifying it within the inner class. It needs to be `final` or effectively final (unchanged after initialization) due to how Java&#39;s scoping and lifetime rules work for anonymous inner classes. This is because the inner class instance may outlive the method where it is defined, leading to unpredictable behavior.\r\n\r\nThe `name` variable is not modified within the inner class, so it is effectively final, hence no error.","title":"What the difference to access from inner class or method?","body":"<p>You're getting the compiler error for <code>resMessage</code> because you're modifying it within the inner class. It needs to be <code>final</code> or effectively final (unchanged after initialization) due to how Java's scoping and lifetime rules work for anonymous inner classes. This is because the inner class instance may outlive the method where it is defined, leading to unpredictable behavior.</p>\n<p>The <code>name</code> variable is not modified within the inner class, so it is effectively final, hence no error.</p>\n"}],"owner":{"account_id":26875236,"reputation":13,"user_id":20456581,"display_name":"Nebobrod"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77290095,"answer_count":1,"score":0,"last_activity_date":1697223841,"creation_date":1697220836,"question_id":77289892,"body_markdown":"Hi sorry for may be stupid question I&#39;m just really interested.\r\nThe compiler says \r\n\r\n&gt; Variable &#39;resMessage&#39; is accessed from within inner class, needs to be final or effectively final\r\n\r\nAnd underlines it with red, while its sibling &#39;name&#39; lives and works fine. Why is that?\r\n\r\n\r\n```\r\nbtGoOn.setOnClickListener(new View.OnClickListener() {\r\n\t@Override\r\n\tpublic void onClick(View view) {\r\n\t\tString resMessage = &quot;&quot;;\r\n\t\tString email = etEmail.getText().toString().trim();\r\n\t\tString name = etName.getText().toString().trim();\r\n\t\tString name1 = etName.getText().toString().trim();\r\n\t\tString password = etPassword.getText().toString().trim();\r\n\t\t\t\r\n\t\tif (!validateEmail() | !validateName() | !validatePassword()){\r\n\t\t\t// do nothing (input errors are handled in validation functions\r\n\t\t} else\t{\r\n\t\t\tauth.createUserWithEmailAndPassword(email, password).addOnCompleteListener(new OnCompleteListener&lt;AuthResult&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onComplete(@NonNull Task&lt;AuthResult&gt; taskAddUser) {\r\n\t\t\t\t\tif (taskAddUser.isSuccessful()) {\r\n\t\t\t\t\t\tresMessage = name + &quot; &quot; + getString(R.string.msg_user_signed_up);\r\n\t\t\t\t\t\tauth.getCurrentUser().sendEmailVerification().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\tpublic void onComplete(@NonNull Task&lt;Void&gt; taskVerifSent) {\r\n\t\t\t\t\t\t\t\tif (taskVerifSent.isSuccessful()) {\r\n\t\t\t\t\t\t\t\t\tresMessage += &quot; &quot; + getString(R.string.msg_user_verif_sent);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tresMessage += &quot; &quot; + getString(R.string.msg_user_verif_not_sent);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tLog.d(TAG, resMessage);\r\n\t\t\t\t\t\tToast.makeText(SignupActivity.this, resMessage, Toast.LENGTH_SHORT).show();\r\n\r\n\t\t\t\t\t\t// TODO: 12.10.2023 fill with extras...\r\n\t\t\t\t\t\tIntent intent = new Intent(SignupActivity.this, LoginActivity.class);\r\n\t\t\t\t\t\tstartActivity(intent);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresMessage = name + &quot; &quot; + getString(R.string.msg_user_signed_up_failed) + taskAddUser.getException().getMessage();\r\n\t\t\t\t\t\tLog.d(TAG, resMessage);\r\n\t\t\t\t\t\tToast.makeText(SignupActivity.this, resMessage, Toast.LENGTH_LONG).show();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n```\r\n\r\nThis &#39;resMessage&#39; variables were just temporary sacks for gathering text, so when I tried to make one at the level of common block (btGoOn.setOnClickListener) I&#39;ve got this error.\r\n\r\nYes, I made web search and [this is a most close question](https://stackoverflow.com/questions/76497086/why-compiler-forces-to-use-atomic-variable-inside-foreach-loop-in-java) -- I might get the same if I went to lambda-expressions (but I didn&#39;t). And there are some advices to move the variable on the top level of class&#39;s fields. huh this is not a field this is just temporary sack!.\r\nAlso I may accept the Android Studio offer and switch to such I&#39;d say ugly code:\r\n\r\n```\r\nfinal String[] resMessage = {&quot;&quot;};\r\n...\r\n\tresMessage[0] = name + &quot; &quot; + getString(R.string.msg_user_signed_up);\r\n//...\r\n\tLog.d(TAG, resMessage[0]);\r\n\tToast.makeText(SignupActivity.this, resMessage[0], Toast.LENGTH_SHORT).show();\r\n```\r\nBut why the compiler disallows one variable and allow another**?\r\n","title":"What the difference to access from inner class or method?","body":"<p>Hi sorry for may be stupid question I'm just really interested.\nThe compiler says</p>\n<blockquote>\n<p>Variable 'resMessage' is accessed from within inner class, needs to be final or effectively final</p>\n</blockquote>\n<p>And underlines it with red, while its sibling 'name' lives and works fine. Why is that?</p>\n<pre><code>btGoOn.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        String resMessage = &quot;&quot;;\n        String email = etEmail.getText().toString().trim();\n        String name = etName.getText().toString().trim();\n        String name1 = etName.getText().toString().trim();\n        String password = etPassword.getText().toString().trim();\n            \n        if (!validateEmail() | !validateName() | !validatePassword()){\n            // do nothing (input errors are handled in validation functions\n        } else  {\n            auth.createUserWithEmailAndPassword(email, password).addOnCompleteListener(new OnCompleteListener&lt;AuthResult&gt;() {\n                @Override\n                public void onComplete(@NonNull Task&lt;AuthResult&gt; taskAddUser) {\n                    if (taskAddUser.isSuccessful()) {\n                        resMessage = name + &quot; &quot; + getString(R.string.msg_user_signed_up);\n                        auth.getCurrentUser().sendEmailVerification().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                            @Override\n                            public void onComplete(@NonNull Task&lt;Void&gt; taskVerifSent) {\n                                if (taskVerifSent.isSuccessful()) {\n                                    resMessage += &quot; &quot; + getString(R.string.msg_user_verif_sent);\n                                } else {\n                                    resMessage += &quot; &quot; + getString(R.string.msg_user_verif_not_sent);\n                                }\n                            }\n                        });\n\n                        Log.d(TAG, resMessage);\n                        Toast.makeText(SignupActivity.this, resMessage, Toast.LENGTH_SHORT).show();\n\n                        // TODO: 12.10.2023 fill with extras...\n                        Intent intent = new Intent(SignupActivity.this, LoginActivity.class);\n                        startActivity(intent);\n                    } else {\n                        resMessage = name + &quot; &quot; + getString(R.string.msg_user_signed_up_failed) + taskAddUser.getException().getMessage();\n                        Log.d(TAG, resMessage);\n                        Toast.makeText(SignupActivity.this, resMessage, Toast.LENGTH_LONG).show();\n                    }\n                }\n            });\n        }\n    }\n});\n</code></pre>\n<p>This 'resMessage' variables were just temporary sacks for gathering text, so when I tried to make one at the level of common block (btGoOn.setOnClickListener) I've got this error.</p>\n<p>Yes, I made web search and <a href=\"https://stackoverflow.com/questions/76497086/why-compiler-forces-to-use-atomic-variable-inside-foreach-loop-in-java\">this is a most close question</a> -- I might get the same if I went to lambda-expressions (but I didn't). And there are some advices to move the variable on the top level of class's fields. huh this is not a field this is just temporary sack!.\nAlso I may accept the Android Studio offer and switch to such I'd say ugly code:</p>\n<pre><code>final String[] resMessage = {&quot;&quot;};\n...\n    resMessage[0] = name + &quot; &quot; + getString(R.string.msg_user_signed_up);\n//...\n    Log.d(TAG, resMessage[0]);\n    Toast.makeText(SignupActivity.this, resMessage[0], Toast.LENGTH_SHORT).show();\n</code></pre>\n<p>But why the compiler disallows one variable and allow another**?</p>\n"},{"tags":["java","configuration","import","intellij-idea","gradle"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":1,"creation_date":1404685006,"post_id":24600804,"comment_id":38116014,"body_markdown":"Look at the dependencies and artifacts of your IDEA project.","body":"Look at the dependencies and artifacts of your IDEA project."},{"owner":{"account_id":1908298,"reputation":1569,"user_id":1722719,"accept_rate":92,"display_name":"jzahedieh"},"score":0,"creation_date":1427718405,"post_id":24600804,"comment_id":46878278,"body_markdown":"possible duplicate of [How do I get IntelliJ to resolve Gradle dependencies for custom source sets?](http://stackoverflow.com/questions/24538929/how-do-i-get-intellij-to-resolve-gradle-dependencies-for-custom-source-sets)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/24538929/how-do-i-get-intellij-to-resolve-gradle-dependencies-for-custom-source-sets\">How do I get IntelliJ to resolve Gradle dependencies for custom source sets?</a>"},{"owner":{"account_id":1908298,"reputation":1569,"user_id":1722719,"accept_rate":92,"display_name":"jzahedieh"},"score":0,"creation_date":1427718466,"post_id":24600804,"comment_id":46878319,"body_markdown":"There is an &quot;idea&quot; plugin for gradle, see the question linked above","body":"There is an &quot;idea&quot; plugin for gradle, see the question linked above"}],"answers":[{"comments":[{"owner":{"account_id":688414,"reputation":82638,"user_id":542270,"accept_rate":86,"display_name":"Opal"},"score":0,"creation_date":1404724675,"post_id":24601196,"comment_id":38127833,"body_markdown":"Not sure if understood well but importing gradle project into IntelliJ works pretty fine - using of gradle wrapper is recommended.","body":"Not sure if understood well but importing gradle project into IntelliJ works pretty fine - using of gradle wrapper is recommended."},{"owner":{"account_id":71866,"reputation":13847,"user_id":207716,"accept_rate":100,"display_name":"jk."},"score":62,"creation_date":1413818552,"post_id":24601196,"comment_id":41576032,"body_markdown":"doesn&#39;t this pretty much negate the whole point of using gradle?","body":"doesn&#39;t this pretty much negate the whole point of using gradle?"},{"owner":{"account_id":408586,"reputation":5227,"user_id":779348,"accept_rate":82,"display_name":"Sap"},"score":1,"creation_date":1431949531,"post_id":24601196,"comment_id":48700257,"body_markdown":"This link solved the same problelm i was having https://www.jetbrains.com/idea/help/synchronizing-changes-in-gradle-project-and-intellij-idea-project.html","body":"This link solved the same problelm i was having <a href=\"https://www.jetbrains.com/idea/help/synchronizing-changes-in-gradle-project-and-intellij-idea-project.html\" rel=\"nofollow noreferrer\">jetbrains.com/idea/help/&hellip;</a>"},{"owner":{"account_id":3049336,"reputation":1504,"user_id":2584278,"accept_rate":88,"display_name":"Faber"},"score":0,"creation_date":1456577010,"post_id":24601196,"comment_id":59018893,"body_markdown":"This was the only solution/description that worked for me (IntelliJ 14.1.2): http://stackoverflow.com/a/31195053/2584278","body":"This was the only solution/description that worked for me (IntelliJ 14.1.2): <a href=\"http://stackoverflow.com/a/31195053/2584278\">stackoverflow.com/a/31195053/2584278</a>"}],"tags":[],"owner":{"account_id":300494,"reputation":13934,"user_id":607655,"accept_rate":81,"display_name":"Meng Lu"},"comment_count":4,"down_vote_count":5,"up_vote_count":5,"is_accepted":true,"score":0,"last_activity_date":1404772906,"creation_date":1404688361,"answer_id":24601196,"question_id":24600804,"body_markdown":"It turns out that the depended packages need to be separately specified in IntelliJ IDEA in addition to `build.gradle` and explicitly added as a dependency. Namely, \r\n\r\n 1. download the `com.google.guava` package following [the instruction in documentation](http://www.jetbrains.com/idea/webhelp/downloading-libraries-from-maven-repositories.html) -- I picked `com.google.guava:guava-base:r03` to download\r\n 2. follow the automatically-prompted window to add it as a project library to the Java project.\r\n 3. Specify that the Java module depends on the `com.google.guava` package in the project settings. See the documentation instruction [&quot;Configuring Module Dependencies and Libraries&quot;](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html).","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>It turns out that the depended packages need to be separately specified in IntelliJ IDEA in addition to <code>build.gradle</code> and explicitly added as a dependency. Namely, </p>\n\n<ol>\n<li>download the <code>com.google.guava</code> package following <a href=\"http://www.jetbrains.com/idea/webhelp/downloading-libraries-from-maven-repositories.html\" rel=\"nofollow\">the instruction in documentation</a> -- I picked <code>com.google.guava:guava-base:r03</code> to download</li>\n<li>follow the automatically-prompted window to add it as a project library to the Java project.</li>\n<li>Specify that the Java module depends on the <code>com.google.guava</code> package in the project settings. See the documentation instruction <a href=\"http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html\" rel=\"nofollow\">\"Configuring Module Dependencies and Libraries\"</a>.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":195880,"reputation":1818,"user_id":439034,"accept_rate":61,"display_name":"worldsayshi"},"score":10,"creation_date":1553679458,"post_id":37171674,"comment_id":97470108,"body_markdown":"This did not work for me. Only &quot;Invalidate Caches and Restart&quot; worked.","body":"This did not work for me. Only &quot;Invalidate Caches and Restart&quot; worked."},{"owner":{"account_id":8532978,"reputation":834,"user_id":7260220,"accept_rate":25,"display_name":"nathanfranke"},"score":2,"creation_date":1617600706,"post_id":37171674,"comment_id":118340377,"body_markdown":"^ File dropdown in IntelliJ","body":"^ File dropdown in IntelliJ"}],"tags":[],"owner":{"account_id":1740445,"reputation":1003,"user_id":1592004,"display_name":"forestj"},"comment_count":2,"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1462994796,"creation_date":1462994796,"answer_id":37171674,"question_id":24600804,"body_markdown":"I think user Sap is correct, at least in my case. You should not have to manually add the dependency.\r\n\r\nDid you change the dependencies in the gradle file without syncing intellij? Try this button:\r\n\r\n![screenshot of sync button][1]\r\n\r\nFor more information, see:\r\nhttps://www.jetbrains.com/idea/help/synchronizing-changes-in-gradle-project-and-intellij-idea-project.html\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/CEdum.png","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>I think user Sap is correct, at least in my case. You should not have to manually add the dependency.</p>\n\n<p>Did you change the dependencies in the gradle file without syncing intellij? Try this button:</p>\n\n<p><img src=\"https://i.stack.imgur.com/CEdum.png\" alt=\"screenshot of sync button\"></p>\n\n<p>For more information, see:\n<a href=\"https://www.jetbrains.com/idea/help/synchronizing-changes-in-gradle-project-and-intellij-idea-project.html\" rel=\"noreferrer\">https://www.jetbrains.com/idea/help/synchronizing-changes-in-gradle-project-and-intellij-idea-project.html</a></p>\n"},{"tags":[],"owner":{"account_id":5296021,"reputation":4882,"user_id":4227175,"accept_rate":53,"display_name":"ghchoi"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1562649061,"creation_date":1482890150,"answer_id":41354374,"question_id":24600804,"body_markdown":"Check &lt;a href=&quot;https://www.jetbrains.com/help/idea/2016.1/synchronizing-changes-in-gradle-project-and-intellij-idea-project.html&quot;&gt;this&lt;/a&gt;.\r\n\r\nYou can simply open Gradle tool window at [ `View` ] - [ `Tool Windows` ] - [ `Gradle` ].\r\n\r\nIn the window, you can refresh by clicking refresh button.\r\n\r\nAll dependencies manually added directly into `build.gradle` file will be resolved.","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>Check <a href=\"https://www.jetbrains.com/help/idea/2016.1/synchronizing-changes-in-gradle-project-and-intellij-idea-project.html\" rel=\"noreferrer\">this</a>.</p>\n\n<p>You can simply open Gradle tool window at [ <code>View</code> ] - [ <code>Tool Windows</code> ] - [ <code>Gradle</code> ].</p>\n\n<p>In the window, you can refresh by clicking refresh button.</p>\n\n<p>All dependencies manually added directly into <code>build.gradle</code> file will be resolved.</p>\n"},{"comments":[{"owner":{"account_id":10177931,"reputation":1796,"user_id":7699452,"accept_rate":78,"display_name":"Mathews Sunny"},"score":0,"creation_date":1521461303,"post_id":49362519,"comment_id":85725203,"body_markdown":"Thanks for providing the link","body":"Thanks for providing the link"}],"tags":[],"owner":{"account_id":9184398,"reputation":97,"user_id":6827188,"display_name":"Namita "},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1537875736,"creation_date":1521461008,"answer_id":49362519,"question_id":24600804,"body_markdown":"One of the solutions that worked for me after trying everything listed on the internet to solve this issue was to install the lombok plugin.\r\n\r\nGot to File --&gt; Settings --&gt; Plugins and look for Lombok.\r\n\r\n[Make sure the &quot;Enable annotation processing&quot; is ticked][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ObHxB.png","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>One of the solutions that worked for me after trying everything listed on the internet to solve this issue was to install the lombok plugin.</p>\n\n<p>Got to File --> Settings --> Plugins and look for Lombok.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ObHxB.png\" rel=\"noreferrer\">Make sure the \"Enable annotation processing\" is ticked</a></p>\n"},{"tags":[],"owner":{"account_id":24806,"reputation":1073,"user_id":63302,"display_name":"Udi Meiri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560288178,"creation_date":1560288178,"answer_id":56551833,"question_id":24600804,"body_markdown":"In my case (Apache Beam sources) a `./gradlew clean` was needed.","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>In my case (Apache Beam sources) a <code>./gradlew clean</code> was needed.</p>\n"},{"tags":[],"owner":{"account_id":16466553,"reputation":11,"user_id":11896536,"display_name":"Rahim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574087606,"creation_date":1574087606,"answer_id":58916876,"question_id":24600804,"body_markdown":"In My Case, I&#39;ve Updated the Gradle version(module: project) from 3.2.2 to 3.5.2, and also there was a problem with the NDK file location it was on the wrong path, I&#39;ve just switched it to the default NDK path, then invalidate and restart the project.","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>In My Case, I've Updated the Gradle version(module: project) from 3.2.2 to 3.5.2, and also there was a problem with the NDK file location it was on the wrong path, I've just switched it to the default NDK path, then invalidate and restart the project.</p>\n"},{"tags":[],"owner":{"account_id":8449542,"reputation":181,"user_id":6338832,"display_name":"TGU"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1577962135,"creation_date":1577757390,"answer_id":59538732,"question_id":24600804,"body_markdown":"My Gradle project is using Intellij 2019.2.3, and `File-&gt;Invalid Cache/Restart...` doesn&#39;t work, but `View-&gt;Tool Windows-&gt;Gradle-&gt;sync(the circular icon)` works instantly.","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>My Gradle project is using Intellij 2019.2.3, and <code>File-&gt;Invalid Cache/Restart...</code> doesn't work, but <code>View-&gt;Tool Windows-&gt;Gradle-&gt;sync(the circular icon)</code> works instantly.</p>\n"},{"comments":[{"owner":{"account_id":9324325,"reputation":173,"user_id":6922143,"display_name":"wellthatdidn&#39;twork"},"score":2,"creation_date":1628102285,"post_id":65051455,"comment_id":121334301,"body_markdown":"This was what did it for me too, for those who don&#39;t know, you can find this under\nFile -&gt; Project Structure -&gt; project settings/modules. Then just delete all the modules there.","body":"This was what did it for me too, for those who don&#39;t know, you can find this under File -&gt; Project Structure -&gt; project settings/modules. Then just delete all the modules there."},{"owner":{"account_id":29657,"reputation":707,"user_id":80320,"accept_rate":62,"display_name":"Philip"},"score":0,"creation_date":1645331045,"post_id":65051455,"comment_id":125840866,"body_markdown":"I&#39;ll add the issue for me was that my project had a build.gradle in a subdirectory. It&#39;s an AWS Lambda project created by the wizard that got out of sync and I had to re-import it and separately add the subdirectory as a module.","body":"I&#39;ll add the issue for me was that my project had a build.gradle in a subdirectory. It&#39;s an AWS Lambda project created by the wizard that got out of sync and I had to re-import it and separately add the subdirectory as a module."}],"tags":[],"owner":{"account_id":6752427,"reputation":195,"user_id":5202063,"display_name":"Nikita Koselev"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1606578584,"creation_date":1606578584,"answer_id":65051455,"question_id":24600804,"body_markdown":"What helped me was checking &quot;dependencies&quot; in &quot;project settings/modules&quot; section. Apparently, Idea did not pick up them correctly. \r\n\r\nSteps which worked for me:\r\n1) delete all modules from &quot;project settings/modules&quot; \r\n2) refresh the project from Gradle plugin - that triggers generation of modules\r\n\r\nThis trick helped me to get modules with correct dependencies generated.\r\nProbably it happened because initially, I imported the project as non-Gradle one.\r\n","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>What helped me was checking &quot;dependencies&quot; in &quot;project settings/modules&quot; section. Apparently, Idea did not pick up them correctly.</p>\n<p>Steps which worked for me:</p>\n<ol>\n<li>delete all modules from &quot;project settings/modules&quot;</li>\n<li>refresh the project from Gradle plugin - that triggers generation of modules</li>\n</ol>\n<p>This trick helped me to get modules with correct dependencies generated.\nProbably it happened because initially, I imported the project as non-Gradle one.</p>\n"},{"comments":[{"owner":{"account_id":6018694,"reputation":111,"user_id":4730457,"display_name":"Pink"},"score":1,"creation_date":1636587932,"post_id":68198679,"comment_id":123600620,"body_markdown":"This is the only thing that worked for me with the exception that I didn&#39;t have an idea.system.path directory (v2021.2.1 Ultimate)","body":"This is the only thing that worked for me with the exception that I didn&#39;t have an idea.system.path directory (v2021.2.1 Ultimate)"},{"owner":{"account_id":104555,"reputation":266,"user_id":279478,"accept_rate":100,"display_name":"DannyK"},"score":0,"creation_date":1652352383,"post_id":68198679,"comment_id":127587872,"body_markdown":"Same as @Pink 2021.3.3","body":"Same as @Pink 2021.3.3"},{"owner":{"account_id":1841986,"reputation":580,"user_id":1671221,"display_name":"Manikandan Periyasamy"},"score":0,"creation_date":1658726853,"post_id":68198679,"comment_id":129113377,"body_markdown":"Close Intellij and delete .idea directory worked for me.","body":"Close Intellij and delete .idea directory worked for me."}],"tags":[],"owner":{"account_id":3583820,"reputation":2018,"user_id":2991410,"accept_rate":63,"display_name":"JasmineOT"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1625071437,"creation_date":1625071437,"answer_id":68198679,"question_id":24600804,"body_markdown":"In my case, I have to do the following:\r\n\r\n - close project\r\n - close idea\r\n - remove .idea project directory\r\n - remove (idea.system.path) directory\r\n - start idea\r\n\r\nYou can find your `idea.system.path` here: https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>In my case, I have to do the following:</p>\n<ul>\n<li>close project</li>\n<li>close idea</li>\n<li>remove .idea project directory</li>\n<li>remove (idea.system.path) directory</li>\n<li>start idea</li>\n</ul>\n<p>You can find your <code>idea.system.path</code> here: <a href=\"https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs\" rel=\"noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs</a></p>\n"},{"tags":[],"owner":{"account_id":7376373,"reputation":497,"user_id":5614823,"accept_rate":20,"display_name":"Mohammed Siddiq"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626807750,"creation_date":1626807750,"answer_id":68460105,"question_id":24600804,"body_markdown":"I was having the wrong import.Check if you have right import. In case you have imported using:\r\n\r\n    import org.junit.Test \r\n\r\nand you have `org.junit.jupiter.api.Test` in class path, try importing with :\r\n\r\n    import org.junit.jupiter.api.Test;","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>I was having the wrong import.Check if you have right import. In case you have imported using:</p>\n<pre><code>import org.junit.Test \n</code></pre>\n<p>and you have <code>org.junit.jupiter.api.Test</code> in class path, try importing with :</p>\n<pre><code>import org.junit.jupiter.api.Test;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3232893,"reputation":1624,"user_id":2727721,"display_name":"ThangTD"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687058371,"creation_date":1687058371,"answer_id":76498918,"question_id":24600804,"body_markdown":"For those who tried the above suggestion by refreshing the gradle projects but didn&#39;t work.\r\n\r\nI ran gradle build in the terminal successfully, but IntelliJ didn&#39;t work.\r\nI clicked on the build icon within IntelliJ, wait for the build, and it works.\r\n\r\nSee screenshot.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RlPOg.png","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>For those who tried the above suggestion by refreshing the gradle projects but didn't work.</p>\n<p>I ran gradle build in the terminal successfully, but IntelliJ didn't work.\nI clicked on the build icon within IntelliJ, wait for the build, and it works.</p>\n<p>See screenshot.\n<a href=\"https://i.stack.imgur.com/RlPOg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RlPOg.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":300494,"reputation":13934,"user_id":607655,"accept_rate":81,"display_name":"Meng Lu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95022,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"accepted_answer_id":24601196,"answer_count":11,"score":49,"last_activity_date":1697223430,"creation_date":1404684864,"question_id":24600804,"body_markdown":"I have a toy Java project set up with Gradle in IntelliJ IDEA 13.1.2.  It compiles and runs fine, but the IDE highlights &#39;google&#39; in\r\n\r\n    import com.google.common.base.Strings;\r\n\r\nas red and warns &quot;Cannot resolve symbol &#39;google&#39;&quot;.  Any idea how to fix it?\r\n\r\nI have tried 1) deleting `.idea/` and re-creating the project in IntelliJ IDEA, and 2) re-importing project from the manually created Gradle configuration file `build.gradle`, but to  no avail.","title":"Java project with Gradle in IntelliJ IDEA: cannot resolve symbol &#39;google&#39; but project compiles","body":"<p>I have a toy Java project set up with Gradle in IntelliJ IDEA 13.1.2.  It compiles and runs fine, but the IDE highlights 'google' in</p>\n\n<pre><code>import com.google.common.base.Strings;\n</code></pre>\n\n<p>as red and warns \"Cannot resolve symbol 'google'\".  Any idea how to fix it?</p>\n\n<p>I have tried 1) deleting <code>.idea/</code> and re-creating the project in IntelliJ IDEA, and 2) re-importing project from the manually created Gradle configuration file <code>build.gradle</code>, but to  no avail.</p>\n"},{"tags":["java","arrays","multidimensional-array"],"comments":[{"owner":{"account_id":75676,"reputation":15039,"user_id":217019,"accept_rate":89,"display_name":"Mateusz Dymczyk"},"score":1,"creation_date":1410482182,"post_id":25798958,"comment_id":40353720,"body_markdown":"can the rows have different lengths?","body":"can the rows have different lengths?"},{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":0,"creation_date":1410482324,"post_id":25798958,"comment_id":40353763,"body_markdown":"Then use an array of size y*x, it would be more logical...","body":"Then use an array of size y*x, it would be more logical..."},{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1611540863,"post_id":25798958,"comment_id":116476840,"body_markdown":"Use array[j][i].","body":"Use array[j][i]."}],"answers":[{"tags":[],"owner":{"account_id":75676,"reputation":15039,"user_id":217019,"accept_rate":89,"display_name":"Mateusz Dymczyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1410483495,"creation_date":1410482607,"answer_id":25799051,"question_id":25798958,"body_markdown":"Simple idea: get the lenght of the longest row, iterate over each column printing the content of a row if it has elements. The below code might have some off-by-one errors as it was coded in a simple text editor.\r\n\r\n      int longestRow = 0;\r\n      for (int i = 0; i &lt; array.length; i++) {\r\n        if (array[i].length &gt; longestRow) {\r\n          longestRow = array[i].length;\r\n        }\r\n      }\r\n    \r\n      for (int j = 0; j &lt; longestRow; j++) {\r\n        for (int i = 0; i &lt; array.length; i++) {\r\n          if(array[i].length &gt; j) {\r\n            System.out.println(array[i][j]);\r\n          }\r\n        }\r\n      }","title":"Iterate through 2 dimensional array","body":"<p>Simple idea: get the lenght of the longest row, iterate over each column printing the content of a row if it has elements. The below code might have some off-by-one errors as it was coded in a simple text editor.</p>\n\n<pre><code>  int longestRow = 0;\n  for (int i = 0; i &lt; array.length; i++) {\n    if (array[i].length &gt; longestRow) {\n      longestRow = array[i].length;\n    }\n  }\n\n  for (int j = 0; j &lt; longestRow; j++) {\n    for (int i = 0; i &lt; array.length; i++) {\n      if(array[i].length &gt; j) {\n        System.out.println(array[i][j]);\n      }\n    }\n  }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":75676,"reputation":15039,"user_id":217019,"accept_rate":89,"display_name":"Mateusz Dymczyk"},"score":1,"creation_date":1410483477,"post_id":25799073,"comment_id":40354035,"body_markdown":"```because all rows has same amount of columns``` that might not be true. What if he uses ```new int[][] {{1,2,3},{4,5}};```?","body":"<code>because all rows has same amount of columns</code> that might not be true. What if he uses <code>new int[][] {{1,2,3},{4,5}};</code>?"}],"tags":[],"owner":{"account_id":5019003,"reputation":316,"user_id":4033011,"display_name":"jcstar"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1410483233,"creation_date":1410482823,"answer_id":25799073,"question_id":25798958,"body_markdown":"Just invert the indexes&#39; order like this:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    for (int j = 0; j&lt;array[0].length; j++){\r\n         for (int i = 0; i&lt;array.length; i++){\r\n\r\nbecause all rows has same amount of columns you can use this condition  j &lt; array[0].lengt in first for condition due to the fact you are iterating over a matrix","title":"Iterate through 2 dimensional array","body":"<p>Just invert the indexes' order like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>for (int j = 0; j&lt;array[0].length; j++){\n     for (int i = 0; i&lt;array.length; i++){\n</code></pre>\n\n<p>because all rows has same amount of columns you can use this condition  j &lt; array[0].lengt in first for condition due to the fact you are iterating over a matrix</p>\n"},{"tags":[],"owner":{"account_id":373904,"reputation":656,"user_id":723817,"display_name":"Bharat"},"comment_count":0,"down_vote_count":1,"up_vote_count":41,"is_accepted":false,"score":40,"last_activity_date":1441301825,"creation_date":1441301825,"answer_id":32382123,"question_id":25798958,"body_markdown":"Consider it as an array of arrays and this will work for sure. \r\n\r\n    int mat[][] = { {10, 20, 30, 40, 50, 60, 70, 80, 90},\r\n                    {15, 25, 35, 45},\r\n                    {27, 29, 37, 48},\r\n                    {32, 33, 39, 50, 51, 89},\r\n                  };\r\n        \r\n        \r\n        for(int i=0; i&lt;mat.length; i++) {\r\n            for(int j=0; j&lt;mat[i].length; j++) {\r\n                System.out.println(&quot;Values at arr[&quot;+i+&quot;][&quot;+j+&quot;] is &quot;+mat[i][j]);\r\n            }\r\n        }","title":"Iterate through 2 dimensional array","body":"<p>Consider it as an array of arrays and this will work for sure. </p>\n\n<pre><code>int mat[][] = { {10, 20, 30, 40, 50, 60, 70, 80, 90},\n                {15, 25, 35, 45},\n                {27, 29, 37, 48},\n                {32, 33, 39, 50, 51, 89},\n              };\n\n\n    for(int i=0; i&lt;mat.length; i++) {\n        for(int j=0; j&lt;mat[i].length; j++) {\n            System.out.println(\"Values at arr[\"+i+\"][\"+j+\"] is \"+mat[i][j]);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7509230,"reputation":55,"user_id":5704784,"accept_rate":50,"display_name":"BadNews"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1450728912,"creation_date":1450728912,"answer_id":34403647,"question_id":25798958,"body_markdown":"Just change the indexes. i and j....in the loop, plus if you&#39;re dealing with Strings you have to use concat and initialize the variable to an empty Strong otherwise you&#39;ll get an exception.\r\n\r\n    String string=&quot;&quot;;\r\n    for (int i = 0; i&lt;array.length; i++){\r\n        for (int j = 0; j&lt;array[i].length; j++){\r\n            string = string.concat(array[j][i]);\r\n        } \r\n    }\r\n    System.out.println(string)\r\n\r\n","title":"Iterate through 2 dimensional array","body":"<p>Just change the indexes. i and j....in the loop, plus if you're dealing with Strings you have to use concat and initialize the variable to an empty Strong otherwise you'll get an exception.</p>\n\n<pre><code>String string=\"\";\nfor (int i = 0; i&lt;array.length; i++){\n    for (int j = 0; j&lt;array[i].length; j++){\n        string = string.concat(array[j][i]);\n    } \n}\nSystem.out.println(string)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7669432,"reputation":1445,"user_id":5812179,"accept_rate":50,"display_name":"Niamatullah Bakhshi"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1465848002,"creation_date":1465848002,"answer_id":37798176,"question_id":25798958,"body_markdown":"     //This is The easiest I can Imagine . \r\n     // You need to just change the order of Columns and rows , Yours is printing columns X rows and the solution is printing them rows X columns \r\n    for(int rows=0;rows&lt;array.length;rows++){\r\n    \tfor(int columns=0;columns &lt;array[rows].length;columns++){\r\n    \t\tSystem.out.print(array[rows][columns] + &quot;\\t&quot; );}\r\n    \tSystem.out.println();}\r\n    ","title":"Iterate through 2 dimensional array","body":"<pre><code> //This is The easiest I can Imagine . \n // You need to just change the order of Columns and rows , Yours is printing columns X rows and the solution is printing them rows X columns \nfor(int rows=0;rows&lt;array.length;rows++){\n    for(int columns=0;columns &lt;array[rows].length;columns++){\n        System.out.print(array[rows][columns] + \"\\t\" );}\n    System.out.println();}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12498602,"reputation":49,"user_id":11999464,"display_name":"Martin Bocanegra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611540723,"creation_date":1611540723,"answer_id":65878123,"question_id":25798958,"body_markdown":"These functions should work.\r\n\r\n    // First, cache your array dimensions so you don&#39;t have to\r\n    //  access them during each iteration of your for loops.\r\n    int rowLength = array.length,       // array width (# of columns)\r\n        colLength = array[0].length;    // array height (# of rows)\r\n\r\n    //     This is your function:\r\n    // Prints array elements row by row\r\n    var rowString = &quot;&quot;;\r\n    for(int x = 0; x &lt; rowLength; x++){     // x is the column&#39;s index\r\n        for(int y = 0; y &lt; colLength; y++){ // y is the row&#39;s index\r\n            rowString += array[x][y];\r\n        } System.out.println(rowString)\r\n    }\r\n\r\n    //      This is the one you want:\r\n    // Prints array elements column by column\r\n    var colString = &quot;&quot;;\r\n    for(int y = 0; y &lt; colLength; y++){      // y is the row&#39;s index\r\n        for(int x = 0; x &lt; rowLength; x++){  // x is the column&#39;s index\r\n            colString += array[x][y];\r\n        } System.out.println(colString)\r\n    }\r\nIn the first block, the inner loop iterates over each item in the row before moving to the next column.\r\n&lt;br/&gt;&lt;br/&gt;\r\nIn the second block (the one you want), the inner loop iterates over all the columns before moving to the next row.\r\n&lt;br/&gt;&lt;br/&gt;\r\n`tl;dr:` &lt;i&gt;Essentially, the &lt;/i&gt;`for()`&lt;i&gt; loops in both functions are switched. That&#39;s it.&lt;/i&gt;\r\n&lt;br/&gt;&lt;br/&gt;\r\nI hope this helps you to understand the logic behind iterating over 2-dimensional arrays.\r\n&lt;br/&gt;&lt;br/&gt;\r\nAlso, this works whether you have a string[,] or string[][]","title":"Iterate through 2 dimensional array","body":"<p>These functions should work.</p>\n<pre><code>// First, cache your array dimensions so you don't have to\n//  access them during each iteration of your for loops.\nint rowLength = array.length,       // array width (# of columns)\n    colLength = array[0].length;    // array height (# of rows)\n\n//     This is your function:\n// Prints array elements row by row\nvar rowString = &quot;&quot;;\nfor(int x = 0; x &lt; rowLength; x++){     // x is the column's index\n    for(int y = 0; y &lt; colLength; y++){ // y is the row's index\n        rowString += array[x][y];\n    } System.out.println(rowString)\n}\n\n//      This is the one you want:\n// Prints array elements column by column\nvar colString = &quot;&quot;;\nfor(int y = 0; y &lt; colLength; y++){      // y is the row's index\n    for(int x = 0; x &lt; rowLength; x++){  // x is the column's index\n        colString += array[x][y];\n    } System.out.println(colString)\n}\n</code></pre>\n<p>In the first block, the inner loop iterates over each item in the row before moving to the next column.\n<br/><br/>\nIn the second block (the one you want), the inner loop iterates over all the columns before moving to the next row.\n<br/><br/>\n<code>tl;dr:</code> <i>Essentially, the </i><code>for()</code><i> loops in both functions are switched. That's it.</i>\n<br/><br/>\nI hope this helps you to understand the logic behind iterating over 2-dimensional arrays.\n<br/><br/>\nAlso, this works whether you have a string[,] or string[][]</p>\n"},{"tags":[],"owner":{"account_id":29665181,"reputation":1,"user_id":22735895,"display_name":"meower3000"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697223085,"creation_date":1697209531,"answer_id":77288823,"question_id":25798958,"body_markdown":"```java\r\n//MREOW\r\nfor (int i = 0; i &lt; cards.length; i++) {\r\n    for (int j = 0; j &lt; cards[i].length; j++) {\r\n```","title":"Iterate through 2 dimensional array","body":"<pre class=\"lang-java prettyprint-override\"><code>//MREOW\nfor (int i = 0; i &lt; cards.length; i++) {\n    for (int j = 0; j &lt; cards[i].length; j++) {\n</code></pre>\n"}],"owner":{"account_id":4940635,"reputation":803,"user_id":3977420,"accept_rate":74,"display_name":"Peter111"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":207685,"favorite_count":0,"down_vote_count":3,"up_vote_count":24,"answer_count":7,"score":21,"last_activity_date":1697223085,"creation_date":1410481911,"question_id":25798958,"body_markdown":"I have a &quot;connect four board&quot; which I simulate with a 2d array (array[x][y] x=x coordinate, y = y coordinate). I have to use  &quot;System.out.println&quot;, so I have to iterate through the rows.\r\n\r\nI need a way to iterate this way [0,0] [1,0] [2,0] [3,0] [0,1] [1,1] [2,1] etc\r\n\r\nIf i use the normal procedure:\r\n\r\n    for (int i = 0; i&lt;array.length; i++){\r\n         for (int j = 0; j&lt;array[i].length; j++){\r\n            string += array[i][j];\r\n         } System.out.println(string)\r\n           \r\n    }\r\nit doesnt work because it iterates this way [0,0] [0,1] [0,2] [0,3] etc\r\n\r\nThe normal procedure stays in x and increments y until the end of the column, but i need to say in y and increment x until the end of the row.\r\n\r\n","title":"Iterate through 2 dimensional array","body":"<p>I have a \"connect four board\" which I simulate with a 2d array (array[x][y] x=x coordinate, y = y coordinate). I have to use  \"System.out.println\", so I have to iterate through the rows.</p>\n\n<p>I need a way to iterate this way [0,0] [1,0] [2,0] [3,0] [0,1] [1,1] [2,1] etc</p>\n\n<p>If i use the normal procedure:</p>\n\n<pre><code>for (int i = 0; i&lt;array.length; i++){\n     for (int j = 0; j&lt;array[i].length; j++){\n        string += array[i][j];\n     } System.out.println(string)\n\n}\n</code></pre>\n\n<p>it doesnt work because it iterates this way [0,0] [0,1] [0,2] [0,3] etc</p>\n\n<p>The normal procedure stays in x and increments y until the end of the column, but i need to say in y and increment x until the end of the row.</p>\n"},{"tags":["javascript","java","node.js","jar"],"comments":[{"owner":{"account_id":6587107,"reputation":23126,"user_id":5089567,"accept_rate":83,"display_name":"Konrad"},"score":0,"creation_date":1697212362,"post_id":77289126,"comment_id":136255940,"body_markdown":"I&#39;m pretty sure you need jvm to run jars anyway. You can just run `.js` file with a `.bat` if you have node.js installed","body":"I&#39;m pretty sure you need jvm to run jars anyway. You can just run <code>.js</code> file with a <code>.bat</code> if you have node.js installed"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":2,"creation_date":1697213358,"post_id":77289126,"comment_id":136256156,"body_markdown":"I would also really recommend you check out SED (https://www.geeksforgeeks.org/sed-command-in-linux-unix-with-examples/) regular expressions can be a bit tricky, but once you start using this and getting the hang of it I think you&#39;ll find it can improve these common jobs that you reference.","body":"I would also really recommend you check out SED (<a href=\"https://www.geeksforgeeks.org/sed-command-in-linux-unix-with-examples/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/sed-command-in-linux-unix-with-examples</a>) regular expressions can be a bit tricky, but once you start using this and getting the hang of it I think you&#39;ll find it can improve these common jobs that you reference."},{"owner":{"account_id":9045527,"reputation":37191,"user_id":6738015,"display_name":"Compo"},"score":0,"creation_date":1697213489,"post_id":77289126,"comment_id":136256184,"body_markdown":"What&#39;s the point, surely you could just run a batch file to prompt for a string and replace characters in it. Alternatively use a powershell script and perform full uri/html decoding.","body":"What&#39;s the point, surely you could just run a batch file to prompt for a string and replace characters in it. Alternatively use a powershell script and perform full uri/html decoding."},{"owner":{"account_id":17107958,"reputation":17,"user_id":12379548,"display_name":"Suman"},"score":0,"creation_date":1697213626,"post_id":77289126,"comment_id":136256202,"body_markdown":"This question here is not for string conversion optimisation and that was just an example of the repetitive task that i use bat files for.  The question is on the conversion method of js files to jar or bat format to run a specific function","body":"This question here is not for string conversion optimisation and that was just an example of the repetitive task that i use bat files for.  The question is on the conversion method of js files to jar or bat format to run a specific function"},{"owner":{"account_id":9045527,"reputation":37191,"user_id":6738015,"display_name":"Compo"},"score":1,"creation_date":1697213791,"post_id":77289126,"comment_id":136256234,"body_markdown":"This site is for specific programming code problems, not advice on software, programs, tools, or reference material, on how to program.","body":"This site is for specific programming code problems, not advice on software, programs, tools, or reference material, on how to program."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697217122,"post_id":77289126,"comment_id":136256857,"body_markdown":"Caution: replacing “%20” with a space is *not* sufficient, by itself, for decoding a URI.","body":"Caution: replacing “%20” with a space is <i>not</i> sufficient, by itself, for decoding a URI."}],"answers":[{"tags":[],"owner":{"account_id":10259286,"reputation":3326,"user_id":19090048,"display_name":"mandy8055"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697214176,"creation_date":1697213395,"answer_id":77289244,"question_id":77289126,"body_markdown":"As pointed out by **@Konrad**, you will definitely need jvm to run the jar. But if generating jars is not your top priority and you want to use cmd to achieve the same result using `node.js`. You can do something like below:\r\n\r\n```js\r\n// myProgram.js\r\nconst readline = require(&#39;readline&#39;);\r\nconst path = require(&#39;path&#39;);\r\n\r\nconst rl = readline.createInterface({\r\n  input: process.stdin,\r\n  output: process.stdout\r\n});\r\n\r\nrl.question(&#39;Enter your input string: &#39;, (inputstring) =&gt; {\r\n  const outputstring = inputstring.replace(&#39;%20&#39;, &#39; &#39;).replace(&#39;/&#39;, &#39;\\\\&#39;);\r\n  console.log(path.normalize(outputstring));\r\n  rl.close();\r\n});\r\n```\r\n\r\nIn you cmd, you can then run\r\n&gt; node myprogram.js\r\n\r\nAs per the **OP&#39;s latest comment**, I can think of one way to achieve the result;\r\n\r\nThere is a npm package called **[`pkg`](https://www.npmjs.com/package/pkg)** which you can use to convert your Javascript files to executable file that can be run on windows.\r\n\r\nYou can run below commands: \r\n1. `npm i -g pkg` - Globally install `pkg` npm module.\r\n2. `pkg myprogram.js --targets win` - To generate executable file for windows. You can refer the docs for other OS.\r\n\r\nThis creates the executable file which you can double-click and run.","title":"Can we create executable jar files in javascript similar to java executable jar files?","body":"<p>As pointed out by <strong>@Konrad</strong>, you will definitely need jvm to run the jar. But if generating jars is not your top priority and you want to use cmd to achieve the same result using <code>node.js</code>. You can do something like below:</p>\n<pre class=\"lang-js prettyprint-override\"><code>// myProgram.js\nconst readline = require('readline');\nconst path = require('path');\n\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n\nrl.question('Enter your input string: ', (inputstring) =&gt; {\n  const outputstring = inputstring.replace('%20', ' ').replace('/', '\\\\');\n  console.log(path.normalize(outputstring));\n  rl.close();\n});\n</code></pre>\n<p>In you cmd, you can then run</p>\n<blockquote>\n<p>node myprogram.js</p>\n</blockquote>\n<p>As per the <strong>OP's latest comment</strong>, I can think of one way to achieve the result;</p>\n<p>There is a npm package called <strong><a href=\"https://www.npmjs.com/package/pkg\" rel=\"nofollow noreferrer\"><code>pkg</code></a></strong> which you can use to convert your Javascript files to executable file that can be run on windows.</p>\n<p>You can run below commands:</p>\n<ol>\n<li><code>npm i -g pkg</code> - Globally install <code>pkg</code> npm module.</li>\n<li><code>pkg myprogram.js --targets win</code> - To generate executable file for windows. You can refer the docs for other OS.</li>\n</ol>\n<p>This creates the executable file which you can double-click and run.</p>\n"}],"owner":{"account_id":17107958,"reputation":17,"user_id":12379548,"display_name":"Suman"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1697222735,"creation_date":1697212254,"question_id":77289126,"body_markdown":"I generally convert simple daily repetitive tasks into a java program with user inputs and outputs. This is later converted to executable jars which i can run through bat file and verify output through command prompt.\r\n\r\nCan i do the same with javascript ?  \r\n\r\n\r\n\r\nBelow is one of the example of a string conversion file which helps me format the file path string into a windows applicable file path format.  Is it possible to write similar program in javascript and convert the file into a jar which i can later run similarly through bat file or any medium with user inputs?\r\n\r\n\r\n```\r\npackage Strings;\r\nimport java.util.Scanner;\r\npublic class replace {\r\n\tpublic static void main(String[] args) {\r\n\t\r\n\t\tScanner sc= new Scanner(System.in);\r\n\t\tSystem.out.print(&quot;Enter your input string : &quot;);\r\n\t\tString inputstring=  sc.nextLine();\r\n\t\tString outputstring=inputstring.replace(&quot;%20&quot;, &quot; &quot;); \r\n//replaces %20 to space\r\n\t    System.out.println(outputstring.replace(&quot;/&quot;, &quot;\\\\&quot;));   \r\n// replaces slashes to proper format for windows and provides out put in cmd prompt when run through bat\r\n\t}\r\n}\r\n```","title":"Can we create executable jar files in javascript similar to java executable jar files?","body":"<p>I generally convert simple daily repetitive tasks into a java program with user inputs and outputs. This is later converted to executable jars which i can run through bat file and verify output through command prompt.</p>\n<p>Can i do the same with javascript ?</p>\n<p>Below is one of the example of a string conversion file which helps me format the file path string into a windows applicable file path format.  Is it possible to write similar program in javascript and convert the file into a jar which i can later run similarly through bat file or any medium with user inputs?</p>\n<pre><code>package Strings;\nimport java.util.Scanner;\npublic class replace {\n    public static void main(String[] args) {\n    \n        Scanner sc= new Scanner(System.in);\n        System.out.print(&quot;Enter your input string : &quot;);\n        String inputstring=  sc.nextLine();\n        String outputstring=inputstring.replace(&quot;%20&quot;, &quot; &quot;); \n//replaces %20 to space\n        System.out.println(outputstring.replace(&quot;/&quot;, &quot;\\\\&quot;));   \n// replaces slashes to proper format for windows and provides out put in cmd prompt when run through bat\n    }\n}\n</code></pre>\n"},{"tags":["java","multidimensional-array","duplicates","jagged-arrays"],"answers":[{"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1697222576,"post_id":77289845,"comment_id":136257752,"body_markdown":"**without using any shortcuts only logically with for loop and if statements** I suspect the person asking is a beginner who is not yet allowed to use sets and list in his solution.","body":"<b>without using any shortcuts only logically with for loop and if statements</b> I suspect the person asking is a beginner who is not yet allowed to use sets and list in his solution."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697231323,"post_id":77289845,"comment_id":136258947,"body_markdown":"@Eritrean, you should write an answer.","body":"@Eritrean, you should write an answer."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697220798,"creation_date":1697220284,"answer_id":77289845,"question_id":77289634,"body_markdown":"You&#39;ll need a _loop_ for each _array_, and then a _loop_ for each _sub-array_.\r\n\r\nAdditionally, I&#39;m utilizing a _[Set](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html)_ here to prevent duplicate values.\r\n\r\n```java\r\nSet&lt;Integer&gt; d = new TreeSet&lt;&gt;();\r\nint i, ni, j, nj;\r\nfor (int[] x : arr1)\r\n    for (i = 0, ni = x.length; i &lt; ni; i++)\r\n        for (int[] y : arr2)\r\n            for (j = 0, nj = y.length; j &lt; nj; j++)\r\n                if (x[i] == y[j]) d.add(x[i]);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[1, 2, 3, 6, 7]\r\n```\r\n\r\nIdeally though, just add each value to a _[List](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html)_, checking the _List_, first.\r\n\r\n```java\r\nList&lt;Integer&gt; d = new ArrayList&lt;&gt;();\r\nint i, ni, j, nj;\r\nfor (int[] x : arr1)\r\n    for (i = 0, ni = x.length; i &lt; ni; i++)\r\n        for (int[] y : arr2)\r\n            for (j = 0, nj = y.length; j &lt; nj; j++)\r\n                if (x[i] == y[j] &amp;&amp; !d.contains(x[i])) d.add(x[i]);\r\n```","title":"print common elements between two arrays from jagged array and multidimensional array","body":"<p>You'll need a <em>loop</em> for each <em>array</em>, and then a <em>loop</em> for each <em>sub-array</em>.</p>\n<p>Additionally, I'm utilizing a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\">Set</a></em> here to prevent duplicate values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;Integer&gt; d = new TreeSet&lt;&gt;();\nint i, ni, j, nj;\nfor (int[] x : arr1)\n    for (i = 0, ni = x.length; i &lt; ni; i++)\n        for (int[] y : arr2)\n            for (j = 0, nj = y.length; j &lt; nj; j++)\n                if (x[i] == y[j]) d.add(x[i]);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[1, 2, 3, 6, 7]\n</code></pre>\n<p>Ideally though, just add each value to a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\">List</a></em>, checking the <em>List</em>, first.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; d = new ArrayList&lt;&gt;();\nint i, ni, j, nj;\nfor (int[] x : arr1)\n    for (i = 0, ni = x.length; i &lt; ni; i++)\n        for (int[] y : arr2)\n            for (j = 0, nj = y.length; j &lt; nj; j++)\n                if (x[i] == y[j] &amp;&amp; !d.contains(x[i])) d.add(x[i]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18969359,"reputation":26,"user_id":13843178,"display_name":"unknown23"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697222535,"creation_date":1697222535,"answer_id":77290029,"question_id":77289634,"body_markdown":"*Note: This solution is assuming we must use only primitive types, loops, and if/else statements*\r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n    // Note: If not limited to primitive types, loops, and if statements.\r\n    //  A better option would be using a Set&lt;int&gt;. It would be a similar process\r\n    //  to the below solution, but far more efficient as insertion and retrieval\r\n    //  of values would be O(1) instead of O(n).\r\n\r\n    // when limited to using only primitives, arrays, and if statements\r\n    int[][] arr1 = new int[][] {{1,2,1},{9,7,2},{7,3,6}};\r\n    int[][] arr2 = new int[][] {{2,6,8},{0,1,7},{7,2,0},{8,3}};\r\n\r\n    // find one of the array&#39;s flattened size\r\n    int seenSize = 0;\r\n    for (int i = 0; i &lt; arr1.length; i++) {\r\n      for (int j = 0; j &lt; arr1[i].length; j ++) {\r\n        seenSize++;\r\n      }\r\n    }\r\n    int[] seen = new int[seenSize];\r\n\r\n    // iterate over the same array to create an array of any unique seen element\r\n    int seenIndex = 0;\r\n    for (int i = 0; i &lt; arr1.length; i++) {\r\n      for (int j = 0; j &lt; arr1[i].length; j++) {\r\n        if (!valueIsPresentIn(arr1[i][j], seen, seenIndex)) {\r\n          seen[seenIndex] = arr1[i][j];\r\n          seenIndex++;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Note: sorting the list of seen items would make this next step more efficient, then binary search could be used.\r\n\r\n    int[] printed = new int[seenSize];\r\n    int printedIndex = 0;\r\n\r\n    // iterate over the second array searching for a similar occurrence in the list of\r\n    // seen values, if something is found and it has not been printed, we need to print\r\n    // it and add to the list of already printed values\r\n    for (int i = 0; i &lt; arr2.length; i++) {\r\n      for (int j = 0; j &lt; arr2[i].length; j++) {\r\n        if (valueIsPresentIn(arr2[i][j], seen, seenIndex)) {\r\n          if (!valueIsPresentIn(arr2[i][j], printed, printedIndex)) {\r\n            printed[printedIndex] = arr2[i][j];\r\n            System.out.println(printed[printedIndex]);\r\n            printedIndex++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Method to search for a value, this is unnecessary if no longer limited to\r\n  // primitive types as there are built-in methods and countless libraries/solutions\r\n  // to this.\r\n  public static boolean valueIsPresentIn(int value, int[] array, int maxIndex) {\r\n    for (int searchIndex = 0; searchIndex &lt; maxIndex; searchIndex++) {\r\n      if (array[searchIndex] == value) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n}\r\n\r\n\r\n```","title":"print common elements between two arrays from jagged array and multidimensional array","body":"<p><em>Note: This solution is assuming we must use only primitive types, loops, and if/else statements</em></p>\n<pre><code>import java.util.*;\n\npublic class Main {\n  public static void main(String[] args) {\n    // Note: If not limited to primitive types, loops, and if statements.\n    //  A better option would be using a Set&lt;int&gt;. It would be a similar process\n    //  to the below solution, but far more efficient as insertion and retrieval\n    //  of values would be O(1) instead of O(n).\n\n    // when limited to using only primitives, arrays, and if statements\n    int[][] arr1 = new int[][] {{1,2,1},{9,7,2},{7,3,6}};\n    int[][] arr2 = new int[][] {{2,6,8},{0,1,7},{7,2,0},{8,3}};\n\n    // find one of the array's flattened size\n    int seenSize = 0;\n    for (int i = 0; i &lt; arr1.length; i++) {\n      for (int j = 0; j &lt; arr1[i].length; j ++) {\n        seenSize++;\n      }\n    }\n    int[] seen = new int[seenSize];\n\n    // iterate over the same array to create an array of any unique seen element\n    int seenIndex = 0;\n    for (int i = 0; i &lt; arr1.length; i++) {\n      for (int j = 0; j &lt; arr1[i].length; j++) {\n        if (!valueIsPresentIn(arr1[i][j], seen, seenIndex)) {\n          seen[seenIndex] = arr1[i][j];\n          seenIndex++;\n        }\n      }\n    }\n\n    // Note: sorting the list of seen items would make this next step more efficient, then binary search could be used.\n\n    int[] printed = new int[seenSize];\n    int printedIndex = 0;\n\n    // iterate over the second array searching for a similar occurrence in the list of\n    // seen values, if something is found and it has not been printed, we need to print\n    // it and add to the list of already printed values\n    for (int i = 0; i &lt; arr2.length; i++) {\n      for (int j = 0; j &lt; arr2[i].length; j++) {\n        if (valueIsPresentIn(arr2[i][j], seen, seenIndex)) {\n          if (!valueIsPresentIn(arr2[i][j], printed, printedIndex)) {\n            printed[printedIndex] = arr2[i][j];\n            System.out.println(printed[printedIndex]);\n            printedIndex++;\n          }\n        }\n      }\n    }\n  }\n\n  // Method to search for a value, this is unnecessary if no longer limited to\n  // primitive types as there are built-in methods and countless libraries/solutions\n  // to this.\n  public static boolean valueIsPresentIn(int value, int[] array, int maxIndex) {\n    for (int searchIndex = 0; searchIndex &lt; maxIndex; searchIndex++) {\n      if (array[searchIndex] == value) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n}\n\n\n</code></pre>\n"}],"owner":{"account_id":29655426,"reputation":21,"user_id":22728289,"display_name":"Akshitha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697222535,"creation_date":1697217764,"question_id":77289634,"body_markdown":"\r\n\t\tint[][] arr1 = new int[][] {{1,2,1},{9,7,2},{7,3,6}};\r\n\r\n\t\tint arr2[][] = new int[][] {{2,6,8},{0,1,7},{7,2,0},{8,3}};\r\n\r\n\t\tboolean duplicate= false;\r\n\r\n\t\tfor(int i=0;i&lt;arr1.length;i++) { \r\n\t\t\tfor(int j=0;j&lt;arr1[i].length;j++) {\r\n\t\t\t\tint transpose = 0;\r\n\t\t\t\ttranspose = arr1[i][j];\r\n\r\n\t\t\t\tfor(int k=0;k&lt;arr2.length;k++) {\r\n\t\t\t\t\tduplicate = false; \r\n\t\t\t\t\tfor(int  l=0;l&lt;arr2[k].length;l++) { \r\n\t\t\t\t\t\tif(transpose == arr2[k][l]) {\r\n\t\t\t\t\t\t\tSystem.out.println(transpose);\r\n\t\t\t\t\t\t\tduplicate = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\tif(duplicate)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nI tried to print common elements without using any shortcuts only logically with for loop and if statements. The logic is, in array 1 i am iterating each element and checking if it is there in array 2 if it is there we have to print it in console. But the problem is in array 1 element &quot;1,2,7&quot; is iterating 2 times and printing it 2 times.\r\n\r\ngetting this Output: \r\n1\r\n2\r\n1\r\n7\r\n2\r\n7\r\n3\r\n6\r\n\r\nExpected Output: \r\n1\r\n2\r\n7\r\n3\r\n6\r\n\r\nHere, i have to stop iterating twice because it is already checked once printed.\r\nnote: I want answer only with looping statements and conditional statements without hash set or shortcuts. ","title":"print common elements between two arrays from jagged array and multidimensional array","body":"<pre><code>    int[][] arr1 = new int[][] {{1,2,1},{9,7,2},{7,3,6}};\n\n    int arr2[][] = new int[][] {{2,6,8},{0,1,7},{7,2,0},{8,3}};\n\n    boolean duplicate= false;\n\n    for(int i=0;i&lt;arr1.length;i++) { \n        for(int j=0;j&lt;arr1[i].length;j++) {\n            int transpose = 0;\n            transpose = arr1[i][j];\n\n            for(int k=0;k&lt;arr2.length;k++) {\n                duplicate = false; \n                for(int  l=0;l&lt;arr2[k].length;l++) { \n                    if(transpose == arr2[k][l]) {\n                        System.out.println(transpose);\n                        duplicate = true;\n                        break;\n                    }\n                }\n            \n                if(duplicate)\n                    break;\n            }\n        }\n\n    }\n\n}\n</code></pre>\n<p>}</p>\n<p>I tried to print common elements without using any shortcuts only logically with for loop and if statements. The logic is, in array 1 i am iterating each element and checking if it is there in array 2 if it is there we have to print it in console. But the problem is in array 1 element &quot;1,2,7&quot; is iterating 2 times and printing it 2 times.</p>\n<p>getting this Output:\n1\n2\n1\n7\n2\n7\n3\n6</p>\n<p>Expected Output:\n1\n2\n7\n3\n6</p>\n<p>Here, i have to stop iterating twice because it is already checked once printed.\nnote: I want answer only with looping statements and conditional statements without hash set or shortcuts.</p>\n"},{"tags":["java","xml","spring-boot","rest"],"owner":{"account_id":15450425,"reputation":227,"user_id":11145980,"display_name":"MPK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697222323,"creation_date":1697221247,"question_id":77289921,"body_markdown":"I am working with enunciation for the API documentation. I have added Facets to my API to include it in documentation.\r\nBut when I include Facets under the root element of enunciate.xml by \r\n```\r\n    &lt;facets&gt;\r\n        &lt;!-- include all components with the facet applied. --&gt;\r\n        &lt;include name=&quot;Admin&quot;/&gt;\r\n    &lt;/facets&gt;\r\n```\r\nIt doesn&#39;t include the API with Admin Facet name. While exclude `&lt;exclude name=&quot;Admin&quot;/&gt;&#160;` excludes all the API with Admin Facet.\r\n\r\nHow can we just include the API with Admin facet and exclude other?\r\n","title":"Include Facets under the root element of the enunciate.xml does not work in enunciation in Java","body":"<p>I am working with enunciation for the API documentation. I have added Facets to my API to include it in documentation.\nBut when I include Facets under the root element of enunciate.xml by</p>\n<pre><code>    &lt;facets&gt;\n        &lt;!-- include all components with the facet applied. --&gt;\n        &lt;include name=&quot;Admin&quot;/&gt;\n    &lt;/facets&gt;\n</code></pre>\n<p>It doesn't include the API with Admin Facet name. While exclude <code>&lt;exclude name=&quot;Admin&quot;/&gt; </code> excludes all the API with Admin Facet.</p>\n<p>How can we just include the API with Admin facet and exclude other?</p>\n"},{"tags":["java","arrays","json","csv","talend"],"answers":[{"comments":[{"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"score":0,"creation_date":1697337223,"post_id":77289993,"comment_id":136266729,"body_markdown":"Appreciate the effort  but the OP is asking for a Talend solution.","body":"Appreciate the effort  but the OP is asking for a Talend solution."}],"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697222019,"creation_date":1697222019,"answer_id":77289993,"question_id":76380293,"body_markdown":"You may try another JSON library _Josson_ to convert the JSON to csv.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n__Deserialization__\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;[&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;transactionDetails\\&quot;: [&quot; +\r\n        &quot;            {&quot; +\r\n        &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\r\n        &quot;                \\&quot;price\\&quot;: \\&quot;90\\&quot;,&quot; +\r\n        &quot;                \\&quot;nominalAmount\\&quot;: 26000000.0&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            {&quot; +\r\n        &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\r\n        &quot;                \\&quot;price\\&quot;: \\&quot;95\\&quot;,&quot; +\r\n        &quot;                \\&quot;nominalAmount\\&quot;: 1000000.0&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            {&quot; +\r\n        &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\r\n        &quot;                \\&quot;price\\&quot;: \\&quot;97\\&quot;,&quot; +\r\n        &quot;                \\&quot;nominalAmount\\&quot;: 30000000.0&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;        ],&quot; +\r\n        &quot;        \\&quot;Description\\&quot;: \\&quot;Apple\\&quot;,&quot; +\r\n        &quot;        \\&quot;isin\\&quot;: \\&quot;ISIN1\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;transactionDetails\\&quot;: [&quot; +\r\n        &quot;            {&quot; +\r\n        &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\r\n        &quot;                \\&quot;price\\&quot;: \\&quot;88\\&quot;,&quot; +\r\n        &quot;                \\&quot;nominalAmount\\&quot;: 27000000.0&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            {&quot; +\r\n        &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\r\n        &quot;                \\&quot;price\\&quot;: \\&quot;99\\&quot;,&quot; +\r\n        &quot;                \\&quot;nominalAmount\\&quot;: 1000000.0&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            {&quot; +\r\n        &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\r\n        &quot;                \\&quot;price\\&quot;: \\&quot;96\\&quot;,&quot; +\r\n        &quot;                \\&quot;nominalAmount\\&quot;: 24000000.0&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;        ],&quot; +\r\n        &quot;        \\&quot;Description\\&quot;: \\&quot;Microsoft\\&quot;,&quot; +\r\n        &quot;        \\&quot;isin\\&quot;: \\&quot;ISIN2\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;Description\\&quot;: \\&quot;Tesla\\&quot;,&quot; +\r\n        &quot;        \\&quot;isin\\&quot;: \\&quot;ISIN3\\&quot;&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;]&quot;);\r\n\r\n__Transformation__\r\n\r\n    String csv = josson.getString(\r\n        &quot;unwind(+transactionDetails)&quot; +\r\n        &quot;.map(+Description, +isin, +tradeDate, +price, +nominalAmount)@&quot; +\r\n        &quot;.csv()&quot; +\r\n        &quot;.@join(&#39;\\n&#39;)&quot;);\r\n    System.out.print(csv);\r\n\r\n__Output__\r\n\r\n    Apple,ISIN1,2023-02-13T00:00:00,90,2.6E7\r\n    Apple,ISIN1,2023-02-13T00:00:00,95,1000000.0\r\n    Apple,ISIN1,2023-02-13T00:00:00,97,3.0E7\r\n    Microsoft,ISIN2,2023-02-13T00:00:00,88,2.7E7\r\n    Microsoft,ISIN2,2023-02-13T00:00:00,99,1000000.0\r\n    Microsoft,ISIN2,2023-02-13T00:00:00,96,2.4E7\r\n    Tesla,ISIN3,,,","title":"Parse a nested JSON array with Talend Open Studio and make it a table","body":"<p>You may try another JSON library <em>Josson</em> to convert the JSON to csv.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p><strong>Deserialization</strong></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;[&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;transactionDetails\\&quot;: [&quot; +\n    &quot;            {&quot; +\n    &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\n    &quot;                \\&quot;price\\&quot;: \\&quot;90\\&quot;,&quot; +\n    &quot;                \\&quot;nominalAmount\\&quot;: 26000000.0&quot; +\n    &quot;            },&quot; +\n    &quot;            {&quot; +\n    &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\n    &quot;                \\&quot;price\\&quot;: \\&quot;95\\&quot;,&quot; +\n    &quot;                \\&quot;nominalAmount\\&quot;: 1000000.0&quot; +\n    &quot;            },&quot; +\n    &quot;            {&quot; +\n    &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\n    &quot;                \\&quot;price\\&quot;: \\&quot;97\\&quot;,&quot; +\n    &quot;                \\&quot;nominalAmount\\&quot;: 30000000.0&quot; +\n    &quot;            }&quot; +\n    &quot;        ],&quot; +\n    &quot;        \\&quot;Description\\&quot;: \\&quot;Apple\\&quot;,&quot; +\n    &quot;        \\&quot;isin\\&quot;: \\&quot;ISIN1\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;transactionDetails\\&quot;: [&quot; +\n    &quot;            {&quot; +\n    &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\n    &quot;                \\&quot;price\\&quot;: \\&quot;88\\&quot;,&quot; +\n    &quot;                \\&quot;nominalAmount\\&quot;: 27000000.0&quot; +\n    &quot;            },&quot; +\n    &quot;            {&quot; +\n    &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\n    &quot;                \\&quot;price\\&quot;: \\&quot;99\\&quot;,&quot; +\n    &quot;                \\&quot;nominalAmount\\&quot;: 1000000.0&quot; +\n    &quot;            },&quot; +\n    &quot;            {&quot; +\n    &quot;                \\&quot;tradeDate\\&quot;: \\&quot;2023-02-13T00:00:00\\&quot;,&quot; +\n    &quot;                \\&quot;price\\&quot;: \\&quot;96\\&quot;,&quot; +\n    &quot;                \\&quot;nominalAmount\\&quot;: 24000000.0&quot; +\n    &quot;            }&quot; +\n    &quot;        ],&quot; +\n    &quot;        \\&quot;Description\\&quot;: \\&quot;Microsoft\\&quot;,&quot; +\n    &quot;        \\&quot;isin\\&quot;: \\&quot;ISIN2\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;Description\\&quot;: \\&quot;Tesla\\&quot;,&quot; +\n    &quot;        \\&quot;isin\\&quot;: \\&quot;ISIN3\\&quot;&quot; +\n    &quot;    }&quot; +\n    &quot;]&quot;);\n</code></pre>\n<p><strong>Transformation</strong></p>\n<pre><code>String csv = josson.getString(\n    &quot;unwind(+transactionDetails)&quot; +\n    &quot;.map(+Description, +isin, +tradeDate, +price, +nominalAmount)@&quot; +\n    &quot;.csv()&quot; +\n    &quot;.@join('\\n')&quot;);\nSystem.out.print(csv);\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>Apple,ISIN1,2023-02-13T00:00:00,90,2.6E7\nApple,ISIN1,2023-02-13T00:00:00,95,1000000.0\nApple,ISIN1,2023-02-13T00:00:00,97,3.0E7\nMicrosoft,ISIN2,2023-02-13T00:00:00,88,2.7E7\nMicrosoft,ISIN2,2023-02-13T00:00:00,99,1000000.0\nMicrosoft,ISIN2,2023-02-13T00:00:00,96,2.4E7\nTesla,ISIN3,,,\n</code></pre>\n"}],"owner":{"account_id":27900110,"reputation":35,"user_id":21304583,"display_name":"Fabio Mignardi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":378,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697222019,"creation_date":1685610296,"question_id":76380293,"body_markdown":"I need to parse a Json nested file and extract a csv using Talend Open Studio. The objective is transform the nested Json format into a table.\r\n\r\nThe Json has the following structure:\r\n\r\nIt&#39;s an array of elements (financial instruments in my specific case) and each element has another array level which represents transactions per instrument.\r\n\r\nIn the example below we have three elements (represented by fields **Isin** and **Description**) and for each one there could be a set of **transactionDetails.**\r\n\r\n```\r\n[{\r\n        &quot;transactionDetails&quot;: [\r\n            {\r\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\r\n                &quot;price&quot;: &quot;90&quot;,\r\n                &quot;nominalAmount&quot;: 26000000.0\r\n            },\r\n            {\r\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\r\n                &quot;price&quot;: &quot;95&quot;,\r\n                &quot;nominalAmount&quot;: 1000000.0\r\n            },\r\n            {\r\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\r\n                &quot;price&quot;: &quot;97&quot;,\r\n                &quot;nominalAmount&quot;: 30000000.0\r\n            }\r\n        ],\r\n        &quot;Description&quot;: &quot;Apple&quot;,\r\n        &quot;isin&quot;: &quot;ISIN1&quot;\r\n    },\r\n{\r\n\r\n        &quot;transactionDetails&quot;: [\r\n            {\r\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\r\n                &quot;price&quot;: &quot;88&quot;,\r\n                &quot;nominalAmount&quot;: 27000000.0\r\n            },\r\n            {\r\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\r\n                &quot;price&quot;: &quot;99&quot;,\r\n                &quot;nominalAmount&quot;: 1000000.0\r\n            },\r\n            {\r\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\r\n                &quot;price&quot;: &quot;96&quot;,\r\n                &quot;nominalAmount&quot;: 24000000.0\r\n            }\r\n        ],\r\n        &quot;Description&quot;: &quot;Microsoft&quot;,\r\n        &quot;isin&quot;: &quot;ISIN2&quot;\r\n    },\r\n{\r\n        &quot;Description&quot;: &quot;Tesla&quot;,\r\n        &quot;isin&quot;: &quot;ISIN3&quot;\r\n    }]\r\n```\r\n\r\nThe ideal output wuld be list every Isin and referenceDate with all the transactionDetails (three per Isin). The table below represents what I mean:\r\n\r\n| isin | Description | tradeDate | price | nominalAmount |\r\n| --- | --- | --- | --- | --- |\r\n| ISIN1 | Apple | 2023-02-13T00:00:00 | 90 | 26000000.0 |\r\n| ISIN1 | Apple | 2023-02-09T00:00:00 | 95 | 1000000.0 |\r\n| ISIN1 | Apple | 2023-02-13T00:00:00 | 97 | 30000000.0 |\r\n| ISIN2 | Microsoft | 2023-02-13T00:00:00 | 88 | 27000000.0 |\r\n| ISIN2 | Microsoft | 2023-02-13T00:00:00 | 99 | 1000000.0 |\r\n| ISIN2 | Microsoft | 2023-02-13T00:00:00 | 96 | 24000000.0 |\r\n| ISIN3 | Tesla | - | - | - |\r\n\r\n**Important : as per the example, not all the instruments have transactionDetails associated with them, but I need to extract them as well into the table (of course with null values in the transactionDetails field).**\r\n\r\nI tried in different ways.\r\n\r\n1- first one is creating a Json Metadata, I tried the following ways but never getting the desired result, in the screenshots my tentatives:\r\n\r\nWith **$\\[\\*\\]** absolute path expression\r\n\r\n[![enter image description here](https://i.stack.imgur.com/vyqqJ.png)](https://i.stack.imgur.com/vyqqJ.png)\r\n\r\nWith **$\\[\\].transactionDetails\\[\\*\\]** absolute path expression\r\n\r\n[![enter image description here](https://i.stack.imgur.com/RTSzW.png)](https://i.stack.imgur.com/RTSzW.png)\r\n\r\nAs you can see either the &quot;root values&quot; (Isin, Description) or the transactionDetails are written as an array in the extracted fields instead of being processed as a table per my previous example. Am I making mistakes in setting Absolute or relative path expressions?\r\n\r\n2 - Then I tried by using tExtractJsonfields, and I actually succeeded in doing what I wanted but in a very complicated way:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/obptC.png)](https://i.stack.imgur.com/obptC.png)\r\n\r\nIn this example I&#39;m using different files but with same Json structure.  \r\nHere I have two identical tInputJsonFile with &quot;$\\[\\*\\]&quot; as an absolute path expression and with relative path expressions as following  \r\n\\- &quot;isin&quot;  \r\n\\- &quot;Description&quot;  \r\n\\- &quot;transactionDetails\\[\\*\\]&quot;\r\n\r\nThen in first tExtractJsonFields I&#39;m extracting Isin, Description and transactionDetails remains as a field with array inside. In the second tExtractJsonFields I&#39;m looping over transactionDetails to extract tradeDate, price and nominalAmount (but this will extract only the records with transactionDetails associated with them, not the others).\r\n\r\nSo finally in order to join all instruments (the ones with transacionDetails and the ones without) I had to create two tMap (to make the two output dataset having the exact same columns) and then concatenating them with a tUnite component.\r\n\r\nIs there a more simple and intuitive way to achieve the expected result?","title":"Parse a nested JSON array with Talend Open Studio and make it a table","body":"<p>I need to parse a Json nested file and extract a csv using Talend Open Studio. The objective is transform the nested Json format into a table.</p>\n<p>The Json has the following structure:</p>\n<p>It's an array of elements (financial instruments in my specific case) and each element has another array level which represents transactions per instrument.</p>\n<p>In the example below we have three elements (represented by fields <strong>Isin</strong> and <strong>Description</strong>) and for each one there could be a set of <strong>transactionDetails.</strong></p>\n<pre><code>[{\n        &quot;transactionDetails&quot;: [\n            {\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\n                &quot;price&quot;: &quot;90&quot;,\n                &quot;nominalAmount&quot;: 26000000.0\n            },\n            {\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\n                &quot;price&quot;: &quot;95&quot;,\n                &quot;nominalAmount&quot;: 1000000.0\n            },\n            {\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\n                &quot;price&quot;: &quot;97&quot;,\n                &quot;nominalAmount&quot;: 30000000.0\n            }\n        ],\n        &quot;Description&quot;: &quot;Apple&quot;,\n        &quot;isin&quot;: &quot;ISIN1&quot;\n    },\n{\n\n        &quot;transactionDetails&quot;: [\n            {\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\n                &quot;price&quot;: &quot;88&quot;,\n                &quot;nominalAmount&quot;: 27000000.0\n            },\n            {\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\n                &quot;price&quot;: &quot;99&quot;,\n                &quot;nominalAmount&quot;: 1000000.0\n            },\n            {\n                &quot;tradeDate&quot;: &quot;2023-02-13T00:00:00&quot;,\n                &quot;price&quot;: &quot;96&quot;,\n                &quot;nominalAmount&quot;: 24000000.0\n            }\n        ],\n        &quot;Description&quot;: &quot;Microsoft&quot;,\n        &quot;isin&quot;: &quot;ISIN2&quot;\n    },\n{\n        &quot;Description&quot;: &quot;Tesla&quot;,\n        &quot;isin&quot;: &quot;ISIN3&quot;\n    }]\n</code></pre>\n<p>The ideal output wuld be list every Isin and referenceDate with all the transactionDetails (three per Isin). The table below represents what I mean:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>isin</th>\n<th>Description</th>\n<th>tradeDate</th>\n<th>price</th>\n<th>nominalAmount</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ISIN1</td>\n<td>Apple</td>\n<td>2023-02-13T00:00:00</td>\n<td>90</td>\n<td>26000000.0</td>\n</tr>\n<tr>\n<td>ISIN1</td>\n<td>Apple</td>\n<td>2023-02-09T00:00:00</td>\n<td>95</td>\n<td>1000000.0</td>\n</tr>\n<tr>\n<td>ISIN1</td>\n<td>Apple</td>\n<td>2023-02-13T00:00:00</td>\n<td>97</td>\n<td>30000000.0</td>\n</tr>\n<tr>\n<td>ISIN2</td>\n<td>Microsoft</td>\n<td>2023-02-13T00:00:00</td>\n<td>88</td>\n<td>27000000.0</td>\n</tr>\n<tr>\n<td>ISIN2</td>\n<td>Microsoft</td>\n<td>2023-02-13T00:00:00</td>\n<td>99</td>\n<td>1000000.0</td>\n</tr>\n<tr>\n<td>ISIN2</td>\n<td>Microsoft</td>\n<td>2023-02-13T00:00:00</td>\n<td>96</td>\n<td>24000000.0</td>\n</tr>\n<tr>\n<td>ISIN3</td>\n<td>Tesla</td>\n<td>-</td>\n<td>-</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>Important : as per the example, not all the instruments have transactionDetails associated with them, but I need to extract them as well into the table (of course with null values in the transactionDetails field).</strong></p>\n<p>I tried in different ways.</p>\n<p>1- first one is creating a Json Metadata, I tried the following ways but never getting the desired result, in the screenshots my tentatives:</p>\n<p>With <strong>$[*]</strong> absolute path expression</p>\n<p><a href=\"https://i.stack.imgur.com/vyqqJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vyqqJ.png\" alt=\"enter image description here\" /></a></p>\n<p>With <strong>$[].transactionDetails[*]</strong> absolute path expression</p>\n<p><a href=\"https://i.stack.imgur.com/RTSzW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RTSzW.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see either the &quot;root values&quot; (Isin, Description) or the transactionDetails are written as an array in the extracted fields instead of being processed as a table per my previous example. Am I making mistakes in setting Absolute or relative path expressions?</p>\n<p>2 - Then I tried by using tExtractJsonfields, and I actually succeeded in doing what I wanted but in a very complicated way:</p>\n<p><a href=\"https://i.stack.imgur.com/obptC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/obptC.png\" alt=\"enter image description here\" /></a></p>\n<p>In this example I'm using different files but with same Json structure.<br />\nHere I have two identical tInputJsonFile with &quot;$[*]&quot; as an absolute path expression and with relative path expressions as following<br />\n- &quot;isin&quot;<br />\n- &quot;Description&quot;<br />\n- &quot;transactionDetails[*]&quot;</p>\n<p>Then in first tExtractJsonFields I'm extracting Isin, Description and transactionDetails remains as a field with array inside. In the second tExtractJsonFields I'm looping over transactionDetails to extract tradeDate, price and nominalAmount (but this will extract only the records with transactionDetails associated with them, not the others).</p>\n<p>So finally in order to join all instruments (the ones with transacionDetails and the ones without) I had to create two tMap (to make the two output dataset having the exact same columns) and then concatenating them with a tUnite component.</p>\n<p>Is there a more simple and intuitive way to achieve the expected result?</p>\n"},{"tags":["java","selenium-webdriver","testing","datatable","cucumber"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1697846555,"post_id":77289142,"comment_id":136335305,"body_markdown":"Did you mean to remove from `dataTableRows` instead?","body":"Did you mean to remove from <code>dataTableRows</code> instead?"}],"owner":{"account_id":29665449,"reputation":1,"user_id":22736088,"display_name":"Preksha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697221914,"creation_date":1697212379,"question_id":77289142,"body_markdown":"I am validating HTML Table with the datatable using Cucumber Java and have written the following method. \r\n\r\n```\r\n    public void verifyHtmlTableData(DataTable dataTable) {\r\n        WebElement htmlTableElement = webDriver.findElement(By.xpath(&quot;//table[@class=&#39;tablename&#39;]&quot;));\r\n        List&lt;WebElement&gt; rowElements = htmlTableElement.findElements(By.tagName(&quot;tr&quot;));\r\n        List&lt;List&lt;String&gt;&gt; dataTableRows = dataTable.asLists(); //outer List&lt;&gt; is rows, inner List&lt;&gt; is cells\r\n\r\n        // Check number of rows in Datatable and html table are equal\r\n       Assert.assertEquals(&quot;Datatable rows should match the HtmlTable rows&quot;, dataTableRows.size(), rowElements.size());\r\n\r\n        //Verify table header\r\n        List&lt;WebElement&gt; headerElements = rowElements.get(0).findElements(By.xpath(&quot;.//th&quot;)); //get all the headers from the row WebElement\r\n        compareTableData(headerElements, dataTableRows.get(0),0 );\r\n\r\n        rowElements.remove(0);\r\n        for (List&lt;String&gt; row : dataTableRows) { //loop through every row in the DataTable input\r\n            int rowIdx = dataTableRows.indexOf(row);\r\n            WebElement rowElem = rowElements.get(rowIdx); //get the row WebElement based on the index of the current row in the DataTable\r\n            List&lt;WebElement&gt; cellElements = rowElem.findElements(By.xpath(&quot;.//td&quot;)); //get all the cells from the row WebElement\r\n            compareTableData(cellElements, row, rowIdx);\r\n        }\r\n    }\r\n\r\n    public void compareTableData(List&lt;WebElement&gt; cellElements, List&lt;String&gt; row, int rowIdx){\r\n        for (String expectedCell : row) { //loop through every cell in the current DataTable row\r\n            int cellIdx = row.indexOf(expectedCell);\r\n            String actualCell = cellElements.get(cellIdx).getText();\r\n\r\n            if (expectedCell == null) {\r\n                expectedCell = &quot;&quot;;\r\n            }\r\n\r\n            log.info(&quot;DataTable row &quot; + rowIdx + &quot;, cell &quot; + cellIdx + &quot;: &quot; + expectedCell);\r\n            log.info(&quot;Actual value on the page: &quot; + actualCell);\r\n\r\n            Assert.assertEquals(&quot;Expected value of cell should match actual value of cell&quot;, expectedCell, actualCell);\r\n        }\r\n\r\n    }\r\n```\r\n\r\n\r\nI am not able to remove the header table from the Datatable, hence this is not working. Can anyone help please?\r\n\r\n\r\nI tried dataTableRows.remove(0); But it only removes first element","title":"Validating HTML Table with the datatable using Cucumber Java","body":"<p>I am validating HTML Table with the datatable using Cucumber Java and have written the following method.</p>\n<pre><code>    public void verifyHtmlTableData(DataTable dataTable) {\n        WebElement htmlTableElement = webDriver.findElement(By.xpath(&quot;//table[@class='tablename']&quot;));\n        List&lt;WebElement&gt; rowElements = htmlTableElement.findElements(By.tagName(&quot;tr&quot;));\n        List&lt;List&lt;String&gt;&gt; dataTableRows = dataTable.asLists(); //outer List&lt;&gt; is rows, inner List&lt;&gt; is cells\n\n        // Check number of rows in Datatable and html table are equal\n       Assert.assertEquals(&quot;Datatable rows should match the HtmlTable rows&quot;, dataTableRows.size(), rowElements.size());\n\n        //Verify table header\n        List&lt;WebElement&gt; headerElements = rowElements.get(0).findElements(By.xpath(&quot;.//th&quot;)); //get all the headers from the row WebElement\n        compareTableData(headerElements, dataTableRows.get(0),0 );\n\n        rowElements.remove(0);\n        for (List&lt;String&gt; row : dataTableRows) { //loop through every row in the DataTable input\n            int rowIdx = dataTableRows.indexOf(row);\n            WebElement rowElem = rowElements.get(rowIdx); //get the row WebElement based on the index of the current row in the DataTable\n            List&lt;WebElement&gt; cellElements = rowElem.findElements(By.xpath(&quot;.//td&quot;)); //get all the cells from the row WebElement\n            compareTableData(cellElements, row, rowIdx);\n        }\n    }\n\n    public void compareTableData(List&lt;WebElement&gt; cellElements, List&lt;String&gt; row, int rowIdx){\n        for (String expectedCell : row) { //loop through every cell in the current DataTable row\n            int cellIdx = row.indexOf(expectedCell);\n            String actualCell = cellElements.get(cellIdx).getText();\n\n            if (expectedCell == null) {\n                expectedCell = &quot;&quot;;\n            }\n\n            log.info(&quot;DataTable row &quot; + rowIdx + &quot;, cell &quot; + cellIdx + &quot;: &quot; + expectedCell);\n            log.info(&quot;Actual value on the page: &quot; + actualCell);\n\n            Assert.assertEquals(&quot;Expected value of cell should match actual value of cell&quot;, expectedCell, actualCell);\n        }\n\n    }\n</code></pre>\n<p>I am not able to remove the header table from the Datatable, hence this is not working. Can anyone help please?</p>\n<p>I tried dataTableRows.remove(0); But it only removes first element</p>\n"},{"tags":["java","operators","expression","unary-operator"],"comments":[{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":0,"creation_date":1697216876,"post_id":77289531,"comment_id":136256814,"body_markdown":"x++ is post increment operation. The value of x++ expression is x. Then x is incremented. So, your code becomes x = 2 + 1 = 3.","body":"x++ is post increment operation. The value of x++ expression is x. Then x is incremented. So, your code becomes x = 2 + 1 = 3."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697216924,"post_id":77289531,"comment_id":136256822,"body_markdown":"From [the Java Language Specification](https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.14.2): “The value of the postfix increment expression is the value of the variable *before* the new value is stored.” (emphasis is from the spec, not added by me)","body":"From <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.14.2\" rel=\"nofollow noreferrer\">the Java Language Specification</a>: “The value of the postfix increment expression is the value of the variable <i>before</i> the new value is stored.” (emphasis is from the spec, not added by me)"}],"answers":[{"tags":[],"owner":{"account_id":15904329,"reputation":63,"user_id":11475945,"display_name":"rufo123"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697218069,"creation_date":1697218069,"answer_id":77289658,"question_id":77289531,"body_markdown":"Let me try to explain this.\r\n\r\nIf you enclose the (x++). It is still evaluated, but its value is used before the increment (++) operation.\r\n\r\nThe order of your code goes like this:\r\n 1. (x++) is evaluated first. At this point x is still 1 and (x++) returns the original value of x **(1)** AND THEN increments x to 2.\r\n 2. After the x++ in parentheses is evaluated, the expression becomes x = 2 + 1, as the:\r\n\r\n    *Post-increment operator x++ returns the current value of x and then increments x.*\r\n    *Therefore, in the expression *x++** returns the current value of x, **(which is 1)** and then increments x to 2.\r\n   \r\n    So at the end of this step the expression x = 2 + 1 is 3.\r\n\r\n 3. At the end the result of the addition (3) is assigned to x. So the x is now 3.\r\n\r\n**For your code to return 4, you should use &quot;++x&quot; (pre-increment operator)\r\nThis operator increments x first then returns the updated value of x. if you use the ++x in an expression, x is incremented before its value is used.** \r\n\r\nHopefully I explained it well. :D","title":"Parentheses and Unary Operator Precedence in Java","body":"<p>Let me try to explain this.</p>\n<p>If you enclose the (x++). It is still evaluated, but its value is used before the increment (++) operation.</p>\n<p>The order of your code goes like this:</p>\n<ol>\n<li><p>(x++) is evaluated first. At this point x is still 1 and (x++) returns the original value of x <strong>(1)</strong> AND THEN increments x to 2.</p>\n</li>\n<li><p>After the x++ in parentheses is evaluated, the expression becomes x = 2 + 1, as the:</p>\n<p><em>Post-increment operator x++ returns the current value of x and then increments x.</em>\n<em>Therefore, in the expression <em>x++</em></em> returns the current value of x, <strong>(which is 1)</strong> and then increments x to 2.</p>\n<p>So at the end of this step the expression x = 2 + 1 is 3.</p>\n</li>\n<li><p>At the end the result of the addition (3) is assigned to x. So the x is now 3.</p>\n</li>\n</ol>\n<p><strong>For your code to return 4, you should use &quot;++x&quot; (pre-increment operator)\nThis operator increments x first then returns the updated value of x. if you use the ++x in an expression, x is incremented before its value is used.</strong></p>\n<p>Hopefully I explained it well. :D</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697221827,"creation_date":1697221827,"answer_id":77289975,"question_id":77289531,"body_markdown":"&gt; _&quot;... As per the order of precedence of operators, `()` is evaluated before unary operators like `++` or `--`. ...&quot;_\r\n\r\nThe expression will be evaluated from _left_ to _right_.\\\r\n_[The Java&#174; Language Specification &amp;ndash; Chapter&amp;nbsp;15.&amp;nbsp;Expressions](https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.7)_\r\n\r\n&gt; _&quot;... Does this mean that the expression was evaluated without considering the `()` around `x++`, or am I missing something?&quot;_\r\n\r\nThe parentheses are not denoting when the _unary operator_ is evaluated.\r\n\r\nI suggest reviewing the following _Java_ tutorial.\\\r\n_[Operators (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Language Basics)](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)_","title":"Parentheses and Unary Operator Precedence in Java","body":"<blockquote>\n<p><em>&quot;... As per the order of precedence of operators, <code>()</code> is evaluated before unary operators like <code>++</code> or <code>--</code>. ...&quot;</em></p>\n</blockquote>\n<p>The expression will be evaluated from <em>left</em> to <em>right</em>.<br />\n<em><a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.7\" rel=\"nofollow noreferrer\">The Java® Language Specification – Chapter 15. Expressions</a></em></p>\n<blockquote>\n<p><em>&quot;... Does this mean that the expression was evaluated without considering the <code>()</code> around <code>x++</code>, or am I missing something?&quot;</em></p>\n</blockquote>\n<p>The parentheses are not denoting when the <em>unary operator</em> is evaluated.</p>\n<p>I suggest reviewing the following <em>Java</em> tutorial.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html\" rel=\"nofollow noreferrer\">Operators (The Java™ Tutorials &gt; Learning the Java Language &gt; Language Basics)</a></em></p>\n"}],"owner":{"account_id":22290558,"reputation":137,"user_id":16517506,"display_name":"Chinmay Krishna"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697221827,"creation_date":1697216484,"question_id":77289531,"body_markdown":"As per the order of precedence of operators, `()` is evaluated before unary operators like `++` or `--`. But let us consider the following code:-\r\n\r\n```java\r\nint x = 1;\r\nx = 2 + (x++);\r\n```\r\n\r\nIf `x++` is executed first, the value of `x` should have been updated to 2, and hence the value of x should have been `4`. However, on executing the code, the value of `x` is `3`. Does this mean that the expression was evaluated without considering the `()` around `x++`, or am I missing something?","title":"Parentheses and Unary Operator Precedence in Java","body":"<p>As per the order of precedence of operators, <code>()</code> is evaluated before unary operators like <code>++</code> or <code>--</code>. But let us consider the following code:-</p>\n<pre class=\"lang-java prettyprint-override\"><code>int x = 1;\nx = 2 + (x++);\n</code></pre>\n<p>If <code>x++</code> is executed first, the value of <code>x</code> should have been updated to 2, and hence the value of x should have been <code>4</code>. However, on executing the code, the value of <code>x</code> is <code>3</code>. Does this mean that the expression was evaluated without considering the <code>()</code> around <code>x++</code>, or am I missing something?</p>\n"},{"tags":["java","casting","widening"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1697202789,"post_id":77287985,"comment_id":136253894,"body_markdown":"`Math.pow(b, 4) * Math.pow(c, 2) * d` will do those multiplications in a `double` context, as the first multiplication is between `double`s, and `d` will be cast to a `double` in the second multiplication. No `int`s involved here.","body":"<code>Math.pow(b, 4) * Math.pow(c, 2) * d</code> will do those multiplications in a <code>double</code> context, as the first multiplication is between <code>double</code>s, and <code>d</code> will be cast to a <code>double</code> in the second multiplication. No <code>int</code>s involved here."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1697203092,"post_id":77287985,"comment_id":136253946,"body_markdown":"Note that multiplying  large`double` results in approximations.  If you need accurate results, you should cast `b` and `c` to `long` and then shift by 2 and 1 respectively. In this case you will have to cast to long before shifting. Or better yet, use `BigInteger`.","body":"Note that multiplying  large<code>double</code> results in approximations.  If you need accurate results, you should cast <code>b</code> and <code>c</code> to <code>long</code> and then shift by 2 and 1 respectively. In this case you will have to cast to long before shifting. Or better yet, use <code>BigInteger</code>."},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1697204050,"post_id":77287985,"comment_id":136254131,"body_markdown":"Widening (of a primitive data type) and Upcasting (of a derived data type) happen automatically, so when you assign a type lower in the hierarchy to a type that is higher in the hierarchy you don&#39;t have to manually specify the type.","body":"Widening (of a primitive data type) and Upcasting (of a derived data type) happen automatically, so when you assign a type lower in the hierarchy to a type that is higher in the hierarchy you don&#39;t have to manually specify the type."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697205784,"post_id":77287985,"comment_id":136254475,"body_markdown":"Your title doesn’t agree with your question. You don’t have to cast any operand here, and I don’t actually see the point of casting the result.","body":"Your title doesn’t agree with your question. You don’t have to cast any operand here, and I don’t actually see the point of casting the result."},{"owner":{"account_id":26482522,"reputation":39,"user_id":20121574,"display_name":"Renaud Marmion"},"score":0,"creation_date":1697216133,"post_id":77287985,"comment_id":136256682,"body_markdown":"@user207421 i need to cast the result to long because it&#39;s a key for a Map","body":"@user207421 i need to cast the result to long because it&#39;s a key for a Map"}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697205713,"post_id":77288063,"comment_id":136254459,"body_markdown":"What does ‘you indicate this by casting to `long` mean?","body":"What does ‘you indicate this by casting to <code>long</code> mean?"},{"owner":{"account_id":26482522,"reputation":39,"user_id":20121574,"display_name":"Renaud Marmion"},"score":0,"creation_date":1697213842,"post_id":77288063,"comment_id":136256250,"body_markdown":"I don&#39;t understand why you mentionned `double`. I only work with `int` and `long`.","body":"I don&#39;t understand why you mentionned <code>double</code>. I only work with <code>int</code> and <code>long</code>."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1697214974,"post_id":77288063,"comment_id":136256489,"body_markdown":"@RenaudMarmion you are implicitly working with `double` since `Math.pow()` converts its arguments to double and returns a double. During the conversion process you may loose precision.","body":"@RenaudMarmion you are implicitly working with <code>double</code> since <code>Math.pow()</code> converts its arguments to double and returns a double. During the conversion process you may loose precision."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1697227408,"post_id":77288063,"comment_id":136258474,"body_markdown":"`Math.pow` only exists for `double`. By using `Math.pow`, everything turns into `double` math. You can convert back and forth, but, if your numbers exceed `2^52` this will introduce rounding errors.","body":"<code>Math.pow</code> only exists for <code>double</code>. By using <code>Math.pow</code>, everything turns into <code>double</code> math. You can convert back and forth, but, if your numbers exceed <code>2^52</code> this will introduce rounding errors."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":4,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1697202965,"creation_date":1697202965,"answer_id":77288063,"question_id":77287985,"body_markdown":"&gt; I&#39;m sure that &quot;a&quot; will not exceed the size of a long.\r\n\r\nThat&#39;s not the correct border value.\r\n\r\n`double` are 64-bit values. Fundamental informatics theory proves that therefore there can be _at most_ 2&lt;sup&gt;64&lt;/sup&gt; unique values that a double can represent. Which is weird, in that double nominally says it can represent &#39;any number&#39;, and there way more than 2&lt;sup&gt;64&lt;/sup&gt; numbers in existence.\r\n\r\nSo, in practice, there are a few (slightly less than 2&lt;sup&gt;64&lt;/sup&gt;) numbers that double can represent and any other value is silently rounded to the nearest such &#39;blessed&#39; value.\r\n\r\nAs a trivial example, 0.1 is __not__ one of those values. Hence why this:\r\n\r\n```\r\ndouble v = 0.0;\r\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\r\nSystem.out.println(1.0 == v);\r\n```\r\n\r\nactually prints false. Suggesting that double math says 10 * 0.1 is somehow not 1.0. Which is really how it works.\r\n\r\nWith that in mind, doubles can accurately represent each and every integral value up to 2^53. Not 2^64 which is what longs can represent. Thus, there are numbers that longs can represent (such as 2^62-13) but doubles cannot:\r\n\r\n```\r\nlong x = (1L &lt;&lt; 62) - 13;\r\nSystem.out.println(x);\r\ndouble v = x;\r\nlong y = (long) v;\r\nSystem.out.println(y);\r\n```\r\n\r\nthese do not print the same number.\r\n\r\n&gt; Do I have to cast to a long?\r\n\r\nYes. Every time.\r\n\r\nThe reason is a rather unsatisfactory &#39;cuz spec says so&#39;. The above explanation goes some way as to explain _why_ the spec says so: You will need to indicate as programmer that you acknowledge that there&#39;s a limit on accuracy here; if these numbers go beyond 2^52, it won&#39;t quite be accurate. You indicate this by casting to long.\r\n","title":"Do I need to cast each operand to long when using Math.pow in a multiplication?","body":"<blockquote>\n<p>I'm sure that &quot;a&quot; will not exceed the size of a long.</p>\n</blockquote>\n<p>That's not the correct border value.</p>\n<p><code>double</code> are 64-bit values. Fundamental informatics theory proves that therefore there can be <em>at most</em> 2<sup>64</sup> unique values that a double can represent. Which is weird, in that double nominally says it can represent 'any number', and there way more than 2<sup>64</sup> numbers in existence.</p>\n<p>So, in practice, there are a few (slightly less than 2<sup>64</sup>) numbers that double can represent and any other value is silently rounded to the nearest such 'blessed' value.</p>\n<p>As a trivial example, 0.1 is <strong>not</strong> one of those values. Hence why this:</p>\n<pre><code>double v = 0.0;\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\nSystem.out.println(1.0 == v);\n</code></pre>\n<p>actually prints false. Suggesting that double math says 10 * 0.1 is somehow not 1.0. Which is really how it works.</p>\n<p>With that in mind, doubles can accurately represent each and every integral value up to 2^53. Not 2^64 which is what longs can represent. Thus, there are numbers that longs can represent (such as 2^62-13) but doubles cannot:</p>\n<pre><code>long x = (1L &lt;&lt; 62) - 13;\nSystem.out.println(x);\ndouble v = x;\nlong y = (long) v;\nSystem.out.println(y);\n</code></pre>\n<p>these do not print the same number.</p>\n<blockquote>\n<p>Do I have to cast to a long?</p>\n</blockquote>\n<p>Yes. Every time.</p>\n<p>The reason is a rather unsatisfactory 'cuz spec says so'. The above explanation goes some way as to explain <em>why</em> the spec says so: You will need to indicate as programmer that you acknowledge that there's a limit on accuracy here; if these numbers go beyond 2^52, it won't quite be accurate. You indicate this by casting to long.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1697220898,"creation_date":1697217290,"answer_id":77289604,"question_id":77287985,"body_markdown":"&gt; _&quot;... Should I cast every result of `Math.pow`, or will the JVM handle the casting for the entire operation by itself? ...&quot;_\r\n\r\nJust use the _double_ value, that the _pow_ method returns.\\\r\nIt will hold an _int_ value.\r\n\r\n```java\r\ndouble a = Math.pow(b, 4) * (Math.pow(c, 2) * d);\r\n```\r\n\r\nRealistically, you should be using the _[BigDecimal](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html)_ or _[BigInteger](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigInteger.html)_ class, if your value is expected to exceed the _64-bit_ container.\r\n\r\nI recommend the _String_ constructor method.\r\n\r\n```java\r\nBigInteger b = new BigInteger(&quot;&quot;),\r\n           c = new BigInteger(&quot;&quot;),\r\n           d = new BigInteger(&quot;&quot;);\r\nBigInteger a = b.pow(4).multiply(c.pow(2).multiply(d));\r\n```","title":"Do I need to cast each operand to long when using Math.pow in a multiplication?","body":"<blockquote>\n<p><em>&quot;... Should I cast every result of <code>Math.pow</code>, or will the JVM handle the casting for the entire operation by itself? ...&quot;</em></p>\n</blockquote>\n<p>Just use the <em>double</em> value, that the <em>pow</em> method returns.<br />\nIt will hold an <em>int</em> value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double a = Math.pow(b, 4) * (Math.pow(c, 2) * d);\n</code></pre>\n<p>Realistically, you should be using the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a></em> or <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigInteger.html\" rel=\"nofollow noreferrer\">BigInteger</a></em> class, if your value is expected to exceed the <em>64-bit</em> container.</p>\n<p>I recommend the <em>String</em> constructor method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>BigInteger b = new BigInteger(&quot;&quot;),\n           c = new BigInteger(&quot;&quot;),\n           d = new BigInteger(&quot;&quot;);\nBigInteger a = b.pow(4).multiply(c.pow(2).multiply(d));\n</code></pre>\n"}],"owner":{"account_id":26482522,"reputation":39,"user_id":20121574,"display_name":"Renaud Marmion"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1697220898,"creation_date":1697202347,"question_id":77287985,"body_markdown":"I have many operations to perform with large numbers in Java of this sort:\r\n\r\n    int b = [big number];\r\n    int c = [big number];\r\n    int d = [big number];\r\n    long a = (long) (Math.pow(b, 4) * Math.pow(c, 2) * d);\r\n\r\nI&#39;m sure that `a` will not exceed the size of a long. However, it&#39;s possible that `Math.pow(b, 4)` or `Math.pow(c, 2)` might exceed the size of an int. Should I cast every result of `Math.pow`, or will the JVM handle the casting for the entire operation by itself?\r\n","title":"Do I need to cast each operand to long when using Math.pow in a multiplication?","body":"<p>I have many operations to perform with large numbers in Java of this sort:</p>\n<pre><code>int b = [big number];\nint c = [big number];\nint d = [big number];\nlong a = (long) (Math.pow(b, 4) * Math.pow(c, 2) * d);\n</code></pre>\n<p>I'm sure that <code>a</code> will not exceed the size of a long. However, it's possible that <code>Math.pow(b, 4)</code> or <code>Math.pow(c, 2)</code> might exceed the size of an int. Should I cast every result of <code>Math.pow</code>, or will the JVM handle the casting for the entire operation by itself?</p>\n"},{"tags":["java","solr","solrcloud"],"owner":{"account_id":3395618,"reputation":1,"user_id":2849326,"display_name":"user2849326"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697220171,"creation_date":1697220171,"question_id":77289834,"body_markdown":"In Schema file: \r\n [enter image description here](https://i.stack.imgur.com/o28Lu.png)\r\n\r\nIn Solrconfig.xml: \r\n[enter image description here](https://i.stack.imgur.com/tR9mW.png)\r\n\r\nIs there any other way to work default filters in solr 8.11.2 and Its worked fine with solr 6.5 version. Can someone please tell me any solution for this. Thank you","title":"Solr 8.11.2 Default Filters are not working. I have used below one but still its not working","body":"<p>In Schema file:\n<a href=\"https://i.stack.imgur.com/o28Lu.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>In Solrconfig.xml:\n<a href=\"https://i.stack.imgur.com/tR9mW.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Is there any other way to work default filters in solr 8.11.2 and Its worked fine with solr 6.5 version. Can someone please tell me any solution for this. Thank you</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1697129224,"post_id":77282146,"comment_id":136244052,"body_markdown":"What&#39;s the point of this? Sounds like you&#39;re trying to build a linked list and keep track of all nodes without going through the list, or it&#39;s a [xy problem](https://xyproblem.info/)?","body":"What&#39;s the point of this? Sounds like you&#39;re trying to build a linked list and keep track of all nodes without going through the list, or it&#39;s a <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">xy problem</a>?"}],"answers":[{"tags":[],"owner":{"account_id":28637956,"reputation":1,"user_id":21927723,"display_name":"Tamion"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1697219828,"creation_date":1697127012,"answer_id":77282223,"question_id":77282146,"body_markdown":"I was able to do it myself:\r\n\r\n    List&lt;MyClass&gt; classes = new ArrayList&lt;&gt;();\r\n    for(MyClass myclass = this; myclass != null; myclass = myclass.anotherinstance) {\r\n        classes.add(myclass);\r\n    }\r\n","title":"Getting all instances of an object contained in itself","body":"<p>I was able to do it myself:</p>\n<pre><code>List&lt;MyClass&gt; classes = new ArrayList&lt;&gt;();\nfor(MyClass myclass = this; myclass != null; myclass = myclass.anotherinstance) {\n    classes.add(myclass);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697127022,"creation_date":1697127022,"answer_id":77282224,"question_id":77282146,"body_markdown":"Use a recursive function to add the object to the list.\r\n\r\n```\r\nvoid recursiveList(List&lt;Object&gt; myList, Object myObjectWAtrribute) {\r\n    if (myObjectWAtrribute != null &amp;&amp; myObjectWAtrribute.getCreatedinstance() != null) {\r\n        myList.add(myObjectWAtrribute.getCreatedinstance());\r\n        recursiveList(myList, myObjectWAtrribute.getCreatedinstance());\r\n    }\r\n}\r\n```\r\n\r\n```\r\nList&lt;MyClass&gt; myclasses = new ArrayList&lt;&gt;();\r\nMyClass myclass = new MyClass();\r\n// add the first element\r\nmyclasses.add(myclass);\r\n// get all subelements\r\nrecursiveList(myclasses, myclass);\r\n```\r\n","title":"Getting all instances of an object contained in itself","body":"<p>Use a recursive function to add the object to the list.</p>\n<pre><code>void recursiveList(List&lt;Object&gt; myList, Object myObjectWAtrribute) {\n    if (myObjectWAtrribute != null &amp;&amp; myObjectWAtrribute.getCreatedinstance() != null) {\n        myList.add(myObjectWAtrribute.getCreatedinstance());\n        recursiveList(myList, myObjectWAtrribute.getCreatedinstance());\n    }\n}\n</code></pre>\n<pre><code>List&lt;MyClass&gt; myclasses = new ArrayList&lt;&gt;();\nMyClass myclass = new MyClass();\n// add the first element\nmyclasses.add(myclass);\n// get all subelements\nrecursiveList(myclasses, myclass);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20263093,"reputation":11,"user_id":14860994,"display_name":"Kaplan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697127178,"creation_date":1697127131,"answer_id":77282230,"question_id":77282146,"body_markdown":"Well you can create a while loop and a buffer variable where you will store the actual instance that you are pushing to the list, then you go with the loop until there is no more nested instances or in other words the property is null. Something like this\r\n\r\n    MyClass buffer = myclass;\r\n    while(buffer) {\r\n       myclasses.add(buffer);\r\n       buffer = myclass.createdinstance;\r\n    }\r\n","title":"Getting all instances of an object contained in itself","body":"<p>Well you can create a while loop and a buffer variable where you will store the actual instance that you are pushing to the list, then you go with the loop until there is no more nested instances or in other words the property is null. Something like this</p>\n<pre><code>MyClass buffer = myclass;\nwhile(buffer) {\n   myclasses.add(buffer);\n   buffer = myclass.createdinstance;\n}\n</code></pre>\n"}],"owner":{"account_id":28637956,"reputation":1,"user_id":21927723,"display_name":"Tamion"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1697402960,"accepted_answer_id":77282223,"answer_count":3,"score":-2,"last_activity_date":1697219828,"creation_date":1697126345,"question_id":77282146,"body_markdown":"I am not even sure how to really title this. I have a class in Java that creates an instance of itself and stores them in a variable however that instance also creates an instance of itself and stores it in a variable. What I want to do is get all the instances in a list. \r\n\r\nI really couldn&#39;t come up with a solution. I&#39;m doing something like this:\r\n\r\n```java\r\nList&lt;MyClass&gt; myclasses = new ArrayList&lt;&gt;();\r\nMyClass myclass = new MyClass();\r\nmyclasses.add(myclass);\r\nmyclasses.add(myclass.createdinstance);\r\nmyclasses.add(myclass.createdinstance.createdinstance);\r\n...\r\n```\r\n\r\nIt just doesn&#39;t make sense to go on forever.\r\n\r\nNOTE: it doesn&#39;t create these instances infinitely, so it&#39;s not like I want to store an infinite amount of MyClasses in there.\r\n\r\n","title":"Getting all instances of an object contained in itself","body":"<p>I am not even sure how to really title this. I have a class in Java that creates an instance of itself and stores them in a variable however that instance also creates an instance of itself and stores it in a variable. What I want to do is get all the instances in a list.</p>\n<p>I really couldn't come up with a solution. I'm doing something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;MyClass&gt; myclasses = new ArrayList&lt;&gt;();\nMyClass myclass = new MyClass();\nmyclasses.add(myclass);\nmyclasses.add(myclass.createdinstance);\nmyclasses.add(myclass.createdinstance.createdinstance);\n...\n</code></pre>\n<p>It just doesn't make sense to go on forever.</p>\n<p>NOTE: it doesn't create these instances infinitely, so it's not like I want to store an infinite amount of MyClasses in there.</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"answers":[{"tags":[],"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1569917377,"creation_date":1569917377,"answer_id":58180559,"question_id":58180481,"body_markdown":"What you&#39;re doing now is correct - you have to read the document and examine the snapshot to see if the field exists.  There is no shorter way to do this.","title":"How to check if the field exists in firestore?","body":"<p>What you're doing now is correct - you have to read the document and examine the snapshot to see if the field exists.  There is no shorter way to do this.</p>\n"},{"comments":[{"owner":{"account_id":15578493,"reputation":67,"user_id":11239001,"display_name":"Daniel Saito"},"score":1,"creation_date":1630498089,"post_id":58180615,"comment_id":121971170,"body_markdown":"I think OP is asking about how to check the existence of a Field inside a document, not a document itself.","body":"I think OP is asking about how to check the existence of a Field inside a document, not a document itself."},{"owner":{"account_id":9432262,"reputation":79450,"user_id":7015400,"accept_rate":38,"display_name":"Peter Haddad"},"score":0,"creation_date":1630498579,"post_id":58180615,"comment_id":121971375,"body_markdown":"@DanielSaito Yes, but you cannot only retrieve a field alone. You can only retrieve a document, so this is the best way, get the document then check if the field is null.","body":"@DanielSaito Yes, but you cannot only retrieve a field alone. You can only retrieve a document, so this is the best way, get the document then check if the field is null."},{"owner":{"account_id":15578493,"reputation":67,"user_id":11239001,"display_name":"Daniel Saito"},"score":0,"creation_date":1630501740,"post_id":58180615,"comment_id":121972936,"body_markdown":"yeah, but I think OP is talking after get the document, doing the `doc[index].get(field)` of a list of documents where some docs have this `field` and other don&#39;t, I think is a good example that converges to the same error that OP is struggling haha, sorry if I&#39;m not very clear in my explanations.","body":"yeah, but I think OP is talking after get the document, doing the <code>doc[index].get(field)</code> of a list of documents where some docs have this <code>field</code> and other don&#39;t, I think is a good example that converges to the same error that OP is struggling haha, sorry if I&#39;m not very clear in my explanations."}],"tags":[],"owner":{"account_id":9432262,"reputation":79450,"user_id":7015400,"accept_rate":38,"display_name":"Peter Haddad"},"comment_count":3,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1569917603,"creation_date":1569917603,"answer_id":58180615,"question_id":58180481,"body_markdown":"You can do the following:\n\n```\n  if(task.isSuccessful()){\n    for(QueryDocumentSnapshot document: task.getResult()){\n       if (document.exists()) {\n          if(document.getBoolean(&quot;attending&quot;) != null){\n             Log.d(TAG, &quot;attending field exists&quot;);\n          }\n        }\n      }\n  }\n```\n\nFrom the [docs][1]:\n\n&gt;`public boolean exists ()`\n&gt;\n&gt;Returns\n&gt;true if the document existed in this snapshot.\n\n\n  [1]: https://developers.google.com/android/reference/com/google/firebase/firestore/DocumentSnapshot.html#exists()","title":"How to check if the field exists in firestore?","body":"<p>You can do the following:</p>\n<pre><code>  if(task.isSuccessful()){\n    for(QueryDocumentSnapshot document: task.getResult()){\n       if (document.exists()) {\n          if(document.getBoolean(&quot;attending&quot;) != null){\n             Log.d(TAG, &quot;attending field exists&quot;);\n          }\n        }\n      }\n  }\n</code></pre>\n<p>From the <a href=\"https://developers.google.com/android/reference/com/google/firebase/firestore/DocumentSnapshot.html#exists()\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p><code>public boolean exists ()</code></p>\n<p>Returns\ntrue if the document existed in this snapshot.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":15578493,"reputation":67,"user_id":11239001,"display_name":"Daniel Saito"},"score":0,"creation_date":1630498017,"post_id":68470974,"comment_id":121971144,"body_markdown":"of what I understood, OP is asking about a field inside a doc, not a doc itself, test if a field exists inside a doc. I have the same issue.","body":"of what I understood, OP is asking about a field inside a doc, not a doc itself, test if a field exists inside a doc. I have the same issue."}],"tags":[],"owner":{"account_id":14992631,"reputation":958,"user_id":10823147,"display_name":"Bhoomika Chauhan"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1626876307,"creation_date":1626876307,"answer_id":68470974,"question_id":58180481,"body_markdown":"    You can check firestore document exists using this,\r\n    \r\n    CollectionReference mobileRef = db.collection(&quot;mobiles&quot;);\r\n     await mobileRef.doc(id))\r\n                  .get().then((mobileDoc) async {\r\n                if(mobileDoc.exists){\r\n    \t\t\tprint(&quot;Exists&quot;);\r\n    \t\t\t}\r\n    \t\t});\r\n\r\n","title":"How to check if the field exists in firestore?","body":"<pre><code>You can check firestore document exists using this,\n\nCollectionReference mobileRef = db.collection(&quot;mobiles&quot;);\n await mobileRef.doc(id))\n              .get().then((mobileDoc) async {\n            if(mobileDoc.exists){\n            print(&quot;Exists&quot;);\n            }\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17915396,"reputation":53,"user_id":13016470,"display_name":"Sumit yadu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644328306,"creation_date":1644328306,"answer_id":71035057,"question_id":58180481,"body_markdown":"Here is how you can achieve it or you may have resolved already, this for any one searches for solution.\r\n\r\nAs per the documentation:\r\n\r\n    CollectionReference citiesRef = db.collection(&quot;cities&quot;);\r\n    \r\n    Query query = citiesRef.whereNotEqualTo(&quot;capital&quot;, false);\r\n\r\nThis query returns every city document where the capital field exists with a value other than false or null. This includes city documents where the capital field value equals true or any non-boolean value besides null.\r\n\r\n*For more information* : https://cloud.google.com/firestore/docs/query-data/order-limit-data#java_5","title":"How to check if the field exists in firestore?","body":"<p>Here is how you can achieve it or you may have resolved already, this for any one searches for solution.</p>\n<p>As per the documentation:</p>\n<pre><code>CollectionReference citiesRef = db.collection(&quot;cities&quot;);\n\nQuery query = citiesRef.whereNotEqualTo(&quot;capital&quot;, false);\n</code></pre>\n<p>This query returns every city document where the capital field exists with a value other than false or null. This includes city documents where the capital field value equals true or any non-boolean value besides null.</p>\n<p><em>For more information</em> : <a href=\"https://cloud.google.com/firestore/docs/query-data/order-limit-data#java_5\" rel=\"nofollow noreferrer\">https://cloud.google.com/firestore/docs/query-data/order-limit-data#java_5</a></p>\n"},{"tags":[],"owner":{"account_id":16905684,"reputation":136,"user_id":12226057,"display_name":"Noman Shaikh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663519713,"creation_date":1663519713,"answer_id":73764671,"question_id":58180481,"body_markdown":"I use following boolean method may be someone else can\r\n\r\n    for(QueryDocumentSnapshot document: task.getResult()){\r\n        if(document.contains(&quot;attending&quot;)){\r\n               attending = document.getBoolean(&quot;attending&quot;);\r\n        }\r\n    }","title":"How to check if the field exists in firestore?","body":"<p>I use following boolean method may be someone else can</p>\n<pre><code>for(QueryDocumentSnapshot document: task.getResult()){\n    if(document.contains(&quot;attending&quot;)){\n           attending = document.getBoolean(&quot;attending&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22627869,"reputation":1,"user_id":16805711,"display_name":"Nicolas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676653226,"creation_date":1673885591,"answer_id":75136867,"question_id":58180481,"body_markdown":"I didn&#39;t find any solution so what I do is a try - catch (sorry Flutter / Dart, not java): \r\n\r\n      bool attendingFieldExists = true;\r\n      DocumentSnapshot documentSnapshot = \r\n      // your Document Query here\r\n      await FirebaseFirestore.instance \r\n          .collection(&#39;collection&#39;)\r\n          .doc(FirebaseAuth.instance.currentUser?.uid)\r\n          .get();\r\n      // trying to get &quot;attending&quot; field will throw an exception\r\n      // if not existing\r\n      try {\r\n        documentSnapshot.get(&quot;attending&quot;);\r\n      } catch (e) {\r\n        attendingFieldExists = false;\r\n        print(&quot;oops.. exception $e&quot;);\r\n      }\r\n\r\nThen you can adapt the code you want to apply depending on `attendingFieldExists`.\r\nI&#39;m new to Flutter / Dart so not sure this is the best way to handle this.. but it works for me.","title":"How to check if the field exists in firestore?","body":"<p>I didn't find any solution so what I do is a try - catch (sorry Flutter / Dart, not java):</p>\n<pre><code>  bool attendingFieldExists = true;\n  DocumentSnapshot documentSnapshot = \n  // your Document Query here\n  await FirebaseFirestore.instance \n      .collection('collection')\n      .doc(FirebaseAuth.instance.currentUser?.uid)\n      .get();\n  // trying to get &quot;attending&quot; field will throw an exception\n  // if not existing\n  try {\n    documentSnapshot.get(&quot;attending&quot;);\n  } catch (e) {\n    attendingFieldExists = false;\n    print(&quot;oops.. exception $e&quot;);\n  }\n</code></pre>\n<p>Then you can adapt the code you want to apply depending on <code>attendingFieldExists</code>.\nI'm new to Flutter / Dart so not sure this is the best way to handle this.. but it works for me.</p>\n"},{"tags":[],"owner":{"account_id":920861,"reputation":1078,"user_id":952595,"accept_rate":55,"display_name":"Vincy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697219022,"creation_date":1697219022,"answer_id":77289751,"question_id":58180481,"body_markdown":"instead of \r\n        documentSnapshot.get(&quot;attending&quot;);\r\ndo this\r\n        **documentSnapshot.ContainsField(&quot;attending&quot;);**  \r\n\r\nIf the field exists it will return **true** else returns **false**.","title":"How to check if the field exists in firestore?","body":"<p>instead of\ndocumentSnapshot.get(&quot;attending&quot;);\ndo this\n<strong>documentSnapshot.ContainsField(&quot;attending&quot;);</strong></p>\n<p>If the field exists it will return <strong>true</strong> else returns <strong>false</strong>.</p>\n"}],"owner":{"account_id":16713520,"reputation":309,"user_id":12080217,"display_name":"Martynas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22630,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":7,"score":10,"last_activity_date":1697219022,"creation_date":1569917016,"question_id":58180481,"body_markdown":"I am checking whether the Boolean field called `attending` exists, however I am not sure how to do that. \r\n\r\nIs there a function such as `.child().exists()` or something similar that I could use?\r\n\r\n```\r\nfirebaseFirestore.collection(&quot;Events&quot;)\r\n    .document(ID)\r\n    .collection(&quot;Users&quot;)\r\n    .get()\r\n    .addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n        @Override\r\n        public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n            if(task.isSuccessful()) {\r\n                for(QueryDocumentSnapshot document: task.getResult()){\r\n                    attending = document.getBoolean(&quot;attending&quot;);\r\n                }\r\n            }\r\n        }\r\n    });\r\n```","title":"How to check if the field exists in firestore?","body":"<p>I am checking whether the Boolean field called <code>attending</code> exists, however I am not sure how to do that. </p>\n\n<p>Is there a function such as <code>.child().exists()</code> or something similar that I could use?</p>\n\n<pre><code>firebaseFirestore.collection(\"Events\")\n    .document(ID)\n    .collection(\"Users\")\n    .get()\n    .addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n            if(task.isSuccessful()) {\n                for(QueryDocumentSnapshot document: task.getResult()){\n                    attending = document.getBoolean(\"attending\");\n                }\n            }\n        }\n    });\n</code></pre>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":8423934,"reputation":927,"user_id":6321878,"display_name":"Malik Bilal"},"score":0,"creation_date":1697221329,"post_id":77289348,"comment_id":136257572,"body_markdown":"Please check this https://developer.android.com/develop/ui/views/notifications/custom-notification","body":"Please check this <a href=\"https://developer.android.com/develop/ui/views/notifications/custom-notification\" rel=\"nofollow noreferrer\">developer.android.com/develop/ui/views/notifications/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":23324168,"reputation":1,"user_id":17401577,"display_name":"Eeman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697218862,"creation_date":1697218862,"answer_id":77289734,"question_id":77289348,"body_markdown":"Starting from Android 12, you need to request the FOREGROUND_SERVICE permission for foreground services.\r\n\r\ntry adding this.\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n\r\nBut remember, this may disturb User experience if you continuously display a notification which user can&#39;t dismiss.\r\n\r\nI hope this might help...","title":"How can I get a countdown timer working in a notification in android. Like in the image below","body":"<p>Starting from Android 12, you need to request the FOREGROUND_SERVICE permission for foreground services.</p>\n<p>try adding this.</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n</code></pre>\n<p>But remember, this may disturb User experience if you continuously display a notification which user can't dismiss.</p>\n<p>I hope this might help...</p>\n"}],"owner":{"account_id":22166774,"reputation":1,"user_id":16412850,"display_name":"Riyaz Uddin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697218862,"creation_date":1697214540,"question_id":77289348,"body_markdown":"![enter image description here](https://i.stack.imgur.com/vQ9N6.png)  \r\n\r\nI want the notification to show a timer  which keep changing every second. It works fine below Android 12 but in Android 11+, the timer stopes when the app gets closed or the phone becomes idle(screen off).\r\n\r\nI tried using Service but starting Android 12, due to some restriction on background operation the timer in the notification stops when the app gets close or the phone becomes idle. ","title":"How can I get a countdown timer working in a notification in android. Like in the image below","body":"<p><img src=\"https://i.stack.imgur.com/vQ9N6.png\" alt=\"enter image description here\" /></p>\n<p>I want the notification to show a timer  which keep changing every second. It works fine below Android 12 but in Android 11+, the timer stopes when the app gets closed or the phone becomes idle(screen off).</p>\n<p>I tried using Service but starting Android 12, due to some restriction on background operation the timer in the notification stops when the app gets close or the phone becomes idle.</p>\n"},{"tags":["java","json","spring-boot","deserialization","json-api"],"owner":{"account_id":6339655,"reputation":13,"user_id":4922023,"display_name":"daveystones"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697218656,"creation_date":1697218656,"question_id":77289720,"body_markdown":"I am writing a REST API which consumes other APIs (mainly using Feign clients), performs business logic to compile/massage data and serves it as a response from this one. One of the APIs being consumed is using the JSON:API standard structure for its data structure. The other APIs being used have OpenAPI-defined responses and components that are specific to the data being returned, and Spring Boot with Jackson configured will deserialize these responses into Java POJO models with the same structure as the responses and components.\r\n\r\nMy question is, is it possible to have the same kind of native JSON deserialization into POJO classes that represent the data contained in the JSON:API standard response but is not strictly structured that way? (ie. Some kind of existing library that would work with Spring Boot and deserialize the JSON:API-formatted response into a POJO that contains the data properties and relationships without being nested in `data` and `includes` fields.)","title":"Spring Boot 2, Feign and JSON:API consumption","body":"<p>I am writing a REST API which consumes other APIs (mainly using Feign clients), performs business logic to compile/massage data and serves it as a response from this one. One of the APIs being consumed is using the JSON:API standard structure for its data structure. The other APIs being used have OpenAPI-defined responses and components that are specific to the data being returned, and Spring Boot with Jackson configured will deserialize these responses into Java POJO models with the same structure as the responses and components.</p>\n<p>My question is, is it possible to have the same kind of native JSON deserialization into POJO classes that represent the data contained in the JSON:API standard response but is not strictly structured that way? (ie. Some kind of existing library that would work with Spring Boot and deserialize the JSON:API-formatted response into a POJO that contains the data properties and relationships without being nested in <code>data</code> and <code>includes</code> fields.)</p>\n"},{"tags":["java","arraylist","error-handling","compiler-errors","numberformatexception"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1697216888,"post_id":77289539,"comment_id":136256816,"body_markdown":"What it means is that you (and only you) need to do more debugging. Use your debugger and find out *exactly* what text is causing the problem, get the text itself, analyze each char to make sure that they are standard digits that represent numeric entities, etc... Again, this is something that you and only you can do at this time.","body":"What it means is that you (and only you) need to do more debugging. Use your debugger and find out <i>exactly</i> what text is causing the problem, get the text itself, analyze each char to make sure that they are standard digits that represent numeric entities, etc... Again, this is something that you and only you can do at this time."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1697216970,"post_id":77289539,"comment_id":136256832,"body_markdown":"Also, for our purposes, you *must* post the complete stack trace from the exception in your question, the full beast as code-formatted text. Also, post the actual text in the text file that is causing the issue.","body":"Also, for our purposes, you <i>must</i> post the complete stack trace from the exception in your question, the full beast as code-formatted text. Also, post the actual text in the text file that is causing the issue."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1697218177,"post_id":77289539,"comment_id":136257052,"body_markdown":"Yes, as @OldDogProgrammer states, all important information, especially error information and code, should be in the question itself as an [edit], and not in comments. Use comments to notify us when you&#39;ve made such changes to the question.","body":"Yes, as @OldDogProgrammer states, all important information, especially error information and code, should be in the question itself as an <a href=\"https://stackoverflow.com/posts/77289539/edit\">edit</a>, and not in comments. Use comments to notify us when you&#39;ve made such changes to the question."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1697218667,"post_id":77289539,"comment_id":136257142,"body_markdown":"Can you include a sample of the data in the input file?","body":"Can you include a sample of the data in the input file?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1697218715,"post_id":77289539,"comment_id":136257154,"body_markdown":"Your original error was because of *i &lt;= numbers.size()*. The upper bound is *out* of bounds. But it&#39;s no good if you don&#39;t show us to *what* you &quot;switched&quot; your code as a result","body":"Your original error was because of <i>i &lt;= numbers.size()</i>. The upper bound is <i>out</i> of bounds. But it&#39;s no good if you don&#39;t show us to <i>what</i> you &quot;switched&quot; your code as a result"},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":2,"creation_date":1697219047,"post_id":77289539,"comment_id":136257199,"body_markdown":"There&#39;s likely an unprintable character in the text line - such as the following produces your exact error showing as `&quot;150&quot;`: `Long.parseLong(&quot;150\\1&quot;);` - be sure to view your text file in hex mode as well.  It&#39;s also likely not a `\\r` since it would have affected the output error message.","body":"There&#39;s likely an unprintable character in the text line - such as the following produces your exact error showing as <code>&quot;150&quot;</code>: <code>Long.parseLong(&quot;150\\1&quot;);</code> - be sure to view your text file in hex mode as well.  It&#39;s also likely not a <code>\\r</code> since it would have affected the output error message."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1697219069,"post_id":77289539,"comment_id":136257200,"body_markdown":"This, is a problem: `split(&quot;\\n&quot;);`. You should use the system&#39;s line separator, not `&quot;\\n&quot;`","body":"This, is a problem: <code>split(&quot;\\n&quot;);</code>. You should use the system&#39;s line separator, not <code>&quot;\\n&quot;</code>"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1697220296,"post_id":77289539,"comment_id":136257395,"body_markdown":"`String[] lines = string.split(System.getProperty(&quot;line.separator&quot;));`","body":"<code>String[] lines = string.split(System.getProperty(&quot;line.separator&quot;));</code>"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1697220432,"post_id":77289539,"comment_id":136257422,"body_markdown":"Or `String[] lines = string.split(&quot;\\\\R&quot;);` or `String[] lines = string.split(&quot;\\\\s*\\\\R\\\\s*&quot;);` to swallow any extra whitespace","body":"Or <code>String[] lines = string.split(&quot;\\\\R&quot;);</code> or <code>String[] lines = string.split(&quot;\\\\s*\\\\R\\\\s*&quot;);</code> to swallow any extra whitespace"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1697224288,"post_id":77289539,"comment_id":136258027,"body_markdown":"@HovercraftFullOfEels I just learned something new from you today, `\\R`. Cheers!","body":"@HovercraftFullOfEels I just learned something new from you today, <code>\\R</code>. Cheers!"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1697226300,"post_id":77289539,"comment_id":136258303,"body_markdown":"You can do `System.lineSeparator()` too","body":"You can do <code>System.lineSeparator()</code> too"}],"owner":{"account_id":29665848,"reputation":31,"user_id":22736399,"display_name":"Peyton Cusick"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697216826,"answer_count":0,"score":0,"last_activity_date":1697218511,"creation_date":1697216645,"question_id":77289539,"body_markdown":"```\r\nException in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;150&quot;\r\n        at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\r\n        at java.base/java.lang.Long.parseLong(Long.java:711)\r\n        at java.base/java.lang.Long.parseLong(Long.java:836)\r\n        at Median.main(Median.java:45)\r\n```\r\n```\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\npublic class Median {\r\n    \r\n    public static Long selection(ArrayList&lt;Long&gt; numbers, int k) throws IOException {\r\n        long pivot = numbers.get(0); //Line 8\r\n        ArrayList&lt;Long&gt; left = new ArrayList&lt;Long&gt;();\r\n        ArrayList&lt;Long&gt; middle = new ArrayList&lt;Long&gt;();\r\n        ArrayList&lt;Long&gt; right = new ArrayList&lt;Long&gt;();\r\n\r\n        for(int i = 1; i &lt;= numbers.size(); i++) {\r\n            if(numbers.get(i) &lt; pivot) {\r\n                left.add(numbers.get(i)); \r\n            }\r\n            else if(numbers.get(i) == pivot) {\r\n                middle.add(numbers.get(i));\r\n            }\r\n            else {\r\n                right.add(numbers.get(i));\r\n            }\r\n        }\r\n        middle.add(pivot);\r\n\r\n        if(k &lt;= left.size()) {\r\n            return selection(left, k);\r\n        }\r\n        else if(left.size() &lt; k &amp;&amp; k &lt;= right.size()) {\r\n            return middle.get(0);\r\n        }\r\n        else {\r\n            return selection(right, k-left.size() - middle.size());\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        ArrayList&lt;Long&gt; numsList = new ArrayList&lt;Long&gt;();\r\n\r\n        try(BufferedReader br = new BufferedReader(new FileReader(&quot;manhattanAirBnbPrivateRoomPrices.txt&quot;))) {\r\n        String line = br.readLine();\r\n        String [] integers = line.trim().split(&quot;\\n&quot;);\r\n        for(String integer: integers) {\r\n            numsList.add(Long.parseLong(integer)); // Line 45\r\n        }\r\n        } catch(IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        int position = numsList.size();\r\n        if((numsList.size() % 2) == 0) {\r\n            position = numsList.size() / 2;\r\n        }\r\n        else {\r\n            position = (int) numsList.size() / 2;\r\n        }\r\n\r\n        selection(numsList, position); \r\n    }\r\n}\r\n```\r\nI&#39;ve tried everything with Integer as the data type for everything (return type in selection method, ArrayList types, etc.) and it has the same error on line 45. I am reading from a text file using BufferedReader, but I tried using Scanner at first, but there was an ArrayIndexOutOfBounds error when trying to execute line 8 (long pivot = numbers.get(0);), so I switched it and that error went away, but came with this other one. What can I do to fix it, it sees like there&#39;s no way I can read the first line in the text file (150) because apparently its too large to be an integer and it just doesn&#39;t work when I changed everything to be of type long?!?!","title":"java.lang.NumberFormatException: For input string: &quot;150&quot;, but I&#39;ve tried everything, How can I fix this error?","body":"<pre><code>Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;150&quot;\n        at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\n        at java.base/java.lang.Long.parseLong(Long.java:711)\n        at java.base/java.lang.Long.parseLong(Long.java:836)\n        at Median.main(Median.java:45)\n</code></pre>\n<pre><code>import java.io.*;\nimport java.util.*;\n\npublic class Median {\n    \n    public static Long selection(ArrayList&lt;Long&gt; numbers, int k) throws IOException {\n        long pivot = numbers.get(0); //Line 8\n        ArrayList&lt;Long&gt; left = new ArrayList&lt;Long&gt;();\n        ArrayList&lt;Long&gt; middle = new ArrayList&lt;Long&gt;();\n        ArrayList&lt;Long&gt; right = new ArrayList&lt;Long&gt;();\n\n        for(int i = 1; i &lt;= numbers.size(); i++) {\n            if(numbers.get(i) &lt; pivot) {\n                left.add(numbers.get(i)); \n            }\n            else if(numbers.get(i) == pivot) {\n                middle.add(numbers.get(i));\n            }\n            else {\n                right.add(numbers.get(i));\n            }\n        }\n        middle.add(pivot);\n\n        if(k &lt;= left.size()) {\n            return selection(left, k);\n        }\n        else if(left.size() &lt; k &amp;&amp; k &lt;= right.size()) {\n            return middle.get(0);\n        }\n        else {\n            return selection(right, k-left.size() - middle.size());\n        }\n    }\n\n    public static void main(String[] args) throws IOException {\n        ArrayList&lt;Long&gt; numsList = new ArrayList&lt;Long&gt;();\n\n        try(BufferedReader br = new BufferedReader(new FileReader(&quot;manhattanAirBnbPrivateRoomPrices.txt&quot;))) {\n        String line = br.readLine();\n        String [] integers = line.trim().split(&quot;\\n&quot;);\n        for(String integer: integers) {\n            numsList.add(Long.parseLong(integer)); // Line 45\n        }\n        } catch(IOException e) {\n            e.printStackTrace();\n        }\n\n        int position = numsList.size();\n        if((numsList.size() % 2) == 0) {\n            position = numsList.size() / 2;\n        }\n        else {\n            position = (int) numsList.size() / 2;\n        }\n\n        selection(numsList, position); \n    }\n}\n</code></pre>\n<p>I've tried everything with Integer as the data type for everything (return type in selection method, ArrayList types, etc.) and it has the same error on line 45. I am reading from a text file using BufferedReader, but I tried using Scanner at first, but there was an ArrayIndexOutOfBounds error when trying to execute line 8 (long pivot = numbers.get(0);), so I switched it and that error went away, but came with this other one. What can I do to fix it, it sees like there's no way I can read the first line in the text file (150) because apparently its too large to be an integer and it just doesn't work when I changed everything to be of type long?!?!</p>\n"},{"tags":["java","rest","tomcat","http-status-code-404"],"owner":{"account_id":29659664,"reputation":1,"user_id":22731558,"display_name":"hset"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697218432,"creation_date":1697211371,"question_id":77289032,"body_markdown":"I&#39;m getting a 404 error after deploying my web services to Apache 10.1.\r\n\r\nThey use to work in Apache 9. I had update some libraries to get my project to work for JDK17.\r\n\r\nHere is my code:\r\n\r\npom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.stableapps&lt;/groupId&gt;\r\n    &lt;artifactId&gt;EsarClientService&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n    &lt;name&gt;EsarClientService&lt;/name&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;smartbear-sweden-repository&lt;/id&gt;\r\n            &lt;url&gt;http://www.soapui.org/repository/maven2&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.16.20&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;1.16.12.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.39&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\r\n            &lt;version&gt;2.39&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\r\n            &lt;version&gt;2.39&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;\r\n            &lt;version&gt;2.39&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n            &lt;version&gt;2.39&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n\t\t   &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n\t\t   &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\r\n\t\t   &lt;version&gt;2.39&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;  \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.12&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.xmlbeans&lt;/groupId&gt;\r\n            &lt;artifactId&gt;xmlbeans&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.smartbear.soapui&lt;/groupId&gt;\r\n            &lt;artifactId&gt;soapui&lt;/artifactId&gt;\r\n            &lt;version&gt;5.4.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0.1&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;javax&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;resteasy-multipart-provider&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;3.0.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;2.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;compilerArguments&gt;\r\n                        &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\r\n                    &lt;/compilerArguments&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n\t\t\t    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t\t    &lt;version&gt;3.3.1&lt;/version&gt;\r\n\t\t\t     &lt;configuration&gt;\r\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                &lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.6&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;validate&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;outputDirectory&gt;${endorsed.dir}&lt;/outputDirectory&gt;\r\n                            &lt;silent&gt;true&lt;/silent&gt;\r\n                            &lt;artifactItems&gt;\r\n                                &lt;artifactItem&gt;\r\n                                    &lt;groupId&gt;javax&lt;/groupId&gt;\r\n                                    &lt;artifactId&gt;javaee-endorsed-api&lt;/artifactId&gt;\r\n                                    &lt;version&gt;7.0&lt;/version&gt;\r\n                                    &lt;type&gt;jar&lt;/type&gt;\r\n                                &lt;/artifactItem&gt;\r\n                            &lt;/artifactItems&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n```\r\n/*\r\n * To change this license header, choose License Headers in Project Properties.\r\n * To change this template file, choose Tools | Templates\r\n * and open the template in the editor.\r\n */\r\npackage com.stableapps.esarclientservice;\r\n\r\nimport com.stableapps.esarclientservice.model.COREEnvelopeBatchSubmission;\r\nimport com.stableapps.esarclientservice.model.COREEnvelopeBatchSubmissionResponse;\r\nimport javax.ws.rs.ClientErrorException;\r\nimport javax.ws.rs.client.Client;\r\nimport javax.ws.rs.client.WebTarget;\r\n\r\n/**\r\n * Jersey REST client generated for REST resource:COREEnvelopeBatchSubmissionService\r\n * [COREEnvelopeBatchSubmission]&lt;br&gt;\r\n * USAGE:\r\n * &lt;pre&gt;\r\n *        EsarServiceRestClient client = new EsarServiceRestClient();\r\n *        Object response = client.XXX(...);\r\n *        // do whatever with response\r\n *        client.close();\r\n * &lt;/pre&gt;\r\n *\r\n */\r\npublic class EsarServiceRestClient {\r\n\r\n\tprivate WebTarget webTarget;\r\n\tprivate Client client;\r\n\tprivate static final String BASE_URI = &quot;http://localhost:8080/EsarClientService/webresources&quot;;\r\n\r\n\tpublic EsarServiceRestClient() {\r\n\t\tclient = javax.ws.rs.client.ClientBuilder.newClient();\r\n\t\twebTarget = client.target(BASE_URI).path(&quot;COREEnvelopeBatchSubmission&quot;);\r\n\t}\r\n\r\n\tpublic COREEnvelopeBatchSubmissionResponse post(COREEnvelopeBatchSubmission submission)\r\n\t\t\tthrows ClientErrorException {\r\n\t\treturn webTarget\r\n\t\t\t\t.request(javax.ws.rs.core.MediaType.APPLICATION_JSON)\r\n\t\t\t\t.post(\r\n\t\t\t\t\t\tjavax.ws.rs.client.Entity.entity(\r\n\t\t\t\t\t\t\t\tsubmission, \r\n\t\t\t\t\t\t\t\tjavax.ws.rs.core.MediaType.APPLICATION_JSON\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tCOREEnvelopeBatchSubmissionResponse.class\r\n\t\t\t\t);\r\n\t}\r\n\r\n\tpublic COREEnvelopeBatchSubmissionResponse postAckRetrieval(COREEnvelopeBatchSubmission submission) throws ClientErrorException {\r\n\t\treturn webTarget.path(&quot;AckRetrieval&quot;)\r\n\t\t\t\t.request(javax.ws.rs.core.MediaType.APPLICATION_JSON)\r\n\t\t\t\t.post(\r\n\t\t\t\t\t\tjavax.ws.rs.client.Entity.entity(\r\n\t\t\t\t\t\t\t\tsubmission,\r\n\t\t\t\t\t\t\t\tjavax.ws.rs.core.MediaType.APPLICATION_JSON\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tCOREEnvelopeBatchSubmissionResponse.class);\r\n\t}\r\n\r\n\tpublic void close() {\r\n\t\tclient.close();\r\n\t}\r\n\r\n}\r\n```\r\n\r\n```\r\n/*\r\n * To change this license header, choose License Headers in Project Properties.\r\n * To change this template file, choose Tools | Templates\r\n * and open the template in the editor.\r\n */\r\npackage com.stableapps.esarclientservice;\r\n\r\nimport com.eviware.soapui.impl.wsdl.WsdlInterface;\r\nimport com.eviware.soapui.impl.wsdl.WsdlOperation;\r\nimport com.eviware.soapui.impl.wsdl.WsdlProject;\r\nimport com.eviware.soapui.impl.wsdl.WsdlRequest;\r\nimport com.eviware.soapui.impl.wsdl.WsdlSubmit;\r\nimport com.eviware.soapui.impl.wsdl.WsdlSubmitContext;\r\nimport com.eviware.soapui.impl.wsdl.support.wss.DefaultWssContainer;\r\nimport com.eviware.soapui.impl.wsdl.support.wss.crypto.KeyMaterialWssCrypto;\r\nimport com.eviware.soapui.model.iface.Attachment;\r\nimport com.eviware.soapui.model.iface.Request;\r\nimport com.eviware.soapui.model.iface.Submit;\r\nimport com.eviware.soapui.model.project.ProjectFactoryRegistry;\r\nimport com.eviware.soapui.support.SoapUIException;\r\nimport com.stableapps.esarclientservice.model.COREEnvelopeBatchSubmission;\r\nimport com.stableapps.esarclientservice.model.COREEnvelopeBatchSubmissionResponse;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.StandardOpenOption;\r\nimport java.util.Base64;\r\nimport java.util.Map;\r\nimport javax.ws.rs.Consumes;\r\nimport javax.ws.rs.POST;\r\nimport javax.ws.rs.Path;\r\nimport javax.ws.rs.Produces;\r\nimport javax.ws.rs.core.Context;\r\nimport javax.ws.rs.core.MediaType;\r\nimport javax.ws.rs.core.UriInfo;\r\nimport org.apache.commons.beanutils.BeanUtils;\r\nimport org.apache.commons.io.FileUtils;\r\nimport org.apache.xmlbeans.XmlException;\r\n\r\n@Path(&quot;COREEnvelopeBatchSubmission&quot;)\r\npublic class COREEnvelopeBatchSubmissionService {\r\n\r\n\t@Context\r\n\tprivate UriInfo context;\r\n\r\n\t/**\r\n\t * Creates a new instance of COREEnvelopeBatchSubmission\r\n\t */\r\n\tpublic COREEnvelopeBatchSubmissionService() {\r\n\t}\r\n\r\n\t/**\r\n\t * POST method for updating or creating an instance of COREEnvelopeBatchSubmissionService\r\n\t *\r\n\t * @param submission representation for the resource\r\n\t * @return\r\n\t * @throws org.apache.xmlbeans.XmlException\r\n\t * @throws java.io.IOException\r\n\t * @throws com.eviware.soapui.support.SoapUIException\r\n\t * @throws com.eviware.soapui.model.iface.Request.SubmitException\r\n\t */\r\n\t@POST\r\n\t@Consumes(MediaType.APPLICATION_JSON)\r\n\t@Produces(MediaType.APPLICATION_JSON)\r\n\tpublic COREEnvelopeBatchSubmissionResponse post(COREEnvelopeBatchSubmission submission) throws XmlException, IOException, SoapUIException, Request.SubmitException, Exception {\r\n\t\tFile attachment = createAttachmentFromBytes(submission.getAttachment());\r\n\r\n\t\tMap valuesMap = BeanUtils.describe(submission);\r\n\r\n\t\t//Submits the request \r\n\t\tWsdlSubmit&lt;WsdlRequest&gt; submit\r\n\t\t\t\t= callCOREEnvelopeBatchSubmission(valuesMap, attachment);\r\n\r\n\t\t//Check first if the status is error.  If ERROR then print the stacktrace of the error\r\n\t\tCOREEnvelopeBatchSubmissionResponse response = COREEnvelopeBatchSubmissionResponse.builder()\r\n\t\t\t\t.PayloadID(submission.getPayloadID())\r\n\t\t\t\t.Status(submit.getStatus().name())\r\n\t\t\t\t.build();\r\n\r\n\t\tif (submit.getStatus() == Submit.Status.ERROR) {\r\n\t\t\tresponse.setContent(submit.getError().getMessage());\r\n\t\t\tsubmit.getError().printStackTrace(System.err);\r\n\t\t\treturn response;\r\n\t\t}\r\n\r\n\t\tresponse.setContent(submit.getResponse().getContentAsXml());\r\n\t\t//Print the response XML\r\n\t\tSystem.out.println(submit.getResponse().getContentAsXml());\r\n\r\n\t\treturn response;\r\n\t}\r\n```\r\n\r\n[404 page][1]\r\n\r\n[Server is running][2]\r\n\r\nTrying to get code to work on Apache 10.1.  Not sure what I&#39;m doing wrong.  Any ideas?  Feels like something changes from Apache 9 to Apache 10.1.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DLK0Y.png\r\n  [2]: https://i.stack.imgur.com/YUacr.png","title":"HTTP 404 Not Found error when running Java rest services","body":"<p>I'm getting a 404 error after deploying my web services to Apache 10.1.</p>\n<p>They use to work in Apache 9. I had update some libraries to get my project to work for JDK17.</p>\n<p>Here is my code:</p>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.stableapps&lt;/groupId&gt;\n    &lt;artifactId&gt;EsarClientService&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;EsarClientService&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    \n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;smartbear-sweden-repository&lt;/id&gt;\n            &lt;url&gt;http://www.soapui.org/repository/maven2&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.16.20&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.16.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\n            &lt;version&gt;2.39&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\n            &lt;version&gt;2.39&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\n            &lt;version&gt;2.39&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;\n            &lt;version&gt;2.39&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n            &lt;version&gt;2.39&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n           &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n           &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\n           &lt;version&gt;2.39&lt;/version&gt;\n        &lt;/dependency&gt;  \n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.12&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\n            &lt;version&gt;1.9.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.xmlbeans&lt;/groupId&gt;\n            &lt;artifactId&gt;xmlbeans&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.smartbear.soapui&lt;/groupId&gt;\n            &lt;artifactId&gt;soapui&lt;/artifactId&gt;\n            &lt;version&gt;5.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax&lt;/groupId&gt;\n            &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;\n            &lt;version&gt;8.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n         &lt;dependency&gt;\n            &lt;groupId&gt;javax&lt;/groupId&gt;\n            &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n            &lt;version&gt;8.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-multipart-provider&lt;/artifactId&gt;\n            &lt;version&gt;3.0.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                    &lt;compilerArguments&gt;\n                        &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\n                    &lt;/compilerArguments&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.1&lt;/version&gt;\n                 &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;validate&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${endorsed.dir}&lt;/outputDirectory&gt;\n                            &lt;silent&gt;true&lt;/silent&gt;\n                            &lt;artifactItems&gt;\n                                &lt;artifactItem&gt;\n                                    &lt;groupId&gt;javax&lt;/groupId&gt;\n                                    &lt;artifactId&gt;javaee-endorsed-api&lt;/artifactId&gt;\n                                    &lt;version&gt;7.0&lt;/version&gt;\n                                    &lt;type&gt;jar&lt;/type&gt;\n                                &lt;/artifactItem&gt;\n                            &lt;/artifactItems&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<pre><code>/*\n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\npackage com.stableapps.esarclientservice;\n\nimport com.stableapps.esarclientservice.model.COREEnvelopeBatchSubmission;\nimport com.stableapps.esarclientservice.model.COREEnvelopeBatchSubmissionResponse;\nimport javax.ws.rs.ClientErrorException;\nimport javax.ws.rs.client.Client;\nimport javax.ws.rs.client.WebTarget;\n\n/**\n * Jersey REST client generated for REST resource:COREEnvelopeBatchSubmissionService\n * [COREEnvelopeBatchSubmission]&lt;br&gt;\n * USAGE:\n * &lt;pre&gt;\n *        EsarServiceRestClient client = new EsarServiceRestClient();\n *        Object response = client.XXX(...);\n *        // do whatever with response\n *        client.close();\n * &lt;/pre&gt;\n *\n */\npublic class EsarServiceRestClient {\n\n    private WebTarget webTarget;\n    private Client client;\n    private static final String BASE_URI = &quot;http://localhost:8080/EsarClientService/webresources&quot;;\n\n    public EsarServiceRestClient() {\n        client = javax.ws.rs.client.ClientBuilder.newClient();\n        webTarget = client.target(BASE_URI).path(&quot;COREEnvelopeBatchSubmission&quot;);\n    }\n\n    public COREEnvelopeBatchSubmissionResponse post(COREEnvelopeBatchSubmission submission)\n            throws ClientErrorException {\n        return webTarget\n                .request(javax.ws.rs.core.MediaType.APPLICATION_JSON)\n                .post(\n                        javax.ws.rs.client.Entity.entity(\n                                submission, \n                                javax.ws.rs.core.MediaType.APPLICATION_JSON\n                        ),\n                        COREEnvelopeBatchSubmissionResponse.class\n                );\n    }\n\n    public COREEnvelopeBatchSubmissionResponse postAckRetrieval(COREEnvelopeBatchSubmission submission) throws ClientErrorException {\n        return webTarget.path(&quot;AckRetrieval&quot;)\n                .request(javax.ws.rs.core.MediaType.APPLICATION_JSON)\n                .post(\n                        javax.ws.rs.client.Entity.entity(\n                                submission,\n                                javax.ws.rs.core.MediaType.APPLICATION_JSON\n                        ),\n                        COREEnvelopeBatchSubmissionResponse.class);\n    }\n\n    public void close() {\n        client.close();\n    }\n\n}\n</code></pre>\n<pre><code>/*\n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\npackage com.stableapps.esarclientservice;\n\nimport com.eviware.soapui.impl.wsdl.WsdlInterface;\nimport com.eviware.soapui.impl.wsdl.WsdlOperation;\nimport com.eviware.soapui.impl.wsdl.WsdlProject;\nimport com.eviware.soapui.impl.wsdl.WsdlRequest;\nimport com.eviware.soapui.impl.wsdl.WsdlSubmit;\nimport com.eviware.soapui.impl.wsdl.WsdlSubmitContext;\nimport com.eviware.soapui.impl.wsdl.support.wss.DefaultWssContainer;\nimport com.eviware.soapui.impl.wsdl.support.wss.crypto.KeyMaterialWssCrypto;\nimport com.eviware.soapui.model.iface.Attachment;\nimport com.eviware.soapui.model.iface.Request;\nimport com.eviware.soapui.model.iface.Submit;\nimport com.eviware.soapui.model.project.ProjectFactoryRegistry;\nimport com.eviware.soapui.support.SoapUIException;\nimport com.stableapps.esarclientservice.model.COREEnvelopeBatchSubmission;\nimport com.stableapps.esarclientservice.model.COREEnvelopeBatchSubmissionResponse;\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.file.Files;\nimport java.nio.file.StandardOpenOption;\nimport java.util.Base64;\nimport java.util.Map;\nimport javax.ws.rs.Consumes;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.Context;\nimport javax.ws.rs.core.MediaType;\nimport javax.ws.rs.core.UriInfo;\nimport org.apache.commons.beanutils.BeanUtils;\nimport org.apache.commons.io.FileUtils;\nimport org.apache.xmlbeans.XmlException;\n\n@Path(&quot;COREEnvelopeBatchSubmission&quot;)\npublic class COREEnvelopeBatchSubmissionService {\n\n    @Context\n    private UriInfo context;\n\n    /**\n     * Creates a new instance of COREEnvelopeBatchSubmission\n     */\n    public COREEnvelopeBatchSubmissionService() {\n    }\n\n    /**\n     * POST method for updating or creating an instance of COREEnvelopeBatchSubmissionService\n     *\n     * @param submission representation for the resource\n     * @return\n     * @throws org.apache.xmlbeans.XmlException\n     * @throws java.io.IOException\n     * @throws com.eviware.soapui.support.SoapUIException\n     * @throws com.eviware.soapui.model.iface.Request.SubmitException\n     */\n    @POST\n    @Consumes(MediaType.APPLICATION_JSON)\n    @Produces(MediaType.APPLICATION_JSON)\n    public COREEnvelopeBatchSubmissionResponse post(COREEnvelopeBatchSubmission submission) throws XmlException, IOException, SoapUIException, Request.SubmitException, Exception {\n        File attachment = createAttachmentFromBytes(submission.getAttachment());\n\n        Map valuesMap = BeanUtils.describe(submission);\n\n        //Submits the request \n        WsdlSubmit&lt;WsdlRequest&gt; submit\n                = callCOREEnvelopeBatchSubmission(valuesMap, attachment);\n\n        //Check first if the status is error.  If ERROR then print the stacktrace of the error\n        COREEnvelopeBatchSubmissionResponse response = COREEnvelopeBatchSubmissionResponse.builder()\n                .PayloadID(submission.getPayloadID())\n                .Status(submit.getStatus().name())\n                .build();\n\n        if (submit.getStatus() == Submit.Status.ERROR) {\n            response.setContent(submit.getError().getMessage());\n            submit.getError().printStackTrace(System.err);\n            return response;\n        }\n\n        response.setContent(submit.getResponse().getContentAsXml());\n        //Print the response XML\n        System.out.println(submit.getResponse().getContentAsXml());\n\n        return response;\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/DLK0Y.png\" rel=\"nofollow noreferrer\">404 page</a></p>\n<p><a href=\"https://i.stack.imgur.com/YUacr.png\" rel=\"nofollow noreferrer\">Server is running</a></p>\n<p>Trying to get code to work on Apache 10.1.  Not sure what I'm doing wrong.  Any ideas?  Feels like something changes from Apache 9 to Apache 10.1.</p>\n"},{"tags":["java","linux","serial-port","rxtx"],"comments":[{"owner":{"account_id":503138,"reputation":16391,"user_id":1599004,"display_name":"sawdust"},"score":2,"creation_date":1697168102,"post_id":77284352,"comment_id":136248681,"body_markdown":"Are you using HW flow-control? Have you tried to disable HW flow-control before you start your program using `stty -F /dev/ttyXXX -crtscts -cdtrdsr +clocal` from the shell? What about using a serial cable that does not connect those signals (aka a 3-wire cable)?","body":"Are you using HW flow-control? Have you tried to disable HW flow-control before you start your program using <code>stty -F &#47;dev&#47;ttyXXX -crtscts -cdtrdsr +clocal</code> from the shell? What about using a serial cable that does not connect those signals (aka a 3-wire cable)?"},{"owner":{"account_id":476146,"reputation":1754,"user_id":886895,"accept_rate":67,"display_name":"simgineer"},"score":0,"creation_date":1697218211,"post_id":77284352,"comment_id":136257063,"body_markdown":"We can&#39;t remove those wires bc we use them to switch the board into a programming mode and back. Will look into disabling hw flow control which we do not intend to use.","body":"We can&#39;t remove those wires bc we use them to switch the board into a programming mode and back. Will look into disabling hw flow control which we do not intend to use."},{"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":0,"creation_date":1697219192,"post_id":77284352,"comment_id":136257219,"body_markdown":"This is a well-known issue deeply rooted in hardware, operating system and USB protocol. The application software cannot do anything about it. That&#39;s why all ESP32 boards use a special *auto reset circuit* with two transistors. You don&#39;t happen to be working with an ESP32, do you?","body":"This is a well-known issue deeply rooted in hardware, operating system and USB protocol. The application software cannot do anything about it. That&#39;s why all ESP32 boards use a special <i>auto reset circuit</i> with two transistors. You don&#39;t happen to be working with an ESP32, do you?"},{"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":1,"creation_date":1697264939,"post_id":77284352,"comment_id":136260863,"body_markdown":"[jSerialComm](https://github.com/Fazecast/jSerialComm) is a better maintained and more powerful alternative to RXTX. They are faced with the same challenges and discuss some workarounds. See [Issue #523](https://github.com/Fazecast/jSerialComm/issues/523).","body":"<a href=\"https://github.com/Fazecast/jSerialComm\" rel=\"nofollow noreferrer\">jSerialComm</a> is a better maintained and more powerful alternative to RXTX. They are faced with the same challenges and discuss some workarounds. See <a href=\"https://github.com/Fazecast/jSerialComm/issues/523\" rel=\"nofollow noreferrer\">Issue #523</a>."},{"owner":{"account_id":13815643,"reputation":136,"user_id":9972305,"display_name":"B.Letz"},"score":0,"creation_date":1698128445,"post_id":77284352,"comment_id":136362383,"body_markdown":"[nrjavaserial](https://github.com/NeuronRobotics/nrjavaserial) is a fork of jrxtx that is also still maintained. Maybe this is an alternative for you. But I am not sure if this library has the same issues","body":"<a href=\"https://github.com/NeuronRobotics/nrjavaserial\" rel=\"nofollow noreferrer\">nrjavaserial</a> is a fork of jrxtx that is also still maintained. Maybe this is an alternative for you. But I am not sure if this library has the same issues"}],"owner":{"account_id":476146,"reputation":1754,"user_id":886895,"accept_rate":67,"display_name":"simgineer"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697218412,"creation_date":1697153949,"question_id":77284352,"body_markdown":"We have a device that is sensitive to the RS232 DTR and RTS lines and are using the RXTX API to connect to a linux serial port however opening the connection causes pulses on these lines and is resetting our device. Is there a way to configure the connection to not pulse the lines when the connection is open?\r\n\r\nThis is the approach we currently use:\r\n\r\n        // Set up the serial port\r\n        CommPortIdentifier portId = CommPortIdentifier.getPortIdentifier(serialPortID);\r\n        if (portId.isCurrentlyOwned()) {\r\n            TRACE.severe(&quot;Port &quot; + portId.getName() + &quot; (port ID = &quot; + serialPortID\r\n                    + &quot;) is already in use by owner: &quot; + portId.getCurrentOwner());\r\n            throw new PortInUseException();\r\n        }\r\n        CommPort commPort = portId.open(this.getClass().getName(), responseTimeout);\r\n        if (!(commPort instanceof SerialPort)) {\r\n            TRACE.severe(&quot;Error: Only serial ports are supported.&quot;);\r\n            throw new RuntimeException(&quot;Error: Only serial ports are supported.&quot;);\r\n        }\r\n        SerialPort serialPort = commPort;\r\n\r\n        try {\r\n            serialPort.setDTR(false);\r\n            serialPort.setRTS(false);\r\n            serialPort.setSerialPortParams(baudRate, dataBits, stopBits, parity);\r\n            serialPort.setFlowControlMode(SerialPort.FLOWCONTROL_NONE);\r\n            // set the port blocking mode recommended from stack overflow.\r\n            // http://stackoverflow.com/questions/5219450/rxtx-serial-connection-issue-with-blocking-read\r\n            serialPort.enableReceiveTimeout(responseTimeout);\r\n        } catch (UnsupportedCommOperationException e) {\r\n            ApplicationManager.logStackTrace(e);\r\n        }\r\n\r\nIf this is not supported by RXTX are alternative java libraries able to suppress these pulses? Does anyone know if these pulses are expected behavior per the RS232 specification?","title":"How to not pulse DTR &amp; RTS lines when opening serial port w RXTX","body":"<p>We have a device that is sensitive to the RS232 DTR and RTS lines and are using the RXTX API to connect to a linux serial port however opening the connection causes pulses on these lines and is resetting our device. Is there a way to configure the connection to not pulse the lines when the connection is open?</p>\n<p>This is the approach we currently use:</p>\n<pre><code>    // Set up the serial port\n    CommPortIdentifier portId = CommPortIdentifier.getPortIdentifier(serialPortID);\n    if (portId.isCurrentlyOwned()) {\n        TRACE.severe(&quot;Port &quot; + portId.getName() + &quot; (port ID = &quot; + serialPortID\n                + &quot;) is already in use by owner: &quot; + portId.getCurrentOwner());\n        throw new PortInUseException();\n    }\n    CommPort commPort = portId.open(this.getClass().getName(), responseTimeout);\n    if (!(commPort instanceof SerialPort)) {\n        TRACE.severe(&quot;Error: Only serial ports are supported.&quot;);\n        throw new RuntimeException(&quot;Error: Only serial ports are supported.&quot;);\n    }\n    SerialPort serialPort = commPort;\n\n    try {\n        serialPort.setDTR(false);\n        serialPort.setRTS(false);\n        serialPort.setSerialPortParams(baudRate, dataBits, stopBits, parity);\n        serialPort.setFlowControlMode(SerialPort.FLOWCONTROL_NONE);\n        // set the port blocking mode recommended from stack overflow.\n        // http://stackoverflow.com/questions/5219450/rxtx-serial-connection-issue-with-blocking-read\n        serialPort.enableReceiveTimeout(responseTimeout);\n    } catch (UnsupportedCommOperationException e) {\n        ApplicationManager.logStackTrace(e);\n    }\n</code></pre>\n<p>If this is not supported by RXTX are alternative java libraries able to suppress these pulses? Does anyone know if these pulses are expected behavior per the RS232 specification?</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-cloud-stream-binder-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1697173190,"post_id":77274930,"comment_id":136249031,"body_markdown":"Have you tried to set auto.offset.reset=earliest?","body":"Have you tried to set auto.offset.reset=earliest?"},{"owner":{"account_id":18886212,"reputation":1,"user_id":13777586,"display_name":"Vooply"},"score":0,"creation_date":1697203376,"post_id":77274930,"comment_id":136253994,"body_markdown":"@OneCricketeer thanks for the response. yes, I tried, but nothing happened. it looks like I dont have a connection. When I tried on a fresh project all worked, but in my project(have a lot of dependencies) it doesnt work. But with simple spring kafka (KafkaListener) it works perfectly, so I guess maybe it is some conflicts, but I am not sure","body":"@OneCricketeer thanks for the response. yes, I tried, but nothing happened. it looks like I dont have a connection. When I tried on a fresh project all worked, but in my project(have a lot of dependencies) it doesnt work. But with simple spring kafka (KafkaListener) it works perfectly, so I guess maybe it is some conflicts, but I am not sure"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1697218405,"post_id":77274930,"comment_id":136257095,"body_markdown":"Did you debug with `kafka-consumer-groups` to check the committed offsets for your consumer group?","body":"Did you debug with <code>kafka-consumer-groups</code> to check the committed offsets for your consumer group?"},{"owner":{"account_id":18886212,"reputation":1,"user_id":13777586,"display_name":"Vooply"},"score":0,"creation_date":1697440410,"post_id":77274930,"comment_id":136275334,"body_markdown":"@OneCricketeer it seems spring clod kafka doesnt work, like didnt start, or cant connect. For example: on fresh project, I have consumer logs (about configuring, subscription, etc) on the start server, but in my project, I didnt have any of these logs ( properties, versions and code the same)\nif I use spring kafka, without spring cloud, it works perfectly ) I use spring 6, boot 3. maybe some other package blocks access for spring cloud, but I cant find conflicts","body":"@OneCricketeer it seems spring clod kafka doesnt work, like didnt start, or cant connect. For example: on fresh project, I have consumer logs (about configuring, subscription, etc) on the start server, but in my project, I didnt have any of these logs ( properties, versions and code the same) if I use spring kafka, without spring cloud, it works perfectly ) I use spring 6, boot 3. maybe some other package blocks access for spring cloud, but I cant find conflicts"},{"owner":{"account_id":18886212,"reputation":1,"user_id":13777586,"display_name":"Vooply"},"score":0,"creation_date":1697442560,"post_id":77274930,"comment_id":136275685,"body_markdown":"@OneCricketeer also I tried with `kafka-consumer-groups` with `--describe`, when I tried from my project, it didnt return any result, only `Error: Consumer group &#39;my-group&#39; does not exist`\nbut in the fresh project, it returned detailed information","body":"@OneCricketeer also I tried with <code>kafka-consumer-groups</code> with <code>--describe</code>, when I tried from my project, it didnt return any result, only <code>Error: Consumer group &#39;my-group&#39; does not exist</code> but in the fresh project, it returned detailed information"},{"owner":{"account_id":18886212,"reputation":1,"user_id":13777586,"display_name":"Vooply"},"score":0,"creation_date":1697445536,"post_id":77274930,"comment_id":136276180,"body_markdown":"@OneCricketeer if we click to propertie `spring.cloud.stream.kafka.binder.brokers=localhost:9092` it direct us to class `KafkaBinderConfigurationProperties`to setter `setBrokers` and in debug mode it didnt  stop here, so class didnt initialize","body":"@OneCricketeer if we click to propertie <code>spring.cloud.stream.kafka.binder.brokers=localhost:9092</code> it direct us to class <code>KafkaBinderConfigurationProperties</code>to setter <code>setBrokers</code> and in debug mode it didnt  stop here, so class didnt initialize"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1697464973,"post_id":77274930,"comment_id":136279774,"body_markdown":"I don&#39;t use Spring, so cannot answer that, but based on the frequency of other questions posted here, I think it works fine, and should correctly create a consumer group, but only when offsets get acknowledged and committed. Otherwise, the code provided isn&#39;t anything that seems to need more than spring-kafka","body":"I don&#39;t use Spring, so cannot answer that, but based on the frequency of other questions posted here, I think it works fine, and should correctly create a consumer group, but only when offsets get acknowledged and committed. Otherwise, the code provided isn&#39;t anything that seems to need more than spring-kafka"}],"owner":{"account_id":18886212,"reputation":1,"user_id":13777586,"display_name":"Vooply"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697218375,"creation_date":1697042825,"question_id":77274930,"body_markdown":"Hello everyone and thank you for your time. My problem is that I don&#39;t get any messages from kafka topics when I use spring cloud stream with kafka binding and I really don&#39;t understand why. Everything works fine with spring-kafka, but I want to try spring cloud stream. I&#39;m using spring boot 3.1.4, so for spring cloud I&#39;m taking the latest version. I tried to do everything according to the spring documentation, but it seems I missed something\r\n\r\n    implementation (&#39;org.springframework.cloud:spring-cloud-stream-binder-kafka:4.0.4&#39;)\r\n\r\napplication.properties\r\n\r\n\r\n\r\n    spring.cloud.stream.kafka.binder.brokers=localhost:9092\r\n    spring.cloud.function.definition=ordersConsumer;productsConsumer\r\n    spring.cloud.stream.bindings.ordersConsumer-in-0.destination=data.order\r\n    spring.cloud.stream.bindings.productsConsumer-in-0.destination=data.product\r\n    spring.cloud.stream.bindings.ordersConsumer-in-0.group=my-group\r\n    spring.cloud.stream.bindings.productsConsume-in-0.group=my-group\r\n    spring.cloud.stream.kafka.bindings.ordersConsumer-in-0.consumer.configuration.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\n    spring.cloud.stream.kafka.bindings.productsConsumer-in-0.consumer.configuration.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\n\r\njava code, simple configuration class for only printing\r\n\r\n    @Configuration\r\n    @Lazy(false)\r\n    public class MessageProcessing implements IMessageProcessing {\r\n    \r\n        @Bean\r\n        public Consumer&lt;String&gt; ordersConsumer() {\r\n            return input -&gt; {\r\n                System.out.println(input);\r\n            };\r\n        }\r\n    \r\n        @Bean\r\n        public Consumer&lt;String&gt; productsConsumer() {\r\n            return input -&gt; {\r\n                System.out.println(input);\r\n            };\r\n        }\r\n    }\r\n\r\nThanks!","title":"Spring cloud stream binding kafka doesnt consume messages","body":"<p>Hello everyone and thank you for your time. My problem is that I don't get any messages from kafka topics when I use spring cloud stream with kafka binding and I really don't understand why. Everything works fine with spring-kafka, but I want to try spring cloud stream. I'm using spring boot 3.1.4, so for spring cloud I'm taking the latest version. I tried to do everything according to the spring documentation, but it seems I missed something</p>\n<pre><code>implementation ('org.springframework.cloud:spring-cloud-stream-binder-kafka:4.0.4')\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.cloud.stream.kafka.binder.brokers=localhost:9092\nspring.cloud.function.definition=ordersConsumer;productsConsumer\nspring.cloud.stream.bindings.ordersConsumer-in-0.destination=data.order\nspring.cloud.stream.bindings.productsConsumer-in-0.destination=data.product\nspring.cloud.stream.bindings.ordersConsumer-in-0.group=my-group\nspring.cloud.stream.bindings.productsConsume-in-0.group=my-group\nspring.cloud.stream.kafka.bindings.ordersConsumer-in-0.consumer.configuration.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer\nspring.cloud.stream.kafka.bindings.productsConsumer-in-0.consumer.configuration.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer\n</code></pre>\n<p>java code, simple configuration class for only printing</p>\n<pre><code>@Configuration\n@Lazy(false)\npublic class MessageProcessing implements IMessageProcessing {\n\n    @Bean\n    public Consumer&lt;String&gt; ordersConsumer() {\n        return input -&gt; {\n            System.out.println(input);\n        };\n    }\n\n    @Bean\n    public Consumer&lt;String&gt; productsConsumer() {\n        return input -&gt; {\n            System.out.println(input);\n        };\n    }\n}\n</code></pre>\n<p>Thanks!</p>\n"},{"tags":["java","scala","jvm","ssl-certificate","sbt"],"answers":[{"tags":[],"owner":{"account_id":7808038,"reputation":1546,"user_id":5905245,"accept_rate":90,"display_name":"kmh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697218263,"creation_date":1697218263,"answer_id":77289681,"question_id":77284100,"body_markdown":"What worked for me and resolved both points 1 &amp; 2 was to just modify the `cacerts` file directly instead of copying it, modifying it, and pointing to the copy.  Now SBT works fine with no additional arguments.\r\n\r\n    keytool -importcert -file myRootCA.pem -alias myRootCA -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass &#39;changeit&#39;\r\n\r\nI think if I need to back it out, this would work.\r\n\r\n    keytool -delete -alias myRootCA -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass &#39;changeit&#39;\r\n\r\nI don&#39;t know if this is the best idea, but it works, so I&#39;ll go with it for now.","title":"Security is Blocking SBT &amp; JVM - How to Import SSL Certificates via .pem File","body":"<p>What worked for me and resolved both points 1 &amp; 2 was to just modify the <code>cacerts</code> file directly instead of copying it, modifying it, and pointing to the copy.  Now SBT works fine with no additional arguments.</p>\n<pre><code>keytool -importcert -file myRootCA.pem -alias myRootCA -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass 'changeit'\n</code></pre>\n<p>I think if I need to back it out, this would work.</p>\n<pre><code>keytool -delete -alias myRootCA -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass 'changeit'\n</code></pre>\n<p>I don't know if this is the best idea, but it works, so I'll go with it for now.</p>\n"}],"owner":{"account_id":7808038,"reputation":1546,"user_id":5905245,"accept_rate":90,"display_name":"kmh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77289681,"answer_count":1,"score":0,"last_activity_date":1697218263,"creation_date":1697149024,"question_id":77284100,"body_markdown":"My company has installed a bunch of new security stuff on my machine that I don&#39;t understand (zscalar, appgate sdp, other stuff), but it&#39;s blocked most of the internet.  I need to use a .pem file that includes some certificate info that lets me through the firewalls or whatever.  (it&#39;s over my head what&#39;s happening)\r\n\r\nOne thing that has broken is the SBT / JVM stuff.  When I try to use SBT to compile a fat jar, it fails with the following error:\r\n\r\n```[error] Server access Error: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target url=https://repo1.maven.org/maven2/org/glassfish/javax.el/```\r\n\r\nI use `SDKMan` to manage java versions, and I use `sbt assembly` to package up fat jars (some projects use sbt 0.13, some use 1.3).  Laptops are macbooks (one old, one new).\r\n\r\nI tried following the instructions [here][1], but it makes no difference.  Same error before &amp; after.\r\n\r\n    # myRootCA.pem is in ~/.myCert/\r\n    cd ~/.myCert\r\n    cp $JAVA_HOME/jre/lib/security/cacerts ~/.myCert/\r\n    keytool -keystore cacerts -import -file myRootCA.pem -alias myProxy\r\n\r\n    # tried before &amp; after restarting machine; no difference\r\n    cd &lt;scala repo&gt;\r\n    sbt  &quot;-Djavax.net.ssl.trustStore=~/.myCert/cacerts&quot; assembly\r\n\r\nSo my questions are:\r\n\r\n 1. How do I get that .pem file of CA certificates into the JVM in a way that let&#39;s me use SBT\r\n 2. Can I get that into an `sbtopts` file somewhere (in individual repo&#39;s or /usr/local/etc/ or elsewhere) so I don&#39;t need an unwieldy addition to all my sbt commands\r\n\r\nThanks in advance.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/41981320/scala-sbt-and-corporate-proxy-suncertpathbuilderexception","title":"Security is Blocking SBT &amp; JVM - How to Import SSL Certificates via .pem File","body":"<p>My company has installed a bunch of new security stuff on my machine that I don't understand (zscalar, appgate sdp, other stuff), but it's blocked most of the internet.  I need to use a .pem file that includes some certificate info that lets me through the firewalls or whatever.  (it's over my head what's happening)</p>\n<p>One thing that has broken is the SBT / JVM stuff.  When I try to use SBT to compile a fat jar, it fails with the following error:</p>\n<p><code>[error] Server access Error: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target url=https://repo1.maven.org/maven2/org/glassfish/javax.el/</code></p>\n<p>I use <code>SDKMan</code> to manage java versions, and I use <code>sbt assembly</code> to package up fat jars (some projects use sbt 0.13, some use 1.3).  Laptops are macbooks (one old, one new).</p>\n<p>I tried following the instructions <a href=\"https://stackoverflow.com/questions/41981320/scala-sbt-and-corporate-proxy-suncertpathbuilderexception\">here</a>, but it makes no difference.  Same error before &amp; after.</p>\n<pre><code># myRootCA.pem is in ~/.myCert/\ncd ~/.myCert\ncp $JAVA_HOME/jre/lib/security/cacerts ~/.myCert/\nkeytool -keystore cacerts -import -file myRootCA.pem -alias myProxy\n\n# tried before &amp; after restarting machine; no difference\ncd &lt;scala repo&gt;\nsbt  &quot;-Djavax.net.ssl.trustStore=~/.myCert/cacerts&quot; assembly\n</code></pre>\n<p>So my questions are:</p>\n<ol>\n<li>How do I get that .pem file of CA certificates into the JVM in a way that let's me use SBT</li>\n<li>Can I get that into an <code>sbtopts</code> file somewhere (in individual repo's or /usr/local/etc/ or elsewhere) so I don't need an unwieldy addition to all my sbt commands</li>\n</ol>\n<p>Thanks in advance.</p>\n"},{"tags":["java","arrays","generics","standard-library"],"comments":[{"owner":{"account_id":29580870,"reputation":67,"user_id":22670690,"display_name":"GreyBit"},"score":0,"creation_date":1697206525,"post_id":77288223,"comment_id":136254627,"body_markdown":"Really just throwing several things at the wall in an attempt to get `sort` to throw the `ClassCastException` the javadoc warns of.\nClearly this was not one that worked, as execution doesn&#39;t even enter `sort` as you point out.","body":"Really just throwing several things at the wall in an attempt to get <code>sort</code> to throw the <code>ClassCastException</code> the javadoc warns of. Clearly this was not one that worked, as execution doesn&#39;t even enter <code>sort</code> as you point out."},{"owner":{"account_id":29580870,"reputation":67,"user_id":22670690,"display_name":"GreyBit"},"score":0,"creation_date":1697207106,"post_id":77288223,"comment_id":136254741,"body_markdown":"That&#39;s exactly the kind of thing I&#39;m looking for, thanks!","body":"That&#39;s exactly the kind of thing I&#39;m looking for, thanks!"},{"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"score":0,"creation_date":1697214894,"post_id":77288223,"comment_id":136256471,"body_markdown":"It&#39;s possible with a contrived Comparator such as `(a, b) -&gt; { throw new ClassCastException(&quot;Fake!&quot;); }`.","body":"It&#39;s possible with a contrived Comparator such as <code>(a, b) -&gt; { throw new ClassCastException(&quot;Fake!&quot;); }</code>."}],"answers":[{"comments":[{"owner":{"account_id":29580870,"reputation":67,"user_id":22670690,"display_name":"GreyBit"},"score":0,"creation_date":1697210845,"post_id":77288891,"comment_id":136255592,"body_markdown":"This is a good point. I hadn&#39;t considered the `Comparator` to throw a `ClassCastException` due to a bug in its own code.\nI do object slightly because I suspect that wasn&#39;t the reason this part of the documentation was added. `c.compare` might throw any old exception (say, `NullpointerException`, or even `IndexOutOfBoundsException`) but it&#39;s meaningless to document this possibility in the `Arrays` class. Isn&#39;t the same true for `ClassCastException`?","body":"This is a good point. I hadn&#39;t considered the <code>Comparator</code> to throw a <code>ClassCastException</code> due to a bug in its own code. I do object slightly because I suspect that wasn&#39;t the reason this part of the documentation was added. <code>c.compare</code> might throw any old exception (say, <code>NullpointerException</code>, or even <code>IndexOutOfBoundsException</code>) but it&#39;s meaningless to document this possibility in the <code>Arrays</code> class. Isn&#39;t the same true for <code>ClassCastException</code>?"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1697217369,"post_id":77288891,"comment_id":136256907,"body_markdown":"I presume the &quot;bug&quot; you&#39;re talking about here is home grown and not in any API code.","body":"I presume the &quot;bug&quot; you&#39;re talking about here is home grown and not in any API code."}],"tags":[],"owner":{"account_id":350281,"reputation":2772,"user_id":686041,"accept_rate":90,"display_name":"Konstantin Tarashchanskiy"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697210104,"creation_date":1697210104,"answer_id":77288891,"question_id":77288223,"body_markdown":"If you pay attention to the definition of `mutually comparable`, it is that &quot;[The Comparator] must not throw a ClassCastException&quot;. None of your tests actually violate that rule.\r\n\r\n    class ArraysTest {\r\n    \t@Test\r\n    \tpublic void sortingWithBadComparitor() {\r\n    \t\tNumber[] numbers = new Number[] { 4.0, 2, 3.0f };\r\n    \t\tThrowable e = Assertions.assertThrows(ClassCastException.class, () -&gt; {\r\n    \t\t\tArrays.sort(numbers, (o1, o2) -&gt; {\r\n    \t\t\t\tthrow new ClassCastException();\r\n    \t\t\t});\r\n    \t\t});\r\n    \t\t\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    \t\r\n    \tstatic final Comparator&lt;Number&gt; compareAsWholeNumberWithBug = new Comparator&lt;Number&gt;() {\r\n    \t\t@Override\r\n    \t\tpublic int compare(java.lang.Number o1, java.lang.Number o2) {\r\n    \t\t\tif (o1 instanceof Integer) { // Bug: assumes that if o1 is an integer, so is o2\r\n    \t\t\t\treturn ((Integer) o1).intValue() - ((Integer) o2).intValue();\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\treturn Long.compare(o1.longValue(), o2.longValue());\r\n    \t\t}\r\n    \t};\r\n    \t\r\n    \t@Test\r\n        public void sortingWithBuggyComparitor() {\r\n            Throwable e = Assertions.assertThrows(ClassCastException.class, () -&gt; {\r\n                Arrays.sort(new Number[] { 4.0, 2, 3.0f }, compareAsWholeNumberWithBug);\r\n            });\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nYou might object because the sort method is not actually throwing a new `ClassCastException`, but that is true in plenty of other places in the Java documentation. The `@throws` tag is frequently used for Exceptions thrown by calls in the implementation that the method does not catch.","title":"Can Arrays.sort(T[] a, Comparator&lt;? super T&gt; c) ever throw ClassCastException if c is not null?","body":"<p>If you pay attention to the definition of <code>mutually comparable</code>, it is that &quot;[The Comparator] must not throw a ClassCastException&quot;. None of your tests actually violate that rule.</p>\n<pre><code>class ArraysTest {\n    @Test\n    public void sortingWithBadComparitor() {\n        Number[] numbers = new Number[] { 4.0, 2, 3.0f };\n        Throwable e = Assertions.assertThrows(ClassCastException.class, () -&gt; {\n            Arrays.sort(numbers, (o1, o2) -&gt; {\n                throw new ClassCastException();\n            });\n        });\n        \n        e.printStackTrace();\n    }\n    \n    static final Comparator&lt;Number&gt; compareAsWholeNumberWithBug = new Comparator&lt;Number&gt;() {\n        @Override\n        public int compare(java.lang.Number o1, java.lang.Number o2) {\n            if (o1 instanceof Integer) { // Bug: assumes that if o1 is an integer, so is o2\n                return ((Integer) o1).intValue() - ((Integer) o2).intValue();\n            }\n            \n            return Long.compare(o1.longValue(), o2.longValue());\n        }\n    };\n    \n    @Test\n    public void sortingWithBuggyComparitor() {\n        Throwable e = Assertions.assertThrows(ClassCastException.class, () -&gt; {\n            Arrays.sort(new Number[] { 4.0, 2, 3.0f }, compareAsWholeNumberWithBug);\n        });\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>You might object because the sort method is not actually throwing a new <code>ClassCastException</code>, but that is true in plenty of other places in the Java documentation. The <code>@throws</code> tag is frequently used for Exceptions thrown by calls in the implementation that the method does not catch.</p>\n"},{"comments":[{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1697217284,"post_id":77289145,"comment_id":136256887,"body_markdown":"But then this either won&#39;t compile or gives  warnings about using raw types in a comparator and an unchecked warning for `Arrays.sort();`","body":"But then this either won&#39;t compile or gives  warnings about using raw types in a comparator and an unchecked warning for <code>Arrays.sort();</code>"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1697218179,"post_id":77289145,"comment_id":136257054,"body_markdown":"@WJS it compiles. I have extended the answer to show the compiler warnings","body":"@WJS it compiles. I have extended the answer to show the compiler warnings"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1697222827,"post_id":77289145,"comment_id":136257790,"body_markdown":"Yeah, your&#39;re correct .  I was trying something else an made a mistake.","body":"Yeah, your&#39;re correct .  I was trying something else an made a mistake."}],"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697218068,"creation_date":1697212414,"answer_id":77289145,"question_id":77288223,"body_markdown":"The exception is super simple to trigger if you have raw types (whether accidental or not):\r\n\r\n```\r\nclass FawltyComparators {\r\n    @Test\r\n    void test() {\r\n        final Comparator numberComparer = new NumberComparator();\r\n        final Object[] array = { 1, 2, &quot;3&quot;, &quot;4&quot; };\r\n        Arrays.sort(array, numberComparer);\r\n    }\r\n\r\n    private static final class NumberComparator implements Comparator&lt;Number&gt; {\r\n        @Override\r\n        public int compare(final Number o1, final Number o2) {\r\n            return 0; // doesn&#39;t matter\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBut this will still give you compiler warnings:\r\n\r\n```\r\nFawltyCompators.java:17: warning: [unchecked] unchecked method invocation: method sort in class Arrays is applied to given types\r\n        Arrays.sort(array, numberComparer);\r\n                   ^\r\n  required: T[],Comparator&lt;? super T&gt;\r\n  found:    Object[],Comparator\r\n  where T is a type-variable:\r\n    T extends Object declared in method &lt;T&gt;sort(T[],Comparator&lt;? super T&gt;)\r\nFawltyCompators.java:17: warning: [unchecked] unchecked conversion\r\n        Arrays.sort(array, numberComparer);\r\n                           ^\r\n  required: Comparator&lt;? super T&gt;\r\n  found:    Comparator\r\n  where T is a type-variable:\r\n    T extends Object declared in method &lt;T&gt;sort(T[],Comparator&lt;? super T&gt;)\r\n```","title":"Can Arrays.sort(T[] a, Comparator&lt;? super T&gt; c) ever throw ClassCastException if c is not null?","body":"<p>The exception is super simple to trigger if you have raw types (whether accidental or not):</p>\n<pre><code>class FawltyComparators {\n    @Test\n    void test() {\n        final Comparator numberComparer = new NumberComparator();\n        final Object[] array = { 1, 2, &quot;3&quot;, &quot;4&quot; };\n        Arrays.sort(array, numberComparer);\n    }\n\n    private static final class NumberComparator implements Comparator&lt;Number&gt; {\n        @Override\n        public int compare(final Number o1, final Number o2) {\n            return 0; // doesn't matter\n        }\n    }\n}\n</code></pre>\n<p>But this will still give you compiler warnings:</p>\n<pre><code>FawltyCompators.java:17: warning: [unchecked] unchecked method invocation: method sort in class Arrays is applied to given types\n        Arrays.sort(array, numberComparer);\n                   ^\n  required: T[],Comparator&lt;? super T&gt;\n  found:    Object[],Comparator\n  where T is a type-variable:\n    T extends Object declared in method &lt;T&gt;sort(T[],Comparator&lt;? super T&gt;)\nFawltyCompators.java:17: warning: [unchecked] unchecked conversion\n        Arrays.sort(array, numberComparer);\n                           ^\n  required: Comparator&lt;? super T&gt;\n  found:    Comparator\n  where T is a type-variable:\n    T extends Object declared in method &lt;T&gt;sort(T[],Comparator&lt;? super T&gt;)\n</code></pre>\n"}],"owner":{"account_id":29580870,"reputation":67,"user_id":22670690,"display_name":"GreyBit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77289145,"answer_count":2,"score":1,"last_activity_date":1697218068,"creation_date":1697204389,"question_id":77288223,"body_markdown":"The javadoc for `Arrays.sort(T[] a, Comparator&lt;? super T&gt; c)` from the package `java.util` in the standard library for Java 20 [API docs](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html#sort(T%5B%5D,java.util.Comparator)) reads as follows:\r\n&gt; public static &lt;T&gt; void sort(T[] a, Comparator&lt;? super T&gt; c)\r\n&gt; Sorts the specified array of objects according to the order induced by the specified comparator. **All elements in the array must be mutually comparable by the specified comparator (that is, c.compare(e1, e2) must not throw a ClassCastException for any elements e1 and e2 in the array)**.\r\n&gt; \r\n&gt; This sort is guaranteed to be stable: equal elements will not be reordered as a result of the sort.\r\n&gt; \r\n&gt; Implementation note: This implementation is a stable, adaptive, iterative mergesort that requires far fewer than n lg(n) comparisons when the input array is partially sorted, while offering the performance of a traditional mergesort when the input array is randomly ordered. If the input array is nearly sorted, the implementation requires approximately n comparisons. Temporary storage requirements vary from a small constant for nearly sorted input arrays to n/2 object references for randomly ordered input arrays.\r\n&gt; \r\n&gt; The implementation takes equal advantage of ascending and descending order in its input array, and can take advantage of ascending and descending order in different parts of the same input array. It is well-suited to merging two or more sorted arrays: simply concatenate the arrays and sort the resulting array.\r\n&gt; \r\n&gt; The implementation was adapted from Tim Peters&#39;s list sort for Python ( TimSort). It uses techniques from Peter McIlroy&#39;s &quot;Optimistic Sorting and Information Theoretic Complexity&quot;, in Proceedings of the Fourth Annual ACM-SIAM Symposium on Discrete Algorithms, pp 467-474, January 1993.\r\n&gt; \r\n&gt; Type Parameters:\r\n&gt; T - the class of the objects to be sorted\r\n&gt; Parameters:\r\n&gt; a - the array to be sorted\r\n&gt; c - the comparator to determine the order of the array. A null value indicates that the elements&#39; natural ordering should be used.\r\n&gt; Throws:\r\n&gt; **ClassCastException - if the array contains elements that are not mutually comparable using the specified comparator**\r\n&gt; IllegalArgumentException - (optional) if the comparator is found to violate the Comparator contract \r\n\r\nEmphasis mine.\r\n\r\nDoesn&#39;t the compiler guarantee (through the use of the type system and the generic signature of the method) that all elements of `a` are in fact mutually comparable using `c` and that `c.compare(e1, e2)` will never throw `ClassCastException`, provided `c` is not null?\r\n\r\nPresumably, the &quot;actual&quot; signature of `toArray`, with the type parameters erased, would look like so: `static void sort(Object[] a, Comparator c)` and the signature of `c.compare` (let&#39;s assume `c` has the static type `Number` in our program) would look like so: `int compare(Object o1, Object  o2)` and would contain two casts to `Number` in its implementation:\r\n\r\n```\r\nNumber e1 = (Number) o1;\r\nNumber e2 = (Number) o2;\r\n//...\r\n```\r\nThese casts succeed if and only if the runtime type of `o1` and `o2` is either `Number` or a sub-type of `Number`.\r\n\r\nThe runtime type of `o1` and `o2` is either `Number` or a sub-type of `Number` if and only if the runtime type of `a` is either `Number[]` or a sub-type of `Number[]`, e.g. `Integer[]`.\r\n\r\nThe runtime type of `a` is either `Number[]` or a sub-type of `Number[]` if and only if the static type of `a` is either `Number[]` or a sub-type of `Number[]`. (if the runtime type of `a` is *not* `Number[]` or a sub-type of `Number[]` but the static type of `a` is, a `ClassCastException` will be thrown *before* the body of `Arrays.sort` is entered)\r\n\r\nThat the static type of `a` is either `Number[]` or a sub-type of `Number[]` follows from the method signature `static &lt;T&gt; void sort(T[] a, Comparator&lt;? super T&gt; c)` because the static type of `c` is `Number` (`? super T` is `Number` so `T` is either `Number` or a sub-type of `Number`).\r\n\r\n\r\nI&#39;ve written some tests to try and get `Arrays.sort` to throw a `ClassCastException`, and only really got it when passing `null` for `c` instead of an actual comparator.\r\n\r\n```\r\npackage org.example.basics.generics.arrays;\r\n\r\nimport org.junit.jupiter.api.Assertions;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.Comparator;\r\n\r\nclass ArraysTest {\r\n\r\n    private static final Comparator&lt;Number&gt; compareAsWholeNumber = new Comparator&lt;Number&gt;() {\r\n        @Override\r\n        public int compare(java.lang.Number o1, java.lang.Number o2) {\r\n            return Long.compare(o1.longValue(), o2.longValue());\r\n        }\r\n    };\r\n\r\n    @Test\r\n    public void sortingIntsThrowsNoException() {\r\n        Integer[] ints = new Integer[]{4, 2, 3};\r\n        Assertions.assertDoesNotThrow(() -&gt; {\r\n            Arrays.sort(ints, compareAsWholeNumber);\r\n        });\r\n\r\n    }\r\n\r\n    @Test\r\n    public void sortingDoublesThrowsNoException() {\r\n        Double[] doubles = new Double[]{4.0, 2.0, 3.0};\r\n        Assertions.assertDoesNotThrow(() -&gt; {\r\n            Arrays.sort(doubles, compareAsWholeNumber);\r\n        });\r\n    }\r\n\r\n    @Test\r\n    public void sortingNumbersThrowsNoException() {\r\n        Number[] numbers = new Number[]{4.0, 2, 3.0f};\r\n        Assertions.assertDoesNotThrow(() -&gt; {\r\n            Arrays.sort(numbers, compareAsWholeNumber);\r\n        });\r\n    }\r\n\r\n//    @Test\r\n//    public void sortingObjectsIsCompileError() {\r\n//        Object[] numbers = new Number[]{4.0, 2, 3.0f};\r\n//        Arrays.sort(numbers, compareAsWholeNumber);\r\n//    }\r\n\r\n    @Test\r\n    public void sortingDisguisedStringsThrowsClassCastException() {\r\n        Throwable e = Assertions.assertThrows(ClassCastException.class, () -&gt; {\r\n            Arrays.sort((Number[]) new Object[]{&quot;4.0&quot;, &quot;2&quot;, &quot;3.0f&quot;}, compareAsWholeNumber);\r\n        });\r\n        e.printStackTrace();\r\n    }\r\n\r\n    @Test\r\n    public void sortingDisguisedStringsThrowsClassCastExceptionAtArrayAssignment() {\r\n        Assertions.assertThrows(ClassCastException.class, () -&gt; {\r\n            Number[] numbers = (Number[]) new Object[]{&quot;4.0&quot;, &quot;2&quot;, &quot;3.0f&quot;};\r\n        });\r\n    }\r\n    @Test\r\n    public void sortingNonComparableWithNullComparatorThrowsClassCastException() {\r\n        Number[] numbers = new Number[]{4.0, 2, 3.0f};\r\n        Throwable e = Assertions.assertThrows(ClassCastException.class, () -&gt; {\r\n            Arrays.sort(numbers, null);\r\n        });\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\nThe above test suite runs successfully on my machine using Eclipse Temurin 20.0.2.\r\n\r\nNote especially the last 4 tests.\r\n\r\n`sortingObjectsIsCompileError`: Passing an array with a static type that is neither `Number[]` nor a sub-type of `Number[]` to `sort` is a compile error.\r\nUncommenting that test and trying to compile produces the following for me:\r\n&gt; TestToArray.java:46: error: no suitable method found for sort(Object[],Comparator&lt;Number&gt;)\r\n&gt; Arrays.sort(numbers, compareAsWholeNumber);\r\n&gt;               ^\r\n&gt; method Arrays.&lt;T#1&gt;sort(T#1[],Comparator&lt;? super T#1&gt;) is not applicable\r\n&gt;       (inference variable T#1 has incompatible bounds\r\n&gt; upper bounds: Number,Object\r\n&gt; lower bounds: Object)\r\n&gt; method Arrays.&lt;T#2&gt;sort(T#2[],int,int,Comparator&lt;? super T#2&gt;) is not applicable\r\n&gt;       (cannot infer type-variable(s) T#2\r\n&gt;         (actual and formal argument lists differ in length))\r\n&gt; where T#1,T#2 are type-variables:\r\n&gt; T#1 extends Object declared in method &lt;T#1&gt;sort(T#1[],Comparator&lt;? super T#1&gt;)\r\n&gt; T#2 extends Object declared in method &lt;T#2&gt;sort(T#2[],int,int,Comparator&lt;? super T#2&gt;)\r\n\r\n`sortingDisguisedStringsThrowsClassCastException`: As the name suggests, a `ClassCastException` is indeed thrown here, but this is misleading: Printing the stacktrace to std_out yields the following (reduced for brevity):\r\n&gt; java.lang.ClassCastException: class [Ljava.lang.Object; cannot be cast to class [Ljava.lang.Number; ([Ljava.lang.Object; and [Ljava.lang.Number; are in module java.base of loader &#39;bootstrap&#39;)\r\n&gt; \tat org.example.basics.generics.arrays.TestToArray.lambda$sortingDisguisedStringsThrowsClassCastException$3(TestToArray.java:52) &lt;3 internal lines&gt;\r\n&gt; \tat org.example.basics.generics.arrays.TestToArray.sortingDisguisedStringsThrowsClassCastException(TestToArray.java:51)\r\n&gt; \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) &lt;9 internal lines&gt;\r\n&gt; \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) &lt;30 internal lines&gt;\r\n&gt; \tat jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) &lt;7 internal lines&gt;\r\n&gt; \tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n&gt; \tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\n\r\nNote that: 1. the failed cast is from `[Ljava.lang.Object` to `[Ljava.lang.Number` rather than from `java.lang.Object` to `java.lang.Number` as we would expect it to be for a failed cast inside the `compare` method and 2. the `ClassCastException` is thrown from inside the `TestToArray` class and *not* from the `Arrays` class.\r\n\r\nThe test `sortingDisguisedStringsThrowsClassCastExceptionAtArrayAssignment` shows that simply assigning the array of `String[]` to an array of `Number[]` throws that same `ClassCastException`.\r\n\r\nThe last test, `sortingNonComparableWithNullComparatorThrowsClassCastException` does in fact throw the expected `ClassCastException` and this is the only case where I was able to get the `sort` method itself to throw this exception. Printing the stacktrace to std_out yields the following (reduced for brevity):\r\n&gt; java.lang.ClassCastException: class java.lang.Double cannot be cast to class java.lang.Integer (java.lang.Double and java.lang.Integer are in module java.base of loader &#39;bootstrap&#39;)\r\n&gt; \tat java.base/java.lang.Integer.compareTo(Integer.java:72)\r\n&gt; \tat java.base/java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:320)\r\n&gt; \tat java.base/java.util.ComparableTimSort.sort(ComparableTimSort.java:188)\r\n&gt; \tat java.base/java.util.Arrays.sort(Arrays.java:1041)\r\n&gt; \tat java.base/java.util.Arrays.sort(Arrays.java:1228)\r\n&gt; \tat org.example.basics.generics.arrays.TestToArray.lambda$sortingNonComparableWithNullComparatorThrowsClassCastException$5(TestToArray.java:67) &lt;30 internal lines&gt;\r\n&gt; \tat jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) &lt;7 internal lines&gt;\r\n&gt; \tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n&gt; \tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\n\r\nNote that in this case the failed cast is from java.lang.Double to java.lang.Integer and the exception is actually thrown from the `Arrays` class.\r\n\r\n\r\n\r\nIs the only case where `Arrays.sort(T[] a, Comparator&lt;? super T&gt; c)` can throw `ClassCastException` the case where the value `null` is passed for the comparator `c`?\r\n\r\nContext: I&#39;m hoping to find out what kind of mistakes I need to make in order for the type system to no longer be able to function as a safeguard against `ClassCastException` for `sort`. So far it seems that the compiler will at the very least issue an &quot;unchecked&quot; warning which is reassuring. Is there any way to get a `ClassCastException` from `sort` without the compiler issuing &quot;unchecked&quot; warnings (and without passing `null` in place of `c`)?","title":"Can Arrays.sort(T[] a, Comparator&lt;? super T&gt; c) ever throw ClassCastException if c is not null?","body":"<p>The javadoc for <code>Arrays.sort(T[] a, Comparator&lt;? super T&gt; c)</code> from the package <code>java.util</code> in the standard library for Java 20 <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html#sort(T%5B%5D,java.util.Comparator)\" rel=\"nofollow noreferrer\">API docs</a> reads as follows:</p>\n<blockquote>\n<p>public static  void sort(T[] a, Comparator&lt;? super T&gt; c)\nSorts the specified array of objects according to the order induced by the specified comparator. <strong>All elements in the array must be mutually comparable by the specified comparator (that is, c.compare(e1, e2) must not throw a ClassCastException for any elements e1 and e2 in the array)</strong>.</p>\n<p>This sort is guaranteed to be stable: equal elements will not be reordered as a result of the sort.</p>\n<p>Implementation note: This implementation is a stable, adaptive, iterative mergesort that requires far fewer than n lg(n) comparisons when the input array is partially sorted, while offering the performance of a traditional mergesort when the input array is randomly ordered. If the input array is nearly sorted, the implementation requires approximately n comparisons. Temporary storage requirements vary from a small constant for nearly sorted input arrays to n/2 object references for randomly ordered input arrays.</p>\n<p>The implementation takes equal advantage of ascending and descending order in its input array, and can take advantage of ascending and descending order in different parts of the same input array. It is well-suited to merging two or more sorted arrays: simply concatenate the arrays and sort the resulting array.</p>\n<p>The implementation was adapted from Tim Peters's list sort for Python ( TimSort). It uses techniques from Peter McIlroy's &quot;Optimistic Sorting and Information Theoretic Complexity&quot;, in Proceedings of the Fourth Annual ACM-SIAM Symposium on Discrete Algorithms, pp 467-474, January 1993.</p>\n<p>Type Parameters:\nT - the class of the objects to be sorted\nParameters:\na - the array to be sorted\nc - the comparator to determine the order of the array. A null value indicates that the elements' natural ordering should be used.\nThrows:\n<strong>ClassCastException - if the array contains elements that are not mutually comparable using the specified comparator</strong>\nIllegalArgumentException - (optional) if the comparator is found to violate the Comparator contract</p>\n</blockquote>\n<p>Emphasis mine.</p>\n<p>Doesn't the compiler guarantee (through the use of the type system and the generic signature of the method) that all elements of <code>a</code> are in fact mutually comparable using <code>c</code> and that <code>c.compare(e1, e2)</code> will never throw <code>ClassCastException</code>, provided <code>c</code> is not null?</p>\n<p>Presumably, the &quot;actual&quot; signature of <code>toArray</code>, with the type parameters erased, would look like so: <code>static void sort(Object[] a, Comparator c)</code> and the signature of <code>c.compare</code> (let's assume <code>c</code> has the static type <code>Number</code> in our program) would look like so: <code>int compare(Object o1, Object  o2)</code> and would contain two casts to <code>Number</code> in its implementation:</p>\n<pre><code>Number e1 = (Number) o1;\nNumber e2 = (Number) o2;\n//...\n</code></pre>\n<p>These casts succeed if and only if the runtime type of <code>o1</code> and <code>o2</code> is either <code>Number</code> or a sub-type of <code>Number</code>.</p>\n<p>The runtime type of <code>o1</code> and <code>o2</code> is either <code>Number</code> or a sub-type of <code>Number</code> if and only if the runtime type of <code>a</code> is either <code>Number[]</code> or a sub-type of <code>Number[]</code>, e.g. <code>Integer[]</code>.</p>\n<p>The runtime type of <code>a</code> is either <code>Number[]</code> or a sub-type of <code>Number[]</code> if and only if the static type of <code>a</code> is either <code>Number[]</code> or a sub-type of <code>Number[]</code>. (if the runtime type of <code>a</code> is <em>not</em> <code>Number[]</code> or a sub-type of <code>Number[]</code> but the static type of <code>a</code> is, a <code>ClassCastException</code> will be thrown <em>before</em> the body of <code>Arrays.sort</code> is entered)</p>\n<p>That the static type of <code>a</code> is either <code>Number[]</code> or a sub-type of <code>Number[]</code> follows from the method signature <code>static &lt;T&gt; void sort(T[] a, Comparator&lt;? super T&gt; c)</code> because the static type of <code>c</code> is <code>Number</code> (<code>? super T</code> is <code>Number</code> so <code>T</code> is either <code>Number</code> or a sub-type of <code>Number</code>).</p>\n<p>I've written some tests to try and get <code>Arrays.sort</code> to throw a <code>ClassCastException</code>, and only really got it when passing <code>null</code> for <code>c</code> instead of an actual comparator.</p>\n<pre><code>package org.example.basics.generics.arrays;\n\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.Arrays;\nimport java.util.Comparator;\n\nclass ArraysTest {\n\n    private static final Comparator&lt;Number&gt; compareAsWholeNumber = new Comparator&lt;Number&gt;() {\n        @Override\n        public int compare(java.lang.Number o1, java.lang.Number o2) {\n            return Long.compare(o1.longValue(), o2.longValue());\n        }\n    };\n\n    @Test\n    public void sortingIntsThrowsNoException() {\n        Integer[] ints = new Integer[]{4, 2, 3};\n        Assertions.assertDoesNotThrow(() -&gt; {\n            Arrays.sort(ints, compareAsWholeNumber);\n        });\n\n    }\n\n    @Test\n    public void sortingDoublesThrowsNoException() {\n        Double[] doubles = new Double[]{4.0, 2.0, 3.0};\n        Assertions.assertDoesNotThrow(() -&gt; {\n            Arrays.sort(doubles, compareAsWholeNumber);\n        });\n    }\n\n    @Test\n    public void sortingNumbersThrowsNoException() {\n        Number[] numbers = new Number[]{4.0, 2, 3.0f};\n        Assertions.assertDoesNotThrow(() -&gt; {\n            Arrays.sort(numbers, compareAsWholeNumber);\n        });\n    }\n\n//    @Test\n//    public void sortingObjectsIsCompileError() {\n//        Object[] numbers = new Number[]{4.0, 2, 3.0f};\n//        Arrays.sort(numbers, compareAsWholeNumber);\n//    }\n\n    @Test\n    public void sortingDisguisedStringsThrowsClassCastException() {\n        Throwable e = Assertions.assertThrows(ClassCastException.class, () -&gt; {\n            Arrays.sort((Number[]) new Object[]{&quot;4.0&quot;, &quot;2&quot;, &quot;3.0f&quot;}, compareAsWholeNumber);\n        });\n        e.printStackTrace();\n    }\n\n    @Test\n    public void sortingDisguisedStringsThrowsClassCastExceptionAtArrayAssignment() {\n        Assertions.assertThrows(ClassCastException.class, () -&gt; {\n            Number[] numbers = (Number[]) new Object[]{&quot;4.0&quot;, &quot;2&quot;, &quot;3.0f&quot;};\n        });\n    }\n    @Test\n    public void sortingNonComparableWithNullComparatorThrowsClassCastException() {\n        Number[] numbers = new Number[]{4.0, 2, 3.0f};\n        Throwable e = Assertions.assertThrows(ClassCastException.class, () -&gt; {\n            Arrays.sort(numbers, null);\n        });\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>The above test suite runs successfully on my machine using Eclipse Temurin 20.0.2.</p>\n<p>Note especially the last 4 tests.</p>\n<p><code>sortingObjectsIsCompileError</code>: Passing an array with a static type that is neither <code>Number[]</code> nor a sub-type of <code>Number[]</code> to <code>sort</code> is a compile error.\nUncommenting that test and trying to compile produces the following for me:</p>\n<blockquote>\n<p>TestToArray.java:46: error: no suitable method found for sort(Object[],Comparator)\nArrays.sort(numbers, compareAsWholeNumber);\n^\nmethod Arrays.&lt;T#1&gt;sort(T#1[],Comparator&lt;? super T#1&gt;) is not applicable\n(inference variable T#1 has incompatible bounds\nupper bounds: Number,Object\nlower bounds: Object)\nmethod Arrays.&lt;T#2&gt;sort(T#2[],int,int,Comparator&lt;? super T#2&gt;) is not applicable\n(cannot infer type-variable(s) T#2\n(actual and formal argument lists differ in length))\nwhere T#1,T#2 are type-variables:\nT#1 extends Object declared in method &lt;T#1&gt;sort(T#1[],Comparator&lt;? super T#1&gt;)\nT#2 extends Object declared in method &lt;T#2&gt;sort(T#2[],int,int,Comparator&lt;? super T#2&gt;)</p>\n</blockquote>\n<p><code>sortingDisguisedStringsThrowsClassCastException</code>: As the name suggests, a <code>ClassCastException</code> is indeed thrown here, but this is misleading: Printing the stacktrace to std_out yields the following (reduced for brevity):</p>\n<blockquote>\n<p>java.lang.ClassCastException: class [Ljava.lang.Object; cannot be cast to class [Ljava.lang.Number; ([Ljava.lang.Object; and [Ljava.lang.Number; are in module java.base of loader 'bootstrap')\nat org.example.basics.generics.arrays.TestToArray.lambda$sortingDisguisedStringsThrowsClassCastException$3(TestToArray.java:52) &lt;3 internal lines&gt;\nat org.example.basics.generics.arrays.TestToArray.sortingDisguisedStringsThrowsClassCastException(TestToArray.java:51)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) &lt;9 internal lines&gt;\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) &lt;30 internal lines&gt;\nat jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) &lt;7 internal lines&gt;\nat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\nat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)</p>\n</blockquote>\n<p>Note that: 1. the failed cast is from <code>[Ljava.lang.Object</code> to <code>[Ljava.lang.Number</code> rather than from <code>java.lang.Object</code> to <code>java.lang.Number</code> as we would expect it to be for a failed cast inside the <code>compare</code> method and 2. the <code>ClassCastException</code> is thrown from inside the <code>TestToArray</code> class and <em>not</em> from the <code>Arrays</code> class.</p>\n<p>The test <code>sortingDisguisedStringsThrowsClassCastExceptionAtArrayAssignment</code> shows that simply assigning the array of <code>String[]</code> to an array of <code>Number[]</code> throws that same <code>ClassCastException</code>.</p>\n<p>The last test, <code>sortingNonComparableWithNullComparatorThrowsClassCastException</code> does in fact throw the expected <code>ClassCastException</code> and this is the only case where I was able to get the <code>sort</code> method itself to throw this exception. Printing the stacktrace to std_out yields the following (reduced for brevity):</p>\n<blockquote>\n<p>java.lang.ClassCastException: class java.lang.Double cannot be cast to class java.lang.Integer (java.lang.Double and java.lang.Integer are in module java.base of loader 'bootstrap')\nat java.base/java.lang.Integer.compareTo(Integer.java:72)\nat java.base/java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:320)\nat java.base/java.util.ComparableTimSort.sort(ComparableTimSort.java:188)\nat java.base/java.util.Arrays.sort(Arrays.java:1041)\nat java.base/java.util.Arrays.sort(Arrays.java:1228)\nat org.example.basics.generics.arrays.TestToArray.lambda$sortingNonComparableWithNullComparatorThrowsClassCastException$5(TestToArray.java:67) &lt;30 internal lines&gt;\nat jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) &lt;7 internal lines&gt;\nat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\nat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)</p>\n</blockquote>\n<p>Note that in this case the failed cast is from java.lang.Double to java.lang.Integer and the exception is actually thrown from the <code>Arrays</code> class.</p>\n<p>Is the only case where <code>Arrays.sort(T[] a, Comparator&lt;? super T&gt; c)</code> can throw <code>ClassCastException</code> the case where the value <code>null</code> is passed for the comparator <code>c</code>?</p>\n<p>Context: I'm hoping to find out what kind of mistakes I need to make in order for the type system to no longer be able to function as a safeguard against <code>ClassCastException</code> for <code>sort</code>. So far it seems that the compiler will at the very least issue an &quot;unchecked&quot; warning which is reassuring. Is there any way to get a <code>ClassCastException</code> from <code>sort</code> without the compiler issuing &quot;unchecked&quot; warnings (and without passing <code>null</code> in place of <code>c</code>)?</p>\n"},{"tags":["java","junit","zerocode"],"answers":[{"comments":[{"owner":{"account_id":9616878,"reputation":145,"user_id":7139351,"accept_rate":50,"display_name":"Sathya"},"score":0,"creation_date":1575370573,"post_id":58724271,"comment_id":104535298,"body_markdown":"thank you for the reply. I was looking for a way to run the tests without specifying the methods individually.  Anyhow the task which required this part has been parked for the time. Will revisit in case this is further required.","body":"thank you for the reply. I was looking for a way to run the tests without specifying the methods individually.  Anyhow the task which required this part has been parked for the time. Will revisit in case this is further required."}],"tags":[],"owner":{"account_id":16084074,"reputation":69,"user_id":11609249,"display_name":"ivlahek"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1573021820,"creation_date":1573021820,"answer_id":58724271,"question_id":58657690,"body_markdown":"I think you can not do this with Zerocode. \r\n\r\nIf you want to reuse your JUnit test you need to create a LoadScenario test class. In this class, you need to tell which test you are going to use and which method it should run.\r\n\r\nFor example \r\n\r\n```\r\n@LoadWith(&quot;load_generation.properties&quot;)\r\n@TestMapping(testClass = PostCorpLoanServiceTest.class, testMethod = &quot;testPostNewLoan_crudOperations&quot;)\r\n@TestMapping(testClass = PutCorpLoanServiceTest.class, testMethod = &quot;testPutAmendExistingLoan&quot;)\r\n@TestMapping(testClass = GetScreeningServiceTest.class, testMethod = &quot;testGetScreeningLocalAndGlobal&quot;)\r\n@RunWith(ZeroCodeMultiLoadRunner.class)\r\npublic class JunitParallelMultiScenarioTest {\r\n\r\n}\r\n\r\n```\r\n\r\nTake a look a this repo hosted on github: \r\nhttps://github.com/authorjapps/performance-tests. \r\nIt is a showcase project for ZeroCode framework (load testing part of the framework). It contains load test samples created with the help of Zerocode framework. \r\n\r\n","title":"Running a Junit Test Suite with Zerocode","body":"<p>I think you can not do this with Zerocode. </p>\n\n<p>If you want to reuse your JUnit test you need to create a LoadScenario test class. In this class, you need to tell which test you are going to use and which method it should run.</p>\n\n<p>For example </p>\n\n<pre><code>@LoadWith(\"load_generation.properties\")\n@TestMapping(testClass = PostCorpLoanServiceTest.class, testMethod = \"testPostNewLoan_crudOperations\")\n@TestMapping(testClass = PutCorpLoanServiceTest.class, testMethod = \"testPutAmendExistingLoan\")\n@TestMapping(testClass = GetScreeningServiceTest.class, testMethod = \"testGetScreeningLocalAndGlobal\")\n@RunWith(ZeroCodeMultiLoadRunner.class)\npublic class JunitParallelMultiScenarioTest {\n\n}\n\n</code></pre>\n\n<p>Take a look a this repo hosted on github: \n<a href=\"https://github.com/authorjapps/performance-tests\" rel=\"nofollow noreferrer\">https://github.com/authorjapps/performance-tests</a>. \nIt is a showcase project for ZeroCode framework (load testing part of the framework). It contains load test samples created with the help of Zerocode framework. </p>\n"},{"comments":[{"owner":{"account_id":9616878,"reputation":145,"user_id":7139351,"accept_rate":50,"display_name":"Sathya"},"score":0,"creation_date":1575370619,"post_id":58804384,"comment_id":104535329,"body_markdown":"thank you for the reply. Anyhow the task which required this part has been parked for the time. Will revisit in case this is further required.","body":"thank you for the reply. Anyhow the task which required this part has been parked for the time. Will revisit in case this is further required."}],"tags":[],"owner":{"account_id":12533796,"reputation":51,"user_id":9121086,"display_name":"Sidd Gautama"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573489029,"creation_date":1573486596,"answer_id":58804384,"question_id":58657690,"body_markdown":"You do not need Zerocode to achieve this. You can simply use `Maven SureFire` plugin for the parallel running of your Suite class(which has reference to other tests classes).\r\n\r\n```xml\r\n           &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.0-M3&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t\t&lt;include&gt;org.jsmart.samples.tests.AnyTestSuite&lt;/include&gt;\r\n\t\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t\t&lt;parallel&gt;classes&lt;/parallel&gt;\r\n\t\t\t\t\t&lt;!--&lt;parallel&gt;methods&lt;/parallel&gt;--&gt; &lt;!-- Or use methods --&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n```\r\n\r\n**Note:**\r\nIn this case you need to make sure all your test-methods/classes are actually/potentially can be run parallely. Which means- In terms of the data you need to make sure you have designed them correctly so they are independent or not intended to overlap or block each other.\r\n\r\nThis also holds good for the below situation, but here you are cherry-picking the tests yourself and you make sure they can be fed into a parallel runner.\r\n\r\n1) But if you use `@RunWith(ZeroCodeUnitRunner.class)` on your individual test classes(not the Suite class), then you get a nice CSV report at the &#39;target&#39; folder.\r\n\r\nThen you can use this report to generate various throughput `graphs/statistics` etc for your project or business audience. See the section `Extract useful information from the data` in this [blog](https://medium.com/@igorvlahek1/load-testing-with-junit-393a83261745).\r\n\r\n2) If you need to control your parallel runs, e.g. you want to fire `50 users in 60secs` or `100 users in 60 secs` or `1000 users in 300 secs` etc, then you need Zerocode runners which helps you to easily achieve this.\r\n```java\r\n@RunWith(ZeroCodeLoadRunner.class)\r\n-or-\r\n@RunWith(ZeroCodeMultiLoadRunner.class)\r\n```","title":"Running a Junit Test Suite with Zerocode","body":"<p>You do not need Zerocode to achieve this. You can simply use <code>Maven SureFire</code> plugin for the parallel running of your Suite class(which has reference to other tests classes).</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>           &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0-M3&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;includes&gt;\n                        &lt;include&gt;org.jsmart.samples.tests.AnyTestSuite&lt;/include&gt;\n                    &lt;/includes&gt;\n                    &lt;parallel&gt;classes&lt;/parallel&gt;\n                    &lt;!--&lt;parallel&gt;methods&lt;/parallel&gt;--&gt; &lt;!-- Or use methods --&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n\n<p><strong>Note:</strong>\nIn this case you need to make sure all your test-methods/classes are actually/potentially can be run parallely. Which means- In terms of the data you need to make sure you have designed them correctly so they are independent or not intended to overlap or block each other.</p>\n\n<p>This also holds good for the below situation, but here you are cherry-picking the tests yourself and you make sure they can be fed into a parallel runner.</p>\n\n<p>1) But if you use <code>@RunWith(ZeroCodeUnitRunner.class)</code> on your individual test classes(not the Suite class), then you get a nice CSV report at the 'target' folder.</p>\n\n<p>Then you can use this report to generate various throughput <code>graphs/statistics</code> etc for your project or business audience. See the section <code>Extract useful information from the data</code> in this <a href=\"https://medium.com/@igorvlahek1/load-testing-with-junit-393a83261745\" rel=\"nofollow noreferrer\">blog</a>.</p>\n\n<p>2) If you need to control your parallel runs, e.g. you want to fire <code>50 users in 60secs</code> or <code>100 users in 60 secs</code> or <code>1000 users in 300 secs</code> etc, then you need Zerocode runners which helps you to easily achieve this.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(ZeroCodeLoadRunner.class)\n-or-\n@RunWith(ZeroCodeMultiLoadRunner.class)\n</code></pre>\n"}],"owner":{"account_id":9616878,"reputation":145,"user_id":7139351,"accept_rate":50,"display_name":"Sathya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1599,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1697217864,"creation_date":1572604255,"question_id":58657690,"body_markdown":"I am trying to run a load test with Junit(4) using Zerocode. I was able to run existing Junit test classes by following these tutorials \r\n\r\n - [Load testing with JUnit using Zerocode framework][1] \r\n - [Reusing the Existing JUnit Tests for Load/Stress Generation][2]\r\n\r\nI have a Junit test suite working properly and I would like to know how to use zerocode to start this test suite so it will run all the tests in all test classes for a load test. The examples above are describing how to run a selected test method or few only.\r\n\r\n  [1]: https://medium.com/@igorvlahek1/load-testing-with-junit-393a83261745\r\n  [2]: https://dzone.com/articles/how-we-do-performance-testing-easily-efficiently-a","title":"Running a Junit Test Suite with Zerocode","body":"<p>I am trying to run a load test with Junit(4) using Zerocode. I was able to run existing Junit test classes by following these tutorials </p>\n\n<ul>\n<li><a href=\"https://medium.com/@igorvlahek1/load-testing-with-junit-393a83261745\" rel=\"nofollow noreferrer\">Load testing with JUnit using Zerocode framework</a> </li>\n<li><a href=\"https://dzone.com/articles/how-we-do-performance-testing-easily-efficiently-a\" rel=\"nofollow noreferrer\">Reusing the Existing JUnit Tests for Load/Stress Generation</a></li>\n</ul>\n\n<p>I have a Junit test suite working properly and I would like to know how to use zerocode to start this test suite so it will run all the tests in all test classes for a load test. The examples above are describing how to run a selected test method or few only.</p>\n"},{"tags":["java","sql-server","hibernate","spring-data-jpa","nocount"],"comments":[{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1680319073,"post_id":75904080,"comment_id":133882774,"body_markdown":"Have you tried using Extended Events or the SQL Profiler tool to capture the actual T-SQL that Spring is submitting to SQL Server? If you tried executing that captured code in SSMS you might get insights into what the real error is, because it sounds like something to do with the ORM mapping (identity columns, composite keys, etc.) not being setup correctly.","body":"Have you tried using Extended Events or the SQL Profiler tool to capture the actual T-SQL that Spring is submitting to SQL Server? If you tried executing that captured code in SSMS you might get insights into what the real error is, because it sounds like something to do with the ORM mapping (identity columns, composite keys, etc.) not being setup correctly."},{"owner":{"account_id":18612735,"reputation":53,"user_id":13564698,"display_name":"infD"},"score":0,"creation_date":1680323673,"post_id":75904080,"comment_id":133883108,"body_markdown":"I haven&#39;t tried Extended Events or the SQL Profiler tool yet but if I turn off NOCOUNT setting at Server Database Level then everything works normally. So I personally don&#39;t think it&#39;s something related to ORM mapping","body":"I haven&#39;t tried Extended Events or the SQL Profiler tool yet but if I turn off NOCOUNT setting at Server Database Level then everything works normally. So I personally don&#39;t think it&#39;s something related to ORM mapping"},{"owner":{"account_id":4571603,"reputation":44060,"user_id":3711162,"display_name":"Dan Guzman"},"score":1,"creation_date":1680345839,"post_id":75904080,"comment_id":133885171,"body_markdown":"The `NOCOUNT ON` property in your question is not necessarily the server property. It is the initial value for your SQL Server Management Studio client connections, which will reflect the server configuration if set to a non-default value. The server-level default configuration is bit 512 of `user options` (`SELECT CASE WHEN CAST(value AS int) &amp; 512 = 512 THEN &#39;NOCOUNT ON&#39; ELSE &#39;NOCOUNT OFF&#39; END FROM sys.configurations WHERE name = &#39;user options&#39;;`).","body":"The <code>NOCOUNT ON</code> property in your question is not necessarily the server property. It is the initial value for your SQL Server Management Studio client connections, which will reflect the server configuration if set to a non-default value. The server-level default configuration is bit 512 of <code>user options</code> (<code>SELECT CASE WHEN CAST(value AS int) &amp; 512 = 512 THEN &#39;NOCOUNT ON&#39; ELSE &#39;NOCOUNT OFF&#39; END FROM sys.configurations WHERE name = &#39;user options&#39;;</code>)."},{"owner":{"account_id":18612735,"reputation":53,"user_id":13564698,"display_name":"infD"},"score":0,"creation_date":1680354934,"post_id":75904080,"comment_id":133886318,"body_markdown":"Thanks @DanGuzman I don&#39;t really know how to describe it &quot;professionally&quot; but is there any ways to deal with my problem?","body":"Thanks @DanGuzman I don&#39;t really know how to describe it &quot;professionally&quot; but is there any ways to deal with my problem?"},{"owner":{"account_id":4571603,"reputation":44060,"user_id":3711162,"display_name":"Dan Guzman"},"score":0,"creation_date":1680355394,"post_id":75904080,"comment_id":133886374,"body_markdown":"@infD, as already suggested, use a trace to capture the actual requests generated by the ORM.","body":"@infD, as already suggested, use a trace to capture the actual requests generated by the ORM."},{"owner":{"account_id":18612735,"reputation":53,"user_id":13564698,"display_name":"infD"},"score":0,"creation_date":1680356815,"post_id":75904080,"comment_id":133886558,"body_markdown":"@DanGuzman Could you please go into a bit more detail? I&#39;m sorry I don&#39;t really understand what you&#39;re saying","body":"@DanGuzman Could you please go into a bit more detail? I&#39;m sorry I don&#39;t really understand what you&#39;re saying"},{"owner":{"account_id":4571603,"reputation":44060,"user_id":3711162,"display_name":"Dan Guzman"},"score":0,"creation_date":1680357274,"post_id":75904080,"comment_id":133886637,"body_markdown":"@infD, [these instructions](https://learn.microsoft.com/en-us/sql/relational-databases/extended-events/use-the-ssms-xe-profiler) describe how to run a TSQL xEvent Profiler session from SSMS.","body":"@infD, <a href=\"https://learn.microsoft.com/en-us/sql/relational-databases/extended-events/use-the-ssms-xe-profiler\" rel=\"nofollow noreferrer\">these instructions</a> describe how to run a TSQL xEvent Profiler session from SSMS."},{"owner":{"account_id":18612735,"reputation":53,"user_id":13564698,"display_name":"infD"},"score":0,"creation_date":1680357341,"post_id":75904080,"comment_id":133886648,"body_markdown":"Aw thank you, you were using another account I believe.","body":"Aw thank you, you were using another account I believe."},{"owner":{"account_id":18612735,"reputation":53,"user_id":13564698,"display_name":"infD"},"score":0,"creation_date":1680358486,"post_id":75904080,"comment_id":133886811,"body_markdown":"@DanGuzman nothing fishy about the ORM mapping as I observed, but thank you for your suggestion","body":"@DanGuzman nothing fishy about the ORM mapping as I observed, but thank you for your suggestion"}],"answers":[{"comments":[{"owner":{"account_id":18612735,"reputation":53,"user_id":13564698,"display_name":"infD"},"score":0,"creation_date":1697444048,"post_id":77289583,"comment_id":136275919,"body_markdown":"Thank you so much man! I&#39;ll give it a try but not sure when","body":"Thank you so much man! I&#39;ll give it a try but not sure when"}],"tags":[],"owner":{"account_id":24505385,"reputation":1,"user_id":18420492,"display_name":"fixitfeliks"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697217027,"creation_date":1697217027,"answer_id":77289583,"question_id":75904080,"body_markdown":"I just struggled with this problem for 2 days X_X\r\n\r\nOur old DB got moved to a larger instance that is managed by another team that has NOCOUNT set to ON and I have no sway to change that since I own 1 out of ~30 DBs on that server!\r\n\r\nI am using Hibernate 5.6 and running on SQL Server 2016.\r\n\r\nYou are on the right track by setting something up to prepend that statement to your queries.\r\n\r\nUse a StatementInspector instead\r\n\r\n    public class NoCountStatementInspector implements StatementInspector {\r\n    private static final Logger logger = MyLoggerFactory.getLogger(NoCountStatementInspector.class.getSimpleName());\r\n\r\n    @Override\r\n    public String inspect(String sql) {\r\n        if (sql.toLowerCase().indexOf(&quot;insert&quot;) == 0 || sql.toLowerCase().indexOf(&quot;update&quot;) == 0) {\r\n            logger.finer(&quot;Inspecting SQL Statement (add NOCOUNT OFF) - BEFORE: &quot; + sql);\r\n            String newSql = &quot;set nocount off; &quot; + sql;\r\n            logger.finer(&quot;Inspecting SQL Statement (add NOCOUNT OFF) - AFTER : &quot; + newSql);\r\n            return newSql;\r\n        }\r\n        return sql;\r\n    }\r\n}\r\n\r\nAnd then set your hibernate properties to use your inspector. I have my hibernate setup programatically, if you use a file add it to the file.\r\n\r\n    hibernateProperties.put(&quot;hibernate.session_factory.statement_inspector&quot;,\r\n                &quot;com.persistentsystems.data.NoCountStatementInspector&quot;);\r\n\r\nMake sure the class is supplied to hibernate managed classes in whichever way. I am not using spring so I set it up manually.\r\n\r\nHope this helps someone lol         \r\n","title":"Unexpected row count: -1; expected: 1 with Spring Data JPA SQL Server with NOCOUNT ON","body":"<p>I just struggled with this problem for 2 days X_X</p>\n<p>Our old DB got moved to a larger instance that is managed by another team that has NOCOUNT set to ON and I have no sway to change that since I own 1 out of ~30 DBs on that server!</p>\n<p>I am using Hibernate 5.6 and running on SQL Server 2016.</p>\n<p>You are on the right track by setting something up to prepend that statement to your queries.</p>\n<p>Use a StatementInspector instead</p>\n<pre><code>public class NoCountStatementInspector implements StatementInspector {\nprivate static final Logger logger = MyLoggerFactory.getLogger(NoCountStatementInspector.class.getSimpleName());\n\n@Override\npublic String inspect(String sql) {\n    if (sql.toLowerCase().indexOf(&quot;insert&quot;) == 0 || sql.toLowerCase().indexOf(&quot;update&quot;) == 0) {\n        logger.finer(&quot;Inspecting SQL Statement (add NOCOUNT OFF) - BEFORE: &quot; + sql);\n        String newSql = &quot;set nocount off; &quot; + sql;\n        logger.finer(&quot;Inspecting SQL Statement (add NOCOUNT OFF) - AFTER : &quot; + newSql);\n        return newSql;\n    }\n    return sql;\n}\n</code></pre>\n<p>}</p>\n<p>And then set your hibernate properties to use your inspector. I have my hibernate setup programatically, if you use a file add it to the file.</p>\n<pre><code>hibernateProperties.put(&quot;hibernate.session_factory.statement_inspector&quot;,\n            &quot;com.persistentsystems.data.NoCountStatementInspector&quot;);\n</code></pre>\n<p>Make sure the class is supplied to hibernate managed classes in whichever way. I am not using spring so I set it up manually.</p>\n<p>Hope this helps someone lol</p>\n"}],"owner":{"account_id":18612735,"reputation":53,"user_id":13564698,"display_name":"infD"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697217027,"creation_date":1680318522,"question_id":75904080,"body_markdown":"**PROBLEM**: I am having a problem regarding the database under the server in SQL Server which has Server Property &gt; Connection &gt; NOCOUNT ON (is ticked). The table has no trigger, absolutely nothing FYI.\r\n\r\nWhat I am trying to do it just to do a simple insert using\r\n```repository.save(entity)``` or ```entityManager.persist(entity)``` but I got an error:\r\n\r\n&gt; Unexpected row count: -1; expected: 1.\r\n\r\nI cannot get an entity out and edit it also =&gt; there will be an error &lt;br&gt;\r\n\r\n&gt; org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)\r\n\r\nI have tried to make a custom Dialect to insert a ```SET NOCOUNT OFF``` before every query but it didn&#39;t work.\r\n\r\nThe custom dialect:\r\n```\r\npackage com.ata2.art22;\r\n\r\nimport org.hibernate.dialect.SQLServer2012Dialect;\r\nimport org.hibernate.dialect.function.StandardSQLFunction;\r\nimport org.hibernate.type.StandardBasicTypes;\r\n\r\npublic class CustomSQLServerDialect extends SQLServer2012Dialect {\r\n    \r\n    public CustomSQLServerDialect() {\r\n        super();\r\n        registerFunction(&quot;concat&quot;, new StandardSQLFunction(&quot;concat&quot;, StandardBasicTypes.STRING));\r\n    }\r\n\r\n    @Override\r\n    public String getSequenceNextValString(String sequenceName) {\r\n        return &quot;SET NOCOUNT OFF;\\n&quot; + super.getSequenceNextValString(sequenceName);\r\n    }\r\n}\r\n```\r\n\r\nThe property file setting:\r\n\r\n```spring.jpa.properties.hibernate.dialect=com.ata2.art22.CustomSQLServerDialect```\r\n\r\n\r\n**QUESTION**:\r\nIs there any other ways or changes I need to do to be able to use methods from repository or entityManager WITHOUT turning off the NOCOUNT ON at the Database Server configuration or using native query?","title":"Unexpected row count: -1; expected: 1 with Spring Data JPA SQL Server with NOCOUNT ON","body":"<p><strong>PROBLEM</strong>: I am having a problem regarding the database under the server in SQL Server which has Server Property &gt; Connection &gt; NOCOUNT ON (is ticked). The table has no trigger, absolutely nothing FYI.</p>\n<p>What I am trying to do it just to do a simple insert using\n<code>repository.save(entity)</code> or <code>entityManager.persist(entity)</code> but I got an error:</p>\n<blockquote>\n<p>Unexpected row count: -1; expected: 1.</p>\n</blockquote>\n<p>I cannot get an entity out and edit it also =&gt; there will be an error <br></p>\n<blockquote>\n<p>org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)</p>\n</blockquote>\n<p>I have tried to make a custom Dialect to insert a <code>SET NOCOUNT OFF</code> before every query but it didn't work.</p>\n<p>The custom dialect:</p>\n<pre><code>package com.ata2.art22;\n\nimport org.hibernate.dialect.SQLServer2012Dialect;\nimport org.hibernate.dialect.function.StandardSQLFunction;\nimport org.hibernate.type.StandardBasicTypes;\n\npublic class CustomSQLServerDialect extends SQLServer2012Dialect {\n    \n    public CustomSQLServerDialect() {\n        super();\n        registerFunction(&quot;concat&quot;, new StandardSQLFunction(&quot;concat&quot;, StandardBasicTypes.STRING));\n    }\n\n    @Override\n    public String getSequenceNextValString(String sequenceName) {\n        return &quot;SET NOCOUNT OFF;\\n&quot; + super.getSequenceNextValString(sequenceName);\n    }\n}\n</code></pre>\n<p>The property file setting:</p>\n<p><code>spring.jpa.properties.hibernate.dialect=com.ata2.art22.CustomSQLServerDialect</code></p>\n<p><strong>QUESTION</strong>:\nIs there any other ways or changes I need to do to be able to use methods from repository or entityManager WITHOUT turning off the NOCOUNT ON at the Database Server configuration or using native query?</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697180337,"post_id":77277072,"comment_id":136249887,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":11571418,"reputation":1,"user_id":8478081,"display_name":"Frederic Peugny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697216572,"creation_date":1697071141,"question_id":77277072,"body_markdown":"I was forced to go with an old version of configuration code since the newest had a problem with classpath (I suppose) to detect hibernate.cfg.xml\r\n\r\nI developed a tutorial of Hibernate with two entities (Person and Phone, with a join table tblperson_phones). What I have tried is to &quot;actualize&quot; the boot method but at the execution it complains with indicating that the hibernate.cfg.xml file was not found. (I tried also with persistence.xml but no success)\r\nThus I went to the classic version of buildSessionFactory with Configuration an. This time the hibernate cfg xml file was found but it went into an error at buildSessionFactory.\r\n\r\n    public class PersonManagerBasic {\r\n\r\n\tpublic org.apache.logging.log4j.Logger logger;\r\n\r\n\tpublic List&lt;Person&gt; list_persons;\r\n\r\n\tpublic PersonManagerBasic() {\r\n\t\tlogger = LogManager.getLogger(PersonManagerBasic.class);\r\n\t}\r\n\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tPersonManagerBasic mgr = new PersonManagerBasic();\r\n\r\n\t\t//if (args[0].equals(&quot;list&quot;)) {\r\n\t    \r\n\t\t\tmgr.list_persons=mgr.listAllPersons();\r\n\r\n\t\t\tIterator&lt;Person&gt; it=mgr.list_persons.iterator();\r\n\r\n\t\t\twhile (it.hasNext()) {\r\n\t\t\t\tPerson personex = it.next();\r\n\t\t\t\tSystem.out.println(personex.getName());\r\n\t\t\t}\r\n\t\t//}\r\n\t\t// get the singleton of sessionFactory to close it\r\n\t\tHibernateUtil.getSessionFactory().close();\r\n\t\tmgr.logger.log(Level.ERROR, &quot;LoggerName :: &quot;+mgr.logger.getName()+&quot;:: program successfully executed&quot;);\r\n\r\n\t}\r\n\r\n\t// returns all entities from table &quot;tblpersons&quot;\r\n\tpublic List&lt;Person&gt; listAllPersons() {\r\n\t\tSession session = HibernateUtil.getSessionFactory().openSession();\r\n\t\tsession.beginTransaction();\r\n\r\n\t\tList&lt;Person&gt; listresult = session.createQuery(&quot;from Person p&quot;).list();\r\n\r\n\t\tsession.getTransaction().commit();\r\n\r\n\t\treturn listresult;\r\n\t}\r\n}\r\n","title":"Hibernate SessionFactory not constructed (-- forced to go with configuration)","body":"<p>I was forced to go with an old version of configuration code since the newest had a problem with classpath (I suppose) to detect hibernate.cfg.xml</p>\n<p>I developed a tutorial of Hibernate with two entities (Person and Phone, with a join table tblperson_phones). What I have tried is to &quot;actualize&quot; the boot method but at the execution it complains with indicating that the hibernate.cfg.xml file was not found. (I tried also with persistence.xml but no success)\nThus I went to the classic version of buildSessionFactory with Configuration an. This time the hibernate cfg xml file was found but it went into an error at buildSessionFactory.</p>\n<pre><code>public class PersonManagerBasic {\n\npublic org.apache.logging.log4j.Logger logger;\n\npublic List&lt;Person&gt; list_persons;\n\npublic PersonManagerBasic() {\n    logger = LogManager.getLogger(PersonManagerBasic.class);\n}\n\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    PersonManagerBasic mgr = new PersonManagerBasic();\n\n    //if (args[0].equals(&quot;list&quot;)) {\n    \n        mgr.list_persons=mgr.listAllPersons();\n\n        Iterator&lt;Person&gt; it=mgr.list_persons.iterator();\n\n        while (it.hasNext()) {\n            Person personex = it.next();\n            System.out.println(personex.getName());\n        }\n    //}\n    // get the singleton of sessionFactory to close it\n    HibernateUtil.getSessionFactory().close();\n    mgr.logger.log(Level.ERROR, &quot;LoggerName :: &quot;+mgr.logger.getName()+&quot;:: program successfully executed&quot;);\n\n}\n\n// returns all entities from table &quot;tblpersons&quot;\npublic List&lt;Person&gt; listAllPersons() {\n    Session session = HibernateUtil.getSessionFactory().openSession();\n    session.beginTransaction();\n\n    List&lt;Person&gt; listresult = session.createQuery(&quot;from Person p&quot;).list();\n\n    session.getTransaction().commit();\n\n    return listresult;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","json","json-simple"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1692198801,"post_id":76914896,"comment_id":135591851,"body_markdown":"Where do you see `title_blocks` in the JSON itself?","body":"Where do you see <code>title_blocks</code> in the JSON itself?"},{"owner":{"account_id":9519666,"reputation":77,"user_id":7074950,"display_name":"spoons"},"score":0,"creation_date":1692207741,"post_id":76914896,"comment_id":135593553,"body_markdown":"Hi @HovercraftFullOfEels, sorry I must have missed this. I changed the key lookup to match the json structure.","body":"Hi @HovercraftFullOfEels, sorry I must have missed this. I changed the key lookup to match the json structure."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1692208027,"post_id":76914896,"comment_id":135593596,"body_markdown":"Thank you for the edit. Note that a decent [mre] could help you get better answers quicker.","body":"Thank you for the edit. Note that a decent <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> could help you get better answers quicker."}],"answers":[{"comments":[{"owner":{"account_id":9519666,"reputation":77,"user_id":7074950,"display_name":"spoons"},"score":0,"creation_date":1693818557,"post_id":76916127,"comment_id":135805709,"body_markdown":"Hi @v-g, thanks for your response. I managed to get this code working. I found out that the backend service wasn&#39;t actually returning a JSON format, rather some proprietary structure. I parsed using their json parser and got everything going again. Thanks though for your answer!","body":"Hi @v-g, thanks for your response. I managed to get this code working. I found out that the backend service wasn&#39;t actually returning a JSON format, rather some proprietary structure. I parsed using their json parser and got everything going again. Thanks though for your answer!"}],"tags":[],"owner":{"account_id":26528740,"reputation":367,"user_id":20161294,"display_name":"v-g"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697215777,"creation_date":1692209991,"answer_id":76916127,"question_id":76914896,"body_markdown":"If you use an online parser, like for example, [jsonViewer][1] you could see that your JSON is valid.\r\n\r\nThe library seems a false problem: while there are many better libraries that exists to parse JSON, json-simple while old could be a candidate at least to execute the task. \r\n\r\nJSON file data is in composed of name/value pairs.\r\n\r\nData is separated by commas, curly braces hold objects, square brackets hold arrays and values could be of primitive type.\r\n \r\nHere we have a single JSON Object named &quot;characterizations_values&quot; which holds an Array with one element.\r\n\r\nA better solution would be to get the root element first while accessing the leafs from there. \r\n \r\n        JSONParser jsonParser = new JSONParser();\r\n        try (FileReader reader = new FileReader(&quot;yourfile.json&quot;))\r\n        {\r\n            Object obj = jsonParser.parse(reader);\r\n            JSONObject documentList = (JSONObject) obj;\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n        \r\n  [1]: https://codebeautify.org/jsonviewer","title":"JSON structure not being recognised as JSONObject or JSONArray","body":"<p>If you use an online parser, like for example, <a href=\"https://codebeautify.org/jsonviewer\" rel=\"nofollow noreferrer\">jsonViewer</a> you could see that your JSON is valid.</p>\n<p>The library seems a false problem: while there are many better libraries that exists to parse JSON, json-simple while old could be a candidate at least to execute the task.</p>\n<p>JSON file data is in composed of name/value pairs.</p>\n<p>Data is separated by commas, curly braces hold objects, square brackets hold arrays and values could be of primitive type.</p>\n<p>Here we have a single JSON Object named &quot;characterizations_values&quot; which holds an Array with one element.</p>\n<p>A better solution would be to get the root element first while accessing the leafs from there.</p>\n<pre><code>    JSONParser jsonParser = new JSONParser();\n    try (FileReader reader = new FileReader(&quot;yourfile.json&quot;))\n    {\n        Object obj = jsonParser.parse(reader);\n        JSONObject documentList = (JSONObject) obj;\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n    \n</code></pre>\n"}],"owner":{"account_id":9519666,"reputation":77,"user_id":7074950,"display_name":"spoons"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76916127,"answer_count":1,"score":0,"last_activity_date":1697215777,"creation_date":1692198589,"question_id":76914896,"body_markdown":"I&#39;m having difficulty in parsing my json file into something that I can work with. The json file looks like this: \r\n\r\n```\r\n{\r\n    &quot;characterizations_values&quot;: [\r\n        {\r\n            &quot;filename&quot;: &quot;TestDoc&quot;,\r\n            &quot;sheet&quot;: {\r\n                &quot;my-title&quot;: [\r\n                    {\r\n                        &quot;number&quot;: &quot;ddddko9&quot;,\r\n                        &quot;numbered-part&quot;: &quot;test number&quot;,\r\n                        &quot;documents&quot;: [\r\n                            [\r\n                                {\r\n                                    &quot;document_name&quot;: &quot;20 Minutes&quot;,\r\n                                    &quot;document-category&quot;: [\r\n                                        &quot;Accounting&quot;,\r\n                                        &quot;Cost-Management&quot;\r\n                                    ]\r\n                                }\r\n                            ]\r\n                        ] \r\n                    }\r\n                ],\r\n                &quot;my-notes&quot;: [\r\n                    {\r\n                        &quot;dimensions&quot;: {\r\n                            &quot;enclosing&quot;: {\r\n                                &quot;test-one&quot;: 34.33,\r\n                                &quot;test-two&quot;: 34\r\n                            },\r\n                            &quot;enclosing-extra&quot;: {\r\n                                &quot;test-one&quot;: 27.33,\r\n                                &quot;test-two&quot;: 88\r\n                            }\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nWhat I&#39;ve attempted with the library json-simple is the following:\r\n```\r\nimport org.json.simple.JSONObject;\r\nimport org.json.simple.JSONArray;\r\n\r\n\t\t\t\tMap&lt;String, String&gt; curValues = (Map&lt;String,String&gt;) curBlock.get(&quot;characterizations_values&quot;);\r\n\t\t\t\t\r\n\t\t\t\t// break down sheet\r\n\t\t\t\tJSONObject sheet = new JSONObject();\r\n\t\t\t\tsheet.put(&quot;sheet&quot;, curValues.get(&quot;sheet&quot;));\r\n\t\t\t\tLOG.info(String.format(&quot;sheet: %s&quot;, sheet.toString()));\r\n\r\n\t\t\t\t// Get my title\t\t\r\n\t\t\t\tJSONObject myTitle = new JSONObject();\r\n\t\t\t\tmyTitle.put(&quot;title_blocks&quot;, sheet.get(&quot;my-title&quot;));\r\n\t\t\t\t\r\n\t\t\t\t// Get my notes\r\n\t\t\t\tJSONObject myNotes = new JSONObject();\r\n\t\t\t\tmyNotes.put(&quot;my-notes&quot;, sheet.get(&quot;my-notes&quot;));\r\n```\r\n\r\nThis doesn&#39;t however work and while I get a json object with a key I get a null value for the value. I&#39;ve also attempted to cast this into a JSONArray but then I get an error message saying that &quot;java.util.LinkedHashMap cannot be cast to..&quot;. After reading a few [posts][1] I understand that the library doesn&#39;t have enough information to deserialise the object. But given the structure, I think that I would first need to get a JSON object and then single out the JSONArray. So the order would be:\r\n\r\n 1. get my-title JSONObject\r\n 2. get value of mytitle which is a JSONArray\r\n 3. Keep working down the document path\r\n\r\nIf there is a better way to do this I&#39;m very much open to suggestions.\r\n\r\nThanks in advance! \r\n\r\n  [1]: https://stackoverflow.com/questions/28821715/java-lang-classcastexception-java-util-linkedhashmap-cannot-be-cast-to-com-test","title":"JSON structure not being recognised as JSONObject or JSONArray","body":"<p>I'm having difficulty in parsing my json file into something that I can work with. The json file looks like this:</p>\n<pre><code>{\n    &quot;characterizations_values&quot;: [\n        {\n            &quot;filename&quot;: &quot;TestDoc&quot;,\n            &quot;sheet&quot;: {\n                &quot;my-title&quot;: [\n                    {\n                        &quot;number&quot;: &quot;ddddko9&quot;,\n                        &quot;numbered-part&quot;: &quot;test number&quot;,\n                        &quot;documents&quot;: [\n                            [\n                                {\n                                    &quot;document_name&quot;: &quot;20 Minutes&quot;,\n                                    &quot;document-category&quot;: [\n                                        &quot;Accounting&quot;,\n                                        &quot;Cost-Management&quot;\n                                    ]\n                                }\n                            ]\n                        ] \n                    }\n                ],\n                &quot;my-notes&quot;: [\n                    {\n                        &quot;dimensions&quot;: {\n                            &quot;enclosing&quot;: {\n                                &quot;test-one&quot;: 34.33,\n                                &quot;test-two&quot;: 34\n                            },\n                            &quot;enclosing-extra&quot;: {\n                                &quot;test-one&quot;: 27.33,\n                                &quot;test-two&quot;: 88\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}\n</code></pre>\n<p>What I've attempted with the library json-simple is the following:</p>\n<pre><code>import org.json.simple.JSONObject;\nimport org.json.simple.JSONArray;\n\n                Map&lt;String, String&gt; curValues = (Map&lt;String,String&gt;) curBlock.get(&quot;characterizations_values&quot;);\n                \n                // break down sheet\n                JSONObject sheet = new JSONObject();\n                sheet.put(&quot;sheet&quot;, curValues.get(&quot;sheet&quot;));\n                LOG.info(String.format(&quot;sheet: %s&quot;, sheet.toString()));\n\n                // Get my title     \n                JSONObject myTitle = new JSONObject();\n                myTitle.put(&quot;title_blocks&quot;, sheet.get(&quot;my-title&quot;));\n                \n                // Get my notes\n                JSONObject myNotes = new JSONObject();\n                myNotes.put(&quot;my-notes&quot;, sheet.get(&quot;my-notes&quot;));\n</code></pre>\n<p>This doesn't however work and while I get a json object with a key I get a null value for the value. I've also attempted to cast this into a JSONArray but then I get an error message saying that &quot;java.util.LinkedHashMap cannot be cast to..&quot;. After reading a few <a href=\"https://stackoverflow.com/questions/28821715/java-lang-classcastexception-java-util-linkedhashmap-cannot-be-cast-to-com-test\">posts</a> I understand that the library doesn't have enough information to deserialise the object. But given the structure, I think that I would first need to get a JSON object and then single out the JSONArray. So the order would be:</p>\n<ol>\n<li>get my-title JSONObject</li>\n<li>get value of mytitle which is a JSONArray</li>\n<li>Keep working down the document path</li>\n</ol>\n<p>If there is a better way to do this I'm very much open to suggestions.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring-boot","spring-data-redis","redis-streams"],"owner":{"account_id":3403986,"reputation":1485,"user_id":2855535,"accept_rate":79,"display_name":"PeonProgrammer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697215495,"creation_date":1697215495,"question_id":77289436,"body_markdown":"I have an application that I built using spring boot and it reads from a redis-stream.\r\nI am calling the xpending operation via spring boot&#39;s helper &quot;opsForStream()&quot; api - it looks like this:\r\n\r\n    private PendingMessages getPending() {\r\n        return this.redisTransactionTemplate.opsForStream().pending(streamKey, groupName, Range.unbounded(), 1000);\r\n    }\r\n\r\nI then want to take these 1000 (or less) pending messages and then call xrange. However, I&#39;m not sure if these pending messages are in order from earliest to latest. I want to ideally use the pending messages in order but I don&#39;t want to assume that these are in order.\r\n\r\nDoes anyone know if I can assume that the first item in the pending messages is the earliest message in the PEL and the last message is the latest?","title":"What order are the messages returned with the xpending command?","body":"<p>I have an application that I built using spring boot and it reads from a redis-stream.\nI am calling the xpending operation via spring boot's helper &quot;opsForStream()&quot; api - it looks like this:</p>\n<pre><code>private PendingMessages getPending() {\n    return this.redisTransactionTemplate.opsForStream().pending(streamKey, groupName, Range.unbounded(), 1000);\n}\n</code></pre>\n<p>I then want to take these 1000 (or less) pending messages and then call xrange. However, I'm not sure if these pending messages are in order from earliest to latest. I want to ideally use the pending messages in order but I don't want to assume that these are in order.</p>\n<p>Does anyone know if I can assume that the first item in the pending messages is the earliest message in the PEL and the last message is the latest?</p>\n"},{"tags":["java","oauth-2.0","auth0","okta","pkce"],"answers":[{"comments":[{"owner":{"account_id":1912441,"reputation":2961,"user_id":1725871,"accept_rate":88,"display_name":"JoSSte"},"score":0,"creation_date":1696970670,"post_id":77268833,"comment_id":136220051,"body_markdown":"maybe clean up your answer to make it more clear? It reads like an AI answer or a badly formatted copy-paste job as it stands...","body":"maybe clean up your answer to make it more clear? It reads like an AI answer or a badly formatted copy-paste job as it stands..."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697214150,"post_id":77268833,"comment_id":136256320,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77268833/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":92537,"reputation":6275,"user_id":253575,"accept_rate":83,"display_name":"IcedDante"},"score":0,"creation_date":1697214599,"post_id":77268833,"comment_id":136256409,"body_markdown":"Yes, this does read like an AI generated answer. I should know- I asked there as well as here :-)","body":"Yes, this does read like an AI generated answer. I should know- I asked there as well as here :-)"}],"tags":[],"owner":{"account_id":11375641,"reputation":1,"user_id":8340037,"display_name":"Shubham Pathak"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696970343,"creation_date":1696970343,"answer_id":77268833,"question_id":77268611,"body_markdown":"To verify an Okta Access Token using the auth0 Java JWT library without using starter libraries, you can manually fetch Okta&#39;s public key and then create a custom JWTVerifier instance. Here&#39;s a general outline of the steps:\r\n\r\nRetrieve Okta&#39;s public keys:\r\nYou can retrieve Okta&#39;s public keys using the JWKS (JSON Web Key Set) URL provided by Okta. This URL typically looks like: https://your-okta-issuer/.well-known/jwks.json.\r\nParse the JWKS and extract the public key(s):\r\nUse a JSON parser to parse the JWKS response and extract the public key(s) associated with Okta. Each key in the JWKS represents a different public key that might have been used to sign Okta&#39;s JWTs.\r\nCreate a custom JWTVerifier:\r\nUse the extracted public key(s) to create a custom JWTVerifier instance from the auth0 library.","title":"Can I use auth0 java sdk to verify an Okta token?","body":"<p>To verify an Okta Access Token using the auth0 Java JWT library without using starter libraries, you can manually fetch Okta's public key and then create a custom JWTVerifier instance. Here's a general outline of the steps:</p>\n<p>Retrieve Okta's public keys:\nYou can retrieve Okta's public keys using the JWKS (JSON Web Key Set) URL provided by Okta. This URL typically looks like: https://your-okta-issuer/.well-known/jwks.json.\nParse the JWKS and extract the public key(s):\nUse a JSON parser to parse the JWKS response and extract the public key(s) associated with Okta. Each key in the JWKS represents a different public key that might have been used to sign Okta's JWTs.\nCreate a custom JWTVerifier:\nUse the extracted public key(s) to create a custom JWTVerifier instance from the auth0 library.</p>\n"},{"comments":[{"owner":{"account_id":92537,"reputation":6275,"user_id":253575,"accept_rate":83,"display_name":"IcedDante"},"score":0,"creation_date":1697214655,"post_id":77273218,"comment_id":136256419,"body_markdown":"I think there is a bug with your code where you specify the audience.","body":"I think there is a bug with your code where you specify the audience."},{"owner":{"account_id":12368896,"reputation":24924,"user_id":9019885,"display_name":"Gary Archer"},"score":0,"creation_date":1697215502,"post_id":77273218,"comment_id":136256581,"body_markdown":"Ha - you are right - I fixed it up :)","body":"Ha - you are right - I fixed it up :)"}],"tags":[],"owner":{"account_id":12368896,"reputation":24924,"user_id":9019885,"display_name":"Gary Archer"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697215468,"creation_date":1697028554,"answer_id":77273218,"question_id":77268611,"body_markdown":"It can help to first understand the process with a non-vendor library, such as [jose4j](https://bitbucket.org/b_c/jose4j/src/master/), which will work for any standards-based provider:\r\n\r\nThe best practice is for your resource server to specify the expected algorithm, issuer and audience like this, while also providing a URL to a JWKS or issuer endpoint.\r\n\r\n```java\r\nvar httpsJkws = new HttpsJwks(jwksEndpoint);\r\nvar jwksKeyResolver = new HttpsJwksVerificationKeyResolver(httpsJkws);\r\n\r\nvar claims = new JwtConsumerBuilder()\r\n.setVerificationKeyResolver(jwksKeyResolver)\r\n.setJwsAlgorithmConstraints(AlgorithmConstraints.ConstraintType.PERMIT, AlgorithmIdentifiers.RSA_USING_SHA256) \r\n.setExpectedIssuer(&quot;myissuer&quot;);\r\n.setExpectedAudience(&quot;myaudience&quot;)\r\n.processToClaims(accessToken);\r\n```\r\n\r\nI suspect that both Okta and Auth0 libraries are compatible with each other&#39;s authorization server, since normal JWT validation is only usually done as above. Just look for the above inputs and use them. You should then quickly get a working solution.","title":"Can I use auth0 java sdk to verify an Okta token?","body":"<p>It can help to first understand the process with a non-vendor library, such as <a href=\"https://bitbucket.org/b_c/jose4j/src/master/\" rel=\"nofollow noreferrer\">jose4j</a>, which will work for any standards-based provider:</p>\n<p>The best practice is for your resource server to specify the expected algorithm, issuer and audience like this, while also providing a URL to a JWKS or issuer endpoint.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var httpsJkws = new HttpsJwks(jwksEndpoint);\nvar jwksKeyResolver = new HttpsJwksVerificationKeyResolver(httpsJkws);\n\nvar claims = new JwtConsumerBuilder()\n.setVerificationKeyResolver(jwksKeyResolver)\n.setJwsAlgorithmConstraints(AlgorithmConstraints.ConstraintType.PERMIT, AlgorithmIdentifiers.RSA_USING_SHA256) \n.setExpectedIssuer(&quot;myissuer&quot;);\n.setExpectedAudience(&quot;myaudience&quot;)\n.processToClaims(accessToken);\n</code></pre>\n<p>I suspect that both Okta and Auth0 libraries are compatible with each other's authorization server, since normal JWT validation is only usually done as above. Just look for the above inputs and use them. You should then quickly get a working solution.</p>\n"}],"owner":{"account_id":92537,"reputation":6275,"user_id":253575,"accept_rate":83,"display_name":"IcedDante"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697215468,"creation_date":1696967397,"question_id":77268611,"body_markdown":"I have a grant/PKCE workflow for our SPA app to request an Access Token in Okta and have it sent to a resource server.\r\n\r\nThe SPA -&gt; Okta part is settled, and sending the token to my Java resource server is simple. However, verifying the token is a little tricky for me.\r\n\r\nIf I simply use the great sdk provided by okta, `okta-jwt-verifier`, the process is fairly simple:\r\n\r\n```\r\nAccessTokenVerifier jwtVerifier = JwtVerifiers.accessTokenVerifierBuilder()\r\n                .setIssuer(&quot;https://&quot; + issuer + &quot;/oauth2/default&quot;)\r\n                .build();\r\n```\r\nThe AccessTokenVerifier uses the issuer to gather the public keys transparently and validate a token.\r\n\r\nHowever, our system has to support JWT from multiple sources and, as such we already have a dependency on the auth0 `java-jwt` v3.18 library. I was investigating ways to have auth0 get the public key and verify an access token but can&#39;t find a process for that. \r\n\r\nWhat is the best way to create an instance of `com.auth0.jwt.JWTVerifier` to verify an Okta token?\r\n\r\nBecause of the logistics of what we are trying to support I need to avoid any starter libraries. ","title":"Can I use auth0 java sdk to verify an Okta token?","body":"<p>I have a grant/PKCE workflow for our SPA app to request an Access Token in Okta and have it sent to a resource server.</p>\n<p>The SPA -&gt; Okta part is settled, and sending the token to my Java resource server is simple. However, verifying the token is a little tricky for me.</p>\n<p>If I simply use the great sdk provided by okta, <code>okta-jwt-verifier</code>, the process is fairly simple:</p>\n<pre><code>AccessTokenVerifier jwtVerifier = JwtVerifiers.accessTokenVerifierBuilder()\n                .setIssuer(&quot;https://&quot; + issuer + &quot;/oauth2/default&quot;)\n                .build();\n</code></pre>\n<p>The AccessTokenVerifier uses the issuer to gather the public keys transparently and validate a token.</p>\n<p>However, our system has to support JWT from multiple sources and, as such we already have a dependency on the auth0 <code>java-jwt</code> v3.18 library. I was investigating ways to have auth0 get the public key and verify an access token but can't find a process for that.</p>\n<p>What is the best way to create an instance of <code>com.auth0.jwt.JWTVerifier</code> to verify an Okta token?</p>\n<p>Because of the logistics of what we are trying to support I need to avoid any starter libraries.</p>\n"},{"tags":["java","datetime","timestamp","utc","datetimeoffset"],"comments":[{"owner":{"account_id":36607,"reputation":101051,"user_id":104458,"accept_rate":91,"display_name":"selbie"},"score":2,"creation_date":1503613209,"post_id":45871744,"comment_id":78702377,"body_markdown":"don&#39;t forget about India - where the time zone is a half hour off from everywhere else.  (e.g. it&#39;s 3:19pm in Seattle right now, but 3:49am in India).","body":"don&#39;t forget about India - where the time zone is a half hour off from everywhere else.  (e.g. it&#39;s 3:19pm in Seattle right now, but 3:49am in India)."},{"owner":{"display_name":"user7605325"},"score":3,"creation_date":1503613698,"post_id":45871744,"comment_id":78702522,"body_markdown":"There are also timezones with [45 minutes of difference](https://www.timeanddate.com/time/time-zones-interesting.html). Anyway, you can&#39;t determine the timezone from the offset because usually more than one timezone can have the same offset: https://en.m.wikipedia.org/wiki/List_of_UTC_time_offsets","body":"There are also timezones with <a href=\"https://www.timeanddate.com/time/time-zones-interesting.html\" rel=\"nofollow noreferrer\">45 minutes of difference</a>. Anyway, you can&#39;t determine the timezone from the offset because usually more than one timezone can have the same offset: <a href=\"https://en.m.wikipedia.org/wiki/List_of_UTC_time_offsets\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/List_of_UTC_time_offsets</a>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":4,"creation_date":1503614017,"post_id":45871744,"comment_id":78702622,"body_markdown":"You can determine the *offset*, but not the time zone. A time zone is not just the offset, but also the transitions to/from daylight savings, *and* the historical changes of the offset and transitions (time zones haven&#39;t always had the same rules).","body":"You can determine the <i>offset</i>, but not the time zone. A time zone is not just the offset, but also the transitions to/from daylight savings, <i>and</i> the historical changes of the offset and transitions (time zones haven&#39;t always had the same rules)."},{"owner":{"account_id":31740,"reputation":17092,"user_id":87408,"accept_rate":78,"display_name":"Edward Q. Bridges"},"score":1,"creation_date":1503614026,"post_id":45871744,"comment_id":78702626,"body_markdown":"Sorry for the ambiguity in my question.  I&#39;m looking for the UTC offset.  I guess to get the Timezone as well, I&#39;d need lon/lat (which I have available).","body":"Sorry for the ambiguity in my question.  I&#39;m looking for the UTC offset.  I guess to get the Timezone as well, I&#39;d need lon/lat (which I have available)."},{"owner":{"display_name":"user7605325"},"score":0,"creation_date":1503614183,"post_id":45871744,"comment_id":78702682,"body_markdown":"@EdwardQ.Bridges could you please [edit] the question then?","body":"@EdwardQ.Bridges could you please <a href=\"https://stackoverflow.com/posts/45871744/edit\">edit</a> the question then?"},{"owner":{"account_id":31740,"reputation":17092,"user_id":87408,"accept_rate":78,"display_name":"Edward Q. Bridges"},"score":0,"creation_date":1503615139,"post_id":45871744,"comment_id":78702936,"body_markdown":"question updated!","body":"question updated!"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":2,"creation_date":1503616463,"post_id":45871744,"comment_id":78703271,"body_markdown":"A `java.sql.Timestamp` doesn&#39;t have a time zone, and value is always in UTC. Time zone is applied when *displaying* the value. Please edit question and clarify what you mean by &quot;timestamp&quot;, e.g. by showing example values.","body":"A <code>java.sql.Timestamp</code> doesn&#39;t have a time zone, and value is always in UTC. Time zone is applied when <i>displaying</i> the value. Please edit question and clarify what you mean by &quot;timestamp&quot;, e.g. by showing example values."},{"owner":{"display_name":"user7605325"},"score":1,"creation_date":1503617366,"post_id":45871744,"comment_id":78703503,"body_markdown":"Indeed, the inputs and expected outputs would help, because it&#39;s still unclear to me. e.g., if you have 2017-08-24 at 10 AM UTC and a local time (at the same date) 11:35 AM, would you round the offset to 1 or 2 hours? (Not considering 30/45 minutes offsets) Where do those dates come from? Are you going to compare with the current date/time in UTC or a predefined value? And so on...","body":"Indeed, the inputs and expected outputs would help, because it&#39;s still unclear to me. e.g., if you have 2017-08-24 at 10 AM UTC and a local time (at the same date) 11:35 AM, would you round the offset to 1 or 2 hours? (Not considering 30/45 minutes offsets) Where do those dates come from? Are you going to compare with the current date/time in UTC or a predefined value? And so on..."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1503661092,"post_id":45871744,"comment_id":78719333,"body_markdown":"For the calculation I clearly recommend `java.time`, the modern Java date &amp; time API. It has supplanted both the old classes (like `Timestamp`)  and Joda-Time. And yes, it sounds pretty straightforward if you could explain what input you are having more clearly.","body":"For the calculation I clearly recommend <code>java.time</code>, the modern Java date &amp; time API. It has supplanted both the old classes (like <code>Timestamp</code>)  and Joda-Time. And yes, it sounds pretty straightforward if you could explain what input you are having more clearly."},{"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"score":2,"creation_date":1503662784,"post_id":45871744,"comment_id":78720309,"body_markdown":"Timestamps, by definition, don&#39;t have UTC offset: they&#39;re in UTC! If you said &quot;two string representations&quot;, that would have more sense.","body":"Timestamps, by definition, don&#39;t have UTC offset: they&#39;re in UTC! If you said &quot;two string representations&quot;, that would have more sense."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1503669006,"post_id":45871744,"comment_id":78724336,"body_markdown":"For the sake of completeness [Wikipedia](https://en.wikipedia.org/wiki/Timestamp) does not define a timestamp as necessarily in UTC (though most of the examples are). I agree that the question is utterly unclear about what is meant by “timestamp”. And if two timestamps denote the same point in time, subtracting them ought to yield 0, no matter any time zone offsets. @OlivierGr&#233;goire","body":"For the sake of completeness <a href=\"https://en.wikipedia.org/wiki/Timestamp\" rel=\"nofollow noreferrer\">Wikipedia</a> does not define a timestamp as necessarily in UTC (though most of the examples are). I agree that the question is utterly unclear about what is meant by “timestamp”. And if two timestamps denote the same point in time, subtracting them ought to yield 0, no matter any time zone offsets. @OlivierGr&#233;goire"},{"owner":{"account_id":31740,"reputation":17092,"user_id":87408,"accept_rate":78,"display_name":"Edward Q. Bridges"},"score":0,"creation_date":1503757155,"post_id":45871744,"comment_id":78751568,"body_markdown":"Indeed a Unix Timestamp is in UTC.  However an ordinary timestamp (as @OleVV points out) is just a record of an instant of time -- given that I point out in my question the presence/absence of timezone offset, I&#39;m not sure where your confusion is @OlivierGr&#233;goire?","body":"Indeed a Unix Timestamp is in UTC.  However an ordinary timestamp (as @OleVV points out) is just a record of an instant of time -- given that I point out in my question the presence/absence of timezone offset, I&#39;m not sure where your confusion is @OlivierGr&#233;goire?"},{"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"score":0,"creation_date":1503758816,"post_id":45871744,"comment_id":78752042,"body_markdown":"@EdwardQ.Bridges If it&#39;s an instant in time (and it is), it&#39;s not &quot;an instant in time *at a specific location*&quot;. Meaning that it is not dependant on the timezone. So by usual computer definition (since you use it in computers, since you post it on SE), it&#39;s in UTC. That&#39;s about the timestamp. Now you&#39;re actually working with string representations which, you imply, are incomplete because they don&#39;t define the timezone, which is... allowed for a local string representation. So you should not use the word &quot;timestamp&quot;. That&#39;s all I&#39;m saying. I&#39;m not confused: I&#39;m pointing out inaccuracies.","body":"@EdwardQ.Bridges If it&#39;s an instant in time (and it is), it&#39;s not &quot;an instant in time <i>at a specific location</i>&quot;. Meaning that it is not dependant on the timezone. So by usual computer definition (since you use it in computers, since you post it on SE), it&#39;s in UTC. That&#39;s about the timestamp. Now you&#39;re actually working with string representations which, you imply, are incomplete because they don&#39;t define the timezone, which is... allowed for a local string representation. So you should not use the word &quot;timestamp&quot;. That&#39;s all I&#39;m saying. I&#39;m not confused: I&#39;m pointing out inaccuracies."},{"owner":{"account_id":31740,"reputation":17092,"user_id":87408,"accept_rate":78,"display_name":"Edward Q. Bridges"},"score":0,"creation_date":1503760553,"post_id":45871744,"comment_id":78752503,"body_markdown":"The fact is, my question clearly states that I have two timestamps, one with a timezone and one without, which is merely the extent of the question.  As such it&#39;s not inaccurate.  You&#39;re pulling in context (pedantry regarding &quot;timestamp&quot; vs. a &quot;Unix Timestamp&quot;) that is unnecessary for answering the question and just adds confusion.  I think if you were to step back and re-read the question you&#39;d see that @OlivierGr&#233;goire.","body":"The fact is, my question clearly states that I have two timestamps, one with a timezone and one without, which is merely the extent of the question.  As such it&#39;s not inaccurate.  You&#39;re pulling in context (pedantry regarding &quot;timestamp&quot; vs. a &quot;Unix Timestamp&quot;) that is unnecessary for answering the question and just adds confusion.  I think if you were to step back and re-read the question you&#39;d see that @OlivierGr&#233;goire."},{"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"score":0,"creation_date":1503761532,"post_id":45871744,"comment_id":78752785,"body_markdown":"&quot;The fact is, my question clearly states&quot;... The fact is that 3 people already found that your question is unclear and voted to close because it is unclear.","body":"&quot;The fact is, my question clearly states&quot;... The fact is that 3 people already found that your question is unclear and voted to close because it is unclear."},{"owner":{"account_id":31740,"reputation":17092,"user_id":87408,"accept_rate":78,"display_name":"Edward Q. Bridges"},"score":0,"creation_date":1503762010,"post_id":45871744,"comment_id":78752932,"body_markdown":"I&#39;m just not sure of a more concise way to describe an instant of time that does not include a timezone, which is what I have, other than &quot;timestamp&quot; (which usage is consistent with the dictionary definition).  A Unix Timestamp by definition, includes a timezone/offset (UTC). I did not refer to it that way.  Neither of the values I have are a Unix Timestamp, they are simply instants of time.  One of which includes a timezone.  I&#39;ve clarified in my answer.  Unfortunately, there are 3 people out there who appear to be as confused as you.  Not sure what I can do about that.  Have a nice day.","body":"I&#39;m just not sure of a more concise way to describe an instant of time that does not include a timezone, which is what I have, other than &quot;timestamp&quot; (which usage is consistent with the dictionary definition).  A Unix Timestamp by definition, includes a timezone/offset (UTC). I did not refer to it that way.  Neither of the values I have are a Unix Timestamp, they are simply instants of time.  One of which includes a timezone.  I&#39;ve clarified in my answer.  Unfortunately, there are 3 people out there who appear to be as confused as you.  Not sure what I can do about that.  Have a nice day."},{"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"score":0,"creation_date":1503762949,"post_id":45871744,"comment_id":78753218,"body_markdown":"Well, for one, you haven&#39;t put any code in the question. You mix terms. The two first comments show that you should get some litterature about how timezones work, and you don&#39;t act. More... Your answer show that you discarded these comments entirely, without even explaining how you would round. Also, this question could probably (but not surely) have been better received on [Software Engineering SE](https://softwareengineering.stackexchange.com/). All in all, this is rather surprising from someone with ~4k rep. So yes, this is a bad question. It happens. No worries. You got your result, cool.","body":"Well, for one, you haven&#39;t put any code in the question. You mix terms. The two first comments show that you should get some litterature about how timezones work, and you don&#39;t act. More... Your answer show that you discarded these comments entirely, without even explaining how you would round. Also, this question could probably (but not surely) have been better received on <a href=\"https://softwareengineering.stackexchange.com/\">Software Engineering SE</a>. All in all, this is rather surprising from someone with ~4k rep. So yes, this is a bad question. It happens. No worries. You got your result, cool."},{"owner":{"account_id":31740,"reputation":17092,"user_id":87408,"accept_rate":78,"display_name":"Edward Q. Bridges"},"score":0,"creation_date":1503763435,"post_id":45871744,"comment_id":78753345,"body_markdown":"Unfortunately, this has gotten blown way out of proportion, where I was asking if there were any edge cases that I hadn&#39;t considered around getting the offset in hours between two timestamps.  RE: the first two comments, were referring to my original title mistakenly referring to timezones, which was updated.  My answer illustrates how I would round (getting the ceiling at hourly precision), so I&#39;m surprised about your point there, but it seems like you want to drag this out.  If you want to push your points further, feel free to take to chat.","body":"Unfortunately, this has gotten blown way out of proportion, where I was asking if there were any edge cases that I hadn&#39;t considered around getting the offset in hours between two timestamps.  RE: the first two comments, were referring to my original title mistakenly referring to timezones, which was updated.  My answer illustrates how I would round (getting the ceiling at hourly precision), so I&#39;m surprised about your point there, but it seems like you want to drag this out.  If you want to push your points further, feel free to take to chat."}],"answers":[{"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697214827,"creation_date":1503662399,"answer_id":45880938,"question_id":45871744,"body_markdown":"Disclaimer: I probably have not understood the exact format or data type of your two “timestamps”. With this reservation here’s a suggestion. \r\n\r\n\t\tString dateTimeStringUtc = &quot;2017-08-25T11:46:47.307&quot;;\r\n\t\t// for the sake of the example I took North Korean time; don’t tell anyone just yet :-)\r\n\t\tString dateTimeStringUnknownOffset = &quot;2017-08-25T20:16:47.307&quot;;\r\n\t\t\r\n\t\tLocalDateTime utcTime = LocalDateTime.parse(dateTimeStringUtc);\r\n\t\tLocalDateTime unknownOffsetTime = LocalDateTime.parse(dateTimeStringUnknownOffset);\r\n\t\tlong offsetSeconds = ChronoUnit.SECONDS.between(utcTime, unknownOffsetTime);\r\n\t\tif (Math.abs(offsetSeconds) &gt; 64800) { // out of range\r\n\t\t\tSystem.out.println(&quot;The time strings cannot represent the same time&quot;);\r\n\t\t} else {\r\n\t\t\tZoneOffset offset = ZoneOffset.ofTotalSeconds((int) offsetSeconds);\r\n\t\t\tSystem.out.println(&quot;The zone offset is &quot; + offset);\r\n\t\t}\r\n\r\nThis prints:\r\n\r\n```none\r\nThe zone offset is +08:30\r\n```\r\n\r\nAs discussed in the comments, it’s generally a poor idea to round to whole hours. These days it may be safe to round to a quarter of an hour, but I’d hesitate, who knows whether some place will introduce an offset of 8:20 next year? Historically zone offsets with seconds have existed, so if your timestamps denote “the good old days”, you should probably avoid any rounding.","title":"Is it possible to determine the UTC offset from two timestamps?","body":"<p>Disclaimer: I probably have not understood the exact format or data type of your two “timestamps”. With this reservation here’s a suggestion.</p>\n<pre><code>    String dateTimeStringUtc = &quot;2017-08-25T11:46:47.307&quot;;\n    // for the sake of the example I took North Korean time; don’t tell anyone just yet :-)\n    String dateTimeStringUnknownOffset = &quot;2017-08-25T20:16:47.307&quot;;\n    \n    LocalDateTime utcTime = LocalDateTime.parse(dateTimeStringUtc);\n    LocalDateTime unknownOffsetTime = LocalDateTime.parse(dateTimeStringUnknownOffset);\n    long offsetSeconds = ChronoUnit.SECONDS.between(utcTime, unknownOffsetTime);\n    if (Math.abs(offsetSeconds) &gt; 64800) { // out of range\n        System.out.println(&quot;The time strings cannot represent the same time&quot;);\n    } else {\n        ZoneOffset offset = ZoneOffset.ofTotalSeconds((int) offsetSeconds);\n        System.out.println(&quot;The zone offset is &quot; + offset);\n    }\n</code></pre>\n<p>This prints:</p>\n<pre class=\"lang-none prettyprint-override\"><code>The zone offset is +08:30\n</code></pre>\n<p>As discussed in the comments, it’s generally a poor idea to round to whole hours. These days it may be safe to round to a quarter of an hour, but I’d hesitate, who knows whether some place will introduce an offset of 8:20 next year? Historically zone offsets with seconds have existed, so if your timestamps denote “the good old days”, you should probably avoid any rounding.</p>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1503918110,"post_id":45896346,"comment_id":78793279,"body_markdown":"Thanks for posting your solution, it looks fine. Is there any point in adding 1 hour to each of the times before finding the number of hours between them (`plusHours(1)`)? You might just use the floor instead of the ceiling?","body":"Thanks for posting your solution, it looks fine. Is there any point in adding 1 hour to each of the times before finding the number of hours between them (<code>plusHours(1)</code>)? You might just use the floor instead of the ceiling?"},{"owner":{"account_id":31740,"reputation":17092,"user_id":87408,"accept_rate":78,"display_name":"Edward Q. Bridges"},"score":1,"creation_date":1504047463,"post_id":45896346,"comment_id":78857582,"body_markdown":"Hi -- thanks for updating the question -- hope it helps others.  Using the floor (by just truncating() without the additional call to plus()) would give an equivalent result -- the beginning of the hour rather than the top of the hour.  It&#39;s a flip of the coin, and depends on the application.  For my purposes, using the ceiling fit the application.","body":"Hi -- thanks for updating the question -- hope it helps others.  Using the floor (by just truncating() without the additional call to plus()) would give an equivalent result -- the beginning of the hour rather than the top of the hour.  It&#39;s a flip of the coin, and depends on the application.  For my purposes, using the ceiling fit the application."}],"tags":[],"owner":{"account_id":31740,"reputation":17092,"user_id":87408,"accept_rate":78,"display_name":"Edward Q. Bridges"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1503756977,"creation_date":1503756977,"answer_id":45896346,"question_id":45871744,"body_markdown":"This is what I ended up doing:\r\n\r\n\r\n    public static ZoneOffset determineTimeZoneOffset(OffsetDateTime localTime, OffsetDateTime utcTime) {\r\n      if(utcTime == null || localTime == null) {\r\n        return null;\r\n      }\r\n    \r\n      OffsetDateTime ceilingUtc = utcTime.truncatedTo(ChronoUnit.HOURS).plusHours(1);\r\n      OffsetDateTime ceilingLocal = localTime.truncatedTo(ChronoUnit.HOURS).plusHours(1);\r\n    \r\n      int offsetHours = (int)ChronoUnit.HOURS.between(ceilingUtc, ceilingLocal);\r\n    \r\n      return ZoneOffset.ofHours(offsetHours);\r\n    }\r\n\r\n* Warnings about truncating to hours are well taken, but for the purposes of the application this is for we don&#39;t need to go that far with it.  However, it&#39;d be easy enough I imagine to truncate using `ChronoUnit.MINUTES` or even seconds. An interesting exercise that Ole V.V. helpfully pointed out.\r\n\r\n* Not sure why this was being downvoted -- maybe the confusion around the meaning of a timestamp.  I think it was pretty clear from the question that I was referring to a generic timestamp (as Ole V.V. and others noted).  I hope the downvoters reread the question and adjust their assessment.\r\n\r\n* While I don&#39;t really consider it relevant to the question, these dates come from EXIF metadata of images.  EXIF stores the `CreateDate` of an image in the format: `YYYY:MM:DD HH:MM:SS` with no timezone information.  It also stores a UTC timestamp (sometimes) under `GPSTimeStamp`.  Using these two values, I was hoping to derive the offset in order to store the create date with it.  Although there is EXIF metadata for TZ offsets, cameras rarely record that.","title":"Is it possible to determine the UTC offset from two timestamps?","body":"<p>This is what I ended up doing:</p>\n\n<pre><code>public static ZoneOffset determineTimeZoneOffset(OffsetDateTime localTime, OffsetDateTime utcTime) {\n  if(utcTime == null || localTime == null) {\n    return null;\n  }\n\n  OffsetDateTime ceilingUtc = utcTime.truncatedTo(ChronoUnit.HOURS).plusHours(1);\n  OffsetDateTime ceilingLocal = localTime.truncatedTo(ChronoUnit.HOURS).plusHours(1);\n\n  int offsetHours = (int)ChronoUnit.HOURS.between(ceilingUtc, ceilingLocal);\n\n  return ZoneOffset.ofHours(offsetHours);\n}\n</code></pre>\n\n<ul>\n<li><p>Warnings about truncating to hours are well taken, but for the purposes of the application this is for we don't need to go that far with it.  However, it'd be easy enough I imagine to truncate using <code>ChronoUnit.MINUTES</code> or even seconds. An interesting exercise that Ole V.V. helpfully pointed out.</p></li>\n<li><p>Not sure why this was being downvoted -- maybe the confusion around the meaning of a timestamp.  I think it was pretty clear from the question that I was referring to a generic timestamp (as Ole V.V. and others noted).  I hope the downvoters reread the question and adjust their assessment.</p></li>\n<li><p>While I don't really consider it relevant to the question, these dates come from EXIF metadata of images.  EXIF stores the <code>CreateDate</code> of an image in the format: <code>YYYY:MM:DD HH:MM:SS</code> with no timezone information.  It also stores a UTC timestamp (sometimes) under <code>GPSTimeStamp</code>.  Using these two values, I was hoping to derive the offset in order to store the create date with it.  Although there is EXIF metadata for TZ offsets, cameras rarely record that.</p></li>\n</ul>\n"}],"owner":{"account_id":31740,"reputation":17092,"user_id":87408,"accept_rate":78,"display_name":"Edward Q. Bridges"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1194,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":45896346,"answer_count":2,"score":0,"last_activity_date":1697214827,"creation_date":1503613042,"question_id":45871744,"body_markdown":"Let&#39;s say I have two timestamps.  One is in UTC, and the other&#39;s timezone is unknown, but has a date and a time. The format of the latter is `YYYY:MM:DD HH:MM:SS`.\r\n\r\nIs it reasonable to get the offset from UTC by simply subtracting the second timestamp from the UTC one, then rounding the hours?\r\n\r\nIs there a straightforward way to do this using Java? (e.g. Joda or JUT?)\r\n\r\nThanks!\r\n\r\nA little background: These dates come from EXIF metadata of images. EXIF stores the `CreateDate` of an image in the format: `YYYY:MM:DD HH:MM:SS` with no timezone information.  It also stores a UTC timestamp (sometimes) under `GPSTimeStamp`.  Using these two values, I was hoping to derive the offset in order to store the create date with it.  Although there is EXIF metadata for TZ offsets, cameras rarely record that.","title":"Is it possible to determine the UTC offset from two timestamps?","body":"<p>Let's say I have two timestamps.  One is in UTC, and the other's timezone is unknown, but has a date and a time. The format of the latter is <code>YYYY:MM:DD HH:MM:SS</code>.</p>\n\n<p>Is it reasonable to get the offset from UTC by simply subtracting the second timestamp from the UTC one, then rounding the hours?</p>\n\n<p>Is there a straightforward way to do this using Java? (e.g. Joda or JUT?)</p>\n\n<p>Thanks!</p>\n\n<p>A little background: These dates come from EXIF metadata of images. EXIF stores the <code>CreateDate</code> of an image in the format: <code>YYYY:MM:DD HH:MM:SS</code> with no timezone information.  It also stores a UTC timestamp (sometimes) under <code>GPSTimeStamp</code>.  Using these two values, I was hoping to derive the offset in order to store the create date with it.  Although there is EXIF metadata for TZ offsets, cameras rarely record that.</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":9756078,"reputation":669,"user_id":7232773,"display_name":"M. Davis"},"score":1,"creation_date":1480804835,"post_id":40953250,"comment_id":69116307,"body_markdown":"@Khali If you&#39;re not familiar with the switch statement, you can write it as `if (letters.charAt(letter) == &#39;T&#39;) { System.out.print(linesT[line]); }` and then `else if (letters.charAt(letter) == &#39;I&#39;) {System.out.print(linesI[line]); }` and so forth","body":"@Khali If you&#39;re not familiar with the switch statement, you can write it as <code>if (letters.charAt(letter) == &#39;T&#39;) { System.out.print(linesT[line]); }</code> and then <code>else if (letters.charAt(letter) == &#39;I&#39;) {System.out.print(linesI[line]); }</code> and so forth"},{"owner":{"account_id":9765597,"reputation":11,"user_id":7239147,"display_name":"Khali"},"score":0,"creation_date":1480808648,"post_id":40953250,"comment_id":69117278,"body_markdown":"@Ole V.V. So when you created the project did you create a project and from there a class that contained a main and a separate class for the actual code? Sorry I am brand new to this and I&#39;m just trying to learn as much as I can. Thanks!","body":"@Ole V.V. So when you created the project did you create a project and from there a class that contained a main and a separate class for the actual code? Sorry I am brand new to this and I&#39;m just trying to learn as much as I can. Thanks!"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1480837343,"post_id":40953250,"comment_id":69122524,"body_markdown":"Your interest in design is a sound one. I only see now that you must have your `main` method in a different class from `letters` (which ought to be `Letters` with a capital L since it’s a class). I didn’t really respect your design when I answered, sorry. Since I didn’t need a complete program, just one method and the three declarations that the method needed, I was lazy, used a project I already have for smaller SO things (really dirty), created a new class with both `main()` and the code you see. A poor example am I.","body":"Your interest in design is a sound one. I only see now that you must have your <code>main</code> method in a different class from <code>letters</code> (which ought to be <code>Letters</code> with a capital L since it’s a class). I didn’t really respect your design when I answered, sorry. Since I didn’t need a complete program, just one method and the three declarations that the method needed, I was lazy, used a project I already have for smaller SO things (really dirty), created a new class with both <code>main()</code> and the code you see. A poor example am I."}],"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697214559,"creation_date":1480804567,"answer_id":40953250,"question_id":40952808,"body_markdown":"This suggestion doesn’t fit exactly into your program, but I am sure you can make it fit. The code is at the bottom.\r\n\r\nWhen I call `printOut()` with argument `&quot;TILT&quot;`, it prints:\r\n\r\n    ----- ----- |     ----- \r\n      |     |   |       |   \r\n      |     |   |       |   \r\n      |     |   |       |   \r\n      |   ----- -----   |   \r\n\r\nIf you want, you can put the string arrays into a `HashMap&lt;Character, String[]&gt;` for easier lookup instead of the switch/case statement.\r\n\r\n \tstatic String[] linesT = { &quot;-----&quot;,\r\n \t\t\t\t\t\t\t   &quot;  |  &quot;,\r\n \t\t\t\t\t\t\t   &quot;  |  &quot;,\r\n \t\t\t\t\t\t\t   &quot;  |  &quot;,\r\n \t\t\t\t\t\t\t   &quot;  |  &quot; };\r\n \r\n \tstatic String[] linesI = { &quot;-----&quot;,\r\n \t\t\t\t\t\t\t   &quot;  |  &quot;,\r\n \t\t\t\t\t\t\t   &quot;  |  &quot;,\r\n \t\t\t\t\t\t\t   &quot;  |  &quot;,\r\n \t\t\t\t\t\t\t   &quot;-----&quot; };\r\n \r\n \tstatic String[] linesL = { &quot;|    &quot;,\r\n \t\t\t\t\t\t\t   &quot;|    &quot;,\r\n \t\t\t\t\t\t\t   &quot;|    &quot;,\r\n \t\t\t\t\t\t\t   &quot;|    &quot;,\r\n \t\t\t\t\t\t\t   &quot;-----&quot; };\r\n \r\n \tprivate static void printOut(String letters) {\r\n \t\tfor (int line = 0; line &lt; 5; line++) {\r\n \t\t\tfor (int letter = 0; letter &lt; letters.length(); letter++)\r\n  \t\t\t\tswitch (letters.charAt(letter)) {\r\n \t\t\t\t\tcase &#39;T&#39;:\r\n \t\t\t\t\t\tSystem.out.print(linesT[line]);\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tcase &#39;I&#39;:\r\n \t\t\t\t\t\tSystem.out.print(linesI[line]);\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tcase &#39;L&#39;:\r\n \t\t\t\t\t\tSystem.out.print(linesL[line]);\r\n \t\t\t\t\t\tbreak;\r\n \t\r\n \t\t\t\t\tdefault:\r\n \t\t\t\t\t\tthrow new IllegalArgumentException(&quot;Cannot print letter &quot; + letters.charAt(letter));\r\n \t\t\t\t}\r\n \t\t\t\tSystem.out.print(&#39; &#39;);\r\n \t\t\t}\r\n \t\t\tSystem.out.println();\r\n \t\t}\r\n \t}\r\n\r\n","title":"How to use Java to print out letters?","body":"<p>This suggestion doesn’t fit exactly into your program, but I am sure you can make it fit. The code is at the bottom.</p>\n<p>When I call <code>printOut()</code> with argument <code>&quot;TILT&quot;</code>, it prints:</p>\n<pre><code>----- ----- |     ----- \n  |     |   |       |   \n  |     |   |       |   \n  |     |   |       |   \n  |   ----- -----   |   \n</code></pre>\n<p>If you want, you can put the string arrays into a <code>HashMap&lt;Character, String[]&gt;</code> for easier lookup instead of the switch/case statement.</p>\n<pre><code>static String[] linesT = { &quot;-----&quot;,\n                           &quot;  |  &quot;,\n                           &quot;  |  &quot;,\n                           &quot;  |  &quot;,\n                           &quot;  |  &quot; };\n\nstatic String[] linesI = { &quot;-----&quot;,\n                           &quot;  |  &quot;,\n                           &quot;  |  &quot;,\n                           &quot;  |  &quot;,\n                           &quot;-----&quot; };\n\nstatic String[] linesL = { &quot;|    &quot;,\n                           &quot;|    &quot;,\n                           &quot;|    &quot;,\n                           &quot;|    &quot;,\n                           &quot;-----&quot; };\n\nprivate static void printOut(String letters) {\n    for (int line = 0; line &lt; 5; line++) {\n        for (int letter = 0; letter &lt; letters.length(); letter++)\n            switch (letters.charAt(letter)) {\n                case 'T':\n                    System.out.print(linesT[line]);\n                    break;\n                case 'I':\n                    System.out.print(linesI[line]);\n                    break;\n                case 'L':\n                    System.out.print(linesL[line]);\n                    break;\n\n                default:\n                    throw new IllegalArgumentException(&quot;Cannot print letter &quot; + letters.charAt(letter));\n            }\n            System.out.print(' ');\n        }\n        System.out.println();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9765597,"reputation":11,"user_id":7239147,"display_name":"Khali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":914,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":40953250,"answer_count":1,"score":-2,"last_activity_date":1697214559,"creation_date":1480801434,"question_id":40952808,"body_markdown":"The code must allow the user to type in a four letter combination of T,I,L and translate that into the word TILT. However, the code must print out the word TILT using - and |. The - is for the top parts of the letters T and I and the bottom of L. | is used for everything else. There needs to be if and else statements and int line statements. \r\n\r\nDoes anyone have any advice on how to achieve this? Anything helps!\r\nThis is what I have so far, it runs only up to where it prints back what the user has entered but it does not print it out using - and |. \r\n\r\n    import.java.util.Scanner\r\n    public class letters\r\n    {\r\n\tprivate char letter1, letter2, letter3, letter4;\r\n\tpublic void readIn()\r\n\t{\r\n\t\tScanner keyboard = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Enter four letters that consist of any combination of T, I, or L&quot;);\r\n\t\t\r\n\t\tletter1 = keyboard.next().charAt(0);\r\n\t\tletter2 = keyboard.next().charAt(0);\r\n\t\tletter3 = keyboard.next().charAt(0);\r\n\t\tletter4 = keyboard.next().charAt(0);\r\n\r\n\t\tSystem.out.println(&quot;You entered the following:&quot; + letter1 +letter2 + letter3 + letter4);\r\n\r\n\t\t\r\n\t}\r\n    // This method tracks which line to print out at a given time\r\n    public void printOut()\r\n     {\r\n\t     for (int line = 0; line , 5; line++)\r\n\t\t      drawLine(line);\r\n         }\r\n\r\n     public void drawLine(int Line)\r\n       {\r\n\t    if (line == 0)\r\n\t   {\r\n\t\t  if (letter1 == &#39;T&#39; || letter1 == &#39;I&#39;)\r\n\t\t\t  System.out.println(&quot;-----&quot;);\r\n\t\t   else\r\n\t\t  System.out.println(&quot;|&quot;);\r\n\t    }\t\r\n\t\t   else if (line &lt; 4)\r\n\t   {\r\n\t\t   if(letter1 == &#39;L&#39;)\r\n\t\t  System.out.println(&quot;  |  &quot;)\r\n\t      }\r\n\t         if (line == 4)\r\n        \r\n\t         {\r\n\t\t       if(letter1 == &#39;T&#39;)\r\n\t\t       System.out.println(&quot;  |  &quot;);\r\n  \r\n\t\t      else\r\n\t\t         System.out.println(&quot;-----&quot;);\r\n              }\r\n      }","title":"How to use Java to print out letters?","body":"<p>The code must allow the user to type in a four letter combination of T,I,L and translate that into the word TILT. However, the code must print out the word TILT using - and |. The - is for the top parts of the letters T and I and the bottom of L. | is used for everything else. There needs to be if and else statements and int line statements. </p>\n\n<p>Does anyone have any advice on how to achieve this? Anything helps!\nThis is what I have so far, it runs only up to where it prints back what the user has entered but it does not print it out using - and |. </p>\n\n<pre><code>import.java.util.Scanner\npublic class letters\n{\nprivate char letter1, letter2, letter3, letter4;\npublic void readIn()\n{\n    Scanner keyboard = new Scanner(System.in);\n    System.out.println(\"Enter four letters that consist of any combination of T, I, or L\");\n\n    letter1 = keyboard.next().charAt(0);\n    letter2 = keyboard.next().charAt(0);\n    letter3 = keyboard.next().charAt(0);\n    letter4 = keyboard.next().charAt(0);\n\n    System.out.println(\"You entered the following:\" + letter1 +letter2 + letter3 + letter4);\n\n\n}\n// This method tracks which line to print out at a given time\npublic void printOut()\n {\n     for (int line = 0; line , 5; line++)\n          drawLine(line);\n     }\n\n public void drawLine(int Line)\n   {\n    if (line == 0)\n   {\n      if (letter1 == 'T' || letter1 == 'I')\n          System.out.println(\"-----\");\n       else\n      System.out.println(\"|\");\n    }   \n       else if (line &lt; 4)\n   {\n       if(letter1 == 'L')\n      System.out.println(\"  |  \")\n      }\n         if (line == 4)\n\n         {\n           if(letter1 == 'T')\n           System.out.println(\"  |  \");\n\n          else\n             System.out.println(\"-----\");\n          }\n  }\n</code></pre>\n"},{"tags":["java","android","android-recyclerview","android-listview","nestedrecyclerview"],"owner":{"account_id":11838749,"reputation":35,"user_id":8663248,"display_name":"user8663248"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697213391,"creation_date":1697116588,"question_id":77280945,"body_markdown":"i am trying to **fetch subcategories** whenever user click on **category** item, I am using recyclerview to call the category items and i am getting all the data from external database in the form of json. \r\n\r\n1 Currently i have two different tabs in sidebar like category and subcategories both tabs load data separately.\r\n\r\njson data example\r\n\r\n```\r\nMain category json data \r\n\r\n[\r\n  {\r\n    &quot;id&quot;: 1,\r\n    &quot;category_name&quot;: &quot;Maths&quot;,\r\n    &quot;q_count&quot;: 1,\r\n    &quot;category_image&quot;: &quot;qcategory_Category test 1. dPy#NQHA7#PXwRG.png&quot;,\r\n    &quot;sub_categorys&quot;: 2\r\n  },\r\n  {\r\n    &quot;id&quot;: 2,\r\n    &quot;category_name&quot;: &quot;General knowledge&quot;,\r\n    &quot;q_count&quot;: 2,\r\n    &quot;category_image&quot;: &quot;qcategory_Category test 2.png&quot;,\r\n    &quot;sub_categorys&quot;: 2\r\n  }\r\n]\r\n\r\nsub category json\r\n\r\n[\r\n  {\r\n    &quot;id&quot;: 6,\r\n    &quot;sub_category_name&quot;: &quot;Arithmetic&quot;,\r\n    &quot;sub_category_image&quot;: &quot;subcategory_Applenull&quot;,\r\n    &quot;category_id&quot;: 1,\r\n    &quot;question&quot;: 0\r\n  },\r\n  {\r\n    &quot;id&quot;: 7,\r\n    &quot;sub_category_name&quot;: &quot;Geometry&quot;,\r\n    &quot;sub_category_image&quot;: &quot;subcategory_Banananull&quot;,\r\n    &quot;category_id&quot;: 1,\r\n    &quot;question&quot;: 0\r\n  },\r\n  {\r\n    &quot;id&quot;: 8,\r\n    &quot;sub_category_name&quot;: &quot;Gk Questions class 1&quot;,\r\n    &quot;sub_category_image&quot;: &quot;subcategory_Carrotnull&quot;,\r\n    &quot;category_id&quot;: 2,\r\n    &quot;question&quot;: 0\r\n  },\r\n  {\r\n    &quot;id&quot;: 9,\r\n    &quot;sub_category_name&quot;: &quot;Gk Questions class 2&quot;,\r\n    &quot;sub_category_image&quot;: &quot;subcategory_Radishnull&quot;,\r\n    &quot;category_id&quot;: 2,\r\n    &quot;question&quot;: 0\r\n  }\r\n]\r\n```\r\n\r\nData madel code\r\n\r\n```\r\nMain category\r\n\r\n`public class Quiz_Category implements Serializable {\r\n    \r\n\t//public Long id;\r\n\tpublic Long id;\r\n    public String category_name;\r\n    public String category_image;\r\n    public String q_count;\r\n    public String question;\r\n\t\r\n\tpublic Long getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(Long id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\tpublic String getCategory_image() {\r\n\t\treturn category_image;\r\n\t}\r\n\r\n\tpublic void setCategory_image(String category_image) {\r\n\t\tthis.category_image = category_image;\r\n\t}\r\n    public List&lt;QuestionsPojo&gt; question_list = new ArrayList&lt;&gt;();\r\n}`\r\n\r\nSubcategories data\r\n\r\n`\r\npublic int id;\r\n    public String sub_category_name;\r\n    public String sub_category_image;\r\n    public Long category_id;\r\n    public String question;\r\n\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(int id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\tpublic String getSub_Category_image() {\r\n\t\treturn sub_category_image;\r\n\t}\r\n\r\n\tpublic void setSub_Category_image(String sub_category_image) {\r\n\t\tthis.sub_category_image = sub_category_image;\r\n\t}\r\n\r\n`\r\n\r\n```\r\n\r\nmy category adptor \r\n\r\n```\r\n   public ViewHolder(View v) {\r\n            super(v);\r\n            category_name = (TextView) v.findViewById(R.id.txtcustomrow);\r\n            bellow_name = (TextView) v.findViewById(R.id.q_count);\r\n\t\t\tcategory_image = (ImageView) v.findViewById(R.id.img);\r\n            lyt_parent = (CardView) v.findViewById(R.id.Ripple_layout);\r\n        }\r\n    }\r\n\r\n    public Filter getFilter() {\r\n        return mFilter;\r\n    }\r\n    // Provide a suitable constructor (depends on the kind of dataset)\r\n    public QuizAdapter(Context ctx, List&lt;Quiz_Category&gt; items) {\r\n        this.ctx = ctx;\r\n        original_items = items;\r\n\t\tfiltered_items = items;\r\n        categorylist = items;\r\n        ctx.getTheme().resolveAttribute(R.attr.selectableItemBackground, mTypedValue, true);\r\n        mBackground = mTypedValue.resourceId;\r\n    }\r\n\r\n    @Override\r\n    public QuizAdapter.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.quiz_list, parent, false);\r\n        v.setBackgroundResource(mBackground);\r\n        ViewHolder vh = new ViewHolder(v);\r\n        return vh;\r\n    }\r\n\r\n    // Replace the contents of a view (invoked by the layout manager)\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder,final int position) {\r\n\t\t\r\n\t\tfinal Quiz_Category p = filtered_items.get(position);\r\n        \r\n\t\t//final Quiz_Category p = categorylist.get(position);\r\n        holder.category_name.setText(p.category_name);\r\n\t\timgloader.displayImage(Constant.getURLimgQuizCategory(p.category_image), holder.category_image);\r\n        \r\n\t\tholder.bellow_name.setText(p.question);\r\n\t\tString url = DataManager.catphotourl+ categorylist.get(position).category_image;\r\n\t\ttry {\r\n\t\t\turl = URLDecoder.decode(url, &quot;UTF-8&quot;);\r\n\t\t\turl = url.replaceAll(&quot; &quot;, &quot;%20&quot;);\r\n\t\t} catch (UnsupportedEncodingException e1) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te1.printStackTrace();\r\n\t\t}\r\n\t\t//holder.category_image.setImage(url);\r\n\t\t\r\n\t\tholder.lyt_parent.setOnClickListener(new View.OnClickListener() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onClick(View view) {\r\n\t\t\t\t\tIntent i = new Intent(ctx, ActivitySubCategoryDetails.class);\r\n\t\t\t\t\ti.putExtra(ActivitySubCategoryDetails.EXTRA_OBJCT, p);\r\n\t\t\t\t\tctx.startActivity(i);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\r\n\t\t\r\n    }\r\n\r\n    // Return the size of your dataset (invoked by the layout manager)\r\n    @Override\r\n    public int getItemCount() {\r\n\t\treturn categorylist != null ? categorylist.size() : 0;\r\n\t\t//return filtered_items.size();\r\n    }\r\n\r\n    @Override\r\n    public long getItemId(int position) {\r\n        return filtered_items.get(position).id;\r\n    }\r\n\t\r\n    private class ItemFilter extends Filter {\r\n        @Override\r\n        protected FilterResults performFiltering(CharSequence constraint) {\r\n            String query = constraint.toString().toLowerCase();\r\n            FilterResults results = new FilterResults();\r\n            final List&lt;Quiz_Category&gt; list = original_items;\r\n            final List&lt;Quiz_Category&gt; result_list = new ArrayList&lt;&gt;(list.size());\r\n            for (int i = 0; i &lt; list.size(); i++) {\r\n                String str_title = list.get(i).category_name;\r\n                if (str_title.toLowerCase().contains(query)) {\r\n                    result_list.add(list.get(i));\r\n                }\r\n            }\r\n            results.values = result_list;\r\n            results.count = result_list.size();\r\n            return results;\r\n        }\r\n\r\n```\r\n\r\ncurrently i am using FilterResults to filter subcategories.\r\n\r\nCategory loader\r\n\r\n```\r\npublic class QuizListLoader extends AsyncTask&lt;String, String, List&lt;Quiz_Category&gt;&gt; {\r\n    String URL = Constant.getURLquizcategory();\r\n    private Gson gson = new Gson();\r\n\r\n    public interface TaskListener {\r\n        public void onFinished(List&lt;Quiz_Category&gt; result);\r\n    }\r\n\r\n    // This is the reference to the associated listener\r\n    private final TaskListener taskListener;\r\n\r\n    public QuizListLoader(TaskListener listener) {\r\n        this.taskListener = listener;\r\n    }\r\n\r\n    @Override\r\n    protected List&lt;Quiz_Category&gt; doInBackground(String... params) {\r\n        ArrayList&lt;Quiz_Category&gt; list = new ArrayList&lt;Quiz_Category&gt;();\r\n        Quiz_Category[] f = null;\r\n\t\ttry {\r\n            URL url = new URL(URL);\r\n            HttpURLConnection con = (HttpURLConnection) url.openConnection();\r\n            Gson gson = new Gson();\r\n\r\n            JsonReader reader = new JsonReader(new InputStreamReader(con.getInputStream()));\r\n            f = gson.fromJson(reader, Quiz_Category[].class);\r\n\r\n            for (Quiz_Category flower : f) {\r\n                list.add(flower);\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n\t\treturn list;\r\n\t}\r\n\r\n    @Override\r\n    protected void onPostExecute(List&lt;Quiz_Category&gt; result) {\r\n        super.onPostExecute(result);\r\n        // In onPostExecute we check if the listener is valid\r\n        if (this.taskListener != null) {\r\n            this.taskListener.onFinished(result);\r\n        }\r\n    }\r\n```\r\n\r\nSub category loader\r\n\r\n```\r\npublic class SubCat_List_Loader extends AsyncTask&lt;String, String, List&lt;SubCategory&gt;&gt; {\r\n    String URL = Constant.getURLsubcategory();\r\n    private Gson gson = new Gson();\r\n\r\n    public interface TaskListener {\r\n        public void onFinished(List&lt;SubCategory&gt; result);\r\n    }\r\n\r\n    // This is the reference to the associated listener\r\n    private final TaskListener taskListener;\r\n\r\n    public SubCat_List_Loader(TaskListener listener) {\r\n        this.taskListener = listener;\r\n    }\r\n\r\n    @Override\r\n    protected List&lt;SubCategory&gt; doInBackground(String... params) {\r\n        ArrayList&lt;SubCategory&gt; list = new ArrayList&lt;SubCategory&gt;();\r\n        SubCategory[] f = null;\r\n\t\ttry {\r\n            URL url = new URL(URL);\r\n            HttpURLConnection con = (HttpURLConnection) url.openConnection();\r\n            Gson gson = new Gson();\r\n\r\n            JsonReader reader = new JsonReader(new InputStreamReader(con.getInputStream()));\r\n            f = gson.fromJson(reader, SubCategory[].class);\r\n\r\n            for (SubCategory flower : f) {\r\n                list.add(flower);\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n\t\treturn list;\r\n\t}\r\n\r\n    @Override\r\n    protected void onPostExecute(List&lt;SubCategory&gt; result) {\r\n        super.onPostExecute(result);\r\n        // In onPostExecute we check if the listener is valid\r\n        if (this.taskListener != null) {\r\n            this.taskListener.onFinished(result);\r\n        }\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\n\r\ni am trying to open subcategories in seprate recyclerview whenever user click on category. All subcategories have there own category_id.\r\n\r\nthankyou.","title":"Not able to open a list of subcategory whenever user click on category item","body":"<p>i am trying to <strong>fetch subcategories</strong> whenever user click on <strong>category</strong> item, I am using recyclerview to call the category items and i am getting all the data from external database in the form of json.</p>\n<p>1 Currently i have two different tabs in sidebar like category and subcategories both tabs load data separately.</p>\n<p>json data example</p>\n<pre><code>Main category json data \n\n[\n  {\n    &quot;id&quot;: 1,\n    &quot;category_name&quot;: &quot;Maths&quot;,\n    &quot;q_count&quot;: 1,\n    &quot;category_image&quot;: &quot;qcategory_Category test 1. dPy#NQHA7#PXwRG.png&quot;,\n    &quot;sub_categorys&quot;: 2\n  },\n  {\n    &quot;id&quot;: 2,\n    &quot;category_name&quot;: &quot;General knowledge&quot;,\n    &quot;q_count&quot;: 2,\n    &quot;category_image&quot;: &quot;qcategory_Category test 2.png&quot;,\n    &quot;sub_categorys&quot;: 2\n  }\n]\n\nsub category json\n\n[\n  {\n    &quot;id&quot;: 6,\n    &quot;sub_category_name&quot;: &quot;Arithmetic&quot;,\n    &quot;sub_category_image&quot;: &quot;subcategory_Applenull&quot;,\n    &quot;category_id&quot;: 1,\n    &quot;question&quot;: 0\n  },\n  {\n    &quot;id&quot;: 7,\n    &quot;sub_category_name&quot;: &quot;Geometry&quot;,\n    &quot;sub_category_image&quot;: &quot;subcategory_Banananull&quot;,\n    &quot;category_id&quot;: 1,\n    &quot;question&quot;: 0\n  },\n  {\n    &quot;id&quot;: 8,\n    &quot;sub_category_name&quot;: &quot;Gk Questions class 1&quot;,\n    &quot;sub_category_image&quot;: &quot;subcategory_Carrotnull&quot;,\n    &quot;category_id&quot;: 2,\n    &quot;question&quot;: 0\n  },\n  {\n    &quot;id&quot;: 9,\n    &quot;sub_category_name&quot;: &quot;Gk Questions class 2&quot;,\n    &quot;sub_category_image&quot;: &quot;subcategory_Radishnull&quot;,\n    &quot;category_id&quot;: 2,\n    &quot;question&quot;: 0\n  }\n]\n</code></pre>\n<p>Data madel code</p>\n<pre><code>Main category\n\n`public class Quiz_Category implements Serializable {\n    \n    //public Long id;\n    public Long id;\n    public String category_name;\n    public String category_image;\n    public String q_count;\n    public String question;\n    \n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n    public String getCategory_image() {\n        return category_image;\n    }\n\n    public void setCategory_image(String category_image) {\n        this.category_image = category_image;\n    }\n    public List&lt;QuestionsPojo&gt; question_list = new ArrayList&lt;&gt;();\n}`\n\nSubcategories data\n\n`\npublic int id;\n    public String sub_category_name;\n    public String sub_category_image;\n    public Long category_id;\n    public String question;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getSub_Category_image() {\n        return sub_category_image;\n    }\n\n    public void setSub_Category_image(String sub_category_image) {\n        this.sub_category_image = sub_category_image;\n    }\n\n`\n\n</code></pre>\n<p>my category adptor</p>\n<pre><code>   public ViewHolder(View v) {\n            super(v);\n            category_name = (TextView) v.findViewById(R.id.txtcustomrow);\n            bellow_name = (TextView) v.findViewById(R.id.q_count);\n            category_image = (ImageView) v.findViewById(R.id.img);\n            lyt_parent = (CardView) v.findViewById(R.id.Ripple_layout);\n        }\n    }\n\n    public Filter getFilter() {\n        return mFilter;\n    }\n    // Provide a suitable constructor (depends on the kind of dataset)\n    public QuizAdapter(Context ctx, List&lt;Quiz_Category&gt; items) {\n        this.ctx = ctx;\n        original_items = items;\n        filtered_items = items;\n        categorylist = items;\n        ctx.getTheme().resolveAttribute(R.attr.selectableItemBackground, mTypedValue, true);\n        mBackground = mTypedValue.resourceId;\n    }\n\n    @Override\n    public QuizAdapter.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.quiz_list, parent, false);\n        v.setBackgroundResource(mBackground);\n        ViewHolder vh = new ViewHolder(v);\n        return vh;\n    }\n\n    // Replace the contents of a view (invoked by the layout manager)\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder,final int position) {\n        \n        final Quiz_Category p = filtered_items.get(position);\n        \n        //final Quiz_Category p = categorylist.get(position);\n        holder.category_name.setText(p.category_name);\n        imgloader.displayImage(Constant.getURLimgQuizCategory(p.category_image), holder.category_image);\n        \n        holder.bellow_name.setText(p.question);\n        String url = DataManager.catphotourl+ categorylist.get(position).category_image;\n        try {\n            url = URLDecoder.decode(url, &quot;UTF-8&quot;);\n            url = url.replaceAll(&quot; &quot;, &quot;%20&quot;);\n        } catch (UnsupportedEncodingException e1) {\n            // TODO Auto-generated catch block\n            e1.printStackTrace();\n        }\n        //holder.category_image.setImage(url);\n        \n        holder.lyt_parent.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    Intent i = new Intent(ctx, ActivitySubCategoryDetails.class);\n                    i.putExtra(ActivitySubCategoryDetails.EXTRA_OBJCT, p);\n                    ctx.startActivity(i);\n                }\n            });\n        \n        \n    }\n\n    // Return the size of your dataset (invoked by the layout manager)\n    @Override\n    public int getItemCount() {\n        return categorylist != null ? categorylist.size() : 0;\n        //return filtered_items.size();\n    }\n\n    @Override\n    public long getItemId(int position) {\n        return filtered_items.get(position).id;\n    }\n    \n    private class ItemFilter extends Filter {\n        @Override\n        protected FilterResults performFiltering(CharSequence constraint) {\n            String query = constraint.toString().toLowerCase();\n            FilterResults results = new FilterResults();\n            final List&lt;Quiz_Category&gt; list = original_items;\n            final List&lt;Quiz_Category&gt; result_list = new ArrayList&lt;&gt;(list.size());\n            for (int i = 0; i &lt; list.size(); i++) {\n                String str_title = list.get(i).category_name;\n                if (str_title.toLowerCase().contains(query)) {\n                    result_list.add(list.get(i));\n                }\n            }\n            results.values = result_list;\n            results.count = result_list.size();\n            return results;\n        }\n\n</code></pre>\n<p>currently i am using FilterResults to filter subcategories.</p>\n<p>Category loader</p>\n<pre><code>public class QuizListLoader extends AsyncTask&lt;String, String, List&lt;Quiz_Category&gt;&gt; {\n    String URL = Constant.getURLquizcategory();\n    private Gson gson = new Gson();\n\n    public interface TaskListener {\n        public void onFinished(List&lt;Quiz_Category&gt; result);\n    }\n\n    // This is the reference to the associated listener\n    private final TaskListener taskListener;\n\n    public QuizListLoader(TaskListener listener) {\n        this.taskListener = listener;\n    }\n\n    @Override\n    protected List&lt;Quiz_Category&gt; doInBackground(String... params) {\n        ArrayList&lt;Quiz_Category&gt; list = new ArrayList&lt;Quiz_Category&gt;();\n        Quiz_Category[] f = null;\n        try {\n            URL url = new URL(URL);\n            HttpURLConnection con = (HttpURLConnection) url.openConnection();\n            Gson gson = new Gson();\n\n            JsonReader reader = new JsonReader(new InputStreamReader(con.getInputStream()));\n            f = gson.fromJson(reader, Quiz_Category[].class);\n\n            for (Quiz_Category flower : f) {\n                list.add(flower);\n            }\n\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n        return list;\n    }\n\n    @Override\n    protected void onPostExecute(List&lt;Quiz_Category&gt; result) {\n        super.onPostExecute(result);\n        // In onPostExecute we check if the listener is valid\n        if (this.taskListener != null) {\n            this.taskListener.onFinished(result);\n        }\n    }\n</code></pre>\n<p>Sub category loader</p>\n<pre><code>public class SubCat_List_Loader extends AsyncTask&lt;String, String, List&lt;SubCategory&gt;&gt; {\n    String URL = Constant.getURLsubcategory();\n    private Gson gson = new Gson();\n\n    public interface TaskListener {\n        public void onFinished(List&lt;SubCategory&gt; result);\n    }\n\n    // This is the reference to the associated listener\n    private final TaskListener taskListener;\n\n    public SubCat_List_Loader(TaskListener listener) {\n        this.taskListener = listener;\n    }\n\n    @Override\n    protected List&lt;SubCategory&gt; doInBackground(String... params) {\n        ArrayList&lt;SubCategory&gt; list = new ArrayList&lt;SubCategory&gt;();\n        SubCategory[] f = null;\n        try {\n            URL url = new URL(URL);\n            HttpURLConnection con = (HttpURLConnection) url.openConnection();\n            Gson gson = new Gson();\n\n            JsonReader reader = new JsonReader(new InputStreamReader(con.getInputStream()));\n            f = gson.fromJson(reader, SubCategory[].class);\n\n            for (SubCategory flower : f) {\n                list.add(flower);\n            }\n\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n        return list;\n    }\n\n    @Override\n    protected void onPostExecute(List&lt;SubCategory&gt; result) {\n        super.onPostExecute(result);\n        // In onPostExecute we check if the listener is valid\n        if (this.taskListener != null) {\n            this.taskListener.onFinished(result);\n        }\n    }\n\n</code></pre>\n<p>i am trying to open subcategories in seprate recyclerview whenever user click on category. All subcategories have there own category_id.</p>\n<p>thankyou.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":20780824,"reputation":29149,"user_id":15261315,"display_name":"Chris"},"score":1,"creation_date":1697153862,"post_id":77284339,"comment_id":136247621,"body_markdown":"Your `break` is extraneous. If you return from the loop on any condition on the first iteration, why have a loop?","body":"Your <code>break</code> is extraneous. If you return from the loop on any condition on the first iteration, why have a loop?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":4,"creation_date":1697153912,"post_id":77284339,"comment_id":136247626,"body_markdown":"Not only extraneous but it should fail to compile. And the method doesn&#39;t return if `size &lt; 1`. Also, it never gets past the first iteration. What you want to do is remove the `else` and move the return after the loop.","body":"Not only extraneous but it should fail to compile. And the method doesn&#39;t return if <code>size &lt; 1</code>. Also, it never gets past the first iteration. What you want to do is remove the <code>else</code> and move the return after the loop."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":2,"creation_date":1697154406,"post_id":77284339,"comment_id":136247668,"body_markdown":"What will be returned if `Units` is empty (or `this.size == 0`)?","body":"What will be returned if <code>Units</code> is empty (or <code>this.size == 0</code>)?"},{"owner":{"account_id":29207582,"reputation":25,"user_id":22604159,"display_name":"Blue Apricot"},"score":0,"creation_date":1697155013,"post_id":77284339,"comment_id":136247718,"body_markdown":"@Chris Yeah I get why the break is extraneous but i dont understand what you meant by your second sentence. could you please explain?","body":"@Chris Yeah I get why the break is extraneous but i dont understand what you meant by your second sentence. could you please explain?"},{"owner":{"account_id":29207582,"reputation":25,"user_id":22604159,"display_name":"Blue Apricot"},"score":0,"creation_date":1697155106,"post_id":77284339,"comment_id":136247728,"body_markdown":"It should return -1 which figured out from the below comment. @Robert","body":"It should return -1 which figured out from the below comment. @Robert"},{"owner":{"account_id":29207582,"reputation":25,"user_id":22604159,"display_name":"Blue Apricot"},"score":0,"creation_date":1697155271,"post_id":77284339,"comment_id":136247744,"body_markdown":"@Chris Is there any other way to check all the elements in my list?","body":"@Chris Is there any other way to check all the elements in my list?"}],"answers":[{"comments":[{"owner":{"account_id":2482826,"reputation":13761,"user_id":2161954,"accept_rate":93,"display_name":"SnakeDoc"},"score":4,"creation_date":1697154242,"post_id":77284365,"comment_id":136247652,"body_markdown":"Give a person a fish... vs. teach a person to fish. Explain *why* OP&#39;s original fails to work like they expected, instead of just giving new code.","body":"Give a person a fish... vs. teach a person to fish. Explain <i>why</i> OP&#39;s original fails to work like they expected, instead of just giving new code."},{"owner":{"account_id":29207582,"reputation":25,"user_id":22604159,"display_name":"Blue Apricot"},"score":1,"creation_date":1697154849,"post_id":77284365,"comment_id":136247708,"body_markdown":"i understand what i was doing wrong. Thank you for the help","body":"i understand what i was doing wrong. Thank you for the help"}],"tags":[],"owner":{"account_id":22650899,"reputation":355,"user_id":16825573,"display_name":"Lejdi Prifti"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1697155131,"creation_date":1697154169,"answer_id":77284365,"question_id":77284339,"body_markdown":"Your code fails because the `return` statement is used both in the `if` and in the `else`. This would result in exiting in the first iteration, no matter the result. Moreover, the `break` is unnecessary since you use `return` already.\r\n\r\nYou could try this version as @shmosel also suggested. In this case, you return -1 only after checking all elements without finding a match.\r\n\r\n    public int indexOf(Unit g) {\r\n        for (int i = 0; i &lt; this.size; i++) {\r\n            if (g.equals(this.Units[i])) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }","title":"Java requiring a return statement when i&#39;m already providing one","body":"<p>Your code fails because the <code>return</code> statement is used both in the <code>if</code> and in the <code>else</code>. This would result in exiting in the first iteration, no matter the result. Moreover, the <code>break</code> is unnecessary since you use <code>return</code> already.</p>\n<p>You could try this version as @shmosel also suggested. In this case, you return -1 only after checking all elements without finding a match.</p>\n<pre><code>public int indexOf(Unit g) {\n    for (int i = 0; i &lt; this.size; i++) {\n        if (g.equals(this.Units[i])) {\n            return i;\n        }\n    }\n    return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1511115,"reputation":2926,"user_id":1413222,"display_name":"devwebcl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697154679,"creation_date":1697154679,"answer_id":77284388,"question_id":77284339,"body_markdown":"The problem is the loop (`for`). It won&#39;t be executed always, for instance, when `this.size=0`. Therefore, you must have a `return` at the end of the method.","title":"Java requiring a return statement when i&#39;m already providing one","body":"<p>The problem is the loop (<code>for</code>). It won't be executed always, for instance, when <code>this.size=0</code>. Therefore, you must have a <code>return</code> at the end of the method.</p>\n"},{"tags":[],"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697213294,"creation_date":1697155268,"answer_id":77284421,"question_id":77284339,"body_markdown":"The compiler complains because there is no `return` when you don&#39;t enter the loop.\r\n\r\nYou may say that this can never happen because you initialize `this.size` and `this.Units`, and that may be true, but the compiler doesn&#39;t see that; it only looks at that method and that doesn&#39;t have a return statement for all possible branches.\r\n\r\nIf you add `return -1;` in the loop, your program probably doesn&#39;t do what you expect. It will check the first array element, and if that&#39;s what you&#39;re looking for, it returns 0 (the position). So far, so good. If the first element is not what you are looking for, your code enters the `else` branch and returns -1, without even looking at any other element.\r\n\r\nTo really find an element, you can only `return` after you&#39;ve either found it or looked at all possible candidates. Remove the `else` branch and move the `return -1;` to after the loop.\r\n","title":"Java requiring a return statement when i&#39;m already providing one","body":"<p>The compiler complains because there is no <code>return</code> when you don't enter the loop.</p>\n<p>You may say that this can never happen because you initialize <code>this.size</code> and <code>this.Units</code>, and that may be true, but the compiler doesn't see that; it only looks at that method and that doesn't have a return statement for all possible branches.</p>\n<p>If you add <code>return -1;</code> in the loop, your program probably doesn't do what you expect. It will check the first array element, and if that's what you're looking for, it returns 0 (the position). So far, so good. If the first element is not what you are looking for, your code enters the <code>else</code> branch and returns -1, without even looking at any other element.</p>\n<p>To really find an element, you can only <code>return</code> after you've either found it or looked at all possible candidates. Remove the <code>else</code> branch and move the <code>return -1;</code> to after the loop.</p>\n"},{"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697217528,"post_id":77285058,"comment_id":136256945,"body_markdown":"@user85421, it&#39;s an _indexOf_ method.","body":"@user85421, it&#39;s an <i>indexOf</i> method."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697231065,"post_id":77285058,"comment_id":136258918,"body_markdown":"@user85421, for example, it&#39;s not _&quot;firstIndexOf&quot;_ or _&quot;lastIndexOf&quot;_.  You shouldn&#39;t expect to know the starting point, if the name only describes returning, the _&quot;indexOf&quot;_.","body":"@user85421, for example, it&#39;s not <i>&quot;firstIndexOf&quot;</i> or <i>&quot;lastIndexOf&quot;</i>.  You shouldn&#39;t expect to know the starting point, if the name only describes returning, the <i>&quot;indexOf&quot;</i>."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697171389,"creation_date":1697171389,"answer_id":77285058,"question_id":77284339,"body_markdown":"&gt; _&quot;... I am trying to make a function that iterates throught that list and takes an input Unit g and return the first index in which g first comes. If g is not found i am returning -1. ...&quot;_\r\n\r\nReturn the _&amp;minus;1_ value, after the _loop_.\r\n\r\n```java\r\npublic int indexOf(Unit g) {\r\n    for (int i = 0; i &lt; this.size; i++)\r\n        if (g.equals(this.Units[i])) return i;\r\n    return -1;\r\n}\r\n```\r\n\r\nYou could even use a _do-while loop_ here.\r\n\r\n```java\r\npublic int indexOf(Unit g) {\r\n    int i = Units.length - 1;\r\n    do if (g.equals(Units[i])) return i;\r\n    while (--i &gt;= 0);\r\n    return -1;\r\n}\r\n```","title":"Java requiring a return statement when i&#39;m already providing one","body":"<blockquote>\n<p><em>&quot;... I am trying to make a function that iterates throught that list and takes an input Unit g and return the first index in which g first comes. If g is not found i am returning -1. ...&quot;</em></p>\n</blockquote>\n<p>Return the <em>−1</em> value, after the <em>loop</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int indexOf(Unit g) {\n    for (int i = 0; i &lt; this.size; i++)\n        if (g.equals(this.Units[i])) return i;\n    return -1;\n}\n</code></pre>\n<p>You could even use a <em>do-while loop</em> here.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int indexOf(Unit g) {\n    int i = Units.length - 1;\n    do if (g.equals(Units[i])) return i;\n    while (--i &gt;= 0);\n    return -1;\n}\n</code></pre>\n"}],"owner":{"account_id":29207582,"reputation":25,"user_id":22604159,"display_name":"Blue Apricot"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":4,"score":-2,"last_activity_date":1697213294,"creation_date":1697153695,"question_id":77284339,"body_markdown":"I have made an array class called ListsofUnits which has private fields of a list of Units(object type) and int size. \r\nI am trying to make a function that iterates throught that list and takes an input Unit g and return the first index in which g first comes. If g is not found i am returning -1. \r\n\r\n         public int indexOf(Unit g) {\r\n             for (int i = 0; i &lt; this.size; i++){\r\n                 if (g.equals(this.Units[i])) {\r\n                     return i;\r\n                     break;\r\n                 } else {\r\n                     return -1;\r\n                 }\r\n             }\r\n         }\r\n\r\n\r\nI suspect there might be a syntax error as it keeps asking for a return statement when i already provided one for both cases. Also i would like stop the iteration at the first index where g occurs. I was hoping someone could tell me if this the right way or not. I cannot import any class.","title":"Java requiring a return statement when i&#39;m already providing one","body":"<p>I have made an array class called ListsofUnits which has private fields of a list of Units(object type) and int size.\nI am trying to make a function that iterates throught that list and takes an input Unit g and return the first index in which g first comes. If g is not found i am returning -1.</p>\n<pre><code>     public int indexOf(Unit g) {\n         for (int i = 0; i &lt; this.size; i++){\n             if (g.equals(this.Units[i])) {\n                 return i;\n                 break;\n             } else {\n                 return -1;\n             }\n         }\n     }\n</code></pre>\n<p>I suspect there might be a syntax error as it keeps asking for a return statement when i already provided one for both cases. Also i would like stop the iteration at the first index where g occurs. I was hoping someone could tell me if this the right way or not. I cannot import any class.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11653484,"reputation":12724,"user_id":8534008,"display_name":"GBlodgett"},"score":0,"creation_date":1559432529,"post_id":56411197,"comment_id":99419528,"body_markdown":"What should happen when there isn&#39;t one of those entered?","body":"What should happen when there isn&#39;t one of those entered?"},{"owner":{"account_id":16055963,"reputation":29,"user_id":11588322,"display_name":"Jessica Garnica"},"score":0,"creation_date":1559433031,"post_id":56411197,"comment_id":99419586,"body_markdown":"It gives me an error and says &quot; your program expects input&quot;","body":"It gives me an error and says &quot; your program expects input&quot;"},{"owner":{"account_id":11653484,"reputation":12724,"user_id":8534008,"display_name":"GBlodgett"},"score":0,"creation_date":1559433085,"post_id":56411197,"comment_id":99419595,"body_markdown":"No I mean what do you want to happen if you don&#39;t enter one of them?","body":"No I mean what do you want to happen if you don&#39;t enter one of them?"},{"owner":{"account_id":16055963,"reputation":29,"user_id":11588322,"display_name":"Jessica Garnica"},"score":0,"creation_date":1559433134,"post_id":56411197,"comment_id":99419600,"body_markdown":"Oh, if there is no middle name then it needs to print lastName, firstName","body":"Oh, if there is no middle name then it needs to print lastName, firstName"},{"owner":{"account_id":16055963,"reputation":29,"user_id":11588322,"display_name":"Jessica Garnica"},"score":0,"creation_date":1559433854,"post_id":56411197,"comment_id":99419668,"body_markdown":"I believe what it wants me to do is use indexOf(), to find the space and then again for the last name.","body":"I believe what it wants me to do is use indexOf(), to find the space and then again for the last name."},{"owner":{"account_id":4443626,"reputation":637,"user_id":3617557,"display_name":"Paul Dempsey"},"score":0,"creation_date":1678992351,"post_id":56411197,"comment_id":133645242,"body_markdown":"Some people&#39;s name is a single word -- no first/last. Some people&#39;s name includes Jr, Dr. III. Some people have many middle names, not just a single word. Some people&#39;s first name is two words (e.g. Billy Joe). The premise that you can split names this way is fundamentally broken.","body":"Some people&#39;s name is a single word -- no first/last. Some people&#39;s name includes Jr, Dr. III. Some people have many middle names, not just a single word. Some people&#39;s first name is two words (e.g. Billy Joe). The premise that you can split names this way is fundamentally broken."}],"answers":[{"comments":[{"owner":{"account_id":16055963,"reputation":29,"user_id":11588322,"display_name":"Jessica Garnica"},"score":0,"creation_date":1559436604,"post_id":56411399,"comment_id":99419950,"body_markdown":"I know that&#39;s the way to do it, but since I haven&#39;t been taught split yet, it won&#39;t work. But this is very similar to what I have so far, its just not pulling the middle name correctly, I&#39;ll update the top with what I have so you can see.","body":"I know that&#39;s the way to do it, but since I haven&#39;t been taught split yet, it won&#39;t work. But this is very similar to what I have so far, its just not pulling the middle name correctly, I&#39;ll update the top with what I have so you can see."},{"owner":{"account_id":14895917,"reputation":546,"user_id":10756238,"display_name":"Henrique Sabino"},"score":0,"creation_date":1559437375,"post_id":56411399,"comment_id":99420012,"body_markdown":"Oh, glad you found an answer yourself, I edited mine with a code that does not use `split()` btw.","body":"Oh, glad you found an answer yourself, I edited mine with a code that does not use <code>split()</code> btw."},{"owner":{"account_id":14895917,"reputation":546,"user_id":10756238,"display_name":"Henrique Sabino"},"score":0,"creation_date":1559437470,"post_id":56411399,"comment_id":99420020,"body_markdown":"@JessicaGarnica, I advise you to take your correct code from the question and post an answer with it, it would not make sense ask a question with the solution on it","body":"@JessicaGarnica, I advise you to take your correct code from the question and post an answer with it, it would not make sense ask a question with the solution on it"}],"tags":[],"owner":{"account_id":14895917,"reputation":546,"user_id":10756238,"display_name":"Henrique Sabino"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559437696,"creation_date":1559435856,"answer_id":56411399,"question_id":56411197,"body_markdown":"If you cannot use the `split()` you can read the first two entries with `scnr.next()` and then the third input will be the rest of the line, and then you can take a substring of it taking the space off.\r\n\r\n```\r\nimport java.util.Scanner; \r\n\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n\t\tScanner scnr = new Scanner(System.in);\r\n\r\n\t\tString name1;\r\n\t\tString name2;\r\n\t\tString name3;\r\n\r\n\t\tname1 = scnr.next();\r\n\t\tname2 = scnr.next();\r\n\t\tname3 = scnr.nextLine();\r\n\r\n\t\tif (name3.equals(&quot;&quot;)){\r\n\t\t\tSystem.out.println(name2 + &quot;, &quot; + name1);\r\n\t\t}\r\n\t\telse{\r\n            name3 = name3.substring(1);\r\n\t\t\tSystem.out.println(name3 + &quot;, &quot; + name1 + &quot; &quot; + name2.charAt(0) + &quot;.&quot;);\r\n\t\t}\r\n   }\r\n}\r\n```","title":"How to pull from a string into first, middle, and last name. And how to recognize when there is no middle name inputed","body":"<p>If you cannot use the <code>split()</code> you can read the first two entries with <code>scnr.next()</code> and then the third input will be the rest of the line, and then you can take a substring of it taking the space off.</p>\n\n<pre><code>import java.util.Scanner; \n\npublic class LabProgram {\n   public static void main(String[] args) {\n        Scanner scnr = new Scanner(System.in);\n\n        String name1;\n        String name2;\n        String name3;\n\n        name1 = scnr.next();\n        name2 = scnr.next();\n        name3 = scnr.nextLine();\n\n        if (name3.equals(\"\")){\n            System.out.println(name2 + \", \" + name1);\n        }\n        else{\n            name3 = name3.substring(1);\n            System.out.println(name3 + \", \" + name1 + \" \" + name2.charAt(0) + \".\");\n        }\n   }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1559440171,"post_id":56411654,"comment_id":99420304,"body_markdown":"Please don&#39;t provide code-dump homework answers; instead, suggest an approach such as &quot;look for the number of spaces in the string&quot;.","body":"Please don&#39;t provide code-dump homework answers; instead, suggest an approach such as &quot;look for the number of spaces in the string&quot;."}],"tags":[],"owner":{"account_id":16055963,"reputation":29,"user_id":11588322,"display_name":"Jessica Garnica"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1559439689,"creation_date":1559439689,"answer_id":56411654,"question_id":56411197,"body_markdown":"This is the correct code:    \r\n\r\n    import java.util.Scanner; \r\n\r\n    public class LabProgram {\r\n    public static void main(String[] args) {\r\n      Scanner scnr = new Scanner(System.in);\r\n      \r\n      String firstName;\r\n      String middleName;\r\n      String lastName;\r\n      String name;\r\n      \r\n      name = scnr.nextLine();\r\n      \r\n      int firstSpace = name.indexOf(&quot; &quot;);\r\n      firstName = name.substring(0, firstSpace);\r\n      \r\n      int secondSpace = name.indexOf(&quot; &quot;, firstSpace + 1);\r\n      \r\n      if (secondSpace &lt; 0) { \r\n         lastName = name.substring(firstSpace + 1);\r\n         System.out.println(lastName + &quot;, &quot; + firstName);\r\n      }\r\n      else {\r\n         middleName = name.substring(firstSpace, secondSpace);\r\n         lastName = name.substring(secondSpace + 1);\r\n         System.out.println(lastName + &quot;, &quot; + firstName + &quot; &quot; +     middleName.charAt(1) + &quot;.&quot;);\r\n      }\r\n      \r\n      \r\n      \r\n      }\r\n    }\r\n","title":"How to pull from a string into first, middle, and last name. And how to recognize when there is no middle name inputed","body":"<p>This is the correct code:    </p>\n\n<pre><code>import java.util.Scanner; \n\npublic class LabProgram {\npublic static void main(String[] args) {\n  Scanner scnr = new Scanner(System.in);\n\n  String firstName;\n  String middleName;\n  String lastName;\n  String name;\n\n  name = scnr.nextLine();\n\n  int firstSpace = name.indexOf(\" \");\n  firstName = name.substring(0, firstSpace);\n\n  int secondSpace = name.indexOf(\" \", firstSpace + 1);\n\n  if (secondSpace &lt; 0) { \n     lastName = name.substring(firstSpace + 1);\n     System.out.println(lastName + \", \" + firstName);\n  }\n  else {\n     middleName = name.substring(firstSpace, secondSpace);\n     lastName = name.substring(secondSpace + 1);\n     System.out.println(lastName + \", \" + firstName + \" \" +     middleName.charAt(1) + \".\");\n  }\n\n\n\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673761900,"creation_date":1673761900,"answer_id":75123193,"question_id":56411197,"body_markdown":"Be simple!!!\r\n\r\nAll you need here is split given string and count the words (2 or 3) and print the name in the reuired format.\r\n\r\n```java\r\nScanner scan = new Scanner(System.in);\r\nString[] arr = scan.nextLine().split(&quot;\\\\s+&quot;);\r\n\r\nif (arr.length == 3) {\r\n    String firstName = arr[0];\r\n    String middleName = arr[1];\r\n    String lastName = arr[2];\r\n    System.out.format(&quot;%s, %s, %s.\\n&quot;,\r\n                      lastName, firstName, middleName.charAt(0));\r\n} else if (arr.length == 2) {\r\n    String firstName = arr[0];\r\n    String lastName = arr[1];\r\n    System.out.format(&quot;%s, %s\\n&quot;, lastName, firstName);\r\n} else\r\n    System.err.println(&quot;Unknown name format&quot;);\r\n```","title":"How to pull from a string into first, middle, and last name. And how to recognize when there is no middle name inputed","body":"<p>Be simple!!!</p>\n<p>All you need here is split given string and count the words (2 or 3) and print the name in the reuired format.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner scan = new Scanner(System.in);\nString[] arr = scan.nextLine().split(&quot;\\\\s+&quot;);\n\nif (arr.length == 3) {\n    String firstName = arr[0];\n    String middleName = arr[1];\n    String lastName = arr[2];\n    System.out.format(&quot;%s, %s, %s.\\n&quot;,\n                      lastName, firstName, middleName.charAt(0));\n} else if (arr.length == 2) {\n    String firstName = arr[0];\n    String lastName = arr[1];\n    System.out.format(&quot;%s, %s\\n&quot;, lastName, firstName);\n} else\n    System.err.println(&quot;Unknown name format&quot;);\n</code></pre>\n"}],"owner":{"account_id":16055963,"reputation":29,"user_id":11588322,"display_name":"Jessica Garnica"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13650,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1697213230,"creation_date":1559432441,"question_id":56411197,"body_markdown":"I need to do the following:\r\n\r\nMany documents use a specific format for a person&#39;s name. Write a program whose input is: firstName middleName lastName, and whose output is: lastName, firstName middleInitial.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIt&#39;s through a textbook so I haven&#39;t been taught how to split strings. That&#39;s all I can find online, but that&#39;s not what the textbook is asking for. So far I&#39;ve been taught how to compare strings, get a strings length, branches, switch statements, string operations. \r\n```java\r\n    import java.util.Scanner; \r\n\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n      Scanner scnr = new Scanner(System.in);\r\n      \r\n      String firstName;\r\n      String middleName;\r\n      String lastName;\r\n      String name;\r\n      \r\n      name = scnr.nextLine();\r\n      \r\n      int firstSpace = name.indexOf(&quot; &quot;);\r\n      firstName = name.substring(0, firstSpace);\r\n      \r\n      int secondSpace = name.indexOf(&quot; &quot;, firstSpace + 1);\r\n      \r\n      if (secondSpace &lt; 0) { \r\n         lastName = name.substring(firstSpace);\r\n         System.out.println(lastName + &quot;, &quot; + firstName);\r\n      }\r\n      else {\r\n         middleName = name.substring(firstSpace, secondSpace);\r\n         lastName = name.substring(secondSpace);\r\n         System.out.println(lastName + &quot;, &quot; + firstName + &quot; &quot; + middleName.charAt(0) + &quot;.&quot;);\r\n      }\r\n      \r\n   }\r\n}\r\n\r\n```\r\n\r\nThis is what I have so far. \r\n\r\n  [1]: https://i.stack.imgur.com/gSGA3.png","title":"How to pull from a string into first, middle, and last name. And how to recognize when there is no middle name inputed","body":"<p>I need to do the following:</p>\n\n<p>Many documents use a specific format for a person's name. Write a program whose input is: firstName middleName lastName, and whose output is: lastName, firstName middleInitial.</p>\n\n<p><a href=\"https://i.stack.imgur.com/gSGA3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gSGA3.png\" alt=\"enter image description here\"></a></p>\n\n<p>It's through a textbook so I haven't been taught how to split strings. That's all I can find online, but that's not what the textbook is asking for. So far I've been taught how to compare strings, get a strings length, branches, switch statements, string operations. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    import java.util.Scanner; \n\npublic class LabProgram {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n\n      String firstName;\n      String middleName;\n      String lastName;\n      String name;\n\n      name = scnr.nextLine();\n\n      int firstSpace = name.indexOf(\" \");\n      firstName = name.substring(0, firstSpace);\n\n      int secondSpace = name.indexOf(\" \", firstSpace + 1);\n\n      if (secondSpace &lt; 0) { \n         lastName = name.substring(firstSpace);\n         System.out.println(lastName + \", \" + firstName);\n      }\n      else {\n         middleName = name.substring(firstSpace, secondSpace);\n         lastName = name.substring(secondSpace);\n         System.out.println(lastName + \", \" + firstName + \" \" + middleName.charAt(0) + \".\");\n      }\n\n   }\n}\n\n</code></pre>\n\n<p>This is what I have so far. </p>\n"},{"tags":["java","spring","freemarker"],"comments":[{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1443739026,"post_id":32897859,"comment_id":53624846,"body_markdown":"And `line 47, column 37` is...?","body":"And <code>line 47, column 37</code> is...?"},{"owner":{"account_id":3827248,"reputation":103,"user_id":3173806,"accept_rate":0,"display_name":"user3173806"},"score":0,"creation_date":1443739178,"post_id":32897859,"comment_id":53624883,"body_markdown":"line 47 is:&lt;#list itemMap&gt;","body":"line 47 is:&lt;#list itemMap&gt;"},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1443739239,"post_id":32897859,"comment_id":53624895,"body_markdown":"As this information is fairly relevant to the question I would suggest you edit it into the answer - perhaps annotate that particular like of code.","body":"As this information is fairly relevant to the question I would suggest you edit it into the answer - perhaps annotate that particular like of code."},{"owner":{"account_id":3827248,"reputation":103,"user_id":3173806,"accept_rate":0,"display_name":"user3173806"},"score":0,"creation_date":1443739619,"post_id":32897859,"comment_id":53624993,"body_markdown":"it is in the question, maybe not very visible but it is above the code block :/","body":"it is in the question, maybe not very visible but it is above the code block :/"},{"owner":{"account_id":3827248,"reputation":103,"user_id":3173806,"accept_rate":0,"display_name":"user3173806"},"score":0,"creation_date":1443739671,"post_id":32897859,"comment_id":53625014,"body_markdown":"as stated in my question I was following form 2:&lt;#list sequence&gt;\n    Part executed once if we have more than 0 items\n    &lt;#items as item&gt;\n        Part repeated for each item\n    &lt;/#items&gt;\n    Part executed once if we have more than 0 items\n&lt;#else&gt;\n    Part executed when there are 0 items\n&lt;/#list&gt;","body":"as stated in my question I was following form 2:&lt;#list sequence&gt;     Part executed once if we have more than 0 items     &lt;#items as item&gt;         Part repeated for each item     &lt;/#items&gt;     Part executed once if we have more than 0 items &lt;#else&gt;     Part executed when there are 0 items &lt;/#list&gt;"},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1443739726,"post_id":32897859,"comment_id":53625024,"body_markdown":"Okay, sorry - are you running the newest version?","body":"Okay, sorry - are you running the newest version?"},{"owner":{"account_id":3827248,"reputation":103,"user_id":3173806,"accept_rate":0,"display_name":"user3173806"},"score":0,"creation_date":1443739947,"post_id":32897859,"comment_id":53625089,"body_markdown":"im not seeing a version in my dependencies, it says \t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\n\t\t&lt;/dependency&gt;","body":"im not seeing a version in my dependencies, it says \t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt; \t\t&lt;/dependency&gt;"},{"owner":{"account_id":3827248,"reputation":103,"user_id":3173806,"accept_rate":0,"display_name":"user3173806"},"score":0,"creation_date":1443740138,"post_id":32897859,"comment_id":53625141,"body_markdown":"thats probably the problem right there :/","body":"thats probably the problem right there :/"},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1443740192,"post_id":32897859,"comment_id":53625156,"body_markdown":"If you&#39;re inheriting from Spring Boot Parent or using the BOM then the version is set automagically - that would then depend on your Boot version.","body":"If you&#39;re inheriting from Spring Boot Parent or using the BOM then the version is set automagically - that would then depend on your Boot version."},{"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"score":0,"creation_date":1686950068,"post_id":32897859,"comment_id":134874167,"body_markdown":"Please check `#list` syntax in the official documentation. Sorry, I don&#39;t see why anyone else would look for why `#item?keys` doesn&#39;t work.","body":"Please check <code>#list</code> syntax in the official documentation. Sorry, I don&#39;t see why anyone else would look for why <code>#item?keys</code> doesn&#39;t work."}],"answers":[{"comments":[{"owner":{"account_id":3827248,"reputation":103,"user_id":3173806,"accept_rate":0,"display_name":"user3173806"},"score":0,"creation_date":1443782878,"post_id":32898467,"comment_id":53639089,"body_markdown":"I have upgraded to the latest version and updated the errors in the template that you noted, but it doesnt appear to like &lt;#items?keys as key&gt; because it returns: Syntax error in template #items is an existing directive, but the tag is malformed.","body":"I have upgraded to the latest version and updated the errors in the template that you noted, but it doesnt appear to like &lt;#items?keys as key&gt; because it returns: Syntax error in template #items is an existing directive, but the tag is malformed."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1686798156,"post_id":32898467,"comment_id":134849718,"body_markdown":"Or you can just put `&lt;freemarker.version&gt;2.3.32&lt;/freemarker.version&gt;` or whichever version in the `&lt;properties&gt;` section of your `pom.xml`.","body":"Or you can just put <code>&lt;freemarker.version&gt;2.3.32&lt;&#47;freemarker.version&gt;</code> or whichever version in the <code>&lt;properties&gt;</code> section of your <code>pom.xml</code>."}],"tags":[],"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443742968,"creation_date":1443742968,"answer_id":32898467,"question_id":32897859,"body_markdown":"Certainly it&#39;s because you are using a FreeMarker version before 2.3.23. Before 2.3.23, you couldn&#39;t omit the `as` from the `#list` tag. (You also have some messy parts later like `&lt;#itemMap?keys as key&gt;` or `&lt;/#listy?keys&gt;`, but I assume you can fix those.)\r\n\r\nTo check the FreeMarker version, try `${.version}` (after removing the syntactically wrong parts). To increase the FreeMarker version coming from the Spring BOM, override it in your POM&#39;s `dependencyManagement` section. Something like:\r\n\r\n    &lt;dependencyManagement&gt;\r\n      ...\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.freemarker&lt;/groupId&gt;\r\n        &lt;artifactId&gt;freemarker&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.23&lt;/version&gt;\r\n      &lt;dependency&gt;\r\n      ...\r\n    &lt;/dependencyManagement&gt;\r\n","title":"freemarker template syntax spring boot","body":"<p>Certainly it's because you are using a FreeMarker version before 2.3.23. Before 2.3.23, you couldn't omit the <code>as</code> from the <code>#list</code> tag. (You also have some messy parts later like <code>&lt;#itemMap?keys as key&gt;</code> or <code>&lt;/#listy?keys&gt;</code>, but I assume you can fix those.)</p>\n\n<p>To check the FreeMarker version, try <code>${.version}</code> (after removing the syntactically wrong parts). To increase the FreeMarker version coming from the Spring BOM, override it in your POM's <code>dependencyManagement</code> section. Something like:</p>\n\n<pre><code>&lt;dependencyManagement&gt;\n  ...\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.freemarker&lt;/groupId&gt;\n    &lt;artifactId&gt;freemarker&lt;/artifactId&gt;\n    &lt;version&gt;2.3.23&lt;/version&gt;\n  &lt;dependency&gt;\n  ...\n&lt;/dependencyManagement&gt;\n</code></pre>\n"}],"owner":{"account_id":3827248,"reputation":103,"user_id":3173806,"accept_rate":0,"display_name":"user3173806"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8699,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697213230,"creation_date":1443738763,"question_id":32897859,"body_markdown":"I have a springboot application that creates a hashmap. I want to create a table that has one header and multiple rows (one for each value in the map). The following code returns an ISE: \r\n\r\n&gt; There was an unexpected error (type=Internal Server Error,\r\n&gt; status=500). Failed to parse FreeMarker template for URL\r\n&gt; [toDoListView.ftl]; nested exception is\r\n&gt; freemarker.core.ParseException: Syntax error in template\r\n&gt; &quot;toDoListView.ftl&quot; in line 47, column 37: Encountered &quot;&gt;&quot;, but was\r\n&gt; expecting one of: &quot;..&quot; &lt;DOT_DOT_LESS&gt; &quot;..*&quot; &quot;as&quot; &quot;.&quot; &quot;[&quot; &quot;(&quot; &quot;?&quot; &quot;!&quot;\r\n&gt; &lt;TERMINATING_EXCLAM&gt; &quot;??&quot; &quot;+&quot; &quot;-&quot; &quot;*&quot; &quot;/&quot; &quot;%&quot; &quot;!=&quot; &quot;=&quot; &quot;==&quot; &quot;&gt;=&quot;\r\n&gt; &lt;ESCAPED_GTE&gt; &quot;&gt;&quot; &lt;ESCAPED_GT&gt; &lt;LESS_THAN_EQUALS&gt; &lt;LESS_THAN&gt; &lt;AND&gt;\r\n&gt; &lt;OR&gt;\r\n\r\nline 47 is:&lt;#list itemMap&gt;\r\n\r\n    &lt;#if itemMap??&gt;\r\n        &lt;table class=&quot;table table-bordered&quot;&gt;\r\n            &lt;#list itemMap&gt;\r\n                &lt;thead&gt;\r\n                    &lt;tr&gt;\r\n                        &lt;th&gt;&lt;/th&gt;\r\n                        &lt;th&gt;Item1&lt;/th&gt;\r\n                        &lt;th&gt;Item2&lt;/th&gt;\r\n                        &lt;th&gt;Item3&lt;/th&gt;\r\n                    &lt;/tr&gt;\r\n                &lt;/thead&gt;\r\n            &lt;#item?keys as key&gt;\r\n                &lt;#if !itemMap?values[key_index].done&gt;\r\n                    &lt;tbody&gt;\r\n                        &lt;tr&gt;\r\n                            &lt;td id=&quot;checkbox_column&quot; width=&quot;40&quot;&gt;\r\n                                &lt;input type=&quot;checkbox&quot; name=&quot;im&quot; value=&quot;${key}&quot;&gt;\r\n                            &lt;/td&gt;\r\n                            &lt;#if itemMap?values[key_index].color == &quot;BLUE&quot;&gt;\r\n                                &lt;td&gt;${itemMap?values[key_index].blue}&lt;/td&gt;\r\n                            &lt;#elseif itemMap?values[key_index].color == &quot;RED&quot;&gt;\r\n                                &lt;td&gt;${itemMap?values[key_index].red}&lt;/td&gt; \r\n                            &lt;/#if&gt;\r\n                        &lt;/tr&gt;\r\n                    &lt;/tbody&gt;\r\n                &lt;/#if&gt; \r\n            &lt;/#item?keys&gt;\r\n        &lt;/table&gt;\r\n    &lt;#else&gt;\r\n        No Items!\r\n    &lt;/#list&gt;\r\n\r\nI am not sure what is causing this error. I was trying to follow the example listed here under Form 2: http://freemarker.org/docs/ref_directive_list.html","title":"freemarker template syntax spring boot","body":"<p>I have a springboot application that creates a hashmap. I want to create a table that has one header and multiple rows (one for each value in the map). The following code returns an ISE: </p>\n\n<blockquote>\n  <p>There was an unexpected error (type=Internal Server Error,\n  status=500). Failed to parse FreeMarker template for URL\n  [toDoListView.ftl]; nested exception is\n  freemarker.core.ParseException: Syntax error in template\n  \"toDoListView.ftl\" in line 47, column 37: Encountered \">\", but was\n  expecting one of: \"..\"  \"..<em>\" \"as\" \".\" \"[\" \"(\" \"?\" \"!\"\n   \"??\" \"+\" \"-\" \"</em>\" \"/\" \"%\" \"!=\" \"=\" \"==\" \">=\"\n   \">\"    \n  </p>\n</blockquote>\n\n<p>line 47 is:&lt;#list itemMap></p>\n\n<pre><code>&lt;#if itemMap??&gt;\n    &lt;table class=\"table table-bordered\"&gt;\n        &lt;#list itemMap&gt;\n            &lt;thead&gt;\n                &lt;tr&gt;\n                    &lt;th&gt;&lt;/th&gt;\n                    &lt;th&gt;Item1&lt;/th&gt;\n                    &lt;th&gt;Item2&lt;/th&gt;\n                    &lt;th&gt;Item3&lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/thead&gt;\n        &lt;#item?keys as key&gt;\n            &lt;#if !itemMap?values[key_index].done&gt;\n                &lt;tbody&gt;\n                    &lt;tr&gt;\n                        &lt;td id=\"checkbox_column\" width=\"40\"&gt;\n                            &lt;input type=\"checkbox\" name=\"im\" value=\"${key}\"&gt;\n                        &lt;/td&gt;\n                        &lt;#if itemMap?values[key_index].color == \"BLUE\"&gt;\n                            &lt;td&gt;${itemMap?values[key_index].blue}&lt;/td&gt;\n                        &lt;#elseif itemMap?values[key_index].color == \"RED\"&gt;\n                            &lt;td&gt;${itemMap?values[key_index].red}&lt;/td&gt; \n                        &lt;/#if&gt;\n                    &lt;/tr&gt;\n                &lt;/tbody&gt;\n            &lt;/#if&gt; \n        &lt;/#item?keys&gt;\n    &lt;/table&gt;\n&lt;#else&gt;\n    No Items!\n&lt;/#list&gt;\n</code></pre>\n\n<p>I am not sure what is causing this error. I was trying to follow the example listed here under Form 2: <a href=\"http://freemarker.org/docs/ref_directive_list.html\" rel=\"nofollow\">http://freemarker.org/docs/ref_directive_list.html</a></p>\n"},{"tags":["java","input","overloading"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1340727720,"post_id":11211639,"comment_id":14721117,"body_markdown":"Side comment - Java conventions -&gt; class names in CamelCase","body":"Side comment - Java conventions -&gt; class names in CamelCase"}],"answers":[{"tags":[],"owner":{"account_id":1306910,"reputation":3662,"user_id":1255713,"accept_rate":94,"display_name":"Frank Visaggio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340727761,"creation_date":1340727761,"answer_id":11211734,"question_id":11211639,"body_markdown":"So what you want to do is make it so the input is a string. \r\n\r\nso the user can input 9, or 9.0 or if you want to get crazy maybe nine. \r\n\r\nthen you would parse the string and cast it to an int or a double. then call either of the overloaded methods. \r\n\r\n\r\nhttp://www.java2s.com/Code/Java/Language-Basics/Convertstringtoint.htm\r\n\r\nthat shows you how to convert a string to an int","title":"overloading method user input","body":"<p>So what you want to do is make it so the input is a string. </p>\n\n<p>so the user can input 9, or 9.0 or if you want to get crazy maybe nine. </p>\n\n<p>then you would parse the string and cast it to an int or a double. then call either of the overloaded methods. </p>\n\n<p><a href=\"http://www.java2s.com/Code/Java/Language-Basics/Convertstringtoint.htm\" rel=\"nofollow\">http://www.java2s.com/Code/Java/Language-Basics/Convertstringtoint.htm</a></p>\n\n<p>that shows you how to convert a string to an int</p>\n"},{"tags":[],"owner":{"account_id":1254987,"reputation":858,"user_id":1214649,"display_name":"David Cheung"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340727798,"creation_date":1340727798,"answer_id":11211744,"question_id":11211639,"body_markdown":"You can overload with different type parameters for example String, or even some object. This would be a precaution in case the programmer using your rectangle method passed in the wrong parameter type, the method won&#39;t break.","title":"overloading method user input","body":"<p>You can overload with different type parameters for example String, or even some object. This would be a precaution in case the programmer using your rectangle method passed in the wrong parameter type, the method won't break.</p>\n"},{"tags":[],"owner":{"account_id":1355206,"reputation":33312,"user_id":1293744,"accept_rate":44,"display_name":"Kumar Vivek Mitra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340728670,"creation_date":1340728670,"answer_id":11211982,"question_id":11211639,"body_markdown":"**Its better to handle the checking of the input in the program, rather than letting the user bother about it**.\r\n\r\nEg:\r\n\r\n`1. First let the user give values as String.`\r\n\r\n   \r\n\r\n    Scanner scan = new Scanner(System.in);\r\n       String val_1 = scan.nextLine();\r\n       String val_2 = scan.nextLine();\r\n\r\n\r\n`2. Now Check the type using this custom method. Place this method in the class mtdovrld,`\r\n   `Call this method after taking user input, and from here call the rect() method.`\r\n\r\n**Method to Validate:**\r\n\r\n  \r\n\r\n    public void chkAndSet(String str1, String str2)\r\n        {\r\n    \r\n           try{\r\n    \r\n                 rect(Integer.parseInt(str1), Integer.parseInt(str2));\r\n    \r\n    \r\n              }\r\n            catch(NumberFormatException ex)\r\n              {\r\n    \r\n                 rect(Double.parseDouble(str1), Double.parseDouble(str2));\r\n    \r\n              }\r\n        }","title":"overloading method user input","body":"<p><strong>Its better to handle the checking of the input in the program, rather than letting the user bother about it</strong>.</p>\n\n<p>Eg:</p>\n\n<p><code>1. First let the user give values as String.</code></p>\n\n<pre><code>Scanner scan = new Scanner(System.in);\n   String val_1 = scan.nextLine();\n   String val_2 = scan.nextLine();\n</code></pre>\n\n<p><code>2. Now Check the type using this custom method. Place this method in the class mtdovrld,</code>\n   <code>Call this method after taking user input, and from here call the rect() method.</code></p>\n\n<p><strong>Method to Validate:</strong></p>\n\n<pre><code>public void chkAndSet(String str1, String str2)\n    {\n\n       try{\n\n             rect(Integer.parseInt(str1), Integer.parseInt(str2));\n\n\n          }\n        catch(NumberFormatException ex)\n          {\n\n             rect(Double.parseDouble(str1), Double.parseDouble(str2));\n\n          }\n    }\n</code></pre>\n"}],"owner":{"account_id":1602566,"reputation":1,"user_id":1483342,"display_name":"Francis Bautista"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9865,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1697213230,"creation_date":1340727478,"question_id":11211639,"body_markdown":"I am trying to use method overloading to find the area of a rectangle. Only thing is the values have to be entered by the user. But if it has to accepted from the user, shouldn&#39;t we know the datatype of his input? And if we do, then the purpose of overloading becomes useless, because I already know the datatype.\r\n\r\nCan you guys help me out?\r\n\r\nYou can add onto this code:  \r\n\r\n    import java.io.*;\r\n    import java.lang.*;\r\n    import java.util.*;\r\n    \r\n    class mtdovrld\r\n    {\r\n       void rect(int a,int b)\r\n       {\r\n          int result = a*b;\r\n          System.out.println(result);\r\n       }\r\n    \r\n       void rect(double a,double b)\r\n       {\r\n          double result = a*b;\r\n          System.out.println(result);\r\n       }\r\n    }\r\n    \r\n    class rectarea\r\n    {\r\n       public static void main(String[] args)throws IOException\r\n       {\r\n          mtdovrld zo = new mtdovrld();\r\n    \r\n          Scanner input= new Scanner(System.in);\r\n    \r\n          System.out.println(&quot;Please enter values:&quot;);\r\n    \r\n          // Here is the problem, how can I accept values from user where I do not have to specify datatype and will still be accepted by method?\r\n          double a = input.nextDouble();\r\n          double b = input.nextDouble();\r\n    \r\n          zo.rect(a,b);\r\n    \r\n       }\r\n    }","title":"overloading method user input","body":"<p>I am trying to use method overloading to find the area of a rectangle. Only thing is the values have to be entered by the user. But if it has to accepted from the user, shouldn't we know the datatype of his input? And if we do, then the purpose of overloading becomes useless, because I already know the datatype.</p>\n\n<p>Can you guys help me out?</p>\n\n<p>You can add onto this code:  </p>\n\n<pre><code>import java.io.*;\nimport java.lang.*;\nimport java.util.*;\n\nclass mtdovrld\n{\n   void rect(int a,int b)\n   {\n      int result = a*b;\n      System.out.println(result);\n   }\n\n   void rect(double a,double b)\n   {\n      double result = a*b;\n      System.out.println(result);\n   }\n}\n\nclass rectarea\n{\n   public static void main(String[] args)throws IOException\n   {\n      mtdovrld zo = new mtdovrld();\n\n      Scanner input= new Scanner(System.in);\n\n      System.out.println(\"Please enter values:\");\n\n      // Here is the problem, how can I accept values from user where I do not have to specify datatype and will still be accepted by method?\n      double a = input.nextDouble();\n      double b = input.nextDouble();\n\n      zo.rect(a,b);\n\n   }\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":6244293,"reputation":3872,"user_id":4856814,"display_name":"murali selenium"},"score":0,"creation_date":1697203555,"post_id":77285953,"comment_id":136254033,"body_markdown":"post the full exception...","body":"post the full exception..."}],"answers":[{"comments":[{"owner":{"account_id":8557095,"reputation":820,"user_id":6412212,"display_name":"Loich"},"score":0,"creation_date":1697630069,"post_id":77289221,"comment_id":136303421,"body_markdown":"This is not an answer. Ask your questions in form of a comment.","body":"This is not an answer. Ask your questions in form of a comment."}],"tags":[],"owner":{"account_id":17107958,"reputation":17,"user_id":12379548,"display_name":"Suman"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697213152,"creation_date":1697213152,"answer_id":77289221,"question_id":77285953,"body_markdown":"Your Question requires more details. \r\nwhen you say &quot; *and on second try it can&#39;t find element with id nav-hamburger-menu,* &quot;\r\n\r\nare you able to see one element when you verify through dev tools and script run is failing with an exception?  or your element html values are modified and you are unable to use same locator to identify it uniquely?\r\n\r\nYou can also post the html snippet for before and after your settings update.","title":"Selenium Java can&#39;t find same element on second try","body":"<p>Your Question requires more details.\nwhen you say &quot; <em>and on second try it can't find element with id nav-hamburger-menu,</em> &quot;</p>\n<p>are you able to see one element when you verify through dev tools and script run is failing with an exception?  or your element html values are modified and you are unable to use same locator to identify it uniquely?</p>\n<p>You can also post the html snippet for before and after your settings update.</p>\n"}],"owner":{"account_id":29662298,"reputation":1,"user_id":22733603,"display_name":"Jonas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697213152,"creation_date":1697183381,"question_id":77285953,"body_markdown":"I have loop where it interacts with page by changing some settings and saving them and trying head back to same setting page, and on second try it can&#39;t find element with id nav-hamburger-menu, although it didnt change after settings has changed. what could be an issue?\r\n\r\nHere is the code:\r\n\r\n    for(int i = 0; i &lt; 3; i++) {\r\n    \t    \tSystem.out.print(&quot; Prasisuko &quot;);\r\n    \t    \tWebElement openMenu = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;a[id=&#39;nav-hamburger-menu&#39;]&quot;)));\r\n    \t\t    openMenu.click();\r\n    \t\t    \r\n    \t\t    WebElement changeLang = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;a#hmenu-icp-language.hmenu-item&quot;)));\r\n    \t\t    changeLang.click();\r\n    \t\t    \r\n    \t\t    WebElement enUsRadioButton = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input[name=&#39;lop&#39;][value=&#39;en_US&#39;]&quot;)));\r\n    \t\t    System.out.print(enUsRadioButton.isSelected());\r\n    \r\n    //\t        // Check if the &quot;en_US&quot; radio button is checked\r\n    \t        if (enUsRadioButton.isSelected()) {\r\n    \t        \tWebElement deDERadioButton = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input[name=&#39;lop&#39;][value=&#39;de_DE&#39;]&quot;)));\r\n    \t        \t((JavascriptExecutor) driver).executeScript(&quot;arguments[0].click();&quot;, deDERadioButton);\r\n    \t        } else {\r\n    \t        \tenUsRadioButton.click();\r\n    \t        }\r\n    \t        \r\n    \t        WebElement spanElement = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;span#icp-currency-dropdown-selected-item-prompt&quot;)));\r\n    \t        spanElement.click();\r\n    \r\n    \t        WebElement aElement = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;a#icp-currency-dropdown_19[data-value*=&#39;EUR&#39;]&quot;)));\r\n    \t        aElement.click();\r\n    \t        \r\n    \t        WebElement saveSettingsButton = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input.a-button-input&quot;)));\r\n    \t        saveSettingsButton.click();\r\n    \t    }\r\n\r\n\r\nI&#39;ve tried many ways finding that element, but same thing that on second try it fails\r\n","title":"Selenium Java can&#39;t find same element on second try","body":"<p>I have loop where it interacts with page by changing some settings and saving them and trying head back to same setting page, and on second try it can't find element with id nav-hamburger-menu, although it didnt change after settings has changed. what could be an issue?</p>\n<p>Here is the code:</p>\n<pre><code>for(int i = 0; i &lt; 3; i++) {\n            System.out.print(&quot; Prasisuko &quot;);\n            WebElement openMenu = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;a[id='nav-hamburger-menu']&quot;)));\n            openMenu.click();\n            \n            WebElement changeLang = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;a#hmenu-icp-language.hmenu-item&quot;)));\n            changeLang.click();\n            \n            WebElement enUsRadioButton = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input[name='lop'][value='en_US']&quot;)));\n            System.out.print(enUsRadioButton.isSelected());\n\n//          // Check if the &quot;en_US&quot; radio button is checked\n            if (enUsRadioButton.isSelected()) {\n                WebElement deDERadioButton = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input[name='lop'][value='de_DE']&quot;)));\n                ((JavascriptExecutor) driver).executeScript(&quot;arguments[0].click();&quot;, deDERadioButton);\n            } else {\n                enUsRadioButton.click();\n            }\n            \n            WebElement spanElement = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;span#icp-currency-dropdown-selected-item-prompt&quot;)));\n            spanElement.click();\n\n            WebElement aElement = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;a#icp-currency-dropdown_19[data-value*='EUR']&quot;)));\n            aElement.click();\n            \n            WebElement saveSettingsButton = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input.a-button-input&quot;)));\n            saveSettingsButton.click();\n        }\n</code></pre>\n<p>I've tried many ways finding that element, but same thing that on second try it fails</p>\n"},{"tags":["java","maven","tomcat","war","classloading"],"comments":[{"owner":{"account_id":1806969,"reputation":102,"user_id":1643891,"display_name":"Sup19"},"score":0,"creation_date":1697205250,"post_id":77287797,"comment_id":136254371,"body_markdown":"Have you tried grep-ing with **imagio** instead? Also, have you tracked down if any specific API call is causing this error?","body":"Have you tried grep-ing with <b>imagio</b> instead? Also, have you tracked down if any specific API call is causing this error?"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1697207482,"post_id":77287797,"comment_id":136254830,"body_markdown":"The not found class is a javax and the github docs warns that some classes may exist in other deps. Also it says that [same functionality is provided by java 9](https://docs.oracle.com/javase/9/docs/api/javax/imageio/package-summary.html). try adding `-verbose:class` to the jvm options to spot which jar is used to load the class.","body":"The not found class is a javax and the github docs warns that some classes may exist in other deps. Also it says that <a href=\"https://docs.oracle.com/javase/9/docs/api/javax/imageio/package-summary.html\" rel=\"nofollow noreferrer\">same functionality is provided by java 9</a>. try adding <code>-verbose:class</code> to the jvm options to spot which jar is used to load the class."},{"owner":{"account_id":3528560,"reputation":31,"user_id":2948900,"display_name":"K&#229;re Jonsson"},"score":0,"creation_date":1697212988,"post_id":77287797,"comment_id":136256077,"body_markdown":"Grepping for imag makes no more hits in the dependency tree than the ones described.","body":"Grepping for imag makes no more hits in the dependency tree than the ones described."},{"owner":{"account_id":3528560,"reputation":31,"user_id":2948900,"display_name":"K&#229;re Jonsson"},"score":0,"creation_date":1697213182,"post_id":77287797,"comment_id":136256120,"body_markdown":"And grepping for jai adds\n\njavax.media:jai_core:jar:1.1.3:compile","body":"And grepping for jai adds  javax.media:jai_core:jar:1.1.3:compile"}],"owner":{"account_id":3528560,"reputation":31,"user_id":2948900,"display_name":"K&#229;re Jonsson"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697213037,"creation_date":1697200576,"question_id":77287797,"body_markdown":"Upon deployment my application works but after some time it happens that there are `java.lang.NoClassDefFoundError at javax/imageio/impl/IIOInvalidTreeException at \r\ncom.github.jaiimageio.impl.plugins.tiff.TIFFImageWriterSpi.createWriterInstance`\r\n\r\nIt is a maven built war file deployed in Tomcat so there is no tampering with the supplied jar-files. The time it works before the problem appears vary between the occasions. By doing\r\n\r\n`$ mvn dependency:tree`\r\n\r\nand grep-ing for &quot;image&quot; I can with certainity say that the only jar-files included are \r\n\r\n`com.github.jai-imageio:jai-imageio-core:jar:1.4.0\r\ncom.github.jai-imageio:jai-imageio-jpeg2000:jar:1.4.0`\r\n\r\nI would like to know if this should be an impossible situation? Could this happen with errors by programming? There are also considerations in the deployment environment but I do not want to point to those before I have done some work with my part of this.\r\n\r\nI am mostly dissappointed with the lack of determinism of this.","title":"Java/Tomcat. After some time there are exceptions of Class loading","body":"<p>Upon deployment my application works but after some time it happens that there are <code>java.lang.NoClassDefFoundError at javax/imageio/impl/IIOInvalidTreeException at  com.github.jaiimageio.impl.plugins.tiff.TIFFImageWriterSpi.createWriterInstance</code></p>\n<p>It is a maven built war file deployed in Tomcat so there is no tampering with the supplied jar-files. The time it works before the problem appears vary between the occasions. By doing</p>\n<p><code>$ mvn dependency:tree</code></p>\n<p>and grep-ing for &quot;image&quot; I can with certainity say that the only jar-files included are</p>\n<p><code>com.github.jai-imageio:jai-imageio-core:jar:1.4.0 com.github.jai-imageio:jai-imageio-jpeg2000:jar:1.4.0</code></p>\n<p>I would like to know if this should be an impossible situation? Could this happen with errors by programming? There are also considerations in the deployment environment but I do not want to point to those before I have done some work with my part of this.</p>\n<p>I am mostly dissappointed with the lack of determinism of this.</p>\n"},{"tags":["java","spring","hibernate","maven"],"answers":[{"tags":[],"owner":{"account_id":2794745,"reputation":46,"user_id":13197555,"display_name":"Springinjecter"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1672160808,"creation_date":1672160773,"answer_id":74932171,"question_id":71077641,"body_markdown":"spring-boot-2.x uses javax.validation Annotations and so you need an implementation for javax.validation.spi.ValidationProvider.\r\nhibernate-validator:7.0.2 has moved from javax.validation to jakarta.validation and for that it is not downward compatible.\r\n\r\nIt depends on your project now:\r\nupgrade to spring-boot 3.x ( also upgrade from javax.* to jakarta.* - this might be a huge upgrade )\r\nor downgrade hibernate-validator to version 6.x\r\n\r\nI hope I have explained it well :-)","title":"Hibernate 7.0.2: javax.validation.NoProviderFoundException","body":"<p>spring-boot-2.x uses javax.validation Annotations and so you need an implementation for javax.validation.spi.ValidationProvider.\nhibernate-validator:7.0.2 has moved from javax.validation to jakarta.validation and for that it is not downward compatible.</p>\n<p>It depends on your project now:\nupgrade to spring-boot 3.x ( also upgrade from javax.* to jakarta.* - this might be a huge upgrade )\nor downgrade hibernate-validator to version 6.x</p>\n<p>I hope I have explained it well :-)</p>\n"},{"tags":[],"owner":{"account_id":172198,"reputation":5240,"user_id":628006,"accept_rate":90,"display_name":"р&#252;ффп"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697212937,"creation_date":1697212937,"answer_id":77289190,"question_id":71077641,"body_markdown":"`Springinjecter`&#39;s answer is correct, but now I think it is better to rely only on Spring-Boot which also has a dedicated validator: \r\n \r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI prefer that option instead relying on other third party libraries.\r\n","title":"Hibernate 7.0.2: javax.validation.NoProviderFoundException","body":"<p><code>Springinjecter</code>'s answer is correct, but now I think it is better to rely only on Spring-Boot which also has a dedicated validator:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I prefer that option instead relying on other third party libraries.</p>\n"}],"owner":{"account_id":18358975,"reputation":332,"user_id":13371454,"display_name":"Vladimir Shadrin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2571,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74932171,"answer_count":2,"score":2,"last_activity_date":1697212937,"creation_date":1644571009,"question_id":71077641,"body_markdown":"I&#39;m using spring-boot-starter-web:jar:2.6.2 in my project, this jar uses hibernate-validator:6.2.0.Final. Recently we decided to move to Hibernate 7.0.2.Final, so I added the following maven config:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;version&gt;${rest.starter.version}&lt;/version&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n    &lt;version&gt;7.0.2.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nBut now I get the following error during integration testing or run: \r\n&gt;javax.validation.NoProviderFoundException: Unable to create a Configuration, because no Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.\r\n\r\nWhy does it happen and how to fix it?","title":"Hibernate 7.0.2: javax.validation.NoProviderFoundException","body":"<p>I'm using spring-boot-starter-web:jar:2.6.2 in my project, this jar uses hibernate-validator:6.2.0.Final. Recently we decided to move to Hibernate 7.0.2.Final, so I added the following maven config:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;version&gt;${rest.starter.version}&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n    &lt;version&gt;7.0.2.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But now I get the following error during integration testing or run:</p>\n<blockquote>\n<p>javax.validation.NoProviderFoundException: Unable to create a Configuration, because no Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.</p>\n</blockquote>\n<p>Why does it happen and how to fix it?</p>\n"},{"tags":["java","apache-camel"],"owner":{"account_id":21804,"reputation":7207,"user_id":53300,"accept_rate":53,"display_name":"DaveH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697212421,"creation_date":1697212421,"question_id":77289147,"body_markdown":"I have a Spring Boot Camel application that is consuming messages from an SQS Queue. The queue is set up to extend the Message Visibility.\r\n\r\nDue to an as-yet un-diagnosed problem it seems like a number of messages have had their Message Visibility Timeout extended to be greater than the maximum allowed by SQS ( 12 hours ). I see this in my log, with this message\r\n\r\n`Total VisibilityTimeout for the message is beyond the limit [43200 seconds]. (Service: AmazonSQS; Status Code: 400; Error Code: InvalidParameterValue; Request ID: 55988753-658c-562b-8c04-daf37c9efc70)`\r\n\r\nI can then see that the Camel component continues trying the extend the Message Visibility Timeout, and it looks like it&#39;s going to keep trying the extend it for ever. These requests result in the following exception message in my logs.\r\n\r\n`ReceiptHandle is invalid. Reason: The receipt handle has expired. `\r\n\r\nAs far as I can see, the route is using the default Camel error handler.\r\n\r\nI know that I need to understand why these messages aren&#39;t being processed correctly by my consumer, but should I expect Camel to react ike it is doing?","title":"Camel SQS continues trying to extend Message Visibility Timeout even though the VisibilityTimeout is greater than the maximum","body":"<p>I have a Spring Boot Camel application that is consuming messages from an SQS Queue. The queue is set up to extend the Message Visibility.</p>\n<p>Due to an as-yet un-diagnosed problem it seems like a number of messages have had their Message Visibility Timeout extended to be greater than the maximum allowed by SQS ( 12 hours ). I see this in my log, with this message</p>\n<p><code>Total VisibilityTimeout for the message is beyond the limit [43200 seconds]. (Service: AmazonSQS; Status Code: 400; Error Code: InvalidParameterValue; Request ID: 55988753-658c-562b-8c04-daf37c9efc70)</code></p>\n<p>I can then see that the Camel component continues trying the extend the Message Visibility Timeout, and it looks like it's going to keep trying the extend it for ever. These requests result in the following exception message in my logs.</p>\n<p><code>ReceiptHandle is invalid. Reason: The receipt handle has expired. </code></p>\n<p>As far as I can see, the route is using the default Camel error handler.</p>\n<p>I know that I need to understand why these messages aren't being processed correctly by my consumer, but should I expect Camel to react ike it is doing?</p>\n"},{"tags":["java","pdf","itext","flying-saucer"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697206124,"post_id":77287894,"comment_id":136254549,"body_markdown":"Does this answer your question? [Using Flying Saucer to Render Images to PDF In Memory](https://stackoverflow.com/questions/11477065/using-flying-saucer-to-render-images-to-pdf-in-memory)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11477065/using-flying-saucer-to-render-images-to-pdf-in-memory\">Using Flying Saucer to Render Images to PDF In Memory</a>"},{"owner":{"account_id":1076957,"reputation":1015,"user_id":1074881,"accept_rate":57,"display_name":"ezhil"},"score":0,"creation_date":1697211721,"post_id":77287894,"comment_id":136255796,"body_markdown":"no, seems it is different case. I am trying to add baseurl using setUserAgentCallback() but is not helping.","body":"no, seems it is different case. I am trying to add baseurl using setUserAgentCallback() but is not helping."}],"owner":{"account_id":1076957,"reputation":1015,"user_id":1074881,"accept_rate":57,"display_name":"ezhil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697211667,"creation_date":1697201547,"question_id":77287894,"body_markdown":" I want to make a PDF for my webpage using  Flying Saucer to generate a PDF. With this below code I am able to generate a PDF but without any style and css. \r\n\r\nHTML source code,\r\n\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/jquery-ui.aeeab65fc7671696263825aac469a40d.css&quot; type=&quot;text/css&quot;&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/site.bc5eb8ab7795d16a0a599fbaef2adfe6.css&quot; type=&quot;text/css&quot;&gt;\r\n    &lt;script src=&quot;js/sidebar.974c35aeb63e852d3fd100cc1c3ab02b.js&quot;&gt;&lt;/script&gt;\r\n\r\nI am trying to set my base URL using renderer.getSharedContext().setUserAgentCallback(new NaiveUserAgent(baseUrl)) but it is not working.\r\n\r\nJava code\r\n\r\n    try {\r\n            // Define the URL\r\n            String urlcheck = &quot;http://localhost:8888/index.html&quot;;\r\n           \r\n            // Establish a URL connection\r\n            HttpURLConnection connection = (HttpURLConnection) new URL(urlcheck).openConnection();\r\n            connection.setRequestMethod(&quot;GET&quot;);\r\n    \r\n            // Set up Basic Authentication with username &quot;admin&quot; and password &quot;admin&quot;\r\n            String username = &quot;admin&quot;;\r\n            String password = &quot;admin&quot;;\r\n            String authString = username + &quot;:&quot; + password;\r\n            String encodedAuthString = Base64.getEncoder().encodeToString(authString.getBytes());\r\n    \r\n            connection.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + encodedAuthString);\r\n    \r\n            // Check the response code (200 indicates success)\r\n            int responseCode = connection.getResponseCode();\r\n            if (responseCode == 200) {\r\n    \r\n              // Get the input stream from the connection\r\n              InputStream urlInputStream = connection.getInputStream();\r\n    \r\n              LOG.info(&quot;PDF START &quot;);\r\n              // Create an ITextRenderer instance\r\n              ITextRenderer renderer = new ITextRenderer();\r\n    \r\n              // Convert the InputStream to a String\r\n              String htmlContent = convertInputStreamToString(urlInputStream);\r\n              HtmlCleaner cleaner = new HtmlCleaner();\r\n              TagNode rootTagNode = cleaner.clean(htmlContent);\r\n    \r\n              // set up properties for the serializer (optional, see online docs)\r\n              CleanerProperties cleanerProperties = cleaner.getProperties();\r\n    \r\n              // use the getAsString method on an XmlSerializer class\r\n              XmlSerializer xmlSerializer = new PrettyXmlSerializer(cleanerProperties);\r\n              String cleanedHtml = xmlSerializer.getAsString(rootTagNode);\r\n              LOG.info(&quot;cleanedHtml::&quot;+cleanedHtml);\r\n    \r\n              // Set the HTML content as the document\r\n              renderer.setDocumentFromString(cleanedHtml);\r\n    \r\n              // Render to PDF\r\n              String baseUrl = &quot;http://localhost:8888&quot;;\r\n              renderer.getSharedContext().setUserAgentCallback(new NaiveUserAgent(baseUrl)); // Error\r\n    \r\n              ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n              renderer.layout();\r\n              renderer.createPDF(outputStream);\r\n              renderer.finishPDF();\r\n    \r\n            } else {\r\n              LOG.error(&quot;Failed to retrieve URL content. Response code: &quot; + responseCode);\r\n            }\r\n          } ","title":"CSS and Image is not rendering in generated PDF - Flying Saucer","body":"<p>I want to make a PDF for my webpage using  Flying Saucer to generate a PDF. With this below code I am able to generate a PDF but without any style and css.</p>\n<p>HTML source code,</p>\n<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/jquery-ui.aeeab65fc7671696263825aac469a40d.css&quot; type=&quot;text/css&quot;&gt;\n&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/site.bc5eb8ab7795d16a0a599fbaef2adfe6.css&quot; type=&quot;text/css&quot;&gt;\n&lt;script src=&quot;js/sidebar.974c35aeb63e852d3fd100cc1c3ab02b.js&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>I am trying to set my base URL using renderer.getSharedContext().setUserAgentCallback(new NaiveUserAgent(baseUrl)) but it is not working.</p>\n<p>Java code</p>\n<pre><code>try {\n        // Define the URL\n        String urlcheck = &quot;http://localhost:8888/index.html&quot;;\n       \n        // Establish a URL connection\n        HttpURLConnection connection = (HttpURLConnection) new URL(urlcheck).openConnection();\n        connection.setRequestMethod(&quot;GET&quot;);\n\n        // Set up Basic Authentication with username &quot;admin&quot; and password &quot;admin&quot;\n        String username = &quot;admin&quot;;\n        String password = &quot;admin&quot;;\n        String authString = username + &quot;:&quot; + password;\n        String encodedAuthString = Base64.getEncoder().encodeToString(authString.getBytes());\n\n        connection.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + encodedAuthString);\n\n        // Check the response code (200 indicates success)\n        int responseCode = connection.getResponseCode();\n        if (responseCode == 200) {\n\n          // Get the input stream from the connection\n          InputStream urlInputStream = connection.getInputStream();\n\n          LOG.info(&quot;PDF START &quot;);\n          // Create an ITextRenderer instance\n          ITextRenderer renderer = new ITextRenderer();\n\n          // Convert the InputStream to a String\n          String htmlContent = convertInputStreamToString(urlInputStream);\n          HtmlCleaner cleaner = new HtmlCleaner();\n          TagNode rootTagNode = cleaner.clean(htmlContent);\n\n          // set up properties for the serializer (optional, see online docs)\n          CleanerProperties cleanerProperties = cleaner.getProperties();\n\n          // use the getAsString method on an XmlSerializer class\n          XmlSerializer xmlSerializer = new PrettyXmlSerializer(cleanerProperties);\n          String cleanedHtml = xmlSerializer.getAsString(rootTagNode);\n          LOG.info(&quot;cleanedHtml::&quot;+cleanedHtml);\n\n          // Set the HTML content as the document\n          renderer.setDocumentFromString(cleanedHtml);\n\n          // Render to PDF\n          String baseUrl = &quot;http://localhost:8888&quot;;\n          renderer.getSharedContext().setUserAgentCallback(new NaiveUserAgent(baseUrl)); // Error\n\n          ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n          renderer.layout();\n          renderer.createPDF(outputStream);\n          renderer.finishPDF();\n\n        } else {\n          LOG.error(&quot;Failed to retrieve URL content. Response code: &quot; + responseCode);\n        }\n      } \n</code></pre>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9791,"page":126,"page_size":100}
