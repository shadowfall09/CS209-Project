{"items":[{"tags":["java","spring","spring-boot","gradle","java-8"],"owner":{"account_id":7527372,"reputation":920,"user_id":5717021,"accept_rate":65,"display_name":"sromit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701359100,"creation_date":1701359100,"question_id":77579775,"body_markdown":"I have a spring boot(2.1.9) gradle project which is trying to build by downloading a jar file from the artifactory but it is telling it is not able to find the jar file in the following location. But when I click on the link given `https://artifactory.build.ge.com/ARJLY/com/ge/digital/oa/common/oa-common/3.0.0/oa-common-3.0.0.jar` I am able to download the jar file. Why gradle is not able to download while building..anything I am doing wrong...\r\ngradle version 6.8\r\n\r\nMy Artifactory path:\r\n\r\n    ARJLY\r\n     com/ge\r\n      digital/oa\r\n       common\r\n         oa-common\r\n          3.0.0\r\n           oa-common-3.0.0.jar\r\n\r\nMy build.gradle file\r\n\r\n    repositories {\r\n    \tmavenCentral()\r\n    \tmavenLocal()\r\n    \tmaven {\r\n    \t\turl &quot;${artifactory_contextUrl}&quot;\r\n    \t\tcredentials {\r\n    \t\t\tusername &quot;${artifactory_user}&quot;\r\n    \t\t\tpassword &quot;${artifactory_password}&quot;\r\n    \t\t}\r\n    \t}\r\n    }\r\n    dependencies {\r\n    \r\n    \timplementation(&#39;com.ge.digital.oa.common:oa-common:3.0.0&#39;) {\r\n    \t\texclude module: &#39;slf4j-log4j12&#39;\r\n    \t\texclude group: &#39;io.micrometer&#39;, module: &#39;micrometer-core&#39;\r\n    \t}\r\n    \timplementation(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n    \timplementation(&#39;org.springframework.boot:spring-boot-starter-jdbc&#39;)\r\n    \timplementation(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n    \timplementation(&#39;org.springframework.boot:spring-boot-starter-cloud-connectors&#39;)\r\n\r\n\r\nError in gradle build\r\n\r\n    $ gradle clean build\r\n    &gt; Task :compileJava FAILED\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:compileJava&#39;.\r\n    &gt; Could not resolve all files for configuration &#39;:compileClasspath&#39;.\r\n       &gt; Could not find oa-common-3.0.0.jar (com.ge.digital.oa.common:oa-common:3.0.0).\r\n         Searched in the following locations:\r\n             https://artifactory.build.ge.com/ARJLY/com/ge/digital/oa/common/oa-common/3.0.0/oa-common-3.0.0.jar\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    Deprecated Gradle features were used in this build, making it incompatible with Gradle 7.0.\r\n    Use &#39;--warning-mode all&#39; to show the individual deprecation warnings.\r\n    See https://docs.gradle.org/6.8/userguide/command_line_interface.html#sec:command_line_warnings\r\n    \r\n    BUILD FAILED in 2s\r\n    3 actionable tasks: 3 executed\r\n\r\n\r\n","title":"Gradle build failing to find jar","body":"<p>I have a spring boot(2.1.9) gradle project which is trying to build by downloading a jar file from the artifactory but it is telling it is not able to find the jar file in the following location. But when I click on the link given <code>https://artifactory.build.ge.com/ARJLY/com/ge/digital/oa/common/oa-common/3.0.0/oa-common-3.0.0.jar</code> I am able to download the jar file. Why gradle is not able to download while building..anything I am doing wrong...\ngradle version 6.8</p>\n<p>My Artifactory path:</p>\n<pre><code>ARJLY\n com/ge\n  digital/oa\n   common\n     oa-common\n      3.0.0\n       oa-common-3.0.0.jar\n</code></pre>\n<p>My build.gradle file</p>\n<pre><code>repositories {\n    mavenCentral()\n    mavenLocal()\n    maven {\n        url &quot;${artifactory_contextUrl}&quot;\n        credentials {\n            username &quot;${artifactory_user}&quot;\n            password &quot;${artifactory_password}&quot;\n        }\n    }\n}\ndependencies {\n\n    implementation('com.ge.digital.oa.common:oa-common:3.0.0') {\n        exclude module: 'slf4j-log4j12'\n        exclude group: 'io.micrometer', module: 'micrometer-core'\n    }\n    implementation('org.springframework.boot:spring-boot-starter-data-jpa')\n    implementation('org.springframework.boot:spring-boot-starter-jdbc')\n    implementation('org.springframework.boot:spring-boot-starter-web')\n    implementation('org.springframework.boot:spring-boot-starter-cloud-connectors')\n</code></pre>\n<p>Error in gradle build</p>\n<pre><code>$ gradle clean build\n&gt; Task :compileJava FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':compileJava'.\n&gt; Could not resolve all files for configuration ':compileClasspath'.\n   &gt; Could not find oa-common-3.0.0.jar (com.ge.digital.oa.common:oa-common:3.0.0).\n     Searched in the following locations:\n         https://artifactory.build.ge.com/ARJLY/com/ge/digital/oa/common/oa-common/3.0.0/oa-common-3.0.0.jar\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 7.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee https://docs.gradle.org/6.8/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD FAILED in 2s\n3 actionable tasks: 3 executed\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7035840,"reputation":33810,"user_id":5389997,"display_name":"Shadow"},"score":4,"creation_date":1701012279,"post_id":77552031,"comment_id":136719592,"body_markdown":"The error message is quite clear in this particular case: you do not have the necessary access rights to create the backup file.","body":"The error message is quite clear in this particular case: you do not have the necessary access rights to create the backup file."},{"owner":{"account_id":7491983,"reputation":499,"user_id":5693350,"accept_rate":44,"display_name":"David"},"score":0,"creation_date":1701012697,"post_id":77552031,"comment_id":136719648,"body_markdown":"@Shadow When I create the backup file manually via the command line, it works just fine. Why wouldn&#39;t it work when I try to implement the same in a java program. By the way, it worked just fine on Linux","body":"@Shadow When I create the backup file manually via the command line, it works just fine. Why wouldn&#39;t it work when I try to implement the same in a java program. By the way, it worked just fine on Linux"},{"owner":{"account_id":7035840,"reputation":33810,"user_id":5389997,"display_name":"Shadow"},"score":1,"creation_date":1701013058,"post_id":77552031,"comment_id":136719682,"body_markdown":"In linux the user running the backup has the necessary access. In windows apparently not","body":"In linux the user running the backup has the necessary access. In windows apparently not"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1701016009,"post_id":77552031,"comment_id":136720003,"body_markdown":"What do you mean &quot;it worked just fine in Linux&quot;? Linux does not have a &quot;C:&quot; drive","body":"What do you mean &quot;it worked just fine in Linux&quot;? Linux does not have a &quot;C:&quot; drive"},{"owner":{"account_id":7491983,"reputation":499,"user_id":5693350,"accept_rate":44,"display_name":"David"},"score":0,"creation_date":1701027327,"post_id":77552031,"comment_id":136721241,"body_markdown":"@knittl On Linux you specify the path to mysqldump command just like you do on Windows. i.e Process process = Runtime.getRuntime().exec(&quot;mysqldump -uroot  -ppassword --add-drop-database -B database_name -r&quot;+filename);You also omit the .replace(&#39;\\\\&#39;,&#39;//) and it will work just fine.","body":"@knittl On Linux you specify the path to mysqldump command just like you do on Windows. i.e Process process = Runtime.getRuntime().exec(&quot;mysqldump -uroot  -ppassword --add-drop-database -B database_name -r&quot;+filename);You also omit the .replace(&#39;\\\\&#39;,&#39;//) and it will work just fine."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1701363038,"post_id":77552031,"comment_id":136769016,"body_markdown":"@David You try to write a file in `C:/backup.sql` (or `C:\\backup.sql`). You usually can&#39;t write directly in `C:\\`, you have to specify a different target directory to generate your file in.","body":"@David You try to write a file in <code>C:&#47;backup.sql</code> (or <code>C:\\backup.sql</code>). You usually can&#39;t write directly in `C:`, you have to specify a different target directory to generate your file in."},{"owner":{"account_id":7491983,"reputation":499,"user_id":5693350,"accept_rate":44,"display_name":"David"},"score":0,"creation_date":1701452861,"post_id":77552031,"comment_id":136781641,"body_markdown":"@Progman I already worked around the issue (added the details on the question). What is not possible is when you attempt to to save in a directory e.g. Desktop and the machine name happens to have a space e.g. User Name. It brings about the permission denied mesage","body":"@Progman I already worked around the issue (added the details on the question). What is not possible is when you attempt to to save in a directory e.g. Desktop and the machine name happens to have a space e.g. User Name. It brings about the permission denied mesage"}],"owner":{"account_id":7491983,"reputation":499,"user_id":5693350,"accept_rate":44,"display_name":"David"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701359009,"creation_date":1701008101,"question_id":77552031,"body_markdown":"I have come up with java code to backup MariaDB database using mysqldump on Windows 11 operating system. I have used JFileChooser to select location for backup and a Backup button to start the process once the path is selected. The backup however does not happen on clicking the Backup button. The following error is displayed on netbeans. How do I get around it because the code seems fine.\r\n\r\nEdit: \r\nI got it to work by making use of the registry editor. Open registry editor and navigate to Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\Current\\Version\\Polices\\System \r\n\r\n[![registry editor][1]][1]\r\n\r\n[1]: https://i.stack.imgur.com/5Lvkx.png\r\n\r\nRight click on EnableLUA and select modify.\r\nEnter 0 in the Value data field and click OK.\r\n[![dword 32][2]][2]\r\n\r\n\r\n[2]: https://i.stack.imgur.com/g1O5Q.png\r\n\r\nHowever, if you happen to select a path e.g. Desktop and the username happens to have a space, it still gives the error message. How do I deal with that?\r\n\r\n````\r\nC:\\Program Files/MariaDB 10.6/bin/mysqldump.exe: Can&#39;t create/write to file &#39;C:/backup.sql&#39; (Errcode: 13 &quot;Permission denied&quot;)   \r\n\r\n````\r\n````\r\nString location = null;\r\nString filename;\r\n````\r\n````\r\n//code to select backup location\r\nprivate void btnBrowseActionPerformed(java.awt.event.ActionEvent evt) {                                          \r\n        JFileChooser chooser = new JFileChooser();\r\n        chooser.showOpenDialog(this);\r\n        try{\r\n            File file = chooser.getSelectedFile();\r\n            location = file.getAbsolutePath();\r\n            location = location.replace(&#39;\\\\&#39;,&#39;/&#39;);\r\n            filename = location+&quot;.sql&quot;;\r\n            txtFileName.setText(filename);\r\n        }catch(Exception e){\r\n            JOptionPane.showMessageDialog(this,e);\r\n        }\r\n    }          \r\n\r\n//code to backup\r\nprivate void btnBackupActionPerformed(java.awt.event.ActionEvent evt) {                                          \r\n        Process process = null;\r\n        try{          \r\n            process = Runtime.getRuntime().exec(&quot;C:/Program Files/MariaDB 10.6/bin/mysqldump.exe -uroot -ppassword --add-drop-database -B database_name -r &quot;+filename);\r\n            int exitCode = process.waitFor();\r\n            \r\n            InputStream errorStream = process.getErrorStream();\r\n            byte[] buffer = new byte[errorStream.available()];\r\n            errorStream.read(buffer);\r\n\r\n            String str = new String(buffer);\r\n            System.out.println(str);\r\n            \r\n            if(exitCode == 0){\r\n                JOptionPane.showMessageDialog(this, &quot;Backup created&quot;);\r\n            }\r\n            else{\r\n                JOptionPane.showMessageDialog(this, &quot;Backup failed\\n &quot;+exitCode+&quot;&quot;);\r\n            }\r\n        }catch(HeadlessException | IOException | InterruptedException e){\r\n           JOptionPane.showMessageDialog(this, e);\r\n        }\r\n    } \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5Lvkx.png\r\n  [2]: https://i.stack.imgur.com/g1O5Q.png","title":"How do you backup MariaDB database using mysqldump in java?","body":"<p>I have come up with java code to backup MariaDB database using mysqldump on Windows 11 operating system. I have used JFileChooser to select location for backup and a Backup button to start the process once the path is selected. The backup however does not happen on clicking the Backup button. The following error is displayed on netbeans. How do I get around it because the code seems fine.</p>\n<p>Edit:\nI got it to work by making use of the registry editor. Open registry editor and navigate to Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\Current\\Version\\Polices\\System</p>\n<p><a href=\"https://i.stack.imgur.com/5Lvkx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Lvkx.png\" alt=\"registry editor\" /></a></p>\n<p>Right click on EnableLUA and select modify.\nEnter 0 in the Value data field and click OK.\n<a href=\"https://i.stack.imgur.com/g1O5Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g1O5Q.png\" alt=\"dword 32\" /></a></p>\n<p>However, if you happen to select a path e.g. Desktop and the username happens to have a space, it still gives the error message. How do I deal with that?</p>\n<pre><code>C:\\Program Files/MariaDB 10.6/bin/mysqldump.exe: Can't create/write to file 'C:/backup.sql' (Errcode: 13 &quot;Permission denied&quot;)   \n\n</code></pre>\n<pre><code>String location = null;\nString filename;\n</code></pre>\n<pre><code>//code to select backup location\nprivate void btnBrowseActionPerformed(java.awt.event.ActionEvent evt) {                                          \n        JFileChooser chooser = new JFileChooser();\n        chooser.showOpenDialog(this);\n        try{\n            File file = chooser.getSelectedFile();\n            location = file.getAbsolutePath();\n            location = location.replace('\\\\','/');\n            filename = location+&quot;.sql&quot;;\n            txtFileName.setText(filename);\n        }catch(Exception e){\n            JOptionPane.showMessageDialog(this,e);\n        }\n    }          \n\n//code to backup\nprivate void btnBackupActionPerformed(java.awt.event.ActionEvent evt) {                                          \n        Process process = null;\n        try{          \n            process = Runtime.getRuntime().exec(&quot;C:/Program Files/MariaDB 10.6/bin/mysqldump.exe -uroot -ppassword --add-drop-database -B database_name -r &quot;+filename);\n            int exitCode = process.waitFor();\n            \n            InputStream errorStream = process.getErrorStream();\n            byte[] buffer = new byte[errorStream.available()];\n            errorStream.read(buffer);\n\n            String str = new String(buffer);\n            System.out.println(str);\n            \n            if(exitCode == 0){\n                JOptionPane.showMessageDialog(this, &quot;Backup created&quot;);\n            }\n            else{\n                JOptionPane.showMessageDialog(this, &quot;Backup failed\\n &quot;+exitCode+&quot;&quot;);\n            }\n        }catch(HeadlessException | IOException | InterruptedException e){\n           JOptionPane.showMessageDialog(this, e);\n        }\n    } \n\n\n  [1]: https://i.stack.imgur.com/5Lvkx.png\n  [2]: https://i.stack.imgur.com/g1O5Q.png\n</code></pre>\n"},{"tags":["java","bash","maven","debian","java-home"],"comments":[{"owner":{"account_id":7298037,"reputation":500,"user_id":10660307,"display_name":" RichardFeynman"},"score":0,"creation_date":1701363597,"post_id":77579729,"comment_id":136769118,"body_markdown":"what does `mvn -version` show?","body":"what does <code>mvn -version</code> show?"},{"owner":{"account_id":16810420,"reputation":3,"user_id":12153566,"display_name":"David Unger"},"score":0,"creation_date":1701385471,"post_id":77579729,"comment_id":136772628,"body_markdown":"Hello Feynman, when i try mvn -version i get the same error : \n\nowntoomanymonster@penguin:~/my-first-rest-app$ mvn -version\nThe JAVA_HOME environment variable is not defined correctly\nThis environment variable is needed to run this program\nNB: JAVA_HOME should point to a JDK not a JRE  \n\nMaven was installed earlier via apt.\nWhen i run apt install maven i receive this info and version:\nowntoomanymonster@penguin:~/my-first-rest-app$ sudo apt install maven\n...\nmaven is already the newest version (3.6.3-5).\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. thx in advance","body":"Hello Feynman, when i try mvn -version i get the same error :   owntoomanymonster@penguin:~/my-first-rest-app$ mvn -version The JAVA_HOME environment variable is not defined correctly This environment variable is needed to run this program NB: JAVA_HOME should point to a JDK not a JRE    Maven was installed earlier via apt. When i run apt install maven i receive this info and version: owntoomanymonster@penguin:~/my-first-rest-app$ sudo apt install maven ... maven is already the newest version (3.6.3-5). 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. thx in advance"},{"owner":{"account_id":7298037,"reputation":500,"user_id":10660307,"display_name":" RichardFeynman"},"score":0,"creation_date":1701444017,"post_id":77579729,"comment_id":136779993,"body_markdown":"For some reason JAVA_HOME seems to be correct but maven has `/bin/java` incorrectly added at the end.  Not sure how that happens as to my knowledge Maven should just be using JAVA_HOME","body":"For some reason JAVA_HOME seems to be correct but maven has <code>&#47;bin&#47;java</code> incorrectly added at the end.  Not sure how that happens as to my knowledge Maven should just be using JAVA_HOME"}],"owner":{"account_id":16810420,"reputation":3,"user_id":12153566,"display_name":"David Unger"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701358733,"creation_date":1701358661,"question_id":77579729,"body_markdown":"I started my first back-end course and performed all operations according to the tutors manual.\r\nWhen I tried to initialize the project with ./mvnw spring-boot:run\r\n\r\nI got an error:\r\n\r\n```\r\nowntoomanymonster@penguin:~/my-first-rest-app$ ./mvnw spring-boot:run\r\nError: JAVA_HOME is not defined correctly.\r\n  We cannot execute /owntoomanymonster/lib/jvm/java-11-openjdk-arm64/bin/java\r\n```\r\n\r\n\r\nhere is my java-home variable:\r\n\r\n```\r\nowntoomanymonster@penguin:~/my-first-rest-app$ echo $JAVA_HOME\r\n/owntoomanymonster/lib/jvm/java-11-openjdk-arm64\r\n\r\n```\r\n\r\n\r\nhere is a snapshot of my jvm directory:\r\n\r\n\r\n```\r\nowntoomanymonster@penguin:/lib/jvm$ ls\r\ndefault-java  java-1.11.0-openjdk-arm64  java-11-openjdk-arm64  openjdk-11\r\n\r\n```\r\nand here a snapshot of my bashrc:\r\n\r\n GNU nano 5.4                                                                                /home/owntoomanymonster/.bashrc                                                                                          \r\n```\r\nif [ -f ~/.bash_aliases ]; then\r\n    . ~/.bash_aliases\r\nfi\r\n\r\n# enable programmable completion features (you don&#39;t need to enable\r\n# this, if it&#39;s already enabled in /etc/bash.bashrc and /etc/profile\r\n# sources /etc/bash.bashrc).\r\nif ! shopt -oq posix; then\r\n  if [ -f /usr/share/bash-completion/bash_completion ]; then\r\n    . /usr/share/bash-completion/bash_completion\r\n  elif [ -f /etc/bash_completion ]; then\r\n    . /etc/bash_completion\r\n  fi\r\nfi\r\n\r\nexport NVM_DIR=&quot;$HOME/.config/nvm&quot;\r\n[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/nvm.sh&quot;  # This loads nvm\r\n[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/bash_completion&quot;  # This loads nvm bash_completion\r\n\r\n export JAVA_HOME=/owntoomanymonster/lib/jvm/java-11-openjdk-arm64\r\n export PATH=$PATH:$JAVA_HOME/bin\r\n```\r\n\r\nI have no more idea what to do to get this fixed. I hope anybody knows how to set the Java-home correctly?\r\n\r\nKindest David\r\n\r\n\r\n\r\n\r\n\r\n1. Manually defined the java-home variable.\r\n\r\n2. Updated the bashrc config\r\n\r\n3. changed from link to real path  link: java-1.11.0-openjdk-arm64 real path   to real path: java-11-openjdk-arm64","title":"Cant start Maven project due to problems with Java_Home Variable Error: JAVA_HOME is not defined correctly","body":"<p>I started my first back-end course and performed all operations according to the tutors manual.\nWhen I tried to initialize the project with ./mvnw spring-boot:run</p>\n<p>I got an error:</p>\n<pre><code>owntoomanymonster@penguin:~/my-first-rest-app$ ./mvnw spring-boot:run\nError: JAVA_HOME is not defined correctly.\n  We cannot execute /owntoomanymonster/lib/jvm/java-11-openjdk-arm64/bin/java\n</code></pre>\n<p>here is my java-home variable:</p>\n<pre><code>owntoomanymonster@penguin:~/my-first-rest-app$ echo $JAVA_HOME\n/owntoomanymonster/lib/jvm/java-11-openjdk-arm64\n\n</code></pre>\n<p>here is a snapshot of my jvm directory:</p>\n<pre><code>owntoomanymonster@penguin:/lib/jvm$ ls\ndefault-java  java-1.11.0-openjdk-arm64  java-11-openjdk-arm64  openjdk-11\n\n</code></pre>\n<p>and here a snapshot of my bashrc:</p>\n<p>GNU nano 5.4                                                                                /home/owntoomanymonster/.bashrc</p>\n<pre><code>if [ -f ~/.bash_aliases ]; then\n    . ~/.bash_aliases\nfi\n\n# enable programmable completion features (you don't need to enable\n# this, if it's already enabled in /etc/bash.bashrc and /etc/profile\n# sources /etc/bash.bashrc).\nif ! shopt -oq posix; then\n  if [ -f /usr/share/bash-completion/bash_completion ]; then\n    . /usr/share/bash-completion/bash_completion\n  elif [ -f /etc/bash_completion ]; then\n    . /etc/bash_completion\n  fi\nfi\n\nexport NVM_DIR=&quot;$HOME/.config/nvm&quot;\n[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/nvm.sh&quot;  # This loads nvm\n[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/bash_completion&quot;  # This loads nvm bash_completion\n\n export JAVA_HOME=/owntoomanymonster/lib/jvm/java-11-openjdk-arm64\n export PATH=$PATH:$JAVA_HOME/bin\n</code></pre>\n<p>I have no more idea what to do to get this fixed. I hope anybody knows how to set the Java-home correctly?</p>\n<p>Kindest David</p>\n<ol>\n<li><p>Manually defined the java-home variable.</p>\n</li>\n<li><p>Updated the bashrc config</p>\n</li>\n<li><p>changed from link to real path  link: java-1.11.0-openjdk-arm64 real path   to real path: java-11-openjdk-arm64</p>\n</li>\n</ol>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":8007119,"reputation":620,"user_id":6040113,"display_name":"monkeyStix"},"score":0,"creation_date":1645523617,"post_id":71219115,"comment_id":125887809,"body_markdown":"Do you have a JAVA_HOME environment variable overriding it perhaps?","body":"Do you have a JAVA_HOME environment variable overriding it perhaps?"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1645523659,"post_id":71219115,"comment_id":125887826,"body_markdown":"Check your `PATH` environment variable outside of Intellij. Also check `JAVA_HOME`. Align all of that with the JDK you actually want to use. It is generally easier if everything (command line, IDE, ...) points to the same JDK, if applicable.","body":"Check your <code>PATH</code> environment variable outside of Intellij. Also check <code>JAVA_HOME</code>. Align all of that with the JDK you actually want to use. It is generally easier if everything (command line, IDE, ...) points to the same JDK, if applicable."},{"owner":{"account_id":7929209,"reputation":7801,"user_id":5987669,"display_name":"Locke"},"score":2,"creation_date":1645523710,"post_id":71219115,"comment_id":125887843,"body_markdown":"Check to make sure your run configuration does not have a different version selected","body":"Check to make sure your run configuration does not have a different version selected"},{"owner":{"account_id":2701010,"reputation":1085,"user_id":2331741,"accept_rate":100,"display_name":"filip_j"},"score":0,"creation_date":1645523915,"post_id":71219115,"comment_id":125887930,"body_markdown":"That&#39;s it the run configuration was the problem. Thanks @Locke","body":"That&#39;s it the run configuration was the problem. Thanks @Locke"}],"answers":[{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1645523982,"creation_date":1645523982,"answer_id":71219225,"question_id":71219115,"body_markdown":"You have to check the following settings match (for Java 17):\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\nAlso if you use maven check that the correct version is set and if not, change them and reimport the project.\r\n\r\n  [1]: https://i.stack.imgur.com/AhSlh.png\r\n  [2]: https://i.stack.imgur.com/dTwx9.png\r\n  [3]: https://i.stack.imgur.com/xknEg.png","title":"Intellij executes with wrong java version","body":"<p>You have to check the following settings match (for Java 17):</p>\n<p><a href=\"https://i.stack.imgur.com/AhSlh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AhSlh.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/dTwx9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dTwx9.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/xknEg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xknEg.png\" alt=\"enter image description here\" /></a></p>\n<p>Also if you use maven check that the correct version is set and if not, change them and reimport the project.</p>\n"},{"tags":[],"owner":{"account_id":2701010,"reputation":1085,"user_id":2331741,"accept_rate":100,"display_name":"filip_j"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1645524018,"creation_date":1645524018,"answer_id":71219235,"question_id":71219115,"body_markdown":"The problem was in the run configuration. I needed to specify the java version as well. Thanks for the suggestions","title":"Intellij executes with wrong java version","body":"<p>The problem was in the run configuration. I needed to specify the java version as well. Thanks for the suggestions</p>\n"},{"tags":[],"owner":{"account_id":12602931,"reputation":34,"user_id":9165027,"display_name":"manosk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701358594,"creation_date":1701358594,"answer_id":77579723,"question_id":71219115,"body_markdown":"An update for 2023 version of Intelij:\r\n\r\nThere are 2 different solutions based on the issue at hand: \r\n 1. To build maven project, navigate to File | Settings | Build, Execution, Deployment | Build Tools | Maven | Runner -&gt; and make sure it is the correct java version \r\n 2. To run service, change the java version from project structure and run service again","title":"Intellij executes with wrong java version","body":"<p>An update for 2023 version of Intelij:</p>\n<p>There are 2 different solutions based on the issue at hand:</p>\n<ol>\n<li>To build maven project, navigate to File | Settings | Build, Execution, Deployment | Build Tools | Maven | Runner -&gt; and make sure it is the correct java version</li>\n<li>To run service, change the java version from project structure and run service again</li>\n</ol>\n"}],"owner":{"account_id":2701010,"reputation":1085,"user_id":2331741,"accept_rate":100,"display_name":"filip_j"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8428,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71219235,"answer_count":3,"score":2,"last_activity_date":1701358594,"creation_date":1645523503,"question_id":71219115,"body_markdown":"My Project is set to run with Java 11.\r\n[![enter image description here][1]][1]\r\n\r\nI can build it without any issues, but when I try to run it, it is looking for Java 1.8\r\n[![enter image description here][2]][2]\r\n\r\nRunning on Mac OS 12.2.1\r\nIntelliJ Version 2021.3.2\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6t2Dv.png\r\n  [2]: https://i.stack.imgur.com/oqDiE.png","title":"Intellij executes with wrong java version","body":"<p>My Project is set to run with Java 11.\n<a href=\"https://i.stack.imgur.com/6t2Dv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6t2Dv.png\" alt=\"enter image description here\" /></a></p>\n<p>I can build it without any issues, but when I try to run it, it is looking for Java 1.8\n<a href=\"https://i.stack.imgur.com/oqDiE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oqDiE.png\" alt=\"enter image description here\" /></a></p>\n<p>Running on Mac OS 12.2.1\nIntelliJ Version 2021.3.2</p>\n"},{"tags":["java","spring-boot","json-rpc","jsonrpc4j"],"answers":[{"comments":[{"owner":{"account_id":15991650,"reputation":33,"user_id":11540681,"display_name":"r2r"},"score":0,"creation_date":1670785861,"post_id":74760562,"comment_id":131948652,"body_markdown":"Seems so. Already opened an issue, hope devs gonna fix that in a new release. Unfortunately couldn&#39;t find any other convinient lib.","body":"Seems so. Already opened an issue, hope devs gonna fix that in a new release. Unfortunately couldn&#39;t find any other convinient lib."}],"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1670759585,"creation_date":1670759585,"answer_id":74760562,"question_id":74760350,"body_markdown":"It looks like `org.springframework.remoting`  was removed in Spring 6 (see [Drop RPC-style remoting: Hessian, HTTP Invoker, JMS Invoker, JAX-WS #27422][1]).  In Spring 5.3, the subclasses of `RemoteExporter` are marked deprecated (see  [Deprecate remoting technologies support #25379][2]), but interestingly enough, `RemoteExporter` itself wasn&#39;t marked as such, but it has been removed anyway. You&#39;ll need to find a replacement library or ask the developers of jsonrpc4j to provide a version which supports Spring 6/Spring Boot 3.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/issues/27422\r\n  [2]: https://github.com/spring-projects/spring-framework/issues/25379","title":"Application fails on run in a new release of SpringBoot 3.0.0","body":"<p>It looks like <code>org.springframework.remoting</code>  was removed in Spring 6 (see <a href=\"https://github.com/spring-projects/spring-framework/issues/27422\" rel=\"nofollow noreferrer\">Drop RPC-style remoting: Hessian, HTTP Invoker, JMS Invoker, JAX-WS #27422</a>).  In Spring 5.3, the subclasses of <code>RemoteExporter</code> are marked deprecated (see  <a href=\"https://github.com/spring-projects/spring-framework/issues/25379\" rel=\"nofollow noreferrer\">Deprecate remoting technologies support #25379</a>), but interestingly enough, <code>RemoteExporter</code> itself wasn't marked as such, but it has been removed anyway. You'll need to find a replacement library or ask the developers of jsonrpc4j to provide a version which supports Spring 6/Spring Boot 3.</p>\n"}],"owner":{"account_id":15991650,"reputation":33,"user_id":11540681,"display_name":"r2r"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":649,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74760562,"answer_count":1,"score":2,"last_activity_date":1701358007,"creation_date":1670757661,"question_id":74760350,"body_markdown":"I&#39;m using jsonrpc4j library to handle my jsonrpc api. After migrating to new release of SpringBoot 3.0.0 it builds, but fails on run with an error of RemoteExporter:\r\n\r\n```\r\nERROR 22396 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\njava.lang.NoClassDefFoundError: org/springframework/remoting/support/RemoteExporter\r\n```\r\n\r\nas jsonrpc4j uses it in it.\r\n\r\nThe reason seems to me in a version of Spring Context which comes with SpringBoot 3.0.0 dependency. `org.springframework.remoting` package is lack of `.support` package in that version.\r\n\r\nIs there any way to avoid the issue?","title":"Application fails on run in a new release of SpringBoot 3.0.0","body":"<p>I'm using jsonrpc4j library to handle my jsonrpc api. After migrating to new release of SpringBoot 3.0.0 it builds, but fails on run with an error of RemoteExporter:</p>\n<pre><code>ERROR 22396 --- [           main] o.s.boot.SpringApplication               : Application run failed\njava.lang.NoClassDefFoundError: org/springframework/remoting/support/RemoteExporter\n</code></pre>\n<p>as jsonrpc4j uses it in it.</p>\n<p>The reason seems to me in a version of Spring Context which comes with SpringBoot 3.0.0 dependency. <code>org.springframework.remoting</code> package is lack of <code>.support</code> package in that version.</p>\n<p>Is there any way to avoid the issue?</p>\n"},{"tags":["java","android","node.js","termux","termux-linux"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1701358495,"post_id":77579618,"comment_id":136768095,"body_markdown":"Something like [this](https://github.com/termux/termux-app/wiki/RUN_COMMAND-Intent)?","body":"Something like <a href=\"https://github.com/termux/termux-app/wiki/RUN_COMMAND-Intent\" rel=\"nofollow noreferrer\">this</a>?"}],"owner":{"account_id":30032774,"reputation":1,"user_id":23015485,"display_name":"Gabriele Trono"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701357748,"creation_date":1701357748,"question_id":77579618,"body_markdown":"I got a Java android app that receive buffer of byte from a nodejs, i want to run script when you open the app like \r\ncd backend\r\nsudo node server.js\r\nIs there a way?\r\n\r\nNow i open termux and run script and then I open my app.\r\nI didn&#39;t find anything to resolve my problem...","title":"Is there a way to run termux script from a android app?","body":"<p>I got a Java android app that receive buffer of byte from a nodejs, i want to run script when you open the app like\ncd backend\nsudo node server.js\nIs there a way?</p>\n<p>Now i open termux and run script and then I open my app.\nI didn't find anything to resolve my problem...</p>\n"},{"tags":["java","websphere","ejb-3.0","eclipse-wtp"],"comments":[{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":1,"creation_date":1700733622,"post_id":77534470,"comment_id":136691718,"body_markdown":"I&#39;d try one of the solutions form here https://stackoverflow.com/questions/18122336/cannot-change-version-of-project-facet-dynamic-web-module-to-3-0 . This talks about web project but I expect similar &quot;logic&quot; for ejb projects. So try &quot;uncheck&quot;, &quot;apply&quot;, &quot;recheck&quot;. Or just change the setting it the ...facet.core.xml file and restart Eclipse","body":"I&#39;d try one of the solutions form here <a href=\"https://stackoverflow.com/questions/18122336/cannot-change-version-of-project-facet-dynamic-web-module-to-3-0\" title=\"cannot change version of project facet dynamic web module to 3 0\">stackoverflow.com/questions/18122336/&hellip;</a> . This talks about web project but I expect similar &quot;logic&quot; for ejb projects. So try &quot;uncheck&quot;, &quot;apply&quot;, &quot;recheck&quot;. Or just change the setting it the ...facet.core.xml file and restart Eclipse"},{"owner":{"account_id":25541470,"reputation":1,"user_id":19327440,"display_name":"K-p"},"score":0,"creation_date":1701146854,"post_id":77534470,"comment_id":136736092,"body_markdown":"Compilation Errors remained same, even after changing ejb version in project facets.xml","body":"Compilation Errors remained same, even after changing ejb version in project facets.xml"},{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1701177176,"post_id":77534470,"comment_id":136740709,"body_markdown":"You didnt mention about any compilation errors. If you have compilation errors that completely different problem than switching spec in Eclipse, as this just changes editors in the tool not the compilation. You should put the errors in the question","body":"You didnt mention about any compilation errors. If you have compilation errors that completely different problem than switching spec in Eclipse, as this just changes editors in the tool not the compilation. You should put the errors in the question"},{"owner":{"account_id":25541470,"reputation":1,"user_id":19327440,"display_name":"K-p"},"score":0,"creation_date":1701331943,"post_id":77534470,"comment_id":136763116,"body_markdown":"1)Description\tResource\tPath\tLocation\tType\nCHKJ2017E: This class must implement javax.ejb.SessionBean (EJB 2.0: 7.5.1, 7.10.2).\tejb.jar\t/roject\tClass: com.xxxx.xxxxx.arch.app.internal.ServiceProviderBean\tEJB Validator Message \n2)Description\tResource\tPath\tLocation\tType\nCHKJ2017E: This interface must extend javax.ejb.EJBObject (EJB 2.0: 6.5, 7.10.5).\teb.jar\t/Project\tClass: com.xxxx.xxxxx.arch.app.internal.ServiceProvider\tEJB Validator Message \n\n\n I&#39;m getting above two ejb validation errors - @Gas","body":"1)Description\tResource\tPath\tLocation\tType CHKJ2017E: This class must implement javax.ejb.SessionBean (EJB 2.0: 7.5.1, 7.10.2).\tejb.jar\t/roject\tClass: com.xxxx.xxxxx.arch.app.internal.ServiceProviderBean\tEJB Validator Message  2)Description\tResource\tPath\tLocation\tType CHKJ2017E: This interface must extend javax.ejb.EJBObject (EJB 2.0: 6.5, 7.10.5).\teb.jar\t/Project\tClass: com.xxxx.xxxxx.arch.app.internal.ServiceProvider\tEJB Validator Message     I&#39;m getting above two ejb validation errors - @Gas"},{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1701358042,"post_id":77534470,"comment_id":136768008,"body_markdown":"Maybe your EAR is 1.4 EJB 3.0 is part of the Java EE 5 platform, so make sure you have correct EAR level, unless your EJBs are stand alone modules.","body":"Maybe your EAR is 1.4 EJB 3.0 is part of the Java EE 5 platform, so make sure you have correct EAR level, unless your EJBs are stand alone modules."}],"owner":{"account_id":25541470,"reputation":1,"user_id":19327440,"display_name":"K-p"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701357743,"creation_date":1700716234,"question_id":77534470,"body_markdown":"[Errors on project build](https://i.stack.imgur.com/ucYC6.png)\r\n\r\nTrying to migrate EJB project from 2.0 to 3.0, but got the above errors as EJB Project is referring to ejb2.0 version even Using annotations instead ejb-jar.xml in beans.\r\n\r\nOther Details:\r\nServer - WebSphere8.5.5 traditional server\r\nJava - 1.8 Version\r\n\r\nMeta-Inf of ejb module\r\n[EJB Project Meta-INF contains](https://i.stack.imgur.com/edBb3.png)\r\n\r\nProject Facets of  EJB project:\r\n[EJB module version is 2.x, unable to change to 3.0](https://i.stack.imgur.com/GeD0S.png)\r\nEjb Module version in project facet is 2.0, but not allowing to change to 3.0.\r\n\r\n\r\n\r\nDeleted ejb-jar.xml, and updated ibm bindings.\r\nAdded annotations to beans as required.\r\n\r\nBut got configurations errors. Unable to change version of ejb to 3.0.\r\n\r\nI&#39;m getting two ejb validation errors:  \r\n1) CHKJ2017E: This class must implement javax.ejb.SessionBean (EJB 2.0: 7.5.1, 7.10.2). ejb.jar /roject Class: com.xxxx.xxxxx.arch.app.internal.ServiceProviderBean EJB Validator Message   \r\n2)CHKJ2017E: This interface must extend javax.ejb.EJBObject (EJB 2.0: 6.5, 7.10.5). eb.jar /Project Class: com.xxxx.xxxxx.arch.app.internal.ServiceProvider EJB Validator Message ","title":"How to change EJB Module Version, if ejb-jar.xml is deleted to migrate module from 2.x to 3.0","body":"<p><a href=\"https://i.stack.imgur.com/ucYC6.png\" rel=\"nofollow noreferrer\">Errors on project build</a></p>\n<p>Trying to migrate EJB project from 2.0 to 3.0, but got the above errors as EJB Project is referring to ejb2.0 version even Using annotations instead ejb-jar.xml in beans.</p>\n<p>Other Details:\nServer - WebSphere8.5.5 traditional server\nJava - 1.8 Version</p>\n<p>Meta-Inf of ejb module\n<a href=\"https://i.stack.imgur.com/edBb3.png\" rel=\"nofollow noreferrer\">EJB Project Meta-INF contains</a></p>\n<p>Project Facets of  EJB project:\n<a href=\"https://i.stack.imgur.com/GeD0S.png\" rel=\"nofollow noreferrer\">EJB module version is 2.x, unable to change to 3.0</a>\nEjb Module version in project facet is 2.0, but not allowing to change to 3.0.</p>\n<p>Deleted ejb-jar.xml, and updated ibm bindings.\nAdded annotations to beans as required.</p>\n<p>But got configurations errors. Unable to change version of ejb to 3.0.</p>\n<p>I'm getting two ejb validation errors:</p>\n<ol>\n<li>CHKJ2017E: This class must implement javax.ejb.SessionBean (EJB 2.0: 7.5.1, 7.10.2). ejb.jar /roject Class: com.xxxx.xxxxx.arch.app.internal.ServiceProviderBean EJB Validator Message<br />\n2)CHKJ2017E: This interface must extend javax.ejb.EJBObject (EJB 2.0: 6.5, 7.10.5). eb.jar /Project Class: com.xxxx.xxxxx.arch.app.internal.ServiceProvider EJB Validator Message</li>\n</ol>\n"},{"tags":["java","eclipse","osgi"],"answers":[{"comments":[{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":0,"creation_date":1260266011,"post_id":1865833,"comment_id":1762476,"body_markdown":"That&#39;s not the problem, `bin.includes` includes the lib, even tried sorting and ordering (moved the library to first or last position.. after a while your try even the weirdest things)","body":"That&#39;s not the problem, <code>bin.includes</code> includes the lib, even tried sorting and ordering (moved the library to first or last position.. after a while your try even the weirdest things)"}],"tags":[],"owner":{"account_id":44499,"reputation":23474,"user_id":130659,"accept_rate":100,"display_name":"AlBlue"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1260265179,"creation_date":1260265179,"answer_id":1865833,"question_id":1860770,"body_markdown":"Check the build.properties to see if the bin.includes includes your newly added Jar. Without it, it won&#39;t be exported by the build process, and thus won&#39;t be able to use it in dependent bundles.","title":"eclipse library bundle - fails to export packages from some libraries","body":"<p>Check the build.properties to see if the bin.includes includes your newly added Jar. Without it, it won't be exported by the build process, and thus won't be able to use it in dependent bundles.</p>\n"},{"comments":[{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":0,"creation_date":1260269080,"post_id":1865856,"comment_id":1762741,"body_markdown":"Thank you! Thank you! Thank you! #1 was a hit. The lib wasn&#39;t checkd in the Order and Export area. Guess it happend because I added that library manually and didn&#39;t do a &#39;add to build path&#39; from the context menu. Problem solved :)","body":"Thank you! Thank you! Thank you! #1 was a hit. The lib wasn&#39;t checkd in the Order and Export area. Guess it happend because I added that library manually and didn&#39;t do a &#39;add to build path&#39; from the context menu. Problem solved :)"},{"owner":{"account_id":29838,"reputation":19362,"user_id":80906,"display_name":"Francis Upton IV"},"score":0,"creation_date":1260287623,"post_id":1865856,"comment_id":1764795,"body_markdown":"Yeah, I hit that one sometimes, and usually after some frustration finally check that.","body":"Yeah, I hit that one sometimes, and usually after some frustration finally check that."},{"owner":{"account_id":44734,"reputation":8367,"user_id":131427,"accept_rate":100,"display_name":"Barthelemy"},"score":0,"creation_date":1266579253,"post_id":1865856,"comment_id":2260509,"body_markdown":"After spending one hour searching for a solution, #1 was a hit. Funny, I wrote dozen of this kind of plug-ins and did not remember this. Was it always a required manual step?","body":"After spending one hour searching for a solution, #1 was a hit. Funny, I wrote dozen of this kind of plug-ins and did not remember this. Was it always a required manual step?"},{"owner":{"account_id":29838,"reputation":19362,"user_id":80906,"display_name":"Francis Upton IV"},"score":0,"creation_date":1269024716,"post_id":1865856,"comment_id":2471444,"body_markdown":"@Barthelemy - no, as far as I know it&#39;s not a manual step, just sometimes it gets off for some reason, so it&#39;s good to check it.","body":"@Barthelemy - no, as far as I know it&#39;s not a manual step, just sometimes it gets off for some reason, so it&#39;s good to check it."}],"tags":[],"owner":{"account_id":29838,"reputation":19362,"user_id":80906,"display_name":"Francis Upton IV"},"comment_count":4,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1260265494,"creation_date":1260265494,"answer_id":1865856,"question_id":1860770,"body_markdown":"Check the following:  \r\n\r\n 1. Make sure they are in the Build\r\n    Configuration -&gt; Order and Export\r\n    area, and they are check for export.\r\n 2. Make sure you have the packages\r\n    exported in the manifest (PDE Tools\r\n    -&gt; Open Manifest -&gt; Runtime tab) \r\n 3. In the same place as above, make\r\n    sure the JAR files are in the\r\n    manifest classpath. \r\n 4. (as Al says\r\n    below), make sure the build\r\n    properties has your jars marked for\r\n    exclusion (though this is not likely\r\n    your issue as you are getting errors\r\n    compiling).\r\n\r\nIf all of this is done (and it&#39;s still not working), do a clean build an restart eclipse.  Sometimes the Eclipse gets a little confused about this and a restart helps.","title":"eclipse library bundle - fails to export packages from some libraries","body":"<p>Check the following:  </p>\n\n<ol>\n<li>Make sure they are in the Build\nConfiguration -> Order and Export\narea, and they are check for export.</li>\n<li>Make sure you have the packages\nexported in the manifest (PDE Tools\n-> Open Manifest -> Runtime tab) </li>\n<li>In the same place as above, make\nsure the JAR files are in the\nmanifest classpath. </li>\n<li>(as Al says\nbelow), make sure the build\nproperties has your jars marked for\nexclusion (though this is not likely\nyour issue as you are getting errors\ncompiling).</li>\n</ol>\n\n<p>If all of this is done (and it's still not working), do a clean build an restart eclipse.  Sometimes the Eclipse gets a little confused about this and a restart helps.</p>\n"},{"tags":[],"owner":{"account_id":1740608,"reputation":129,"user_id":1592127,"display_name":"doulos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701357349,"creation_date":1701357349,"answer_id":77579573,"question_id":1860770,"body_markdown":"if all this still does not help: there is a link item &quot;update the classpath settings&quot; on the Overview page of the manifest editor. Clicking this innocent little thingy finally did the job for me","title":"eclipse library bundle - fails to export packages from some libraries","body":"<p>if all this still does not help: there is a link item &quot;update the classpath settings&quot; on the Overview page of the manifest editor. Clicking this innocent little thingy finally did the job for me</p>\n"}],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8651,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":1865856,"answer_count":3,"score":4,"last_activity_date":1701357349,"creation_date":1260200457,"question_id":1860770,"body_markdown":"I&#39;ve created a simple plugin project in eclipse 3.5 that just stores third-party libraries for the use by other bundles in an eclipse RCP application. Worked as expected: I edited the manifest, exported the required packages and added the libraries to the build path (project build path as well as manifest build path).\r\n\r\nSome days later I added another jar to that project, did the same steps (exporting a package, adding the library to the build path(s)) but this time I can&#39;t import classes from that exported package in other bundles. The package was clearly selectable on the manifest editor but import statements in classes just taunt me with curly red lines. Importing classes from other packages exported by the bundles still works, only classes from the newly added lib remain invisible.\r\n\r\nHas anyone has an idea what I might have missed? I&#39;m pretty stuck and have no idea how to convince google to show me the solution to that ugly issue...","title":"eclipse library bundle - fails to export packages from some libraries","body":"<p>I've created a simple plugin project in eclipse 3.5 that just stores third-party libraries for the use by other bundles in an eclipse RCP application. Worked as expected: I edited the manifest, exported the required packages and added the libraries to the build path (project build path as well as manifest build path).</p>\n\n<p>Some days later I added another jar to that project, did the same steps (exporting a package, adding the library to the build path(s)) but this time I can't import classes from that exported package in other bundles. The package was clearly selectable on the manifest editor but import statements in classes just taunt me with curly red lines. Importing classes from other packages exported by the bundles still works, only classes from the newly added lib remain invisible.</p>\n\n<p>Has anyone has an idea what I might have missed? I'm pretty stuck and have no idea how to convince google to show me the solution to that ugly issue...</p>\n"},{"tags":["java","spring","classloader","java-module","spring-context"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1701080481,"post_id":77556100,"comment_id":136726316,"body_markdown":"Why are you messing around with classloaders in the firs tplace? Also the `ApplicationContextHolder` is sort of an anti-pattern and shouldn&#39;t be used.","body":"Why are you messing around with classloaders in the firs tplace? Also the <code>ApplicationContextHolder</code> is sort of an anti-pattern and shouldn&#39;t be used."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1701081150,"post_id":77556100,"comment_id":136726427,"body_markdown":"Looking into the issue.","body":"Looking into the issue."}],"answers":[{"tags":[],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701357164,"creation_date":1701356862,"answer_id":77579537,"question_id":77556100,"body_markdown":"I solved the problem.\r\n\r\nSpring loads classes via `getResourceAsStream()` and by default uses `ClassPathResource` with `classLoader.getResourceAsStream(this.absolutePath)`. However, it wont work for the JPMS application. To make it work it is required to use `ModuleResource` (added in Spring 6.1) instead of `ClassPathResource`.\r\n\r\nSo, it is necessary to create custom `ResourceLoader` that will use `ModuleResource` add set it to context:\r\n\r\n    var iocContext = new  AnnotationConfigApplicationContext();\r\n    ...\r\n    var myModuleResourceLoader = ....\r\n    iocContext.setResourceLoader(myModuleResourceLoader);\r\n    iocContext.refresh();","title":"Problem reading classes from JPMS module in Spring 6","body":"<p>I solved the problem.</p>\n<p>Spring loads classes via <code>getResourceAsStream()</code> and by default uses <code>ClassPathResource</code> with <code>classLoader.getResourceAsStream(this.absolutePath)</code>. However, it wont work for the JPMS application. To make it work it is required to use <code>ModuleResource</code> (added in Spring 6.1) instead of <code>ClassPathResource</code>.</p>\n<p>So, it is necessary to create custom <code>ResourceLoader</code> that will use <code>ModuleResource</code> add set it to context:</p>\n<pre><code>var iocContext = new  AnnotationConfigApplicationContext();\n...\nvar myModuleResourceLoader = ....\niocContext.setResourceLoader(myModuleResourceLoader);\niocContext.refresh();\n</code></pre>\n"}],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77579537,"answer_count":1,"score":1,"last_activity_date":1701357256,"creation_date":1701080286,"question_id":77556100,"body_markdown":"I have a JPMS application with layer tree. On `Layer C`  I need to create Spring context while Spring framework is located on `Layer B`:\r\n\r\n    boot layer\r\n      |- Layer B with Spring framework.\r\n           |- Layer C where I need to create my context\r\n\r\nComponent:\r\n\r\n    @Component\r\n    public class ApplicationContextHolder implements ApplicationContextAware {\r\n    \r\n        private static ConfigurableApplicationContext applicationContext;\r\n    \r\n        @Override\r\n        public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\r\n            ApplicationContextHolder.applicationContext = (ConfigurableApplicationContext) applicationContext;\r\n        }\r\n    \r\n        public static ConfigurableApplicationContext getApplicationContext() {\r\n            return applicationContext;\r\n        }\r\n    }\r\n\r\nConfig:\r\n\r\n    @Configuration\r\n    @ComponentScan(basePackageClasses = {\r\n        ApplicationContextHolder.class\r\n    })\r\n    public class ContextConfig {\r\n    \r\n    }\r\n\r\nCreating context:\r\n\r\n        System.out.println(&quot;ThreadContextClassLoadere:&quot; + Thread.currentThread().getContextClassLoader());\r\n        System.out.println(&quot;This classLoader:&quot; + this.getClass().getClassLoader());\r\n        var clazz = this.getClass().getClassLoader().loadClass(&quot;org.springframework.context.ApplicationContextAware&quot;);\r\n        System.out.println(&quot;RESULT:&quot; + clazz);\r\n        iocContext = new  AnnotationConfigApplicationContext();\r\n        iocContext.register(ContextConfig.class);\r\n        iocContext.setClassLoader(this.getClass().getClassLoader());\r\n        iocContext.refresh();\r\n\r\nResult:\r\n\r\n    ThreadContextClassLoadere:jdk.internal.loader.Loader@63fcbf75\r\n    This classLoader:jdk.internal.loader.Loader@63fcbf75\r\n    RESULT:interface org.springframework.context.ApplicationContextAware\r\n    \r\n    Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.foo.ContextConfig]\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:178)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:415)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:287)\r\n    \tat spring.context@6.0.13/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344)\r\n    \tat spring.context@6.0.13/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115)\r\n    \tat spring.context@6.0.13/org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:779)\r\n    \tat spring.context@6.0.13/org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:597)\r\n            ....\r\n    Caused by: java.io.FileNotFoundException: class path resource [org/springframework/context/ApplicationContextAware.class] cannot be opened because it does not exist\r\n    \tat spring.core@6.0.13/org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:211)\r\n    \tat spring.core@6.0.13/org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:54)\r\n    \tat spring.core@6.0.13/org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:48)\r\n    \tat spring.core@6.0.13/org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103)\r\n    \tat spring.core@6.0.13/org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:122)\r\n    \tat spring.core@6.0.13/org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:81)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.asSourceClass(ConfigurationClassParser.java:613)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser$SourceClass.getInterfaces(ConfigurationClassParser.java:939)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.processInterfaces(ConfigurationClassParser.java:379)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:325)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:243)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:188)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:297)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:243)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:196)\r\n    \tat spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:164)\r\n    \t... 16 more\r\n\r\nAs I understand (I may be wrong) Spring uses some other class loader. Could anyone say how to fix it?","title":"Problem reading classes from JPMS module in Spring 6","body":"<p>I have a JPMS application with layer tree. On <code>Layer C</code>  I need to create Spring context while Spring framework is located on <code>Layer B</code>:</p>\n<pre><code>boot layer\n  |- Layer B with Spring framework.\n       |- Layer C where I need to create my context\n</code></pre>\n<p>Component:</p>\n<pre><code>@Component\npublic class ApplicationContextHolder implements ApplicationContextAware {\n\n    private static ConfigurableApplicationContext applicationContext;\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        ApplicationContextHolder.applicationContext = (ConfigurableApplicationContext) applicationContext;\n    }\n\n    public static ConfigurableApplicationContext getApplicationContext() {\n        return applicationContext;\n    }\n}\n</code></pre>\n<p>Config:</p>\n<pre><code>@Configuration\n@ComponentScan(basePackageClasses = {\n    ApplicationContextHolder.class\n})\npublic class ContextConfig {\n\n}\n</code></pre>\n<p>Creating context:</p>\n<pre><code>    System.out.println(&quot;ThreadContextClassLoadere:&quot; + Thread.currentThread().getContextClassLoader());\n    System.out.println(&quot;This classLoader:&quot; + this.getClass().getClassLoader());\n    var clazz = this.getClass().getClassLoader().loadClass(&quot;org.springframework.context.ApplicationContextAware&quot;);\n    System.out.println(&quot;RESULT:&quot; + clazz);\n    iocContext = new  AnnotationConfigApplicationContext();\n    iocContext.register(ContextConfig.class);\n    iocContext.setClassLoader(this.getClass().getClassLoader());\n    iocContext.refresh();\n</code></pre>\n<p>Result:</p>\n<pre><code>ThreadContextClassLoadere:jdk.internal.loader.Loader@63fcbf75\nThis classLoader:jdk.internal.loader.Loader@63fcbf75\nRESULT:interface org.springframework.context.ApplicationContextAware\n\nCaused by: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.foo.ContextConfig]\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:178)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:415)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:287)\n    at spring.context@6.0.13/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344)\n    at spring.context@6.0.13/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115)\n    at spring.context@6.0.13/org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:779)\n    at spring.context@6.0.13/org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:597)\n        ....\nCaused by: java.io.FileNotFoundException: class path resource [org/springframework/context/ApplicationContextAware.class] cannot be opened because it does not exist\n    at spring.core@6.0.13/org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:211)\n    at spring.core@6.0.13/org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:54)\n    at spring.core@6.0.13/org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:48)\n    at spring.core@6.0.13/org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103)\n    at spring.core@6.0.13/org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:122)\n    at spring.core@6.0.13/org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:81)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.asSourceClass(ConfigurationClassParser.java:613)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser$SourceClass.getInterfaces(ConfigurationClassParser.java:939)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.processInterfaces(ConfigurationClassParser.java:379)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:325)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:243)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:188)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:297)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:243)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:196)\n    at spring.context@6.0.13/org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:164)\n    ... 16 more\n</code></pre>\n<p>As I understand (I may be wrong) Spring uses some other class loader. Could anyone say how to fix it?</p>\n"},{"tags":["java","web-services","jax-ws"],"comments":[{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":6,"creation_date":1261480054,"post_id":1945618,"comment_id":1856242,"body_markdown":"Just a note: JAX-WS is a standard, which CXF implements.","body":"Just a note: JAX-WS is a standard, which CXF implements."},{"owner":{"account_id":1864755,"reputation":147,"user_id":1688584,"display_name":"DaveX"},"score":0,"creation_date":1351171024,"post_id":1945618,"comment_id":17752530,"body_markdown":"Setting Java system properties and environment variables see:&lt;br&gt;\r\nhttp://stackoverflow.com/questions/7054972/java-system-properties-and-environment-variables","body":"Setting Java system properties and environment variables see:&lt;br&gt;  <a href=\"http://stackoverflow.com/questions/7054972/java-system-properties-and-environment-variables\" title=\"java system properties and environment variables\">stackoverflow.com/questions/7054972/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1261484958,"creation_date":1261482762,"answer_id":1945917,"question_id":1945618,"body_markdown":"You could try to put a `ServletFilter` in front of the webservice and inspect request and response going to / returned from the service.\r\n\r\nAlthough you specifically did not ask for a proxy, sometimes I find [tcptrace][1] is enough to see what goes on on a connection. It&#39;s a simple tool, no install, it does show the data streams and can write to file too.\r\n\r\n\r\n  [1]: http://www.pocketsoap.com/tcptrace/","title":"Tracing XML request/responses with JAX-WS","body":"<p>You could try to put a <code>ServletFilter</code> in front of the webservice and inspect request and response going to / returned from the service.</p>\n\n<p>Although you specifically did not ask for a proxy, sometimes I find <a href=\"http://www.pocketsoap.com/tcptrace/\" rel=\"nofollow noreferrer\">tcptrace</a> is enough to see what goes on on a connection. It's a simple tool, no install, it does show the data streams and can write to file too.</p>\n"},{"tags":[],"owner":{"account_id":24198,"reputation":6978,"user_id":61395,"accept_rate":83,"display_name":"Shamik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1261483251,"creation_date":1261483251,"answer_id":1945966,"question_id":1945618,"body_markdown":"One way to do is not using your code but use network packet sniffers like Etheral or WireShark which can capture the HTTP packet with the XML message as payload to it and you can keep logging them to a file or so.\r\n\r\nBut more sophisticated approach is to write your own message handlers. You can have a look at it [here][1]. \r\n\r\n\r\n  [1]: http://java.sun.com/mailers/techtips/enterprise/2006/TechTips_June06.html","title":"Tracing XML request/responses with JAX-WS","body":"<p>One way to do is not using your code but use network packet sniffers like Etheral or WireShark which can capture the HTTP packet with the XML message as payload to it and you can keep logging them to a file or so.</p>\n\n<p>But more sophisticated approach is to write your own message handlers. You can have a look at it <a href=\"http://java.sun.com/mailers/techtips/enterprise/2006/TechTips_June06.html\" rel=\"nofollow noreferrer\">here</a>. </p>\n"},{"tags":[],"owner":{"account_id":2169,"reputation":3168,"user_id":2985,"accept_rate":56,"display_name":"stjohnroe"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1261489946,"creation_date":1261489946,"answer_id":1946495,"question_id":1945618,"body_markdown":"You need to implement a javax.xml.ws.handler.LogicalHandler, this handler then needs to be referenced in a handler configuration file, which in turn is referenced by an @HandlerChain annotation in your service endpoint (interface or implementation).\r\nYou can then either output the message via system.out or a logger in your processMessage implementation. \r\n\r\nSee \r\n\r\n[http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/twbs_jaxwshandler.html][1]\r\n\r\n[http://java.sun.com/mailers/techtips/enterprise/2006/TechTips_June06.html][2]\r\n\r\n\r\n  [1]: http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/twbs_jaxwshandler.html\r\n  [2]: http://java.sun.com/mailers/techtips/enterprise/2006/TechTips_June06.html","title":"Tracing XML request/responses with JAX-WS","body":"<p>You need to implement a javax.xml.ws.handler.LogicalHandler, this handler then needs to be referenced in a handler configuration file, which in turn is referenced by an @HandlerChain annotation in your service endpoint (interface or implementation).\nYou can then either output the message via system.out or a logger in your processMessage implementation. </p>\n\n<p>See </p>\n\n<p><a href=\"http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/twbs_jaxwshandler.html\" rel=\"nofollow noreferrer\">http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/twbs_jaxwshandler.html</a></p>\n\n<p><a href=\"http://java.sun.com/mailers/techtips/enterprise/2006/TechTips_June06.html\" rel=\"nofollow noreferrer\">http://java.sun.com/mailers/techtips/enterprise/2006/TechTips_June06.html</a></p>\n"},{"comments":[{"owner":{"account_id":8581,"reputation":5936,"user_id":15530,"accept_rate":95,"display_name":"ian_scho"},"score":8,"creation_date":1291972730,"post_id":1957777,"comment_id":4805972,"body_markdown":"See link if you still don&#39;t see response/request xml with the above code: http://stackoverflow.com/questions/2808544/java-jax-ws-web-service-client-how-log-request-response-xml/2808663#2808663","body":"See link if you still don&#39;t see response/request xml with the above code: <a href=\"http://stackoverflow.com/questions/2808544/java-jax-ws-web-service-client-how-log-request-response-xml/2808663#2808663\" title=\"java jax ws web service client how log request response xml\">stackoverflow.com/questions/2808544/&hellip;</a>"},{"owner":{"account_id":57055,"reputation":5539,"user_id":170918,"display_name":"Mr. Napik"},"score":4,"creation_date":1367498880,"post_id":1957777,"comment_id":23401570,"body_markdown":"This relies on the existence of a SOAPMessage object, so it will fail (just print an exception, but not the trace) if you receive malformed response from the server. Check my answer, if you need a trace even when thigns go wrong.","body":"This relies on the existence of a SOAPMessage object, so it will fail (just print an exception, but not the trace) if you receive malformed response from the server. Check my answer, if you need a trace even when thigns go wrong."},{"owner":{"account_id":5123021,"reputation":1495,"user_id":4106030,"accept_rate":85,"display_name":"badera"},"score":0,"creation_date":1461703187,"post_id":1957777,"comment_id":61317312,"body_markdown":"In the snippet at top: regarding the last line `ep.publish(publishURL);`: what is `publishURL` (In my code, the wsdl url is included in the service itself; i do not have any url outside. What do I miss?)","body":"In the snippet at top: regarding the last line <code>ep.publish(publishURL);</code>: what is <code>publishURL</code> (In my code, the wsdl url is included in the service itself; i do not have any url outside. What do I miss?)"},{"owner":{"account_id":4639875,"reputation":1695,"user_id":3760049,"accept_rate":86,"display_name":"riskop"},"score":0,"creation_date":1465916497,"post_id":1957777,"comment_id":63095461,"body_markdown":"If you would like to publish it on all interface then the publishUrl is something like this (hltp = http) : &quot;hltp://0.0.0.0:8080/standalone/service&quot; . In this particular case, you can access the service at &quot;hltp://127.0.0.1:8080/standalone/service/yourService&quot; where &quot;yourService&quot; is the wsdl port location defined in the wsdl.","body":"If you would like to publish it on all interface then the publishUrl is something like this (hltp = http) : &quot;hltp://0.0.0.0:8080/standalone/service&quot; . In this particular case, you can access the service at &quot;hltp://127.0.0.1:8080/standalone/service/yourService&quot; where &quot;yourService&quot; is the wsdl port location defined in the wsdl."},{"owner":{"account_id":131478,"reputation":27678,"user_id":331515,"accept_rate":81,"display_name":"Daniel"},"score":0,"creation_date":1485843698,"post_id":1957777,"comment_id":71081364,"body_markdown":"@Mr.Napik: But this way you can still provide your own logging facility, which is nice when you using a logging framework.","body":"@Mr.Napik: But this way you can still provide your own logging facility, which is nice when you using a logging framework."},{"owner":{"account_id":344227,"reputation":1287,"user_id":676424,"accept_rate":82,"display_name":"f1dave"},"score":0,"creation_date":1512611152,"post_id":1957777,"comment_id":82332192,"body_markdown":"One problem with this solution is that SOAPHeader elements do not seem to be logged, and if you care about HTTP Headers these will not get logged either.","body":"One problem with this solution is that SOAPHeader elements do not seem to be logged, and if you care about HTTP Headers these will not get logged either."},{"owner":{"account_id":4604302,"reputation":3310,"user_id":3734205,"accept_rate":86,"display_name":"mxb"},"score":0,"creation_date":1549361736,"post_id":1957777,"comment_id":95865637,"body_markdown":"It seems that with this solution the modifications performed by other handlers are not taken into consideration.","body":"It seems that with this solution the modifications performed by other handlers are not taken into consideration."}],"tags":[],"owner":{"account_id":84779,"reputation":3077,"user_id":236773,"display_name":"Antonio"},"comment_count":7,"down_vote_count":1,"up_vote_count":98,"is_accepted":true,"score":97,"last_activity_date":1456922002,"creation_date":1261650917,"answer_id":1957777,"question_id":1945618,"body_markdown":"Here is the solution in raw code (put together thanks to stjohnroe and Shamik):\r\n\r\n    Endpoint ep = Endpoint.create(new WebserviceImpl());\r\n\tList&lt;Handler&gt; handlerChain = ep.getBinding().getHandlerChain();\r\n\thandlerChain.add(new SOAPLoggingHandler());\r\n\tep.getBinding().setHandlerChain(handlerChain);\r\n\tep.publish(publishURL);\r\n\r\n\r\nWhere SOAPLoggingHandler is (ripped from linked examples):\r\n\r\n    package com.myfirm.util.logging.ws;\r\n    \r\n    import java.io.PrintStream;\r\n    import java.util.Map;\r\n    import java.util.Set;\r\n    \r\n    import javax.xml.namespace.QName;\r\n    import javax.xml.soap.SOAPMessage;\r\n    import javax.xml.ws.handler.MessageContext;\r\n    import javax.xml.ws.handler.soap.SOAPHandler;\r\n    import javax.xml.ws.handler.soap.SOAPMessageContext;\r\n    \r\n    /*\r\n     * This simple SOAPHandler will output the contents of incoming\r\n     * and outgoing messages.\r\n     */\r\n    public class SOAPLoggingHandler implements SOAPHandler&lt;SOAPMessageContext&gt; {\r\n        \r\n        // change this to redirect output if desired\r\n        private static PrintStream out = System.out;\r\n        \r\n        public Set&lt;QName&gt; getHeaders() {\r\n            return null;\r\n        }\r\n        \r\n        public boolean handleMessage(SOAPMessageContext smc) {\r\n            logToSystemOut(smc);\r\n            return true;\r\n        }\r\n        \r\n        public boolean handleFault(SOAPMessageContext smc) {\r\n            logToSystemOut(smc);\r\n            return true;\r\n        }\r\n        \r\n        // nothing to clean up\r\n        public void close(MessageContext messageContext) {\r\n        }\r\n        \r\n        /*\r\n         * Check the MESSAGE_OUTBOUND_PROPERTY in the context\r\n         * to see if this is an outgoing or incoming message.\r\n         * Write a brief message to the print stream and\r\n         * output the message. The writeTo() method can throw\r\n         * SOAPException or IOException\r\n         */\r\n        private void logToSystemOut(SOAPMessageContext smc) {\r\n            Boolean outboundProperty = (Boolean)\r\n                smc.get (MessageContext.MESSAGE_OUTBOUND_PROPERTY);\r\n            \r\n            if (outboundProperty.booleanValue()) {\r\n                out.println(&quot;\\nOutbound message:&quot;);\r\n            } else {\r\n                out.println(&quot;\\nInbound message:&quot;);\r\n            }\r\n            \r\n            SOAPMessage message = smc.getMessage();\r\n            try {\r\n                message.writeTo(out);\r\n                out.println(&quot;&quot;);   // just to add a newline\r\n            } catch (Exception e) {\r\n                out.println(&quot;Exception in handler: &quot; + e);\r\n            }\r\n        }\r\n    }\r\n","title":"Tracing XML request/responses with JAX-WS","body":"<p>Here is the solution in raw code (put together thanks to stjohnroe and Shamik):</p>\n\n<pre><code>Endpoint ep = Endpoint.create(new WebserviceImpl());\nList&lt;Handler&gt; handlerChain = ep.getBinding().getHandlerChain();\nhandlerChain.add(new SOAPLoggingHandler());\nep.getBinding().setHandlerChain(handlerChain);\nep.publish(publishURL);\n</code></pre>\n\n<p>Where SOAPLoggingHandler is (ripped from linked examples):</p>\n\n<pre><code>package com.myfirm.util.logging.ws;\n\nimport java.io.PrintStream;\nimport java.util.Map;\nimport java.util.Set;\n\nimport javax.xml.namespace.QName;\nimport javax.xml.soap.SOAPMessage;\nimport javax.xml.ws.handler.MessageContext;\nimport javax.xml.ws.handler.soap.SOAPHandler;\nimport javax.xml.ws.handler.soap.SOAPMessageContext;\n\n/*\n * This simple SOAPHandler will output the contents of incoming\n * and outgoing messages.\n */\npublic class SOAPLoggingHandler implements SOAPHandler&lt;SOAPMessageContext&gt; {\n\n    // change this to redirect output if desired\n    private static PrintStream out = System.out;\n\n    public Set&lt;QName&gt; getHeaders() {\n        return null;\n    }\n\n    public boolean handleMessage(SOAPMessageContext smc) {\n        logToSystemOut(smc);\n        return true;\n    }\n\n    public boolean handleFault(SOAPMessageContext smc) {\n        logToSystemOut(smc);\n        return true;\n    }\n\n    // nothing to clean up\n    public void close(MessageContext messageContext) {\n    }\n\n    /*\n     * Check the MESSAGE_OUTBOUND_PROPERTY in the context\n     * to see if this is an outgoing or incoming message.\n     * Write a brief message to the print stream and\n     * output the message. The writeTo() method can throw\n     * SOAPException or IOException\n     */\n    private void logToSystemOut(SOAPMessageContext smc) {\n        Boolean outboundProperty = (Boolean)\n            smc.get (MessageContext.MESSAGE_OUTBOUND_PROPERTY);\n\n        if (outboundProperty.booleanValue()) {\n            out.println(\"\\nOutbound message:\");\n        } else {\n            out.println(\"\\nInbound message:\");\n        }\n\n        SOAPMessage message = smc.getMessage();\n        try {\n            message.writeTo(out);\n            out.println(\"\");   // just to add a newline\n        } catch (Exception e) {\n            out.println(\"Exception in handler: \" + e);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"score":2,"creation_date":1266258132,"post_id":1957799,"comment_id":2229490,"body_markdown":"Metro = JAX-WS RI + WSIT (i.e. JAX-WS RI != Metro)","body":"Metro = JAX-WS RI + WSIT (i.e. JAX-WS RI != Metro)"},{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":0,"creation_date":1312905747,"post_id":1957799,"comment_id":8354903,"body_markdown":"@Pau: Fixed. You know, instead of voting me down for that, you could&#39;ve put a bit of effort in and suggested an alternative link.","body":"@Pau: Fixed. You know, instead of voting me down for that, you could&#39;ve put a bit of effort in and suggested an alternative link."},{"owner":{"account_id":156097,"reputation":803,"user_id":373177,"display_name":"Pau"},"score":1,"creation_date":1312977394,"post_id":1957799,"comment_id":8370584,"body_markdown":"If I had found one, be sure I would have put it. Don&#39;t take it as personal. removed down vote ;)","body":"If I had found one, be sure I would have put it. Don&#39;t take it as personal. removed down vote ;)"},{"owner":{"account_id":132299,"reputation":7922,"user_id":332893,"accept_rate":80,"display_name":"sdoca"},"score":0,"creation_date":1336515454,"post_id":1957799,"comment_id":13585174,"body_markdown":"Link is broken again (what&#39;s up with java.net???).  I think this is the new link: http://metro.java.net/nonav/1.2/guide/Logging.html","body":"Link is broken again (what&#39;s up with java.net???).  I think this is the new link: <a href=\"http://metro.java.net/nonav/1.2/guide/Logging.html\" rel=\"nofollow noreferrer\">metro.java.net/nonav/1.2/guide/Logging.html</a>"},{"owner":{"account_id":12892,"reputation":7721,"user_id":25625,"accept_rate":83,"display_name":"Ed Brannin"},"score":0,"creation_date":1701356172,"post_id":1957799,"comment_id":136767638,"body_markdown":"Looks like they&#39;ve since moved to GitHub Pages; I&#39;ve updated the answer with the current link.","body":"Looks like they&#39;ve since moved to GitHub Pages; I&#39;ve updated the answer with the current link."}],"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":5,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1701356157,"creation_date":1261651169,"answer_id":1957799,"question_id":1945618,"body_markdown":"There are various ways of doing this programmatically, as described in the other answers, but they&#39;re quite invasive mechanisms. However, if you know that you&#39;re using the JAX-WS RI (aka &quot;Metro&quot;), then you can do this at the configuration level. [See here for instructions][1] on how to do this. No need to mess about with your application.\r\n\r\n\r\n  [1]: https://javaee.github.io/metro/doc/user-guide/ch02.html#logging","title":"Tracing XML request/responses with JAX-WS","body":"<p>There are various ways of doing this programmatically, as described in the other answers, but they're quite invasive mechanisms. However, if you know that you're using the JAX-WS RI (aka &quot;Metro&quot;), then you can do this at the configuration level. <a href=\"https://javaee.github.io/metro/doc/user-guide/ch02.html#logging\" rel=\"nofollow noreferrer\">See here for instructions</a> on how to do this. No need to mess about with your application.</p>\n"},{"comments":[{"owner":{"account_id":26091,"reputation":178014,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"score":3,"creation_date":1334882457,"post_id":9035984,"comment_id":13157739,"body_markdown":"Brilliant. This is the best answer IMHO.","body":"Brilliant. This is the best answer IMHO."},{"owner":{"account_id":493156,"reputation":5376,"user_id":1343096,"accept_rate":70,"display_name":"tibo"},"score":0,"creation_date":1345708574,"post_id":9035984,"comment_id":16149678,"body_markdown":"For some reason, for me it is : `-Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dump=true`","body":"For some reason, for me it is : <code>-Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dum&zwnj;&#8203;p=true</code>"},{"owner":{"account_id":1008660,"reputation":13673,"user_id":1021725,"accept_rate":75,"display_name":"David Brossard"},"score":0,"creation_date":1352125193,"post_id":9035984,"comment_id":18027725,"body_markdown":"For some reason, this worked on only one of my 3 web services (I have 3 JAX-WS web services in my Tomcat web-app). Any idea why it wouldn&#39;t work on all 3?","body":"For some reason, this worked on only one of my 3 web services (I have 3 JAX-WS web services in my Tomcat web-app). Any idea why it wouldn&#39;t work on all 3?"},{"owner":{"account_id":2168743,"reputation":10044,"user_id":1921273,"display_name":"MrSmith42"},"score":0,"creation_date":1367313831,"post_id":9035984,"comment_id":23328295,"body_markdown":"Worked fine for me to see why my test failed (Set the option in the &#39;run configutration&#39; of my test as &#39;VM argument&#39;).","body":"Worked fine for me to see why my test failed (Set the option in the &#39;run configutration&#39; of my test as &#39;VM argument&#39;)."},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1550221739,"post_id":9035984,"comment_id":96197353,"body_markdown":"You sire just exploeded the internet with the best answer ever","body":"You sire just exploeded the internet with the best answer ever"}],"tags":[],"owner":{"account_id":1203678,"reputation":571,"user_id":1173846,"display_name":"Upendra"},"comment_count":5,"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1334882479,"creation_date":1327679139,"answer_id":9035984,"question_id":1945618,"body_markdown":"Before starting tomcat, set `JAVA_OPTS` as below in Linux envs. Then start Tomcat. You will see the request and response in the `catalina.out` file.\r\n\r\n    export JAVA_OPTS=&quot;$JAVA_OPTS -Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dump=true&quot;","title":"Tracing XML request/responses with JAX-WS","body":"<p>Before starting tomcat, set <code>JAVA_OPTS</code> as below in Linux envs. Then start Tomcat. You will see the request and response in the <code>catalina.out</code> file.</p>\n\n<pre><code>export JAVA_OPTS=\"$JAVA_OPTS -Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dump=true\"\n</code></pre>\n"},{"comments":[{"owner":{"account_id":453322,"reputation":1998,"user_id":850252,"accept_rate":86,"display_name":"M Smith"},"score":8,"creation_date":1373653243,"post_id":16338394,"comment_id":25652597,"body_markdown":"Thanks, this is the best answer I have found to this problem","body":"Thanks, this is the best answer I have found to this problem"},{"owner":{"account_id":905874,"reputation":3369,"user_id":940794,"accept_rate":59,"display_name":"Rop"},"score":7,"creation_date":1398709722,"post_id":16338394,"comment_id":35757039,"body_markdown":"This does NOT work for me, when the CLIENT runs in Tomcat. Only the -D stuff works. I believe this is due to the classLoader-structure in Tomcat?","body":"This does NOT work for me, when the CLIENT runs in Tomcat. Only the -D stuff works. I believe this is due to the classLoader-structure in Tomcat?"},{"owner":{"account_id":189206,"reputation":6121,"user_id":428400,"accept_rate":83,"display_name":"Glenn Bech"},"score":3,"creation_date":1441622569,"post_id":16338394,"comment_id":52737800,"body_markdown":"System.setProperty(&quot;com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump&quot;, &quot;true&quot;);  is the right onefor JAX-WS 2.2 RI bundled in JDK7 and used by default","body":"System.setProperty(&quot;com.sun.xml.internal.ws.transport.http.c&zwnj;&#8203;lient.HttpTransportP&zwnj;&#8203;ipe.dump&quot;, &quot;true&quot;);  is the right onefor JAX-WS 2.2 RI bundled in JDK7 and used by default"},{"owner":{"account_id":2820336,"reputation":1036,"user_id":2424227,"accept_rate":65,"display_name":"Mohamed Iqzas"},"score":0,"creation_date":1482409012,"post_id":16338394,"comment_id":69767591,"body_markdown":"very useful answer!","body":"very useful answer!"},{"owner":{"account_id":5318975,"reputation":1980,"user_id":4242934,"accept_rate":27,"display_name":"Borgy Manotoy"},"score":0,"creation_date":1484650981,"post_id":16338394,"comment_id":70586689,"body_markdown":"Sorry for being noob, but where can I see the logs for the request XML? I cannot see it on my tomcat log(s).","body":"Sorry for being noob, but where can I see the logs for the request XML? I cannot see it on my tomcat log(s)."},{"owner":{"account_id":57055,"reputation":5539,"user_id":170918,"display_name":"Mr. Napik"},"score":0,"creation_date":1484657892,"post_id":16338394,"comment_id":70591287,"body_markdown":"They should normally go to stdout, so you would see them on console if your program has any. If your Tomcat is run as a service without console it might take some digging to find where this output goes (might be a different log file) ... in some cases services can be configured to discard console output entirely. Then you should stop the service and find a command to run Tomcat from the command line.","body":"They should normally go to stdout, so you would see them on console if your program has any. If your Tomcat is run as a service without console it might take some digging to find where this output goes (might be a different log file) ... in some cases services can be configured to discard console output entirely. Then you should stop the service and find a command to run Tomcat from the command line."},{"owner":{"account_id":1115726,"reputation":631,"user_id":1105098,"accept_rate":77,"display_name":"Reece"},"score":2,"creation_date":1499904531,"post_id":16338394,"comment_id":77111952,"body_markdown":"for this work in tomcat you need to add these commands to JAVA_OPTS in catalina.sh e.g. on the first line add: JAVA_OPTS=&quot; -Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dump=true -Dcom.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump=true -Dcom.sun.xml.ws.transport.http.HttpAdapter.dump=true -Dcom.sun.xml.internal.ws.transport.http.HttpAdapter.dump=true&quot;  after that you can check catalina.out and the output from this will show there.","body":"for this work in tomcat you need to add these commands to JAVA_OPTS in catalina.sh e.g. on the first line add: JAVA_OPTS=&quot; -Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dum&zwnj;&#8203;p=true -Dcom.sun.xml.internal.ws.transport.http.client.HttpTranspor&zwnj;&#8203;tPipe.dump=true -Dcom.sun.xml.ws.transport.http.HttpAdapter.dump=true -Dcom.sun.xml.internal.ws.transport.http.HttpAdapter.dump=tr&zwnj;&#8203;ue&quot;  after that you can check catalina.out and the output from this will show there."},{"owner":{"account_id":337459,"reputation":917,"user_id":665744,"accept_rate":100,"display_name":"8bitme"},"score":5,"creation_date":1510296582,"post_id":16338394,"comment_id":81383601,"body_markdown":"Also add System.setProperty(&quot;com.sun.xml.internal.ws.transport.http.HttpAdapter.dumpTreshold&quot;, &quot;999999&quot;); to not have the request and response output truncated","body":"Also add System.setProperty(&quot;com.sun.xml.internal.ws.transport.http.H&zwnj;&#8203;ttpAdapter.dumpTresh&zwnj;&#8203;old&quot;, &quot;999999&quot;); to not have the request and response output truncated"},{"owner":{"account_id":9425323,"reputation":509,"user_id":7010473,"display_name":"Hector Ricardo"},"score":0,"creation_date":1519868403,"post_id":16338394,"comment_id":85087961,"body_markdown":"This solution works on Tomcat. However, I cannot make it work with Oracle Weblogic. Do you know how to?","body":"This solution works on Tomcat. However, I cannot make it work with Oracle Weblogic. Do you know how to?"},{"owner":{"account_id":57405,"reputation":3587,"user_id":171956,"accept_rate":19,"display_name":"99Sono"},"score":0,"creation_date":1559637759,"post_id":16338394,"comment_id":99473982,"body_markdown":"These properties are good. They even dump the data even if the data cannot be deserialized. That is essential if we are just seing the log file requests that cannot be deserialzied but cannot see what data was problematic.","body":"These properties are good. They even dump the data even if the data cannot be deserialized. That is essential if we are just seing the log file requests that cannot be deserialzied but cannot see what data was problematic."}],"tags":[],"owner":{"account_id":57055,"reputation":5539,"user_id":170918,"display_name":"Mr. Napik"},"comment_count":10,"down_vote_count":0,"up_vote_count":347,"is_accepted":false,"score":347,"last_activity_date":1567581978,"creation_date":1367498593,"answer_id":16338394,"question_id":1945618,"body_markdown":"Following options enable logging of all communication to the console (technically, you only need one of these, but that depends on the libraries you use, so setting all four is safer option). You can set it in the code like in example, or as command line parameter using -D or as environment variable as Upendra wrote.\r\n \r\n    System.setProperty(&quot;com.sun.xml.ws.transport.http.client.HttpTransportPipe.dump&quot;, &quot;true&quot;);\r\n    System.setProperty(&quot;com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump&quot;, &quot;true&quot;);\r\n    System.setProperty(&quot;com.sun.xml.ws.transport.http.HttpAdapter.dump&quot;, &quot;true&quot;);\r\n    System.setProperty(&quot;com.sun.xml.internal.ws.transport.http.HttpAdapter.dump&quot;, &quot;true&quot;);\r\n    System.setProperty(&quot;com.sun.xml.internal.ws.transport.http.HttpAdapter.dumpTreshold&quot;, &quot;999999&quot;);\r\n\r\nSee question https://stackoverflow.com/questions/5350476/tracing-xml-request-responses-with-jax-ws-when-error-occurs for details.","title":"Tracing XML request/responses with JAX-WS","body":"<p>Following options enable logging of all communication to the console (technically, you only need one of these, but that depends on the libraries you use, so setting all four is safer option). You can set it in the code like in example, or as command line parameter using -D or as environment variable as Upendra wrote.</p>\n\n<pre><code>System.setProperty(\"com.sun.xml.ws.transport.http.client.HttpTransportPipe.dump\", \"true\");\nSystem.setProperty(\"com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump\", \"true\");\nSystem.setProperty(\"com.sun.xml.ws.transport.http.HttpAdapter.dump\", \"true\");\nSystem.setProperty(\"com.sun.xml.internal.ws.transport.http.HttpAdapter.dump\", \"true\");\nSystem.setProperty(\"com.sun.xml.internal.ws.transport.http.HttpAdapter.dumpTreshold\", \"999999\");\n</code></pre>\n\n<p>See question <a href=\"https://stackoverflow.com/questions/5350476/tracing-xml-request-responses-with-jax-ws-when-error-occurs\">Tracing XML request/responses with JAX-WS when error occurs</a> for details.</p>\n"},{"tags":[],"owner":{"account_id":3332564,"reputation":231,"user_id":2801140,"display_name":"TriMix"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1379726268,"creation_date":1379725364,"answer_id":18927870,"question_id":1945618,"body_markdown":"// This solution provides a way programatically add a handler to the web service clien w/o the XML config\r\n\r\n// See full doc here: http://docs.oracle.com/cd/E17904_01//web.1111/e13734/handlers.htm#i222476\r\n\r\n// Create new class that implements SOAPHandler\r\n\r\n    public class LogMessageHandler implements SOAPHandler&lt;SOAPMessageContext&gt; {\r\n\r\n    @Override\r\n    public Set&lt;QName&gt; getHeaders() {\r\n        return Collections.EMPTY_SET;\r\n    }\r\n\r\n    @Override\r\n    public boolean handleMessage(SOAPMessageContext context) {\r\n        SOAPMessage msg = context.getMessage(); //Line 1\r\n        try {\r\n            msg.writeTo(System.out);  //Line 3\r\n        } catch (Exception ex) {\r\n            Logger.getLogger(LogMessageHandler.class.getName()).log(Level.SEVERE, null, ex);\r\n        } \r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean handleFault(SOAPMessageContext context) {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void close(MessageContext context) {\r\n    }\r\n    }\r\n\r\n// Programatically add your LogMessageHandler\r\n \r\n\r\n       com.csd.Service service = null;\r\n        URL url = new URL(&quot;https://service.demo.com/ResService.svc?wsdl&quot;);\r\n\r\n        service = new com.csd.Service(url);\r\n        \r\n        com.csd.IService port = service.getBasicHttpBindingIService();\r\n        BindingProvider bindingProvider = (BindingProvider)port;\r\n        Binding binding = bindingProvider.getBinding();\r\n        List&lt;Handler&gt; handlerChain = binding.getHandlerChain();\r\n        handlerChain.add(new LogMessageHandler());\r\n        binding.setHandlerChain(handlerChain);\r\n\r\n\r\n","title":"Tracing XML request/responses with JAX-WS","body":"<p>// This solution provides a way programatically add a handler to the web service clien w/o the XML config</p>\n\n<p>// See full doc here: <a href=\"http://docs.oracle.com/cd/E17904_01//web.1111/e13734/handlers.htm#i222476\" rel=\"noreferrer\">http://docs.oracle.com/cd/E17904_01//web.1111/e13734/handlers.htm#i222476</a></p>\n\n<p>// Create new class that implements SOAPHandler</p>\n\n<pre><code>public class LogMessageHandler implements SOAPHandler&lt;SOAPMessageContext&gt; {\n\n@Override\npublic Set&lt;QName&gt; getHeaders() {\n    return Collections.EMPTY_SET;\n}\n\n@Override\npublic boolean handleMessage(SOAPMessageContext context) {\n    SOAPMessage msg = context.getMessage(); //Line 1\n    try {\n        msg.writeTo(System.out);  //Line 3\n    } catch (Exception ex) {\n        Logger.getLogger(LogMessageHandler.class.getName()).log(Level.SEVERE, null, ex);\n    } \n    return true;\n}\n\n@Override\npublic boolean handleFault(SOAPMessageContext context) {\n    return true;\n}\n\n@Override\npublic void close(MessageContext context) {\n}\n}\n</code></pre>\n\n<p>// Programatically add your LogMessageHandler</p>\n\n<pre><code>   com.csd.Service service = null;\n    URL url = new URL(\"https://service.demo.com/ResService.svc?wsdl\");\n\n    service = new com.csd.Service(url);\n\n    com.csd.IService port = service.getBasicHttpBindingIService();\n    BindingProvider bindingProvider = (BindingProvider)port;\n    Binding binding = bindingProvider.getBinding();\n    List&lt;Handler&gt; handlerChain = binding.getHandlerChain();\n    handlerChain.add(new LogMessageHandler());\n    binding.setHandlerChain(handlerChain);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2229952,"reputation":546,"user_id":1967822,"accept_rate":20,"display_name":"userfb"},"score":0,"creation_date":1403705442,"post_id":19817276,"comment_id":37762708,"body_markdown":"For me work with com.sun.xml.ws.transport.http.client.HttpTransportPipe.dump = true;","body":"For me work with com.sun.xml.ws.transport.http.client.HttpTransportPipe.dump = true;"}],"tags":[],"owner":{"account_id":177341,"reputation":2492,"user_id":1695242,"display_name":"jozh"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1383754930,"creation_date":1383754930,"answer_id":19817276,"question_id":1945618,"body_markdown":"In **runtime** you could simply execute\r\n\r\n    com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump = true\r\n\r\nas *dump* is a public var defined in the class as follows\r\n\r\n    public static boolean dump;","title":"Tracing XML request/responses with JAX-WS","body":"<p>In <strong>runtime</strong> you could simply execute</p>\n\n<pre><code>com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump = true\n</code></pre>\n\n<p>as <em>dump</em> is a public var defined in the class as follows</p>\n\n<pre><code>public static boolean dump;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3885931,"reputation":97,"user_id":3217296,"accept_rate":33,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1413214370,"creation_date":1413214370,"answer_id":26343654,"question_id":1945618,"body_markdown":"I am posting a new answer, as I do not have enough reputation to comment on the one provided by [Antonio](https://stackoverflow.com/users/236773/antonio) (see: https://stackoverflow.com/a/1957777).\r\n\r\nIn case you want the SOAP message to be printed in a file (e.g. via Log4j), you may use:\r\n\r\n    OutputStream os = new ByteArrayOutputStream();\r\n    javax.xml.soap.SOAPMessage soapMsg = context.getMessage();\r\n    soapMsg.writeTo(os);\r\n    Logger LOG = Logger.getLogger(SOAPLoggingHandler.class); // Assuming SOAPLoggingHandler is the class name\r\n    LOG.info(os.toString());\r\n\r\nPlease note that under certain circumstances, the method call writeTo() may not behave as expected (see: https://community.oracle.com/thread/1123104?tstart=0 or https://www.java.net/node/691073), therefore the following code will do the trick:\r\n\r\n    javax.xml.soap.SOAPMessage soapMsg = context.getMessage();\r\n    com.sun.xml.ws.api.message.Message msg = new com.sun.xml.ws.message.saaj.SAAJMessage(soapMsg);\r\n    com.sun.xml.ws.api.message.Packet packet = new com.sun.xml.ws.api.message.Packet(msg);\r\n    Logger LOG = Logger.getLogger(SOAPLoggingHandler.class); // Assuming SOAPLoggingHandler is the class name\r\n    LOG.info(packet.toString());","title":"Tracing XML request/responses with JAX-WS","body":"<p>I am posting a new answer, as I do not have enough reputation to comment on the one provided by <a href=\"https://stackoverflow.com/users/236773/antonio\">Antonio</a> (see: <a href=\"https://stackoverflow.com/a/1957777\">https://stackoverflow.com/a/1957777</a>).</p>\n\n<p>In case you want the SOAP message to be printed in a file (e.g. via Log4j), you may use:</p>\n\n<pre><code>OutputStream os = new ByteArrayOutputStream();\njavax.xml.soap.SOAPMessage soapMsg = context.getMessage();\nsoapMsg.writeTo(os);\nLogger LOG = Logger.getLogger(SOAPLoggingHandler.class); // Assuming SOAPLoggingHandler is the class name\nLOG.info(os.toString());\n</code></pre>\n\n<p>Please note that under certain circumstances, the method call writeTo() may not behave as expected (see: <a href=\"https://community.oracle.com/thread/1123104?tstart=0\" rel=\"nofollow noreferrer\">https://community.oracle.com/thread/1123104?tstart=0</a> or <a href=\"https://www.java.net/node/691073\" rel=\"nofollow noreferrer\">https://www.java.net/node/691073</a>), therefore the following code will do the trick:</p>\n\n<pre><code>javax.xml.soap.SOAPMessage soapMsg = context.getMessage();\ncom.sun.xml.ws.api.message.Message msg = new com.sun.xml.ws.message.saaj.SAAJMessage(soapMsg);\ncom.sun.xml.ws.api.message.Packet packet = new com.sun.xml.ws.api.message.Packet(msg);\nLogger LOG = Logger.getLogger(SOAPLoggingHandler.class); // Assuming SOAPLoggingHandler is the class name\nLOG.info(packet.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6316353,"reputation":113,"user_id":4906158,"accept_rate":50,"display_name":"Aneesh Barthakur"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1432269424,"creation_date":1432269424,"answer_id":30388456,"question_id":1945618,"body_markdown":"am I correct in understanding that you want to change/access the raw XML message?\r\n\r\nIf so, you (or since this is five years old, the next guy) might want to have a look at the Provider interface that is part of the JAXWS. The client counterpart is done using the &quot;Dispatch&quot; class. Anyway, you don&#39;t have to add handlers or interceptors. You still CAN, of course. The downside is this way, you are COMPLETELY responsible for building the SOAPMessage, but its easy, and if that&#39;s what you want(like I did) this is perfect.\r\n\r\nHere is an example for the server side(bit clumsy, it was just for experimenting)-\r\n\r\n    @WebServiceProvider(portName=&quot;Provider1Port&quot;,serviceName=&quot;Provider1&quot;,targetNamespace = &quot;http://localhost:8123/SoapContext/SoapPort1&quot;)\r\n    @ServiceMode(value=Service.Mode.MESSAGE)\r\n    public class Provider1 implements Provider&lt;SOAPMessage&gt;\r\n    {\r\n      public Provider1()\r\n      {\r\n      }\r\n     \r\n      public SOAPMessage invoke(SOAPMessage request)\r\n      {\ttry{\r\n      \r\n       \t  \r\n       \t\tFile log= new File(&quot;/home/aneeshb/practiceinapachecxf/log.txt&quot;);//creates file object\r\n    \t\tFileWriter fw=new FileWriter(log);//creates filewriter and actually creates file on disk\r\n    \t\r\n    \t\t\tfw.write(&quot;Provider has been invoked&quot;);\r\n    \t\t\tfw.write(&quot;This is the request&quot;+request.getSOAPBody().getTextContent());\r\n    \t\t\t \r\n       \t  MessageFactory mf = MessageFactory.newInstance();\r\n          SOAPFactory sf = SOAPFactory.newInstance();\r\n           \r\n          SOAPMessage response = mf.createMessage();\r\n          SOAPBody respBody = response.getSOAPBody();\r\n          Name bodyName = sf.createName(&quot;Provider1Insertedmainbody&quot;);\r\n          respBody.addBodyElement(bodyName);\r\n          SOAPElement respContent = respBody.addChildElement(&quot;provider1&quot;);\r\n          respContent.setValue(&quot;123.00&quot;);\r\n          response.saveChanges();\r\n          fw.write(&quot;This is the response&quot;+response.getSOAPBody().getTextContent());\r\n          fw.close();\r\n          return response;}catch(Exception e){return request;}\r\n    \r\n    \t\r\n       }\r\n    }\r\n\t\r\n\r\nYou publish it like you would an SEI,\r\n\r\n    public class ServerJSFB {\r\n    \r\n        protected ServerJSFB() throws Exception {\r\n            System.out.println(&quot;Starting Server&quot;);\r\n            System.out.println(&quot;Starting SoapService1&quot;);\r\n            \r\n            Object implementor = new Provider1();//create implementor\r\n            String address = &quot;http://localhost:8123/SoapContext/SoapPort1&quot;;\r\n            \r\n            JaxWsServerFactoryBean svrFactory = new JaxWsServerFactoryBean();//create serverfactorybean\r\n            \r\n            svrFactory.setAddress(address);\r\n            svrFactory.setServiceBean(implementor);\r\n    \r\n            svrFactory.create();//create the server. equivalent to publishing the endpoint\r\n            System.out.println(&quot;Starting SoapService1&quot;);\r\n      }\r\n\r\n    public static void main(String args[]) throws Exception {\r\n        new ServerJSFB();\r\n        System.out.println(&quot;Server ready...&quot;);\r\n\r\n        Thread.sleep(10 * 60 * 1000);\r\n        System.out.println(&quot;Server exiting&quot;);\r\n        System.exit(0);\r\n    }\r\n    }\r\n\r\nOr you can use an Endpoint class for it.\r\nHope that has been helpful.\r\n\r\nAnd oh, if you want you needn&#39;t deal with headers and stuff, if you change the service mode to PAYLOAD(You&#39;ll only get the Soap Body).\r\n\r\n","title":"Tracing XML request/responses with JAX-WS","body":"<p>am I correct in understanding that you want to change/access the raw XML message?</p>\n\n<p>If so, you (or since this is five years old, the next guy) might want to have a look at the Provider interface that is part of the JAXWS. The client counterpart is done using the \"Dispatch\" class. Anyway, you don't have to add handlers or interceptors. You still CAN, of course. The downside is this way, you are COMPLETELY responsible for building the SOAPMessage, but its easy, and if that's what you want(like I did) this is perfect.</p>\n\n<p>Here is an example for the server side(bit clumsy, it was just for experimenting)-</p>\n\n<pre><code>@WebServiceProvider(portName=\"Provider1Port\",serviceName=\"Provider1\",targetNamespace = \"http://localhost:8123/SoapContext/SoapPort1\")\n@ServiceMode(value=Service.Mode.MESSAGE)\npublic class Provider1 implements Provider&lt;SOAPMessage&gt;\n{\n  public Provider1()\n  {\n  }\n\n  public SOAPMessage invoke(SOAPMessage request)\n  { try{\n\n\n        File log= new File(\"/home/aneeshb/practiceinapachecxf/log.txt\");//creates file object\n        FileWriter fw=new FileWriter(log);//creates filewriter and actually creates file on disk\n\n            fw.write(\"Provider has been invoked\");\n            fw.write(\"This is the request\"+request.getSOAPBody().getTextContent());\n\n      MessageFactory mf = MessageFactory.newInstance();\n      SOAPFactory sf = SOAPFactory.newInstance();\n\n      SOAPMessage response = mf.createMessage();\n      SOAPBody respBody = response.getSOAPBody();\n      Name bodyName = sf.createName(\"Provider1Insertedmainbody\");\n      respBody.addBodyElement(bodyName);\n      SOAPElement respContent = respBody.addChildElement(\"provider1\");\n      respContent.setValue(\"123.00\");\n      response.saveChanges();\n      fw.write(\"This is the response\"+response.getSOAPBody().getTextContent());\n      fw.close();\n      return response;}catch(Exception e){return request;}\n\n\n   }\n}\n</code></pre>\n\n<p>You publish it like you would an SEI,</p>\n\n<pre><code>public class ServerJSFB {\n\n    protected ServerJSFB() throws Exception {\n        System.out.println(\"Starting Server\");\n        System.out.println(\"Starting SoapService1\");\n\n        Object implementor = new Provider1();//create implementor\n        String address = \"http://localhost:8123/SoapContext/SoapPort1\";\n\n        JaxWsServerFactoryBean svrFactory = new JaxWsServerFactoryBean();//create serverfactorybean\n\n        svrFactory.setAddress(address);\n        svrFactory.setServiceBean(implementor);\n\n        svrFactory.create();//create the server. equivalent to publishing the endpoint\n        System.out.println(\"Starting SoapService1\");\n  }\n\npublic static void main(String args[]) throws Exception {\n    new ServerJSFB();\n    System.out.println(\"Server ready...\");\n\n    Thread.sleep(10 * 60 * 1000);\n    System.out.println(\"Server exiting\");\n    System.exit(0);\n}\n}\n</code></pre>\n\n<p>Or you can use an Endpoint class for it.\nHope that has been helpful.</p>\n\n<p>And oh, if you want you needn't deal with headers and stuff, if you change the service mode to PAYLOAD(You'll only get the Soap Body).</p>\n"},{"comments":[{"owner":{"account_id":42741,"reputation":655,"user_id":2521899,"accept_rate":100,"display_name":"Iofacture"},"score":0,"creation_date":1503979746,"post_id":34784290,"comment_id":78819473,"body_markdown":"I am following this exactly.  I am printing out the message after making modifications to the header, however i am not seeing those changes. It appears as though the message doesn&#39;t change until after it leaves the handleMessage method","body":"I am following this exactly.  I am printing out the message after making modifications to the header, however i am not seeing those changes. It appears as though the message doesn&#39;t change until after it leaves the handleMessage method"},{"owner":{"account_id":42741,"reputation":655,"user_id":2521899,"accept_rate":100,"display_name":"Iofacture"},"score":0,"creation_date":1503980744,"post_id":34784290,"comment_id":78819712,"body_markdown":"If I call out to print message twice, the second time has the update.  Very odd","body":"If I call out to print message twice, the second time has the update.  Very odd"},{"owner":{"account_id":259375,"reputation":131,"user_id":542205,"display_name":"Heiner"},"score":1,"creation_date":1626191866,"post_id":34784290,"comment_id":120825086,"body_markdown":"Works for me on JBoss 7.3. Txs","body":"Works for me on JBoss 7.3. Txs"}],"tags":[],"owner":{"account_id":1875874,"reputation":71921,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"comment_count":3,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1526962322,"creation_date":1452758209,"answer_id":34784290,"question_id":1945618,"body_markdown":"Inject `SOAPHandler` to endpoint interface. we can trace the SOAP request and response\r\n\r\nImplementing SOAPHandler with **Programmatic** \r\n     \r\n    ServerImplService service = new ServerImplService();\r\n    Server port = imgService.getServerImplPort();\r\n    /**********for tracing xml inbound and outbound******************************/\r\n    Binding binding = ((BindingProvider)port).getBinding();\r\n    List&lt;Handler&gt; handlerChain = binding.getHandlerChain();\r\n    handlerChain.add(new SOAPLoggingHandler());\r\n    binding.setHandlerChain(handlerChain);\r\n\r\n**Declarative**  by adding `@HandlerChain(file = &quot;handlers.xml&quot;)` annotation to your endpoint interface.\r\n\r\n\r\nhandlers.xml\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;handler-chains xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;&gt;\r\n    \t&lt;handler-chain&gt;\r\n    \t\t&lt;handler&gt;\r\n    \t\t\t&lt;handler-class&gt;SOAPLoggingHandler&lt;/handler-class&gt;\r\n    \t\t&lt;/handler&gt;\r\n    \t&lt;/handler-chain&gt;\r\n    &lt;/handler-chains&gt;\r\n\r\nSOAPLoggingHandler.java  \r\n\r\n\r\n    /*\r\n     * This simple SOAPHandler will output the contents of incoming\r\n     * and outgoing messages.\r\n     */\r\n    \r\n      \r\n    public class SOAPLoggingHandler implements SOAPHandler&lt;SOAPMessageContext&gt; {\r\n    \tpublic Set&lt;QName&gt; getHeaders() {\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \tpublic boolean handleMessage(SOAPMessageContext context) {\r\n    \t\tBoolean isRequest = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);\r\n    \t\tif (isRequest) {\r\n    \t\t\tSystem.out.println(&quot;is Request&quot;);\r\n    \t\t} else {\r\n    \t\t\tSystem.out.println(&quot;is Response&quot;);\r\n    \t\t}\r\n    \t\tSOAPMessage message = context.getMessage();\r\n    \t\ttry {\r\n    \t\t\tSOAPEnvelope envelope = message.getSOAPPart().getEnvelope();\r\n    \t\t\tSOAPHeader header = envelope.getHeader();\r\n    \t\t\tmessage.writeTo(System.out);\r\n    \t\t} catch (SOAPException | IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \tpublic boolean handleFault(SOAPMessageContext smc) {\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t// nothing to clean up\r\n    \tpublic void close(MessageContext messageContext) {\r\n    \t}\r\n    \r\n    }","title":"Tracing XML request/responses with JAX-WS","body":"<p>Inject <code>SOAPHandler</code> to endpoint interface. we can trace the SOAP request and response</p>\n\n<p>Implementing SOAPHandler with <strong>Programmatic</strong> </p>\n\n<pre><code>ServerImplService service = new ServerImplService();\nServer port = imgService.getServerImplPort();\n/**********for tracing xml inbound and outbound******************************/\nBinding binding = ((BindingProvider)port).getBinding();\nList&lt;Handler&gt; handlerChain = binding.getHandlerChain();\nhandlerChain.add(new SOAPLoggingHandler());\nbinding.setHandlerChain(handlerChain);\n</code></pre>\n\n<p><strong>Declarative</strong>  by adding <code>@HandlerChain(file = \"handlers.xml\")</code> annotation to your endpoint interface.</p>\n\n<p>handlers.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;handler-chains xmlns=\"http://java.sun.com/xml/ns/javaee\"&gt;\n    &lt;handler-chain&gt;\n        &lt;handler&gt;\n            &lt;handler-class&gt;SOAPLoggingHandler&lt;/handler-class&gt;\n        &lt;/handler&gt;\n    &lt;/handler-chain&gt;\n&lt;/handler-chains&gt;\n</code></pre>\n\n<p>SOAPLoggingHandler.java  </p>\n\n<pre><code>/*\n * This simple SOAPHandler will output the contents of incoming\n * and outgoing messages.\n */\n\n\npublic class SOAPLoggingHandler implements SOAPHandler&lt;SOAPMessageContext&gt; {\n    public Set&lt;QName&gt; getHeaders() {\n        return null;\n    }\n\n    public boolean handleMessage(SOAPMessageContext context) {\n        Boolean isRequest = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);\n        if (isRequest) {\n            System.out.println(\"is Request\");\n        } else {\n            System.out.println(\"is Response\");\n        }\n        SOAPMessage message = context.getMessage();\n        try {\n            SOAPEnvelope envelope = message.getSOAPPart().getEnvelope();\n            SOAPHeader header = envelope.getHeader();\n            message.writeTo(System.out);\n        } catch (SOAPException | IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        return true;\n    }\n\n    public boolean handleFault(SOAPMessageContext smc) {\n        return true;\n    }\n\n    // nothing to clean up\n    public void close(MessageContext messageContext) {\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":434060,"reputation":654,"user_id":2708444,"display_name":"vbg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464725962,"creation_date":1464725962,"answer_id":37554930,"question_id":1945618,"body_markdown":"Actually. If you look into sources of HttpClientTransport you will notice that it is also writing messages into java.util.logging.Logger. Which means you can see those messages in your logs too.\r\n\r\nFor example if you are using Log4J2 all you need to do is the following:\r\n\r\n - add JUL-Log4J2 bridge into your class path\r\n - set TRACE level for com.sun.xml.internal.ws.transport.http.client package.\r\n - add -Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager system property to your applicaton start command line\r\n\r\nAfter these steps you start seeing SOAP messages in your logs.","title":"Tracing XML request/responses with JAX-WS","body":"<p>Actually. If you look into sources of HttpClientTransport you will notice that it is also writing messages into java.util.logging.Logger. Which means you can see those messages in your logs too.</p>\n\n<p>For example if you are using Log4J2 all you need to do is the following:</p>\n\n<ul>\n<li>add JUL-Log4J2 bridge into your class path</li>\n<li>set TRACE level for com.sun.xml.internal.ws.transport.http.client package.</li>\n<li>add -Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager system property to your applicaton start command line</li>\n</ul>\n\n<p>After these steps you start seeing SOAP messages in your logs.</p>\n"},{"tags":[],"owner":{"account_id":3314513,"reputation":3779,"user_id":2787184,"accept_rate":65,"display_name":"2787184"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1567581897,"creation_date":1484912071,"answer_id":41762728,"question_id":1945618,"body_markdown":"Set the following system properties, this will enabled xml logging. You can set it in java or configuration file.\r\n\r\n    static{\r\n    \t\tSystem.setProperty(&quot;com.sun.xml.ws.transport.http.client.HttpTransportPipe.dump&quot;, &quot;true&quot;);\r\n    \t\tSystem.setProperty(&quot;com.sun.xml.ws.transport.http.HttpAdapter.dump&quot;, &quot;true&quot;);\r\n    \t\tSystem.setProperty(&quot;com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump&quot;, &quot;true&quot;);\r\n    \t\tSystem.setProperty(&quot;com.sun.xml.internal.ws.transport.http.HttpAdapter.dump&quot;, &quot;true&quot;);\r\n    \t\tSystem.setProperty(&quot;com.sun.xml.internal.ws.transport.http.HttpAdapter.dumpTreshold&quot;, &quot;999999&quot;);\r\n    \t}\r\n\r\nconsole logs:\r\n\r\n    INFO: Outbound Message\r\n    ---------------------------\r\n    ID: 1\r\n    Address: http://localhost:7001/arm-war/castService\r\n    Encoding: UTF-8\r\n    Http-Method: POST\r\n    Content-Type: text/xml\r\n    Headers: {Accept=[*/*], SOAPAction=[&quot;&quot;]}\r\n    Payload: xml\r\n    --------------------------------------\r\n    INFO: Inbound Message\r\n    ----------------------------\r\n    ID: 1\r\n    Response-Code: 200\r\n    Encoding: UTF-8\r\n    Content-Type: text/xml; charset=UTF-8\r\n    Headers: {content-type=[text/xml; charset=UTF-8], Date=[Fri, 20 Jan 2017 11:30:48 GMT], transfer-encoding=[chunked]}\r\n    Payload: xml\r\n    --------------------------------------","title":"Tracing XML request/responses with JAX-WS","body":"<p>Set the following system properties, this will enabled xml logging. You can set it in java or configuration file.</p>\n\n<pre><code>static{\n        System.setProperty(\"com.sun.xml.ws.transport.http.client.HttpTransportPipe.dump\", \"true\");\n        System.setProperty(\"com.sun.xml.ws.transport.http.HttpAdapter.dump\", \"true\");\n        System.setProperty(\"com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump\", \"true\");\n        System.setProperty(\"com.sun.xml.internal.ws.transport.http.HttpAdapter.dump\", \"true\");\n        System.setProperty(\"com.sun.xml.internal.ws.transport.http.HttpAdapter.dumpTreshold\", \"999999\");\n    }\n</code></pre>\n\n<p>console logs:</p>\n\n<pre><code>INFO: Outbound Message\n---------------------------\nID: 1\nAddress: http://localhost:7001/arm-war/castService\nEncoding: UTF-8\nHttp-Method: POST\nContent-Type: text/xml\nHeaders: {Accept=[*/*], SOAPAction=[\"\"]}\nPayload: xml\n--------------------------------------\nINFO: Inbound Message\n----------------------------\nID: 1\nResponse-Code: 200\nEncoding: UTF-8\nContent-Type: text/xml; charset=UTF-8\nHeaders: {content-type=[text/xml; charset=UTF-8], Date=[Fri, 20 Jan 2017 11:30:48 GMT], transfer-encoding=[chunked]}\nPayload: xml\n--------------------------------------\n</code></pre>\n"},{"comments":[{"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":0,"creation_date":1696265869,"post_id":47138014,"comment_id":136128056,"body_markdown":"Seems even `MesageHandler` deals with parsed XML response, meaning if you get corrupted response you won&#39;t be able to enter the handler. With pipe logger (like `com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe`) you have  a chance to see broken responses.","body":"Seems even <code>MesageHandler</code> deals with parsed XML response, meaning if you get corrupted response you won&#39;t be able to enter the handler. With pipe logger (like <code>com.sun.xml.internal.ws.transport.http.client.HttpTransportP&zwnj;&#8203;ipe</code>) you have  a chance to see broken responses."}],"tags":[],"owner":{"account_id":1629745,"reputation":18644,"user_id":1504556,"accept_rate":63,"display_name":"peterh"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1509975318,"creation_date":1509974594,"answer_id":47138014,"question_id":1945618,"body_markdown":"The answers listed here which guide you to use `SOAPHandler` are fully correct. The benefit of that approach is that it will work with any JAX-WS implementation, as SOAPHandler is part of the JAX-WS specification. However, the problem with SOAPHandler is that it implicitly attempts to represent the whole XML message in memory. This can lead to huge memory usage. Various implementations of JAX-WS have added their own workarounds for this. If you work with large requests or large responses, then you need to look into one of the proprietary approaches.\r\n\r\nSince you ask about &quot;the one included in JDK 1.5 or better&quot; I&#39;ll answer with respect to what is formally known as JAX-WS RI (aka Metro) which is what is included with the JDK.\r\n\r\nJAX-WS RI has a specific solution for this which is very efficient in terms of memory usage.\r\n\r\nSee https://javaee.github.io/metro/doc/user-guide/ch02.html#efficient-handlers-in-jax-ws-ri. Unfortunately that link is now broken but you can find it on WayBack Machine. I&#39;ll give the highlights below:\r\n\r\nThe Metro folks back in 2007 [introduced][1] an additional handler type, `MessageHandler&lt;MessageHandlerContext&gt;`, which is proprietary to Metro. It is far more efficient than `SOAPHandler&lt;SOAPMessageContext&gt;` as it doesn&#39;t try to do in-memory DOM representation.\r\n\r\nHere&#39;s the crucial text from the original blog article:\r\n\r\n&gt; MessageHandler:\r\n&gt;\r\n&gt; Utilizing the extensible Handler framework provided by JAX-WS\r\n&gt; Specification and the better Message abstraction in RI, we introduced\r\n&gt; a new handler called `MessageHandler` to extend your Web Service\r\n&gt; applications. MessageHandler is similar to SOAPHandler, except that\r\n&gt; implementations of it gets access to `MessageHandlerContext` (an\r\n&gt; extension of MessageContext).  Through MessageHandlerContext one can\r\n&gt; access the Message and process it using the Message API. As I put in\r\n&gt; the title of the blog, this handler lets you work on Message, which\r\n&gt; provides efficient ways to access/process the message not just a DOM\r\n&gt; based message. The programming model of the handlers is same and the\r\n&gt; Message handlers can be mixed with standard Logical and SOAP handlers.\r\n&gt; I have added a sample in JAX-WS RI 2.1.3 showing the use of\r\n&gt; MessageHandler to log messages and here is a snippet from the sample:\r\n\r\n    public class LoggingHandler implements MessageHandler&lt;MessageHandlerContext&gt; {\r\n        public boolean handleMessage(MessageHandlerContext mhc) {\r\n            Message m = mhc.getMessage().copy();\r\n            XMLStreamWriter writer = XMLStreamWriterFactory.create(System.out);\r\n            try {\r\n                m.writeTo(writer);\r\n            } catch (XMLStreamException e) {\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    \r\n        public boolean handleFault(MessageHandlerContext mhc) {\r\n            ..... \r\n            return true;\r\n        }\r\n        \r\n        public void close(MessageContext messageContext) {    }\r\n       \r\n        public Set getHeaders() {\r\n            return null;\r\n        }\r\n    }\r\n\r\n(end quote from 2007 blog post)\r\n\r\nNeedless to say your custom Handler, `LoggingHandler` in the example, needs to be added to your Handler Chain to have any effect. This is the same as adding any other `Handler`, so you can look in the [other answers][2] on this page for how to do that.\r\n\r\nYou can find a [full example][3] in the [Metro GitHub repo][4].\r\n\r\n\r\n  [1]: https://github.com/javaee/metro-jax-ws/issues/482\r\n  [2]: https://stackoverflow.com/a/34784290/1504556\r\n  [3]: https://github.com/javaee/metro-jax-ws/blob/master/jaxws-ri/samples/src/main/samples/efficient_handler/\r\n  [4]: https://github.com/javaee/metro-jax-ws/","title":"Tracing XML request/responses with JAX-WS","body":"<p>The answers listed here which guide you to use <code>SOAPHandler</code> are fully correct. The benefit of that approach is that it will work with any JAX-WS implementation, as SOAPHandler is part of the JAX-WS specification. However, the problem with SOAPHandler is that it implicitly attempts to represent the whole XML message in memory. This can lead to huge memory usage. Various implementations of JAX-WS have added their own workarounds for this. If you work with large requests or large responses, then you need to look into one of the proprietary approaches.</p>\n\n<p>Since you ask about \"the one included in JDK 1.5 or better\" I'll answer with respect to what is formally known as JAX-WS RI (aka Metro) which is what is included with the JDK.</p>\n\n<p>JAX-WS RI has a specific solution for this which is very efficient in terms of memory usage.</p>\n\n<p>See <a href=\"https://javaee.github.io/metro/doc/user-guide/ch02.html#efficient-handlers-in-jax-ws-ri\" rel=\"nofollow noreferrer\">https://javaee.github.io/metro/doc/user-guide/ch02.html#efficient-handlers-in-jax-ws-ri</a>. Unfortunately that link is now broken but you can find it on WayBack Machine. I'll give the highlights below:</p>\n\n<p>The Metro folks back in 2007 <a href=\"https://github.com/javaee/metro-jax-ws/issues/482\" rel=\"nofollow noreferrer\">introduced</a> an additional handler type, <code>MessageHandler&lt;MessageHandlerContext&gt;</code>, which is proprietary to Metro. It is far more efficient than <code>SOAPHandler&lt;SOAPMessageContext&gt;</code> as it doesn't try to do in-memory DOM representation.</p>\n\n<p>Here's the crucial text from the original blog article:</p>\n\n<blockquote>\n  <p>MessageHandler:</p>\n  \n  <p>Utilizing the extensible Handler framework provided by JAX-WS\n  Specification and the better Message abstraction in RI, we introduced\n  a new handler called <code>MessageHandler</code> to extend your Web Service\n  applications. MessageHandler is similar to SOAPHandler, except that\n  implementations of it gets access to <code>MessageHandlerContext</code> (an\n  extension of MessageContext).  Through MessageHandlerContext one can\n  access the Message and process it using the Message API. As I put in\n  the title of the blog, this handler lets you work on Message, which\n  provides efficient ways to access/process the message not just a DOM\n  based message. The programming model of the handlers is same and the\n  Message handlers can be mixed with standard Logical and SOAP handlers.\n  I have added a sample in JAX-WS RI 2.1.3 showing the use of\n  MessageHandler to log messages and here is a snippet from the sample:</p>\n</blockquote>\n\n<pre><code>public class LoggingHandler implements MessageHandler&lt;MessageHandlerContext&gt; {\n    public boolean handleMessage(MessageHandlerContext mhc) {\n        Message m = mhc.getMessage().copy();\n        XMLStreamWriter writer = XMLStreamWriterFactory.create(System.out);\n        try {\n            m.writeTo(writer);\n        } catch (XMLStreamException e) {\n            e.printStackTrace();\n            return false;\n        }\n        return true;\n    }\n\n    public boolean handleFault(MessageHandlerContext mhc) {\n        ..... \n        return true;\n    }\n\n    public void close(MessageContext messageContext) {    }\n\n    public Set getHeaders() {\n        return null;\n    }\n}\n</code></pre>\n\n<p>(end quote from 2007 blog post)</p>\n\n<p>Needless to say your custom Handler, <code>LoggingHandler</code> in the example, needs to be added to your Handler Chain to have any effect. This is the same as adding any other <code>Handler</code>, so you can look in the <a href=\"https://stackoverflow.com/a/34784290/1504556\">other answers</a> on this page for how to do that.</p>\n\n<p>You can find a <a href=\"https://github.com/javaee/metro-jax-ws/blob/master/jaxws-ri/samples/src/main/samples/efficient_handler/\" rel=\"nofollow noreferrer\">full example</a> in the <a href=\"https://github.com/javaee/metro-jax-ws/\" rel=\"nofollow noreferrer\">Metro GitHub repo</a>.</p>\n"},{"comments":[{"owner":{"account_id":3760398,"reputation":4555,"user_id":3125587,"accept_rate":88,"display_name":"Pivoman"},"score":0,"creation_date":1605176909,"post_id":54652868,"comment_id":114573364,"body_markdown":"I&#39;m trying to find a way, how to log this in logback, but this doesn&#39;t worked for me (I tried all combinations of system props, but logs are still logged as standard output). Your logger is trace and logs are debug. Can you post whole logback-spring.xml please?","body":"I&#39;m trying to find a way, how to log this in logback, but this doesn&#39;t worked for me (I tried all combinations of system props, but logs are still logged as standard output). Your logger is trace and logs are debug. Can you post whole logback-spring.xml please?"}],"tags":[],"owner":{"account_id":193533,"reputation":411,"user_id":435327,"display_name":"Christian Goudreau"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1549983354,"creation_date":1549983354,"answer_id":54652868,"question_id":1945618,"body_markdown":"with logback.xml configuration files, you can do : \r\n\r\n    &lt;logger name=&quot;com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n    &lt;/logger&gt;\r\n\r\nThat will log the request and the response like this (depending on your configuration for the log output) :\r\n\r\n    09:50:23.266 [qtp1068445309-21] DEBUG c.s.x.i.w.t.h.c.HttpTransportPipe - ---[HTTP request - http://xyz:8081/xyz.svc]---\r\n    Accept: application/soap+xml, multipart/related\r\n    Content-Type: application/soap+xml; charset=utf-8;action=&quot;http://xyz.Web.Services/IServiceBase/GetAccessTicket&quot;\r\n    User-Agent: JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e\r\n    &lt;?xml version=&quot;1.0&quot; ?&gt;&lt;S:Envelope xmlns:S=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&gt;[CONTENT REMOVED]&lt;/S:Envelope&gt;--------------------\r\n    \r\n    09:50:23.312 [qtp1068445309-21] DEBUG c.s.x.i.w.t.h.c.HttpTransportPipe - ---[HTTP response - http://xyz:8081/xyz.svc - 200]---\r\n    null: HTTP/1.1 200 OK\r\n    Content-Length: 792\r\n    Content-Type: application/soap+xml; charset=utf-8\r\n    Date: Tue, 12 Feb 2019 14:50:23 GMT\r\n    Server: Microsoft-IIS/10.0\r\n    X-Powered-By: ASP.NET\r\n    &lt;s:Envelope xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:a=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;[CONTENT REMOVED]&lt;/s:Envelope&gt;--------------------\r\n\r\n","title":"Tracing XML request/responses with JAX-WS","body":"<p>with logback.xml configuration files, you can do : </p>\n\n<pre><code>&lt;logger name=\"com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe\" level=\"trace\" additivity=\"false\"&gt;\n    &lt;appender-ref ref=\"STDOUT\"/&gt;\n&lt;/logger&gt;\n</code></pre>\n\n<p>That will log the request and the response like this (depending on your configuration for the log output) :</p>\n\n<pre><code>09:50:23.266 [qtp1068445309-21] DEBUG c.s.x.i.w.t.h.c.HttpTransportPipe - ---[HTTP request - http://xyz:8081/xyz.svc]---\nAccept: application/soap+xml, multipart/related\nContent-Type: application/soap+xml; charset=utf-8;action=\"http://xyz.Web.Services/IServiceBase/GetAccessTicket\"\nUser-Agent: JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e\n&lt;?xml version=\"1.0\" ?&gt;&lt;S:Envelope xmlns:S=\"http://www.w3.org/2003/05/soap-envelope\"&gt;[CONTENT REMOVED]&lt;/S:Envelope&gt;--------------------\n\n09:50:23.312 [qtp1068445309-21] DEBUG c.s.x.i.w.t.h.c.HttpTransportPipe - ---[HTTP response - http://xyz:8081/xyz.svc - 200]---\nnull: HTTP/1.1 200 OK\nContent-Length: 792\nContent-Type: application/soap+xml; charset=utf-8\nDate: Tue, 12 Feb 2019 14:50:23 GMT\nServer: Microsoft-IIS/10.0\nX-Powered-By: ASP.NET\n&lt;s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:a=\"http://www.w3.org/2005/08/addressing\"&gt;[CONTENT REMOVED]&lt;/s:Envelope&gt;--------------------\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16380191,"reputation":11,"user_id":11831420,"display_name":"JChanthamontry"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1564167921,"creation_date":1564156678,"answer_id":57223466,"question_id":1945618,"body_markdown":"I had been trying to find some framework library to log the web service soap request and response for a couple days. The code below fixed the issue for me:\r\n\r\n \r\n\r\n    System.setProperty(&quot;com.sun.xml.ws.transport.http.client.HttpTransportPipe.dump&quot;, &quot;true&quot;);\r\n            System.setProperty(&quot;com.sun.xml.ws.transport.http.HttpAdapter.dump&quot;, &quot;true&quot;);\r\n            System.setProperty(&quot;com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump&quot;, &quot;true&quot;);\r\n            System.setProperty(&quot;com.sun.xml.internal.ws.transport.http.HttpAdapter.dump&quot;, &quot;true&quot;);","title":"Tracing XML request/responses with JAX-WS","body":"<p>I had been trying to find some framework library to log the web service soap request and response for a couple days. The code below fixed the issue for me:</p>\n\n<pre><code>System.setProperty(\"com.sun.xml.ws.transport.http.client.HttpTransportPipe.dump\", \"true\");\n        System.setProperty(\"com.sun.xml.ws.transport.http.HttpAdapter.dump\", \"true\");\n        System.setProperty(\"com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump\", \"true\");\n        System.setProperty(\"com.sun.xml.internal.ws.transport.http.HttpAdapter.dump\", \"true\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1379180,"reputation":66,"user_id":1312559,"display_name":"Mikko Tuominen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586967238,"creation_date":1586967238,"answer_id":61233496,"question_id":1945618,"body_markdown":"There are a couple of answers using SoapHandlers in this thread. You should know that SoapHandlers modify the message if `writeTo(out)` is called.\r\n\r\nCalling SOAPMessage&#39;s `writeTo(out)` method automatically calls `saveChanges()` method also. As a result all attached MTOM/XOP binary data in a message is lost.\r\n\r\nI am not sure why this is happening, but it seems to be a documented feature.\r\n\r\n&gt; In addition, this method marks the point at which the data from all constituent AttachmentPart objects are pulled into the message.\r\n\r\n[https://docs.oracle.com/javase/7/docs/api/javax/xml/soap/SOAPMessage.html#saveChanges()][1]\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/javax/xml/soap/SOAPMessage.html#saveChanges()","title":"Tracing XML request/responses with JAX-WS","body":"<p>There are a couple of answers using SoapHandlers in this thread. You should know that SoapHandlers modify the message if <code>writeTo(out)</code> is called.</p>\n\n<p>Calling SOAPMessage's <code>writeTo(out)</code> method automatically calls <code>saveChanges()</code> method also. As a result all attached MTOM/XOP binary data in a message is lost.</p>\n\n<p>I am not sure why this is happening, but it seems to be a documented feature.</p>\n\n<blockquote>\n  <p>In addition, this method marks the point at which the data from all constituent AttachmentPart objects are pulled into the message.</p>\n</blockquote>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/javax/xml/soap/SOAPMessage.html#saveChanges()\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/javax/xml/soap/SOAPMessage.html#saveChanges()</a></p>\n"},{"tags":[],"owner":{"account_id":1379180,"reputation":66,"user_id":1312559,"display_name":"Mikko Tuominen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586968080,"creation_date":1586968080,"answer_id":61233764,"question_id":1945618,"body_markdown":"If you happen to run a IBM Liberty app server, just add [ibm-ws-bnd.xml](https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/rwlp_jaxws_bnd.html) into WEB-INF directory.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;webservices-bnd\r\n\txmlns=&quot;http://websphere.ibm.com/xml/ns/javaee&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://websphere.ibm.com/xml/ns/javaee http://websphere.ibm.com/xml/ns/javaee/ibm-ws-bnd_1_0.xsd&quot;\r\n\tversion=&quot;1.0&quot;&gt;\r\n\t&lt;webservice-endpoint-properties\r\n\t\tenableLoggingInOutInterceptor=&quot;true&quot; /&gt;\r\n&lt;/webservices-bnd&gt;\r\n```","title":"Tracing XML request/responses with JAX-WS","body":"<p>If you happen to run a IBM Liberty app server, just add <a href=\"https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/rwlp_jaxws_bnd.html\" rel=\"nofollow noreferrer\">ibm-ws-bnd.xml</a> into WEB-INF directory.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;webservices-bnd\n    xmlns=\"http://websphere.ibm.com/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://websphere.ibm.com/xml/ns/javaee http://websphere.ibm.com/xml/ns/javaee/ibm-ws-bnd_1_0.xsd\"\n    version=\"1.0\"&gt;\n    &lt;webservice-endpoint-properties\n        enableLoggingInOutInterceptor=\"true\" /&gt;\n&lt;/webservices-bnd&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6783557,"reputation":1252,"user_id":5223047,"display_name":"ltlBeBoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615499880,"creation_date":1615499880,"answer_id":66591144,"question_id":1945618,"body_markdown":"**Solution for Glassfish/Payara**\r\n\r\nAdd the following entries to the logger settings (log level `FINER`):\r\n\r\n - com.sun.xml.ws.transport.http.client.HttpTransportPipe\r\n - com.sun.xml.ws.transport.http.HttpAdapter\r\n\r\nFound [here][1].\r\n\r\n\r\n  [1]: https://github.com/javaee/metro-jax-ws/issues/791#issuecomment-296748123","title":"Tracing XML request/responses with JAX-WS","body":"<p><strong>Solution for Glassfish/Payara</strong></p>\n<p>Add the following entries to the logger settings (log level <code>FINER</code>):</p>\n<ul>\n<li>com.sun.xml.ws.transport.http.client.HttpTransportPipe</li>\n<li>com.sun.xml.ws.transport.http.HttpAdapter</li>\n</ul>\n<p>Found <a href=\"https://github.com/javaee/metro-jax-ws/issues/791#issuecomment-296748123\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":84779,"reputation":3077,"user_id":236773,"display_name":"Antonio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303803,"favorite_count":0,"down_vote_count":1,"up_vote_count":210,"accepted_answer_id":1957777,"answer_count":20,"score":209,"last_activity_date":1701356157,"creation_date":1261479280,"question_id":1945618,"body_markdown":"Is there an easy way (aka: not using a proxy) to get access to the raw request/response XML for a webservice published with JAX-WS reference implementation (the one included in JDK 1.5 and better) ?\r\nBeing able to do that via code is what I need to do.\r\nJust having it logged to a file by clever logging configurations would be nice but enough.\r\n\r\nI know that other more complex and complete frameworks exist that might do that, but I would like to keep it as simple as possible and axis, cxf, etc all add considerable overhead that I want to avoid.\r\n\r\nThanks!","title":"Tracing XML request/responses with JAX-WS","body":"<p>Is there an easy way (aka: not using a proxy) to get access to the raw request/response XML for a webservice published with JAX-WS reference implementation (the one included in JDK 1.5 and better) ?\nBeing able to do that via code is what I need to do.\nJust having it logged to a file by clever logging configurations would be nice but enough.</p>\n\n<p>I know that other more complex and complete frameworks exist that might do that, but I would like to keep it as simple as possible and axis, cxf, etc all add considerable overhead that I want to avoid.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","mysql","spring-boot","hibernate"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1657206169,"post_id":72899893,"comment_id":128760650,"body_markdown":"You have no `@Transactional` it seems. Your call `izabrane.get(i).addNabavkaKorpa(nk);` causes this error, because you did load the data at some point, but didn&#39;t initialize the dependencies properly. Also, consider naming your entities/variables in English, especially when asking a question here. It makes it much easier for us to understand your code","body":"You have no <code>@Transactional</code> it seems. Your call <code>izabrane.get(i).addNabavkaKorpa(nk);</code> causes this error, because you did load the data at some point, but didn&#39;t initialize the dependencies properly. Also, consider naming your entities/variables in English, especially when asking a question here. It makes it much easier for us to understand your code"},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1657211237,"post_id":72899893,"comment_id":128762581,"body_markdown":"@XtremeBaumer I think `@Transactional` will not help. See my answer for the details please.","body":"@XtremeBaumer I think <code>@Transactional</code> will not help. See my answer for the details please."}],"answers":[{"comments":[{"owner":{"account_id":25379095,"reputation":33,"user_id":19191756,"display_name":"IgorArnaut"},"score":0,"creation_date":1657221183,"post_id":72901182,"comment_id":128765838,"body_markdown":"I retained: `NabavkaKorpa nk = new NabavkaKorpa();\nnk.setNamirnica(izabrane.get(i));\nnk.setKolicina(brojevi.get(i));\nnk.setUkupnaCena(izabrane.get(i).getCenaNamirnice() * brojevi.get(0));\nizabrane.get(i).addNabavkaKorpa(nk);\nnkr.save(nk);`. That didn&#39;t help. I still get the same error.","body":"I retained: <code>NabavkaKorpa nk = new NabavkaKorpa(); nk.setNamirnica(izabrane.get(i)); nk.setKolicina(brojevi.get(i)); nk.setUkupnaCena(izabrane.get(i).getCenaNamirnice() * brojevi.get(0)); izabrane.get(i).addNabavkaKorpa(nk); nkr.save(nk);</code>. That didn&#39;t help. I still get the same error."},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1657275745,"post_id":72901182,"comment_id":128777606,"body_markdown":"@IgorArnaut Hello Igor. I have added `Notes about Persistent Context` section special for you.","body":"@IgorArnaut Hello Igor. I have added <code>Notes about Persistent Context</code> section special for you."},{"owner":{"account_id":25379095,"reputation":33,"user_id":19191756,"display_name":"IgorArnaut"},"score":0,"creation_date":1657637893,"post_id":72901182,"comment_id":128855303,"body_markdown":"I did everything what you&#39;ve said, but now I get org.hibernate.id.IdentifierGenerationException: null id generated for:class model.NabavkaKorpa.","body":"I did everything what you&#39;ve said, but now I get org.hibernate.id.IdentifierGenerationException: null id generated for:class model.NabavkaKorpa."},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1657708630,"post_id":72901182,"comment_id":128873031,"body_markdown":"@IgorArnaut You have to set `NabavkaKorpaPK` of course. Also, using composite keys is almost always a bad  idea. It is very inconvenient to work with them.","body":"@IgorArnaut You have to set <code>NabavkaKorpaPK</code> of course. Also, using composite keys is almost always a bad  idea. It is very inconvenient to work with them."},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1657723448,"post_id":72901182,"comment_id":128879112,"body_markdown":"@IgorArnaut And, please, keep in mind that I don&#39;t provide full solution, just show a direction to move.","body":"@IgorArnaut And, please, keep in mind that I don&#39;t provide full solution, just show a direction to move."}],"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657275691,"creation_date":1657210713,"answer_id":72901182,"question_id":72899893,"body_markdown":"The cause of an error that you get a list `List&lt;Namirnica&gt; izabrane` at one step (lets name it `A`) of the flow, but work with `Namirinica` items at the second step(`B`).\r\n\r\nThis list is lazy by default. It means that you can access it at `A` point only (when `@Transaction`/Persistent Context/Hibernate Session is open).\r\n```java \r\n@OneToMany(mappedBy=&quot;namirnica&quot;)\r\nprivate List&lt;NabavkaKorpa&gt; nabavkaKorpas = new ArrayList&lt;NabavkaKorpa&gt;();\r\n```\r\nEven opening a new transaction at the `B` point will not help, because it will be another Persistent context/Hibernate session (not the same as in the `A` point).\r\n\r\nYou can try to make `nabavkaKorpas` `EAGER`, probably it will help.\r\nBut you have a design problem.\r\n\r\n\r\n**Common rule**\r\n\r\nNever work with an associated collection from the `@OneToMany` part.\r\n\r\n**How to fix**\r\n\r\nYou have to save a new `NabavkaKorpa`, not `Namirnica`.\r\n```java\r\nNabavkaKorpa nabavka = new NabavkaKorpa();\r\nnabavka.setNamirnica(namirnica);\r\n\r\nnabavkaKorpaRepositiry.save(nabavka);\r\n\r\n```\r\nYou don&#39;t even need `Namirnica` to do it.\r\n\r\nFor Hibernate\r\n```java\r\nNamirnica namirnica= new Namirnica();\r\nnamirnica.setId(namirnicaId);\r\n\r\nNabavkaKorpa nabavka = new NabavkaKorpa();\r\nnabavka.setNamirnica(namirnica);\r\n\r\nnabavkaKorpaRepositiry.save(nabavka);\r\n```\r\n\r\nFor Spring Data (to not having additional query to get Namirnica from a database)\r\n```java\r\nNamirnica namirnica= namirinicaRepositiry.getOne(namirnicaId);\r\n\r\nNabavkaKorpa nabavka = new NabavkaKorpa();\r\nnabavka.setNamirnica(namirnica);\r\n\r\nnabavkaKorpaRepositiry.save(nabavka);\r\n```\r\n\r\n**Notes about Persistent Context**\r\n\r\nWhen you use `@Transactional` annotation on the method, there is not only an open transaction inside that method, but also opened Persistent Context/Hibernate Session. So such `@Transactional` approach that using widely in Spring is a bit confused.\r\n\r\nWhen Persistent Context is open, Hibernate observe all changes that are made for persistent objects, like `Namirnica` and `NabavkaKorpa`, and try to save them to the database, so you even don&#39;t need to call `save()` method of a repository (but I prefer to explicitly call it).\r\nSo in such situation you, probably, can keep association in the valid state from two sides: `Namirnica` has `NabavkaKorpa` in the list and `NabavkaKorpa` refers to `Namirnica`. But usually I don&#39;t keep such things.  \r\n\r\nWhen Persistent Context is closed, Hibernate doesn&#39;t observe changes and you don&#39;t have to keep associations in the valid state. When you call a repository method, for each such call a separate Persistent Context is created. And all such calls are independent from the Hibernate point of view. You can enable SQL logging and see what happens.\r\n\r\nSo you don&#39;t need to do\r\n```java\r\nizabrane.get(i).addNabavkaKorpa(nk);\r\n```\r\nJust work with `NabavkaKorpa`.\r\n \r\n\r\n\r\n**Notes**\r\n\r\nIt is a very bad idea having `CascadeType.ALL` here.\r\n```java\r\n@ManyToOne(cascade={CascadeType.ALL})\r\n@JoinColumn(name=&quot;idNamirnica&quot;, insertable = false, updatable = false)\r\nprivate Namirnica namirnica;\r\n```","title":"Spring Boot, Failed to lazily initialize a collection of role, could not initialize proxy - no Session","body":"<p>The cause of an error that you get a list <code>List&lt;Namirnica&gt; izabrane</code> at one step (lets name it <code>A</code>) of the flow, but work with <code>Namirinica</code> items at the second step(<code>B</code>).</p>\n<p>This list is lazy by default. It means that you can access it at <code>A</code> point only (when <code>@Transaction</code>/Persistent Context/Hibernate Session is open).</p>\n<pre class=\"lang-java prettyprint-override\"><code>@OneToMany(mappedBy=&quot;namirnica&quot;)\nprivate List&lt;NabavkaKorpa&gt; nabavkaKorpas = new ArrayList&lt;NabavkaKorpa&gt;();\n</code></pre>\n<p>Even opening a new transaction at the <code>B</code> point will not help, because it will be another Persistent context/Hibernate session (not the same as in the <code>A</code> point).</p>\n<p>You can try to make <code>nabavkaKorpas</code> <code>EAGER</code>, probably it will help.\nBut you have a design problem.</p>\n<p><strong>Common rule</strong></p>\n<p>Never work with an associated collection from the <code>@OneToMany</code> part.</p>\n<p><strong>How to fix</strong></p>\n<p>You have to save a new <code>NabavkaKorpa</code>, not <code>Namirnica</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>NabavkaKorpa nabavka = new NabavkaKorpa();\nnabavka.setNamirnica(namirnica);\n\nnabavkaKorpaRepositiry.save(nabavka);\n\n</code></pre>\n<p>You don't even need <code>Namirnica</code> to do it.</p>\n<p>For Hibernate</p>\n<pre class=\"lang-java prettyprint-override\"><code>Namirnica namirnica= new Namirnica();\nnamirnica.setId(namirnicaId);\n\nNabavkaKorpa nabavka = new NabavkaKorpa();\nnabavka.setNamirnica(namirnica);\n\nnabavkaKorpaRepositiry.save(nabavka);\n</code></pre>\n<p>For Spring Data (to not having additional query to get Namirnica from a database)</p>\n<pre class=\"lang-java prettyprint-override\"><code>Namirnica namirnica= namirinicaRepositiry.getOne(namirnicaId);\n\nNabavkaKorpa nabavka = new NabavkaKorpa();\nnabavka.setNamirnica(namirnica);\n\nnabavkaKorpaRepositiry.save(nabavka);\n</code></pre>\n<p><strong>Notes about Persistent Context</strong></p>\n<p>When you use <code>@Transactional</code> annotation on the method, there is not only an open transaction inside that method, but also opened Persistent Context/Hibernate Session. So such <code>@Transactional</code> approach that using widely in Spring is a bit confused.</p>\n<p>When Persistent Context is open, Hibernate observe all changes that are made for persistent objects, like <code>Namirnica</code> and <code>NabavkaKorpa</code>, and try to save them to the database, so you even don't need to call <code>save()</code> method of a repository (but I prefer to explicitly call it).\nSo in such situation you, probably, can keep association in the valid state from two sides: <code>Namirnica</code> has <code>NabavkaKorpa</code> in the list and <code>NabavkaKorpa</code> refers to <code>Namirnica</code>. But usually I don't keep such things.</p>\n<p>When Persistent Context is closed, Hibernate doesn't observe changes and you don't have to keep associations in the valid state. When you call a repository method, for each such call a separate Persistent Context is created. And all such calls are independent from the Hibernate point of view. You can enable SQL logging and see what happens.</p>\n<p>So you don't need to do</p>\n<pre class=\"lang-java prettyprint-override\"><code>izabrane.get(i).addNabavkaKorpa(nk);\n</code></pre>\n<p>Just work with <code>NabavkaKorpa</code>.</p>\n<p><strong>Notes</strong></p>\n<p>It is a very bad idea having <code>CascadeType.ALL</code> here.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ManyToOne(cascade={CascadeType.ALL})\n@JoinColumn(name=&quot;idNamirnica&quot;, insertable = false, updatable = false)\nprivate Namirnica namirnica;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6905216,"reputation":99,"user_id":5303373,"display_name":"Eva"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701355711,"creation_date":1701355711,"answer_id":77579420,"question_id":72899893,"body_markdown":"In case this helps anyone: I had added `@Transactional` on my method, but it still did not work. In my case, the reason seemed to be that the lazy get which triggered the exception was inside a `Single.map`, so the `@Transactional` could not reach inside.\r\n\r\nI removed the `@Transactional` annotation, and wrapped the lazy get inside a `transactionTemplate.execute`, like so:\r\n\r\n```java\r\nprivate final TransactionTemplate transactionTemplate;\r\n...\r\nprivate void myNonTransactionalMethod() {\r\n  mySingle.map(result -&gt; {\r\n    transactionTemplate.execute(() -&gt; {\r\n      myEntity.getLazyListOfEntities()...\r\n    });\r\n  });\r\n}\r\n```","title":"Spring Boot, Failed to lazily initialize a collection of role, could not initialize proxy - no Session","body":"<p>In case this helps anyone: I had added <code>@Transactional</code> on my method, but it still did not work. In my case, the reason seemed to be that the lazy get which triggered the exception was inside a <code>Single.map</code>, so the <code>@Transactional</code> could not reach inside.</p>\n<p>I removed the <code>@Transactional</code> annotation, and wrapped the lazy get inside a <code>transactionTemplate.execute</code>, like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final TransactionTemplate transactionTemplate;\n...\nprivate void myNonTransactionalMethod() {\n  mySingle.map(result -&gt; {\n    transactionTemplate.execute(() -&gt; {\n      myEntity.getLazyListOfEntities()...\n    });\n  });\n}\n</code></pre>\n"}],"owner":{"account_id":25379095,"reputation":33,"user_id":19191756,"display_name":"IgorArnaut"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3024,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1701355711,"creation_date":1657205183,"question_id":72899893,"body_markdown":"I am making a website in which I am trying to order ingredients. I choose and ingredient and enter its quantity, then I click add. I repeat it few times. Then I go to the next page, in which I chose a supplier. Then I press &quot;Order&quot;.\r\n\r\nIt is expected to insert Nabavka into the database and open a page saying that the order was successful, but instead I get an Exception telling me that I can&#39;t initialize it lazily.\r\n\r\nFrom NabavkaController.java:\r\n\r\n\t@Autowired\r\n\tNamirnicaRepository namr;\r\n\t@Autowired\r\n\tNabavkaRepository nabr;\r\n\t@Autowired\r\n\tDobavljacRepository dr;\r\n\t@Autowired\r\n\tNabavkaKorpaRepository nkr;...\r\n\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t@PostMapping(value = &quot;sacuvajNabavku&quot;)\r\n\tpublic String sacuvajNabavku(Dobavljac dobavljac, HttpServletRequest request) {\r\n\t\tList&lt;Namirnica&gt; izabrane = (ArrayList&lt;Namirnica&gt;) request.getSession()\r\n\t\t\t\t.getAttribute(&quot;izabrane&quot;);\r\n\t\tList&lt;Integer&gt; brojevi = (ArrayList&lt;Integer&gt;) request.getSession()\r\n\t\t\t\t.getAttribute(&quot;brojevi&quot;);\r\n\t\tNabavka n = new Nabavka();\r\n\t\tfor (int i = 0; i &lt; izabrane.size(); i++) {\r\n\t\t\tSystem.out.println(izabrane.get(i).getNaziv());\r\n\t\t\tNabavkaKorpaPK nkPK = new NabavkaKorpaPK();\r\n\t\t\tnkPK.setIdNabavka(n.getIdNabavka());\r\n\t\t\tnkPK.setIdNamirnica(izabrane.get(i).getIdNamirnica());\r\n\r\n\t\t\tNabavkaKorpa nk = new NabavkaKorpa();\r\n\t\t\tnk.setId(nkPK);\r\n\t\t\tnk.setKolicina(brojevi.get(i));\r\n\t\t\tnk.setUkupnaCena(izabrane.get(i).getCenaNamirnice() * brojevi.get(0));\r\n\t\t\tizabrane.get(i).addNabavkaKorpa(nk);\r\n\r\n\t\t\tn.addNabavkaKorpa(nk);\r\n\t\t\tnabr.updateNamirnica(izabrane.get(i));\r\n\t\t}\r\n\t\tn.setDatumNabavke(new Date());\r\n\t\tn.setUkupnaCena(n.getNabavkaKorpas().stream().map(k -&gt; k.getUkupnaCena()).reduce(0.0,\r\n\t\t\t\t(a, b) -&gt; a + b));\r\n\t\tn.setDobavljac(dobavljac);\r\n\t\tdobavljac.addNabavka(n);\r\n\t\tnabr.save(n);\r\n\t\treturn &quot;uspehNabavka&quot;;\r\n\t}\r\n\r\n\r\nNabavka.java:\r\n```\r\n@Entity\r\n@NamedQuery(name=&quot;Nabavka.findAll&quot;, query=&quot;SELECT n FROM Nabavka n&quot;)\r\npublic class Nabavka implements Serializable {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n\tprivate int idNabavka;\r\n\r\n\t@Temporal(TemporalType.TIMESTAMP)\r\n\tprivate Date datumNabavke;\r\n\r\n\tprivate double ukupnaCena;\r\n\r\n\t//bi-directional many-to-one association to Dobavljac\r\n\t@ManyToOne\r\n\t@JoinColumn(name=&quot;idDobavljac&quot;)\r\n\tprivate Dobavljac dobavljac;\r\n\r\n\t//bi-directional many-to-one association to Menadzer\r\n\t@ManyToOne\r\n\t@JoinColumns({\r\n\t\t@JoinColumn(name=&quot;idMenadzer&quot;, referencedColumnName=&quot;idMenadzer&quot;),\r\n\t\t@JoinColumn(name=&quot;idRadnik&quot;, referencedColumnName=&quot;idRadnik&quot;)\r\n\t\t})\r\n\tprivate Menadzer menadzer;\r\n\r\n\t//bi-directional many-to-one association to User\r\n\t@ManyToOne\r\n\t@JoinColumn(name=&quot;idUser&quot;)\r\n\tprivate User user;\r\n\r\n\t//bi-directional many-to-one association to NabavkaKorpa\r\n\t@OneToMany(mappedBy=&quot;nabavka&quot;, cascade={CascadeType.ALL})\r\n\tprivate List&lt;NabavkaKorpa&gt; nabavkaKorpas = new ArrayList&lt;NabavkaKorpa&gt;();\r\n\r\n\tpublic Nabavka() {\r\n\t}\r\n\r\n\tpublic int getIdNabavka() {\r\n\t\treturn this.idNabavka;\r\n\t}\r\n\r\n\tpublic void setIdNabavka(int idNabavka) {\r\n\t\tthis.idNabavka = idNabavka;\r\n\t}\r\n\r\n\tpublic Date getDatumNabavke() {\r\n\t\treturn this.datumNabavke;\r\n\t}\r\n\r\n\tpublic void setDatumNabavke(Date datumNabavke) {\r\n\t\tthis.datumNabavke = datumNabavke;\r\n\t}\r\n\r\n\tpublic double getUkupnaCena() {\r\n\t\treturn this.ukupnaCena;\r\n\t}\r\n\r\n\tpublic void setUkupnaCena(double ukupnaCena) {\r\n\t\tthis.ukupnaCena = ukupnaCena;\r\n\t}\r\n\r\n\tpublic Dobavljac getDobavljac() {\r\n\t\treturn this.dobavljac;\r\n\t}\r\n\r\n\tpublic void setDobavljac(Dobavljac dobavljac) {\r\n\t\tthis.dobavljac = dobavljac;\r\n\t}\r\n\r\n\tpublic Menadzer getMenadzer() {\r\n\t\treturn this.menadzer;\r\n\t}\r\n\r\n\tpublic void setMenadzer(Menadzer menadzer) {\r\n\t\tthis.menadzer = menadzer;\r\n\t}\r\n\r\n\tpublic User getUser() {\r\n\t\treturn this.user;\r\n\t}\r\n\r\n\tpublic void setUser(User user) {\r\n\t\tthis.user = user;\r\n\t}\r\n\r\n\tpublic List&lt;NabavkaKorpa&gt; getNabavkaKorpas() {\r\n\t\treturn this.nabavkaKorpas;\r\n\t}\r\n\r\n\tpublic void setNabavkaKorpas(List&lt;NabavkaKorpa&gt; nabavkaKorpas) {\r\n\t\tthis.nabavkaKorpas = nabavkaKorpas;\r\n\t}\r\n\r\n\tpublic NabavkaKorpa addNabavkaKorpa(NabavkaKorpa nabavkaKorpa) {\r\n\t\tgetNabavkaKorpas().add(nabavkaKorpa);\r\n\t\tnabavkaKorpa.setNabavka(this);\r\n\r\n\t\treturn nabavkaKorpa;\r\n\t}\r\n\r\n\tpublic NabavkaKorpa removeNabavkaKorpa(NabavkaKorpa nabavkaKorpa) {\r\n\t\tgetNabavkaKorpas().remove(nabavkaKorpa);\r\n\t\tnabavkaKorpa.setNabavka(null);\r\n\r\n\t\treturn nabavkaKorpa;\r\n\t}\r\n\r\n}\r\n```\r\nNamirnica.java:\r\n```\r\n@Entity\r\n@NamedQuery(name=&quot;Namirnica.findAll&quot;, query=&quot;SELECT n FROM Namirnica n&quot;)\r\npublic class Namirnica implements Serializable {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n\tprivate int idNamirnica;\r\n\r\n\tprivate double cenaNamirnice;\r\n\r\n\tprivate String kolicina;\r\n\r\n\tprivate String naziv;\r\n\t\r\n\tprivate int stanje;\r\n\r\n\t//bi-directional many-to-one association to NabavkaKorpa\r\n\t@OneToMany(mappedBy=&quot;namirnica&quot;)\r\n\tprivate List&lt;NabavkaKorpa&gt; nabavkaKorpas = new ArrayList&lt;NabavkaKorpa&gt;();\r\n\r\n\tpublic Namirnica() {\r\n\t}\r\n\r\n\tpublic int getIdNamirnica() {\r\n\t\treturn this.idNamirnica;\r\n\t}\r\n\r\n\tpublic void setIdNamirnica(int idNamirnica) {\r\n\t\tthis.idNamirnica = idNamirnica;\r\n\t}\r\n\r\n\tpublic double getCenaNamirnice() {\r\n\t\treturn this.cenaNamirnice;\r\n\t}\r\n\r\n\tpublic void setCenaNamirnice(double cenaNamirnice) {\r\n\t\tthis.cenaNamirnice = cenaNamirnice;\r\n\t}\r\n\r\n\tpublic String getKolicina() {\r\n\t\treturn this.kolicina;\r\n\t}\r\n\r\n\tpublic void setKolicina(String kolicina) {\r\n\t\tthis.kolicina = kolicina;\r\n\t}\r\n\r\n\tpublic String getNaziv() {\r\n\t\treturn this.naziv;\r\n\t}\r\n\r\n\tpublic void setNaziv(String naziv) {\r\n\t\tthis.naziv = naziv;\r\n\t}\r\n\t\r\n\tpublic int getStanje() {\r\n\t\treturn this.stanje;\r\n\t}\r\n\r\n\tpublic void setStanje(int stanje) {\r\n\t\tthis.stanje = stanje;\r\n\t}\r\n\r\n\tpublic List&lt;NabavkaKorpa&gt; getNabavkaKorpas() {\r\n\t\treturn this.nabavkaKorpas;\r\n\t}\r\n\r\n\tpublic void setNabavkaKorpas(List&lt;NabavkaKorpa&gt; nabavkaKorpas) {\r\n\t\tthis.nabavkaKorpas = nabavkaKorpas;\r\n\t}\r\n\r\n\tpublic NabavkaKorpa addNabavkaKorpa(NabavkaKorpa nabavkaKorpa) {\r\n\t\tgetNabavkaKorpas().add(nabavkaKorpa);\r\n\t\tnabavkaKorpa.setNamirnica(this);\r\n\r\n\t\treturn nabavkaKorpa;\r\n\t}\r\n\r\n\tpublic NabavkaKorpa removeNabavkaKorpa(NabavkaKorpa nabavkaKorpa) {\r\n\t\tgetNabavkaKorpas().remove(nabavkaKorpa);\r\n\t\tnabavkaKorpa.setNamirnica(null);\r\n\r\n\t\treturn nabavkaKorpa;\r\n\t}\r\n\r\n}\r\n```\r\nNabavkaKorpa.java:\r\n```\r\n@Entity\r\n@NamedQuery(name=&quot;NabavkaKorpa.findAll&quot;, query=&quot;SELECT n FROM NabavkaKorpa n&quot;)\r\npublic class NabavkaKorpa implements Serializable {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@EmbeddedId\r\n\tprivate NabavkaKorpaPK id;\r\n\r\n\tprivate int kolicina;\r\n\r\n\tprivate double ukupnaCena;\r\n\r\n\t//bi-directional many-to-one association to Nabavka\r\n\t@ManyToOne(cascade={CascadeType.ALL})\r\n\t@JoinColumn(name=&quot;idNabavka&quot;, insertable = false, updatable = false)\r\n\tprivate Nabavka nabavka;\r\n\r\n\t//bi-directional many-to-one association to Namirnica\r\n\t@ManyToOne(cascade={CascadeType.ALL})\r\n\t@JoinColumn(name=&quot;idNamirnica&quot;, insertable = false, updatable = false)\r\n\tprivate Namirnica namirnica;\r\n\r\n\tpublic NabavkaKorpa() {\r\n\t}\r\n\r\n\tpublic NabavkaKorpaPK getId() {\r\n\t\treturn this.id;\r\n\t}\r\n\r\n\tpublic void setId(NabavkaKorpaPK id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tpublic int getKolicina() {\r\n\t\treturn this.kolicina;\r\n\t}\r\n\r\n\tpublic void setKolicina(int kolicina) {\r\n\t\tthis.kolicina = kolicina;\r\n\t}\r\n\r\n\tpublic double getUkupnaCena() {\r\n\t\treturn this.ukupnaCena;\r\n\t}\r\n\r\n\tpublic void setUkupnaCena(double ukupnaCena) {\r\n\t\tthis.ukupnaCena = ukupnaCena;\r\n\t}\r\n\r\n\tpublic Nabavka getNabavka() {\r\n\t\treturn this.nabavka;\r\n\t}\r\n\r\n\tpublic void setNabavka(Nabavka nabavka) {\r\n\t\tthis.nabavka = nabavka;\r\n\t}\r\n\r\n\tpublic Namirnica getNamirnica() {\r\n\t\treturn this.namirnica;\r\n\t}\r\n\r\n\tpublic void setNamirnica(Namirnica namirnica) {\r\n\t\tthis.namirnica = namirnica;\r\n\t}\r\n\r\n}\r\n```\r\nNabavkaKorpaPK.java:\r\n```\r\n@Embeddable\r\npublic class NabavkaKorpaPK implements Serializable {\r\n\t//default serial version id, required for serializable classes.\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@Column(insertable=false, updatable=false)\r\n\tprivate int idNamirnica;\r\n\r\n\t@Column(insertable=false, updatable=false)\r\n\tprivate int idNabavka;\r\n\r\n\tpublic NabavkaKorpaPK() {\r\n\t}\r\n\tpublic int getIdNamirnica() {\r\n\t\treturn this.idNamirnica;\r\n\t}\r\n\tpublic void setIdNamirnica(int idNamirnica) {\r\n\t\tthis.idNamirnica = idNamirnica;\r\n\t}\r\n\tpublic int getIdNabavka() {\r\n\t\treturn this.idNabavka;\r\n\t}\r\n\tpublic void setIdNabavka(int idNabavka) {\r\n\t\tthis.idNabavka = idNabavka;\r\n\t}\r\n\r\n\tpublic boolean equals(Object other) {\r\n\t\tif (this == other) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!(other instanceof NabavkaKorpaPK)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tNabavkaKorpaPK castOther = (NabavkaKorpaPK)other;\r\n\t\treturn \r\n\t\t\t(this.idNamirnica == castOther.idNamirnica)\r\n\t\t\t&amp;&amp; (this.idNabavka == castOther.idNabavka);\r\n\t}\r\n\r\n\tpublic int hashCode() {\r\n\t\tfinal int prime = 31;\r\n\t\tint hash = 17;\r\n\t\thash = hash * prime + this.idNamirnica;\r\n\t\thash = hash * prime + this.idNabavka;\r\n\t\t\r\n\t\treturn hash;\r\n\t}\r\n}\r\n```\r\nNabavkaKorpaRepository.java:\r\n```\r\npublic interface NabavkaKorpaRepository extends JpaRepository&lt;NabavkaKorpa, NabavkaKorpaPK&gt; {\r\n\r\n}\r\n```\r\nNabavkaRepository.java:\r\n```\r\npublic interface NabavkaRepository extends JpaRepository&lt;Nabavka, Integer&gt;, NabavkaRepoSpecific {\r\n\r\n}\r\n```\r\nNabavkaRepoSpeicific.java\r\n```\r\npublic interface NabavkaRepoSpecific {\r\n\r\n\tpublic void updateNamirnica(Namirnica namirnica);\r\n\r\n}\r\n```\r\nNabavkaRepoSpecificImpl.java:\r\n```\r\n@Repository\r\n@Transactional\r\npublic class NabavkaRepoSpecificImpl implements NabavkaRepoSpecific {\r\n\r\n\t@PersistenceContext\r\n\tEntityManager em;\r\n\r\n\t@Override\r\n\tpublic void updateNamirnica(Namirnica namirnica) {\r\n\t\ttry {\r\n\t\t\tem.merge(namirnica);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\nNamirnicaRepository.java:\r\n```\r\npublic interface NamirnicaRepository extends JpaRepository&lt;Namirnica, Integer&gt; {\r\n\r\n}\r\n```\r\nException:\r\n```\r\norg.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: model.Namirnica.nabavkaKorpas, could not initialize proxy - no Session\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:614) ~[hibernate-core-5.6.9.Final.jar:5.6.9.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:218) ~[hibernate-core-5.6.9.Final.jar:5.6.9.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:591) ~[hibernate-core-5.6.9.Final.jar:5.6.9.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.write(AbstractPersistentCollection.java:415) ~[hibernate-core-5.6.9.Final.jar:5.6.9.Final]\r\n\tat org.hibernate.collection.internal.PersistentBag.add(PersistentBag.java:407) ~[hibernate-core-5.6.9.Final.jar:5.6.9.Final]\r\n\tat model.Namirnica.addNabavkaKorpa(Namirnica.java:85) ~[classes/:na]\r\n\tat com.example.demo.controller.NabavkaController.sacuvajNabavku(NabavkaController.java:95) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.21.jar:5.3.21]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.64.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.21.jar:5.3.21]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.64.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.21.jar:5.3.21]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.21.jar:5.3.21]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.21.jar:5.3.21]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.21.jar:5.3.21]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1787) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```\r\n\r\nEDIT: I get Namirnicas from a session. Here&#39;s the GitHub [link][1].\r\n\r\n\r\n  [1]: https://github.com/IgorArnaut/MIS-Picerija","title":"Spring Boot, Failed to lazily initialize a collection of role, could not initialize proxy - no Session","body":"<p>I am making a website in which I am trying to order ingredients. I choose and ingredient and enter its quantity, then I click add. I repeat it few times. Then I go to the next page, in which I chose a supplier. Then I press &quot;Order&quot;.</p>\n<p>It is expected to insert Nabavka into the database and open a page saying that the order was successful, but instead I get an Exception telling me that I can't initialize it lazily.</p>\n<p>From NabavkaController.java:</p>\n<pre><code>@Autowired\nNamirnicaRepository namr;\n@Autowired\nNabavkaRepository nabr;\n@Autowired\nDobavljacRepository dr;\n@Autowired\nNabavkaKorpaRepository nkr;...\n\n@SuppressWarnings(&quot;unchecked&quot;)\n@PostMapping(value = &quot;sacuvajNabavku&quot;)\npublic String sacuvajNabavku(Dobavljac dobavljac, HttpServletRequest request) {\n    List&lt;Namirnica&gt; izabrane = (ArrayList&lt;Namirnica&gt;) request.getSession()\n            .getAttribute(&quot;izabrane&quot;);\n    List&lt;Integer&gt; brojevi = (ArrayList&lt;Integer&gt;) request.getSession()\n            .getAttribute(&quot;brojevi&quot;);\n    Nabavka n = new Nabavka();\n    for (int i = 0; i &lt; izabrane.size(); i++) {\n        System.out.println(izabrane.get(i).getNaziv());\n        NabavkaKorpaPK nkPK = new NabavkaKorpaPK();\n        nkPK.setIdNabavka(n.getIdNabavka());\n        nkPK.setIdNamirnica(izabrane.get(i).getIdNamirnica());\n\n        NabavkaKorpa nk = new NabavkaKorpa();\n        nk.setId(nkPK);\n        nk.setKolicina(brojevi.get(i));\n        nk.setUkupnaCena(izabrane.get(i).getCenaNamirnice() * brojevi.get(0));\n        izabrane.get(i).addNabavkaKorpa(nk);\n\n        n.addNabavkaKorpa(nk);\n        nabr.updateNamirnica(izabrane.get(i));\n    }\n    n.setDatumNabavke(new Date());\n    n.setUkupnaCena(n.getNabavkaKorpas().stream().map(k -&gt; k.getUkupnaCena()).reduce(0.0,\n            (a, b) -&gt; a + b));\n    n.setDobavljac(dobavljac);\n    dobavljac.addNabavka(n);\n    nabr.save(n);\n    return &quot;uspehNabavka&quot;;\n}\n</code></pre>\n<p>Nabavka.java:</p>\n<pre><code>@Entity\n@NamedQuery(name=&quot;Nabavka.findAll&quot;, query=&quot;SELECT n FROM Nabavka n&quot;)\npublic class Nabavka implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private int idNabavka;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date datumNabavke;\n\n    private double ukupnaCena;\n\n    //bi-directional many-to-one association to Dobavljac\n    @ManyToOne\n    @JoinColumn(name=&quot;idDobavljac&quot;)\n    private Dobavljac dobavljac;\n\n    //bi-directional many-to-one association to Menadzer\n    @ManyToOne\n    @JoinColumns({\n        @JoinColumn(name=&quot;idMenadzer&quot;, referencedColumnName=&quot;idMenadzer&quot;),\n        @JoinColumn(name=&quot;idRadnik&quot;, referencedColumnName=&quot;idRadnik&quot;)\n        })\n    private Menadzer menadzer;\n\n    //bi-directional many-to-one association to User\n    @ManyToOne\n    @JoinColumn(name=&quot;idUser&quot;)\n    private User user;\n\n    //bi-directional many-to-one association to NabavkaKorpa\n    @OneToMany(mappedBy=&quot;nabavka&quot;, cascade={CascadeType.ALL})\n    private List&lt;NabavkaKorpa&gt; nabavkaKorpas = new ArrayList&lt;NabavkaKorpa&gt;();\n\n    public Nabavka() {\n    }\n\n    public int getIdNabavka() {\n        return this.idNabavka;\n    }\n\n    public void setIdNabavka(int idNabavka) {\n        this.idNabavka = idNabavka;\n    }\n\n    public Date getDatumNabavke() {\n        return this.datumNabavke;\n    }\n\n    public void setDatumNabavke(Date datumNabavke) {\n        this.datumNabavke = datumNabavke;\n    }\n\n    public double getUkupnaCena() {\n        return this.ukupnaCena;\n    }\n\n    public void setUkupnaCena(double ukupnaCena) {\n        this.ukupnaCena = ukupnaCena;\n    }\n\n    public Dobavljac getDobavljac() {\n        return this.dobavljac;\n    }\n\n    public void setDobavljac(Dobavljac dobavljac) {\n        this.dobavljac = dobavljac;\n    }\n\n    public Menadzer getMenadzer() {\n        return this.menadzer;\n    }\n\n    public void setMenadzer(Menadzer menadzer) {\n        this.menadzer = menadzer;\n    }\n\n    public User getUser() {\n        return this.user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    public List&lt;NabavkaKorpa&gt; getNabavkaKorpas() {\n        return this.nabavkaKorpas;\n    }\n\n    public void setNabavkaKorpas(List&lt;NabavkaKorpa&gt; nabavkaKorpas) {\n        this.nabavkaKorpas = nabavkaKorpas;\n    }\n\n    public NabavkaKorpa addNabavkaKorpa(NabavkaKorpa nabavkaKorpa) {\n        getNabavkaKorpas().add(nabavkaKorpa);\n        nabavkaKorpa.setNabavka(this);\n\n        return nabavkaKorpa;\n    }\n\n    public NabavkaKorpa removeNabavkaKorpa(NabavkaKorpa nabavkaKorpa) {\n        getNabavkaKorpas().remove(nabavkaKorpa);\n        nabavkaKorpa.setNabavka(null);\n\n        return nabavkaKorpa;\n    }\n\n}\n</code></pre>\n<p>Namirnica.java:</p>\n<pre><code>@Entity\n@NamedQuery(name=&quot;Namirnica.findAll&quot;, query=&quot;SELECT n FROM Namirnica n&quot;)\npublic class Namirnica implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private int idNamirnica;\n\n    private double cenaNamirnice;\n\n    private String kolicina;\n\n    private String naziv;\n    \n    private int stanje;\n\n    //bi-directional many-to-one association to NabavkaKorpa\n    @OneToMany(mappedBy=&quot;namirnica&quot;)\n    private List&lt;NabavkaKorpa&gt; nabavkaKorpas = new ArrayList&lt;NabavkaKorpa&gt;();\n\n    public Namirnica() {\n    }\n\n    public int getIdNamirnica() {\n        return this.idNamirnica;\n    }\n\n    public void setIdNamirnica(int idNamirnica) {\n        this.idNamirnica = idNamirnica;\n    }\n\n    public double getCenaNamirnice() {\n        return this.cenaNamirnice;\n    }\n\n    public void setCenaNamirnice(double cenaNamirnice) {\n        this.cenaNamirnice = cenaNamirnice;\n    }\n\n    public String getKolicina() {\n        return this.kolicina;\n    }\n\n    public void setKolicina(String kolicina) {\n        this.kolicina = kolicina;\n    }\n\n    public String getNaziv() {\n        return this.naziv;\n    }\n\n    public void setNaziv(String naziv) {\n        this.naziv = naziv;\n    }\n    \n    public int getStanje() {\n        return this.stanje;\n    }\n\n    public void setStanje(int stanje) {\n        this.stanje = stanje;\n    }\n\n    public List&lt;NabavkaKorpa&gt; getNabavkaKorpas() {\n        return this.nabavkaKorpas;\n    }\n\n    public void setNabavkaKorpas(List&lt;NabavkaKorpa&gt; nabavkaKorpas) {\n        this.nabavkaKorpas = nabavkaKorpas;\n    }\n\n    public NabavkaKorpa addNabavkaKorpa(NabavkaKorpa nabavkaKorpa) {\n        getNabavkaKorpas().add(nabavkaKorpa);\n        nabavkaKorpa.setNamirnica(this);\n\n        return nabavkaKorpa;\n    }\n\n    public NabavkaKorpa removeNabavkaKorpa(NabavkaKorpa nabavkaKorpa) {\n        getNabavkaKorpas().remove(nabavkaKorpa);\n        nabavkaKorpa.setNamirnica(null);\n\n        return nabavkaKorpa;\n    }\n\n}\n</code></pre>\n<p>NabavkaKorpa.java:</p>\n<pre><code>@Entity\n@NamedQuery(name=&quot;NabavkaKorpa.findAll&quot;, query=&quot;SELECT n FROM NabavkaKorpa n&quot;)\npublic class NabavkaKorpa implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @EmbeddedId\n    private NabavkaKorpaPK id;\n\n    private int kolicina;\n\n    private double ukupnaCena;\n\n    //bi-directional many-to-one association to Nabavka\n    @ManyToOne(cascade={CascadeType.ALL})\n    @JoinColumn(name=&quot;idNabavka&quot;, insertable = false, updatable = false)\n    private Nabavka nabavka;\n\n    //bi-directional many-to-one association to Namirnica\n    @ManyToOne(cascade={CascadeType.ALL})\n    @JoinColumn(name=&quot;idNamirnica&quot;, insertable = false, updatable = false)\n    private Namirnica namirnica;\n\n    public NabavkaKorpa() {\n    }\n\n    public NabavkaKorpaPK getId() {\n        return this.id;\n    }\n\n    public void setId(NabavkaKorpaPK id) {\n        this.id = id;\n    }\n\n    public int getKolicina() {\n        return this.kolicina;\n    }\n\n    public void setKolicina(int kolicina) {\n        this.kolicina = kolicina;\n    }\n\n    public double getUkupnaCena() {\n        return this.ukupnaCena;\n    }\n\n    public void setUkupnaCena(double ukupnaCena) {\n        this.ukupnaCena = ukupnaCena;\n    }\n\n    public Nabavka getNabavka() {\n        return this.nabavka;\n    }\n\n    public void setNabavka(Nabavka nabavka) {\n        this.nabavka = nabavka;\n    }\n\n    public Namirnica getNamirnica() {\n        return this.namirnica;\n    }\n\n    public void setNamirnica(Namirnica namirnica) {\n        this.namirnica = namirnica;\n    }\n\n}\n</code></pre>\n<p>NabavkaKorpaPK.java:</p>\n<pre><code>@Embeddable\npublic class NabavkaKorpaPK implements Serializable {\n    //default serial version id, required for serializable classes.\n    private static final long serialVersionUID = 1L;\n\n    @Column(insertable=false, updatable=false)\n    private int idNamirnica;\n\n    @Column(insertable=false, updatable=false)\n    private int idNabavka;\n\n    public NabavkaKorpaPK() {\n    }\n    public int getIdNamirnica() {\n        return this.idNamirnica;\n    }\n    public void setIdNamirnica(int idNamirnica) {\n        this.idNamirnica = idNamirnica;\n    }\n    public int getIdNabavka() {\n        return this.idNabavka;\n    }\n    public void setIdNabavka(int idNabavka) {\n        this.idNabavka = idNabavka;\n    }\n\n    public boolean equals(Object other) {\n        if (this == other) {\n            return true;\n        }\n        if (!(other instanceof NabavkaKorpaPK)) {\n            return false;\n        }\n        NabavkaKorpaPK castOther = (NabavkaKorpaPK)other;\n        return \n            (this.idNamirnica == castOther.idNamirnica)\n            &amp;&amp; (this.idNabavka == castOther.idNabavka);\n    }\n\n    public int hashCode() {\n        final int prime = 31;\n        int hash = 17;\n        hash = hash * prime + this.idNamirnica;\n        hash = hash * prime + this.idNabavka;\n        \n        return hash;\n    }\n}\n</code></pre>\n<p>NabavkaKorpaRepository.java:</p>\n<pre><code>public interface NabavkaKorpaRepository extends JpaRepository&lt;NabavkaKorpa, NabavkaKorpaPK&gt; {\n\n}\n</code></pre>\n<p>NabavkaRepository.java:</p>\n<pre><code>public interface NabavkaRepository extends JpaRepository&lt;Nabavka, Integer&gt;, NabavkaRepoSpecific {\n\n}\n</code></pre>\n<p>NabavkaRepoSpeicific.java</p>\n<pre><code>public interface NabavkaRepoSpecific {\n\n    public void updateNamirnica(Namirnica namirnica);\n\n}\n</code></pre>\n<p>NabavkaRepoSpecificImpl.java:</p>\n<pre><code>@Repository\n@Transactional\npublic class NabavkaRepoSpecificImpl implements NabavkaRepoSpecific {\n\n    @PersistenceContext\n    EntityManager em;\n\n    @Override\n    public void updateNamirnica(Namirnica namirnica) {\n        try {\n            em.merge(namirnica);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n<p>NamirnicaRepository.java:</p>\n<pre><code>public interface NamirnicaRepository extends JpaRepository&lt;Namirnica, Integer&gt; {\n\n}\n</code></pre>\n<p>Exception:</p>\n<pre><code>org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: model.Namirnica.nabavkaKorpas, could not initialize proxy - no Session\n    at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:614) ~[hibernate-core-5.6.9.Final.jar:5.6.9.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:218) ~[hibernate-core-5.6.9.Final.jar:5.6.9.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:591) ~[hibernate-core-5.6.9.Final.jar:5.6.9.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.write(AbstractPersistentCollection.java:415) ~[hibernate-core-5.6.9.Final.jar:5.6.9.Final]\n    at org.hibernate.collection.internal.PersistentBag.add(PersistentBag.java:407) ~[hibernate-core-5.6.9.Final.jar:5.6.9.Final]\n    at model.Namirnica.addNabavkaKorpa(Namirnica.java:85) ~[classes/:na]\n    at com.example.demo.controller.NabavkaController.sacuvajNabavku(NabavkaController.java:95) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.21.jar:5.3.21]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.21.jar:5.3.21]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.21.jar:5.3.21]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.21.jar:5.3.21]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.21.jar:5.3.21]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.21.jar:5.3.21]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.21.jar:5.3.21]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.21.jar:5.3.21]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.21.jar:5.3.21]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.21.jar:5.3.21]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.64.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.21.jar:5.3.21]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.64.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.64.jar:9.0.64]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.21.jar:5.3.21]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.21.jar:5.3.21]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.21.jar:5.3.21]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.21.jar:5.3.21]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.21.jar:5.3.21]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.21.jar:5.3.21]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1787) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.64.jar:9.0.64]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>EDIT: I get Namirnicas from a session. Here's the GitHub <a href=\"https://github.com/IgorArnaut/MIS-Picerija\" rel=\"nofollow noreferrer\">link</a>.</p>\n"},{"tags":["java","spring","hibernate","orm"],"answers":[{"tags":[],"owner":{"account_id":12561920,"reputation":408,"user_id":9139357,"display_name":"Eric"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701355114,"creation_date":1701355114,"answer_id":77579347,"question_id":77549477,"body_markdown":"This is wrong:\r\n\r\n    q1.setAnswers(list);\r\n\r\nbecause **list** is empty, you need to do something like this:\r\n\r\n    List&lt;Answer&gt; list = new ArrayList&lt;&gt;(Arrays.asList(a1, a2, a3));","title":"Why is it not cascading? I am tring to insert data into two tables using cascading but values is inserted for only on owning table","body":"<p>This is wrong:</p>\n<pre><code>q1.setAnswers(list);\n</code></pre>\n<p>because <strong>list</strong> is empty, you need to do something like this:</p>\n<pre><code>List&lt;Answer&gt; list = new ArrayList&lt;&gt;(Arrays.asList(a1, a2, a3));\n</code></pre>\n"}],"owner":{"account_id":29992638,"reputation":1,"user_id":22984893,"display_name":"mansubba2022"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701355114,"creation_date":1700943903,"question_id":77549477,"body_markdown":"I am tring to insert data into two tables but values is inserted for only on owning table...\r\nFollowing are my codes:\r\n\r\n**Question Entity Class:**\r\n```\r\n@Entity\r\n@Table(name=&quot;ques&quot;)\r\npublic class Question {\r\n\t@Id\r\n\tprivate int id;\r\n\tprivate String question;\r\n\t@OneToMany(mappedBy = &quot;question&quot;, cascade = javax.persistence.CascadeType.ALL)\r\n\tprivate List&lt;Answer&gt; answers;\r\n```\r\n\r\n**Answer Entity Class:**\r\n```\r\n@Entity\r\n@Table(name=&quot;ans&quot;)\r\npublic class Answer {\r\n\t@Id\r\n\tprivate int id;\r\n\tprivate String answer;\r\n\t@ManyToOne\r\n\tprivate Question question;\r\n```\r\n\r\n**Main Class:**\r\n```\r\npublic class App {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tSessionFactory factory = new Configuration().configure().buildSessionFactory();\r\n\t\tSession s = factory.openSession();\r\n\t\tTransaction tx = s.beginTransaction();\r\n\t\t\r\n\t\t\r\n\t\tAnswer a1 = new Answer(5001, &quot;answer 1...&quot;);\r\n\t\tAnswer a2 = new Answer(5002, &quot;answer 2...&quot;);\r\n\t\tAnswer a3 = new Answer(5003, &quot;answer 3...&quot;);\r\n\t\t\r\n\t\tList&lt;Answer&gt; list = new ArrayList&lt;&gt;();\r\n\t\t\r\n\t\tQuestion q1 = new Question();\r\n\t\tq1.setId(1);\r\n\t\tq1.setQuestion(&quot;question...?&quot;);\t\t\r\n\t\tq1.setAnswers(list);\r\n\t\t\r\n\t\ta1.setQuestion(q1);\r\n\t\ta2.setQuestion(q1);\r\n\t\ta3.setQuestion(q1);\r\n\t\t\r\n\t\ts.save(q1);\r\n\t\t\r\n\t\ttx.commit();\r\n\t\t\r\n\t\ts.close();\r\n\t\tfactory.close();\r\n\t\t\r\n\t\tSystem.out.println(&quot;Done&quot;);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n**Output:**\r\n```\r\nHibernate: \r\n    insert \r\n    into\r\n        ques\r\n        (question, id) \r\n    values\r\n        (?, ?)\r\nNov 26, 2023 12:40:27 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PoolState stop\r\nINFO: HHH10001008: Cleaning up connection pool [jdbc:mysql://localhost:3306/myhiber]\r\nDone\r\n```\r\n\r\nQuestion is inserted but answers are not inserted. What am I doing wrong here?","title":"Why is it not cascading? I am tring to insert data into two tables using cascading but values is inserted for only on owning table","body":"<p>I am tring to insert data into two tables but values is inserted for only on owning table...\nFollowing are my codes:</p>\n<p><strong>Question Entity Class:</strong></p>\n<pre><code>@Entity\n@Table(name=&quot;ques&quot;)\npublic class Question {\n    @Id\n    private int id;\n    private String question;\n    @OneToMany(mappedBy = &quot;question&quot;, cascade = javax.persistence.CascadeType.ALL)\n    private List&lt;Answer&gt; answers;\n</code></pre>\n<p><strong>Answer Entity Class:</strong></p>\n<pre><code>@Entity\n@Table(name=&quot;ans&quot;)\npublic class Answer {\n    @Id\n    private int id;\n    private String answer;\n    @ManyToOne\n    private Question question;\n</code></pre>\n<p><strong>Main Class:</strong></p>\n<pre><code>public class App {\n\n    public static void main(String[] args) {\n        \n        SessionFactory factory = new Configuration().configure().buildSessionFactory();\n        Session s = factory.openSession();\n        Transaction tx = s.beginTransaction();\n        \n        \n        Answer a1 = new Answer(5001, &quot;answer 1...&quot;);\n        Answer a2 = new Answer(5002, &quot;answer 2...&quot;);\n        Answer a3 = new Answer(5003, &quot;answer 3...&quot;);\n        \n        List&lt;Answer&gt; list = new ArrayList&lt;&gt;();\n        \n        Question q1 = new Question();\n        q1.setId(1);\n        q1.setQuestion(&quot;question...?&quot;);     \n        q1.setAnswers(list);\n        \n        a1.setQuestion(q1);\n        a2.setQuestion(q1);\n        a3.setQuestion(q1);\n        \n        s.save(q1);\n        \n        tx.commit();\n        \n        s.close();\n        factory.close();\n        \n        System.out.println(&quot;Done&quot;);\n    }\n\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Hibernate: \n    insert \n    into\n        ques\n        (question, id) \n    values\n        (?, ?)\nNov 26, 2023 12:40:27 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PoolState stop\nINFO: HHH10001008: Cleaning up connection pool [jdbc:mysql://localhost:3306/myhiber]\nDone\n</code></pre>\n<p>Question is inserted but answers are not inserted. What am I doing wrong here?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1701354419,"post_id":77579228,"comment_id":136767243,"body_markdown":"`val+=&quot;&#39;&quot;+holders.get(i)+&quot;&#39;&quot;+&quot;,&quot;;`, see the `+` in front of the equals sign","body":"<code>val+=&quot;&#39;&quot;+holders.get(i)+&quot;&#39;&quot;+&quot;,&quot;;</code>, see the <code>+</code> in front of the equals sign"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1701354646,"post_id":77579228,"comment_id":136767295,"body_markdown":"Use `holders.stream().collect(Collectors.joining(&quot;&#39;,&#39;&quot;, &quot;&#39;&quot;, &quot;&#39;&quot;))`","body":"Use <code>holders.stream().collect(Collectors.joining(&quot;&#39;,&#39;&quot;, &quot;&#39;&quot;, &quot;&#39;&quot;))</code>"}],"answers":[{"tags":[],"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1701354812,"creation_date":1701354812,"answer_id":77579308,"question_id":77579228,"body_markdown":"If you&#39;re using Java 8+, you may use streams to accomplish your task. In particularly, you will need `collect` method to join the elements. I hope it will help you:\r\n```\r\npublic static void main(String[] args) {\r\n    String val = null;\r\n\tList&lt;String&gt; holders = new ArrayList&lt;&gt;();\r\n\tholders.add(&quot;A&quot;);\r\n\tholders.add(&quot;B&quot;);\r\n\tval = holders.stream().collect(Collectors.joining(&quot;&#39;,&#39;&quot;, &quot;&#39;&quot;, &quot;&#39;&quot;));\r\n\tSystem.out.println(val);\r\n}\r\n```","title":"Convert items in a list to String in single quotes and commas in between using Java","body":"<p>If you're using Java 8+, you may use streams to accomplish your task. In particularly, you will need <code>collect</code> method to join the elements. I hope it will help you:</p>\n<pre><code>public static void main(String[] args) {\n    String val = null;\n    List&lt;String&gt; holders = new ArrayList&lt;&gt;();\n    holders.add(&quot;A&quot;);\n    holders.add(&quot;B&quot;);\n    val = holders.stream().collect(Collectors.joining(&quot;','&quot;, &quot;'&quot;, &quot;'&quot;));\n    System.out.println(val);\n}\n</code></pre>\n"}],"owner":{"account_id":27528457,"reputation":39,"user_id":21007380,"display_name":"Pratik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1701354705,"accepted_answer_id":77579308,"answer_count":1,"score":-2,"last_activity_date":1701355110,"creation_date":1701354270,"question_id":77579228,"body_markdown":"I have a Java code as follows\r\n\r\n```java\r\nString val = null;\r\nList&lt;String&gt; holders = new ArrayList&lt;&gt;();\r\nholders.add(&quot;A&quot;);\r\nholders.add(&quot;B&quot;);\r\nfor (int i = 0; i &lt; holders.size(); i++) {\r\n   val = &quot;&#39;&quot; + holders.get(i) + &quot;&#39;&quot; + &quot;,&quot;;\r\n}\r\nSystem.out.println(val);\r\n```\r\n\r\nI wanted my val to be printed as `&#39;A&#39;,&#39;B&#39;`, but the output I am getting is `&#39;B&#39;,`.\r\n\r\nWhat can be done here to get the correct output?","title":"Convert items in a list to String in single quotes and commas in between using Java","body":"<p>I have a Java code as follows</p>\n<pre class=\"lang-java prettyprint-override\"><code>String val = null;\nList&lt;String&gt; holders = new ArrayList&lt;&gt;();\nholders.add(&quot;A&quot;);\nholders.add(&quot;B&quot;);\nfor (int i = 0; i &lt; holders.size(); i++) {\n   val = &quot;'&quot; + holders.get(i) + &quot;'&quot; + &quot;,&quot;;\n}\nSystem.out.println(val);\n</code></pre>\n<p>I wanted my val to be printed as <code>'A','B'</code>, but the output I am getting is <code>'B',</code>.</p>\n<p>What can be done here to get the correct output?</p>\n"},{"tags":["java","scala","concurrenthashmap"],"answers":[{"comments":[{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":1,"creation_date":1701065992,"post_id":77553142,"comment_id":136724196,"body_markdown":"The whole point of the question is to do it in a functional/Scala way. That is without mutability and possibly loops.","body":"The whole point of the question is to do it in a functional/Scala way. That is without mutability and possibly loops."},{"owner":{"account_id":22563072,"reputation":11,"user_id":16750474,"display_name":"marcin"},"score":0,"creation_date":1701079913,"post_id":77553142,"comment_id":136726226,"body_markdown":"This is not a functional way as @Ga&#235;lJ mentioned and you use HashMap instead of ConcurrentHashMap so this is not thread-safe solution. The point is to include all logic in one compute block to avoid race-condition.","body":"This is not a functional way as @Ga&#235;lJ mentioned and you use HashMap instead of ConcurrentHashMap so this is not thread-safe solution. The point is to include all logic in one compute block to avoid race-condition."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1701108144,"post_id":77553142,"comment_id":136731655,"body_markdown":"Well, it&#39;s written in _Java_.  I&#39;m not sure what else to tell you.  Read a book; find a tutorial.","body":"Well, it&#39;s written in <i>Java</i>.  I&#39;m not sure what else to tell you.  Read a book; find a tutorial."},{"owner":{"account_id":22563072,"reputation":11,"user_id":16750474,"display_name":"marcin"},"score":0,"creation_date":1701156130,"post_id":77553142,"comment_id":136737007,"body_markdown":"@Reilas I will. And thank you for your willingness to help, I appreciate it.","body":"@Reilas I will. And thank you for your willingness to help, I appreciate it."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1701156569,"post_id":77553142,"comment_id":136737075,"body_markdown":"This code does not seem related to the question asked either. &quot;Previous&quot; in the question refers to the previous value associated with the key, not the previous entry.","body":"This code does not seem related to the question asked either. &quot;Previous&quot; in the question refers to the previous value associated with the key, not the previous entry."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":5,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701038491,"creation_date":1701026412,"answer_id":77553142,"question_id":77553002,"body_markdown":"&gt; _&quot;... I need to get both previous and new value from Java ConcurrentHashMap (in Scala code). ...&quot;_\r\n\r\nHere is a solution in _Java_, that you can port.\r\n\r\nA somewhat un-contemporary approach; traverse the _key-set_ with a _[ListIterator](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ListIterator.html)_.\r\n\r\n```java\r\nMap&lt;String, Integer&gt; m = new HashMap&lt;&gt;() {{\r\n    put(&quot;A&quot;, 1);\r\n    put(&quot;B&quot;, 2);\r\n    put(&quot;C&quot;, 3);\r\n    put(&quot;D&quot;, 4);\r\n    put(&quot;E&quot;, 5);\r\n}};\r\nList&lt;String&gt; l = new ArrayList&lt;&gt;(m.keySet());\r\nListIterator&lt;String&gt; i = l.listIterator();\r\nString x, y = i.next();\r\nwhile (i.hasNext()) {\r\n    x = i.next();\r\n    System.out.printf(&quot;x = {&#39;%s&#39;: %s}, &quot;, x, m.get(x));\r\n    System.out.printf(&quot;y = {&#39;%s&#39;: %s}%n&quot;, y, m.get(y));\r\n    if (i.hasNext()) y = x;\r\n}\r\n```\r\n\r\n```none\r\nx = {&#39;B&#39;: 2}, y = {&#39;A&#39;: 1}\r\nx = {&#39;C&#39;: 3}, y = {&#39;B&#39;: 2}\r\nx = {&#39;D&#39;: 4}, y = {&#39;C&#39;: 3}\r\nx = {&#39;E&#39;: 5}, y = {&#39;D&#39;: 4}\r\n```","title":"functional way to get both previous value and new value from ConcurrentHashMap","body":"<blockquote>\n<p><em>&quot;... I need to get both previous and new value from Java ConcurrentHashMap (in Scala code). ...&quot;</em></p>\n</blockquote>\n<p>Here is a solution in <em>Java</em>, that you can port.</p>\n<p>A somewhat un-contemporary approach; traverse the <em>key-set</em> with a <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ListIterator.html\" rel=\"nofollow noreferrer\">ListIterator</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Integer&gt; m = new HashMap&lt;&gt;() {{\n    put(&quot;A&quot;, 1);\n    put(&quot;B&quot;, 2);\n    put(&quot;C&quot;, 3);\n    put(&quot;D&quot;, 4);\n    put(&quot;E&quot;, 5);\n}};\nList&lt;String&gt; l = new ArrayList&lt;&gt;(m.keySet());\nListIterator&lt;String&gt; i = l.listIterator();\nString x, y = i.next();\nwhile (i.hasNext()) {\n    x = i.next();\n    System.out.printf(&quot;x = {'%s': %s}, &quot;, x, m.get(x));\n    System.out.printf(&quot;y = {'%s': %s}%n&quot;, y, m.get(y));\n    if (i.hasNext()) y = x;\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>x = {'B': 2}, y = {'A': 1}\nx = {'C': 3}, y = {'B': 2}\nx = {'D': 4}, y = {'C': 3}\nx = {'E': 5}, y = {'D': 4}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701355083,"creation_date":1701355083,"answer_id":77579344,"question_id":77553002,"body_markdown":"No. It is not possible with current version of [ConcurrentHashMap][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.KeySetView.html","title":"functional way to get both previous value and new value from ConcurrentHashMap","body":"<p>No. It is not possible with current version of <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.KeySetView.html\" rel=\"nofollow noreferrer\">ConcurrentHashMap</a>.</p>\n"}],"owner":{"account_id":22563072,"reputation":11,"user_id":16750474,"display_name":"marcin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1701355083,"creation_date":1701024045,"question_id":77553002,"body_markdown":"I need to get both previous and new value from Java ConcurrentHashMap (in Scala code). To keep it thread-safe I use `compute` block which returns only new value. Is it possible to get both new and previous value without using var with initial null? Below my current solution:\r\n\r\n```\r\n  map: ConcurrentHashMap[String, Object] = new ConcurrentHashMap\r\n\r\n  def foo = {\r\n    var previousValue: Object = null\r\n\r\n    val newValue = map.compute(&quot;key&quot;, (_, value) =&gt; {\r\n      previousValue = Option(value).getOrElse(initialValue)\r\n      setNewValue(previousValue)\r\n     }\r\n    )\r\n\r\n    (previousValue, newValue)\r\n  }\r\n```","title":"functional way to get both previous value and new value from ConcurrentHashMap","body":"<p>I need to get both previous and new value from Java ConcurrentHashMap (in Scala code). To keep it thread-safe I use <code>compute</code> block which returns only new value. Is it possible to get both new and previous value without using var with initial null? Below my current solution:</p>\n<pre><code>  map: ConcurrentHashMap[String, Object] = new ConcurrentHashMap\n\n  def foo = {\n    var previousValue: Object = null\n\n    val newValue = map.compute(&quot;key&quot;, (_, value) =&gt; {\n      previousValue = Option(value).getOrElse(initialValue)\n      setNewValue(previousValue)\n     }\n    )\n\n    (previousValue, newValue)\n  }\n</code></pre>\n"},{"tags":["java","mongodb","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":4546904,"reputation":152,"user_id":3693223,"display_name":"Lucho82"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701354938,"creation_date":1701354938,"answer_id":77579331,"question_id":77573436,"body_markdown":"After one day on possible workaround&#39;s I found other implementation.\r\n\r\nFor a better control on Mongo query and operations I switch from MongoRepository to MongoTemplate and create mt custom methods with Criteria for parameters filters and validations, and TextCriteria for text search.\r\n\r\n","title":"Custom Query JPA MongoRepository with optional parameter","body":"<p>After one day on possible workaround's I found other implementation.</p>\n<p>For a better control on Mongo query and operations I switch from MongoRepository to MongoTemplate and create mt custom methods with Criteria for parameters filters and validations, and TextCriteria for text search.</p>\n"}],"owner":{"account_id":4546904,"reputation":152,"user_id":3693223,"display_name":"Lucho82"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701354938,"creation_date":1701280037,"question_id":77573436,"body_markdown":"I have this `ticket` document in Mongo Database\r\n\r\n    private id;\r\n    ...\r\n    private EnumState state;\r\n    private EnumType type;\r\n    private EnumPriority priority;\r\n\r\nNow my requirement is filtered by these fields in a http request with API\r\n\r\n 1. `http://localhost:8080/` - get all without filter\r\n 2. `http://localhost:8080?state=1` get all documents where state equal 1\r\n 3. `http://localhost:8080?state1&amp;type=1` get all documents where state equal 1 and type equal 1\r\n 4. `http://localhost:8080?state1&amp;type=1&amp;priority=1` get all documents where state equal 1 and type equal 1 and priority equal 1.\r\n\r\nI am using JPA MongoRepository interface and writing a Custom Query\r\n\r\n    @Query(&quot;{ $and: [ &quot; +\r\n            &quot;{ $or: [ { &#39;state&#39;: { $eq: ?0 } }, { &#39;state&#39;: { $exists: false } } ] }, &quot; +\r\n            &quot;{ $or: [ { &#39;type&#39;: { $eq: ?1 } }, { &#39;type&#39;: { $exists: false } } ] }, &quot; +\r\n            &quot;{ $or: [ { &#39;priority&#39;: { $eq: ?2 } }, { &#39;priority&#39;: { $exists: false } } ] }&quot; +\r\n            &quot;] }&quot;)\r\n    Page&lt;Ticket&gt; findAllBy(IncidentState state, IncidentType type, IncidentPriority priority, Pageable p);\r\n    \r\nBut for example when call `http://localhost:8080/` and `http://localhost:8080?state=1` is always return me Ticket[].\r\n\r\nComparing with PL/SQL I need something like\r\n\r\n    select * from ticket where\r\n    (i_type is null or type=i_type) and\r\n    (i_state is null or state=i_state) and\r\n    (i_priority is null or priority=i_priority)\r\n\r\nWhat is wrong in my @Query definition ?","title":"Custom Query JPA MongoRepository with optional parameter","body":"<p>I have this <code>ticket</code> document in Mongo Database</p>\n<pre><code>private id;\n...\nprivate EnumState state;\nprivate EnumType type;\nprivate EnumPriority priority;\n</code></pre>\n<p>Now my requirement is filtered by these fields in a http request with API</p>\n<ol>\n<li><code>http://localhost:8080/</code> - get all without filter</li>\n<li><code>http://localhost:8080?state=1</code> get all documents where state equal 1</li>\n<li><code>http://localhost:8080?state1&amp;type=1</code> get all documents where state equal 1 and type equal 1</li>\n<li><code>http://localhost:8080?state1&amp;type=1&amp;priority=1</code> get all documents where state equal 1 and type equal 1 and priority equal 1.</li>\n</ol>\n<p>I am using JPA MongoRepository interface and writing a Custom Query</p>\n<pre><code>@Query(&quot;{ $and: [ &quot; +\n        &quot;{ $or: [ { 'state': { $eq: ?0 } }, { 'state': { $exists: false } } ] }, &quot; +\n        &quot;{ $or: [ { 'type': { $eq: ?1 } }, { 'type': { $exists: false } } ] }, &quot; +\n        &quot;{ $or: [ { 'priority': { $eq: ?2 } }, { 'priority': { $exists: false } } ] }&quot; +\n        &quot;] }&quot;)\nPage&lt;Ticket&gt; findAllBy(IncidentState state, IncidentType type, IncidentPriority priority, Pageable p);\n</code></pre>\n<p>But for example when call <code>http://localhost:8080/</code> and <code>http://localhost:8080?state=1</code> is always return me Ticket[].</p>\n<p>Comparing with PL/SQL I need something like</p>\n<pre><code>select * from ticket where\n(i_type is null or type=i_type) and\n(i_state is null or state=i_state) and\n(i_priority is null or priority=i_priority)\n</code></pre>\n<p>What is wrong in my @Query definition ?</p>\n"},{"tags":["java","openapi-generator","openapi-generator-cli"],"owner":{"account_id":1836808,"reputation":141,"user_id":1667016,"display_name":"user1667016"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1701354695,"creation_date":1701354695,"question_id":77579289,"body_markdown":"I am tying to use openapi-generator-cli to make the model (pojo) classes from a json api definition. It works, but it makes more than I want. \r\n\r\nI am using ```-g java --global-property models``` as options, and this kind of works. It is only making the model classes now, and not all the API classes. However, it&#39; still putting import in for things that are not found or used, for example;\r\n\r\nSome imports are included which are not used, such as;\r\n```\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.GsonBuilder;\r\n```\r\nWhich is ok because I am using that elsewhere.\r\n\r\nHowever, some of the code in the models are importing code I do not have, which it not generated, nor do I want;\r\n\r\n```\r\nimport org.openapitools.client.JSON;\r\n\r\npublic static AmendRequestPiecesInner fromJson(String jsonString) throws IOException {\r\n    return JSON.getGson().fromJson(jsonString, AmendRequestPiecesInner.class);\r\n  }\r\n```\r\n\r\nI literally JUST want the simple POJO classes, with no extra things.\r\n\r\nIs this possible?\r\n\r\n","title":"How to make simple POJO with openapi-generator-cli","body":"<p>I am tying to use openapi-generator-cli to make the model (pojo) classes from a json api definition. It works, but it makes more than I want.</p>\n<p>I am using <code>-g java --global-property models</code> as options, and this kind of works. It is only making the model classes now, and not all the API classes. However, it' still putting import in for things that are not found or used, for example;</p>\n<p>Some imports are included which are not used, such as;</p>\n<pre><code>import com.google.gson.Gson;\nimport com.google.gson.GsonBuilder;\n</code></pre>\n<p>Which is ok because I am using that elsewhere.</p>\n<p>However, some of the code in the models are importing code I do not have, which it not generated, nor do I want;</p>\n<pre><code>import org.openapitools.client.JSON;\n\npublic static AmendRequestPiecesInner fromJson(String jsonString) throws IOException {\n    return JSON.getGson().fromJson(jsonString, AmendRequestPiecesInner.class);\n  }\n</code></pre>\n<p>I literally JUST want the simple POJO classes, with no extra things.</p>\n<p>Is this possible?</p>\n"},{"tags":["java","eclipse","soap","jetty","cxf"],"comments":[{"owner":{"account_id":3420083,"reputation":687,"user_id":2867993,"display_name":"Martin"},"score":1,"creation_date":1697464283,"post_id":77125261,"comment_id":136279633,"body_markdown":"Good and bad news for you. Good: I got the same problem. Bad: I have no idea why, too.","body":"Good and bad news for you. Good: I got the same problem. Bad: I have no idea why, too."}],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695022338,"creation_date":1695022338,"answer_id":77125298,"question_id":77125261,"body_markdown":"It seems that you have both &quot;jetty&quot; (`org.eclipse.jetty`) and &quot;tomcat&quot; (`org.apache.tomcat`, `org.apache.catalina`) in your stacktrace so something wierd is going on.\r\n\r\nAre you using maven? Try running `mvn dependency:tree` to see why both tomcat and jetty are on your classpath","title":"java.lang.IllegalStateException No Jetty ContextHandler, Jetty WebSocket SCI unavailable","body":"<p>It seems that you have both &quot;jetty&quot; (<code>org.eclipse.jetty</code>) and &quot;tomcat&quot; (<code>org.apache.tomcat</code>, <code>org.apache.catalina</code>) in your stacktrace so something wierd is going on.</p>\n<p>Are you using maven? Try running <code>mvn dependency:tree</code> to see why both tomcat and jetty are on your classpath</p>\n"},{"comments":[{"owner":{"account_id":7673258,"reputation":1688,"user_id":6200354,"display_name":"atish.s"},"score":0,"creation_date":1695382835,"post_id":77140338,"comment_id":136020550,"body_markdown":"You could update the question with this info instead of adding it as an answer","body":"You could update the question with this info instead of adding it as an answer"}],"tags":[],"owner":{"account_id":26409135,"reputation":1,"user_id":22598282,"display_name":"Lasmarinas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695196019,"creation_date":1695196019,"answer_id":77140338,"question_id":77125261,"body_markdown":"I&#39;m actually not using Maven, I would like the service run&#39;s with Tomcat 10. But I don&#39;t know how to do this.\r\n\r\nWith Tomcat 7.0.27 it was running all fine. Probably with the new version some changes happened and I don&#39;t know where to configure this or what library is missing.","title":"java.lang.IllegalStateException No Jetty ContextHandler, Jetty WebSocket SCI unavailable","body":"<p>I'm actually not using Maven, I would like the service run's with Tomcat 10. But I don't know how to do this.</p>\n<p>With Tomcat 7.0.27 it was running all fine. Probably with the new version some changes happened and I don't know where to configure this or what library is missing.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698918106,"post_id":77402735,"comment_id":136466159,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77402735/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29795421,"reputation":1,"user_id":22834609,"display_name":"Roemer "},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698842842,"creation_date":1698842842,"answer_id":77402735,"question_id":77125261,"body_markdown":"We had the exact same case as you: \r\n1 Java 17\r\n2 Tomcat 10\r\n3 Apache CXF 4.0.2\r\n\r\nIn our case we imported a library which used jetty for some testing purposes. But we were using tomcat to run our own application. Our solution was excluding the jetty import from this library and it worked like a charm.\r\n\r\n","title":"java.lang.IllegalStateException No Jetty ContextHandler, Jetty WebSocket SCI unavailable","body":"<p>We had the exact same case as you:\n1 Java 17\n2 Tomcat 10\n3 Apache CXF 4.0.2</p>\n<p>In our case we imported a library which used jetty for some testing purposes. But we were using tomcat to run our own application. Our solution was excluding the jetty import from this library and it worked like a charm.</p>\n"},{"tags":[],"owner":{"account_id":7806647,"reputation":1,"user_id":5904322,"display_name":"Guuberre"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701354552,"creation_date":1701354552,"answer_id":77579265,"question_id":77125261,"body_markdown":"I ran into exactly this same issue. In my case, I had the CXF runtime in my Java Build Path in Eclipse. This works just fine for Tomcat 9 and earlier. However, Tomcat 10.1 and TomEE 9 both produce that exception. The fix for me was to remove the CXF runtime from my build path and add the specific dependencies that I need in my POM.\r\nThe clue that gave it away for me was lance-java&#39;s answer. ","title":"java.lang.IllegalStateException No Jetty ContextHandler, Jetty WebSocket SCI unavailable","body":"<p>I ran into exactly this same issue. In my case, I had the CXF runtime in my Java Build Path in Eclipse. This works just fine for Tomcat 9 and earlier. However, Tomcat 10.1 and TomEE 9 both produce that exception. The fix for me was to remove the CXF runtime from my build path and add the specific dependencies that I need in my POM.\nThe clue that gave it away for me was lance-java's answer.</p>\n"}],"owner":{"account_id":29470894,"reputation":21,"user_id":22583523,"display_name":"Lasmarinas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1701354552,"creation_date":1695021893,"question_id":77125261,"body_markdown":"I&#39;m trying to deploy a SOAP-Webservice with:\r\n\r\n- Tomcat 10\r\n- Apache CXF 4.0.2\r\n- Java JDK 17.0.6\r\n\r\nThe Service was running fine with Tomcat 7.0.27, Java JDK 1.7.45 and Apache CXF 3.0.2.\r\nAfter changing all versions now it won&#39;t run again and claims the above error message.\r\nI have no idea, what I can do.\r\n\r\nThis are the details of the error message.\r\n\r\nI tried several changes of the configuration, but nothing helps.\r\nI&#39;m working with Eclipse Version: 2023-06 (4.28.0)\r\n\r\nMany thanks for any help.\r\n\r\n~~~\r\nINFORMATION: No Spring WebApplicationInitializer types detected on classpath\r\nSept. 18, 2023 9:03:34 AM org.apache.catalina.core.ContainerBase startInternal\r\nSCHWERWIEGEND: A child container failed during start\r\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cumulustransfer]]\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:873)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:846)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:241)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:428)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:918)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:347)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478)\r\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cumulustransfer]]\r\n\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\r\n\t... 21 more\r\nCaused by: java.lang.IllegalStateException: No Jetty ContextHandler, Jetty WebSocket SCI unavailable\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.getServletContextHandler(ServletContextHandler.java:103)\r\n\tat org.eclipse.jetty.websocket.server.config.JettyWebSocketServletContainerInitializer.onStartup(JettyWebSocketServletContainerInitializer.java:99)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4886)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t... 27 more\r\n\r\nSept. 18, 2023 9:03:34 AM org.apache.catalina.core.ContainerBase startInternal\r\nSCHWERWIEGEND: A child container failed during start\r\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:873)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:241)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:428)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:918)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:347)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478)\r\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:885)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:846)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\r\n\t... 13 more\r\nCaused by: java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cumulustransfer]]\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:873)\r\n\t... 21 more\r\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cumulustransfer]]\r\n\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\r\n\t... 21 more\r\nCaused by: java.lang.IllegalStateException: No Jetty ContextHandler, Jetty WebSocket SCI unavailable\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.getServletContextHandler(ServletContextHandler.java:103)\r\n\tat org.eclipse.jetty.websocket.server.config.JettyWebSocketServletContainerInitializer.onStartup(JettyWebSocketServletContainerInitializer.java:99)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4886)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t... 27 more\r\n~~~","title":"java.lang.IllegalStateException No Jetty ContextHandler, Jetty WebSocket SCI unavailable","body":"<p>I'm trying to deploy a SOAP-Webservice with:</p>\n<ul>\n<li>Tomcat 10</li>\n<li>Apache CXF 4.0.2</li>\n<li>Java JDK 17.0.6</li>\n</ul>\n<p>The Service was running fine with Tomcat 7.0.27, Java JDK 1.7.45 and Apache CXF 3.0.2.\nAfter changing all versions now it won't run again and claims the above error message.\nI have no idea, what I can do.</p>\n<p>This are the details of the error message.</p>\n<p>I tried several changes of the configuration, but nothing helps.\nI'm working with Eclipse Version: 2023-06 (4.28.0)</p>\n<p>Many thanks for any help.</p>\n<pre><code>INFORMATION: No Spring WebApplicationInitializer types detected on classpath\nSept. 18, 2023 9:03:34 AM org.apache.catalina.core.ContainerBase startInternal\nSCHWERWIEGEND: A child container failed during start\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cumulustransfer]]\n    at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:873)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:846)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:241)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:428)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:918)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:795)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:347)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478)\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cumulustransfer]]\n    at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\n    ... 21 more\nCaused by: java.lang.IllegalStateException: No Jetty ContextHandler, Jetty WebSocket SCI unavailable\n    at org.eclipse.jetty.servlet.ServletContextHandler.getServletContextHandler(ServletContextHandler.java:103)\n    at org.eclipse.jetty.websocket.server.config.JettyWebSocketServletContainerInitializer.onStartup(JettyWebSocketServletContainerInitializer.java:99)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4886)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    ... 27 more\n\nSept. 18, 2023 9:03:34 AM org.apache.catalina.core.ContainerBase startInternal\nSCHWERWIEGEND: A child container failed during start\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A child container failed during start\n    at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:873)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:241)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:428)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:918)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:795)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:347)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478)\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:885)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:846)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\n    ... 13 more\nCaused by: java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cumulustransfer]]\n    at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:873)\n    ... 21 more\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cumulustransfer]]\n    at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\n    ... 21 more\nCaused by: java.lang.IllegalStateException: No Jetty ContextHandler, Jetty WebSocket SCI unavailable\n    at org.eclipse.jetty.servlet.ServletContextHandler.getServletContextHandler(ServletContextHandler.java:103)\n    at org.eclipse.jetty.websocket.server.config.JettyWebSocketServletContainerInitializer.onStartup(JettyWebSocketServletContainerInitializer.java:99)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4886)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    ... 27 more\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":7788110,"reputation":1429,"user_id":6306585,"accept_rate":60,"display_name":"Shakirov Ramil"},"score":1,"creation_date":1701354995,"post_id":77579253,"comment_id":136767384,"body_markdown":"Soo. Are you disable google?\n\nhttps://www.geeksforgeeks.org/spring-boot-start-stop-a-kafka-listener-dynamically/","body":"Soo. Are you disable google?  <a href=\"https://www.geeksforgeeks.org/spring-boot-start-stop-a-kafka-listener-dynamically/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a>"},{"owner":{"account_id":117317,"reputation":11245,"user_id":307297,"accept_rate":62,"display_name":"chris01"},"score":0,"creation_date":1701355802,"post_id":77579253,"comment_id":136767555,"body_markdown":"Thats woderful for runtime changes. But maybe there is still a way for startup with a condtion.","body":"Thats woderful for runtime changes. But maybe there is still a way for startup with a condtion."}],"owner":{"account_id":117317,"reputation":11245,"user_id":307297,"accept_rate":62,"display_name":"chris01"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701354451,"creation_date":1701354451,"question_id":77579253,"body_markdown":"I have a annotated method.\r\n\r\n    class MyKafka\r\n    {\r\n      @KafkaListener (topics = &quot;MyTopic&quot;)\r\n      public void read ()\r\n      {\r\n        //...\r\n      }\r\n\r\n      public int switch = 0;  // 0 ... disable reader\r\n    }\r\n\r\nWith the annotation it is a reader for a message-bus ... whatever... to important for my question.\r\n\r\nBut I want it only if member-variable switch is set to not 0. If 0 the annotation should not be processed and the method will not get called.\r\n\r\nHow can I get this??\r\n\r\nI tried with @ConditionalOnExpressin but this only worked on proberties in application.proberties and not on my variable - as far I see.\r\n\r\n\r\n","title":"Conditonal annotation by a variable","body":"<p>I have a annotated method.</p>\n<pre><code>class MyKafka\n{\n  @KafkaListener (topics = &quot;MyTopic&quot;)\n  public void read ()\n  {\n    //...\n  }\n\n  public int switch = 0;  // 0 ... disable reader\n}\n</code></pre>\n<p>With the annotation it is a reader for a message-bus ... whatever... to important for my question.</p>\n<p>But I want it only if member-variable switch is set to not 0. If 0 the annotation should not be processed and the method will not get called.</p>\n<p>How can I get this??</p>\n<p>I tried with @ConditionalOnExpressin but this only worked on proberties in application.proberties and not on my variable - as far I see.</p>\n"},{"tags":["java","constructor","setter"],"comments":[{"owner":{"account_id":52616,"reputation":1042991,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":2,"creation_date":1381751433,"post_id":19359548,"comment_id":28684667,"body_markdown":"Those aren&#39;t variables, they&#39;re (data) members.","body":"Those aren&#39;t variables, they&#39;re (data) members."}],"answers":[{"comments":[{"owner":{"account_id":137237,"reputation":13989,"user_id":341291,"accept_rate":76,"display_name":"Axel"},"score":3,"creation_date":1381751793,"post_id":19359582,"comment_id":28684870,"body_markdown":"+1 and if you want to create immutable objects, you cannot use setter-methods (I won&#39;t say everything has to be initialised in the constructor because different approaches exist, like lazy-evaluation which can be used even with immutable objects).","body":"+1 and if you want to create immutable objects, you cannot use setter-methods (I won&#39;t say everything has to be initialised in the constructor because different approaches exist, like lazy-evaluation which can be used even with immutable objects)."},{"owner":{"account_id":3680730,"reputation":203,"user_id":3065750,"display_name":"BraveNinja"},"score":0,"creation_date":1469137283,"post_id":19359582,"comment_id":64426635,"body_markdown":"I&#39;m assuming that we need to have either a constructor or getters and setters in a class. If I&#39;m wrong, could you please tell me of a scenario where we need to use both.","body":"I&#39;m assuming that we need to have either a constructor or getters and setters in a class. If I&#39;m wrong, could you please tell me of a scenario where we need to use both."},{"owner":{"account_id":2305374,"reputation":44549,"user_id":2024761,"display_name":"Rahul"},"score":2,"creation_date":1469161075,"post_id":19359582,"comment_id":64432192,"body_markdown":"Let&#39;s say your class has 20 odd fields. The application requires you to quickly create a new object of that class with just 5 mandatory fields for object creation. Have a constructor with those 5 fields only and object instantiation is done. Now later in the application, there is a code piece which does some business logic to set/reset the other fields. In that case you&#39;ll need your setters for those fields. This is just a simple case and there are many situations where both could be combined. Your assessment of the requirement should be the deciding factor.","body":"Let&#39;s say your class has 20 odd fields. The application requires you to quickly create a new object of that class with just 5 mandatory fields for object creation. Have a constructor with those 5 fields only and object instantiation is done. Now later in the application, there is a code piece which does some business logic to set/reset the other fields. In that case you&#39;ll need your setters for those fields. This is just a simple case and there are many situations where both could be combined. Your assessment of the requirement should be the deciding factor."},{"owner":{"account_id":2305374,"reputation":44549,"user_id":2024761,"display_name":"Rahul"},"score":0,"creation_date":1469161250,"post_id":19359582,"comment_id":64432227,"body_markdown":"In general, what I think is, the more you are going to manipulate a field, the more likely you&#39;ll need it&#39;s setters. The fields which are set and forget types, usually go as the constructor parameter. Hope this helps.","body":"In general, what I think is, the more you are going to manipulate a field, the more likely you&#39;ll need it&#39;s setters. The fields which are set and forget types, usually go as the constructor parameter. Hope this helps."}],"tags":[],"owner":{"account_id":2305374,"reputation":44549,"user_id":2024761,"display_name":"Rahul"},"comment_count":4,"down_vote_count":1,"up_vote_count":77,"is_accepted":true,"score":76,"last_activity_date":1550034608,"creation_date":1381751379,"answer_id":19359582,"question_id":19359548,"body_markdown":"You should use the constructor approach, when you want to create a new instance of the object, with the values already populated(a ready to use object with value populated). This way you need not explicitly call the setter methods for each field in the object to populate them.\r\n\r\nYou set the value using a setter approach, when you want to change the value of a field, after the object has been created.\r\n\r\n**For example:-**\r\n\r\n    MyObject obj1 = new MyObject(&quot;setSomeStringInMyObject&quot;); // Constructor approach\r\n    // Yippy, I can just use my obj1, as the values are already populated\r\n    // But even after this I can change the value\r\n    obj1.setSomeString(&quot;IWantANewValue&quot;); // Value changed using setter, if required.\r\n    ..\r\n    MyObject obj2 = new MyObject();\r\n    obj2.setSomeString(&quot;setSomeStringNow&quot;); // Setter approach\r\n    // values weren&#39;t populated - I had to do that. Sad :(\r\n\r\nAnd as Axel mentioned, *if you want to create immutable objects, you cannot use setter-methods approach. I won&#39;t say everything has to be initialised in the constructor because different approaches exist, like lazy-evaluation which can be used even with immutable objects*.","title":"Setter methods or constructors","body":"<p>You should use the constructor approach, when you want to create a new instance of the object, with the values already populated(a ready to use object with value populated). This way you need not explicitly call the setter methods for each field in the object to populate them.</p>\n\n<p>You set the value using a setter approach, when you want to change the value of a field, after the object has been created.</p>\n\n<p><strong>For example:-</strong></p>\n\n<pre><code>MyObject obj1 = new MyObject(\"setSomeStringInMyObject\"); // Constructor approach\n// Yippy, I can just use my obj1, as the values are already populated\n// But even after this I can change the value\nobj1.setSomeString(\"IWantANewValue\"); // Value changed using setter, if required.\n..\nMyObject obj2 = new MyObject();\nobj2.setSomeString(\"setSomeStringNow\"); // Setter approach\n// values weren't populated - I had to do that. Sad :(\n</code></pre>\n\n<p>And as Axel mentioned, <em>if you want to create immutable objects, you cannot use setter-methods approach. I won't say everything has to be initialised in the constructor because different approaches exist, like lazy-evaluation which can be used even with immutable objects</em>.</p>\n"},{"comments":[{"owner":{"account_id":957028,"reputation":15143,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1381751767,"post_id":19359649,"comment_id":28684855,"body_markdown":"&quot;Always&quot;? Think about immutables.","body":"&quot;Always&quot;? Think about immutables."}],"tags":[],"owner":{"account_id":3075057,"reputation":622,"user_id":2604660,"accept_rate":100,"display_name":"Kasper Sanguesa-Franz"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1634585061,"creation_date":1381751590,"answer_id":19359649,"question_id":19359548,"body_markdown":"In most cases, i use both of them :)  (since you 9/10 times want to come back and edit something (and that isn&#39;t a good practice to make a new instance of it)\r\n\r\nI normally make something like this\r\n```java\r\n    public class User {\r\n\r\n    \tprivate int id;\r\n    \tprivate String initials;\r\n    \tprivate String firstName;\r\n    \tprivate String lastName;\r\n    \tprivate String email;\r\n\t\r\n    \tpublic User() {\r\n          \tthis(0, &quot;&quot;, &quot;&quot;, &quot;&quot;);\r\n    \t}\r\n\t\r\n     \tpublic User(int id, String firstName, String lastName, String email) {\r\n\t\t    this.id = id;\r\n\t      \tthis.firstName = firstName;\r\n\t    \tthis.lastName = lastName;\r\n\t    \tthis.email = email;\r\n\t    }\r\n       // Getters and setters should be here\r\n    }\r\n```\r\n\r\nAnd when you want to edit something with it you can just use the setters, (a good thing if you for example is saving your users in an ArrayList, then you can just get the object from the arraylist and just set the field you wanna edit, instead of making a brand new object of it :) ","title":"Setter methods or constructors","body":"<p>In most cases, i use both of them :)  (since you 9/10 times want to come back and edit something (and that isn't a good practice to make a new instance of it)</p>\n<p>I normally make something like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class User {\n\n        private int id;\n        private String initials;\n        private String firstName;\n        private String lastName;\n        private String email;\n    \n        public User() {\n            this(0, &quot;&quot;, &quot;&quot;, &quot;&quot;);\n        }\n    \n        public User(int id, String firstName, String lastName, String email) {\n            this.id = id;\n            this.firstName = firstName;\n            this.lastName = lastName;\n            this.email = email;\n        }\n       // Getters and setters should be here\n    }\n</code></pre>\n<p>And when you want to edit something with it you can just use the setters, (a good thing if you for example is saving your users in an ArrayList, then you can just get the object from the arraylist and just set the field you wanna edit, instead of making a brand new object of it :)</p>\n"},{"tags":[],"owner":{"account_id":2864952,"reputation":797,"user_id":2459452,"accept_rate":42,"display_name":"Cold"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1381751591,"creation_date":1381751591,"answer_id":19359650,"question_id":19359548,"body_markdown":"You can combine the two aproaches. Inside the constructor you can invoke the setters of instace variables. Something like:\r\n\r\n    public class TestClass {\r\n        private String someField;\r\n    \r\n        public TestClass(String someField) {\r\n            setSomeField(someField);\r\n        }\r\n    \r\n        public String getSomeField() {\r\n            return someField;\r\n        }\r\n    \r\n        public void setSomeField(String someField) {\r\n            this.someField = someField;\r\n        } \r\n    }","title":"Setter methods or constructors","body":"<p>You can combine the two aproaches. Inside the constructor you can invoke the setters of instace variables. Something like:</p>\n\n<pre><code>public class TestClass {\n    private String someField;\n\n    public TestClass(String someField) {\n        setSomeField(someField);\n    }\n\n    public String getSomeField() {\n        return someField;\n    }\n\n    public void setSomeField(String someField) {\n        this.someField = someField;\n    } \n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":362885,"reputation":37276,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":0,"creation_date":1497941056,"post_id":19359663,"comment_id":76276360,"body_markdown":"Why? Immutable classes can have setters","body":"Why? Immutable classes can have setters"},{"owner":{"account_id":1216588,"reputation":563,"user_id":1184054,"accept_rate":57,"display_name":"vancan1ty"},"score":2,"creation_date":1501776498,"post_id":19359663,"comment_id":77939979,"body_markdown":"@ZhekaKozlov if an object has setters which mutate state then by definition the object is not immutable, right?","body":"@ZhekaKozlov if an object has setters which mutate state then by definition the object is not immutable, right?"},{"owner":{"account_id":362885,"reputation":37276,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":0,"creation_date":1501781311,"post_id":19359663,"comment_id":77943143,"body_markdown":"@vancan1ty Setters can return a new instance of the object instead of mutating it","body":"@vancan1ty Setters can return a new instance of the object instead of mutating it"},{"owner":{"account_id":1216588,"reputation":563,"user_id":1184054,"accept_rate":57,"display_name":"vancan1ty"},"score":1,"creation_date":1501883548,"post_id":19359663,"comment_id":77993290,"body_markdown":"@ZhekaKozlov I suspect unless this is applied consistently over a codebase this would be a recipe for confusion (definitely the java idiom is that setters (e.g. &quot;setXXX&quot;) modify the object).  I see that other people are using &quot;deriveXXX&quot; or copy constructors for the purpose you describe.","body":"@ZhekaKozlov I suspect unless this is applied consistently over a codebase this would be a recipe for confusion (definitely the java idiom is that setters (e.g. &quot;setXXX&quot;) modify the object).  I see that other people are using &quot;deriveXXX&quot; or copy constructors for the purpose you describe."}],"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":4,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1381751647,"creation_date":1381751647,"answer_id":19359663,"question_id":19359548,"body_markdown":"If you want to have an immutable class use constructor otherwise use setters.","title":"Setter methods or constructors","body":"<p>If you want to have an immutable class use constructor otherwise use setters.</p>\n"},{"tags":[],"owner":{"account_id":2199420,"reputation":1383,"user_id":1944234,"accept_rate":78,"display_name":"hmir"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1381751799,"creation_date":1381751799,"answer_id":19359707,"question_id":19359548,"body_markdown":"Say we have a class, named Counter:\r\n\r\n    public class Counter{\r\n        int count;\r\n        //constructor\r\n        public Counter(int c){\r\n            count = c;\r\n        }\r\n        public void setCounter(int newCounter){\r\n            count = newCounter;\r\n        }\r\n    }\r\n\r\nIn the class above, when you want to create a _new_ Counter object, you would use a constructor and set the count variable within that. like so:\r\n\r\n    Counter myCounter = new Counter(1);\r\n\r\nIf you want to change the count variable _during runtime_, you would use the setter method:\r\n\r\n    myCounter.setCounter(2);","title":"Setter methods or constructors","body":"<p>Say we have a class, named Counter:</p>\n\n<pre><code>public class Counter{\n    int count;\n    //constructor\n    public Counter(int c){\n        count = c;\n    }\n    public void setCounter(int newCounter){\n        count = newCounter;\n    }\n}\n</code></pre>\n\n<p>In the class above, when you want to create a <em>new</em> Counter object, you would use a constructor and set the count variable within that. like so:</p>\n\n<pre><code>Counter myCounter = new Counter(1);\n</code></pre>\n\n<p>If you want to change the count variable <em>during runtime</em>, you would use the setter method:</p>\n\n<pre><code>myCounter.setCounter(2);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5758568,"reputation":365,"user_id":4545661,"display_name":"Tinyiko Chauke"},"score":1,"creation_date":1628541683,"post_id":19359783,"comment_id":121444279,"body_markdown":"this makes more sense to me simply to explain to someone","body":"this makes more sense to me simply to explain to someone"}],"tags":[],"owner":{"account_id":1144443,"reputation":4425,"user_id":2113996,"accept_rate":31,"display_name":"eatSleepCode"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1629219456,"creation_date":1381752015,"answer_id":19359783,"question_id":19359548,"body_markdown":"We use the approach depending on the scenario.\r\n\r\n1. Constructor Approach: We should go ahead with this approach when there are parameters which are mandatory for object&#39;s instantiation and we can not construct an object without them.\r\n\r\n2. Setter Approach: For optional parameters we can go ahead with the setter approach.","title":"Setter methods or constructors","body":"<p>We use the approach depending on the scenario.</p>\n<ol>\n<li><p>Constructor Approach: We should go ahead with this approach when there are parameters which are mandatory for object's instantiation and we can not construct an object without them.</p>\n</li>\n<li><p>Setter Approach: For optional parameters we can go ahead with the setter approach.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":126052,"reputation":1290,"user_id":322276,"display_name":"sgp15"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1381752968,"creation_date":1381752968,"answer_id":19360058,"question_id":19359548,"body_markdown":"It depends on application domain and purpose of the class in it. \r\n\r\nJava beans normally have a no arg constructor and getter/setters for relevant member variables. There are advantages to this approach as Java beans are supported out of the box in many frameworks like Struts and Spring.\r\n\r\nA class can also enforce mandatory availability of values by having such variables passed as parameters to a base constructor. And non-mandatory values can be set through other convenience constructors or setter methods.\r\n\r\nOn the other hand immutable classes can have constructors but require absence methods that modify its state including setters.\r\n\r\nOverall, such decisions can be made with consideration to overall design of application, frameworks&lt;sup&gt;1&lt;/sup&gt; it runs in, contract it must enforce, etc.\r\n\r\n*1 - Although, its recommended that class design should be independent of frameworks. Good frameworks like Spring don&#39;t enforce such requirements.*","title":"Setter methods or constructors","body":"<p>It depends on application domain and purpose of the class in it. </p>\n\n<p>Java beans normally have a no arg constructor and getter/setters for relevant member variables. There are advantages to this approach as Java beans are supported out of the box in many frameworks like Struts and Spring.</p>\n\n<p>A class can also enforce mandatory availability of values by having such variables passed as parameters to a base constructor. And non-mandatory values can be set through other convenience constructors or setter methods.</p>\n\n<p>On the other hand immutable classes can have constructors but require absence methods that modify its state including setters.</p>\n\n<p>Overall, such decisions can be made with consideration to overall design of application, frameworks<sup>1</sup> it runs in, contract it must enforce, etc.</p>\n\n<p><em>1 - Although, its recommended that class design should be independent of frameworks. Good frameworks like Spring don't enforce such requirements.</em></p>\n"},{"tags":[],"owner":{"account_id":6628166,"reputation":165,"user_id":5117671,"display_name":"Jack"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1482332517,"creation_date":1482332517,"answer_id":41265796,"question_id":19359548,"body_markdown":"In case of Constructors, When you update fields, you create a new object every time by using *new* keyword.\r\n\r\n    Customer customer = new Customer(&quot;Tom&quot;, 23, 10000);\r\n\r\nFor example, if you want to update the salary of Tom, you need to write this line again with updated salary, that means memory is wasted.\r\n\r\nIn case of setter methods you can set individual fields in original object only.","title":"Setter methods or constructors","body":"<p>In case of Constructors, When you update fields, you create a new object every time by using <em>new</em> keyword.</p>\n\n<pre><code>Customer customer = new Customer(\"Tom\", 23, 10000);\n</code></pre>\n\n<p>For example, if you want to update the salary of Tom, you need to write this line again with updated salary, that means memory is wasted.</p>\n\n<p>In case of setter methods you can set individual fields in original object only.</p>\n"},{"comments":[{"owner":{"account_id":5758568,"reputation":365,"user_id":4545661,"display_name":"Tinyiko Chauke"},"score":0,"creation_date":1628543969,"post_id":42798426,"comment_id":121444897,"body_markdown":"this is a great example, is there where we can point out perfoming Data Abstraction and  Polymorphism? i would like to see the visibility of those two in code","body":"this is a great example, is there where we can point out perfoming Data Abstraction and  Polymorphism? i would like to see the visibility of those two in code"}],"tags":[],"owner":{"account_id":5066829,"reputation":2585,"user_id":4066742,"accept_rate":0,"display_name":"S. Mayol"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1668016009,"creation_date":1489534139,"answer_id":42798426,"question_id":19359548,"body_markdown":"I think you asked a good question: - But when do we use constructors and when do we use setters?\r\n\r\nFirst, let&#39;s start with some concepts. I hope this explanation helps everybody that want to know when to use constructors or setters() and getters() methods (Accessors and Mutators). **Constructors** are similar to **Methods**, however there are few differences between ***constructor*** and ***method*** in java:\r\n\r\n1) A ***Constructor*** is used to initialize the state of an object. A \t***Method*** is used to expose behaviour of an object.\r\n\r\n2) ***Constructor*** must not have return type.\t***Method*** must have return type.\r\n\r\n3) ***Constructor*** is invoked implicitly.\t***Method*** is invoked explicitly.\r\n\r\n4) ***Getters()***, or accessors, are methods that provide access to an object&#39;s instance variables. ***Setters()***, or mutators, are methods that provide the caller with an opportunity to update the value of a particular instance variable. \r\n\r\nHaving this clear, let&#39;s think in term of Object Oriented Programming (OOP), to meet the requirement of OOP principals (The *Objects Oriented Programming (OOP)* is constructed over *four major principles*: ***Encapsulation***, ***Data Abstraction***, ***Polymorphism*** and ***Inheritance***.), *Getter()* and *Setter()* methods is the key to achieve this.\r\n\r\nHere is a formula that is going to show you what I mean:\r\n\r\n&gt; Private fields + Public accessors == Encapsulation;\r\n\r\nAs you can see based on this formula when we set private fields and use public accesors we are performing encapsulation one of the 4 OOP principals.\r\n\r\nHere I am going to provide you two classes, I added comment on it to try to make my code self explaining. Take these classes as a lab on methods with `Customer` and `TestCustomer` [the one with the `main()` method] classes, you can copy the code and run it yourself. Note I used two constructors in order to explain a class having multiple constructors and having public `setters()` and `getters()` methods in order to access private instance variables:\r\n\r\n    package com.exercise.lecture2;\r\n    \r\n    /**\r\n     * 1) Create a Customer class that has the following attributes:\r\n     * name, SSN.\r\n     * 2) This class should have two methods: getName() and getSSN().\r\n     * 3) If the class is instantiated with only a SSN, then give the default name of &quot;John Doe&quot;. (HINT: Use two constructors)\r\n     * 4) Also, add a method toString(), that returns a string representation of the customer object (name and SSN concatenated).\r\n     * \t\tMake sure to set this method public.\r\n     * 5) Create a class to test your program (e.g. a class that include the main() method). In your test program, instantiate\r\n     * \t\tthree customers and print out the value using toString() method.\r\n     * \r\n     * @author Samuel M.\r\n     *\r\n     */\r\n    \r\n    //this class is complemented with class  TestLabCustomer.java\r\n    public class LabCustomer {\r\n\r\n    // Private filds: name and socialSecurityNum\r\n    \tprivate String name;\r\n    \tprivate int socialSecurityNum;\r\n    \t\r\n    \t// constructors\r\n    \tpublic LabCustomer(String name, int socialSecurityNum) {\r\n    \t\tthis.name = name;\r\n    \t\tthis.socialSecurityNum = socialSecurityNum;\r\n    \t}\r\n    \t\r\n    \t/** The keyword &#39;this&#39; can be used to call a constructor from a constructor,\r\n    \t * when writing several constructor for a class, there are times when\r\n    \t * you&#39;d like to call one constructor from another to avoid duplicate code.\r\n    \t */\r\n    \t// Account with This() on a second constructor\r\n    \tpublic LabCustomer(int socialSecurityNum) {\r\n    \t\tthis(&quot;John Doe&quot;, socialSecurityNum); // default name is printed if only the SSN is provided\r\n    \t}\r\n    \t\r\n    \t// Public accessors (getters and setters)\r\n    \tString getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \t\r\n    \tvoid setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \t\r\n    \tint getSSN() {\r\n    \t\treturn socialSecurityNum;\r\n    \t}\r\n    \t\r\n    \tvoid setSSN(int socialSecurityNum) {\r\n    \t\tthis.socialSecurityNum = socialSecurityNum;\r\n    \t}\r\n    \r\n    \t\r\n    \t// instance method\r\n    \tpublic String toString() { //overriding the toString() method \r\n    \t\treturn (&quot;Customer name: &quot; + getName() + &quot;, SSN#: &quot; + getSSN() ); // concatenating the name and SSN\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nHere is the test class, the one that has the `main()` method and calling an instance method after instantiating an object of the previews class:\r\n\r\n    package com.exercise.lecture2;\r\n    \r\n    //this class is complemented with class  LabCustomer.java\r\n    public class TestLabCustomer {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Instantiating an object of class LabCustomer and creating three customers objects\r\n    \t\tLabCustomer cust1 = new LabCustomer(&quot;Juan Melendez&quot;, 123457789);\r\n    \t\tLabCustomer cust2 = new LabCustomer(&quot;Mary Lee&quot;, 125997536);\r\n    \t\tLabCustomer cust3 = new LabCustomer(124963574); // when instantiating with no &quot;name&quot;, the default (John Doe) is printed \r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Once you&#39;ve instantiated an object and have an object variable,\r\n    \t\t * you can use object variable to call an instance method. \r\n    \t\t * \te.g.:\r\n    \t\t * \tobject variables: cust1, cust2, cust3\r\n    \t\t * \tcall the method toString() using the object variable and dot [.] in order to perform the method call.\r\n    \t\t */\r\n    \t\t// calling method toString() in class LabCustomer to print customer values\r\n    \t\tSystem.out.println(cust1.toString());\r\n    \t\tSystem.out.println(cust2.toString());\r\n    \t\tSystem.out.println(cust3.toString());\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n&gt; *result:*\r\n&gt; \r\n&gt; Customer name: Juan Melendez, SSN#: 123457789\r\n&gt; \r\n&gt; Customer name: Mary Lee, SSN#: 125997536\r\n&gt; \r\n&gt; Customer name: John Doe, SSN#: 124963574\r\n\r\n","title":"Setter methods or constructors","body":"<p>I think you asked a good question: - But when do we use constructors and when do we use setters?</p>\n<p>First, let's start with some concepts. I hope this explanation helps everybody that want to know when to use constructors or setters() and getters() methods (Accessors and Mutators). <strong>Constructors</strong> are similar to <strong>Methods</strong>, however there are few differences between <em><strong>constructor</strong></em> and <em><strong>method</strong></em> in java:</p>\n<ol>\n<li><p>A <em><strong>Constructor</strong></em> is used to initialize the state of an object. A  <em><strong>Method</strong></em> is used to expose behaviour of an object.</p>\n</li>\n<li><p><em><strong>Constructor</strong></em> must not have return type. <em><strong>Method</strong></em> must have return type.</p>\n</li>\n<li><p><em><strong>Constructor</strong></em> is invoked implicitly. <em><strong>Method</strong></em> is invoked explicitly.</p>\n</li>\n<li><p><em><strong>Getters()</strong></em>, or accessors, are methods that provide access to an object's instance variables. <em><strong>Setters()</strong></em>, or mutators, are methods that provide the caller with an opportunity to update the value of a particular instance variable.</p>\n</li>\n</ol>\n<p>Having this clear, let's think in term of Object Oriented Programming (OOP), to meet the requirement of OOP principals (The <em>Objects Oriented Programming (OOP)</em> is constructed over <em>four major principles</em>: <em><strong>Encapsulation</strong></em>, <em><strong>Data Abstraction</strong></em>, <em><strong>Polymorphism</strong></em> and <em><strong>Inheritance</strong></em>.), <em>Getter()</em> and <em>Setter()</em> methods is the key to achieve this.</p>\n<p>Here is a formula that is going to show you what I mean:</p>\n<blockquote>\n<p>Private fields + Public accessors == Encapsulation;</p>\n</blockquote>\n<p>As you can see based on this formula when we set private fields and use public accesors we are performing encapsulation one of the 4 OOP principals.</p>\n<p>Here I am going to provide you two classes, I added comment on it to try to make my code self explaining. Take these classes as a lab on methods with <code>Customer</code> and <code>TestCustomer</code> [the one with the <code>main()</code> method] classes, you can copy the code and run it yourself. Note I used two constructors in order to explain a class having multiple constructors and having public <code>setters()</code> and <code>getters()</code> methods in order to access private instance variables:</p>\n<pre><code>package com.exercise.lecture2;\n\n/**\n * 1) Create a Customer class that has the following attributes:\n * name, SSN.\n * 2) This class should have two methods: getName() and getSSN().\n * 3) If the class is instantiated with only a SSN, then give the default name of &quot;John Doe&quot;. (HINT: Use two constructors)\n * 4) Also, add a method toString(), that returns a string representation of the customer object (name and SSN concatenated).\n *      Make sure to set this method public.\n * 5) Create a class to test your program (e.g. a class that include the main() method). In your test program, instantiate\n *      three customers and print out the value using toString() method.\n * \n * @author Samuel M.\n *\n */\n\n//this class is complemented with class  TestLabCustomer.java\npublic class LabCustomer {\n\n// Private filds: name and socialSecurityNum\n    private String name;\n    private int socialSecurityNum;\n    \n    // constructors\n    public LabCustomer(String name, int socialSecurityNum) {\n        this.name = name;\n        this.socialSecurityNum = socialSecurityNum;\n    }\n    \n    /** The keyword 'this' can be used to call a constructor from a constructor,\n     * when writing several constructor for a class, there are times when\n     * you'd like to call one constructor from another to avoid duplicate code.\n     */\n    // Account with This() on a second constructor\n    public LabCustomer(int socialSecurityNum) {\n        this(&quot;John Doe&quot;, socialSecurityNum); // default name is printed if only the SSN is provided\n    }\n    \n    // Public accessors (getters and setters)\n    String getName() {\n        return name;\n    }\n    \n    void setName(String name) {\n        this.name = name;\n    }\n    \n    int getSSN() {\n        return socialSecurityNum;\n    }\n    \n    void setSSN(int socialSecurityNum) {\n        this.socialSecurityNum = socialSecurityNum;\n    }\n\n    \n    // instance method\n    public String toString() { //overriding the toString() method \n        return (&quot;Customer name: &quot; + getName() + &quot;, SSN#: &quot; + getSSN() ); // concatenating the name and SSN\n        \n    }\n}\n</code></pre>\n<p>Here is the test class, the one that has the <code>main()</code> method and calling an instance method after instantiating an object of the previews class:</p>\n<pre><code>package com.exercise.lecture2;\n\n//this class is complemented with class  LabCustomer.java\npublic class TestLabCustomer {\n\n    public static void main(String[] args) {\n        // Instantiating an object of class LabCustomer and creating three customers objects\n        LabCustomer cust1 = new LabCustomer(&quot;Juan Melendez&quot;, 123457789);\n        LabCustomer cust2 = new LabCustomer(&quot;Mary Lee&quot;, 125997536);\n        LabCustomer cust3 = new LabCustomer(124963574); // when instantiating with no &quot;name&quot;, the default (John Doe) is printed \n        \n        /**\n         * Once you've instantiated an object and have an object variable,\n         * you can use object variable to call an instance method. \n         *  e.g.:\n         *  object variables: cust1, cust2, cust3\n         *  call the method toString() using the object variable and dot [.] in order to perform the method call.\n         */\n        // calling method toString() in class LabCustomer to print customer values\n        System.out.println(cust1.toString());\n        System.out.println(cust2.toString());\n        System.out.println(cust3.toString());\n\n    }\n\n}\n</code></pre>\n<blockquote>\n<p><em>result:</em></p>\n<p>Customer name: Juan Melendez, SSN#: 123457789</p>\n<p>Customer name: Mary Lee, SSN#: 125997536</p>\n<p>Customer name: John Doe, SSN#: 124963574</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1554532375,"creation_date":1517943482,"answer_id":48650056,"question_id":19359548,"body_markdown":"In simple terms:\r\n\r\nUse *constructor* if you think initialization is mandatory before you can use the object.\r\n\r\nUse *setter* method when initialization of variable is non-mandatory to use the object. \r\n\r\nRefer to documentation [page][1] for more details.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html","title":"Setter methods or constructors","body":"<p>In simple terms:</p>\n\n<p>Use <em>constructor</em> if you think initialization is mandatory before you can use the object.</p>\n\n<p>Use <em>setter</em> method when initialization of variable is non-mandatory to use the object. </p>\n\n<p>Refer to documentation <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html\" rel=\"noreferrer\">page</a> for more details.</p>\n"}],"owner":{"account_id":2403042,"reputation":776,"user_id":2100279,"accept_rate":57,"display_name":"ssayyed"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76008,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"accepted_answer_id":19359582,"answer_count":10,"score":60,"last_activity_date":1701354279,"creation_date":1381751270,"question_id":19359548,"body_markdown":"So far I have seen two approaches of setting a variable&#39;s value in Java. Sometimes a constructor with arguments is used, others setter methods are used to set the value of each variable.\r\n\r\nI know that a constructor initializes an instance variable inside a class once a class is instantiated using the `new` keyword.\r\n\r\nBut when do we use constructors and when do we use setters?","title":"Setter methods or constructors","body":"<p>So far I have seen two approaches of setting a variable's value in Java. Sometimes a constructor with arguments is used, others setter methods are used to set the value of each variable.</p>\n<p>I know that a constructor initializes an instance variable inside a class once a class is instantiated using the <code>new</code> keyword.</p>\n<p>But when do we use constructors and when do we use setters?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701354473,"post_id":77579218,"comment_id":136767252,"body_markdown":"You shouldn&#39;t add that annotation. If you add it it will disable auto configuration and i think also start scanning from the package it is defined in, instead of the package of the `@SpringBootApplication`. You shouldn&#39;t need the `@EnableTransactionManagement` either.","body":"You shouldn&#39;t add that annotation. If you add it it will disable auto configuration and i think also start scanning from the package it is defined in, instead of the package of the <code>@SpringBootApplication</code>. You shouldn&#39;t need the <code>@EnableTransactionManagement</code> either."},{"owner":{"account_id":2058273,"reputation":830,"user_id":1835477,"accept_rate":59,"display_name":"DJViking"},"score":0,"creation_date":1701413387,"post_id":77579218,"comment_id":136774927,"body_markdown":"It must be a change then from newer Spring Boot. I used this annotation before with Spring Boot 2.2.4 and it worked then.","body":"It must be a change then from newer Spring Boot. I used this annotation before with Spring Boot 2.2.4 and it worked then."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701434173,"post_id":77579218,"comment_id":136778058,"body_markdown":"Then you were lucky I suspect, as that annotation disables auto-config and could be that some changes in Spring Data have influences this. But as mentioned just remove it (assuming you are following the best practices for structuring your application).","body":"Then you were lucky I suspect, as that annotation disables auto-config and could be that some changes in Spring Data have influences this. But as mentioned just remove it (assuming you are following the best practices for structuring your application)."}],"owner":{"account_id":2058273,"reputation":830,"user_id":1835477,"accept_rate":59,"display_name":"DJViking"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701354194,"creation_date":1701354194,"question_id":77579218,"body_markdown":"After upgrading my project from Spring Boot 2.2.4, to 3.1.6, my Repository JUnit tests failed.\r\n\r\nAfter some investigation, I found out they fail if I have `@EnableJpaRepositories` in my Application Configuration.\r\n\r\nWhen running the tests, it cannot find my Repositories to autowire.\r\n```\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.example.demo.repository.BookRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n```\r\n\r\nIf I remove the `@EnableJpaRepositories` from my RootConfig class, then the tests works.\r\n```\r\n@Configuration\r\n@EnableDiscoveryClient\r\n@EnableCaching\r\n@EnableBatchProcessing\r\n@EnableTransactionManagement\r\n//@EnableJpaRepositories\r\npublic class RootConfig {\r\n}\r\n```\r\n\r\nThe latest commit on this test project can demonstrate this problem.\\\r\nhttps://github.com/DJViking/spring-boot-demo\r\n\r\nIt works if I specify the repository package with @EnableJpaRepositories.\\\r\n```\r\n@EnableJpaRepositories(&quot;com.example.demo.repository&quot;)\r\n```\r\nWhy do I need this? I did not need it in earlier version of Spring Boot.\r\n\r\nIs there something nww with Spring Boot 2.7, 3.0, or 3.1 that I have failed to account for?\\\r\nLooking at the migration guides for Spring Boot, I cannot find anything related to this annotation.\\\r\nhttps://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide\r\nhttps://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.1-Release-Notes","title":"Spring Boot 3.1 Repository in tests does not Autowir when using EnableJpaRepositories","body":"<p>After upgrading my project from Spring Boot 2.2.4, to 3.1.6, my Repository JUnit tests failed.</p>\n<p>After some investigation, I found out they fail if I have <code>@EnableJpaRepositories</code> in my Application Configuration.</p>\n<p>When running the tests, it cannot find my Repositories to autowire.</p>\n<pre><code>Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.demo.repository.BookRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n<p>If I remove the <code>@EnableJpaRepositories</code> from my RootConfig class, then the tests works.</p>\n<pre><code>@Configuration\n@EnableDiscoveryClient\n@EnableCaching\n@EnableBatchProcessing\n@EnableTransactionManagement\n//@EnableJpaRepositories\npublic class RootConfig {\n}\n</code></pre>\n<p>The latest commit on this test project can demonstrate this problem.<br />\n<a href=\"https://github.com/DJViking/spring-boot-demo\" rel=\"nofollow noreferrer\">https://github.com/DJViking/spring-boot-demo</a></p>\n<p>It works if I specify the repository package with @EnableJpaRepositories.\\</p>\n<pre><code>@EnableJpaRepositories(&quot;com.example.demo.repository&quot;)\n</code></pre>\n<p>Why do I need this? I did not need it in earlier version of Spring Boot.</p>\n<p>Is there something nww with Spring Boot 2.7, 3.0, or 3.1 that I have failed to account for?<br />\nLooking at the migration guides for Spring Boot, I cannot find anything related to this annotation.<br />\n<a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide</a>\n<a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.1-Release-Notes\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.1-Release-Notes</a></p>\n"},{"tags":["java","mysql","spring-boot","hibernate","spring-security"],"comments":[{"owner":{"account_id":25295091,"reputation":124,"user_id":19120390,"display_name":"Ajaj Ali"},"score":1,"creation_date":1701171996,"post_id":77563578,"comment_id":136739763,"body_markdown":"please add a log or any trace for the exception or error.","body":"please add a log or any trace for the exception or error."}],"answers":[{"comments":[{"owner":{"account_id":8333120,"reputation":832,"user_id":12868186,"display_name":"wpnpeiris"},"score":1,"creation_date":1701192177,"post_id":77563716,"comment_id":136743883,"body_markdown":"As its currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As its currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77563716/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":26747337,"reputation":13,"user_id":20347223,"display_name":"Ch Vamsi"},"score":0,"creation_date":1701248227,"post_id":77563716,"comment_id":136750853,"body_markdown":"Here I am sending post request which includes two model classes. In this case It&#39;s better to use form data. I have to send attachment within same request.","body":"Here I am sending post request which includes two model classes. In this case It&#39;s better to use form data. I have to send attachment within same request."}],"tags":[],"owner":{"account_id":24144805,"reputation":1,"user_id":18110581,"display_name":"Muhammet Ali Beysulen"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701173032,"creation_date":1701172976,"answer_id":77563716,"question_id":77563578,"body_markdown":"[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X0fVt.png\r\n\r\nWhen sending a request in your postman, you can try to send your data via raw and json model in Body.","title":"Could not commit JPA transaction while working with post request","body":"<p><a href=\"https://i.stack.imgur.com/X0fVt.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>When sending a request in your postman, you can try to send your data via raw and json model in Body.</p>\n"},{"comments":[{"owner":{"account_id":26747337,"reputation":13,"user_id":20347223,"display_name":"Ch Vamsi"},"score":0,"creation_date":1701411349,"post_id":77579126,"comment_id":136774732,"body_markdown":"First I tried to remove @GeneratedValue, it&#39;s not working.. However Now i got some idea to do it. will try different way.. thanks for response","body":"First I tried to remove @GeneratedValue, it&#39;s not working.. However Now i got some idea to do it. will try different way.. thanks for response"}],"tags":[],"owner":{"account_id":12561920,"reputation":408,"user_id":9139357,"display_name":"Eric"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701353809,"creation_date":1701353370,"answer_id":77579126,"question_id":77563578,"body_markdown":"You need to share your JSON data and  `EmployeeService` class to understand the issue better.\r\n\r\nFrom the image you shared, I found out one issue:\r\n\r\nYou give `id` for creating an employee but in the `Employee` model, it is generated by Hibernate automatically in your model by specifying this: `@GeneratedValue`. So it is wrong, you should not add **id** field in your JSON data. That might be the reason for getting the error.\r\n\r\nIf you want to give `id` externally, then you need to remove `@GeneratedValue` annotation in `Employee` class.","title":"Could not commit JPA transaction while working with post request","body":"<p>You need to share your JSON data and  <code>EmployeeService</code> class to understand the issue better.</p>\n<p>From the image you shared, I found out one issue:</p>\n<p>You give <code>id</code> for creating an employee but in the <code>Employee</code> model, it is generated by Hibernate automatically in your model by specifying this: <code>@GeneratedValue</code>. So it is wrong, you should not add <strong>id</strong> field in your JSON data. That might be the reason for getting the error.</p>\n<p>If you want to give <code>id</code> externally, then you need to remove <code>@GeneratedValue</code> annotation in <code>Employee</code> class.</p>\n"}],"owner":{"account_id":26747337,"reputation":13,"user_id":20347223,"display_name":"Ch Vamsi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1701353809,"creation_date":1701171624,"question_id":77563578,"body_markdown":"I&#39;m attempting to send a post request with an image attachment and employee details in json format. For ImageData and Employee, I have distinct tables. I am able to store image data with my code, but not employee data.The error message &quot;Could not commit JPA transaction&quot; is displayed.\r\nHere I am sharing my code details\r\n\r\n```\r\n#Post Request\r\n@PostMapping(&quot;/create&quot;)\r\n    public Employee tempCreateEmployee(\r\n            @RequestParam(&quot;json&quot;) String json,\r\n            @RequestParam(&quot;file&quot;) MultipartFile file\r\n    ) throws CustomException {\r\n        try {\r\n\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            logger.info(&quot;data received as string&quot;);\r\n\r\n            Employee employee = objectMapper.readValue(json, Employee.class);\r\n            logger.info(employee.toString());\r\n\r\n            logger.info(&quot;Received employee data: {}&quot;, employee);\r\n            \r\n            int imageId=fileService.uploadImageFile(file);\r\n            logger.info(&quot;file processing successful&quot;);\r\n            \r\n            employee.setImageid(imageId);\r\n            logger.info(employee.toString());\r\n           \r\n            return employeeService.save(employee);\r\n        } catch (Exception ex) {\r\n           \r\n            throw new CustomException(&quot;Employee object not created&quot;);\r\n        }\r\n    }\r\n```\r\nService method for uploading image\r\n\r\n```\r\npublic int uploadImageFile(MultipartFile file) throws IOException {\r\n        ImageData imageData= filesRepo.save(ImageData.builder()\r\n                .name(file.getOriginalFilename())\r\n                .type(file.getContentType())\r\n                .id(filesRepo.findAll().size()+1)\r\n                .image_filedata(ImageUtils.compressImage(file.getBytes())).build());\r\n        \r\n       \r\n        return imageData.getId();\r\n\r\n    }\r\n```\r\n**Employee Model class:**\r\n\r\n```\r\npackage com.SpringTask.SpringTask.Models;\r\n\r\nimport com.SpringTask.SpringTask.Encryption.Encrypt;\r\nimport com.fasterxml.jackson.annotation.JsonFormat;\r\nimport jakarta.persistence.*;\r\nimport jakarta.validation.constraints.*;\r\nimport jdk.jfr.DataAmount;\r\n\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.Date;\r\n\r\n\r\nimport lombok.*;\r\n\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder\r\n@Setter\r\n@Getter\r\n@Data\r\n@Entity\r\n@Table(name=&quot;tableEmployees&quot;)\r\n\r\npublic class Employee {\r\n    @Id\r\n    @GeneratedValue\r\n    public Integer id;\r\n\r\n\r\n    public String firstName;\r\n\r\n  \r\n    public String lastName;\r\n\r\n    \r\n    public String address;\r\n\r\n    \r\n    public String email;\r\n\r\n\r\n    \r\n    public int phoneNumber;\r\n\r\n  \r\n\r\n    private int imageid;\r\n\r\n   }\r\n```\r\n\r\n\r\n**ImageData model class:**\r\n\r\n\r\n```\r\npackage com.SpringTask.SpringTask.Models;\r\n\r\nimport jakarta.persistence.*;\r\nimport jakarta.persistence.Table;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.*;\r\nimport lombok.NoArgsConstructor;\r\nimport org.hibernate.engine.internal.Cascade;\r\n\r\nimport java.util.Arrays;\r\n\r\n\r\n@Entity\r\n@Table(name = &quot;tableImageData&quot;)\r\n@Builder(toBuilder = true)\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Setter\r\n@Getter\r\n\r\npublic class ImageData {\r\n    @Id\r\n    private int id;\r\n\r\n    private String name;\r\n    private String type;\r\n\r\n    @Lob\r\n    @Column(name = &quot;image_filedata&quot;, columnDefinition = &quot;LONGBLOB&quot;)\r\n    private byte[] image_filedata;\r\n    \r\n}\r\n```\r\n[![enter image description here](https://i.stack.imgur.com/TjCvB.png)](https://i.stack.imgur.com/TjCvB.png)\r\n\r\nI&#39;ve tried debugging , but every time same issue appears. I have verified my database setup and code logic.\r\nCould not commit JPA transaction means?","title":"Could not commit JPA transaction while working with post request","body":"<p>I'm attempting to send a post request with an image attachment and employee details in json format. For ImageData and Employee, I have distinct tables. I am able to store image data with my code, but not employee data.The error message &quot;Could not commit JPA transaction&quot; is displayed.\nHere I am sharing my code details</p>\n<pre><code>#Post Request\n@PostMapping(&quot;/create&quot;)\n    public Employee tempCreateEmployee(\n            @RequestParam(&quot;json&quot;) String json,\n            @RequestParam(&quot;file&quot;) MultipartFile file\n    ) throws CustomException {\n        try {\n\n            ObjectMapper objectMapper = new ObjectMapper();\n            logger.info(&quot;data received as string&quot;);\n\n            Employee employee = objectMapper.readValue(json, Employee.class);\n            logger.info(employee.toString());\n\n            logger.info(&quot;Received employee data: {}&quot;, employee);\n            \n            int imageId=fileService.uploadImageFile(file);\n            logger.info(&quot;file processing successful&quot;);\n            \n            employee.setImageid(imageId);\n            logger.info(employee.toString());\n           \n            return employeeService.save(employee);\n        } catch (Exception ex) {\n           \n            throw new CustomException(&quot;Employee object not created&quot;);\n        }\n    }\n</code></pre>\n<p>Service method for uploading image</p>\n<pre><code>public int uploadImageFile(MultipartFile file) throws IOException {\n        ImageData imageData= filesRepo.save(ImageData.builder()\n                .name(file.getOriginalFilename())\n                .type(file.getContentType())\n                .id(filesRepo.findAll().size()+1)\n                .image_filedata(ImageUtils.compressImage(file.getBytes())).build());\n        \n       \n        return imageData.getId();\n\n    }\n</code></pre>\n<p><strong>Employee Model class:</strong></p>\n<pre><code>package com.SpringTask.SpringTask.Models;\n\nimport com.SpringTask.SpringTask.Encryption.Encrypt;\nimport com.fasterxml.jackson.annotation.JsonFormat;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.*;\nimport jdk.jfr.DataAmount;\n\n\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Date;\n\n\nimport lombok.*;\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Setter\n@Getter\n@Data\n@Entity\n@Table(name=&quot;tableEmployees&quot;)\n\npublic class Employee {\n    @Id\n    @GeneratedValue\n    public Integer id;\n\n\n    public String firstName;\n\n  \n    public String lastName;\n\n    \n    public String address;\n\n    \n    public String email;\n\n\n    \n    public int phoneNumber;\n\n  \n\n    private int imageid;\n\n   }\n</code></pre>\n<p><strong>ImageData model class:</strong></p>\n<pre><code>package com.SpringTask.SpringTask.Models;\n\nimport jakarta.persistence.*;\nimport jakarta.persistence.Table;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.*;\nimport lombok.NoArgsConstructor;\nimport org.hibernate.engine.internal.Cascade;\n\nimport java.util.Arrays;\n\n\n@Entity\n@Table(name = &quot;tableImageData&quot;)\n@Builder(toBuilder = true)\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Setter\n@Getter\n\npublic class ImageData {\n    @Id\n    private int id;\n\n    private String name;\n    private String type;\n\n    @Lob\n    @Column(name = &quot;image_filedata&quot;, columnDefinition = &quot;LONGBLOB&quot;)\n    private byte[] image_filedata;\n    \n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/TjCvB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TjCvB.png\" alt=\"enter image description here\" /></a></p>\n<p>I've tried debugging , but every time same issue appears. I have verified my database setup and code logic.\nCould not commit JPA transaction means?</p>\n"},{"tags":["java","authentication","kerberos","ntlm","httpurlconnection"],"answers":[{"comments":[{"owner":{"account_id":20091,"reputation":61036,"user_id":47633,"accept_rate":61,"display_name":"opensas"},"score":0,"creation_date":1248634464,"post_id":1174149,"comment_id":1007177,"body_markdown":"Hey Matt, thanks a lot for your answer, but I wonder if it&#39;s possible to do this, with the buil-in JRE classes, using kerberos instead of ntlm... I mean, kerberos is not ptopietary stuff like NTLM...","body":"Hey Matt, thanks a lot for your answer, but I wonder if it&#39;s possible to do this, with the buil-in JRE classes, using kerberos instead of ntlm... I mean, kerberos is not ptopietary stuff like NTLM..."},{"owner":{"account_id":5146,"reputation":1823,"user_id":8134,"display_name":"user8134"},"score":0,"creation_date":1265679677,"post_id":1174149,"comment_id":2180932,"body_markdown":"Last I heard, the Apache client does NOT support NTLMv2. And they are reluctant to tap JCIFS because a) they claim it&#39;s LGPLv2 is not compatible with their license and b) they are generally are weary of MS stuff. But it does not matter because if you want to interop with Microsoft, NTLM is the common denominator of authentication mechanisms. Kerberos does not work if the client does not have access to a domain controller or if time sync is off or if DNS isn&#39;t quite right or ... etc.","body":"Last I heard, the Apache client does NOT support NTLMv2. And they are reluctant to tap JCIFS because a) they claim it&#39;s LGPLv2 is not compatible with their license and b) they are generally are weary of MS stuff. But it does not matter because if you want to interop with Microsoft, NTLM is the common denominator of authentication mechanisms. Kerberos does not work if the client does not have access to a domain controller or if time sync is off or if DNS isn&#39;t quite right or ... etc."},{"owner":{"account_id":4177,"reputation":32472,"user_id":6198,"accept_rate":86,"display_name":"Matt Solnit"},"score":0,"creation_date":1265735107,"post_id":1174149,"comment_id":2186077,"body_markdown":"Hi ioplex.  I&#39;m not sure where you heard this, but it is incorrect.  Please check out the docs I linked to.  I have successfully used NTLM with both HttpClient 3.x and with 4.0.","body":"Hi ioplex.  I&#39;m not sure where you heard this, but it is incorrect.  Please check out the docs I linked to.  I have successfully used NTLM with both HttpClient 3.x and with 4.0."},{"owner":{"account_id":72556,"reputation":959,"user_id":209452,"accept_rate":100,"display_name":"Attila Csipak"},"score":0,"creation_date":1502282352,"post_id":1174149,"comment_id":78140770,"body_markdown":"The first link is broken.","body":"The first link is broken."}],"tags":[],"owner":{"account_id":4177,"reputation":32472,"user_id":6198,"accept_rate":86,"display_name":"Matt Solnit"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1265735220,"creation_date":1248379482,"answer_id":1174149,"question_id":1168526,"body_markdown":"According to [this page][1], you _can_ use the built-in JRE classes, with the caveat that earlier versions of Java can only do this on a Windows machine.\r\n\r\nHowever, if you are willing to live with a 3rd-party dependency, IMO [Apache Commons HttpClient 3.x][2] is the way to go.  [Here][3] is the documentation for using authentication, including NTLM.  In general, HttpClient is a much more functional library.\r\n\r\nThe latest version of HttpClient is 4.0, but &lt;del&gt;apparently this version [does not support NTLM][4]&lt;/del&gt; this version [requires a tiny bit of extra work][4].\r\n\r\nHere is what I __think__ the code would look like, although I haven&#39;t tried it:\r\n\r\n    HttpClient httpClient = new HttpClient();\r\n    httpClient.getState().setCredentials(AuthScope.ANY, new NTCredentials(user, password, hostPortionOfURL, domain));\r\n    GetMethod request = new GetMethod(url);\r\n    BufferedReader reader = new InputStreamReader(request.getResponseBodyAsStream());\r\n\r\nGood luck.\r\n\r\n  [1]: http://oaklandsoftware.com/papers/ntlm.html\r\n  [2]: http://hc.apache.org/httpclient-3.x/index.html\r\n  [3]: http://hc.apache.org/httpclient-3.x/authentication.html\r\n  [4]: http://hc.apache.org/httpcomponents-client/ntlm.html","title":"authenticate with ntlm (or kerberos) using java UrlConnection","body":"<p>According to <a href=\"http://oaklandsoftware.com/papers/ntlm.html\" rel=\"nofollow noreferrer\">this page</a>, you <em>can</em> use the built-in JRE classes, with the caveat that earlier versions of Java can only do this on a Windows machine.</p>\n\n<p>However, if you are willing to live with a 3rd-party dependency, IMO <a href=\"http://hc.apache.org/httpclient-3.x/index.html\" rel=\"nofollow noreferrer\">Apache Commons HttpClient 3.x</a> is the way to go.  <a href=\"http://hc.apache.org/httpclient-3.x/authentication.html\" rel=\"nofollow noreferrer\">Here</a> is the documentation for using authentication, including NTLM.  In general, HttpClient is a much more functional library.</p>\n\n<p>The latest version of HttpClient is 4.0, but <del>apparently this version <a href=\"http://hc.apache.org/httpcomponents-client/ntlm.html\" rel=\"nofollow noreferrer\">does not support NTLM</a></del> this version <a href=\"http://hc.apache.org/httpcomponents-client/ntlm.html\" rel=\"nofollow noreferrer\">requires a tiny bit of extra work</a>.</p>\n\n<p>Here is what I <strong>think</strong> the code would look like, although I haven't tried it:</p>\n\n<pre><code>HttpClient httpClient = new HttpClient();\nhttpClient.getState().setCredentials(AuthScope.ANY, new NTCredentials(user, password, hostPortionOfURL, domain));\nGetMethod request = new GetMethod(url);\nBufferedReader reader = new InputStreamReader(request.getResponseBodyAsStream());\n</code></pre>\n\n<p>Good luck.</p>\n"},{"comments":[{"owner":{"account_id":284551,"reputation":1374,"user_id":582727,"accept_rate":81,"display_name":"Daniel"},"score":0,"creation_date":1446718645,"post_id":1679576,"comment_id":54864055,"body_markdown":"actually works w/o any libraries with code conn.setRequestProperty(&quot;Authorization&quot;, &quot;Basic&quot; + &quot; &quot; + token);","body":"actually works w/o any libraries with code conn.setRequestProperty(&quot;Authorization&quot;, &quot;Basic&quot; + &quot; &quot; + token);"},{"owner":{"account_id":1849412,"reputation":2631,"user_id":1676293,"accept_rate":55,"display_name":"Scott Boring"},"score":2,"creation_date":1500244971,"post_id":1679576,"comment_id":77237266,"body_markdown":"This doesn&#39;t answer the question. This solution works for Basic authentication but does not work for Kerbos or NTLM authentication as the question asks.","body":"This doesn&#39;t answer the question. This solution works for Basic authentication but does not work for Kerbos or NTLM authentication as the question asks."}],"tags":[],"owner":{"account_id":69719,"reputation":249,"user_id":202722,"display_name":"Pat Gonzalez"},"comment_count":2,"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1258395836,"creation_date":1257416097,"answer_id":1679576,"question_id":1168526,"body_markdown":"Take a look at the SpnegoHttpURLConnection class in the SPNEGO HTTP Servlet Filter project. This project has some examples as well.\r\n\r\nThis project has a [client library][1] that pretty much does what you are doing in your example.\r\n\r\nTake a look this example from the javadoc...\r\n\r\n     public static void main(final String[] args) throws Exception {\r\n         final String creds = &quot;dfelix:myp@s5&quot;;\r\n         \r\n         final String token = Base64.encode(creds.getBytes());\r\n         \r\n         URL url = new URL(&quot;http://medusa:8080/index.jsp&quot;);\r\n         \r\n         HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n         \r\n         conn.setRequestProperty(Constants.AUTHZ_HEADER\r\n                 , Constants.BASIC_HEADER + &quot; &quot; + token);\r\n                 \r\n         conn.connect();\r\n         \r\n         System.out.println(&quot;Response Code:&quot; + conn.getResponseCode());\r\n     }\r\n\r\n\r\n  [1]: http://spnego.sourceforge.net/api/net/sourceforge/spnego/SpnegoHttpURLConnection.html","title":"authenticate with ntlm (or kerberos) using java UrlConnection","body":"<p>Take a look at the SpnegoHttpURLConnection class in the SPNEGO HTTP Servlet Filter project. This project has some examples as well.</p>\n\n<p>This project has a <a href=\"http://spnego.sourceforge.net/api/net/sourceforge/spnego/SpnegoHttpURLConnection.html\" rel=\"nofollow noreferrer\">client library</a> that pretty much does what you are doing in your example.</p>\n\n<p>Take a look this example from the javadoc...</p>\n\n<pre><code> public static void main(final String[] args) throws Exception {\n     final String creds = \"dfelix:myp@s5\";\n\n     final String token = Base64.encode(creds.getBytes());\n\n     URL url = new URL(\"http://medusa:8080/index.jsp\");\n\n     HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n\n     conn.setRequestProperty(Constants.AUTHZ_HEADER\n             , Constants.BASIC_HEADER + \" \" + token);\n\n     conn.connect();\n\n     System.out.println(\"Response Code:\" + conn.getResponseCode());\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1049344,"reputation":1539,"user_id":1053629,"display_name":"Tires"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1405690692,"creation_date":1344356587,"answer_id":11850163,"question_id":1168526,"body_markdown":"A compatible solution for java.net.URLStreamHandler and java.net.URL is com.intersult.net.http.NtlmHandler:\r\n\r\n\tNtlmHandler handler = new NtlmHandler();\r\n\thandler.setUsername(&quot;domain\\\\username&quot;);\r\n\thandler.setPassword(&quot;password&quot;);\r\n\tURL url = new URL(null, urlString, handler);\r\n\tURLConnection connection = url.openConnection();\r\n\r\nYou also can use java.net.Proxy within url.openConnection(proxy).\r\n\r\nUse Maven-Dependency:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.intersult&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;http&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n","title":"authenticate with ntlm (or kerberos) using java UrlConnection","body":"<p>A compatible solution for java.net.URLStreamHandler and java.net.URL is com.intersult.net.http.NtlmHandler:</p>\n\n<pre><code>NtlmHandler handler = new NtlmHandler();\nhandler.setUsername(\"domain\\\\username\");\nhandler.setPassword(\"password\");\nURL url = new URL(null, urlString, handler);\nURLConnection connection = url.openConnection();\n</code></pre>\n\n<p>You also can use java.net.Proxy within url.openConnection(proxy).</p>\n\n<p>Use Maven-Dependency:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.intersult&lt;/groupId&gt;\n        &lt;artifactId&gt;http&lt;/artifactId&gt;\n        &lt;version&gt;1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":20091,"reputation":61036,"user_id":47633,"accept_rate":61,"display_name":"opensas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19622,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1701352950,"creation_date":1248299838,"question_id":1168526,"body_markdown":"I need to consume a rest web service with java, passing the credentials of a domain user account.\r\n\r\nright now I&#39;m doing it with classic asp\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\nset xmlHttp = server.createObject( &quot;msxml2.serverxmlhttp&quot; )\r\nxmlHttp.open method, url, false, domain &amp; &quot;\\&quot; &amp; user, password\r\nxmlHttp.send body\r\nout = xmlHttp.responseText\r\nset xmlHttp = nothing\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nand with asp.net\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\nHttpWebRequest request = (HttpWebRequest) WebRequest.Create( url );\r\n\r\nrequest.Credentials = new NetworkCredential(user, password, domain);\r\n\r\nrequest.Method = WebRequestMethods.Http.Get\r\n\r\nHttpWebResponse response = (HttpWebResponse) request.GetResponse();\r\n\r\nStreamReader outStream = new StreamReader( response.GetResponseStream(), Encoding.UTF8) ;\r\n\r\noutput = outStream.ReadToEnd();\r\n\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\n\r\nhow can I achieve this with java? Take into account that I&#39;m not using the credentials of the currently logged user, I&#39;m specifing the domain account (I have the password)\r\n\r\nplease tell me it&#39;s as easy as with classic asp and asp.net....\r\n","title":"authenticate with ntlm (or kerberos) using java UrlConnection","body":"<p>I need to consume a rest web service with java, passing the credentials of a domain user account.</p>\n\n<p>right now I'm doing it with classic asp</p>\n\n<pre><code>\nset xmlHttp = server.createObject( \"msxml2.serverxmlhttp\" )\nxmlHttp.open method, url, false, domain & \"\\\" & user, password\nxmlHttp.send body\nout = xmlHttp.responseText\nset xmlHttp = nothing\n</code></pre>\n\n<p>and with asp.net</p>\n\n<pre><code>\n\nHttpWebRequest request = (HttpWebRequest) WebRequest.Create( url );\n\nrequest.Credentials = new NetworkCredential(user, password, domain);\n\nrequest.Method = WebRequestMethods.Http.Get\n\nHttpWebResponse response = (HttpWebResponse) request.GetResponse();\n\nStreamReader outStream = new StreamReader( response.GetResponseStream(), Encoding.UTF8) ;\n\noutput = outStream.ReadToEnd();\n\n</code></pre>\n\n<p>how can I achieve this with java? Take into account that I'm not using the credentials of the currently logged user, I'm specifing the domain account (I have the password)</p>\n\n<p>please tell me it's as easy as with classic asp and asp.net....</p>\n"},{"tags":["java","spring-boot","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":11504665,"reputation":79,"user_id":11662164,"display_name":"spock&#39;s-neurons"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1653981524,"creation_date":1653981524,"answer_id":72443633,"question_id":72389550,"body_markdown":"I solved this problem by changing two things; first, I created a custom  ``saveNewUser() `` but JPA manages that better so I changed that to this.\r\n\r\n`UserService.java`\r\n\r\n```\r\npublic User save(User user) {\r\n\t\tuser.setRoles(new HashSet&lt;Role&gt; (Arrays.asList(new Role(&quot;user&quot;))));\r\n\t\treturn userRepository.save(user);\r\n\t\t\r\n\t}\r\n\r\n```\r\n\r\nI also had to change my endpoint to this\r\n\r\n`controller.java`\r\n\r\n```\r\n@PostMapping(&quot;/register&quot;)\r\n\tpublic String postRegister(User user) {\r\n\t\tBCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();\r\n\t    String encodedPassword = passwordEncoder.encode(user.getPassword());\r\n\t    user.setPassword(encodedPassword);\r\n\t    userService.save(user);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n```","title":"registration form is not submitting in spring boot and not hitting endpoints","body":"<p>I solved this problem by changing two things; first, I created a custom  <code>saveNewUser() </code> but JPA manages that better so I changed that to this.</p>\n<p><code>UserService.java</code></p>\n<pre><code>public User save(User user) {\n        user.setRoles(new HashSet&lt;Role&gt; (Arrays.asList(new Role(&quot;user&quot;))));\n        return userRepository.save(user);\n        \n    }\n\n</code></pre>\n<p>I also had to change my endpoint to this</p>\n<p><code>controller.java</code></p>\n<pre><code>@PostMapping(&quot;/register&quot;)\n    public String postRegister(User user) {\n        BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();\n        String encodedPassword = passwordEncoder.encode(user.getPassword());\n        user.setPassword(encodedPassword);\n        userService.save(user);\n        return &quot;redirect:/&quot;;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27084094,"reputation":1,"user_id":20632859,"display_name":"Ayoub ELHARRAN"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701352564,"creation_date":1701352564,"answer_id":77579029,"question_id":72389550,"body_markdown":"I&#39;ve got the same problem and I solved it but adding this annotation `@Transactional` to the saveUser function.\r\n\r\n    import jakarta.transaction.Transactional;\r\n    @Transactional\r\n    @Override\r\n    public void saveUser(UserDto userDto) {\r\n        User user = new User();\r\n        user.setName(userDto.getFirstName() + &quot; &quot; + userDto.getLastName());\r\n        user.setEmail(userDto.getEmail());\r\n        // encrypt the password using spring security\r\n        user.setPassword(passwordEncoder.encode(userDto.getPassword()));\r\n        \r\n        userRepository.save(user);\r\n    }\r\n\r\nAnd also adding this line to the application.properties:\r\n\r\n    spring.datasource.hikari.auto-commit=true","title":"registration form is not submitting in spring boot and not hitting endpoints","body":"<p>I've got the same problem and I solved it but adding this annotation <code>@Transactional</code> to the saveUser function.</p>\n<pre><code>import jakarta.transaction.Transactional;\n@Transactional\n@Override\npublic void saveUser(UserDto userDto) {\n    User user = new User();\n    user.setName(userDto.getFirstName() + &quot; &quot; + userDto.getLastName());\n    user.setEmail(userDto.getEmail());\n    // encrypt the password using spring security\n    user.setPassword(passwordEncoder.encode(userDto.getPassword()));\n    \n    userRepository.save(user);\n}\n</code></pre>\n<p>And also adding this line to the application.properties:</p>\n<pre><code>spring.datasource.hikari.auto-commit=true\n</code></pre>\n"}],"owner":{"account_id":11504665,"reputation":79,"user_id":11662164,"display_name":"spock&#39;s-neurons"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72443633,"answer_count":2,"score":1,"last_activity_date":1701352564,"creation_date":1653556894,"question_id":72389550,"body_markdown":"I&#39;m working on a registration form in `Spring Boot` and thymeleaf but it&#39;s not submitting to the database. I even run the debugger mood and it did not hit the endpoints for the registration. Note, that my login and other functionalities work fine. I&#39;m following this [here][1] to create my registration\r\n\r\n**How to I get this endpoint to create a new user?**\r\n\r\n`register.html`\r\n\r\n```html\r\n  &lt;form th:action=&quot;@{/registration}&quot; th:object=&quot;${user}&quot; method=&quot;post&quot;&gt;\r\n\r\n     &lt;p class=&quot;error-message&quot; th:if=&quot;${#fields.hasGlobalErrors()}&quot;\r\n      th:each=&quot;error : ${#fields.errors(&#39;global&#39;)}&quot; th:text=&quot;${error}&quot;&gt;Validation\r\n      error&lt;/p&gt;\r\n\r\n     &lt;div class=&quot;form-group&quot;\r\n      th:classappend=&quot;${#fields.hasErrors(&#39;firstName&#39;)}? &#39;has-error&#39;:&#39;&#39;&quot;&gt;\r\n      &lt;label for=&quot;firstName&quot; class=&quot;control-label&quot;&gt;First name&lt;/label&gt; &lt;input\r\n       id=&quot;firstName&quot; class=&quot;form-control&quot; th:field=&quot;*{firstName}&quot; /&gt;\r\n      &lt;p class=&quot;error-message&quot;\r\n       th:each=&quot;error: ${#fields.errors(&#39;firstName&#39;)}&quot;\r\n       th:text=&quot;${error}&quot;&gt;Validation error&lt;/p&gt;\r\n     &lt;/div&gt;\r\n     &lt;div class=&quot;form-group&quot;\r\n      th:classappend=&quot;${#fields.hasErrors(&#39;lastName&#39;)}? &#39;has-error&#39;:&#39;&#39;&quot;&gt;\r\n      &lt;label for=&quot;lastName&quot; class=&quot;control-label&quot;&gt;Last name&lt;/label&gt; &lt;input\r\n       id=&quot;lastName&quot; class=&quot;form-control&quot; th:field=&quot;*{lastName}&quot; /&gt;\r\n      &lt;p class=&quot;error-message&quot;\r\n       th:each=&quot;error : ${#fields.errors(&#39;lastName&#39;)}&quot;\r\n       th:text=&quot;${error}&quot;&gt;Validation error&lt;/p&gt;\r\n     &lt;/div&gt;\r\n     &lt;div class=&quot;form-group&quot;\r\n      th:classappend=&quot;${#fields.hasErrors(&#39;email&#39;)}? &#39;has-error&#39;:&#39;&#39;&quot;&gt;\r\n      &lt;label for=&quot;email&quot; class=&quot;control-label&quot;&gt;E-mail&lt;/label&gt; &lt;input\r\n       id=&quot;email&quot; class=&quot;form-control&quot; th:field=&quot;*{email}&quot; /&gt;\r\n      &lt;p class=&quot;error-message&quot;\r\n       th:each=&quot;error : ${#fields.errors(&#39;email&#39;)}&quot; th:text=&quot;${error}&quot;&gt;Validation\r\n       error&lt;/p&gt;\r\n     &lt;/div&gt;\r\n     &lt;div class=&quot;form-group&quot;\r\n      th:classappend=&quot;${#fields.hasErrors(&#39;username&#39;)}? &#39;has-error&#39;:&#39;&#39;&quot;&gt;\r\n      &lt;label for=&quot;email&quot; class=&quot;control-label&quot;&gt;Username&lt;/label&gt; &lt;input\r\n       id=&quot;email&quot; class=&quot;form-control&quot; th:field=&quot;*{username}&quot; /&gt;\r\n      &lt;p class=&quot;error-message&quot;\r\n       th:each=&quot;error : ${#fields.errors(&#39;username&#39;)}&quot; th:text=&quot;${error}&quot;&gt;Validation\r\n       error&lt;/p&gt;\r\n     &lt;/div&gt;\r\n     &lt;div class=&quot;form-group&quot;\r\n      th:classappend=&quot;${#fields.hasErrors(&#39;password&#39;)}? &#39;has-error&#39;:&#39;&#39;&quot;&gt;\r\n      &lt;label for=&quot;password&quot; class=&quot;control-label&quot;&gt;Password&lt;/label&gt; &lt;input\r\n       id=&quot;password&quot; class=&quot;form-control&quot; type=&quot;password&quot;\r\n       th:field=&quot;*{password}&quot; /&gt;\r\n      &lt;p class=&quot;error-message&quot;\r\n       th:each=&quot;error : ${#fields.errors(&#39;password&#39;)}&quot;\r\n       th:text=&quot;${error}&quot;&gt;Validation error&lt;/p&gt;\r\n     &lt;/div&gt;\r\n        &lt;!-- \r\n     \r\n      &lt;div class=&quot;form-group&quot;&gt;\r\n      &lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Register&lt;/button&gt;\r\n      &lt;span&gt;Already registered? &lt;a href=&quot;/&quot; th:href=&quot;@{/login}&quot;&gt;Login\r\n        here&lt;/a&gt;&lt;/span&gt;\r\n     &lt;/div&gt;\r\n      --&gt;\r\n     &lt;div class=&quot;form-group&quot;&gt;\r\n      &lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Register&lt;/button&gt;\r\n     \r\n     &lt;/div&gt;\r\n\r\n    &lt;/form&gt;\r\n```\r\n\r\n`controller.java`\r\n\r\n```java\r\n@Controller\r\npublic class RegisterationController {\r\n\t\r\n\t@Autowired\r\n    private UserService userService;\r\n\t\r\n\t@GetMapping(&quot;/register&quot;)\r\n\tpublic String getRegisterPage(ModelMap model) {\r\n\t\tUser user = new User();\r\n\t\tmodel.put(&quot;user&quot;, user);\r\n\t\treturn &quot;register&quot;;\r\n\t}\r\n\t\r\n\t@PostMapping(&quot;/registration&quot;)\r\n\tpublic String postRegister(@RequestBody User user,  BindingResult result) {\r\n\t\tUser existingUser = userService.findByEmail(user.getEmail());\r\n\t\tif(existingUser != null) {\r\n\t\t\tresult.rejectValue(&quot;email&quot;, null, &quot;this email is already used&quot;);\r\n\t\t}\r\n\t\tif (result.hasErrors()) {\r\n\t            return &quot;register&quot;;\r\n\t        }\r\n\t\t\r\n\t\tuserService.saveNewUser(existingUser);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n`UserService.java`\r\n\r\n```java\r\n\tpublic void saveNewUser(User user) {\r\n\t\tUser nuser = new User();\r\n\t\tnuser.setUsername(user.getUsername());\r\n\t\tnuser.setEmail(user.getEmail());\r\n\t\tnuser.setPassword(user.getPassword());\r\n\t\tnuser.setFirstName(user.getFirstName());\r\n\t\tnuser.setLastName(user.getLastName());\r\n\t\t// TODO: is this how you set the role of the user? \r\n\t\tnuser.setRoles((Set&lt;Role&gt;) Arrays.asList(new Role(&quot;user&quot;)));\r\n\t\tuserRepository.save(nuser);\r\n\t\t\r\n\t\t\r\n\t}\r\n```\r\n\r\n\r\n  [1]: https://www.javaguides.net/2018/10/user-registration-module-using-springboot-springmvc-springsecurity-hibernate5-thymeleaf-mysql.html","title":"registration form is not submitting in spring boot and not hitting endpoints","body":"<p>I'm working on a registration form in <code>Spring Boot</code> and thymeleaf but it's not submitting to the database. I even run the debugger mood and it did not hit the endpoints for the registration. Note, that my login and other functionalities work fine. I'm following this <a href=\"https://www.javaguides.net/2018/10/user-registration-module-using-springboot-springmvc-springsecurity-hibernate5-thymeleaf-mysql.html\" rel=\"nofollow noreferrer\">here</a> to create my registration</p>\n<p><strong>How to I get this endpoint to create a new user?</strong></p>\n<p><code>register.html</code></p>\n<pre class=\"lang-html prettyprint-override\"><code>  &lt;form th:action=&quot;@{/registration}&quot; th:object=&quot;${user}&quot; method=&quot;post&quot;&gt;\n\n     &lt;p class=&quot;error-message&quot; th:if=&quot;${#fields.hasGlobalErrors()}&quot;\n      th:each=&quot;error : ${#fields.errors('global')}&quot; th:text=&quot;${error}&quot;&gt;Validation\n      error&lt;/p&gt;\n\n     &lt;div class=&quot;form-group&quot;\n      th:classappend=&quot;${#fields.hasErrors('firstName')}? 'has-error':''&quot;&gt;\n      &lt;label for=&quot;firstName&quot; class=&quot;control-label&quot;&gt;First name&lt;/label&gt; &lt;input\n       id=&quot;firstName&quot; class=&quot;form-control&quot; th:field=&quot;*{firstName}&quot; /&gt;\n      &lt;p class=&quot;error-message&quot;\n       th:each=&quot;error: ${#fields.errors('firstName')}&quot;\n       th:text=&quot;${error}&quot;&gt;Validation error&lt;/p&gt;\n     &lt;/div&gt;\n     &lt;div class=&quot;form-group&quot;\n      th:classappend=&quot;${#fields.hasErrors('lastName')}? 'has-error':''&quot;&gt;\n      &lt;label for=&quot;lastName&quot; class=&quot;control-label&quot;&gt;Last name&lt;/label&gt; &lt;input\n       id=&quot;lastName&quot; class=&quot;form-control&quot; th:field=&quot;*{lastName}&quot; /&gt;\n      &lt;p class=&quot;error-message&quot;\n       th:each=&quot;error : ${#fields.errors('lastName')}&quot;\n       th:text=&quot;${error}&quot;&gt;Validation error&lt;/p&gt;\n     &lt;/div&gt;\n     &lt;div class=&quot;form-group&quot;\n      th:classappend=&quot;${#fields.hasErrors('email')}? 'has-error':''&quot;&gt;\n      &lt;label for=&quot;email&quot; class=&quot;control-label&quot;&gt;E-mail&lt;/label&gt; &lt;input\n       id=&quot;email&quot; class=&quot;form-control&quot; th:field=&quot;*{email}&quot; /&gt;\n      &lt;p class=&quot;error-message&quot;\n       th:each=&quot;error : ${#fields.errors('email')}&quot; th:text=&quot;${error}&quot;&gt;Validation\n       error&lt;/p&gt;\n     &lt;/div&gt;\n     &lt;div class=&quot;form-group&quot;\n      th:classappend=&quot;${#fields.hasErrors('username')}? 'has-error':''&quot;&gt;\n      &lt;label for=&quot;email&quot; class=&quot;control-label&quot;&gt;Username&lt;/label&gt; &lt;input\n       id=&quot;email&quot; class=&quot;form-control&quot; th:field=&quot;*{username}&quot; /&gt;\n      &lt;p class=&quot;error-message&quot;\n       th:each=&quot;error : ${#fields.errors('username')}&quot; th:text=&quot;${error}&quot;&gt;Validation\n       error&lt;/p&gt;\n     &lt;/div&gt;\n     &lt;div class=&quot;form-group&quot;\n      th:classappend=&quot;${#fields.hasErrors('password')}? 'has-error':''&quot;&gt;\n      &lt;label for=&quot;password&quot; class=&quot;control-label&quot;&gt;Password&lt;/label&gt; &lt;input\n       id=&quot;password&quot; class=&quot;form-control&quot; type=&quot;password&quot;\n       th:field=&quot;*{password}&quot; /&gt;\n      &lt;p class=&quot;error-message&quot;\n       th:each=&quot;error : ${#fields.errors('password')}&quot;\n       th:text=&quot;${error}&quot;&gt;Validation error&lt;/p&gt;\n     &lt;/div&gt;\n        &lt;!-- \n     \n      &lt;div class=&quot;form-group&quot;&gt;\n      &lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Register&lt;/button&gt;\n      &lt;span&gt;Already registered? &lt;a href=&quot;/&quot; th:href=&quot;@{/login}&quot;&gt;Login\n        here&lt;/a&gt;&lt;/span&gt;\n     &lt;/div&gt;\n      --&gt;\n     &lt;div class=&quot;form-group&quot;&gt;\n      &lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Register&lt;/button&gt;\n     \n     &lt;/div&gt;\n\n    &lt;/form&gt;\n</code></pre>\n<p><code>controller.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\npublic class RegisterationController {\n    \n    @Autowired\n    private UserService userService;\n    \n    @GetMapping(&quot;/register&quot;)\n    public String getRegisterPage(ModelMap model) {\n        User user = new User();\n        model.put(&quot;user&quot;, user);\n        return &quot;register&quot;;\n    }\n    \n    @PostMapping(&quot;/registration&quot;)\n    public String postRegister(@RequestBody User user,  BindingResult result) {\n        User existingUser = userService.findByEmail(user.getEmail());\n        if(existingUser != null) {\n            result.rejectValue(&quot;email&quot;, null, &quot;this email is already used&quot;);\n        }\n        if (result.hasErrors()) {\n                return &quot;register&quot;;\n            }\n        \n        userService.saveNewUser(existingUser);\n        return &quot;redirect:/&quot;;\n    }\n}\n\n</code></pre>\n<p><code>UserService.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void saveNewUser(User user) {\n        User nuser = new User();\n        nuser.setUsername(user.getUsername());\n        nuser.setEmail(user.getEmail());\n        nuser.setPassword(user.getPassword());\n        nuser.setFirstName(user.getFirstName());\n        nuser.setLastName(user.getLastName());\n        // TODO: is this how you set the role of the user? \n        nuser.setRoles((Set&lt;Role&gt;) Arrays.asList(new Role(&quot;user&quot;)));\n        userRepository.save(nuser);\n        \n        \n    }\n</code></pre>\n"},{"tags":["java","spring-boot","prometheus","micrometer"],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680143606,"creation_date":1680143606,"answer_id":75883659,"question_id":75833922,"body_markdown":"&gt;Is there a way to add a List&lt;Order&gt; into the MeterRegistry (micrometer) ?\r\n\r\n`MeterRegistry` stores `Meter`, not orders, I&#39;m not sure what you are trying to do but I&#39;m afraid you are trying to misuse Micrometer/Prometheus.\r\n\r\nEspecially because the orderID, it seems like a high cardinality tag which will either cause issues in your JVM or in Prometheus (or both).\r\n\r\nHere&#39;s why: https://develotters.com/posts/high-cardinality/","title":"MIcrometer - add list of objects to registry without count","body":"<blockquote>\n<p>Is there a way to add a List into the MeterRegistry (micrometer) ?</p>\n</blockquote>\n<p><code>MeterRegistry</code> stores <code>Meter</code>, not orders, I'm not sure what you are trying to do but I'm afraid you are trying to misuse Micrometer/Prometheus.</p>\n<p>Especially because the orderID, it seems like a high cardinality tag which will either cause issues in your JVM or in Prometheus (or both).</p>\n<p>Here's why: <a href=\"https://develotters.com/posts/high-cardinality/\" rel=\"nofollow noreferrer\">https://develotters.com/posts/high-cardinality/</a></p>\n"},{"tags":[],"owner":{"account_id":27974006,"reputation":10316,"user_id":21363224,"display_name":"markalex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681320776,"creation_date":1681320776,"answer_id":75998336,"question_id":75833922,"body_markdown":"Skip whole &quot;exposing this data through my app&quot; and misusing Prometheus. And just add your database to Grafana as data source.\r\n\r\nThis way you&#39;ll have chance to query data straight from database into your panels.\r\n\r\nDocumentation on data sources [here][1].\r\n\r\n\r\n  [1]: https://grafana.com/docs/grafana/latest/datasources/#built-in-core-data-sources","title":"MIcrometer - add list of objects to registry without count","body":"<p>Skip whole &quot;exposing this data through my app&quot; and misusing Prometheus. And just add your database to Grafana as data source.</p>\n<p>This way you'll have chance to query data straight from database into your panels.</p>\n<p>Documentation on data sources <a href=\"https://grafana.com/docs/grafana/latest/datasources/#built-in-core-data-sources\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":10912623,"reputation":23,"user_id":9956200,"display_name":"MoonPie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701352359,"creation_date":1701352059,"answer_id":77578972,"question_id":75833922,"body_markdown":"You can use a custom Metrics class for this \r\n```import io.micrometer.core.instrument.Counter;\r\nimport io.micrometer.core.instrument.MeterRegistry;\r\nimport io.micrometer.core.instrument.Tags;\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class OrderMetrics {\r\n  private final MeterRegistry meterRegistry;\r\n\r\n  @Autowired\r\n  public OrderMetrics(MeterRegistry meterRegistry) {\r\n    this.meterRegistry = meterRegistry;\r\n  }\r\n\r\n  public void recordOrders(List&lt;Order&gt; orders) {\r\n    for (Order order : orders) {\r\n      Tags tags = Tags.of(\r\n                  &quot;id&quot; ,order.getId(),\r\n                  &quot;country&quot;,order.getCountry().toString(),\r\n                  &quot;status&quot;,order.getStatus().toString());\r\n      Counter.builder(&quot;my_orders&quot;)\r\n          .tags(tags)\r\n          .description(&quot;My Orders&quot;)\r\n          .register(meterRegistry)\r\n          .increment();\r\n    }\r\n  }\r\n}\r\n```\r\nCall the &quot;recordOrders&quot; method by autowiring the OrderMetrics class.","title":"MIcrometer - add list of objects to registry without count","body":"<p>You can use a custom Metrics class for this</p>\n<pre><code>import io.micrometer.core.instrument.MeterRegistry;\nimport io.micrometer.core.instrument.Tags;\n@Component\n@RequiredArgsConstructor\npublic class OrderMetrics {\n  private final MeterRegistry meterRegistry;\n\n  @Autowired\n  public OrderMetrics(MeterRegistry meterRegistry) {\n    this.meterRegistry = meterRegistry;\n  }\n\n  public void recordOrders(List&lt;Order&gt; orders) {\n    for (Order order : orders) {\n      Tags tags = Tags.of(\n                  &quot;id&quot; ,order.getId(),\n                  &quot;country&quot;,order.getCountry().toString(),\n                  &quot;status&quot;,order.getStatus().toString());\n      Counter.builder(&quot;my_orders&quot;)\n          .tags(tags)\n          .description(&quot;My Orders&quot;)\n          .register(meterRegistry)\n          .increment();\n    }\n  }\n}\n</code></pre>\n<p>Call the &quot;recordOrders&quot; method by autowiring the OrderMetrics class.</p>\n"}],"owner":{"account_id":13104635,"reputation":186,"user_id":9467865,"display_name":"Dariusz Urbanek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1701352359,"creation_date":1679662468,"question_id":75833922,"body_markdown":"I am writing a spring-boot app with a scheduled cron job going through DB to fetch specific `Orders`. \r\nThis data should be displayed in a table in Grafana - with data coming from Prometheus.\r\n\r\nIs there a way to add a `List&lt;Order&gt;` into the `MeterRegistry` (micrometer) ?\r\n\r\n    class Order {\r\n       String id;\r\n       Country country;\r\n       Status status;\r\n    }\r\n\r\nI think in Prometheus it should like smth like this:\r\n\r\n    my_orders{app=&quot;my-api&quot;, id=&quot;my_id_1&quot;, country=&quot;DK&quot;, status=&quot;ACTIVE&quot;}\r\n    my_orders{app=&quot;my-api&quot;, id=&quot;my_id_2&quot;, country=&quot;DK&quot;, status=&quot;ACTIVE&quot;}\r\n    my_orders{app=&quot;my-api&quot;, id=&quot;my_id_3&quot;, country=&quot;DK&quot;, status=&quot;ACTIVE&quot;}\r\n\r\nI don&#39;t need a counter cause every single entry is unique.\r\n\r\nIs something like this possible?","title":"MIcrometer - add list of objects to registry without count","body":"<p>I am writing a spring-boot app with a scheduled cron job going through DB to fetch specific <code>Orders</code>.\nThis data should be displayed in a table in Grafana - with data coming from Prometheus.</p>\n<p>Is there a way to add a <code>List&lt;Order&gt;</code> into the <code>MeterRegistry</code> (micrometer) ?</p>\n<pre><code>class Order {\n   String id;\n   Country country;\n   Status status;\n}\n</code></pre>\n<p>I think in Prometheus it should like smth like this:</p>\n<pre><code>my_orders{app=&quot;my-api&quot;, id=&quot;my_id_1&quot;, country=&quot;DK&quot;, status=&quot;ACTIVE&quot;}\nmy_orders{app=&quot;my-api&quot;, id=&quot;my_id_2&quot;, country=&quot;DK&quot;, status=&quot;ACTIVE&quot;}\nmy_orders{app=&quot;my-api&quot;, id=&quot;my_id_3&quot;, country=&quot;DK&quot;, status=&quot;ACTIVE&quot;}\n</code></pre>\n<p>I don't need a counter cause every single entry is unique.</p>\n<p>Is something like this possible?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1701281617,"post_id":77573545,"comment_id":136757472,"body_markdown":"You probably need a template engine such as Thymeleaf.  The return string is the name of the template.","body":"You probably need a template engine such as Thymeleaf.  The return string is the name of the template."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1701292765,"post_id":77573545,"comment_id":136759231,"body_markdown":"you need to use `@RestController` if you want endpoints","body":"you need to use <code>@RestController</code> if you want endpoints"}],"answers":[{"tags":[],"owner":{"account_id":17923088,"reputation":72,"user_id":13022364,"display_name":"Viranga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701281772,"creation_date":1701281772,"answer_id":77573607,"question_id":77573545,"body_markdown":"The issue you&#39;re facing is likely due to the fact that when you use `@Controller` and return a `String`, Spring expects that to be the name of a view, not the actual response. Since you are returning &quot;This is open&quot; as a String, Spring is trying to find a view with that name, and it&#39;s resulting in a 404 because there&#39;s no corresponding view.\r\n\r\nIf you want to return a plain text response, you can use `@RestController` instead of `@Controller`. `@RestController` is a convenience annotation that combines @Controller and `@ResponseBody`, meaning that the return value of methods will be directly written to the response body as JSON or XML.\r\n\r\nHere&#39;s how you can modify your `MainController` class:\r\n\r\n```\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class MainController {\r\n    \r\n    @GetMapping(&quot;/open&quot;)\r\n    public String open() {\r\n        return &quot;This is open&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/user&quot;)\r\n    public String user() {\r\n        return &quot;This is for user&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/admin&quot;)\r\n    public String admin() {\r\n        return &quot;This is for admin&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/none&quot;)\r\n    public String none() {\r\n        return &quot;This is for none&quot;;\r\n    }\r\n}\r\n```\r\n\r\nWith these changes, when you use `@RestController`, hitting the URLs `/open`, `/user`, `/admin`, and `/none` will return the plain text responses directly. If you need to return views (HTML pages), then you would typically use `@Controller` and return the name of the view as a String, but in your case, it seems like you want plain text responses.","title":"Spring boot application throwing 404 error","body":"<p>The issue you're facing is likely due to the fact that when you use <code>@Controller</code> and return a <code>String</code>, Spring expects that to be the name of a view, not the actual response. Since you are returning &quot;This is open&quot; as a String, Spring is trying to find a view with that name, and it's resulting in a 404 because there's no corresponding view.</p>\n<p>If you want to return a plain text response, you can use <code>@RestController</code> instead of <code>@Controller</code>. <code>@RestController</code> is a convenience annotation that combines @Controller and <code>@ResponseBody</code>, meaning that the return value of methods will be directly written to the response body as JSON or XML.</p>\n<p>Here's how you can modify your <code>MainController</code> class:</p>\n<pre><code>import org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class MainController {\n    \n    @GetMapping(&quot;/open&quot;)\n    public String open() {\n        return &quot;This is open&quot;;\n    }\n\n    @GetMapping(&quot;/user&quot;)\n    public String user() {\n        return &quot;This is for user&quot;;\n    }\n\n    @GetMapping(&quot;/admin&quot;)\n    public String admin() {\n        return &quot;This is for admin&quot;;\n    }\n\n    @GetMapping(&quot;/none&quot;)\n    public String none() {\n        return &quot;This is for none&quot;;\n    }\n}\n</code></pre>\n<p>With these changes, when you use <code>@RestController</code>, hitting the URLs <code>/open</code>, <code>/user</code>, <code>/admin</code>, and <code>/none</code> will return the plain text responses directly. If you need to return views (HTML pages), then you would typically use <code>@Controller</code> and return the name of the view as a String, but in your case, it seems like you want plain text responses.</p>\n"},{"tags":[],"owner":{"account_id":25974568,"reputation":56,"user_id":19689190,"display_name":"Amar kumar Nayak"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701352165,"creation_date":1701291899,"answer_id":77574491,"question_id":77573545,"body_markdown":" The issue in your code is that you are returning plain strings from your controller methods: Spring takes its logical view name to return and tries to find the HTML page or JSP page; that is the reason why you got a 404 error .\r\n\r\nIn Spring Boot, if you are using @Controller, then you can also use @ResponseBody  it works fine.\r\n\r\nOtherwise, replace @Controller with @RestController.\r\n\r\n\r\n    @RestController\r\n    public class MainController {\r\n        @RequestMapping(&quot;/open&quot;)\r\n        public String open(){\r\n            return &quot;open&quot;; // Return the view name &quot;open&quot;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/user&quot;)\r\n        public String user(){\r\n            return &quot;user&quot;; // Return the view name &quot;user&quot;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/admin&quot;)\r\n        public String admin(){\r\n            return &quot;admin&quot;; // Return the view name &quot;admin&quot;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/none&quot;)\r\n        public String none(){\r\n            return &quot;none&quot;; // Return the view name &quot;none&quot;\r\n        }\r\n    }\r\n\r\n","title":"Spring boot application throwing 404 error","body":"<p>The issue in your code is that you are returning plain strings from your controller methods: Spring takes its logical view name to return and tries to find the HTML page or JSP page; that is the reason why you got a 404 error .</p>\n<p>In Spring Boot, if you are using @Controller, then you can also use @ResponseBody  it works fine.</p>\n<p>Otherwise, replace @Controller with @RestController.</p>\n<pre><code>@RestController\npublic class MainController {\n    @RequestMapping(&quot;/open&quot;)\n    public String open(){\n        return &quot;open&quot;; // Return the view name &quot;open&quot;\n    }\n\n    @RequestMapping(&quot;/user&quot;)\n    public String user(){\n        return &quot;user&quot;; // Return the view name &quot;user&quot;\n    }\n\n    @RequestMapping(&quot;/admin&quot;)\n    public String admin(){\n        return &quot;admin&quot;; // Return the view name &quot;admin&quot;\n    }\n\n    @RequestMapping(&quot;/none&quot;)\n    public String none(){\n        return &quot;none&quot;; // Return the view name &quot;none&quot;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":30024912,"reputation":1,"user_id":23009397,"display_name":"priyatham reddy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1701352165,"creation_date":1701281035,"question_id":77573545,"body_markdown":"I am trying to build a basic spring boot application of  spring security and when I start the application and hit the URL it throws 404 not found error.\r\n\r\nHere is the code\r\n\r\nSpringsecurity1Application.java\r\n---------------------------------------------\r\n\r\n\r\n```\r\npackage com.kpr.springsecurity1;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class SpringSecurity1Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(SpringSecurity1Application.class, args);\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nMainController.java\r\n-----------------------------\r\n\r\n```\r\npackage com.kpr.springsecurity1.controller;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n@Controller\r\npublic class MainController {\r\n    @RequestMapping(&quot;/open&quot;)\r\n    public String open(){\r\n        return &quot;This is open&quot;;\r\n    }\r\n    @RequestMapping(&quot;/user&quot;)\r\n    public String user(){\r\n        return &quot;This is open&quot;;\r\n    }\r\n    @RequestMapping(&quot;/admin&quot;)\r\n    public String admin(){\r\n        return &quot;This is open&quot;;\r\n    }\r\n    @RequestMapping(&quot;/none&quot;)\r\n    public String none(){\r\n        return &quot;This is open&quot;;\r\n    }\r\n}\r\n\r\n```\r\n\r\npom.xml\r\n-------\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.kpr&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-security1&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;spring-security1&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI Tried with @RestController instead of @controller it worked but with @Controller it did not work\r\n\r\nHere is directory structure\r\n\r\n[directory Structure](https://i.stack.imgur.com/H81ol.png)\r\n\r\n\r\nThis is the error\r\n[Eror](https://i.stack.imgur.com/fpBSo.png)\r\n\r\n","title":"Spring boot application throwing 404 error","body":"<p>I am trying to build a basic spring boot application of  spring security and when I start the application and hit the URL it throws 404 not found error.</p>\n<p>Here is the code</p>\n<h2>Springsecurity1Application.java</h2>\n<pre><code>package com.kpr.springsecurity1;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class SpringSecurity1Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringSecurity1Application.class, args);\n    }\n\n}\n\n</code></pre>\n<h2>MainController.java</h2>\n<pre><code>package com.kpr.springsecurity1.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class MainController {\n    @RequestMapping(&quot;/open&quot;)\n    public String open(){\n        return &quot;This is open&quot;;\n    }\n    @RequestMapping(&quot;/user&quot;)\n    public String user(){\n        return &quot;This is open&quot;;\n    }\n    @RequestMapping(&quot;/admin&quot;)\n    public String admin(){\n        return &quot;This is open&quot;;\n    }\n    @RequestMapping(&quot;/none&quot;)\n    public String none(){\n        return &quot;This is open&quot;;\n    }\n}\n\n</code></pre>\n<h2>pom.xml</h2>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.kpr&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security1&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-security1&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>I Tried with @RestController instead of @controller it worked but with @Controller it did not work</p>\n<p>Here is directory structure</p>\n<p><a href=\"https://i.stack.imgur.com/H81ol.png\" rel=\"nofollow noreferrer\">directory Structure</a></p>\n<p>This is the error\n<a href=\"https://i.stack.imgur.com/fpBSo.png\" rel=\"nofollow noreferrer\">Eror</a></p>\n"},{"tags":["java","database","null","char"],"comments":[{"owner":{"account_id":6342341,"reputation":5609,"user_id":4923889,"accept_rate":47,"display_name":"Uma Kanth"},"score":0,"creation_date":1434100932,"post_id":30799554,"comment_id":49647749,"body_markdown":"you could check if the length is greater than `0` instead","body":"you could check if the length is greater than <code>0</code> instead"},{"owner":{"account_id":1857245,"reputation":9188,"user_id":1682559,"accept_rate":80,"display_name":"Kevin Cruijssen"},"score":6,"creation_date":1434101022,"post_id":30799554,"comment_id":49647800,"body_markdown":"Is `getSomeCharValue()` returning a `char` or `Character`? `char` can&#39;t be `null`. `Character`, it&#39;s boxed object, can. Also, the default for `char` is `\\u0000`.","body":"Is <code>getSomeCharValue()</code> returning a <code>char</code> or <code>Character</code>? <code>char</code> can&#39;t be <code>null</code>. <code>Character</code>, it&#39;s boxed object, can. Also, the default for <code>char</code> is <code>\\u0000</code>."},{"owner":{"account_id":5284131,"reputation":291,"user_id":4218622,"accept_rate":60,"display_name":"BelieveToLive"},"score":0,"creation_date":1434101386,"post_id":30799554,"comment_id":49647990,"body_markdown":"@KevinCruijssen char primitive.","body":"@KevinCruijssen char primitive."},{"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"score":0,"creation_date":1434101437,"post_id":30799554,"comment_id":49648020,"body_markdown":"char primitive can&#39;t be null as well as it can&#39;t be empty. Just tried it myself and it doesn&#39;t compile","body":"char primitive can&#39;t be null as well as it can&#39;t be empty. Just tried it myself and it doesn&#39;t compile"},{"owner":{"account_id":5284131,"reputation":291,"user_id":4218622,"accept_rate":60,"display_name":"BelieveToLive"},"score":0,"creation_date":1434101587,"post_id":30799554,"comment_id":49648118,"body_markdown":"@ArthurEirich in which java version you compiled i mean VM version?","body":"@ArthurEirich in which java version you compiled i mean VM version?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1434101675,"post_id":30799554,"comment_id":49648161,"body_markdown":"`char` can&#39;t be `null` since it is primitive type. Also there is no such a thing as empty char `&#39;&#39;` in Java. But even if previous statements would be false and you could get `null` or `&#39;&#39;` then char can&#39;t be `null` AND `&#39;&#39;` at the same time so your condition doesn&#39;t make sense.","body":"<code>char</code> can&#39;t be <code>null</code> since it is primitive type. Also there is no such a thing as empty char <code>&#39;&#39;</code> in Java. But even if previous statements would be false and you could get <code>null</code> or <code>&#39;&#39;</code> then char can&#39;t be <code>null</code> AND <code>&#39;&#39;</code> at the same time so your condition doesn&#39;t make sense."},{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":0,"creation_date":1434101753,"post_id":30799554,"comment_id":49648203,"body_markdown":"If the value is not present in database, what value do you pass to `someCharValue` variable?","body":"If the value is not present in database, what value do you pass to <code>someCharValue</code> variable?"},{"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"score":0,"creation_date":1434101869,"post_id":30799554,"comment_id":49648275,"body_markdown":"@BelieveToLive my java.vm.version is &#39;24.71-b01&#39; and I use java &#39;1.7.0_71&#39;","body":"@BelieveToLive my java.vm.version is &#39;24.71-b01&#39; and I use java &#39;1.7.0_71&#39;"},{"owner":{"account_id":5284131,"reputation":291,"user_id":4218622,"accept_rate":60,"display_name":"BelieveToLive"},"score":0,"creation_date":1434101971,"post_id":30799554,"comment_id":49648340,"body_markdown":"Thanks for the comments.","body":"Thanks for the comments."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1434102251,"post_id":30799554,"comment_id":49648532,"body_markdown":"Your code can&#39;t compile for `someObject.getSomeCharValue()==&#39;&#39;` since there is no `&#39;&#39;` in Java. If `someObject.getSomeCharValue()==null` part compiles then it means that result of `getSomeCharValue` is wrapper type `Character`, not primitive `char` (as they can&#39;t be `null`s so `==null` would not compile here). In that case you can check for null like you are doing it now, or check against default value of char which is `&#39;\\u0000&#39;` which can be also written as `&#39;\\0&#39;` or simply `0` (char is also numeric type). In that case you should also remember to use OR operator, not AND.","body":"Your code can&#39;t compile for <code>someObject.getSomeCharValue()==&#39;&#39;</code> since there is no <code>&#39;&#39;</code> in Java. If <code>someObject.getSomeCharValue()==null</code> part compiles then it means that result of <code>getSomeCharValue</code> is wrapper type <code>Character</code>, not primitive <code>char</code> (as they can&#39;t be <code>null</code>s so <code>==null</code> would not compile here). In that case you can check for null like you are doing it now, or check against default value of char which is <code>&#39;\\u0000&#39;</code> which can be also written as <code>&#39;\\0&#39;</code> or simply <code>0</code> (char is also numeric type). In that case you should also remember to use OR operator, not AND."}],"answers":[{"tags":[],"owner":{"account_id":447545,"reputation":2029,"user_id":841221,"accept_rate":75,"display_name":"Aakash"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1434100951,"creation_date":1434100951,"answer_id":30799596,"question_id":30799554,"body_markdown":"Empty chars are not null. They don&#39;t just hold any value.\r\n\r\nYes. You should check both if your column allow nulls. Also, your code might give you `NullPointerException` since you are first checking for empty char and then for null. Better to use below\r\n\r\n    if(someObject.getSomeCharValue()==null || someObject.getSomeCharValue()==&#39;&#39; )","title":"Both null and empty char are equal in java","body":"<p>Empty chars are not null. They don't just hold any value.</p>\n\n<p>Yes. You should check both if your column allow nulls. Also, your code might give you <code>NullPointerException</code> since you are first checking for empty char and then for null. Better to use below</p>\n\n<pre><code>if(someObject.getSomeCharValue()==null || someObject.getSomeCharValue()=='' )\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":0,"creation_date":1434101321,"post_id":30799668,"comment_id":49647951,"body_markdown":"Does this answer OP question?","body":"Does this answer OP question?"},{"owner":{"account_id":5284131,"reputation":291,"user_id":4218622,"accept_rate":60,"display_name":"BelieveToLive"},"score":0,"creation_date":1434102006,"post_id":30799668,"comment_id":49648368,"body_markdown":"so how to handle null?","body":"so how to handle null?"},{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":0,"creation_date":1434102060,"post_id":30799668,"comment_id":49648399,"body_markdown":"@BelieveToLive, If the value is not present in database, what value do you pass to `someCharValue` variable?","body":"@BelieveToLive, If the value is not present in database, what value do you pass to <code>someCharValue</code> variable?"},{"owner":{"account_id":5284131,"reputation":291,"user_id":4218622,"accept_rate":60,"display_name":"BelieveToLive"},"score":0,"creation_date":1434102220,"post_id":30799668,"comment_id":49648507,"body_markdown":"@NamanGala what if I get the value directly from the table into the someCharValue value?","body":"@NamanGala what if I get the value directly from the table into the someCharValue value?"},{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":1,"creation_date":1434102333,"post_id":30799668,"comment_id":49648583,"body_markdown":"@BelieveToLive, can you sysout the value and check what it is printing?","body":"@BelieveToLive, can you sysout the value and check what it is printing?"},{"owner":{"account_id":2427990,"reputation":182,"user_id":2119537,"accept_rate":67,"display_name":"Aradhya"},"score":0,"creation_date":1434102578,"post_id":30799668,"comment_id":49648719,"body_markdown":"From the DB we will get only String not char even if its size is 1. so before you get the char you can do null check with that string. We cant null check the char.","body":"From the DB we will get only String not char even if its size is 1. so before you get the char you can do null check with that string. We cant null check the char."}],"tags":[],"owner":{"account_id":2427990,"reputation":182,"user_id":2119537,"accept_rate":67,"display_name":"Aradhya"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1434101760,"creation_date":1434101215,"answer_id":30799668,"question_id":30799554,"body_markdown":"    if(someObject.getSomeCharValue()==&#39;&#39; &amp;&amp; someObject.getSomeCharValue()==null)\r\n\r\nboth `someObject.getSomeCharValue()==&#39;&#39;` and `someObject.getSomeCharValue()==null` are compilation error. \r\n\r\nif there is no value in the DB that means it is null but not empty char.\r\n\r\nThere is nothing called empty char (`&#39;&#39;`) in Java.  \r\nBut there is empty string (`&quot;&quot;`).\r\n","title":"Both null and empty char are equal in java","body":"<pre><code>if(someObject.getSomeCharValue()=='' &amp;&amp; someObject.getSomeCharValue()==null)\n</code></pre>\n\n<p>both <code>someObject.getSomeCharValue()==''</code> and <code>someObject.getSomeCharValue()==null</code> are compilation error. </p>\n\n<p>if there is no value in the DB that means it is null but not empty char.</p>\n\n<p>There is nothing called empty char (<code>''</code>) in Java.<br>\nBut there is empty string (<code>\"\"</code>).</p>\n"},{"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1434102444,"post_id":30799827,"comment_id":49648640,"body_markdown":"`if (c == &#39;\\0&#39; || c == &#39;\\u0000&#39;)` doesn&#39;t make much sense since as you already mentioned `&#39;\\0&#39;` and `&#39;\\u0000&#39;` are equal.","body":"<code>if (c == &#39;\\0&#39; || c == &#39;\\u0000&#39;)</code> doesn&#39;t make much sense since as you already mentioned <code>&#39;\\0&#39;</code> and <code>&#39;\\u0000&#39;</code> are equal."}],"tags":[],"owner":{"account_id":1673756,"reputation":1421,"user_id":2445298,"accept_rate":50,"display_name":"Estimate"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1434102662,"creation_date":1434101656,"answer_id":30799827,"question_id":30799554,"body_markdown":"char has no value with `&#39;&#39;`. In char, [null character][1] ([or empty char][2]) is `\\0` or `\\u0000`. You can&#39;t check with `&#39;&#39;` or `null`.\r\n\r\nFor example if you declare a char like this:\r\n\r\n    char c = &#39;&#39;;//compilation error here\r\n\r\nor \r\n\r\n    char c = null;//compilation error here\r\n\r\nso if you want to check whether a char is null, then you need to use the following code:\r\n\r\n    char c = &#39;\\0&#39;;\r\n    if (c == &#39;\\0&#39;) System.out.print(&quot;char is null&quot;);//if(c == &#39;\\u0000&#39;) also can be possible\r\n    else System.out.print(&quot;char is not null&quot;);\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/9909333/whats-the-default-value-of-char\r\n  [2]: https://stackoverflow.com/questions/8534178/how-to-represent-empty-char-in-java-character-class","title":"Both null and empty char are equal in java","body":"<p>char has no value with <code>''</code>. In char, <a href=\"https://stackoverflow.com/questions/9909333/whats-the-default-value-of-char\">null character</a> (<a href=\"https://stackoverflow.com/questions/8534178/how-to-represent-empty-char-in-java-character-class\">or empty char</a>) is <code>\\0</code> or <code>\\u0000</code>. You can't check with <code>''</code> or <code>null</code>.</p>\n\n<p>For example if you declare a char like this:</p>\n\n<pre><code>char c = '';//compilation error here\n</code></pre>\n\n<p>or </p>\n\n<pre><code>char c = null;//compilation error here\n</code></pre>\n\n<p>so if you want to check whether a char is null, then you need to use the following code:</p>\n\n<pre><code>char c = '\\0';\nif (c == '\\0') System.out.print(\"char is null\");//if(c == '\\u0000') also can be possible\nelse System.out.print(\"char is not null\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6428583,"reputation":6399,"user_id":4982691,"display_name":"jumping_monkey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701352146,"creation_date":1701352146,"answer_id":77578984,"question_id":30799554,"body_markdown":"### [Empty char](https://stackoverflow.com/a/77578773/4982691) \r\n    //Empty character literal does not exist in Java.\r\n    char c = &#39;&#39;; //does not compile\r\n\r\n### A [Null Literal in Java](https://docs.oracle.com/javase/specs/jls/se18/html/jls-3.html#jls-3.10.8) \r\n\r\n&gt; The null type has one value, the null reference, represented by the\r\n&gt; null literal null, which is formed from ASCII characters.\r\n\r\nis different from the \r\n\r\n### [Null character](https://en.wikipedia.org/wiki/Null_character) \r\n\r\n&gt; The null character (also null terminator) is a control character with\r\n&gt; the value zero.\r\n&gt; \r\n&gt; Today the character has much more significance in the programming\r\n&gt; language C and its derivatives and in many data formats, where it\r\n&gt; serves as a reserved character used to signify the end of a string,[6]\r\n&gt; often called a null-terminated string.\r\n\r\n[Excellent article about Null in Java](https://blogs.oracle.com/javamagazine/post/curly-braces-java-null)","title":"Both null and empty char are equal in java","body":"<h3><a href=\"https://stackoverflow.com/a/77578773/4982691\">Empty char</a></h3>\n<pre><code>//Empty character literal does not exist in Java.\nchar c = ''; //does not compile\n</code></pre>\n<h3>A <a href=\"https://docs.oracle.com/javase/specs/jls/se18/html/jls-3.html#jls-3.10.8\" rel=\"nofollow noreferrer\">Null Literal in Java</a></h3>\n<blockquote>\n<p>The null type has one value, the null reference, represented by the\nnull literal null, which is formed from ASCII characters.</p>\n</blockquote>\n<p>is different from the</p>\n<h3><a href=\"https://en.wikipedia.org/wiki/Null_character\" rel=\"nofollow noreferrer\">Null character</a></h3>\n<blockquote>\n<p>The null character (also null terminator) is a control character with\nthe value zero.</p>\n<p>Today the character has much more significance in the programming\nlanguage C and its derivatives and in many data formats, where it\nserves as a reserved character used to signify the end of a string,[6]\noften called a null-terminated string.</p>\n</blockquote>\n<p><a href=\"https://blogs.oracle.com/javamagazine/post/curly-braces-java-null\" rel=\"nofollow noreferrer\">Excellent article about Null in Java</a></p>\n"}],"owner":{"account_id":5284131,"reputation":291,"user_id":4218622,"accept_rate":60,"display_name":"BelieveToLive"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3326,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":30799827,"answer_count":4,"score":3,"last_activity_date":1701352146,"creation_date":1434100813,"question_id":30799554,"body_markdown":"I have doubt while taking a `null` or empty `char` check in Java. Is both have to be checked in any way. \r\n\r\nFor example in database the variable length for `Char` is 1 . It will allow `null` as well. So if you have empty char does it mean `null`? or we have to check as \r\n\r\n    if(someObject.getSomeCharValue()==&#39;&#39; &amp;&amp; someObject.getSomeCharValue()==null) {\r\n        //true\r\n    }\r\n    else{\r\n        //dont compile\r\n    }","title":"Both null and empty char are equal in java","body":"<p>I have doubt while taking a <code>null</code> or empty <code>char</code> check in Java. Is both have to be checked in any way. </p>\n\n<p>For example in database the variable length for <code>Char</code> is 1 . It will allow <code>null</code> as well. So if you have empty char does it mean <code>null</code>? or we have to check as </p>\n\n<pre><code>if(someObject.getSomeCharValue()=='' &amp;&amp; someObject.getSomeCharValue()==null) {\n    //true\n}\nelse{\n    //dont compile\n}\n</code></pre>\n"},{"tags":["java","double"],"comments":[{"owner":{"account_id":10258,"reputation":26470,"user_id":19276,"accept_rate":81,"display_name":"DJClayworth"},"score":1,"creation_date":1275324096,"post_id":2944344,"comment_id":3000736,"body_markdown":"Should 53.91739999999 compare equal to 53.9173? Or to 53.9174?","body":"Should 53.91739999999 compare equal to 53.9173? Or to 53.9174?"}],"answers":[{"comments":[{"owner":{"account_id":87390,"reputation":4722,"user_id":242348,"accept_rate":87,"display_name":"monoceres"},"score":0,"creation_date":1275318478,"post_id":2944352,"comment_id":3000194,"body_markdown":"Love these kind of solutions, simple and brilliant!","body":"Love these kind of solutions, simple and brilliant!"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1275319881,"post_id":2944352,"comment_id":3000342,"body_markdown":"-1.  @Michael is right.  This solution is flawed.  I&#39;d like your explanation as to why `\tSystem.out.println(12512310271255125d == 12512310271255124d);` prints `true` if double can represent integral values exactly.  It&#39;s an obviously incorrect statement given the magnitudes doubles can work with.  Then there&#39;s the fact that you shouldn&#39;t be using `==` on reference types like `BigDecimal`, but that&#39;s an easy fix.","body":"-1.  @Michael is right.  This solution is flawed.  I&#39;d like your explanation as to why `\tSystem.out.println(12512310271255125d == 12512310271255124d);` prints <code>true</code> if double can represent integral values exactly.  It&#39;s an obviously incorrect statement given the magnitudes doubles can work with.  Then there&#39;s the fact that you shouldn&#39;t be using <code>==</code> on reference types like <code>BigDecimal</code>, but that&#39;s an easy fix."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1275320287,"post_id":2944352,"comment_id":3000376,"body_markdown":"Cool downvote removed.  They&#39;re good solutions for most cases.","body":"Cool downvote removed.  They&#39;re good solutions for most cases."},{"owner":{"account_id":46475,"reputation":20349,"user_id":137369,"accept_rate":78,"display_name":"Thirler"},"score":0,"creation_date":1425902649,"post_id":2944352,"comment_id":46137490,"body_markdown":"+1 for the `BigDecimal`, this really does what is asked, making is very maintainable. This is what should be the preferred solution until performance has shown to need improvement.","body":"+1 for the <code>BigDecimal</code>, this really does what is asked, making is very maintainable. This is what should be the preferred solution until performance has shown to need improvement."},{"owner":{"account_id":879672,"reputation":3030,"user_id":219112,"accept_rate":47,"display_name":"Sadee"},"score":0,"creation_date":1612048173,"post_id":2944352,"comment_id":116646336,"body_markdown":"(-3.17156, -3.1715) returns false","body":"(-3.17156, -3.1715) returns false"}],"tags":[],"owner":{"account_id":79153,"reputation":513965,"user_id":224671,"accept_rate":67,"display_name":"kennytm"},"comment_count":5,"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1275320051,"creation_date":1275318291,"answer_id":2944352,"question_id":2944344,"body_markdown":"If you want `a = 1.00001` and `b = 0.99999` be identified as equal:\r\n\r\n    return Math.abs(a - b) &lt; 1e-4;\r\n\r\nOtherwise, if you want `a = 1.00010` and `b = 1.00019` be identified as equal, and both `a` and `b` are positive and not huge:\r\n\r\n    return Math.floor(a * 10000) == Math.floor(b * 10000);\r\n    // compare by == is fine here because both sides are integral values.\r\n    // double can represent integral values below 2**53 exactly.\r\n\r\nOtherwise, use the `truncate` method as shown in https://stackoverflow.com/questions/1976809/are-there-any-functions-for-truncating-a-double-in-java:\r\n\r\n    BigDecimal aa = new BigDecimal(a);\r\n    BigDecimal bb = new BigDecimal(b);\r\n    aa = aa.setScale(4, BigDecimal.ROUND_DOWN);\r\n    bb = bb.setScale(4, BigDecimal.ROUND_DOWN);\r\n    return aa.equals(bb);\r\n","title":"Java: Check if two double values match on specific no of decimal places","body":"<p>If you want <code>a = 1.00001</code> and <code>b = 0.99999</code> be identified as equal:</p>\n\n<pre><code>return Math.abs(a - b) &lt; 1e-4;\n</code></pre>\n\n<p>Otherwise, if you want <code>a = 1.00010</code> and <code>b = 1.00019</code> be identified as equal, and both <code>a</code> and <code>b</code> are positive and not huge:</p>\n\n<pre><code>return Math.floor(a * 10000) == Math.floor(b * 10000);\n// compare by == is fine here because both sides are integral values.\n// double can represent integral values below 2**53 exactly.\n</code></pre>\n\n<p>Otherwise, use the <code>truncate</code> method as shown in <a href=\"https://stackoverflow.com/questions/1976809/are-there-any-functions-for-truncating-a-double-in-java\">Are there any functions for truncating a double in java?</a>:</p>\n\n<pre><code>BigDecimal aa = new BigDecimal(a);\nBigDecimal bb = new BigDecimal(b);\naa = aa.setScale(4, BigDecimal.ROUND_DOWN);\nbb = bb.setScale(4, BigDecimal.ROUND_DOWN);\nreturn aa.equals(bb);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":342370,"reputation":1564,"user_id":673496,"accept_rate":41,"display_name":"rhavin"},"score":1,"creation_date":1364754946,"post_id":2944381,"comment_id":22352435,"body_markdown":"Doesnt that really depend on how you translate that line? If you want to check if those values are equal up to a certain digit, you&#39;re right with the `String` solution, but most of the times where such a comparation will occur, you just want to know it the results are &quot;close enough&quot;, and in those scenarios, the line is pretty right.","body":"Doesnt that really depend on how you translate that line? If you want to check if those values are equal up to a certain digit, you&#39;re right with the <code>String</code> solution, but most of the times where such a comparation will occur, you just want to know it the results are &quot;close enough&quot;, and in those scenarios, the line is pretty right."}],"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1275319180,"creation_date":1275318656,"answer_id":2944381,"question_id":2944344,"body_markdown":"Naively:\r\n\r\n    if(Math.abs(a-b) &lt; 0.0001)\r\n\r\nHowever, that&#39;s not going to work correctly for all values. It&#39;s actually impossible to get it to work as long as you&#39;re using `double`, because `double` is implemented as binary fractons and does not even *have* decimal places.\r\n\r\nYou&#39;ll have to convert your values to `String` or `BigDecimal` to make meaningful tests about their decimal places.\r\n\r\nYou may want to read [the Floating-Point Guide][1] to improve your understanding of how floating point values work.\r\n\r\n\r\n  [1]: http://floating-point-gui.de/formats/binary/\r\n","title":"Java: Check if two double values match on specific no of decimal places","body":"<p>Naively:</p>\n\n<pre><code>if(Math.abs(a-b) &lt; 0.0001)\n</code></pre>\n\n<p>However, that's not going to work correctly for all values. It's actually impossible to get it to work as long as you're using <code>double</code>, because <code>double</code> is implemented as binary fractons and does not even <em>have</em> decimal places.</p>\n\n<p>You'll have to convert your values to <code>String</code> or <code>BigDecimal</code> to make meaningful tests about their decimal places.</p>\n\n<p>You may want to read <a href=\"http://floating-point-gui.de/formats/binary/\" rel=\"noreferrer\">the Floating-Point Guide</a> to improve your understanding of how floating point values work.</p>\n"},{"comments":[{"owner":{"account_id":51914,"reputation":67911,"user_id":155137,"accept_rate":91,"display_name":"Martijn Courteaux"},"score":0,"creation_date":1275328235,"post_id":2944443,"comment_id":3001083,"body_markdown":"You don&#39;t have to make a new answer, just accept the correct answer.","body":"You don&#39;t have to make a new answer, just accept the correct answer."}],"tags":[],"owner":{"account_id":135548,"reputation":6518,"user_id":338476,"accept_rate":49,"display_name":"tzippy"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1275328185,"creation_date":1275319232,"answer_id":2944443,"question_id":2944344,"body_markdown":"Thanks. I did it this way:\r\n\r\n    \r\n\r\n    double lon = 23.567889;\r\n    BigDecimal bdLon = new BigDecimal(lon);\r\n    bdLon = bdLon.setScale(4, BigDecimal.ROUND_HALF_UP);\r\n   \r\n    System.out.println(bdLon.doubleValue());","title":"Java: Check if two double values match on specific no of decimal places","body":"<p>Thanks. I did it this way:</p>\n\n<pre><code>double lon = 23.567889;\nBigDecimal bdLon = new BigDecimal(lon);\nbdLon = bdLon.setScale(4, BigDecimal.ROUND_HALF_UP);\n\nSystem.out.println(bdLon.doubleValue());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":189547,"reputation":1256,"user_id":428944,"accept_rate":71,"display_name":"DaveEdelstein"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1477937588,"creation_date":1477937588,"answer_id":40348039,"question_id":2944344,"body_markdown":"Apache commons has this:\r\norg.apache.commons.math3.util.Precision equals(double x, double y, double eps)\r\n\r\nepsilon would be the distance you would allow.  Looks like yours would be 1e-5?  \r\n\r\nThe source-code of this method looks like it uses Math.abs as suggested in other answers.   ","title":"Java: Check if two double values match on specific no of decimal places","body":"<p>Apache commons has this:\norg.apache.commons.math3.util.Precision equals(double x, double y, double eps)</p>\n\n<p>epsilon would be the distance you would allow.  Looks like yours would be 1e-5?  </p>\n\n<p>The source-code of this method looks like it uses Math.abs as suggested in other answers.   </p>\n"},{"tags":[],"owner":{"account_id":8495639,"reputation":321,"user_id":6370309,"accept_rate":75,"display_name":"Norby"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1529530550,"creation_date":1529530550,"answer_id":50957387,"question_id":2944344,"body_markdown":"here is the simple example if you still need this :) \r\n\r\n    public static boolean areEqualByThreeDecimalPlaces(double a, double b) {\r\n\r\n\t\ta = a * 1000;\r\n\r\n\t\tb = b * 1000;\r\n\r\n\t\tint a1 = (int) a;\r\n\r\n\t\tint b1 = (int) b;\r\n\r\n\t\tif (a1 == b1) {\r\n\t\t\tSystem.out.println(&quot;it works&quot;);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\telse\r\n\t\t\tSystem.out.println(&quot;it doesn&#39;t work&quot;);\r\n\t\treturn false;","title":"Java: Check if two double values match on specific no of decimal places","body":"<p>here is the simple example if you still need this :) </p>\n\n<pre><code>public static boolean areEqualByThreeDecimalPlaces(double a, double b) {\n\n    a = a * 1000;\n\n    b = b * 1000;\n\n    int a1 = (int) a;\n\n    int b1 = (int) b;\n\n    if (a1 == b1) {\n        System.out.println(\"it works\");\n        return true;\n    }\n\n    else\n        System.out.println(\"it doesn't work\");\n    return false;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13848741,"reputation":10825,"user_id":9997212,"display_name":"enzo"},"score":0,"creation_date":1621796897,"post_id":67650643,"comment_id":119598143,"body_markdown":"This is only returning `false`. You should replace the whole method body to `return Math.abs(myFirstNumber - mySecondNumber) &lt; 0.0009;`.","body":"This is only returning <code>false</code>. You should replace the whole method body to <code>return Math.abs(myFirstNumber - mySecondNumber) &lt; 0.0009;</code>."}],"tags":[],"owner":{"account_id":21685826,"reputation":1,"user_id":16001300,"display_name":"Mayank  Sikarwar"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1621803867,"creation_date":1621693858,"answer_id":67650643,"question_id":2944344,"body_markdown":"The solution to compare two double-digits up to three decimal places and return true or false might be: \r\n\r\n```java\r\npublic static boolean areEqualByThreeDecimalPlaces(double myFirstNumber , double mySecondNumber){\r\n    if (Math.abs(myFirstNumber - mySecondNumber) &lt; 0.0009 ){\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}","title":"Java: Check if two double values match on specific no of decimal places","body":"<p>The solution to compare two double-digits up to three decimal places and return true or false might be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean areEqualByThreeDecimalPlaces(double myFirstNumber , double mySecondNumber){\n    if (Math.abs(myFirstNumber - mySecondNumber) &lt; 0.0009 ){\n        return true;\n    } else {\n        return false;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2422600,"reputation":1953,"user_id":3048505,"accept_rate":71,"display_name":"Jonathan"},"score":0,"creation_date":1627731262,"post_id":68600598,"comment_id":121237756,"body_markdown":"Welcome to Stackoverflow. Please explain your solution.","body":"Welcome to Stackoverflow. Please explain your solution."},{"owner":{"account_id":22347574,"reputation":11,"user_id":16566299,"display_name":"Programmer"},"score":1,"creation_date":1628687502,"post_id":68600598,"comment_id":121487744,"body_markdown":"The method Math.floor returns the largest Double data type that is less than or equal to the argument and is equal to mathematical integer.\n\nThe method Math.ceil returns the smallest Double data type that is greater than or equal to the argument and is equal to mathematical integer.\n\nThat&#39;s why I used Math.ceil for negative numbers and Math.floor for positive numbers. if non of the conditions is true than numbers are equal.","body":"The method Math.floor returns the largest Double data type that is less than or equal to the argument and is equal to mathematical integer.  The method Math.ceil returns the smallest Double data type that is greater than or equal to the argument and is equal to mathematical integer.  That&#39;s why I used Math.ceil for negative numbers and Math.floor for positive numbers. if non of the conditions is true than numbers are equal."}],"tags":[],"owner":{"account_id":22347574,"reputation":11,"user_id":16566299,"display_name":"Programmer"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627721568,"creation_date":1627721568,"answer_id":68600598,"question_id":2944344,"body_markdown":"    public static boolean areEqualByThreeDecimalPlaces(double a, double b){\r\n        if(a &lt; 0 &amp;&amp; b &lt; 0) {\r\n            double c = Math.ceil(a * 1000) / 1000;\r\n            double d = Math.ceil(b * 1000) / 1000;\r\n            return c == d;\r\n        }\r\n        if(a &gt; 0 &amp;&amp; b &gt; 0){\r\n            double c = Math.floor(a * 1000) / 1000;\r\n            double d = Math.floor(b * 1000) / 1000;\r\n            return c == d;\r\n        }\r\n        return a == b;\r\n    }","title":"Java: Check if two double values match on specific no of decimal places","body":"<pre><code>public static boolean areEqualByThreeDecimalPlaces(double a, double b){\n    if(a &lt; 0 &amp;&amp; b &lt; 0) {\n        double c = Math.ceil(a * 1000) / 1000;\n        double d = Math.ceil(b * 1000) / 1000;\n        return c == d;\n    }\n    if(a &gt; 0 &amp;&amp; b &gt; 0){\n        double c = Math.floor(a * 1000) / 1000;\n        double d = Math.floor(b * 1000) / 1000;\n        return c == d;\n    }\n    return a == b;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22800811,"reputation":11,"user_id":16953515,"display_name":"Rashid Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669351214,"creation_date":1669349888,"answer_id":74568313,"question_id":2944344,"body_markdown":"    public static boolean areEqualByThreeDecimalPlaces(double a, double b) {\r\n\r\n    if(a &gt; 0 &amp;&amp; b &gt;0){\r\n        return ((int)Math.floor(a * 1000) == (int)Math.floor(b * 1000));\r\n    }\r\n    else if (a &lt; 0 &amp;&amp; b &lt;0) {\r\n        return ((int)Math.ceil(a * 1000) == (int)Math.ceil(b * 1000));\r\n    }\r\n\r\n    return a==b;\r\n    }","title":"Java: Check if two double values match on specific no of decimal places","body":"<pre><code>public static boolean areEqualByThreeDecimalPlaces(double a, double b) {\n\nif(a &gt; 0 &amp;&amp; b &gt;0){\n    return ((int)Math.floor(a * 1000) == (int)Math.floor(b * 1000));\n}\nelse if (a &lt; 0 &amp;&amp; b &lt;0) {\n    return ((int)Math.ceil(a * 1000) == (int)Math.ceil(b * 1000));\n}\n\nreturn a==b;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25540595,"reputation":1,"user_id":19326720,"display_name":"jani_rn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669715429,"creation_date":1669714890,"answer_id":74611929,"question_id":2944344,"body_markdown":"    public static boolean areEqualBySixDecimalPlaces(double a, double b) {\r\n            int num1 = (int) (a * 1e6);\r\n            int num2 = (int) (b * 1e6);\r\n            return num1 == num2;\r\n        }\r\nCasting up to desired digits shall be the simplest solution if you know the values","title":"Java: Check if two double values match on specific no of decimal places","body":"<pre><code>public static boolean areEqualBySixDecimalPlaces(double a, double b) {\n        int num1 = (int) (a * 1e6);\n        int num2 = (int) (b * 1e6);\n        return num1 == num2;\n    }\n</code></pre>\n<p>Casting up to desired digits shall be the simplest solution if you know the values</p>\n"},{"comments":[{"owner":{"account_id":27990374,"reputation":1,"user_id":21376369,"display_name":"midnyt"},"score":0,"creation_date":1678539136,"post_id":75705042,"comment_id":133554152,"body_markdown":"this way we don&#39;t have to deal with the auto rounding of decimals by java :)","body":"this way we don&#39;t have to deal with the auto rounding of decimals by java :)"}],"tags":[],"owner":{"account_id":27990374,"reputation":1,"user_id":21376369,"display_name":"midnyt"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678538955,"creation_date":1678538955,"answer_id":75705042,"question_id":2944344,"body_markdown":"Go ahead u can have a laugh over this one!!\r\n\r\n    public static boolean areEqualByThreeDecimalPlaces(double v, double v1) {\r\n\r\n\r\n        if((int)v == (int)v1){\r\n\r\n            String s = &quot;&quot;+v;\r\n            String s1 = &quot;&quot;+v1;\r\n\r\n            s = s.substring(s.indexOf(&quot;.&quot;)+1,s.indexOf(&quot;.&quot;)+4);\r\n            s1 = s1.substring(s1.indexOf(&quot;.&quot;)+1,s1.indexOf(&quot;.&quot;)+4);\r\n\r\n            return s.equals(s1);\r\n        }\r\n        return false;\r\n    }","title":"Java: Check if two double values match on specific no of decimal places","body":"<p>Go ahead u can have a laugh over this one!!</p>\n<pre><code>public static boolean areEqualByThreeDecimalPlaces(double v, double v1) {\n\n\n    if((int)v == (int)v1){\n\n        String s = &quot;&quot;+v;\n        String s1 = &quot;&quot;+v1;\n\n        s = s.substring(s.indexOf(&quot;.&quot;)+1,s.indexOf(&quot;.&quot;)+4);\n        s1 = s1.substring(s1.indexOf(&quot;.&quot;)+1,s1.indexOf(&quot;.&quot;)+4);\n\n        return s.equals(s1);\n    }\n    return false;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1692280523,"post_id":76922102,"comment_id":135604091,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76922102/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29244733,"reputation":1,"user_id":22405427,"display_name":"Arijeet chakraborty"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692280411,"creation_date":1692279821,"answer_id":76922102,"question_id":2944344,"body_markdown":"\r\n       public class DecimalComparator \r\n       {\r\n           public static boolean areEqualByThreeDecimalPlaces(double a, double b) \r\n           {\r\n               double threshold = 0.001;  // This represents 1e-3 or 0.001\r\n               double diff = Math.abs(a - b);\r\n               return diff &lt;threshold;\r\n           } \r\n       }","title":"Java: Check if two double values match on specific no of decimal places","body":"<pre><code>   public class DecimalComparator \n   {\n       public static boolean areEqualByThreeDecimalPlaces(double a, double b) \n       {\n           double threshold = 0.001;  // This represents 1e-3 or 0.001\n           double diff = Math.abs(a - b);\n           return diff &lt;threshold;\n       } \n   }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3342991,"reputation":1334,"user_id":2808815,"accept_rate":82,"display_name":"Joe Caruso"},"score":0,"creation_date":1701439121,"post_id":77578889,"comment_id":136778972,"body_markdown":"That doesn&#39;t work.","body":"That doesn&#39;t work."},{"owner":{"account_id":145051,"reputation":130109,"user_id":354577,"accept_rate":100,"display_name":"Chris"},"score":0,"creation_date":1701643386,"post_id":77578889,"comment_id":136798189,"body_markdown":"This question is 13.5 years old and there are already several highly-voted answers. Are you sure that this answer is different from all of them? Why should we use this instead of what&#39;s already here?","body":"This question is 13.5 years old and there are already several highly-voted answers. Are you sure that this answer is different from all of them? Why should we use this instead of what&#39;s already here?"}],"tags":[],"owner":{"account_id":30031881,"reputation":1,"user_id":23014787,"display_name":"leestergit"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701351391,"creation_date":1701351391,"answer_id":77578889,"question_id":2944344,"body_markdown":"**try this one**\r\n\r\n\r\npublic static boolean isItEqual(double num1, double num2){ &lt;br&gt;    \r\n   long firstDigit = (long)(num1 * 1000);&lt;br&gt;\r\n   long secondDigit = (long)(num2 * 1000);&lt;br&gt;\r\n   return firstDigit == secondDigit;&lt;br&gt;\r\n}","title":"Java: Check if two double values match on specific no of decimal places","body":"<p><strong>try this one</strong></p>\n<p>public static boolean isItEqual(double num1, double num2){ <br><br />\nlong firstDigit = (long)(num1 * 1000);<br>\nlong secondDigit = (long)(num2 * 1000);<br>\nreturn firstDigit == secondDigit;<br>\n}</p>\n"}],"owner":{"account_id":135548,"reputation":6518,"user_id":338476,"accept_rate":49,"display_name":"tzippy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55585,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":2944352,"answer_count":12,"score":13,"last_activity_date":1701351391,"creation_date":1275318218,"question_id":2944344,"body_markdown":"Comparing those two values shall result in a &quot;true&quot;:\r\n\r\n    53.9173333333333  53.9173\r\n\r\n","title":"Java: Check if two double values match on specific no of decimal places","body":"<p>Comparing those two values shall result in a \"true\":</p>\n\n<pre><code>53.9173333333333  53.9173\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":43453,"reputation":16185,"user_id":127035,"accept_rate":71,"display_name":"ewan.chalmers"},"score":2,"creation_date":1324040039,"post_id":8534178,"comment_id":10570426,"body_markdown":"Show an example of the replace operation you want to perform.","body":"Show an example of the replace operation you want to perform."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1324040988,"post_id":8534178,"comment_id":10570674,"body_markdown":"@rahulsri I can&#39;t see the code you are referring to.","body":"@rahulsri I can&#39;t see the code you are referring to."},{"owner":{"account_id":222360,"reputation":7615,"user_id":480894,"accept_rate":72,"display_name":"Roland"},"score":4,"creation_date":1489391113,"post_id":8534178,"comment_id":72632803,"body_markdown":"I think that OP wants to perform `String.replace(&#39; &#39;, EMPTY_CHARACTER)` to have the same effect as `String.replace(&quot; &quot;, &quot;&quot;)`. I.e. remove all spaces.","body":"I think that OP wants to perform <code>String.replace(&#39; &#39;, EMPTY_CHARACTER)</code> to have the same effect as <code>String.replace(&quot; &quot;, &quot;&quot;)</code>. I.e. remove all spaces."}],"answers":[{"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1324039499,"post_id":8534239,"comment_id":10570297,"body_markdown":"What do you mean `it not worked`? DO you mean it doesn&#39;t compile? In that case it would be `char ch = &#39;\\0&#39;;` or `char ch = 0;`","body":"What do you mean <code>it not worked</code>? DO you mean it doesn&#39;t compile? In that case it would be <code>char ch = &#39;\\0&#39;;</code> or <code>char ch = 0;</code>"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1324040624,"post_id":8534239,"comment_id":10570574,"body_markdown":"@rahulsri All characters are characters and there is no character which is not a character. You need to work out what your real requirement is and try to solve it a different way.  The `nul` character is one of the many special characters which indicates its a character which is not really there, but it is itself still a character.","body":"@rahulsri All characters are characters and there is no character which is not a character. You need to work out what your real requirement is and try to solve it a different way.  The <code>nul</code> character is one of the many special characters which indicates its a character which is not really there, but it is itself still a character."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1324040934,"post_id":8534239,"comment_id":10570657,"body_markdown":"&quot;If god can do anything, can god create a rock even he cannot lift?&quot;  Its similar to the question; Can you create a character which is not a character?","body":"&quot;If god can do anything, can god create a rock even he cannot lift?&quot;  Its similar to the question; Can you create a character which is not a character?"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1324040826,"creation_date":1324038952,"answer_id":8534239,"question_id":8534178,"body_markdown":"You can only re-use an existing character. e.g. `\\0` If you put this in a String, you will have a String with one character in it.\r\n\r\n---\r\n\r\nSay you want a `char` such that when you do\r\n\r\n    String s = \r\n    char ch = ?\r\n    String s2 = s + ch; // there is not char which does this.\r\n    assert s.equals(s2);\r\n\r\nwhat you have to do instead is\r\n\r\n    String s = \r\n    char ch = MY_NULL_CHAR;\r\n    String s2 = ch == MY_NULL_CHAR ? s : s + ch;\r\n    assert s.equals(s2);\r\n","title":"How to represent empty char in Java Character class","body":"<p>You can only re-use an existing character. e.g. <code>\\0</code> If you put this in a String, you will have a String with one character in it.</p>\n\n<hr>\n\n<p>Say you want a <code>char</code> such that when you do</p>\n\n<pre><code>String s = \nchar ch = ?\nString s2 = s + ch; // there is not char which does this.\nassert s.equals(s2);\n</code></pre>\n\n<p>what you have to do instead is</p>\n\n<pre><code>String s = \nchar ch = MY_NULL_CHAR;\nString s2 = ch == MY_NULL_CHAR ? s : s + ch;\nassert s.equals(s2);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2182153,"reputation":177,"user_id":1931369,"accept_rate":33,"display_name":"cinnamon toast"},"score":6,"creation_date":1356665397,"post_id":8534309,"comment_id":19439748,"body_markdown":"What does `&#39;\\0&#39;` exactly mean? @AVD","body":"What does <code>&#39;\\0&#39;</code> exactly mean? @AVD"},{"owner":{"account_id":48120,"reputation":93879,"user_id":142822,"display_name":"KV Prajapati"},"score":9,"creation_date":1356666189,"post_id":8534309,"comment_id":19439894,"body_markdown":"@cinnamontoast - Its a [null char literal](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)","body":"@cinnamontoast - Its a <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">null char literal</a>"},{"owner":{"account_id":1827467,"reputation":4043,"user_id":1659790,"accept_rate":73,"display_name":"Jimmy T."},"score":15,"creation_date":1402840207,"post_id":8534309,"comment_id":37419272,"body_markdown":"A null char literal is still a character and takes space in storage.","body":"A null char literal is still a character and takes space in storage."},{"owner":{"account_id":248873,"reputation":787,"user_id":524529,"display_name":"Chris Hatton"},"score":8,"creation_date":1406949855,"post_id":8534309,"comment_id":39042396,"body_markdown":"The question asks for a way to represent &#39;no characters&#39;.  While the null character is useful in many situations, it is still a character in its own right, so cannot be the answer to this question.  The correct answer, already given by user3001, is to use Java&#39;s boxed Character reference type and give it &#39;null&#39; value when &#39;no character&#39; is needed.","body":"The question asks for a way to represent &#39;no characters&#39;.  While the null character is useful in many situations, it is still a character in its own right, so cannot be the answer to this question.  The correct answer, already given by user3001, is to use Java&#39;s boxed Character reference type and give it &#39;null&#39; value when &#39;no character&#39; is needed."},{"owner":{"account_id":48120,"reputation":93879,"user_id":142822,"display_name":"KV Prajapati"},"score":1,"creation_date":1406960968,"post_id":8534309,"comment_id":39044231,"body_markdown":"@Augmental The `null` literal denote `missing` object (Reference variable doesn&#39;t have object reference).","body":"@Augmental The <code>null</code> literal denote <code>missing</code> object (Reference variable doesn&#39;t have object reference)."},{"owner":{"account_id":248873,"reputation":787,"user_id":524529,"display_name":"Chris Hatton"},"score":2,"creation_date":1407024506,"post_id":8534309,"comment_id":39059275,"body_markdown":"@AVD Yes, and rahulsri asks how to represent a missing character. So a null Character reference fits.","body":"@AVD Yes, and rahulsri asks how to represent a missing character. So a null Character reference fits."},{"owner":{"account_id":222360,"reputation":7615,"user_id":480894,"accept_rate":72,"display_name":"Roland"},"score":1,"creation_date":1489390984,"post_id":8534309,"comment_id":72632745,"body_markdown":"OP wants to perform `String.replace(&#39; &#39;, EMPTY_CHARACTER)` to have the same effect as `String.replace(&quot; &quot;, &quot;&quot;)` your answer will not solve his problem. The correct answer is http://stackoverflow.com/a/37683750/480894","body":"OP wants to perform <code>String.replace(&#39; &#39;, EMPTY_CHARACTER)</code> to have the same effect as <code>String.replace(&quot; &quot;, &quot;&quot;)</code> your answer will not solve his problem. The correct answer is <a href=\"http://stackoverflow.com/a/37683750/480894\">stackoverflow.com/a/37683750/480894</a>"}],"tags":[],"owner":{"account_id":48120,"reputation":93879,"user_id":142822,"display_name":"KV Prajapati"},"comment_count":7,"down_vote_count":10,"up_vote_count":181,"is_accepted":false,"score":171,"last_activity_date":1461595079,"creation_date":1324039311,"answer_id":8534309,"question_id":8534178,"body_markdown":"You may assign `&#39;\\u0000&#39;` (or 0).\r\nFor this purpose, use [`Character.MIN_VALUE`][1].\r\n\r\n    Character ch = Character.MIN_VALUE;\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Character.html#MIN_VALUE","title":"How to represent empty char in Java Character class","body":"<p>You may assign <code>'\\u0000'</code> (or 0).\nFor this purpose, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Character.html#MIN_VALUE\"><code>Character.MIN_VALUE</code></a>.</p>\n\n<pre><code>Character ch = Character.MIN_VALUE;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1324039471,"creation_date":1324039471,"answer_id":8534338,"question_id":8534178,"body_markdown":"You can&#39;t. &quot;&quot; is the literal for a string, which contains *no* characters. It does not contain the &quot;empty character&quot; (whatever you mean by that).","title":"How to represent empty char in Java Character class","body":"<p>You can't. \"\" is the literal for a string, which contains <em>no</em> characters. It does not contain the \"empty character\" (whatever you mean by that).</p>\n"},{"comments":[{"owner":{"account_id":248873,"reputation":787,"user_id":524529,"display_name":"Chris Hatton"},"score":5,"creation_date":1406949655,"post_id":8534372,"comment_id":39042371,"body_markdown":"This is a correct solution and should be the accepted answer.","body":"This is a correct solution and should be the accepted answer."},{"owner":{"account_id":465067,"reputation":659,"user_id":868931,"accept_rate":40,"display_name":"Elyess Abouda"},"score":2,"creation_date":1412584685,"post_id":8534372,"comment_id":41107493,"body_markdown":"Although this does not answer the OP, it&#39;s what I was looking for.","body":"Although this does not answer the OP, it&#39;s what I was looking for."},{"owner":{"account_id":3566319,"reputation":422,"user_id":2977747,"accept_rate":70,"display_name":"Colin P. Hill"},"score":3,"creation_date":1422285653,"post_id":8534372,"comment_id":44677418,"body_markdown":"The MOST correct answer is &quot;it cannot be done&quot;. This is the nearest you can get.","body":"The MOST correct answer is &quot;it cannot be done&quot;. This is the nearest you can get."},{"owner":{"account_id":2999741,"reputation":1091,"user_id":2545439,"display_name":"Pieter De Bie"},"score":3,"creation_date":1484654520,"post_id":8534372,"comment_id":70588978,"body_markdown":"Character is, but char isn&#39;t.","body":"Character is, but char isn&#39;t."},{"owner":{"account_id":231117,"reputation":8541,"user_id":495157,"accept_rate":40,"display_name":"JGFMK"},"score":1,"creation_date":1634112906,"post_id":8534372,"comment_id":122935824,"body_markdown":"LOL: I have Java throwing a null pointer exception when I assign null to Character","body":"LOL: I have Java throwing a null pointer exception when I assign null to Character"},{"owner":{"account_id":231117,"reputation":8541,"user_id":495157,"accept_rate":40,"display_name":"JGFMK"},"score":0,"creation_date":1634113285,"post_id":8534372,"comment_id":122935954,"body_markdown":"https://stackoverflow.com/questions/69552017/why-does-this-code-give-a-null-pointer-exception-i-thought-character-class-coul","body":"<a href=\"https://stackoverflow.com/questions/69552017/why-does-this-code-give-a-null-pointer-exception-i-thought-character-class-coul\" title=\"why does this code give a null pointer exception i thought character class coul\">stackoverflow.com/questions/69552017/&hellip;</a>"}],"tags":[],"owner":{"account_id":429398,"reputation":3457,"user_id":812272,"accept_rate":85,"display_name":"user3001"},"comment_count":6,"down_vote_count":1,"up_vote_count":46,"is_accepted":false,"score":45,"last_activity_date":1412589687,"creation_date":1324039639,"answer_id":8534372,"question_id":8534178,"body_markdown":"As Character is a class deriving from Object, you can assign null as &quot;instance&quot;:\r\n\r\n    Character myChar = null;\r\n\r\nProblem solved ;)","title":"How to represent empty char in Java Character class","body":"<p>As Character is a class deriving from Object, you can assign null as \"instance\":</p>\n\n<pre><code>Character myChar = null;\n</code></pre>\n\n<p>Problem solved ;)</p>\n"},{"comments":[{"owner":{"account_id":181983,"reputation":22075,"user_id":416369,"accept_rate":29,"display_name":"sactiw"},"score":0,"creation_date":1514460316,"post_id":8534422,"comment_id":82981378,"body_markdown":"Apart from replace() solution other two will replace just the first occurrence of the character and not all.","body":"Apart from replace() solution other two will replace just the first occurrence of the character and not all."}],"tags":[],"owner":{"account_id":43453,"reputation":16185,"user_id":127035,"accept_rate":71,"display_name":"ewan.chalmers"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1324041525,"creation_date":1324039936,"answer_id":8534422,"question_id":8534178,"body_markdown":"An empty String is a wrapper on a `char[]` with no elements. You can have an empty `char[]`. But you cannot have an &quot;empty&quot; `char`. Like other primitives, a `char` has to have a value.\r\n\r\nYou say you want to &quot;replace a character without leaving a space&quot;.\r\n\r\nIf you are dealing with a `char[]`, then you would create a new `char[]` with that element removed.\r\n\r\nIf you are dealing with a `String`, then you would create a new `String` (String is immutable) with the character removed.\r\n\r\nHere are some samples of how you could remove a char:\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\t\r\n\t\tString s = &quot;abcdefg&quot;;\r\n\t\tint index = s.indexOf(&#39;d&#39;);\r\n\t\t\r\n\t\t// delete a char from a char[]\r\n\t\tchar[] array = s.toCharArray();\r\n\t\tchar[] tmp = new char[array.length-1];\r\n\t\tSystem.arraycopy(array, 0, tmp, 0, index);\r\n\t\tSystem.arraycopy(array, index+1, tmp, index, tmp.length-index);\r\n\t\tSystem.err.println(new String(tmp));\r\n\r\n\t\t// delete a char from a String using replace\r\n\t\tString s1 = s.replace(&quot;d&quot;, &quot;&quot;);\r\n\t\tSystem.err.println(s1);\r\n\t\t\r\n\t\t// delete a char from a String using StringBuilder\r\n\t\tStringBuilder sb = new StringBuilder(s);\r\n\t\tsb.deleteCharAt(index);\r\n\t\ts1 = sb.toString();\r\n\t\tSystem.err.println(s1);\r\n\t\t\r\n\t}\r\n\r\n","title":"How to represent empty char in Java Character class","body":"<p>An empty String is a wrapper on a <code>char[]</code> with no elements. You can have an empty <code>char[]</code>. But you cannot have an \"empty\" <code>char</code>. Like other primitives, a <code>char</code> has to have a value.</p>\n\n<p>You say you want to \"replace a character without leaving a space\".</p>\n\n<p>If you are dealing with a <code>char[]</code>, then you would create a new <code>char[]</code> with that element removed.</p>\n\n<p>If you are dealing with a <code>String</code>, then you would create a new <code>String</code> (String is immutable) with the character removed.</p>\n\n<p>Here are some samples of how you could remove a char:</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n\n    String s = \"abcdefg\";\n    int index = s.indexOf('d');\n\n    // delete a char from a char[]\n    char[] array = s.toCharArray();\n    char[] tmp = new char[array.length-1];\n    System.arraycopy(array, 0, tmp, 0, index);\n    System.arraycopy(array, index+1, tmp, index, tmp.length-index);\n    System.err.println(new String(tmp));\n\n    // delete a char from a String using replace\n    String s1 = s.replace(\"d\", \"\");\n    System.err.println(s1);\n\n    // delete a char from a String using StringBuilder\n    StringBuilder sb = new StringBuilder(s);\n    sb.deleteCharAt(index);\n    s1 = sb.toString();\n    System.err.println(s1);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3181881,"reputation":81,"user_id":2688394,"display_name":"user2688394"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1402840024,"creation_date":1402840024,"answer_id":24230224,"question_id":8534178,"body_markdown":"If you want to replace a character in a String without leaving any empty space then you can achieve this by using StringBuilder. String is immutable object in java,you can not modify it.\r\n\r\n    String str = &quot;Hello&quot;;\r\n    StringBuilder sb = new StringBuilder(str);\r\n    sb.deleteCharAt(1); // to replace e character","title":"How to represent empty char in Java Character class","body":"<p>If you want to replace a character in a String without leaving any empty space then you can achieve this by using StringBuilder. String is immutable object in java,you can not modify it.</p>\n\n<pre><code>String str = \"Hello\";\nStringBuilder sb = new StringBuilder(str);\nsb.deleteCharAt(1); // to replace e character\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3566319,"reputation":422,"user_id":2977747,"accept_rate":70,"display_name":"Colin P. Hill"},"score":25,"creation_date":1424102245,"post_id":24230273,"comment_id":45403854,"body_markdown":"Three years after the fact, someone finally gave a correct and complete answer.","body":"Three years after the fact, someone finally gave a correct and complete answer."},{"owner":{"account_id":8341524,"reputation":697,"user_id":6266706,"display_name":"Edgar Asatryan"},"score":2,"creation_date":1559832373,"post_id":24230273,"comment_id":99550452,"body_markdown":"This is a very accurate answer.","body":"This is a very accurate answer."}],"tags":[],"owner":{"account_id":1827467,"reputation":4043,"user_id":1659790,"accept_rate":73,"display_name":"Jimmy T."},"comment_count":2,"down_vote_count":0,"up_vote_count":131,"is_accepted":false,"score":131,"last_activity_date":1402840364,"creation_date":1402840364,"answer_id":24230273,"question_id":8534178,"body_markdown":"`char` means exactly one character. You can&#39;t assign zero characters to this type.\r\n\r\nThat means that there is no char value for which `String.replace(char, char)` would return a string with a diffrent length.","title":"How to represent empty char in Java Character class","body":"<p><code>char</code> means exactly one character. You can't assign zero characters to this type.</p>\n\n<p>That means that there is no char value for which <code>String.replace(char, char)</code> would return a string with a diffrent length.</p>\n"},{"comments":[{"owner":{"account_id":3315462,"reputation":454,"user_id":2787953,"display_name":"Scre"},"score":0,"creation_date":1540579508,"post_id":31693423,"comment_id":92932819,"body_markdown":"xD ... amusing things will result if trying to use thus mangled (yes, mangled, mauled, disfigured) string as part of e.g. file name.","body":"xD ... amusing things will result if trying to use thus mangled (yes, mangled, mauled, disfigured) string as part of e.g. file name."}],"tags":[],"owner":{"account_id":6701934,"reputation":1,"user_id":5168132,"display_name":"Kevin Silva"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438154431,"creation_date":1438153408,"answer_id":31693423,"question_id":8534178,"body_markdown":"Use the `\\b` operator (the backspace escape operator) in the second parameter\r\n\r\n    String test= &quot;Anna Banana&quot;;\r\n    \r\n    System.out.println(test); //returns Anna Banana&lt;br&gt;&lt;br&gt;\r\n    System.out.println(test.replaceAll(&quot; &quot;,&quot;\\b&quot;)); //returns AnnaBanana removing all the spaces in the string","title":"How to represent empty char in Java Character class","body":"<p>Use the <code>\\b</code> operator (the backspace escape operator) in the second parameter</p>\n\n<pre><code>String test= \"Anna Banana\";\n\nSystem.out.println(test); //returns Anna Banana&lt;br&gt;&lt;br&gt;\nSystem.out.println(test.replaceAll(\" \",\"\\b\")); //returns AnnaBanana removing all the spaces in the string\n</code></pre>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1569292089,"post_id":33510074,"comment_id":102539940,"body_markdown":"That&#39;s not an empty character.  It is a zero length character array.","body":"That&#39;s not an empty character.  It is a zero length character array."}],"tags":[],"owner":{"account_id":3666831,"reputation":61,"user_id":3055036,"display_name":"dukekosy"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1446588775,"creation_date":1446588775,"answer_id":33510074,"question_id":8534178,"body_markdown":"this is how I do it.\r\n\r\n    char[] myEmptyCharArray = &quot;&quot;.toCharArray();","title":"How to represent empty char in Java Character class","body":"<p>this is how I do it.</p>\n\n<pre><code>char[] myEmptyCharArray = \"\".toCharArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6924913,"reputation":41,"user_id":5316257,"display_name":"H&#252;seyin Burhan &#214;ZKAN"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1456323056,"creation_date":1456321875,"answer_id":35604044,"question_id":8534178,"body_markdown":"    char ch = Character.MIN_VALUE;\r\n\r\nThe code above will initialize the variable `ch` with the minimum value that a char can have (i.e. `\\u0000`).","title":"How to represent empty char in Java Character class","body":"<pre><code>char ch = Character.MIN_VALUE;\n</code></pre>\n\n<p>The code above will initialize the variable <code>ch</code> with the minimum value that a char can have (i.e. <code>\\u0000</code>).</p>\n"},{"tags":[],"owner":{"account_id":181983,"reputation":22075,"user_id":416369,"accept_rate":29,"display_name":"sactiw"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1514460015,"creation_date":1465314026,"answer_id":37683750,"question_id":8534178,"body_markdown":"In java there is nothing as *empty character literal*, in other words, &#39;&#39; has no meaning unlike &quot;&quot; which means a *empty String literal*\r\n\r\nThe closest you can go about representing empty character literal is through zero length char[], something like:\r\n\r\n    char[] cArr = {};         // cArr is a zero length array\r\n    char[] cArr = new char[0] // this does the same\r\n\r\nIf you refer to String class its default constructor creates a empty character sequence using `new char[0]`\r\n\r\nAlso, using Character.MIN_VALUE is not correct because it is not really empty character rather smallest value of type character.\r\n \r\nI also don&#39;t like `Character c = null;` as a solution mainly because jvm will throw NPE if it tries to un-box it. Secondly, null is basically a reference to nothing w.r.t reference type and here we are dealing with primitive type which don&#39;t accept null as a possible value.\r\n\r\nAssuming that in the string, say str, OP wants to replace all occurrences of a character, say &#39;x&#39;, with empty character &#39;&#39;, then try using:\r\n\r\n    str.replace(&quot;x&quot;, &quot;&quot;);","title":"How to represent empty char in Java Character class","body":"<p>In java there is nothing as <em>empty character literal</em>, in other words, '' has no meaning unlike \"\" which means a <em>empty String literal</em></p>\n\n<p>The closest you can go about representing empty character literal is through zero length char[], something like:</p>\n\n<pre><code>char[] cArr = {};         // cArr is a zero length array\nchar[] cArr = new char[0] // this does the same\n</code></pre>\n\n<p>If you refer to String class its default constructor creates a empty character sequence using <code>new char[0]</code></p>\n\n<p>Also, using Character.MIN_VALUE is not correct because it is not really empty character rather smallest value of type character.</p>\n\n<p>I also don't like <code>Character c = null;</code> as a solution mainly because jvm will throw NPE if it tries to un-box it. Secondly, null is basically a reference to nothing w.r.t reference type and here we are dealing with primitive type which don't accept null as a possible value.</p>\n\n<p>Assuming that in the string, say str, OP wants to replace all occurrences of a character, say 'x', with empty character '', then try using:</p>\n\n<pre><code>str.replace(\"x\", \"\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2567288,"reputation":20415,"user_id":2226988,"display_name":"Tom Blodget"},"score":2,"creation_date":1510691337,"post_id":47293407,"comment_id":81540256,"body_markdown":"0 as a UTF-16 code unit (`char`) is the complete UTF-16 encoding for the Unicode codepoint U+0000. Any similarity to some other character set or character encoding is irrelevant. UTF-16 is what Java uses.","body":"0 as a UTF-16 code unit (<code>char</code>) is the complete UTF-16 encoding for the Unicode codepoint U+0000. Any similarity to some other character set or character encoding is irrelevant. UTF-16 is what Java uses."}],"tags":[],"owner":{"account_id":8635044,"reputation":241,"user_id":7174605,"display_name":"Thomas"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1510686161,"creation_date":1510686161,"answer_id":47293407,"question_id":8534178,"body_markdown":"As `chars` can be represented as Integers (ASCII-Codes), you can simply write:\r\n\r\n    char c = 0;\r\nThe 0 in ASCII-Code is `null`.","title":"How to represent empty char in Java Character class","body":"<p>As <code>chars</code> can be represented as Integers (ASCII-Codes), you can simply write:</p>\n\n<pre><code>char c = 0;\n</code></pre>\n\n<p>The 0 in ASCII-Code is <code>null</code>.</p>\n"},{"tags":[],"owner":{"account_id":4911554,"reputation":13237,"user_id":3956731,"accept_rate":95,"display_name":"KayV"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537445710,"creation_date":1537445710,"answer_id":52424982,"question_id":8534178,"body_markdown":"You can do something like this:\r\n\r\n    mystring.replace(&quot;&quot;+ch, &quot;&quot;);","title":"How to represent empty char in Java Character class","body":"<p>You can do something like this:</p>\n\n<pre><code>mystring.replace(\"\"+ch, \"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14398888,"reputation":145,"user_id":10401248,"display_name":"Emeka Onwuliri"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1537645851,"creation_date":1537634454,"answer_id":52458723,"question_id":8534178,"body_markdown":"I was looking for this. Simply set the `char c = 0;` and it works perfectly. Try it.\r\n\r\nFor example, if you are trying to remove duplicate characters from a String , one way would be to convert the string to char array and store in a hashset of characters which would automatically prevent duplicates.\r\n\r\nAnother way, however, will be to convert the string to a char array, use two  for-loops and compare each character with the rest of the string/char array (a Big O on N^2 activity), then for each duplicate found just set that char to 0..\r\n\r\n...and use `new String(char[])` to convert the resulting char array to string and then sysout to print (this is all java btw). you will observe all chars set to zero are simply not there and all duplicates are gone. long post, but just wanted to give you an example.\r\n\r\n so yes set `char c = 0;` or if for char array, set `cArray[i]=0` for that specific duplicate character and you will have removed it.","title":"How to represent empty char in Java Character class","body":"<p>I was looking for this. Simply set the <code>char c = 0;</code> and it works perfectly. Try it.</p>\n\n<p>For example, if you are trying to remove duplicate characters from a String , one way would be to convert the string to char array and store in a hashset of characters which would automatically prevent duplicates.</p>\n\n<p>Another way, however, will be to convert the string to a char array, use two  for-loops and compare each character with the rest of the string/char array (a Big O on N^2 activity), then for each duplicate found just set that char to 0..</p>\n\n<p>...and use <code>new String(char[])</code> to convert the resulting char array to string and then sysout to print (this is all java btw). you will observe all chars set to zero are simply not there and all duplicates are gone. long post, but just wanted to give you an example.</p>\n\n<p>so yes set <code>char c = 0;</code> or if for char array, set <code>cArray[i]=0</code> for that specific duplicate character and you will have removed it.</p>\n"},{"tags":[],"owner":{"account_id":8197071,"reputation":61,"user_id":6169550,"display_name":"Stefanidis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604381393,"creation_date":1604381393,"answer_id":64657245,"question_id":8534178,"body_markdown":"String before = EMPTY_SPACE+TAB+&quot;word&quot;+TAB+EMPTY_SPACE\r\n\r\nWhere \r\nEMPTY_SPACE = &quot; &quot;  (this is String)\r\nTAB         = &#39;\\t&#39; (this is Character)\r\n\r\nString after = before.replaceAll(&quot; &quot;, &quot;&quot;).replace(&#39;\\t&#39;, &#39;\\0&#39;)\r\nmeans\r\nafter = &quot;word&quot;","title":"How to represent empty char in Java Character class","body":"<p>String before = EMPTY_SPACE+TAB+&quot;word&quot;+TAB+EMPTY_SPACE</p>\n<p>Where\nEMPTY_SPACE = &quot; &quot;  (this is String)\nTAB         = '\\t' (this is Character)</p>\n<p>String after = before.replaceAll(&quot; &quot;, &quot;&quot;).replace('\\t', '\\0')\nmeans\nafter = &quot;word&quot;</p>\n"},{"tags":[],"owner":{"account_id":6947828,"reputation":2546,"user_id":5331566,"accept_rate":88,"display_name":"Shaon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678881706,"creation_date":1678881706,"answer_id":75744436,"question_id":8534178,"body_markdown":"In Kotlin, using below code solved my problem.\r\n\r\n    Char.MIN_VALUE","title":"How to represent empty char in Java Character class","body":"<p>In Kotlin, using below code solved my problem.</p>\n<pre><code>Char.MIN_VALUE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6428583,"reputation":6399,"user_id":4982691,"display_name":"jumping_monkey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701351009,"creation_date":1701350319,"answer_id":77578773,"question_id":8534178,"body_markdown":"The highest voted answer does **NOT** represent an empty char, it is still a character, to be more precise a **CONTROL** character which can be represented by:\r\n\r\n    Character ascii = 0; // ASCII\r\n    Character unicode = &#39;\\u0000&#39;; //UTF-16, which is also what Java use\r\n    Character min = Character.MIN_VALUE;\r\n\r\n### The [Null character](https://en.wikipedia.org/wiki/Null_character) (The important bits)\r\n\r\n&gt; The null character (also null terminator) is a control character with\r\n&gt; the value zero.[1][2][3][4] It is present in many character sets,\r\n&gt; including those defined by the Baudot and ITA2 codes, ISO/IEC 646 (or\r\n&gt; ASCII), the C0 control code, the Universal Coded Character Set (or\r\n&gt; Unicode), and EBCDIC. It is available in nearly all mainstream\r\n&gt; programming languages.[5] It is often abbreviated as NUL (or NULL,\r\n&gt; though in some contexts that term is used for the null pointer). In\r\n&gt; 8-bit codes, it is known as a null byte.\r\n&gt; \r\n&gt; Today the character has much more significance in the programming\r\n&gt; language C and its derivatives and in many data formats, where it\r\n&gt; serves as a reserved character used to signify the end of a string,[6]\r\n&gt; often called a null-terminated string.[7] This allows the string to be\r\n&gt; any length with only the overhead of one byte;\r\n\r\n### [char](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)&lt;br&gt;\r\n\r\n&gt; The char data type is a **single 16-bit Unicode character**. It has a\r\n&gt; minimum value of &#39;\\u0000&#39; (or 0) and a maximum value of &#39;\\uffff&#39; (or\r\n&gt; 65,535 inclusive).\r\n\r\n### [Character](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Character.html)&lt;br&gt;\r\n\r\n&gt; The Character class wraps a value of the primitive type char in an\r\n&gt; object. An object of class Character contains a single field whose\r\n&gt; type is char. In addition, this class provides a large number of\r\n&gt; static methods for determining a character&#39;s category (lowercase\r\n&gt; letter, digit, etc.) and for converting characters from uppercase to\r\n&gt; lowercase and vice versa.\r\n\r\nIn a nutshell, in Java, there is no empty character literal.\r\n\r\n\r\n","title":"How to represent empty char in Java Character class","body":"<p>The highest voted answer does <strong>NOT</strong> represent an empty char, it is still a character, to be more precise a <strong>CONTROL</strong> character which can be represented by:</p>\n<pre><code>Character ascii = 0; // ASCII\nCharacter unicode = '\\u0000'; //UTF-16, which is also what Java use\nCharacter min = Character.MIN_VALUE;\n</code></pre>\n<h3>The <a href=\"https://en.wikipedia.org/wiki/Null_character\" rel=\"nofollow noreferrer\">Null character</a> (The important bits)</h3>\n<blockquote>\n<p>The null character (also null terminator) is a control character with\nthe value zero.[1][2][3][4] It is present in many character sets,\nincluding those defined by the Baudot and ITA2 codes, ISO/IEC 646 (or\nASCII), the C0 control code, the Universal Coded Character Set (or\nUnicode), and EBCDIC. It is available in nearly all mainstream\nprogramming languages.[5] It is often abbreviated as NUL (or NULL,\nthough in some contexts that term is used for the null pointer). In\n8-bit codes, it is known as a null byte.</p>\n<p>Today the character has much more significance in the programming\nlanguage C and its derivatives and in many data formats, where it\nserves as a reserved character used to signify the end of a string,[6]\noften called a null-terminated string.[7] This allows the string to be\nany length with only the overhead of one byte;</p>\n</blockquote>\n<h3><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">char</a><br></h3>\n<blockquote>\n<p>The char data type is a <strong>single 16-bit Unicode character</strong>. It has a\nminimum value of '\\u0000' (or 0) and a maximum value of '\\uffff' (or\n65,535 inclusive).</p>\n</blockquote>\n<h3><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Character.html\" rel=\"nofollow noreferrer\">Character</a><br></h3>\n<blockquote>\n<p>The Character class wraps a value of the primitive type char in an\nobject. An object of class Character contains a single field whose\ntype is char. In addition, this class provides a large number of\nstatic methods for determining a character's category (lowercase\nletter, digit, etc.) and for converting characters from uppercase to\nlowercase and vice versa.</p>\n</blockquote>\n<p>In a nutshell, in Java, there is no empty character literal.</p>\n"}],"owner":{"account_id":1108791,"reputation":2741,"user_id":1099638,"accept_rate":20,"display_name":"rahulsri"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":415663,"favorite_count":0,"down_vote_count":3,"up_vote_count":164,"answer_count":17,"score":161,"last_activity_date":1701351009,"creation_date":1324038669,"question_id":8534178,"body_markdown":"I want to represent an empty character in Java as  `&quot;&quot;` in String...\r\n\r\nLike that `char ch = an empty character;`\r\n\r\nActually I want to replace a character without leaving space. \r\n\r\nI think it might be sufficient to understand what this means: no character not even space. \r\n","title":"How to represent empty char in Java Character class","body":"<p>I want to represent an empty character in Java as  <code>\"\"</code> in String...</p>\n\n<p>Like that <code>char ch = an empty character;</code></p>\n\n<p>Actually I want to replace a character without leaving space. </p>\n\n<p>I think it might be sufficient to understand what this means: no character not even space. </p>\n"},{"tags":["java","unit-testing","mocking","mockito","junit5"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1701357149,"post_id":77577959,"comment_id":136767821,"body_markdown":"`@BeforeAll` is only executed _once_ for your test _class_. `@Mock` fields are reassigned for every test _method_. `mockedInstanceReference` isn&#39;t a field, it&#39;s a local variable. IIRC `mockStatic` returns an AutoClosable and is only valid for the current thread.","body":"<code>@BeforeAll</code> is only executed <i>once</i> for your test <i>class</i>. <code>@Mock</code> fields are reassigned for every test <i>method</i>. <code>mockedInstanceReference</code> isn&#39;t a field, it&#39;s a local variable. IIRC <code>mockStatic</code> returns an AutoClosable and is only valid for the current thread."},{"owner":{"account_id":11514885,"reputation":631,"user_id":8438513,"accept_rate":70,"display_name":"HowToTellAChild"},"score":0,"creation_date":1701376135,"post_id":77577959,"comment_id":136771337,"body_markdown":"I didn&#39;t really get the connection between your thoughts and my issue. Could you pls elaborate them in details?","body":"I didn&#39;t really get the connection between your thoughts and my issue. Could you pls elaborate them in details?"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1701376367,"post_id":77577959,"comment_id":136771374,"body_markdown":"You asked what the order between BeforeAll and Mock is and I told you. `@BeforeAll` runs once for the class, `@Mock` fields are reassigned for every test method.","body":"You asked what the order between BeforeAll and Mock is and I told you. <code>@BeforeAll</code> runs once for the class, <code>@Mock</code> fields are reassigned for every test method."}],"answers":[{"comments":[{"owner":{"account_id":5702551,"reputation":518,"user_id":4507102,"display_name":"Tejas Unnikrishnan"},"score":0,"creation_date":1701401918,"post_id":77578796,"comment_id":136773997,"body_markdown":"This is not the answer.","body":"This is not the answer."}],"tags":[],"owner":{"account_id":5570527,"reputation":1,"user_id":4416045,"display_name":"IDDQD"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1701350470,"creation_date":1701350470,"answer_id":77578796,"question_id":77577959,"body_markdown":"It is because you are using the wrong version of junit. Downgrade it to juit 4 and it will work.","title":"Field with @Mock annotation initialize vs. @BeforeAll","body":"<p>It is because you are using the wrong version of junit. Downgrade it to juit 4 and it will work.</p>\n"}],"owner":{"account_id":11514885,"reputation":631,"user_id":8438513,"accept_rate":70,"display_name":"HowToTellAChild"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701350470,"creation_date":1701342825,"question_id":77577959,"body_markdown":"I have the following static mocking settings:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    TestClass{\r\n    \r\n    @Mock\r\n    private static ClassB classBInstance;\r\n    \r\n    \t@BeforeAll\r\n    \tstatic void setup(){\r\n    \t\tMockedStatic&lt;ClassA&gt; mockedStatic = mockStatic(ClassA.class);\r\n    \t\t\t\tmockedStatic.when(() -&gt; ClassA.someMethod(ClassB.class)).thenReturn(classBInstance);\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tvoid testMethod(){\r\n    \t\tvar mockedInstanceReference = ClassA.someMethod(ClassB.class);\r\n    \t}\r\n    \r\n    }\r\n\r\nAnd here I am getting a null reference at *mockedInstanceReference*  field. But in this configuration:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    TestClass{\r\n    \t@Mock\r\n    \tprivate static ClassB classBInstance;\r\n    \r\n    \t\t@Test\r\n    \t\tvoid testMethod(){\r\n    \t\t\tMockedStatic&lt;ClassA&gt; mockedStatic = mockStatic(ClassA.class);\r\n    \t\t\t\t\tmockedStatic.when(() -&gt; ClassA.someMethod(ClassB.class)).thenReturn(classBInstance);\r\n    \t\t\tvar mockedInstanceReference = ClassA.someMethod(ClassB.class);\r\n    \t\t}\r\n    \r\n    }\r\n\r\nI have no problem, I am getting he proper mocked reference. My question is:. Why? What is the order between @BerforeAll annotation processing and @Mock field initialisation in junit 5?","title":"Field with @Mock annotation initialize vs. @BeforeAll","body":"<p>I have the following static mocking settings:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nTestClass{\n\n@Mock\nprivate static ClassB classBInstance;\n\n    @BeforeAll\n    static void setup(){\n        MockedStatic&lt;ClassA&gt; mockedStatic = mockStatic(ClassA.class);\n                mockedStatic.when(() -&gt; ClassA.someMethod(ClassB.class)).thenReturn(classBInstance);\n    }\n\n    @Test\n    void testMethod(){\n        var mockedInstanceReference = ClassA.someMethod(ClassB.class);\n    }\n\n}\n</code></pre>\n<p>And here I am getting a null reference at <em>mockedInstanceReference</em>  field. But in this configuration:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nTestClass{\n    @Mock\n    private static ClassB classBInstance;\n\n        @Test\n        void testMethod(){\n            MockedStatic&lt;ClassA&gt; mockedStatic = mockStatic(ClassA.class);\n                    mockedStatic.when(() -&gt; ClassA.someMethod(ClassB.class)).thenReturn(classBInstance);\n            var mockedInstanceReference = ClassA.someMethod(ClassB.class);\n        }\n\n}\n</code></pre>\n<p>I have no problem, I am getting he proper mocked reference. My question is:. Why? What is the order between @BerforeAll annotation processing and @Mock field initialisation in junit 5?</p>\n"},{"tags":["java","data-structures","linked-list"],"comments":[{"owner":{"account_id":1031279,"reputation":7717,"user_id":1039555,"accept_rate":56,"display_name":"Kartik"},"score":1,"creation_date":1550793472,"post_id":54818051,"comment_id":96412149,"body_markdown":"[`LinkedHashMap`](https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html)","body":"<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html\" rel=\"nofollow noreferrer\"><code>LinkedHashMap</code></a>"},{"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"score":0,"creation_date":1550794031,"post_id":54818051,"comment_id":96412246,"body_markdown":"A linked list is a terrible data structure for doing efficient searches and for keeping it sorted, there are better alternatives.","body":"A linked list is a terrible data structure for doing efficient searches and for keeping it sorted, there are better alternatives."},{"owner":{"account_id":1031279,"reputation":7717,"user_id":1039555,"accept_rate":56,"display_name":"Kartik"},"score":0,"creation_date":1550794305,"post_id":54818051,"comment_id":96412293,"body_markdown":"@&#211;scarL&#243;pez The OP wrote *sortable* not *sorted*. Also, if I understood correctly, they need to store a mapping medication-&gt;indications.","body":"@&#211;scarL&#243;pez The OP wrote <i>sortable</i> not <i>sorted</i>. Also, if I understood correctly, they need to store a mapping medication-&gt;indications."},{"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"score":0,"creation_date":1550819825,"post_id":54818051,"comment_id":96418612,"body_markdown":"@Kartik whats more sortable that something that is sorted all the time? :p Also, I think were interpreting the question differently. In my understanding, hes sorting using two criteria: med, indication. I hope OP clarifies this, its confusing because he talks about lists but is using a hash set.","body":"@Kartik whats more sortable that something that is sorted all the time? :p Also, I think were interpreting the question differently. In my understanding, hes sorting using two criteria: med, indication. I hope OP clarifies this, its confusing because he talks about lists but is using a hash set."}],"answers":[{"comments":[{"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"score":1,"creation_date":1550819460,"post_id":54818086,"comment_id":96418454,"body_markdown":"OP was already using a hash set, so Im assuming hes fine with not having dups. We dont even know why he mentioned lists when a set was in use.","body":"OP was already using a hash set, so Im assuming hes fine with not having dups. We dont even know why he mentioned lists when a set was in use."}],"tags":[],"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1550793627,"creation_date":1550793627,"answer_id":54818086,"question_id":54818051,"body_markdown":"Although it&#39;s a _tree_ not a list, a [`TreeSet`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html) meets the requirements of being sorted, efficiently `O(log(n))` searchable and you can get [subsets](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html#subSet(E,E)) out of it. It&#39;ll be better if you declare it as a [`SortedSet`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/SortedSet.html).","title":"Data structure for linked list","body":"<p>Although it's a <em>tree</em> not a list, a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html\" rel=\"nofollow noreferrer\"><code>TreeSet</code></a> meets the requirements of being sorted, efficiently <code>O(log(n))</code> searchable and you can get <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html#subSet(E,E)\" rel=\"nofollow noreferrer\">subsets</a> out of it. It'll be better if you declare it as a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/SortedSet.html\" rel=\"nofollow noreferrer\"><code>SortedSet</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":24801,"reputation":15286,"user_id":63293,"accept_rate":50,"display_name":"Peter Walser"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550793777,"creation_date":1550793777,"answer_id":54818097,"question_id":54818051,"body_markdown":"[TreeSet][1] is a sorted set of items:\r\n\r\n&gt; A NavigableSet implementation based on a TreeMap. The elements are\r\n&gt; ordered using their natural ordering, or by a Comparator provided at\r\n&gt; set creation time, depending on which constructor is used.\r\n\r\nFor searching, filtering, mapping, subset creation etc. I recommend using the **Java Stream API**.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html","title":"Data structure for linked list","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html\" rel=\"nofollow noreferrer\">TreeSet</a> is a sorted set of items:</p>\n\n<blockquote>\n  <p>A NavigableSet implementation based on a TreeMap. The elements are\n  ordered using their natural ordering, or by a Comparator provided at\n  set creation time, depending on which constructor is used.</p>\n</blockquote>\n\n<p>For searching, filtering, mapping, subset creation etc. I recommend using the <strong>Java Stream API</strong>.</p>\n"},{"tags":[],"owner":{"account_id":10133240,"reputation":493,"user_id":7485801,"display_name":"Zayn Korai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550794437,"creation_date":1550794437,"answer_id":54818160,"question_id":54818051,"body_markdown":"The **SortedSet** interface provides functionalities to keep the elements sorted. And the **NavigableSet** interface provides functionalities to navigate through the **SortedSet**. \r\n\r\nSince the [TreeSet][1] class implements **NavigableSet** interface, it has the functionalities of both - the NavigableSet as well as the **SortedSet**. The TreeSet uses a self-balancing binary search tree, more specifically a Red-Black tree.\r\n\r\nThe contains() method is used to check if a given element is present in a given TreeSet. If the element is found, it returns true, otherwise false.\r\n\r\n\r\n[1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html\r\n","title":"Data structure for linked list","body":"<p>The <strong>SortedSet</strong> interface provides functionalities to keep the elements sorted. And the <strong>NavigableSet</strong> interface provides functionalities to navigate through the <strong>SortedSet</strong>. </p>\n\n<p>Since the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html\" rel=\"nofollow noreferrer\">TreeSet</a> class implements <strong>NavigableSet</strong> interface, it has the functionalities of both - the NavigableSet as well as the <strong>SortedSet</strong>. The TreeSet uses a self-balancing binary search tree, more specifically a Red-Black tree.</p>\n\n<p>The contains() method is used to check if a given element is present in a given TreeSet. If the element is found, it returns true, otherwise false.</p>\n"},{"tags":[],"owner":{"account_id":9150168,"reputation":162,"user_id":6805025,"accept_rate":75,"display_name":"akhileshcoer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550873185,"creation_date":1550873185,"answer_id":54835847,"question_id":54818051,"body_markdown":"[Use B+ tree.][1]\r\nIt is default sorted and efficient searches.\r\n\r\nInsertion however may need loops to keep it balanced.\r\n\r\n\r\n  [1]: https://www.javatpoint.com/b-plus-tree","title":"Data structure for linked list","body":"<p><a href=\"https://www.javatpoint.com/b-plus-tree\" rel=\"nofollow noreferrer\">Use B+ tree.</a>\nIt is default sorted and efficient searches.</p>\n\n<p>Insertion however may need loops to keep it balanced.</p>\n"},{"tags":[],"owner":{"account_id":14638025,"reputation":61,"user_id":10571514,"display_name":"Harishma A"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1550873832,"creation_date":1550873832,"answer_id":54835956,"question_id":54818051,"body_markdown":"\r\n\r\n Try using TreeMap&lt;String,String&gt; \r\n   \r\n   - stores key-value pairs in sorted(ascending) order.\r\n   - You can access the value using key\r\n   - Key can be &#39;Medication&#39;\r\n   - Value can be &#39;Indication&#39;\r\n\r\n","title":"Data structure for linked list","body":"<p>Try using TreeMap </p>\n\n<ul>\n<li>stores key-value pairs in sorted(ascending) order.</li>\n<li>You can access the value using key</li>\n<li>Key can be 'Medication'</li>\n<li>Value can be 'Indication'</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9931876,"reputation":85,"user_id":7351526,"display_name":"Fxguy1"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551368081,"creation_date":1551368081,"answer_id":54929212,"question_id":54818051,"body_markdown":"Thank you everyone! After a bit of experimentation with each of the suggestions, I was able to determine that a TreeMap was indeed the best solution. Since the treeMap contains Key-Value pairs, the Key in both maps serves as the &quot;link&quot; to maintain the relationship. Just make sure that if you add or delete an item from one Map you have to do the same to the corresponding Key in the other map. \r\n","title":"Data structure for linked list","body":"<p>Thank you everyone! After a bit of experimentation with each of the suggestions, I was able to determine that a TreeMap was indeed the best solution. Since the treeMap contains Key-Value pairs, the Key in both maps serves as the \"link\" to maintain the relationship. Just make sure that if you add or delete an item from one Map you have to do the same to the corresponding Key in the other map. </p>\n"}],"owner":{"account_id":9931876,"reputation":85,"user_id":7351526,"display_name":"Fxguy1"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54835956,"answer_count":6,"score":2,"last_activity_date":1701350413,"creation_date":1550793368,"question_id":54818051,"body_markdown":"What is the best way to keep a list of items that is sortable and searchable? I want to have a list of medication-indications that I want to keep in order like this:  \r\n&lt;p&gt;Medication            --------- Indication&lt;/p&gt;\r\n&lt;p&gt;lisinopril          --------- hypertension&lt;/p&gt;\r\n&lt;p&gt;amlodipine besylate --------- hypertension&lt;/p&gt;\r\n&lt;p&gt;amlodipine besylate\t--------- coronary artery disease (cad)&lt;/p&gt;\r\n&lt;p&gt;carvedilol\t\t    --------- hypertension&lt;/p&gt;\t\r\n&lt;p&gt;ciprofloxacin\t    --------- skin and skin structure infections&lt;/p&gt;\r\n&lt;p&gt;ciprofloxacin\t    --------- bone and joint infections&lt;/p&gt;\t\r\n\r\nNo matter what order, amlodipine besylate HAS to match hypertension. I need to be able to sort alphabetically. Then I need to be able to get subsets. So I need to be able to pull the indications for say ciprofloxacin and lisinopril and then search to see if hypertension is in that resulting list. \r\n\r\nHow can I do this? I have it currently as two separate hash sets. ","title":"Data structure for linked list","body":"<p>What is the best way to keep a list of items that is sortable and searchable? I want to have a list of medication-indications that I want to keep in order like this:  </p>\n\n<p>Medication            --------- Indication</p>\n\n<p>lisinopril          --------- hypertension</p>\n\n<p>amlodipine besylate --------- hypertension</p>\n\n<p>amlodipine besylate  --------- coronary artery disease (cad)</p>\n\n<p>carvedilol           --------- hypertension</p>  \n\n<p>ciprofloxacin        --------- skin and skin structure infections</p>\n\n<p>ciprofloxacin        --------- bone and joint infections</p> \n\n<p>No matter what order, amlodipine besylate HAS to match hypertension. I need to be able to sort alphabetically. Then I need to be able to get subsets. So I need to be able to pull the indications for say ciprofloxacin and lisinopril and then search to see if hypertension is in that resulting list. </p>\n\n<p>How can I do this? I have it currently as two separate hash sets. </p>\n"},{"tags":["java","spring-boot","spring-cloud-gateway"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701167140,"post_id":77563031,"comment_id":136738945,"body_markdown":"The first cod doesn&#39;t do anything, it only does something when you subscribe to it (which you don&#39;t). Adding `blockOptional` will subscribe and actually execute the code. As you mode the `WebClient.Builder` load balanced it will need the `RouteLocator`, but the `RouteLocatorProvider` is responsible for creating it as well. So a circular dependency.","body":"The first cod doesn&#39;t do anything, it only does something when you subscribe to it (which you don&#39;t). Adding <code>blockOptional</code> will subscribe and actually execute the code. As you mode the <code>WebClient.Builder</code> load balanced it will need the <code>RouteLocator</code>, but the <code>RouteLocatorProvider</code> is responsible for creating it as well. So a circular dependency."},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1701167256,"post_id":77563031,"comment_id":136738964,"body_markdown":"@M.Deinum thanks, but why does `WebClient.Builder` need a `RouteLocator`? Why does the fact that it&#39;s marked as `@LoadBalanced` necessitate it?","body":"@M.Deinum thanks, but why does <code>WebClient.Builder</code> need a <code>RouteLocator</code>? Why does the fact that it&#39;s marked as <code>@LoadBalanced</code> necessitate it?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701168513,"post_id":77563031,"comment_id":136739168,"body_markdown":"My bad it is a bit different. You are injecting the `RefreshScope` and as `RouteLocator` is refresh scoped that leads to the cycle. Instead you might want to try to use `ObjectProvider&lt;RefreshScope&gt;` instead or inject the `ApplicationContext` and retreive the `RefreshScope` when needed.","body":"My bad it is a bit different. You are injecting the <code>RefreshScope</code> and as <code>RouteLocator</code> is refresh scoped that leads to the cycle. Instead you might want to try to use <code>ObjectProvider&lt;RefreshScope&gt;</code> instead or inject the <code>ApplicationContext</code> and retreive the <code>RefreshScope</code> when needed."},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1701168940,"post_id":77563031,"comment_id":136739263,"body_markdown":"@M.Deinum if you meant changing to this `refreshScopeProvider.getIfAvailable().refresh(RouteLocator.class)`, it didn&#39;t help","body":"@M.Deinum if you meant changing to this <code>refreshScopeProvider.getIfAvailable().refresh(RouteLocator.c&zwnj;&#8203;lass)</code>, it didn&#39;t help"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701169062,"post_id":77563031,"comment_id":136739282,"body_markdown":"Which is probably due to the `@PostConstruct` triggering things too early.","body":"Which is probably due to the <code>@PostConstruct</code> triggering things too early."},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1701169591,"post_id":77563031,"comment_id":136739372,"body_markdown":"@M.Deinum I don&#39;t see how it triggers the `routeLocator()` method","body":"@M.Deinum I don&#39;t see how it triggers the <code>routeLocator()</code> method"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701170188,"post_id":77563031,"comment_id":136739457,"body_markdown":"It links it upon construction to the refreshscope, the `RouteLocator` is refresh scoped. SO for the `RefreshScope` to be able to be used it needs a routelocator. The main issue is the injection/dependency on `RefreshScope`.","body":"It links it upon construction to the refreshscope, the <code>RouteLocator</code> is refresh scoped. SO for the <code>RefreshScope</code> to be able to be used it needs a routelocator. The main issue is the injection/dependency on <code>RefreshScope</code>."},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1701170424,"post_id":77563031,"comment_id":136739494,"body_markdown":"@M.Deinum I removed the dependency, the problem stays the same","body":"@M.Deinum I removed the dependency, the problem stays the same"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701171163,"post_id":77563031,"comment_id":136739616,"body_markdown":"You need to remove the constructor argument, commenting the field and the field usage doesn&#39;t break the dependency.","body":"You need to remove the constructor argument, commenting the field and the field usage doesn&#39;t break the dependency."},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1701171838,"post_id":77563031,"comment_id":136739745,"body_markdown":"@M.Deinum `RefreshedScope` was used exactly three times: field declaration, constructor, `@PostConstruct`. I removed (commented out) all three usages and ran one more time","body":"@M.Deinum <code>RefreshedScope</code> was used exactly three times: field declaration, constructor, <code>@PostConstruct</code>. I removed (commented out) all three usages and ran one more time"},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1701189610,"post_id":77563031,"comment_id":136743285,"body_markdown":"*ran it one more time","body":"*ran it one more time"}],"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701349339,"creation_date":1701166647,"question_id":77563031,"body_markdown":"Here&#39;s a general idea: a custom `RouteLocatorProvider` collects all registered Eureka services, visits their Swagger endpoints, retrieves docs, maps them to routing functions and then builds a `RouteLocator`. I also want it to be refreshed on Eureka&#39;s `CacheRefreshedEvent`s. Sounds great (so dynamic), but I personally haven&#39;t yet achieved this goal. I have some circular dependency issue whose cause (and resolution) is not immediately clear to me\r\n```java\r\n@SpringBootApplication\r\npublic class ApiGatewayV2Application {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(ApiGatewayV2Application.class, args);\r\n    }\r\n}\r\n```\r\n```java\r\n@Configuration\r\n@ComponentScan(basePackages = &quot;by.afinny.apigateway&quot;)\r\npublic class RouteLocatorConfig {\r\n    @Bean\r\n    @RefreshScope\r\n    public RouteLocator routeLocator(RouteLocatorProvider routeLocatorProvider) {\r\n        return routeLocatorProvider.getRouteLocator();\r\n    }\r\n}\r\n```\r\n```java\r\n@Configuration\r\npublic class WebClientConfig {\r\n    @Bean\r\n    @LoadBalanced\r\n    public WebClient.Builder webClientBuilder() {\r\n        return WebClient.builder();\r\n    }\r\n}\r\n```\r\n```java\r\n@Component\r\n@Slf4j\r\npublic class RouteLocatorProvider {\r\n    public static final String LOAD_BALANCER_SCHEME = &quot;lb://&quot;;\r\n    public static final Duration DOC_RETRIEVAL_TIMEOUT = Duration.ofSeconds(10);\r\n    public static final String API_DOCS_PATH = &quot;/v3/api-docs&quot;;\r\n    private final EurekaClient eurekaClient;\r\n    private final WebClient.Builder webClientBuilder;\r\n    private final RouteLocatorBuilder routeLocatorBuilder;\r\n    private final OpenAPIV3Parser apiParser;\r\n    private final RefreshScope refreshScope;\r\n    @Getter\r\n    private RouteLocator routeLocator;\r\n\r\n    public RouteLocatorProvider(EurekaClient eurekaClient, WebClient.Builder webClientBuilder,\r\n                                RouteLocatorBuilder routeLocatorBuilder, RefreshScope refreshScope) {\r\n        this.eurekaClient = eurekaClient;\r\n        this.webClientBuilder = webClientBuilder;\r\n        this.routeLocatorBuilder = routeLocatorBuilder;\r\n        this.refreshScope = refreshScope;\r\n        this.apiParser = new OpenAPIV3Parser();\r\n    }\r\n\r\n    @PostConstruct\r\n    public void registerListener() {\r\n        refreshRoutings(); // get initial endpoints\r\n        eurekaClient.registerEventListener(event -&gt; { // refresh if Eureka refreshes\r\n            if (event instanceof CacheRefreshedEvent) {\r\n                refreshRoutings();\r\n                refreshScope.refresh(RouteLocator.class);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void refreshRoutings() {\r\n        log.info(&quot;Services discovery started.&quot;);\r\n        List&lt;Application&gt; applications = findOtherRegisteredApplications();\r\n        Map&lt;Application, SwaggerParseResult&gt; docs = mapToDocs(applications);\r\n        routeLocator = buildRouteLocatorFrom(docs);\r\n    }\r\n\r\n    // fine\r\n    private List&lt;Application&gt; findOtherRegisteredApplications() {\r\n        List&lt;Application&gt; applications;\r\n        applications = eurekaClient.getApplications()\r\n                .getRegisteredApplications()\r\n                .stream()\r\n                .filter(application -&gt; !application.getName().equals(getGatewayAppName()))\r\n                .toList();\r\n        return applications;\r\n    }\r\n\r\n    // fine\r\n    private String getGatewayAppName() {\r\n        return eurekaClient.getApplicationInfoManager()\r\n                .getInfo()\r\n                .getAppName();\r\n    }\r\n\r\n    // fine\r\n    private Map&lt;Application, SwaggerParseResult&gt; mapToDocs(List&lt;Application&gt; applications) {\r\n        Map&lt;Application, SwaggerParseResult&gt; appsToDocs = new HashMap&lt;&gt;();\r\n        applications.forEach(application -&gt; {\r\n            Optional&lt;SwaggerParseResult&gt; optionalDoc = findApplicationDoc(application);\r\n            optionalDoc.ifPresentOrElse(\r\n                    doc -&gt; appsToDocs.put(application, doc),\r\n                    () -&gt; log.warn(MessageFormat.format(&quot;Could not load documentation for {0}&quot;, application.getName())));\r\n        });\r\n        return appsToDocs;\r\n    }\r\n\r\n    // bam! it breaks\r\n    private Optional&lt;SwaggerParseResult&gt; findApplicationDoc(Application application) {\r\n        return Optional&lt;SwaggerParseResult&gt; doc = webClientBuilder.build()\r\n                .get()\r\n                .uri(LOAD_BALANCER_SCHEME + application.getName() + API_DOCS_PATH)\r\n                .retrieve()\r\n                .bodyToMono(String.class)\r\n                .map(apiParser::readContents)\r\n                .blockOptional(DOC_RETRIEVAL_TIMEOUT);\r\n    }\r\n\r\n    // let&#39;s keep it like that for now to make it look more like an MRE\r\n    private RouteLocator buildRouteLocatorFrom(Map&lt;Application, SwaggerParseResult&gt; appsToDocs) {\r\n        return routeLocatorBuilder.routes().build();\r\n    }\r\n}\r\n```\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.4&lt;/version&gt;\r\n        &lt;relativePath/&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;by.a-finny&lt;/groupId&gt;\r\n    &lt;artifactId&gt;api-gateway-v2&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;API-Gateway&lt;/name&gt;\r\n    &lt;description&gt;API-Gateway Service v2&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-starter-webflux-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.swagger.parser.v3&lt;/groupId&gt;\r\n            &lt;artifactId&gt;swagger-parser&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.18&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nHere&#39;s what I get on startup (it fails):\r\n```\r\nThe dependencies of some of the beans in the application context form a cycle:\r\n\r\n\r\n|  routeLocatorProvider\r\n     \r\n|  scopedTarget.routeLocator defined in class path resource [by/afinny/apigateway/config/GatewayConfig.class]\r\n\r\n```\r\nI tried to narrow down the cause. Here&#39;s what I found:\r\n```java\r\n    // fine\r\n    private Optional&lt;SwaggerParseResult&gt; findApplicationDoc(Application application) {\r\n        var something = webClientBuilder.build()\r\n                .get()\r\n                .uri(LOAD_BALANCER_SCHEME + application.getName() + API_DOCS_PATH)\r\n                .retrieve()\r\n                .bodyToMono(String.class)\r\n                .map(apiParser::readContents);\r\n        return Optional.empty();\r\n```\r\n```java\r\n    // not fine\r\n    private Optional&lt;SwaggerParseResult&gt; findApplicationDoc(Application application) {\r\n        var something = webClientBuilder.build()\r\n                .get()\r\n                .uri(LOAD_BALANCER_SCHEME + application.getName() + API_DOCS_PATH)\r\n                .retrieve()\r\n                .bodyToMono(String.class)\r\n                .map(apiParser::readContents)\r\n                .blockOptional(DOC_RETRIEVAL_TIMEOUT); // this line is problematic\r\n        return Optional.empty();\r\n```\r\nWhat&#39;s so special about that line that creates a circular dependency and how do I resolve this?\r\n\r\n# What I tried:\r\n\r\n*(the list&#39;s not exhaustive)*\r\n\r\n1. M. Deinum suggested it may be due to the `RefreshScope` dependency in `RouteLocatorProvider`. But the exception persists even if I remove the dependency altogether\r\n```java\r\n//    private final RefreshScope refreshScope;\r\n\r\n// and so on\r\n```\r\n2. Maybe, I can refresh the bean in the same configuration class? I tried this:\r\n```java\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class RouteLocatorConfig {\r\n    private final EurekaClient eurekaClient;\r\n    private final org.springframework.cloud.context.scope.refresh.RefreshScope refresher;\r\n\r\n    @PostConstruct\r\n    public void registerListener() {\r\n        eurekaClient.registerEventListener(event -&gt; {\r\n            if (event instanceof CacheRefreshedEvent) {\r\n                refresher.refresh(RouteLocator.class);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Bean\r\n    @RefreshScope\r\n    public RouteLocator routeLocator(RouteLocatorProvider routeLocatorProvider) {\r\n        return routeLocatorProvider.buildRouteLocator();\r\n    }\r\n```\r\n```java\r\n// inside RouteLocatorProvider\r\n\r\n    // slightly modified refreshRoutings(), the rest is the same\r\n    public RouteLocator buildRouteLocator() {\r\n        log.info(&quot;Services discovery started.&quot;);\r\n        List&lt;Application&gt; applications = findOtherRegisteredApplications();\r\n        Map&lt;Application, SwaggerParseResult&gt; docs = mapToDocs(applications);\r\n        return buildRouteLocatorFrom(docs);\r\n    }\r\n```\r\nHowever, I get this (which makes sense if you think about it):\r\n```\r\nCaused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;scopedTarget.routeLocator&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n```\r\nWhat I suspect is that `WebClient` is somehow dependent on `RouteLocator` so when I try to retrieve the docs in `findApplicationDoc(..)`, it discovers that `RouteLocator` is still being built and throws an exception\r\n\r\nSo if I can&#39;t refresh `@RefreshScope` beans from outside of the config class *and* also can&#39;t refresh them from within that class itself, where on earth should I invoke that `refresh(..)` method?\r\n\r\n# UPD\r\n\r\nHere&#39;s a quick summary of what happens. Details are kindly provided by the IntelliJ debugger\r\n\r\nMy config has a `@Bean` method that delegates to `RouteLocatorProvider` to get a fresh `RouteLocator`\r\n\r\nThe `RouteLocatorProvider` uses a `WebClient` to fetch API docs from microservices, including my `HELLOWORLD` service (created for testing purposes)\r\n\r\n`WebClient` tries to resolve the service name, `HELLOWORLD`, to a host and a port. A few lambdas later, this job is taken by a `ReactorLoadBalancerExchangeFilterFunction`\r\n```java\r\n// at this point, serviceId is HELLOWORLD\r\nloadBalancerFactory.getInstances(serviceId, LoadBalancerLifecycle.class) // b\r\n```\r\nIt goes to its `NamedContextFactory`. For some reason, it tries to map a service name to a `GenericApplicationContext`\r\n```java\r\n    public &lt;T&gt; Map&lt;String, T&gt; getInstances(String name, Class&lt;T&gt; type) {\r\n        GenericApplicationContext context = getContext(name); // b\r\n\r\n        return BeanFactoryUtils.beansOfTypeIncludingAncestors(context, type);\r\n    }\r\n```\r\nThere&#39;s no context for that service name (why would it be?) so it creates it\r\n```java\r\n    protected GenericApplicationContext getContext(String name) {\r\n        if (!this.contexts.containsKey(name)) {\r\n            synchronized (this.contexts) {\r\n                if (!this.contexts.containsKey(name)) {\r\n                    this.contexts.put(name, createContext(name)); // b\r\n                }\r\n            }\r\n        }\r\n        return this.contexts.get(name);\r\n    }\r\n```\r\nSome context publishes a `ContextRefreshedEvent`\r\n```java\r\npublishEvent(new ContextRefreshedEvent(this)); // b\r\n```\r\nSome `RouteRefreshListener` triggers the process of getting `Route`s\r\n\r\nI&#39;m not sure what `RefreshRoutesEvent` does (no docs), but apparently it&#39;s not an *event* (something already happened and a publisher doesn&#39;t care how listeners act on it, if at all), but rather a specific command to &quot;listeners&quot;, &quot;Go and refresh routes&quot;\r\n```java\r\n    @Override\r\n    public void onApplicationEvent(ApplicationEvent event) {\r\n        if (event instanceof ContextRefreshedEvent) {\r\n            ContextRefreshedEvent refreshedEvent = (ContextRefreshedEvent) event;\r\n            if (!WebServerApplicationContext.hasServerNamespace(refreshedEvent.getApplicationContext(), &quot;management&quot;)) {\r\n                reset(); // b\r\n            }\r\n        }\r\n```\r\n```java\r\n    private void reset() {\r\n        this.publisher.publishEvent(new RefreshRoutesEvent(this));\r\n    }\r\n```\r\nThen there&#39;s an attempt to get a `RouteLocator` from a context (I guess to invoke its `getRoutes()` method), we have a circular dependency and an exception","title":"Can&#39;t refresh a refresh-scoped RouteLocator","body":"<p>Here's a general idea: a custom <code>RouteLocatorProvider</code> collects all registered Eureka services, visits their Swagger endpoints, retrieves docs, maps them to routing functions and then builds a <code>RouteLocator</code>. I also want it to be refreshed on Eureka's <code>CacheRefreshedEvent</code>s. Sounds great (so dynamic), but I personally haven't yet achieved this goal. I have some circular dependency issue whose cause (and resolution) is not immediately clear to me</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class ApiGatewayV2Application {\n    public static void main(String[] args) {\n        SpringApplication.run(ApiGatewayV2Application.class, args);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ComponentScan(basePackages = &quot;by.afinny.apigateway&quot;)\npublic class RouteLocatorConfig {\n    @Bean\n    @RefreshScope\n    public RouteLocator routeLocator(RouteLocatorProvider routeLocatorProvider) {\n        return routeLocatorProvider.getRouteLocator();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebClientConfig {\n    @Bean\n    @LoadBalanced\n    public WebClient.Builder webClientBuilder() {\n        return WebClient.builder();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Slf4j\npublic class RouteLocatorProvider {\n    public static final String LOAD_BALANCER_SCHEME = &quot;lb://&quot;;\n    public static final Duration DOC_RETRIEVAL_TIMEOUT = Duration.ofSeconds(10);\n    public static final String API_DOCS_PATH = &quot;/v3/api-docs&quot;;\n    private final EurekaClient eurekaClient;\n    private final WebClient.Builder webClientBuilder;\n    private final RouteLocatorBuilder routeLocatorBuilder;\n    private final OpenAPIV3Parser apiParser;\n    private final RefreshScope refreshScope;\n    @Getter\n    private RouteLocator routeLocator;\n\n    public RouteLocatorProvider(EurekaClient eurekaClient, WebClient.Builder webClientBuilder,\n                                RouteLocatorBuilder routeLocatorBuilder, RefreshScope refreshScope) {\n        this.eurekaClient = eurekaClient;\n        this.webClientBuilder = webClientBuilder;\n        this.routeLocatorBuilder = routeLocatorBuilder;\n        this.refreshScope = refreshScope;\n        this.apiParser = new OpenAPIV3Parser();\n    }\n\n    @PostConstruct\n    public void registerListener() {\n        refreshRoutings(); // get initial endpoints\n        eurekaClient.registerEventListener(event -&gt; { // refresh if Eureka refreshes\n            if (event instanceof CacheRefreshedEvent) {\n                refreshRoutings();\n                refreshScope.refresh(RouteLocator.class);\n            }\n        });\n    }\n\n    private void refreshRoutings() {\n        log.info(&quot;Services discovery started.&quot;);\n        List&lt;Application&gt; applications = findOtherRegisteredApplications();\n        Map&lt;Application, SwaggerParseResult&gt; docs = mapToDocs(applications);\n        routeLocator = buildRouteLocatorFrom(docs);\n    }\n\n    // fine\n    private List&lt;Application&gt; findOtherRegisteredApplications() {\n        List&lt;Application&gt; applications;\n        applications = eurekaClient.getApplications()\n                .getRegisteredApplications()\n                .stream()\n                .filter(application -&gt; !application.getName().equals(getGatewayAppName()))\n                .toList();\n        return applications;\n    }\n\n    // fine\n    private String getGatewayAppName() {\n        return eurekaClient.getApplicationInfoManager()\n                .getInfo()\n                .getAppName();\n    }\n\n    // fine\n    private Map&lt;Application, SwaggerParseResult&gt; mapToDocs(List&lt;Application&gt; applications) {\n        Map&lt;Application, SwaggerParseResult&gt; appsToDocs = new HashMap&lt;&gt;();\n        applications.forEach(application -&gt; {\n            Optional&lt;SwaggerParseResult&gt; optionalDoc = findApplicationDoc(application);\n            optionalDoc.ifPresentOrElse(\n                    doc -&gt; appsToDocs.put(application, doc),\n                    () -&gt; log.warn(MessageFormat.format(&quot;Could not load documentation for {0}&quot;, application.getName())));\n        });\n        return appsToDocs;\n    }\n\n    // bam! it breaks\n    private Optional&lt;SwaggerParseResult&gt; findApplicationDoc(Application application) {\n        return Optional&lt;SwaggerParseResult&gt; doc = webClientBuilder.build()\n                .get()\n                .uri(LOAD_BALANCER_SCHEME + application.getName() + API_DOCS_PATH)\n                .retrieve()\n                .bodyToMono(String.class)\n                .map(apiParser::readContents)\n                .blockOptional(DOC_RETRIEVAL_TIMEOUT);\n    }\n\n    // let's keep it like that for now to make it look more like an MRE\n    private RouteLocator buildRouteLocatorFrom(Map&lt;Application, SwaggerParseResult&gt; appsToDocs) {\n        return routeLocatorBuilder.routes().build();\n    }\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.4&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;by.a-finny&lt;/groupId&gt;\n    &lt;artifactId&gt;api-gateway-v2&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;API-Gateway&lt;/name&gt;\n    &lt;description&gt;API-Gateway Service v2&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webflux-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.0.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger.parser.v3&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-parser&lt;/artifactId&gt;\n            &lt;version&gt;2.1.18&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Here's what I get on startup (it fails):</p>\n<pre><code>The dependencies of some of the beans in the application context form a cycle:\n\n\n|  routeLocatorProvider\n     \n|  scopedTarget.routeLocator defined in class path resource [by/afinny/apigateway/config/GatewayConfig.class]\n\n</code></pre>\n<p>I tried to narrow down the cause. Here's what I found:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // fine\n    private Optional&lt;SwaggerParseResult&gt; findApplicationDoc(Application application) {\n        var something = webClientBuilder.build()\n                .get()\n                .uri(LOAD_BALANCER_SCHEME + application.getName() + API_DOCS_PATH)\n                .retrieve()\n                .bodyToMono(String.class)\n                .map(apiParser::readContents);\n        return Optional.empty();\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    // not fine\n    private Optional&lt;SwaggerParseResult&gt; findApplicationDoc(Application application) {\n        var something = webClientBuilder.build()\n                .get()\n                .uri(LOAD_BALANCER_SCHEME + application.getName() + API_DOCS_PATH)\n                .retrieve()\n                .bodyToMono(String.class)\n                .map(apiParser::readContents)\n                .blockOptional(DOC_RETRIEVAL_TIMEOUT); // this line is problematic\n        return Optional.empty();\n</code></pre>\n<p>What's so special about that line that creates a circular dependency and how do I resolve this?</p>\n<h1>What I tried:</h1>\n<p><em>(the list's not exhaustive)</em></p>\n<ol>\n<li>M. Deinum suggested it may be due to the <code>RefreshScope</code> dependency in <code>RouteLocatorProvider</code>. But the exception persists even if I remove the dependency altogether</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>//    private final RefreshScope refreshScope;\n\n// and so on\n</code></pre>\n<ol start=\"2\">\n<li>Maybe, I can refresh the bean in the same configuration class? I tried this:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@RequiredArgsConstructor\npublic class RouteLocatorConfig {\n    private final EurekaClient eurekaClient;\n    private final org.springframework.cloud.context.scope.refresh.RefreshScope refresher;\n\n    @PostConstruct\n    public void registerListener() {\n        eurekaClient.registerEventListener(event -&gt; {\n            if (event instanceof CacheRefreshedEvent) {\n                refresher.refresh(RouteLocator.class);\n            }\n        });\n    }\n\n    @Bean\n    @RefreshScope\n    public RouteLocator routeLocator(RouteLocatorProvider routeLocatorProvider) {\n        return routeLocatorProvider.buildRouteLocator();\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// inside RouteLocatorProvider\n\n    // slightly modified refreshRoutings(), the rest is the same\n    public RouteLocator buildRouteLocator() {\n        log.info(&quot;Services discovery started.&quot;);\n        List&lt;Application&gt; applications = findOtherRegisteredApplications();\n        Map&lt;Application, SwaggerParseResult&gt; docs = mapToDocs(applications);\n        return buildRouteLocatorFrom(docs);\n    }\n</code></pre>\n<p>However, I get this (which makes sense if you think about it):</p>\n<pre><code>Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'scopedTarget.routeLocator': Requested bean is currently in creation: Is there an unresolvable circular reference?\n</code></pre>\n<p>What I suspect is that <code>WebClient</code> is somehow dependent on <code>RouteLocator</code> so when I try to retrieve the docs in <code>findApplicationDoc(..)</code>, it discovers that <code>RouteLocator</code> is still being built and throws an exception</p>\n<p>So if I can't refresh <code>@RefreshScope</code> beans from outside of the config class <em>and</em> also can't refresh them from within that class itself, where on earth should I invoke that <code>refresh(..)</code> method?</p>\n<h1>UPD</h1>\n<p>Here's a quick summary of what happens. Details are kindly provided by the IntelliJ debugger</p>\n<p>My config has a <code>@Bean</code> method that delegates to <code>RouteLocatorProvider</code> to get a fresh <code>RouteLocator</code></p>\n<p>The <code>RouteLocatorProvider</code> uses a <code>WebClient</code> to fetch API docs from microservices, including my <code>HELLOWORLD</code> service (created for testing purposes)</p>\n<p><code>WebClient</code> tries to resolve the service name, <code>HELLOWORLD</code>, to a host and a port. A few lambdas later, this job is taken by a <code>ReactorLoadBalancerExchangeFilterFunction</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>// at this point, serviceId is HELLOWORLD\nloadBalancerFactory.getInstances(serviceId, LoadBalancerLifecycle.class) // b\n</code></pre>\n<p>It goes to its <code>NamedContextFactory</code>. For some reason, it tries to map a service name to a <code>GenericApplicationContext</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public &lt;T&gt; Map&lt;String, T&gt; getInstances(String name, Class&lt;T&gt; type) {\n        GenericApplicationContext context = getContext(name); // b\n\n        return BeanFactoryUtils.beansOfTypeIncludingAncestors(context, type);\n    }\n</code></pre>\n<p>There's no context for that service name (why would it be?) so it creates it</p>\n<pre class=\"lang-java prettyprint-override\"><code>    protected GenericApplicationContext getContext(String name) {\n        if (!this.contexts.containsKey(name)) {\n            synchronized (this.contexts) {\n                if (!this.contexts.containsKey(name)) {\n                    this.contexts.put(name, createContext(name)); // b\n                }\n            }\n        }\n        return this.contexts.get(name);\n    }\n</code></pre>\n<p>Some context publishes a <code>ContextRefreshedEvent</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>publishEvent(new ContextRefreshedEvent(this)); // b\n</code></pre>\n<p>Some <code>RouteRefreshListener</code> triggers the process of getting <code>Route</code>s</p>\n<p>I'm not sure what <code>RefreshRoutesEvent</code> does (no docs), but apparently it's not an <em>event</em> (something already happened and a publisher doesn't care how listeners act on it, if at all), but rather a specific command to &quot;listeners&quot;, &quot;Go and refresh routes&quot;</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    public void onApplicationEvent(ApplicationEvent event) {\n        if (event instanceof ContextRefreshedEvent) {\n            ContextRefreshedEvent refreshedEvent = (ContextRefreshedEvent) event;\n            if (!WebServerApplicationContext.hasServerNamespace(refreshedEvent.getApplicationContext(), &quot;management&quot;)) {\n                reset(); // b\n            }\n        }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    private void reset() {\n        this.publisher.publishEvent(new RefreshRoutesEvent(this));\n    }\n</code></pre>\n<p>Then there's an attempt to get a <code>RouteLocator</code> from a context (I guess to invoke its <code>getRoutes()</code> method), we have a circular dependency and an exception</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":3007659,"reputation":647,"user_id":2551817,"accept_rate":25,"display_name":"sofend"},"score":0,"creation_date":1543353208,"post_id":53508168,"comment_id":93886317,"body_markdown":"The definition of a Relation is a mapping from a key to the tuple of values (the row).  So... you do need a key.  Of course, you can use the entire row as the key if you choose - though normally a subset of the fields would make a natural key.  JPA supports multi-column keys and that&#39;s probably what you&#39;d want in this case.","body":"The definition of a Relation is a mapping from a key to the tuple of values (the row).  So... you do need a key.  Of course, you can use the entire row as the key if you choose - though normally a subset of the fields would make a natural key.  JPA supports multi-column keys and that&#39;s probably what you&#39;d want in this case."}],"answers":[{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543389710,"creation_date":1543353811,"answer_id":53508351,"question_id":53508168,"body_markdown":"**About Entity ID mapping**   \r\n\r\nIf you can change the view definition, you could use add the rownum as column.   \r\nIt is generally specific to the DBMS. The idea is to make the row number in the table the id of the entity.   \r\nAs alternative you could use the a generator of unique id. [`UUID`][2] is a possibility.\r\nAt last you could stick to native SQL while benefiting from JPA/Hibernate to map the native query results to a specific class representing the view data.   \r\n\r\n**About Spring Data Repository**\r\n\r\nIf views don&#39;t fit naturally into the Spring Data Repository requirements, it probably means that using views instead of tables is not necessary suitable for.   \r\n\r\nIndeed Spring Data repositories classes such as `CrudRepository` or `JpaRepository` are designed to provide out of the box CRUD operations and some additional processing for a specific entity class.  \r\nThe views in terms of DBMS are not included in as you select it but you don&#39;t update, insert or delete directly any row from the view.   \r\nBesides, what would be the added value to use such Repository beans for a view ? \r\nYou will use almost nothing of the generated implementation provided by Spring.   \r\n\r\nIn your case if you define the view as an entity I think that using `JpaTemplate` would make more sense.   \r\nIt is just a layer on top of the JPA API.  \r\nFrom [the documentation][1]  :\r\n\r\n&gt; JpaTemplate can be considered as direct alternative to working with\r\n&gt; the native JPA EntityManager API (through a shared EntityManager\r\n&gt; reference, as outlined above). The major advantage is its automatic\r\n&gt; conversion to DataAccessExceptions; the major disadvantage is that it\r\n&gt; introduces another thin layer on top of the native JPA API. Note that\r\n&gt; exception translation can also be achieved through AOP advice; check\r\n&gt; out PersistenceExceptionTranslationPostProcessor\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/3.0.x/javadoc-api/org/springframework/orm/jpa/JpaTemplate.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html","title":"JPA/SpringBoot Repository for database view (not table)","body":"<p><strong>About Entity ID mapping</strong>   </p>\n\n<p>If you can change the view definition, you could use add the rownum as column.<br>\nIt is generally specific to the DBMS. The idea is to make the row number in the table the id of the entity.<br>\nAs alternative you could use the a generator of unique id. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html\" rel=\"nofollow noreferrer\"><code>UUID</code></a> is a possibility.\nAt last you could stick to native SQL while benefiting from JPA/Hibernate to map the native query results to a specific class representing the view data.   </p>\n\n<p><strong>About Spring Data Repository</strong></p>\n\n<p>If views don't fit naturally into the Spring Data Repository requirements, it probably means that using views instead of tables is not necessary suitable for.   </p>\n\n<p>Indeed Spring Data repositories classes such as <code>CrudRepository</code> or <code>JpaRepository</code> are designed to provide out of the box CRUD operations and some additional processing for a specific entity class.<br>\nThe views in terms of DBMS are not included in as you select it but you don't update, insert or delete directly any row from the view.<br>\nBesides, what would be the added value to use such Repository beans for a view ? \nYou will use almost nothing of the generated implementation provided by Spring.   </p>\n\n<p>In your case if you define the view as an entity I think that using <code>JpaTemplate</code> would make more sense.<br>\nIt is just a layer on top of the JPA API.<br>\nFrom <a href=\"https://docs.spring.io/spring/docs/3.0.x/javadoc-api/org/springframework/orm/jpa/JpaTemplate.html\" rel=\"nofollow noreferrer\">the documentation</a>  :</p>\n\n<blockquote>\n  <p>JpaTemplate can be considered as direct alternative to working with\n  the native JPA EntityManager API (through a shared EntityManager\n  reference, as outlined above). The major advantage is its automatic\n  conversion to DataAccessExceptions; the major disadvantage is that it\n  introduces another thin layer on top of the native JPA API. Note that\n  exception translation can also be achieved through AOP advice; check\n  out PersistenceExceptionTranslationPostProcessor</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":399885,"reputation":1418,"user_id":765540,"accept_rate":25,"display_name":"Blink"},"score":1,"creation_date":1599206567,"post_id":53508427,"comment_id":112708040,"body_markdown":"hey, what do you mean with a united value? &quot;my_view_id&quot; looks to me like a normal field","body":"hey, what do you mean with a united value? &quot;my_view_id&quot; looks to me like a normal field"},{"owner":{"account_id":2264978,"reputation":3734,"user_id":1993937,"accept_rate":47,"display_name":"TheJeff"},"score":0,"creation_date":1603484055,"post_id":53508427,"comment_id":114062373,"body_markdown":"Question states: &quot;that lacks a primary key&quot;","body":"Question states: &quot;that lacks a primary key&quot;"},{"owner":{"account_id":1260896,"reputation":1488,"user_id":1219213,"accept_rate":60,"display_name":"TheRealChx101"},"score":0,"creation_date":1628545325,"post_id":53508427,"comment_id":121445250,"body_markdown":"What about a view without an id, i.e a report","body":"What about a view without an id, i.e a report"},{"owner":{"account_id":2279792,"reputation":3691,"user_id":2005176,"accept_rate":4,"display_name":"akaliza"},"score":0,"creation_date":1695932091,"post_id":53508427,"comment_id":136093241,"body_markdown":"I am getting invalid name on my view","body":"I am getting invalid name on my view"}],"tags":[],"owner":{"account_id":13649956,"reputation":168,"user_id":9848112,"display_name":"Jos&#233; Luis Condori Jara"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1543354108,"creation_date":1543354108,"answer_id":53508427,"question_id":53508168,"body_markdown":"I hope this helps you, the id you can assign it to a united value in your view.\r\n\r\nWe map the view to a JPA object as:\r\n\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    import java.io.Serializable;\r\n\r\n    @Entity\r\n    @Table(name = &quot;my_view&quot;)\r\n    public class MyView implements Serializable {\r\n    private static final long serialVersionUID = 1L;\r\n    @Id\r\n    @Column(name = &quot;my_view_id&quot;)\r\n    private Long myViewId;\r\n    @NotNull\r\n    @Column(name = &quot;my_view_name&quot;)\r\n    private String myViewName;\r\n    }\r\n\r\nWe then create a repository:\r\n\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n\r\n    public interface MyViewRepository extends JpaRepository&lt;View, Long&gt; {\r\n    }\r\n\r\n\r\n","title":"JPA/SpringBoot Repository for database view (not table)","body":"<p>I hope this helps you, the id you can assign it to a united value in your view.</p>\n\n<p>We map the view to a JPA object as:</p>\n\n<pre><code>import javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\nimport java.io.Serializable;\n\n@Entity\n@Table(name = \"my_view\")\npublic class MyView implements Serializable {\nprivate static final long serialVersionUID = 1L;\n@Id\n@Column(name = \"my_view_id\")\nprivate Long myViewId;\n@NotNull\n@Column(name = \"my_view_name\")\nprivate String myViewName;\n}\n</code></pre>\n\n<p>We then create a repository:</p>\n\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface MyViewRepository extends JpaRepository&lt;View, Long&gt; {\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2515468,"reputation":1611,"user_id":2187022,"accept_rate":90,"display_name":"Malvon"},"score":0,"creation_date":1599374260,"post_id":53508460,"comment_id":112751429,"body_markdown":"Does it really have to be upper cased?","body":"Does it really have to be upper cased?"},{"owner":{"account_id":2676787,"reputation":1086,"user_id":2352196,"accept_rate":67,"display_name":"Bojan Trajkovski"},"score":1,"creation_date":1609165941,"post_id":53508460,"comment_id":115764413,"body_markdown":"@Malvon I&#39;ve used this solution with camel case, ex `getDocumentId()` and it worked perfectly fine.","body":"@Malvon I&#39;ve used this solution with camel case, ex <code>getDocumentId()</code> and it worked perfectly fine."},{"owner":{"account_id":2515468,"reputation":1611,"user_id":2187022,"accept_rate":90,"display_name":"Malvon"},"score":0,"creation_date":1609625496,"post_id":53508460,"comment_id":115882379,"body_markdown":"@BojanTrajkovski - True it works with Camel case too. I even added setter methods for unit testing.","body":"@BojanTrajkovski - True it works with Camel case too. I even added setter methods for unit testing."},{"owner":{"account_id":1889592,"reputation":1805,"user_id":1708042,"display_name":"user1708042"},"score":0,"creation_date":1624450688,"post_id":53508460,"comment_id":120361785,"body_markdown":"With a mapping similar to this I get an error &quot;java.lang.IllegalArgumentException: Not a managed type&quot;. The interface for the DTO has no @Entity annotation. What should I do to turn it into a managed type?","body":"With a mapping similar to this I get an error &quot;java.lang.IllegalArgumentException: Not a managed type&quot;. The interface for the DTO has no @Entity annotation. What should I do to turn it into a managed type?"},{"owner":{"account_id":5641068,"reputation":431,"user_id":4464927,"display_name":"Swarathesh Addanki"},"score":1,"creation_date":1626101988,"post_id":53508460,"comment_id":120796903,"body_markdown":"@user1708042 add &quot;@ENTITY&quot; and &quot;@IMMUTABLE&quot; solved for me.","body":"@user1708042 add &quot;@ENTITY&quot; and &quot;@IMMUTABLE&quot; solved for me."}],"tags":[],"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"comment_count":5,"down_vote_count":1,"up_vote_count":35,"is_accepted":true,"score":34,"last_activity_date":1701349167,"creation_date":1543354237,"answer_id":53508460,"question_id":53508168,"body_markdown":"I was exploring that topic too. I ended up using Spring Data JPA [Interface-based Projections][1] with native queries. \r\n\r\nI created an interface, making sure the UPPERCASE part matches the DB Column names:\r\n\r\n    public interface R11Dto {\r\n    \r\n       String getTITLE();\r\n    \r\n       Integer getAMOUNT();\r\n    \r\n       LocalDate getDATE_CREATED();\r\n    }\r\n\r\nThen i created a repository, for an Entity (User) not related in any way to the view. In that repository i created a simple native query. vReport1_1 is my view. \r\n\r\n    public interface RaportRepository extends JpaRepository&lt;User, Long&gt; {\r\n    \r\n       @Query(nativeQuery = true, value = &quot;SELECT * FROM vReport1_1 ORDER BY DATE_CREATED, AMOUNT&quot;)\r\n       List&lt;R11Dto&gt; getR11();\r\n    \r\n    }\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html#projections.interfaces","title":"JPA/SpringBoot Repository for database view (not table)","body":"<p>I was exploring that topic too. I ended up using Spring Data JPA <a href=\"https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html#projections.interfaces\" rel=\"nofollow noreferrer\">Interface-based Projections</a> with native queries.</p>\n<p>I created an interface, making sure the UPPERCASE part matches the DB Column names:</p>\n<pre><code>public interface R11Dto {\n\n   String getTITLE();\n\n   Integer getAMOUNT();\n\n   LocalDate getDATE_CREATED();\n}\n</code></pre>\n<p>Then i created a repository, for an Entity (User) not related in any way to the view. In that repository i created a simple native query. vReport1_1 is my view.</p>\n<pre><code>public interface RaportRepository extends JpaRepository&lt;User, Long&gt; {\n\n   @Query(nativeQuery = true, value = &quot;SELECT * FROM vReport1_1 ORDER BY DATE_CREATED, AMOUNT&quot;)\n   List&lt;R11Dto&gt; getR11();\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":218158,"reputation":575,"user_id":3219180,"display_name":"garfield"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543379020,"creation_date":1543379020,"answer_id":53512101,"question_id":53508168,"body_markdown":"If your view doesn&#39;t have a candidate key you may add one through the creation query using something like the database UUID function and then use the UUID as the type for the ID the Entity.\r\n\r\nIf you need to make your Entity read-only you may annotate the fields with\r\n\r\n     @Column(insertable = false, updatable = false)\r\n\r\nOr annotate you entity class with org.hibernate.annotations.Immutable if your provider is Hibernate &gt;= 5.2.","title":"JPA/SpringBoot Repository for database view (not table)","body":"<p>If your view doesn't have a candidate key you may add one through the creation query using something like the database UUID function and then use the UUID as the type for the ID the Entity.</p>\n\n<p>If you need to make your Entity read-only you may annotate the fields with</p>\n\n<pre><code> @Column(insertable = false, updatable = false)\n</code></pre>\n\n<p>Or annotate you entity class with org.hibernate.annotations.Immutable if your provider is Hibernate >= 5.2.</p>\n"},{"comments":[{"owner":{"account_id":13441392,"reputation":2711,"user_id":9698467,"display_name":"Stefan Zhelyazkov"},"score":2,"creation_date":1612471352,"post_id":59979203,"comment_id":116785005,"body_markdown":"Creating synthetic IDs with `@Subselect` and using `@Immutable` helped me map a view to an Entity successfully.","body":"Creating synthetic IDs with <code>@Subselect</code> and using <code>@Immutable</code> helped me map a view to an Entity successfully."},{"owner":{"account_id":4218123,"reputation":9909,"user_id":3453898,"accept_rate":75,"display_name":"pixel"},"score":0,"creation_date":1633556455,"post_id":59979203,"comment_id":122794518,"body_markdown":"select uuid() does not work in DB2","body":"select uuid() does not work in DB2"},{"owner":{"account_id":5564358,"reputation":1463,"user_id":4412223,"accept_rate":86,"display_name":"Janitha Madushan"},"score":0,"creation_date":1633584507,"post_id":59979203,"comment_id":122799413,"body_markdown":"Have you tried GENERATE_UNIQUE() as mentioned in https://www.ibm.com/docs/en/db2/9.7?topic=functions-generate-unique ?","body":"Have you tried GENERATE_UNIQUE() as mentioned in <a href=\"https://www.ibm.com/docs/en/db2/9.7?topic=functions-generate-unique\" rel=\"nofollow noreferrer\">ibm.com/docs/en/db2/9.7?topic=functions-generate-unique</a> ?"},{"owner":{"account_id":9324571,"reputation":837,"user_id":6922308,"accept_rate":55,"display_name":"Anu Shibin Joseph Raj"},"score":2,"creation_date":1664686543,"post_id":59979203,"comment_id":130526588,"body_markdown":"For MSSQL, the command becomes `select newid() as id, hs.* from hunters_summary hs`","body":"For MSSQL, the command becomes <code>select newid() as id, hs.* from hunters_summary hs</code>"},{"owner":{"account_id":1887821,"reputation":2984,"user_id":1706691,"accept_rate":69,"display_name":"James"},"score":0,"creation_date":1688663402,"post_id":59979203,"comment_id":135107505,"body_markdown":"Great answer but why is @Table needed when using @Subselect?","body":"Great answer but why is @Table needed when using @Subselect?"},{"owner":{"account_id":5564358,"reputation":1463,"user_id":4412223,"accept_rate":86,"display_name":"Janitha Madushan"},"score":0,"creation_date":1688886293,"post_id":59979203,"comment_id":135132299,"body_markdown":"Thank you! Since the database entity (in the database) doesn&#39;t have an id field, it needs to be generated by the uuid() function.","body":"Thank you! Since the database entity (in the database) doesn&#39;t have an id field, it needs to be generated by the uuid() function."}],"tags":[],"owner":{"account_id":5564358,"reputation":1463,"user_id":4412223,"accept_rate":86,"display_name":"Janitha Madushan"},"comment_count":6,"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1580359425,"creation_date":1580359425,"answer_id":59979203,"question_id":53508168,"body_markdown":"**1. Create View with native SQL in the database,**\r\n\r\n    create or replace view hunters_summary as \r\n    select \r\n    em.id as emp_id, hh.id as hh_id\r\n    from employee em \r\n    inner join employee_type et on em.employee_type_id = et.id  \r\n    inner join head_hunter hh on hh.id = em.head_hunter_id;\r\n\r\n**2. Map that, View to an &#39;Immutable Entity&#39;**\r\n\r\n    package inc.manpower.domain;\r\n    \r\n    import org.hibernate.annotations.Immutable;\r\n    import org.hibernate.annotations.Subselect;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    import java.io.Serializable;\r\n    import java.util.Date;\r\n    \r\n    @Entity\r\n    @Immutable\r\n    @Table(name = &quot;`hunters_summary`&quot;)\r\n    @Subselect(&quot;select uuid() as id, hs.* from hunters_summary hs&quot;)\r\n    public class HuntersSummary implements Serializable {\r\n    \r\n        @Id\r\n        private String id;\r\n        private Long empId;\r\n        private String hhId;\r\n    \r\n        ...\r\n    }\r\n\r\n**3. Now create the Repository with your desired methods,**\r\n\r\n    package inc.manpower.repository;\r\n    \r\n    import inc.manpower.domain.HuntersSummary;\r\n    import org.springframework.data.repository.PagingAndSortingRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    import javax.transaction.Transactional;\r\n    import java.util.Date;\r\n    import java.util.List;\r\n\r\n    @Repository\r\n    @Transactional\r\n    public interface HuntersSummaryRepository extends PagingAndSortingRepository&lt;HuntersSummary, String&gt; {\r\n        List&lt;HuntersSummary&gt; findByEmpRecruitedDateBetweenAndHhId(Date startDate, Date endDate, String hhId);\r\n    }","title":"JPA/SpringBoot Repository for database view (not table)","body":"<p><strong>1. Create View with native SQL in the database,</strong></p>\n\n<pre><code>create or replace view hunters_summary as \nselect \nem.id as emp_id, hh.id as hh_id\nfrom employee em \ninner join employee_type et on em.employee_type_id = et.id  \ninner join head_hunter hh on hh.id = em.head_hunter_id;\n</code></pre>\n\n<p><strong>2. Map that, View to an 'Immutable Entity'</strong></p>\n\n<pre><code>package inc.manpower.domain;\n\nimport org.hibernate.annotations.Immutable;\nimport org.hibernate.annotations.Subselect;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\nimport java.io.Serializable;\nimport java.util.Date;\n\n@Entity\n@Immutable\n@Table(name = \"`hunters_summary`\")\n@Subselect(\"select uuid() as id, hs.* from hunters_summary hs\")\npublic class HuntersSummary implements Serializable {\n\n    @Id\n    private String id;\n    private Long empId;\n    private String hhId;\n\n    ...\n}\n</code></pre>\n\n<p><strong>3. Now create the Repository with your desired methods,</strong></p>\n\n<pre><code>package inc.manpower.repository;\n\nimport inc.manpower.domain.HuntersSummary;\nimport org.springframework.data.repository.PagingAndSortingRepository;\nimport org.springframework.stereotype.Repository;\n\nimport javax.transaction.Transactional;\nimport java.util.Date;\nimport java.util.List;\n\n@Repository\n@Transactional\npublic interface HuntersSummaryRepository extends PagingAndSortingRepository&lt;HuntersSummary, String&gt; {\n    List&lt;HuntersSummary&gt; findByEmpRecruitedDateBetweenAndHhId(Date startDate, Date endDate, String hhId);\n}\n</code></pre>\n"}],"owner":{"account_id":1596692,"reputation":4260,"user_id":1478636,"accept_rate":88,"display_name":"Niko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90410,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":53508460,"answer_count":5,"score":40,"last_activity_date":1701349167,"creation_date":1543352971,"question_id":53508168,"body_markdown":"I&#39;m attempting to create a JPA entity for a view. From the database layer, a table and a view should be the same.\r\n\r\nHowever, problems begin to arise and they are two fold:\r\n\r\n1. When attempting to setup the correct annotations. A view does not have a primary key associated with it, yet without the proper `@javax.persistence.Id` annotated upon a field, you will get an `org.hibernate.AnnotationException: No identifier specified for entity` thrown at Runtime.\r\n\r\n2. The Spring Boot `JpaRepository` interface definition requires that the `ID` type extends `Serializable`, which precludes utilizing `java.lang.Void` as a work-around for the lack of an id on an view entity.\r\n\r\nWhat is the proper JPA/SpringBoot/Hibernate way to interact with a view that lacks a primary key?","title":"JPA/SpringBoot Repository for database view (not table)","body":"<p>I'm attempting to create a JPA entity for a view. From the database layer, a table and a view should be the same.</p>\n\n<p>However, problems begin to arise and they are two fold:</p>\n\n<ol>\n<li><p>When attempting to setup the correct annotations. A view does not have a primary key associated with it, yet without the proper <code>@javax.persistence.Id</code> annotated upon a field, you will get an <code>org.hibernate.AnnotationException: No identifier specified for entity</code> thrown at Runtime.</p></li>\n<li><p>The Spring Boot <code>JpaRepository</code> interface definition requires that the <code>ID</code> type extends <code>Serializable</code>, which precludes utilizing <code>java.lang.Void</code> as a work-around for the lack of an id on an view entity.</p></li>\n</ol>\n\n<p>What is the proper JPA/SpringBoot/Hibernate way to interact with a view that lacks a primary key?</p>\n"},{"tags":["java","xml","xpath","xmlunit","xmlunit-2"],"comments":[{"owner":{"account_id":116746,"reputation":12477,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"score":0,"creation_date":1701177892,"post_id":77564111,"comment_id":136740852,"body_markdown":"What have you tried? You can probably do something with XmlUnit. Try that and get back if you have further questions.","body":"What have you tried? You can probably do something with XmlUnit. Try that and get back if you have further questions."},{"owner":{"account_id":2157608,"reputation":193,"user_id":1912457,"accept_rate":0,"display_name":"Sreepad Chitragar"},"score":0,"creation_date":1701241827,"post_id":77564111,"comment_id":136749821,"body_markdown":"Diff diffs = DiffBuilder.compare(xml1).withTest(xml2).build();\n\t\tIterator&lt;Difference&gt; iterator = diffs.getDifferences().iterator();\n\t\twhile (iterator.hasNext()) {\n\t\t\tDifference nextDiff = iterator.next();\n\t\t\tSystem.out.println(&quot;--------------------&gt;&quot;+nextDiff);\n\t\t}\n\nBut not getting desired Output.\n In simple i need to compare and find out newly added nodes/attributes/elemnts and deleted ones and modified values in the Other XML Document (XML B)","body":"Diff diffs = DiffBuilder.compare(xml1).withTest(xml2).build(); \t\tIterator&lt;Difference&gt; iterator = diffs.getDifferences().iterator(); \t\twhile (iterator.hasNext()) { \t\t\tDifference nextDiff = iterator.next(); \t\t\tSystem.out.println(&quot;--------------------&gt;&quot;+nextDiff); \t\t}  But not getting desired Output.  In simple i need to compare and find out newly added nodes/attributes/elemnts and deleted ones and modified values in the Other XML Document (XML B)"},{"owner":{"account_id":116746,"reputation":12477,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"score":1,"creation_date":1701257180,"post_id":77564111,"comment_id":136752478,"body_markdown":"It&#39;s better if you update/edit the question with properly formatted code","body":"It&#39;s better if you update/edit the question with properly formatted code"},{"owner":{"account_id":2157608,"reputation":193,"user_id":1912457,"accept_rate":0,"display_name":"Sreepad Chitragar"},"score":0,"creation_date":1701354274,"post_id":77564111,"comment_id":136767215,"body_markdown":"@forty-two : Question has been updated now. Could you please help ?","body":"@forty-two : Question has been updated now. Could you please help ?"}],"owner":{"account_id":2157608,"reputation":193,"user_id":1912457,"accept_rate":0,"display_name":"Sreepad Chitragar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701348182,"creation_date":1701176654,"question_id":77564111,"body_markdown":"I have two XML&#39;s and i need differnece between those XML&#39;s as explained below:\r\n\r\n   F6.XML:\r\n\r\n   \r\n\r\n    &lt;MetaData xmlns=&quot;urn:wco:datamodel:WCO:DocumentMetaData-DMS:2&quot;&gt;\r\n\t  &lt;Declaration xmlns=&quot;urn:wco:datamodel:WCO:DEC-DMS:2&quot;&gt;\r\n\t\t&lt;FunctionCode&gt;9&lt;/FunctionCode&gt;\r\n\t\t&lt;FunctionalReferenceID&gt;432189615698-46239&lt;/FunctionalReferenceID&gt;\r\n\t\t&lt;TypeCode&gt;EXD&lt;/TypeCode&gt;\r\n\t\t&lt;GoodsItemQuantity&gt;1&lt;/GoodsItemQuantity&gt;\r\n\t\t&lt;InvoiceAmount currencyID=&quot;GBP&quot;&gt;7001.00&lt;/InvoiceAmount&gt;\r\n\t  &lt;/Declaration&gt;\r\n    &lt;/MetaData&gt;\r\n    \r\nF7.xml:\r\n\r\n    &lt;MetaData xmlns=&quot;urn:wco:datamodel:WCO:DocumentMetaData-DMS:2&quot;&gt;\r\n\t  &lt;Declaration xmlns=&quot;urn:wco:datamodel:WCO:DEC-DMS:2&quot;&gt;\r\n\t  &lt;FunctionCode&gt;9&lt;/FunctionCode&gt;\r\n\t  &lt;AdditionalInformation&gt;\r\n\t\t\t&lt;StatementCode&gt;AG001&lt;/StatementCode&gt;\r\n\t\t\t&lt;StatementDescription&gt;AG001&lt;/StatementDescription&gt;\r\n\t\t\t&lt;Pointer&gt;\r\n\t\t\t\t&lt;SequenceNumeric&gt;1&lt;/SequenceNumeric&gt;\r\n\t\t\t\t&lt;DocumentSectionCode&gt;42A&lt;/DocumentSectionCode&gt;\r\n\t\t\t&lt;/Pointer&gt;\r\n\t  &lt;/AdditionalInformation&gt;\r\n\t  &lt;FunctionalReferenceID&gt;432189615698-46239&lt;/FunctionalReferenceID&gt;\r\n\t  &lt;GoodsItemQuantity&gt;11&lt;/GoodsItemQuantity&gt;\r\n\t  &lt;InvoiceAmount currencyID=&quot;GBP&quot;&gt;7001.00&lt;/InvoiceAmount&gt;\r\n\t  &lt;/Declaration&gt;\r\n    &lt;/MetaData&gt;\r\n\r\nI used below code to execute it:\r\n\r\n    Diff diffs = \r\n    DiffBuilder.compare(xml1).ignoreWhitespace().ignoreWhitespace().\t\t\t \r\n    withNodeMatcher(new \r\n    DefaultNodeMatcher(ElementSelectors.byNameAndAllAttributes))\r\n\t\t\t\t. withTest(xml2).build();\r\n\t\t\r\n\t\tIterator&lt;Difference&gt; iterator = \r\n    diffs.getDifferences().iterator();\r\n\t\twhile (iterator.hasNext()) {\r\n\t\t\tDifference nextDiff = iterator.next();\r\n\t\t\tSystem.out.println(&quot;--------------------&gt;&quot;+nextDiff);\r\n\t\t}\r\n\r\n \r\n\r\n...**and Actual Output was**\r\n\r\n        --------------------&gt;Expected child nodelist sequence &#39;1&#39; but was &#39;2&#39; - comparing &lt;FunctionalReferenceID...&gt; at /MetaData[1]/Declaration[1]/FunctionalReferenceID[1] to &lt;FunctionalReferenceID...&gt; at /MetaData[1]/Declaration[1]/FunctionalReferenceID[1] (SIMILAR)\r\n    --------------------&gt;Expected text value &#39;1&#39; but was &#39;11&#39; - comparing &lt;GoodsItemQuantity ...&gt;1&lt;/GoodsItemQuantity&gt; at /MetaData[1]/Declaration[1]/GoodsItemQuantity[1]/text()[1] to &lt;GoodsItemQuantity ...&gt;11&lt;/GoodsItemQuantity&gt; at /MetaData[1]/Declaration[1]/GoodsItemQuantity[1]/text()[1] (DIFFERENT)\r\n    --------------------&gt;Expected child &#39;{urn:wco:datamodel:WCO:DEC-DMS:2}TypeCode&#39; but was &#39;null&#39; - comparing &lt;TypeCode...&gt; at /MetaData[1]/Declaration[1]/TypeCode[1] to &lt;NULL&gt; (DIFFERENT)\r\n    --------------------&gt;Expected child &#39;null&#39; but was &#39;{urn:wco:datamodel:WCO:DEC-DMS:2}AdditionalInformation&#39; - comparing &lt;NULL&gt; to &lt;AdditionalInformation...&gt; at /MetaData[1]/Declaration[1]/AdditionalInformation[1] (DIFFERENT)\r\n\r\n\r\n**Expected Result Would Be:**    \r\n\r\n    //MetaData[1]/Declaration[1]/AdditionalInformation[1]/StatementCode[1]=&#39;AG001&#39;\r\n    //MetaData[1]/Declaration[1]/AdditionalInformation[1]/StatementDescription[1]=&#39;AG001&#39;\r\n    //MetaData[1]/Declaration[1]/AdditionalInformation[1]/Pointer[1]/SequenceNumeric[1]=&#39;1&#39;\r\n    //MetaData[1]/Declaration[1]/AdditionalInformation[1]/Pointer[1]/DocumentSectionCode[1]=&#39;42A&#39;\r\n\r\n**Note:** We are fine with modified values (**11**) and deleted node **TypeCode**. But we need in detail XPATH of what was added additionally, like it&#39;s shown in the expected results section.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Compare differences between two XML&#39;s for XPATH attribute/element and values","body":"<p>I have two XML's and i need differnece between those XML's as explained below:</p>\n<p>F6.XML:</p>\n<pre><code>&lt;MetaData xmlns=&quot;urn:wco:datamodel:WCO:DocumentMetaData-DMS:2&quot;&gt;\n  &lt;Declaration xmlns=&quot;urn:wco:datamodel:WCO:DEC-DMS:2&quot;&gt;\n    &lt;FunctionCode&gt;9&lt;/FunctionCode&gt;\n    &lt;FunctionalReferenceID&gt;432189615698-46239&lt;/FunctionalReferenceID&gt;\n    &lt;TypeCode&gt;EXD&lt;/TypeCode&gt;\n    &lt;GoodsItemQuantity&gt;1&lt;/GoodsItemQuantity&gt;\n    &lt;InvoiceAmount currencyID=&quot;GBP&quot;&gt;7001.00&lt;/InvoiceAmount&gt;\n  &lt;/Declaration&gt;\n&lt;/MetaData&gt;\n</code></pre>\n<p>F7.xml:</p>\n<pre><code>&lt;MetaData xmlns=&quot;urn:wco:datamodel:WCO:DocumentMetaData-DMS:2&quot;&gt;\n  &lt;Declaration xmlns=&quot;urn:wco:datamodel:WCO:DEC-DMS:2&quot;&gt;\n  &lt;FunctionCode&gt;9&lt;/FunctionCode&gt;\n  &lt;AdditionalInformation&gt;\n        &lt;StatementCode&gt;AG001&lt;/StatementCode&gt;\n        &lt;StatementDescription&gt;AG001&lt;/StatementDescription&gt;\n        &lt;Pointer&gt;\n            &lt;SequenceNumeric&gt;1&lt;/SequenceNumeric&gt;\n            &lt;DocumentSectionCode&gt;42A&lt;/DocumentSectionCode&gt;\n        &lt;/Pointer&gt;\n  &lt;/AdditionalInformation&gt;\n  &lt;FunctionalReferenceID&gt;432189615698-46239&lt;/FunctionalReferenceID&gt;\n  &lt;GoodsItemQuantity&gt;11&lt;/GoodsItemQuantity&gt;\n  &lt;InvoiceAmount currencyID=&quot;GBP&quot;&gt;7001.00&lt;/InvoiceAmount&gt;\n  &lt;/Declaration&gt;\n&lt;/MetaData&gt;\n</code></pre>\n<p>I used below code to execute it:</p>\n<pre><code>Diff diffs = \nDiffBuilder.compare(xml1).ignoreWhitespace().ignoreWhitespace().             \nwithNodeMatcher(new \nDefaultNodeMatcher(ElementSelectors.byNameAndAllAttributes))\n            . withTest(xml2).build();\n    \n    Iterator&lt;Difference&gt; iterator = \ndiffs.getDifferences().iterator();\n    while (iterator.hasNext()) {\n        Difference nextDiff = iterator.next();\n        System.out.println(&quot;--------------------&gt;&quot;+nextDiff);\n    }\n</code></pre>\n<p>...<strong>and Actual Output was</strong></p>\n<pre><code>    --------------------&gt;Expected child nodelist sequence '1' but was '2' - comparing &lt;FunctionalReferenceID...&gt; at /MetaData[1]/Declaration[1]/FunctionalReferenceID[1] to &lt;FunctionalReferenceID...&gt; at /MetaData[1]/Declaration[1]/FunctionalReferenceID[1] (SIMILAR)\n--------------------&gt;Expected text value '1' but was '11' - comparing &lt;GoodsItemQuantity ...&gt;1&lt;/GoodsItemQuantity&gt; at /MetaData[1]/Declaration[1]/GoodsItemQuantity[1]/text()[1] to &lt;GoodsItemQuantity ...&gt;11&lt;/GoodsItemQuantity&gt; at /MetaData[1]/Declaration[1]/GoodsItemQuantity[1]/text()[1] (DIFFERENT)\n--------------------&gt;Expected child '{urn:wco:datamodel:WCO:DEC-DMS:2}TypeCode' but was 'null' - comparing &lt;TypeCode...&gt; at /MetaData[1]/Declaration[1]/TypeCode[1] to &lt;NULL&gt; (DIFFERENT)\n--------------------&gt;Expected child 'null' but was '{urn:wco:datamodel:WCO:DEC-DMS:2}AdditionalInformation' - comparing &lt;NULL&gt; to &lt;AdditionalInformation...&gt; at /MetaData[1]/Declaration[1]/AdditionalInformation[1] (DIFFERENT)\n</code></pre>\n<p><strong>Expected Result Would Be:</strong></p>\n<pre><code>//MetaData[1]/Declaration[1]/AdditionalInformation[1]/StatementCode[1]='AG001'\n//MetaData[1]/Declaration[1]/AdditionalInformation[1]/StatementDescription[1]='AG001'\n//MetaData[1]/Declaration[1]/AdditionalInformation[1]/Pointer[1]/SequenceNumeric[1]='1'\n//MetaData[1]/Declaration[1]/AdditionalInformation[1]/Pointer[1]/DocumentSectionCode[1]='42A'\n</code></pre>\n<p><strong>Note:</strong> We are fine with modified values (<strong>11</strong>) and deleted node <strong>TypeCode</strong>. But we need in detail XPATH of what was added additionally, like it's shown in the expected results section.</p>\n"},{"tags":["java","spring-boot","jax-rs","wiremock","wiremock-standalone"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701333842,"post_id":77576964,"comment_id":136763355,"body_markdown":"`Caused by: java.lang.ArithmeticException: long overflow` that doesn&#39;t have anything to do with Jakarta afaik. Spring Boot 3 uses Jakarta, as long as you aren&#39;t using that it doesn&#39;t matter.","body":"<code>Caused by: java.lang.ArithmeticException: long overflow</code> that doesn&#39;t have anything to do with Jakarta afaik. Spring Boot 3 uses Jakarta, as long as you aren&#39;t using that it doesn&#39;t matter."},{"owner":{"account_id":30029316,"reputation":1,"user_id":23012772,"display_name":"aviral"},"score":0,"creation_date":1701347648,"post_id":77576964,"comment_id":136765840,"body_markdown":"I already changed to the Jakarta namespace with Spring Boot 3","body":"I already changed to the Jakarta namespace with Spring Boot 3"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701347703,"post_id":77576964,"comment_id":136765848,"body_markdown":"Not according to your question.","body":"Not according to your question."},{"owner":{"account_id":30029316,"reputation":1,"user_id":23012772,"display_name":"aviral"},"score":0,"creation_date":1701348060,"post_id":77576964,"comment_id":136765924,"body_markdown":"I have updated the details. I tried 2 things 1-  Java 17, Spring boot 2 with javax. 2- Java17 spring boot 3 with jakarta. In both case my application is working just junits that are related to wiremock are failing","body":"I have updated the details. I tried 2 things 1-  Java 17, Spring boot 2 with javax. 2- Java17 spring boot 3 with jakarta. In both case my application is working just junits that are related to wiremock are failing"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701352535,"post_id":77576964,"comment_id":136766845,"body_markdown":"Which is what I said that `Caused by: java.lang.ArithmeticException: long overflow` it has nothing to do with JakartaEE / JavaEE. Either a wiremock version that isn&#39;t java17 compatible or something in your configuration.","body":"Which is what I said that <code>Caused by: java.lang.ArithmeticException: long overflow</code> it has nothing to do with JakartaEE / JavaEE. Either a wiremock version that isn&#39;t java17 compatible or something in your configuration."}],"owner":{"account_id":30029316,"reputation":1,"user_id":23012772,"display_name":"aviral"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701347866,"creation_date":1701333373,"question_id":77576964,"body_markdown":"We have our application using Spring Boot 2.7 with Java 8. It&#39;s a restful service that uses JAX-RS with Jersey for implementation. I am now trying to move to Java 17 and the Application is working as expected but we have some junit test cases that use wiremock and they are failing. I tried to upgrade the version of Wiremock but still had no success. We are currently using com.github.tomakehurst:wiremock-jre8:2.35.0. It&#39;s working completely fine with Java 8 but not with Java 17. I tried com.github.tomakehurst:wiremock-jre8:3.0.0, com.github.tomakehurst:wiremock:3.0.0 and all major versions from new packages like org.wiremock:wiremock:3.0.4.\r\n\r\nI read there are issues due to javax/jakarta namespace change and using stand-alone package might help but in my case, I am getting errors with that as well. As I have not upgraded my spring boot version to 3 or above I am still using javax package.\r\n\r\nAfter trying for many weeks I decided to upgrade to spring boot 3 and again after doing all the changes (Including changes related to jakarta namespace) everything started working and still wiremock dosn&#39;t. I again tried diffrent packages and versions of wiremock like 2.27.2, 3.0.4, 3.1.0, 3.2.0, 3.3.0 with both normal as well as stand alone packages.\r\n\r\nThis is how we are mocking.\r\n\r\n```java\r\npublic void stubDelete(String url, int status) {\r\n        WireMock.stubFor(delete(urlEqualTo(url))\r\n            .willReturn(aResponse()\r\n                .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                .withStatus(status))\r\n            );\r\n    }\r\n```\r\n\r\nI get the following error.\r\n\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3fc064cb testClass = com.test.IntegrationTest, locations = [], classes = [com.test.Application], contextInitializerClasses = [], activeProfiles = [&quot;test&quot;], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true&quot;, &quot;server.port=0&quot;], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@23f5b5dc, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5db6b9cd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@4dc27487, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@f58853c, org.springframework.boot.test.context.SpringBootTestAnnotation@ce740854], resourceBasePath = &quot;src/main/webapp&quot;, contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n.\r\n.\r\n.\r\nCaused by: java.lang.ArithmeticException: long overflow\r\n```\r\n\r\n\r\n\r\n\r\nCan someone help me understand why we get this error and how to resolve it?","title":"Wiremock issue when upgrading to java 17","body":"<p>We have our application using Spring Boot 2.7 with Java 8. It's a restful service that uses JAX-RS with Jersey for implementation. I am now trying to move to Java 17 and the Application is working as expected but we have some junit test cases that use wiremock and they are failing. I tried to upgrade the version of Wiremock but still had no success. We are currently using com.github.tomakehurst:wiremock-jre8:2.35.0. It's working completely fine with Java 8 but not with Java 17. I tried com.github.tomakehurst:wiremock-jre8:3.0.0, com.github.tomakehurst:wiremock:3.0.0 and all major versions from new packages like org.wiremock:wiremock:3.0.4.</p>\n<p>I read there are issues due to javax/jakarta namespace change and using stand-alone package might help but in my case, I am getting errors with that as well. As I have not upgraded my spring boot version to 3 or above I am still using javax package.</p>\n<p>After trying for many weeks I decided to upgrade to spring boot 3 and again after doing all the changes (Including changes related to jakarta namespace) everything started working and still wiremock dosn't. I again tried diffrent packages and versions of wiremock like 2.27.2, 3.0.4, 3.1.0, 3.2.0, 3.3.0 with both normal as well as stand alone packages.</p>\n<p>This is how we are mocking.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void stubDelete(String url, int status) {\n        WireMock.stubFor(delete(urlEqualTo(url))\n            .willReturn(aResponse()\n                .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                .withStatus(status))\n            );\n    }\n</code></pre>\n<p>I get the following error.</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3fc064cb testClass = com.test.IntegrationTest, locations = [], classes = [com.test.Application], contextInitializerClasses = [], activeProfiles = [&quot;test&quot;], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true&quot;, &quot;server.port=0&quot;], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@23f5b5dc, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5db6b9cd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@4dc27487, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@f58853c, org.springframework.boot.test.context.SpringBootTestAnnotation@ce740854], resourceBasePath = &quot;src/main/webapp&quot;, contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\n.\n.\n.\nCaused by: java.lang.ArithmeticException: long overflow\n</code></pre>\n<p>Can someone help me understand why we get this error and how to resolve it?</p>\n"},{"tags":["java","spring","spring-boot","google-sheets"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1701365512,"post_id":77578460,"comment_id":136769501,"body_markdown":"Do not catch the generic Exception. At least, log the stack trace and come back with the log messages editing your question.","body":"Do not catch the generic Exception. At least, log the stack trace and come back with the log messages editing your question."}],"owner":{"account_id":29476074,"reputation":1,"user_id":22587809,"display_name":"Sangeeth Nawarathna"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701347742,"creation_date":1701347561,"question_id":77578460,"body_markdown":"In my spring boot application, I have this method I got from [Java quickstart - Google Sheet Integrate\r\n](https://developers.google.com/sheets/api/quickstart/java).  \r\n\r\n```\r\n    private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT) {\r\n        try {\r\n            InputStream secrets = SheetDataStreamer.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\r\n            if (secrets == null) {\r\n                throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\r\n            }\r\n            GoogleClientSecrets clientSecrets =\r\n                    GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(secrets));\r\n\r\n            String resourcesPath = Objects.requireNonNull(SheetDataStreamer.class.getClassLoader()\r\n                    .getResource(&quot;&quot;))\r\n                    .getPath();\r\n\r\n            String tokensPath = new File(resourcesPath, TOKENS_DIRECTORY_PATH).getPath();\r\n\r\n            GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\r\n                    HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\r\n                    .setDataStoreFactory(new FileDataStoreFactory(new java.io.File(tokensPath)))\r\n                    .setAccessType(&quot;offline&quot;)\r\n                    .build();\r\n            LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\r\n            return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\r\n        } catch (Exception e) {\r\n            logger.error(&quot;getCredentials -&gt; error while getting google credentials : {}&quot;, e.getMessage());\r\n            return null;\r\n        }\r\n    }\r\n```\r\n\r\n\r\n\r\nWhen I run the application locally, everything works fine. In the documentation they mentioned that we need to add redirect URI. I added that one also. When run locally, at first time executing this method, there is a URL in the log to redirect to do authorization. But after deploy, I can not get it. My backend URL is like this and I added it to Authorized redirect URIs like `https://test-domain:8888/Callback` . How can I overcome this?","title":"Spring Boot Google Sheet Integration","body":"<p>In my spring boot application, I have this method I got from <a href=\"https://developers.google.com/sheets/api/quickstart/java\" rel=\"nofollow noreferrer\">Java quickstart - Google Sheet Integrate\n</a>.</p>\n<pre><code>    private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT) {\n        try {\n            InputStream secrets = SheetDataStreamer.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\n            if (secrets == null) {\n                throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\n            }\n            GoogleClientSecrets clientSecrets =\n                    GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(secrets));\n\n            String resourcesPath = Objects.requireNonNull(SheetDataStreamer.class.getClassLoader()\n                    .getResource(&quot;&quot;))\n                    .getPath();\n\n            String tokensPath = new File(resourcesPath, TOKENS_DIRECTORY_PATH).getPath();\n\n            GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n                    HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\n                    .setDataStoreFactory(new FileDataStoreFactory(new java.io.File(tokensPath)))\n                    .setAccessType(&quot;offline&quot;)\n                    .build();\n            LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\n            return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\n        } catch (Exception e) {\n            logger.error(&quot;getCredentials -&gt; error while getting google credentials : {}&quot;, e.getMessage());\n            return null;\n        }\n    }\n</code></pre>\n<p>When I run the application locally, everything works fine. In the documentation they mentioned that we need to add redirect URI. I added that one also. When run locally, at first time executing this method, there is a URL in the log to redirect to do authorization. But after deploy, I can not get it. My backend URL is like this and I added it to Authorized redirect URIs like <code>https://test-domain:8888/Callback</code> . How can I overcome this?</p>\n"},{"tags":["java","spring-boot","drools","kie"],"comments":[{"owner":{"account_id":183966,"reputation":14630,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1701344865,"post_id":77577944,"comment_id":136765316,"body_markdown":"Is that the _only_ drools dependency?","body":"Is that the <i>only</i> drools dependency?"},{"owner":{"account_id":30030611,"reputation":1,"user_id":23013816,"display_name":"user23013816"},"score":0,"creation_date":1701346061,"post_id":77577944,"comment_id":136765535,"body_markdown":"yes , kie-ci has all drool related dependency.","body":"yes , kie-ci has all drool related dependency."}],"owner":{"account_id":30030611,"reputation":1,"user_id":23013816,"display_name":"user23013816"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701347488,"creation_date":1701342691,"question_id":77577944,"body_markdown":"We have a drool based rule engine deployed on tomcat 9.0.63, java 17. I am using drools 9.44.0.Final version. when I deploy the code on AKS, I am getting intermittent issue mentioned in the screenshot. \r\n\r\nWe have yml based configuration for defining the rule. We are reading our DRL (yml configuration file), and using `StatelessKieSession`. \r\n\r\nBelow dependency we have used related to drool.\r\n```\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.kie&lt;/groupId&gt;\r\n&lt;artifactId&gt;kie-ci&lt;/artifactId&gt;\r\n&lt;version&gt;9.44.0.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nwe are getting the below error while calling the getDialect() method from RuleBuilderContext.class from drools-compiler-9.44.0.Final.jar\r\n[enter image description here](https://i.stack.imgur.com/5rsIz.png)\r\n````\r\njava.lang.NullPointerException: Cannot invoke &quot;org.drools.compiler.compiler.Dialect.getId()&quot; because the return value of &quot;org.drools.compiler.rule.builder.RuleBuildContext.getDialect()&quot; is null at org.drools.compiler.rule.builder.RuleBuildContext.&lt;init&gt;(RuleBuildContext.java:86) at org.drools.compiler.builder.impl.processors.ImmutableRuleCompilationPhase.buildRuleBuilderContext(ImmutableRuleCompilationPhase.java:259) at org.drools.compiler.builder.impl.processors.ImmutableRuleCompilationPhase.lambda$compileRulesLevel$3(ImmutableRuleCompilationPhase.java:274)\r\n````","title":"java.lang.NullPointerException: Cannot invoke &quot;org.drools.compiler.compiler.Dialect.getId()&quot;","body":"<p>We have a drool based rule engine deployed on tomcat 9.0.63, java 17. I am using drools 9.44.0.Final version. when I deploy the code on AKS, I am getting intermittent issue mentioned in the screenshot.</p>\n<p>We have yml based configuration for defining the rule. We are reading our DRL (yml configuration file), and using <code>StatelessKieSession</code>.</p>\n<p>Below dependency we have used related to drool.</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.kie&lt;/groupId&gt;\n&lt;artifactId&gt;kie-ci&lt;/artifactId&gt;\n&lt;version&gt;9.44.0.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>we are getting the below error while calling the getDialect() method from RuleBuilderContext.class from drools-compiler-9.44.0.Final.jar\n<a href=\"https://i.stack.imgur.com/5rsIz.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.drools.compiler.compiler.Dialect.getId()&quot; because the return value of &quot;org.drools.compiler.rule.builder.RuleBuildContext.getDialect()&quot; is null at org.drools.compiler.rule.builder.RuleBuildContext.&lt;init&gt;(RuleBuildContext.java:86) at org.drools.compiler.builder.impl.processors.ImmutableRuleCompilationPhase.buildRuleBuilderContext(ImmutableRuleCompilationPhase.java:259) at org.drools.compiler.builder.impl.processors.ImmutableRuleCompilationPhase.lambda$compileRulesLevel$3(ImmutableRuleCompilationPhase.java:274)\n</code></pre>\n"},{"tags":["java","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":2464526,"reputation":1549,"user_id":2147927,"accept_rate":100,"display_name":"Line"},"score":0,"creation_date":1677929405,"post_id":3555472,"comment_id":133436697,"body_markdown":"shouldn&#39;t you call `Mockito.verify(mock).myMedhod()` instead of `Mockito.verify(mock.myMethod())`?","body":"shouldn&#39;t you call <code>Mockito.verify(mock).myMedhod()</code> instead of <code>Mockito.verify(mock.myMethod())</code>?"}],"answers":[{"comments":[{"owner":{"account_id":59829,"reputation":6802,"user_id":178913,"accept_rate":70,"display_name":"manolowar"},"score":0,"creation_date":1282646494,"post_id":3555533,"comment_id":3725551,"body_markdown":"I&#39;d tried that before, and again now to be sure. I still have the same problem, the test always passes.","body":"I&#39;d tried that before, and again now to be sure. I still have the same problem, the test always passes."},{"owner":{"account_id":5574624,"reputation":985,"user_id":5270632,"accept_rate":38,"display_name":"cnexans"},"score":4,"creation_date":1536613065,"post_id":3555533,"comment_id":91478802,"body_markdown":"It verifeis by reference","body":"It verifeis by reference"},{"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"score":0,"creation_date":1634839195,"post_id":3555533,"comment_id":123141303,"body_markdown":"@cnexans , no it doesn&#39;t verify by reference. Moreover, `eq` would be the SonarQube/SonarCloud code smell alert: https://rules.sonarsource.com/java/tag/mockito/RSPEC-6068","body":"@cnexans , no it doesn&#39;t verify by reference. Moreover, <code>eq</code> would be the SonarQube/SonarCloud code smell alert: <a href=\"https://rules.sonarsource.com/java/tag/mockito/RSPEC-6068\" rel=\"nofollow noreferrer\">rules.sonarsource.com/java/tag/mockito/RSPEC-6068</a>"}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":3,"down_vote_count":0,"up_vote_count":63,"is_accepted":false,"score":63,"last_activity_date":1282646192,"creation_date":1282646192,"answer_id":3555533,"question_id":3555472,"body_markdown":"- You don&#39;t need the `eq` matcher if you don&#39;t use other matchers.\r\n- You are not using the correct syntax - your method call should be outside the `.verify(mock)`. You are now initiating verification on the result of the method call, without verifying anything (not making a method call). Hence all tests are passing.\r\n\r\nYou code should look like:\r\n\r\n    Mockito.verify(mock).mymethod(obj);\r\n    Mockito.verify(mock).mymethod(null);\r\n    Mockito.verify(mock).mymethod(&quot;something_else&quot;);\r\n","title":"Mockito. Verify method arguments","body":"<ul>\n<li>You don't need the <code>eq</code> matcher if you don't use other matchers.</li>\n<li>You are not using the correct syntax - your method call should be outside the <code>.verify(mock)</code>. You are now initiating verification on the result of the method call, without verifying anything (not making a method call). Hence all tests are passing.</li>\n</ul>\n\n<p>You code should look like:</p>\n\n<pre><code>Mockito.verify(mock).mymethod(obj);\nMockito.verify(mock).mymethod(null);\nMockito.verify(mock).mymethod(\"something_else\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":432920,"reputation":2308,"user_id":817964,"accept_rate":58,"display_name":"rit"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1330676262,"creation_date":1330676262,"answer_id":9530065,"question_id":3555472,"body_markdown":"Have you checked the equals method for the mockable class? If this one returns always true or you test the same instance against the same instance and the equal method is not overwritten (and therefor only checks against the references), then it returns true.","title":"Mockito. Verify method arguments","body":"<p>Have you checked the equals method for the mockable class? If this one returns always true or you test the same instance against the same instance and the equal method is not overwritten (and therefor only checks against the references), then it returns true.</p>\n"},{"comments":[{"owner":{"account_id":21945,"reputation":1757,"user_id":53732,"accept_rate":58,"display_name":"takacsot"},"score":1,"creation_date":1397629384,"post_id":15178418,"comment_id":35311549,"body_markdown":"You could use the build in `ReflectionEquals` class for that purposes.","body":"You could use the build in <code>ReflectionEquals</code> class for that purposes."},{"owner":{"account_id":3843404,"reputation":456,"user_id":3185770,"display_name":"efux"},"score":4,"creation_date":1432146749,"post_id":15178418,"comment_id":48807210,"body_markdown":"+1 for your answer. But I&#39;d like to add that `verify(mock).mymethod(obj);` doesn&#39;t check for EXACT equality (same object in memory). Instead it uses the objects equals-method which could have been overwridden.","body":"+1 for your answer. But I&#39;d like to add that <code>verify(mock).mymethod(obj);</code> doesn&#39;t check for EXACT equality (same object in memory). Instead it uses the objects equals-method which could have been overwridden."},{"owner":{"account_id":516334,"reputation":4808,"user_id":1680826,"accept_rate":60,"display_name":"botchniaque"},"score":0,"creation_date":1441112879,"post_id":15178418,"comment_id":52539147,"body_markdown":"You can also create an anonymous implementation of `ArgumentMatcher` to be less verbose.","body":"You can also create an anonymous implementation of <code>ArgumentMatcher</code> to be less verbose."},{"owner":{"account_id":285738,"reputation":2856,"user_id":584585,"display_name":"Mark McKenna"},"score":1,"creation_date":1466706254,"post_id":15178418,"comment_id":63442253,"body_markdown":"More detail: by default `verify()` invokes the /inbound argument&#39;s/ `equals()` method, rather than the /recorded object&#39;s/ `equals()` method.  this is irrelevant unless you are trying to confirm that your test subject returns a specific object instance, and the subject returns what is supposed to be a transparent decorator of that instance instead.  The `verify` argument&#39;s `equals()` would not know of the decorator; while the decorator&#39;s `equals()` would be rewritten to tolerate the original.  In this instance your test will falsely fail.","body":"More detail: by default <code>verify()</code> invokes the /inbound argument&#39;s/ <code>equals()</code> method, rather than the /recorded object&#39;s/ <code>equals()</code> method.  this is irrelevant unless you are trying to confirm that your test subject returns a specific object instance, and the subject returns what is supposed to be a transparent decorator of that instance instead.  The <code>verify</code> argument&#39;s <code>equals()</code> would not know of the decorator; while the decorator&#39;s <code>equals()</code> would be rewritten to tolerate the original.  In this instance your test will falsely fail."}],"tags":[],"owner":{"account_id":743291,"reputation":4158,"user_id":726047,"accept_rate":87,"display_name":"Matthew Kirkley"},"comment_count":4,"down_vote_count":3,"up_vote_count":78,"is_accepted":false,"score":75,"last_activity_date":1362252276,"creation_date":1362252276,"answer_id":15178418,"question_id":3555472,"body_markdown":"Are you trying to do logical equality utilizing the object&#39;s .equals method? You can do this utilizing the argThat matcher that is included in Mockito\r\n\r\n    import static org.mockito.Matchers.argThat\r\n\r\nNext you can implement your own argument matcher that will defer to each objects .equals method\r\n\r\n    private class ObjectEqualityArgumentMatcher&lt;T&gt; extends ArgumentMatcher&lt;T&gt; {\r\n        T thisObject;\r\n        \r\n        public ObjectEqualityArgumentMatcher(T thisObject) {\r\n            this.thisObject = thisObject;\r\n        }\r\n        \r\n        @Override\r\n        public boolean matches(Object argument) {\r\n            return thisObject.equals(argument);\r\n        }\r\n    }\r\n\r\nNow using your code you can update it to read...\r\n\r\n    Object obj = getObject();\r\n    Mockeable mock= Mockito.mock(Mockeable.class);\r\n    Mockito.when(mock.mymethod(obj)).thenReturn(null);\r\n\r\n    Testeable obj = new Testeable();\r\n    obj.setMockeable(mock);\r\n    command.runtestmethod();\r\n\r\n    verify(mock).mymethod(argThat(new ObjectEqualityArgumentMatcher&lt;Object&gt;(obj)));\r\n\r\nIf you are just going for EXACT equality (same object in memory), just do\r\n\r\n    verify(mock).mymethod(obj);\r\n\r\nThis will verify it was called once.\r\n\r\n","title":"Mockito. Verify method arguments","body":"<p>Are you trying to do logical equality utilizing the object's .equals method? You can do this utilizing the argThat matcher that is included in Mockito</p>\n\n<pre><code>import static org.mockito.Matchers.argThat\n</code></pre>\n\n<p>Next you can implement your own argument matcher that will defer to each objects .equals method</p>\n\n<pre><code>private class ObjectEqualityArgumentMatcher&lt;T&gt; extends ArgumentMatcher&lt;T&gt; {\n    T thisObject;\n\n    public ObjectEqualityArgumentMatcher(T thisObject) {\n        this.thisObject = thisObject;\n    }\n\n    @Override\n    public boolean matches(Object argument) {\n        return thisObject.equals(argument);\n    }\n}\n</code></pre>\n\n<p>Now using your code you can update it to read...</p>\n\n<pre><code>Object obj = getObject();\nMockeable mock= Mockito.mock(Mockeable.class);\nMockito.when(mock.mymethod(obj)).thenReturn(null);\n\nTesteable obj = new Testeable();\nobj.setMockeable(mock);\ncommand.runtestmethod();\n\nverify(mock).mymethod(argThat(new ObjectEqualityArgumentMatcher&lt;Object&gt;(obj)));\n</code></pre>\n\n<p>If you are just going for EXACT equality (same object in memory), just do</p>\n\n<pre><code>verify(mock).mymethod(obj);\n</code></pre>\n\n<p>This will verify it was called once.</p>\n"},{"tags":[],"owner":{"account_id":1018775,"reputation":479,"user_id":1029735,"accept_rate":83,"display_name":"cbbcloud"},"comment_count":0,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1435944541,"creation_date":1435944541,"answer_id":31211831,"question_id":3555472,"body_markdown":"Have you tried it with the same() matcher? As in:\r\n\r\n    verify(mockObj).someMethod(same(specificInstance));\r\n\r\nI had the same problem. I tried it with the eq() matcher as well as the refEq() matcher but I always had false positives. When I used the same() matcher, the test failed when the arguments were different instances and passed once the arguments were the same instance.","title":"Mockito. Verify method arguments","body":"<p>Have you tried it with the same() matcher? As in:</p>\n\n<pre><code>verify(mockObj).someMethod(same(specificInstance));\n</code></pre>\n\n<p>I had the same problem. I tried it with the eq() matcher as well as the refEq() matcher but I always had false positives. When I used the same() matcher, the test failed when the arguments were different instances and passed once the arguments were the same instance.</p>\n"},{"comments":[{"owner":{"account_id":1326426,"reputation":4831,"user_id":1271136,"accept_rate":100,"display_name":"Artemis"},"score":1,"creation_date":1456842744,"post_id":32090171,"comment_id":59125934,"body_markdown":"Thanks for sample! Never used it. Feels to be a bit weird to have things like *captor* in the code, but it helped.","body":"Thanks for sample! Never used it. Feels to be a bit weird to have things like <i>captor</i> in the code, but it helped."},{"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"score":4,"creation_date":1510664075,"post_id":32090171,"comment_id":81522589,"body_markdown":"Haha, I did not understand the question, but the answer helped me a lot. Thanks :-)","body":"Haha, I did not understand the question, but the answer helped me a lot. Thanks :-)"},{"owner":{"account_id":1431635,"reputation":5085,"user_id":1353930,"accept_rate":50,"display_name":"Daniel Alder"},"score":28,"creation_date":1519228978,"post_id":32090171,"comment_id":84826760,"body_markdown":"Important: Call verify()/capture() _after_ using the mock. I was thinking it has to be &quot;installed&quot; before...","body":"Important: Call verify()/capture() <i>after</i> using the mock. I was thinking it has to be &quot;installed&quot; before..."},{"owner":{"account_id":9010593,"reputation":2151,"user_id":6715384,"display_name":"HMT"},"score":0,"creation_date":1593777972,"post_id":32090171,"comment_id":110905138,"body_markdown":"I can&#39;t find the doSomething method","body":"I can&#39;t find the doSomething method"},{"owner":{"account_id":1333279,"reputation":6465,"user_id":1276636,"accept_rate":62,"display_name":"Sufian"},"score":0,"creation_date":1594049905,"post_id":32090171,"comment_id":110983708,"body_markdown":"In Kotlin, I do it like this: ```val captor = argumentCaptor&lt;Float&gt;();\n        verify(mView).onShowExtraAmountToBePaid(captor.capture());\n\n        Assert.assertTrue(captor.firstValue == 10f);```","body":"In Kotlin, I do it like this: <code>val captor = argumentCaptor&lt;Float&gt;();         verify(mView).onShowExtraAmountToBePaid(captor.capture());          Assert.assertTrue(captor.firstValue == 10f);</code>"},{"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"score":0,"creation_date":1644524507,"post_id":32090171,"comment_id":125636724,"body_markdown":"It even works for Lists! `ArgumentCaptor&lt;List&lt;Person&gt;&gt; argument = ArgumentCaptor.forClass(List.class);`","body":"It even works for Lists! <code>ArgumentCaptor&lt;List&lt;Person&gt;&gt; argument = ArgumentCaptor.forClass(List.class);</code>"},{"owner":{"account_id":16752149,"reputation":2993,"user_id":12109043,"display_name":"zr0gravity7"},"score":0,"creation_date":1663964263,"post_id":32090171,"comment_id":130371561,"body_markdown":"For simpler verifications, for example that a method has been called with a string value. You can simply use `verify()`. E.g. `verify(myMock).myMethodToVerify(&quot;a&quot;);`.","body":"For simpler verifications, for example that a method has been called with a string value. You can simply use <code>verify()</code>. E.g. <code>verify(myMock).myMethodToVerify(&quot;a&quot;);</code>."}],"tags":[],"owner":{"account_id":2118179,"reputation":8542,"user_id":1882010,"accept_rate":100,"display_name":"eugene82"},"comment_count":7,"down_vote_count":1,"up_vote_count":530,"is_accepted":false,"score":529,"last_activity_date":1487538039,"creation_date":1439972539,"answer_id":32090171,"question_id":3555472,"body_markdown":"An alternative to `ArgumentMatcher` is [`ArgumentCaptor`][1].\r\n\r\nOfficial example:\r\n\r\n    ArgumentCaptor&lt;Person&gt; argument = ArgumentCaptor.forClass(Person.class);\r\n    verify(mock).doSomething(argument.capture());\r\n    assertEquals(&quot;John&quot;, argument.getValue().getName());\r\n\r\nA captor can also be defined using the [@Captor][2] annotation: \r\n\r\n    @Captor ArgumentCaptor&lt;Person&gt; captor;\r\n    //... MockitoAnnotations.initMocks(this);\r\n    @Test public void test() {\r\n        //...\r\n        verify(mock).doSomething(captor.capture());\r\n        assertEquals(&quot;John&quot;, captor.getValue().getName());\r\n    }\r\n\r\n  [1]: https://static.javadoc.io/org.mockito/mockito-core/2.7.9/org/mockito/ArgumentCaptor.html\r\n  [2]: https://static.javadoc.io/org.mockito/mockito-core/2.7.9/org/mockito/Captor.html","title":"Mockito. Verify method arguments","body":"<p>An alternative to <code>ArgumentMatcher</code> is <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.7.9/org/mockito/ArgumentCaptor.html\" rel=\"noreferrer\"><code>ArgumentCaptor</code></a>.</p>\n\n<p>Official example:</p>\n\n<pre><code>ArgumentCaptor&lt;Person&gt; argument = ArgumentCaptor.forClass(Person.class);\nverify(mock).doSomething(argument.capture());\nassertEquals(\"John\", argument.getValue().getName());\n</code></pre>\n\n<p>A captor can also be defined using the <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.7.9/org/mockito/Captor.html\" rel=\"noreferrer\">@Captor</a> annotation: </p>\n\n<pre><code>@Captor ArgumentCaptor&lt;Person&gt; captor;\n//... MockitoAnnotations.initMocks(this);\n@Test public void test() {\n    //...\n    verify(mock).doSomething(captor.capture());\n    assertEquals(\"John\", captor.getValue().getName());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3171905,"reputation":10222,"user_id":2680640,"display_name":"sendon1982"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1505222629,"creation_date":1455681914,"answer_id":35447732,"question_id":3555472,"body_markdown":"You can also use TypeSafeDiagnosingMatcher\r\n\r\n        private Matcher&lt;GetPackagesRequest&gt; expectedPackageRequest(final AvailabilityRequest request) {\r\n        return new TypeSafeDiagnosingMatcher&lt;GetPackagesRequest&gt;() {\r\n\r\n            StringBuilder text = new StringBuilder(500);\r\n\r\n            @Override\r\n            protected boolean matchesSafely(GetPackagesRequest req, Description desc) {\r\n                String productCode = req.getPackageIds().iterator().next().getValue();\r\n                if (productCode.equals(request.getSupplierProductCode())) {\r\n                    text.append(&quot;ProductCode not equal! &quot; + productCode + &quot; , &quot; + request.getSupplierProductCode());\r\n                    return true;\r\n                }\r\n\r\n                text.append(req.toString());\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public void describeTo(Description d) {\r\n                d.appendText(text.toString());\r\n            }\r\n        };\r\n    }\r\n\r\nThen verify that invocation:\r\n\r\n    Mockito.verify(client).getPackages(Mockito.argThat(expectedPackageRequest(request)));\r\n","title":"Mockito. Verify method arguments","body":"<p>You can also use TypeSafeDiagnosingMatcher</p>\n\n<pre><code>    private Matcher&lt;GetPackagesRequest&gt; expectedPackageRequest(final AvailabilityRequest request) {\n    return new TypeSafeDiagnosingMatcher&lt;GetPackagesRequest&gt;() {\n\n        StringBuilder text = new StringBuilder(500);\n\n        @Override\n        protected boolean matchesSafely(GetPackagesRequest req, Description desc) {\n            String productCode = req.getPackageIds().iterator().next().getValue();\n            if (productCode.equals(request.getSupplierProductCode())) {\n                text.append(\"ProductCode not equal! \" + productCode + \" , \" + request.getSupplierProductCode());\n                return true;\n            }\n\n            text.append(req.toString());\n            return false;\n        }\n\n        @Override\n        public void describeTo(Description d) {\n            d.appendText(text.toString());\n        }\n    };\n}\n</code></pre>\n\n<p>Then verify that invocation:</p>\n\n<pre><code>Mockito.verify(client).getPackages(Mockito.argThat(expectedPackageRequest(request)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6778221,"reputation":554,"user_id":5219412,"accept_rate":88,"display_name":"Nils Renaud"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1457418387,"creation_date":1457418387,"answer_id":35860485,"question_id":3555472,"body_markdown":"The other method is to use the org.mockito.internal.matchers.Equals.Equals method instead of redefining one : \r\n\r\n    verify(myMock).myMethod((inputObject)Mockito.argThat(new Equals(inputObjectWanted)));\r\n","title":"Mockito. Verify method arguments","body":"<p>The other method is to use the org.mockito.internal.matchers.Equals.Equals method instead of redefining one : </p>\n\n<pre><code>verify(myMock).myMethod((inputObject)Mockito.argThat(new Equals(inputObjectWanted)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1773636,"reputation":5342,"user_id":1617910,"accept_rate":68,"display_name":"Free-Minded"},"comment_count":0,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1511260737,"creation_date":1511260737,"answer_id":47411011,"question_id":3555472,"body_markdown":"I have used Mockito.verify in this way\r\n\r\n    @UnitTest\r\n    public class JUnitServiceTest\r\n    {\r\n        @Mock\r\n\t    private MyCustomService myCustomService;\r\n\t\r\n\t\r\n\t    @Test\r\n\t    public void testVerifyMethod()\r\n\t    {\r\n\t       Mockito.verify(myCustomService, Mockito.never()).mymethod(parameters); // method will never call (an alternative can be pick to use times(0))\r\n\t       Mockito.verify(myCustomService, Mockito.times(2)).mymethod(parameters); // method will call for 2 times\r\n\t       Mockito.verify(myCustomService, Mockito.atLeastOnce()).mymethod(parameters); // method will call atleast 1 time\r\n\t       Mockito.verify(myCustomService, Mockito.atLeast(2)).mymethod(parameters); // method will call atleast 2 times\r\n\t       Mockito.verify(myCustomService, Mockito.atMost(3)).mymethod(parameters); // method will call at most 3 times\r\n           Mockito.verify(myCustomService, Mockito.only()).mymethod(parameters); //\t  no other method called except this\r\n\t    }\r\n    }\r\n\r\n\r\n","title":"Mockito. Verify method arguments","body":"<p>I have used Mockito.verify in this way</p>\n\n<pre><code>@UnitTest\npublic class JUnitServiceTest\n{\n    @Mock\n    private MyCustomService myCustomService;\n\n\n    @Test\n    public void testVerifyMethod()\n    {\n       Mockito.verify(myCustomService, Mockito.never()).mymethod(parameters); // method will never call (an alternative can be pick to use times(0))\n       Mockito.verify(myCustomService, Mockito.times(2)).mymethod(parameters); // method will call for 2 times\n       Mockito.verify(myCustomService, Mockito.atLeastOnce()).mymethod(parameters); // method will call atleast 1 time\n       Mockito.verify(myCustomService, Mockito.atLeast(2)).mymethod(parameters); // method will call atleast 2 times\n       Mockito.verify(myCustomService, Mockito.atMost(3)).mymethod(parameters); // method will call at most 3 times\n       Mockito.verify(myCustomService, Mockito.only()).mymethod(parameters); //   no other method called except this\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4540049,"reputation":943,"user_id":3688173,"accept_rate":63,"display_name":"Airwavezx"},"score":2,"creation_date":1588598249,"post_id":57281503,"comment_id":108951134,"body_markdown":"This one is my favourite answer, works &amp; much more elegant than the others.","body":"This one is my favourite answer, works &amp; much more elegant than the others."},{"owner":{"account_id":1902481,"reputation":6013,"user_id":1718042,"accept_rate":61,"display_name":"max"},"score":1,"creation_date":1627456958,"post_id":57281503,"comment_id":121158198,"body_markdown":"how this is work?\nverify(mock).mymethod(eq(&quot;VALUE_1&quot;), argThat((x)-&gt;false));\n&quot;mymethod&quot; has one arg how we are sending two?","body":"how this is work? verify(mock).mymethod(eq(&quot;VALUE_1&quot;), argThat((x)-&gt;false)); &quot;mymethod&quot; has one arg how we are sending two?"},{"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"score":0,"creation_date":1627495446,"post_id":57281503,"comment_id":121174441,"body_markdown":"@max, right catch. The example was under *... with multiple arguments* section, so, yes, you are right, it has no relation to the original `mymethod(arg0)` case. It only makes sense for a different (2 args) case. **Renaming it to mymethod2, to avoid the confusion, a little bit**.","body":"@max, right catch. The example was under <i>... with multiple arguments</i> section, so, yes, you are right, it has no relation to the original <code>mymethod(arg0)</code> case. It only makes sense for a different (2 args) case. <b>Renaming it to mymethod2, to avoid the confusion, a little bit</b>."}],"tags":[],"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"comment_count":3,"down_vote_count":0,"up_vote_count":130,"is_accepted":false,"score":130,"last_activity_date":1634838938,"creation_date":1564531418,"answer_id":57281503,"question_id":3555472,"body_markdown":"`argThat` plus lambda\r\n==\r\nthat is how you can fail your argument verification:\r\n\r\n        verify(mock).mymethod(argThat(\r\n                                x -&gt; false ));\r\nwhere\r\n\r\n    import static org.mockito.ArgumentMatchers.argThat;\r\n    import static org.mockito.Mockito.verify;\r\n\r\n---\r\n\r\n`argThat` plus asserts\r\n==\r\nthe above test will &quot;say&quot; `Expected: lambda$... Was: YourClass.toSting...`. You can get a more specific cause of the failure if to use asserts in the the lambda:\r\n\r\n        verify(mock).mymethod(argThat( x -&gt; {\r\n          assertThat(x).isNotNull();\r\n          assertThat(x.description).contains(&quot;KEY&quot;);\r\n          return true;\r\n        }));\r\n**BUT**: *THIS ONLY WORKS WHEN*\r\n\r\n - *THE CALL IS EXPECTED 1 TIME, or*\r\n - *the call is expected 2+ times, but all the times the verifier matches (returns `true`).*\r\n\r\n*If the verified method called 2+ times, mockito passes all the called combinations to each verifier. So **mockito expects your verifier silently returns `true` for one of the argument set**, and `false` (no assert exceptions) for other valid calls. That expectation is not a problem for 1 method call - it should just return true 1 time.*\r\n\r\n    import static org.assertj.core.api.Assertions.assertThat;\r\n    import static org.mockito.ArgumentMatchers.argThat;\r\n    import static org.mockito.Mockito.verify;\r\n\r\nNow the failed test will say: `Expected: Obj.description to contain &#39;KEY&#39;. Was: &#39;Actual description&#39;`. NOTE: I used `assertJ` asserts, but it&#39;s up to you which assertion framework to use.\r\n\r\n---\r\ndirect argument\r\n==\r\nMokito compares direct arguments using `equals()`:\r\n\r\n    verify(mock).mymethod(expectedArg);\r\n    // NOTE:   ^ where the parentheses must be closed.\r\n\r\n---\r\n`eq` matcher\r\n==\r\n\r\n - Never use `eq` for a single arg. Use the aforementioned **direct argument**. \r\n - Mokito compares direct arguments using `equals()`\r\n - **Reason:** `eq` would be a SonarQube / SonarClound violation: https://rules.sonarsource.com/java/tag/mockito/RSPEC-6068\r\n\r\n---\r\n\r\n`argThat` with multiple arguments.\r\n==\r\n\r\nIf you use `argThat`, **all arguments** must be provided with matches. E.g. if, _in a different case,_ you had another method with 2 arguments:\r\n\r\n        verify(mock).mymethod2(eq(&quot;VALUE_1&quot;), argThat((x)-&gt;false));\r\n        // above is correct as eq() is also an argument matcher.\r\n\r\n&gt;   `verify(mock).mymethod2(&quot;VALUE_1&quot;, argThat((x)-&gt;false));`\r\n&gt;\r\n&gt;   `// above is incorrect; an exception will be thrown, as the first arg. is given without an argument matcher.`\r\n\r\nwhere:\r\n\r\n    import static org.mockito.ArgumentMatchers.argThat;\r\n    import static org.mockito.ArgumentMatchers.eq;\r\n    import static org.mockito.Mockito.verify;\r\n\r\n\r\n---\r\n**THE ROOT CAUSE of original question failure** was the wrong place of the parentheses: \r\n\r\n - _`verify(mock.mymethod...`_. That was wrong. The right would be: \r\n - ***`verify(mock).*`***","title":"Mockito. Verify method arguments","body":"<h1><code>argThat</code> plus lambda</h1>\n<p>that is how you can fail your argument verification:</p>\n<pre><code>    verify(mock).mymethod(argThat(\n                            x -&gt; false ));\n</code></pre>\n<p>where</p>\n<pre><code>import static org.mockito.ArgumentMatchers.argThat;\nimport static org.mockito.Mockito.verify;\n</code></pre>\n<hr />\n<h1><code>argThat</code> plus asserts</h1>\n<p>the above test will &quot;say&quot; <code>Expected: lambda$... Was: YourClass.toSting...</code>. You can get a more specific cause of the failure if to use asserts in the the lambda:</p>\n<pre><code>    verify(mock).mymethod(argThat( x -&gt; {\n      assertThat(x).isNotNull();\n      assertThat(x.description).contains(&quot;KEY&quot;);\n      return true;\n    }));\n</code></pre>\n<p><strong>BUT</strong>: <em>THIS ONLY WORKS WHEN</em></p>\n<ul>\n<li><em>THE CALL IS EXPECTED 1 TIME, or</em></li>\n<li><em>the call is expected 2+ times, but all the times the verifier matches (returns <code>true</code>).</em></li>\n</ul>\n<p><em>If the verified method called 2+ times, mockito passes all the called combinations to each verifier. So <strong>mockito expects your verifier silently returns <code>true</code> for one of the argument set</strong>, and <code>false</code> (no assert exceptions) for other valid calls. That expectation is not a problem for 1 method call - it should just return true 1 time.</em></p>\n<pre><code>import static org.assertj.core.api.Assertions.assertThat;\nimport static org.mockito.ArgumentMatchers.argThat;\nimport static org.mockito.Mockito.verify;\n</code></pre>\n<p>Now the failed test will say: <code>Expected: Obj.description to contain 'KEY'. Was: 'Actual description'</code>. NOTE: I used <code>assertJ</code> asserts, but it's up to you which assertion framework to use.</p>\n<hr />\n<h1>direct argument</h1>\n<p>Mokito compares direct arguments using <code>equals()</code>:</p>\n<pre><code>verify(mock).mymethod(expectedArg);\n// NOTE:   ^ where the parentheses must be closed.\n</code></pre>\n<hr />\n<h1><code>eq</code> matcher</h1>\n<ul>\n<li>Never use <code>eq</code> for a single arg. Use the aforementioned <strong>direct argument</strong>.</li>\n<li>Mokito compares direct arguments using <code>equals()</code></li>\n<li><strong>Reason:</strong> <code>eq</code> would be a SonarQube / SonarClound violation: <a href=\"https://rules.sonarsource.com/java/tag/mockito/RSPEC-6068\" rel=\"noreferrer\">https://rules.sonarsource.com/java/tag/mockito/RSPEC-6068</a></li>\n</ul>\n<hr />\n<h1><code>argThat</code> with multiple arguments.</h1>\n<p>If you use <code>argThat</code>, <strong>all arguments</strong> must be provided with matches. E.g. if, <em>in a different case,</em> you had another method with 2 arguments:</p>\n<pre><code>    verify(mock).mymethod2(eq(&quot;VALUE_1&quot;), argThat((x)-&gt;false));\n    // above is correct as eq() is also an argument matcher.\n</code></pre>\n<blockquote>\n<p><code>verify(mock).mymethod2(&quot;VALUE_1&quot;, argThat((x)-&gt;false));</code></p>\n<p><code>// above is incorrect; an exception will be thrown, as the first arg. is given without an argument matcher.</code></p>\n</blockquote>\n<p>where:</p>\n<pre><code>import static org.mockito.ArgumentMatchers.argThat;\nimport static org.mockito.ArgumentMatchers.eq;\nimport static org.mockito.Mockito.verify;\n</code></pre>\n<hr />\n<p><strong>THE ROOT CAUSE of original question failure</strong> was the wrong place of the parentheses:</p>\n<ul>\n<li><em><code>verify(mock.mymethod...</code></em>. That was wrong. The right would be:</li>\n<li><em><strong><code>verify(mock).*</code></strong></em></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9448798,"reputation":106,"user_id":7026501,"display_name":"Kobi"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1595373058,"creation_date":1595371309,"answer_id":63024151,"question_id":3555472,"body_markdown":"```JavaScript\r\nVerify(a).aFunc(eq(b))\r\n```\r\n\r\nIn pseudocode:\r\n&gt;When in the instance `a` - a function named `aFunc` is called.\r\n&gt;\r\n&gt;Verify this call got an argument which is equal to `b`.","title":"Mockito. Verify method arguments","body":"<pre><code>Verify(a).aFunc(eq(b))\n</code></pre>\n<p>In pseudocode:</p>\n<blockquote>\n<p>When in the instance <code>a</code> - a function named <code>aFunc</code> is called.</p>\n<p>Verify this call got an argument which is equal to <code>b</code>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":306132,"reputation":414,"user_id":616703,"display_name":"Will"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1600722938,"creation_date":1600722938,"answer_id":64000090,"question_id":3555472,"body_markdown":"Many of the above answers confused me but I suspect it may be due to older versions of Mockito. This answer is accomplished using\r\n\r\n - Java 11 \r\n - Mockito 3.1.0\r\n - SpringBoot 2.2.7.RELEASE \r\n - JUnit5\r\n\r\nUsing ArgumentCaptor I have done it this way:\r\n \r\n    @Mock\r\n    MyClientService myClientService;\r\n    @InjectMocks \r\n    MyService myService;\r\n\r\n\r\n    @Test\r\n    void myTest() {\r\n\r\n      ArgumentCaptor&lt;String&gt; captorParam1 = ArgumentCaptor.forClass(String.class);\r\n      ArgumentCaptor&lt;String&gt; captorParam2 = ArgumentCaptor.forClass(String.class);\r\n\r\n      Mockito.when(myClientService.doSomething(captorParam1.capture(), captorParam2.capture(), ArgumentMatchers.anyString()))\r\n          .thenReturn(expectedResponse);\r\n\r\n      assertDoesNotThrow(() -&gt; myService.process(data));\r\n\r\n      assertEquals(&quot;param1&quot;, captorParam1.getValue());\r\n      assertEquals(&quot;param2&quot;, captorParam2.getValue());\r\n\r\n      verify(myClientService, times(1))\r\n        .doSomething(anyString(), anyString(), anyString());\r\n    }","title":"Mockito. Verify method arguments","body":"<p>Many of the above answers confused me but I suspect it may be due to older versions of Mockito. This answer is accomplished using</p>\n<ul>\n<li>Java 11</li>\n<li>Mockito 3.1.0</li>\n<li>SpringBoot 2.2.7.RELEASE</li>\n<li>JUnit5</li>\n</ul>\n<p>Using ArgumentCaptor I have done it this way:</p>\n<pre><code>@Mock\nMyClientService myClientService;\n@InjectMocks \nMyService myService;\n\n\n@Test\nvoid myTest() {\n\n  ArgumentCaptor&lt;String&gt; captorParam1 = ArgumentCaptor.forClass(String.class);\n  ArgumentCaptor&lt;String&gt; captorParam2 = ArgumentCaptor.forClass(String.class);\n\n  Mockito.when(myClientService.doSomething(captorParam1.capture(), captorParam2.capture(), ArgumentMatchers.anyString()))\n      .thenReturn(expectedResponse);\n\n  assertDoesNotThrow(() -&gt; myService.process(data));\n\n  assertEquals(&quot;param1&quot;, captorParam1.getValue());\n  assertEquals(&quot;param2&quot;, captorParam2.getValue());\n\n  verify(myClientService, times(1))\n    .doSomething(anyString(), anyString(), anyString());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14964521,"reputation":209,"user_id":11930887,"display_name":"Hacke"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701346696,"creation_date":1701346696,"answer_id":77578362,"question_id":3555472,"body_markdown":"All the answers seem confusing to me, so here is what is working for me on Java 8 -&lt;br&gt; \r\n\r\n    verify(myClass, times(&lt;howManyTimes&gt;)).myMehtod(&lt;expectedValue1&gt;, &lt;expectedValue2&gt;, ...and so on);","title":"Mockito. Verify method arguments","body":"<p>All the answers seem confusing to me, so here is what is working for me on Java 8 -<br></p>\n<pre><code>verify(myClass, times(&lt;howManyTimes&gt;)).myMehtod(&lt;expectedValue1&gt;, &lt;expectedValue2&gt;, ...and so on);\n</code></pre>\n"}],"owner":{"account_id":59829,"reputation":6802,"user_id":178913,"accept_rate":70,"display_name":"manolowar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":456690,"favorite_count":0,"down_vote_count":0,"up_vote_count":372,"answer_count":12,"score":372,"last_activity_date":1701346696,"creation_date":1282645674,"question_id":3555472,"body_markdown":"I&#39;ve googled about this, but didn&#39;t find anything relevant. I&#39;ve got something like this:\r\n\r\n    Object obj = getObject();\r\n    Mockeable mock= Mockito.mock(Mockeable.class);\r\n    Mockito.when(mock.mymethod(obj )).thenReturn(null);\r\n      \r\n    Testeable testableObj = new Testeable();\r\n    testableObj.setMockeable(mock);\r\n    command.runtestmethod();\r\n\r\nNow, I want to verify that `mymethod(Object o)`, which is called inside `runtestmethod()`, was called with the Object `o`, not any other. But I always pass the test, whatever I put on the verification, for example, with:\r\n\r\n    Mockito.verify(mock.mymethod(Mockito.eq(obj)));\r\n\r\nor\r\n\r\n    Mockito.verify(mock.mymethod(Mockito.eq(null)));\r\n\r\nor\r\n\r\n    Mockito.verify(mock.mymethod(Mockito.eq(&quot;something_else&quot;)));\r\n\r\n\r\n\r\nI always pass the test. How can I accomplish that verification (if possible)? \r\n\r\nThank you.","title":"Mockito. Verify method arguments","body":"<p>I've googled about this, but didn't find anything relevant. I've got something like this:</p>\n\n<pre><code>Object obj = getObject();\nMockeable mock= Mockito.mock(Mockeable.class);\nMockito.when(mock.mymethod(obj )).thenReturn(null);\n\nTesteable testableObj = new Testeable();\ntestableObj.setMockeable(mock);\ncommand.runtestmethod();\n</code></pre>\n\n<p>Now, I want to verify that <code>mymethod(Object o)</code>, which is called inside <code>runtestmethod()</code>, was called with the Object <code>o</code>, not any other. But I always pass the test, whatever I put on the verification, for example, with:</p>\n\n<pre><code>Mockito.verify(mock.mymethod(Mockito.eq(obj)));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Mockito.verify(mock.mymethod(Mockito.eq(null)));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Mockito.verify(mock.mymethod(Mockito.eq(\"something_else\")));\n</code></pre>\n\n<p>I always pass the test. How can I accomplish that verification (if possible)? </p>\n\n<p>Thank you.</p>\n"},{"tags":["java","microcontroller"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1701346672,"post_id":77578308,"comment_id":136765653,"body_markdown":"You need to test this stuff. If your theory is &#39;it is due to the thread ending&#39; then sleep the thread (`Thread.sleep`). There is no need to make a busy-loop. If that helps - great, apply it. If that does nothing - great, you have disproved your theory.","body":"You need to test this stuff. If your theory is &#39;it is due to the thread ending&#39; then sleep the thread (<code>Thread.sleep</code>). There is no need to make a busy-loop. If that helps - great, apply it. If that does nothing - great, you have disproved your theory."},{"owner":{"account_id":18420551,"reputation":404,"user_id":13418296,"display_name":"Generous Badger"},"score":1,"creation_date":1701346675,"post_id":77578308,"comment_id":136765655,"body_markdown":"Depending on how exactly you wired up your key you might actually run into a &quot;bouncing&quot; issue and need to add a debouncer (either physical/electronical or in software). That means that the switch goes from &quot;pressed&quot; to &quot;unpressed&quot; back to &quot;pressed&quot; real quickly, so to your software it might look like many independent key presses one after another.","body":"Depending on how exactly you wired up your key you might actually run into a &quot;bouncing&quot; issue and need to add a debouncer (either physical/electronical or in software). That means that the switch goes from &quot;pressed&quot; to &quot;unpressed&quot; back to &quot;pressed&quot; real quickly, so to your software it might look like many independent key presses one after another."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1701346728,"post_id":77578308,"comment_id":136765667,"body_markdown":"Here&#39;s one [Stack Overflow answer](https://stackoverflow.com/questions/2416935/how-to-play-wav-files-with-java/74965929#74965929) that plays a WAV file.","body":"Here&#39;s one <a href=\"https://stackoverflow.com/questions/2416935/how-to-play-wav-files-with-java/74965929#74965929\">Stack Overflow answer</a> that plays a WAV file."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1701346760,"post_id":77578308,"comment_id":136765676,"body_markdown":"In general, write it so that you can plug the &#39;button&#39; - replace it real easy with just hitting enter on the keyboard. This in passing also tests GenerousBadger&#39;s debouncing theory (quite a plausible one) - if it doesn&#39;t happen when you just press enter you know the problem lies with input processing (such as needing to debounce it), not with turning &#39;yes, button pressed!&#39; into audio.","body":"In general, write it so that you can plug the &#39;button&#39; - replace it real easy with just hitting enter on the keyboard. This in passing also tests GenerousBadger&#39;s debouncing theory (quite a plausible one) - if it doesn&#39;t happen when you just press enter you know the problem lies with input processing (such as needing to debounce it), not with turning &#39;yes, button pressed!&#39; into audio."}],"owner":{"account_id":28260452,"reputation":11,"user_id":21605244,"display_name":"Mustard the first"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1701346061,"creation_date":1701346061,"question_id":77578308,"body_markdown":"So im trying to make a buzzer system for my club at school (Sciencebowl) because an actual one costs like 500 dollars.\r\nEverything else seems to work but when I run the code what I think is happening is that the clip will play over and over restarting each time and the thread that it is in stops before it can actually play.\r\nIm using a button externally that ive hooked up to a micro controller\r\n\r\nthis is code that grabs those 1s and 0s from a microcontroller\r\n```\r\nimport com.fazecast.jSerialComm.*;\r\npublic class Microreader {\r\n\r\n\r\n    private SerialPort port;\r\n    int i = 2;\r\n\r\n    public Microreader() { \r\n        SerialPort[] ports = SerialPort.getCommPorts();\r\n        port = ports[1]; // Modify this to select the correct port\r\n        System.out.println(port);\r\n        //grabs the port and store it in port\r\n         \r\n    }\r\n\r\n    public SerialPort getSerialPort() { \r\n        return port;\r\n//this allows me to use the port\r\n    }\r\n    \r\n    public void openPort(SerialPort tport) { \r\n        if (tport.openPort()) {\r\n            System.out.println(&quot;Port opened.&quot;);\r\n            int baudRate = 115200;\r\n            tport.setBaudRate(baudRate);\r\n            tport.setComPortTimeouts(SerialPort.TIMEOUT_READ_SEMI_BLOCKING, 100, 0);\r\n//opening up the port (its COM5 btw im using an arduino)\r\n    }\r\n    \r\n\r\n}\r\npublic char readPortValues() {\r\n    \r\n        byte[] readBuffer = new byte[1]; // 40% of this part is stole nbut from trial and error I\r\n                                         // dont think the error is here\r\n        int numRead = port.readBytes(readBuffer, readBuffer.length); // Read data into buffer\r\n\r\n        if (numRead &gt; 0) { //just to make sure it isnt some weird negatve voodoo\r\n            char receivedChar = (char) readBuffer[0];\r\n            \r\n            if (receivedChar == &#39;1&#39; || receivedChar == &#39;0&#39;) { //prettu sure theres no point in this \r\n                                                              //conditional ill probably get rid of \r\n                                                              //it\r\n                System.out.println(receivedChar); //I print out 1s and 0s a little redundantly\r\n                                                  //they say redundancy is good but... not here\r\n                                                  //.....probably\r\n                return receivedChar;\r\n            } else {\r\n                System.out.println(&quot;Received an unexpected character: &quot; + receivedChar);\r\n                return receivedChar;\r\n                \r\n            }\r\n        }\r\n        else { \r\n            System.out.println(&quot;no valid value&quot;);\r\n            return &#39;x&#39;;\r\n        }\r\n    \r\n}\r\n}\r\n\r\n\r\n\r\n```\r\nThe code that plays the sound\r\n\r\n```\r\nimport java.io.File; \r\nimport java.io.IOException; \r\n\r\n  \r\nimport javax.sound.sampled.AudioInputStream; \r\nimport javax.sound.sampled.AudioSystem; \r\nimport javax.sound.sampled.Clip; \r\nimport javax.sound.sampled.LineUnavailableException; \r\nimport javax.sound.sampled.UnsupportedAudioFileException; \r\n  \r\npublic class soundplayer \r\n{ \r\n  \r\n    // to store current position \r\n    Long currentFrame; \r\n    Clip clip; \r\n      \r\n    // current status of clip \r\n    String status; \r\n      \r\n    AudioInputStream audioInputStream; \r\n    static String filePath; \r\n  \r\n    // constructor to initialize streams and clip \r\n    public soundplayer(String filePath) \r\n        throws UnsupportedAudioFileException, \r\n        IOException, LineUnavailableException  \r\n    { \r\n        soundplayer.filePath = filePath;\r\n        // create AudioInputStream object \r\n        audioInputStream =  \r\n                AudioSystem.getAudioInputStream(new File(filePath).getAbsoluteFile()); \r\n          \r\n        // create clip reference \r\n        clip = AudioSystem.getClip(); \r\n          \r\n        // open audioInputStream to the clip \r\n        clip.open(audioInputStream); \r\n        \r\n    } \r\n  \r\n\r\n      \r\n    // Work as the user enters his choice \r\n      \r\n\r\n      \r\n    // Method to play the audio \r\n    public void play()  \r\n    { \r\n        //start the clip \r\n        clip.start(); \r\n          \r\n        status = &quot;play&quot;; \r\n    } \r\n     // Method to stop the audio \r\n     public void stop() throws UnsupportedAudioFileException, \r\n     IOException, LineUnavailableException  \r\n     { \r\n         currentFrame = 0L; \r\n         clip.stop(); \r\n         clip.close(); \r\n     } \r\n}\r\n```\r\nputting it all together \r\n\r\n```\r\nimport javax.sound.sampled.LineUnavailableException; \r\nimport javax.sound.sampled.UnsupportedAudioFileException; \r\nimport java.io.IOException; \r\nimport com.fazecast.jSerialComm.*;\r\n\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws \r\n    UnsupportedAudioFileException, \r\n        IOException, LineUnavailableException {\r\n        int i = 0;\r\n        int g = 0;\r\n        int k = 0;\r\n        soundplayer clip = new soundplayer(&quot;D:\\\\Working Zone\\\\RPReplay_Final1701075140.wav&quot;); //the clip vkia a file path on my computer\r\n        Microreader value = new Microreader(); //this just rmakes the microreader object\r\n        SerialPort tport = value.getSerialPort(); //this gets the port back\r\n        value.openPort(tport);\r\n        //clip.play(); I tested the clip here on its own and added my for loop delay stretegy\r\n                      // it worked as intended\r\n        while(g == 0) { \r\n\r\n        \r\n        char tvalue = value.readPortValues();\r\n\r\n        if (tvalue == &#39;1&#39;) {  // plays the sound if a 1 is read\r\n            if (i == 0) {  //prevents the sound from playing over and over I just want it to play  \r\n                           //once\r\n                System.out.println(&quot;1&quot;);\r\n            }\r\n            else{\r\n            \r\n            clip.play(); //right here the clip im pretty sure plays but is ended due to the \r\n                         //&quot;thread&quot; ending ( I think) \r\n                         //I only want the clip to play once per button press, ( i have a button set                   \r\n                         //up externally) i dont want two cleips to play at the same time \r\n                         //but I dont want the program to run jus tonce  iwant to to run\r\n                         //until I manually shut it off\r\n            \r\n            \r\n            i = 0;\r\n            \r\n            \r\n            \r\n\r\n        }\r\n    }\r\n        else if (tvalue == 0) { \r\n            if (i == 1) { \r\n                System.out.println(&quot;0&quot;); //stops the sound if a 0 is read unless it has already                \r\n                                         //stopped\r\n            }\r\n            else{\r\n            clip.stop();\r\n            \r\n            i = 1;\r\n            }\r\n\r\n        }\r\n    }\r\n    }\r\n}\r\n\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI tried using a for to loop to delay it but thatt just printed out some humongous google plex level number \r\n \r\n```\r\n if (tvalue == &#39;1&#39;) { \r\n            if (i == 0) { \r\n                System.out.println(&quot;1&quot;);\r\n            }\r\n            else{\r\n            \r\n            clip.play();\r\n            \r\n            \r\n            i = 0;\r\n            for (k = 0; k &lt; 20000; k++) { \r\n                System.out.println();\r\n            }\r\n```\r\n\r\n            \r\nive also tried making a new thread like \r\n\r\n```\r\nThread playThread = new Thread(() -&gt; {\r\n                clip.play();\r\n            });\r\n            playThread.start();\r\n\r\n            // should pause this bit while concurrently alloweing the clip to play\r\n            try {\r\n                Thread.sleep(5000); // Delay for 5 seconds (adjust as needed)\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n```\r\n\r\nbut it still doesnt play, Im not a great programmer, evidently, but I also dont want to spend 500 dollars on a box that makes a noise..... also just wanted an excuse to make something. help would be greatly appreciated!\r\n","title":"A buzzer system using java, clip wont play","body":"<p>So im trying to make a buzzer system for my club at school (Sciencebowl) because an actual one costs like 500 dollars.\nEverything else seems to work but when I run the code what I think is happening is that the clip will play over and over restarting each time and the thread that it is in stops before it can actually play.\nIm using a button externally that ive hooked up to a micro controller</p>\n<p>this is code that grabs those 1s and 0s from a microcontroller</p>\n<pre><code>import com.fazecast.jSerialComm.*;\npublic class Microreader {\n\n\n    private SerialPort port;\n    int i = 2;\n\n    public Microreader() { \n        SerialPort[] ports = SerialPort.getCommPorts();\n        port = ports[1]; // Modify this to select the correct port\n        System.out.println(port);\n        //grabs the port and store it in port\n         \n    }\n\n    public SerialPort getSerialPort() { \n        return port;\n//this allows me to use the port\n    }\n    \n    public void openPort(SerialPort tport) { \n        if (tport.openPort()) {\n            System.out.println(&quot;Port opened.&quot;);\n            int baudRate = 115200;\n            tport.setBaudRate(baudRate);\n            tport.setComPortTimeouts(SerialPort.TIMEOUT_READ_SEMI_BLOCKING, 100, 0);\n//opening up the port (its COM5 btw im using an arduino)\n    }\n    \n\n}\npublic char readPortValues() {\n    \n        byte[] readBuffer = new byte[1]; // 40% of this part is stole nbut from trial and error I\n                                         // dont think the error is here\n        int numRead = port.readBytes(readBuffer, readBuffer.length); // Read data into buffer\n\n        if (numRead &gt; 0) { //just to make sure it isnt some weird negatve voodoo\n            char receivedChar = (char) readBuffer[0];\n            \n            if (receivedChar == '1' || receivedChar == '0') { //prettu sure theres no point in this \n                                                              //conditional ill probably get rid of \n                                                              //it\n                System.out.println(receivedChar); //I print out 1s and 0s a little redundantly\n                                                  //they say redundancy is good but... not here\n                                                  //.....probably\n                return receivedChar;\n            } else {\n                System.out.println(&quot;Received an unexpected character: &quot; + receivedChar);\n                return receivedChar;\n                \n            }\n        }\n        else { \n            System.out.println(&quot;no valid value&quot;);\n            return 'x';\n        }\n    \n}\n}\n\n\n\n</code></pre>\n<p>The code that plays the sound</p>\n<pre><code>import java.io.File; \nimport java.io.IOException; \n\n  \nimport javax.sound.sampled.AudioInputStream; \nimport javax.sound.sampled.AudioSystem; \nimport javax.sound.sampled.Clip; \nimport javax.sound.sampled.LineUnavailableException; \nimport javax.sound.sampled.UnsupportedAudioFileException; \n  \npublic class soundplayer \n{ \n  \n    // to store current position \n    Long currentFrame; \n    Clip clip; \n      \n    // current status of clip \n    String status; \n      \n    AudioInputStream audioInputStream; \n    static String filePath; \n  \n    // constructor to initialize streams and clip \n    public soundplayer(String filePath) \n        throws UnsupportedAudioFileException, \n        IOException, LineUnavailableException  \n    { \n        soundplayer.filePath = filePath;\n        // create AudioInputStream object \n        audioInputStream =  \n                AudioSystem.getAudioInputStream(new File(filePath).getAbsoluteFile()); \n          \n        // create clip reference \n        clip = AudioSystem.getClip(); \n          \n        // open audioInputStream to the clip \n        clip.open(audioInputStream); \n        \n    } \n  \n\n      \n    // Work as the user enters his choice \n      \n\n      \n    // Method to play the audio \n    public void play()  \n    { \n        //start the clip \n        clip.start(); \n          \n        status = &quot;play&quot;; \n    } \n     // Method to stop the audio \n     public void stop() throws UnsupportedAudioFileException, \n     IOException, LineUnavailableException  \n     { \n         currentFrame = 0L; \n         clip.stop(); \n         clip.close(); \n     } \n}\n</code></pre>\n<p>putting it all together</p>\n<pre><code>import javax.sound.sampled.LineUnavailableException; \nimport javax.sound.sampled.UnsupportedAudioFileException; \nimport java.io.IOException; \nimport com.fazecast.jSerialComm.*;\n\n\npublic class App {\n    public static void main(String[] args) throws \n    UnsupportedAudioFileException, \n        IOException, LineUnavailableException {\n        int i = 0;\n        int g = 0;\n        int k = 0;\n        soundplayer clip = new soundplayer(&quot;D:\\\\Working Zone\\\\RPReplay_Final1701075140.wav&quot;); //the clip vkia a file path on my computer\n        Microreader value = new Microreader(); //this just rmakes the microreader object\n        SerialPort tport = value.getSerialPort(); //this gets the port back\n        value.openPort(tport);\n        //clip.play(); I tested the clip here on its own and added my for loop delay stretegy\n                      // it worked as intended\n        while(g == 0) { \n\n        \n        char tvalue = value.readPortValues();\n\n        if (tvalue == '1') {  // plays the sound if a 1 is read\n            if (i == 0) {  //prevents the sound from playing over and over I just want it to play  \n                           //once\n                System.out.println(&quot;1&quot;);\n            }\n            else{\n            \n            clip.play(); //right here the clip im pretty sure plays but is ended due to the \n                         //&quot;thread&quot; ending ( I think) \n                         //I only want the clip to play once per button press, ( i have a button set                   \n                         //up externally) i dont want two cleips to play at the same time \n                         //but I dont want the program to run jus tonce  iwant to to run\n                         //until I manually shut it off\n            \n            \n            i = 0;\n            \n            \n            \n\n        }\n    }\n        else if (tvalue == 0) { \n            if (i == 1) { \n                System.out.println(&quot;0&quot;); //stops the sound if a 0 is read unless it has already                \n                                         //stopped\n            }\n            else{\n            clip.stop();\n            \n            i = 1;\n            }\n\n        }\n    }\n    }\n}\n\n\n\n</code></pre>\n<p>I tried using a for to loop to delay it but thatt just printed out some humongous google plex level number</p>\n<pre><code> if (tvalue == '1') { \n            if (i == 0) { \n                System.out.println(&quot;1&quot;);\n            }\n            else{\n            \n            clip.play();\n            \n            \n            i = 0;\n            for (k = 0; k &lt; 20000; k++) { \n                System.out.println();\n            }\n</code></pre>\n<p>ive also tried making a new thread like</p>\n<pre><code>Thread playThread = new Thread(() -&gt; {\n                clip.play();\n            });\n            playThread.start();\n\n            // should pause this bit while concurrently alloweing the clip to play\n            try {\n                Thread.sleep(5000); // Delay for 5 seconds (adjust as needed)\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n</code></pre>\n<p>but it still doesnt play, Im not a great programmer, evidently, but I also dont want to spend 500 dollars on a box that makes a noise..... also just wanted an excuse to make something. help would be greatly appreciated!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1701349000,"post_id":77578295,"comment_id":136766111,"body_markdown":"Please copy the text into the question - don&#39;t link or post screenshots.","body":"Please copy the text into the question - don&#39;t link or post screenshots."}],"owner":{"account_id":30031112,"reputation":1,"user_id":23014215,"display_name":"Gayatri Vaidya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701345947,"creation_date":1701345947,"question_id":77578295,"body_markdown":"[hibernate.cfg.xml file in eclipse](https://i.stack.imgur.com/FQqdU.jpg)\r\n\r\nUpon careful examination of the error messages, it became evident that certain essential elementsnamely, &#39;hibernate configuration,&#39; &#39;property,&#39; and &#39;session factory&#39;are required within the Hibernate configuration file (hibernate.cfg.xml). Despite referencing tutorials on platforms such as YouTube, replicating the process proved challenging, and I encountered difficulty in generating this configuration file seamlessly. I am actively seeking guidance and solutions to rectify this issue and ensure the accurate creation of the hibernate.cfg.xml file in alignment with established best practices.","title":"When I try to create Hibernate.cfg.xml file I am getting this error shown in screenshot, kindly help me solve this","body":"<p><a href=\"https://i.stack.imgur.com/FQqdU.jpg\" rel=\"nofollow noreferrer\">hibernate.cfg.xml file in eclipse</a></p>\n<p>Upon careful examination of the error messages, it became evident that certain essential elementsnamely, 'hibernate configuration,' 'property,' and 'session factory'are required within the Hibernate configuration file (hibernate.cfg.xml). Despite referencing tutorials on platforms such as YouTube, replicating the process proved challenging, and I encountered difficulty in generating this configuration file seamlessly. I am actively seeking guidance and solutions to rectify this issue and ensure the accurate creation of the hibernate.cfg.xml file in alignment with established best practices.</p>\n"},{"tags":["javascript","java","spring-boot"],"comments":[{"owner":{"account_id":1430494,"reputation":96696,"user_id":1353011,"display_name":"Musa"},"score":0,"creation_date":1523817162,"post_id":49845355,"comment_id":86705712,"body_markdown":"Your content type is incorrect, FormData does not produce `application/json`","body":"Your content type is incorrect, FormData does not produce <code>application&#47;json</code>"},{"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"score":0,"creation_date":1523863067,"post_id":49845355,"comment_id":86717591,"body_markdown":"I changed it to `multipart/form-data` and I still get the same error.","body":"I changed it to <code>multipart&#47;form-data</code> and I still get the same error."},{"owner":{"account_id":7440141,"reputation":886,"user_id":5658152,"display_name":"Krzysztof Kaszkowiak"},"score":0,"creation_date":1523995196,"post_id":49845355,"comment_id":86789084,"body_markdown":"This is what you exactly need: https://stackoverflow.com/questions/25699727/multipart-file-upload-spring-boot?rq=1","body":"This is what you exactly need: <a href=\"https://stackoverflow.com/questions/25699727/multipart-file-upload-spring-boot?rq=1\" title=\"multipart file upload spring boot\">stackoverflow.com/questions/25699727/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"score":0,"creation_date":1524206305,"post_id":49901510,"comment_id":86886434,"body_markdown":"I still get the same error. Your endpoint takes only one param, which is `file` and of type multipart form data. Mine is a combinatio of json and multipart. I update my post to include the DTO.","body":"I still get the same error. Your endpoint takes only one param, which is <code>file</code> and of type multipart form data. Mine is a combinatio of json and multipart. I update my post to include the DTO."},{"owner":{"account_id":1659557,"reputation":676,"user_id":1528104,"accept_rate":100,"display_name":"Stephan"},"score":0,"creation_date":1524224287,"post_id":49901510,"comment_id":86897273,"body_markdown":"You can&#39;t do that. If you look at a pure multipart packet, the body is reserved for the file data. You&#39;re allowed to put path parameters, but not additional body payloads. I should have noticed that when I answered. I&#39;ll correct my answer when I&#39;m off mobile.","body":"You can&#39;t do that. If you look at a pure multipart packet, the body is reserved for the file data. You&#39;re allowed to put path parameters, but not additional body payloads. I should have noticed that when I answered. I&#39;ll correct my answer when I&#39;m off mobile."},{"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"score":0,"creation_date":1524356193,"post_id":49901510,"comment_id":86938977,"body_markdown":"What is this example on Axios github then: https://github.com/axios/axios/blob/master/examples/upload/index.html","body":"What is this example on Axios github then: <a href=\"https://github.com/axios/axios/blob/master/examples/upload/index.html\" rel=\"nofollow noreferrer\">github.com/axios/axios/blob/master/examples/upload/index.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":1659557,"reputation":676,"user_id":1528104,"accept_rate":100,"display_name":"Stephan"},"score":0,"creation_date":1524488087,"post_id":49901510,"comment_id":86979336,"body_markdown":"They&#39;re doing exactly what I have in the example above with the formData.append(). I think you&#39;re misunderstanding how the packet gets built behind the scenes. If you have a running copy of their example, I suggest you watch the network traffic in chrome and look at the packet structure.","body":"They&#39;re doing exactly what I have in the example above with the formData.append(). I think you&#39;re misunderstanding how the packet gets built behind the scenes. If you have a running copy of their example, I suggest you watch the network traffic in chrome and look at the packet structure."},{"owner":{"account_id":4116401,"reputation":1189,"user_id":3377836,"accept_rate":62,"display_name":"frank"},"score":0,"creation_date":1570696339,"post_id":49901510,"comment_id":102996813,"body_markdown":"how to populate `otherData` of `formData.append(&#39;expenseDto&#39;,otherData);`? I tried `var otherData = {&#39;name&#39;:&#39;a&#39;}`, but it throws error `Cannot convert value of type &#39;java.lang.String&#39; to required type &#39;ExpenseDto&#39;`.","body":"how to populate <code>otherData</code> of <code>formData.append(&#39;expenseDto&#39;,otherData);</code>? I tried <code>var otherData = {&#39;name&#39;:&#39;a&#39;}</code>, but it throws error <code>Cannot convert value of type &#39;java.lang.String&#39; to required type &#39;ExpenseDto&#39;</code>."},{"owner":{"account_id":1659557,"reputation":676,"user_id":1528104,"accept_rate":100,"display_name":"Stephan"},"score":0,"creation_date":1571685315,"post_id":49901510,"comment_id":103315538,"body_markdown":"does your `ExpenseDTO` object have one attribute `name`, and no other required attributes? Spring automatically tries to deserialize the payload into a POJO assuming the POJO contains and is annotated to be valid from the JSON provided.","body":"does your <code>ExpenseDTO</code> object have one attribute <code>name</code>, and no other required attributes? Spring automatically tries to deserialize the payload into a POJO assuming the POJO contains and is annotated to be valid from the JSON provided."}],"tags":[],"owner":{"account_id":1659557,"reputation":676,"user_id":1528104,"accept_rate":100,"display_name":"Stephan"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524235815,"creation_date":1524059554,"answer_id":49901510,"question_id":49845355,"body_markdown":"I built my most recent file upload application in AngularJS and SpringBoot which are similar enough in syntax to help you here.\r\n\r\nMy client side request handler:\r\n\r\n    uploadFile=function(fileData){\r\n\t\tvar formData=new FormData();\r\n\t\tformData.append(&#39;file&#39;,fileData);\r\n\t\treturn $http({\r\n\t\t\tmethod: &#39;POST&#39;,\r\n\t\t\turl: &#39;/api/uploadFile&#39;,\r\n\t\t\tdata: formData,\r\n\t\t\theaders:{\r\n\t\t\t\t&#39;Content-Type&#39;:undefined,\r\n\t\t\t\t&#39;Accept&#39;:&#39;application/json&#39;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\nOne thing to note is Angular automatically sets the multipart mime type and boundary on the &#39;Content-Type&#39; header value for me. Yours may not, in which case you need to set it yourself. \r\n\r\nMy application expects a JSON response from the server, thus the &#39;Accept&#39; header.\r\n\r\nYou are passing in the FormData object yourself, so you need to make sure that your form is setting the File to whatever attribute you map to on your Controller. In my case it is mapped to the &#39;file&#39; parameter on the FormData object.\r\n\r\nMy controller endpoints look like this:\r\n\r\n    @POST\r\n    @RequestMapping(&quot;/upload&quot;)\r\n    public ResponseEntity&lt;Object&gt; upload(@RequestParam(&quot;file&quot;) MultipartFile file) \r\n    {\r\n        if (file.isEmpty()) {\r\n            return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\r\n        } else {\r\n            //...\r\n        }\r\n    }\r\n\r\nYou can add as many other @RequestParam as you&#39;d like, including your DTO that represents the rest of the form, just make sure its structured that way as a child of the FormData object.\r\n\r\n**The key take-away here is that each @RequestParam is an attribute on the FormData object body payload on the multipart request.**\r\n\r\nIf I were to modify my code to accommodate your data, it would look something like this:\r\n\r\n    uploadFile=function(fileData, otherData){\r\n\t\tvar formData=new FormData();\r\n\t\tformData.append(&#39;file&#39;,fileData);\r\n        formData.append(&#39;expenseDto&#39;,otherData);\r\n\t\treturn $http({\r\n\t\t\tmethod: &#39;POST&#39;,\r\n\t\t\turl: &#39;/api/uploadFile&#39;,\r\n\t\t\tdata: formData,\r\n\t\t\theaders:{\r\n\t\t\t\t&#39;Content-Type&#39;:undefined,\r\n\t\t\t\t&#39;Accept&#39;:&#39;application/json&#39;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\nThen your controller endpoint would look like this:\r\n\r\n    @POST\r\n    @RequestMapping(&quot;/upload&quot;)\r\n    public ResponseEntity&lt;Object&gt; upload(@RequestParam(&quot;file&quot;) MultipartFile file, @RequestParam(&quot;expenseDto&quot;) ExpensePostDto expenseDto)\r\n    {\r\n        if (file.isEmpty()) {\r\n            return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\r\n        } else {\r\n            //...\r\n        }\r\n    }\r\n\r\n","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>I built my most recent file upload application in AngularJS and SpringBoot which are similar enough in syntax to help you here.</p>\n\n<p>My client side request handler:</p>\n\n<pre><code>uploadFile=function(fileData){\n    var formData=new FormData();\n    formData.append('file',fileData);\n    return $http({\n        method: 'POST',\n        url: '/api/uploadFile',\n        data: formData,\n        headers:{\n            'Content-Type':undefined,\n            'Accept':'application/json'\n        }\n    });\n};\n</code></pre>\n\n<p>One thing to note is Angular automatically sets the multipart mime type and boundary on the 'Content-Type' header value for me. Yours may not, in which case you need to set it yourself. </p>\n\n<p>My application expects a JSON response from the server, thus the 'Accept' header.</p>\n\n<p>You are passing in the FormData object yourself, so you need to make sure that your form is setting the File to whatever attribute you map to on your Controller. In my case it is mapped to the 'file' parameter on the FormData object.</p>\n\n<p>My controller endpoints look like this:</p>\n\n<pre><code>@POST\n@RequestMapping(\"/upload\")\npublic ResponseEntity&lt;Object&gt; upload(@RequestParam(\"file\") MultipartFile file) \n{\n    if (file.isEmpty()) {\n        return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\n    } else {\n        //...\n    }\n}\n</code></pre>\n\n<p>You can add as many other @RequestParam as you'd like, including your DTO that represents the rest of the form, just make sure its structured that way as a child of the FormData object.</p>\n\n<p><strong>The key take-away here is that each @RequestParam is an attribute on the FormData object body payload on the multipart request.</strong></p>\n\n<p>If I were to modify my code to accommodate your data, it would look something like this:</p>\n\n<pre><code>uploadFile=function(fileData, otherData){\n    var formData=new FormData();\n    formData.append('file',fileData);\n    formData.append('expenseDto',otherData);\n    return $http({\n        method: 'POST',\n        url: '/api/uploadFile',\n        data: formData,\n        headers:{\n            'Content-Type':undefined,\n            'Accept':'application/json'\n        }\n    });\n};\n</code></pre>\n\n<p>Then your controller endpoint would look like this:</p>\n\n<pre><code>@POST\n@RequestMapping(\"/upload\")\npublic ResponseEntity&lt;Object&gt; upload(@RequestParam(\"file\") MultipartFile file, @RequestParam(\"expenseDto\") ExpensePostDto expenseDto)\n{\n    if (file.isEmpty()) {\n        return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\n    } else {\n        //...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9181235,"reputation":616,"user_id":6824968,"display_name":"this_is_om_vm"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1524461139,"creation_date":1524461139,"answer_id":49973912,"question_id":49845355,"body_markdown":"Add the consumer type to your request mapping .it should  work fine.\r\n\r\n    @POST\r\n    @RequestMapping(&quot;/upload&quot;)\r\n    public ResponseEntity&lt;Object&gt; upload(@RequestParam(&quot;file&quot;) MultipartFile file,consumes = &quot;multipart/form-data&quot;) \r\n    {\r\n        if (file.isEmpty()) {\r\n            return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\r\n        } else {\r\n            //...\r\n        }\r\n    }","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>Add the consumer type to your request mapping .it should  work fine.</p>\n\n<pre><code>@POST\n@RequestMapping(\"/upload\")\npublic ResponseEntity&lt;Object&gt; upload(@RequestParam(\"file\") MultipartFile file,consumes = \"multipart/form-data\") \n{\n    if (file.isEmpty()) {\n        return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\n    } else {\n        //...\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1430910,"reputation":2502,"user_id":1353361,"accept_rate":67,"display_name":"Vijay Shegokar"},"score":0,"creation_date":1543920476,"post_id":49991403,"comment_id":94083401,"body_markdown":"Can you pls tell me how to get utf-8 characters if I passed here in &quot;title&quot; variable. Because currently, I&#39;m getting ???? for this. English characters are working fine.","body":"Can you pls tell me how to get utf-8 characters if I passed here in &quot;title&quot; variable. Because currently, I&#39;m getting ???? for this. English characters are working fine."},{"owner":{"account_id":5987348,"reputation":4295,"user_id":4704510,"display_name":"UsamaAmjad"},"score":0,"creation_date":1543929265,"post_id":49991403,"comment_id":94088282,"body_markdown":"@VijayShegokar did you add `CharacterEncodingFilter` in `web.xml`?","body":"@VijayShegokar did you add <code>CharacterEncodingFilter</code> in <code>web.xml</code>?"},{"owner":{"account_id":1430910,"reputation":2502,"user_id":1353361,"accept_rate":67,"display_name":"Vijay Shegokar"},"score":0,"creation_date":1544065943,"post_id":49991403,"comment_id":94147121,"body_markdown":"yes. Actually there two applications. First application forwarding the request to another application via Zuul Proxy. I&#39;m also getting the title, description these values as duplicate(comma separated) in the second application controller. But If I copy paste the same code in First application Controller and access that then everything works fine.","body":"yes. Actually there two applications. First application forwarding the request to another application via Zuul Proxy. I&#39;m also getting the title, description these values as duplicate(comma separated) in the second application controller. But If I copy paste the same code in First application Controller and access that then everything works fine."},{"owner":{"account_id":5987348,"reputation":4295,"user_id":4704510,"display_name":"UsamaAmjad"},"score":0,"creation_date":1544072581,"post_id":49991403,"comment_id":94148604,"body_markdown":"I think you should create a separate question for it so people can understand the problem. Or if you can find similar questions then please tag me in.","body":"I think you should create a separate question for it so people can understand the problem. Or if you can find similar questions then please tag me in."},{"owner":{"account_id":4953201,"reputation":134,"user_id":3986565,"display_name":"Lewis Munene"},"score":0,"creation_date":1625139340,"post_id":49991403,"comment_id":120551033,"body_markdown":"When I do this, all fields in &quot;model&quot; come up null. @ModelAttribute is somehow not able to map the form fields to the DTO fields","body":"When I do this, all fields in &quot;model&quot; come up null. @ModelAttribute is somehow not able to map the form fields to the DTO fields"},{"owner":{"account_id":4953201,"reputation":134,"user_id":3986565,"display_name":"Lewis Munene"},"score":0,"creation_date":1625142201,"post_id":49991403,"comment_id":120552264,"body_markdown":"Just figured out my problem! My DTO had no getters and setters (all fields were public). For some reason, the fields will not be mapped to the DTO if getters and setters are absent. When I added the getters and setters, I was now able to receive the form fields in the DTO","body":"Just figured out my problem! My DTO had no getters and setters (all fields were public). For some reason, the fields will not be mapped to the DTO if getters and setters are absent. When I added the getters and setters, I was now able to receive the form fields in the DTO"},{"owner":{"account_id":5987348,"reputation":4295,"user_id":4704510,"display_name":"UsamaAmjad"},"score":0,"creation_date":1625230871,"post_id":49991403,"comment_id":120579593,"body_markdown":"Yes setters are required, spring use them for mapping. If you are using immutable objects then you neend to write custom WebArgumentResolver.","body":"Yes setters are required, spring use them for mapping. If you are using immutable objects then you neend to write custom WebArgumentResolver."},{"owner":{"account_id":3052317,"reputation":474,"user_id":2586617,"accept_rate":43,"display_name":"Neil"},"score":0,"creation_date":1681293812,"post_id":49991403,"comment_id":134032049,"body_markdown":"how to test this via postman","body":"how to test this via postman"},{"owner":{"account_id":7922686,"reputation":130,"user_id":5983151,"display_name":"Carlos Ribeiro"},"score":0,"creation_date":1689985152,"post_id":49991403,"comment_id":135294572,"body_markdown":"I consider the solution below much better because it is not necessary to use a DTO on the server.","body":"I consider the solution below much better because it is not necessary to use a DTO on the server."}],"tags":[],"owner":{"account_id":5987348,"reputation":4295,"user_id":4704510,"display_name":"UsamaAmjad"},"comment_count":9,"down_vote_count":1,"up_vote_count":85,"is_accepted":true,"score":84,"last_activity_date":1584707267,"creation_date":1524526869,"answer_id":49991403,"question_id":49845355,"body_markdown":"Yes, you can simply do it via wrapper class.\r\n\r\n1) Create a `Class` to hold form data:\r\n\r\n    public class FormWrapper {\r\n        private MultipartFile image;\r\n        private String title;\r\n        private String description;\r\n    }\r\n2) Create an HTML `form` for submitting data:\r\n\r\n    &lt;form method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; id=&quot;fileUploadForm&quot; action=&quot;link&quot;&gt;\r\n        &lt;input type=&quot;text&quot; name=&quot;title&quot;/&gt;&lt;br/&gt;\r\n        &lt;input type=&quot;text&quot; name=&quot;description&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n        &lt;input type=&quot;file&quot; name=&quot;image&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n        &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; id=&quot;btnSubmit&quot;/&gt;\r\n    &lt;/form&gt;\r\n3) Create a method to receive form&#39;s `text` data and `multipart` file:\r\n\r\n    @PostMapping(&quot;/api/upload/multi/model&quot;)\r\n    public ResponseEntity&lt;?&gt; multiUploadFileModel(@ModelAttribute FormWrapper model) {\r\n        try {\r\n            // Save as you want as per requiremens\r\n            saveUploadedFile(model.getImage());\r\n            formRepo.save(mode.getTitle(), model.getDescription());\r\n        } catch (IOException e) {\r\n            return new ResponseEntity&lt;&gt;(HttpStatus.BAD_REQUEST);\r\n        }\r\n\r\n        return new ResponseEntity(&quot;Successfully uploaded!&quot;, HttpStatus.OK);\r\n    }\r\n\r\n4) Method to save `file`:\r\n\r\n    private void saveUploadedFile(MultipartFile file) throws IOException {\r\n        if (!file.isEmpty()) {\r\n            byte[] bytes = file.getBytes();\r\n            Path path = Paths.get(UPLOADED_FOLDER + file.getOriginalFilename());\r\n            Files.write(path, bytes);\r\n        }\r\n    }","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>Yes, you can simply do it via wrapper class.</p>\n\n<p>1) Create a <code>Class</code> to hold form data:</p>\n\n<pre><code>public class FormWrapper {\n    private MultipartFile image;\n    private String title;\n    private String description;\n}\n</code></pre>\n\n<p>2) Create an HTML <code>form</code> for submitting data:</p>\n\n<pre><code>&lt;form method=\"POST\" enctype=\"multipart/form-data\" id=\"fileUploadForm\" action=\"link\"&gt;\n    &lt;input type=\"text\" name=\"title\"/&gt;&lt;br/&gt;\n    &lt;input type=\"text\" name=\"description\"/&gt;&lt;br/&gt;&lt;br/&gt;\n    &lt;input type=\"file\" name=\"image\"/&gt;&lt;br/&gt;&lt;br/&gt;\n    &lt;input type=\"submit\" value=\"Submit\" id=\"btnSubmit\"/&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>3) Create a method to receive form's <code>text</code> data and <code>multipart</code> file:</p>\n\n<pre><code>@PostMapping(\"/api/upload/multi/model\")\npublic ResponseEntity&lt;?&gt; multiUploadFileModel(@ModelAttribute FormWrapper model) {\n    try {\n        // Save as you want as per requiremens\n        saveUploadedFile(model.getImage());\n        formRepo.save(mode.getTitle(), model.getDescription());\n    } catch (IOException e) {\n        return new ResponseEntity&lt;&gt;(HttpStatus.BAD_REQUEST);\n    }\n\n    return new ResponseEntity(\"Successfully uploaded!\", HttpStatus.OK);\n}\n</code></pre>\n\n<p>4) Method to save <code>file</code>:</p>\n\n<pre><code>private void saveUploadedFile(MultipartFile file) throws IOException {\n    if (!file.isEmpty()) {\n        byte[] bytes = file.getBytes();\n        Path path = Paths.get(UPLOADED_FOLDER + file.getOriginalFilename());\n        Files.write(path, bytes);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2294609,"reputation":156,"user_id":2016389,"accept_rate":86,"display_name":"Marco L&#243;pez"},"score":3,"creation_date":1565967345,"post_id":49993072,"comment_id":101520014,"body_markdown":"It worked for me. Just adding, it was necessary to add: processData: false, contentType: false, cache: false, so that it works well. Spring Boot 2.1.7. \nand it was not necessary to add the &quot;consumes&quot;.","body":"It worked for me. Just adding, it was necessary to add: processData: false, contentType: false, cache: false, so that it works well. Spring Boot 2.1.7.  and it was not necessary to add the &quot;consumes&quot;."},{"owner":{"account_id":2622304,"reputation":780,"user_id":2270081,"accept_rate":53,"display_name":"Gundamaiah"},"score":1,"creation_date":1601814650,"post_id":49993072,"comment_id":113516714,"body_markdown":"@GSSwain it working fine for me. How to test the endpoint from POSTMAN.","body":"@GSSwain it working fine for me. How to test the endpoint from POSTMAN."},{"owner":{"account_id":16664048,"reputation":473,"user_id":12043263,"display_name":"Just A Question"},"score":0,"creation_date":1670951770,"post_id":49993072,"comment_id":131989961,"body_markdown":"Somebody got it to work in Postman?","body":"Somebody got it to work in Postman?"}],"tags":[],"owner":{"account_id":5838908,"reputation":5857,"user_id":4601120,"display_name":"GSSwain"},"comment_count":3,"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1628916682,"creation_date":1524541338,"answer_id":49993072,"question_id":49845355,"body_markdown":"I had created a similar thing using pure JS and Spring Boot.\r\nHere is the [Repo.][1] \r\nI&#39;m sending an `User` object as `JSON` and a `File` as part of the `multipart/form-data` request.\r\n\r\nThe relevant snippets are below\r\n\r\nThe `Controller` code\r\n\r\n    @RestController\r\n    public class FileUploadController {\r\n    \r\n    \t@RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST, consumes = { &quot;multipart/form-data&quot; })\r\n    \tpublic void upload(@RequestPart(&quot;user&quot;) @Valid User user,\r\n    \t\t\t@RequestPart(&quot;file&quot;) @Valid @NotNull @NotBlank MultipartFile file) {\r\n    \t\t\tSystem.out.println(user);\r\n    \t\t\tSystem.out.println(&quot;Uploaded File: &quot;);\r\n    \t\t\tSystem.out.println(&quot;Name : &quot; + file.getName());\r\n    \t\t\tSystem.out.println(&quot;Type : &quot; + file.getContentType());\r\n    \t\t\tSystem.out.println(&quot;Name : &quot; + file.getOriginalFilename());\r\n    \t\t\tSystem.out.println(&quot;Size : &quot; + file.getSize());\r\n    \t}\r\n    \r\n    \tstatic class User {\r\n    \t\t@NotNull\r\n    \t\tString firstName;\r\n    \t\t@NotNull\r\n    \t\tString lastName;\r\n    \r\n    \t\tpublic String getFirstName() {\r\n    \t\t\treturn firstName;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setFirstName(String firstName) {\r\n    \t\t\tthis.firstName = firstName;\r\n    \t\t}\r\n    \r\n    \t\tpublic String getLastName() {\r\n    \t\t\treturn lastName;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setLastName(String lastName) {\r\n    \t\t\tthis.lastName = lastName;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic String toString() {\r\n    \t\t\treturn &quot;User [firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName + &quot;]&quot;;\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\nThe `HTML` and `JS` code\r\n\r\n    &lt;html&gt;    \r\n    &lt;head&gt;\r\n        &lt;script&gt;\r\n            function onSubmit() {\r\n    \r\n                var formData = new FormData();\r\n    \r\n                formData.append(&quot;file&quot;, document.forms[&quot;userForm&quot;].file.files[0]);\r\n                formData.append(&#39;user&#39;, new Blob([JSON.stringify({\r\n                    &quot;firstName&quot;: document.getElementById(&quot;firstName&quot;).value,\r\n                    &quot;lastName&quot;: document.getElementById(&quot;lastName&quot;).value\r\n                })], {\r\n                        type: &quot;application/json&quot;\r\n                    }));\r\n                var boundary = Math.random().toString().substr(2);\r\n                fetch(&#39;/upload&#39;, {\r\n                    method: &#39;post&#39;,\r\n                    body: formData\r\n                }).then(function (response) {\r\n                    if (response.status !== 200) {\r\n                        alert(&quot;There was an error!&quot;);\r\n                    } else {\r\n                        alert(&quot;Request successful&quot;);\r\n                    }\r\n                }).catch(function (err) {\r\n                    alert(&quot;There was an error!&quot;);\r\n                });;\r\n            }\r\n        &lt;/script&gt;\r\n    &lt;/head&gt;\r\n    \r\n    &lt;body&gt;\r\n        &lt;form name=&quot;userForm&quot;&gt;\r\n            &lt;label&gt; File : &lt;/label&gt;\r\n            &lt;br/&gt;\r\n            &lt;input name=&quot;file&quot; type=&quot;file&quot;&gt;\r\n            &lt;br/&gt;\r\n            &lt;label&gt; First Name : &lt;/label&gt;\r\n            &lt;br/&gt;\r\n            &lt;input id=&quot;firstName&quot; name=&quot;firstName&quot; /&gt;\r\n            &lt;br/&gt;\r\n            &lt;label&gt; Last Name : &lt;/label&gt;\r\n            &lt;br/&gt;\r\n            &lt;input id=&quot;lastName&quot; name=&quot;lastName&quot; /&gt;\r\n            &lt;br/&gt;\r\n            &lt;input type=&quot;button&quot; value=&quot;Submit&quot; id=&quot;submit&quot; onclick=&quot;onSubmit(); return false;&quot; /&gt;\r\n        &lt;/form&gt;\r\n    &lt;/body&gt;    \r\n    &lt;/html&gt;\r\n\r\n  [1]: https://github.com/GSSwain/file-upload-ajax-sample","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>I had created a similar thing using pure JS and Spring Boot.\nHere is the <a href=\"https://github.com/GSSwain/file-upload-ajax-sample\" rel=\"noreferrer\">Repo.</a>\nI'm sending an <code>User</code> object as <code>JSON</code> and a <code>File</code> as part of the <code>multipart/form-data</code> request.</p>\n<p>The relevant snippets are below</p>\n<p>The <code>Controller</code> code</p>\n<pre><code>@RestController\npublic class FileUploadController {\n\n    @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST, consumes = { &quot;multipart/form-data&quot; })\n    public void upload(@RequestPart(&quot;user&quot;) @Valid User user,\n            @RequestPart(&quot;file&quot;) @Valid @NotNull @NotBlank MultipartFile file) {\n            System.out.println(user);\n            System.out.println(&quot;Uploaded File: &quot;);\n            System.out.println(&quot;Name : &quot; + file.getName());\n            System.out.println(&quot;Type : &quot; + file.getContentType());\n            System.out.println(&quot;Name : &quot; + file.getOriginalFilename());\n            System.out.println(&quot;Size : &quot; + file.getSize());\n    }\n\n    static class User {\n        @NotNull\n        String firstName;\n        @NotNull\n        String lastName;\n\n        public String getFirstName() {\n            return firstName;\n        }\n\n        public void setFirstName(String firstName) {\n            this.firstName = firstName;\n        }\n\n        public String getLastName() {\n            return lastName;\n        }\n\n        public void setLastName(String lastName) {\n            this.lastName = lastName;\n        }\n\n        @Override\n        public String toString() {\n            return &quot;User [firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName + &quot;]&quot;;\n        }\n\n    }\n}\n</code></pre>\n<p>The <code>HTML</code> and <code>JS</code> code</p>\n<pre><code>&lt;html&gt;    \n&lt;head&gt;\n    &lt;script&gt;\n        function onSubmit() {\n\n            var formData = new FormData();\n\n            formData.append(&quot;file&quot;, document.forms[&quot;userForm&quot;].file.files[0]);\n            formData.append('user', new Blob([JSON.stringify({\n                &quot;firstName&quot;: document.getElementById(&quot;firstName&quot;).value,\n                &quot;lastName&quot;: document.getElementById(&quot;lastName&quot;).value\n            })], {\n                    type: &quot;application/json&quot;\n                }));\n            var boundary = Math.random().toString().substr(2);\n            fetch('/upload', {\n                method: 'post',\n                body: formData\n            }).then(function (response) {\n                if (response.status !== 200) {\n                    alert(&quot;There was an error!&quot;);\n                } else {\n                    alert(&quot;Request successful&quot;);\n                }\n            }).catch(function (err) {\n                alert(&quot;There was an error!&quot;);\n            });;\n        }\n    &lt;/script&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;form name=&quot;userForm&quot;&gt;\n        &lt;label&gt; File : &lt;/label&gt;\n        &lt;br/&gt;\n        &lt;input name=&quot;file&quot; type=&quot;file&quot;&gt;\n        &lt;br/&gt;\n        &lt;label&gt; First Name : &lt;/label&gt;\n        &lt;br/&gt;\n        &lt;input id=&quot;firstName&quot; name=&quot;firstName&quot; /&gt;\n        &lt;br/&gt;\n        &lt;label&gt; Last Name : &lt;/label&gt;\n        &lt;br/&gt;\n        &lt;input id=&quot;lastName&quot; name=&quot;lastName&quot; /&gt;\n        &lt;br/&gt;\n        &lt;input type=&quot;button&quot; value=&quot;Submit&quot; id=&quot;submit&quot; onclick=&quot;onSubmit(); return false;&quot; /&gt;\n    &lt;/form&gt;\n&lt;/body&gt;    \n&lt;/html&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2012119,"reputation":485,"user_id":1800319,"display_name":"Raghvendra Garg"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524570799,"creation_date":1524570799,"answer_id":50001013,"question_id":49845355,"body_markdown":"    @RequestMapping(value = { &quot;/test&quot; }, method = { RequestMethod.POST })\r\n    @ResponseBody\r\n    public String create(@RequestParam(&quot;file&quot;) MultipartFile file, @RequestParam String description, @RequestParam ArrayList&lt;Long&gt; sharers) throws Exception {\r\n        ExpensePostDto expensePostDto = new ExpensePostDto(file, description, sharers);\r\n        // do your thing\r\n        return &quot;test&quot;;\r\n    }\r\n\r\nThis seems to be the easiest way out here, other ways could be to add your own messageConverter.","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<pre><code>@RequestMapping(value = { \"/test\" }, method = { RequestMethod.POST })\n@ResponseBody\npublic String create(@RequestParam(\"file\") MultipartFile file, @RequestParam String description, @RequestParam ArrayList&lt;Long&gt; sharers) throws Exception {\n    ExpensePostDto expensePostDto = new ExpensePostDto(file, description, sharers);\n    // do your thing\n    return \"test\";\n}\n</code></pre>\n\n<p>This seems to be the easiest way out here, other ways could be to add your own messageConverter.</p>\n"},{"tags":[],"owner":{"account_id":928209,"reputation":781,"user_id":958555,"display_name":"ShaneCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524760842,"creation_date":1524592670,"answer_id":50008081,"question_id":49845355,"body_markdown":"You have to tell spring you&#39;re consuming `multipart/form-data` by adding `consumes = &quot;multipart/form-data&quot;` to the `RequestMapping` annotation.  Also remove the `RequestBody` annotation from the `expenseDto` parameter.\r\n\r\n    @RequestMapping(path = &quot;/{groupId}&quot;, consumes = &quot;multipart/form-data&quot;, method = RequestMethod.POST)\r\n    public ExpenseSnippetGetDto create(ExpensePostDto expenseDto, \r\n       @PathVariable long groupId, Principal principal, BindingResult result) \r\n       throws IOException {\r\n       //..\r\n    }\r\n\r\nWith the posted `ExpensePostDto` the `title` in the request is ignored.\r\n\r\n**Edit**\r\n\r\nYou&#39;ll also need to change the content type to `multipart/form-data`.  Sounds like that&#39;s the default for `post` based on some other answers.  Just to be safe, I would specify it:\r\n\r\n    &#39;Content-Type&#39;: &#39;multipart/form-data&#39;","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>You have to tell spring you're consuming <code>multipart/form-data</code> by adding <code>consumes = \"multipart/form-data\"</code> to the <code>RequestMapping</code> annotation.  Also remove the <code>RequestBody</code> annotation from the <code>expenseDto</code> parameter.</p>\n\n<pre><code>@RequestMapping(path = \"/{groupId}\", consumes = \"multipart/form-data\", method = RequestMethod.POST)\npublic ExpenseSnippetGetDto create(ExpensePostDto expenseDto, \n   @PathVariable long groupId, Principal principal, BindingResult result) \n   throws IOException {\n   //..\n}\n</code></pre>\n\n<p>With the posted <code>ExpensePostDto</code> the <code>title</code> in the request is ignored.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>You'll also need to change the content type to <code>multipart/form-data</code>.  Sounds like that's the default for <code>post</code> based on some other answers.  Just to be safe, I would specify it:</p>\n\n<pre><code>'Content-Type': 'multipart/form-data'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13050595,"reputation":114,"user_id":9431070,"display_name":"Femi Nefa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524600790,"creation_date":1524600790,"answer_id":50010071,"question_id":49845355,"body_markdown":"Remove this from the react front end:\r\n\r\n     &#39;Content-Type&#39;: &#39;application/json&#39;\r\nModify the Java side controller:\r\n\r\n    \r\n       @PostMapping(&quot;/{groupId}&quot;)\r\n       public Expense create(@RequestParam(&quot;image&quot;) MultipartFile image,  @RequestParam(&quot;amount&quot;) double amount, @RequestParam(&quot;description&quot;) String description, @RequestParam(&quot;title&quot;) String title) throws IOException {\r\n             //storageService.store(file); ....\r\n              //String imagePath = path.to.stored.image;\r\n             return new Expense(amount, title, description, imagePath);\r\n     }\r\n     \r\n\r\nThis can be written better but tried keeping it as close to your original code as much as I could. I hope it helps.","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>Remove this from the react front end:</p>\n\n<pre><code> 'Content-Type': 'application/json'\n</code></pre>\n\n<p>Modify the Java side controller:</p>\n\n<pre><code>   @PostMapping(\"/{groupId}\")\n   public Expense create(@RequestParam(\"image\") MultipartFile image,  @RequestParam(\"amount\") double amount, @RequestParam(\"description\") String description, @RequestParam(\"title\") String title) throws IOException {\n         //storageService.store(file); ....\n          //String imagePath = path.to.stored.image;\n         return new Expense(amount, title, description, imagePath);\n }\n</code></pre>\n\n<p>This can be written better but tried keeping it as close to your original code as much as I could. I hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":4715615,"reputation":325,"user_id":3814829,"accept_rate":0,"display_name":"visrahane"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1544854804,"creation_date":1544854804,"answer_id":53790073,"question_id":49845355,"body_markdown":"I had a similar use case where I had some JSON data and image upload (Think of it as a user trying to register with a personal details and profile image).\r\n\r\nReferring to @Stephan and @GSSwain answer I came up with a solution with Spring Boot and AngularJs.\r\n\r\nBelow is a snapshot of my code. Hope it helps someone.\r\n\r\n        var url = &quot;https://abcd.com/upload&quot;;\r\n        var config = {\r\n\t   \t\theaders : {\r\n\t   \t\t\t&#39;Content-Type&#39;: undefined\r\n\t   \t    }\r\n            \r\n        }\r\n        var data = {\r\n            name: $scope.name,\r\n            email: $scope.email\r\n        }\r\n        $scope.fd.append(&quot;obj&quot;, new Blob([JSON.stringify(data)], {\r\n                    type: &quot;application/json&quot;\r\n                }));\r\n\t\t\r\n        $http.post(\r\n            url, $scope.fd,config\r\n        )\r\n            .then(function (response) {\r\n                console.log(&quot;success&quot;, response)\r\n                // This function handles success\r\n\r\n            }, function (response) {\r\n                console.log(&quot;error&quot;, response)\r\n                // this function handles error\r\n\r\n            });\r\n\r\nAnd SpringBoot controller:\r\n\r\n    @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST, consumes = {   &quot;multipart/form-data&quot; })\r\n\t@ResponseBody\r\n\tpublic boolean uploadImage(@RequestPart(&quot;obj&quot;) YourDTO dto, @RequestPart(&quot;file&quot;) MultipartFile file) {\r\n\t\t// your logic\r\n\t\treturn true;\r\n\t}","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>I had a similar use case where I had some JSON data and image upload (Think of it as a user trying to register with a personal details and profile image).</p>\n\n<p>Referring to @Stephan and @GSSwain answer I came up with a solution with Spring Boot and AngularJs.</p>\n\n<p>Below is a snapshot of my code. Hope it helps someone.</p>\n\n<pre><code>    var url = \"https://abcd.com/upload\";\n    var config = {\n        headers : {\n            'Content-Type': undefined\n        }\n\n    }\n    var data = {\n        name: $scope.name,\n        email: $scope.email\n    }\n    $scope.fd.append(\"obj\", new Blob([JSON.stringify(data)], {\n                type: \"application/json\"\n            }));\n\n    $http.post(\n        url, $scope.fd,config\n    )\n        .then(function (response) {\n            console.log(\"success\", response)\n            // This function handles success\n\n        }, function (response) {\n            console.log(\"error\", response)\n            // this function handles error\n\n        });\n</code></pre>\n\n<p>And SpringBoot controller:</p>\n\n<pre><code>@RequestMapping(value = \"/upload\", method = RequestMethod.POST, consumes = {   \"multipart/form-data\" })\n@ResponseBody\npublic boolean uploadImage(@RequestPart(\"obj\") YourDTO dto, @RequestPart(\"file\") MultipartFile file) {\n    // your logic\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2770364,"reputation":1493,"user_id":8390382,"display_name":"lainatnavi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644591299,"creation_date":1644581588,"answer_id":71079913,"question_id":49845355,"body_markdown":"In my case the problem was the DTO class having public fields and not getter/setter methods\r\n\r\n    public class MyDTO {\r\n        public MultipartFile[] files;\r\n        public String user;\r\n        public String text;\r\n    }\r\n\r\nThe DTO class MUST have getters/setters, otherwise it won&#39;t work.","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>In my case the problem was the DTO class having public fields and not getter/setter methods</p>\n<pre><code>public class MyDTO {\n    public MultipartFile[] files;\n    public String user;\n    public String text;\n}\n</code></pre>\n<p>The DTO class MUST have getters/setters, otherwise it won't work.</p>\n"},{"tags":[],"owner":{"account_id":11059588,"reputation":315,"user_id":8121365,"display_name":"Md.Habibur Rahman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685443620,"creation_date":1685443620,"answer_id":76364018,"question_id":49845355,"body_markdown":"    @PostMapping( path = &quot;/upload&quot;)\r\n    public ResponseEntity uploadRT14(@RequestParam(&quot;file&quot;) MultipartFile multipartFile, @RequestPart(&quot;uploadedFileInfo&quot;) UploadFileDTO uploadFileDTO) {\r\n           ....... \r\n        }\r\n\r\n\r\ni needed to send a file and json reqBody both at the same time, I tried using `@RequestBody` for `UploadFileDTO` but didn&#39;t work. also tried using `@RequestParam` that also didn&#39;t work as the dto was not a string, it was json. Finally it worked using `@RequestPart`\r\n\r\nbelow is the postman setting that i used to test\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fhBEP.png","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<pre><code>@PostMapping( path = &quot;/upload&quot;)\npublic ResponseEntity uploadRT14(@RequestParam(&quot;file&quot;) MultipartFile multipartFile, @RequestPart(&quot;uploadedFileInfo&quot;) UploadFileDTO uploadFileDTO) {\n       ....... \n    }\n</code></pre>\n<p>i needed to send a file and json reqBody both at the same time, I tried using <code>@RequestBody</code> for <code>UploadFileDTO</code> but didn't work. also tried using <code>@RequestParam</code> that also didn't work as the dto was not a string, it was json. Finally it worked using <code>@RequestPart</code></p>\n<p>below is the postman setting that i used to test\n<a href=\"https://i.stack.imgur.com/fhBEP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fhBEP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":22453361,"reputation":97,"user_id":16656366,"display_name":"LongDev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690174823,"creation_date":1690174823,"answer_id":76751513,"question_id":49845355,"body_markdown":"it took me the whole morning to find out the answer\r\n\r\nI am doing form upload images and content using NextJS and Spring boot\r\n\r\n```\r\n @PostMapping(consumes = {   &quot;multipart/form-data&quot; })\r\n    @SecurityRequirement(name = &quot;bearerAuth&quot;)\r\n    public Object createProduct(@RequestPart(&quot;product&quot;)  ProductDTO product,\r\n        @RequestParam(value = &quot;primaryImage&quot;, required = false) MultipartFile mainImageMultipart,\r\n        @RequestParam(value = &quot;extraImage&quot;, required = false) MultipartFile[] extraImageMultiparts\r\n                                ) throws ParseException {\r\n        return ResponseEntity.ok().body(productServiceImpl.createOne(product, mainImageMultipart,extraImageMultiparts ));\r\n\r\n    }\r\n```\r\n\r\n\r\n\r\nand in nextjs api route\r\n\r\n\r\n```\r\n\r\nasync function products(req, res) {\r\n  if (req.method === &quot;POST&quot;) {\r\n    const { token } = cookie.parse(req.headers.cookie);\r\n\r\n    const data = await new Promise((resolve, reject) =&gt; {\r\n      const form = formidable();\r\n\r\n      form.parse(req, (err, fields, files) =&gt; {\r\n        if (err) reject({ err });\r\n        resolve({ err, fields, files });\r\n      });\r\n    });\r\n\r\n    const { err, fields, files } = data;\r\n\r\n    const formData = new FormData();\r\n    formData.append(\r\n      &quot;product&quot;,\r\n      new Blob([fields.product[0]], {\r\n        type: &quot;application/json&quot;,\r\n      })\r\n    );\r\n    formData.append(&quot;primaryImage&quot;, getDataFile(files.primaryImage[0]));\r\n\r\n    for (let i = 0; i &lt; files.extraImage.length; i++) {\r\n      formData.append(&quot;extraImage&quot;, getDataFile(files.extraImage[i]));\r\n    }\r\n\r\n    const resPost = await fetch(`${API_URL}/products`, {\r\n      method: &quot;POST&quot;,\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: formData,\r\n    });\r\n\r\n    const dataPos = await resPost.json();\r\n\r\n    if (!resPost.ok) {\r\n      console.log(&quot;Loi la &quot; + JSON.stringify(dataPos));\r\n      res.status(500).json({ message: dataPos.message });\r\n    } else {\r\n      res.status(200).json({ products: dataPos });\r\n    }\r\n    res.status(200).json({ message: &quot;Data processed successfully&quot; });\r\n  }\r\n}\r\n\r\n\r\n```","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>it took me the whole morning to find out the answer</p>\n<p>I am doing form upload images and content using NextJS and Spring boot</p>\n<pre><code> @PostMapping(consumes = {   &quot;multipart/form-data&quot; })\n    @SecurityRequirement(name = &quot;bearerAuth&quot;)\n    public Object createProduct(@RequestPart(&quot;product&quot;)  ProductDTO product,\n        @RequestParam(value = &quot;primaryImage&quot;, required = false) MultipartFile mainImageMultipart,\n        @RequestParam(value = &quot;extraImage&quot;, required = false) MultipartFile[] extraImageMultiparts\n                                ) throws ParseException {\n        return ResponseEntity.ok().body(productServiceImpl.createOne(product, mainImageMultipart,extraImageMultiparts ));\n\n    }\n</code></pre>\n<p>and in nextjs api route</p>\n<pre><code>\nasync function products(req, res) {\n  if (req.method === &quot;POST&quot;) {\n    const { token } = cookie.parse(req.headers.cookie);\n\n    const data = await new Promise((resolve, reject) =&gt; {\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) =&gt; {\n        if (err) reject({ err });\n        resolve({ err, fields, files });\n      });\n    });\n\n    const { err, fields, files } = data;\n\n    const formData = new FormData();\n    formData.append(\n      &quot;product&quot;,\n      new Blob([fields.product[0]], {\n        type: &quot;application/json&quot;,\n      })\n    );\n    formData.append(&quot;primaryImage&quot;, getDataFile(files.primaryImage[0]));\n\n    for (let i = 0; i &lt; files.extraImage.length; i++) {\n      formData.append(&quot;extraImage&quot;, getDataFile(files.extraImage[i]));\n    }\n\n    const resPost = await fetch(`${API_URL}/products`, {\n      method: &quot;POST&quot;,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n      body: formData,\n    });\n\n    const dataPos = await resPost.json();\n\n    if (!resPost.ok) {\n      console.log(&quot;Loi la &quot; + JSON.stringify(dataPos));\n      res.status(500).json({ message: dataPos.message });\n    } else {\n      res.status(200).json({ products: dataPos });\n    }\n    res.status(200).json({ message: &quot;Data processed successfully&quot; });\n  }\n}\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21900928,"reputation":29,"user_id":16186615,"display_name":"raed abu sada"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701345871,"creation_date":1701345871,"answer_id":77578283,"question_id":49845355,"body_markdown":"this is how i implemented it.\r\n\r\nin frontend - angular\r\n\r\n&gt; // there is a sample model used to show the concept of sending\r\n    files and model in same HTTP request\r\n&gt; this is the model class in Angular\r\n   \r\n    class ReportRequestModel {\r\n    constructor(public appName: string, public version: string) {}\r\n    }\r\n\r\n&gt; angular app.component.ts code\r\n\r\n    onUpload() {\r\n    \r\n    const model = new ReportRequestModel(&#39;o support&#39;, &#39;2.0&#39;);\r\n\r\n    const formData = new FormData();\r\n    formData.append(&#39;files&#39;, this.selectedFile);\r\n    formData.append(&#39;dto&#39;, JSON.stringify(model));\r\n\r\n    this.http\r\n      .post(&#39;http://localhost:8088/&#39;, formData, {\r\n        observe: &#39;response&#39;,\r\n      })\r\n      .subscribe((response) =&gt; {\r\n        this.getImageNames();\r\n      });\r\n\r\n&gt; in java-spring API i used ObjectMapper to deserialize the String dto to \r\n  Java class ReportRequestDTO\r\n\r\n    private final ObjectMapper objectMapper;\r\n\t\r\n\t@PostMapping\r\n\tpublic ResponseEntity&lt;Report&gt; saveReport(@RequestBody List&lt;MultipartFile&gt; files, \r\n\t\t\t                                 @RequestPart String dto){\r\n\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t  var data = objectMapper.readValue(dto, ReportRequestDTO.class);\r\n\t\t  System.out.println(data);\r\n\t\t} catch (JsonProcessingException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\tReport savedReport = null;\r\n\t\t\r\n\t\tfor (MultipartFile file : files) {\r\n\t\t\r\n\t\tReport report = null;\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t\treport = new Report();\r\n\t\t\treport.setFileData(file.getBytes());\r\n\t\t\treport.setFileName(file.getOriginalFilename());\r\n\t\t\treport.setFileContent(file.getContentType());\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t\te.getLocalizedMessage();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t\tsavedReport = reportsRepository.save(report);\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.println(e.getMessage());\r\n\t\t}\t\t\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn ResponseEntity.ok(savedReport);\r\n\t}\r\n\r\n&gt; ReportRequestDTO class\r\n\r\n    @Data\r\n    public class ReportRequestDTO implements Serializable {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@JsonProperty(&quot;appName&quot;)\r\n\tprivate String appName;\r\n\t\r\n\t@JsonProperty(&quot;version&quot;)\r\n\tprivate String version;\r\n    }","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>this is how i implemented it.</p>\n<p>in frontend - angular</p>\n<blockquote>\n<p>// there is a sample model used to show the concept of sending\nfiles and model in same HTTP request\nthis is the model class in Angular</p>\n</blockquote>\n<pre><code>class ReportRequestModel {\nconstructor(public appName: string, public version: string) {}\n}\n</code></pre>\n<blockquote>\n<p>angular app.component.ts code</p>\n</blockquote>\n<pre><code>onUpload() {\n\nconst model = new ReportRequestModel('o support', '2.0');\n\nconst formData = new FormData();\nformData.append('files', this.selectedFile);\nformData.append('dto', JSON.stringify(model));\n\nthis.http\n  .post('http://localhost:8088/', formData, {\n    observe: 'response',\n  })\n  .subscribe((response) =&gt; {\n    this.getImageNames();\n  });\n</code></pre>\n<blockquote>\n<p>in java-spring API i used ObjectMapper to deserialize the String dto to\nJava class ReportRequestDTO</p>\n</blockquote>\n<pre><code>private final ObjectMapper objectMapper;\n\n@PostMapping\npublic ResponseEntity&lt;Report&gt; saveReport(@RequestBody List&lt;MultipartFile&gt; files, \n                                         @RequestPart String dto){\n    \n    \n    try {\n      var data = objectMapper.readValue(dto, ReportRequestDTO.class);\n      System.out.println(data);\n    } catch (JsonProcessingException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    \n    Report savedReport = null;\n    \n    for (MultipartFile file : files) {\n    \n    Report report = null;       \n    \n    try {\n        report = new Report();\n        report.setFileData(file.getBytes());\n        report.setFileName(file.getOriginalFilename());\n        report.setFileContent(file.getContentType());\n        \n    } catch (IOException e) {\n        e.getLocalizedMessage();\n    }\n    \n    \n    \n    try {\n        savedReport = reportsRepository.save(report);\n    } catch (Exception e) {\n        System.out.println(e.getMessage());\n    }       \n    \n    }\n    \n    return ResponseEntity.ok(savedReport);\n}\n</code></pre>\n<blockquote>\n<p>ReportRequestDTO class</p>\n</blockquote>\n<pre><code>@Data\npublic class ReportRequestDTO implements Serializable {\n\nprivate static final long serialVersionUID = 1L;\n\n@JsonProperty(&quot;appName&quot;)\nprivate String appName;\n\n@JsonProperty(&quot;version&quot;)\nprivate String version;\n}\n</code></pre>\n"}],"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":169326,"favorite_count":0,"down_vote_count":1,"up_vote_count":66,"accepted_answer_id":49991403,"answer_count":12,"score":65,"last_activity_date":1701345871,"creation_date":1523816591,"question_id":49845355,"body_markdown":"I want to upload a file inside a form to a Spring Boot API endpoint. \r\n\r\nThe UI is written in React: \r\n\r\n    export function createExpense(formData) {\r\n      return dispatch =&gt; {\r\n        axios.post(ENDPOINT,\r\n          formData, \r\n          headers: {\r\n            &#39;Authorization&#39;: //...,\r\n            &#39;Content-Type&#39;: &#39;application/json&#39;\r\n          }\r\n          ).then(({data}) =&gt; {\r\n            //...\r\n          })\r\n          .catch(({response}) =&gt; {\r\n            //...\r\n          });\r\n        };\r\n    }\r\n\r\n      _onSubmit = values =&gt; {\r\n        let formData = new FormData();\r\n        formData.append(&#39;title&#39;, values.title);\r\n        formData.append(&#39;description&#39;, values.description);\r\n        formData.append(&#39;amount&#39;, values.amount);\r\n        formData.append(&#39;image&#39;, values.image[0]);\r\n        this.props.createExpense(formData);\r\n      }\r\n\r\nThis is the java side code:\r\n\r\n\t@RequestMapping(path = &quot;/{groupId}&quot;, method = RequestMethod.POST)\r\n\tpublic ExpenseSnippetGetDto create(@RequestBody ExpensePostDto expenseDto, @PathVariable long groupId, Principal principal, BindingResult result) throws IOException {\r\n       //..\r\n\t}\r\n\r\nBut I get this exception on the Java side:\r\n\r\n    org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;multipart/form-data;boundary=----WebKitFormBoundaryapHVvBsdZYc6j4Af;charset=UTF-8&#39; not supported\r\n\r\nHow should I resolve this issue? The similar API endpoints and JavaScript side code is already working.\r\n\r\n### Note\r\nI&#39;ve seen a solution where it suggests that the request body should have 2 attributes: one which the JSON section goes under, another for the image. I&#39;d like to see if it is possible to have it automatically converted to DTO.  \r\n\r\n---\r\n## Update 1\r\nThe upload payload sent by the client should be converted to the following DTO:\r\n\r\n    public class ExpensePostDto extends ExpenseBaseDto {\r\n\r\n    \tprivate MultipartFile image;\r\n    \r\n    \tprivate String description;\r\n    \r\n    \tprivate List&lt;Long&gt; sharers;\r\n\r\n    }\r\n\r\nSo you can say it&#39;s a mix of JSON and *multipart*.\r\n\r\n---\r\n## Solution\r\n\r\nThe solution to the problem is to use `FormData` on the front-end and `ModelAttribute` on the backend: \r\n\r\n\t@RequestMapping(path = &quot;/{groupId}&quot;, method = RequestMethod.POST,\r\n\t        consumes = {&quot;multipart/form-data&quot;})\r\n\tpublic ExpenseSnippetGetDto create(@ModelAttribute ExpensePostDto expenseDto, @PathVariable long groupId, Principal principal) throws IOException {\r\n       //...\r\n    }\r\n\r\nand on the front-end, get rid of `Content-Type` as it should be determined by the browser itself, and use `FormData` (standard JavaScript). That should solve the problem.","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>I want to upload a file inside a form to a Spring Boot API endpoint. </p>\n\n<p>The UI is written in React: </p>\n\n<pre><code>export function createExpense(formData) {\n  return dispatch =&gt; {\n    axios.post(ENDPOINT,\n      formData, \n      headers: {\n        'Authorization': //...,\n        'Content-Type': 'application/json'\n      }\n      ).then(({data}) =&gt; {\n        //...\n      })\n      .catch(({response}) =&gt; {\n        //...\n      });\n    };\n}\n\n  _onSubmit = values =&gt; {\n    let formData = new FormData();\n    formData.append('title', values.title);\n    formData.append('description', values.description);\n    formData.append('amount', values.amount);\n    formData.append('image', values.image[0]);\n    this.props.createExpense(formData);\n  }\n</code></pre>\n\n<p>This is the java side code:</p>\n\n<pre><code>@RequestMapping(path = \"/{groupId}\", method = RequestMethod.POST)\npublic ExpenseSnippetGetDto create(@RequestBody ExpensePostDto expenseDto, @PathVariable long groupId, Principal principal, BindingResult result) throws IOException {\n   //..\n}\n</code></pre>\n\n<p>But I get this exception on the Java side:</p>\n\n<pre><code>org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'multipart/form-data;boundary=----WebKitFormBoundaryapHVvBsdZYc6j4Af;charset=UTF-8' not supported\n</code></pre>\n\n<p>How should I resolve this issue? The similar API endpoints and JavaScript side code is already working.</p>\n\n<h3>Note</h3>\n\n<p>I've seen a solution where it suggests that the request body should have 2 attributes: one which the JSON section goes under, another for the image. I'd like to see if it is possible to have it automatically converted to DTO.  </p>\n\n<hr>\n\n<h2>Update 1</h2>\n\n<p>The upload payload sent by the client should be converted to the following DTO:</p>\n\n<pre><code>public class ExpensePostDto extends ExpenseBaseDto {\n\n    private MultipartFile image;\n\n    private String description;\n\n    private List&lt;Long&gt; sharers;\n\n}\n</code></pre>\n\n<p>So you can say it's a mix of JSON and <em>multipart</em>.</p>\n\n<hr>\n\n<h2>Solution</h2>\n\n<p>The solution to the problem is to use <code>FormData</code> on the front-end and <code>ModelAttribute</code> on the backend: </p>\n\n<pre><code>@RequestMapping(path = \"/{groupId}\", method = RequestMethod.POST,\n        consumes = {\"multipart/form-data\"})\npublic ExpenseSnippetGetDto create(@ModelAttribute ExpensePostDto expenseDto, @PathVariable long groupId, Principal principal) throws IOException {\n   //...\n}\n</code></pre>\n\n<p>and on the front-end, get rid of <code>Content-Type</code> as it should be determined by the browser itself, and use <code>FormData</code> (standard JavaScript). That should solve the problem.</p>\n"},{"tags":["java","jakarta-ee"],"comments":[{"owner":{"account_id":1065937,"reputation":569,"user_id":1066506,"accept_rate":100,"display_name":"Vin"},"score":0,"creation_date":1418059288,"post_id":546365,"comment_id":43178579,"body_markdown":"I benefited from http://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824 -- to be specific, it was the `@MultipartConfig` solution that worked for me (I do need to `new String(....getBytes(...), ...)` in addition to that). The other solutions listed here so far unfortunately did not work for me alone :/","body":"I benefited from <a href=\"http://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824\" title=\"how to upload files to server using jsp servlet\">stackoverflow.com/questions/2422468/&hellip;</a> -- to be specific, it was the <code>@MultipartConfig</code> solution that worked for me (I do need to <code>new String(....getBytes(...), ...)</code> in addition to that). The other solutions listed here so far unfortunately did not work for me alone :/"}],"answers":[{"tags":[],"owner":{"account_id":5748,"reputation":1872,"user_id":9424,"accept_rate":88,"display_name":"Michael Glenn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1234541390,"creation_date":1234541390,"answer_id":546531,"question_id":546365,"body_markdown":"The filter is key for IE. A few other things to check;\r\n\r\nWhat is the page encoding and character set? Both should be UTF-8\r\n\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n\r\nWhat is the character set in the meta tag?\r\n\r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\r\n\r\nDoes your MySQL connection string specify UTF-8?\r\ne.g.\r\n\r\n    jdbc:mysql://127.0.0.1/dbname?requireSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8\r\n","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>The filter is key for IE. A few other things to check;</p>\n\n<p>What is the page encoding and character set? Both should be UTF-8</p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\" pageEncoding=\"UTF-8\"%&gt;\n</code></pre>\n\n<p>What is the character set in the meta tag?</p>\n\n<pre><code>&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\n</code></pre>\n\n<p>Does your MySQL connection string specify UTF-8?\ne.g.</p>\n\n<pre><code>jdbc:mysql://127.0.0.1/dbname?requireSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"Aswin Anand"},"score":0,"creation_date":1234768165,"post_id":549634,"comment_id":364198,"body_markdown":"Michael, I referred the source code. MySQL&#39;s character encoding is set to UTF-8 &amp; pageEncoding attribute is already in the JSP. Moreover, as per Paul&#39;s accept-charset attribute is also *not* set in the form tag. But somehow the browser doesn&#39;t send UTF-8 data. Phax&#39;s soln worked out.","body":"Michael, I referred the source code. MySQL&#39;s character encoding is set to UTF-8 &amp; pageEncoding attribute is already in the JSP. Moreover, as per Paul&#39;s accept-charset attribute is also <i>not</i> set in the form tag. But somehow the browser doesn&#39;t send UTF-8 data. Phax&#39;s soln worked out."},{"owner":{"account_id":38193,"reputation":5264,"user_id":109471,"accept_rate":85,"display_name":"David Garc&#237;a Gonz&#225;lez"},"score":0,"creation_date":1257772432,"post_id":549634,"comment_id":1576682,"body_markdown":"What could happen if commons-fileupload fixed this and the request is in UTF-8? \nPerhaps when you execute s.getBytes (&quot;iso-8859-1&quot;) the bytes are not in the iso-8859-1 encoding.","body":"What could happen if commons-fileupload fixed this and the request is in UTF-8?  Perhaps when you execute s.getBytes (&quot;iso-8859-1&quot;) the bytes are not in the iso-8859-1 encoding."},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":1,"creation_date":1336672813,"post_id":549634,"comment_id":13635847,"body_markdown":"Not sure if this will help, but commons-fileupload (at least v1.2.1) has logic to default to the platform encoding if you don&#39;t configure another value. Take a look at `org.apache.commons.fileupload.FileUploadBase` and the `headerEncoding` field.","body":"Not sure if this will help, but commons-fileupload (at least v1.2.1) has logic to default to the platform encoding if you don&#39;t configure another value. Take a look at <code>org.apache.commons.fileupload.FileUploadBase</code> and the <code>headerEncoding</code> field."},{"owner":{"account_id":4195407,"reputation":456,"user_id":3436941,"accept_rate":75,"display_name":"Khasan 24-7"},"score":0,"creation_date":1449137473,"post_id":549634,"comment_id":55879395,"body_markdown":"When converting Russian characters, this worked as a charm. Just great! Thanks.","body":"When converting Russian characters, this worked as a charm. Just great! Thanks."},{"owner":{"account_id":6235075,"reputation":7453,"user_id":4850646,"accept_rate":83,"display_name":"Lucas Basquerotto"},"score":3,"creation_date":1523629981,"post_id":549634,"comment_id":86653639,"body_markdown":"You can also use `new String(s.getBytes(Charset.defaultCharset()), &quot;UTF-8&quot;)`","body":"You can also use <code>new String(s.getBytes(Charset.defaultCharset()), &quot;UTF-8&quot;)</code>"},{"owner":{"account_id":1364678,"reputation":2198,"user_id":1301373,"display_name":"winne2"},"score":1,"creation_date":1574760838,"post_id":549634,"comment_id":104336227,"body_markdown":"Philip, StandardCharsets was introduced in Java 7, not 8 ;-)","body":"Philip, StandardCharsets was introduced in Java 7, not 8 ;-)"},{"owner":{"account_id":10764,"reputation":34965,"user_id":20479,"accept_rate":17,"display_name":"Rhubarb"},"score":0,"creation_date":1620152853,"post_id":549634,"comment_id":119115159,"body_markdown":"@DavidGarc&#237;aGonz&#225;lez it seems it&#39;s fair to anticipate that it is _always_ iso-8859-1 according to the [RFC 6266](https://tools.ietf.org/html/rfc6266#section-4.3) but that also points at a &#39;proper&#39; solution which would be if the client uses `filename*` (note the `*`) instead of `filename`, and specifies the charset as utf-8, the browser and server should get it right [RFC 5987](https://tools.ietf.org/html/rfc5987)","body":"@DavidGarc&#237;aGonz&#225;lez it seems it&#39;s fair to anticipate that it is <i>always</i> iso-8859-1 according to the <a href=\"https://tools.ietf.org/html/rfc6266#section-4.3\" rel=\"nofollow noreferrer\">RFC 6266</a> but that also points at a &#39;proper&#39; solution which would be if the client uses <code>filename*</code> (note the <code>*</code>) instead of <code>filename</code>, and specifies the charset as utf-8, the browser and server should get it right <a href=\"https://tools.ietf.org/html/rfc5987\" rel=\"nofollow noreferrer\">RFC 5987</a>"}],"tags":[],"owner":{"account_id":8455,"reputation":1834,"user_id":15254,"display_name":"Philip Helger"},"comment_count":7,"down_vote_count":2,"up_vote_count":60,"is_accepted":true,"score":58,"last_activity_date":1701345832,"creation_date":1234639560,"answer_id":549634,"question_id":546365,"body_markdown":"I had the same problem using Apache commons-fileupload.\r\nI did not find out what causes the problems especially because I have the UTF-8 encoding in the following places:  \r\n\r\n1. HTML meta tag  \r\n2. Form accept-charset attribute  \r\n3. Tomcat filter on every request that sets the &quot;UTF-8&quot; encoding  \r\n\r\n-&gt; My solution was to especially convert Strings from ISO-8859-1 (or whatever is the default encoding of your platform) to UTF-8:\r\n\r\n    new String (s.getBytes (&quot;iso-8859-1&quot;), &quot;UTF-8&quot;);\r\n\r\nhope that helps\r\n\r\nEdit: starting with Java 7 you can also use the following:\r\n\r\n    new String (s.getBytes (StandardCharsets.ISO_8859_1), StandardCharsets.UTF_8);\r\n\r\n","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I had the same problem using Apache commons-fileupload.\nI did not find out what causes the problems especially because I have the UTF-8 encoding in the following places:</p>\n<ol>\n<li>HTML meta tag</li>\n<li>Form accept-charset attribute</li>\n<li>Tomcat filter on every request that sets the &quot;UTF-8&quot; encoding</li>\n</ol>\n<p>-&gt; My solution was to especially convert Strings from ISO-8859-1 (or whatever is the default encoding of your platform) to UTF-8:</p>\n<pre><code>new String (s.getBytes (&quot;iso-8859-1&quot;), &quot;UTF-8&quot;);\n</code></pre>\n<p>hope that helps</p>\n<p>Edit: starting with Java 7 you can also use the following:</p>\n<pre><code>new String (s.getBytes (StandardCharsets.ISO_8859_1), StandardCharsets.UTF_8);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25777,"reputation":1167,"user_id":66536,"display_name":"nbeyer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1234658322,"creation_date":1234658322,"answer_id":550070,"question_id":546365,"body_markdown":"The filter thing and setting up Tomcat to support UTF-8 URIs is only important if you&#39;re passing the via the URL&#39;s query string, as you would with a HTTP GET. If you&#39;re using a POST, with a query string in the HTTP message&#39;s body, what&#39;s important is going to be the content-type of the request and this will be up to the browser to set the content-type to UTF-8 and send the content with that encoding.\r\n\r\nThe only way to really do this is by telling the browser that you can only accept UTF-8 by setting the Accept-Charset header on every response to &quot;UTF-8;q=1,ISO-8859-1;q=0.6&quot;. This will put UTF-8 as the best quality and the default charset, ISO-8859-1, as acceptable, but a lower quality.\r\n\r\nWhen you say the file name is garbled, is it garbled in the HttpServletRequest.getParameter&#39;s return value?","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>The filter thing and setting up Tomcat to support UTF-8 URIs is only important if you're passing the via the URL's query string, as you would with a HTTP GET. If you're using a POST, with a query string in the HTTP message's body, what's important is going to be the content-type of the request and this will be up to the browser to set the content-type to UTF-8 and send the content with that encoding.</p>\n\n<p>The only way to really do this is by telling the browser that you can only accept UTF-8 by setting the Accept-Charset header on every response to \"UTF-8;q=1,ISO-8859-1;q=0.6\". This will put UTF-8 as the best quality and the default charset, ISO-8859-1, as acceptable, but a lower quality.</p>\n\n<p>When you say the file name is garbled, is it garbled in the HttpServletRequest.getParameter's return value?</p>\n"},{"tags":[],"owner":{"account_id":24765,"reputation":3353,"user_id":63189,"display_name":"paulmurray"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1234661704,"creation_date":1234661704,"answer_id":550127,"question_id":546365,"body_markdown":"You do not use UTF-8 to encode text data for HTML forms. The html standard defines two encodings, and [the relevant part of that standard is here][1]. The &quot;old&quot; encoding, than handles ascii, is application/x-www-form-urlencoded. The new one, that works properly, is multipart/form-data.\r\n\r\nSpecifically, the form declaration looks like this:\r\n\r\n     &lt;FORM action=&quot;http://server.com/cgi/handle&quot;\r\n           enctype=&quot;multipart/form-data&quot;\r\n           method=&quot;post&quot;&gt;\r\n       &lt;P&gt;\r\n       What is your name? &lt;INPUT type=&quot;text&quot; name=&quot;submit-name&quot;&gt;&lt;BR&gt;\r\n       What files are you sending? &lt;INPUT type=&quot;file&quot; name=&quot;files&quot;&gt;&lt;BR&gt;\r\n       &lt;INPUT type=&quot;submit&quot; value=&quot;Send&quot;&gt; &lt;INPUT type=&quot;reset&quot;&gt;\r\n     &lt;/FORM&gt;\r\n\r\nAnd I think that&#39;s all you have to worry about - the webserver should handle it. If you are writing something that directly reads the InputStream from the web client, then you will need to read [RFC 2045][2] and [RFC 2046][3].\r\n\r\n\r\n  [1]: http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\r\n  [2]: http://www.ietf.org/rfc/rfc2045.txt\r\n  [3]: http://www.ietf.org/rfc/rfc2046.txt","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>You do not use UTF-8 to encode text data for HTML forms. The html standard defines two encodings, and <a href=\"http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\" rel=\"nofollow noreferrer\">the relevant part of that standard is here</a>. The \"old\" encoding, than handles ascii, is application/x-www-form-urlencoded. The new one, that works properly, is multipart/form-data.</p>\n\n<p>Specifically, the form declaration looks like this:</p>\n\n<pre><code> &lt;FORM action=\"http://server.com/cgi/handle\"\n       enctype=\"multipart/form-data\"\n       method=\"post\"&gt;\n   &lt;P&gt;\n   What is your name? &lt;INPUT type=\"text\" name=\"submit-name\"&gt;&lt;BR&gt;\n   What files are you sending? &lt;INPUT type=\"file\" name=\"files\"&gt;&lt;BR&gt;\n   &lt;INPUT type=\"submit\" value=\"Send\"&gt; &lt;INPUT type=\"reset\"&gt;\n &lt;/FORM&gt;\n</code></pre>\n\n<p>And I think that's all you have to worry about - the webserver should handle it. If you are writing something that directly reads the InputStream from the web client, then you will need to read <a href=\"http://www.ietf.org/rfc/rfc2045.txt\" rel=\"nofollow noreferrer\">RFC 2045</a> and <a href=\"http://www.ietf.org/rfc/rfc2046.txt\" rel=\"nofollow noreferrer\">RFC 2046</a>.</p>\n"},{"comments":[{"owner":{"account_id":993644,"reputation":1619,"user_id":1010173,"accept_rate":64,"display_name":"Kevin Rahe"},"score":4,"creation_date":1362588206,"post_id":1550250,"comment_id":21510952,"body_markdown":"I&#39;m using Glassfish 3.1.1, and while running the JVM with `-Dfile.encoding=UTF-8` is necessary, I didn&#39;t need a filter.  **However**, simply adding the `acceptcharset` attribute to the `&lt;form /&gt;` tag didn&#39;t correct the problem.  Instead, I had to add the charset identifier to the `enctype` attribute, as in: `&lt;form enctype=&quot;multipart/form-data;charset=UTF-8&quot;&gt;`.","body":"I&#39;m using Glassfish 3.1.1, and while running the JVM with <code>-Dfile.encoding=UTF-8</code> is necessary, I didn&#39;t need a filter.  <b>However</b>, simply adding the <code>acceptcharset</code> attribute to the <code>&lt;form &#47;&gt;</code> tag didn&#39;t correct the problem.  Instead, I had to add the charset identifier to the <code>enctype</code> attribute, as in: <code>&lt;form enctype=&quot;multipart&#47;form-data;charset=UTF-8&quot;&gt;</code>."},{"owner":{"account_id":81885,"reputation":487,"user_id":230638,"accept_rate":82,"display_name":"Jasper"},"score":2,"creation_date":1406721065,"post_id":1550250,"comment_id":38937889,"body_markdown":"the -Dfile.encoding=UTF-8 parameter is important.","body":"the -Dfile.encoding=UTF-8 parameter is important."}],"tags":[],"owner":{"account_id":20050,"reputation":2147,"user_id":47528,"display_name":"Dan"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1362590274,"creation_date":1255252795,"answer_id":1550250,"question_id":546365,"body_markdown":"I had the same problem and it turned out that in addition to specifying the encoding in the Filter\r\n\r\n    request.setCharacterEncoding(&quot;UTF-8&quot;);\r\n    response.setCharacterEncoding(&quot;UTF-8&quot;);\r\n\r\nit is necessary to add &quot;acceptcharset&quot; to the form\r\n\r\n    &lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; acceptcharset=&quot;UTF-8&quot; &gt; \r\n\r\nand **run the JVM** with \r\n\r\n    -Dfile.encoding=UTF-8\r\n\r\nThe HTML meta tag is not necessary if you send it in the HTTP header using response.setCharacterEncoding().","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I had the same problem and it turned out that in addition to specifying the encoding in the Filter</p>\n\n<pre><code>request.setCharacterEncoding(\"UTF-8\");\nresponse.setCharacterEncoding(\"UTF-8\");\n</code></pre>\n\n<p>it is necessary to add \"acceptcharset\" to the form</p>\n\n<pre><code>&lt;form method=\"post\" enctype=\"multipart/form-data\" acceptcharset=\"UTF-8\" &gt; \n</code></pre>\n\n<p>and <strong>run the JVM</strong> with </p>\n\n<pre><code>-Dfile.encoding=UTF-8\n</code></pre>\n\n<p>The HTML meta tag is not necessary if you send it in the HTTP header using response.setCharacterEncoding().</p>\n"},{"comments":[{"owner":{"account_id":89018,"reputation":5520,"user_id":245858,"accept_rate":55,"display_name":"Pradyut Bhattacharya"},"score":5,"creation_date":1391030651,"post_id":7383023,"comment_id":32355162,"body_markdown":"this should be upvoted, nothing else solves the problem...\neven tried with filters and domain/container xml files etc..\ndoing getString(&quot;UTF-8&quot;) solves even if everything else is not done...","body":"this should be upvoted, nothing else solves the problem... even tried with filters and domain/container xml files etc.. doing getString(&quot;UTF-8&quot;) solves even if everything else is not done..."},{"owner":{"account_id":3319967,"reputation":1644,"user_id":2791390,"display_name":"DLight"},"score":2,"creation_date":1433864558,"post_id":7383023,"comment_id":49529645,"body_markdown":"FileItem.getString(&quot;UTF-8&quot;) was the solution for me","body":"FileItem.getString(&quot;UTF-8&quot;) was the solution for me"},{"owner":{"account_id":5159517,"reputation":4176,"user_id":4131673,"accept_rate":56,"display_name":"Mariusz Jask&#243;ka"},"score":1,"creation_date":1434982843,"post_id":7383023,"comment_id":49994919,"body_markdown":"It is true, It works if one uses Apache commons-fileupload module:\nhttp://commons.apache.org/proper/commons-fileupload/using.html\nI will use it just because it solves the problem.","body":"It is true, It works if one uses Apache commons-fileupload module: <a href=\"http://commons.apache.org/proper/commons-fileupload/using.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-fileupload/using.html</a> I will use it just because it solves the problem."},{"owner":{"account_id":2200117,"reputation":151,"user_id":1944711,"accept_rate":60,"display_name":"Sachidananda Naik"},"score":0,"creation_date":1631647087,"post_id":7383023,"comment_id":122278046,"body_markdown":"This is it, this is the correct answer. This helped me handle unicode characters with attachments.  Thanks a lot @nautilusvn you saved my day!","body":"This is it, this is the correct answer. This helped me handle unicode characters with attachments.  Thanks a lot @nautilusvn you saved my day!"}],"tags":[],"owner":{"account_id":904694,"reputation":655,"user_id":939821,"accept_rate":38,"display_name":"nautilusvn"},"comment_count":4,"down_vote_count":2,"up_vote_count":31,"is_accepted":false,"score":29,"last_activity_date":1315798266,"creation_date":1315798266,"answer_id":7383023,"question_id":546365,"body_markdown":"Just use Apache commons upload library.\r\nAdd `URIEncoding=&quot;UTF-8&quot;` to Tomcat&#39;s connector, and use FileItem.getString(&quot;UTF-8&quot;) instead of FileItem.getString() without charset specified.\r\n\r\nHope this help.","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>Just use Apache commons upload library.\nAdd <code>URIEncoding=\"UTF-8\"</code> to Tomcat's connector, and use FileItem.getString(\"UTF-8\") instead of FileItem.getString() without charset specified.</p>\n\n<p>Hope this help.</p>\n"},{"comments":[{"owner":{"account_id":16491584,"reputation":122,"user_id":11915267,"display_name":"CHOI"},"score":0,"creation_date":1653895607,"post_id":9971299,"comment_id":127954065,"body_markdown":"Works well and very simple. thanks!","body":"Works well and very simple. thanks!"}],"tags":[],"owner":{"account_id":1107571,"reputation":3147,"user_id":1104885,"display_name":"Roger Keays"},"comment_count":1,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1614352405,"creation_date":1333344617,"answer_id":9971299,"question_id":546365,"body_markdown":"I got stuck with this problem and found that it was the order of the call to\r\n\r\n    request.setCharacterEncoding(&quot;UTF-8&quot;);\r\n\r\nthat was causing the problem. It has to be called before any all call to request.getParameter(), so I made a special filter to use at the top of my filter chain.\r\n\r\nhttps://rogerkeays.com/servletrequest-setcharactercoding-ignored","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I got stuck with this problem and found that it was the order of the call to</p>\n<pre><code>request.setCharacterEncoding(&quot;UTF-8&quot;);\n</code></pre>\n<p>that was causing the problem. It has to be called before any all call to request.getParameter(), so I made a special filter to use at the top of my filter chain.</p>\n<p><a href=\"https://rogerkeays.com/servletrequest-setcharactercoding-ignored\" rel=\"nofollow noreferrer\">https://rogerkeays.com/servletrequest-setcharactercoding-ignored</a></p>\n"},{"tags":[],"owner":{"account_id":1103676,"reputation":1275,"user_id":1095530,"accept_rate":88,"display_name":"Weles"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415205694,"creation_date":1415205268,"answer_id":26762304,"question_id":546365,"body_markdown":"I am using Primefaces with glassfish and SQL Server. \r\n\r\nin my case i created the Webfilter, in back-end, to get every request and convert to UTF-8, like this:\r\n\r\n    package br.com.teste.filter;\r\n\r\n    import java.io.IOException;\r\n\r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.FilterConfig;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.ServletRequest;\r\n    import javax.servlet.ServletResponse;\r\n    import javax.servlet.annotation.WebFilter;\r\n \r\n    @WebFilter(servletNames={&quot;Faces Servlet&quot;})\r\n    public class Filter implements javax.servlet.Filter {\r\n\r\n\t    @Override\r\n    \tpublic void destroy() {\r\n\t    \t// TODO Auto-generated method stub\r\n\t\t\r\n    \t}\r\n\r\n    \t@Override\r\n    \tpublic void doFilter(ServletRequest request, ServletResponse response,\r\n\t    \t\tFilterChain chain) throws IOException, ServletException {\r\n    \t\trequest.setCharacterEncoding(&quot;UTF-8&quot;);\r\n\t        chain.doFilter(request, response); \t\t\r\n    \t}\r\n\r\n    \t@Override\r\n    \tpublic void init(FilterConfig filterConfig) throws ServletException {\r\n\t    \t// TODO Auto-generated method stub \t\t\r\n     \t}\r\n \t\r\n    }\r\n\r\nIn the View (.xhtml) i need to set the enctype paremeter&#39;s form to UTF-8 like @Kevin Rahe:\r\n\r\n\r\n\t\t&lt;h:form id=&quot;frmt&quot; enctype=&quot;multipart/form-data;charset=UTF-8&quot; &gt;\r\n             &lt;!-- your code here --&gt;\r\n        &lt;/h:form&gt;  \r\n\r\n","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I am using Primefaces with glassfish and SQL Server. </p>\n\n<p>in my case i created the Webfilter, in back-end, to get every request and convert to UTF-8, like this:</p>\n\n<pre><code>package br.com.teste.filter;\n\nimport java.io.IOException;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.annotation.WebFilter;\n\n@WebFilter(servletNames={\"Faces Servlet\"})\npublic class Filter implements javax.servlet.Filter {\n\n    @Override\n    public void destroy() {\n        // TODO Auto-generated method stub\n\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response,\n            FilterChain chain) throws IOException, ServletException {\n        request.setCharacterEncoding(\"UTF-8\");\n        chain.doFilter(request, response);      \n    }\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n        // TODO Auto-generated method stub      \n    }\n\n}\n</code></pre>\n\n<p>In the View (.xhtml) i need to set the enctype paremeter's form to UTF-8 like @Kevin Rahe:</p>\n\n<pre><code>    &lt;h:form id=\"frmt\" enctype=\"multipart/form-data;charset=UTF-8\" &gt;\n         &lt;!-- your code here --&gt;\n    &lt;/h:form&gt;  \n</code></pre>\n"},{"comments":[{"owner":{"account_id":1425373,"reputation":261,"user_id":1349048,"accept_rate":25,"display_name":"easoncxz"},"score":3,"creation_date":1458177909,"post_id":31968795,"comment_id":59748375,"body_markdown":"At [another question in the Spring context](http://stackoverflow.com/questions/9055025/how-to-change-the-character-encoding-for-servlet-3-0-spring-mvc-multipart-upload), they mentioned that the `MultipartResolver` has a default decoding charset of ISO-8859-1. See official Spring docs here: [CommonsFileUploadSupport#setDefaultEncoding](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/multipart/commons/CommonsFileUploadSupport.html#setDefaultEncoding-java.lang.String-).","body":"At <a href=\"http://stackoverflow.com/questions/9055025/how-to-change-the-character-encoding-for-servlet-3-0-spring-mvc-multipart-upload\">another question in the Spring context</a>, they mentioned that the <code>MultipartResolver</code> has a default decoding charset of ISO-8859-1. See official Spring docs here: <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/multipart/commons/CommonsFileUploadSupport.html#setDefaultEncoding-java.lang.String-\" rel=\"nofollow noreferrer\">CommonsFileUploadSupport#setDefaultEncoding</a>."},{"owner":{"account_id":3963459,"reputation":611,"user_id":3270039,"display_name":"zoirs"},"score":0,"creation_date":1579595689,"post_id":31968795,"comment_id":105808784,"body_markdown":"xml format:\n&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;\n&lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\n&lt;/bean&gt;","body":"xml format: &lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMult&zwnj;&#8203;ipartResolver&quot;&gt; &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt; &lt;/bean&gt;"}],"tags":[],"owner":{"account_id":6715167,"reputation":48,"user_id":5177207,"display_name":"Rognvald Eaversen"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1439391397,"creation_date":1439391397,"answer_id":31968795,"question_id":546365,"body_markdown":"In case someone stumbled upon this problem when working on Grails (or pure Spring) web application, here is the post that helped me:\r\n\r\n[http://forum.spring.io/forum/spring-projects/web/2491-solved-character-encoding-and-multipart-forms][1]\r\n\r\nTo set default encoding to UTF-8 (instead of the ISO-8859-1) for multipart requests, I added the following code in resources.groovy (Spring DSL):\r\n\r\n    multipartResolver(ContentLengthAwareCommonsMultipartResolver) {\r\n    \tdefaultEncoding = &#39;UTF-8&#39;\r\n    }\r\n\r\n\r\n  [1]: http://forum.spring.io/forum/spring-projects/web/2491-solved-character-encoding-and-multipart-forms","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>In case someone stumbled upon this problem when working on Grails (or pure Spring) web application, here is the post that helped me:</p>\n\n<p><a href=\"http://forum.spring.io/forum/spring-projects/web/2491-solved-character-encoding-and-multipart-forms\" rel=\"noreferrer\">http://forum.spring.io/forum/spring-projects/web/2491-solved-character-encoding-and-multipart-forms</a></p>\n\n<p>To set default encoding to UTF-8 (instead of the ISO-8859-1) for multipart requests, I added the following code in resources.groovy (Spring DSL):</p>\n\n<pre><code>multipartResolver(ContentLengthAwareCommonsMultipartResolver) {\n    defaultEncoding = 'UTF-8'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9082145,"reputation":41,"user_id":6761619,"display_name":"Gy&#246;rgy Nov&#225;k"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1472219381,"creation_date":1472217816,"answer_id":39167423,"question_id":546365,"body_markdown":"I&#39;m using `org.apache.commons.fileupload.servlet.ServletFileUpload.ServletFileUpload(FileItemFactory)`\r\nand defining the encoding when reading out parameter value:\r\n\r\n    List&lt;FileItem&gt; items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);\r\n\r\n    for (FileItem item : items) {\r\n        String fieldName = item.getFieldName();\r\n\r\n        if (item.isFormField()) {\r\n            String fieldValue = item.getString(&quot;UTF-8&quot;); // &lt;-- HERE\r\n","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I'm using <code>org.apache.commons.fileupload.servlet.ServletFileUpload.ServletFileUpload(FileItemFactory)</code>\nand defining the encoding when reading out parameter value:</p>\n\n<pre><code>List&lt;FileItem&gt; items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);\n\nfor (FileItem item : items) {\n    String fieldName = item.getFieldName();\n\n    if (item.isFormField()) {\n        String fieldValue = item.getString(\"UTF-8\"); // &lt;-- HERE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12850442,"reputation":1,"user_id":9295506,"display_name":"aManjate"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517414815,"creation_date":1517414815,"answer_id":48546521,"question_id":546365,"body_markdown":"I had the same problem. The only solution that worked for me was adding  &amp;lt;property = &quot;defaultEncoding&quot; value = &quot;UTF-8&quot;&amp;gt; to multipartResoler in spring configurations file.","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I had the same problem. The only solution that worked for me was adding  &lt;property = \"defaultEncoding\" value = \"UTF-8\"&gt; to multipartResoler in spring configurations file.</p>\n"},{"tags":[],"owner":{"account_id":3724904,"reputation":1828,"user_id":3099037,"display_name":"Romain VDK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533807467,"creation_date":1533807467,"answer_id":51763633,"question_id":546365,"body_markdown":"You also have to make sure that your encoding filter (org.springframework.web.filter.CharacterEncodingFilter) in your web.xml is mapped before the multipart filter (org.springframework.web.multipart.support.MultipartFilter). ","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>You also have to make sure that your encoding filter (org.springframework.web.filter.CharacterEncodingFilter) in your web.xml is mapped before the multipart filter (org.springframework.web.multipart.support.MultipartFilter). </p>\n"},{"tags":[],"owner":{"account_id":3238738,"reputation":111,"user_id":2732272,"display_name":"Patrick P"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553766426,"creation_date":1553766426,"answer_id":55394513,"question_id":546365,"body_markdown":"I think i&#39;am late for the party but when you use a wildfly, you can add an default-encoding to the standalone.xml.\r\nJust search in the standalone.xml for  \r\n\r\n    &lt;servlet-container name=&quot;default&quot;&gt; \r\n\r\nand add encoding like this:\r\n\r\n    &lt;servlet-container name=&quot;default&quot; default-encoding=&quot;UTF-8&quot;&gt;","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I think i'am late for the party but when you use a wildfly, you can add an default-encoding to the standalone.xml.\nJust search in the standalone.xml for  </p>\n\n<pre><code>&lt;servlet-container name=\"default\"&gt; \n</code></pre>\n\n<p>and add encoding like this:</p>\n\n<pre><code>&lt;servlet-container name=\"default\" default-encoding=\"UTF-8\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1324115,"reputation":844,"user_id":1269333,"accept_rate":50,"display_name":"Vlad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560385673,"creation_date":1560385673,"answer_id":56571912,"question_id":546365,"body_markdown":"To avoid converting all request parameters manually to UTF-8, you can define a method annotated with `@InitBinder` in your controller:\r\n\r\n    @InitBinder\r\n    protected void initBinder(WebDataBinder binder) {\r\n        binder.registerCustomEditor(String.class, new CharacterEditor(true) {\r\n            @Override\r\n            public void setAsText(String text) throws IllegalArgumentException {\r\n                String properText = new String(text.getBytes(StandardCharsets.ISO_8859_1), StandardCharsets.UTF_8);\r\n                setValue(properText);\r\n            }\r\n        });\r\n    }\r\n\r\nThe above will automatically convert all request parameters to UTF-8 in the controller where it is defined.","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>To avoid converting all request parameters manually to UTF-8, you can define a method annotated with <code>@InitBinder</code> in your controller:</p>\n\n<pre><code>@InitBinder\nprotected void initBinder(WebDataBinder binder) {\n    binder.registerCustomEditor(String.class, new CharacterEditor(true) {\n        @Override\n        public void setAsText(String text) throws IllegalArgumentException {\n            String properText = new String(text.getBytes(StandardCharsets.ISO_8859_1), StandardCharsets.UTF_8);\n            setValue(properText);\n        }\n    });\n}\n</code></pre>\n\n<p>The above will automatically convert all request parameters to UTF-8 in the controller where it is defined.</p>\n"}],"owner":{"display_name":"Aswin Anand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150785,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"accepted_answer_id":549634,"answer_count":14,"score":60,"last_activity_date":1701345832,"creation_date":1234539074,"question_id":546365,"body_markdown":"I&#39;m uploading a file to the server. The file upload HTML form has 2 fields:\r\n&lt;ol&gt;&lt;li&gt;File name - A HTML text box where the user can give a name in any language.&lt;/li&gt;\r\n&lt;li&gt; File upload  - A HTMl &#39;file&#39; where user can specify a file from disk to upload.&lt;/li&gt;&lt;/ol&gt;\r\n\r\nWhen the form is submitted, the file contents are received properly. However, when the file name (point 1 above) is read, it is garbled. ASCII characters are displayed properly. When the name is given in some other language (German, French etc.), there are problems.\r\n\r\nIn the servlet method, the request&#39;s character encoding is set to UTF-8. I even tried doing a filter as mentioned - &lt;a href=&quot;https://stackoverflow.com/questions/29751/problems-while-submitting-a-utf-8-form-textarea-with-jquery-ajax&quot; title=&quot;Forum Post&quot;&gt;https://stackoverflow.com/questions/29751/problems-while-submitting-a-utf-8-form-textarea-with-jquery-ajax&lt;/a&gt; - but it doesn&#39;t seem to work. Only the filename seems to be garbled.\r\n\r\nThe MySQL table where the file name goes supports UTF-8. I gave random non-English characters &amp; they are stored/displayed properly.\r\n\r\nUsing Fiddler, I monitored the request &amp; all the POST data is passed correctly. I&#39;m trying to identify how/where the data could get garbled. Any help will be greatly appreciated.\r\n","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I'm uploading a file to the server. The file upload HTML form has 2 fields:</p>\n\n<ol><li>File name - A HTML text box where the user can give a name in any language.</li>\n<li> File upload  - A HTMl 'file' where user can specify a file from disk to upload.</li></ol>\n\n<p>When the form is submitted, the file contents are received properly. However, when the file name (point 1 above) is read, it is garbled. ASCII characters are displayed properly. When the name is given in some other language (German, French etc.), there are problems.</p>\n\n<p>In the servlet method, the request's character encoding is set to UTF-8. I even tried doing a filter as mentioned - <a href=\"https://stackoverflow.com/questions/29751/problems-while-submitting-a-utf-8-form-textarea-with-jquery-ajax\" title=\"Forum Post\"><a href=\"https://stackoverflow.com/questions/29751/problems-while-submitting-a-utf-8-form-textarea-with-jquery-ajax\">How can I make this code to submit a UTF-8 form textarea with jQuery/Ajax work?</a></a> - but it doesn't seem to work. Only the filename seems to be garbled.</p>\n\n<p>The MySQL table where the file name goes supports UTF-8. I gave random non-English characters &amp; they are stored/displayed properly.</p>\n\n<p>Using Fiddler, I monitored the request &amp; all the POST data is passed correctly. I'm trying to identify how/where the data could get garbled. Any help will be greatly appreciated.</p>\n"},{"tags":["java","exception","types","try-catch"],"comments":[{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":2,"creation_date":1372714764,"post_id":17414148,"comment_id":25289564,"body_markdown":"What is the question?","body":"What is the question?"},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":6,"creation_date":1372714972,"post_id":17414148,"comment_id":25289630,"body_markdown":"Don&#39;t show this to your boss or you could get fired.","body":"Don&#39;t show this to your boss or you could get fired."},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":2,"creation_date":1372715319,"post_id":17414148,"comment_id":25289761,"body_markdown":"Relying on the text in the exceptions is a really bad idea. Just as an FYI.","body":"Relying on the text in the exceptions is a really bad idea. Just as an FYI."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372715464,"post_id":17414148,"comment_id":25289819,"body_markdown":"That&#39;s why I made sure there is no company info. And the question is how do you try and check for multiple errors in the same try statement. It only lets me do one at a time, and I don&#39;t want to try and connect to the DB multiple times to check for errors. Slows the program down.","body":"That&#39;s why I made sure there is no company info. And the question is how do you try and check for multiple errors in the same try statement. It only lets me do one at a time, and I don&#39;t want to try and connect to the DB multiple times to check for errors. Slows the program down."},{"owner":{"account_id":1339372,"reputation":18345,"user_id":1281385,"accept_rate":72,"display_name":"exussum"},"score":0,"creation_date":1372715684,"post_id":17414148,"comment_id":25289896,"body_markdown":"He was referring to the code rather than the question","body":"He was referring to the code rather than the question"},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372716006,"post_id":17414148,"comment_id":25290021,"body_markdown":"Ok let me try and explain better...I only want to try and connect to the DB ONCE, and then in one try statement, check for the 2 exceptions above and then check for ALL FOUR of the possible errors I might get. Currently it only goes through the catch statement once, and when it finds any one of the errors, it breaks from the catch statement, failing to check for the rest of the errors.","body":"Ok let me try and explain better...I only want to try and connect to the DB ONCE, and then in one try statement, check for the 2 exceptions above and then check for ALL FOUR of the possible errors I might get. Currently it only goes through the catch statement once, and when it finds any one of the errors, it breaks from the catch statement, failing to check for the rest of the errors."},{"owner":{"account_id":2808454,"reputation":14373,"user_id":2415194,"accept_rate":87,"display_name":"nachokk"},"score":0,"creation_date":1372716546,"post_id":17414148,"comment_id":25290181,"body_markdown":"mm you have a lot of poor design issues, but when you make this multi catch , only one exception per time will be throw, so if you e.getMessage startsWith(something) is true then the others won&#39;t be true cause they are different..","body":"mm you have a lot of poor design issues, but when you make this multi catch , only one exception per time will be throw, so if you e.getMessage startsWith(something) is true then the others won&#39;t be true cause they are different.."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372716692,"post_id":17414148,"comment_id":25290232,"body_markdown":"My bad design issues aside, could you please give a suggestion of how to get around this problem?","body":"My bad design issues aside, could you please give a suggestion of how to get around this problem?"},{"owner":{"account_id":1842786,"reputation":11494,"user_id":1671856,"display_name":"DannyMo"},"score":0,"creation_date":1372716902,"post_id":17414148,"comment_id":25290306,"body_markdown":"You&#39;re not going to be able to validate everything in one go. If the server&#39;s path is wrong, then you don&#39;t know what server you&#39;re trying to connect to, so it is impossible to determine whether or not a user or database name is valid until the path is corrected.","body":"You&#39;re not going to be able to validate everything in one go. If the server&#39;s path is wrong, then you don&#39;t know what server you&#39;re trying to connect to, so it is impossible to determine whether or not a user or database name is valid until the path is corrected."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372717181,"post_id":17414148,"comment_id":25290380,"body_markdown":"damo, thanks! That totally answers my question. I feel like I went full retard for not seeing this before...Oh well, I guess I will have to modify the program requirements since this is impossible to do.","body":"damo, thanks! That totally answers my question. I feel like I went full retard for not seeing this before...Oh well, I guess I will have to modify the program requirements since this is impossible to do."},{"owner":{"account_id":1842786,"reputation":11494,"user_id":1671856,"display_name":"DannyMo"},"score":1,"creation_date":1372717300,"post_id":17414148,"comment_id":25290417,"body_markdown":"It&#39;s not uncommon to present errors one at a time: user tries to connect --&gt; invalid URL --&gt; user fixes URL and tries to connect again --&gt; insufficient privileges --&gt; user changes login --&gt; database not found --&gt; etc. Especially when determining an error _depends_ on resolving previous errors first.","body":"It&#39;s not uncommon to present errors one at a time: user tries to connect --&gt; invalid URL --&gt; user fixes URL and tries to connect again --&gt; insufficient privileges --&gt; user changes login --&gt; database not found --&gt; etc. Especially when determining an error <i>depends</i> on resolving previous errors first."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372717565,"post_id":17414148,"comment_id":25290483,"body_markdown":"Yea that&#39;s the way it is currently, so I plan on just keeping it this way. Once again, I spend lots of time (unknowingly) trying to break laws of programming &quot;physics&quot;","body":"Yea that&#39;s the way it is currently, so I plan on just keeping it this way. Once again, I spend lots of time (unknowingly) trying to break laws of programming &quot;physics&quot;"},{"owner":{"account_id":36042,"reputation":966,"user_id":102510,"accept_rate":75,"display_name":"Tim"},"score":0,"creation_date":1372719248,"post_id":17414148,"comment_id":25291007,"body_markdown":"You could go: if (e instanceof ClassNotFoundException) { ... } inside your catch block, but if doing it that way you might as well use a catch block for each exception type. Be aware that the text describing an exception could be specific to the library/version you are using, having conditions based on the exception text might tie you to a specific library version.","body":"You could go: if (e instanceof ClassNotFoundException) { ... } inside your catch block, but if doing it that way you might as well use a catch block for each exception type. Be aware that the text describing an exception could be specific to the library/version you are using, having conditions based on the exception text might tie you to a specific library version."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372725341,"post_id":17414148,"comment_id":25292363,"body_markdown":"Is there a better way to go about that instead of using a text description?","body":"Is there a better way to go about that instead of using a text description?"},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372786375,"post_id":17414148,"comment_id":25320390,"body_markdown":"Thanks for the help everyone! I posted the fix above in my initial question.","body":"Thanks for the help everyone! I posted the fix above in my initial question."},{"owner":{"account_id":970,"reputation":399857,"user_id":1288,"accept_rate":93,"display_name":"Bill the Lizard"},"score":0,"creation_date":1373459100,"post_id":17414148,"comment_id":25563399,"body_markdown":"Please post the solution as an answer below.","body":"Please post the solution as an answer below."}],"answers":[{"comments":[{"owner":{"account_id":1842786,"reputation":11494,"user_id":1671856,"display_name":"DannyMo"},"score":0,"creation_date":1372715843,"post_id":17414322,"comment_id":25289957,"body_markdown":"he&#39;s already using the [pipe syntax](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html) to catch both `ClassNotFoundException` and `SQLException`...","body":"he&#39;s already using the <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html\" rel=\"nofollow noreferrer\">pipe syntax</a> to catch both <code>ClassNotFoundException</code> and <code>SQLException</code>..."},{"owner":{"account_id":1339372,"reputation":18345,"user_id":1281385,"accept_rate":72,"display_name":"exussum"},"score":0,"creation_date":1372715949,"post_id":17414322,"comment_id":25290001,"body_markdown":"Ah wasnt aware that was added in Java 7 - Thanks !","body":"Ah wasnt aware that was added in Java 7 - Thanks !"}],"tags":[],"owner":{"account_id":1339372,"reputation":18345,"user_id":1281385,"accept_rate":72,"display_name":"exussum"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372715596,"creation_date":1372715596,"answer_id":17414322,"question_id":17414148,"body_markdown":"You can do it in multiple ways\r\n\r\n1 having more than one catch with a common function \r\n\r\n    }catch (ClassNotFoundException e){\r\n        handleError(e);\r\n    \r\n    }catch (SQLException e){\r\n        handleError(e);\r\n    }\r\n\r\nwhere handleError takes the exception as the argument.\r\n\r\nYou dont seem to do anything else so you can just combine them both into a single exception\r\n\r\n\r\n    }catch(Exception e){\r\n    \r\n    }\r\n\r\nwhich will catch everything but you have MUCH less control over the error handling.\r\n\r\n\r\n","title":"Multiple catch statements with the same exception types","body":"<p>You can do it in multiple ways</p>\n\n<p>1 having more than one catch with a common function </p>\n\n<pre><code>}catch (ClassNotFoundException e){\n    handleError(e);\n\n}catch (SQLException e){\n    handleError(e);\n}\n</code></pre>\n\n<p>where handleError takes the exception as the argument.</p>\n\n<p>You dont seem to do anything else so you can just combine them both into a single exception</p>\n\n<pre><code>}catch(Exception e){\n\n}\n</code></pre>\n\n<p>which will catch everything but you have MUCH less control over the error handling.</p>\n"},{"tags":[],"owner":{"account_id":2653286,"reputation":3131,"user_id":2294472,"accept_rate":86,"display_name":"Delta_Fore"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372716456,"creation_date":1372716456,"answer_id":17414465,"question_id":17414148,"body_markdown":"A general principle of exceptions is that they are handled at the point they are best abled to  be handled.\r\n\r\nYou seem to have very disparate exceptions and presumably a TCP exception thrown somewhere in the code is not the same as the SQLException thrown when connecting to a database (I might be wrong here since I don&#39;t know what the rest of the code looks like). So would not a set of exception handlers, one for each type make more sense. Also to reite from Bryan Roach, text disambiguation is not a good idea.\r\n\r\n    try {\r\n    ...\r\n    } catch (java.net.SocketException e) {\r\n     e[0] = &quot;tcp error&quot;;\r\n    } catch (java.sql.SQLException e) {\r\n     e[1] = &quot;sql exception happened&quot;;\r\n    }\r\n\r\nAlso your string array seems a bit risk, possibly a\r\n\r\n    ArrayList errors = new ArrayList();\r\n    errors.add(&quot;Some tcp error&quot;);\r\n    errors.add(&quot;Some db error&quot;);\r\n\r\nand then for you error reporting\r\n\r\n    mGUI.reportErrors(errors.toArray())\r\n\r\nwould preserve your interface and not waste you having to allocate extra elements to the array and have empty entries. I don&#39;t know exactly what your question is, but you allude to the GUI not displaying multiple errors. Possibly there is a check which stops at the first empty element in an array. Say e[2] and e[4] is populated, it might stop when it iterates over the errors as e[3] is empty. I&#39;m presuming again since I don&#39;t know what that code looks like\r\n","title":"Multiple catch statements with the same exception types","body":"<p>A general principle of exceptions is that they are handled at the point they are best abled to  be handled.</p>\n\n<p>You seem to have very disparate exceptions and presumably a TCP exception thrown somewhere in the code is not the same as the SQLException thrown when connecting to a database (I might be wrong here since I don't know what the rest of the code looks like). So would not a set of exception handlers, one for each type make more sense. Also to reite from Bryan Roach, text disambiguation is not a good idea.</p>\n\n<pre><code>try {\n...\n} catch (java.net.SocketException e) {\n e[0] = \"tcp error\";\n} catch (java.sql.SQLException e) {\n e[1] = \"sql exception happened\";\n}\n</code></pre>\n\n<p>Also your string array seems a bit risk, possibly a</p>\n\n<pre><code>ArrayList errors = new ArrayList();\nerrors.add(\"Some tcp error\");\nerrors.add(\"Some db error\");\n</code></pre>\n\n<p>and then for you error reporting</p>\n\n<pre><code>mGUI.reportErrors(errors.toArray())\n</code></pre>\n\n<p>would preserve your interface and not waste you having to allocate extra elements to the array and have empty entries. I don't know exactly what your question is, but you allude to the GUI not displaying multiple errors. Possibly there is a check which stops at the first empty element in an array. Say e[2] and e[4] is populated, it might stop when it iterates over the errors as e[3] is empty. I'm presuming again since I don't know what that code looks like</p>\n"},{"comments":[{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372742711,"post_id":17417666,"comment_id":25296181,"body_markdown":"No offense taken. Thanks for the tip, I will change it.","body":"No offense taken. Thanks for the tip, I will change it."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372786323,"post_id":17417666,"comment_id":25320365,"body_markdown":"Thanks for the tip Tim! I found a work around and posted the results in my initial post.","body":"Thanks for the tip Tim! I found a work around and posted the results in my initial post."}],"tags":[],"owner":{"account_id":36042,"reputation":966,"user_id":102510,"accept_rate":75,"display_name":"Tim"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372740880,"creation_date":1372740880,"answer_id":17417666,"question_id":17414148,"body_markdown":"From the comments above it sounds like what you want to do is have different logic for the various Exception types you are catching within a single catch block. If this is the case, you could go:\r\n    \r\n    ...\r\n    catch(ClassNotFoundException | SQLException e) {\r\n        String[] errors = new String[4];\r\n        if (e instanceof ClassNotFoundException) {\r\n           //do something here\r\n        }\r\n        if (e instanceof SQLException) {\r\n           //do something else here\r\n        }\r\n        ...etc\r\n    }\r\n\r\nThis should work, but it&#39;s probably just as easy to use multiple catch blocks as others have suggested:\r\n\r\n    }catch (ClassNotFoundException e){\r\n        handleError(e);\r\n    }catch (SQLException e){\r\n        handleError(e);\r\n    }\r\n\r\n\r\nI don&#39;t mean any offense, but the way the code handles exceptions might cause some headaches down the road. For example:\r\n\r\n    if (e.getMessage().startsWith(&quot;Cannot open database&quot;)) {\r\nHere the code relies on the supporting library that throws the exception to use the same text description, but this description might change if you switch to another JVM version,  use a different database driver, etc. It might be safer to go by the exception type, rather than the exception description.\r\n\r\n","title":"Multiple catch statements with the same exception types","body":"<p>From the comments above it sounds like what you want to do is have different logic for the various Exception types you are catching within a single catch block. If this is the case, you could go:</p>\n\n<pre><code>...\ncatch(ClassNotFoundException | SQLException e) {\n    String[] errors = new String[4];\n    if (e instanceof ClassNotFoundException) {\n       //do something here\n    }\n    if (e instanceof SQLException) {\n       //do something else here\n    }\n    ...etc\n}\n</code></pre>\n\n<p>This should work, but it's probably just as easy to use multiple catch blocks as others have suggested:</p>\n\n<pre><code>}catch (ClassNotFoundException e){\n    handleError(e);\n}catch (SQLException e){\n    handleError(e);\n}\n</code></pre>\n\n<p>I don't mean any offense, but the way the code handles exceptions might cause some headaches down the road. For example:</p>\n\n<pre><code>if (e.getMessage().startsWith(\"Cannot open database\")) {\n</code></pre>\n\n<p>Here the code relies on the supporting library that throws the exception to use the same text description, but this description might change if you switch to another JVM version,  use a different database driver, etc. It might be safer to go by the exception type, rather than the exception description.</p>\n"}],"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8172,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1701345750,"creation_date":1372714680,"question_id":17414148,"body_markdown":"I&#39;ve been looking all over for an answer to this and have yet to find one.\r\n\r\nBasically I am trying to connect to a database server through a GUI. My boss wants to be able to enter all fields and then check to see if they are valid entries, then if there are any invalid entries, he wants me to turn the text red, indicating that the field is invalid. I have the try statement catch ClassNotFoundException and SQLException. Because there are multiple fields that need to be checked, I have tried to have a set of if statements to check the connection info. Here is the code below, I hope this makes sense...\r\n\r\n        //The cancel boolean values in this code are used elsewhere to regulate the Threads\r\n\t\ttry \r\n\t\t{\r\n                       //attempt connection here\r\n\t\t} \r\n\t\tcatch(ClassNotFoundException | SQLException e)\r\n\t\t{\r\n\t\t\tString[] errors = new String[4]; //This will create a String array of the errors it catches\r\n\t\t\t\t\t\t\t\t\t\t\t //and will later get called into a method that displays\r\n\t\t\t\t\t\t\t\t\t\t\t //the messages in a JOptionPane.showMessageDialog()\r\n\t\t\tif (e.getMessage().startsWith(&quot;The TCP/IP connection to the host&quot;))\r\n\t\t\t{\r\n\t\t\t\terrors[0] = &quot;SQL CONNECTION FAILED: Please check the server URL you entered to make sure it is correct.&quot;;\r\n\t\t\t\tcancel = true;\r\n\t\t\t\tmGUI.serverNameTextField.setForeground(Color.RED);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (e.getMessage().startsWith(&quot;Login failed for user&quot;))\r\n\t\t\t{\r\n\t\t\t\terrors[1] = &quot;LOGIN FAILED: You do not have sufficient access to the server.&quot;;\r\n\t\t\t\tcancel = true;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif (e.getMessage().startsWith(&quot;Cannot open database&quot;))\r\n\t\t\t{\r\n\t\t\t\terrors[2] = &quot;SQL CONNECTION FAILED: Please check the database name you entered to make sure it is correct.&quot;;\r\n\t\t\t\tcancel = true;\r\n\t\t\t\tmGUI.dbNameTextField.setForeground(Color.RED);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmGUI.reportErrors(errors); //Method where it reports the String[] array of errors\r\n\t\t\t\t\t\t\t\t\t   //However, the &#39;errors&#39; parameter only returns one error\r\n\t\t\t\t\t\t\t\t\t   //message at a time, which is the problem.\r\n\r\nThanks for any help!\r\n\r\n***********EDIT***************\r\nI found a solution, so hopefully this will help someone. I changed my if statements to add an AND argument checking for the specific error code. You find find the error code by either setting a break point and looking at the debug perspective, or you can do what I did and set a print statement to see the error code. Here is the print statement:\r\n\r\n        System.out.println(((SQLException) e).getErrorCode());\r\n\r\nHere are my new for statements:\r\n\r\n        try \r\n\t\t{\r\n\t\t\t//attempt connection here\r\n\t\t} \r\n\t\tcatch(SQLException | ClassNotFoundException e)\r\n\t\t{\r\n\t\t\tif (e instanceof SQLServerException &amp;&amp; ((SQLServerException) e).getErrorCode() == 0)\r\n\t\t\t{\r\n\t\t\t\t//code here\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t//code here\r\n\t\t\t}\r\n\t\t\tSystem.out.println(((SQLException) e).getErrorCode()); //Here is the print statement to see the error code.\r\n\t\t\tif (e instanceof SQLServerException &amp;&amp; ((SQLServerException) e).getErrorCode() == 4060)\r\n\t\t\t{\r\n\t\t\t\t//code here\r\n\t\t\t}else{\r\n\t\t\t\t//code here\r\n\t\t\t}\r\n\t\t\tif(cancel != true)\r\n\t\t\t{\r\n\t\t\t\t//code here\r\n\t\t\t}\r\n\t\t}","title":"Multiple catch statements with the same exception types","body":"<p>I've been looking all over for an answer to this and have yet to find one.</p>\n\n<p>Basically I am trying to connect to a database server through a GUI. My boss wants to be able to enter all fields and then check to see if they are valid entries, then if there are any invalid entries, he wants me to turn the text red, indicating that the field is invalid. I have the try statement catch ClassNotFoundException and SQLException. Because there are multiple fields that need to be checked, I have tried to have a set of if statements to check the connection info. Here is the code below, I hope this makes sense...</p>\n\n<pre><code>    //The cancel boolean values in this code are used elsewhere to regulate the Threads\n    try \n    {\n                   //attempt connection here\n    } \n    catch(ClassNotFoundException | SQLException e)\n    {\n        String[] errors = new String[4]; //This will create a String array of the errors it catches\n                                         //and will later get called into a method that displays\n                                         //the messages in a JOptionPane.showMessageDialog()\n        if (e.getMessage().startsWith(\"The TCP/IP connection to the host\"))\n        {\n            errors[0] = \"SQL CONNECTION FAILED: Please check the server URL you entered to make sure it is correct.\";\n            cancel = true;\n            mGUI.serverNameTextField.setForeground(Color.RED);\n        }\n\n        if (e.getMessage().startsWith(\"Login failed for user\"))\n        {\n            errors[1] = \"LOGIN FAILED: You do not have sufficient access to the server.\";\n            cancel = true;\n\n        }\n        if (e.getMessage().startsWith(\"Cannot open database\"))\n        {\n            errors[2] = \"SQL CONNECTION FAILED: Please check the database name you entered to make sure it is correct.\";\n            cancel = true;\n            mGUI.dbNameTextField.setForeground(Color.RED);\n        }\n\n        mGUI.reportErrors(errors); //Method where it reports the String[] array of errors\n                                   //However, the 'errors' parameter only returns one error\n                                   //message at a time, which is the problem.\n</code></pre>\n\n<p>Thanks for any help!</p>\n\n<p><em><strong></em>****</strong><em>EDIT</em><strong><em>*</em>**<em>*</em>**</strong>\nI found a solution, so hopefully this will help someone. I changed my if statements to add an AND argument checking for the specific error code. You find find the error code by either setting a break point and looking at the debug perspective, or you can do what I did and set a print statement to see the error code. Here is the print statement:</p>\n\n<pre><code>    System.out.println(((SQLException) e).getErrorCode());\n</code></pre>\n\n<p>Here are my new for statements:</p>\n\n<pre><code>    try \n    {\n        //attempt connection here\n    } \n    catch(SQLException | ClassNotFoundException e)\n    {\n        if (e instanceof SQLServerException &amp;&amp; ((SQLServerException) e).getErrorCode() == 0)\n        {\n            //code here\n        }\n        else{\n            //code here\n        }\n        System.out.println(((SQLException) e).getErrorCode()); //Here is the print statement to see the error code.\n        if (e instanceof SQLServerException &amp;&amp; ((SQLServerException) e).getErrorCode() == 4060)\n        {\n            //code here\n        }else{\n            //code here\n        }\n        if(cancel != true)\n        {\n            //code here\n        }\n    }\n</code></pre>\n"},{"tags":["java","bash","javap"],"comments":[{"owner":{"account_id":1888690,"reputation":3005,"user_id":1707353,"accept_rate":91,"display_name":"Jeff Holt"},"score":0,"creation_date":1701346200,"post_id":77578059,"comment_id":136765562,"body_markdown":"A &quot;jar file containing ... jar files&quot;?","body":"A &quot;jar file containing ... jar files&quot;?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1701354271,"post_id":77578059,"comment_id":136767214,"body_markdown":"You can scan the class file or jar with [THIS](https://technojeeves.com/index.php/aliasjava1/105-determine-java-class-file-version) to avoid having to extract anything","body":"You can scan the class file or jar with <a href=\"https://technojeeves.com/index.php/aliasjava1/105-determine-java-class-file-version\" rel=\"nofollow noreferrer\">THIS</a> to avoid having to extract anything"}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1701345377,"creation_date":1701345063,"answer_id":77578210,"question_id":77578059,"body_markdown":"A JAR file is just a collection of files. It&#39;s not guaranteed that every `.class` file in the JAR was compiled with the same JDK version - although I believe that the chances of encountering such a JAR file are very slim. Nonetheless, the Java class [major] version number is **always** the seventh and eighth bytes in a `.class` file.\r\n\r\nAssuming that all `.class` files in the JAR have the same version, you can use the [jar][1] command to extract a `.class` file from the JAR and read the bytes that contain the Java version.\r\n\r\nRefer to https://en.wikipedia.org/wiki/Java_class_file for details of the Java `.class` file format.\r\n\r\nRefer to [SO question] [How to get only the first ten bytes of a binary file][2] for how to read the first bytes of the `.class` file.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/specs/man/jar.html\r\n  [2]: https://stackoverflow.com/questions/4411014/how-to-get-only-the-first-ten-bytes-of-a-binary-file","title":"Is there a way within a bash script to determine the minimum java version required by a jar file containing class files and jar files?","body":"<p>A JAR file is just a collection of files. It's not guaranteed that every <code>.class</code> file in the JAR was compiled with the same JDK version - although I believe that the chances of encountering such a JAR file are very slim. Nonetheless, the Java class [major] version number is <strong>always</strong> the seventh and eighth bytes in a <code>.class</code> file.</p>\n<p>Assuming that all <code>.class</code> files in the JAR have the same version, you can use the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/specs/man/jar.html\" rel=\"nofollow noreferrer\">jar</a> command to extract a <code>.class</code> file from the JAR and read the bytes that contain the Java version.</p>\n<p>Refer to <a href=\"https://en.wikipedia.org/wiki/Java_class_file\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Java_class_file</a> for details of the Java <code>.class</code> file format.</p>\n<p>Refer to [SO question] <a href=\"https://stackoverflow.com/questions/4411014/how-to-get-only-the-first-ten-bytes-of-a-binary-file\">How to get only the first ten bytes of a binary file</a> for how to read the first bytes of the <code>.class</code> file.</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1701418236,"post_id":77578245,"comment_id":136775539,"body_markdown":"Note that the headers are not mandatory so it is not guaranteed that the JAR&#39;s MANIFEST file will contain _Created-By_ or _Build-Jdk_. Refer to the [JAR] [specification](https://docs.oracle.com/en/java/javase/21/docs/specs/jar/jar.html).","body":"Note that the headers are not mandatory so it is not guaranteed that the JAR&#39;s MANIFEST file will contain <i>Created-By</i> or <i>Build-Jdk</i>. Refer to the [JAR] <a href=\"https://docs.oracle.com/en/java/javase/21/docs/specs/jar/jar.html\" rel=\"nofollow noreferrer\">specification</a>."}],"tags":[],"owner":{"account_id":17460431,"reputation":46,"user_id":12658226,"display_name":"Sanjay Nainwal"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1701345706,"creation_date":1701345449,"answer_id":77578245,"question_id":77578059,"body_markdown":"You can extract the JAR file and check the ***MANIFEST.MF*** file, which contains information about the JDK used to build the JAR. The &quot;Created-By&quot; or &quot;Build-Jdk&quot; header in the ***MANIFEST.MF*** file stores the JDK version used to create the JAR\r\n\r\nreplace JarName.jar with your jar\r\n\r\nhere is the bash script to find the jdk version:\r\n\r\n    #!/bin/bash\r\n    jdk_version=$(unzip -p JarName.jar META-INF/MANIFEST.MF | grep &quot;Created-By\\|Build-Jdk&quot;)\r\n    echo $jdk_version\r\n\r\n\r\n  \r\n","title":"Is there a way within a bash script to determine the minimum java version required by a jar file containing class files and jar files?","body":"<p>You can extract the JAR file and check the <em><strong>MANIFEST.MF</strong></em> file, which contains information about the JDK used to build the JAR. The &quot;Created-By&quot; or &quot;Build-Jdk&quot; header in the <em><strong>MANIFEST.MF</strong></em> file stores the JDK version used to create the JAR</p>\n<p>replace JarName.jar with your jar</p>\n<p>here is the bash script to find the jdk version:</p>\n<pre><code>#!/bin/bash\njdk_version=$(unzip -p JarName.jar META-INF/MANIFEST.MF | grep &quot;Created-By\\|Build-Jdk&quot;)\necho $jdk_version\n</code></pre>\n"}],"owner":{"account_id":8529,"reputation":35006,"user_id":15441,"accept_rate":92,"display_name":"hawkeye"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77578245,"answer_count":2,"score":0,"last_activity_date":1701345706,"creation_date":1701343641,"question_id":77578059,"body_markdown":"For a single class - we can work out the version of Java used to compile it:\r\n\r\n    javap -verbose className\r\n\r\nI have a scenario where I need to scale this up to a jar file containing many classes and jar files.  \r\n\r\nMy question is: **Is there a way within a bash script to determine the java version required by a jar file containing class files and jar files?**","title":"Is there a way within a bash script to determine the minimum java version required by a jar file containing class files and jar files?","body":"<p>For a single class - we can work out the version of Java used to compile it:</p>\n<pre><code>javap -verbose className\n</code></pre>\n<p>I have a scenario where I need to scale this up to a jar file containing many classes and jar files.</p>\n<p>My question is: <strong>Is there a way within a bash script to determine the java version required by a jar file containing class files and jar files?</strong></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11337137,"reputation":838,"user_id":8312604,"display_name":"Alexandr Arhipov"},"score":1,"creation_date":1701283505,"post_id":77573698,"comment_id":136757759,"body_markdown":"there is something like that - https://stackoverflow.com/a/1414896/8312604. But I suppose it isn&#39;t gonna be helpful in your case.","body":"there is something like that - <a href=\"https://stackoverflow.com/a/1414896/8312604\">stackoverflow.com/a/1414896/8312604</a>. But I suppose it isn&#39;t gonna be helpful in your case."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1701345173,"post_id":77573698,"comment_id":136765381,"body_markdown":"You cannot do this with enums. You&#39;ll need to use an alternative approach, e.g. with interfaces, maybe an SPI or similar to detect the available options at runtime, etc.","body":"You cannot do this with enums. You&#39;ll need to use an alternative approach, e.g. with interfaces, maybe an SPI or similar to detect the available options at runtime, etc."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1701346756,"post_id":77573698,"comment_id":136765675,"body_markdown":"Maybe you could rewrite your question to show how you are currently using an Enum and why you need an Enum. Then the question would be how to replace it with something extensible. One idea is to create an Interface, then have your own implementations that correspond to the  values provided. That way it is pretty clear what a user would have to do.","body":"Maybe you could rewrite your question to show how you are currently using an Enum and why you need an Enum. Then the question would be how to replace it with something extensible. One idea is to create an Interface, then have your own implementations that correspond to the  values provided. That way it is pretty clear what a user would have to do."}],"answers":[{"comments":[{"owner":{"account_id":19095561,"reputation":21,"user_id":21440424,"display_name":"CuteKitsuneForever"},"score":0,"creation_date":1701285021,"post_id":77573770,"comment_id":136758008,"body_markdown":"I mean using Interfaces. Read the Question.","body":"I mean using Interfaces. Read the Question."},{"owner":{"account_id":11337137,"reputation":838,"user_id":8312604,"display_name":"Alexandr Arhipov"},"score":0,"creation_date":1701287643,"post_id":77573770,"comment_id":136758420,"body_markdown":"@CuteKitsuneForever I did and attached a link to the approach with inerfaces as a comment to your question. But, as I said, probably it isn&#39;t gonna be helpful in your case.","body":"@CuteKitsuneForever I did and attached a link to the approach with inerfaces as a comment to your question. But, as I said, probably it isn&#39;t gonna be helpful in your case."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1701345238,"post_id":77573770,"comment_id":136765392,"body_markdown":"@CuteKitsuneForever Nowhere does your question mention interfaces, you only mention enums. And enums are *not* extensible.","body":"@CuteKitsuneForever Nowhere does your question mention interfaces, you only mention enums. And enums are <i>not</i> extensible."}],"tags":[],"owner":{"account_id":11337137,"reputation":838,"user_id":8312604,"display_name":"Alexandr Arhipov"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701345192,"creation_date":1701283383,"answer_id":77573770,"question_id":77573698,"body_markdown":" Inheritance is not allowed for enums.","title":"Is it possible to use Interfaces to extend Enum to give the Enum the Ability to extend the Options?","body":"<p>Inheritance is not allowed for enums.</p>\n"}],"owner":{"account_id":19095561,"reputation":21,"user_id":21440424,"display_name":"CuteKitsuneForever"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1701285064,"answer_count":1,"score":1,"last_activity_date":1701345192,"creation_date":1701282731,"question_id":77573698,"body_markdown":"I have an enum class with these options:\r\n\r\n- BOOLEAN\r\n- DATE\r\n- DOUBLE\r\n- FLOAT\r\n- INTEGER\r\n- LOCAL_DATE\r\n\r\nI want to allow other mod developers (I&#39;m making currently an API mod for Minecraft Forge) to add new options to that enum. How can I do that?","title":"Is it possible to use Interfaces to extend Enum to give the Enum the Ability to extend the Options?","body":"<p>I have an enum class with these options:</p>\n<ul>\n<li>BOOLEAN</li>\n<li>DATE</li>\n<li>DOUBLE</li>\n<li>FLOAT</li>\n<li>INTEGER</li>\n<li>LOCAL_DATE</li>\n</ul>\n<p>I want to allow other mod developers (I'm making currently an API mod for Minecraft Forge) to add new options to that enum. How can I do that?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","java-module"],"answers":[{"tags":[],"owner":{"account_id":1668855,"reputation":14404,"user_id":2700303,"accept_rate":63,"display_name":"MiguelSlv"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701344977,"creation_date":1701344977,"answer_id":77578205,"question_id":77578168,"body_markdown":"As I suspected when I start to write this post, the cause is that I shouldn&#39;t use jakarta in first place on a spring boot project.\r\n\r\nThe import instruction that triggered the IntelliJ to suggest the dependency was this:\r\n\r\n     import jakarta.transaction.Transactional;\r\n\r\nAs this project is a spring project, the right import should be:\r\n\r\n     import org.springframework.transaction.annotation.Transactional;\r\n\r\nI post this answer in case some else fall into this rare problem with no obvious solution.\r\n","title":"Error &quot;module not found: jakarta.cdi&quot; when using module-info.java in a Spring boot 3 project","body":"<p>As I suspected when I start to write this post, the cause is that I shouldn't use jakarta in first place on a spring boot project.</p>\n<p>The import instruction that triggered the IntelliJ to suggest the dependency was this:</p>\n<pre><code> import jakarta.transaction.Transactional;\n</code></pre>\n<p>As this project is a spring project, the right import should be:</p>\n<pre><code> import org.springframework.transaction.annotation.Transactional;\n</code></pre>\n<p>I post this answer in case some else fall into this rare problem with no obvious solution.</p>\n"}],"owner":{"account_id":1668855,"reputation":14404,"user_id":2700303,"accept_rate":63,"display_name":"MiguelSlv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701344977,"creation_date":1701344541,"question_id":77578168,"body_markdown":"I got the following error when I add the dependency `jakarta.transaction` to the `module-info.java` file, as suggested by IntelliJ:\r\n\r\n    module not found: jakarta.cdi\r\n\r\nThe module-info.java file dependency is added like this:\r\n\r\n    module myModule.main {\r\n    ...\r\n    requires jakarta.transaction;\r\n    }\r\n\r\n\r\nThe project builds and runs well without the `module-info.java` file, so I guess all dependencies are well defined at `gradle.build` file.\r\n\r\n\r\n","title":"Error &quot;module not found: jakarta.cdi&quot; when using module-info.java in a Spring boot 3 project","body":"<p>I got the following error when I add the dependency <code>jakarta.transaction</code> to the <code>module-info.java</code> file, as suggested by IntelliJ:</p>\n<pre><code>module not found: jakarta.cdi\n</code></pre>\n<p>The module-info.java file dependency is added like this:</p>\n<pre><code>module myModule.main {\n...\nrequires jakarta.transaction;\n}\n</code></pre>\n<p>The project builds and runs well without the <code>module-info.java</code> file, so I guess all dependencies are well defined at <code>gradle.build</code> file.</p>\n"},{"tags":["java","jdbc","kerberos"],"answers":[{"comments":[{"owner":{"account_id":6790916,"reputation":65,"user_id":5228103,"accept_rate":60,"display_name":"Thilin&#227; Nwa Mlsra"},"score":0,"creation_date":1454081242,"post_id":35087767,"comment_id":57897969,"body_markdown":"when i run firs time it is working without error since i change coding. after changing i have to restart net-beans in order to run the application.","body":"when i run firs time it is working without error since i change coding. after changing i have to restart net-beans in order to run the application."},{"owner":{"account_id":6790916,"reputation":65,"user_id":5228103,"accept_rate":60,"display_name":"Thilin&#227; Nwa Mlsra"},"score":0,"creation_date":1454166726,"post_id":35087767,"comment_id":57927583,"body_markdown":"com.microsoft.sqlserver.jdbc.SQLServerException: Integrated authentication failed.","body":"com.microsoft.sqlserver.jdbc.SQLServerException: Integrated authentication failed."}],"tags":[],"owner":{"account_id":7298512,"reputation":17,"user_id":5562296,"display_name":"Creatorsuperman"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454080263,"creation_date":1454080263,"answer_id":35087767,"question_id":35087349,"body_markdown":"Assuming from the amount of information you have provided, I think the error lies in not setting your connection&#39;s properties. Add `con.setServerName(value)` and `con.setDatabaseName(value)`  along with these [Other Properties][1] that may apply\n\n\n  [1]: https://msdn.microsoft.com/en-us/library/ms378988(v=sql.110).aspx","title":"How to configure Java Kerberos in sqljdbc4.jar","body":"<p>Assuming from the amount of information you have provided, I think the error lies in not setting your connection's properties. Add <code>con.setServerName(value)</code> and <code>con.setDatabaseName(value)</code>  along with these <a href=\"https://msdn.microsoft.com/en-us/library/ms378988(v=sql.110).aspx\" rel=\"nofollow\">Other Properties</a> that may apply</p>\n"},{"tags":[],"owner":{"account_id":9304933,"reputation":330,"user_id":6909026,"display_name":"jokarls"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603191290,"creation_date":1603191290,"answer_id":64443709,"question_id":35087349,"body_markdown":"Looks like you&#39;re using the wrong *authenticationScheme*. By specifying *JavaKerberos* you tell the client to use the Java implementation of Kerberos. If you want to use *sqljdbc_auth.dll* for authentication, you should be using *NativeAuthentication* as your authentication scheme.","title":"How to configure Java Kerberos in sqljdbc4.jar","body":"<p>Looks like you're using the wrong <em>authenticationScheme</em>. By specifying <em>JavaKerberos</em> you tell the client to use the Java implementation of Kerberos. If you want to use <em>sqljdbc_auth.dll</em> for authentication, you should be using <em>NativeAuthentication</em> as your authentication scheme.</p>\n"}],"owner":{"account_id":6790916,"reputation":65,"user_id":5228103,"accept_rate":60,"display_name":"Thilin&#227; Nwa Mlsra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":391,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1701344770,"creation_date":1454079092,"question_id":35087349,"body_markdown":"Could anyone explain to me how to configure Java Kerberos by using sqljdbc4.jar?\r\nBecause I&#39;m getting an error second time I run my application, the error displayed `com.microsoft.sqlserver.jdbc.SQLServerException: Integrated authentication failed`.\r\n\r\n**(NOTE- Error Displaying occurs only For servlet Projects. I&#39;m using apache tomcat)**\r\n\r\n\r\nThere is a tutorial [here][1] about Kerberos. But I don&#39;t understand how to include it in my cording.\r\n\r\n\r\n  [1]: https://blogs.msdn.microsoft.com/psssql/2015/01/09/jdbc-this-driver-is-not-configured-for-integrated-authentication/\r\n\r\n```java\r\npublic Connection Get_connection(PrintWriter out) {\r\n    try {\r\n        Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\r\n        String url = &quot;jdbc:sqlserver://localhost:1433; databaseName = Colombo_Health; integratedSecurity=true; authenticationScheme=JavaKerberos&quot;;\r\n        con = DriverManager.getConnection(url, &quot;&quot;, &quot;&quot;);\r\n        out.println(&quot;Connection Established&quot;);\r\n    } catch (ClassNotFoundException e) {\r\n\r\n        out.println(&quot;Class not Found       &quot; + e.toString());\r\n    } catch (Exception e) {\r\n        out.println(&quot;Driver not Found    &quot; + e.toString());\r\n    }\r\n\r\n    return con;\r\n}\r\n```\r\n\r\n\r\n1. I&#39;m on Windows 10 with SQL Server 2014.\r\n2. I have copied `sqljdbc_auth.dll` to system 32","title":"How to configure Java Kerberos in sqljdbc4.jar","body":"<p>Could anyone explain to me how to configure Java Kerberos by using sqljdbc4.jar?\nBecause I'm getting an error second time I run my application, the error displayed <code>com.microsoft.sqlserver.jdbc.SQLServerException: Integrated authentication failed</code>.</p>\n<p><strong>(NOTE- Error Displaying occurs only For servlet Projects. I'm using apache tomcat)</strong></p>\n<p>There is a tutorial <a href=\"https://blogs.msdn.microsoft.com/psssql/2015/01/09/jdbc-this-driver-is-not-configured-for-integrated-authentication/\" rel=\"nofollow noreferrer\">here</a> about Kerberos. But I don't understand how to include it in my cording.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Connection Get_connection(PrintWriter out) {\n    try {\n        Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\n        String url = &quot;jdbc:sqlserver://localhost:1433; databaseName = Colombo_Health; integratedSecurity=true; authenticationScheme=JavaKerberos&quot;;\n        con = DriverManager.getConnection(url, &quot;&quot;, &quot;&quot;);\n        out.println(&quot;Connection Established&quot;);\n    } catch (ClassNotFoundException e) {\n\n        out.println(&quot;Class not Found       &quot; + e.toString());\n    } catch (Exception e) {\n        out.println(&quot;Driver not Found    &quot; + e.toString());\n    }\n\n    return con;\n}\n</code></pre>\n<ol>\n<li>I'm on Windows 10 with SQL Server 2014.</li>\n<li>I have copied <code>sqljdbc_auth.dll</code> to system 32</li>\n</ol>\n"},{"tags":["java","security","encryption","cryptography"],"answers":[{"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1449409912,"post_id":34111505,"comment_id":55985174,"body_markdown":"But is it a synonym for 2 key or 3 key triple-DES? :)","body":"But is it a synonym for 2 key or 3 key triple-DES? :)"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1449705845,"post_id":34111505,"comment_id":56129120,"body_markdown":"@MaartenBodewes in spite of the smiley, you prompted me to check and doing so I realized I hadn&#39;t used the latest info, so thanks :-o","body":"@MaartenBodewes in spite of the smiley, you prompted me to check and doing so I realized I hadn&#39;t used the latest info, so thanks :-o"}],"tags":[],"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1701344697,"creation_date":1449353416,"answer_id":34111505,"question_id":34110062,"body_markdown":"You&#39;ve put the base64 encoding of the ciphertext in `encryptedPassword`. You need to *first* base64-decode that string and *then* decrypt the actual ciphertext. And since your plaintext was in UTF-8, you should interpret the decrypted plaintext as UTF-8.\r\n\r\n    return new String( pbeCipher.doFinal(Base64.getDecoder().decode(property)), &quot;UTF-8&quot;);\r\n\r\nAnd no **DES is not secure**, and in fact has been in brute-force range for at least a decade depending on attacker capabilities. It has been deprecated since about 1999, in favor first of &quot;triple-DES&quot; (formally TDEA) and then AES, and was officially withdrawn about 2005 as I recall. See the second paragraph of https://en.wikipedia.org/wiki/Data_Encryption_Standard . Anything written in 2012 that advised using DES was incompetent. \r\n\r\nMD5 is broken for collision, and thus for signature (or at least certificate signature). As far as I know this doesn&#39;t translate into an attack on PBKDF, even the older and deprecated PBKDF1 used for PBEwithMD5andDES, but it has led many to prohibit all uses of MD5. \r\n\r\n**(updated)** The builtin providers in all recent Oracle Java include Cipher `PBEwithSHA1andDESede` which is much better, and SecretKeyFactory `PBKDF2WithHmacSHA1` from which you can construct good PBES2 ciphers. (That former is actually PKCS#12 pbeWithSHAAnd3-keyTripleDES-CBC formally 1.2.840.113549.1.12.1.3 .) Java 8 (up) adds SKF `PBKBDF2withHmacSHA{224,256,384,512}` and prepackaged Cipher `PBEWithHmacSHA{1,224,256,384,512}AndAES_{128,256}`. Any of those is fine, although with SHA1 you might have to explain to uninformed people that SHA1 is now considered at risk for collision and prohibited for certificates but still fine for KDF and PBE, which you could avoid by just going to any of the SHA2, probably SHA256 as the most popular. Plus you should definitely use **more iterations than 20**; even in 1998 RFC2898 recommended at least 1000, and today at least 10s of thousands and usually a million or more is popular.\r\n\r\n(**further update 2023** since this Q was necroed by some loon) Sure enough in 2017 SHA1 was broken for collision by the CWI/Stevens group with support from Google -- search crypto.SX and security.SX, not to mention the web, for &#39;shattered&#39; and &#39;shambles&#39; -- so SHA1 joins MD5 in the state of being actually safe for PBE but prohibited for certificates and many other signatures, and at best dubious for other uses. Also state of the art now for PBKDF is &#39;memory-hard&#39; algos like scrypt and Argon, but Java has fallen behind here. \r\n","title":"Java Decryption - Input length must be multiple of 8 when decrypting with padded cipher","body":"<p>You've put the base64 encoding of the ciphertext in <code>encryptedPassword</code>. You need to <em>first</em> base64-decode that string and <em>then</em> decrypt the actual ciphertext. And since your plaintext was in UTF-8, you should interpret the decrypted plaintext as UTF-8.</p>\n<pre><code>return new String( pbeCipher.doFinal(Base64.getDecoder().decode(property)), &quot;UTF-8&quot;);\n</code></pre>\n<p>And no <strong>DES is not secure</strong>, and in fact has been in brute-force range for at least a decade depending on attacker capabilities. It has been deprecated since about 1999, in favor first of &quot;triple-DES&quot; (formally TDEA) and then AES, and was officially withdrawn about 2005 as I recall. See the second paragraph of <a href=\"https://en.wikipedia.org/wiki/Data_Encryption_Standard\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Data_Encryption_Standard</a> . Anything written in 2012 that advised using DES was incompetent.</p>\n<p>MD5 is broken for collision, and thus for signature (or at least certificate signature). As far as I know this doesn't translate into an attack on PBKDF, even the older and deprecated PBKDF1 used for PBEwithMD5andDES, but it has led many to prohibit all uses of MD5.</p>\n<p><strong>(updated)</strong> The builtin providers in all recent Oracle Java include Cipher <code>PBEwithSHA1andDESede</code> which is much better, and SecretKeyFactory <code>PBKDF2WithHmacSHA1</code> from which you can construct good PBES2 ciphers. (That former is actually PKCS#12 pbeWithSHAAnd3-keyTripleDES-CBC formally 1.2.840.113549.1.12.1.3 .) Java 8 (up) adds SKF <code>PBKBDF2withHmacSHA{224,256,384,512}</code> and prepackaged Cipher <code>PBEWithHmacSHA{1,224,256,384,512}AndAES_{128,256}</code>. Any of those is fine, although with SHA1 you might have to explain to uninformed people that SHA1 is now considered at risk for collision and prohibited for certificates but still fine for KDF and PBE, which you could avoid by just going to any of the SHA2, probably SHA256 as the most popular. Plus you should definitely use <strong>more iterations than 20</strong>; even in 1998 RFC2898 recommended at least 1000, and today at least 10s of thousands and usually a million or more is popular.</p>\n<p>(<strong>further update 2023</strong> since this Q was necroed by some loon) Sure enough in 2017 SHA1 was broken for collision by the CWI/Stevens group with support from Google -- search crypto.SX and security.SX, not to mention the web, for 'shattered' and 'shambles' -- so SHA1 joins MD5 in the state of being actually safe for PBE but prohibited for certificates and many other signatures, and at best dubious for other uses. Also state of the art now for PBKDF is 'memory-hard' algos like scrypt and Argon, but Java has fallen behind here.</p>\n"}],"owner":{"account_id":4204045,"reputation":895,"user_id":3443451,"accept_rate":45,"display_name":"Jimmy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10315,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701344697,"creation_date":1449344914,"question_id":34110062,"body_markdown":"I have a project for a security course but i&#39;m having an issue.\r\n\r\nbasically , i&#39;m trying to encrypt then decrypt a password but i&#39;m getting this error for the decryption . \r\n\r\n&quot;Input length must be multiple of 8 when decrypting with padded cipher&quot;\r\n\r\n\r\nAm i doing this the right way . I was following an article from 2012 . Is it still secure ?\r\n\r\nAlso i tried replacing the algorithm but nothing seems to work :\r\n\r\n&quot;AES&quot; , &quot;RSA/ECB/PKCS1Padding&quot; , &quot;PBEWithHmacSHA256AndDESede&quot;..and many more\r\n\r\ni get : \r\n\r\nException in thread &quot;main&quot; java.security.NoSuchAlgorithmException: RSA/ECB/PKCS1Padding SecretKeyFactory not \r\n\r\n\r\n----\r\n\r\n    import java.io.IOException;\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.security.GeneralSecurityException;\r\n    \r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.SecretKey;\r\n    import javax.crypto.SecretKeyFactory;\r\n    import javax.crypto.spec.PBEKeySpec;\r\n    import javax.crypto.spec.PBEParameterSpec;\r\n    \r\n    import java.util.Base64;\r\n    \r\n    public class ProtectedConfigFile {\r\n    \r\n        private static final char[] PASSWORD = &quot;ytfchchchgcv&quot;.toCharArray();\r\n        private static final byte[] SALT = {\r\n            (byte) 0xde, (byte) 0x33, (byte) 0x10, (byte) 0x12,\r\n            (byte) 0xde, (byte) 0x33, (byte) 0x10, (byte) 0x12,\r\n        };\r\n      \r\n      public static void main(String[] args) throws Exception {\r\n            String originalPassword = &quot;secret&quot;;\r\n            System.out.println(&quot;Original password: &quot; + originalPassword);\r\n            String encryptedPassword = encrypt(originalPassword);\r\n            System.out.println(&quot;Encrypted password: &quot; + encryptedPassword);\r\n            String decryptedPassword = decrypt(encryptedPassword);\r\n            System.out.println(&quot;Decrypted password: &quot; + decryptedPassword);\r\n        }\r\n    \r\n        private static String encrypt(String property) throws GeneralSecurityException, UnsupportedEncodingException {\r\n            SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;PBEWithMD5AndDES&quot;);\r\n            SecretKey key = keyFactory.generateSecret(new PBEKeySpec(PASSWORD));\r\n            Cipher pbeCipher = Cipher.getInstance(&quot;PBEWithMD5AndDES&quot;);\r\n            pbeCipher.init(Cipher.ENCRYPT_MODE, key, new PBEParameterSpec(SALT, 20));\r\n            return Base64.getEncoder().encodeToString(pbeCipher.doFinal(property.getBytes(&quot;UTF-8&quot;)));\r\n        }\r\n    \r\n        private static String decrypt(String property) throws GeneralSecurityException, IOException {\r\n            SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;PBEWithMD5AndDES&quot;);\r\n            SecretKey key = keyFactory.generateSecret(new PBEKeySpec(PASSWORD));\r\n            Cipher pbeCipher = Cipher.getInstance(&quot;PBEWithMD5AndDES&quot;);\r\n            pbeCipher.init(Cipher.DECRYPT_MODE, key, new PBEParameterSpec(SALT, 20));\r\n    \t\tbyte[] decode = Base64.getDecoder().decode(pbeCipher.doFinal(property.getBytes(&quot;UTF-8&quot;)));\r\n    \t\treturn decode.toString();\r\n        }\r\n      \r\n    }\r\n\r\nThis returns :\r\n\r\n    Original password: secret\r\n    Encrypted password: eG+qiRan1Cw=\r\n    Exception in thread &quot;main&quot; javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher\r\n    \tat com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:913)\r\n    \tat com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:824)\r\n    \tat com.sun.crypto.provider.PBES1Core.doFinal(PBES1Core.java:416)\r\n    \tat com.sun.crypto.provider.PBEWithMD5AndDESCipher.engineDoFinal(PBEWithMD5AndDESCipher.java:316)\r\n    \tat javax.crypto.Cipher.doFinal(Cipher.java:2165)\r\n    \tat ProtectedConfigFile.decrypt(ProtectedConfigFile.java:43)\r\n    \tat ProtectedConfigFile.main(ProtectedConfigFile.java:26)\r\n\r\n","title":"Java Decryption - Input length must be multiple of 8 when decrypting with padded cipher","body":"<p>I have a project for a security course but i'm having an issue.</p>\n\n<p>basically , i'm trying to encrypt then decrypt a password but i'm getting this error for the decryption . </p>\n\n<p>\"Input length must be multiple of 8 when decrypting with padded cipher\"</p>\n\n<p>Am i doing this the right way . I was following an article from 2012 . Is it still secure ?</p>\n\n<p>Also i tried replacing the algorithm but nothing seems to work :</p>\n\n<p>\"AES\" , \"RSA/ECB/PKCS1Padding\" , \"PBEWithHmacSHA256AndDESede\"..and many more</p>\n\n<p>i get : </p>\n\n<p>Exception in thread \"main\" java.security.NoSuchAlgorithmException: RSA/ECB/PKCS1Padding SecretKeyFactory not </p>\n\n<hr>\n\n<pre><code>import java.io.IOException;\nimport java.io.UnsupportedEncodingException;\nimport java.security.GeneralSecurityException;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.PBEKeySpec;\nimport javax.crypto.spec.PBEParameterSpec;\n\nimport java.util.Base64;\n\npublic class ProtectedConfigFile {\n\n    private static final char[] PASSWORD = \"ytfchchchgcv\".toCharArray();\n    private static final byte[] SALT = {\n        (byte) 0xde, (byte) 0x33, (byte) 0x10, (byte) 0x12,\n        (byte) 0xde, (byte) 0x33, (byte) 0x10, (byte) 0x12,\n    };\n\n  public static void main(String[] args) throws Exception {\n        String originalPassword = \"secret\";\n        System.out.println(\"Original password: \" + originalPassword);\n        String encryptedPassword = encrypt(originalPassword);\n        System.out.println(\"Encrypted password: \" + encryptedPassword);\n        String decryptedPassword = decrypt(encryptedPassword);\n        System.out.println(\"Decrypted password: \" + decryptedPassword);\n    }\n\n    private static String encrypt(String property) throws GeneralSecurityException, UnsupportedEncodingException {\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(\"PBEWithMD5AndDES\");\n        SecretKey key = keyFactory.generateSecret(new PBEKeySpec(PASSWORD));\n        Cipher pbeCipher = Cipher.getInstance(\"PBEWithMD5AndDES\");\n        pbeCipher.init(Cipher.ENCRYPT_MODE, key, new PBEParameterSpec(SALT, 20));\n        return Base64.getEncoder().encodeToString(pbeCipher.doFinal(property.getBytes(\"UTF-8\")));\n    }\n\n    private static String decrypt(String property) throws GeneralSecurityException, IOException {\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(\"PBEWithMD5AndDES\");\n        SecretKey key = keyFactory.generateSecret(new PBEKeySpec(PASSWORD));\n        Cipher pbeCipher = Cipher.getInstance(\"PBEWithMD5AndDES\");\n        pbeCipher.init(Cipher.DECRYPT_MODE, key, new PBEParameterSpec(SALT, 20));\n        byte[] decode = Base64.getDecoder().decode(pbeCipher.doFinal(property.getBytes(\"UTF-8\")));\n        return decode.toString();\n    }\n\n}\n</code></pre>\n\n<p>This returns :</p>\n\n<pre><code>Original password: secret\nEncrypted password: eG+qiRan1Cw=\nException in thread \"main\" javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher\n    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:913)\n    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:824)\n    at com.sun.crypto.provider.PBES1Core.doFinal(PBES1Core.java:416)\n    at com.sun.crypto.provider.PBEWithMD5AndDESCipher.engineDoFinal(PBEWithMD5AndDESCipher.java:316)\n    at javax.crypto.Cipher.doFinal(Cipher.java:2165)\n    at ProtectedConfigFile.decrypt(ProtectedConfigFile.java:43)\n    at ProtectedConfigFile.main(ProtectedConfigFile.java:26)\n</code></pre>\n"},{"tags":["java","regex","date","simpledateformat","java-6"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1351030670,"post_id":13040143,"comment_id":17704891,"body_markdown":"Have you checked the corresponding code in JDK 7?","body":"Have you checked the corresponding code in JDK 7?"},{"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"score":0,"creation_date":1351031569,"post_id":13040143,"comment_id":17705169,"body_markdown":"Not yet, because I am not using it, but probably this will not provide much help, since inside the SimpleDateFormat class the patterns are compiled into a grammar before processing, so there is no correspondence to any regex. Thanks and +1 anyway. :-)","body":"Not yet, because I am not using it, but probably this will not provide much help, since inside the SimpleDateFormat class the patterns are compiled into a grammar before processing, so there is no correspondence to any regex. Thanks and +1 anyway. :-)"},{"owner":{"account_id":163609,"reputation":2000,"user_id":385868,"display_name":"Zagrev"},"score":1,"creation_date":1354916631,"post_id":13040143,"comment_id":18933138,"body_markdown":"Have you considered javax.xml.datatype.DatatypeFactory? It supports 8601 format date strings. see http://download.java.net/jdk7/archive/b123/docs/api/javax/xml/datatype/DatatypeFactory.html#newXMLGregorianCalendar(java.lang.String)","body":"Have you considered javax.xml.datatype.DatatypeFactory? It supports 8601 format date strings. see <a href=\"http://download.java.net/jdk7/archive/b123/docs/api/javax/xml/datatype/DatatypeFactory.html#newXMLGregorianCalendar(java.lang.String)\" rel=\"nofollow noreferrer\">download.java.net/jdk7/archive/b123/docs/api/javax/xml/datat&zwnj;&#8203;ype/&hellip;</a>"},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1357428819,"post_id":13040143,"comment_id":19647343,"body_markdown":"Why don&#39;t you try Joda Time and have it return a `Date` object?","body":"Why don&#39;t you try Joda Time and have it return a <code>Date</code> object?"},{"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"score":0,"creation_date":1364335153,"post_id":13040143,"comment_id":22205002,"body_markdown":"JodaTime does not support all date format patterns that Java does. Otherwise, it would always have been a first choice.","body":"JodaTime does not support all date format patterns that Java does. Otherwise, it would always have been a first choice."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1490756088,"post_id":13040143,"comment_id":73249598,"body_markdown":"Much much easier to use the java.time classes that supplant the old legacy date-time classes (`Date`, `Calendar`, etc.) and also supplants Joda-Time. Much of the java.time functionality is back-ported to Java 6 &amp; 7 in [ThreeTen-Backport](http://www.threeten.org/threetenbp/) and further adapted to Android in [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP).","body":"Much much easier to use the java.time classes that supplant the old legacy date-time classes (<code>Date</code>, <code>Calendar</code>, etc.) and also supplants Joda-Time. Much of the java.time functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen-Backport</a> and further adapted to Android in <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>."}],"answers":[{"tags":[],"owner":{"account_id":1561124,"reputation":2087,"user_id":1450967,"display_name":"ggrandes"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1357425223,"creation_date":1357425223,"answer_id":14177122,"question_id":13040143,"body_markdown":"Seems that you can use this:\r\n\r\n\timport java.util.Calendar;\r\n\timport javax.xml.bind.DatatypeConverter;\r\n\t\r\n\tpublic class TestISO8601 {\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tparse(&quot;2012-10-01T19:30:00+02:00&quot;);\t// UTC+2\r\n\t\t\tparse(&quot;2012-10-01T19:30:00Z&quot;);\t\t// UTC\r\n\t\t\tparse(&quot;2012-10-01T19:30:00&quot;);\t\t// Local\r\n\t\t}\r\n\t\tpublic static Date parse(final String str) {\r\n\t\t\tCalendar c = DatatypeConverter.parseDateTime(str);\r\n\t\t\tSystem.out.println(str + &quot;\\t&quot; + (c.getTime().getTime()/1000));\r\n\t\t\treturn c.getTime();\r\n\t\t}\r\n\t}\r\n","title":"Generic support for ISO 8601 format in Java 6","body":"<p>Seems that you can use this:</p>\n\n<pre><code>import java.util.Calendar;\nimport javax.xml.bind.DatatypeConverter;\n\npublic class TestISO8601 {\n    public static void main(String[] args) {\n        parse(\"2012-10-01T19:30:00+02:00\"); // UTC+2\n        parse(\"2012-10-01T19:30:00Z\");      // UTC\n        parse(\"2012-10-01T19:30:00\");       // Local\n    }\n    public static Date parse(final String str) {\n        Calendar c = DatatypeConverter.parseDateTime(str);\n        System.out.println(str + \"\\t\" + (c.getTime().getTime()/1000));\n        return c.getTime();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2179728,"reputation":73067,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":1,"creation_date":1670611857,"post_id":52017783,"comment_id":131921600,"body_markdown":"&quot;As you can see from the code, +02 and +0200 require a formatter&quot;: +02 does not require a formatter.","body":"&quot;As you can see from the code, +02 and +0200 require a formatter&quot;: +02 does not require a formatter."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1670676586,"post_id":52017783,"comment_id":131930884,"body_markdown":"@ArvindKumarAvinash The docs seem self contradictory to me as to whether the minutes of the offset are optional. From `OffsetDateTime.parse(&quot;2012-10-01T19:30:00+02&quot;)` I got `org.threeten.bp.format.DateTimeParseException: Text &#39;2012-10-01T19:30:00+02&#39; could not be parsed at index 19`, so apparently with ThreeTen Backport, used in this answer because Java 6 was asked about, they are not (index 19 is where `+02` is). The same code works without exception with `java.time.OffsetDateTime.parse(CharSequence)` on Java 11, in case that is what you meant.","body":"@ArvindKumarAvinash The docs seem self contradictory to me as to whether the minutes of the offset are optional. From <code>OffsetDateTime.parse(&quot;2012-10-01T19:30:00+02&quot;)</code> I got <code>org.threeten.bp.format.DateTimeParseException: Text &#39;2012-10-01T19:30:00+02&#39; could not be parsed at index 19</code>, so apparently with ThreeTen Backport, used in this answer because Java 6 was asked about, they are not (index 19 is where <code>+02</code> is). The same code works without exception with <code>java.time.OffsetDateTime.parse(CharSequence)</code> on Java 11, in case that is what you meant."}],"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1535393739,"creation_date":1535203787,"answer_id":52017783,"question_id":13040143,"body_markdown":"You can use java.time, the modern Java date and time API, in Java 6. This would seem to me as the nice and also future-proof solution. It has good support for ISO 8601.\r\n\r\n    import org.threeten.bp.OffsetDateTime;\r\n    import org.threeten.bp.format.DateTimeFormatter;\r\n    \r\n    public class DemoIso8601Offsets {\r\n        public static void main(String[] args) {\r\n            System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+0200&quot;, \r\n            \t\tDateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ssXX&quot;)));\r\n            System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+02&quot;, \r\n            \t\tDateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ssX&quot;)));\r\n            System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+02:00&quot;));\r\n            System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00Z&quot;));\r\n        }\r\n    }\r\n\r\nOutput from this program is:\r\n\r\n&gt;     2012-10-01T19:30+02:00\r\n&gt;     2012-10-01T19:30+02:00\r\n&gt;     2012-10-01T19:30+02:00\r\n&gt;     2012-10-01T19:30Z\r\n\r\nIt requires that you add the ThreeTen Backport library to your project setup.\r\n\r\n - In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in.\r\n - In Java 6 and 7 get the ThreeTen Backport, the backport of the new classes (ThreeTen for JSR 310; see the links at the bottom).\r\n - On (older) Android use the Android edition of ThreeTen Backport. Its called ThreeTenABP. And make sure you import the date and time classes from `org.threeten.bp` with subpackages.\r\n\r\nAs you can see from the code, `+02` and `+0200` require a formatter where you specify the format of the offset, while `+02:00` (and `Z` too) conforms with the default format and doesnt need to be specified.\r\n\r\n## Can we parse all the offset formats using the same formatter?\r\n\r\nWhen reading mixed data, you dont want to handle each offset format specially. Its better to use optional parts in the format pattern string:\r\n\r\n\t\tDateTimeFormatter allInOne \r\n\t\t\t\t= DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ss[XXX][XX][X]&quot;);\r\n        System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+0200&quot;, allInOne));\r\n        System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+02&quot;, allInOne));\r\n        System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+02:00&quot;, allInOne));\r\n        System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00Z&quot;, allInOne));\r\n\r\nOutput is the same as above. The square brackets in `[XXX][XX][X]` mean that either format `+02:00`, `+0200` or `+02` may be present.\r\n\r\n## Links\r\n\r\n - [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use `java.time`.\r\n - [Java Specification Request (JSR) 310](https://jcp.org/en/jsr/detail?id=310), where `java.time` was first described.\r\n - [ThreeTen Backport project](http://www.threeten.org/threetenbp/), the backport of `java.time` to Java 6 and 7 (ThreeTen for JSR-310).\r\n - [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP), Android edition of ThreeTen Backport\r\n - [Question: How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project), with a very thorough explanation.\r\n","title":"Generic support for ISO 8601 format in Java 6","body":"<p>You can use java.time, the modern Java date and time API, in Java 6. This would seem to me as the nice and also future-proof solution. It has good support for ISO 8601.</p>\n\n<pre><code>import org.threeten.bp.OffsetDateTime;\nimport org.threeten.bp.format.DateTimeFormatter;\n\npublic class DemoIso8601Offsets {\n    public static void main(String[] args) {\n        System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+0200\", \n                DateTimeFormatter.ofPattern(\"uuuu-MM-dd'T'HH:mm:ssXX\")));\n        System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+02\", \n                DateTimeFormatter.ofPattern(\"uuuu-MM-dd'T'HH:mm:ssX\")));\n        System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+02:00\"));\n        System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00Z\"));\n    }\n}\n</code></pre>\n\n<p>Output from this program is:</p>\n\n<blockquote>\n<pre><code>2012-10-01T19:30+02:00\n2012-10-01T19:30+02:00\n2012-10-01T19:30+02:00\n2012-10-01T19:30Z\n</code></pre>\n</blockquote>\n\n<p>It requires that you add the ThreeTen Backport library to your project setup.</p>\n\n<ul>\n<li>In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in.</li>\n<li>In Java 6 and 7 get the ThreeTen Backport, the backport of the new classes (ThreeTen for JSR 310; see the links at the bottom).</li>\n<li>On (older) Android use the Android edition of ThreeTen Backport. Its called ThreeTenABP. And make sure you import the date and time classes from <code>org.threeten.bp</code> with subpackages.</li>\n</ul>\n\n<p>As you can see from the code, <code>+02</code> and <code>+0200</code> require a formatter where you specify the format of the offset, while <code>+02:00</code> (and <code>Z</code> too) conforms with the default format and doesnt need to be specified.</p>\n\n<h2>Can we parse all the offset formats using the same formatter?</h2>\n\n<p>When reading mixed data, you dont want to handle each offset format specially. Its better to use optional parts in the format pattern string:</p>\n\n<pre><code>    DateTimeFormatter allInOne \n            = DateTimeFormatter.ofPattern(\"uuuu-MM-dd'T'HH:mm:ss[XXX][XX][X]\");\n    System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+0200\", allInOne));\n    System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+02\", allInOne));\n    System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+02:00\", allInOne));\n    System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00Z\", allInOne));\n</code></pre>\n\n<p>Output is the same as above. The square brackets in <code>[XXX][XX][X]</code> mean that either format <code>+02:00</code>, <code>+0200</code> or <code>+02</code> may be present.</p>\n\n<h2>Links</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use <code>java.time</code>.</li>\n<li><a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">Java Specification Request (JSR) 310</a>, where <code>java.time</code> was first described.</li>\n<li><a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport project</a>, the backport of <code>java.time</code> to Java 6 and 7 (ThreeTen for JSR-310).</li>\n<li><a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>, Android edition of ThreeTen Backport</li>\n<li><a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">Question: How to use ThreeTenABP in Android Project</a>, with a very thorough explanation.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9341786,"reputation":11,"user_id":6934319,"display_name":"Liudmila Moraru"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701344038,"creation_date":1701334145,"answer_id":77577034,"question_id":13040143,"body_markdown":"The same approach works for different milliseconds and different offsets:\r\n\r\n    String DATE_TIME_PATTERN = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss[.SSS][.SS][.S][XXX][XX][X]&quot;;\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(DATE_TIME_PATTERN);\r\n    \r\n    Date convertDate(String dateString) {\r\n        return Date.from(OffsetDateTime.parse(dateString, formatter).toInstant());\r\n    }\r\n\r\nSometimes you need to have two different patterns for getter and setter:\r\n\r\n    String DATE_TIME_PATTERN_SET = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss[.SSS][.SS][.S][XXX][XX][X]&quot;;\r\n    String DATE_TIME_PATTERN_GET = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssXXX&quot;;\r\n    DateTimeFormatter formatterSet = DateTimeFormatter.ofPattern(DATE_TIME_PATTERN_SET);\r\n    DateFormat dateFormat = new SimpleDateFormat(DATE_TIME_PATTERN_GET);\r\n    \r\n    Date convertToDate(String dateString) {\r\n        return Date.from(OffsetDateTime.parse(dateString, formatterSet).toInstant());\r\n    }\r\n\r\n    String convertToString(Date date) {\r\n        dateFormat.setTimeZone(TimeZone.getDefault());\r\n        return dateFormat.format(date).replaceAll(&quot;Z$&quot;, &quot;+00:00&quot;);\r\n    }","title":"Generic support for ISO 8601 format in Java 6","body":"<p>The same approach works for different milliseconds and different offsets:</p>\n<pre><code>String DATE_TIME_PATTERN = &quot;yyyy-MM-dd'T'HH:mm:ss[.SSS][.SS][.S][XXX][XX][X]&quot;;\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(DATE_TIME_PATTERN);\n\nDate convertDate(String dateString) {\n    return Date.from(OffsetDateTime.parse(dateString, formatter).toInstant());\n}\n</code></pre>\n<p>Sometimes you need to have two different patterns for getter and setter:</p>\n<pre><code>String DATE_TIME_PATTERN_SET = &quot;yyyy-MM-dd'T'HH:mm:ss[.SSS][.SS][.S][XXX][XX][X]&quot;;\nString DATE_TIME_PATTERN_GET = &quot;yyyy-MM-dd'T'HH:mm:ssXXX&quot;;\nDateTimeFormatter formatterSet = DateTimeFormatter.ofPattern(DATE_TIME_PATTERN_SET);\nDateFormat dateFormat = new SimpleDateFormat(DATE_TIME_PATTERN_GET);\n\nDate convertToDate(String dateString) {\n    return Date.from(OffsetDateTime.parse(dateString, formatterSet).toInstant());\n}\n\nString convertToString(Date date) {\n    dateFormat.setTimeZone(TimeZone.getDefault());\n    return dateFormat.format(date).replaceAll(&quot;Z$&quot;, &quot;+00:00&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10971,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":14177122,"answer_count":3,"score":9,"last_activity_date":1701344038,"creation_date":1351030313,"question_id":13040143,"body_markdown":"Java 7 has introduced support in the `SimpleDateFormat` class for ISO 8601 format, via the character `X` (instead of lower or upper case `Z`). Supporting such formats in Java 6 requires preprocessing, so the best approach is the question.\r\n\r\nThis new format is a superset of `Z` (uppercase Z), with 2 additional variations:\r\n\r\n 1. The &quot;minutes&quot; field is optional (i.e., 2-digit instead of 4-digit timezones are valid)\r\n 2. A colon character (&#39;:&#39;) can be used for separating the 2-digit &quot;hours&quot; field from the 2-digit &quot;minutes&quot; field).\r\n\r\nSo, as one can observe from the [Java 7 documentation of `SimpleDateFormat`][1], the following 3 formats are now valid (instead of only the second one covered by `Z` in Java 6) and, of course, equivalent:\r\n\r\n 1. -08\r\n 2. -0800\r\n 3. -08:00\r\n\r\nAs discussed in an [earlier question][2] about a special case of supporting such an &quot;expanded&quot; timezone format, always with &#39;:&#39; as a separator, the best approach for backporting the Java 7 functionality into Java 6 is to subclass the `SimpleDateformat` class and override its `parse()` method, i.e:\r\n\r\n    public Date parse(String date, ParsePosition pos)\r\n    {\r\n        String iso = ... // Replace the X with a Z timezone string, using a regex\r\n        \r\n        if (iso.length() == date.length())\r\n        {\r\n            return null; // Not an ISO 8601 date\r\n        }\r\n            \r\n        Date parsed = super.parse(iso, pos);\r\n            \r\n        if (parsed != null)\r\n        {\r\n            pos.setIndex(pos.getIndex()+1); // Adjust for &#39;:&#39;\r\n        }\r\n            \r\n        return parsed;\r\n    }\r\n\r\nNote that the subclassed `SimpleDateFormat` objects above must be initialized with the corresponding `Z`-based pattern, i.e. if the subclass is `ExtendedSimpleDateformat` and you want to parse dates complying to the pattern `yyyy-MM-dd&#39;T&#39;HH:mm:ssX`, then you should use objects instantiated as\r\n\r\n    new ExtendedSimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&quot;);\r\n\r\nIn the aforementioned [earlier question][2] the regex `:(?=[0-9]{2}$)` has been suggested for getting rid of the &#39;:&#39; and in a [similar question][3] the regex `(?&lt;=[+-]\\d{2})$` has been suggested for appending the &quot;minute&quot; field as `00`, if needed.\r\n\r\nObviously, running the 2 replacements successfully can be used for achieving full functionality. So, the `iso` local variable in the overridden `parse()` method would be set as\r\n\r\n    iso = date.replaceFirst(&quot;:(?=[0-9]{2}$)&quot;,&quot;&quot;);\r\nor\r\n\r\n    iso = iso.replaceFirst(&quot;(?&lt;=[+-]\\\\d{2})$&quot;, &quot;00&quot;);\r\n\r\nwith an `if` check in between to make sure that the `pos` value is also set properly later on and also for the `length()` comparison earlier.\r\n\r\nThe question is: can we use a **single regular expression** to achieve the same effect, including the information needed for not unnecessarily checking the length and for correctly setting `pos` a few lines later?\r\n\r\nThe implementation is intended for code that reads very large numbers of string fields that can be in any format (even totally non-date), selects only those which comply to the format and returns the parsed Java `Date` object.\r\n\r\nSo, both **accuracy** and **speed** are of paramount importance (i.e., if using the 2 passes is faster, this approach is preferrable).\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\r\n  [2]: https://stackoverflow.com/questions/10614771/java-simpledateformat-pattern-for-w3c-xml-dates-with-timezone\r\n  [3]: https://stackoverflow.com/questions/12951875/parsing-java-dates-with-truncated-timezone-information\r\n\r\n\r\n","title":"Generic support for ISO 8601 format in Java 6","body":"<p>Java 7 has introduced support in the <code>SimpleDateFormat</code> class for ISO 8601 format, via the character <code>X</code> (instead of lower or upper case <code>Z</code>). Supporting such formats in Java 6 requires preprocessing, so the best approach is the question.</p>\n\n<p>This new format is a superset of <code>Z</code> (uppercase Z), with 2 additional variations:</p>\n\n<ol>\n<li>The \"minutes\" field is optional (i.e., 2-digit instead of 4-digit timezones are valid)</li>\n<li>A colon character (':') can be used for separating the 2-digit \"hours\" field from the 2-digit \"minutes\" field).</li>\n</ol>\n\n<p>So, as one can observe from the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">Java 7 documentation of <code>SimpleDateFormat</code></a>, the following 3 formats are now valid (instead of only the second one covered by <code>Z</code> in Java 6) and, of course, equivalent:</p>\n\n<ol>\n<li>-08</li>\n<li>-0800</li>\n<li>-08:00</li>\n</ol>\n\n<p>As discussed in an <a href=\"https://stackoverflow.com/questions/10614771/java-simpledateformat-pattern-for-w3c-xml-dates-with-timezone\">earlier question</a> about a special case of supporting such an \"expanded\" timezone format, always with ':' as a separator, the best approach for backporting the Java 7 functionality into Java 6 is to subclass the <code>SimpleDateformat</code> class and override its <code>parse()</code> method, i.e:</p>\n\n<pre><code>public Date parse(String date, ParsePosition pos)\n{\n    String iso = ... // Replace the X with a Z timezone string, using a regex\n\n    if (iso.length() == date.length())\n    {\n        return null; // Not an ISO 8601 date\n    }\n\n    Date parsed = super.parse(iso, pos);\n\n    if (parsed != null)\n    {\n        pos.setIndex(pos.getIndex()+1); // Adjust for ':'\n    }\n\n    return parsed;\n}\n</code></pre>\n\n<p>Note that the subclassed <code>SimpleDateFormat</code> objects above must be initialized with the corresponding <code>Z</code>-based pattern, i.e. if the subclass is <code>ExtendedSimpleDateformat</code> and you want to parse dates complying to the pattern <code>yyyy-MM-dd'T'HH:mm:ssX</code>, then you should use objects instantiated as</p>\n\n<pre><code>new ExtendedSimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ssZ\");\n</code></pre>\n\n<p>In the aforementioned <a href=\"https://stackoverflow.com/questions/10614771/java-simpledateformat-pattern-for-w3c-xml-dates-with-timezone\">earlier question</a> the regex <code>:(?=[0-9]{2}$)</code> has been suggested for getting rid of the ':' and in a <a href=\"https://stackoverflow.com/questions/12951875/parsing-java-dates-with-truncated-timezone-information\">similar question</a> the regex <code>(?&lt;=[+-]\\d{2})$</code> has been suggested for appending the \"minute\" field as <code>00</code>, if needed.</p>\n\n<p>Obviously, running the 2 replacements successfully can be used for achieving full functionality. So, the <code>iso</code> local variable in the overridden <code>parse()</code> method would be set as</p>\n\n<pre><code>iso = date.replaceFirst(\":(?=[0-9]{2}$)\",\"\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>iso = iso.replaceFirst(\"(?&lt;=[+-]\\\\d{2})$\", \"00\");\n</code></pre>\n\n<p>with an <code>if</code> check in between to make sure that the <code>pos</code> value is also set properly later on and also for the <code>length()</code> comparison earlier.</p>\n\n<p>The question is: can we use a <strong>single regular expression</strong> to achieve the same effect, including the information needed for not unnecessarily checking the length and for correctly setting <code>pos</code> a few lines later?</p>\n\n<p>The implementation is intended for code that reads very large numbers of string fields that can be in any format (even totally non-date), selects only those which comply to the format and returns the parsed Java <code>Date</code> object.</p>\n\n<p>So, both <strong>accuracy</strong> and <strong>speed</strong> are of paramount importance (i.e., if using the 2 passes is faster, this approach is preferrable).</p>\n"},{"tags":["java","swing","graphics"],"comments":[{"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"score":0,"creation_date":1494524286,"post_id":43922079,"comment_id":74877538,"body_markdown":"A general rule of thumb when overriding the `paintComponent` method is to always call `super.paintComponent(g)` before anything else.","body":"A general rule of thumb when overriding the <code>paintComponent</code> method is to always call <code>super.paintComponent(g)</code> before anything else."},{"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"score":0,"creation_date":1494524497,"post_id":43922079,"comment_id":74877663,"body_markdown":"If this solves your problem, let me know.  Your code is too limited to be able to determine what the issue is with any certainty.  For example, you have a `paintComponent()` method, but it is not overridden.  Also, your class doesn&#39;t extend any `swing` components, but you call `repaint()` in context of your class not showing a `repaint()` method","body":"If this solves your problem, let me know.  Your code is too limited to be able to determine what the issue is with any certainty.  For example, you have a <code>paintComponent()</code> method, but it is not overridden.  Also, your class doesn&#39;t extend any <code>swing</code> components, but you call <code>repaint()</code> in context of your class not showing a <code>repaint()</code> method"},{"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"score":0,"creation_date":1494524571,"post_id":43922079,"comment_id":74877707,"body_markdown":"Unfortunately didn&#39;t solve the problem","body":"Unfortunately didn&#39;t solve the problem"},{"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"score":0,"creation_date":1494524664,"post_id":43922079,"comment_id":74877767,"body_markdown":"Okay, I would leave that line in there though because otherwise if your Panel gets large enough you will have unpredictable artifacts later on.  Do you set the graphics color anywhere in your code?","body":"Okay, I would leave that line in there though because otherwise if your Panel gets large enough you will have unpredictable artifacts later on.  Do you set the graphics color anywhere in your code?"},{"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"score":0,"creation_date":1494524739,"post_id":43922079,"comment_id":74877812,"body_markdown":"Yes I do. Multiple times. Does this affect the clearRect method?","body":"Yes I do. Multiple times. Does this affect the clearRect method?"},{"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"score":0,"creation_date":1494524760,"post_id":43922079,"comment_id":74877826,"body_markdown":"Not sure, let me do some research","body":"Not sure, let me do some research"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1494525224,"post_id":43922079,"comment_id":74878088,"body_markdown":"Check out: http://stackoverflow.com/questions/43882050/bufferedimage-fill-rectangle-with-transparent-pixels/43891658#43891658","body":"Check out: <a href=\"http://stackoverflow.com/questions/43882050/bufferedimage-fill-rectangle-with-transparent-pixels/43891658#43891658\" title=\"bufferedimage fill rectangle with transparent pixels\">stackoverflow.com/questions/43882050/&hellip;</a>"},{"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"score":0,"creation_date":1494525934,"post_id":43922079,"comment_id":74878461,"body_markdown":"this worked but somehow changed the color of the tiles :/ Does this affect the Graphic2D&#39;s colors?","body":"this worked but somehow changed the color of the tiles :/ Does this affect the Graphic2D&#39;s colors?"}],"answers":[{"comments":[{"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"score":0,"creation_date":1494526954,"post_id":43922603,"comment_id":74879055,"body_markdown":"Just did this :)","body":"Just did this :)"},{"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"score":0,"creation_date":1494526981,"post_id":43922603,"comment_id":74879071,"body_markdown":"Thanks :) I just broke 1000 reputation!","body":"Thanks :) I just broke 1000 reputation!"},{"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"score":0,"creation_date":1494527231,"post_id":43922603,"comment_id":74879223,"body_markdown":"Congratulations :)","body":"Congratulations :)"}],"tags":[],"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1494526213,"creation_date":1494525644,"answer_id":43922603,"question_id":43922079,"body_markdown":"So, here&#39;s what I have done in the past... When I am painting a `BufferedImage` to a `Component` with swing, I will set the pixel color values individually.  \r\n\r\nThis same concept can be applied to clearing a `BufferedImage`.  You can set the pixels `int[]` by calling `bi.setRGB()`.  There are quite a few parameters that you need to provide to set the array, but don&#39;t worry, I&#39;ll go over each one.\r\n\r\n`bi.setRGB(int startingX, int startingY, int width, int height, int[] sourceArray, int offset, int scanSize);`\r\n\r\nstartingX and startingY should be 0 in this instance.\r\n\r\nwidth and height are what you would expect them to be (`bi.getWidth(), bi.getHeight()`)\r\n\r\nsourceArray will be the `int[]` that you fill with 0s\r\n\r\noffset should be 0 in this instance\r\n\r\nscanSize will just be `bi.getWidth()`\r\n\r\nSo, lets look at some code to clear your `BufferedImage`\r\n\r\n    int[] pixels = new int[bi.getWidth()*bi.getHeight()];\r\n    \r\n    Arrays.fill(pixels, 0);\r\n    bi.setRGB(0, 0, bi.getWidth(), bi.getHeight(), pixels, 0, bi.getWidth());\r\n\r\n\r\nIf this doesn&#39;t clear your `BufferedImage`, then either you&#39;re not creating the `BufferedImage` using `BufferedImage.TYPE_INT_ARGB` or you&#39;re reading the image in and it is only a 24-bit color image that lacks an Alpha channel\r\n","title":"clearRect draws black instead of transparent","body":"<p>So, here's what I have done in the past... When I am painting a <code>BufferedImage</code> to a <code>Component</code> with swing, I will set the pixel color values individually.  </p>\n\n<p>This same concept can be applied to clearing a <code>BufferedImage</code>.  You can set the pixels <code>int[]</code> by calling <code>bi.setRGB()</code>.  There are quite a few parameters that you need to provide to set the array, but don't worry, I'll go over each one.</p>\n\n<p><code>bi.setRGB(int startingX, int startingY, int width, int height, int[] sourceArray, int offset, int scanSize);</code></p>\n\n<p>startingX and startingY should be 0 in this instance.</p>\n\n<p>width and height are what you would expect them to be (<code>bi.getWidth(), bi.getHeight()</code>)</p>\n\n<p>sourceArray will be the <code>int[]</code> that you fill with 0s</p>\n\n<p>offset should be 0 in this instance</p>\n\n<p>scanSize will just be <code>bi.getWidth()</code></p>\n\n<p>So, lets look at some code to clear your <code>BufferedImage</code></p>\n\n<pre><code>int[] pixels = new int[bi.getWidth()*bi.getHeight()];\n\nArrays.fill(pixels, 0);\nbi.setRGB(0, 0, bi.getWidth(), bi.getHeight(), pixels, 0, bi.getWidth());\n</code></pre>\n\n<p>If this doesn't clear your <code>BufferedImage</code>, then either you're not creating the <code>BufferedImage</code> using <code>BufferedImage.TYPE_INT_ARGB</code> or you're reading the image in and it is only a 24-bit color image that lacks an Alpha channel</p>\n"},{"tags":[],"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1494527183,"creation_date":1494527183,"answer_id":43923049,"question_id":43922079,"body_markdown":"I also want to mention, that camickr&#39;s solution worked too:\r\n\r\n[link][1]\r\n\r\n    g2d.setComposite(AlphaComposite.Clear);\r\n\tg2d.fillRect(0, 0, (width), (height));\r\n\tg2d.setComposite(AlphaComposite.SrcOver);\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/43882050/bufferedimage-fill-rectangle-with-transparent-pixels/43891658#43891658","title":"clearRect draws black instead of transparent","body":"<p>I also want to mention, that camickr's solution worked too:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/43882050/bufferedimage-fill-rectangle-with-transparent-pixels/43891658#43891658\">link</a></p>\n\n<pre><code>g2d.setComposite(AlphaComposite.Clear);\ng2d.fillRect(0, 0, (width), (height));\ng2d.setComposite(AlphaComposite.SrcOver);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17429073,"reputation":113,"user_id":12633414,"display_name":"Goofyseeker311"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701343908,"creation_date":1701343522,"answer_id":77578043,"question_id":43922079,"body_markdown":"instead of pixel by pixel drawing, and losing the support for the other drawing/filling functions, you can just use Graphics2D object function:\r\n\r\n    .setComposite(AlphaComposite.Src);\r\n\r\nThis way you can directly copy the color/alpha channels of any image buffer to another, bypassing the alpha processing that removes any attempt to directly copy alpha channel.","title":"clearRect draws black instead of transparent","body":"<p>instead of pixel by pixel drawing, and losing the support for the other drawing/filling functions, you can just use Graphics2D object function:</p>\n<pre><code>.setComposite(AlphaComposite.Src);\n</code></pre>\n<p>This way you can directly copy the color/alpha channels of any image buffer to another, bypassing the alpha processing that removes any attempt to directly copy alpha channel.</p>\n"}],"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1238,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":43922603,"answer_count":3,"score":2,"last_activity_date":1701343908,"creation_date":1494523680,"question_id":43922079,"body_markdown":"It seems like `clearRect` doesn&#39;t set my `BufferedImage` to transparent but to black. Creating a `new BufferedImage` works, but I don&#39;t want to produce too much garbage.\r\nI have this code for my chess programm:\r\n\r\n\t\r\n\t//graphics\r\n\tprivate Graphics2D g2d;\r\n\r\n\tprivate Graphics2D gLayer1;\r\n\tprivate Graphics2D gLayer2;\r\n\tprivate Graphics2D gLayer3;\r\n\r\n\tpublic BufferedImage imgLayer1;\r\n\tprivate BufferedImage imgLayer2;\r\n\tprivate BufferedImage imgLayer3;\r\n\t\r\n\tprivate Game() throws IOException {\r\n\t\t\r\n\t\t//initialize...\r\n\t\t\r\n\t\timgLayer1 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n\t\tgLayer1 = imgLayer1.createGraphics();\r\n\r\n\t\timgLayer2 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n\t\tgLayer2 = imgLayer2.createGraphics();\r\n\r\n\t\timgLayer3 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n\t\tgLayer3 = imgLayer3.createGraphics();\r\n\t}\r\n\t\r\n\t//main\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t\r\n\t\t//initialize frame\r\n\t}\r\n\t\r\n\tpublic void run() {\r\n\t\t\r\n\t\twhile (isRunning) {\r\n\t\t\t\r\n\t\t\tupdateGraphicsLayer1();\r\n\t\t\tupdateGraphicsLayer2();\r\n\t\t\tupdateGraphicsLayer3();\r\n\t\t\t\r\n\t\t\trepaint();\r\n\t\t}\r\n\t}\r\n\t\r\n\tprotected void paintComponent(Graphics g) {\r\n\t\tg2d = (Graphics2D) g;\r\n\t\t\r\n\t\tg.drawImage(imgLayer1, 0, 0, null);\r\n\t\tg.drawImage(imgLayer2, 0, 0, null);\r\n\t\tg.drawImage(imgLayer3, 0, 0, null);\r\n\t\t\r\n\t\tg2d.dispose();\r\n\t}\r\n\t\r\n\tpublic void updateGraphicsLayer1() {\r\n\t\tif (redrawLayer1) {\r\n\r\n\t\t\tgLayer1.clearRect(0, 0, WIDTH, HEIGHT);\r\n\t\t\t\r\n\t\t\t//draw this layer\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void updateGraphicsLayer2() {\r\n\t\tif (redrawLayer2) {\r\n\r\n\t\t\tgLayer2.clearRect(0, 0, WIDTH, HEIGHT);\r\n\t\t\t\r\n\t\t\t//draw this layer\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void updateGraphicsLayer3() {\r\n\t\tif (redrawLayer3) {\r\n\t\t\t\r\n\t\t\tgLayer3.clearRect(0, 0, WIDTH, HEIGHT);\r\n\r\n\t\t\t//draw this layer\r\n\t\t}\r\n\t}\r\n\r\nthis is what I get:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nwhat have I got to do?\r\nHow can I clear my layers, so they are transparent?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RDRq5.png","title":"clearRect draws black instead of transparent","body":"<p>It seems like <code>clearRect</code> doesn't set my <code>BufferedImage</code> to transparent but to black. Creating a <code>new BufferedImage</code> works, but I don't want to produce too much garbage.\nI have this code for my chess programm:</p>\n\n<pre><code>//graphics\nprivate Graphics2D g2d;\n\nprivate Graphics2D gLayer1;\nprivate Graphics2D gLayer2;\nprivate Graphics2D gLayer3;\n\npublic BufferedImage imgLayer1;\nprivate BufferedImage imgLayer2;\nprivate BufferedImage imgLayer3;\n\nprivate Game() throws IOException {\n\n    //initialize...\n\n    imgLayer1 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\n    gLayer1 = imgLayer1.createGraphics();\n\n    imgLayer2 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\n    gLayer2 = imgLayer2.createGraphics();\n\n    imgLayer3 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\n    gLayer3 = imgLayer3.createGraphics();\n}\n\n//main\npublic static void main(String[] args) throws IOException {\n\n    //initialize frame\n}\n\npublic void run() {\n\n    while (isRunning) {\n\n        updateGraphicsLayer1();\n        updateGraphicsLayer2();\n        updateGraphicsLayer3();\n\n        repaint();\n    }\n}\n\nprotected void paintComponent(Graphics g) {\n    g2d = (Graphics2D) g;\n\n    g.drawImage(imgLayer1, 0, 0, null);\n    g.drawImage(imgLayer2, 0, 0, null);\n    g.drawImage(imgLayer3, 0, 0, null);\n\n    g2d.dispose();\n}\n\npublic void updateGraphicsLayer1() {\n    if (redrawLayer1) {\n\n        gLayer1.clearRect(0, 0, WIDTH, HEIGHT);\n\n        //draw this layer\n    }\n}\n\npublic void updateGraphicsLayer2() {\n    if (redrawLayer2) {\n\n        gLayer2.clearRect(0, 0, WIDTH, HEIGHT);\n\n        //draw this layer\n    }\n}\n\npublic void updateGraphicsLayer3() {\n    if (redrawLayer3) {\n\n        gLayer3.clearRect(0, 0, WIDTH, HEIGHT);\n\n        //draw this layer\n    }\n}\n</code></pre>\n\n<p>this is what I get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RDRq5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RDRq5.png\" alt=\"enter image description here\"></a></p>\n\n<p>what have I got to do?\nHow can I clear my layers, so they are transparent?</p>\n"},{"tags":["java","classloader","java-11","urlclassloader"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":5,"creation_date":1701269163,"post_id":77571828,"comment_id":136754922,"body_markdown":"The class path is available via `System.getProperty(&quot;java.class.path&quot;)` since day one. So to check whether it contains a particular entry, you can use, e.g. `Arrays.asList(System.getProperty(&quot;java.class.path&quot;).split(File.pathSeparator)) .contains(&quot;your directory&quot;)` As a side note, dont write expressions like `(clRootDirectory.isDirectory() == true) &amp;&amp; (clRootDirectory.exists() == true)` when you can simply write `clRootDirectory.isDirectory() &amp;&amp; clRootDirectory.exists()` or even simpler `clRootDirectory.isDirectory()` as being a directory implies its existence.","body":"The class path is available via <code>System.getProperty(&quot;java.class.path&quot;)</code> since day one. So to check whether it contains a particular entry, you can use, e.g. <code>Arrays.asList(System.getProperty(&quot;java.class.path&quot;).split(Fi&zwnj;&#8203;le.pathSeparator)) .contains(&quot;your directory&quot;)</code> As a side note, dont write expressions like <code>(clRootDirectory.isDirectory() == true) &amp;&amp; (clRootDirectory.exists() == true)</code> when you can simply write <code>clRootDirectory.isDirectory() &amp;&amp; clRootDirectory.exists()</code> or even simpler <code>clRootDirectory.isDirectory()</code> as being a directory implies its existence."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1701273073,"post_id":77571828,"comment_id":136755826,"body_markdown":"The code I previously posted is some 15 year old relic from a person probably dead. I will eventually adapt it, but I simply don&#39;t have the time to check the code style for all 200.000 lines of code I have to endure in this project. Anyways, your solution works. If you convert it into an answer, I can close this issue for all who might be interested in the future :)","body":"The code I previously posted is some 15 year old relic from a person probably dead. I will eventually adapt it, but I simply don&#39;t have the time to check the code style for all 200.000 lines of code I have to endure in this project. Anyways, your solution works. If you convert it into an answer, I can close this issue for all who might be interested in the future :)"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1701343485,"creation_date":1701343485,"answer_id":77578036,"question_id":77571828,"body_markdown":"The class path is available through `System.getProperty(&quot;java.class.path&quot;)`. So you can use, e.g.\r\n\r\n```java\r\nprivate static boolean isInClasspath(File file) {\r\n    List&lt;String&gt; classPath =\r\n        Arrays.asList(System.getProperty(&quot;java.class.path&quot;)\r\n              .split(File.pathSeparator));\r\n    return classPath.contains(file.toString());\r\n}\r\n```\r\n\r\nThis checks for a literal match only. If you want to check whether a path element refers to the same directory after resolving relative paths like `..`  and links and/or perform a case insensitive match when the filesystem is case insensitive, you may use\r\n\r\n```java\r\nprivate static boolean isInClasspath(File file) {\r\n    List&lt;String&gt; classPath =\r\n        Arrays.asList(System.getProperty(&quot;java.class.path&quot;)\r\n              .split(Pattern.quote(File.pathSeparator)));\r\n    if(classPath.contains(file.toString()))\r\n        return true;\r\n\r\n    Path path = check(file.toPath());\r\n    for(String s: classPath) {\r\n        if(check(Paths.get(s)).equals(path))\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nprivate static Path check(Path path) {\r\n    try {\r\n        return path.toRealPath();\r\n    } catch(IOException ex) {\r\n        return path.toAbsolutePath();\r\n    }\r\n}\r\n```","title":"How to check if a directory is in the classpath after java 11?","body":"<p>The class path is available through <code>System.getProperty(&quot;java.class.path&quot;)</code>. So you can use, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean isInClasspath(File file) {\n    List&lt;String&gt; classPath =\n        Arrays.asList(System.getProperty(&quot;java.class.path&quot;)\n              .split(File.pathSeparator));\n    return classPath.contains(file.toString());\n}\n</code></pre>\n<p>This checks for a literal match only. If you want to check whether a path element refers to the same directory after resolving relative paths like <code>..</code>  and links and/or perform a case insensitive match when the filesystem is case insensitive, you may use</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean isInClasspath(File file) {\n    List&lt;String&gt; classPath =\n        Arrays.asList(System.getProperty(&quot;java.class.path&quot;)\n              .split(Pattern.quote(File.pathSeparator)));\n    if(classPath.contains(file.toString()))\n        return true;\n\n    Path path = check(file.toPath());\n    for(String s: classPath) {\n        if(check(Paths.get(s)).equals(path))\n            return true;\n    }\n    return false;\n}\n\nprivate static Path check(Path path) {\n    try {\n        return path.toRealPath();\n    } catch(IOException ex) {\n        return path.toAbsolutePath();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77578036,"answer_count":1,"score":0,"last_activity_date":1701343485,"creation_date":1701266647,"question_id":77571828,"body_markdown":"tl;dr: Is there a direct way to check if a directory is in the classpath in Java 11?\r\n\r\nI have the situation that I want to migrate a project from Java 8 to Java 11. I have Code that performs a check to see if a certain directory is in the classpath, as this is required in the program at a later stage.\r\n\r\nThis is how it looks:\r\n\r\n```java\r\n // Step 002.1: Ensuring that runtime directory exists or at least can be created.\r\n\r\n    File clRootDirectory = new File(m_strRootDirectory);\r\n    clRootDirectory.mkdirs();\r\n\r\n    // Step 002.2: Checking if ROOT directory is in ClassPath\r\n\r\n    if ((clRootDirectory.isDirectory() == true) &amp;&amp; (clRootDirectory.exists() == true))\r\n    {\r\n\r\n      URL[] clClassPathURLs = ((URLClassLoader) ClassLoader.getSystemClassLoader()).getURLs();\r\n\r\n      boolean bFoundRootInClassPath = false;\r\n      for (URL clCurrentPathElement : clClassPathURLs)\r\n      {\r\n        try\r\n        {\r\n          if (java.net.URLDecoder.decode(clCurrentPathElement.getFile(), StandardCharsets.UTF_8.name()).endsWith(m_strRootDirectory) == true)     // endsWith seems a bit odd. But this way it works on Mac OS X as well.\r\n          {                                                                                                                 // URLDecode.decode is necessary if there is a space on our classpath - as URLs use stuff like &quot;%20&quot; instead of &quot; &quot;.\r\n            bFoundRootInClassPath = true;\r\n          }\r\n        }\r\n        catch (UnsupportedEncodingException e)\r\n        {\r\n          // STATUS: Doesn&#39;t matter\r\n        }\r\n\r\n      }\r\n\r\n      if (bFoundRootInClassPath == false)\r\n      {\r\n        exitByFatalError(&quot;ROOT Directory is NOT in ClassPath. ROOT Directory is &#39;&quot;+m_strRootDirectory+&quot;&#39;.&quot;,SANITY_CHECK_ERROR_SYSTEM_ROOT_NOT_IN_CLASSPATH);\r\n      }\r\n\r\n    }\r\n    else\r\n    {\r\n\r\n      exitByFatalError(&quot;RootDirectory (&quot;+m_strRootDirectory+&quot;) is not a valid Directory.&quot;, SANITY_CHECK_ERROR_SYSTEM_ROOT_NOT_A_DIRECTORY);\r\n    }\r\n```\r\n\r\nThis seems pretty straightforward to me, and it works. However, The ClassLoader no longer has URLClassLoader as a base class. This makes the code completely unusable, since it heavily relies on this function. I have tried to replace the code with this:\r\n\r\n```java\r\nprivate static boolean isInClasspath(File file) {\r\n    ClassLoader classLoader = ClassLoader.getSystemClassLoader();\r\n    String directoryPath = file.getAbsolutePath();\r\n    String normalizedPath = directoryPath.endsWith(&quot;/&quot;) ? directoryPath : directoryPath + &quot;/&quot;;\r\n\r\n    try {\r\n      Enumeration&lt;URL&gt; resources = classLoader.getResources(normalizedPath);\r\n      while (resources.hasMoreElements()) {\r\n        URL url = resources.nextElement();\r\n        System.out.println(&quot;url = &quot; + url);\r\n        String resourcePath = url.getPath();\r\n        if (resourcePath.startsWith(normalizedPath)) {\r\n          return true;\r\n        }\r\n      }\r\n    } catch (IOException e) {\r\n      e.printStackTrace();\r\n    }\r\n    return false;\r\n  }\r\n```\r\n\r\nHowever, this simply doesn&#39;t work. My resources enumeration is always empty, and I explicitly add my directory to the classpath in my run config. I haven&#39;t changed that, and with Java 8 the run config does its job. \r\n\r\nI know that there are a number of ways to check if a certain file is in the classpath, but I want to know about an entire directory.  I&#39;d rather not implement a completely custom class loader...","title":"How to check if a directory is in the classpath after java 11?","body":"<p>tl;dr: Is there a direct way to check if a directory is in the classpath in Java 11?</p>\n<p>I have the situation that I want to migrate a project from Java 8 to Java 11. I have Code that performs a check to see if a certain directory is in the classpath, as this is required in the program at a later stage.</p>\n<p>This is how it looks:</p>\n<pre class=\"lang-java prettyprint-override\"><code> // Step 002.1: Ensuring that runtime directory exists or at least can be created.\n\n    File clRootDirectory = new File(m_strRootDirectory);\n    clRootDirectory.mkdirs();\n\n    // Step 002.2: Checking if ROOT directory is in ClassPath\n\n    if ((clRootDirectory.isDirectory() == true) &amp;&amp; (clRootDirectory.exists() == true))\n    {\n\n      URL[] clClassPathURLs = ((URLClassLoader) ClassLoader.getSystemClassLoader()).getURLs();\n\n      boolean bFoundRootInClassPath = false;\n      for (URL clCurrentPathElement : clClassPathURLs)\n      {\n        try\n        {\n          if (java.net.URLDecoder.decode(clCurrentPathElement.getFile(), StandardCharsets.UTF_8.name()).endsWith(m_strRootDirectory) == true)     // endsWith seems a bit odd. But this way it works on Mac OS X as well.\n          {                                                                                                                 // URLDecode.decode is necessary if there is a space on our classpath - as URLs use stuff like &quot;%20&quot; instead of &quot; &quot;.\n            bFoundRootInClassPath = true;\n          }\n        }\n        catch (UnsupportedEncodingException e)\n        {\n          // STATUS: Doesn't matter\n        }\n\n      }\n\n      if (bFoundRootInClassPath == false)\n      {\n        exitByFatalError(&quot;ROOT Directory is NOT in ClassPath. ROOT Directory is '&quot;+m_strRootDirectory+&quot;'.&quot;,SANITY_CHECK_ERROR_SYSTEM_ROOT_NOT_IN_CLASSPATH);\n      }\n\n    }\n    else\n    {\n\n      exitByFatalError(&quot;RootDirectory (&quot;+m_strRootDirectory+&quot;) is not a valid Directory.&quot;, SANITY_CHECK_ERROR_SYSTEM_ROOT_NOT_A_DIRECTORY);\n    }\n</code></pre>\n<p>This seems pretty straightforward to me, and it works. However, The ClassLoader no longer has URLClassLoader as a base class. This makes the code completely unusable, since it heavily relies on this function. I have tried to replace the code with this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean isInClasspath(File file) {\n    ClassLoader classLoader = ClassLoader.getSystemClassLoader();\n    String directoryPath = file.getAbsolutePath();\n    String normalizedPath = directoryPath.endsWith(&quot;/&quot;) ? directoryPath : directoryPath + &quot;/&quot;;\n\n    try {\n      Enumeration&lt;URL&gt; resources = classLoader.getResources(normalizedPath);\n      while (resources.hasMoreElements()) {\n        URL url = resources.nextElement();\n        System.out.println(&quot;url = &quot; + url);\n        String resourcePath = url.getPath();\n        if (resourcePath.startsWith(normalizedPath)) {\n          return true;\n        }\n      }\n    } catch (IOException e) {\n      e.printStackTrace();\n    }\n    return false;\n  }\n</code></pre>\n<p>However, this simply doesn't work. My resources enumeration is always empty, and I explicitly add my directory to the classpath in my run config. I haven't changed that, and with Java 8 the run config does its job.</p>\n<p>I know that there are a number of ways to check if a certain file is in the classpath, but I want to know about an entire directory.  I'd rather not implement a completely custom class loader...</p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":13984046,"reputation":163,"user_id":10099578,"display_name":"Inod Umayanga"},"score":0,"creation_date":1701415142,"post_id":77578007,"comment_id":136775123,"body_markdown":"It is the problem as native queries aren&#39;t effective against @Where in this case how to get the results?","body":"It is the problem as native queries aren&#39;t effective against @Where in this case how to get the results?"},{"owner":{"account_id":15039384,"reputation":1,"user_id":10854575,"display_name":"F. Kadolu"},"score":0,"creation_date":1701430859,"post_id":77578007,"comment_id":136777569,"body_markdown":"There is no solution to this problem that I know of. If you&#39;re using NativeQuery you need to add `is_pooled=false` to every query. By the way, did the solution I suggested above solve the problem?","body":"There is no solution to this problem that I know of. If you&#39;re using NativeQuery you need to add <code>is_pooled=false</code> to every query. By the way, did the solution I suggested above solve the problem?"},{"owner":{"account_id":13984046,"reputation":163,"user_id":10099578,"display_name":"Inod Umayanga"},"score":0,"creation_date":1701458802,"post_id":77578007,"comment_id":136782531,"body_markdown":"it is not viable as there are more than 30 JPA statements","body":"it is not viable as there are more than 30 JPA statements"},{"owner":{"account_id":15039384,"reputation":1,"user_id":10854575,"display_name":"F. Kadolu"},"score":0,"creation_date":1701462966,"post_id":77578007,"comment_id":136783099,"body_markdown":"You asked that &quot;there is an exceptional case where I need to retrieve data with is_pooled value set as true in the database. How can I achieve this?&quot;. if you try the above query you will see it works correctly. If there is any other problem, please write in detail.","body":"You asked that &quot;there is an exceptional case where I need to retrieve data with is_pooled value set as true in the database. How can I achieve this?&quot;. if you try the above query you will see it works correctly. If there is any other problem, please write in detail."}],"tags":[],"owner":{"account_id":15039384,"reputation":1,"user_id":10854575,"display_name":"F. Kadolu"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701343265,"creation_date":1701343265,"answer_id":77578007,"question_id":77577813,"body_markdown":"The example below will probably be useful. @Where annotation does not work in native queries\r\n\r\n        @Query(value = &quot;SELECT i.* FROM bbser_inventory i WHERE i.inventory_id IN (:inventoryIds) and i.is_pooled = true&quot;, nativeQuery = true)\r\n    List&lt;InventoryEntity&gt; findInventoryByIdAndIsPooled(Collection&lt;Long&gt; inventoryIds);","title":"Retrieve data using a JPA statement when a global WHERE clause is set for all find methods in a Table Entity","body":"<p>The example below will probably be useful. @Where annotation does not work in native queries</p>\n<pre><code>    @Query(value = &quot;SELECT i.* FROM bbser_inventory i WHERE i.inventory_id IN (:inventoryIds) and i.is_pooled = true&quot;, nativeQuery = true)\nList&lt;InventoryEntity&gt; findInventoryByIdAndIsPooled(Collection&lt;Long&gt; inventoryIds);\n</code></pre>\n"}],"owner":{"account_id":13984046,"reputation":163,"user_id":10099578,"display_name":"Inod Umayanga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701343265,"creation_date":1701341443,"question_id":77577813,"body_markdown":"I am using the following code in my table entity to filter out all the records with is_pooled = true. (`@Where(clause = &quot;is_pooled = false&quot;)`)\r\n\r\n    @Entity\r\n    @Table(name = &quot;bbser_inventory&quot;)\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @Where(clause = &quot;is_pooled = false&quot;)\r\n    public class InventoryEntity extends BaseEntity {\r\n\r\nBut there is an exceptional case where I need to retrieve data with is_pooled value set as true in the database. How can I achieve this?\r\n\r\nI already tried writing as following solutions but do not retrieve data\r\n\r\n**Method 1**\r\n\r\n    List&lt;InventoryEntity&gt; findAllByInventoryIdInAndIsPooledTrue(List&lt;Long&gt; inventoryIdList);\r\n\r\n **Method 2**\r\n\r\n    @Query(&quot;SELECT i FROM InventoryEntity i WHERE i.inventoryId IN (?1) AND i.isPooled = true&quot;)\r\n    List&lt;InventoryEntity&gt; findInventoryByIdAndIsPooled(Collection&lt;Long&gt; inventoryIds, Boolean ispooled);\r\n\r\nFollowing is my serviceImpl method I am trying to retrieve this data\r\n\r\n    @Override\r\n        public ResponseEntity&lt;?&gt; getPooledParentInfo(Long inventoryId) {\r\n            PooledBloodInventoryEntity pooledBloodInventoryEntity = pooledInventoryRepository.findDistinctFirstByInventoryId(inventoryId);\r\n            List&lt;Long&gt; pooledInventoryIdList = pooledBloodInventoryEntity.getParentInventoryIds();\r\n            List&lt;InventoryEntity&gt; inventoryEntityList = inventoryRepository.findInventoryByIdAndIsPooled(pooledInventoryIdList, true);\r\n    \r\n            return new ResponseEntity&lt;&gt;(inventoryEntityList, new HttpHeaders(), HttpStatus.OK);\r\n        }","title":"Retrieve data using a JPA statement when a global WHERE clause is set for all find methods in a Table Entity","body":"<p>I am using the following code in my table entity to filter out all the records with is_pooled = true. (<code>@Where(clause = &quot;is_pooled = false&quot;)</code>)</p>\n<pre><code>@Entity\n@Table(name = &quot;bbser_inventory&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\n@Where(clause = &quot;is_pooled = false&quot;)\npublic class InventoryEntity extends BaseEntity {\n</code></pre>\n<p>But there is an exceptional case where I need to retrieve data with is_pooled value set as true in the database. How can I achieve this?</p>\n<p>I already tried writing as following solutions but do not retrieve data</p>\n<p><strong>Method 1</strong></p>\n<pre><code>List&lt;InventoryEntity&gt; findAllByInventoryIdInAndIsPooledTrue(List&lt;Long&gt; inventoryIdList);\n</code></pre>\n<p><strong>Method 2</strong></p>\n<pre><code>@Query(&quot;SELECT i FROM InventoryEntity i WHERE i.inventoryId IN (?1) AND i.isPooled = true&quot;)\nList&lt;InventoryEntity&gt; findInventoryByIdAndIsPooled(Collection&lt;Long&gt; inventoryIds, Boolean ispooled);\n</code></pre>\n<p>Following is my serviceImpl method I am trying to retrieve this data</p>\n<pre><code>@Override\n    public ResponseEntity&lt;?&gt; getPooledParentInfo(Long inventoryId) {\n        PooledBloodInventoryEntity pooledBloodInventoryEntity = pooledInventoryRepository.findDistinctFirstByInventoryId(inventoryId);\n        List&lt;Long&gt; pooledInventoryIdList = pooledBloodInventoryEntity.getParentInventoryIds();\n        List&lt;InventoryEntity&gt; inventoryEntityList = inventoryRepository.findInventoryByIdAndIsPooled(pooledInventoryIdList, true);\n\n        return new ResponseEntity&lt;&gt;(inventoryEntityList, new HttpHeaders(), HttpStatus.OK);\n    }\n</code></pre>\n"},{"tags":["java","unit-testing","spring-mvc","mockito"],"answers":[{"comments":[{"owner":{"account_id":8457600,"reputation":399,"user_id":6344343,"accept_rate":57,"display_name":"c2340878"},"score":0,"creation_date":1487836683,"post_id":42406691,"comment_id":71966147,"body_markdown":"I tried the tutorial but it does not work. http://stackoverflow.com/questions/37781982/mocking-a-rest-call-with-mockrestserviceserver","body":"I tried the tutorial but it does not work. <a href=\"http://stackoverflow.com/questions/37781982/mocking-a-rest-call-with-mockrestserviceserver\" title=\"mocking a rest call with mockrestserviceserver\">stackoverflow.com/questions/37781982/&hellip;</a>"}],"tags":[],"owner":{"account_id":2733319,"reputation":3099,"user_id":2356554,"display_name":"Keith"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1487821948,"creation_date":1487821948,"answer_id":42406691,"question_id":42406625,"body_markdown":"Spring MVC&#39;s test framework has offered the class [`MockRestServiceServer`](http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html) for unit testing RESTful service code. \r\n\r\nHere is a [tutorial](https://objectpartners.com/2013/01/09/rest-client-testing-with-mockrestserviceserver/) on its use.","title":"How to mock local RestTemplate in Java Spring?","body":"<p>Spring MVC's test framework has offered the class <a href=\"http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html\" rel=\"noreferrer\"><code>MockRestServiceServer</code></a> for unit testing RESTful service code. </p>\n\n<p>Here is a <a href=\"https://objectpartners.com/2013/01/09/rest-client-testing-with-mockrestserviceserver/\" rel=\"noreferrer\">tutorial</a> on its use.</p>\n"},{"comments":[{"owner":{"account_id":8457600,"reputation":399,"user_id":6344343,"accept_rate":57,"display_name":"c2340878"},"score":0,"creation_date":1487967008,"post_id":42415051,"comment_id":72038456,"body_markdown":"I tried but it will return the error that restTemplate is null. And it looks I can not inject restTemplate bean. Is there anything else I can do to test it? I just need to mock the response of RestTemplete.","body":"I tried but it will return the error that restTemplate is null. And it looks I can not inject restTemplate bean. Is there anything else I can do to test it? I just need to mock the response of RestTemplete."},{"owner":{"account_id":9586472,"reputation":788,"user_id":7119031,"display_name":"hiroyukik"},"score":1,"creation_date":1487975474,"post_id":42415051,"comment_id":72042582,"body_markdown":"Sorry, I missed putting the importance annotation on the class. Please see my answer again.","body":"Sorry, I missed putting the importance annotation on the class. Please see my answer again."}],"tags":[],"owner":{"account_id":9586472,"reputation":788,"user_id":7119031,"display_name":"hiroyukik"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1487975626,"creation_date":1487850777,"answer_id":42415051,"question_id":42406625,"body_markdown":"If you use @Autowired, you could use MockRestServiceServer.\r\nThe below is the sample.\r\n\r\n\r\n    @Service\r\n    public class Service{\r\n        @Autowired\r\n        private RestTemplate restTemplate;\r\n\r\n        public boolean isEnabled(String xxx) {\r\n            ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(&quot;someurl&quot;,String.class);\r\n            if(...)return true;\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n@Service needs to use @Autowired for creating object automatically.","title":"How to mock local RestTemplate in Java Spring?","body":"<p>If you use @Autowired, you could use MockRestServiceServer.\nThe below is the sample.</p>\n\n<pre><code>@Service\npublic class Service{\n    @Autowired\n    private RestTemplate restTemplate;\n\n    public boolean isEnabled(String xxx) {\n        ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(\"someurl\",String.class);\n        if(...)return true;\n        return false;\n    }\n}\n</code></pre>\n\n<p>@Service needs to use @Autowired for creating object automatically.</p>\n"},{"tags":[],"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1542635967,"creation_date":1487896280,"answer_id":42428738,"question_id":42406625,"body_markdown":"The problem is that in your `isEnabled` you are creating a new RestTemplate.  This is wrong for two reasons, one is that you cannot mock it since you are creating a new one, and second it is good to avoid creating new objects per request.  RestTemplate is thread safe and hence can be a service class member, being used across many threads.\r\n\r\n\r\nChange your service class to something like this:\r\n\r\n    public class Service{\r\n\r\n        RestTemplate restTemplate = new RestTemplate();\r\n\r\n        public boolean isEnabled(String xxx) {\r\n            ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(&quot;someurl&quot;,String.class);\r\n            if(...)return true;\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\nNow that your RestTemplate has become a class member you can now properly mock through one of two ways.  One, inject it using the `@InjectMock`, or use a setter method that you call from your test.\r\n\r\n\r\nSince you are using InjectMock in your code we can go with that.\r\n\r\n    @RunWith(MockitoJUnitRunner.class) \r\n\tpublic class ServiceTest {\r\n\t\t@Mock\r\n\t\tRestTemplate restTemplate;\r\n\t\t@InjectMocks\r\n        @Spy\r\n\t\tService service;\r\n\t\tResponseEntity responseEntity = mock(ResponseEntity.class);\r\n\r\n\t\t@Test\r\n\t\tpublic void test() throws Exception {\r\n\t\t\tMockito.when(restTemplate.getForEntity(\r\n\t\t\t\t\tMockito.anyString(),\r\n\t\t\t\t\tArgumentMatchers.any(Class.class)\r\n\t\t\t\t\t))\r\n\t\t\t\t\t.thenReturn(responseEntity);\r\n\t\t\tboolean res = service.isEnabled(&quot;something&quot;);\r\n\t\t\tAssert.assertEquals(res, false);\r\n\t\t}\r\n\r\nNotice that I made a few changes.  First, I removed the `new RestTemplate()` and `new Service()`.  You should let mockito create those for you.  By annotating them with `@Mock` and `@Spy` you will ensure that Mockito will create them for you, and more importantly, will inject the mocks into your `service` object.","title":"How to mock local RestTemplate in Java Spring?","body":"<p>The problem is that in your <code>isEnabled</code> you are creating a new RestTemplate.  This is wrong for two reasons, one is that you cannot mock it since you are creating a new one, and second it is good to avoid creating new objects per request.  RestTemplate is thread safe and hence can be a service class member, being used across many threads.</p>\n\n<p>Change your service class to something like this:</p>\n\n<pre><code>public class Service{\n\n    RestTemplate restTemplate = new RestTemplate();\n\n    public boolean isEnabled(String xxx) {\n        ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(\"someurl\",String.class);\n        if(...)return true;\n        return false;\n    }\n}\n</code></pre>\n\n<p>Now that your RestTemplate has become a class member you can now properly mock through one of two ways.  One, inject it using the <code>@InjectMock</code>, or use a setter method that you call from your test.</p>\n\n<p>Since you are using InjectMock in your code we can go with that.</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class) \npublic class ServiceTest {\n    @Mock\n    RestTemplate restTemplate;\n    @InjectMocks\n    @Spy\n    Service service;\n    ResponseEntity responseEntity = mock(ResponseEntity.class);\n\n    @Test\n    public void test() throws Exception {\n        Mockito.when(restTemplate.getForEntity(\n                Mockito.anyString(),\n                ArgumentMatchers.any(Class.class)\n                ))\n                .thenReturn(responseEntity);\n        boolean res = service.isEnabled(\"something\");\n        Assert.assertEquals(res, false);\n    }\n</code></pre>\n\n<p>Notice that I made a few changes.  First, I removed the <code>new RestTemplate()</code> and <code>new Service()</code>.  You should let mockito create those for you.  By annotating them with <code>@Mock</code> and <code>@Spy</code> you will ensure that Mockito will create them for you, and more importantly, will inject the mocks into your <code>service</code> object.</p>\n"}],"owner":{"account_id":8457600,"reputation":399,"user_id":6344343,"accept_rate":57,"display_name":"c2340878"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85185,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":42428738,"answer_count":3,"score":23,"last_activity_date":1701343148,"creation_date":1487821539,"question_id":42406625,"body_markdown":"    public class ServiceTest {\r\n        @Mock\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        @InjectMocks\r\n        Service service = new Service();\r\n        ResponseEntity responseEntity = mock(ResponseEntity.class);\r\n    \r\n        @Test\r\n        public void test() throws Exception {\r\n            Mockito.when(restTemplate.getForEntity(\r\n                    Mockito.anyString(),\r\n                    Matchers.any(Class.class)\r\n                    ))\r\n                    .thenReturn(responseEntity);\r\n            boolean res = service.isEnabled(&quot;something&quot;);\r\n            Assert.assertEquals(res, false);\r\n        }\r\n\r\n\r\nI tried to test a simple test for a service including a restclient. It looks I have not Mock the `RestTemplate` successfully. It looks like the code get the real data not the mock one. Anyone can help me with this.\r\n\r\nThe service itself will looks as this:\r\n\r\n    public class Service{\r\n        public boolean isEnabled(String xxx) {\r\n            RestTemplate restTemplate = new RestTemplate();\r\n            ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(&quot;someurl&quot;,String.class);\r\n            if(...)return true;\r\n            return false;\r\n        }\r\n    }\r\n\r\n","title":"How to mock local RestTemplate in Java Spring?","body":"<pre><code>public class ServiceTest {\n    @Mock\n    RestTemplate restTemplate = new RestTemplate();\n    @InjectMocks\n    Service service = new Service();\n    ResponseEntity responseEntity = mock(ResponseEntity.class);\n\n    @Test\n    public void test() throws Exception {\n        Mockito.when(restTemplate.getForEntity(\n                Mockito.anyString(),\n                Matchers.any(Class.class)\n                ))\n                .thenReturn(responseEntity);\n        boolean res = service.isEnabled(\"something\");\n        Assert.assertEquals(res, false);\n    }\n</code></pre>\n\n<p>I tried to test a simple test for a service including a restclient. It looks I have not Mock the <code>RestTemplate</code> successfully. It looks like the code get the real data not the mock one. Anyone can help me with this.</p>\n\n<p>The service itself will looks as this:</p>\n\n<pre><code>public class Service{\n    public boolean isEnabled(String xxx) {\n        RestTemplate restTemplate = new RestTemplate();\n        ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(\"someurl\",String.class);\n        if(...)return true;\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","scheduled-tasks","spring-scheduled"],"answers":[{"comments":[{"owner":{"account_id":11955653,"reputation":585,"user_id":8748083,"display_name":"RobOhRob"},"score":0,"creation_date":1584728792,"post_id":59787001,"comment_id":107535324,"body_markdown":"That wouldn&#39;t work for me. Got &quot;Incompatible types, found String required Long&quot;... but it works for fixedDelayString","body":"That wouldn&#39;t work for me. Got &quot;Incompatible types, found String required Long&quot;... but it works for fixedDelayString"}],"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1584730028,"creation_date":1579262612,"answer_id":59787001,"question_id":59786883,"body_markdown":"You can just adjust your annotation to use a SpEL multiplication.\r\n\r\n    @Scheduled(fixedDelayString = &quot;#{${app.delay} * 1000}&quot;)","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>You can just adjust your annotation to use a SpEL multiplication.</p>\n\n<pre><code>@Scheduled(fixedDelayString = \"#{${app.delay} * 1000}\")\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":3,"creation_date":1579263159,"post_id":59787006,"comment_id":105716989,"body_markdown":"yes, it works. But unfortunately **10s** doesn&#39;t work although spring able to parse **10s** to Duration","body":"yes, it works. But unfortunately <b>10s</b> doesn&#39;t work although spring able to parse <b>10s</b> to Duration"}],"tags":[],"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1579262622,"creation_date":1579262622,"answer_id":59787006,"question_id":59786883,"body_markdown":"Assuming you&#39;re using a recent enough version of Spring, you can use any String that can be parsed to a `java.time.Duration`. In your case:\r\n\r\n    PT10S","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>Assuming you're using a recent enough version of Spring, you can use any String that can be parsed to a <code>java.time.Duration</code>. In your case:</p>\n\n<pre><code>PT10S\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1579264548,"post_id":59787118,"comment_id":105717645,"body_markdown":"Could you please check that you use correct symbols here: **@Scheduled(fixedDelayString = &quot;#{@appProperties.getDelay().toMillis()}&quot;)**","body":"Could you please check that you use correct symbols here: <b>@Scheduled(fixedDelayString = &quot;#{@appProperties.getDelay().toMillis()}&quot;)</b>"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1579265096,"post_id":59787118,"comment_id":105717880,"body_markdown":"@gstackoverflow Can you explain what you mean? Is it not working for you? Is something not clear?","body":"@gstackoverflow Can you explain what you mean? Is it not working for you? Is something not clear?"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1579265502,"post_id":59787118,"comment_id":105718081,"body_markdown":"It doesn&#39;t work for me. Could you specify what is bean names, what is property key ?","body":"It doesn&#39;t work for me. Could you specify what is bean names, what is property key ?"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1579265607,"post_id":59787118,"comment_id":105718133,"body_markdown":"Parameter 0 of constructor in foo.bar.Bean required a bean named &#39;appProperties&#39; that could not be found.","body":"Parameter 0 of constructor in foo.bar.Bean required a bean named &#39;appProperties&#39; that could not be found."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":1,"creation_date":1579268332,"post_id":59787118,"comment_id":105719513,"body_markdown":"I solved the issue. It was because I used ConfigurationProperties(&quot;app&quot;) +EnableConfigurationProperties. ConfigurationProperties + Component is a working combination","body":"I solved the issue. It was because I used ConfigurationProperties(&quot;app&quot;) +EnableConfigurationProperties. ConfigurationProperties + Component is a working combination"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1579268600,"post_id":59787118,"comment_id":105719661,"body_markdown":"@gstackoverflow Yeah, `@EnableConfigurationProperties` uses a different bean naming convention, and thus won&#39;t work. I googled a bit around and found [this issue](https://github.com/spring-projects/spring-boot/issues/19390) which is very similar to yours. They suggest using `@Component` or using the second solution I provided.","body":"@gstackoverflow Yeah, <code>@EnableConfigurationProperties</code> uses a different bean naming convention, and thus won&#39;t work. I googled a bit around and found <a href=\"https://github.com/spring-projects/spring-boot/issues/19390\" rel=\"nofollow noreferrer\">this issue</a> which is very similar to yours. They suggest using <code>@Component</code> or using the second solution I provided."}],"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"comment_count":6,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1616396761,"creation_date":1579263081,"answer_id":59787118,"question_id":59786883,"body_markdown":"As far as I know, you can&#39;t do it directly. However, Spring boot configuration properties do [support automatic conversion][1] of parameters like `15s` and `5m` to `Duration`.\r\n\r\nThis means you could create a `@ConfigurationProperties` class like this:\r\n\r\n```java\r\n@Component\r\n@ConfigurationProperties(&quot;app&quot;)\r\npublic class AppProperties {\r\n    private Duration delay;\r\n\r\n    // Setter + Getter\r\n}\r\n```\r\n\r\nAdditionally, since you can use [bean references with Spring&#39;s Expression Language][2] within the `@Scheduled` annotation, you can do something like this:\r\n\r\n```java\r\n@Scheduled(fixedDelayString = &quot;#{@appProperties.getDelay().toMillis()}&quot;)\r\npublic void schedule() {\r\n    log.info(&quot;Scheduled&quot;);\r\n}\r\n```\r\n\r\n**Note**: When using this approach, you have to register your configuration properties using the `@Component` annotation. It won&#39;t work if you use the `@EnableConfigurationProperties` annotation.\r\n\r\n---\r\n\r\nAlternatively, you can programmatically add a task to the `TaskScheduler`. The benefit of that is that you have more compile-time safety, and it allows you to work with `Duration` directly:\r\n\r\n```java\r\n@Bean\r\npublic ScheduledFuture&lt;?&gt; schedule(TaskScheduler scheduler, AppProperties properties) {\r\n    return scheduler.scheduleWithFixedDelay(() -&gt; log.info(&quot;Scheduled&quot;), properties.getDelay());\r\n}\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-conversion-duration\r\n  [2]: https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#expressions-bean-references","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>As far as I know, you can't do it directly. However, Spring boot configuration properties do <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-conversion-duration\" rel=\"noreferrer\">support automatic conversion</a> of parameters like <code>15s</code> and <code>5m</code> to <code>Duration</code>.</p>\n<p>This means you could create a <code>@ConfigurationProperties</code> class like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@ConfigurationProperties(&quot;app&quot;)\npublic class AppProperties {\n    private Duration delay;\n\n    // Setter + Getter\n}\n</code></pre>\n<p>Additionally, since you can use <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#expressions-bean-references\" rel=\"noreferrer\">bean references with Spring's Expression Language</a> within the <code>@Scheduled</code> annotation, you can do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Scheduled(fixedDelayString = &quot;#{@appProperties.getDelay().toMillis()}&quot;)\npublic void schedule() {\n    log.info(&quot;Scheduled&quot;);\n}\n</code></pre>\n<p><strong>Note</strong>: When using this approach, you have to register your configuration properties using the <code>@Component</code> annotation. It won't work if you use the <code>@EnableConfigurationProperties</code> annotation.</p>\n<hr />\n<p>Alternatively, you can programmatically add a task to the <code>TaskScheduler</code>. The benefit of that is that you have more compile-time safety, and it allows you to work with <code>Duration</code> directly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic ScheduledFuture&lt;?&gt; schedule(TaskScheduler scheduler, AppProperties properties) {\n    return scheduler.scheduleWithFixedDelay(() -&gt; log.info(&quot;Scheduled&quot;), properties.getDelay());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1537914,"reputation":5365,"user_id":1433372,"accept_rate":50,"display_name":"userM1433372"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1676564416,"creation_date":1676564416,"answer_id":75475124,"question_id":59786883,"body_markdown":"I&#39;m using this code and it works fine:\r\n\r\n    @Scheduled(fixedDelayString = &quot;PT10S&quot;)","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>I'm using this code and it works fine:</p>\n<pre><code>@Scheduled(fixedDelayString = &quot;PT10S&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3709530,"reputation":73,"user_id":3087222,"display_name":"marud"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701342979,"creation_date":1701342979,"answer_id":77577974,"question_id":59786883,"body_markdown":"I understand this is a fairly old question but maybe it&#39;s worth to provide an updated (as of 2023) answer.\r\n\r\nThere are actually a couple of ways to do this.\r\n\r\nI will assume the property is defined as a &quot;natural&quot; time string, i.e. `app.delay=20s` instead of `app.delay=PT20S`, but both cases would work.\r\n## Plain Properties\r\n\r\nIf the property `app.delay` is _not_ part of of `@ConfigurationProperties`, you can use the following expression:\r\n```\r\n@Scheduled(fixedDelayString = &quot;#{T(org.springframework.boot.convert.ApplicationConversionService).getSharedInstance().convert(&#39;${app.delay}&#39;, T(java.time.Duration)).toMillis()}&quot;)\r\n```\r\n## Configuration Properties\r\n\r\nIf you defined the property `app.delay` as part of &quot;normal&quot; (i.e. not a `@Component`) `@ConfigurationProperties`, like so:\r\n```\r\n@ConfigurationProperties(&quot;app&quot;)\r\npublic class AppProperties {\r\n    private Duration delay;\r\n    // Getters + Setters\r\n}\r\n```\r\nThen, assuming this class is in package `com.package`, you can use\r\n```\r\n@Scheduled(fixedDelayString = &quot;#{@&#39;app-com.package.AppProperties&#39;.getDelay().toMillis()}&quot;)\r\n```\r\nBecause this is how naming of the Configuration Properties beans works in Spring Boot (see [reference doc](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.typesafe-configuration-properties.enabling-annotated-types)).\r\n## Configuration Properties (as `@Component`)\r\n\r\n(which is the original answer by [@g00glen00b](https://stackoverflow.com/users/1915448/g00glen00b))&lt;br/&gt;\r\nIf you defined the property `app.delay` as part of `@ConfigurationProperties`, which are also a `@Component` like so:\r\n```\r\n@Component\r\n@ConfigurationProperties(&quot;app&quot;)\r\npublic class AppProperties {\r\n    private Duration delay;\r\n    // Getters + Setters\r\n}\r\n```\r\nThen you can refer to the bean name as follows\r\n```\r\n@Scheduled(fixedDelayString = &quot;#{@appProperties.getDelay().toMillis()}&quot;)\r\n```\r\n","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>I understand this is a fairly old question but maybe it's worth to provide an updated (as of 2023) answer.</p>\n<p>There are actually a couple of ways to do this.</p>\n<p>I will assume the property is defined as a &quot;natural&quot; time string, i.e. <code>app.delay=20s</code> instead of <code>app.delay=PT20S</code>, but both cases would work.</p>\n<h2>Plain Properties</h2>\n<p>If the property <code>app.delay</code> is <em>not</em> part of of <code>@ConfigurationProperties</code>, you can use the following expression:</p>\n<pre><code>@Scheduled(fixedDelayString = &quot;#{T(org.springframework.boot.convert.ApplicationConversionService).getSharedInstance().convert('${app.delay}', T(java.time.Duration)).toMillis()}&quot;)\n</code></pre>\n<h2>Configuration Properties</h2>\n<p>If you defined the property <code>app.delay</code> as part of &quot;normal&quot; (i.e. not a <code>@Component</code>) <code>@ConfigurationProperties</code>, like so:</p>\n<pre><code>@ConfigurationProperties(&quot;app&quot;)\npublic class AppProperties {\n    private Duration delay;\n    // Getters + Setters\n}\n</code></pre>\n<p>Then, assuming this class is in package <code>com.package</code>, you can use</p>\n<pre><code>@Scheduled(fixedDelayString = &quot;#{@'app-com.package.AppProperties'.getDelay().toMillis()}&quot;)\n</code></pre>\n<p>Because this is how naming of the Configuration Properties beans works in Spring Boot (see <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.typesafe-configuration-properties.enabling-annotated-types\" rel=\"nofollow noreferrer\">reference doc</a>).</p>\n<h2>Configuration Properties (as <code>@Component</code>)</h2>\n<p>(which is the original answer by <a href=\"https://stackoverflow.com/users/1915448/g00glen00b\">@g00glen00b</a>)<br/>\nIf you defined the property <code>app.delay</code> as part of <code>@ConfigurationProperties</code>, which are also a <code>@Component</code> like so:</p>\n<pre><code>@Component\n@ConfigurationProperties(&quot;app&quot;)\npublic class AppProperties {\n    private Duration delay;\n    // Getters + Setters\n}\n</code></pre>\n<p>Then you can refer to the bean name as follows</p>\n<pre><code>@Scheduled(fixedDelayString = &quot;#{@appProperties.getDelay().toMillis()}&quot;)\n</code></pre>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3972,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":59787118,"answer_count":5,"score":11,"last_activity_date":1701342979,"creation_date":1579262172,"question_id":59786883,"body_markdown":"I have following annotation in my code\r\n\r\n    @Scheduled(fixedDelayString = &quot;${app.delay}&quot;)\r\n\r\nAt this case I have to have properties like this\r\n\r\n    app.delay=10000 #10 sec\r\n\r\nPropery file looks unreadable because I have calculate value to miliseconds.\r\n\r\nIs there way to pass value like 5m or 30s there ?","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>I have following annotation in my code</p>\n\n<pre><code>@Scheduled(fixedDelayString = \"${app.delay}\")\n</code></pre>\n\n<p>At this case I have to have properties like this</p>\n\n<pre><code>app.delay=10000 #10 sec\n</code></pre>\n\n<p>Propery file looks unreadable because I have calculate value to miliseconds.</p>\n\n<p>Is there way to pass value like 5m or 30s there ?</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":7421,"reputation":20226,"user_id":12890,"accept_rate":83,"display_name":"Arne Burmeister"},"score":2,"creation_date":1271858076,"post_id":2683466,"comment_id":2703186,"body_markdown":"Yes, and what is the question?","body":"Yes, and what is the question?"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1271858116,"post_id":2683466,"comment_id":2703195,"body_markdown":"`&quot;foo&quot;.indexOf(&quot;&quot;)` returns 0 and `&quot;foo&quot;.substring(0.0)` returns `&quot;&quot;`. Seems consistent, I&#39;d say.","body":"<code>&quot;foo&quot;.indexOf(&quot;&quot;)</code> returns 0 and <code>&quot;foo&quot;.substring(0.0)</code> returns <code>&quot;&quot;</code>. Seems consistent, I&#39;d say."},{"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"score":0,"creation_date":1271859304,"post_id":2683466,"comment_id":2703382,"body_markdown":"possible duplicate of http://stackoverflow.com/questions/2568625/indexof-method-returns-0-when-it-should-had-return-1-in-c-java","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2568625/indexof-method-returns-0-when-it-should-had-return-1-in-c-java\" title=\"indexof method returns 0 when it should had return 1 in c java\">stackoverflow.com/questions/2568625/&hellip;</a>"},{"owner":{"account_id":114442,"reputation":4517,"user_id":300913,"accept_rate":87,"display_name":"ProfessionalAmateur"},"score":0,"creation_date":1271861363,"post_id":2683466,"comment_id":2703709,"body_markdown":"System.out.println(&quot;&quot;.indexOf(&quot;FOO&quot;)); &lt;- this does return a -1, I think you might have mixed up what you expected for a result?","body":"System.out.println(&quot;&quot;.indexOf(&quot;FOO&quot;)); &lt;- this does return a -1, I think you might have mixed up what you expected for a result?"},{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1271861465,"post_id":2683466,"comment_id":2703727,"body_markdown":"For something truly mindboggling, `&quot;&quot;.contains(&quot;&quot;)` is `true`. So the empty string contains something... and yet it&#39;s empty!!!","body":"For something truly mindboggling, <code>&quot;&quot;.contains(&quot;&quot;)</code> is <code>true</code>. So the empty string contains something... and yet it&#39;s empty!!!"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1271861706,"post_id":2683466,"comment_id":2703785,"body_markdown":"@polygenelubricants: then again `a.contains(a)` is true for all Strings.","body":"@polygenelubricants: then again <code>a.contains(a)</code> is true for all Strings."},{"owner":{"account_id":20966,"reputation":1514,"user_id":50570,"display_name":"tmeisenh"},"score":0,"creation_date":1271861801,"post_id":2683466,"comment_id":2703811,"body_markdown":"@Adam Paynter - yes it looks like I did re-raise this.  My search omitted C#.\n@ProfessionalAmateur - My original test was the opposite of what you had.\n@polygenelubricants - lol my mind is blown!! :P","body":"@Adam Paynter - yes it looks like I did re-raise this.  My search omitted C#. @ProfessionalAmateur - My original test was the opposite of what you had. @polygenelubricants - lol my mind is blown!! :P"},{"owner":{"account_id":20966,"reputation":1514,"user_id":50570,"display_name":"tmeisenh"},"score":0,"creation_date":1271861937,"post_id":2683466,"comment_id":2703839,"body_markdown":"@Adam (again) - Actually many thanks for pointing out that C# link.  Of note is that the C# documentation explicitly states that the empty string returns 0.  In the Case of C# that would be expected behavior since it is documented.","body":"@Adam (again) - Actually many thanks for pointing out that C# link.  Of note is that the C# documentation explicitly states that the empty string returns 0.  In the Case of C# that would be expected behavior since it is documented."},{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1271862380,"post_id":2683466,"comment_id":2703915,"body_markdown":"@Joachim: yes, but they&#39;re not `isEmpty()`. That&#39;s what I&#39;m trying to contrast, `s1.isEmpty() &amp;&amp; s1.contains(s2)` can be `true`.","body":"@Joachim: yes, but they&#39;re not <code>isEmpty()</code>. That&#39;s what I&#39;m trying to contrast, <code>s1.isEmpty() &amp;&amp; s1.contains(s2)</code> can be <code>true</code>."}],"answers":[{"comments":[{"owner":{"account_id":27626,"reputation":346928,"user_id":73070,"accept_rate":81,"display_name":"Joey"},"score":5,"creation_date":1271858131,"post_id":2683476,"comment_id":2703199,"body_markdown":"Indeed, the empty string can be found between any two adjacent characters in a string as well as at the start and end. The first such instance is the very start of the string, namely position 0.","body":"Indeed, the empty string can be found between any two adjacent characters in a string as well as at the start and end. The first such instance is the very start of the string, namely position 0."},{"owner":{"account_id":20966,"reputation":1514,"user_id":50570,"display_name":"tmeisenh"},"score":0,"creation_date":1271859008,"post_id":2683476,"comment_id":2703323,"body_markdown":"I would say empty string occurs zero times in the string Ali G but obviously I&#39;m wrong.","body":"I would say empty string occurs zero times in the string Ali G but obviously I&#39;m wrong."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1271859076,"post_id":2683476,"comment_id":2703338,"body_markdown":"@Ali G: 4 distinct times: At position 0, 1, 2, and 3 as you can easily verify by calling `.substring(0,0)` up to `.substring(3,3)` on `&quot;FOO&quot;`.","body":"@Ali G: 4 distinct times: At position 0, 1, 2, and 3 as you can easily verify by calling <code>.substring(0,0)</code> up to <code>.substring(3,3)</code> on <code>&quot;FOO&quot;</code>."},{"owner":{"account_id":20966,"reputation":1514,"user_id":50570,"display_name":"tmeisenh"},"score":1,"creation_date":1271860975,"post_id":2683476,"comment_id":2703633,"body_markdown":"StringTokenizer st = new StringTokenizer(&quot;FOO&quot;,&quot;&quot;);\nSystem.out.println(st.countTokens()); // outputs 1\nSo it looks like the empty string exists once according to StringTokenizer","body":"StringTokenizer st = new StringTokenizer(&quot;FOO&quot;,&quot;&quot;); System.out.println(st.countTokens()); // outputs 1 So it looks like the empty string exists once according to StringTokenizer"},{"owner":{"account_id":27626,"reputation":346928,"user_id":73070,"accept_rate":81,"display_name":"Joey"},"score":0,"creation_date":1271861198,"post_id":2683476,"comment_id":2703674,"body_markdown":"@Joachim: However, you can concatenate the empty string any number of times at any position of a string and still get the desired result.","body":"@Joachim: However, you can concatenate the empty string any number of times at any position of a string and still get the desired result."}],"tags":[],"owner":{"account_id":46931,"reputation":4904,"user_id":138860,"accept_rate":100,"display_name":"T ."},"comment_count":5,"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1271857921,"creation_date":1271857921,"answer_id":2683476,"question_id":2683466,"body_markdown":"Well, if it helps, you can think of `&quot;FOO&quot;` as `&quot;&quot; + &quot;FOO&quot;`.","title":"Java String.indexOf and empty Strings","body":"<p>Well, if it helps, you can think of <code>\"FOO\"</code> as <code>\"\" + \"FOO\"</code>.</p>\n"},{"comments":[{"owner":{"account_id":2674223,"reputation":785,"user_id":2310971,"display_name":"Ed B"},"score":1,"creation_date":1433417681,"post_id":2683509,"comment_id":49349539,"body_markdown":"But how does one count the number of angels that can dance within the empty string?","body":"But how does one count the number of angels that can dance within the empty string?"},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1701970886,"post_id":2683509,"comment_id":136843509,"body_markdown":"this is of course humorous and poetic and what not, but it is not, really, an answer to the question.","body":"this is of course humorous and poetic and what not, but it is not, really, an answer to the question."},{"owner":{"account_id":61252,"reputation":407513,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"score":1,"creation_date":1701971075,"post_id":2683509,"comment_id":136843540,"body_markdown":"@MikeNakis I was much younger in 2010 :)","body":"@MikeNakis I was much younger in 2010 :)"}],"tags":[],"owner":{"account_id":61252,"reputation":407513,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"comment_count":3,"down_vote_count":2,"up_vote_count":136,"is_accepted":true,"score":134,"last_activity_date":1271858207,"creation_date":1271858207,"answer_id":2683509,"question_id":2683466,"body_markdown":"The empty string is everywhere, and nowhere. It is within all strings at all times, permeating the essence of their being, yet as you seek it you shall never catch a glimpse.\r\n\r\nHow many empty strings can you fit at the beginning of a string? *Mu*\r\n\r\nThe student said to the teacher,\r\n&gt; Teacher, I believe that I have found the nature of the empty string. The empty string is like a particle of dust, and it floats freely through a string as dust floats freely through the room, glistening in a beam of sunlight.\r\n\r\nThe teacher responded to the student,\r\n&gt; Hmm. A fine notion. Now tell me, where is the dust, and where is the sunlight?\r\n\r\nThe teacher struck the student with a strap and instructed him to continue his meditation.\r\n","title":"Java String.indexOf and empty Strings","body":"<p>The empty string is everywhere, and nowhere. It is within all strings at all times, permeating the essence of their being, yet as you seek it you shall never catch a glimpse.</p>\n\n<p>How many empty strings can you fit at the beginning of a string? <em>Mu</em></p>\n\n<p>The student said to the teacher,</p>\n\n<blockquote>\n  <p>Teacher, I believe that I have found the nature of the empty string. The empty string is like a particle of dust, and it floats freely through a string as dust floats freely through the room, glistening in a beam of sunlight.</p>\n</blockquote>\n\n<p>The teacher responded to the student,</p>\n\n<blockquote>\n  <p>Hmm. A fine notion. Now tell me, where is the dust, and where is the sunlight?</p>\n</blockquote>\n\n<p>The teacher struck the student with a strap and instructed him to continue his meditation.</p>\n"},{"comments":[{"owner":{"account_id":305540,"reputation":148150,"user_id":615754,"display_name":"nnnnnn"},"score":0,"creation_date":1387848362,"post_id":3252031,"comment_id":31101239,"body_markdown":"So what&#39;s the difference between a &quot;null string&quot; and `null`? Don&#39;t we say &quot;empty string&quot; rather than &quot;null string&quot; specifically to avoid confusion with `null`?","body":"So what&#39;s the difference between a &quot;null string&quot; and <code>null</code>? Don&#39;t we say &quot;empty string&quot; rather than &quot;null string&quot; specifically to avoid confusion with <code>null</code>?"},{"owner":{"account_id":160384,"reputation":2048,"user_id":380405,"accept_rate":86,"display_name":"exoboy"},"score":0,"creation_date":1388167470,"post_id":3252031,"comment_id":31193038,"body_markdown":"Check out this explanation: http://stackoverflow.com/questions/4802015/difference-between-null-and-java-string","body":"Check out this explanation: <a href=\"http://stackoverflow.com/questions/4802015/difference-between-null-and-java-string\" title=\"difference between null and java string\">stackoverflow.com/questions/4802015/&hellip;</a>"},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1701341531,"post_id":3252031,"comment_id":136764720,"body_markdown":"The explanation that you linked to (http://stackoverflow.com/questions/4802015/difference-between-null-and-java-string) explains the exact opposite of what you claim.  This question is tagged as [Java], and in Java, a `null` string and an empty string are two completely different things.  Confusing these two concepts while trying to answer a question on stackoverflow is a grave mistake.","body":"The explanation that you linked to (<a href=\"http://stackoverflow.com/questions/4802015/difference-between-null-and-java-string\" title=\"difference between null and java string\">stackoverflow.com/questions/4802015/&hellip;</a>) explains the exact opposite of what you claim.  This question is tagged as [Java], and in Java, a <code>null</code> string and an empty string are two completely different things.  Confusing these two concepts while trying to answer a question on stackoverflow is a grave mistake."}],"tags":[],"owner":{"account_id":160384,"reputation":2048,"user_id":380405,"accept_rate":86,"display_name":"exoboy"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1279159963,"creation_date":1279159963,"answer_id":3252031,"question_id":2683466,"body_markdown":"By using the expression &quot;&quot;, you are actually referring to a null string. A null string is an ethereal tag placed on something that exists only to show that there is a lack of anything at this location.\r\n\r\nSo, by saying &quot;&quot;.indexOf( &quot;&quot; ), you are really asking the interpreter:\r\n\r\nWhere does a string value of null exist in my null string?\r\n\r\nIt returns a zero, since the null is at the beginning of the non-existent null string.\r\n\r\nTo add anything to the string would now make it a non-null string... null can be thought of as the absence of everything, even nothing.","title":"Java String.indexOf and empty Strings","body":"<p>By using the expression \"\", you are actually referring to a null string. A null string is an ethereal tag placed on something that exists only to show that there is a lack of anything at this location.</p>\n\n<p>So, by saying \"\".indexOf( \"\" ), you are really asking the interpreter:</p>\n\n<p>Where does a string value of null exist in my null string?</p>\n\n<p>It returns a zero, since the null is at the beginning of the non-existent null string.</p>\n\n<p>To add anything to the string would now make it a non-null string... null can be thought of as the absence of everything, even nothing.</p>\n"},{"tags":[],"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1433417236,"creation_date":1433417236,"answer_id":30642644,"question_id":2683466,"body_markdown":"Using an algebraic approach, &quot;&quot; is the neutral element of string concatenation: x + &quot;&quot; == x and &quot;&quot; + x == x (although + is non commutative here). \r\n\r\nThen it must also be:\r\n\r\n    x.indexOf ( y ) == i and i != -1 \r\n    &lt;==&gt; x.substring ( 0, i ) + y + x.substring ( i + y.length () ) == x\r\n\r\nwhen y = &quot;&quot;, this holds if i == 0 and x.substring ( 0, 0 ) == &quot;&quot;.\r\nI didn&#39;t design Java, but I guess mathematicians participated in it... \r\n\r\n\r\n","title":"Java String.indexOf and empty Strings","body":"<p>Using an algebraic approach, \"\" is the neutral element of string concatenation: x + \"\" == x and \"\" + x == x (although + is non commutative here). </p>\n\n<p>Then it must also be:</p>\n\n<pre><code>x.indexOf ( y ) == i and i != -1 \n&lt;==&gt; x.substring ( 0, i ) + y + x.substring ( i + y.length () ) == x\n</code></pre>\n\n<p>when y = \"\", this holds if i == 0 and x.substring ( 0, 0 ) == \"\".\nI didn't design Java, but I guess mathematicians participated in it... </p>\n"},{"comments":[{"owner":{"account_id":2822007,"reputation":1696,"user_id":3733758,"accept_rate":62,"display_name":"ctomek"},"score":0,"creation_date":1449149076,"post_id":34067219,"comment_id":55887268,"body_markdown":"Now I see that the same description is in Joey&#39;s comment, but still I think it&#39;s a good idea to put this in a new answer, because that&#39;s the only answer that really explains how it works. @Joey if you want to put this answer as your own and delete mine please let me know because you were first with that.","body":"Now I see that the same description is in Joey&#39;s comment, but still I think it&#39;s a good idea to put this in a new answer, because that&#39;s the only answer that really explains how it works. @Joey if you want to put this answer as your own and delete mine please let me know because you were first with that."}],"tags":[],"owner":{"account_id":2822007,"reputation":1696,"user_id":3733758,"accept_rate":62,"display_name":"ctomek"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449149061,"creation_date":1449149061,"answer_id":34067219,"question_id":2683466,"body_markdown":"`int number_of_empty_strings_in_string_named_text = text.length() + 1`\r\n\r\nAll characters are separated by an empty `String`. Additionally empty `String` is present at the beginning and at the end.","title":"Java String.indexOf and empty Strings","body":"<p><code>int number_of_empty_strings_in_string_named_text = text.length() + 1</code></p>\n\n<p>All characters are separated by an empty <code>String</code>. Additionally empty <code>String</code> is present at the beginning and at the end.</p>\n"},{"tags":[],"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644122616,"creation_date":1644121904,"answer_id":71004220,"question_id":2683466,"body_markdown":"if we look inside of String implementation for a method `&quot;foo&quot;.indexOf(&quot;&quot;)`, we arrive at this method:\r\n\r\n    public int indexOf(String str) {\r\n        byte coder = coder();\r\n        if (coder == str.coder()) {\r\n            return isLatin1() ? StringLatin1.indexOf(value, str.value)\r\n                              : StringUTF16.indexOf(value, str.value);\r\n        }\r\n        if (coder == LATIN1) {  // str.coder == UTF16\r\n            return -1;\r\n        }\r\n        return StringUTF16.indexOfLatin1(value, str.value);\r\n    }\r\n\r\nIf we look inside of any of the called `indexOf(value, str.value)` methods we find a condition that says:\r\n\r\nif the second parameter (string we are searching for) length is 0 return 0:\r\n\r\n     public static int indexOf(byte[] value, byte[] str) {\r\n        if (str.length == 0) {\r\n            return 0;\r\n        }\r\n        ...\r\n\r\nThis is just defensive coding for an edge case, and it is necessary because in the next method that is called to do actual searching by comparing bytes of the string (string is a byte array) it would otherwise have resulted in an `ArrayIndexOutOfBounds` exception:\r\n\r\n    public static int indexOf(byte[] value, int valueCount, byte[] str, int strCount, int fromIndex) {\r\n            byte first = str[0];\r\n    ...","title":"Java String.indexOf and empty Strings","body":"<p>if we look inside of String implementation for a method <code>&quot;foo&quot;.indexOf(&quot;&quot;)</code>, we arrive at this method:</p>\n<pre><code>public int indexOf(String str) {\n    byte coder = coder();\n    if (coder == str.coder()) {\n        return isLatin1() ? StringLatin1.indexOf(value, str.value)\n                          : StringUTF16.indexOf(value, str.value);\n    }\n    if (coder == LATIN1) {  // str.coder == UTF16\n        return -1;\n    }\n    return StringUTF16.indexOfLatin1(value, str.value);\n}\n</code></pre>\n<p>If we look inside of any of the called <code>indexOf(value, str.value)</code> methods we find a condition that says:</p>\n<p>if the second parameter (string we are searching for) length is 0 return 0:</p>\n<pre><code> public static int indexOf(byte[] value, byte[] str) {\n    if (str.length == 0) {\n        return 0;\n    }\n    ...\n</code></pre>\n<p>This is just defensive coding for an edge case, and it is necessary because in the next method that is called to do actual searching by comparing bytes of the string (string is a byte array) it would otherwise have resulted in an <code>ArrayIndexOutOfBounds</code> exception:</p>\n<pre><code>public static int indexOf(byte[] value, int valueCount, byte[] str, int strCount, int fromIndex) {\n        byte first = str[0];\n...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"score":0,"creation_date":1701339717,"post_id":72930724,"comment_id":136764404,"body_markdown":"Regarding Answer 2. `indexOf` overloads where the start index is specified as a parameter do not statically return `0` when an empty string is presented as the search token.  Instead, it returns the start index.  The source code for most major languages has simple `indexOf` methods that invoke a base implementation of `indexOf` that accepts all the supported parameters and executes the core logic (for most cases).  `indexOf` is used heavy for other string methods.  For example, `contains` is kind of a &quot;wrapper&quot; around `indexOf`, so it has the same behaviors discussed in the thread","body":"Regarding Answer 2. <code>indexOf</code> overloads where the start index is specified as a parameter do not statically return <code>0</code> when an empty string is presented as the search token.  Instead, it returns the start index.  The source code for most major languages has simple <code>indexOf</code> methods that invoke a base implementation of <code>indexOf</code> that accepts all the supported parameters and executes the core logic (for most cases).  <code>indexOf</code> is used heavy for other string methods.  For example, <code>contains</code> is kind of a &quot;wrapper&quot; around <code>indexOf</code>, so it has the same behaviors discussed in the thread"},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1701342779,"post_id":72930724,"comment_id":136764935,"body_markdown":"@KevinBowersox you are right, I changed my wording from &quot;index zero&quot; to &quot;first index examined&quot;. (And also gave the answer an overall facelift.)","body":"@KevinBowersox you are right, I changed my wording from &quot;index zero&quot; to &quot;first index examined&quot;. (And also gave the answer an overall facelift.)"},{"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"score":1,"creation_date":1701421733,"post_id":72930724,"comment_id":136776070,"body_markdown":"Within the context of the question, which was about plain `indexOf` there was nothing wrong with your response.  I just elaborated a bit.  I really liked the information you shared regarding set theory.","body":"Within the context of the question, which was about plain <code>indexOf</code> there was nothing wrong with your response.  I just elaborated a bit.  I really liked the information you shared regarding set theory."}],"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701342850,"creation_date":1657476063,"answer_id":72930724,"question_id":2683466,"body_markdown":"This question is actually two questions:\r\n\r\n1. Why should a string contain the empty string?\r\n2. Why should the empty string be found specifically at index zero?\r\n\r\nAnswering #1:\r\n\r\nIt is a matter of convention. The designers of the language could have implemented it either way:\r\n\r\n- The empty string can be found inside all strings\r\n- The empty string can never be found in any string\r\n\r\nThey decided that the empty string can be found in all strings so as to be in accordance with ***Set Theory*** ([See Wikipedia](https://en.wikipedia.org/wiki/Set_theory)), according to which:\r\n\r\n&gt; The empty set is a subset of every set including itself.\r\n\r\nThis also means that even the empty string contains the empty string, and the following statement proves it:\r\n\r\n    assert &quot;&quot;.indexOf( &quot;&quot; ) == 0;\r\n\r\nI am not sure why the mathematicians who came up with Set Theory decided that the empty set should behave this way, but I am pretty sure they had their reasons, and it appears that these reasons can be explained in layman&#39;s terms, as various youtube videos seem to do; for example: https://www.youtube.com/watch?v=1nBKadtFViM.\r\n\r\n&lt;sup&gt;Although I have to admit that I have not actually viewed any of those videos, because #AintNoBodyGotNoTimeFoDat.&lt;/sup&gt;\r\n\r\nAnswering #2:\r\n\r\nThe empty string can be found at the first index examined, because the `indexOf()` function returns the index of the first occurrence, and the empty string is everywhere, including at the first index examined.","title":"Java String.indexOf and empty Strings","body":"<p>This question is actually two questions:</p>\n<ol>\n<li>Why should a string contain the empty string?</li>\n<li>Why should the empty string be found specifically at index zero?</li>\n</ol>\n<p>Answering #1:</p>\n<p>It is a matter of convention. The designers of the language could have implemented it either way:</p>\n<ul>\n<li>The empty string can be found inside all strings</li>\n<li>The empty string can never be found in any string</li>\n</ul>\n<p>They decided that the empty string can be found in all strings so as to be in accordance with <em><strong>Set Theory</strong></em> (<a href=\"https://en.wikipedia.org/wiki/Set_theory\" rel=\"nofollow noreferrer\">See Wikipedia</a>), according to which:</p>\n<blockquote>\n<p>The empty set is a subset of every set including itself.</p>\n</blockquote>\n<p>This also means that even the empty string contains the empty string, and the following statement proves it:</p>\n<pre><code>assert &quot;&quot;.indexOf( &quot;&quot; ) == 0;\n</code></pre>\n<p>I am not sure why the mathematicians who came up with Set Theory decided that the empty set should behave this way, but I am pretty sure they had their reasons, and it appears that these reasons can be explained in layman's terms, as various youtube videos seem to do; for example: <a href=\"https://www.youtube.com/watch?v=1nBKadtFViM\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=1nBKadtFViM</a>.</p>\n<p><sup>Although I have to admit that I have not actually viewed any of those videos, because #AintNoBodyGotNoTimeFoDat.</sup></p>\n<p>Answering #2:</p>\n<p>The empty string can be found at the first index examined, because the <code>indexOf()</code> function returns the index of the first occurrence, and the empty string is everywhere, including at the first index examined.</p>\n"}],"owner":{"account_id":20966,"reputation":1514,"user_id":50570,"display_name":"tmeisenh"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36029,"favorite_count":0,"down_vote_count":2,"up_vote_count":47,"accepted_answer_id":2683509,"answer_count":7,"score":45,"last_activity_date":1701342850,"creation_date":1271857841,"question_id":2683466,"body_markdown":"I&#39;m curious why the [`String.indexOf`][1] is returning a 0 (instead of -1) when asking for the index of an empty string within a string.\r\n\r\nThe Javadocs only say this method returns the index in this string of the specified string, -1 if the string isn&#39;t found.\r\n\r\nTo me this behavior seems highly unexpected, I would have expected a -1.  Any ideas why this unexpected behavior is going on?  I would at the least think this is worth a note in the method&#39;s Javadocs...\r\n\r\n    System.out.println(&quot;FOO&quot;.indexOf(&quot;&quot;)); // outputs 0 wtf!!!\r\n    System.out.println(&quot;FOO&quot;.indexOf(&quot;bar&quot;)); // outputs -1 as expected\r\n    System.out.println(&quot;FOO&quot;.indexOf(&quot;F&quot;)); // outputs 0 as expected\r\n    System.out.println(&quot;&quot;.indexOf(&quot;&quot;)); // outputs 0 as expected, I think\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String)","title":"Java String.indexOf and empty Strings","body":"<p>I'm curious why the <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String)\" rel=\"noreferrer\"><code>String.indexOf</code></a> is returning a 0 (instead of -1) when asking for the index of an empty string within a string.</p>\n\n<p>The Javadocs only say this method returns the index in this string of the specified string, -1 if the string isn't found.</p>\n\n<p>To me this behavior seems highly unexpected, I would have expected a -1.  Any ideas why this unexpected behavior is going on?  I would at the least think this is worth a note in the method's Javadocs...</p>\n\n<pre><code>System.out.println(\"FOO\".indexOf(\"\")); // outputs 0 wtf!!!\nSystem.out.println(\"FOO\".indexOf(\"bar\")); // outputs -1 as expected\nSystem.out.println(\"FOO\".indexOf(\"F\")); // outputs 0 as expected\nSystem.out.println(\"\".indexOf(\"\")); // outputs 0 as expected, I think\n</code></pre>\n"},{"tags":["java","postgresql","jsp"],"owner":{"account_id":25559380,"reputation":1,"user_id":19342248,"display_name":"Dias Batyrbek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1701342529,"answer_count":0,"score":0,"last_activity_date":1701342638,"creation_date":1701334137,"question_id":77577033,"body_markdown":"Which resource have for learning jsp and database.I want insert data from jsp to database(postgres) and i watched video in youtube not work.I did code how that video but not successfully.I take an error :**com.postgres.Driver**, but i have driver.","title":"Insert data from jsp to database","body":"<p>Which resource have for learning jsp and database.I want insert data from jsp to database(postgres) and i watched video in youtube not work.I did code how that video but not successfully.I take an error :<strong>com.postgres.Driver</strong>, but i have driver.</p>\n"},{"tags":["java","spring","postgresql","spring-boot","google-cloud-platform"],"owner":{"account_id":14428183,"reputation":137,"user_id":10422248,"display_name":"Sabari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701342092,"creation_date":1701342092,"question_id":77577888,"body_markdown":"I am trying to connect to GCP Postgres DB using IAM Auth from a Springboot application.\r\n\r\nBelow is the code that I use to connect to Postgres DB\r\n\r\n```\r\n@Component\r\npublic class DbTest {\r\n\r\n\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n    @Scheduled(fixedRate = 300000)\r\n    public void checkDbConnectivityEveryFiveMinutes() {\r\n        try {\r\n            System.out.println(&quot;Testing DB connectivity @ --- --- &quot; + new Date());\r\n\r\n            Query query = entityManager.createNativeQuery(&quot;SELECT 1&quot;);\r\n            query.getSingleResult();\r\n\r\n            System.out.println(&quot;DB connectivity test successful @ &quot; + new Date());\r\n        } catch (Exception e) {\r\n            System.err.println(&quot;DB connectivity test failed @ &quot; + new Date() + &quot; - &quot; + e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe application is deployed into GCP Cloud Run, The GCP environment is inside a VPN, so I have provided Proxy configurations to the Cloud Run configurations, the application is working fine without any issues continuously for some days together. However, there is suddenly an exception happening like below,\r\n\r\n```\r\norg.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30001ms.] [n/a]\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:49)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:51)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:91)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:177)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:76)\r\n\tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.lambda$list$0(JdbcSelectExecutorStandardImpl.java:102)\r\n\tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:226)\r\n\tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:163)\r\n\tat org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getMetaData(AbstractResultSetAccess.java:36)\r\n\tat org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getColumnCount(AbstractResultSetAccess.java:52)\r\n\tat org.hibernate.query.results.ResultSetMappingImpl.resolve(ResultSetMappingImpl.java:193)\r\n\tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:477)\r\n\tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:267)\r\n\tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)\r\n\tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)\r\n\tat org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)\r\n\tat org.hibernate.query.sql.internal.NativeSelectQueryPlanImpl.performList(NativeSelectQueryPlanImpl.java:97)\r\n\tat org.hibernate.query.sql.internal.NativeQueryImpl.doList(NativeQueryImpl.java:621)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:473)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor76.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy245.getSingleResult(Unknown Source)\r\n\tat com.test.DbTest.checkDbConnectivityEveryFiveMinutes(DbTest.java:25)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor75.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(Unknown Source)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30001ms.\r\n\tat com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)\r\n\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)\r\n\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\r\n\tat org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:38)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)\r\n\t... 37 more\r\nCaused by: org.postgresql.util.PSQLException: Something unusual has occurred to cause the driver to fail. Please report this exception.\r\n\tat org.postgresql.Driver.connect(Driver.java:320)\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\r\n\tat com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)\r\n\tat com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)\r\n\tat java.base/java.util.concurrent.FutureTask.run(Unknown Source)\r\n\t... 3 more\r\nCaused by: java.lang.RuntimeException: java.util.concurrent.ExecutionException: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\r\n\tat com.google.cloud.sql.core.CloudSqlInstance.getInstanceData(CloudSqlInstance.java:165)\r\n\tat com.google.cloud.sql.core.CloudSqlInstance.createSslSocket(CloudSqlInstance.java:174)\r\n\tat com.google.cloud.sql.core.CoreSocketFactory.createSslSocket(CoreSocketFactory.java:329)\r\n\tat com.google.cloud.sql.core.CoreSocketFactory.connect(CoreSocketFactory.java:199)\r\n\tat com.google.cloud.sql.postgres.SocketFactory.createSocket(SocketFactory.java:77)\r\n\tat org.postgresql.core.PGStream.createSocket(PGStream.java:231)\r\n\tat org.postgresql.core.PGStream.&lt;init&gt;(PGStream.java:98)\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)\r\n\tat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)\r\n\tat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:263)\r\n\tat org.postgresql.Driver.makeConnection(Driver.java:443)\r\n\tat org.postgresql.Driver.connect(Driver.java:297)\r\n\t... 10 more\r\nCaused by: java.util.concurrent.ExecutionException: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\r\n\tat com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)\r\n\tat com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)\r\n\tat com.google.common.util.concurrent.AbstractFuture$TrustedFuture.get(AbstractFuture.java:111)\r\n\tat com.google.cloud.sql.core.SqlAdminApiFetcher.getInstanceData(SqlAdminApiFetcher.java:158)\r\n\tat com.google.cloud.sql.core.CloudSqlInstance.performRefresh(CloudSqlInstance.java:237)\r\n\tat com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:131)\r\n\tat com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:75)\r\n\tat com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:82)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\r\n\tat java.base/java.util.concurrent.FutureTask.run(Unknown Source)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)\r\n\t... 3 more\r\nCaused by: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\r\n\tat com.google.cloud.sql.core.SqlAdminApiFetcher.addExceptionContext(SqlAdminApiFetcher.java:426)\r\n\tat com.google.cloud.sql.core.SqlAdminApiFetcher.fetchEphemeralCertificate(SqlAdminApiFetcher.java:271)\r\n\tat com.google.cloud.sql.core.SqlAdminApiFetcher.lambda$getInstanceData$1(SqlAdminApiFetcher.java:114)\r\n\tat com.google.common.util.concurrent.CombinedFuture$CallableInterruptibleTask.runInterruptibly(CombinedFuture.java:196)\r\n\tat com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:75)\r\n\t... 6 more\r\nCaused by: java.net.SocketException: Unexpected end of file from server\r\n\tat java.base/sun.net.www.http.HttpClient.parseHTTPHeader(Unknown Source)\r\n\tat java.base/sun.net.www.http.HttpClient.parseHTTP(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)\r\n\tat java.base/java.net.HttpURLConnection.getResponseCode(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(Unknown Source)\r\n\tat com.google.api.client.http.javanet.NetHttpResponse.&lt;init&gt;(NetHttpResponse.java:36)\r\n\tat com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:152)\r\n\tat com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:84)\r\n\tat com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1012)\r\n\tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)\r\n\tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)\r\n\tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)\r\n\tat com.google.cloud.sql.core.SqlAdminApiFetcher.fetchEphemeralCertificate(SqlAdminApiFetcher.java:269)\r\n\t... 9 more\r\n```\r\n\r\nOnce the error occurs, the application fails and we have to redeploy the application to recover from this error. We are not sure what could suddenly cause this error.\r\n\r\nBelow is my Datasource configurations,\r\n\r\n```\r\nspring.datasource.url=jdbc:postgresql:///mydb?socketFactory=com.google.cloud.sql.postgres.SocketFactory&amp;cloudSqlInstance=XXXXXXXXX\r\nspring.datasource.username=&lt;&lt;my service account&gt;&gt;\r\nspring.datasource.password=Using_IAM\r\n\r\nspring.cloud.gcp.sql.enabled=true\r\nspring.cloud.gcp.sql.enable-iam-auth=true\r\nspring.cloud.gcp.sql.ip-types=PRIVATE\r\nspring.cloud.gcp.sql.database-name=mydb\r\nspring.cloud.gcp.sql.instance-connection-name=XXXXXXXXX\r\nspring.flyway.fail-on-missing-locations = false\r\nspring.jpa.properties.hibernate.default_schema=&lt;&lt;myschema&gt;&gt;\r\n\r\nspring.datasource.hikari.connection-test-query=SELECT 1\r\nspring.datasource.hikari.leak-detection-threshold=60000\r\nspring.datasource.hikari.minimum-idle=5\r\nspring.datasource.hikari.maximum-pool-size=20\r\nspring.datasource.hikari.connection-timeout=30000\r\nspring.datasource.hikari.idle-timeout=600000\r\nspring.datasource.hikari.max-lifetime=1800000\r\n```\r\n\r\nI have a similar application deployed and running in GCP Cloud Run, which is running fine without any issues, no such error there.\r\n\r\nAny thoughts on what could be the issue here with this application?","title":"Spring Boot with GCP Postgres (IAM Auth) - Connection Failures","body":"<p>I am trying to connect to GCP Postgres DB using IAM Auth from a Springboot application.</p>\n<p>Below is the code that I use to connect to Postgres DB</p>\n<pre><code>@Component\npublic class DbTest {\n\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Scheduled(fixedRate = 300000)\n    public void checkDbConnectivityEveryFiveMinutes() {\n        try {\n            System.out.println(&quot;Testing DB connectivity @ --- --- &quot; + new Date());\n\n            Query query = entityManager.createNativeQuery(&quot;SELECT 1&quot;);\n            query.getSingleResult();\n\n            System.out.println(&quot;DB connectivity test successful @ &quot; + new Date());\n        } catch (Exception e) {\n            System.err.println(&quot;DB connectivity test failed @ &quot; + new Date() + &quot; - &quot; + e.getMessage());\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n<p>The application is deployed into GCP Cloud Run, The GCP environment is inside a VPN, so I have provided Proxy configurations to the Cloud Run configurations, the application is working fine without any issues continuously for some days together. However, there is suddenly an exception happening like below,</p>\n<pre><code>org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30001ms.] [n/a]\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:49)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:51)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:91)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:177)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:76)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.lambda$list$0(JdbcSelectExecutorStandardImpl.java:102)\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:226)\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:163)\n    at org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getMetaData(AbstractResultSetAccess.java:36)\n    at org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getColumnCount(AbstractResultSetAccess.java:52)\n    at org.hibernate.query.results.ResultSetMappingImpl.resolve(ResultSetMappingImpl.java:193)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:477)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:267)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)\n    at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)\n    at org.hibernate.query.sql.internal.NativeSelectQueryPlanImpl.performList(NativeSelectQueryPlanImpl.java:97)\n    at org.hibernate.query.sql.internal.NativeQueryImpl.doList(NativeQueryImpl.java:621)\n    at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367)\n    at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:473)\n    at jdk.internal.reflect.GeneratedMethodAccessor76.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405)\n    at jdk.proxy2/jdk.proxy2.$Proxy245.getSingleResult(Unknown Source)\n    at com.test.DbTest.checkDbConnectivityEveryFiveMinutes(DbTest.java:25)\n    at jdk.internal.reflect.GeneratedMethodAccessor75.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\n    at java.base/java.util.concurrent.FutureTask.runAndReset(Unknown Source)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.base/java.lang.Thread.run(Unknown Source)\nCaused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30001ms.\n    at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)\n    at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)\n    at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\n    at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:38)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)\n    ... 37 more\nCaused by: org.postgresql.util.PSQLException: Something unusual has occurred to cause the driver to fail. Please report this exception.\n    at org.postgresql.Driver.connect(Driver.java:320)\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\n    at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)\n    at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)\n    at java.base/java.util.concurrent.FutureTask.run(Unknown Source)\n    ... 3 more\nCaused by: java.lang.RuntimeException: java.util.concurrent.ExecutionException: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\n    at com.google.cloud.sql.core.CloudSqlInstance.getInstanceData(CloudSqlInstance.java:165)\n    at com.google.cloud.sql.core.CloudSqlInstance.createSslSocket(CloudSqlInstance.java:174)\n    at com.google.cloud.sql.core.CoreSocketFactory.createSslSocket(CoreSocketFactory.java:329)\n    at com.google.cloud.sql.core.CoreSocketFactory.connect(CoreSocketFactory.java:199)\n    at com.google.cloud.sql.postgres.SocketFactory.createSocket(SocketFactory.java:77)\n    at org.postgresql.core.PGStream.createSocket(PGStream.java:231)\n    at org.postgresql.core.PGStream.&lt;init&gt;(PGStream.java:98)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)\n    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)\n    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:263)\n    at org.postgresql.Driver.makeConnection(Driver.java:443)\n    at org.postgresql.Driver.connect(Driver.java:297)\n    ... 10 more\nCaused by: java.util.concurrent.ExecutionException: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\n    at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)\n    at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)\n    at com.google.common.util.concurrent.AbstractFuture$TrustedFuture.get(AbstractFuture.java:111)\n    at com.google.cloud.sql.core.SqlAdminApiFetcher.getInstanceData(SqlAdminApiFetcher.java:158)\n    at com.google.cloud.sql.core.CloudSqlInstance.performRefresh(CloudSqlInstance.java:237)\n    at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:131)\n    at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:75)\n    at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:82)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\n    at java.base/java.util.concurrent.FutureTask.run(Unknown Source)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)\n    ... 3 more\nCaused by: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\n    at com.google.cloud.sql.core.SqlAdminApiFetcher.addExceptionContext(SqlAdminApiFetcher.java:426)\n    at com.google.cloud.sql.core.SqlAdminApiFetcher.fetchEphemeralCertificate(SqlAdminApiFetcher.java:271)\n    at com.google.cloud.sql.core.SqlAdminApiFetcher.lambda$getInstanceData$1(SqlAdminApiFetcher.java:114)\n    at com.google.common.util.concurrent.CombinedFuture$CallableInterruptibleTask.runInterruptibly(CombinedFuture.java:196)\n    at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:75)\n    ... 6 more\nCaused by: java.net.SocketException: Unexpected end of file from server\n    at java.base/sun.net.www.http.HttpClient.parseHTTPHeader(Unknown Source)\n    at java.base/sun.net.www.http.HttpClient.parseHTTP(Unknown Source)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(Unknown Source)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)\n    at java.base/java.net.HttpURLConnection.getResponseCode(Unknown Source)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(Unknown Source)\n    at com.google.api.client.http.javanet.NetHttpResponse.&lt;init&gt;(NetHttpResponse.java:36)\n    at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:152)\n    at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:84)\n    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1012)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)\n    at com.google.cloud.sql.core.SqlAdminApiFetcher.fetchEphemeralCertificate(SqlAdminApiFetcher.java:269)\n    ... 9 more\n</code></pre>\n<p>Once the error occurs, the application fails and we have to redeploy the application to recover from this error. We are not sure what could suddenly cause this error.</p>\n<p>Below is my Datasource configurations,</p>\n<pre><code>spring.datasource.url=jdbc:postgresql:///mydb?socketFactory=com.google.cloud.sql.postgres.SocketFactory&amp;cloudSqlInstance=XXXXXXXXX\nspring.datasource.username=&lt;&lt;my service account&gt;&gt;\nspring.datasource.password=Using_IAM\n\nspring.cloud.gcp.sql.enabled=true\nspring.cloud.gcp.sql.enable-iam-auth=true\nspring.cloud.gcp.sql.ip-types=PRIVATE\nspring.cloud.gcp.sql.database-name=mydb\nspring.cloud.gcp.sql.instance-connection-name=XXXXXXXXX\nspring.flyway.fail-on-missing-locations = false\nspring.jpa.properties.hibernate.default_schema=&lt;&lt;myschema&gt;&gt;\n\nspring.datasource.hikari.connection-test-query=SELECT 1\nspring.datasource.hikari.leak-detection-threshold=60000\nspring.datasource.hikari.minimum-idle=5\nspring.datasource.hikari.maximum-pool-size=20\nspring.datasource.hikari.connection-timeout=30000\nspring.datasource.hikari.idle-timeout=600000\nspring.datasource.hikari.max-lifetime=1800000\n</code></pre>\n<p>I have a similar application deployed and running in GCP Cloud Run, which is running fine without any issues, no such error there.</p>\n<p>Any thoughts on what could be the issue here with this application?</p>\n"},{"tags":["java","methods","object-construction"],"comments":[{"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"score":1,"creation_date":1701336502,"post_id":77577154,"comment_id":136763829,"body_markdown":"It is noteworthy that variable naming at runtime, specifically employing the identif approach, is not supported. However, a viable alternative involves utilizing a HashMap, where the user input serves as the key for dynamic variable association.","body":"It is noteworthy that variable naming at runtime, specifically employing the identif approach, is not supported. However, a viable alternative involves utilizing a HashMap, where the user input serves as the key for dynamic variable association."},{"owner":{"account_id":29352300,"reputation":61,"user_id":22489120,"display_name":"Jack M"},"score":0,"creation_date":1701337049,"post_id":77577154,"comment_id":136763940,"body_markdown":"@malz, thank you. Not extensively familiar with HashMaps yet but I will be sure to take a look.","body":"@malz, thank you. Not extensively familiar with HashMaps yet but I will be sure to take a look."}],"answers":[{"tags":[],"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701339172,"creation_date":1701339172,"answer_id":77577566,"question_id":77577154,"body_markdown":"Here is a method with HashMap, where the input name serves as the designated key for the HashMap.\r\n\r\n#### Code\r\n`Student.java`\r\n```java\r\nimport java.util.HashMap;\r\nimport java.util.InputMismatchException;\r\nimport java.util.Map;\r\nimport java.util.Scanner;\r\n\r\n/**\r\n * Represents a student with a name, age, and average test score.\r\n */\r\npublic class Student {\r\n\tprivate static Map&lt;String, Student&gt; students = new HashMap&lt;&gt;();\r\n\r\n\tprivate String name;\r\n\tprivate int age;\r\n\tprivate double avgTestScore;\r\n\r\n\t/**\r\n\t * Constructs a new Student object with the specified name, age, and average\r\n\t * test score.\r\n\t *\r\n\t * @param name         the name of the student\r\n\t * @param age          the age of the student\r\n\t * @param avgTestScore the average test score of the student\r\n\t */\r\n\tpublic Student(String name, int age, double avgTestScore) {\r\n\t\tthis.name = name;\r\n\t\tthis.age = age;\r\n\t\tthis.avgTestScore = avgTestScore;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Student [name=&quot; + name + &quot;, age=&quot; + age + &quot;, avgTestScore=&quot; + avgTestScore + &quot;]&quot;;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new Student object by taking input from the user.\r\n\t *\r\n\t * @return a new Student object created based on user input\r\n\t */\r\n\tpublic static Student create() {\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\r\n\t\tSystem.out.println(&quot;Please enter the student name:&quot;);\r\n\t\tString studentName = scanner.next();\r\n\r\n\t\tint studentAge = 0;\r\n\t\tboolean validAgeInput = false;\r\n\t\twhile (!validAgeInput) {\r\n\t\t\ttry {\r\n\t\t\t\tSystem.out.println(&quot;Please enter the student age:&quot;);\r\n\t\t\t\tstudentAge = scanner.nextInt();\r\n\t\t\t\tvalidAgeInput = true;\r\n\t\t\t} catch (InputMismatchException e) {\r\n\t\t\t\tSystem.out.println(&quot;Invalid input. Please enter a valid integer for age.&quot;);\r\n\t\t\t\tscanner.next();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdouble studentScore = 0.0;\r\n\t\tboolean validScoreInput = false;\r\n\t\twhile (!validScoreInput) {\r\n\t\t\ttry {\r\n\t\t\t\tSystem.out.println(&quot;Please enter the student score average (delimeter : &#39;,&#39;):&quot;);\r\n\t\t\t\tstudentScore = scanner.nextDouble();\r\n\t\t\t\tvalidScoreInput = true;\r\n\t\t\t} catch (InputMismatchException e) {\r\n\t\t\t\tSystem.out.println(&quot;Invalid input. Please enter a valid double for score.&quot;);\r\n\t\t\t\tscanner.next();\r\n\t\t\t}\r\n\t\t}\r\n\t\tscanner.close();\r\n\t\tStudent student = new Student(studentName, studentAge, studentScore);\r\n\r\n\t\treturn student;\r\n\t}\r\n\r\n\tpublic static Map&lt;String, Student&gt; getStudents() {\r\n\t\treturn students;\r\n\t}\r\n\r\n\t/**\r\n\t * Prints the details of the given student and adds it to the map of students.\r\n\t *\r\n\t * @param student the student to be added\r\n\t */\r\n\tpublic static void putStudent(Student student) {\r\n\t\tSystem.out.println(&quot;Name: &quot; + student.getName());\r\n\t\tSystem.out.println(&quot;Age: &quot; + student.getAge());\r\n\t\tSystem.out.println(&quot;Score: &quot; + student.getAvgTestScore());\r\n\r\n\t\tstudents.put(student.getName(), student);\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves a student from the map based on the given key.\r\n\t *\r\n\t * @param key the key to retrieve the student\r\n\t * @return the student associated with the given key\r\n\t */\r\n\tpublic static Student getStudent(String key) {\r\n\t\treturn students.get(key);\r\n\t}\r\n\r\n\tpublic static void setStudents(Map&lt;String, Student&gt; students) {\r\n\t\tStudent.students = students;\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic int getAge() {\r\n\t\treturn age;\r\n\t}\r\n\r\n\tpublic void setAge(int age) {\r\n\t\tthis.age = age;\r\n\t}\r\n\r\n\tpublic double getAvgTestScore() {\r\n\t\treturn avgTestScore;\r\n\t}\r\n\r\n\tpublic void setAvgTestScore(double avgTestScore) {\r\n\t\tthis.avgTestScore = avgTestScore;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n`Main.java`\r\n```\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tStudent student = Student.create();\r\n\t\tStudent.putStudent(student);\r\n\t\t\r\n\t\tSystem.out.println(Student.getStudent(&quot;Max&quot;));\r\n\t}\r\n}\r\n```\r\n\r\n#### Input / Output\r\n```\r\nPlease enter the student name:\r\nMax\r\nPlease enter the student age:\r\n24\r\nPlease enter the student score average (delimeter : &#39;,&#39;):\r\n1,2\r\nName: Max\r\nAge: 24\r\nScore: 1.2\r\nStudent [name=Max, age=24, avgTestScore=1.2]\r\n```","title":"Using a method to create objects","body":"<p>Here is a method with HashMap, where the input name serves as the designated key for the HashMap.</p>\n<h4>Code</h4>\n<p><code>Student.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.HashMap;\nimport java.util.InputMismatchException;\nimport java.util.Map;\nimport java.util.Scanner;\n\n/**\n * Represents a student with a name, age, and average test score.\n */\npublic class Student {\n    private static Map&lt;String, Student&gt; students = new HashMap&lt;&gt;();\n\n    private String name;\n    private int age;\n    private double avgTestScore;\n\n    /**\n     * Constructs a new Student object with the specified name, age, and average\n     * test score.\n     *\n     * @param name         the name of the student\n     * @param age          the age of the student\n     * @param avgTestScore the average test score of the student\n     */\n    public Student(String name, int age, double avgTestScore) {\n        this.name = name;\n        this.age = age;\n        this.avgTestScore = avgTestScore;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Student [name=&quot; + name + &quot;, age=&quot; + age + &quot;, avgTestScore=&quot; + avgTestScore + &quot;]&quot;;\n    }\n\n    /**\n     * Creates a new Student object by taking input from the user.\n     *\n     * @return a new Student object created based on user input\n     */\n    public static Student create() {\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(&quot;Please enter the student name:&quot;);\n        String studentName = scanner.next();\n\n        int studentAge = 0;\n        boolean validAgeInput = false;\n        while (!validAgeInput) {\n            try {\n                System.out.println(&quot;Please enter the student age:&quot;);\n                studentAge = scanner.nextInt();\n                validAgeInput = true;\n            } catch (InputMismatchException e) {\n                System.out.println(&quot;Invalid input. Please enter a valid integer for age.&quot;);\n                scanner.next();\n            }\n        }\n\n        double studentScore = 0.0;\n        boolean validScoreInput = false;\n        while (!validScoreInput) {\n            try {\n                System.out.println(&quot;Please enter the student score average (delimeter : ','):&quot;);\n                studentScore = scanner.nextDouble();\n                validScoreInput = true;\n            } catch (InputMismatchException e) {\n                System.out.println(&quot;Invalid input. Please enter a valid double for score.&quot;);\n                scanner.next();\n            }\n        }\n        scanner.close();\n        Student student = new Student(studentName, studentAge, studentScore);\n\n        return student;\n    }\n\n    public static Map&lt;String, Student&gt; getStudents() {\n        return students;\n    }\n\n    /**\n     * Prints the details of the given student and adds it to the map of students.\n     *\n     * @param student the student to be added\n     */\n    public static void putStudent(Student student) {\n        System.out.println(&quot;Name: &quot; + student.getName());\n        System.out.println(&quot;Age: &quot; + student.getAge());\n        System.out.println(&quot;Score: &quot; + student.getAvgTestScore());\n\n        students.put(student.getName(), student);\n    }\n\n    /**\n     * Retrieves a student from the map based on the given key.\n     *\n     * @param key the key to retrieve the student\n     * @return the student associated with the given key\n     */\n    public static Student getStudent(String key) {\n        return students.get(key);\n    }\n\n    public static void setStudents(Map&lt;String, Student&gt; students) {\n        Student.students = students;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public double getAvgTestScore() {\n        return avgTestScore;\n    }\n\n    public void setAvgTestScore(double avgTestScore) {\n        this.avgTestScore = avgTestScore;\n    }\n}\n\n</code></pre>\n<p><code>Main.java</code></p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Student student = Student.create();\n        Student.putStudent(student);\n        \n        System.out.println(Student.getStudent(&quot;Max&quot;));\n    }\n}\n</code></pre>\n<h4>Input / Output</h4>\n<pre><code>Please enter the student name:\nMax\nPlease enter the student age:\n24\nPlease enter the student score average (delimeter : ','):\n1,2\nName: Max\nAge: 24\nScore: 1.2\nStudent [name=Max, age=24, avgTestScore=1.2]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":29352300,"reputation":61,"user_id":22489120,"display_name":"Jack M"},"score":0,"creation_date":1701347715,"post_id":77577598,"comment_id":136765850,"body_markdown":"Thanks for those answers @Reveson. I will start using the right tools for the job!","body":"Thanks for those answers @Reveson. I will start using the right tools for the job!"}],"tags":[],"owner":{"account_id":4042366,"reputation":300,"user_id":3324794,"display_name":"Reveson"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1701339385,"creation_date":1701339385,"answer_id":77577598,"question_id":77577154,"body_markdown":"To clarify your query, it seems you are referring to &quot;variable name&quot; when mentioning &quot;object name&quot;.\r\nIn java you cannot create a dynamically calculated variable name. The question is why would you want to do so? If you need to store multiple objects and be able to access them by some value (let&#39;s say a string), then you may use a `Map&lt;&gt;`, like @Malz pointed out. For example:\r\n```java\r\nint identifier = 0;\r\nfinal String keyPrefix = &quot;Student&quot;;\r\n\r\nMap&lt;String, Student&gt; studentMap = new HashMap&lt;&gt;();\r\n\r\nstudentMap.put(keyPrefix + identifier++, createStudent());\r\n```\r\n\r\nThen, you can access the object by calling:\r\n```java\r\nstudentMap.get(&quot;Student0&quot;);\r\n```\r\n\r\nOf course if you don&#39;t need to use `String` as a key, then it is better to use just Integers to avoid string concatenation.\r\n\r\nNow, answering your questions directly:\r\n&gt; When a student object is created in my programme, what would the object name be?\r\n\r\nIf you don&#39;t override the `toString()` method, the object name would be `className@randomHash` if the Student is an outer class. So, for example, this is a sample string that would be printed if you used the `toString()` method on Student, or if you pass a student object to `System.out.println()` method (the `toString()` method is then called implicitely): `Student@378fd1ac`.\r\n\r\n&gt; If I create consecutive students using the method, does each previous student object get overwritten?\r\n\r\nYes, if you create a single variable, let&#39;s say `Student student`, and then assign different objects to it, then the previous object gets overwritten. If you don&#39;t have any pointer to that object (i.e., you cannot access it from any other variable), then the object will get automatically garbage collected after some time.\r\n```java\r\nStudent student = createStudent();\r\nstudent = createStudent(); //the first student object is not accessible anymore, so it is going to be garbage collected.\r\n```\r\n\r\n&gt; How do I allow the user to choose the name of the object.\r\n\r\nLet&#39;s clarify the terminology:\r\n```\r\nStudent student = new Student()\r\n/\\                    /\\\r\n||                    ||\r\nvariable              object\r\n```\r\n\r\nYou may have a single variable pointing to different objects over time. The variable has its name and it cannot be changed. The object, on the other hand, may have a name, as you call it. It is just a String that is returned by the `toString()` method. The method is called implicitly when you try to print the object to the console, concatenate a string to it etc. For example having such class:\r\n```java\r\nclass Student {\r\n    private final String name;\r\n\r\n    Student(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Student &quot; + name;\r\n    }\r\n}\r\n```\r\n\r\nThe `System.out.println(new Student(&quot;Mark&quot;))` would yield `Student mark`\r\n","title":"Using a method to create objects","body":"<p>To clarify your query, it seems you are referring to &quot;variable name&quot; when mentioning &quot;object name&quot;.\nIn java you cannot create a dynamically calculated variable name. The question is why would you want to do so? If you need to store multiple objects and be able to access them by some value (let's say a string), then you may use a <code>Map&lt;&gt;</code>, like @Malz pointed out. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int identifier = 0;\nfinal String keyPrefix = &quot;Student&quot;;\n\nMap&lt;String, Student&gt; studentMap = new HashMap&lt;&gt;();\n\nstudentMap.put(keyPrefix + identifier++, createStudent());\n</code></pre>\n<p>Then, you can access the object by calling:</p>\n<pre class=\"lang-java prettyprint-override\"><code>studentMap.get(&quot;Student0&quot;);\n</code></pre>\n<p>Of course if you don't need to use <code>String</code> as a key, then it is better to use just Integers to avoid string concatenation.</p>\n<p>Now, answering your questions directly:</p>\n<blockquote>\n<p>When a student object is created in my programme, what would the object name be?</p>\n</blockquote>\n<p>If you don't override the <code>toString()</code> method, the object name would be <code>className@randomHash</code> if the Student is an outer class. So, for example, this is a sample string that would be printed if you used the <code>toString()</code> method on Student, or if you pass a student object to <code>System.out.println()</code> method (the <code>toString()</code> method is then called implicitely): <code>Student@378fd1ac</code>.</p>\n<blockquote>\n<p>If I create consecutive students using the method, does each previous student object get overwritten?</p>\n</blockquote>\n<p>Yes, if you create a single variable, let's say <code>Student student</code>, and then assign different objects to it, then the previous object gets overwritten. If you don't have any pointer to that object (i.e., you cannot access it from any other variable), then the object will get automatically garbage collected after some time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Student student = createStudent();\nstudent = createStudent(); //the first student object is not accessible anymore, so it is going to be garbage collected.\n</code></pre>\n<blockquote>\n<p>How do I allow the user to choose the name of the object.</p>\n</blockquote>\n<p>Let's clarify the terminology:</p>\n<pre><code>Student student = new Student()\n/\\                    /\\\n||                    ||\nvariable              object\n</code></pre>\n<p>You may have a single variable pointing to different objects over time. The variable has its name and it cannot be changed. The object, on the other hand, may have a name, as you call it. It is just a String that is returned by the <code>toString()</code> method. The method is called implicitly when you try to print the object to the console, concatenate a string to it etc. For example having such class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Student {\n    private final String name;\n\n    Student(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Student &quot; + name;\n    }\n}\n</code></pre>\n<p>The <code>System.out.println(new Student(&quot;Mark&quot;))</code> would yield <code>Student mark</code></p>\n"}],"owner":{"account_id":29352300,"reputation":61,"user_id":22489120,"display_name":"Jack M"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77577598,"answer_count":2,"score":1,"last_activity_date":1701341996,"creation_date":1701335357,"question_id":77577154,"body_markdown":"I have a question regarding creating object using a method, please see my code below:\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Scanner;\r\n\r\npublic class Student {\r\n    private String name;\r\n    private int age;\r\n    private double avgTestScore;\r\n\r\n    // Getters\r\n    public String getName(){ return this.name; }\r\n    public int getAge(){ return this.age; }\r\n    public double getAvgTestScore(){ return this.avgTestScore; }\r\n\r\n    // Setters\r\n    public void setName(){ this.name = &quot; &quot;; }\r\n    public void setAge(){ this.age = 0; }\r\n    public void setAvgTestScore(){ this.avgTestScore = 0.0; }\r\n\r\n    //Constructor\r\n    public Student(String name, int age, double score){\r\n        this.name = name;\r\n        this.age = age;\r\n        this.avgTestScore = score;\r\n    }\r\n\r\n    public static Student createStudent(){\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Please enter the student name&quot;);\r\n        String studentName = scanner.next();\r\n\r\n        System.out.println(&quot;Please enter the student age&quot;);\r\n        int studentAge = scanner.nextInt();\r\n\r\n        System.out.println(&quot;Please enter the student score average&quot;);\r\n        double studentScore = scanner.nextDouble();\r\n        \r\n        Student student = new Student(studentName, studentAge, studentScore);\r\n        return student;\r\n    }\r\n\r\n    public static void addStudent(ArrayList&lt;Student&gt; list, Student student){\r\n        list.add(student);\r\n        for (Student i : list){\r\n            System.out.println(i.name);\r\n            System.out.println(i.age);\r\n            System.out.println(i.avgTestScore);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args){\r\n        ArrayList&lt;Student&gt; studentArrayList = new ArrayList&lt;&gt;();\r\n        Student.addStudent(studentArrayList, createStudent());\r\n        Student.addStudent(studentArrayList, createStudent());\r\n\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nI tried to create an int variable that would increase everytime the method is called and use that as part of the object name, for example: \r\n\r\n```java\r\npublic static Student createStudent(){\r\n        **int identif = 0;**\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Please enter the student name&quot;);\r\n        String studentName = scanner.next();\r\n\r\n        System.out.println(&quot;Please enter the student age&quot;);\r\n        int studentAge = scanner.nextInt();\r\n\r\n        System.out.println(&quot;Please enter the student score average&quot;);\r\n        double studentScore = scanner.nextDouble();\r\n        \r\n        Student student+**identif** = new Student(studentName, studentAge, studentScore);\r\n        identif++;\r\n        return student;\r\n    }\r\n```\r\n\r\nAfter I tried this I realised how stupid I was being. After, I tried to allow the user input a String using the scanner and use that as object name, also didn&#39;t work.\r\n\r\nMy questions: \r\n- When a student object is created in my programme, what would the object name be?\r\n- If I create consecutive students using the method, does each previous student object get overwritten?\r\n- How do I allow the user to choose the name of the object.\r\n\r\n\r\nTIA &#128522;","title":"Using a method to create objects","body":"<p>I have a question regarding creating object using a method, please see my code below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Scanner;\n\npublic class Student {\n    private String name;\n    private int age;\n    private double avgTestScore;\n\n    // Getters\n    public String getName(){ return this.name; }\n    public int getAge(){ return this.age; }\n    public double getAvgTestScore(){ return this.avgTestScore; }\n\n    // Setters\n    public void setName(){ this.name = &quot; &quot;; }\n    public void setAge(){ this.age = 0; }\n    public void setAvgTestScore(){ this.avgTestScore = 0.0; }\n\n    //Constructor\n    public Student(String name, int age, double score){\n        this.name = name;\n        this.age = age;\n        this.avgTestScore = score;\n    }\n\n    public static Student createStudent(){\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(&quot;Please enter the student name&quot;);\n        String studentName = scanner.next();\n\n        System.out.println(&quot;Please enter the student age&quot;);\n        int studentAge = scanner.nextInt();\n\n        System.out.println(&quot;Please enter the student score average&quot;);\n        double studentScore = scanner.nextDouble();\n        \n        Student student = new Student(studentName, studentAge, studentScore);\n        return student;\n    }\n\n    public static void addStudent(ArrayList&lt;Student&gt; list, Student student){\n        list.add(student);\n        for (Student i : list){\n            System.out.println(i.name);\n            System.out.println(i.age);\n            System.out.println(i.avgTestScore);\n        }\n    }\n\n    public static void main(String[] args){\n        ArrayList&lt;Student&gt; studentArrayList = new ArrayList&lt;&gt;();\n        Student.addStudent(studentArrayList, createStudent());\n        Student.addStudent(studentArrayList, createStudent());\n\n\n\n    }\n}\n</code></pre>\n<p>I tried to create an int variable that would increase everytime the method is called and use that as part of the object name, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Student createStudent(){\n        **int identif = 0;**\n\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(&quot;Please enter the student name&quot;);\n        String studentName = scanner.next();\n\n        System.out.println(&quot;Please enter the student age&quot;);\n        int studentAge = scanner.nextInt();\n\n        System.out.println(&quot;Please enter the student score average&quot;);\n        double studentScore = scanner.nextDouble();\n        \n        Student student+**identif** = new Student(studentName, studentAge, studentScore);\n        identif++;\n        return student;\n    }\n</code></pre>\n<p>After I tried this I realised how stupid I was being. After, I tried to allow the user input a String using the scanner and use that as object name, also didn't work.</p>\n<p>My questions:</p>\n<ul>\n<li>When a student object is created in my programme, what would the object name be?</li>\n<li>If I create consecutive students using the method, does each previous student object get overwritten?</li>\n<li>How do I allow the user to choose the name of the object.</li>\n</ul>\n<p>TIA </p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":1,"creation_date":1553008748,"post_id":55244238,"comment_id":97221751,"body_markdown":"show the validation part on `POJO` and request body","body":"show the validation part on <code>POJO</code> and request body"},{"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"score":0,"creation_date":1553009026,"post_id":55244238,"comment_id":97221925,"body_markdown":"@Deadpool: Added the requested parts. I ommited general stuff like getters / setters to limit the code snippits.","body":"@Deadpool: Added the requested parts. I ommited general stuff like getters / setters to limit the code snippits."},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1553009111,"post_id":55244238,"comment_id":97221997,"body_markdown":"for `GET` request you cannot have body  and change the request to `POST`","body":"for <code>GET</code> request you cannot have body  and change the request to <code>POST</code>"},{"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"score":0,"creation_date":1553009209,"post_id":55244238,"comment_id":97222060,"body_markdown":"It&#39;s not a body. It&#39;s request parameters mapped to the FundsConfirmationRequest pojo. I.E. http://localhost:8080/accounts/1234/funds-confirmations?amount=100.00&amp;ccy=EUR","body":"It&#39;s not a body. It&#39;s request parameters mapped to the FundsConfirmationRequest pojo. I.E. <a href=\"http://localhost:8080/accounts/1234/funds-confirmations?amount=100.00&amp;ccy=EUR\" rel=\"nofollow noreferrer\">localhost:8080/accounts/1234/&hellip;</a>"},{"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"score":0,"creation_date":1553009299,"post_id":55244238,"comment_id":97222122,"body_markdown":"Also, it works. the @Valid annotation is just never triggering my custom MethodArgumentNotValidException which I need for the custom error body.","body":"Also, it works. the @Valid annotation is just never triggering my custom MethodArgumentNotValidException which I need for the custom error body."},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1553009831,"post_id":55244238,"comment_id":97222478,"body_markdown":"so if i understand you are exception exception for `ccy=EUR`, and does the same exception `MethodArgumentNotValidException` is thrown?","body":"so if i understand you are exception exception for <code>ccy=EUR</code>, and does the same exception <code>MethodArgumentNotValidException</code> is thrown?"},{"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"score":0,"creation_date":1553009946,"post_id":55244238,"comment_id":97222568,"body_markdown":"At the moment when queried with anything not confirming the constraints in the POJO I get a &#39;400&#39;. However I require sending back a customized responseBody. \nMy overrriden exceptionhandler in @RestControllerAdvice is never invoked.","body":"At the moment when queried with anything not confirming the constraints in the POJO I get a &#39;400&#39;. However I require sending back a customized responseBody.  My overrriden exceptionhandler in @RestControllerAdvice is never invoked."},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":1,"creation_date":1553009989,"post_id":55244238,"comment_id":97222605,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/190312/discussion-between-deadpool-and-tombr).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/190312/discussion-between-deadpool-and-tombr\">continue this discussion in chat</a>."},{"owner":{"account_id":2197089,"reputation":118,"user_id":1942454,"display_name":"Kelvin Yong"},"score":0,"creation_date":1573624217,"post_id":55244238,"comment_id":103937598,"body_markdown":"How about overriding `handleBindException`?","body":"How about overriding <code>handleBindException</code>?"}],"answers":[{"tags":[],"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1553014234,"creation_date":1553014234,"answer_id":55246204,"question_id":55244238,"body_markdown":"Apparently this is happening due to some Spring &#39;magic&#39;. This is touching various concepts I was not very familiar with because the framework &#39;hides&#39; this complexity away. \r\n\r\nIn my example I have a &#39;GET&#39; request for which I map the pathParams/requestParams to a complex object. As an extra I want to do validation on these Params. \r\n\r\nHowever due to how &#39;data binding to complex objects&#39; works in Spring there is no annotation required. As a result this is &#39;Data Binding&#39; and not &#39;Method Mapping&#39;. The resulting exception being triggered by this specific case is not MethodArgumentNotValid but it is a  BindException.\r\n\r\nHow exactly Spring maps data to objects in a REST call is dependent on various things like ContentType, Annotations Used, ... ","title":"How to invoke an overridden handleMethodArgumentNotValid in a SpringBoot REST Api?","body":"<p>Apparently this is happening due to some Spring 'magic'. This is touching various concepts I was not very familiar with because the framework 'hides' this complexity away. </p>\n\n<p>In my example I have a 'GET' request for which I map the pathParams/requestParams to a complex object. As an extra I want to do validation on these Params. </p>\n\n<p>However due to how 'data binding to complex objects' works in Spring there is no annotation required. As a result this is 'Data Binding' and not 'Method Mapping'. The resulting exception being triggered by this specific case is not MethodArgumentNotValid but it is a  BindException.</p>\n\n<p>How exactly Spring maps data to objects in a REST call is dependent on various things like ContentType, Annotations Used, ... </p>\n"},{"tags":[],"owner":{"account_id":1051982,"reputation":187,"user_id":1055679,"display_name":"Sudhirkumar Murkute"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1578898426,"creation_date":1578898426,"answer_id":59711757,"question_id":55244238,"body_markdown":"I think you need to add `@Order(Ordered.HIGHEST_PRECEDENCE)` annotation with `@ControllerAdvice`\r\n\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    @RestControllerAdvice\r\n    public class FundsConfirmationExceptionHandler extends ResponseEntityExceptionHandler","title":"How to invoke an overridden handleMethodArgumentNotValid in a SpringBoot REST Api?","body":"<p>I think you need to add <code>@Order(Ordered.HIGHEST_PRECEDENCE)</code> annotation with <code>@ControllerAdvice</code></p>\n\n<pre><code>@Order(Ordered.HIGHEST_PRECEDENCE)\n@RestControllerAdvice\npublic class FundsConfirmationExceptionHandler extends ResponseEntityExceptionHandler\n</code></pre>\n"}],"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2020,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":55246204,"answer_count":2,"score":1,"last_activity_date":1701341681,"creation_date":1553008235,"question_id":55244238,"body_markdown":"I am struggling to invoke the overridden MethodArgumentNotValidException  in my spring boot REST api. My other exception handlers work like a charm, however overriding the standard handleMethodArgumentNotValid is never getting triggered? \r\n\r\nAnyone got a clue what I missed?\r\n\r\nPojo\r\n\r\n    public class FundsConfirmationRequest {\r\n      @NotNull(message = &quot;Required Parameter: Account Identifier.&quot;)\r\n      private String accountId;\r\n      @NotNull(message = &quot;Required Parameter: Transaction Amount.&quot;)\r\n      @Digits(integer=12, fraction=5, message = &quot;Fractions limited to 5 digits.&quot;)\r\n      private BigDecimal amount;\r\n      @NotNull(message = &quot;Required Paramater: Currency Code.&quot;)\r\n      @Size(min = 3, max = 3, message = &quot;Use ISO4217 Currency Code standard.&quot;)\r\n      private String ccy;\r\n      private String cardNumber;\r\n      private String payee;\r\n    \r\n       public FundsConfirmationRequest() { } \r\n    }\r\n\r\nController-Method: \r\n\r\n    @RestController(&quot;fundsConfirmationController&quot;)\r\n    @RequestMapping(\r\n            value=&quot;/accounts/{accountId}/funds-confirmations&quot;\r\n    )\r\n    public class FundsConfirmationController implements FundsConfirmationControllerI {\r\n\r\n\t\t@GetMapping(\r\n                headers = {&quot;X-CAF-MSGID&quot;, &quot;X-AccessToken&quot;},\r\n                consumes = MediaType.APPLICATION_JSON_VALUE,\r\n                produces = MediaType.APPLICATION_JSON_VALUE\r\n        )\r\n        public ResponseEntity&lt;?&gt; fundsConfirmation(@RequestHeader(value=&quot;X-CAF-MSGID&quot;) String messageId,\r\n                                                   @RequestHeader(value=&quot;X-AccessToken&quot;) String accessToken,\r\n                                                   @Valid FundsConfirmationRequest requestParams) throws FIClientException, FIParseException {\r\n\r\nException handler via @RestControllerAdvice\r\n\r\n    @RestControllerAdvice\r\n    public class FundsConfirmationExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n\t\t//Existing Exception Handlers\r\n\t\t@Override\r\n\t\tpublic ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\r\n\t\t\tSystem.out.println(&quot;Custom handleMethodArgumentNotValid method&quot;);\r\n\t\t\tFundsConfirmationError responseBody = new FundsConfirmationError(HttpStatus.BAD_REQUEST.toString(), &quot;Input Validation Failed. Parameter.: &quot; + ex.getParameter().getParameterName() + &quot; Value.: &quot; + ex.getParameter().getParameter().toString() + &quot; &quot; + ex.getMessage(), Severity.ERROR.toString(), Sources.LOCAL_CAF_API.toString() );\r\n\t\t\treturn ResponseEntity\r\n\t\t\t\t\t.status(HttpStatus.BAD_REQUEST)\r\n\t\t\t\t\t.header(&quot;X-CAF-ResponseID&quot;, request.getHeader(&quot;X-CAF-MSGID&quot;))\r\n\t\t\t\t\t.body(responseBody);\r\n\t\t}\r\n\r\n","title":"How to invoke an overridden handleMethodArgumentNotValid in a SpringBoot REST Api?","body":"<p>I am struggling to invoke the overridden MethodArgumentNotValidException  in my spring boot REST api. My other exception handlers work like a charm, however overriding the standard handleMethodArgumentNotValid is never getting triggered?</p>\n<p>Anyone got a clue what I missed?</p>\n<p>Pojo</p>\n<pre><code>public class FundsConfirmationRequest {\n  @NotNull(message = &quot;Required Parameter: Account Identifier.&quot;)\n  private String accountId;\n  @NotNull(message = &quot;Required Parameter: Transaction Amount.&quot;)\n  @Digits(integer=12, fraction=5, message = &quot;Fractions limited to 5 digits.&quot;)\n  private BigDecimal amount;\n  @NotNull(message = &quot;Required Paramater: Currency Code.&quot;)\n  @Size(min = 3, max = 3, message = &quot;Use ISO4217 Currency Code standard.&quot;)\n  private String ccy;\n  private String cardNumber;\n  private String payee;\n\n   public FundsConfirmationRequest() { } \n}\n</code></pre>\n<p>Controller-Method:</p>\n<pre><code>@RestController(&quot;fundsConfirmationController&quot;)\n@RequestMapping(\n        value=&quot;/accounts/{accountId}/funds-confirmations&quot;\n)\npublic class FundsConfirmationController implements FundsConfirmationControllerI {\n\n    @GetMapping(\n            headers = {&quot;X-CAF-MSGID&quot;, &quot;X-AccessToken&quot;},\n            consumes = MediaType.APPLICATION_JSON_VALUE,\n            produces = MediaType.APPLICATION_JSON_VALUE\n    )\n    public ResponseEntity&lt;?&gt; fundsConfirmation(@RequestHeader(value=&quot;X-CAF-MSGID&quot;) String messageId,\n                                               @RequestHeader(value=&quot;X-AccessToken&quot;) String accessToken,\n                                               @Valid FundsConfirmationRequest requestParams) throws FIClientException, FIParseException {\n</code></pre>\n<p>Exception handler via @RestControllerAdvice</p>\n<pre><code>@RestControllerAdvice\npublic class FundsConfirmationExceptionHandler extends ResponseEntityExceptionHandler {\n\n    //Existing Exception Handlers\n    @Override\n    public ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\n        System.out.println(&quot;Custom handleMethodArgumentNotValid method&quot;);\n        FundsConfirmationError responseBody = new FundsConfirmationError(HttpStatus.BAD_REQUEST.toString(), &quot;Input Validation Failed. Parameter.: &quot; + ex.getParameter().getParameterName() + &quot; Value.: &quot; + ex.getParameter().getParameter().toString() + &quot; &quot; + ex.getMessage(), Severity.ERROR.toString(), Sources.LOCAL_CAF_API.toString() );\n        return ResponseEntity\n                .status(HttpStatus.BAD_REQUEST)\n                .header(&quot;X-CAF-ResponseID&quot;, request.getHeader(&quot;X-CAF-MSGID&quot;))\n                .body(responseBody);\n    }\n</code></pre>\n"},{"tags":["java","angular","spring","spring-boot","cors"],"answers":[{"tags":[],"owner":{"account_id":20607679,"reputation":36,"user_id":15127525,"display_name":"Binita"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701341574,"creation_date":1701339771,"answer_id":77577633,"question_id":77574822,"body_markdown":"There is a problem in the code.\r\n\r\nconfiguration.setAllowedOriginPatterns(List.of(&quot;*&quot;));\r\n\r\nHere, you need to specify the url to give instruction to CORS.\r\n\r\nconfiguration.setAllowedOriginPatterns(List.of(&quot;http://localhost:4200*&quot;));\r\n\r\nI hope this resolves your problem.","title":"Can&#39;t resolve CORS Error in Spring Boot/Angular app","body":"<p>There is a problem in the code.</p>\n<p>configuration.setAllowedOriginPatterns(List.of(&quot;*&quot;));</p>\n<p>Here, you need to specify the url to give instruction to CORS.</p>\n<p>configuration.setAllowedOriginPatterns(List.of(&quot;http://localhost:4200*&quot;));</p>\n<p>I hope this resolves your problem.</p>\n"}],"owner":{"account_id":30026348,"reputation":1,"user_id":23010465,"display_name":"Alexander Kovgunov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701341574,"creation_date":1701296970,"question_id":77574822,"body_markdown":"Error message:\r\n\r\n[![error][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/50emd.png\r\n\r\n\r\nSecurity Config has @CrossOrigin \r\n\r\n`http.cors(cors-&gt;cors.configurationSource(apiConfigurationSource()))`\r\n\r\n```\r\n    @Bean\r\n    CorsConfigurationSource apiConfigurationSource() {\r\n        CorsConfiguration configuration=new CorsConfiguration();\r\n          configuration.setAllowedOriginPatterns(List.of(&quot;*&quot;));\r\n        configuration.setAllowedMethods(List.of(&quot;GET&quot;,&quot;POST&quot;,&quot;PUT&quot;,&quot;DELETE&quot;,&quot;HEADER&quot;));\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n```","title":"Can&#39;t resolve CORS Error in Spring Boot/Angular app","body":"<p>Error message:</p>\n<p><a href=\"https://i.stack.imgur.com/50emd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/50emd.png\" alt=\"error\" /></a></p>\n<p>Security Config has @CrossOrigin</p>\n<p><code>http.cors(cors-&gt;cors.configurationSource(apiConfigurationSource()))</code></p>\n<pre><code>    @Bean\n    CorsConfigurationSource apiConfigurationSource() {\n        CorsConfiguration configuration=new CorsConfiguration();\n          configuration.setAllowedOriginPatterns(List.of(&quot;*&quot;));\n        configuration.setAllowedMethods(List.of(&quot;GET&quot;,&quot;POST&quot;,&quot;PUT&quot;,&quot;DELETE&quot;,&quot;HEADER&quot;));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n</code></pre>\n"},{"tags":["java","java-time","datetimeformatter"],"answers":[{"comments":[{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1701341701,"post_id":77577830,"comment_id":136764752,"body_markdown":"As you said I have already made a formatter and also as you I am using it. What&#39;s your solution for my problem I don&#39;t get it?","body":"As you said I have already made a formatter and also as you I am using it. What&#39;s your solution for my problem I don&#39;t get it?"},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1701341957,"post_id":77577830,"comment_id":136764807,"body_markdown":"ldt.format(formatter) return String, my ArrayList&lt;LocalDateTime&gt; values.","body":"ldt.format(formatter) return String, my ArrayList&lt;LocalDateTime&gt; values."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1701342568,"post_id":77577830,"comment_id":136764901,"body_markdown":"@ChrisDamianidis: A `LocalDateTime` value doesn&#39;t have any notion of a formatter as part of its state, any more than an `int` knows whether it was parsed from hex or decimal for example. The value is just the value. You appear to be looking at a string representation of that value and expecting it to be in a particular format - if you want a particular format, you need to call `format` on the `LocalDateTime` and pass in that formatter. To put it another way: the values in your `ArrayList` are fine. You&#39;re just misinterpreting whatever is displaying them to you.","body":"@ChrisDamianidis: A <code>LocalDateTime</code> value doesn&#39;t have any notion of a formatter as part of its state, any more than an <code>int</code> knows whether it was parsed from hex or decimal for example. The value is just the value. You appear to be looking at a string representation of that value and expecting it to be in a particular format - if you want a particular format, you need to call <code>format</code> on the <code>LocalDateTime</code> and pass in that formatter. To put it another way: the values in your <code>ArrayList</code> are fine. You&#39;re just misinterpreting whatever is displaying them to you."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1701342669,"post_id":77577830,"comment_id":136764919,"body_markdown":"@ChrisDamianidis: If you wrote `ArrayList&lt;Integer&gt; integers = new ArrayList&lt;&gt;(); integers.add(0x10);` and then displayed the `ArrayList` and saw the value 16, would you be confused? Because that&#39;s *exactly* equivalent to what&#39;s happening here.","body":"@ChrisDamianidis: If you wrote <code>ArrayList&lt;Integer&gt; integers = new ArrayList&lt;&gt;(); integers.add(0x10);</code> and then displayed the <code>ArrayList</code> and saw the value 16, would you be confused? Because that&#39;s <i>exactly</i> equivalent to what&#39;s happening here."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1701342956,"post_id":77577830,"comment_id":136764962,"body_markdown":"@ChrisDamianidis: No, I&#39;ve read your question carefully. I think you need to read my *answer and comments* more carefully. Nothing is going wrong in your parsing code. The seconds *aren&#39;t* being &quot;lost&quot; - you&#39;re just misinterpreting however you&#39;re displaying the results in the list. What you&#39;re seeing (and you haven&#39;t told us how you&#39;re displaying the list at all - in the debugger? in an app?) is the result of converting those LocalDateTime values *back* into strings, and I suspect that&#39;s using the default format, which *won&#39;t format a seconds value of 0*.","body":"@ChrisDamianidis: No, I&#39;ve read your question carefully. I think you need to read my <i>answer and comments</i> more carefully. Nothing is going wrong in your parsing code. The seconds <i>aren&#39;t</i> being &quot;lost&quot; - you&#39;re just misinterpreting however you&#39;re displaying the results in the list. What you&#39;re seeing (and you haven&#39;t told us how you&#39;re displaying the list at all - in the debugger? in an app?) is the result of converting those LocalDateTime values <i>back</i> into strings, and I suspect that&#39;s using the default format, which <i>won&#39;t format a seconds value of 0</i>."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1701343089,"post_id":77577830,"comment_id":136764988,"body_markdown":"@ChrisDamianidis: If you think the problem is in the parsing, then look at the sample code I&#39;ve written, or even change your own code to hard-code the LocalDateTime creation, so that there&#39;s no parsing involved at all. You&#39;ll still get the same result, because *the problem isn&#39;t in the parsing*. The problem is in your expectations of however you&#39;re displaying the values in the list.","body":"@ChrisDamianidis: If you think the problem is in the parsing, then look at the sample code I&#39;ve written, or even change your own code to hard-code the LocalDateTime creation, so that there&#39;s no parsing involved at all. You&#39;ll still get the same result, because <i>the problem isn&#39;t in the parsing</i>. The problem is in your expectations of however you&#39;re displaying the values in the list."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1701344338,"post_id":77577830,"comment_id":136765212,"body_markdown":"@ChrisDamianidis: I&#39;m afraid I have no idea what you mean by &quot;I use the ArrayList later to setTime of an object so I have then to parse the given value by String with the correct formatter&quot; - but it sounds like you missed a lot of context from your question. Please read https://jonskeet.uk/links/stack-hints for next time. (I&#39;m not sure whether you meant that *my* answer here could be simpler, or whether some change you needed to make in your code could be simpler...)","body":"@ChrisDamianidis: I&#39;m afraid I have no idea what you mean by &quot;I use the ArrayList later to setTime of an object so I have then to parse the given value by String with the correct formatter&quot; - but it sounds like you missed a lot of context from your question. Please read <a href=\"https://jonskeet.uk/links/stack-hints\" rel=\"nofollow noreferrer\">jonskeet.uk/links/stack-hints</a> for next time. (I&#39;m not sure whether you meant that <i>my</i> answer here could be simpler, or whether some change you needed to make in your code could be simpler...)"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":7,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1701341544,"creation_date":1701341544,"answer_id":77577830,"question_id":77577779,"body_markdown":"&gt; The problem is that when the values are converted from String to LocalDateTime the seconds doesnt appear in the format like this : 2023-09-14T13:00 .&quot;\r\n\r\nThat&#39;s talking about a conversion back to string, which would use `LocalDateTime.toString()` by default - and that omits the seconds when the value is 0, [as documented](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDateTime.html#toString()). In other words, you can see the same behavior with\r\n\r\n```java\r\nLocalDateTime ldt = LocalDateTime.of(2023, 9, 14, 13, 0, 0);\r\nSystem.out.println(ldt); // Prints 2023-09-14T13:00\r\n```\r\n\r\nIn other words, nothing is going wrong - you&#39;re just misinterpreting however you&#39;re looking at the values in the list. If you need the values to be formatted in a specific way, you&#39;ll need to specify a `DateTimeFormatter` (such as the one you&#39;ve already created) and call `ldt.format(formatter)`.","title":"String to localdatetime doesnt retunr seconds &quot;00&quot;","body":"<blockquote>\n<p>The problem is that when the values are converted from String to LocalDateTime the seconds doesnt appear in the format like this : 2023-09-14T13:00 .&quot;</p>\n</blockquote>\n<p>That's talking about a conversion back to string, which would use <code>LocalDateTime.toString()</code> by default - and that omits the seconds when the value is 0, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDateTime.html#toString()\" rel=\"nofollow noreferrer\">as documented</a>. In other words, you can see the same behavior with</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime ldt = LocalDateTime.of(2023, 9, 14, 13, 0, 0);\nSystem.out.println(ldt); // Prints 2023-09-14T13:00\n</code></pre>\n<p>In other words, nothing is going wrong - you're just misinterpreting however you're looking at the values in the list. If you need the values to be formatted in a specific way, you'll need to specify a <code>DateTimeFormatter</code> (such as the one you've already created) and call <code>ldt.format(formatter)</code>.</p>\n"}],"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77577830,"answer_count":1,"score":0,"last_activity_date":1701341544,"creation_date":1701341132,"question_id":77577779,"body_markdown":"I have a method that I take a startTime String and a endTime String convert to LocalDateTime and compare the hours difference between and generate the values in a ArrayList&lt;LocalDateTime&gt;. For example if I have startTime: &quot;2023-09-14T12:00:00&quot;,\r\n\t\t\tendTime: &quot;2023-09-14T14:00:00&quot;, the method will find the value 2023-09-14T13:00:00 and it will add it in the ArrayList. The problem is that when the values are converted from String to LocalDateTime the seconds doesnt appear in the format like this : 2023-09-14T13:00 .\r\n\r\n   \r\n\r\n     public static ArrayList&lt;LocalDateTime&gt; calculateHours(String startTime, tring endTime) {\r\n            \r\n    \r\n            // Parse the combined strings to LocalDateTime\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;);\r\n            LocalDateTime startDateTime = LocalDateTime.parse(startTime,formatter);\r\n            LocalDateTime endDateTime = LocalDateTime.parse(endTime,formatter);\r\n    \r\n            // Calculate the difference in hours\r\n            long hoursDifference = java.time.Duration.between(startDateTime, endDateTime).toHours();\r\n    \r\n            // Create an ArrayList to store LocalDateTime objects\r\n            ArrayList&lt;LocalDateTime&gt; hoursList = new ArrayList&lt;&gt;();\r\n    \r\n            // Add each hour to the ArrayList with seconds included\r\n            for (long i = 0; i &lt; hoursDifference; i++) {\r\n                LocalDateTime currentHour = startDateTime.plusHours(i);\r\n                hoursList.add(currentHour);\r\n            }\r\n            return hoursList;\r\n        }","title":"String to localdatetime doesnt retunr seconds &quot;00&quot;","body":"<p>I have a method that I take a startTime String and a endTime String convert to LocalDateTime and compare the hours difference between and generate the values in a ArrayList. For example if I have startTime: &quot;2023-09-14T12:00:00&quot;,\nendTime: &quot;2023-09-14T14:00:00&quot;, the method will find the value 2023-09-14T13:00:00 and it will add it in the ArrayList. The problem is that when the values are converted from String to LocalDateTime the seconds doesnt appear in the format like this : 2023-09-14T13:00 .</p>\n<pre><code> public static ArrayList&lt;LocalDateTime&gt; calculateHours(String startTime, tring endTime) {\n        \n\n        // Parse the combined strings to LocalDateTime\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss&quot;);\n        LocalDateTime startDateTime = LocalDateTime.parse(startTime,formatter);\n        LocalDateTime endDateTime = LocalDateTime.parse(endTime,formatter);\n\n        // Calculate the difference in hours\n        long hoursDifference = java.time.Duration.between(startDateTime, endDateTime).toHours();\n\n        // Create an ArrayList to store LocalDateTime objects\n        ArrayList&lt;LocalDateTime&gt; hoursList = new ArrayList&lt;&gt;();\n\n        // Add each hour to the ArrayList with seconds included\n        for (long i = 0; i &lt; hoursDifference; i++) {\n            LocalDateTime currentHour = startDateTime.plusHours(i);\n            hoursList.add(currentHour);\n        }\n        return hoursList;\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","asynchronous","file-upload"],"owner":{"account_id":30022217,"reputation":1,"user_id":23007333,"display_name":"Tjonna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701341464,"creation_date":1701272044,"question_id":77572541,"body_markdown":"this is my first ever post on StackOverflow, so I hope I&#39;m doing it correctly. Thanks in advance!\r\n\r\nI&#39;m refactoring a file uploading function to an Async file uploading function. \r\nI am able to create a traileroffer,then with another POST request I can upload images to it. If I restart the application everything is uploading successfully 100% of the time. After any type of request, the image uploading fails, sometimes a couple will go through successfully. \r\n\r\nThe main issue is, it seems that the files which are uploaded are empty / the file size is &lt;= 0. I&#39;m not sure what&#39;s going wrong but before I refactor my entire (working) function I&#39;d like to check if this may be a project based thing or if it&#39;s more complicated than that.\r\n\r\nThe reason I think my post differentiates others is that my function/code is probably fine, but it may be something in my project setup instead. I hope someone experienced something similar like me and knows what may be the cause. Though, it may be my code/function because before I refactored to Asynchronous, it did work fine.\r\n```\r\n @PostMapping(path = &quot;/{trailerId}/images&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\r\n    @ResponseStatus(HttpStatus.NO_CONTENT)\r\n    public ResponseEntity&lt;Void&gt; addTrailerImages(@PathVariable UUID trailerId, @Valid @ModelAttribute SaveImagesDTO saveImagesDTO) {\r\n        TrailerOffer trailer = trailerOfferService.getTrailerOffer(trailerId);\r\n MultipartFile[] coverImages = saveImagesDTO.getCoverImage();\r\n        MultipartFile[] images = saveImagesDTO.getImages();\r\n\r\n        MultipartFile[] combinedImagesArray = new MultipartFile[coverImages.length + images.length];\r\n\r\n        System.arraycopy(coverImages, 0, combinedImagesArray, 0, coverImages.length);\r\n        System.arraycopy(images, 0, combinedImagesArray, coverImages.length, images.length);\r\n\r\n        CompletableFuture&lt;ImageUploadResult&gt; imagesFuture = imageService.uploadImagesAsync(combinedImagesArray,&quot;trailer&quot;, trailer);\r\n\r\n        imagesFuture.handle((result, ex) -&gt; {\r\n            if (ex != null) {\r\n                System.out.println(&quot;Exception in CompletableFuture: &quot; +ex);\r\n            } else {\r\n                Image coverImage = result.getCoverImage();\r\n                List&lt;Image&gt; addedImages = result.getAddedImages();\r\n\r\n                trailer.setCoverImage(coverImage);\r\n                trailerOfferService.saveTrailerOffer(trailer);\r\n            }\r\n\r\n            return result;\r\n        });\r\n\r\n        return ResponseEntity.accepted().build();\r\n    }\r\n```\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class SaveImagesDTO {\r\n    private MultipartFile[] coverImage;\r\n    private MultipartFile[] images;\r\n}\r\n\r\n```\r\n```\r\n @Async\r\n    public CompletableFuture&lt;ImageUploadResult&gt; uploadImagesAsync(MultipartFile[] files, String directory, TrailerOffer trailer) {\r\n        try {\r\n            if (files == null || files.length == 0) {\r\n                System.out.println(&quot;No files received for trailer ID: &quot; + trailer.getId());\r\n                return CompletableFuture.failedFuture(new IllegalArgumentException(&quot;No files received&quot;));\r\n            }\r\n\r\n            for(MultipartFile file : files){\r\n                if(file.isEmpty() || file.getSize() &lt;= 0){\r\n                    System.out.println(&quot;IMAGESERVICE - FAILED files are empty.&quot;);\r\n                }\r\n            }\r\n\r\n            System.out.println(&quot;Received: &quot; + files.length + &quot; images &quot; + &quot; for trailer id: &quot; + trailer.getId());\r\n\r\n            List&lt;Image&gt; images = uploadImages(files, directory, trailer);\r\n            log.debug(&quot;Successfully processed {} images for trailer ID: {}&quot;, images.size(), trailer.getId());\r\n\r\n            ImageUploadResult result = new ImageUploadResult();\r\n            result.setCoverImage(images.get(0));\r\n            result.setAddedImages(images.subList(1, images.size()));\r\n            return CompletableFuture.completedFuture(result);\r\n        } catch (Exception e) {\r\n            log.error(&quot;Error processing images for trailer ID: {}&quot;, trailer.getId(), e);\r\n            return CompletableFuture.failedFuture(e);\r\n        }\r\n    }\r\n```\r\n```\r\n public List&lt;Image&gt; uploadImages(MultipartFile[] files, String directory, TrailerOffer trailer) throws NotAnImageException, GCPFileUploadException, BadRequestException, FileWriteException {\r\n        List&lt;Image&gt; images = new ArrayList&lt;&gt;();\r\n\r\n        Arrays.asList(files).forEach(file -&gt; {\r\n            String originalFileName = file.getOriginalFilename();\r\n\r\n            if (originalFileName == null) {\r\n                throw new BadOriginalFileNameException();\r\n            }\r\n\r\n            System.out.println(&quot;Adding new image to trailer: &quot; + originalFileName);\r\n            images.add(new Image(originalFileName, trailer));\r\n        });\r\n\r\n        imageRepository.saveAll(images);\r\n\r\n        for (int i = 0; i &lt; images.size(); i++) {\r\n            MultipartFile file = Arrays.asList(files).get(i);\r\n            System.out.println(&quot;NU TEST: &quot; + file.getSize());\r\n            Image image = images.get(i);\r\n            System.out.println(&quot;Uploading image(&quot; + i + &quot;): &quot; + images.get(i).getOriginalFileName());\r\n            dataBucketUtil.uploadFile(file, image.getId(), directory);\r\n        }\r\n\r\n        for (Image image : images) {\r\n            image.setPublicUrl(getPublicUrl(image, directory));\r\n            imageRepository.save(image);\r\n        }\r\n\r\n        return images;\r\n    }\r\n```\r\n```\r\n    @Async\r\n    public void uploadFile(MultipartFile multipartFile, UUID id, String directory) throws GCPFileUploadException, NotAnImageException, BadRequestException, FileWriteException {\r\n        String fileName = multipartFile.getOriginalFilename();\r\n        System.out.println(&quot;Start file uploading process on GCS for fileName: &quot; + multipartFile.getOriginalFilename() + &quot; id: &quot; + id);\r\n\r\n        try {\r\n            String fileExtension = checkFileExtension(fileName);\r\n            String contentType = getContentType(fileName);\r\n            System.out.println(fileName + &quot;: File extension: &quot; + fileExtension);\r\n            System.out.println(fileName + &quot;: Content type: &quot; + contentType);\r\n\r\n            if (multipartFile.isEmpty() || multipartFile.getSize() == 0) {\r\n              //  throw new GCPFileUploadException(&quot;[FAILED] Uploaded file is empty or size is 0&quot;);\r\n                System.out.println(&quot;[FAILED] Uploaded file is empty or size is 0&quot;);\r\n            }\r\n\r\n            System.out.println(fileName+&quot;: Size: &quot; + multipartFile.getSize());\r\n\r\n            if (!multipartFile.isEmpty() &amp;&amp; multipartFile.getSize() &gt; 0) {\r\n                byte[] fileData = multipartFile.getBytes();\r\n                Bucket bucket = getBucket();\r\n                bucket.create(DIR_NAME + &quot;/&quot; + directory + &quot;/&quot; + id + fileExtension, fileData, contentType);\r\n                System.out.println(fileName+&quot;: SUCCESS uploaded successfully&quot;);\r\n            } else {\r\n                System.out.println(fileName+&quot;: [FAILED] File size is 0 or file is empty.&quot;);\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            log.error(&quot;An error occurred while uploading data. Exception: &quot;, e);\r\n            throw new GCPFileUploadException(&quot;An error occurred while storing data to GCS: &quot; + e);\r\n        }\r\n    }\r\n```\r\n\r\n\r\nSuccessfull logs:\r\n```\r\nReceived: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\r\nAdding new image to trailer: Achterkant.jpg\r\nAdding new image to trailer: Klein.png\r\nAdding new image to trailer: Zijkant.jpg\r\nAdding new image to trailer: Hoofdfoto.jpg\r\nNU TEST: 9456\r\nUploading image(0): Achterkant.jpg\r\nNU TEST: 125435\r\nUploading image(1): Klein.png\r\nNU TEST: 10599\r\nUploading image(2): Zijkant.jpg\r\nNU TEST: 46161\r\nUploading image(3): Hoofdfoto.jpg\r\nStart file uploading process on GCS for fileName: Achterkant.jpg id: 18ef6ca2-297b-449e-b61b-6e04447a9f54\r\nStart file uploading process on GCS for fileName: Klein.png id: 13673f73-0d6c-463e-a1b6-d7ac593a4749\r\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: c0bba919-5838-46e8-8a18-d3ceb0e813e1\r\nStart file uploading process on GCS for fileName: Zijkant.jpg id: ff14cbdf-a844-4f94-91aa-b6225506724e\r\nAchterkant.jpg: File extension: .jpg\r\nKlein.png: File extension: .png\r\nHoofdfoto.jpg: File extension: .jpg\r\nZijkant.jpg: File extension: .jpg\r\nAchterkant.jpg: Content type: image/jpeg\r\nZijkant.jpg: Content type: image/jpeg\r\nHoofdfoto.jpg: Content type: image/jpeg\r\nKlein.png: Content type: image/png\r\nZijkant.jpg: Size: 10599\r\nKlein.png: Size: 125435\r\nHoofdfoto.jpg: Size: 46161\r\nAchterkant.jpg: Size: 9456\r\nAchterkant.jpg: SUCCESS uploaded successfully\r\nZijkant.jpg: SUCCESS uploaded successfully\r\nHoofdfoto.jpg: SUCCESS uploaded successfully\r\nKlein.png: SUCCESS uploaded successfullyReceived: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\r\nAdding new image to trailer: Achterkant.jpg\r\nAdding new image to trailer: Klein.png\r\nAdding new image to trailer: Zijkant.jpg\r\nAdding new image to trailer: Hoofdfoto.jpg\r\nNU TEST: 9456\r\nUploading image(0): Achterkant.jpg\r\nNU TEST: 125435\r\nUploading image(1): Klein.png\r\nNU TEST: 10599\r\nUploading image(2): Zijkant.jpg\r\nNU TEST: 46161\r\nUploading image(3): Hoofdfoto.jpg\r\nStart file uploading process on GCS for fileName: Achterkant.jpg id: 18ef6ca2-297b-449e-b61b-6e04447a9f54\r\nStart file uploading process on GCS for fileName: Klein.png id: 13673f73-0d6c-463e-a1b6-d7ac593a4749\r\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: c0bba919-5838-46e8-8a18-d3ceb0e813e1\r\nStart file uploading process on GCS for fileName: Zijkant.jpg id: ff14cbdf-a844-4f94-91aa-b6225506724e\r\nAchterkant.jpg: File extension: .jpg\r\nKlein.png: File extension: .png\r\nHoofdfoto.jpg: File extension: .jpg\r\nZijkant.jpg: File extension: .jpg\r\nAchterkant.jpg: Content type: image/jpeg\r\nZijkant.jpg: Content type: image/jpeg\r\nHoofdfoto.jpg: Content type: image/jpeg\r\nKlein.png: Content type: image/png\r\nZijkant.jpg: Size: 10599\r\nKlein.png: Size: 125435\r\nHoofdfoto.jpg: Size: 46161\r\nAchterkant.jpg: Size: 9456\r\nAchterkant.jpg: SUCCESS uploaded successfully\r\nZijkant.jpg: SUCCESS uploaded successfully\r\nHoofdfoto.jpg: SUCCESS uploaded successfully\r\nKlein.png: SUCCESS uploaded successfully\r\n```\r\n\r\nError logs:\r\n```\r\nIMAGESERVICE - FAILED files are empty.\r\nReceived: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\r\nAdding new image to trailer: Achterkant.jpg\r\nAdding new image to trailer: Klein.png\r\nAdding new image to trailer: Zijkant.jpg\r\nAdding new image to trailer: Hoofdfoto.jpg\r\nNU TEST: 0\r\nUploading image(0): Achterkant.jpg\r\nNU TEST: 0\r\nUploading image(1): Klein.png\r\nStart file uploading process on GCS for fileName: Achterkant.jpg id: ead6e44a-57d5-467f-b191-7ce590f94d7b\r\nNU TEST: 0\r\nUploading image(2): Zijkant.jpg\r\nStart file uploading process on GCS for fileName: Klein.png id: 3113e5dd-eff7-4620-9f61-65792bd556ed\r\nAchterkant.jpg: File extension: .jpg\r\nAchterkant.jpg: Content type: image/jpeg\r\nNU TEST: 0\r\nUploading image(3): Hoofdfoto.jpg\r\n[FAILED] Uploaded file is empty or size is 0\r\nKlein.png: File extension: .png\r\nKlein.png: Content type: image/png\r\nAchterkant.jpg: Size: 0\r\nStart file uploading process on GCS for fileName: Zijkant.jpg id: 32df15b2-3ebe-4f3c-a040-11d8c1afe50f\r\n[FAILED] Uploaded file is empty or size is 0\r\nKlein.png: Size: 0\r\nZijkant.jpg: File extension: .jpg\r\nZijkant.jpg: Content type: image/jpeg\r\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: fb6b6992-7750-4ac2-af84-271885dc5f88\r\n[FAILED] Uploaded file is empty or size is 0\r\nZijkant.jpg: Size: 0\r\nHoofdfoto.jpg: File extension: .jpg\r\nHoofdfoto.jpg: Content type: image/jpeg\r\n[FAILED] Uploaded file is empty or size is 0\r\nHoofdfoto.jpg: Size: 0\r\n2023-11-29 16:24:08.834 ERROR 5752 --- [ileUploader - 7] c.b.api.images.util.DataBucketUtil       : An error occurred while uploading data. Exception: \r\napi.images.exception.GCPFileUploadException: An error occurred while storing data to GCS: java.io.FileNotFoundException: C:\\Users\\NAME\\AppData\\Local\\Temp\\tomcat.8000.8273688474402663459\\work\\Tomcat\\localhost\\api#v1\\upload_65639dd4_178c_4f5f_8ffe_bc24d1b8cb4c_00000006.tmp (The system cannot find the file specified)\r\n\tat com.projectname.api.images.util.DataBucketUtil.uploadFile(DataBucketUtil.java:72) ~[classes/:na]\r\n\tat com.projectname.api.images.util.DataBucketUtil$$FastClassBySpringCGLIB$$905c2d1f.invoke(&lt;generated&gt;) ~[classes/:na]\r\n```\r\n\r\nTo summarize. We&#39;re uploading the images to google cloud services, then saving that into our database. Not everything&#39;s perfect but it&#39;s doing the job for now and if I do a successfull upload it also shows in our front end as it should.\r\n\r\nI hope you can give me some possible solutions!\r\n\r\nI tried to find out where the multipart file went empty/size 0. Which is the moment we enter the uploadImagesAsync function. I don&#39;t know how, or why. But I expected it to go wrong at the postman request part.\r\n\r\nWhat weirded me out is that the when I tried several times, sometimes 1 out of 4 images would successfully upload but the others would not. And that, if I restart the project it actually works quite well.\r\n\r\nMy postman setup is quite simple. It&#39;s a form-data with &quot;coverImage&quot; with 1 picture and &quot;images&quot; with 3 pictures.","title":"Async file/image uploading failure after first requests in Java Sprint Boot","body":"<p>this is my first ever post on StackOverflow, so I hope I'm doing it correctly. Thanks in advance!</p>\n<p>I'm refactoring a file uploading function to an Async file uploading function.\nI am able to create a traileroffer,then with another POST request I can upload images to it. If I restart the application everything is uploading successfully 100% of the time. After any type of request, the image uploading fails, sometimes a couple will go through successfully.</p>\n<p>The main issue is, it seems that the files which are uploaded are empty / the file size is &lt;= 0. I'm not sure what's going wrong but before I refactor my entire (working) function I'd like to check if this may be a project based thing or if it's more complicated than that.</p>\n<p>The reason I think my post differentiates others is that my function/code is probably fine, but it may be something in my project setup instead. I hope someone experienced something similar like me and knows what may be the cause. Though, it may be my code/function because before I refactored to Asynchronous, it did work fine.</p>\n<pre><code> @PostMapping(path = &quot;/{trailerId}/images&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\n    @ResponseStatus(HttpStatus.NO_CONTENT)\n    public ResponseEntity&lt;Void&gt; addTrailerImages(@PathVariable UUID trailerId, @Valid @ModelAttribute SaveImagesDTO saveImagesDTO) {\n        TrailerOffer trailer = trailerOfferService.getTrailerOffer(trailerId);\n MultipartFile[] coverImages = saveImagesDTO.getCoverImage();\n        MultipartFile[] images = saveImagesDTO.getImages();\n\n        MultipartFile[] combinedImagesArray = new MultipartFile[coverImages.length + images.length];\n\n        System.arraycopy(coverImages, 0, combinedImagesArray, 0, coverImages.length);\n        System.arraycopy(images, 0, combinedImagesArray, coverImages.length, images.length);\n\n        CompletableFuture&lt;ImageUploadResult&gt; imagesFuture = imageService.uploadImagesAsync(combinedImagesArray,&quot;trailer&quot;, trailer);\n\n        imagesFuture.handle((result, ex) -&gt; {\n            if (ex != null) {\n                System.out.println(&quot;Exception in CompletableFuture: &quot; +ex);\n            } else {\n                Image coverImage = result.getCoverImage();\n                List&lt;Image&gt; addedImages = result.getAddedImages();\n\n                trailer.setCoverImage(coverImage);\n                trailerOfferService.saveTrailerOffer(trailer);\n            }\n\n            return result;\n        });\n\n        return ResponseEntity.accepted().build();\n    }\n</code></pre>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SaveImagesDTO {\n    private MultipartFile[] coverImage;\n    private MultipartFile[] images;\n}\n\n</code></pre>\n<pre><code> @Async\n    public CompletableFuture&lt;ImageUploadResult&gt; uploadImagesAsync(MultipartFile[] files, String directory, TrailerOffer trailer) {\n        try {\n            if (files == null || files.length == 0) {\n                System.out.println(&quot;No files received for trailer ID: &quot; + trailer.getId());\n                return CompletableFuture.failedFuture(new IllegalArgumentException(&quot;No files received&quot;));\n            }\n\n            for(MultipartFile file : files){\n                if(file.isEmpty() || file.getSize() &lt;= 0){\n                    System.out.println(&quot;IMAGESERVICE - FAILED files are empty.&quot;);\n                }\n            }\n\n            System.out.println(&quot;Received: &quot; + files.length + &quot; images &quot; + &quot; for trailer id: &quot; + trailer.getId());\n\n            List&lt;Image&gt; images = uploadImages(files, directory, trailer);\n            log.debug(&quot;Successfully processed {} images for trailer ID: {}&quot;, images.size(), trailer.getId());\n\n            ImageUploadResult result = new ImageUploadResult();\n            result.setCoverImage(images.get(0));\n            result.setAddedImages(images.subList(1, images.size()));\n            return CompletableFuture.completedFuture(result);\n        } catch (Exception e) {\n            log.error(&quot;Error processing images for trailer ID: {}&quot;, trailer.getId(), e);\n            return CompletableFuture.failedFuture(e);\n        }\n    }\n</code></pre>\n<pre><code> public List&lt;Image&gt; uploadImages(MultipartFile[] files, String directory, TrailerOffer trailer) throws NotAnImageException, GCPFileUploadException, BadRequestException, FileWriteException {\n        List&lt;Image&gt; images = new ArrayList&lt;&gt;();\n\n        Arrays.asList(files).forEach(file -&gt; {\n            String originalFileName = file.getOriginalFilename();\n\n            if (originalFileName == null) {\n                throw new BadOriginalFileNameException();\n            }\n\n            System.out.println(&quot;Adding new image to trailer: &quot; + originalFileName);\n            images.add(new Image(originalFileName, trailer));\n        });\n\n        imageRepository.saveAll(images);\n\n        for (int i = 0; i &lt; images.size(); i++) {\n            MultipartFile file = Arrays.asList(files).get(i);\n            System.out.println(&quot;NU TEST: &quot; + file.getSize());\n            Image image = images.get(i);\n            System.out.println(&quot;Uploading image(&quot; + i + &quot;): &quot; + images.get(i).getOriginalFileName());\n            dataBucketUtil.uploadFile(file, image.getId(), directory);\n        }\n\n        for (Image image : images) {\n            image.setPublicUrl(getPublicUrl(image, directory));\n            imageRepository.save(image);\n        }\n\n        return images;\n    }\n</code></pre>\n<pre><code>    @Async\n    public void uploadFile(MultipartFile multipartFile, UUID id, String directory) throws GCPFileUploadException, NotAnImageException, BadRequestException, FileWriteException {\n        String fileName = multipartFile.getOriginalFilename();\n        System.out.println(&quot;Start file uploading process on GCS for fileName: &quot; + multipartFile.getOriginalFilename() + &quot; id: &quot; + id);\n\n        try {\n            String fileExtension = checkFileExtension(fileName);\n            String contentType = getContentType(fileName);\n            System.out.println(fileName + &quot;: File extension: &quot; + fileExtension);\n            System.out.println(fileName + &quot;: Content type: &quot; + contentType);\n\n            if (multipartFile.isEmpty() || multipartFile.getSize() == 0) {\n              //  throw new GCPFileUploadException(&quot;[FAILED] Uploaded file is empty or size is 0&quot;);\n                System.out.println(&quot;[FAILED] Uploaded file is empty or size is 0&quot;);\n            }\n\n            System.out.println(fileName+&quot;: Size: &quot; + multipartFile.getSize());\n\n            if (!multipartFile.isEmpty() &amp;&amp; multipartFile.getSize() &gt; 0) {\n                byte[] fileData = multipartFile.getBytes();\n                Bucket bucket = getBucket();\n                bucket.create(DIR_NAME + &quot;/&quot; + directory + &quot;/&quot; + id + fileExtension, fileData, contentType);\n                System.out.println(fileName+&quot;: SUCCESS uploaded successfully&quot;);\n            } else {\n                System.out.println(fileName+&quot;: [FAILED] File size is 0 or file is empty.&quot;);\n            }\n\n        } catch (IOException e) {\n            log.error(&quot;An error occurred while uploading data. Exception: &quot;, e);\n            throw new GCPFileUploadException(&quot;An error occurred while storing data to GCS: &quot; + e);\n        }\n    }\n</code></pre>\n<p>Successfull logs:</p>\n<pre><code>Received: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\nAdding new image to trailer: Achterkant.jpg\nAdding new image to trailer: Klein.png\nAdding new image to trailer: Zijkant.jpg\nAdding new image to trailer: Hoofdfoto.jpg\nNU TEST: 9456\nUploading image(0): Achterkant.jpg\nNU TEST: 125435\nUploading image(1): Klein.png\nNU TEST: 10599\nUploading image(2): Zijkant.jpg\nNU TEST: 46161\nUploading image(3): Hoofdfoto.jpg\nStart file uploading process on GCS for fileName: Achterkant.jpg id: 18ef6ca2-297b-449e-b61b-6e04447a9f54\nStart file uploading process on GCS for fileName: Klein.png id: 13673f73-0d6c-463e-a1b6-d7ac593a4749\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: c0bba919-5838-46e8-8a18-d3ceb0e813e1\nStart file uploading process on GCS for fileName: Zijkant.jpg id: ff14cbdf-a844-4f94-91aa-b6225506724e\nAchterkant.jpg: File extension: .jpg\nKlein.png: File extension: .png\nHoofdfoto.jpg: File extension: .jpg\nZijkant.jpg: File extension: .jpg\nAchterkant.jpg: Content type: image/jpeg\nZijkant.jpg: Content type: image/jpeg\nHoofdfoto.jpg: Content type: image/jpeg\nKlein.png: Content type: image/png\nZijkant.jpg: Size: 10599\nKlein.png: Size: 125435\nHoofdfoto.jpg: Size: 46161\nAchterkant.jpg: Size: 9456\nAchterkant.jpg: SUCCESS uploaded successfully\nZijkant.jpg: SUCCESS uploaded successfully\nHoofdfoto.jpg: SUCCESS uploaded successfully\nKlein.png: SUCCESS uploaded successfullyReceived: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\nAdding new image to trailer: Achterkant.jpg\nAdding new image to trailer: Klein.png\nAdding new image to trailer: Zijkant.jpg\nAdding new image to trailer: Hoofdfoto.jpg\nNU TEST: 9456\nUploading image(0): Achterkant.jpg\nNU TEST: 125435\nUploading image(1): Klein.png\nNU TEST: 10599\nUploading image(2): Zijkant.jpg\nNU TEST: 46161\nUploading image(3): Hoofdfoto.jpg\nStart file uploading process on GCS for fileName: Achterkant.jpg id: 18ef6ca2-297b-449e-b61b-6e04447a9f54\nStart file uploading process on GCS for fileName: Klein.png id: 13673f73-0d6c-463e-a1b6-d7ac593a4749\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: c0bba919-5838-46e8-8a18-d3ceb0e813e1\nStart file uploading process on GCS for fileName: Zijkant.jpg id: ff14cbdf-a844-4f94-91aa-b6225506724e\nAchterkant.jpg: File extension: .jpg\nKlein.png: File extension: .png\nHoofdfoto.jpg: File extension: .jpg\nZijkant.jpg: File extension: .jpg\nAchterkant.jpg: Content type: image/jpeg\nZijkant.jpg: Content type: image/jpeg\nHoofdfoto.jpg: Content type: image/jpeg\nKlein.png: Content type: image/png\nZijkant.jpg: Size: 10599\nKlein.png: Size: 125435\nHoofdfoto.jpg: Size: 46161\nAchterkant.jpg: Size: 9456\nAchterkant.jpg: SUCCESS uploaded successfully\nZijkant.jpg: SUCCESS uploaded successfully\nHoofdfoto.jpg: SUCCESS uploaded successfully\nKlein.png: SUCCESS uploaded successfully\n</code></pre>\n<p>Error logs:</p>\n<pre><code>IMAGESERVICE - FAILED files are empty.\nReceived: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\nAdding new image to trailer: Achterkant.jpg\nAdding new image to trailer: Klein.png\nAdding new image to trailer: Zijkant.jpg\nAdding new image to trailer: Hoofdfoto.jpg\nNU TEST: 0\nUploading image(0): Achterkant.jpg\nNU TEST: 0\nUploading image(1): Klein.png\nStart file uploading process on GCS for fileName: Achterkant.jpg id: ead6e44a-57d5-467f-b191-7ce590f94d7b\nNU TEST: 0\nUploading image(2): Zijkant.jpg\nStart file uploading process on GCS for fileName: Klein.png id: 3113e5dd-eff7-4620-9f61-65792bd556ed\nAchterkant.jpg: File extension: .jpg\nAchterkant.jpg: Content type: image/jpeg\nNU TEST: 0\nUploading image(3): Hoofdfoto.jpg\n[FAILED] Uploaded file is empty or size is 0\nKlein.png: File extension: .png\nKlein.png: Content type: image/png\nAchterkant.jpg: Size: 0\nStart file uploading process on GCS for fileName: Zijkant.jpg id: 32df15b2-3ebe-4f3c-a040-11d8c1afe50f\n[FAILED] Uploaded file is empty or size is 0\nKlein.png: Size: 0\nZijkant.jpg: File extension: .jpg\nZijkant.jpg: Content type: image/jpeg\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: fb6b6992-7750-4ac2-af84-271885dc5f88\n[FAILED] Uploaded file is empty or size is 0\nZijkant.jpg: Size: 0\nHoofdfoto.jpg: File extension: .jpg\nHoofdfoto.jpg: Content type: image/jpeg\n[FAILED] Uploaded file is empty or size is 0\nHoofdfoto.jpg: Size: 0\n2023-11-29 16:24:08.834 ERROR 5752 --- [ileUploader - 7] c.b.api.images.util.DataBucketUtil       : An error occurred while uploading data. Exception: \napi.images.exception.GCPFileUploadException: An error occurred while storing data to GCS: java.io.FileNotFoundException: C:\\Users\\NAME\\AppData\\Local\\Temp\\tomcat.8000.8273688474402663459\\work\\Tomcat\\localhost\\api#v1\\upload_65639dd4_178c_4f5f_8ffe_bc24d1b8cb4c_00000006.tmp (The system cannot find the file specified)\n    at com.projectname.api.images.util.DataBucketUtil.uploadFile(DataBucketUtil.java:72) ~[classes/:na]\n    at com.projectname.api.images.util.DataBucketUtil$$FastClassBySpringCGLIB$$905c2d1f.invoke(&lt;generated&gt;) ~[classes/:na]\n</code></pre>\n<p>To summarize. We're uploading the images to google cloud services, then saving that into our database. Not everything's perfect but it's doing the job for now and if I do a successfull upload it also shows in our front end as it should.</p>\n<p>I hope you can give me some possible solutions!</p>\n<p>I tried to find out where the multipart file went empty/size 0. Which is the moment we enter the uploadImagesAsync function. I don't know how, or why. But I expected it to go wrong at the postman request part.</p>\n<p>What weirded me out is that the when I tried several times, sometimes 1 out of 4 images would successfully upload but the others would not. And that, if I restart the project it actually works quite well.</p>\n<p>My postman setup is quite simple. It's a form-data with &quot;coverImage&quot; with 1 picture and &quot;images&quot; with 3 pictures.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":228044,"reputation":408,"user_id":490108,"display_name":"anydoby"},"score":0,"creation_date":1530693880,"post_id":51069767,"comment_id":89321527,"body_markdown":"I also have that problem now. But trying to include com.typesafe:config dependency. It has an invalid pom with packang bundle and does not declare the bundle plugin anywhere in the pom. The only thing I can suggest is contact the library author and ask to correct the pom. I am wondering how these guys manage to build the bundle :)","body":"I also have that problem now. But trying to include com.typesafe:config dependency. It has an invalid pom with packang bundle and does not declare the bundle plugin anywhere in the pom. The only thing I can suggest is contact the library author and ask to correct the pom. I am wondering how these guys manage to build the bundle :)"},{"owner":{"account_id":37018,"reputation":13267,"user_id":105741,"display_name":"Antony Stubbs"},"score":0,"creation_date":1598988208,"post_id":51069767,"comment_id":112632487,"body_markdown":"FYI I created an issue for this https://github.com/xerial/snappy-java/issues/255","body":"FYI I created an issue for this <a href=\"https://github.com/xerial/snappy-java/issues/255\" rel=\"nofollow noreferrer\">github.com/xerial/snappy-java/issues/255</a>"}],"answers":[{"comments":[{"owner":{"account_id":523682,"reputation":5868,"user_id":949327,"display_name":"Kenn Knowles"},"score":0,"creation_date":1569970249,"post_id":51070617,"comment_id":102765587,"body_markdown":"This does not seem to have any effect. The problem is that snappy-java does not include the plugin in the pom for 1.1.4","body":"This does not seem to have any effect. The problem is that snappy-java does not include the plugin in the pom for 1.1.4"}],"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1701341363,"creation_date":1530130000,"answer_id":51070617,"question_id":51069767,"body_markdown":"&gt; I tried adding the maven-bundle-plugin to my own POM file&#39;s &lt;build&gt;\r\n&gt; tag, but that won&#39;t fix it (and why should it? I&#39;d think that a\r\n&gt; dependency&#39;s config shouldn&#39;t affect my pom?\r\n\r\nAnd you are right : it is not the `maven-bundle-plugin` as a `dependency` that you need to \r\nadd to make the `bundle` package usable in your build.   \r\nWhat you need is adding the `maven-bundle-plugin` as a `plugin` to\r\nenhance the default Maven lifecycle such as :\r\n\r\n    &lt;build&gt;\r\n      &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n    \t\t&lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\r\n    \t\t&lt;extensions&gt;true&lt;/extensions&gt;\r\n    \t\t&lt;configuration&gt;\r\n    \t\t\t&lt;instructions&gt;\r\n    \t\t\t\t&lt;Include-Resource&gt; \r\n                         ....\r\n     \t\t\t\t&lt;/Include-Resource&gt;\r\n    \t\t\t&lt;/instructions&gt;\r\n    \t\t&lt;/configuration&gt;\r\n         &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nYou can find the information in the [`apache-felix-maven-bundle-plugin`][1]. \r\n\r\n\r\n  [1]: http://felix.apache.org/documentation/subprojects/apache-felix-maven-bundle-plugin-bnd.html","title":"Maven: `Unknown packaging: bundle` error from a dependency packaging as bundle","body":"<blockquote>\n<p>I tried adding the maven-bundle-plugin to my own POM file's \ntag, but that won't fix it (and why should it? I'd think that a\ndependency's config shouldn't affect my pom?</p>\n</blockquote>\n<p>And you are right : it is not the <code>maven-bundle-plugin</code> as a <code>dependency</code> that you need to\nadd to make the <code>bundle</code> package usable in your build.<br />\nWhat you need is adding the <code>maven-bundle-plugin</code> as a <code>plugin</code> to\nenhance the default Maven lifecycle such as :</p>\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n     &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n        &lt;extensions&gt;true&lt;/extensions&gt;\n        &lt;configuration&gt;\n            &lt;instructions&gt;\n                &lt;Include-Resource&gt; \n                     ....\n                &lt;/Include-Resource&gt;\n            &lt;/instructions&gt;\n        &lt;/configuration&gt;\n     &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>You can find the information in the <a href=\"http://felix.apache.org/documentation/subprojects/apache-felix-maven-bundle-plugin-bnd.html\" rel=\"nofollow noreferrer\"><code>apache-felix-maven-bundle-plugin</code></a>.</p>\n"},{"comments":[{"owner":{"account_id":37018,"reputation":13267,"user_id":105741,"display_name":"Antony Stubbs"},"score":0,"creation_date":1598975514,"post_id":58193459,"comment_id":112627434,"body_markdown":"This still seems to be a problem in 1.1.7.7","body":"This still seems to be a problem in 1.1.7.7"},{"owner":{"account_id":37018,"reputation":13267,"user_id":105741,"display_name":"Antony Stubbs"},"score":0,"creation_date":1598988193,"post_id":58193459,"comment_id":112632480,"body_markdown":"FYI I created an issue for this https://github.com/xerial/snappy-java/issues/255","body":"FYI I created an issue for this <a href=\"https://github.com/xerial/snappy-java/issues/255\" rel=\"nofollow noreferrer\">github.com/xerial/snappy-java/issues/255</a>"}],"tags":[],"owner":{"account_id":523682,"reputation":5868,"user_id":949327,"display_name":"Kenn Knowles"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1569972276,"creation_date":1569972276,"answer_id":58193459,"question_id":51069767,"body_markdown":"This is actually an issue with snappy-java 1.1.4. Their pom does not include the bundle plugin. However, version 1.1.7 switches to jar packaging.\r\n\r\nYou can work around this by using maven-dependency-plugin 2.10.","title":"Maven: `Unknown packaging: bundle` error from a dependency packaging as bundle","body":"<p>This is actually an issue with snappy-java 1.1.4. Their pom does not include the bundle plugin. However, version 1.1.7 switches to jar packaging.</p>\n\n<p>You can work around this by using maven-dependency-plugin 2.10.</p>\n"}],"owner":{"account_id":1306443,"reputation":10605,"user_id":1255356,"accept_rate":84,"display_name":"Pablo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7930,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58193459,"answer_count":2,"score":6,"last_activity_date":1701341363,"creation_date":1530126167,"question_id":51069767,"body_markdown":"I am running `mvn org.apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies` in my project, and I&#39;m seeing the following errors:\r\n\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies (default-cli) on project beam-sdks-java-core: Some problems were encountered while processing the POMs:\r\n    [ERROR] [ERROR] Unknown packaging: bundle @ line 6, column 16: 1 problem was encountered while building the effective model for org.xerial.snappy:snappy-java:1.1.4\r\n    [ERROR] [ERROR] Unknown packaging: bundle @ line 6, column 16\r\n\r\nLooking at Snappy&#39;s pom file, it looks like so:\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n    &lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;org.xerial.snappy&lt;/groupId&gt;\r\n        &lt;artifactId&gt;snappy-java&lt;/artifactId&gt;\r\n        &lt;packaging&gt;bundle&lt;/packaging&gt;\r\n        &lt;description&gt;snappy-java: A fast compression/decompression library&lt;/description&gt;\r\n        &lt;version&gt;1.1.4&lt;/version&gt;\r\n        &lt;name&gt;snappy-java&lt;/name&gt;\r\n        ....\r\n\r\nSpecifically, the `&lt;packaging&gt;bundle&lt;/packaging&gt;` line seems to be the problem.\r\n\r\nI tried adding the `maven-bundle-plugin` to my own POM file&#39;s `&lt;build&gt;` tag, but that won&#39;t fix it (and why should it? I&#39;d think that a dependency&#39;s config shouldn&#39;t affect my pom?)\r\n\r\nHow do I enable the `maven-bundle-plugin` for my dependencies? Do I need to add it to a specific subsection of my pom that refers to `apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies`?\r\n\r\nAlso, for extra info, my Maven version is 3.5.0\r\n\r\n","title":"Maven: `Unknown packaging: bundle` error from a dependency packaging as bundle","body":"<p>I am running <code>mvn org.apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies</code> in my project, and I'm seeing the following errors:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies (default-cli) on project beam-sdks-java-core: Some problems were encountered while processing the POMs:\n[ERROR] [ERROR] Unknown packaging: bundle @ line 6, column 16: 1 problem was encountered while building the effective model for org.xerial.snappy:snappy-java:1.1.4\n[ERROR] [ERROR] Unknown packaging: bundle @ line 6, column 16\n</code></pre>\n\n<p>Looking at Snappy's pom file, it looks like so:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.xerial.snappy&lt;/groupId&gt;\n    &lt;artifactId&gt;snappy-java&lt;/artifactId&gt;\n    &lt;packaging&gt;bundle&lt;/packaging&gt;\n    &lt;description&gt;snappy-java: A fast compression/decompression library&lt;/description&gt;\n    &lt;version&gt;1.1.4&lt;/version&gt;\n    &lt;name&gt;snappy-java&lt;/name&gt;\n    ....\n</code></pre>\n\n<p>Specifically, the <code>&lt;packaging&gt;bundle&lt;/packaging&gt;</code> line seems to be the problem.</p>\n\n<p>I tried adding the <code>maven-bundle-plugin</code> to my own POM file's <code>&lt;build&gt;</code> tag, but that won't fix it (and why should it? I'd think that a dependency's config shouldn't affect my pom?)</p>\n\n<p>How do I enable the <code>maven-bundle-plugin</code> for my dependencies? Do I need to add it to a specific subsection of my pom that refers to <code>apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies</code>?</p>\n\n<p>Also, for extra info, my Maven version is 3.5.0</p>\n"},{"tags":["java","encryption","nimbus","jose4j","jwe"],"comments":[{"owner":{"account_id":7228601,"reputation":1553,"user_id":5516322,"display_name":"aviad"},"score":1,"creation_date":1536992972,"post_id":52342189,"comment_id":91630917,"body_markdown":"It depends on which encryption algorithm was used. It appears on the first section of the jwe (aaaaa in your example). Anyway, I suggest you look at: https://bitbucket.org/b_c/jose4j/wiki/Home. There you can find explanations alongside source code","body":"It depends on which encryption algorithm was used. It appears on the first section of the jwe (aaaaa in your example). Anyway, I suggest you look at: <a href=\"https://bitbucket.org/b_c/jose4j/wiki/Home\" rel=\"nofollow noreferrer\">bitbucket.org/b_c/jose4j/wiki/Home</a>. There you can find explanations alongside source code"},{"owner":{"account_id":422239,"reputation":2240,"user_id":800894,"accept_rate":33,"display_name":"Roshanck"},"score":0,"creation_date":1536993637,"post_id":52342189,"comment_id":91631039,"body_markdown":"it is SHA256withRSA and X509 cert 2048 key","body":"it is SHA256withRSA and X509 cert 2048 key"},{"owner":{"account_id":1809323,"reputation":11348,"user_id":1645712,"accept_rate":73,"display_name":"gusto2"},"score":0,"creation_date":1537000544,"post_id":52342189,"comment_id":91632231,"body_markdown":"you may have a look at the [RFC](https://tools.ietf.org/html/rfc7516)","body":"you may have a look at the <a href=\"https://tools.ietf.org/html/rfc7516\" rel=\"nofollow noreferrer\">RFC</a>"},{"owner":{"account_id":6186008,"reputation":3119,"user_id":4820101,"accept_rate":24,"display_name":"samshers"},"score":0,"creation_date":1567414986,"post_id":52342189,"comment_id":101944846,"body_markdown":"what does JOSE stand for","body":"what does JOSE stand for"},{"owner":{"account_id":9689644,"reputation":1769,"user_id":7188099,"accept_rate":78,"display_name":"tnkh"},"score":0,"creation_date":1621411598,"post_id":52342189,"comment_id":119484648,"body_markdown":"@Roshanck Hi I am looking for an answer too. Have u figured out?","body":"@Roshanck Hi I am looking for an answer too. Have u figured out?"}],"answers":[{"tags":[],"owner":{"account_id":7228601,"reputation":1553,"user_id":5516322,"display_name":"aviad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537000174,"creation_date":1537000174,"answer_id":52343033,"question_id":52342189,"body_markdown":"Something to get you started with:\r\n\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        Key privateKey = KeyFactory\r\n                .getInstance(&quot;RSA&quot;)\r\n                .generatePrivate(new PKCS8EncodedKeySpec(Base64.getDecoder().decode(&quot;your base64 private key&quot;)));\r\n\r\n        Cipher decrypt = Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;);\r\n\r\n        decrypt.init(Cipher.DECRYPT_MODE, privateKey, new IvParameterSpec(Base64.getDecoder().decode(&quot;ccccc&quot;)));\r\n\r\n        String decryptedMessage = new String(decrypt.doFinal(Base64.getDecoder().decode(&quot;ddddd&quot;)), StandardCharsets.UTF_8);\r\n    }","title":"How to decrypt JWE(Json Web Encryption) data using private key in java","body":"<p>Something to get you started with:</p>\n\n<pre><code>public static void main(String[] args) throws Exception\n{\n    Key privateKey = KeyFactory\n            .getInstance(\"RSA\")\n            .generatePrivate(new PKCS8EncodedKeySpec(Base64.getDecoder().decode(\"your base64 private key\")));\n\n    Cipher decrypt = Cipher.getInstance(\"RSA/ECB/PKCS1Padding\");\n\n    decrypt.init(Cipher.DECRYPT_MODE, privateKey, new IvParameterSpec(Base64.getDecoder().decode(\"ccccc\")));\n\n    String decryptedMessage = new String(decrypt.doFinal(Base64.getDecoder().decode(\"ddddd\")), StandardCharsets.UTF_8);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9689644,"reputation":1769,"user_id":7188099,"accept_rate":78,"display_name":"tnkh"},"score":1,"creation_date":1621411578,"post_id":52347883,"comment_id":119484634,"body_markdown":"Can you explain more with your first line  `RSAPrivateKey privateKey; //initialize with your key`?","body":"Can you explain more with your first line  <code>RSAPrivateKey privateKey; &#47;&#47;initialize with your key</code>?"}],"tags":[],"owner":{"account_id":3151203,"reputation":236,"user_id":2664623,"display_name":"FluffyDestroyerOfCode"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1537037690,"creation_date":1537037690,"answer_id":52347883,"question_id":52342189,"body_markdown":"Due to your other question and tags to this question, I assume you chose the library Nimbus JOSE + JWT. Regardless of your Framework for JWT, I advise you to use the provided way to encrypt/decrypt your tokens, because they validate the structure of the token.\r\n\r\n    RSAPrivateKey privateKey; //initialize with your key\r\n    String jwtTokenAsString = &quot;aaaaa.bbbbb.ccccc.ddddd.eeeee&quot;; //your token\r\n    EncryptedJWT encryptedJWT = EncryptedJWT.parse(jwtTokenAsString);\r\n    RSADecrypter decrypter = new RSADecrypter(privateKey);\r\n    encryptedJWT.decrypt(decrypter);\r\n\r\n    //Access content with diffrent methods\r\n    JWTClaimsSet claims = encryptedJWT.getJWTClaimsSet();\r\n    Payload payload = encryptedJWT.getPayload();","title":"How to decrypt JWE(Json Web Encryption) data using private key in java","body":"<p>Due to your other question and tags to this question, I assume you chose the library Nimbus JOSE + JWT. Regardless of your Framework for JWT, I advise you to use the provided way to encrypt/decrypt your tokens, because they validate the structure of the token.</p>\n\n<pre><code>RSAPrivateKey privateKey; //initialize with your key\nString jwtTokenAsString = \"aaaaa.bbbbb.ccccc.ddddd.eeeee\"; //your token\nEncryptedJWT encryptedJWT = EncryptedJWT.parse(jwtTokenAsString);\nRSADecrypter decrypter = new RSADecrypter(privateKey);\nencryptedJWT.decrypt(decrypter);\n\n//Access content with diffrent methods\nJWTClaimsSet claims = encryptedJWT.getJWTClaimsSet();\nPayload payload = encryptedJWT.getPayload();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4143607,"reputation":773,"user_id":3398044,"accept_rate":62,"display_name":"vuhoanghiep1993"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701341275,"creation_date":1701341275,"answer_id":77577795,"question_id":52342189,"body_markdown":"This is what I use\r\n\r\n        public String verifyAndDecrypt(String senderJws) throws ParseException, KeyStoreException, JOSEException, NoSuchAlgorithmException, UnrecoverableKeyException, JsonProcessingException {\r\n        String paJson = null;\r\n        JWSObject jwsObject = JWSObject.parse(senderJws);\r\n        RSASSAVerifier verifier = new RSASSAVerifier(getPublicKeyFromString());\r\n\r\n        if (jwsObject.verify(verifier)) {\r\n            JWEObject jweObject = JWEObject.parse(jwsObject.getPayload().toString());\r\n            JWEHeader jweHeader = (JWEHeader) jweObject.getHeader();\r\n            RSADecrypter decrypter = getDecrypter();\r\n            jweObject.decrypt(decrypter);\r\n            if (jweObject.getState() == JWEObject.State.DECRYPTED) {\r\n                paJson = jweObject.getPayload().toString();\r\n            }\r\n\r\n        }\r\n        return paJson;\r\n    }\r\n\r\n\r\n\r\n    public RSAPublicKey getPublicKeyFromString() throws IOException, GeneralSecurityException {\r\n        try {\r\n            byte[] encoded = Base64.getDecoder().decode(certString); //certString is string not include ---BEGIN--- and ---END---\r\n            InputStream certstream = new ByteArrayInputStream(encoded);\r\n            Certificate certder = CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate(certstream);\r\n            return (RSAPublicKey) certder.getPublicKey();\r\n        } catch (GeneralSecurityException e) {\r\n            e.printStackTrace();\r\n            throw e; \r\n        }\r\n    }\r\n\r\n    public RSAPrivateKey getMyPrivateKey() throws KeyStoreException, NoSuchAlgorithmException, UnrecoverableKeyException {\r\n        byte[] encoded = Base64.getDecoder().decode(privateKeyString);\r\n        KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\r\n        PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(encoded);\r\n        RSAPrivateKey privKey = (RSAPrivateKey) kf.generatePrivate(keySpec);\r\n        return privKey;\r\n    }","title":"How to decrypt JWE(Json Web Encryption) data using private key in java","body":"<p>This is what I use</p>\n<pre><code>    public String verifyAndDecrypt(String senderJws) throws ParseException, KeyStoreException, JOSEException, NoSuchAlgorithmException, UnrecoverableKeyException, JsonProcessingException {\n    String paJson = null;\n    JWSObject jwsObject = JWSObject.parse(senderJws);\n    RSASSAVerifier verifier = new RSASSAVerifier(getPublicKeyFromString());\n\n    if (jwsObject.verify(verifier)) {\n        JWEObject jweObject = JWEObject.parse(jwsObject.getPayload().toString());\n        JWEHeader jweHeader = (JWEHeader) jweObject.getHeader();\n        RSADecrypter decrypter = getDecrypter();\n        jweObject.decrypt(decrypter);\n        if (jweObject.getState() == JWEObject.State.DECRYPTED) {\n            paJson = jweObject.getPayload().toString();\n        }\n\n    }\n    return paJson;\n}\n\n\n\npublic RSAPublicKey getPublicKeyFromString() throws IOException, GeneralSecurityException {\n    try {\n        byte[] encoded = Base64.getDecoder().decode(certString); //certString is string not include ---BEGIN--- and ---END---\n        InputStream certstream = new ByteArrayInputStream(encoded);\n        Certificate certder = CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate(certstream);\n        return (RSAPublicKey) certder.getPublicKey();\n    } catch (GeneralSecurityException e) {\n        e.printStackTrace();\n        throw e; \n    }\n}\n\npublic RSAPrivateKey getMyPrivateKey() throws KeyStoreException, NoSuchAlgorithmException, UnrecoverableKeyException {\n    byte[] encoded = Base64.getDecoder().decode(privateKeyString);\n    KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\n    PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(encoded);\n    RSAPrivateKey privKey = (RSAPrivateKey) kf.generatePrivate(keySpec);\n    return privKey;\n}\n</code></pre>\n"}],"owner":{"account_id":422239,"reputation":2240,"user_id":800894,"accept_rate":33,"display_name":"Roshanck"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20183,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1701341275,"creation_date":1536992352,"question_id":52342189,"body_markdown":"I have a private key similar to below\r\n\r\ne.g.\r\n\r\n    -----BEGIN PRIVATE KEY-----\r\n    MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDGBRdsiDqKPGyH\r\n    gOpzxmSU2EQkm+zYZLvlPlwkwyfFWLndFLZ3saxJS+LIixsFhunrrUT9ZZ0x+bB6\r\n    MV55o70z4ABOJRFNWx1wbMGqdiC0Fyfpwad3iYpRVjZO+5etHA9JEoaTPoFxv+kt\r\n    QwBjBRAJ3Y5jtrESprGdUFRb0oavDHuBtWUt2XmXspWgtRn1xC8sXZExDdxmJRPA\r\n    ADTO3rrGo9hicG/WKGzSHD5l1f+IO1SfmUN/6i2JjcnE07eYArNrCfbMgkFavj50\r\n    2ne2fSaYM4p0o147O9Ty8jCyY9vuh/ZGid6qUe3TBI6/okWfmYw6FVbRpNfVEeG7\r\n    kPfkDW/JdH7qkWTFbh3eH1k=\r\n    -----END PRIVATE KEY-----\r\n\r\nI have a JWE data as below which was encrypted using the public key generated from above private key/certificate\r\n\r\n    aaaaa.bbbbb.ccccc.ddddd.eeeee\r\n\r\n**Can someone give me java code I can use to decrypt this JWE using my private key?** I cannot find a clear answer from internet. I am kind if new to this JWE concept ","title":"How to decrypt JWE(Json Web Encryption) data using private key in java","body":"<p>I have a private key similar to below</p>\n\n<p>e.g.</p>\n\n<pre><code>-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDGBRdsiDqKPGyH\ngOpzxmSU2EQkm+zYZLvlPlwkwyfFWLndFLZ3saxJS+LIixsFhunrrUT9ZZ0x+bB6\nMV55o70z4ABOJRFNWx1wbMGqdiC0Fyfpwad3iYpRVjZO+5etHA9JEoaTPoFxv+kt\nQwBjBRAJ3Y5jtrESprGdUFRb0oavDHuBtWUt2XmXspWgtRn1xC8sXZExDdxmJRPA\nADTO3rrGo9hicG/WKGzSHD5l1f+IO1SfmUN/6i2JjcnE07eYArNrCfbMgkFavj50\n2ne2fSaYM4p0o147O9Ty8jCyY9vuh/ZGid6qUe3TBI6/okWfmYw6FVbRpNfVEeG7\nkPfkDW/JdH7qkWTFbh3eH1k=\n-----END PRIVATE KEY-----\n</code></pre>\n\n<p>I have a JWE data as below which was encrypted using the public key generated from above private key/certificate</p>\n\n<pre><code>aaaaa.bbbbb.ccccc.ddddd.eeeee\n</code></pre>\n\n<p><strong>Can someone give me java code I can use to decrypt this JWE using my private key?</strong> I cannot find a clear answer from internet. I am kind if new to this JWE concept </p>\n"},{"tags":["java","postgresql","hibernate","spring-boot","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":16351912,"reputation":125,"user_id":11810194,"display_name":"andy489"},"score":0,"creation_date":1672397875,"post_id":54336968,"comment_id":132282064,"body_markdown":"where can we add this property?","body":"where can we add this property?"}],"tags":[],"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1665904408,"creation_date":1548284196,"answer_id":54336968,"question_id":54336507,"body_markdown":"Adding this property worked and created schema if not exist [here][1]\r\n\r\n    jpaProps.put(&quot;javax.persistence.create-database-schemas&quot;, true);\r\n\r\n&gt;The JPA variant of hibernate.hbm2ddl.create_namespaces. Specifies whether the persistence provider is to create the database schema(s) in addition to creating database objects (tables, sequences, constraints, etc). The value of this boolean property should be set to true if the persistence provider is to create schemas in the database or to generate DDL that contains &quot;CREATE SCHEMA&quot; commands. If this property is not supplied (or is explicitly false), the provider should not attempt to create database schemas.\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl","title":"Create schema if does not exist by using spring Jpa with hibernate","body":"<p>Adding this property worked and created schema if not exist <a href=\"https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>jpaProps.put(&quot;javax.persistence.create-database-schemas&quot;, true);\n</code></pre>\n<blockquote>\n<p>The JPA variant of hibernate.hbm2ddl.create_namespaces. Specifies whether the persistence provider is to create the database schema(s) in addition to creating database objects (tables, sequences, constraints, etc). The value of this boolean property should be set to true if the persistence provider is to create schemas in the database or to generate DDL that contains &quot;CREATE SCHEMA&quot; commands. If this property is not supplied (or is explicitly false), the provider should not attempt to create database schemas.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":11456710,"reputation":734,"user_id":8397480,"display_name":"xardbaiz"},"score":2,"creation_date":1691581609,"post_id":68340837,"comment_id":135510407,"body_markdown":"Just FYI: `hibernate.hbm2dll.create_namespaces` is deprecated now. Better to use `hibernate.hbm2ddl.create_namespaces`","body":"Just FYI: <code>hibernate.hbm2dll.create_namespaces</code> is deprecated now. Better to use <code>hibernate.hbm2ddl.create_namespaces</code>"}],"tags":[],"owner":{"account_id":2516897,"reputation":146,"user_id":2188126,"display_name":"Enix"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1693073608,"creation_date":1626050141,"answer_id":68340837,"question_id":54336507,"body_markdown":"While the other answer is totally correct, I&#39;m sharing what worked for me. Adding this to `application.properties` file will create schemas if absent:\r\n\r\n    spring.jpa.properties.hibernate.hbm2ddl.create_namespaces=true\r\n\r\nHere we use the Hibernates native property prefixed (spring.jpa.properties.*) with Spring JPA.\r\n\r\nSimilarly, you can use many other [Hibernates][1] native properties this way.\r\n\r\n[Spring Docs][2]\r\n\r\n&gt; You can set it, along with other Hibernate native properties, by using spring.jpa.properties.* (the prefix is stripped before adding them to the entity manager).\r\n\r\n *In my case I was using MSSQL Server*\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#schema-generation\r\n  [2]: https://docs.spring.io/spring-boot/docs/2.3.3.RELEASE/reference/htmlsingle/#boot-features-creating-and-dropping-jpa-databases","title":"Create schema if does not exist by using spring Jpa with hibernate","body":"<p>While the other answer is totally correct, I'm sharing what worked for me. Adding this to <code>application.properties</code> file will create schemas if absent:</p>\n<pre><code>spring.jpa.properties.hibernate.hbm2ddl.create_namespaces=true\n</code></pre>\n<p>Here we use the Hibernates native property prefixed (spring.jpa.properties.*) with Spring JPA.</p>\n<p>Similarly, you can use many other <a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#schema-generation\" rel=\"nofollow noreferrer\">Hibernates</a> native properties this way.</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/2.3.3.RELEASE/reference/htmlsingle/#boot-features-creating-and-dropping-jpa-databases\" rel=\"nofollow noreferrer\">Spring Docs</a></p>\n<blockquote>\n<p>You can set it, along with other Hibernate native properties, by using spring.jpa.properties.* (the prefix is stripped before adding them to the entity manager).</p>\n</blockquote>\n<p><em>In my case I was using MSSQL Server</em></p>\n"},{"comments":[{"owner":{"account_id":3026387,"reputation":440,"user_id":2566304,"accept_rate":0,"display_name":"Andrey M. Stepanov"},"score":0,"creation_date":1679275829,"post_id":71676214,"comment_id":133686926,"body_markdown":"Thank you so much. I was looking for the way to generate both a new schema and tables based on entities, and your configuration created them perfectly","body":"Thank you so much. I was looking for the way to generate both a new schema and tables based on entities, and your configuration created them perfectly"}],"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648638877,"creation_date":1648638877,"answer_id":71676214,"question_id":54336507,"body_markdown":"This is what worked for me for Postgres on Springboot 2.6.2.\r\n\r\nIt will create the schema (adapterborder) if it does not exist and use it as the default_schema when creating all Entity Tables.\r\n\r\nEnabled TRACE for logging to see how it works as well.\r\n\r\n\r\n    spring:\r\n      jpa:\r\n        open-in-view: false\r\n        generate-ddl: true\r\n        properties:\r\n          javax:\r\n            persistence:\r\n              schema-generation:\r\n                database:\r\n                  action: create\r\n          hibernate:\r\n            show_sql: true\r\n            use_sql_comments: true\r\n            format_sql: true\r\n            generate_statistics: false\r\n            jdbc:\r\n              fetch_size: 2000\r\n              lob.non_contextual_creation: true\r\n            dialect: org.hibernate.dialect.PostgreSQLDialect\r\n            ddl-auto: create\r\n            hbm2dll:\r\n              create_namespaces: true\r\n            default_schema: adapterborder\r\n    \r\n      datasource:\r\n        url: jdbc:postgresql://localhost:5432/postgres?currentSchema=adapterborder\r\n        username: postgres\r\n        password: postgres\r\n        driver-class-name: org.postgresql.Driver\r\n        testWhileIdle: true\r\n        hikari:\r\n          minimumIdle: 5\r\n          maximumPoolSize: 20\r\n          idleTimeout: 30000\r\n          poolName: SpringBootJPAHikariCP\r\n          maxLifetime: 200000\r\n          connectionTimeout: 30000\r\n          connection-test-query: SELECT 1\r\n    \r\n    logging:\r\n      level:\r\n        &#39;[org.springframework.data]&#39;: TRACE\r\n        &#39;[org.hibernate]&#39;: TRACE\r\n        &#39;[javax.persistence]&#39;: TRACE","title":"Create schema if does not exist by using spring Jpa with hibernate","body":"<p>This is what worked for me for Postgres on Springboot 2.6.2.</p>\n<p>It will create the schema (adapterborder) if it does not exist and use it as the default_schema when creating all Entity Tables.</p>\n<p>Enabled TRACE for logging to see how it works as well.</p>\n<pre><code>spring:\n  jpa:\n    open-in-view: false\n    generate-ddl: true\n    properties:\n      javax:\n        persistence:\n          schema-generation:\n            database:\n              action: create\n      hibernate:\n        show_sql: true\n        use_sql_comments: true\n        format_sql: true\n        generate_statistics: false\n        jdbc:\n          fetch_size: 2000\n          lob.non_contextual_creation: true\n        dialect: org.hibernate.dialect.PostgreSQLDialect\n        ddl-auto: create\n        hbm2dll:\n          create_namespaces: true\n        default_schema: adapterborder\n\n  datasource:\n    url: jdbc:postgresql://localhost:5432/postgres?currentSchema=adapterborder\n    username: postgres\n    password: postgres\n    driver-class-name: org.postgresql.Driver\n    testWhileIdle: true\n    hikari:\n      minimumIdle: 5\n      maximumPoolSize: 20\n      idleTimeout: 30000\n      poolName: SpringBootJPAHikariCP\n      maxLifetime: 200000\n      connectionTimeout: 30000\n      connection-test-query: SELECT 1\n\nlogging:\n  level:\n    '[org.springframework.data]': TRACE\n    '[org.hibernate]': TRACE\n    '[javax.persistence]': TRACE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1811999,"reputation":155,"user_id":1647855,"accept_rate":71,"display_name":"foshoshin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701340274,"creation_date":1701340274,"answer_id":77577692,"question_id":54336507,"body_markdown":"Updated answer for December 2023 Running Spring boot 3.2 with Hibernate 6.3.1: we now have `jakarta.peristence.create-database-schemas: true`\r\n\r\nExample:\r\n\r\n  \r\n\r\n    jpa:\r\n      hibernate:      \r\n        ddl-auto: create\r\n      properties:\r\n        jakarta:\r\n          persistence:\r\n            create-database-schemas: true\r\n        hibernate:\r\n          default_schema: ${DB_SCHEMA:}","title":"Create schema if does not exist by using spring Jpa with hibernate","body":"<p>Updated answer for December 2023 Running Spring boot 3.2 with Hibernate 6.3.1: we now have <code>jakarta.peristence.create-database-schemas: true</code></p>\n<p>Example:</p>\n<pre><code>jpa:\n  hibernate:      \n    ddl-auto: create\n  properties:\n    jakarta:\n      persistence:\n        create-database-schemas: true\n    hibernate:\n      default_schema: ${DB_SCHEMA:}\n</code></pre>\n"}],"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17807,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":54336968,"answer_count":4,"score":5,"last_activity_date":1701340274,"creation_date":1548281627,"question_id":54336507,"body_markdown":"I&#39;m working on spring boot 2 application and trying to establish connection with postgresql database with configuring hikari datasource and spring Jpa.\r\n\r\nI&#39;m succeed in that and i&#39;m using `hibernate.hbm2ddl.auto` as `update` so it is creating table if not exists, but only the problem is it is throwing an exception when schema does not exist\r\n\r\n**Error**\r\n\r\n    GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\r\n    Caused by: org.postgresql.util.PSQLException: ERROR: schema &quot;test_schema&quot; does not exist\r\n\r\nI configured everything manually through config class\r\n\r\n**Config Class**\r\n\r\n    @Bean\r\n\t@Primary\r\n\tpublic HikariDataSource dataSource() {\r\n\t\t\r\n\t\tHikariConfig config = new HikariConfig();\r\n\t\t\r\n\t\tconfig.setJdbcUrl(databaseUrl);\r\n\t\tconfig.setUsername(username);\r\n\t\tconfig.setPassword(password);\r\n\t\tconfig.setDriverClassName(driverClassName);\r\n\t\tconfig.setConnectionTimeout(connectionTimeout);\r\n\t\tconfig.setIdleTimeout(idleTimeout);\r\n\t\tconfig.setMaximumPoolSize(maxpoolSize);\r\n\t\tconfig.setMaxLifetime(maxLifeTime);\r\n\t\tconfig.setMinimumIdle(minIdleConnections);\r\n\t\t//config.setPoolName(poolName);\r\n\t\t\r\n\t\treturn new HikariDataSource(config);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic Properties additionalProps() {\r\n\t\tProperties jpaProps = new Properties();\r\n\t\t\r\n\t\tjpaProps.put(hbDialect, &quot;org.hibernate.dialect.PostgreSQLDialect&quot;);\r\n\t\tjpaProps.put(autoDDL, &quot;update&quot;);\r\n\t\tjpaProps.put(showSql, true);\r\n\t\tjpaProps.put(formatSql, true);\r\n\t\t\r\n\t\treturn jpaProps;\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n\t\tLocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n\t\tfactory.setDataSource(dataSource());\r\n\t\tfactory.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n\t\tfactory.setPackagesToScan(&quot;com.target.storetaskcount.entity&quot;);\r\n\t\tfactory.setJpaProperties(additionalProps());\r\n\t\treturn factory;\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic JpaTransactionManager transactionManager(EntityManagerFactory factory) {\r\n\t\tJpaTransactionManager transactionManager = new JpaTransactionManager();\r\n\t\ttransactionManager.setEntityManagerFactory(entityManagerFactory().getObject());\r\n\t\treturn transactionManager;\r\n\t}\r\n\r\nHow would i make this to create schema if not exist?\r\n\r\nI saw a similar question here and tried everything no luck so far [similar-question][1] (i don&#39;t wanna use flyway db)\r\n\r\nHere is the documentation [hibernate-doc][2], but it&#39;s not clear how add this property to create schema `javax.persistence.schema-generation.database.action`\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/38299685/postgresql-hibernate-spring-auto-create-database/46035190\r\n  [2]: https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl","title":"Create schema if does not exist by using spring Jpa with hibernate","body":"<p>I'm working on spring boot 2 application and trying to establish connection with postgresql database with configuring hikari datasource and spring Jpa.</p>\n\n<p>I'm succeed in that and i'm using <code>hibernate.hbm2ddl.auto</code> as <code>update</code> so it is creating table if not exists, but only the problem is it is throwing an exception when schema does not exist</p>\n\n<p><strong>Error</strong></p>\n\n<pre><code>GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\nCaused by: org.postgresql.util.PSQLException: ERROR: schema \"test_schema\" does not exist\n</code></pre>\n\n<p>I configured everything manually through config class</p>\n\n<p><strong>Config Class</strong></p>\n\n<pre><code>@Bean\n@Primary\npublic HikariDataSource dataSource() {\n\n    HikariConfig config = new HikariConfig();\n\n    config.setJdbcUrl(databaseUrl);\n    config.setUsername(username);\n    config.setPassword(password);\n    config.setDriverClassName(driverClassName);\n    config.setConnectionTimeout(connectionTimeout);\n    config.setIdleTimeout(idleTimeout);\n    config.setMaximumPoolSize(maxpoolSize);\n    config.setMaxLifetime(maxLifeTime);\n    config.setMinimumIdle(minIdleConnections);\n    //config.setPoolName(poolName);\n\n    return new HikariDataSource(config);\n}\n\n@Bean\npublic Properties additionalProps() {\n    Properties jpaProps = new Properties();\n\n    jpaProps.put(hbDialect, \"org.hibernate.dialect.PostgreSQLDialect\");\n    jpaProps.put(autoDDL, \"update\");\n    jpaProps.put(showSql, true);\n    jpaProps.put(formatSql, true);\n\n    return jpaProps;\n}\n\n@Bean\npublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n    LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n    factory.setDataSource(dataSource());\n    factory.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n    factory.setPackagesToScan(\"com.target.storetaskcount.entity\");\n    factory.setJpaProperties(additionalProps());\n    return factory;\n}\n\n@Bean\npublic JpaTransactionManager transactionManager(EntityManagerFactory factory) {\n    JpaTransactionManager transactionManager = new JpaTransactionManager();\n    transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());\n    return transactionManager;\n}\n</code></pre>\n\n<p>How would i make this to create schema if not exist?</p>\n\n<p>I saw a similar question here and tried everything no luck so far <a href=\"https://stackoverflow.com/questions/38299685/postgresql-hibernate-spring-auto-create-database/46035190\">similar-question</a> (i don't wanna use flyway db)</p>\n\n<p>Here is the documentation <a href=\"https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl\" rel=\"noreferrer\">hibernate-doc</a>, but it's not clear how add this property to create schema <code>javax.persistence.schema-generation.database.action</code></p>\n"},{"tags":["java","data-structures","interface","stack"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1701276937,"post_id":77572832,"comment_id":136756674,"body_markdown":"Here is the _JavaDoc_ entry, for _[The Collections Framework (Java SE 21 &amp; JDK 21)](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/doc-files/coll-index.html#the-collections-framework-heading)_.  And, here is the _Java_ tutorial, regarding,   _[Trail: Collections (The Java Tutorials)](https://docs.oracle.com/javase/tutorial/collections/index.html)_.","body":"Here is the <i>JavaDoc</i> entry, for <i><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/doc-files/coll-index.html#the-collections-framework-heading\" rel=\"nofollow noreferrer\">The Collections Framework (Java SE 21 &amp; JDK 21)</a></i>.  And, here is the <i>Java</i> tutorial, regarding,   <i><a href=\"https://docs.oracle.com/javase/tutorial/collections/index.html\" rel=\"nofollow noreferrer\">Trail: Collections (The Java Tutorials)</a></i>."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1701296368,"post_id":77572832,"comment_id":136759718,"body_markdown":"Tip: [*Eclipse Collections*](https://eclipse.dev/collections/) offers interfaces and implementations for stacks, including methods for `push`, `pop`, and `peek`. See [`MutableStack`](https://eclipse.dev/collections/javadoc/11.1.0/org/eclipse/collections/api/stack/MutableStack.html). Perhaps *Google Guava* has something similar.","body":"Tip: <a href=\"https://eclipse.dev/collections/\" rel=\"nofollow noreferrer\"><i>Eclipse Collections</i></a> offers interfaces and implementations for stacks, including methods for <code>push</code>, <code>pop</code>, and <code>peek</code>. See <a href=\"https://eclipse.dev/collections/javadoc/11.1.0/org/eclipse/collections/api/stack/MutableStack.html\" rel=\"nofollow noreferrer\"><code>MutableStack</code></a>. Perhaps <i>Google Guava</i> has something similar."}],"answers":[{"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1701274754,"post_id":77572857,"comment_id":136756190,"body_markdown":"Thanks, but that would prevent me from using an `ArrayList` for a concrete type, which is a pity as `ArrayList` already supports efficient operations to add to the end and remove from the end (the stack operations).","body":"Thanks, but that would prevent me from using an <code>ArrayList</code> for a concrete type, which is a pity as <code>ArrayList</code> already supports efficient operations to add to the end and remove from the end (the stack operations)."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":1,"creation_date":1701276767,"post_id":77572857,"comment_id":136756642,"body_markdown":"&quot;without imposing unwanted demands on the concrete type&quot; That statement is wrong. Deque has way more methods than needed for a stack.","body":"&quot;without imposing unwanted demands on the concrete type&quot; That statement is wrong. Deque has way more methods than needed for a stack."},{"owner":{"account_id":25256651,"reputation":1,"user_id":19088272,"display_name":"LastCode"},"score":0,"creation_date":1701277364,"post_id":77572857,"comment_id":136756749,"body_markdown":"np bro \ni think rzwitserloot posted the correct thing","body":"np bro  i think rzwitserloot posted the correct thing"}],"tags":[],"owner":{"account_id":25256651,"reputation":1,"user_id":19088272,"display_name":"LastCode"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701274626,"creation_date":1701274626,"answer_id":77572857,"question_id":77572832,"body_markdown":"    public void foo(Deque&lt;String&gt; stack) {\r\n        stack.push(bar());\r\n        // ...;\r\n        String xyz = stack.pop();\r\n    }\r\n\r\n\r\nusing Deque, you have the necessary stack operations without imposing unwanted demands on the concrete type. This interface is part of the Java Collections Framework and doesn&#39;t require synchronization overhead as with the legacy Stack class.","title":"Java interface for stack operations","body":"<pre><code>public void foo(Deque&lt;String&gt; stack) {\n    stack.push(bar());\n    // ...;\n    String xyz = stack.pop();\n}\n</code></pre>\n<p>using Deque, you have the necessary stack operations without imposing unwanted demands on the concrete type. This interface is part of the Java Collections Framework and doesn't require synchronization overhead as with the legacy Stack class.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1701302111,"creation_date":1701275162,"answer_id":77572929,"question_id":77572832,"body_markdown":"[`SequencedCollection`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html) probably steers closest to what you&#39;re looking for; it has the obvious downside of not existing prior to JDK21, at which point `Deque` is probably the closest you want, but, as you found, it adds a little too much.\r\n\r\nCrucially for you, `ArrayList` __does__ implement `SequencedCollection`.\r\n\r\nFailing all these things, there really is no option. You&#39;re presumably looking for some type that both `ArrayDeque` as well as `ArrayList` implement, as 2 somewhat arbitrarily chosen types that can trivially support fast &#39;add at end&#39; and &#39;remove last&#39; operations which is all you really need. The only one that is halfway relevant is `Collection`, but it does not offer &#39;remove from end&#39;, thus, cannot be used here.\r\n\r\nHence, if requiring JDK21 isn&#39;t an option, then you&#39;re either stuck making multiple methods (one that takes any `Deque`, one that takes an `ArrayList` for example), making wrappers (make your own interface, then write methods that wrap types well known to support it into an object that implements this interface):\r\n\r\n```\r\npublic interface Stackish&lt;E&gt; {\r\n  void push(E elem);\r\n  E pop() throws NoSuchElementException;\r\n\r\n  public static &lt;E&gt; Stackish&lt;E&gt; of(ArrayList&lt;E&gt; list) {\r\n    return new Stackish&lt;E&gt;() {\r\n      @Override public void push(E elem) {\r\n        list.add(elem);\r\n      }\r\n\r\n      @Override public E pop() throws NoSuchElementException {\r\n        try {\r\n          return list.remove(list.size() - 1);\r\n        } catch (IndexOutOfBoundsException e) {\r\n          throw new NoSuchElementException();\r\n        }\r\n    };\r\n  }\r\n}\r\n```\r\n\r\nThis would have the rather obvious annoying factor that users of your library need to wrap their collections.","title":"Java interface for stack operations","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> probably steers closest to what you're looking for; it has the obvious downside of not existing prior to JDK21, at which point <code>Deque</code> is probably the closest you want, but, as you found, it adds a little too much.</p>\n<p>Crucially for you, <code>ArrayList</code> <strong>does</strong> implement <code>SequencedCollection</code>.</p>\n<p>Failing all these things, there really is no option. You're presumably looking for some type that both <code>ArrayDeque</code> as well as <code>ArrayList</code> implement, as 2 somewhat arbitrarily chosen types that can trivially support fast 'add at end' and 'remove last' operations which is all you really need. The only one that is halfway relevant is <code>Collection</code>, but it does not offer 'remove from end', thus, cannot be used here.</p>\n<p>Hence, if requiring JDK21 isn't an option, then you're either stuck making multiple methods (one that takes any <code>Deque</code>, one that takes an <code>ArrayList</code> for example), making wrappers (make your own interface, then write methods that wrap types well known to support it into an object that implements this interface):</p>\n<pre><code>public interface Stackish&lt;E&gt; {\n  void push(E elem);\n  E pop() throws NoSuchElementException;\n\n  public static &lt;E&gt; Stackish&lt;E&gt; of(ArrayList&lt;E&gt; list) {\n    return new Stackish&lt;E&gt;() {\n      @Override public void push(E elem) {\n        list.add(elem);\n      }\n\n      @Override public E pop() throws NoSuchElementException {\n        try {\n          return list.remove(list.size() - 1);\n        } catch (IndexOutOfBoundsException e) {\n          throw new NoSuchElementException();\n        }\n    };\n  }\n}\n</code></pre>\n<p>This would have the rather obvious annoying factor that users of your library need to wrap their collections.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701340172,"creation_date":1701303567,"answer_id":77575205,"question_id":77572832,"body_markdown":"As explained in [Answer by rzwitserloot][1], the [`SequencedCollection`][2] interface implemented by `List` and [`ArrayList`][3] in Java 21+ makes creating your own `Stack` class a bit easier. \r\n\r\nHere is some rough initial code as a proof-of-concept. Caveat: I am not an expert on [Java Generics][4]. \r\n\r\nFirst the interface.\r\n\r\n```java\r\npublic interface Stack &lt; T &gt;\r\n{\r\n    public void push ( T element );\r\n\r\n    public T pop ( );\r\n\r\n    public T peek ( );\r\n}\r\n```\r\n\r\nAnd an implementation. Not thread-safe. Not thoroughly tested.\r\n\r\n```java\r\nimport java.util.ArrayList;\r\n\r\n// Initial implementation of a stack.\r\n// Not thread-safe.\r\n// Uses `SequencedCollection` methods in Java 21+.\r\npublic class StackArray &lt; T &gt; implements Stack &lt; T &gt;\r\n{\r\n    private final ArrayList &lt; T &gt; list = new ArrayList &lt;&gt; ( );\r\n\r\n    @Override\r\n    public void push ( final T element )\r\n    {\r\n        this.list.add ( element );\r\n    }\r\n\r\n    public T peek ( )\r\n    {\r\n        if ( this.list.isEmpty ( ) ) return null;\r\n        return this.list.getLast ( );\r\n    }\r\n\r\n    @Override\r\n    public T pop ( )\r\n    {\r\n        if ( this.list.isEmpty ( ) ) return null;\r\n        return this.list.removeLast ( );\r\n    }\r\n\r\n    // `Object` overrides.\r\n\r\n    @Override\r\n    public String toString ( )\r\n    {\r\n        return &quot;StackArray{&quot; + list + &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\nUsage:\r\n\r\n        Stack &lt; String &gt; stack = new StackArray &lt;&gt; ( );\r\n        String nothing = stack.peek ( );\r\n        System.out.println ( &quot;nothing = &quot; + nothing );\r\n\r\n        stack.push ( &quot;Alice&quot; );\r\n        stack.push ( &quot;Bob&quot; );\r\n        String bob = stack.peek ( );\r\n        System.out.println ( &quot;bob = &quot; + bob );\r\n\r\n        stack.push ( &quot;Carol&quot; );\r\n        System.out.println ( &quot;stack = &quot; + stack );\r\n\r\n        String carol = stack.pop ( );\r\n        System.out.println ( &quot;carol = &quot; + carol );\r\n        System.out.println ( &quot;stack = &quot; + stack );\r\n\r\n        String bob2 = stack.pop ( );\r\n        System.out.println ( &quot;bob2 = &quot; + bob2 );\r\n\r\n        System.out.println ( &quot;stack = &quot; + stack );\r\n\r\nWhen run:\r\n\r\n```none\r\nnothing = null\r\nbob = Bob\r\nstack = StackArray{[Alice, Bob, Carol]}\r\ncarol = Carol\r\nstack = StackArray{[Alice, Bob]}\r\nbob2 = Bob\r\nstack = StackArray{[Alice]}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77572929/642706\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ArrayList.html\r\n  [4]: https://en.wikipedia.org/wiki/Generics_in_Java","title":"Java interface for stack operations","body":"<p>As explained in <a href=\"https://stackoverflow.com/a/77572929/642706\">Answer by rzwitserloot</a>, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> interface implemented by <code>List</code> and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ArrayList.html\" rel=\"nofollow noreferrer\"><code>ArrayList</code></a> in Java 21+ makes creating your own <code>Stack</code> class a bit easier.</p>\n<p>Here is some rough initial code as a proof-of-concept. Caveat: I am not an expert on <a href=\"https://en.wikipedia.org/wiki/Generics_in_Java\" rel=\"nofollow noreferrer\">Java Generics</a>.</p>\n<p>First the interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Stack &lt; T &gt;\n{\n    public void push ( T element );\n\n    public T pop ( );\n\n    public T peek ( );\n}\n</code></pre>\n<p>And an implementation. Not thread-safe. Not thoroughly tested.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\n\n// Initial implementation of a stack.\n// Not thread-safe.\n// Uses `SequencedCollection` methods in Java 21+.\npublic class StackArray &lt; T &gt; implements Stack &lt; T &gt;\n{\n    private final ArrayList &lt; T &gt; list = new ArrayList &lt;&gt; ( );\n\n    @Override\n    public void push ( final T element )\n    {\n        this.list.add ( element );\n    }\n\n    public T peek ( )\n    {\n        if ( this.list.isEmpty ( ) ) return null;\n        return this.list.getLast ( );\n    }\n\n    @Override\n    public T pop ( )\n    {\n        if ( this.list.isEmpty ( ) ) return null;\n        return this.list.removeLast ( );\n    }\n\n    // `Object` overrides.\n\n    @Override\n    public String toString ( )\n    {\n        return &quot;StackArray{&quot; + list + '}';\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>    Stack &lt; String &gt; stack = new StackArray &lt;&gt; ( );\n    String nothing = stack.peek ( );\n    System.out.println ( &quot;nothing = &quot; + nothing );\n\n    stack.push ( &quot;Alice&quot; );\n    stack.push ( &quot;Bob&quot; );\n    String bob = stack.peek ( );\n    System.out.println ( &quot;bob = &quot; + bob );\n\n    stack.push ( &quot;Carol&quot; );\n    System.out.println ( &quot;stack = &quot; + stack );\n\n    String carol = stack.pop ( );\n    System.out.println ( &quot;carol = &quot; + carol );\n    System.out.println ( &quot;stack = &quot; + stack );\n\n    String bob2 = stack.pop ( );\n    System.out.println ( &quot;bob2 = &quot; + bob2 );\n\n    System.out.println ( &quot;stack = &quot; + stack );\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>nothing = null\nbob = Bob\nstack = StackArray{[Alice, Bob, Carol]}\ncarol = Carol\nstack = StackArray{[Alice, Bob]}\nbob2 = Bob\nstack = StackArray{[Alice]}\n</code></pre>\n"}],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77572929,"answer_count":3,"score":0,"last_activity_date":1701340172,"creation_date":1701274438,"question_id":77572832,"body_markdown":"I have in mind a method that takes as an argument a collection that supports just the stack operations `push` and `pop`. What is the most appropriate interface for this?\r\n\r\n    public void foo(WhatShouldThisTypeBe&lt;String&gt; stack) {\r\n        stack.push(bar());\r\n        ...;\r\n        String xyz = stack.pop();\r\n    }\r\n        \r\n\r\nMy thoughts are:\r\n\r\n1. I could make my method take a `java.util.Stack` but that is a legacy class, with unwanted synchronization overhead, and shouldn&#39;t be used in 2023.\r\n\r\n2. I could make it take a `List` (which supports the equivalent operations `addLast()` and `removeLast()`) but that would put unnecessary demands on the concrete type, such as the ability to take the nth element.\r\n\r\n3. I could make it take a `Deque` but again that would put unnecessary demands on the concrete type, such as support for the Queue operations `add` and `remove` which are not required.\r\n\r\nIs there a Java interface that suits stack operations more precisely than any of the above?","title":"Java interface for stack operations","body":"<p>I have in mind a method that takes as an argument a collection that supports just the stack operations <code>push</code> and <code>pop</code>. What is the most appropriate interface for this?</p>\n<pre><code>public void foo(WhatShouldThisTypeBe&lt;String&gt; stack) {\n    stack.push(bar());\n    ...;\n    String xyz = stack.pop();\n}\n    \n</code></pre>\n<p>My thoughts are:</p>\n<ol>\n<li><p>I could make my method take a <code>java.util.Stack</code> but that is a legacy class, with unwanted synchronization overhead, and shouldn't be used in 2023.</p>\n</li>\n<li><p>I could make it take a <code>List</code> (which supports the equivalent operations <code>addLast()</code> and <code>removeLast()</code>) but that would put unnecessary demands on the concrete type, such as the ability to take the nth element.</p>\n</li>\n<li><p>I could make it take a <code>Deque</code> but again that would put unnecessary demands on the concrete type, such as support for the Queue operations <code>add</code> and <code>remove</code> which are not required.</p>\n</li>\n</ol>\n<p>Is there a Java interface that suits stack operations more precisely than any of the above?</p>\n"},{"tags":["java","spring-webflux","spring-oauth2","spring-authorization-server","spring-resource-server"],"comments":[{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1701359420,"post_id":77575850,"comment_id":136768268,"body_markdown":"You say that you&#39;re using WebFlux, but your config classes and logs indicate you are not because `SecurityFilterChain` and `JwtDecoder` are for servlet-based applications. Please see [OAuth2 WebFlux](https://docs.spring.io/spring-security/reference/reactive/oauth2/index.html) docs, specifically the [JWT configuration example](https://docs.spring.io/spring-security/reference/reactive/oauth2/resource-server/jwt.html#webflux-oauth2resourceserver-jwt-sansboot). Without more details, I&#39;m unable to determine the cause but it seems you have one or more configuration problems.","body":"You say that you&#39;re using WebFlux, but your config classes and logs indicate you are not because <code>SecurityFilterChain</code> and <code>JwtDecoder</code> are for servlet-based applications. Please see <a href=\"https://docs.spring.io/spring-security/reference/reactive/oauth2/index.html\" rel=\"nofollow noreferrer\">OAuth2 WebFlux</a> docs, specifically the <a href=\"https://docs.spring.io/spring-security/reference/reactive/oauth2/resource-server/jwt.html#webflux-oauth2resourceserver-jwt-sansboot\" rel=\"nofollow noreferrer\">JWT configuration example</a>. Without more details, I&#39;m unable to determine the cause but it seems you have one or more configuration problems."},{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1701359520,"post_id":77575850,"comment_id":136768285,"body_markdown":"See [WebFlux Resource Server Sample](https://github.com/spring-projects/spring-security-samples/tree/main/reactive/webflux/java/oauth2/resource-server) and the readme for a concrete working example, or the demo-client sample in the [Spring Authorization Server Samples](https://github.com/spring-projects/spring-authorization-server/tree/main/samples) (which is not a WebFlux application).","body":"See <a href=\"https://github.com/spring-projects/spring-security-samples/tree/main/reactive/webflux/java/oauth2/resource-server\" rel=\"nofollow noreferrer\">WebFlux Resource Server Sample</a> and the readme for a concrete working example, or the demo-client sample in the <a href=\"https://github.com/spring-projects/spring-authorization-server/tree/main/samples\" rel=\"nofollow noreferrer\">Spring Authorization Server Samples</a> (which is not a WebFlux application)."},{"owner":{"account_id":27597641,"reputation":11,"user_id":21063532,"display_name":"Mykhailo Ordyntsev"},"score":0,"creation_date":1701403822,"post_id":77575850,"comment_id":136774143,"body_markdown":"@SteveRiesenberg I used Webflux only for HTTP request, It could not to produce exceptions in this way. But, I rewrote SecurityConfig in Resource server like it was in [WebFlux Resource Server Sample](https://github.com/spring-projects/spring-security-samples/tree/main/reactive/webflux/java/oauth2/resource-server) and I had same error.","body":"@SteveRiesenberg I used Webflux only for HTTP request, It could not to produce exceptions in this way. But, I rewrote SecurityConfig in Resource server like it was in <a href=\"https://github.com/spring-projects/spring-security-samples/tree/main/reactive/webflux/java/oauth2/resource-server\" rel=\"nofollow noreferrer\">WebFlux Resource Server Sample</a> and I had same error."},{"owner":{"account_id":27597641,"reputation":11,"user_id":21063532,"display_name":"Mykhailo Ordyntsev"},"score":0,"creation_date":1701404476,"post_id":77575850,"comment_id":136774196,"body_markdown":"After that I saw, that I had made a mistake in `WebClientConfig`, and my `WelcomeClient` sends `accsess_token` value in auth header, not `id_token` value. I will search how to resolve it and after that I will write an answer. But knowing the problem is already an advantage.","body":"After that I saw, that I had made a mistake in <code>WebClientConfig</code>, and my <code>WelcomeClient</code> sends <code>accsess_token</code> value in auth header, not <code>id_token</code> value. I will search how to resolve it and after that I will write an answer. But knowing the problem is already an advantage."}],"owner":{"account_id":27597641,"reputation":11,"user_id":21063532,"display_name":"Mykhailo Ordyntsev"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701338931,"creation_date":1701317605,"question_id":77575850,"body_markdown":"I am trying to achieve content on resource server with WebFlux.\r\nI am sure, that my oauth2 authorization server works correctly and returns valid token.\r\n\r\nRequest, that my resource server achieves:\r\n\r\n```\r\n2023-11-30T04:51:01.070+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.a.coyote.http11.Http11InputBuffer      : Received \r\n[GET / HTTP/1.1\r\naccept-encoding: gzip\r\nuser-agent: ReactorNetty/1.1.12\r\nhost: localhost:8090\r\naccept: */*\r\nAuthorization: Bearer ya29.valid-token-that-i-removed\r\n\r\n]\r\n```\r\n\r\nAfter that spring starts to validate request:\r\n\r\n```\r\n2023-11-30T04:51:01.102+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /\r\n2023-11-30T04:51:01.103+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\r\n2023-11-30T04:51:01.103+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\r\n2023-11-30T04:51:01.104+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\r\n2023-11-30T04:51:01.105+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\r\n2023-11-30T04:51:01.106+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/12)\r\n2023-11-30T04:51:01.107+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match And [CsrfNotRequired [TRACE, HEAD, GET, OPTIONS], Not [Or [org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$BearerTokenRequestMatcher@158b5fff]]]\r\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/12)\r\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern=&#39;/logout&#39;, POST]\r\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/12)\r\n2023-11-30T04:51:01.108+01:00 DEBUG 13480 --- [nio-8090-exec-1] org.apache.tomcat.util.http.Parameters   : Set encoding to UTF-8\r\n2023-11-30T04:51:01.109+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)\r\n2023-11-30T04:51:01.110+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.oauth2.jwt.NimbusJwtDecoder        : Failed to parse token\r\n\r\njava.text.ParseException: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\r\n\tat com.nimbusds.jwt.JWTParser.parse(JWTParser.java:71) ~[nimbus-jose-jwt-9.24.4.jar:9.24.4]\r\n\tat org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:144) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.jwt.NimbusJwtDecoder.decode(NimbusJwtDecoder.java:133) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat net.maslyna.oauth2.resource.filter.LogFilter.doFilter(LogFilter.java:31) ~[classes/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]\r\n\r\n2023-11-30T04:51:01.112+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Failed to authenticate since the JWT was invalid\r\n2023-11-30T04:51:01.113+01:00 TRACE 13480 --- [nio-8090-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Failed to process authentication request\r\n\r\norg.springframework.security.oauth2.server.resource.InvalidBearerTokenException: An error occurred while attempting to decode the Jwt: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\r\n\tat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:103) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat net.maslyna.oauth2.resource.filter.LogFilter.doFilter(LogFilter.java:31) ~[classes/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]\r\nCaused by: org.springframework.security.oauth2.jwt.BadJwtException: An error occurred while attempting to decode the Jwt: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\r\n\tat org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:148) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.jwt.NimbusJwtDecoder.decode(NimbusJwtDecoder.java:133) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\t... 61 common frames omitted\r\nCaused by: java.text.ParseException: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\r\n\tat com.nimbusds.jwt.JWTParser.parse(JWTParser.java:71) ~[nimbus-jose-jwt-9.24.4.jar:9.24.4]\r\n\tat org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:144) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\r\n\t... 63 common frames omitted\r\n\r\n```\r\n\r\n\r\n\r\nController on client service:\r\n\r\n```java\r\n\r\n@RequiredArgsConstructor\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/auth/users&quot;)\r\npublic class UserController {\r\n    private final WelcomeClient welcomeClient;\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public String welcome() {\r\n        return welcomeClient.getWelcome();\r\n    }\r\n}\r\n```\r\n\r\nSecurityConfig on client service:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http)\r\n            throws Exception {\r\n        http\r\n                .authorizeHttpRequests(authorize -&gt; {\r\n                    authorize.anyRequest().authenticated();\r\n                })\r\n                .oauth2Login(oauth2Login -&gt; oauth2Login.loginPage(&quot;/oauth2/authorization/google&quot;))\r\n                .oauth2Client(Customizer.withDefaults());\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\n\r\nWebFluxClient on client service:\r\n\r\n```java\r\n\r\n@HttpExchange(url = &quot;http://localhost:8090&quot;)\r\npublic interface WelcomeClient {\r\n    @GetExchange(&quot;/&quot;)\r\n    String getWelcome();\r\n}\r\n```\r\n\r\nWebClientConfig on client service:\r\n\r\n```\r\n@Configuration\r\npublic class WebClientConfig {\r\n\r\n    @Bean\r\n    public WelcomeClient welcomeClient(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n        return httpServiceProxyFactory(authorizedClientManager).createClient(WelcomeClient.class);\r\n    }\r\n\r\n    private HttpServiceProxyFactory httpServiceProxyFactory(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n        ServletOAuth2AuthorizedClientExchangeFilterFunction oauth2Client =\r\n                new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n\r\n//        oauth2Client.setDefaultClientRegistrationId(&quot;google&quot;);\r\n        oauth2Client.setDefaultOAuth2AuthorizedClient(true);\r\n        WebClient webClient = WebClient.builder()\r\n                .apply(oauth2Client.oauth2Configuration())\r\n                .build();\r\n        WebClientAdapter client = WebClientAdapter.forClient(webClient);\r\n        return HttpServiceProxyFactory.builder(client).build();\r\n    }\r\n\r\n    @Bean\r\n    public OAuth2AuthorizedClientManager authorizedClientManager(\r\n            ClientRegistrationRepository clientRegistrationRepository,\r\n            OAuth2AuthorizedClientRepository authorizedClientRepository) {\r\n\r\n        OAuth2AuthorizedClientProvider authorizedClientProvider =\r\n                OAuth2AuthorizedClientProviderBuilder.builder()\r\n                        .authorizationCode()\r\n                        .refreshToken()\r\n                        .build();\r\n\r\n        DefaultOAuth2AuthorizedClientManager authorizedClientManager =\r\n                new DefaultOAuth2AuthorizedClientManager(\r\n                        clientRegistrationRepository, authorizedClientRepository);\r\n\r\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n\r\n        return authorizedClientManager;\r\n    }\r\n}\r\n```\r\n\r\nResource server config:\r\n\r\n```java\r\n@Configuration\r\npublic class SecurityConfig {\r\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\r\n    private String jwtIssuerUri;\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests(auth -&gt; auth.anyRequest().authenticated())\r\n                .oauth2ResourceServer(oauth2 -&gt; oauth2\r\n                        .jwt(jwt -&gt; jwt.decoder(jwtDecoder())));\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public JwtDecoder jwtDecoder() {\r\n        return JwtDecoders.fromIssuerLocation(jwtIssuerUri);\r\n    }\r\n}\r\n```\r\n\r\n\r\nI think, that I must send only token value in JSON, without headers etc. or something else.\r\nI don&#39;t have much expirience on spring reactive, and webflux with oauth2 I am trying for 1st time. I am trying to do simple oauth2 client allready for few weeks, and don&#39;t have any progress.","title":"An error occurs when Spring Resource Server tries to parse a valid JWT. Invalid JSON: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $","body":"<p>I am trying to achieve content on resource server with WebFlux.\nI am sure, that my oauth2 authorization server works correctly and returns valid token.</p>\n<p>Request, that my resource server achieves:</p>\n<pre><code>2023-11-30T04:51:01.070+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.a.coyote.http11.Http11InputBuffer      : Received \n[GET / HTTP/1.1\naccept-encoding: gzip\nuser-agent: ReactorNetty/1.1.12\nhost: localhost:8090\naccept: */*\nAuthorization: Bearer ya29.valid-token-that-i-removed\n\n]\n</code></pre>\n<p>After that spring starts to validate request:</p>\n<pre><code>2023-11-30T04:51:01.102+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /\n2023-11-30T04:51:01.103+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\n2023-11-30T04:51:01.103+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\n2023-11-30T04:51:01.104+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\n2023-11-30T04:51:01.105+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\n2023-11-30T04:51:01.106+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/12)\n2023-11-30T04:51:01.107+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match And [CsrfNotRequired [TRACE, HEAD, GET, OPTIONS], Not [Or [org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$BearerTokenRequestMatcher@158b5fff]]]\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/12)\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern='/logout', POST]\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/12)\n2023-11-30T04:51:01.108+01:00 DEBUG 13480 --- [nio-8090-exec-1] org.apache.tomcat.util.http.Parameters   : Set encoding to UTF-8\n2023-11-30T04:51:01.109+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)\n2023-11-30T04:51:01.110+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.oauth2.jwt.NimbusJwtDecoder        : Failed to parse token\n\njava.text.ParseException: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\n    at com.nimbusds.jwt.JWTParser.parse(JWTParser.java:71) ~[nimbus-jose-jwt-9.24.4.jar:9.24.4]\n    at org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:144) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.jwt.NimbusJwtDecoder.decode(NimbusJwtDecoder.java:133) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at net.maslyna.oauth2.resource.filter.LogFilter.doFilter(LogFilter.java:31) ~[classes/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]\n\n2023-11-30T04:51:01.112+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Failed to authenticate since the JWT was invalid\n2023-11-30T04:51:01.113+01:00 TRACE 13480 --- [nio-8090-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Failed to process authentication request\n\norg.springframework.security.oauth2.server.resource.InvalidBearerTokenException: An error occurred while attempting to decode the Jwt: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\n    at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:103) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at net.maslyna.oauth2.resource.filter.LogFilter.doFilter(LogFilter.java:31) ~[classes/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]\nCaused by: org.springframework.security.oauth2.jwt.BadJwtException: An error occurred while attempting to decode the Jwt: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\n    at org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:148) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.jwt.NimbusJwtDecoder.decode(NimbusJwtDecoder.java:133) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    ... 61 common frames omitted\nCaused by: java.text.ParseException: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\n    at com.nimbusds.jwt.JWTParser.parse(JWTParser.java:71) ~[nimbus-jose-jwt-9.24.4.jar:9.24.4]\n    at org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:144) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\n    ... 63 common frames omitted\n\n</code></pre>\n<p>Controller on client service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@RequiredArgsConstructor\n@RestController\n@RequestMapping(&quot;/api/v1/auth/users&quot;)\npublic class UserController {\n    private final WelcomeClient welcomeClient;\n\n    @GetMapping(&quot;/&quot;)\n    public String welcome() {\n        return welcomeClient.getWelcome();\n    }\n}\n</code></pre>\n<p>SecurityConfig on client service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http)\n            throws Exception {\n        http\n                .authorizeHttpRequests(authorize -&gt; {\n                    authorize.anyRequest().authenticated();\n                })\n                .oauth2Login(oauth2Login -&gt; oauth2Login.loginPage(&quot;/oauth2/authorization/google&quot;))\n                .oauth2Client(Customizer.withDefaults());\n        return http.build();\n    }\n}\n</code></pre>\n<p>WebFluxClient on client service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@HttpExchange(url = &quot;http://localhost:8090&quot;)\npublic interface WelcomeClient {\n    @GetExchange(&quot;/&quot;)\n    String getWelcome();\n}\n</code></pre>\n<p>WebClientConfig on client service:</p>\n<pre><code>@Configuration\npublic class WebClientConfig {\n\n    @Bean\n    public WelcomeClient welcomeClient(OAuth2AuthorizedClientManager authorizedClientManager) {\n        return httpServiceProxyFactory(authorizedClientManager).createClient(WelcomeClient.class);\n    }\n\n    private HttpServiceProxyFactory httpServiceProxyFactory(OAuth2AuthorizedClientManager authorizedClientManager) {\n        ServletOAuth2AuthorizedClientExchangeFilterFunction oauth2Client =\n                new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n\n//        oauth2Client.setDefaultClientRegistrationId(&quot;google&quot;);\n        oauth2Client.setDefaultOAuth2AuthorizedClient(true);\n        WebClient webClient = WebClient.builder()\n                .apply(oauth2Client.oauth2Configuration())\n                .build();\n        WebClientAdapter client = WebClientAdapter.forClient(webClient);\n        return HttpServiceProxyFactory.builder(client).build();\n    }\n\n    @Bean\n    public OAuth2AuthorizedClientManager authorizedClientManager(\n            ClientRegistrationRepository clientRegistrationRepository,\n            OAuth2AuthorizedClientRepository authorizedClientRepository) {\n\n        OAuth2AuthorizedClientProvider authorizedClientProvider =\n                OAuth2AuthorizedClientProviderBuilder.builder()\n                        .authorizationCode()\n                        .refreshToken()\n                        .build();\n\n        DefaultOAuth2AuthorizedClientManager authorizedClientManager =\n                new DefaultOAuth2AuthorizedClientManager(\n                        clientRegistrationRepository, authorizedClientRepository);\n\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n\n        return authorizedClientManager;\n    }\n}\n</code></pre>\n<p>Resource server config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class SecurityConfig {\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\n    private String jwtIssuerUri;\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests(auth -&gt; auth.anyRequest().authenticated())\n                .oauth2ResourceServer(oauth2 -&gt; oauth2\n                        .jwt(jwt -&gt; jwt.decoder(jwtDecoder())));\n\n        return http.build();\n    }\n\n    @Bean\n    public JwtDecoder jwtDecoder() {\n        return JwtDecoders.fromIssuerLocation(jwtIssuerUri);\n    }\n}\n</code></pre>\n<p>I think, that I must send only token value in JSON, without headers etc. or something else.\nI don't have much expirience on spring reactive, and webflux with oauth2 I am trying for 1st time. I am trying to do simple oauth2 client allready for few weeks, and don't have any progress.</p>\n"},{"tags":["java","protocol-buffers","protobuf-java"],"comments":[{"owner":{"account_id":9623017,"reputation":557,"user_id":7143587,"accept_rate":38,"display_name":"tijn167"},"score":0,"creation_date":1549631231,"post_id":54585997,"comment_id":95982296,"body_markdown":"Could you try parseDelimitedFrom?","body":"Could you try parseDelimitedFrom?"},{"owner":{"account_id":10602619,"reputation":61,"user_id":7809117,"display_name":"Praveen K H"},"score":0,"creation_date":1549641205,"post_id":54585997,"comment_id":95988088,"body_markdown":"@tijn167: but  parseDelimitedFrom accept only InputStream as parameter, here I have a string..\n\nShall I try like below and then pass this input stream to parseDelimitedFrom ?\n\nInputStream stream = new ByteArrayInputStream(exampleString.getBytes(StandardCharsets.UTF_8));","body":"@tijn167: but  parseDelimitedFrom accept only InputStream as parameter, here I have a string..  Shall I try like below and then pass this input stream to parseDelimitedFrom ?  InputStream stream = new ByteArrayInputStream(exampleString.getBytes(StandardCharsets&zwnj;&#8203;.UTF_8));"},{"owner":{"account_id":2019478,"reputation":4894,"user_id":1806005,"accept_rate":56,"display_name":"hi_my_name_is"},"score":0,"creation_date":1558420174,"post_id":54585997,"comment_id":99083820,"body_markdown":"but this json as bytes is not the same as protobuf payload bytes, protobuf does not recognize it.","body":"but this json as bytes is not the same as protobuf payload bytes, protobuf does not recognize it."}],"answers":[{"tags":[],"owner":{"account_id":6995097,"reputation":1409,"user_id":5363011,"display_name":"George Leung"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562669047,"creation_date":1562669047,"answer_id":56950813,"question_id":54585997,"body_markdown":"For your message, the serialized form should be the following 5 bytes `08-01-12-01-31`.&lt;sup&gt;1&lt;/sup&gt; The `parseFrom(byte[])` method expect such an encoding. As you give it a JSON, it misinterpret characters in the string and fails. For example, `&#39;{&#39;` means starting a group (this feature is deprecated) with tag 15.\r\n\r\nI am going to assume you are using a web framework. You provide a protobuf message for the response in the server, and the framework sends the JSON representation to the client.\r\n\r\nFor the client to consume the JSON representation, you can use the following code.\r\n```\r\nJsonFormat.parser().merge(theJsonString, Test2.newBuilder())\r\n```\r\n\r\nOf course then you are not &quot;using protobuf&quot;. Instead you are merely using protobuf generated classes.\r\n\r\n---\r\n1. For more the information of the encoding, see the [documentation](https://developers.google.com/protocol-buffers/docs/encoding) and try out the [decoder](https://protogen.marcgravell.com/decode).\r\n\r\n","title":"How to fix &quot;While parsing a protocol message, the input ended unexpectedly in the middle of a field&quot; error","body":"<p>For your message, the serialized form should be the following 5 bytes <code>08-01-12-01-31</code>.<sup>1</sup> The <code>parseFrom(byte[])</code> method expect such an encoding. As you give it a JSON, it misinterpret characters in the string and fails. For example, <code>'{'</code> means starting a group (this feature is deprecated) with tag 15.</p>\n\n<p>I am going to assume you are using a web framework. You provide a protobuf message for the response in the server, and the framework sends the JSON representation to the client.</p>\n\n<p>For the client to consume the JSON representation, you can use the following code.</p>\n\n<pre><code>JsonFormat.parser().merge(theJsonString, Test2.newBuilder())\n</code></pre>\n\n<p>Of course then you are not \"using protobuf\". Instead you are merely using protobuf generated classes.</p>\n\n<hr>\n\n<ol>\n<li>For more the information of the encoding, see the <a href=\"https://developers.google.com/protocol-buffers/docs/encoding\" rel=\"nofollow noreferrer\">documentation</a> and try out the <a href=\"https://protogen.marcgravell.com/decode\" rel=\"nofollow noreferrer\">decoder</a>.</li>\n</ol>\n"}],"owner":{"account_id":10602619,"reputation":61,"user_id":7809117,"display_name":"Praveen K H"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10360,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701338880,"creation_date":1549600073,"question_id":54585997,"body_markdown":"Getting InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field. error when parsing Protobuf\r\n    \r\nNot sure why parsing failing ever though I can see the output if I call response.getContentAsString() method on response object.\r\n    \r\nmy Proto file:\r\n    \r\n    syntax = &quot;proto2&quot;;\r\n    package  com.test.protocol;\r\n    \r\n    option java_package = &quot;com.test.protocol.v1&quot;;\r\n    option java_outer_classname = &quot;Test1&quot;;\r\n    \r\n    message Test2 {\r\n        required int64 id                  = 1;\r\n        required string value               = 2\r\n    }\r\n    \r\nI wrote API to return the Proto response which looks like below\r\n    \r\n    final Test2.Builder builder = TEST2.newBuilder();\r\n    builder.setId(1);\r\n    builder.setValue(&quot;1&quot;);\r\n    return builder.build();\r\n    \r\nMy API will return the below output\r\n    \r\n    {&quot;id&quot;: 1,&quot;value&quot;: &quot;1&quot;}\r\n    \r\n    \r\nI&#39;m trying to call the API and parse it back to Test2 as below\r\n    \r\n    \r\n    import com.test.protocol.v1.Test1.Test2;\r\n    \r\n    final Test2 result = Test2.parseFrom(response.getContentAsByteArray());\r\n    \r\ngetting the error in the above step If I debug and try to print response.getContentAsString(), I&#39;m getting correct output as below but parsing is failing.\r\n    \r\n    {&quot;id&quot;: 1,&quot;value&quot;: &quot;1&quot;}\r\n","title":"How to fix &quot;While parsing a protocol message, the input ended unexpectedly in the middle of a field&quot; error","body":"<p>Getting InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field. error when parsing Protobuf</p>\n\n<p>Not sure why parsing failing ever though I can see the output if I call response.getContentAsString() method on response object.</p>\n\n<p>my Proto file:</p>\n\n<pre><code>syntax = \"proto2\";\npackage  com.test.protocol;\n\noption java_package = \"com.test.protocol.v1\";\noption java_outer_classname = \"Test1\";\n\nmessage Test2 {\n    required int64 id                  = 1;\n    required string value               = 2\n}\n</code></pre>\n\n<p>I wrote API to return the Proto response which looks like below</p>\n\n<pre><code>final Test2.Builder builder = TEST2.newBuilder();\nbuilder.setId(1);\nbuilder.setValue(\"1\");\nreturn builder.build();\n</code></pre>\n\n<p>My API will return the below output</p>\n\n<pre><code>{\"id\": 1,\"value\": \"1\"}\n</code></pre>\n\n<p>I'm trying to call the API and parse it back to Test2 as below</p>\n\n<pre><code>import com.test.protocol.v1.Test1.Test2;\n\nfinal Test2 result = Test2.parseFrom(response.getContentAsByteArray());\n</code></pre>\n\n<p>getting the error in the above step If I debug and try to print response.getContentAsString(), I'm getting correct output as below but parsing is failing.</p>\n\n<pre><code>{\"id\": 1,\"value\": \"1\"}\n</code></pre>\n"},{"tags":["java","android","sms"],"comments":[{"owner":{"account_id":19940664,"reputation":105,"user_id":14612474,"display_name":"Bratyslav Morhunov"},"score":0,"creation_date":1701338408,"post_id":77577455,"comment_id":136764175,"body_markdown":"I know, it sounds like &quot;something went wrong, please help me&quot;, but the client sends me screenshots like this, and I can&#39;t reproduce the issue with my phone. Maybe someone have met the same problem.","body":"I know, it sounds like &quot;something went wrong, please help me&quot;, but the client sends me screenshots like this, and I can&#39;t reproduce the issue with my phone. Maybe someone have met the same problem."}],"owner":{"account_id":19940664,"reputation":105,"user_id":14612474,"display_name":"Bratyslav Morhunov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701338149,"creation_date":1701338149,"question_id":77577455,"body_markdown":"I am constructing Uri like `Uri.parse(&quot;smsto:&quot; + phoneNumbers)` and then using it to create an intent to send SMS like this:\r\n\r\n        Intent intent = new Intent(Intent.ACTION_SENDTO, uri);\r\n        intent.putExtra(&quot;sms_body&quot;, body);\r\n        startActivity(Intent.createChooser(intent, &quot;Complete action using&quot;));\r\n\r\nSo, in some SMS apps, a double quotes appears (see screenshot) and the newline symbol is printed as &quot;\\n&quot;, while in the other apps, everything looks OK. Does anyone know how to handle this problem?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IWPvJ.jpg","title":"Android: Double quotes and &quot;\\n&quot; in the SMS body while trying to use default SMS app","body":"<p>I am constructing Uri like <code>Uri.parse(&quot;smsto:&quot; + phoneNumbers)</code> and then using it to create an intent to send SMS like this:</p>\n<pre><code>    Intent intent = new Intent(Intent.ACTION_SENDTO, uri);\n    intent.putExtra(&quot;sms_body&quot;, body);\n    startActivity(Intent.createChooser(intent, &quot;Complete action using&quot;));\n</code></pre>\n<p>So, in some SMS apps, a double quotes appears (see screenshot) and the newline symbol is printed as &quot;\\n&quot;, while in the other apps, everything looks OK. Does anyone know how to handle this problem?</p>\n<p><a href=\"https://i.stack.imgur.com/IWPvJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IWPvJ.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":4,"creation_date":1618393597,"post_id":67088111,"comment_id":118585825,"body_markdown":"*&quot;I am confused what do to?&quot;* What I&#39;d recommend is to put the GUI builder aside until you understand how to code a GUI in pure Java. Aside: After that, few people return to them.","body":"<i>&quot;I am confused what do to?&quot;</i> What I&#39;d recommend is to put the GUI builder aside until you understand how to code a GUI in pure Java. Aside: After that, few people return to them."}],"owner":{"account_id":17846180,"reputation":705,"user_id":12962949,"display_name":"Masi Boo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1701337918,"creation_date":1618388838,"question_id":67088111,"body_markdown":"I am using IntelliJ to develop Java Swing. I drag and drop various UI components. I completely new in Java Swing. I might be asking very basic question.  So my confusion is that when I just pick any components and add them to the main form are those components initialized already or not. I saw that I get null pointer exception in my code:-\r\n\r\n        public class MyForm {\r\n        private JButton btnRead;\r\n        private JComboBox cbCodes;\r\n        private JPanel mainPanel;\r\n        private DefaultComboBoxModel comboBoxModel;\r\n\r\n        public MyForm(){\r\n            comboBoxModel = new DefaultComboBoxModel();\r\n            cbCodes = new JComboBox(comboBoxModel); // Assignment to UI-bound field will overwrite field generated by UI Designer\r\n\r\n            this.mainPanel.add(cbCodes);\r\n         }\r\n      }\r\n\r\nI got warning as &quot;Assignment to UI-bound field will overwrite field generated by UI Designer&quot;. And if I don&#39;t contract `cbCodes = new JComboBox(comboBoxModel);` I got null pointer exception. I am confused what do to? How to avoid the warning? Or do I just disregard the warning?   \r\n\r\n \r\n\r\n       \r\n\r\n","title":"Java Swing designer tool drag and drop components initialization confusion","body":"<p>I am using IntelliJ to develop Java Swing. I drag and drop various UI components. I completely new in Java Swing. I might be asking very basic question.  So my confusion is that when I just pick any components and add them to the main form are those components initialized already or not. I saw that I get null pointer exception in my code:-</p>\n<pre><code>    public class MyForm {\n    private JButton btnRead;\n    private JComboBox cbCodes;\n    private JPanel mainPanel;\n    private DefaultComboBoxModel comboBoxModel;\n\n    public MyForm(){\n        comboBoxModel = new DefaultComboBoxModel();\n        cbCodes = new JComboBox(comboBoxModel); // Assignment to UI-bound field will overwrite field generated by UI Designer\n\n        this.mainPanel.add(cbCodes);\n     }\n  }\n</code></pre>\n<p>I got warning as &quot;Assignment to UI-bound field will overwrite field generated by UI Designer&quot;. And if I don't contract <code>cbCodes = new JComboBox(comboBoxModel);</code> I got null pointer exception. I am confused what do to? How to avoid the warning? Or do I just disregard the warning?</p>\n"},{"tags":["java","android","graphics","lottie"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1673777636,"post_id":75123569,"comment_id":132569933,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":9313381,"reputation":860,"user_id":6914403,"display_name":"Jithin Jude"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701337186,"creation_date":1701337186,"answer_id":77577353,"question_id":75123569,"body_markdown":"set bounds:\r\n\r\n    mLottieDrawable.setBounds(\r\n                        leftBound,\r\n                        topBound,\r\n                        rightBound,\r\n                        bottomBound)","title":"LottieDrawable is not playing the animation in GraphicOverlay.Graphic","body":"<p>set bounds:</p>\n<pre><code>mLottieDrawable.setBounds(\n                    leftBound,\n                    topBound,\n                    rightBound,\n                    bottomBound)\n</code></pre>\n"}],"owner":{"account_id":16951692,"reputation":21,"user_id":12261053,"display_name":"srinidhi prasad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1701337186,"creation_date":1673767770,"question_id":75123569,"body_markdown":"I am trying to use `LottieDrawable` to draw a simple animation. But the animation is not played.\r\n\r\nI saw in old issues that you need to call `mLottieDrawable.setCallBack(this)`\r\nbut since I am extending `GraphicOverlay.Graphic`, I don&#39;t know what should I use inside `setcallBack()`\r\n\r\n\r\n\r\nBelow is the code I have used -&gt;\r\n\r\n```\r\npublic class PoseGraphic extends GraphicOverlay.Graphic {\r\n    LottieDrawable mLottieDrawable;\r\n\r\n    public PoseGraphic() {\r\n        mLottieDrawable = new LottieDrawable();\r\n        mLottieDrawable.enableMergePathsForKitKatAndAbove(true);\r\n        LottieResult&lt;LottieComposition&gt; result = LottieCompositionFactory.fromRawResSync(context, R.raw.heart);\r\n        mLottieDrawable.setComposition(result.getValue());\r\n        mLottieDrawable.setRepeatCount(LottieDrawable.INFINITE);\r\n        mLottieDrawable.start();\r\n    }\r\n\r\n    @Override\r\n    public void draw(Canvas canvas) {\r\n        mLottieDrawable.draw(canvas);\r\n    }\r\n```\r\n\r\nVersion of Lottie -\r\n5.2.0\r\n\r\nVersion of Android -\r\nAndroid 12","title":"LottieDrawable is not playing the animation in GraphicOverlay.Graphic","body":"<p>I am trying to use <code>LottieDrawable</code> to draw a simple animation. But the animation is not played.</p>\n<p>I saw in old issues that you need to call <code>mLottieDrawable.setCallBack(this)</code>\nbut since I am extending <code>GraphicOverlay.Graphic</code>, I don't know what should I use inside <code>setcallBack()</code></p>\n<p>Below is the code I have used -&gt;</p>\n<pre><code>public class PoseGraphic extends GraphicOverlay.Graphic {\n    LottieDrawable mLottieDrawable;\n\n    public PoseGraphic() {\n        mLottieDrawable = new LottieDrawable();\n        mLottieDrawable.enableMergePathsForKitKatAndAbove(true);\n        LottieResult&lt;LottieComposition&gt; result = LottieCompositionFactory.fromRawResSync(context, R.raw.heart);\n        mLottieDrawable.setComposition(result.getValue());\n        mLottieDrawable.setRepeatCount(LottieDrawable.INFINITE);\n        mLottieDrawable.start();\n    }\n\n    @Override\n    public void draw(Canvas canvas) {\n        mLottieDrawable.draw(canvas);\n    }\n</code></pre>\n<p>Version of Lottie -\n5.2.0</p>\n<p>Version of Android -\nAndroid 12</p>\n"},{"tags":["java","selenium-webdriver","web-scraping","tor"],"answers":[{"tags":[],"owner":{"account_id":7099211,"reputation":67,"user_id":5431515,"display_name":"CROnoob"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679139515,"creation_date":1679139515,"answer_id":75775618,"question_id":75774708,"body_markdown":"Ok, I don&#39;t know why, but I figured out what to do to make it work... The code is ok and it&#39;s working perfectly. What makes the problem is closing the TOR browser. When I click x on TOR, it closes and IntelliJ stops running the project. But then, when you start again, it will stuck. I assume that problem is somewhere in TOR and profiles?\r\nTo make it work you must stop the project in IntelliJ and then it will close TOR properly. ","title":"Java,Selenium - stuck after opening TOR browser","body":"<p>Ok, I don't know why, but I figured out what to do to make it work... The code is ok and it's working perfectly. What makes the problem is closing the TOR browser. When I click x on TOR, it closes and IntelliJ stops running the project. But then, when you start again, it will stuck. I assume that problem is somewhere in TOR and profiles?\nTo make it work you must stop the project in IntelliJ and then it will close TOR properly.</p>\n"}],"owner":{"account_id":7099211,"reputation":67,"user_id":5431515,"display_name":"CROnoob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701336977,"creation_date":1679128711,"question_id":75774708,"body_markdown":"I&#39;m working on webscraping hobby project. Stack is Java, Selenium, TOR, IntelliJ IDEA and Kali Linux. After few days of searching on google I managed to start TOR with Selenim but for this problem I didn&#39;t find answer on google. After I start project, TOR opens, makes connection, but than stops (no input of web address). IntelliJ is running all time, but nothing happening... \r\n\r\nMy code\r\n\r\n    WebDriverManager.firefoxdriver().setup();\r\n    String torPath = &quot;/home/username/Downloads/tor-browser/Browser/start-tor-browser&quot;;\r\n    String profilePath=&quot;/home/username/Downloads/tor-browser/Browser/TorBrowser/Data/Browser/profile.default&quot;;\r\n    FirefoxProfile profile = new FirefoxProfile(new File(profilePath));\r\n    FirefoxBinary binary = new FirefoxBinary(new File(torPath));\r\n    System.out.println(&quot;1&quot;);\r\n    FirefoxOptions options = new FirefoxOptions();\r\n    options.setBinary(binary);\r\n    options.setProfile(profile);\r\n    System.out.println(&quot;2&quot;);\r\n    options.setCapability(FirefoxOptions.FIREFOX_OPTIONS,options);\r\n    FirefoxDriver driver = new FirefoxDriver(options);\r\n    System.out.println(&quot;3&quot;);\r\n    Constants.sleep(2000);\r\n    System.out.printf(&quot;4&quot;);\r\n    driver.get(&quot;https://www.google.com/&quot;);\r\n\r\nAfter running this code, I get messages &quot;1&quot; and &quot;2&quot;, TOR opens, makes connection and that&#39;s it. IntelliJ running project (I must click stop button), but no errors or any other message...","title":"Java,Selenium - stuck after opening TOR browser","body":"<p>I'm working on webscraping hobby project. Stack is Java, Selenium, TOR, IntelliJ IDEA and Kali Linux. After few days of searching on google I managed to start TOR with Selenim but for this problem I didn't find answer on google. After I start project, TOR opens, makes connection, but than stops (no input of web address). IntelliJ is running all time, but nothing happening...</p>\n<p>My code</p>\n<pre><code>WebDriverManager.firefoxdriver().setup();\nString torPath = &quot;/home/username/Downloads/tor-browser/Browser/start-tor-browser&quot;;\nString profilePath=&quot;/home/username/Downloads/tor-browser/Browser/TorBrowser/Data/Browser/profile.default&quot;;\nFirefoxProfile profile = new FirefoxProfile(new File(profilePath));\nFirefoxBinary binary = new FirefoxBinary(new File(torPath));\nSystem.out.println(&quot;1&quot;);\nFirefoxOptions options = new FirefoxOptions();\noptions.setBinary(binary);\noptions.setProfile(profile);\nSystem.out.println(&quot;2&quot;);\noptions.setCapability(FirefoxOptions.FIREFOX_OPTIONS,options);\nFirefoxDriver driver = new FirefoxDriver(options);\nSystem.out.println(&quot;3&quot;);\nConstants.sleep(2000);\nSystem.out.printf(&quot;4&quot;);\ndriver.get(&quot;https://www.google.com/&quot;);\n</code></pre>\n<p>After running this code, I get messages &quot;1&quot; and &quot;2&quot;, TOR opens, makes connection and that's it. IntelliJ running project (I must click stop button), but no errors or any other message...</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"score":0,"creation_date":1701085179,"post_id":77556470,"comment_id":136727051,"body_markdown":"Does it write some message on mouseover? Can you share the POM files ? it might be helpful. What is it your maven version?","body":"Does it write some message on mouseover? Can you share the POM files ? it might be helpful. What is it your maven version?"},{"owner":{"account_id":3025444,"reputation":15,"user_id":2565568,"display_name":"user2565568"},"score":0,"creation_date":1701090609,"post_id":77556470,"comment_id":136728006,"body_markdown":"the post is updated with the pom.xml","body":"the post is updated with the pom.xml"},{"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"score":0,"creation_date":1701091278,"post_id":77556470,"comment_id":136728128,"body_markdown":"Can you add the parent as well ?","body":"Can you add the parent as well ?"},{"owner":{"account_id":3025444,"reputation":15,"user_id":2565568,"display_name":"user2565568"},"score":0,"creation_date":1701337021,"post_id":77556470,"comment_id":136763937,"body_markdown":"the post is updated with the parent pom.xml","body":"the post is updated with the parent pom.xml"}],"owner":{"account_id":3025444,"reputation":15,"user_id":2565568,"display_name":"user2565568"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701336949,"creation_date":1701083884,"question_id":77556470,"body_markdown":"I need your help because in my module I have several projects, see: \r\n\r\n[![enter image description here](https://i.stack.imgur.com/VTvrv.png)](https://i.stack.imgur.com/VTvrv.png)\r\n\r\nI&#39;m looking for a way to have a document that list the projects updated during the sprint (the last 2 weeks) in order to know which project I need to redeploy. \r\n\r\nDo you have an idea about how I can do this?\r\n\r\nWe have to check the history of each subproject manually.\r\n\r\nWe are on Spring Boot, Java 20, Maven we use GitHub Actions and Kubernetes.\r\n\r\nThis is one of the pom.xml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.bootcamp.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;BootCampProject&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.bootcam&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bootCampApi&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;bootCampApi&lt;/name&gt;\r\n    &lt;description&gt;bootCampApi&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nParent pom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.bootcamp.test&lt;/groupId&gt;\r\n    &lt;artifactId&gt;BootCampProject&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.5&lt;/version&gt;\r\n        &lt;relativePath&gt;&lt;/relativePath&gt;\r\n    &lt;/parent&gt;\r\n\r\n&lt;/project&gt;\r\n```","title":"How to list updated projects on multi module configuration","body":"<p>I need your help because in my module I have several projects, see:</p>\n<p><a href=\"https://i.stack.imgur.com/VTvrv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VTvrv.png\" alt=\"enter image description here\" /></a></p>\n<p>I'm looking for a way to have a document that list the projects updated during the sprint (the last 2 weeks) in order to know which project I need to redeploy.</p>\n<p>Do you have an idea about how I can do this?</p>\n<p>We have to check the history of each subproject manually.</p>\n<p>We are on Spring Boot, Java 20, Maven we use GitHub Actions and Kubernetes.</p>\n<p>This is one of the pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.bootcamp.test&lt;/groupId&gt;\n        &lt;artifactId&gt;BootCampProject&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.bootcam&lt;/groupId&gt;\n    &lt;artifactId&gt;bootCampApi&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;bootCampApi&lt;/name&gt;\n    &lt;description&gt;bootCampApi&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n            &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n                &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n            &lt;version&gt;2.4.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Parent pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.bootcamp.test&lt;/groupId&gt;\n    &lt;artifactId&gt;BootCampProject&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.5&lt;/version&gt;\n        &lt;relativePath&gt;&lt;/relativePath&gt;\n    &lt;/parent&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","event-listener"],"answers":[{"comments":[{"owner":{"account_id":1896999,"reputation":175,"user_id":1713721,"display_name":"Aracos"},"score":0,"creation_date":1701328703,"post_id":77572883,"comment_id":136762675,"body_markdown":"Thank you @Karim for the quick and thorough response. I will update the actual Question shortly with more details. \nThe main purpose is to find the best way in terms of reliability and performance, therefore I am searching for the best configuration of lazy/eager loading. Or maybe a completely diffent aproach instead of event-listeners if there is one.","body":"Thank you @Karim for the quick and thorough response. I will update the actual Question shortly with more details.  The main purpose is to find the best way in terms of reliability and performance, therefore I am searching for the best configuration of lazy/eager loading. Or maybe a completely diffent aproach instead of event-listeners if there is one."}],"tags":[],"owner":{"account_id":26158800,"reputation":21,"user_id":19845689,"display_name":"Karim Diawara"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701274902,"creation_date":1701274902,"answer_id":77572883,"question_id":77572295,"body_markdown":"The difference in behavior between findById and findByName when accessing child entities in your Spring Data JPA repository could be related to the way these methods interact with the database and handle the loading of associated entities (children).\r\n\r\nHere are some possible reasons for the observed difference:\r\n\r\n 1. Lazy Loading: By default, JPA associations are lazy-loaded, which means that related entities are not loaded from the database until they are explicitly accessed. When you call findById, the associated children collection might not be loaded, especially if it is marked as LAZY. However, when you subsequently access the children collection (e.g., by invoking a method on it), it triggers a database query to fetch the related child entities.\r\n  - In the case of findByName, if Hibernate needs to fetch the parent entity and the associated children collection during the query (e.g., due to fetch join or eager loading settings), the child entities are loaded along with the parent entity, and you might not observe the same issue.\r\n\r\n 2. Fetch Mode: The @Fetch annotation can influence how associations are fetched. Your matrix indicates that the @Fetch annotation has different effects based on the combination of fetch types (JOIN, SELECT, or SUBSELECT) and whether you access the children collection within the same transaction.\r\n\r\n   - For example, with JOIN or SUBSELECT, using findById might load the child entities because the associated collection is explicitly fetched in the initial query. However, with SELECT, the child entities might not be loaded until you access the children collection explicitly.\r\n\r\n3.  Transaction Boundaries: If you are working with detached entities and there is a transaction boundary between fetching the parent entity and accessing its children collection, lazy loading might not work as expected. In the case of findByName, if you access the children collection within the same transaction, it could lead to different results compared to findById.\r\n\r\nTo further investigate and ensure consistent behavior, you might consider:\r\n\r\n - Using fetch joins in your queries (JOIN FETCH) to ensure that child entities are loaded eagerly when needed.\r\n\r\n  - Checking the generated SQL queries in your logs to understand how Hibernate is fetching the entities.\r\n\r\n  - Ensuring that transactions are managed appropriately, and entities are not detached when you expect them to be managed.\r\n\r\nIf you provide more details about how you&#39;re using these methods in your code and the exact configurations for lazy/eager loading, it might be possible to provide a more specific explanation.","title":"Update related entity from event-listener callback","body":"<p>The difference in behavior between findById and findByName when accessing child entities in your Spring Data JPA repository could be related to the way these methods interact with the database and handle the loading of associated entities (children).</p>\n<p>Here are some possible reasons for the observed difference:</p>\n<ol>\n<li>Lazy Loading: By default, JPA associations are lazy-loaded, which means that related entities are not loaded from the database until they are explicitly accessed. When you call findById, the associated children collection might not be loaded, especially if it is marked as LAZY. However, when you subsequently access the children collection (e.g., by invoking a method on it), it triggers a database query to fetch the related child entities.</li>\n</ol>\n<ul>\n<li>In the case of findByName, if Hibernate needs to fetch the parent entity and the associated children collection during the query (e.g., due to fetch join or eager loading settings), the child entities are loaded along with the parent entity, and you might not observe the same issue.</li>\n</ul>\n<ol start=\"2\">\n<li>Fetch Mode: The @Fetch annotation can influence how associations are fetched. Your matrix indicates that the @Fetch annotation has different effects based on the combination of fetch types (JOIN, SELECT, or SUBSELECT) and whether you access the children collection within the same transaction.</li>\n</ol>\n<ul>\n<li>For example, with JOIN or SUBSELECT, using findById might load the child entities because the associated collection is explicitly fetched in the initial query. However, with SELECT, the child entities might not be loaded until you access the children collection explicitly.</li>\n</ul>\n<ol start=\"3\">\n<li>Transaction Boundaries: If you are working with detached entities and there is a transaction boundary between fetching the parent entity and accessing its children collection, lazy loading might not work as expected. In the case of findByName, if you access the children collection within the same transaction, it could lead to different results compared to findById.</li>\n</ol>\n<p>To further investigate and ensure consistent behavior, you might consider:</p>\n<ul>\n<li><p>Using fetch joins in your queries (JOIN FETCH) to ensure that child entities are loaded eagerly when needed.</p>\n</li>\n<li><p>Checking the generated SQL queries in your logs to understand how Hibernate is fetching the entities.</p>\n</li>\n<li><p>Ensuring that transactions are managed appropriately, and entities are not detached when you expect them to be managed.</p>\n</li>\n</ul>\n<p>If you provide more details about how you're using these methods in your code and the exact configurations for lazy/eager loading, it might be possible to provide a more specific explanation.</p>\n"}],"owner":{"account_id":1896999,"reputation":175,"user_id":1713721,"display_name":"Aracos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1701336168,"creation_date":1701270147,"question_id":77572295,"body_markdown":"## General Problem\r\n\r\nWe have two entities, Parent and Child with a one-to-many relationship between them. When updating the Parent we want to update some entries in all related children automatically.\r\n\r\nFor sake of simplicity we are storing the changed property (value) in the child-entity as well.\r\n\r\nThe actual problem involves changing different properties and calculating a new property in the related children based on those changes.\r\n\r\nGetter/Setter ToString... are omitted for simplicity.\r\n\r\n    @Entity\r\n    public class ParentEntity {\r\n      @Id\r\n      @GeneratedValue\r\n      private UUID id;\r\n      private String name;\r\n      private String value;\r\n    \r\n      @OneToMany(mappedBy = &quot;parent&quot;, cascade = CascadeType.ALL)\r\n      private List&lt;ChildEntity&gt; children;\r\n    }\r\n    \r\n    @Entity\r\n    public class ChildEntity {\r\n      \r\n      @Id\r\n      @GeneratedValue\r\n      private UUID id;\r\n    \r\n      @ManyToOne\r\n      @JoinColumn(name=&quot;parent_id&quot;)\r\n      private ParentEntity parent;\r\n    \r\n      private String value;\r\n    }\r\n\r\n## Used Approach - Event-Listener\r\n\r\nSince the changes are done from different services and methods we are looking for a centralized solution, so we decided to use Event-Listeners in the Parent that triggers the update process in all its children.\r\n\r\nOnly additional methods are shown\r\n\r\n    public class ParentEntity {\r\n    \r\n      @PrePersist\r\n      @PreUpdate\r\n      void onUpdate() {\r\n        if (children != null) {\r\n          this.children.forEach(ChildEntity::update)\r\n        }\r\n      }\r\n    }\r\n    \r\n    public class ChildEntity {\r\n      void update() {\r\n        if (parent != null) {\r\n          this.value = parent.getValue();\r\n        }\r\n      }\r\n    }\r\n\r\n## Problem\r\n\r\nThis approach does not always update the child-entity when changing the parent-entity value.\r\n\r\nWe identified multiple factors that influence the outcome\r\n\r\n- @OneToMany annotation on ParentEntity#children with fetch eager/lazy\r\n- Hibernate-Specific annotation @Fetch on ParentEntity#children with JOIN/SELECT/SUBSELECT\r\n- Accessing the children list within the same transaction as the update\r\n- spring specific: use repository findById or custom findByName\r\n\r\nWe also tried @EntityGraph annotations but discarded the approach\r\nsince it would be to access-dependent which negates the &quot;one method&quot; approach.\r\n\r\ncalling the repository-save method within the transaction does not have any effect.\r\n\r\nThis results in the following success/failed matrix&#39;s\r\n\r\nResults success: + failed: -\r\n\r\nChildren list annotated with@OneToMan fetch **LAZY** and @Fetch mode\r\n\r\n|                   | no-annotation | JOIN | SELECT or SUBSELECT |\r\n|-------------------------|---------------|------|-----------------|\r\n| find by id              | -             | +    | -               |\r\n| find by id and access   | +             | +    | +               |\r\n\r\n|                   | no-annotation | JOIN | SELECT or SUBSELECT |\r\n|-------------------------|---------------|------|-----------------|\r\n| find by name            | -             | +    | -                   |\r\n| find by name and access | +             | +    | +                   |\r\n\r\nChildren list annotated with @OneToMan fetch **EAGER** and @Fetch mode\r\n\r\n|                         | no-annotation | JOIN | SELECT or SUBSELECT |\r\n|-------------------------|---------------|------|---------------------|\r\n| find by id              | -             | -    | -                   |\r\n| find by id and access   | -             | -    | +                   \r\n\r\n|                         | no-annotation | JOIN | SELECT or SUBSELECT |\r\n|-------------------------|---------------|------|---------------------|\r\n| find by name            | +             | +    | -                   |\r\n| find by name and access | +             | +    | +                   |\r\n\r\n*Small note: I could not post find by id and find by name as one table - stackoverflow would not permit it*\r\n\r\n## Updating the Parent to trigger the Child update\r\n\r\nIn this small example Program I generate a Fixed set of Parent/Child Entities to reduce overhead.\r\nThe actual Updates are done by calling @Transaction annotated update methods in Spring @Service Beans.\r\n\r\n    public interface ParentRepository extends JpaRepository&lt;ParentEntity, UUID&gt; {\r\n        Optional&lt;ParentEntity&gt; findByName(UUID name);\r\n    }\r\n\r\n    @Service\r\n    @lombok.RequiredArgsConstructor\r\n    public class ParentService {\r\n        private final ParentRepository repository;\r\n\r\n        @Transactional\r\n        public void updateById(UUID id, String value) {\r\n            ParentEntity parent = repository.findById(id).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\r\n            parent.setValue(value);\r\n        }\r\n\r\n        @Transactional\r\n        public long updateByIdAndAccess(UUID id, String value) {\r\n            ParentEntity parent = repository.findById(id).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\r\n            parent.setValue(value);\r\n            return parent.getChildren().size();\r\n        }\r\n\r\n\r\n        @Transactional\r\n        public void updateByName(String name, String value) {\r\n            ParentEntity parent = repository.findByName(name).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\r\n            parent.setValue(value);\r\n        }\r\n\r\n        @Transactional\r\n        public long updateByNameAndAccess(String name, String value) {\r\n            ParentEntity parent = repository.findByName(name).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\r\n            parent.setValue(value);\r\n            return parent.getChildren().size();\r\n        }\r\n    }\r\n\r\n## Real-World Relation\r\n\r\nThe Real-World Application that triggered this Post is a Web-Application with a purchase and support operations for\r\nLicense Entities (the Children) that are handled in Packages (the Parent). The child update mechanism is to calculate \r\nthe as status of the Child (active, expired, canceled ... ) based on properties from the Parent. \r\nThe Parent Entity can be loaded and modified from multiple Services based on different Properties. \r\n\r\nAdditional to custom repository methods, like the example findByName we use the JpaSpecificationExecutor Repository\r\nwith concatenated Specification objects to find the Parent Entities.\r\n\r\nThis method extends the possibilities of the children list being accessed prior to the PostUpdate event. \r\n\r\n\r\n# Open Questions\r\n\r\n- Why do repository calls by findById and findByName have different results?\r\n- Use which combination of Annotations?\r\n- Is there an entirely different approach?\r\n\r\nThe Source-Code and some SpringBootTests with additional log-output can be found at [GitHub](https://github.com/kaihenkel/spring-boot-data-eventlistener-update-problem)","title":"Update related entity from event-listener callback","body":"<h2>General Problem</h2>\n<p>We have two entities, Parent and Child with a one-to-many relationship between them. When updating the Parent we want to update some entries in all related children automatically.</p>\n<p>For sake of simplicity we are storing the changed property (value) in the child-entity as well.</p>\n<p>The actual problem involves changing different properties and calculating a new property in the related children based on those changes.</p>\n<p>Getter/Setter ToString... are omitted for simplicity.</p>\n<pre><code>@Entity\npublic class ParentEntity {\n  @Id\n  @GeneratedValue\n  private UUID id;\n  private String name;\n  private String value;\n\n  @OneToMany(mappedBy = &quot;parent&quot;, cascade = CascadeType.ALL)\n  private List&lt;ChildEntity&gt; children;\n}\n\n@Entity\npublic class ChildEntity {\n  \n  @Id\n  @GeneratedValue\n  private UUID id;\n\n  @ManyToOne\n  @JoinColumn(name=&quot;parent_id&quot;)\n  private ParentEntity parent;\n\n  private String value;\n}\n</code></pre>\n<h2>Used Approach - Event-Listener</h2>\n<p>Since the changes are done from different services and methods we are looking for a centralized solution, so we decided to use Event-Listeners in the Parent that triggers the update process in all its children.</p>\n<p>Only additional methods are shown</p>\n<pre><code>public class ParentEntity {\n\n  @PrePersist\n  @PreUpdate\n  void onUpdate() {\n    if (children != null) {\n      this.children.forEach(ChildEntity::update)\n    }\n  }\n}\n\npublic class ChildEntity {\n  void update() {\n    if (parent != null) {\n      this.value = parent.getValue();\n    }\n  }\n}\n</code></pre>\n<h2>Problem</h2>\n<p>This approach does not always update the child-entity when changing the parent-entity value.</p>\n<p>We identified multiple factors that influence the outcome</p>\n<ul>\n<li>@OneToMany annotation on ParentEntity#children with fetch eager/lazy</li>\n<li>Hibernate-Specific annotation @Fetch on ParentEntity#children with JOIN/SELECT/SUBSELECT</li>\n<li>Accessing the children list within the same transaction as the update</li>\n<li>spring specific: use repository findById or custom findByName</li>\n</ul>\n<p>We also tried @EntityGraph annotations but discarded the approach\nsince it would be to access-dependent which negates the &quot;one method&quot; approach.</p>\n<p>calling the repository-save method within the transaction does not have any effect.</p>\n<p>This results in the following success/failed matrix's</p>\n<p>Results success: + failed: -</p>\n<p>Children list annotated with@OneToMan fetch <strong>LAZY</strong> and @Fetch mode</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>no-annotation</th>\n<th>JOIN</th>\n<th>SELECT or SUBSELECT</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>find by id</td>\n<td>-</td>\n<td>+</td>\n<td>-</td>\n</tr>\n<tr>\n<td>find by id and access</td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n</tr>\n</tbody>\n</table>\n</div><div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>no-annotation</th>\n<th>JOIN</th>\n<th>SELECT or SUBSELECT</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>find by name</td>\n<td>-</td>\n<td>+</td>\n<td>-</td>\n</tr>\n<tr>\n<td>find by name and access</td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Children list annotated with @OneToMan fetch <strong>EAGER</strong> and @Fetch mode</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>no-annotation</th>\n<th>JOIN</th>\n<th>SELECT or SUBSELECT</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>find by id</td>\n<td>-</td>\n<td>-</td>\n<td>-</td>\n</tr>\n<tr>\n<td>find by id and access</td>\n<td>-</td>\n<td>-</td>\n<td>+</td>\n</tr>\n</tbody>\n</table>\n</div><div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>no-annotation</th>\n<th>JOIN</th>\n<th>SELECT or SUBSELECT</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>find by name</td>\n<td>+</td>\n<td>+</td>\n<td>-</td>\n</tr>\n<tr>\n<td>find by name and access</td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><em>Small note: I could not post find by id and find by name as one table - stackoverflow would not permit it</em></p>\n<h2>Updating the Parent to trigger the Child update</h2>\n<p>In this small example Program I generate a Fixed set of Parent/Child Entities to reduce overhead.\nThe actual Updates are done by calling @Transaction annotated update methods in Spring @Service Beans.</p>\n<pre><code>public interface ParentRepository extends JpaRepository&lt;ParentEntity, UUID&gt; {\n    Optional&lt;ParentEntity&gt; findByName(UUID name);\n}\n\n@Service\n@lombok.RequiredArgsConstructor\npublic class ParentService {\n    private final ParentRepository repository;\n\n    @Transactional\n    public void updateById(UUID id, String value) {\n        ParentEntity parent = repository.findById(id).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\n        parent.setValue(value);\n    }\n\n    @Transactional\n    public long updateByIdAndAccess(UUID id, String value) {\n        ParentEntity parent = repository.findById(id).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\n        parent.setValue(value);\n        return parent.getChildren().size();\n    }\n\n\n    @Transactional\n    public void updateByName(String name, String value) {\n        ParentEntity parent = repository.findByName(name).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\n        parent.setValue(value);\n    }\n\n    @Transactional\n    public long updateByNameAndAccess(String name, String value) {\n        ParentEntity parent = repository.findByName(name).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\n        parent.setValue(value);\n        return parent.getChildren().size();\n    }\n}\n</code></pre>\n<h2>Real-World Relation</h2>\n<p>The Real-World Application that triggered this Post is a Web-Application with a purchase and support operations for\nLicense Entities (the Children) that are handled in Packages (the Parent). The child update mechanism is to calculate\nthe as status of the Child (active, expired, canceled ... ) based on properties from the Parent.\nThe Parent Entity can be loaded and modified from multiple Services based on different Properties.</p>\n<p>Additional to custom repository methods, like the example findByName we use the JpaSpecificationExecutor Repository\nwith concatenated Specification objects to find the Parent Entities.</p>\n<p>This method extends the possibilities of the children list being accessed prior to the PostUpdate event.</p>\n<h1>Open Questions</h1>\n<ul>\n<li>Why do repository calls by findById and findByName have different results?</li>\n<li>Use which combination of Annotations?</li>\n<li>Is there an entirely different approach?</li>\n</ul>\n<p>The Source-Code and some SpringBootTests with additional log-output can be found at <a href=\"https://github.com/kaihenkel/spring-boot-data-eventlistener-update-problem\" rel=\"nofollow noreferrer\">GitHub</a></p>\n"},{"tags":["java","android","kotlin","android-permissions","application-lifecycle"],"comments":[{"owner":{"account_id":1261134,"reputation":8171,"user_id":1219389,"accept_rate":100,"display_name":"PPartisan"},"score":0,"creation_date":1701336140,"post_id":77577213,"comment_id":136763757,"body_markdown":"Changing permissions for an app will kill/restart it. Why do you want to detect when this happens?","body":"Changing permissions for an app will kill/restart it. Why do you want to detect when this happens?"},{"owner":{"account_id":27032814,"reputation":11,"user_id":20588913,"display_name":"NDC00"},"score":0,"creation_date":1701336832,"post_id":77577213,"comment_id":136763890,"body_markdown":"i have a few config in Splash screen but when Application restart It doesn&#39;t run into splash screen, it runs into activity, it opens settings. I want to know that event to reopen the Splash screen.","body":"i have a few config in Splash screen but when Application restart It doesn&#39;t run into splash screen, it runs into activity, it opens settings. I want to know that event to reopen the Splash screen."},{"owner":{"account_id":1261134,"reputation":8171,"user_id":1219389,"accept_rate":100,"display_name":"PPartisan"},"score":0,"creation_date":1701424464,"post_id":77577213,"comment_id":136776543,"body_markdown":"I see. Does this answer your question? [Force application to restart from first Activity (when a permission is denied)](https://stackoverflow.com/questions/39204052/force-application-to-restart-from-first-activity-when-a-permission-is-denied)","body":"I see. Does this answer your question? <a href=\"https://stackoverflow.com/questions/39204052/force-application-to-restart-from-first-activity-when-a-permission-is-denied\">Force application to restart from first Activity (when a permission is denied)</a>"}],"owner":{"account_id":27032814,"reputation":11,"user_id":20588913,"display_name":"NDC00"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701335891,"creation_date":1701335891,"question_id":77577213,"body_markdown":"When I open settings from within the app and then cancel permission, the app reboots. How can I detect when the app is rebooted?","title":"Application is reboot when revoking application permissions","body":"<p>When I open settings from within the app and then cancel permission, the app reboots. How can I detect when the app is rebooted?</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1701340025,"post_id":77577202,"comment_id":136764463,"body_markdown":"Your filter breaks proper flow. You should call `filterChain.doFilter(request, response)` else processing will stop. Also you sholdn&#39;t be writing to the response just continue processing. This doesn&#39;t look like Spring Security 3 either rather Spring Security 6 which is used by Spring Boot 3.x.","body":"Your filter breaks proper flow. You should call <code>filterChain.doFilter(request, response)</code> else processing will stop. Also you sholdn&#39;t be writing to the response just continue processing. This doesn&#39;t look like Spring Security 3 either rather Spring Security 6 which is used by Spring Boot 3.x."},{"owner":{"account_id":22225795,"reputation":19,"user_id":16462759,"display_name":"anonym"},"score":0,"creation_date":1701403747,"post_id":77577202,"comment_id":136774135,"body_markdown":"My addFilterAfter returned 403 Forbidden error is authenticated","body":"My addFilterAfter returned 403 Forbidden error is authenticated"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701434218,"post_id":77577202,"comment_id":136778073,"body_markdown":"Yes or destroy the flow by doing nothing. There is no else/default behavior so it will stop processing.","body":"Yes or destroy the flow by doing nothing. There is no else/default behavior so it will stop processing."}],"owner":{"account_id":22225795,"reputation":19,"user_id":16462759,"display_name":"anonym"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1701335775,"creation_date":1701335775,"question_id":77577202,"body_markdown":"Hi everyone my code block problems Spring security 3.0 \r\n\r\nSpring Secuirty Config class\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableMethodSecurity\r\n    public class GatewaySecurityConfig {\r\n    \r\n        private final AuthenticationService authenticationService;\r\n    \r\n        public GatewaySecurityConfig(AuthenticationService authenticationService) {\r\n            this.authenticationService = authenticationService;\r\n        }\r\n    \r\n        private static final String[] WHITE_LIST_URL = {\r\n                &quot;/auth/**&quot;,\r\n                &quot;/v2/api-docs&quot;,\r\n                &quot;/v3/api-docs&quot;,\r\n                &quot;/v3/api-docs/**&quot;,\r\n                &quot;/swagger-resources&quot;,\r\n                &quot;/swagger-resources/**&quot;,\r\n                &quot;/configuration/ui&quot;,\r\n                &quot;/configuration/security&quot;,\r\n                &quot;/swagger-ui/**&quot;,\r\n                &quot;/webjars/**&quot;,\r\n                &quot;/swagger-ui.html&quot;};\r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                    .csrf(AbstractHttpConfigurer::disable)\r\n                    .authorizeHttpRequests(req -&gt;\r\n                            req.requestMatchers(WHITE_LIST_URL)\r\n                                    .permitAll()\r\n                                    .requestMatchers(GET, &quot;/restaurant/**&quot;,&quot;/filter/**&quot;, &quot;/cuisine/**&quot;, &quot;/feature/**&quot;)\r\n                                    .permitAll()\r\n                                    .anyRequest()\r\n                                    .authenticated()\r\n                    )\r\n                    .addFilterAfter(new CustomAuthenticationFilter(authenticationService), BasicAuthenticationFilter.class);\r\n            return http.build();\r\n        }\r\n    }\r\n\r\n\r\nThis class call my aunthenticated url check authorize and call other module and returned message \r\n\r\n    public class CustomAuthenticationFilter extends OncePerRequestFilter {\r\n    \r\n        private final AuthenticationService authenticationService;\r\n    \r\n        public CustomAuthenticationFilter(AuthenticationService authenticationService) {\r\n            this.authenticationService = authenticationService;\r\n        }\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n            String token = extractToken(request);\r\n            if (token != null) {\r\n                AuthorizeResponseDto authorizeResponseDto = authenticationService.validateAccess(token);\r\n                response.setStatus(authorizeResponseDto.getIsAuthorize() ? HttpServletResponse.SC_ACCEPTED : HttpServletResponse.SC_UNAUTHORIZED);\r\n                response.getWriter().println(authorizeResponseDto.getIsAuthorize());\r\n            }\r\n        }\r\n    \r\n        private String extractToken(HttpServletRequest request) {\r\n            final String authorizationHeader = request.getHeader(&quot;Authorization&quot;);\r\n            if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\r\n                return authorizationHeader.substring(7);\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\n**I have set permitAll to my white list. But when I send request to the url in white list it gives me 403 forbidden. What can be the reason?**","title":"Gateway Module my security config not working spring security","body":"<p>Hi everyone my code block problems Spring security 3.0</p>\n<p>Spring Secuirty Config class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class GatewaySecurityConfig {\n\n    private final AuthenticationService authenticationService;\n\n    public GatewaySecurityConfig(AuthenticationService authenticationService) {\n        this.authenticationService = authenticationService;\n    }\n\n    private static final String[] WHITE_LIST_URL = {\n            &quot;/auth/**&quot;,\n            &quot;/v2/api-docs&quot;,\n            &quot;/v3/api-docs&quot;,\n            &quot;/v3/api-docs/**&quot;,\n            &quot;/swagger-resources&quot;,\n            &quot;/swagger-resources/**&quot;,\n            &quot;/configuration/ui&quot;,\n            &quot;/configuration/security&quot;,\n            &quot;/swagger-ui/**&quot;,\n            &quot;/webjars/**&quot;,\n            &quot;/swagger-ui.html&quot;};\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf(AbstractHttpConfigurer::disable)\n                .authorizeHttpRequests(req -&gt;\n                        req.requestMatchers(WHITE_LIST_URL)\n                                .permitAll()\n                                .requestMatchers(GET, &quot;/restaurant/**&quot;,&quot;/filter/**&quot;, &quot;/cuisine/**&quot;, &quot;/feature/**&quot;)\n                                .permitAll()\n                                .anyRequest()\n                                .authenticated()\n                )\n                .addFilterAfter(new CustomAuthenticationFilter(authenticationService), BasicAuthenticationFilter.class);\n        return http.build();\n    }\n}\n</code></pre>\n<p>This class call my aunthenticated url check authorize and call other module and returned message</p>\n<pre><code>public class CustomAuthenticationFilter extends OncePerRequestFilter {\n\n    private final AuthenticationService authenticationService;\n\n    public CustomAuthenticationFilter(AuthenticationService authenticationService) {\n        this.authenticationService = authenticationService;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        String token = extractToken(request);\n        if (token != null) {\n            AuthorizeResponseDto authorizeResponseDto = authenticationService.validateAccess(token);\n            response.setStatus(authorizeResponseDto.getIsAuthorize() ? HttpServletResponse.SC_ACCEPTED : HttpServletResponse.SC_UNAUTHORIZED);\n            response.getWriter().println(authorizeResponseDto.getIsAuthorize());\n        }\n    }\n\n    private String extractToken(HttpServletRequest request) {\n        final String authorizationHeader = request.getHeader(&quot;Authorization&quot;);\n        if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\n            return authorizationHeader.substring(7);\n        }\n        return null;\n    }\n}\n</code></pre>\n<p><strong>I have set permitAll to my white list. But when I send request to the url in white list it gives me 403 forbidden. What can be the reason?</strong></p>\n"},{"tags":["java","html","dom"],"answers":[{"comments":[{"owner":{"account_id":184459,"reputation":4718,"user_id":420515,"accept_rate":81,"display_name":"Dominik"},"score":0,"creation_date":1306781561,"post_id":6177002,"comment_id":7186079,"body_markdown":"I was looking for option one, parsing htm that **is never** really well formed in real life. Accessing the XML DOM with XPATH is really tricky and I just failed coding bullet proof code. TagSoup seems to be a good suggestion, now the question is what suits me better JSoup or TagSoup.","body":"I was looking for option one, parsing htm that <b>is never</b> really well formed in real life. Accessing the XML DOM with XPATH is really tricky and I just failed coding bullet proof code. TagSoup seems to be a good suggestion, now the question is what suits me better JSoup or TagSoup."}],"tags":[],"owner":{"account_id":28814,"reputation":5771,"user_id":77278,"accept_rate":79,"display_name":"Tomasz Bachowicz"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1306762598,"creation_date":1306762598,"answer_id":6177002,"question_id":6176820,"body_markdown":"I can see that we have two challenges here:\r\n\r\n - Parsing of HTML that might not be well-formed XHTML that ease any and nice to parse. I&#39;d recommend [TagSoup][1] library that can read ugly HTML and produce well-formed StaX stream that can be then used elsewhere.\r\n \r\n - Building of DOM representaion of HTML document and dealing with that. As you probably know in JDK there is full-blown implementation of XML DOM (`org.w3c.dom.*`). But I guess this is not the type of API you&#39;ve been looking for. What about [DOM4J][2] or older [JDOM][3] that can wrap JDK Document and you can enjoy easy to use API?\r\n\r\n  [1]: http://home.ccil.org/~cowan/XML/tagsoup\r\n  [2]: http://dom4j.sourceforge.net\r\n  [3]: http://www.jdom.org","title":"Java equivalent to PHP Simple HTML DOM Parser","body":"<p>I can see that we have two challenges here:</p>\n\n<ul>\n<li><p>Parsing of HTML that might not be well-formed XHTML that ease any and nice to parse. I'd recommend <a href=\"http://home.ccil.org/~cowan/XML/tagsoup\" rel=\"nofollow\">TagSoup</a> library that can read ugly HTML and produce well-formed StaX stream that can be then used elsewhere.</p></li>\n<li><p>Building of DOM representaion of HTML document and dealing with that. As you probably know in JDK there is full-blown implementation of XML DOM (<code>org.w3c.dom.*</code>). But I guess this is not the type of API you've been looking for. What about <a href=\"http://dom4j.sourceforge.net\" rel=\"nofollow\">DOM4J</a> or older <a href=\"http://www.jdom.org\" rel=\"nofollow\">JDOM</a> that can wrap JDK Document and you can enjoy easy to use API?</p></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":28814,"reputation":5771,"user_id":77278,"accept_rate":79,"display_name":"Tomasz Bachowicz"},"score":1,"creation_date":1306763201,"post_id":6177031,"comment_id":7182242,"body_markdown":"While looking deeper I just found that one and it shows off quite nice list of features and APIs. Finding elements by CSS selectors is quite nifty.","body":"While looking deeper I just found that one and it shows off quite nice list of features and APIs. Finding elements by CSS selectors is quite nifty."},{"owner":{"account_id":184459,"reputation":4718,"user_id":420515,"accept_rate":81,"display_name":"Dominik"},"score":0,"creation_date":1306781613,"post_id":6177031,"comment_id":7186087,"body_markdown":"On a first glance the functionality of JSoup even seems to exceed the functionality of PHP Simple HTML DOM Parser. Now I will compare it to the second suggesion TagSoup, any pros and cons on this?","body":"On a first glance the functionality of JSoup even seems to exceed the functionality of PHP Simple HTML DOM Parser. Now I will compare it to the second suggesion TagSoup, any pros and cons on this?"},{"owner":{"account_id":28814,"reputation":5771,"user_id":77278,"accept_rate":79,"display_name":"Tomasz Bachowicz"},"score":1,"creation_date":1306787573,"post_id":6177031,"comment_id":7187216,"body_markdown":"The approach with TagSoup, W3C DOM and DOM4J/JDOM should work, but is more complex than JSoup seams to be. I&#39;ll give it a try as well, as the project looks very good to me from the description.","body":"The approach with TagSoup, W3C DOM and DOM4J/JDOM should work, but is more complex than JSoup seams to be. I&#39;ll give it a try as well, as the project looks very good to me from the description."}],"tags":[],"owner":{"account_id":145026,"reputation":170,"user_id":354529,"display_name":"RubenGM"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1306762718,"creation_date":1306762718,"answer_id":6177031,"question_id":6176820,"body_markdown":"I went from Simple HTML DOM Parser to [JSoup][1] and I&#39;m quite happy with it.\r\n\r\n\r\n  [1]: http://jsoup.org/","title":"Java equivalent to PHP Simple HTML DOM Parser","body":"<p>I went from Simple HTML DOM Parser to <a href=\"http://jsoup.org/\" rel=\"nofollow\">JSoup</a> and I'm quite happy with it.</p>\n"},{"tags":[],"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1306763321,"creation_date":1306763321,"answer_id":6177147,"question_id":6176820,"body_markdown":"I&#39;ve successfully used TagSoup as a SAX parser to populate DOM4J Documents which I then query with XPath. It took me a while to work out the incantations - (Scala, but I&#39;m sure that you can convert):\r\n\r\n    parserFactory = new org.ccil.cowan.tagsoup.jaxp.SAXFactoryImpl\r\n    val reader = new SAXReader(parserFactory.newSAXParser.getXMLReader)\r\n    val doc = reader.read(new InputSource(new StringReader(page)))","title":"Java equivalent to PHP Simple HTML DOM Parser","body":"<p>I've successfully used TagSoup as a SAX parser to populate DOM4J Documents which I then query with XPath. It took me a while to work out the incantations - (Scala, but I'm sure that you can convert):</p>\n\n<pre><code>parserFactory = new org.ccil.cowan.tagsoup.jaxp.SAXFactoryImpl\nval reader = new SAXReader(parserFactory.newSAXParser.getXMLReader)\nval doc = reader.read(new InputSource(new StringReader(page)))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2839888,"reputation":9,"user_id":2439704,"display_name":"Francesco Sblendorio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701335548,"creation_date":1701335548,"answer_id":77577178,"question_id":6176820,"body_markdown":"JSoup is a good choice. Here is an example which clears HTML from elements using certain CSS classes and from comments: it&#39;s very simple.\r\n\r\n    import org.jsoup.Jsoup;\r\n    import org.jsoup.nodes.Document;\r\n    import org.jsoup.nodes.Node;\r\n\r\n    ...\r\n\r\n    public String cleanHtml(String htmlText) {\r\n        Document doc = Jsoup.parse(htmlText);\r\n        doc.select(&quot;.infobox&quot;).remove();\r\n        doc.select(&quot;.mw-editsection&quot;).remove();\r\n        doc.select(&quot;.hatnote&quot;).remove();\r\n        doc.select(&quot;.catlinks&quot;).remove();\r\n        doc.select(&quot;.noprint&quot;).remove();\r\n        doc.select(&quot;.metadata&quot;).remove();\r\n        doc.select(&quot;.toc&quot;).remove();\r\n        doc.select(&quot;style&quot;).remove();\r\n        doc.select(&quot;script&quot;).remove();\r\n        doc.select(&quot;figure&quot;).remove();\r\n        doc.select(&quot;*[style*=display:none]&quot;).remove();\r\n        removeComments(doc);\r\n\r\n        return doc.html();\r\n    }\r\n\r\n    private static void removeComments(Node node) {\r\n        node.childNodes().stream().filter(n -&gt; &quot;#comment&quot;.equals(n.nodeName())).forEach(Node::remove);\r\n        node.childNodes().forEach(WikipediaCommons::removeComments);\r\n    }\r\n","title":"Java equivalent to PHP Simple HTML DOM Parser","body":"<p>JSoup is a good choice. Here is an example which clears HTML from elements using certain CSS classes and from comments: it's very simple.</p>\n<pre><code>import org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Node;\n\n...\n\npublic String cleanHtml(String htmlText) {\n    Document doc = Jsoup.parse(htmlText);\n    doc.select(&quot;.infobox&quot;).remove();\n    doc.select(&quot;.mw-editsection&quot;).remove();\n    doc.select(&quot;.hatnote&quot;).remove();\n    doc.select(&quot;.catlinks&quot;).remove();\n    doc.select(&quot;.noprint&quot;).remove();\n    doc.select(&quot;.metadata&quot;).remove();\n    doc.select(&quot;.toc&quot;).remove();\n    doc.select(&quot;style&quot;).remove();\n    doc.select(&quot;script&quot;).remove();\n    doc.select(&quot;figure&quot;).remove();\n    doc.select(&quot;*[style*=display:none]&quot;).remove();\n    removeComments(doc);\n\n    return doc.html();\n}\n\nprivate static void removeComments(Node node) {\n    node.childNodes().stream().filter(n -&gt; &quot;#comment&quot;.equals(n.nodeName())).forEach(Node::remove);\n    node.childNodes().forEach(WikipediaCommons::removeComments);\n}\n</code></pre>\n"}],"owner":{"account_id":184459,"reputation":4718,"user_id":420515,"accept_rate":81,"display_name":"Dominik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1892,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":6177031,"answer_count":4,"score":4,"last_activity_date":1701335548,"creation_date":1306761608,"question_id":6176820,"body_markdown":"Since I have to multithread which I can not eloquently solve in PHP I would like to programm in Java, unfortunately I could not finde a library which will allow me to parse a HTML DOM as robustly, quickly and easily as in PHP Simple HTML DOM Parser. Do you know alternatives in Java that are as easy to use?","title":"Java equivalent to PHP Simple HTML DOM Parser","body":"<p>Since I have to multithread which I can not eloquently solve in PHP I would like to programm in Java, unfortunately I could not finde a library which will allow me to parse a HTML DOM as robustly, quickly and easily as in PHP Simple HTML DOM Parser. Do you know alternatives in Java that are as easy to use?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":2,"creation_date":1701328431,"post_id":77576121,"comment_id":136762646,"body_markdown":"Your (infinite) &quot;Consumer Loop&quot; is not doing anything useful, because you are not doing anything with what&#39;s returned from `buffer.get()`. The rest I didn&#39;t check. Please reduce your code down to the absolute minimum required to demonstrate the problem. ie don&#39;t give us all your code, just the few lines that don&#39;t work.","body":"Your (infinite) &quot;Consumer Loop&quot; is not doing anything useful, because you are not doing anything with what&#39;s returned from <code>buffer.get()</code>. The rest I didn&#39;t check. Please reduce your code down to the absolute minimum required to demonstrate the problem. ie don&#39;t give us all your code, just the few lines that don&#39;t work."},{"owner":{"account_id":24937050,"reputation":1,"user_id":18803492,"display_name":"RZA"},"score":0,"creation_date":1701335351,"post_id":77576121,"comment_id":136763598,"body_markdown":"@Bohemian the data which is retuned from &#39;buffer.get()&#39; is supposed to go to the &#39;EmailServices&#39; class and I need help in doing so (i&#39;m new to spring boot) \nI added the code to make it easy for the readers to understand the problem.","body":"@Bohemian the data which is retuned from &#39;buffer.get()&#39; is supposed to go to the &#39;EmailServices&#39; class and I need help in doing so (i&#39;m new to spring boot)  I added the code to make it easy for the readers to understand the problem."}],"owner":{"account_id":24937050,"reputation":1,"user_id":18803492,"display_name":"RZA"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701335371,"creation_date":1701322554,"question_id":77576121,"body_markdown":"I am creating a microservice for sending bulk emails. I am getting the user name, email id of the user, the subject and the body of the email, etc through an API. I am using producer &amp; consumer loops and also validating the contents of the API. I need help in getting the verified data from the EmailBuffer class to the EmailServices class where i am sending the email.\r\n\r\nEmailConsumer class\r\n\r\n\r\n```\r\npackage com.webservices.worker;\r\n\r\nimport com.webservices.buffer.EmailBuffer;\r\n\r\npublic class EmailConsumer implements Runnable {\r\n\tprivate EmailBuffer buffer;\r\n\r\n\tpublic EmailConsumer(EmailBuffer buffer) {\r\n\t\tthis.buffer = buffer;\r\n\t}\r\n\t\r\n\t//Consumer Loop\r\n\t@Override\r\n\tpublic void run() {\r\n\t\twhile (true) {\r\n\t\t\ttry {\r\n\t\t\t\tbuffer.get();\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\nEmailBuffer class\r\n\r\n```\r\npackage com.webservices.buffer;\r\n\r\nimport java.util.concurrent.LinkedBlockingQueue;\r\nimport com.webservices.model.EmailModel;\r\n\r\n//Shared class used by threads\r\npublic class EmailBuffer&lt;EmailModel&gt; {\r\n\t// LinkedBlockingQueue\r\n\tprivate LinkedBlockingQueue&lt;EmailModel&gt; emailLinkedBlockingQueue = new LinkedBlockingQueue&lt;EmailModel&gt;(1);\r\n\r\n\tpublic void get() {\r\n\t\t// retrieve from LinkedBlockingQueue (take elements from the head of the queue)\r\n\t\t//called by consumer\r\n\t\ttry {\r\n\t\t\tEmailModel emailData = emailLinkedBlockingQueue.take();\r\n\t\t\tSystem.out.println(&quot;Consumer received - &quot; + emailData);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void put(EmailModel user) {\r\n\t\ttry {\r\n\t\t\t//called by producer\r\n\t\t\t// putting in LinkedBlockingQueue (add elements at the tail of the queue)\r\n\t\t\temailLinkedBlockingQueue.put(user);\r\n\t\t\tSystem.out.println(&quot;Producer produced - &quot; + user);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n\r\nEmailServices Class\r\n\r\n```\r\npackage com.webservices.services;\r\n\r\nimport java.util.Properties;\r\nimport java.util.concurrent.LinkedBlockingQueue;\r\nimport java.util.concurrent.ThreadPoolExecutor;\r\nimport java.util.concurrent.TimeUnit;\r\nimport javax.mail.Message;\r\nimport javax.mail.PasswordAuthentication;\r\nimport javax.mail.Session;\r\nimport javax.mail.Transport;\r\nimport javax.mail.internet.InternetAddress;\r\nimport javax.mail.internet.MimeMessage;\r\n\r\n//blueprint for creating thread\r\npublic class EmailServices implements Runnable {\r\n\t@Override\r\n\tpublic void run() {\r\n\t\tSystem.out.println(&quot;Preparing to send the email&quot;);\r\n\t\tString recipient = &quot;abc@gmail&quot;;\r\n\t\tString subject = &quot;Welcome message&quot;;\r\n\t\tString message = &quot;Hello,\\nThis email has been sent using JavaMail Api. \\nRegards \\nBackend.&quot;;\r\n\t\t\r\n\t\tsendEmail(recipient,subject,message);\r\n\t}\r\n\t\r\n\tpublic static void sendEmail(String recipient, String subject, String message) {\r\n\t\t\r\n\t     //email ID of  Sender\r\n\t     String sender = &quot;xyz@gmail.com&quot;; \r\n\r\n\t     //using host as localhost\r\n\t     String smtpHost = &quot;127.0.0.0&quot;;\r\n\t     int smtpPort = 587; \r\n\t\t\r\n\t     //Getting system properties \r\n\t     Properties properties = System.getProperties(); \r\n\t     System.out.println(&quot;Properties:&quot; + properties);\r\n\t  \r\n\t     //Setting up mail server \r\n\t     properties.put(&quot;mail.smtp.host&quot;, smtpHost); \r\n\t     properties.put(&quot;mail.smtp.port&quot;, smtpPort); \r\n\t     properties.put(&quot;mail.smtp.ssl.protocols&quot;, &quot;TLSv1.2&quot;);\r\n\t     properties.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n\t     properties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n\t     properties.put(&quot;mail.debug&quot;, &quot;true&quot;);\r\n\t  \r\n\t     //creating session object to get properties \r\n\t     Session session = Session.getInstance(properties,\r\n\t   \t\t  new javax.mail.Authenticator() {\r\n\t    \t @Override\r\n\t          protected PasswordAuthentication getPasswordAuthentication()\r\n\t          {\r\n\t              return new PasswordAuthentication(sender,&quot;*****&quot;);\r\n\t          }\r\n\t      });\r\n\t      \r\n\t      session.setDebug(true);\r\n\t      \r\n\t      try {\r\n\t    \t  \r\n\t    \t  //Compose the message\r\n\t\t      MimeMessage msg = new MimeMessage(session);\r\n\t\t      \r\n\t    \t  //from message\r\n\t    \t  msg.setFrom(new InternetAddress(recipient));\r\n\t    \t  \r\n\t    \t  //adding recipient to the message\r\n\t    \t  msg.addRecipient(Message.RecipientType.TO, new InternetAddress(recipient)); \r\n\t    \t  \r\n\t    \t  //adding subject\r\n\t    \t  msg.setSubject(subject);\r\n\t    \t  \r\n\t    \t  //adding text to message\r\n\t    \t  msg.setText(message);\r\n\t    \t  \r\n\t    \t  //sending the message\r\n\t    \t  Transport.send(msg);\r\n\t    \t  \r\n\t    \t  System.out.println(&quot;Email sent successfully&quot;); \r\n\t    \t  \r\n\t      } catch(Exception e) {\r\n\t    \t  e.printStackTrace();\r\n\t      }\r\n\t}\r\n\t\r\n\tpublic static void main(String args []) {\r\n\t\t//create object of Email class\r\n\t\tEmailServices em = new EmailServices();\r\n\t\t//Create object of helper class and pass the reference for our thread class Email inside it\r\n\t\tThread th = new Thread(em);\r\n\t\t//start the thread with the help of helper class Thread\r\n\t\tth.start();\r\n\t\t\r\n\t\tLinkedBlockingQueue&lt;Runnable&gt; lbq = new LinkedBlockingQueue&lt;Runnable&gt;();\r\n\t\tThreadPoolExecutor executor = new ThreadPoolExecutor(10, 20, 5, TimeUnit.SECONDS, lbq, new ThreadPoolExecutor.AbortPolicy());\r\n\t\t\r\n        // Let start all core threads initially\r\n        executor.prestartAllCoreThreads();\r\n        executor.submit(new EmailServices());\r\n        executor.shutdown();\r\n\t    }\r\n}\r\n\r\n\r\n```\r\n\r\nI want to retrieve emailData in get() method of EmailBuffer class in EmailServices class so that i can use the verified values (email id, subject, body) to send mails. If there is another better way of implementing this then please let me know. Thank you!","title":"How to get data from the consumer loop to another class in Java","body":"<p>I am creating a microservice for sending bulk emails. I am getting the user name, email id of the user, the subject and the body of the email, etc through an API. I am using producer &amp; consumer loops and also validating the contents of the API. I need help in getting the verified data from the EmailBuffer class to the EmailServices class where i am sending the email.</p>\n<p>EmailConsumer class</p>\n<pre><code>package com.webservices.worker;\n\nimport com.webservices.buffer.EmailBuffer;\n\npublic class EmailConsumer implements Runnable {\n    private EmailBuffer buffer;\n\n    public EmailConsumer(EmailBuffer buffer) {\n        this.buffer = buffer;\n    }\n    \n    //Consumer Loop\n    @Override\n    public void run() {\n        while (true) {\n            try {\n                buffer.get();\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>EmailBuffer class</p>\n<pre><code>package com.webservices.buffer;\n\nimport java.util.concurrent.LinkedBlockingQueue;\nimport com.webservices.model.EmailModel;\n\n//Shared class used by threads\npublic class EmailBuffer&lt;EmailModel&gt; {\n    // LinkedBlockingQueue\n    private LinkedBlockingQueue&lt;EmailModel&gt; emailLinkedBlockingQueue = new LinkedBlockingQueue&lt;EmailModel&gt;(1);\n\n    public void get() {\n        // retrieve from LinkedBlockingQueue (take elements from the head of the queue)\n        //called by consumer\n        try {\n            EmailModel emailData = emailLinkedBlockingQueue.take();\n            System.out.println(&quot;Consumer received - &quot; + emailData);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void put(EmailModel user) {\n        try {\n            //called by producer\n            // putting in LinkedBlockingQueue (add elements at the tail of the queue)\n            emailLinkedBlockingQueue.put(user);\n            System.out.println(&quot;Producer produced - &quot; + user);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>EmailServices Class</p>\n<pre><code>package com.webservices.services;\n\nimport java.util.Properties;\nimport java.util.concurrent.LinkedBlockingQueue;\nimport java.util.concurrent.ThreadPoolExecutor;\nimport java.util.concurrent.TimeUnit;\nimport javax.mail.Message;\nimport javax.mail.PasswordAuthentication;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeMessage;\n\n//blueprint for creating thread\npublic class EmailServices implements Runnable {\n    @Override\n    public void run() {\n        System.out.println(&quot;Preparing to send the email&quot;);\n        String recipient = &quot;abc@gmail&quot;;\n        String subject = &quot;Welcome message&quot;;\n        String message = &quot;Hello,\\nThis email has been sent using JavaMail Api. \\nRegards \\nBackend.&quot;;\n        \n        sendEmail(recipient,subject,message);\n    }\n    \n    public static void sendEmail(String recipient, String subject, String message) {\n        \n         //email ID of  Sender\n         String sender = &quot;xyz@gmail.com&quot;; \n\n         //using host as localhost\n         String smtpHost = &quot;127.0.0.0&quot;;\n         int smtpPort = 587; \n        \n         //Getting system properties \n         Properties properties = System.getProperties(); \n         System.out.println(&quot;Properties:&quot; + properties);\n      \n         //Setting up mail server \n         properties.put(&quot;mail.smtp.host&quot;, smtpHost); \n         properties.put(&quot;mail.smtp.port&quot;, smtpPort); \n         properties.put(&quot;mail.smtp.ssl.protocols&quot;, &quot;TLSv1.2&quot;);\n         properties.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n         properties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n         properties.put(&quot;mail.debug&quot;, &quot;true&quot;);\n      \n         //creating session object to get properties \n         Session session = Session.getInstance(properties,\n              new javax.mail.Authenticator() {\n             @Override\n              protected PasswordAuthentication getPasswordAuthentication()\n              {\n                  return new PasswordAuthentication(sender,&quot;*****&quot;);\n              }\n          });\n          \n          session.setDebug(true);\n          \n          try {\n              \n              //Compose the message\n              MimeMessage msg = new MimeMessage(session);\n              \n              //from message\n              msg.setFrom(new InternetAddress(recipient));\n              \n              //adding recipient to the message\n              msg.addRecipient(Message.RecipientType.TO, new InternetAddress(recipient)); \n              \n              //adding subject\n              msg.setSubject(subject);\n              \n              //adding text to message\n              msg.setText(message);\n              \n              //sending the message\n              Transport.send(msg);\n              \n              System.out.println(&quot;Email sent successfully&quot;); \n              \n          } catch(Exception e) {\n              e.printStackTrace();\n          }\n    }\n    \n    public static void main(String args []) {\n        //create object of Email class\n        EmailServices em = new EmailServices();\n        //Create object of helper class and pass the reference for our thread class Email inside it\n        Thread th = new Thread(em);\n        //start the thread with the help of helper class Thread\n        th.start();\n        \n        LinkedBlockingQueue&lt;Runnable&gt; lbq = new LinkedBlockingQueue&lt;Runnable&gt;();\n        ThreadPoolExecutor executor = new ThreadPoolExecutor(10, 20, 5, TimeUnit.SECONDS, lbq, new ThreadPoolExecutor.AbortPolicy());\n        \n        // Let start all core threads initially\n        executor.prestartAllCoreThreads();\n        executor.submit(new EmailServices());\n        executor.shutdown();\n        }\n}\n\n\n</code></pre>\n<p>I want to retrieve emailData in get() method of EmailBuffer class in EmailServices class so that i can use the verified values (email id, subject, body) to send mails. If there is another better way of implementing this then please let me know. Thank you!</p>\n"},{"tags":["java","telegram","telegram-bot"],"answers":[{"tags":[],"owner":{"account_id":3788672,"reputation":275,"user_id":9406623,"display_name":"ahooee"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1519583736,"creation_date":1519583736,"answer_id":48976999,"question_id":48967168,"body_markdown":"I solved the problem by adding this piece of code\r\nthat uses a EditMessageReplyMarkup object\r\n to edit existing inline keyboard  :\r\n\r\n       String call_data = update0.getCallbackQuery().getData();\r\n\t            long message_id = update0.getCallbackQuery().getMessage().getMessageId();\r\n\t            long chat_id = update0.getCallbackQuery().getMessage().getChatId();\r\n\t            String inline_message_id = update0.getCallbackQuery().getInlineMessageId();\r\n\t            if (call_data.equals(&quot;change_the_label&quot;)) {\r\n\t                String answer = &quot;Updated message text&quot;;\r\n\t                EditMessageReplyMarkup new_message = new EditMessageReplyMarkup()\r\n\t                        .setChatId(chat_id).setMessageId(toIntExact(message_id))\r\n\t                        .setInlineMessageId(inline_message_id);\r\n\t                InlineKeyboardButton dk1=new InlineKeyboardButton();\r\n\t                dk1.setText(&quot;label1&quot;);\r\n\t                dk1.setCallbackData(&quot;change_the_label&quot;);\r\n\t                InlineKeyboardMarkup markupInline = new InlineKeyboardMarkup();\r\n\t                List&lt;List&lt;InlineKeyboardButton&gt;&gt; rowsInline = new ArrayList&lt;&gt;();\r\n\t                List&lt;InlineKeyboardButton&gt; rowInline = new ArrayList&lt;&gt;();\r\n\t                \r\n\t                rowInline.add(dk1);\r\n\r\n\t                rowsInline.add(rowInline);\r\n\r\n\t                markupInline.setKeyboard(rowsInline);\r\n\t                new_message.setReplyMarkup(markupInline);\r\n\t                \r\n\t                                try {editMessageReplyMarkup(new_message);\r\n\t                   \r\n\t                } catch (TelegramApiException e) {\r\n\t                    e.printStackTrace();\r\n\t                }\r\n\t\t\t\r\n\r\n","title":"How to change InlineKeyboardButton label on user click?","body":"<p>I solved the problem by adding this piece of code\nthat uses a EditMessageReplyMarkup object\n to edit existing inline keyboard  :</p>\n\n<pre><code>   String call_data = update0.getCallbackQuery().getData();\n            long message_id = update0.getCallbackQuery().getMessage().getMessageId();\n            long chat_id = update0.getCallbackQuery().getMessage().getChatId();\n            String inline_message_id = update0.getCallbackQuery().getInlineMessageId();\n            if (call_data.equals(\"change_the_label\")) {\n                String answer = \"Updated message text\";\n                EditMessageReplyMarkup new_message = new EditMessageReplyMarkup()\n                        .setChatId(chat_id).setMessageId(toIntExact(message_id))\n                        .setInlineMessageId(inline_message_id);\n                InlineKeyboardButton dk1=new InlineKeyboardButton();\n                dk1.setText(\"label1\");\n                dk1.setCallbackData(\"change_the_label\");\n                InlineKeyboardMarkup markupInline = new InlineKeyboardMarkup();\n                List&lt;List&lt;InlineKeyboardButton&gt;&gt; rowsInline = new ArrayList&lt;&gt;();\n                List&lt;InlineKeyboardButton&gt; rowInline = new ArrayList&lt;&gt;();\n\n                rowInline.add(dk1);\n\n                rowsInline.add(rowInline);\n\n                markupInline.setKeyboard(rowsInline);\n                new_message.setReplyMarkup(markupInline);\n\n                                try {editMessageReplyMarkup(new_message);\n\n                } catch (TelegramApiException e) {\n                    e.printStackTrace();\n                }\n</code></pre>\n"}],"owner":{"account_id":3788672,"reputation":275,"user_id":9406623,"display_name":"ahooee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2519,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":48976999,"answer_count":1,"score":1,"last_activity_date":1701335173,"creation_date":1519503410,"question_id":48967168,"body_markdown":"I want to change the label of InlineKeyboardButton object  that initialized by setText() method ,after it clicked\r\n\r\nFor example,changing the &quot;label&quot; string to &quot;label-1&quot; By clicking the button.\r\n\r\nThis is a piece of my code:\r\n\r\n    if (update.hasMessage() &amp;&amp; update.getMessage().hasText()) {\r\n\t\tif (update.getMessage().getText().equals(&quot;/start&quot;)) {\r\n\t\t\tlong chat_id = update.getMessage().getChatId();\r\n\t\t\tmessage = new SendMessage() \r\n\t\t\t\t    .setChatId(chat_id)\r\n\t\t\t\t    .setText(&quot;You send /start&quot;);\r\n\t\t\tInlineKeyboardButton dk1=new InlineKeyboardButton().setText(&quot;labe1&quot;).setCallbackData(&quot;change_the_label&quot;);\r\n\t\t\tInlineKeyboardMarkup markupInline = new InlineKeyboardMarkup();\r\n\t    \tList&lt;List&lt;InlineKeyboardButton&gt;&gt; rowsInline = new ArrayList&lt;&gt;();\r\n\t    \tList&lt;InlineKeyboardButton&gt; rowInline = new ArrayList&lt;&gt;();\r\n\t    \trowInline.add(dk1);\r\n\t    \trowsInline.add(rowInline);\r\n\t    \tmarkupInline.setKeyboard(rowsInline);\r\n\t    \tmessage.setReplyMarkup(markupInline);\r\n\t    \ttry {execute(message); catch (TelegramApiException e) {e.printStackTrace();}}}","title":"How to change InlineKeyboardButton label on user click?","body":"<p>I want to change the label of InlineKeyboardButton object  that initialized by setText() method ,after it clicked</p>\n\n<p>For example,changing the \"label\" string to \"label-1\" By clicking the button.</p>\n\n<p>This is a piece of my code:</p>\n\n<pre><code>if (update.hasMessage() &amp;&amp; update.getMessage().hasText()) {\n    if (update.getMessage().getText().equals(\"/start\")) {\n        long chat_id = update.getMessage().getChatId();\n        message = new SendMessage() \n                .setChatId(chat_id)\n                .setText(\"You send /start\");\n        InlineKeyboardButton dk1=new InlineKeyboardButton().setText(\"labe1\").setCallbackData(\"change_the_label\");\n        InlineKeyboardMarkup markupInline = new InlineKeyboardMarkup();\n        List&lt;List&lt;InlineKeyboardButton&gt;&gt; rowsInline = new ArrayList&lt;&gt;();\n        List&lt;InlineKeyboardButton&gt; rowInline = new ArrayList&lt;&gt;();\n        rowInline.add(dk1);\n        rowsInline.add(rowInline);\n        markupInline.setKeyboard(rowsInline);\n        message.setReplyMarkup(markupInline);\n        try {execute(message); catch (TelegramApiException e) {e.printStackTrace();}}}\n</code></pre>\n"},{"tags":["java","mysql","jsp"],"answers":[{"comments":[{"owner":{"account_id":6266430,"reputation":111,"user_id":4872021,"accept_rate":56,"display_name":"abecadlo"},"score":0,"creation_date":1433772941,"post_id":30711447,"comment_id":49480397,"body_markdown":"I have another class which creates ArrayList&lt;Termin&gt;. This array countains id.Termin. I also have table which shows this Array. Is there possibility to take this id.Termin value from this table ?","body":"I have another class which creates ArrayList&lt;Termin&gt;. This array countains id.Termin. I also have table which shows this Array. Is there possibility to take this id.Termin value from this table ?"},{"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"score":0,"creation_date":1433773034,"post_id":30711447,"comment_id":49480493,"body_markdown":"then you can set this in any scope , such as `session` or `request` !!","body":"then you can set this in any scope , such as <code>session</code> or <code>request</code> !!"}],"tags":[],"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1433772704,"creation_date":1433772704,"answer_id":30711447,"question_id":30711304,"body_markdown":"This is not how **[Request#getParameter(nameOfParameter)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter(java.lang.String))** works :\r\n\r\nYou first need to create an input field having `name` attribue  as `idTermin`\r\n\r\nLike this :\r\n\r\n    &lt;input type=&quot;text&quot; name=&quot;idTermin&quot; value=&quot;&lt;%=termin.idTermin %&gt;&quot;/&gt;\r\n\r\nNow in your Servlet if you call \r\n\r\n    request.getParameter(&quot;idTermin&quot;);\r\n\r\nYou will get the desired value .\r\n\r\nIf you don&#39;t want an input field you can also create hidden field in your jsp :\r\n\r\n    &lt;input type=&quot;hidden&quot; name=&quot;idTermin&quot; value=&quot;&lt;%=termin.idTermin %&gt;&quot;/&gt;","title":"How to pass value from input text to jsp variable?","body":"<p>This is not how <strong><a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter(java.lang.String)\" rel=\"nofollow\">Request#getParameter(nameOfParameter)</a></strong> works :</p>\n\n<p>You first need to create an input field having <code>name</code> attribue  as <code>idTermin</code></p>\n\n<p>Like this :</p>\n\n<pre><code>&lt;input type=\"text\" name=\"idTermin\" value=\"&lt;%=termin.idTermin %&gt;\"/&gt;\n</code></pre>\n\n<p>Now in your Servlet if you call </p>\n\n<pre><code>request.getParameter(\"idTermin\");\n</code></pre>\n\n<p>You will get the desired value .</p>\n\n<p>If you don't want an input field you can also create hidden field in your jsp :</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"idTermin\" value=\"&lt;%=termin.idTermin %&gt;\"/&gt;\n</code></pre>\n"}],"owner":{"account_id":6266430,"reputation":111,"user_id":4872021,"accept_rate":56,"display_name":"abecadlo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9827,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1701341965,"answer_count":1,"score":1,"last_activity_date":1701335080,"creation_date":1433772307,"question_id":30711304,"body_markdown":"At beginning there is my jsp page code:\r\n\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n        pageEncoding=&quot;UTF-8&quot;%&gt;\r\n        &lt;%@ page import=&quot;java.sql.*&quot;%&gt;\r\n    &lt;%@ page import=&quot;java.io.*&quot;%&gt;\r\n    &lt;%@ page import=&quot;java.util.*&quot; %&gt;\r\n    &lt;%@ page import=&quot;test.Obiekt&quot; %&gt;\r\n    &lt;%@ page import=&quot;test.ListaObiektow&quot; %&gt;\r\n    &lt;%@ page import=&quot;test.Termin&quot; %&gt;\r\n    &lt;%@ page import=&quot;test.ListaTerminow&quot; %&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n      &lt;head&gt;\r\n        &lt;meta charset=&quot;utf-8&quot;&gt;\r\n        &lt;title&gt;menu g&#243;wne&lt;/title&gt;\r\n    \r\n        &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1&quot;&gt;\r\n    \r\n        \r\n        &lt;meta name=&quot;android-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;\r\n        &lt;meta name=&quot;android-mobile-web-app-status-bar-style&quot; content=&quot;black&quot;&gt;\r\n    \r\n       &lt;link href=&quot;css/ratchet.css&quot; rel=&quot;stylesheet&quot;&gt;\r\n        &lt;link href=&quot;css/ratchet-theme-android.css&quot; rel=&quot;stylesheet&quot;&gt;\r\n    \r\n       \r\n        &lt;script src=&quot;js/ratchet.js&quot;&gt;&lt;/script&gt;\r\n        \r\n      &lt;/head&gt;\r\n      &lt;body&gt;\r\n      &lt;!-- &lt;header class=&quot;bar bar-nav&quot;&gt;\r\n      &lt;a class=&quot;icon icon-left-nav pull-left&quot; href=&quot;wyszukaj.html&quot;&gt;&lt;/a&gt;\r\n      &lt;h1 class=&quot;title&quot;&gt;Wybierz obiekt&lt;/h1&gt;\r\n    &lt;/header&gt; --&gt;\r\n    \r\n    &lt;div id=&quot;content&quot;&gt;\r\n       &lt;%\r\n    List&lt;Obiekt&gt; list = new ListaObiektow().getObiekty();\r\n    %&gt;\r\n    &lt;select name=&quot;obiekt&quot;&gt;\r\n    \t\t&lt;option selected value=&quot;default&quot;&gt;Wybierz Obiekt&lt;/option&gt;\r\n    \t\t&lt;%\r\n    \t\t\tfor (Obiekt obiekt : list) {\r\n    \t\t%&gt;\r\n    \t\t&lt;option value=&quot;&lt;%=obiekt.idObiekt %&gt;&quot;&gt;&lt;%=obiekt.nazwa%&gt; &lt;%=obiekt.adres %&gt;&lt;/option&gt;\r\n    \t\t&lt;%\r\n    \t\t\t}\r\n    \t\t%&gt;\r\n    \t\t&lt;%\r\n    \t\t\t\r\n    \t\t%&gt;\r\n    &lt;/select&gt; \r\n    &lt;br&gt;&lt;br&gt;\r\n    &lt;form name=&quot;rezerwuj&quot;&gt;\r\n    \t&lt;font color=&quot;white&quot;&gt;Liczba uczestnik&#243;w&lt;/font&gt;&lt;input type=&quot;text&quot; name=&quot;uczest&quot;/&gt;\r\n    \t&lt;%\r\n    \t\tint liczbaUczestnikow = Integer.parseInt(request.getParameter(&quot;uczest&quot;));\r\n    \t%&gt;\r\n    &lt;/form&gt;    \r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;%List&lt;Termin&gt; lista = new ListaTerminow().getTerminy(); %&gt;\r\n    &lt;div id=&quot;terminy&quot;&gt;\r\n    &lt;table&gt;\r\n    \t\r\n    \t&lt;%for (Termin termin : lista) {%&gt;\r\n    \t&lt;tr&gt;\r\n    \t&lt;td&gt;&lt;%=termin.idTermin %&gt;&lt;/td&gt;\r\n    \t&lt;td&gt;&lt;%=termin.nazwaObiektu %&gt; &lt;%=termin.adresObiektu %&gt; &lt;/td&gt;\r\n    \t&lt;td&gt;&lt;%=termin.dzien %&gt; &lt;/td&gt;\r\n    \t&lt;td&gt;&lt;%=termin.odKtorej %&gt; &lt;/td&gt;\r\n    \t&lt;td&gt;&lt;%=termin.doKtorej %&gt; &lt;/td&gt;\r\n    \t&lt;td&gt;&lt;form action=&quot;Zarezerwuj&quot; method=&quot;post&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;Rezerwuj&quot;&gt;&lt;/form&gt;&lt;/td&gt;\r\n    \t&lt;/tr&gt;\r\n    \t&lt;% } %&gt;\r\n    \t\r\n    &lt;/table&gt;\r\n    &lt;/div&gt;\r\n    &lt;br&gt;&lt;br&gt;&lt;br&gt;\r\n    \r\n    &lt;/div&gt;\r\n    \r\n    \r\n      &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nI want to get value from `&lt;input type=&quot;text&quot; name=&quot;uczest&quot;/&gt;` and remember her for submit button which calls mysql query placed in this class:\r\n\r\n    package test;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import test.Rezerwacja;\r\n    \r\n    import java.sql.*;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.annotation.WebServlet;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import test.ConnectionClass;;\r\n    /**\r\n     * Servlet implementation class Zarezerwuj\r\n     */\r\n    @WebServlet(&quot;/Zarezerwuj&quot;)\r\n    public class Zarezerwuj extends HttpServlet {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n        Connection conn; \r\n        \r\n        public Zarezerwuj() {\r\n            super();\r\n            conn = ConnectionClass.Polacz();\r\n        }\r\n    \r\n    \t\r\n    \tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t\t\r\n    \t}\r\n    \r\n    \t\r\n    \tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t\t\r\n    \t\tint liczbaUczestnikow = Integer.parseInt(request.getParameter(&quot;liczbaUczestnikow&quot;));\r\n    \t\tint idTermin = Integer.parseInt(request.getParameter(&quot;idTermin&quot;));\r\n    \t\tStatement st = null;\r\n    \t\tString sql = &quot;INSERT INTO rezerwacje (liczbaUczestnikow,idTermin) values (&#39;&quot; + liczbaUczestnikow + &quot;&#39;,&#39;&quot; + idTermin + &quot;&#39;)&quot;;\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\tst = conn.createStatement();\r\n    \t\t}\r\n    \t\tcatch(SQLException e)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(e);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nWhat&#39;s more i want to pass `&lt;td&gt;&lt;%=termin.idTermin %&gt;&lt;/td&gt;` termin.idTermin to Zarezerwuj servlet. \r\n\r\nI&#39;ve tried request.getParameter by server calls Jesper Null Exception. I have no idea what to do now. ","title":"How to pass value from input text to jsp variable?","body":"<p>At beginning there is my jsp page code:</p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%&gt;\n    &lt;%@ page import=\"java.sql.*\"%&gt;\n&lt;%@ page import=\"java.io.*\"%&gt;\n&lt;%@ page import=\"java.util.*\" %&gt;\n&lt;%@ page import=\"test.Obiekt\" %&gt;\n&lt;%@ page import=\"test.ListaObiektow\" %&gt;\n&lt;%@ page import=\"test.Termin\" %&gt;\n&lt;%@ page import=\"test.ListaTerminow\" %&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;menu gwne&lt;/title&gt;\n\n    &lt;meta name=\"viewport\" content=\"initial-scale=1, maximum-scale=1\"&gt;\n\n\n    &lt;meta name=\"android-mobile-web-app-capable\" content=\"yes\"&gt;\n    &lt;meta name=\"android-mobile-web-app-status-bar-style\" content=\"black\"&gt;\n\n   &lt;link href=\"css/ratchet.css\" rel=\"stylesheet\"&gt;\n    &lt;link href=\"css/ratchet-theme-android.css\" rel=\"stylesheet\"&gt;\n\n\n    &lt;script src=\"js/ratchet.js\"&gt;&lt;/script&gt;\n\n  &lt;/head&gt;\n  &lt;body&gt;\n  &lt;!-- &lt;header class=\"bar bar-nav\"&gt;\n  &lt;a class=\"icon icon-left-nav pull-left\" href=\"wyszukaj.html\"&gt;&lt;/a&gt;\n  &lt;h1 class=\"title\"&gt;Wybierz obiekt&lt;/h1&gt;\n&lt;/header&gt; --&gt;\n\n&lt;div id=\"content\"&gt;\n   &lt;%\nList&lt;Obiekt&gt; list = new ListaObiektow().getObiekty();\n%&gt;\n&lt;select name=\"obiekt\"&gt;\n        &lt;option selected value=\"default\"&gt;Wybierz Obiekt&lt;/option&gt;\n        &lt;%\n            for (Obiekt obiekt : list) {\n        %&gt;\n        &lt;option value=\"&lt;%=obiekt.idObiekt %&gt;\"&gt;&lt;%=obiekt.nazwa%&gt; &lt;%=obiekt.adres %&gt;&lt;/option&gt;\n        &lt;%\n            }\n        %&gt;\n        &lt;%\n\n        %&gt;\n&lt;/select&gt; \n&lt;br&gt;&lt;br&gt;\n&lt;form name=\"rezerwuj\"&gt;\n    &lt;font color=\"white\"&gt;Liczba uczestnikw&lt;/font&gt;&lt;input type=\"text\" name=\"uczest\"/&gt;\n    &lt;%\n        int liczbaUczestnikow = Integer.parseInt(request.getParameter(\"uczest\"));\n    %&gt;\n&lt;/form&gt;    \n&lt;br&gt;\n&lt;br&gt;\n&lt;%List&lt;Termin&gt; lista = new ListaTerminow().getTerminy(); %&gt;\n&lt;div id=\"terminy\"&gt;\n&lt;table&gt;\n\n    &lt;%for (Termin termin : lista) {%&gt;\n    &lt;tr&gt;\n    &lt;td&gt;&lt;%=termin.idTermin %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%=termin.nazwaObiektu %&gt; &lt;%=termin.adresObiektu %&gt; &lt;/td&gt;\n    &lt;td&gt;&lt;%=termin.dzien %&gt; &lt;/td&gt;\n    &lt;td&gt;&lt;%=termin.odKtorej %&gt; &lt;/td&gt;\n    &lt;td&gt;&lt;%=termin.doKtorej %&gt; &lt;/td&gt;\n    &lt;td&gt;&lt;form action=\"Zarezerwuj\" method=\"post\"&gt;&lt;input type=\"submit\" value=\"Rezerwuj\"&gt;&lt;/form&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;% } %&gt;\n\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;br&gt;&lt;br&gt;&lt;br&gt;\n\n&lt;/div&gt;\n\n\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I want to get value from <code>&lt;input type=\"text\" name=\"uczest\"/&gt;</code> and remember her for submit button which calls mysql query placed in this class:</p>\n\n<pre><code>package test;\n\nimport java.io.IOException;\n\nimport test.Rezerwacja;\n\nimport java.sql.*;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport test.ConnectionClass;;\n/**\n * Servlet implementation class Zarezerwuj\n */\n@WebServlet(\"/Zarezerwuj\")\npublic class Zarezerwuj extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n    Connection conn; \n\n    public Zarezerwuj() {\n        super();\n        conn = ConnectionClass.Polacz();\n    }\n\n\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n\n    }\n\n\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n\n        int liczbaUczestnikow = Integer.parseInt(request.getParameter(\"liczbaUczestnikow\"));\n        int idTermin = Integer.parseInt(request.getParameter(\"idTermin\"));\n        Statement st = null;\n        String sql = \"INSERT INTO rezerwacje (liczbaUczestnikow,idTermin) values ('\" + liczbaUczestnikow + \"','\" + idTermin + \"')\";\n        try\n        {\n            st = conn.createStatement();\n        }\n        catch(SQLException e)\n        {\n            System.out.println(e);\n        }\n    }\n\n}\n</code></pre>\n\n<p>What's more i want to pass <code>&lt;td&gt;&lt;%=termin.idTermin %&gt;&lt;/td&gt;</code> termin.idTermin to Zarezerwuj servlet. </p>\n\n<p>I've tried request.getParameter by server calls Jesper Null Exception. I have no idea what to do now. </p>\n"},{"tags":["java","jmx","mbeans"],"comments":[{"owner":{"account_id":369969,"reputation":21500,"user_id":717630,"display_name":"grepit"},"score":0,"creation_date":1361200410,"post_id":14939335,"comment_id":20966026,"body_markdown":"is your implementation class in the same package as your inteface ? look at this link https://forums.oracle.com/forums/thread.jspa?messageID=4795137.","body":"is your implementation class in the same package as your inteface ? look at this link <a href=\"https://forums.oracle.com/forums/thread.jspa?messageID=4795137\" rel=\"nofollow noreferrer\">forums.oracle.com/forums/thread.jspa?messageID=4795137</a>."},{"owner":{"account_id":1264629,"reputation":2419,"user_id":1222197,"accept_rate":64,"display_name":"sworded"},"score":0,"creation_date":1361200622,"post_id":14939335,"comment_id":20966161,"body_markdown":"They are both in the same package.  I didn&#39;t find any help in that link.","body":"They are both in the same package.  I didn&#39;t find any help in that link."},{"owner":{"account_id":369969,"reputation":21500,"user_id":717630,"display_name":"grepit"},"score":0,"creation_date":1361200948,"post_id":14939335,"comment_id":20966322,"body_markdown":"did you look at the &quot;Posted: Sep 7, 2010 7:08 AM&quot; it has some information about similar error you posted. The exception is the same but the main problem might be something else. I only can try to help without seeing the code it&#39;s kind of hard to debug. https://forums.oracle.com/forums/thread.jspa?messageID=4795137.","body":"did you look at the &quot;Posted: Sep 7, 2010 7:08 AM&quot; it has some information about similar error you posted. The exception is the same but the main problem might be something else. I only can try to help without seeing the code it&#39;s kind of hard to debug. <a href=\"https://forums.oracle.com/forums/thread.jspa?messageID=4795137\" rel=\"nofollow noreferrer\">forums.oracle.com/forums/thread.jspa?messageID=4795137</a>."},{"owner":{"account_id":1264629,"reputation":2419,"user_id":1222197,"accept_rate":64,"display_name":"sworded"},"score":0,"creation_date":1361201937,"post_id":14939335,"comment_id":20966840,"body_markdown":"This is just a java app.","body":"This is just a java app."},{"owner":{"account_id":369969,"reputation":21500,"user_id":717630,"display_name":"grepit"},"score":0,"creation_date":1361202493,"post_id":14939335,"comment_id":20967149,"body_markdown":"can you tell me if you are using jre6 or jre1.6.0_01  or some other version.try using an older jre instead of jre1.6.0_01 (previous version of jre ,jre6). hope this helps and resolves your problem","body":"can you tell me if you are using jre6 or jre1.6.0_01  or some other version.try using an older jre instead of jre1.6.0_01 (previous version of jre ,jre6). hope this helps and resolves your problem"},{"owner":{"account_id":1264629,"reputation":2419,"user_id":1222197,"accept_rate":64,"display_name":"sworded"},"score":0,"creation_date":1361202703,"post_id":14939335,"comment_id":20967265,"body_markdown":"I am using JRE 1.7.  What you are suggesting is more of a hack than a solution.","body":"I am using JRE 1.7.  What you are suggesting is more of a hack than a solution."}],"answers":[{"comments":[{"owner":{"account_id":1264629,"reputation":2419,"user_id":1222197,"accept_rate":64,"display_name":"sworded"},"score":0,"creation_date":1361207503,"post_id":14940922,"comment_id":20969933,"body_markdown":"Thanks!  I was missing an interface for my custom type.","body":"Thanks!  I was missing an interface for my custom type."},{"owner":{"account_id":987285,"reputation":17009,"user_id":1005481,"accept_rate":89,"display_name":"barfuin"},"score":0,"creation_date":1385139635,"post_id":14940922,"comment_id":30033945,"body_markdown":"One may have to [activate JMX](http://stackoverflow.com/q/856881/1005481) to be able to access the custom MBean via jconsole.","body":"One may have to <a href=\"http://stackoverflow.com/q/856881/1005481\">activate JMX</a> to be able to access the custom MBean via jconsole."},{"owner":{"account_id":987285,"reputation":17009,"user_id":1005481,"accept_rate":89,"display_name":"barfuin"},"score":0,"creation_date":1385143453,"post_id":14940922,"comment_id":30036116,"body_markdown":"Be sure to follow Nicholas&#39; example and define the getter method as `public JmsDestinationAttributes getAttributes();`, specifying the *implementation class* as return type. Using `public JmsDestinationAttributesMBean getAttributes();` would not work (using the *interface* as return type). Kinda weird, but hey.","body":"Be sure to follow Nicholas&#39; example and define the getter method as <code>public JmsDestinationAttributes getAttributes();</code>, specifying the <i>implementation class</i> as return type. Using <code>public JmsDestinationAttributesMBean getAttributes();</code> would not work (using the <i>interface</i> as return type). Kinda weird, but hey."},{"owner":{"account_id":2504721,"reputation":2048,"user_id":2178786,"accept_rate":0,"display_name":"mvsagar"},"score":0,"creation_date":1417799132,"post_id":14940922,"comment_id":43101403,"body_markdown":"For benefit of others: I had similar requirement and Nicholas reply helped. But you have to add @ConstructorProperties({&quot;name&quot;}) just before constructor of JmsDestinationAttributes or you may get run-time error. Further I could even return arrays of objects from the custom type methods.","body":"For benefit of others: I had similar requirement and Nicholas reply helped. But you have to add @ConstructorProperties({&quot;name&quot;}) just before constructor of JmsDestinationAttributes or you may get run-time error. Further I could even return arrays of objects from the custom type methods."}],"tags":[],"owner":{"account_id":18897,"reputation":15976,"user_id":43786,"accept_rate":83,"display_name":"Nicholas"},"comment_count":4,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1361205143,"creation_date":1361205143,"answer_id":14940922,"question_id":14939335,"body_markdown":"The problem is the interface **IJmsDestinationMBean**. It returns a type **JmsDestinationAttributes** which is not an open type. Here&#39;s the rules-of-thumb I follow when doing this:\r\n\r\n - The actual registered MBean (which has a complex typed attribute) is called **Foo** and it&#39;s management interface is called **FooMXBean**.\r\n - The complex type (the attribute of **Foo** is called **Bar** and has a management interface called **BarMBean**. This guy ***cannot*** return any values that are not open types or other properly exposed complex types.\r\n\r\nSo (for this example) the &quot;host&quot; MBean needs to be an MXBean in order to support complex types , and the complex type needs to have an interface called **&amp;lt;ClassName&amp;gt;MBean**. Note that one has the M**X**Bean interface, and the other has the MBean interface.\r\n\r\nHere&#39;s my example: \r\n\r\n - **JMSDestination** implements **JMSDestinationMXBean**\r\n - **JmsDestinationAttributes** implements **JmsDestinationAttributesMBean**\r\n\r\n...apologies for the loose case standard. It&#39;s an on the fly example.\r\n\r\nHere the JMSDestination code, with a **main** to create and register. I am simply using the user name property to provide the name.:\r\n\r\n\r\n    public class JmsDestination implements JmsDestinationMXBean {\r\n    \tprotected JmsDestinationAttributes attrs = new JmsDestinationAttributes(System.getProperty(&quot;user.name&quot;));\r\n    \r\n    \tpublic JmsDestinationAttributes getAttributes() {\r\n    \t\treturn attrs;\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tJmsDestination impl = new JmsDestination();\r\n    \t\ttry {\r\n    \t\t\tManagementFactory.getPlatformMBeanServer().registerMBean(impl, new ObjectName(&quot;org.jms.impl.test:name=&quot; + impl.attrs.getName()));\r\n    \t\t\tThread.currentThread().join();\r\n    \t\t} catch (Exception ex) {\r\n    \t\t\tex.printStackTrace(System.err);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThe JMSDestinationMXBean code:\r\n\r\n\r\n    public interface JmsDestinationMXBean {\r\n    \tpublic JmsDestinationAttributes getAttributes();\r\n    }\r\n\r\n\r\nThe JmsDestinationAttributes code which uses the same name and random numbers for the values:\r\n\r\n\r\n    public class JmsDestinationAttributes implements JmsDestinationAttributesMBean {\r\n    \tprotected final String name;\r\n    \tprotected final Random random = new Random(System.currentTimeMillis());\r\n    \tpublic JmsDestinationAttributes(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic int getMessagesCurrentCount() {\r\n    \t\treturn Math.abs(random.nextInt(100));\r\n    \t}\r\n    \r\n    \tpublic int getConsumersCurrentCount() {\r\n    \t\treturn Math.abs(random.nextInt(10));\r\n    \t}\r\n    }\r\n\r\n\r\n.... and the JmsDestinationAttributesMBean:\r\n\r\n\r\n    public interface JmsDestinationAttributesMBean {\r\n    \tpublic String getName();\r\n    \tpublic int getMessagesCurrentCount();\r\n    \tpublic int getConsumersCurrentCount();\r\n    }\r\n\r\n\r\nThe JConsole view looks like this:\r\n\r\n![JConsole view of the MXBean][1]\r\n\r\nThe JConsole view of the MXBean&#39;s attributes looks like this:\r\n\r\n![JConsole view of the MXBean&#39;s Attributes][2]\r\n\r\nMake sense ?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/GkYb6.png\r\n  [2]: http://i.stack.imgur.com/CizIc.png","title":"Java MXBean custom types","body":"<p>The problem is the interface <strong>IJmsDestinationMBean</strong>. It returns a type <strong>JmsDestinationAttributes</strong> which is not an open type. Here's the rules-of-thumb I follow when doing this:</p>\n\n<ul>\n<li>The actual registered MBean (which has a complex typed attribute) is called <strong>Foo</strong> and it's management interface is called <strong>FooMXBean</strong>.</li>\n<li>The complex type (the attribute of <strong>Foo</strong> is called <strong>Bar</strong> and has a management interface called <strong>BarMBean</strong>. This guy <strong><em>cannot</em></strong> return any values that are not open types or other properly exposed complex types.</li>\n</ul>\n\n<p>So (for this example) the \"host\" MBean needs to be an MXBean in order to support complex types , and the complex type needs to have an interface called <strong>&lt;ClassName&gt;MBean</strong>. Note that one has the M<strong>X</strong>Bean interface, and the other has the MBean interface.</p>\n\n<p>Here's my example: </p>\n\n<ul>\n<li><strong>JMSDestination</strong> implements <strong>JMSDestinationMXBean</strong></li>\n<li><strong>JmsDestinationAttributes</strong> implements <strong>JmsDestinationAttributesMBean</strong></li>\n</ul>\n\n<p>...apologies for the loose case standard. It's an on the fly example.</p>\n\n<p>Here the JMSDestination code, with a <strong>main</strong> to create and register. I am simply using the user name property to provide the name.:</p>\n\n<pre><code>public class JmsDestination implements JmsDestinationMXBean {\n    protected JmsDestinationAttributes attrs = new JmsDestinationAttributes(System.getProperty(\"user.name\"));\n\n    public JmsDestinationAttributes getAttributes() {\n        return attrs;\n    }\n\n    public static void main(String[] args) {\n        JmsDestination impl = new JmsDestination();\n        try {\n            ManagementFactory.getPlatformMBeanServer().registerMBean(impl, new ObjectName(\"org.jms.impl.test:name=\" + impl.attrs.getName()));\n            Thread.currentThread().join();\n        } catch (Exception ex) {\n            ex.printStackTrace(System.err);\n        }\n    }\n}\n</code></pre>\n\n<p>The JMSDestinationMXBean code:</p>\n\n<pre><code>public interface JmsDestinationMXBean {\n    public JmsDestinationAttributes getAttributes();\n}\n</code></pre>\n\n<p>The JmsDestinationAttributes code which uses the same name and random numbers for the values:</p>\n\n<pre><code>public class JmsDestinationAttributes implements JmsDestinationAttributesMBean {\n    protected final String name;\n    protected final Random random = new Random(System.currentTimeMillis());\n    public JmsDestinationAttributes(String name) {\n        this.name = name;\n    }\n    public String getName() {\n        return name;\n    }\n\n    public int getMessagesCurrentCount() {\n        return Math.abs(random.nextInt(100));\n    }\n\n    public int getConsumersCurrentCount() {\n        return Math.abs(random.nextInt(10));\n    }\n}\n</code></pre>\n\n<p>.... and the JmsDestinationAttributesMBean:</p>\n\n<pre><code>public interface JmsDestinationAttributesMBean {\n    public String getName();\n    public int getMessagesCurrentCount();\n    public int getConsumersCurrentCount();\n}\n</code></pre>\n\n<p>The JConsole view looks like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/GkYb6.png\" alt=\"JConsole view of the MXBean\"></p>\n\n<p>The JConsole view of the MXBean's attributes looks like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/CizIc.png\" alt=\"JConsole view of the MXBean&#39;s Attributes\"></p>\n\n<p>Make sense ?</p>\n"},{"tags":[],"owner":{"account_id":295678,"reputation":464,"user_id":3771045,"display_name":"Andrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701334914,"creation_date":1701334914,"answer_id":77577114,"question_id":14939335,"body_markdown":"Some additions to @Nicholas answer\r\n\r\nHere it is very good [Oracle documentation on MXBean][1]\r\n\r\n  [1]: https://docs.oracle.com/javase%2F9%2Fdocs%2Fapi%2F%2F/javax/management/MXBean.html\r\n\r\nThere are two ways to deserialize MXBeans :\r\n\r\n1. Create a static method in the bean, then that method is called to reconstruct an instance of **J**.\r\n\r\n    public static **J** from(CompositeData cd)\r\n\r\n\r\n2. Or if **J** has at least one public constructor with either **@javax.management.ConstructorParameters** or **@java.beans.ConstructoProperties** annotation, then one of those constructors (not necessarily always the same one) will be called to reconstruct an instance of **J**.","title":"Java MXBean custom types","body":"<p>Some additions to @Nicholas answer</p>\n<p>Here it is very good <a href=\"https://docs.oracle.com/javase%2F9%2Fdocs%2Fapi%2F%2F/javax/management/MXBean.html\" rel=\"nofollow noreferrer\">Oracle documentation on MXBean</a></p>\n<p>There are two ways to deserialize MXBeans :</p>\n<ol>\n<li><p>Create a static method in the bean, then that method is called to reconstruct an instance of <strong>J</strong>.</p>\n<p>public static <strong>J</strong> from(CompositeData cd)</p>\n</li>\n<li><p>Or if <strong>J</strong> has at least one public constructor with either <strong>@javax.management.ConstructorParameters</strong> or <strong>@java.beans.ConstructoProperties</strong> annotation, then one of those constructors (not necessarily always the same one) will be called to reconstruct an instance of <strong>J</strong>.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":1264629,"reputation":2419,"user_id":1222197,"accept_rate":64,"display_name":"sworded"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7845,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":14940922,"answer_count":2,"score":5,"last_activity_date":1701334914,"creation_date":1361200029,"question_id":14939335,"body_markdown":"I am trying to create an MXBean with a custom attribute, but I get javax.management.NotCompliantMBeanException\r\nIJmsDestinationMBean.getAttributes has parameter or return type that cannot be translated into an open type\r\n\r\nI have read that MXBean attributes have to be OpenType compatible.\r\nHow would I make my attribute work this way?\r\nAll the classes below are in the same package.\r\n\r\n    class JmsDestinationMBean implements IJmsDestinationMBean{\r\n\r\n      protected JmsDestinationAttributes attributes = new JmsDestinationAttributes();\r\n\r\n      @Override\r\n      public JmsDestinationAttributes getAttributes() {\r\n        return this.attributes;\r\n      }\r\n    }\r\n\r\n    @MXBean\r\n    interface IJmsDestinationMBean {\r\n      JmsDestinationAttributes getAttributes()\r\n    }\r\n\r\n    class JmsDestinationAttributes {\r\n\r\n      protected String name\r\n      protected int messagesCurrentCount\r\n      protected int consumersCurrentCount\r\n\r\n      String getName() {\r\n        this.name;\r\n      }\r\n\r\n      int getMessagesCurrentCount() {\r\n        this.messagesCurrentCount;\r\n      }\r\n\r\n      int getConsumersCurrentCount() {\r\n        this.consumersCurrentCount;\r\n      }\r\n    }","title":"Java MXBean custom types","body":"<p>I am trying to create an MXBean with a custom attribute, but I get javax.management.NotCompliantMBeanException\nIJmsDestinationMBean.getAttributes has parameter or return type that cannot be translated into an open type</p>\n\n<p>I have read that MXBean attributes have to be OpenType compatible.\nHow would I make my attribute work this way?\nAll the classes below are in the same package.</p>\n\n<pre><code>class JmsDestinationMBean implements IJmsDestinationMBean{\n\n  protected JmsDestinationAttributes attributes = new JmsDestinationAttributes();\n\n  @Override\n  public JmsDestinationAttributes getAttributes() {\n    return this.attributes;\n  }\n}\n\n@MXBean\ninterface IJmsDestinationMBean {\n  JmsDestinationAttributes getAttributes()\n}\n\nclass JmsDestinationAttributes {\n\n  protected String name\n  protected int messagesCurrentCount\n  protected int consumersCurrentCount\n\n  String getName() {\n    this.name;\n  }\n\n  int getMessagesCurrentCount() {\n    this.messagesCurrentCount;\n  }\n\n  int getConsumersCurrentCount() {\n    this.consumersCurrentCount;\n  }\n}\n</code></pre>\n"},{"tags":["java","digital-signature","code-signing","trusted-timestamp","thawte"],"comments":[{"owner":{"account_id":4043765,"reputation":11801,"user_id":3325704,"display_name":"jariq"},"score":0,"creation_date":1444380799,"post_id":33033107,"comment_id":53889283,"body_markdown":"Sign it again, this time with the time-stamp included, and provide updated application to your customers before your original signature expires.","body":"Sign it again, this time with the time-stamp included, and provide updated application to your customers before your original signature expires."},{"owner":{"account_id":3472827,"reputation":469,"user_id":2906764,"accept_rate":67,"display_name":"stepand76"},"score":0,"creation_date":1444384701,"post_id":33033107,"comment_id":53891787,"body_markdown":"@jariq We are going to do it, but it is not possible to contact all of customers. We don&#39;t know who and where is our application running. It&#39;s package software. We develop it, sell it to system integrators and they install it at the end-user site...","body":"@jariq We are going to do it, but it is not possible to contact all of customers. We don&#39;t know who and where is our application running. It&#39;s package software. We develop it, sell it to system integrators and they install it at the end-user site..."}],"answers":[{"tags":[],"owner":{"account_id":4540319,"reputation":380,"user_id":3688374,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1520691987,"creation_date":1446200947,"answer_id":33433821,"question_id":33033107,"body_markdown":"**What happens?**\r\n\r\nWebStart&#39;s behavior highly depends on the JRE version it belongs to.\r\n\r\nThese are our test results with an application signed with a valid certificate from an official certificate autority but without timestamping after the certificate expires. Tested on Windows 7 with x64 JREs by directly executing `javaws.exe` in different versions and changing the system clock for simulation:\r\n\r\n - &amp;lt;= 7u21: warning message (can be hidden with check box)\r\n - 7u25 - 7u40: WebStart is broken in different ways, changing behavior in every update release, do not use anyway\r\n - 7u45 to 7u51: application is blocked at security setting &quot;very high&quot;, warning message at setting &quot;high&quot; (can be hidden with check box)\r\n - &amp;gt;= 7u55: application is blocked\r\n - &amp;gt;= 8u0: application is blocked\r\n\r\nWe noticed that WebStart tries to use the most up-to-date version currently installed on the system when starting from the browser. Changing the application for JNLP files in the browser is not sufficient (Firefox). There is a lookup strategy using the JREs and JDKs installed in the `Programm Files\\Java` folder. Calling `javaws.exe` from the command line or a Windows link really executes the version to test. You can see the version in the Java Console (successful start) or the Task Manager command line column (delegates to a `jp2launcher.exe` of another version).\r\n\r\n**Workaround**\r\n\r\n - For us the exception site list does work (tested with j8u66). However, it seems to be tricky to enter the right URL. We think it has to be exactly the same URL as used in the JNLP file URL. When the JNLP URL is `http://myhost:12345/my/app/test.jnlp` the exception site `http://myhost:12345/` does work. Using the IP address of `myhost` instead or `myhost.in-my-domain.com` will not match. See http://java.com/de/download/faq/exception_sitelist.xml.\r\n - Depending on your type of application creating a Windows desktop link to a j7u21 `...\\javaws.exe &lt;jnlp-url&gt;` may be a way out.\r\n\r\n**Signing with time stamping and a warning**\r\n\r\nOracle states that signing with time stamping from an official time stamping authority (TSA) will prevent signatures from expiring. This allows you to prevent the problem in future releases and to deliver update releases.\r\n\r\n**Please note this warning:** WebStart is happy with the time stamped signatures even after expiration of the signing certificate. However, it will block the application and state &quot;certificate has expired or is not yet valid&quot; at the time your TSA&#39;s certificate expires. In our tests this is at 2020-03-16 using the TSA `http://tsa.starfieldtech.com/`. You can see this expiration date following `Timestamp:` in the output of `keytool -printcert -jarfile &lt;your-signed.jar&gt;`.\r\n\r\nTime stamping only gives you some more years on the clock of this time bomb. Depending on your type of application this may not be a problem, but for embedded applications in closed environments that have to run for the next 10 years this is a killer.\r\n(tested with j8u66)\r\n\r\nUpdate from 2016-01-07: The final answer from Oracle Support concerning this issue is &quot;There is no bug. The behaviour is expected and intentional. There will definitely be no change.&quot;. This means there is and will be no way to sign an application without expiration.","title":"What happens to Java Web Start application (signed without timestamp) when certificate expires?","body":"<p><strong>What happens?</strong></p>\n\n<p>WebStart's behavior highly depends on the JRE version it belongs to.</p>\n\n<p>These are our test results with an application signed with a valid certificate from an official certificate autority but without timestamping after the certificate expires. Tested on Windows 7 with x64 JREs by directly executing <code>javaws.exe</code> in different versions and changing the system clock for simulation:</p>\n\n<ul>\n<li>&lt;= 7u21: warning message (can be hidden with check box)</li>\n<li>7u25 - 7u40: WebStart is broken in different ways, changing behavior in every update release, do not use anyway</li>\n<li>7u45 to 7u51: application is blocked at security setting \"very high\", warning message at setting \"high\" (can be hidden with check box)</li>\n<li>&gt;= 7u55: application is blocked</li>\n<li>&gt;= 8u0: application is blocked</li>\n</ul>\n\n<p>We noticed that WebStart tries to use the most up-to-date version currently installed on the system when starting from the browser. Changing the application for JNLP files in the browser is not sufficient (Firefox). There is a lookup strategy using the JREs and JDKs installed in the <code>Programm Files\\Java</code> folder. Calling <code>javaws.exe</code> from the command line or a Windows link really executes the version to test. You can see the version in the Java Console (successful start) or the Task Manager command line column (delegates to a <code>jp2launcher.exe</code> of another version).</p>\n\n<p><strong>Workaround</strong></p>\n\n<ul>\n<li>For us the exception site list does work (tested with j8u66). However, it seems to be tricky to enter the right URL. We think it has to be exactly the same URL as used in the JNLP file URL. When the JNLP URL is <code>http://myhost:12345/my/app/test.jnlp</code> the exception site <code>http://myhost:12345/</code> does work. Using the IP address of <code>myhost</code> instead or <code>myhost.in-my-domain.com</code> will not match. See <a href=\"http://java.com/de/download/faq/exception_sitelist.xml\" rel=\"nofollow noreferrer\">http://java.com/de/download/faq/exception_sitelist.xml</a>.</li>\n<li>Depending on your type of application creating a Windows desktop link to a j7u21 <code>...\\javaws.exe &lt;jnlp-url&gt;</code> may be a way out.</li>\n</ul>\n\n<p><strong>Signing with time stamping and a warning</strong></p>\n\n<p>Oracle states that signing with time stamping from an official time stamping authority (TSA) will prevent signatures from expiring. This allows you to prevent the problem in future releases and to deliver update releases.</p>\n\n<p><strong>Please note this warning:</strong> WebStart is happy with the time stamped signatures even after expiration of the signing certificate. However, it will block the application and state \"certificate has expired or is not yet valid\" at the time your TSA's certificate expires. In our tests this is at 2020-03-16 using the TSA <code>http://tsa.starfieldtech.com/</code>. You can see this expiration date following <code>Timestamp:</code> in the output of <code>keytool -printcert -jarfile &lt;your-signed.jar&gt;</code>.</p>\n\n<p>Time stamping only gives you some more years on the clock of this time bomb. Depending on your type of application this may not be a problem, but for embedded applications in closed environments that have to run for the next 10 years this is a killer.\n(tested with j8u66)</p>\n\n<p>Update from 2016-01-07: The final answer from Oracle Support concerning this issue is \"There is no bug. The behaviour is expected and intentional. There will definitely be no change.\". This means there is and will be no way to sign an application without expiration.</p>\n"},{"tags":[],"owner":{"account_id":20726359,"reputation":21,"user_id":15656611,"display_name":"Andr&#225;s Devecsery"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664267901,"creation_date":1664267901,"answer_id":73864638,"question_id":33033107,"body_markdown":"I just want to add that the exception you see when changing the computer time, has no correlation to the expiry of the certificate. OCSP is a protocol for calling a server if a certificate is revoked or not. There is a time in the OCSP response and if your computer clock is more than 900 secs from the responded time, then this exception happens. This exception will not happen if clock is not manipulated.\r\n\r\nThis snippet is from 1.8u221 JRE sun.security.provider.certpath.OCSPResponse\r\nsingleResponse has the response from OCSP server.\r\n```\r\n/*  591 */     long l = (paramDate == null) ? System.currentTimeMillis() : paramDate.getTime();\r\n/*  592 */     Date date1 = new Date(l + MAX_CLOCK_SKEW);\r\n/*  593 */     Date date2 = new Date(l - MAX_CLOCK_SKEW);\r\n/*  594 */     for (SingleResponse singleResponse : this.singleResponseMap.values()) {\r\n/*  595 */       if (debug != null) {\r\n/*  596 */         String str = &quot;&quot;;\r\n/*  597 */         if (singleResponse.nextUpdate != null) {\r\n/*  598 */           str = &quot; until &quot; + singleResponse.nextUpdate;\r\n/*      */         }\r\n/*  600 */         debug.println(&quot;OCSP response validity interval is from &quot; + singleResponse\r\n/*  601 */             .thisUpdate + str);\r\n/*  602 */         debug.println(&quot;Checking validity of OCSP response on: &quot; + new Date(l));\r\n/*      */       } \r\n/*      */ \r\n/*      */ \r\n/*      */ \r\n/*      */ \r\n/*      */       \r\n/*  609 */       if (date1.before(singleResponse.thisUpdate) || date2\r\n/*  610 */         .after(\r\n/*  611 */           (singleResponse.nextUpdate != null) ? singleResponse.nextUpdate : singleResponse.thisUpdate))\r\n/*      */       {\r\n/*  613 */         throw new CertPathValidatorException(&quot;Response is unreliable: its validity interval is out-of-date&quot;);\r\n/*      */       }\r\n/*      */     } \r\n/*      */   }\r\n```","title":"What happens to Java Web Start application (signed without timestamp) when certificate expires?","body":"<p>I just want to add that the exception you see when changing the computer time, has no correlation to the expiry of the certificate. OCSP is a protocol for calling a server if a certificate is revoked or not. There is a time in the OCSP response and if your computer clock is more than 900 secs from the responded time, then this exception happens. This exception will not happen if clock is not manipulated.</p>\n<p>This snippet is from 1.8u221 JRE sun.security.provider.certpath.OCSPResponse\nsingleResponse has the response from OCSP server.</p>\n<pre><code>/*  591 */     long l = (paramDate == null) ? System.currentTimeMillis() : paramDate.getTime();\n/*  592 */     Date date1 = new Date(l + MAX_CLOCK_SKEW);\n/*  593 */     Date date2 = new Date(l - MAX_CLOCK_SKEW);\n/*  594 */     for (SingleResponse singleResponse : this.singleResponseMap.values()) {\n/*  595 */       if (debug != null) {\n/*  596 */         String str = &quot;&quot;;\n/*  597 */         if (singleResponse.nextUpdate != null) {\n/*  598 */           str = &quot; until &quot; + singleResponse.nextUpdate;\n/*      */         }\n/*  600 */         debug.println(&quot;OCSP response validity interval is from &quot; + singleResponse\n/*  601 */             .thisUpdate + str);\n/*  602 */         debug.println(&quot;Checking validity of OCSP response on: &quot; + new Date(l));\n/*      */       } \n/*      */ \n/*      */ \n/*      */ \n/*      */ \n/*      */       \n/*  609 */       if (date1.before(singleResponse.thisUpdate) || date2\n/*  610 */         .after(\n/*  611 */           (singleResponse.nextUpdate != null) ? singleResponse.nextUpdate : singleResponse.thisUpdate))\n/*      */       {\n/*  613 */         throw new CertPathValidatorException(&quot;Response is unreliable: its validity interval is out-of-date&quot;);\n/*      */       }\n/*      */     } \n/*      */   }\n</code></pre>\n"}],"owner":{"account_id":3472827,"reputation":469,"user_id":2906764,"accept_rate":67,"display_name":"stepand76"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3579,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":33433821,"answer_count":2,"score":4,"last_activity_date":1701334748,"creation_date":1444378083,"question_id":33033107,"body_markdown":"We have a Java Web Start application signed with a certificate from CA (Thawte). The application is distributed to the hundreds of customers. They hosted it on their servers a run it over the internet or intranet on their client computers. Now it works perfect. Problem is that the application is signed without timestamp. What happens to customers when the certificate expires? Should they be able to start the app? If not, how we can help them? Does adding their server URL to the exception site list help them?\r\n\r\nWe tried to change the local time to pretend certificate expiration. Then application is blocked due to security. Adding the URL to the exception site list doesn&#39;t help:\r\n\r\n`java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date`\r\n\r\nStack trace here:\r\n```\r\njava.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    at com.sun.deploy.security.RevocationChecker.checkOCSP(Unknown Source)\r\n    at com.sun.deploy.security.RevocationChecker.check(Unknown Source)\r\n    at com.sun.deploy.security.TrustDecider.checkRevocationStatus(Unknown Source)\r\n    at com.sun.deploy.security.TrustDecider.getValidationState(Unknown Source)\r\n    at com.sun.deploy.security.TrustDecider.validateChain(Unknown Source)\r\n    at com.sun.deploy.security.TrustDecider.isAllPermissionGrantedInt(Unknown Source)\r\n    at com.sun.deploy.security.TrustDecider.isAllPermissionGranted(Unknown Source)\r\n    at com.sun.javaws.security.AppPolicy.grantUnrestrictedAccess(Unknown Source)\r\n    at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResourcesHelper(Unknown Source)\r\n    at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResources(Unknown Source)\r\n    at com.sun.javaws.Launcher.prepareResources(Unknown Source)\r\n    at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)\r\n    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\r\n    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\r\n    at com.sun.javaws.Launcher.launch(Unknown Source)\r\n    at com.sun.javaws.Main.launchApp(Unknown Source)\r\n    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)\r\n    at com.sun.javaws.Main.access$000(Unknown Source)\r\n    at com.sun.javaws.Main$1.run(Unknown Source)\r\n    at java.lang.Thread.run(Unknown Source)\r\nSuppressed: com.sun.deploy.security.RevocationChecker$StatusUnknownException\r\n    at com.sun.deploy.security.RevocationChecker.checkCRLs(Unknown Source)\r\n    ... 19 more\r\nCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    at sun.security.provider.certpath.OCSPResponse.verify(Unknown Source)\r\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\r\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\r\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\r\n    at com.sun.deploy.security.RevocationChecker$2.run(Unknown Source)\r\n    at com.sun.deploy.security.RevocationChecker$2.run(Unknown Source)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at com.sun.deploy.security.RevocationChecker.doPrivilegedOCSPCheck(Unknown Source)\r\n    ... 20 more\r\n```\r\n\r\nWhat we can do? Sure, we asked Thawte for renew our certificate and going to ask our customers for upgrade to resigned application. But we cannot cover all of them. We need to have some quick advice for them when they ask us. The expiration time is coming so any comments are welcome. \r\n","title":"What happens to Java Web Start application (signed without timestamp) when certificate expires?","body":"<p>We have a Java Web Start application signed with a certificate from CA (Thawte). The application is distributed to the hundreds of customers. They hosted it on their servers a run it over the internet or intranet on their client computers. Now it works perfect. Problem is that the application is signed without timestamp. What happens to customers when the certificate expires? Should they be able to start the app? If not, how we can help them? Does adding their server URL to the exception site list help them?</p>\n<p>We tried to change the local time to pretend certificate expiration. Then application is blocked due to security. Adding the URL to the exception site list doesn't help:</p>\n<p><code>java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date</code></p>\n<p>Stack trace here:</p>\n<pre><code>java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n    at com.sun.deploy.security.RevocationChecker.checkOCSP(Unknown Source)\n    at com.sun.deploy.security.RevocationChecker.check(Unknown Source)\n    at com.sun.deploy.security.TrustDecider.checkRevocationStatus(Unknown Source)\n    at com.sun.deploy.security.TrustDecider.getValidationState(Unknown Source)\n    at com.sun.deploy.security.TrustDecider.validateChain(Unknown Source)\n    at com.sun.deploy.security.TrustDecider.isAllPermissionGrantedInt(Unknown Source)\n    at com.sun.deploy.security.TrustDecider.isAllPermissionGranted(Unknown Source)\n    at com.sun.javaws.security.AppPolicy.grantUnrestrictedAccess(Unknown Source)\n    at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResourcesHelper(Unknown Source)\n    at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResources(Unknown Source)\n    at com.sun.javaws.Launcher.prepareResources(Unknown Source)\n    at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)\n    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\n    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\n    at com.sun.javaws.Launcher.launch(Unknown Source)\n    at com.sun.javaws.Main.launchApp(Unknown Source)\n    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)\n    at com.sun.javaws.Main.access$000(Unknown Source)\n    at com.sun.javaws.Main$1.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nSuppressed: com.sun.deploy.security.RevocationChecker$StatusUnknownException\n    at com.sun.deploy.security.RevocationChecker.checkCRLs(Unknown Source)\n    ... 19 more\nCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n    at sun.security.provider.certpath.OCSPResponse.verify(Unknown Source)\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\n    at com.sun.deploy.security.RevocationChecker$2.run(Unknown Source)\n    at com.sun.deploy.security.RevocationChecker$2.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.sun.deploy.security.RevocationChecker.doPrivilegedOCSPCheck(Unknown Source)\n    ... 20 more\n</code></pre>\n<p>What we can do? Sure, we asked Thawte for renew our certificate and going to ask our customers for upgrade to resigned application. But we cannot cover all of them. We need to have some quick advice for them when they ask us. The expiration time is coming so any comments are welcome.</p>\n"},{"tags":["java","spring","rest"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701336632,"post_id":77577097,"comment_id":136763853,"body_markdown":"DOn&#39;t. Just put it in the method. If for some reason the wrong setup is used you endup using some one elses request instead of the actual one.","body":"DOn&#39;t. Just put it in the method. If for some reason the wrong setup is used you endup using some one elses request instead of the actual one."},{"owner":{"account_id":20211307,"reputation":115,"user_id":14823855,"display_name":"Pieter"},"score":0,"creation_date":1701340356,"post_id":77577097,"comment_id":136764526,"body_markdown":"Yeah, using the wrong request in one of the reasons why I&#39;m hesitant on that approach. Previously we did override one or two mustache templates and that was a pain too, so I&#39;m hesitant to do that again.","body":"Yeah, using the wrong request in one of the reasons why I&#39;m hesitant on that approach. Previously we did override one or two mustache templates and that was a pain too, so I&#39;m hesitant to do that again."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701341223,"post_id":77577097,"comment_id":136764675,"body_markdown":"Injecting them should work fine, you should get a proxy. Until you don&#39;t get that proxy and then you get some weird results.","body":"Injecting them should work fine, you should get a proxy. Until you don&#39;t get that proxy and then you get some weird results."}],"owner":{"account_id":20211307,"reputation":115,"user_id":14823855,"display_name":"Pieter"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701334735,"creation_date":1701334735,"question_id":77577097,"body_markdown":"For my REST API I generate controller interfaces from OpenAPI specification files using the openapi-generator-maven-plugin. Now I need access to the request. Previously when I wrote my controllers by hand I got the request as an input parameter.\r\n```java\r\n@GetMapping(&quot;/example&quot;)\r\npublic exampleEndpoint(HttpServletRequest request) {\r\n  // Implementation omitted\r\n}\r\n```\r\nIt seems to be possible to add this to the generated interface by using an extension and changing the mustache templates. Overriding the mustache template decreases maintainability, updating the openapi-generator-maven-plugin version will be more work. Besides using the request in the controller is an implementation detail, I prefer to not have it in my API contract.\r\n\r\nAnother suggestion that I&#39;ve come across is autowiring the request. I prefer that solution, but I&#39;m wondering if it is technically sound. Is it a valid solution or will I encounter problems when I do that?","title":"Is it advisable to autowire HttpServletRequest?","body":"<p>For my REST API I generate controller interfaces from OpenAPI specification files using the openapi-generator-maven-plugin. Now I need access to the request. Previously when I wrote my controllers by hand I got the request as an input parameter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/example&quot;)\npublic exampleEndpoint(HttpServletRequest request) {\n  // Implementation omitted\n}\n</code></pre>\n<p>It seems to be possible to add this to the generated interface by using an extension and changing the mustache templates. Overriding the mustache template decreases maintainability, updating the openapi-generator-maven-plugin version will be more work. Besides using the request in the controller is an implementation detail, I prefer to not have it in my API contract.</p>\n<p>Another suggestion that I've come across is autowiring the request. I prefer that solution, but I'm wondering if it is technically sound. Is it a valid solution or will I encounter problems when I do that?</p>\n"},{"tags":["java","jar-signing"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":6,"creation_date":1456854502,"post_id":35729788,"comment_id":59134512,"body_markdown":"this is mostly a case of &quot;try it to find out&quot;: create a jar with a cert that has an explicit expiration set to one minute from now, compile, wait a minute, and run your application. Then see what it does.","body":"this is mostly a case of &quot;try it to find out&quot;: create a jar with a cert that has an explicit expiration set to one minute from now, compile, wait a minute, and run your application. Then see what it does."}],"answers":[{"tags":[],"owner":{"account_id":1794557,"reputation":904,"user_id":1634249,"display_name":"Afforess"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1701334582,"creation_date":1484835920,"answer_id":41744173,"question_id":35729788,"body_markdown":"Prior to Java 5 SE, signed jar&#39;s whose signing certificate had expired would no longer be valid or usable.\r\n\r\nWith Java 5 SE and greater, signed jar&#39;s whose signing certificate expires  will continue to work. The expired certificate, however, can not be used to sign any further jar&#39;s.\r\n\r\nFrom Oracle&#39;s docs: Java SE 8 Documentation &gt; [Signature Timestamp Support](http://docs.oracle.com/javase/8/docs/technotes/guides/security/time-of-signing.html):\r\n&gt;Prior to J2SE 5.0, the signature generated by `jarsigner` contained no information about when the signature was generated. With no other information available, systems/deployers (including users of the Java Plug-in) often based their validity assessment of a signed JAR file on the validity of the signing certificate. When the signing certificate expires, systems/deployers conclude that the signature, and hence, the JAR file, has expired. Because signing certificates typically expire annually, this caused customers significant problems by forcing them to re-sign deployed JAR files annually.\r\n&gt;\r\n&gt;Starting in J2SE 5.0, `jarsigner` can generate signatures that include a timestamp, thus enabling systems/deployer (including Java Plug-in) to check whether the JAR file was signed while the signing certificate was still valid. In addition, APIs were added in J2SE 5.0 to allow applications to obtain the timestamp information.","title":"What happens if the certificate of a signed jar (with timestamp) expires","body":"<p>Prior to Java 5 SE, signed jar's whose signing certificate had expired would no longer be valid or usable.</p>\n<p>With Java 5 SE and greater, signed jar's whose signing certificate expires  will continue to work. The expired certificate, however, can not be used to sign any further jar's.</p>\n<p>From Oracle's docs: Java SE 8 Documentation &gt; <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/security/time-of-signing.html\" rel=\"nofollow noreferrer\">Signature Timestamp Support</a>:</p>\n<blockquote>\n<p>Prior to J2SE 5.0, the signature generated by <code>jarsigner</code> contained no information about when the signature was generated. With no other information available, systems/deployers (including users of the Java Plug-in) often based their validity assessment of a signed JAR file on the validity of the signing certificate. When the signing certificate expires, systems/deployers conclude that the signature, and hence, the JAR file, has expired. Because signing certificates typically expire annually, this caused customers significant problems by forcing them to re-sign deployed JAR files annually.</p>\n<p>Starting in J2SE 5.0, <code>jarsigner</code> can generate signatures that include a timestamp, thus enabling systems/deployer (including Java Plug-in) to check whether the JAR file was signed while the signing certificate was still valid. In addition, APIs were added in J2SE 5.0 to allow applications to obtain the timestamp information.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1522092272,"creation_date":1522092272,"answer_id":49499133,"question_id":35729788,"body_markdown":"It will work while the timestamp certificate remains valid. No warning (except for regular security warnings when starting an applet) will be displayed to the user.\r\n\r\nOnce the timestamp certificate expires or is revoked, your signed jar will become untrusted.","title":"What happens if the certificate of a signed jar (with timestamp) expires","body":"<p>It will work while the timestamp certificate remains valid. No warning (except for regular security warnings when starting an applet) will be displayed to the user.</p>\n\n<p>Once the timestamp certificate expires or is revoked, your signed jar will become untrusted.</p>\n"}],"owner":{"account_id":252943,"reputation":1813,"user_id":531312,"accept_rate":100,"display_name":"fwend"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5223,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":41744173,"answer_count":2,"score":8,"last_activity_date":1701334582,"creation_date":1456854331,"question_id":35729788,"body_markdown":"I signed a jar (of an applet) with timestamp 2 years ago. The cert is about to expire. What will happen? Will there be a warning to the user, will it simply work? Will it stop working?\r\n\r\nI didn&#39;t add any specific code to the applet to deal with the timestamp. I only included the -tsa url when signing.\r\n\r\nEdit: it keeps working.","title":"What happens if the certificate of a signed jar (with timestamp) expires","body":"<p>I signed a jar (of an applet) with timestamp 2 years ago. The cert is about to expire. What will happen? Will there be a warning to the user, will it simply work? Will it stop working?</p>\n\n<p>I didn't add any specific code to the applet to deal with the timestamp. I only included the -tsa url when signing.</p>\n\n<p>Edit: it keeps working.</p>\n"},{"tags":["java","oracle","linker","linker-errors"],"answers":[{"comments":[{"owner":{"account_id":13167,"reputation":3060,"user_id":26276,"accept_rate":100,"display_name":"Degvik"},"score":0,"creation_date":1243540088,"post_id":919988,"comment_id":730773,"body_markdown":"Adding of &#39;ojdbc14.jar&#39; to classpath solved the issue. Thanks.","body":"Adding of &#39;ojdbc14.jar&#39; to classpath solved the issue. Thanks."},{"owner":{"account_id":1698340,"reputation":880,"user_id":1559157,"display_name":"Rega"},"score":0,"creation_date":1590485624,"post_id":919988,"comment_id":109689950,"body_markdown":"Download it from &quot;somewhere&quot; means download the Instant Client from the Oracle site. Just download the version corresponding to the required ocijdbc. It will contain the .dll files needed; which you need to copy to either system32 or java path. https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html","body":"Download it from &quot;somewhere&quot; means download the Instant Client from the Oracle site. Just download the version corresponding to the required ocijdbc. It will contain the .dll files needed; which you need to copy to either system32 or java path. <a href=\"https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html\" rel=\"nofollow noreferrer\">oracle.com/database/technologies/instant-client/&hellip;</a>"}],"tags":[],"owner":{"account_id":21671,"reputation":21944,"user_id":52888,"accept_rate":67,"display_name":"Glen"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1243503089,"creation_date":1243503089,"answer_id":919988,"question_id":919921,"body_markdown":"You&#39;re missing a file from your java CLASSPATH.\r\n\r\nYou need to add the OCI jar to your classpath.\r\n\r\nFor my oracle 10.0.2 install on windows it&#39;s located in \r\n\r\n    %ORACLE_HOME%\\jdbc\\lib\\ojdbc14.jar\r\n\r\nIf your application requires ocijdbc9 then you&#39;ll have to download it from somewhere and add it to the CLASSPATH.  I don&#39;t know where to download it from, try the oracle site","title":"no ocijdbc9 in java.library.path","body":"<p>You're missing a file from your java CLASSPATH.</p>\n\n<p>You need to add the OCI jar to your classpath.</p>\n\n<p>For my oracle 10.0.2 install on windows it's located in </p>\n\n<pre><code>%ORACLE_HOME%\\jdbc\\lib\\ojdbc14.jar\n</code></pre>\n\n<p>If your application requires ocijdbc9 then you'll have to download it from somewhere and add it to the CLASSPATH.  I don't know where to download it from, try the oracle site</p>\n"},{"tags":[],"owner":{"account_id":10397,"reputation":30272,"user_id":19629,"accept_rate":85,"display_name":"cagcowboy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538143568,"creation_date":1243506346,"answer_id":920182,"question_id":919921,"body_markdown":"You need to pass `-Djava.library.path=YOUR_ORACLE_HOME\\bin` to the JRE as a runtime parameter\r\n\r\nSo....\r\n\r\n    java [other java switches + runtime parameters] -Djava.library.path=YOUR_ORACLE_HOME\\bin run-classname\r\n","title":"no ocijdbc9 in java.library.path","body":"<p>You need to pass <code>-Djava.library.path=YOUR_ORACLE_HOME\\bin</code> to the JRE as a runtime parameter</p>\n\n<p>So....</p>\n\n<pre><code>java [other java switches + runtime parameters] -Djava.library.path=YOUR_ORACLE_HOME\\bin run-classname\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20327,"reputation":96,"user_id":48479,"display_name":"gokhant"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538143602,"creation_date":1243510411,"answer_id":920406,"question_id":919921,"body_markdown":"an additional tip:\r\nif you&#39;re using oci jdbc urls; it is always better to use the jar library of your oracle client version.\r\n\r\nplease check this address for these libraries: http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/index.html\r\n\r\n\r\nfor example if your client is Oracle 10.2.0.4, then you&#39;d better use this client&#39;s `ojdbc14.jar` for java &gt;= 1.4 and `classes12.jar` for java &lt;= 1.3\r\n\r\n\r\nnote that until Oracle 11, jdbc libraries have the same names in every version such as `ojdbc14.jar` and `classes12.jar`.","title":"no ocijdbc9 in java.library.path","body":"<p>an additional tip:\nif you're using oci jdbc urls; it is always better to use the jar library of your oracle client version.</p>\n\n<p>please check this address for these libraries: <a href=\"http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/index.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/index.html</a></p>\n\n<p>for example if your client is Oracle 10.2.0.4, then you'd better use this client's <code>ojdbc14.jar</code> for java >= 1.4 and <code>classes12.jar</code> for java &lt;= 1.3</p>\n\n<p>note that until Oracle 11, jdbc libraries have the same names in every version such as <code>ojdbc14.jar</code> and <code>classes12.jar</code>.</p>\n"},{"comments":[{"owner":{"account_id":1879482,"reputation":345,"user_id":1700004,"accept_rate":100,"display_name":"Diganta"},"score":0,"creation_date":1516085936,"post_id":11371683,"comment_id":83534608,"body_markdown":"Answer should be concrete not based on assumptions.","body":"Answer should be concrete not based on assumptions."}],"tags":[],"owner":{"account_id":1595961,"reputation":1,"user_id":1478859,"display_name":"Le Truong Uy Phu"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1701334406,"creation_date":1341626360,"answer_id":11371683,"question_id":919921,"body_markdown":"I think it is because you have not yet installed Oracle Client.\r\nAfter installing it, maybe it is ok","title":"no ocijdbc9 in java.library.path","body":"<p>I think it is because you have not yet installed Oracle Client.\nAfter installing it, maybe it is ok</p>\n"}],"owner":{"account_id":13167,"reputation":3060,"user_id":26276,"accept_rate":100,"display_name":"Degvik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39662,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":919988,"answer_count":4,"score":3,"last_activity_date":1701334406,"creation_date":1243501879,"question_id":919921,"body_markdown":"When I try to run Java application, I receive the following error:\r\n\r\n&gt;`Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no ocijdbc9 in java.library.path`\r\n\r\nI don&#39;t have a file `ocijdbc9.*` on my PC, but I have `ocijdbc10.dll` in `%ORACLE_HOME%\\bin`.\r\n\r\n`%ORACLE_HOME%` is correctly specified, so I think the problem is that the application is searching for the wrong version (9 instead of 10).\r\n\r\nBoth Oracle and Java Builder are freshly installed, so the problem may be in project preferences? Do you have any ideas on how to search for the place where the wrong version is specified?\r\n\r\n","title":"no ocijdbc9 in java.library.path","body":"<p>When I try to run Java application, I receive the following error:</p>\n\n<blockquote>\n  <p><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: no ocijdbc9 in java.library.path</code></p>\n</blockquote>\n\n<p>I don't have a file <code>ocijdbc9.*</code> on my PC, but I have <code>ocijdbc10.dll</code> in <code>%ORACLE_HOME%\\bin</code>.</p>\n\n<p><code>%ORACLE_HOME%</code> is correctly specified, so I think the problem is that the application is searching for the wrong version (9 instead of 10).</p>\n\n<p>Both Oracle and Java Builder are freshly installed, so the problem may be in project preferences? Do you have any ideas on how to search for the place where the wrong version is specified?</p>\n"},{"tags":["java","android","mobile"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1701334464,"post_id":77577027,"comment_id":136763453,"body_markdown":"If dodgy apps and bloatware could do this, your call log app would already look like [early 2000s browser toolbar nightmare](https://www.reddit.com/r/nostalgia/comments/xbehqk/2000s_internet_explorer_spyware_toolbars/).","body":"If dodgy apps and bloatware could do this, your call log app would already look like <a href=\"https://www.reddit.com/r/nostalgia/comments/xbehqk/2000s_internet_explorer_spyware_toolbars/\" rel=\"nofollow noreferrer\">early 2000s browser toolbar nightmare</a>."},{"owner":{"account_id":1842720,"reputation":760,"user_id":1671807,"accept_rate":22,"display_name":"Sudipta Roy"},"score":0,"creation_date":1701334600,"post_id":77577027,"comment_id":136763471,"body_markdown":"@teapot418 I don&#39;t understand. I dont want to build a seperate call log app.","body":"@teapot418 I don&#39;t understand. I dont want to build a seperate call log app."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1701335023,"post_id":77577027,"comment_id":136763548,"body_markdown":"My point was that this ability would be too attractive to advertisers and such. If your call app does not have a million buttons, that is a sign that no one can do this. If you want to build a mutant call log app, you don&#39;t have to start from scratch, the default one is available including source code as part of AOSP.","body":"My point was that this ability would be too attractive to advertisers and such. If your call app does not have a million buttons, that is a sign that no one can do this. If you want to build a mutant call log app, you don&#39;t have to start from scratch, the default one is available including source code as part of AOSP."},{"owner":{"account_id":1842720,"reputation":760,"user_id":1671807,"accept_rate":22,"display_name":"Sudipta Roy"},"score":0,"creation_date":1701335752,"post_id":77577027,"comment_id":136763677,"body_markdown":"@teapot418, it&#39;s just that this is a requirement that has come up. In fact in Ios, truecaller app has the capability to write small texts in call history app.","body":"@teapot418, it&#39;s just that this is a requirement that has come up. In fact in Ios, truecaller app has the capability to write small texts in call history app."}],"owner":{"account_id":1842720,"reputation":760,"user_id":1671807,"accept_rate":22,"display_name":"Sudipta Roy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701334039,"creation_date":1701334039,"question_id":77577027,"body_markdown":"My requirement is in the title. I want add a button in the default call log app in `Android`. Clicking the button would open my app with the call content copied. Is this even possible to do? [How do I make the native address book display an option to call via MY_APPLICATION][1] this link discuss how to do this in contact app. I am asking if this is possible in call history app. Surfing the internet suggets that this is not possible, unless one changes the firmware. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/35042912/how-do-i-make-the-native-address-book-display-an-option-to-call-via-my-applicati","title":"Add a custom button in call history in Android","body":"<p>My requirement is in the title. I want add a button in the default call log app in <code>Android</code>. Clicking the button would open my app with the call content copied. Is this even possible to do? <a href=\"https://stackoverflow.com/questions/35042912/how-do-i-make-the-native-address-book-display-an-option-to-call-via-my-applicati\">How do I make the native address book display an option to call via MY_APPLICATION</a> this link discuss how to do this in contact app. I am asking if this is possible in call history app. Surfing the internet suggets that this is not possible, unless one changes the firmware.</p>\n"},{"tags":["java","jvm","hashcode","heap-memory"],"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1246359964,"post_id":1063068,"comment_id":875029,"body_markdown":"Related question: Is that memory address a real memory address or something virtual that can stay fixed even as the object gets shuffled about? If virtual, that would be nice because the pointers to it would not need to be adjusted. On the other hand, this would mean an extra indirection and a potentially big mapping table.","body":"Related question: Is that memory address a real memory address or something virtual that can stay fixed even as the object gets shuffled about? If virtual, that would be nice because the pointers to it would not need to be adjusted. On the other hand, this would mean an extra indirection and a potentially big mapping table."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":3,"creation_date":1246360445,"post_id":1063068,"comment_id":875055,"body_markdown":"It&#39;s a slight rearrangement of the address when first requested. (Returning a hash code with low bits all zero isn&#39;t great.)","body":"It&#39;s a slight rearrangement of the address when first requested. (Returning a hash code with low bits all zero isn&#39;t great.)"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1246361577,"post_id":1063068,"comment_id":875135,"body_markdown":"Actually, where does it say that the identityHashCode must never change? The JavaDoc for System.identityHashCode is not clear on that.","body":"Actually, where does it say that the identityHashCode must never change? The JavaDoc for System.identityHashCode is not clear on that."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1246363571,"post_id":1063068,"comment_id":875255,"body_markdown":"Of course, if identityHashCode did change, you could only use objects that implements hashCode() as keys in hash tables.","body":"Of course, if identityHashCode did change, you could only use objects that implements hashCode() as keys in hash tables."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1246365939,"post_id":1063068,"comment_id":875420,"body_markdown":"Thilo - it follows from the specification of hashCode and equals in Object.","body":"Thilo - it follows from the specification of hashCode and equals in Object."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":3,"creation_date":1246410928,"post_id":1063068,"comment_id":879163,"body_markdown":"Okay, got it: &quot;Whenever (hashCode) is invoked on the same object more than once during an execution of a Java application, the hashCode method must consistently return the same integer, provided no information used in equals comparisons on the object is modified.&quot; And equals in this case is object identity comparison.","body":"Okay, got it: &quot;Whenever (hashCode) is invoked on the same object more than once during an execution of a Java application, the hashCode method must consistently return the same integer, provided no information used in equals comparisons on the object is modified.&quot; And equals in this case is object identity comparison."}],"answers":[{"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1246360192,"post_id":1063094,"comment_id":875041,"body_markdown":"So you are saying that the reference is not a real memory address (or directly derived from that). So is it a sort of a  pointer to the real memory address?","body":"So you are saying that the reference is not a real memory address (or directly derived from that). So is it a sort of a  pointer to the real memory address?"}],"tags":[],"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1247051034,"creation_date":1246360046,"answer_id":1063094,"question_id":1063068,"body_markdown":"As far as I know, this is implemented to return the reference, that will never change in a objects lifetime .","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>As far as I know, this is implemented to return the reference, that will never change in a objects lifetime .</p>\n"},{"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1246360313,"post_id":1063098,"comment_id":875046,"body_markdown":"True. Two different objects can have the same hashCode. That is the case with all hash functions (over a domain bigger then their result size).","body":"True. Two different objects can have the same hashCode. That is the case with all hash functions (over a domain bigger then their result size)."},{"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"score":1,"creation_date":1378587131,"post_id":1063098,"comment_id":27510674,"body_markdown":"@Thilo: The JVM could have been written in such fashion as to guarantee that, provided there are never more than four billion objects in existence at once, `identityHashCode` would never return a value which had been returned for with any other object which is still in existence. Depending upon how the memory manager is implemented, this could be expensive, or it might add zero additional cost. For example, an `Object` could contain an index into a table of pointers, with each object being immutably assigned a table slot for as long as it exists.  Typical JVM implementations don&#39;t do that...","body":"@Thilo: The JVM could have been written in such fashion as to guarantee that, provided there are never more than four billion objects in existence at once, <code>identityHashCode</code> would never return a value which had been returned for with any other object which is still in existence. Depending upon how the memory manager is implemented, this could be expensive, or it might add zero additional cost. For example, an <code>Object</code> could contain an index into a table of pointers, with each object being immutably assigned a table slot for as long as it exists.  Typical JVM implementations don&#39;t do that..."},{"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"score":0,"creation_date":1378587389,"post_id":1063098,"comment_id":27510726,"body_markdown":"...but some other &quot;handle-based&quot; memory-management schemes do, so it may be worthwhile to document that the JVM essentially picks an arbitrary number the first time an object is asked for its identity hash code, and then stores it for later use [btw, I don&#39;t recall ever reading anything to officially document whether `identityHashcode` is thread-safe.  If an object&#39;s hash code has never been retrieved, is there any guarantee that simultaneous &quot;first&quot; calls to `identityHashCode` on that object will yield the same value?","body":"...but some other &quot;handle-based&quot; memory-management schemes do, so it may be worthwhile to document that the JVM essentially picks an arbitrary number the first time an object is asked for its identity hash code, and then stores it for later use [btw, I don&#39;t recall ever reading anything to officially document whether <code>identityHashcode</code> is thread-safe.  If an object&#39;s hash code has never been retrieved, is there any guarantee that simultaneous &quot;first&quot; calls to <code>identityHashCode</code> on that object will yield the same value?"}],"tags":[],"owner":{"account_id":6887,"reputation":36377,"user_id":11721,"accept_rate":60,"display_name":"Stephen Denne"},"comment_count":3,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1246360136,"creation_date":1246360136,"answer_id":1063098,"question_id":1063068,"body_markdown":"In answer to the second question, irrespective of the implementation, it is possible for multiple objects to have the same identityHashCode.\r\n\r\nSee [bug 6321873][1] for a brief discussion on the wording in the javadoc, and a program to demonstrate non-uniqueness.\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6321873","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>In answer to the second question, irrespective of the implementation, it is possible for multiple objects to have the same identityHashCode.</p>\n<p>See <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6321873\" rel=\"nofollow noreferrer\">bug 6321873</a> for a brief discussion on the wording in the javadoc, and a program to demonstrate non-uniqueness.</p>\n"},{"comments":[{"owner":{"account_id":29198,"reputation":13653,"user_id":78677,"display_name":"butterchicken"},"score":6,"creation_date":1246365188,"post_id":1063100,"comment_id":875367,"body_markdown":"Right - I&#39;ve just looked thru ObjectSynchronizer::FastHashCode in synchronizer.cpp (vm runtime source code) and after generating the hashcode, it looks like it merges it into the object header.\n\nLooks like there are several possible implementations of HashCode; the one you allude to that returns 1 for all objects is used to ensure no part of the VM assumes hashcodes are unique for any reason.","body":"Right - I&#39;ve just looked thru ObjectSynchronizer::FastHashCode in synchronizer.cpp (vm runtime source code) and after generating the hashcode, it looks like it merges it into the object header.  Looks like there are several possible implementations of HashCode; the one you allude to that returns 1 for all objects is used to ensure no part of the VM assumes hashcodes are unique for any reason."},{"owner":{"account_id":412479,"reputation":1743,"user_id":785566,"accept_rate":88,"display_name":"Clark Bao"},"score":0,"creation_date":1331253390,"post_id":1063100,"comment_id":12218627,"body_markdown":"public static native int identityHashCode(Object x); is a native method. Are you able to explain it from native implemented code perspective? I mean C++ implementation.it is mainly used in  inIdentityHashMap right?","body":"public static native int identityHashCode(Object x); is a native method. Are you able to explain it from native implemented code perspective? I mean C++ implementation.it is mainly used in  inIdentityHashMap right?"},{"owner":{"account_id":1658137,"reputation":26719,"user_id":1527084,"accept_rate":81,"display_name":"Geek"},"score":0,"creation_date":1377967178,"post_id":1063100,"comment_id":27287854,"body_markdown":"@Tom What do you mean by object header? You also wrote &quot; I believe the value is typically calculated only on first use in order to keep object allocation to a minimum (sometimes down to as low as a dozen cycles).&quot; Can you explain which object allocation you are referring to here?","body":"@Tom What do you mean by object header? You also wrote &quot; I believe the value is typically calculated only on first use in order to keep object allocation to a minimum (sometimes down to as low as a dozen cycles).&quot; Can you explain which object allocation you are referring to here?"},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1377998046,"post_id":1063100,"comment_id":27295076,"body_markdown":"@Geek I meant the execution time spent allocating an object is kept to a minimum (I have clarified the text). Every object (including arrays) in a typical Java implementation will start with some bytes indicating the runtime type, the monitor for intrinsic locking, possibly GC-related bits and the identity hash code. Actual details may be quite complicated because it needs to be heavily optimised.","body":"@Geek I meant the execution time spent allocating an object is kept to a minimum (I have clarified the text). Every object (including arrays) in a typical Java implementation will start with some bytes indicating the runtime type, the monitor for intrinsic locking, possibly GC-related bits and the identity hash code. Actual details may be quite complicated because it needs to be heavily optimised."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1434139762,"post_id":1063100,"comment_id":49670945,"body_markdown":"@Lil Identity and monitors on objects are rarely used, yet they are still always there. This severely hampers the JVM, but there you go. Where are you proposing the header be expanded to. Stop the machine and track down every incoming reference for every object so used? / You are right, in that typically a few bits short of four bytes will be used for the hash code. Some implementations may to peculiar things, such as copy out the hash onto the stack during synchronisation to make more room for nice contended lock behaviour. No need for the downvote, IMO.","body":"@Lil Identity and monitors on objects are rarely used, yet they are still always there. This severely hampers the JVM, but there you go. Where are you proposing the header be expanded to. Stop the machine and track down every incoming reference for every object so used? / You are right, in that typically a few bits short of four bytes will be used for the hash code. Some implementations may to peculiar things, such as copy out the hash onto the stack during synchronisation to make more room for nice contended lock behaviour. No need for the downvote, IMO."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1436606093,"post_id":1063100,"comment_id":50692863,"body_markdown":"@TomHawtin-tackline: You seem to respond to a comment of mine which I have removed. I only vaguely remember this incident. I think I commented and downvoted based on a misunderstanding, then later discovered I was wrong. I came back and removed the comment, but the downvote was already locked. Sorry about that!","body":"@TomHawtin-tackline: You seem to respond to a comment of mine which I have removed. I only vaguely remember this incident. I think I commented and downvoted based on a misunderstanding, then later discovered I was wrong. I came back and removed the comment, but the downvote was already locked. Sorry about that!"}],"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":6,"down_vote_count":1,"up_vote_count":44,"is_accepted":true,"score":43,"last_activity_date":1377997795,"creation_date":1246360156,"answer_id":1063100,"question_id":1063068,"body_markdown":"Modern JVMs save the value in the object header. I believe the value is typically calculated only on first use in order to keep time spent in object allocation to a minimum (sometimes down to as low as a dozen cycles). The common Sun JVM can be compiled so that the identity hash code is always 1 for all objects.\r\n\r\nMultiple objects can have the same identity hash code. That is the nature of hash codes.","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>Modern JVMs save the value in the object header. I believe the value is typically calculated only on first use in order to keep time spent in object allocation to a minimum (sometimes down to as low as a dozen cycles). The common Sun JVM can be compiled so that the identity hash code is always 1 for all objects.</p>\n\n<p>Multiple objects can have the same identity hash code. That is the nature of hash codes.</p>\n"},{"tags":[],"owner":{"account_id":1274,"reputation":134952,"user_id":1695,"accept_rate":53,"display_name":"Gishu"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1246360444,"creation_date":1246360444,"answer_id":1063117,"question_id":1063068,"body_markdown":"The general guideline for implementing a hashing function is :\r\n\r\n- **the same object should return a consistent hashCode**, it should not change with time or depend on any variable information (e.g. an algorithm seeded by a random number or values of mutable member fields\r\n- the hash function should have a **good random distribution**, and by that I mean if you consider the hashcode as buckets, 2 objects should map to different buckets (hashcodes) as far as possible. The possibility that 2 objects would have the same hashcode should be rare - although it **can** happen. ","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>The general guideline for implementing a hashing function is :</p>\n\n<ul>\n<li><strong>the same object should return a consistent hashCode</strong>, it should not change with time or depend on any variable information (e.g. an algorithm seeded by a random number or values of mutable member fields</li>\n<li>the hash function should have a <strong>good random distribution</strong>, and by that I mean if you consider the hashcode as buckets, 2 objects should map to different buckets (hashcodes) as far as possible. The possibility that 2 objects would have the same hashcode should be rare - although it <strong>can</strong> happen. </li>\n</ul>\n"},{"tags":[],"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1532174111,"creation_date":1434140955,"answer_id":30811686,"question_id":1063068,"body_markdown":"The header of an object in HotSpot consists of a class pointer and a &quot;mark&quot; word.\r\n\r\nThe source code of the data structure for the mark word can be found the [`markOop.hpp`][1] file. In this file there is a comment describing memory layout of the mark word:\r\n\r\n&gt; `hash:25 ------------&gt;| age:4    biased_lock:1 lock:2 (normal object)`\r\n\r\nHere we can see that the the identity hash code for normal Java objects on a 32 bit system is saved in the mark word and it is 25 bits long.\r\n\r\n[1]: http://hg.openjdk.java.net/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/oops/markOop.hpp#l30\r\n","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>The header of an object in HotSpot consists of a class pointer and a \"mark\" word.</p>\n\n<p>The source code of the data structure for the mark word can be found the <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/oops/markOop.hpp#l30\" rel=\"nofollow noreferrer\"><code>markOop.hpp</code></a> file. In this file there is a comment describing memory layout of the mark word:</p>\n\n<blockquote>\n  <p><code>hash:25 ------------&gt;| age:4    biased_lock:1 lock:2 (normal object)</code></p>\n</blockquote>\n\n<p>Here we can see that the the identity hash code for normal Java objects on a 32 bit system is saved in the mark word and it is 25 bits long.</p>\n"}],"owner":{"account_id":29198,"reputation":13653,"user_id":78677,"display_name":"butterchicken"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15292,"favorite_count":0,"down_vote_count":0,"up_vote_count":74,"accepted_answer_id":1063100,"answer_count":5,"score":74,"last_activity_date":1701333456,"creation_date":1246359462,"question_id":1063068,"body_markdown":"Typically the default implementation of `Object.hashCode()` is some function of the allocated address of the object in memory (though this is not mandated by the Java Language Specification). Given that the VM shunts objects about in memory, why does the value returned by `System.identityHashCode()` never change during the object&#39;s lifetime?\r\n\r\nIf it is a &quot;one-shot&quot; calculation (the object&#39;s `hashCode` is calculated once and stashed in the object header or something), then does that mean it is possible for two objects to have the same `identityHashCode` (if they happen to be first allocated at the same address in memory)?","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>Typically the default implementation of <code>Object.hashCode()</code> is some function of the allocated address of the object in memory (though this is not mandated by the Java Language Specification). Given that the VM shunts objects about in memory, why does the value returned by <code>System.identityHashCode()</code> never change during the object's lifetime?</p>\n<p>If it is a &quot;one-shot&quot; calculation (the object's <code>hashCode</code> is calculated once and stashed in the object header or something), then does that mean it is possible for two objects to have the same <code>identityHashCode</code> (if they happen to be first allocated at the same address in memory)?</p>\n"},{"tags":["java","object","hashcode"],"comments":[{"owner":{"account_id":204470,"reputation":8571,"user_id":452708,"accept_rate":0,"display_name":"Abhijeet"},"score":0,"creation_date":1468216895,"post_id":4930781,"comment_id":64016682,"body_markdown":"[How does the JVM ensure that System.identityHashCode() will never change?](http://stackoverflow.com/questions/1063068/how-does-the-jvm-ensure-that-system-identityhashcode-will-never-change) will help in clearing some ambiguousness.","body":"<a href=\"http://stackoverflow.com/questions/1063068/how-does-the-jvm-ensure-that-system-identityhashcode-will-never-change\">How does the JVM ensure that System.identityHashCode() will never change?</a> will help in clearing some ambiguousness."}],"answers":[{"comments":[{"owner":{"account_id":25166,"reputation":29119,"user_id":64495,"accept_rate":67,"display_name":"Bj&#246;rn"},"score":0,"creation_date":1297156324,"post_id":4931181,"comment_id":5496120,"body_markdown":"You&#39;re right, I must have mixed something up. I got stuck in the documentation to back my hypotesis -- but failed. ;-) deleted my answer and upvoted yours!","body":"You&#39;re right, I must have mixed something up. I got stuck in the documentation to back my hypotesis -- but failed. ;-) deleted my answer and upvoted yours!"},{"owner":{"account_id":703864,"reputation":881,"user_id":604328,"display_name":"Himanshu"},"score":0,"creation_date":1297160525,"post_id":4931181,"comment_id":5496864,"body_markdown":"what is the difference between hashCode() and identityHashCode()?","body":"what is the difference between hashCode() and identityHashCode()?"},{"owner":{"account_id":235018,"reputation":364854,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":9,"creation_date":1297161062,"post_id":4931181,"comment_id":5496959,"body_markdown":"@Himanshu- `Object.hashCode()` is the default implementation of `hashCode()` and is often overridden by derived classes to conform to the rules for `equals()`/`hashCode()`.  `System.identityHashCode()` provides a way to get the value that `Object.hashCode()` would return for that object even if it contains an override for this method.  This allows you to make containers that work with identity semantics, since `==` and `System.identityHashCode()` treat each object uniquely.","body":"@Himanshu- <code>Object.hashCode()</code> is the default implementation of <code>hashCode()</code> and is often overridden by derived classes to conform to the rules for <code>equals()</code>/<code>hashCode()</code>.  <code>System.identityHashCode()</code> provides a way to get the value that <code>Object.hashCode()</code> would return for that object even if it contains an override for this method.  This allows you to make containers that work with identity semantics, since <code>==</code> and <code>System.identityHashCode()</code> treat each object uniquely."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1459013285,"post_id":4931181,"comment_id":60107171,"body_markdown":"The idea that hashCode uses the memory address is a historical artefact http://stackoverflow.com/questions/36236615/does-object-tostring-or-object-hashcode-ever-give-the-memory-address-of-the-obje","body":"The idea that hashCode uses the memory address is a historical artefact <a href=\"http://stackoverflow.com/questions/36236615/does-object-tostring-or-object-hashcode-ever-give-the-memory-address-of-the-obje\" title=\"does object tostring or object hashcode ever give the memory address of the obje\">stackoverflow.com/questions/36236615/&hellip;</a>"}],"tags":[],"owner":{"account_id":235018,"reputation":364854,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"comment_count":4,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1297155644,"creation_date":1297155644,"answer_id":4931181,"question_id":4930781,"body_markdown":"This is pretty much implementation specific.  The only guarantee you get is\r\n\r\n&gt; As much as is reasonably practical, the `hashCode` method defined by class `Object` does return distinct integers for distinct objects. (This is typically implemented by converting the internal address of the object into an integer, but this implementation technique is not required by the Java&lt;sup&gt;TM&lt;/sup&gt; programming language.)\r\n\r\n(From the Java 1.6 JavaDoc)\r\n\r\nIn theory, this means that the values could be determined arbitrarily and could even be zero for every object.  In practice, it&#39;s probably something derived from the address of the object.  Of course, you have to be careful about this.  The JVM can relocate objects if it thinks it&#39;s a good idea during a garbage collection, so it&#39;s not going to be &quot;just&quot; the memory address.  It could be drawn from a global counter, or a hash of the original object&#39;s location, or from a random number generator, etc.","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<p>This is pretty much implementation specific.  The only guarantee you get is</p>\n\n<blockquote>\n  <p>As much as is reasonably practical, the <code>hashCode</code> method defined by class <code>Object</code> does return distinct integers for distinct objects. (This is typically implemented by converting the internal address of the object into an integer, but this implementation technique is not required by the Java<sup>TM</sup> programming language.)</p>\n</blockquote>\n\n<p>(From the Java 1.6 JavaDoc)</p>\n\n<p>In theory, this means that the values could be determined arbitrarily and could even be zero for every object.  In practice, it's probably something derived from the address of the object.  Of course, you have to be careful about this.  The JVM can relocate objects if it thinks it's a good idea during a garbage collection, so it's not going to be \"just\" the memory address.  It could be drawn from a global counter, or a hash of the original object's location, or from a random number generator, etc.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":1,"up_vote_count":46,"is_accepted":false,"score":45,"last_activity_date":1701333292,"creation_date":1297169689,"answer_id":4933258,"question_id":4930781,"body_markdown":"&gt; How do Object.hashCode() and System.identityHashCode() work at the back end? \r\n\r\nAssuming that it hasn&#39;t been overridden, the `Object.hashCode()` method simply calls `System.identityHashCode(this)`.\r\n\r\nThe exact behavior of `System.identityHashCode(Object)` depends on the JVM implementation. (The actual implementation on recent Hotspot JVMs is rather clever, but I digress.)\r\n\r\n&gt; Does `identityHashCode()` return the reference of the object? \r\n\r\nNo. It returns an `int`, and an `int` cannot hold a reference.\r\n\r\nThat integer returned by `identityHashCode` may be related to the (a) machine address for the object, or it may not be&lt;sup&gt;1&lt;/sup&gt;.  The value returned by `identityHashCode()` *is guaranteed not to change* for the lifetime of the object. This means that if the GC relocates an object (after an `identityHashCode()` call) then it cannot use the new object address as the identity hashcode.\r\n\r\n&gt; Does hashCode() depend on the `?` of the object `? ==` operator how to work in back end.\r\n\r\nThis doesn&#39;t make sense. There is no `? ==` or `?==` operator in Java.\r\n\r\n&gt; What is the difference between hashCode() and identityHashCode()?\r\n\r\nThis is partly explained above. Other differences include:\r\n\r\n - The `hashCode()` method is a non-`final` instance method, and should be overridden in any class where the `equals(Object)` is overridden. By contrast, `identityHashCode(Object)` is a `static` method and therefore cannot be overridden.\r\n\r\n - The `identityHashCode(Object)` method gives you a identifier for an object which can (in theory) be used for other things than hashing and hash tables. (Unfortunately, it is not a *unique* identifier, but it *is* guaranteed to never change for the lifetime of the object.)\r\n\r\n------------------------\r\n\r\n&lt;sup&gt;1 - For current generation JVMs, it is not related to the memory address at all. See @bestsss&#39;s answer.&lt;/sup&gt;\r\n","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<blockquote>\n<p>How do Object.hashCode() and System.identityHashCode() work at the back end?</p>\n</blockquote>\n<p>Assuming that it hasn't been overridden, the <code>Object.hashCode()</code> method simply calls <code>System.identityHashCode(this)</code>.</p>\n<p>The exact behavior of <code>System.identityHashCode(Object)</code> depends on the JVM implementation. (The actual implementation on recent Hotspot JVMs is rather clever, but I digress.)</p>\n<blockquote>\n<p>Does <code>identityHashCode()</code> return the reference of the object?</p>\n</blockquote>\n<p>No. It returns an <code>int</code>, and an <code>int</code> cannot hold a reference.</p>\n<p>That integer returned by <code>identityHashCode</code> may be related to the (a) machine address for the object, or it may not be<sup>1</sup>.  The value returned by <code>identityHashCode()</code> <em>is guaranteed not to change</em> for the lifetime of the object. This means that if the GC relocates an object (after an <code>identityHashCode()</code> call) then it cannot use the new object address as the identity hashcode.</p>\n<blockquote>\n<p>Does hashCode() depend on the <code>?</code> of the object <code>? ==</code> operator how to work in back end.</p>\n</blockquote>\n<p>This doesn't make sense. There is no <code>? ==</code> or <code>?==</code> operator in Java.</p>\n<blockquote>\n<p>What is the difference between hashCode() and identityHashCode()?</p>\n</blockquote>\n<p>This is partly explained above. Other differences include:</p>\n<ul>\n<li><p>The <code>hashCode()</code> method is a non-<code>final</code> instance method, and should be overridden in any class where the <code>equals(Object)</code> is overridden. By contrast, <code>identityHashCode(Object)</code> is a <code>static</code> method and therefore cannot be overridden.</p>\n</li>\n<li><p>The <code>identityHashCode(Object)</code> method gives you a identifier for an object which can (in theory) be used for other things than hashing and hash tables. (Unfortunately, it is not a <em>unique</em> identifier, but it <em>is</em> guaranteed to never change for the lifetime of the object.)</p>\n</li>\n</ul>\n<hr />\n<p><sup>1 - For current generation JVMs, it is not related to the memory address at all. See @bestsss's answer.</sup></p>\n"},{"comments":[{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":2,"creation_date":1503931746,"post_id":4933404,"comment_id":78802230,"body_markdown":"There are 5 alternatives of hash code calculation in the code. Looking at [this](http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/tip/src/share/vm/runtime/globals.hpp#l1148) one can see that option 5, Marsaglia shift-xor, is really currently used. Hashcode generation has been elaborated more in [this blog post](https://srvaroa.github.io/jvm/java/openjdk/biased-locking/2017/01/30/hashCode.html)","body":"There are 5 alternatives of hash code calculation in the code. Looking at <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/tip/src/share/vm/runtime/globals.hpp#l1148\" rel=\"nofollow noreferrer\">this</a> one can see that option 5, Marsaglia shift-xor, is really currently used. Hashcode generation has been elaborated more in <a href=\"https://srvaroa.github.io/jvm/java/openjdk/biased-locking/2017/01/30/hashCode.html\" rel=\"nofollow noreferrer\">this blog post</a>"}],"tags":[],"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"comment_count":1,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1701333038,"creation_date":1297170538,"answer_id":4933404,"question_id":4930781,"body_markdown":"`identityHashCode()` works like that (*and as of now it has nothing do to with the address, especially since the addresses are 64bits long, ok aligned, so 61*):\r\n\r\nChecks if there is already generated one, if so returns it. You can assume there is a place in the object header for that `int`;\r\n\r\n**Otherwise:** Generates a random number ([Marsaglia shift-xor][1] algorithm). Every native thread has its own seed, so no shared info.\r\nCAS the `identityHashCode` field in the object header to update w/ the newly generated number. If CAS succeeds, returns the value. If not, the field already contains a generated `identityHashCode`.\r\n\r\nYou can see the rest of the replies about overriding hashcode.\r\n\r\n**Bottom line:**\r\nIf the JavaDoc still states anything about addresses and `identityHashCode`, someone needs to update it.\r\n\r\n\r\n  [1]: http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/tip/src/share/vm/runtime/synchronizer.cpp#l560","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<p><code>identityHashCode()</code> works like that (<em>and as of now it has nothing do to with the address, especially since the addresses are 64bits long, ok aligned, so 61</em>):</p>\n<p>Checks if there is already generated one, if so returns it. You can assume there is a place in the object header for that <code>int</code>;</p>\n<p><strong>Otherwise:</strong> Generates a random number (<a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/tip/src/share/vm/runtime/synchronizer.cpp#l560\" rel=\"nofollow noreferrer\">Marsaglia shift-xor</a> algorithm). Every native thread has its own seed, so no shared info.\nCAS the <code>identityHashCode</code> field in the object header to update w/ the newly generated number. If CAS succeeds, returns the value. If not, the field already contains a generated <code>identityHashCode</code>.</p>\n<p>You can see the rest of the replies about overriding hashcode.</p>\n<p><strong>Bottom line:</strong>\nIf the JavaDoc still states anything about addresses and <code>identityHashCode</code>, someone needs to update it.</p>\n"},{"tags":[],"owner":{"account_id":2459420,"reputation":15594,"user_id":2704032,"accept_rate":48,"display_name":"Vishrant"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1490853440,"creation_date":1490853440,"answer_id":43109639,"question_id":4930781,"body_markdown":"\r\n\r\n&gt;&lt;h3&gt;identityHashCode&lt;/h3&gt;\r\npublic static int identityHashCode(Object x)\r\n\r\n&gt;*Returns the same hash code for the given object as would be returned by the default method hashCode()*, whether or not the given object&#39;s class overrides hashCode(). The hash code for the null reference is zero.\r\n\r\nSee [[Java docs][1]]\r\n\r\nSo if someone has overridden `hashCode()` method in its class but still want the default `hashCode()` value which would have been returned by *Object* `hashCode()` then use `System.identityHashCode()`\r\n\r\nSo, `hashCode()` internally calls `System.identityHashCode()` _**as long as you are not overriding it in you class, if you override hashCode() it will call your implementation.**_\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<blockquote>\n  <h3>identityHashCode</h3>\n  \n  <p>public static int identityHashCode(Object x)</p>\n  \n  <p><em>Returns the same hash code for the given object as would be returned by the default method hashCode()</em>, whether or not the given object's class overrides hashCode(). The hash code for the null reference is zero.</p>\n</blockquote>\n\n<p>See [<a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)\" rel=\"noreferrer\">Java docs</a>]</p>\n\n<p>So if someone has overridden <code>hashCode()</code> method in its class but still want the default <code>hashCode()</code> value which would have been returned by <em>Object</em> <code>hashCode()</code> then use <code>System.identityHashCode()</code></p>\n\n<p>So, <code>hashCode()</code> internally calls <code>System.identityHashCode()</code> <em><strong>as long as you are not overriding it in you class, if you override hashCode() it will call your implementation.</strong></em></p>\n"},{"tags":[],"owner":{"account_id":7447054,"reputation":773,"user_id":5662881,"accept_rate":46,"display_name":"Hitesh Ghuge"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1537022120,"creation_date":1537022120,"answer_id":52345675,"question_id":4930781,"body_markdown":"Lots of answers given above, just need to add some points.\r\n\r\nWhen we say ` obj.hashCode() ` the content of the obj is considered, on the other hand \r\nin ` System.identityHashCode(obj) ` the content are not taken in consideration, thus `identityHashCode` for two different `String`, `int`(with same value) will be the different but `Hashcode` will be the same.\r\n\r\nIn case of `String` to get `identityHashCode` string pool plays important role, example\r\n\r\n\t\tObject s1 = &quot;abcd&quot;;\r\n\t\tObject s2 = new String(&quot;abcd&quot;);\r\n\t\tObject s3 = &quot;abcd&quot;;\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s1) + &quot; HashCode : &quot; + s1.hashCode());\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s2) + &quot; HashCode : &quot; + s2.hashCode());\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s3) + &quot; HashCode : &quot; + s3.hashCode());\r\n\r\n        //output:\r\n\t\tidentityHashCode : 2018699554 HashCode : 2987074\r\n\t\tidentityHashCode : 1311053135 HashCode : 2987074\r\n\t\tidentityHashCode : 2018699554 HashCode : 2987074\r\n\r\nhere `s1` and `s3` pointing same ref therefore `identityHashCode` for `s1 and s3` is always same and `s2` will be different.\r\n\r\nSame for `int` also, `IntegerCache` plays the important role to get the `identityHashCode`\r\n\r\n    \tObject s1 = 5;\r\n\t\tObject s2 = new Integer(5);\r\n\t\tObject s3 = 5;\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s1) + &quot; HashCode : &quot; + s1.hashCode());\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s2) + &quot; HashCode : &quot; + s2.hashCode());\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s3) + &quot; HashCode : &quot; + s3.hashCode());\r\n\r\n        //Output\r\n\t\tidentityHashCode : 2018699554 HashCode : 5\r\n\t\tidentityHashCode : 1311053135 HashCode : 5\r\n\t\tidentityHashCode : 2018699554 HashCode : 5\r\n","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<p>Lots of answers given above, just need to add some points.</p>\n\n<p>When we say <code>obj.hashCode()</code> the content of the obj is considered, on the other hand \nin <code>System.identityHashCode(obj)</code> the content are not taken in consideration, thus <code>identityHashCode</code> for two different <code>String</code>, <code>int</code>(with same value) will be the different but <code>Hashcode</code> will be the same.</p>\n\n<p>In case of <code>String</code> to get <code>identityHashCode</code> string pool plays important role, example</p>\n\n<pre><code>    Object s1 = \"abcd\";\n    Object s2 = new String(\"abcd\");\n    Object s3 = \"abcd\";\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s1) + \" HashCode : \" + s1.hashCode());\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s2) + \" HashCode : \" + s2.hashCode());\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s3) + \" HashCode : \" + s3.hashCode());\n\n    //output:\n    identityHashCode : 2018699554 HashCode : 2987074\n    identityHashCode : 1311053135 HashCode : 2987074\n    identityHashCode : 2018699554 HashCode : 2987074\n</code></pre>\n\n<p>here <code>s1</code> and <code>s3</code> pointing same ref therefore <code>identityHashCode</code> for <code>s1 and s3</code> is always same and <code>s2</code> will be different.</p>\n\n<p>Same for <code>int</code> also, <code>IntegerCache</code> plays the important role to get the <code>identityHashCode</code></p>\n\n<pre><code>    Object s1 = 5;\n    Object s2 = new Integer(5);\n    Object s3 = 5;\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s1) + \" HashCode : \" + s1.hashCode());\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s2) + \" HashCode : \" + s2.hashCode());\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s3) + \" HashCode : \" + s3.hashCode());\n\n    //Output\n    identityHashCode : 2018699554 HashCode : 5\n    identityHashCode : 1311053135 HashCode : 5\n    identityHashCode : 2018699554 HashCode : 5\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1519993,"reputation":2685,"user_id":1419924,"display_name":"Allard"},"score":0,"creation_date":1662734625,"post_id":73611102,"comment_id":130081822,"body_markdown":"The code provided is very explanatory, but the introductory explanation is not entirely correct. `identityHashCode` does not return a memory address. It returns the result of hashCode() as if it wasn&#39;t overridden from Object&#39;s default implementation.","body":"The code provided is very explanatory, but the introductory explanation is not entirely correct. <code>identityHashCode</code> does not return a memory address. It returns the result of hashCode() as if it wasn&#39;t overridden from Object&#39;s default implementation."}],"tags":[],"owner":{"account_id":12427871,"reputation":1,"user_id":9051748,"display_name":"Mohit"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662392142,"creation_date":1662388979,"answer_id":73611102,"question_id":4930781,"body_markdown":"**A very well understanding you will get from below code:**\r\n\r\nidentityHashCode() will give you the memory address (a number) of String literal in String pool whereas hashcode() method of Object class will give you the same hash value for all the objects which are same (having same string literal)\r\n\r\n\r\n\r\n\r\n        String a = new String(&quot;abc&quot;); // &quot;abc&quot; will not be added to String constant pool.\r\n\r\n        System.out.println(System.identityHashCode(a)); // 460141958\r\n\r\n        String b = a.intern();// add s to String constant pool\r\n        System.out.println(System.identityHashCode(b)); // 1163157884\r\n\r\n        String c = &quot;abc&quot;; // OR String c = b;\r\n        System.out.println(System.identityHashCode(c)); // 1163157884\r\n\r\n        String d = new String(&quot;abc&quot;); // OR String d = new String(c)\r\n        System.out.println(System.identityHashCode(d)); // 1956725890\r\n\r\n        String e = new String(new char[]{&#39;a&#39;, &#39;b&#39;, &#39;c&#39;});\r\n        System.out.println(System.identityHashCode(e)); // 356573597\r\n        System.out.println(e.intern() == b); //true\r\n\r\n        System.out.println();\r\n        String str2 = &quot;hello&quot;;\r\n        String str1 = new String(&quot;hello&quot;);\r\n        String str3 = str1.intern();\r\n        System.out.println(System.identityHashCode(str2)); // 1735600054\r\n        System.out.println(System.identityHashCode(str1)); // 21685669\r\n        System.out.println(System.identityHashCode(str3)); // 1735600054\r\n        System.out.println(str2 == str3); // true\r\n        System.out.println(str3 == str1); // false\r\n\r\n        String str4 = new String(new char[]{&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;}); //// &quot;hello&quot; will not be added to String constant pool.\r\n        System.out.println(str4.intern() == str2); //true\r\n\r\n\r\n","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<p><strong>A very well understanding you will get from below code:</strong></p>\n<p>identityHashCode() will give you the memory address (a number) of String literal in String pool whereas hashcode() method of Object class will give you the same hash value for all the objects which are same (having same string literal)</p>\n<pre><code>    String a = new String(&quot;abc&quot;); // &quot;abc&quot; will not be added to String constant pool.\n\n    System.out.println(System.identityHashCode(a)); // 460141958\n\n    String b = a.intern();// add s to String constant pool\n    System.out.println(System.identityHashCode(b)); // 1163157884\n\n    String c = &quot;abc&quot;; // OR String c = b;\n    System.out.println(System.identityHashCode(c)); // 1163157884\n\n    String d = new String(&quot;abc&quot;); // OR String d = new String(c)\n    System.out.println(System.identityHashCode(d)); // 1956725890\n\n    String e = new String(new char[]{'a', 'b', 'c'});\n    System.out.println(System.identityHashCode(e)); // 356573597\n    System.out.println(e.intern() == b); //true\n\n    System.out.println();\n    String str2 = &quot;hello&quot;;\n    String str1 = new String(&quot;hello&quot;);\n    String str3 = str1.intern();\n    System.out.println(System.identityHashCode(str2)); // 1735600054\n    System.out.println(System.identityHashCode(str1)); // 21685669\n    System.out.println(System.identityHashCode(str3)); // 1735600054\n    System.out.println(str2 == str3); // true\n    System.out.println(str3 == str1); // false\n\n    String str4 = new String(new char[]{'h', 'e', 'l', 'l', 'o'}); //// &quot;hello&quot; will not be added to String constant pool.\n    System.out.println(str4.intern() == str2); //true\n</code></pre>\n"}],"owner":{"account_id":703864,"reputation":881,"user_id":604328,"display_name":"Himanshu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28422,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"answer_count":6,"score":56,"last_activity_date":1701333292,"creation_date":1297152057,"question_id":4930781,"body_markdown":"How do [`Object.hashCode()`][1] and [`System.identityHashCode()`][2] work at the back end? Does `identityHashCode()` return the reference of the object? Does `hashCode()` depend on the content or address of the object? \r\n\r\nWhat is the difference between `hashCode()` and `identityHashCode()`? \r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode()\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<p>How do <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode()\" rel=\"noreferrer\"><code>Object.hashCode()</code></a> and <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)\" rel=\"noreferrer\"><code>System.identityHashCode()</code></a> work at the back end? Does <code>identityHashCode()</code> return the reference of the object? Does <code>hashCode()</code> depend on the content or address of the object?</p>\n<p>What is the difference between <code>hashCode()</code> and <code>identityHashCode()</code>?</p>\n"},{"tags":["java","jaxb","xml-binding","jaxb2-basics"],"comments":[{"owner":{"account_id":7247195,"reputation":742,"user_id":5528725,"accept_rate":60,"display_name":"Thomas W."},"score":0,"creation_date":1670608682,"post_id":74746590,"comment_id":131920698,"body_markdown":"Did you tried to add a name to the root element? ...like @XmlRootElement(name = &quot;com.jaraws.api.Vehicle&quot;)","body":"Did you tried to add a name to the root element? ...like @XmlRootElement(name = &quot;com.jaraws.api.Vehicle&quot;)"},{"owner":{"account_id":12848901,"reputation":621,"user_id":9294422,"accept_rate":0,"display_name":"Jaraws"},"score":0,"creation_date":1670608905,"post_id":74746590,"comment_id":131920767,"body_markdown":"@xerx593 and Thomas, if that&#39;s the only way of doing that? Can&#39;t I avoid writing the package explicitly rather it is getting derived?","body":"@xerx593 and Thomas, if that&#39;s the only way of doing that? Can&#39;t I avoid writing the package explicitly rather it is getting derived?"}],"answers":[{"tags":[],"owner":{"account_id":29874264,"reputation":478,"user_id":22894892,"display_name":"Laurent Schoelens"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701332438,"creation_date":1701332438,"answer_id":77576874,"question_id":74746590,"body_markdown":"As suggested by Thomas in the comments, just add the `name` attribute to the `@XmlRootElement` annotation to the name you expect :\r\n\r\n```java\r\n@XmlRootElement(name = &quot;com.jaraws.api.Vehicle&quot;)\r\npublic class Vehicle {\r\n  // class definition ...\r\n}\r\n```\r\n\r\nYou can&#39;t do something like the following :\r\n\r\n```java\r\n@XmlRootElement(name = Vehicle.class.getName())\r\n```\r\n\r\nIf you try to, you&#39;ll get the following error : `The value for annotation attribute XmlRootElement.name must be a constant expression`\r\n\r\nBy default, according to javadoc, if name is not set, it&#39;s derived from the class name :\r\n\r\n```java\r\npublic @interface XmlRootElement {\r\n    // some stuff\r\n\r\n    /**\r\n     * local name of the XML element.\r\n     * &lt;p&gt;\r\n     * If the value is &quot;##default&quot;, then the name is derived from the\r\n     * class name. \r\n     *\r\n     */\r\n    String name() default &quot;##default&quot;;\r\n}\r\n```\r\n\r\nNot specifying the name element will then lead to the following name `vehicle` (see `org.glassfish.jaxb.runtime.v2.model.impl.TypeInfoImpl#parseElementName` method for more info)","title":"How to do JaxB XML Unmarshalling/Marshalling of element with package name?","body":"<p>As suggested by Thomas in the comments, just add the <code>name</code> attribute to the <code>@XmlRootElement</code> annotation to the name you expect :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = &quot;com.jaraws.api.Vehicle&quot;)\npublic class Vehicle {\n  // class definition ...\n}\n</code></pre>\n<p>You can't do something like the following :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = Vehicle.class.getName())\n</code></pre>\n<p>If you try to, you'll get the following error : <code>The value for annotation attribute XmlRootElement.name must be a constant expression</code></p>\n<p>By default, according to javadoc, if name is not set, it's derived from the class name :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public @interface XmlRootElement {\n    // some stuff\n\n    /**\n     * local name of the XML element.\n     * &lt;p&gt;\n     * If the value is &quot;##default&quot;, then the name is derived from the\n     * class name. \n     *\n     */\n    String name() default &quot;##default&quot;;\n}\n</code></pre>\n<p>Not specifying the name element will then lead to the following name <code>vehicle</code> (see <code>org.glassfish.jaxb.runtime.v2.model.impl.TypeInfoImpl#parseElementName</code> method for more info)</p>\n"}],"owner":{"account_id":12848901,"reputation":621,"user_id":9294422,"accept_rate":0,"display_name":"Jaraws"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701332438,"creation_date":1670607956,"question_id":74746590,"body_markdown":"I got following XML with element name being present with their package name. How can I marshal/unmarshal the given XML using JaxB?\r\n\r\n    &lt;com.jaraws.api.Vehicle&gt;\r\n      &lt;number&gt;KT12356&lt;/number&gt;\r\n      &lt;engine&gt;DIESEL&lt;engine&gt;\r\n    &lt;/com.jaraws.api.Vehicle&gt;\r\n\r\nWith Java class being written as:\r\n\r\n    package com.jaraws.api;\r\n    \r\n    @XmlRootElement\r\n    public class Vehicle{\r\n      private String number;\r\n      private String engine;\r\n    \r\n      // Getters Setter for number and engine attributes\r\n      @XmlElement\r\n      public String getNumber(){\r\n        return number;\r\n      }\r\n    \r\n      public void setNumber(){\r\n        this.number=number;\r\n      }\r\n    \r\n      @XmlElement\r\n      public String getEngine(){\r\n        return engine;\r\n      }\r\n    \r\n      public void setEngine(){\r\n        this.engine=engine;\r\n      }\r\n    }\r\n\r\nIs it achievable or I am not doing something in a right matter. I want to marshal / unmarshal the xml in given format only.","title":"How to do JaxB XML Unmarshalling/Marshalling of element with package name?","body":"<p>I got following XML with element name being present with their package name. How can I marshal/unmarshal the given XML using JaxB?</p>\n<pre><code>&lt;com.jaraws.api.Vehicle&gt;\n  &lt;number&gt;KT12356&lt;/number&gt;\n  &lt;engine&gt;DIESEL&lt;engine&gt;\n&lt;/com.jaraws.api.Vehicle&gt;\n</code></pre>\n<p>With Java class being written as:</p>\n<pre><code>package com.jaraws.api;\n\n@XmlRootElement\npublic class Vehicle{\n  private String number;\n  private String engine;\n\n  // Getters Setter for number and engine attributes\n  @XmlElement\n  public String getNumber(){\n    return number;\n  }\n\n  public void setNumber(){\n    this.number=number;\n  }\n\n  @XmlElement\n  public String getEngine(){\n    return engine;\n  }\n\n  public void setEngine(){\n    this.engine=engine;\n  }\n}\n</code></pre>\n<p>Is it achievable or I am not doing something in a right matter. I want to marshal / unmarshal the xml in given format only.</p>\n"},{"tags":["java","postgresql","apache-kafka","concurrency","high-load"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1701479403,"post_id":77576872,"comment_id":136784814,"body_markdown":"You&#39;re not using Debezium to get data from the database to Kafka? In general, the answer is CDC, Event Sourcing, and CQRS designs.","body":"You&#39;re not using Debezium to get data from the database to Kafka? In general, the answer is CDC, Event Sourcing, and CQRS designs."}],"owner":{"account_id":12281870,"reputation":11,"user_id":8963131,"display_name":" "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701332422,"creation_date":1701332422,"question_id":77576872,"body_markdown":"I need to make a simple Spring Boot stream Java application that selects messages from a table in the database and sends them to a Kafka topic. And on success - deleting messages from PostgreSQL:\r\n[![enter image description here][1]][1]\r\nThe main problem is the **high load**: the number of incoming messages can be more than 50 million. It must be sent in real-time. Im thinking about multithreading and, understand that selecting/deleting rows from the database in concurrency threads will compete, and create locks.\r\n\r\n**My idea is to have**: INPUT: 1 thread reading/deleting rows in the database and OUTPUT: many concurrent threads for sending messages from it to a queue.\r\n\r\nI haven&#39;t done any measurements, but I expect that sending N-messages to the queue takes longer than reading and deleting N-rows from the database table. Is this true?\r\n\r\nIn other words: what is faster under high load: the execution time of an SQL query or the time of sending a message to the broker?\r\n\r\nIf the timings for get data from SQL and sending it to Kafka are similar, It makes sense to read data in several threads: \r\nPostgreSQL from 9.5 incorporates SELECT ... FOR UPDATE ... SKIP LOCKED. This makes implementing working queuing systems a lot simpler and easier. Now simple to fetch &#39;n&#39; rows that no other session has locked, and keep them locked until we commit confirmation that the work is done.\r\n\r\n  [1]: https://i.stack.imgur.com/4WM2u.png","title":"High load: real-time get SQL message and send it to the Kafka broker. What architectural pattern is suitable here?","body":"<p>I need to make a simple Spring Boot stream Java application that selects messages from a table in the database and sends them to a Kafka topic. And on success - deleting messages from PostgreSQL:\n<a href=\"https://i.stack.imgur.com/4WM2u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4WM2u.png\" alt=\"enter image description here\" /></a>\nThe main problem is the <strong>high load</strong>: the number of incoming messages can be more than 50 million. It must be sent in real-time. Im thinking about multithreading and, understand that selecting/deleting rows from the database in concurrency threads will compete, and create locks.</p>\n<p><strong>My idea is to have</strong>: INPUT: 1 thread reading/deleting rows in the database and OUTPUT: many concurrent threads for sending messages from it to a queue.</p>\n<p>I haven't done any measurements, but I expect that sending N-messages to the queue takes longer than reading and deleting N-rows from the database table. Is this true?</p>\n<p>In other words: what is faster under high load: the execution time of an SQL query or the time of sending a message to the broker?</p>\n<p>If the timings for get data from SQL and sending it to Kafka are similar, It makes sense to read data in several threads:\nPostgreSQL from 9.5 incorporates SELECT ... FOR UPDATE ... SKIP LOCKED. This makes implementing working queuing systems a lot simpler and easier. Now simple to fetch 'n' rows that no other session has locked, and keep them locked until we commit confirmation that the work is done.</p>\n"},{"tags":["java","spring-security","user-roles"],"answers":[{"comments":[{"owner":{"account_id":77857,"reputation":12130,"user_id":221951,"accept_rate":47,"display_name":"Piotr Gwiazda"},"score":0,"creation_date":1276257812,"post_id":3021339,"comment_id":3090086,"body_markdown":"So your solution is to use DefaultMethodSecurityExpressionHandler as bean and get expression parser and check it in EL ?","body":"So your solution is to use DefaultMethodSecurityExpressionHandler as bean and get expression parser and check it in EL ?"},{"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"score":0,"creation_date":1276260872,"post_id":3021339,"comment_id":3090448,"body_markdown":"that probably won&#39;t work, as the handler operates on methodinvocations (which you don&#39;t have in your context). you probably need to create your own bean that does something similar, but without using a methodinvocation context","body":"that probably won&#39;t work, as the handler operates on methodinvocations (which you don&#39;t have in your context). you probably need to create your own bean that does something similar, but without using a methodinvocation context"}],"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1276245275,"creation_date":1276245275,"answer_id":3021339,"question_id":3021200,"body_markdown":"Strangely enough, I don&#39;t think there is a standard solution to this problem, as the spring-security access control is [expression based][1], not java-based. you might check the source code for\r\n[DefaultMethodSecurityExpressionHandler][2] to see if you can re-use something they are doing there\r\n\r\n\r\n[1]:http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html#el-permission-evaluator\r\n[2]:https://fisheye.springsource.org/viewrep/spring-security/core/src/main/java/org/springframework/security/access/expression/method/DefaultMethodSecurityExpressionHandler.java","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>Strangely enough, I don't think there is a standard solution to this problem, as the spring-security access control is <a href=\"http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html#el-permission-evaluator\" rel=\"nofollow noreferrer\">expression based</a>, not java-based. you might check the source code for\n<a href=\"https://fisheye.springsource.org/viewrep/spring-security/core/src/main/java/org/springframework/security/access/expression/method/DefaultMethodSecurityExpressionHandler.java\" rel=\"nofollow noreferrer\">DefaultMethodSecurityExpressionHandler</a> to see if you can re-use something they are doing there</p>\n"},{"comments":[{"owner":{"account_id":77857,"reputation":12130,"user_id":221951,"accept_rate":47,"display_name":"Piotr Gwiazda"},"score":1,"creation_date":1276257537,"post_id":3021529,"comment_id":3090052,"body_markdown":"This just do for-each lookup over auth.getAuthorities()\nIt&#39;s easier to copy this code than construct or retreive SecurityContextHolderAwareRequestWrapper object. \n\nI&#39;d rather wanted to use all security EL methods. For example hasPermission from ACL","body":"This just do for-each lookup over auth.getAuthorities() It&#39;s easier to copy this code than construct or retreive SecurityContextHolderAwareRequestWrapper object.   I&#39;d rather wanted to use all security EL methods. For example hasPermission from ACL"},{"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"score":58,"creation_date":1424685558,"post_id":3021529,"comment_id":45635868,"body_markdown":"As your answer is stated, it looks like the method is static, however you need a `SecurityContextHolderAwareRequestWrapper` instance. You could improve it explaining how to obtain it and clarifying the answer itself a little bit more.","body":"As your answer is stated, it looks like the method is static, however you need a <code>SecurityContextHolderAwareRequestWrapper</code> instance. You could improve it explaining how to obtain it and clarifying the answer itself a little bit more."},{"owner":{"account_id":1927864,"reputation":3472,"user_id":1737913,"accept_rate":100,"display_name":"Alfonso Tienda"},"score":4,"creation_date":1438690679,"post_id":3021529,"comment_id":51543633,"body_markdown":"How can I retrieve the wrapper in the Controller?","body":"How can I retrieve the wrapper in the Controller?"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":4,"creation_date":1442319012,"post_id":3021529,"comment_id":53024966,"body_markdown":"How can I get instance of SecurityContextHolderAwareRequestWrapper ?","body":"How can I get instance of SecurityContextHolderAwareRequestWrapper ?"},{"owner":{"account_id":6913324,"reputation":315,"user_id":5308437,"accept_rate":57,"display_name":"Try it"},"score":2,"creation_date":1474810412,"post_id":3021529,"comment_id":66674145,"body_markdown":"Xtreme Biker is right, How do you get the SecurityContextHolderAwareRequestWrapper class? It&#39;s not a static object.","body":"Xtreme Biker is right, How do you get the SecurityContextHolderAwareRequestWrapper class? It&#39;s not a static object."},{"owner":{"account_id":1464832,"reputation":186,"user_id":1378018,"display_name":"David Bradley"},"score":6,"creation_date":1536464088,"post_id":3021529,"comment_id":91430820,"body_markdown":"If this was a web app, which it looks like it&#39;s not, you could just add SecurityContextHolderAwareRequestWrapper as a parameter. And if it was a web app you could just declare HttpServletRequest as a parameter and call isUserInRole","body":"If this was a web app, which it looks like it&#39;s not, you could just add SecurityContextHolderAwareRequestWrapper as a parameter. And if it was a web app you could just declare HttpServletRequest as a parameter and call isUserInRole"},{"owner":{"account_id":3516763,"reputation":608,"user_id":2939985,"accept_rate":53,"display_name":"Dot Batch"},"score":5,"creation_date":1559336020,"post_id":3021529,"comment_id":99401603,"body_markdown":"Since people are confused on how to leverage this. The code in a controller looks like this. \n```@RequestMapping(value = &quot;/path/to/controller&quot;)\npublic String sampleMethod(SecurityContextHolderAwareRequestWrapper requestWrapper, Model model){\n//method code\nrequestWrapper. isUserInRole(&quot;role&quot;);\n}\n```","body":"Since people are confused on how to leverage this. The code in a controller looks like this.  <code>@RequestMapping(value = &quot;&#47;path&#47;to&#47;controller&quot;) public String sampleMethod(SecurityContextHolderAwareRequestWrapper requestWrapper, Model model){ &#47;&#47;method code requestWrapper. isUserInRole(&quot;role&quot;); } </code>"},{"owner":{"account_id":419184,"reputation":385,"user_id":796206,"display_name":"GerardV"},"score":0,"creation_date":1610868732,"post_id":3021529,"comment_id":116264339,"body_markdown":"You don&#39;t have to inject the entire SecurityContextHolderAwareRequestWrapper. Using javax.servlet.http.HttpServletRequest will suffice too.","body":"You don&#39;t have to inject the entire SecurityContextHolderAwareRequestWrapper. Using javax.servlet.http.HttpServletRequest will suffice too."}],"tags":[],"owner":{"account_id":109168,"reputation":31181,"user_id":289396,"accept_rate":89,"display_name":"JoseK"},"comment_count":8,"down_vote_count":12,"up_vote_count":88,"is_accepted":true,"score":76,"last_activity_date":1542948190,"creation_date":1276247000,"answer_id":3021529,"question_id":3021200,"body_markdown":"Spring Security 3.0 has this API \r\n\r\n    SecurityContextHolderAwareRequestWrapper.isUserInRole(String role)\r\n\r\nYou&#39;ll have to inject the wrapper, before you use it.\r\n\r\n[SecurityContextHolderAwareRequestWrapper][1]\r\n\r\n\r\n  [1]: http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/servletapi/SecurityContextHolderAwareRequestWrapper.html#isUserInRole","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>Spring Security 3.0 has this API </p>\n\n<pre><code>SecurityContextHolderAwareRequestWrapper.isUserInRole(String role)\n</code></pre>\n\n<p>You'll have to inject the wrapper, before you use it.</p>\n\n<p><a href=\"http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/servletapi/SecurityContextHolderAwareRequestWrapper.html#isUserInRole\" rel=\"noreferrer\">SecurityContextHolderAwareRequestWrapper</a></p>\n"},{"comments":[{"owner":{"account_id":133643,"reputation":309,"user_id":335159,"accept_rate":45,"display_name":"fego"},"score":0,"creation_date":1392376603,"post_id":3100071,"comment_id":32947230,"body_markdown":"easier to test I think","body":"easier to test I think"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":1,"creation_date":1442318835,"post_id":3100071,"comment_id":53024851,"body_markdown":"but if I have not request ?","body":"but if I have not request ?"},{"owner":{"account_id":1376876,"reputation":1243,"user_id":1310733,"display_name":"Petr &#218;jezdsk&#253;"},"score":0,"creation_date":1461069436,"post_id":3100071,"comment_id":61022275,"body_markdown":"What about `((ServletRequestAttributes)RequestContextHolder.getRequestAttributes()).getRequest()` to get the request? :)","body":"What about <code>((ServletRequestAttributes)RequestContextHolder.getRequestAt&zwnj;&#8203;tributes()).getReque&zwnj;&#8203;st()</code> to get the request? :)"},{"owner":{"account_id":2040774,"reputation":2059,"user_id":1822033,"accept_rate":45,"display_name":"Pascal"},"score":4,"creation_date":1469987045,"post_id":3100071,"comment_id":64752665,"body_markdown":"@Autowired HttpServletRequest request; ?","body":"@Autowired HttpServletRequest request; ?"},{"owner":{"account_id":3274522,"reputation":242,"user_id":2757000,"accept_rate":60,"display_name":"gregfqt"},"score":0,"creation_date":1551783943,"post_id":3100071,"comment_id":96758033,"body_markdown":"And that&#39;s not even a Spring API, plain Servlet spec ! A shame that&#39;s not the chosen answer","body":"And that&#39;s not even a Spring API, plain Servlet spec ! A shame that&#39;s not the chosen answer"}],"tags":[],"owner":{"account_id":153638,"reputation":4382,"user_id":369025,"display_name":"gouki"},"comment_count":5,"down_vote_count":1,"up_vote_count":151,"is_accepted":false,"score":150,"last_activity_date":1277281941,"creation_date":1277281941,"answer_id":3100071,"question_id":3021200,"body_markdown":"you can use the isUserInRole method of the HttpServletRequest object.\r\n\r\nsomething like:\r\n\r\n    public String createForm(HttpSession session, HttpServletRequest request,  ModelMap   modelMap) {\r\n\t\r\n\r\n\t\tif (request.isUserInRole(&quot;ROLE_ADMIN&quot;)) {\r\n\t\t\t// code here\r\n\t\t}\r\n    }","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>you can use the isUserInRole method of the HttpServletRequest object.</p>\n\n<p>something like:</p>\n\n<pre><code>public String createForm(HttpSession session, HttpServletRequest request,  ModelMap   modelMap) {\n\n\n    if (request.isUserInRole(\"ROLE_ADMIN\")) {\n        // code here\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":940822,"reputation":1503,"user_id":968927,"accept_rate":75,"display_name":"Mrusful"},"score":1,"creation_date":1358675150,"post_id":3412166,"comment_id":20076201,"body_markdown":"`SecurityContextHolder.getContext().getAuthentication()` can retrieve `null`. Maybe you add some check?","body":"<code>SecurityContextHolder.getContext().getAuthentication()</code> can retrieve <code>null</code>. Maybe you add some check?"}],"tags":[],"owner":{"account_id":79637,"reputation":10143,"user_id":225667,"accept_rate":94,"display_name":"Gopi"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1280988609,"creation_date":1280988609,"answer_id":3412166,"question_id":3021200,"body_markdown":"You can implement a hasRole() method as below - (This is tested on spring security 3.0.x not sure about other versions.)\r\n\r\n      protected final boolean hasRole(String role) {\r\n        boolean hasRole = false;\r\n        UserDetails userDetails = getUserDetails();\r\n        if (userDetails != null) {\r\n          Collection&lt;GrantedAuthority&gt; authorities = userDetails.getAuthorities();\r\n          if (isRolePresent(authorities, role)) {\r\n            hasRole = true;\r\n          }\r\n        } \r\n        return hasRole;\r\n      }\r\n      /**\r\n       * Get info about currently logged in user\r\n       * @return UserDetails if found in the context, null otherwise\r\n       */\r\n      protected UserDetails getUserDetails() {\r\n        Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n        UserDetails userDetails = null;\r\n        if (principal instanceof UserDetails) {\r\n          userDetails = (UserDetails) principal;\r\n        }\r\n        return userDetails;\r\n      }\r\n      /**\r\n       * Check if a role is present in the authorities of current user\r\n       * @param authorities all authorities assigned to current user\r\n       * @param role required authority\r\n       * @return true if role is present in list of authorities assigned to current user, false otherwise\r\n       */\r\n      private boolean isRolePresent(Collection&lt;GrantedAuthority&gt; authorities, String role) {\r\n        boolean isRolePresent = false;\r\n        for (GrantedAuthority grantedAuthority : authorities) {\r\n          isRolePresent = grantedAuthority.getAuthority().equals(role);\r\n          if (isRolePresent) break;\r\n        }\r\n        return isRolePresent;\r\n      }\r\n\r\n\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>You can implement a hasRole() method as below - (This is tested on spring security 3.0.x not sure about other versions.)</p>\n\n<pre><code>  protected final boolean hasRole(String role) {\n    boolean hasRole = false;\n    UserDetails userDetails = getUserDetails();\n    if (userDetails != null) {\n      Collection&lt;GrantedAuthority&gt; authorities = userDetails.getAuthorities();\n      if (isRolePresent(authorities, role)) {\n        hasRole = true;\n      }\n    } \n    return hasRole;\n  }\n  /**\n   * Get info about currently logged in user\n   * @return UserDetails if found in the context, null otherwise\n   */\n  protected UserDetails getUserDetails() {\n    Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n    UserDetails userDetails = null;\n    if (principal instanceof UserDetails) {\n      userDetails = (UserDetails) principal;\n    }\n    return userDetails;\n  }\n  /**\n   * Check if a role is present in the authorities of current user\n   * @param authorities all authorities assigned to current user\n   * @param role required authority\n   * @return true if role is present in list of authorities assigned to current user, false otherwise\n   */\n  private boolean isRolePresent(Collection&lt;GrantedAuthority&gt; authorities, String role) {\n    boolean isRolePresent = false;\n    for (GrantedAuthority grantedAuthority : authorities) {\n      isRolePresent = grantedAuthority.getAuthority().equals(role);\n      if (isRolePresent) break;\n    }\n    return isRolePresent;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":205688,"reputation":21,"user_id":454573,"display_name":"lukec"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1285118741,"creation_date":1285118741,"answer_id":3765699,"question_id":3021200,"body_markdown":"Better late then never, let me put in my 2 cents worth.\r\n\r\nIn JSF world, within my managed bean, I did the following:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\nHttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();\r\nSecurityContextHolderAwareRequestWrapper sc = new SecurityContextHolderAwareRequestWrapper(req, &quot;&quot;);\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nAs mentioned above, my understanding is that it can be done the long winded way as followed:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\nObject principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\nUserDetails userDetails = null;\r\nif (principal instanceof UserDetails) {\r\n    userDetails = (UserDetails) principal;\r\n    Collection &lt;GrantedAuthority&gt; authorities = userDetails.getAuthorities();\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>Better late then never, let me put in my 2 cents worth.</p>\n\n<p>In JSF world, within my managed bean, I did the following:</p>\n\n<pre><code>\nHttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();\nSecurityContextHolderAwareRequestWrapper sc = new SecurityContextHolderAwareRequestWrapper(req, \"\");\n</code></pre>\n\n<p>As mentioned above, my understanding is that it can be done the long winded way as followed:</p>\n\n<pre><code>\nObject principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\nUserDetails userDetails = null;\nif (principal instanceof UserDetails) {\n    userDetails = (UserDetails) principal;\n    Collection  authorities = userDetails.getAuthorities();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":215639,"reputation":426,"user_id":470397,"display_name":"Starman"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1286552413,"creation_date":1286552413,"answer_id":3892116,"question_id":3021200,"body_markdown":"The answer from JoseK can&#39;t be used when your in your service layer, where you don&#39;t want to introduce a coupling with the web layer from the reference to the HTTP request. If you&#39;re looking into resolving the roles while in the service layer, Gopi&#39;s answer is the way to go.\r\n\r\nHowever, it&#39;s a bit long winded. The authorities can be accessed right from the Authentication. Hence, if you can assume that you have a user logged in, the following does it:\r\n\r\n    /**\r\n     * @return true if the user has one of the specified roles.\r\n     */\r\n    protected boolean hasRole(String[] roles) {\r\n        boolean result = false;\r\n        for (GrantedAuthority authority : SecurityContextHolder.getContext().getAuthentication().getAuthorities()) {\r\n            String userRole = authority.getAuthority();\r\n            for (String role : roles) {\r\n                if (role.equals(userRole)) {\r\n                    result = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>The answer from JoseK can't be used when your in your service layer, where you don't want to introduce a coupling with the web layer from the reference to the HTTP request. If you're looking into resolving the roles while in the service layer, Gopi's answer is the way to go.</p>\n\n<p>However, it's a bit long winded. The authorities can be accessed right from the Authentication. Hence, if you can assume that you have a user logged in, the following does it:</p>\n\n<pre><code>/**\n * @return true if the user has one of the specified roles.\n */\nprotected boolean hasRole(String[] roles) {\n    boolean result = false;\n    for (GrantedAuthority authority : SecurityContextHolder.getContext().getAuthentication().getAuthorities()) {\n        String userRole = authority.getAuthority();\n        for (String role : roles) {\n            if (role.equals(userRole)) {\n                result = true;\n                break;\n            }\n        }\n\n        if (result) {\n            break;\n        }\n    }\n\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":954084,"reputation":101,"user_id":979691,"display_name":"Joey Jarin"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1352533371,"creation_date":1317789163,"answer_id":7656731,"question_id":3021200,"body_markdown":"I&#39;m using this:\r\n\r\n    @RequestMapping(method = RequestMethod.GET)\r\n    public void welcome(SecurityContextHolderAwareRequestWrapper request) {\r\n        boolean b = request.isUserInRole(&quot;ROLE_ADMIN&quot;);\r\n        System.out.println(&quot;ROLE_ADMIN=&quot; + b);\r\n\r\n        boolean c = request.isUserInRole(&quot;ROLE_USER&quot;);\r\n        System.out.println(&quot;ROLE_USER=&quot; + c);\r\n    }","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>I'm using this:</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.GET)\npublic void welcome(SecurityContextHolderAwareRequestWrapper request) {\n    boolean b = request.isUserInRole(\"ROLE_ADMIN\");\n    System.out.println(\"ROLE_ADMIN=\" + b);\n\n    boolean c = request.isUserInRole(\"ROLE_USER\");\n    System.out.println(\"ROLE_USER=\" + c);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7206157,"reputation":3851,"user_id":5501699,"display_name":"Imtiaz Shakil Siddique"},"score":0,"creation_date":1588835265,"post_id":10232526,"comment_id":109053604,"body_markdown":"`SecurityContextHolder.getContext()` is never `NULL`, check the docs. Thus you can avoid checking context being `NULL`.","body":"<code>SecurityContextHolder.getContext()</code> is never <code>NULL</code>, check the docs. Thus you can avoid checking context being <code>NULL</code>."}],"tags":[],"owner":{"account_id":1419640,"reputation":631,"user_id":1344540,"display_name":"Nate Sammons"},"comment_count":1,"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1334852847,"creation_date":1334852847,"answer_id":10232526,"question_id":3021200,"body_markdown":"You can retrieve the security context and then use that:\r\n\r\n        import org.springframework.security.core.Authentication;\r\n        import org.springframework.security.core.GrantedAuthority;\r\n        import org.springframework.security.core.context.SecurityContext;\r\n        import org.springframework.security.core.context.SecurityContextHolder;\r\n    \r\n        protected boolean hasRole(String role) {\r\n            // get security context from thread local\r\n            SecurityContext context = SecurityContextHolder.getContext();\r\n            if (context == null)\r\n                return false;\r\n    \r\n            Authentication authentication = context.getAuthentication();\r\n            if (authentication == null)\r\n                return false;\r\n    \r\n            for (GrantedAuthority auth : authentication.getAuthorities()) {\r\n                if (role.equals(auth.getAuthority()))\r\n                    return true;\r\n            }\r\n    \r\n            return false;\r\n        }\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>You can retrieve the security context and then use that:</p>\n\n<pre><code>    import org.springframework.security.core.Authentication;\n    import org.springframework.security.core.GrantedAuthority;\n    import org.springframework.security.core.context.SecurityContext;\n    import org.springframework.security.core.context.SecurityContextHolder;\n\n    protected boolean hasRole(String role) {\n        // get security context from thread local\n        SecurityContext context = SecurityContextHolder.getContext();\n        if (context == null)\n            return false;\n\n        Authentication authentication = context.getAuthentication();\n        if (authentication == null)\n            return false;\n\n        for (GrantedAuthority auth : authentication.getAuthorities()) {\n            if (role.equals(auth.getAuthority()))\n                return true;\n        }\n\n        return false;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2695789,"reputation":3222,"user_id":2327879,"accept_rate":78,"display_name":"Erica Kane"},"score":2,"creation_date":1421612269,"post_id":12455803,"comment_id":44415891,"body_markdown":"A much nicer answer, however the ROLE_ADMIN should be in double quotes.","body":"A much nicer answer, however the ROLE_ADMIN should be in double quotes."},{"owner":{"account_id":1376876,"reputation":1243,"user_id":1310733,"display_name":"Petr &#218;jezdsk&#253;"},"score":8,"creation_date":1461069319,"post_id":12455803,"comment_id":61022197,"body_markdown":"This is very risky. Be aware that switching to another implementation of GrantedAuthority implementation (eg. JAAS, by adding another authorization possibility) will make this code malfunction. See equals() implementation in SimpleGrantedAuthority","body":"This is very risky. Be aware that switching to another implementation of GrantedAuthority implementation (eg. JAAS, by adding another authorization possibility) will make this code malfunction. See equals() implementation in SimpleGrantedAuthority"}],"tags":[],"owner":{"account_id":1728457,"reputation":759,"user_id":1582611,"display_name":"Ninca"},"comment_count":2,"down_vote_count":1,"up_vote_count":72,"is_accepted":false,"score":71,"last_activity_date":1423819453,"creation_date":1347871593,"answer_id":12455803,"question_id":3021200,"body_markdown":"Instead of using a loop to find the authority from UserDetails you can do:\r\n\r\n    Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\r\n    boolean authorized = authorities.contains(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;));","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>Instead of using a loop to find the authority from UserDetails you can do:</p>\n\n<pre><code>Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\nboolean authorized = authorities.contains(new SimpleGrantedAuthority(\"ROLE_ADMIN\"));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":217966,"reputation":12439,"user_id":474034,"accept_rate":67,"display_name":"lanoxx"},"score":2,"creation_date":1469713087,"post_id":24013334,"comment_id":64659155,"body_markdown":"As of Spring Security 4.0 this `hasRole(&quot;bla&quot;)` is now equal to `hasAuthority(&quot;ROLE_bla&quot;)`.","body":"As of Spring Security 4.0 this <code>hasRole(&quot;bla&quot;)</code> is now equal to <code>hasAuthority(&quot;ROLE_bla&quot;)</code>."}],"tags":[],"owner":{"account_id":933262,"reputation":7628,"user_id":962696,"accept_rate":67,"display_name":"JonnyRaa"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1401792880,"creation_date":1401792880,"answer_id":24013334,"question_id":3021200,"body_markdown":"This is sort of coming at the question from the other end but I thought I&#39;d throw it in as I really had to dig on the internet to find this out.\r\n\r\nThere is a lot of stuff about how to check roles but not much saying what you are actually checking when you say hasRole(&quot;blah&quot;)\r\n\r\n**HasRole checks the granted authorities for the currently authenticated principal**\r\n\r\nSo really when you see **hasRole(&quot;blah&quot;) really means hasAuthority(&quot;blah&quot;)**.\r\n\r\nIn the case I&#39;ve seen, you do this with a class that Implements UserDetails which defines a method called getAuthorities.  In this you&#39;ll basically add some `new SimpleGrantedAuthority(&quot;some name&quot;)` to a list based on some logic.  The names in this list are the things checked by the hasRole statements.\r\n\r\nI guess in this context the UserDetails object is the currently authenticated principal.  There&#39;s some magic that happens in and around authentication providers and more specifically the authentication-manager that makes this happen.","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>This is sort of coming at the question from the other end but I thought I'd throw it in as I really had to dig on the internet to find this out.</p>\n\n<p>There is a lot of stuff about how to check roles but not much saying what you are actually checking when you say hasRole(\"blah\")</p>\n\n<p><strong>HasRole checks the granted authorities for the currently authenticated principal</strong></p>\n\n<p>So really when you see <strong>hasRole(\"blah\") really means hasAuthority(\"blah\")</strong>.</p>\n\n<p>In the case I've seen, you do this with a class that Implements UserDetails which defines a method called getAuthorities.  In this you'll basically add some <code>new SimpleGrantedAuthority(\"some name\")</code> to a list based on some logic.  The names in this list are the things checked by the hasRole statements.</p>\n\n<p>I guess in this context the UserDetails object is the currently authenticated principal.  There's some magic that happens in and around authentication providers and more specifically the authentication-manager that makes this happen.</p>\n"},{"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1418052811,"creation_date":1418052811,"answer_id":27361325,"question_id":3021200,"body_markdown":"The @gouki answer is best! \r\n\r\nJust a tip of how spring really do this. \r\n\r\nThere is a class named `SecurityContextHolderAwareRequestWrapper` which implements the `ServletRequestWrapper` class. \r\n\r\nThe `SecurityContextHolderAwareRequestWrapper` overrides the `isUserInRole` and search user `Authentication` (which is managed by Spring) to find if user has a role or not.\r\n\r\n`SecurityContextHolderAwareRequestWrapper` the code is as:\r\n\r\n        @Override\r\n        public boolean isUserInRole(String role) {\r\n            return isGranted(role);\r\n        }\r\n    \r\n     private boolean isGranted(String role) {\r\n            Authentication auth = getAuthentication();\r\n    \r\n            if( rolePrefix != null ) {\r\n                role = rolePrefix + role;\r\n            }\r\n    \r\n            if ((auth == null) || (auth.getPrincipal() == null)) {\r\n                return false;\r\n            }\r\n    \r\n            Collection&lt;? extends GrantedAuthority&gt; authorities = auth.getAuthorities();\r\n    \r\n            if (authorities == null) {\r\n                return false;\r\n            }\r\n    \r\n            //This is the loop which do actual search\r\n            for (GrantedAuthority grantedAuthority : authorities) {\r\n                if (role.equals(grantedAuthority.getAuthority())) {\r\n                    return true;\r\n                }\r\n            }\r\n    \r\n            return false;\r\n        }","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>The @gouki answer is best! </p>\n\n<p>Just a tip of how spring really do this. </p>\n\n<p>There is a class named <code>SecurityContextHolderAwareRequestWrapper</code> which implements the <code>ServletRequestWrapper</code> class. </p>\n\n<p>The <code>SecurityContextHolderAwareRequestWrapper</code> overrides the <code>isUserInRole</code> and search user <code>Authentication</code> (which is managed by Spring) to find if user has a role or not.</p>\n\n<p><code>SecurityContextHolderAwareRequestWrapper</code> the code is as:</p>\n\n<pre><code>    @Override\n    public boolean isUserInRole(String role) {\n        return isGranted(role);\n    }\n\n private boolean isGranted(String role) {\n        Authentication auth = getAuthentication();\n\n        if( rolePrefix != null ) {\n            role = rolePrefix + role;\n        }\n\n        if ((auth == null) || (auth.getPrincipal() == null)) {\n            return false;\n        }\n\n        Collection&lt;? extends GrantedAuthority&gt; authorities = auth.getAuthorities();\n\n        if (authorities == null) {\n            return false;\n        }\n\n        //This is the loop which do actual search\n        for (GrantedAuthority grantedAuthority : authorities) {\n            if (role.equals(grantedAuthority.getAuthority())) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1989856,"reputation":336,"user_id":1784136,"accept_rate":38,"display_name":"arctica"},"score":1,"creation_date":1501848353,"post_id":39142100,"comment_id":77973376,"body_markdown":"Or you can populate your roles properly:\n\nhttps://github.com/spring-projects/spring-security/issues/2152#issuecomment-180599279","body":"Or you can populate your roles properly:  <a href=\"https://github.com/spring-projects/spring-security/issues/2152#issuecomment-180599279\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-security/issues/&hellip;</a>"}],"tags":[],"owner":{"account_id":9074369,"reputation":245,"user_id":6756475,"accept_rate":75,"display_name":"Kirinya"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1472119020,"creation_date":1472119020,"answer_id":39142100,"question_id":3021200,"body_markdown":"In our project, we are using a role hierarchy, while most of the above answers only aim at checking for a specific role, i.e. would only check for the role given, but not for that role and up the hierarchy.\r\n\r\nA solution for this:\r\n\r\n    @Component\r\n    public class SpringRoleEvaluator {\r\n\r\n\t@Resource(name=&quot;roleHierarchy&quot;)\r\n\tprivate RoleHierarchy roleHierarchy;\r\n\t\r\n\tpublic boolean hasRole(String role) {\r\n\t\tUserDetails dt = AuthenticationUtils.getSessionUserDetails();\r\n\t\t\r\n\t\tfor (GrantedAuthority auth: roleHierarchy.getReachableGrantedAuthorities(dt.getAuthorities())) {\r\n\t\t\tif (auth.toString().equals(&quot;ROLE_&quot;+role)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nRoleHierarchy is defined as a bean in spring-security.xml.\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>In our project, we are using a role hierarchy, while most of the above answers only aim at checking for a specific role, i.e. would only check for the role given, but not for that role and up the hierarchy.</p>\n\n<p>A solution for this:</p>\n\n<pre><code>@Component\npublic class SpringRoleEvaluator {\n\n@Resource(name=\"roleHierarchy\")\nprivate RoleHierarchy roleHierarchy;\n\npublic boolean hasRole(String role) {\n    UserDetails dt = AuthenticationUtils.getSessionUserDetails();\n\n    for (GrantedAuthority auth: roleHierarchy.getReachableGrantedAuthorities(dt.getAuthorities())) {\n        if (auth.toString().equals(\"ROLE_\"+role)) {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>RoleHierarchy is defined as a bean in spring-security.xml.</p>\n"},{"comments":[{"owner":{"account_id":128202,"reputation":4382,"user_id":325868,"accept_rate":58,"display_name":"LeO"},"score":0,"creation_date":1541584099,"post_id":45542262,"comment_id":93263282,"body_markdown":"That&#39;s the simplest solution cause I need to check the List several times and fetching it once with some _magic_ simple routine is great!","body":"That&#39;s the simplest solution cause I need to check the List several times and fetching it once with some <i>magic</i> simple routine is great!"}],"tags":[],"owner":{"account_id":1577409,"reputation":16015,"user_id":1463522,"accept_rate":64,"display_name":"holmis83"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1502093707,"creation_date":1502093707,"answer_id":45542262,"question_id":3021200,"body_markdown":"You can get some help from [AuthorityUtils][1] class. Checking role as a one-liner:\r\n\r\n    if (AuthorityUtils.authorityListToSet(SecurityContextHolder.getContext().getAuthentication().getAuthorities()).contains(&quot;ROLE_MANAGER&quot;)) {\r\n        /* ... */\r\n    }\r\n\r\nCaveat: This does not check role hierarchy, if such exists.\r\n\r\n\r\n  [1]: http://docs.spring.io/autorepo/docs/spring-security/4.2.x/apidocs/org/springframework/security/core/authority/AuthorityUtils.html","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>You can get some help from <a href=\"http://docs.spring.io/autorepo/docs/spring-security/4.2.x/apidocs/org/springframework/security/core/authority/AuthorityUtils.html\" rel=\"noreferrer\">AuthorityUtils</a> class. Checking role as a one-liner:</p>\n\n<pre><code>if (AuthorityUtils.authorityListToSet(SecurityContextHolder.getContext().getAuthentication().getAuthorities()).contains(\"ROLE_MANAGER\")) {\n    /* ... */\n}\n</code></pre>\n\n<p>Caveat: This does not check role hierarchy, if such exists.</p>\n"},{"tags":[],"owner":{"account_id":985380,"reputation":7450,"user_id":1005102,"accept_rate":71,"display_name":"Utku &#214;zdemir"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1510797490,"creation_date":1510797490,"answer_id":47320309,"question_id":3021200,"body_markdown":"Most answers are missing some points: \r\n\r\n 1. Role and authority are not the same thing in Spring. See here for [more][1] details.\r\n\r\n 2. Role names are equal to `rolePrefix` + `authority`.\r\n\r\n 3. The default role prefix is `ROLE_`, however, it is configurable. See [here][2].\r\n\r\nTherefore, a proper role check needs to respect the role prefix if it is configured. \r\n\r\nUnfortunately, the role prefix customization in Spring is a bit hacky, in many places the default prefix, `ROLE_` is hardcoded, but in addition to that, a bean of type `GrantedAuthorityDefaults` is checked in the Spring context, and if it exists, the custom role prefix it has is respected.\r\n\r\nBringing all this information together, a better role checker implementation would be something like:\r\n\r\n    @Component\r\n    public class RoleChecker {\r\n    \r\n        @Autowired(required = false)\r\n        private GrantedAuthorityDefaults grantedAuthorityDefaults;\r\n    \r\n        public boolean hasRole(String role) {\r\n            String rolePrefix = grantedAuthorityDefaults != null ? grantedAuthorityDefaults.getRolePrefix() : &quot;ROLE_&quot;;\r\n            return Optional.ofNullable(SecurityContextHolder.getContext().getAuthentication())\r\n                    .map(Authentication::getAuthorities)\r\n                    .map(Collection::stream)\r\n                    .orElse(Stream.empty())\r\n                    .map(GrantedAuthority::getAuthority)\r\n                    .map(authority -&gt; rolePrefix + authority)\r\n                    .anyMatch(role::equals);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://www.baeldung.com/spring-security-granted-authority-vs-role\r\n  [2]: https://stackoverflow.com/a/43964633/1005102","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>Most answers are missing some points: </p>\n\n<ol>\n<li><p>Role and authority are not the same thing in Spring. See here for <a href=\"http://www.baeldung.com/spring-security-granted-authority-vs-role\" rel=\"noreferrer\">more</a> details.</p></li>\n<li><p>Role names are equal to <code>rolePrefix</code> + <code>authority</code>.</p></li>\n<li><p>The default role prefix is <code>ROLE_</code>, however, it is configurable. See <a href=\"https://stackoverflow.com/a/43964633/1005102\">here</a>.</p></li>\n</ol>\n\n<p>Therefore, a proper role check needs to respect the role prefix if it is configured. </p>\n\n<p>Unfortunately, the role prefix customization in Spring is a bit hacky, in many places the default prefix, <code>ROLE_</code> is hardcoded, but in addition to that, a bean of type <code>GrantedAuthorityDefaults</code> is checked in the Spring context, and if it exists, the custom role prefix it has is respected.</p>\n\n<p>Bringing all this information together, a better role checker implementation would be something like:</p>\n\n<pre><code>@Component\npublic class RoleChecker {\n\n    @Autowired(required = false)\n    private GrantedAuthorityDefaults grantedAuthorityDefaults;\n\n    public boolean hasRole(String role) {\n        String rolePrefix = grantedAuthorityDefaults != null ? grantedAuthorityDefaults.getRolePrefix() : \"ROLE_\";\n        return Optional.ofNullable(SecurityContextHolder.getContext().getAuthentication())\n                .map(Authentication::getAuthorities)\n                .map(Collection::stream)\n                .orElse(Stream.empty())\n                .map(GrantedAuthority::getAuthority)\n                .map(authority -&gt; rolePrefix + authority)\n                .anyMatch(role::equals);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5169775,"reputation":1532,"user_id":4138684,"display_name":"Jajikanth pydimarla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529438938,"creation_date":1529438938,"answer_id":50936196,"question_id":3021200,"body_markdown":"My Approach with the help of Java8 , Passing coma separated roles will give you true or false\r\n\r\n    \tpublic static Boolean hasAnyPermission(String permissions){\r\n\t\tBoolean result = false;\r\n\t\tif(permissions != null &amp;&amp; !permissions.isEmpty()){\r\n\t\t\tString[] rolesArray = permissions.split(&quot;,&quot;);\r\n\t\t\tAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n\t\t\tfor (String role : rolesArray) {\r\n\t\t\t\tboolean hasUserRole = authentication.getAuthorities().stream().anyMatch(r -&gt; r.getAuthority().equals(role));\r\n\t\t\t\tif (hasUserRole) {\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>My Approach with the help of Java8 , Passing coma separated roles will give you true or false</p>\n\n<pre><code>    public static Boolean hasAnyPermission(String permissions){\n    Boolean result = false;\n    if(permissions != null &amp;&amp; !permissions.isEmpty()){\n        String[] rolesArray = permissions.split(\",\");\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        for (String role : rolesArray) {\n            boolean hasUserRole = authentication.getAuthorities().stream().anyMatch(r -&gt; r.getAuthority().equals(role));\n            if (hasUserRole) {\n                result = true;\n                break;\n            }\n        }\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13677563,"reputation":499,"user_id":9868643,"display_name":"Luke Cheung"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1556176944,"creation_date":1556176944,"answer_id":55843900,"question_id":3021200,"body_markdown":"This two annotation below is equal, &quot;hasRole&quot; will auto add prefix &quot;ROLE_&quot;. Make sure you have the right annotation. This role is set in UserDetailsService#loadUserByUsername.\r\n\r\n    @PreAuthorize(&quot;hasAuthority(&#39;ROLE_user&#39;)&quot;)\r\n    @PreAuthorize(&quot;hasRole(&#39;user&#39;)&quot;)\r\nthen, you can get the role in java code.\r\n\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    if(authentication.getAuthorities().contains(new SimpleGrantedAuthority(&quot;ROLE_user&quot;))){\r\n        System.out.println(&quot;user role2&quot;);\r\n    }","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>This two annotation below is equal, \"hasRole\" will auto add prefix \"ROLE_\". Make sure you have the right annotation. This role is set in UserDetailsService#loadUserByUsername.</p>\n\n<pre><code>@PreAuthorize(\"hasAuthority('ROLE_user')\")\n@PreAuthorize(\"hasRole('user')\")\n</code></pre>\n\n<p>then, you can get the role in java code.</p>\n\n<pre><code>Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\nif(authentication.getAuthorities().contains(new SimpleGrantedAuthority(\"ROLE_user\"))){\n    System.out.println(\"user role2\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11136722,"reputation":11,"user_id":8174892,"display_name":"user8174892"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1565179063,"creation_date":1565179063,"answer_id":57393956,"question_id":3021200,"body_markdown":"On your user model just add a &#39;hasRole&#39; method like below\r\n\r\n    public boolean hasRole(String auth) {\r\n        for (Role role : roles) {\r\n            if (role.getName().equals(auth)) { return true; }\r\n        }\r\n        return false;\r\n    }\r\n\r\nI usually use it to check if the authenticated user has the role admin as follows\r\n\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); // This gets the authentication\r\n    User authUser = (User) authentication.getPrincipal(); // This gets the logged in user\r\n    authUser.hasRole(&quot;ROLE_ADMIN&quot;) // This returns true or false\r\n\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>On your user model just add a 'hasRole' method like below</p>\n\n<pre><code>public boolean hasRole(String auth) {\n    for (Role role : roles) {\n        if (role.getName().equals(auth)) { return true; }\n    }\n    return false;\n}\n</code></pre>\n\n<p>I usually use it to check if the authenticated user has the role admin as follows</p>\n\n<pre><code>Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); // This gets the authentication\nUser authUser = (User) authentication.getPrincipal(); // This gets the logged in user\nauthUser.hasRole(\"ROLE_ADMIN\") // This returns true or false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2970813,"reputation":575,"user_id":2522892,"accept_rate":57,"display_name":"Lucky"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1595710719,"creation_date":1595710719,"answer_id":63093501,"question_id":3021200,"body_markdown":"User Roles can be checked using following ways:\r\n\r\n1. Using call static methods in SecurityContextHolder:\r\n\r\n\r\n    `Authentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n                      if (auth != null &amp;&amp; auth.getAuthorities().stream().anyMatch(role -&gt; role.getAuthority().equals(&quot;ROLE_NAME&quot;))) { //do something}`\r\n\r\n\r\n\r\n2. Using HttpServletRequest \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @GetMapping(&quot;/users&quot;)\r\n    public String getUsers(HttpServletRequest request) {\r\n        if (request.isUserInRole(&quot;ROLE_NAME&quot;)) {\r\n          \r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>User Roles can be checked using following ways:</p>\n<ol>\n<li><p>Using call static methods in SecurityContextHolder:</p>\n<p><code>Authentication auth = SecurityContextHolder.getContext().getAuthentication(); if (auth != null &amp;&amp; auth.getAuthorities().stream().anyMatch(role -&gt; role.getAuthority().equals(&quot;ROLE_NAME&quot;))) { //do something}</code></p>\n</li>\n<li><p>Using HttpServletRequest</p>\n</li>\n</ol>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@GetMapping(\"/users\")\npublic String getUsers(HttpServletRequest request) {\n    if (request.isUserInRole(\"ROLE_NAME\")) {\n      \n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":8718613,"reputation":41,"user_id":6522408,"display_name":"Songtao Lou"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629059776,"creation_date":1629054865,"answer_id":68794670,"question_id":3021200,"body_markdown":"You can use the annotation `@Secured` or `@RolesAllowed` or `@PreAuthorise` / `@PostAuthorise` in Spring Security.\r\n\r\nRemember: You need to add this code\r\n````\r\n@Configuration\r\n@EnableGlobalMethodSecurity(\r\n    securedEnabled = true, \r\n    jsr250Enabled = true, \r\n    prePostEnabled = true\r\n)\r\npublic class MyConfig extends WebSecurityConfigurerAdapter{\r\n}\r\n```` \r\nin front of your configure class. You do not need use all of the 3 parameters `securedEnabled`, `jsr250Enabled`, `prePostEnabled`. You only need one depending on which annotation you want to use.\r\n\r\nThen put the role check annotation in your controller class.\r\n\r\n````\r\n@Secured(&quot;ROLE_admin&quot;)\r\n@GetMapping(&quot;/hello&quot;)\r\npublic String hello(){\r\n    return &quot;hello&quot;;\r\n}\r\n````\r\nor\r\n````\r\n@RolesAllowed(&quot;ROLE_admin&quot;)\r\n@GetMapping(&quot;/hello&quot;)\r\npublic String hello(){\r\n    return &quot;hello&quot;;\r\n}\r\n````\r\nor\r\n````\r\n@PreAuthorize(&quot;hasRole(&#39;ROLE_user&#39;)&quot;)\r\n@GetMapping(&quot;/hello&quot;)\r\npublic String hello(){\r\n    return &quot;hello&quot;;\r\n}\r\n````\r\n\r\nHere is a tutorial https://www.baeldung.com/spring-security-method-security","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>You can use the annotation <code>@Secured</code> or <code>@RolesAllowed</code> or <code>@PreAuthorise</code> / <code>@PostAuthorise</code> in Spring Security.</p>\n<p>Remember: You need to add this code</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(\n    securedEnabled = true, \n    jsr250Enabled = true, \n    prePostEnabled = true\n)\npublic class MyConfig extends WebSecurityConfigurerAdapter{\n}\n</code></pre>\n<p>in front of your configure class. You do not need use all of the 3 parameters <code>securedEnabled</code>, <code>jsr250Enabled</code>, <code>prePostEnabled</code>. You only need one depending on which annotation you want to use.</p>\n<p>Then put the role check annotation in your controller class.</p>\n<pre><code>@Secured(&quot;ROLE_admin&quot;)\n@GetMapping(&quot;/hello&quot;)\npublic String hello(){\n    return &quot;hello&quot;;\n}\n</code></pre>\n<p>or</p>\n<pre><code>@RolesAllowed(&quot;ROLE_admin&quot;)\n@GetMapping(&quot;/hello&quot;)\npublic String hello(){\n    return &quot;hello&quot;;\n}\n</code></pre>\n<p>or</p>\n<pre><code>@PreAuthorize(&quot;hasRole('ROLE_user')&quot;)\n@GetMapping(&quot;/hello&quot;)\npublic String hello(){\n    return &quot;hello&quot;;\n}\n</code></pre>\n<p>Here is a tutorial <a href=\"https://www.baeldung.com/spring-security-method-security\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-security-method-security</a></p>\n"},{"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1676574997,"post_id":75464687,"comment_id":133169709,"body_markdown":"Could you please add some explanations to your approach?","body":"Could you please add some explanations to your approach?"}],"tags":[],"owner":{"account_id":3373041,"reputation":195,"user_id":2831843,"display_name":"Geoffrey Ritchey"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1687965980,"creation_date":1676489913,"answer_id":75464687,"question_id":3021200,"body_markdown":"\tpublic static Boolean isUserInRole(String role) {\r\n\t\treturn Optional.ofNullable(SecurityContextHolder.getContext().getAuthentication())\r\n\t\t\t\t.map(x-&gt;x.getAuthorities())\r\n\t\t\t\t.orElse(Collections.emptyList())\r\n\t\t\t\t.stream()\r\n\t\t\t\t.anyMatch(x-&gt;x.getAuthority()\r\n\t\t\t\t\t\t.equals(role));\r\n\t\t\t\t\r\n\t}\r\n\r\n\r\n&gt; ChatGPT explanation step by step:\r\n\r\n1. `SecurityContextHolder.getContext().getAuthentication()`: This retrieves the `Authentication` object from the `SecurityContextHolder`. The `Authentication` object represents the currently authenticated user.\r\n\r\n2. `Optional.ofNullable(...)`: Wraps the `Authentication` object in an `Optional`. If the `Authentication` object is not `null`, it will be wrapped in an `Optional`. Otherwise, an empty `Optional` will be created.\r\n\r\n3. `.map(x -&gt; x.getAuthorities())`: If the `Optional` is not empty, this maps the `Authentication` object to its authorities. The `getAuthorities()` method retrieves the collection of granted authorities for the user.\r\n\r\n4. `.orElse(Collections.emptyList())`: If the `Optional` is empty (i.e., the `Authentication` object is `null` or has no authorities), this specifies a default value to use, which is an empty list (`Collections.emptyList()`). This is done to handle the case when `getAuthorities()` returns `null`.\r\n\r\n5. `.stream()`: Converts the list of authorities to a stream, enabling us to perform stream operations on the elements.\r\n\r\n6. `.anyMatch(x -&gt; x.getAuthority().equals(role))`: Checks if any of the authorities in the stream match the specified `role`. The lambda expression `x -&gt; x.getAuthority().equals(role)` is used to compare each authority&#39;s `getAuthority()` value with the given `role`. If a match is found, it will return `true`; otherwise, it will return `false`.\r\n\r\nSo, the entire code checks if the current user, obtained from `SecurityContextHolder`, has an authority matching the specified `role`. It handles the cases where the user is not authenticated (`null` `Authentication` object) or has no authorities, returning `false` in those cases.\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<pre><code>public static Boolean isUserInRole(String role) {\n    return Optional.ofNullable(SecurityContextHolder.getContext().getAuthentication())\n            .map(x-&gt;x.getAuthorities())\n            .orElse(Collections.emptyList())\n            .stream()\n            .anyMatch(x-&gt;x.getAuthority()\n                    .equals(role));\n            \n}\n</code></pre>\n<blockquote>\n<p>ChatGPT explanation step by step:</p>\n</blockquote>\n<ol>\n<li><p><code>SecurityContextHolder.getContext().getAuthentication()</code>: This retrieves the <code>Authentication</code> object from the <code>SecurityContextHolder</code>. The <code>Authentication</code> object represents the currently authenticated user.</p>\n</li>\n<li><p><code>Optional.ofNullable(...)</code>: Wraps the <code>Authentication</code> object in an <code>Optional</code>. If the <code>Authentication</code> object is not <code>null</code>, it will be wrapped in an <code>Optional</code>. Otherwise, an empty <code>Optional</code> will be created.</p>\n</li>\n<li><p><code>.map(x -&gt; x.getAuthorities())</code>: If the <code>Optional</code> is not empty, this maps the <code>Authentication</code> object to its authorities. The <code>getAuthorities()</code> method retrieves the collection of granted authorities for the user.</p>\n</li>\n<li><p><code>.orElse(Collections.emptyList())</code>: If the <code>Optional</code> is empty (i.e., the <code>Authentication</code> object is <code>null</code> or has no authorities), this specifies a default value to use, which is an empty list (<code>Collections.emptyList()</code>). This is done to handle the case when <code>getAuthorities()</code> returns <code>null</code>.</p>\n</li>\n<li><p><code>.stream()</code>: Converts the list of authorities to a stream, enabling us to perform stream operations on the elements.</p>\n</li>\n<li><p><code>.anyMatch(x -&gt; x.getAuthority().equals(role))</code>: Checks if any of the authorities in the stream match the specified <code>role</code>. The lambda expression <code>x -&gt; x.getAuthority().equals(role)</code> is used to compare each authority's <code>getAuthority()</code> value with the given <code>role</code>. If a match is found, it will return <code>true</code>; otherwise, it will return <code>false</code>.</p>\n</li>\n</ol>\n<p>So, the entire code checks if the current user, obtained from <code>SecurityContextHolder</code>, has an authority matching the specified <code>role</code>. It handles the cases where the user is not authenticated (<code>null</code> <code>Authentication</code> object) or has no authorities, returning <code>false</code> in those cases.</p>\n"},{"tags":[],"owner":{"account_id":20595205,"reputation":76,"user_id":15117824,"display_name":"Akshay Khule"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701331870,"creation_date":1701331870,"answer_id":77576826,"question_id":3021200,"body_markdown":"In Java code, especially within a Spring Security context, you can check user roles or authorities programmatically. Below is an example of how you might achieve this:\r\n\r\n    import org.springframework.security.core.Authentication;\r\n    import org.springframework.security.core.context.SecurityContextHolder;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    \r\n    // Your code...\r\n    \r\n    // Get the currently authenticated user\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    \r\n    // Check if the user has a specific role\r\n    if (authentication != null &amp;&amp; authentication.getPrincipal() instanceof UserDetails) {\r\n        UserDetails userDetails = (UserDetails) authentication.getPrincipal();\r\n    \r\n        if (userDetails.getAuthorities().stream().anyMatch(role -&gt; role.getAuthority().equals(&quot;ROLE_MANAGER&quot;))) {\r\n            // User has the ROLE_MANAGER role, so you can show the button\r\n            layout.addComponent(new Button(&quot;Edit users&quot;));\r\n        }\r\n    }\r\n    \r\n    // Your code...\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>In Java code, especially within a Spring Security context, you can check user roles or authorities programmatically. Below is an example of how you might achieve this:</p>\n<pre><code>import org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\n\n// Your code...\n\n// Get the currently authenticated user\nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\n\n// Check if the user has a specific role\nif (authentication != null &amp;&amp; authentication.getPrincipal() instanceof UserDetails) {\n    UserDetails userDetails = (UserDetails) authentication.getPrincipal();\n\n    if (userDetails.getAuthorities().stream().anyMatch(role -&gt; role.getAuthority().equals(&quot;ROLE_MANAGER&quot;))) {\n        // User has the ROLE_MANAGER role, so you can show the button\n        layout.addComponent(new Button(&quot;Edit users&quot;));\n    }\n}\n\n// Your code...\n</code></pre>\n"}],"owner":{"account_id":77857,"reputation":12130,"user_id":221951,"accept_rate":47,"display_name":"Piotr Gwiazda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220587,"favorite_count":0,"down_vote_count":0,"up_vote_count":133,"accepted_answer_id":3021529,"answer_count":21,"score":133,"last_activity_date":1701331870,"creation_date":1276243960,"question_id":3021200,"body_markdown":"How to check user authority or permission in Java Code ? For example - I want to show or hide button for user depending on role. There are annotations like:\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;ROLE_USER&#39;)&quot;)\r\n\r\nHow to make it in Java code? Something like : \r\n\r\n    if(somethingHere.hasRole(&quot;ROLE_MANAGER&quot;)) {\r\n       layout.addComponent(new Button(&quot;Edit users&quot;));\r\n    }","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>How to check user authority or permission in Java Code ? For example - I want to show or hide button for user depending on role. There are annotations like:</p>\n\n<pre><code>@PreAuthorize(\"hasRole('ROLE_USER')\")\n</code></pre>\n\n<p>How to make it in Java code? Something like : </p>\n\n<pre><code>if(somethingHere.hasRole(\"ROLE_MANAGER\")) {\n   layout.addComponent(new Button(\"Edit users\"));\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iya Bursov"},"score":1,"creation_date":1701277059,"post_id":77573077,"comment_id":136756691,"body_markdown":"what do you mean as &quot;memory location&quot;, in java you usually don&#39;t have access to raw memory","body":"what do you mean as &quot;memory location&quot;, in java you usually don&#39;t have access to raw memory"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1701277219,"post_id":77573077,"comment_id":136756720,"body_markdown":"like [this](https://www.baeldung.com/java-object-memory-address)?","body":"like <a href=\"https://www.baeldung.com/java-object-memory-address\" rel=\"nofollow noreferrer\">this</a>?"},{"owner":{"account_id":30024237,"reputation":9,"user_id":23008883,"display_name":"RaviTeja"},"score":0,"creation_date":1701277335,"post_id":77573077,"comment_id":136756743,"body_markdown":"Ilya Bursov, I wanted to know if there is any possibility to check the memory location where each string is stored in the memory.","body":"Ilya Bursov, I wanted to know if there is any possibility to check the memory location where each string is stored in the memory."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1701277339,"post_id":77573077,"comment_id":136756744,"body_markdown":"The difference is that they don&#39;t have anything in common.","body":"The difference is that they don&#39;t have anything in common."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1701277613,"post_id":77573077,"comment_id":136756791,"body_markdown":"*Why* would you want to know this?","body":"<i>Why</i> would you want to know this?"},{"owner":{"account_id":30024237,"reputation":9,"user_id":23008883,"display_name":"RaviTeja"},"score":0,"creation_date":1701277795,"post_id":77573077,"comment_id":136756820,"body_markdown":"Old Dog Programmer, To get a clear picture of where and how memory is allocated and to verify the topics that I am learning through the code.","body":"Old Dog Programmer, To get a clear picture of where and how memory is allocated and to verify the topics that I am learning through the code."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1701277959,"post_id":77573077,"comment_id":136756856,"body_markdown":"The `.hashCode()`  method is typically overridden to be the result of a calculation based on values of primitive instance variables and the `.hashCode()` of reference instance variables. The calculations typically do not use addresses. So, in general, the value returned by `.hashCode()` and memory location are not related at all.","body":"The <code>.hashCode()</code>  method is typically overridden to be the result of a calculation based on values of primitive instance variables and the <code>.hashCode()</code> of reference instance variables. The calculations typically do not use addresses. So, in general, the value returned by <code>.hashCode()</code> and memory location are not related at all."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1701278533,"post_id":77573077,"comment_id":136756966,"body_markdown":"You can see the general contract of `.hashCode()` in the `Object#hashCode()` API: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode() . Note the connection between `~.hashCode()` and `~.equals (Object)`: If `~.equals (Object other)` returns `true`, then `this.hashCode()` and `other.hashCode()` should return the same value, even if they are in different locations.","body":"You can see the general contract of <code>.hashCode()</code> in the <code>Object#hashCode()</code> API: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode()\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a> . Note the connection between <code>~.hashCode()</code> and <code>~.equals (Object)</code>: If <code>~.equals (Object other)</code> returns <code>true</code>, then <code>this.hashCode()</code> and <code>other.hashCode()</code> should return the same value, even if they are in different locations."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1701278572,"post_id":77573077,"comment_id":136756973,"body_markdown":"The only case where `.hashCode()` *is* related to the memory address I know of is when `.hashCode()` is *not* overridden.  Even then, to use memory location or not is up to those who create the particular implementation of Java.","body":"The only case where <code>.hashCode()</code> <i>is</i> related to the memory address I know of is when <code>.hashCode()</code> is <i>not</i> overridden.  Even then, to use memory location or not is up to those who create the particular implementation of Java."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1701279237,"post_id":77573077,"comment_id":136757082,"body_markdown":"and BTW, `String` is one of the classes that overrides `hashCode()` - it is calculated based on the content of the `String` (as proved by output of posted code)","body":"and BTW, <code>String</code> is one of the classes that overrides <code>hashCode()</code> - it is calculated based on the content of the <code>String</code> (as proved by output of posted code)"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1701279991,"post_id":77573077,"comment_id":136757210,"body_markdown":"@OldDogProgrammer The identity hashcode of a non-overridden hashCode() method likely has nothing to do with memory addresses. In theory it could be implemented that way, but garbage collectors can and do move objects around in memory, so deriving the hashcode from a memory address would either result in an unstable identity hashcode, or in very low entropy of the identity hashcode.","body":"@OldDogProgrammer The identity hashcode of a non-overridden hashCode() method likely has nothing to do with memory addresses. In theory it could be implemented that way, but garbage collectors can and do move objects around in memory, so deriving the hashcode from a memory address would either result in an unstable identity hashcode, or in very low entropy of the identity hashcode."},{"owner":{"account_id":3009750,"reputation":757,"user_id":2553521,"display_name":"edwgiz"},"score":0,"creation_date":1701280614,"post_id":77573077,"comment_id":136757321,"body_markdown":"I&#39;m not sure the memory location matters cos a garbage collector can relocale any object. The default `hashCode` implementation in `Object` class reflects the memory address when the `hashCode` invoked at first time so further invocations returns that first value.\nAlso due to object relocation and hash code caching the different objects might have the same hash code despite it&#39;s impossible having the same memory address at one moment","body":"I&#39;m not sure the memory location matters cos a garbage collector can relocale any object. The default <code>hashCode</code> implementation in <code>Object</code> class reflects the memory address when the <code>hashCode</code> invoked at first time so further invocations returns that first value. Also due to object relocation and hash code caching the different objects might have the same hash code despite it&#39;s impossible having the same memory address at one moment"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1701280701,"post_id":77573077,"comment_id":136757345,"body_markdown":"@edwgiz The default hashcode in recent Java uses a random number generator, not the memory address.","body":"@edwgiz The default hashcode in recent Java uses a random number generator, not the memory address."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1701289072,"post_id":77573077,"comment_id":136758669,"body_markdown":"sidenote:  it never was a requirement that &quot;different objects&quot; have different hash code","body":"sidenote:  it never was a requirement that &quot;different objects&quot; have different hash code"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1701331267,"post_id":77573077,"comment_id":136763004,"body_markdown":"@user85421 But for proper performance of hash-based structures, it is highly recommended (you can configure Java to always use identity hashcode = 1 for every object if you really want to try)","body":"@user85421 But for proper performance of hash-based structures, it is highly recommended (you can configure Java to always use identity hashcode = 1 for every object if you really want to try)"}],"owner":{"account_id":30024237,"reputation":9,"user_id":23008883,"display_name":"RaviTeja"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1701278277,"answer_count":0,"score":-2,"last_activity_date":1701331436,"creation_date":1701276554,"question_id":77573077,"body_markdown":"How to identify which memory location each one refers to?\r\n\r\n*Strings.java* \r\n```\r\npublic class Strings {\r\n\r\n\tpublic static void main(String... strings) {\r\n\t\tString s1 = &quot;Code&quot;;\r\n\t\tString s2 = &quot;Code&quot;;\r\n\t\tString s3 = new String(&quot;Code&quot;);\r\n\t\tString s4 = new String(&quot;Code&quot;);\r\n\t\tStringBuffer s5 = new StringBuffer(&quot;Code&quot;);\r\n\r\n\t\tSystem.out.println(&quot;s1 : &quot; + s1.hashCode());\r\n\t\tSystem.out.println(&quot;s2 : &quot; + s2.hashCode());\r\n\t\tSystem.out.println(&quot;s3 : &quot; + s3.hashCode());\r\n\t\tSystem.out.println(&quot;s4 : &quot; + s4.hashCode());\r\n\t\tSystem.out.println(&quot;S5 : &quot; + s5.hashCode());\r\n\t}\r\n}\r\n```\r\n```\r\nOutput:\r\ns1 : 2105869\r\ns2 : 2105869\r\ns3 : 2105869\r\ns4 : 2105869\r\nS5 : 1365202186\r\n```","title":"Difference between HashCode and memory location","body":"<p>How to identify which memory location each one refers to?</p>\n<p><em>Strings.java</em></p>\n<pre><code>public class Strings {\n\n    public static void main(String... strings) {\n        String s1 = &quot;Code&quot;;\n        String s2 = &quot;Code&quot;;\n        String s3 = new String(&quot;Code&quot;);\n        String s4 = new String(&quot;Code&quot;);\n        StringBuffer s5 = new StringBuffer(&quot;Code&quot;);\n\n        System.out.println(&quot;s1 : &quot; + s1.hashCode());\n        System.out.println(&quot;s2 : &quot; + s2.hashCode());\n        System.out.println(&quot;s3 : &quot; + s3.hashCode());\n        System.out.println(&quot;s4 : &quot; + s4.hashCode());\n        System.out.println(&quot;S5 : &quot; + s5.hashCode());\n    }\n}\n</code></pre>\n<pre><code>Output:\ns1 : 2105869\ns2 : 2105869\ns3 : 2105869\ns4 : 2105869\nS5 : 1365202186\n</code></pre>\n"},{"tags":["java","eclipse","user-interface","swt"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1701292419,"post_id":77574002,"comment_id":136759182,"body_markdown":"Does `expandItem.getControl().setBackground(color)` work (see [`Item.getControl()`](https://help.eclipse.org/latest/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/ExpandItem.html#getControl%28%29) and [`Control.setBackground(Color color)`](https://help.eclipse.org/latest/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#setBackground%28org.eclipse.swt.graphics.Color%29)?","body":"Does <code>expandItem.getControl().setBackground(color)</code> work (see <a href=\"https://help.eclipse.org/latest/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/ExpandItem.html#getControl%28%29\" rel=\"nofollow noreferrer\"><code>Item.getControl()</code></a> and <a href=\"https://help.eclipse.org/latest/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#setBackground%28org.eclipse.swt.graphics.Color%29\" rel=\"nofollow noreferrer\"><code>Control.setBackground(Color color)</code></a>?"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1701331067,"post_id":77574002,"comment_id":136762975,"body_markdown":"Looking at `ExpandItem.drawItem` it doesn&#39;t support changing the colours.","body":"Looking at <code>ExpandItem.drawItem</code> it doesn&#39;t support changing the colours."}],"owner":{"account_id":13409229,"reputation":1,"user_id":9676316,"display_name":"Sachin S S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701331134,"creation_date":1701285892,"question_id":77574002,"body_markdown":"I am using expand bar in an eclipse application UI. The default color of expand bar item is light grey and I need to change the background color of expand bar item using SWT java.\r\n\r\nI have tried setting the background color of expand bar, but that&#39;ll change the overall background of expand bar ( dark grey in the image ). And setting the foreground color of expand bar, will change the text color. There is no method to set the background&amp; foreground color of expand bar item.\r\n\r\n\r\n[The color of expand bar is dark grey, which requires no change &amp; the expand bar item is light grey, which needs to be changed.](https://i.stack.imgur.com/jEqWt.png)\r\n\r\nThe code for setting expand bar &amp; it&#39;s item is as follows - \r\n   ```java\r\n    final ExpandBar expandBar = new ExpandBar(iconAndButtonComposite, SWT.V_SCROLL);\r\n\texpandBar.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));\r\n\tColor backgroundColor = parent.getBackground();\r\n\texpandBar.setBackground(backgroundColor);\r\n\r\n\tRGB color = new RGB(0, 114, 118);\r\n\tRGB grayColor = new RGB(230, 230, 230);\r\n\texpandBar.setForeground(new Color(parent.getDisplay(), color)); //This will set text color\r\n\texpandBar.setBackground(new Color(parent.getDisplay(), grayColor));\r\n\t\t\r\n\r\n\tfinal ExpandItem expandItem = new ExpandItem(expandBar, SWT.NONE);\r\n\texpandItem.setText(Constants.ODATAV2_EXPAND_ITEM);\r\n        odataV2Viewer = new SAPEntityViewerPage(odataV2Selection);\r\n\todataV2Viewer.generateCheckBoxViewer(expandBar, expandItem);\r\n\texpandItem.setExpanded(true);\r\n\r\n\tfinal ExpandItem expandItem1 = new ExpandItem(expandBar, SWT.NONE);\r\n\texpandItem1.setText(Constants.ODATAV4_EXPAND_ITEM);\r\n\texpandItem1.setExpanded(false);\r\n\todataV4Viewer = new SAPEntityViewerPage(odataV4Selection);\r\n\todataV4Viewer.generateCheckBoxViewer(expandBar, expandItem1);\r\n\r\n\tfinal ExpandItem expandItem2 = new ExpandItem(expandBar, SWT.NONE);\r\n\texpandItem2.setText(Constants.SOAP_EXPAND_ITEM);\r\n\tsoapViewer = new SAPEntityViewerPage(odataV4Selection);\r\n\tfilePath = soapViewer.generateSoapUploader(expandBar, expandItem2, wsdlFileMap);\r\n```\r\nI&#39;ve tried adding paint listner to expand item, but that didn&#39;t work. Any other way to set the background color of expand bar item ?\r\n","title":"Set color for SWT expand bar","body":"<p>I am using expand bar in an eclipse application UI. The default color of expand bar item is light grey and I need to change the background color of expand bar item using SWT java.</p>\n<p>I have tried setting the background color of expand bar, but that'll change the overall background of expand bar ( dark grey in the image ). And setting the foreground color of expand bar, will change the text color. There is no method to set the background&amp; foreground color of expand bar item.</p>\n<p><a href=\"https://i.stack.imgur.com/jEqWt.png\" rel=\"nofollow noreferrer\">The color of expand bar is dark grey, which requires no change &amp; the expand bar item is light grey, which needs to be changed.</a></p>\n<p>The code for setting expand bar &amp; it's item is as follows -</p>\n<pre class=\"lang-java prettyprint-override\"><code> final ExpandBar expandBar = new ExpandBar(iconAndButtonComposite, SWT.V_SCROLL);\n expandBar.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));\n Color backgroundColor = parent.getBackground();\n expandBar.setBackground(backgroundColor);\n\n RGB color = new RGB(0, 114, 118);\n RGB grayColor = new RGB(230, 230, 230);\n expandBar.setForeground(new Color(parent.getDisplay(), color)); //This will set text color\n expandBar.setBackground(new Color(parent.getDisplay(), grayColor));\n     \n\n final ExpandItem expandItem = new ExpandItem(expandBar, SWT.NONE);\n expandItem.setText(Constants.ODATAV2_EXPAND_ITEM);\n     odataV2Viewer = new SAPEntityViewerPage(odataV2Selection);\n odataV2Viewer.generateCheckBoxViewer(expandBar, expandItem);\n expandItem.setExpanded(true);\n\n final ExpandItem expandItem1 = new ExpandItem(expandBar, SWT.NONE);\n expandItem1.setText(Constants.ODATAV4_EXPAND_ITEM);\n expandItem1.setExpanded(false);\n odataV4Viewer = new SAPEntityViewerPage(odataV4Selection);\n odataV4Viewer.generateCheckBoxViewer(expandBar, expandItem1);\n\n final ExpandItem expandItem2 = new ExpandItem(expandBar, SWT.NONE);\n expandItem2.setText(Constants.SOAP_EXPAND_ITEM);\n soapViewer = new SAPEntityViewerPage(odataV4Selection);\n filePath = soapViewer.generateSoapUploader(expandBar, expandItem2, wsdlFileMap);\n</code></pre>\n<p>I've tried adding paint listner to expand item, but that didn't work. Any other way to set the background color of expand bar item ?</p>\n"},{"tags":["java","multithreading","intellij-idea","project-loom"],"comments":[{"owner":{"account_id":11179248,"reputation":11910,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1639023689,"post_id":70284048,"comment_id":124244225,"body_markdown":"Hi! JDK 18 is not yet released, the support will appear only in 2022.1.","body":"Hi! JDK 18 is not yet released, the support will appear only in 2022.1."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1640104754,"post_id":70284048,"comment_id":124514239,"body_markdown":"You have to add `-enablepreview` as JVM parameter to you run configuration.","body":"You have to add <code>-enablepreview</code> as JVM parameter to you run configuration."}],"answers":[{"comments":[{"owner":{"account_id":450787,"reputation":1364,"user_id":846300,"accept_rate":50,"display_name":"Lukas Hanacek"},"score":0,"creation_date":1676368219,"post_id":72117538,"comment_id":133118310,"body_markdown":"For gradle users, in addition to the points mentioned above I also had to add the code mentioned in https://stackoverflow.com/a/61849770/846300","body":"For gradle users, in addition to the points mentioned above I also had to add the code mentioned in <a href=\"https://stackoverflow.com/a/61849770/846300\">stackoverflow.com/a/61849770/846300</a>"}],"tags":[],"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651687271,"creation_date":1651687271,"answer_id":72117538,"question_id":70284048,"body_markdown":"What I had to do step by step.\r\n\r\n**Update to the IDE to the latest version**\r\n\r\n**Download a jvm with loom**\r\n\r\n**Add the loom JDK to the IDE**\r\n\r\n**Set it both to project and to your build tool**\r\n\r\n**Set enable preview and source to 19 as compiler options**\r\nto do this, got to prefs -&gt; compiler -&gt; java compiler, uncheck the --release option thing and add the following compiler args for specific project global\r\n\r\n    --enable-preview --source 19\r\n\r\nthese are directly passed to javac when it compiles\r\n\r\n**Set the enable preview on you run configuration**\r\nadd `--enable-preview` as a jvm option (if you don&#39;t see it click &#39;Modify options&#39;)\r\n\r\nYou should be good to go, I faced a bug where sometimes gradle complained that it is not compatible with my JVM, to resovle this I had to switch the gradle VM to java 17, wati for it to build and them back to 19\r\n\r\n\r\n\r\n\r\n ","title":"Run loom demo on IDEA","body":"<p>What I had to do step by step.</p>\n<p><strong>Update to the IDE to the latest version</strong></p>\n<p><strong>Download a jvm with loom</strong></p>\n<p><strong>Add the loom JDK to the IDE</strong></p>\n<p><strong>Set it both to project and to your build tool</strong></p>\n<p><strong>Set enable preview and source to 19 as compiler options</strong>\nto do this, got to prefs -&gt; compiler -&gt; java compiler, uncheck the --release option thing and add the following compiler args for specific project global</p>\n<pre><code>--enable-preview --source 19\n</code></pre>\n<p>these are directly passed to javac when it compiles</p>\n<p><strong>Set the enable preview on you run configuration</strong>\nadd <code>--enable-preview</code> as a jvm option (if you don't see it click 'Modify options')</p>\n<p>You should be good to go, I faced a bug where sometimes gradle complained that it is not compatible with my JVM, to resovle this I had to switch the gradle VM to java 17, wati for it to build and them back to 19</p>\n"},{"tags":[],"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701330880,"creation_date":1681036836,"answer_id":75970036,"question_id":70284048,"body_markdown":"I was able to run loom project by [JosePaumard][1]   \r\nThere are multiple steps as of now to make it work.\r\n\r\n1. Download suitable java version with all the feature you wanted to try.\r\n2. If it is using any build tools, make sure it is compatible with java version you are trying.\r\n3. build tool settings needs to be updated with JVM arguments e.g. for maven `export MAVEN_OPTS=&quot;--enable-preview --add-modules=jdk.incubator.concurrent --add-exports=java.base/jdk.internal.vm=ALL-UNNAMED&quot;` or in pom.xml file.\r\n4. set JAVA_HOME to proper JAVA version\r\n5. Intellij-Idea configs: Change JAVA_compiler configurations and each class runConfigurations\r\n6. Change Project level `SDK version` and set `language level` to preview features you need to test.\r\n7. Update to latest Intellij-idea IDE, verified with 2023.1 version\r\n\r\n[Ref](https://github.com/dineshbhagat/Loom_demo)\r\n\r\n-------------------------------------------------------------------\r\nLatest [Java 21][2] support for following frameworks and Kotlin\r\n- [SpringBoot 3.2][3]\r\n- Kotlin [1.9.20][4](but this has issue with kapt annotation processor), so better use [1.9.21][5]\r\n- Gradle version: [8.5][6]\r\n- Latest intellij-idea IDE version or after 2023.1\r\n\r\n\r\n  [1]: https://github.com/JosePaumard/Loom_demo\r\n  [2]: https://adoptium.net/\r\n  [3]: https://start.spring.io/\r\n  [4]: https://kotlinlang.org/docs/releases.html#release-details\r\n  [5]: https://github.com/JetBrains/kotlin/releases/tag/v1.9.21\r\n  [6]: https://docs.gradle.org/8.5/release-notes.html","title":"Run loom demo on IDEA","body":"<p>I was able to run loom project by <a href=\"https://github.com/JosePaumard/Loom_demo\" rel=\"nofollow noreferrer\">JosePaumard</a><br />\nThere are multiple steps as of now to make it work.</p>\n<ol>\n<li>Download suitable java version with all the feature you wanted to try.</li>\n<li>If it is using any build tools, make sure it is compatible with java version you are trying.</li>\n<li>build tool settings needs to be updated with JVM arguments e.g. for maven <code>export MAVEN_OPTS=&quot;--enable-preview --add-modules=jdk.incubator.concurrent --add-exports=java.base/jdk.internal.vm=ALL-UNNAMED&quot;</code> or in pom.xml file.</li>\n<li>set JAVA_HOME to proper JAVA version</li>\n<li>Intellij-Idea configs: Change JAVA_compiler configurations and each class runConfigurations</li>\n<li>Change Project level <code>SDK version</code> and set <code>language level</code> to preview features you need to test.</li>\n<li>Update to latest Intellij-idea IDE, verified with 2023.1 version</li>\n</ol>\n<p><a href=\"https://github.com/dineshbhagat/Loom_demo\" rel=\"nofollow noreferrer\">Ref</a></p>\n<hr />\n<p>Latest <a href=\"https://adoptium.net/\" rel=\"nofollow noreferrer\">Java 21</a> support for following frameworks and Kotlin</p>\n<ul>\n<li><a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">SpringBoot 3.2</a></li>\n<li>Kotlin <a href=\"https://kotlinlang.org/docs/releases.html#release-details\" rel=\"nofollow noreferrer\">1.9.20</a>(but this has issue with kapt annotation processor), so better use <a href=\"https://github.com/JetBrains/kotlin/releases/tag/v1.9.21\" rel=\"nofollow noreferrer\">1.9.21</a></li>\n<li>Gradle version: <a href=\"https://docs.gradle.org/8.5/release-notes.html\" rel=\"nofollow noreferrer\">8.5</a></li>\n<li>Latest intellij-idea IDE version or after 2023.1</li>\n</ul>\n"}],"owner":{"account_id":17840072,"reputation":107,"user_id":12958132,"display_name":"woxihuanxiayua"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":391,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1701330880,"creation_date":1639016994,"question_id":70284048,"body_markdown":"I want to run loom&#39;s demo, I downloaded jdk18-loom from [http://jdk.java.net/loom/][1], and downloaded the latest version of ```IDEA```:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nNo matter I choose ```X``` or ```17-preview```, the program cannot run, reports:\r\n```Executors.newVirtualThreadPerTaskExecutor() Is an API in a preview feature```.\r\n\r\nHow to solve it\r\n\r\n\r\n\r\n  [1]: http://jdk.java.net/loom/\r\n  [2]: https://i.stack.imgur.com/H5rxZ.png","title":"Run loom demo on IDEA","body":"<p>I want to run loom's demo, I downloaded jdk18-loom from <a href=\"http://jdk.java.net/loom/\" rel=\"nofollow noreferrer\">http://jdk.java.net/loom/</a>, and downloaded the latest version of <code>IDEA</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/H5rxZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H5rxZ.png\" alt=\"enter image description here\" /></a></p>\n<p>No matter I choose <code>X</code> or <code>17-preview</code>, the program cannot run, reports:\n<code>Executors.newVirtualThreadPerTaskExecutor() Is an API in a preview feature</code>.</p>\n<p>How to solve it</p>\n"},{"tags":["java","windows","registry"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1633685654,"post_id":69493490,"comment_id":122831117,"body_markdown":"What happens when you run that as Admin?","body":"What happens when you run that as Admin?"},{"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aram"},"score":0,"creation_date":1633686489,"post_id":69493490,"comment_id":122831441,"body_markdown":"The same result","body":"The same result"},{"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aram"},"score":0,"creation_date":1633687508,"post_id":69493490,"comment_id":122831821,"body_markdown":"Correct, it also fails","body":"Correct, it also fails"}],"answers":[{"tags":[],"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634025692,"creation_date":1634025692,"answer_id":69536982,"question_id":69493490,"body_markdown":"I have found the solution:\r\n\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.StringWriter;\r\n    \r\n    public class ReadRegistry\r\n    {\r\n        public static final String readRegistry(String location, String key){\r\n            try {\r\n                // Run reg query, then read output with StreamReader (internal class)\r\n                Process process = Runtime.getRuntime().exec(&quot;reg query &quot; +\r\n                        &#39;&quot;&#39;+ location + &quot;\\&quot; /v &quot; + key);\r\n    \r\n                StreamReader reader = new StreamReader(process.getInputStream());\r\n                reader.start();\r\n                process.waitFor();\r\n                reader.join();\r\n    \r\n                // Parse out the value\r\n                // String[] parsed = reader.getResult().split(&quot;\\\\s+&quot;);\r\n    \r\n                String s1[];\r\n                try{\r\n                 s1=reader.getResult().split(&quot;REG_SZ|REG_DWORD&quot;);\r\n                }\r\n                catch(Exception e)\r\n                {\r\n                    return &quot; &quot;;\r\n                }\r\n               //MK System.out.println(s1[1].trim());\r\n    \r\n                return s1[1].trim();\r\n            } catch (Exception e) {\r\n            }\r\n    \r\n            return null;\r\n        }\r\n         static class StreamReader extends Thread {\r\n            private InputStream is;\r\n            private StringWriter sw= new StringWriter();\r\n    \r\n            public StreamReader(InputStream is) {\r\n                this.is = is;\r\n            }\r\n    \r\n            public void run() {\r\n                try {\r\n                    int c;\r\n                    while ((c = is.read()) != -1)\r\n                        //System.out.println(c);\r\n                        sw.write(c);\r\n                } catch (IOException e) {\r\n                }\r\n            }\r\n    \r\n            public String getResult() {\r\n                return sw.toString();\r\n            }\r\n        }\r\n    }\r\n\r\nYou have to use it like this:\r\n\r\n    \r\n\r\n    Registry2.readRegistry(&quot;HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\LanmanWorkstation\\\\Parameters&quot;, &quot;EnableSecuritySignature&quot;);\r\n\r\nThe class was taken from [here][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5133309/reading-dword-from-windows-registry","title":"How to read integer value from Windows registry using Java?","body":"<p>I have found the solution:</p>\n<pre><code>import java.io.IOException;\nimport java.io.InputStream;\nimport java.io.StringWriter;\n\npublic class ReadRegistry\n{\n    public static final String readRegistry(String location, String key){\n        try {\n            // Run reg query, then read output with StreamReader (internal class)\n            Process process = Runtime.getRuntime().exec(&quot;reg query &quot; +\n                    '&quot;'+ location + &quot;\\&quot; /v &quot; + key);\n\n            StreamReader reader = new StreamReader(process.getInputStream());\n            reader.start();\n            process.waitFor();\n            reader.join();\n\n            // Parse out the value\n            // String[] parsed = reader.getResult().split(&quot;\\\\s+&quot;);\n\n            String s1[];\n            try{\n             s1=reader.getResult().split(&quot;REG_SZ|REG_DWORD&quot;);\n            }\n            catch(Exception e)\n            {\n                return &quot; &quot;;\n            }\n           //MK System.out.println(s1[1].trim());\n\n            return s1[1].trim();\n        } catch (Exception e) {\n        }\n\n        return null;\n    }\n     static class StreamReader extends Thread {\n        private InputStream is;\n        private StringWriter sw= new StringWriter();\n\n        public StreamReader(InputStream is) {\n            this.is = is;\n        }\n\n        public void run() {\n            try {\n                int c;\n                while ((c = is.read()) != -1)\n                    //System.out.println(c);\n                    sw.write(c);\n            } catch (IOException e) {\n            }\n        }\n\n        public String getResult() {\n            return sw.toString();\n        }\n    }\n}\n</code></pre>\n<p>You have to use it like this:</p>\n<pre><code>Registry2.readRegistry(&quot;HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\LanmanWorkstation\\\\Parameters&quot;, &quot;EnableSecuritySignature&quot;);\n</code></pre>\n<p>The class was taken from <a href=\"https://stackoverflow.com/questions/5133309/reading-dword-from-windows-registry\">here</a>.</p>\n"}],"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aram"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":686,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69536982,"answer_count":1,"score":1,"last_activity_date":1701330751,"creation_date":1633684866,"question_id":69493490,"body_markdown":"I have found the first reply on this question:\r\n[https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java/63231][1]\r\n\r\nI have copied the class from the reply and used it.\r\n\r\nThis sample code works:\r\n\r\n    String value = WinRegistry.readString (\r\n        WinRegistry.HKEY_LOCAL_MACHINE,                             //HKEY\r\n       &quot;SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion&quot;,           //Key\r\n       &quot;ProductName&quot;);                                              //ValueName\r\n        System.out.println(&quot;Windows Distribution = &quot; + value);\r\n\r\nHowever, when I try to run:\r\n\r\n    String value = WinRegistry.readString(\r\n                    WinRegistry.HKEY_LOCAL_MACHINE,                             //HKEY\r\n                    &quot;SYSTEM\\\\CurrentControlSet\\\\Services\\\\LanmanWorkstation\\\\Parameters&quot;,           //Key\r\n                    &quot;EnableSecuritySignature&quot;);                                              //ValueName\r\n            System.out.println(value);\r\n\r\nI get null.\r\n\r\n[screen from my registry editor of the component I have to read][2]\r\n\r\nI have to read the date value of EnableSecuritySignature.\r\n\r\nDoes someone know what could be the problem?\r\nSorry for lack of details in my description, I am in hurry))\r\n\r\n  [1]: https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java/63231\r\n  [2]: https://i.stack.imgur.com/Jquok.jpg","title":"How to read integer value from Windows registry using Java?","body":"<p>I have found the first reply on this question:\n<a href=\"https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java/63231\">Read/write to Windows registry using Java</a></p>\n<p>I have copied the class from the reply and used it.</p>\n<p>This sample code works:</p>\n<pre><code>String value = WinRegistry.readString (\n    WinRegistry.HKEY_LOCAL_MACHINE,                             //HKEY\n   &quot;SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion&quot;,           //Key\n   &quot;ProductName&quot;);                                              //ValueName\n    System.out.println(&quot;Windows Distribution = &quot; + value);\n</code></pre>\n<p>However, when I try to run:</p>\n<pre><code>String value = WinRegistry.readString(\n                WinRegistry.HKEY_LOCAL_MACHINE,                             //HKEY\n                &quot;SYSTEM\\\\CurrentControlSet\\\\Services\\\\LanmanWorkstation\\\\Parameters&quot;,           //Key\n                &quot;EnableSecuritySignature&quot;);                                              //ValueName\n        System.out.println(value);\n</code></pre>\n<p>I get null.</p>\n<p><a href=\"https://i.stack.imgur.com/Jquok.jpg\" rel=\"nofollow noreferrer\">screen from my registry editor of the component I have to read</a></p>\n<p>I have to read the date value of EnableSecuritySignature.</p>\n<p>Does someone know what could be the problem?\nSorry for lack of details in my description, I am in hurry))</p>\n"},{"tags":["java","constructor","veracode"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1701332030,"post_id":77576720,"comment_id":136763123,"body_markdown":"You shouldn&#39;t be using a &quot;finally&quot; block , finally is only used doing a &quot;try with resources&quot;","body":"You shouldn&#39;t be using a &quot;finally&quot; block , finally is only used doing a &quot;try with resources&quot;"},{"owner":{"account_id":3187272,"reputation":3749,"user_id":5362244,"accept_rate":74,"display_name":"dhS"},"score":0,"creation_date":1701337694,"post_id":77576720,"comment_id":136764067,"body_markdown":"without finally is also the code is giving the issue","body":"without finally is also the code is giving the issue"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1701350273,"post_id":77576720,"comment_id":136766383,"body_markdown":"Why not simply move m_objReader.close(); into either a method or put that at the end of the run() method or simply after the while? It only requires a try java.io.IOException to be caught.","body":"Why not simply move m_objReader.close(); into either a method or put that at the end of the run() method or simply after the while? It only requires a try java.io.IOException to be caught."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1701350447,"post_id":77576720,"comment_id":136766410,"body_markdown":"Sorry, i missed something , the BufferedReader probably should not be final, that seems to me a very useless declaration. (package private is probably enough). As that is , it would not be able to be removed except by the class it is in being destroyed!","body":"Sorry, i missed something , the BufferedReader probably should not be final, that seems to me a very useless declaration. (package private is probably enough). As that is , it would not be able to be removed except by the class it is in being destroyed!"}],"owner":{"account_id":3187272,"reputation":3749,"user_id":5362244,"accept_rate":74,"display_name":"dhS"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701330720,"creation_date":1701330720,"question_id":77576720,"body_markdown":"I have this class in which there is a veracode issue comes up at some line ... I have given the solution but still it is not disappearing. The issue is :\r\n\r\n**Improper Resource Shutdown or Release** at line \r\n\r\nthis.m_objReader = new BufferedReader(new InputStreamReader(p_objIs));\r\n\r\n    public class InputStreamReaderRunnable implements Runnable {\r\n    \r\n    \t/** Logger object. */\r\n    \tprivate static final Logger LOGGER = LoggerFactory.getLogger(Logging.class);\r\n    \r\n    \t/** m_objReader. */\r\n    \tprivate final BufferedReader m_objReader;\r\n    \r\n    \t/** name. */\r\n    \tprivate final String name;\r\n    \r\n    \tpublic InputStreamReaderRunnable(InputStream p_objIs, String p_sName) {\r\n    \t\tthis.m_objReader = new BufferedReader(new InputStreamReader(p_objIs));\r\n    \t\tthis.name = p_sName;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * run method.\r\n    \t */\r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\ttry {\r\n    \t\t\tString l_sLine = m_objReader.readLine();\r\n    \t\t\twhile (l_sLine != null) {\r\n    \t\t\t\tl_sLine = m_objReader.readLine();\r\n    \t\t\t}\r\n    \t\t} catch (IOException e) {\r\n    \t\t\tLOGGER.info(&quot;Error at run&quot;, e);\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\ttry {\r\n    \t\t\t\tm_objReader.close();\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\tLOGGER.info(&quot;Error at closing connection&quot;, e);\r\n    \t\t\t}\r\n    \t\t\t}\r\n    \t}\r\n\r\n}\r\n\r\n\r\nclosing the connection in finally block\r\nm_objReader.close(); but the issue is not fixing in scan","title":"Veracode issue Improper Resource Shutdown or Release","body":"<p>I have this class in which there is a veracode issue comes up at some line ... I have given the solution but still it is not disappearing. The issue is :</p>\n<p><strong>Improper Resource Shutdown or Release</strong> at line</p>\n<p>this.m_objReader = new BufferedReader(new InputStreamReader(p_objIs));</p>\n<pre><code>public class InputStreamReaderRunnable implements Runnable {\n\n    /** Logger object. */\n    private static final Logger LOGGER = LoggerFactory.getLogger(Logging.class);\n\n    /** m_objReader. */\n    private final BufferedReader m_objReader;\n\n    /** name. */\n    private final String name;\n\n    public InputStreamReaderRunnable(InputStream p_objIs, String p_sName) {\n        this.m_objReader = new BufferedReader(new InputStreamReader(p_objIs));\n        this.name = p_sName;\n    }\n\n    /**\n     * run method.\n     */\n    @Override\n    public void run() {\n        try {\n            String l_sLine = m_objReader.readLine();\n            while (l_sLine != null) {\n                l_sLine = m_objReader.readLine();\n            }\n        } catch (IOException e) {\n            LOGGER.info(&quot;Error at run&quot;, e);\n        }\n        finally {\n            try {\n                m_objReader.close();\n            } catch (IOException e) {\n                LOGGER.info(&quot;Error at closing connection&quot;, e);\n            }\n            }\n    }\n</code></pre>\n<p>}</p>\n<p>closing the connection in finally block\nm_objReader.close(); but the issue is not fixing in scan</p>\n"},{"tags":["java","json","logback","slf4j","logstash-logback-encoder"],"answers":[{"tags":[],"owner":{"account_id":3439629,"reputation":111,"user_id":2881869,"display_name":"dmaidaniuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701330652,"creation_date":1701330652,"answer_id":77576712,"question_id":68895869,"body_markdown":"In the following blog post [here][1] described how to make workaround for supporting MDC values in JSON LogstashEncoder.\r\n\r\nSo, you have the next Logback config:\r\n\r\n    &lt;!-- logback-access.xml --&gt; \r\n    &lt;configuration&gt;\r\n        &lt;appender name=&quot;ACCESS_STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashAccessEncoder&quot;&gt;\r\n                ... config ...\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n        &lt;appender-ref ref=&quot;ACCESS_STDOUT&quot;/&gt;\r\n    &lt;/configuration&gt;\r\n\r\nIf more customization is what you need, then you can use the [AccessEventCompositeJsonEncoder][2], where you specify the JSON template under &lt;pattern&gt; using the [conversion specifiers][3] for the logback layout.\r\n\r\n    &lt;configuration&gt;\r\n    &lt;appender name=&quot;ACCESS_STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder class=&quot;net.logstash.logback.encoder.AccessEventCompositeJsonEncoder&quot;&gt;\r\n            &lt;providers&gt;\r\n                &lt;timestamp /&gt;\r\n                &lt;pattern&gt;\r\n                    &lt;pattern&gt;\r\n                      {\r\n                        &quot;yourField&quot;: {\r\n                            &quot;yourNestedField&quot;: &quot;%reqAttribute{abc}&quot;\r\n                        },\r\n                        &quot;http&quot;: {\r\n                            &quot;path&quot; : &quot;%requestURI&quot;\r\n                        }\r\n                        &quot;@version&quot; : &quot;2023-01-03&quot;,\r\n                        &quot;@type&quot; : &quot;access&quot;\r\n                      }\r\n                    &lt;/pattern&gt;\r\n                &lt;/pattern&gt;\r\n            &lt;/providers&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n    &lt;appender-ref ref=&quot;ACCESS_STDOUT&quot;/&gt;\r\n&lt;/configuration&gt;\r\n\r\nMDC is not unfortunately supported in the current version, but one way to solve is creating a filter that sets the data as a request attribute in addition to MDC. See the example below the adds the abc request attribute that is read by the config above.\r\n\r\n    import javax.servlet.Filter;\r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.ServletRequest;\r\n    import javax.servlet.ServletResponse;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    @Component\r\n    public class MDCXRequestIdLoggingFilter implements Filter {\r\n        public void doFilter(ServletRequest request,\r\n                             ServletResponse response,\r\n                             FilterChain filterChain) throws IOException, ServletException {\r\n            if (request instanceof HttpServletRequest httpServletRequest\r\n                &amp;&amp; response instanceof HttpServletResponse httpServletResponse) {\r\n                \r\n                var abcValue = &quot;SET ME&quot;;\r\n               \r\n                MDC.put(&quot;abc&quot;, abcValue);\r\n                httpServletRequest.setAttribute(&quot;abc&quot;, abcValue);\r\n            }\r\n    \r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\nIf the code sets first value and then second value, that will be the output in the access logs\r\n\r\n    {\r\n  \r\n\r\n    &quot;yourField&quot;: {\r\n        &quot;yourNestedField&quot;: &quot;first value&quot;\r\n      },\r\n      &quot;http&quot;: {\r\n        &quot;path&quot; : &quot;/&quot;\r\n      },\r\n      &quot;@version&quot; : &quot;2023-01-03&quot;,\r\n      &quot;@type&quot; : &quot;access&quot;\r\n    }\r\n    {\r\n      &quot;yourField&quot;: {\r\n        &quot;yourNestedField&quot;: &quot;second value&quot;\r\n      },\r\n      &quot;http&quot;: {\r\n        &quot;path&quot; : &quot;/&quot;\r\n      },\r\n      &quot;@version&quot; : &quot;2023-01-03&quot;,\r\n      &quot;@type&quot; : &quot;access&quot;\r\n    }\r\n\r\n  [1]: https://elvisciotti.medium.com/spring-logback-access-logs-with-custom-json-format-and-a-workaround-to-read-mdc-b397b90a05aa\r\n  [2]: https://github.com/logfellow/logstash-logback-encoder#composite-encoderlayout\r\n  [3]: https://logback.qos.ch/manual/layouts.html#AccessPatternLayout\r\n","title":"Typed JSON output with Logback&#39;s Mapped Diagnostic Context","body":"<p>In the following blog post <a href=\"https://elvisciotti.medium.com/spring-logback-access-logs-with-custom-json-format-and-a-workaround-to-read-mdc-b397b90a05aa\" rel=\"nofollow noreferrer\">here</a> described how to make workaround for supporting MDC values in JSON LogstashEncoder.</p>\n<p>So, you have the next Logback config:</p>\n<pre><code>&lt;!-- logback-access.xml --&gt; \n&lt;configuration&gt;\n    &lt;appender name=&quot;ACCESS_STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashAccessEncoder&quot;&gt;\n            ... config ...\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;appender-ref ref=&quot;ACCESS_STDOUT&quot;/&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>If more customization is what you need, then you can use the <a href=\"https://github.com/logfellow/logstash-logback-encoder#composite-encoderlayout\" rel=\"nofollow noreferrer\">AccessEventCompositeJsonEncoder</a>, where you specify the JSON template under  using the <a href=\"https://logback.qos.ch/manual/layouts.html#AccessPatternLayout\" rel=\"nofollow noreferrer\">conversion specifiers</a> for the logback layout.</p>\n<pre><code>&lt;configuration&gt;\n&lt;appender name=&quot;ACCESS_STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder class=&quot;net.logstash.logback.encoder.AccessEventCompositeJsonEncoder&quot;&gt;\n        &lt;providers&gt;\n            &lt;timestamp /&gt;\n            &lt;pattern&gt;\n                &lt;pattern&gt;\n                  {\n                    &quot;yourField&quot;: {\n                        &quot;yourNestedField&quot;: &quot;%reqAttribute{abc}&quot;\n                    },\n                    &quot;http&quot;: {\n                        &quot;path&quot; : &quot;%requestURI&quot;\n                    }\n                    &quot;@version&quot; : &quot;2023-01-03&quot;,\n                    &quot;@type&quot; : &quot;access&quot;\n                  }\n                &lt;/pattern&gt;\n            &lt;/pattern&gt;\n        &lt;/providers&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n&lt;appender-ref ref=&quot;ACCESS_STDOUT&quot;/&gt;\n</code></pre>\n\n<p>MDC is not unfortunately supported in the current version, but one way to solve is creating a filter that sets the data as a request attribute in addition to MDC. See the example below the adds the abc request attribute that is read by the config above.</p>\n<pre><code>import javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@Component\npublic class MDCXRequestIdLoggingFilter implements Filter {\n    public void doFilter(ServletRequest request,\n                         ServletResponse response,\n                         FilterChain filterChain) throws IOException, ServletException {\n        if (request instanceof HttpServletRequest httpServletRequest\n            &amp;&amp; response instanceof HttpServletResponse httpServletResponse) {\n            \n            var abcValue = &quot;SET ME&quot;;\n           \n            MDC.put(&quot;abc&quot;, abcValue);\n            httpServletRequest.setAttribute(&quot;abc&quot;, abcValue);\n        }\n\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>If the code sets first value and then second value, that will be the output in the access logs</p>\n<pre><code>{\n\n\n&quot;yourField&quot;: {\n    &quot;yourNestedField&quot;: &quot;first value&quot;\n  },\n  &quot;http&quot;: {\n    &quot;path&quot; : &quot;/&quot;\n  },\n  &quot;@version&quot; : &quot;2023-01-03&quot;,\n  &quot;@type&quot; : &quot;access&quot;\n}\n{\n  &quot;yourField&quot;: {\n    &quot;yourNestedField&quot;: &quot;second value&quot;\n  },\n  &quot;http&quot;: {\n    &quot;path&quot; : &quot;/&quot;\n  },\n  &quot;@version&quot; : &quot;2023-01-03&quot;,\n  &quot;@type&quot; : &quot;access&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":437929,"reputation":3594,"user_id":825879,"accept_rate":33,"display_name":"Martin Foot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1251,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1701330652,"creation_date":1629735135,"question_id":68895869,"body_markdown":"Our applications use SLF4J&#39;s MDC and Logback&#39;s JSON encoder to write log lines as JSON. These lines are then processed by a log shipping pipeline and written to ElasticSearch as documents. They have `logback.xml` file that looks like this:\r\n\r\n```xml\r\n&lt;configuration&gt;\r\n  &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n    &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;&gt;\r\n      &lt;provider class=&quot;net.logstash.logback.composite.loggingevent.ArgumentsJsonProvider&quot;/&gt;\r\n    &lt;/encoder&gt;\r\n  &lt;/appender&gt;\r\n\r\n  &lt;root level=&quot;INFO&quot;&gt;\r\n    &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n  &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nAnd the MDC is used like this:\r\n\r\n```java\r\nMDC.put(&quot;stringVal&quot;, &quot;val&quot;);\r\nMDC.put(&quot;decimalVal&quot;, &quot;1.23&quot;);\r\nMDC.put(&quot;longVal&quot;, &quot;123498559348792879267942876&quot;);\r\nlogger.info(&quot;foo&quot;);\r\n```\r\n\r\nThe problem is that the interface for the MDC is `void put(String key, String val)`, such that all values must be strings or autoboxable to strings. This, then, produces the following log:\r\n\r\n```json\r\n{&quot;@timestamp&quot;:&quot;2021-08-23T16:32:04.231+01:00&quot;,&quot;@version&quot;:1,&quot;message&quot;:&quot;foo&quot;,&quot;logger_name&quot;:&quot;MDCTest&quot;,&quot;thread_name&quot;:&quot;main&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;level_value&quot;:20000,&quot;stringVal&quot;:&quot;val&quot;,&quot;decimalVal&quot;:&quot;1.23&quot;,&quot;longVal&quot;:&quot;123498559348792879267942876&quot;}\r\n```\r\n\r\nThe string typed `decimalVal` and `longVal` then get picked up as string-typed in Elasticsearch using an automatic type mapping and we then cannot perform numeric operations on them.\r\n\r\nIn this case these numeric values are largely coming from the abuse of logs to ship metrics, but this conflation is being dealt with elsewhere.\r\n\r\nI would prefer to not force developers to have to update the Elasticsearch Index Template or write configuration for the log shipping pipeline when they add more logs and so I have been looking for a way of doing this automatically. I have produced an implementation that works by replacing the internals of the Logback `Encoder` and `Formatter` in order to switch the `MdcJsonProvider`, the class that&#39;s responsible for serialising the MDC to JSON. This feels both extremely brittle and non-performant.\r\n\r\nIs there a more elegant method of doing this, or a different way to get the same effect? I have looked at `ch.qos.logback.contrib.jackson.JacksonJsonFormatter` but I would still need to list numeric MDC properties in the logback file which I&#39;m trying to avoid.\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.math.BigDecimal;\r\nimport java.math.BigInteger;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Optional;\r\n\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.google.common.collect.Maps;\r\n\r\nimport ch.qos.logback.classic.spi.ILoggingEvent;\r\nimport ch.qos.logback.core.spi.ContextAware;\r\nimport net.logstash.logback.LogstashFormatter;\r\nimport net.logstash.logback.composite.CompositeJsonFormatter;\r\nimport net.logstash.logback.composite.JsonProvider;\r\nimport net.logstash.logback.composite.JsonWritingUtils;\r\nimport net.logstash.logback.composite.loggingevent.MdcJsonProvider;\r\nimport net.logstash.logback.encoder.LogstashEncoder;\r\n\r\n/**\r\n * This class is a hack.\r\n *\r\n * It exists because Logback&#39;s MDC interface is a map from String to String, and this cannot\r\n * be changed. Instead, we must modify the logger itself to check if any of the String values\r\n * appear numeric and then log them as such.\r\n *\r\n * This is necessary since we ship the documents directly to ElasticSearch. As such, be warned\r\n * that you may have mapping conflict issues if the type for any given key fluctuates or if you\r\n * occasionally write strings that are fully numeric.\r\n *\r\n * This class implements an Encoder, a Formatter, and a JsonProvider that work together. The\r\n * encoder specifies the formatter, and the formatter works by swapping out the MdcJsonProvider\r\n * implementation normally used to serialise the MDC values with another implementation with tries\r\n * to log them as numbers.\r\n *\r\n * Using this class has a cost. It will result in more short-lived object creation, so it is not\r\n * suitable for high frequency logging.\r\n */\r\npublic class JsonMdcTypePreservingEncoder extends LogstashEncoder {\r\n\tprotected CompositeJsonFormatter&lt;ILoggingEvent&gt; createFormatter() {\r\n\t\treturn new JsonMdcTypePreservingFormatter(this);\r\n\t}\r\n\r\n\tprotected JsonMdcTypePreservingFormatter getFormatter() {\r\n\t\treturn (JsonMdcTypePreservingFormatter) super.getFormatter();\r\n\t}\r\n\r\n\t/**\r\n\t * This class exists to remove the default MdcJsonProvider, responsible for logging the MDC\r\n\t * section as JSON, and swap it out for the custom one.\r\n\t */\r\n\tpublic static class JsonMdcTypePreservingFormatter extends LogstashFormatter {\r\n\t\tpublic JsonMdcTypePreservingFormatter(ContextAware declaredOrigin) {\r\n\t\t\tsuper(declaredOrigin);\r\n\r\n\t\t\tOptional&lt;JsonProvider&lt;ILoggingEvent&gt;&gt; oldProvider = getProviders().getProviders()\r\n\t\t\t\t\t.stream()\r\n\t\t\t\t\t.filter(o -&gt; o.getClass() == MdcJsonProvider.class)\r\n\t\t\t\t\t.findFirst();\r\n\r\n\t\t\tif (oldProvider.isPresent()) {\r\n\t\t\t\tgetProviders().removeProvider(oldProvider.get());\r\n\t\t\t\tgetProviders().addProvider(new TypePreservingMdcJsonProvider());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * This class contains a duplicate of MdcJsonProvider.writeTo but with a small change.\r\n\t\t * Instead of taking the MDC Map&lt;String, String&gt; and logging it, it produces a modified\r\n\t\t * Map&lt;String, Object&gt; that potentially contains BigDecimal or BigInteger types alongside\r\n\t\t * Strings and serialises those instead.\r\n\t\t *\r\n\t\t * The only new code in this method is the call to getStringObjectMap.\r\n\t\t */\r\n\t\tpublic static class TypePreservingMdcJsonProvider extends MdcJsonProvider {\r\n\t\t\tprivate Map&lt;String, Object&gt; convertedProperties = Maps.newHashMap();\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void writeTo(JsonGenerator generator, ILoggingEvent event) throws IOException {\r\n\t\t\t\tMap&lt;String, String&gt; mdcProperties = event.getMDCPropertyMap();\r\n\r\n\t\t\t\tif (mdcProperties != null &amp;&amp; !mdcProperties.isEmpty()) {\r\n\t\t\t\t\tif (getFieldName() != null) {\r\n\t\t\t\t\t\tgenerator.writeObjectFieldStart(getFieldName());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!getIncludeMdcKeyNames().isEmpty()) {\r\n\t\t\t\t\t\tmdcProperties = new HashMap(mdcProperties);\r\n\t\t\t\t\t\t((Map) mdcProperties).keySet().retainAll(getIncludeMdcKeyNames());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!getExcludeMdcKeyNames().isEmpty()) {\r\n\t\t\t\t\t\tmdcProperties = new HashMap(mdcProperties);\r\n\t\t\t\t\t\t((Map) mdcProperties).keySet().removeAll(getExcludeMdcKeyNames());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tMap&lt;String, Object&gt; convertedProperties = getStringObjectMap(mdcProperties);\r\n\r\n\t\t\t\t\tJsonWritingUtils.writeMapEntries(generator, convertedProperties);\r\n\t\t\t\t\tif (getFieldName() != null) {\r\n\t\t\t\t\t\tgenerator.writeEndObject();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tprivate Map&lt;String, Object&gt; getStringObjectMap(Map&lt;String, String&gt; mdcProperties) {\r\n\t\t\t\tconvertedProperties.clear();\r\n\r\n\t\t\t\tfor (String key : mdcProperties.keySet()) {\r\n\t\t\t\t\tString value = mdcProperties.get(key);\r\n\r\n\t\t\t\t\t// If the majority of MDC values are not numbers, this prevents unnecessary\r\n\t\t\t\t\t// parsing steps but adds a character-wise inspection per value.\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tBigInteger parsed = new BigInteger(value);\r\n\t\t\t\t\t\tconvertedProperties.put(key, parsed);\r\n\t\t\t\t\t} catch (NumberFormatException e) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tBigDecimal parsed = new BigDecimal(vlue);\r\n\t\t\t\t\t\t\tconvertedProperties.put(key, parsed);\r\n\t\t\t\t\t\t} catch (NumberFormatException f) {\r\n\t\t\t\t\t\t\t// No-op\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!convertedProperties.containsKey(key)) {\r\n\t\t\t\t\t\tconvertedProperties.put(key, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn convertedProperties;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nThanks for any advice!","title":"Typed JSON output with Logback&#39;s Mapped Diagnostic Context","body":"<p>Our applications use SLF4J's MDC and Logback's JSON encoder to write log lines as JSON. These lines are then processed by a log shipping pipeline and written to ElasticSearch as documents. They have <code>logback.xml</code> file that looks like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n  &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;&gt;\n      &lt;provider class=&quot;net.logstash.logback.composite.loggingevent.ArgumentsJsonProvider&quot;/&gt;\n    &lt;/encoder&gt;\n  &lt;/appender&gt;\n\n  &lt;root level=&quot;INFO&quot;&gt;\n    &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n  &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>And the MDC is used like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MDC.put(&quot;stringVal&quot;, &quot;val&quot;);\nMDC.put(&quot;decimalVal&quot;, &quot;1.23&quot;);\nMDC.put(&quot;longVal&quot;, &quot;123498559348792879267942876&quot;);\nlogger.info(&quot;foo&quot;);\n</code></pre>\n<p>The problem is that the interface for the MDC is <code>void put(String key, String val)</code>, such that all values must be strings or autoboxable to strings. This, then, produces the following log:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;@timestamp&quot;:&quot;2021-08-23T16:32:04.231+01:00&quot;,&quot;@version&quot;:1,&quot;message&quot;:&quot;foo&quot;,&quot;logger_name&quot;:&quot;MDCTest&quot;,&quot;thread_name&quot;:&quot;main&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;level_value&quot;:20000,&quot;stringVal&quot;:&quot;val&quot;,&quot;decimalVal&quot;:&quot;1.23&quot;,&quot;longVal&quot;:&quot;123498559348792879267942876&quot;}\n</code></pre>\n<p>The string typed <code>decimalVal</code> and <code>longVal</code> then get picked up as string-typed in Elasticsearch using an automatic type mapping and we then cannot perform numeric operations on them.</p>\n<p>In this case these numeric values are largely coming from the abuse of logs to ship metrics, but this conflation is being dealt with elsewhere.</p>\n<p>I would prefer to not force developers to have to update the Elasticsearch Index Template or write configuration for the log shipping pipeline when they add more logs and so I have been looking for a way of doing this automatically. I have produced an implementation that works by replacing the internals of the Logback <code>Encoder</code> and <code>Formatter</code> in order to switch the <code>MdcJsonProvider</code>, the class that's responsible for serialising the MDC to JSON. This feels both extremely brittle and non-performant.</p>\n<p>Is there a more elegant method of doing this, or a different way to get the same effect? I have looked at <code>ch.qos.logback.contrib.jackson.JacksonJsonFormatter</code> but I would still need to list numeric MDC properties in the logback file which I'm trying to avoid.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.math.BigDecimal;\nimport java.math.BigInteger;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Optional;\n\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.google.common.collect.Maps;\n\nimport ch.qos.logback.classic.spi.ILoggingEvent;\nimport ch.qos.logback.core.spi.ContextAware;\nimport net.logstash.logback.LogstashFormatter;\nimport net.logstash.logback.composite.CompositeJsonFormatter;\nimport net.logstash.logback.composite.JsonProvider;\nimport net.logstash.logback.composite.JsonWritingUtils;\nimport net.logstash.logback.composite.loggingevent.MdcJsonProvider;\nimport net.logstash.logback.encoder.LogstashEncoder;\n\n/**\n * This class is a hack.\n *\n * It exists because Logback's MDC interface is a map from String to String, and this cannot\n * be changed. Instead, we must modify the logger itself to check if any of the String values\n * appear numeric and then log them as such.\n *\n * This is necessary since we ship the documents directly to ElasticSearch. As such, be warned\n * that you may have mapping conflict issues if the type for any given key fluctuates or if you\n * occasionally write strings that are fully numeric.\n *\n * This class implements an Encoder, a Formatter, and a JsonProvider that work together. The\n * encoder specifies the formatter, and the formatter works by swapping out the MdcJsonProvider\n * implementation normally used to serialise the MDC values with another implementation with tries\n * to log them as numbers.\n *\n * Using this class has a cost. It will result in more short-lived object creation, so it is not\n * suitable for high frequency logging.\n */\npublic class JsonMdcTypePreservingEncoder extends LogstashEncoder {\n    protected CompositeJsonFormatter&lt;ILoggingEvent&gt; createFormatter() {\n        return new JsonMdcTypePreservingFormatter(this);\n    }\n\n    protected JsonMdcTypePreservingFormatter getFormatter() {\n        return (JsonMdcTypePreservingFormatter) super.getFormatter();\n    }\n\n    /**\n     * This class exists to remove the default MdcJsonProvider, responsible for logging the MDC\n     * section as JSON, and swap it out for the custom one.\n     */\n    public static class JsonMdcTypePreservingFormatter extends LogstashFormatter {\n        public JsonMdcTypePreservingFormatter(ContextAware declaredOrigin) {\n            super(declaredOrigin);\n\n            Optional&lt;JsonProvider&lt;ILoggingEvent&gt;&gt; oldProvider = getProviders().getProviders()\n                    .stream()\n                    .filter(o -&gt; o.getClass() == MdcJsonProvider.class)\n                    .findFirst();\n\n            if (oldProvider.isPresent()) {\n                getProviders().removeProvider(oldProvider.get());\n                getProviders().addProvider(new TypePreservingMdcJsonProvider());\n            }\n        }\n\n        /**\n         * This class contains a duplicate of MdcJsonProvider.writeTo but with a small change.\n         * Instead of taking the MDC Map&lt;String, String&gt; and logging it, it produces a modified\n         * Map&lt;String, Object&gt; that potentially contains BigDecimal or BigInteger types alongside\n         * Strings and serialises those instead.\n         *\n         * The only new code in this method is the call to getStringObjectMap.\n         */\n        public static class TypePreservingMdcJsonProvider extends MdcJsonProvider {\n            private Map&lt;String, Object&gt; convertedProperties = Maps.newHashMap();\n\n            @Override\n            public void writeTo(JsonGenerator generator, ILoggingEvent event) throws IOException {\n                Map&lt;String, String&gt; mdcProperties = event.getMDCPropertyMap();\n\n                if (mdcProperties != null &amp;&amp; !mdcProperties.isEmpty()) {\n                    if (getFieldName() != null) {\n                        generator.writeObjectFieldStart(getFieldName());\n                    }\n\n                    if (!getIncludeMdcKeyNames().isEmpty()) {\n                        mdcProperties = new HashMap(mdcProperties);\n                        ((Map) mdcProperties).keySet().retainAll(getIncludeMdcKeyNames());\n                    }\n\n                    if (!getExcludeMdcKeyNames().isEmpty()) {\n                        mdcProperties = new HashMap(mdcProperties);\n                        ((Map) mdcProperties).keySet().removeAll(getExcludeMdcKeyNames());\n                    }\n\n                    Map&lt;String, Object&gt; convertedProperties = getStringObjectMap(mdcProperties);\n\n                    JsonWritingUtils.writeMapEntries(generator, convertedProperties);\n                    if (getFieldName() != null) {\n                        generator.writeEndObject();\n                    }\n                }\n            }\n\n            private Map&lt;String, Object&gt; getStringObjectMap(Map&lt;String, String&gt; mdcProperties) {\n                convertedProperties.clear();\n\n                for (String key : mdcProperties.keySet()) {\n                    String value = mdcProperties.get(key);\n\n                    // If the majority of MDC values are not numbers, this prevents unnecessary\n                    // parsing steps but adds a character-wise inspection per value.\n                    try {\n                        BigInteger parsed = new BigInteger(value);\n                        convertedProperties.put(key, parsed);\n                    } catch (NumberFormatException e) {\n                        try {\n                            BigDecimal parsed = new BigDecimal(vlue);\n                            convertedProperties.put(key, parsed);\n                        } catch (NumberFormatException f) {\n                            // No-op\n                        }\n                    }\n\n                    if (!convertedProperties.containsKey(key)) {\n                        convertedProperties.put(key, value);\n                    }\n                }\n                return convertedProperties;\n            }\n        }\n    }\n}\n</code></pre>\n<p>Thanks for any advice!</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","vert.x"],"owner":{"account_id":25842452,"reputation":133,"user_id":19577809,"display_name":"Thor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701330648,"creation_date":1701330648,"question_id":77576710,"body_markdown":"I am new to Kafka and trying to handle a case where I want the offset and commit to pause and want it to get increase at some specific point(when the message is read successfully).\r\n\r\n\r\nThis is my consumer:\r\n```\r\npackage org.example;\r\n\r\nimport io.vertx.core.Vertx;\r\nimport io.vertx.kafka.client.consumer.KafkaConsumer;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Properties;\r\n\r\npublic class KafkaConsumerExample {\r\n\r\n    public static void main(String[] args) {\r\n        Vertx vertx = Vertx.vertx();\r\n\r\n        Properties config = new Properties();\r\n        config.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\r\n        config.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n        config.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n        config.put(&quot;group.id&quot;, &quot;my-group&quot;); // Consumer group id\r\n\r\n        config.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);\r\n        config.put(&quot;auto.commit.interval.ms&quot;, &quot;0&quot;); // Set auto commit interval to 0 seconds i.e. never. 10000 means 10 sec\r\n\r\n\r\n        Map&lt;String, String&gt; consumerProps = new HashMap&lt;&gt;();\r\n        consumerProps.put(&quot;auto.offset.reset&quot;, &quot;earliest&quot;); // Start reading from the beginning of the topic\r\n\r\n        KafkaConsumer&lt;String, String&gt; consumer = KafkaConsumer.create(vertx, config);\r\n//        consumer.subscribe(&quot;my_topic&quot;).onSuccess(res-&gt;{\r\n//            System.out.println(&quot;testing here&quot;);\r\n//        }).onFailure(res-&gt;{\r\n//            System.out.println(&quot;failed here&quot;);\r\n//        });\r\n\r\n\r\n        // Subscribe to a topic\r\n        consumer.subscribe(&quot;my_topic&quot;, ar -&gt; {\r\n            if (ar.succeeded()) {\r\n                System.out.println(&quot;Subscribed to topic&quot;);\r\n            } else {\r\n                System.err.println(&quot;Failed to subscribe: &quot; + ar.cause().getMessage());\r\n                vertx.close();\r\n            }\r\n        });\r\n\r\n        // Consume messages\r\n        consumer.handler(record -&gt; {\r\n            System.out.println(&quot;Received message: &quot; + record.value());\r\n\r\n            long currentOffset=record.offset();\r\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\r\n            //consumer.commit();\r\n\r\n        });\r\n\r\n        // Start the consumer\r\n        consumer\r\n                .handler(record -&gt;{\r\n                    System.out.println(&quot;Received message: &quot; + record.value());\r\n\r\n                })\r\n                .exceptionHandler(e -&gt; System.err.println(&quot;Error in consumer: &quot; + e.getMessage()))\r\n                .subscribe(&quot;my_topic&quot;, ar -&gt; {\r\n                    if (ar.succeeded()) {\r\n                        System.out.println(&quot;Consumer subscribed to my_topic&quot;);\r\n                    } else {\r\n                        System.err.println(&quot;Failed to subscribe: &quot; + ar.cause().getMessage());\r\n                    }\r\n                });\r\n    }\r\n}\r\n```\r\n\r\nand this is the producer:\r\n```\r\npackage org.example;\r\n\r\nimport io.vertx.core.Vertx;\r\nimport io.vertx.core.AsyncResult;\r\nimport io.vertx.core.Handler;\r\nimport io.vertx.kafka.client.producer.KafkaProducer;\r\nimport io.vertx.kafka.client.producer.KafkaProducerRecord;\r\nimport io.vertx.kafka.client.producer.RecordMetadata;\r\n\r\nimport java.util.Properties;\r\n\r\npublic class KafkaProducerExample {\r\n\r\n    public static void main(String[] args) {\r\n        Vertx vertx = Vertx.vertx();\r\n\r\n        Properties config = new Properties();\r\n        config.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\r\n        config.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n        config.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n\r\n        KafkaProducer&lt;String, String&gt; producer = KafkaProducer.create(vertx, config);\r\n\r\n        // Produce a message\r\n        KafkaProducerRecord&lt;String, String&gt; record = KafkaProducerRecord.create(&quot;my_topic&quot;, &quot;key&quot;, &quot;Hello, Kafka!&quot;);\r\n\r\n        producer.&lt;RecordMetadata&gt;write(record);\r\n//        ar -&gt; {\r\n//            if (ar.succeeded()) {\r\n//                RecordMetadata recordMetadata = ar.result();\r\n//                System.out.println(&quot;Message sent successfully. Offset: &quot; + recordMetadata.getOffset());\r\n//            } else {\r\n//                System.err.println(&quot;Failed to send message: &quot; + ar.cause().getMessage());\r\n//            }\r\n\r\n             // Close the producer with a handler\r\n            producer.close(h -&gt; {\r\n                if (h.succeeded()) {\r\n                    System.out.println(&quot;Producer closed successfully&quot;);\r\n                } else {\r\n                    System.err.println(&quot;Failed to close producer: &quot; + h.cause().getMessage());\r\n                }\r\n                vertx.close();\r\n            });\r\n//        });\r\n    }\r\n}\r\n\r\n```\r\n\r\nWhen I run consumer and producer, produce produces message and it i pushed to consumer as shown in the output:\r\n\r\noutput of producer:\r\n\r\n```\r\nProducer closed successfully\r\nProcess finished with exit code 0\r\n```\r\n\r\n\r\nOutput of consumer:\r\n```\r\nSubscribed to topic\r\nConsumer subscribed to my_topic\r\nReceived message: Hello, Kafka!\r\n```\r\n\r\n\r\nSince, I have used the lines at consumer side:\r\n```\r\nconfig.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);\r\nconfig.put(&quot;auto.commit.interval.ms&quot;, &quot;0&quot;); // Set auto commit interval to 0 seconds i.e. never. 10000 means 10 sec\r\n```\r\n\r\n\r\nand have commented consumer.commit() in \r\n```\r\nconsumer.handler(record -&gt; {\r\n            System.out.println(&quot;Received message: &quot; + record.value());\r\n\r\n            long currentOffset=record.offset();\r\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\r\n            //consumer.commit();\r\n\r\n        });\r\n```\r\n\r\nI  was expecting the offset will increase but the &quot;Hello Kafka&quot; will not be shown in the output of the consumer, cause I want to pause it, and increase offset only when the the read is successful like here: \r\n```\r\nconsumer.handler(record -&gt; {\r\n            System.out.println(&quot;Received message: &quot; + record.value());\r\n\r\n            long currentOffset=record.offset();\r\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\r\n            consumer.commit();\r\n\r\n        });\r\n```\r\n\r\n**My question summary:**\r\nEven when I have commented consumer.commit(), how come I am getting  the message &quot;Hello Kafka&quot; generated from producer at consumer side? It shouldn&#39;t have been there right? It should have been paused as far as I understood Kafka.\r\n\r\n\r\n**Edit 1:**\r\nI also tried using this method but failed:\r\nIf I comment vertx.close() and consumer.commit() at consumer side, I am able to pause the messages, i.e., I dont get &quot;Hello kafka&quot; at consumer output. But I was expecting, to see &quot;Hello Kafka&quot; at consumer side as soon as I uncomment consumer.commit, which is not happening too.","title":"Pausing offset and commit in Kafka","body":"<p>I am new to Kafka and trying to handle a case where I want the offset and commit to pause and want it to get increase at some specific point(when the message is read successfully).</p>\n<p>This is my consumer:</p>\n<pre><code>package org.example;\n\nimport io.vertx.core.Vertx;\nimport io.vertx.kafka.client.consumer.KafkaConsumer;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Properties;\n\npublic class KafkaConsumerExample {\n\n    public static void main(String[] args) {\n        Vertx vertx = Vertx.vertx();\n\n        Properties config = new Properties();\n        config.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n        config.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\n        config.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\n        config.put(&quot;group.id&quot;, &quot;my-group&quot;); // Consumer group id\n\n        config.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);\n        config.put(&quot;auto.commit.interval.ms&quot;, &quot;0&quot;); // Set auto commit interval to 0 seconds i.e. never. 10000 means 10 sec\n\n\n        Map&lt;String, String&gt; consumerProps = new HashMap&lt;&gt;();\n        consumerProps.put(&quot;auto.offset.reset&quot;, &quot;earliest&quot;); // Start reading from the beginning of the topic\n\n        KafkaConsumer&lt;String, String&gt; consumer = KafkaConsumer.create(vertx, config);\n//        consumer.subscribe(&quot;my_topic&quot;).onSuccess(res-&gt;{\n//            System.out.println(&quot;testing here&quot;);\n//        }).onFailure(res-&gt;{\n//            System.out.println(&quot;failed here&quot;);\n//        });\n\n\n        // Subscribe to a topic\n        consumer.subscribe(&quot;my_topic&quot;, ar -&gt; {\n            if (ar.succeeded()) {\n                System.out.println(&quot;Subscribed to topic&quot;);\n            } else {\n                System.err.println(&quot;Failed to subscribe: &quot; + ar.cause().getMessage());\n                vertx.close();\n            }\n        });\n\n        // Consume messages\n        consumer.handler(record -&gt; {\n            System.out.println(&quot;Received message: &quot; + record.value());\n\n            long currentOffset=record.offset();\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\n            //consumer.commit();\n\n        });\n\n        // Start the consumer\n        consumer\n                .handler(record -&gt;{\n                    System.out.println(&quot;Received message: &quot; + record.value());\n\n                })\n                .exceptionHandler(e -&gt; System.err.println(&quot;Error in consumer: &quot; + e.getMessage()))\n                .subscribe(&quot;my_topic&quot;, ar -&gt; {\n                    if (ar.succeeded()) {\n                        System.out.println(&quot;Consumer subscribed to my_topic&quot;);\n                    } else {\n                        System.err.println(&quot;Failed to subscribe: &quot; + ar.cause().getMessage());\n                    }\n                });\n    }\n}\n</code></pre>\n<p>and this is the producer:</p>\n<pre><code>package org.example;\n\nimport io.vertx.core.Vertx;\nimport io.vertx.core.AsyncResult;\nimport io.vertx.core.Handler;\nimport io.vertx.kafka.client.producer.KafkaProducer;\nimport io.vertx.kafka.client.producer.KafkaProducerRecord;\nimport io.vertx.kafka.client.producer.RecordMetadata;\n\nimport java.util.Properties;\n\npublic class KafkaProducerExample {\n\n    public static void main(String[] args) {\n        Vertx vertx = Vertx.vertx();\n\n        Properties config = new Properties();\n        config.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n        config.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n        config.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n\n        KafkaProducer&lt;String, String&gt; producer = KafkaProducer.create(vertx, config);\n\n        // Produce a message\n        KafkaProducerRecord&lt;String, String&gt; record = KafkaProducerRecord.create(&quot;my_topic&quot;, &quot;key&quot;, &quot;Hello, Kafka!&quot;);\n\n        producer.&lt;RecordMetadata&gt;write(record);\n//        ar -&gt; {\n//            if (ar.succeeded()) {\n//                RecordMetadata recordMetadata = ar.result();\n//                System.out.println(&quot;Message sent successfully. Offset: &quot; + recordMetadata.getOffset());\n//            } else {\n//                System.err.println(&quot;Failed to send message: &quot; + ar.cause().getMessage());\n//            }\n\n             // Close the producer with a handler\n            producer.close(h -&gt; {\n                if (h.succeeded()) {\n                    System.out.println(&quot;Producer closed successfully&quot;);\n                } else {\n                    System.err.println(&quot;Failed to close producer: &quot; + h.cause().getMessage());\n                }\n                vertx.close();\n            });\n//        });\n    }\n}\n\n</code></pre>\n<p>When I run consumer and producer, produce produces message and it i pushed to consumer as shown in the output:</p>\n<p>output of producer:</p>\n<pre><code>Producer closed successfully\nProcess finished with exit code 0\n</code></pre>\n<p>Output of consumer:</p>\n<pre><code>Subscribed to topic\nConsumer subscribed to my_topic\nReceived message: Hello, Kafka!\n</code></pre>\n<p>Since, I have used the lines at consumer side:</p>\n<pre><code>config.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);\nconfig.put(&quot;auto.commit.interval.ms&quot;, &quot;0&quot;); // Set auto commit interval to 0 seconds i.e. never. 10000 means 10 sec\n</code></pre>\n<p>and have commented consumer.commit() in</p>\n<pre><code>consumer.handler(record -&gt; {\n            System.out.println(&quot;Received message: &quot; + record.value());\n\n            long currentOffset=record.offset();\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\n            //consumer.commit();\n\n        });\n</code></pre>\n<p>I  was expecting the offset will increase but the &quot;Hello Kafka&quot; will not be shown in the output of the consumer, cause I want to pause it, and increase offset only when the the read is successful like here:</p>\n<pre><code>consumer.handler(record -&gt; {\n            System.out.println(&quot;Received message: &quot; + record.value());\n\n            long currentOffset=record.offset();\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\n            consumer.commit();\n\n        });\n</code></pre>\n<p><strong>My question summary:</strong>\nEven when I have commented consumer.commit(), how come I am getting  the message &quot;Hello Kafka&quot; generated from producer at consumer side? It shouldn't have been there right? It should have been paused as far as I understood Kafka.</p>\n<p><strong>Edit 1:</strong>\nI also tried using this method but failed:\nIf I comment vertx.close() and consumer.commit() at consumer side, I am able to pause the messages, i.e., I dont get &quot;Hello kafka&quot; at consumer output. But I was expecting, to see &quot;Hello Kafka&quot; at consumer side as soon as I uncomment consumer.commit, which is not happening too.</p>\n"},{"tags":["java","postgresql","jdbc","blob"],"comments":[{"owner":{"account_id":87202,"reputation":17573,"user_id":241986,"accept_rate":80,"display_name":"Boris Treukhov"},"score":0,"creation_date":1379695959,"post_id":2069541,"comment_id":27936614,"body_markdown":"In my case it was `rs.getBlob(...)` instead of `rs.getBinaryStream(...)`. Never late to learn JDBC.","body":"In my case it was <code>rs.getBlob(...)</code> instead of <code>rs.getBinaryStream(...)</code>. Never late to learn JDBC."}],"answers":[{"tags":[],"owner":{"account_id":91564,"reputation":451,"user_id":251345,"display_name":"obscuredlogic"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1701330520,"creation_date":1263539613,"answer_id":2070016,"question_id":2069541,"body_markdown":"Would the PostgreSQL docs for &quot;Storing Binary Data&quot; help?\r\n\r\nhttps://jdbc.postgresql.org/documentation/binary-data/\r\n\r\nThe section titled &quot;Retrieving the image from the Large Object&quot;, its at the bottom of the page, might help.\r\n\r\n","title":"Postgresql, JDBC, and streaming BLOBs","body":"<p>Would the PostgreSQL docs for &quot;Storing Binary Data&quot; help?</p>\n<p><a href=\"https://jdbc.postgresql.org/documentation/binary-data/\" rel=\"nofollow noreferrer\">https://jdbc.postgresql.org/documentation/binary-data/</a></p>\n<p>The section titled &quot;Retrieving the image from the Large Object&quot;, its at the bottom of the page, might help.</p>\n"},{"comments":[{"owner":{"account_id":2693900,"reputation":4029,"user_id":2326492,"accept_rate":75,"display_name":"Bohne"},"score":0,"creation_date":1494589172,"post_id":2070376,"comment_id":74905678,"body_markdown":"Thank you! So rs.getBytes(&quot;image&quot;) worked for me to get the byteArray :-)","body":"Thank you! So rs.getBytes(&quot;image&quot;) worked for me to get the byteArray :-)"}],"tags":[],"owner":{"account_id":46376,"reputation":4143,"user_id":136954,"display_name":"janko"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1263545428,"creation_date":1263545428,"answer_id":2070376,"question_id":2069541,"body_markdown":"My guess is, that you have mixed up OID and BYTEA style blobs. Large binary objects are stored indirecty with OID columns in Postgres. The actual file data is stored somewhere outside the database table by Postgres. The column just contains an object identifier that is associated internally with the blob. For instance:\r\n\r\n    janko=# CREATE TABLE blobtest1 (name CHAR(30), image OID);\r\n    CREATE TABLE                                              \r\n    janko=# INSERT INTO blobtest1 VALUES (&#39;stackoverflow&#39;, lo_import(&#39;/tmp/stackoverflow-logo.png&#39;));\r\n    INSERT 0 1\r\n    janko=# SELECT * FROM blobtest1;\r\n                  name              | image\r\n    --------------------------------+-------\r\n     stackoverflow                  | 16389\r\n    (1 row)\r\n\r\nIf you use the `ResultSet#getBlob(String)` method, than an OID style column is expected. `getBlob` reads the data from the column and converts it to a `Long`. Then it tries to read the associated binary data from its internal storage.\r\n\r\nOn the other hand, with BYTEA you can place small pieces of binary data directly in your DB. For instance:\r\n\r\n    janko=# CREATE TABLE blobtest2 (name CHAR(30), image BYTEA);\r\n    CREATE TABLE\r\n    janko=# INSERT INTO blobtest2 VALUES (&#39;somebinary&#39;, E&#39;\\\\336\\\\255\\\\276\\\\357\\\\336\\\\255\\\\276\\\\357&#39;);\r\n    INSERT 0 1\r\n    janko=# SELECT * FROM blobtest2;\r\n                  name              |              image\r\n    --------------------------------+----------------------------------\r\n     somebinary                     | \\336\\255\\276\\357\\336\\255\\276\\357\r\n    (1 row)\r\n\r\nHere, the data column directly contains the binary data. If you try to use `getBlob` on such a column, the data will still be interpreted as an OID but obviously it will not fit into a `Long`. Let&#39;s try this on the database, we just created:\r\n\r\n    groovy:000&gt; import java.sql.*\r\n    ===&gt; [import java.sql.*]\r\n    groovy:000&gt; Class.forName(&quot;org.postgresql.Driver&quot;);\r\n    ===&gt; class org.postgresql.Driver\r\n    groovy:000&gt; db = DriverManager.getConnection(&quot;jdbc:postgresql:janko&quot;, &quot;janko&quot;, &quot;qwertz&quot;);\r\n    ===&gt; org.postgresql.jdbc4.Jdbc4Connection@3a0b2c64\r\n    groovy:000&gt; ps = db.prepareStatement(&quot;SELECT image FROM blobtest2 WHERE name = ?&quot;);\r\n    ===&gt; SELECT image FROM blobtest2 WHERE name = ?\r\n    groovy:000&gt; ps.setString(1, &quot;somebinary&quot;)\r\n    ===&gt; null\r\n    groovy:000&gt; rs = ps.executeQuery()\r\n    ===&gt; org.postgresql.jdbc4.Jdbc4ResultSet@66f9104a\r\n    groovy:000&gt; rs.next()\r\n    ===&gt; true\r\n    groovy:000&gt; rs.getBlob(&quot;image&quot;)\r\n    ERROR org.postgresql.util.PSQLException: Bad value for type long : \\336\\255\\276\\357\\336\\255\\276\\357\r\n            at org.postgresql.jdbc2.AbstractJdbc2ResultSet.toLong (AbstractJdbc2ResultSet.java:2796)\r\n            at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getLong (AbstractJdbc2ResultSet.java:2019)\r\n            at org.postgresql.jdbc4.Jdbc4ResultSet.getBlob (Jdbc4ResultSet.java:52)\r\n            at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getBlob (AbstractJdbc2ResultSet.java:335)\r\n            at groovysh_evaluate.run (groovysh_evaluate:3)\r\n            ...\r\n","title":"Postgresql, JDBC, and streaming BLOBs","body":"<p>My guess is, that you have mixed up OID and BYTEA style blobs. Large binary objects are stored indirecty with OID columns in Postgres. The actual file data is stored somewhere outside the database table by Postgres. The column just contains an object identifier that is associated internally with the blob. For instance:</p>\n\n<pre><code>janko=# CREATE TABLE blobtest1 (name CHAR(30), image OID);\nCREATE TABLE                                              \njanko=# INSERT INTO blobtest1 VALUES ('stackoverflow', lo_import('/tmp/stackoverflow-logo.png'));\nINSERT 0 1\njanko=# SELECT * FROM blobtest1;\n              name              | image\n--------------------------------+-------\n stackoverflow                  | 16389\n(1 row)\n</code></pre>\n\n<p>If you use the <code>ResultSet#getBlob(String)</code> method, than an OID style column is expected. <code>getBlob</code> reads the data from the column and converts it to a <code>Long</code>. Then it tries to read the associated binary data from its internal storage.</p>\n\n<p>On the other hand, with BYTEA you can place small pieces of binary data directly in your DB. For instance:</p>\n\n<pre><code>janko=# CREATE TABLE blobtest2 (name CHAR(30), image BYTEA);\nCREATE TABLE\njanko=# INSERT INTO blobtest2 VALUES ('somebinary', E'\\\\336\\\\255\\\\276\\\\357\\\\336\\\\255\\\\276\\\\357');\nINSERT 0 1\njanko=# SELECT * FROM blobtest2;\n              name              |              image\n--------------------------------+----------------------------------\n somebinary                     | \\336\\255\\276\\357\\336\\255\\276\\357\n(1 row)\n</code></pre>\n\n<p>Here, the data column directly contains the binary data. If you try to use <code>getBlob</code> on such a column, the data will still be interpreted as an OID but obviously it will not fit into a <code>Long</code>. Let's try this on the database, we just created:</p>\n\n<pre><code>groovy:000&gt; import java.sql.*\n===&gt; [import java.sql.*]\ngroovy:000&gt; Class.forName(\"org.postgresql.Driver\");\n===&gt; class org.postgresql.Driver\ngroovy:000&gt; db = DriverManager.getConnection(\"jdbc:postgresql:janko\", \"janko\", \"qwertz\");\n===&gt; org.postgresql.jdbc4.Jdbc4Connection@3a0b2c64\ngroovy:000&gt; ps = db.prepareStatement(\"SELECT image FROM blobtest2 WHERE name = ?\");\n===&gt; SELECT image FROM blobtest2 WHERE name = ?\ngroovy:000&gt; ps.setString(1, \"somebinary\")\n===&gt; null\ngroovy:000&gt; rs = ps.executeQuery()\n===&gt; org.postgresql.jdbc4.Jdbc4ResultSet@66f9104a\ngroovy:000&gt; rs.next()\n===&gt; true\ngroovy:000&gt; rs.getBlob(\"image\")\nERROR org.postgresql.util.PSQLException: Bad value for type long : \\336\\255\\276\\357\\336\\255\\276\\357\n        at org.postgresql.jdbc2.AbstractJdbc2ResultSet.toLong (AbstractJdbc2ResultSet.java:2796)\n        at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getLong (AbstractJdbc2ResultSet.java:2019)\n        at org.postgresql.jdbc4.Jdbc4ResultSet.getBlob (Jdbc4ResultSet.java:52)\n        at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getBlob (AbstractJdbc2ResultSet.java:335)\n        at groovysh_evaluate.run (groovysh_evaluate:3)\n        ...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2735427,"reputation":2452,"user_id":2358222,"display_name":"Studocwho"},"score":2,"creation_date":1609262222,"post_id":65492849,"comment_id":115794424,"body_markdown":"Please consider adding  an explanation to what the code is doing, or is different.","body":"Please consider adding  an explanation to what the code is doing, or is different."}],"tags":[],"owner":{"account_id":20323303,"reputation":1,"user_id":14907397,"display_name":"Manoel BRF"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1609260972,"creation_date":1609248177,"answer_id":65492849,"question_id":2069541,"body_markdown":"    byte [] b = null;\r\n    while (m_ResultSet.next()) {\r\n        for (int i = 1; i &lt;= m_ResultSet.getMetaData().getColumnCount(); i++) {\r\n            b =  m_ResultSet.getBytes(i);\r\n        }\r\n    }\r\n    String str = &quot;&quot;;\r\n    for (byte i : b){\r\n        str+=(char)i;\r\n    }","title":"Postgresql, JDBC, and streaming BLOBs","body":"<pre><code>byte [] b = null;\nwhile (m_ResultSet.next()) {\n    for (int i = 1; i &lt;= m_ResultSet.getMetaData().getColumnCount(); i++) {\n        b =  m_ResultSet.getBytes(i);\n    }\n}\nString str = &quot;&quot;;\nfor (byte i : b){\n    str+=(char)i;\n}\n</code></pre>\n"}],"owner":{"account_id":29035,"reputation":835,"user_id":78134,"accept_rate":91,"display_name":"CJ F"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29966,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":2070376,"answer_count":3,"score":21,"last_activity_date":1701330520,"creation_date":1263530003,"question_id":2069541,"body_markdown":"I am trying to retrieve a blob from a postgres database using the jdbc drivers.  It is too big to have in memory so I want to stream it as a download.  I tried using the getBinaryStream method on ResultSet, but it turns out that this method actually reads it all into memory, so doesn&#39;t work for large file.\r\n\r\nApparently, one can use the getBlob method on the resultset and the presumeably get the inputstream from the blob and go from there, but that is where I run into my problem.  \r\n\r\n    PreparedStatement ps = con.prepareStatement(&quot;select data from file_data WHERE ID = ?&quot;);\r\n\tps.setLong(1,file.fileData.id)\r\n\tResultSet rs = ps.executeQuery()\r\n\tif(rs.next()){\r\n\t\t\trs.getBlob(&quot;data&quot;)\r\n\r\nThat is the code I&#39;m running.  When it gets to that last line it throw out an error that I cannot make sense of...\r\n\r\n&gt;  org.postgresql.util.PSQLException: Bad value for type long : xxxxxx\r\n\r\n&quot;xxxxxx&quot; then is the contents of the file.  You can imagine that gets quite long, but not really the point.  \r\n\r\nI&#39;m stuck here.  Does anyone have any ideas on what is going on?  Heck I&#39;ll even take alternative methods for streaming large blobs as a download.\r\n\r\n","title":"Postgresql, JDBC, and streaming BLOBs","body":"<p>I am trying to retrieve a blob from a postgres database using the jdbc drivers.  It is too big to have in memory so I want to stream it as a download.  I tried using the getBinaryStream method on ResultSet, but it turns out that this method actually reads it all into memory, so doesn't work for large file.</p>\n\n<p>Apparently, one can use the getBlob method on the resultset and the presumeably get the inputstream from the blob and go from there, but that is where I run into my problem.  </p>\n\n<pre><code>PreparedStatement ps = con.prepareStatement(\"select data from file_data WHERE ID = ?\");\nps.setLong(1,file.fileData.id)\nResultSet rs = ps.executeQuery()\nif(rs.next()){\n        rs.getBlob(\"data\")\n</code></pre>\n\n<p>That is the code I'm running.  When it gets to that last line it throw out an error that I cannot make sense of...</p>\n\n<blockquote>\n  <p>org.postgresql.util.PSQLException: Bad value for type long : xxxxxx</p>\n</blockquote>\n\n<p>\"xxxxxx\" then is the contents of the file.  You can imagine that gets quite long, but not really the point.  </p>\n\n<p>I'm stuck here.  Does anyone have any ideas on what is going on?  Heck I'll even take alternative methods for streaming large blobs as a download.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1701316714,"post_id":77575797,"comment_id":136761582,"body_markdown":"Is it the typing you take issue with, or the length of the code?","body":"Is it the typing you take issue with, or the length of the code?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1701317578,"post_id":77575797,"comment_id":136761665,"body_markdown":"Most IDEs have shortcut code completions, like `sout` for example","body":"Most IDEs have shortcut code completions, like <code>sout</code> for example"},{"owner":{"account_id":25285238,"reputation":407,"user_id":19112370,"display_name":"Harshali"},"score":0,"creation_date":1701319958,"post_id":77575797,"comment_id":136761869,"body_markdown":"@andykais, Which IDE you are using?","body":"@andykais, Which IDE you are using?"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1701320160,"post_id":77575797,"comment_id":136761897,"body_markdown":"If you really want to, you can create a class that has a reference to the PrintStream out and use that variable instead of System.out.","body":"If you really want to, you can create a class that has a reference to the PrintStream out and use that variable instead of System.out."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1701320788,"post_id":77575797,"comment_id":136761947,"body_markdown":"Plenty of languages have much shorter global print methods.  Java doesnt have *any* global methods.  All methods must belong to an object or class.  Though you might find loggers make things a little shorter, since you can do `private static final Logger log = Logger.getLogger(ThisClassOfMine.class.getName());` and then write `log.info(&quot;Computing result.&quot;);` and so on.","body":"Plenty of languages have much shorter global print methods.  Java doesnt have <i>any</i> global methods.  All methods must belong to an object or class.  Though you might find loggers make things a little shorter, since you can do <code>private static final Logger log = Logger.getLogger(ThisClassOfMine.class.getName());</code> and then write <code>log.info(&quot;Computing result.&quot;);</code> and so on."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1701330135,"post_id":77575797,"comment_id":136762842,"body_markdown":"BTW: `System.out` isn&#39;t a &quot;namespace&quot;, it is the field `out` of the class `java.lang.System`. That said, using a lot of `System.out.println()` is usually a bad idea (especially in a highly concurrent application). You may want to consider using the system logger, or java.util.logging (which the system logger uses by default).","body":"BTW: <code>System.out</code> isn&#39;t a &quot;namespace&quot;, it is the field <code>out</code> of the class <code>java.lang.System</code>. That said, using a lot of <code>System.out.println()</code> is usually a bad idea (especially in a highly concurrent application). You may want to consider using the system logger, or java.util.logging (which the system logger uses by default)."}],"answers":[{"tags":[],"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701319576,"creation_date":1701319576,"answer_id":77575961,"question_id":77575797,"body_markdown":"You can write your own methods to achieve this\r\n\r\n**To print something without a new line**\r\n\t\r\n\r\n    public static void p(Object printThis) {\r\n    \r\n   \t\tSystem.out.print(printThis);\r\n   \t}\r\n\r\n**To print something with a new line**\r\n\t\r\n\r\n    public static void pl(Object printThisWithNewLine) {\r\n    \r\n   \t\tSystem.out.println(printThisWithNewLine);\r\n   \t}\r\n\r\nAnd in the code, you can use the `p()` or the `pl()` methods based on your requirements.","title":"How can I use println in java everywhere in my project without the full namespace System.out.println?","body":"<p>You can write your own methods to achieve this</p>\n<p><strong>To print something without a new line</strong></p>\n<pre><code>public static void p(Object printThis) {\n\n    System.out.print(printThis);\n}\n</code></pre>\n<p><strong>To print something with a new line</strong></p>\n<pre><code>public static void pl(Object printThisWithNewLine) {\n\n    System.out.println(printThisWithNewLine);\n}\n</code></pre>\n<p>And in the code, you can use the <code>p()</code> or the <code>pl()</code> methods based on your requirements.</p>\n"},{"tags":[],"owner":{"account_id":2187186,"reputation":5510,"user_id":1935338,"accept_rate":86,"display_name":"smcjones"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701320178,"creation_date":1701320178,"answer_id":77575996,"question_id":77575797,"body_markdown":"Dont print spam. Use the debugger instead. \r\n\r\nWhy?\r\n\r\n 1. It allows you to see the value in real time at multiple steps in the program. You can see how the value changes at various breakpoints and manually increment steps. \r\n\r\n\r\n 2. It separates the concerns of debugging from programming. You shouldnt have a bunch of print statements lying around your code. The odds are good youll forget one when you ship it. \r\n\r\n 3. It allows you to change values of variables while debugging. This is extremely useful in troubleshooting. \r\n\r\n\r\nIf you cant use the debugger for whatever reason, use instead a logging library. This allows you to silence your debugging statements by default when running production code and set the log levels to the appropriate severity, silencing ones that are too fine-grained. It also works better with logging software because its standardized. \r\n\r\nPlease dont print spam. You will thank yourself later, as will the person who uses your code later. ","title":"How can I use println in java everywhere in my project without the full namespace System.out.println?","body":"<p>Dont print spam. Use the debugger instead.</p>\n<p>Why?</p>\n<ol>\n<li><p>It allows you to see the value in real time at multiple steps in the program. You can see how the value changes at various breakpoints and manually increment steps.</p>\n</li>\n<li><p>It separates the concerns of debugging from programming. You shouldnt have a bunch of print statements lying around your code. The odds are good youll forget one when you ship it.</p>\n</li>\n<li><p>It allows you to change values of variables while debugging. This is extremely useful in troubleshooting.</p>\n</li>\n</ol>\n<p>If you cant use the debugger for whatever reason, use instead a logging library. This allows you to silence your debugging statements by default when running production code and set the log levels to the appropriate severity, silencing ones that are too fine-grained. It also works better with logging software because its standardized.</p>\n<p>Please dont print spam. You will thank yourself later, as will the person who uses your code later.</p>\n"},{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701321620,"creation_date":1701321620,"answer_id":77576077,"question_id":77575797,"body_markdown":"I would create a class that reference System.out.  You may have to complete other methods but here&#39;s the idea.\r\n\r\n```\r\nclass O {\r\n    static  java.io.PrintStream o = System.out;\r\n    public static void p(String s){ o.print(s);}\r\n    public static void p(int i){o.print(i);}\r\n    public static void pl(String s){ o.print(s);}\r\n    public static void pl(int i){o.print(i);}\r\n}\r\n```\r\nThen use it wherever you want.\r\n\r\n```\r\nclass Main {\r\n\tpublic static void main(String[] args) {\r\n\t    O.p(&quot;hello&quot;);\r\n\t    O.pl(&quot;world&quot;);\r\n\t}\r\n}\r\n```","title":"How can I use println in java everywhere in my project without the full namespace System.out.println?","body":"<p>I would create a class that reference System.out.  You may have to complete other methods but here's the idea.</p>\n<pre><code>class O {\n    static  java.io.PrintStream o = System.out;\n    public static void p(String s){ o.print(s);}\n    public static void p(int i){o.print(i);}\n    public static void pl(String s){ o.print(s);}\n    public static void pl(int i){o.print(i);}\n}\n</code></pre>\n<p>Then use it wherever you want.</p>\n<pre><code>class Main {\n    public static void main(String[] args) {\n        O.p(&quot;hello&quot;);\n        O.pl(&quot;world&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701330336,"creation_date":1701329388,"answer_id":77576600,"question_id":77575797,"body_markdown":"This can be archived using static import.\r\n\r\nFirst create an interface (or class) containing one or more static methods, that should be shared with other classes:\r\n\r\n````java\r\npackage demo;  // use the appropriate package here\r\n\r\npublic interface Output {\r\n\r\n    public static void println(String message) {\r\n        System.out.println(message);\r\n    }\r\n\r\n    public static void printf(String format, Object... args) {\r\n        System.out.printf(format, args);\r\n    }\r\n}\r\n````\r\n\r\nThis methods can be used *directly* by using a static import:\r\n\r\n````java\r\nimport static demo.Output.*;\r\n\r\nclass TestOutput {\r\n\r\n    public static void main(String... args) {\r\n        println(&quot;Testing Output&quot;);\r\n    }\r\n}\r\n````\r\n\r\n-----\r\n\r\nUsing a class instead of an interface:\r\n````java\r\npackage demo;  // use the appropriate package here\r\n\r\npublic final class Output {\r\n\r\n    private Output() {\r\n        throw new InstantiationError(&quot;should not be instantiated&quot;);\r\n    }\r\n    \r\n    public static void println(String message) {\r\n        System.out.println(message);\r\n    }\r\n\r\n    public static void printf(String format, Object... args) {\r\n        System.out.printf(format, args);\r\n    }\r\n}\r\n````\r\n\r\nThe *test* code is the same.\r\n\r\nThe class is declared `final`, so it cannot be extended. The constructor throws an exception, to avoid instance creation. These can be changed if needed, for example to have some additional output processing.\r\n\r\n-----\r\n\r\nI am not sure if I would use such solution just to avoid writing `System.out.`, but, for some applications, it has the advantage of having all output going through the same class/methods.","title":"How can I use println in java everywhere in my project without the full namespace System.out.println?","body":"<p>This can be archived using static import.</p>\n<p>First create an interface (or class) containing one or more static methods, that should be shared with other classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package demo;  // use the appropriate package here\n\npublic interface Output {\n\n    public static void println(String message) {\n        System.out.println(message);\n    }\n\n    public static void printf(String format, Object... args) {\n        System.out.printf(format, args);\n    }\n}\n</code></pre>\n<p>This methods can be used <em>directly</em> by using a static import:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static demo.Output.*;\n\nclass TestOutput {\n\n    public static void main(String... args) {\n        println(&quot;Testing Output&quot;);\n    }\n}\n</code></pre>\n<hr />\n<p>Using a class instead of an interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package demo;  // use the appropriate package here\n\npublic final class Output {\n\n    private Output() {\n        throw new InstantiationError(&quot;should not be instantiated&quot;);\n    }\n    \n    public static void println(String message) {\n        System.out.println(message);\n    }\n\n    public static void printf(String format, Object... args) {\n        System.out.printf(format, args);\n    }\n}\n</code></pre>\n<p>The <em>test</em> code is the same.</p>\n<p>The class is declared <code>final</code>, so it cannot be extended. The constructor throws an exception, to avoid instance creation. These can be changed if needed, for example to have some additional output processing.</p>\n<hr />\n<p>I am not sure if I would use such solution just to avoid writing <code>System.out.</code>, but, for some applications, it has the advantage of having all output going through the same class/methods.</p>\n"}],"owner":{"account_id":4688294,"reputation":1004,"user_id":3795137,"accept_rate":83,"display_name":"andykais"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":4,"score":-1,"last_activity_date":1701330336,"creation_date":1701316653,"question_id":77575797,"body_markdown":"When I am debugging, I often print to stdout. This means writing the fairly long statement `System.out.println(...);` all over the place. Plenty of languages have much shorter global print methods. How can I accomplish something similar in java? Is there a way to set up static imports globally across all java files in a project somehow with either maven or gradle?","title":"How can I use println in java everywhere in my project without the full namespace System.out.println?","body":"<p>When I am debugging, I often print to stdout. This means writing the fairly long statement <code>System.out.println(...);</code> all over the place. Plenty of languages have much shorter global print methods. How can I accomplish something similar in java? Is there a way to set up static imports globally across all java files in a project somehow with either maven or gradle?</p>\n"},{"tags":["java","jsoup"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1691690839,"post_id":76878261,"comment_id":135529198,"body_markdown":"`div.select(&quot;a span&quot;);`","body":"<code>div.select(&quot;a span&quot;);</code>"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1691691533,"post_id":76878261,"comment_id":135529323,"body_markdown":"What does **but separately** mean? What is the expected out put and what are you getting right now with your sample code?","body":"What does <b>but separately</b> mean? What is the expected out put and what are you getting right now with your sample code?"},{"owner":{"account_id":7430214,"reputation":1253,"user_id":5651468,"accept_rate":100,"display_name":"Sandeep"},"score":0,"creation_date":1691691919,"post_id":76878261,"comment_id":135529405,"body_markdown":"@HovercraftFullOfEels can you kindly suggest a generic way to get subtending text nodes, without relying on the structure of the sample HTML provided?","body":"@HovercraftFullOfEels can you kindly suggest a generic way to get subtending text nodes, without relying on the structure of the sample HTML provided?"},{"owner":{"account_id":7430214,"reputation":1253,"user_id":5651468,"accept_rate":100,"display_name":"Sandeep"},"score":0,"creation_date":1691692026,"post_id":76878261,"comment_id":135529423,"body_markdown":"@Eritrean Basically I would like to be able to manipulate them separately (e.g. print all odd text nodes only).","body":"@Eritrean Basically I would like to be able to manipulate them separately (e.g. print all odd text nodes only)."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1691692250,"post_id":76878261,"comment_id":135529468,"body_markdown":"recursively walk through the text nodes a la [this Q&amp;A](https://stackoverflow.com/questions/47312320/jsoup-print-all-text-nodes-in-order)","body":"recursively walk through the text nodes a la <a href=\"https://stackoverflow.com/questions/47312320/jsoup-print-all-text-nodes-in-order\">this Q&amp;A</a>"}],"answers":[{"tags":[],"owner":{"account_id":17351379,"reputation":11,"user_id":18241395,"display_name":"Sergei S."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691699387,"creation_date":1691699310,"answer_id":76879125,"question_id":76878261,"body_markdown":"It&#39;s not entirely clear what you mean - &quot;retrieve separately&quot; - However, if you want to control and customize the way the text is received from the element, then you should create a separate class implementing the NodeVisitor interface and define the extraction method so that it would not be challenging to manipulate strings in the future &quot;Content 1&quot; and &quot;Content 2&quot; separately, or even put such lines into a collection.\r\n\r\n          Element targetElement = doc.select(&quot;div.erece&quot;).first();\r\n        TextNodeVisitor textNodeVisitor = new TextNodeVisitor();\r\n        NodeTraversor traversor = new NodeTraversor(textNodeVisitor);\r\n            traversor.traverse(targetElement);\r\n        String extractedText = textNodeVisitor.getExtractedText();\r\n            System.out.println(extractedText);\r\n    }\r\n    static class TextNodeVisitor implements NodeVisitor {\r\n        private StringBuilder extractedText = new StringBuilder();\r\n        @Override\r\n        public void head(Node node, int depth) {\r\n            if (node instanceof org.jsoup.nodes.TextNode) {\r\n                org.jsoup.nodes.TextNode textNode = (org.jsoup.nodes.TextNode) node;\r\n                String text = textNode.text().trim();\r\n                if (!text.isEmpty()) {\r\n                    extractedText.append(text).append(&quot;\\n&quot;);\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void tail(Node node, int depth) {\r\n            // Do nothing on tail\r\n        }\r\n    \r\n        public String getExtractedText() {\r\n            return extractedText.toString();\r\n        }\r\n    \r\n        public List&lt;String&gt; getLineList(){\r\n            List&lt;String&gt; stringList = List.of(extractedText.toString().split(&quot;\\n&quot;));\r\n            return stringList;\r\n        } \r\n\r\n","title":"Getting an element&#39;s subtending text nodes (including indirect)","body":"<p>It's not entirely clear what you mean - &quot;retrieve separately&quot; - However, if you want to control and customize the way the text is received from the element, then you should create a separate class implementing the NodeVisitor interface and define the extraction method so that it would not be challenging to manipulate strings in the future &quot;Content 1&quot; and &quot;Content 2&quot; separately, or even put such lines into a collection.</p>\n<pre><code>      Element targetElement = doc.select(&quot;div.erece&quot;).first();\n    TextNodeVisitor textNodeVisitor = new TextNodeVisitor();\n    NodeTraversor traversor = new NodeTraversor(textNodeVisitor);\n        traversor.traverse(targetElement);\n    String extractedText = textNodeVisitor.getExtractedText();\n        System.out.println(extractedText);\n}\nstatic class TextNodeVisitor implements NodeVisitor {\n    private StringBuilder extractedText = new StringBuilder();\n    @Override\n    public void head(Node node, int depth) {\n        if (node instanceof org.jsoup.nodes.TextNode) {\n            org.jsoup.nodes.TextNode textNode = (org.jsoup.nodes.TextNode) node;\n            String text = textNode.text().trim();\n            if (!text.isEmpty()) {\n                extractedText.append(text).append(&quot;\\n&quot;);\n            }\n        }\n    }\n\n    @Override\n    public void tail(Node node, int depth) {\n        // Do nothing on tail\n    }\n\n    public String getExtractedText() {\n        return extractedText.toString();\n    }\n\n    public List&lt;String&gt; getLineList(){\n        List&lt;String&gt; stringList = List.of(extractedText.toString().split(&quot;\\n&quot;));\n        return stringList;\n    } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":51278,"reputation":10472,"user_id":153184,"display_name":"Jonathan Hedley"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701329739,"creation_date":1701329739,"answer_id":77576632,"question_id":76878261,"body_markdown":"Here&#39;s a version that riffs off the earlier answers/comments and uses the Stream pattern:\r\n\r\n```java\r\nString html = &quot;&quot;&quot;\r\n    &lt;div class=&quot;erece mtmhp&quot;&gt;\r\n        &lt;a href=&quot;http://www.stackoverflow.com&quot;&gt;\r\n            &lt;span&gt;Content 1&lt;/span&gt;\r\n            &lt;span&gt;Content 2 &lt;span&gt;Content 2.a&lt;/span&gt;&lt;/span&gt;\r\n        &lt;/a&gt;\r\n    &lt;/div&gt;\r\n    &quot;&quot;&quot;;\r\n\r\nDocument doc = Jsoup.parse(html);\r\nList&lt;String&gt; texts = doc.select(&quot;div.erece.mtmhp *&quot;).stream()\r\n    .map(Element::ownText)\r\n    .filter(text -&gt; !text.isBlank())\r\n    .toList();\r\n\r\nprint(texts.toString());\r\n```\r\n\r\nGives:\r\n\r\n```text\r\n[Content 1, Content 2, Content 2.a]\r\n```\r\n\r\n","title":"Getting an element&#39;s subtending text nodes (including indirect)","body":"<p>Here's a version that riffs off the earlier answers/comments and uses the Stream pattern:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String html = &quot;&quot;&quot;\n    &lt;div class=&quot;erece mtmhp&quot;&gt;\n        &lt;a href=&quot;http://www.stackoverflow.com&quot;&gt;\n            &lt;span&gt;Content 1&lt;/span&gt;\n            &lt;span&gt;Content 2 &lt;span&gt;Content 2.a&lt;/span&gt;&lt;/span&gt;\n        &lt;/a&gt;\n    &lt;/div&gt;\n    &quot;&quot;&quot;;\n\nDocument doc = Jsoup.parse(html);\nList&lt;String&gt; texts = doc.select(&quot;div.erece.mtmhp *&quot;).stream()\n    .map(Element::ownText)\n    .filter(text -&gt; !text.isBlank())\n    .toList();\n\nprint(texts.toString());\n</code></pre>\n<p>Gives:</p>\n<pre><code>[Content 1, Content 2, Content 2.a]\n</code></pre>\n"}],"owner":{"account_id":7430214,"reputation":1253,"user_id":5651468,"accept_rate":100,"display_name":"Sandeep"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1701329739,"creation_date":1691690496,"question_id":76878261,"body_markdown":"We have a need to retrieve all the subtending text nodes of an element, whether direct or indirect.  The `textNodes()` method on the `Element` class is returning only the direct child text nodes, and not the grand text nodes, great-grand text nodes etc.  \r\n\r\nGiven the following sample HTML file:\r\n\r\n    &lt;html&gt;\r\n    \t&lt;head/&gt;\r\n    \t&lt;body&gt;\r\n    \t\t&lt;div class=&quot;erece mtmhp&quot;&gt;\r\n    \t\t\t&lt;a href=&quot;http://www.stackoverflow.com&quot;&gt;\r\n    \t\t\t\t&lt;span&gt;Content 1&lt;/span&gt;\r\n    \t\t\t\t&lt;span&gt;Content 2&lt;/span&gt;\r\n    \t\t\t&lt;/a&gt;\r\n    \t\t&lt;/div&gt;\r\n    \t&lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nI would like to be able to retrieve `Content 1` and `Content 2`, **but separately**.\r\n\r\nHere is my sample code:  \r\n\r\n    import java.io.File;\r\n    import java.util.List;\r\n    \r\n    import org.jsoup.Jsoup;\r\n    import org.jsoup.nodes.Document;\r\n    import org.jsoup.nodes.Element;\r\n    import org.jsoup.nodes.TextNode;\r\n    import org.jsoup.select.Elements;\r\n    \r\n    public class TextNodeExpt {\r\n        public static void main(String[] args) throws Exception {\r\n    \r\n    \t\tFile fileObj = new File(args[0]);\r\n            Document document = Jsoup.parse(fileObj, &quot;UTF-8&quot;);\r\n    \r\n            Elements divs = document.select(&quot;div.erece.mtmhp&quot;);\r\n    \r\n            displaySubtendingTextNodes(divs);\r\n        }\r\n    \r\n    \tprotected static void displaySubtendingTextNodes(Elements divs) {\r\n    \t\tfor (Element div : divs) {\r\n                Elements anchors = div.select(&quot;a&quot;);\r\n                for (Element anchor : anchors) {\r\n    \t\t\t\tList&lt;TextNode&gt; textNodes = anchor.textNodes();\r\n    \t\t\t\tSystem.out.println(textNodes.size() + &quot; text nodes found&quot;);\r\n    \t\t\t\tfor(TextNode tn : textNodes) {\r\n    \t\t\t\t\tSystem.out.println(&quot;[&quot; + tn.getWholeText() + &quot;]&quot;);\r\n    \t\t\t\t\t}\r\n                }\r\n            }\r\n    \t}\r\n    }\r\n\r\n\r\n----------\r\n**Addendum:**  \r\nBased on the comment from [Hovercraft Full Of Eels][1], I have come up with the following implementation.  It is based on [this][2] Stackoverflow posting.  \r\n\r\nI have made use of `List&lt;TextNode&gt;` in the API, similar to the `textNodes()` method on the `Element` class (although the list is passed as a parameter, and not returned from the method).  \r\n\r\n    protected static void textNodes(Node targetNode, List&lt;TextNode&gt; nodeList) {\r\n        for (Node childNode : targetNode.childNodes()) {\r\n            if (childNode instanceof TextNode &amp;&amp; !((TextNode) childNode).isBlank()) {\r\n            \tnodeList.add((TextNode)childNode);\r\n            }\r\n            else {\r\n            \ttextNodes(childNode, nodeList);\r\n            }\r\n        }\r\n    }\r\n\r\n  \r\n\r\n\r\n  [1]: https://stackoverflow.com/users/522444/hovercraft-full-of-eels\r\n  [2]: https://stackoverflow.com/questions/47312320/jsoup-print-all-text-nodes-in-order\r\n","title":"Getting an element&#39;s subtending text nodes (including indirect)","body":"<p>We have a need to retrieve all the subtending text nodes of an element, whether direct or indirect.  The <code>textNodes()</code> method on the <code>Element</code> class is returning only the direct child text nodes, and not the grand text nodes, great-grand text nodes etc.</p>\n<p>Given the following sample HTML file:</p>\n<pre><code>&lt;html&gt;\n    &lt;head/&gt;\n    &lt;body&gt;\n        &lt;div class=&quot;erece mtmhp&quot;&gt;\n            &lt;a href=&quot;http://www.stackoverflow.com&quot;&gt;\n                &lt;span&gt;Content 1&lt;/span&gt;\n                &lt;span&gt;Content 2&lt;/span&gt;\n            &lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I would like to be able to retrieve <code>Content 1</code> and <code>Content 2</code>, <strong>but separately</strong>.</p>\n<p>Here is my sample code:</p>\n<pre><code>import java.io.File;\nimport java.util.List;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.jsoup.nodes.TextNode;\nimport org.jsoup.select.Elements;\n\npublic class TextNodeExpt {\n    public static void main(String[] args) throws Exception {\n\n        File fileObj = new File(args[0]);\n        Document document = Jsoup.parse(fileObj, &quot;UTF-8&quot;);\n\n        Elements divs = document.select(&quot;div.erece.mtmhp&quot;);\n\n        displaySubtendingTextNodes(divs);\n    }\n\n    protected static void displaySubtendingTextNodes(Elements divs) {\n        for (Element div : divs) {\n            Elements anchors = div.select(&quot;a&quot;);\n            for (Element anchor : anchors) {\n                List&lt;TextNode&gt; textNodes = anchor.textNodes();\n                System.out.println(textNodes.size() + &quot; text nodes found&quot;);\n                for(TextNode tn : textNodes) {\n                    System.out.println(&quot;[&quot; + tn.getWholeText() + &quot;]&quot;);\n                    }\n            }\n        }\n    }\n}\n</code></pre>\n<hr />\n<p><strong>Addendum:</strong><br />\nBased on the comment from <a href=\"https://stackoverflow.com/users/522444/hovercraft-full-of-eels\">Hovercraft Full Of Eels</a>, I have come up with the following implementation.  It is based on <a href=\"https://stackoverflow.com/questions/47312320/jsoup-print-all-text-nodes-in-order\">this</a> Stackoverflow posting.</p>\n<p>I have made use of <code>List&lt;TextNode&gt;</code> in the API, similar to the <code>textNodes()</code> method on the <code>Element</code> class (although the list is passed as a parameter, and not returned from the method).</p>\n<pre><code>protected static void textNodes(Node targetNode, List&lt;TextNode&gt; nodeList) {\n    for (Node childNode : targetNode.childNodes()) {\n        if (childNode instanceof TextNode &amp;&amp; !((TextNode) childNode).isBlank()) {\n            nodeList.add((TextNode)childNode);\n        }\n        else {\n            textNodes(childNode, nodeList);\n        }\n    }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9890,"page":27,"page_size":100}
