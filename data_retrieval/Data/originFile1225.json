{"items":[{"tags":["java","data-structures"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":5,"creation_date":1656513830,"post_id":72803329,"comment_id":128592336,"body_markdown":"Does this answer your question? [Why does the default Object.toString() include the hashcode?](https://stackoverflow.com/questions/4712139/why-does-the-default-object-tostring-include-the-hashcode)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/4712139/why-does-the-default-object-tostring-include-the-hashcode\">Why does the default Object.toString() include the hashcode?</a>"},{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":4,"creation_date":1656513875,"post_id":72803329,"comment_id":128592355,"body_markdown":"See also: [How do I print my Java object without getting &quot;SomeType@2f92e0f4&quot;?](https://stackoverflow.com/questions/29140402/how-do-i-print-my-java-object-without-getting-sometype2f92e0f4)","body":"See also: <a href=\"https://stackoverflow.com/questions/29140402/how-do-i-print-my-java-object-without-getting-sometype2f92e0f4\">How do I print my Java object without getting &quot;SomeType@2f92e0f4&quot;?</a>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1656514020,"post_id":72803329,"comment_id":128592427,"body_markdown":"java does not know how to make a String representation of an instance of any random class. So there&#39;s a default implementation, the result of which you can see here.","body":"java does not know how to make a String representation of an instance of any random class. So there&#39;s a default implementation, the result of which you can see here."}],"owner":{"account_id":25479763,"reputation":1,"user_id":19276332,"display_name":"John david"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1656514113,"answer_count":0,"score":0,"last_activity_date":1656513749,"creation_date":1656513729,"question_id":72803329,"body_markdown":"    package packege1s;\r\n    \r\n    class p1{\r\n    \tp1 p;\r\n    \tint a;\r\n    \tp1(int a,p1 p){\r\n    \t\tthis.p = p;\r\n    \t\tthis.a = a;\r\n    \t}\r\n    }\r\n    \r\n    public class LinkedlistEg{\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tp1 n = new p1(21,null);\r\n    \t\tp1 n1 = new p1(21,n);\r\n    \t\tSystem.out.println(n.p);\r\n    \t\tSystem.out.println(n1.p);\r\n    \t}\r\n    }\r\n\r\nWhen I run this code I get the following output : \r\n\r\n    null\r\n    packege1s.p1@156643d4\r\n\r\nWhat is packege1s.p1@156643d4? (packege1s is the name of the package)\r\n\r\n ","title":"Printing the reference of an object","body":"<pre><code>package packege1s;\n\nclass p1{\n    p1 p;\n    int a;\n    p1(int a,p1 p){\n        this.p = p;\n        this.a = a;\n    }\n}\n\npublic class LinkedlistEg{\n    \n    public static void main(String[] args) {\n\n        p1 n = new p1(21,null);\n        p1 n1 = new p1(21,n);\n        System.out.println(n.p);\n        System.out.println(n1.p);\n    }\n}\n</code></pre>\n<p>When I run this code I get the following output :</p>\n<pre><code>null\npackege1s.p1@156643d4\n</code></pre>\n<p>What is packege1s.p1@156643d4? (packege1s is the name of the package)</p>\n"},{"tags":["java","bouncycastle","public-key","secret-key","ecdh"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1534468915,"post_id":51861056,"comment_id":90725779,"body_markdown":"(x,y) are not enough information, you also need to know what particular elliptic curve they are from.","body":"(x,y) are not enough information, you also need to know what particular elliptic curve they are from."},{"owner":{"account_id":1226320,"reputation":825,"user_id":8954551,"display_name":"Vito Lipari"},"score":0,"creation_date":1534702978,"post_id":51861056,"comment_id":90790942,"body_markdown":"I have all necessary informations ( curve name, curve parameters, etc.. ). How can I set the public key from this informations ( x,y point, curve parameters, etc.. )?\nBob must receive all the information from alice?","body":"I have all necessary informations ( curve name, curve parameters, etc.. ). How can I set the public key from this informations ( x,y point, curve parameters, etc.. )? Bob must receive all the information from alice?"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1535941758,"post_id":51861056,"comment_id":91234870,"body_markdown":"I thought I already commented on this. If you just want a publickey, dupe https://stackoverflow.com/questions/30445997/loading-raw-64-byte-long-ecdsa-public-key-in-java and https://stackoverflow.com/questions/22646792/how-does-one-convert-a-public-ec-code-point-and-curve-name-into-a-publickey . If you particularly want to go through `X509EncodedKeySpec` even though you don&#39;t need to, see Maarten&#39;s answer to the former, or rfc5480 -- or rfc3279 except it&#39;s cheaper _and_ simpler to refer to SEC1 as 5480 does instead of only X9.62 as 3279 does. ...","body":"I thought I already commented on this. If you just want a publickey, dupe <a href=\"https://stackoverflow.com/questions/30445997/loading-raw-64-byte-long-ecdsa-public-key-in-java\" title=\"loading raw 64 byte long ecdsa public key in java\">stackoverflow.com/questions/30445997/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/22646792/how-does-one-convert-a-public-ec-code-point-and-curve-name-into-a-publickey\" title=\"how does one convert a public ec code point and curve name into a publickey\">stackoverflow.com/questions/22646792/&hellip;</a> . If you particularly want to go through <code>X509EncodedKeySpec</code> even though you don&#39;t need to, see Maarten&#39;s answer to the former, or rfc5480 -- or rfc3279 except it&#39;s cheaper <i>and</i> simpler to refer to SEC1 as 5480 does instead of only X9.62 as 3279 does. ..."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1535941895,"post_id":51861056,"comment_id":91234893,"body_markdown":"... Also, unless you also send Bob&#39;s pubkey to Alice and let her do the derivation, you don&#39;t actually have key _agreement_: only Bob has the derived result, making it totally 100% useless.","body":"... Also, unless you also send Bob&#39;s pubkey to Alice and let her do the derivation, you don&#39;t actually have key <i>agreement</i>: only Bob has the derived result, making it totally 100% useless."}],"answers":[{"tags":[],"owner":{"account_id":1226320,"reputation":825,"user_id":8954551,"display_name":"Vito Lipari"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1656513255,"creation_date":1565904893,"answer_id":57516532,"question_id":51861056,"body_markdown":"I solved in this way ( Java Server Side )\r\n\r\n    // arrive a string like this 04456cb4ba8ee9263311485baa8562c27991f7ff22d59f3d8245b9a05661d159911b632a6f8a7a080d82f4ca77e4d12bb201b89c8ec93f61d5b4dd22df42e1b482\r\n    Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();\r\n        try {\r\n\r\n            // set provider\r\n            Security.addProvider(new BouncyCastleProvider());\r\n\r\n            // transform from hex to ECPublicKey\r\n            byte[] ecRawExternalPublicKey = HexFormat.of().parseHex(clientPublicKey.getPublicKey());\r\n            ECPublicKey ecExternalPublicKey = null;\r\n            KeyFactory externalKeyFactor = null;\r\n\r\n            ECNamedCurveParameterSpec ecExternalNamedCurveParameterSpec = ECNamedCurveTable.getParameterSpec(&quot;secp256r1&quot;);\r\n            ECCurve curve = ecExternalNamedCurveParameterSpec.getCurve();\r\n            EllipticCurve ellipticCurve = EC5Util.convertCurve(curve, ecExternalNamedCurveParameterSpec.getSeed());\r\n            java.security.spec.ECPoint ecPoint = ECPointUtil.decodePoint(ellipticCurve, ecRawExternalPublicKey);\r\n            java.security.spec.ECParameterSpec ecParameterSpec = EC5Util.convertSpec(ellipticCurve, ecExternalNamedCurveParameterSpec);\r\n            java.security.spec.ECPublicKeySpec externalPublicKeySpec = new java.security.spec.ECPublicKeySpec(ecPoint, ecParameterSpec);\r\n\r\n            externalKeyFactor = java.security.KeyFactory.getInstance(&quot;EC&quot;);\r\n            // this is externalPubicKey\r\n            ecExternalPublicKey = (ECPublicKey) externalKeyFactor.generatePublic(externalPublicKeySpec);\r\n\r\n            KeyPairGenerator keyGen = KeyPairGenerator.getInstance(&quot;ECDH&quot;, &quot;BC&quot;);\r\n            keyGen.initialize(new ECGenParameterSpec(&quot;secp256r1&quot;), new SecureRandom());\r\n\r\n            KeyPair pair = keyGen.generateKeyPair();\r\n            ECPublicKey pub = (ECPublicKey)pair.getPublic();\r\n            ECPrivateKey pvt = (ECPrivateKey)pair.getPrivate();\r\n\r\n            byte[] pubEncoded = pub.getEncoded();\r\n            byte[] pvtEncoded = pvt.getEncoded();\r\n\r\n            KeyAgreement keyAgree = KeyAgreement.getInstance(&quot;ECDH&quot;);\r\n            keyAgree.init(pvt);\r\n            keyAgree.doPhase(ecExternalPublicKey, true);\r\n\r\n            System.out.println(&quot;sharedKey: &quot;+ this.bytesToHex( keyAgree.generateSecret() ));\r\n\r\n            // internal public key\r\n            return &quot;04&quot;+ pub.getW().getAffineX().toString(16) + pub.getW().getAffineY().toString(16)\r\n\r\n        }\r\n        catch (Exception e ){\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n\r\n\r\nJavascript ( Client Side )\r\n\r\n    ecdhHandShake() {\r\n\t\tlet _this = this;\r\n\r\n\t\tthis.keyGeneration()\r\n\t\t.then( k =&gt; {\r\n\t\t\tajax({\r\n\t\t\t\turl: &quot;http://localhost:5050/test/ecdh/handshake&quot;,\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t&quot;Content-Type&quot;: &quot;application/json&quot;\r\n\t\t\t\t},\r\n\t\t\t\tbody: {\r\n\t\t\t\t\tpublickey: this.buf2Hex(this.publicKey)\r\n\t\t\t\t},\r\n\t\t\t\tmethod: &#39;POST&#39;,\r\n\t\t\t\tcrossDomain: true,\r\n\t\t\t\tresponseType: &#39;json&#39;\r\n\t\t\t})\r\n\t\t\t.subscribe(\r\n\t\t\t\tpayload =&gt; {\r\n\t\t\t\t\tconst publicKey = _this.hex2Arr(payload.response.publicKey);\r\n\t\t\t\t\t_this.serverPublicKey = _this.hex2Arr(payload.response.publicKey);\r\n\r\n\t\t\t\t\t_this.importServerKey()\r\n\t\t\t\t\t.then(sharedSecret =&gt; {\r\n\t\t\t\t\t\tconst sharedSecretHex = this.buf2Hex(sharedSecret);\r\n\t\t\t\t\t\tconsole.log(&quot;shared key: &quot;+ sharedSecretHex);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch( e =&gt; {\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t\terror =&gt; {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t},\r\n\t\t\t\t() =&gt; console.log(&#39;done&#39;)\r\n\t\t\t)\r\n\t\t\t;\r\n\t\t})\r\n\t\t.catch( e =&gt; {\r\n\t\t\tconsole.log(e);\r\n\t\t})\r\n\t\t;\r\n\t}\r\n    \r\n    \r\n    keyGeneration() {       \r\n        \r\n        let _this = this;\r\n        return window.crypto.subtle.generateKey(\r\n            {\r\n                name: &quot;ECDH&quot;,\r\n                namedCurve: &quot;P-256&quot;, // the curve name\r\n            },\r\n            true, // &lt;== Here if you want it to be exportable !!\r\n            [&quot;deriveKey&quot;, &quot;deriveBits&quot;] // usage\r\n        )\r\n        .then(key =&gt; {\r\n            _this.keys = key;\r\n            return window.crypto.subtle.exportKey(\r\n                &quot;raw&quot;, //can be &quot;jwk&quot; (public or private), &quot;raw&quot; (public only), &quot;spki&quot; (public only), or &quot;pkcs8&quot; (private only)\r\n                _this.keys.publicKey\r\n            )\r\n            .then(rawPublicKey =&gt; {\r\n                _this.publicKey = rawPublicKey;\r\n                return rawPublicKey;\r\n            })\r\n            .catch(function(err){\r\n                console.error(err);\r\n            })\r\n            ;\r\n        })\r\n        .catch(function(err){\r\n            console.error(err);\r\n        })\r\n        ;\r\n    \r\n    }\r\n\r\n    importServerKey() {\r\n\r\n        return window.crypto.subtle.importKey(\r\n            &#39;raw&#39;,\r\n            this.serverPublicKey,\r\n            {\r\n                name: &#39;ECDH&#39;,\r\n                namedCurve: &#39;P-256&#39;\r\n            },\r\n            true,\r\n            []\r\n        )\r\n        .then(aliceKeyImported =&gt; {\r\n            return window.crypto.subtle.deriveBits(\r\n                {\r\n                    name: &#39;ECDH&#39;,\r\n                    namedCurve: &#39;P-256&#39;,\r\n                    public: aliceKeyImported\r\n                },\r\n                this.keys.privateKey,\r\n                256)\r\n        })\r\n        .catch( e =&gt; {\r\n            console.log(e);\r\n        })\r\n    }\r\n\r\n\r\n    hex2Arr( str ) {\r\n        if (!str) {\r\n            return new Uint8Array();\r\n        }\r\n        const arr = [];\r\n        for (let i = 0, len = str.length; i &lt; len; i+=2) {\r\n            arr.push(parseInt(str.substr(i, 2), 16));\r\n        }\r\n        return new Uint8Array(arr);\r\n    }\r\n    \r\n    buf2Hex( buf ) {\r\n        return Array.from(new Uint8Array(buf))\r\n            .map(x =&gt; (&#39;00&#39; + x.toString(16)).slice(-2))\r\n            .join(&#39;&#39;)\r\n    }\r\n    \r\n    ","title":"Javascript - Java ECDH","body":"<p>I solved in this way ( Java Server Side )</p>\n<pre><code>// arrive a string like this 04456cb4ba8ee9263311485baa8562c27991f7ff22d59f3d8245b9a05661d159911b632a6f8a7a080d82f4ca77e4d12bb201b89c8ec93f61d5b4dd22df42e1b482\nMap&lt;String, Object&gt; result = new HashMap&lt;&gt;();\n    try {\n\n        // set provider\n        Security.addProvider(new BouncyCastleProvider());\n\n        // transform from hex to ECPublicKey\n        byte[] ecRawExternalPublicKey = HexFormat.of().parseHex(clientPublicKey.getPublicKey());\n        ECPublicKey ecExternalPublicKey = null;\n        KeyFactory externalKeyFactor = null;\n\n        ECNamedCurveParameterSpec ecExternalNamedCurveParameterSpec = ECNamedCurveTable.getParameterSpec(&quot;secp256r1&quot;);\n        ECCurve curve = ecExternalNamedCurveParameterSpec.getCurve();\n        EllipticCurve ellipticCurve = EC5Util.convertCurve(curve, ecExternalNamedCurveParameterSpec.getSeed());\n        java.security.spec.ECPoint ecPoint = ECPointUtil.decodePoint(ellipticCurve, ecRawExternalPublicKey);\n        java.security.spec.ECParameterSpec ecParameterSpec = EC5Util.convertSpec(ellipticCurve, ecExternalNamedCurveParameterSpec);\n        java.security.spec.ECPublicKeySpec externalPublicKeySpec = new java.security.spec.ECPublicKeySpec(ecPoint, ecParameterSpec);\n\n        externalKeyFactor = java.security.KeyFactory.getInstance(&quot;EC&quot;);\n        // this is externalPubicKey\n        ecExternalPublicKey = (ECPublicKey) externalKeyFactor.generatePublic(externalPublicKeySpec);\n\n        KeyPairGenerator keyGen = KeyPairGenerator.getInstance(&quot;ECDH&quot;, &quot;BC&quot;);\n        keyGen.initialize(new ECGenParameterSpec(&quot;secp256r1&quot;), new SecureRandom());\n\n        KeyPair pair = keyGen.generateKeyPair();\n        ECPublicKey pub = (ECPublicKey)pair.getPublic();\n        ECPrivateKey pvt = (ECPrivateKey)pair.getPrivate();\n\n        byte[] pubEncoded = pub.getEncoded();\n        byte[] pvtEncoded = pvt.getEncoded();\n\n        KeyAgreement keyAgree = KeyAgreement.getInstance(&quot;ECDH&quot;);\n        keyAgree.init(pvt);\n        keyAgree.doPhase(ecExternalPublicKey, true);\n\n        System.out.println(&quot;sharedKey: &quot;+ this.bytesToHex( keyAgree.generateSecret() ));\n\n        // internal public key\n        return &quot;04&quot;+ pub.getW().getAffineX().toString(16) + pub.getW().getAffineY().toString(16)\n\n    }\n    catch (Exception e ){\n        e.printStackTrace();\n        return null;\n    }\n</code></pre>\n<p>Javascript ( Client Side )</p>\n<pre><code>ecdhHandShake() {\n    let _this = this;\n\n    this.keyGeneration()\n    .then( k =&gt; {\n        ajax({\n            url: &quot;http://localhost:5050/test/ecdh/handshake&quot;,\n            headers: {\n                &quot;Content-Type&quot;: &quot;application/json&quot;\n            },\n            body: {\n                publickey: this.buf2Hex(this.publicKey)\n            },\n            method: 'POST',\n            crossDomain: true,\n            responseType: 'json'\n        })\n        .subscribe(\n            payload =&gt; {\n                const publicKey = _this.hex2Arr(payload.response.publicKey);\n                _this.serverPublicKey = _this.hex2Arr(payload.response.publicKey);\n\n                _this.importServerKey()\n                .then(sharedSecret =&gt; {\n                    const sharedSecretHex = this.buf2Hex(sharedSecret);\n                    console.log(&quot;shared key: &quot;+ sharedSecretHex);\n                })\n                .catch( e =&gt; {\n                    console.log(e);\n                })\n            },\n            error =&gt; {\n                console.log(error);\n            },\n            () =&gt; console.log('done')\n        )\n        ;\n    })\n    .catch( e =&gt; {\n        console.log(e);\n    })\n    ;\n}\n\n\nkeyGeneration() {       \n    \n    let _this = this;\n    return window.crypto.subtle.generateKey(\n        {\n            name: &quot;ECDH&quot;,\n            namedCurve: &quot;P-256&quot;, // the curve name\n        },\n        true, // &lt;== Here if you want it to be exportable !!\n        [&quot;deriveKey&quot;, &quot;deriveBits&quot;] // usage\n    )\n    .then(key =&gt; {\n        _this.keys = key;\n        return window.crypto.subtle.exportKey(\n            &quot;raw&quot;, //can be &quot;jwk&quot; (public or private), &quot;raw&quot; (public only), &quot;spki&quot; (public only), or &quot;pkcs8&quot; (private only)\n            _this.keys.publicKey\n        )\n        .then(rawPublicKey =&gt; {\n            _this.publicKey = rawPublicKey;\n            return rawPublicKey;\n        })\n        .catch(function(err){\n            console.error(err);\n        })\n        ;\n    })\n    .catch(function(err){\n        console.error(err);\n    })\n    ;\n\n}\n\nimportServerKey() {\n\n    return window.crypto.subtle.importKey(\n        'raw',\n        this.serverPublicKey,\n        {\n            name: 'ECDH',\n            namedCurve: 'P-256'\n        },\n        true,\n        []\n    )\n    .then(aliceKeyImported =&gt; {\n        return window.crypto.subtle.deriveBits(\n            {\n                name: 'ECDH',\n                namedCurve: 'P-256',\n                public: aliceKeyImported\n            },\n            this.keys.privateKey,\n            256)\n    })\n    .catch( e =&gt; {\n        console.log(e);\n    })\n}\n\n\nhex2Arr( str ) {\n    if (!str) {\n        return new Uint8Array();\n    }\n    const arr = [];\n    for (let i = 0, len = str.length; i &lt; len; i+=2) {\n        arr.push(parseInt(str.substr(i, 2), 16));\n    }\n    return new Uint8Array(arr);\n}\n\nbuf2Hex( buf ) {\n    return Array.from(new Uint8Array(buf))\n        .map(x =&gt; ('00' + x.toString(16)).slice(-2))\n        .join('')\n}\n</code></pre>\n"}],"owner":{"account_id":1226320,"reputation":825,"user_id":8954551,"display_name":"Vito Lipari"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1562,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":57516532,"answer_count":1,"score":2,"last_activity_date":1656513255,"creation_date":1534344562,"question_id":51861056,"body_markdown":"In my scenario there are Alice and Bob who have agreed on which curve to use. \r\n\r\n- Alice generates the public key and the private key \r\n- Alice sends the public key to Bob \r\n- Bob generates his keys and generates the session key ( or secret key, or shared key ) based on the Alice public key he received.\r\n\r\nMy problem is that Alice&#39;s public key is actually a point, so it has the xy format.\r\n\r\nI need to convert the x,y coordinates bytes into a ECPublicKey.\r\n\r\nThis is the source code I&#39;m using        \r\n\r\n        // outerPublicKey is the raw bytes from x,y coordinates in hex format\r\n        KeyFactory kf = KeyFactory.getInstance(&quot;EC&quot;);\r\n\r\n        PublicKey remoteAlicePub = kf.generatePublic(new X509EncodedKeySpec(outerPublicKey));\r\n\r\n        KeyPairGenerator bobKeyGen = KeyPairGenerator.getInstance(&quot;ECDH&quot;, &quot;BC&quot;);\r\n        bobKeyGen.initialize(new ECGenParameterSpec(properties.getCurveName()), new SecureRandom());\r\n\r\n        KeyPair bobPair = bobKeyGen.generateKeyPair();\r\n        ECPublicKey bobPub = (ECPublicKey)bobPair.getPublic();\r\n        ECPrivateKey bobPvt = (ECPrivateKey)bobPair.getPrivate();\r\n\r\n        byte[] bobPubEncoded = bobPub.getEncoded();\r\n        byte[] bobPvtEncoded = bobPvt.getEncoded();\r\n\r\n        KeyAgreement bobKeyAgree = KeyAgreement.getInstance(&quot;ECDH&quot;);\r\n        bobKeyAgree.init(bobPvt);\r\n        bobKeyAgree.doPhase(remoteAlicePub, true);\r\n\r\n        return DatatypeConverter.printHexBinary(bobKeyAgree.generateSecret());\r\n\r\n\r\nthe problem is:\r\n\r\n        new X509EncodedKeySpec(outerPublicKey);\r\n\r\n\r\nHow can I create a public key from the xy coordinates of the point?\r\nbecause `outerPublicKey` is a raw byte array of x,y coordinates, what kind of format should i use?","title":"Javascript - Java ECDH","body":"<p>In my scenario there are Alice and Bob who have agreed on which curve to use. </p>\n\n<ul>\n<li>Alice generates the public key and the private key </li>\n<li>Alice sends the public key to Bob </li>\n<li>Bob generates his keys and generates the session key ( or secret key, or shared key ) based on the Alice public key he received.</li>\n</ul>\n\n<p>My problem is that Alice's public key is actually a point, so it has the xy format.</p>\n\n<p>I need to convert the x,y coordinates bytes into a ECPublicKey.</p>\n\n<p>This is the source code I'm using        </p>\n\n<pre><code>    // outerPublicKey is the raw bytes from x,y coordinates in hex format\n    KeyFactory kf = KeyFactory.getInstance(\"EC\");\n\n    PublicKey remoteAlicePub = kf.generatePublic(new X509EncodedKeySpec(outerPublicKey));\n\n    KeyPairGenerator bobKeyGen = KeyPairGenerator.getInstance(\"ECDH\", \"BC\");\n    bobKeyGen.initialize(new ECGenParameterSpec(properties.getCurveName()), new SecureRandom());\n\n    KeyPair bobPair = bobKeyGen.generateKeyPair();\n    ECPublicKey bobPub = (ECPublicKey)bobPair.getPublic();\n    ECPrivateKey bobPvt = (ECPrivateKey)bobPair.getPrivate();\n\n    byte[] bobPubEncoded = bobPub.getEncoded();\n    byte[] bobPvtEncoded = bobPvt.getEncoded();\n\n    KeyAgreement bobKeyAgree = KeyAgreement.getInstance(\"ECDH\");\n    bobKeyAgree.init(bobPvt);\n    bobKeyAgree.doPhase(remoteAlicePub, true);\n\n    return DatatypeConverter.printHexBinary(bobKeyAgree.generateSecret());\n</code></pre>\n\n<p>the problem is:</p>\n\n<pre><code>    new X509EncodedKeySpec(outerPublicKey);\n</code></pre>\n\n<p>How can I create a public key from the xy coordinates of the point?\nbecause <code>outerPublicKey</code> is a raw byte array of x,y coordinates, what kind of format should i use?</p>\n"},{"tags":["java","android","user-interface","colors","android-styles"],"comments":[{"owner":{"account_id":1773418,"reputation":18513,"user_id":1617737,"accept_rate":53,"display_name":"ban-geoengineering"},"score":0,"creation_date":1452002890,"post_id":26788464,"comment_id":56972414,"body_markdown":"None of the XML-based answers so far have solved this issue for me, but I have successfully used your `homeAsUpIndicator` / `@drawable/abc_ic_ab_back_mtrl_am_alpha` code to make the back arrow white. I prefer this than hacking into the Java.","body":"None of the XML-based answers so far have solved this issue for me, but I have successfully used your <code>homeAsUpIndicator</code> / <code>@drawable&#47;abc_ic_ab_back_mtrl_am_alpha</code> code to make the back arrow white. I prefer this than hacking into the Java."},{"owner":{"account_id":5838839,"reputation":1527,"user_id":4601078,"accept_rate":27,"display_name":"f470071"},"score":0,"creation_date":1490895362,"post_id":26788464,"comment_id":73328545,"body_markdown":"Old but still. Are (were) you using ActionBar or the new Toolbar?","body":"Old but still. Are (were) you using ActionBar or the new Toolbar?"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1513608279,"post_id":26788464,"comment_id":82706787,"body_markdown":"The default one is supposed to be a bit gray, by using android:theme=&quot;@style/Widget.AppCompat.Light.ActionBar&quot; inside the Toolbar XML tag. Its color is #737373","body":"The default one is supposed to be a bit gray, by using android:theme=&quot;@style/Widget.AppCompat.Light.ActionBar&quot; inside the Toolbar XML tag. Its color is #737373"}],"answers":[{"tags":[],"owner":{"account_id":292867,"reputation":6585,"user_id":595881,"accept_rate":85,"display_name":"Fl&#225;vio Faria"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1415306275,"creation_date":1415306275,"answer_id":26788957,"question_id":26788464,"body_markdown":"Just remove `android:homeAsUpIndicator` and `homeAsUpIndicator` from your theme and it will be fine. The `color` attribute in your `DrawerArrowStyle` style must be enough.","title":"How to change color of the back arrow in the new material theme?","body":"<p>Just remove <code>android:homeAsUpIndicator</code> and <code>homeAsUpIndicator</code> from your theme and it will be fine. The <code>color</code> attribute in your <code>DrawerArrowStyle</code> style must be enough.</p>\n"},{"tags":[],"owner":{"account_id":1136523,"reputation":11039,"user_id":1121497,"accept_rate":42,"display_name":"Ferran Maylinch"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1415475498,"creation_date":1415475498,"answer_id":26821268,"question_id":26788464,"body_markdown":"Unless there&#39;s a better solution...\r\n\r\nWhat I did is to take the `@drawable/abc_ic_ab_back_mtrl_am_alpha` images, which seem to be white, and paint them in the color I desire using a photo editor.","title":"How to change color of the back arrow in the new material theme?","body":"<p>Unless there's a better solution...</p>\n\n<p>What I did is to take the <code>@drawable/abc_ic_ab_back_mtrl_am_alpha</code> images, which seem to be white, and paint them in the color I desire using a photo editor.</p>\n"},{"tags":[],"owner":{"account_id":3340451,"reputation":4509,"user_id":2806855,"display_name":"Carles"},"down_vote_count":3,"up_vote_count":374,"is_accepted":true,"score":371,"last_activity_date":1519390283,"creation_date":1415595750,"answer_id":26837072,"question_id":26788464,"body_markdown":"You can achieve it through code. Obtain the back arrow drawable, modify its color with a filter, and set it as back button.\r\n\r\n    final Drawable upArrow = getResources().getDrawable(R.drawable.abc_ic_ab_back_mtrl_am_alpha);\r\n    upArrow.setColorFilter(getResources().getColor(R.color.grey), PorterDuff.Mode.SRC_ATOP);\r\n    getSupportActionBar().setHomeAsUpIndicator(upArrow);\r\n\r\n**Revision 1:**\r\n\r\nStarting from API 23 (Marshmallow) the drawable resource `abc_ic_ab_back_mtrl_am_alpha` is changed to `abc_ic_ab_back_material`.\r\n \r\nEDIT:\r\n\r\nYou can use this code to achieve the results you want:\r\n\r\n    toolbar.getNavigationIcon().setColorFilter(getResources().getColor(R.color.blue_gray_15), PorterDuff.Mode.SRC_ATOP);","title":"How to change color of the back arrow in the new material theme?","body":"<p>You can achieve it through code. Obtain the back arrow drawable, modify its color with a filter, and set it as back button.</p>\n\n<pre><code>final Drawable upArrow = getResources().getDrawable(R.drawable.abc_ic_ab_back_mtrl_am_alpha);\nupArrow.setColorFilter(getResources().getColor(R.color.grey), PorterDuff.Mode.SRC_ATOP);\ngetSupportActionBar().setHomeAsUpIndicator(upArrow);\n</code></pre>\n\n<p><strong>Revision 1:</strong></p>\n\n<p>Starting from API 23 (Marshmallow) the drawable resource <code>abc_ic_ab_back_mtrl_am_alpha</code> is changed to <code>abc_ic_ab_back_material</code>.</p>\n\n<p>EDIT:</p>\n\n<p>You can use this code to achieve the results you want:</p>\n\n<pre><code>toolbar.getNavigationIcon().setColorFilter(getResources().getColor(R.color.blue_gray_15), PorterDuff.Mode.SRC_ATOP);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1833788,"reputation":4157,"user_id":1664556,"accept_rate":43,"display_name":"rockgecko"},"down_vote_count":5,"up_vote_count":218,"is_accepted":false,"score":213,"last_activity_date":1419211292,"creation_date":1418787148,"answer_id":27517878,"question_id":26788464,"body_markdown":"Looking at the `Toolbar` and `TintManager` source, `drawable/abc_ic_ab_back_mtrl_am_alpha` is tinted with the value of the style attribute `colorControlNormal`.\r\n\r\nI did try setting this in my project (with `&lt;item name=&quot;colorControlNormal&quot;&gt;@color/my_awesome_color&lt;/item&gt;` in my theme), but it&#39;s still black for me.\r\n\r\n**Update**:\r\n\r\nFound it. You need to set the `actionBarTheme` attribute (**not** `actionBarStyle`) with `colorControlNormal`.\r\n\r\nEg:\r\n\r\n    &lt;style name=&quot;MyTheme&quot; parent=&quot;Theme.AppCompat.Light&quot;&gt;        \r\n        &lt;item name=&quot;actionBarTheme&quot;&gt;@style/MyApp.ActionBarTheme&lt;/item&gt;\r\n        &lt;item name=&quot;actionBarStyle&quot;&gt;@style/MyApp.ActionBar&lt;/item&gt;\r\n        &lt;!-- color for widget theming, eg EditText. Doesn&#39;t effect ActionBar. --&gt;\r\n        &lt;item name=&quot;colorControlNormal&quot;&gt;@color/my_awesome_color&lt;/item&gt;\r\n        &lt;!-- The animated arrow style --&gt;\r\n        &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/DrawerArrowStyle&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;style name=&quot;MyApp.ActionBarTheme&quot; parent=&quot;@style/ThemeOverlay.AppCompat.ActionBar&quot;&gt;       \r\n        &lt;!-- THIS is where you can color the arrow! --&gt;\r\n        &lt;item name=&quot;colorControlNormal&quot;&gt;@color/my_awesome_color&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;style name=&quot;MyApp.ActionBarStyle&quot; parent=&quot;@style/Widget.AppCompat.Light.ActionBar&quot;&gt;\r\n        &lt;item name=&quot;elevation&quot;&gt;0dp&lt;/item&gt;      \r\n        &lt;!-- style for actionBar title --&gt;  \r\n        &lt;item name=&quot;titleTextStyle&quot;&gt;@style/ActionBarTitleText&lt;/item&gt;\r\n        &lt;!-- style for actionBar subtitle --&gt;  \r\n        &lt;item name=&quot;subtitleTextStyle&quot;&gt;@style/ActionBarSubtitleText&lt;/item&gt;\r\n\r\n        &lt;!-- \r\n        the actionBarTheme doesn&#39;t use the colorControlNormal attribute\r\n        &lt;item name=&quot;colorControlNormal&quot;&gt;@color/my_awesome_color&lt;/item&gt;\r\n         --&gt;\r\n    &lt;/style&gt;","title":"How to change color of the back arrow in the new material theme?","body":"<p>Looking at the <code>Toolbar</code> and <code>TintManager</code> source, <code>drawable/abc_ic_ab_back_mtrl_am_alpha</code> is tinted with the value of the style attribute <code>colorControlNormal</code>.</p>\n\n<p>I did try setting this in my project (with <code>&lt;item name=\"colorControlNormal\"&gt;@color/my_awesome_color&lt;/item&gt;</code> in my theme), but it's still black for me.</p>\n\n<p><strong>Update</strong>:</p>\n\n<p>Found it. You need to set the <code>actionBarTheme</code> attribute (<strong>not</strong> <code>actionBarStyle</code>) with <code>colorControlNormal</code>.</p>\n\n<p>Eg:</p>\n\n<pre><code>&lt;style name=\"MyTheme\" parent=\"Theme.AppCompat.Light\"&gt;        \n    &lt;item name=\"actionBarTheme\"&gt;@style/MyApp.ActionBarTheme&lt;/item&gt;\n    &lt;item name=\"actionBarStyle\"&gt;@style/MyApp.ActionBar&lt;/item&gt;\n    &lt;!-- color for widget theming, eg EditText. Doesn't effect ActionBar. --&gt;\n    &lt;item name=\"colorControlNormal\"&gt;@color/my_awesome_color&lt;/item&gt;\n    &lt;!-- The animated arrow style --&gt;\n    &lt;item name=\"drawerArrowStyle\"&gt;@style/DrawerArrowStyle&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"MyApp.ActionBarTheme\" parent=\"@style/ThemeOverlay.AppCompat.ActionBar\"&gt;       \n    &lt;!-- THIS is where you can color the arrow! --&gt;\n    &lt;item name=\"colorControlNormal\"&gt;@color/my_awesome_color&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"MyApp.ActionBarStyle\" parent=\"@style/Widget.AppCompat.Light.ActionBar\"&gt;\n    &lt;item name=\"elevation\"&gt;0dp&lt;/item&gt;      \n    &lt;!-- style for actionBar title --&gt;  \n    &lt;item name=\"titleTextStyle\"&gt;@style/ActionBarTitleText&lt;/item&gt;\n    &lt;!-- style for actionBar subtitle --&gt;  \n    &lt;item name=\"subtitleTextStyle\"&gt;@style/ActionBarSubtitleText&lt;/item&gt;\n\n    &lt;!-- \n    the actionBarTheme doesn't use the colorControlNormal attribute\n    &lt;item name=\"colorControlNormal\"&gt;@color/my_awesome_color&lt;/item&gt;\n     --&gt;\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":397387,"reputation":133,"user_id":761493,"display_name":"GFred"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1426652030,"creation_date":1426652030,"answer_id":29114008,"question_id":26788464,"body_markdown":"I found a solution that works pre Lollipop.  Set the &quot;colorControlNormal&quot; within the &quot;actionBarWidgetTheme&quot; to change the homeAsUpIndicator color.  Modifying rockgecko&#39;s answer from above to look like this:\r\n\r\n    &lt;style name=&quot;MyTheme&quot; parent=&quot;Theme.AppCompat.Light&quot;&gt;        \r\n        &lt;item name=&quot;actionBarTheme&quot;&gt;@style/MyApp.ActionBarTheme&lt;/item&gt;\r\n        &lt;item name=&quot;actionBarStyle&quot;&gt;@style/MyApp.ActionBar&lt;/item&gt;\r\n        &lt;!-- color for widget theming, eg EditText. Doesn&#39;t effect ActionBar. --&gt;\r\n        &lt;item name=&quot;colorControlNormal&quot;&gt;@color/my_awesome_color&lt;/item&gt;\r\n        &lt;!-- The animated arrow style --&gt;\r\n        &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/DrawerArrowStyle&lt;/item&gt;\r\n\t    &lt;!-- The style for the widgets on the ActionBar. --&gt;\r\n\t    &lt;item name=&quot;actionBarWidgetTheme&quot;&gt;@style/WidgetStyle&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;style name=&quot;WidgetStyle&quot; parent=&quot;style/ThemeOverlay.AppCompat.Light&quot;&gt;\r\n\t    &lt;item name=&quot;colorControlNormal&quot;&gt;@color/my_awesome_color&lt;/item&gt;\r\n    &lt;/style&gt;","title":"How to change color of the back arrow in the new material theme?","body":"<p>I found a solution that works pre Lollipop.  Set the \"colorControlNormal\" within the \"actionBarWidgetTheme\" to change the homeAsUpIndicator color.  Modifying rockgecko's answer from above to look like this:</p>\n\n<pre><code>&lt;style name=\"MyTheme\" parent=\"Theme.AppCompat.Light\"&gt;        \n    &lt;item name=\"actionBarTheme\"&gt;@style/MyApp.ActionBarTheme&lt;/item&gt;\n    &lt;item name=\"actionBarStyle\"&gt;@style/MyApp.ActionBar&lt;/item&gt;\n    &lt;!-- color for widget theming, eg EditText. Doesn't effect ActionBar. --&gt;\n    &lt;item name=\"colorControlNormal\"&gt;@color/my_awesome_color&lt;/item&gt;\n    &lt;!-- The animated arrow style --&gt;\n    &lt;item name=\"drawerArrowStyle\"&gt;@style/DrawerArrowStyle&lt;/item&gt;\n    &lt;!-- The style for the widgets on the ActionBar. --&gt;\n    &lt;item name=\"actionBarWidgetTheme\"&gt;@style/WidgetStyle&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"WidgetStyle\" parent=\"style/ThemeOverlay.AppCompat.Light\"&gt;\n    &lt;item name=\"colorControlNormal\"&gt;@color/my_awesome_color&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1932473,"reputation":3546,"user_id":1741586,"accept_rate":25,"display_name":"Neo"},"down_vote_count":0,"up_vote_count":70,"is_accepted":false,"score":70,"last_activity_date":1467369020,"creation_date":1435517930,"answer_id":31103586,"question_id":26788464,"body_markdown":"Need to add a single attribute to your toolbar theme - \r\n\r\n    &lt;style name=&quot;toolbar_theme&quot; parent=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;&gt;\r\n        &lt;item name=&quot;colorControlNormal&quot;&gt;@color/arrow_color&lt;/item&gt;\r\n    &lt;/style&gt;\r\nApply this toolbar_theme to your toolbar.\r\n\r\n**OR** \r\n\r\nyou can directly apply to your theme - \r\n\r\n    &lt;style name=&quot;CustomTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n      &lt;item name=&quot;colorControlNormal&quot;&gt;@color/arrow_color&lt;/item&gt; \r\n      //your code ....\r\n    &lt;/style&gt;","title":"How to change color of the back arrow in the new material theme?","body":"<p>Need to add a single attribute to your toolbar theme - </p>\n\n<pre><code>&lt;style name=\"toolbar_theme\" parent=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"&gt;\n    &lt;item name=\"colorControlNormal\"&gt;@color/arrow_color&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>Apply this toolbar_theme to your toolbar.</p>\n\n<p><strong>OR</strong> </p>\n\n<p>you can directly apply to your theme - </p>\n\n<pre><code>&lt;style name=\"CustomTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n  &lt;item name=\"colorControlNormal\"&gt;@color/arrow_color&lt;/item&gt; \n  //your code ....\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2605109,"reputation":4349,"user_id":2373113,"accept_rate":40,"display_name":"Jumpa"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1449581862,"creation_date":1436895662,"answer_id":31413647,"question_id":26788464,"body_markdown":"Use below method:\r\n\r\n    private Drawable getColoredArrow() {\r\n        Drawable arrowDrawable = getResources().getDrawable(R.drawable.abc_ic_ab_back_mtrl_am_alpha);\r\n        Drawable wrapped = DrawableCompat.wrap(arrowDrawable);\r\n    \r\n        if (arrowDrawable != null &amp;&amp; wrapped != null) {\r\n            // This should avoid tinting all the arrows\r\n            arrowDrawable.mutate();\r\n            DrawableCompat.setTint(wrapped, Color.GRAY);\r\n        }\r\n    \r\n        return wrapped;\r\n    }\r\n\r\nNow you can set the drawable with:\r\n\r\n    getSupportActionBar().setHomeAsUpIndicator(getColoredArrow());","title":"How to change color of the back arrow in the new material theme?","body":"<p>Use below method:</p>\n\n<pre><code>private Drawable getColoredArrow() {\n    Drawable arrowDrawable = getResources().getDrawable(R.drawable.abc_ic_ab_back_mtrl_am_alpha);\n    Drawable wrapped = DrawableCompat.wrap(arrowDrawable);\n\n    if (arrowDrawable != null &amp;&amp; wrapped != null) {\n        // This should avoid tinting all the arrows\n        arrowDrawable.mutate();\n        DrawableCompat.setTint(wrapped, Color.GRAY);\n    }\n\n    return wrapped;\n}\n</code></pre>\n\n<p>Now you can set the drawable with:</p>\n\n<pre><code>getSupportActionBar().setHomeAsUpIndicator(getColoredArrow());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4871977,"reputation":1612,"user_id":3928135,"display_name":"Harry Aung"},"down_vote_count":1,"up_vote_count":128,"is_accepted":false,"score":127,"last_activity_date":1442308664,"creation_date":1442308664,"answer_id":32582254,"question_id":26788464,"body_markdown":"Tried all suggestions above. The only way that I managed to change the color of navigation icon default Back button arrow in my toolbar is to set colorControlNormal in base theme like this. Probably due to the fact that the parent is using Theme.AppCompat.Light.NoActionBar  \r\n\r\n    &lt;style name=&quot;BaseTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n      &lt;item name=&quot;colorControlNormal&quot;&gt;@color/white&lt;/item&gt; \r\n      //the rest of your codes...\r\n    &lt;/style&gt;","title":"How to change color of the back arrow in the new material theme?","body":"<p>Tried all suggestions above. The only way that I managed to change the color of navigation icon default Back button arrow in my toolbar is to set colorControlNormal in base theme like this. Probably due to the fact that the parent is using Theme.AppCompat.Light.NoActionBar  </p>\n\n<pre><code>&lt;style name=\"BaseTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n  &lt;item name=\"colorControlNormal\"&gt;@color/white&lt;/item&gt; \n  //the rest of your codes...\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":451597,"reputation":9982,"user_id":847575,"accept_rate":93,"display_name":"Vinay W"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1467933845,"creation_date":1449669725,"answer_id":34180711,"question_id":26788464,"body_markdown":"Another solution that might work for you is to not declare your toolbar as the app&#39;s action bar ( by `setActionBar` or `setSupportActionBar` ) and set the back icon in your onActivityCreated using the code mentioned in another answer on this page\r\n\r\n    final Drawable upArrow = getResources().getDrawable(R.drawable.abc_ic_ab_back_mtrl_am_alpha);\r\n    upArrow.setColorFilter(getResources().getColor(R.color.grey), PorterDuff.Mode.SRC_ATOP);\r\n    toolbar.setNavigationIcon(upArrow);\r\n\r\nNow, you will not get the `onOptionItemSelected` callback when you press the back button. However, you can register for that using `setNavigationOnClickListener`. This is what i do: \r\n\r\n    toolbar.setNavigationOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            getActivity().onBackPressed(); //or whatever you used to do on your onOptionItemSelected&#39;s android.R.id.home callback\r\n        }\r\n    });\r\n\r\nI&#39;m not sure if it will work if you work with menu items. ","title":"How to change color of the back arrow in the new material theme?","body":"<p>Another solution that might work for you is to not declare your toolbar as the app's action bar ( by <code>setActionBar</code> or <code>setSupportActionBar</code> ) and set the back icon in your onActivityCreated using the code mentioned in another answer on this page</p>\n\n<pre><code>final Drawable upArrow = getResources().getDrawable(R.drawable.abc_ic_ab_back_mtrl_am_alpha);\nupArrow.setColorFilter(getResources().getColor(R.color.grey), PorterDuff.Mode.SRC_ATOP);\ntoolbar.setNavigationIcon(upArrow);\n</code></pre>\n\n<p>Now, you will not get the <code>onOptionItemSelected</code> callback when you press the back button. However, you can register for that using <code>setNavigationOnClickListener</code>. This is what i do: </p>\n\n<pre><code>toolbar.setNavigationOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        getActivity().onBackPressed(); //or whatever you used to do on your onOptionItemSelected's android.R.id.home callback\n    }\n});\n</code></pre>\n\n<p>I'm not sure if it will work if you work with menu items. </p>\n"},{"tags":[],"owner":{"account_id":2733341,"reputation":10415,"user_id":2356570,"accept_rate":73,"display_name":"capt.swag"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1454560960,"creation_date":1454560960,"answer_id":35192656,"question_id":26788464,"body_markdown":"The answer by Carles is the correct answer, but few of the methods like ***getDrawable(), getColor() got deprecated at the time I am writing this answer***. So the updated answer would be\r\n\r\n    Drawable upArrow = ContextCompat.getDrawable(context, R.drawable.abc_ic_ab_back_mtrl_am_alpha);\r\n    upArrow.setColorFilter(ContextCompat.getColor(context, R.color.white), PorterDuff.Mode.SRC_ATOP);\r\n    getSupportActionBar().setHomeAsUpIndicator(upArrow);\r\n\r\n---\r\nFollowing some other stackoverflow queries I found that calling ***ContextCompat.getDrawable()*** is similar to\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n        return resources.getDrawable(id, context.getTheme());\r\n    } else {\r\n        return resources.getDrawable(id);\r\n    }\r\n\r\n---\r\nAnd **ContextCompat.getColor()** is similar to \r\n\r\n    public static final int getColor(Context context, int id) {\r\n        final int version = Build.VERSION.SDK_INT;\r\n        if (version &gt;= 23) {\r\n            return ContextCompatApi23.getColor(context, id);\r\n        } else {\r\n            return context.getResources().getColor(id);\r\n        }\r\n    }\r\n\r\n***[Link 1: ContextCompat.getDrawable()][1]***\r\n\r\n***[Link 2: ContextCompat.getColor()][2]***\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/29041027/android-getresources-getdrawable-deprecated-api-22\r\n  [2]: https://stackoverflow.com/questions/31590714/getcolorint-id-deprecated-on-android-6-0-marshmallow-api-23","title":"How to change color of the back arrow in the new material theme?","body":"<p>The answer by Carles is the correct answer, but few of the methods like <strong><em>getDrawable(), getColor() got deprecated at the time I am writing this answer</em></strong>. So the updated answer would be</p>\n\n<pre><code>Drawable upArrow = ContextCompat.getDrawable(context, R.drawable.abc_ic_ab_back_mtrl_am_alpha);\nupArrow.setColorFilter(ContextCompat.getColor(context, R.color.white), PorterDuff.Mode.SRC_ATOP);\ngetSupportActionBar().setHomeAsUpIndicator(upArrow);\n</code></pre>\n\n<hr>\n\n<p>Following some other stackoverflow queries I found that calling <strong><em>ContextCompat.getDrawable()</em></strong> is similar to</p>\n\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n    return resources.getDrawable(id, context.getTheme());\n} else {\n    return resources.getDrawable(id);\n}\n</code></pre>\n\n<hr>\n\n<p>And <strong>ContextCompat.getColor()</strong> is similar to </p>\n\n<pre><code>public static final int getColor(Context context, int id) {\n    final int version = Build.VERSION.SDK_INT;\n    if (version &gt;= 23) {\n        return ContextCompatApi23.getColor(context, id);\n    } else {\n        return context.getResources().getColor(id);\n    }\n}\n</code></pre>\n\n<p><strong><em><a href=\"https://stackoverflow.com/questions/29041027/android-getresources-getdrawable-deprecated-api-22\">Link 1: ContextCompat.getDrawable()</a></em></strong></p>\n\n<p><strong><em><a href=\"https://stackoverflow.com/questions/31590714/getcolorint-id-deprecated-on-android-6-0-marshmallow-api-23\">Link 2: ContextCompat.getColor()</a></em></strong></p>\n"},{"tags":[],"owner":{"account_id":6631047,"reputation":805,"user_id":5119746,"display_name":"Julian Horst"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1455801566,"creation_date":1455801566,"answer_id":35482603,"question_id":26788464,"body_markdown":"We were running into the same problem and all we wanted was to set the \n\n**app:collapseIcon**\n\n  attribute in the toolbar in the end, which we did not find since it is not very well documented :)\n\n    &lt;android.support.v7.widget.Toolbar\n             android:id=&quot;@+id/toolbar&quot;\n             android:layout_width=&quot;match_parent&quot;\n             android:layout_height=&quot;@dimen/toolbarHeight&quot;\n             app:collapseIcon=&quot;@drawable/collapseBackIcon&quot; /&gt;","title":"How to change color of the back arrow in the new material theme?","body":"<p>We were running into the same problem and all we wanted was to set the</p>\n<p><strong>app:collapseIcon</strong></p>\n<p>attribute in the toolbar in the end, which we did not find since it is not very well documented :)</p>\n<pre><code>&lt;android.support.v7.widget.Toolbar\n         android:id=&quot;@+id/toolbar&quot;\n         android:layout_width=&quot;match_parent&quot;\n         android:layout_height=&quot;@dimen/toolbarHeight&quot;\n         app:collapseIcon=&quot;@drawable/collapseBackIcon&quot; /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4190180,"reputation":822,"user_id":3432987,"accept_rate":13,"display_name":"Pravesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461827258,"creation_date":1461827258,"answer_id":36907618,"question_id":26788464,"body_markdown":"You can change the color of the navigation icon programmatically like this:\r\n\r\n    mToolbar.setNavigationIcon(getColoredArrow()); \r\n    \r\n    private Drawable getColoredArrow() {\r\n            Drawable arrowDrawable = getResources().getDrawable(R.drawable.abc_ic_ab_back_mtrl_am_alpha);\r\n            Drawable wrapped = DrawableCompat.wrap(arrowDrawable);\r\n    \r\n            if (arrowDrawable != null &amp;&amp; wrapped != null) {\r\n                // This should avoid tinting all the arrows\r\n                arrowDrawable.mutate();\r\n                    DrawableCompat.setTintList(wrapped, ColorStateList.valueOf(this.getResources().getColor(R.color.your_color)));\r\n                }\r\n            }\r\n    \r\n            return wrapped;\r\n    }","title":"How to change color of the back arrow in the new material theme?","body":"<p>You can change the color of the navigation icon programmatically like this:</p>\n\n<pre><code>mToolbar.setNavigationIcon(getColoredArrow()); \n\nprivate Drawable getColoredArrow() {\n        Drawable arrowDrawable = getResources().getDrawable(R.drawable.abc_ic_ab_back_mtrl_am_alpha);\n        Drawable wrapped = DrawableCompat.wrap(arrowDrawable);\n\n        if (arrowDrawable != null &amp;&amp; wrapped != null) {\n            // This should avoid tinting all the arrows\n            arrowDrawable.mutate();\n                DrawableCompat.setTintList(wrapped, ColorStateList.valueOf(this.getResources().getColor(R.color.your_color)));\n            }\n        }\n\n        return wrapped;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6939736,"reputation":1514,"user_id":5326518,"accept_rate":25,"display_name":"S bruce"},"down_vote_count":1,"up_vote_count":47,"is_accepted":false,"score":46,"last_activity_date":1471962722,"creation_date":1471962722,"answer_id":39104056,"question_id":26788464,"body_markdown":"Just add \r\n\r\n    &lt;item name=&quot;colorControlNormal&quot;&gt;@color/white&lt;/item&gt; \r\n\r\nto your current app theme.","title":"How to change color of the back arrow in the new material theme?","body":"<p>Just add </p>\n\n<pre><code>&lt;item name=\"colorControlNormal\"&gt;@color/white&lt;/item&gt; \n</code></pre>\n\n<p>to your current app theme.</p>\n"},{"tags":[],"owner":{"account_id":3093463,"reputation":525,"user_id":2619136,"display_name":"manuelvsc"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1473934020,"creation_date":1473934020,"answer_id":39508362,"question_id":26788464,"body_markdown":"As said on most of the previous comments, the solution is to add \r\n\r\n`&lt;item name=&quot;colorControlNormal&quot;&gt;@color/white&lt;/item&gt;` \r\nto your app theme. \r\nBut confirm that you don&#180;t have another theme defined in your Toolbar element on your layout.\r\n\r\n         &lt;android.support.v7.widget.Toolbar\r\n                android:id=&quot;@+id/toolbar&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;?attr/actionBarSize&quot;\r\n                android:background=&quot;?attr/colorPrimary&quot;\r\n                android:elevation=&quot;4dp&quot;\r\n                android:theme=&quot;@style/ThemeOverlay.AppCompat.ActionBar&quot;\r\n                app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot; /&gt;","title":"How to change color of the back arrow in the new material theme?","body":"<p>As said on most of the previous comments, the solution is to add </p>\n\n<p><code>&lt;item name=\"colorControlNormal\"&gt;@color/white&lt;/item&gt;</code> \nto your app theme. \nBut confirm that you dont have another theme defined in your Toolbar element on your layout.</p>\n\n<pre><code>     &lt;android.support.v7.widget.Toolbar\n            android:id=\"@+id/toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"?attr/actionBarSize\"\n            android:background=\"?attr/colorPrimary\"\n            android:elevation=\"4dp\"\n            android:theme=\"@style/ThemeOverlay.AppCompat.ActionBar\"\n            app:popupTheme=\"@style/ThemeOverlay.AppCompat.Light\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7192082,"reputation":5768,"user_id":5492017,"display_name":"Siddarth Kanted"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1477308883,"creation_date":1477308883,"answer_id":40217359,"question_id":26788464,"body_markdown":"try this\r\n\r\n\r\n\tpublic void enableActionBarHomeButton(AppCompatActivity appCompatActivity, int colorId){\r\n\r\n        final Drawable upArrow = ContextCompat.getDrawable(appCompatActivity, R.drawable.abc_ic_ab_back_material);\r\n        upArrow.setColorFilter(ContextCompat.getColor(appCompatActivity, colorId), PorterDuff.Mode.SRC_ATOP);\r\n\r\n        android.support.v7.app.ActionBar mActionBar = appCompatActivity.getSupportActionBar();\r\n        mActionBar.setHomeAsUpIndicator(upArrow);\r\n        mActionBar.setHomeButtonEnabled(true);\r\n        mActionBar.setDisplayHomeAsUpEnabled(true);\r\n    }\r\n\r\nfunction call:\r\n\r\n\tenableActionBarHomeButton(this, R.color.white);","title":"How to change color of the back arrow in the new material theme?","body":"<p>try this</p>\n\n<pre><code>public void enableActionBarHomeButton(AppCompatActivity appCompatActivity, int colorId){\n\n    final Drawable upArrow = ContextCompat.getDrawable(appCompatActivity, R.drawable.abc_ic_ab_back_material);\n    upArrow.setColorFilter(ContextCompat.getColor(appCompatActivity, colorId), PorterDuff.Mode.SRC_ATOP);\n\n    android.support.v7.app.ActionBar mActionBar = appCompatActivity.getSupportActionBar();\n    mActionBar.setHomeAsUpIndicator(upArrow);\n    mActionBar.setHomeButtonEnabled(true);\n    mActionBar.setDisplayHomeAsUpEnabled(true);\n}\n</code></pre>\n\n<p>function call:</p>\n\n<pre><code>enableActionBarHomeButton(this, R.color.white);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":110236,"reputation":4799,"user_id":291779,"accept_rate":44,"display_name":"chrizonline"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1481270415,"creation_date":1481270415,"answer_id":41055677,"question_id":26788464,"body_markdown":"On compileSdkVersoin 25, you could do this:\r\n\r\nstyles.xml\r\n\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light&quot;&gt;\r\n         &lt;item name=&quot;android:textColorSecondary&quot;&gt;@color/your_color&lt;/item&gt;\r\n    &lt;/style&gt;","title":"How to change color of the back arrow in the new material theme?","body":"<p>On compileSdkVersoin 25, you could do this:</p>\n\n<p>styles.xml</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light\"&gt;\n     &lt;item name=\"android:textColorSecondary\"&gt;@color/your_color&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7488479,"reputation":345,"user_id":5690961,"display_name":"Sumit Saxena"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1487230407,"creation_date":1487230407,"answer_id":42267599,"question_id":26788464,"body_markdown":"[![enter image description here][1]][1]\r\n\r\nChange Menu Nav Icon Color\r\n\r\n\r\n\r\n[![Final convert Menu Icon Color][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xTC39.png\r\n  [2]: https://i.stack.imgur.com/vmoCu.png\r\n\r\nIn style.xml :\r\n\r\n    &lt;style name=&quot;MyMaterialTheme.Base&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;\r\n        &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n        &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/DrawerArrowStyle&lt;/item&gt;\r\n        &lt;item name=&quot;android:textColor&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n    \r\n    \r\n    &lt;/style&gt;\r\n    \r\n    &lt;style name=&quot;DrawerArrowStyle&quot; parent=&quot;@style/Widget.AppCompat.DrawerArrowToggle&quot;&gt;\r\n        &lt;item name=&quot;spinBars&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;color&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n    &lt;/style&gt;\r\n    \r\n\r\n  \r\n    \r\n\r\n \r\n\r\n    In Mainfests.xml :\r\n    \r\n    &lt;activity android:name=&quot;.MainActivity&quot;\r\n            android:theme=&quot;@style/MyMaterialTheme.Base&quot;&gt;&lt;/activity&gt;\r\n\r\n","title":"How to change color of the back arrow in the new material theme?","body":"<p><a href=\"https://i.stack.imgur.com/xTC39.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xTC39.png\" alt=\"enter image description here\"></a></p>\n\n<p>Change Menu Nav Icon Color</p>\n\n<p><a href=\"https://i.stack.imgur.com/vmoCu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vmoCu.png\" alt=\"Final convert Menu Icon Color\"></a></p>\n\n<p>In style.xml :</p>\n\n<pre><code>&lt;style name=\"MyMaterialTheme.Base\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n    &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;item name=\"drawerArrowStyle\"&gt;@style/DrawerArrowStyle&lt;/item&gt;\n    &lt;item name=\"android:textColor\"&gt;@color/colorAccent&lt;/item&gt;\n\n\n&lt;/style&gt;\n\n&lt;style name=\"DrawerArrowStyle\" parent=\"@style/Widget.AppCompat.DrawerArrowToggle\"&gt;\n    &lt;item name=\"spinBars\"&gt;true&lt;/item&gt;\n    &lt;item name=\"color\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n&lt;/style&gt;\n\n\n\n\n\n\n\nIn Mainfests.xml :\n\n&lt;activity android:name=\".MainActivity\"\n        android:theme=\"@style/MyMaterialTheme.Base\"&gt;&lt;/activity&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6830031,"reputation":379,"user_id":5254420,"display_name":"longbaobao"},"down_vote_count":1,"up_vote_count":38,"is_accepted":false,"score":37,"last_activity_date":1487498348,"creation_date":1487498348,"answer_id":42325863,"question_id":26788464,"body_markdown":"if use `Toolbar`,you can try this\r\n\r\n    Drawable drawable = toolbar.getNavigationIcon();\r\n    drawable.setColorFilter(ContextCompat.getColor(appCompatActivity, colorId), PorterDuff.Mode.SRC_ATOP);","title":"How to change color of the back arrow in the new material theme?","body":"<p>if use <code>Toolbar</code>,you can try this</p>\n\n<pre><code>Drawable drawable = toolbar.getNavigationIcon();\ndrawable.setColorFilter(ContextCompat.getColor(appCompatActivity, colorId), PorterDuff.Mode.SRC_ATOP);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1164443,"reputation":8160,"user_id":1143361,"accept_rate":56,"display_name":"fullmoon"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1506925599,"creation_date":1506925599,"answer_id":46520443,"question_id":26788464,"body_markdown":"I just changed the toolbar theme to be @style/ThemeOverlay.AppCompat.Light \r\n\r\nand the arrow became dark gray\r\n\r\n                &lt;android.support.v7.widget.Toolbar\r\n                android:id=&quot;@+id/toolbar&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;?attr/actionBarSize&quot;\r\n                android:gravity=&quot;center&quot;\r\n                app:layout_collapseMode=&quot;pin&quot;\r\n                app:theme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;&gt;","title":"How to change color of the back arrow in the new material theme?","body":"<p>I just changed the toolbar theme to be @style/ThemeOverlay.AppCompat.Light </p>\n\n<p>and the arrow became dark gray</p>\n\n<pre><code>            &lt;android.support.v7.widget.Toolbar\n            android:id=\"@+id/toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"?attr/actionBarSize\"\n            android:gravity=\"center\"\n            app:layout_collapseMode=\"pin\"\n            app:theme=\"@style/ThemeOverlay.AppCompat.Light\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7112041,"reputation":851,"user_id":5439549,"display_name":"Sadashiv"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1574060844,"creation_date":1573726817,"answer_id":58854391,"question_id":26788464,"body_markdown":"This is what worked for me:\r\n\r\nAdd the below attributes to your theme.\r\n\r\nTo change toolbar/actionbar back arrow above api 21\r\n\r\n    &lt;item name=&quot;android:homeAsUpIndicator&quot;&gt;@drawable/your_drawable_icon&lt;/item&gt;\r\nTo change toolbar/actionbar back arrow below api 21\r\n\r\n    &lt;item name=&quot;homeAsUpIndicator&quot;&gt;@drawable/your_drawable_icon&lt;/item&gt;\r\n\r\nTo change action mode back arrow\r\n\r\n    &lt;item name=&quot;actionModeCloseDrawable&quot;&gt;@drawable/your_drawable_icon&lt;/item&gt;\r\nTo remove toolbar/actionbar shadow\r\n\r\n    &lt;item name=&quot;android:elevation&quot; tools:targetApi=&quot;lollipop&quot;&gt;0dp&lt;/item&gt;\r\n    &lt;item name=&quot;elevation&quot;&gt;0dp&lt;/item&gt;\r\n    &lt;!--backward compatibility--&gt;\r\n    &lt;item name=&quot;android:windowContentOverlay&quot;&gt;@null&lt;/item&gt;\r\n\r\n To change actionbar overflow drawable\r\n\r\n    &lt;!--under theme--&gt;\r\n    &lt;item name=&quot;actionOverflowButtonStyle&quot;&gt;@style/MenuOverflowStyle&lt;/item&gt;\r\n    \r\n    &lt;style name=&quot;MenuOverflowStyle&quot; parent=&quot;Widget.AppCompat.ActionButton.Overflow&quot;&gt;\r\n    &lt;item name=&quot;srcCompat&quot;&gt;@drawable/ic_menu_overflow&lt;/item&gt;\r\n  &lt;/style&gt;\r\n\r\nNote : &#39;srcCompat&#39; is used instead of &#39;android:src&#39; because of vector drawable support for api below 21","title":"How to change color of the back arrow in the new material theme?","body":"<p>This is what worked for me:</p>\n\n<p>Add the below attributes to your theme.</p>\n\n<p>To change toolbar/actionbar back arrow above api 21</p>\n\n<pre><code>&lt;item name=\"android:homeAsUpIndicator\"&gt;@drawable/your_drawable_icon&lt;/item&gt;\n</code></pre>\n\n<p>To change toolbar/actionbar back arrow below api 21</p>\n\n<pre><code>&lt;item name=\"homeAsUpIndicator\"&gt;@drawable/your_drawable_icon&lt;/item&gt;\n</code></pre>\n\n<p>To change action mode back arrow</p>\n\n<pre><code>&lt;item name=\"actionModeCloseDrawable\"&gt;@drawable/your_drawable_icon&lt;/item&gt;\n</code></pre>\n\n<p>To remove toolbar/actionbar shadow</p>\n\n<pre><code>&lt;item name=\"android:elevation\" tools:targetApi=\"lollipop\"&gt;0dp&lt;/item&gt;\n&lt;item name=\"elevation\"&gt;0dp&lt;/item&gt;\n&lt;!--backward compatibility--&gt;\n&lt;item name=\"android:windowContentOverlay\"&gt;@null&lt;/item&gt;\n</code></pre>\n\n<p>To change actionbar overflow drawable</p>\n\n<pre><code>&lt;!--under theme--&gt;\n&lt;item name=\"actionOverflowButtonStyle\"&gt;@style/MenuOverflowStyle&lt;/item&gt;\n\n&lt;style name=\"MenuOverflowStyle\" parent=\"Widget.AppCompat.ActionButton.Overflow\"&gt;\n&lt;item name=\"srcCompat\"&gt;@drawable/ic_menu_overflow&lt;/item&gt;\n</code></pre>\n\n<p></p>\n\n<p>Note : 'srcCompat' is used instead of 'android:src' because of vector drawable support for api below 21</p>\n"},{"tags":[],"owner":{"account_id":85690,"reputation":41035,"user_id":238753,"accept_rate":61,"display_name":"Sam"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1580511318,"creation_date":1580511318,"answer_id":60012351,"question_id":26788464,"body_markdown":"Here&#39;s how I did it in Material Components:\r\n\r\n```xml\r\n&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;&gt;\r\n    &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/AppTheme.DrawerArrowToggle&lt;/item&gt;\r\n&lt;/style&gt;\r\n\r\n&lt;style name=&quot;AppTheme.DrawerArrowToggle&quot; parent=&quot;Widget.AppCompat.DrawerArrowToggle&quot;&gt;\r\n    &lt;item name=&quot;color&quot;&gt;@android:color/white&lt;/item&gt;\r\n&lt;/style&gt;\r\n```","title":"How to change color of the back arrow in the new material theme?","body":"<p>Here's how I did it in Material Components:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;style name=\"AppTheme\" parent=\"Theme.MaterialComponents.DayNight.NoActionBar\"&gt;\n    &lt;item name=\"drawerArrowStyle\"&gt;@style/AppTheme.DrawerArrowToggle&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"AppTheme.DrawerArrowToggle\" parent=\"Widget.AppCompat.DrawerArrowToggle\"&gt;\n    &lt;item name=\"color\"&gt;@android:color/white&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9667071,"reputation":415,"user_id":8408851,"display_name":"Suyog n"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1587994450,"creation_date":1587994450,"answer_id":61460127,"question_id":26788464,"body_markdown":"Solution is very simple\r\n\r\nJust put following line into your style named as **AppTheme** \r\n\r\n    &lt;item name=&quot;colorControlNormal&quot;&gt;@color/white&lt;/item&gt;\r\n\r\nNow your whole xml code will look like shown below (default style).\r\n\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n    \r\n            &lt;item name=&quot;colorPrimary&quot;&gt;#0F0F0F&lt;/item&gt;\r\n            &lt;item name=&quot;android:statusBarColor&quot;&gt;#EEEEF0&lt;/item&gt;\r\n            &lt;item name=&quot;android:windowLightStatusBar&quot;&gt;true&lt;/item&gt;\r\n            &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n            &lt;item name=&quot;android:windowActivityTransitions&quot;&gt;true&lt;/item&gt;\r\n    \r\n            &lt;item name=&quot;colorControlNormal&quot;&gt;@color/white&lt;/item&gt;\r\n    &lt;/style&gt;","title":"How to change color of the back arrow in the new material theme?","body":"<p>Solution is very simple</p>\n\n<p>Just put following line into your style named as <strong>AppTheme</strong> </p>\n\n<pre><code>&lt;item name=\"colorControlNormal\"&gt;@color/white&lt;/item&gt;\n</code></pre>\n\n<p>Now your whole xml code will look like shown below (default style).</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n\n        &lt;item name=\"colorPrimary\"&gt;#0F0F0F&lt;/item&gt;\n        &lt;item name=\"android:statusBarColor\"&gt;#EEEEF0&lt;/item&gt;\n        &lt;item name=\"android:windowLightStatusBar\"&gt;true&lt;/item&gt;\n        &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n        &lt;item name=\"android:windowActivityTransitions\"&gt;true&lt;/item&gt;\n\n        &lt;item name=\"colorControlNormal\"&gt;@color/white&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2752329,"reputation":7312,"user_id":2371425,"accept_rate":72,"display_name":"Sakiboy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613531294,"creation_date":1613531294,"answer_id":66235204,"question_id":26788464,"body_markdown":"The simplest (and best) way to change the color of the back/up-arrow. Best part is \r\nthat there are **no side-effects** (unlike the other answers)! \r\n\r\n - Create a style with parent `Widget.AppCompat.DrawerArrowToggle`, define the `color` and any other attributes you&#39;d like.\r\n - Set the style on the `drawerArrowStyle` attribute in the apps Theme.\r\n\r\n**Create style:**\r\n\r\n    &lt;style name=&quot;DrawerArrowStyle&quot; parent=&quot;Widget.AppCompat.DrawerArrowToggle&quot;&gt;\r\n        &lt;!--        Set that the nav buttons will animate--&gt;\r\n        &lt;item name=&quot;spinBars&quot;&gt;true&lt;/item&gt;\r\n        &lt;!--        Set the color of the up arrow / hamburger button--&gt;\r\n        &lt;item name=&quot;color&quot;&gt;@color/white&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n**Set the style in App Theme:**\r\n\r\n    &lt;!-- Base application theme. --&gt;\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n\r\n        &lt;!--  Change global up-arrow color with no side-effects    --&gt;\r\n        &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/DrawerArrowStyle&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n\r\nTo change the `ToolBar` text color (and other attributes), create this `style`:\r\n\r\n    &lt;style name=&quot;ToolbarStyle&quot; parent=&quot;Widget.AppCompat.Toolbar&quot;&gt;\r\n        &lt;item name=&quot;android:textColor&quot;&gt;@color/white&lt;/item&gt;\r\n        &lt;item name=&quot;titleTextColor&quot;&gt;@color/white&lt;/item&gt;\r\n        &lt;item name=&quot;colorControlNormal&quot;&gt;@color/white&lt;/item&gt; &lt;!-- colorControlNormal is Probably not necessary    --&gt;\r\n    &lt;/style&gt;\r\n\r\nThen set that style on the AppTheme:\r\n\r\n    &lt;!-- Base application theme. --&gt;\r\n    &lt;style name=&quot;AppTheme.MyProduceApp&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar.Bridge&quot;&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n\r\n        &lt;!--  Style the toolbar (mostly the color of the text) --&gt;\r\n        &lt;item name=&quot;toolbarStyle&quot;&gt;@style/ToolbarStyle&lt;/item&gt;\r\n        &lt;!--  Change color of up-arrow    --&gt;\r\n        &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/DrawerArrowStyle&lt;/item&gt;\r\n    &lt;/style&gt;","title":"How to change color of the back arrow in the new material theme?","body":"<p>The simplest (and best) way to change the color of the back/up-arrow. Best part is\nthat there are <strong>no side-effects</strong> (unlike the other answers)!</p>\n<ul>\n<li>Create a style with parent <code>Widget.AppCompat.DrawerArrowToggle</code>, define the <code>color</code> and any other attributes you'd like.</li>\n<li>Set the style on the <code>drawerArrowStyle</code> attribute in the apps Theme.</li>\n</ul>\n<p><strong>Create style:</strong></p>\n<pre><code>&lt;style name=&quot;DrawerArrowStyle&quot; parent=&quot;Widget.AppCompat.DrawerArrowToggle&quot;&gt;\n    &lt;!--        Set that the nav buttons will animate--&gt;\n    &lt;item name=&quot;spinBars&quot;&gt;true&lt;/item&gt;\n    &lt;!--        Set the color of the up arrow / hamburger button--&gt;\n    &lt;item name=&quot;color&quot;&gt;@color/white&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p><strong>Set the style in App Theme:</strong></p>\n<pre><code>&lt;!-- Base application theme. --&gt;\n&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\n    &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\n\n    &lt;!--  Change global up-arrow color with no side-effects    --&gt;\n    &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/DrawerArrowStyle&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>To change the <code>ToolBar</code> text color (and other attributes), create this <code>style</code>:</p>\n<pre><code>&lt;style name=&quot;ToolbarStyle&quot; parent=&quot;Widget.AppCompat.Toolbar&quot;&gt;\n    &lt;item name=&quot;android:textColor&quot;&gt;@color/white&lt;/item&gt;\n    &lt;item name=&quot;titleTextColor&quot;&gt;@color/white&lt;/item&gt;\n    &lt;item name=&quot;colorControlNormal&quot;&gt;@color/white&lt;/item&gt; &lt;!-- colorControlNormal is Probably not necessary    --&gt;\n&lt;/style&gt;\n</code></pre>\n<p>Then set that style on the AppTheme:</p>\n<pre><code>&lt;!-- Base application theme. --&gt;\n&lt;style name=&quot;AppTheme.MyProduceApp&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar.Bridge&quot;&gt;\n    &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\n\n    &lt;!--  Style the toolbar (mostly the color of the text) --&gt;\n    &lt;item name=&quot;toolbarStyle&quot;&gt;@style/ToolbarStyle&lt;/item&gt;\n    &lt;!--  Change color of up-arrow    --&gt;\n    &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/DrawerArrowStyle&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5112074,"reputation":158,"user_id":4098372,"display_name":"Rami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628264132,"creation_date":1628264132,"answer_id":68684213,"question_id":26788464,"body_markdown":"    private fun setToolbarNavigationIconColor(context: Context, toolbar: Toolbar?, color: Int) {\r\n        val drawableBack = toolbar?.navigationIcon\r\n        drawableBack?.let {\r\n            val drawableWrap = DrawableCompat.wrap(drawableBack).mutate()\r\n            DrawableCompat.setTint(\r\n                drawableWrap, ContextCompat.getColor(context, white)\r\n            )\r\n            toolbar.navigationIcon = drawableWrap\r\n        }\r\n    }","title":"How to change color of the back arrow in the new material theme?","body":"<pre><code>private fun setToolbarNavigationIconColor(context: Context, toolbar: Toolbar?, color: Int) {\n    val drawableBack = toolbar?.navigationIcon\n    drawableBack?.let {\n        val drawableWrap = DrawableCompat.wrap(drawableBack).mutate()\n        DrawableCompat.setTint(\n            drawableWrap, ContextCompat.getColor(context, white)\n        )\n        toolbar.navigationIcon = drawableWrap\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8235698,"reputation":145,"user_id":6194988,"accept_rate":0,"display_name":"Mohamed Mohamed Taha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632814356,"creation_date":1632814356,"answer_id":69357501,"question_id":26788464,"body_markdown":"I saw all soluation but didn&#39;t fix the problem , If you need fix the problem just add in XMl file this code if you but dark make it light\r\n\r\n     app:theme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;","title":"How to change color of the back arrow in the new material theme?","body":"<p>I saw all soluation but didn't fix the problem , If you need fix the problem just add in XMl file this code if you but dark make it light</p>\n<pre><code> app:theme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;\n</code></pre>\n"}],"owner":{"account_id":1136523,"reputation":11039,"user_id":1121497,"accept_rate":42,"display_name":"Ferran Maylinch"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186086,"favorite_count":0,"down_vote_count":0,"up_vote_count":211,"accepted_answer_id":26837072,"answer_count":25,"score":211,"last_activity_date":1656513069,"creation_date":1415304372,"question_id":26788464,"body_markdown":"I&#39;ve updated my SDK to API 21 and now the back/up icon is a black arrow pointing to the left.\r\n\r\n![Black back arrow][1]\r\n\r\nI would like it to be grey. How can I do that?\r\n\r\nIn the Play Store, for example, the arrow is white.\r\n\r\nI&#39;ve done this to set some styles. I have used `@drawable/abc_ic_ab_back_mtrl_am_alpha` for `homeAsUpIndicator`. That drawable is transparent (only alpha) but the arrow is displayed in black. I wonder if I can set the color like I do in the `DrawerArrowStyle`. Or if the only solution is to create my `@drawable/grey_arrow` and use it for `homeAsUpIndicator`.\r\n\r\n```xml\r\n&lt;!-- Base application theme --&gt;\r\n&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light&quot;&gt;\r\n    &lt;item name=&quot;android:actionBarStyle&quot; tools:ignore=&quot;NewApi&quot;&gt;@style/MyActionBar&lt;/item&gt;\r\n    &lt;item name=&quot;actionBarStyle&quot;&gt;@style/MyActionBar&lt;/item&gt;\r\n\r\n    &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/DrawerArrowStyle&lt;/item&gt;\r\n\r\n    &lt;item name=&quot;homeAsUpIndicator&quot;&gt;@drawable/abc_ic_ab_back_mtrl_am_alpha&lt;/item&gt;\r\n    &lt;item name=&quot;android:homeAsUpIndicator&quot; tools:ignore=&quot;NewApi&quot;&gt;@drawable/abc_ic_ab_back_mtrl_am_alpha&lt;/item&gt;\r\n&lt;/style&gt;\r\n\r\n&lt;!-- ActionBar style --&gt;\r\n&lt;style name=&quot;MyActionBar&quot; parent=&quot;@style/Widget.AppCompat.Light.ActionBar.Solid&quot;&gt;\r\n\r\n    &lt;item name=&quot;android:background&quot;&gt;@color/actionbar_background&lt;/item&gt;\r\n    &lt;!-- Support library compatibility --&gt;\r\n    &lt;item name=&quot;background&quot;&gt;@color/actionbar_background&lt;/item&gt;\r\n&lt;/style&gt;\r\n\r\n&lt;!-- Style for the navigation drawer icon --&gt;\r\n&lt;style name=&quot;DrawerArrowStyle&quot; parent=&quot;Widget.AppCompat.DrawerArrowToggle&quot;&gt;\r\n    &lt;item name=&quot;spinBars&quot;&gt;true&lt;/item&gt;\r\n    &lt;item name=&quot;color&quot;&gt;@color/actionbar_text&lt;/item&gt;\r\n&lt;/style&gt;\r\n```\r\n\r\nMy solution so far has been to take the `@drawable/abc_ic_ab_back_mtrl_am_alpha`, which seems to be white, and paint it in the color I desire using a photo editor. It works, although I would prefer to use `@color/actionbar_text` like in `DrawerArrowStyle`.\r\n\r\n  [1]: http://i.stack.imgur.com/FUEND.jpg","title":"How to change color of the back arrow in the new material theme?","body":"<p>I've updated my SDK to API 21 and now the back/up icon is a black arrow pointing to the left.</p>\n<p><img src=\"https://i.stack.imgur.com/FUEND.jpg\" alt=\"Black back arrow\" /></p>\n<p>I would like it to be grey. How can I do that?</p>\n<p>In the Play Store, for example, the arrow is white.</p>\n<p>I've done this to set some styles. I have used <code>@drawable/abc_ic_ab_back_mtrl_am_alpha</code> for <code>homeAsUpIndicator</code>. That drawable is transparent (only alpha) but the arrow is displayed in black. I wonder if I can set the color like I do in the <code>DrawerArrowStyle</code>. Or if the only solution is to create my <code>@drawable/grey_arrow</code> and use it for <code>homeAsUpIndicator</code>.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Base application theme --&gt;\n&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light&quot;&gt;\n    &lt;item name=&quot;android:actionBarStyle&quot; tools:ignore=&quot;NewApi&quot;&gt;@style/MyActionBar&lt;/item&gt;\n    &lt;item name=&quot;actionBarStyle&quot;&gt;@style/MyActionBar&lt;/item&gt;\n\n    &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/DrawerArrowStyle&lt;/item&gt;\n\n    &lt;item name=&quot;homeAsUpIndicator&quot;&gt;@drawable/abc_ic_ab_back_mtrl_am_alpha&lt;/item&gt;\n    &lt;item name=&quot;android:homeAsUpIndicator&quot; tools:ignore=&quot;NewApi&quot;&gt;@drawable/abc_ic_ab_back_mtrl_am_alpha&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;!-- ActionBar style --&gt;\n&lt;style name=&quot;MyActionBar&quot; parent=&quot;@style/Widget.AppCompat.Light.ActionBar.Solid&quot;&gt;\n\n    &lt;item name=&quot;android:background&quot;&gt;@color/actionbar_background&lt;/item&gt;\n    &lt;!-- Support library compatibility --&gt;\n    &lt;item name=&quot;background&quot;&gt;@color/actionbar_background&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;!-- Style for the navigation drawer icon --&gt;\n&lt;style name=&quot;DrawerArrowStyle&quot; parent=&quot;Widget.AppCompat.DrawerArrowToggle&quot;&gt;\n    &lt;item name=&quot;spinBars&quot;&gt;true&lt;/item&gt;\n    &lt;item name=&quot;color&quot;&gt;@color/actionbar_text&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>My solution so far has been to take the <code>@drawable/abc_ic_ab_back_mtrl_am_alpha</code>, which seems to be white, and paint it in the color I desire using a photo editor. It works, although I would prefer to use <code>@color/actionbar_text</code> like in <code>DrawerArrowStyle</code>.</p>\n"},{"tags":["java","kotlin","jvm"],"comments":[{"owner":{"account_id":6522457,"reputation":384,"user_id":5046259,"display_name":"Niklas"},"score":0,"creation_date":1548239875,"post_id":54325243,"comment_id":95469044,"body_markdown":"Why explicitly an array or why the parameter is there at all?","body":"Why explicitly an array or why the parameter is there at all?"}],"answers":[{"tags":[],"owner":{"account_id":8247130,"reputation":22669,"user_id":6202869,"accept_rate":50,"display_name":"Roland"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548244257,"creation_date":1548239926,"answer_id":54325306,"question_id":54325243,"body_markdown":"The array contains the command line arguments passed to your program.\r\n\r\nYou can also omit it, if you do not want to use them, i.e. you can also just write:\r\n\r\n    fun main() {\r\n      println(&quot;Hello, world!&quot;)\r\n    }\r\n\r\nI am already too late to link to the [JLS for `Test.main`](https://docs.oracle.com/javase/specs/jls/se11/html/jls-12.html#jls-12.1.4) here ([s1m0nw1 already did](https://stackoverflow.com/a/54325625/6202869); I just prepared and went away ;-)) \r\n\r\nBut nonetheless I want to add something regarding the choice for `String` (i.e. my opinion why `String` was chosen): it&#39;s probably the most common denominator for all the possible command line arguments. `Any`/`Object` is too broad; you can only pass numbers or strings in the command line to a program (pipes are handled differently). But having a number type is too narrow, so the only acceptable type that remains is `String` which can represent both. Still you need to parse numbers if you want to use them, but that&#39;s better then interpreting a string out of numbers ;-)","title":"Why is Array&lt;String&gt; the chosen parameter type for the main function in kotlin?","body":"<p>The array contains the command line arguments passed to your program.</p>\n\n<p>You can also omit it, if you do not want to use them, i.e. you can also just write:</p>\n\n<pre><code>fun main() {\n  println(\"Hello, world!\")\n}\n</code></pre>\n\n<p>I am already too late to link to the <a href=\"https://docs.oracle.com/javase/specs/jls/se11/html/jls-12.html#jls-12.1.4\" rel=\"nofollow noreferrer\">JLS for <code>Test.main</code></a> here (<a href=\"https://stackoverflow.com/a/54325625/6202869\">s1m0nw1 already did</a>; I just prepared and went away ;-)) </p>\n\n<p>But nonetheless I want to add something regarding the choice for <code>String</code> (i.e. my opinion why <code>String</code> was chosen): it's probably the most common denominator for all the possible command line arguments. <code>Any</code>/<code>Object</code> is too broad; you can only pass numbers or strings in the command line to a program (pipes are handled differently). But having a number type is too narrow, so the only acceptable type that remains is <code>String</code> which can represent both. Still you need to parse numbers if you want to use them, but that's better then interpreting a string out of numbers ;-)</p>\n"},{"tags":[],"owner":{"account_id":10988981,"reputation":77763,"user_id":8073652,"accept_rate":100,"display_name":"s1m0nw1"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1548254817,"creation_date":1548240990,"answer_id":54325625,"question_id":54325243,"body_markdown":"The signature of `main` is based on what the Java Virtual Machine [expects][1]:\r\n\r\n&gt;The method `main` must be declared `public, static, and void`. It must specify a formal parameter (&#167;8.4.1) whose declared type is **array of String**. Therefore, either of the following declarations is acceptable:\r\n\r\n&gt;     public static void main(String[] args)\r\n    public static void main(String... args)\r\n\r\nThis is what the Kotlin compiler compiles your main function to. As of Kotlin 1.3, the explicit `Array&lt;String&gt;` can be omitted but will still be available in the byte code.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.1","title":"Why is Array&lt;String&gt; the chosen parameter type for the main function in kotlin?","body":"<p>The signature of <code>main</code> is based on what the Java Virtual Machine <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.1\" rel=\"nofollow noreferrer\">expects</a>:</p>\n\n<blockquote>\n  <p>The method <code>main</code> must be declared <code>public, static, and void</code>. It must specify a formal parameter (8.4.1) whose declared type is <strong>array of String</strong>. Therefore, either of the following declarations is acceptable:</p>\n\n<pre><code>public static void main(String[] args)\npublic static void main(String... args)\n</code></pre>\n</blockquote>\n\n<p>This is what the Kotlin compiler compiles your main function to. As of Kotlin 1.3, the explicit <code>Array&lt;String&gt;</code> can be omitted but will still be available in the byte code.</p>\n"},{"tags":[],"owner":{"account_id":10847218,"reputation":2369,"user_id":7976274,"display_name":"ankuranurag2"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548241589,"creation_date":1548241589,"answer_id":54325814,"question_id":54325243,"body_markdown":"`Collections` were not there in JAVA 1. Hence, `Array` was the default choice. Also the arguments provided from Command Line are in string format, hence we use `Array&lt;String&gt;`. Kotlin, to maintain interoperability with JAVA, followed the same convention. But, with the update to Kotlin 1.3, that too has been omitted. Now you can use `main()` function without passing `args:Array&lt;String&gt;`.","title":"Why is Array&lt;String&gt; the chosen parameter type for the main function in kotlin?","body":"<p><code>Collections</code> were not there in JAVA 1. Hence, <code>Array</code> was the default choice. Also the arguments provided from Command Line are in string format, hence we use <code>Array&lt;String&gt;</code>. Kotlin, to maintain interoperability with JAVA, followed the same convention. But, with the update to Kotlin 1.3, that too has been omitted. Now you can use <code>main()</code> function without passing <code>args:Array&lt;String&gt;</code>.</p>\n"},{"tags":[],"owner":{"account_id":10726108,"reputation":1,"user_id":7893575,"display_name":"kevin maina"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580825585,"creation_date":1580825585,"answer_id":60059253,"question_id":54325243,"body_markdown":"Your are defining the entry point of an application. in this case, an application will start running from the main function. Passing the argument Array of type String.","title":"Why is Array&lt;String&gt; the chosen parameter type for the main function in kotlin?","body":"<p>Your are defining the entry point of an application. in this case, an application will start running from the main function. Passing the argument Array of type String.</p>\n"}],"owner":{"account_id":9037970,"reputation":8357,"user_id":6733153,"accept_rate":52,"display_name":"Zorgan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4308,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1656513054,"creation_date":1548239751,"question_id":54325243,"body_markdown":"The main function in kotlin:\r\n\r\n    fun main(args : Array&lt;String&gt;) { \r\n      println(&quot;Hello, world!&quot;) \r\n    }\r\n\r\nWhy is an Array&lt;String&gt; passed in?\r\n","title":"Why is Array&lt;String&gt; the chosen parameter type for the main function in kotlin?","body":"<p>The main function in kotlin:</p>\n\n<pre><code>fun main(args : Array&lt;String&gt;) { \n  println(\"Hello, world!\") \n}\n</code></pre>\n\n<p>Why is an Array passed in?</p>\n"},{"tags":["java","android","sql-server","xml","database-connection"],"comments":[{"owner":{"account_id":4713195,"reputation":33148,"user_id":3813116,"display_name":"Sean Lange"},"score":0,"creation_date":1656510567,"post_id":72802470,"comment_id":128590820,"body_markdown":"Are you getting errors in your log? Is the query actually running? I think the first step is figuring what is running and what isn&#39;t.","body":"Are you getting errors in your log? Is the query actually running? I think the first step is figuring what is running and what isn&#39;t."},{"owner":{"account_id":25680925,"reputation":1,"user_id":19443717,"display_name":"Wooga"},"score":0,"creation_date":1656512869,"post_id":72802470,"comment_id":128591876,"body_markdown":"The errors that I am receiving have been added to the bottom of the post, thanks","body":"The errors that I am receiving have been added to the bottom of the post, thanks"}],"owner":{"account_id":25680925,"reputation":1,"user_id":19443717,"display_name":"Wooga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656513008,"creation_date":1656510260,"question_id":72802470,"body_markdown":"I&#39;m trying to create an android app to print off labels, I am currently just getting started and new to android development. The app &quot;should&quot; display 7 textbox&#39;s on the screen each being a new column from SQL. The app runs but doesn&#39;t display any of the data, I haven&#39;t been able to find anything online to help me but I imagine that&#39;s something small is missing in the code. I have added my 3 files that are being used and my AndroidManifest.xml all below. Thank you\r\n\r\nMainActivity.java\r\n```\r\npackage com.example.zebraprint_v2;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.SimpleAdapter;\r\nimport android.widget.TextView;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.ResultSet;\r\nimport java.sql.Statement;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    Connection connect;\r\n    String connectionresult = &quot;&quot;;\r\n    SimpleAdapter ad;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n    }\r\n\r\n    public void GetTextFromSQL(View v)\r\n    {\r\n        TextView tx1 = (TextView) findViewById(R.id.textView);\r\n        TextView tx2 = (TextView) findViewById(R.id.textView2);\r\n        TextView tx3 = (TextView) findViewById(R.id.textView3);\r\n        TextView tx4 = (TextView) findViewById(R.id.textView4);\r\n        TextView tx5 = (TextView) findViewById(R.id.textView5);\r\n        TextView tx6 = (TextView) findViewById(R.id.textView6);\r\n        TextView tx7 = (TextView) findViewById(R.id.textView7);\r\n\r\n\r\n        try\r\n        {\r\n            ConnectionHelper connectionHelper = new ConnectionHelper();\r\n            connect = connectionHelper.initConnection(&quot;ServerName&quot;, &quot;DatabaseName&quot;);\r\n            if(connect != null)\r\n            {\r\n                String query = &quot;SELECT * FROM SQLTableName&quot;;\r\n                Statement st = connect.createStatement();\r\n                ResultSet rs = st.executeQuery(query);\r\n\r\n                while (rs.next())\r\n                {\r\n                    tx1.setText(rs.getString(1));\r\n                    tx2.setText(rs.getString(2));\r\n                    tx3.setText(rs.getString(3));\r\n                    tx4.setText(rs.getString(4));\r\n                    tx5.setText(rs.getString(5));\r\n                    tx6.setText(rs.getString(6));\r\n                    tx7.setText(rs.getString(7));\r\n\r\n                }\r\n            }\r\n            else\r\n            {\r\n                connectionresult = &quot;Check Connection&quot;;\r\n            }\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n            Log.e(&quot;Error Connection Unsuccessful&quot;, ex.getMessage());\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nConnectionHelper.java\r\n```\r\npackage com.example.zebraprint_v2;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.StrictMode;\r\nimport android.util.Log;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\n\r\npublic class ConnectionHelper {\r\n    @SuppressLint(&quot;NewApi&quot;)\r\n\r\n    public static Connection initConnection(String server, String database) {\r\n\r\n        String ip, port, un, pass, db = null;\r\n        // Log in\r\n        switch(server){\r\n            case &quot;ServerName&quot;:\r\n                ip = &quot;00.0.000.00&quot;;\r\n                port = &quot;0000&quot;;\r\n                un = &quot;UserName&quot;;\r\n                pass = &quot;PassWord&quot;;\r\n                db = database; //&quot;DatabaseName&quot;;\r\n                break;\r\n                /*\r\n            case &quot;ServerName&quot;:\r\n                ip = &quot;00.0.000.00&quot;;\r\n                port = &quot;000&quot;;\r\n                un = &quot;Username&quot;;\r\n                pass = &quot;Password&quot;;\r\n                db = database; //&quot;DatabaseName&quot;;\r\n                break;\r\n                 */\r\n            // reached if inputted an invalid server\r\n            default:\r\n                ip = null;\r\n                port = null;\r\n                db = null;\r\n                un = null;\r\n                pass = null;\r\n        }\r\n\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy((policy));\r\n        Connection connection = null;\r\n        String ConnectURL = null;\r\n        try {\r\n            Class.forName(&quot;net.sourceforge.jtds.jdbc.Driver&quot;);\r\n            ConnectURL = &quot;jdbc:jtds:sqlserver://&quot; + ip + &quot;:&quot; + port + &quot;;&quot; + &quot;databaseName=&quot; + db + &quot;;user=&quot; + un + &quot;;password=&quot; + pass + &quot;;&quot;;\r\n            // this statement breaks out if timeout, change integer for larger wait time if necessary\r\n            DriverManager.setLoginTimeout(10);\r\n            connection = DriverManager.getConnection(ConnectURL);\r\n        } catch (Exception ex) {\r\n            // cant connext to network, try again later\r\n            Log.e(&quot;Error &quot;, ex.getMessage());\r\n            return null;\r\n        }\r\n\r\n        return connection;\r\n    }\r\n}\r\n```\r\n\r\nactivity_main.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/LoadKANBAN&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.046&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView2&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.133&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView3&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.22&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView4&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.306&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView5&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.392&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView6&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.479&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView7&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.571&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/LoadData&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:onClick=&quot;GetTextFromSQL&quot;\r\n        android:text=&quot;Load KANBAN Card PrintOut&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.498&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.926&quot; /&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nAndroidManifest.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    package=&quot;com.example.zebraprint_v2&quot;&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;&gt;&lt;/uses-permission&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;&gt;&lt;/uses-permission&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.ZebraPrintV2&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nHere are the error that are in my Logcat\r\n\r\n```\r\n28823-28823/com.example.zebraprint_v2 E/e.zebraprint_v: Unknown bits set in runtime_flags: 0x8000\r\n\r\n28823-29002/com.example.zebraprint_v2 E/Perf: Fail to get file list com.example.zebraprint_v2\r\n\r\n28823-29002/com.example.zebraprint_v2 E/Perf: getFolderSize() : Exception_1 = java.lang.NullPointerException: Attempt to get length of null array\r\n\r\n28823-29002/com.example.zebraprint_v2 E/Perf: Fail to get file list com.example.zebraprint_v2\r\n\r\n28823-29002/com.example.zebraprint_v2 E/Perf: getFolderSize() : Exception_1 = java.lang.NullPointerException: Attempt to get length of null array\r\n```","title":"Android Studio display SQL data in TextView boxes (Java)","body":"<p>I'm trying to create an android app to print off labels, I am currently just getting started and new to android development. The app &quot;should&quot; display 7 textbox's on the screen each being a new column from SQL. The app runs but doesn't display any of the data, I haven't been able to find anything online to help me but I imagine that's something small is missing in the code. I have added my 3 files that are being used and my AndroidManifest.xml all below. Thank you</p>\n<p>MainActivity.java</p>\n<pre><code>package com.example.zebraprint_v2;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.SimpleAdapter;\nimport android.widget.TextView;\n\nimport java.sql.Connection;\nimport java.sql.ResultSet;\nimport java.sql.Statement;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    Connection connect;\n    String connectionresult = &quot;&quot;;\n    SimpleAdapter ad;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    public void GetTextFromSQL(View v)\n    {\n        TextView tx1 = (TextView) findViewById(R.id.textView);\n        TextView tx2 = (TextView) findViewById(R.id.textView2);\n        TextView tx3 = (TextView) findViewById(R.id.textView3);\n        TextView tx4 = (TextView) findViewById(R.id.textView4);\n        TextView tx5 = (TextView) findViewById(R.id.textView5);\n        TextView tx6 = (TextView) findViewById(R.id.textView6);\n        TextView tx7 = (TextView) findViewById(R.id.textView7);\n\n\n        try\n        {\n            ConnectionHelper connectionHelper = new ConnectionHelper();\n            connect = connectionHelper.initConnection(&quot;ServerName&quot;, &quot;DatabaseName&quot;);\n            if(connect != null)\n            {\n                String query = &quot;SELECT * FROM SQLTableName&quot;;\n                Statement st = connect.createStatement();\n                ResultSet rs = st.executeQuery(query);\n\n                while (rs.next())\n                {\n                    tx1.setText(rs.getString(1));\n                    tx2.setText(rs.getString(2));\n                    tx3.setText(rs.getString(3));\n                    tx4.setText(rs.getString(4));\n                    tx5.setText(rs.getString(5));\n                    tx6.setText(rs.getString(6));\n                    tx7.setText(rs.getString(7));\n\n                }\n            }\n            else\n            {\n                connectionresult = &quot;Check Connection&quot;;\n            }\n        }\n        catch (Exception ex)\n        {\n            Log.e(&quot;Error Connection Unsuccessful&quot;, ex.getMessage());\n        }\n    }\n\n}\n</code></pre>\n<p>ConnectionHelper.java</p>\n<pre><code>package com.example.zebraprint_v2;\n\nimport android.annotation.SuppressLint;\nimport android.os.StrictMode;\nimport android.util.Log;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\n\npublic class ConnectionHelper {\n    @SuppressLint(&quot;NewApi&quot;)\n\n    public static Connection initConnection(String server, String database) {\n\n        String ip, port, un, pass, db = null;\n        // Log in\n        switch(server){\n            case &quot;ServerName&quot;:\n                ip = &quot;00.0.000.00&quot;;\n                port = &quot;0000&quot;;\n                un = &quot;UserName&quot;;\n                pass = &quot;PassWord&quot;;\n                db = database; //&quot;DatabaseName&quot;;\n                break;\n                /*\n            case &quot;ServerName&quot;:\n                ip = &quot;00.0.000.00&quot;;\n                port = &quot;000&quot;;\n                un = &quot;Username&quot;;\n                pass = &quot;Password&quot;;\n                db = database; //&quot;DatabaseName&quot;;\n                break;\n                 */\n            // reached if inputted an invalid server\n            default:\n                ip = null;\n                port = null;\n                db = null;\n                un = null;\n                pass = null;\n        }\n\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n        StrictMode.setThreadPolicy((policy));\n        Connection connection = null;\n        String ConnectURL = null;\n        try {\n            Class.forName(&quot;net.sourceforge.jtds.jdbc.Driver&quot;);\n            ConnectURL = &quot;jdbc:jtds:sqlserver://&quot; + ip + &quot;:&quot; + port + &quot;;&quot; + &quot;databaseName=&quot; + db + &quot;;user=&quot; + un + &quot;;password=&quot; + pass + &quot;;&quot;;\n            // this statement breaks out if timeout, change integer for larger wait time if necessary\n            DriverManager.setLoginTimeout(10);\n            connection = DriverManager.getConnection(ConnectURL);\n        } catch (Exception ex) {\n            // cant connext to network, try again later\n            Log.e(&quot;Error &quot;, ex.getMessage());\n            return null;\n        }\n\n        return connection;\n    }\n}\n</code></pre>\n<p>activity_main.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/LoadKANBAN&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.046&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView2&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.133&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView3&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.22&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView4&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.306&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView5&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.392&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView6&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.479&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView7&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.173&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.571&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/LoadData&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:onClick=&quot;GetTextFromSQL&quot;\n        android:text=&quot;Load KANBAN Card PrintOut&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.498&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.926&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>AndroidManifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;com.example.zebraprint_v2&quot;&gt;\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;&gt;&lt;/uses-permission&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;&gt;&lt;/uses-permission&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.ZebraPrintV2&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>Here are the error that are in my Logcat</p>\n<pre><code>28823-28823/com.example.zebraprint_v2 E/e.zebraprint_v: Unknown bits set in runtime_flags: 0x8000\n\n28823-29002/com.example.zebraprint_v2 E/Perf: Fail to get file list com.example.zebraprint_v2\n\n28823-29002/com.example.zebraprint_v2 E/Perf: getFolderSize() : Exception_1 = java.lang.NullPointerException: Attempt to get length of null array\n\n28823-29002/com.example.zebraprint_v2 E/Perf: Fail to get file list com.example.zebraprint_v2\n\n28823-29002/com.example.zebraprint_v2 E/Perf: getFolderSize() : Exception_1 = java.lang.NullPointerException: Attempt to get length of null array\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":7,"creation_date":1656187117,"post_id":72756954,"comment_id":128512070,"body_markdown":"You have to write out the lambda: `u -&gt; u.getCourses().size()`.","body":"You have to write out the lambda: <code>u -&gt; u.getCourses().size()</code>."},{"owner":{"account_id":2555978,"reputation":1482,"user_id":2217962,"display_name":"schrom"},"score":2,"creation_date":1656275358,"post_id":72756954,"comment_id":128526259,"body_markdown":"Please don&#39;t post code or error messages as images.","body":"Please don&#39;t post code or error messages as images."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1656324029,"post_id":72756954,"comment_id":128535271,"body_markdown":"You probably mean `Integer`, as there is no type `Int`.","body":"You probably mean <code>Integer</code>, as there is no type <code>Int</code>."}],"answers":[{"tags":[],"owner":{"account_id":22382525,"reputation":141,"user_id":16595881,"display_name":"ReubenBeeler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656480934,"creation_date":1656478840,"answer_id":72795978,"question_id":72756954,"body_markdown":"Generally, I avoid Collectors because they are complicated and unnecessary. Without Collectors, you could do the following:\r\n```\r\nList&lt;Universities&gt; universities = //...\r\n@SuppressWarnings(&quot;unchecked&quot;)\r\nMap&lt;String, Integer&gt; result = Map.ofEntries(universities.stream()\r\n                                  .map(university -&gt; new AbstractMap.SimpleEntry&lt;&gt;(university.getName(), university.getCourses().size()))\r\n                                  .toArray(Map.Entry[]::new));\r\n```\r\nIf you really want to use Collectors, this is what you&#39;re looking for:\r\n```\r\nList&lt;Universities&gt; universities = //...\r\nMap&lt;String, Integer&gt; result = universities.stream().collect(Collectors.toMap(\r\n                                  University::getName,\r\n                                  university -&gt; university.getCourses().size()\r\n                              ));\r\n```\r\nThe following is with regards to the `Function&lt;? super T,? extends U&gt; valueMapper` (2nd parameter) of `Collectors.toMap(...)`:\r\n\r\n`List#size()` is a function call, not a reference to the size function pointer. `List::size` is closer to what you are looking for (using &quot;::&quot; for reference to function pointer). Notice that you put `University::getCourses`, which returns the function pointer for the `University#getCourses()` method, not a `List`. The `University#getCourses()` method does not execute until the `Stream#collect(...)` method calls `valueMapper.apply(...)`. Since there is no single method call to map a `University` to the length of its courses, I believe there is no way to accomplish this task with just function pointers, so just use the above lambda.","title":"How to create Map&lt;String,Int&gt; from a number of Objects containing a Name and a List","body":"<p>Generally, I avoid Collectors because they are complicated and unnecessary. Without Collectors, you could do the following:</p>\n<pre><code>List&lt;Universities&gt; universities = //...\n@SuppressWarnings(&quot;unchecked&quot;)\nMap&lt;String, Integer&gt; result = Map.ofEntries(universities.stream()\n                                  .map(university -&gt; new AbstractMap.SimpleEntry&lt;&gt;(university.getName(), university.getCourses().size()))\n                                  .toArray(Map.Entry[]::new));\n</code></pre>\n<p>If you really want to use Collectors, this is what you're looking for:</p>\n<pre><code>List&lt;Universities&gt; universities = //...\nMap&lt;String, Integer&gt; result = universities.stream().collect(Collectors.toMap(\n                                  University::getName,\n                                  university -&gt; university.getCourses().size()\n                              ));\n</code></pre>\n<p>The following is with regards to the <code>Function&lt;? super T,? extends U&gt; valueMapper</code> (2nd parameter) of <code>Collectors.toMap(...)</code>:</p>\n<p><code>List#size()</code> is a function call, not a reference to the size function pointer. <code>List::size</code> is closer to what you are looking for (using &quot;::&quot; for reference to function pointer). Notice that you put <code>University::getCourses</code>, which returns the function pointer for the <code>University#getCourses()</code> method, not a <code>List</code>. The <code>University#getCourses()</code> method does not execute until the <code>Stream#collect(...)</code> method calls <code>valueMapper.apply(...)</code>. Since there is no single method call to map a <code>University</code> to the length of its courses, I believe there is no way to accomplish this task with just function pointers, so just use the above lambda.</p>\n"}],"owner":{"account_id":15131206,"reputation":31,"user_id":10919039,"display_name":"tdeus"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1656512925,"creation_date":1656186778,"question_id":72756954,"body_markdown":"So I have 3 University Instances each having a String Name  and a List of Courses:\r\n\r\n[this is univerities.json][1]\r\n\r\nI want to create a map with the names of the Universities as the keys and the value should be the number of courses. I tried this using a stream pipeline:\r\n\r\n       Map&lt;String,Int&gt; result = universities.stream().collect( Collectors.toMap(University::getName,University::getCourses.size()))\r\n\r\n[And it doesnt work because you probably cant use such methods on Lists right?][2]\r\n\r\nMy guess is that  could use these methods on ArrayLists, but I am a bit lost how to pull that of in a stream Pipeline since this is still new to me. Any suggestions?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ExNrA.png\r\n  [2]: https://i.stack.imgur.com/aWgST.png","title":"How to create Map&lt;String,Int&gt; from a number of Objects containing a Name and a List","body":"<p>So I have 3 University Instances each having a String Name  and a List of Courses:</p>\n<p><a href=\"https://i.stack.imgur.com/ExNrA.png\" rel=\"nofollow noreferrer\">this is univerities.json</a></p>\n<p>I want to create a map with the names of the Universities as the keys and the value should be the number of courses. I tried this using a stream pipeline:</p>\n<pre><code>   Map&lt;String,Int&gt; result = universities.stream().collect( Collectors.toMap(University::getName,University::getCourses.size()))\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/aWgST.png\" rel=\"nofollow noreferrer\">And it doesnt work because you probably cant use such methods on Lists right?</a></p>\n<p>My guess is that  could use these methods on ArrayLists, but I am a bit lost how to pull that of in a stream Pipeline since this is still new to me. Any suggestions?</p>\n"},{"tags":["java","sql-server","scala","apache-spark","google-cloud-dataproc"],"comments":[{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1656538315,"post_id":72803068,"comment_id":128600791,"body_markdown":"Did you read through the [Commonly Faced Issues](https://learn.microsoft.com/en-us/sql/connect/spark/connector#commonly-faced-issues) section of the Apache Spark Connector page you linked initially?","body":"Did you read through the <a href=\"https://learn.microsoft.com/en-us/sql/connect/spark/connector#commonly-faced-issues\" rel=\"nofollow noreferrer\">Commonly Faced Issues</a> section of the Apache Spark Connector page you linked initially?"},{"owner":{"account_id":12347955,"reputation":570,"user_id":9008023,"accept_rate":75,"display_name":"Harikrishnan Balachandran"},"score":0,"creation_date":1656560127,"post_id":72803068,"comment_id":128604246,"body_markdown":"Yes. As I said there is no issue with Spark Connector. It works fine while writing the data.","body":"Yes. As I said there is no issue with Spark Connector. It works fine while writing the data."}],"owner":{"account_id":12347955,"reputation":570,"user_id":9008023,"accept_rate":75,"display_name":"Harikrishnan Balachandran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1656512661,"creation_date":1656512661,"question_id":72803068,"body_markdown":"Please hear me out.\r\n\r\nI am able to successfully write to Azure SQL server table using [Apache Spark connector][1] in Dataproc cluster. But then while testing I found sometime that the SQL server database in not available and because of this the write operation fails.\r\n\r\nSo, I decided to add an exception logic to check if the database is available or not using the following code before writing to Azure DB,\r\n\r\n        var connection: Connection = null\r\n        val url = &quot;jdbc:sqlserver://***.database.windows.net:1433;databaseName=some_db;encrypt=true;trustServerCertificate=true;authentication=ActiveDirectoryPassword&quot;\r\n        val user = &quot;xxxx&quot;\r\n        val password = ******\r\n        try\r\n              {\r\n                Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;)\r\n                connection = DriverManager.getConnection(url, user, password)\r\n                log.info(s&quot;Successfully established connection on attempt: &quot;+attempts)\r\n                return\r\n              }\r\n\r\n**This code works fine in my local machine. But while running the same in Dataproc I am getting the below error,**\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/microsoft/aad/adal4j/AuthenticationException\r\n\r\nI already went though this similar [issue][2] discussed in SO. But it&#39;s bit different for me as the  Apache Spark connector to write to SQL server is working fine. I just want to have the code `DriverManager.getConnection(url, user, password)` work to test the connection before my write.\r\n              \r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/sql/connect/spark/connector?view=sql-server-ver16\r\n  [2]: https://stackoverflow.com/questions/70289697/noclassdeffounderror-com-microsoft-aad-adal4j-authenticationexception-while-conn","title":"Getting adal4j/AuthenticationException while connecting to Azure SQL from Google Dataproc Cluster","body":"<p>Please hear me out.</p>\n<p>I am able to successfully write to Azure SQL server table using <a href=\"https://learn.microsoft.com/en-us/sql/connect/spark/connector?view=sql-server-ver16\" rel=\"nofollow noreferrer\">Apache Spark connector</a> in Dataproc cluster. But then while testing I found sometime that the SQL server database in not available and because of this the write operation fails.</p>\n<p>So, I decided to add an exception logic to check if the database is available or not using the following code before writing to Azure DB,</p>\n<pre><code>    var connection: Connection = null\n    val url = &quot;jdbc:sqlserver://***.database.windows.net:1433;databaseName=some_db;encrypt=true;trustServerCertificate=true;authentication=ActiveDirectoryPassword&quot;\n    val user = &quot;xxxx&quot;\n    val password = ******\n    try\n          {\n            Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;)\n            connection = DriverManager.getConnection(url, user, password)\n            log.info(s&quot;Successfully established connection on attempt: &quot;+attempts)\n            return\n          }\n</code></pre>\n<p><strong>This code works fine in my local machine. But while running the same in Dataproc I am getting the below error,</strong></p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/microsoft/aad/adal4j/AuthenticationException\n</code></pre>\n<p>I already went though this similar <a href=\"https://stackoverflow.com/questions/70289697/noclassdeffounderror-com-microsoft-aad-adal4j-authenticationexception-while-conn\">issue</a> discussed in SO. But it's bit different for me as the  Apache Spark connector to write to SQL server is working fine. I just want to have the code <code>DriverManager.getConnection(url, user, password)</code> work to test the connection before my write.</p>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656512155,"creation_date":1656512155,"answer_id":72802938,"question_id":72802514,"body_markdown":"This is because you are creating a new Spring application context for each request to your API. You can add the batch application context to your Spring Boot app and inject the job and job launcher in your controller instead, something like:\r\n\r\n```\r\n@RestController\r\npublic class JobLaunchingController {\r\n\r\n\t@Autowired\r\n\tprivate Job job;\r\n\r\n\t@Autowired\r\n\tprivate JobLauncher jobLauncher;\r\n\r\n\t@RequestMapping(value = &quot;/&quot;, method = RequestMethod.POST)\r\n\t@ResponseStatus(HttpStatus.ACCEPTED)\r\n\tpublic void launch(@RequestParam(&quot;name&quot;) String name) throws Exception {\r\n\t\tJobParameters jobParameters = new JobParametersBuilder()\r\n\t\t\t\t\t\t.addString(&quot;name&quot;, name)\r\n\t\t\t\t\t\t.toJobParameters();\r\n\t\tthis.jobLauncher.run(job, jobParameters);\r\n\t}\r\n}\r\n```\r\n\r\nThis will use the same database connection pool of the main application context which will be closed correctly when your Boot app is shutdown.","title":"Spring boot data connection is not released","body":"<p>This is because you are creating a new Spring application context for each request to your API. You can add the batch application context to your Spring Boot app and inject the job and job launcher in your controller instead, something like:</p>\n<pre><code>@RestController\npublic class JobLaunchingController {\n\n    @Autowired\n    private Job job;\n\n    @Autowired\n    private JobLauncher jobLauncher;\n\n    @RequestMapping(value = &quot;/&quot;, method = RequestMethod.POST)\n    @ResponseStatus(HttpStatus.ACCEPTED)\n    public void launch(@RequestParam(&quot;name&quot;) String name) throws Exception {\n        JobParameters jobParameters = new JobParametersBuilder()\n                        .addString(&quot;name&quot;, name)\n                        .toJobParameters();\n        this.jobLauncher.run(job, jobParameters);\n    }\n}\n</code></pre>\n<p>This will use the same database connection pool of the main application context which will be closed correctly when your Boot app is shutdown.</p>\n"}],"owner":{"account_id":14200864,"reputation":73,"user_id":10258807,"display_name":"Sooraj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656512608,"creation_date":1656510406,"question_id":72802514,"body_markdown":"I have a batch job configured using an XML file. And I have created a new Spring boot application with dependency to this batch job. The purpose of this spring boot application is to run the batch job using an API (for testing purpose).\r\nLet me share my implementation of the same.\r\n\r\nbatch-job-config.xml\r\n```\r\n&lt;batch:job id=&quot;batch-job_update&quot; parent=&quot;baseJob&quot;&gt;\r\n        &lt;batch:step id=&quot;batch_update.step01&quot;&gt;\r\n            &lt;batch:tasklet transaction-manager=&quot;transactionManager&quot;&gt;\r\n                &lt;batch:chunk\r\n                        reader=&quot;batchReader&quot;\r\n                        processor=&quot;batchProcessor&quot;\r\n                        writer=&quot;batchWriter&quot;\r\n                        commit-interval=&quot;1&quot;&gt;\r\n                &lt;/batch:chunk&gt;\r\n            &lt;/batch:tasklet&gt;\r\n        &lt;/batch:step&gt;\r\n    &lt;/batch:job&gt;\r\n```\r\n\r\nIn the spring boot controller, I am running the batch job by loading this XML file into the context\r\n```\r\nClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;path/to/batch-job-config.xml&quot;);\r\n\r\nJob job = context.getBean(&quot;batch-job_update, Job.class);\r\nJobRepository jobRepository = context.getBean(&quot;jobRepositoryBeanName&quot;, JobRepository.class);\r\nJobLauncher jobLauncher = context.getBean(&quot;jobLauncherBeanName&quot;, JobLauncher.class);\r\njobLauncherTestUtils.setJob(job);\r\njobLauncherTestUtils.setJobLauncher(jobLauncher);\r\njobLauncherTestUtils.setJobRepository(jobRepository);\r\nJobParameters jobParameters = getJobParameters(jobParametersList);\r\nJobExecution jobExecution = jobLauncherTestUtils.launchJob(jobParameters);\r\n\r\ncontext.close();\r\n```\r\n\r\nThe issue I am facing is that the db connections created while running the batch are not closed, and since I am running this API with lot of test cases, after the connections are exhausted I am getting the following exception\r\n\r\n```\r\n28-06-2022 10:01:38.476 [http-nio-7788-exec-3] ERROR org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet].log - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jobRepository&#39;: Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: Cannot create PoolableConnectionFactory (FATAL: remaining connection slots are reserved for non-replication superuser connections)] with root cause\r\norg.postgresql.util.PSQLException: FATAL: remaining connection slots are reserved for non-replication superuser connections\r\n```\r\n\r\nCould anyone please help me with this one? Thanks in advance","title":"Spring boot data connection is not released","body":"<p>I have a batch job configured using an XML file. And I have created a new Spring boot application with dependency to this batch job. The purpose of this spring boot application is to run the batch job using an API (for testing purpose).\nLet me share my implementation of the same.</p>\n<p>batch-job-config.xml</p>\n<pre><code>&lt;batch:job id=&quot;batch-job_update&quot; parent=&quot;baseJob&quot;&gt;\n        &lt;batch:step id=&quot;batch_update.step01&quot;&gt;\n            &lt;batch:tasklet transaction-manager=&quot;transactionManager&quot;&gt;\n                &lt;batch:chunk\n                        reader=&quot;batchReader&quot;\n                        processor=&quot;batchProcessor&quot;\n                        writer=&quot;batchWriter&quot;\n                        commit-interval=&quot;1&quot;&gt;\n                &lt;/batch:chunk&gt;\n            &lt;/batch:tasklet&gt;\n        &lt;/batch:step&gt;\n    &lt;/batch:job&gt;\n</code></pre>\n<p>In the spring boot controller, I am running the batch job by loading this XML file into the context</p>\n<pre><code>ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;path/to/batch-job-config.xml&quot;);\n\nJob job = context.getBean(&quot;batch-job_update, Job.class);\nJobRepository jobRepository = context.getBean(&quot;jobRepositoryBeanName&quot;, JobRepository.class);\nJobLauncher jobLauncher = context.getBean(&quot;jobLauncherBeanName&quot;, JobLauncher.class);\njobLauncherTestUtils.setJob(job);\njobLauncherTestUtils.setJobLauncher(jobLauncher);\njobLauncherTestUtils.setJobRepository(jobRepository);\nJobParameters jobParameters = getJobParameters(jobParametersList);\nJobExecution jobExecution = jobLauncherTestUtils.launchJob(jobParameters);\n\ncontext.close();\n</code></pre>\n<p>The issue I am facing is that the db connections created while running the batch are not closed, and since I am running this API with lot of test cases, after the connections are exhausted I am getting the following exception</p>\n<pre><code>28-06-2022 10:01:38.476 [http-nio-7788-exec-3] ERROR org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet].log - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jobRepository': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: Cannot create PoolableConnectionFactory (FATAL: remaining connection slots are reserved for non-replication superuser connections)] with root cause\norg.postgresql.util.PSQLException: FATAL: remaining connection slots are reserved for non-replication superuser connections\n</code></pre>\n<p>Could anyone please help me with this one? Thanks in advance</p>\n"},{"tags":["java","email","encoding","utf-8","sendgrid"],"comments":[{"owner":{"account_id":12307150,"reputation":131,"user_id":8979849,"display_name":"Dsleeper"},"score":0,"creation_date":1589886917,"post_id":61818140,"comment_id":109464848,"body_markdown":"Still no reply from Sendgrid support. Has anybody else had issues with getting a response from their support team? I&#39;ve tried multiple channels now and all I get is silence","body":"Still no reply from Sendgrid support. Has anybody else had issues with getting a response from their support team? I&#39;ve tried multiple channels now and all I get is silence"},{"owner":{"account_id":2282781,"reputation":1457,"user_id":2007503,"display_name":"Joshua"},"score":0,"creation_date":1597578388,"post_id":61818140,"comment_id":112173012,"body_markdown":"I&#39;m running into the very same issue right now. Did you find any viable workaround to avoid e-mails being clipped in Gmail?","body":"I&#39;m running into the very same issue right now. Did you find any viable workaround to avoid e-mails being clipped in Gmail?"},{"owner":{"account_id":12307150,"reputation":131,"user_id":8979849,"display_name":"Dsleeper"},"score":2,"creation_date":1597742631,"post_id":61818140,"comment_id":112226406,"body_markdown":"Hi Joshua! No I opted to go for a different vendor in the end. However I finally did get a reply from Sendgrid support. I&#39;ve appended the reply from support in the original post above","body":"Hi Joshua! No I opted to go for a different vendor in the end. However I finally did get a reply from Sendgrid support. I&#39;ve appended the reply from support in the original post above"},{"owner":{"account_id":2282781,"reputation":1457,"user_id":2007503,"display_name":"Joshua"},"score":1,"creation_date":1597831413,"post_id":61818140,"comment_id":112259622,"body_markdown":"Thank you! I ended up going with an HTML e-mail in the end, encoding non-ASCII characters as HTML entities. Not great, but did the trick.","body":"Thank you! I ended up going with an HTML e-mail in the end, encoding non-ASCII characters as HTML entities. Not great, but did the trick."}],"answers":[{"tags":[],"owner":{"account_id":4318785,"reputation":136,"user_id":3527742,"display_name":"Tomasz Sotysik"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1656512546,"creation_date":1656512546,"answer_id":72803043,"question_id":61818140,"body_markdown":"As a workaround you can force usage of UTF-8 in HTML email body: add character outside of ISO-8859 charset in comment. For example add:\r\n\r\n    &lt;!--  --&gt;\r\n\r\nUsers won&#39;t see it unless they open raw body content.","title":"Cannot use Sendgrid Java API to send UTF-8 encoded emails","body":"<p>As a workaround you can force usage of UTF-8 in HTML email body: add character outside of ISO-8859 charset in comment. For example add:</p>\n<pre><code>&lt;!--  --&gt;\n</code></pre>\n<p>Users won't see it unless they open raw body content.</p>\n"}],"owner":{"account_id":12307150,"reputation":131,"user_id":8979849,"display_name":"Dsleeper"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4828,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":1,"score":13,"last_activity_date":1656512546,"creation_date":1589542127,"question_id":61818140,"body_markdown":"I&#39;ve just switched from Mandrill to Sendgrid. When using the standard Sendgrid JAVA API to send emails the email header content-type is listed as:\r\n\r\n    Content-Type: text/html; charset=iso-8859-1\r\n\r\nI have not been able to find a way to change this to UTF-8 which is my requirement for sending properly encoded emails. This worked just fine when using Mandrill. Sending via Mandrill kept the original source encoding intact in the content-type header. My current code is basically using this Sendgrid sample code:\r\nhttps://sendgrid.com/docs/for-developers/sending-email/v3-java-code-example/\r\n\r\n**Environment:**\r\n\r\n - JDK 1.8\r\n - sendgrid-java 4.48\r\n\r\nMy source files are all encoded with UTF-8 and my project is built via Maven with maven-compiler-plugin set to\r\n\r\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n\r\nThe messsage body that I am posting to Sendgrid is HTML and has the following content-type set in the head element:\r\n\r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;\r\n\r\n\r\nThe results of using Sendgrid is that the message gets clipped in Gmail. This seems to be due to the conflicting encoding types. Ie the &quot;mail&quot; header says iso-8859-1 even though the actual content is UTF-8. If I understand this correctly the result is that characters are encoded incorretly.\r\n\r\nNote: I&#39;m sending Norwegian characters &#198;&#216;&#197;.\r\n\r\nI&#39;ve tried to convert the message body to ASCII and iso-8859-1. The results of this is that the email is no longer clipped in Gmail, but the &#198;&#216;&#197; characters are replaced with questionmarks (I know that US_ASCII does not support the &#198;&#216;&#197; characters). I&#39;ve also tried to override the Sendgrid header with this code:\r\n\r\n    mail.addHeader(&quot;Content-Type&quot;, &quot;text/html; charset=UTF-8&quot;);\r\n\r\nBut that key is reserved and cannot be overriden..\r\n\r\nI&#39;ve also contacted Sendgrid support. They replied with the following:\r\n\r\n&gt; Unfortunately, our system will automatically encode the body with\r\n&gt; whatever encoding is being passed to us. This means, that if there are\r\n&gt; characters in that email that are ISO-8859 characters. Then the body\r\n&gt; is going to be using that encoding. We do not currently have an option\r\n&gt; to force UTF-8 encode the body of emails that are being passed through\r\n&gt; us.\r\n&gt; \r\n&gt; Going forward, you would need to convert these emails previous to\r\n&gt; sending them to our servers. Or put a procedure in place to decode\r\n&gt; them into UTF-8 when they are received. For more in depth help with\r\n&gt; code, I would suggest reaching out of the GitHub issue board of the\r\n&gt; language you&#39;re using is a great way to gain insight:\r\n&gt; https://github.com/sendgrid/sendgrid-java.","title":"Cannot use Sendgrid Java API to send UTF-8 encoded emails","body":"<p>I've just switched from Mandrill to Sendgrid. When using the standard Sendgrid JAVA API to send emails the email header content-type is listed as:</p>\n<pre><code>Content-Type: text/html; charset=iso-8859-1\n</code></pre>\n<p>I have not been able to find a way to change this to UTF-8 which is my requirement for sending properly encoded emails. This worked just fine when using Mandrill. Sending via Mandrill kept the original source encoding intact in the content-type header. My current code is basically using this Sendgrid sample code:\n<a href=\"https://sendgrid.com/docs/for-developers/sending-email/v3-java-code-example/\" rel=\"noreferrer\">https://sendgrid.com/docs/for-developers/sending-email/v3-java-code-example/</a></p>\n<p><strong>Environment:</strong></p>\n<ul>\n<li>JDK 1.8</li>\n<li>sendgrid-java 4.48</li>\n</ul>\n<p>My source files are all encoded with UTF-8 and my project is built via Maven with maven-compiler-plugin set to</p>\n<pre><code>&lt;encoding&gt;UTF-8&lt;/encoding&gt;\n</code></pre>\n<p>The messsage body that I am posting to Sendgrid is HTML and has the following content-type set in the head element:</p>\n<pre><code>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;\n</code></pre>\n<p>The results of using Sendgrid is that the message gets clipped in Gmail. This seems to be due to the conflicting encoding types. Ie the &quot;mail&quot; header says iso-8859-1 even though the actual content is UTF-8. If I understand this correctly the result is that characters are encoded incorretly.</p>\n<p>Note: I'm sending Norwegian characters .</p>\n<p>I've tried to convert the message body to ASCII and iso-8859-1. The results of this is that the email is no longer clipped in Gmail, but the  characters are replaced with questionmarks (I know that US_ASCII does not support the  characters). I've also tried to override the Sendgrid header with this code:</p>\n<pre><code>mail.addHeader(&quot;Content-Type&quot;, &quot;text/html; charset=UTF-8&quot;);\n</code></pre>\n<p>But that key is reserved and cannot be overriden..</p>\n<p>I've also contacted Sendgrid support. They replied with the following:</p>\n<blockquote>\n<p>Unfortunately, our system will automatically encode the body with\nwhatever encoding is being passed to us. This means, that if there are\ncharacters in that email that are ISO-8859 characters. Then the body\nis going to be using that encoding. We do not currently have an option\nto force UTF-8 encode the body of emails that are being passed through\nus.</p>\n<p>Going forward, you would need to convert these emails previous to\nsending them to our servers. Or put a procedure in place to decode\nthem into UTF-8 when they are received. For more in depth help with\ncode, I would suggest reaching out of the GitHub issue board of the\nlanguage you're using is a great way to gain insight:\n<a href=\"https://github.com/sendgrid/sendgrid-java\" rel=\"noreferrer\">https://github.com/sendgrid/sendgrid-java</a>.</p>\n</blockquote>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":14331920,"reputation":351,"user_id":10352461,"display_name":"Stefan de Kraker"},"score":1,"creation_date":1656508334,"post_id":72801073,"comment_id":128589874,"body_markdown":"You should push data: [see this post](https://stackoverflow.com/a/28822372/10352461)","body":"You should push data: <a href=\"https://stackoverflow.com/a/28822372/10352461\">see this post</a>"},{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1656512775,"post_id":72801073,"comment_id":128591820,"body_markdown":"Did you try calling `FirebaseDatabase.getInstance().getReference().child(&quot;User/&quot; + uid + &quot;/CollectionList&quot;).push().setValue(theNewList)` to add the new data?","body":"Did you try calling <code>FirebaseDatabase.getInstance().getReference().child(&quot;User&#47;&quot; + uid + &quot;&#47;CollectionList&quot;).push().setValue(theNewList)</code> to add the new data?"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1657099825,"post_id":72801073,"comment_id":128726851,"body_markdown":"Firebase API is asynchronous. So you might be interested in reading this [resource](https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5).","body":"Firebase API is asynchronous. So you might be interested in reading this <a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5\" rel=\"nofollow noreferrer\">resource</a>."}],"owner":{"account_id":25680384,"reputation":1,"user_id":19443263,"display_name":"QWERTY_Rebooted"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656512541,"creation_date":1656503985,"question_id":72801073,"body_markdown":"I am trying to add an Item under a Collection in Firebase.\r\n\r\n![Firebase Real Time Database][1]\r\n\r\nI am adding an Item and the Key is being assigned a value of null. I want to be able to add the Item below the Key for collection5. So I need a way to make the Key get the Value of collection5&#39;s Key.\r\n\r\nThere is a Recycler View which displays added Collections to a Logged In User. After clicking on a Collection the User is taken to a Recycler View for Items. This is where they are able to access the CreateItemActivity.\r\n\r\nThese are declarations at the top of my CreateItemActivity:\r\n```\r\nString[] collectionsList = new String[6];\r\n    int a = 0;\r\n```\r\nThe following code is below the OnCreate Method:\r\n```\r\nmDatabaseRef = FirebaseDatabase.getInstance().getReference().child(&quot;User/&quot; + uid + &quot;/CollectionList/&quot;+ collectionsList[a] );\r\n```\r\n```\r\nmDatabaseRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(DataSnapshot dataSnapshot) {\r\n        while (a &lt;= 1) {\r\n            for (DataSnapshot postSnapshot : dataSnapshot.getChildren()) {\r\n                System.out.println(postSnapshot.getKey());\r\n                key = postSnapshot.getKey();\r\n                Toast.makeText(CreateItemsActivity.this, postSnapshot.getKey(), Toast.LENGTH_SHORT).show();\r\n                collectionsList[a] = dataSnapshot.child(key).getKey();\r\n            }\r\n            a = a + 1;\r\n        }\r\n    }\r\n    @Override\r\n    public void onCancelled(DatabaseError databaseError) {\r\n        Toast.makeText(CreateItemsActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\r\n        throw databaseError.toException();\r\n    }\r\n});\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/w1q6q.png","title":"Firebase How to Input Data under Unique Key","body":"<p>I am trying to add an Item under a Collection in Firebase.</p>\n<p><img src=\"https://i.stack.imgur.com/w1q6q.png\" alt=\"Firebase Real Time Database\" /></p>\n<p>I am adding an Item and the Key is being assigned a value of null. I want to be able to add the Item below the Key for collection5. So I need a way to make the Key get the Value of collection5's Key.</p>\n<p>There is a Recycler View which displays added Collections to a Logged In User. After clicking on a Collection the User is taken to a Recycler View for Items. This is where they are able to access the CreateItemActivity.</p>\n<p>These are declarations at the top of my CreateItemActivity:</p>\n<pre><code>String[] collectionsList = new String[6];\n    int a = 0;\n</code></pre>\n<p>The following code is below the OnCreate Method:</p>\n<pre><code>mDatabaseRef = FirebaseDatabase.getInstance().getReference().child(&quot;User/&quot; + uid + &quot;/CollectionList/&quot;+ collectionsList[a] );\n</code></pre>\n<pre><code>mDatabaseRef.addListenerForSingleValueEvent(new ValueEventListener() {\n    @Override\n    public void onDataChange(DataSnapshot dataSnapshot) {\n        while (a &lt;= 1) {\n            for (DataSnapshot postSnapshot : dataSnapshot.getChildren()) {\n                System.out.println(postSnapshot.getKey());\n                key = postSnapshot.getKey();\n                Toast.makeText(CreateItemsActivity.this, postSnapshot.getKey(), Toast.LENGTH_SHORT).show();\n                collectionsList[a] = dataSnapshot.child(key).getKey();\n            }\n            a = a + 1;\n        }\n    }\n    @Override\n    public void onCancelled(DatabaseError databaseError) {\n        Toast.makeText(CreateItemsActivity.this, databaseError.getMessage(), Toast.LENGTH_SHORT).show();\n        throw databaseError.toException();\n    }\n});\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":14331920,"reputation":351,"user_id":10352461,"display_name":"Stefan de Kraker"},"score":1,"creation_date":1656506893,"post_id":72801208,"comment_id":128589213,"body_markdown":"Firebase does not support the option to delete a list by index or id. What you should do, is make the changes to the document (a class that holds the data) in your code, and then update it, by the `update` function of Firebase","body":"Firebase does not support the option to delete a list by index or id. What you should do, is make the changes to the document (a class that holds the data) in your code, and then update it, by the <code>update</code> function of Firebase"}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1656512346,"creation_date":1656512346,"answer_id":72802988,"question_id":72801208,"body_markdown":"To remove the existing node and add a new node in one operation would be something like this:\r\n```\r\nString listToDelete = &quot;20211127&quot;;\r\nString listToAdd = &quot;20220629&quot;;\r\nMap dataToAdd = ...; // &#128072; You have to provide this\r\n\r\nMap updates = new HashMap&lt;String, Object&gt;();\r\nupdates.put(&quot;cafeTrans/&quot;+listToDelete, null);\r\nupdates.put(&quot;cafeTrans/&quot;listToAdd, dataToAdd);\r\nFirebaseDatabase.getInstance().getReference().updateChildren(updates);\r\n```","title":"How to delete a list and create a new list in firebase android?","body":"<p>To remove the existing node and add a new node in one operation would be something like this:</p>\n<pre><code>String listToDelete = &quot;20211127&quot;;\nString listToAdd = &quot;20220629&quot;;\nMap dataToAdd = ...; //  You have to provide this\n\nMap updates = new HashMap&lt;String, Object&gt;();\nupdates.put(&quot;cafeTrans/&quot;+listToDelete, null);\nupdates.put(&quot;cafeTrans/&quot;listToAdd, dataToAdd);\nFirebaseDatabase.getInstance().getReference().updateChildren(updates);\n</code></pre>\n"}],"owner":{"account_id":2268208,"reputation":3,"user_id":1996286,"display_name":"Mano"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72802988,"answer_count":1,"score":0,"last_activity_date":1656512346,"creation_date":1656504611,"question_id":72801208,"body_markdown":"Im having a database as below, \r\n\r\n![firebase database][1]\r\n\r\nHere, I want to dynamically delete the existing list &quot;20211127&quot;, \r\nand add a new list with a different name in place of deleted one.\r\n\r\nI have been going over this issue for 6 days now, without a solution. Could you please help me with this?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iKxFZ.png","title":"How to delete a list and create a new list in firebase android?","body":"<p>Im having a database as below,</p>\n<p><img src=\"https://i.stack.imgur.com/iKxFZ.png\" alt=\"firebase database\" /></p>\n<p>Here, I want to dynamically delete the existing list &quot;20211127&quot;,\nand add a new list with a different name in place of deleted one.</p>\n<p>I have been going over this issue for 6 days now, without a solution. Could you please help me with this?</p>\n"},{"tags":["java","reflection"],"answers":[{"tags":[],"owner":{"display_name":"user19443549"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656508481,"creation_date":1656508481,"answer_id":72802055,"question_id":72801678,"body_markdown":"You can use reflections but best approach will be to use jackson libraries (jackson-core and jackson-databind) because these libraries will give you performance benefits as well.\r\n\r\nBelow is small piece of code by using jackson libraries that you can refer -\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        String message = &quot;{\\&quot;my_id\\&quot;:\\&quot;1234\\&quot;}&quot;;\r\n        MyClass myClass = mapper.readValue(message,MyClass.class);\r\n        System.out.println(myClass.getId());\r\n\r\nYou can use Gson as well if you want but @JsonProperty wont work for Gson, there is different annotaion in Gson corresponding to this **@SerializedName(&quot;my_id&quot;)**.\r\nBelow is sample code for Gson as well -\r\n\r\n    public class MyClass {\r\n\r\n        @SerializedName(&quot;my_id&quot;)\r\n        private String id;\r\n        public String getId() {\r\n            return this.id;\r\n        }\r\n        public void setId(String id) {\r\n            this.id = id;\r\n        }\r\n    }\r\n\r\n    String message = &quot;{\\&quot;my_id\\&quot;:\\&quot;1234\\&quot;}&quot;;\r\n    MyClass myClass = new Gson().fromJson(message,MyClass.class);\r\n    System.out.println(myClass.getId());","title":"Trigger the setter method of a field based on the field&#39;s JsonProperty","body":"<p>You can use reflections but best approach will be to use jackson libraries (jackson-core and jackson-databind) because these libraries will give you performance benefits as well.</p>\n<p>Below is small piece of code by using jackson libraries that you can refer -</p>\n<pre><code>    ObjectMapper mapper = new ObjectMapper();\n    String message = &quot;{\\&quot;my_id\\&quot;:\\&quot;1234\\&quot;}&quot;;\n    MyClass myClass = mapper.readValue(message,MyClass.class);\n    System.out.println(myClass.getId());\n</code></pre>\n<p>You can use Gson as well if you want but @JsonProperty wont work for Gson, there is different annotaion in Gson corresponding to this <strong>@SerializedName(&quot;my_id&quot;)</strong>.\nBelow is sample code for Gson as well -</p>\n<pre><code>public class MyClass {\n\n    @SerializedName(&quot;my_id&quot;)\n    private String id;\n    public String getId() {\n        return this.id;\n    }\n    public void setId(String id) {\n        this.id = id;\n    }\n}\n\nString message = &quot;{\\&quot;my_id\\&quot;:\\&quot;1234\\&quot;}&quot;;\nMyClass myClass = new Gson().fromJson(message,MyClass.class);\nSystem.out.println(myClass.getId());\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user19443549"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656511893,"creation_date":1656510031,"answer_id":72802427,"question_id":72801678,"body_markdown":"If you don&#39;t have message with you, in that case I think reflection only can help you and if you use reflection you even don&#39;t need to call setter method for setting value, you can use below code to set the value-\r\n\r\n    public void myMethod(MyClass myClass, String jsonProperty, String newId) throws IllegalAccessException {\r\n        for (Field field : MyClass.class.getDeclaredFields()) {\r\n            JsonProperty jsonPropAnnotation = field.getAnnotation(JsonProperty.class);\r\n            if (jsonPropAnnotation != null)\r\n                if (jsonPropAnnotation.value().equals(jsonProperty)) {\r\n                    field.setAccessible(true);\r\n                    field.set(myClass, newId);\r\n                }\r\n        }\r\n    }\r\n\r\nWithout iterating with for loop you cant set value but you can change approach where at application start up  you can populate a static map like below and then in your application you can just get field from map and can set the value without iterating again over loop. \r\n\r\n    public class MainClass {\r\n    private static final Map&lt;String, Field&gt; FIELD_MAP = new HashMap&lt;&gt;();\r\n\r\n    public static void main(String[] args) throws IllegalAccessException {\r\n        setFieldMap();\r\n        MyClass myClass = new MyClass();\r\n        myMethod(myClass, &quot;my_id&quot;, &quot;1234&quot;);\r\n        System.out.println(myClass.getId());\r\n    }\r\n\r\n    public static void myMethod(MyClass myClass, String jsonProperty, String newId) throws IllegalAccessException {\r\n        Field field = FIELD_MAP.get(jsonProperty);\r\n        field.setAccessible(true);\r\n        field.set(myClass, newId);\r\n    }\r\n\r\n    public static void setFieldMap() {\r\n        for (Field field : MyClass.class.getDeclaredFields()) {\r\n            JsonProperty ann = field.getAnnotation(JsonProperty.class);\r\n            if (ann != null)\r\n                if (null != ann.value()) {\r\n                    FIELD_MAP.put(ann.value(), field);\r\n                }\r\n        }\r\n    }\r\n    }\r\n\r\n","title":"Trigger the setter method of a field based on the field&#39;s JsonProperty","body":"<p>If you don't have message with you, in that case I think reflection only can help you and if you use reflection you even don't need to call setter method for setting value, you can use below code to set the value-</p>\n<pre><code>public void myMethod(MyClass myClass, String jsonProperty, String newId) throws IllegalAccessException {\n    for (Field field : MyClass.class.getDeclaredFields()) {\n        JsonProperty jsonPropAnnotation = field.getAnnotation(JsonProperty.class);\n        if (jsonPropAnnotation != null)\n            if (jsonPropAnnotation.value().equals(jsonProperty)) {\n                field.setAccessible(true);\n                field.set(myClass, newId);\n            }\n    }\n}\n</code></pre>\n<p>Without iterating with for loop you cant set value but you can change approach where at application start up  you can populate a static map like below and then in your application you can just get field from map and can set the value without iterating again over loop.</p>\n<pre><code>public class MainClass {\nprivate static final Map&lt;String, Field&gt; FIELD_MAP = new HashMap&lt;&gt;();\n\npublic static void main(String[] args) throws IllegalAccessException {\n    setFieldMap();\n    MyClass myClass = new MyClass();\n    myMethod(myClass, &quot;my_id&quot;, &quot;1234&quot;);\n    System.out.println(myClass.getId());\n}\n\npublic static void myMethod(MyClass myClass, String jsonProperty, String newId) throws IllegalAccessException {\n    Field field = FIELD_MAP.get(jsonProperty);\n    field.setAccessible(true);\n    field.set(myClass, newId);\n}\n\npublic static void setFieldMap() {\n    for (Field field : MyClass.class.getDeclaredFields()) {\n        JsonProperty ann = field.getAnnotation(JsonProperty.class);\n        if (ann != null)\n            if (null != ann.value()) {\n                FIELD_MAP.put(ann.value(), field);\n            }\n    }\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25557844,"reputation":93,"user_id":19340995,"display_name":"gmrm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656512259,"creation_date":1656510531,"answer_id":72802546,"question_id":72801678,"body_markdown":"With reflection:\r\n```\r\nclass AnotherClass {\r\n\r\n    Class&lt;JsonProperty&gt; jacksonAnnotation = JsonProperty.class;\r\n\r\n    public void myMethod(MyClass myClass, String jsonProperty, String newId) throws InvocationTargetException, IllegalAccessException {\r\n        Class&lt;MyClass&gt; clazz = MyClass.class;\r\n        Field[] fields = clazz.getDeclaredFields();\r\n        Method[] methods = clazz.getDeclaredMethods();\r\n        Method setter = null;\r\n        Method getter = null;\r\n        for(Field field : fields){\r\n            if(field.isAnnotationPresent(jacksonAnnotation)){\r\n                String value = field.getAnnotation(jacksonAnnotation).value();\r\n                if(value.equals(jsonProperty)){\r\n                    getter = getMethodForField(methods, field, &quot;get&quot;);\r\n                    setter = getMethodForField(methods, field, &quot;set&quot;);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        //getId() result\r\n        Object getResult = getter.invoke(myClass);\r\n\r\n        //setId() execution\r\n        setter.invoke(myClass, newId);\r\n\r\n        // Your logic comes here\r\n        System.out.println(getResult);\r\n        System.out.println(myClass.getId());\r\n\r\n    }\r\n\r\n    private Method getMethodForField(Method[] methods, Field field, String name) {\r\n        for(Method method : methods){\r\n            String methodName = method.getName().toLowerCase();\r\n            String getterName = String.format(&quot;%s%s&quot;, name, field.getName()).toLowerCase();\r\n            if(methodName.equals(getterName)){\r\n                return method;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n}\r\n```\r\n\r\nThis code will find the matching `getter` and `setter` for a field matching the `JsonProperty` and use them.\r\n\r\nSo the following execution:\r\n```\r\npublic static void main(String[] args) throws InvocationTargetException, IllegalAccessException {\r\n        MyClass myClass = new MyClass();\r\n        myClass.setId(&quot;oldId&quot;);\r\n        new AnotherClass().myMethod(myClass, &quot;my_id&quot;, &quot;newId&quot;);\r\n    }\r\n```\r\nWill output:\r\n```\r\noldId\r\nnewId\r\n```\r\n\r\n**Edit:**\r\n\r\nBased on [this answer][1], you could use Jacksons merge functionality to achieve the same and avoid a loop on fields:\r\n\r\n```\r\n    public void myMethod(MyClass myClass, String jsonProperty, String newId) throws JsonProcessingException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        ObjectReader updater = mapper.readerForUpdating(myClass);\r\n        MyClass updated = updater.readValue(String.format(&quot;{ \\&quot;%s\\&quot;:\\&quot;%s\\&quot; }&quot;, jsonProperty, newId));\r\n        System.out.println(updated.getId());\r\n    }\r\n```\r\n\r\nThough I don&#39;t know the performance impacts it might have since it requires transforming data to and from json.\r\n\r\n  [1]: https://stackoverflow.com/questions/9895041/merging-two-json-documents-using-jackson","title":"Trigger the setter method of a field based on the field&#39;s JsonProperty","body":"<p>With reflection:</p>\n<pre><code>class AnotherClass {\n\n    Class&lt;JsonProperty&gt; jacksonAnnotation = JsonProperty.class;\n\n    public void myMethod(MyClass myClass, String jsonProperty, String newId) throws InvocationTargetException, IllegalAccessException {\n        Class&lt;MyClass&gt; clazz = MyClass.class;\n        Field[] fields = clazz.getDeclaredFields();\n        Method[] methods = clazz.getDeclaredMethods();\n        Method setter = null;\n        Method getter = null;\n        for(Field field : fields){\n            if(field.isAnnotationPresent(jacksonAnnotation)){\n                String value = field.getAnnotation(jacksonAnnotation).value();\n                if(value.equals(jsonProperty)){\n                    getter = getMethodForField(methods, field, &quot;get&quot;);\n                    setter = getMethodForField(methods, field, &quot;set&quot;);\n                    break;\n                }\n            }\n        }\n\n        //getId() result\n        Object getResult = getter.invoke(myClass);\n\n        //setId() execution\n        setter.invoke(myClass, newId);\n\n        // Your logic comes here\n        System.out.println(getResult);\n        System.out.println(myClass.getId());\n\n    }\n\n    private Method getMethodForField(Method[] methods, Field field, String name) {\n        for(Method method : methods){\n            String methodName = method.getName().toLowerCase();\n            String getterName = String.format(&quot;%s%s&quot;, name, field.getName()).toLowerCase();\n            if(methodName.equals(getterName)){\n                return method;\n            }\n        }\n        return null;\n    }\n\n}\n</code></pre>\n<p>This code will find the matching <code>getter</code> and <code>setter</code> for a field matching the <code>JsonProperty</code> and use them.</p>\n<p>So the following execution:</p>\n<pre><code>public static void main(String[] args) throws InvocationTargetException, IllegalAccessException {\n        MyClass myClass = new MyClass();\n        myClass.setId(&quot;oldId&quot;);\n        new AnotherClass().myMethod(myClass, &quot;my_id&quot;, &quot;newId&quot;);\n    }\n</code></pre>\n<p>Will output:</p>\n<pre><code>oldId\nnewId\n</code></pre>\n<p><strong>Edit:</strong></p>\n<p>Based on <a href=\"https://stackoverflow.com/questions/9895041/merging-two-json-documents-using-jackson\">this answer</a>, you could use Jacksons merge functionality to achieve the same and avoid a loop on fields:</p>\n<pre><code>    public void myMethod(MyClass myClass, String jsonProperty, String newId) throws JsonProcessingException {\n        ObjectMapper mapper = new ObjectMapper();\n        ObjectReader updater = mapper.readerForUpdating(myClass);\n        MyClass updated = updater.readValue(String.format(&quot;{ \\&quot;%s\\&quot;:\\&quot;%s\\&quot; }&quot;, jsonProperty, newId));\n        System.out.println(updated.getId());\n    }\n</code></pre>\n<p>Though I don't know the performance impacts it might have since it requires transforming data to and from json.</p>\n"}],"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":444,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72802427,"answer_count":3,"score":1,"last_activity_date":1656512259,"creation_date":1656506795,"question_id":72801678,"body_markdown":"I have a class as follows:\r\n\r\n```\r\npublic class MyClass {\r\n   @JsonProperty(&quot;my_id&quot;)\r\n   private String id;\r\n\r\n   public getId() {\r\n      return this.id;\r\n   }\r\n\r\n   public setId(String id) {\r\n      this.id = id;\r\n   }\r\n}\r\n```\r\n\r\nI have another class where I have the *JsonProperty [my_id]* information with me. With this information, I would like to trigger the *getId()* and *setId()* methods.\r\n\r\n```\r\npublic class AnotherClass {\r\n   // jsonProperty value is &quot;my_id&quot;\r\n   public myMethod(MyClass myClass, String jsonProperty, String newId) {\r\n      // call the setter method setId(newId) of myClass\r\n     // call the getter method getId() of myClass\r\n   }\r\n}\r\n```\r\n\r\nI do understand that this is a classic case of *Reflection* in Java but I am unable to implement the same even after going through hours of documentation and resources on reflection. Can someone please help me here?\r\n\r\nWould it also be possible to use *Jackson ObjectMapper* or *Google Gson* to get the desired result?\r\n\r\n***Edit:***\r\n\r\nTwo of the solutions provided by &quot;@gmrm&quot; and &quot;@suraj tomar&quot; does the intended task [Thank you both]. But, both solutions are forced to iterate over each of the available fields. Instead of iterating over all the &quot;Fields&quot;, **isn&#39;t there a way to simply fetch the Field I am looking for based on the JsonProperty name**? As an example:\r\n\r\n```\r\npublic void myMethod(MyClass myClass, String jsonProperty, String newId) throws IllegalAccessException {\r\n    for (Field field : MyClass.class.getDeclaredFields()) {\r\n        JsonProperty jsonPropAnnotation = field.getAnnotation(JsonProperty.class);\r\n        if (jsonPropAnnotation != null)\r\n            if (jsonPropAnnotation.value().equals(jsonProperty)) {\r\n                field.setAccessible(true);\r\n                field.set(myClass, newId);\r\n            }\r\n    }\r\n}\r\n```\r\n\r\nThe solution above works.\r\nYet, I would like to avoid the loop below, if at all it is possible.\r\n\r\n```\r\nfor (Field field : MyClass.class.getDeclaredFields())\r\n```","title":"Trigger the setter method of a field based on the field&#39;s JsonProperty","body":"<p>I have a class as follows:</p>\n<pre><code>public class MyClass {\n   @JsonProperty(&quot;my_id&quot;)\n   private String id;\n\n   public getId() {\n      return this.id;\n   }\n\n   public setId(String id) {\n      this.id = id;\n   }\n}\n</code></pre>\n<p>I have another class where I have the <em>JsonProperty [my_id]</em> information with me. With this information, I would like to trigger the <em>getId()</em> and <em>setId()</em> methods.</p>\n<pre><code>public class AnotherClass {\n   // jsonProperty value is &quot;my_id&quot;\n   public myMethod(MyClass myClass, String jsonProperty, String newId) {\n      // call the setter method setId(newId) of myClass\n     // call the getter method getId() of myClass\n   }\n}\n</code></pre>\n<p>I do understand that this is a classic case of <em>Reflection</em> in Java but I am unable to implement the same even after going through hours of documentation and resources on reflection. Can someone please help me here?</p>\n<p>Would it also be possible to use <em>Jackson ObjectMapper</em> or <em>Google Gson</em> to get the desired result?</p>\n<p><em><strong>Edit:</strong></em></p>\n<p>Two of the solutions provided by &quot;@gmrm&quot; and &quot;@suraj tomar&quot; does the intended task [Thank you both]. But, both solutions are forced to iterate over each of the available fields. Instead of iterating over all the &quot;Fields&quot;, <strong>isn't there a way to simply fetch the Field I am looking for based on the JsonProperty name</strong>? As an example:</p>\n<pre><code>public void myMethod(MyClass myClass, String jsonProperty, String newId) throws IllegalAccessException {\n    for (Field field : MyClass.class.getDeclaredFields()) {\n        JsonProperty jsonPropAnnotation = field.getAnnotation(JsonProperty.class);\n        if (jsonPropAnnotation != null)\n            if (jsonPropAnnotation.value().equals(jsonProperty)) {\n                field.setAccessible(true);\n                field.set(myClass, newId);\n            }\n    }\n}\n</code></pre>\n<p>The solution above works.\nYet, I would like to avoid the loop below, if at all it is possible.</p>\n<pre><code>for (Field field : MyClass.class.getDeclaredFields())\n</code></pre>\n"},{"tags":["java","abstract-methods","default-method"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1656362192,"post_id":72777996,"comment_id":128549119,"body_markdown":"A _default_ method is by definition not _abstract_. Default methods were added to Java in version 8 and can only be declared in interfaces. If your method was declared like `void sampleMethod();`, then it would be abstract (implicitly, due to it being declared in an interface, though you could explicitly add the `abstract` keyword). As you can see, an abstract method cannot _do_ anything, as it has no method body.","body":"A <i>default</i> method is by definition not <i>abstract</i>. Default methods were added to Java in version 8 and can only be declared in interfaces. If your method was declared like <code>void sampleMethod();</code>, then it would be abstract (implicitly, due to it being declared in an interface, though you could explicitly add the <code>abstract</code> keyword). As you can see, an abstract method cannot <i>do</i> anything, as it has no method body."},{"owner":{"account_id":3013735,"reputation":13241,"user_id":2556520,"display_name":"bhspencer"},"score":1,"creation_date":1656362251,"post_id":72777996,"comment_id":128549137,"body_markdown":"That is a default method on an interface not an abstract method on an abstract class. https://stackoverflow.com/questions/19998454/when-to-use-java-8-interface-default-method-vs-abstract-method#:~:text=These%20two%20are%20quite%20different,are%20intended%20to%20be%20extended.","body":"That is a default method on an interface not an abstract method on an abstract class. <a href=\"https://stackoverflow.com/questions/19998454/when-to-use-java-8-interface-default-method-vs-abstract-method#:~:text=These%20two%20are%20quite%20different,are%20intended%20to%20be%20extended\" title=\"when to use java 8 interface default method vs abstract method%23%3a%7e%3atext%3dThese%2520two%2520are%2520quite%2520different%2care%2520intended%2520to%2520be%2520extended\">stackoverflow.com/questions/19998454/&hellip;</a>."}],"answers":[{"tags":[],"owner":{"account_id":23837295,"reputation":308,"user_id":17842877,"display_name":"xthe_white_lionx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656512189,"creation_date":1656512189,"answer_id":72802946,"question_id":72777996,"body_markdown":"The *sampleMethod()* isn&#39;t an abstract method it is a default methode, which means that you can call this Methode at any implementation, because this is the default methode which will be called. \r\nFurthermore you can override this methode in your implementation but if you do not it wil simply call your default methode from the interface. So you don&#39;t have to override/implement it in your implementation class.\r\n\r\nBut keep in mind that even with a default methode in your interface you can&#39;t manage any variables if you wont to do this use an abstract class like this   \r\n\r\n    public abstract class SomeAbstractClass{\r\n        String thing;\r\n\r\n        protected SomeAbstractClass(String thing) {\r\n            this.thing = thing;\r\n        }\r\n\r\n        void sampleMethod() {\r\n            System.out.println(thing);\r\n            //or do other stuff\r\n        }\r\n\r\n        abstract void otherMethode();\r\n    }","title":"can abstract method do System.out.println?","body":"<p>The <em>sampleMethod()</em> isn't an abstract method it is a default methode, which means that you can call this Methode at any implementation, because this is the default methode which will be called.\nFurthermore you can override this methode in your implementation but if you do not it wil simply call your default methode from the interface. So you don't have to override/implement it in your implementation class.</p>\n<p>But keep in mind that even with a default methode in your interface you can't manage any variables if you wont to do this use an abstract class like this</p>\n<pre><code>public abstract class SomeAbstractClass{\n    String thing;\n\n    protected SomeAbstractClass(String thing) {\n        this.thing = thing;\n    }\n\n    void sampleMethod() {\n        System.out.println(thing);\n        //or do other stuff\n    }\n\n    abstract void otherMethode();\n}\n</code></pre>\n"}],"owner":{"account_id":20733348,"reputation":11,"user_id":15224752,"display_name":"Lei"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1656512189,"creation_date":1656362058,"question_id":72777996,"body_markdown":"I am a beginner in Java. I have a question about the abstract method in Interface. Is the following ```sampleMethod()``` an abstract method? My understanding is that it is not an abstract method due to ```System.out.println```. Am I correct?\r\n\r\n```\r\ndefault void sampleMethod() {\r\n            System.out.println(&quot;Am I abstract method?&quot;);\r\n}\r\n```\r\n\r\nThanks in advance! \r\n\r\n  ","title":"can abstract method do System.out.println?","body":"<p>I am a beginner in Java. I have a question about the abstract method in Interface. Is the following <code>sampleMethod()</code> an abstract method? My understanding is that it is not an abstract method due to <code>System.out.println</code>. Am I correct?</p>\n<pre><code>default void sampleMethod() {\n            System.out.println(&quot;Am I abstract method?&quot;);\n}\n</code></pre>\n<p>Thanks in advance!</p>\n"},{"tags":["java","arrays","list","arraylist","data-structures"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":3,"creation_date":1656502158,"post_id":72800624,"comment_id":128587285,"body_markdown":"Could you use [edit] option and explain what makes *you* think it &quot;doesn&#39;t work correctly&quot;? How did you use it, what results did you expect and what did you get instead?","body":"Could you use <a href=\"https://stackoverflow.com/posts/72800624/edit\">edit</a> option and explain what makes <i>you</i> think it &quot;doesn&#39;t work correctly&quot;? How did you use it, what results did you expect and what did you get instead?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1656502249,"post_id":72800624,"comment_id":128587314,"body_markdown":"Also note that you are checking `i &lt; n/2;` but later doing `n--`. Does it look right?","body":"Also note that you are checking <code>i &lt; n&#47;2;</code> but later doing <code>n--</code>. Does it look right?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":2,"creation_date":1656502267,"post_id":72800624,"comment_id":128587325,"body_markdown":"`n-1-i` instead of `n-1`","body":"<code>n-1-i</code> instead of <code>n-1</code>"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1656502549,"post_id":72800624,"comment_id":128587441,"body_markdown":"BTW `a.set(i, a.set(n-1-i, a.get(i)));`  could be done for swapping, as `set` returns the old value.","body":"BTW <code>a.set(i, a.set(n-1-i, a.get(i)));</code>  could be done for swapping, as <code>set</code> returns the old value."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1656503198,"post_id":72800624,"comment_id":128587724,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1656505285,"post_id":72800624,"comment_id":128588508,"body_markdown":"Why do you name a method to reverse a list, `reverseArray`?","body":"Why do you name a method to reverse a list, <code>reverseArray</code>?"}],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656512001,"creation_date":1656512001,"answer_id":72802885,"question_id":72800624,"body_markdown":"I wouldn&#39;t use such an implementation as you&#39;re being destructive to the parameter.  If you&#39;re going to return a list, then create a new list.  Anyone using such a function will assume their source list will remain unaltered, but with your implementation, that isn&#39;t true.  Do something more like this:\r\n\r\n    public static &lt;T&gt; List&lt;T&gt; reverse(List&lt;T&gt; list) {\r\n        List&lt;T&gt; reverse = new ArrayList&lt;&gt;();\r\n\r\n        for (int i = list.size() - 1; i &gt;= 0; i--) {\r\n            reverse.add(list.get(i));\r\n        }\r\n\r\n        return reverse;\r\n    }","title":"Reverse a List in Java","body":"<p>I wouldn't use such an implementation as you're being destructive to the parameter.  If you're going to return a list, then create a new list.  Anyone using such a function will assume their source list will remain unaltered, but with your implementation, that isn't true.  Do something more like this:</p>\n<pre><code>public static &lt;T&gt; List&lt;T&gt; reverse(List&lt;T&gt; list) {\n    List&lt;T&gt; reverse = new ArrayList&lt;&gt;();\n\n    for (int i = list.size() - 1; i &gt;= 0; i--) {\n        reverse.add(list.get(i));\n    }\n\n    return reverse;\n}\n</code></pre>\n"}],"owner":{"account_id":23832879,"reputation":1,"user_id":18778302,"display_name":"Youssef Sultan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1656512001,"creation_date":1656502062,"question_id":72800624,"body_markdown":"Why this code for reverse a list in java doesn&#39;t work correctly?\r\n\r\n```\r\nimport java.util.List;\r\npublic class Main{\r\npublic static List&lt;Integer&gt; reverseArray(List&lt;Integer&gt; a){\r\n        int n = a.size();\r\n        int temp = 0;\r\n        for (int i = 0; i &lt; n/2; i++){\r\n            temp = a.get(n-1);\r\n            a.set(n-1, a.get(i));\r\n            a.set(i, temp);\r\n            n--;\r\n        }\r\n        return a;\r\n    }\r\n}\r\n```","title":"Reverse a List in Java","body":"<p>Why this code for reverse a list in java doesn't work correctly?</p>\n<pre><code>import java.util.List;\npublic class Main{\npublic static List&lt;Integer&gt; reverseArray(List&lt;Integer&gt; a){\n        int n = a.size();\n        int temp = 0;\n        for (int i = 0; i &lt; n/2; i++){\n            temp = a.get(n-1);\n            a.set(n-1, a.get(i));\n            a.set(i, temp);\n            n--;\n        }\n        return a;\n    }\n}\n</code></pre>\n"},{"tags":["java","mockito"],"answers":[{"tags":[],"owner":{"account_id":14295587,"reputation":41,"user_id":13326343,"display_name":"Felipe Martins"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1656511698,"creation_date":1656499911,"answer_id":72800148,"question_id":72799088,"body_markdown":"You need to use `spy` instead of `mock`:\r\n```java\r\nChannel channel = new Channel(portNumber);\r\nChannel spyChannel = Mockito.spy(channel);\r\nwhen(spyChannel.handle()).thenReturn(&quot;Ok&quot;);    // Mock implementation\r\n//when(chan.connect()).thenCallRealMethod();  now it calls real method by default\r\nspyChannel.connect();\r\n```\r\n\r\nplease take a look at this tutorial as well, probably it will solve your issue:\r\nhttps://www.baeldung.com/mockito-spy\r\n","title":"Pass constructor argument mock","body":"<p>You need to use <code>spy</code> instead of <code>mock</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Channel channel = new Channel(portNumber);\nChannel spyChannel = Mockito.spy(channel);\nwhen(spyChannel.handle()).thenReturn(&quot;Ok&quot;);    // Mock implementation\n//when(chan.connect()).thenCallRealMethod();  now it calls real method by default\nspyChannel.connect();\n</code></pre>\n<p>please take a look at this tutorial as well, probably it will solve your issue:\n<a href=\"https://www.baeldung.com/mockito-spy\" rel=\"nofollow noreferrer\">https://www.baeldung.com/mockito-spy</a></p>\n"}],"owner":{"account_id":455809,"reputation":12993,"user_id":854207,"accept_rate":62,"display_name":"paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656511698,"creation_date":1656495262,"question_id":72799088,"body_markdown":"I have a class `Channel` that receive in the constructor the port where need to make the call\r\n\r\nI want to mock partially the class, and for some method use the real implementation.\r\n\r\nI know I can use `thenCallRealMethod` but in order to use this `connect` method, my mock need to have the port, which as I mention I&#39;m passing in the constructor.\r\n\r\n    Channel  chan= mock(Channel.class);\r\n    when(chan.handle()).thenReturn(&quot;Ok&quot;);    // Mock implementation\r\n    when(chan.connect()).thenCallRealMethod(); \r\n\r\nAny idea how to make it?\r\n\r\n","title":"Pass constructor argument mock","body":"<p>I have a class <code>Channel</code> that receive in the constructor the port where need to make the call</p>\n<p>I want to mock partially the class, and for some method use the real implementation.</p>\n<p>I know I can use <code>thenCallRealMethod</code> but in order to use this <code>connect</code> method, my mock need to have the port, which as I mention I'm passing in the constructor.</p>\n<pre><code>Channel  chan= mock(Channel.class);\nwhen(chan.handle()).thenReturn(&quot;Ok&quot;);    // Mock implementation\nwhen(chan.connect()).thenCallRealMethod(); \n</code></pre>\n<p>Any idea how to make it?</p>\n"},{"tags":["java","spring","spring-batch","spring-transactions"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656511638,"creation_date":1656511638,"answer_id":72802791,"question_id":72797943,"body_markdown":"Two important points are worth mentioning in your case:\r\n\r\n* In the chunk-oriented processing model of Spring Batch, the design of what an &quot;item&quot; is is crucial. Items should be carefully designed as this would impact the correct choice of the item reader, processor and writer. Encapsulation is key here.\r\n* The chunk-oriented processing model is ***not*** suitable to every use case. In your requirement, I see a read operation in the write phase: ` [...] write country: foreach country { read csv list.. [...]`. This is a sign that the chunk-oriented model is probably not suitable, or the design of your algorithm is not compatible to be implemented with a chunk-oriented step.\r\n\r\nThat said, I do not see the requirement to use nested jobs with a single step each. A single job with different steps is more suitable IMO. One would design a job if there is a need for restartability, etc. But in your case, there is no such need for those nested jobs.\r\n\r\nThe way I would approach this kind of specific requirements is by first trying to come up with an algorithm independent from Spring Batch (ie ask yourself how I would do it ***without*** Spring Batch), then try to implement it with what Spring Batch provides (simple takslets, chunk-oriented tasklets, etc).","title":"How to process various levels of items in Spring Batch","body":"<p>Two important points are worth mentioning in your case:</p>\n<ul>\n<li>In the chunk-oriented processing model of Spring Batch, the design of what an &quot;item&quot; is is crucial. Items should be carefully designed as this would impact the correct choice of the item reader, processor and writer. Encapsulation is key here.</li>\n<li>The chunk-oriented processing model is <em><strong>not</strong></em> suitable to every use case. In your requirement, I see a read operation in the write phase: <code> [...] write country: foreach country { read csv list.. [...]</code>. This is a sign that the chunk-oriented model is probably not suitable, or the design of your algorithm is not compatible to be implemented with a chunk-oriented step.</li>\n</ul>\n<p>That said, I do not see the requirement to use nested jobs with a single step each. A single job with different steps is more suitable IMO. One would design a job if there is a need for restartability, etc. But in your case, there is no such need for those nested jobs.</p>\n<p>The way I would approach this kind of specific requirements is by first trying to come up with an algorithm independent from Spring Batch (ie ask yourself how I would do it <em><strong>without</strong></em> Spring Batch), then try to implement it with what Spring Batch provides (simple takslets, chunk-oriented tasklets, etc).</p>\n"}],"owner":{"account_id":25678068,"reputation":1,"user_id":19441205,"display_name":"eim equipazo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656511638,"creation_date":1656490256,"question_id":72797943,"body_markdown":"I need to process various levels of items in Spring Batch. \r\nFor each item level, I need to read new data and process it in a nested way.\r\n\r\nFor example, this 3 levels (country, csv list, csv):\r\n\r\n    read country...\r\n    process country... \r\n    write country: foreach country {\r\n       read csv list..\r\n       process csv list..\r\n       write csv list: foreach csv list {\r\n          read csv...\r\n          process csv...\r\n          write csv...\r\n       }\r\n\r\nAs first aproach I have managed to do it in a single job (with one read-write step), buy now I am trying to separate it in different jobs (because I want to re-use some methods, implement repositioning, multithread, and so on).\r\n\r\nI have seen that there is a way to launch jobs inside other job:\r\n\r\n    stepBuilderFactory.get(&quot;nestedJobStep&quot;).job(getNestedJob()).build();\r\n\r\n  \r\nBut this is valid only for sequential steps/jobs. I need a Job to be launched inside another, because it will process a single item of other job (for example, a csv from a csv list from a country).\r\n\r\nSo I think that the solution is to launch a job directly inside the write method of the step of the parent job:\r\n\r\n    @Override\r\n    public void write(List&lt;? extends OperationalCountry&gt; list) throws Exception {\r\n        for (CtbOperationalCountries item : list) {\r\n            writeItem(item);\r\n        }\r\n    }\r\n    \r\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n    public void writeItem(OperationalCountry item) throws Exception {\r\n        jobLauncher.run(getProcessCsvListJob(), createJobParameters(item));\r\n    }\r\n\r\nIn order to be able to launch a second job inside another I needed to do this in my JobRepositoryFactoryBean (otherwise I get a java.lang.IllegalStateException: Existing transaction detected in JobRepository):\r\n\r\n    factory.setValidateTransactionState(false);\r\n\r\nNow I can launch nested jobs, but it stucks while reading the second item (processCsvListJob) of the nested job. It seems that it is not creating new transactions...\r\n\r\nIn the AbstractJobRepositoryFactoryBean javadoc says:\r\n\r\n&gt; public void setIsolationLevelForCreate(java.lang.String isolationLevelForCreate) \r\n\r\n&gt; Flag to determine whether to check for an existing transaction when a\r\n&gt; JobExecution is created. Defaults to true because it is usually a\r\n&gt; mistake, and leads to problems with restartability and also to\r\n&gt; deadlocks in multi-threaded steps.\r\n\r\nSo maybe this is not the way of working with spring batch, or I am not configuring the transactions correctly, or I am missing something else.\r\n\r\nThanks in advance.","title":"How to process various levels of items in Spring Batch","body":"<p>I need to process various levels of items in Spring Batch.\nFor each item level, I need to read new data and process it in a nested way.</p>\n<p>For example, this 3 levels (country, csv list, csv):</p>\n<pre><code>read country...\nprocess country... \nwrite country: foreach country {\n   read csv list..\n   process csv list..\n   write csv list: foreach csv list {\n      read csv...\n      process csv...\n      write csv...\n   }\n</code></pre>\n<p>As first aproach I have managed to do it in a single job (with one read-write step), buy now I am trying to separate it in different jobs (because I want to re-use some methods, implement repositioning, multithread, and so on).</p>\n<p>I have seen that there is a way to launch jobs inside other job:</p>\n<pre><code>stepBuilderFactory.get(&quot;nestedJobStep&quot;).job(getNestedJob()).build();\n</code></pre>\n<p>But this is valid only for sequential steps/jobs. I need a Job to be launched inside another, because it will process a single item of other job (for example, a csv from a csv list from a country).</p>\n<p>So I think that the solution is to launch a job directly inside the write method of the step of the parent job:</p>\n<pre><code>@Override\npublic void write(List&lt;? extends OperationalCountry&gt; list) throws Exception {\n    for (CtbOperationalCountries item : list) {\n        writeItem(item);\n    }\n}\n\n@Transactional(propagation = Propagation.REQUIRES_NEW)\npublic void writeItem(OperationalCountry item) throws Exception {\n    jobLauncher.run(getProcessCsvListJob(), createJobParameters(item));\n}\n</code></pre>\n<p>In order to be able to launch a second job inside another I needed to do this in my JobRepositoryFactoryBean (otherwise I get a java.lang.IllegalStateException: Existing transaction detected in JobRepository):</p>\n<pre><code>factory.setValidateTransactionState(false);\n</code></pre>\n<p>Now I can launch nested jobs, but it stucks while reading the second item (processCsvListJob) of the nested job. It seems that it is not creating new transactions...</p>\n<p>In the AbstractJobRepositoryFactoryBean javadoc says:</p>\n<blockquote>\n<p>public void setIsolationLevelForCreate(java.lang.String isolationLevelForCreate)</p>\n</blockquote>\n<blockquote>\n<p>Flag to determine whether to check for an existing transaction when a\nJobExecution is created. Defaults to true because it is usually a\nmistake, and leads to problems with restartability and also to\ndeadlocks in multi-threaded steps.</p>\n</blockquote>\n<p>So maybe this is not the way of working with spring batch, or I am not configuring the transactions correctly, or I am missing something else.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","prometheus","metrics","dropwizard","codahale-metrics"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1656505039,"post_id":72800851,"comment_id":128588412,"body_markdown":"Your `localhost:8080/metrics` page looks like JSON. I am not aware Prometheus would digest that.  See https://prometheus.io/docs/instrumenting/exposition_formats/","body":"Your <code>localhost:8080&#47;metrics</code> page looks like JSON. I am not aware Prometheus would digest that.  See <a href=\"https://prometheus.io/docs/instrumenting/exposition_formats/\" rel=\"nofollow noreferrer\">prometheus.io/docs/instrumenting/exposition_formats</a>"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1656505946,"post_id":72800851,"comment_id":128588768,"body_markdown":"@Hiran Chaudhuri You are 100% correct.  Do you have an idea how to change format ? The question is actually about it.","body":"@Hiran Chaudhuri You are 100% correct.  Do you have an idea how to change format ? The question is actually about it."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656506230,"creation_date":1656506230,"answer_id":72801557,"question_id":72800851,"body_markdown":"I have implemented different ways to export metrics to Prometheus:\r\n\r\n1.1) Custom implementation for Pushgateway\r\n\r\nI wrote code that generates output into a StringBuilder and just follows the documentation https://prometheus.io/docs/instrumenting/exposition_formats/\r\n\r\nFinally POST that string to the Pushgateway using a java HttpClient of your choice.\r\n\r\n1.2) Custom page to be scraped by Prometheus\r\n\r\nI wrote a dynamic page (servlet, jsp, ...) that generates output with plain/text content type and just follows the documentation https://prometheus.io/docs/instrumenting/exposition_formats/\r\n\r\nConfigure Prometheus to scrape that dynamic page.\r\n\r\n2) use existing library\r\n\r\nI made use of https://github.com/prometheus/client_java, which is the official client library for Java. Check the chapter about Exporting in the readme, it is quite good and covers both pushing the metrics as well as getting scraped.","title":"How to export metrics (collected by DropWizard) in Prometheus format from java application?","body":"<p>I have implemented different ways to export metrics to Prometheus:</p>\n<p>1.1) Custom implementation for Pushgateway</p>\n<p>I wrote code that generates output into a StringBuilder and just follows the documentation <a href=\"https://prometheus.io/docs/instrumenting/exposition_formats/\" rel=\"nofollow noreferrer\">https://prometheus.io/docs/instrumenting/exposition_formats/</a></p>\n<p>Finally POST that string to the Pushgateway using a java HttpClient of your choice.</p>\n<p>1.2) Custom page to be scraped by Prometheus</p>\n<p>I wrote a dynamic page (servlet, jsp, ...) that generates output with plain/text content type and just follows the documentation <a href=\"https://prometheus.io/docs/instrumenting/exposition_formats/\" rel=\"nofollow noreferrer\">https://prometheus.io/docs/instrumenting/exposition_formats/</a></p>\n<p>Configure Prometheus to scrape that dynamic page.</p>\n<ol start=\"2\">\n<li>use existing library</li>\n</ol>\n<p>I made use of <a href=\"https://github.com/prometheus/client_java\" rel=\"nofollow noreferrer\">https://github.com/prometheus/client_java</a>, which is the official client library for Java. Check the chapter about Exporting in the readme, it is quite good and covers both pushing the metrics as well as getting scraped.</p>\n"},{"tags":[],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1656510598,"creation_date":1656508582,"answer_id":72802084,"question_id":72800851,"body_markdown":"I don&#39;t see significant difference but it is working example:\r\n\r\n    public class JavaDropwizard {\r\n      // Create registry for Dropwizard metrics.\r\n      static final MetricRegistry metrics = new MetricRegistry();\r\n      // Create a Dropwizard counter.\r\n      static final Counter counter = metrics.counter(&quot;my.example.counter.total&quot;);\r\n    \r\n      public static void main( String[] args ) throws Exception {\r\n          // Increment the counter.\r\n          counter.inc();\r\n    \r\n          // Hook the Dropwizard registry into the Prometheus registry\r\n          // via the DropwizardExports collector.\r\n          CollectorRegistry.defaultRegistry.register(new DropwizardExports(metrics));\r\n    \r\n    \r\n          // Expose Prometheus metrics.\r\n          Server server = new Server(1234);\r\n          ServletContextHandler context = new ServletContextHandler();\r\n          context.setContextPath(&quot;/&quot;);\r\n          server.setHandler(context);\r\n          context.addServlet(new ServletHolder(new MetricsServlet()), &quot;/metrics&quot;);\r\n          // Add metrics about CPU, JVM memory etc.\r\n          DefaultExports.initialize();\r\n          // Start the webserver.\r\n          server.start();\r\n          server.join();\r\n      }\r\n    }\r\n\r\n\r\n**pom.xml**\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;io.robustperception.java_examples&lt;/groupId&gt;\r\n      &lt;artifactId&gt;java_dropwizard&lt;/artifactId&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n      &lt;name&gt;java_dropwizard&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;simpleclient&lt;/artifactId&gt;\r\n          &lt;version&gt;0.15.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;simpleclient_hotspot&lt;/artifactId&gt;\r\n          &lt;version&gt;0.15.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;simpleclient_servlet&lt;/artifactId&gt;\r\n          &lt;version&gt;0.15.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;simpleclient_dropwizard&lt;/artifactId&gt;\r\n          &lt;version&gt;0.15.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.dropwizard.metrics&lt;/groupId&gt;\r\n            &lt;artifactId&gt;metrics-core&lt;/artifactId&gt;\r\n            &lt;version&gt;4.2.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jetty-servlet&lt;/artifactId&gt;\r\n          &lt;version&gt;8.1.7.v20120910&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    \r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;!-- Build a full jar with dependencies --&gt; \r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;archive&gt;\r\n            &lt;manifest&gt;\r\n              &lt;mainClass&gt;io.robustperception.java_examples.JavaDropwizard&lt;/mainClass&gt;\r\n            &lt;/manifest&gt;\r\n          &lt;/archive&gt;\r\n          &lt;descriptorRefs&gt;\r\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n          &lt;/descriptorRefs&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;make-assembly&lt;/id&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;single&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n","title":"How to export metrics (collected by DropWizard) in Prometheus format from java application?","body":"<p>I don't see significant difference but it is working example:</p>\n<pre><code>public class JavaDropwizard {\n  // Create registry for Dropwizard metrics.\n  static final MetricRegistry metrics = new MetricRegistry();\n  // Create a Dropwizard counter.\n  static final Counter counter = metrics.counter(&quot;my.example.counter.total&quot;);\n\n  public static void main( String[] args ) throws Exception {\n      // Increment the counter.\n      counter.inc();\n\n      // Hook the Dropwizard registry into the Prometheus registry\n      // via the DropwizardExports collector.\n      CollectorRegistry.defaultRegistry.register(new DropwizardExports(metrics));\n\n\n      // Expose Prometheus metrics.\n      Server server = new Server(1234);\n      ServletContextHandler context = new ServletContextHandler();\n      context.setContextPath(&quot;/&quot;);\n      server.setHandler(context);\n      context.addServlet(new ServletHolder(new MetricsServlet()), &quot;/metrics&quot;);\n      // Add metrics about CPU, JVM memory etc.\n      DefaultExports.initialize();\n      // Start the webserver.\n      server.start();\n      server.join();\n  }\n}\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;io.robustperception.java_examples&lt;/groupId&gt;\n  &lt;artifactId&gt;java_dropwizard&lt;/artifactId&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n  &lt;name&gt;java_dropwizard&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\n      &lt;artifactId&gt;simpleclient&lt;/artifactId&gt;\n      &lt;version&gt;0.15.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\n      &lt;artifactId&gt;simpleclient_hotspot&lt;/artifactId&gt;\n      &lt;version&gt;0.15.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\n      &lt;artifactId&gt;simpleclient_servlet&lt;/artifactId&gt;\n      &lt;version&gt;0.15.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\n      &lt;artifactId&gt;simpleclient_dropwizard&lt;/artifactId&gt;\n      &lt;version&gt;0.15.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.dropwizard.metrics&lt;/groupId&gt;\n        &lt;artifactId&gt;metrics-core&lt;/artifactId&gt;\n        &lt;version&gt;4.2.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\n      &lt;artifactId&gt;jetty-servlet&lt;/artifactId&gt;\n      &lt;version&gt;8.1.7.v20120910&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.1&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;!-- Build a full jar with dependencies --&gt; \n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;archive&gt;\n        &lt;manifest&gt;\n          &lt;mainClass&gt;io.robustperception.java_examples.JavaDropwizard&lt;/mainClass&gt;\n        &lt;/manifest&gt;\n      &lt;/archive&gt;\n      &lt;descriptorRefs&gt;\n        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n      &lt;/descriptorRefs&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;make-assembly&lt;/id&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;single&lt;/goal&gt;\n        &lt;/goals&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n  &lt;/plugin&gt;\n&lt;/plugins&gt;\n</code></pre>\n  \n\n"},{"tags":[],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656511579,"creation_date":1656511579,"answer_id":72802776,"question_id":72800851,"body_markdown":"Finally I&#39;ve found a root cause:\r\n\r\n    com.codahale.metrics.servlets.MetricsServlet\r\n\r\nshould be replaced with\r\n \r\n\r\n    io.prometheus.client.exporter.MetricsServlet\r\n\r\n","title":"How to export metrics (collected by DropWizard) in Prometheus format from java application?","body":"<p>Finally I've found a root cause:</p>\n<pre><code>com.codahale.metrics.servlets.MetricsServlet\n</code></pre>\n<p>should be replaced with</p>\n<pre><code>io.prometheus.client.exporter.MetricsServlet\n</code></pre>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2419,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72802084,"answer_count":3,"score":2,"last_activity_date":1656511579,"creation_date":1656503012,"question_id":72800851,"body_markdown":"**My aim** - create spring boot application, collect metrics using DropWizard and expose endpoint for Prometheus to consume application metrics:\r\n\r\nMy code:\r\n\r\n    @SpringBootApplication\r\n    @EnableMetrics(proxyTargetClass = true)\r\n    public class DemoApplication {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            SpringApplication.run(DemoApplication.class, args);\r\n        }\r\n    \r\n    }\r\n\r\n---------------------------------------------------\r\n\r\n    package com.example.demo;\r\n    \r\n    import com.codahale.metrics.Counter;\r\n    import com.codahale.metrics.MetricRegistry;\r\n    import com.codahale.metrics.annotation.Timed;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import javax.annotation.PostConstruct;\r\n    import java.util.concurrent.atomic.AtomicLong;\r\n    \r\n    @RestController\r\n    public class HelloController {\r\n        private AtomicLong atomicLong = new AtomicLong();\r\n        private Counter counter;\r\n    \r\n        @Autowired\r\n        private MetricRegistry metricRegistry;\r\n    \r\n        @PostConstruct\r\n        public void init() {\r\n            counter = metricRegistry.counter(&quot;counter&quot;);\r\n        }\r\n    \r\n        @GetMapping(&quot;/hello&quot;)\r\n        @Timed(name = &quot;my-index&quot;)\r\n        public String index() {\r\n            counter.inc();\r\n    \r\n            return &quot;Greetings from Spring Boot!. count=&quot; + atomicLong.incrementAndGet();\r\n        }\r\n    \r\n    }\r\n    \r\n    \r\n----------------------------------------------------  \r\n    \r\n    package com.example.demo;\r\n    \r\n    import com.codahale.metrics.ConsoleReporter;\r\n    import com.codahale.metrics.MetricRegistry;\r\n    import com.codahale.metrics.jvm.FileDescriptorRatioGauge;\r\n    import com.codahale.metrics.jvm.GarbageCollectorMetricSet;\r\n    import com.codahale.metrics.jvm.MemoryUsageGaugeSet;\r\n    import com.codahale.metrics.jvm.ThreadStatesGaugeSet;\r\n    import com.codahale.metrics.servlets.AdminServlet;\r\n    import com.codahale.metrics.servlets.CpuProfileServlet;\r\n    import com.codahale.metrics.servlets.MetricsServlet;\r\n    import com.ryantenney.metrics.spring.config.annotation.EnableMetrics;\r\n    import com.ryantenney.metrics.spring.config.annotation.MetricsConfigurerAdapter;\r\n    import io.prometheus.client.dropwizard.DropwizardExports;\r\n    import org.springframework.boot.web.servlet.ServletRegistrationBean;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    @Configuration\r\n    public class Config /*extends MetricsConfigurerAdapter*/ {\r\n        //@Override\r\n                //public void configureReporters(MetricRegistry metricRegistry) {\r\n            //    // registerReporter allows the MetricsConfigurerAdapter to\r\n            //    // shut down the reporter when the Spring context is closed\r\n            //   // registerReporter(ConsoleReporter\r\n            //   //         .forRegistry(metricRegistry)\r\n            //   //         .build())\r\n            //   //         .start(1, TimeUnit.MINUTES);\r\n    \r\n    \r\n            //    new DropwizardExports(metricRegistry).register();\r\n            //}\r\n    \r\n       @Bean\r\n       public DropwizardExports dropwizardExports(MetricRegistry metricRegistry){\r\n           DropwizardExports dropwizardExports = new DropwizardExports(metricRegistry);\r\n           dropwizardExports.register();\r\n           return dropwizardExports;\r\n       }\r\n    \r\n        @Bean\r\n        public MetricRegistry metricRegistry() {\r\n            MetricRegistry metricRegistry = new MetricRegistry();\r\n            metricRegistry.registerAll(new GarbageCollectorMetricSet());\r\n            metricRegistry.registerAll(new MemoryUsageGaugeSet());\r\n            metricRegistry.registerAll(new ThreadStatesGaugeSet());\r\n            return metricRegistry;\r\n        }\r\n    \r\n        @Bean\r\n        public ConsoleReporter consoleReporter(MetricRegistry metricRegistry) {\r\n            ConsoleReporter reporter = ConsoleReporter.forRegistry(metricRegistry).build();\r\n            reporter.start(5, TimeUnit.SECONDS);\r\n            reporter.report();\r\n            return reporter;\r\n        }\r\n    \r\n        @Bean\r\n        public ServletRegistrationBean&lt;MetricsServlet&gt; registerMetricsServlet(MetricRegistry metricRegistry) {\r\n            return new ServletRegistrationBean&lt;&gt;(new MetricsServlet(metricRegistry), &quot;/metrics/*&quot;);\r\n        }\r\n    \r\n        @Bean\r\n        public ServletRegistrationBean&lt;CpuProfileServlet&gt; registerCpuServlet() {\r\n            return new ServletRegistrationBean&lt;&gt;(new CpuProfileServlet(), &quot;/cpu/*&quot;);\r\n        }\r\n    }\r\n\r\n\r\n**build.gradle:**\r\n\r\n    plugins {\r\n    \tid &#39;org.springframework.boot&#39; version &#39;2.7.1&#39;\r\n    \tid &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n    \tid &#39;java&#39;\r\n    }\r\n    \r\n    group = &#39;com.example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = &#39;17&#39;\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    \timplementation &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\r\n    \t// Minimum required for metrics.\r\n    \timplementation (&#39;com.ryantenney.metrics:metrics-spring:3.1.3&#39;) {\r\n    \t\texclude group: &#39;com.codahale.metrics&#39;\r\n    \t\texclude group: &#39;org.springframework&#39;\r\n    \t}\r\n    \timplementation &#39;io.dropwizard.metrics:metrics-core:4.2.9&#39;\r\n    \timplementation &#39;io.dropwizard.metrics:metrics-annotation:4.2.9&#39;\r\n    \timplementation &#39;io.dropwizard.metrics:metrics-servlets:4.2.9&#39;\r\n    \r\n    \timplementation &#39;io.prometheus:simpleclient_dropwizard:0.15.0&#39;\r\n    \timplementation &#39;io.prometheus:simpleclient_servlet:0.15.0&#39;\r\n    \timplementation &#39;io.dropwizard:dropwizard-core:2.1.0&#39;\r\n    \r\n    \timplementation &#39;com.ryantenney.metrics:metrics-spring:3.1.3&#39;\r\n    \timplementation &#39;io.prometheus:simpleclient_common:0.16.0&#39;\r\n    \r\n    \ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    }\r\n    \r\n    tasks.named(&#39;test&#39;) {\r\n    \tuseJUnitPlatform()\r\n    }\r\n\r\nI access `localhost:8080/metrics` and receive following response:\r\n\r\n    {\r\n      &quot;version&quot;: &quot;4.0.0&quot;,\r\n      &quot;gauges&quot;: {\r\n        &quot;G1-Old-Generation.count&quot;: {\r\n          &quot;value&quot;: 0\r\n        },\r\n        &quot;G1-Old-Generation.time&quot;: {\r\n          &quot;value&quot;: 0\r\n        },\r\n        &quot;G1-Young-Generation.count&quot;: {\r\n          &quot;value&quot;: 7\r\n        },\r\n        &quot;G1-Young-Generation.time&quot;: {\r\n          &quot;value&quot;: 31\r\n        },\r\n        &quot;blocked.count&quot;: {\r\n          &quot;value&quot;: 0\r\n        },\r\n        &quot;count&quot;: {\r\n          &quot;value&quot;: 26\r\n        },\r\n        &quot;daemon.count&quot;: {\r\n          &quot;value&quot;: 22\r\n        },\r\n        &quot;deadlock.count&quot;: {\r\n          &quot;value&quot;: 0\r\n        },\r\n        &quot;deadlocks&quot;: {\r\n          &quot;value&quot;: []\r\n        },\r\n        &quot;heap.committed&quot;: {\r\n          &quot;value&quot;: 301989888\r\n        },\r\n        &quot;heap.init&quot;: {\r\n          &quot;value&quot;: 532676608\r\n        },\r\n        &quot;heap.max&quot;: {\r\n          &quot;value&quot;: 8518631424\r\n        },\r\n        &quot;heap.usage&quot;: {\r\n          &quot;value&quot;: 0.008041180864688155\r\n        },\r\n        &quot;heap.used&quot;: {\r\n          &quot;value&quot;: 68499856\r\n        },\r\n        &quot;new.count&quot;: {\r\n          &quot;value&quot;: 0\r\n        },\r\n        &quot;non-heap.committed&quot;: {\r\n          &quot;value&quot;: 51707904\r\n        },\r\n        &quot;non-heap.init&quot;: {\r\n          &quot;value&quot;: 2555904\r\n        },\r\n        &quot;non-heap.max&quot;: {\r\n          &quot;value&quot;: -1\r\n        },\r\n        &quot;non-heap.usage&quot;: {\r\n          &quot;value&quot;: -5.0738536E7\r\n        },\r\n        &quot;non-heap.used&quot;: {\r\n          &quot;value&quot;: 50738536\r\n        },\r\n        &quot;peak.count&quot;: {\r\n          &quot;value&quot;: 32\r\n        },\r\n        &quot;pools.CodeCache.committed&quot;: {\r\n          &quot;value&quot;: 10551296\r\n        },\r\n        &quot;pools.CodeCache.init&quot;: {\r\n          &quot;value&quot;: 2555904\r\n        },\r\n        &quot;pools.CodeCache.max&quot;: {\r\n          &quot;value&quot;: 50331648\r\n        },\r\n        &quot;pools.CodeCache.usage&quot;: {\r\n          &quot;value&quot;: 0.2039642333984375\r\n        },\r\n        &quot;pools.CodeCache.used&quot;: {\r\n          &quot;value&quot;: 10265856\r\n        },\r\n        &quot;pools.Compressed-Class-Space.committed&quot;: {\r\n          &quot;value&quot;: 5177344\r\n        },\r\n        &quot;pools.Compressed-Class-Space.init&quot;: {\r\n          &quot;value&quot;: 0\r\n        },\r\n        &quot;pools.Compressed-Class-Space.max&quot;: {\r\n          &quot;value&quot;: 1073741824\r\n        },\r\n        &quot;pools.Compressed-Class-Space.usage&quot;: {\r\n          &quot;value&quot;: 0.004625104367733002\r\n        },\r\n        &quot;pools.Compressed-Class-Space.used&quot;: {\r\n          &quot;value&quot;: 4966168\r\n        },\r\n        &quot;pools.G1-Eden-Space.committed&quot;: {\r\n          &quot;value&quot;: 188743680\r\n        },\r\n        &quot;pools.G1-Eden-Space.init&quot;: {\r\n          &quot;value&quot;: 29360128\r\n        },\r\n        &quot;pools.G1-Eden-Space.max&quot;: {\r\n          &quot;value&quot;: -1\r\n        },\r\n        &quot;pools.G1-Eden-Space.usage&quot;: {\r\n          &quot;value&quot;: 0.26666666666666666\r\n        },\r\n        &quot;pools.G1-Eden-Space.used&quot;: {\r\n          &quot;value&quot;: 50331648\r\n        },\r\n        &quot;pools.G1-Eden-Space.used-after-gc&quot;: {\r\n          &quot;value&quot;: 0\r\n        },\r\n        &quot;pools.G1-Old-Gen.committed&quot;: {\r\n          &quot;value&quot;: 109051904\r\n        },\r\n        &quot;pools.G1-Old-Gen.init&quot;: {\r\n          &quot;value&quot;: 503316480\r\n        },\r\n        &quot;pools.G1-Old-Gen.max&quot;: {\r\n          &quot;value&quot;: 8518631424\r\n        },\r\n        &quot;pools.G1-Old-Gen.usage&quot;: {\r\n          &quot;value&quot;: 0.0017806278080379123\r\n        },\r\n        &quot;pools.G1-Old-Gen.used&quot;: {\r\n          &quot;value&quot;: 15168512\r\n        },\r\n        &quot;pools.G1-Old-Gen.used-after-gc&quot;: {\r\n          &quot;value&quot;: 15168512\r\n        },\r\n        &quot;pools.G1-Survivor-Space.committed&quot;: {\r\n          &quot;value&quot;: 4194304\r\n        },\r\n        &quot;pools.G1-Survivor-Space.init&quot;: {\r\n          &quot;value&quot;: 0\r\n        },\r\n        &quot;pools.G1-Survivor-Space.max&quot;: {\r\n          &quot;value&quot;: -1\r\n        },\r\n        &quot;pools.G1-Survivor-Space.usage&quot;: {\r\n          &quot;value&quot;: 0.7151832580566406\r\n        },\r\n        &quot;pools.G1-Survivor-Space.used&quot;: {\r\n          &quot;value&quot;: 2999696\r\n        },\r\n        &quot;pools.G1-Survivor-Space.used-after-gc&quot;: {\r\n          &quot;value&quot;: 2999696\r\n        },\r\n        &quot;pools.Metaspace.committed&quot;: {\r\n          &quot;value&quot;: 35979264\r\n        },\r\n        &quot;pools.Metaspace.init&quot;: {\r\n          &quot;value&quot;: 0\r\n        },\r\n        &quot;pools.Metaspace.max&quot;: {\r\n          &quot;value&quot;: -1\r\n        },\r\n        &quot;pools.Metaspace.usage&quot;: {\r\n          &quot;value&quot;: 0.9868604316086066\r\n        },\r\n        &quot;pools.Metaspace.used&quot;: {\r\n          &quot;value&quot;: 35506512\r\n        },\r\n        &quot;runnable.count&quot;: {\r\n          &quot;value&quot;: 10\r\n        },\r\n        &quot;terminated.count&quot;: {\r\n          &quot;value&quot;: 0\r\n        },\r\n        &quot;timed_waiting.count&quot;: {\r\n          &quot;value&quot;: 5\r\n        },\r\n        &quot;total.committed&quot;: {\r\n          &quot;value&quot;: 353697792\r\n        },\r\n        &quot;total.init&quot;: {\r\n          &quot;value&quot;: 535232512\r\n        },\r\n        &quot;total.max&quot;: {\r\n          &quot;value&quot;: 8518631423\r\n        },\r\n        &quot;total.used&quot;: {\r\n          &quot;value&quot;: 119238392\r\n        },\r\n        &quot;total_started.count&quot;: {\r\n          &quot;value&quot;: 47\r\n        },\r\n        &quot;waiting.count&quot;: {\r\n          &quot;value&quot;: 11\r\n        }\r\n      },\r\n      &quot;counters&quot;: {\r\n        &quot;counter&quot;: {\r\n          &quot;count&quot;: 9\r\n        }\r\n      },\r\n      &quot;histograms&quot;: {},\r\n      &quot;meters&quot;: {},\r\n      &quot;timers&quot;: {}\r\n    }\r\n\r\n\r\nObviously this output is not applicable for Prometheus (all dots should be replaced with &quot;_&quot; at least)\r\n\r\n\r\nHow can I make output in format ready for prometheus ?\r\n\r\nP.S.\r\n-\r\n\r\nBased on [documentation][1] I&#39;ve understand that class `io.prometheus.client.dropwizardDropwizardExports` is responsible for generating metric in format ready for Prometheus but I can&#39;t understand how. \r\n\r\n\r\n  [1]: https://github.com/prometheus/client_java","title":"How to export metrics (collected by DropWizard) in Prometheus format from java application?","body":"<p><strong>My aim</strong> - create spring boot application, collect metrics using DropWizard and expose endpoint for Prometheus to consume application metrics:</p>\n<p>My code:</p>\n<pre><code>@SpringBootApplication\n@EnableMetrics(proxyTargetClass = true)\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<hr />\n<pre><code>package com.example.demo;\n\nimport com.codahale.metrics.Counter;\nimport com.codahale.metrics.MetricRegistry;\nimport com.codahale.metrics.annotation.Timed;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport javax.annotation.PostConstruct;\nimport java.util.concurrent.atomic.AtomicLong;\n\n@RestController\npublic class HelloController {\n    private AtomicLong atomicLong = new AtomicLong();\n    private Counter counter;\n\n    @Autowired\n    private MetricRegistry metricRegistry;\n\n    @PostConstruct\n    public void init() {\n        counter = metricRegistry.counter(&quot;counter&quot;);\n    }\n\n    @GetMapping(&quot;/hello&quot;)\n    @Timed(name = &quot;my-index&quot;)\n    public String index() {\n        counter.inc();\n\n        return &quot;Greetings from Spring Boot!. count=&quot; + atomicLong.incrementAndGet();\n    }\n\n}\n</code></pre>\n<hr />\n<pre><code>package com.example.demo;\n\nimport com.codahale.metrics.ConsoleReporter;\nimport com.codahale.metrics.MetricRegistry;\nimport com.codahale.metrics.jvm.FileDescriptorRatioGauge;\nimport com.codahale.metrics.jvm.GarbageCollectorMetricSet;\nimport com.codahale.metrics.jvm.MemoryUsageGaugeSet;\nimport com.codahale.metrics.jvm.ThreadStatesGaugeSet;\nimport com.codahale.metrics.servlets.AdminServlet;\nimport com.codahale.metrics.servlets.CpuProfileServlet;\nimport com.codahale.metrics.servlets.MetricsServlet;\nimport com.ryantenney.metrics.spring.config.annotation.EnableMetrics;\nimport com.ryantenney.metrics.spring.config.annotation.MetricsConfigurerAdapter;\nimport io.prometheus.client.dropwizard.DropwizardExports;\nimport org.springframework.boot.web.servlet.ServletRegistrationBean;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport java.util.concurrent.TimeUnit;\n\n@Configuration\npublic class Config /*extends MetricsConfigurerAdapter*/ {\n    //@Override\n            //public void configureReporters(MetricRegistry metricRegistry) {\n        //    // registerReporter allows the MetricsConfigurerAdapter to\n        //    // shut down the reporter when the Spring context is closed\n        //   // registerReporter(ConsoleReporter\n        //   //         .forRegistry(metricRegistry)\n        //   //         .build())\n        //   //         .start(1, TimeUnit.MINUTES);\n\n\n        //    new DropwizardExports(metricRegistry).register();\n        //}\n\n   @Bean\n   public DropwizardExports dropwizardExports(MetricRegistry metricRegistry){\n       DropwizardExports dropwizardExports = new DropwizardExports(metricRegistry);\n       dropwizardExports.register();\n       return dropwizardExports;\n   }\n\n    @Bean\n    public MetricRegistry metricRegistry() {\n        MetricRegistry metricRegistry = new MetricRegistry();\n        metricRegistry.registerAll(new GarbageCollectorMetricSet());\n        metricRegistry.registerAll(new MemoryUsageGaugeSet());\n        metricRegistry.registerAll(new ThreadStatesGaugeSet());\n        return metricRegistry;\n    }\n\n    @Bean\n    public ConsoleReporter consoleReporter(MetricRegistry metricRegistry) {\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(metricRegistry).build();\n        reporter.start(5, TimeUnit.SECONDS);\n        reporter.report();\n        return reporter;\n    }\n\n    @Bean\n    public ServletRegistrationBean&lt;MetricsServlet&gt; registerMetricsServlet(MetricRegistry metricRegistry) {\n        return new ServletRegistrationBean&lt;&gt;(new MetricsServlet(metricRegistry), &quot;/metrics/*&quot;);\n    }\n\n    @Bean\n    public ServletRegistrationBean&lt;CpuProfileServlet&gt; registerCpuServlet() {\n        return new ServletRegistrationBean&lt;&gt;(new CpuProfileServlet(), &quot;/cpu/*&quot;);\n    }\n}\n</code></pre>\n<p><strong>build.gradle:</strong></p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.7.1'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'java'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\n    // Minimum required for metrics.\n    implementation ('com.ryantenney.metrics:metrics-spring:3.1.3') {\n        exclude group: 'com.codahale.metrics'\n        exclude group: 'org.springframework'\n    }\n    implementation 'io.dropwizard.metrics:metrics-core:4.2.9'\n    implementation 'io.dropwizard.metrics:metrics-annotation:4.2.9'\n    implementation 'io.dropwizard.metrics:metrics-servlets:4.2.9'\n\n    implementation 'io.prometheus:simpleclient_dropwizard:0.15.0'\n    implementation 'io.prometheus:simpleclient_servlet:0.15.0'\n    implementation 'io.dropwizard:dropwizard-core:2.1.0'\n\n    implementation 'com.ryantenney.metrics:metrics-spring:3.1.3'\n    implementation 'io.prometheus:simpleclient_common:0.16.0'\n\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>I access <code>localhost:8080/metrics</code> and receive following response:</p>\n<pre><code>{\n  &quot;version&quot;: &quot;4.0.0&quot;,\n  &quot;gauges&quot;: {\n    &quot;G1-Old-Generation.count&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;G1-Old-Generation.time&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;G1-Young-Generation.count&quot;: {\n      &quot;value&quot;: 7\n    },\n    &quot;G1-Young-Generation.time&quot;: {\n      &quot;value&quot;: 31\n    },\n    &quot;blocked.count&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;count&quot;: {\n      &quot;value&quot;: 26\n    },\n    &quot;daemon.count&quot;: {\n      &quot;value&quot;: 22\n    },\n    &quot;deadlock.count&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;deadlocks&quot;: {\n      &quot;value&quot;: []\n    },\n    &quot;heap.committed&quot;: {\n      &quot;value&quot;: 301989888\n    },\n    &quot;heap.init&quot;: {\n      &quot;value&quot;: 532676608\n    },\n    &quot;heap.max&quot;: {\n      &quot;value&quot;: 8518631424\n    },\n    &quot;heap.usage&quot;: {\n      &quot;value&quot;: 0.008041180864688155\n    },\n    &quot;heap.used&quot;: {\n      &quot;value&quot;: 68499856\n    },\n    &quot;new.count&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;non-heap.committed&quot;: {\n      &quot;value&quot;: 51707904\n    },\n    &quot;non-heap.init&quot;: {\n      &quot;value&quot;: 2555904\n    },\n    &quot;non-heap.max&quot;: {\n      &quot;value&quot;: -1\n    },\n    &quot;non-heap.usage&quot;: {\n      &quot;value&quot;: -5.0738536E7\n    },\n    &quot;non-heap.used&quot;: {\n      &quot;value&quot;: 50738536\n    },\n    &quot;peak.count&quot;: {\n      &quot;value&quot;: 32\n    },\n    &quot;pools.CodeCache.committed&quot;: {\n      &quot;value&quot;: 10551296\n    },\n    &quot;pools.CodeCache.init&quot;: {\n      &quot;value&quot;: 2555904\n    },\n    &quot;pools.CodeCache.max&quot;: {\n      &quot;value&quot;: 50331648\n    },\n    &quot;pools.CodeCache.usage&quot;: {\n      &quot;value&quot;: 0.2039642333984375\n    },\n    &quot;pools.CodeCache.used&quot;: {\n      &quot;value&quot;: 10265856\n    },\n    &quot;pools.Compressed-Class-Space.committed&quot;: {\n      &quot;value&quot;: 5177344\n    },\n    &quot;pools.Compressed-Class-Space.init&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;pools.Compressed-Class-Space.max&quot;: {\n      &quot;value&quot;: 1073741824\n    },\n    &quot;pools.Compressed-Class-Space.usage&quot;: {\n      &quot;value&quot;: 0.004625104367733002\n    },\n    &quot;pools.Compressed-Class-Space.used&quot;: {\n      &quot;value&quot;: 4966168\n    },\n    &quot;pools.G1-Eden-Space.committed&quot;: {\n      &quot;value&quot;: 188743680\n    },\n    &quot;pools.G1-Eden-Space.init&quot;: {\n      &quot;value&quot;: 29360128\n    },\n    &quot;pools.G1-Eden-Space.max&quot;: {\n      &quot;value&quot;: -1\n    },\n    &quot;pools.G1-Eden-Space.usage&quot;: {\n      &quot;value&quot;: 0.26666666666666666\n    },\n    &quot;pools.G1-Eden-Space.used&quot;: {\n      &quot;value&quot;: 50331648\n    },\n    &quot;pools.G1-Eden-Space.used-after-gc&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;pools.G1-Old-Gen.committed&quot;: {\n      &quot;value&quot;: 109051904\n    },\n    &quot;pools.G1-Old-Gen.init&quot;: {\n      &quot;value&quot;: 503316480\n    },\n    &quot;pools.G1-Old-Gen.max&quot;: {\n      &quot;value&quot;: 8518631424\n    },\n    &quot;pools.G1-Old-Gen.usage&quot;: {\n      &quot;value&quot;: 0.0017806278080379123\n    },\n    &quot;pools.G1-Old-Gen.used&quot;: {\n      &quot;value&quot;: 15168512\n    },\n    &quot;pools.G1-Old-Gen.used-after-gc&quot;: {\n      &quot;value&quot;: 15168512\n    },\n    &quot;pools.G1-Survivor-Space.committed&quot;: {\n      &quot;value&quot;: 4194304\n    },\n    &quot;pools.G1-Survivor-Space.init&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;pools.G1-Survivor-Space.max&quot;: {\n      &quot;value&quot;: -1\n    },\n    &quot;pools.G1-Survivor-Space.usage&quot;: {\n      &quot;value&quot;: 0.7151832580566406\n    },\n    &quot;pools.G1-Survivor-Space.used&quot;: {\n      &quot;value&quot;: 2999696\n    },\n    &quot;pools.G1-Survivor-Space.used-after-gc&quot;: {\n      &quot;value&quot;: 2999696\n    },\n    &quot;pools.Metaspace.committed&quot;: {\n      &quot;value&quot;: 35979264\n    },\n    &quot;pools.Metaspace.init&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;pools.Metaspace.max&quot;: {\n      &quot;value&quot;: -1\n    },\n    &quot;pools.Metaspace.usage&quot;: {\n      &quot;value&quot;: 0.9868604316086066\n    },\n    &quot;pools.Metaspace.used&quot;: {\n      &quot;value&quot;: 35506512\n    },\n    &quot;runnable.count&quot;: {\n      &quot;value&quot;: 10\n    },\n    &quot;terminated.count&quot;: {\n      &quot;value&quot;: 0\n    },\n    &quot;timed_waiting.count&quot;: {\n      &quot;value&quot;: 5\n    },\n    &quot;total.committed&quot;: {\n      &quot;value&quot;: 353697792\n    },\n    &quot;total.init&quot;: {\n      &quot;value&quot;: 535232512\n    },\n    &quot;total.max&quot;: {\n      &quot;value&quot;: 8518631423\n    },\n    &quot;total.used&quot;: {\n      &quot;value&quot;: 119238392\n    },\n    &quot;total_started.count&quot;: {\n      &quot;value&quot;: 47\n    },\n    &quot;waiting.count&quot;: {\n      &quot;value&quot;: 11\n    }\n  },\n  &quot;counters&quot;: {\n    &quot;counter&quot;: {\n      &quot;count&quot;: 9\n    }\n  },\n  &quot;histograms&quot;: {},\n  &quot;meters&quot;: {},\n  &quot;timers&quot;: {}\n}\n</code></pre>\n<p>Obviously this output is not applicable for Prometheus (all dots should be replaced with &quot;_&quot; at least)</p>\n<p>How can I make output in format ready for prometheus ?</p>\n<h2>P.S.</h2>\n<p>Based on <a href=\"https://github.com/prometheus/client_java\" rel=\"nofollow noreferrer\">documentation</a> I've understand that class <code>io.prometheus.client.dropwizardDropwizardExports</code> is responsible for generating metric in format ready for Prometheus but I can't understand how.</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-oauth2"],"answers":[{"tags":[],"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1656511488,"creation_date":1656511488,"answer_id":72802761,"question_id":72786829,"body_markdown":"The `ResourceServerSecurityConfigurer` is from the [EOL&#39;d `spring-security-oauth` project][1], therefore there is no support for new features/deprecations. I recommend you to use [Spring Security&#39;s support for OAuth 2.0][2].\r\n\r\n\r\n  [1]: https://github.com/spring-attic/spring-security-oauth#spring-security-oauth-is-no-longer-actively-maintained-by-vmware-inc\r\n  [2]: https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html","title":"Replace WebSecurityConfigurerAdapter in Spring boot for ResourceServerConfigurerAdapter","body":"<p>The <code>ResourceServerSecurityConfigurer</code> is from the <a href=\"https://github.com/spring-attic/spring-security-oauth#spring-security-oauth-is-no-longer-actively-maintained-by-vmware-inc\" rel=\"nofollow noreferrer\">EOL'd <code>spring-security-oauth</code> project</a>, therefore there is no support for new features/deprecations. I recommend you to use <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html\" rel=\"nofollow noreferrer\">Spring Security's support for OAuth 2.0</a>.</p>\n"}],"owner":{"account_id":2676787,"reputation":1076,"user_id":2352196,"accept_rate":67,"display_name":"Bojan Trajkovski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2914,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":72802761,"answer_count":1,"score":3,"last_activity_date":1656511488,"creation_date":1656420912,"question_id":72786829,"body_markdown":"Since Spring Boot 2.7.x version `WebSecurityConfigurerAdapter` class is deprecated and there is a [guide][1] from spring.io on how to replace those classes and use component-based security configuration.\r\n\r\nMy question is how to handle the following use-case:\r\n\r\n```java\r\n@Configuration\r\n@EnableResourceServer\r\npublic class BearerAuthWebSecurityConfiguration extends ResourceServerConfigurerAdapter {\r\n\r\n    @Override\r\n    public void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .antMatcher(&quot;/api/**&quot;)\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .authorizeRequests()\r\n                .anyRequest()\r\n                .authenticated();\r\n    }\r\n\r\n    @Override\r\n    public void configure(ResourceServerSecurityConfigurer resources) {\r\n        resources.resourceId(null);\r\n        resources.authenticationManager(new OAuth2AuthenticationManager());\r\n    }\r\n    \r\n}\r\n```\r\n\r\nI did not find any guide on how to handle `@EnableResourceServer` and `ResourceServerConfigurerAdapter` using the new component-based security configuration. And under the hood these classes also use `WebSecurityConfigurerAdapter` and should be moved to the component-based security configuration. \r\n\r\n  [1]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter","title":"Replace WebSecurityConfigurerAdapter in Spring boot for ResourceServerConfigurerAdapter","body":"<p>Since Spring Boot 2.7.x version <code>WebSecurityConfigurerAdapter</code> class is deprecated and there is a <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">guide</a> from spring.io on how to replace those classes and use component-based security configuration.</p>\n<p>My question is how to handle the following use-case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableResourceServer\npublic class BearerAuthWebSecurityConfiguration extends ResourceServerConfigurerAdapter {\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        http\n                .antMatcher(&quot;/api/**&quot;)\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                .anyRequest()\n                .authenticated();\n    }\n\n    @Override\n    public void configure(ResourceServerSecurityConfigurer resources) {\n        resources.resourceId(null);\n        resources.authenticationManager(new OAuth2AuthenticationManager());\n    }\n    \n}\n</code></pre>\n<p>I did not find any guide on how to handle <code>@EnableResourceServer</code> and <code>ResourceServerConfigurerAdapter</code> using the new component-based security configuration. And under the hood these classes also use <code>WebSecurityConfigurerAdapter</code> and should be moved to the component-based security configuration.</p>\n"},{"tags":["java","selenium","selenium-chromedriver","nosuchelementexception","findelement"],"comments":[{"owner":{"account_id":18966922,"reputation":3563,"user_id":13841248,"display_name":"RichEdwards"},"score":0,"creation_date":1656507558,"post_id":72801204,"comment_id":128589526,"body_markdown":"`js.executeScript(&quot;return document.readyState&quot;)` is just that page source has loaded, not that the final page content is ready and redered. Pages which load with JS take longer and need extra synchronisation.  Try and implicit wait for simplicity.  Beyond that, validate if your element is in an `iframe` or `shadowroot`. Both of these need special handling. Finally, are you sure your element is present at runtime? - Your using an absolute xpath and as such it&#39;s fragile. Even things like the window size can break xpaths like that.","body":"<code>js.executeScript(&quot;return document.readyState&quot;)</code> is just that page source has loaded, not that the final page content is ready and redered. Pages which load with JS take longer and need extra synchronisation.  Try and implicit wait for simplicity.  Beyond that, validate if your element is in an <code>iframe</code> or <code>shadowroot</code>. Both of these need special handling. Finally, are you sure your element is present at runtime? - Your using an absolute xpath and as such it&#39;s fragile. Even things like the window size can break xpaths like that."},{"owner":{"account_id":25531653,"reputation":17,"user_id":19319560,"display_name":"DGStar"},"score":0,"creation_date":1656507981,"post_id":72801204,"comment_id":128589707,"body_markdown":"@RichEdwards I&#39;m still learning so I don&#39;t know how to do that, could you help me with that?","body":"@RichEdwards I&#39;m still learning so I don&#39;t know how to do that, could you help me with that?"},{"owner":{"account_id":18966922,"reputation":3563,"user_id":13841248,"display_name":"RichEdwards"},"score":0,"creation_date":1656508170,"post_id":72801204,"comment_id":128589793,"body_markdown":"Implicit wait - add this once after you create your driver: `driver.manage().timeouts().implicitlyWait(10,TimeUnit.SECONDS) ;`","body":"Implicit wait - add this once after you create your driver: <code>driver.manage().timeouts().implicitlyWait(10,TimeUnit.SECOND&zwnj;&#8203;S) ;</code>"},{"owner":{"account_id":18966922,"reputation":3563,"user_id":13841248,"display_name":"RichEdwards"},"score":0,"creation_date":1656508250,"post_id":72801204,"comment_id":128589836,"body_markdown":"for `iframe` - open devtools (`f12`), select the elements tab,  ctrl+f to find in the DOM, and search `iframe` and `frame` - then scroll up/down to see if your element is within any given frame","body":"for <code>iframe</code> - open devtools (<code>f12</code>), select the elements tab,  ctrl+f to find in the DOM, and search <code>iframe</code> and <code>frame</code> - then scroll up/down to see if your element is within any given frame"},{"owner":{"account_id":18966922,"reputation":3563,"user_id":13841248,"display_name":"RichEdwards"},"score":0,"creation_date":1656508298,"post_id":72801204,"comment_id":128589860,"body_markdown":"Your identifier i can&#39;t rewrite for you as it depends how it looks in the DOM","body":"Your identifier i can&#39;t rewrite for you as it depends how it looks in the DOM"},{"owner":{"account_id":25531653,"reputation":17,"user_id":19319560,"display_name":"DGStar"},"score":1,"creation_date":1656510769,"post_id":72801204,"comment_id":128590925,"body_markdown":"@RichEdwards it works now add it as an answer so I can accept it","body":"@RichEdwards it works now add it as an answer so I can accept it"}],"answers":[{"tags":[],"owner":{"account_id":18966922,"reputation":3563,"user_id":13841248,"display_name":"RichEdwards"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1656511250,"creation_date":1656511250,"answer_id":72802700,"question_id":72801204,"body_markdown":"The solution discussed in the comments was to add a wait.\r\n\r\nAdd this once when you create the driver object:\r\n\r\n```\r\ndriver.manage().timeouts().implicitlyWait(10,TimeUnit.SECONDS) \r\n```","title":"I&#39;m trying to Check if a certain WebElement is present through chrome drive in java after checking the page is loaded, but it&#39;s not working","body":"<p>The solution discussed in the comments was to add a wait.</p>\n<p>Add this once when you create the driver object:</p>\n<pre><code>driver.manage().timeouts().implicitlyWait(10,TimeUnit.SECONDS) \n</code></pre>\n"}],"owner":{"account_id":25531653,"reputation":17,"user_id":19319560,"display_name":"DGStar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72802700,"answer_count":1,"score":0,"last_activity_date":1656511250,"creation_date":1656504589,"question_id":72801204,"body_markdown":"I&#39;m trying to Check if a certain WebElement is present through chrome drive in java after checking the page is loaded.\r\neven though the page is loaded and the element is present the driver can&#39;t locate it and I get a \r\nNoSuchElementException.\r\nif I&#39;ll let it run more time it would probably make it but that&#39;s not possible with logic of my code because I&#39;m checking if this element is present while the page is loaded to see if something is clickable (when I over it looks clickable but when I click it nothing happen so something like &quot;isClickable&quot; {if that&#39;s a thing} probably won&#39;t work) and gets me to the right place.\r\n \r\npart of my code: \r\n\r\n    while (true) {\r\n                        JavascriptExecutor js = (JavascriptExecutor) driver;\r\n                        if (js.executeScript(&quot;return document.readyState&quot;).toString().equals(&quot;complete&quot;)) {\r\n                            try {\r\n                                if (driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div[4]/div/div/div/div/div[1]/div&quot;)).isEnabled()) {\r\n                                    inProfilePictureTab = true;\r\n                                    toBreak = true;\r\n                                    break;\r\n                                }\r\n                            } catch (NoSuchElementException exception) {\r\n                                warningLabelChanger(&quot;Profile picture isn&#39;t clickable, try something else&quot;);\r\n                                toBreak = true;\r\n                                break;\r\n\r\n\r\n                            } catch (NullPointerException exception2) {\r\n\r\n                            }\r\n                        }\r\n                        try {\r\n                            Thread.sleep(Constants.SLEEP_TIME);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n\r\nHow can I fix that?\r\n","title":"I&#39;m trying to Check if a certain WebElement is present through chrome drive in java after checking the page is loaded, but it&#39;s not working","body":"<p>I'm trying to Check if a certain WebElement is present through chrome drive in java after checking the page is loaded.\neven though the page is loaded and the element is present the driver can't locate it and I get a\nNoSuchElementException.\nif I'll let it run more time it would probably make it but that's not possible with logic of my code because I'm checking if this element is present while the page is loaded to see if something is clickable (when I over it looks clickable but when I click it nothing happen so something like &quot;isClickable&quot; {if that's a thing} probably won't work) and gets me to the right place.</p>\n<p>part of my code:</p>\n<pre><code>while (true) {\n                    JavascriptExecutor js = (JavascriptExecutor) driver;\n                    if (js.executeScript(&quot;return document.readyState&quot;).toString().equals(&quot;complete&quot;)) {\n                        try {\n                            if (driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div[4]/div/div/div/div/div[1]/div&quot;)).isEnabled()) {\n                                inProfilePictureTab = true;\n                                toBreak = true;\n                                break;\n                            }\n                        } catch (NoSuchElementException exception) {\n                            warningLabelChanger(&quot;Profile picture isn't clickable, try something else&quot;);\n                            toBreak = true;\n                            break;\n\n\n                        } catch (NullPointerException exception2) {\n\n                        }\n                    }\n                    try {\n                        Thread.sleep(Constants.SLEEP_TIME);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n</code></pre>\n<p>How can I fix that?</p>\n"},{"tags":["java","spring-boot","spring-integration","spring-integration-dsl","spring-integration-http"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656510730,"creation_date":1656510730,"answer_id":72802593,"question_id":72801777,"body_markdown":"Add a custom release strategy to the gatherer.\r\n\r\n```java\r\n/**\r\n * Strategy for determining when a group of messages reaches a state of\r\n * completion (i.e. can trip a barrier).\r\n */\r\n@FunctionalInterface\r\npublic interface ReleaseStrategy {\r\n\r\n\tboolean canRelease(MessageGroup group);\r\n\r\n}\r\n```\r\n\r\n```\r\ngatherer -&gt; gatherer.releaseLockBeforeSend(true)\r\n                .releaseStrategy(msgGrp -&gt; theOnesIWantHaveArrived(msgGrp))\r\n                .discardChannel(&quot;nullChannel&quot;));\r\n```\r\n\r\nIt would be best to have the DB flow not return a reply, then you won&#39;t need the discard channel or any custom code.\r\n\r\nThen, you could just use\r\n\r\n```\r\ngatherer -&gt; gatherer.releaseLockBeforeSend(true)\r\n                .releaseStrategy(&quot;size() == 2&quot;));\r\n```\r\n","title":"How to make gatherer to receive only some specific flow&#39;s response, instead of waiting for all the flows and then gather the response in S Integration","body":"<p>Add a custom release strategy to the gatherer.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Strategy for determining when a group of messages reaches a state of\n * completion (i.e. can trip a barrier).\n */\n@FunctionalInterface\npublic interface ReleaseStrategy {\n\n    boolean canRelease(MessageGroup group);\n\n}\n</code></pre>\n<pre><code>gatherer -&gt; gatherer.releaseLockBeforeSend(true)\n                .releaseStrategy(msgGrp -&gt; theOnesIWantHaveArrived(msgGrp))\n                .discardChannel(&quot;nullChannel&quot;));\n</code></pre>\n<p>It would be best to have the DB flow not return a reply, then you won't need the discard channel or any custom code.</p>\n<p>Then, you could just use</p>\n<pre><code>gatherer -&gt; gatherer.releaseLockBeforeSend(true)\n                .releaseStrategy(&quot;size() == 2&quot;));\n</code></pre>\n"}],"owner":{"account_id":25593085,"reputation":95,"user_id":19369457,"display_name":"Somnath Mukherjee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656510730,"creation_date":1656507253,"question_id":72801777,"body_markdown":"Here I&#39;m using Scatter-gather pattern and calling 3 sub-flows parallelly. One of the flow (DBFlow) is taking lot&#39;s of time so gatherer is waiting for so long. I want the DB flow to happen but as that is a independent task so I don&#39;t want response back from DB Flow . \r\nI want only the other two flow&#39;s response and gather them. How to achieve that ?\r\n\r\n  \r\n\r\n \r\n\r\n \r\n\r\n//Configuration class\r\n        \r\n            \r\n           @Configuration\r\n        public class IntegrationConfiguration {\r\n          @Autowired LoansServiceImpl loansService;\r\n        \r\n          long dbId = new SequenceGenerator().nextId();\r\n          //   Main flow\r\n          @Bean\r\n          public IntegrationFlow flow() {\r\n            return flow -&gt;\r\n                flow.split()\r\n                    .log()\r\n                    .channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\r\n                    .convert(LoanProvisionRequest.class)\r\n                    .scatterGather(\r\n                        scatterer -&gt;\r\n                            scatterer\r\n                                .applySequence(true)\r\n                                .recipientFlow(flow1())\r\n                                .recipientFlow(flow2())\r\n                                .recipientFlow(flow3()),\r\n                        gatherer -&gt; gatherer.releaseLockBeforeSend(true))\r\n                    .log()\r\n                    .aggregate(a -&gt; a.outputProcessor(MessageGroup::getMessages))\r\n                    .channel(&quot;output-flow&quot;);\r\n          }\r\n          //   flow1\r\n          @Bean\r\n          public IntegrationFlow flow1() {\r\n            return integrationFlowDefination -&gt;\r\n                integrationFlowDefination\r\n                    .channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\r\n                    .handle(\r\n                        message -&gt; {\r\n                          try {\r\n                            lionService.saveLionRequest(\r\n                                (LionRequest) message.getPayload(), String.valueOf(dbId));\r\n                          } catch (JsonProcessingException e) {\r\n                            throw new RuntimeException(e);\r\n                          }\r\n                        });\r\n          }\r\n        \r\n          //   flow2\r\n          @Bean\r\n          public IntegrationFlow flow2() {\r\n            return integrationFlowDefination -&gt;\r\n                integrationFlowDefination\r\n                    .channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\r\n                    .handle(\r\n                        message -&gt;\r\n                            lionService.getData(\r\n                                (LionRequest) message.getPayload(), SourceSystem.PROVISION))\r\n                    .log();\r\n          }\r\n        \r\n          //  flow3\r\n          @Bean\r\n          public IntegrationFlow flow3() {\r\n            return integrationFlowDefination -&gt;\r\n                integrationFlowDefination\r\n                    .channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\r\n                    .handle(\r\n                        message -&gt;\r\n                            lionService.prepareCDRequest(\r\n                                (LionRequest) message));\r\n          }\r\n        \r\n          @Bean\r\n          public MessageChannel replyChannel() {\r\n            return MessageChannels.executor(&quot;output-flow&quot;, outputExecutor()).get();\r\n          }\r\n        \r\n          @Bean\r\n          public ThreadPoolTaskExecutor outputExecutor() {\r\n            ThreadPoolTaskExecutor pool = new ThreadPoolTaskExecutor();\r\n            pool.setCorePoolSize(4);\r\n            pool.setMaxPoolSize(4);\r\n            return pool;\r\n          }\r\n        }\r\n\r\n //Gateway service\r\n\r\n \r\n\r\n    @MessagingGateway\r\n    public interface LionGateway {\r\n    \r\n      @Gateway(requestChannel = &quot;flow.input&quot;, replyChannel = &quot;output-flow&quot;)\r\n      List&lt;?&gt; echo(LionRequest lionRequest);\r\n    }\r\n\r\n \r\n\r\n //Controller\r\n\r\n      @Autowired private LionGateway lionGateway;\r\n    \r\n     @PostMapping(value = &quot;/invoke-integration&quot;)\r\n      public String invokeIntegrationFlow(@RequestBody LionRequest lionRequest) {\r\n        String response = lionGateway.echo(lionRequest).toString();\r\n        return response;\r\n      }\r\n\r\n","title":"How to make gatherer to receive only some specific flow&#39;s response, instead of waiting for all the flows and then gather the response in S Integration","body":"<p>Here I'm using Scatter-gather pattern and calling 3 sub-flows parallelly. One of the flow (DBFlow) is taking lot's of time so gatherer is waiting for so long. I want the DB flow to happen but as that is a independent task so I don't want response back from DB Flow .\nI want only the other two flow's response and gather them. How to achieve that ?</p>\n<p>//Configuration class</p>\n<pre><code>       @Configuration\n    public class IntegrationConfiguration {\n      @Autowired LoansServiceImpl loansService;\n    \n      long dbId = new SequenceGenerator().nextId();\n      //   Main flow\n      @Bean\n      public IntegrationFlow flow() {\n        return flow -&gt;\n            flow.split()\n                .log()\n                .channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\n                .convert(LoanProvisionRequest.class)\n                .scatterGather(\n                    scatterer -&gt;\n                        scatterer\n                            .applySequence(true)\n                            .recipientFlow(flow1())\n                            .recipientFlow(flow2())\n                            .recipientFlow(flow3()),\n                    gatherer -&gt; gatherer.releaseLockBeforeSend(true))\n                .log()\n                .aggregate(a -&gt; a.outputProcessor(MessageGroup::getMessages))\n                .channel(&quot;output-flow&quot;);\n      }\n      //   flow1\n      @Bean\n      public IntegrationFlow flow1() {\n        return integrationFlowDefination -&gt;\n            integrationFlowDefination\n                .channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\n                .handle(\n                    message -&gt; {\n                      try {\n                        lionService.saveLionRequest(\n                            (LionRequest) message.getPayload(), String.valueOf(dbId));\n                      } catch (JsonProcessingException e) {\n                        throw new RuntimeException(e);\n                      }\n                    });\n      }\n    \n      //   flow2\n      @Bean\n      public IntegrationFlow flow2() {\n        return integrationFlowDefination -&gt;\n            integrationFlowDefination\n                .channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\n                .handle(\n                    message -&gt;\n                        lionService.getData(\n                            (LionRequest) message.getPayload(), SourceSystem.PROVISION))\n                .log();\n      }\n    \n      //  flow3\n      @Bean\n      public IntegrationFlow flow3() {\n        return integrationFlowDefination -&gt;\n            integrationFlowDefination\n                .channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\n                .handle(\n                    message -&gt;\n                        lionService.prepareCDRequest(\n                            (LionRequest) message));\n      }\n    \n      @Bean\n      public MessageChannel replyChannel() {\n        return MessageChannels.executor(&quot;output-flow&quot;, outputExecutor()).get();\n      }\n    \n      @Bean\n      public ThreadPoolTaskExecutor outputExecutor() {\n        ThreadPoolTaskExecutor pool = new ThreadPoolTaskExecutor();\n        pool.setCorePoolSize(4);\n        pool.setMaxPoolSize(4);\n        return pool;\n      }\n    }\n</code></pre>\n<p>//Gateway service</p>\n<pre><code>@MessagingGateway\npublic interface LionGateway {\n\n  @Gateway(requestChannel = &quot;flow.input&quot;, replyChannel = &quot;output-flow&quot;)\n  List&lt;?&gt; echo(LionRequest lionRequest);\n}\n</code></pre>\n<p>//Controller</p>\n<pre><code>  @Autowired private LionGateway lionGateway;\n\n @PostMapping(value = &quot;/invoke-integration&quot;)\n  public String invokeIntegrationFlow(@RequestBody LionRequest lionRequest) {\n    String response = lionGateway.echo(lionRequest).toString();\n    return response;\n  }\n</code></pre>\n"},{"tags":["java","java-17"],"comments":[{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":6,"creation_date":1656343590,"post_id":72774607,"comment_id":128542990,"body_markdown":"64K? https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.7.31","body":"64K? <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.7.31\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jvms/se17/html/&hellip;</a>"},{"owner":{"account_id":4910286,"reputation":458,"user_id":3955765,"display_name":"twwwt"},"score":0,"creation_date":1656344844,"post_id":72774607,"comment_id":128543445,"body_markdown":"@akarnokd I agree, 64k seems to be the technical limit. Thanks for the pointer to the doc.","body":"@akarnokd I agree, 64k seems to be the technical limit. Thanks for the pointer to the doc."},{"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"score":4,"creation_date":1656356552,"post_id":72774607,"comment_id":128547536,"body_markdown":"@akarnokd Don&#39;t forget every `Constant_Class_info` also requires an associated `Constant_Utf8_info`, so really 32K.  But really, less.","body":"@akarnokd Don&#39;t forget every <code>Constant_Class_info</code> also requires an associated <code>Constant_Utf8_info</code>, so really 32K.  But really, less."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1656348717,"creation_date":1656348717,"answer_id":72775712,"question_id":72774607,"body_markdown":"The JLS (Java Language Spec) generally includes no limits at all. Even though there are lots of limits. It&#39;s the JVMS (Java Virtual Machine Specification) that includes limits. This makes sense: A lot of these limits are fundamentally related to bytecode and class file format concepts, which are ideas that the JLS doesn&#39;t know about - in other words, even if the JLS wanted to, it couldn&#39;t possibly describe the limits in terms that are defined in the JLS.\r\n\r\nFor example, the max size of a method is &#39;measured&#39; in bytecode instructions, which isn&#39;t a java-the-language concept in the first place.\r\n\r\nHence, the JVMS is where to look for such limits. For example [JVM Spec &#167;4.7.31](https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.7.31) (as provided by @akarnokd, good find!).\r\n\r\nThere are limits on:\r\n\r\n* Number of methods in a type\r\n* Number of fields in a type\r\n* Number of interfaces in your `implements` list\r\n* Number of parameters a method can have\r\n* Size of a method&#39;s &quot;frame&quot; (how much stack space it needs)\r\n* Size of the number of local slots. These last 2 bullets more or less translate in java-the-language to a limit on number of local vars you can have.\r\n* Number of bytecode per method. Easiest way to run into this limit is by having a large `finally` block attached to a try with loads of `catch` blocks. The finally block is replicated for all of them. Nest try blocks for exponential bytecode growth!\r\n* Number of type params you can have in signatures.\r\n* Number of entries in the constant pool. This would appear in java-the-language as limits on the number of literals you can include in a single class.\r\n\r\nI&#39;m sure I&#39;m forgetting a few.\r\n\r\n\r\nThere are further limits that are in no spec; such as memory and heap size limits, and a lot of details about command line switches (for example, on a bunch of JVM releases and OSes, any `-Xss` parameter (that sets stack sizes) that isn&#39;t evenly divisible by a &#39;word boundary&#39;, whose definition depends on OS and architecture, was completely ignored) - all unspecced.\r\n\r\nSome of that makes sense (the exact specifics on precisely how much heap you really can reserve depends on too many factors to attempt to document in detail), some of it really doesn&#39;t (the fact that the tool switches act like they are highly specced, having 2 layers of &#39;less specced&#39; in both `-X` and `-XX` doesn&#39;t really mesh well with the idea that neither the JVMS nor the JLS mentions the tools available or their command line switches in much detail.\r\n","title":"How many subclasses can be declared for a sealed class?","body":"<p>The JLS (Java Language Spec) generally includes no limits at all. Even though there are lots of limits. It's the JVMS (Java Virtual Machine Specification) that includes limits. This makes sense: A lot of these limits are fundamentally related to bytecode and class file format concepts, which are ideas that the JLS doesn't know about - in other words, even if the JLS wanted to, it couldn't possibly describe the limits in terms that are defined in the JLS.</p>\n<p>For example, the max size of a method is 'measured' in bytecode instructions, which isn't a java-the-language concept in the first place.</p>\n<p>Hence, the JVMS is where to look for such limits. For example <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.7.31\" rel=\"noreferrer\">JVM Spec 4.7.31</a> (as provided by @akarnokd, good find!).</p>\n<p>There are limits on:</p>\n<ul>\n<li>Number of methods in a type</li>\n<li>Number of fields in a type</li>\n<li>Number of interfaces in your <code>implements</code> list</li>\n<li>Number of parameters a method can have</li>\n<li>Size of a method's &quot;frame&quot; (how much stack space it needs)</li>\n<li>Size of the number of local slots. These last 2 bullets more or less translate in java-the-language to a limit on number of local vars you can have.</li>\n<li>Number of bytecode per method. Easiest way to run into this limit is by having a large <code>finally</code> block attached to a try with loads of <code>catch</code> blocks. The finally block is replicated for all of them. Nest try blocks for exponential bytecode growth!</li>\n<li>Number of type params you can have in signatures.</li>\n<li>Number of entries in the constant pool. This would appear in java-the-language as limits on the number of literals you can include in a single class.</li>\n</ul>\n<p>I'm sure I'm forgetting a few.</p>\n<p>There are further limits that are in no spec; such as memory and heap size limits, and a lot of details about command line switches (for example, on a bunch of JVM releases and OSes, any <code>-Xss</code> parameter (that sets stack sizes) that isn't evenly divisible by a 'word boundary', whose definition depends on OS and architecture, was completely ignored) - all unspecced.</p>\n<p>Some of that makes sense (the exact specifics on precisely how much heap you really can reserve depends on too many factors to attempt to document in detail), some of it really doesn't (the fact that the tool switches act like they are highly specced, having 2 layers of 'less specced' in both <code>-X</code> and <code>-XX</code> doesn't really mesh well with the idea that neither the JVMS nor the JLS mentions the tools available or their command line switches in much detail.</p>\n"},{"tags":[],"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1656356519,"creation_date":1656356519,"answer_id":72777160,"question_id":72774607,"body_markdown":"The answer [here](https://stackoverflow.com/a/72775712/3553087) is correct, but I&#39;ll add that even in JVMS 4.7.31 (the `PermittedSubtypes` attribute), you won&#39;t find a specific limit.  But since every permitted subtype must correspond to a `Constant_Class_info` in the constant pool, and the constant pool is limited to 64K entries, and each `Class` constant has an associate `String` constant, so you could not get more than 32K in any case.  Of course, you probably have other things in your class too, which compete for the constant pool, so you won&#39;t get that either.  But the answer is, effectively &quot;thousands&quot;.  ","title":"How many subclasses can be declared for a sealed class?","body":"<p>The answer <a href=\"https://stackoverflow.com/a/72775712/3553087\">here</a> is correct, but I'll add that even in JVMS 4.7.31 (the <code>PermittedSubtypes</code> attribute), you won't find a specific limit.  But since every permitted subtype must correspond to a <code>Constant_Class_info</code> in the constant pool, and the constant pool is limited to 64K entries, and each <code>Class</code> constant has an associate <code>String</code> constant, so you could not get more than 32K in any case.  Of course, you probably have other things in your class too, which compete for the constant pool, so you won't get that either.  But the answer is, effectively &quot;thousands&quot;.</p>\n"}],"owner":{"account_id":4910286,"reputation":458,"user_id":3955765,"display_name":"twwwt"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1400,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1656510653,"creation_date":1656343443,"question_id":72774607,"body_markdown":"What is the maximum number of sub classes that can be listed for a sealed class (analogous for interfaces):\r\n```java\r\npublic sealed class Foo permits A, B, C {\r\n   // How many sub classes can  ^^^^^^^\r\n   // be listed here?\r\n}\r\n```\r\nDoes the *language* actually define a limit; i.e., is it virtually infinite at the level of the language?\r\n\r\nIf there is no such limit at the level of the language, it seems that an *implementation* still must have a technical limit. Somewhere there ought to be a list that stores some kind of representation of the sub classes permitted. I would expect a 16 or 32 bit integer to be used then.","title":"How many subclasses can be declared for a sealed class?","body":"<p>What is the maximum number of sub classes that can be listed for a sealed class (analogous for interfaces):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public sealed class Foo permits A, B, C {\n   // How many sub classes can  ^^^^^^^\n   // be listed here?\n}\n</code></pre>\n<p>Does the <em>language</em> actually define a limit; i.e., is it virtually infinite at the level of the language?</p>\n<p>If there is no such limit at the level of the language, it seems that an <em>implementation</em> still must have a technical limit. Somewhere there ought to be a list that stores some kind of representation of the sub classes permitted. I would expect a 16 or 32 bit integer to be used then.</p>\n"},{"tags":["java","string","class","field"],"comments":[{"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"score":2,"creation_date":1656509704,"post_id":72802282,"comment_id":128590461,"body_markdown":"Does this answer your question? [How to format strings in Java](https://stackoverflow.com/questions/6431933/how-to-format-strings-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/6431933/how-to-format-strings-in-java\">How to format strings in Java</a>"},{"owner":{"account_id":3521980,"reputation":481,"user_id":2944012,"accept_rate":57,"display_name":"RamanaMuttana"},"score":0,"creation_date":1656509988,"post_id":72802282,"comment_id":128590578,"body_markdown":"ClassA ft = new ClassA();\n\t\tClass ftClass = ft.getClass();\n\n\t\tField[] fields = ftClass.getDeclaredFields();\n\t\tfor (int i = 0; i &lt; fields.length; i++) {\n\t\t\tSystem.out.println(&quot;the field&quot;+fields[i] +&quot; belong to class A.&quot;)\n\t\t}http://www.avajava.com/tutorials/lessons/how-do-i-list-the-declared-fields-of-a-class.html#:~:text=In%20JavaSW%2C%20it&#39;s,%2C%20protected%2C%20and%20private%20fields.","body":"ClassA ft = new ClassA(); \t\tClass ftClass = ft.getClass();  \t\tField[] fields = ftClass.getDeclaredFields(); \t\tfor (int i = 0; i &lt; fields.length; i++) { \t\t\tSystem.out.println(&quot;the field&quot;+fields[i] +&quot; belong to class A.&quot;) \t\t}<a href=\"http://www.avajava.com/tutorials/lessons/how-do-i-list-the-declared-fields-of-a-class.html#:~:text=In%20JavaSW%2C%20it&#39;s,%2C%20protected%2C%20and%20private%20fields\" rel=\"nofollow noreferrer\">avajava.com/tutorials/lessons/&hellip;</a>."}],"answers":[{"tags":[],"owner":{"account_id":19306794,"reputation":85,"user_id":14113432,"display_name":"Harshita"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1656510575,"creation_date":1656510575,"answer_id":72802556,"question_id":72802282,"body_markdown":"This can be done by use of reflection in Java.\r\nhttps://www.oracle.com/technical-resources/articles/java/javareflection.html#:~:text=Reflection%20is%20a%20feature%20in,its%20members%20and%20display%20them.","title":"How can I pass field name of a class as parameter to include it in a String?","body":"<p>This can be done by use of reflection in Java.\n<a href=\"https://www.oracle.com/technical-resources/articles/java/javareflection.html#:%7E:text=Reflection%20is%20a%20feature%20in,its%20members%20and%20display%20them\" rel=\"nofollow noreferrer\">https://www.oracle.com/technical-resources/articles/java/javareflection.html#:~:text=Reflection%20is%20a%20feature%20in,its%20members%20and%20display%20them</a>.</p>\n"}],"owner":{"account_id":15543306,"reputation":13,"user_id":11213369,"display_name":"Yacine Tazdait"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":481,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72802556,"answer_count":1,"score":0,"last_activity_date":1656510575,"creation_date":1656509434,"question_id":72802282,"body_markdown":"I&#39;m wondering How can I pass field name of a class as parameter to include it in a String? \r\n\r\nFor example, let&#39;s say I have a class A with this members :\r\n\r\n    public class A {\r\n\r\n    String name;\r\n    String reference;\r\n    ....\r\n\r\n    }\r\n\r\nWhat I want, is to be able to initialize a string having as parameters \r\none of the two classe field name to display it dynamically. So for instance, I want to do this :\r\n\r\n    System.out.println(&quot;the field {nameField} belong to class A.&quot;);\r\n\r\nAnd in output I would have this :\r\n\r\n    output : the field name belong to class A.\r\n\r\nIs that possible in Java ?\r\n\r\nAny help would be much appreciated ?\r\n\r\nRegards\r\n\r\nYT\r\n\r\n ","title":"How can I pass field name of a class as parameter to include it in a String?","body":"<p>I'm wondering How can I pass field name of a class as parameter to include it in a String?</p>\n<p>For example, let's say I have a class A with this members :</p>\n<pre><code>public class A {\n\nString name;\nString reference;\n....\n\n}\n</code></pre>\n<p>What I want, is to be able to initialize a string having as parameters\none of the two classe field name to display it dynamically. So for instance, I want to do this :</p>\n<pre><code>System.out.println(&quot;the field {nameField} belong to class A.&quot;);\n</code></pre>\n<p>And in output I would have this :</p>\n<pre><code>output : the field name belong to class A.\n</code></pre>\n<p>Is that possible in Java ?</p>\n<p>Any help would be much appreciated ?</p>\n<p>Regards</p>\n<p>YT</p>\n"},{"tags":["java","azure","azure-functions","azureservicebus"],"answers":[{"tags":[],"owner":{"account_id":16361166,"reputation":13389,"user_id":11816733,"display_name":"Cindy Pau"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605609313,"creation_date":1605609313,"answer_id":64873555,"question_id":64861026,"body_markdown":"The key to the problem is that the Java-based azure sdk package of offcial didn&#39;t not write the MessageReceiver class. (As far as I know, the official only implements the IMessageReceiver interface of C#) If it is C#, you can use it directly:\r\n\r\nhttps://learn.microsoft.com/en-us/dotnet/api/microsoft.azure.servicebus.core.messagereceiver?view=azure-dotnet\r\n\r\nBut for java, The official has not yet implemented this, only a interface:\r\n\r\nhttps://learn.microsoft.com/en-us/java/api/com.microsoft.azure.servicebus.imessagereceiver?view=azure-java-stable\r\n\r\n&gt; I see a bunch of methods in queue client called deadletter, but they\r\n&gt; take a UUID as a parameter (I am not sure what that is), and not a\r\n&gt; message String.\r\n\r\nI know this, but it is not based on messages, if you create an object of queueclient and use the method, it will tells you no receiver:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIn summary, I think this is an unfinished feature, and maybe it can be updated in a future sdk version. But not now, unless you read the underlying code and implement the IMessageReceiver interface yourself, otherwise it will be impossible.\r\n\r\n  [1]: https://i.stack.imgur.com/sB9LE.png","title":"How can I send a message directly into a dead letter queue in azure service bus (java)?","body":"<p>The key to the problem is that the Java-based azure sdk package of offcial didn't not write the MessageReceiver class. (As far as I know, the official only implements the IMessageReceiver interface of C#) If it is C#, you can use it directly:</p>\n<p><a href=\"https://learn.microsoft.com/en-us/dotnet/api/microsoft.azure.servicebus.core.messagereceiver?view=azure-dotnet\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/dotnet/api/microsoft.azure.servicebus.core.messagereceiver?view=azure-dotnet</a></p>\n<p>But for java, The official has not yet implemented this, only a interface:</p>\n<p><a href=\"https://learn.microsoft.com/en-us/java/api/com.microsoft.azure.servicebus.imessagereceiver?view=azure-java-stable\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/java/api/com.microsoft.azure.servicebus.imessagereceiver?view=azure-java-stable</a></p>\n<blockquote>\n<p>I see a bunch of methods in queue client called deadletter, but they\ntake a UUID as a parameter (I am not sure what that is), and not a\nmessage String.</p>\n</blockquote>\n<p>I know this, but it is not based on messages, if you create an object of queueclient and use the method, it will tells you no receiver:</p>\n<p><a href=\"https://i.stack.imgur.com/sB9LE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sB9LE.png\" alt=\"enter image description here\" /></a></p>\n<p>In summary, I think this is an unfinished feature, and maybe it can be updated in a future sdk version. But not now, unless you read the underlying code and implement the IMessageReceiver interface yourself, otherwise it will be impossible.</p>\n"},{"tags":[],"owner":{"account_id":1488695,"reputation":672,"user_id":1396346,"accept_rate":89,"display_name":"ielkhalloufi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656510325,"creation_date":1656510325,"answer_id":72802485,"question_id":64861026,"body_markdown":"I encountered the same issue, the [github issue][1] is still open. \r\n\r\n\r\n  [1]: https://github.com/Azure/azure-functions-java-worker/issues/407","title":"How can I send a message directly into a dead letter queue in azure service bus (java)?","body":"<p>I encountered the same issue, the <a href=\"https://github.com/Azure/azure-functions-java-worker/issues/407\" rel=\"nofollow noreferrer\">github issue</a> is still open.</p>\n"}],"owner":{"account_id":2095740,"reputation":429,"user_id":1864552,"accept_rate":57,"display_name":"JS noob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1212,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1656510325,"creation_date":1605541245,"question_id":64861026,"body_markdown":"I have a servicebusqueuetrigger function that takes a string off the service bus and calls another api, if that api call does not return a 200, I want to move that string as a meesage into a dead letter queue.  How can I do this?\r\n\r\nSo far I have this...\r\n\r\n```\r\npublic class myEventsConsumerFunction {\r\n\r\n    @FunctionName(&quot;myEventTrigger&quot;)\r\n    public void myEventTrigger(\r\n            @ServiceBusQueueTrigger(name = &quot;message&quot;, queueName = &quot;%QUEUE_NAME%&quot;, connection = &quot;ServiceBusConnection&quot;) String message,\r\n            final ExecutionContext context) throws MSPException {\r\n            int responseCode = callApi(message);\r\n                    if(responseCode!=200){\r\n            String ConnectionString = &quot;connectionstring&quot;\r\n            QueueClient sendClient = new QueueClient(new ConnectionStringBuilder(ConnectionString, queueName), ReceiveMode.PEEKLOCK);\r\n            //\r\n            //how do i send my String message to dead letter queue here?\r\n            //\r\n\r\n\r\n        }\r\n```\r\n\r\nI see a bunch of methods in queue client called deadletter, but they take a UUID as a parameter (I am not sure what that is), and not a message String.  ","title":"How can I send a message directly into a dead letter queue in azure service bus (java)?","body":"<p>I have a servicebusqueuetrigger function that takes a string off the service bus and calls another api, if that api call does not return a 200, I want to move that string as a meesage into a dead letter queue.  How can I do this?</p>\n<p>So far I have this...</p>\n<pre><code>public class myEventsConsumerFunction {\n\n    @FunctionName(&quot;myEventTrigger&quot;)\n    public void myEventTrigger(\n            @ServiceBusQueueTrigger(name = &quot;message&quot;, queueName = &quot;%QUEUE_NAME%&quot;, connection = &quot;ServiceBusConnection&quot;) String message,\n            final ExecutionContext context) throws MSPException {\n            int responseCode = callApi(message);\n                    if(responseCode!=200){\n            String ConnectionString = &quot;connectionstring&quot;\n            QueueClient sendClient = new QueueClient(new ConnectionStringBuilder(ConnectionString, queueName), ReceiveMode.PEEKLOCK);\n            //\n            //how do i send my String message to dead letter queue here?\n            //\n\n\n        }\n</code></pre>\n<p>I see a bunch of methods in queue client called deadletter, but they take a UUID as a parameter (I am not sure what that is), and not a message String.</p>\n"},{"tags":["java","spring","spring-boot","h2","jdbctemplate"],"comments":[{"owner":{"account_id":1800179,"reputation":3396,"user_id":1638718,"display_name":"ooozguuur"},"score":0,"creation_date":1655983339,"post_id":72729210,"comment_id":128464031,"body_markdown":"Can you share your application.yml file.  You make sure add this attrubute: spring.datasource.driverClassName=org.h2.Driver","body":"Can you share your application.yml file.  You make sure add this attrubute: spring.datasource.driverClassName=org.h2.Driver"},{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1655983458,"post_id":72729210,"comment_id":128464070,"body_markdown":"Problem is that you have 3 different datasource and Spring doesn&#39;t know which one to choose from. Spring has been more strict on those checks in later version than it was earlier. You need to remove the unnecessary ones so that there is only one or add a `@Qualifier` to explicitly tell spring which one to use. You have 3 now: `snowflakeDataSource, snowflakeAskDataSource, transactionDataSource`","body":"Problem is that you have 3 different datasource and Spring doesn&#39;t know which one to choose from. Spring has been more strict on those checks in later version than it was earlier. You need to remove the unnecessary ones so that there is only one or add a <code>@Qualifier</code> to explicitly tell spring which one to use. You have 3 now: <code>snowflakeDataSource, snowflakeAskDataSource, transactionDataSource</code>"},{"owner":{"account_id":15585153,"reputation":1806,"user_id":11243901,"display_name":"Arun Sai Mustyala"},"score":0,"creation_date":1655984285,"post_id":72729210,"comment_id":128464345,"body_markdown":"can you add snowflakeDataSource,snowflakeAskDataSource,transactionDataSource bean configs code?","body":"can you add snowflakeDataSource,snowflakeAskDataSource,transactionDataSo&zwnj;&#8203;urce bean configs code?"},{"owner":{"account_id":3016931,"reputation":191,"user_id":2558819,"accept_rate":60,"display_name":"Saurabh Gadariya"},"score":0,"creation_date":1656333553,"post_id":72729210,"comment_id":128538694,"body_markdown":"@ArunSai Added bean configs code.","body":"@ArunSai Added bean configs code."},{"owner":{"account_id":15585153,"reputation":1806,"user_id":11243901,"display_name":"Arun Sai Mustyala"},"score":0,"creation_date":1656335230,"post_id":72729210,"comment_id":128539373,"body_markdown":"@Saurabh Gadariya Can you add H2ConsoleAutoConfiguration.java class","body":"@Saurabh Gadariya Can you add H2ConsoleAutoConfiguration.java class"}],"answers":[{"tags":[],"owner":{"account_id":1093641,"reputation":4759,"user_id":1087718,"accept_rate":84,"display_name":"czupe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655983610,"creation_date":1655983610,"answer_id":72729358,"question_id":72729210,"body_markdown":"It seems like you have no unique bean, you have actually 3 beans that could be injected there, those beans are:\r\n\r\n```\r\nsnowflakeDataSource,snowflakeAskDataSource,transactionDataSource\r\n```\r\n\r\nand your h2Console cannot choose the datasource. As I understand.\r\n\r\nYou could add names to your beans:\r\n```\r\n@Component(&quot;myBean&quot;)\r\n```\r\n\r\nAnd then you can use this with Qualifier annotation later.\r\n\r\nOr exclude them, but I think none of those datasources are good probably...\r\n\r\nWould be good to check your property file, you shall have something similar to this there:\r\n```\r\nspring:\r\n  datasource:\r\n    url: jdbc:h2:mem:mydb\r\n    username: sa\r\n    password: password\r\n    driverClassName: org.h2.Driver\r\n```\r\n","title":"Spring boot upgrade from 2.1.3.RELEASE to 2.5.12: &quot;No qualifying bean of type &#39;javax.sql.DataSource&#39; available&quot; in JUnit run","body":"<p>It seems like you have no unique bean, you have actually 3 beans that could be injected there, those beans are:</p>\n<pre><code>snowflakeDataSource,snowflakeAskDataSource,transactionDataSource\n</code></pre>\n<p>and your h2Console cannot choose the datasource. As I understand.</p>\n<p>You could add names to your beans:</p>\n<pre><code>@Component(&quot;myBean&quot;)\n</code></pre>\n<p>And then you can use this with Qualifier annotation later.</p>\n<p>Or exclude them, but I think none of those datasources are good probably...</p>\n<p>Would be good to check your property file, you shall have something similar to this there:</p>\n<pre><code>spring:\n  datasource:\n    url: jdbc:h2:mem:mydb\n    username: sa\n    password: password\n    driverClassName: org.h2.Driver\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11643394,"reputation":1124,"user_id":8527109,"display_name":"L&#225;szl&#243; Stahorszki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656335207,"creation_date":1656335207,"answer_id":72772626,"question_id":72729210,"body_markdown":"There are two things I noticed:\r\n\r\n### 1) Above some datasources you have a comment saying `tags it as primary database`\r\n\r\nThis is a fine thing to do, but you don&#39;t actually tag those as primary. For that you need to use the `@Primary` annotation.\r\n\r\n### 2) You can&#39;t have multiple Primary datasources\r\n\r\nThere can be only one primary datasource, so tagging multiple of them as primary is wrong and will result in an error. You need to choose one datasource to tag as primary and coincidentally, that datasource is the one you&#39;ll be able to interact with from your H2 Console.","title":"Spring boot upgrade from 2.1.3.RELEASE to 2.5.12: &quot;No qualifying bean of type &#39;javax.sql.DataSource&#39; available&quot; in JUnit run","body":"<p>There are two things I noticed:</p>\n<h3>1) Above some datasources you have a comment saying <code>tags it as primary database</code></h3>\n<p>This is a fine thing to do, but you don't actually tag those as primary. For that you need to use the <code>@Primary</code> annotation.</p>\n<h3>2) You can't have multiple Primary datasources</h3>\n<p>There can be only one primary datasource, so tagging multiple of them as primary is wrong and will result in an error. You need to choose one datasource to tag as primary and coincidentally, that datasource is the one you'll be able to interact with from your H2 Console.</p>\n"},{"tags":[],"owner":{"account_id":3016931,"reputation":191,"user_id":2558819,"accept_rate":60,"display_name":"Saurabh Gadariya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1656509970,"creation_date":1656509970,"answer_id":72802414,"question_id":72729210,"body_markdown":"I finally able to run test-cases by switching off h2 console\r\n\r\n    spring.h2.console.enabled=false\r\n\r\n","title":"Spring boot upgrade from 2.1.3.RELEASE to 2.5.12: &quot;No qualifying bean of type &#39;javax.sql.DataSource&#39; available&quot; in JUnit run","body":"<p>I finally able to run test-cases by switching off h2 console</p>\n<pre><code>spring.h2.console.enabled=false\n</code></pre>\n"}],"owner":{"account_id":3016931,"reputation":191,"user_id":2558819,"accept_rate":60,"display_name":"Saurabh Gadariya"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3514,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72802414,"answer_count":3,"score":1,"last_activity_date":1656509970,"creation_date":1655982837,"question_id":72729210,"body_markdown":"I am getting the below exception when I tried to &quot;mvn package&quot; after upgrading the Spring boot version from 2.1.3.RELEASE to 2.5.12 in JUnit Run\r\n\r\n - Upgraded relevant dependency version as well:\r\n&lt;spring.cloud.version&gt;2.2.6.RELEASE&lt;/spring.cloud.version&gt;\r\n - removed junit-jupiter-api and log4j2\r\n - added spring-boot-starter-validation\r\n\r\nBelow is full stacktrace\r\n\r\n    java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    \r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)\r\n    \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\r\n    \tat org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)\r\n    \tat org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\r\n    \tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:350)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:355)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$7(ClassBasedTestDescriptor.java:350)\r\n    \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n    \tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\n    \tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\r\n    \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n    \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n    \tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)\r\n    \tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n    \tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n    \tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:349)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$4(ClassBasedTestDescriptor.java:270)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:269)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:259)\r\n    \tat java.base/java.util.Optional.orElseGet(Optional.java:369)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:258)\r\n    \tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:101)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:100)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:65)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:111)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:111)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:79)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n    \tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n    \tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n    \tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n    \tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;h2Console&#39; defined in class path resource [org/springframework/boot/autoconfigure/h2/H2ConsoleAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.servlet.ServletRegistrationBean]: Factory method &#39;h2Console&#39; threw exception; nested exception is org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type &#39;javax.sql.DataSource&#39; available: expected single matching bean but found 3: snowflakeDataSource,snowflakeAskDataSource,transactionDataSource\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:448)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:339)\r\n    \tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:136)\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\r\n    \t... 69 more\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.servlet.ServletRegistrationBean]: Factory method &#39;h2Console&#39; threw exception; nested exception is org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type &#39; &#39; available: expected single matching bean but found 3: snowflakeDataSource,snowflakeAskDataSource,transactionDataSource\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n    \t... 87 more\r\n    Caused by: org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type &#39;javax.sql.DataSource&#39; available: expected single matching bean but found 3: snowflakeDataSource,snowflakeAskDataSource,transactionDataSource\r\n    \tat org.springframework.beans.factory.config.DependencyDescriptor.resolveNotUnique(DependencyDescriptor.java:220)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1367)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfAvailable(DefaultListableBeanFactory.java:2030)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.ifAvailable(DefaultListableBeanFactory.java:2041)\r\n    \tat org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.h2Console(H2ConsoleAutoConfiguration.java:66)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n    \t... 88 more\r\n\r\n**TransactionalDataConfiguration:**\r\n\r\n    @Configuration\r\n    @Log4j2\r\n    public class TransactionDataConfiguration {\r\n    \r\n      private static final String POSTGRES_DATASOURCE_PREFIX = &quot;postgres.datasource&quot;;\r\n    \r\n      /**\r\n       * Configure Snowflake data source and tags it as primary database\r\n       *\r\n       * @return DBCP enabled data source\r\n       */\r\n      @ConfigurationProperties(prefix = POSTGRES_DATASOURCE_PREFIX)\r\n      @Bean\r\n      @Qualifier(&quot;transactionDataSource&quot;)\r\n      public DataSource transactionDataSource() {\r\n        log.debug(&quot;Creating transaction datasource&quot;);\r\n        return DataSourceBuilder.create().type(HikariDataSource.class).build();\r\n      }\r\n    \r\n      @Bean\r\n      @Qualifier(&quot;transactionNamedJdbcTemplate&quot;)\r\n      public NamedParameterJdbcTemplate transactionNamedJdbcTemplate(\r\n          @Qualifier(&quot;transactionDataSource&quot;) DataSource productDataSource) {\r\n        return new NamedParameterJdbcTemplate(productDataSource);\r\n      }\r\n    }\r\n\r\n**Snowflake Configuration:**\r\n\r\n    @Configuration\r\n    @Log4j2\r\n    public class SnowflakeConfiguration {\r\n    \r\n      @Value(&quot;${snowflake.datasource.usepassword:false}&quot;)\r\n      private boolean usePassword;\r\n    \r\n      /** Configure Snowflake data source and tags it as primary database */\r\n      @Bean(name = &quot;snowflakeDataSource&quot;)\r\n      public DataSource dataSource(Environment env) throws Exception {\r\n        var ds = new DriverManagerDataSource();\r\n        var connProp = loadSnowflakeConnectionCommonProperties(env);\r\n        connProp.put(&quot;warehouse&quot;, env.getProperty(&quot;snowflake.datasource.reportswarehouse&quot;));\r\n        ds.setDriverClassName(env.getProperty(&quot;snowflake.datasource.driver-class-name&quot;));\r\n        ds.setUrl(env.getProperty(&quot;snowflake.datasource.url&quot;));\r\n        ds.setConnectionProperties(connProp);\r\n        return ds;\r\n      }\r\n    \r\n      @Bean(name = &quot;snowflakeAskDataSource&quot;)\r\n      public DataSource askDataSource(Environment env) throws Exception {\r\n        var ds = new DriverManagerDataSource();\r\n        var connProp = loadSnowflakeConnectionCommonProperties(env);\r\n        connProp.put(&quot;warehouse&quot;, env.getProperty(&quot;snowflake.datasource.askwarehouse&quot;));\r\n        ds.setDriverClassName(env.getProperty(&quot;snowflake.datasource.driver-class-name&quot;));\r\n        ds.setUrl(env.getProperty(&quot;snowflake.datasource.url&quot;));\r\n        ds.setConnectionProperties(connProp);\r\n        return ds;\r\n      }\r\n    \r\n      /** Loads connection properties from application.properties file. */\r\n      private Properties loadSnowflakeConnectionCommonProperties(Environment env) throws Exception {\r\n        var prop = new Properties();\r\n        prop.put(&quot;user&quot;, env.getProperty(&quot;snowflake.datasource.username&quot;));\r\n        prop.put(&quot;db&quot;, env.getProperty(&quot;snowflake.datasource.db&quot;));\r\n        prop.put(&quot;schema&quot;, env.getProperty(&quot;snowflake.datasource.schema&quot;));\r\n        prop.put(&quot;tracing&quot;, env.getProperty(&quot;snowflake.datasource.tracing&quot;));\r\n        prop.put(&quot;role&quot;, env.getProperty(&quot;snowflake.datasource.role&quot;));\r\n    \r\n        if (usePassword) prop.put(&quot;password&quot;, env.getProperty(&quot;snowflake.datasource.password&quot;));\r\n        else\r\n          prop.put(\r\n              &quot;privateKey&quot;,\r\n              CommonUtils.generatePrivateKey(\r\n                  env.getProperty(&quot;snowflake.datasource.privateKey&quot;),\r\n                  env.getProperty(&quot;snowflake.datasource.passcode&quot;)));\r\n        return prop;\r\n      }\r\n    \r\n      @Bean(&quot;masterJdbcTemplate&quot;)\r\n      public JdbcTemplate masterJdbcTemplate(\r\n          @Qualifier(&quot;snowflakeDataSource&quot;) DataSource masterDataSource) {\r\n        var jdbcTemplate = new JdbcTemplate(masterDataSource);\r\n        log.debug(&quot; ---------- Creating master jdbcTemplate -------- &quot;);\r\n        return jdbcTemplate;\r\n      }\r\n    \r\n      @Bean(&quot;masterAskJdbcTemplate&quot;)\r\n      public JdbcTemplate masterAskJdbcTemplate(\r\n          @Qualifier(&quot;snowflakeAskDataSource&quot;) DataSource masterDataSource) {\r\n        var jdbcTemplate = new JdbcTemplate(masterDataSource);\r\n        log.debug(&quot; ---------- Creating ask jdbcTemplate -------- &quot;);\r\n        return jdbcTemplate;\r\n      }\r\n    }\r\n\r\n","title":"Spring boot upgrade from 2.1.3.RELEASE to 2.5.12: &quot;No qualifying bean of type &#39;javax.sql.DataSource&#39; available&quot; in JUnit run","body":"<p>I am getting the below exception when I tried to &quot;mvn package&quot; after upgrading the Spring boot version from 2.1.3.RELEASE to 2.5.12 in JUnit Run</p>\n<ul>\n<li>Upgraded relevant dependency version as well:\n&lt;spring.cloud.version&gt;2.2.6.RELEASE&lt;/spring.cloud.version&gt;</li>\n<li>removed junit-jupiter-api and log4j2</li>\n<li>added spring-boot-starter-validation</li>\n</ul>\n<p>Below is full stacktrace</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\n    at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)\n    at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:350)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:355)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$7(ClassBasedTestDescriptor.java:350)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:349)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$4(ClassBasedTestDescriptor.java:270)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:269)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:259)\n    at java.base/java.util.Optional.orElseGet(Optional.java:369)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:258)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:101)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:100)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:65)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:111)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:111)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:79)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'h2Console' defined in class path resource [org/springframework/boot/autoconfigure/h2/H2ConsoleAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.servlet.ServletRegistrationBean]: Factory method 'h2Console' threw exception; nested exception is org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type 'javax.sql.DataSource' available: expected single matching bean but found 3: snowflakeDataSource,snowflakeAskDataSource,transactionDataSource\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:448)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:339)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:136)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\n    ... 69 more\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.servlet.ServletRegistrationBean]: Factory method 'h2Console' threw exception; nested exception is org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type ' ' available: expected single matching bean but found 3: snowflakeDataSource,snowflakeAskDataSource,transactionDataSource\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 87 more\nCaused by: org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type 'javax.sql.DataSource' available: expected single matching bean but found 3: snowflakeDataSource,snowflakeAskDataSource,transactionDataSource\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveNotUnique(DependencyDescriptor.java:220)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1367)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfAvailable(DefaultListableBeanFactory.java:2030)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.ifAvailable(DefaultListableBeanFactory.java:2041)\n    at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.h2Console(H2ConsoleAutoConfiguration.java:66)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 88 more\n</code></pre>\n<p><strong>TransactionalDataConfiguration:</strong></p>\n<pre><code>@Configuration\n@Log4j2\npublic class TransactionDataConfiguration {\n\n  private static final String POSTGRES_DATASOURCE_PREFIX = &quot;postgres.datasource&quot;;\n\n  /**\n   * Configure Snowflake data source and tags it as primary database\n   *\n   * @return DBCP enabled data source\n   */\n  @ConfigurationProperties(prefix = POSTGRES_DATASOURCE_PREFIX)\n  @Bean\n  @Qualifier(&quot;transactionDataSource&quot;)\n  public DataSource transactionDataSource() {\n    log.debug(&quot;Creating transaction datasource&quot;);\n    return DataSourceBuilder.create().type(HikariDataSource.class).build();\n  }\n\n  @Bean\n  @Qualifier(&quot;transactionNamedJdbcTemplate&quot;)\n  public NamedParameterJdbcTemplate transactionNamedJdbcTemplate(\n      @Qualifier(&quot;transactionDataSource&quot;) DataSource productDataSource) {\n    return new NamedParameterJdbcTemplate(productDataSource);\n  }\n}\n</code></pre>\n<p><strong>Snowflake Configuration:</strong></p>\n<pre><code>@Configuration\n@Log4j2\npublic class SnowflakeConfiguration {\n\n  @Value(&quot;${snowflake.datasource.usepassword:false}&quot;)\n  private boolean usePassword;\n\n  /** Configure Snowflake data source and tags it as primary database */\n  @Bean(name = &quot;snowflakeDataSource&quot;)\n  public DataSource dataSource(Environment env) throws Exception {\n    var ds = new DriverManagerDataSource();\n    var connProp = loadSnowflakeConnectionCommonProperties(env);\n    connProp.put(&quot;warehouse&quot;, env.getProperty(&quot;snowflake.datasource.reportswarehouse&quot;));\n    ds.setDriverClassName(env.getProperty(&quot;snowflake.datasource.driver-class-name&quot;));\n    ds.setUrl(env.getProperty(&quot;snowflake.datasource.url&quot;));\n    ds.setConnectionProperties(connProp);\n    return ds;\n  }\n\n  @Bean(name = &quot;snowflakeAskDataSource&quot;)\n  public DataSource askDataSource(Environment env) throws Exception {\n    var ds = new DriverManagerDataSource();\n    var connProp = loadSnowflakeConnectionCommonProperties(env);\n    connProp.put(&quot;warehouse&quot;, env.getProperty(&quot;snowflake.datasource.askwarehouse&quot;));\n    ds.setDriverClassName(env.getProperty(&quot;snowflake.datasource.driver-class-name&quot;));\n    ds.setUrl(env.getProperty(&quot;snowflake.datasource.url&quot;));\n    ds.setConnectionProperties(connProp);\n    return ds;\n  }\n\n  /** Loads connection properties from application.properties file. */\n  private Properties loadSnowflakeConnectionCommonProperties(Environment env) throws Exception {\n    var prop = new Properties();\n    prop.put(&quot;user&quot;, env.getProperty(&quot;snowflake.datasource.username&quot;));\n    prop.put(&quot;db&quot;, env.getProperty(&quot;snowflake.datasource.db&quot;));\n    prop.put(&quot;schema&quot;, env.getProperty(&quot;snowflake.datasource.schema&quot;));\n    prop.put(&quot;tracing&quot;, env.getProperty(&quot;snowflake.datasource.tracing&quot;));\n    prop.put(&quot;role&quot;, env.getProperty(&quot;snowflake.datasource.role&quot;));\n\n    if (usePassword) prop.put(&quot;password&quot;, env.getProperty(&quot;snowflake.datasource.password&quot;));\n    else\n      prop.put(\n          &quot;privateKey&quot;,\n          CommonUtils.generatePrivateKey(\n              env.getProperty(&quot;snowflake.datasource.privateKey&quot;),\n              env.getProperty(&quot;snowflake.datasource.passcode&quot;)));\n    return prop;\n  }\n\n  @Bean(&quot;masterJdbcTemplate&quot;)\n  public JdbcTemplate masterJdbcTemplate(\n      @Qualifier(&quot;snowflakeDataSource&quot;) DataSource masterDataSource) {\n    var jdbcTemplate = new JdbcTemplate(masterDataSource);\n    log.debug(&quot; ---------- Creating master jdbcTemplate -------- &quot;);\n    return jdbcTemplate;\n  }\n\n  @Bean(&quot;masterAskJdbcTemplate&quot;)\n  public JdbcTemplate masterAskJdbcTemplate(\n      @Qualifier(&quot;snowflakeAskDataSource&quot;) DataSource masterDataSource) {\n    var jdbcTemplate = new JdbcTemplate(masterDataSource);\n    log.debug(&quot; ---------- Creating ask jdbcTemplate -------- &quot;);\n    return jdbcTemplate;\n  }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa","jackson"],"comments":[{"owner":{"account_id":9905560,"reputation":641,"user_id":7334180,"accept_rate":75,"display_name":"Holinc"},"score":0,"creation_date":1656470874,"post_id":72794236,"comment_id":128578105,"body_markdown":"What&#39;s your JSON String?","body":"What&#39;s your JSON String?"},{"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"score":0,"creation_date":1656506648,"post_id":72794236,"comment_id":128589106,"body_markdown":"I believe this is the nature of Transient isn&#39;t it ? Variables marked as transient aren&#39;t `Serialized` ! So ultimately will be skipped in JSON to POJO and Vice-versa conversion to my knowledge","body":"I believe this is the nature of Transient isn&#39;t it ? Variables marked as transient aren&#39;t <code>Serialized</code> ! So ultimately will be skipped in JSON to POJO and Vice-versa conversion to my knowledge"}],"answers":[{"tags":[],"owner":{"account_id":25386555,"reputation":9,"user_id":19198263,"display_name":"yeleubay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656509927,"creation_date":1656509927,"answer_id":72802404,"question_id":72794236,"body_markdown":"If you have Serialization problem, Make sure that you add both Getters and Setters to your PersonData class to all needed params\r\n\r\n\r\n    public class PersonData {\r\n\r\n    String name;\r\n    Integer age;\r\n    \r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public void setAge(Integer age) {\r\n        this.age = age;\r\n    }\r\n\r\n    public Integer getAge() {\r\n        return age;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\nif you think problem caused by annotations you have used, Your output will not have null, but dont have personDataDetails param at all","title":"Map a Json string to pojo class inside entity class - Springboot","body":"<p>If you have Serialization problem, Make sure that you add both Getters and Setters to your PersonData class to all needed params</p>\n<pre><code>public class PersonData {\n\nString name;\nInteger age;\n\npublic void setName(String name) {\n    this.name = name;\n}\n\npublic void setAge(Integer age) {\n    this.age = age;\n}\n\npublic Integer getAge() {\n    return age;\n}\n\npublic String getName() {\n    return name;\n}\n</code></pre>\n<p>if you think problem caused by annotations you have used, Your output will not have null, but dont have personDataDetails param at all</p>\n"}],"owner":{"account_id":6631961,"reputation":464,"user_id":5120388,"accept_rate":57,"display_name":"newcoder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656509927,"creation_date":1656459251,"question_id":72794236,"body_markdown":"I am trying to map a JSON String object from my DB to a transient member inside the entity class.\r\nBut when I am getting the response it&#39;s coming as null.\r\n\r\nCan you please let me know what I am doing wrong ?\r\n\r\n  \r\n\r\n      @Entity\r\n        @Getters\r\n        //other annotations\r\n        public class Person {\r\n        \r\n        // members\r\n        \r\n        @Lob\r\n        @JsonIgnore\r\n        String personData;\r\n    \r\n    @Transient\r\n    @JsonIclude\r\n    PersonData personDataDetails\r\n    \r\n    public PersonData getPersonDataDetails(){\r\n    \r\n        //Create Object Mapper obj\r\n         return objectMapper.readValue(personData, PersonData.class);\r\n    \r\n     }\r\n    \r\n    }\r\n\r\nbut in the output personDataDetails is coming as null. How I can assign the value to personDataDetails and get the same in the response ?","title":"Map a Json string to pojo class inside entity class - Springboot","body":"<p>I am trying to map a JSON String object from my DB to a transient member inside the entity class.\nBut when I am getting the response it's coming as null.</p>\n<p>Can you please let me know what I am doing wrong ?</p>\n<pre><code>  @Entity\n    @Getters\n    //other annotations\n    public class Person {\n    \n    // members\n    \n    @Lob\n    @JsonIgnore\n    String personData;\n\n@Transient\n@JsonIclude\nPersonData personDataDetails\n\npublic PersonData getPersonDataDetails(){\n\n    //Create Object Mapper obj\n     return objectMapper.readValue(personData, PersonData.class);\n\n }\n\n}\n</code></pre>\n<p>but in the output personDataDetails is coming as null. How I can assign the value to personDataDetails and get the same in the response ?</p>\n"},{"tags":["java","garbage-collection","jconsole","jvisualvm"],"answers":[{"tags":[],"owner":{"account_id":422964,"reputation":33652,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1656509520,"creation_date":1474794494,"answer_id":39685173,"question_id":39679235,"body_markdown":"**Parallel Garbage collector:**&#160;`-XX:+UseParallelGC` (jvm option to use this collector, though this is default as of java 8)\r\n\r\nUnder jconsole/jvisualvm\r\n\r\n    Name = &#39;PS Scavenge&#39;, ... for (Minor Collection)\r\n    Garbage collector:&#160;\r\n    Name = &#39;PS MarkSweep&#39;, for (Major Collection)\r\n\r\n\r\n**CMS Garbage collector:**&#160;`-XX:+UseParNewGC` (jvm option to use this collector)\r\n\r\nUnder jconsole/jvisualvm\r\n\r\n    Name = &#39;ParNew&#39;, ... for (Minor Collection)\r\n    Garbage collector:&#160;\r\n    Name = &#39;MarkSweepCompact&#39;, for (Major Collection)\r\n\r\n**G1 Garbage collector:** `-XX:+UseG1GC` (jvm option to use this collector)\r\n\r\nUnder jconsole/jvisualvm\r\n\r\n    Name = &#39;G1 Young Generation&#39;, ... for (Minor Collection)\r\n    Garbage collector:&#160;\r\n    Name = &#39;G1 Old Generation&#39;, for (Major Collection)\r\n\r\n\r\n**Without jconsole/jvisualvm:-** you can juse `-XX:+PrintCommandLineFlags` jvm option to see GC type details on console","title":"Determine Garbage collector type from jconsole/jvisualvm?","body":"<p><strong>Parallel Garbage collector:</strong><code>-XX:+UseParallelGC</code> (jvm option to use this collector, though this is default as of java 8)</p>\n<p>Under jconsole/jvisualvm</p>\n<pre><code>Name = 'PS Scavenge', ... for (Minor Collection)\nGarbage collector:\nName = 'PS MarkSweep', for (Major Collection)\n</code></pre>\n<p><strong>CMS Garbage collector:</strong><code>-XX:+UseParNewGC</code> (jvm option to use this collector)</p>\n<p>Under jconsole/jvisualvm</p>\n<pre><code>Name = 'ParNew', ... for (Minor Collection)\nGarbage collector:\nName = 'MarkSweepCompact', for (Major Collection)\n</code></pre>\n<p><strong>G1 Garbage collector:</strong> <code>-XX:+UseG1GC</code> (jvm option to use this collector)</p>\n<p>Under jconsole/jvisualvm</p>\n<pre><code>Name = 'G1 Young Generation', ... for (Minor Collection)\nGarbage collector:\nName = 'G1 Old Generation', for (Major Collection)\n</code></pre>\n<p><strong>Without jconsole/jvisualvm:-</strong> you can juse <code>-XX:+PrintCommandLineFlags</code> jvm option to see GC type details on console</p>\n"}],"owner":{"account_id":2042921,"reputation":10170,"user_id":3222249,"accept_rate":73,"display_name":"emilly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1044,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656509520,"creation_date":1474739105,"question_id":39679235,"body_markdown":"Is there a way I can find GC type (parallel or CMS or G1 ) from jnconsole or jvisualvm? In my case, I see  below related info:\r\n\r\n    Garbage Collector : Name=&#39;PS MarkSweep&#39;....\r\n    Garbage Collector : Name=&#39;PS Scavenge&#39;....\r\n\r\nWhen I use the command `-XX: +PrintCommandLineFlags` it displays ` -XX:+UseParallelGC`, so it confirms its parallel GC collector(though I though its CMS because of name `PS MarkSweep` in jconsole/jvisualvm) .  \r\n\r\nWhat will be the GC collector values for CMS and G1?","title":"Determine Garbage collector type from jconsole/jvisualvm?","body":"<p>Is there a way I can find GC type (parallel or CMS or G1 ) from jnconsole or jvisualvm? In my case, I see  below related info:</p>\n\n<pre><code>Garbage Collector : Name='PS MarkSweep'....\nGarbage Collector : Name='PS Scavenge'....\n</code></pre>\n\n<p>When I use the command <code>-XX: +PrintCommandLineFlags</code> it displays <code>-XX:+UseParallelGC</code>, so it confirms its parallel GC collector(though I though its CMS because of name <code>PS MarkSweep</code> in jconsole/jvisualvm) .  </p>\n\n<p>What will be the GC collector values for CMS and G1?</p>\n"},{"tags":["java","constructor","void"],"comments":[{"owner":{"account_id":53317,"reputation":19342,"user_id":159388,"accept_rate":73,"display_name":"murgatroid99"},"score":16,"creation_date":1406319040,"post_id":24963718,"comment_id":38802351,"body_markdown":"That second one isn&#39;t a constructor. It&#39;s just a method that happens to share a name with its class.","body":"That second one isn&#39;t a constructor. It&#39;s just a method that happens to share a name with its class."},{"owner":{"account_id":44195,"reputation":269043,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":1,"creation_date":1406319042,"post_id":24963718,"comment_id":38802353,"body_markdown":"Because it&#39;s no longer a constructor.","body":"Because it&#39;s no longer a constructor."},{"owner":{"account_id":2612287,"reputation":418,"user_id":2262185,"accept_rate":60,"display_name":"Doswell"},"score":5,"creation_date":1406319161,"post_id":24963718,"comment_id":38802413,"body_markdown":"the answer on this similar question  [Why do constructors in java not have a return type](http://stackoverflow.com/questions/6801500/why-do-constructors-in-java-not-have-a-return-type) gives a great reason.","body":"the answer on this similar question  <a href=\"http://stackoverflow.com/questions/6801500/why-do-constructors-in-java-not-have-a-return-type\">Why do constructors in java not have a return type</a> gives a great reason."},{"owner":{"account_id":4801924,"reputation":1203,"user_id":3878321,"display_name":"Hadi"},"score":0,"creation_date":1406319326,"post_id":24963718,"comment_id":38802473,"body_markdown":"its amazing that you wrote answer just before i can refresh the page ; tnx all,","body":"its amazing that you wrote answer just before i can refresh the page ; tnx all,"}],"answers":[{"tags":[],"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"down_vote_count":0,"up_vote_count":59,"is_accepted":true,"score":59,"last_activity_date":1406319077,"creation_date":1406319077,"answer_id":24963755,"question_id":24963718,"body_markdown":"In Java, the constructor **is not** a method. It only has the name of the class and a specific visibility. If it declares that returns something, then **it is not a constructor**, not even if it declares that returns a `void`. Note the difference here:\r\n\r\n    public class SomeClass {\r\n        public SomeClass() {\r\n            //constructor\r\n        }\r\n        public void SomeClass() {\r\n            //a method, NOT a constructor\r\n        }\r\n    }\r\n\r\nAlso, if a class doesn&#39;t define a constructor, then the compiler will automatically add a default constructor for you.","title":"java &quot;void&quot; and &quot;non void&quot; constructor","body":"<p>In Java, the constructor <strong>is not</strong> a method. It only has the name of the class and a specific visibility. If it declares that returns something, then <strong>it is not a constructor</strong>, not even if it declares that returns a <code>void</code>. Note the difference here:</p>\n\n<pre><code>public class SomeClass {\n    public SomeClass() {\n        //constructor\n    }\n    public void SomeClass() {\n        //a method, NOT a constructor\n    }\n}\n</code></pre>\n\n<p>Also, if a class doesn't define a constructor, then the compiler will automatically add a default constructor for you.</p>\n"},{"tags":[],"owner":{"account_id":4775046,"reputation":1818,"user_id":3858487,"display_name":"Khary Mendez"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1406319080,"creation_date":1406319080,"answer_id":24963756,"question_id":24963718,"body_markdown":"public void class1() is not a constructor, it is a void method whose name happens to match the class name.  It is never called.  Instead java creates a default constructor (since you have not created one), which does nothing.","title":"java &quot;void&quot; and &quot;non void&quot; constructor","body":"<p>public void class1() is not a constructor, it is a void method whose name happens to match the class name.  It is never called.  Instead java creates a default constructor (since you have not created one), which does nothing.</p>\n"},{"tags":[],"owner":{"account_id":2979851,"reputation":723,"user_id":2530060,"accept_rate":83,"display_name":"Cal Stephens"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1406319238,"creation_date":1406319238,"answer_id":24963792,"question_id":24963718,"body_markdown":"Using void in the constructor by definition leads it to not longer be the constructor. \r\nThe constructor specifically has no return type. While void doesn&#39;t return a value in the strictest sense of the word, it is still considered a return type.\r\n\r\nIn the second example (where you use the void), you would have to do `h.class1()` for the method to get called because it is no longer the constructor. Or you could just remove the void.","title":"java &quot;void&quot; and &quot;non void&quot; constructor","body":"<p>Using void in the constructor by definition leads it to not longer be the constructor. \nThe constructor specifically has no return type. While void doesn't return a value in the strictest sense of the word, it is still considered a return type.</p>\n\n<p>In the second example (where you use the void), you would have to do <code>h.class1()</code> for the method to get called because it is no longer the constructor. Or you could just remove the void.</p>\n"},{"tags":[],"owner":{"account_id":4801683,"reputation":83,"user_id":3878150,"display_name":"Lin Sherman"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1406319477,"creation_date":1406319477,"answer_id":24963850,"question_id":24963718,"body_markdown":"This is arguably a design flaw in Java.\r\n\r\n    class MyClass {\r\n    \r\n       // this is a constructor\r\n       MyClass() {...}\r\n\r\n       // this is an instance method\r\n       void MyClass() {...}\r\n\r\n     }\r\n\r\nPerfectly legal. Probably shouldn&#39;t be, but is.\r\n\r\nIn your example, class1() is never getting called, because it&#39;s not a constructor. Instead, the default constructor is getting called.\r\n\r\nSuggestion: familiarize yourself with Java naming conventions. Class names should start with uppercase.\r\n     ","title":"java &quot;void&quot; and &quot;non void&quot; constructor","body":"<p>This is arguably a design flaw in Java.</p>\n\n<pre><code>class MyClass {\n\n   // this is a constructor\n   MyClass() {...}\n\n   // this is an instance method\n   void MyClass() {...}\n\n }\n</code></pre>\n\n<p>Perfectly legal. Probably shouldn't be, but is.</p>\n\n<p>In your example, class1() is never getting called, because it's not a constructor. Instead, the default constructor is getting called.</p>\n\n<p>Suggestion: familiarize yourself with Java naming conventions. Class names should start with uppercase.</p>\n"},{"tags":[],"owner":{"account_id":23532878,"reputation":31,"user_id":17578231,"display_name":"louie anderson"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1656509322,"creation_date":1656027305,"answer_id":72737612,"question_id":24963718,"body_markdown":"The reason the constructor doesn&#39;t return a value is because it&#39;s not called directly by your code, it&#39;s called by the memory allocation and object initialization code in the run time.\r\n\r\nHere is an article explaining this in greater detail:\r\nhttps://www.quora.com/Why-is-the-return-type-of-constructor-not-void-while-the-return-type-of-a-function-can-be-void","title":"java &quot;void&quot; and &quot;non void&quot; constructor","body":"<p>The reason the constructor doesn't return a value is because it's not called directly by your code, it's called by the memory allocation and object initialization code in the run time.</p>\n<p>Here is an article explaining this in greater detail:\n<a href=\"https://www.quora.com/Why-is-the-return-type-of-constructor-not-void-while-the-return-type-of-a-function-can-be-void\" rel=\"nofollow noreferrer\">https://www.quora.com/Why-is-the-return-type-of-constructor-not-void-while-the-return-type-of-a-function-can-be-void</a></p>\n"}],"owner":{"account_id":4801924,"reputation":1203,"user_id":3878321,"display_name":"Hadi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32151,"favorite_count":0,"down_vote_count":1,"up_vote_count":22,"accepted_answer_id":24963755,"answer_count":5,"score":21,"last_activity_date":1656509322,"creation_date":1406318943,"question_id":24963718,"body_markdown":"I wrote this simple class in java just for testing some of its features.\r\n\r\n    public class class1 {\r\n        public static Integer value=0;\r\n        public class1() {\r\n           da();\r\n        }\r\n        public int da() {\r\n            class1.value=class1.value+1;\r\n            return 5;\r\n        }\r\n        public static void main(String[] args) {\r\n           class1 h  = new class1();\r\n           class1 h2 = new class1();\r\n           System.out.println(class1.value);\r\n        }\r\n    }\r\n\r\nThe output is:\r\n\r\n&gt; 2\r\n\r\nBut in this code:\r\n\r\n    public class class1 {\r\n        public static Integer value=0;\r\n        public void class1() {\r\n            da();\r\n        }\r\n        public int da() {\r\n            class1.value=class1.value+1;\r\n            return 5;\r\n        }\r\n        public static void main(String[] args) {\r\n            class1 h  = new class1();\r\n            class1 h2 = new class1();\r\n            System.out.println(class1.value);\r\n        }\r\n    }\r\n\r\nThe output of this code is:\r\n\r\n&gt; 0\r\n\r\nSo why doesn&#39;t, when I use `void` in the constructor method declaration, the static field of the class doesn&#39;t change any more?","title":"java &quot;void&quot; and &quot;non void&quot; constructor","body":"<p>I wrote this simple class in java just for testing some of its features.</p>\n\n<pre><code>public class class1 {\n    public static Integer value=0;\n    public class1() {\n       da();\n    }\n    public int da() {\n        class1.value=class1.value+1;\n        return 5;\n    }\n    public static void main(String[] args) {\n       class1 h  = new class1();\n       class1 h2 = new class1();\n       System.out.println(class1.value);\n    }\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<blockquote>\n  <p>2</p>\n</blockquote>\n\n<p>But in this code:</p>\n\n<pre><code>public class class1 {\n    public static Integer value=0;\n    public void class1() {\n        da();\n    }\n    public int da() {\n        class1.value=class1.value+1;\n        return 5;\n    }\n    public static void main(String[] args) {\n        class1 h  = new class1();\n        class1 h2 = new class1();\n        System.out.println(class1.value);\n    }\n}\n</code></pre>\n\n<p>The output of this code is:</p>\n\n<blockquote>\n  <p>0</p>\n</blockquote>\n\n<p>So why doesn't, when I use <code>void</code> in the constructor method declaration, the static field of the class doesn't change any more?</p>\n"},{"tags":["java","spring","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656367168,"creation_date":1656367168,"answer_id":72778722,"question_id":72773624,"body_markdown":"It&#39;s not entirely clear what you want to achieve based on the description you have provided but if I get this right, you would like to create a repository when that will effectively update the value of the `isValid` field for all `Dom` objects. If that is indeed the case then you could simply create a custom repository method that will accept your flag and will make use of a simple HQL or JPQL to update all records in the database. For example something like this could work for this case:\r\n\r\n```java\r\n@Modifying\r\n@Query(&quot;UPDATE Dom SET isValid = :valid&quot;)\r\nvoid updateValidAll(boolean valid);\r\n```\r\n\r\nIf on the other hand you want to perform the update in memory on the fetched entities and then perform a `saveAll` you could do something like this:\r\n\r\n```java\r\n@Transactional\r\npublic void updateAllRecords2(boolean isValid) {\r\n    var records = repository.findAll()\r\n        .stream()\r\n\t    .peek(dom -&gt; dom.setValid(isValid))\r\n\t    .toList();\r\n    repository.saveAll(records);\r\n}\r\n```\r\n\r\nNote that the latter is not very optimal as it uses `peek` which should not be used on operations that have side-effects (i.e mutations). On top of that will will perform an update query for every single entity that is present, meaning N queries for N entities.","title":"How created multi update query with JPA data?","body":"<p>It's not entirely clear what you want to achieve based on the description you have provided but if I get this right, you would like to create a repository when that will effectively update the value of the <code>isValid</code> field for all <code>Dom</code> objects. If that is indeed the case then you could simply create a custom repository method that will accept your flag and will make use of a simple HQL or JPQL to update all records in the database. For example something like this could work for this case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Modifying\n@Query(&quot;UPDATE Dom SET isValid = :valid&quot;)\nvoid updateValidAll(boolean valid);\n</code></pre>\n<p>If on the other hand you want to perform the update in memory on the fetched entities and then perform a <code>saveAll</code> you could do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\npublic void updateAllRecords2(boolean isValid) {\n    var records = repository.findAll()\n        .stream()\n        .peek(dom -&gt; dom.setValid(isValid))\n        .toList();\n    repository.saveAll(records);\n}\n</code></pre>\n<p>Note that the latter is not very optimal as it uses <code>peek</code> which should not be used on operations that have side-effects (i.e mutations). On top of that will will perform an update query for every single entity that is present, meaning N queries for N entities.</p>\n"}],"owner":{"account_id":20222092,"reputation":109,"user_id":14831240,"display_name":"kiki keke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656509283,"creation_date":1656339501,"question_id":72773624,"body_markdown":"I try to create query setAll , because a entity with top isValid and I want  all value to false before I use saveAll for udpade my database. I use this methods synchronize my database with a batch 6000-7000 lines actually.\r\n\r\n``````java\r\nimport org.springframework.data.repository.CrudRepository;\r\npublic interface  DomRepository extends CrudRepository&lt;Dom, String&gt; {\r\n\r\n\tpublic Domaine findDomByName(String dom);\r\n\tpublic List&lt;Dom&gt; findAll();\r\n\tpublic void setIsValidAll(boolean isValid);\r\n\r\n}\r\nimport javax.persistence.*;\r\nimport org.hibernate.annotations.DynamicUpdate;\r\nimport org.springframework.data.annotation.CreatedDate;\r\n@Entity\r\n@DynamicUpdate\r\npublic class Dom{\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.AUTO)\r\n\tprivate int id;\r\n\tprivate String name;\r\n\t// more attribute\r\n\tprivate boolean isValid;\r\n``````\r\n``````\r\nCaused by: org.springframework.data.mapping.PropertyReferenceException: No property &#39;setIsValidAll&#39; found for type &#39;Dom&#39;!\r\n``````","title":"How created multi update query with JPA data?","body":"<p>I try to create query setAll , because a entity with top isValid and I want  all value to false before I use saveAll for udpade my database. I use this methods synchronize my database with a batch 6000-7000 lines actually.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.data.repository.CrudRepository;\npublic interface  DomRepository extends CrudRepository&lt;Dom, String&gt; {\n\n    public Domaine findDomByName(String dom);\n    public List&lt;Dom&gt; findAll();\n    public void setIsValidAll(boolean isValid);\n\n}\nimport javax.persistence.*;\nimport org.hibernate.annotations.DynamicUpdate;\nimport org.springframework.data.annotation.CreatedDate;\n@Entity\n@DynamicUpdate\npublic class Dom{\n    \n    @Id\n    @GeneratedValue(strategy=GenerationType.AUTO)\n    private int id;\n    private String name;\n    // more attribute\n    private boolean isValid;\n</code></pre>\n<pre><code>Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'setIsValidAll' found for type 'Dom'!\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1656460941,"post_id":72794354,"comment_id":128576683,"body_markdown":"You create a blank buffered image `resizedImage`, then you write a blank `ByteArrayOutputStream` to it `ImageIO.write(resizedImage, &quot;jpg&quot;,baos);`, so you get the default black image with no content. Make sure you write an actual image. See duplicate question: [BufferedImage displaying as only black](https://stackoverflow.com/questions/27660366/bufferedimage-displaying-as-only-black)","body":"You create a blank buffered image <code>resizedImage</code>, then you write a blank <code>ByteArrayOutputStream</code> to it <code>ImageIO.write(resizedImage, &quot;jpg&quot;,baos);</code>, so you get the default black image with no content. Make sure you write an actual image. See duplicate question: <a href=\"https://stackoverflow.com/questions/27660366/bufferedimage-displaying-as-only-black\">BufferedImage displaying as only black</a>"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1656462185,"post_id":72794354,"comment_id":128576864,"body_markdown":"Personally, I&#39;d just make  use of the `Graphics2D` API - for [example](https://stackoverflow.com/questions/37758061/rotate-a-buffered-image-in-java/37758533#37758533)","body":"Personally, I&#39;d just make  use of the <code>Graphics2D</code> API - for <a href=\"https://stackoverflow.com/questions/37758061/rotate-a-buffered-image-in-java/37758533#37758533\">example</a>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1656512522,"post_id":72794354,"comment_id":128591703,"body_markdown":"When you rotate around (0,0) corner, data tends to be outside the image. Further note that there is no point in setting rendering hints *after* you performed the operation, not to speak of setting them after dispose(). Btw transforming a `BufferedImage` into another can be a one-liner when using [`AffineTransformOp`](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/image/AffineTransformOp.html) and [`getQuadrantRotateInstance`](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/geom/AffineTransform.html#getQuadrantRotateInstance(int,double,double))","body":"When you rotate around (0,0) corner, data tends to be outside the image. Further note that there is no point in setting rendering hints <i>after</i> you performed the operation, not to speak of setting them after dispose(). Btw transforming a <code>BufferedImage</code> into another can be a one-liner when using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/image/AffineTransformOp.html\" rel=\"nofollow noreferrer\"><code>AffineTransformOp</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/geom/AffineTransform.html#getQuadrantRotateInstance(int,double,double)\" rel=\"nofollow noreferrer\"><code>getQuadrantRotateInstance</code></a>"}],"owner":{"account_id":25334822,"reputation":101,"user_id":19154125,"display_name":"mobiw"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":342,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656509231,"creation_date":1656460720,"question_id":72794354,"body_markdown":"When i rotate BufferedImage i get black image.\r\n\r\nI need rectangle image, and rotate image if image has EXIF data about orientation(https://stackoverflow.com/questions/15978809/imageio-read-always-rotates-my-uploaded-picture/29319713#29319713)\r\nBut when i rotate image it became black\r\nIf I don&#39;t rotate the image everything works.\r\n\r\n       public static byte[]  compress(byte[] img) throws IOException, ImageProcessingException, MetadataException {\r\n    \r\n    \r\n           ByteArrayOutputStream rescale = rescale(img);\r\n    \r\n    \r\n           return rescale.toByteArray();\r\n    \r\n       }\r\n    \r\n       private static Double getOrientation(InputStream inputstream) throws ImageProcessingException, IOException, MetadataException {\r\n           Metadata metadata = ImageMetadataReader.readMetadata(inputstream);\r\n    \r\n           ExifIFD0Directory exifIFD0 = metadata.getDirectory(ExifIFD0Directory.class);\r\n           int orientation = exifIFD0.getInt(ExifIFD0Directory.TAG_ORIENTATION);\r\n    \r\n           switch (orientation) {\r\n               case 1: // [Exif IFD0] Orientation - Top, left side (Horizontal / normal)\r\n                   return null;\r\n               case 6: // [Exif IFD0] Orientation - Right side, top (Rotate 90 CW)\r\n                   return 90d;\r\n               case 3: // [Exif IFD0] Orientation - Bottom, right side (Rotate 180)\r\n                   return 180d;\r\n               case 8: // [Exif IFD0] Orientation - Left side, bottom (Rotate 270 CW)\r\n                   return 270d;\r\n           }\r\n           return null;\r\n    \r\n       }\r\n        private static ByteArrayOutputStream rescale(byte[] img) throws IOException {\r\n    \r\n            InputStream inputstreamMeta = new ByteArrayInputStream(img);\r\n            InputStream inputstream = new ByteArrayInputStream(img);\r\n    \r\n            Double orientation1 = null;\r\n            try {\r\n                orientation1 = getOrientation(inputstreamMeta);\r\n            } catch (ImageProcessingException | MetadataException | IOException e) {\r\n    \r\n            }\r\n            BufferedImage bi = ImageIO.read(inputstream);\r\n    \r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            \r\n            int originalWidth = 0;\r\n            int originalHeight = 0;\r\n            if(orientation1!=null &amp;&amp; (orientation1 == 90 || orientation1 == 270)) {\r\n                originalWidth = bi.getHeight();\r\n                originalHeight = bi.getWidth();\r\n            }else {\r\n                 originalWidth = bi.getWidth();\r\n                 originalHeight = bi.getHeight();\r\n            }\r\n            int type = bi.getType() == 0? BufferedImage.TYPE_INT_ARGB : bi.getType();\r\n    \r\n            //rescale 50%\r\n            BufferedImage resizedImage = new BufferedImage(originalWidth/4, originalHeight/4, type);\r\n            Graphics2D g = resizedImage.createGraphics();\r\n    \r\n              if(orientation1!=null) {\r\n                g.rotate(orientation1);\r\n            }\r\n            g.drawImage(bi, 0, 0, originalWidth/4, originalHeight/4, null);\r\n          \r\n            g.dispose();\r\n            g.setComposite(AlphaComposite.Src);\r\n            g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n            g.setRenderingHint(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY);\r\n            g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);\r\n    \r\n    \r\n    \r\n    \r\n            ImageIO.write(resizedImage, &quot;jpg&quot;,baos);\r\n    \r\n            return baos;\r\n        }\r\n\r\noriginal image:\r\n\r\n[enter image description here][1]\r\n\r\n\r\nafter rorate and rectangle\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KwwfG.jpg\r\n  [2]: https://i.stack.imgur.com/zoNnx.jpg","title":"BufferedImage rotate","body":"<p>When i rotate BufferedImage i get black image.</p>\n<p>I need rectangle image, and rotate image if image has EXIF data about orientation(<a href=\"https://stackoverflow.com/questions/15978809/imageio-read-always-rotates-my-uploaded-picture/29319713#29319713\">ImageIO.read( ) always rotates my uploaded picture</a>)\nBut when i rotate image it became black\nIf I don't rotate the image everything works.</p>\n<pre><code>   public static byte[]  compress(byte[] img) throws IOException, ImageProcessingException, MetadataException {\n\n\n       ByteArrayOutputStream rescale = rescale(img);\n\n\n       return rescale.toByteArray();\n\n   }\n\n   private static Double getOrientation(InputStream inputstream) throws ImageProcessingException, IOException, MetadataException {\n       Metadata metadata = ImageMetadataReader.readMetadata(inputstream);\n\n       ExifIFD0Directory exifIFD0 = metadata.getDirectory(ExifIFD0Directory.class);\n       int orientation = exifIFD0.getInt(ExifIFD0Directory.TAG_ORIENTATION);\n\n       switch (orientation) {\n           case 1: // [Exif IFD0] Orientation - Top, left side (Horizontal / normal)\n               return null;\n           case 6: // [Exif IFD0] Orientation - Right side, top (Rotate 90 CW)\n               return 90d;\n           case 3: // [Exif IFD0] Orientation - Bottom, right side (Rotate 180)\n               return 180d;\n           case 8: // [Exif IFD0] Orientation - Left side, bottom (Rotate 270 CW)\n               return 270d;\n       }\n       return null;\n\n   }\n    private static ByteArrayOutputStream rescale(byte[] img) throws IOException {\n\n        InputStream inputstreamMeta = new ByteArrayInputStream(img);\n        InputStream inputstream = new ByteArrayInputStream(img);\n\n        Double orientation1 = null;\n        try {\n            orientation1 = getOrientation(inputstreamMeta);\n        } catch (ImageProcessingException | MetadataException | IOException e) {\n\n        }\n        BufferedImage bi = ImageIO.read(inputstream);\n\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        \n        int originalWidth = 0;\n        int originalHeight = 0;\n        if(orientation1!=null &amp;&amp; (orientation1 == 90 || orientation1 == 270)) {\n            originalWidth = bi.getHeight();\n            originalHeight = bi.getWidth();\n        }else {\n             originalWidth = bi.getWidth();\n             originalHeight = bi.getHeight();\n        }\n        int type = bi.getType() == 0? BufferedImage.TYPE_INT_ARGB : bi.getType();\n\n        //rescale 50%\n        BufferedImage resizedImage = new BufferedImage(originalWidth/4, originalHeight/4, type);\n        Graphics2D g = resizedImage.createGraphics();\n\n          if(orientation1!=null) {\n            g.rotate(orientation1);\n        }\n        g.drawImage(bi, 0, 0, originalWidth/4, originalHeight/4, null);\n      \n        g.dispose();\n        g.setComposite(AlphaComposite.Src);\n        g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n        g.setRenderingHint(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY);\n        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);\n\n\n\n\n        ImageIO.write(resizedImage, &quot;jpg&quot;,baos);\n\n        return baos;\n    }\n</code></pre>\n<p>original image:</p>\n<p><a href=\"https://i.stack.imgur.com/KwwfG.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>after rorate and rectangle\n<a href=\"https://i.stack.imgur.com/zoNnx.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","intellij-idea","junit","intellij-plugin"],"answers":[{"tags":[],"owner":{"account_id":2686602,"reputation":3815,"user_id":3008984,"display_name":"common sense"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656509198,"creation_date":1656509198,"answer_id":72802233,"question_id":72801970,"body_markdown":"Got it working by deleting the folder `build/classes` from root of my plugin folder. ","title":"JUnit error &quot;java.lang.NoClassDefFoundError:&quot;","body":"<p>Got it working by deleting the folder <code>build/classes</code> from root of my plugin folder.</p>\n"}],"owner":{"account_id":2686602,"reputation":3815,"user_id":3008984,"display_name":"common sense"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":529,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656509198,"creation_date":1656508146,"question_id":72801970,"body_markdown":"I encounter a weird issue with JUnit testing. I added a new rule to my BNF file which results in creation of a new token FOO. Running the plugin works fine and the token and element is shown in PSI View. However, when executing a UnitTest it fails with:\r\n\r\n```\r\nde/foo/bar/psi/impl/FooBarImpl\r\njava.lang.NoClassDefFoundError: de/foo/bar/psi/impl/FooBarImpl\r\n\tat de.foo.bar.psi.FooTypes$Factory.createElement(FooTypes.java:424)\r\n\tat de.foo.bar.parser.FooParserDefinition.createElement(FooParserDefinition.java:63)\r\n\tat com.intellij.psi.impl.source.tree.CompositeElement.createPsiNoLock(CompositeElement.java:705)\r\n\r\n...\r\n\r\nCaused by: java.lang.ClassNotFoundException: de.foo.bar.psi.impl.FooTinesImpl\r\n\tat com.intellij.util.lang.UrlClassLoader.findClass(UrlClassLoader.java:215)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:589)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\t... 40 more\r\n```\r\n\r\nThe class reported as not found is available.","title":"JUnit error &quot;java.lang.NoClassDefFoundError:&quot;","body":"<p>I encounter a weird issue with JUnit testing. I added a new rule to my BNF file which results in creation of a new token FOO. Running the plugin works fine and the token and element is shown in PSI View. However, when executing a UnitTest it fails with:</p>\n<pre><code>de/foo/bar/psi/impl/FooBarImpl\njava.lang.NoClassDefFoundError: de/foo/bar/psi/impl/FooBarImpl\n    at de.foo.bar.psi.FooTypes$Factory.createElement(FooTypes.java:424)\n    at de.foo.bar.parser.FooParserDefinition.createElement(FooParserDefinition.java:63)\n    at com.intellij.psi.impl.source.tree.CompositeElement.createPsiNoLock(CompositeElement.java:705)\n\n...\n\nCaused by: java.lang.ClassNotFoundException: de.foo.bar.psi.impl.FooTinesImpl\n    at com.intellij.util.lang.UrlClassLoader.findClass(UrlClassLoader.java:215)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:589)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n    ... 40 more\n</code></pre>\n<p>The class reported as not found is available.</p>\n"},{"tags":["java","image","class"],"comments":[{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1656508272,"post_id":72799802,"comment_id":128589846,"body_markdown":"I might be missing a point here, but there is certainly no need for more classes... Either pass a parameter to the properties constructor if you choose to create a new one each time you show the window, or use an event to change the contents of the porperies window.  This seems very similar to classic master/detail.","body":"I might be missing a point here, but there is certainly no need for more classes... Either pass a parameter to the properties constructor if you choose to create a new one each time you show the window, or use an event to change the contents of the porperies window.  This seems very similar to classic master/detail."},{"owner":{"account_id":24924127,"reputation":27,"user_id":18792117,"display_name":"Alanzhou"},"score":0,"creation_date":1656512815,"post_id":72799802,"comment_id":128591848,"body_markdown":"@HaraldK Could you show me how to change the contents of the properties window?","body":"@HaraldK Could you show me how to change the contents of the properties window?"}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656509004,"creation_date":1656509004,"answer_id":72802190,"question_id":72799802,"body_markdown":"You should only really need on Class for all your elements.\r\n\r\nNow, this is not an answer but merely a suggestion for perhaps a different approach (concept) on the task at hand and the best way to to describe it is to see it in action:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis is actually from **www.britannica.com** and you can [play with it here](https://www.britannica.com/science/periodic-table). When the page displays, click on the small periodic table image so to Zoom the image. A panel is opened displaying a larger version of the periodic table and at the bottom is an Image Spinner. Scroll the image spinner to the very last image and click on it with your mouse pointer. An interactive periodic table will be displayed in the window. Now just move your mouse pointer over the periodic table elements and select the one you want to see the properties for.  This is basically how I would do this but, to each their own. I just thought I would pass it along.\r\n\r\nThe periodic table itself could be a JPanel consisting of 103 JLabels in a grid type layout with each having it&#39;s own element image and other JLabels for things like the title and legend data. Doll it up the way you like. The important part would be to create a global Mouse Listener to handle ***mouseEntered***, ***mouseExited*** (for border highlighting), and ***mouseClicked*** (to display properties) events for all element JLabels. This could perhaps even be an Inner Class, for example:\r\n\r\n    private class ElementsMouseHandler extends java.awt.event.MouseAdapter {\r\n        @Override\r\n        public void mouseClicked(java.awt.event.MouseEvent evt) {\r\n             // Do whatever you like here\r\n        }\r\n\r\n        @Override\r\n        public void mouseReleased(java.awt.event.MouseEvent evt) {\r\n             // Example:\r\n\r\n             // Ignore the right mouse button.\r\n             if (SwingUtilities.isRightMouseButton(evt)) {\r\n                return;\r\n            }\r\n            \r\n            /* Which JLabel fired the event. You can do this also in \r\n               the other events below.       */\r\n            javax.swing.JLabel source = (javax.swing.JLabel) evt.getSource();\r\n\r\n            // Get the name placed into the element JLabel&#39;s Name property\r\n            String elementName = source.getName();\r\n\r\n            /* Do whatever you want here like perhaps display another JPanel\r\n               in the window containing the properties information or the \r\n               image thereof related to the elementName retrieved.    */\r\n        }\r\n\r\n        @Override\r\n        public void mouseEntered(java.awt.event.MouseEvent evt) {\r\n            // Do whatever you like here\r\n        }\r\n\r\n        @Override\r\n        public void mouseExited(java.awt.event.MouseEvent evt) {\r\n            // Do whatever you like here\r\n        }\r\n    }\r\n\r\nThen when in the members area of your Main class you might have something like this: \r\n\r\n    ElementsMouseHandler elementsMouseHandler;\r\n\r\nThen just before you initialize all your element JLabels you could have something like this:\r\n\r\n    elementsMouseHandler = new ElementsMouseHandler();\r\n\r\nAnd when you actually initialize your elements JLabel you could do something like this:\r\n\r\n    elementJLabel[idx].addMouseListener(elementMouseHandler);\r\n\r\nNow the same mouse listener can handle the mouse events for all Elements JLabels. Anyways...food for thought.\r\n\r\n  [1]: https://i.stack.imgur.com/YCION.gif","title":"Is there any other way to display different images in a new JFrame, depending on the JRadioButton object clicked, without creating 100+classes?","body":"<p>You should only really need on Class for all your elements.</p>\n<p>Now, this is not an answer but merely a suggestion for perhaps a different approach (concept) on the task at hand and the best way to to describe it is to see it in action:</p>\n<p><a href=\"https://i.stack.imgur.com/YCION.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YCION.gif\" alt=\"enter image description here\" /></a></p>\n<p>This is actually from <strong><a href=\"http://www.britannica.com\" rel=\"nofollow noreferrer\">www.britannica.com</a></strong> and you can <a href=\"https://www.britannica.com/science/periodic-table\" rel=\"nofollow noreferrer\">play with it here</a>. When the page displays, click on the small periodic table image so to Zoom the image. A panel is opened displaying a larger version of the periodic table and at the bottom is an Image Spinner. Scroll the image spinner to the very last image and click on it with your mouse pointer. An interactive periodic table will be displayed in the window. Now just move your mouse pointer over the periodic table elements and select the one you want to see the properties for.  This is basically how I would do this but, to each their own. I just thought I would pass it along.</p>\n<p>The periodic table itself could be a JPanel consisting of 103 JLabels in a grid type layout with each having it's own element image and other JLabels for things like the title and legend data. Doll it up the way you like. The important part would be to create a global Mouse Listener to handle <em><strong>mouseEntered</strong></em>, <em><strong>mouseExited</strong></em> (for border highlighting), and <em><strong>mouseClicked</strong></em> (to display properties) events for all element JLabels. This could perhaps even be an Inner Class, for example:</p>\n<pre><code>private class ElementsMouseHandler extends java.awt.event.MouseAdapter {\n    @Override\n    public void mouseClicked(java.awt.event.MouseEvent evt) {\n         // Do whatever you like here\n    }\n\n    @Override\n    public void mouseReleased(java.awt.event.MouseEvent evt) {\n         // Example:\n\n         // Ignore the right mouse button.\n         if (SwingUtilities.isRightMouseButton(evt)) {\n            return;\n        }\n        \n        /* Which JLabel fired the event. You can do this also in \n           the other events below.       */\n        javax.swing.JLabel source = (javax.swing.JLabel) evt.getSource();\n\n        // Get the name placed into the element JLabel's Name property\n        String elementName = source.getName();\n\n        /* Do whatever you want here like perhaps display another JPanel\n           in the window containing the properties information or the \n           image thereof related to the elementName retrieved.    */\n    }\n\n    @Override\n    public void mouseEntered(java.awt.event.MouseEvent evt) {\n        // Do whatever you like here\n    }\n\n    @Override\n    public void mouseExited(java.awt.event.MouseEvent evt) {\n        // Do whatever you like here\n    }\n}\n</code></pre>\n<p>Then when in the members area of your Main class you might have something like this:</p>\n<pre><code>ElementsMouseHandler elementsMouseHandler;\n</code></pre>\n<p>Then just before you initialize all your element JLabels you could have something like this:</p>\n<pre><code>elementsMouseHandler = new ElementsMouseHandler();\n</code></pre>\n<p>And when you actually initialize your elements JLabel you could do something like this:</p>\n<pre><code>elementJLabel[idx].addMouseListener(elementMouseHandler);\n</code></pre>\n<p>Now the same mouse listener can handle the mouse events for all Elements JLabels. Anyways...food for thought.</p>\n"}],"owner":{"account_id":24924127,"reputation":27,"user_id":18792117,"display_name":"Alanzhou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72802190,"answer_count":1,"score":0,"last_activity_date":1656509004,"creation_date":1656498363,"question_id":72799802,"body_markdown":"I created a Java program that is intended for the following purpose: upon clicking each JRadioButton object representing a chemical element in the periodic table, the corresponding screenshot represented by a JLabel object in a new JFrame would exhibit various properties of each chemical element in the periodic table. \r\n\r\nThe program has the public classes named PeriodicTable, AtomicNumber and Properties. PeriodicTable contains the main method and instantiates AtomicNumber. AtomicNumber is a JFrame displaying the periodic table, whereas Properties opens up a new JFrame for displaying the png image for properties. All chemical elements are represented by JRadioButton objects. Various properties of each chemical element in the periodic table is a screenshot that has been saved as a png image, instantiated with the JLabel ImageIcon method.\r\n\r\nAfter arranging all the chemical elements in the exact order as in the periodic table, I noticed that there is not enough space in the JFrame for adding the png files for properties. To resolve this issue, I created a new JFrame with the public class named Properties, in which only the png image of the first chemical element Hydrogen could be displayed. While resizing the png images for properties seems to be a feasible approach, the font would be too small to be legible as a result. \r\nIn order to display different png images for properties, depending on which JRadioButton object representing chemical element is clicked, I have tried to add and remove the png images within ActionEvent in the public class AtomicNumber, but to no avail.\r\n\r\nI have considered the possibility of creating more than 100 classes for displaying each window containing the corresponding png file of properties, but it seems to be too much of a hassle. Without creating 100+ classes, is there any other way to display each corresponding png file of properties upon clicking a JRadioButton object representing a chemical element? Thank you for the help.\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\nMy code is as follows:\r\n\r\n    //PeriodicTable.java\r\n    public class PeriodicTable {\r\n      public static void main(String[] args) {\r\n        new AtomicNumber();\r\n      }\r\n    }\r\n    ********************\r\n    //AtomicNumber.java\r\n        import java.awt.Color;\r\n        import java.awt.Dimension;\r\n        import java.awt.EventQueue;\r\n        import java.awt.event.ActionEvent;\r\n        import java.awt.event.ActionListener;\r\n        import java.awt.Font;\r\n        import javax.swing.ButtonGroup;\r\n        import javax.swing.ImageIcon;\r\n        import javax.swing.JButton;\r\n        import javax.swing.JFrame;\r\n        import javax.swing.JLabel;\r\n        import javax.swing.JOptionPane;\r\n        import javax.swing.JPanel;\r\n        import javax.swing.JRadioButton;\r\n        import javax.swing.JTextField;\r\n        import javax.swing.SwingConstants;\r\n        \r\n        public class AtomicNumber extends JFrame implements ActionListener {\r\n          private static final long serialVersionUID = 1L;\r\n          static ButtonGroup periodicTable;\r\n          ImageIcon[] elementImage;\r\n          ImageIcon periodicTableIcon;\r\n          static JButton[] button;\r\n          static JLabel[] properties;\r\n          static JPanel panel;\r\n          static JRadioButton[] element;\r\n          JTextField title;\r\n        \r\n      AtomicNumber() {\r\n        elementClip = new Clip[119];\r\n        propertiesClip = new Clip[119];\r\n        elementAudioFile = new File[119];\r\n        propertiesAudioFile = new File[119];\r\n        elementAudioFile[1] = new File(&quot;H.wav&quot;);\r\n    \r\n        elementImage = new ImageIcon[119];\r\n        properties = new JLabel[119];\r\n        button = new JButton[2];\r\n        button[0] = new JButton(&quot;reset&quot;);\r\n        button[0].setBounds(1000, 500, 200, 50);\r\n        button[1] = new JButton(&quot;restart&quot;);\r\n        button[1].setBounds(1000, 550, 200, 50);\r\n        for (int i = 0; i &lt; 2; i++) {\r\n          button[i].addActionListener(this);\r\n          button[i].setFocusable(false);\r\n          button[i].setFont(new Font(&quot;Times New Roman&quot;, Font.BOLD, 30));\r\n          button[i].setPreferredSize(new Dimension(240, 50));\r\n        }\r\n        title = new JTextField(&quot;The Periodic Table of the Chemical Elements&quot;);\r\n        title.setBounds(0, 0, 1080, 65);\r\n        title.setEditable(false);\r\n        title.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 50));\r\n        element = new JRadioButton[119];\r\n        element[1] = new JRadioButton(&quot;1&quot;);\r\n        element[1].setBounds(50, 75, 50, 50);\r\n        elementImage[1] = new ImageIcon(getClass().getClassLoader().getResource(&quot;H.png&quot;));\r\n        properties[1] = new JLabel();\r\n        element[2] = new JRadioButton(&quot;2&quot;);\r\n        element[2].setBounds(925, 75, 50, 50);\r\n        elementImage[2] = new ImageIcon(getClass().getClassLoader().getResource(&quot;He.png&quot;));\r\n        properties[2] = new JLabel();\r\n        element[3] = new JRadioButton(&quot;3&quot;);\r\n        element[3].setBounds(50, 125, 50, 50);\r\n        elementImage[3] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Li.png&quot;));\r\n        properties[3] = new JLabel();\r\n        element[4] = new JRadioButton(&quot;4&quot;);\r\n        element[4].setBounds(100, 125, 50, 50);\r\n        elementImage[4] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Be.png&quot;));\r\n        properties[4] = new JLabel();\r\n        element[5] = new JRadioButton(&quot;5&quot;);\r\n        element[5].setBounds(675, 125, 50, 50);\r\n        elementImage[5] = new ImageIcon(getClass().getClassLoader().getResource(&quot;B.png&quot;));\r\n        properties[5] = new JLabel();\r\n        element[6] = new JRadioButton(&quot;6&quot;);\r\n        element[6].setBounds(725, 125, 50, 50);\r\n        elementImage[6] = new ImageIcon(getClass().getClassLoader().getResource(&quot;C.png&quot;));\r\n        properties[6] = new JLabel();\r\n        element[7] = new JRadioButton(&quot;7&quot;);\r\n        element[7].setBounds(775, 125, 50, 50);\r\n        elementImage[7] = new ImageIcon(getClass().getClassLoader().getResource(&quot;N.png&quot;));\r\n        properties[7] = new JLabel();\r\n        element[8] = new JRadioButton(&quot;8&quot;);\r\n        element[8].setBounds(825, 125, 50, 50);\r\n        elementImage[8] = new ImageIcon(getClass().getClassLoader().getResource(&quot;O.png&quot;));\r\n        properties[8] = new JLabel();\r\n        element[9] = new JRadioButton(&quot;9&quot;);\r\n        element[9].setBounds(875, 125, 50, 50);\r\n        elementImage[9] = new ImageIcon(getClass().getClassLoader().getResource(&quot;F.png&quot;));\r\n        properties[9] = new JLabel();\r\n        element[10] = new JRadioButton(&quot;10&quot;);\r\n        element[10].setBounds(925, 125, 50, 50);\r\n        elementImage[10] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ne.png&quot;));\r\n        properties[10] = new JLabel();\r\n        element[11] = new JRadioButton(&quot;11&quot;);\r\n        element[11].setBounds(50, 175, 50, 50);\r\n        elementImage[11] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Na.png&quot;));\r\n        properties[11] = new JLabel();\r\n        element[12] = new JRadioButton(&quot;12&quot;);\r\n        element[12].setBounds(100, 175, 50, 50);\r\n        elementImage[12] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Mg.png&quot;));\r\n        properties[12] = new JLabel();\r\n        element[13] = new JRadioButton(&quot;13&quot;);\r\n        element[13].setBounds(675, 175, 50, 50);\r\n        elementImage[13] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Al.png&quot;));\r\n        properties[13] = new JLabel();\r\n        element[14] = new JRadioButton(&quot;14&quot;);\r\n        element[14].setBounds(725, 175, 50, 50);\r\n        elementImage[14] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Si.png&quot;));\r\n        properties[14] = new JLabel();\r\n        element[15] = new JRadioButton(&quot;15&quot;);\r\n        element[15].setBounds(775, 175, 50, 50);\r\n        elementImage[15] = new ImageIcon(getClass().getClassLoader().getResource(&quot;P.png&quot;));\r\n        properties[15] = new JLabel();\r\n        element[16] = new JRadioButton(&quot;16&quot;);\r\n        element[16].setBounds(825, 175, 50, 50);\r\n        elementImage[16] = new ImageIcon(getClass().getClassLoader().getResource(&quot;S.png&quot;));\r\n        properties[16] = new JLabel();\r\n        element[17] = new JRadioButton(&quot;17&quot;);\r\n        element[17].setBounds(875, 175, 50, 50);\r\n        elementImage[17] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Cl.png&quot;));\r\n        properties[17] = new JLabel();\r\n        element[18] = new JRadioButton(&quot;18&quot;);\r\n        element[18].setBounds(925, 175, 50, 50);\r\n        elementImage[18] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ar.png&quot;));\r\n        properties[18] = new JLabel();\r\n        element[19] = new JRadioButton(&quot;19&quot;);\r\n        element[19].setBounds(50, 225, 50, 50);\r\n        elementImage[19] = new ImageIcon(getClass().getClassLoader().getResource(&quot;K.png&quot;));\r\n        properties[19] = new JLabel();\r\n        element[20] = new JRadioButton(&quot;20&quot;);\r\n        element[20].setBounds(100, 225, 50, 50);\r\n        elementImage[20] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ca.png&quot;));\r\n        properties[20] = new JLabel();\r\n        element[21] = new JRadioButton(&quot;21&quot;);\r\n        element[21].setBounds(150, 225, 50, 50);\r\n        elementImage[21] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Sc.png&quot;));\r\n        properties[21] = new JLabel();\r\n        element[22] = new JRadioButton(&quot;22&quot;);\r\n        element[22].setBounds(225, 225, 50, 50);\r\n        elementImage[22] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ti.png&quot;));\r\n        properties[22] = new JLabel();\r\n        element[23] = new JRadioButton(&quot;23&quot;);\r\n        element[23].setBounds(275, 225, 50, 50);\r\n        elementImage[23] = new ImageIcon(getClass().getClassLoader().getResource(&quot;V.png&quot;));\r\n        properties[23] = new JLabel();\r\n        element[24] = new JRadioButton(&quot;24&quot;);\r\n        element[24].setBounds(325, 225, 50, 50);\r\n        elementImage[24] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Cr.png&quot;));\r\n        properties[24] = new JLabel();\r\n        element[25] = new JRadioButton(&quot;25&quot;);\r\n        element[25].setBounds(375, 225, 50, 50);\r\n        elementImage[25] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Mn.png&quot;));\r\n        properties[25] = new JLabel();\r\n        element[26] = new JRadioButton(&quot;26&quot;);\r\n        element[26].setBounds(425, 225, 50, 50);\r\n        elementImage[26] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Fe.png&quot;));\r\n        properties[26] = new JLabel();\r\n        element[27] = new JRadioButton(&quot;27&quot;);\r\n        element[27].setBounds(475, 225, 50, 50);\r\n        elementImage[27] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Co.png&quot;));\r\n        properties[27] = new JLabel();\r\n        element[28] = new JRadioButton(&quot;28&quot;);\r\n        element[28].setBounds(525, 225, 50, 50);\r\n        elementImage[28] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ni.png&quot;));\r\n        properties[28] = new JLabel();\r\n        element[29] = new JRadioButton(&quot;29&quot;);\r\n        element[29].setBounds(575, 225, 50, 50);\r\n        elementImage[29] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Cu.png&quot;));\r\n        properties[29] = new JLabel();\r\n        element[30] = new JRadioButton(&quot;30&quot;);\r\n        element[30].setBounds(625, 225, 50, 50);\r\n        elementImage[30] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Zn.png&quot;));\r\n        properties[30] = new JLabel();\r\n        element[31] = new JRadioButton(&quot;31&quot;);\r\n        element[31].setBounds(675, 225, 50, 50);\r\n        elementImage[31] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ga.png&quot;));\r\n        properties[31] = new JLabel();\r\n        element[32] = new JRadioButton(&quot;32&quot;);\r\n        element[32].setBounds(725, 225, 50, 50);\r\n        elementImage[32] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ge.png&quot;));\r\n        properties[32] = new JLabel();\r\n        element[33] = new JRadioButton(&quot;33&quot;);\r\n        element[33].setBounds(775, 225, 50, 50);\r\n        elementImage[33] = new ImageIcon(getClass().getClassLoader().getResource(&quot;As.png&quot;));\r\n        properties[33] = new JLabel();\r\n        element[34] = new JRadioButton(&quot;34&quot;);\r\n        element[34].setBounds(825, 225, 50, 50);\r\n        elementImage[34] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Se.png&quot;));\r\n        properties[34] = new JLabel();\r\n        element[35] = new JRadioButton(&quot;35&quot;);\r\n        element[35].setBounds(875, 225, 50, 50);\r\n        elementImage[35] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Br.png&quot;));\r\n        properties[35] = new JLabel();\r\n        element[36] = new JRadioButton(&quot;36&quot;);\r\n        element[36].setBounds(925, 225, 50, 50);\r\n        elementImage[36] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Kr.png&quot;));\r\n        properties[36] = new JLabel();\r\n        element[37] = new JRadioButton(&quot;37&quot;);\r\n        element[37].setBounds(50, 275, 50, 50);\r\n        elementImage[37] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Rb.png&quot;));\r\n        properties[37] = new JLabel();\r\n        element[38] = new JRadioButton(&quot;38&quot;);\r\n        element[38].setBounds(100, 275, 50, 50);\r\n        elementImage[38] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Sr.png&quot;));\r\n        properties[38] = new JLabel();\r\n        element[39] = new JRadioButton(&quot;39&quot;);\r\n        element[39].setBounds(150, 275, 50, 50);\r\n        elementImage[39] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Y.png&quot;));\r\n        properties[39] = new JLabel();\r\n        element[40] = new JRadioButton(&quot;40&quot;);\r\n        element[40].setBounds(225, 275, 50, 50);\r\n        elementImage[40] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Zr.png&quot;));\r\n        properties[40] = new JLabel();\r\n        element[41] = new JRadioButton(&quot;41&quot;);\r\n        element[41].setBounds(275, 275, 50, 50);\r\n        elementImage[41] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Nb.png&quot;));\r\n        properties[41] = new JLabel();\r\n        element[42] = new JRadioButton(&quot;42&quot;);\r\n        element[42].setBounds(325, 275, 50, 50);\r\n        elementImage[42] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Mo.png&quot;));\r\n        properties[42] = new JLabel();\r\n        element[43] = new JRadioButton(&quot;43&quot;);\r\n        element[43].setBounds(375, 275, 50, 50);\r\n        elementImage[43] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Tc.png&quot;));\r\n        properties[43] = new JLabel();\r\n        element[44] = new JRadioButton(&quot;44&quot;);\r\n        element[44].setBounds(425, 275, 50, 50);\r\n        elementImage[44] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ru.png&quot;));\r\n        properties[44] = new JLabel();\r\n        element[45] = new JRadioButton(&quot;45&quot;);\r\n        element[45].setBounds(475, 275, 50, 50);\r\n        elementImage[45] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Rh.png&quot;));\r\n        properties[45] = new JLabel();\r\n        element[46] = new JRadioButton(&quot;46&quot;);\r\n        element[46].setBounds(525, 275, 50, 50);\r\n        elementImage[46] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Pd.png&quot;));\r\n        properties[46] = new JLabel();\r\n        element[47] = new JRadioButton(&quot;47&quot;);\r\n        element[47].setBounds(575, 275, 50, 50);\r\n        elementImage[47] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ag.png&quot;));\r\n        properties[47] = new JLabel();\r\n        element[48] = new JRadioButton(&quot;48&quot;);\r\n        element[48].setBounds(625, 275, 50, 50);\r\n        elementImage[48] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Cd.png&quot;));\r\n        properties[48] = new JLabel();\r\n        element[49] = new JRadioButton(&quot;49&quot;);\r\n        element[49].setBounds(675, 275, 50, 50);\r\n        elementImage[49] = new ImageIcon(getClass().getClassLoader().getResource(&quot;In.png&quot;));\r\n        properties[49] = new JLabel();\r\n        element[50] = new JRadioButton(&quot;50&quot;);\r\n        element[50].setBounds(725, 275, 50, 50);\r\n        elementImage[50] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Sn.png&quot;));\r\n        properties[50] = new JLabel();\r\n        element[51] = new JRadioButton(&quot;51&quot;);\r\n        element[51].setBounds(775, 275, 50, 50);\r\n        elementImage[51] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Sb.png&quot;));\r\n        properties[51] = new JLabel();\r\n        element[52] = new JRadioButton(&quot;52&quot;);\r\n        element[52].setBounds(825, 275, 50, 50);\r\n        elementImage[52] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Te.png&quot;));\r\n        properties[52] = new JLabel();\r\n        element[53] = new JRadioButton(&quot;53&quot;);\r\n        element[53].setBounds(875, 275, 50, 50);\r\n        elementImage[53] = new ImageIcon(getClass().getClassLoader().getResource(&quot;I.png&quot;));\r\n        properties[53] = new JLabel();\r\n        element[54] = new JRadioButton(&quot;54&quot;);\r\n        element[54].setBounds(925, 275, 50, 50);\r\n        elementImage[54] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Xe.png&quot;));\r\n        properties[54] = new JLabel();\r\n        element[55] = new JRadioButton(&quot;55&quot;);\r\n        element[55].setBounds(50, 325, 50, 50);\r\n        elementImage[55] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Cs.png&quot;));\r\n        properties[55] = new JLabel();\r\n        element[56] = new JRadioButton(&quot;56&quot;);\r\n        element[56].setBounds(100, 325, 50, 50);\r\n        elementImage[56] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ba.png&quot;));\r\n        properties[56] = new JLabel();\r\n        /*element[57]=new JRadioButton(&quot;57);\r\n        elementImage[57]=new ImageIcon(getClass().getClassLoader().getResource(&quot;La.png&quot;));\r\n        properties[57]=new JLabel();*/\r\n    \r\n        periodicTableIcon = new ImageIcon(getClass().getClassLoader().getResource(&quot;periodicTableIcon.png&quot;));\r\n        periodicTable = new ButtonGroup();\r\n        panel = new JPanel();\r\n        panel.add(title);\r\n        for (int i = 1; i &lt; 57; i++) {\r\n          element[i].addActionListener(this);\r\n          element[i].setFocusable(false);\r\n          element[i].setIcon(elementImage[i]);\r\n          element[i].setHorizontalTextPosition(SwingConstants.CENTER);\r\n          element[i].setVerticalTextPosition(SwingConstants.TOP);\r\n          periodicTable.add(element[i]);\r\n          panel.add(element[i]);\r\n          panel.add(properties[i]);\r\n        }\r\n        for (int i = 0; i &lt; 2; i++) {\r\n          panel.add(button[i]);\r\n        }\r\n        panel.setLayout(null);\r\n        panel.setOpaque(false);\r\n        this.add(panel);\r\n        this.getContentPane().setBackground(Color.WHITE);\r\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        this.setIconImage(periodicTableIcon.getImage());\r\n        this.setSize(1500, 1500);\r\n        this.setTitle(&quot;The Periodic Table of the Chemical Elements&quot;);\r\n        this.setVisible(true);\r\n      }\r\n      public void actionPerformed(ActionEvent e) {\r\n          Properties Properties = new Properties();\r\n          for (int i = 1; i &lt; 119; i++) {\r\n            if (e.getSource() == button[0] &amp;&amp; element[i].isSelected()) {\r\n              periodicTable.clearSelection();\r\n            }\r\n          }\r\n          if (e.getSource() == button[1]) {\r\n            EventQueue.invokeLater(new Runnable() {\r\n              public void run() {\r\n                new AtomicNumber();\r\n                JOptionPane.showMessageDialog(null, &quot;Program has restarted.&quot;, &quot;Restart&quot;, JOptionPane.INFORMATION_MESSAGE);\r\n              }\r\n            });\r\n          }\r\n          if (element[1].isSelected()) {\r\n            new Properties().setVisible(true);}\r\n    ********************\r\n    //Properties.java\r\n    import javax.swing.ImageIcon;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    \r\n    public class Properties extends JFrame {\r\n    \r\n      private static final long serialVersionUID = 1L;\r\n    \r\n      JLabel[] properties;\r\n      JPanel propertiesPanel;\r\n      Properties() {\r\n        properties = new JLabel[119];\r\n        properties[0] = new JLabel(new ImageIcon(getClass().getClassLoader().getResource(&quot;H_properties.png&quot;)));\r\n    \r\n        propertiesPanel = new JPanel();\r\n        propertiesPanel.add(properties[0]);\r\n        this.add(propertiesPanel);\r\n        this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n        this.setResizable(false);\r\n        this.setSize(1250, 340);\r\n    \r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KW0pv.png\r\n  [2]: https://i.stack.imgur.com/H7PcY.png","title":"Is there any other way to display different images in a new JFrame, depending on the JRadioButton object clicked, without creating 100+classes?","body":"<p>I created a Java program that is intended for the following purpose: upon clicking each JRadioButton object representing a chemical element in the periodic table, the corresponding screenshot represented by a JLabel object in a new JFrame would exhibit various properties of each chemical element in the periodic table.</p>\n<p>The program has the public classes named PeriodicTable, AtomicNumber and Properties. PeriodicTable contains the main method and instantiates AtomicNumber. AtomicNumber is a JFrame displaying the periodic table, whereas Properties opens up a new JFrame for displaying the png image for properties. All chemical elements are represented by JRadioButton objects. Various properties of each chemical element in the periodic table is a screenshot that has been saved as a png image, instantiated with the JLabel ImageIcon method.</p>\n<p>After arranging all the chemical elements in the exact order as in the periodic table, I noticed that there is not enough space in the JFrame for adding the png files for properties. To resolve this issue, I created a new JFrame with the public class named Properties, in which only the png image of the first chemical element Hydrogen could be displayed. While resizing the png images for properties seems to be a feasible approach, the font would be too small to be legible as a result.\nIn order to display different png images for properties, depending on which JRadioButton object representing chemical element is clicked, I have tried to add and remove the png images within ActionEvent in the public class AtomicNumber, but to no avail.</p>\n<p>I have considered the possibility of creating more than 100 classes for displaying each window containing the corresponding png file of properties, but it seems to be too much of a hassle. Without creating 100+ classes, is there any other way to display each corresponding png file of properties upon clicking a JRadioButton object representing a chemical element? Thank you for the help.</p>\n<p><a href=\"https://i.stack.imgur.com/KW0pv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KW0pv.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/H7PcY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H7PcY.png\" alt=\"enter image description here\" /></a></p>\n<p>My code is as follows:</p>\n<pre><code>//PeriodicTable.java\npublic class PeriodicTable {\n  public static void main(String[] args) {\n    new AtomicNumber();\n  }\n}\n********************\n//AtomicNumber.java\n    import java.awt.Color;\n    import java.awt.Dimension;\n    import java.awt.EventQueue;\n    import java.awt.event.ActionEvent;\n    import java.awt.event.ActionListener;\n    import java.awt.Font;\n    import javax.swing.ButtonGroup;\n    import javax.swing.ImageIcon;\n    import javax.swing.JButton;\n    import javax.swing.JFrame;\n    import javax.swing.JLabel;\n    import javax.swing.JOptionPane;\n    import javax.swing.JPanel;\n    import javax.swing.JRadioButton;\n    import javax.swing.JTextField;\n    import javax.swing.SwingConstants;\n    \n    public class AtomicNumber extends JFrame implements ActionListener {\n      private static final long serialVersionUID = 1L;\n      static ButtonGroup periodicTable;\n      ImageIcon[] elementImage;\n      ImageIcon periodicTableIcon;\n      static JButton[] button;\n      static JLabel[] properties;\n      static JPanel panel;\n      static JRadioButton[] element;\n      JTextField title;\n    \n  AtomicNumber() {\n    elementClip = new Clip[119];\n    propertiesClip = new Clip[119];\n    elementAudioFile = new File[119];\n    propertiesAudioFile = new File[119];\n    elementAudioFile[1] = new File(&quot;H.wav&quot;);\n\n    elementImage = new ImageIcon[119];\n    properties = new JLabel[119];\n    button = new JButton[2];\n    button[0] = new JButton(&quot;reset&quot;);\n    button[0].setBounds(1000, 500, 200, 50);\n    button[1] = new JButton(&quot;restart&quot;);\n    button[1].setBounds(1000, 550, 200, 50);\n    for (int i = 0; i &lt; 2; i++) {\n      button[i].addActionListener(this);\n      button[i].setFocusable(false);\n      button[i].setFont(new Font(&quot;Times New Roman&quot;, Font.BOLD, 30));\n      button[i].setPreferredSize(new Dimension(240, 50));\n    }\n    title = new JTextField(&quot;The Periodic Table of the Chemical Elements&quot;);\n    title.setBounds(0, 0, 1080, 65);\n    title.setEditable(false);\n    title.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 50));\n    element = new JRadioButton[119];\n    element[1] = new JRadioButton(&quot;1&quot;);\n    element[1].setBounds(50, 75, 50, 50);\n    elementImage[1] = new ImageIcon(getClass().getClassLoader().getResource(&quot;H.png&quot;));\n    properties[1] = new JLabel();\n    element[2] = new JRadioButton(&quot;2&quot;);\n    element[2].setBounds(925, 75, 50, 50);\n    elementImage[2] = new ImageIcon(getClass().getClassLoader().getResource(&quot;He.png&quot;));\n    properties[2] = new JLabel();\n    element[3] = new JRadioButton(&quot;3&quot;);\n    element[3].setBounds(50, 125, 50, 50);\n    elementImage[3] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Li.png&quot;));\n    properties[3] = new JLabel();\n    element[4] = new JRadioButton(&quot;4&quot;);\n    element[4].setBounds(100, 125, 50, 50);\n    elementImage[4] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Be.png&quot;));\n    properties[4] = new JLabel();\n    element[5] = new JRadioButton(&quot;5&quot;);\n    element[5].setBounds(675, 125, 50, 50);\n    elementImage[5] = new ImageIcon(getClass().getClassLoader().getResource(&quot;B.png&quot;));\n    properties[5] = new JLabel();\n    element[6] = new JRadioButton(&quot;6&quot;);\n    element[6].setBounds(725, 125, 50, 50);\n    elementImage[6] = new ImageIcon(getClass().getClassLoader().getResource(&quot;C.png&quot;));\n    properties[6] = new JLabel();\n    element[7] = new JRadioButton(&quot;7&quot;);\n    element[7].setBounds(775, 125, 50, 50);\n    elementImage[7] = new ImageIcon(getClass().getClassLoader().getResource(&quot;N.png&quot;));\n    properties[7] = new JLabel();\n    element[8] = new JRadioButton(&quot;8&quot;);\n    element[8].setBounds(825, 125, 50, 50);\n    elementImage[8] = new ImageIcon(getClass().getClassLoader().getResource(&quot;O.png&quot;));\n    properties[8] = new JLabel();\n    element[9] = new JRadioButton(&quot;9&quot;);\n    element[9].setBounds(875, 125, 50, 50);\n    elementImage[9] = new ImageIcon(getClass().getClassLoader().getResource(&quot;F.png&quot;));\n    properties[9] = new JLabel();\n    element[10] = new JRadioButton(&quot;10&quot;);\n    element[10].setBounds(925, 125, 50, 50);\n    elementImage[10] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ne.png&quot;));\n    properties[10] = new JLabel();\n    element[11] = new JRadioButton(&quot;11&quot;);\n    element[11].setBounds(50, 175, 50, 50);\n    elementImage[11] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Na.png&quot;));\n    properties[11] = new JLabel();\n    element[12] = new JRadioButton(&quot;12&quot;);\n    element[12].setBounds(100, 175, 50, 50);\n    elementImage[12] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Mg.png&quot;));\n    properties[12] = new JLabel();\n    element[13] = new JRadioButton(&quot;13&quot;);\n    element[13].setBounds(675, 175, 50, 50);\n    elementImage[13] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Al.png&quot;));\n    properties[13] = new JLabel();\n    element[14] = new JRadioButton(&quot;14&quot;);\n    element[14].setBounds(725, 175, 50, 50);\n    elementImage[14] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Si.png&quot;));\n    properties[14] = new JLabel();\n    element[15] = new JRadioButton(&quot;15&quot;);\n    element[15].setBounds(775, 175, 50, 50);\n    elementImage[15] = new ImageIcon(getClass().getClassLoader().getResource(&quot;P.png&quot;));\n    properties[15] = new JLabel();\n    element[16] = new JRadioButton(&quot;16&quot;);\n    element[16].setBounds(825, 175, 50, 50);\n    elementImage[16] = new ImageIcon(getClass().getClassLoader().getResource(&quot;S.png&quot;));\n    properties[16] = new JLabel();\n    element[17] = new JRadioButton(&quot;17&quot;);\n    element[17].setBounds(875, 175, 50, 50);\n    elementImage[17] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Cl.png&quot;));\n    properties[17] = new JLabel();\n    element[18] = new JRadioButton(&quot;18&quot;);\n    element[18].setBounds(925, 175, 50, 50);\n    elementImage[18] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ar.png&quot;));\n    properties[18] = new JLabel();\n    element[19] = new JRadioButton(&quot;19&quot;);\n    element[19].setBounds(50, 225, 50, 50);\n    elementImage[19] = new ImageIcon(getClass().getClassLoader().getResource(&quot;K.png&quot;));\n    properties[19] = new JLabel();\n    element[20] = new JRadioButton(&quot;20&quot;);\n    element[20].setBounds(100, 225, 50, 50);\n    elementImage[20] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ca.png&quot;));\n    properties[20] = new JLabel();\n    element[21] = new JRadioButton(&quot;21&quot;);\n    element[21].setBounds(150, 225, 50, 50);\n    elementImage[21] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Sc.png&quot;));\n    properties[21] = new JLabel();\n    element[22] = new JRadioButton(&quot;22&quot;);\n    element[22].setBounds(225, 225, 50, 50);\n    elementImage[22] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ti.png&quot;));\n    properties[22] = new JLabel();\n    element[23] = new JRadioButton(&quot;23&quot;);\n    element[23].setBounds(275, 225, 50, 50);\n    elementImage[23] = new ImageIcon(getClass().getClassLoader().getResource(&quot;V.png&quot;));\n    properties[23] = new JLabel();\n    element[24] = new JRadioButton(&quot;24&quot;);\n    element[24].setBounds(325, 225, 50, 50);\n    elementImage[24] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Cr.png&quot;));\n    properties[24] = new JLabel();\n    element[25] = new JRadioButton(&quot;25&quot;);\n    element[25].setBounds(375, 225, 50, 50);\n    elementImage[25] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Mn.png&quot;));\n    properties[25] = new JLabel();\n    element[26] = new JRadioButton(&quot;26&quot;);\n    element[26].setBounds(425, 225, 50, 50);\n    elementImage[26] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Fe.png&quot;));\n    properties[26] = new JLabel();\n    element[27] = new JRadioButton(&quot;27&quot;);\n    element[27].setBounds(475, 225, 50, 50);\n    elementImage[27] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Co.png&quot;));\n    properties[27] = new JLabel();\n    element[28] = new JRadioButton(&quot;28&quot;);\n    element[28].setBounds(525, 225, 50, 50);\n    elementImage[28] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ni.png&quot;));\n    properties[28] = new JLabel();\n    element[29] = new JRadioButton(&quot;29&quot;);\n    element[29].setBounds(575, 225, 50, 50);\n    elementImage[29] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Cu.png&quot;));\n    properties[29] = new JLabel();\n    element[30] = new JRadioButton(&quot;30&quot;);\n    element[30].setBounds(625, 225, 50, 50);\n    elementImage[30] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Zn.png&quot;));\n    properties[30] = new JLabel();\n    element[31] = new JRadioButton(&quot;31&quot;);\n    element[31].setBounds(675, 225, 50, 50);\n    elementImage[31] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ga.png&quot;));\n    properties[31] = new JLabel();\n    element[32] = new JRadioButton(&quot;32&quot;);\n    element[32].setBounds(725, 225, 50, 50);\n    elementImage[32] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ge.png&quot;));\n    properties[32] = new JLabel();\n    element[33] = new JRadioButton(&quot;33&quot;);\n    element[33].setBounds(775, 225, 50, 50);\n    elementImage[33] = new ImageIcon(getClass().getClassLoader().getResource(&quot;As.png&quot;));\n    properties[33] = new JLabel();\n    element[34] = new JRadioButton(&quot;34&quot;);\n    element[34].setBounds(825, 225, 50, 50);\n    elementImage[34] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Se.png&quot;));\n    properties[34] = new JLabel();\n    element[35] = new JRadioButton(&quot;35&quot;);\n    element[35].setBounds(875, 225, 50, 50);\n    elementImage[35] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Br.png&quot;));\n    properties[35] = new JLabel();\n    element[36] = new JRadioButton(&quot;36&quot;);\n    element[36].setBounds(925, 225, 50, 50);\n    elementImage[36] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Kr.png&quot;));\n    properties[36] = new JLabel();\n    element[37] = new JRadioButton(&quot;37&quot;);\n    element[37].setBounds(50, 275, 50, 50);\n    elementImage[37] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Rb.png&quot;));\n    properties[37] = new JLabel();\n    element[38] = new JRadioButton(&quot;38&quot;);\n    element[38].setBounds(100, 275, 50, 50);\n    elementImage[38] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Sr.png&quot;));\n    properties[38] = new JLabel();\n    element[39] = new JRadioButton(&quot;39&quot;);\n    element[39].setBounds(150, 275, 50, 50);\n    elementImage[39] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Y.png&quot;));\n    properties[39] = new JLabel();\n    element[40] = new JRadioButton(&quot;40&quot;);\n    element[40].setBounds(225, 275, 50, 50);\n    elementImage[40] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Zr.png&quot;));\n    properties[40] = new JLabel();\n    element[41] = new JRadioButton(&quot;41&quot;);\n    element[41].setBounds(275, 275, 50, 50);\n    elementImage[41] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Nb.png&quot;));\n    properties[41] = new JLabel();\n    element[42] = new JRadioButton(&quot;42&quot;);\n    element[42].setBounds(325, 275, 50, 50);\n    elementImage[42] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Mo.png&quot;));\n    properties[42] = new JLabel();\n    element[43] = new JRadioButton(&quot;43&quot;);\n    element[43].setBounds(375, 275, 50, 50);\n    elementImage[43] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Tc.png&quot;));\n    properties[43] = new JLabel();\n    element[44] = new JRadioButton(&quot;44&quot;);\n    element[44].setBounds(425, 275, 50, 50);\n    elementImage[44] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ru.png&quot;));\n    properties[44] = new JLabel();\n    element[45] = new JRadioButton(&quot;45&quot;);\n    element[45].setBounds(475, 275, 50, 50);\n    elementImage[45] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Rh.png&quot;));\n    properties[45] = new JLabel();\n    element[46] = new JRadioButton(&quot;46&quot;);\n    element[46].setBounds(525, 275, 50, 50);\n    elementImage[46] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Pd.png&quot;));\n    properties[46] = new JLabel();\n    element[47] = new JRadioButton(&quot;47&quot;);\n    element[47].setBounds(575, 275, 50, 50);\n    elementImage[47] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ag.png&quot;));\n    properties[47] = new JLabel();\n    element[48] = new JRadioButton(&quot;48&quot;);\n    element[48].setBounds(625, 275, 50, 50);\n    elementImage[48] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Cd.png&quot;));\n    properties[48] = new JLabel();\n    element[49] = new JRadioButton(&quot;49&quot;);\n    element[49].setBounds(675, 275, 50, 50);\n    elementImage[49] = new ImageIcon(getClass().getClassLoader().getResource(&quot;In.png&quot;));\n    properties[49] = new JLabel();\n    element[50] = new JRadioButton(&quot;50&quot;);\n    element[50].setBounds(725, 275, 50, 50);\n    elementImage[50] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Sn.png&quot;));\n    properties[50] = new JLabel();\n    element[51] = new JRadioButton(&quot;51&quot;);\n    element[51].setBounds(775, 275, 50, 50);\n    elementImage[51] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Sb.png&quot;));\n    properties[51] = new JLabel();\n    element[52] = new JRadioButton(&quot;52&quot;);\n    element[52].setBounds(825, 275, 50, 50);\n    elementImage[52] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Te.png&quot;));\n    properties[52] = new JLabel();\n    element[53] = new JRadioButton(&quot;53&quot;);\n    element[53].setBounds(875, 275, 50, 50);\n    elementImage[53] = new ImageIcon(getClass().getClassLoader().getResource(&quot;I.png&quot;));\n    properties[53] = new JLabel();\n    element[54] = new JRadioButton(&quot;54&quot;);\n    element[54].setBounds(925, 275, 50, 50);\n    elementImage[54] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Xe.png&quot;));\n    properties[54] = new JLabel();\n    element[55] = new JRadioButton(&quot;55&quot;);\n    element[55].setBounds(50, 325, 50, 50);\n    elementImage[55] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Cs.png&quot;));\n    properties[55] = new JLabel();\n    element[56] = new JRadioButton(&quot;56&quot;);\n    element[56].setBounds(100, 325, 50, 50);\n    elementImage[56] = new ImageIcon(getClass().getClassLoader().getResource(&quot;Ba.png&quot;));\n    properties[56] = new JLabel();\n    /*element[57]=new JRadioButton(&quot;57);\n    elementImage[57]=new ImageIcon(getClass().getClassLoader().getResource(&quot;La.png&quot;));\n    properties[57]=new JLabel();*/\n\n    periodicTableIcon = new ImageIcon(getClass().getClassLoader().getResource(&quot;periodicTableIcon.png&quot;));\n    periodicTable = new ButtonGroup();\n    panel = new JPanel();\n    panel.add(title);\n    for (int i = 1; i &lt; 57; i++) {\n      element[i].addActionListener(this);\n      element[i].setFocusable(false);\n      element[i].setIcon(elementImage[i]);\n      element[i].setHorizontalTextPosition(SwingConstants.CENTER);\n      element[i].setVerticalTextPosition(SwingConstants.TOP);\n      periodicTable.add(element[i]);\n      panel.add(element[i]);\n      panel.add(properties[i]);\n    }\n    for (int i = 0; i &lt; 2; i++) {\n      panel.add(button[i]);\n    }\n    panel.setLayout(null);\n    panel.setOpaque(false);\n    this.add(panel);\n    this.getContentPane().setBackground(Color.WHITE);\n    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    this.setIconImage(periodicTableIcon.getImage());\n    this.setSize(1500, 1500);\n    this.setTitle(&quot;The Periodic Table of the Chemical Elements&quot;);\n    this.setVisible(true);\n  }\n  public void actionPerformed(ActionEvent e) {\n      Properties Properties = new Properties();\n      for (int i = 1; i &lt; 119; i++) {\n        if (e.getSource() == button[0] &amp;&amp; element[i].isSelected()) {\n          periodicTable.clearSelection();\n        }\n      }\n      if (e.getSource() == button[1]) {\n        EventQueue.invokeLater(new Runnable() {\n          public void run() {\n            new AtomicNumber();\n            JOptionPane.showMessageDialog(null, &quot;Program has restarted.&quot;, &quot;Restart&quot;, JOptionPane.INFORMATION_MESSAGE);\n          }\n        });\n      }\n      if (element[1].isSelected()) {\n        new Properties().setVisible(true);}\n********************\n//Properties.java\nimport javax.swing.ImageIcon;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\npublic class Properties extends JFrame {\n\n  private static final long serialVersionUID = 1L;\n\n  JLabel[] properties;\n  JPanel propertiesPanel;\n  Properties() {\n    properties = new JLabel[119];\n    properties[0] = new JLabel(new ImageIcon(getClass().getClassLoader().getResource(&quot;H_properties.png&quot;)));\n\n    propertiesPanel = new JPanel();\n    propertiesPanel.add(properties[0]);\n    this.add(propertiesPanel);\n    this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n    this.setResizable(false);\n    this.setSize(1250, 340);\n\n  }\n}\n</code></pre>\n"},{"tags":["java","selenium","loops","selenium-webdriver","automation"],"comments":[{"owner":{"account_id":24379947,"reputation":303,"user_id":18311683,"display_name":"Josh Heaps"},"score":0,"creation_date":1656523643,"post_id":72802166,"comment_id":128596234,"body_markdown":"Can you show us your code?","body":"Can you show us your code?"},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1656580832,"post_id":72802166,"comment_id":128609723,"body_markdown":"And what is the issue?","body":"And what is the issue?"}],"owner":{"account_id":17743157,"reputation":13,"user_id":12882983,"display_name":"usha sree"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656508890,"creation_date":1656508890,"question_id":72802166,"body_markdown":"Need help in Automation - How to write Automation code for below,\r\n\r\n**One of the website consists many travelers.  It can be just one, 2 or 3**\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIt should check People Insured \r\n\r\n\tif (condition1) {\r\n\t\t  // block of code to be executed if condition1 is true\r\n\t\t} else if (condition2) {\r\n\t\t  // block of code to be executed if the condition1 is false and condition2 is true\r\n\t\t} else {\r\n\t\t  // block of code to be executed if the condition1 is false and condition2 is false\r\n\t\t}\r\n\r\n\r\nCondition 1 = if People Insured consists only 1 traveler,\r\nCondition 2 = if People Insured consists 2 travelers\r\nand so on..\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nlike that, it should check with names...  doesn&#39;t matter with title or names..\r\n\r\nIt should check no. of lists tag and proceed with that code..\r\n\r\n\r\nThank you\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MoOhk.png\r\n  [2]: https://i.stack.imgur.com/0Zuuu.png","title":"Need Logic in Selenium - Using loop","body":"<p>Need help in Automation - How to write Automation code for below,</p>\n<p><strong>One of the website consists many travelers.  It can be just one, 2 or 3</strong></p>\n<p><a href=\"https://i.stack.imgur.com/MoOhk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MoOhk.png\" alt=\"enter image description here\" /></a></p>\n<p>It should check People Insured</p>\n<pre><code>if (condition1) {\n      // block of code to be executed if condition1 is true\n    } else if (condition2) {\n      // block of code to be executed if the condition1 is false and condition2 is true\n    } else {\n      // block of code to be executed if the condition1 is false and condition2 is false\n    }\n</code></pre>\n<p>Condition 1 = if People Insured consists only 1 traveler,\nCondition 2 = if People Insured consists 2 travelers\nand so on..</p>\n<p><a href=\"https://i.stack.imgur.com/0Zuuu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Zuuu.png\" alt=\"enter image description here\" /></a></p>\n<p>like that, it should check with names...  doesn't matter with title or names..</p>\n<p>It should check no. of lists tag and proceed with that code..</p>\n<p>Thank you</p>\n"},{"tags":["java","angular","spring-boot"],"comments":[{"owner":{"account_id":1925103,"reputation":30437,"user_id":1735756,"accept_rate":65,"display_name":"Haifeng Zhang"},"score":0,"creation_date":1556125996,"post_id":55835179,"comment_id":98335099,"body_markdown":"you can try to reduce the `max-age` from 3600 seconds to a reasonable value","body":"you can try to reduce the <code>max-age</code> from 3600 seconds to a reasonable value"}],"answers":[{"tags":[],"owner":{"account_id":10310871,"reputation":25632,"user_id":7606764,"display_name":"Andronicus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1556125520,"creation_date":1556125520,"answer_id":55835230,"question_id":55835179,"body_markdown":"I can see you&#39;re caching on the server side, you can evict cache by calling method annotated with `@CacheEvict` with the key you want to evict:\r\n\r\n    @CacheEvict(value = &quot;users&quot;, allEntries = true)\r\n\r\nOr you can do this programmatically by using `CacheManager`:\r\n\r\n    @Autowired\r\n    CacheManager cacheManager;\r\n     \r\n    public void evictSingleCacheValue(String cacheName, String cacheKey) {\r\n        cacheManager.getCache(cacheName).evict(cacheKey);\r\n    }","title":"How to invalidate browser cache in a web application built with angular7 and springboot","body":"<p>I can see you're caching on the server side, you can evict cache by calling method annotated with <code>@CacheEvict</code> with the key you want to evict:</p>\n\n<pre><code>@CacheEvict(value = \"users\", allEntries = true)\n</code></pre>\n\n<p>Or you can do this programmatically by using <code>CacheManager</code>:</p>\n\n<pre><code>@Autowired\nCacheManager cacheManager;\n\npublic void evictSingleCacheValue(String cacheName, String cacheKey) {\n    cacheManager.getCache(cacheName).evict(cacheKey);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8208829,"reputation":1,"user_id":6177694,"display_name":"ermanp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656508440,"creation_date":1656508401,"answer_id":72802038,"question_id":55835179,"body_markdown":"You can check if there is any changes in your server side Time-based or Content-based controls by lightweight requests.\r\n\r\nTime-based =&gt; your can use Last=Modified in the header\r\n\r\nContent-based =&gt; you can use Etag\r\n\r\nplease check these two links;\r\nhttps://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers\r\n\r\nhttps://www.logicbig.com/quick-info/web/last-modified-and-if-modified-since.html\r\n","title":"How to invalidate browser cache in a web application built with angular7 and springboot","body":"<p>You can check if there is any changes in your server side Time-based or Content-based controls by lightweight requests.</p>\n<p>Time-based =&gt; your can use Last=Modified in the header</p>\n<p>Content-based =&gt; you can use Etag</p>\n<p>please check these two links;\n<a href=\"https://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers</a></p>\n<p><a href=\"https://www.logicbig.com/quick-info/web/last-modified-and-if-modified-since.html\" rel=\"nofollow noreferrer\">https://www.logicbig.com/quick-info/web/last-modified-and-if-modified-since.html</a></p>\n"}],"owner":{"account_id":8505672,"reputation":3,"user_id":6377335,"display_name":"Patrick Mazzucchetti"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":723,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":55835230,"answer_count":2,"score":0,"last_activity_date":1656508440,"creation_date":1556125312,"question_id":55835179,"body_markdown":"I&#39;m developing a web application using springboot for the backend serving rest API and Angular7 for the frontend.\r\n\r\nmy application takes so much time to load because it has to perform a lot of processing on the server, so I decided to improve the performance by storing the cached data in order to load the page first and eventually update the data when processing ends.\r\n\r\nThis works but I&#39;m having a problem: \r\nWhen I update data in Angular these are normally saved in my database but if I update the page I don&#39;t see the changes because the browser continues to access the old cached data rather than getting the new ones modified.\r\n\r\nIs there a way to invalidate certain data in the browser cache when they are modified?\r\n\r\nSpringboot:\r\n\r\nMy rest controller endpoint are similar to that:\r\n\r\n```\r\n  @GetMapping(value = &quot;/users&quot;)\r\n  public Iterable&lt;User&gt; getAllUsers(HttpServletResponse response) {\r\n    response.setHeader(&quot;Cache-Control&quot;, &quot;max-age=3600&quot;);\r\n    return this.userService.findAll());\r\n  }\r\n```\r\n\r\nMy service:\r\n```\r\n  @Cacheable(&quot;users&quot;)\r\n  public Iterable&lt;User&gt; findAll() {\r\n    return this.userRepository.findAll();\r\n  }\r\n```\r\n\r\nMy angular service:\r\n```\r\n  getUsers(): Observable&lt;User[]&gt; {\r\n    return this.http.get&lt;User[]&gt;(`&lt;ip&gt;&#39; + &#39;/users&#39;);\r\n  }\r\n```","title":"How to invalidate browser cache in a web application built with angular7 and springboot","body":"<p>I'm developing a web application using springboot for the backend serving rest API and Angular7 for the frontend.</p>\n\n<p>my application takes so much time to load because it has to perform a lot of processing on the server, so I decided to improve the performance by storing the cached data in order to load the page first and eventually update the data when processing ends.</p>\n\n<p>This works but I'm having a problem: \nWhen I update data in Angular these are normally saved in my database but if I update the page I don't see the changes because the browser continues to access the old cached data rather than getting the new ones modified.</p>\n\n<p>Is there a way to invalidate certain data in the browser cache when they are modified?</p>\n\n<p>Springboot:</p>\n\n<p>My rest controller endpoint are similar to that:</p>\n\n<pre><code>  @GetMapping(value = \"/users\")\n  public Iterable&lt;User&gt; getAllUsers(HttpServletResponse response) {\n    response.setHeader(\"Cache-Control\", \"max-age=3600\");\n    return this.userService.findAll());\n  }\n</code></pre>\n\n<p>My service:</p>\n\n<pre><code>  @Cacheable(\"users\")\n  public Iterable&lt;User&gt; findAll() {\n    return this.userRepository.findAll();\n  }\n</code></pre>\n\n<p>My angular service:</p>\n\n<pre><code>  getUsers(): Observable&lt;User[]&gt; {\n    return this.http.get&lt;User[]&gt;(`&lt;ip&gt;' + '/users');\n  }\n</code></pre>\n"},{"tags":["java","android","android-studio","oncreate"],"comments":[{"owner":{"account_id":6348437,"reputation":1619,"user_id":4958351,"display_name":"AIMIN PAN"},"score":0,"creation_date":1656471542,"post_id":72795201,"comment_id":128578184,"body_markdown":"so you should paste in your OnClickListener code.","body":"so you should paste in your OnClickListener code."},{"owner":{"account_id":7881594,"reputation":737,"user_id":5955362,"display_name":"Jaydeep Devda"},"score":0,"creation_date":1656473287,"post_id":72795201,"comment_id":128578382,"body_markdown":"please read : https://developer.android.com/guide/components/activities/intro-activities","body":"please read : <a href=\"https://developer.android.com/guide/components/activities/intro-activities\" rel=\"nofollow noreferrer\">developer.android.com/guide/components/activities/&hellip;</a>"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1656473396,"post_id":72795201,"comment_id":128578395,"body_markdown":"Are you displaying this activity? If so, how? It has no view set... If this is just some class, and not actually an activity it should *not* extend the activity class.","body":"Are you displaying this activity? If so, how? It has no view set... If this is just some class, and not actually an activity it should <i>not</i> extend the activity class."},{"owner":{"display_name":"user17378410"},"score":0,"creation_date":1656473910,"post_id":72795201,"comment_id":128578467,"body_markdown":"@TylerV This class is use for a bottom sheet,  if I remove the activity then how do I make it run on start/create?","body":"@TylerV This class is use for a bottom sheet,  if I remove the activity then how do I make it run on start/create?"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1656473953,"post_id":72795201,"comment_id":128578475,"body_markdown":"Those are part of the activity lifecycle, if this is not an activity it should not and will not run those at all. Maybe you should show more in the question about how you create and use this class and what you are trying to achieve here.","body":"Those are part of the activity lifecycle, if this is not an activity it should not and will not run those at all. Maybe you should show more in the question about how you create and use this class and what you are trying to achieve here."},{"owner":{"display_name":"user17378410"},"score":0,"creation_date":1656474077,"post_id":72795201,"comment_id":128578492,"body_markdown":"I&#39;m trying to make a setOnClickListener on a button  This is the code that im running https://privatebin.net/?85429f280fb147b0#8qN5ETWfUxHCAJLEvzhWv9NF8SiB8XPaiYWXwrim2rxn","body":"I&#39;m trying to make a setOnClickListener on a button  This is the code that im running <a href=\"https://privatebin.net/?85429f280fb147b0#8qN5ETWfUxHCAJLEvzhWv9NF8SiB8XPaiYWXwrim2rxn\" rel=\"nofollow noreferrer\">privatebin.net/&hellip;</a>"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1656474238,"post_id":72795201,"comment_id":128578524,"body_markdown":"Then you can just use `button.setOnClickListener`, why do you need another class? **Please** do not add code as a comment, it is unreadable. Edit the question. Where is the code you posted located? In this fake activity class? If so, also show how that is used.","body":"Then you can just use <code>button.setOnClickListener</code>, why do you need another class? <b>Please</b> do not add code as a comment, it is unreadable. Edit the question. Where is the code you posted located? In this fake activity class? If so, also show how that is used."},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1656474459,"post_id":72795201,"comment_id":128578561,"body_markdown":"The code you pasted is not in a valid activity. You **cannot** simply make a random class that extends Activity and expect it to work/run onCreate etc. Show us where this is used in the *actual* activity class you have. The TextView in the code you pasted will always be null - that &quot;activity&quot; has no view set.","body":"The code you pasted is not in a valid activity. You <b>cannot</b> simply make a random class that extends Activity and expect it to work/run onCreate etc. Show us where this is used in the <i>actual</i> activity class you have. The TextView in the code you pasted will always be null - that &quot;activity&quot; has no view set."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1656481232,"post_id":72795201,"comment_id":128579799,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":25664132,"reputation":28,"user_id":19429448,"display_name":"Muhamad DiarFadillah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656470714,"creation_date":1656470714,"answer_id":72795220,"question_id":72795201,"body_markdown":"Consider that you should use `setContentView(binding.getRoot());` in your `onCreate` method.","title":"Why is onCreate() method not being called?","body":"<p>Consider that you should use <code>setContentView(binding.getRoot());</code> in your <code>onCreate</code> method.</p>\n"}],"owner":{"display_name":"user17378410"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656508376,"creation_date":1656470478,"question_id":72795201,"body_markdown":"I made a new class and I wanted to make an OnClickListener for a button but I notice that the onCreate wasn&#39;t being called. Any help is appreciated.\r\n\r\n\r\n    public class BedtimeBottomSheet extends Activity {\r\n\r\n        private static final String TAG = &quot;BedtimeBottomSheet&quot;;\r\n\r\n\r\n        @Override\r\n        protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n\r\n            Log.d(TAG, &quot;onCreate: &quot;);\r\n        }\r\n    }\r\n\r\n","title":"Why is onCreate() method not being called?","body":"<p>I made a new class and I wanted to make an OnClickListener for a button but I notice that the onCreate wasn't being called. Any help is appreciated.</p>\n<pre><code>public class BedtimeBottomSheet extends Activity {\n\n    private static final String TAG = &quot;BedtimeBottomSheet&quot;;\n\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        Log.d(TAG, &quot;onCreate: &quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","byte-buddy"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1656408552,"post_id":72783366,"comment_id":128558950,"body_markdown":"I suppose, when you use `FixedValue.value()` with something that is not a compile-time constant, it will add a new field to hold the value. Use something like a delegation to a static method that returns the value instead.","body":"I suppose, when you use <code>FixedValue.value()</code> with something that is not a compile-time constant, it will add a new field to hold the value. Use something like a delegation to a static method that returns the value instead."}],"answers":[{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656508325,"creation_date":1656508325,"answer_id":72802016,"question_id":72783366,"body_markdown":"As Holger points put: you cannot add fields to loaded classes. If You set a Method delegation to a static method, the problem will not occur.\r\n\r\nIn the static method, you could for example keep a weak map of instances (via @Origin) to these objects and read the return value from there.","title":"Bytebuddy method interceptor not working with self defined class","body":"<p>As Holger points put: you cannot add fields to loaded classes. If You set a Method delegation to a static method, the problem will not occur.</p>\n<p>In the static method, you could for example keep a weak map of instances (via @Origin) to these objects and read the return value from there.</p>\n"}],"owner":{"account_id":5126879,"reputation":1733,"user_id":4108584,"accept_rate":43,"display_name":"Jakim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1656508325,"creation_date":1656405961,"question_id":72783366,"body_markdown":"I am new to bytebuddy, given class Foo and Bar:\r\n\r\n```java\r\nclass Foo {\r\n  public String hello() {\r\n    return &quot;greeting&quot;\r\n  }\r\n}\r\n\r\nclass Bar {\r\n  public Greet hello() {\r\n    return new Greet(&quot;greeting&quot;);\r\n  }\r\n}\r\n\r\nclass Greet {\r\n  private String message;\r\n  Greet(String message) {\r\n    this.message = message;\r\n  }\r\n}\r\n```\r\n\r\nThen if I try to redefine Foo&#39;s hello, it works, but I cannot make it work for Bar:\r\n\r\n```\r\n\r\n//worked\r\nByteBuddyAgent.install();\r\nnew ByteBuddy()\r\n  .redefine(Foo.class)\r\n  .method(named(&quot;hello&quot;))\r\n  .intercept(FixedValue.value(&quot;modified greeting&quot;))\r\n  .make()\r\n  .load(getClass().getClassLoader(), ClassReloadingStrategy.fromInstalledAgent())\r\n  .getLoaded()\r\n  .newInstance()\r\n  .hello();\r\n\r\n//gives error\r\nByteBuddyAgent.install();\r\nnew ByteBuddy()\r\n  .redefine(Bar.class)\r\n  .method(named(&quot;hello&quot;))\r\n  .intercept(FixedValue.value(new Greeting(&quot;modified greeting&quot;)))\r\n  .make()\r\n  .load(getClass().getClassLoader(), ClassReloadingStrategy.fromInstalledAgent())\r\n  .getLoaded()\r\n  .newInstance()\r\n  .hello();\r\n```\r\n\r\nit gives error:\r\n``` \r\njava.lang.UnsupportedOperationException: class redefinition failed: attempted to change the schema (add/remove fields)\r\n```\r\n\r\nHow can I make it work for Bar?","title":"Bytebuddy method interceptor not working with self defined class","body":"<p>I am new to bytebuddy, given class Foo and Bar:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Foo {\n  public String hello() {\n    return &quot;greeting&quot;\n  }\n}\n\nclass Bar {\n  public Greet hello() {\n    return new Greet(&quot;greeting&quot;);\n  }\n}\n\nclass Greet {\n  private String message;\n  Greet(String message) {\n    this.message = message;\n  }\n}\n</code></pre>\n<p>Then if I try to redefine Foo's hello, it works, but I cannot make it work for Bar:</p>\n<pre><code>\n//worked\nByteBuddyAgent.install();\nnew ByteBuddy()\n  .redefine(Foo.class)\n  .method(named(&quot;hello&quot;))\n  .intercept(FixedValue.value(&quot;modified greeting&quot;))\n  .make()\n  .load(getClass().getClassLoader(), ClassReloadingStrategy.fromInstalledAgent())\n  .getLoaded()\n  .newInstance()\n  .hello();\n\n//gives error\nByteBuddyAgent.install();\nnew ByteBuddy()\n  .redefine(Bar.class)\n  .method(named(&quot;hello&quot;))\n  .intercept(FixedValue.value(new Greeting(&quot;modified greeting&quot;)))\n  .make()\n  .load(getClass().getClassLoader(), ClassReloadingStrategy.fromInstalledAgent())\n  .getLoaded()\n  .newInstance()\n  .hello();\n</code></pre>\n<p>it gives error:</p>\n<pre><code>java.lang.UnsupportedOperationException: class redefinition failed: attempted to change the schema (add/remove fields)\n</code></pre>\n<p>How can I make it work for Bar?</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1656507999,"post_id":72801870,"comment_id":128589715,"body_markdown":"You want the pizza constructor to construct a sandwich when called. Do you think that&#39;s possible? What is the practicality of this? If the pizza constructor construct a sandwich, how would you then construct a pizza? What does the sandwich constructor construct?","body":"You want the pizza constructor to construct a sandwich when called. Do you think that&#39;s possible? What is the practicality of this? If the pizza constructor construct a sandwich, how would you then construct a pizza? What does the sandwich constructor construct?"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1656508055,"post_id":72801870,"comment_id":128589746,"body_markdown":"This is impossible, @Notlimitedwolf. Stack Trace just gives you &#39;Class1&#39;, it doesn&#39;t give you _the instance_.","body":"This is impossible, @Notlimitedwolf. Stack Trace just gives you &#39;Class1&#39;, it doesn&#39;t give you <i>the instance</i>."},{"owner":{"account_id":17755377,"reputation":15,"user_id":12983404,"display_name":"Notlimitedwolf"},"score":0,"creation_date":1656508191,"post_id":72801870,"comment_id":128589814,"body_markdown":"@hfontanez You have missed the idea. I do not want to create another instance of Class1, I just want to get the one that called it. Better example with human and sandwich: I don&#39;t want sandwich to create new human, I just want sandwich to know its creator without passing it into parameters","body":"@hfontanez You have missed the idea. I do not want to create another instance of Class1, I just want to get the one that called it. Better example with human and sandwich: I don&#39;t want sandwich to create new human, I just want sandwich to know its creator without passing it into parameters"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1656508721,"post_id":72801870,"comment_id":128590035,"body_markdown":"@Notlimitedwolf The relationship (in Java) between an object instance and the creator (the entity calling the constructor) is not preserved. You must do this yourself if it is important to you. Because you need to establish it, it cannot be done without passing some kind of parameter.","body":"@Notlimitedwolf The relationship (in Java) between an object instance and the creator (the entity calling the constructor) is not preserved. You must do this yourself if it is important to you. Because you need to establish it, it cannot be done without passing some kind of parameter."},{"owner":{"account_id":17755377,"reputation":15,"user_id":12983404,"display_name":"Notlimitedwolf"},"score":0,"creation_date":1656509025,"post_id":72801870,"comment_id":128590154,"body_markdown":"@hfontanez a solution by daniu was exactly the one that I was looking for. It obtains Class1 and provides an ability to get some fields","body":"@hfontanez a solution by daniu was exactly the one that I was looking for. It obtains Class1 and provides an ability to get some fields"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1656509269,"post_id":72801870,"comment_id":128590283,"body_markdown":"@Notlimitedwolf Perhaps you need to read the comment I posted there. The association between &quot;Human&quot; and &quot;Sandwich&quot; is technically speaking NOT what you requested. There is a reason why in UML there&#39;s no &quot;created by&quot; relationship.","body":"@Notlimitedwolf Perhaps you need to read the comment I posted there. The association between &quot;Human&quot; and &quot;Sandwich&quot; is technically speaking NOT what you requested. There is a reason why in UML there&#39;s no &quot;created by&quot; relationship."}],"answers":[{"tags":[],"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1656508039,"creation_date":1656508039,"answer_id":72801943,"question_id":72801870,"body_markdown":"If you really need the instance of `Class1`, and not just the class name, then the only way would be something like this:\r\n\r\nIn `Class1`:\r\n\r\n    public doStuff() {\r\n        this.field = new Class2(this);\r\n    }\r\n\r\nIn `Class2`:\r\n\r\n    public Class2(Class1 instance) {\r\n        // do whatever you need with the Class1 instance)\r\n    }","title":"Is it possible to get instance of a class 2 where constructor of class 1 was called?","body":"<p>If you really need the instance of <code>Class1</code>, and not just the class name, then the only way would be something like this:</p>\n<p>In <code>Class1</code>:</p>\n<pre><code>public doStuff() {\n    this.field = new Class2(this);\n}\n</code></pre>\n<p>In <code>Class2</code>:</p>\n<pre><code>public Class2(Class1 instance) {\n    // do whatever you need with the Class1 instance)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1656508299,"creation_date":1656508299,"answer_id":72802008,"question_id":72801870,"body_markdown":"Since your `Class2` always seems to require a `Class1` object, this might be a pretty good case for an inner class.\r\n\r\n```\r\npublic class Class1 {\r\n    private Class2 field;\r\n    public doStuff() {\r\n         this.field = new Class2();\r\n    }\r\n\r\n    // Class2 is an inner class of Class1\r\n    public class Class2 {\r\n        public Class1 getCreatingClass1Instance() {\r\n           return Class1.this;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhether this actually makes sense for you depends on the context. Your &quot;get the `Human` that made the `Sandwich` is not one.","title":"Is it possible to get instance of a class 2 where constructor of class 1 was called?","body":"<p>Since your <code>Class2</code> always seems to require a <code>Class1</code> object, this might be a pretty good case for an inner class.</p>\n<pre><code>public class Class1 {\n    private Class2 field;\n    public doStuff() {\n         this.field = new Class2();\n    }\n\n    // Class2 is an inner class of Class1\n    public class Class2 {\n        public Class1 getCreatingClass1Instance() {\n           return Class1.this;\n        }\n    }\n}\n</code></pre>\n<p>Whether this actually makes sense for you depends on the context. Your &quot;get the <code>Human</code> that made the <code>Sandwich</code> is not one.</p>\n"}],"owner":{"account_id":17755377,"reputation":15,"user_id":12983404,"display_name":"Notlimitedwolf"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72802008,"answer_count":2,"score":0,"last_activity_date":1656508299,"creation_date":1656507690,"question_id":72801870,"body_markdown":"Lets imagine this situation: we have Class1 and Class2\r\n\r\n    public class Class1 {\r\n        private Class2 field;\r\n        public Class1() {}\r\n        public doStuff() {\r\n             this.field = new Class2();\r\n        }\r\n    }\r\n    public class Class2 {\r\n        public Class2() {} //get Class1 instance that has called this method\r\n    }\r\n\r\nI want to know if it is possible to get Class1 instance in Class2 constructor somehow.  \r\nI&#39;ve been thinking about viewing a stack trace but it looks like a bad way","title":"Is it possible to get instance of a class 2 where constructor of class 1 was called?","body":"<p>Lets imagine this situation: we have Class1 and Class2</p>\n<pre><code>public class Class1 {\n    private Class2 field;\n    public Class1() {}\n    public doStuff() {\n         this.field = new Class2();\n    }\n}\npublic class Class2 {\n    public Class2() {} //get Class1 instance that has called this method\n}\n</code></pre>\n<p>I want to know if it is possible to get Class1 instance in Class2 constructor somehow.<br />\nI've been thinking about viewing a stack trace but it looks like a bad way</p>\n"},{"tags":["java","string","substring","partial"],"comments":[{"owner":{"account_id":8440460,"reputation":16742,"user_id":6849682,"accept_rate":33,"display_name":"bigbounty"},"score":0,"creation_date":1504986803,"post_id":46134568,"comment_id":79231276,"body_markdown":"Use regex in java. java.util.regex","body":"Use regex in java. java.util.regex"},{"owner":{"account_id":9906199,"reputation":194,"user_id":7334645,"accept_rate":100,"display_name":"DannyBoy"},"score":0,"creation_date":1504987142,"post_id":46134568,"comment_id":79231363,"body_markdown":"I edited my question, can i still use regex?","body":"I edited my question, can i still use regex?"},{"owner":{"account_id":7311725,"reputation":653,"user_id":5570652,"display_name":"Charu Rajput"},"score":0,"creation_date":1504987348,"post_id":46134568,"comment_id":79231410,"body_markdown":"Use indexOf()method. Index of method give index of matching string. So it its value is greater than -1, that means seach string exist in list and you can use that string.","body":"Use indexOf()method. Index of method give index of matching string. So it its value is greater than -1, that means seach string exist in list and you can use that string."}],"answers":[{"tags":[],"owner":{"account_id":1592127,"reputation":18171,"user_id":1475228,"accept_rate":84,"display_name":"Pritam Banerjee"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1504987278,"creation_date":1504987278,"answer_id":46134648,"question_id":46134568,"body_markdown":"You can do something like this by adding a `if` condition:\r\n\r\n    for(int i =0;i&lt;items.size();++i){\r\n        if (list.contains(items.valueAt(i))) {\r\n            TextBlock item = items.valueAt(i);\r\n            if(item.getValue().indexOf(&quot;Your String&quot;) &gt; -1){\r\n              stringBuilder.append(item.getValue());\r\n              stringBuilder.append(&quot;\\n&quot;);\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\nIn place of `your string` use the string value you want to search for.","title":"Java find partially matching string from list","body":"<p>You can do something like this by adding a <code>if</code> condition:</p>\n\n<pre><code>for(int i =0;i&lt;items.size();++i){\n    if (list.contains(items.valueAt(i))) {\n        TextBlock item = items.valueAt(i);\n        if(item.getValue().indexOf(\"Your String\") &gt; -1){\n          stringBuilder.append(item.getValue());\n          stringBuilder.append(\"\\n\");\n        }\n\n    }\n}\n</code></pre>\n\n<p>In place of <code>your string</code> use the string value you want to search for.</p>\n"},{"tags":[],"owner":{"account_id":7311725,"reputation":653,"user_id":5570652,"display_name":"Charu Rajput"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1504987526,"creation_date":1504987526,"answer_id":46134677,"question_id":46134568,"body_markdown":"Use indexOf()method. Index of method give index of matching string. So it its value is greater than -1, that means seach string exist in list and you can use that string.","title":"Java find partially matching string from list","body":"<p>Use indexOf()method. Index of method give index of matching string. So it its value is greater than -1, that means seach string exist in list and you can use that string.</p>\n"},{"tags":[],"owner":{"account_id":3366602,"reputation":611,"user_id":2827025,"display_name":"anemomylos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1504987630,"creation_date":1504987630,"answer_id":46134688,"question_id":46134568,"body_markdown":"You can use the `startsWith` method of `String`. If `ocrString` has value `BigSizeScrew   45**` then execute a `for` loop to the list with the strings to match, and `if(ocrString.startsWith(list.get(i)) then ...`.","title":"Java find partially matching string from list","body":"<p>You can use the <code>startsWith</code> method of <code>String</code>. If <code>ocrString</code> has value <code>BigSizeScrew   45**</code> then execute a <code>for</code> loop to the list with the strings to match, and <code>if(ocrString.startsWith(list.get(i)) then ...</code>.</p>\n"},{"tags":[],"owner":{"account_id":10512053,"reputation":44,"user_id":7747422,"display_name":"Joshua West"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504988064,"creation_date":1504988064,"answer_id":46134737,"question_id":46134568,"body_markdown":"I think you may actually want a fuzzy sentence matcher. If letters are not captured by the optics you&#39;ll need to interpolate what they might be. It gets into NLP but might be the proper way to implement.\r\n\r\nHere is a link to Smith-Waterman wikipedia: https://en.wikipedia.org/wiki/Smith%E2%80%93Waterman_algorithm\r\n\r\nLeveshtein Distance:\r\nhttps://en.wikipedia.org/wiki/Levenshtein_distance\r\n\r\nThere are various implementations and libraries to do a single function call on each statement read. &quot;Local sentence alignment&quot; is the problem you are trying to solve. Forget exact match when screen readers are involved expect human and computer error.","title":"Java find partially matching string from list","body":"<p>I think you may actually want a fuzzy sentence matcher. If letters are not captured by the optics you'll need to interpolate what they might be. It gets into NLP but might be the proper way to implement.</p>\n\n<p>Here is a link to Smith-Waterman wikipedia: <a href=\"https://en.wikipedia.org/wiki/Smith%E2%80%93Waterman_algorithm\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Smith%E2%80%93Waterman_algorithm</a></p>\n\n<p>Leveshtein Distance:\n<a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Levenshtein_distance</a></p>\n\n<p>There are various implementations and libraries to do a single function call on each statement read. \"Local sentence alignment\" is the problem you are trying to solve. Forget exact match when screen readers are involved expect human and computer error.</p>\n"},{"tags":[],"owner":{"account_id":2583683,"reputation":21,"user_id":2239844,"display_name":"Yannis Thanasoulas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656507591,"creation_date":1656507591,"answer_id":72801849,"question_id":46134568,"body_markdown":"__A regex approach to the problem:__\r\n\r\n\r\n        List&lt;String&gt; testInput = Arrays.asList(new String[]{\r\n                &quot;BigSizeScrewA   45**&quot;,\r\n                &quot;BigSizeScrewB   45**&quot;,\r\n                &quot;BigSizeScrewC   45**&quot;,\r\n                &quot;BigSizeScrewD   45**&quot;,\r\n                &quot;BigSizeScrewE   45**&quot;,\r\n        });\r\n\r\n        Pattern pattern = Pattern.compile(&quot;\\\\w+&quot;);\r\n        for (String test : testInput) {\r\n            Matcher matcher = pattern.matcher(test);\r\n            if (matcher.find()) {\r\n                System.out.println(matcher.group());\r\n            }\r\n        }\r\n\r\n__output:__\r\n```\r\nBigSizeScrewA\r\nBigSizeScrewB\r\nBigSizeScrewC\r\nBigSizeScrewD\r\nBigSizeScrewE\r\n```","title":"Java find partially matching string from list","body":"<p><strong>A regex approach to the problem:</strong></p>\n<pre><code>    List&lt;String&gt; testInput = Arrays.asList(new String[]{\n            &quot;BigSizeScrewA   45**&quot;,\n            &quot;BigSizeScrewB   45**&quot;,\n            &quot;BigSizeScrewC   45**&quot;,\n            &quot;BigSizeScrewD   45**&quot;,\n            &quot;BigSizeScrewE   45**&quot;,\n    });\n\n    Pattern pattern = Pattern.compile(&quot;\\\\w+&quot;);\n    for (String test : testInput) {\n        Matcher matcher = pattern.matcher(test);\n        if (matcher.find()) {\n            System.out.println(matcher.group());\n        }\n    }\n</code></pre>\n<p><strong>output:</strong></p>\n<pre><code>BigSizeScrewA\nBigSizeScrewB\nBigSizeScrewC\nBigSizeScrewD\nBigSizeScrewE\n</code></pre>\n"}],"owner":{"account_id":9906199,"reputation":194,"user_id":7334645,"accept_rate":100,"display_name":"DannyBoy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2943,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":46134688,"answer_count":5,"score":2,"last_activity_date":1656507591,"creation_date":1504986691,"question_id":46134568,"body_markdown":"So Im creating an optical text reader using google camera api for OCR. When reaeding from the camera i want to filter the read strings by matching them to a list of strings and if the read string partially matches, the item from the list gets added and displayed.\r\n\r\nEverything but the filtering works.\r\n\r\nSay i have a list containing the string:\r\n\r\n    &quot;BigSizeScrew   45**&quot;\r\n\r\nI want to match the read string:\r\n\r\n    &quot;BigSizeScrew&quot;\r\n\r\n...to the one with the number and then add the string containing the number too.\r\n\r\nThe number and stars are for another reason but must be kept, the reason is irrelevant to the question.\r\n\r\ntl;dr:\r\n\r\nHow do i match partially match a string to an existing string from a list?\r\n\r\nI have the following but it exclusively searches for a 100% matching string, not if the checked string contains a substring of the read string.\r\n\r\n    for(int i =0;i&lt;items.size();++i){\r\n        if (list.contains(items.valueAt(i))) {\r\n            TextBlock item = items.valueAt(i);\r\n            stringBuilder.append(item.getValue());\r\n            stringBuilder.append(&quot;\\n&quot;);\r\n        }\r\n    }\r\n\r\nEDIT:\r\n\r\nThe list contains approx 200 different strings that should be matchable partially. But all in the same way; Partially matching the main string but not the numbers/stars.","title":"Java find partially matching string from list","body":"<p>So Im creating an optical text reader using google camera api for OCR. When reaeding from the camera i want to filter the read strings by matching them to a list of strings and if the read string partially matches, the item from the list gets added and displayed.</p>\n\n<p>Everything but the filtering works.</p>\n\n<p>Say i have a list containing the string:</p>\n\n<pre><code>\"BigSizeScrew   45**\"\n</code></pre>\n\n<p>I want to match the read string:</p>\n\n<pre><code>\"BigSizeScrew\"\n</code></pre>\n\n<p>...to the one with the number and then add the string containing the number too.</p>\n\n<p>The number and stars are for another reason but must be kept, the reason is irrelevant to the question.</p>\n\n<p>tl;dr:</p>\n\n<p>How do i match partially match a string to an existing string from a list?</p>\n\n<p>I have the following but it exclusively searches for a 100% matching string, not if the checked string contains a substring of the read string.</p>\n\n<pre><code>for(int i =0;i&lt;items.size();++i){\n    if (list.contains(items.valueAt(i))) {\n        TextBlock item = items.valueAt(i);\n        stringBuilder.append(item.getValue());\n        stringBuilder.append(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>The list contains approx 200 different strings that should be matchable partially. But all in the same way; Partially matching the main string but not the numbers/stars.</p>\n"},{"tags":["java","android","android-image"],"answers":[{"tags":[],"owner":{"account_id":24413708,"reputation":815,"user_id":18340828,"display_name":"MohitJadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656507361,"creation_date":1656507361,"answer_id":72801800,"question_id":72801196,"body_markdown":"File imgFile = new  File(&quot;/sdcard/Images/test_image.jpg&quot;);\r\n\r\nif(imgFile.exists())\r\n{\r\n\r\n    Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());\r\n\r\n    ImageView myImage = (ImageView) findViewById(R.id.imageviewTest);\r\n\r\n    myImage.setImageBitmap(myBitmap);\r\n\r\n}","title":"Specify Gallery image for imageview","body":"<p>File imgFile = new  File(&quot;/sdcard/Images/test_image.jpg&quot;);</p>\n<p>if(imgFile.exists())\n{</p>\n<pre><code>Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());\n\nImageView myImage = (ImageView) findViewById(R.id.imageviewTest);\n\nmyImage.setImageBitmap(myBitmap);\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":25680517,"reputation":1,"user_id":19443367,"display_name":"St3v3m"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656507361,"creation_date":1656504565,"question_id":72801196,"body_markdown":"first time poster &amp; very new to Android/Java. This board has been a great help, thanks!\r\n\r\nI&#39;m having problems trying to use a string to select an exact filename for an image in my device gallery and display it in an imageview - (not browse/pick from the gallery, that works fine) and avoiding deprecated methods like startactivityforresult. \r\n\r\nI&#39;ve set Read permissions for external storage and checked the image &amp; pathname is correct using cx file explorer, but I just can&#39;t get the image to load. I&#39;ve also been trying it with Glide, trying different ways, as below. (Glide works ok when displaying a mipmap image).\r\n\r\nI can get the Toast message to show the right path/name, but still nothing in the imageview.\r\n\r\n\r\n    // File myfilename = new File(Environment.getExternalStorageDirectory().getPath()+&quot;/DCIM/my_gallery_image.png&quot;);\r\n    // File myfilename = new File(Environment.getExternalStorageDirectory().getPath(), &quot;/my_gallery_image.png&quot;);\r\n    // File myfilename = new File(Environment.getExternalStorageDirectory().toString(),&quot;/images/my_gallery_image.png&quot;);\r\n    // File myfilename = new File(getExternalCacheDir() + &quot;/images/my_gallery_image.png&quot;);\r\n    // File myfilename = new File (&quot;/mnt/sdcard/0&quot; + &quot;/images/my_gallery_image.png&quot;);\r\n    // File myfilename = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), &quot;/images/my_gallery_image.png&quot;);\r\n    // File myfilename = new File(Environment.getExternalStorageDirectory().getPath(), &quot;/images/my_gallery_image.png&quot;);\r\n    // Uri myfilename = Uri.fromFile( new File(Environment.getExternalStorageDirectory().getPath()+&quot;/images/my_gallery_image.png&quot;));\r\n    //\r\n    // GlideApp\r\n    // .with(context)\r\n    // .load(file)\r\n    // .into(imageViewFile);\r\n    //\r\n    // File myfilename = new File(Environment.getExternalStorageDirectory()+File.separator +&quot;/DCIM/my_gallery_image.png&quot;);\r\n    \r\n    // Uri imageUri = Uri.fromFile(myfilename);\r\n    \r\n    \r\n    // Glide.with(this)\r\n    // .load(new File(Environment.getExternalStorageDirectory().getPath(), &quot;/images/my_gallery_image.png&quot;))\r\n    // .load (Uri.parse(myfilename))\r\n    // .load(Uri.fromFile(myfilename))\r\n    // .load (imageUri.getPath())\r\n    // .load(imageUri)\r\n    // .load(myfilename)\r\n    // .load(Uri.parse (myfilename))\r\n    // .error(R.mipmap.image_error)\r\n    // .diskCacheStrategy(DiskCacheStrategy.ALL) \r\n    // .into(imageView_H);\r\n    \r\n    // Toast toastf = Toast.makeText(getApplicationContext(), &quot;= &quot; + imageUri.getPath(), Toast.LENGTH_LONG);\r\n    // toastf.show();\r\n\r\n\r\nAny ideas please?","title":"Specify Gallery image for imageview","body":"<p>first time poster &amp; very new to Android/Java. This board has been a great help, thanks!</p>\n<p>I'm having problems trying to use a string to select an exact filename for an image in my device gallery and display it in an imageview - (not browse/pick from the gallery, that works fine) and avoiding deprecated methods like startactivityforresult.</p>\n<p>I've set Read permissions for external storage and checked the image &amp; pathname is correct using cx file explorer, but I just can't get the image to load. I've also been trying it with Glide, trying different ways, as below. (Glide works ok when displaying a mipmap image).</p>\n<p>I can get the Toast message to show the right path/name, but still nothing in the imageview.</p>\n<pre><code>// File myfilename = new File(Environment.getExternalStorageDirectory().getPath()+&quot;/DCIM/my_gallery_image.png&quot;);\n// File myfilename = new File(Environment.getExternalStorageDirectory().getPath(), &quot;/my_gallery_image.png&quot;);\n// File myfilename = new File(Environment.getExternalStorageDirectory().toString(),&quot;/images/my_gallery_image.png&quot;);\n// File myfilename = new File(getExternalCacheDir() + &quot;/images/my_gallery_image.png&quot;);\n// File myfilename = new File (&quot;/mnt/sdcard/0&quot; + &quot;/images/my_gallery_image.png&quot;);\n// File myfilename = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), &quot;/images/my_gallery_image.png&quot;);\n// File myfilename = new File(Environment.getExternalStorageDirectory().getPath(), &quot;/images/my_gallery_image.png&quot;);\n// Uri myfilename = Uri.fromFile( new File(Environment.getExternalStorageDirectory().getPath()+&quot;/images/my_gallery_image.png&quot;));\n//\n// GlideApp\n// .with(context)\n// .load(file)\n// .into(imageViewFile);\n//\n// File myfilename = new File(Environment.getExternalStorageDirectory()+File.separator +&quot;/DCIM/my_gallery_image.png&quot;);\n\n// Uri imageUri = Uri.fromFile(myfilename);\n\n\n// Glide.with(this)\n// .load(new File(Environment.getExternalStorageDirectory().getPath(), &quot;/images/my_gallery_image.png&quot;))\n// .load (Uri.parse(myfilename))\n// .load(Uri.fromFile(myfilename))\n// .load (imageUri.getPath())\n// .load(imageUri)\n// .load(myfilename)\n// .load(Uri.parse (myfilename))\n// .error(R.mipmap.image_error)\n// .diskCacheStrategy(DiskCacheStrategy.ALL) \n// .into(imageView_H);\n\n// Toast toastf = Toast.makeText(getApplicationContext(), &quot;= &quot; + imageUri.getPath(), Toast.LENGTH_LONG);\n// toastf.show();\n</code></pre>\n<p>Any ideas please?</p>\n"},{"tags":["java","javafx","combobox","controller","invocationtargetexception"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1656506297,"post_id":72801387,"comment_id":128588928,"body_markdown":"Please don&#39;t format stack traces as quote blocks. It makes it harder to read. You should format stack traces as _code_ blocks. If you can&#39;t because Stack Overflow says something like, &quot;too much code&quot;, then it&#39;s better to just not format the stack trace at all and let another user edit your question for you (as opposed to adding `&gt;` to every line, as that messes up the line separators of the original stack trace, which is non-trivial to fix).","body":"Please don&#39;t format stack traces as quote blocks. It makes it harder to read. You should format stack traces as <i>code</i> blocks. If you can&#39;t because Stack Overflow says something like, &quot;too much code&quot;, then it&#39;s better to just not format the stack trace at all and let another user edit your question for you (as opposed to adding <code>&gt;</code> to every line, as that messes up the line separators of the original stack trace, which is non-trivial to fix)."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1656506466,"post_id":72801387,"comment_id":128589010,"body_markdown":"As for your error, the problem is rooted in trying to use the same controller class with multiple FXML files. Don&#39;t do this. By default, each time you load an FXML file, a **new** instance of the controller class is created, and only the fields associated with the _one_ FXML file are injected. This makes it difficult to reason about which fields are `null` and when. The relationship between controller classes and FXML files should be _one-to-one_.","body":"As for your error, the problem is rooted in trying to use the same controller class with multiple FXML files. Don&#39;t do this. By default, each time you load an FXML file, a <b>new</b> instance of the controller class is created, and only the fields associated with the <i>one</i> FXML file are injected. This makes it difficult to reason about which fields are <code>null</code> and when. The relationship between controller classes and FXML files should be <i>one-to-one</i>."},{"owner":{"account_id":24132809,"reputation":121,"user_id":18100205,"display_name":"Lilian Carion"},"score":0,"creation_date":1656506494,"post_id":72801387,"comment_id":128589027,"body_markdown":"I edited my post, the problem is if I use the code block, the exception is written on a single line...\nSo I just deleted the code format @Slaw","body":"I edited my post, the problem is if I use the code block, the exception is written on a single line... So I just deleted the code format @Slaw"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1656506500,"post_id":72801387,"comment_id":128589029,"body_markdown":"The variables are not reset to null. When you load the FXML a new instance of the controller is created, so you have a whole new set of instance variables. Use a different controller class for each fxml file, and pass data between the controllers as shown in the duplicate.","body":"The variables are not reset to null. When you load the FXML a new instance of the controller is created, so you have a whole new set of instance variables. Use a different controller class for each fxml file, and pass data between the controllers as shown in the duplicate."},{"owner":{"account_id":24132809,"reputation":121,"user_id":18100205,"display_name":"Lilian Carion"},"score":0,"creation_date":1656506603,"post_id":72801387,"comment_id":128589083,"body_markdown":"Alright, so I should create a new controller in which I put my selectImmatBusValue field ?","body":"Alright, so I should create a new controller in which I put my selectImmatBusValue field ?"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1656507103,"post_id":72801387,"comment_id":128589317,"body_markdown":"this smells like a repost of a deleted question .. is it? If so: don&#39;t (too many deletes might lead to the suspension of your account) - instead edit the previous to make it answerable. BTW: when posting a code example that doesn&#39;t work, make sure it&#39;s a [mcve] .. minding the __M__! - if you did, you wouldn&#39;t run into the limit which prevents you from formatting the stacktrace as code ;)","body":"this smells like a repost of a deleted question .. is it? If so: don&#39;t (too many deletes might lead to the suspension of your account) - instead edit the previous to make it answerable. BTW: when posting a code example that doesn&#39;t work, make sure it&#39;s a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> .. minding the <b>M</b>! - if you did, you wouldn&#39;t run into the limit which prevents you from formatting the stacktrace as code ;)"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1656507446,"post_id":72801387,"comment_id":128589477,"body_markdown":"&quot;_Alright, so I should create a new controller in which I put my selectImmatBusValue field ?_&quot;  If by &quot;create a new controller&quot; you mean creating a new controller **class**, then yes. Make a separate controller class for each of your FXML files. If you need to communicate between the different views, then check out the duplicate.","body":"&quot;<i>Alright, so I should create a new controller in which I put my selectImmatBusValue field ?</i>&quot;  If by &quot;create a new controller&quot; you mean creating a new controller <b>class</b>, then yes. Make a separate controller class for each of your FXML files. If you need to communicate between the different views, then check out the duplicate."}],"owner":{"account_id":24132809,"reputation":121,"user_id":18100205,"display_name":"Lilian Carion"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1656506538,"answer_count":0,"score":0,"last_activity_date":1656507354,"creation_date":1656505409,"question_id":72801387,"body_markdown":"So I&#39;m using JavaFx for my application, and what I&#39;m trying to do is:\r\nOn my first page, I select an object through one of its properties with a ComboBox. I store this property in a variable in my controller, and then I load a new page in which I retrieve my variable, do a SELECT in my database using the property I previously stored, and change the values of some text fields using my retrieved object(within the query).\r\n\r\nThere is the code of my Controller:\r\n\r\n    package fr.agglomistral.controller;\r\n    \r\n    import fr.agglomistral.classedao.BusDAO;\r\n    import fr.agglomistral.classedao.LigneDAO;\r\n    import fr.agglomistral.classedao.ParcoursDAO;\r\n    import fr.agglomistral.classedao.StationDAO;\r\n    import fr.agglomistral.classemetier.Bus;\r\n    import fr.agglomistral.classemetier.Ligne;\r\n    import fr.agglomistral.classemetier.Parcours;\r\n    import fr.agglomistral.classemetier.Station;\r\n    import fr.agglomistral.outils.ConnexionMysql;\r\n    import javafx.event.ActionEvent;\r\n    import javafx.fxml.FXML;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Node;\r\n    import javafx.scene.Parent;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Alert;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.ComboBox;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.scene.image.Image;\r\n    import javafx.scene.input.MouseEvent;\r\n    import javafx.stage.Stage;\r\n    import javafx.stage.Window;\r\n    \r\n    import javax.xml.transform.Result;\r\n    import java.io.IOException;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    \r\n    public class GestionnaireController {\r\n        @FXML\r\n        private Stage stage;\r\n        @FXML\r\n        private Scene scene;\r\n        @FXML\r\n        private Parent root;\r\n        @FXML\r\n        public Button logout;\r\n        @FXML\r\n        public Button back;\r\n    \r\n        //Bus related parameters\r\n        @FXML\r\n        public Button manageBus;\r\n        @FXML\r\n        private Button createBus;\r\n        @FXML\r\n        private TextField marqueField;\r\n        @FXML\r\n        private TextField immatriculationField;\r\n        @FXML\r\n        private TextField placesAssisesField;\r\n        @FXML\r\n        private TextField placesDeboutField;\r\n        @FXML\r\n        public ComboBox&lt;String&gt; selectImmatBus;\r\n        @FXML\r\n        public Button deleteBus;\r\n        private Boolean busIsAdded = false;\r\n        @FXML\r\n        public Button updateBus;\r\n        @FXML\r\n        public TextField marqueUpdateField;\r\n        @FXML\r\n        public TextField immatriculationUpdateField;\r\n        @FXML\r\n        public TextField placesAssisesUpdateField;\r\n        @FXML\r\n        public TextField placesDeboutUpdateField;\r\n        @FXML\r\n        private String selectImmatBusValue;\r\n    \r\n    \r\n    public void openGestionBus(ActionEvent actionEvent) {\r\n            try {\r\n                root = FXMLLoader.load(getClass().getResource(&quot;/fr/agglomistral/vues/gestionnaire/bus/GestionBus.fxml&quot;));\r\n                stage =(Stage)((Node)actionEvent.getSource()).getScene().getWindow();\r\n                scene = new Scene(root,1200,700);\r\n                Image favicon = new Image(getClass().getResourceAsStream(&quot;/fr/agglomistral/vues/LogoFini.png&quot;));\r\n                stage.getIcons().add(favicon);\r\n                stage.setTitle(&quot;AggloMistral-Gestion des Bus&quot;);\r\n                stage.setScene(scene);\r\n                stage.show();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n    \r\n        public void openUpdateBus(ActionEvent actionEvent) {\r\n            try {\r\n                root = FXMLLoader.load(getClass().getResource(&quot;/fr/agglomistral/vues/gestionnaire/bus/UpdateBus.fxml&quot;));\r\n                stage =(Stage)((Node)actionEvent.getSource()).getScene().getWindow();\r\n                scene = new Scene(root,1200,700);\r\n                Image favicon = new Image(getClass().getResourceAsStream(&quot;/fr/agglomistral/vues/LogoFini.png&quot;));\r\n                stage.getIcons().add(favicon);\r\n                stage.setTitle(&quot;AggloMistral-Mettre &#224; Jour un Bus&quot;);\r\n                stage.setScene(scene);\r\n                stage.show();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n    \r\n    public void openBusUpdateForm(ActionEvent actionEvent) {\r\n            try {\r\n                selectImmatBusValue = selectImmatBus.getValue();\r\n                root = FXMLLoader.load(getClass().getResource(&quot;/fr/agglomistral/vues/gestionnaire/bus/BusUpdateForm.fxml&quot;));\r\n                stage =(Stage)((Node)actionEvent.getSource()).getScene().getWindow();\r\n                scene = new Scene(root,1200,700);\r\n                Image favicon = new Image(getClass().getResourceAsStream(&quot;/fr/agglomistral/vues/LogoFini.png&quot;));\r\n                stage.getIcons().add(favicon);\r\n                stage.setTitle(&quot;AggloMistral-Mettre &#224; Jour un Bus&quot;);\r\n                stage.setScene(scene);\r\n                stage.show();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n        }\r\n    \r\n    public void addBusToList() throws SQLException {\r\n            if (!busIsAdded) {\r\n                BusDAO busDAO = new BusDAO();\r\n                ResultSet listeBus = busDAO.index();\r\n                while (listeBus.next()){\r\n                    String immat = listeBus.getString(&quot;IMMATRICULATION&quot;);\r\n                    selectImmatBus.getItems().add(immat);\r\n                }\r\n                busIsAdded = true;\r\n            }\r\n        }\r\n    \r\n        public void fillBusPlaceholders (Bus bus) {\r\n            marqueUpdateField.setText(bus.getMarque());\r\n            immatriculationUpdateField.setText(bus.getImmatriculation());\r\n            placesAssisesUpdateField.setText(String.valueOf(bus.getNbplacesassises()));\r\n            placesDeboutUpdateField.setText(String.valueOf(bus.getNbplacesdebout()));\r\n        }\r\n    \r\n    \r\n        public void aaaa(MouseEvent mouseEvent) {\r\n            BusDAO busDAO = new BusDAO();\r\n            fillBusPlaceholders(busDAO.findByImmat(selectImmatBusValue));\r\n        }\r\n\r\nMy first page fxml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.geometry.Insets?&gt;\r\n    &lt;?import javafx.scene.control.Button?&gt;\r\n    &lt;?import javafx.scene.control.ComboBox?&gt;\r\n    &lt;?import javafx.scene.control.Label?&gt;\r\n    &lt;?import javafx.scene.image.Image?&gt;\r\n    &lt;?import javafx.scene.image.ImageView?&gt;\r\n    &lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n    &lt;?import javafx.scene.layout.ColumnConstraints?&gt;\r\n    &lt;?import javafx.scene.layout.GridPane?&gt;\r\n    &lt;?import javafx.scene.layout.RowConstraints?&gt;\r\n    &lt;?import javafx.scene.layout.VBox?&gt;\r\n    &lt;?import javafx.scene.shape.Polyline?&gt;\r\n    &lt;?import javafx.scene.text.Font?&gt;\r\n    \r\n    &lt;AnchorPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;700.0&quot; prefWidth=&quot;1200.0&quot; style=&quot;-fx-background-color: white;&quot; xmlns=&quot;http://javafx.com/javafx/18&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;fr.agglomistral.controller.GestionnaireController&quot;&gt;\r\n       &lt;children&gt;\r\n          &lt;VBox prefHeight=&quot;700.0&quot; prefWidth=&quot;1200.0&quot; style=&quot;-fx-background-color: a1e3e3;&quot;&gt;\r\n             &lt;children&gt;\r\n                &lt;ImageView fitHeight=&quot;135.0&quot; fitWidth=&quot;172.0&quot;&gt;\r\n                   &lt;image&gt;\r\n                      &lt;Image url=&quot;@../../LogoFini.png&quot; /&gt;\r\n                   &lt;/image&gt;\r\n                   &lt;VBox.margin&gt;\r\n                      &lt;Insets left=&quot;515.0&quot; /&gt;\r\n                   &lt;/VBox.margin&gt;\r\n                &lt;/ImageView&gt;\r\n                &lt;Button fx:id=&quot;back&quot; cache=&quot;true&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#openGestionBus&quot; prefHeight=&quot;0.0&quot; prefWidth=&quot;203.0&quot; style=&quot;-fx-background-color: a1e3e3; -fx-border-color: #014d6d; -fx-border-radius: 50;&quot; text=&quot;Retour&quot; textFill=&quot;#014d6d&quot;&gt;\r\n                   &lt;font&gt;\r\n                      &lt;Font name=&quot;System Bold&quot; size=&quot;18.0&quot; /&gt;\r\n                   &lt;/font&gt;\r\n                   &lt;opaqueInsets&gt;\r\n                      &lt;Insets /&gt;\r\n                   &lt;/opaqueInsets&gt;\r\n                   &lt;graphic&gt;\r\n                      &lt;Polyline fill=&quot;#014d6d&quot; points=&quot;-34.5, 29.0, -19.5, 19.5, -20.5, 41.0, -33.5, 29.0&quot; stroke=&quot;#014d6d&quot; strokeType=&quot;INSIDE&quot; /&gt;\r\n                   &lt;/graphic&gt;\r\n                   &lt;VBox.margin&gt;\r\n                      &lt;Insets left=&quot;34.0&quot; top=&quot;-100.0&quot; /&gt;\r\n                   &lt;/VBox.margin&gt;\r\n                &lt;/Button&gt;\r\n             &lt;/children&gt;\r\n          &lt;/VBox&gt;\r\n          &lt;GridPane hgap=&quot;10&quot; layoutX=&quot;10.0&quot; layoutY=&quot;128.0&quot; prefHeight=&quot;276.0&quot; prefWidth=&quot;837.0&quot; vgap=&quot;10&quot;&gt;\r\n             &lt;padding&gt;\r\n                &lt;Insets bottom=&quot;40.0&quot; left=&quot;350.0&quot; right=&quot;40.0&quot; top=&quot;46.0&quot; /&gt;\r\n             &lt;/padding&gt;\r\n             &lt;columnConstraints&gt;\r\n                &lt;ColumnConstraints halignment=&quot;RIGHT&quot; maxWidth=&quot;Infinity&quot; minWidth=&quot;237.0&quot; prefWidth=&quot;100.0&quot; /&gt;\r\n                &lt;ColumnConstraints hgrow=&quot;ALWAYS&quot; maxWidth=&quot;218.0&quot; minWidth=&quot;181.0&quot; prefWidth=&quot;200.0&quot; /&gt;\r\n             &lt;/columnConstraints&gt;\r\n             &lt;rowConstraints&gt;\r\n                &lt;RowConstraints /&gt;\r\n                &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; /&gt;\r\n                &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; /&gt;\r\n                &lt;RowConstraints /&gt;\r\n                &lt;RowConstraints /&gt;\r\n             &lt;/rowConstraints&gt;\r\n             &lt;children&gt;\r\n                &lt;Label text=&quot;Mettre un Bus &#224; Jour&quot; textFill=&quot;#014d6d&quot; GridPane.columnIndex=&quot;0&quot; GridPane.columnSpan=&quot;2&quot; GridPane.halignment=&quot;CENTER&quot; GridPane.rowIndex=&quot;0&quot; GridPane.rowSpan=&quot;1&quot;&gt;\r\n                   &lt;font&gt;\r\n                      &lt;Font name=&quot;Arial Bold&quot; size=&quot;24.0&quot; /&gt;\r\n                   &lt;/font&gt;\r\n                   &lt;GridPane.margin&gt;\r\n                      &lt;Insets bottom=&quot;20&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;20&quot; /&gt;\r\n                   &lt;/GridPane.margin&gt;\r\n                &lt;/Label&gt;\r\n                &lt;ComboBox fx:id=&quot;selectImmatBus&quot; editable=&quot;true&quot; onAction=&quot;#addBusToList&quot; onShowing=&quot;#addBusToList&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;171.0&quot; promptText=&quot;Immatriculation du Bus&quot; visibleRowCount=&quot;100&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;1&quot; /&gt;\r\n                &lt;Label text=&quot;S&#233;lectionnez un Bus &#224; &#233;diter :&quot; GridPane.rowIndex=&quot;1&quot;&gt;\r\n                   &lt;font&gt;\r\n                      &lt;Font size=&quot;15.0&quot; /&gt;\r\n                   &lt;/font&gt;\r\n                &lt;/Label&gt;\r\n             &lt;/children&gt;\r\n          &lt;/GridPane&gt;\r\n          &lt;Button fx:id=&quot;updateBus&quot; defaultButton=&quot;true&quot; layoutX=&quot;10.0&quot; layoutY=&quot;10.0&quot; onAction=&quot;#openBusUpdateForm&quot; prefHeight=&quot;40.0&quot; prefWidth=&quot;223.0&quot; text=&quot;Mettre le Bus &#224; Jour&quot; AnchorPane.leftAnchor=&quot;490.0&quot; AnchorPane.topAnchor=&quot;336.0&quot;&gt;\r\n             &lt;font&gt;\r\n                &lt;Font size=&quot;18.0&quot; /&gt;\r\n             &lt;/font&gt;\r\n          &lt;/Button&gt;\r\n       &lt;/children&gt;\r\n    &lt;/AnchorPane&gt;\r\n\r\n\r\nAnd the page I&#39;m opening by clicking on the first page button:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.geometry.Insets?&gt;\r\n    &lt;?import javafx.scene.control.Button?&gt;\r\n    &lt;?import javafx.scene.control.Label?&gt;\r\n    &lt;?import javafx.scene.control.TextField?&gt;\r\n    &lt;?import javafx.scene.image.Image?&gt;\r\n    &lt;?import javafx.scene.image.ImageView?&gt;\r\n    &lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n    &lt;?import javafx.scene.layout.ColumnConstraints?&gt;\r\n    &lt;?import javafx.scene.layout.GridPane?&gt;\r\n    &lt;?import javafx.scene.layout.RowConstraints?&gt;\r\n    &lt;?import javafx.scene.layout.VBox?&gt;\r\n    &lt;?import javafx.scene.shape.Polyline?&gt;\r\n    &lt;?import javafx.scene.text.Font?&gt;\r\n    \r\n    &lt;AnchorPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;700.0&quot; prefWidth=&quot;1200.0&quot; style=&quot;-fx-background-color: white;&quot; xmlns=&quot;http://javafx.com/javafx/18&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;fr.agglomistral.controller.GestionnaireController&quot;&gt;\r\n       &lt;children&gt;\r\n          &lt;VBox onMouseClicked=&quot;#aaaa&quot; prefHeight=&quot;700.0&quot; prefWidth=&quot;1200.0&quot; style=&quot;-fx-background-color: a1e3e3;&quot;&gt;\r\n             &lt;children&gt;\r\n                &lt;ImageView fitHeight=&quot;135.0&quot; fitWidth=&quot;172.0&quot;&gt;\r\n                   &lt;image&gt;\r\n                      &lt;Image url=&quot;@../../LogoFini.png&quot; /&gt;\r\n                   &lt;/image&gt;\r\n                   &lt;VBox.margin&gt;\r\n                      &lt;Insets left=&quot;515.0&quot; /&gt;\r\n                   &lt;/VBox.margin&gt;\r\n                &lt;/ImageView&gt;\r\n                &lt;Button fx:id=&quot;back&quot; cache=&quot;true&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#openGestionBus&quot; prefHeight=&quot;0.0&quot; prefWidth=&quot;203.0&quot; style=&quot;-fx-background-color: a1e3e3; -fx-border-color: #014d6d; -fx-border-radius: 50;&quot; text=&quot;Retour&quot; textFill=&quot;#014d6d&quot;&gt;\r\n                   &lt;font&gt;\r\n                      &lt;Font name=&quot;System Bold&quot; size=&quot;18.0&quot; /&gt;\r\n                   &lt;/font&gt;\r\n                   &lt;opaqueInsets&gt;\r\n                      &lt;Insets /&gt;\r\n                   &lt;/opaqueInsets&gt;\r\n                   &lt;graphic&gt;\r\n                      &lt;Polyline fill=&quot;#014d6d&quot; points=&quot;-34.5, 29.0, -19.5, 19.5, -20.5, 41.0, -33.5, 29.0&quot; stroke=&quot;#014d6d&quot; strokeType=&quot;INSIDE&quot; /&gt;\r\n                   &lt;/graphic&gt;\r\n                   &lt;VBox.margin&gt;\r\n                      &lt;Insets left=&quot;34.0&quot; top=&quot;-100.0&quot; /&gt;\r\n                   &lt;/VBox.margin&gt;\r\n                &lt;/Button&gt;\r\n                &lt;GridPane alignment=&quot;center&quot; hgap=&quot;10&quot; vgap=&quot;10&quot;&gt;\r\n                   &lt;padding&gt;\r\n                      &lt;Insets bottom=&quot;40&quot; left=&quot;40&quot; right=&quot;40&quot; top=&quot;40&quot; /&gt;\r\n                   &lt;/padding&gt;\r\n                   &lt;columnConstraints&gt;\r\n                      &lt;ColumnConstraints halignment=&quot;RIGHT&quot; maxWidth=&quot;Infinity&quot; minWidth=&quot;237.0&quot; prefWidth=&quot;100&quot; /&gt;\r\n                      &lt;ColumnConstraints hgrow=&quot;ALWAYS&quot; maxWidth=&quot;218.0&quot; minWidth=&quot;181.0&quot; prefWidth=&quot;200&quot; /&gt;\r\n                   &lt;/columnConstraints&gt;\r\n                   &lt;rowConstraints&gt;\r\n                      &lt;RowConstraints /&gt;\r\n                      &lt;RowConstraints /&gt;\r\n                      &lt;RowConstraints /&gt;\r\n                      &lt;RowConstraints /&gt;\r\n                      &lt;RowConstraints /&gt;\r\n                      &lt;RowConstraints /&gt;\r\n                      &lt;RowConstraints /&gt;\r\n                      &lt;RowConstraints /&gt;\r\n                   &lt;/rowConstraints&gt;\r\n                   &lt;children&gt;\r\n                      &lt;Label prefHeight=&quot;32.0&quot; prefWidth=&quot;229.0&quot; text=&quot;Mettre &#224; jour le Bus&quot; textAlignment=&quot;CENTER&quot; textFill=&quot;#014d6d&quot; GridPane.columnIndex=&quot;0&quot; GridPane.columnSpan=&quot;2&quot; GridPane.halignment=&quot;CENTER&quot; GridPane.rowIndex=&quot;0&quot; GridPane.rowSpan=&quot;1&quot;&gt;\r\n                         &lt;font&gt;\r\n                            &lt;Font name=&quot;Arial Bold&quot; size=&quot;24.0&quot; /&gt;\r\n                         &lt;/font&gt;\r\n                         &lt;GridPane.margin&gt;\r\n                            &lt;Insets bottom=&quot;20&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;20&quot; /&gt;\r\n                         &lt;/GridPane.margin&gt;\r\n                      &lt;/Label&gt;\r\n                      &lt;Label text=&quot;Marque :&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;2&quot;&gt;\r\n                         &lt;font&gt;\r\n                            &lt;Font size=&quot;18.0&quot; /&gt;\r\n                         &lt;/font&gt;\r\n                      &lt;/Label&gt;\r\n                      &lt;Label text=&quot;Immatriculation :&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;3&quot;&gt;\r\n                         &lt;font&gt;\r\n                            &lt;Font size=&quot;18.0&quot; /&gt;\r\n                         &lt;/font&gt;\r\n                      &lt;/Label&gt;\r\n                      &lt;Button fx:id=&quot;updateBus&quot; defaultButton=&quot;true&quot; onAction=&quot;#updateBus&quot; prefHeight=&quot;46.0&quot; prefWidth=&quot;196.0&quot; text=&quot;Mettre le Bus &#224; Jour&quot; GridPane.columnSpan=&quot;2&quot; GridPane.halignment=&quot;CENTER&quot; GridPane.rowIndex=&quot;6&quot; GridPane.rowSpan=&quot;1&quot;&gt;\r\n                         &lt;GridPane.margin&gt;\r\n                            &lt;Insets bottom=&quot;20&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;20&quot; /&gt;\r\n                         &lt;/GridPane.margin&gt;\r\n                         &lt;font&gt;\r\n                            &lt;Font size=&quot;18.0&quot; /&gt;\r\n                         &lt;/font&gt;\r\n                      &lt;/Button&gt;\r\n                      &lt;Label text=&quot;Nombre de places assises :&quot; GridPane.rowIndex=&quot;4&quot;&gt;\r\n                         &lt;font&gt;\r\n                            &lt;Font size=&quot;18.0&quot; /&gt;\r\n                         &lt;/font&gt;\r\n                      &lt;/Label&gt;\r\n                      &lt;Label text=&quot;Nombre de places debouts :&quot; GridPane.rowIndex=&quot;5&quot;&gt;\r\n                         &lt;font&gt;\r\n                            &lt;Font size=&quot;18.0&quot; /&gt;\r\n                         &lt;/font&gt;\r\n                      &lt;/Label&gt;\r\n                      &lt;TextField fx:id=&quot;marqueUpdateField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;2&quot; /&gt;\r\n                      &lt;TextField fx:id=&quot;immatriculationUpdateField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;3&quot; /&gt;\r\n                      &lt;TextField fx:id=&quot;placesAssisesUpdateField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;4&quot; /&gt;\r\n                      &lt;TextField fx:id=&quot;placesDeboutUpdateField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;5&quot; /&gt;\r\n                   &lt;/children&gt;\r\n                   &lt;VBox.margin&gt;\r\n                      &lt;Insets top=&quot;80.0&quot; /&gt;\r\n                   &lt;/VBox.margin&gt;\r\n                &lt;/GridPane&gt;\r\n             &lt;/children&gt;\r\n          &lt;/VBox&gt;\r\n       &lt;/children&gt;\r\n    &lt;/AnchorPane&gt;\r\n\r\n\r\nI&#39;m getting the following error when clicking on the 2nd page which triggers my &#39;aaaa&#39; function:\r\n\r\n```lang-none\r\nException in thread &quot;JavaFX Application Thread&quot; java.lang.RuntimeException: java.lang.reflect.InvocationTargetException \r\n\tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1857)\r\n\tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1724)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\r\n\tat javafx.base@18.0.1/javafx.event.Event.fireEvent(Event.java:198)\r\n\tat javafx.graphics@18.0.1/javafx.scene.Scene$ClickGenerator.postProcess(Scene.java:3586)\r\n\tat javafx.graphics@18.0.1/javafx.scene.Scene$MouseHandler.process(Scene.java:3890)\r\n\tat javafx.graphics@18.0.1/javafx.scene.Scene.processMouseEvent(Scene.java:1874)\r\n\tat javafx.graphics@18.0.1/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2607)\r\n\tat javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\r\n\tat javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\r\n\tat javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\r\n\tat javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\r\n\tat javafx.graphics@18.0.1/com.sun.glass.ui.View.handleMouseEvent(View.java:551)\r\n\tat javafx.graphics@18.0.1/com.sun.glass.ui.View.notifyMouse(View.java:937)\r\n\tat javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native\r\n\tat javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.lang.reflect.InvocationTargetException \r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:77)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor2.invoke(Unknown\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat javafx.base@18.0.1/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:275)\r\n\tat javafx.fxml@18.0.1/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84)\r\n\tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1852)\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;fr.agglomistral.classemetier.Bus.getMarque()&quot; because &quot;bus&quot; is null \r\n\tat fr.agglomistral.controller.GestionnaireController.fillBusPlaceholders(GestionnaireController.java:366)\r\n\tat fr.agglomistral.controller.GestionnaireController.aaaa(GestionnaireController.java:665)\r\n```\r\n\r\n\r\nI tried to use the debug, and this is what I noticed, at first, everything works just fine: so when I select a value in the comboBox, the value is stored in my variable &quot;selectImmatBusValue&quot;, but then, when I arrive on my new page and I click to trigger my &quot;aaaa&quot; function, the variable &quot;selectImmatBusValue&quot; is reset to null....\r\nWhy? Is it because when I create a new page, all my variables are reset to my default value? and in that case, how could I pass my value from one page to another?\r\nThank you","title":"Variable reset to null when calling a function to switch between 2 pages JavaFx","body":"<p>So I'm using JavaFx for my application, and what I'm trying to do is:\nOn my first page, I select an object through one of its properties with a ComboBox. I store this property in a variable in my controller, and then I load a new page in which I retrieve my variable, do a SELECT in my database using the property I previously stored, and change the values of some text fields using my retrieved object(within the query).</p>\n<p>There is the code of my Controller:</p>\n<pre><code>package fr.agglomistral.controller;\n\nimport fr.agglomistral.classedao.BusDAO;\nimport fr.agglomistral.classedao.LigneDAO;\nimport fr.agglomistral.classedao.ParcoursDAO;\nimport fr.agglomistral.classedao.StationDAO;\nimport fr.agglomistral.classemetier.Bus;\nimport fr.agglomistral.classemetier.Ligne;\nimport fr.agglomistral.classemetier.Parcours;\nimport fr.agglomistral.classemetier.Station;\nimport fr.agglomistral.outils.ConnexionMysql;\nimport javafx.event.ActionEvent;\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Node;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Alert;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ComboBox;\nimport javafx.scene.control.TextField;\nimport javafx.scene.image.Image;\nimport javafx.scene.input.MouseEvent;\nimport javafx.stage.Stage;\nimport javafx.stage.Window;\n\nimport javax.xml.transform.Result;\nimport java.io.IOException;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\npublic class GestionnaireController {\n    @FXML\n    private Stage stage;\n    @FXML\n    private Scene scene;\n    @FXML\n    private Parent root;\n    @FXML\n    public Button logout;\n    @FXML\n    public Button back;\n\n    //Bus related parameters\n    @FXML\n    public Button manageBus;\n    @FXML\n    private Button createBus;\n    @FXML\n    private TextField marqueField;\n    @FXML\n    private TextField immatriculationField;\n    @FXML\n    private TextField placesAssisesField;\n    @FXML\n    private TextField placesDeboutField;\n    @FXML\n    public ComboBox&lt;String&gt; selectImmatBus;\n    @FXML\n    public Button deleteBus;\n    private Boolean busIsAdded = false;\n    @FXML\n    public Button updateBus;\n    @FXML\n    public TextField marqueUpdateField;\n    @FXML\n    public TextField immatriculationUpdateField;\n    @FXML\n    public TextField placesAssisesUpdateField;\n    @FXML\n    public TextField placesDeboutUpdateField;\n    @FXML\n    private String selectImmatBusValue;\n\n\npublic void openGestionBus(ActionEvent actionEvent) {\n        try {\n            root = FXMLLoader.load(getClass().getResource(&quot;/fr/agglomistral/vues/gestionnaire/bus/GestionBus.fxml&quot;));\n            stage =(Stage)((Node)actionEvent.getSource()).getScene().getWindow();\n            scene = new Scene(root,1200,700);\n            Image favicon = new Image(getClass().getResourceAsStream(&quot;/fr/agglomistral/vues/LogoFini.png&quot;));\n            stage.getIcons().add(favicon);\n            stage.setTitle(&quot;AggloMistral-Gestion des Bus&quot;);\n            stage.setScene(scene);\n            stage.show();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n\n    public void openUpdateBus(ActionEvent actionEvent) {\n        try {\n            root = FXMLLoader.load(getClass().getResource(&quot;/fr/agglomistral/vues/gestionnaire/bus/UpdateBus.fxml&quot;));\n            stage =(Stage)((Node)actionEvent.getSource()).getScene().getWindow();\n            scene = new Scene(root,1200,700);\n            Image favicon = new Image(getClass().getResourceAsStream(&quot;/fr/agglomistral/vues/LogoFini.png&quot;));\n            stage.getIcons().add(favicon);\n            stage.setTitle(&quot;AggloMistral-Mettre  Jour un Bus&quot;);\n            stage.setScene(scene);\n            stage.show();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n\npublic void openBusUpdateForm(ActionEvent actionEvent) {\n        try {\n            selectImmatBusValue = selectImmatBus.getValue();\n            root = FXMLLoader.load(getClass().getResource(&quot;/fr/agglomistral/vues/gestionnaire/bus/BusUpdateForm.fxml&quot;));\n            stage =(Stage)((Node)actionEvent.getSource()).getScene().getWindow();\n            scene = new Scene(root,1200,700);\n            Image favicon = new Image(getClass().getResourceAsStream(&quot;/fr/agglomistral/vues/LogoFini.png&quot;));\n            stage.getIcons().add(favicon);\n            stage.setTitle(&quot;AggloMistral-Mettre  Jour un Bus&quot;);\n            stage.setScene(scene);\n            stage.show();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n\npublic void addBusToList() throws SQLException {\n        if (!busIsAdded) {\n            BusDAO busDAO = new BusDAO();\n            ResultSet listeBus = busDAO.index();\n            while (listeBus.next()){\n                String immat = listeBus.getString(&quot;IMMATRICULATION&quot;);\n                selectImmatBus.getItems().add(immat);\n            }\n            busIsAdded = true;\n        }\n    }\n\n    public void fillBusPlaceholders (Bus bus) {\n        marqueUpdateField.setText(bus.getMarque());\n        immatriculationUpdateField.setText(bus.getImmatriculation());\n        placesAssisesUpdateField.setText(String.valueOf(bus.getNbplacesassises()));\n        placesDeboutUpdateField.setText(String.valueOf(bus.getNbplacesdebout()));\n    }\n\n\n    public void aaaa(MouseEvent mouseEvent) {\n        BusDAO busDAO = new BusDAO();\n        fillBusPlaceholders(busDAO.findByImmat(selectImmatBusValue));\n    }\n</code></pre>\n<p>My first page fxml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.geometry.Insets?&gt;\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.control.ComboBox?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.image.Image?&gt;\n&lt;?import javafx.scene.image.ImageView?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;?import javafx.scene.layout.ColumnConstraints?&gt;\n&lt;?import javafx.scene.layout.GridPane?&gt;\n&lt;?import javafx.scene.layout.RowConstraints?&gt;\n&lt;?import javafx.scene.layout.VBox?&gt;\n&lt;?import javafx.scene.shape.Polyline?&gt;\n&lt;?import javafx.scene.text.Font?&gt;\n\n&lt;AnchorPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;700.0&quot; prefWidth=&quot;1200.0&quot; style=&quot;-fx-background-color: white;&quot; xmlns=&quot;http://javafx.com/javafx/18&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;fr.agglomistral.controller.GestionnaireController&quot;&gt;\n   &lt;children&gt;\n      &lt;VBox prefHeight=&quot;700.0&quot; prefWidth=&quot;1200.0&quot; style=&quot;-fx-background-color: a1e3e3;&quot;&gt;\n         &lt;children&gt;\n            &lt;ImageView fitHeight=&quot;135.0&quot; fitWidth=&quot;172.0&quot;&gt;\n               &lt;image&gt;\n                  &lt;Image url=&quot;@../../LogoFini.png&quot; /&gt;\n               &lt;/image&gt;\n               &lt;VBox.margin&gt;\n                  &lt;Insets left=&quot;515.0&quot; /&gt;\n               &lt;/VBox.margin&gt;\n            &lt;/ImageView&gt;\n            &lt;Button fx:id=&quot;back&quot; cache=&quot;true&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#openGestionBus&quot; prefHeight=&quot;0.0&quot; prefWidth=&quot;203.0&quot; style=&quot;-fx-background-color: a1e3e3; -fx-border-color: #014d6d; -fx-border-radius: 50;&quot; text=&quot;Retour&quot; textFill=&quot;#014d6d&quot;&gt;\n               &lt;font&gt;\n                  &lt;Font name=&quot;System Bold&quot; size=&quot;18.0&quot; /&gt;\n               &lt;/font&gt;\n               &lt;opaqueInsets&gt;\n                  &lt;Insets /&gt;\n               &lt;/opaqueInsets&gt;\n               &lt;graphic&gt;\n                  &lt;Polyline fill=&quot;#014d6d&quot; points=&quot;-34.5, 29.0, -19.5, 19.5, -20.5, 41.0, -33.5, 29.0&quot; stroke=&quot;#014d6d&quot; strokeType=&quot;INSIDE&quot; /&gt;\n               &lt;/graphic&gt;\n               &lt;VBox.margin&gt;\n                  &lt;Insets left=&quot;34.0&quot; top=&quot;-100.0&quot; /&gt;\n               &lt;/VBox.margin&gt;\n            &lt;/Button&gt;\n         &lt;/children&gt;\n      &lt;/VBox&gt;\n      &lt;GridPane hgap=&quot;10&quot; layoutX=&quot;10.0&quot; layoutY=&quot;128.0&quot; prefHeight=&quot;276.0&quot; prefWidth=&quot;837.0&quot; vgap=&quot;10&quot;&gt;\n         &lt;padding&gt;\n            &lt;Insets bottom=&quot;40.0&quot; left=&quot;350.0&quot; right=&quot;40.0&quot; top=&quot;46.0&quot; /&gt;\n         &lt;/padding&gt;\n         &lt;columnConstraints&gt;\n            &lt;ColumnConstraints halignment=&quot;RIGHT&quot; maxWidth=&quot;Infinity&quot; minWidth=&quot;237.0&quot; prefWidth=&quot;100.0&quot; /&gt;\n            &lt;ColumnConstraints hgrow=&quot;ALWAYS&quot; maxWidth=&quot;218.0&quot; minWidth=&quot;181.0&quot; prefWidth=&quot;200.0&quot; /&gt;\n         &lt;/columnConstraints&gt;\n         &lt;rowConstraints&gt;\n            &lt;RowConstraints /&gt;\n            &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; /&gt;\n            &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; /&gt;\n            &lt;RowConstraints /&gt;\n            &lt;RowConstraints /&gt;\n         &lt;/rowConstraints&gt;\n         &lt;children&gt;\n            &lt;Label text=&quot;Mettre un Bus  Jour&quot; textFill=&quot;#014d6d&quot; GridPane.columnIndex=&quot;0&quot; GridPane.columnSpan=&quot;2&quot; GridPane.halignment=&quot;CENTER&quot; GridPane.rowIndex=&quot;0&quot; GridPane.rowSpan=&quot;1&quot;&gt;\n               &lt;font&gt;\n                  &lt;Font name=&quot;Arial Bold&quot; size=&quot;24.0&quot; /&gt;\n               &lt;/font&gt;\n               &lt;GridPane.margin&gt;\n                  &lt;Insets bottom=&quot;20&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;20&quot; /&gt;\n               &lt;/GridPane.margin&gt;\n            &lt;/Label&gt;\n            &lt;ComboBox fx:id=&quot;selectImmatBus&quot; editable=&quot;true&quot; onAction=&quot;#addBusToList&quot; onShowing=&quot;#addBusToList&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;171.0&quot; promptText=&quot;Immatriculation du Bus&quot; visibleRowCount=&quot;100&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;1&quot; /&gt;\n            &lt;Label text=&quot;Slectionnez un Bus  diter :&quot; GridPane.rowIndex=&quot;1&quot;&gt;\n               &lt;font&gt;\n                  &lt;Font size=&quot;15.0&quot; /&gt;\n               &lt;/font&gt;\n            &lt;/Label&gt;\n         &lt;/children&gt;\n      &lt;/GridPane&gt;\n      &lt;Button fx:id=&quot;updateBus&quot; defaultButton=&quot;true&quot; layoutX=&quot;10.0&quot; layoutY=&quot;10.0&quot; onAction=&quot;#openBusUpdateForm&quot; prefHeight=&quot;40.0&quot; prefWidth=&quot;223.0&quot; text=&quot;Mettre le Bus  Jour&quot; AnchorPane.leftAnchor=&quot;490.0&quot; AnchorPane.topAnchor=&quot;336.0&quot;&gt;\n         &lt;font&gt;\n            &lt;Font size=&quot;18.0&quot; /&gt;\n         &lt;/font&gt;\n      &lt;/Button&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>And the page I'm opening by clicking on the first page button:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.geometry.Insets?&gt;\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.control.TextField?&gt;\n&lt;?import javafx.scene.image.Image?&gt;\n&lt;?import javafx.scene.image.ImageView?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;?import javafx.scene.layout.ColumnConstraints?&gt;\n&lt;?import javafx.scene.layout.GridPane?&gt;\n&lt;?import javafx.scene.layout.RowConstraints?&gt;\n&lt;?import javafx.scene.layout.VBox?&gt;\n&lt;?import javafx.scene.shape.Polyline?&gt;\n&lt;?import javafx.scene.text.Font?&gt;\n\n&lt;AnchorPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;700.0&quot; prefWidth=&quot;1200.0&quot; style=&quot;-fx-background-color: white;&quot; xmlns=&quot;http://javafx.com/javafx/18&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;fr.agglomistral.controller.GestionnaireController&quot;&gt;\n   &lt;children&gt;\n      &lt;VBox onMouseClicked=&quot;#aaaa&quot; prefHeight=&quot;700.0&quot; prefWidth=&quot;1200.0&quot; style=&quot;-fx-background-color: a1e3e3;&quot;&gt;\n         &lt;children&gt;\n            &lt;ImageView fitHeight=&quot;135.0&quot; fitWidth=&quot;172.0&quot;&gt;\n               &lt;image&gt;\n                  &lt;Image url=&quot;@../../LogoFini.png&quot; /&gt;\n               &lt;/image&gt;\n               &lt;VBox.margin&gt;\n                  &lt;Insets left=&quot;515.0&quot; /&gt;\n               &lt;/VBox.margin&gt;\n            &lt;/ImageView&gt;\n            &lt;Button fx:id=&quot;back&quot; cache=&quot;true&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#openGestionBus&quot; prefHeight=&quot;0.0&quot; prefWidth=&quot;203.0&quot; style=&quot;-fx-background-color: a1e3e3; -fx-border-color: #014d6d; -fx-border-radius: 50;&quot; text=&quot;Retour&quot; textFill=&quot;#014d6d&quot;&gt;\n               &lt;font&gt;\n                  &lt;Font name=&quot;System Bold&quot; size=&quot;18.0&quot; /&gt;\n               &lt;/font&gt;\n               &lt;opaqueInsets&gt;\n                  &lt;Insets /&gt;\n               &lt;/opaqueInsets&gt;\n               &lt;graphic&gt;\n                  &lt;Polyline fill=&quot;#014d6d&quot; points=&quot;-34.5, 29.0, -19.5, 19.5, -20.5, 41.0, -33.5, 29.0&quot; stroke=&quot;#014d6d&quot; strokeType=&quot;INSIDE&quot; /&gt;\n               &lt;/graphic&gt;\n               &lt;VBox.margin&gt;\n                  &lt;Insets left=&quot;34.0&quot; top=&quot;-100.0&quot; /&gt;\n               &lt;/VBox.margin&gt;\n            &lt;/Button&gt;\n            &lt;GridPane alignment=&quot;center&quot; hgap=&quot;10&quot; vgap=&quot;10&quot;&gt;\n               &lt;padding&gt;\n                  &lt;Insets bottom=&quot;40&quot; left=&quot;40&quot; right=&quot;40&quot; top=&quot;40&quot; /&gt;\n               &lt;/padding&gt;\n               &lt;columnConstraints&gt;\n                  &lt;ColumnConstraints halignment=&quot;RIGHT&quot; maxWidth=&quot;Infinity&quot; minWidth=&quot;237.0&quot; prefWidth=&quot;100&quot; /&gt;\n                  &lt;ColumnConstraints hgrow=&quot;ALWAYS&quot; maxWidth=&quot;218.0&quot; minWidth=&quot;181.0&quot; prefWidth=&quot;200&quot; /&gt;\n               &lt;/columnConstraints&gt;\n               &lt;rowConstraints&gt;\n                  &lt;RowConstraints /&gt;\n                  &lt;RowConstraints /&gt;\n                  &lt;RowConstraints /&gt;\n                  &lt;RowConstraints /&gt;\n                  &lt;RowConstraints /&gt;\n                  &lt;RowConstraints /&gt;\n                  &lt;RowConstraints /&gt;\n                  &lt;RowConstraints /&gt;\n               &lt;/rowConstraints&gt;\n               &lt;children&gt;\n                  &lt;Label prefHeight=&quot;32.0&quot; prefWidth=&quot;229.0&quot; text=&quot;Mettre  jour le Bus&quot; textAlignment=&quot;CENTER&quot; textFill=&quot;#014d6d&quot; GridPane.columnIndex=&quot;0&quot; GridPane.columnSpan=&quot;2&quot; GridPane.halignment=&quot;CENTER&quot; GridPane.rowIndex=&quot;0&quot; GridPane.rowSpan=&quot;1&quot;&gt;\n                     &lt;font&gt;\n                        &lt;Font name=&quot;Arial Bold&quot; size=&quot;24.0&quot; /&gt;\n                     &lt;/font&gt;\n                     &lt;GridPane.margin&gt;\n                        &lt;Insets bottom=&quot;20&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;20&quot; /&gt;\n                     &lt;/GridPane.margin&gt;\n                  &lt;/Label&gt;\n                  &lt;Label text=&quot;Marque :&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;2&quot;&gt;\n                     &lt;font&gt;\n                        &lt;Font size=&quot;18.0&quot; /&gt;\n                     &lt;/font&gt;\n                  &lt;/Label&gt;\n                  &lt;Label text=&quot;Immatriculation :&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;3&quot;&gt;\n                     &lt;font&gt;\n                        &lt;Font size=&quot;18.0&quot; /&gt;\n                     &lt;/font&gt;\n                  &lt;/Label&gt;\n                  &lt;Button fx:id=&quot;updateBus&quot; defaultButton=&quot;true&quot; onAction=&quot;#updateBus&quot; prefHeight=&quot;46.0&quot; prefWidth=&quot;196.0&quot; text=&quot;Mettre le Bus  Jour&quot; GridPane.columnSpan=&quot;2&quot; GridPane.halignment=&quot;CENTER&quot; GridPane.rowIndex=&quot;6&quot; GridPane.rowSpan=&quot;1&quot;&gt;\n                     &lt;GridPane.margin&gt;\n                        &lt;Insets bottom=&quot;20&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;20&quot; /&gt;\n                     &lt;/GridPane.margin&gt;\n                     &lt;font&gt;\n                        &lt;Font size=&quot;18.0&quot; /&gt;\n                     &lt;/font&gt;\n                  &lt;/Button&gt;\n                  &lt;Label text=&quot;Nombre de places assises :&quot; GridPane.rowIndex=&quot;4&quot;&gt;\n                     &lt;font&gt;\n                        &lt;Font size=&quot;18.0&quot; /&gt;\n                     &lt;/font&gt;\n                  &lt;/Label&gt;\n                  &lt;Label text=&quot;Nombre de places debouts :&quot; GridPane.rowIndex=&quot;5&quot;&gt;\n                     &lt;font&gt;\n                        &lt;Font size=&quot;18.0&quot; /&gt;\n                     &lt;/font&gt;\n                  &lt;/Label&gt;\n                  &lt;TextField fx:id=&quot;marqueUpdateField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;2&quot; /&gt;\n                  &lt;TextField fx:id=&quot;immatriculationUpdateField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;3&quot; /&gt;\n                  &lt;TextField fx:id=&quot;placesAssisesUpdateField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;4&quot; /&gt;\n                  &lt;TextField fx:id=&quot;placesDeboutUpdateField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;5&quot; /&gt;\n               &lt;/children&gt;\n               &lt;VBox.margin&gt;\n                  &lt;Insets top=&quot;80.0&quot; /&gt;\n               &lt;/VBox.margin&gt;\n            &lt;/GridPane&gt;\n         &lt;/children&gt;\n      &lt;/VBox&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>I'm getting the following error when clicking on the 2nd page which triggers my 'aaaa' function:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;JavaFX Application Thread&quot; java.lang.RuntimeException: java.lang.reflect.InvocationTargetException \n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1857)\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1724)\n    at javafx.base@18.0.1/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at javafx.base@18.0.1/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\n    at javafx.base@18.0.1/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.graphics@18.0.1/javafx.scene.Scene$ClickGenerator.postProcess(Scene.java:3586)\n    at javafx.graphics@18.0.1/javafx.scene.Scene$MouseHandler.process(Scene.java:3890)\n    at javafx.graphics@18.0.1/javafx.scene.Scene.processMouseEvent(Scene.java:1874)\n    at javafx.graphics@18.0.1/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2607)\n    at javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\n    at javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\n    at javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\n    at javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\n    at javafx.graphics@18.0.1/com.sun.glass.ui.View.handleMouseEvent(View.java:551)\n    at javafx.graphics@18.0.1/com.sun.glass.ui.View.notifyMouse(View.java:937)\n    at javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native\n    at javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.reflect.InvocationTargetException \n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:77)\n    at jdk.internal.reflect.GeneratedMethodAccessor2.invoke(Unknown\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at javafx.base@18.0.1/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:275)\n    at javafx.fxml@18.0.1/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84)\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1852)\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;fr.agglomistral.classemetier.Bus.getMarque()&quot; because &quot;bus&quot; is null \n    at fr.agglomistral.controller.GestionnaireController.fillBusPlaceholders(GestionnaireController.java:366)\n    at fr.agglomistral.controller.GestionnaireController.aaaa(GestionnaireController.java:665)\n</code></pre>\n<p>I tried to use the debug, and this is what I noticed, at first, everything works just fine: so when I select a value in the comboBox, the value is stored in my variable &quot;selectImmatBusValue&quot;, but then, when I arrive on my new page and I click to trigger my &quot;aaaa&quot; function, the variable &quot;selectImmatBusValue&quot; is reset to null....\nWhy? Is it because when I create a new page, all my variables are reset to my default value? and in that case, how could I pass my value from one page to another?\nThank you</p>\n"},{"tags":["java","networking","connection"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1417726490,"post_id":1402005,"comment_id":43070630,"body_markdown":"The answer to this is the same as to mamy other questions of the same form. The only proper way to determine whether any resource is available is to try to use it, in the normal course of execution, and cope with failure as and when it happens. Any other technique is one form or another of trying to predict the future.","body":"The answer to this is the same as to mamy other questions of the same form. The only proper way to determine whether any resource is available is to try to use it, in the normal course of execution, and cope with failure as and when it happens. Any other technique is one form or another of trying to predict the future."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":1,"up_vote_count":57,"is_accepted":true,"score":56,"last_activity_date":1417676018,"creation_date":1252529550,"answer_id":1402020,"question_id":1402005,"body_markdown":"You should connect to the place that your actual application needs. Otherwise you&#39;re testing whether you have a connection to somewhere irrelevant (Google in this case).\r\n\r\nIn particular, if you&#39;re trying to talk to a web service, and if you&#39;re in control of the web service, it would be a good idea to have some sort of cheap &quot;get the status&quot; web method. That way you have a much better idea of whether your &quot;real&quot; call is likely to work.\r\n\r\nIn other cases, just opening a connection to a port that should be open may be enough - or sending a ping. [`InetAddress.isReachable`][1] may well be an appropriate API for your needs here.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html#isReachable-int-","title":"How to check if internet connection is present in Java?","body":"<p>You should connect to the place that your actual application needs. Otherwise you're testing whether you have a connection to somewhere irrelevant (Google in this case).</p>\n\n<p>In particular, if you're trying to talk to a web service, and if you're in control of the web service, it would be a good idea to have some sort of cheap \"get the status\" web method. That way you have a much better idea of whether your \"real\" call is likely to work.</p>\n\n<p>In other cases, just opening a connection to a port that should be open may be enough - or sending a ping. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html#isReachable-int-\" rel=\"noreferrer\"><code>InetAddress.isReachable</code></a> may well be an appropriate API for your needs here.</p>\n"},{"tags":[],"owner":{"account_id":30940,"reputation":243131,"user_id":84651,"accept_rate":75,"display_name":"Justin Niessner"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1252529750,"creation_date":1252529750,"answer_id":1402042,"question_id":1402005,"body_markdown":"1) Figure out where your application needs to be connecting to.\r\n\r\n2) Set up a worker process to check [InetAddress.isReachable][1] to monitor the connection to that address.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/net/InetAddress.html#isReachable(int)","title":"How to check if internet connection is present in Java?","body":"<p>1) Figure out where your application needs to be connecting to.</p>\n\n<p>2) Set up a worker process to check <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/net/InetAddress.html#isReachable(int)\" rel=\"nofollow noreferrer\">InetAddress.isReachable</a> to monitor the connection to that address.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1271736407,"creation_date":1252540942,"answer_id":1402762,"question_id":1402005,"body_markdown":"People have suggested using INetAddress.isReachable.  The problem is that some sites configure their firewalls to block ICMP Ping messages.  So a &quot;ping&quot; might fail even though the web service is accessible.  \r\n\r\nAnd of course, the reverse is true as well.  A host may respond to a ping even though the webserver is down.\r\n\r\nAnd of course, a machine may be unable to connect directly to certain (or all) web servers due to local firewall restrictions.\r\n\r\nThe fundamental problem is that &quot;can connect to the internet&quot; is an ill-defined question, and this kind of thing is difficult to test without:\r\n\r\n 1. information on the user&#39;s machine and &quot;local&quot; networking environment, and\r\n 2. information on what the app needs to access.\r\n\r\nSo generally, the simplest solution is for an app to just try to access whatever it needs to access, and fall back on human intelligence to do the diagnosis.","title":"How to check if internet connection is present in Java?","body":"<p>People have suggested using INetAddress.isReachable.  The problem is that some sites configure their firewalls to block ICMP Ping messages.  So a \"ping\" might fail even though the web service is accessible.  </p>\n\n<p>And of course, the reverse is true as well.  A host may respond to a ping even though the webserver is down.</p>\n\n<p>And of course, a machine may be unable to connect directly to certain (or all) web servers due to local firewall restrictions.</p>\n\n<p>The fundamental problem is that \"can connect to the internet\" is an ill-defined question, and this kind of thing is difficult to test without:</p>\n\n<ol>\n<li>information on the user's machine and \"local\" networking environment, and</li>\n<li>information on what the app needs to access.</li>\n</ol>\n\n<p>So generally, the simplest solution is for an app to just try to access whatever it needs to access, and fall back on human intelligence to do the diagnosis.</p>\n"},{"tags":[],"owner":{"account_id":22980,"reputation":1293,"user_id":57217,"accept_rate":100,"display_name":"Kutzi"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1260053659,"creation_date":1260053659,"answer_id":1853753,"question_id":1402005,"body_markdown":"If you&#39;re on java 6 can use [NetworkInterface][1] to check for available network interfaces.\r\nI.e. something like this:\r\n\r\n    Enumeration&lt;NetworkInterface&gt; interfaces = NetworkInterface.getNetworkInterfaces();\r\n    while (interfaces.hasMoreElements()) {\r\n      NetworkInterface interf = interfaces.nextElement();\r\n      if (interf.isUp() &amp;&amp; !interf.isLoopback())\r\n        return true;\r\n    }\r\n\r\nHaven&#39;t tried it myself, yet.\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/net/NetworkInterface.html","title":"How to check if internet connection is present in Java?","body":"<p>If you're on java 6 can use <a href=\"http://java.sun.com/javase/6/docs/api/java/net/NetworkInterface.html\" rel=\"noreferrer\">NetworkInterface</a> to check for available network interfaces.\nI.e. something like this:</p>\n\n<pre><code>Enumeration&lt;NetworkInterface&gt; interfaces = NetworkInterface.getNetworkInterfaces();\nwhile (interfaces.hasMoreElements()) {\n  NetworkInterface interf = interfaces.nextElement();\n  if (interf.isUp() &amp;&amp; !interf.isLoopback())\n    return true;\n}\n</code></pre>\n\n<p>Haven't tried it myself, yet.</p>\n"},{"tags":[],"owner":{"account_id":605962,"reputation":41,"user_id":320640,"display_name":"Rushil"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1373588668,"creation_date":1271700600,"answer_id":2669758,"question_id":1402005,"body_markdown":"    URL url=new URL(&quot;http://[any domain]&quot;);\r\n    URLConnection con=url.openConnection();\r\n    \r\n    /*now errors WILL arise here, i hav tried myself and it always shows &quot;connected&quot; so we&#39;ll open an InputStream on the connection, this way we know for sure that we&#39;re connected to d internet */\r\n    \r\n    /* Get input stream */\r\n    con.getInputStream();\r\n\r\nPut the above statements in try catch blocks and if an exception in caught means that there&#39;s no internet connection established. :-)","title":"How to check if internet connection is present in Java?","body":"<pre><code>URL url=new URL(\"http://[any domain]\");\nURLConnection con=url.openConnection();\n\n/*now errors WILL arise here, i hav tried myself and it always shows \"connected\" so we'll open an InputStream on the connection, this way we know for sure that we're connected to d internet */\n\n/* Get input stream */\ncon.getInputStream();\n</code></pre>\n\n<p>Put the above statements in try catch blocks and if an exception in caught means that there's no internet connection established. :-)</p>\n"},{"tags":[],"owner":{"account_id":56256,"reputation":53237,"user_id":168493,"accept_rate":92,"display_name":"Marcus Adams"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1271701114,"creation_date":1271701114,"answer_id":2669801,"question_id":1402005,"body_markdown":"I usually break it down into three steps.\r\n\r\n 1. I first see if I can resolve the domain name to an IP address.\r\n 2. I then try to connect via TCP (port 80 and/or 443) and close gracefully.\r\n 3. Finally, I&#39;ll issue an HTTP request and check for a 200 response back.\r\n\r\nIf it fails at any point, I provide the appropriate error message to the user.\r\n","title":"How to check if internet connection is present in Java?","body":"<p>I usually break it down into three steps.</p>\n\n<ol>\n<li>I first see if I can resolve the domain name to an IP address.</li>\n<li>I then try to connect via TCP (port 80 and/or 443) and close gracefully.</li>\n<li>Finally, I'll issue an HTTP request and check for a 200 response back.</li>\n</ol>\n\n<p>If it fails at any point, I provide the appropriate error message to the user.</p>\n"},{"tags":[],"owner":{"account_id":1946663,"reputation":15594,"user_id":1751640,"accept_rate":75,"display_name":"Mordechai"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1560876159,"creation_date":1355297483,"answer_id":13834911,"question_id":1402005,"body_markdown":"This code:\r\n\r\n    &quot;127.0.0.1&quot;.equals(InetAddress.getLocalHost().getHostAddress().toString());\r\n\r\nReturns - to me - `true` if offline, and `false`, otherwise. (well, I don&#39;t know if this true to all computers). \r\n\r\nThis works much faster than the other approaches, up here.\r\n\r\n-----------------------------\r\nEDIT: I found this only working, if the &quot;flip switch&quot; (on a laptop), or some other system-defined option, for the internet connection, is off. That&#39;s, the system itself knows not to look for any IP addresses.\r\n","title":"How to check if internet connection is present in Java?","body":"<p>This code:</p>\n\n<pre><code>\"127.0.0.1\".equals(InetAddress.getLocalHost().getHostAddress().toString());\n</code></pre>\n\n<p>Returns - to me - <code>true</code> if offline, and <code>false</code>, otherwise. (well, I don't know if this true to all computers). </p>\n\n<p>This works much faster than the other approaches, up here.</p>\n\n<hr>\n\n<p>EDIT: I found this only working, if the \"flip switch\" (on a laptop), or some other system-defined option, for the internet connection, is off. That's, the system itself knows not to look for any IP addresses.</p>\n"},{"tags":[],"owner":{"account_id":215504,"reputation":52462,"user_id":470184,"accept_rate":91,"display_name":"blue-sky"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1366794078,"creation_date":1366794078,"answer_id":16187763,"question_id":1402005,"body_markdown":"This code is contained within a jUnit test class I use to test if a connection is available. I always receive a connection, but if you check the content length it should be -1 if not known : \r\n\r\n\t  try {\r\n\t\tURL url = new URL(&quot;http://www.google.com&quot;);\r\n\t\tURLConnection connection = url.openConnection();\r\n\t\t\r\n\t\tif(connection.getContentLength() == -1){\r\n\t\t\t  fail(&quot;Failed to verify connection&quot;);\r\n\t\t}\r\n\t  } \r\n\t  catch (IOException e) {\r\n\t\t  fail(&quot;Failed to open a connection&quot;);\r\n\t\t  e.printStackTrace();\r\n\t  }","title":"How to check if internet connection is present in Java?","body":"<p>This code is contained within a jUnit test class I use to test if a connection is available. I always receive a connection, but if you check the content length it should be -1 if not known : </p>\n\n<pre><code>  try {\n    URL url = new URL(\"http://www.google.com\");\n    URLConnection connection = url.openConnection();\n\n    if(connection.getContentLength() == -1){\n          fail(\"Failed to verify connection\");\n    }\n  } \n  catch (IOException e) {\n      fail(\"Failed to open a connection\");\n      e.printStackTrace();\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3733215,"reputation":41,"user_id":3104918,"display_name":"harald"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1387127764,"creation_date":1387127121,"answer_id":20597257,"question_id":1402005,"body_markdown":"The code using NetworkInterface to wait for the network worked for me until I switched from fixed network address to DHCP. A slight enhancement makes it work also with DHCP:  \r\n\r\n    Enumeration&lt;NetworkInterface&gt; interfaces = NetworkInterface.getNetworkInterfaces();\r\n    while (interfaces.hasMoreElements()) {\r\n        NetworkInterface interf = interfaces.nextElement();\r\n        if (interf.isUp() &amp;&amp; !interf.isLoopback()) {\r\n \t\tList&lt;InterfaceAddress&gt; adrs = interf.getInterfaceAddresses();\r\n\t\tfor (Iterator&lt;InterfaceAddress&gt; iter = adrs.iterator(); iter.hasNext();) {\r\n\t\t\tInterfaceAddress adr = iter.next();\r\n\t\t\tInetAddress inadr = adr.getAddress();\r\n\t\t\tif (inadr instanceof Inet4Address) return true;\r\n                }\r\n        }\r\n    }\r\nThis works for Java 7 in openSuse 13.1 for IPv4 network. The problem with the original code is that although the interface was up after resuming from suspend, an IPv4 network address was not yet assigned. After waiting for this assignment, the program can connect to servers. But I have no idea what to do in case of IPv6. \r\n","title":"How to check if internet connection is present in Java?","body":"<p>The code using NetworkInterface to wait for the network worked for me until I switched from fixed network address to DHCP. A slight enhancement makes it work also with DHCP:  </p>\n\n<pre><code>Enumeration&lt;NetworkInterface&gt; interfaces = NetworkInterface.getNetworkInterfaces();\nwhile (interfaces.hasMoreElements()) {\n    NetworkInterface interf = interfaces.nextElement();\n    if (interf.isUp() &amp;&amp; !interf.isLoopback()) {\n    List&lt;InterfaceAddress&gt; adrs = interf.getInterfaceAddresses();\n    for (Iterator&lt;InterfaceAddress&gt; iter = adrs.iterator(); iter.hasNext();) {\n        InterfaceAddress adr = iter.next();\n        InetAddress inadr = adr.getAddress();\n        if (inadr instanceof Inet4Address) return true;\n            }\n    }\n}\n</code></pre>\n\n<p>This works for Java 7 in openSuse 13.1 for IPv4 network. The problem with the original code is that although the interface was up after resuming from suspend, an IPv4 network address was not yet assigned. After waiting for this assignment, the program can connect to servers. But I have no idea what to do in case of IPv6. </p>\n"},{"tags":[],"owner":{"account_id":695155,"reputation":26358,"user_id":274677,"accept_rate":81,"display_name":"Marcus Junius Brutus"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1524522412,"creation_date":1396969547,"answer_id":22940952,"question_id":1402005,"body_markdown":"The code you basically provided, plus a call to `connect` should be sufficient. So yeah, it could be that just Google&#39;s not available but some other site you need to contact is on but how likely is that? Also, this code should only execute when you actually fail to access your external resource (in a `catch` block to try and figure out what the cause of the failure was) so I&#39;d say that if both your external resource of interest **and** Google are not available chances are you have a net connectivity problem.\r\n\r\n    private static boolean netIsAvailable() {\r\n        try {\r\n            final URL url = new URL(&quot;http://www.google.com&quot;);\r\n            final URLConnection conn = url.openConnection();\r\n            conn.connect();\r\n            conn.getInputStream().close();\r\n            return true;\r\n        } catch (MalformedURLException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IOException e) {\r\n            return false;\r\n        }\r\n    }","title":"How to check if internet connection is present in Java?","body":"<p>The code you basically provided, plus a call to <code>connect</code> should be sufficient. So yeah, it could be that just Google's not available but some other site you need to contact is on but how likely is that? Also, this code should only execute when you actually fail to access your external resource (in a <code>catch</code> block to try and figure out what the cause of the failure was) so I'd say that if both your external resource of interest <strong>and</strong> Google are not available chances are you have a net connectivity problem.</p>\n\n<pre><code>private static boolean netIsAvailable() {\n    try {\n        final URL url = new URL(\"http://www.google.com\");\n        final URLConnection conn = url.openConnection();\n        conn.connect();\n        conn.getInputStream().close();\n        return true;\n    } catch (MalformedURLException e) {\n        throw new RuntimeException(e);\n    } catch (IOException e) {\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4443722,"reputation":403,"user_id":3617631,"display_name":"Zoka"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523942911,"creation_date":1432462331,"answer_id":30422323,"question_id":1402005,"body_markdown":"    public boolean checkInternetConnection()\r\n    {\r\n         boolean status = false;\r\n         Socket sock = new Socket();\r\n         InetSocketAddress address = new InetSocketAddress(&quot;www.google.com&quot;, 80);\r\n         \r\n         try\r\n         {\r\n            sock.connect(address, 3000);\r\n            if(sock.isConnected()) status = true;\r\n         }\r\n         catch(Exception e)\r\n         {\r\n             status = false;       \r\n         }\r\n         finally\r\n         {\r\n            try\r\n             {\r\n                sock.close();\r\n             }\r\n             catch(Exception e){}\r\n         }\r\n            \r\n         return status;\r\n    }","title":"How to check if internet connection is present in Java?","body":"<pre><code>public boolean checkInternetConnection()\n{\n     boolean status = false;\n     Socket sock = new Socket();\n     InetSocketAddress address = new InetSocketAddress(\"www.google.com\", 80);\n\n     try\n     {\n        sock.connect(address, 3000);\n        if(sock.isConnected()) status = true;\n     }\n     catch(Exception e)\n     {\n         status = false;       \n     }\n     finally\n     {\n        try\n         {\n            sock.close();\n         }\n         catch(Exception e){}\n     }\n\n     return status;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1434192250,"creation_date":1434191688,"answer_id":30817677,"question_id":1402005,"body_markdown":"This code should do the job reliably.\r\n\r\nNote that when using the [`try-with-resources`][1] statement we don&#39;t need to close the resources.\r\n\r\n    import java.io.IOException;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.Socket;\r\n    import java.net.UnknownHostException;\r\n    \r\n    public class InternetAvailabilityChecker\r\n    {\r\n        public static boolean isInternetAvailable() throws IOException\r\n        {\r\n            return isHostAvailable(&quot;google.com&quot;) || isHostAvailable(&quot;amazon.com&quot;)\r\n                    || isHostAvailable(&quot;facebook.com&quot;)|| isHostAvailable(&quot;apple.com&quot;);\r\n        }\r\n    \r\n        private static boolean isHostAvailable(String hostName) throws IOException\r\n        {\r\n            try(Socket socket = new Socket())\r\n            {\r\n                int port = 80;\r\n                InetSocketAddress socketAddress = new InetSocketAddress(hostName, port);\r\n                socket.connect(socketAddress, 3000);\r\n    \r\n                return true;\r\n            }\r\n            catch(UnknownHostException unknownHost)\r\n            {\r\n            \treturn false;\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html","title":"How to check if internet connection is present in Java?","body":"<p>This code should do the job reliably.</p>\n\n<p>Note that when using the <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"noreferrer\"><code>try-with-resources</code></a> statement we don't need to close the resources.</p>\n\n<pre><code>import java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\n\npublic class InternetAvailabilityChecker\n{\n    public static boolean isInternetAvailable() throws IOException\n    {\n        return isHostAvailable(\"google.com\") || isHostAvailable(\"amazon.com\")\n                || isHostAvailable(\"facebook.com\")|| isHostAvailable(\"apple.com\");\n    }\n\n    private static boolean isHostAvailable(String hostName) throws IOException\n    {\n        try(Socket socket = new Socket())\n        {\n            int port = 80;\n            InetSocketAddress socketAddress = new InetSocketAddress(hostName, port);\n            socket.connect(socketAddress, 3000);\n\n            return true;\n        }\n        catch(UnknownHostException unknownHost)\n        {\n            return false;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8566562,"reputation":135,"user_id":6418869,"display_name":"Shibina EC"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1464951775,"creation_date":1464948346,"answer_id":37611467,"question_id":1402005,"body_markdown":"`InetAddress.isReachable` sometime return false if internet connection exist. \r\n\r\nAn alternative method to check internet availability in java is : This function make a real `ICMP ECHO` ping.\r\n    \r\n    \r\n    public static boolean isReachableByPing(String host) {\r\n         try{\r\n                    String cmd = &quot;&quot;;\r\n                    if(System.getProperty(&quot;os.name&quot;).startsWith(&quot;Windows&quot;)) {   \r\n                            // For Windows\r\n                            cmd = &quot;ping -n 1 &quot; + host;\r\n                    } else {\r\n                            // For Linux and OSX\r\n                            cmd = &quot;ping -c 1 &quot; + host;\r\n                    }\r\n    \r\n                    Process myProcess = Runtime.getRuntime().exec(cmd);\r\n                    myProcess.waitFor();\r\n    \r\n                    if(myProcess.exitValue() == 0) {\r\n    \r\n                            return true;\r\n                    } else {\r\n    \r\n                            return false;\r\n                    }\r\n    \r\n            } catch( Exception e ) {\r\n    \r\n                    e.printStackTrace();\r\n                    return false;\r\n            }\r\n    }\r\n\r\n","title":"How to check if internet connection is present in Java?","body":"<p><code>InetAddress.isReachable</code> sometime return false if internet connection exist. </p>\n\n<p>An alternative method to check internet availability in java is : This function make a real <code>ICMP ECHO</code> ping.</p>\n\n<pre><code>public static boolean isReachableByPing(String host) {\n     try{\n                String cmd = \"\";\n                if(System.getProperty(\"os.name\").startsWith(\"Windows\")) {   \n                        // For Windows\n                        cmd = \"ping -n 1 \" + host;\n                } else {\n                        // For Linux and OSX\n                        cmd = \"ping -c 1 \" + host;\n                }\n\n                Process myProcess = Runtime.getRuntime().exec(cmd);\n                myProcess.waitFor();\n\n                if(myProcess.exitValue() == 0) {\n\n                        return true;\n                } else {\n\n                        return false;\n                }\n\n        } catch( Exception e ) {\n\n                e.printStackTrace();\n                return false;\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8375968,"reputation":1454,"user_id":6289425,"display_name":"Dirk Hoffmann"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1500389339,"creation_date":1500389339,"answer_id":45170153,"question_id":1402005,"body_markdown":"There is also a gradle option `--offline` which maybe results in the behavior you want.","title":"How to check if internet connection is present in Java?","body":"<p>There is also a gradle option <code>--offline</code> which maybe results in the behavior you want.</p>\n"},{"tags":[],"owner":{"account_id":13629117,"reputation":1,"user_id":9831591,"display_name":"edwin"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1554443901,"creation_date":1533928790,"answer_id":51792873,"question_id":1402005,"body_markdown":"The following piece of code allows us to get the status of the network on our Android device   \r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n            @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                setContentView(R.layout.activity_main);\r\n                TextView mtv=findViewById(R.id.textv);\r\n                ConnectivityManager connectivityManager=\r\n                      (ConnectivityManager) this.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                    if(((Network)connectivityManager.getActiveNetwork())!=null)\r\n                        mtv.setText(&quot;true&quot;);\r\n                    else\r\n                        mtv.setText(&quot;fasle&quot;);\r\n                }\r\n            }\r\n        }","title":"How to check if internet connection is present in Java?","body":"<p>The following piece of code allows us to get the status of the network on our Android device   </p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n            TextView mtv=findViewById(R.id.textv);\n            ConnectivityManager connectivityManager=\n                  (ConnectivityManager) this.getSystemService(Context.CONNECTIVITY_SERVICE);\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                if(((Network)connectivityManager.getActiveNetwork())!=null)\n                    mtv.setText(\"true\");\n                else\n                    mtv.setText(\"fasle\");\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15902986,"reputation":93,"user_id":11474902,"display_name":"Eltac Shikhsaidov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598957454,"creation_date":1598515041,"answer_id":63611573,"question_id":1402005,"body_markdown":"You can simply write like this\r\n\r\n```\r\nimport java.net.InetAddress;\r\nimport java.net.UnknownHostException;\r\n\r\npublic class Main {\r\n\r\n    private static final String HOST = &quot;localhost&quot;;\r\n\r\n    public static void main(String[] args) throws UnknownHostException {\r\n\r\n        boolean isConnected = !HOST.equals(InetAddress.getLocalHost().getHostAddress().toString());\r\n\r\n        if (isConnected) System.out.println(&quot;Connected&quot;);\r\n        else System.out.println(&quot;Not connected&quot;);\r\n\r\n    }\r\n}\r\n```","title":"How to check if internet connection is present in Java?","body":"<p>You can simply write like this</p>\n<pre><code>import java.net.InetAddress;\nimport java.net.UnknownHostException;\n\npublic class Main {\n\n    private static final String HOST = &quot;localhost&quot;;\n\n    public static void main(String[] args) throws UnknownHostException {\n\n        boolean isConnected = !HOST.equals(InetAddress.getLocalHost().getHostAddress().toString());\n\n        if (isConnected) System.out.println(&quot;Connected&quot;);\n        else System.out.println(&quot;Not connected&quot;);\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":376644,"reputation":895,"user_id":728232,"display_name":"Rich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653949007,"creation_date":1653949007,"answer_id":72440524,"question_id":1402005,"body_markdown":"There are (nowadays) APIs for this, but they are platform specific:\r\n\r\n - On Android `ConnectivityManager` (https://developer.android.com/training/basics/network-ops/reading-network-state) does everything you need.\r\n\r\n - On Windows [INetworkListManager::GetConnectivity][1] (for which you&#39;ll need a JNI)\r\n\r\n - On generic Linux, you are probably stuck with testing if you have access to a DNS server and Google, as above.\r\n\r\n- there is probably an Apple way to do this as well\r\n\r\n(I&#39;d use the specific tools where available)\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows/win32/api/netlistmgr/nf-netlistmgr-inetworklistmanager-getconnectivity","title":"How to check if internet connection is present in Java?","body":"<p>There are (nowadays) APIs for this, but they are platform specific:</p>\n<ul>\n<li><p>On Android <code>ConnectivityManager</code> (<a href=\"https://developer.android.com/training/basics/network-ops/reading-network-state\" rel=\"nofollow noreferrer\">https://developer.android.com/training/basics/network-ops/reading-network-state</a>) does everything you need.</p>\n</li>\n<li><p>On Windows <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/netlistmgr/nf-netlistmgr-inetworklistmanager-getconnectivity\" rel=\"nofollow noreferrer\">INetworkListManager::GetConnectivity</a> (for which you'll need a JNI)</p>\n</li>\n<li><p>On generic Linux, you are probably stuck with testing if you have access to a DNS server and Google, as above.</p>\n</li>\n<li><p>there is probably an Apple way to do this as well</p>\n</li>\n</ul>\n<p>(I'd use the specific tools where available)</p>\n"},{"tags":[],"owner":{"account_id":2250623,"reputation":591,"user_id":1982937,"display_name":"OSXMonk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656507064,"creation_date":1656507064,"answer_id":72801740,"question_id":1402005,"body_markdown":"This have worked well for me. \r\n\r\n    try{  \r\n            InetAddress addr = InetAddress.getByName(&quot;google.com&quot; );\r\n            \r\n        }catch(IOException e){\r\n            JOptionPane.showMessageDialog(new JFrame(),&quot;No Internet connection.\\nTry again later&quot;, &quot;Network Error&quot;, JOptionPane.ERROR_MESSAGE);    \r\n        }","title":"How to check if internet connection is present in Java?","body":"<p>This have worked well for me.</p>\n<pre><code>try{  \n        InetAddress addr = InetAddress.getByName(&quot;google.com&quot; );\n        \n    }catch(IOException e){\n        JOptionPane.showMessageDialog(new JFrame(),&quot;No Internet connection.\\nTry again later&quot;, &quot;Network Error&quot;, JOptionPane.ERROR_MESSAGE);    \n    }\n</code></pre>\n"}],"owner":{"account_id":33225,"reputation":15469,"user_id":92813,"accept_rate":71,"display_name":"Chris"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129171,"favorite_count":0,"down_vote_count":1,"up_vote_count":73,"accepted_answer_id":1402020,"answer_count":18,"score":72,"last_activity_date":1656507064,"creation_date":1252529341,"question_id":1402005,"body_markdown":"How do you check if you can connect to the internet via java? One way would be:\r\n\r\n    final URL url = new URL(&quot;http://www.google.com&quot;);\r\n    final URLConnection conn = url.openConnection();\r\n    ... if we got here, we should have net ...\r\n\r\nBut is there something more appropriate to perform that task, **especially** if you need to do **consecutive checks** very often and a loss of internet connection is highly probable?\r\n\r\n","title":"How to check if internet connection is present in Java?","body":"<p>How do you check if you can connect to the internet via java? One way would be:</p>\n\n<pre><code>final URL url = new URL(\"http://www.google.com\");\nfinal URLConnection conn = url.openConnection();\n... if we got here, we should have net ...\n</code></pre>\n\n<p>But is there something more appropriate to perform that task, <strong>especially</strong> if you need to do <strong>consecutive checks</strong> very often and a loss of internet connection is highly probable?</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":6241379,"reputation":3870,"user_id":4854891,"display_name":"Jakir Hossain"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1567679407,"creation_date":1567679407,"answer_id":57803465,"question_id":57803441,"body_markdown":"Set `layout manager` before set `adapter` to `recycler view`, Update like below\r\n\r\n    private void createRecyclerView(List&lt;DeviceWifiTo&gt; list) {\r\n       RecyclerView recyclerView = activity.findViewById(R.id.recycler_view_wifi);\r\n       recyclerView.setLayoutManager(new LinearLayoutManager(activity.getApplicationContext()));\r\n       WifiAdapter adapter = new WifiAdapter(list);\r\n       recyclerView.setAdapter(adapter);\r\n       \r\n    }\r\n\r\nHope it helps you.","title":"Android RecyclerView only displays items after closing and restarting the app","body":"<p>Set <code>layout manager</code> before set <code>adapter</code> to <code>recycler view</code>, Update like below</p>\n\n<pre><code>private void createRecyclerView(List&lt;DeviceWifiTo&gt; list) {\n   RecyclerView recyclerView = activity.findViewById(R.id.recycler_view_wifi);\n   recyclerView.setLayoutManager(new LinearLayoutManager(activity.getApplicationContext()));\n   WifiAdapter adapter = new WifiAdapter(list);\n   recyclerView.setAdapter(adapter);\n\n}\n</code></pre>\n\n<p>Hope it helps you.</p>\n"},{"tags":[],"owner":{"account_id":14575628,"reputation":13,"user_id":10527568,"display_name":"Dorokhov Yegor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1567679737,"creation_date":1567679737,"answer_id":57803566,"question_id":57803441,"body_markdown":"I guess you want to show your result in recyclerView. Do you have any callback methods for Your search? \r\n\r\nYou need to call notifyDataSetChanged() in that callback method (set result then call notifyDataSetChanged() ) ","title":"Android RecyclerView only displays items after closing and restarting the app","body":"<p>I guess you want to show your result in recyclerView. Do you have any callback methods for Your search? </p>\n\n<p>You need to call notifyDataSetChanged() in that callback method (set result then call notifyDataSetChanged() ) </p>\n"},{"tags":[],"owner":{"account_id":2557547,"reputation":6925,"user_id":2219208,"accept_rate":8,"display_name":"Lakhwinder Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1567680110,"creation_date":1567680110,"answer_id":57803683,"question_id":57803441,"body_markdown":"Try setting up `layoutmanager` before setting the `adapter`","title":"Android RecyclerView only displays items after closing and restarting the app","body":"<p>Try setting up <code>layoutmanager</code> before setting the <code>adapter</code></p>\n"},{"tags":[],"owner":{"account_id":20469420,"reputation":179,"user_id":15020240,"display_name":"wilfred"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656506168,"creation_date":1656153553,"answer_id":72753160,"question_id":57803441,"body_markdown":"I had similar issue in kotlin just because of not adding the `notifyDataSetChanged()` where I am setting the data. ","title":"Android RecyclerView only displays items after closing and restarting the app","body":"<p>I had similar issue in kotlin just because of not adding the <code>notifyDataSetChanged()</code> where I am setting the data.</p>\n"}],"owner":{"account_id":9023486,"reputation":1286,"user_id":9990920,"display_name":"laprof"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":896,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57803465,"answer_count":4,"score":1,"last_activity_date":1656506168,"creation_date":1567679313,"question_id":57803441,"body_markdown":"I have a strange effect with my RecyclerView after I updated my App to API 28. I have a search button that triggers a search of Wifi devices in my area. The items are no longer displayed directly in the list. I have to close and reopen the app to get the correct display.\r\n\r\nI have a toast that should be displayed when the button is pressed. The toast message is also only displayed after closing and opening the app.\r\n\r\n\r\n**Activity.kt**\r\n\r\n \r\n\r\n       private fun setFloatingSearchButton() {\r\n            floating_button_discover_devices.setOnClickListener { view -&gt;\r\n                Snackbar.make(view, &quot;Search for new devices ...&quot;,\r\n                        Snackbar.LENGTH_SHORT).setAction(&quot;Action&quot;, null).show()\r\n   \r\n                discoverDevices()\r\n    \r\n                registerReceiver(mWifiReceiver, IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION))\r\n    \r\n                mWifiManager!!.startScan()\r\n            }\r\n        }\r\n\r\n\r\n**WifiAdapter.java**\r\n\r\n    public class WifiAdapter extends RecyclerView.Adapter&lt;WifiAdapter.ViewHolder&gt; {\r\n    \r\n        private final int CONFIGURE_DEVICE_REQUEST_CODE = 0x00000001;\r\n    \r\n        private static final String TAG = &quot;WifiAdapter&quot;;\r\n    \r\n        private List&lt;DeviceWifiTo&gt; wifis;\r\n    \r\n        private Context context;\r\n        private Activity activity;\r\n    \r\n        public WifiAdapter(List&lt;DeviceWifiTo&gt; wifis) {\r\n            this.wifis = wifis;\r\n        }\r\n    \r\n        @Override\r\n        public WifiAdapter.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n            context = parent.getContext();\r\n            activity = (Activity) context;\r\n            LayoutInflater inflater = LayoutInflater.from(context);\r\n    \r\n            View wifiView = inflater.inflate(R.layout.item_wifi, parent, false);\r\n    \r\n            return new WifiAdapter.ViewHolder(wifiView);\r\n        }\r\n    \r\n        @Override\r\n        public void onBindViewHolder(WifiAdapter.ViewHolder holder, int position) {\r\n            DeviceWifiTo wifi = wifis.get(position);\r\n            Log.d(TAG, wifi.getSsid());\r\n            TextView wifiName = holder.wifiName;\r\n            wifiName.setText(wifi.getSsid());\r\n    \r\n            CardView cardView = holder.cardView;\r\n            cardView.setOnClickListener(view -&gt; {\r\n                Intent intent = new Intent(context, ConfigureDeviceActivity.class);\r\n                intent.putExtra(&quot;ssid&quot;, wifi.getSsid());\r\n                activity.startActivityForResult(intent, CONFIGURE_DEVICE_REQUEST_CODE);\r\n            });\r\n        }\r\n    \r\n        @Override\r\n        public int getItemCount() {\r\n            return wifis.size();\r\n        }\r\n    \r\n        class ViewHolder extends RecyclerView.ViewHolder {\r\n            TextView wifiName;\r\n            CardView cardView;\r\n    \r\n            ViewHolder(View itemView) {\r\n                super(itemView);\r\n                wifiName = itemView.findViewById(R.id.text_wifi_name);\r\n                cardView = itemView.findViewById(R.id.cardView_device);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n\r\n**UcDiscoverDevicesImpl.java**\r\n\r\n    private void createRecyclerView(List&lt;DeviceWifiTo&gt; list) {\r\n        RecyclerView recyclerView = activity.findViewById(R.id.recycler_view_wifi);\r\n        WifiAdapter adapter = new WifiAdapter(list);\r\n        recyclerView.setAdapter(adapter);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(activity.getApplicationContext()));\r\n    }","title":"Android RecyclerView only displays items after closing and restarting the app","body":"<p>I have a strange effect with my RecyclerView after I updated my App to API 28. I have a search button that triggers a search of Wifi devices in my area. The items are no longer displayed directly in the list. I have to close and reopen the app to get the correct display.</p>\n\n<p>I have a toast that should be displayed when the button is pressed. The toast message is also only displayed after closing and opening the app.</p>\n\n<p><strong>Activity.kt</strong></p>\n\n<pre><code>   private fun setFloatingSearchButton() {\n        floating_button_discover_devices.setOnClickListener { view -&gt;\n            Snackbar.make(view, \"Search for new devices ...\",\n                    Snackbar.LENGTH_SHORT).setAction(\"Action\", null).show()\n\n            discoverDevices()\n\n            registerReceiver(mWifiReceiver, IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION))\n\n            mWifiManager!!.startScan()\n        }\n    }\n</code></pre>\n\n<p><strong>WifiAdapter.java</strong></p>\n\n<pre><code>public class WifiAdapter extends RecyclerView.Adapter&lt;WifiAdapter.ViewHolder&gt; {\n\n    private final int CONFIGURE_DEVICE_REQUEST_CODE = 0x00000001;\n\n    private static final String TAG = \"WifiAdapter\";\n\n    private List&lt;DeviceWifiTo&gt; wifis;\n\n    private Context context;\n    private Activity activity;\n\n    public WifiAdapter(List&lt;DeviceWifiTo&gt; wifis) {\n        this.wifis = wifis;\n    }\n\n    @Override\n    public WifiAdapter.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        context = parent.getContext();\n        activity = (Activity) context;\n        LayoutInflater inflater = LayoutInflater.from(context);\n\n        View wifiView = inflater.inflate(R.layout.item_wifi, parent, false);\n\n        return new WifiAdapter.ViewHolder(wifiView);\n    }\n\n    @Override\n    public void onBindViewHolder(WifiAdapter.ViewHolder holder, int position) {\n        DeviceWifiTo wifi = wifis.get(position);\n        Log.d(TAG, wifi.getSsid());\n        TextView wifiName = holder.wifiName;\n        wifiName.setText(wifi.getSsid());\n\n        CardView cardView = holder.cardView;\n        cardView.setOnClickListener(view -&gt; {\n            Intent intent = new Intent(context, ConfigureDeviceActivity.class);\n            intent.putExtra(\"ssid\", wifi.getSsid());\n            activity.startActivityForResult(intent, CONFIGURE_DEVICE_REQUEST_CODE);\n        });\n    }\n\n    @Override\n    public int getItemCount() {\n        return wifis.size();\n    }\n\n    class ViewHolder extends RecyclerView.ViewHolder {\n        TextView wifiName;\n        CardView cardView;\n\n        ViewHolder(View itemView) {\n            super(itemView);\n            wifiName = itemView.findViewById(R.id.text_wifi_name);\n            cardView = itemView.findViewById(R.id.cardView_device);\n        }\n    }\n\n}\n</code></pre>\n\n<p><strong>UcDiscoverDevicesImpl.java</strong></p>\n\n<pre><code>private void createRecyclerView(List&lt;DeviceWifiTo&gt; list) {\n    RecyclerView recyclerView = activity.findViewById(R.id.recycler_view_wifi);\n    WifiAdapter adapter = new WifiAdapter(list);\n    recyclerView.setAdapter(adapter);\n    recyclerView.setLayoutManager(new LinearLayoutManager(activity.getApplicationContext()));\n}\n</code></pre>\n"},{"tags":["java","mysql"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1656505010,"post_id":72800969,"comment_id":128588404,"body_markdown":"sure. if message is a column that doesn&#39;t allow duplicates, for instance, and those values are already there. I don&#39;t really understand why you have this as unit tests, though","body":"sure. if message is a column that doesn&#39;t allow duplicates, for instance, and those values are already there. I don&#39;t really understand why you have this as unit tests, though"}],"answers":[{"tags":[],"owner":{"account_id":1981453,"reputation":1552,"user_id":1777956,"display_name":"Elias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656504501,"creation_date":1656504501,"answer_id":72801177,"question_id":72800969,"body_markdown":"Yes, it is possible `executeUpdate` does not return 2. According to the documentation, it returns the amount of affected rows by your SQL DML statement or 0 for SQL statements that return nothing[0]:\r\n\r\n&gt;**Returns**:\r\n&gt;\r\n&gt;either (1) the row count for SQL Data Manipulation Language (DML) statements or (2) 0 for SQL statements that return nothing\r\n\r\nThere are some pitfalls and quirks depending on the database driver so it&#39;s not 100% reliable[1].\r\n\r\n[0] https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#executeUpdate-java.lang.String-\r\n\r\n[1] https://stackoverflow.com/questions/12400985/what-does-it-mean-when-statement-executeupdate-returns-1 ","title":"Will mysql lose data when storing data?","body":"<p>Yes, it is possible <code>executeUpdate</code> does not return 2. According to the documentation, it returns the amount of affected rows by your SQL DML statement or 0 for SQL statements that return nothing[0]:</p>\n<blockquote>\n<p><strong>Returns</strong>:</p>\n<p>either (1) the row count for SQL Data Manipulation Language (DML) statements or (2) 0 for SQL statements that return nothing</p>\n</blockquote>\n<p>There are some pitfalls and quirks depending on the database driver so it's not 100% reliable[1].</p>\n<p>[0] <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#executeUpdate-java.lang.String-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#executeUpdate-java.lang.String-</a></p>\n<p>[1] <a href=\"https://stackoverflow.com/questions/12400985/what-does-it-mean-when-statement-executeupdate-returns-1\">What does it mean when Statement.executeUpdate() returns -1?</a></p>\n"},{"tags":[],"owner":{"account_id":19194967,"reputation":19,"user_id":14023883,"display_name":"Bibikski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656506063,"creation_date":1656504502,"answer_id":72801179,"question_id":72800969,"body_markdown":"According to the post from Diyarbakir, they state from the https://stackoverflow.com/questions/40766426/does-updatecount-and-executeupdate-return-samething (Stack Overflow)\r\n\r\n&quot;From the docs:\r\n\r\nexecuteUpdate()\r\n\r\nExecutes the SQL statement in this PreparedStatement object, which must be an SQL Data Manipulation Language (DML) statement, such as INSERT, UPDATE or DELETE; or an SQL statement that returns nothing, such as a DDL statement.\r\n\r\n    Returns: either (1) the row count for SQL Data Manipulation Language (DML) statements or (2) 0 for SQL statements that return nothing\r\n\r\nSo basically:\r\n\r\n    executeUpdate() is used for SQL INSERT, UPDATE, DELETE or a DLL statement.\r\n    execute() could be used for any SQL statement after which you would call getUpdateCount().\r\n\r\nSince you&#39;re using an UPDATE it doesn&#39;t matter in your case. There should be no difference&quot; [0]\r\n\r\nIf this solves your answer, please go back to the original post and give credit to Diyarbakir (https://stackoverflow.com/questions/40766426/does-updatecount-and-executeupdate-return-samething).\r\n\r\n[0] https://stackoverflow.com/questions/40766426/does-updatecount-and-executeupdate-return-samething\r\n\r\n","title":"Will mysql lose data when storing data?","body":"<p>According to the post from Diyarbakir, they state from the <a href=\"https://stackoverflow.com/questions/40766426/does-updatecount-and-executeupdate-return-samething\">Does updateCount() and executeUpdate() return samething</a> (Stack Overflow)</p>\n<p>&quot;From the docs:</p>\n<p>executeUpdate()</p>\n<p>Executes the SQL statement in this PreparedStatement object, which must be an SQL Data Manipulation Language (DML) statement, such as INSERT, UPDATE or DELETE; or an SQL statement that returns nothing, such as a DDL statement.</p>\n<pre><code>Returns: either (1) the row count for SQL Data Manipulation Language (DML) statements or (2) 0 for SQL statements that return nothing\n</code></pre>\n<p>So basically:</p>\n<pre><code>executeUpdate() is used for SQL INSERT, UPDATE, DELETE or a DLL statement.\nexecute() could be used for any SQL statement after which you would call getUpdateCount().\n</code></pre>\n<p>Since you're using an UPDATE it doesn't matter in your case. There should be no difference&quot; [0]</p>\n<p>If this solves your answer, please go back to the original post and give credit to Diyarbakir (<a href=\"https://stackoverflow.com/questions/40766426/does-updatecount-and-executeupdate-return-samething\">Does updateCount() and executeUpdate() return samething</a>).</p>\n<p>[0] <a href=\"https://stackoverflow.com/questions/40766426/does-updatecount-and-executeupdate-return-samething\">Does updateCount() and executeUpdate() return samething</a></p>\n"}],"owner":{"account_id":21239904,"reputation":619,"user_id":15623558,"display_name":"aszswaz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1656506063,"creation_date":1656503517,"question_id":72800969,"body_markdown":"When I look up some documents, those document authors usually recommend a simple check on mysql data storage operations, such as this:\r\n\r\n```java\r\npackage org.example.jdbc.demo;\r\n\r\nimport org.junit.jupiter.api.BeforeAll;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.sql.*;\r\n\r\n@SuppressWarnings(&quot;JavadocDeclaration&quot;)\r\npublic class Mysql02Test {\r\n    private static Connection connection;\r\n\r\n    @BeforeAll\r\n    static void beforeAll() {\r\n        try {\r\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n            connection = DriverManager.getConnection(&quot;jdbc:mysql://192.168.24.1/demo?useSSL=false&amp;serverTimezone=Asia/Shanghai&quot;, &quot;root&quot;, &quot;root&quot;);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    @Test\r\n    void insertTest() throws SQLException {\r\n        Statement statement = connection.createStatement();\r\n        int updateCount = statement.executeUpdate(&quot;INSERT INTO mysql_jdbc_demo(message) VALUES (&#39;Hello World&#39;), (&#39;Hello World&#39;)&quot;);\r\n        System.out.println(&quot;update: &quot; + update);\r\n        if (updateCount != 2) {\r\n            System.out.println(&quot;update != 2&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIn addition to declaring &quot;INSERT IGNORE INTO&quot; in sql to let mysql ignore duplicate data.\r\n\r\nIs it possible that `updateCount` is not equal to 2?\r\n\r\nThe 2 in this example represents the amount of data that needs to be saved.","title":"Will mysql lose data when storing data?","body":"<p>When I look up some documents, those document authors usually recommend a simple check on mysql data storage operations, such as this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.jdbc.demo;\n\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.Test;\n\nimport java.sql.*;\n\n@SuppressWarnings(&quot;JavadocDeclaration&quot;)\npublic class Mysql02Test {\n    private static Connection connection;\n\n    @BeforeAll\n    static void beforeAll() {\n        try {\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n            connection = DriverManager.getConnection(&quot;jdbc:mysql://192.168.24.1/demo?useSSL=false&amp;serverTimezone=Asia/Shanghai&quot;, &quot;root&quot;, &quot;root&quot;);\n        } catch (Exception e) {\n            throw new RuntimeException(e.getMessage(), e);\n        }\n    }\n\n    @Test\n    void insertTest() throws SQLException {\n        Statement statement = connection.createStatement();\n        int updateCount = statement.executeUpdate(&quot;INSERT INTO mysql_jdbc_demo(message) VALUES ('Hello World'), ('Hello World')&quot;);\n        System.out.println(&quot;update: &quot; + update);\n        if (updateCount != 2) {\n            System.out.println(&quot;update != 2&quot;);\n        }\n    }\n}\n</code></pre>\n<p>In addition to declaring &quot;INSERT IGNORE INTO&quot; in sql to let mysql ignore duplicate data.</p>\n<p>Is it possible that <code>updateCount</code> is not equal to 2?</p>\n<p>The 2 in this example represents the amount of data that needs to be saved.</p>\n"},{"tags":["java","spring","https","openshift","apache-httpclient-4.x"],"answers":[{"tags":[],"owner":{"account_id":25444108,"reputation":1042,"user_id":19246531,"display_name":"Nataraj Medayhal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656505718,"creation_date":1656505718,"answer_id":72801458,"question_id":72799937,"body_markdown":"As config map being used to hold the certificate, the same can be mounted as file inside the container.  Please refer k8s [documentation][1] to load as file.  Post that add it trust store during container start.  \r\n\r\n\r\n  [1]: https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#populate-a-volume-with-data-stored-in-a-configmap","title":"Load certificate from ConfigMap in OpenShift to call external service using ApacheHttpClient","body":"<p>As config map being used to hold the certificate, the same can be mounted as file inside the container.  Please refer k8s <a href=\"https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#populate-a-volume-with-data-stored-in-a-configmap\" rel=\"nofollow noreferrer\">documentation</a> to load as file.  Post that add it trust store during container start.</p>\n"}],"owner":{"account_id":18606859,"reputation":183,"user_id":13560278,"display_name":"maciejd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656505718,"creation_date":1656498902,"question_id":72799937,"body_markdown":"I am building an adapter application that should sent the data to an external service using HTTPS. While testing locally (against a mock server), I am saving the certificate in a local truststore and loading it using ```loadTrustMaterial(file, password)``` method. The difference in productive environment is that the application is running in OpenShift and the certificate is saved in ConfigMap.\r\n\r\n**Question:**\r\nHow can I retrieve that certificate from ConfigMap in OpenShift (is there any url to the cert?), so my application can call external service?\r\n\r\nHere are some code snippets for clarity:\r\n\r\n``` \r\nprivate HttpResponse connectToExternalService(String xml) {\r\n\r\n        StringEntity stringEntity = null;\r\n        try {\r\n\r\n            stringEntity = new StringEntity(xml);\r\n            SSLContext sslContext = this.createSSLContext();\r\n            \r\n            SSLConnectionSocketFactory factory = new SSLConnectionSocketFactory(sslContext);\r\n            CloseableHttpClient client = HttpClients.custom().setSSLSocketFactory(factory).build();\r\n\r\n            HttpPost post = new HttpPost(url);\r\n            post.setEntity(stringEntity);\r\n            post.setHeader(&quot;Content-Type&quot;, &quot;text/xml&quot;);\r\n            return client.execute(post);\r\n\r\n        } catch (IOException e) {\r\n            \r\n        }\r\n    }\r\n\r\n\r\nprivate SSLContext createSSLContext() {\r\n        File file = new File(&quot;path to the truststore&quot;);\r\n        try {\r\n            char[] password = &quot;password&quot;.toCharArray();\r\n            return SSLContexts.custom().loadTrustMaterial(file, password).build();\r\n        } catch (NoSuchAlgorithmException | KeyManagementException | KeyStoreException e) {\r\n\r\n        }\r\n    }\r\n```","title":"Load certificate from ConfigMap in OpenShift to call external service using ApacheHttpClient","body":"<p>I am building an adapter application that should sent the data to an external service using HTTPS. While testing locally (against a mock server), I am saving the certificate in a local truststore and loading it using <code>loadTrustMaterial(file, password)</code> method. The difference in productive environment is that the application is running in OpenShift and the certificate is saved in ConfigMap.</p>\n<p><strong>Question:</strong>\nHow can I retrieve that certificate from ConfigMap in OpenShift (is there any url to the cert?), so my application can call external service?</p>\n<p>Here are some code snippets for clarity:</p>\n<pre><code>private HttpResponse connectToExternalService(String xml) {\n\n        StringEntity stringEntity = null;\n        try {\n\n            stringEntity = new StringEntity(xml);\n            SSLContext sslContext = this.createSSLContext();\n            \n            SSLConnectionSocketFactory factory = new SSLConnectionSocketFactory(sslContext);\n            CloseableHttpClient client = HttpClients.custom().setSSLSocketFactory(factory).build();\n\n            HttpPost post = new HttpPost(url);\n            post.setEntity(stringEntity);\n            post.setHeader(&quot;Content-Type&quot;, &quot;text/xml&quot;);\n            return client.execute(post);\n\n        } catch (IOException e) {\n            \n        }\n    }\n\n\nprivate SSLContext createSSLContext() {\n        File file = new File(&quot;path to the truststore&quot;);\n        try {\n            char[] password = &quot;password&quot;.toCharArray();\n            return SSLContexts.custom().loadTrustMaterial(file, password).build();\n        } catch (NoSuchAlgorithmException | KeyManagementException | KeyStoreException e) {\n\n        }\n    }\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":0,"creation_date":1656505464,"post_id":72801291,"comment_id":128588578,"body_markdown":"After click hide the gird then pass the gird list to slider and show it","body":"After click hide the gird then pass the gird list to slider and show it"},{"owner":{"account_id":6665000,"reputation":1568,"user_id":5142901,"display_name":"boroboris"},"score":0,"creation_date":1656515048,"post_id":72801291,"comment_id":128592909,"body_markdown":"hi Ramkumar, welcome to stackoverflow. Could you give us images of what exactly happens and examples of code or examples of what you&#39;ve tried?","body":"hi Ramkumar, welcome to stackoverflow. Could you give us images of what exactly happens and examples of code or examples of what you&#39;ve tried?"}],"owner":{"account_id":25412360,"reputation":1,"user_id":19443508,"display_name":"Ramkumar A"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656505176,"creation_date":1656505008,"question_id":72801291,"body_markdown":"By clicking on any image in the grid view, all the images in the grid system should be reflected as a slide show. I do not know what the coding for this is. Let those who know to answer me","title":"Grid View image click event goes to Image Slide view . Android","body":"<p>By clicking on any image in the grid view, all the images in the grid system should be reflected as a slide show. I do not know what the coding for this is. Let those who know to answer me</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":2,"creation_date":1656249305,"post_id":72718129,"comment_id":128520648,"body_markdown":"According to [this](https://developer.android.com/topic/libraries/architecture/saving-states#ui-dismissal-user) saved state is destroyed when back is pressed. Maybe saving it in SharedPreferences is what you need here instead, although it should work switching apps...","body":"According to <a href=\"https://developer.android.com/topic/libraries/architecture/saving-states#ui-dismissal-user\" rel=\"nofollow noreferrer\">this</a> saved state is destroyed when back is pressed. Maybe saving it in SharedPreferences is what you need here instead, although it should work switching apps..."},{"owner":{"account_id":2340382,"reputation":475,"user_id":2051815,"accept_rate":98,"display_name":"John Smith"},"score":0,"creation_date":1656250120,"post_id":72718129,"comment_id":128520837,"body_markdown":"@TylerV, yes. But how can you save the bundle? `SharedPreferences` cannot handle `Parcelable`, right? I tested this earlier today.","body":"@TylerV, yes. But how can you save the bundle? <code>SharedPreferences</code> cannot handle <code>Parcelable</code>, right? I tested this earlier today."},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":1,"creation_date":1656250202,"post_id":72718129,"comment_id":128520861,"body_markdown":"No, you&#39;d have to serialize it some other way. Saving it as a JSON string is a common approach. Have a look [here](https://stackoverflow.com/questions/28439003/use-parcelable-to-store-item-as-sharedpreferences)","body":"No, you&#39;d have to serialize it some other way. Saving it as a JSON string is a common approach. Have a look <a href=\"https://stackoverflow.com/questions/28439003/use-parcelable-to-store-item-as-sharedpreferences\">here</a>"},{"owner":{"account_id":2340382,"reputation":475,"user_id":2051815,"accept_rate":98,"display_name":"John Smith"},"score":0,"creation_date":1656250368,"post_id":72718129,"comment_id":128520907,"body_markdown":"@TylerV, what you are suggesting, is basically, to jsonify the object along with everything else, and then use the `SharedPreference` class?","body":"@TylerV, what you are suggesting, is basically, to jsonify the object along with everything else, and then use the <code>SharedPreference</code> class?"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":1,"creation_date":1656250558,"post_id":72718129,"comment_id":128520945,"body_markdown":"Yep, that may be what you need to do to get it to persist past a back press","body":"Yep, that may be what you need to do to get it to persist past a back press"},{"owner":{"account_id":2340382,"reputation":475,"user_id":2051815,"accept_rate":98,"display_name":"John Smith"},"score":0,"creation_date":1656250587,"post_id":72718129,"comment_id":128520953,"body_markdown":"@TylerV, *I will try this now* DAFAQ! ;-)","body":"@TylerV, <i>I will try this now</i> DAFAQ! ;-)"}],"answers":[{"tags":[],"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656346430,"creation_date":1656253075,"answer_id":72762373,"question_id":72718129,"body_markdown":"Since saved instance state is cleared when the back button is pressed, you will need to store your game data in something more persistent. One common choice is to serialize it to Json and save it in SharedPreferences. You can do this with the [Moshi library](https://github.com/square/moshi) pretty easily.\r\n\r\n**ThirtyThrowsGame**\r\n\r\n```java\r\nprivate static final Moshi moshi = new Moshi\r\n        .Builder()\r\n        .add(new ScoreArrayListMoshiAdapter())\r\n        .add(new ScoreChoiceArrayListMoshiAdapter())\r\n        .build();\r\n\r\nprivate static final JsonAdapter&lt;ThirtyThrowsGame&gt; jsonAdapter = moshi.adapter(ThirtyThrowsGame.class);\r\n\r\nstatic ThirtyThrowsGame fromJson(String json) {\r\n    try {\r\n        return jsonAdapter.fromJson(json);\r\n    }\r\n    catch(IOException e) {\r\n        return null;\r\n    }\r\n}\r\n\r\nString toJson() {\r\n    return jsonAdapter.toJson(this);\r\n}\r\n\r\n// Moshi doesn&#39;t play nice with ArrayList, so you need to add\r\n// these to convert your ArrayList&lt;X&gt; back and forth to List&lt;X&gt;\r\nstatic class ScoreArrayListMoshiAdapter {\r\n    @ToJson\r\n    List&lt;Score&gt; arrayListToJson(ArrayList&lt;Score&gt; list) {\r\n        return list;\r\n    }\r\n\r\n    @FromJson\r\n    ArrayList&lt;Score&gt; arrayListFromJson(List&lt;Score&gt; list) {\r\n        return new ArrayList&lt;&gt;(list);\r\n    }\r\n}\r\n\r\nstatic class ScoreChoiceArrayListMoshiAdapter {\r\n    @ToJson\r\n    List&lt;ScoreChoice&gt; arrayListToJson(ArrayList&lt;ScoreChoice&gt; list) {\r\n        return list;\r\n    }\r\n\r\n    @FromJson\r\n    ArrayList&lt;ScoreChoice&gt; arrayListFromJson(List&lt;ScoreChoice&gt; list) {\r\n        return new ArrayList&lt;&gt;(list);\r\n    }\r\n}\r\n```\r\n\r\nNo changes are needed to the other classes other than removing the Parcelable and Serializable interfaces. Then in your Activity you can use\r\n\r\n```java\r\nprivate ThirtyThrowsGame game;\r\nprivate SharedPreferences prefs;\r\nprivate final String GAME = &quot;SAVED_GAME&quot;;\r\n\r\n@Override\r\nprotected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n    setContentView(R.layout.activity_main);\r\n\r\n    prefs = PreferenceManager.getDefaultSharedPreferences(this);\r\n    \r\n    if( prefs.contains(GAME) ) {\r\n        String json = prefs.getString(GAME, &quot;{}&quot;);\r\n        game = ThirtyThrowsGame.fromJson(json);\r\n    }\r\n    else {\r\n        game = new ThirtyThrowsGame();\r\n    }\r\n}\r\n\r\n// When the game is &quot;done&quot; and you actually want to clear it, delete it\r\n// from SharedPrefs yourself and exit without saving the state.\r\nprivate boolean save_on_exit = true;\r\nprivate void finishGame() {\r\n    prefs.edit().remove(GAME).apply();\r\n    save_on_exit = false;\r\n    finish();\r\n}\r\n\r\n// save the game at some point in the lifecycle, either onPause\r\n// or onStop - unless the game is finishing\r\n@Override\r\nprotected void onPause() {\r\n    super.onPause();\r\n    if( save_on_exit ) {\r\n        prefs.edit().putString(GAME, game.toJson()).apply();\r\n    }\r\n}\r\n```\r\n\r\nTo use Moshi, just add this to the Gradle file\r\n\r\n```\r\nimplementation &#39;com.squareup.moshi:moshi:1.13.0&#39;\r\n```","title":"Save and recover state of game object in Android","body":"<p>Since saved instance state is cleared when the back button is pressed, you will need to store your game data in something more persistent. One common choice is to serialize it to Json and save it in SharedPreferences. You can do this with the <a href=\"https://github.com/square/moshi\" rel=\"nofollow noreferrer\">Moshi library</a> pretty easily.</p>\n<p><strong>ThirtyThrowsGame</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final Moshi moshi = new Moshi\n        .Builder()\n        .add(new ScoreArrayListMoshiAdapter())\n        .add(new ScoreChoiceArrayListMoshiAdapter())\n        .build();\n\nprivate static final JsonAdapter&lt;ThirtyThrowsGame&gt; jsonAdapter = moshi.adapter(ThirtyThrowsGame.class);\n\nstatic ThirtyThrowsGame fromJson(String json) {\n    try {\n        return jsonAdapter.fromJson(json);\n    }\n    catch(IOException e) {\n        return null;\n    }\n}\n\nString toJson() {\n    return jsonAdapter.toJson(this);\n}\n\n// Moshi doesn't play nice with ArrayList, so you need to add\n// these to convert your ArrayList&lt;X&gt; back and forth to List&lt;X&gt;\nstatic class ScoreArrayListMoshiAdapter {\n    @ToJson\n    List&lt;Score&gt; arrayListToJson(ArrayList&lt;Score&gt; list) {\n        return list;\n    }\n\n    @FromJson\n    ArrayList&lt;Score&gt; arrayListFromJson(List&lt;Score&gt; list) {\n        return new ArrayList&lt;&gt;(list);\n    }\n}\n\nstatic class ScoreChoiceArrayListMoshiAdapter {\n    @ToJson\n    List&lt;ScoreChoice&gt; arrayListToJson(ArrayList&lt;ScoreChoice&gt; list) {\n        return list;\n    }\n\n    @FromJson\n    ArrayList&lt;ScoreChoice&gt; arrayListFromJson(List&lt;ScoreChoice&gt; list) {\n        return new ArrayList&lt;&gt;(list);\n    }\n}\n</code></pre>\n<p>No changes are needed to the other classes other than removing the Parcelable and Serializable interfaces. Then in your Activity you can use</p>\n<pre class=\"lang-java prettyprint-override\"><code>private ThirtyThrowsGame game;\nprivate SharedPreferences prefs;\nprivate final String GAME = &quot;SAVED_GAME&quot;;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    prefs = PreferenceManager.getDefaultSharedPreferences(this);\n    \n    if( prefs.contains(GAME) ) {\n        String json = prefs.getString(GAME, &quot;{}&quot;);\n        game = ThirtyThrowsGame.fromJson(json);\n    }\n    else {\n        game = new ThirtyThrowsGame();\n    }\n}\n\n// When the game is &quot;done&quot; and you actually want to clear it, delete it\n// from SharedPrefs yourself and exit without saving the state.\nprivate boolean save_on_exit = true;\nprivate void finishGame() {\n    prefs.edit().remove(GAME).apply();\n    save_on_exit = false;\n    finish();\n}\n\n// save the game at some point in the lifecycle, either onPause\n// or onStop - unless the game is finishing\n@Override\nprotected void onPause() {\n    super.onPause();\n    if( save_on_exit ) {\n        prefs.edit().putString(GAME, game.toJson()).apply();\n    }\n}\n</code></pre>\n<p>To use Moshi, just add this to the Gradle file</p>\n<pre><code>implementation 'com.squareup.moshi:moshi:1.13.0'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17945478,"reputation":1363,"user_id":16177121,"display_name":"Sidharth Mudgil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656505132,"creation_date":1656504528,"answer_id":72801184,"question_id":72718129,"body_markdown":"To save activity state override `onSaveInstanceState` method and to restore the state override `onRestoreInstanceState` method.\r\n\r\n``` java\r\nclass GameObj extends Serializable\r\n{\r\n  // game members\r\n\r\n  public Obj() {}\r\n\r\n  // getters and \r\n}\r\n```\r\n\r\n``` java\r\n@Override\r\npublic void onSaveInstanceState(Bundle savedInstanceState) {\r\n  super.onSaveInstanceState(savedInstanceState);\r\n  savedInstanceState.putSerializable(&quot;my_obj&quot;, obj);\r\n}\r\n\r\n@Override\r\npublic void onRestoreInstanceState(Bundle savedInstanceState) {\r\n  super.onRestoreInstanceState(savedInstanceState);\r\n  GameObj obj = savedInstanceState.getSerializable(&quot;my_obj&quot;, obj);\r\n}\r\n```","title":"Save and recover state of game object in Android","body":"<p>To save activity state override <code>onSaveInstanceState</code> method and to restore the state override <code>onRestoreInstanceState</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class GameObj extends Serializable\n{\n  // game members\n\n  public Obj() {}\n\n  // getters and \n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void onSaveInstanceState(Bundle savedInstanceState) {\n  super.onSaveInstanceState(savedInstanceState);\n  savedInstanceState.putSerializable(&quot;my_obj&quot;, obj);\n}\n\n@Override\npublic void onRestoreInstanceState(Bundle savedInstanceState) {\n  super.onRestoreInstanceState(savedInstanceState);\n  GameObj obj = savedInstanceState.getSerializable(&quot;my_obj&quot;, obj);\n}\n</code></pre>\n"}],"owner":{"account_id":2340382,"reputation":475,"user_id":2051815,"accept_rate":98,"display_name":"John Smith"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72762373,"answer_count":2,"score":0,"last_activity_date":1656505132,"creation_date":1655911313,"question_id":72718129,"body_markdown":"**EDIT: THE MAIN ISSUE, DEALING WITH SAVING STATE ON BACK BUTTON PRESSED. And then re-load the bundle onCreate. Not sure, how this can be done correctly. Nothing, I tried so far has worked correctly.** \r\n\r\nI am trying to save and recover the state of a simple game I made in Android. I am utilizing, the following events: `onSaveInstanceState()`, `onBackPressed()`, `onCreate()` and `onPostCreate()`. I am making my objects `Serializable` and `Parcelable`. \r\n\r\nHowever, it does not successfully remember or recover in the state, before, pushing the back button or when just switching apps. Not, sure, of what I am doing wrong here. It&#39;s a behavioral error, i.e., no real error occurs.\r\n\r\n**Dice.java**\r\n\r\n    public class Dice implements Parcelable {\r\n        private int value;\r\n        private int currentImage;\r\n        private boolean marked = false; \r\n        private boolean enabled = true;\r\n        private final Random random = new Random();\r\n    \r\n        // Mapping of drawable resources:\r\n        private final int[] defaultDiceImages = {0,\r\n                R.drawable.white1, R.drawable.white2,\r\n                R.drawable.white3, R.drawable.white4,\r\n                R.drawable.white5, R.drawable.white6\r\n        };\r\n    \r\n        private final int[] selectedDiceImages = { 0,\r\n                R.drawable.grey1, R.drawable.grey2, R.drawable.grey3,\r\n                R.drawable.grey4, R.drawable.grey5, R.drawable.grey6\r\n        };\r\n    \r\n        private final int[] redDiceImages = { 0,\r\n                R.drawable.red1, R.drawable.red2, R.drawable.red3,\r\n                R.drawable.red4, R.drawable.red5, R.drawable.red6\r\n        };\r\n    \r\n        // Constructor\r\n        Dice() { }\r\n    \r\n        Dice(int value){\r\n            this.value = value;\r\n            this.currentImage = defaultDiceImages[this.value];\r\n        }\r\n    \r\n        protected Dice(Parcel in) {\r\n            value = in.readInt();\r\n         /*   currentImage = in.readInt();\r\n            marked = in.readByte() != 0;\r\n            enabled = in.readByte() != 0;\r\n            defaultDiceImages = in.createIntArray();\r\n            selectedDiceImages = in.createIntArray();\r\n            redDiceImages = in.createIntArray(); */\r\n        }\r\n    \r\n        public static final Creator&lt;Dice&gt; CREATOR = new Creator&lt;Dice&gt;() {\r\n            @Override\r\n            public Dice createFromParcel(Parcel in) { return new Dice(in); }\r\n    \r\n            @Override\r\n            public Dice[] newArray(int size) { return new Dice[size]; }\r\n        };\r\n    \r\n        public boolean IsMarked() { return marked; }\r\n    \r\n        public int GetValue() { return value; }\r\n    \r\n        public void Toss() {\r\n            if(enabled) {\r\n                this.value = random.nextInt(6) + 1;\r\n                this.currentImage = defaultDiceImages[this.value];\r\n            }\r\n        }\r\n    \r\n        public int GetCurrentImage(){ return currentImage; }\r\n    \r\n    \r\n        public void ToggleMarked() {\r\n            marked = !marked;\r\n            currentImage = (this.marked) ? selectedDiceImages[this.value] : defaultDiceImages[this.value];\r\n        }\r\n    \r\n        public void ToggleEnabled() { enabled = !enabled; }\r\n    \r\n        @NonNull\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Dice{&quot; +\r\n                    &quot;   value=&quot; + this.value +\r\n                    &quot;, currentImage=&quot; + this.currentImage +\r\n                    &quot;, marked=&quot; + this.marked +\r\n                    &quot;, enabled=&quot; + this.enabled +\r\n                    &quot;, random=&quot; + this.random +\r\n                    &#39;}&#39;;\r\n        }\r\n    \r\n        @Override\r\n        public int describeContents() { return 0; }\r\n    \r\n        @Override\r\n        public void writeToParcel(Parcel parcel, int i)\r\n        {\r\n            parcel.writeInt(this.value);\r\n        }\r\n    } \r\n\r\n**Score.java**\r\n\r\n    public class Score implements Serializable {\r\n    \r\n        private int score = 0;\r\n        private String choice;\r\n        private static final int SCORE_LOW = 3;\r\n    \r\n        public Score() {}\r\n    \r\n        public Score(int score, String choice) {\r\n            this.score = score;\r\n            this.choice = choice;\r\n        }\r\n    \r\n        public int getScore(){\r\n            return this.score;\r\n        }\r\n        public void setScore(int score){\r\n            this.score = score;\r\n        }\r\n    \r\n        public String getChoice() {\r\n            return choice;\r\n        }\r\n    \r\n        public void setChoice(String choice) {\r\n            choice = choice;\r\n        }\r\n    }\r\n\r\n**GameRound.java**\r\n\r\n    import android.content.Context;\r\n    import android.os.Parcel;\r\n    import android.os.Parcelable;\r\n    import android.view.Gravity;\r\n    import android.widget.Toast;\r\n    \r\n    import java.io.Serializable;\r\n    import java.util.ArrayList;\r\n    \r\n    public class GameRound implements Parcelable, Serializable {\r\n    \r\n        // Constants\r\n        private final int NUMBER_OF_DICES = 6;\r\n        private final int MAX_ALLOWED_THROWS = 3;\r\n    \r\n        private ArrayList&lt;Dice&gt; dices;\r\n    \r\n        public int totalDices;\r\n        private int throwsLeft;\r\n        private Score roundScore;\r\n        \r\n        public GameRound() {\r\n            this.dices = GenerateNewDices();\r\n            this.roundScore = new Score();\r\n            this.throwsLeft = MAX_ALLOWED_THROWS;\r\n        }\r\n    \r\n        protected GameRound(Parcel in) {\r\n            this.totalDices = in.readInt();\r\n            this.throwsLeft = in.readInt();\r\n            this.dices = (ArrayList&lt;Dice&gt;)in.readSerializable();\r\n            this.roundScore = (Score)in.readSerializable();\r\n        }\r\n    \r\n        public ArrayList&lt;Dice&gt; GetDices() { return dices; }\r\n    \r\n        public ArrayList&lt;Dice&gt; GenerateNewDices() {\r\n            ArrayList&lt;Dice&gt; tmp = new ArrayList&lt;&gt;(NUMBER_OF_DICES);\r\n            if(totalDices == 0)\r\n                totalDices = NUMBER_OF_DICES;\r\n    \r\n            for(int i = 0; i&lt;totalDices; i++){\r\n                tmp.add(new Dice(i));\r\n            }\r\n            return tmp;\r\n        }\r\n    \r\n        public Score GetScore() { return roundScore; }\r\n    \r\n        public int GetThrowsLeftCount() { return throwsLeft; }\r\n    \r\n        public void SetRoundScore(Score score) {\r\n            this.roundScore = score;\r\n        }\r\n    \r\n        public void TossDices(Context context){\r\n            if(ValidateAttempt(context)){\r\n                int selectedCount = (int)this.dices.stream().filter(Dice::IsMarked).count();\r\n                if(selectedCount &gt; 0) {\r\n                    for (Dice d : this.dices) {\r\n                        if(d.IsMarked()) {\r\n                            d.Toss();\r\n                            d.ToggleMarked(); // Reset\r\n                        }\r\n                    }\r\n                } else {\r\n                    for (Dice d : this.dices) {\r\n                        d.Toss();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        private boolean ValidateAttempt(Context context) {\r\n            if(throwsLeft &gt; 0){\r\n                --throwsLeft;\r\n                return true;\r\n            } else {\r\n                Toast toast = Toast.makeText(context, &quot;&quot;, Toast.LENGTH_SHORT);\r\n                toast.setGravity(Gravity.TOP, 0, 200);\r\n                toast.show();\r\n                return false;\r\n            }\r\n        }\r\n    \r\n        public boolean CanPlay(){\r\n            return throwsLeft != 0;\r\n        }\r\n    \r\n        public void Reset() {\r\n            for(Dice d: this.dices){\r\n                d.Toss();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void writeToParcel(Parcel dest, int flags) {\r\n            dest.writeInt(totalDices);\r\n            dest.writeInt(throwsLeft);\r\n            dest.writeSerializable(dices);\r\n            dest.writeSerializable(roundScore);\r\n        }\r\n    \r\n        @Override\r\n        public int describeContents() { return 0; }\r\n    \r\n        public static final Creator&lt;GameRound&gt; CREATOR = new Creator&lt;GameRound&gt;() {\r\n            @Override\r\n            public GameRound createFromParcel(Parcel in) { return new GameRound(in); }\r\n    \r\n            @Override\r\n            public GameRound[] newArray(int size) { return new GameRound[size]; }\r\n        };\r\n    }\r\n\r\n**ThirtyThrowsGame.java:**\r\n\r\n    import android.os.Parcel;\r\n    import android.os.Parcelable;\r\n    \r\n    import java.io.Serializable;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.Collections;\r\n    import java.util.HashSet;\r\n    \r\n    import androidx.core.util.Pair;\r\n    \r\n    public class ThirtyThrowsGame implements Parcelable, Serializable {\r\n        public enum ScoreChoice {\r\n            LOW(3),\r\n            FOUR(4),\r\n            FIVE(5),\r\n            SIX(6),\r\n            SEVEN(7),\r\n            EIGHT(8),\r\n            NINE(9),\r\n            TEN(10),\r\n            ELEVEN(11),\r\n            TWELVE(12),\r\n            ;\r\n    \r\n            private final int value;\r\n            ScoreChoice(int n) {\r\n                value = n;\r\n            }\r\n            public int getValue() {\r\n                return value;\r\n            }\r\n        }\r\n    \r\n        public final int MAX_ROUNDS; \r\n        private int currentRound;\r\n        private GameRound round;\r\n        private ArrayList&lt;Score&gt; scores = new ArrayList&lt;&gt;();\r\n        private ArrayList&lt;ScoreChoice&gt; availableScoreChoices = new ArrayList&lt;&gt;();\r\n    \r\n    \r\n        public ThirtyThrowsGame(){\r\n            this.currentRound = 1;\r\n            MAX_ROUNDS = 10;\r\n            this.round = new GameRound();\r\n            this.availableScoreChoices.addAll(Arrays.asList(ScoreChoice.values()));\r\n            Collections.reverse(availableScoreChoices);\r\n        }\r\n    \r\n        protected ThirtyThrowsGame(Parcel in) {\r\n            this.scores = (ArrayList&lt;Score&gt;)in.readSerializable();\r\n            MAX_ROUNDS = in.readInt();\r\n            this.currentRound = in.readInt();\r\n            this.round = in.readParcelable(GameRound.class.getClassLoader());\r\n            this.availableScoreChoices.addAll(Arrays.asList(ScoreChoice.values()));\r\n            Collections.reverse(availableScoreChoices);\r\n        }\r\n    \r\n        private static int[] DiceValuesToArray(ArrayList&lt;Dice&gt; dices) {\r\n            int[] a = new int[dices.size()];\r\n            for (int i = 0; i &lt; dices.size(); i++) {\r\n                a[i] = dices.get(i).GetValue();\r\n            }\r\n            return a;\r\n        }\r\n    \r\n        public int calculateScoreLow(ArrayList&lt;Dice&gt; dices, int value) {\r\n            int sum = 0;\r\n            int[] a = DiceValuesToArray(dices);\r\n            for (int j : a) {\r\n                if (j &lt;= value) {\r\n                    sum += j;\r\n                }\r\n            }\r\n            return sum;\r\n        }\r\n    \r\n        public int calculateScore(ArrayList&lt;Dice&gt; dices, int value) {\r\n            ArrayList&lt;Integer&gt; matches = new ArrayList&lt;&gt;();\r\n            int[] a = DiceValuesToArray(dices);\r\n            for(int i = 0; i&lt;a.length; ++i)\r\n                for(int j = i + 1; j&lt;a.length; ++j)\r\n                    if(a[i] + a[j] == value){ // &lt;- Pairs that match sum\r\n                        matches.add(a[i]);\r\n                        matches.add(a[j]);\r\n                        break;\r\n                    } else if(a[i] == value){ // &lt;- Single candidates that match sum\r\n                        matches.add(a[i]); break;\r\n                    }\r\n            return matches.stream().mapToInt(Integer::intValue).sum(); // &lt;- Return the sum of ints\r\n        }\r\n    \r\n        public void Restart(){\r\n            Clear();\r\n            this.round = new GameRound();\r\n        }\r\n    \r\n        public ArrayList&lt;Score&gt; GetRegistredScores() { return scores; }\r\n        public void SaveScore() { this.scores.add(round.GetScore()); }\r\n        public int TotalScore() {\r\n           return this.scores.stream().mapToInt(Score::getScore).sum();\r\n        }\r\n        public boolean NextRound() {\r\n            if(currentRound &lt; MAX_ROUNDS) {\r\n                ++currentRound;\r\n                SaveScore();\r\n                this.round = null;\r\n                this.round = new GameRound();\r\n                return false;\r\n            }\r\n    \r\n            SaveScore();\r\n            return true;\r\n        }\r\n    \r\n        public int GetCurrentRound() {\r\n            return currentRound;\r\n        }\r\n    \t\r\n        public GameRound GetCurrentGameRound() { return round; }\r\n    \r\n        public ArrayList&lt;ScoreChoice&gt; GetAvailableScoreChoices(){\r\n            return new ArrayList&lt;&gt;(availableScoreChoices);\r\n        }\r\n    \r\n        public void Clear(){\r\n            this.currentRound = 1;\r\n            //rounds.clear();\r\n            this.scores.clear();\r\n            this.round = null;\r\n        }\r\n    \r\n       \r\n        @Override\r\n        public void writeToParcel(Parcel dest, int flags) {\r\n            dest.writeSerializable((scores));\r\n            dest.writeInt(MAX_ROUNDS);\r\n            dest.writeInt(currentRound);\r\n            dest.writeSerializable(round);\r\n        }\r\n    \r\n        @Override\r\n        public int describeContents() { return 0; }\r\n    \r\n        public static final Creator&lt;ThirtyThrowsGame&gt; CREATOR = new Creator&lt;ThirtyThrowsGame&gt;() {\r\n            @Override\r\n            public ThirtyThrowsGame createFromParcel(Parcel in) { return new ThirtyThrowsGame(in); }\r\n    \r\n            @Override\r\n            public ThirtyThrowsGame[] newArray(int size) { return new ThirtyThrowsGame[size]; }\r\n      \r\n\r\n  };\r\n}\r\n\r\n**MainActivity.java:**\r\n\r\n     // Parcelable key\r\n        private final String STATE_GAME = &quot;STATE_GAME&quot;;\r\n    \r\n        // Classes\r\n        private ThirtyThrowsGame game;\r\n    \r\n        // View components\r\n        private Button rollBtn;\r\n        private Button collectScoreBtn;\r\n        private TextView roundText;\r\n        private TextView currentScoreText;\r\n        private Spinner scoreSelectionSpinner;\r\n        private ArrayAdapter&lt;ThirtyThrowsGame.ScoreChoice&gt; adapter;\r\n        private ArrayList&lt;ImageView&gt; diceViews;\r\n    \r\n        // Data\r\n        int score = 0;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            // Find elements on the UI by id.\r\n            rollBtn = findViewById(R.id.btnRoll);\r\n            collectScoreBtn = findViewById(R.id.btnCollectScore);\r\n            scoreSelectionSpinner = findViewById(R.id.spinner);\r\n            roundText = findViewById(R.id.RoundText);\r\n            currentScoreText = findViewById(R.id.CurrentScoreText);\r\n    \r\n            if (savedInstanceState != null) {\r\n                this.game = (ThirtyThrowsGame) savedInstanceState.getSerializable(STATE_GAME);\r\n            } else {\r\n                this.game = new ThirtyThrowsGame();\r\n            }\r\n    \r\n            rollBtn.setOnClickListener(e -&gt; {\r\n                if (game.GetCurrentGameRound().CanPlay()) {\r\n                    RefreshScene(this);\r\n                    SetScore();\r\n                } else {\r\n                    Toast toast = Toast.makeText(\r\n                            this,\r\n                            &quot;Please collect score to run next round.&quot;,\r\n                            Toast.LENGTH_SHORT\r\n                    );\r\n                    toast.show();\r\n                }\r\n            });\r\n    \r\n            collectScoreBtn.setOnClickListener(e -&gt; {\r\n                scoreSelectionSpinner.setSelection(0);\r\n                boolean _continue = game.NextRound();\r\n                score = 0;\r\n                SetDefaultDiceView();\r\n                RefreshScene();\r\n    \r\n                if (_continue) {\r\n                    NextActivity();\r\n                }\r\n            });\r\n    \r\n            SetupDropDown();\r\n            GetDiceViews();\r\n            SetupDiceClickEventListeners();\r\n    \r\n            currentScoreText.setText(getString(R.string.score, 0));\r\n            roundText.setText(getString(R.string.round, game.GetCurrentRound()));\r\n            RefreshRollButtonText();\r\n        }\r\n    \r\n        @Override\r\n        protected void onPostCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onPostCreate(savedInstanceState);\r\n            if (savedInstanceState != null) {\r\n                if (game != null) {\r\n                    score = game.GetCurrentGameRound().GetScore().getScore();\r\n                    if (score == 0) {\r\n                        SetDefaultDiceView();\r\n                    } else {\r\n                        UpdateImageViews();\r\n                    }\r\n                    RefreshScene();\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onSaveInstanceState(Bundle outState) {\r\n            outState.putSerializable(STATE_GAME, game);\r\n            super.onSaveInstanceState(outState);\r\n        }\r\n    \r\n        @Override\r\n        public void onBackPressed() {\r\n            moveTaskToBack(true);\r\n        }\r\n\r\n     private void SetDefaultDiceView() {\r\n            diceViews.get(0).setImageResource(R.drawable.white1);\r\n            diceViews.get(1).setImageResource(R.drawable.white2);\r\n            diceViews.get(2).setImageResource(R.drawable.white3);\r\n            diceViews.get(3).setImageResource(R.drawable.white4);\r\n            diceViews.get(4).setImageResource(R.drawable.white5);\r\n            diceViews.get(5).setImageResource(R.drawable.white6);\r\n        }\r\n\r\n    private void SetupDiceClickEventListeners() {\r\n            int index = 0;\r\n            for (ImageView v : diceViews) {\r\n                int finalIndex = index;\r\n                v.setOnClickListener(e -&gt; {\r\n                  this.game.GetCurrentGameRound().GetDices().get(finalIndex).ToggleMarked();\r\n                    diceViews.get(finalIndex).setImageResource(game.GetCurrentGameRound()\r\n                            .GetDices().get(finalIndex).GetCurrentImage());\r\n                });\r\n                ++index;\r\n            }\r\n        }\r\n\r\n     public void RefreshScene() {\r\n            roundText.setText(getString(R.string.round, game.GetCurrentRound()));\r\n            currentScoreText.setText(getString(R.string.score, game.GetCurrentGameRound().GetScore().getScore()));\r\n            RefreshRollButtonText();\r\n        }\r\n\r\n        public void RefreshScene(Context context) {\r\n            game.GetCurrentGameRound().TossDices(context);\r\n            roundText.setText(getString(R.string.round, game.GetCurrentRound()));\r\n            UpdateImageViews();\r\n            RefreshRollButtonText();\r\n        }\r\n\r\nThis is pretty much almost all of the code here. If someone, can spot the issues, please let me know. I been struggling with this for weeks now, and it is getting deeply annoying. I need to ensure, it works when you leave the back in the background, so that it recovers the game state and continues to reflect this on the UI. \r\n\r\n**EDIT:** ***Yes, I ran this in debug mode stepping throw the code.*** \r\n\r\n**EDIT 6/27/2022: I have developer mode enabled with &quot;Don&#39;t keep activities&quot; enabled.** ","title":"Save and recover state of game object in Android","body":"<p><strong>EDIT: THE MAIN ISSUE, DEALING WITH SAVING STATE ON BACK BUTTON PRESSED. And then re-load the bundle onCreate. Not sure, how this can be done correctly. Nothing, I tried so far has worked correctly.</strong></p>\n<p>I am trying to save and recover the state of a simple game I made in Android. I am utilizing, the following events: <code>onSaveInstanceState()</code>, <code>onBackPressed()</code>, <code>onCreate()</code> and <code>onPostCreate()</code>. I am making my objects <code>Serializable</code> and <code>Parcelable</code>.</p>\n<p>However, it does not successfully remember or recover in the state, before, pushing the back button or when just switching apps. Not, sure, of what I am doing wrong here. It's a behavioral error, i.e., no real error occurs.</p>\n<p><strong>Dice.java</strong></p>\n<pre><code>public class Dice implements Parcelable {\n    private int value;\n    private int currentImage;\n    private boolean marked = false; \n    private boolean enabled = true;\n    private final Random random = new Random();\n\n    // Mapping of drawable resources:\n    private final int[] defaultDiceImages = {0,\n            R.drawable.white1, R.drawable.white2,\n            R.drawable.white3, R.drawable.white4,\n            R.drawable.white5, R.drawable.white6\n    };\n\n    private final int[] selectedDiceImages = { 0,\n            R.drawable.grey1, R.drawable.grey2, R.drawable.grey3,\n            R.drawable.grey4, R.drawable.grey5, R.drawable.grey6\n    };\n\n    private final int[] redDiceImages = { 0,\n            R.drawable.red1, R.drawable.red2, R.drawable.red3,\n            R.drawable.red4, R.drawable.red5, R.drawable.red6\n    };\n\n    // Constructor\n    Dice() { }\n\n    Dice(int value){\n        this.value = value;\n        this.currentImage = defaultDiceImages[this.value];\n    }\n\n    protected Dice(Parcel in) {\n        value = in.readInt();\n     /*   currentImage = in.readInt();\n        marked = in.readByte() != 0;\n        enabled = in.readByte() != 0;\n        defaultDiceImages = in.createIntArray();\n        selectedDiceImages = in.createIntArray();\n        redDiceImages = in.createIntArray(); */\n    }\n\n    public static final Creator&lt;Dice&gt; CREATOR = new Creator&lt;Dice&gt;() {\n        @Override\n        public Dice createFromParcel(Parcel in) { return new Dice(in); }\n\n        @Override\n        public Dice[] newArray(int size) { return new Dice[size]; }\n    };\n\n    public boolean IsMarked() { return marked; }\n\n    public int GetValue() { return value; }\n\n    public void Toss() {\n        if(enabled) {\n            this.value = random.nextInt(6) + 1;\n            this.currentImage = defaultDiceImages[this.value];\n        }\n    }\n\n    public int GetCurrentImage(){ return currentImage; }\n\n\n    public void ToggleMarked() {\n        marked = !marked;\n        currentImage = (this.marked) ? selectedDiceImages[this.value] : defaultDiceImages[this.value];\n    }\n\n    public void ToggleEnabled() { enabled = !enabled; }\n\n    @NonNull\n    @Override\n    public String toString() {\n        return &quot;Dice{&quot; +\n                &quot;   value=&quot; + this.value +\n                &quot;, currentImage=&quot; + this.currentImage +\n                &quot;, marked=&quot; + this.marked +\n                &quot;, enabled=&quot; + this.enabled +\n                &quot;, random=&quot; + this.random +\n                '}';\n    }\n\n    @Override\n    public int describeContents() { return 0; }\n\n    @Override\n    public void writeToParcel(Parcel parcel, int i)\n    {\n        parcel.writeInt(this.value);\n    }\n} \n</code></pre>\n<p><strong>Score.java</strong></p>\n<pre><code>public class Score implements Serializable {\n\n    private int score = 0;\n    private String choice;\n    private static final int SCORE_LOW = 3;\n\n    public Score() {}\n\n    public Score(int score, String choice) {\n        this.score = score;\n        this.choice = choice;\n    }\n\n    public int getScore(){\n        return this.score;\n    }\n    public void setScore(int score){\n        this.score = score;\n    }\n\n    public String getChoice() {\n        return choice;\n    }\n\n    public void setChoice(String choice) {\n        choice = choice;\n    }\n}\n</code></pre>\n<p><strong>GameRound.java</strong></p>\n<pre><code>import android.content.Context;\nimport android.os.Parcel;\nimport android.os.Parcelable;\nimport android.view.Gravity;\nimport android.widget.Toast;\n\nimport java.io.Serializable;\nimport java.util.ArrayList;\n\npublic class GameRound implements Parcelable, Serializable {\n\n    // Constants\n    private final int NUMBER_OF_DICES = 6;\n    private final int MAX_ALLOWED_THROWS = 3;\n\n    private ArrayList&lt;Dice&gt; dices;\n\n    public int totalDices;\n    private int throwsLeft;\n    private Score roundScore;\n    \n    public GameRound() {\n        this.dices = GenerateNewDices();\n        this.roundScore = new Score();\n        this.throwsLeft = MAX_ALLOWED_THROWS;\n    }\n\n    protected GameRound(Parcel in) {\n        this.totalDices = in.readInt();\n        this.throwsLeft = in.readInt();\n        this.dices = (ArrayList&lt;Dice&gt;)in.readSerializable();\n        this.roundScore = (Score)in.readSerializable();\n    }\n\n    public ArrayList&lt;Dice&gt; GetDices() { return dices; }\n\n    public ArrayList&lt;Dice&gt; GenerateNewDices() {\n        ArrayList&lt;Dice&gt; tmp = new ArrayList&lt;&gt;(NUMBER_OF_DICES);\n        if(totalDices == 0)\n            totalDices = NUMBER_OF_DICES;\n\n        for(int i = 0; i&lt;totalDices; i++){\n            tmp.add(new Dice(i));\n        }\n        return tmp;\n    }\n\n    public Score GetScore() { return roundScore; }\n\n    public int GetThrowsLeftCount() { return throwsLeft; }\n\n    public void SetRoundScore(Score score) {\n        this.roundScore = score;\n    }\n\n    public void TossDices(Context context){\n        if(ValidateAttempt(context)){\n            int selectedCount = (int)this.dices.stream().filter(Dice::IsMarked).count();\n            if(selectedCount &gt; 0) {\n                for (Dice d : this.dices) {\n                    if(d.IsMarked()) {\n                        d.Toss();\n                        d.ToggleMarked(); // Reset\n                    }\n                }\n            } else {\n                for (Dice d : this.dices) {\n                    d.Toss();\n                }\n            }\n        }\n    }\n\n    private boolean ValidateAttempt(Context context) {\n        if(throwsLeft &gt; 0){\n            --throwsLeft;\n            return true;\n        } else {\n            Toast toast = Toast.makeText(context, &quot;&quot;, Toast.LENGTH_SHORT);\n            toast.setGravity(Gravity.TOP, 0, 200);\n            toast.show();\n            return false;\n        }\n    }\n\n    public boolean CanPlay(){\n        return throwsLeft != 0;\n    }\n\n    public void Reset() {\n        for(Dice d: this.dices){\n            d.Toss();\n        }\n    }\n\n    @Override\n    public void writeToParcel(Parcel dest, int flags) {\n        dest.writeInt(totalDices);\n        dest.writeInt(throwsLeft);\n        dest.writeSerializable(dices);\n        dest.writeSerializable(roundScore);\n    }\n\n    @Override\n    public int describeContents() { return 0; }\n\n    public static final Creator&lt;GameRound&gt; CREATOR = new Creator&lt;GameRound&gt;() {\n        @Override\n        public GameRound createFromParcel(Parcel in) { return new GameRound(in); }\n\n        @Override\n        public GameRound[] newArray(int size) { return new GameRound[size]; }\n    };\n}\n</code></pre>\n<p><strong>ThirtyThrowsGame.java:</strong></p>\n<pre><code>import android.os.Parcel;\nimport android.os.Parcelable;\n\nimport java.io.Serializable;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.HashSet;\n\nimport androidx.core.util.Pair;\n\npublic class ThirtyThrowsGame implements Parcelable, Serializable {\n    public enum ScoreChoice {\n        LOW(3),\n        FOUR(4),\n        FIVE(5),\n        SIX(6),\n        SEVEN(7),\n        EIGHT(8),\n        NINE(9),\n        TEN(10),\n        ELEVEN(11),\n        TWELVE(12),\n        ;\n\n        private final int value;\n        ScoreChoice(int n) {\n            value = n;\n        }\n        public int getValue() {\n            return value;\n        }\n    }\n\n    public final int MAX_ROUNDS; \n    private int currentRound;\n    private GameRound round;\n    private ArrayList&lt;Score&gt; scores = new ArrayList&lt;&gt;();\n    private ArrayList&lt;ScoreChoice&gt; availableScoreChoices = new ArrayList&lt;&gt;();\n\n\n    public ThirtyThrowsGame(){\n        this.currentRound = 1;\n        MAX_ROUNDS = 10;\n        this.round = new GameRound();\n        this.availableScoreChoices.addAll(Arrays.asList(ScoreChoice.values()));\n        Collections.reverse(availableScoreChoices);\n    }\n\n    protected ThirtyThrowsGame(Parcel in) {\n        this.scores = (ArrayList&lt;Score&gt;)in.readSerializable();\n        MAX_ROUNDS = in.readInt();\n        this.currentRound = in.readInt();\n        this.round = in.readParcelable(GameRound.class.getClassLoader());\n        this.availableScoreChoices.addAll(Arrays.asList(ScoreChoice.values()));\n        Collections.reverse(availableScoreChoices);\n    }\n\n    private static int[] DiceValuesToArray(ArrayList&lt;Dice&gt; dices) {\n        int[] a = new int[dices.size()];\n        for (int i = 0; i &lt; dices.size(); i++) {\n            a[i] = dices.get(i).GetValue();\n        }\n        return a;\n    }\n\n    public int calculateScoreLow(ArrayList&lt;Dice&gt; dices, int value) {\n        int sum = 0;\n        int[] a = DiceValuesToArray(dices);\n        for (int j : a) {\n            if (j &lt;= value) {\n                sum += j;\n            }\n        }\n        return sum;\n    }\n\n    public int calculateScore(ArrayList&lt;Dice&gt; dices, int value) {\n        ArrayList&lt;Integer&gt; matches = new ArrayList&lt;&gt;();\n        int[] a = DiceValuesToArray(dices);\n        for(int i = 0; i&lt;a.length; ++i)\n            for(int j = i + 1; j&lt;a.length; ++j)\n                if(a[i] + a[j] == value){ // &lt;- Pairs that match sum\n                    matches.add(a[i]);\n                    matches.add(a[j]);\n                    break;\n                } else if(a[i] == value){ // &lt;- Single candidates that match sum\n                    matches.add(a[i]); break;\n                }\n        return matches.stream().mapToInt(Integer::intValue).sum(); // &lt;- Return the sum of ints\n    }\n\n    public void Restart(){\n        Clear();\n        this.round = new GameRound();\n    }\n\n    public ArrayList&lt;Score&gt; GetRegistredScores() { return scores; }\n    public void SaveScore() { this.scores.add(round.GetScore()); }\n    public int TotalScore() {\n       return this.scores.stream().mapToInt(Score::getScore).sum();\n    }\n    public boolean NextRound() {\n        if(currentRound &lt; MAX_ROUNDS) {\n            ++currentRound;\n            SaveScore();\n            this.round = null;\n            this.round = new GameRound();\n            return false;\n        }\n\n        SaveScore();\n        return true;\n    }\n\n    public int GetCurrentRound() {\n        return currentRound;\n    }\n    \n    public GameRound GetCurrentGameRound() { return round; }\n\n    public ArrayList&lt;ScoreChoice&gt; GetAvailableScoreChoices(){\n        return new ArrayList&lt;&gt;(availableScoreChoices);\n    }\n\n    public void Clear(){\n        this.currentRound = 1;\n        //rounds.clear();\n        this.scores.clear();\n        this.round = null;\n    }\n\n   \n    @Override\n    public void writeToParcel(Parcel dest, int flags) {\n        dest.writeSerializable((scores));\n        dest.writeInt(MAX_ROUNDS);\n        dest.writeInt(currentRound);\n        dest.writeSerializable(round);\n    }\n\n    @Override\n    public int describeContents() { return 0; }\n\n    public static final Creator&lt;ThirtyThrowsGame&gt; CREATOR = new Creator&lt;ThirtyThrowsGame&gt;() {\n        @Override\n        public ThirtyThrowsGame createFromParcel(Parcel in) { return new ThirtyThrowsGame(in); }\n\n        @Override\n        public ThirtyThrowsGame[] newArray(int size) { return new ThirtyThrowsGame[size]; }\n  \n</code></pre>\n<p>};\n}</p>\n<p><strong>MainActivity.java:</strong></p>\n<pre><code> // Parcelable key\n    private final String STATE_GAME = &quot;STATE_GAME&quot;;\n\n    // Classes\n    private ThirtyThrowsGame game;\n\n    // View components\n    private Button rollBtn;\n    private Button collectScoreBtn;\n    private TextView roundText;\n    private TextView currentScoreText;\n    private Spinner scoreSelectionSpinner;\n    private ArrayAdapter&lt;ThirtyThrowsGame.ScoreChoice&gt; adapter;\n    private ArrayList&lt;ImageView&gt; diceViews;\n\n    // Data\n    int score = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // Find elements on the UI by id.\n        rollBtn = findViewById(R.id.btnRoll);\n        collectScoreBtn = findViewById(R.id.btnCollectScore);\n        scoreSelectionSpinner = findViewById(R.id.spinner);\n        roundText = findViewById(R.id.RoundText);\n        currentScoreText = findViewById(R.id.CurrentScoreText);\n\n        if (savedInstanceState != null) {\n            this.game = (ThirtyThrowsGame) savedInstanceState.getSerializable(STATE_GAME);\n        } else {\n            this.game = new ThirtyThrowsGame();\n        }\n\n        rollBtn.setOnClickListener(e -&gt; {\n            if (game.GetCurrentGameRound().CanPlay()) {\n                RefreshScene(this);\n                SetScore();\n            } else {\n                Toast toast = Toast.makeText(\n                        this,\n                        &quot;Please collect score to run next round.&quot;,\n                        Toast.LENGTH_SHORT\n                );\n                toast.show();\n            }\n        });\n\n        collectScoreBtn.setOnClickListener(e -&gt; {\n            scoreSelectionSpinner.setSelection(0);\n            boolean _continue = game.NextRound();\n            score = 0;\n            SetDefaultDiceView();\n            RefreshScene();\n\n            if (_continue) {\n                NextActivity();\n            }\n        });\n\n        SetupDropDown();\n        GetDiceViews();\n        SetupDiceClickEventListeners();\n\n        currentScoreText.setText(getString(R.string.score, 0));\n        roundText.setText(getString(R.string.round, game.GetCurrentRound()));\n        RefreshRollButtonText();\n    }\n\n    @Override\n    protected void onPostCreate(@Nullable Bundle savedInstanceState) {\n        super.onPostCreate(savedInstanceState);\n        if (savedInstanceState != null) {\n            if (game != null) {\n                score = game.GetCurrentGameRound().GetScore().getScore();\n                if (score == 0) {\n                    SetDefaultDiceView();\n                } else {\n                    UpdateImageViews();\n                }\n                RefreshScene();\n            }\n        }\n    }\n\n    @Override\n    protected void onSaveInstanceState(Bundle outState) {\n        outState.putSerializable(STATE_GAME, game);\n        super.onSaveInstanceState(outState);\n    }\n\n    @Override\n    public void onBackPressed() {\n        moveTaskToBack(true);\n    }\n\n private void SetDefaultDiceView() {\n        diceViews.get(0).setImageResource(R.drawable.white1);\n        diceViews.get(1).setImageResource(R.drawable.white2);\n        diceViews.get(2).setImageResource(R.drawable.white3);\n        diceViews.get(3).setImageResource(R.drawable.white4);\n        diceViews.get(4).setImageResource(R.drawable.white5);\n        diceViews.get(5).setImageResource(R.drawable.white6);\n    }\n\nprivate void SetupDiceClickEventListeners() {\n        int index = 0;\n        for (ImageView v : diceViews) {\n            int finalIndex = index;\n            v.setOnClickListener(e -&gt; {\n              this.game.GetCurrentGameRound().GetDices().get(finalIndex).ToggleMarked();\n                diceViews.get(finalIndex).setImageResource(game.GetCurrentGameRound()\n                        .GetDices().get(finalIndex).GetCurrentImage());\n            });\n            ++index;\n        }\n    }\n\n public void RefreshScene() {\n        roundText.setText(getString(R.string.round, game.GetCurrentRound()));\n        currentScoreText.setText(getString(R.string.score, game.GetCurrentGameRound().GetScore().getScore()));\n        RefreshRollButtonText();\n    }\n\n    public void RefreshScene(Context context) {\n        game.GetCurrentGameRound().TossDices(context);\n        roundText.setText(getString(R.string.round, game.GetCurrentRound()));\n        UpdateImageViews();\n        RefreshRollButtonText();\n    }\n</code></pre>\n<p>This is pretty much almost all of the code here. If someone, can spot the issues, please let me know. I been struggling with this for weeks now, and it is getting deeply annoying. I need to ensure, it works when you leave the back in the background, so that it recovers the game state and continues to reflect this on the UI.</p>\n<p><strong>EDIT:</strong> <em><strong>Yes, I ran this in debug mode stepping throw the code.</strong></em></p>\n<p><strong>EDIT 6/27/2022: I have developer mode enabled with &quot;Don't keep activities&quot; enabled.</strong></p>\n"},{"tags":["java","spring","spring-boot","jpa","orm"],"comments":[{"owner":{"account_id":6325048,"reputation":3074,"user_id":4911775,"display_name":"CodeScale"},"score":0,"creation_date":1656485655,"post_id":72796619,"comment_id":128580976,"body_markdown":"Please add code showing how you persist/update these entities.","body":"Please add code showing how you persist/update these entities."},{"owner":{"account_id":9806772,"reputation":19,"user_id":16730646,"display_name":"Peaky Blinder"},"score":0,"creation_date":1656490237,"post_id":72796619,"comment_id":128582640,"body_markdown":"I am using  Hibernate for persisting entities. Via JPA.","body":"I am using  Hibernate for persisting entities. Via JPA."},{"owner":{"account_id":6325048,"reputation":3074,"user_id":4911775,"display_name":"CodeScale"},"score":0,"creation_date":1656490492,"post_id":72796619,"comment_id":128582753,"body_markdown":"what are you doing in the user.setPassword() ?","body":"what are you doing in the user.setPassword() ?"},{"owner":{"account_id":9806772,"reputation":19,"user_id":16730646,"display_name":"Peaky Blinder"},"score":0,"creation_date":1656490782,"post_id":72796619,"comment_id":128582859,"body_markdown":"Just updating the existing password.","body":"Just updating the existing password."},{"owner":{"account_id":9806772,"reputation":19,"user_id":16730646,"display_name":"Peaky Blinder"},"score":0,"creation_date":1656490804,"post_id":72796619,"comment_id":128582865,"body_markdown":"public void setPassword(String password) {\n        this.password = password;\n    }","body":"public void setPassword(String password) {         this.password = password;     }"},{"owner":{"account_id":6325048,"reputation":3074,"user_id":4911775,"display_name":"CodeScale"},"score":0,"creation_date":1656494390,"post_id":72796619,"comment_id":128584240,"body_markdown":"What is your assumption here ? That set a new password will automatically create a new password history entry ?","body":"What is your assumption here ? That set a new password will automatically create a new password history entry ?"},{"owner":{"account_id":9806772,"reputation":19,"user_id":16730646,"display_name":"Peaky Blinder"},"score":0,"creation_date":1656496300,"post_id":72796619,"comment_id":128584960,"body_markdown":"Yeah. Any time a new user is signing up or changing password the log should be entered in the table.","body":"Yeah. Any time a new user is signing up or changing password the log should be entered in the table."}],"answers":[{"tags":[],"owner":{"account_id":14295587,"reputation":41,"user_id":13326343,"display_name":"Felipe Martins"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1656494203,"creation_date":1656494203,"answer_id":72798854,"question_id":72796619,"body_markdown":"Maybe you just need to anottate the method `changePassword`\r\n\r\n```java\r\n    @Transactional\r\n    public void changePassword(String username, String newpassword, String oldpassword) throws PasswordMismatchException, OldThreePasswordMatchException {\r\n        User user = userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\r\n\r\n        if (!oldpassword.equals(user.getPassword())) throw new PasswordMismatchException(&quot;Old password incorrect&quot;);\r\n\r\n        List&lt;PasswordHistory&gt; passwordHistories = passwordHistoryRepository.findTop3ByUserIdOrderByEntrytimeDesc(user.getId());\r\n        for (PasswordHistory passwordHistory : passwordHistories)\r\n            if (oldpassword.equals(passwordHistory.getPassword())) {\r\n                throw new OldThreePasswordMatchException(&quot;Password should not match with last three passwords&quot;);\r\n            }\r\n\r\n        user.setPassword(newpassword);\r\n        userRepository.save(user);\r\n    }\r\n```\r\n","title":"One-to-Many mapping not reelected in the second table","body":"<p>Maybe you just need to anottate the method <code>changePassword</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Transactional\n    public void changePassword(String username, String newpassword, String oldpassword) throws PasswordMismatchException, OldThreePasswordMatchException {\n        User user = userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\n\n        if (!oldpassword.equals(user.getPassword())) throw new PasswordMismatchException(&quot;Old password incorrect&quot;);\n\n        List&lt;PasswordHistory&gt; passwordHistories = passwordHistoryRepository.findTop3ByUserIdOrderByEntrytimeDesc(user.getId());\n        for (PasswordHistory passwordHistory : passwordHistories)\n            if (oldpassword.equals(passwordHistory.getPassword())) {\n                throw new OldThreePasswordMatchException(&quot;Password should not match with last three passwords&quot;);\n            }\n\n        user.setPassword(newpassword);\n        userRepository.save(user);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6325048,"reputation":3074,"user_id":4911775,"display_name":"CodeScale"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656505034,"creation_date":1656505034,"answer_id":72801297,"question_id":72796619,"body_markdown":"Looks like you missed the most important step : create a new entry in the password history when setting a new password.\r\n\r\nSomething like :\r\n```\r\npublic void setPassword(String password) { \r\n    this.password = password; \r\n    history.add(new PasswordHistory(password); \r\n}\r\n```","title":"One-to-Many mapping not reelected in the second table","body":"<p>Looks like you missed the most important step : create a new entry in the password history when setting a new password.</p>\n<p>Something like :</p>\n<pre><code>public void setPassword(String password) { \n    this.password = password; \n    history.add(new PasswordHistory(password); \n}\n</code></pre>\n"}],"owner":{"account_id":9806772,"reputation":19,"user_id":16730646,"display_name":"Peaky Blinder"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1656505034,"creation_date":1656483577,"question_id":72796619,"body_markdown":"Schema\r\n\r\n```\r\n\r\nCREATE TABLE USERTABLE\r\n(\r\n    ID        BIGINT GENERATED BY DEFAULT AS IDENTITY,\r\n    USER_NAME VARCHAR(255) NOT NULL,\r\n    PASSWORD  VARCHAR(255),\r\n    PRIMARY KEY (ID)\r\n);\r\n\r\n\r\nCREATE TABLE PasswordHistory(\r\n    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,\r\n    USERID BIGINT NOT NULL,\r\n    PASSWORD VARCHAR(255),\r\n    ENTRYTIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    PRIMARY KEY (ID),\r\n    FOREIGN KEY (USERID) REFERENCES USERTABLE(ID)\r\n);\r\n\r\n```\r\n\r\n\r\n\r\nUser Table\r\n```\r\n@DynamicInsert(value = true)\r\n@Entity\r\n@Table(name = &quot;usertable&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    @JsonProperty\r\n    @NotBlank(message = &quot;User name must be provided&quot;)\r\n    @Column(name= &quot;USERNAME&quot;, nullable = false, unique = true)\r\n    @ApiModelProperty(name = &quot;username&quot;, value = &quot;Name of user (must be unique)&quot;, required = true, example = &quot;user_name&quot;, position = 1)\r\n    private String username;\r\n\r\n    @JsonProperty\r\n    @NotBlank(message = &quot;Password must be provided&quot;)\r\n    @Column(nullable = false)\r\n    @ApiModelProperty(name = &quot;password&quot;, value = &quot;Password of the user&quot;, required = true, example = &quot;password&quot;, position = 2)\r\n    private String password;\r\n\r\n\r\n    @JsonProperty\r\n    @Column(columnDefinition = &quot;VARCHAR(255) DEFAULT &#39;CUSTOMER&#39;&quot;)\r\n    private String role;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;USERID&quot;, referencedColumnName = &quot;id&quot;)\r\n    List&lt;PasswordHistory&gt; passwordHistories;\r\n\r\n//getters, setters\r\n\r\n}\r\n```\r\nPassword log table:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;passwordhistory&quot;)\r\npublic class PasswordHistory {\r\n\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;ID&quot;)\r\n    private Long id;\r\n\r\n    @JsonProperty\r\n    @Column(name = &quot;USERID&quot;)\r\n    private Long userId;\r\n\r\n    @JsonProperty\r\n    @Column(name = &quot;PASSWORD&quot;)\r\n    @ApiModelProperty(name = &quot;password&quot;, value = &quot;Password of the user&quot;, required = true, example = &quot;password&quot;, position = 2)\r\n    private String password;\r\n\r\n\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @JsonProperty\r\n    private Timestamp entrytime;\r\n\r\n    public PasswordHistory() {\r\n\r\n    }\r\n//GetterSetter\r\n\r\n}\r\n```\r\nIn user Service\r\n\r\n\r\n```\r\npublic class UserPrincipalService implements UserDetailsService {\r\n    private final UserRepository userRepository;\r\n    private final PasswordHistoryRepository passwordHistoryRepository;\r\n\r\n\r\n    @Autowired\r\n    public UserPrincipalService(UserRepository userRepository, PasswordHistoryRepository passwordHistoryRepository) {\r\n        this.userRepository = userRepository;\r\n        this.passwordHistoryRepository = passwordHistoryRepository;\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        User savedUser = findUserByUsername(username);\r\n        return new UserPrincipal(savedUser);\r\n    }\r\n\r\n\r\n    public User findUserByUsername(String username) throws UsernameNotFoundException {\r\n        return userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\r\n    }\r\n\r\n    public void changePassword(String username, String newpassword, String oldpassword) throws PasswordMismatchException, OldThreePasswordMatchException {\r\n        User user = userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\r\n\r\n        if (!oldpassword.equals(user.getPassword())) throw new PasswordMismatchException(&quot;Old password incorrect&quot;);\r\n\r\n        List&lt;PasswordHistory&gt; passwordHistories = passwordHistoryRepository.findTop3ByUserIdOrderByEntrytimeDesc(user.getId());\r\n        for (PasswordHistory passwordHistory : passwordHistories)\r\n            if (oldpassword.equals(passwordHistory.getPassword())) {\r\n                throw new OldThreePasswordMatchException(&quot;Password should not match with last three passwords&quot;);\r\n            }\r\n\r\n        user.setPassword(newpassword);\r\n        userRepository.save(user);\r\n    }\r\n\r\n```\r\nIn controller:\r\n```\r\n @PostMapping(value = &quot;/user/password&quot;)\r\n    @ApiOperation(value = &quot;Change password&quot;)\r\n    @ResponseStatus(code = HttpStatus.OK)\r\n    @ApiResponses(value = {\r\n            @ApiResponse(code = 201, message = &quot;Password has been changed&quot;),\r\n            @ApiResponse(code = 404, message = &quot;Record not found&quot;, response = ErrorResponse.class),\r\n            @ApiResponse(code = 400, message = &quot;Server cannot process request due to client error&quot;, response = ErrorResponse.class),\r\n            @ApiResponse(code = 500, message = &quot;Something failed in the server&quot;, response = ErrorResponse.class)\r\n    })\r\n    public String changePassword(Principal principal,\r\n                                 @RequestParam(&quot;newpassword&quot;) String newpassword,\r\n                                 @RequestParam(&quot;oldpassword&quot;) String oldpassword) throws PasswordMismatchException, OldThreePasswordMatchException {\r\n        String username = principal.getName();\r\n        userPrincipalService.changePassword(username, newpassword, oldpassword);\r\n        return &quot;Password has been updated successfully&quot;;\r\n    }\r\n\r\n```\r\n\r\nI have done one to many mapping between user and password log table. Password log is basically for auditing the passwords and validating.\r\n\r\nPassword Log table should be updated automatically when any change or new password entry is done in user table. But it is not getting reflected in the database\r\n\r\nI am using **JPArepository**\r\n\r\n\r\n\r\n\r\n","title":"One-to-Many mapping not reelected in the second table","body":"<p>Schema</p>\n<pre><code>\nCREATE TABLE USERTABLE\n(\n    ID        BIGINT GENERATED BY DEFAULT AS IDENTITY,\n    USER_NAME VARCHAR(255) NOT NULL,\n    PASSWORD  VARCHAR(255),\n    PRIMARY KEY (ID)\n);\n\n\nCREATE TABLE PasswordHistory(\n    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,\n    USERID BIGINT NOT NULL,\n    PASSWORD VARCHAR(255),\n    ENTRYTIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (ID),\n    FOREIGN KEY (USERID) REFERENCES USERTABLE(ID)\n);\n\n</code></pre>\n<p>User Table</p>\n<pre><code>@DynamicInsert(value = true)\n@Entity\n@Table(name = &quot;usertable&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @JsonProperty\n    @NotBlank(message = &quot;User name must be provided&quot;)\n    @Column(name= &quot;USERNAME&quot;, nullable = false, unique = true)\n    @ApiModelProperty(name = &quot;username&quot;, value = &quot;Name of user (must be unique)&quot;, required = true, example = &quot;user_name&quot;, position = 1)\n    private String username;\n\n    @JsonProperty\n    @NotBlank(message = &quot;Password must be provided&quot;)\n    @Column(nullable = false)\n    @ApiModelProperty(name = &quot;password&quot;, value = &quot;Password of the user&quot;, required = true, example = &quot;password&quot;, position = 2)\n    private String password;\n\n\n    @JsonProperty\n    @Column(columnDefinition = &quot;VARCHAR(255) DEFAULT 'CUSTOMER'&quot;)\n    private String role;\n\n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;USERID&quot;, referencedColumnName = &quot;id&quot;)\n    List&lt;PasswordHistory&gt; passwordHistories;\n\n//getters, setters\n\n}\n</code></pre>\n<p>Password log table:</p>\n<pre><code>@Entity\n@Table(name = &quot;passwordhistory&quot;)\npublic class PasswordHistory {\n\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID&quot;)\n    private Long id;\n\n    @JsonProperty\n    @Column(name = &quot;USERID&quot;)\n    private Long userId;\n\n    @JsonProperty\n    @Column(name = &quot;PASSWORD&quot;)\n    @ApiModelProperty(name = &quot;password&quot;, value = &quot;Password of the user&quot;, required = true, example = &quot;password&quot;, position = 2)\n    private String password;\n\n\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @JsonProperty\n    private Timestamp entrytime;\n\n    public PasswordHistory() {\n\n    }\n//GetterSetter\n\n}\n</code></pre>\n<p>In user Service</p>\n<pre><code>public class UserPrincipalService implements UserDetailsService {\n    private final UserRepository userRepository;\n    private final PasswordHistoryRepository passwordHistoryRepository;\n\n\n    @Autowired\n    public UserPrincipalService(UserRepository userRepository, PasswordHistoryRepository passwordHistoryRepository) {\n        this.userRepository = userRepository;\n        this.passwordHistoryRepository = passwordHistoryRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User savedUser = findUserByUsername(username);\n        return new UserPrincipal(savedUser);\n    }\n\n\n    public User findUserByUsername(String username) throws UsernameNotFoundException {\n        return userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\n    }\n\n    public void changePassword(String username, String newpassword, String oldpassword) throws PasswordMismatchException, OldThreePasswordMatchException {\n        User user = userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\n\n        if (!oldpassword.equals(user.getPassword())) throw new PasswordMismatchException(&quot;Old password incorrect&quot;);\n\n        List&lt;PasswordHistory&gt; passwordHistories = passwordHistoryRepository.findTop3ByUserIdOrderByEntrytimeDesc(user.getId());\n        for (PasswordHistory passwordHistory : passwordHistories)\n            if (oldpassword.equals(passwordHistory.getPassword())) {\n                throw new OldThreePasswordMatchException(&quot;Password should not match with last three passwords&quot;);\n            }\n\n        user.setPassword(newpassword);\n        userRepository.save(user);\n    }\n\n</code></pre>\n<p>In controller:</p>\n<pre><code> @PostMapping(value = &quot;/user/password&quot;)\n    @ApiOperation(value = &quot;Change password&quot;)\n    @ResponseStatus(code = HttpStatus.OK)\n    @ApiResponses(value = {\n            @ApiResponse(code = 201, message = &quot;Password has been changed&quot;),\n            @ApiResponse(code = 404, message = &quot;Record not found&quot;, response = ErrorResponse.class),\n            @ApiResponse(code = 400, message = &quot;Server cannot process request due to client error&quot;, response = ErrorResponse.class),\n            @ApiResponse(code = 500, message = &quot;Something failed in the server&quot;, response = ErrorResponse.class)\n    })\n    public String changePassword(Principal principal,\n                                 @RequestParam(&quot;newpassword&quot;) String newpassword,\n                                 @RequestParam(&quot;oldpassword&quot;) String oldpassword) throws PasswordMismatchException, OldThreePasswordMatchException {\n        String username = principal.getName();\n        userPrincipalService.changePassword(username, newpassword, oldpassword);\n        return &quot;Password has been updated successfully&quot;;\n    }\n\n</code></pre>\n<p>I have done one to many mapping between user and password log table. Password log is basically for auditing the passwords and validating.</p>\n<p>Password Log table should be updated automatically when any change or new password entry is done in user table. But it is not getting reflected in the database</p>\n<p>I am using <strong>JPArepository</strong></p>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1656373914,"post_id":72778904,"comment_id":128551562,"body_markdown":"Do one or more of the following: 1) Increase the memory limit, 2) Limit the number of threads in the pool (don&#39;t start a new task until a previous one is finished and removed from memory), 3) Don&#39;t infinitely store images in memory, only store what is needed for the task at hand (path only?), although this will only delay the problem if you infinitely store paths on a long-running server application.","body":"Do one or more of the following: 1) Increase the memory limit, 2) Limit the number of threads in the pool (don&#39;t start a new task until a previous one is finished and removed from memory), 3) Don&#39;t infinitely store images in memory, only store what is needed for the task at hand (path only?), although this will only delay the problem if you infinitely store paths on a long-running server application."},{"owner":{"account_id":9639073,"reputation":75,"user_id":8585553,"display_name":"tschuehly"},"score":0,"creation_date":1656444473,"post_id":72778904,"comment_id":128572726,"body_markdown":"@sorifiend Thank you for your comment. My problem is that the heap memory is not properly garbage collected, and because the worker coroutines are running indefinetly the variables are never cleared","body":"@sorifiend Thank you for your comment. My problem is that the heap memory is not properly garbage collected, and because the worker coroutines are running indefinetly the variables are never cleared"}],"answers":[{"tags":[],"owner":{"account_id":3729317,"reputation":1797,"user_id":3102234,"display_name":"Horaiu Udrea"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656409650,"creation_date":1656409650,"answer_id":72784239,"question_id":72778904,"body_markdown":"The worker pool can be automatically handled by the coroutine scope with an appropriate dispatcher. \r\n\r\nIf the image upload does blocking operations, you might want to use the IO dispatcher, like so: `CoroutineScope(Dispatchers.IO.limitedParallelism(5))`. I have omitted the `SupervisorJob` because you do not need it for the parent coroutine that will be created in `createWorkerGroup()`, but for the ones created *by* it. Don&#39;t forget to create the logic for cancelling the `CoroutineScope` when it is no longer needed.\r\n\r\nAfter that, you can launch coroutines at will with no performance overhead, in the same place you did before:\r\n\r\n```kotlin\r\n@PostConstruct\r\nfun createWorkerGroup() {\r\n    coroutineScope.launch{\r\n        supervisorScope {\r\n            channel.consumeEach {\r\n                launch {\r\n                    uploadImage(it)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is the correct approach for creating and using the worker pool, but you will need to test it in order to see if it eliminates the `OutOfMemoryError`. You might also want to try reducing the channel&#39;s capacity. Good luck!","title":"Kotlin Worker Pool - Long Running Kotlin Coroutine and Java Heap OutOfMemory","body":"<p>The worker pool can be automatically handled by the coroutine scope with an appropriate dispatcher.</p>\n<p>If the image upload does blocking operations, you might want to use the IO dispatcher, like so: <code>CoroutineScope(Dispatchers.IO.limitedParallelism(5))</code>. I have omitted the <code>SupervisorJob</code> because you do not need it for the parent coroutine that will be created in <code>createWorkerGroup()</code>, but for the ones created <em>by</em> it. Don't forget to create the logic for cancelling the <code>CoroutineScope</code> when it is no longer needed.</p>\n<p>After that, you can launch coroutines at will with no performance overhead, in the same place you did before:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@PostConstruct\nfun createWorkerGroup() {\n    coroutineScope.launch{\n        supervisorScope {\n            channel.consumeEach {\n                launch {\n                    uploadImage(it)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>This is the correct approach for creating and using the worker pool, but you will need to test it in order to see if it eliminates the <code>OutOfMemoryError</code>. You might also want to try reducing the channel's capacity. Good luck!</p>\n"},{"tags":[],"owner":{"account_id":9639073,"reputation":75,"user_id":8585553,"display_name":"tschuehly"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656505017,"creation_date":1656505017,"answer_id":72801293,"question_id":72778904,"body_markdown":"Thank you @Halex for the help, here is my Kotlin coroutine worker pool with proper garbage collection\r\n```kotlin\r\nprivate val coroutineScope = CoroutineScope(Dispatchers.Default)\r\n@OptIn(ExperimentalCoroutinesApi::class)\r\nprivate val superVisorScope = CoroutineScope(SupervisorJob() + Dispatchers.IO.limitedParallelism(5))\r\n@PostConstruct\r\nfun createWorkerGroup() {\r\n    coroutineScope.launch {\r\n        superVisorScope.launch {\r\n            channel.consumeEach {\r\n                launch {\r\n                    uploadImage(it)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    coroutineScope.cancel()\r\n}\r\n```","title":"Kotlin Worker Pool - Long Running Kotlin Coroutine and Java Heap OutOfMemory","body":"<p>Thank you @Halex for the help, here is my Kotlin coroutine worker pool with proper garbage collection</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>private val coroutineScope = CoroutineScope(Dispatchers.Default)\n@OptIn(ExperimentalCoroutinesApi::class)\nprivate val superVisorScope = CoroutineScope(SupervisorJob() + Dispatchers.IO.limitedParallelism(5))\n@PostConstruct\nfun createWorkerGroup() {\n    coroutineScope.launch {\n        superVisorScope.launch {\n            channel.consumeEach {\n                launch {\n                    uploadImage(it)\n                }\n            }\n        }\n    }\n    coroutineScope.cancel()\n}\n</code></pre>\n"}],"owner":{"account_id":9639073,"reputation":75,"user_id":8585553,"display_name":"tschuehly"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":965,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72784239,"answer_count":2,"score":1,"last_activity_date":1656505017,"creation_date":1656368955,"question_id":72778904,"body_markdown":"I&#39;m trying to replicate a Worker Pool in Kotlin: https://gobyexample.com/worker-pools\r\n\r\nIt works wonderful, but my problem is that I get OutOfMemoryError because all object references from the worker coroutines are kept in the heap as long as the coroutine is running. How can I avoid this problem?\r\n\r\nHere is my code:\r\n\r\nI create a channel in Service A and receive the data everytime a channel object is received.\r\n\r\n```\r\nclass ServiceA(\r\n) {\r\n\r\n    val channel = Channel&lt;Pair&lt;String,ByteArray&gt;&gt;(10000)\r\n\r\n    private val coroutineScope = CoroutineScope(SupervisorJob() + Dispatchers.Default)\r\n\r\n    @PostConstruct\r\n    fun createWorkerGroup(){\r\n        coroutineScope.launch{\r\n            for(x in 1..5){\r\n                launch {\r\n                    println(&quot;Create Worker $x&quot;)\r\n                    while (true){\r\n                            uploadImage(channel.receive() )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n private suspend fun uploadImage(urlAndImage: Pair&lt;String, ByteArray&gt;){\r\n            val (url,image) = urlAndImage\r\n            println(&quot;Uploading Image: $url&quot;)\r\n\r\n    }\r\n```\r\n\r\nIn my controller method I send my data to a channel:\r\n```\r\nuploadService.channel.send(Pair(url, image.bytes))\r\n```\r\n","title":"Kotlin Worker Pool - Long Running Kotlin Coroutine and Java Heap OutOfMemory","body":"<p>I'm trying to replicate a Worker Pool in Kotlin: <a href=\"https://gobyexample.com/worker-pools\" rel=\"nofollow noreferrer\">https://gobyexample.com/worker-pools</a></p>\n<p>It works wonderful, but my problem is that I get OutOfMemoryError because all object references from the worker coroutines are kept in the heap as long as the coroutine is running. How can I avoid this problem?</p>\n<p>Here is my code:</p>\n<p>I create a channel in Service A and receive the data everytime a channel object is received.</p>\n<pre><code>class ServiceA(\n) {\n\n    val channel = Channel&lt;Pair&lt;String,ByteArray&gt;&gt;(10000)\n\n    private val coroutineScope = CoroutineScope(SupervisorJob() + Dispatchers.Default)\n\n    @PostConstruct\n    fun createWorkerGroup(){\n        coroutineScope.launch{\n            for(x in 1..5){\n                launch {\n                    println(&quot;Create Worker $x&quot;)\n                    while (true){\n                            uploadImage(channel.receive() )\n                    }\n                }\n            }\n        }\n    }\n private suspend fun uploadImage(urlAndImage: Pair&lt;String, ByteArray&gt;){\n            val (url,image) = urlAndImage\n            println(&quot;Uploading Image: $url&quot;)\n\n    }\n</code></pre>\n<p>In my controller method I send my data to a channel:</p>\n<pre><code>uploadService.channel.send(Pair(url, image.bytes))\n</code></pre>\n"},{"tags":["java","sonarqube"],"comments":[{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":1,"creation_date":1656499591,"post_id":72799912,"comment_id":128586272,"body_markdown":"Then Sonar is an idiot.  Your code is fine for constructing a format with a field width specified at run time. You could do the same thing using String.format to construct the format to use in the given String.format, but that seems like writing less clear code to satisfy poor advice from a tool that is supposed to help.","body":"Then Sonar is an idiot.  Your code is fine for constructing a format with a field width specified at run time. You could do the same thing using String.format to construct the format to use in the given String.format, but that seems like writing less clear code to satisfy poor advice from a tool that is supposed to help."}],"answers":[{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656504937,"creation_date":1656504937,"answer_id":72801275,"question_id":72799912,"body_markdown":"There doesn&#39;t seem to be such a rule among Sonar&#39;s set of rules: see https://rules.sonarsource.com/java .\r\n\r\nThis is probably a custom rule. There are often advantages to using a format specifier instead of concatenation (greater flexibility, easier internationalization, etc. at the expense of static type safety and performance). However, in your situation, concatenation is better than using a format. Therefore, you should talk to the team at your organization that is responsible for static code analysis enforcement, and ask them to add an exception for your code.","title":"Sonar is throwing a bug Format specifier should be used instead of string concatenation for the code - return String.format(&quot;%-&quot; + size + &quot;s&quot;, str);","body":"<p>There doesn't seem to be such a rule among Sonar's set of rules: see <a href=\"https://rules.sonarsource.com/java\" rel=\"nofollow noreferrer\">https://rules.sonarsource.com/java</a> .</p>\n<p>This is probably a custom rule. There are often advantages to using a format specifier instead of concatenation (greater flexibility, easier internationalization, etc. at the expense of static type safety and performance). However, in your situation, concatenation is better than using a format. Therefore, you should talk to the team at your organization that is responsible for static code analysis enforcement, and ask them to add an exception for your code.</p>\n"}],"owner":{"account_id":25679788,"reputation":1,"user_id":19442737,"display_name":"Amit Anand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":549,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656504937,"creation_date":1656498790,"question_id":72799912,"body_markdown":"I am trying to write the code return String.format(&quot;%-&quot; + dsize + &quot;s&quot;, str); in java but sonar is giving &quot;Format specifier should be used instead of string concatenation for the code&quot;","title":"Sonar is throwing a bug Format specifier should be used instead of string concatenation for the code - return String.format(&quot;%-&quot; + size + &quot;s&quot;, str);","body":"<p>I am trying to write the code return String.format(&quot;%-&quot; + dsize + &quot;s&quot;, str); in java but sonar is giving &quot;Format specifier should be used instead of string concatenation for the code&quot;</p>\n"},{"tags":["java","unit-testing","transactions","quarkus-panache","mutiny"],"comments":[{"owner":{"account_id":1276303,"reputation":2937,"user_id":1231484,"display_name":"Clement"},"score":0,"creation_date":1655452330,"post_id":72648062,"comment_id":128340388,"body_markdown":"Panache.withTransaction must be called from the event loop, and you are not on one. You would need something like `@Inject Vertx vert` and `vertx.runOnContext(...)` (which would run the passed block on the event loop.","body":"Panache.withTransaction must be called from the event loop, and you are not on one. You would need something like <code>@Inject Vertx vert</code> and <code>vertx.runOnContext(...)</code> (which would run the passed block on the event loop."},{"owner":{"account_id":9339235,"reputation":53,"user_id":6932574,"display_name":"Fr&#233;d&#233;ric Thomas"},"score":0,"creation_date":1655467927,"post_id":72648062,"comment_id":128345493,"body_markdown":"Hi @Clement,\n\n`vertx.runOnContext(...)` runs a runnable, I need a callable on the event loop as my code is fully reactive.\n\nDo you have an example I could use?","body":"Hi @Clement,  <code>vertx.runOnContext(...)</code> runs a runnable, I need a callable on the event loop as my code is fully reactive.  Do you have an example I could use?"},{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1655490228,"post_id":72648062,"comment_id":128352999,"body_markdown":"Have you tried Vert.x unit? https://vertx.io/docs/vertx-junit5/java/#_running_tests_on_a_vert_x_context","body":"Have you tried Vert.x unit? <a href=\"https://vertx.io/docs/vertx-junit5/java/#_running_tests_on_a_vert_x_context\" rel=\"nofollow noreferrer\">vertx.io/docs/vertx-junit5/java/&hellip;</a>"},{"owner":{"account_id":9339235,"reputation":53,"user_id":6932574,"display_name":"Fr&#233;d&#233;ric Thomas"},"score":0,"creation_date":1655621455,"post_id":72648062,"comment_id":128371951,"body_markdown":"I tried but it did not work, but thanks the same because it allowed me to do [that](https://gist.github.com/doublefx/4da6c6da202553a9d50befd276b8c111) on the same principle, despite it&#39;s still failing, I learned something about this test lib, also, see my comment [here](https://stackoverflow.com/questions/72583353/how-to-properly-batch-insert-using-quarkus-reactive-hibernate-with-panache)","body":"I tried but it did not work, but thanks the same because it allowed me to do <a href=\"https://gist.github.com/doublefx/4da6c6da202553a9d50befd276b8c111\" rel=\"nofollow noreferrer\">that</a> on the same principle, despite it&#39;s still failing, I learned something about this test lib, also, see my comment <a href=\"https://stackoverflow.com/questions/72583353/how-to-properly-batch-insert-using-quarkus-reactive-hibernate-with-panache\">here</a>"}],"answers":[{"tags":[],"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1656504733,"creation_date":1655630356,"answer_id":72675643,"question_id":72648062,"body_markdown":"## Annotation @TestReactiveTransaction\r\n\r\nQuarkus provides the annotation `@TestReactiveTransaction`: it will wrap the test method in a transaction and rollback the transaction at the end.\r\n\r\nI&#39;m going to use [quarkus-test-vertx][1] for testing the reactive code:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n    &lt;artifactId&gt;quarkus-test-vertx&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nHere&#39;s an example of a test class that can be used with the [Hibernate Reactive quickstart with Panache][2] (after adding the `quarkus-test-vertx` dependency):\r\n\r\nThe entity:\r\n```\r\n@Entity\r\npublic class Fruit extends PanacheEntity {\r\n\r\n    @Column(length = 40, unique = true)\r\n    public String name;\r\n\r\n    ...\r\n}\r\n```\r\n\r\nThe test class:\r\n```\r\npackage org.acme.hibernate.orm.panache;\r\n\r\nimport java.util.List;\r\n\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport io.quarkus.test.TestReactiveTransaction;\r\nimport io.quarkus.test.junit.QuarkusTest;\r\nimport io.quarkus.test.vertx.UniAsserter;\r\nimport io.smallrye.mutiny.Uni;\r\nimport org.assertj.core.api.Assertions;\r\n\r\n@QuarkusTest\r\npublic class ExampleReactiveTest {\r\n\r\n\t@Test\r\n\t@TestReactiveTransaction\r\n\tpublic void test(UniAsserter asserter) {\r\n\t\tprintThread( &quot;Start&quot; );\r\n\t\tUni&lt;List&lt;Fruit&gt;&gt; listAllUni = Fruit.&lt;Fruit&gt;listAll();\r\n\t\tFruit mandarino = new Fruit( &quot;Mandarino&quot; );\r\n\t\tasserter.assertThat(\r\n\t\t\t\t() -&gt; Fruit\r\n\t\t\t\t\t\t.persist( mandarino )\r\n\t\t\t\t\t\t.replaceWith( listAllUni ),\r\n\t\t\t\tresult -&gt; {\r\n\t\t\t\t\tAssertions.assertThat( result ).hasSize( 4 );\r\n\t\t\t\t\tAssertions.assertThat( result ).contains( mandarino );\r\n\t\t\t\t\tprintThread( &quot;End&quot; );\r\n\t\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tprivate void printThread(String step) {\r\n\t\tSystem.out.println( step + &quot; - &quot; + Thread.currentThread().getId() + &quot;:&quot; + Thread.currentThread().getName() );\r\n\t}\r\n}\r\n```\r\n\r\n`@TestReactiveTransaction` runs the method in a transaction that it&#39;s going to be rollbacked at the end of the test.\r\n`UniAsserter` makes it possible to test reactive code without having to block anything.\r\n\r\n## Annotation @RunOnVertxContext\r\n\r\nIt&#39;s also possible to run a test in the Vert.x event loop using the annotation `@RunOnVertxContext` in the `quarkus-vertx-test` library:\r\n\r\nThis way you don&#39;t need to wrap the whole test in a trasaction:\r\n```\r\nimport io.quarkus.test.vertx.RunOnVertxContext;\r\n\r\n@QuarkusTest\r\npublic class ExampleReactiveTest {\r\n\r\n\t@Test\r\n\t@RunOnVertxContext\r\n\tpublic void test(UniAsserter asserter) {\r\n\t\tprintThread( &quot;Start&quot; );\r\n\t\tUni&lt;List&lt;Fruit&gt;&gt; listAllUni = Fruit.&lt;Fruit&gt;listAll();\r\n\t\tFruit mandarino = new Fruit( &quot;Mandarino&quot; );\r\n\t\tasserter.assertThat(\r\n\t\t\t\t() -&gt; Panache.withTransaction( () -&gt; Panache\r\n                        // This test doesn&#39;t have @TestReactiveTransaction\r\n                        // we need to rollback the transaction manually\r\n\t\t\t\t\t\t.currentTransaction().invoke( Mutiny.Transaction::markForRollback )\r\n\t\t\t\t\t\t.call( () -&gt; Fruit.persist( mandarino ) )\r\n\t\t\t\t\t\t.replaceWith( listAllUni )\r\n\t\t\t\t),\r\n\t\t\t\tresult -&gt; {\r\n\t\t\t\t\tAssertions.assertThat( result ).hasSize( 4 );\r\n\t\t\t\t\tAssertions.assertThat( result ).contains( mandarino );\r\n\t\t\t\t\tprintThread( &quot;End&quot; );\r\n\t\t\t\t}\r\n\t\t);\r\n\t}\r\n```\r\n\r\n\r\n  [1]: https://search.maven.org/artifact/io.quarkus/quarkus-test-vertx\r\n  [2]: https://stackoverflow.com/questions/72226141/quarkus-upgrade-complaining-regarding-vertx-thread-in-tests","title":"How to chain 2 Uni&lt;?&gt; in unit test using Panache.withTransaction() without getting a java.util.concurrent.TimeoutException","body":"<h2>Annotation @TestReactiveTransaction</h2>\n<p>Quarkus provides the annotation <code>@TestReactiveTransaction</code>: it will wrap the test method in a transaction and rollback the transaction at the end.</p>\n<p>I'm going to use <a href=\"https://search.maven.org/artifact/io.quarkus/quarkus-test-vertx\" rel=\"nofollow noreferrer\">quarkus-test-vertx</a> for testing the reactive code:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n    &lt;artifactId&gt;quarkus-test-vertx&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Here's an example of a test class that can be used with the <a href=\"https://stackoverflow.com/questions/72226141/quarkus-upgrade-complaining-regarding-vertx-thread-in-tests\">Hibernate Reactive quickstart with Panache</a> (after adding the <code>quarkus-test-vertx</code> dependency):</p>\n<p>The entity:</p>\n<pre><code>@Entity\npublic class Fruit extends PanacheEntity {\n\n    @Column(length = 40, unique = true)\n    public String name;\n\n    ...\n}\n</code></pre>\n<p>The test class:</p>\n<pre><code>package org.acme.hibernate.orm.panache;\n\nimport java.util.List;\n\nimport org.junit.jupiter.api.Test;\n\nimport io.quarkus.test.TestReactiveTransaction;\nimport io.quarkus.test.junit.QuarkusTest;\nimport io.quarkus.test.vertx.UniAsserter;\nimport io.smallrye.mutiny.Uni;\nimport org.assertj.core.api.Assertions;\n\n@QuarkusTest\npublic class ExampleReactiveTest {\n\n    @Test\n    @TestReactiveTransaction\n    public void test(UniAsserter asserter) {\n        printThread( &quot;Start&quot; );\n        Uni&lt;List&lt;Fruit&gt;&gt; listAllUni = Fruit.&lt;Fruit&gt;listAll();\n        Fruit mandarino = new Fruit( &quot;Mandarino&quot; );\n        asserter.assertThat(\n                () -&gt; Fruit\n                        .persist( mandarino )\n                        .replaceWith( listAllUni ),\n                result -&gt; {\n                    Assertions.assertThat( result ).hasSize( 4 );\n                    Assertions.assertThat( result ).contains( mandarino );\n                    printThread( &quot;End&quot; );\n                }\n        );\n    }\n\n    private void printThread(String step) {\n        System.out.println( step + &quot; - &quot; + Thread.currentThread().getId() + &quot;:&quot; + Thread.currentThread().getName() );\n    }\n}\n</code></pre>\n<p><code>@TestReactiveTransaction</code> runs the method in a transaction that it's going to be rollbacked at the end of the test.\n<code>UniAsserter</code> makes it possible to test reactive code without having to block anything.</p>\n<h2>Annotation @RunOnVertxContext</h2>\n<p>It's also possible to run a test in the Vert.x event loop using the annotation <code>@RunOnVertxContext</code> in the <code>quarkus-vertx-test</code> library:</p>\n<p>This way you don't need to wrap the whole test in a trasaction:</p>\n<pre><code>import io.quarkus.test.vertx.RunOnVertxContext;\n\n@QuarkusTest\npublic class ExampleReactiveTest {\n\n    @Test\n    @RunOnVertxContext\n    public void test(UniAsserter asserter) {\n        printThread( &quot;Start&quot; );\n        Uni&lt;List&lt;Fruit&gt;&gt; listAllUni = Fruit.&lt;Fruit&gt;listAll();\n        Fruit mandarino = new Fruit( &quot;Mandarino&quot; );\n        asserter.assertThat(\n                () -&gt; Panache.withTransaction( () -&gt; Panache\n                        // This test doesn't have @TestReactiveTransaction\n                        // we need to rollback the transaction manually\n                        .currentTransaction().invoke( Mutiny.Transaction::markForRollback )\n                        .call( () -&gt; Fruit.persist( mandarino ) )\n                        .replaceWith( listAllUni )\n                ),\n                result -&gt; {\n                    Assertions.assertThat( result ).hasSize( 4 );\n                    Assertions.assertThat( result ).contains( mandarino );\n                    printThread( &quot;End&quot; );\n                }\n        );\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9339235,"reputation":53,"user_id":6932574,"display_name":"Fr&#233;d&#233;ric Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655639831,"creation_date":1655639831,"answer_id":72676690,"question_id":72648062,"body_markdown":"I finally managed to get it working, the trick was to defer the Uni creation:\r\n\r\nLike in:\r\n\r\n    @QuarkusTest\r\n    public class ExamplePanacheTest {\r\n    \r\n    \t@Test\r\n    \tpublic void test() {\r\n    \t\tfinal var mandarino = new Fruit(&quot;Mandarino&quot;);\r\n    \r\n    \t\tfinal var insertAndGet = Uni.createFrom()\r\n    \t\t                            .deferred(() -&gt; Fruit.persist(mandarino)\r\n    \t\t                                                 .replaceWith(Fruit.&lt;Fruit&gt;listAll()));\r\n    \r\n    \t\tfinal var fruits = runAndRollback(insertAndGet)\r\n    \t\t\t                     .await().indefinitely();\r\n    \r\n    \t\tassertThat(fruits).hasSize(4)\r\n    \t\t                  .contains(mandarino);\r\n    \t}\r\n    \r\n    \tprivate static Uni&lt;List&lt;Fruit&gt;&gt; runAndRollback(Uni&lt;List&lt;Fruit&gt;&gt; insertAndGet) {\r\n    \t\treturn Panache.withTransaction(\r\n    \t\t\t() -&gt; Panache.currentTransaction()\r\n    \t\t\t             .invoke(Transaction::markForRollback)\r\n    \t\t\t             .replaceWith(insertAndGet));\r\n    \t}\r\n    }","title":"How to chain 2 Uni&lt;?&gt; in unit test using Panache.withTransaction() without getting a java.util.concurrent.TimeoutException","body":"<p>I finally managed to get it working, the trick was to defer the Uni creation:</p>\n<p>Like in:</p>\n<pre><code>@QuarkusTest\npublic class ExamplePanacheTest {\n\n    @Test\n    public void test() {\n        final var mandarino = new Fruit(&quot;Mandarino&quot;);\n\n        final var insertAndGet = Uni.createFrom()\n                                    .deferred(() -&gt; Fruit.persist(mandarino)\n                                                         .replaceWith(Fruit.&lt;Fruit&gt;listAll()));\n\n        final var fruits = runAndRollback(insertAndGet)\n                                 .await().indefinitely();\n\n        assertThat(fruits).hasSize(4)\n                          .contains(mandarino);\n    }\n\n    private static Uni&lt;List&lt;Fruit&gt;&gt; runAndRollback(Uni&lt;List&lt;Fruit&gt;&gt; insertAndGet) {\n        return Panache.withTransaction(\n            () -&gt; Panache.currentTransaction()\n                         .invoke(Transaction::markForRollback)\n                         .replaceWith(insertAndGet));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9339235,"reputation":53,"user_id":6932574,"display_name":"Fr&#233;d&#233;ric Thomas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":959,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1656504733,"creation_date":1655392230,"question_id":72648062,"body_markdown":"I&#39;m struggling using `Panache.withTransaction()` in unit tests, whatever I do, I get a `java.util.concurrent.TimeoutException`.\r\n\r\n*Note: It works without transaction but I have to delete the inserts manually.*\r\n\r\nI want to chain insertKline and getOhlcList inside a transaction so I can benefit from the rollback:\r\n\r\n    @QuarkusTest\r\n    @Slf4j\r\n    class KlineServiceTest {\r\n    \t@Inject\r\n    \tKlineRepository klineRepository;\r\n    \r\n    \t@Inject\r\n    \tCurrencyPairRepository currencyPairRepository;\r\n    \r\n    \t@Inject\r\n    \tKlineService service;\r\n    \r\n    \t@Test\r\n    \t@DisplayName(&quot;ohlc matches inserted kline&quot;)\r\n    \tvoid ohlcMatchesInsertedKline() {\r\n    \t\t// GIVEN\r\n    \t\tval volume       = BigDecimal.valueOf(1d);\r\n    \t\tval closeTime    = LocalDateTime.now().withSecond(0).withNano(0);\r\n    \t\tval currencyPair = new CurrencyPair(&quot;BTC&quot;, &quot;USDT&quot;);\r\n    \t\tval currencyPairEntity = currencyPairRepository\r\n    \t\t\t                         .findOrCreate(currencyPair)\r\n    \t\t\t                         .await().indefinitely();\r\n    \r\n    \t\tval kline = KlineEntity.builder()\r\n    \t\t                       .id(new KlineId(currencyPairEntity, closeTime))\r\n    \t\t                       .volume(volume)\r\n    \t\t                       .build();\r\n    \r\n    \t\tval insertKline = Uni.createFrom().item(kline)\r\n    \t\t                     .call(klineRepository::persistAndFlush);\r\n    \r\n    \t\tval getOhlcList = service.listOhlcByCurrencyPairAndTimeWindow(currencyPair, ofMinutes(5));\r\n    \r\n    \t\t// WHEN\r\n    \t\tval ohlcList = Panache.withTransaction(\r\n    \t\t\t                      () -&gt; Panache.currentTransaction()\r\n    \t\t\t                                   .invoke(Transaction::markForRollback)\r\n    \t\t\t                                   .replaceWith(insertKline)\r\n    \t\t\t                                   .chain(() -&gt; getOhlcList))\r\n    \t\t                      .await().indefinitely();\r\n    \r\n    \t\t// THEN\r\n    \t\tassertThat(ohlcList).hasSize(1);\r\n    \r\n    \t\tval ohlc = ohlcList.get(0);\r\n    \r\n    \t\tassertThat(ohlc).extracting(Ohlc::getCloseTime, Ohlc::getVolume)\r\n    \t\t                .containsExactly(closeTime, volume);\r\n    \t}\r\n    }\r\n\r\nI get this exception:\r\n\r\n    java.lang.RuntimeException: java.util.concurrent.TimeoutException\r\n    \r\n    \tat io.quarkus.hibernate.reactive.panache.common.runtime.AbstractJpaOperations.executeInVertxEventLoop(AbstractJpaOperations.java:52)\r\n    \tat io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\r\n    \tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\r\nAnd looking at `AbstractJpaOperations`, I can see:\r\n\r\n    public abstract class AbstractJpaOperations&lt;PanacheQueryType&gt; {\r\n    \r\n        // FIXME: make it configurable?\r\n        static final long TIMEOUT_MS = 5000;\r\n        ...\r\n    }\r\n\r\nAlso, same issue when I tried to use `runOnContext()`:\r\n\r\n    @Test\r\n\t@DisplayName(&quot;ohlc matches inserted kline&quot;)\r\n\tvoid ohlcMatchesInsertedKline() throws ExecutionException, InterruptedException {\r\n\t\t// GIVEN\r\n\t\tval volume       = BigDecimal.valueOf(1d);\r\n\t\tval closeTime    = LocalDateTime.now().withSecond(0).withNano(0);\r\n\t\tval currencyPair = new CurrencyPair(&quot;BTC&quot;, &quot;USDT&quot;);\r\n\r\n\t\tval currencyPairEntity = currencyPairRepository\r\n\t\t\t                         .findOrCreate(currencyPair)\r\n\t\t\t                         .await().indefinitely();\r\n\r\n\t\tval kline = KlineEntity.builder()\r\n\t\t                       .id(new KlineId(currencyPairEntity, closeTime))\r\n\t\t                       .volume(volume)\r\n\t\t                       .build();\r\n\r\n\t\tval insertKline = Uni.createFrom().item(kline)\r\n\t\t                     .call(klineRepository::persist);\r\n\r\n\t\tval getOhlcList  = service.listOhlcByCurrencyPairAndTimeWindow(currencyPair, ofMinutes(5));\r\n\t\tval insertAndGet = insertKline.chain(() -&gt; getOhlcList);\r\n\r\n\t\t// WHEN\r\n\t\tval ohlcList = runAndRollback(insertAndGet)\r\n\t\t\t               .runSubscriptionOn(action -&gt; vertx.getOrCreateContext()\r\n\t\t\t                                                 .runOnContext(action))\r\n\t\t\t               .await().indefinitely();\r\n\r\n\t\t// THEN\r\n\t\tassertThat(ohlcList).hasSize(1);\r\n\r\n\t\tval ohlc = ohlcList.get(0);\r\n\r\n\t\tassertThat(ohlc).extracting(Ohlc::getCloseTime, Ohlc::getVolume)\r\n\t\t                .containsExactly(closeTime, volume);\r\n\t}\r\n\r\n\tprivate static Uni&lt;List&lt;Ohlc&gt;&gt; runAndRollback(Uni&lt;List&lt;Ohlc&gt;&gt; getOhlcList) {\r\n\t\treturn Panache.withTransaction(\r\n\t\t\t() -&gt; Panache.currentTransaction()\r\n\t\t\t             .invoke(Transaction::markForRollback)\r\n\t\t\t             .replaceWith(getOhlcList));\r\n\t}","title":"How to chain 2 Uni&lt;?&gt; in unit test using Panache.withTransaction() without getting a java.util.concurrent.TimeoutException","body":"<p>I'm struggling using <code>Panache.withTransaction()</code> in unit tests, whatever I do, I get a <code>java.util.concurrent.TimeoutException</code>.</p>\n<p><em>Note: It works without transaction but I have to delete the inserts manually.</em></p>\n<p>I want to chain insertKline and getOhlcList inside a transaction so I can benefit from the rollback:</p>\n<pre><code>@QuarkusTest\n@Slf4j\nclass KlineServiceTest {\n    @Inject\n    KlineRepository klineRepository;\n\n    @Inject\n    CurrencyPairRepository currencyPairRepository;\n\n    @Inject\n    KlineService service;\n\n    @Test\n    @DisplayName(&quot;ohlc matches inserted kline&quot;)\n    void ohlcMatchesInsertedKline() {\n        // GIVEN\n        val volume       = BigDecimal.valueOf(1d);\n        val closeTime    = LocalDateTime.now().withSecond(0).withNano(0);\n        val currencyPair = new CurrencyPair(&quot;BTC&quot;, &quot;USDT&quot;);\n        val currencyPairEntity = currencyPairRepository\n                                     .findOrCreate(currencyPair)\n                                     .await().indefinitely();\n\n        val kline = KlineEntity.builder()\n                               .id(new KlineId(currencyPairEntity, closeTime))\n                               .volume(volume)\n                               .build();\n\n        val insertKline = Uni.createFrom().item(kline)\n                             .call(klineRepository::persistAndFlush);\n\n        val getOhlcList = service.listOhlcByCurrencyPairAndTimeWindow(currencyPair, ofMinutes(5));\n\n        // WHEN\n        val ohlcList = Panache.withTransaction(\n                                  () -&gt; Panache.currentTransaction()\n                                               .invoke(Transaction::markForRollback)\n                                               .replaceWith(insertKline)\n                                               .chain(() -&gt; getOhlcList))\n                              .await().indefinitely();\n\n        // THEN\n        assertThat(ohlcList).hasSize(1);\n\n        val ohlc = ohlcList.get(0);\n\n        assertThat(ohlc).extracting(Ohlc::getCloseTime, Ohlc::getVolume)\n                        .containsExactly(closeTime, volume);\n    }\n}\n</code></pre>\n<p>I get this exception:</p>\n<pre><code>java.lang.RuntimeException: java.util.concurrent.TimeoutException\n\n    at io.quarkus.hibernate.reactive.panache.common.runtime.AbstractJpaOperations.executeInVertxEventLoop(AbstractJpaOperations.java:52)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n</code></pre>\n<p>And looking at <code>AbstractJpaOperations</code>, I can see:</p>\n<pre><code>public abstract class AbstractJpaOperations&lt;PanacheQueryType&gt; {\n\n    // FIXME: make it configurable?\n    static final long TIMEOUT_MS = 5000;\n    ...\n}\n</code></pre>\n<p>Also, same issue when I tried to use <code>runOnContext()</code>:</p>\n<pre><code>@Test\n@DisplayName(&quot;ohlc matches inserted kline&quot;)\nvoid ohlcMatchesInsertedKline() throws ExecutionException, InterruptedException {\n    // GIVEN\n    val volume       = BigDecimal.valueOf(1d);\n    val closeTime    = LocalDateTime.now().withSecond(0).withNano(0);\n    val currencyPair = new CurrencyPair(&quot;BTC&quot;, &quot;USDT&quot;);\n\n    val currencyPairEntity = currencyPairRepository\n                                 .findOrCreate(currencyPair)\n                                 .await().indefinitely();\n\n    val kline = KlineEntity.builder()\n                           .id(new KlineId(currencyPairEntity, closeTime))\n                           .volume(volume)\n                           .build();\n\n    val insertKline = Uni.createFrom().item(kline)\n                         .call(klineRepository::persist);\n\n    val getOhlcList  = service.listOhlcByCurrencyPairAndTimeWindow(currencyPair, ofMinutes(5));\n    val insertAndGet = insertKline.chain(() -&gt; getOhlcList);\n\n    // WHEN\n    val ohlcList = runAndRollback(insertAndGet)\n                       .runSubscriptionOn(action -&gt; vertx.getOrCreateContext()\n                                                         .runOnContext(action))\n                       .await().indefinitely();\n\n    // THEN\n    assertThat(ohlcList).hasSize(1);\n\n    val ohlc = ohlcList.get(0);\n\n    assertThat(ohlc).extracting(Ohlc::getCloseTime, Ohlc::getVolume)\n                    .containsExactly(closeTime, volume);\n}\n\nprivate static Uni&lt;List&lt;Ohlc&gt;&gt; runAndRollback(Uni&lt;List&lt;Ohlc&gt;&gt; getOhlcList) {\n    return Panache.withTransaction(\n        () -&gt; Panache.currentTransaction()\n                     .invoke(Transaction::markForRollback)\n                     .replaceWith(getOhlcList));\n}\n</code></pre>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":16125470,"reputation":253,"user_id":11640307,"display_name":"Siva Rahul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655294171,"creation_date":1655293192,"answer_id":72630690,"question_id":72630336,"body_markdown":"You can use [splitByCharacterTypeCamelCase](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#splitByCharacterTypeCamelCase-java.lang.String-) from Apache Commons;\r\n\r\nThis will return split array, join them using join() from Apache Commons;\r\n\r\n```\r\nprivate static String getSnakeCaseString(String camelCaseString) {\r\n    String[] split = StringUtils.splitByCharacterTypeCamelCase(camelCaseString);\r\n    String joinedString = StringUtils.join(split, &quot;_&quot;);\r\n    return joinedString.toLowerCase();\r\n}\r\n```\r\n\r\nSample ouput for input &quot;stringToChange&quot;:\r\n```\r\nstring_to_change\r\n```\r\n\r\nUse this method for all the keys you want to change.\r\n\r\nEDIT ::\r\n```\r\nString jsonString = &quot;{\\n&quot; +\r\n        &quot;    \\&quot;degree\\&quot;: \\&quot;Secondary\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;boardName\\&quot;: \\&quot;UP\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;instituteName\\&quot;: \\&quot;DAV\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;startMonth\\&quot;: \\&quot;June\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;startYear\\&quot;: \\&quot;2000\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;endMonth\\&quot;: \\&quot;May\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;endYear\\&quot;: \\&quot;2001\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;specialization\\&quot;: \\&quot;\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;rollNumber\\&quot;: \\&quot;\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;marksType\\&quot;: \\&quot;CGPA\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;marks\\&quot;: \\&quot;\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;country\\&quot;: \\&quot;\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;state\\&quot;: \\&quot;\\&quot;,\\n&quot; +\r\n        &quot;    \\&quot;district\\&quot;: \\&quot;\\&quot;\\n&quot; +\r\n        &quot;}&quot;;\r\n\r\nJSONObject jsonObject = new JSONObject(jsonString);\r\nJSONObject newJSONObject = new JSONObject();\r\nfor (String key : jsonObject.keySet()) {\r\n    String newKey = getSnakeCaseString(key);\r\n    newJSONObject.put(newKey, jsonObject.get(key));\r\n}\r\n\r\nSystem.out.println(newJSONObject);\r\n```\r\nThis is a sample code which changes the key. Handle recursion to change all the keys.","title":"Convert all recursive keys to underscore_with lower_case in java","body":"<p>You can use <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#splitByCharacterTypeCamelCase-java.lang.String-\" rel=\"nofollow noreferrer\">splitByCharacterTypeCamelCase</a> from Apache Commons;</p>\n<p>This will return split array, join them using join() from Apache Commons;</p>\n<pre><code>private static String getSnakeCaseString(String camelCaseString) {\n    String[] split = StringUtils.splitByCharacterTypeCamelCase(camelCaseString);\n    String joinedString = StringUtils.join(split, &quot;_&quot;);\n    return joinedString.toLowerCase();\n}\n</code></pre>\n<p>Sample ouput for input &quot;stringToChange&quot;:</p>\n<pre><code>string_to_change\n</code></pre>\n<p>Use this method for all the keys you want to change.</p>\n<p>EDIT ::</p>\n<pre><code>String jsonString = &quot;{\\n&quot; +\n        &quot;    \\&quot;degree\\&quot;: \\&quot;Secondary\\&quot;,\\n&quot; +\n        &quot;    \\&quot;boardName\\&quot;: \\&quot;UP\\&quot;,\\n&quot; +\n        &quot;    \\&quot;instituteName\\&quot;: \\&quot;DAV\\&quot;,\\n&quot; +\n        &quot;    \\&quot;startMonth\\&quot;: \\&quot;June\\&quot;,\\n&quot; +\n        &quot;    \\&quot;startYear\\&quot;: \\&quot;2000\\&quot;,\\n&quot; +\n        &quot;    \\&quot;endMonth\\&quot;: \\&quot;May\\&quot;,\\n&quot; +\n        &quot;    \\&quot;endYear\\&quot;: \\&quot;2001\\&quot;,\\n&quot; +\n        &quot;    \\&quot;specialization\\&quot;: \\&quot;\\&quot;,\\n&quot; +\n        &quot;    \\&quot;rollNumber\\&quot;: \\&quot;\\&quot;,\\n&quot; +\n        &quot;    \\&quot;marksType\\&quot;: \\&quot;CGPA\\&quot;,\\n&quot; +\n        &quot;    \\&quot;marks\\&quot;: \\&quot;\\&quot;,\\n&quot; +\n        &quot;    \\&quot;country\\&quot;: \\&quot;\\&quot;,\\n&quot; +\n        &quot;    \\&quot;state\\&quot;: \\&quot;\\&quot;,\\n&quot; +\n        &quot;    \\&quot;district\\&quot;: \\&quot;\\&quot;\\n&quot; +\n        &quot;}&quot;;\n\nJSONObject jsonObject = new JSONObject(jsonString);\nJSONObject newJSONObject = new JSONObject();\nfor (String key : jsonObject.keySet()) {\n    String newKey = getSnakeCaseString(key);\n    newJSONObject.put(newKey, jsonObject.get(key));\n}\n\nSystem.out.println(newJSONObject);\n</code></pre>\n<p>This is a sample code which changes the key. Handle recursion to change all the keys.</p>\n"},{"tags":[],"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1655897025,"creation_date":1655295093,"answer_id":72631170,"question_id":72630336,"body_markdown":"\r\nIn java 9 you can try using this:\r\n\r\n    String newJsonString = Pattern.compile(&quot;[A-Z](?=(\\\\w*)\\&quot;:)&quot;)\r\n            .matcher(jsonString)\r\n            .replaceAll(matchResult -&gt; &quot;_&quot; + matchResult.group().toLowerCase());\r\n\r\nFor lower version you can try this:\r\n\r\n        Pattern p = Pattern.compile(&quot;[A-Z](?=\\\\w*\\&quot;:)&quot;);\r\n        Matcher m = p.matcher(jsonString);\r\n\r\n        StringBuffer sb = new StringBuffer();\r\n        while(m.find()){\r\n            String match = m.group();\r\n            m.appendReplacement(sb, &quot;_&quot; + match.toLowerCase());\r\n        }\r\n        m.appendTail(sb);\r\n        String newJsonString = sb.toString();\r\n\r\nAddition:\r\nTo turn it back again from snake case to camel case you can use the same code, but use\r\n\r\n    Pattern p = Pattern.compile(&quot;_[a-z](?=\\\\w*\\&quot;:)&quot;);\r\n\r\nand\r\n\r\n    m.appendReplacement(sb, match.substring(1).toUpperCase());\r\n\r\ninstead","title":"Convert all recursive keys to underscore_with lower_case in java","body":"<p>In java 9 you can try using this:</p>\n<pre><code>String newJsonString = Pattern.compile(&quot;[A-Z](?=(\\\\w*)\\&quot;:)&quot;)\n        .matcher(jsonString)\n        .replaceAll(matchResult -&gt; &quot;_&quot; + matchResult.group().toLowerCase());\n</code></pre>\n<p>For lower version you can try this:</p>\n<pre><code>    Pattern p = Pattern.compile(&quot;[A-Z](?=\\\\w*\\&quot;:)&quot;);\n    Matcher m = p.matcher(jsonString);\n\n    StringBuffer sb = new StringBuffer();\n    while(m.find()){\n        String match = m.group();\n        m.appendReplacement(sb, &quot;_&quot; + match.toLowerCase());\n    }\n    m.appendTail(sb);\n    String newJsonString = sb.toString();\n</code></pre>\n<p>Addition:\nTo turn it back again from snake case to camel case you can use the same code, but use</p>\n<pre><code>Pattern p = Pattern.compile(&quot;_[a-z](?=\\\\w*\\&quot;:)&quot;);\n</code></pre>\n<p>and</p>\n<pre><code>m.appendReplacement(sb, match.substring(1).toUpperCase());\n</code></pre>\n<p>instead</p>\n"},{"tags":[],"owner":{"account_id":446208,"reputation":8611,"user_id":839128,"accept_rate":75,"display_name":"MikeFHay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655897685,"creation_date":1655897685,"answer_id":72714760,"question_id":72630336,"body_markdown":"Guava&#39;s [CaseFormat][1] class can convert a String to a different format for you.\r\n\r\n```\r\nString snakeCaseString = CaseFormat.LOWER_CAMEL.to(CaseFormat.LOWER_UNDERSCORE, camelCaseString);\r\n```\r\n\r\nAs for recursively iterating your keys, it depends on how you are modelling your object (a well-defined class? A Map? a Jackson JsonNode?)\r\n\r\n  [1]: https://guava.dev/releases/19.0/api/docs/com/google/common/base/CaseFormat.html","title":"Convert all recursive keys to underscore_with lower_case in java","body":"<p>Guava's <a href=\"https://guava.dev/releases/19.0/api/docs/com/google/common/base/CaseFormat.html\" rel=\"nofollow noreferrer\">CaseFormat</a> class can convert a String to a different format for you.</p>\n<pre><code>String snakeCaseString = CaseFormat.LOWER_CAMEL.to(CaseFormat.LOWER_UNDERSCORE, camelCaseString);\n</code></pre>\n<p>As for recursively iterating your keys, it depends on how you are modelling your object (a well-defined class? A Map? a Jackson JsonNode?)</p>\n"}],"owner":{"account_id":10686405,"reputation":170,"user_id":7866838,"display_name":"Rajesh Patel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72631170,"answer_count":3,"score":0,"last_activity_date":1656504684,"creation_date":1655291624,"question_id":72630336,"body_markdown":"I have json with all key are in camel case inside it list objects. see below my json.\r\nMy all DTO of property in camel case.\r\nscenario is like i am getting camel case json object and the pass this object to third party API. That API is accepting snake with lower case.\r\n\r\nExample : knownLanguage to known_language\r\n          passportNumber to passport_number\r\n\r\n```\r\n{\r\n    &quot;knownLanguage&quot;: [\r\n        {\r\n            &quot;language&quot;: &quot;Marathi&quot;,\r\n            &quot;isWrite&quot;: true,\r\n            &quot;isRead&quot;: true,\r\n            &quot;isSpeak&quot;: true\r\n        },\r\n        {\r\n            &quot;language&quot;: &quot;English&quot;,\r\n            &quot;isWrite&quot;: true,\r\n            &quot;isRead&quot;: true,\r\n            &quot;isSpeak&quot;: true\r\n        }\r\n    ],\r\n    &quot;internationalInterest&quot;: {\r\n        &quot;passportNumber&quot;: &quot;1234567898&quot;,\r\n        &quot;issueDate&quot;: &quot;2020-06-01&quot;,\r\n        &quot;expiryDate&quot;: &quot;2030-06-01&quot;\r\n    },\r\n    &quot;educationDetails&quot;: [\r\n        {\r\n            &quot;education&quot;: {\r\n                &quot;degree&quot;: &quot;Secondary&quot;,\r\n                &quot;boardName&quot;: &quot;UP&quot;,\r\n                &quot;instituteName&quot;: &quot;DAV&quot;,\r\n                &quot;startMonth&quot;: &quot;June&quot;,\r\n                &quot;startYear&quot;: &quot;2000&quot;,\r\n                &quot;endMonth&quot;: &quot;May&quot;,\r\n                &quot;endYear&quot;: &quot;2001&quot;,\r\n                &quot;specialization&quot;: &quot;&quot;,\r\n                &quot;rollNumber&quot;: &quot;&quot;,\r\n                &quot;marksType&quot;: &quot;CGPA&quot;,\r\n                &quot;marks&quot;: &quot;&quot;,\r\n                &quot;country&quot;: &quot;&quot;,\r\n                &quot;state&quot;: &quot;&quot;,\r\n                &quot;district&quot;: &quot;&quot;\r\n            }\r\n        },\r\n        {\r\n            &quot;education&quot;: {\r\n                &quot;degree&quot;: &quot;Bachelors&quot;,\r\n                &quot;boardName&quot;: &quot;UP&quot;,\r\n                &quot;instituteName&quot;: &quot;DAV&quot;,\r\n                &quot;startMonth&quot;: &quot;June&quot;,\r\n                &quot;startYear&quot;: &quot;2000&quot;,\r\n                &quot;endMonth&quot;: &quot;May&quot;,\r\n                &quot;endYear&quot;: &quot;2001&quot;,\r\n                &quot;specialization&quot;: &quot;&quot;,\r\n                &quot;rollNumber&quot;: &quot;&quot;,\r\n                &quot;marksType&quot;: &quot;CGPA&quot;,\r\n                &quot;marks&quot;: &quot;&quot;,\r\n                &quot;country&quot;: &quot;&quot;,\r\n                &quot;state&quot;: &quot;&quot;,\r\n                &quot;district&quot;: &quot;&quot;\r\n            }\r\n        }\r\n    ],\r\n    &quot;employmentDetails&quot;: [\r\n        {\r\n            &quot;employment&quot;: {\r\n                &quot;employerName&quot;: &quot;No&quot;,\r\n                &quot;employmentType&quot;: &quot;Permanent&quot;,\r\n                &quot;isCurrent&quot;: true,\r\n                &quot;jobType&quot;: &quot;Full Time&quot;,\r\n                &quot;startDate&quot;: &quot;2022-06-14&quot;,\r\n                &quot;endDate&quot;: &quot;2022-06-15&quot;,\r\n                &quot;jobRole&quot;: &quot;Software Engineer&quot;,\r\n                &quot;jobDescription&quot;: &quot;&quot;,\r\n                &quot;lastDrawnSalary&quot;: 10000,\r\n                &quot;country&quot;: &quot;India&quot;,\r\n                &quot;state&quot;: &quot;&quot;,\r\n                &quot;district&quot;: &quot;No&quot;\r\n            }\r\n        }\r\n    ],\r\n    &quot;disabilityDetails&quot;: [\r\n        {\r\n            &quot;disability&quot;: {\r\n                &quot;disabilityType&quot;: &quot;Blindness&quot;,\r\n                &quot;disabilityPercentage&quot;: &quot;20&quot;\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nI want to convert all recursive keys of above json into underscore with lowercase.\r\n\r\noutput\r\n\r\n```\r\n{\r\n&#160; &quot;known_language&quot;: [\r\n&#160; &#160; {\r\n&#160; &#160; &#160; &quot;language&quot;: &quot;Hindi&quot;,\r\n&#160; &#160; &#160; &quot;is_write&quot;: true,\r\n&#160; &#160; &#160; &quot;is_read&quot;: true,\r\n&#160; &#160; &#160; &quot;is_speak&quot;: true\r\n&#160; &#160; },\r\n&#160; &#160; {\r\n&#160; &#160; &#160; &quot;language&quot;: &quot;English&quot;,\r\n&#160; &#160; &#160; &quot;is_write&quot;: true,\r\n&#160; &#160; &#160; &quot;is_read&quot;: true,\r\n&#160; &#160; &#160; &quot;is_speak&quot;: true\r\n&#160; &#160; }\r\n&#160; ],\r\n&#160; &quot;international_interest&quot;: {\r\n&#160; &#160; &quot;passport_number&quot;: &quot;1234567898&quot;,\r\n&#160; &#160; &quot;issue_date&quot;: &quot;2020-06-01&quot;,\r\n&#160; &#160; &quot;expiry_date&quot;: &quot;2030-06-01&quot;\r\n&#160; },\r\n&#160; &quot;education_details&quot;: [\r\n&#160; &#160; {\r\n&#160; &#160; &#160; &quot;education&quot;: {\r\n&#160; &#160; &#160; &#160; &quot;degree&quot;: &quot;Secondary&quot;,\r\n&#160; &#160; &#160; &#160; &quot;board_name&quot;: &quot;UP&quot;,\r\n&#160; &#160; &#160; &#160; &quot;institute_name&quot;: &quot;DAV&quot;,\r\n&#160; &#160; &#160; &#160; &quot;start_month&quot;: &quot;June&quot;,\r\n&#160; &#160; &#160; &#160; &quot;start_year&quot;: &quot;2000&quot;,\r\n&#160; &#160; &#160; &#160; &quot;end_month&quot;: &quot;May&quot;,\r\n&#160; &#160; &#160; &#160; &quot;end_year&quot;: &quot;2001&quot;,\r\n&#160; &#160; &#160; &#160; &quot;specialization&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;roll_number&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;marks_type&quot;: &quot;CGPA&quot;,\r\n&#160; &#160; &#160; &#160; &quot;marks&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;country&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;state&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;district&quot;: &quot;&quot;\r\n&#160; &#160; &#160; }\r\n&#160; &#160; },\r\n&#160; &#160; {\r\n&#160; &#160; &#160; &quot;education&quot;: {\r\n&#160; &#160; &#160; &#160; &quot;degree&quot;: &quot;Bachelors&quot;,\r\n&#160; &#160; &#160; &#160; &quot;board_name&quot;: &quot;AU&quot;,\r\n&#160; &#160; &#160; &#160; &quot;institute_name&quot;: &quot;AU&quot;,\r\n&#160; &#160; &#160; &#160; &quot;start_month&quot;: &quot;June&quot;,\r\n&#160; &#160; &#160; &#160; &quot;start_year&quot;: &quot;2003&quot;,\r\n&#160; &#160; &#160; &#160; &quot;end_month&quot;: &quot;May&quot;,\r\n&#160; &#160; &#160; &#160; &quot;end_year&quot;: &quot;2006&quot;,\r\n&#160; &#160; &#160; &#160; &quot;specialization&quot;: &quot;Computer&quot;,\r\n&#160; &#160; &#160; &#160; &quot;roll_number&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;marks_type&quot;: &quot;CGPA&quot;,\r\n&#160; &#160; &#160; &#160; &quot;marks&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;country&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;state&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;district&quot;: &quot;&quot;\r\n&#160; &#160; &#160; }\r\n&#160; &#160; }\r\n&#160; ],\r\n&#160; &quot;employment_details&quot;: [\r\n&#160; &#160; {\r\n&#160; &#160; &#160; &quot;employment&quot;: {\r\n&#160; &#160; &#160; &#160; &quot;employer_name&quot;: &quot;No&quot;,\r\n&#160; &#160; &#160; &#160; &quot;employment_type&quot;: &quot;Permanent&quot;,\r\n&#160; &#160; &#160; &#160; &quot;is_current&quot;: true,\r\n&#160; &#160; &#160; &#160; &quot;job_type&quot;: &quot;Full Time&quot;,\r\n&#160; &#160; &#160; &#160; &quot;start_date&quot;: &quot;2022-06-14&quot;,\r\n&#160; &#160; &#160; &#160; &quot;end_date&quot;: &quot;2022-06-15&quot;,\r\n&#160; &#160; &#160; &#160; &quot;job_role&quot;: &quot;Software Engineer&quot;,\r\n&#160; &#160; &#160; &#160; &quot;job_description&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;last_drawn_salary&quot;: 10000,\r\n&#160; &#160; &#160; &#160; &quot;country&quot;: &quot;India&quot;,\r\n&#160; &#160; &#160; &#160; &quot;state&quot;: &quot;&quot;,\r\n&#160; &#160; &#160; &#160; &quot;district&quot;: &quot;No&quot;\r\n&#160; &#160; &#160; }\r\n&#160; &#160; }\r\n&#160; ],\r\n&#160; &quot;disability_details&quot;: [\r\n&#160; &#160; {\r\n&#160; &#160; &#160; &quot;disability&quot;: {\r\n&#160; &#160; &#160; &#160; &quot;disability_type&quot;: &quot;Blindness&quot;,\r\n&#160; &#160; &#160; &#160; &quot;disability_percentage&quot;: &quot;20&quot;\r\n&#160; &#160; &#160; }\r\n&#160; &#160; }\r\n&#160; ]\r\n}\r\n```\r\nAnyone have idea how to do it ?","title":"Convert all recursive keys to underscore_with lower_case in java","body":"<p>I have json with all key are in camel case inside it list objects. see below my json.\nMy all DTO of property in camel case.\nscenario is like i am getting camel case json object and the pass this object to third party API. That API is accepting snake with lower case.</p>\n<p>Example : knownLanguage to known_language\npassportNumber to passport_number</p>\n<pre><code>{\n    &quot;knownLanguage&quot;: [\n        {\n            &quot;language&quot;: &quot;Marathi&quot;,\n            &quot;isWrite&quot;: true,\n            &quot;isRead&quot;: true,\n            &quot;isSpeak&quot;: true\n        },\n        {\n            &quot;language&quot;: &quot;English&quot;,\n            &quot;isWrite&quot;: true,\n            &quot;isRead&quot;: true,\n            &quot;isSpeak&quot;: true\n        }\n    ],\n    &quot;internationalInterest&quot;: {\n        &quot;passportNumber&quot;: &quot;1234567898&quot;,\n        &quot;issueDate&quot;: &quot;2020-06-01&quot;,\n        &quot;expiryDate&quot;: &quot;2030-06-01&quot;\n    },\n    &quot;educationDetails&quot;: [\n        {\n            &quot;education&quot;: {\n                &quot;degree&quot;: &quot;Secondary&quot;,\n                &quot;boardName&quot;: &quot;UP&quot;,\n                &quot;instituteName&quot;: &quot;DAV&quot;,\n                &quot;startMonth&quot;: &quot;June&quot;,\n                &quot;startYear&quot;: &quot;2000&quot;,\n                &quot;endMonth&quot;: &quot;May&quot;,\n                &quot;endYear&quot;: &quot;2001&quot;,\n                &quot;specialization&quot;: &quot;&quot;,\n                &quot;rollNumber&quot;: &quot;&quot;,\n                &quot;marksType&quot;: &quot;CGPA&quot;,\n                &quot;marks&quot;: &quot;&quot;,\n                &quot;country&quot;: &quot;&quot;,\n                &quot;state&quot;: &quot;&quot;,\n                &quot;district&quot;: &quot;&quot;\n            }\n        },\n        {\n            &quot;education&quot;: {\n                &quot;degree&quot;: &quot;Bachelors&quot;,\n                &quot;boardName&quot;: &quot;UP&quot;,\n                &quot;instituteName&quot;: &quot;DAV&quot;,\n                &quot;startMonth&quot;: &quot;June&quot;,\n                &quot;startYear&quot;: &quot;2000&quot;,\n                &quot;endMonth&quot;: &quot;May&quot;,\n                &quot;endYear&quot;: &quot;2001&quot;,\n                &quot;specialization&quot;: &quot;&quot;,\n                &quot;rollNumber&quot;: &quot;&quot;,\n                &quot;marksType&quot;: &quot;CGPA&quot;,\n                &quot;marks&quot;: &quot;&quot;,\n                &quot;country&quot;: &quot;&quot;,\n                &quot;state&quot;: &quot;&quot;,\n                &quot;district&quot;: &quot;&quot;\n            }\n        }\n    ],\n    &quot;employmentDetails&quot;: [\n        {\n            &quot;employment&quot;: {\n                &quot;employerName&quot;: &quot;No&quot;,\n                &quot;employmentType&quot;: &quot;Permanent&quot;,\n                &quot;isCurrent&quot;: true,\n                &quot;jobType&quot;: &quot;Full Time&quot;,\n                &quot;startDate&quot;: &quot;2022-06-14&quot;,\n                &quot;endDate&quot;: &quot;2022-06-15&quot;,\n                &quot;jobRole&quot;: &quot;Software Engineer&quot;,\n                &quot;jobDescription&quot;: &quot;&quot;,\n                &quot;lastDrawnSalary&quot;: 10000,\n                &quot;country&quot;: &quot;India&quot;,\n                &quot;state&quot;: &quot;&quot;,\n                &quot;district&quot;: &quot;No&quot;\n            }\n        }\n    ],\n    &quot;disabilityDetails&quot;: [\n        {\n            &quot;disability&quot;: {\n                &quot;disabilityType&quot;: &quot;Blindness&quot;,\n                &quot;disabilityPercentage&quot;: &quot;20&quot;\n            }\n        }\n    ]\n}\n</code></pre>\n<p>I want to convert all recursive keys of above json into underscore with lowercase.</p>\n<p>output</p>\n<pre><code>{\n &quot;known_language&quot;: [\n  {\n   &quot;language&quot;: &quot;Hindi&quot;,\n   &quot;is_write&quot;: true,\n   &quot;is_read&quot;: true,\n   &quot;is_speak&quot;: true\n  },\n  {\n   &quot;language&quot;: &quot;English&quot;,\n   &quot;is_write&quot;: true,\n   &quot;is_read&quot;: true,\n   &quot;is_speak&quot;: true\n  }\n ],\n &quot;international_interest&quot;: {\n  &quot;passport_number&quot;: &quot;1234567898&quot;,\n  &quot;issue_date&quot;: &quot;2020-06-01&quot;,\n  &quot;expiry_date&quot;: &quot;2030-06-01&quot;\n },\n &quot;education_details&quot;: [\n  {\n   &quot;education&quot;: {\n    &quot;degree&quot;: &quot;Secondary&quot;,\n    &quot;board_name&quot;: &quot;UP&quot;,\n    &quot;institute_name&quot;: &quot;DAV&quot;,\n    &quot;start_month&quot;: &quot;June&quot;,\n    &quot;start_year&quot;: &quot;2000&quot;,\n    &quot;end_month&quot;: &quot;May&quot;,\n    &quot;end_year&quot;: &quot;2001&quot;,\n    &quot;specialization&quot;: &quot;&quot;,\n    &quot;roll_number&quot;: &quot;&quot;,\n    &quot;marks_type&quot;: &quot;CGPA&quot;,\n    &quot;marks&quot;: &quot;&quot;,\n    &quot;country&quot;: &quot;&quot;,\n    &quot;state&quot;: &quot;&quot;,\n    &quot;district&quot;: &quot;&quot;\n   }\n  },\n  {\n   &quot;education&quot;: {\n    &quot;degree&quot;: &quot;Bachelors&quot;,\n    &quot;board_name&quot;: &quot;AU&quot;,\n    &quot;institute_name&quot;: &quot;AU&quot;,\n    &quot;start_month&quot;: &quot;June&quot;,\n    &quot;start_year&quot;: &quot;2003&quot;,\n    &quot;end_month&quot;: &quot;May&quot;,\n    &quot;end_year&quot;: &quot;2006&quot;,\n    &quot;specialization&quot;: &quot;Computer&quot;,\n    &quot;roll_number&quot;: &quot;&quot;,\n    &quot;marks_type&quot;: &quot;CGPA&quot;,\n    &quot;marks&quot;: &quot;&quot;,\n    &quot;country&quot;: &quot;&quot;,\n    &quot;state&quot;: &quot;&quot;,\n    &quot;district&quot;: &quot;&quot;\n   }\n  }\n ],\n &quot;employment_details&quot;: [\n  {\n   &quot;employment&quot;: {\n    &quot;employer_name&quot;: &quot;No&quot;,\n    &quot;employment_type&quot;: &quot;Permanent&quot;,\n    &quot;is_current&quot;: true,\n    &quot;job_type&quot;: &quot;Full Time&quot;,\n    &quot;start_date&quot;: &quot;2022-06-14&quot;,\n    &quot;end_date&quot;: &quot;2022-06-15&quot;,\n    &quot;job_role&quot;: &quot;Software Engineer&quot;,\n    &quot;job_description&quot;: &quot;&quot;,\n    &quot;last_drawn_salary&quot;: 10000,\n    &quot;country&quot;: &quot;India&quot;,\n    &quot;state&quot;: &quot;&quot;,\n    &quot;district&quot;: &quot;No&quot;\n   }\n  }\n ],\n &quot;disability_details&quot;: [\n  {\n   &quot;disability&quot;: {\n    &quot;disability_type&quot;: &quot;Blindness&quot;,\n    &quot;disability_percentage&quot;: &quot;20&quot;\n   }\n  }\n ]\n}\n</code></pre>\n<p>Anyone have idea how to do it ?</p>\n"},{"tags":["java","spring-boot","mockito","junit4"],"comments":[{"owner":{"account_id":5916600,"reputation":2324,"user_id":4655217,"display_name":"geobreze"},"score":1,"creation_date":1656436229,"post_id":72790033,"comment_id":128570125,"body_markdown":"Since you&#39;re using`@RunWith(SpringRunner.class)` instead of `@RunWith(MockitoJUnitRunner.class)` you need to use `@MockBean` instead of `@Mock`. You can read more here https://www.baeldung.com/java-spring-mockito-mock-mockbean","body":"Since you&#39;re using<code>@RunWith(SpringRunner.class)</code> instead of <code>@RunWith(MockitoJUnitRunner.class)</code> you need to use <code>@MockBean</code> instead of <code>@Mock</code>. You can read more here <a href=\"https://www.baeldung.com/java-spring-mockito-mock-mockbean\" rel=\"nofollow noreferrer\">baeldung.com/java-spring-mockito-mock-mockbean</a>"}],"answers":[{"tags":[],"owner":{"account_id":1709850,"reputation":2020,"user_id":1568120,"accept_rate":57,"display_name":"Ging3r"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1656504362,"creation_date":1656504362,"answer_id":72801153,"question_id":72790033,"body_markdown":"thanks to @geobreze comment I drilled down into @MockBean.\r\nIt was a way tried on my thousands tries but I copied some code without really understand what it was coping\r\n\r\nAt the end I&#39;ve used @SpyBean because @MockBean mocks all methods class. To semplify implementation I&#39;ve mocked Client object, exchenge of RestTemplate it is a little bit complex, I didn&#39;t want fall in other stupid error.\r\n\r\nIt is not useful declare all classes chain, so I&#39;ve removed facade and I&#39;ve used @autowired annotation rather than @InjectMock\r\n\r\nhere my test\r\n\r\n    @ActiveProfile(&quot;test&quot;)\r\n    @RunWith(SpringRunner.class)\r\n    @SpringbootTest\r\n    @EmbeddedKafka\r\n    public class MySuccessfullTest{\r\n    \r\n        @SpyBean MyClient client;\r\n        @Autowired KafkaConsumer consumer;\r\n        @Autowired KafkaProducer producer;\r\n\r\n        @Test\r\n        public void test(){\r\n            MyClientResponse responseObject = MyClientResponse();\r\n\r\n            Mokito.doReturn(responseObject).when(client).callApi();\r\n            producer.send(&quot;My Kafka Message&quot;);\r\n        }\r\n    }\r\n\r\n\r\n","title":"Mock RestTemplate in SubSubclass","body":"<p>thanks to @geobreze comment I drilled down into @MockBean.\nIt was a way tried on my thousands tries but I copied some code without really understand what it was coping</p>\n<p>At the end I've used @SpyBean because @MockBean mocks all methods class. To semplify implementation I've mocked Client object, exchenge of RestTemplate it is a little bit complex, I didn't want fall in other stupid error.</p>\n<p>It is not useful declare all classes chain, so I've removed facade and I've used @autowired annotation rather than @InjectMock</p>\n<p>here my test</p>\n<pre><code>@ActiveProfile(&quot;test&quot;)\n@RunWith(SpringRunner.class)\n@SpringbootTest\n@EmbeddedKafka\npublic class MySuccessfullTest{\n\n    @SpyBean MyClient client;\n    @Autowired KafkaConsumer consumer;\n    @Autowired KafkaProducer producer;\n\n    @Test\n    public void test(){\n        MyClientResponse responseObject = MyClientResponse();\n\n        Mokito.doReturn(responseObject).when(client).callApi();\n        producer.send(&quot;My Kafka Message&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1709850,"reputation":2020,"user_id":1568120,"accept_rate":57,"display_name":"Ging3r"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72801153,"answer_count":1,"score":1,"last_activity_date":1656504362,"creation_date":1656433309,"question_id":72790033,"body_markdown":"there&#39;s a problem here!\r\n\r\nIn my application I have a Consumer (kafka) that uses a Facade that uses a Client that calls a rest Api with RestTemplate\r\n\r\nI want (have) to test the whole flow excluded the rest call. so I&#39;ve tried to mock RestTemplate but without success -_-\r\n\r\nhere an example of my classes\r\n\r\n    @Service\r\n    public class KafkaConsumer{\r\n        @Autowired MyFacade facade;\r\n\r\n        @KafkaListener\r\n        public void onMessage(){\r\n            facade.awesomeMethod();\r\n        }\r\n    }\r\n\r\n\r\n    @Service\r\n    public class MyFacade{\r\n        @Autowired MyClient client;\r\n       \r\n        public void awesomeMethod(){\r\n            client.callApi();\r\n        }\r\n    }\r\n\r\n    @Service\r\n    public class MyClient{\r\n        @Autowired RestTemplate restTemplate;\r\n\r\n        public void callApi(){\r\n            restTemplate.exchange(.....);\r\n        }\r\n    }\r\n\r\n\r\nnow I&#39;m tring to build a test with mock but something goes wrong and RestTemplate call real server\r\n\r\nhere test class\r\n\r\n    @ActiveProfile(&quot;test&quot;)\r\n    @RunWith(SpringRunner.class)\r\n    @SpringbootTest\r\n    @EmbeddedKafka\r\n    public class MyFailTest{\r\n    \r\n        @Mock RestTemplate restTemplate;\r\n        @InjectMocks MyFacade facade;\r\n        @InjectMocks MyClient client;\r\n        @InjectMocks KafkaConsumer consumer;\r\n        @Autowired KafkaProducer producer;\r\n\r\n        @Test\r\n        public void test(){\r\n\r\n            Mokito.when(restTemplate.exchange(....)).thenReturn(new ResponseEntity&lt;Void&gt;(HttpStatus.OK);)\r\n\r\n            producer.send(&quot;My Kafka Message&quot;);\r\n        }\r\n    }\r\n\r\nhere my test dependecies\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-kafka-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\r\n            &lt;version&gt;3.11.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;5.4.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\nJunit4 and Springboot 2.6.7\r\n\r\nI think I&#39;m failing in @Mock and @InjecMock logic, i&#39;ve tried some combination of them ; ) but without success","title":"Mock RestTemplate in SubSubclass","body":"<p>there's a problem here!</p>\n<p>In my application I have a Consumer (kafka) that uses a Facade that uses a Client that calls a rest Api with RestTemplate</p>\n<p>I want (have) to test the whole flow excluded the rest call. so I've tried to mock RestTemplate but without success -_-</p>\n<p>here an example of my classes</p>\n<pre><code>@Service\npublic class KafkaConsumer{\n    @Autowired MyFacade facade;\n\n    @KafkaListener\n    public void onMessage(){\n        facade.awesomeMethod();\n    }\n}\n\n\n@Service\npublic class MyFacade{\n    @Autowired MyClient client;\n   \n    public void awesomeMethod(){\n        client.callApi();\n    }\n}\n\n@Service\npublic class MyClient{\n    @Autowired RestTemplate restTemplate;\n\n    public void callApi(){\n        restTemplate.exchange(.....);\n    }\n}\n</code></pre>\n<p>now I'm tring to build a test with mock but something goes wrong and RestTemplate call real server</p>\n<p>here test class</p>\n<pre><code>@ActiveProfile(&quot;test&quot;)\n@RunWith(SpringRunner.class)\n@SpringbootTest\n@EmbeddedKafka\npublic class MyFailTest{\n\n    @Mock RestTemplate restTemplate;\n    @InjectMocks MyFacade facade;\n    @InjectMocks MyClient client;\n    @InjectMocks KafkaConsumer consumer;\n    @Autowired KafkaProducer producer;\n\n    @Test\n    public void test(){\n\n        Mokito.when(restTemplate.exchange(....)).thenReturn(new ResponseEntity&lt;Void&gt;(HttpStatus.OK);)\n\n        producer.send(&quot;My Kafka Message&quot;);\n    }\n}\n</code></pre>\n<p>here my test dependecies</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-kafka-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.assertj&lt;/groupId&gt;\n        &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\n        &lt;version&gt;3.11.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n        &lt;version&gt;5.4.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Junit4 and Springboot 2.6.7</p>\n<p>I think I'm failing in @Mock and @InjecMock logic, i've tried some combination of them ; ) but without success</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1656505039,"post_id":72801079,"comment_id":128588414,"body_markdown":"How did you manage to compile this code with those erroneous references to `string`? You must have created your own `string` class and removed it after compiling `Car` Well, actually that still wouldnt compile, as `new Car(2015, &quot;Tesla&quot;, 40)` doesnt match the `Car(int yearModel, string make, int speed)` constructor.","body":"How did you manage to compile this code with those erroneous references to <code>string</code>? You must have created your own <code>string</code> class and removed it after compiling <code>Car</code> Well, actually that still wouldnt compile, as <code>new Car(2015, &quot;Tesla&quot;, 40)</code> doesnt match the <code>Car(int yearModel, string make, int speed)</code> constructor."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1656505354,"post_id":72801079,"comment_id":128588540,"body_markdown":"ECJ allows partial compilation with errors. That might be how op managed to compile it,","body":"ECJ allows partial compilation with errors. That might be how op managed to compile it,"}],"answers":[{"tags":[],"owner":{"account_id":13832344,"reputation":1457,"user_id":9984846,"display_name":"Christian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656504181,"creation_date":1656504181,"answer_id":72801118,"question_id":72801079,"body_markdown":"You have a typo in line 3. `string` should have a capital S, so `String` instead.\r\n\r\nSame then goes for the getter `public string getMake` and the toString()-method and the argument for make in the constructor which all need a capital S again.","title":"Error: Unable to initialize main class Car Caused by: java.lang.NoClassDefFoundError: string","body":"<p>You have a typo in line 3. <code>string</code> should have a capital S, so <code>String</code> instead.</p>\n<p>Same then goes for the getter <code>public string getMake</code> and the toString()-method and the argument for make in the constructor which all need a capital S again.</p>\n"}],"owner":{"account_id":22366875,"reputation":1,"user_id":16746493,"display_name":"Pius Kimathi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1656504181,"creation_date":1656504019,"question_id":72801079,"body_markdown":"\r\nWhat might be the problem? I am stuck and do not know how to continue as I try to figure this out. Any help, direction, and explanation would be very much appreciated!\r\n\r\nThis is what I should do:\r\nDesign appropriate accessor methods to get the values stored in an objects yearModel, make, and speed fields.\r\nThe accelerate method should add 5 to the speed field each time its called.\r\nThe brake method should subtract 5 from the speed field each time its called.\r\n\r\n```\r\npublic class Car {\r\n    private int yearModel;\r\n    private string make;\r\n    private int speed;\r\n\r\n    public Car() {\r\n        this.yearModel = 2015;\r\n        this.make = &quot;Tesla&quot;;\r\n        this.speed = 40;\r\n    }\r\n\r\n    // Constructor\r\n    public Car(int yearModel, string make, int speed) {\r\n        this.yearModel = yearModel;\r\n        this.make = make;\r\n        this.speed = speed;\r\n    }\r\n\r\n    // Getters\r\n    public int getYearModel() {\r\n        return yearModel;\r\n    }\r\n    public string getMake() {\r\n        return make;\r\n    }\r\n\r\n    public int getSpeed() {\r\n        return speed;\r\n    }\r\n\r\n    // Setters\r\n    public void accelerate() {\r\n        speed += 5;\r\n    }\r\n    public void brake() {\r\n        speed -= 5;\r\n    }\r\n\r\n    public string toString() {\r\n        return &quot;Car: &quot; + yearModel + &quot; &quot; + make + &quot; &quot; + speed;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Car myCar = new Car();\r\n        System.out.println(myCar);\r\n        myCar.accelerate();\r\n        System.out.println(myCar);\r\n        myCar.brake();\r\n        System.out.println(myCar);\r\n        Car myCar2 = new Car(2015, &quot;Tesla&quot;, 40);\r\n        System.out.println(myCar2);\r\n    }\r\n}\r\n```\r\n\r\n```\r\nAfter running the java program, this is the error I get:\r\nError: Unable to initialize main class Car\r\nCaused by: java.lang.NoClassDefFoundError: string\r\n```\r\n","title":"Error: Unable to initialize main class Car Caused by: java.lang.NoClassDefFoundError: string","body":"<p>What might be the problem? I am stuck and do not know how to continue as I try to figure this out. Any help, direction, and explanation would be very much appreciated!</p>\n<p>This is what I should do:\nDesign appropriate accessor methods to get the values stored in an objects yearModel, make, and speed fields.\nThe accelerate method should add 5 to the speed field each time its called.\nThe brake method should subtract 5 from the speed field each time its called.</p>\n<pre><code>public class Car {\n    private int yearModel;\n    private string make;\n    private int speed;\n\n    public Car() {\n        this.yearModel = 2015;\n        this.make = &quot;Tesla&quot;;\n        this.speed = 40;\n    }\n\n    // Constructor\n    public Car(int yearModel, string make, int speed) {\n        this.yearModel = yearModel;\n        this.make = make;\n        this.speed = speed;\n    }\n\n    // Getters\n    public int getYearModel() {\n        return yearModel;\n    }\n    public string getMake() {\n        return make;\n    }\n\n    public int getSpeed() {\n        return speed;\n    }\n\n    // Setters\n    public void accelerate() {\n        speed += 5;\n    }\n    public void brake() {\n        speed -= 5;\n    }\n\n    public string toString() {\n        return &quot;Car: &quot; + yearModel + &quot; &quot; + make + &quot; &quot; + speed;\n    }\n\n    public static void main(String[] args) {\n        Car myCar = new Car();\n        System.out.println(myCar);\n        myCar.accelerate();\n        System.out.println(myCar);\n        myCar.brake();\n        System.out.println(myCar);\n        Car myCar2 = new Car(2015, &quot;Tesla&quot;, 40);\n        System.out.println(myCar2);\n    }\n}\n</code></pre>\n<pre><code>After running the java program, this is the error I get:\nError: Unable to initialize main class Car\nCaused by: java.lang.NoClassDefFoundError: string\n</code></pre>\n"},{"tags":["java","regex","string","hashmap"],"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":4,"creation_date":1656471516,"post_id":72795280,"comment_id":128578179,"body_markdown":"There are no magic solutions here. Iterate over the keys and check whether any of them are a match.","body":"There are no magic solutions here. Iterate over the keys and check whether any of them are a match."},{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":0,"creation_date":1656474975,"post_id":72795280,"comment_id":128578649,"body_markdown":"@RobbyCornelissen I initially understood the question along the same lines, but then I realized it is simpler than that. It&#39;s just a question of converting a key prior to lookup in the map  so if a caller has key `abc.unset.xyz`, they first convert that key string to `abc.*.xyz`. From there, just do `map.get(&quot;abc.*.xyz&quot;)` which has a result (or not).","body":"@RobbyCornelissen I initially understood the question along the same lines, but then I realized it is simpler than that. It&#39;s just a question of converting a key prior to lookup in the map  so if a caller has key <code>abc.unset.xyz</code>, they first convert that key string to <code>abc.*.xyz</code>. From there, just do <code>map.get(&quot;abc.*.xyz&quot;)</code> which has a result (or not)."},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":1,"creation_date":1656481061,"post_id":72795280,"comment_id":128579757,"body_markdown":"@Kaan Sure, but what if the key is stored as `*.unset.xyz`? Or `abc.unset.*`? Or some other regular expression entirely? If you can reliably predict the format of the regular expression for a given string, then you&#39;re back to just regular key lookups and  the entire question becomes moot.","body":"@Kaan Sure, but what if the key is stored as <code>*.unset.xyz</code>? Or <code>abc.unset.*</code>? Or some other regular expression entirely? If you can reliably predict the format of the regular expression for a given string, then you&#39;re back to just regular key lookups and  the entire question becomes moot."},{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":0,"creation_date":1656524156,"post_id":72795280,"comment_id":128596410,"body_markdown":"@RobbyCornelissen If we were solving a real problem, I agree those would be valid considerations, but they are beyond what OP asked to solve for. There&#39;s a separate real-world consideration with the current problem definition (which I ignored in my answer), but: since the target key name is a pattern basically, how should the app handle similar starting keys? Does one overwrite and win? Do they combine together? Is there a list of results? Example: `&quot;abc.111.xyz&quot;` and `&quot;abc.222.xyz&quot;`  does one win? Do they merge? etc.","body":"@RobbyCornelissen If we were solving a real problem, I agree those would be valid considerations, but they are beyond what OP asked to solve for. There&#39;s a separate real-world consideration with the current problem definition (which I ignored in my answer), but: since the target key name is a pattern basically, how should the app handle similar starting keys? Does one overwrite and win? Do they combine together? Is there a list of results? Example: <code>&quot;abc.111.xyz&quot;</code> and <code>&quot;abc.222.xyz&quot;</code>  does one win? Do they merge? etc."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656474047,"creation_date":1656472410,"answer_id":72795389,"question_id":72795280,"body_markdown":"You can iterate over the set of entries of the map either using a loop or a stream and filter out the entry containing a regular expression a key that matches the given string.\r\n\r\nAlternatively, you can perform iteration over the set of keys as *@Robby Cornelissen* suggested in the comments, but if you change the type of map let&#39;s say to `TreeMap` your code will get an additional cost because accessing the value will no longer be **O(1)**, but **O(log n)**. With entries, you always have direct references to a key and a value together, and retrieving the value would always be **O(1)**.\r\n\r\nIf you expect only a single target key to be present, then it can be done like that using Stream API:\r\n```\r\nString seachKey = &quot;abc.unset.xyz&quot;;\r\nMap&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n\r\nString values = map.entrySet().stream()\r\n    .filter(entry -&gt; seachKey.matches(entry.getKey()))\r\n    .map(Map.Entry::getValue)\r\n    .findFirst()\r\n    .orElseThrow(); // or .orElse(defaultValue); depending on your needs\r\n```\r\n*Sidenote:* you&#39;re note escaping dots in your regular expressions, dot in regex denotes a symbol of any kind. I guess you&#39;ve probably meant:\r\n\r\n `&quot;abc\\\\..+\\\\.xyz&quot;` - *&quot;abc&quot;* + *dot* + *one or more symbols*  + *dot* + *&quot;xyz&quot;*\r\n","title":"Find a Value in a HashMap mapped to a Key formated as a Regex that matches the given String","body":"<p>You can iterate over the set of entries of the map either using a loop or a stream and filter out the entry containing a regular expression a key that matches the given string.</p>\n<p>Alternatively, you can perform iteration over the set of keys as <em>@Robby Cornelissen</em> suggested in the comments, but if you change the type of map let's say to <code>TreeMap</code> your code will get an additional cost because accessing the value will no longer be <strong>O(1)</strong>, but <strong>O(log n)</strong>. With entries, you always have direct references to a key and a value together, and retrieving the value would always be <strong>O(1)</strong>.</p>\n<p>If you expect only a single target key to be present, then it can be done like that using Stream API:</p>\n<pre><code>String seachKey = &quot;abc.unset.xyz&quot;;\nMap&lt;String, String&gt; map = new HashMap&lt;&gt;();\n\nString values = map.entrySet().stream()\n    .filter(entry -&gt; seachKey.matches(entry.getKey()))\n    .map(Map.Entry::getValue)\n    .findFirst()\n    .orElseThrow(); // or .orElse(defaultValue); depending on your needs\n</code></pre>\n<p><em>Sidenote:</em> you're note escaping dots in your regular expressions, dot in regex denotes a symbol of any kind. I guess you've probably meant:</p>\n<p><code>&quot;abc\\\\..+\\\\.xyz&quot;</code> - <em>&quot;abc&quot;</em> + <em>dot</em> + <em>one or more symbols</em>  + <em>dot</em> + <em>&quot;xyz&quot;</em></p>\n"},{"tags":[],"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656474722,"creation_date":1656474722,"answer_id":72795612,"question_id":72795280,"body_markdown":"&gt; _some of the keys are in this format abc.*.xyz, efg.*.asc._\r\n&gt; _How do i retrieve the value for abc.unset.xyz?_\r\n\r\nYou are describing a step where you need to take an actual key (such as &quot;abc.unset.xyz&quot;) and convert that to it&#39;s equivalent &quot;pattern key&quot; (such as &quot;abc.*.xyz&quot;). In some cases, the original key is the same as the &quot;pattern key&quot; in the map (such as &quot;abc&quot;).\r\n\r\nThis sounds like:\r\n* prior to calling `.get()` on your map, convert the key using a function\r\n* that function applies a regular expression to the key value itself, turning a string like &quot;abc.unset.xyz&quot; into a string like &quot;abc.*.xyz&quot;\r\n\r\nHere&#39;s an example of what that function could look like:\r\n```\r\npublic static String getUpdatedKey(String key) {\r\n    return key.replaceAll(&quot;\\\\.[a-z]+\\\\.&quot;, &quot;.*.&quot;);\r\n}\r\n```\r\nHere&#39;s a simple demo of:\r\n* a map with a literal key &quot;abc.*.xyz&quot;\r\n* caller asking if the long key &quot;abc.unset.xyz&quot; is present (it isn&#39;t, print `null`)\r\n* caller getting the updated key, and asking if that is present (it is, print `1`)\r\n```\r\nMap&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\nmap.put(&quot;abc.*.xyz&quot;, 1);\r\n\r\nString fullKey = &quot;abc.unset.xyz&quot;;\r\nSystem.out.println(map.get(fullKey));\r\n\r\nString updatedKey = getUpdatedKey(fullKey);\r\nSystem.out.println(map.get(updatedKey));\r\n```\r\nRunning above prints\r\n```\r\nnull\r\n1\r\n```\r\n\r\nThis example also works if the input key (such as &quot;abc&quot;) doesn&#39;t contain the other pattern parts:\r\n```\r\nmap.put(&quot;abc&quot;, 2);\r\nSystem.out.println(map.get(getUpdatedKey(&quot;abc&quot;)));\r\n```\r\nRunning above prints `2`.\r\n\r\nYou might need to adjust the regular expression in `getUpdatedKey()`, but this seems like a workable format to follow.\r\n","title":"Find a Value in a HashMap mapped to a Key formated as a Regex that matches the given String","body":"<blockquote>\n<p><em>some of the keys are in this format abc.<em>.xyz, efg.</em>.asc.</em>\n<em>How do i retrieve the value for abc.unset.xyz?</em></p>\n</blockquote>\n<p>You are describing a step where you need to take an actual key (such as &quot;abc.unset.xyz&quot;) and convert that to it's equivalent &quot;pattern key&quot; (such as &quot;abc.*.xyz&quot;). In some cases, the original key is the same as the &quot;pattern key&quot; in the map (such as &quot;abc&quot;).</p>\n<p>This sounds like:</p>\n<ul>\n<li>prior to calling <code>.get()</code> on your map, convert the key using a function</li>\n<li>that function applies a regular expression to the key value itself, turning a string like &quot;abc.unset.xyz&quot; into a string like &quot;abc.*.xyz&quot;</li>\n</ul>\n<p>Here's an example of what that function could look like:</p>\n<pre><code>public static String getUpdatedKey(String key) {\n    return key.replaceAll(&quot;\\\\.[a-z]+\\\\.&quot;, &quot;.*.&quot;);\n}\n</code></pre>\n<p>Here's a simple demo of:</p>\n<ul>\n<li>a map with a literal key &quot;abc.*.xyz&quot;</li>\n<li>caller asking if the long key &quot;abc.unset.xyz&quot; is present (it isn't, print <code>null</code>)</li>\n<li>caller getting the updated key, and asking if that is present (it is, print <code>1</code>)</li>\n</ul>\n<pre><code>Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\nmap.put(&quot;abc.*.xyz&quot;, 1);\n\nString fullKey = &quot;abc.unset.xyz&quot;;\nSystem.out.println(map.get(fullKey));\n\nString updatedKey = getUpdatedKey(fullKey);\nSystem.out.println(map.get(updatedKey));\n</code></pre>\n<p>Running above prints</p>\n<pre><code>null\n1\n</code></pre>\n<p>This example also works if the input key (such as &quot;abc&quot;) doesn't contain the other pattern parts:</p>\n<pre><code>map.put(&quot;abc&quot;, 2);\nSystem.out.println(map.get(getUpdatedKey(&quot;abc&quot;)));\n</code></pre>\n<p>Running above prints <code>2</code>.</p>\n<p>You might need to adjust the regular expression in <code>getUpdatedKey()</code>, but this seems like a workable format to follow.</p>\n"}],"owner":{"account_id":22486235,"reputation":31,"user_id":16684577,"display_name":"johnnesto"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":736,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1656503985,"creation_date":1656471349,"question_id":72795280,"body_markdown":"I have a requirement where I need to find the values from the `HashMap` where few keys are stored in **regex** format. For example, some of the keys are in this format\r\n`&quot;abc.\\*.xyz&quot;`, `&quot;efg.\\*.asc&quot;`.\r\n\r\nHow do I retrieve the value for `&quot;abc.unset.xyz&quot;`?\r\n\r\nPlease note that only few keys are in this format. Others may not have dot delimiter at all, and they may be just a single word like `&quot;abc&quot;`. In short, map&#39;s keyset contains a mix of both. \r\n","title":"Find a Value in a HashMap mapped to a Key formated as a Regex that matches the given String","body":"<p>I have a requirement where I need to find the values from the <code>HashMap</code> where few keys are stored in <strong>regex</strong> format. For example, some of the keys are in this format\n<code>&quot;abc.\\*.xyz&quot;</code>, <code>&quot;efg.\\*.asc&quot;</code>.</p>\n<p>How do I retrieve the value for <code>&quot;abc.unset.xyz&quot;</code>?</p>\n<p>Please note that only few keys are in this format. Others may not have dot delimiter at all, and they may be just a single word like <code>&quot;abc&quot;</code>. In short, map's keyset contains a mix of both.</p>\n"},{"tags":["java","selenium","selenium-webdriver","cucumber"],"comments":[{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1656486199,"post_id":72796623,"comment_id":128581161,"body_markdown":"Read your regexes very carefully","body":"Read your regexes very carefully"}],"answers":[{"tags":[],"owner":{"account_id":22562260,"reputation":51,"user_id":16749757,"display_name":"B&#226;l&#224;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656503937,"creation_date":1656503937,"answer_id":72801066,"question_id":72796623,"body_markdown":"can you please replace and try this when annotation \r\n\r\n`@When(&quot;^User enters (.+) and (.+)$&quot;)\r\n    public void user_enters_and(String username, String password) throws Throwable {\r\n        //your code here\r\n    }` ","title":"How to solve error in BDD Parameterizing?","body":"<p>can you please replace and try this when annotation</p>\n<p><code>@When(&quot;^User enters (.+) and (.+)$&quot;) public void user_enters_and(String username, String password) throws Throwable { //your code here }</code></p>\n"}],"owner":{"account_id":24682121,"reputation":75,"user_id":18575723,"display_name":"Jackie M"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72801066,"answer_count":1,"score":0,"last_activity_date":1656503937,"creation_date":1656483604,"question_id":72796623,"body_markdown":"This is the TestRunner.java: \r\n\r\n    package StepDefinitions; import io.cucumber.junit.Cucumber; import io.cucumber.junit.CucumberOptions;\r\n    \r\n    import org.junit.runner.RunWith;\r\n    \r\n    @RunWith(Cucumber.class) @CucumberOptions(features=&quot;src/test/resources/Features&quot;, glue={&quot;StepDefinitions&quot;}, monochrome=true)\r\n    \r\n    public class TestRunner {\r\n    \r\n    }\r\n\r\nThis is the LoginDemoSteps: \r\n\r\n    package StepDefinitions;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    \r\n    import io.cucumber.java.en.*;\r\n    public class LoginDemoSteps {\r\n    \tWebDriver driver = null;\r\n    \t@Given(&quot;browser is open&quot;)\r\n    \tpublic void browser_is_open() {System.setProperty(&quot;webdriver.chrome.driver&quot;,System.getProperty(&quot;user.dir&quot;)+&quot;\\\\src\\\\test\\\\resources\\\\drivers\\\\chromedriver.exe&quot;);\r\n    \tdriver=new ChromeDriver();\r\n    \tdriver.manage().window().maximize();\r\n\r\n\t}\r\n\r\n\t@And(&quot;user is on login page&quot;)\r\n\tpublic void user_is_on_login_page() {\r\n\t\tdriver.get(&quot;https://example.testproject.io/web/&quot;);\r\n\t\r\n\t}\r\n\r\n\t@When(&quot;^User enters (.*) and (.*) $&quot;)\r\n\tpublic void User_enters_username_and_password(String username, String password) throws InterruptedException {\r\n\t\tdriver.findElement(By.id(&quot;name&quot;)).sendKeys(username);\r\n\t\tdriver.findElement(By.id(&quot;password&quot;)).sendKeys(password);\r\n\t\tThread.sleep(3000);\r\n\r\n\t}\r\n\r\n\t}\r\n\r\n\r\nThis is the feature file: \r\n    \r\n    Feature: Test login functionality\r\n    \r\n      Scenario Outline: Check login is successful with valid credentials\r\n        Given browser is open\r\n        And user is on login page\r\n        When User enters &lt;username&gt; and &lt;password&gt;\r\n\r\n\r\n    Examples: \r\n      | username | password |\r\n      | Sai      |    12345 |\r\n      | Ele      |    12345 |\r\n\r\n\r\n\r\nWhen I run the script, browser is being launched, then site is opening, but credentials\r\nnot getting entered in the login/password entry fields:\r\n\r\n    io.cucumber.junit.UndefinedStepException: The step &#39;User enters Sai and 12345&#39; and 1 other step(s) are undefined.\r\n    You can implement these steps using the snippet(s) below:\r\n    \r\n    @When(&quot;User enters Sai and {int}&quot;)\r\n    public void user_enters_sai_and(Integer int1) {\r\n        // Write code here that turns the phrase above into concrete actions\r\n        throw new io.cucumber.java.PendingException();\r\n    }\r\n\r\n\r\n\r\nHow to solve this BDD Cucumber error? \r\n","title":"How to solve error in BDD Parameterizing?","body":"<p>This is the TestRunner.java:</p>\n<pre><code>package StepDefinitions; import io.cucumber.junit.Cucumber; import io.cucumber.junit.CucumberOptions;\n\nimport org.junit.runner.RunWith;\n\n@RunWith(Cucumber.class) @CucumberOptions(features=&quot;src/test/resources/Features&quot;, glue={&quot;StepDefinitions&quot;}, monochrome=true)\n\npublic class TestRunner {\n\n}\n</code></pre>\n<p>This is the LoginDemoSteps:</p>\n<pre><code>package StepDefinitions;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\nimport io.cucumber.java.en.*;\npublic class LoginDemoSteps {\n    WebDriver driver = null;\n    @Given(&quot;browser is open&quot;)\n    public void browser_is_open() {System.setProperty(&quot;webdriver.chrome.driver&quot;,System.getProperty(&quot;user.dir&quot;)+&quot;\\\\src\\\\test\\\\resources\\\\drivers\\\\chromedriver.exe&quot;);\n    driver=new ChromeDriver();\n    driver.manage().window().maximize();\n\n}\n\n@And(&quot;user is on login page&quot;)\npublic void user_is_on_login_page() {\n    driver.get(&quot;https://example.testproject.io/web/&quot;);\n\n}\n\n@When(&quot;^User enters (.*) and (.*) $&quot;)\npublic void User_enters_username_and_password(String username, String password) throws InterruptedException {\n    driver.findElement(By.id(&quot;name&quot;)).sendKeys(username);\n    driver.findElement(By.id(&quot;password&quot;)).sendKeys(password);\n    Thread.sleep(3000);\n\n}\n\n}\n</code></pre>\n<p>This is the feature file:</p>\n<pre><code>Feature: Test login functionality\n\n  Scenario Outline: Check login is successful with valid credentials\n    Given browser is open\n    And user is on login page\n    When User enters &lt;username&gt; and &lt;password&gt;\n\n\nExamples: \n  | username | password |\n  | Sai      |    12345 |\n  | Ele      |    12345 |\n</code></pre>\n<p>When I run the script, browser is being launched, then site is opening, but credentials\nnot getting entered in the login/password entry fields:</p>\n<pre><code>io.cucumber.junit.UndefinedStepException: The step 'User enters Sai and 12345' and 1 other step(s) are undefined.\nYou can implement these steps using the snippet(s) below:\n\n@When(&quot;User enters Sai and {int}&quot;)\npublic void user_enters_sai_and(Integer int1) {\n    // Write code here that turns the phrase above into concrete actions\n    throw new io.cucumber.java.PendingException();\n}\n</code></pre>\n<p>How to solve this BDD Cucumber error?</p>\n"},{"tags":["java","android","android-emulator","emulation","bluestacks"],"comments":[{"owner":{"account_id":229145,"reputation":2818,"user_id":491897,"accept_rate":91,"display_name":"Ben Siver"},"score":1,"creation_date":1357234618,"post_id":14143896,"comment_id":19587370,"body_markdown":"Have you tried peeking through `android.os.Build`? (http://developer.android.com/reference/android/os/Build.html)","body":"Have you tried peeking through <code>android.os.Build</code>? (<a href=\"http://developer.android.com/reference/android/os/Build.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/os/Build.html</a>)"},{"owner":{"account_id":1812683,"reputation":1845,"user_id":1648423,"accept_rate":80,"display_name":"Taras Leskiv"},"score":0,"creation_date":1357235080,"post_id":14143896,"comment_id":19587624,"body_markdown":"Yes, try checking android.os.Build MODEL, MANUFACTURER, DEVICE, PRODUCT constants at runtime and checking their values, than simply check one of the parameter that works best and is unique at runtime.","body":"Yes, try checking android.os.Build MODEL, MANUFACTURER, DEVICE, PRODUCT constants at runtime and checking their values, than simply check one of the parameter that works best and is unique at runtime."},{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1357235244,"post_id":14143896,"comment_id":19587681,"body_markdown":"Do you have the proper `&lt;uses-feature&gt;` elements to advertise that you require multitouch? Or is BlueStacks ignoring that?","body":"Do you have the proper <code>&lt;uses-feature&gt;</code> elements to advertise that you require multitouch? Or is BlueStacks ignoring that?"},{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1357235296,"post_id":14143896,"comment_id":19587706,"body_markdown":"@Taras: IIRC from a previous question, BlueStacks advertises itself as being a Galaxy Tab or some such, and so those `Build` values may not be as helpful as normal in this case.","body":"@Taras: IIRC from a previous question, BlueStacks advertises itself as being a Galaxy Tab or some such, and so those <code>Build</code> values may not be as helpful as normal in this case."},{"owner":{"account_id":2147129,"reputation":31578,"user_id":1904517,"display_name":"iagreen"},"score":1,"creation_date":1357238332,"post_id":14143896,"comment_id":19589121,"body_markdown":"Does BlueStacks correctly report [FEATURE_TOUCHSCREEN_MULTITOUCH](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_TOUCHSCREEN_MULTITOUCH) from the package manager?  That seems the best way to go because then you gracefully degrade for all non-multitouch devices.","body":"Does BlueStacks correctly report <a href=\"http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_TOUCHSCREEN_MULTITOUCH\" rel=\"nofollow noreferrer\">FEATURE_TOUCHSCREEN_MULTITOUCH</a> from the package manager?  That seems the best way to go because then you gracefully degrade for all non-multitouch devices."},{"owner":{"account_id":111374,"reputation":51666,"user_id":294248,"display_name":"fadden"},"score":0,"creation_date":1422049204,"post_id":14143896,"comment_id":44612542,"body_markdown":"Run `adb shell getprop` and look for anything that stands out.  Emulators often have some unique set of system properties.","body":"Run <code>adb shell getprop</code> and look for anything that stands out.  Emulators often have some unique set of system properties."},{"owner":{"account_id":191467,"reputation":5496,"user_id":432056,"accept_rate":78,"display_name":"jclova"},"score":0,"creation_date":1541628206,"post_id":14143896,"comment_id":93285688,"body_markdown":"https://github.com/framgia/android-emulator-detector","body":"<a href=\"https://github.com/framgia/android-emulator-detector\" rel=\"nofollow noreferrer\">github.com/framgia/android-emulator-detector</a>"}],"answers":[{"tags":[],"owner":{"account_id":3040299,"reputation":94,"user_id":2577516,"display_name":"jacobk"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1422043253,"creation_date":1422043253,"answer_id":28117794,"question_id":14143896,"body_markdown":"My version of BlueStacks is reporting my `Build.Model` as `GT-N7100`.\r\n\r\nUsing: `android.opengl.GLES20.glGetString(android.opengl.GLES20.GL_RENDERER)` I get `Bluestacks`.","title":"Reliable way of detecting whether an Android app is running in &#39;BlueStacks&#39;","body":"<p>My version of BlueStacks is reporting my <code>Build.Model</code> as <code>GT-N7100</code>.</p>\n\n<p>Using: <code>android.opengl.GLES20.glGetString(android.opengl.GLES20.GL_RENDERER)</code> I get <code>Bluestacks</code>.</p>\n"},{"tags":[],"owner":{"account_id":285167,"reputation":3181,"user_id":583683,"accept_rate":93,"display_name":"Regis St-Gelais"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1445868188,"creation_date":1445616042,"answer_id":33306794,"question_id":14143896,"body_markdown":"You can check that the Bluestacks shared folder exist\r\n/sdcard/windows/BstSharedFolder\r\n\r\n    \tBoolean onBlueStacks()\r\n\t\t\t{\r\n\t\t\tFile sharedFolder = new File(Environment\r\n\t\t\t\t\t.getExternalStorageDirectory().toString()\r\n\t\t\t\t\t+ File.separatorChar\r\n\t\t\t\t\t+ &quot;windows&quot;\r\n\t\t\t\t\t+ File.separatorChar\r\n\t\t\t\t\t+ &quot;BstSharedFolder&quot;);\r\n\r\n\t\t\tif (sharedFolder.exists())\r\n\t\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t\t}\r\n","title":"Reliable way of detecting whether an Android app is running in &#39;BlueStacks&#39;","body":"<p>You can check that the Bluestacks shared folder exist\n/sdcard/windows/BstSharedFolder</p>\n\n<pre><code>    Boolean onBlueStacks()\n        {\n        File sharedFolder = new File(Environment\n                .getExternalStorageDirectory().toString()\n                + File.separatorChar\n                + \"windows\"\n                + File.separatorChar\n                + \"BstSharedFolder\");\n\n        if (sharedFolder.exists())\n            {\n            return true;\n            }\n\n        return false;\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4318311,"reputation":269,"user_id":3527444,"display_name":"user3527444"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1463228211,"creation_date":1463228211,"answer_id":37226556,"question_id":14143896,"body_markdown":"\r\nThis Will be unique.\r\n\r\nThere is no bluetooth device in Bluestack.\r\n\r\nSo try to get The Bluetooth Address string which is always &#39;null&#39; on Bluestack or Any emulator.Make sure you are adding Bluetooth permission on your project manifest. \r\n\r\n    BluetoothAdapter m_BluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\r\n\r\n     String m_bluetoothAdd = m_BluetoothAdapter.getAddress();","title":"Reliable way of detecting whether an Android app is running in &#39;BlueStacks&#39;","body":"<p>This Will be unique.</p>\n\n<p>There is no bluetooth device in Bluestack.</p>\n\n<p>So try to get The Bluetooth Address string which is always 'null' on Bluestack or Any emulator.Make sure you are adding Bluetooth permission on your project manifest. </p>\n\n<pre><code>BluetoothAdapter m_BluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\n\n String m_bluetoothAdd = m_BluetoothAdapter.getAddress();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6651349,"reputation":4535,"user_id":7756492,"display_name":"ucMedia"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1656503904,"creation_date":1521793416,"answer_id":49445230,"question_id":14143896,"body_markdown":"It maybe too late but for the sake of others who have the same problem :\r\n\r\n\r\n    public boolean isRunningOnEmulator() {\r\n        return Build.FINGERPRINT.startsWith(&quot;generic&quot;)\r\n            || Build.FINGERPRINT.startsWith(&quot;unknown&quot;)\r\n            || Build.MODEL.contains(&quot;google_sdk&quot;)\r\n            || Build.MODEL.contains(&quot;Emulator&quot;)\r\n            || Build.MODEL.contains(&quot;Android SDK built for x86&quot;)\r\n            || Build.MANUFACTURER.contains(&quot;Genymotion&quot;)\r\n            || (Build.BRAND.startsWith(&quot;generic&quot;) &amp;&amp; Build.DEVICE.startsWith(&quot;generic&quot;))\r\n            || &quot;google_sdk&quot;.equals(Build.PRODUCT)\r\n            || Build.PRODUCT.contains(&quot;vbox86p&quot;)\r\n            || Build.DEVICE.contains(&quot;vbox86p&quot;)\r\n            || Build.HARDWARE.contains(&quot;vbox86&quot;);\r\n    }\r\n\r\n","title":"Reliable way of detecting whether an Android app is running in &#39;BlueStacks&#39;","body":"<p>It maybe too late but for the sake of others who have the same problem :</p>\n<pre><code>public boolean isRunningOnEmulator() {\n    return Build.FINGERPRINT.startsWith(&quot;generic&quot;)\n        || Build.FINGERPRINT.startsWith(&quot;unknown&quot;)\n        || Build.MODEL.contains(&quot;google_sdk&quot;)\n        || Build.MODEL.contains(&quot;Emulator&quot;)\n        || Build.MODEL.contains(&quot;Android SDK built for x86&quot;)\n        || Build.MANUFACTURER.contains(&quot;Genymotion&quot;)\n        || (Build.BRAND.startsWith(&quot;generic&quot;) &amp;&amp; Build.DEVICE.startsWith(&quot;generic&quot;))\n        || &quot;google_sdk&quot;.equals(Build.PRODUCT)\n        || Build.PRODUCT.contains(&quot;vbox86p&quot;)\n        || Build.DEVICE.contains(&quot;vbox86p&quot;)\n        || Build.HARDWARE.contains(&quot;vbox86&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":361327,"reputation":12478,"user_id":703851,"accept_rate":100,"display_name":"Vaibhav Jani"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1535116773,"creation_date":1535108622,"answer_id":52003087,"question_id":14143896,"body_markdown":"After trying all the suggested solutions available online we found the [Google&#39;s SafetyNet Attestation API][1] is the only solution for detecting VMs like BlueStack(any version) and NoxPlayer.\r\n\r\nApps that care about content piracy (and other security issues) can filter their availability on the Google Play like [Netflix filters devices on the PlayStore][2].\r\n\r\n&gt; The new device catalog section of the console includes an option\r\n&gt; called SafetyNet exclusion, which can be used to prevent devices\r\n&gt; that fail integrity tests or those that are uncertified by Google,\r\n&gt; from downloading a specific app: among these would be rooted devices\r\n&gt; and those running custom ROMs.\r\n\r\nBut there is a catch user will still find the APK from cross-sharing or other distribution systems, so the client must implement `SafetyNet Attestation API` on the app level.\r\n\r\n*How does it work?* \r\n\r\n&gt; SafetyNet examines software and hardware information on the device\r\n&gt; where your app is installed to create a profile of that device. The\r\n&gt; service then attempts to find this same profile within a list of\r\n&gt; device models that have passed Android compatibility testing. The API\r\n&gt; also uses this software and hardware information to help you assess\r\n&gt; the basic integrity of the device, as well as the APK information of\r\n&gt; the calling app. This attestation helps you to determine whether or\r\n&gt; not the particular device has been tampered with or otherwise\r\n&gt; modified.\r\n\r\nIt&#39;s an (easy to implement) paid API from the Google which allows 10,000 free hits per day as of now :\\\r\n\r\nIf anyone is interested in detecting VMs by them self, these are the good papers available suggesting heuristic approaches :\r\n\r\n[Evading Android Runtime Analysis via Sandbox Detection][3]\r\n\r\n[Rage Against the Virtual Machine:\r\nHindering Dynamic Analysis of Android Malware][4]\r\n\r\n\r\n  [1]: https://developer.android.com/training/safetynet/attestation\r\n  [2]: https://www.androidauthority.com/google-play-store-apps-download-block-root-users-773824/\r\n  [3]: https://users.ece.cmu.edu/~tvidas/papers/ASIACCS14.pdf\r\n  [4]: http://www.syssec-project.eu/m/page-media/3/petsas_rage_against_the_virtual_machine.pdf","title":"Reliable way of detecting whether an Android app is running in &#39;BlueStacks&#39;","body":"<p>After trying all the suggested solutions available online we found the <a href=\"https://developer.android.com/training/safetynet/attestation\" rel=\"nofollow noreferrer\">Google's SafetyNet Attestation API</a> is the only solution for detecting VMs like BlueStack(any version) and NoxPlayer.</p>\n\n<p>Apps that care about content piracy (and other security issues) can filter their availability on the Google Play like <a href=\"https://www.androidauthority.com/google-play-store-apps-download-block-root-users-773824/\" rel=\"nofollow noreferrer\">Netflix filters devices on the PlayStore</a>.</p>\n\n<blockquote>\n  <p>The new device catalog section of the console includes an option\n  called SafetyNet exclusion, which can be used to prevent devices\n  that fail integrity tests or those that are uncertified by Google,\n  from downloading a specific app: among these would be rooted devices\n  and those running custom ROMs.</p>\n</blockquote>\n\n<p>But there is a catch user will still find the APK from cross-sharing or other distribution systems, so the client must implement <code>SafetyNet Attestation API</code> on the app level.</p>\n\n<p><em>How does it work?</em> </p>\n\n<blockquote>\n  <p>SafetyNet examines software and hardware information on the device\n  where your app is installed to create a profile of that device. The\n  service then attempts to find this same profile within a list of\n  device models that have passed Android compatibility testing. The API\n  also uses this software and hardware information to help you assess\n  the basic integrity of the device, as well as the APK information of\n  the calling app. This attestation helps you to determine whether or\n  not the particular device has been tampered with or otherwise\n  modified.</p>\n</blockquote>\n\n<p>It's an (easy to implement) paid API from the Google which allows 10,000 free hits per day as of now :\\</p>\n\n<p>If anyone is interested in detecting VMs by them self, these are the good papers available suggesting heuristic approaches :</p>\n\n<p><a href=\"https://users.ece.cmu.edu/~tvidas/papers/ASIACCS14.pdf\" rel=\"nofollow noreferrer\">Evading Android Runtime Analysis via Sandbox Detection</a></p>\n\n<p><a href=\"http://www.syssec-project.eu/m/page-media/3/petsas_rage_against_the_virtual_machine.pdf\" rel=\"nofollow noreferrer\">Rage Against the Virtual Machine:\nHindering Dynamic Analysis of Android Malware</a></p>\n"},{"tags":[],"owner":{"account_id":3756312,"reputation":123,"user_id":3287538,"accept_rate":58,"display_name":"Smee"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1548767944,"creation_date":1548767944,"answer_id":54421999,"question_id":14143896,"body_markdown":"Based on Mr. [Regis&#39;][1] answer, you can detect it when the shared folder is present. However in Bluestacks 4, using `file.exists()` will only return false. This is because the shared folder has no permissions (`000` or `----------`). But listing files in the directory will detect the folder.\r\n\r\n    String path = Environment.getExternalStorageDirectory().toString();\r\n    Log.d(&quot;FILES&quot;, &quot;Path: &quot; + path);\r\n    File directory = new File(path);\r\n    File[] files = directory.listFiles();\r\n    for (File file : files) {\r\n        if (file.getName().contains(&quot;windows&quot;)) {\r\n            Log.d(&quot;FILES&quot;, &quot;windows file exists, it&#39;s a bluestacks emu&quot;);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/33306794/3287538","title":"Reliable way of detecting whether an Android app is running in &#39;BlueStacks&#39;","body":"<p>Based on Mr. <a href=\"https://stackoverflow.com/a/33306794/3287538\">Regis'</a> answer, you can detect it when the shared folder is present. However in Bluestacks 4, using <code>file.exists()</code> will only return false. This is because the shared folder has no permissions (<code>000</code> or <code>----------</code>). But listing files in the directory will detect the folder.</p>\n\n<pre><code>String path = Environment.getExternalStorageDirectory().toString();\nLog.d(\"FILES\", \"Path: \" + path);\nFile directory = new File(path);\nFile[] files = directory.listFiles();\nfor (File file : files) {\n    if (file.getName().contains(\"windows\")) {\n        Log.d(\"FILES\", \"windows file exists, it's a bluestacks emu\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6980449,"reputation":2835,"user_id":5353589,"display_name":"Weidian Huang"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1641887543,"creation_date":1641519899,"answer_id":70615681,"question_id":14143896,"body_markdown":"All the above methods are not working on BlueStacks 5. The correct way to do is checking if the path of `/mnt/windows/BstSharedFolder` exists. It is working fine on both BlueStacks 4 and 5. \r\n\r\n```\r\n   fun checkFilesExist(files: Array&lt;String&gt;): Boolean {\r\n        files.forEach {\r\n            val file = File(it)\r\n            if (file.exists()) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n    \r\n    fun isBlueStacks(): Boolean {\r\n        val BLUE_STACKS_FILES = arrayOf(\r\n            &quot;/mnt/windows/BstSharedFolder&quot;\r\n        )\r\n        return checkFilesExist(BLUE_STACKS_FILES)\r\n    }\r\n\r\n```","title":"Reliable way of detecting whether an Android app is running in &#39;BlueStacks&#39;","body":"<p>All the above methods are not working on BlueStacks 5. The correct way to do is checking if the path of <code>/mnt/windows/BstSharedFolder</code> exists. It is working fine on both BlueStacks 4 and 5.</p>\n<pre><code>   fun checkFilesExist(files: Array&lt;String&gt;): Boolean {\n        files.forEach {\n            val file = File(it)\n            if (file.exists()) {\n                return true\n            }\n        }\n        return false\n    }\n    \n    fun isBlueStacks(): Boolean {\n        val BLUE_STACKS_FILES = arrayOf(\n            &quot;/mnt/windows/BstSharedFolder&quot;\n        )\n        return checkFilesExist(BLUE_STACKS_FILES)\n    }\n\n</code></pre>\n"}],"owner":{"account_id":2017350,"reputation":1410,"user_id":1804325,"accept_rate":80,"display_name":"Twice Circled"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11745,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":70615681,"answer_count":7,"score":17,"last_activity_date":1656503904,"creation_date":1357233654,"question_id":14143896,"body_markdown":"I would like to ascertain at run-time inside an Android app whether it is running within the [BlueStacks](http://bluestacks.com/) Android emulator. This is so I can modify the way the app runs when running inside BlueStacks.\r\n\r\nBlueStacks does not support multi-touch so I want to implement an alternative to the standard pinch-to-zoom functionality my current app has.\r\n\r\nE.g.\r\n\r\n    If (appIsRunningInBlueStacks){\r\n        mySurfaceView.enableMultiTouchAlternatives();\r\n    } else{\r\n        mySurfaceView.enableMultiTouchFeatures();\r\n    }\r\n\r\nWhat is a reliable way of ascertaining the value of appIsRunningInBlueStacks?\r\n\r\n**EDIT Summary of answers to comments on question:**\r\n\r\nBen, Taras, thanks for the suggestions. The Build.MODEL etc. values for BlueStacks are:\r\n\r\n- Model: &quot;GT-I9100&quot;\r\n\r\n- Manufacturer: &quot;samsung&quot;\r\n\r\n- Device: &quot;GT-I9100&quot;\r\n\r\n- Product: &quot;GT-I9100&quot;\r\n\r\nThis is the same model number as the Samsung Galaxy SII so it would not be ideal to use this for fear of treating all users with SIIs the same as those on BlueStacks.\r\n\r\nCommonsWare, the app continues to run in BlueStacks even with the &lt; uses-feature&gt; for multitouch in the manifest. In fact (also answering iagreen&#39;s question)...\r\n\r\n    packageManager.hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH_DISTINCT);\r\n\r\n... returns true! This is to be expected I suppose as the emulator is convinced it is a Samsung Galaxy SII!\r\n\r\nTherefore we are still without a way of reliably detecting whether an app is running on BlueStacks without also throwing all Samsung Galaxy SII users in the same bucket. Any other ideas?\r\n    ","title":"Reliable way of detecting whether an Android app is running in &#39;BlueStacks&#39;","body":"<p>I would like to ascertain at run-time inside an Android app whether it is running within the <a href=\"http://bluestacks.com/\" rel=\"noreferrer\">BlueStacks</a> Android emulator. This is so I can modify the way the app runs when running inside BlueStacks.</p>\n\n<p>BlueStacks does not support multi-touch so I want to implement an alternative to the standard pinch-to-zoom functionality my current app has.</p>\n\n<p>E.g.</p>\n\n<pre><code>If (appIsRunningInBlueStacks){\n    mySurfaceView.enableMultiTouchAlternatives();\n} else{\n    mySurfaceView.enableMultiTouchFeatures();\n}\n</code></pre>\n\n<p>What is a reliable way of ascertaining the value of appIsRunningInBlueStacks?</p>\n\n<p><strong>EDIT Summary of answers to comments on question:</strong></p>\n\n<p>Ben, Taras, thanks for the suggestions. The Build.MODEL etc. values for BlueStacks are:</p>\n\n<ul>\n<li><p>Model: \"GT-I9100\"</p></li>\n<li><p>Manufacturer: \"samsung\"</p></li>\n<li><p>Device: \"GT-I9100\"</p></li>\n<li><p>Product: \"GT-I9100\"</p></li>\n</ul>\n\n<p>This is the same model number as the Samsung Galaxy SII so it would not be ideal to use this for fear of treating all users with SIIs the same as those on BlueStacks.</p>\n\n<p>CommonsWare, the app continues to run in BlueStacks even with the &lt; uses-feature> for multitouch in the manifest. In fact (also answering iagreen's question)...</p>\n\n<pre><code>packageManager.hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH_DISTINCT);\n</code></pre>\n\n<p>... returns true! This is to be expected I suppose as the emulator is convinced it is a Samsung Galaxy SII!</p>\n\n<p>Therefore we are still without a way of reliably detecting whether an app is running on BlueStacks without also throwing all Samsung Galaxy SII users in the same bucket. Any other ideas?</p>\n"},{"tags":["java","google-sheets","google-cloud-platform"],"comments":[{"owner":{"account_id":12329796,"reputation":1924,"user_id":8996211,"display_name":"Kessy"},"score":1,"creation_date":1656510688,"post_id":72801004,"comment_id":128590888,"body_markdown":"Have you checked on the OAuth 2.0 Java for [Service accounts](https://developers.google.com/api-client-library/java/google-api-java-client/oauth2#service_accounts)?","body":"Have you checked on the OAuth 2.0 Java for <a href=\"https://developers.google.com/api-client-library/java/google-api-java-client/oauth2#service_accounts\" rel=\"nofollow noreferrer\">Service accounts</a>?"},{"owner":{"account_id":234688,"reputation":1366,"user_id":501004,"accept_rate":56,"display_name":"Piyush Soni"},"score":0,"creation_date":1656518599,"post_id":72801004,"comment_id":128594422,"body_markdown":"Yes, I did after seeing similar messages on several webpages (even though as I wrote it uses the deprecated GoogleCredential class), but even that gave a huge callstack of error (starting with &quot;Exception in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target&quot;)","body":"Yes, I did after seeing similar messages on several webpages (even though as I wrote it uses the deprecated GoogleCredential class), but even that gave a huge callstack of error (starting with &quot;Exception in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target&quot;)"},{"owner":{"account_id":301516,"reputation":34141,"user_id":609290,"accept_rate":62,"display_name":"DazWilkin"},"score":0,"creation_date":1656523220,"post_id":72801004,"comment_id":128596083,"body_markdown":"Unless you&#39;re using [Google Workspace Domain-wide Delegation of Authority](https://developers.google.com/admin-sdk/directory/v1/guides/delegation), you **cannot** use a Service Account to access Google Sheets because Sheets provides access to user data. Google requires that services accessing user data must use user credentials via an OAuth2 client **or** use the aforementioned DWDoA","body":"Unless you&#39;re using <a href=\"https://developers.google.com/admin-sdk/directory/v1/guides/delegation\" rel=\"nofollow noreferrer\">Google Workspace Domain-wide Delegation of Authority</a>, you <b>cannot</b> use a Service Account to access Google Sheets because Sheets provides access to user data. Google requires that services accessing user data must use user credentials via an OAuth2 client <b>or</b> use the aforementioned DWDoA"},{"owner":{"account_id":234688,"reputation":1366,"user_id":501004,"accept_rate":56,"display_name":"Piyush Soni"},"score":0,"creation_date":1656581612,"post_id":72801004,"comment_id":128610087,"body_markdown":"@DazWilkin I&#39;m not accessing any user data, the service account will just read and write data in a single spreadsheet, to which &#39;Edit&#39; access has been given to it. So I don&#39;t know if Domain wide delegation should be required. Can someone please confirm if I still need it?","body":"@DazWilkin I&#39;m not accessing any user data, the service account will just read and write data in a single spreadsheet, to which &#39;Edit&#39; access has been given to it. So I don&#39;t know if Domain wide delegation should be required. Can someone please confirm if I still need it?"},{"owner":{"account_id":12329796,"reputation":1924,"user_id":8996211,"display_name":"Kessy"},"score":0,"creation_date":1657092407,"post_id":72801004,"comment_id":128724252,"body_markdown":"Can you share the code used and the error when you used the [Service accounts](https://developers.google.com/api-client-library/java/google-api-java-client/oauth2#service_accounts)?","body":"Can you share the code used and the error when you used the <a href=\"https://developers.google.com/api-client-library/java/google-api-java-client/oauth2#service_accounts\" rel=\"nofollow noreferrer\">Service accounts</a>?"},{"owner":{"account_id":234688,"reputation":1366,"user_id":501004,"accept_rate":56,"display_name":"Piyush Soni"},"score":0,"creation_date":1657130052,"post_id":72801004,"comment_id":128739253,"body_markdown":"@Kessy : Both are given in the description. I used the exact same code as given in Google&#39;s quick start guide for accessing sheets through Java.","body":"@Kessy : Both are given in the description. I used the exact same code as given in Google&#39;s quick start guide for accessing sheets through Java."},{"owner":{"account_id":12329796,"reputation":1924,"user_id":8996211,"display_name":"Kessy"},"score":0,"creation_date":1657192414,"post_id":72801004,"comment_id":128754820,"body_markdown":"Have you tested the code shared on the first comment [OAuth 2.0 Java for Service accounts](https://developers.google.com/api-client-library/java/google-api-java-client/oauth2#service_accounts) in your script and also, have you checked the answer on [How do you access a Google Sheet with a service account from Java?](https://stackoverflow.com/questions/64135720/how-do-you-access-a-google-sheet-with-a-service-account-from-java)?","body":"Have you tested the code shared on the first comment <a href=\"https://developers.google.com/api-client-library/java/google-api-java-client/oauth2#service_accounts\" rel=\"nofollow noreferrer\">OAuth 2.0 Java for Service accounts</a> in your script and also, have you checked the answer on <a href=\"https://stackoverflow.com/questions/64135720/how-do-you-access-a-google-sheet-with-a-service-account-from-java\">How do you access a Google Sheet with a service account from Java?</a>?"}],"owner":{"account_id":234688,"reputation":1366,"user_id":501004,"accept_rate":56,"display_name":"Piyush Soni"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":879,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1656503690,"creation_date":1656503690,"question_id":72801004,"body_markdown":"I started with the Google Quick Start guide for Java for connecting to Google Sheets via their API ([https://developers.google.com/sheets/api/quickstart/java][1]). I am following their quick start tutorial as it is without any changes. However, instead of creating an OAuth client ID and downloading that JSON credentials file, I created a Service Account (because that&#39;s what it&#39;s going to be). However, the downloaded service account JSON file does not work with Google&#39;s Quick Start code : \r\n\r\n    import com.google.api.client.auth.oauth2.Credential;\r\n    import com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\r\n    import com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\r\n    import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\r\n    import com.google.api.client.http.javanet.NetHttpTransport;\r\n    import com.google.api.client.json.JsonFactory;\r\n    import com.google.api.client.json.gson.GsonFactory;\r\n    import com.google.api.client.util.store.FileDataStoreFactory;\r\n    import com.google.api.services.sheets.v4.Sheets;\r\n    import com.google.api.services.sheets.v4.SheetsScopes;\r\n    import com.google.api.services.sheets.v4.model.ValueRange;\r\n    \r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.security.GeneralSecurityException;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    public class SheetsQuickstart {\r\n        private static final String APPLICATION_NAME = &quot;Google Sheets API Java Quickstart&quot;;\r\n        private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\r\n        private static final String TOKENS_DIRECTORY_PATH = &quot;tokens&quot;;\r\n    \r\n        /**\r\n         * Global instance of the scopes required by this quickstart.\r\n         * If modifying these scopes, delete your previously saved tokens/ folder.\r\n         */\r\n        private static final List&lt;String&gt; SCOPES = Collections.singletonList(SheetsScopes.SPREADSHEETS_READONLY);\r\n        private static final String CREDENTIALS_FILE_PATH = &quot;/credentials.json&quot;;\r\n    \r\n        /**\r\n         * Creates an authorized Credential object.\r\n         * @param HTTP_TRANSPORT The network HTTP Transport.\r\n         * @return An authorized Credential object.\r\n         * @throws IOException If the credentials.json file cannot be found.\r\n         */\r\n        private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT) throws IOException {\r\n            // Load client secrets.\r\n            InputStream in = SheetsQuickstart.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\r\n            if (in == null) {\r\n                throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\r\n            }\r\n            GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\r\n    \r\n            // Build flow and trigger user authorization request.\r\n            GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\r\n                    HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\r\n                    .setDataStoreFactory(new FileDataStoreFactory(new java.io.File(TOKENS_DIRECTORY_PATH)))\r\n                    .setAccessType(&quot;offline&quot;)\r\n                    .build();\r\n            LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\r\n            return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\r\n        }\r\n    \r\n        /**\r\n         * Prints the names and majors of students in a sample spreadsheet:\r\n         * https://docs.google.com/spreadsheets/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms/edit\r\n         */\r\n        public static void main(String... args) throws IOException, GeneralSecurityException {\r\n            // Build a new authorized API client service.\r\n            final NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\r\n            final String spreadsheetId = &quot;1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms&quot;;\r\n            final String range = &quot;Class Data!A2:E&quot;;\r\n            Sheets service = new Sheets.Builder(HTTP_TRANSPORT, JSON_FACTORY, getCredentials(HTTP_TRANSPORT))\r\n                    .setApplicationName(APPLICATION_NAME)\r\n                    .build();\r\n            ValueRange response = service.spreadsheets().values()\r\n                    .get(spreadsheetId, range)\r\n                    .execute();\r\n            List&lt;List&lt;Object&gt;&gt; values = response.getValues();\r\n            if (values == null || values.isEmpty()) {\r\n                System.out.println(&quot;No data found.&quot;);\r\n            } else {\r\n                System.out.println(&quot;Name, Major&quot;);\r\n                for (List row : values) {\r\n                    // Print columns A and E, which correspond to indices 0 and 4.\r\n                    System.out.printf(&quot;%s, %s\\n&quot;, row.get(0), row.get(4));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n and it gives this exception: \r\n\r\n&gt; Task :run FAILED\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException\r\n        at com.google.common.base.Preconditions.checkArgument(Preconditions.java:131)\r\n        at com.google.api.client.util.Preconditions.checkArgument(Preconditions.java:35)\r\n        at com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets.getDetails(GoogleClientSecrets.java:80)\r\n        at com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow$Builder.&lt;init&gt;(GoogleAuthorizationCodeFlow.java:211)\r\n        at SheetsQuickstart.getCredentials(SheetsQuickstart.java:50)\r\n        at SheetsQuickstart.main(SheetsQuickstart.java:68)\r\n\r\n\r\nI have already given &#39;Edit&#39; access to the service account email id given in the json file to my Google spreadsheet, but it still gives the same error (in fact I tried changing my file permissions to &#39;anyone with link&#39; can edit, and have used the same google spreadsheet ID in the code). Some webpages suggested a deprecated `GoogleCredential` based solution. Is there a non-deprecated solution to the problem? \r\n\r\n  [1]: https://developers.google.com/sheets/api/quickstart/java","title":"Authenticate with a Service Account for Google Sheets API with Java","body":"<p>I started with the Google Quick Start guide for Java for connecting to Google Sheets via their API (<a href=\"https://developers.google.com/sheets/api/quickstart/java\" rel=\"nofollow noreferrer\">https://developers.google.com/sheets/api/quickstart/java</a>). I am following their quick start tutorial as it is without any changes. However, instead of creating an OAuth client ID and downloading that JSON credentials file, I created a Service Account (because that's what it's going to be). However, the downloaded service account JSON file does not work with Google's Quick Start code :</p>\n<pre><code>import com.google.api.client.auth.oauth2.Credential;\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\nimport com.google.api.client.http.javanet.NetHttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.gson.GsonFactory;\nimport com.google.api.client.util.store.FileDataStoreFactory;\nimport com.google.api.services.sheets.v4.Sheets;\nimport com.google.api.services.sheets.v4.SheetsScopes;\nimport com.google.api.services.sheets.v4.model.ValueRange;\n\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.security.GeneralSecurityException;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class SheetsQuickstart {\n    private static final String APPLICATION_NAME = &quot;Google Sheets API Java Quickstart&quot;;\n    private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\n    private static final String TOKENS_DIRECTORY_PATH = &quot;tokens&quot;;\n\n    /**\n     * Global instance of the scopes required by this quickstart.\n     * If modifying these scopes, delete your previously saved tokens/ folder.\n     */\n    private static final List&lt;String&gt; SCOPES = Collections.singletonList(SheetsScopes.SPREADSHEETS_READONLY);\n    private static final String CREDENTIALS_FILE_PATH = &quot;/credentials.json&quot;;\n\n    /**\n     * Creates an authorized Credential object.\n     * @param HTTP_TRANSPORT The network HTTP Transport.\n     * @return An authorized Credential object.\n     * @throws IOException If the credentials.json file cannot be found.\n     */\n    private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT) throws IOException {\n        // Load client secrets.\n        InputStream in = SheetsQuickstart.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\n        if (in == null) {\n            throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\n        }\n        GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\n\n        // Build flow and trigger user authorization request.\n        GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n                HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\n                .setDataStoreFactory(new FileDataStoreFactory(new java.io.File(TOKENS_DIRECTORY_PATH)))\n                .setAccessType(&quot;offline&quot;)\n                .build();\n        LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\n        return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\n    }\n\n    /**\n     * Prints the names and majors of students in a sample spreadsheet:\n     * https://docs.google.com/spreadsheets/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms/edit\n     */\n    public static void main(String... args) throws IOException, GeneralSecurityException {\n        // Build a new authorized API client service.\n        final NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\n        final String spreadsheetId = &quot;1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms&quot;;\n        final String range = &quot;Class Data!A2:E&quot;;\n        Sheets service = new Sheets.Builder(HTTP_TRANSPORT, JSON_FACTORY, getCredentials(HTTP_TRANSPORT))\n                .setApplicationName(APPLICATION_NAME)\n                .build();\n        ValueRange response = service.spreadsheets().values()\n                .get(spreadsheetId, range)\n                .execute();\n        List&lt;List&lt;Object&gt;&gt; values = response.getValues();\n        if (values == null || values.isEmpty()) {\n            System.out.println(&quot;No data found.&quot;);\n        } else {\n            System.out.println(&quot;Name, Major&quot;);\n            for (List row : values) {\n                // Print columns A and E, which correspond to indices 0 and 4.\n                System.out.printf(&quot;%s, %s\\n&quot;, row.get(0), row.get(4));\n            }\n        }\n    }\n}\n</code></pre>\n<p>and it gives this exception:</p>\n<blockquote>\n<p>Task :run FAILED\nException in thread &quot;main&quot; java.lang.IllegalArgumentException\nat com.google.common.base.Preconditions.checkArgument(Preconditions.java:131)\nat com.google.api.client.util.Preconditions.checkArgument(Preconditions.java:35)\nat com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets.getDetails(GoogleClientSecrets.java:80)\nat com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow$Builder.(GoogleAuthorizationCodeFlow.java:211)\nat SheetsQuickstart.getCredentials(SheetsQuickstart.java:50)\nat SheetsQuickstart.main(SheetsQuickstart.java:68)</p>\n</blockquote>\n<p>I have already given 'Edit' access to the service account email id given in the json file to my Google spreadsheet, but it still gives the same error (in fact I tried changing my file permissions to 'anyone with link' can edit, and have used the same google spreadsheet ID in the code). Some webpages suggested a deprecated <code>GoogleCredential</code> based solution. Is there a non-deprecated solution to the problem?</p>\n"},{"tags":["java","jquery","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":11434593,"reputation":58,"user_id":8382388,"display_name":"Akhil Korissery"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656485600,"creation_date":1656485600,"answer_id":72796963,"question_id":72796591,"body_markdown":"Create two different entity classes for each table and define a relation accordingly.","title":"How to create Entity class for fetching data from two diff Tables?","body":"<p>Create two different entity classes for each table and define a relation accordingly.</p>\n"}],"owner":{"account_id":25544072,"reputation":1,"user_id":19329682,"display_name":"Rooban k"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1656503637,"creation_date":1656483420,"question_id":72796591,"body_markdown":"```sql\r\nselect * from city join countrylanguage on  \r\ncity.CountryCode=countrylanguage.CountryCode  \r\norder by city.ID;\r\n```\r\n[![enter image description here][1]][1]\r\n\r\nHere are my query and responce how to create entity for those to tables and repository also\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tFATL.png","title":"How to create Entity class for fetching data from two diff Tables?","body":"<pre class=\"lang-sql prettyprint-override\"><code>select * from city join countrylanguage on  \ncity.CountryCode=countrylanguage.CountryCode  \norder by city.ID;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/tFATL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tFATL.png\" alt=\"enter image description here\" /></a></p>\n<p>Here are my query and responce how to create entity for those to tables and repository also</p>\n"},{"tags":["java","linux","url"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1656501970,"post_id":72800500,"comment_id":128587213,"body_markdown":"Do `generateInteractiveUrl(httpHandler.getPort())` in advance and check that it passes before `b.browse`. Maybe it is something with threads, or missing invokeLater.","body":"Do <code>generateInteractiveUrl(httpHandler.getPort())</code> in advance and check that it passes before <code>b.browse</code>. Maybe it is something with threads, or missing invokeLater."},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656502273,"post_id":72800500,"comment_id":128587327,"body_markdown":"If its a code problem, then it is in `generateInteractiveUrl(httpHandler.getPort())`.","body":"If its a code problem, then it is in <code>generateInteractiveUrl(httpHandler.getPort())</code>."},{"owner":{"account_id":25680085,"reputation":31,"user_id":19443004,"display_name":"Envel"},"score":0,"creation_date":1656502985,"post_id":72800500,"comment_id":128587631,"body_markdown":"If I open the same ```stackoverflow.com``` , the problem persists. This is not related to ```generateInteractiveUrl(HttpHandler.getPort())```","body":"If I open the same <code>stackoverflow.com</code> , the problem persists. This is not related to <code>generateInteractiveUrl(HttpHandler.getPort())</code>"},{"owner":{"account_id":13022813,"reputation":722,"user_id":9411636,"display_name":"Kaneda"},"score":0,"creation_date":1656504547,"post_id":72800500,"comment_id":128588218,"body_markdown":"What is your default browser?","body":"What is your default browser?"},{"owner":{"account_id":25680085,"reputation":31,"user_id":19443004,"display_name":"Envel"},"score":0,"creation_date":1656509895,"post_id":72800500,"comment_id":128590540,"body_markdown":"Firefox, Chromuim same","body":"Firefox, Chromuim same"},{"owner":{"account_id":299745,"reputation":739,"user_id":606513,"accept_rate":74,"display_name":"schneida"},"score":0,"creation_date":1682679095,"post_id":72800500,"comment_id":134257211,"body_markdown":"I have the same issue on Alma Linux 9.1 - very annyoing!","body":"I have the same issue on Alma Linux 9.1 - very annyoing!"}],"owner":{"account_id":25680085,"reputation":31,"user_id":19443004,"display_name":"Envel"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1656503632,"creation_date":1656501519,"question_id":72800500,"body_markdown":"Linux Fedora 36, GNOME 42.2, Wayland (Xorg same), Java 8 (Java 17 same)\r\n\r\nAfter executing the URL opening code, the URL does not open. After closing the Java program, the URL opens on its own. \r\n\r\nI have tried several browser open implementations, but the result is the same. I would like to know how this is solved and I&#39;m not sure if this is a code problem and not Fedora.\r\n\r\n```\r\nDesktop d = Desktop.getDesktop();\r\nd.browse(generateInteractiveUrl(httpHandler.getPort()));\r\n```\r\n\r\nor\r\n\r\n```\r\nDesktop d = Desktop.getDesktop();\r\n\r\nURI readyUrl = generateInteractiveUrl(httpHandler.getPort());\r\n\r\nlog.info(&quot;Microsoft auth URL: &quot; + readyUrl); // returns the correct URL\r\n\r\nd.browse(readyUrl); // opens only after closing the program _o\r\n```","title":"Linux opens the URL after closing the java program","body":"<p>Linux Fedora 36, GNOME 42.2, Wayland (Xorg same), Java 8 (Java 17 same)</p>\n<p>After executing the URL opening code, the URL does not open. After closing the Java program, the URL opens on its own.</p>\n<p>I have tried several browser open implementations, but the result is the same. I would like to know how this is solved and I'm not sure if this is a code problem and not Fedora.</p>\n<pre><code>Desktop d = Desktop.getDesktop();\nd.browse(generateInteractiveUrl(httpHandler.getPort()));\n</code></pre>\n<p>or</p>\n<pre><code>Desktop d = Desktop.getDesktop();\n\nURI readyUrl = generateInteractiveUrl(httpHandler.getPort());\n\nlog.info(&quot;Microsoft auth URL: &quot; + readyUrl); // returns the correct URL\n\nd.browse(readyUrl); // opens only after closing the program _o\n</code></pre>\n"},{"tags":["java","glassfish","ssl-certificate","keytool"],"answers":[{"tags":[],"owner":{"account_id":130300,"reputation":5846,"user_id":329467,"display_name":"jkasnicki"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1390314357,"creation_date":1390314357,"answer_id":21260844,"question_id":17543101,"body_markdown":"Use -----END CERTIFICATE----- instead of ----END CERTIFICATE-----\r\n\r\nJava 7 requies the 5 leading -, java 6 likely did not. See source http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/security/provider/X509Factory.java","title":"java.io.IOException: Illegal footer when importing certificate using keytool","body":"<p>Use -----END CERTIFICATE----- instead of ----END CERTIFICATE-----</p>\n\n<p>Java 7 requies the 5 leading -, java 6 likely did not. See source <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/security/provider/X509Factory.java\" rel=\"nofollow\">http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/security/provider/X509Factory.java</a></p>\n"},{"tags":[],"owner":{"account_id":62173,"reputation":8994,"user_id":1097104,"accept_rate":100,"display_name":"Juuso Ohtonen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656503496,"creation_date":1656503496,"answer_id":72800966,"question_id":17543101,"body_markdown":"My problem was the line break characters. Check if line feeds (LF) are required instead of carriage return (CR) or vice versa.\r\n\r\nI had to convert CR to LF:\r\n`sed -e &#39;s|^M|\\n|g&#39; test_cr.pem &gt; test_lf.pem`","title":"java.io.IOException: Illegal footer when importing certificate using keytool","body":"<p>My problem was the line break characters. Check if line feeds (LF) are required instead of carriage return (CR) or vice versa.</p>\n<p>I had to convert CR to LF:\n<code>sed -e 's|^M|\\n|g' test_cr.pem &gt; test_lf.pem</code></p>\n"}],"owner":{"account_id":330259,"reputation":5603,"user_id":654269,"accept_rate":93,"display_name":"Majid Azimi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5351,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":21260844,"answer_count":2,"score":1,"last_activity_date":1656503496,"creation_date":1373357188,"question_id":17543101,"body_markdown":"When I try to import my certificate to key store using `keytool` it shows me:\r\n\r\n    keytool error: java.security.cert.CertificateException: java.io.IOException: Illegal footer: ----END CERTIFICATE-----\r\n    java.security.cert.CertificateException: java.io.IOException: Illegal footer: ----END CERTIFICATE-----\r\n            at sun.security.provider.X509Factory.engineGenerateCertificates(X509Factory.java:337)\r\n            at java.security.cert.CertificateFactory.generateCertificates(CertificateFactory.java:462)\r\n            at sun.security.tools.KeyTool.installReply(KeyTool.java:2571)\r\n            at sun.security.tools.KeyTool.doCommands(KeyTool.java:998)\r\n            at sun.security.tools.KeyTool.run(KeyTool.java:340)\r\n            at sun.security.tools.KeyTool.main(KeyTool.java:333)\r\n    Caused by: java.io.IOException: Illegal footer: ----END CERTIFICATE-----\r\n            at sun.security.provider.X509Factory.checkHeaderFooter(X509Factory.java:590)\r\n            at sun.security.provider.X509Factory.readOneBlock(X509Factory.java:575)\r\n            at sun.security.provider.X509Factory.parseX509orPKCS7Cert(X509Factory.java:413)\r\n            at sun.security.provider.X509Factory.engineGenerateCertificates(X509Factory.java:335)\r\n            ... 5 more\r\nI have successfully added CA certificate to my key store without any problem. Can anyone help? Is there any syntax error? I&#39;m using Glassfish 3.1.2.2 with java 7.","title":"java.io.IOException: Illegal footer when importing certificate using keytool","body":"<p>When I try to import my certificate to key store using <code>keytool</code> it shows me:</p>\n\n<pre><code>keytool error: java.security.cert.CertificateException: java.io.IOException: Illegal footer: ----END CERTIFICATE-----\njava.security.cert.CertificateException: java.io.IOException: Illegal footer: ----END CERTIFICATE-----\n        at sun.security.provider.X509Factory.engineGenerateCertificates(X509Factory.java:337)\n        at java.security.cert.CertificateFactory.generateCertificates(CertificateFactory.java:462)\n        at sun.security.tools.KeyTool.installReply(KeyTool.java:2571)\n        at sun.security.tools.KeyTool.doCommands(KeyTool.java:998)\n        at sun.security.tools.KeyTool.run(KeyTool.java:340)\n        at sun.security.tools.KeyTool.main(KeyTool.java:333)\nCaused by: java.io.IOException: Illegal footer: ----END CERTIFICATE-----\n        at sun.security.provider.X509Factory.checkHeaderFooter(X509Factory.java:590)\n        at sun.security.provider.X509Factory.readOneBlock(X509Factory.java:575)\n        at sun.security.provider.X509Factory.parseX509orPKCS7Cert(X509Factory.java:413)\n        at sun.security.provider.X509Factory.engineGenerateCertificates(X509Factory.java:335)\n        ... 5 more\n</code></pre>\n\n<p>I have successfully added CA certificate to my key store without any problem. Can anyone help? Is there any syntax error? I'm using Glassfish 3.1.2.2 with java 7.</p>\n"},{"tags":["java","integer","int","primitive"],"comments":[{"owner":{"account_id":234517,"reputation":18006,"user_id":500725,"accept_rate":69,"display_name":"Siva Charan"},"score":4,"creation_date":1337189812,"post_id":10623682,"comment_id":13768587,"body_markdown":"Possible duplicate: **[int or Integer](http://stackoverflow.com/a/423718/500725)**","body":"Possible duplicate: <b><a href=\"http://stackoverflow.com/a/423718/500725\">int or Integer</a></b>"},{"owner":{"account_id":1074234,"reputation":7436,"user_id":1072724,"accept_rate":100,"display_name":"Mike McMahon"},"score":0,"creation_date":1337189847,"post_id":10623682,"comment_id":13768601,"body_markdown":"the Integer class is provided so that values can be boxed/unboxed in a pure OO manner.  use int where appropriate unless you specifically need to use it in an OO way; in which case Integer is appropriate.","body":"the Integer class is provided so that values can be boxed/unboxed in a pure OO manner.  use int where appropriate unless you specifically need to use it in an OO way; in which case Integer is appropriate."},{"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"score":0,"creation_date":1337238273,"post_id":10623682,"comment_id":13780027,"body_markdown":"possible duplicate of [int or Integer](http://stackoverflow.com/questions/423704/int-or-integer)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/423704/int-or-integer\">int or Integer</a>"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1337189807,"creation_date":1337189807,"answer_id":10623718,"question_id":10623682,"body_markdown":"If you can use `int` do so.  If the value can be `null` or is used as an Object e.g. Generics, use `Integer`\r\n\r\nUsually it doesn&#39;t matter which one you use but often `int` performs slightly better.","title":"Using int vs Integer","body":"<p>If you can use <code>int</code> do so.  If the value can be <code>null</code> or is used as an Object e.g. Generics, use <code>Integer</code></p>\n\n<p>Usually it doesn't matter which one you use but often <code>int</code> performs slightly better.</p>\n"},{"tags":[],"owner":{"account_id":166521,"reputation":30433,"user_id":390695,"accept_rate":72,"display_name":"Damian Leszczyski - Vash"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1337189814,"creation_date":1337189814,"answer_id":10623720,"question_id":10623682,"body_markdown":"Promote primitive types always where it is possible. \r\n\r\nprimitive types can not be used as GenericArgument or a null. ","title":"Using int vs Integer","body":"<p>Promote primitive types always where it is possible. </p>\n\n<p>primitive types can not be used as GenericArgument or a null. </p>\n"},{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1337189823,"creation_date":1337189823,"answer_id":10623724,"question_id":10623682,"body_markdown":"This approach is not good in practice, use `int` whenever possible. Usage of `Integer` indicates that this particular variable can be `null` (or it was inside a collection, damn generics...) - which is not the case.\r\n\r\nAlso using `Integer` introduces an extra overhead of boxing and unboxing.","title":"Using int vs Integer","body":"<p>This approach is not good in practice, use <code>int</code> whenever possible. Usage of <code>Integer</code> indicates that this particular variable can be <code>null</code> (or it was inside a collection, damn generics...) - which is not the case.</p>\n\n<p>Also using <code>Integer</code> introduces an extra overhead of boxing and unboxing.</p>\n"},{"tags":[],"owner":{"account_id":968470,"reputation":5711,"user_id":991479,"display_name":"Ewald"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1337189904,"creation_date":1337189904,"answer_id":10623741,"question_id":10623682,"body_markdown":"This is a potential disaster waiting to happen in large projects. The coder here forgot that each Integer is actually a new object, and, to use it as an int, there has to be boxing and unboxing all the time. Not only is it inefficient, it&#39;s also not going to run as expected. You are best advised to always use int where possible, and only use Integer for placing these values into lists, containers or for database storage.  Remember, comparing Objects using &gt;, &lt; and == means something else than when you are using the same operators to compare primitives.","title":"Using int vs Integer","body":"<p>This is a potential disaster waiting to happen in large projects. The coder here forgot that each Integer is actually a new object, and, to use it as an int, there has to be boxing and unboxing all the time. Not only is it inefficient, it's also not going to run as expected. You are best advised to always use int where possible, and only use Integer for placing these values into lists, containers or for database storage.  Remember, comparing Objects using >, &lt; and == means something else than when you are using the same operators to compare primitives.</p>\n"},{"tags":[],"owner":{"account_id":323466,"reputation":14771,"user_id":643500,"display_name":"Sully"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1337189934,"creation_date":1337189934,"answer_id":10623748,"question_id":10623682,"body_markdown":"Dont use it only to loop.  Use the primitive type int (better performance), which is not the same as the Class Integer.\r\n\r\n&gt; The Integer class wraps a value of the primitive type int in an\r\n&gt; object. An object of type Integer contains a single field whose type\r\n&gt; is int.\r\n&gt; \r\n&gt; In addition, this class provides several methods for converting an int\r\n&gt; to a String and a String to an int, as well as other constants and\r\n&gt; methods useful when dealing with an int.\r\n\r\nSo, use Integer if you need to call the Integer functions or need to assign a null value to it.\r\n\r\nYou will also need to use Integer instead of int for generics like List&lt;Integer&gt;","title":"Using int vs Integer","body":"<p>Dont use it only to loop.  Use the primitive type int (better performance), which is not the same as the Class Integer.</p>\n\n<blockquote>\n  <p>The Integer class wraps a value of the primitive type int in an\n  object. An object of type Integer contains a single field whose type\n  is int.</p>\n  \n  <p>In addition, this class provides several methods for converting an int\n  to a String and a String to an int, as well as other constants and\n  methods useful when dealing with an int.</p>\n</blockquote>\n\n<p>So, use Integer if you need to call the Integer functions or need to assign a null value to it.</p>\n\n<p>You will also need to use Integer instead of int for generics like List</p>\n"},{"tags":[],"owner":{"account_id":1074234,"reputation":7436,"user_id":1072724,"accept_rate":100,"display_name":"Mike McMahon"},"down_vote_count":0,"up_vote_count":103,"is_accepted":true,"score":103,"last_activity_date":1656503143,"creation_date":1337189938,"answer_id":10623753,"question_id":10623682,"body_markdown":"the Integer class is provided so that values can be boxed/unboxed in a pure OO manner. use int where appropriate unless you specifically need to use it in an OO way; in which case Integer is appropriate.\r\n\r\n[Java Int vs Integer][1]\r\n&gt; However, very different things are going on under the covers here. An int is a number; an &gt; Integer is a pointer that can reference an object that contains a number.\r\n\r\n&gt; ...\r\n\r\n&gt; An int is not an object and cannot passed to any method that requires\r\n&gt; objects. A common case is in using the provided collection classes (\r\n&gt; List , Map , Set ) - though it is possible to write versions of these\r\n&gt; classes that provide similar capabilities to the object versions. The\r\n&gt; wrapper classes ( Integer , Double , etc) are frequently required\r\n&gt; whenever introspection is used (such as in the reflection API).\r\n\r\nA better description of when to use one vs. the other:\r\n\r\nChoosing between int and Integer\r\n\r\n&gt; I&#39;ll start with how these types should be used before going into\r\n&gt; detail on why.\r\n&gt; \r\n&gt; - Prefer `int` for performance reasons \r\n&gt; - Methods that take objects (including generic types like `List&lt;T&gt;`) \r\n&gt; will implicitly require the use of `Integer`\r\n&gt; - Use of `Integer` is relatively cheap for low values (-128 to\r\n&gt; 127) because of interning - use `Integer.valueOf(int)` and not new\r\n&gt; Integer(int) \r\n&gt; - Do not use `==` or `!=` with Integer types \r\n&gt; - Consider using `Integer` when you need to represent the \r\n&gt; absence of a value (null)\r\n&gt; - Beware unboxing Integer values to int with null values\r\n\r\n\r\n  [1]: http://illegalargumentexception.blogspot.com/2008/08/java-int-versus-integer.html","title":"Using int vs Integer","body":"<p>the Integer class is provided so that values can be boxed/unboxed in a pure OO manner. use int where appropriate unless you specifically need to use it in an OO way; in which case Integer is appropriate.</p>\n<p><a href=\"http://illegalargumentexception.blogspot.com/2008/08/java-int-versus-integer.html\" rel=\"nofollow noreferrer\">Java Int vs Integer</a></p>\n<blockquote>\n<p>However, very different things are going on under the covers here. An int is a number; an &gt; Integer is a pointer that can reference an object that contains a number.</p>\n</blockquote>\n<blockquote>\n<p>...</p>\n</blockquote>\n<blockquote>\n<p>An int is not an object and cannot passed to any method that requires\nobjects. A common case is in using the provided collection classes (\nList , Map , Set ) - though it is possible to write versions of these\nclasses that provide similar capabilities to the object versions. The\nwrapper classes ( Integer , Double , etc) are frequently required\nwhenever introspection is used (such as in the reflection API).</p>\n</blockquote>\n<p>A better description of when to use one vs. the other:</p>\n<p>Choosing between int and Integer</p>\n<blockquote>\n<p>I'll start with how these types should be used before going into\ndetail on why.</p>\n<ul>\n<li>Prefer <code>int</code> for performance reasons</li>\n<li>Methods that take objects (including generic types like <code>List&lt;T&gt;</code>)\nwill implicitly require the use of <code>Integer</code></li>\n<li>Use of <code>Integer</code> is relatively cheap for low values (-128 to</li>\n</ul>\n<ol start=\"127\">\n<li>because of interning - use <code>Integer.valueOf(int)</code> and not new\nInteger(int)</li>\n</ol>\n<ul>\n<li>Do not use <code>==</code> or <code>!=</code> with Integer types</li>\n<li>Consider using <code>Integer</code> when you need to represent the\nabsence of a value (null)</li>\n<li>Beware unboxing Integer values to int with null values</li>\n</ul>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1355206,"reputation":33312,"user_id":1293744,"accept_rate":44,"display_name":"Kumar Vivek Mitra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1337190010,"creation_date":1337190010,"answer_id":10623768,"question_id":10623682,"body_markdown":"When there is a need of using objects, you have to use the Wrapper classes,\r\n like Integer, Double, Float, etc...\r\n\r\neg:\r\n\r\n     int n = Integer.parseInt(&quot;10&quot;);\r\n \r\nHere we are converting the string to an integer (Primitive type) , \r\nbut method parseInt(String str) works only on Wrapper classes (ie Object), \r\nso we used it... you will find many more use of it in java.\r\n","title":"Using int vs Integer","body":"<p>When there is a need of using objects, you have to use the Wrapper classes,\n like Integer, Double, Float, etc...</p>\n\n<p>eg:</p>\n\n<pre><code> int n = Integer.parseInt(\"10\");\n</code></pre>\n\n<p>Here we are converting the string to an integer (Primitive type) , \nbut method parseInt(String str) works only on Wrapper classes (ie Object), \nso we used it... you will find many more use of it in java.</p>\n"},{"tags":[],"owner":{"account_id":63306,"reputation":3061,"user_id":187464,"accept_rate":64,"display_name":"dckrooney"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1337190111,"creation_date":1337190111,"answer_id":10623793,"question_id":10623682,"body_markdown":"There can be a performance penalty due to boxing and unboxing, as you incur the overhead of converting between a primitive and a reference type.\r\n\r\nHowever, the Integer class adds additional methods that can be very useful.","title":"Using int vs Integer","body":"<p>There can be a performance penalty due to boxing and unboxing, as you incur the overhead of converting between a primitive and a reference type.</p>\n\n<p>However, the Integer class adds additional methods that can be very useful.</p>\n"},{"tags":[],"owner":{"account_id":2849643,"reputation":423,"user_id":2447120,"display_name":"Rakesh Chauhan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1431851887,"creation_date":1431851887,"answer_id":30284979,"question_id":10623682,"body_markdown":"I normally use Integer because of purely OO. Performance of int is definitely far better than its object counterpart but it is noticeable only when you are looping millions time in the loop.\r\n\r\nIMHO, If performance is paramount importance in you application and you want to squeeze even single nano second then use int without any brain. But if OO  and readability is main concerned then use Integer. ","title":"Using int vs Integer","body":"<p>I normally use Integer because of purely OO. Performance of int is definitely far better than its object counterpart but it is noticeable only when you are looping millions time in the loop.</p>\n\n<p>IMHO, If performance is paramount importance in you application and you want to squeeze even single nano second then use int without any brain. But if OO  and readability is main concerned then use Integer. </p>\n"},{"tags":[],"owner":{"account_id":20445070,"reputation":21,"user_id":15001063,"display_name":"Davit Escobedo "},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649356207,"creation_date":1649356207,"answer_id":71787270,"question_id":10623682,"body_markdown":"You can&#39;t use == or != with Integer types as it&#39;ll compare their &quot;pointer location&quot;. \r\n\r\nIn order for auto-unboxing to kick off, at least one of the elements must be int. \r\n\r\nIf you are comparing Integer1 == Integer2, what actually happens is that Object.equals gets called as in: Integer1.equals(Integer2) which (unless overridden) compares the references.\r\n\r\n(This is meant to be a reply to @Muhammad Shahab but I cannot add comments yet)","title":"Using int vs Integer","body":"<p>You can't use == or != with Integer types as it'll compare their &quot;pointer location&quot;.</p>\n<p>In order for auto-unboxing to kick off, at least one of the elements must be int.</p>\n<p>If you are comparing Integer1 == Integer2, what actually happens is that Object.equals gets called as in: Integer1.equals(Integer2) which (unless overridden) compares the references.</p>\n<p>(This is meant to be a reply to @Muhammad Shahab but I cannot add comments yet)</p>\n"}],"owner":{"account_id":339468,"reputation":9236,"user_id":668970,"accept_rate":75,"display_name":"developer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90537,"favorite_count":0,"down_vote_count":1,"up_vote_count":71,"accepted_answer_id":10623753,"answer_count":10,"score":70,"last_activity_date":1656503143,"creation_date":1337189658,"question_id":10623682,"body_markdown":"I came across a class using Integer variables to capture size to be used in a for loop. Is this good practice or should we use the int primitive data type?\r\n\r\n    Integer size = something.getFields().size();\r\n    for (Integer j = 0; j &lt; size - 1; ++j) ","title":"Using int vs Integer","body":"<p>I came across a class using Integer variables to capture size to be used in a for loop. Is this good practice or should we use the int primitive data type?</p>\n\n<pre><code>Integer size = something.getFields().size();\nfor (Integer j = 0; j &lt; size - 1; ++j) \n</code></pre>\n"},{"tags":["java","criteria","jpa-criteria"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656503956,"post_id":72800871,"comment_id":128588018,"body_markdown":"Throw out the `maxResults`, then count the data that&#39;s returned and afterwards trim your list to the desired size?","body":"Throw out the <code>maxResults</code>, then count the data that&#39;s returned and afterwards trim your list to the desired size?"},{"owner":{"account_id":17459269,"reputation":136,"user_id":12657338,"display_name":"Noel93"},"score":0,"creation_date":1656504528,"post_id":72800871,"comment_id":128588212,"body_markdown":"I don&#39;t know if this is efficient. I&#39;m loading data for a frontend table from a potentionally big dataset and I only need the data for one table page, therefore the limit. Loading the whole thing would remove any lazy loading advantage.","body":"I don&#39;t know if this is efficient. I&#39;m loading data for a frontend table from a potentionally big dataset and I only need the data for one table page, therefore the limit. Loading the whole thing would remove any lazy loading advantage."},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656505396,"post_id":72800871,"comment_id":128588554,"body_markdown":"Depending on your mapping, it seems that hibernate might ignore `setMaxResults` anyways. [Read answers here for more info](https://stackoverflow.com/questions/1239723/how-do-you-do-a-limit-query-in-jpql-or-hql). That said, I always found criteria queries to be cumbersome. I would suggest going to JPQL queries with `Pageable`s. [Look here](https://stackoverflow.com/questions/22345081/spring-data-jpa-query-and-pageable). Here JPA will generate the count query as long as it is not a native query","body":"Depending on your mapping, it seems that hibernate might ignore <code>setMaxResults</code> anyways. <a href=\"https://stackoverflow.com/questions/1239723/how-do-you-do-a-limit-query-in-jpql-or-hql\">Read answers here for more info</a>. That said, I always found criteria queries to be cumbersome. I would suggest going to JPQL queries with <code>Pageable</code>s. <a href=\"https://stackoverflow.com/questions/22345081/spring-data-jpa-query-and-pageable\">Look here</a>. Here JPA will generate the count query as long as it is not a native query"}],"owner":{"account_id":17459269,"reputation":136,"user_id":12657338,"display_name":"Noel93"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":674,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656503114,"creation_date":1656503114,"question_id":72800871,"body_markdown":"I want to load ```data``` and ```count(data)``` via Criteria API. Just loading ```data``` and then checking the result list won&#39;t work, because I&#39;m limiting my results with a ```maxResults``` parameter, while ```count(data)``` is supposed to check the amount of ```data``` without any limitations. I have a set of ```Predicate``` filters that gets applied to both queries, though.\r\n\r\nMabye I have a general misunderstanding here, but I can&#39;t reuse much of the query, since right at the creation, we have to type it to the wanted query result type: \r\n```\r\nCriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\nCriteriaQuery&lt;QueryResultObject&gt; criteriaQuery = criteriaBuilder.createQuery(QueryResultObject.class);\r\n```\r\nAfterwards, we create a ```Root``` and ```Join```s for this specific already typed query:\r\n```\r\nMetamodel metamodel = entityManager.getMetamodel();\r\nEntityType&lt;Order&gt; orderMeta = metamodel.entity(Order.class);\r\nEntityType&lt;Shop&gt; shopMeta = metamodel.entity(Shop.class);\r\n\r\nRoot&lt;Order&gt; order = criteriaQuery.from(Order.class);\r\nJoin&lt;Order, Shop&gt; shop = order.join(orderMeta.getSingularAttribute(&quot;shop&quot;, Shop.class));\r\nJoin&lt;Shop, Address&gt; address = shop.join(shopMeta.getSingularAttribute(&quot;address&quot;, Address.class));\r\n```\r\nNext, I&#39;m selecting a bunch of stuff (that corresponds to the constructor of ```QueryResultObject```):\r\n```\r\ncriteriaQuery.multiselect(order.get(&quot;id&quot;), order.get(&quot;date&quot;),\r\n\taddress.get(&quot;country&quot;), order.get(&quot;item&quot;).get(&quot;name&quot;));\r\n```\r\nNow I&#39;m constructing a list of ```Predicate```s for filtering. My goal is to re-use the same list for the ```count``` query, since it&#39;s a potentially big, complex to build list. However, in those ```Predicate```s, I&#39;m using my ```Root``` and ```Join```s that are already coupled to ```criteriaQuery```, and therefore, to the target class ```QueryResultObject```. Sometimes it works, sometimes I encounter problems, so maybe there&#39;s a better way to operate here.\r\n\r\n```\r\nList&lt;Predicate&gt; whereClauses = new ArrayList&lt;&gt;();\r\n// ... fill it, e.g.:\r\nPredicate filter = criteriaBuilder.equal(address.get(&quot;country&quot;), &quot;US&quot;);\r\nwhereClauses.add(filter);\r\n\r\ncriteriaQuery.where(whereClauses.toArray(new Predicate[0]));\r\n```\r\nNow I&#39;m ready to execute the query:\r\n```\r\nTypedQuery&lt;QueryResultObject&gt; typedQuery = entityManager.createQuery(criteriaQuery);\r\ntypedQuery.setFirstResult(first));\r\ntypedQuery.setMaxResults(maxResults);\r\n\r\nvar results = typedQuery.getResultList();\r\n```\r\nJay, it worked! When looking into the generated query, ```order``` got assigned to ```generatedAlias0```, ```shop``` to ```generatedAlias2``` and ```address``` to ```generatedAlias1```. As you can see, it wasn&#39;t assigned in the order of the joins, but rather ```shop``` was skipped - maybe because nothing from ```shop``` was in the ```multiselect```? I haven&#39;t really found much about that and I think it&#39;s the source of my problem.\r\n\r\nNow, when creating a ```count``` query, I have to redo quite a bit:\r\n```\r\nCriteriaQuery&lt;Long&gt; criteriaCountQuery = criteriaBuilder.createQuery(Long.class);\r\nRoot&lt;Order&gt; orderCount = criteriaCountQuery.from(Order.class);\r\nJoin&lt;Order, Shop&gt; shopCount = orderCount.join(orderMeta.getSingularAttribute(&quot;shop&quot;, Shop.class));\r\nJoin&lt;Shop, Address&gt; addressCount = shopCount.join(shopMeta.getSingularAttribute(&quot;address&quot;, Address.class));\r\n```\r\nAnd finally, I&#39;m trying to reuse my filters and fetch a single number:\r\n```\r\ncriteriaCountQuery.select(criteriaBuilder.count(orderCount));\r\ncriteriaCountQuery.where(whereClauses.toArray(new Predicate[0]));\r\nLong count = entityManager.createQuery(criteriaCountQuery).getSingleResult();\r\n```\r\nHowever, that&#39;s where I encounter a problem: I get a ```QueryException: could not resolve property``` error that says that ```Shop``` has no field ```country```. Examining the query shows that this time, the aliases were generated in order (probably because of the different ```select``` clause), and therefore the ```Predicate```s don&#39;t quite match anymore.\r\n\r\nI don&#39;t think that this use case is that exotic, so there&#39;s probably some easier and cleaner way to do it? Happy to hear your thoughts!","title":"Execute two queries with JPA Criteria API with the same where clauses but different output types","body":"<p>I want to load <code>data</code> and <code>count(data)</code> via Criteria API. Just loading <code>data</code> and then checking the result list won't work, because I'm limiting my results with a <code>maxResults</code> parameter, while <code>count(data)</code> is supposed to check the amount of <code>data</code> without any limitations. I have a set of <code>Predicate</code> filters that gets applied to both queries, though.</p>\n<p>Mabye I have a general misunderstanding here, but I can't reuse much of the query, since right at the creation, we have to type it to the wanted query result type:</p>\n<pre><code>CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\nCriteriaQuery&lt;QueryResultObject&gt; criteriaQuery = criteriaBuilder.createQuery(QueryResultObject.class);\n</code></pre>\n<p>Afterwards, we create a <code>Root</code> and <code>Join</code>s for this specific already typed query:</p>\n<pre><code>Metamodel metamodel = entityManager.getMetamodel();\nEntityType&lt;Order&gt; orderMeta = metamodel.entity(Order.class);\nEntityType&lt;Shop&gt; shopMeta = metamodel.entity(Shop.class);\n\nRoot&lt;Order&gt; order = criteriaQuery.from(Order.class);\nJoin&lt;Order, Shop&gt; shop = order.join(orderMeta.getSingularAttribute(&quot;shop&quot;, Shop.class));\nJoin&lt;Shop, Address&gt; address = shop.join(shopMeta.getSingularAttribute(&quot;address&quot;, Address.class));\n</code></pre>\n<p>Next, I'm selecting a bunch of stuff (that corresponds to the constructor of <code>QueryResultObject</code>):</p>\n<pre><code>criteriaQuery.multiselect(order.get(&quot;id&quot;), order.get(&quot;date&quot;),\n    address.get(&quot;country&quot;), order.get(&quot;item&quot;).get(&quot;name&quot;));\n</code></pre>\n<p>Now I'm constructing a list of <code>Predicate</code>s for filtering. My goal is to re-use the same list for the <code>count</code> query, since it's a potentially big, complex to build list. However, in those <code>Predicate</code>s, I'm using my <code>Root</code> and <code>Join</code>s that are already coupled to <code>criteriaQuery</code>, and therefore, to the target class <code>QueryResultObject</code>. Sometimes it works, sometimes I encounter problems, so maybe there's a better way to operate here.</p>\n<pre><code>List&lt;Predicate&gt; whereClauses = new ArrayList&lt;&gt;();\n// ... fill it, e.g.:\nPredicate filter = criteriaBuilder.equal(address.get(&quot;country&quot;), &quot;US&quot;);\nwhereClauses.add(filter);\n\ncriteriaQuery.where(whereClauses.toArray(new Predicate[0]));\n</code></pre>\n<p>Now I'm ready to execute the query:</p>\n<pre><code>TypedQuery&lt;QueryResultObject&gt; typedQuery = entityManager.createQuery(criteriaQuery);\ntypedQuery.setFirstResult(first));\ntypedQuery.setMaxResults(maxResults);\n\nvar results = typedQuery.getResultList();\n</code></pre>\n<p>Jay, it worked! When looking into the generated query, <code>order</code> got assigned to <code>generatedAlias0</code>, <code>shop</code> to <code>generatedAlias2</code> and <code>address</code> to <code>generatedAlias1</code>. As you can see, it wasn't assigned in the order of the joins, but rather <code>shop</code> was skipped - maybe because nothing from <code>shop</code> was in the <code>multiselect</code>? I haven't really found much about that and I think it's the source of my problem.</p>\n<p>Now, when creating a <code>count</code> query, I have to redo quite a bit:</p>\n<pre><code>CriteriaQuery&lt;Long&gt; criteriaCountQuery = criteriaBuilder.createQuery(Long.class);\nRoot&lt;Order&gt; orderCount = criteriaCountQuery.from(Order.class);\nJoin&lt;Order, Shop&gt; shopCount = orderCount.join(orderMeta.getSingularAttribute(&quot;shop&quot;, Shop.class));\nJoin&lt;Shop, Address&gt; addressCount = shopCount.join(shopMeta.getSingularAttribute(&quot;address&quot;, Address.class));\n</code></pre>\n<p>And finally, I'm trying to reuse my filters and fetch a single number:</p>\n<pre><code>criteriaCountQuery.select(criteriaBuilder.count(orderCount));\ncriteriaCountQuery.where(whereClauses.toArray(new Predicate[0]));\nLong count = entityManager.createQuery(criteriaCountQuery).getSingleResult();\n</code></pre>\n<p>However, that's where I encounter a problem: I get a <code>QueryException: could not resolve property</code> error that says that <code>Shop</code> has no field <code>country</code>. Examining the query shows that this time, the aliases were generated in order (probably because of the different <code>select</code> clause), and therefore the <code>Predicate</code>s don't quite match anymore.</p>\n<p>I don't think that this use case is that exotic, so there's probably some easier and cleaner way to do it? Happy to hear your thoughts!</p>\n"},{"tags":["java","html","regex","jsoup"],"comments":[{"owner":{"account_id":2521234,"reputation":20496,"user_id":2191572,"accept_rate":69,"display_name":"MonkeyZeus"},"score":0,"creation_date":1569597707,"post_id":58135924,"comment_id":102661307,"body_markdown":"Per the [docs](https://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse-java.io.File-java.lang.String-), `.parse()` will produce &quot;sane HTML&quot; so it assumes you wanted to add in the head and body. You may wish to try [`.parseBodyFragment()`](https://jsoup.org/apidocs/org/jsoup/Jsoup.html#parseBodyFragment-java.lang.String-). You can also try `doc.body()`","body":"Per the <a href=\"https://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse-java.io.File-java.lang.String-\" rel=\"nofollow noreferrer\">docs</a>, <code>.parse()</code> will produce &quot;sane HTML&quot; so it assumes you wanted to add in the head and body. You may wish to try <a href=\"https://jsoup.org/apidocs/org/jsoup/Jsoup.html#parseBodyFragment-java.lang.String-\" rel=\"nofollow noreferrer\"><code>.parseBodyFragment()</code></a>. You can also try <code>doc.body()</code>"},{"owner":{"account_id":8289832,"reputation":131,"user_id":6231856,"accept_rate":70,"display_name":"Oleg Shankovskyi"},"score":0,"creation_date":1569599573,"post_id":58135924,"comment_id":102662166,"body_markdown":"the same problem remains","body":"the same problem remains"},{"owner":{"account_id":2521234,"reputation":20496,"user_id":2191572,"accept_rate":69,"display_name":"MonkeyZeus"},"score":0,"creation_date":1569607040,"post_id":58135924,"comment_id":102665283,"body_markdown":"You&#39;ll have to dig into the API and figure out whether or not JSOUP is suitable for your needs. JSOUP evidently makes various assumptions so if those assumptions are not good for you then you need to find a different library.","body":"You&#39;ll have to dig into the API and figure out whether or not JSOUP is suitable for your needs. JSOUP evidently makes various assumptions so if those assumptions are not good for you then you need to find a different library."}],"answers":[{"tags":[],"owner":{"account_id":19376019,"reputation":31,"user_id":14168271,"display_name":"rrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656502958,"creation_date":1656502578,"answer_id":72800753,"question_id":58135924,"body_markdown":"I encoutered same problem and in my case this code doesn&#39;t change original formatting.\r\nTry this:\r\n\r\n    public static void m(){\r\n\r\n        String html = &quot;&lt;p&gt;Some text here with already existing tags and it&amp;#39;s escaped symbols.\\n&quot; +\r\n            &quot;    More text here:&lt;br/&gt;\\r\\n---&lt;br/&gt;\\r\\n&quot; +\r\n            &quot;    &lt;img src=\\&quot;/attachments/a0d4789a-1575-4b70-b57f-9e8fe21df46b\\&quot; sha256=\\&quot;2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c\\&quot;&gt;&lt;/a&gt;&quot; +\r\n            &quot;    It was img tag with attr to replace above&lt;/p&gt;\\r\\n\\r\\n&lt;p&gt;More text here\\n&quot; +\r\n            &quot;    and here.&lt;br/&gt;\\r\\n---&lt;/p&gt;&quot;;\r\n\r\n        Document doc = Jsoup.parseBodyFragment(html);\r\n        doc.outputSettings().prettyPrint(false);\r\n        Elements elementsByAttribute = doc.select(&quot;img[src]&quot;);\r\n        elementsByAttribute.forEach(x -&gt; x.attr(&quot;src&quot;, &quot;/usr/myfolder/&quot; + x.attr(&quot;sha256&quot;) + &quot;.zip&quot;));\r\n        String result = doc.body().html();\r\n\r\n        System.out.println(result);\r\n    }\r\n\r\nIt outputs in console (In your example there is dandling `&lt;/a&gt;` after `&lt;img/&gt;` so library remove it):\r\n\r\n    &lt;p&gt;Some text here with already existing tags and it&#39;s escaped symbols.\r\n        More text here:&lt;br&gt;\r\n    ---&lt;br&gt;\r\n        &lt;img src=&quot;/usr/myfolder/2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c.zip&quot; sha256=&quot;2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c&quot;&gt;    It was img tag with attr to replace above&lt;/p&gt;\r\n    \r\n    &lt;p&gt;More text here\r\n        and here.&lt;br&gt;\r\n    ---&lt;/p&gt;\r\n\r\n\r\nAnd my case in Kotlin (replace content of `src` of `&lt;img/&gt;` attrs &amp; remove `&lt;script&gt;&lt;/script&gt;` tags)(`text` is input `String?` variable from outer scope):\r\n\r\n    val content: String get(){\r\n        var c = text ?: &quot;&quot;\r\n\r\n        //val document = Jsoup.parse(c)\r\n        val document = Jsoup.parseBodyFragment(c)\r\n        document.outputSettings().prettyPrint(false)\r\n\r\n        val elementsByAttr = document.select(&quot;img[src]&quot;)\r\n        elementsByAttr.forEach {\r\n            val srcContent = it.attr(&quot;src&quot;)\r\n            val (type,value) = srcContent.let {\r\n                val eqIdx = it.indexOf(&#39;=&#39;)\r\n                it.substring(0, max(0,eqIdx)) to it.substring(eqIdx+1)\r\n            }\r\n            if (type==&quot;path&quot;){\r\n                it.attr(&quot;src&quot;, ArticleRepo.imgPathPrefix+value)\r\n            }\r\n        }\r\n\r\n        document.select(&quot;script&quot;).remove()\r\n\r\n        c = document.body().html()\r\n        return c\r\n    }","title":"Replace some HTML attributes with Jsoup without changing rest of input","body":"<p>I encoutered same problem and in my case this code doesn't change original formatting.\nTry this:</p>\n<pre><code>public static void m(){\n\n    String html = &quot;&lt;p&gt;Some text here with already existing tags and it&amp;#39;s escaped symbols.\\n&quot; +\n        &quot;    More text here:&lt;br/&gt;\\r\\n---&lt;br/&gt;\\r\\n&quot; +\n        &quot;    &lt;img src=\\&quot;/attachments/a0d4789a-1575-4b70-b57f-9e8fe21df46b\\&quot; sha256=\\&quot;2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c\\&quot;&gt;&lt;/a&gt;&quot; +\n        &quot;    It was img tag with attr to replace above&lt;/p&gt;\\r\\n\\r\\n&lt;p&gt;More text here\\n&quot; +\n        &quot;    and here.&lt;br/&gt;\\r\\n---&lt;/p&gt;&quot;;\n\n    Document doc = Jsoup.parseBodyFragment(html);\n    doc.outputSettings().prettyPrint(false);\n    Elements elementsByAttribute = doc.select(&quot;img[src]&quot;);\n    elementsByAttribute.forEach(x -&gt; x.attr(&quot;src&quot;, &quot;/usr/myfolder/&quot; + x.attr(&quot;sha256&quot;) + &quot;.zip&quot;));\n    String result = doc.body().html();\n\n    System.out.println(result);\n}\n</code></pre>\n<p>It outputs in console (In your example there is dandling <code>&lt;/a&gt;</code> after <code>&lt;img/&gt;</code> so library remove it):</p>\n<pre><code>&lt;p&gt;Some text here with already existing tags and it's escaped symbols.\n    More text here:&lt;br&gt;\n---&lt;br&gt;\n    &lt;img src=&quot;/usr/myfolder/2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c.zip&quot; sha256=&quot;2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c&quot;&gt;    It was img tag with attr to replace above&lt;/p&gt;\n\n&lt;p&gt;More text here\n    and here.&lt;br&gt;\n---&lt;/p&gt;\n</code></pre>\n<p>And my case in Kotlin (replace content of <code>src</code> of <code>&lt;img/&gt;</code> attrs &amp; remove <code>&lt;script&gt;&lt;/script&gt;</code> tags)(<code>text</code> is input <code>String?</code> variable from outer scope):</p>\n<pre><code>val content: String get(){\n    var c = text ?: &quot;&quot;\n\n    //val document = Jsoup.parse(c)\n    val document = Jsoup.parseBodyFragment(c)\n    document.outputSettings().prettyPrint(false)\n\n    val elementsByAttr = document.select(&quot;img[src]&quot;)\n    elementsByAttr.forEach {\n        val srcContent = it.attr(&quot;src&quot;)\n        val (type,value) = srcContent.let {\n            val eqIdx = it.indexOf('=')\n            it.substring(0, max(0,eqIdx)) to it.substring(eqIdx+1)\n        }\n        if (type==&quot;path&quot;){\n            it.attr(&quot;src&quot;, ArticleRepo.imgPathPrefix+value)\n        }\n    }\n\n    document.select(&quot;script&quot;).remove()\n\n    c = document.body().html()\n    return c\n}\n</code></pre>\n"}],"owner":{"account_id":8289832,"reputation":131,"user_id":6231856,"accept_rate":70,"display_name":"Oleg Shankovskyi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":901,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1656502958,"creation_date":1569592266,"question_id":58135924,"body_markdown":"I work with incoming html text blocks, like this:\r\n```\r\nString html = &quot;&lt;p&gt;Some text here with already existing tags and it&amp;#39;s escaped symbols.\\n&quot; +\r\n\t\t\t\t&quot;    More text here:&lt;br/&gt;\\\\r\\\\n---&lt;br/&gt;\\\\r\\\\n&quot; +\r\n\t\t\t\t&quot;    &lt;img src=\\&quot;/attachments/a0d4789a-1575-4b70-b57f-9e8fe21df46b\\&quot; sha256=\\&quot;2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c\\&quot;&gt;&lt;/a&gt;&quot; +\r\n\t\t\t\t&quot;    It was img tag with attr to replace above&lt;/p&gt;\\\\r\\\\n\\\\r\\\\n&lt;p&gt;More text here\\n&quot; +\r\n\t\t\t\t&quot;    and here.&lt;br/&gt;\\\\r\\\\n---&lt;/p&gt;&quot;;\r\n```\r\nI need to replace `src` attribute value in `img` tags with slightly modified `sha256` attribute value in the same tag. I can do it easily with Jsoup like this:\r\n\r\n```\r\n\t\tDocument doc = Jsoup.parse(html);\r\n\t\tElements elementsByAttribute = doc.select(&quot;img[src]&quot;);\r\n\t\telementsByAttribute.forEach(x -&gt; x.attr(&quot;src&quot;, &quot;/usr/myfolder/&quot; + x.attr(&quot;sha256&quot;) + &quot;.zip&quot;));\r\n```\r\n\r\nBut there is a problem. Incoming text already has some formatting, html tags, escaping etc that need to be preserved. But Jsoup removes tags / adds tags / unescapes / escapes and does some other modifications to the original input.\r\n\r\nFor example, `System.out.println(doc);` or `System.out.println(doc.html());` gives me following:\r\n```\r\n&lt;html&gt;\r\n &lt;head&gt;&lt;/head&gt;\r\n &lt;body&gt;\r\n  &lt;p&gt;Some text here with already existing tags and it&#39;s escaped symbols. More text here:&lt;br&gt;\\r\\n---&lt;br&gt;\\r\\n &lt;img src=&quot;/usr/myfolder/2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c.zip&quot; sha256=&quot;2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c&quot;&gt; It was img tag with attr to replace above&lt;/p&gt;\\r\\n\\r\\n\r\n  &lt;p&gt;More text here and here.&lt;br&gt;\\r\\n---&lt;/p&gt;\r\n &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nMy `src` attribute is replaced, but a lot more html-tags are added, `it&amp;#39;s` is escaped to `it&#39;s`.\r\n\r\nIf I use `System.out.println(doc.text());` i receive following:\r\n\r\n```\r\nSome text here with already existing tags and it&#39;s escaped symbols. More text here: \\r\\n--- \\r\\n It was img tag with attr to replace above\\r\\n\\r\\n More text here and here. \\r\\n---\r\n```\r\n\r\nMy tags are removed here, `it&amp;#39;s` is escaped to `it&#39;s` again.\r\n\r\nI tried some other Jsoup features but didn&#39;t find how to solve this problem.\r\n\r\nQuesion: is there any way to replace only some attributes with Jsoup without changing other tags? Maybe there is some othere library for that purpose? Or my only way is regex?","title":"Replace some HTML attributes with Jsoup without changing rest of input","body":"<p>I work with incoming html text blocks, like this:</p>\n\n<pre><code>String html = \"&lt;p&gt;Some text here with already existing tags and it&amp;#39;s escaped symbols.\\n\" +\n                \"    More text here:&lt;br/&gt;\\\\r\\\\n---&lt;br/&gt;\\\\r\\\\n\" +\n                \"    &lt;img src=\\\"/attachments/a0d4789a-1575-4b70-b57f-9e8fe21df46b\\\" sha256=\\\"2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c\\\"&gt;&lt;/a&gt;\" +\n                \"    It was img tag with attr to replace above&lt;/p&gt;\\\\r\\\\n\\\\r\\\\n&lt;p&gt;More text here\\n\" +\n                \"    and here.&lt;br/&gt;\\\\r\\\\n---&lt;/p&gt;\";\n</code></pre>\n\n<p>I need to replace <code>src</code> attribute value in <code>img</code> tags with slightly modified <code>sha256</code> attribute value in the same tag. I can do it easily with Jsoup like this:</p>\n\n<pre><code>        Document doc = Jsoup.parse(html);\n        Elements elementsByAttribute = doc.select(\"img[src]\");\n        elementsByAttribute.forEach(x -&gt; x.attr(\"src\", \"/usr/myfolder/\" + x.attr(\"sha256\") + \".zip\"));\n</code></pre>\n\n<p>But there is a problem. Incoming text already has some formatting, html tags, escaping etc that need to be preserved. But Jsoup removes tags / adds tags / unescapes / escapes and does some other modifications to the original input.</p>\n\n<p>For example, <code>System.out.println(doc);</code> or <code>System.out.println(doc.html());</code> gives me following:</p>\n\n<pre><code>&lt;html&gt;\n &lt;head&gt;&lt;/head&gt;\n &lt;body&gt;\n  &lt;p&gt;Some text here with already existing tags and it's escaped symbols. More text here:&lt;br&gt;\\r\\n---&lt;br&gt;\\r\\n &lt;img src=\"/usr/myfolder/2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c.zip\" sha256=\"2957635fcf46eb54d99f4f335794bd75a89d2ebc1663f5d1708a2fc662ee065c\"&gt; It was img tag with attr to replace above&lt;/p&gt;\\r\\n\\r\\n\n  &lt;p&gt;More text here and here.&lt;br&gt;\\r\\n---&lt;/p&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My <code>src</code> attribute is replaced, but a lot more html-tags are added, <code>it&amp;#39;s</code> is escaped to <code>it's</code>.</p>\n\n<p>If I use <code>System.out.println(doc.text());</code> i receive following:</p>\n\n<pre><code>Some text here with already existing tags and it's escaped symbols. More text here: \\r\\n--- \\r\\n It was img tag with attr to replace above\\r\\n\\r\\n More text here and here. \\r\\n---\n</code></pre>\n\n<p>My tags are removed here, <code>it&amp;#39;s</code> is escaped to <code>it's</code> again.</p>\n\n<p>I tried some other Jsoup features but didn't find how to solve this problem.</p>\n\n<p>Quesion: is there any way to replace only some attributes with Jsoup without changing other tags? Maybe there is some othere library for that purpose? Or my only way is regex?</p>\n"},{"tags":["java","spring","spring-boot","maven","maven-plugin"],"comments":[{"owner":{"account_id":4385428,"reputation":1304,"user_id":3575763,"display_name":"Flame239"},"score":0,"creation_date":1656506837,"post_id":72800541,"comment_id":128589182,"body_markdown":"Have you tried `mvn install` for `pet-clinic-data` project?\n`pet-clinic-data` artifact (in our case jar file) should exist somewhere (for example, in your local maven repo, and you can put it there by executing `mvn install`). IDEa doesn&#39;t look at the source code, it need an artifact","body":"Have you tried <code>mvn install</code> for <code>pet-clinic-data</code> project? <code>pet-clinic-data</code> artifact (in our case jar file) should exist somewhere (for example, in your local maven repo, and you can put it there by executing <code>mvn install</code>). IDEa doesn&#39;t look at the source code, it need an artifact"},{"owner":{"account_id":21111421,"reputation":45,"user_id":15519295,"display_name":"Epitaph"},"score":0,"creation_date":1656506978,"post_id":72800541,"comment_id":128589257,"body_markdown":"@Flame239 I did that. Build succeeded but still can&#39;t import it.","body":"@Flame239 I did that. Build succeeded but still can&#39;t import it."},{"owner":{"account_id":4385428,"reputation":1304,"user_id":3575763,"display_name":"Flame239"},"score":0,"creation_date":1656507140,"post_id":72800541,"comment_id":128589331,"body_markdown":"Does this jar exist in local `.m2` repo and does IntelliJ idea sees it under `External Libraries`?","body":"Does this jar exist in local <code>.m2</code> repo and does IntelliJ idea sees it under <code>External Libraries</code>?"},{"owner":{"account_id":21111421,"reputation":45,"user_id":15519295,"display_name":"Epitaph"},"score":0,"creation_date":1656507230,"post_id":72800541,"comment_id":128589374,"body_markdown":"@Flame239 jar exists in .m2 repo but it is not under External Libraries","body":"@Flame239 jar exists in .m2 repo but it is not under External Libraries"},{"owner":{"account_id":4385428,"reputation":1304,"user_id":3575763,"display_name":"Flame239"},"score":0,"creation_date":1656507492,"post_id":72800541,"comment_id":128589502,"body_markdown":"Could you manually add `import ....OwnerService` in `DataLoader` class and then execute `mvn clean compile`","body":"Could you manually add <code>import ....OwnerService</code> in <code>DataLoader</code> class and then execute <code>mvn clean compile</code>"},{"owner":{"account_id":4385428,"reputation":1304,"user_id":3575763,"display_name":"Flame239"},"score":0,"creation_date":1656507645,"post_id":72800541,"comment_id":128589570,"body_markdown":"Please paste the output","body":"Please paste the output"},{"owner":{"account_id":21111421,"reputation":45,"user_id":15519295,"display_name":"Epitaph"},"score":0,"creation_date":1656507683,"post_id":72800541,"comment_id":128589588,"body_markdown":"@Flame239 It failed to execute with an error message &quot;variable ownerService might not have been initialized&quot;.","body":"@Flame239 It failed to execute with an error message &quot;variable ownerService might not have been initialized&quot;."},{"owner":{"account_id":4385428,"reputation":1304,"user_id":3575763,"display_name":"Flame239"},"score":0,"creation_date":1656507788,"post_id":72800541,"comment_id":128589637,"body_markdown":"You can fix it by removing empty constructor","body":"You can fix it by removing empty constructor"},{"owner":{"account_id":21111421,"reputation":45,"user_id":15519295,"display_name":"Epitaph"},"score":0,"creation_date":1656507880,"post_id":72800541,"comment_id":128589666,"body_markdown":"@Flame239 build succeeded when I assigned null to ownerService but still it can&#39;t resolve  symbol.","body":"@Flame239 build succeeded when I assigned null to ownerService but still it can&#39;t resolve  symbol."},{"owner":{"account_id":4385428,"reputation":1304,"user_id":3575763,"display_name":"Flame239"},"score":0,"creation_date":1656507964,"post_id":72800541,"comment_id":128589697,"body_markdown":"please paste mvn output","body":"please paste mvn output"},{"owner":{"account_id":4385428,"reputation":1304,"user_id":3575763,"display_name":"Flame239"},"score":0,"creation_date":1656508026,"post_id":72800541,"comment_id":128589732,"body_markdown":"or you mean maven command was successful but IDEa still highlights it?","body":"or you mean maven command was successful but IDEa still highlights it?"},{"owner":{"account_id":21111421,"reputation":45,"user_id":15519295,"display_name":"Epitaph"},"score":0,"creation_date":1656508043,"post_id":72800541,"comment_id":128589742,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/246023/discussion-between-epitaph-and-flame239).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/246023/discussion-between-epitaph-and-flame239\">continue this discussion in chat</a>."}],"owner":{"account_id":21111421,"reputation":45,"user_id":15519295,"display_name":"Epitaph"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656502888,"creation_date":1656501703,"question_id":72800541,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ox0DK.png\r\n\r\nI can&#39;t create an owner service in my DataLoader class because I can&#39;t import package from pet-clinic-data. I added the dependency of data package to web&#39;s pom.xml, but still I can&#39;t import that service.\r\n\r\nThis is what pet-clinic-data pom.xml looks like:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;sfg-pet-clinic&lt;/artifactId&gt;\r\n        &lt;groupId&gt;guru.springframework&lt;/groupId&gt;\r\n        &lt;version&gt;0.0.2&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;artifactId&gt;pet-clinic-data&lt;/artifactId&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;spring-boot.repackage.skip&gt;true&lt;/spring-boot.repackage.skip&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;skip&gt;true&lt;/skip&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nThis is what pet-clinic-web pom.xml looks like:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;sfg-pet-clinic&lt;/artifactId&gt;\r\n        &lt;groupId&gt;guru.springframework&lt;/groupId&gt;\r\n        &lt;version&gt;0.0.2&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;artifactId&gt;pet-clinic-web&lt;/artifactId&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;artifactId&gt;pet-clinic-data&lt;/artifactId&gt;\r\n            &lt;groupId&gt;guru.springframework&lt;/groupId&gt;\r\n            &lt;version&gt;0.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;guru.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;pet-clinic-data&lt;/artifactId&gt;\r\n            &lt;version&gt;0.0.2&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt; \r\n```\r\n\r\nCan someone explain why I can&#39;t import the package even though I already declared the dependency in the pom.xml?\r\n\r\nStill can&#39;t solve the issue!","title":"Can not import OwnerService from another module","body":"<p><a href=\"https://i.stack.imgur.com/Ox0DK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ox0DK.png\" alt=\"enter image description here\" /></a></p>\n<p>I can't create an owner service in my DataLoader class because I can't import package from pet-clinic-data. I added the dependency of data package to web's pom.xml, but still I can't import that service.</p>\n<p>This is what pet-clinic-data pom.xml looks like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;sfg-pet-clinic&lt;/artifactId&gt;\n        &lt;groupId&gt;guru.springframework&lt;/groupId&gt;\n        &lt;version&gt;0.0.2&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;artifactId&gt;pet-clinic-data&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;spring-boot.repackage.skip&gt;true&lt;/spring-boot.repackage.skip&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;skip&gt;true&lt;/skip&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n\n&lt;/project&gt;\n</code></pre>\n<p>This is what pet-clinic-web pom.xml looks like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;sfg-pet-clinic&lt;/artifactId&gt;\n        &lt;groupId&gt;guru.springframework&lt;/groupId&gt;\n        &lt;version&gt;0.0.2&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;artifactId&gt;pet-clinic-web&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;artifactId&gt;pet-clinic-data&lt;/artifactId&gt;\n            &lt;groupId&gt;guru.springframework&lt;/groupId&gt;\n            &lt;version&gt;0.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;guru.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;pet-clinic-data&lt;/artifactId&gt;\n            &lt;version&gt;0.0.2&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n&lt;/project&gt; \n</code></pre>\n<p>Can someone explain why I can't import the package even though I already declared the dependency in the pom.xml?</p>\n<p>Still can't solve the issue!</p>\n"},{"tags":["java","csv","frontend","export-to-csv"],"answers":[{"tags":[],"owner":{"account_id":7398978,"reputation":61,"user_id":8226426,"display_name":"Petr Jord&#225;n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656502527,"creation_date":1656502527,"answer_id":72800739,"question_id":72798902,"body_markdown":"I guess you need the correct headers and return type. The following example returns desired files. The only difference should be the cast InputStream to byte array(https://stackoverflow.com/questions/1264709/convert-inputstream-to-byte-array-in-java).\r\n\r\n    @GetMapping(value = &quot;/{attachmentId}/attachment&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\r\n    public ResponseEntity&lt;byte[]&gt; getImage(@PathVariable Long attachmentId) throws IOException {\r\n        Attachment attachment = attachmentRepository.findById(attachmentId).orElseThrow(RuntimeException::new);\r\n        byte[] file = attachment.getFile();\r\n        HttpHeaders responseHeaders = new HttpHeaders();\r\n        responseHeaders.setContentType(MediaType.APPLICATION_OCTET_STREAM);\r\n        responseHeaders.set(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + attachment.getName());\r\n\r\n        return new ResponseEntity&lt;&gt;(file, responseHeaders, HttpStatus.OK);\r\n    }\r\n\r\n","title":"How to download file in Front or Backend","body":"<p>I guess you need the correct headers and return type. The following example returns desired files. The only difference should be the cast InputStream to byte array(<a href=\"https://stackoverflow.com/questions/1264709/convert-inputstream-to-byte-array-in-java\">Convert InputStream to byte array in Java</a>).</p>\n<pre><code>@GetMapping(value = &quot;/{attachmentId}/attachment&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\npublic ResponseEntity&lt;byte[]&gt; getImage(@PathVariable Long attachmentId) throws IOException {\n    Attachment attachment = attachmentRepository.findById(attachmentId).orElseThrow(RuntimeException::new);\n    byte[] file = attachment.getFile();\n    HttpHeaders responseHeaders = new HttpHeaders();\n    responseHeaders.setContentType(MediaType.APPLICATION_OCTET_STREAM);\n    responseHeaders.set(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + attachment.getName());\n\n    return new ResponseEntity&lt;&gt;(file, responseHeaders, HttpStatus.OK);\n}\n</code></pre>\n"}],"owner":{"account_id":25208154,"reputation":45,"user_id":19046189,"display_name":"KollegeBo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":585,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656502527,"creation_date":1656494421,"question_id":72798902,"body_markdown":"I have a Controller returning an &quot;InputStreamResource file&quot;. I want that this file appears to the downloads. It isn&#180;t important for me to return this file to the Frontend, but when it will be neccessary I can do this. How can I start a download? Thanks!\r\n\r\nThis is my Controller with the &quot;InputStreamResource file&quot;:\r\n\r\n```\r\n@RequestMapping(path = &quot;/csv&quot;, method = RequestMethod.GET)\r\n    public ResponseEntity&lt;InputStreamResource&gt; getCSV() {\r\n        String filename = &quot;User.csv&quot;;\r\n        InputStreamResource file = new InputStreamResource(fileService.load());\r\n        return ResponseEntity.ok()\r\n                .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + filename)\r\n                .contentType(MediaType.parseMediaType(&quot;application/csv&quot;))\r\n                .body(file);\r\n    }\r\n```\r\nHere I get the csv data in my frontend: \r\n```\r\n csv() {\r\n    this.userService.getCSV().subscribe(\r\n      {\r\n        next: data =&gt;{\r\n          console.log(data)\r\n        }\r\n      }\r\n    );\r\n  }\r\n```\r\noutput:\r\n \r\n1,user1\r\n\r\n2,user2\r\n\r\n3,user3","title":"How to download file in Front or Backend","body":"<p>I have a Controller returning an &quot;InputStreamResource file&quot;. I want that this file appears to the downloads. It isnt important for me to return this file to the Frontend, but when it will be neccessary I can do this. How can I start a download? Thanks!</p>\n<p>This is my Controller with the &quot;InputStreamResource file&quot;:</p>\n<pre><code>@RequestMapping(path = &quot;/csv&quot;, method = RequestMethod.GET)\n    public ResponseEntity&lt;InputStreamResource&gt; getCSV() {\n        String filename = &quot;User.csv&quot;;\n        InputStreamResource file = new InputStreamResource(fileService.load());\n        return ResponseEntity.ok()\n                .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=&quot; + filename)\n                .contentType(MediaType.parseMediaType(&quot;application/csv&quot;))\n                .body(file);\n    }\n</code></pre>\n<p>Here I get the csv data in my frontend:</p>\n<pre><code> csv() {\n    this.userService.getCSV().subscribe(\n      {\n        next: data =&gt;{\n          console.log(data)\n        }\n      }\n    );\n  }\n</code></pre>\n<p>output:</p>\n<p>1,user1</p>\n<p>2,user2</p>\n<p>3,user3</p>\n"},{"tags":["java","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":3617395,"reputation":61,"user_id":3016930,"display_name":"Chris Romkema"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656502516,"creation_date":1656502516,"answer_id":72800737,"question_id":72798403,"body_markdown":"Since spring-boot 2x these endpoints are disabled and you need to enable them. You can try adding the following to your properties:\r\n\r\n```\r\nendpoints:\r\n  enabled: false\r\n  health:\r\n    enabled: true\r\n```\r\n\r\nI also tried it via \r\n```\r\nmanagement:\r\n  endpoint:\r\n    health:\r\n      enabled: true\r\n```\r\nbut that didn&#39;t work on the platform where I deployed it (WebLogic)","title":"Spring-boot-actuator exposing 0 endpoints","body":"<p>Since spring-boot 2x these endpoints are disabled and you need to enable them. You can try adding the following to your properties:</p>\n<pre><code>endpoints:\n  enabled: false\n  health:\n    enabled: true\n</code></pre>\n<p>I also tried it via</p>\n<pre><code>management:\n  endpoint:\n    health:\n      enabled: true\n</code></pre>\n<p>but that didn't work on the platform where I deployed it (WebLogic)</p>\n"}],"owner":{"account_id":25367172,"reputation":21,"user_id":19181588,"display_name":"vnerhus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2301,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1656502516,"creation_date":1656492296,"question_id":72798403,"body_markdown":"I am trying to expose the /actuator/health endpoint in my spring-boot application, but my log states that zero endpoints are exposed. I have seen some documentation that states that the health endpoint is the only endpoint that is enabled by default but it returns 404 for me.\r\n\r\n**Log from startup of application:**\r\n```\r\n{&quot;@timestamp&quot;:&quot;2022-06-29T09:50:59.441+02:00&quot;,&quot;@version&quot;:1,&quot;message&quot;:&quot;Exposing 0 endpoint(s) beneath base path &#39;/actuator&#39;&quot;,&quot;logger_name&quot;:&quot;org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver&quot;,&quot;thread_name&quot;:&quot;main&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;level_value&quot;:20000,&quot;caller_class_name&quot;:&quot;org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver&quot;,&quot;caller_method_name&quot;:&quot;&lt;init&gt;&quot;,&quot;caller_file_name&quot;:&quot;EndpointLinksResolver.java&quot;,&quot;caller_line_number&quot;:58}\r\n```\r\n\r\nAccessing /actuator also shows that no endpoints are exposed:\r\n```\r\n{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;http://localhost:8000/actuator&quot;,&quot;templated&quot;:false}}}\r\n```\r\n\r\nI&#39;ve looked at several other similar posts but none of the fixes provided works for me.\r\nI do have my own endpoint as well in a **@RestController** that I thought might be interfering, but commenting it out its Post/Get-mappings did not help either.\r\n\r\n---\r\n**My pom.xml is as follows:**\r\n```\r\n&lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.6&lt;/version&gt;\r\n        &lt;relativePath /&gt;\r\n&lt;/parent&gt;\r\n\r\n...\r\n\r\n&lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n---\r\n**In my application.yaml I have tried the following:**\r\n```\r\nserver:\r\n  port: 8000\r\n\r\nmanagement:\r\n  health:\r\n    probes:\r\n      enabled: true\r\n    livenessstate:\r\n      enabled: true\r\n    readinessstate:\r\n      enabled: true\r\n\r\n  endpoint:\r\n    health:\r\n      probes:\r\n        enabled: true\r\n      show-details: always\r\n      enabled: true\r\n\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: &#39;*&#39;\r\n    enabled-by-default: true\r\n```\r\n\r\nOther settings in the **application.yaml** (like changing the port) works fine, so I know that the application.yaml is at least being used.\r\n\r\nAny ideas?\r\n","title":"Spring-boot-actuator exposing 0 endpoints","body":"<p>I am trying to expose the /actuator/health endpoint in my spring-boot application, but my log states that zero endpoints are exposed. I have seen some documentation that states that the health endpoint is the only endpoint that is enabled by default but it returns 404 for me.</p>\n<p><strong>Log from startup of application:</strong></p>\n<pre><code>{&quot;@timestamp&quot;:&quot;2022-06-29T09:50:59.441+02:00&quot;,&quot;@version&quot;:1,&quot;message&quot;:&quot;Exposing 0 endpoint(s) beneath base path '/actuator'&quot;,&quot;logger_name&quot;:&quot;org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver&quot;,&quot;thread_name&quot;:&quot;main&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;level_value&quot;:20000,&quot;caller_class_name&quot;:&quot;org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver&quot;,&quot;caller_method_name&quot;:&quot;&lt;init&gt;&quot;,&quot;caller_file_name&quot;:&quot;EndpointLinksResolver.java&quot;,&quot;caller_line_number&quot;:58}\n</code></pre>\n<p>Accessing /actuator also shows that no endpoints are exposed:</p>\n<pre><code>{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;http://localhost:8000/actuator&quot;,&quot;templated&quot;:false}}}\n</code></pre>\n<p>I've looked at several other similar posts but none of the fixes provided works for me.\nI do have my own endpoint as well in a <strong>@RestController</strong> that I thought might be interfering, but commenting it out its Post/Get-mappings did not help either.</p>\n<hr />\n<p><strong>My pom.xml is as follows:</strong></p>\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.6&lt;/version&gt;\n        &lt;relativePath /&gt;\n&lt;/parent&gt;\n\n...\n\n&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<hr />\n<p><strong>In my application.yaml I have tried the following:</strong></p>\n<pre><code>server:\n  port: 8000\n\nmanagement:\n  health:\n    probes:\n      enabled: true\n    livenessstate:\n      enabled: true\n    readinessstate:\n      enabled: true\n\n  endpoint:\n    health:\n      probes:\n        enabled: true\n      show-details: always\n      enabled: true\n\n  endpoints:\n    web:\n      exposure:\n        include: '*'\n    enabled-by-default: true\n</code></pre>\n<p>Other settings in the <strong>application.yaml</strong> (like changing the port) works fine, so I know that the application.yaml is at least being used.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","postgresql","caching","redis","redisson"],"answers":[{"tags":[],"owner":{"account_id":1313895,"reputation":659,"user_id":1261267,"accept_rate":25,"display_name":"tabreaz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589282731,"creation_date":1589282731,"answer_id":61750510,"question_id":61749241,"body_markdown":"You can get generated Keys from postgres using prepared Statement. \r\n\r\n       ps = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS) ;\r\n       ps.execute();\r\n       ResultSet rs = ps.getGeneratedKeys();","title":"How can I use Redisson Write-through caching strategy with an auto-generated PK","body":"<p>You can get generated Keys from postgres using prepared Statement. </p>\n\n<pre><code>   ps = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS) ;\n   ps.execute();\n   ResultSet rs = ps.getGeneratedKeys();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25680089,"reputation":11,"user_id":19443006,"display_name":"Nik Colman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656502445,"creation_date":1656502445,"answer_id":72800715,"question_id":61749241,"body_markdown":"I&#39;m aware this is an older post but answering because I came across the same issue.\r\nFor me, the solution was to use the `MapLoader` rather than the `MapWriter`, using a `CallableStatement` (rather than a `PreparedStatement`) backed by a stored procedure in the `SELECT_or_INSERTthenSELECT` mould.\r\n\r\n\r\n        @Override\r\n        public Integer load(Node node) {\r\n            // second parameter to the procedure is an OUTPUT param\r\n        \ttry(CallableStatement callableStatement = conn.prepareCall(&quot;{CALL INSERT_or_SELECT_THEN_INSERT (?, ?)}&quot;))\r\n        \t{\r\n        \t\tcallableStatement.setString(1, node.getName());\r\n        \t\tcallableStatement.registerOutParameter(2, java.sql.Types.BIGINT);\r\n        \t\tcallableStatement.executeUpdate();\r\n\t\t\r\n        \t\tSystem.out.println(&quot;Debug nodeName: &quot; + node.getName() + &quot;, id: &quot; + callableStatement.getLong(2));\r\n        \t\treturn callableStatement.getLong(2);\r\n        \t} catch (Exception e) {\r\n        \t\tthrow new IllegalStateException(e);\r\n        \t}\r\n        }\r\n\r\nNow you can just call `map.get(node)` and the `load()` override will be called if the node is not in the map.\r\n","title":"How can I use Redisson Write-through caching strategy with an auto-generated PK","body":"<p>I'm aware this is an older post but answering because I came across the same issue.\nFor me, the solution was to use the <code>MapLoader</code> rather than the <code>MapWriter</code>, using a <code>CallableStatement</code> (rather than a <code>PreparedStatement</code>) backed by a stored procedure in the <code>SELECT_or_INSERTthenSELECT</code> mould.</p>\n<pre><code>    @Override\n    public Integer load(Node node) {\n        // second parameter to the procedure is an OUTPUT param\n        try(CallableStatement callableStatement = conn.prepareCall(&quot;{CALL INSERT_or_SELECT_THEN_INSERT (?, ?)}&quot;))\n        {\n            callableStatement.setString(1, node.getName());\n            callableStatement.registerOutParameter(2, java.sql.Types.BIGINT);\n            callableStatement.executeUpdate();\n    \n            System.out.println(&quot;Debug nodeName: &quot; + node.getName() + &quot;, id: &quot; + callableStatement.getLong(2));\n            return callableStatement.getLong(2);\n        } catch (Exception e) {\n            throw new IllegalStateException(e);\n        }\n    }\n</code></pre>\n<p>Now you can just call <code>map.get(node)</code> and the <code>load()</code> override will be called if the node is not in the map.</p>\n"}],"owner":{"account_id":11964246,"reputation":31,"user_id":8754441,"display_name":"ioan tinca"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":656,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1656502445,"creation_date":1589278847,"question_id":61749241,"body_markdown":"I am planning to use Redis with Redisson as a caching layer between my Java app and a PostgreSQL DB. \r\nI have a table called Nodes looking like this:\r\n\r\n    CREATE TABLE nodes\r\n    (\r\n\tnode_id bigint GENERATED BY DEFAULT AS IDENTITY(START WITH 1 INCREMENT BY 1),\r\n    node_name varchar(100) NOT NULL,\r\n    PRIMARY KEY (node_id)\r\n    )\r\n\r\nI want to use [Redisson RMap persistence](https://github.com/redisson/redisson/wiki/7.-Distributed-collections#712-map-persistence) to cache this structure. \r\nMy goal is to have an rmap looking like this:\r\n\r\n    Rmap&lt;Integer, Node&gt; \r\n\r\nwhere the key is the PK, and the value is the node itself.\r\n\r\nI want to use read-through and write-trhough strategies for caching this Rmap, by using the MapLoader and the MapWriter.\r\n\r\nThen, I want to have a Java method which should create and persist a node. \r\n\r\n    public void createNode(String nodeName) {\r\n      Node node = new Node();\r\n      node.setName(nodeName);\r\n    \r\n      // how can I put elements in the rmap since, \r\n      // the PK will be available after the INSERT statement will run?\r\n      rmap.put(?, node);\r\n    }\r\n\r\nAnd here comes the problem. Since the PK is auto-generated from Postgres, how can I use the RMapWriter to insert a node, since, for putting elements in the RMap I need the key, which I don&#39;t have until the insert statement will run?\r\n\r\n\r\n \r\n\r\n","title":"How can I use Redisson Write-through caching strategy with an auto-generated PK","body":"<p>I am planning to use Redis with Redisson as a caching layer between my Java app and a PostgreSQL DB. \nI have a table called Nodes looking like this:</p>\n\n<pre><code>CREATE TABLE nodes\n(\nnode_id bigint GENERATED BY DEFAULT AS IDENTITY(START WITH 1 INCREMENT BY 1),\nnode_name varchar(100) NOT NULL,\nPRIMARY KEY (node_id)\n)\n</code></pre>\n\n<p>I want to use <a href=\"https://github.com/redisson/redisson/wiki/7.-Distributed-collections#712-map-persistence\" rel=\"nofollow noreferrer\">Redisson RMap persistence</a> to cache this structure. \nMy goal is to have an rmap looking like this:</p>\n\n<pre><code>Rmap&lt;Integer, Node&gt; \n</code></pre>\n\n<p>where the key is the PK, and the value is the node itself.</p>\n\n<p>I want to use read-through and write-trhough strategies for caching this Rmap, by using the MapLoader and the MapWriter.</p>\n\n<p>Then, I want to have a Java method which should create and persist a node. </p>\n\n<pre><code>public void createNode(String nodeName) {\n  Node node = new Node();\n  node.setName(nodeName);\n\n  // how can I put elements in the rmap since, \n  // the PK will be available after the INSERT statement will run?\n  rmap.put(?, node);\n}\n</code></pre>\n\n<p>And here comes the problem. Since the PK is auto-generated from Postgres, how can I use the RMapWriter to insert a node, since, for putting elements in the RMap I need the key, which I don't have until the insert statement will run?</p>\n"},{"tags":["java","spring","spring-mvc","spring-test"],"answers":[{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656492565,"creation_date":1656492565,"answer_id":72798472,"question_id":72798212,"body_markdown":"Based on your question description it looks like your coverage scan is ignoring `test/java/controller` package. \r\n\r\nIf it is so, can you please check if that is the case. \r\n\r\n\r\nFor calling `Service`, you can either use it with `@Autowired` or even create instance of your service using constructor, builder  or whatever pattern available to you inside your test method.\r\n\r\nMoreover, ideally you should have separate test class for service &amp; test all operations there &amp; in your controller test class you need to use mock/ spy of service so that controller can just mock service methods &amp; test its operations.\r\n\r\n","title":"Inject Instance of Service in WebMvcTest","body":"<p>Based on your question description it looks like your coverage scan is ignoring <code>test/java/controller</code> package.</p>\n<p>If it is so, can you please check if that is the case.</p>\n<p>For calling <code>Service</code>, you can either use it with <code>@Autowired</code> or even create instance of your service using constructor, builder  or whatever pattern available to you inside your test method.</p>\n<p>Moreover, ideally you should have separate test class for service &amp; test all operations there &amp; in your controller test class you need to use mock/ spy of service so that controller can just mock service methods &amp; test its operations.</p>\n"},{"tags":[],"owner":{"account_id":23972504,"reputation":340,"user_id":17961007,"display_name":"Ashwini Karnale"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1656501523,"creation_date":1656501523,"answer_id":72800502,"question_id":72798212,"body_markdown":"A regular implementation of MyService and inject it to MyController can be achieved by `@Autowired` annotation as follows\r\n\r\n    @Autowired \r\n    private MyService myService;\r\n\r\n`@MockBean` should be used at the time of mocking the repositories or service. If you dont want to mock a service you can go ahead with `@Autowired`","title":"Inject Instance of Service in WebMvcTest","body":"<p>A regular implementation of MyService and inject it to MyController can be achieved by <code>@Autowired</code> annotation as follows</p>\n<pre><code>@Autowired \nprivate MyService myService;\n</code></pre>\n<p><code>@MockBean</code> should be used at the time of mocking the repositories or service. If you dont want to mock a service you can go ahead with <code>@Autowired</code></p>\n"}],"owner":{"account_id":3440248,"reputation":624,"user_id":2882376,"display_name":"Ranielle Canlas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72798472,"answer_count":2,"score":1,"last_activity_date":1656501523,"creation_date":1656491484,"question_id":72798212,"body_markdown":"I have a test for MyController.java\r\n\r\n    @WebMvcTest(controllers = MyController.class)\r\n    class MyControllerTest {\r\n      @Autowired \r\n      private MockMvc mockMvc;\r\n      @MockBean \r\n      private SomeService service; //dependency of MyService\r\n      @SpyBean \r\n      private MyService myService; //used in MyController\r\n      @Test\r\n      void testMyControllerCall() {\r\n        //someTest\r\n      }\r\n    }\r\n\r\n\r\nIf I annotate MyService with @SpyBean, it will call the real service and inject the bean in MyController, but my problem is that when I run coverage for MyControllerTest, it will not mark MyService as covered with tests, so I want a regular (Not mock or spy) implementation of MyService and inject it to MyController in the test class, but I don&#39;t know how. \r\n\r\nIf I put MyControllerTest outside test/java/controller package, it will mark MyService with coverage, but I don&#39;t want that fix as I want MyControllerTest to be in that package to be organized. \r\n\r\nMy folder structure is like this, \r\n\r\n    &gt; main/java\r\n    &gt; --/controller\r\n    &gt; ----/MyController.java\r\n    &gt; --/service\r\n    &gt; ----/MyService.java \r\n    &gt; test/java\r\n    &gt; --/controller\r\n    &gt; ----/MyControllerTest.java","title":"Inject Instance of Service in WebMvcTest","body":"<p>I have a test for MyController.java</p>\n<pre><code>@WebMvcTest(controllers = MyController.class)\nclass MyControllerTest {\n  @Autowired \n  private MockMvc mockMvc;\n  @MockBean \n  private SomeService service; //dependency of MyService\n  @SpyBean \n  private MyService myService; //used in MyController\n  @Test\n  void testMyControllerCall() {\n    //someTest\n  }\n}\n</code></pre>\n<p>If I annotate MyService with @SpyBean, it will call the real service and inject the bean in MyController, but my problem is that when I run coverage for MyControllerTest, it will not mark MyService as covered with tests, so I want a regular (Not mock or spy) implementation of MyService and inject it to MyController in the test class, but I don't know how.</p>\n<p>If I put MyControllerTest outside test/java/controller package, it will mark MyService with coverage, but I don't want that fix as I want MyControllerTest to be in that package to be organized.</p>\n<p>My folder structure is like this,</p>\n<pre><code>&gt; main/java\n&gt; --/controller\n&gt; ----/MyController.java\n&gt; --/service\n&gt; ----/MyService.java \n&gt; test/java\n&gt; --/controller\n&gt; ----/MyControllerTest.java\n</code></pre>\n"},{"tags":["java","encryption","jmeter"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656485603,"creation_date":1656485603,"answer_id":72796964,"question_id":72796711,"body_markdown":"`Encountered &quot;}&quot;` is a syntax error so double check your Beanshell script for eventual missing semicolons or closing brackets or whatever. You can use online lint tool like [this one][1] to see where exactly the problem is\r\n\r\nIn general I cannot reproduce your issue:\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nSo it&#39;s either a copy-paste issue or a Beanshell-related problem, be aware that [starting from JMeter 3.1 you&#39;re supposed to use JSR223 Test Elements and Groovy language for scripting][3], especially for &quot;heavy&quot; tasks like cryptographic operations. \r\n\r\n\r\n  [1]: https://tio.run/#beanshell\r\n  [2]: https://i.stack.imgur.com/1EYxK.png\r\n  [3]: https://www.blazemeter.com/blog/is-beanshell-dead","title":"Problem with encryption/Decryption code written in Jmeter","body":"<p><code>Encountered &quot;}&quot;</code> is a syntax error so double check your Beanshell script for eventual missing semicolons or closing brackets or whatever. You can use online lint tool like <a href=\"https://tio.run/#beanshell\" rel=\"nofollow noreferrer\">this one</a> to see where exactly the problem is</p>\n<p>In general I cannot reproduce your issue:</p>\n<p><a href=\"https://i.stack.imgur.com/1EYxK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1EYxK.png\" alt=\"enter image description here\" /></a></p>\n<p>So it's either a copy-paste issue or a Beanshell-related problem, be aware that <a href=\"https://www.blazemeter.com/blog/is-beanshell-dead\" rel=\"nofollow noreferrer\">starting from JMeter 3.1 you're supposed to use JSR223 Test Elements and Groovy language for scripting</a>, especially for &quot;heavy&quot; tasks like cryptographic operations.</p>\n"}],"owner":{"account_id":19335988,"reputation":35,"user_id":14136575,"display_name":"Bhavya Dutta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":786,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72796964,"answer_count":1,"score":0,"last_activity_date":1656501357,"creation_date":1656484187,"question_id":72796711,"body_markdown":"I have written a code in beanshell for encryption and decryption in Jmeter but somehow its not working. I am getting error :  `In file: inline evaluation of: ``import java.security.InvalidAlgorithmParameterException; import java.security.In . . . &#39;&#39; Encountered &quot;}&quot;` at line 19, column 82.\r\nI have added the crypto jar in test plan but issue persists.\r\n\r\nAttached is the code.\r\n\r\nWorking : \r\n\r\n1. I am generating a random string(R1) and encryption it with a public key using RSA algo.\r\n2. Using the key R1, I need to encrypt the request body using AES algo, CBC mode, PKCS7Padding.\r\n```\r\n        package com.sample.feedbackrating;\r\n        import java.security.InvalidAlgorithmParameterException;\r\n        import java.security.InvalidKeyException;\r\n        import java.security.NoSuchAlgorithmException;\r\n        import java.security.SecureRandom;\r\n        import java.util.Base64;\r\n        import java.util.UUID;\r\n        import javax.crypto.BadPaddingException;\r\n        import javax.crypto.Cipher;\r\n        import javax.crypto.IllegalBlockSizeException;\r\n        import javax.crypto.NoSuchPaddingException;\r\n        import javax.crypto.spec.IvParameterSpec;\r\n        import javax.crypto.spec.SecretKeySpec;\r\n\r\n    public class Crypto {\r\n    \r\n\r\n        public static IvParameterSpec generateIv() {\r\n        byte[] iv = new byte[16];\r\n        return new IvParameterSpec(iv);\r\n    }\r\n\r\n        public static String encrypt(String algorithm, String input, String secretKey, IvParameterSpec iv) throws NoSuchPaddingException, NoSuchAlgorithmException, InvalidAlgorithmParameterException, InvalidKeyException, BadPaddingException, IllegalBlockSizeException\r\n\r\n    {\r\n    Cipher cipher = Cipher.getInstance(algorithm);\r\n    cipher.init(Cipher.ENCRYPT_MODE, new \r\n    SecretKeySpec(secretKey.getBytes(), &quot;AES&quot;), iv);\r\n    byte[] cipherText = cipher.doFinal(input.getBytes());\r\n    return Base64.getEncoder().encodeToString(cipherText);\r\n    }\r\n    \r\n    public static String decrypt(String algorithm, String cipherText, String secretKey, IvParameterSpec iv) throws NoSuchPaddingException, NoSuchAlgorithmException,InvalidAlgorithmParameterException, InvalidKeyException,BadPaddingException, IllegalBlockSizeException\r\n\r\n    {\r\n    Cipher cipher = Cipher.getInstance(algorithm);\r\n    cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(secretKey.getBytes(), &quot;AES&quot;), iv);\r\n    byte[] plainText = cipher.doFinal(Base64.getDecoder().decode(cipherText));\r\n    return new String(plainText);\r\n}\r\n\r\n        public static String generateSecretKey() {\r\n            return UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;);\r\n        }\r\n\r\n    }\r\n\r\n```","title":"Problem with encryption/Decryption code written in Jmeter","body":"<p>I have written a code in beanshell for encryption and decryption in Jmeter but somehow its not working. I am getting error :  <code>In file: inline evaluation of: ``import java.security.InvalidAlgorithmParameterException; import java.security.In . . . '' Encountered &quot;}&quot;</code> at line 19, column 82.\nI have added the crypto jar in test plan but issue persists.</p>\n<p>Attached is the code.</p>\n<p>Working :</p>\n<ol>\n<li>I am generating a random string(R1) and encryption it with a public key using RSA algo.</li>\n<li>Using the key R1, I need to encrypt the request body using AES algo, CBC mode, PKCS7Padding.</li>\n</ol>\n<pre><code>        package com.sample.feedbackrating;\n        import java.security.InvalidAlgorithmParameterException;\n        import java.security.InvalidKeyException;\n        import java.security.NoSuchAlgorithmException;\n        import java.security.SecureRandom;\n        import java.util.Base64;\n        import java.util.UUID;\n        import javax.crypto.BadPaddingException;\n        import javax.crypto.Cipher;\n        import javax.crypto.IllegalBlockSizeException;\n        import javax.crypto.NoSuchPaddingException;\n        import javax.crypto.spec.IvParameterSpec;\n        import javax.crypto.spec.SecretKeySpec;\n\n    public class Crypto {\n    \n\n        public static IvParameterSpec generateIv() {\n        byte[] iv = new byte[16];\n        return new IvParameterSpec(iv);\n    }\n\n        public static String encrypt(String algorithm, String input, String secretKey, IvParameterSpec iv) throws NoSuchPaddingException, NoSuchAlgorithmException, InvalidAlgorithmParameterException, InvalidKeyException, BadPaddingException, IllegalBlockSizeException\n\n    {\n    Cipher cipher = Cipher.getInstance(algorithm);\n    cipher.init(Cipher.ENCRYPT_MODE, new \n    SecretKeySpec(secretKey.getBytes(), &quot;AES&quot;), iv);\n    byte[] cipherText = cipher.doFinal(input.getBytes());\n    return Base64.getEncoder().encodeToString(cipherText);\n    }\n    \n    public static String decrypt(String algorithm, String cipherText, String secretKey, IvParameterSpec iv) throws NoSuchPaddingException, NoSuchAlgorithmException,InvalidAlgorithmParameterException, InvalidKeyException,BadPaddingException, IllegalBlockSizeException\n\n    {\n    Cipher cipher = Cipher.getInstance(algorithm);\n    cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(secretKey.getBytes(), &quot;AES&quot;), iv);\n    byte[] plainText = cipher.doFinal(Base64.getDecoder().decode(cipherText));\n    return new String(plainText);\n}\n\n        public static String generateSecretKey() {\n            return UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;);\n        }\n\n    }\n\n</code></pre>\n"},{"tags":["java","ssl","apache-kafka"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1656475315,"post_id":72788842,"comment_id":128578717,"body_markdown":"The signature algorithm of the certificate does not appear in the certificate request, so it would have been illegal for the client to supply that certificate, so it didn&#39;t.","body":"The signature algorithm of the certificate does not appear in the certificate request, so it would have been illegal for the client to supply that certificate, so it didn&#39;t."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1656483145,"post_id":72788842,"comment_id":128580230,"body_markdown":"@user207421 incorrect; `rsa_pkcs1_sha256` is listed and is the TLS name for SHA256withRSA. OP: does cert have KeyUsage and/or ExtendedKeyUsage extensions? If so they should respectively include digitalSignature and clientAuth. Did your javax.net.debug setting include keymanager, and if so does the log include (probably well before this connection) `found key for : {youralias} (` followed by your cert chain?","body":"@user207421 incorrect; <code>rsa_pkcs1_sha256</code> is listed and is the TLS name for SHA256withRSA. OP: does cert have KeyUsage and/or ExtendedKeyUsage extensions? If so they should respectively include digitalSignature and clientAuth. Did your javax.net.debug setting include keymanager, and if so does the log include (probably well before this connection) <code>found key for : {youralias} (</code> followed by your cert chain?"},{"owner":{"account_id":18147071,"reputation":1,"user_id":13200297,"display_name":"pimbelien"},"score":0,"creation_date":1656488331,"post_id":72788842,"comment_id":128581922,"body_markdown":"@Dave \nYup, KeyUsage has DigitalSignature and ExtendedKeyAlias has clientAuth.\nIll check if the keymanager is included, didnt look for that yet, thnx","body":"@Dave  Yup, KeyUsage has DigitalSignature and ExtendedKeyAlias has clientAuth. Ill check if the keymanager is included, didnt look for that yet, thnx"},{"owner":{"account_id":18147071,"reputation":1,"user_id":13200297,"display_name":"pimbelien"},"score":0,"creation_date":1656495681,"post_id":72788842,"comment_id":128584707,"body_markdown":"@dave_thompson_085 Switched on all debug logs, unfortunately the log does not include any `found key for :`","body":"@dave_thompson_085 Switched on all debug logs, unfortunately the log does not include any <code>found key for :</code>"}],"answers":[{"tags":[],"owner":{"account_id":14655333,"reputation":600,"user_id":10584061,"display_name":"ChristDist"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1656476344,"creation_date":1656466004,"answer_id":72794791,"question_id":72788842,"body_markdown":"Try to remove the key-store type parameter and alter your parameters something similar to\r\n\r\n    kafka.security.protocol=SSL\r\n    kafka.ssl.truststore.location=dir/xxxxx.jks\r\n    kafka.ssl.truststore.password=Password\r\n    kafka.ssl.keystore.location=dir/xxxxx.jks\r\n    kafka.ssl.keystore.password=Password\r\n    kafka.ssl.key.password=Password\r\n    kafka.ssl.enabled=true\r\n\r\nAlso, make sure your KAFKA Server is running on SSL.\r\n\r\nOnce you start the broker you should be able to see something like this in the server.log with addresses: PLAINTEXT -&gt; EndPoint(192.168.64.1,9092,PLAINTEXT),SSL -&gt; EndPoint(192.168.64.1,9093,SSL)\r\n\r\n- To check quickly if the server keystore and truststore are setup properly you can run the following command\r\n\r\n    openssl s_client -debug -connect localhost:9093 -tls1","title":"Spring Kafka Handshake Failure No X.509 certificate for client authentication, but there is one in my keystore","body":"<p>Try to remove the key-store type parameter and alter your parameters something similar to</p>\n<pre><code>kafka.security.protocol=SSL\nkafka.ssl.truststore.location=dir/xxxxx.jks\nkafka.ssl.truststore.password=Password\nkafka.ssl.keystore.location=dir/xxxxx.jks\nkafka.ssl.keystore.password=Password\nkafka.ssl.key.password=Password\nkafka.ssl.enabled=true\n</code></pre>\n<p>Also, make sure your KAFKA Server is running on SSL.</p>\n<p>Once you start the broker you should be able to see something like this in the server.log with addresses: PLAINTEXT -&gt; EndPoint(192.168.64.1,9092,PLAINTEXT),SSL -&gt; EndPoint(192.168.64.1,9093,SSL)</p>\n<ul>\n<li><p>To check quickly if the server keystore and truststore are setup properly you can run the following command</p>\n<p>openssl s_client -debug -connect localhost:9093 -tls1</p>\n</li>\n</ul>\n"}],"owner":{"account_id":18147071,"reputation":1,"user_id":13200297,"display_name":"pimbelien"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":716,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656501007,"creation_date":1656428461,"question_id":72788842,"body_markdown":"I have a situation that I can&#39;t figure out. \r\nIm running in a Springboot app in K8s and trying to consumer from a kafka topic using Spring Kafka within my company and I have to use SSL authentication.\r\n\r\nI have mounted my trust &amp; keystores in the pod and when I use keytool I can see the full chain of certificates in there:\r\n\r\n    Alias name: 4f6b4855-0f06-4202-8531-cf0c8fbc6611\r\n    Creation date: Jun 28, 2022\r\n    Entry type: PrivateKeyEntry\r\n    Certificate chain length: 2\r\n    Certificate[1]:\r\n    Owner: C=xx, O=xxxx, CN=xxxxxx\r\n    Issuer: C=xx, L=xxx, O=xxxxxxxx, OU=xxxxxx, CN=xxxxxxx\r\n    Serial number: 7fbee1f1fb4c0721\r\n    Valid from: Thu Jun 23 08:34:51 GMT 2022 until: Fri Jun 23 08:34:51 GMT 2023\r\n    Certificate fingerprints:\r\n             SHA1: 6A:27:FF:57:2B:5B:16:97:CA:7C:3B:CE:9D:E3:43:AF:B9:66:EC:AB\r\n             SHA256: AD:96:34:4E:BD:BE:83:B8:5D:09:84:63:55:F0:E6:8A:15:CF:7A:35:6C:36:77:BF:FE:8B:68:A0:BE:61:7E:6B\r\n    Signature algorithm name: SHA256withRSA\r\n    Subject Public Key Algorithm: 2048-bit RSA key\r\n    Version: 3\r\n    ......\r\n\r\nMy properties (yes its a PKCS12 keystore, but a jks extention)\r\n\r\n    spring.kafka.ssl.trust-store-location=file:/mnt/ssl/truststore.jks\r\n    spring.kafka.ssl.trust-store-password=changeit\r\n    spring.kafka.ssl.trust-store-type=PKCS12\r\n    spring.kafka.ssl.key-store-location=file:/mnt/ssl/keystore.jks\r\n    spring.kafka.ssl.key-store-password=changeit\r\n    spring.kafka.ssl.key-store-type=PKCS12\r\n\r\nWhen my consumer starts however I get a handshake exception and from the look of it its because it cannot provide the client certificate. Heres the certificate request ( above certificate is signed with the same CA as mentioned in the request)\r\n\r\n    javax.net.ssl|DEBUG|23|org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1|2022-06-28 16:34:01.595 CEST|CertificateRequest.java:692|Consuming CertificateRequest handshake message (\r\n    &quot;CertificateRequest&quot;: {\r\n      &quot;certificate types&quot;: [ecdsa_sign, rsa_sign, dss_sign]\r\n      &quot;supported signature algorithms&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\r\n      &quot;certificate authorities&quot;: [C=xxxx, L=xxxxxx, O=xxxxxxx, OU=Axxxxx, CN=xxxxxx]\r\n    }\r\n\r\nYet this the output\r\n\r\n    javax.net.ssl|ALL|23|org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1|2022-06-29 12:14:54.831 CEST|X509Authentication.java:246|No X.509 cert selected for RSA\r\n    javax.net.ssl|WARNING|23|org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1|2022-06-29 12:14:54.831 CEST|CertificateRequest.java:809|Unavailable authentication scheme: rsa_pkcs1_sha256\r\n    \r\n    .............\r\n    \r\n        javax.net.ssl|DEBUG|23|org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1|2022-06-28 16:34:01.618 CEST|CertificateMessage.java:299|No X.509 certificate for client authentication, use empty Certificate message instead\r\n        javax.net.ssl|DEBUG|23|org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1|2022-06-28 16:34:01.619 CEST|CertificateMessage.java:330|Produced client Certificate handshake message (\r\n        &quot;Certificates&quot;: &lt;empty list&gt;\r\n        )\r\n\r\nI have to be missing something about here that is not ok in the certificate but I can&#39;t figure out what. If anyone has any clue, I would love to hear it\r\n","title":"Spring Kafka Handshake Failure No X.509 certificate for client authentication, but there is one in my keystore","body":"<p>I have a situation that I can't figure out.\nIm running in a Springboot app in K8s and trying to consumer from a kafka topic using Spring Kafka within my company and I have to use SSL authentication.</p>\n<p>I have mounted my trust &amp; keystores in the pod and when I use keytool I can see the full chain of certificates in there:</p>\n<pre><code>Alias name: 4f6b4855-0f06-4202-8531-cf0c8fbc6611\nCreation date: Jun 28, 2022\nEntry type: PrivateKeyEntry\nCertificate chain length: 2\nCertificate[1]:\nOwner: C=xx, O=xxxx, CN=xxxxxx\nIssuer: C=xx, L=xxx, O=xxxxxxxx, OU=xxxxxx, CN=xxxxxxx\nSerial number: 7fbee1f1fb4c0721\nValid from: Thu Jun 23 08:34:51 GMT 2022 until: Fri Jun 23 08:34:51 GMT 2023\nCertificate fingerprints:\n         SHA1: 6A:27:FF:57:2B:5B:16:97:CA:7C:3B:CE:9D:E3:43:AF:B9:66:EC:AB\n         SHA256: AD:96:34:4E:BD:BE:83:B8:5D:09:84:63:55:F0:E6:8A:15:CF:7A:35:6C:36:77:BF:FE:8B:68:A0:BE:61:7E:6B\nSignature algorithm name: SHA256withRSA\nSubject Public Key Algorithm: 2048-bit RSA key\nVersion: 3\n......\n</code></pre>\n<p>My properties (yes its a PKCS12 keystore, but a jks extention)</p>\n<pre><code>spring.kafka.ssl.trust-store-location=file:/mnt/ssl/truststore.jks\nspring.kafka.ssl.trust-store-password=changeit\nspring.kafka.ssl.trust-store-type=PKCS12\nspring.kafka.ssl.key-store-location=file:/mnt/ssl/keystore.jks\nspring.kafka.ssl.key-store-password=changeit\nspring.kafka.ssl.key-store-type=PKCS12\n</code></pre>\n<p>When my consumer starts however I get a handshake exception and from the look of it its because it cannot provide the client certificate. Heres the certificate request ( above certificate is signed with the same CA as mentioned in the request)</p>\n<pre><code>javax.net.ssl|DEBUG|23|org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1|2022-06-28 16:34:01.595 CEST|CertificateRequest.java:692|Consuming CertificateRequest handshake message (\n&quot;CertificateRequest&quot;: {\n  &quot;certificate types&quot;: [ecdsa_sign, rsa_sign, dss_sign]\n  &quot;supported signature algorithms&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\n  &quot;certificate authorities&quot;: [C=xxxx, L=xxxxxx, O=xxxxxxx, OU=Axxxxx, CN=xxxxxx]\n}\n</code></pre>\n<p>Yet this the output</p>\n<pre><code>javax.net.ssl|ALL|23|org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1|2022-06-29 12:14:54.831 CEST|X509Authentication.java:246|No X.509 cert selected for RSA\njavax.net.ssl|WARNING|23|org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1|2022-06-29 12:14:54.831 CEST|CertificateRequest.java:809|Unavailable authentication scheme: rsa_pkcs1_sha256\n\n.............\n\n    javax.net.ssl|DEBUG|23|org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1|2022-06-28 16:34:01.618 CEST|CertificateMessage.java:299|No X.509 certificate for client authentication, use empty Certificate message instead\n    javax.net.ssl|DEBUG|23|org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1|2022-06-28 16:34:01.619 CEST|CertificateMessage.java:330|Produced client Certificate handshake message (\n    &quot;Certificates&quot;: &lt;empty list&gt;\n    )\n</code></pre>\n<p>I have to be missing something about here that is not ok in the certificate but I can't figure out what. If anyone has any clue, I would love to hear it</p>\n"},{"tags":["java","spring","spring-boot","tomcat"],"comments":[{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":0,"creation_date":1656500738,"post_id":72800291,"comment_id":128586709,"body_markdown":"Is that the entire stack trace? Are there no other errors that are causing the one you posted?","body":"Is that the entire stack trace? Are there no other errors that are causing the one you posted?"},{"owner":{"account_id":4627362,"reputation":2106,"user_id":6379197,"accept_rate":43,"display_name":"Christopher Marlowe"},"score":0,"creation_date":1656500961,"post_id":72800291,"comment_id":128586805,"body_markdown":"I have updated my post and  included the catalina.log","body":"I have updated my post and  included the catalina.log"},{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":1,"creation_date":1656501187,"post_id":72800291,"comment_id":128586911,"body_markdown":"The actual problem is `IO Error: The Network Adapter could not establish the connection`. Check your database configuration and how you&#39;re trying to connect. Your program is not able to connect to your database for some reason, and the details you have provided are insufficient to determine that reason.","body":"The actual problem is <code>IO Error: The Network Adapter could not establish the connection</code>. Check your database configuration and how you&#39;re trying to connect. Your program is not able to connect to your database for some reason, and the details you have provided are insufficient to determine that reason."}],"owner":{"account_id":4627362,"reputation":2106,"user_id":6379197,"accept_rate":43,"display_name":"Christopher Marlowe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656500935,"creation_date":1656500562,"question_id":72800291,"body_markdown":"I am following [this tutorial ][1] to deploy the Spring boot application to external tomcat. My java version is 1.8 and the tomcat server version is 8.5.  I have deployed my Spring boot application in tomcat but in tomcat-manager app, I can see that my application has not started and I am getting HTTP Status 404  Not Found page. \r\n Screenshot is giving below: \r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\nWhen I have tried to start my Spring boot application, I am getting the following error:\r\n\r\n    FAIL - Application at context path [/e-swift-api] could not be started\r\n    FAIL - Encountered exception [org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/e-swift-api]]]\r\n\r\nWhat should I do? \r\n\r\nUpdate: \r\nWHen I am checking catalina.log, I am getting following error: \r\n\r\n    29-Jun-2022 16:53:14.931 SEVERE [localhost-startStop-5] org.apache.catalina.core.ContainerBase.addChildInternal ContainerBase.addChild: start: \r\n    \torg.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/e-swift-api]]\r\n    \t\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:753)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:727)\r\n    \t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:695)\r\n    \t\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1016)\r\n    \t\tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1903)\r\n    \t\tat java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\r\n    \t\tat java.util.concurrent.FutureTask.run(Unknown Source)\r\n    \t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \t\tat java.lang.Thread.run(Unknown Source)\r\n    \tCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;jdbcConverter&#39; defined in class path resource [org/springframework/boot/autoconfigure/data/jdbc/JdbcRepositoriesAutoConfiguration$SpringBootJdbcConfiguration.class]: Unsatisfied dependency expressed through method &#39;jdbcConverter&#39; parameter 4; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jdbcDialect&#39; defined in class path resource [org/springframework/boot/autoconfigure/data/jdbc/JdbcRepositoriesAutoConfiguration$SpringBootJdbcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.relational.core.dialect.Dialect]: Factory method &#39;jdbcDialect&#39; threw exception; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection\r\n    \t\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\r\n    \t\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1334)\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177)\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:564)\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524)\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944)\r\n    \t\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n    \t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n    \t\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\r\n    \t\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)\r\n    \t\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434)\r\n    \t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:338)\r\n    \t\tat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\r\n    \t\tat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\r\n    \t\tat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\r\n    \t\tat org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\r\n    \t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5221)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\t... 10 more\r\n    \tCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jdbcDialect&#39; defined in class path resource [org/springframework/boot/autoconfigure/data/jdbc/JdbcRepositoriesAutoConfiguration$SpringBootJdbcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.relational.core.dialect.Dialect]: Factory method &#39;jdbcDialect&#39; threw exception; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection\r\n    \t\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\r\n    \t\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1334)\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177)\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:564)\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524)\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \t\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n    \t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380)\r\n    \t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1300)\r\n    \t\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\r\n    \t\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n    \t\t... 32 more\r\n    \tCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.relational.core.dialect.Dialect]: Factory method &#39;jdbcDialect&#39; threw exception; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection\r\n    \t\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n    \t\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n    \t\t... 46 more\r\n    \tCaused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection\r\n    \t\tat org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:82)\r\n    \t\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:330)\r\n    \t\tat org.springframework.data.jdbc.repository.config.DialectResolver$DefaultDialectProvider.getDialect(DialectResolver.java:107)\r\n    \t\tat org.springframework.data.jdbc.repository.config.DialectResolver.lambda$getDialect$0(DialectResolver.java:77)\r\n    \t\tat java.util.stream.ReferencePipeline$3$1.accept(Unknown Source)\r\n    \t\tat java.util.ArrayList$ArrayListSpliterator.tryAdvance(Unknown Source)\r\n    \t\tat java.util.stream.ReferencePipeline.forEachWithCancel(Unknown Source)\r\n    \t\tat java.util.stream.AbstractPipeline.copyIntoWithCancel(Unknown Source)\r\n    \t\tat java.util.stream.AbstractPipeline.copyInto(Unknown Source)\r\n    \t\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\r\n    \t\tat java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)\r\n    \t\tat java.util.stream.AbstractPipeline.evaluate(Unknown Source)\r\n    \t\tat java.util.stream.ReferencePipeline.findFirst(Unknown Source)\r\n    \t\tat org.springframework.data.jdbc.repository.config.DialectResolver.getDialect(DialectResolver.java:79)\r\n    \t\tat org.springframework.data.jdbc.repository.config.AbstractJdbcConfiguration.jdbcDialect(AbstractJdbcConfiguration.java:144)\r\n    \t\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \t\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \t\tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \t\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n    \t\t... 47 more\r\n    \tCaused by: java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection\r\n    \t\tat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:774)\r\n    \t\tat oracle.jdbc.driver.PhysicalConnection.connect(PhysicalConnection.java:688)\r\n    \t\tat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:39)\r\n    \t\tat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:691)\r\n    \t\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\r\n    \t\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)\r\n    \t\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)\r\n    \t\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)\r\n    \t\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)\r\n    \t\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115)\r\n    \t\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)\r\n    \t\tat org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:158)\r\n    \t\tat org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:116)\r\n    \t\tat org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:79)\r\n    \t\t... 66 more\r\n    \tCaused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection\r\n    \t\tat oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:523)\r\n    \t\tat oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:521)\r\n    \t\tat oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:660)\r\n    \t\tat oracle.net.ns.NSProtocol.connect(NSProtocol.java:286)\r\n    \t\tat oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1438)\r\n    \t\tat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:518)\r\n    \t\t... 79 more\r\n    \tCaused by: java.io.IOException: Connection timed out: connect, socket connect lapse 21047 ms. /192.183.155.127 1521 30000 1 true\r\n    \t\tat oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:209)\r\n    \t\tat oracle.net.nt.ConnOption.connect(ConnOption.java:161)\r\n    \t\tat oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:470)\r\n    \t\t... 84 more\r\n    \tCaused by: java.net.ConnectException: Connection timed out: connect\r\n    \t\tat sun.nio.ch.Net.connect0(Native Method)\r\n    \t\tat sun.nio.ch.Net.connect(Unknown Source)\r\n    \t\tat sun.nio.ch.Net.connect(Unknown Source)\r\n    \t\tat sun.nio.ch.SocketChannelImpl.connect(Unknown Source)\r\n    \t\tat java.nio.channels.SocketChannel.open(Unknown Source)\r\n    \t\tat oracle.net.nt.TimeoutSocketChannel.&lt;init&gt;(TimeoutSocketChannel.java:81)\r\n    \t\tat oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:169)\r\n    \t\t... 86 more\r\n\r\n \r\n\r\n\r\n  [1]: https://codezup.com/deploy-spring-boot-war-to-external-tomcat/\r\n  [2]: https://i.stack.imgur.com/NAMu2.png\r\n  [3]: https://i.stack.imgur.com/gtkGJ.png\r\n","title":"Spring Boot deployed in external tomcat gives 404 error","body":"<p>I am following <a href=\"https://codezup.com/deploy-spring-boot-war-to-external-tomcat/\" rel=\"nofollow noreferrer\">this tutorial </a> to deploy the Spring boot application to external tomcat. My java version is 1.8 and the tomcat server version is 8.5.  I have deployed my Spring boot application in tomcat but in tomcat-manager app, I can see that my application has not started and I am getting HTTP Status 404  Not Found page.\nScreenshot is giving below:\n<a href=\"https://i.stack.imgur.com/NAMu2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NAMu2.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/gtkGJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gtkGJ.png\" alt=\"enter image description here\" /></a>\nWhen I have tried to start my Spring boot application, I am getting the following error:</p>\n<pre><code>FAIL - Application at context path [/e-swift-api] could not be started\nFAIL - Encountered exception [org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/e-swift-api]]]\n</code></pre>\n<p>What should I do?</p>\n<p>Update:\nWHen I am checking catalina.log, I am getting following error:</p>\n<pre><code>29-Jun-2022 16:53:14.931 SEVERE [localhost-startStop-5] org.apache.catalina.core.ContainerBase.addChildInternal ContainerBase.addChild: start: \n    org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/e-swift-api]]\n        at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:753)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:727)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:695)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1016)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1903)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\n        at java.util.concurrent.FutureTask.run(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jdbcConverter' defined in class path resource [org/springframework/boot/autoconfigure/data/jdbc/JdbcRepositoriesAutoConfiguration$SpringBootJdbcConfiguration.class]: Unsatisfied dependency expressed through method 'jdbcConverter' parameter 4; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jdbcDialect' defined in class path resource [org/springframework/boot/autoconfigure/data/jdbc/JdbcRepositoriesAutoConfiguration$SpringBootJdbcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.relational.core.dialect.Dialect]: Factory method 'jdbcDialect' threw exception; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1334)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:564)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944)\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:338)\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\n        at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5221)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        ... 10 more\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jdbcDialect' defined in class path resource [org/springframework/boot/autoconfigure/data/jdbc/JdbcRepositoriesAutoConfiguration$SpringBootJdbcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.relational.core.dialect.Dialect]: Factory method 'jdbcDialect' threw exception; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1334)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:564)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1300)\n        at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n        ... 32 more\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.relational.core.dialect.Dialect]: Factory method 'jdbcDialect' threw exception; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n        ... 46 more\n    Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection\n        at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:82)\n        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:330)\n        at org.springframework.data.jdbc.repository.config.DialectResolver$DefaultDialectProvider.getDialect(DialectResolver.java:107)\n        at org.springframework.data.jdbc.repository.config.DialectResolver.lambda$getDialect$0(DialectResolver.java:77)\n        at java.util.stream.ReferencePipeline$3$1.accept(Unknown Source)\n        at java.util.ArrayList$ArrayListSpliterator.tryAdvance(Unknown Source)\n        at java.util.stream.ReferencePipeline.forEachWithCancel(Unknown Source)\n        at java.util.stream.AbstractPipeline.copyIntoWithCancel(Unknown Source)\n        at java.util.stream.AbstractPipeline.copyInto(Unknown Source)\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\n        at java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)\n        at java.util.stream.AbstractPipeline.evaluate(Unknown Source)\n        at java.util.stream.ReferencePipeline.findFirst(Unknown Source)\n        at org.springframework.data.jdbc.repository.config.DialectResolver.getDialect(DialectResolver.java:79)\n        at org.springframework.data.jdbc.repository.config.AbstractJdbcConfiguration.jdbcDialect(AbstractJdbcConfiguration.java:144)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n        ... 47 more\n    Caused by: java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection\n        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:774)\n        at oracle.jdbc.driver.PhysicalConnection.connect(PhysicalConnection.java:688)\n        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:39)\n        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:691)\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)\n        at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)\n        at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115)\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)\n        at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:158)\n        at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:116)\n        at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:79)\n        ... 66 more\n    Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection\n        at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:523)\n        at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:521)\n        at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:660)\n        at oracle.net.ns.NSProtocol.connect(NSProtocol.java:286)\n        at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1438)\n        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:518)\n        ... 79 more\n    Caused by: java.io.IOException: Connection timed out: connect, socket connect lapse 21047 ms. /192.183.155.127 1521 30000 1 true\n        at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:209)\n        at oracle.net.nt.ConnOption.connect(ConnOption.java:161)\n        at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:470)\n        ... 84 more\n    Caused by: java.net.ConnectException: Connection timed out: connect\n        at sun.nio.ch.Net.connect0(Native Method)\n        at sun.nio.ch.Net.connect(Unknown Source)\n        at sun.nio.ch.Net.connect(Unknown Source)\n        at sun.nio.ch.SocketChannelImpl.connect(Unknown Source)\n        at java.nio.channels.SocketChannel.open(Unknown Source)\n        at oracle.net.nt.TimeoutSocketChannel.&lt;init&gt;(TimeoutSocketChannel.java:81)\n        at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:169)\n        ... 86 more\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":5126886,"reputation":20904,"user_id":4108590,"accept_rate":57,"display_name":"Ravindra Ranwala"},"score":0,"creation_date":1584290401,"post_id":60695138,"comment_id":107385153,"body_markdown":"https://stackoverflow.com/help/minimal-reproducible-example","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656500921,"creation_date":1584290666,"answer_id":60695254,"question_id":60695138,"body_markdown":"First of all, this type of synchronization has fallen out of grace in the recent decade or more, because:\r\n\r\n- it is extremely hard to do it right\r\n- it suffers performance-wise (due to waiting)\r\n- it is untestable.\r\n\r\nUsing this approach there may always be bugs in your code, possibly leading to race conditions, and you would not know, and there is no unit test you can write to ensure that your code is free from race conditions.  The modern approach to communicating between threads is by passing ***immutable*** messages using message queues.\r\n\r\nNow, if you insist on doing it this way, `synchronize( this )` is a bad idea, because whoever holds a reference to your object can also do `synchronized( yourObject )` and then you have a deadlock.  The same holds true for `synchronized` methods, because the compiler implements them using `synchronized( this )` under the hood.  So, do not do that either. Always declare a private object to use as a lock. \r\n\r\nAlso, as you seem to already understand, a synchronization lock needs to be active for as little as possible, in order to avoid blocking other threads that might also need to acquire that lock.  So, it needs to wrap as few instructions as possible.\r\n\r\nIn the case of your code, if I understand it correctly, you need to do the following:\r\n\r\n    private final Object lock = new Object();\r\n\r\n    public void downloaded( int bytes )\r\n    {\r\n        synchronized( lock )\r\n        {\r\n            downloaded += bytes;\r\n        }\r\n    }\r\n\r\nthen further down whenever you access `downloaded` you must also do it in synchronization with `lock`, and you need to find some other way of calculating that weird `intermediateDownloaded` variable of yours based on `downloaded` only, so that it does not need to take part in the synchronization.\r\n\r\nAlternatively, you can replace `long downloaded` with `java.util.concurrent.atomic.AtomicLong downloaded` which will allow you to read it and update it much more performantly than if you use synchronization.\r\n","title":"Variable synchronization in multiple Java Threads","body":"<p>First of all, this type of synchronization has fallen out of grace in the recent decade or more, because:</p>\n<ul>\n<li>it is extremely hard to do it right</li>\n<li>it suffers performance-wise (due to waiting)</li>\n<li>it is untestable.</li>\n</ul>\n<p>Using this approach there may always be bugs in your code, possibly leading to race conditions, and you would not know, and there is no unit test you can write to ensure that your code is free from race conditions.  The modern approach to communicating between threads is by passing <em><strong>immutable</strong></em> messages using message queues.</p>\n<p>Now, if you insist on doing it this way, <code>synchronize( this )</code> is a bad idea, because whoever holds a reference to your object can also do <code>synchronized( yourObject )</code> and then you have a deadlock.  The same holds true for <code>synchronized</code> methods, because the compiler implements them using <code>synchronized( this )</code> under the hood.  So, do not do that either. Always declare a private object to use as a lock.</p>\n<p>Also, as you seem to already understand, a synchronization lock needs to be active for as little as possible, in order to avoid blocking other threads that might also need to acquire that lock.  So, it needs to wrap as few instructions as possible.</p>\n<p>In the case of your code, if I understand it correctly, you need to do the following:</p>\n<pre><code>private final Object lock = new Object();\n\npublic void downloaded( int bytes )\n{\n    synchronized( lock )\n    {\n        downloaded += bytes;\n    }\n}\n</code></pre>\n<p>then further down whenever you access <code>downloaded</code> you must also do it in synchronization with <code>lock</code>, and you need to find some other way of calculating that weird <code>intermediateDownloaded</code> variable of yours based on <code>downloaded</code> only, so that it does not need to take part in the synchronization.</p>\n<p>Alternatively, you can replace <code>long downloaded</code> with <code>java.util.concurrent.atomic.AtomicLong downloaded</code> which will allow you to read it and update it much more performantly than if you use synchronization.</p>\n"}],"owner":{"account_id":9749450,"reputation":15,"user_id":7228219,"display_name":"Rafael F N Xavier"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60695254,"answer_count":1,"score":0,"last_activity_date":1656500921,"creation_date":1584290017,"question_id":60695138,"body_markdown":"&lt;br&gt;\r\nMy question is about how to use the block ***synchronized***, my class ***FileAdapter*** has a method ***write*** that receives the ***InputStream*** of the result of an HTTP connection Im using to download a file, for every kilobyte downloaded and written to disk, it calls the ***downloaded*** method of the ***DownloadReport*** class instance that it received, for pass on what has already been downloaded.\r\n&lt;br&gt;\r\n&lt;br&gt;\r\nIn another ***Thread***, which is printing the output to the user, it calls the ***updateProgress*** method, also of the ***DownloadReport*** class, this method is responsible for updating a progress bar that is displayed to the user on the terminal.\r\n&lt;br&gt;\r\n&lt;br&gt;\r\nThe problem will be if the ***FileAdapter*** class tries to update the amount of bytes downloaded just when the output ***Thread*** tries to update the progress bar, as both methods edit the value of the variable ***intermediateDownloaded***, which works only as an auxiliary variable, to hold the amount of bytes downloaded since the last update, to calculate the download speed.\r\n&lt;br&gt;\r\n&lt;br&gt;\r\nIf I use the ***&quot;synchronized (this)&quot;*** block, within the ***downloaded*** and ***updateProgress*** methods, it will block the entire class ***DownloadReport***, and the output ***Thread*** will only be able to update the progress bar after the ***FileAdapter*** class updates the number of downloaded bytes?\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\nFileAdapter:\r\n\r\n    public void write(InputStream content, DownloadReport downloadReport) throws IOException {\r\n    \r\n        FileOutputStream output = new FileOutputStream(file);\r\n    \r\n        byte[] buffer = new byte[1024];\r\n    \r\n        int read;\r\n    \r\n        while ((read = content.read(buffer)) != -1) {\r\n            output.write(buffer, 0, read);\r\n            downloadReport.downloaded(read);\r\n        }\r\n    }\r\n\r\nDownloadReport:\r\n\r\n    public void downloaded(int bytes) {\r\n        intermediateDownloaded += bytes;\r\n        downloaded += bytes;\r\n    }\r\n    \r\n    public void updateProgress() {\r\n    \r\n        long now = System.currentTimeMillis();\r\n        double delta = UnitHelper.sizeRound(((now - lastTimeUpdate) / 1000.0), 2);\r\n    \r\n        if (delta &gt;= 1) {\r\n            unitAdapter.convertSpeed(intermediateDownloaded, delta);\r\n    \r\n            intermediateDownloaded = 0;\r\n            lastTimeUpdate = now;\r\n        }\r\n    \r\n        progressBar.updateProgress(unitAdapter.finalSize,\r\n                unitAdapter.recalculate(downloaded), unitAdapter.unity);\r\n    }\r\n\r\n","title":"Variable synchronization in multiple Java Threads","body":"<p><br>\nMy question is about how to use the block <strong><em>synchronized</em></strong>, my class <strong><em>FileAdapter</em></strong> has a method <strong><em>write</em></strong> that receives the <strong><em>InputStream</em></strong> of the result of an HTTP connection Im using to download a file, for every kilobyte downloaded and written to disk, it calls the <strong><em>downloaded</em></strong> method of the <strong><em>DownloadReport</em></strong> class instance that it received, for pass on what has already been downloaded.\n<br>\n<br>\nIn another <strong><em>Thread</em></strong>, which is printing the output to the user, it calls the <strong><em>updateProgress</em></strong> method, also of the <strong><em>DownloadReport</em></strong> class, this method is responsible for updating a progress bar that is displayed to the user on the terminal.\n<br>\n<br>\nThe problem will be if the <strong><em>FileAdapter</em></strong> class tries to update the amount of bytes downloaded just when the output <strong><em>Thread</em></strong> tries to update the progress bar, as both methods edit the value of the variable <strong><em>intermediateDownloaded</em></strong>, which works only as an auxiliary variable, to hold the amount of bytes downloaded since the last update, to calculate the download speed.\n<br>\n<br>\nIf I use the <strong><em>\"synchronized (this)\"</em></strong> block, within the <strong><em>downloaded</em></strong> and <strong><em>updateProgress</em></strong> methods, it will block the entire class <strong><em>DownloadReport</em></strong>, and the output <strong><em>Thread</em></strong> will only be able to update the progress bar after the <strong><em>FileAdapter</em></strong> class updates the number of downloaded bytes?\n<br>\n<br></p>\n\n<p>FileAdapter:</p>\n\n<pre><code>public void write(InputStream content, DownloadReport downloadReport) throws IOException {\n\n    FileOutputStream output = new FileOutputStream(file);\n\n    byte[] buffer = new byte[1024];\n\n    int read;\n\n    while ((read = content.read(buffer)) != -1) {\n        output.write(buffer, 0, read);\n        downloadReport.downloaded(read);\n    }\n}\n</code></pre>\n\n<p>DownloadReport:</p>\n\n<pre><code>public void downloaded(int bytes) {\n    intermediateDownloaded += bytes;\n    downloaded += bytes;\n}\n\npublic void updateProgress() {\n\n    long now = System.currentTimeMillis();\n    double delta = UnitHelper.sizeRound(((now - lastTimeUpdate) / 1000.0), 2);\n\n    if (delta &gt;= 1) {\n        unitAdapter.convertSpeed(intermediateDownloaded, delta);\n\n        intermediateDownloaded = 0;\n        lastTimeUpdate = now;\n    }\n\n    progressBar.updateProgress(unitAdapter.finalSize,\n            unitAdapter.recalculate(downloaded), unitAdapter.unity);\n}\n</code></pre>\n"},{"tags":["java","reactive-programming","reactive-streams","mutiny","smallrye"],"comments":[{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1656076310,"post_id":72743254,"comment_id":128490154,"body_markdown":"I feel like you are asking us to rewrite this code for you. What have you tried so far? Have you tried to convert at least some of the methods?","body":"I feel like you are asking us to rewrite this code for you. What have you tried so far? Have you tried to convert at least some of the methods?"},{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1656077014,"post_id":72743254,"comment_id":128490450,"body_markdown":"[This guide on Vert.x and Mutiny](https://quarkus.io/blog/mutiny-vertx/#the-vert-x-bare-api-and-friends) and [this question on stackoverflow](https://stackoverflow.com/questions/45677070/read-large-file-using-vertx) should give you a good starting point","body":"<a href=\"https://quarkus.io/blog/mutiny-vertx/#the-vert-x-bare-api-and-friends\" rel=\"nofollow noreferrer\">This guide on Vert.x and Mutiny</a> and <a href=\"https://stackoverflow.com/questions/45677070/read-large-file-using-vertx\">this question on stackoverflow</a> should give you a good starting point"},{"owner":{"account_id":10278040,"reputation":2869,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"score":0,"creation_date":1656327528,"post_id":72743254,"comment_id":128536422,"body_markdown":"@DavideD&#39;Alto Thanks a lot for your response. I have modified my code and tried to use `Multi.createFrom().emitter(em -&gt;{` but I am not sure if this is the best approach as I need to wait for whole list to complete. Can you please suggest if there is any better approach to return as soon as the HashId has been created?","body":"@DavideD&#39;Alto Thanks a lot for your response. I have modified my code and tried to use <code>Multi.createFrom().emitter(em -&gt;{</code> but I am not sure if this is the best approach as I need to wait for whole list to complete. Can you please suggest if there is any better approach to return as soon as the HashId has been created?"},{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1656341480,"post_id":72743254,"comment_id":128542065,"body_markdown":"I&#39;ve answered with how I would refactor the code.","body":"I&#39;ve answered with how I would refactor the code."}],"answers":[{"tags":[],"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656500322,"creation_date":1656339702,"answer_id":72773680,"question_id":72743254,"body_markdown":"I think you can refactor `xmlEventHashGenerator` to\r\n```\r\n\tpublic Multi&lt;String&gt; xmlEventHashGenerator(final InputStream xmlStream) throws SAXException, ParserConfigurationException, IOException {\r\n\t\tfinal SAXParserFactory factory = SAXParserFactory.newInstance();\r\n\t\tfinal SaxHandler saxHandler = new SaxHandler();\r\n\t\tfactory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\r\n\t\tfactory.newSAXParser().parse(xmlStream, saxHandler);\r\n\r\n\t\treturn Multi.createFrom()\r\n\t\t\t\t.iterable( saxHandler.getRootNodes() )\r\n\t\t\t\t.map( RootNode::toString )\r\n\t\t\t\t.map( this::convertDatatype );\r\n\t}\r\n\r\n\tprivate String convertDatatype(String preHashString) {\r\n\t\ttry {\r\n            // I think we could create the MessageDigest instance only once\r\n\t\t\tbyte[] digest = MessageDigest.getInstance( &quot;SHA-256&quot; )\r\n\t\t\t\t\t.digest( preHashString.getBytes( StandardCharsets.UTF_8 ) );\r\n\t\t\treturn DatatypeConverter.printHexBinary( digest ).toLowerCase();\r\n\t\t}\r\n\t\tcatch (NoSuchAlgorithmException e) {\r\n\t\t\tthrow new IllegalArgumentException( e );\r\n\t\t}\r\n\t}\r\n```\r\n\r\nThe test method will look something like:\r\n```\r\n    @Test\r\n    public void xmlTest() throws Exception {\r\n        final HashGenerator eventHashGenerator = new HashGenerator();\r\n        final InputStream xmlStream = getClass().getResourceAsStream(&quot;/customer.xml&quot;);\r\n        System.out.println(&quot;Generated Event Hash Ids: &quot;);\r\n        eventHashGenerator\r\n            .xmlHashGenerator(xmlStream)\r\n            // Print all the hash codes\r\n            .invoke( hash -&gt; System.out.println( hash )\r\n            .await().indefinitely();\r\n     }\r\n```\r\n\r\nBut if you want to concatenate all the hash codes, you can do:\r\n```\r\n    @Test\r\n    public void xmlTest() throws Exception {\r\n        final HashGenerator eventHashGenerator = new HashGenerator();\r\n        final InputStream xmlStream = getClass()\r\n            .getResourceAsStream(&quot;/customer.xml&quot;);\r\n        String hash = eventHashGenerator\r\n            .xmlHashGenerator(xmlStream)\r\n            // Concatenate all the results\r\n  \t\t    .collect().with( Collectors.joining() );\r\n            // Print the hashcode\r\n            .invoke( hashcode -&gt; System.out.println(&quot;\\nGenerated Event Hash Ids : \\n&quot; + hashcode) )\r\n            .await().indefinitely();\r\n     }\r\n```\r\n","title":"How to convert a simple method that returns the List&lt;String&gt; into Multi&lt;String&gt; based on Smallrye Mutiny?","body":"<p>I think you can refactor <code>xmlEventHashGenerator</code> to</p>\n<pre><code>    public Multi&lt;String&gt; xmlEventHashGenerator(final InputStream xmlStream) throws SAXException, ParserConfigurationException, IOException {\n        final SAXParserFactory factory = SAXParserFactory.newInstance();\n        final SaxHandler saxHandler = new SaxHandler();\n        factory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\n        factory.newSAXParser().parse(xmlStream, saxHandler);\n\n        return Multi.createFrom()\n                .iterable( saxHandler.getRootNodes() )\n                .map( RootNode::toString )\n                .map( this::convertDatatype );\n    }\n\n    private String convertDatatype(String preHashString) {\n        try {\n            // I think we could create the MessageDigest instance only once\n            byte[] digest = MessageDigest.getInstance( &quot;SHA-256&quot; )\n                    .digest( preHashString.getBytes( StandardCharsets.UTF_8 ) );\n            return DatatypeConverter.printHexBinary( digest ).toLowerCase();\n        }\n        catch (NoSuchAlgorithmException e) {\n            throw new IllegalArgumentException( e );\n        }\n    }\n</code></pre>\n<p>The test method will look something like:</p>\n<pre><code>    @Test\n    public void xmlTest() throws Exception {\n        final HashGenerator eventHashGenerator = new HashGenerator();\n        final InputStream xmlStream = getClass().getResourceAsStream(&quot;/customer.xml&quot;);\n        System.out.println(&quot;Generated Event Hash Ids: &quot;);\n        eventHashGenerator\n            .xmlHashGenerator(xmlStream)\n            // Print all the hash codes\n            .invoke( hash -&gt; System.out.println( hash )\n            .await().indefinitely();\n     }\n</code></pre>\n<p>But if you want to concatenate all the hash codes, you can do:</p>\n<pre><code>    @Test\n    public void xmlTest() throws Exception {\n        final HashGenerator eventHashGenerator = new HashGenerator();\n        final InputStream xmlStream = getClass()\n            .getResourceAsStream(&quot;/customer.xml&quot;);\n        String hash = eventHashGenerator\n            .xmlHashGenerator(xmlStream)\n            // Concatenate all the results\n            .collect().with( Collectors.joining() );\n            // Print the hashcode\n            .invoke( hashcode -&gt; System.out.println(&quot;\\nGenerated Event Hash Ids : \\n&quot; + hashcode) )\n            .await().indefinitely();\n     }\n</code></pre>\n"}],"owner":{"account_id":10278040,"reputation":2869,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":551,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72773680,"answer_count":1,"score":0,"last_activity_date":1656500322,"creation_date":1656069308,"question_id":72743254,"body_markdown":"I am developing an application that reads the XML file and creates the Hash ID based on the details present in XML. As of now, everything is working perfectly, and able to get the `List&lt;String&gt;`.\r\n\r\nI would like to convert this application into `Reactive Streams` using the `Smallrye Mutiny` so I went through some of the documentation but did not understand clearly how to convert this application into `Reactive Streams` where I do not have to wait for the completion of all XML file to return the `List&lt;String&gt;`. Rather I can start returning the `Multi&lt;String&gt;` as and when the its generated.\r\n\r\nFollowing is the simple XML that I am reading using SAX Parser to create the Hash ID:\r\n```\r\n&lt;customerList&gt;\r\n    &lt;customer&gt;\r\n        &lt;name&gt;Batman&lt;/name&gt;\r\n        &lt;age&gt;25&lt;/age&gt;\r\n    &lt;/customer&gt;\r\n    &lt;customer&gt;\r\n        &lt;name&gt;Superman&lt;/name&gt;\r\n        &lt;age&gt;28&lt;/age&gt;\r\n    &lt;/customer&gt;\r\n&lt;/customerList&gt;\r\n```\r\n\r\nFollowing is the Main application which will make a call to `SaxHandler`:\r\n```\r\npublic Multi&lt;String&gt; xmlEventHashGenerator(final InputStream xmlStream) throws SAXException, ParserConfigurationException, IOException {\r\n    final SAXParserFactory factory = SAXParserFactory.newInstance();\r\n    final SaxHandler saxHandler = new SaxHandler();\r\n    factory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\r\n    factory.newSAXParser().parse(xmlStream, saxHandler);\r\n\r\n    return Multi.createFrom().emitter(em -&gt;{\r\n        saxHandler.getRootNodes().forEach(contextNode -&gt; {\r\n            final String preHashString = contextNode.toString();\r\n            try {\r\n                final StringBuilder hashId = new StringBuilder();\r\n                MessageDigest.getInstance(&quot;SHA-256&quot;).digest(preHashString.getBytes(StandardCharsets.UTF_8));\r\n                hashId.append(DatatypeConverter.printHexBinary(digest).toLowerCase());\r\n                em.emit(hashId.toString());\r\n            } catch (NoSuchAlgorithmException e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n        em.complete();\r\n    });\r\n}\r\n```\r\n\r\nFollowing is the `SaxHandler` which will read the XML and create HashIDs:\r\n```\r\npublic class SaxHandler extends DefaultHandler {\r\n    @Getter\r\n    private final List&lt;String&gt; eventHashIds = new ArrayList&lt;&gt;();\r\n    @Getter\r\n    private final List&lt;ContextNode&gt; rootNodes = new ArrayList&lt;&gt;();\r\n\r\n    private final HashMap&lt;String, String&gt; contextHeader = new HashMap&lt;&gt;();\r\n    private final String hashAlgorithm;\r\n    private ContextNode currentNode = null;\r\n    private ContextNode rootNode = null;\r\n    private final StringBuilder currentValue = new StringBuilder();\r\n\r\n    public SaxHandler(final String hashAlgorithm) {\r\n        this.hashAlgorithm = hashAlgorithm;\r\n    }\r\n\r\n    @Override\r\n    public void startElement(final String uri, final String localName, final String qName, final Attributes attributes) {\r\n        if (rootNode == null &amp;&amp; qName.equals(&quot;customer&quot;)) {\r\n            rootNode = new ContextNode(contextHeader);\r\n            currentNode = rootNode;\r\n            rootNode.children.add(new ContextNode(rootNode, &quot;type&quot;, qName));\r\n        }else if (currentNode != null) {\r\n            ContextNode n = new ContextNode(currentNode, qName, (String) null);\r\n            currentNode.children.add(n);\r\n            currentNode = n;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void characters(char[] ch, int start, int length) {\r\n        currentValue.append(ch, start, length);\r\n    }\r\n\r\n    @Override\r\n    public void endElement(final String uri, final String localName, final String qName) {\r\n\r\n        if (rootNode != null &amp;&amp; !qName.equals(&quot;customer&quot;)) {\r\n            final String value = !currentValue.toString().trim().equals(&quot;&quot;) ? currentValue.toString().trim() : null;\r\n            currentNode.children.add(new ContextNode(currentNode, qName, value));\r\n        }\r\n\r\n        if (qName.equals(&quot;customer&quot;)) {\r\n            rootNodes.add(rootNode);\r\n            rootNode = null;\r\n        }\r\n        currentValue.setLength(0);\r\n    }\r\n}\r\n```\r\n\r\nFollowing is the `Test`:\r\n```\r\n@Test\r\n    public void xmlTest() throws Exception {\r\n        final HashGenerator eventHashGenerator = new HashGenerator();\r\n        final InputStream xmlStream = getClass().getResourceAsStream(&quot;/customer.xml&quot;);\r\n        final List&lt;String&gt; eventHashIds = eventHashGenerator.xmlHashGenerator(xmlStream, &quot;sha3-256&quot;);\r\n        System.out.println(&quot;\\nGenerated Event Hash Ids : \\n&quot; + eventHashIds);\r\n    }\r\n```\r\n\r\nCan someone please guide me to some example or provide some idea on how to convert this application into `SmallRye Mutinty Multi&lt;String&gt;` based application?","title":"How to convert a simple method that returns the List&lt;String&gt; into Multi&lt;String&gt; based on Smallrye Mutiny?","body":"<p>I am developing an application that reads the XML file and creates the Hash ID based on the details present in XML. As of now, everything is working perfectly, and able to get the <code>List&lt;String&gt;</code>.</p>\n<p>I would like to convert this application into <code>Reactive Streams</code> using the <code>Smallrye Mutiny</code> so I went through some of the documentation but did not understand clearly how to convert this application into <code>Reactive Streams</code> where I do not have to wait for the completion of all XML file to return the <code>List&lt;String&gt;</code>. Rather I can start returning the <code>Multi&lt;String&gt;</code> as and when the its generated.</p>\n<p>Following is the simple XML that I am reading using SAX Parser to create the Hash ID:</p>\n<pre><code>&lt;customerList&gt;\n    &lt;customer&gt;\n        &lt;name&gt;Batman&lt;/name&gt;\n        &lt;age&gt;25&lt;/age&gt;\n    &lt;/customer&gt;\n    &lt;customer&gt;\n        &lt;name&gt;Superman&lt;/name&gt;\n        &lt;age&gt;28&lt;/age&gt;\n    &lt;/customer&gt;\n&lt;/customerList&gt;\n</code></pre>\n<p>Following is the Main application which will make a call to <code>SaxHandler</code>:</p>\n<pre><code>public Multi&lt;String&gt; xmlEventHashGenerator(final InputStream xmlStream) throws SAXException, ParserConfigurationException, IOException {\n    final SAXParserFactory factory = SAXParserFactory.newInstance();\n    final SaxHandler saxHandler = new SaxHandler();\n    factory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\n    factory.newSAXParser().parse(xmlStream, saxHandler);\n\n    return Multi.createFrom().emitter(em -&gt;{\n        saxHandler.getRootNodes().forEach(contextNode -&gt; {\n            final String preHashString = contextNode.toString();\n            try {\n                final StringBuilder hashId = new StringBuilder();\n                MessageDigest.getInstance(&quot;SHA-256&quot;).digest(preHashString.getBytes(StandardCharsets.UTF_8));\n                hashId.append(DatatypeConverter.printHexBinary(digest).toLowerCase());\n                em.emit(hashId.toString());\n            } catch (NoSuchAlgorithmException e) {\n                e.printStackTrace();\n            }\n        });\n        em.complete();\n    });\n}\n</code></pre>\n<p>Following is the <code>SaxHandler</code> which will read the XML and create HashIDs:</p>\n<pre><code>public class SaxHandler extends DefaultHandler {\n    @Getter\n    private final List&lt;String&gt; eventHashIds = new ArrayList&lt;&gt;();\n    @Getter\n    private final List&lt;ContextNode&gt; rootNodes = new ArrayList&lt;&gt;();\n\n    private final HashMap&lt;String, String&gt; contextHeader = new HashMap&lt;&gt;();\n    private final String hashAlgorithm;\n    private ContextNode currentNode = null;\n    private ContextNode rootNode = null;\n    private final StringBuilder currentValue = new StringBuilder();\n\n    public SaxHandler(final String hashAlgorithm) {\n        this.hashAlgorithm = hashAlgorithm;\n    }\n\n    @Override\n    public void startElement(final String uri, final String localName, final String qName, final Attributes attributes) {\n        if (rootNode == null &amp;&amp; qName.equals(&quot;customer&quot;)) {\n            rootNode = new ContextNode(contextHeader);\n            currentNode = rootNode;\n            rootNode.children.add(new ContextNode(rootNode, &quot;type&quot;, qName));\n        }else if (currentNode != null) {\n            ContextNode n = new ContextNode(currentNode, qName, (String) null);\n            currentNode.children.add(n);\n            currentNode = n;\n        }\n    }\n\n    @Override\n    public void characters(char[] ch, int start, int length) {\n        currentValue.append(ch, start, length);\n    }\n\n    @Override\n    public void endElement(final String uri, final String localName, final String qName) {\n\n        if (rootNode != null &amp;&amp; !qName.equals(&quot;customer&quot;)) {\n            final String value = !currentValue.toString().trim().equals(&quot;&quot;) ? currentValue.toString().trim() : null;\n            currentNode.children.add(new ContextNode(currentNode, qName, value));\n        }\n\n        if (qName.equals(&quot;customer&quot;)) {\n            rootNodes.add(rootNode);\n            rootNode = null;\n        }\n        currentValue.setLength(0);\n    }\n}\n</code></pre>\n<p>Following is the <code>Test</code>:</p>\n<pre><code>@Test\n    public void xmlTest() throws Exception {\n        final HashGenerator eventHashGenerator = new HashGenerator();\n        final InputStream xmlStream = getClass().getResourceAsStream(&quot;/customer.xml&quot;);\n        final List&lt;String&gt; eventHashIds = eventHashGenerator.xmlHashGenerator(xmlStream, &quot;sha3-256&quot;);\n        System.out.println(&quot;\\nGenerated Event Hash Ids : \\n&quot; + eventHashIds);\n    }\n</code></pre>\n<p>Can someone please guide me to some example or provide some idea on how to convert this application into <code>SmallRye Mutinty Multi&lt;String&gt;</code> based application?</p>\n"},{"tags":["java","process","jvm","processbuilder"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1656499893,"post_id":72800112,"comment_id":128586390,"body_markdown":"Design your process so that offers a different interface than just startup parameters. One way would via network, such as a REST interface. That way your subprocess stays active and is ready for requests. You could also monitor the subprocess&#39;s output and write stuff to its System.in.","body":"Design your process so that offers a different interface than just startup parameters. One way would via network, such as a REST interface. That way your subprocess stays active and is ready for requests. You could also monitor the subprocess&#39;s output and write stuff to its System.in."},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":0,"creation_date":1656499921,"post_id":72800112,"comment_id":128586411,"body_markdown":"One JVM = one process.  If you want to execute multiple actions, sequentially, in that one JVM, then you will have to write a Java program that accepts commands (say, from standard in set to a pipe) and executes each action.  This sounds like adding a lot of complexity.","body":"One JVM = one process.  If you want to execute multiple actions, sequentially, in that one JVM, then you will have to write a Java program that accepts commands (say, from standard in set to a pipe) and executes each action.  This sounds like adding a lot of complexity."}],"owner":{"account_id":25270120,"reputation":11,"user_id":19099564,"display_name":"im_who_code"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656499721,"creation_date":1656499703,"question_id":72800112,"body_markdown":"I am performing certain action in subprocess which is basically taking input and giving output. each calls input will be different. for now input passing via command line arg. I want to reuse this subprocess instead of creating again and again in each call to make performance optimal. want to reuse same JVM instance because each time when we start() process builder, new process with seperate JVM will created which will load classpath library. Is there any way to achieve this. please share you ideas will help a lot. Thanks in advance.","title":"how we can reuse subprocess instead of creating again and again in java process builder","body":"<p>I am performing certain action in subprocess which is basically taking input and giving output. each calls input will be different. for now input passing via command line arg. I want to reuse this subprocess instead of creating again and again in each call to make performance optimal. want to reuse same JVM instance because each time when we start() process builder, new process with seperate JVM will created which will load classpath library. Is there any way to achieve this. please share you ideas will help a lot. Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","websocket"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1656956249,"post_id":72800081,"comment_id":128691411,"body_markdown":"have you tried spring security https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-authentication","body":"have you tried spring security <a href=\"https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-authentication\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/integration&zwnj;&#8203;s/&hellip;</a>"},{"owner":{"account_id":25679824,"reputation":21,"user_id":19442770,"display_name":"Ghost"},"score":0,"creation_date":1657530533,"post_id":72800081,"comment_id":128823271,"body_markdown":"those were designed for stomp endpoints, in my case i&#39;m using java Websocket API. I tried using Stomp but it interferes with the WebSecurityConfig and I couldn&#39;t find a way to fix it tbh","body":"those were designed for stomp endpoints, in my case i&#39;m using java Websocket API. I tried using Stomp but it interferes with the WebSecurityConfig and I couldn&#39;t find a way to fix it tbh"},{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1657566300,"post_id":72800081,"comment_id":128836595,"body_markdown":"can you put a reproducer to github ? with tests inside","body":"can you put a reproducer to github ? with tests inside"}],"owner":{"account_id":25679824,"reputation":21,"user_id":19442770,"display_name":"Ghost"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656499683,"creation_date":1656499583,"question_id":72800081,"body_markdown":"I created a websocket communication between my Front-End which is coded in `Vuejs` and my Back-end which is coded in `Spring Boot`. Any user would authenticate in the first place ( the authentication is done without the websockets and a JWT token is passed to the user ) .And then a candidate would start a test (it&#39;s an e-learning platform) and the questions would be passed through a full-duplex flow with websockets. The client which is the `Vuejs` instance would submit the answer and the back-end would give him the next question. Well, the entire flow works. But I couldn&#39;t figure out how to secure the websockets. I haven&#39;t used neither `STOMP` neither `SockJS` for this and actually I haven&#39;t found a single ressource about this.\r\nWhat I&#39;d like to do is make a check on the user&#39;s role before giving him the permission to connect onto the websocket.\r\nIf the user has the privileges to access then the connection is successful\r\nelse it&#39;s a forbidden error (403).\r\nHere is my code, I&#39;ve used the `Spring Boot websocket-starter` annotations `@&#210;nOpen`,`@OnMessage`, `@OnClose` and `@OnError`.\r\nThose are some pieces of Code that may help out in finding the solution :\r\n\r\n**WebsocketConfiguration :**\r\n\r\n    @Configuration\r\n    public class WebsocketConfiguration {\r\n        @Bean\r\n        public ServerEndpointExporter serverEndpointExporter() {\r\n            return new ServerEndpointExporter();\r\n        }\r\n        \r\n    }\r\n\r\n\r\n\r\n**WebSocket.java(Contains the logic):**\r\nI removed the logic so that it doesn&#39;t become too much code to read.\r\n\r\n    public class WebSocket {\r\n    \r\n    private Session session;\r\n    @Autowired\r\n    QuestionRepository questionRepository;\r\n    private static CopyOnWriteArraySet&lt;WebSocket&gt; webSockets =new CopyOnWriteArraySet&lt;&gt;();\r\n    private static Map&lt;String,Session&gt; sessionPool = new HashMap&lt;String,Session&gt;();\r\n    @OnOpen\r\n    public void onOpen(Session session, @PathParam(value=&quot;tentativeId&quot;)String tentativeId) {\r\n    }\r\n    \r\n    @OnClose\r\n    public void onClose() {\r\n        webSockets.remove(this);\r\n        System. out. println (&quot;[websocket message] disconnected, total:&quot;+webSockets. size ());\r\n    }\r\n    \r\n    @OnMessage\r\n    public void onMessage(String message,@PathParam(value=&quot;tentativeId&quot;) String tentativeId) throws JsonMappingException, JsonProcessingException {\r\n    \t}\r\n        \r\n    \r\n    // This is a broadcast message.\r\n    public void sendAllMessage(String message) {\r\n        for(WebSocket webSocket : webSockets) {\r\n            System.out.println (&quot;[websocket message] broadcast message:&quot;+message);\r\n            try {\r\n                webSocket.session.getAsyncRemote().sendText(message);\r\n                \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n    \r\n    // This is a single message\r\n    public void sendOneMessage(String tentativeId, String message) {\r\n        Session session = sessionPool.get(tentativeId);\r\n        if (session != null) {\r\n            try {\r\n                session.getAsyncRemote().sendText(message);\r\n               \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Securing javax.websocket API in Spring Boot","body":"<p>I created a websocket communication between my Front-End which is coded in <code>Vuejs</code> and my Back-end which is coded in <code>Spring Boot</code>. Any user would authenticate in the first place ( the authentication is done without the websockets and a JWT token is passed to the user ) .And then a candidate would start a test (it's an e-learning platform) and the questions would be passed through a full-duplex flow with websockets. The client which is the <code>Vuejs</code> instance would submit the answer and the back-end would give him the next question. Well, the entire flow works. But I couldn't figure out how to secure the websockets. I haven't used neither <code>STOMP</code> neither <code>SockJS</code> for this and actually I haven't found a single ressource about this.\nWhat I'd like to do is make a check on the user's role before giving him the permission to connect onto the websocket.\nIf the user has the privileges to access then the connection is successful\nelse it's a forbidden error (403).\nHere is my code, I've used the <code>Spring Boot websocket-starter</code> annotations <code>@nOpen</code>,<code>@OnMessage</code>, <code>@OnClose</code> and <code>@OnError</code>.\nThose are some pieces of Code that may help out in finding the solution :</p>\n<p><strong>WebsocketConfiguration :</strong></p>\n<pre><code>@Configuration\npublic class WebsocketConfiguration {\n    @Bean\n    public ServerEndpointExporter serverEndpointExporter() {\n        return new ServerEndpointExporter();\n    }\n    \n}\n</code></pre>\n<p><strong>WebSocket.java(Contains the logic):</strong>\nI removed the logic so that it doesn't become too much code to read.</p>\n<pre><code>public class WebSocket {\n\nprivate Session session;\n@Autowired\nQuestionRepository questionRepository;\nprivate static CopyOnWriteArraySet&lt;WebSocket&gt; webSockets =new CopyOnWriteArraySet&lt;&gt;();\nprivate static Map&lt;String,Session&gt; sessionPool = new HashMap&lt;String,Session&gt;();\n@OnOpen\npublic void onOpen(Session session, @PathParam(value=&quot;tentativeId&quot;)String tentativeId) {\n}\n\n@OnClose\npublic void onClose() {\n    webSockets.remove(this);\n    System. out. println (&quot;[websocket message] disconnected, total:&quot;+webSockets. size ());\n}\n\n@OnMessage\npublic void onMessage(String message,@PathParam(value=&quot;tentativeId&quot;) String tentativeId) throws JsonMappingException, JsonProcessingException {\n    }\n    \n\n// This is a broadcast message.\npublic void sendAllMessage(String message) {\n    for(WebSocket webSocket : webSockets) {\n        System.out.println (&quot;[websocket message] broadcast message:&quot;+message);\n        try {\n            webSocket.session.getAsyncRemote().sendText(message);\n            \n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n// This is a single message\npublic void sendOneMessage(String tentativeId, String message) {\n    Session session = sessionPool.get(tentativeId);\n    if (session != null) {\n        try {\n            session.getAsyncRemote().sendText(message);\n           \n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","gradle","dependencies","multiplatform"],"answers":[{"tags":[],"owner":{"account_id":2527365,"reputation":142491,"user_id":2196460,"accept_rate":93,"display_name":"hotkey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1656499683,"creation_date":1656497610,"answer_id":72799627,"question_id":72781741,"body_markdown":"The Gradle feature that allows a single dependency module to be resolved in different ways is [variant-aware dependency resolution](https://docs.gradle.org/current/userguide/variant_model.html). \r\n\r\nWith it, a module can provide multiple variants of its artifacts, along with multiple sets of transitive dependencies, and a consumer can request the content from its dependencies that satisfies certain attributes, which should result in the matching dependency variants.\r\n\r\nHowever, your dependencies are third-party libraries that are already there, and they, certainly, don&#39;t provide variants that you can pick from by just requesting attributes.\r\n\r\nOn your side, you can fix this by doing one of the following:\r\n\r\n* Specify *component metadata rules* that plug into your build&#39;s dependency resolution and modify the component metadata of the specific third-party dependencies, [adding the Native JAR variants to them](https://docs.gradle.org/current/userguide/component_metadata_rules.html#adding_variants_for_native_jars).\r\n\r\n* Build and publish your own &quot;umbrella&quot; libraries that will have variants that depend on the platform-specific parts of the third-party libraries. Then use the &quot;umbrella&quot; module as a dependency, requesting the attributes that match the current platform. \r\n\r\n    For this, you need to configure a build of a library that doesn&#39;t have its own code, but it should still expose multiple variants that have different attributes. In those variants, you can specify different dependencies, e.g. depend on `nd4j.windows` in the Windows variant and on `nd4j.linux` in the variant that targets Linux.\r\n\r\n    * Or make the library you distribute &quot;multiplatform&quot;, so that there&#39;s no separate &quot;umbrella&quot; library, but instead it&#39;s your library that has multiple variants for different platforms. This could be preferable if you want to simplify the publication and distribution pipeline, even at the cost of more complexity in the main library&#39;s build.\r\n\r\nThen, in your build, you need to request the attributes that correspond to the current host.\r\n\r\nThe common attributes in the Gradle API that you can reuse for distinguishing operating systems and architectures are [`OperatingSystemFamily.OPERATING_SYSTEM_ATTRIBUTE`](https://docs.gradle.org/current/javadoc/org/gradle/nativeplatform/OperatingSystemFamily.html#OPERATING_SYSTEM_ATTRIBUTE) and [`MachineArchitecture.ARCHITECTURE_ATTRIBUTE`](https://docs.gradle.org/current/javadoc/org/gradle/nativeplatform/MachineArchitecture.html#ARCHITECTURE_ATTRIBUTE)\r\n\r\nDepending on your choice, the published library will have either the original dependency or the dependency on the &quot;umbrella&quot; library, but it&#39;s going to be the same dependency regardless of the host platform. \r\n\r\nOn the other hand, **both approaches impose the responsibility on the consumers of your publication** to adjust their builds as well, either by specifying the right operating system attribute on their side, and potentially adding the same component metadata rules. Both of these can be done with a Gradle plugin that you can distribute, or manually.\r\n\r\n---\r\n\r\nSince you mentioned Kotlin/Multiplatform, you might be interested in that the above is roughly how Kotlin supports specifying a single dependency on multiplatform libraries, too. You can find platform-specific variants in published Kotlin libraries, for example, in the [Gradle `*.module` metadata file of `kotlinx.coroutines`](https://repo1.maven.org/maven2/org/jetbrains/kotlinx/kotlinx-coroutines-core/1.6.3/kotlinx-coroutines-core-1.6.3.module): \r\n\r\n```\r\n&quot;variants&quot;: [\r\n    ...\r\n    {\r\n      &quot;name&quot;: &quot;iosArm32MetadataElements-published&quot;,\r\n      &quot;attributes&quot;: {\r\n        &quot;org.gradle.category&quot;: &quot;library&quot;,\r\n        &quot;org.gradle.usage&quot;: &quot;kotlin-metadata&quot;,\r\n        &quot;org.jetbrains.kotlin.native.target&quot;: &quot;ios_arm32&quot;,\r\n        &quot;org.jetbrains.kotlin.platform.type&quot;: &quot;native&quot;\r\n      },\r\n      &quot;available-at&quot;: { ... }\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;iosArm64ApiElements-published&quot;,\r\n      &quot;attributes&quot;: {\r\n        &quot;org.gradle.category&quot;: &quot;library&quot;,\r\n        &quot;org.gradle.usage&quot;: &quot;kotlin-api&quot;,\r\n        &quot;org.jetbrains.kotlin.native.target&quot;: &quot;ios_arm64&quot;,\r\n        &quot;org.jetbrains.kotlin.platform.type&quot;: &quot;native&quot;\r\n      },\r\n      &quot;available-at&quot;: { ... }\r\n    },\r\n    ...\r\n]\r\n```\r\nIn the case of Kotlin/Multiplatform, it&#39;s the Kotlin Gradle plugin that sets up the right attributes on the consumer end, accordingly to the platforms that the consumer targets.","title":"Is there a clean way to declare multiplatform dependencies in Gradle when you are NOT a Kotlin Multiplatform project?","body":"<p>The Gradle feature that allows a single dependency module to be resolved in different ways is <a href=\"https://docs.gradle.org/current/userguide/variant_model.html\" rel=\"nofollow noreferrer\">variant-aware dependency resolution</a>.</p>\n<p>With it, a module can provide multiple variants of its artifacts, along with multiple sets of transitive dependencies, and a consumer can request the content from its dependencies that satisfies certain attributes, which should result in the matching dependency variants.</p>\n<p>However, your dependencies are third-party libraries that are already there, and they, certainly, don't provide variants that you can pick from by just requesting attributes.</p>\n<p>On your side, you can fix this by doing one of the following:</p>\n<ul>\n<li><p>Specify <em>component metadata rules</em> that plug into your build's dependency resolution and modify the component metadata of the specific third-party dependencies, <a href=\"https://docs.gradle.org/current/userguide/component_metadata_rules.html#adding_variants_for_native_jars\" rel=\"nofollow noreferrer\">adding the Native JAR variants to them</a>.</p>\n</li>\n<li><p>Build and publish your own &quot;umbrella&quot; libraries that will have variants that depend on the platform-specific parts of the third-party libraries. Then use the &quot;umbrella&quot; module as a dependency, requesting the attributes that match the current platform.</p>\n<p>For this, you need to configure a build of a library that doesn't have its own code, but it should still expose multiple variants that have different attributes. In those variants, you can specify different dependencies, e.g. depend on <code>nd4j.windows</code> in the Windows variant and on <code>nd4j.linux</code> in the variant that targets Linux.</p>\n<ul>\n<li>Or make the library you distribute &quot;multiplatform&quot;, so that there's no separate &quot;umbrella&quot; library, but instead it's your library that has multiple variants for different platforms. This could be preferable if you want to simplify the publication and distribution pipeline, even at the cost of more complexity in the main library's build.</li>\n</ul>\n</li>\n</ul>\n<p>Then, in your build, you need to request the attributes that correspond to the current host.</p>\n<p>The common attributes in the Gradle API that you can reuse for distinguishing operating systems and architectures are <a href=\"https://docs.gradle.org/current/javadoc/org/gradle/nativeplatform/OperatingSystemFamily.html#OPERATING_SYSTEM_ATTRIBUTE\" rel=\"nofollow noreferrer\"><code>OperatingSystemFamily.OPERATING_SYSTEM_ATTRIBUTE</code></a> and <a href=\"https://docs.gradle.org/current/javadoc/org/gradle/nativeplatform/MachineArchitecture.html#ARCHITECTURE_ATTRIBUTE\" rel=\"nofollow noreferrer\"><code>MachineArchitecture.ARCHITECTURE_ATTRIBUTE</code></a></p>\n<p>Depending on your choice, the published library will have either the original dependency or the dependency on the &quot;umbrella&quot; library, but it's going to be the same dependency regardless of the host platform.</p>\n<p>On the other hand, <strong>both approaches impose the responsibility on the consumers of your publication</strong> to adjust their builds as well, either by specifying the right operating system attribute on their side, and potentially adding the same component metadata rules. Both of these can be done with a Gradle plugin that you can distribute, or manually.</p>\n<hr />\n<p>Since you mentioned Kotlin/Multiplatform, you might be interested in that the above is roughly how Kotlin supports specifying a single dependency on multiplatform libraries, too. You can find platform-specific variants in published Kotlin libraries, for example, in the <a href=\"https://repo1.maven.org/maven2/org/jetbrains/kotlinx/kotlinx-coroutines-core/1.6.3/kotlinx-coroutines-core-1.6.3.module\" rel=\"nofollow noreferrer\">Gradle <code>*.module</code> metadata file of <code>kotlinx.coroutines</code></a>:</p>\n<pre><code>&quot;variants&quot;: [\n    ...\n    {\n      &quot;name&quot;: &quot;iosArm32MetadataElements-published&quot;,\n      &quot;attributes&quot;: {\n        &quot;org.gradle.category&quot;: &quot;library&quot;,\n        &quot;org.gradle.usage&quot;: &quot;kotlin-metadata&quot;,\n        &quot;org.jetbrains.kotlin.native.target&quot;: &quot;ios_arm32&quot;,\n        &quot;org.jetbrains.kotlin.platform.type&quot;: &quot;native&quot;\n      },\n      &quot;available-at&quot;: { ... }\n    },\n    {\n      &quot;name&quot;: &quot;iosArm64ApiElements-published&quot;,\n      &quot;attributes&quot;: {\n        &quot;org.gradle.category&quot;: &quot;library&quot;,\n        &quot;org.gradle.usage&quot;: &quot;kotlin-api&quot;,\n        &quot;org.jetbrains.kotlin.native.target&quot;: &quot;ios_arm64&quot;,\n        &quot;org.jetbrains.kotlin.platform.type&quot;: &quot;native&quot;\n      },\n      &quot;available-at&quot;: { ... }\n    },\n    ...\n]\n</code></pre>\n<p>In the case of Kotlin/Multiplatform, it's the Kotlin Gradle plugin that sets up the right attributes on the consumer end, accordingly to the platforms that the consumer targets.</p>\n"}],"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":72799627,"answer_count":1,"score":3,"last_activity_date":1656499683,"creation_date":1656398266,"question_id":72781741,"body_markdown":"So we have this build where we are using some libraries which have, for whatever reason, been distributed as different jar files for different native operating systems.\r\n\r\nAnd of course, those libraries have arranged it so that if we include all of them at the same time, things blow up.\r\n\r\nAll good, we just make sure we include exactly the correct ones, like this:\r\n\r\n```kotlin\r\nif (isWindows()) {\r\n    runtimeOnly(libraries.nd4j.windows)\r\n    runtimeOnly(libraries.openblas.windows)\r\n} else if (isMacOS()) {\r\n    runtimeOnly(libraries.nd4j.macos)\r\n    runtimeOnly(libraries.openblas.macos)\r\n} else if (isLinux()) {\r\n    runtimeOnly(libraries.nd4j.linux)\r\n    runtimeOnly(libraries.openblas.linux)\r\n}\r\n```\r\n\r\nNow, I can certainly code golf this a little. Bump the condition inside the function call, then move the condition into `libraries` so nobody sees it, things like that. That isn&#39;t the issue, though.\r\n\r\nThe issue is, when I publish this project, depending on what OS I was sitting at when I ran the build, the published project&#39;s POM will say it depended on the Windows variants of those jars. Someone else then tries to build against my project on macOS, and it doesn&#39;t work.\r\n\r\n_Had_ Gradle recognised the existence of profiles and supported it, those projects could have declared that they have multiple profiles which depend on the platform you&#39;re running the build. Our build could have then done the same thing and put that into our POM. Downstream projects would then see that, and everything would be fine.\r\n\r\nGradle, however, does _not_ support Maven profiles for reading or for writing POMs, so the only way to split this seems to be to divide my project into four subprojects - a common part, a windows part, a macos part and a linux part, so that each can have different dependencies. All my code then lives in the common directory, and most dependency declarations live in the common subproject, and then each of the platform-specific subprojects would depend on common and the corresponding platform-specific version of the two nasty dependencies.\r\n\r\nAnd now _I&#39;m_ the one creating the problem, because whoever wants to use _my_ library will hit the same problem, and complain about it. And so on.\r\n\r\n**Is there no better way to go about this?**\r\n\r\nI know Kotlin/Multiplatform is a thing and have seen how those builds are structured, but this project isn&#39;t yet using Kotlin at all (It&#39;s a Java project, though the build scripts are in the process of being rewritten to Kotlin DSL), so it doesn&#39;t get to benefit from any of that unless I can somehow twist it to work for our not quite the same use case.\r\n","title":"Is there a clean way to declare multiplatform dependencies in Gradle when you are NOT a Kotlin Multiplatform project?","body":"<p>So we have this build where we are using some libraries which have, for whatever reason, been distributed as different jar files for different native operating systems.</p>\n<p>And of course, those libraries have arranged it so that if we include all of them at the same time, things blow up.</p>\n<p>All good, we just make sure we include exactly the correct ones, like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>if (isWindows()) {\n    runtimeOnly(libraries.nd4j.windows)\n    runtimeOnly(libraries.openblas.windows)\n} else if (isMacOS()) {\n    runtimeOnly(libraries.nd4j.macos)\n    runtimeOnly(libraries.openblas.macos)\n} else if (isLinux()) {\n    runtimeOnly(libraries.nd4j.linux)\n    runtimeOnly(libraries.openblas.linux)\n}\n</code></pre>\n<p>Now, I can certainly code golf this a little. Bump the condition inside the function call, then move the condition into <code>libraries</code> so nobody sees it, things like that. That isn't the issue, though.</p>\n<p>The issue is, when I publish this project, depending on what OS I was sitting at when I ran the build, the published project's POM will say it depended on the Windows variants of those jars. Someone else then tries to build against my project on macOS, and it doesn't work.</p>\n<p><em>Had</em> Gradle recognised the existence of profiles and supported it, those projects could have declared that they have multiple profiles which depend on the platform you're running the build. Our build could have then done the same thing and put that into our POM. Downstream projects would then see that, and everything would be fine.</p>\n<p>Gradle, however, does <em>not</em> support Maven profiles for reading or for writing POMs, so the only way to split this seems to be to divide my project into four subprojects - a common part, a windows part, a macos part and a linux part, so that each can have different dependencies. All my code then lives in the common directory, and most dependency declarations live in the common subproject, and then each of the platform-specific subprojects would depend on common and the corresponding platform-specific version of the two nasty dependencies.</p>\n<p>And now <em>I'm</em> the one creating the problem, because whoever wants to use <em>my</em> library will hit the same problem, and complain about it. And so on.</p>\n<p><strong>Is there no better way to go about this?</strong></p>\n<p>I know Kotlin/Multiplatform is a thing and have seen how those builds are structured, but this project isn't yet using Kotlin at all (It's a Java project, though the build scripts are in the process of being rewritten to Kotlin DSL), so it doesn't get to benefit from any of that unless I can somehow twist it to work for our not quite the same use case.</p>\n"},{"tags":["java","android","visual-studio-code","project","object-oriented-analysis"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1656499670,"post_id":72800092,"comment_id":128586303,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":1,"creation_date":1656500152,"post_id":72800092,"comment_id":128586500,"body_markdown":"What you are sharing doesn&#39;t help to understand the problem. If the assertion is failing, it&#39;s because the two objects are not &quot;equals&quot; (equals being the equals of the class itself, not their string representation that you see in the output). You should rather share how the objects are build and how the comparison is performed.","body":"What you are sharing doesn&#39;t help to understand the problem. If the assertion is failing, it&#39;s because the two objects are not &quot;equals&quot; (equals being the equals of the class itself, not their string representation that you see in the output). You should rather share how the objects are build and how the comparison is performed."},{"owner":{"account_id":25679766,"reputation":1,"user_id":19442715,"display_name":"ritik shrivastava"},"score":0,"creation_date":1656526022,"post_id":72800092,"comment_id":128597067,"body_markdown":"Thanks @MatteoNNZ for helping to solve this assertion failing issue. It worked and yes, also thanks for reminding me about this concept.","body":"Thanks @MatteoNNZ for helping to solve this assertion failing issue. It worked and yes, also thanks for reminding me about this concept."}],"owner":{"account_id":25679766,"reputation":1,"user_id":19442715,"display_name":"ritik shrivastava"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656499628,"creation_date":1656499628,"question_id":72800092,"body_markdown":"This is the result of Integration testing!\r\n\r\nMessage:\r\nN/A\r\nStack trace:\r\norg.opentest4j.AssertionFailedError: **expected**: &lt;Songs Loaded successfully\r\n1 Kiran\r\n\r\nPlaylist ID - 1\r\n\r\nPlaylist ID - 2\r\n\r\nDelete Successful\r\n\r\nCurrent Song Playing\r\n\r\nSong - South of the Border\r\n\r\nAlbum - No.6 Collaborations Project\r\n\r\nArtists - Ed Sheeran,Cardi.B,Camilla Cabello\r\n\r\nPlaylist ID - 1\r\n\r\nPlaylist Name - MY_PLAYLIST_1\r\n\r\nSong IDs - 1 4 5 6 7\r\n\r\nPlaylist ID - 1\r\n\r\nPlaylist Name - MY_PLAYLIST_1\r\n\r\nSong IDs - 1 4 5 6\r\n\r\nCurrent Song Playing\r\n\r\nSong - Cross Me\r\n\r\nAlbum - No.6 Collaborations Project\r\n\r\nArtists - Ed Sheeran,Chance The Rapper,PnB Rock\r\n\r\nCurrent Song Playing\r\n\r\nSong - Give Life Back To Music\r\n\r\nAlbum - Random Access Memories\r\n\r\nArtists - Daft Punk,Nile Rodgers\r\n\r\nCurrent Song Playing\r\n\r\nSong - South of the Border\r\n\r\nAlbum - No.6 Collaborations Project\r\n\r\nArtists - Ed Sheeran,Cardi.B,Camilla Cabello\r\n\r\nCurrent Song Playing\r\n\r\nSong - Give Life Back To Music\r\n\r\nAlbum - Random Access Memories\r\n\r\nArtists - Daft Punk,Nile Rodgers\r\n\r\nCurrent Song Playing\r\n\r\nSong - Cross Me\r\n\r\nAlbum - No.6 Collaborations Project\r\n\r\nArtists - Ed Sheeran,Chance The Rapper,PnB Rock\r\n\r\nGiven song id is not a part of the active playlist&gt; \r\n\r\n**but was:** &lt;Songs Loaded successfully\r\n\r\n1 Kiran\r\n\r\nPlaylist ID - 1\r\n\r\nPlaylist ID - 2\r\n\r\nDelete Successful\r\n\r\nCurrent Song Playing\r\n\r\nSong - South of the Border\r\n\r\nAlbum - No.6 Collaborations Project\r\n\r\nArtists - Ed Sheeran,Cardi.B,Camilla Cabello\r\n\r\nPlaylist ID - 1\r\n\r\nPlaylist Name - MY_PLAYLIST_1\r\n\r\nSong IDs - 1 4 5 6 7\r\n\r\nPlaylist ID - 1\r\n\r\nPlaylist Name - MY_PLAYLIST_1\r\n\r\nSong IDs - 1 4 5 6\r\n\r\nCurrent Song Playing\r\n\r\nSong - Cross Me\r\n\r\nAlbum - No.6 Collaborations Project\r\n\r\nArtists - Ed Sheeran,Chance The Rapper,PnB Rock\r\n\r\nCurrent Song Playing\r\n\r\nSong - Give Life Back To Music\r\n\r\nAlbum - Random Access Memories\r\n\r\nArtists - Daft Punk,Nile Rodgers\r\n\r\nCurrent Song Playing\r\n\r\nSong - South of the Border\r\n\r\nAlbum - No.6 Collaborations Project\r\n\r\nArtists - Ed Sheeran,Cardi.B,Camilla Cabello\r\n\r\nCurrent Song Playing\r\n\r\nSong - Give Life Back To Music\r\n\r\nAlbum - Random Access Memories\r\n\r\nArtists - Daft Punk,Nile Rodgers\r\n\r\nCurrent Song Playing\r\n\r\nSong - Cross Me\r\n\r\nAlbum - No.6 Collaborations Project\r\n\r\nArtists - Ed Sheeran,Chance The Rapper,PnB Rock\r\n\r\nGiven song id is not a part of the active playlist&gt;\r\n\r\n\tat org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)\r\n\tat org.junit.jupiter.api.AssertionUtils.failNotEqual(AssertionUtils.java:62)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)\r\n\tat org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1124)\r\n\tat com.crio.jukebox.AppTest.runTest1(AppTest.java:71)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:141)\r\n\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n","title":"JAVA-Assertion fails even expected output seems to be matching with the actual output. Please help me out with the possible solutions","body":"<p>This is the result of Integration testing!</p>\n<p>Message:\nN/A\nStack trace:\norg.opentest4j.AssertionFailedError: <strong>expected</strong>: &lt;Songs Loaded successfully\n1 Kiran</p>\n<p>Playlist ID - 1</p>\n<p>Playlist ID - 2</p>\n<p>Delete Successful</p>\n<p>Current Song Playing</p>\n<p>Song - South of the Border</p>\n<p>Album - No.6 Collaborations Project</p>\n<p>Artists - Ed Sheeran,Cardi.B,Camilla Cabello</p>\n<p>Playlist ID - 1</p>\n<p>Playlist Name - MY_PLAYLIST_1</p>\n<p>Song IDs - 1 4 5 6 7</p>\n<p>Playlist ID - 1</p>\n<p>Playlist Name - MY_PLAYLIST_1</p>\n<p>Song IDs - 1 4 5 6</p>\n<p>Current Song Playing</p>\n<p>Song - Cross Me</p>\n<p>Album - No.6 Collaborations Project</p>\n<p>Artists - Ed Sheeran,Chance The Rapper,PnB Rock</p>\n<p>Current Song Playing</p>\n<p>Song - Give Life Back To Music</p>\n<p>Album - Random Access Memories</p>\n<p>Artists - Daft Punk,Nile Rodgers</p>\n<p>Current Song Playing</p>\n<p>Song - South of the Border</p>\n<p>Album - No.6 Collaborations Project</p>\n<p>Artists - Ed Sheeran,Cardi.B,Camilla Cabello</p>\n<p>Current Song Playing</p>\n<p>Song - Give Life Back To Music</p>\n<p>Album - Random Access Memories</p>\n<p>Artists - Daft Punk,Nile Rodgers</p>\n<p>Current Song Playing</p>\n<p>Song - Cross Me</p>\n<p>Album - No.6 Collaborations Project</p>\n<p>Artists - Ed Sheeran,Chance The Rapper,PnB Rock</p>\n<p>Given song id is not a part of the active playlist&gt;</p>\n<p><strong>but was:</strong> &lt;Songs Loaded successfully</p>\n<p>1 Kiran</p>\n<p>Playlist ID - 1</p>\n<p>Playlist ID - 2</p>\n<p>Delete Successful</p>\n<p>Current Song Playing</p>\n<p>Song - South of the Border</p>\n<p>Album - No.6 Collaborations Project</p>\n<p>Artists - Ed Sheeran,Cardi.B,Camilla Cabello</p>\n<p>Playlist ID - 1</p>\n<p>Playlist Name - MY_PLAYLIST_1</p>\n<p>Song IDs - 1 4 5 6 7</p>\n<p>Playlist ID - 1</p>\n<p>Playlist Name - MY_PLAYLIST_1</p>\n<p>Song IDs - 1 4 5 6</p>\n<p>Current Song Playing</p>\n<p>Song - Cross Me</p>\n<p>Album - No.6 Collaborations Project</p>\n<p>Artists - Ed Sheeran,Chance The Rapper,PnB Rock</p>\n<p>Current Song Playing</p>\n<p>Song - Give Life Back To Music</p>\n<p>Album - Random Access Memories</p>\n<p>Artists - Daft Punk,Nile Rodgers</p>\n<p>Current Song Playing</p>\n<p>Song - South of the Border</p>\n<p>Album - No.6 Collaborations Project</p>\n<p>Artists - Ed Sheeran,Cardi.B,Camilla Cabello</p>\n<p>Current Song Playing</p>\n<p>Song - Give Life Back To Music</p>\n<p>Album - Random Access Memories</p>\n<p>Artists - Daft Punk,Nile Rodgers</p>\n<p>Current Song Playing</p>\n<p>Song - Cross Me</p>\n<p>Album - No.6 Collaborations Project</p>\n<p>Artists - Ed Sheeran,Chance The Rapper,PnB Rock</p>\n<p>Given song id is not a part of the active playlist&gt;</p>\n<pre><code>at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)\nat org.junit.jupiter.api.AssertionUtils.failNotEqual(AssertionUtils.java:62)\nat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)\nat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)\nat org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1124)\nat com.crio.jukebox.AppTest.runTest1(AppTest.java:71)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\nat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\nat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\nat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\nat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\nat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:141)\nat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n</code></pre>\n"},{"tags":["java","android","inputstream","filenotfoundexception"],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1567455681,"creation_date":1567455681,"answer_id":57762324,"question_id":57762230,"body_markdown":"The URL is an `https` URL, like the one for this Web page. `ContentResolver` does not handle those.\r\n\r\nUse an image-loading library, such as Glide or Picasso, to load the image from the URL. Or, use OkHttp to perform the Web request.","title":"Read google profile picture java.io.FileNotFoundException","body":"<p>The URL is an <code>https</code> URL, like the one for this Web page. <code>ContentResolver</code> does not handle those.</p>\n\n<p>Use an image-loading library, such as Glide or Picasso, to load the image from the URL. Or, use OkHttp to perform the Web request.</p>\n"}],"owner":{"account_id":15532802,"reputation":65,"user_id":11205781,"display_name":"Bbosap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":57762324,"answer_count":1,"score":2,"last_activity_date":1656499242,"creation_date":1567455019,"question_id":57762230,"body_markdown":"I try to read the google user&#39;s profile picture after login, however, I encounter an input stream opening error. I don&#39;t want to use Glide or Picasso libraries.\r\nMy code is quite standard:\r\n```\r\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        // Result returned from launching the Intent from GoogleSignInClient.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            // The Task returned from this call is always completed, no need to attach\r\n            // a listener.\r\n            Task&lt;GoogleSignInAccount&gt; completedTask = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n                try {\r\n                    final GoogleSignInAccount account = completedTask.getResult(ApiException.class);\r\n\r\n                    String email = account.getEmail();\r\n                    String deviceID = Settings.Secure.getString(LoginActivity.this.getContentResolver(), Settings.Secure.ANDROID_ID);\r\n                    Uri personPhotoURL = Uri.parse(account.getPhotoUrl().toString());\r\n\r\n                    try {\r\n                        ContentResolver resolver = getBaseContext().getContentResolver();\r\n                        InputStream imageStream = resolver.openInputStream(personPhotoURL);\r\n                        Bitmap selectedImage = BitmapFactory.decodeStream(imageStream);\r\n                        String encodedImage = encodeImage(selectedImage);\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n```\r\nThe Uri shows the right Url (it loads the picture when inserted into the browser), but imageStream opening throws &quot;java.io.FileNotFoundException: No content provider: https://lh3.googleusercontent.com/a-/AAuE.....&quot;.\r\n\r\nHow can I solve this problem?","title":"Read google profile picture java.io.FileNotFoundException","body":"<p>I try to read the google user's profile picture after login, however, I encounter an input stream opening error. I don't want to use Glide or Picasso libraries.\nMy code is quite standard:</p>\n<pre><code>protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        // Result returned from launching the Intent from GoogleSignInClient.getSignInIntent(...);\n        if (requestCode == RC_SIGN_IN) {\n            // The Task returned from this call is always completed, no need to attach\n            // a listener.\n            Task&lt;GoogleSignInAccount&gt; completedTask = GoogleSignIn.getSignedInAccountFromIntent(data);\n                try {\n                    final GoogleSignInAccount account = completedTask.getResult(ApiException.class);\n\n                    String email = account.getEmail();\n                    String deviceID = Settings.Secure.getString(LoginActivity.this.getContentResolver(), Settings.Secure.ANDROID_ID);\n                    Uri personPhotoURL = Uri.parse(account.getPhotoUrl().toString());\n\n                    try {\n                        ContentResolver resolver = getBaseContext().getContentResolver();\n                        InputStream imageStream = resolver.openInputStream(personPhotoURL);\n                        Bitmap selectedImage = BitmapFactory.decodeStream(imageStream);\n                        String encodedImage = encodeImage(selectedImage);\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n</code></pre>\n<p>The Uri shows the right Url (it loads the picture when inserted into the browser), but imageStream opening throws &quot;java.io.FileNotFoundException: No content provider: <a href=\"https://lh3.googleusercontent.com/a-/AAuE.....%22\" rel=\"nofollow noreferrer\">https://lh3.googleusercontent.com/a-/AAuE.....&quot;</a>.</p>\n<p>How can I solve this problem?</p>\n"},{"tags":["java","http-headers","playframework","browser-cache"],"answers":[{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1316975120,"creation_date":1316975120,"answer_id":7547614,"question_id":7547509,"body_markdown":"I haven&#39;t tested it, but it looks like the [`http.cacheControl` configuration setting][1] might work. \r\n\r\n&gt;### http.cacheControl\r\n&gt;HTTP Response headers control for static files: sets the default max-age in seconds, telling the users browser how long it should cache the page. This is only read in `prod` mode, in `dev` mode the cache is disabled. For example, to send `no-cache`:\r\n&gt;\r\n    http.cacheControl=0\r\n&gt;\r\nDefault: `3600` &amp;ndash; set cache expiry to one hour.\r\n\r\n  [1]: http://www.playframework.org/documentation/1.2.3/configuration#http","title":"How do I prevent browser caching with Play?","body":"<p>I haven't tested it, but it looks like the <a href=\"http://www.playframework.org/documentation/1.2.3/configuration#http\"><code>http.cacheControl</code> configuration setting</a> might work. </p>\n\n<blockquote>\n  <h3>http.cacheControl</h3>\n  \n  <p>HTTP Response headers control for static files: sets the default max-age in seconds, telling the users browser how long it should cache the page. This is only read in <code>prod</code> mode, in <code>dev</code> mode the cache is disabled. For example, to send <code>no-cache</code>:</p>\n\n<pre><code>http.cacheControl=0\n</code></pre>\n  \n  <p>Default: <code>3600</code> &ndash; set cache expiry to one hour.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":42612,"reputation":8550,"user_id":124160,"accept_rate":100,"display_name":"Tommi"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1317014917,"creation_date":1317014917,"answer_id":7550948,"question_id":7547509,"body_markdown":"Play framework `response` object has a `setHeader` method. You can add the headers you want like this, for example:\r\n\r\n    response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;);","title":"How do I prevent browser caching with Play?","body":"<p>Play framework <code>response</code> object has a <code>setHeader</code> method. You can add the headers you want like this, for example:</p>\n\n<pre><code>response.setHeader(\"Cache-Control\", \"no-cache\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3425829,"reputation":31,"user_id":2871611,"display_name":"oman.ispace"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1454068976,"creation_date":1454068976,"answer_id":35084112,"question_id":7547509,"body_markdown":"It is actually this:\r\n\r\n    response().setHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;);","title":"How do I prevent browser caching with Play?","body":"<p>It is actually this:</p>\n\n<pre><code>response().setHeader(\"Cache-Control\", \"no-cache\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":291572,"reputation":4467,"user_id":593816,"display_name":"Gus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484049530,"creation_date":1484049530,"answer_id":41568321,"question_id":7547509,"body_markdown":"Tommi&#39;s answer is ok, but to make sure it works in every browser, use:\r\n\r\n    response().setHeader(&quot;Cache-Control&quot;, &quot;no-cache, max-age=0, must-revalidate, no-store&quot;);","title":"How do I prevent browser caching with Play?","body":"<p>Tommi's answer is ok, but to make sure it works in every browser, use:</p>\n\n<pre><code>response().setHeader(\"Cache-Control\", \"no-cache, max-age=0, must-revalidate, no-store\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":463980,"reputation":6162,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607588085,"creation_date":1607588085,"answer_id":65230754,"question_id":7547509,"body_markdown":"    response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate, pre-check=0, post-check=0, max-age=0, s-maxage=0&quot;); // HTTP 1.1.","title":"How do I prevent browser caching with Play?","body":"<pre><code>response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate, pre-check=0, post-check=0, max-age=0, s-maxage=0&quot;); // HTTP 1.1.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10279692,"reputation":2683,"user_id":7585327,"display_name":"John"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656499161,"creation_date":1656499161,"answer_id":72799995,"question_id":7547509,"body_markdown":"On play currently 2.5.x to 2.8.x\r\nyou can set cache life of both assets folder or assets file in configuration. \r\n\r\nFor folder-\r\n\r\n    play.assets.cache.&quot;/public/stylesheets/&quot;=&quot;max-age=100&quot;\r\n    play.assets.cache.&quot;/public/javascripts/&quot;=&quot;max-age=200&quot;\r\n\r\nfor specific file -\r\n\r\n    play.assets.cache.&quot;/public/stylesheets/bootstrap.min.css&quot;=&quot;max-age=3600&quot;\r\n\r\n--- documentation \r\nhttps://www.playframework.com/documentation/2.8.x/AssetsOverview","title":"How do I prevent browser caching with Play?","body":"<p>On play currently 2.5.x to 2.8.x\nyou can set cache life of both assets folder or assets file in configuration.</p>\n<p>For folder-</p>\n<pre><code>play.assets.cache.&quot;/public/stylesheets/&quot;=&quot;max-age=100&quot;\nplay.assets.cache.&quot;/public/javascripts/&quot;=&quot;max-age=200&quot;\n</code></pre>\n<p>for specific file -</p>\n<pre><code>play.assets.cache.&quot;/public/stylesheets/bootstrap.min.css&quot;=&quot;max-age=3600&quot;\n</code></pre>\n<p>--- documentation\n<a href=\"https://www.playframework.com/documentation/2.8.x/AssetsOverview\" rel=\"nofollow noreferrer\">https://www.playframework.com/documentation/2.8.x/AssetsOverview</a></p>\n"}],"owner":{"account_id":420478,"reputation":4165,"user_id":798198,"accept_rate":94,"display_name":"andronikus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7833,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":7550948,"answer_count":6,"score":9,"last_activity_date":1656499161,"creation_date":1316974316,"question_id":7547509,"body_markdown":"Part of my app provides a file to be downloaded using the `redirect()` method.  I have found that Chrome (and not Firefox or IE, weirdly) is caching this file so that the same version gets downloaded even if it has changed server-side.  I gather that there is a way to tell a browser not to cache a file, e.g. [like this][1] in the HTML, or by adding something to the HTTP header.  I could probably figure those out in a lower-level web framework, but I don&#39;t know how to get at the header in Play!, and the HTML option won&#39;t work because it&#39;s not an HTML file.\r\n\r\nIt seems like there&#39;s always a clever and simple way to do common tasks in Play!, so is there a clever and simple way to prevent caching in a controller?\r\n\r\nThanks!\r\n\r\n\r\nEdit:\r\n-\r\n\r\nMatt points me to the [`http.cacheControl` setting][2], which controls caching for the entire site.  While this would work, I have no problem with most of the site being cached, especially the CSS etc.  If possible I&#39;d like to control caching for one URL at a time (the one pointing to the downloading file in this case).  It&#39;s not exactly going to be a high-traffic site, so this is just academic interest talking.\r\n\r\nIdeally, I&#39;d like to do something like:\r\n\r\n    public static void downloadFile(String url) {\r\n      response.setCaching(false);  // This is the method I&#39;m looking for\r\n      redirect(url);  // Send the response\r\n    }\r\n\r\n\r\n  [1]: http://lab.artlung.com/anti-cache/\r\n  [2]: http://www.playframework.org/documentation/1.2.3/configuration#http","title":"How do I prevent browser caching with Play?","body":"<p>Part of my app provides a file to be downloaded using the <code>redirect()</code> method.  I have found that Chrome (and not Firefox or IE, weirdly) is caching this file so that the same version gets downloaded even if it has changed server-side.  I gather that there is a way to tell a browser not to cache a file, e.g. <a href=\"http://lab.artlung.com/anti-cache/\" rel=\"noreferrer\">like this</a> in the HTML, or by adding something to the HTTP header.  I could probably figure those out in a lower-level web framework, but I don't know how to get at the header in Play!, and the HTML option won't work because it's not an HTML file.</p>\n\n<p>It seems like there's always a clever and simple way to do common tasks in Play!, so is there a clever and simple way to prevent caching in a controller?</p>\n\n<p>Thanks!</p>\n\n<h2>Edit:</h2>\n\n<p>Matt points me to the <a href=\"http://www.playframework.org/documentation/1.2.3/configuration#http\" rel=\"noreferrer\"><code>http.cacheControl</code> setting</a>, which controls caching for the entire site.  While this would work, I have no problem with most of the site being cached, especially the CSS etc.  If possible I'd like to control caching for one URL at a time (the one pointing to the downloading file in this case).  It's not exactly going to be a high-traffic site, so this is just academic interest talking.</p>\n\n<p>Ideally, I'd like to do something like:</p>\n\n<pre><code>public static void downloadFile(String url) {\n  response.setCaching(false);  // This is the method I'm looking for\n  redirect(url);  // Send the response\n}\n</code></pre>\n"},{"tags":["java","spring-boot","maven","api-gateway","spring-cloud-gateway"],"comments":[{"owner":{"account_id":4099584,"reputation":2238,"user_id":3365479,"accept_rate":80,"display_name":"madteapot"},"score":0,"creation_date":1656495546,"post_id":72798887,"comment_id":128584673,"body_markdown":"curly braces are unsafe characters according to RFC 1738. Try encoding such characters before making the request.","body":"curly braces are unsafe characters according to RFC 1738. Try encoding such characters before making the request."},{"owner":{"account_id":1161650,"reputation":1,"user_id":5861766,"display_name":"wilfredo ronsini"},"score":0,"creation_date":1656500211,"post_id":72798887,"comment_id":128586522,"body_markdown":"This works, but I will receive requests from a customer with the brackets and I don&#39;t know if they will to change their requests format.","body":"This works, but I will receive requests from a customer with the brackets and I don&#39;t know if they will to change their requests format."},{"owner":{"account_id":1161650,"reputation":1,"user_id":5861766,"display_name":"wilfredo ronsini"},"score":0,"creation_date":1656666040,"post_id":72798887,"comment_id":128632863,"body_markdown":"Incoming requests are now encoded and gateway is working as expected. Thanks!","body":"Incoming requests are now encoded and gateway is working as expected. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":10944927,"reputation":491,"user_id":8043392,"display_name":"Shivaji Pote"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656498925,"creation_date":1656498925,"answer_id":72799952,"question_id":72798887,"body_markdown":"Try this configuration\r\n\r\n    spring:\r\n      cloud:\r\n        gateway:\r\n          routes:\r\n          - id: route1\r\n            uri: https://somehosthere.com/\r\n            predicates:\r\n            - Path=/dev/selectconfig/**\r\n            - Query=config\r\n            filters:\r\n            - AddRequestHeader=SOMEKEY, ${SOMEKEY}   \r\n\r\n       \r\nPlease note `Query` predicate. You can add regex in case you want more control over query parameter values. Please refer [this][1] link for more details\r\n\r\n\r\n  [1]: https://spring.getdocs.org/en-US/spring-cloud-docs/spring-cloud-gateway/gateway-request-predicates-factories/the-query-route-predicate-factory.html","title":"Spring cloud gateway refusing query parameters","body":"<p>Try this configuration</p>\n<pre><code>spring:\n  cloud:\n    gateway:\n      routes:\n      - id: route1\n        uri: https://somehosthere.com/\n        predicates:\n        - Path=/dev/selectconfig/**\n        - Query=config\n        filters:\n        - AddRequestHeader=SOMEKEY, ${SOMEKEY}   \n\n   \n</code></pre>\n<p>Please note <code>Query</code> predicate. You can add regex in case you want more control over query parameter values. Please refer <a href=\"https://spring.getdocs.org/en-US/spring-cloud-docs/spring-cloud-gateway/gateway-request-predicates-factories/the-query-route-predicate-factory.html\" rel=\"nofollow noreferrer\">this</a> link for more details</p>\n"}],"owner":{"account_id":1161650,"reputation":1,"user_id":5861766,"display_name":"wilfredo ronsini"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1488,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656498925,"creation_date":1656494344,"question_id":72798887,"body_markdown":"I am starting to set up a Spring Cloud Gateway and it works fine without query parameters in the uri. But I need some parameters and they are not fixed, I do not use them to select the routing, I just need them to be sent along with the uri, without any change.\r\n\r\nFor instance, the url:\r\n\r\nhttp://localhost:8080/dev/selectconfig/v1/ABCDE\r\n\r\nworks but with the query parameters, it doesn&#39;t:\r\n\r\nhttp://localhost:8080/dev/selectconfig/v1/ABCDE?config={&quot;HEIGHT&quot;:22, &quot;WIDTH&quot;: 30}\r\n\r\nI receive 400 Bad request. I would like to redirect to the url:\r\n\r\nhttps://somehosthere.com/dev/selectconfig/v1/ABCDE?config={&quot;HEIGHT&quot;:22, &quot;WIDTH&quot;: 30}\r\n\r\n```\r\nspring:\r\n  cloud:\r\n    gateway:\r\n      routes:\r\n      - id: route1\r\n        uri: https://somehosthere.com/\r\n        predicates:\r\n        - Path=/dev/selectconfig/**\r\n        filters:\r\n        - AddRequestHeader=SOMEKEY, ${SOMEKEY}                  \r\n```\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.1&lt;/version&gt;\r\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.company&lt;/groupId&gt;\r\n    &lt;artifactId&gt;gw&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;gw&lt;/name&gt;\r\n    &lt;description&gt;Gateway application&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\r\n        &lt;io.jsonwebtoken.version&gt;0.11.5&lt;/io.jsonwebtoken.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-circuitbreaker-resilience4j&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${io.jsonwebtoken.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\r\n            &lt;version&gt;${io.jsonwebtoken.version}&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt-orgjson&lt;/artifactId&gt;\r\n            &lt;version&gt;${io.jsonwebtoken.version}&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;       \r\n    &lt;/dependencies&gt;\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;    \r\n\r\n&lt;/project&gt;\r\n```","title":"Spring cloud gateway refusing query parameters","body":"<p>I am starting to set up a Spring Cloud Gateway and it works fine without query parameters in the uri. But I need some parameters and they are not fixed, I do not use them to select the routing, I just need them to be sent along with the uri, without any change.</p>\n<p>For instance, the url:</p>\n<p>http://localhost:8080/dev/selectconfig/v1/ABCDE</p>\n<p>works but with the query parameters, it doesn't:</p>\n<p>http://localhost:8080/dev/selectconfig/v1/ABCDE?config={&quot;HEIGHT&quot;:22, &quot;WIDTH&quot;: 30}</p>\n<p>I receive 400 Bad request. I would like to redirect to the url:</p>\n<p><a href=\"https://somehosthere.com/dev/selectconfig/v1/ABCDE?config=%7B%22HEIGHT%22:22\" rel=\"nofollow noreferrer\">https://somehosthere.com/dev/selectconfig/v1/ABCDE?config={&quot;HEIGHT&quot;:22</a>, &quot;WIDTH&quot;: 30}</p>\n<pre><code>spring:\n  cloud:\n    gateway:\n      routes:\n      - id: route1\n        uri: https://somehosthere.com/\n        predicates:\n        - Path=/dev/selectconfig/**\n        filters:\n        - AddRequestHeader=SOMEKEY, ${SOMEKEY}                  \n</code></pre>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.company&lt;/groupId&gt;\n    &lt;artifactId&gt;gw&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;gw&lt;/name&gt;\n    &lt;description&gt;Gateway application&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\n        &lt;io.jsonwebtoken.version&gt;0.11.5&lt;/io.jsonwebtoken.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-circuitbreaker-resilience4j&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\n            &lt;version&gt;${io.jsonwebtoken.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\n            &lt;version&gt;${io.jsonwebtoken.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-orgjson&lt;/artifactId&gt;\n            &lt;version&gt;${io.jsonwebtoken.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;       \n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;    \n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","amazon-web-services","authorization"],"answers":[{"tags":[],"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1545390171,"creation_date":1495785585,"answer_id":44196523,"question_id":44057730,"body_markdown":"I didn&#39;t have host in the header. When I added it I was able to authenticate. \r\n\r\nThis is what it looks like now:\r\n\r\n    write.connectionReqeuestTimeout(60000);\r\n    write.connectionTimeout(60000);      \r\n\r\n    //Create headers tree map collection - can specify headers to pass into auth class but we have set mandatory headers in class\r\n    TreeMap&lt;String, String&gt; awsHeaders = new TreeMap&lt;String, String&gt;();\r\n\r\n     //Create V4 Auth Headers from Auth Class \r\n    awsHeaders.put(&quot;host&quot;, helper.getSoftlayerEndpoint());\r\n    AWSV4Auth aWSV4Auth = new AWSV4Auth.Builder(helper.getAccessorLogsS3Accesskey(), helper.getAccessorLogsS3Secretkey())\r\n            .regionName(&quot;us-east-1&quot;)\r\n            .serviceName(&quot;s3&quot;) // es - elastic search. use your service name\r\n            .httpMethodName(&quot;GET&quot;) //GET, PUT, POST, DELETE, etc...\r\n            .canonicalURI(&quot;s3-api.xxxx.xxxx.xxxx.net&quot;) //end point\r\n            .queryParametes(null) //query parameters if any&#229;&#231;\r\n            .awsHeaders(awsHeaders) //aws header parameters\r\n            .payload(null) // payload if any\r\n            .debug() // turn on the debug mode\r\n            .build();\r\n\r\n    /* Get headers calculated for request */\r\n    Map&lt;String, String&gt; header = aWSV4Auth.getHeaders();\r\n    for (Map.Entry&lt;String, String&gt; entrySet : header.entrySet()) {\r\n        String key = entrySet.getKey();\r\n        String value = entrySet.getValue();\r\n\r\n        write.header(key, value);\r\n        logger.debug(&quot;Header is: &quot; + write.header(key, value));\r\n    }","title":"AWS Authorization In Java","body":"<p>I didn't have host in the header. When I added it I was able to authenticate. </p>\n\n<p>This is what it looks like now:</p>\n\n<pre><code>write.connectionReqeuestTimeout(60000);\nwrite.connectionTimeout(60000);      \n\n//Create headers tree map collection - can specify headers to pass into auth class but we have set mandatory headers in class\nTreeMap&lt;String, String&gt; awsHeaders = new TreeMap&lt;String, String&gt;();\n\n //Create V4 Auth Headers from Auth Class \nawsHeaders.put(\"host\", helper.getSoftlayerEndpoint());\nAWSV4Auth aWSV4Auth = new AWSV4Auth.Builder(helper.getAccessorLogsS3Accesskey(), helper.getAccessorLogsS3Secretkey())\n        .regionName(\"us-east-1\")\n        .serviceName(\"s3\") // es - elastic search. use your service name\n        .httpMethodName(\"GET\") //GET, PUT, POST, DELETE, etc...\n        .canonicalURI(\"s3-api.xxxx.xxxx.xxxx.net\") //end point\n        .queryParametes(null) //query parameters if any\n        .awsHeaders(awsHeaders) //aws header parameters\n        .payload(null) // payload if any\n        .debug() // turn on the debug mode\n        .build();\n\n/* Get headers calculated for request */\nMap&lt;String, String&gt; header = aWSV4Auth.getHeaders();\nfor (Map.Entry&lt;String, String&gt; entrySet : header.entrySet()) {\n    String key = entrySet.getKey();\n    String value = entrySet.getValue();\n\n    write.header(key, value);\n    logger.debug(\"Header is: \" + write.header(key, value));\n}\n</code></pre>\n"}],"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3321,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44196523,"answer_count":1,"score":1,"last_activity_date":1656498317,"creation_date":1495141421,"question_id":44057730,"body_markdown":"In my Java application I want to create GET on a url which requires me to use an AWS Signature for authorization(AccessKey and SecretKey). Basically, I&#39;m looking to do the equivalent of a GET in Postmanwhere the Authorization type is AWS Signature\r\n\r\nIs there any Java specific tutorial on how to do this?\r\n\r\n\r\nI came across this class on the net:\r\n    \r\n    public class AWSV4Auth {\r\n\r\n\tprivate final static Logger logger = LogManager.getLogger(AWSV4Auth.class);\r\n\r\n\tprivate AWSV4Auth() {\r\n\t}\r\n\r\n\tpublic static class Builder {\r\n\r\n\t\tprivate String accessKeyID;\r\n\t\tprivate String secretAccessKey;\r\n\t\tprivate String regionName;\r\n\t\tprivate String serviceName;\r\n\t\tprivate String httpMethodName;\r\n\t\tprivate String canonicalURI;\r\n\t\tprivate TreeMap&lt;String, String&gt; queryParametes;\r\n\t\tprivate TreeMap&lt;String, String&gt; awsHeaders;\r\n\t\tprivate String payload;\r\n\t\tprivate boolean debug = false;\r\n\r\n\t\tpublic Builder(String accessKeyID, String secretAccessKey) {\r\n\t\t\tthis.accessKeyID = accessKeyID;\r\n\t\t\tthis.secretAccessKey = secretAccessKey;\r\n\t\t}\r\n\r\n\t\tpublic Builder regionName(String regionName) {\r\n\t\t\tthis.regionName = regionName;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic Builder serviceName(String serviceName) {\r\n\t\t\tthis.serviceName = serviceName;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic Builder httpMethodName(String httpMethodName) {\r\n\t\t\tthis.httpMethodName = httpMethodName;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic Builder canonicalURI(String canonicalURI) {\r\n\t\t\tthis.canonicalURI = canonicalURI;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic Builder queryParametes(TreeMap&lt;String, String&gt; queryParametes) {\r\n\t\t\tthis.queryParametes = queryParametes;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic Builder awsHeaders(TreeMap&lt;String, String&gt; awsHeaders) {\r\n\t\t\tthis.awsHeaders = awsHeaders;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic Builder payload(String payload) {\r\n\t\t\tthis.payload = payload;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic Builder debug() {\r\n\t\t\tthis.debug = true;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic AWSV4Auth build() {\r\n\t\t\treturn new AWSV4Auth(this);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate String accessKeyID;\r\n\tprivate String secretAccessKey;\r\n\tprivate String regionName;\r\n\tprivate String serviceName;\r\n\tprivate String httpMethodName;\r\n\tprivate String canonicalURI;\r\n\tprivate TreeMap&lt;String, String&gt; queryParametes;\r\n\tprivate TreeMap&lt;String, String&gt; awsHeaders;\r\n\tprivate String payload;\r\n\tprivate boolean debug = false;\r\n\r\n\t/* Other variables */\r\n\tprivate final String HMACAlgorithm = &quot;AWS4-HMAC-SHA256&quot;;\r\n\tprivate final String aws4Request = &quot;aws4_request&quot;;\r\n\tprivate String strSignedHeader;\r\n\tprivate String xAmzDate;\r\n\tprivate String currentDate;\r\n\r\n\tprivate AWSV4Auth(Builder builder) {\r\n\t\taccessKeyID = builder.accessKeyID;\r\n\t\tsecretAccessKey = builder.secretAccessKey;\r\n\t\tregionName = builder.regionName;\r\n\t\tserviceName = builder.serviceName;\r\n\t\thttpMethodName = builder.httpMethodName;\r\n\t\tcanonicalURI = builder.canonicalURI;\r\n\t\tqueryParametes = builder.queryParametes;\r\n\t\tawsHeaders = builder.awsHeaders;\r\n\t\tpayload = builder.payload;\r\n\t\tdebug = builder.debug;\r\n\r\n\t\t/* Get current timestamp value.(UTC) */\r\n\t\txAmzDate = getTimeStamp();\r\n\t\tcurrentDate = getDate();\r\n\t}\r\n\r\n\t/**\r\n\t * Task 1: Create a Canonical Request for Signature Version 4.\r\n\t *\r\n\t * @return\r\n\t */\r\n\tprivate String prepareCanonicalRequest() {\r\n\t\tStringBuilder canonicalURL = new StringBuilder(&quot;&quot;);\r\n\r\n\t\t/* Step 1.1 Start with the HTTP request method (GET, PUT, POST, etc.), followed by a newline character. */\r\n\t\tcanonicalURL.append(httpMethodName).append(&quot;\\n&quot;);\r\n\r\n\t\t/* Step 1.2 Add the canonical URI parameter, followed by a newline character. */\r\n\t\tcanonicalURI = canonicalURI == null || canonicalURI.trim().isEmpty() ? &quot;/&quot; : canonicalURI;\r\n\t\tcanonicalURL.append(canonicalURI).append(&quot;\\n&quot;);\r\n\r\n\t\t/* Step 1.3 Add the canonical query string, followed by a newline character. */\r\n\t\tStringBuilder queryString = new StringBuilder(&quot;&quot;);\r\n\t\tif (queryParametes != null &amp;&amp; !queryParametes.isEmpty()) {\r\n\t\t\tfor (Map.Entry&lt;String, String&gt; entrySet : queryParametes.entrySet()) {\r\n\t\t\t\tString key = entrySet.getKey();\r\n\t\t\t\tlogger.debug(&quot;this key=&quot; + key);\r\n\t\t\t\tString value = entrySet.getValue();\r\n\t\t\t\tlogger.debug(&quot;this value=&quot; + value);\r\n\t\t\t\tif(key.equals(&quot;a%20cl&quot;))\r\n\t\t\t\t{\r\n\t\t\t\t\tqueryString.append(key).append(&quot;=&quot;).append(URLEncoder.encode(value)).append(&quot;&amp;&quot;);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tqueryString.append(URLEncoder.encode(key)).append(&quot;=&quot;).append(URLEncoder.encode(value)).append(&quot;&amp;&quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tqueryString.setLength(Math.max(queryString.length() - 1, 0));\r\n\r\n\t\t\tqueryString.append(&quot;\\n&quot;);\r\n\t\t} else {\r\n\t\t\tqueryString.append(&quot;\\n&quot;);\r\n\t\t}\r\n\t\tcanonicalURL.append(queryString);\r\n\r\n\t\t/* Step 1.4 Add the canonical headers, followed by a newline character. */\r\n\t\tStringBuilder signedHeaders = new StringBuilder(&quot;&quot;);\r\n\t\tif (awsHeaders != null &amp;&amp; !awsHeaders.isEmpty()) {\r\n\t\t\tfor (Map.Entry&lt;String, String&gt; entrySet : awsHeaders.entrySet()) {\r\n\t\t\t\tString key = entrySet.getKey();\r\n\t\t\t\tString value = entrySet.getValue();\r\n\t\t\t\tsignedHeaders.append(key).append(&quot;;&quot;);\r\n\t\t\t\tcanonicalURL.append(key).append(&quot;:&quot;).append(value).append(&quot;\\n&quot;);\r\n\t\t\t}\r\n\r\n\t\t\t/* Note: Each individual header is followed by a newline character, meaning the complete list ends with a newline character. */\r\n\t\t\tcanonicalURL.append(&quot;\\n&quot;);\r\n\t\t} else {\r\n\t\t\tcanonicalURL.append(&quot;\\n&quot;);\r\n\t\t}\r\n\r\n\t\t/* Step 1.5 Add the signed headers, followed by a newline character. */\r\n\t\tstrSignedHeader = signedHeaders.substring(0, signedHeaders.length() - 1); // Remove last &quot;;&quot;\r\n\t\tcanonicalURL.append(strSignedHeader).append(&quot;\\n&quot;);\r\n\r\n\t\t/* Step 1.6 Use a hash (digest) function like SHA256 to create a hashed value from the payload in the body of the HTTP or HTTPS. */\r\n\t\tpayload = payload == null ? &quot;&quot; : payload;\r\n\t\tcanonicalURL.append(generateHex(payload));\r\n\r\n\t\tif (debug) {\r\n\t\t\tSystem.out.println(&quot;##Canonical Request:\\n&quot; + canonicalURL.toString());\r\n\t\t}\r\n\r\n\t\treturn canonicalURL.toString();\r\n\t}\r\n\r\n\t/**\r\n\t * Task 2: Create a String to Sign for Signature Version 4.\r\n\t *\r\n\t * @param canonicalURL\r\n\t * @return\r\n\t */\r\n\tprivate String prepareStringToSign(String canonicalURL) {\r\n\t\tString stringToSign = &quot;&quot;;\r\n\r\n\t\t/* Step 2.1 Start with the algorithm designation, followed by a newline character. */\r\n\t\tstringToSign = HMACAlgorithm + &quot;\\n&quot;;\r\n\r\n\t\t/* Step 2.2 Append the request date value, followed by a newline character. */\r\n\t\tstringToSign += xAmzDate + &quot;\\n&quot;;\r\n\r\n\t\t/* Step 2.3 Append the credential scope value, followed by a newline character. */\r\n\t\tstringToSign += currentDate + &quot;/&quot; + regionName + &quot;/&quot; + serviceName + &quot;/&quot; + aws4Request + &quot;\\n&quot;;\r\n\r\n\t\t/* Step 2.4 Append the hash of the canonical request that you created in Task 1: Create a Canonical Request for Signature Version 4. */\r\n\t\tstringToSign += generateHex(canonicalURL);\r\n\r\n\t\tif (debug) {\r\n\t\t\tSystem.out.println(&quot;##String to sign:\\n&quot; + stringToSign);\r\n\t\t}\r\n\r\n\t\treturn stringToSign;\r\n\t}\r\n\r\n\t/**\r\n\t * Task 3: Calculate the AWS Signature Version 4.\r\n\t *\r\n\t * @param stringToSign\r\n\t * @return\r\n\t */\r\n\tprivate String calculateSignature(String stringToSign) {\r\n\t\ttry {\r\n\t\t\t/* Step 3.1 Derive your signing key */\r\n\t\t\tbyte[] signatureKey = getSignatureKey(secretAccessKey, currentDate, regionName, serviceName);\r\n\r\n\t\t\t/* Step 3.2 Calculate the signature. */\r\n\t\t\tbyte[] signature = HmacSHA256(signatureKey, stringToSign);\r\n\r\n\t\t\t/* Step 3.2.1 Encode signature (byte[]) to Hex */\r\n\t\t\tString strHexSignature = bytesToHex(signature);\r\n\t\t\treturn strHexSignature;\r\n\t\t} catch (Exception ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Task 4: Add the Signing Information to the Request. We&#39;ll return Map of\r\n\t * all headers put this headers in your request.\r\n\t *\r\n\t * @return\r\n\t */\r\n\tpublic Map&lt;String, String&gt; getHeaders() {\r\n\r\n\t\tpayload = payload == null ? &quot;&quot; : payload;\r\n\r\n\t\t//awsHeaders.put(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n\t\tawsHeaders.put(&quot;x-amz-content-sha256&quot;,generateHex(payload));\r\n\t\t//awsHeaders.put(&quot;x-amz-date&quot;, xAmzDate);\r\n\r\n\t\t/* Execute Task 1: Create a Canonical Request for Signature Version 4. */\r\n\t\tString canonicalURL = prepareCanonicalRequest();\r\n\r\n\t\t/* Execute Task 2: Create a String to Sign for Signature Version 4. */\r\n\t\tString stringToSign = prepareStringToSign(canonicalURL);\r\n\r\n\t\t/* Execute Task 3: Calculate the AWS Signature Version 4. */\r\n\t\tString signature = calculateSignature(stringToSign);\r\n\r\n\t\tif (signature != null) {\r\n\t\t\tMap&lt;String, String&gt; header = new HashMap&lt;String, String&gt;(0);\r\n\t\t\theader.put(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n\t\t\theader.put(&quot;x-amz-content-sha256&quot;,generateHex(payload));\r\n\t\t\theader.put(&quot;x-amz-date&quot;, xAmzDate);\r\n\t\t\theader.put(&quot;Authorization&quot;, buildAuthorizationString(signature));\r\n\r\n\t\t\tlogger.debug(&quot;String to Sign=&quot; + buildAuthorizationString(signature));\r\n\r\n\t\t\tif (debug) {\r\n\t\t\t\tSystem.out.println(&quot;##Signature:\\n&quot; + signature);\r\n\t\t\t\tSystem.out.println(&quot;##Header:&quot;);\r\n\t\t\t\tfor (Map.Entry&lt;String, String&gt; entrySet : header.entrySet()) {\r\n\t\t\t\t\tSystem.out.println(entrySet.getKey() + &quot; = &quot; + entrySet.getValue());\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;================================&quot;);\r\n\t\t\t}\r\n\t\t\tlogger.debug(&quot;The HDR: &quot; + header);\r\n\t\t\treturn header;\r\n\t\t} else {\r\n\t\t\tif (debug) { \r\n\t\t\t\tSystem.out.println(&quot;##Signature:\\n&quot; + signature);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Build string for Authorization header.\r\n\t *\r\n\t * @param strSignature\r\n\t * @return\r\n\t */\r\n\tprivate String buildAuthorizationString(String strSignature) {\r\n\t\treturn HMACAlgorithm + &quot; &quot;\r\n\t\t\t\t+ &quot;Credential=&quot; + accessKeyID + &quot;/&quot; + getDate() + &quot;/&quot; + regionName + &quot;/&quot; + serviceName + &quot;/&quot; + aws4Request + &quot;,&quot;\r\n\t\t\t\t+ &quot; SignedHeaders=content-type;host;&quot; + strSignedHeader + &quot;,&quot;\r\n\t\t\t\t+ &quot; Signature=&quot; + strSignature;\r\n\t\t}\r\n\r\n\t/**\r\n\t * Generate Hex code of String.\r\n\t *\r\n\t * @param data\r\n\t * @return\r\n\t */\r\n\tprivate String generateHex(String data) {\r\n\t\tMessageDigest messageDigest;\r\n\t\ttry {\r\n\t\t\tmessageDigest = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n\t\t\tmessageDigest.update(data.getBytes(&quot;UTF-8&quot;));\r\n\t\t\tbyte[] digest = messageDigest.digest();\r\n\t\t\treturn String.format(&quot;%064x&quot;, new java.math.BigInteger(1, digest));\r\n\t\t} catch (NoSuchAlgorithmException | UnsupportedEncodingException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Apply HmacSHA256 on data using given key.\r\n\t *\r\n\t * @param data\r\n\t * @param key\r\n\t * @return\r\n\t * @throws Exception\r\n\t * @reference:\r\n\t * http://docs.aws.amazon.com/general/latest/gr/signature-v4-examples.html#signature-v4-examples-java\r\n\t */\r\n\tprivate byte[] HmacSHA256(byte[] key, String data) throws Exception {\r\n\t\tString algorithm = &quot;HmacSHA256&quot;;\r\n\t\tMac mac = Mac.getInstance(algorithm);\r\n\t\tmac.init(new SecretKeySpec(key, algorithm));\r\n\t\treturn mac.doFinal(data.getBytes(&quot;UTF8&quot;));\r\n\t}\r\n\r\n\t/**\r\n\t * Generate AWS signature key.\r\n\t *\r\n\t * @param key\r\n\t * @param date\r\n\t * @param regionName\r\n\t * @param serviceName\r\n\t * @return\r\n\t * @throws Exception\r\n\t * @reference\r\n\t * http://docs.aws.amazon.com/general/latest/gr/signature-v4-examples.html#signature-v4-examples-java\r\n\t */\r\n\tprivate byte[] getSignatureKey(String key, String date, String regionName, String serviceName) throws Exception {\r\n\t\tbyte[] kSecret = (&quot;AWS4&quot; + key).getBytes(&quot;UTF8&quot;);\r\n\t\tbyte[] kDate = HmacSHA256(kSecret, date);\r\n\t\tbyte[] kRegion = HmacSHA256(kDate, regionName);\r\n\t\tbyte[] kService = HmacSHA256(kRegion, serviceName);\r\n\t\tbyte[] kSigning = HmacSHA256(kService, aws4Request);\r\n\t\treturn kSigning;\r\n\t}\r\n\r\n\tfinal protected static char[] hexArray = &quot;0123456789ABCDEF&quot;.toCharArray();\r\n\r\n\t/**\r\n\t * Convert byte array to Hex\r\n\t *\r\n\t * @param bytes\r\n\t * @return\r\n\t */\r\n\tprivate String bytesToHex(byte[] bytes) {\r\n\t\tchar[] hexChars = new char[bytes.length * 2];\r\n\t\tfor (int j = 0; j &lt; bytes.length; j++) {\r\n\t\t\tint v = bytes[j] &amp; 0xFF;\r\n\t\t\thexChars[j * 2] = hexArray[v &gt;&gt;&gt; 4];\r\n\t\t\thexChars[j * 2 + 1] = hexArray[v &amp; 0x0F];\r\n\t\t}\r\n\t\treturn new String(hexChars).toLowerCase();\r\n\t}\r\n\r\n\t/**\r\n\t * Get timestamp. yyyyMMdd&#39;T&#39;HHmmss&#39;Z&#39;\r\n\t *\r\n\t * @return\r\n\t */\r\n\tprivate String getTimeStamp() {\r\n\t\tDateFormat dateFormat = new SimpleDateFormat(&quot;yyyyMMdd&#39;T&#39;HHmmss&#39;Z&#39;&quot;);\r\n\t\tdateFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));//server timezone\r\n\t\treturn dateFormat.format(new Date());\r\n\t}\r\n\r\n\tprivate String timestamp() {\r\n\r\n\t\tString fmt = &quot;EEE, dd MMM yyyy HH:mm:ss &quot;;\r\n\t\tSimpleDateFormat df = new SimpleDateFormat(fmt, Locale.US);\r\n\t\tdf.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));\r\n\r\n\t\t// Data needed for signature\r\n\t\tString date = df.format(new Date()) + &quot;GMT&quot;;\r\n\r\n\t\treturn date;\r\n\t}\r\n\r\n\t/**\r\n\t * Get date. yyyyMMdd\r\n\t *\r\n\t * @return\r\n\t */\r\n\tprivate String getDate() {\r\n\t\tDateFormat dateFormat = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\r\n\t\tdateFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));//server timezone\r\n\t\treturn dateFormat.format(new Date());\r\n\t}\r\n    }\r\n\r\nIn the class where I do my GET I added this:\r\n\r\n    write.connectionReqeuestTimeout(60000);\r\n        write.connectionTimeout(60000);      \r\n\r\n        //Create headers tree map collection - can specify headers to pass into auth class but we have set mandatory headers in class\r\n        TreeMap&lt;String, String&gt; awsHeaders = new TreeMap&lt;String, String&gt;();\r\n     \r\n         //Create V4 Auth Headers from Auth Class \r\n        AWSV4Auth aWSV4Auth = new AWSV4Auth.Builder(helper.getAccessorLogsS3Accesskey(), helper.getAccessorLogsS3Secretkey())\r\n                .regionName(&quot;us-east-1&quot;)\r\n                .serviceName(&quot;s3&quot;) // es - elastic search. use your service name\r\n                .httpMethodName(&quot;GET&quot;) //GET, PUT, POST, DELETE, etc...\r\n                .canonicalURI(&quot;s3-api.xxxx.xxxx.xxxx.net&quot;) //end point\r\n                .queryParametes(null) //query parameters if any&#229;&#231;\r\n                .awsHeaders(awsHeaders) //aws header parameters\r\n                .payload(null) // payload if any\r\n                .debug() // turn on the debug mode\r\n                .build();\r\n\r\n        /* Get headers calculated for request */\r\n        Map&lt;String, String&gt; header = aWSV4Auth.getHeaders();\r\n        for (Map.Entry&lt;String, String&gt; entrySet : header.entrySet()) {\r\n            String key = entrySet.getKey();\r\n            String value = entrySet.getValue();\r\n\r\n            write.header(key, value);\r\n            logger.debug(&quot;Header is: &quot; + write.header(key, value));\r\n        }\r\n\r\n\r\nWhen I run it I get this 403 response:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;&lt;Error&gt;&lt;Code&gt;SignatureDoesNotMatch&lt;/Code&gt;&lt;Message&gt;The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. For more information, see REST Authentication and SOAP Authentication for details.&lt;/Message&gt;&lt;Resource&gt;/metrics-staging-cr-test/&lt;/Resource&gt;&lt;RequestId&gt;22933b89-23c2-4341-b573-1794bd40c748&lt;/RequestId&gt;&lt;StringToSign&gt;AWS4-HMAC-SHA256[\\n]&quot;\r\n    &quot;20170524T141126Z[\\n]&quot;\r\n    &quot;20170524/us-east-1/s3/aws4_request[\\n]&quot;\r\n    &quot;9c9315c9a35cad7c1faf753fe9f17d54e8740885f04b8144d14f9d51acb151c0&lt;/StringToSign&gt;&lt;StringToSignBytes&gt;65 87 83 52 45 72 77 65 67 45 83 72 65 50 53 54 10 50 48 49 55 48 53 50 52 84 49 52 49 49 50 54 90 10 50 48 49 55 48 53 50 52 47 117 115 45 101 97 115 116 45 49 47 115 51 47 97 119 115 52 95 114 101 113 117 101 115 116 10 57 99 57 51 49 53 99 57 97 51 53 99 97 100 55 99 49 102 97 102 55 53 51 102 101 57 102 49 55 100 53 52 101 56 55 52 48 56 56 53 102 48 52 98 56 49 52 52 100 49 52 102 57 100 53 49 97 99 98 49 53 49 99 48&lt;/StringToSignBytes&gt;&lt;SignatureProvided&gt;303dd3b942db4681d1e0b6786501c41e28a731e716ad58779b3e7e51f3e409ca&lt;/SignatureProvided&gt;&lt;AWSAccessKeyId&gt;yuKKCFUA6RTEtJGueWK6&lt;/AWSAccessKeyId&gt;&lt;httpStatusCode&gt;403&lt;/httpStatusCode&gt;&lt;/Error&gt;&quot;\r\n\r\nFrom a comparison with Postman my header seems to be setup properly but is rejected while I have no problems in Postman.\r\n\r\nI&#39;ve been through a load of aws web pages on the subject but haven&#39;t had any luck. Can anybody please advise?","title":"AWS Authorization In Java","body":"<p>In my Java application I want to create GET on a url which requires me to use an AWS Signature for authorization(AccessKey and SecretKey). Basically, I'm looking to do the equivalent of a GET in Postmanwhere the Authorization type is AWS Signature</p>\n\n<p>Is there any Java specific tutorial on how to do this?</p>\n\n<p>I came across this class on the net:</p>\n\n<pre><code>public class AWSV4Auth {\n\nprivate final static Logger logger = LogManager.getLogger(AWSV4Auth.class);\n\nprivate AWSV4Auth() {\n}\n\npublic static class Builder {\n\n    private String accessKeyID;\n    private String secretAccessKey;\n    private String regionName;\n    private String serviceName;\n    private String httpMethodName;\n    private String canonicalURI;\n    private TreeMap&lt;String, String&gt; queryParametes;\n    private TreeMap&lt;String, String&gt; awsHeaders;\n    private String payload;\n    private boolean debug = false;\n\n    public Builder(String accessKeyID, String secretAccessKey) {\n        this.accessKeyID = accessKeyID;\n        this.secretAccessKey = secretAccessKey;\n    }\n\n    public Builder regionName(String regionName) {\n        this.regionName = regionName;\n        return this;\n    }\n\n    public Builder serviceName(String serviceName) {\n        this.serviceName = serviceName;\n        return this;\n    }\n\n    public Builder httpMethodName(String httpMethodName) {\n        this.httpMethodName = httpMethodName;\n        return this;\n    }\n\n    public Builder canonicalURI(String canonicalURI) {\n        this.canonicalURI = canonicalURI;\n        return this;\n    }\n\n    public Builder queryParametes(TreeMap&lt;String, String&gt; queryParametes) {\n        this.queryParametes = queryParametes;\n        return this;\n    }\n\n    public Builder awsHeaders(TreeMap&lt;String, String&gt; awsHeaders) {\n        this.awsHeaders = awsHeaders;\n        return this;\n    }\n\n    public Builder payload(String payload) {\n        this.payload = payload;\n        return this;\n    }\n\n    public Builder debug() {\n        this.debug = true;\n        return this;\n    }\n\n    public AWSV4Auth build() {\n        return new AWSV4Auth(this);\n    }\n}\n\nprivate String accessKeyID;\nprivate String secretAccessKey;\nprivate String regionName;\nprivate String serviceName;\nprivate String httpMethodName;\nprivate String canonicalURI;\nprivate TreeMap&lt;String, String&gt; queryParametes;\nprivate TreeMap&lt;String, String&gt; awsHeaders;\nprivate String payload;\nprivate boolean debug = false;\n\n/* Other variables */\nprivate final String HMACAlgorithm = \"AWS4-HMAC-SHA256\";\nprivate final String aws4Request = \"aws4_request\";\nprivate String strSignedHeader;\nprivate String xAmzDate;\nprivate String currentDate;\n\nprivate AWSV4Auth(Builder builder) {\n    accessKeyID = builder.accessKeyID;\n    secretAccessKey = builder.secretAccessKey;\n    regionName = builder.regionName;\n    serviceName = builder.serviceName;\n    httpMethodName = builder.httpMethodName;\n    canonicalURI = builder.canonicalURI;\n    queryParametes = builder.queryParametes;\n    awsHeaders = builder.awsHeaders;\n    payload = builder.payload;\n    debug = builder.debug;\n\n    /* Get current timestamp value.(UTC) */\n    xAmzDate = getTimeStamp();\n    currentDate = getDate();\n}\n\n/**\n * Task 1: Create a Canonical Request for Signature Version 4.\n *\n * @return\n */\nprivate String prepareCanonicalRequest() {\n    StringBuilder canonicalURL = new StringBuilder(\"\");\n\n    /* Step 1.1 Start with the HTTP request method (GET, PUT, POST, etc.), followed by a newline character. */\n    canonicalURL.append(httpMethodName).append(\"\\n\");\n\n    /* Step 1.2 Add the canonical URI parameter, followed by a newline character. */\n    canonicalURI = canonicalURI == null || canonicalURI.trim().isEmpty() ? \"/\" : canonicalURI;\n    canonicalURL.append(canonicalURI).append(\"\\n\");\n\n    /* Step 1.3 Add the canonical query string, followed by a newline character. */\n    StringBuilder queryString = new StringBuilder(\"\");\n    if (queryParametes != null &amp;&amp; !queryParametes.isEmpty()) {\n        for (Map.Entry&lt;String, String&gt; entrySet : queryParametes.entrySet()) {\n            String key = entrySet.getKey();\n            logger.debug(\"this key=\" + key);\n            String value = entrySet.getValue();\n            logger.debug(\"this value=\" + value);\n            if(key.equals(\"a%20cl\"))\n            {\n                queryString.append(key).append(\"=\").append(URLEncoder.encode(value)).append(\"&amp;\");\n            }\n            else\n            {\n                queryString.append(URLEncoder.encode(key)).append(\"=\").append(URLEncoder.encode(value)).append(\"&amp;\");\n            }\n        }\n        queryString.setLength(Math.max(queryString.length() - 1, 0));\n\n        queryString.append(\"\\n\");\n    } else {\n        queryString.append(\"\\n\");\n    }\n    canonicalURL.append(queryString);\n\n    /* Step 1.4 Add the canonical headers, followed by a newline character. */\n    StringBuilder signedHeaders = new StringBuilder(\"\");\n    if (awsHeaders != null &amp;&amp; !awsHeaders.isEmpty()) {\n        for (Map.Entry&lt;String, String&gt; entrySet : awsHeaders.entrySet()) {\n            String key = entrySet.getKey();\n            String value = entrySet.getValue();\n            signedHeaders.append(key).append(\";\");\n            canonicalURL.append(key).append(\":\").append(value).append(\"\\n\");\n        }\n\n        /* Note: Each individual header is followed by a newline character, meaning the complete list ends with a newline character. */\n        canonicalURL.append(\"\\n\");\n    } else {\n        canonicalURL.append(\"\\n\");\n    }\n\n    /* Step 1.5 Add the signed headers, followed by a newline character. */\n    strSignedHeader = signedHeaders.substring(0, signedHeaders.length() - 1); // Remove last \";\"\n    canonicalURL.append(strSignedHeader).append(\"\\n\");\n\n    /* Step 1.6 Use a hash (digest) function like SHA256 to create a hashed value from the payload in the body of the HTTP or HTTPS. */\n    payload = payload == null ? \"\" : payload;\n    canonicalURL.append(generateHex(payload));\n\n    if (debug) {\n        System.out.println(\"##Canonical Request:\\n\" + canonicalURL.toString());\n    }\n\n    return canonicalURL.toString();\n}\n\n/**\n * Task 2: Create a String to Sign for Signature Version 4.\n *\n * @param canonicalURL\n * @return\n */\nprivate String prepareStringToSign(String canonicalURL) {\n    String stringToSign = \"\";\n\n    /* Step 2.1 Start with the algorithm designation, followed by a newline character. */\n    stringToSign = HMACAlgorithm + \"\\n\";\n\n    /* Step 2.2 Append the request date value, followed by a newline character. */\n    stringToSign += xAmzDate + \"\\n\";\n\n    /* Step 2.3 Append the credential scope value, followed by a newline character. */\n    stringToSign += currentDate + \"/\" + regionName + \"/\" + serviceName + \"/\" + aws4Request + \"\\n\";\n\n    /* Step 2.4 Append the hash of the canonical request that you created in Task 1: Create a Canonical Request for Signature Version 4. */\n    stringToSign += generateHex(canonicalURL);\n\n    if (debug) {\n        System.out.println(\"##String to sign:\\n\" + stringToSign);\n    }\n\n    return stringToSign;\n}\n\n/**\n * Task 3: Calculate the AWS Signature Version 4.\n *\n * @param stringToSign\n * @return\n */\nprivate String calculateSignature(String stringToSign) {\n    try {\n        /* Step 3.1 Derive your signing key */\n        byte[] signatureKey = getSignatureKey(secretAccessKey, currentDate, regionName, serviceName);\n\n        /* Step 3.2 Calculate the signature. */\n        byte[] signature = HmacSHA256(signatureKey, stringToSign);\n\n        /* Step 3.2.1 Encode signature (byte[]) to Hex */\n        String strHexSignature = bytesToHex(signature);\n        return strHexSignature;\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    }\n    return null;\n}\n\n/**\n * Task 4: Add the Signing Information to the Request. We'll return Map of\n * all headers put this headers in your request.\n *\n * @return\n */\npublic Map&lt;String, String&gt; getHeaders() {\n\n    payload = payload == null ? \"\" : payload;\n\n    //awsHeaders.put(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    awsHeaders.put(\"x-amz-content-sha256\",generateHex(payload));\n    //awsHeaders.put(\"x-amz-date\", xAmzDate);\n\n    /* Execute Task 1: Create a Canonical Request for Signature Version 4. */\n    String canonicalURL = prepareCanonicalRequest();\n\n    /* Execute Task 2: Create a String to Sign for Signature Version 4. */\n    String stringToSign = prepareStringToSign(canonicalURL);\n\n    /* Execute Task 3: Calculate the AWS Signature Version 4. */\n    String signature = calculateSignature(stringToSign);\n\n    if (signature != null) {\n        Map&lt;String, String&gt; header = new HashMap&lt;String, String&gt;(0);\n        header.put(\"Content-Type\", \"application/x-www-form-urlencoded\");\n        header.put(\"x-amz-content-sha256\",generateHex(payload));\n        header.put(\"x-amz-date\", xAmzDate);\n        header.put(\"Authorization\", buildAuthorizationString(signature));\n\n        logger.debug(\"String to Sign=\" + buildAuthorizationString(signature));\n\n        if (debug) {\n            System.out.println(\"##Signature:\\n\" + signature);\n            System.out.println(\"##Header:\");\n            for (Map.Entry&lt;String, String&gt; entrySet : header.entrySet()) {\n                System.out.println(entrySet.getKey() + \" = \" + entrySet.getValue());\n            }\n            System.out.println(\"================================\");\n        }\n        logger.debug(\"The HDR: \" + header);\n        return header;\n    } else {\n        if (debug) { \n            System.out.println(\"##Signature:\\n\" + signature);\n        }\n        return null;\n    }\n}\n\n/**\n * Build string for Authorization header.\n *\n * @param strSignature\n * @return\n */\nprivate String buildAuthorizationString(String strSignature) {\n    return HMACAlgorithm + \" \"\n            + \"Credential=\" + accessKeyID + \"/\" + getDate() + \"/\" + regionName + \"/\" + serviceName + \"/\" + aws4Request + \",\"\n            + \" SignedHeaders=content-type;host;\" + strSignedHeader + \",\"\n            + \" Signature=\" + strSignature;\n    }\n\n/**\n * Generate Hex code of String.\n *\n * @param data\n * @return\n */\nprivate String generateHex(String data) {\n    MessageDigest messageDigest;\n    try {\n        messageDigest = MessageDigest.getInstance(\"SHA-256\");\n        messageDigest.update(data.getBytes(\"UTF-8\"));\n        byte[] digest = messageDigest.digest();\n        return String.format(\"%064x\", new java.math.BigInteger(1, digest));\n    } catch (NoSuchAlgorithmException | UnsupportedEncodingException e) {\n        e.printStackTrace();\n    }\n    return null;\n}\n\n/**\n * Apply HmacSHA256 on data using given key.\n *\n * @param data\n * @param key\n * @return\n * @throws Exception\n * @reference:\n * http://docs.aws.amazon.com/general/latest/gr/signature-v4-examples.html#signature-v4-examples-java\n */\nprivate byte[] HmacSHA256(byte[] key, String data) throws Exception {\n    String algorithm = \"HmacSHA256\";\n    Mac mac = Mac.getInstance(algorithm);\n    mac.init(new SecretKeySpec(key, algorithm));\n    return mac.doFinal(data.getBytes(\"UTF8\"));\n}\n\n/**\n * Generate AWS signature key.\n *\n * @param key\n * @param date\n * @param regionName\n * @param serviceName\n * @return\n * @throws Exception\n * @reference\n * http://docs.aws.amazon.com/general/latest/gr/signature-v4-examples.html#signature-v4-examples-java\n */\nprivate byte[] getSignatureKey(String key, String date, String regionName, String serviceName) throws Exception {\n    byte[] kSecret = (\"AWS4\" + key).getBytes(\"UTF8\");\n    byte[] kDate = HmacSHA256(kSecret, date);\n    byte[] kRegion = HmacSHA256(kDate, regionName);\n    byte[] kService = HmacSHA256(kRegion, serviceName);\n    byte[] kSigning = HmacSHA256(kService, aws4Request);\n    return kSigning;\n}\n\nfinal protected static char[] hexArray = \"0123456789ABCDEF\".toCharArray();\n\n/**\n * Convert byte array to Hex\n *\n * @param bytes\n * @return\n */\nprivate String bytesToHex(byte[] bytes) {\n    char[] hexChars = new char[bytes.length * 2];\n    for (int j = 0; j &lt; bytes.length; j++) {\n        int v = bytes[j] &amp; 0xFF;\n        hexChars[j * 2] = hexArray[v &gt;&gt;&gt; 4];\n        hexChars[j * 2 + 1] = hexArray[v &amp; 0x0F];\n    }\n    return new String(hexChars).toLowerCase();\n}\n\n/**\n * Get timestamp. yyyyMMdd'T'HHmmss'Z'\n *\n * @return\n */\nprivate String getTimeStamp() {\n    DateFormat dateFormat = new SimpleDateFormat(\"yyyyMMdd'T'HHmmss'Z'\");\n    dateFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));//server timezone\n    return dateFormat.format(new Date());\n}\n\nprivate String timestamp() {\n\n    String fmt = \"EEE, dd MMM yyyy HH:mm:ss \";\n    SimpleDateFormat df = new SimpleDateFormat(fmt, Locale.US);\n    df.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n\n    // Data needed for signature\n    String date = df.format(new Date()) + \"GMT\";\n\n    return date;\n}\n\n/**\n * Get date. yyyyMMdd\n *\n * @return\n */\nprivate String getDate() {\n    DateFormat dateFormat = new SimpleDateFormat(\"yyyyMMdd\");\n    dateFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));//server timezone\n    return dateFormat.format(new Date());\n}\n}\n</code></pre>\n\n<p>In the class where I do my GET I added this:</p>\n\n<pre><code>write.connectionReqeuestTimeout(60000);\n    write.connectionTimeout(60000);      \n\n    //Create headers tree map collection - can specify headers to pass into auth class but we have set mandatory headers in class\n    TreeMap&lt;String, String&gt; awsHeaders = new TreeMap&lt;String, String&gt;();\n\n     //Create V4 Auth Headers from Auth Class \n    AWSV4Auth aWSV4Auth = new AWSV4Auth.Builder(helper.getAccessorLogsS3Accesskey(), helper.getAccessorLogsS3Secretkey())\n            .regionName(\"us-east-1\")\n            .serviceName(\"s3\") // es - elastic search. use your service name\n            .httpMethodName(\"GET\") //GET, PUT, POST, DELETE, etc...\n            .canonicalURI(\"s3-api.xxxx.xxxx.xxxx.net\") //end point\n            .queryParametes(null) //query parameters if any\n            .awsHeaders(awsHeaders) //aws header parameters\n            .payload(null) // payload if any\n            .debug() // turn on the debug mode\n            .build();\n\n    /* Get headers calculated for request */\n    Map&lt;String, String&gt; header = aWSV4Auth.getHeaders();\n    for (Map.Entry&lt;String, String&gt; entrySet : header.entrySet()) {\n        String key = entrySet.getKey();\n        String value = entrySet.getValue();\n\n        write.header(key, value);\n        logger.debug(\"Header is: \" + write.header(key, value));\n    }\n</code></pre>\n\n<p>When I run it I get this 403 response:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;&lt;Error&gt;&lt;Code&gt;SignatureDoesNotMatch&lt;/Code&gt;&lt;Message&gt;The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. For more information, see REST Authentication and SOAP Authentication for details.&lt;/Message&gt;&lt;Resource&gt;/metrics-staging-cr-test/&lt;/Resource&gt;&lt;RequestId&gt;22933b89-23c2-4341-b573-1794bd40c748&lt;/RequestId&gt;&lt;StringToSign&gt;AWS4-HMAC-SHA256[\\n]\"\n\"20170524T141126Z[\\n]\"\n\"20170524/us-east-1/s3/aws4_request[\\n]\"\n\"9c9315c9a35cad7c1faf753fe9f17d54e8740885f04b8144d14f9d51acb151c0&lt;/StringToSign&gt;&lt;StringToSignBytes&gt;65 87 83 52 45 72 77 65 67 45 83 72 65 50 53 54 10 50 48 49 55 48 53 50 52 84 49 52 49 49 50 54 90 10 50 48 49 55 48 53 50 52 47 117 115 45 101 97 115 116 45 49 47 115 51 47 97 119 115 52 95 114 101 113 117 101 115 116 10 57 99 57 51 49 53 99 57 97 51 53 99 97 100 55 99 49 102 97 102 55 53 51 102 101 57 102 49 55 100 53 52 101 56 55 52 48 56 56 53 102 48 52 98 56 49 52 52 100 49 52 102 57 100 53 49 97 99 98 49 53 49 99 48&lt;/StringToSignBytes&gt;&lt;SignatureProvided&gt;303dd3b942db4681d1e0b6786501c41e28a731e716ad58779b3e7e51f3e409ca&lt;/SignatureProvided&gt;&lt;AWSAccessKeyId&gt;yuKKCFUA6RTEtJGueWK6&lt;/AWSAccessKeyId&gt;&lt;httpStatusCode&gt;403&lt;/httpStatusCode&gt;&lt;/Error&gt;\"\n</code></pre>\n\n<p>From a comparison with Postman my header seems to be setup properly but is rejected while I have no problems in Postman.</p>\n\n<p>I've been through a load of aws web pages on the subject but haven't had any luck. Can anybody please advise?</p>\n"},{"tags":["java","elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":11575363,"reputation":473,"user_id":8480863,"display_name":"brugia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656498182,"creation_date":1656498182,"answer_id":72799767,"question_id":72783477,"body_markdown":"You&#39;re close but you need to implement the &quot;date_range_aggregation&quot; to get the results you are looking for. \r\n\r\n\r\nYour terms aggregation is ok, all you need to do is add the date_range_aggregation as a subaggregation to the terms aggregation. \r\n\r\n\r\nFor your &quot;null&quot; values, set a &quot;missing&quot; value as something in the past.That way you can pick that up as a third bucket.\r\n\r\nSample[in json]:\r\n\r\n```\r\n{\r\n   &quot;aggs&quot;: {\r\n       &quot;range&quot;: {\r\n           &quot;date_range&quot;: {\r\n               &quot;field&quot;: &quot;date&quot;,\r\n               &quot;missing&quot;: &quot;1976/11/30&quot;,\r\n               &quot;ranges&quot;: [\r\n                  { \r\n                    &quot;key&quot;: &quot;Oldest&quot;,\r\n                    &quot;to&quot; : &quot;1976/11/30&quot;\r\n                  },\r\n                  {\r\n                    &quot;key&quot;: &quot;Past&quot;,\r\n                    &quot;from&quot; : &quot;1976/11/30&quot;\r\n                    &quot;to&quot;: &quot;now&quot;\r\n                  }, \r\n                  {\r\n                    &quot;key&quot;: &quot;Future&quot;,\r\n                    &quot;from&quot;: &quot;now&quot;\r\n                  }\r\n              ]\r\n          }\r\n      }\r\n   }\r\n}\r\n```\r\n\r\nLet me know if this works for you.\r\n","title":"In elastic search aggregate by one field then by two fields using date range","body":"<p>You're close but you need to implement the &quot;date_range_aggregation&quot; to get the results you are looking for.</p>\n<p>Your terms aggregation is ok, all you need to do is add the date_range_aggregation as a subaggregation to the terms aggregation.</p>\n<p>For your &quot;null&quot; values, set a &quot;missing&quot; value as something in the past.That way you can pick that up as a third bucket.</p>\n<p>Sample[in json]:</p>\n<pre><code>{\n   &quot;aggs&quot;: {\n       &quot;range&quot;: {\n           &quot;date_range&quot;: {\n               &quot;field&quot;: &quot;date&quot;,\n               &quot;missing&quot;: &quot;1976/11/30&quot;,\n               &quot;ranges&quot;: [\n                  { \n                    &quot;key&quot;: &quot;Oldest&quot;,\n                    &quot;to&quot; : &quot;1976/11/30&quot;\n                  },\n                  {\n                    &quot;key&quot;: &quot;Past&quot;,\n                    &quot;from&quot; : &quot;1976/11/30&quot;\n                    &quot;to&quot;: &quot;now&quot;\n                  }, \n                  {\n                    &quot;key&quot;: &quot;Future&quot;,\n                    &quot;from&quot;: &quot;now&quot;\n                  }\n              ]\n          }\n      }\n   }\n}\n</code></pre>\n<p>Let me know if this works for you.</p>\n"}],"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1656498182,"creation_date":1656406459,"question_id":72783477,"body_markdown":"I have entity of this type saved to elasticSearch:\r\n\r\n    class Value {\r\n      \r\n      private Integer priority;\r\n      private Date dueDate;\r\n   }\r\n\r\nFor priority possible values are 1 and 2(I know that enum should be used but let&#39;s not concentrate on that).\r\nNow using elastic search I want to get the following result:\r\n1. How many values I have with priority 1 that have dueDate today or in the past\r\n2. How many values I have with priority 1 that have dueDate null or in the future\r\n3. How many values I have with priority 2 that have dueDate today or in the past\r\n4. How many values I have with priority 2 that have dueDate null or in the future\r\n\r\nWhat I tried doing is the following:\r\n\r\n    SearchRequest request = new SearchRequest.Builder()\r\n                    .index(MY_INDEX)\r\n                    .query(getQuery(someKeys))\r\n                    .aggregations(ELASTIC_AGG_PRIORITY, Aggregation.of(a -&gt;\r\n                            a.terms(terms -&gt; terms.field(ELASTIC_AGG_PRIORITY).missing(&quot;&quot;))))\r\n                    .build();\r\n\r\nThis will get me aggregations that are grouped by priority and will know the number of values with priority 1 and with priority 2. But I need to add nested aggregations and here is my issue. How to separate these buckets that I am getting into one with dueDate in past or today and with dueDate in future or null. Additionally I am having issue with writing the range query:\r\n\r\n    public static Query getRangeQuery(String field) {\r\n        return QueryBuilders.range().field(field).lte(JsonData.of(new Date())).build()._toQuery();\r\n    }\r\n\r\nI am not able to pass the year and I don&#39;t know how to handle the nulls when I need to select everything in the future and null values. I tried the following but not getting the result I need:\r\n\r\n    SearchRequest request = new SearchRequest.Builder()\r\n                    .index(MY_INDEX)\r\n                    .query(getQuery(someKeys))\r\n                    .aggregations(ELASTIC_AGG_ASSIGNEE, Aggregation.of(a -&gt;\r\n                            a.terms(terms -&gt; terms.field(ELASTIC_AGG_ASSIGNEE).missing(&quot;&quot;))))\r\n                    .aggregations(ELASTIC_AGG_PRIORITY, Aggregation.of(a -&gt;\r\n                                    a.terms(terms -&gt; terms.field(ELASTIC_AGG_PRIORITY).missing(&quot;&quot;))\r\n                                            .aggregations(ELASTIC_AGG_PRIORITY, Aggregation.of(filterAgg -&gt; filterAgg\r\n                                                    .filter(QueryUtil.getRangeQuery(&quot;dueDate&quot;))))\r\n                            )\r\n                    ).build();\r\n\r\nwhere `QueryUtil.getRangeQuery(` is the method described above.\r\n\r\nSo to summarise my question is how to get the 4 above mentioned results? \r\n","title":"In elastic search aggregate by one field then by two fields using date range","body":"<p>I have entity of this type saved to elasticSearch:</p>\n<pre><code>class Value {\n  \n  private Integer priority;\n  private Date dueDate;\n</code></pre>\n<p>}</p>\n<p>For priority possible values are 1 and 2(I know that enum should be used but let's not concentrate on that).\nNow using elastic search I want to get the following result:</p>\n<ol>\n<li>How many values I have with priority 1 that have dueDate today or in the past</li>\n<li>How many values I have with priority 1 that have dueDate null or in the future</li>\n<li>How many values I have with priority 2 that have dueDate today or in the past</li>\n<li>How many values I have with priority 2 that have dueDate null or in the future</li>\n</ol>\n<p>What I tried doing is the following:</p>\n<pre><code>SearchRequest request = new SearchRequest.Builder()\n                .index(MY_INDEX)\n                .query(getQuery(someKeys))\n                .aggregations(ELASTIC_AGG_PRIORITY, Aggregation.of(a -&gt;\n                        a.terms(terms -&gt; terms.field(ELASTIC_AGG_PRIORITY).missing(&quot;&quot;))))\n                .build();\n</code></pre>\n<p>This will get me aggregations that are grouped by priority and will know the number of values with priority 1 and with priority 2. But I need to add nested aggregations and here is my issue. How to separate these buckets that I am getting into one with dueDate in past or today and with dueDate in future or null. Additionally I am having issue with writing the range query:</p>\n<pre><code>public static Query getRangeQuery(String field) {\n    return QueryBuilders.range().field(field).lte(JsonData.of(new Date())).build()._toQuery();\n}\n</code></pre>\n<p>I am not able to pass the year and I don't know how to handle the nulls when I need to select everything in the future and null values. I tried the following but not getting the result I need:</p>\n<pre><code>SearchRequest request = new SearchRequest.Builder()\n                .index(MY_INDEX)\n                .query(getQuery(someKeys))\n                .aggregations(ELASTIC_AGG_ASSIGNEE, Aggregation.of(a -&gt;\n                        a.terms(terms -&gt; terms.field(ELASTIC_AGG_ASSIGNEE).missing(&quot;&quot;))))\n                .aggregations(ELASTIC_AGG_PRIORITY, Aggregation.of(a -&gt;\n                                a.terms(terms -&gt; terms.field(ELASTIC_AGG_PRIORITY).missing(&quot;&quot;))\n                                        .aggregations(ELASTIC_AGG_PRIORITY, Aggregation.of(filterAgg -&gt; filterAgg\n                                                .filter(QueryUtil.getRangeQuery(&quot;dueDate&quot;))))\n                        )\n                ).build();\n</code></pre>\n<p>where <code>QueryUtil.getRangeQuery(</code> is the method described above.</p>\n<p>So to summarise my question is how to get the 4 above mentioned results?</p>\n"},{"tags":["java","spring-boot","drools"],"comments":[{"owner":{"account_id":2963,"reputation":5270,"user_id":4206,"accept_rate":75,"display_name":"Luca Molteni"},"score":0,"creation_date":1610959557,"post_id":65763075,"comment_id":116287202,"body_markdown":"Why don&#39;t you iterate the items in the root list and add the values in the working memory? In that way you can create another rule to match the children and avoid using all the from. It should be even simpler to debug it","body":"Why don&#39;t you iterate the items in the root list and add the values in the working memory? In that way you can create another rule to match the children and avoid using all the from. It should be even simpler to debug it"}],"answers":[{"tags":[],"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611236583,"creation_date":1611153494,"answer_id":65811687,"question_id":65763075,"body_markdown":"I once had the misfortune of working on a project where we made this same mistake and had our class extend HashMap. (Fair warning: HashMap doesn&#39;t serialize well so you&#39;re going to use a lot of extra memory.)\r\n\r\nI&#39;m going to assume several things about your model because you neglected to share the class definition itself. \r\n\r\nBut I&#39;m going to assume the following, based on your example JSON:\r\n* You have added a string value (&quot;value&quot;) with the key &quot;key1&quot;\r\n* You have added a `List&lt;Map&lt;String, ?&gt;&gt;` value (possibly a `List&lt;Fact&gt;`) with the key &quot;locks&quot;\r\n* You have added a `List&lt;Map&lt;String, ?&gt;&gt;` value (possibly a `List&lt;Fact&gt;`) with the key &quot;attributes&quot;\r\n\r\nThe HashMap&#39;s `get(key)` method will return an object value; you&#39;ve already noted the special `this[ key ]` syntax.\r\n\r\nFrom your partial rule attempt, it&#39;s not entirely clear what you&#39;re trying to do. I _think_ you&#39;re trying to get the `List&lt;Map&lt;String, ?&gt;&gt;` that is saved in your map under the &quot;attributes&quot; key.\r\n\r\n```\r\nrule &quot;Do something with the attributes&quot;\r\nwhen\r\n  $fact: Fact( this[&quot;key1&quot;] != null,\r\n               $attr: this[&quot;attributes&quot;] != null )\r\nthen\r\n  System.out.println(&quot;Found &quot; + $attr.size() + &quot; attributes&quot;);\r\nend\r\n```\r\n\r\n`this[&quot;attributes&quot;]` returns the value associated with the key attributes. In this case, it&#39;s a List or whatever you shoved in there. If the key doesn&#39;t exist, the null check handles that.\r\n\r\nYou also asked how you could do stuff with a child map inside one of those lists. Let&#39;s say that want to do something with the attribute that has `&quot;name&quot;: &quot;name1&quot;` ...\r\n\r\n```\r\nrule &quot;Do something with the &#39;name = name1&#39; attribute&quot;\r\nwhen\r\n  $fact: Fact( this[&quot;key1&quot;] != null,\r\n               $attributes: this[&quot;attributes&quot;] != null )\r\n  \r\n  $nameAttr: Map( this[&quot;name&quot;] == &quot;name1&quot; ) from $attributes\r\nthen\r\n  // do something with $nameAttr\r\nend\r\n```\r\n\r\nThe pattern repeats, of course. Let&#39;s say you&#39;ve shoved yet another `List&lt;Map&lt;String, ?&gt;&gt;` into your attribute maps:\r\n\r\n```\r\nrule &quot;Do something with a child of &#39;name&#39; attribute&quot;\r\nwhen\r\n  $fact: Fact( this[&quot;key1&quot;] != null,\r\n               $attributes: this[&quot;attributes&quot;] != null )\r\n\r\n  $nameAttr: Map( this[&quot;name&quot;] == &quot;name1&quot;,\r\n                  $attrKids: this[&quot;children&quot;] != null ) from $attributes\r\n\r\n  $childNameAttr: Map( this[&quot;name&quot;] == &quot;child1&quot; ) from $attrKids\r\n\r\nthen\r\n  // etc.\r\nend\r\n```\r\n\r\nI strongly recommend reconsidering your object model to not be Map-based. At the company I worked at where all of our projects were built against a nested Map-based model and running Drools 5.0.1, I spent significant time and effort upgrading parts of it to Drools 7 and a proper model that passed in just the data we needed. It saved a _ton_ of resources and ended up being much faster. ","title":"Validate facts having nested maps using drools","body":"<p>I once had the misfortune of working on a project where we made this same mistake and had our class extend HashMap. (Fair warning: HashMap doesn't serialize well so you're going to use a lot of extra memory.)</p>\n<p>I'm going to assume several things about your model because you neglected to share the class definition itself.</p>\n<p>But I'm going to assume the following, based on your example JSON:</p>\n<ul>\n<li>You have added a string value (&quot;value&quot;) with the key &quot;key1&quot;</li>\n<li>You have added a <code>List&lt;Map&lt;String, ?&gt;&gt;</code> value (possibly a <code>List&lt;Fact&gt;</code>) with the key &quot;locks&quot;</li>\n<li>You have added a <code>List&lt;Map&lt;String, ?&gt;&gt;</code> value (possibly a <code>List&lt;Fact&gt;</code>) with the key &quot;attributes&quot;</li>\n</ul>\n<p>The HashMap's <code>get(key)</code> method will return an object value; you've already noted the special <code>this[ key ]</code> syntax.</p>\n<p>From your partial rule attempt, it's not entirely clear what you're trying to do. I <em>think</em> you're trying to get the <code>List&lt;Map&lt;String, ?&gt;&gt;</code> that is saved in your map under the &quot;attributes&quot; key.</p>\n<pre><code>rule &quot;Do something with the attributes&quot;\nwhen\n  $fact: Fact( this[&quot;key1&quot;] != null,\n               $attr: this[&quot;attributes&quot;] != null )\nthen\n  System.out.println(&quot;Found &quot; + $attr.size() + &quot; attributes&quot;);\nend\n</code></pre>\n<p><code>this[&quot;attributes&quot;]</code> returns the value associated with the key attributes. In this case, it's a List or whatever you shoved in there. If the key doesn't exist, the null check handles that.</p>\n<p>You also asked how you could do stuff with a child map inside one of those lists. Let's say that want to do something with the attribute that has <code>&quot;name&quot;: &quot;name1&quot;</code> ...</p>\n<pre><code>rule &quot;Do something with the 'name = name1' attribute&quot;\nwhen\n  $fact: Fact( this[&quot;key1&quot;] != null,\n               $attributes: this[&quot;attributes&quot;] != null )\n  \n  $nameAttr: Map( this[&quot;name&quot;] == &quot;name1&quot; ) from $attributes\nthen\n  // do something with $nameAttr\nend\n</code></pre>\n<p>The pattern repeats, of course. Let's say you've shoved yet another <code>List&lt;Map&lt;String, ?&gt;&gt;</code> into your attribute maps:</p>\n<pre><code>rule &quot;Do something with a child of 'name' attribute&quot;\nwhen\n  $fact: Fact( this[&quot;key1&quot;] != null,\n               $attributes: this[&quot;attributes&quot;] != null )\n\n  $nameAttr: Map( this[&quot;name&quot;] == &quot;name1&quot;,\n                  $attrKids: this[&quot;children&quot;] != null ) from $attributes\n\n  $childNameAttr: Map( this[&quot;name&quot;] == &quot;child1&quot; ) from $attrKids\n\nthen\n  // etc.\nend\n</code></pre>\n<p>I strongly recommend reconsidering your object model to not be Map-based. At the company I worked at where all of our projects were built against a nested Map-based model and running Drools 5.0.1, I spent significant time and effort upgrading parts of it to Drools 7 and a proper model that passed in just the data we needed. It saved a <em>ton</em> of resources and ended up being much faster.</p>\n"}],"owner":{"account_id":5665924,"reputation":23,"user_id":4482112,"display_name":"Tej Pal Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":617,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656498175,"creation_date":1610900573,"question_id":65763075,"body_markdown":"I have a class ```Fact``` which is a extends ```java.util.HashMap``` class. I am passing object of this class as fact to drools.\r\nNow an instance of fact looks like this (Map&lt;String, Object&gt;):\r\n```\r\n{\r\n&quot;key1&quot;: &quot;value&quot;\r\n&quot;attributes&quot;: [{&quot;name&quot;: &quot;name1&quot;, &quot;value&quot;: &quot;value1&quot;},{&quot;name&quot;: &quot;name2&quot;, &quot;value&quot;: &quot;value2&quot;},{&quot;name&quot;: &quot;name3&quot;, &quot;value&quot;: &quot;value3&quot;}...]\r\n&quot;locks&quot;: [{&quot;type&quot;: &quot;type1&quot;, &quot;value&quot;: &quot;value1&quot;, &quot;attributes&quot;: {&quot;key_a1&quot;: &quot;val_a1&quot;&quot;key_a2&quot;: &quot;val_a2&quot;...}}]\r\n}\r\n```\r\nRunning validations on root level entries in this map is straight forward e.g. running validations on ```key1```.&lt;br/&gt;\r\nNow, I want to run some validations on ```attributes``` and ```locks```.\r\nFor attributes, I want to ensure that all attributes which are needed are present in this map and their corresponding values are correct. So I do this in the when block:\r\n```\r\nfact: Fact(this[&quot;key1&quot;] != null &amp;&amp; this.containsKey(&quot;attributes&quot;));\r\nattributesEntries: Entry(key == &quot;attributes&quot;) from fact.entrySet();\r\nattributesMaps: LinkedHashMap() from attributesEntries;\r\n```\r\nfact is ```HashMap```&lt;br/&gt;\r\nattributes are of type ```ArrayList&lt;LinkedHashMap&lt;String, String&gt;&gt;``` (an ```id``` key is also added for the ```LinkedHashMap``` whose value is the value of key name only).&lt;br/&gt;\r\nlocks are of type ```ArrayList&lt;LinkedHashMap&lt;String, Object&gt;&gt;```&lt;br/&gt;\r\nlocks have attributes of type Map&lt;String, String&gt;\r\n\r\nbut it is not working. When I evaluate ```attributesEntries``` it is ```ArrayList&lt;LinkedHashMap&gt;``` and it has all the expected values but ```attributesMaps``` comes as empty. I also tried passing filters like ```LinkedHashMap(key == &#39;key1&#39;, value == &#39;val1&#39;)``` but that also didn&#39;t work. Tried looking for solutions and none were available for this sort of structure. Whatever was available I tried to extend but didn&#39;t work.\r\nIs this possible to achieve and if so how? Also, how do I validate value (not empty and matches a pattern) once I am able to get it from the ```Map```.\r\n\r\nI am new to drools and we are using 5.4.0.Final version of drools.\r\n\r\nAlso, how can I work with the next level nested ```Map``` in ```locks```.","title":"Validate facts having nested maps using drools","body":"<p>I have a class <code>Fact</code> which is a extends <code>java.util.HashMap</code> class. I am passing object of this class as fact to drools.\nNow an instance of fact looks like this (Map&lt;String, Object&gt;):</p>\n<pre><code>{\n&quot;key1&quot;: &quot;value&quot;\n&quot;attributes&quot;: [{&quot;name&quot;: &quot;name1&quot;, &quot;value&quot;: &quot;value1&quot;},{&quot;name&quot;: &quot;name2&quot;, &quot;value&quot;: &quot;value2&quot;},{&quot;name&quot;: &quot;name3&quot;, &quot;value&quot;: &quot;value3&quot;}...]\n&quot;locks&quot;: [{&quot;type&quot;: &quot;type1&quot;, &quot;value&quot;: &quot;value1&quot;, &quot;attributes&quot;: {&quot;key_a1&quot;: &quot;val_a1&quot;&quot;key_a2&quot;: &quot;val_a2&quot;...}}]\n}\n</code></pre>\n<p>Running validations on root level entries in this map is straight forward e.g. running validations on <code>key1</code>.<br/>\nNow, I want to run some validations on <code>attributes</code> and <code>locks</code>.\nFor attributes, I want to ensure that all attributes which are needed are present in this map and their corresponding values are correct. So I do this in the when block:</p>\n<pre><code>fact: Fact(this[&quot;key1&quot;] != null &amp;&amp; this.containsKey(&quot;attributes&quot;));\nattributesEntries: Entry(key == &quot;attributes&quot;) from fact.entrySet();\nattributesMaps: LinkedHashMap() from attributesEntries;\n</code></pre>\n<p>fact is <code>HashMap</code><br/>\nattributes are of type <code>ArrayList&lt;LinkedHashMap&lt;String, String&gt;&gt;</code> (an <code>id</code> key is also added for the <code>LinkedHashMap</code> whose value is the value of key name only).<br/>\nlocks are of type <code>ArrayList&lt;LinkedHashMap&lt;String, Object&gt;&gt;</code><br/>\nlocks have attributes of type Map&lt;String, String&gt;</p>\n<p>but it is not working. When I evaluate <code>attributesEntries</code> it is <code>ArrayList&lt;LinkedHashMap&gt;</code> and it has all the expected values but <code>attributesMaps</code> comes as empty. I also tried passing filters like <code>LinkedHashMap(key == 'key1', value == 'val1')</code> but that also didn't work. Tried looking for solutions and none were available for this sort of structure. Whatever was available I tried to extend but didn't work.\nIs this possible to achieve and if so how? Also, how do I validate value (not empty and matches a pattern) once I am able to get it from the <code>Map</code>.</p>\n<p>I am new to drools and we are using 5.4.0.Final version of drools.</p>\n<p>Also, how can I work with the next level nested <code>Map</code> in <code>locks</code>.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":6426510,"reputation":17091,"user_id":5527985,"display_name":"bobble bubble"},"score":3,"creation_date":1656506249,"post_id":72799134,"comment_id":128588898,"body_markdown":"One of those questions, that&#39;s really fun to fiddle about with! &#128578; Many good answers already, won&#39;t put another one. I came up with a [similar one](https://regex101.com/r/snJokh/1) and also a [negative variant](https://regex101.com/r/6GajTr/1).","body":"One of those questions, that&#39;s really fun to fiddle about with!  Many good answers already, won&#39;t put another one. I came up with a <a href=\"https://regex101.com/r/snJokh/1\" rel=\"nofollow noreferrer\">similar one</a> and also a <a href=\"https://regex101.com/r/6GajTr/1\" rel=\"nofollow noreferrer\">negative variant</a>."},{"owner":{"account_id":2603307,"reputation":88305,"user_id":2255089,"display_name":"Casimir et Hippolyte"},"score":1,"creation_date":1656507672,"post_id":72799134,"comment_id":128589584,"body_markdown":"@bobblebubble: very nice negative variant.","body":"@bobblebubble: very nice negative variant."},{"owner":{"account_id":25679099,"reputation":33,"user_id":19442121,"display_name":"TheCenturyNoob"},"score":0,"creation_date":1656530181,"post_id":72799134,"comment_id":128598334,"body_markdown":"@bobblebubble Nice! The first one [fails for the no-&#39;c&#39; part](https://regex101.com/r/8oKI3S/1) (after removing the ^$) when appending whitespace. And as expected, the second one [fails for the &#39;c&#39;-part](https://regex101.com/r/mp3MEG/1) also when appending whitespace.\n\nI do not understand why though, I was unable to fix them..","body":"@bobblebubble Nice! The first one <a href=\"https://regex101.com/r/8oKI3S/1\" rel=\"nofollow noreferrer\">fails for the no-&#39;c&#39; part</a> (after removing the ^$) when appending whitespace. And as expected, the second one <a href=\"https://regex101.com/r/mp3MEG/1\" rel=\"nofollow noreferrer\">fails for the &#39;c&#39;-part</a> also when appending whitespace.  I do not understand why though, I was unable to fix them.."},{"owner":{"account_id":6426510,"reputation":17091,"user_id":5527985,"display_name":"bobble bubble"},"score":1,"creation_date":1656535619,"post_id":72799134,"comment_id":128599982,"body_markdown":"@TheCenturyNoob Yes of yourse. `^` matches the start and `$` end of string. If you want to match that like words, use *word boundaries `\\b`*: [update 1](https://regex101.com/r/4xHdmG/1) and [update 2](https://regex101.com/r/QOI26K/1) (update 1 also needed to change the *quantifier* in `[ab]*\\b` to `+` for *one or more*)","body":"@TheCenturyNoob Yes of yourse. <code>^</code> matches the start and <code>$</code> end of string. If you want to match that like words, use <i>word boundaries <code>\\b</code></i>: <a href=\"https://regex101.com/r/4xHdmG/1\" rel=\"nofollow noreferrer\">update 1</a> and <a href=\"https://regex101.com/r/QOI26K/1\" rel=\"nofollow noreferrer\">update 2</a> (update 1 also needed to change the <i>quantifier</i> in <code>[ab]*\\b</code> to <code>+</code> for <i>one or more</i>)"}],"answers":[{"tags":[],"owner":{"account_id":16729279,"reputation":5099,"user_id":12755187,"display_name":"Artyom Vancyan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1656496503,"creation_date":1656496503,"answer_id":72799372,"question_id":72799134,"body_markdown":"```regexp\r\n(?=^(?:.*a){3}.*$)(?=^(?:.*b){3}.*$)(?=^(?:.*c){3}.*$|^[^c]*$).*\r\n```\r\n#### Short Explanation\r\n - `(?=^(?:.*a){3}.*$)` Assert that string contains at least 3 `a`\r\n - `(?=^(?:.*b){3}.*$)` Assert that string contains at least 3 `b`\r\n - `(?=^(?:.*c){3}.*$|^[^c]*$)` Assert that string contains at least 3 `c` or the string does not contain any `c`\r\n - `.*` Match the whole string that passes all assertions\r\n\r\nAlso, see the regex [demo][1] and [Java example][2]\r\n\r\n\r\n  [1]: https://regex101.com/r/n699Sm/2\r\n  [2]: https://regex101.com/r/n699Sm/2/codegen?language=java","title":"Regex match group at least n times or not at all, in random order with other matching groups","body":"<pre><code>(?=^(?:.*a){3}.*$)(?=^(?:.*b){3}.*$)(?=^(?:.*c){3}.*$|^[^c]*$).*\n</code></pre>\n<h4>Short Explanation</h4>\n<ul>\n<li><code>(?=^(?:.*a){3}.*$)</code> Assert that string contains at least 3 <code>a</code></li>\n<li><code>(?=^(?:.*b){3}.*$)</code> Assert that string contains at least 3 <code>b</code></li>\n<li><code>(?=^(?:.*c){3}.*$|^[^c]*$)</code> Assert that string contains at least 3 <code>c</code> or the string does not contain any <code>c</code></li>\n<li><code>.*</code> Match the whole string that passes all assertions</li>\n</ul>\n<p>Also, see the regex <a href=\"https://regex101.com/r/n699Sm/2\" rel=\"nofollow noreferrer\">demo</a> and <a href=\"https://regex101.com/r/n699Sm/2/codegen?language=java\" rel=\"nofollow noreferrer\">Java example</a></p>\n"},{"tags":[],"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1656497818,"creation_date":1656497399,"answer_id":72799580,"question_id":72799134,"body_markdown":"You could assert 3 times `a` and 3 times `b`, and then optionally match at least 3 times a `c`\r\n\r\nAdd anchors `^` and `$` to assert the start and the end of the string.\r\n\r\nNote that you don&#39;t have to put a single char like `[a]` in a character class:\r\n\r\n    ^(?=([bc]*a){3})(?=([ca]*b){3})[ab]*(?:c[ab]*c[ab]*c[abc]*)?$\r\n\r\n**Explanation**\r\n\r\n- `^` Start of string\r\n- `(?=([bc]*a){3})` Assert 3 times an `a` char\r\n- `(?=([ca]*b){3})` Assert 3 times a `b` char\r\n- `[ab]*` Match optional chars `a` `b`\r\n- `(?:` Non capture group\r\n  - `c[ab]*c[ab]*c` Match 3 times a `c` char\r\n  - `[abc]*` Match optional `a`,`b` and `c` chars\r\n- `)?` Close the non capture group and make it optional\r\n- `$` End of string\r\n\r\n[Regex demo](https://regex101.com/r/1S9s9F/1)\r\n\r\nAs you don&#39;t really need the capture groups, you can use non capture groups `(?:` instead for the repetition:\r\n\r\n    ^(?=(?:[bc]*a){3})(?=(?:[ca]*b){3})[ab]*(?:c[ab]*c[ab]*c[abc]*)?$\r\n\r\n[Regex demo](https://regex101.com/r/RKqipr/1)","title":"Regex match group at least n times or not at all, in random order with other matching groups","body":"<p>You could assert 3 times <code>a</code> and 3 times <code>b</code>, and then optionally match at least 3 times a <code>c</code></p>\n<p>Add anchors <code>^</code> and <code>$</code> to assert the start and the end of the string.</p>\n<p>Note that you don't have to put a single char like <code>[a]</code> in a character class:</p>\n<pre><code>^(?=([bc]*a){3})(?=([ca]*b){3})[ab]*(?:c[ab]*c[ab]*c[abc]*)?$\n</code></pre>\n<p><strong>Explanation</strong></p>\n<ul>\n<li><code>^</code> Start of string</li>\n<li><code>(?=([bc]*a){3})</code> Assert 3 times an <code>a</code> char</li>\n<li><code>(?=([ca]*b){3})</code> Assert 3 times a <code>b</code> char</li>\n<li><code>[ab]*</code> Match optional chars <code>a</code> <code>b</code></li>\n<li><code>(?:</code> Non capture group\n<ul>\n<li><code>c[ab]*c[ab]*c</code> Match 3 times a <code>c</code> char</li>\n<li><code>[abc]*</code> Match optional <code>a</code>,<code>b</code> and <code>c</code> chars</li>\n</ul>\n</li>\n<li><code>)?</code> Close the non capture group and make it optional</li>\n<li><code>$</code> End of string</li>\n</ul>\n<p><a href=\"https://regex101.com/r/1S9s9F/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n<p>As you don't really need the capture groups, you can use non capture groups <code>(?:</code> instead for the repetition:</p>\n<pre><code>^(?=(?:[bc]*a){3})(?=(?:[ca]*b){3})[ab]*(?:c[ab]*c[ab]*c[abc]*)?$\n</code></pre>\n<p><a href=\"https://regex101.com/r/RKqipr/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n"},{"tags":[],"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiew"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1656497454,"creation_date":1656497454,"answer_id":72799591,"question_id":72799134,"body_markdown":"You can use\r\n```none\r\n(?&lt;![abc])              # No &quot;a&quot;, &quot;b&quot;, &quot;c&quot; allowed immediately on the left\r\n(?=(?:[bc]*a){3})       # At least three &quot;a&quot;s\r\n(?=(?:[ac]*b){3})       # At least three &quot;b&quot;s\r\n(?:                     # Either\r\n   (?=[ab]*(?![abc]))   #  only &quot;a&quot; or &quot;b&quot;s allowed until a location not followed with &quot;a&quot;, &quot;b&quot; or &quot;c&quot;\r\n |                      #  or\r\n   (?=(?:[ab]*c){3})    # At least three &quot;c&quot;s\r\n)\r\n[abc]+                  # Match and consume one or more &quot;a&quot;, &quot;b&quot; or &quot;c&quot; chars\r\n```\r\nSee the [regex demo][1].\r\n\r\nAs a single line:\r\n```none\r\n(?&lt;![abc])(?=(?:[bc]*a){3})(?=(?:[ac]*b){3})(?:(?=[ab]*(?![abc]))|(?=(?:[ab]*c){3}))[abc]+\r\n```\r\n\r\n\r\n  [1]: https://regex101.com/r/TStrIl/3","title":"Regex match group at least n times or not at all, in random order with other matching groups","body":"<p>You can use</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?&lt;![abc])              # No &quot;a&quot;, &quot;b&quot;, &quot;c&quot; allowed immediately on the left\n(?=(?:[bc]*a){3})       # At least three &quot;a&quot;s\n(?=(?:[ac]*b){3})       # At least three &quot;b&quot;s\n(?:                     # Either\n   (?=[ab]*(?![abc]))   #  only &quot;a&quot; or &quot;b&quot;s allowed until a location not followed with &quot;a&quot;, &quot;b&quot; or &quot;c&quot;\n |                      #  or\n   (?=(?:[ab]*c){3})    # At least three &quot;c&quot;s\n)\n[abc]+                  # Match and consume one or more &quot;a&quot;, &quot;b&quot; or &quot;c&quot; chars\n</code></pre>\n<p>See the <a href=\"https://regex101.com/r/TStrIl/3\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n<p>As a single line:</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?&lt;![abc])(?=(?:[bc]*a){3})(?=(?:[ac]*b){3})(?:(?=[ab]*(?![abc]))|(?=(?:[ab]*c){3}))[abc]+\n</code></pre>\n"}],"owner":{"account_id":25679099,"reputation":33,"user_id":19442121,"display_name":"TheCenturyNoob"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":72799591,"answer_count":3,"score":3,"last_activity_date":1656497818,"creation_date":1656495487,"question_id":72799134,"body_markdown":"I am working with java regexes, but I guess the principles apply for every regex.\r\n\r\nI have these requirements for the segment a regex should match:\r\n- have at least 3 times &#39;a&#39;\r\n- have at least 3 times &#39;b&#39;\r\n- occurrences of &#39;a&#39; and &#39;b&#39; can be in any order\r\n\r\nInspired by [this post][1] I came up with the following regex ([regex101][2]):\r\n\r\n    (?=([b]*[a]){3})(?=([a]*[b]){3})[ab]+\r\n\r\nI am struggling with adding a new requirement:\r\n- Match if there is no or at least 3 &#39;c&#39;\r\n- as above, &#39;c&#39; can occur anywhere in the segment\r\n\r\nExamples for valid sequences:\r\n\r\n    aaabbb\r\n    ababab\r\n    aaabbbccc\r\n    abcabcabc\r\n    ababcabcc\r\n\r\nExamples for invalid sequences (as a whole):\r\n\r\n    aaabbbc\r\n    aabbb\r\n    abbccc\r\n    abcabca\r\n\r\nMy thoughts so far:\r\n- Having at least 3 &#39;c&#39;\r\n\r\n    `(?=([bc]*[a]){3})(?=([ac]*[b]){3})(?=([ab]*[c]){3,})[abc]+`\r\n\r\n- Combining this and above solution in a crude manner ([regex101][3]) which basically just a large &quot;either none or at least 3&quot;\r\n\r\n    `((?=([bc]*[a]){3})(?=([ac]*[b]){3})(?=([ab]*[c]){3,})[abc]+|(?=([b]*[a]){3})(?=([a]*[b]){3})[ab]+)`\r\n\r\n\r\nFinally the **Question**: Is there a better way to achieve this using other methods, like or-ing the &#39;c&#39;-requirement look-ahead, nested look-aheads or something entirely different?\r\n\r\n  [1]: https://stackoverflow.com/questions/16689167/need-regular-expression-for-checking-at-least-3-uppercase-3-lowercase-3-digits\r\n  [2]: https://regex101.com/r/qLU5pR/1\r\n  [3]: https://regex101.com/r/SJoBhB/3","title":"Regex match group at least n times or not at all, in random order with other matching groups","body":"<p>I am working with java regexes, but I guess the principles apply for every regex.</p>\n<p>I have these requirements for the segment a regex should match:</p>\n<ul>\n<li>have at least 3 times 'a'</li>\n<li>have at least 3 times 'b'</li>\n<li>occurrences of 'a' and 'b' can be in any order</li>\n</ul>\n<p>Inspired by <a href=\"https://stackoverflow.com/questions/16689167/need-regular-expression-for-checking-at-least-3-uppercase-3-lowercase-3-digits\">this post</a> I came up with the following regex (<a href=\"https://regex101.com/r/qLU5pR/1\" rel=\"nofollow noreferrer\">regex101</a>):</p>\n<pre><code>(?=([b]*[a]){3})(?=([a]*[b]){3})[ab]+\n</code></pre>\n<p>I am struggling with adding a new requirement:</p>\n<ul>\n<li>Match if there is no or at least 3 'c'</li>\n<li>as above, 'c' can occur anywhere in the segment</li>\n</ul>\n<p>Examples for valid sequences:</p>\n<pre><code>aaabbb\nababab\naaabbbccc\nabcabcabc\nababcabcc\n</code></pre>\n<p>Examples for invalid sequences (as a whole):</p>\n<pre><code>aaabbbc\naabbb\nabbccc\nabcabca\n</code></pre>\n<p>My thoughts so far:</p>\n<ul>\n<li><p>Having at least 3 'c'</p>\n<p><code>(?=([bc]*[a]){3})(?=([ac]*[b]){3})(?=([ab]*[c]){3,})[abc]+</code></p>\n</li>\n<li><p>Combining this and above solution in a crude manner (<a href=\"https://regex101.com/r/SJoBhB/3\" rel=\"nofollow noreferrer\">regex101</a>) which basically just a large &quot;either none or at least 3&quot;</p>\n<p><code>((?=([bc]*[a]){3})(?=([ac]*[b]){3})(?=([ab]*[c]){3,})[abc]+|(?=([b]*[a]){3})(?=([a]*[b]){3})[ab]+)</code></p>\n</li>\n</ul>\n<p>Finally the <strong>Question</strong>: Is there a better way to achieve this using other methods, like or-ing the 'c'-requirement look-ahead, nested look-aheads or something entirely different?</p>\n"},{"tags":["java","kotlin","sonarqube"],"answers":[{"tags":[],"owner":{"account_id":241355,"reputation":5451,"user_id":512115,"accept_rate":93,"display_name":"gtludwig"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1584005847,"creation_date":1584005847,"answer_id":60651216,"question_id":60622880,"body_markdown":"Long story short, the plugin does not support my scenario.\r\n\r\nLong story, my question was not clear enough and I failed to put some information as I was learning about this build myself. The project is in Kotlin and uses gradle to handle dependencies. The plugin only supports maven and NPM builds. So, for my to achieve the desired result, I would need to extend the plugin to handle the `build.gradle.kts` file. This task is a very big question mark in itself, so I will be looking at another alternative for the time being.","title":"Sonarqube - how to enable license-checker for Kotlin projects?","body":"<p>Long story short, the plugin does not support my scenario.</p>\n\n<p>Long story, my question was not clear enough and I failed to put some information as I was learning about this build myself. The project is in Kotlin and uses gradle to handle dependencies. The plugin only supports maven and NPM builds. So, for my to achieve the desired result, I would need to extend the plugin to handle the <code>build.gradle.kts</code> file. This task is a very big question mark in itself, so I will be looking at another alternative for the time being.</p>\n"}],"owner":{"account_id":241355,"reputation":5451,"user_id":512115,"accept_rate":93,"display_name":"gtludwig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":924,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60651216,"answer_count":1,"score":0,"last_activity_date":1656497356,"creation_date":1583861187,"question_id":60622880,"body_markdown":"I&#39;m setting up a Sonarqube Developer Edition server and am trying to use the license-checker plugin I got from:\r\n\r\nhttps://github.com/porscheinformatik/sonarqube-licensecheck\r\n\r\nThe plugin&#39;s jar is deployed to the correct directory and I have created a new `Sonar way (license)` Java profile that inherits the profile `Sonar way (Built-in)`. In the new profile, I added the `&quot;License is not allowed&quot;` and `&quot;Dependency has unknown license&quot;` rules the plugin requires to work. I tested with a Java project and it works flawlessly.\r\n\r\nI tried the same approach for the Kotlin profile `Sonar way (license)` I created and that inherits the `Sonar way (Built-in)` profile. But these rules are not available to Kotlin and, thus, the License check plugin does not run when I attempt to analyze a Kotlin project.\r\n\r\nThis seems to be a Java-specific plugin, but I might be mistaken. Is there a way to get this working I am not realizing?","title":"Sonarqube - how to enable license-checker for Kotlin projects?","body":"<p>I'm setting up a Sonarqube Developer Edition server and am trying to use the license-checker plugin I got from:</p>\n\n<p><a href=\"https://github.com/porscheinformatik/sonarqube-licensecheck\" rel=\"nofollow noreferrer\">https://github.com/porscheinformatik/sonarqube-licensecheck</a></p>\n\n<p>The plugin's jar is deployed to the correct directory and I have created a new <code>Sonar way (license)</code> Java profile that inherits the profile <code>Sonar way (Built-in)</code>. In the new profile, I added the <code>\"License is not allowed\"</code> and <code>\"Dependency has unknown license\"</code> rules the plugin requires to work. I tested with a Java project and it works flawlessly.</p>\n\n<p>I tried the same approach for the Kotlin profile <code>Sonar way (license)</code> I created and that inherits the <code>Sonar way (Built-in)</code> profile. But these rules are not available to Kotlin and, thus, the License check plugin does not run when I attempt to analyze a Kotlin project.</p>\n\n<p>This seems to be a Java-specific plugin, but I might be mistaken. Is there a way to get this working I am not realizing?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1654944053,"post_id":72583599,"comment_id":128216015,"body_markdown":"Not that it changes much, but shouldn&#39;t you be measuring from the top of the screen?","body":"Not that it changes much, but shouldn&#39;t you be measuring from the top of the screen?"},{"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"score":0,"creation_date":1654944221,"post_id":72583599,"comment_id":128216037,"body_markdown":"@FedericoklezCulloca I&#39;ve just measured - gnome top bar height is 30px, but dialog measured y is about 200. Gnome doesn&#39;t allow programs (kruler) be over top bar.","body":"@FedericoklezCulloca I&#39;ve just measured - gnome top bar height is 30px, but dialog measured y is about 200. Gnome doesn&#39;t allow programs (kruler) be over top bar."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1654951534,"post_id":72583599,"comment_id":128217275,"body_markdown":"Would this approach risk truncating the the dialog&#39;s content?","body":"Would this approach risk truncating the the dialog&#39;s content?"}],"answers":[{"tags":[],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1656497106,"creation_date":1656497106,"answer_id":72799515,"question_id":72583599,"body_markdown":"It is a bug in JavaFX. Issue is [here][1]\r\n\r\n\r\n  [1]: https://bugs.openjdk.org/browse/JDK-8288996","title":"Javafx: Dialog y position doesn&#39;t work properly","body":"<p>It is a bug in JavaFX. Issue is <a href=\"https://bugs.openjdk.org/browse/JDK-8288996\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72799515,"answer_count":1,"score":2,"last_activity_date":1656497106,"creation_date":1654943619,"question_id":72583599,"body_markdown":"Please, consider the following code:\r\n\r\n    public class JavaFxTest4 extends Application {\r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            Button button = new Button();\r\n            button.setText(&quot;dialog&quot;);\r\n            button.setOnAction((e) -&gt; {\r\n                Dialog&lt;?&gt; d = new Dialog&lt;&gt;();\r\n                final Window window = d.getDialogPane().getScene().getWindow();\r\n                Stage stage = (Stage) window;\r\n                stage.setMinHeight(450);\r\n                stage.setMaxHeight(450);\r\n                stage.setHeight(450);\r\n                stage.setMinWidth(600);\r\n                stage.setMaxWidth(600);\r\n                stage.setWidth(600);\r\n                window.setY(300); //&lt;---- note this line\r\n                window.setX(660); //&lt;---- note this line\r\n                d.showAndWait();\r\n            });\r\n    \r\n            VBox root = new VBox();\r\n            root.getChildren().addAll(button);\r\n            var scene = new Scene(root, 1920, 1000);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\nAs you can see window position is 660 (x) and 300 (y). And this is the result:\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAs you can see x position is correct, but y position is not. Is this a bug or I misunderstand something? I use javafx 19-ea+3 and openjdk version &quot;14.0.2&quot; on Ubuntu 20.\r\n\r\n  [1]: https://i.stack.imgur.com/H8dpc.png\r\n  [2]: https://i.stack.imgur.com/0Jm9e.png","title":"Javafx: Dialog y position doesn&#39;t work properly","body":"<p>Please, consider the following code:</p>\n<pre><code>public class JavaFxTest4 extends Application {\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        Button button = new Button();\n        button.setText(&quot;dialog&quot;);\n        button.setOnAction((e) -&gt; {\n            Dialog&lt;?&gt; d = new Dialog&lt;&gt;();\n            final Window window = d.getDialogPane().getScene().getWindow();\n            Stage stage = (Stage) window;\n            stage.setMinHeight(450);\n            stage.setMaxHeight(450);\n            stage.setHeight(450);\n            stage.setMinWidth(600);\n            stage.setMaxWidth(600);\n            stage.setWidth(600);\n            window.setY(300); //&lt;---- note this line\n            window.setX(660); //&lt;---- note this line\n            d.showAndWait();\n        });\n\n        VBox root = new VBox();\n        root.getChildren().addAll(button);\n        var scene = new Scene(root, 1920, 1000);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p>As you can see window position is 660 (x) and 300 (y). And this is the result:\n<a href=\"https://i.stack.imgur.com/H8dpc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H8dpc.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/0Jm9e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Jm9e.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see x position is correct, but y position is not. Is this a bug or I misunderstand something? I use javafx 19-ea+3 and openjdk version &quot;14.0.2&quot; on Ubuntu 20.</p>\n"},{"tags":["java","google-sheets","google-sheets-api"],"comments":[{"owner":{"account_id":2333122,"reputation":46520,"user_id":8404453,"display_name":"TheMaster"},"score":1,"creation_date":1656498254,"post_id":72799505,"comment_id":128585749,"body_markdown":"What about ``setHiddenValues()``?","body":"What about <code>setHiddenValues()</code>?"},{"owner":{"account_id":4666722,"reputation":1836,"user_id":3779613,"accept_rate":27,"display_name":"David Geary"},"score":0,"creation_date":1656502974,"post_id":72799505,"comment_id":128587627,"body_markdown":"Hidden values sets ones to hide, I want to set ones to show. When I did the test of setting values in the sheet UI and retrieving via the API hiddenvalues was still empty.","body":"Hidden values sets ones to hide, I want to set ones to show. When I did the test of setting values in the sheet UI and retrieving via the API hiddenvalues was still empty."},{"owner":{"account_id":2333122,"reputation":46520,"user_id":8404453,"display_name":"TheMaster"},"score":2,"creation_date":1656506465,"post_id":72799505,"comment_id":128589008,"body_markdown":"Related: https://stackoverflow.com/questions/51497982/apply-basic-filter-to-multiple-values-in-a-spreadsheet-column https://issuetracker.google.com/issues/159051708 https://stackoverflow.com/questions/60919232/add-filter-to-pivottable","body":"Related: <a href=\"https://stackoverflow.com/questions/51497982/apply-basic-filter-to-multiple-values-in-a-spreadsheet-column\" title=\"apply basic filter to multiple values in a spreadsheet column\">stackoverflow.com/questions/51497982/&hellip;</a> <a href=\"https://issuetracker.google.com/issues/159051708\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/159051708</a> <a href=\"https://stackoverflow.com/questions/60919232/add-filter-to-pivottable\" title=\"add filter to pivottable\">stackoverflow.com/questions/60919232/add-filter-to-pivottabl&zwnj;&#8203;e</a>"}],"owner":{"account_id":4666722,"reputation":1836,"user_id":3779613,"accept_rate":27,"display_name":"David Geary"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1656497078,"creation_date":1656497078,"question_id":72799505,"body_markdown":"When creating a Filter View directly in Google Sheets you have the option to &#39;Filter by color&#39;, &#39;Filter by condition&#39; or &#39;Filter by value&#39;.\r\n\r\nIm trying to create a Filter View via the sheets API that uses the &#39;Filter by value&#39; option but can&#39;t see how to do this. The relevant java class - [FilterCriteria][1] only seems to allow color and condition.\r\n\r\nTo try to see how to do it I manually created a Filter View using values in a test spreadsheet and then retrieved it using the sheets API but it then doesn&#39;t seem to contain anything about the values its based on?\r\n\r\nIs this possible to do and if so does anyone have an example of how to do it? Or is it not possible and you need to use conditions instead (maybe something to do with the fact it&#39;s using actual data in the sheet?)\r\n\r\nIf it&#39;s not possible it seems there would be cases (eg a list of values) where its not possible to set up a corresponding condition. I tried to use a &#39;ONE_OF_LIST&#39; condition also but the API threw an error saying that&#39;s not allowed in Filter Criteria.\r\n\r\n\r\n  [1]: https://developers.google.com/resources/api-libraries/documentation/sheets/v4/java/latest/com/google/api/services/sheets/v4/model/FilterCriteria.html","title":"Cant&#39;t create value based Filter Views via (Java) Google Sheets API","body":"<p>When creating a Filter View directly in Google Sheets you have the option to 'Filter by color', 'Filter by condition' or 'Filter by value'.</p>\n<p>Im trying to create a Filter View via the sheets API that uses the 'Filter by value' option but can't see how to do this. The relevant java class - <a href=\"https://developers.google.com/resources/api-libraries/documentation/sheets/v4/java/latest/com/google/api/services/sheets/v4/model/FilterCriteria.html\" rel=\"nofollow noreferrer\">FilterCriteria</a> only seems to allow color and condition.</p>\n<p>To try to see how to do it I manually created a Filter View using values in a test spreadsheet and then retrieved it using the sheets API but it then doesn't seem to contain anything about the values its based on?</p>\n<p>Is this possible to do and if so does anyone have an example of how to do it? Or is it not possible and you need to use conditions instead (maybe something to do with the fact it's using actual data in the sheet?)</p>\n<p>If it's not possible it seems there would be cases (eg a list of values) where its not possible to set up a corresponding condition. I tried to use a 'ONE_OF_LIST' condition also but the API threw an error saying that's not allowed in Filter Criteria.</p>\n"},{"tags":["java","generics","casting"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1656496523,"post_id":72799294,"comment_id":128585045,"body_markdown":"You can&#39;t. See: https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens","body":"You can&#39;t. See: <a href=\"https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens\" title=\"java generics type erasure when and what happens\">stackoverflow.com/questions/339699/&hellip;</a>"},{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":2,"creation_date":1656496719,"post_id":72799294,"comment_id":128585129,"body_markdown":"You maybe should change the method&#39;s signature to `&lt;T&gt; Container&lt;T&gt; add(Container&lt;T&gt; a, Container&lt;T&gt; b)` and let the compiler figure out whether the call to this method is allowed or not.","body":"You maybe should change the method&#39;s signature to <code>&lt;T&gt; Container&lt;T&gt; add(Container&lt;T&gt; a, Container&lt;T&gt; b)</code> and let the compiler figure out whether the call to this method is allowed or not."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1656496954,"post_id":72799294,"comment_id":128585226,"body_markdown":"Seelenvirtuose is correct: The problem is the compiler doesn&#39;t know the wildcard is the *same* T for all usages. By typing the method, it locks the type to a *particular* type that is consistent for the whole method invocation.","body":"Seelenvirtuose is correct: The problem is the compiler doesn&#39;t know the wildcard is the <i>same</i> T for all usages. By typing the method, it locks the type to a <i>particular</i> type that is consistent for the whole method invocation."}],"owner":{"account_id":25679324,"reputation":1,"user_id":19442330,"display_name":"rababer30"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656497038,"creation_date":1656496132,"question_id":72799294,"body_markdown":"I have a generic class: \r\n\r\n    public abstract class Container&lt;T&gt; {\r\n      ...\r\n      protected T value;\r\n      private SomeType type;\r\n\r\n      public T add(T toAdd);\r\n\r\n      public Container(T value, SomeType type) {\r\n         ...\r\n      }\r\n      ...\r\n    }\r\n\r\nand  a MathHelper-Class:\r\n\r\n    public class ContainerMathHelper {\r\n       private ContainerMathHelper() {}\r\n       \r\n       public static Container&lt;?&gt; add(Container&lt;?&gt; a, Container&lt;?&gt; b) {\r\n          check for same container-type as types are unique -&gt; same impl of container\r\n         \r\n          ???\r\n\r\n          return addT(casted_a, casted_b);\r\n       }\r\n\r\n       public static &lt;T&gt; Container&lt;T&gt; addT(Container&lt;T&gt; a, Container&lt;T&gt; b) {\r\n          return a.add(b);\r\n       }\r\n    }\r\n\r\nnow I don&#39;t know how to properly cast both a(`Container&lt;?&gt;`) and b(`Container&lt;?&gt;`) to the same type to use the addT function.\r\n\r\nI already tried things like casting them both by using \r\n\r\n    clazzX.cast(a) and clazzX.cast(b) with clazzX being the same object\r\n\r\nand some other things.\r\n\r\nDoes anybody know a solution?\r\n\r\n\r\n","title":"Java cast 2 unknown generics to same class","body":"<p>I have a generic class:</p>\n<pre><code>public abstract class Container&lt;T&gt; {\n  ...\n  protected T value;\n  private SomeType type;\n\n  public T add(T toAdd);\n\n  public Container(T value, SomeType type) {\n     ...\n  }\n  ...\n}\n</code></pre>\n<p>and  a MathHelper-Class:</p>\n<pre><code>public class ContainerMathHelper {\n   private ContainerMathHelper() {}\n   \n   public static Container&lt;?&gt; add(Container&lt;?&gt; a, Container&lt;?&gt; b) {\n      check for same container-type as types are unique -&gt; same impl of container\n     \n      ???\n\n      return addT(casted_a, casted_b);\n   }\n\n   public static &lt;T&gt; Container&lt;T&gt; addT(Container&lt;T&gt; a, Container&lt;T&gt; b) {\n      return a.add(b);\n   }\n}\n</code></pre>\n<p>now I don't know how to properly cast both a(<code>Container&lt;?&gt;</code>) and b(<code>Container&lt;?&gt;</code>) to the same type to use the addT function.</p>\n<p>I already tried things like casting them both by using</p>\n<pre><code>clazzX.cast(a) and clazzX.cast(b) with clazzX being the same object\n</code></pre>\n<p>and some other things.</p>\n<p>Does anybody know a solution?</p>\n"},{"tags":["java","ubuntu","javafx","awt"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1655553891,"post_id":72594274,"comment_id":128362258,"body_markdown":"I created the solution you linked, but I only tested it on Windows a long time ago.  I do not use Ubuntu, so cannot assist you with this question.","body":"I created the solution you linked, but I only tested it on Windows a long time ago.  I do not use Ubuntu, so cannot assist you with this question."}],"answers":[{"tags":[],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656497013,"creation_date":1656497013,"answer_id":72799489,"question_id":72594274,"body_markdown":"It is a bug in JDK. Issue is [here][1].\r\n\r\n\r\n  [1]: https://bugs.openjdk.org/browse/JDK-8289233","title":"AWT and Ubuntu 20 -&gt; The system tray is not supported on the current platform","body":"<p>It is a bug in JDK. Issue is <a href=\"https://bugs.openjdk.org/browse/JDK-8289233\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":556,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72799489,"answer_count":1,"score":0,"last_activity_date":1656497013,"creation_date":1655053405,"question_id":72594274,"body_markdown":"I am trying to run [this solution][1] (AWT System Tray to control a JavaFX application) on my Ubuntu 20.04.3 LTS. I tried with openjdk 14 and 17, result is the same:\r\n\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.UnsupportedOperationException: The system tray is not supported on the current platform.\r\n    \tat java.desktop/java.awt.SystemTray.getSystemTray(SystemTray.java:188)\r\n    \tat com.foo.fxtest1.JavaFxTest5.addAppToTray(JavaFxTest5.java:119)\r\n    \tat java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\r\n    \tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\r\n    \tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\r\n    \tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n    \tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n    \tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n    \tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n\r\nTrying to solve the problem I found [this answer][2]: saying that `Gnome 3.28 (used in Ubuntu 18.04) removed the System tray`. I thought, that Ubuntu 20 didn&#39;t have a system tray, and that was the problem. However, in the top right corner of my screen I see the following:\r\n\r\n[![enter image description here][3]][3]. \r\n\r\nAs you see there are three application icons - Telegram, Viber and Alarm clock. As I understand these icons are shown in system tray, so\r\nsystem tray exists. Then what is the problem? Doesn&#39;t AWT support Ubuntu 20 system tray? Could anyone explain?\r\n\r\n\r\n  [1]: https://gist.github.com/jewelsea/e231e89e8d36ef4e5d8a\r\n  [2]: https://stackoverflow.com/a/50574518/5057736\r\n  [3]: https://i.stack.imgur.com/LGMew.png","title":"AWT and Ubuntu 20 -&gt; The system tray is not supported on the current platform","body":"<p>I am trying to run <a href=\"https://gist.github.com/jewelsea/e231e89e8d36ef4e5d8a\" rel=\"nofollow noreferrer\">this solution</a> (AWT System Tray to control a JavaFX application) on my Ubuntu 20.04.3 LTS. I tried with openjdk 14 and 17, result is the same:</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.UnsupportedOperationException: The system tray is not supported on the current platform.\n    at java.desktop/java.awt.SystemTray.getSystemTray(SystemTray.java:188)\n    at com.foo.fxtest1.JavaFxTest5.addAppToTray(JavaFxTest5.java:119)\n    at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n</code></pre>\n<p>Trying to solve the problem I found <a href=\"https://stackoverflow.com/a/50574518/5057736\">this answer</a>: saying that <code>Gnome 3.28 (used in Ubuntu 18.04) removed the System tray</code>. I thought, that Ubuntu 20 didn't have a system tray, and that was the problem. However, in the top right corner of my screen I see the following:</p>\n<p><a href=\"https://i.stack.imgur.com/LGMew.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LGMew.png\" alt=\"enter image description here\" /></a>.</p>\n<p>As you see there are three application icons - Telegram, Viber and Alarm clock. As I understand these icons are shown in system tray, so\nsystem tray exists. Then what is the problem? Doesn't AWT support Ubuntu 20 system tray? Could anyone explain?</p>\n"},{"tags":["java","methods","interface","abstract","implementation"],"comments":[{"owner":{"account_id":1394089,"reputation":40460,"user_id":1424875,"accept_rate":86,"display_name":"nanofarad"},"score":2,"creation_date":1656022335,"post_id":72737061,"comment_id":128477246,"body_markdown":"an interface says that an object shall be able to do some thing, without defining *how* it shall do that - that&#39;s up to the class that implements the interface.","body":"an interface says that an object shall be able to do some thing, without defining <i>how</i> it shall do that - that&#39;s up to the class that implements the interface."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1656023766,"post_id":72737061,"comment_id":128477507,"body_markdown":"The **declaration** of methods of an interface are not **implementations** and you cannot call them directly for the simple reason that you cannot even **instantiate** the interface itself (it doesn&#39;t have a constructor). A method declaration doesn&#39;t contain any runnable code.","body":"The <b>declaration</b> of methods of an interface are not <b>implementations</b> and you cannot call them directly for the simple reason that you cannot even <b>instantiate</b> the interface itself (it doesn&#39;t have a constructor). A method declaration doesn&#39;t contain any runnable code."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1656699014,"post_id":72737061,"comment_id":128644094,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":9799895,"reputation":31,"user_id":7261574,"display_name":"Isuru"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656496825,"creation_date":1656496825,"answer_id":72799449,"question_id":72737061,"body_markdown":"Interfaces are not reducing code repetition. It is more about **enforcing a good design**.  Thats why we are using interfaces when we are coding.\r\nAnd also interface sole purpose is to be implemented by one or more classes. ","title":"An interface class in java is a blueprint to do things","body":"<p>Interfaces are not reducing code repetition. It is more about <strong>enforcing a good design</strong>.  Thats why we are using interfaces when we are coding.\nAnd also interface sole purpose is to be implemented by one or more classes.</p>\n"}],"owner":{"account_id":24147674,"reputation":1,"user_id":18112988,"display_name":"Burhan Bozkurt"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1656496825,"creation_date":1656021979,"question_id":72737061,"body_markdown":"If there is no implementation body in the interface class, then how can it put a function? I know it is implemented by other classes but the methods in an interface exist for what they can achieve so they have some skills already. Then they should have some codes in them. Then why do they have empty bodies?","title":"An interface class in java is a blueprint to do things","body":"<p>If there is no implementation body in the interface class, then how can it put a function? I know it is implemented by other classes but the methods in an interface exist for what they can achieve so they have some skills already. Then they should have some codes in them. Then why do they have empty bodies?</p>\n"},{"tags":["java","multidimensional-array"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1656495385,"post_id":72799097,"comment_id":128584620,"body_markdown":"The solution is to only call your `bingoCard` method once. &quot;I need to save the bingoCard&quot; is already done because you write to the static class field `bingoCard`, where the data from your method is saved.","body":"The solution is to only call your <code>bingoCard</code> method once. &quot;I need to save the bingoCard&quot; is already done because you write to the static class field <code>bingoCard</code>, where the data from your method is saved."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":2,"creation_date":1656496596,"post_id":72799097,"comment_id":128585077,"body_markdown":"Your design with a static method with that much business logic and a global variable is not object oriented - just in case you wanted to achieve OOD ;)","body":"Your design with a static method with that much business logic and a global variable is not object oriented - just in case you wanted to achieve OOD ;)"}],"owner":{"account_id":25586465,"reputation":1,"user_id":19364149,"display_name":"Daniel Requena"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656496438,"creation_date":1656495301,"question_id":72799097,"body_markdown":"I am doing a Bingo program. I need to save the `bingoCard `(bidimensional array), because every time I execute a new move the card is different. And it need to be the same.\r\n\r\nSo I need to know how to save the card. I have a global variable (`private static int[][]bingoCard=new int[3][9];`) this is the code\r\n\r\n    public static int[][] bingoCard(){\r\n        int numRows = 3;\r\n        int numCols = 9;\r\n        int randomNumbersPerRow = 5;\r\n        int randomNumberBound = 90;\r\n    \r\n        Random random = new Random();\r\n        bingoCard = new int[numRows][numCols];\r\n        for (int row = 0; row &lt; numRows; row++) {\r\n            for (int col = 0; col &lt; numCols; col++) {\r\n                bingoCard[row][col] = 0;\r\n            }\r\n            for (int i = 0; i &lt; randomNumbersPerRow; i++) {\r\n                int indexToAssign = random.nextInt(numCols);\r\n                while (bingoCard[row][indexToAssign] != 0) {\r\n                    indexToAssign = random.nextInt(numCols);\r\n                }\r\n                int numToAssign = random.nextInt(randomNumberBound)+1;\r\n                bingoCard[row][indexToAssign] = numToAssign;\r\n            }\r\n        }\r\n    \r\n        for (int row = 0; row &lt; numRows; row++) {\r\n            for (int col = 0; col &lt; numCols; col++) {\r\n                System.out.printf(&quot;%2d &quot;, bingoCard[row][col]);\r\n            }\r\n            System.out.println();\r\n        }\r\n        return bingoCard;\r\n    }","title":"Save bidimensional Array","body":"<p>I am doing a Bingo program. I need to save the <code>bingoCard </code>(bidimensional array), because every time I execute a new move the card is different. And it need to be the same.</p>\n<p>So I need to know how to save the card. I have a global variable (<code>private static int[][]bingoCard=new int[3][9];</code>) this is the code</p>\n<pre><code>public static int[][] bingoCard(){\n    int numRows = 3;\n    int numCols = 9;\n    int randomNumbersPerRow = 5;\n    int randomNumberBound = 90;\n\n    Random random = new Random();\n    bingoCard = new int[numRows][numCols];\n    for (int row = 0; row &lt; numRows; row++) {\n        for (int col = 0; col &lt; numCols; col++) {\n            bingoCard[row][col] = 0;\n        }\n        for (int i = 0; i &lt; randomNumbersPerRow; i++) {\n            int indexToAssign = random.nextInt(numCols);\n            while (bingoCard[row][indexToAssign] != 0) {\n                indexToAssign = random.nextInt(numCols);\n            }\n            int numToAssign = random.nextInt(randomNumberBound)+1;\n            bingoCard[row][indexToAssign] = numToAssign;\n        }\n    }\n\n    for (int row = 0; row &lt; numRows; row++) {\n        for (int col = 0; col &lt; numCols; col++) {\n            System.out.printf(&quot;%2d &quot;, bingoCard[row][col]);\n        }\n        System.out.println();\n    }\n    return bingoCard;\n}\n</code></pre>\n"},{"tags":["java","final"],"comments":[{"owner":{"account_id":2744947,"reputation":3775,"user_id":2365568,"accept_rate":49,"display_name":"Bj&#246;rn Hallstr&#246;m"},"score":0,"creation_date":1405867004,"post_id":15655012,"comment_id":38589788,"body_markdown":"since foo is not visible - how could it compile?","body":"since foo is not visible - how could it compile?"},{"owner":{"account_id":2673598,"reputation":3890,"user_id":2310450,"accept_rate":92,"display_name":"mbdavis"},"score":12,"creation_date":1431275787,"post_id":15655012,"comment_id":48414986,"body_markdown":"@therealprashant that isn&#39;t true. Private static variables are valid, they are accessible from static methods inside the class they are defined in. A static variable means that the variable exists once and isn&#39;t bound to an instance of a class.","body":"@therealprashant that isn&#39;t true. Private static variables are valid, they are accessible from static methods inside the class they are defined in. A static variable means that the variable exists once and isn&#39;t bound to an instance of a class."},{"owner":{"account_id":5068227,"reputation":711,"user_id":4067759,"accept_rate":60,"display_name":"therealprashant"},"score":3,"creation_date":1431324055,"post_id":15655012,"comment_id":48427971,"body_markdown":"@mbdavis Oh Yes ! thankyou. But still I won&#39;t delete the comment to help people who are thinking like me and then your comment will make them think in correct direction.","body":"@mbdavis Oh Yes ! thankyou. But still I won&#39;t delete the comment to help people who are thinking like me and then your comment will make them think in correct direction."},{"owner":{"account_id":2673598,"reputation":3890,"user_id":2310450,"accept_rate":92,"display_name":"mbdavis"},"score":0,"creation_date":1431340332,"post_id":15655012,"comment_id":48437128,"body_markdown":"@therealprashant okay no worries!","body":"@therealprashant okay no worries!"},{"owner":{"account_id":212305,"reputation":24651,"user_id":465053,"accept_rate":83,"display_name":"RBT"},"score":0,"creation_date":1533903770,"post_id":15655012,"comment_id":90529875,"body_markdown":"Related post - [What is the equivalent of Java&#39;s final in C#?](https://stackoverflow.com/q/1327544/465053)","body":"Related post - <a href=\"https://stackoverflow.com/q/1327544/465053\">What is the equivalent of Java&#39;s final in C#?</a>"}],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":2,"up_vote_count":606,"is_accepted":true,"score":604,"last_activity_date":1395618306,"creation_date":1364375030,"answer_id":15655032,"question_id":15655012,"body_markdown":"You are always allowed to *initialize* a `final` variable.  The compiler makes sure that you can do it only once. \r\n\r\nNote that calling methods on an object stored in a `final` variable has nothing to do with the semantics of `final`. In other words: `final` is only about the reference itself, and not about the contents of the referenced object.\r\n\r\nJava has no concept of object immutability; this is achieved by carefully designing the object, and is a far-from-trivial endeavor.","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>You are always allowed to <em>initialize</em> a <code>final</code> variable.  The compiler makes sure that you can do it only once. </p>\n\n<p>Note that calling methods on an object stored in a <code>final</code> variable has nothing to do with the semantics of <code>final</code>. In other words: <code>final</code> is only about the reference itself, and not about the contents of the referenced object.</p>\n\n<p>Java has no concept of object immutability; this is achieved by carefully designing the object, and is a far-from-trivial endeavor.</p>\n"},{"tags":[],"owner":{"account_id":142651,"reputation":6584,"user_id":350491,"accept_rate":78,"display_name":"Ankit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1433469049,"creation_date":1364375035,"answer_id":15655036,"question_id":15655012,"body_markdown":"1. Since the final variable is non-static, it can be initialized in constructor. But if you make it static it can not be initialized by constructor (because constructors are not static).\r\n2. Addition to list is not expected to stop by making list final. `final` just binds the reference to particular object. You are free to change the &#39;state&#39; of that object, but not the object itself.","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<ol>\n<li>Since the final variable is non-static, it can be initialized in constructor. But if you make it static it can not be initialized by constructor (because constructors are not static).</li>\n<li>Addition to list is not expected to stop by making list final. <code>final</code> just binds the reference to particular object. You are free to change the 'state' of that object, but not the object itself.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":320617,"reputation":3671,"user_id":638994,"accept_rate":89,"display_name":"lucian.pantelimon"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1364376299,"creation_date":1364375188,"answer_id":15655071,"question_id":15655012,"body_markdown":"If you make `foo` static, you must initialize it in the class constructor (or inline where you define it) like the following examples.\r\n\r\n**Class constructor (not instance):**\r\n\r\n    private static final List foo;\r\n    \r\n    static\r\n    {\r\n       foo = new ArrayList();\r\n    }\r\n\r\n**Inline:**\r\n\r\n    private static final List foo = new ArrayList();\r\n\r\nThe problem here is not how the `final` modifier works, but rather how the `static` modifier works. \r\n\r\nThe `final` modifier enforces an initialization of your reference by the time the call to your constructor completes (i.e. you must initialize it in the constructor).\r\n\r\nWhen you initialize an attribute in-line, it gets initialized before the code you have defined for the constructor is run, so you get the following outcomes:\r\n\r\n - if `foo` is `static`, `foo = new ArrayList()` will be executed before the `static{}` constructor you have defined for your class is executed\r\n - if `foo` is not `static`, `foo = new ArrayList()` will be executed before your constructor is run\r\n\r\nWhen you do not initilize an attribute in-line, the `final` modifier enforces that you initialize it and that you must do so in the constructor. If you also have a `static` modifier, the constructor you will have to initialize the attribute in is the class&#39; initialization block : `static{}`.\r\n\r\nThe error you get in your code is from the fact that `static{}` is run when the class is loaded, before the time you instantiate an object of that class. Thus, you will have not initialized `foo` when the class is created. \r\n\r\nThink of the `static{}` block as a constructor for an object of type `Class`. This is where you must do the initialization of your `static final` class attributes (if not done inline).\r\n\r\n**Side note:**\r\n\r\nThe `final` modifier assures const-ness only for primitive types and references. \r\n\r\nWhen you declare a `final` object, what you get is a `final` **reference** to that object, but the object itself is not constant. \r\n\r\nWhat you are really achieving when declaring a `final` attribute is that, once you declare an object for your specific purpose (like the `final List` that you have declared), that and only that object will be used for that purpose: you will not be able to change `List foo` to another `List`, but you can still alter your `List` by adding/removing items (the `List` you are using will be the same, only with its contents altered).","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>If you make <code>foo</code> static, you must initialize it in the class constructor (or inline where you define it) like the following examples.</p>\n\n<p><strong>Class constructor (not instance):</strong></p>\n\n<pre><code>private static final List foo;\n\nstatic\n{\n   foo = new ArrayList();\n}\n</code></pre>\n\n<p><strong>Inline:</strong></p>\n\n<pre><code>private static final List foo = new ArrayList();\n</code></pre>\n\n<p>The problem here is not how the <code>final</code> modifier works, but rather how the <code>static</code> modifier works. </p>\n\n<p>The <code>final</code> modifier enforces an initialization of your reference by the time the call to your constructor completes (i.e. you must initialize it in the constructor).</p>\n\n<p>When you initialize an attribute in-line, it gets initialized before the code you have defined for the constructor is run, so you get the following outcomes:</p>\n\n<ul>\n<li>if <code>foo</code> is <code>static</code>, <code>foo = new ArrayList()</code> will be executed before the <code>static{}</code> constructor you have defined for your class is executed</li>\n<li>if <code>foo</code> is not <code>static</code>, <code>foo = new ArrayList()</code> will be executed before your constructor is run</li>\n</ul>\n\n<p>When you do not initilize an attribute in-line, the <code>final</code> modifier enforces that you initialize it and that you must do so in the constructor. If you also have a <code>static</code> modifier, the constructor you will have to initialize the attribute in is the class' initialization block : <code>static{}</code>.</p>\n\n<p>The error you get in your code is from the fact that <code>static{}</code> is run when the class is loaded, before the time you instantiate an object of that class. Thus, you will have not initialized <code>foo</code> when the class is created. </p>\n\n<p>Think of the <code>static{}</code> block as a constructor for an object of type <code>Class</code>. This is where you must do the initialization of your <code>static final</code> class attributes (if not done inline).</p>\n\n<p><strong>Side note:</strong></p>\n\n<p>The <code>final</code> modifier assures const-ness only for primitive types and references. </p>\n\n<p>When you declare a <code>final</code> object, what you get is a <code>final</code> <strong>reference</strong> to that object, but the object itself is not constant. </p>\n\n<p>What you are really achieving when declaring a <code>final</code> attribute is that, once you declare an object for your specific purpose (like the <code>final List</code> that you have declared), that and only that object will be used for that purpose: you will not be able to change <code>List foo</code> to another <code>List</code>, but you can still alter your <code>List</code> by adding/removing items (the <code>List</code> you are using will be the same, only with its contents altered).</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1364375304,"creation_date":1364375304,"answer_id":15655112,"question_id":15655012,"body_markdown":"When you make it static final it should be initialized in a static initialization block\r\n\r\n    \tprivate static final List foo;\r\n    \t\r\n    \tstatic {\r\n    \t\tfoo = new ArrayList();\r\n    \t}\r\n    \r\n    \tpublic Test()\r\n    \t{\r\n    //\t    foo = new ArrayList();\r\n    \t    foo.add(&quot;foo&quot;); // Modification-1\r\n    \t}\r\n\r\n\r\n","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>When you make it static final it should be initialized in a static initialization block</p>\n\n<pre><code>    private static final List foo;\n\n    static {\n        foo = new ArrayList();\n    }\n\n    public Test()\n    {\n//      foo = new ArrayList();\n        foo.add(\"foo\"); // Modification-1\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1364375678,"creation_date":1364375370,"answer_id":15655134,"question_id":15655012,"body_markdown":"The `final` keyword indicates that a variable may only be initialized once.  In your code you are only performing one initialization of final so the terms are satisfied.  This statement performs the lone initialization of `foo`.  Note that `final` != immutable, it only means that the reference cannot change.\r\n\r\n    foo = new ArrayList();\r\n\r\nWhen you declare `foo` as `static final` the variable must be initialized when the class is loaded and cannot rely on instantiation (aka call to constructor) to initialize `foo` since static fields must be available without an instance of a class.  There is no guarantee that the constructor will have been called prior to using the static field.\r\n\r\nWhen you execute your method under the `static final` scenario the `Test` class is loaded prior to instantiating `t` at this time there is no instantiation of `foo` meaning it has not been initialized so `foo` is set to the default for all objects which is `null`.  At this point I assume your code throws a `NullPointerException` when you attempt to add an item to the list.","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>The <code>final</code> keyword indicates that a variable may only be initialized once.  In your code you are only performing one initialization of final so the terms are satisfied.  This statement performs the lone initialization of <code>foo</code>.  Note that <code>final</code> != immutable, it only means that the reference cannot change.</p>\n\n<pre><code>foo = new ArrayList();\n</code></pre>\n\n<p>When you declare <code>foo</code> as <code>static final</code> the variable must be initialized when the class is loaded and cannot rely on instantiation (aka call to constructor) to initialize <code>foo</code> since static fields must be available without an instance of a class.  There is no guarantee that the constructor will have been called prior to using the static field.</p>\n\n<p>When you execute your method under the <code>static final</code> scenario the <code>Test</code> class is loaded prior to instantiating <code>t</code> at this time there is no instantiation of <code>foo</code> meaning it has not been initialized so <code>foo</code> is set to the default for all objects which is <code>null</code>.  At this point I assume your code throws a <code>NullPointerException</code> when you attempt to add an item to the list.</p>\n"},{"tags":[],"owner":{"account_id":1093641,"reputation":4759,"user_id":1087718,"accept_rate":84,"display_name":"czupe"},"down_vote_count":0,"up_vote_count":246,"is_accepted":false,"score":246,"last_activity_date":1392600523,"creation_date":1364375397,"answer_id":15655140,"question_id":15655012,"body_markdown":"*Final* keyword has a numerous way to use:\r\n\r\n - A final **class** cannot be subclassed.\r\n - A final **method** cannot be overridden by subclasses\r\n - A final **variable** can only be initialized once\r\n\r\nOther usage:\r\n\r\n - *When an anonymous inner class is defined within the body of a method,\r\n   all variables declared final in the scope of that method are\r\n   accessible from within the inner class*\r\n\r\nA static class variable will exist from the start of the JVM, and should be initialized in the class. The  error message won&#39;t appear if you do this.","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p><em>Final</em> keyword has a numerous way to use:</p>\n\n<ul>\n<li>A final <strong>class</strong> cannot be subclassed.</li>\n<li>A final <strong>method</strong> cannot be overridden by subclasses</li>\n<li>A final <strong>variable</strong> can only be initialized once</li>\n</ul>\n\n<p>Other usage:</p>\n\n<ul>\n<li><em>When an anonymous inner class is defined within the body of a method,\nall variables declared final in the scope of that method are\naccessible from within the inner class</em></li>\n</ul>\n\n<p>A static class variable will exist from the start of the JVM, and should be initialized in the class. The  error message won't appear if you do this.</p>\n"},{"tags":[],"owner":{"account_id":1881735,"reputation":7688,"user_id":1701776,"accept_rate":71,"display_name":"BambooleanLogic"},"down_vote_count":0,"up_vote_count":72,"is_accepted":false,"score":72,"last_activity_date":1501469475,"creation_date":1364375558,"answer_id":15655179,"question_id":15655012,"body_markdown":"The `final` keyword can be interpreted in two different ways depending on what it&#39;s used on:\r\n\r\n**Value types:** For `int`s, `double`s etc, it will ensure that the value cannot change,\r\n\r\n**Reference types:** For references to objects, `final` ensures that the **reference** will never change, meaning that it will always refer to the same object. It makes no guarantees whatsoever about the values inside the object being referred to staying the same.\r\n\r\nAs such, `final List&lt;Whatever&gt; foo;` ensures that `foo` always refers to *the same* list, but *the contents* of said list may change over time.","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>The <code>final</code> keyword can be interpreted in two different ways depending on what it's used on:</p>\n\n<p><strong>Value types:</strong> For <code>int</code>s, <code>double</code>s etc, it will ensure that the value cannot change,</p>\n\n<p><strong>Reference types:</strong> For references to objects, <code>final</code> ensures that the <strong>reference</strong> will never change, meaning that it will always refer to the same object. It makes no guarantees whatsoever about the values inside the object being referred to staying the same.</p>\n\n<p>As such, <code>final List&lt;Whatever&gt; foo;</code> ensures that <code>foo</code> always refers to <em>the same</em> list, but <em>the contents</em> of said list may change over time.</p>\n"},{"tags":[],"owner":{"account_id":1129088,"reputation":10395,"user_id":1115584,"accept_rate":71,"display_name":"AmitG"},"down_vote_count":0,"up_vote_count":646,"is_accepted":false,"score":646,"last_activity_date":1656496140,"creation_date":1364378892,"answer_id":15656208,"question_id":15655012,"body_markdown":"This is a **favorite interview question**. With this questions, the interviewer tries to find out how well you understand the behavior of objects with respect to constructors, methods, class variables (static variables) and instance variables.&lt;br&gt;\r\nNow a days interviewers are asking another favorite question **what is effectively final** from java 1.8.&lt;br&gt; I will explain in the end about this `effectively final` in java 1.8.\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    class Test {\r\n    \tprivate final List foo;\r\n    \r\n    \tpublic Test() {\r\n    \t\tfoo = new ArrayList();\r\n    \t\tfoo.add(&quot;foo&quot;); // Modification-1\r\n    \t}\r\n    \r\n    \tpublic void setFoo(List foo) {\r\n           //this.foo = foo; Results in compile time error.\r\n    \t}\r\n    }\r\n\r\nIn the above case, we have defined a constructor for &#39;Test&#39; and gave it a &#39;setFoo&#39; method. &lt;br&gt;\r\n\r\n**About constructor:**  Constructor can be invoked only **one** time per object creation by using the `new` keyword. You cannot invoke constructor multiple times, because constructor are not designed to do so. &lt;br&gt;\r\n\r\n**About method:** A method can be invoked as many times as you want (Even never) and the compiler knows it. &lt;br&gt;\r\n\r\n**Scenario 1**&lt;br&gt;\r\n\r\n    private final List foo;  // 1\r\n\r\n`foo` is an **instance** variable. When we create `Test` class object then the instance variable `foo`, will be copied inside the object of `Test` class. If we assign `foo` inside the constructor, then the compiler knows that the constructor will be invoked only once, so there is no problem assigning it inside the constructor.\r\n&lt;br&gt;&lt;br&gt;\r\nIf we assign `foo` inside a method, the compiler knows that a method can be called multiple times, which means the value will have to be changed multiple times, which is not allowed for a `final` variable. So the compiler decides constructor is good choice! **You can assign a value to a final variable only one time.**\r\n\r\n**Scenario 2**\r\n\r\n    private static final List foo = new ArrayList();\r\n\r\n`foo` is now a **static** variable. When we create an instance of `Test` class, `foo` will not be copied to the object because `foo` is static. Now `foo` is not an independent property of each object. This is a property of `Test` class. But `foo` can be seen by multiple objects and if every object which is created by using the `new` keyword which will ultimately invoke the `Test` constructor which changes the value at the time of multiple object creation (Remember `static foo` is not copied in every object, but is shared between multiple objects.) &lt;br&gt;\r\n\r\n**Scenario 3** &lt;br&gt;\r\n\r\n    t.foo.add(&quot;bar&quot;); // Modification-2\r\n\r\nAbove `Modification-2` is from your question. In the above case, you are not changing the first referenced object, but you are adding content inside `foo` which is allowed. Compiler complains if you try to assign a `new ArrayList()` to the `foo` reference variable.&lt;br&gt;\r\n**Rule** If you have initialized a `final` variable, then you cannot change it to refer to a different object. (In this case `ArrayList`)\r\n\r\n\r\n**final** classes cannot be subclassed&lt;br&gt;\r\n**final** methods cannot be overridden. (This method is in superclass)&lt;br&gt;\r\n**final** methods can override. (Read this in grammatical way. This method is in a subclass)\r\n\r\n\r\nNow let&#39;s see **what is effectively final in java 1.8?**\r\n\r\n\r\n    public class EffectivelyFinalDemo { //compile code with java 1.8\r\n    \tpublic void process() {\r\n    \t\tint thisValueIsFinalWithoutFinalKeyword = 10; //variable is effectively final\r\n    \t\t\r\n    \t\t//to work without final keyword you should not reassign value to above variable like given below \r\n    \t\tthisValueIsFinalWithoutFinalKeyword = getNewValue(); // delete this line when I tell you.\r\n    \t\t\r\n    \t\tclass MethodLocalClass {\r\n    \t\t\tpublic void innerMethod() {\r\n    \t\t\t\t//below line is now showing compiler error like give below\r\n    \t\t\t\t//Local variable thisValueIsFinalWithoutFinalKeyword defined in an enclosing scope must be final or effectively final\r\n    \t\t\t\tSystem.out.println(thisValueIsFinalWithoutFinalKeyword); //on this line only final variables are allowed because this is method local class\r\n    \t\t\t\t// if you want to test effectively final is working without final keyword then delete line which I told you to delete in above program.  \r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate int getNewValue() {\r\n    \t\treturn 0;\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n\r\n \r\nAbove program will throw error in java 1.7 or &lt;1.8 if you do not use final keyword. Effectively final is a part of Method Local Inner classes. I know you would rarely use such effectively final in method local classes, but for interview we have to be prepared.\r\n\r\n\r\n\r\n","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>This is a <strong>favorite interview question</strong>. With this questions, the interviewer tries to find out how well you understand the behavior of objects with respect to constructors, methods, class variables (static variables) and instance variables.<br>\nNow a days interviewers are asking another favorite question <strong>what is effectively final</strong> from java 1.8.<br> I will explain in the end about this <code>effectively final</code> in java 1.8.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\nclass Test {\n    private final List foo;\n\n    public Test() {\n        foo = new ArrayList();\n        foo.add(&quot;foo&quot;); // Modification-1\n    }\n\n    public void setFoo(List foo) {\n       //this.foo = foo; Results in compile time error.\n    }\n}\n</code></pre>\n<p>In the above case, we have defined a constructor for 'Test' and gave it a 'setFoo' method. <br></p>\n<p><strong>About constructor:</strong>  Constructor can be invoked only <strong>one</strong> time per object creation by using the <code>new</code> keyword. You cannot invoke constructor multiple times, because constructor are not designed to do so. <br></p>\n<p><strong>About method:</strong> A method can be invoked as many times as you want (Even never) and the compiler knows it. <br></p>\n<p><strong>Scenario 1</strong><br></p>\n<pre><code>private final List foo;  // 1\n</code></pre>\n<p><code>foo</code> is an <strong>instance</strong> variable. When we create <code>Test</code> class object then the instance variable <code>foo</code>, will be copied inside the object of <code>Test</code> class. If we assign <code>foo</code> inside the constructor, then the compiler knows that the constructor will be invoked only once, so there is no problem assigning it inside the constructor.\n<br><br>\nIf we assign <code>foo</code> inside a method, the compiler knows that a method can be called multiple times, which means the value will have to be changed multiple times, which is not allowed for a <code>final</code> variable. So the compiler decides constructor is good choice! <strong>You can assign a value to a final variable only one time.</strong></p>\n<p><strong>Scenario 2</strong></p>\n<pre><code>private static final List foo = new ArrayList();\n</code></pre>\n<p><code>foo</code> is now a <strong>static</strong> variable. When we create an instance of <code>Test</code> class, <code>foo</code> will not be copied to the object because <code>foo</code> is static. Now <code>foo</code> is not an independent property of each object. This is a property of <code>Test</code> class. But <code>foo</code> can be seen by multiple objects and if every object which is created by using the <code>new</code> keyword which will ultimately invoke the <code>Test</code> constructor which changes the value at the time of multiple object creation (Remember <code>static foo</code> is not copied in every object, but is shared between multiple objects.) <br></p>\n<p><strong>Scenario 3</strong> <br></p>\n<pre><code>t.foo.add(&quot;bar&quot;); // Modification-2\n</code></pre>\n<p>Above <code>Modification-2</code> is from your question. In the above case, you are not changing the first referenced object, but you are adding content inside <code>foo</code> which is allowed. Compiler complains if you try to assign a <code>new ArrayList()</code> to the <code>foo</code> reference variable.<br>\n<strong>Rule</strong> If you have initialized a <code>final</code> variable, then you cannot change it to refer to a different object. (In this case <code>ArrayList</code>)</p>\n<p><strong>final</strong> classes cannot be subclassed<br>\n<strong>final</strong> methods cannot be overridden. (This method is in superclass)<br>\n<strong>final</strong> methods can override. (Read this in grammatical way. This method is in a subclass)</p>\n<p>Now let's see <strong>what is effectively final in java 1.8?</strong></p>\n<pre><code>public class EffectivelyFinalDemo { //compile code with java 1.8\n    public void process() {\n        int thisValueIsFinalWithoutFinalKeyword = 10; //variable is effectively final\n        \n        //to work without final keyword you should not reassign value to above variable like given below \n        thisValueIsFinalWithoutFinalKeyword = getNewValue(); // delete this line when I tell you.\n        \n        class MethodLocalClass {\n            public void innerMethod() {\n                //below line is now showing compiler error like give below\n                //Local variable thisValueIsFinalWithoutFinalKeyword defined in an enclosing scope must be final or effectively final\n                System.out.println(thisValueIsFinalWithoutFinalKeyword); //on this line only final variables are allowed because this is method local class\n                // if you want to test effectively final is working without final keyword then delete line which I told you to delete in above program.  \n            }\n        }\n    }\n\n    private int getNewValue() {\n        return 0;\n    }\n}\n</code></pre>\n<p>Above program will throw error in java 1.7 or &lt;1.8 if you do not use final keyword. Effectively final is a part of Method Local Inner classes. I know you would rarely use such effectively final in method local classes, but for interview we have to be prepared.</p>\n"},{"tags":[],"owner":{"account_id":3673241,"reputation":1185,"user_id":3059896,"display_name":"Shehan Simen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1387764604,"creation_date":1387764604,"answer_id":20736138,"question_id":15655012,"body_markdown":"Above all are correct. Further if you do not want others to create sub classes from your class, then declare your class as final. Then it becomes the leaf level of your class tree hierarchy that no one can extend it further. It is a good practice to avoid huge hierarchy of classes.","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>Above all are correct. Further if you do not want others to create sub classes from your class, then declare your class as final. Then it becomes the leaf level of your class tree hierarchy that no one can extend it further. It is a good practice to avoid huge hierarchy of classes.</p>\n"},{"tags":[],"owner":{"account_id":1920030,"reputation":23840,"user_id":1731796,"accept_rate":52,"display_name":"Desta Haileselassie Hagos"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1392603126,"creation_date":1392602735,"answer_id":21819558,"question_id":15655012,"body_markdown":"*`final`* is a reserved keyword in Java to restrict the user and it can be applied to member variables, methods, class and local variables. Final variables are often declared with the *`static`* keyword in Java and are treated as constants. For example:\r\n\r\n    public static final String hello = &quot;Hello&quot;;\r\n\r\nWhen we use the *`final`* keyword with a variable declaration, the value stored inside that variable cannot be changed latter. \r\n\r\nFor example:\r\n\r\n    public class ClassDemo {\r\n      private final int var1 = 3;\r\n      public ClassDemo() {\r\n        ...\r\n      }\r\n    }\r\n\r\n**Note**: A class declared as final cannot be extended or inherited (i.e, there cannot be a subclass of the super class). It is also good to note that methods declared as final cannot be overridden by subclasses. \r\n\r\n**Benefits of using the final keyword are addressed in** [this thread][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4279420/does-use-of-final-keyword-in-java-improve-the-performance","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p><em><code>final</code></em> is a reserved keyword in Java to restrict the user and it can be applied to member variables, methods, class and local variables. Final variables are often declared with the <em><code>static</code></em> keyword in Java and are treated as constants. For example:</p>\n\n<pre><code>public static final String hello = \"Hello\";\n</code></pre>\n\n<p>When we use the <em><code>final</code></em> keyword with a variable declaration, the value stored inside that variable cannot be changed latter. </p>\n\n<p>For example:</p>\n\n<pre><code>public class ClassDemo {\n  private final int var1 = 3;\n  public ClassDemo() {\n    ...\n  }\n}\n</code></pre>\n\n<p><strong>Note</strong>: A class declared as final cannot be extended or inherited (i.e, there cannot be a subclass of the super class). It is also good to note that methods declared as final cannot be overridden by subclasses. </p>\n\n<p><strong>Benefits of using the final keyword are addressed in</strong> <a href=\"https://stackoverflow.com/questions/4279420/does-use-of-final-keyword-in-java-improve-the-performance\">this thread</a>.</p>\n"},{"tags":[],"owner":{"account_id":4056826,"reputation":2400,"user_id":3334520,"accept_rate":58,"display_name":"Niko Bellic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1406055741,"creation_date":1406055741,"answer_id":24895623,"question_id":15655012,"body_markdown":"First of all, the place in your code where you are initializing (i.e. assigning for the first time) foo is here:\r\n\r\n    foo = new ArrayList();\r\n\r\nfoo is an object (with type List) so it is a *reference* type, not a *value* type (like int). As such, it holds a reference to a memory location (e.g. 0xA7D2A834) where your List elements are stored. Lines like this\r\n\r\n    foo.add(&quot;foo&quot;); // Modification-1\r\n\r\ndo not change the value of foo (which, again, is just a reference to a memory location). Instead, they just add elements into that referenced memory location. To violate the *final* keyword, you would have to try to re-assign foo as follows again:\r\n\r\n    foo = new ArrayList();\r\n\r\nThat *would* give you a compilation error.\r\n\r\n---\r\nNow, with that out of the way, think about what happens when you add the *static* keyword. \r\n\r\nWhen you do NOT have the static keyword, each object that instantiates the class has its own copy of foo. Therefore, the constructor assigns a value to a blank, fresh copy of the foo variable, which is perfectly fine.\r\n\r\nHowever, when you DO have the static keyword, only one foo exists in memory that is associated with the class. If you were to create two or more objects, the constructor would be attempting to re-assign that one foo each time, violating the *final* keyword.","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>First of all, the place in your code where you are initializing (i.e. assigning for the first time) foo is here:</p>\n\n<pre><code>foo = new ArrayList();\n</code></pre>\n\n<p>foo is an object (with type List) so it is a <em>reference</em> type, not a <em>value</em> type (like int). As such, it holds a reference to a memory location (e.g. 0xA7D2A834) where your List elements are stored. Lines like this</p>\n\n<pre><code>foo.add(\"foo\"); // Modification-1\n</code></pre>\n\n<p>do not change the value of foo (which, again, is just a reference to a memory location). Instead, they just add elements into that referenced memory location. To violate the <em>final</em> keyword, you would have to try to re-assign foo as follows again:</p>\n\n<pre><code>foo = new ArrayList();\n</code></pre>\n\n<p>That <em>would</em> give you a compilation error.</p>\n\n<hr>\n\n<p>Now, with that out of the way, think about what happens when you add the <em>static</em> keyword. </p>\n\n<p>When you do NOT have the static keyword, each object that instantiates the class has its own copy of foo. Therefore, the constructor assigns a value to a blank, fresh copy of the foo variable, which is perfectly fine.</p>\n\n<p>However, when you DO have the static keyword, only one foo exists in memory that is associated with the class. If you were to create two or more objects, the constructor would be attempting to re-assign that one foo each time, violating the <em>final</em> keyword.</p>\n"},{"tags":[],"owner":{"account_id":479924,"reputation":1025,"user_id":892871,"accept_rate":68,"display_name":"user892871"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1411716899,"creation_date":1411590856,"answer_id":26025991,"question_id":15655012,"body_markdown":"This is a very good interview question. Sometimes they might even ask you what is the difference between a final object and immutable object.\r\n\r\n1) When someone mentions a final object, it means that the reference cannot be changed, but its state(instance variables) can be changed.  \r\n\r\n2) An immutable object is one whose state can *not* be changed, but its reference can be changed. \r\nEx:\r\n\r\n        String x = new String(&quot;abc&quot;); \r\n        x = &quot;BCG&quot;;\r\nref variable x can be changed to point a different string, but value of &quot;abc&quot; cannot be changed. \r\n\r\n3) Instance variables(non static fields) are initialized when a constructor is called. So you can initialize values to you variables inside a constructor.\r\n\r\n4) &quot;But i see that you can change the value in the constructor/methods of the class&quot;. -- You cannot change it inside a method.\r\n\r\n5) A static variable is initialized during class loading. So you cannot initialize inside a constructor, it has to be done even before it. So you need to assign values to a static variable *during* declaration itself.\r\n\r\n\r\n ","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>This is a very good interview question. Sometimes they might even ask you what is the difference between a final object and immutable object.</p>\n\n<p>1) When someone mentions a final object, it means that the reference cannot be changed, but its state(instance variables) can be changed.  </p>\n\n<p>2) An immutable object is one whose state can <em>not</em> be changed, but its reference can be changed. \nEx:</p>\n\n<pre><code>    String x = new String(\"abc\"); \n    x = \"BCG\";\n</code></pre>\n\n<p>ref variable x can be changed to point a different string, but value of \"abc\" cannot be changed. </p>\n\n<p>3) Instance variables(non static fields) are initialized when a constructor is called. So you can initialize values to you variables inside a constructor.</p>\n\n<p>4) \"But i see that you can change the value in the constructor/methods of the class\". -- You cannot change it inside a method.</p>\n\n<p>5) A static variable is initialized during class loading. So you cannot initialize inside a constructor, it has to be done even before it. So you need to assign values to a static variable <em>during</em> declaration itself.</p>\n"},{"tags":[],"owner":{"account_id":5333573,"reputation":1377,"user_id":4253424,"display_name":"huseyin"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1453925080,"creation_date":1453925080,"answer_id":35046994,"question_id":15655012,"body_markdown":"Suppose you have two moneyboxes, red and white. You assign these moneyboxes only two children and they are not allowed interchange their boxes. So You have red or white moneyboxes(final) you cannot modify the box but you can put money on your box.Nobody cares (Modification-2).\r\n\r\n","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>Suppose you have two moneyboxes, red and white. You assign these moneyboxes only two children and they are not allowed interchange their boxes. So You have red or white moneyboxes(final) you cannot modify the box but you can put money on your box.Nobody cares (Modification-2).</p>\n"},{"tags":[],"owner":{"account_id":7622441,"reputation":9288,"user_id":5780109,"accept_rate":100,"display_name":"ivanleoncz"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1526996077,"creation_date":1467216311,"answer_id":38104833,"question_id":15655012,"body_markdown":"Worth to mention some straightforward definitions:\r\n\r\n**Classes/Methods**\r\n\r\n&gt; You can declare some or all of a class methods as `final`, in order to indicate that the method cannot be overridden by subclasses.\r\n\r\n**Variables**\r\n\r\n&gt; Once a `final` variable has been initialized, it always contains the same value. \r\n\r\n`final` basically avoid overwrite/superscribe by anything (subclasses, variable &quot;reassign&quot;), depending on the case.\r\n\r\n\r\n","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>Worth to mention some straightforward definitions:</p>\n\n<p><strong>Classes/Methods</strong></p>\n\n<blockquote>\n  <p>You can declare some or all of a class methods as <code>final</code>, in order to indicate that the method cannot be overridden by subclasses.</p>\n</blockquote>\n\n<p><strong>Variables</strong></p>\n\n<blockquote>\n  <p>Once a <code>final</code> variable has been initialized, it always contains the same value. </p>\n</blockquote>\n\n<p><code>final</code> basically avoid overwrite/superscribe by anything (subclasses, variable \"reassign\"), depending on the case.</p>\n"},{"tags":[],"owner":{"account_id":6701313,"reputation":7980,"user_id":5167682,"accept_rate":29,"display_name":"roottraveller"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1475821604,"creation_date":1475821604,"answer_id":39910759,"question_id":15655012,"body_markdown":"Following are different contexts where final is used.\r\n\r\n**Final variables** A final variable can only be assigned once. If the variable is a reference, this means that the variable cannot be re-bound to reference another object.\r\n\r\n   \r\n\r\n    \r\n    class Main {\r\n       public static void main(String args[]){\r\n          final int i = 20;\r\n          i = 30; //Compiler Error:cannot assign a value to final variable i twice\r\n       }\r\n    }\r\n\r\n final variable can be assigned value later (not compulsory to assigned a value when declared), but only once.\r\n\r\n**Final classes** A final class cannot be extended (inherited)\r\n\r\n\r\n\r\n    final class Base { }\r\n    class Derived extends Base { } //Compiler Error:cannot inherit from final Base\r\n      \r\n    public class Main {\r\n       public static void main(String args[]) {\r\n       }\r\n    }\r\n\r\n**Final methods** A final method cannot be overridden by subclasses.\r\n\r\n    //Error in following program as we are trying to override a final method.\r\n    class Base {\r\n      public final void show() {\r\n           System.out.println(&quot;Base::show() called&quot;);\r\n        }\r\n    }     \r\n    class Derived extends Base {\r\n        public void show() {  //Compiler Error: show() in Derived cannot override\r\n           System.out.println(&quot;Derived::show() called&quot;);\r\n        }\r\n    }     \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Base b = new Derived();;\r\n            b.show();\r\n        }\r\n    }","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>Following are different contexts where final is used.</p>\n\n<p><strong>Final variables</strong> A final variable can only be assigned once. If the variable is a reference, this means that the variable cannot be re-bound to reference another object.</p>\n\n<pre><code>class Main {\n   public static void main(String args[]){\n      final int i = 20;\n      i = 30; //Compiler Error:cannot assign a value to final variable i twice\n   }\n}\n</code></pre>\n\n<p>final variable can be assigned value later (not compulsory to assigned a value when declared), but only once.</p>\n\n<p><strong>Final classes</strong> A final class cannot be extended (inherited)</p>\n\n<pre><code>final class Base { }\nclass Derived extends Base { } //Compiler Error:cannot inherit from final Base\n\npublic class Main {\n   public static void main(String args[]) {\n   }\n}\n</code></pre>\n\n<p><strong>Final methods</strong> A final method cannot be overridden by subclasses.</p>\n\n<pre><code>//Error in following program as we are trying to override a final method.\nclass Base {\n  public final void show() {\n       System.out.println(\"Base::show() called\");\n    }\n}     \nclass Derived extends Base {\n    public void show() {  //Compiler Error: show() in Derived cannot override\n       System.out.println(\"Derived::show() called\");\n    }\n}     \npublic class Main {\n    public static void main(String[] args) {\n        Base b = new Derived();;\n        b.show();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8026662,"reputation":579,"user_id":6053321,"display_name":"Ali Ziaee"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1517297616,"creation_date":1483418718,"answer_id":41436563,"question_id":15655012,"body_markdown":"The `final` keyword in java is used to restrict the user. The java `final` keyword can be used in many context. Final can be:\r\n\r\n1. variable  \r\n2. method  \r\n3. class  \r\n\r\nThe `final` keyword can be applied with the variables, a `final` variable that has no value, is called blank `final` variable or uninitialized `final` variable. It can be initialized in the constructor only. The blank `final` variable can be `static` also which will be initialized in the `static` block only. \r\n\r\n**Java final variable:**\r\n\r\nIf you make any variable as `final`, you **cannot change the value** of `final` variable(It will be constant).\r\n\r\nExample of `final` variable\r\n\r\nThere is a final variable speedlimit, we are going to change the value of this variable, but It can&#39;t be changed because final variable once assigned a value can never be changed.\r\n\r\n\r\n\r\n\r\n    class Bike9{  \r\n        final int speedlimit=90;//final variable  \r\n        void run(){  \r\n            speedlimit=400;  // this will make error\r\n        }  \r\n\r\n        public static void main(String args[]){  \r\n        Bike9 obj=new  Bike9();  \r\n        obj.run();  \r\n        }  \r\n    }//end of class  \r\n\r\n\r\n\r\n**Java final class:**\r\n\r\nIf you make any class as `final`, you **cannot extend** it.\r\n\r\nExample of final class\r\n\r\n    final class Bike{}  \r\n      \r\n    class Honda1 extends Bike{    //cannot inherit from final Bike,this will make error\r\n      void run(){\r\n          System.out.println(&quot;running safely with 100kmph&quot;);\r\n       }  \r\n        \r\n      public static void main(String args[]){  \r\n          Honda1 honda= new Honda();  \r\n          honda.run();  \r\n          }  \r\n      }  \r\n\r\n\r\n**Java final method:**\r\n\r\nIf you make any method as final, you **cannot override** it.\r\n\r\nExample of `final` method\r\n(run() in Honda cannot override run() in Bike)\r\n\r\n    class Bike{  \r\n      final void run(){System.out.println(&quot;running&quot;);}  \r\n    }  \r\n         \r\n    class Honda extends Bike{  \r\n       void run(){System.out.println(&quot;running safely with 100kmph&quot;);}  \r\n         \r\n       public static void main(String args[]){  \r\n       Honda honda= new Honda();  \r\n       honda.run();  \r\n       }  \r\n    }  \r\n\r\n\r\nshared from:\r\nhttp://www.javatpoint.com/final-keyword","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>The <code>final</code> keyword in java is used to restrict the user. The java <code>final</code> keyword can be used in many context. Final can be:</p>\n\n<ol>\n<li>variable  </li>\n<li>method  </li>\n<li>class  </li>\n</ol>\n\n<p>The <code>final</code> keyword can be applied with the variables, a <code>final</code> variable that has no value, is called blank <code>final</code> variable or uninitialized <code>final</code> variable. It can be initialized in the constructor only. The blank <code>final</code> variable can be <code>static</code> also which will be initialized in the <code>static</code> block only. </p>\n\n<p><strong>Java final variable:</strong></p>\n\n<p>If you make any variable as <code>final</code>, you <strong>cannot change the value</strong> of <code>final</code> variable(It will be constant).</p>\n\n<p>Example of <code>final</code> variable</p>\n\n<p>There is a final variable speedlimit, we are going to change the value of this variable, but It can't be changed because final variable once assigned a value can never be changed.</p>\n\n<pre><code>class Bike9{  \n    final int speedlimit=90;//final variable  \n    void run(){  \n        speedlimit=400;  // this will make error\n    }  \n\n    public static void main(String args[]){  \n    Bike9 obj=new  Bike9();  \n    obj.run();  \n    }  \n}//end of class  \n</code></pre>\n\n<p><strong>Java final class:</strong></p>\n\n<p>If you make any class as <code>final</code>, you <strong>cannot extend</strong> it.</p>\n\n<p>Example of final class</p>\n\n<pre><code>final class Bike{}  \n\nclass Honda1 extends Bike{    //cannot inherit from final Bike,this will make error\n  void run(){\n      System.out.println(\"running safely with 100kmph\");\n   }  \n\n  public static void main(String args[]){  \n      Honda1 honda= new Honda();  \n      honda.run();  \n      }  \n  }  \n</code></pre>\n\n<p><strong>Java final method:</strong></p>\n\n<p>If you make any method as final, you <strong>cannot override</strong> it.</p>\n\n<p>Example of <code>final</code> method\n(run() in Honda cannot override run() in Bike)</p>\n\n<pre><code>class Bike{  \n  final void run(){System.out.println(\"running\");}  \n}  \n\nclass Honda extends Bike{  \n   void run(){System.out.println(\"running safely with 100kmph\");}  \n\n   public static void main(String args[]){  \n   Honda honda= new Honda();  \n   honda.run();  \n   }  \n}  \n</code></pre>\n\n<p>shared from:\n<a href=\"http://www.javatpoint.com/final-keyword\" rel=\"noreferrer\">http://www.javatpoint.com/final-keyword</a></p>\n"},{"tags":[],"owner":{"account_id":1592127,"reputation":18171,"user_id":1475228,"accept_rate":84,"display_name":"Pritam Banerjee"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1498607286,"creation_date":1498607286,"answer_id":44791647,"question_id":15655012,"body_markdown":"Read all the answers. \r\n\r\nThere is another user case where `final` keyword can be used i.e. in a method argument:\r\n\r\n    public void showCaseFinalArgumentVariable(final int someFinalInt){\r\n        \r\n       someFinalInt = 9; // won&#39;t compile as the argument is final\r\n    \r\n    }\r\n\r\nCan be used for variable which should not be changed.","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>Read all the answers. </p>\n\n<p>There is another user case where <code>final</code> keyword can be used i.e. in a method argument:</p>\n\n<pre><code>public void showCaseFinalArgumentVariable(final int someFinalInt){\n\n   someFinalInt = 9; // won't compile as the argument is final\n\n}\n</code></pre>\n\n<p>Can be used for variable which should not be changed.</p>\n"},{"tags":[],"owner":{"account_id":7525670,"reputation":12194,"user_id":5715934,"accept_rate":95,"display_name":"Supun Wijerathne"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1515902449,"creation_date":1515901756,"answer_id":48246531,"question_id":15655012,"body_markdown":"I thought of writing an updated and in depth answer here.\r\n\r\n`final` keyword can be used in several places.\r\n\r\n 1. classes \r\n\r\nA `final class` means that ***no*** other class can ***extend*** that final class. When Java Run Time (***JRE***) knows an object reference is in type of a final class (say F), it knows that the value of that reference can only be in type of F. \r\n\r\nEx:\r\n\r\n    F myF;\r\n    myF = new F();    //ok\r\n    myF = someOther;  //someOther cannot be in type of a child class of F.\r\n                      //because F cannot be extended.\r\n\r\nSo when it executes any method of that object, that method ***doesn&#39;t need*** to be resolved at run time using a ***[virtual table][1]***. i.e. run-time polymorphism cannot be applied. So the run time doesn&#39;t bother about that. Which means it saves processing time, which will improve performance.\r\n\r\n 2.  methods\r\n\r\nA `final method` of any class means that any child class extending that class ***cannot override*** that final method(s). So the run time behavior in this scenario is also quite same with the previous behavior I mentioned for classes.\r\n\r\n 3. fields, local variables, method parameters\r\n\r\nIf one specified any kind of above as `final`, it means that the value is already finalized, so the ***value cannot be changed***.\r\n\r\nEx:\r\n\r\nFor fields, local parameters\r\n\r\n    final FinalClass fc = someFC; //need to assign straight away. otherwise compile error.\r\n    final FinalClass fc; //compile error, need assignment (initialization inside a constructor Ok, constructor can be called only once)\r\n    final FinalClass fc = new FinalClass(); //ok\r\n    fc = someOtherFC; //compile error\r\n    fc.someMethod(); //no problem\r\n    someOtherFC.someMethod(); //no problem\r\n\r\nFor method parameters\r\n\r\n    void someMethod(final String s){\r\n        s = someOtherString; //compile error\r\n    }\r\n\r\nThis simply means that value of the `final` reference value cannot be changed. i.e. only one initialization is allowed. In this scenario, in run time, since ***JRE*** knows that values cannot be changed, it loads all these finalized values (of final references) into ***L1 cache***. Because it ***doesn&#39;t need*** to ***load back*** again and again from ***main memory***. Otherwise it loads to L2 cache and does time to time loading from main memory. So it is also a performance improvement.\r\n\r\n\r\nSo in all above 3 scenarios, when we have not specified the `final` keyword in places we can use, we don&#39;t need to worry, [compiler optimizations][2] will do that for us. There are also lots of other things that compiler optimizations do for us. :) \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Virtual_method_table\r\n  [2]: https://www.ibm.com/support/knowledgecenter/en/ssw_aix_72/com.ibm.aix.performance/comp_opt_tech.htm","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>I thought of writing an updated and in depth answer here.</p>\n\n<p><code>final</code> keyword can be used in several places.</p>\n\n<ol>\n<li>classes </li>\n</ol>\n\n<p>A <code>final class</code> means that <strong><em>no</em></strong> other class can <strong><em>extend</em></strong> that final class. When Java Run Time (<strong><em>JRE</em></strong>) knows an object reference is in type of a final class (say F), it knows that the value of that reference can only be in type of F. </p>\n\n<p>Ex:</p>\n\n<pre><code>F myF;\nmyF = new F();    //ok\nmyF = someOther;  //someOther cannot be in type of a child class of F.\n                  //because F cannot be extended.\n</code></pre>\n\n<p>So when it executes any method of that object, that method <strong><em>doesn't need</em></strong> to be resolved at run time using a <strong><em><a href=\"https://en.wikipedia.org/wiki/Virtual_method_table\" rel=\"nofollow noreferrer\">virtual table</a></em></strong>. i.e. run-time polymorphism cannot be applied. So the run time doesn't bother about that. Which means it saves processing time, which will improve performance.</p>\n\n<ol start=\"2\">\n<li>methods</li>\n</ol>\n\n<p>A <code>final method</code> of any class means that any child class extending that class <strong><em>cannot override</em></strong> that final method(s). So the run time behavior in this scenario is also quite same with the previous behavior I mentioned for classes.</p>\n\n<ol start=\"3\">\n<li>fields, local variables, method parameters</li>\n</ol>\n\n<p>If one specified any kind of above as <code>final</code>, it means that the value is already finalized, so the <strong><em>value cannot be changed</em></strong>.</p>\n\n<p>Ex:</p>\n\n<p>For fields, local parameters</p>\n\n<pre><code>final FinalClass fc = someFC; //need to assign straight away. otherwise compile error.\nfinal FinalClass fc; //compile error, need assignment (initialization inside a constructor Ok, constructor can be called only once)\nfinal FinalClass fc = new FinalClass(); //ok\nfc = someOtherFC; //compile error\nfc.someMethod(); //no problem\nsomeOtherFC.someMethod(); //no problem\n</code></pre>\n\n<p>For method parameters</p>\n\n<pre><code>void someMethod(final String s){\n    s = someOtherString; //compile error\n}\n</code></pre>\n\n<p>This simply means that value of the <code>final</code> reference value cannot be changed. i.e. only one initialization is allowed. In this scenario, in run time, since <strong><em>JRE</em></strong> knows that values cannot be changed, it loads all these finalized values (of final references) into <strong><em>L1 cache</em></strong>. Because it <strong><em>doesn't need</em></strong> to <strong><em>load back</em></strong> again and again from <strong><em>main memory</em></strong>. Otherwise it loads to L2 cache and does time to time loading from main memory. So it is also a performance improvement.</p>\n\n<p>So in all above 3 scenarios, when we have not specified the <code>final</code> keyword in places we can use, we don't need to worry, <a href=\"https://www.ibm.com/support/knowledgecenter/en/ssw_aix_72/com.ibm.aix.performance/comp_opt_tech.htm\" rel=\"nofollow noreferrer\">compiler optimizations</a> will do that for us. There are also lots of other things that compiler optimizations do for us. :) </p>\n"},{"tags":[],"owner":{"account_id":2465829,"reputation":11057,"user_id":2148953,"accept_rate":96,"display_name":"aran"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1613276050,"creation_date":1612037042,"answer_id":65972580,"question_id":15655012,"body_markdown":" ***`&quot;A final variable can only be assigned once&quot;`***\r\n\r\n**`*Reflection*`** - *&quot;wowo wait, hold my beer&quot;*.\r\n-\r\n-----\r\n\r\n**Freeze** of `final` fields happen in two scenarios:\r\n\r\n - End of constructor.\r\n - When reflection sets the field&#39;s value. (*as many times as it wants to*)\r\n\r\n-----\r\n\r\n***Let&#39;s break the law***\r\n\r\n    public class HoldMyBeer \r\n    {\r\n    \tfinal int notSoFinal;\r\n    \t\r\n        public HoldMyBeer()\r\n    \t{\r\n    \t   notSoFinal = 1;\r\n    \t}\r\n    \r\n    \tstatic void holdIt(HoldMyBeer beer, int yetAnotherFinalValue) throws Exception\r\n    \t{\r\n    \t   Class&lt;HoldMyBeer&gt; cl = HoldMyBeer.class;\r\n    \t   Field field = cl.getDeclaredField(&quot;notSoFinal&quot;);\r\n    \t   field.setAccessible(true);\r\n    \t   field.set(beer, yetAnotherFinalValue);\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws Exception \r\n    \t{\r\n    \t   HoldMyBeer beer = new HoldMyBeer();\r\n    \t   System.out.println(beer.notSoFinal);\r\n    \t   holdIt(beer, 50);\r\n    \t   System.out.println(beer.notSoFinal);\r\n    \t   holdIt(beer, 100);\r\n    \t   System.out.println(beer.notSoFinal);\r\n           holdIt(beer, 666);\r\n    \t   System.out.println(beer.notSoFinal);\r\n    \t   holdIt(beer, 8888);\r\n    \t   System.out.println(beer.notSoFinal);\r\n    \t}    \r\n    }\r\n\r\n***Output:***\r\n\r\n    1\r\n    50\r\n    100\r\n    666\r\n    8888\r\n\r\n\r\nThe *&quot;final&quot;* field has been assigned **5 different** *&quot;final&quot;* values (*note the quotes*). And it could keep being assigned different values over and over...\r\n\r\n*Why? Because reflection is like Chuck Norris, and if it wants to change the value of an initialized final field, it does. Some say he himself is the one that pushes the new values into the stack :*\r\n\r\n\r\n\r\n    Code:\r\n       7: astore_1\r\n      11: aload_1\r\n      12: getfield                \r\n      18: aload_1\r\n      19: bipush        50        //wait what\r\n      27: aload_1\r\n      28: getfield                \r\n      34: aload_1\r\n      35: bipush        100       //come on...\r\n      43: aload_1\r\n      44: getfield                \r\n      50: aload_1\r\n      51: sipush        666      //...you were supposed to be final...\r\n      60: aload_1\r\n      61: getfield                \r\n      67: aload_1\r\n      68: sipush        8888     //ok i&#39;m out whatever dude\r\n      77: aload_1\r\n      78: getfield                \r\n\r\n\r\n","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p><em><strong><code>&quot;A final variable can only be assigned once&quot;</code></strong></em></p>\n<h2><strong><code>*Reflection*</code></strong> - <em>&quot;wowo wait, hold my beer&quot;</em>.</h2>\n<hr />\n<p><strong>Freeze</strong> of <code>final</code> fields happen in two scenarios:</p>\n<ul>\n<li>End of constructor.</li>\n<li>When reflection sets the field's value. (<em>as many times as it wants to</em>)</li>\n</ul>\n<hr />\n<p><em><strong>Let's break the law</strong></em></p>\n<pre><code>public class HoldMyBeer \n{\n    final int notSoFinal;\n    \n    public HoldMyBeer()\n    {\n       notSoFinal = 1;\n    }\n\n    static void holdIt(HoldMyBeer beer, int yetAnotherFinalValue) throws Exception\n    {\n       Class&lt;HoldMyBeer&gt; cl = HoldMyBeer.class;\n       Field field = cl.getDeclaredField(&quot;notSoFinal&quot;);\n       field.setAccessible(true);\n       field.set(beer, yetAnotherFinalValue);\n    }\n\n    public static void main(String[] args) throws Exception \n    {\n       HoldMyBeer beer = new HoldMyBeer();\n       System.out.println(beer.notSoFinal);\n       holdIt(beer, 50);\n       System.out.println(beer.notSoFinal);\n       holdIt(beer, 100);\n       System.out.println(beer.notSoFinal);\n       holdIt(beer, 666);\n       System.out.println(beer.notSoFinal);\n       holdIt(beer, 8888);\n       System.out.println(beer.notSoFinal);\n    }    \n}\n</code></pre>\n<p><em><strong>Output:</strong></em></p>\n<pre><code>1\n50\n100\n666\n8888\n</code></pre>\n<p>The <em>&quot;final&quot;</em> field has been assigned <strong>5 different</strong> <em>&quot;final&quot;</em> values (<em>note the quotes</em>). And it could keep being assigned different values over and over...</p>\n<p><em>Why? Because reflection is like Chuck Norris, and if it wants to change the value of an initialized final field, it does. Some say he himself is the one that pushes the new values into the stack :</em></p>\n<pre><code>Code:\n   7: astore_1\n  11: aload_1\n  12: getfield                \n  18: aload_1\n  19: bipush        50        //wait what\n  27: aload_1\n  28: getfield                \n  34: aload_1\n  35: bipush        100       //come on...\n  43: aload_1\n  44: getfield                \n  50: aload_1\n  51: sipush        666      //...you were supposed to be final...\n  60: aload_1\n  61: getfield                \n  67: aload_1\n  68: sipush        8888     //ok i'm out whatever dude\n  77: aload_1\n  78: getfield                \n</code></pre>\n"},{"tags":[],"owner":{"account_id":23678540,"reputation":343,"user_id":17704418,"display_name":"salam_verdim_alana_panyatkasi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653247274,"creation_date":1653247274,"answer_id":72340650,"question_id":15655012,"body_markdown":"I can only say in answer to your question that in this case you can&#39;t change **reference** value of **foo**. You just simply put **value** into the same **reference**, that&#39;s why you can add **value** into the foo **reference**. This problem is occur you can&#39;t understand very well difference between **reference value** and **primitive value**. **Reference** **value** is also a value which store object **address**(this is value) in heap memory.\r\n\r\n    public static void main(String[] args) \r\n      {\r\n          Test t = new Test();\r\n          t.foo.add(&quot;bar&quot;); // Modification-2\r\n          System.out.println(&quot;print - &quot; + t.foo);\r\n      }\r\n    \r\nbut in this case you can see that if you try to write in the following code you will see that compile time error will occur.\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        Main main = new Main();\r\n        main.foo=new ArrayList&lt;&gt;();//Cannot assign a value to final variable &#39;foo&#39;\r\n        System.out.println(&quot;print - &quot; + main.foo);\r\n    }","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>I can only say in answer to your question that in this case you can't change <strong>reference</strong> value of <strong>foo</strong>. You just simply put <strong>value</strong> into the same <strong>reference</strong>, that's why you can add <strong>value</strong> into the foo <strong>reference</strong>. This problem is occur you can't understand very well difference between <strong>reference value</strong> and <strong>primitive value</strong>. <strong>Reference</strong> <strong>value</strong> is also a value which store object <strong>address</strong>(this is value) in heap memory.</p>\n<pre><code>public static void main(String[] args) \n  {\n      Test t = new Test();\n      t.foo.add(&quot;bar&quot;); // Modification-2\n      System.out.println(&quot;print - &quot; + t.foo);\n  }\n</code></pre>\n<p>but in this case you can see that if you try to write in the following code you will see that compile time error will occur.</p>\n<pre><code>public static void main(String[] args)\n{\n    Main main = new Main();\n    main.foo=new ArrayList&lt;&gt;();//Cannot assign a value to final variable 'foo'\n    System.out.println(&quot;print - &quot; + main.foo);\n}\n</code></pre>\n"}],"owner":{"account_id":2492505,"reputation":10493,"user_id":2169693,"accept_rate":74,"display_name":"G.S"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":569034,"favorite_count":0,"down_vote_count":2,"up_vote_count":564,"accepted_answer_id":15655032,"answer_count":20,"score":562,"last_activity_date":1656496140,"creation_date":1364374938,"question_id":15655012,"body_markdown":"In Java we use `final` keyword with variables to specify its values are not to be changed.\r\nBut I see that you can change the value in the constructor / methods of the class. Again, if the variable is `static` then it is a compilation error.\r\n\r\nHere is the code: \r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    class Test {\r\n      private final List foo;\r\n    \t\r\n      public Test()\r\n      {\r\n    \t  foo = new ArrayList();\r\n    \t  foo.add(&quot;foo&quot;); // Modification-1\r\n      }\r\n      public static void main(String[] args) \r\n      {\r\n    \t  Test t = new Test();\r\n    \t  t.foo.add(&quot;bar&quot;); // Modification-2\r\n    \t  System.out.println(&quot;print - &quot; + t.foo);\r\n      }\r\n    }\r\nAbove code works fine and no errors.\r\n\r\nNow change the variable as `static`:\r\n\r\n    private static final List foo;\r\n\r\nNow it is a compilation error. How does this `final` really work?","title":"How does the &quot;final&quot; keyword in Java work? (I can still modify an object.)","body":"<p>In Java we use <code>final</code> keyword with variables to specify its values are not to be changed.\nBut I see that you can change the value in the constructor / methods of the class. Again, if the variable is <code>static</code> then it is a compilation error.</p>\n\n<p>Here is the code: </p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\nclass Test {\n  private final List foo;\n\n  public Test()\n  {\n      foo = new ArrayList();\n      foo.add(\"foo\"); // Modification-1\n  }\n  public static void main(String[] args) \n  {\n      Test t = new Test();\n      t.foo.add(\"bar\"); // Modification-2\n      System.out.println(\"print - \" + t.foo);\n  }\n}\n</code></pre>\n\n<p>Above code works fine and no errors.</p>\n\n<p>Now change the variable as <code>static</code>:</p>\n\n<pre><code>private static final List foo;\n</code></pre>\n\n<p>Now it is a compilation error. How does this <code>final</code> really work?</p>\n"},{"tags":["java","string-matching"],"comments":[{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1656493349,"post_id":72798603,"comment_id":128583839,"body_markdown":"What have you tried so far? Show some code examples. Also what is your question? Where are you stuck?","body":"What have you tried so far? Show some code examples. Also what is your question? Where are you stuck?"},{"owner":{"account_id":9879582,"reputation":423,"user_id":7316122,"display_name":"Y. Tarion"},"score":0,"creation_date":1656493632,"post_id":72798603,"comment_id":128583934,"body_markdown":"I think you can do it we regex. Check if the word is surrounded by spaces, dots, coma,... Or if it is in the start or the end of your text.","body":"I think you can do it we regex. Check if the word is surrounded by spaces, dots, coma,... Or if it is in the start or the end of your text."},{"owner":{"account_id":15822782,"reputation":683,"user_id":11416654,"display_name":"Shark44"},"score":0,"creation_date":1656493695,"post_id":72798603,"comment_id":128583957,"body_markdown":"I&#39;ve already tried with regex, but I am not sure of how to consider both the cases when the word is the starting one (no space before), or in the middle of the sentence","body":"I&#39;ve already tried with regex, but I am not sure of how to consider both the cases when the word is the starting one (no space before), or in the middle of the sentence"}],"answers":[{"tags":[],"owner":{"account_id":9879582,"reputation":423,"user_id":7316122,"display_name":"Y. Tarion"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656493877,"creation_date":1656493877,"answer_id":72798766,"question_id":72798603,"body_markdown":"You can use regexp to find words in text.\r\n\r\nYou should check this answer : \r\nhttps://stackoverflow.com/questions/9348326/regex-find-word-in-the-string\r\n\r\nAnd you can try regex online with : https://regex101.com/ ","title":"Java - Check if any of the words is contained in the text","body":"<p>You can use regexp to find words in text.</p>\n<p>You should check this answer :\n<a href=\"https://stackoverflow.com/questions/9348326/regex-find-word-in-the-string\">Regex find word in the string</a></p>\n<p>And you can try regex online with : <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a></p>\n"},{"tags":[],"owner":{"account_id":25452201,"reputation":208,"user_id":19253406,"display_name":"Chicky"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1656495670,"creation_date":1656495670,"answer_id":72799175,"question_id":72798603,"body_markdown":"    import java.util.regex.Pattern;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            String[] goodWords = { &quot;good&quot;, &quot;word&quot; };\r\n            String goodWordsUnionPatternStr = &quot;(&quot; + String.join(&quot;|&quot;, goodWords) + &quot;)&quot;;\r\n            Pattern strContainsGoodWordsPattern = Pattern.compile(&quot;.*\\\\b&quot; + goodWordsUnionPatternStr + &quot;\\\\b.*&quot;);\r\n            String review = &quot;This is a text containing the word.&quot;;\r\n            System.out.println(strContainsGoodWordsPattern.matcher(review).matches());\r\n        }\r\n    }\r\n\r\nExplained: \r\n\r\n- `\\b` is word boundary\r\n\r\n- Pattern.compile is preferred way due to performance","title":"Java - Check if any of the words is contained in the text","body":"<pre><code>import java.util.regex.Pattern;\n\npublic class Main {\n    public static void main(String[] args) {\n        String[] goodWords = { &quot;good&quot;, &quot;word&quot; };\n        String goodWordsUnionPatternStr = &quot;(&quot; + String.join(&quot;|&quot;, goodWords) + &quot;)&quot;;\n        Pattern strContainsGoodWordsPattern = Pattern.compile(&quot;.*\\\\b&quot; + goodWordsUnionPatternStr + &quot;\\\\b.*&quot;);\n        String review = &quot;This is a text containing the word.&quot;;\n        System.out.println(strContainsGoodWordsPattern.matcher(review).matches());\n    }\n}\n</code></pre>\n<p>Explained:</p>\n<ul>\n<li><p><code>\\b</code> is word boundary</p>\n</li>\n<li><p>Pattern.compile is preferred way due to performance</p>\n</li>\n</ul>\n"}],"owner":{"account_id":15822782,"reputation":683,"user_id":11416654,"display_name":"Shark44"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72799175,"answer_count":2,"score":0,"last_activity_date":1656495670,"creation_date":1656493217,"question_id":72798603,"body_markdown":"I was trying to implement a method which checks whether a list of words is contained in a text. The problem is I cannot use the contains method because I just want the word to be detected (if the word is &#39;car&#39; then with the string &#39;cars&#39; the method should return false). In addition, the method should be case-sensitive.\r\n\r\nEDIT:\r\n```\r\nString goodWord=&quot;word&quot;;\r\nString review=&quot;This is a text containing the word.&quot;;\r\nSystem.out.println(review.matches(&quot;\\\\w*&quot;+goodWord+&quot;\\\\w*&quot;));\r\n```","title":"Java - Check if any of the words is contained in the text","body":"<p>I was trying to implement a method which checks whether a list of words is contained in a text. The problem is I cannot use the contains method because I just want the word to be detected (if the word is 'car' then with the string 'cars' the method should return false). In addition, the method should be case-sensitive.</p>\n<p>EDIT:</p>\n<pre><code>String goodWord=&quot;word&quot;;\nString review=&quot;This is a text containing the word.&quot;;\nSystem.out.println(review.matches(&quot;\\\\w*&quot;+goodWord+&quot;\\\\w*&quot;));\n</code></pre>\n"},{"tags":["java","cron","executable-jar"],"comments":[{"owner":{"account_id":6657506,"reputation":244,"user_id":5137530,"display_name":"mksmanjit"},"score":1,"creation_date":1656493994,"post_id":72798738,"comment_id":128584093,"body_markdown":"You can create a table in the DB(Assuming DB is common for all three task) which will keep track of this Application running like when it start it will add an entry to IN_PROGRESS and on complete mark it complete.","body":"You can create a table in the DB(Assuming DB is common for all three task) which will keep track of this Application running like when it start it will add an entry to IN_PROGRESS and on complete mark it complete."}],"answers":[{"tags":[],"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656495346,"creation_date":1656495346,"answer_id":72799111,"question_id":72798738,"body_markdown":"**Couple of ways as I see it !**\r\n\r\n1) Let all JAR (or tasks) write `Logs` in a `common` or a `separate` log file. (Usually feasible if you only want to capture minor details such as start time , stop time, result etc) Assuming format you keep is manually readable.\r\n\r\n2) As per above suggestion, create a `Table` in `DB` to keep a track of task activity along with task name, it&#39;s details such as trigger by, start time, end time, result etc\r\n\r\n3) Alternatively, create database `Triggers` to monitor event (such as write or read) on DB table and whenever your task executes, trigger will also execute depending on what DB actions you want your trigger to perform such as sending `e-mail`, writing to table, printing simple log\r\n\r\n4) Let JARs (or tasks) also print logs on console just in case assuming they are designed to view from any console or UI at runtime !","title":"How can I check if executable JAR has started/finished running?","body":"<p><strong>Couple of ways as I see it !</strong></p>\n<ol>\n<li><p>Let all JAR (or tasks) write <code>Logs</code> in a <code>common</code> or a <code>separate</code> log file. (Usually feasible if you only want to capture minor details such as start time , stop time, result etc) Assuming format you keep is manually readable.</p>\n</li>\n<li><p>As per above suggestion, create a <code>Table</code> in <code>DB</code> to keep a track of task activity along with task name, it's details such as trigger by, start time, end time, result etc</p>\n</li>\n<li><p>Alternatively, create database <code>Triggers</code> to monitor event (such as write or read) on DB table and whenever your task executes, trigger will also execute depending on what DB actions you want your trigger to perform such as sending <code>e-mail</code>, writing to table, printing simple log</p>\n</li>\n<li><p>Let JARs (or tasks) also print logs on console just in case assuming they are designed to view from any console or UI at runtime !</p>\n</li>\n</ol>\n"}],"owner":{"account_id":2975457,"reputation":1032,"user_id":2526586,"accept_rate":33,"display_name":"user2526586"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":376,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656495346,"creation_date":1656493789,"question_id":72798738,"body_markdown":"I have multiple executable JARs, let&#39;s call them `task1.jar`, `task2.jar`, `task3.jar`, etc...\r\nThey mainly access the database and do housekeeping tasks on the server. \r\n\r\nThey are run by cron jobs, one after another, early in the morning everyday. The crob jobs are set about 15 minutes apart.\r\n\r\nThe crob jobs simply just call:\r\n```\r\njava -jar taskX.jar\r\n```\r\n\r\nDepending on the data on the database, their durations to finish will vary. \r\n\r\nThe task executions must not overlap. Otherwise when they access the database at the same time, the server will crash. It has happened before when one task takes too long to run and hasn&#39;t finished before another task has started. \r\n\r\nSo my question is... is there anyway to check a JAR has started or finished so that the next JAR can be delayed? \r\n\r\nI would preferably resolve this with Java methods over changing any configs on server which I have limited access on. \r\n\r\n----------\r\n\r\nEdit: @mksmanjit Sorry, I didn&#39;t mention before. There is also one complication - not all of them are run everyday. For example, `task1.jar` and `task3.jar` may be run everyday, `task2.jar` may be run every two days and `task4.jar` may be run every Mon, Wed, Fri, etc... So the situation can get quite complicated.","title":"How can I check if executable JAR has started/finished running?","body":"<p>I have multiple executable JARs, let's call them <code>task1.jar</code>, <code>task2.jar</code>, <code>task3.jar</code>, etc...\nThey mainly access the database and do housekeeping tasks on the server.</p>\n<p>They are run by cron jobs, one after another, early in the morning everyday. The crob jobs are set about 15 minutes apart.</p>\n<p>The crob jobs simply just call:</p>\n<pre><code>java -jar taskX.jar\n</code></pre>\n<p>Depending on the data on the database, their durations to finish will vary.</p>\n<p>The task executions must not overlap. Otherwise when they access the database at the same time, the server will crash. It has happened before when one task takes too long to run and hasn't finished before another task has started.</p>\n<p>So my question is... is there anyway to check a JAR has started or finished so that the next JAR can be delayed?</p>\n<p>I would preferably resolve this with Java methods over changing any configs on server which I have limited access on.</p>\n<hr />\n<p>Edit: @mksmanjit Sorry, I didn't mention before. There is also one complication - not all of them are run everyday. For example, <code>task1.jar</code> and <code>task3.jar</code> may be run everyday, <code>task2.jar</code> may be run every two days and <code>task4.jar</code> may be run every Mon, Wed, Fri, etc... So the situation can get quite complicated.</p>\n"},{"tags":["java","jgit"],"comments":[{"owner":{"account_id":10175384,"reputation":1,"user_id":19442230,"display_name":"Lyon"},"score":0,"creation_date":1656495555,"post_id":72799109,"comment_id":128584677,"body_markdown":"is there any pre-condition?  Besides:  BaseVersion = master ; NowVersion = feature branch;","body":"is there any pre-condition?  Besides:  BaseVersion = master ; NowVersion = feature branch;"},{"owner":{"account_id":10175384,"reputation":1,"user_id":19442230,"display_name":"Lyon"},"score":0,"creation_date":1656495830,"post_id":72799109,"comment_id":128584761,"body_markdown":"Below is the stack msg\nCaused by: org.eclipse.jgit.errors.MissingObjectException: Missing tree 43c70444fdbac531be50c16c94bd95eb0804cffe\n\tat org.eclipse.jgit.internal.storage.file.WindowCursor.open(WindowCursor.java:164)\n\tat org.eclipse.jgit.treewalk.CanonicalTreeParser.reset(CanonicalTreeParser.java:214)","body":"Below is the stack msg Caused by: org.eclipse.jgit.errors.MissingObjectException: Missing tree 43c70444fdbac531be50c16c94bd95eb0804cffe \tat org.eclipse.jgit.internal.storage.file.WindowCursor.open(Win&zwnj;&#8203;dowCursor.java:164) \tat org.eclipse.jgit.treewalk.CanonicalTreeParser.reset(Canonica&zwnj;&#8203;lTreeParser.java:214&zwnj;&#8203;)"}],"owner":{"account_id":10175384,"reputation":1,"user_id":19442230,"display_name":"Lyon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":659,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1656495342,"creation_date":1656495342,"question_id":72799109,"body_markdown":"How to resolve this error in? I tried to debug in my own pc, and it&#39;s worked with no Exception; but error happens in linux service!\r\nI used Jgit API to parse diff, but when executed to the debug line, exception happens: [this pic shows the code as below][1]\r\n\r\n    ObjectId baseObjId = oldGit.getRepository().resolve(coverageReport.getBaseVersion()); \r\n    ObjectId nowObjId = newGit.getRepository().resolve(coverageReport.getNowVersion());            \r\n    AbstractTreeIterator newTree = prepareTreeParser(newRepository, nowObjId);\r\n    AbstractTreeIterator oldTree = prepareTreeParser(oldRepository, baseObjId);\r\n    List&lt;DiffEntry&gt; diff = newGit.diff().setOldTree(oldTree).setNewTree(newTree).setShowNameAndStatusOnly(true).call();\r\n\r\n[this pic shows the objectID][2]\r\n\r\n\r\n[this pic is the error msg][3]\r\n\r\n  [1]: https://i.stack.imgur.com/mhr67.png\r\n  [2]: https://i.stack.imgur.com/zDTT1.png\r\n  [3]: https://i.stack.imgur.com/CaIq9.png\r\n\r\n","title":"Jgit: Jgitinternalexception:Missing tree XXXXXXXX","body":"<p>How to resolve this error in? I tried to debug in my own pc, and it's worked with no Exception; but error happens in linux service!\nI used Jgit API to parse diff, but when executed to the debug line, exception happens: <a href=\"https://i.stack.imgur.com/mhr67.png\" rel=\"nofollow noreferrer\">this pic shows the code as below</a></p>\n<pre><code>ObjectId baseObjId = oldGit.getRepository().resolve(coverageReport.getBaseVersion()); \nObjectId nowObjId = newGit.getRepository().resolve(coverageReport.getNowVersion());            \nAbstractTreeIterator newTree = prepareTreeParser(newRepository, nowObjId);\nAbstractTreeIterator oldTree = prepareTreeParser(oldRepository, baseObjId);\nList&lt;DiffEntry&gt; diff = newGit.diff().setOldTree(oldTree).setNewTree(newTree).setShowNameAndStatusOnly(true).call();\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zDTT1.png\" rel=\"nofollow noreferrer\">this pic shows the objectID</a></p>\n<p><a href=\"https://i.stack.imgur.com/CaIq9.png\" rel=\"nofollow noreferrer\">this pic is the error msg</a></p>\n"},{"tags":["java","scala","aws-sdk"],"answers":[{"tags":[],"owner":{"account_id":5368982,"reputation":895,"user_id":4278032,"display_name":"Moritz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1656495187,"creation_date":1656495187,"answer_id":72799070,"question_id":72796377,"body_markdown":"The `GetQueueUrl` request supports just one SQS queueName at a time. Therefore there&#39;s also no way to get an array back.\r\n\r\nAs an alternative you could check if it&#39;s feasible to do a single `ListQueues` request instead. That supports filtering by a common queue name prefix (or returns everything, depending on the size potentially in multiple pages).","title":"How to getQueueUrl as an array with an array of queueName?","body":"<p>The <code>GetQueueUrl</code> request supports just one SQS queueName at a time. Therefore there's also no way to get an array back.</p>\n<p>As an alternative you could check if it's feasible to do a single <code>ListQueues</code> request instead. That supports filtering by a common queue name prefix (or returns everything, depending on the size potentially in multiple pages).</p>\n"}],"owner":{"account_id":7855898,"reputation":1267,"user_id":5937760,"accept_rate":93,"display_name":"sojim2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72799070,"answer_count":1,"score":0,"last_activity_date":1656495187,"creation_date":1656481853,"question_id":72796377,"body_markdown":"Is there a way to get an array response for val `getQueueUrlResponse` on `SQSClient.getQueueUrl` method call with an array of `sqsName`s? I have many `sqsNames` and I&#39;d like to batch the request into one request, I&#39;d like to avoid hitting `SQSClient` multiple times.\r\n\r\n    val getQueueUrlResponse = sqsClient.getQueueUrl(GetQueueUrlRequest.builder.queueName(sqsName).build)\r\n\r\nSo if I have 10 elements in Array `sqsName`, I&#39;d like 10 elements in the `getQueueUrlResponse` val. I only see one value per call, but I may not be understanding something since I&#39;m new to java/scala. TIA!\r\n\r\n[getQueueUrl doc][1]\r\n\r\nAlso: https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/sqs/SqsClient.html#getQueueUrl\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_GetQueueUrl.html","title":"How to getQueueUrl as an array with an array of queueName?","body":"<p>Is there a way to get an array response for val <code>getQueueUrlResponse</code> on <code>SQSClient.getQueueUrl</code> method call with an array of <code>sqsName</code>s? I have many <code>sqsNames</code> and I'd like to batch the request into one request, I'd like to avoid hitting <code>SQSClient</code> multiple times.</p>\n<pre><code>val getQueueUrlResponse = sqsClient.getQueueUrl(GetQueueUrlRequest.builder.queueName(sqsName).build)\n</code></pre>\n<p>So if I have 10 elements in Array <code>sqsName</code>, I'd like 10 elements in the <code>getQueueUrlResponse</code> val. I only see one value per call, but I may not be understanding something since I'm new to java/scala. TIA!</p>\n<p><a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_GetQueueUrl.html\" rel=\"nofollow noreferrer\">getQueueUrl doc</a></p>\n<p>Also: <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/sqs/SqsClient.html#getQueueUrl\" rel=\"nofollow noreferrer\">https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/sqs/SqsClient.html#getQueueUrl</a></p>\n"},{"tags":["java","string","text","bufferedreader"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":5,"creation_date":1656491418,"post_id":72798143,"comment_id":128583088,"body_markdown":"creating methods doesn&#39;t mean anything if you don&#39;t actually call them","body":"creating methods doesn&#39;t mean anything if you don&#39;t actually call them"},{"owner":{"account_id":8063342,"reputation":681,"user_id":6078268,"display_name":"vladtkachuk"},"score":4,"creation_date":1656491437,"post_id":72798143,"comment_id":128583094,"body_markdown":"you seem to overcomplicate this. why do you need `ConcurrentHashMap`? you could just load the lines and do you job on each in a loop. these are simple and &quot;googleable&quot; things","body":"you seem to overcomplicate this. why do you need <code>ConcurrentHashMap</code>? you could just load the lines and do you job on each in a loop. these are simple and &quot;googleable&quot; things"},{"owner":{"account_id":5535028,"reputation":1362,"user_id":4393666,"display_name":"Andrey Kotov"},"score":1,"creation_date":1656493026,"post_id":72798143,"comment_id":128583700,"body_markdown":"it reminds me competition on writing the most complex [hello world](https://codegolf.stackexchange.com/questions/4838/most-complex-hello-world-program-you-can-justify) program","body":"it reminds me competition on writing the most complex <a href=\"https://codegolf.stackexchange.com/questions/4838/most-complex-hello-world-program-you-can-justify\">hello world</a> program"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1656493996,"post_id":72798143,"comment_id":128584094,"body_markdown":"`String#lines().map( line -&gt; line.split( &quot; &quot; ).length ).toList().toString()`","body":"<code>String#lines().map( line -&gt; line.split( &quot; &quot; ).length ).toList().toString()</code>"},{"owner":{"account_id":15285573,"reputation":1147,"user_id":11028689,"display_name":"Bluetail"},"score":0,"creation_date":1656494083,"post_id":72798143,"comment_id":128584119,"body_markdown":"ok, so I do  not need the CountWordsInDocuments class.. but I still dont understand how I can print out these lines?     I understand this is  a totally beginners question.","body":"ok, so I do  not need the CountWordsInDocuments class.. but I still dont understand how I can print out these lines?     I understand this is  a totally beginners question."},{"owner":{"account_id":15285573,"reputation":1147,"user_id":11028689,"display_name":"Bluetail"},"score":0,"creation_date":1656494557,"post_id":72798143,"comment_id":128584305,"body_markdown":"yes I am aware of this : ) the lines can be of any order.","body":"yes I am aware of this : ) the lines can be of any order."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1656494661,"post_id":72798143,"comment_id":128584346,"body_markdown":"strange... so the output lines must not be in any specific order... well, ok... Also note that calling `CountWordsInDocuments(documents);` from inside itself will create an infinite recursive method call chain (actually ending with an out of memory error) - for both methods with same name (2nd is using `documents.forEach(this::CountWordsInDocument);` which will invoke itself!)","body":"strange... so the output lines must not be in any specific order... well, ok... Also note that calling <code>CountWordsInDocuments(documents);</code> from inside itself will create an infinite recursive method call chain (actually ending with an out of memory error) - for both methods with same name (2nd is using <code>documents.forEach(this::CountWordsInDocument);</code> which will invoke itself!)"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1656506116,"post_id":72798143,"comment_id":128588835,"body_markdown":"You already have the code, `String[] words = value.split(&quot; &quot;); System.out.println(key + &quot; has &quot; + words.length + &quot; words!&quot;);` Now just do that right after `String line = br.readLine();` (with some minor adaptions)","body":"You already have the code, <code>String[] words = value.split(&quot; &quot;); System.out.println(key + &quot; has &quot; + words.length + &quot; words!&quot;);</code> Now just do that right after <code>String line = br.readLine();</code> (with some minor adaptions)"}],"answers":[{"tags":[],"owner":{"account_id":18592569,"reputation":102,"user_id":13549437,"display_name":"Ahmed Abdalla"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1656495145,"creation_date":1656495145,"answer_id":72799064,"question_id":72798143,"body_markdown":"**Try This**\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.FileReader;\r\n    import java.io.IOException;\r\n    \r\n    /**\r\n     * B1TextLoader\r\n     */\r\n    public class B1TextLoader {\r\n    \r\n        public static void main(String[] args) {\r\n            B1TextLoader loader = new B1TextLoader();\r\n            loader.LoadTextFile(&quot;./text.txt&quot;);\r\n        }\r\n    \r\n        public void LoadTextFile(String filePath) {\r\n            System.out.println(&quot;loading file ...&quot;);\r\n            try (BufferedReader br = new BufferedReader(new FileReader(filePath))) {\r\n                Object[] lines = br.lines().toArray();\r\n                System.out.println(&quot;Load Complete. Lines loaded: &quot; + lines.length);\r\n                for (int i = 0; i &lt; lines.length; i++) {\r\n                    System.out.println(&quot;doc&quot; + i + &quot; has &quot; + lines[i].toString().split(&quot; &quot;).length);\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n        }\r\n    }","title":"how to count the number of words in each line in Java?","body":"<p><strong>Try This</strong></p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\n\n/**\n * B1TextLoader\n */\npublic class B1TextLoader {\n\n    public static void main(String[] args) {\n        B1TextLoader loader = new B1TextLoader();\n        loader.LoadTextFile(&quot;./text.txt&quot;);\n    }\n\n    public void LoadTextFile(String filePath) {\n        System.out.println(&quot;loading file ...&quot;);\n        try (BufferedReader br = new BufferedReader(new FileReader(filePath))) {\n            Object[] lines = br.lines().toArray();\n            System.out.println(&quot;Load Complete. Lines loaded: &quot; + lines.length);\n            for (int i = 0; i &lt; lines.length; i++) {\n                System.out.println(&quot;doc&quot; + i + &quot; has &quot; + lines[i].toString().split(&quot; &quot;).length);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15285573,"reputation":1147,"user_id":11028689,"display_name":"Bluetail"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":285,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":72799064,"answer_count":1,"score":-2,"last_activity_date":1656495145,"creation_date":1656491189,"question_id":72798143,"body_markdown":"My task is to count the number of words on each line of a text file, separated by space. The text file has 5 lines. I am very new to Java.\r\nI have so far this code with the B1TextLoader class and several methods.\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.File;\r\nimport java.io.FileReader;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\n\r\npublic class B1TextLoader {\r\n\r\n\tConcurrentHashMap&lt;String, String&gt; documents = new ConcurrentHashMap&lt;String, String&gt;();\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tB1TextLoader loader = new B1TextLoader();\r\n\t\tloader.LoadTextFile(&quot;2-3-1BasicTextFile.txt&quot;);  \r\n\t}\r\n\r\n\tpublic void LoadTextFile(String filePath) {\r\n\r\n\t\ttry {\r\n\t\t\tSystem.out.println(&quot;Loading file...&quot;);\r\n\t\t\tFile f = new File(filePath);\r\n\t\t\tBufferedReader br = new BufferedReader(new FileReader(f));\r\n\r\n\t\t\tString line = br.readLine();\r\n\t\t\tInteger counter = 0;\r\n\t\t\twhile (line != null)\r\n\r\n\t\t\t{\r\n\t\t\t\tif (line.trim().length() &gt; 0) {\r\n\t\t\t\t\tdocuments.put(&quot;doc&quot; + counter, line);\r\n\t\t\t\t\t;\r\n\t\t\t\t\tcounter++;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tline = br.readLine();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tbr.close();\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.println(&quot;File Load Failed&quot;);\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(&quot;Load Complete. Lines loaded: &quot; + documents.size());\r\n\r\n\t}\r\n\r\n\tpublic void CountWordsInDocuments(ConcurrentHashMap&lt;String, String&gt; documents)\r\n\r\n\t{\r\n\t\tCountWordsInDocuments(documents);\r\n\r\n\t}\r\n\t\r\n\tpublic void CountWordsInDocument(String key, String value)\r\n\r\n\t{\r\n\t\tString[] words = value.split(&quot; &quot;);\r\n\t\tSystem.out.println(key + &quot; has &quot; + words.length + &quot; words!&quot;);\r\n\t\tdocuments.forEach(this::CountWordsInDocument);\r\n\t}\r\n}\r\n\r\n```\r\n\r\nMy output is:\r\n```\r\nLoading file...\r\nLoad Complete. Lines loaded: 5\r\n```\r\n\r\nhowever, I want it to print something like\r\n```\r\nLoading file...\r\nLoad Complete. Lines loaded: 5\r\ndoc0 has 6 words!\r\ndoc1 has 8 words!\r\ndoc2 has 4 words!\r\ndoc3 has 4 words!\r\ndoc4 has 6 words!\r\n```\r\nHow can I achieve this?\r\n\r\nmy text file, 2-3-1BasicTextFile.txt, looks like this:\r\n```\r\nthis is a simple text file\r\nyou should find that it has five lines\r\neach of varying lengths\r\nand no dirty data\r\nwhich might make it go wrong\r\n```","title":"how to count the number of words in each line in Java?","body":"<p>My task is to count the number of words on each line of a text file, separated by space. The text file has 5 lines. I am very new to Java.\nI have so far this code with the B1TextLoader class and several methods.</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.File;\nimport java.io.FileReader;\nimport java.util.concurrent.ConcurrentHashMap;\n\npublic class B1TextLoader {\n\n    ConcurrentHashMap&lt;String, String&gt; documents = new ConcurrentHashMap&lt;String, String&gt;();\n\n    public static void main(String[] args) {\n\n        B1TextLoader loader = new B1TextLoader();\n        loader.LoadTextFile(&quot;2-3-1BasicTextFile.txt&quot;);  \n    }\n\n    public void LoadTextFile(String filePath) {\n\n        try {\n            System.out.println(&quot;Loading file...&quot;);\n            File f = new File(filePath);\n            BufferedReader br = new BufferedReader(new FileReader(f));\n\n            String line = br.readLine();\n            Integer counter = 0;\n            while (line != null)\n\n            {\n                if (line.trim().length() &gt; 0) {\n                    documents.put(&quot;doc&quot; + counter, line);\n                    ;\n                    counter++;\n\n                }\n                line = br.readLine();\n                \n            }\n            br.close();\n        } catch (Exception e) {\n            System.out.println(&quot;File Load Failed&quot;);\n        }\n        \n        System.out.println(&quot;Load Complete. Lines loaded: &quot; + documents.size());\n\n    }\n\n    public void CountWordsInDocuments(ConcurrentHashMap&lt;String, String&gt; documents)\n\n    {\n        CountWordsInDocuments(documents);\n\n    }\n    \n    public void CountWordsInDocument(String key, String value)\n\n    {\n        String[] words = value.split(&quot; &quot;);\n        System.out.println(key + &quot; has &quot; + words.length + &quot; words!&quot;);\n        documents.forEach(this::CountWordsInDocument);\n    }\n}\n\n</code></pre>\n<p>My output is:</p>\n<pre><code>Loading file...\nLoad Complete. Lines loaded: 5\n</code></pre>\n<p>however, I want it to print something like</p>\n<pre><code>Loading file...\nLoad Complete. Lines loaded: 5\ndoc0 has 6 words!\ndoc1 has 8 words!\ndoc2 has 4 words!\ndoc3 has 4 words!\ndoc4 has 6 words!\n</code></pre>\n<p>How can I achieve this?</p>\n<p>my text file, 2-3-1BasicTextFile.txt, looks like this:</p>\n<pre><code>this is a simple text file\nyou should find that it has five lines\neach of varying lengths\nand no dirty data\nwhich might make it go wrong\n</code></pre>\n"},{"tags":["java","methods","interface","overriding","onos"],"comments":[{"owner":{"account_id":23614865,"reputation":3,"user_id":17649140,"display_name":"Desmond Kang"},"score":0,"creation_date":1656494918,"post_id":72798976,"comment_id":128584449,"body_markdown":"The source code can be found here: https://github.com/opennetworkinglab/onos/blob/fc25e87c54d09d575d452ee2ac21e19230e3eb26/providers/lldpcommon/src/main/java/org/onosproject/provider/lldpcommon/LinkDiscovery.java#L248\nand here: https://github.com/opennetworkinglab/onos/blob/2b4de873e4033b7973b399d25cb8828a73bc2e24/providers/lldpcommon/src/main/java/org/onosproject/provider/lldpcommon/LinkDiscoveryContext.java#L55","body":"The source code can be found here: <a href=\"https://github.com/opennetworkinglab/onos/blob/fc25e87c54d09d575d452ee2ac21e19230e3eb26/providers/lldpcommon/src/main/java/org/onosproject/provider/lldpcommon/LinkDiscovery.java#L248\" rel=\"nofollow noreferrer\">github.com/opennetworkinglab/onos/blob/&hellip;</a> and here: <a href=\"https://github.com/opennetworkinglab/onos/blob/2b4de873e4033b7973b399d25cb8828a73bc2e24/providers/lldpcommon/src/main/java/org/onosproject/provider/lldpcommon/LinkDiscoveryContext.java#L55\" rel=\"nofollow noreferrer\">github.com/opennetworkinglab/onos/blob/&hellip;</a>"},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1656494935,"post_id":72798976,"comment_id":128584454,"body_markdown":"By the moment your code will reach `DeviceService deviceService = context.deviceService();` the field `private final LinkDiscoveryContext context;` has to be assigned to some spcific implementation so that the method would contain logic.","body":"By the moment your code will reach <code>DeviceService deviceService = context.deviceService();</code> the field <code>private final LinkDiscoveryContext context;</code> has to be assigned to some spcific implementation so that the method would contain logic."},{"owner":{"account_id":15910041,"reputation":592,"user_id":11480221,"display_name":"AddeusExMachina"},"score":0,"creation_date":1656495187,"post_id":72798976,"comment_id":128584538,"body_markdown":"```context``` is assigned a value in the ```LinkDiscovery``` constructor, that variable will refer to an object whose class implements ```LinkDiscoveryContext```. This link may be useful for you to understand how it works: https://stackoverflow.com/questions/130794/what-is-dependency-injection","body":"<code>context</code> is assigned a value in the <code>LinkDiscovery</code> constructor, that variable will refer to an object whose class implements <code>LinkDiscoveryContext</code>. This link may be useful for you to understand how it works: <a href=\"https://stackoverflow.com/questions/130794/what-is-dependency-injection\" title=\"what is dependency injection\">stackoverflow.com/questions/130794/what-is-dependency-inject&zwnj;&#8203;ion</a>"}],"answers":[{"tags":[],"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1656495119,"creation_date":1656495119,"answer_id":72799058,"question_id":72798976,"body_markdown":"The class you mention has the constructor that takes instance of `LinkDiscoveryContext` as argument. So basically you assign a specific implementation to that field using class constructor. \r\n\r\nLook for constructor usages to check where it is called from. Hence you will know from which place(s) does that implementation come.","title":"Calling an abstract method from an interface without overriding it","body":"<p>The class you mention has the constructor that takes instance of <code>LinkDiscoveryContext</code> as argument. So basically you assign a specific implementation to that field using class constructor.</p>\n<p>Look for constructor usages to check where it is called from. Hence you will know from which place(s) does that implementation come.</p>\n"}],"owner":{"account_id":23614865,"reputation":3,"user_id":17649140,"display_name":"Desmond Kang"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72799058,"answer_count":1,"score":0,"last_activity_date":1656495119,"creation_date":1656494700,"question_id":72798976,"body_markdown":"I am working on a Java project and want to understand the source code before implementing mine into it. The problem im facing is, how can the source code uses the abstract method from an interface without actually overriding it?\r\n\r\nAt first, I came to this statement:\r\n``` DeviceService deviceService = context.deviceService(); ```\r\n\r\nIt is using &#39;context&#39; to call the method deviceService(). Then, I went up to see where was &#39;context&#39; being initialized. Then I found this:\r\n``` private final LinkDiscoveryContext context; ```\r\n\r\nSo, &#39;context&#39; is a type of LinkDiscoveryContext. But then, &#39;LinkDiscoveryContext&#39; is actually an interface. and the deviceService() is actually an abstract method without having any concrete definition of how the method should do.\r\n\r\nI thought we cannot call the method of an interface unless we override it, but why is it working? I may be lack in developer knowledge in Java, and might have provided not enough information. But if the community has any guessing that could result in this working, please share with me.\r\n\r\nThanks in advance.","title":"Calling an abstract method from an interface without overriding it","body":"<p>I am working on a Java project and want to understand the source code before implementing mine into it. The problem im facing is, how can the source code uses the abstract method from an interface without actually overriding it?</p>\n<p>At first, I came to this statement:\n<code>DeviceService deviceService = context.deviceService();</code></p>\n<p>It is using 'context' to call the method deviceService(). Then, I went up to see where was 'context' being initialized. Then I found this:\n<code>private final LinkDiscoveryContext context;</code></p>\n<p>So, 'context' is a type of LinkDiscoveryContext. But then, 'LinkDiscoveryContext' is actually an interface. and the deviceService() is actually an abstract method without having any concrete definition of how the method should do.</p>\n<p>I thought we cannot call the method of an interface unless we override it, but why is it working? I may be lack in developer knowledge in Java, and might have provided not enough information. But if the community has any guessing that could result in this working, please share with me.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","swing","if-statement","math","actionlistener"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":2,"creation_date":1656472590,"post_id":72553123,"comment_id":128578295,"body_markdown":"For better help sooner, [edit] to add a [mre].","body":"For better help sooner, <a href=\"https://stackoverflow.com/posts/72553123/edit\">edit</a> to add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656494936,"creation_date":1656494601,"answer_id":72798950,"question_id":72553123,"body_markdown":"# Introduction\r\n\r\nOracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) and the [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) sections.\r\n\r\nThe code provided in the question is typical of beginner Java programmers.  All of the code is contained in one class.  Almost all of the variables are class variables.  Some of the variables are poorly named.  Code is copied over and over with minor changes.\r\n\r\nSwing layout managers are not used.  Null layouts and absolute positioning are used instead.  The makes for a brittle GUI that&#39;s hard to maintain and understand.  I wonder how much effort it took to calculate all of the Swing component offsets?\r\n\r\nSo, let&#39;s see what we can do to improve this code.  Here&#39;s the GUI I came up with.\r\n\r\n[![Math Fighter][1]][1]\r\n\r\n# Explanation\r\n\r\nBreaking up the code into an application model, a view, and multiple `ActionListeners` helps me to separate my concerns and focus on one part of the application at a time.\r\n\r\n## Model\r\n\r\nThe first thing I did was create an application model class, the `MathFighterModel` class\r\n\r\nThe `MathFighterModel` class is a plain Java getter/setter class.  It turned out that the class only needed three class variables; the answer to the current math problem, the number of enemy life points, and the number of player life points.\r\n\r\nThe creation of a math equation is contained in the `generateRandomMathQuestion` method.  I calculate the correct answer and build the question `String` in the same method.  This way, it&#39;s much easier to visually verify that the actual calculation matches the question `String`.\r\n\r\nBy the way, the code is doing integer division when it divides.  \r\n\r\nThe rest of the class is getters and setters.  The original code didn&#39;t include a check for either the enemy or player getting to zero life points.  I didn&#39;t include the check either.\r\n\r\n## View\r\n\r\nAll Swing applications must start with a call to the `SwingUtilities` `invokeLater` method.  This method ensures that the Swing components are created and executed on the [Event Dispatch Thread][2].\r\n\r\nI used a `JFrame`.  I did not extend a `JFrame`.  The only reason you extend a Swing component, or any Java class, is to override one or more of the class methods.  The `JFrame` has a default `BorderLayout`, which I used to place two `JPanels`.\r\n\r\nI created four `JPanels`; a drawing `JPanel` for the health bars, a control `JPanel`, an entry `JPanel`, and a button `JPanel`.  This allows me to separate my concerns and focus on one small part of the GUI at a time.\r\n\r\nI create the drawing `JPanel` in a separate class.  I extend `JPanel` because I override the `paintComponent` method.  I call the `super.paintComponent` in the first line of the method to maintain the Swing paint chain.\r\n\r\nI calculate the bar colors in the drawing JPanel.  I also centered the bar drawings in the drawing JPanel. Finally, I added the life points number to the center of the bars.\r\n\r\nThe control `JPanel` is a container that holds the entry `JPanel` and the button `JPanel`.  I used a `FlowLayout` to put the two `JPanels` side by side.\r\n\r\nThe entry `JPanel` contains the entry and display Swing components.  I used a `GridBagLayout` to layout the &quot;&gt;&quot; and the display and entry Swing components.  Yes, the `GridBagLayout` looks complicated, but it&#39;s the easiest way to create a form with labels in one column and the entry fields in another column.\r\n\r\nThe button `JPanel` contains the `JButtons`.  I used a `GridLayout` to arrange the `JButtons`.  Yes, I had to put a dummy `JLabel` in column 1, row 2 to make the layout work.\r\n\r\nUsing Swing layout managers makes the GUI more flexible and allows for the easier addition of Swing components.  Just maximize the GUI to see what happens.\r\n\r\n## Controller\r\n\r\nI created three `ActionListeners` for the three `JButtons`.  It&#39;s much easier to manage separate `ActionListeners` than one complicated `ActionListener`.\r\n\r\nI used lambda expressions for the next button and exit button because they were simple `ActionListeners`.  A lambda expression creates an anonymous `ActionListener` class under the covers.\r\n\r\nI left the answer button `ActionListener` as an internal method to the view class.  You can see how simple the method is, after creating an application model and view.\r\n\r\n# Code\r\n\r\nHere&#39;s the complete runnable code.  I made all the additional classes inner classes so I could post the code as one block.  You should separate these classes into separate files.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.FlowLayout;\r\n    import java.awt.Font;\r\n    import java.awt.FontMetrics;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.GridBagConstraints;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.GridLayout;\r\n    import java.awt.Insets;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.geom.Rectangle2D;\r\n    \r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JOptionPane;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JTextField;\r\n    import javax.swing.SwingUtilities;\r\n    import javax.swing.border.Border;\r\n    \r\n    public class MathFighter implements ActionListener, Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new MathFighter());\r\n    \t}\r\n    \r\n    \tprivate final DrawingPanel drawingPanel;\r\n    \r\n    \tprivate JFrame frame;\r\n    \r\n    \tprivate JLabel mathQuestionLabel, responseLabel;\r\n    \r\n    \tprivate JTextField answerField;\r\n    \r\n    \tprivate final MathFighterModel model;\r\n    \r\n    \tpublic MathFighter() {\r\n    \t\tthis.model = new MathFighterModel();\r\n    \t\tthis.drawingPanel = new DrawingPanel(model);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tframe = new JFrame(&quot;Math Fighter&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\tframe.add(drawingPanel, BorderLayout.CENTER);\r\n    \t\tframe.add(createControlPanel(), BorderLayout.SOUTH);\r\n    \r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tprivate JPanel createControlPanel() {\r\n    \t\tJPanel panel = new JPanel(new FlowLayout());\r\n    \t\tpanel.setBackground(Color.BLACK);\r\n    \t\tpanel.add(createEntryPanel());\r\n    \t\tpanel.add(createButtonPanel());\r\n    \r\n    \t\treturn panel;\r\n    \t}\r\n    \r\n    \tprivate JPanel createEntryPanel() {\r\n    \t\tJPanel panel = new JPanel(new GridBagLayout());\r\n    \t\tpanel.setBackground(Color.BLACK);\r\n    \t\tpanel.setPreferredSize(new Dimension(300, 150));\r\n    \t\tBorder outsideBorder = BorderFactory.createEmptyBorder(5, 5, 5, 5);\r\n    \t\tBorder insideBorder = BorderFactory.createLineBorder(Color.WHITE, 3);\r\n    \t\tpanel.setBorder(BorderFactory.createCompoundBorder(outsideBorder,\r\n    \t\t\t\tinsideBorder));\r\n    \r\n    \t\tGridBagConstraints gbc = new GridBagConstraints();\r\n    \t\tgbc.anchor = GridBagConstraints.LINE_START;\r\n    \t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n    \t\tgbc.gridwidth = 1;\r\n    \t\tgbc.insets = new Insets(10, 10, 10, 0);\r\n    \r\n    \t\tgbc.gridx = 0;\r\n    \t\tgbc.gridy = 0;\r\n    \t\tgbc.weightx = 0.0;\r\n    \t\tpanel.add(createLabel(&quot;&gt;&quot;), gbc);\r\n    \r\n    \t\tgbc.gridx++;\r\n    \t\tgbc.weightx = 1.0;\r\n    \t\tmathQuestionLabel = createLabel(&quot; &quot;);\r\n    \t\tpanel.add(mathQuestionLabel, gbc);\r\n    \r\n    \t\tgbc.gridx = 0;\r\n    \t\tgbc.gridy++;\r\n    \t\tgbc.weightx = 0.0;\r\n    \t\tpanel.add(createLabel(&quot;&gt;&quot;), gbc);\r\n    \r\n    \t\tgbc.gridx++;\r\n    \t\tgbc.weightx = 1.0;\r\n    \t\tanswerField = new JTextField(12);\r\n    \t\tanswerField.setFont(getHeadlineFont());\r\n    \t\tanswerField.setBorder(BorderFactory.createEmptyBorder(0, -8, 0, 0));\r\n    \t\tanswerField.setBackground(Color.BLACK);\r\n    \t\tanswerField.setForeground(Color.WHITE);\r\n    \t\tpanel.add(answerField, gbc);\r\n    \r\n    \t\tgbc.gridx = 0;\r\n    \t\tgbc.gridy++;\r\n    \t\tgbc.weightx = 0.0;\r\n    \t\tpanel.add(createLabel(&quot;&gt;&quot;), gbc);\r\n    \r\n    \t\tgbc.gridx++;\r\n    \t\tgbc.weightx = 1.0;\r\n    \t\tresponseLabel = createLabel(&quot; &quot;);\r\n    \t\tpanel.add(responseLabel, gbc);\r\n    \r\n    \t\tupdateEntryPanel();\r\n    \r\n    \t\treturn panel;\r\n    \t}\r\n    \r\n    \tprivate JLabel createLabel(String labelText) {\r\n    \t\tJLabel label = new JLabel(labelText);\r\n    \t\tlabel.setBackground(Color.BLACK);\r\n    \t\tlabel.setForeground(Color.WHITE);\r\n    \t\tlabel.setFont(getHeadlineFont());\r\n    \r\n    \t\treturn label;\r\n    \t}\r\n    \r\n    \tprivate JPanel createButtonPanel() {\r\n    \t\tJPanel panel = new JPanel(new GridLayout(0, 2, 10, 10));\r\n    \t\tpanel.setBackground(Color.BLACK);\r\n    \t\tpanel.setPreferredSize(new Dimension(300, 150));\r\n    \t\tBorder outsideBorder = BorderFactory.createEmptyBorder(5, 0, 5, 5);\r\n    \t\tBorder insideBorder = BorderFactory.createLineBorder(Color.WHITE, 3);\r\n    \t\tBorder marginBorder = BorderFactory.createEmptyBorder(10, 10, 10, 10);\r\n    \t\tBorder compoundBorder = BorderFactory.createCompoundBorder(insideBorder,\r\n    \t\t\t\tmarginBorder);\r\n    \t\tpanel.setBorder(BorderFactory.createCompoundBorder(outsideBorder,\r\n    \t\t\t\tcompoundBorder));\r\n    \r\n    \t\tJButton answerButton = createButton(&quot;Answer&quot;, insideBorder);\r\n    \t\tanswerButton.addActionListener(this);\r\n    \t\tpanel.add(answerButton);\r\n    \r\n    \t\tJButton nextButton = createButton(&quot;Next&quot;, insideBorder);\r\n    \t\tnextButton.addActionListener(event -&gt; {\r\n    \t\t\tupdateEntryPanel();\r\n    \t\t});\r\n    \t\tpanel.add(nextButton);\r\n    \r\n    \t\tpanel.add(new JLabel(&quot; &quot;));\r\n    \r\n    \t\tJButton exitButton = createButton(&quot;Exit&quot;, insideBorder);\r\n    \t\texitButton.addActionListener(event -&gt; {\r\n    \t\t\tframe.dispose();\r\n    \t\t\tSystem.exit(0);\r\n    \t\t});\r\n    \t\tpanel.add(exitButton);\r\n    \r\n    \t\treturn panel;\r\n    \t}\r\n    \r\n    \tprivate JButton createButton(String buttonText, Border insideBorder) {\r\n    \t\tJButton button = new JButton(buttonText);\r\n    \t\tbutton.setBorder(insideBorder);\r\n    \t\tbutton.setBackground(Color.BLACK);\r\n    \t\tbutton.setFont(getHeadlineFont());\r\n    \t\tbutton.setForeground(Color.WHITE);\r\n    \r\n    \t\treturn button;\r\n    \t}\r\n    \r\n    \tprivate Font getHeadlineFont() {\r\n    \t\treturn new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 16);\r\n    \t}\r\n    \r\n    \tpublic void updateEntryPanel() {\r\n    \t\tmathQuestionLabel.setText(model.generateRandomMathQuestion());\r\n    \t\tanswerField.setText(&quot; &quot;);\r\n    \t\tanswerField.requestFocusInWindow();\r\n    \t\tresponseLabel.setText(&quot; &quot;);\r\n    \t}\r\n    \r\n    \tpublic void repaint() {\r\n    \t\tdrawingPanel.repaint();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void actionPerformed(ActionEvent event) {\r\n    \t\ttry {\r\n    \t\t\tint userAnswer = Integer.valueOf(answerField.getText().trim());\r\n    \t\t\tif (model.isAnswerCorrect(userAnswer)) {\r\n    \t\t\t\tresponseLabel.setText(&quot;Correct&quot;);\r\n    \t\t\t\tmodel.incrementPlayerLife(20);\r\n    \t\t\t} else {\r\n    \t\t\t\tresponseLabel.setText(&quot;Incorrect, try another answer&quot;);\r\n    \t\t\t\tmodel.incrementPlayerLife(-20);\r\n    \t\t\t}\r\n    \t\t\tanswerField.requestFocusInWindow();\r\n    \t\t\trepaint();\r\n    \t\t} catch (NumberFormatException e) {\r\n    \t\t\tJOptionPane.showMessageDialog(frame,\r\n    \t\t\t\t\t&quot;&lt;html&gt;&lt;font face=&#39;Comic Sans MS&#39; size=&#39;3&#39;&gt;INTEGER ONLY, KIDDO&quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic class DrawingPanel extends JPanel {\r\n    \r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t\tprivate final MathFighterModel model;\r\n    \r\n    \t\tpublic DrawingPanel(MathFighterModel model) {\r\n    \t\t\tthis.model = model;\r\n    \t\t\tthis.setBackground(Color.BLACK);\r\n    \t\t\tthis.setPreferredSize(new Dimension(400, 300));\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tprotected void paintComponent(Graphics g) {\r\n    \t\t\tsuper.paintComponent(g);\r\n    \t\t\tGraphics2D g2d = (Graphics2D) g;\r\n    \t\t\tg2d.setFont(getHeadlineFont());\r\n    \r\n    \t\t\tint width = getWidth();\r\n    \t\t\tint height = getHeight();\r\n    \t\t\tint margin = 20;\r\n    \t\t\tint barHeight = 30;\r\n    \r\n    \t\t\tint enemyLifePoints = model.getEnemyLifePoints();\r\n    \t\t\tg2d.setColor(calculateBarColor(enemyLifePoints));\r\n    \t\t\tint x = (width - enemyLifePoints) / 2;\r\n    \t\t\tint y = margin;\r\n    \t\t\tg2d.fillRect(x, y, enemyLifePoints, barHeight);\r\n    \t\t\tdrawString(g2d, x, y, enemyLifePoints, barHeight);\r\n    \r\n    \t\t\tint playerLifePoints = model.getPlayerLifePoints();\r\n    \t\t\tg2d.setColor(calculateBarColor(playerLifePoints));\r\n    \t\t\tx = (width - playerLifePoints) / 2;\r\n    \t\t\ty = height - margin - barHeight;\r\n    \t\t\tg2d.fillRect(x, y, playerLifePoints, barHeight);\r\n    \t\t\tdrawString(g2d, x, y, playerLifePoints, barHeight);\r\n    \t\t}\r\n    \r\n    \t\tprivate void drawString(Graphics2D g2d, int x, int y, int width,\r\n    \t\t\t\tint height) {\r\n    \t\t\tString lifePointString = Integer.toString(width);\r\n    \t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n    \t\t\tRectangle2D r = fm.getStringBounds(lifePointString, g2d);\r\n    \t\t\tint a = (width - (int) r.getWidth()) / 2 + x;\r\n    \t\t\tint b = (height - (int) r.getHeight()) / 2 + fm.getAscent() + y;\r\n    \t\t\tg2d.setColor(Color.BLACK);\r\n    \t\t\tg2d.drawString(lifePointString, a, b);\r\n    \t\t}\r\n    \r\n    \t\tprivate Color calculateBarColor(int lifePoints) {\r\n    \t\t\tint red = 0;\r\n    \t\t\tint green = 204;\r\n    \t\t\tint blue = 0;\r\n    \r\n    \t\t\tif (lifePoints &lt;= 100) {\r\n    \t\t\t\tred = 204;\r\n    \t\t\t\tif (lifePoints &lt;= 40) {\r\n    \t\t\t\t\tgreen = 0;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\treturn new Color(red, green, blue);\r\n    \t\t}\r\n    \r\n    \t\tprivate Font getHeadlineFont() {\r\n    \t\t\treturn new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 16);\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic class MathFighterModel {\r\n    \r\n    \t\tprivate int answer, enemyLifePoints, playerLifePoints;\r\n    \r\n    \t\tpublic MathFighterModel() {\r\n    \t\t\tthis.enemyLifePoints = 200;\r\n    \t\t\tthis.playerLifePoints = 200;\r\n    \t\t}\r\n    \r\n    \t\tpublic String generateRandomMathQuestion() {\r\n    \t\t\tString questionString = &quot;&quot;;\r\n    \t\t\tint questionType = (int) (Math.random() * 4) + 1;\r\n    \t\t\tint number1 = (int) (Math.random() * 10) + 10;\r\n    \t\t\tint number2 = (int) (Math.random() * 10) + 10;\r\n    \t\t\tint number3 = (int) (Math.random() * 10) + 10;\r\n    \r\n    \t\t\tif (playerLifePoints &gt; 100) {\r\n    \t\t\t\tif (questionType == 1) {\r\n    \t\t\t\t\tthis.answer = number1 + number2;\r\n    \t\t\t\t\tquestionString = &quot;What is &quot; + number1 + &quot; + &quot; + number2\r\n    \t\t\t\t\t\t\t+ &quot; ?&quot;;\r\n    \t\t\t\t} else if (questionType == 2) {\r\n    \t\t\t\t\tthis.answer = number1 - number2;\r\n    \t\t\t\t\tquestionString = &quot;What is &quot; + number1 + &quot; - &quot; + number2\r\n    \t\t\t\t\t\t\t+ &quot; ?&quot;;\r\n    \t\t\t\t} else if (questionType == 3) {\r\n    \t\t\t\t\tthis.answer = number1 * number2;\r\n    \t\t\t\t\tquestionString = &quot;What is &quot; + number1 + &quot; X &quot; + number2\r\n    \t\t\t\t\t\t\t+ &quot; ?&quot;;\r\n    \t\t\t\t} else if (questionType == 4) {\r\n    \t\t\t\t\tthis.answer = number1 * number2 / number3;\r\n    \t\t\t\t\tquestionString = &quot;What is &quot; + number1 + &quot; X &quot; + number2\r\n    \t\t\t\t\t\t\t+ &quot; / &quot; + number3 + &quot; ?&quot;;\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\tif (questionType == 1) {\r\n    \t\t\t\t\tthis.answer = number1 * number2 + number3;\r\n    \t\t\t\t\tquestionString = &quot;What is &quot; + number1 + &quot; X &quot; + number2\r\n    \t\t\t\t\t\t\t+ &quot; + &quot; + number3 + &quot; ?&quot;;\r\n    \t\t\t\t} else if (questionType == 2) {\r\n    \t\t\t\t\tthis.answer = number1 * number2 - number3;\r\n    \t\t\t\t\tquestionString = &quot;What is &quot; + number1 + &quot; X &quot; + number2\r\n    \t\t\t\t\t\t\t+ &quot; + &quot; + number3 + &quot; ?&quot;;\r\n    \t\t\t\t} else if (questionType == 3) {\r\n    \t\t\t\t\tthis.answer = (number1 * number2) / (number2 + number3);\r\n    \t\t\t\t\tquestionString = &quot;What is (&quot; + number1 + &quot; x &quot; + number2\r\n    \t\t\t\t\t\t\t+ &quot;) / (&quot; + number2 + &quot; + &quot; + number3 + &quot;) ?&quot;;\r\n    \t\t\t\t} else if (questionType == 4) {\r\n    \t\t\t\t\tthis.answer = (number1 * number2) / (number2 - number3);\r\n    \t\t\t\t\tquestionString = &quot;What is (&quot; + number1 + &quot; x &quot; + number2\r\n    \t\t\t\t\t\t\t+ &quot;) / (&quot; + number2 + &quot; - &quot; + number3 + &quot;) ?&quot;;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\treturn questionString;\r\n    \t\t}\r\n    \r\n    \t\tpublic void incrementPlayerLife(int increment) {\r\n    \t\t\tthis.playerLifePoints += increment;\r\n    \t\t\tthis.enemyLifePoints -= increment;\r\n    \t\t}\r\n    \r\n    \t\tpublic boolean isAnswerCorrect(int userAnswer) {\r\n    \t\t\treturn userAnswer == answer;\r\n    \t\t}\r\n    \r\n    \t\tpublic int getEnemyLifePoints() {\r\n    \t\t\treturn enemyLifePoints;\r\n    \t\t}\r\n    \r\n    \t\tpublic int getPlayerLifePoints() {\r\n    \t\t\treturn playerLifePoints;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sCAwe.png\r\n  [2]: https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html","title":"Why I can&#39;t get medium level for math questions to appear?","body":"<h1>Introduction</h1>\n<p>Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> and the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> sections.</p>\n<p>The code provided in the question is typical of beginner Java programmers.  All of the code is contained in one class.  Almost all of the variables are class variables.  Some of the variables are poorly named.  Code is copied over and over with minor changes.</p>\n<p>Swing layout managers are not used.  Null layouts and absolute positioning are used instead.  The makes for a brittle GUI that's hard to maintain and understand.  I wonder how much effort it took to calculate all of the Swing component offsets?</p>\n<p>So, let's see what we can do to improve this code.  Here's the GUI I came up with.</p>\n<p><a href=\"https://i.stack.imgur.com/sCAwe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sCAwe.png\" alt=\"Math Fighter\" /></a></p>\n<h1>Explanation</h1>\n<p>Breaking up the code into an application model, a view, and multiple <code>ActionListeners</code> helps me to separate my concerns and focus on one part of the application at a time.</p>\n<h2>Model</h2>\n<p>The first thing I did was create an application model class, the <code>MathFighterModel</code> class</p>\n<p>The <code>MathFighterModel</code> class is a plain Java getter/setter class.  It turned out that the class only needed three class variables; the answer to the current math problem, the number of enemy life points, and the number of player life points.</p>\n<p>The creation of a math equation is contained in the <code>generateRandomMathQuestion</code> method.  I calculate the correct answer and build the question <code>String</code> in the same method.  This way, it's much easier to visually verify that the actual calculation matches the question <code>String</code>.</p>\n<p>By the way, the code is doing integer division when it divides.</p>\n<p>The rest of the class is getters and setters.  The original code didn't include a check for either the enemy or player getting to zero life points.  I didn't include the check either.</p>\n<h2>View</h2>\n<p>All Swing applications must start with a call to the <code>SwingUtilities</code> <code>invokeLater</code> method.  This method ensures that the Swing components are created and executed on the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html\" rel=\"nofollow noreferrer\">Event Dispatch Thread</a>.</p>\n<p>I used a <code>JFrame</code>.  I did not extend a <code>JFrame</code>.  The only reason you extend a Swing component, or any Java class, is to override one or more of the class methods.  The <code>JFrame</code> has a default <code>BorderLayout</code>, which I used to place two <code>JPanels</code>.</p>\n<p>I created four <code>JPanels</code>; a drawing <code>JPanel</code> for the health bars, a control <code>JPanel</code>, an entry <code>JPanel</code>, and a button <code>JPanel</code>.  This allows me to separate my concerns and focus on one small part of the GUI at a time.</p>\n<p>I create the drawing <code>JPanel</code> in a separate class.  I extend <code>JPanel</code> because I override the <code>paintComponent</code> method.  I call the <code>super.paintComponent</code> in the first line of the method to maintain the Swing paint chain.</p>\n<p>I calculate the bar colors in the drawing JPanel.  I also centered the bar drawings in the drawing JPanel. Finally, I added the life points number to the center of the bars.</p>\n<p>The control <code>JPanel</code> is a container that holds the entry <code>JPanel</code> and the button <code>JPanel</code>.  I used a <code>FlowLayout</code> to put the two <code>JPanels</code> side by side.</p>\n<p>The entry <code>JPanel</code> contains the entry and display Swing components.  I used a <code>GridBagLayout</code> to layout the &quot;&gt;&quot; and the display and entry Swing components.  Yes, the <code>GridBagLayout</code> looks complicated, but it's the easiest way to create a form with labels in one column and the entry fields in another column.</p>\n<p>The button <code>JPanel</code> contains the <code>JButtons</code>.  I used a <code>GridLayout</code> to arrange the <code>JButtons</code>.  Yes, I had to put a dummy <code>JLabel</code> in column 1, row 2 to make the layout work.</p>\n<p>Using Swing layout managers makes the GUI more flexible and allows for the easier addition of Swing components.  Just maximize the GUI to see what happens.</p>\n<h2>Controller</h2>\n<p>I created three <code>ActionListeners</code> for the three <code>JButtons</code>.  It's much easier to manage separate <code>ActionListeners</code> than one complicated <code>ActionListener</code>.</p>\n<p>I used lambda expressions for the next button and exit button because they were simple <code>ActionListeners</code>.  A lambda expression creates an anonymous <code>ActionListener</code> class under the covers.</p>\n<p>I left the answer button <code>ActionListener</code> as an internal method to the view class.  You can see how simple the method is, after creating an application model and view.</p>\n<h1>Code</h1>\n<p>Here's the complete runnable code.  I made all the additional classes inner classes so I could post the code as one block.  You should separate these classes into separate files.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.GridLayout;\nimport java.awt.Insets;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.geom.Rectangle2D;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.JTextField;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.Border;\n\npublic class MathFighter implements ActionListener, Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new MathFighter());\n    }\n\n    private final DrawingPanel drawingPanel;\n\n    private JFrame frame;\n\n    private JLabel mathQuestionLabel, responseLabel;\n\n    private JTextField answerField;\n\n    private final MathFighterModel model;\n\n    public MathFighter() {\n        this.model = new MathFighterModel();\n        this.drawingPanel = new DrawingPanel(model);\n    }\n\n    @Override\n    public void run() {\n        frame = new JFrame(&quot;Math Fighter&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        frame.add(drawingPanel, BorderLayout.CENTER);\n        frame.add(createControlPanel(), BorderLayout.SOUTH);\n\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private JPanel createControlPanel() {\n        JPanel panel = new JPanel(new FlowLayout());\n        panel.setBackground(Color.BLACK);\n        panel.add(createEntryPanel());\n        panel.add(createButtonPanel());\n\n        return panel;\n    }\n\n    private JPanel createEntryPanel() {\n        JPanel panel = new JPanel(new GridBagLayout());\n        panel.setBackground(Color.BLACK);\n        panel.setPreferredSize(new Dimension(300, 150));\n        Border outsideBorder = BorderFactory.createEmptyBorder(5, 5, 5, 5);\n        Border insideBorder = BorderFactory.createLineBorder(Color.WHITE, 3);\n        panel.setBorder(BorderFactory.createCompoundBorder(outsideBorder,\n                insideBorder));\n\n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.anchor = GridBagConstraints.LINE_START;\n        gbc.fill = GridBagConstraints.HORIZONTAL;\n        gbc.gridwidth = 1;\n        gbc.insets = new Insets(10, 10, 10, 0);\n\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        gbc.weightx = 0.0;\n        panel.add(createLabel(&quot;&gt;&quot;), gbc);\n\n        gbc.gridx++;\n        gbc.weightx = 1.0;\n        mathQuestionLabel = createLabel(&quot; &quot;);\n        panel.add(mathQuestionLabel, gbc);\n\n        gbc.gridx = 0;\n        gbc.gridy++;\n        gbc.weightx = 0.0;\n        panel.add(createLabel(&quot;&gt;&quot;), gbc);\n\n        gbc.gridx++;\n        gbc.weightx = 1.0;\n        answerField = new JTextField(12);\n        answerField.setFont(getHeadlineFont());\n        answerField.setBorder(BorderFactory.createEmptyBorder(0, -8, 0, 0));\n        answerField.setBackground(Color.BLACK);\n        answerField.setForeground(Color.WHITE);\n        panel.add(answerField, gbc);\n\n        gbc.gridx = 0;\n        gbc.gridy++;\n        gbc.weightx = 0.0;\n        panel.add(createLabel(&quot;&gt;&quot;), gbc);\n\n        gbc.gridx++;\n        gbc.weightx = 1.0;\n        responseLabel = createLabel(&quot; &quot;);\n        panel.add(responseLabel, gbc);\n\n        updateEntryPanel();\n\n        return panel;\n    }\n\n    private JLabel createLabel(String labelText) {\n        JLabel label = new JLabel(labelText);\n        label.setBackground(Color.BLACK);\n        label.setForeground(Color.WHITE);\n        label.setFont(getHeadlineFont());\n\n        return label;\n    }\n\n    private JPanel createButtonPanel() {\n        JPanel panel = new JPanel(new GridLayout(0, 2, 10, 10));\n        panel.setBackground(Color.BLACK);\n        panel.setPreferredSize(new Dimension(300, 150));\n        Border outsideBorder = BorderFactory.createEmptyBorder(5, 0, 5, 5);\n        Border insideBorder = BorderFactory.createLineBorder(Color.WHITE, 3);\n        Border marginBorder = BorderFactory.createEmptyBorder(10, 10, 10, 10);\n        Border compoundBorder = BorderFactory.createCompoundBorder(insideBorder,\n                marginBorder);\n        panel.setBorder(BorderFactory.createCompoundBorder(outsideBorder,\n                compoundBorder));\n\n        JButton answerButton = createButton(&quot;Answer&quot;, insideBorder);\n        answerButton.addActionListener(this);\n        panel.add(answerButton);\n\n        JButton nextButton = createButton(&quot;Next&quot;, insideBorder);\n        nextButton.addActionListener(event -&gt; {\n            updateEntryPanel();\n        });\n        panel.add(nextButton);\n\n        panel.add(new JLabel(&quot; &quot;));\n\n        JButton exitButton = createButton(&quot;Exit&quot;, insideBorder);\n        exitButton.addActionListener(event -&gt; {\n            frame.dispose();\n            System.exit(0);\n        });\n        panel.add(exitButton);\n\n        return panel;\n    }\n\n    private JButton createButton(String buttonText, Border insideBorder) {\n        JButton button = new JButton(buttonText);\n        button.setBorder(insideBorder);\n        button.setBackground(Color.BLACK);\n        button.setFont(getHeadlineFont());\n        button.setForeground(Color.WHITE);\n\n        return button;\n    }\n\n    private Font getHeadlineFont() {\n        return new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 16);\n    }\n\n    public void updateEntryPanel() {\n        mathQuestionLabel.setText(model.generateRandomMathQuestion());\n        answerField.setText(&quot; &quot;);\n        answerField.requestFocusInWindow();\n        responseLabel.setText(&quot; &quot;);\n    }\n\n    public void repaint() {\n        drawingPanel.repaint();\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent event) {\n        try {\n            int userAnswer = Integer.valueOf(answerField.getText().trim());\n            if (model.isAnswerCorrect(userAnswer)) {\n                responseLabel.setText(&quot;Correct&quot;);\n                model.incrementPlayerLife(20);\n            } else {\n                responseLabel.setText(&quot;Incorrect, try another answer&quot;);\n                model.incrementPlayerLife(-20);\n            }\n            answerField.requestFocusInWindow();\n            repaint();\n        } catch (NumberFormatException e) {\n            JOptionPane.showMessageDialog(frame,\n                    &quot;&lt;html&gt;&lt;font face='Comic Sans MS' size='3'&gt;INTEGER ONLY, KIDDO&quot;);\n        }\n    }\n\n    public class DrawingPanel extends JPanel {\n\n        private static final long serialVersionUID = 1L;\n\n        private final MathFighterModel model;\n\n        public DrawingPanel(MathFighterModel model) {\n            this.model = model;\n            this.setBackground(Color.BLACK);\n            this.setPreferredSize(new Dimension(400, 300));\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2d = (Graphics2D) g;\n            g2d.setFont(getHeadlineFont());\n\n            int width = getWidth();\n            int height = getHeight();\n            int margin = 20;\n            int barHeight = 30;\n\n            int enemyLifePoints = model.getEnemyLifePoints();\n            g2d.setColor(calculateBarColor(enemyLifePoints));\n            int x = (width - enemyLifePoints) / 2;\n            int y = margin;\n            g2d.fillRect(x, y, enemyLifePoints, barHeight);\n            drawString(g2d, x, y, enemyLifePoints, barHeight);\n\n            int playerLifePoints = model.getPlayerLifePoints();\n            g2d.setColor(calculateBarColor(playerLifePoints));\n            x = (width - playerLifePoints) / 2;\n            y = height - margin - barHeight;\n            g2d.fillRect(x, y, playerLifePoints, barHeight);\n            drawString(g2d, x, y, playerLifePoints, barHeight);\n        }\n\n        private void drawString(Graphics2D g2d, int x, int y, int width,\n                int height) {\n            String lifePointString = Integer.toString(width);\n            FontMetrics fm = g2d.getFontMetrics();\n            Rectangle2D r = fm.getStringBounds(lifePointString, g2d);\n            int a = (width - (int) r.getWidth()) / 2 + x;\n            int b = (height - (int) r.getHeight()) / 2 + fm.getAscent() + y;\n            g2d.setColor(Color.BLACK);\n            g2d.drawString(lifePointString, a, b);\n        }\n\n        private Color calculateBarColor(int lifePoints) {\n            int red = 0;\n            int green = 204;\n            int blue = 0;\n\n            if (lifePoints &lt;= 100) {\n                red = 204;\n                if (lifePoints &lt;= 40) {\n                    green = 0;\n                }\n            }\n\n            return new Color(red, green, blue);\n        }\n\n        private Font getHeadlineFont() {\n            return new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 16);\n        }\n\n    }\n\n    public class MathFighterModel {\n\n        private int answer, enemyLifePoints, playerLifePoints;\n\n        public MathFighterModel() {\n            this.enemyLifePoints = 200;\n            this.playerLifePoints = 200;\n        }\n\n        public String generateRandomMathQuestion() {\n            String questionString = &quot;&quot;;\n            int questionType = (int) (Math.random() * 4) + 1;\n            int number1 = (int) (Math.random() * 10) + 10;\n            int number2 = (int) (Math.random() * 10) + 10;\n            int number3 = (int) (Math.random() * 10) + 10;\n\n            if (playerLifePoints &gt; 100) {\n                if (questionType == 1) {\n                    this.answer = number1 + number2;\n                    questionString = &quot;What is &quot; + number1 + &quot; + &quot; + number2\n                            + &quot; ?&quot;;\n                } else if (questionType == 2) {\n                    this.answer = number1 - number2;\n                    questionString = &quot;What is &quot; + number1 + &quot; - &quot; + number2\n                            + &quot; ?&quot;;\n                } else if (questionType == 3) {\n                    this.answer = number1 * number2;\n                    questionString = &quot;What is &quot; + number1 + &quot; X &quot; + number2\n                            + &quot; ?&quot;;\n                } else if (questionType == 4) {\n                    this.answer = number1 * number2 / number3;\n                    questionString = &quot;What is &quot; + number1 + &quot; X &quot; + number2\n                            + &quot; / &quot; + number3 + &quot; ?&quot;;\n                }\n            } else {\n                if (questionType == 1) {\n                    this.answer = number1 * number2 + number3;\n                    questionString = &quot;What is &quot; + number1 + &quot; X &quot; + number2\n                            + &quot; + &quot; + number3 + &quot; ?&quot;;\n                } else if (questionType == 2) {\n                    this.answer = number1 * number2 - number3;\n                    questionString = &quot;What is &quot; + number1 + &quot; X &quot; + number2\n                            + &quot; + &quot; + number3 + &quot; ?&quot;;\n                } else if (questionType == 3) {\n                    this.answer = (number1 * number2) / (number2 + number3);\n                    questionString = &quot;What is (&quot; + number1 + &quot; x &quot; + number2\n                            + &quot;) / (&quot; + number2 + &quot; + &quot; + number3 + &quot;) ?&quot;;\n                } else if (questionType == 4) {\n                    this.answer = (number1 * number2) / (number2 - number3);\n                    questionString = &quot;What is (&quot; + number1 + &quot; x &quot; + number2\n                            + &quot;) / (&quot; + number2 + &quot; - &quot; + number3 + &quot;) ?&quot;;\n                }\n            }\n\n            return questionString;\n        }\n\n        public void incrementPlayerLife(int increment) {\n            this.playerLifePoints += increment;\n            this.enemyLifePoints -= increment;\n        }\n\n        public boolean isAnswerCorrect(int userAnswer) {\n            return userAnswer == answer;\n        }\n\n        public int getEnemyLifePoints() {\n            return enemyLifePoints;\n        }\n\n        public int getPlayerLifePoints() {\n            return playerLifePoints;\n        }\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":14090270,"reputation":9,"user_id":10178836,"display_name":"Abu Bakar Osman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1656494936,"creation_date":1654729841,"question_id":72553123,"body_markdown":"```\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.Color;\r\nimport javax.swing.border.*;\r\nimport java.awt.event.*;\r\npublic class MATHfighter extends JFrame implements ActionListener\r\n{\r\n   Border border = new LineBorder(Color.WHITE, 3, true);\r\n   Border unborder = new LineBorder(Color.BLACK, 1, true);\r\n   Container c = getContentPane();\r\n   JPanel gameText = new JPanel();\r\n   JPanel gameMenu = new JPanel();\r\n   JTextField answer = new JTextField(12);\r\n   JTextField result = new JTextField(12);\r\n   JButton bAnswer = new JButton(&quot;Answer&quot;);\r\n   JButton bNext = new JButton(&quot;Next&quot;);\r\n   JButton bExit = new JButton(&quot;Exit&quot;);\r\n   int score = 0;\r\n   JLabel mathQuestion = new JLabel();\r\n   JLabel startText = new JLabel(&quot;&gt;&quot;);\r\n   JLabel startText1 = new JLabel(&quot;&gt;&quot;);\r\n   Font headlineFont = new Font(&quot;Comic Sans MS&quot;,Font.BOLD, 15);\r\n   int typeQ;        \r\n   int number1;\r\n   int number2;\r\n   int number3;\r\n   int life_point = 200;\r\n   int player_lp = 200;\r\n   int r = 0;\r\n   int g = 204;\r\n   int b = 0;\r\n   int r1 = 0;\r\n   int g1 = 204;\r\n   int b1 = 0;\r\n   \r\n   public MATHfighter()\r\n   {\r\n      setLayout(null);\r\n      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n      c.setBackground(Color.BLACK); \r\n      textGame();\r\n      menuGame();\r\n      bAnswer.addActionListener(this);\r\n      bNext.addActionListener(this);\r\n      bExit.addActionListener(this);\r\n   }\r\n   \r\n   public void textGame()\r\n   {\r\n      gameText.setLayout(null);\r\n      gameText.setBorder(border);\r\n      gameText.setBounds(10,410,290,140);\r\n      gameText.setVisible(true);\r\n      gameText.setBackground(Color.BLACK);\r\n      gameText.add(startText);\r\n      gameText.add(startText1);\r\n      startText.setForeground(Color.WHITE);\r\n      startText1.setForeground(Color.WHITE);\r\n      startText.setFont(headlineFont);\r\n      startText1.setFont(headlineFont);\r\n      add(gameText);\r\n      randomMath();\r\n   }\r\n   \r\n   public void menuGame()\r\n   {\r\n      gameMenu.setLayout(null);\r\n      gameMenu.setBorder(border);\r\n      gameMenu.setBounds(305,410,290,140);\r\n      gameMenu.setVisible(true);\r\n      gameMenu.setBackground(Color.BLACK);\r\n      add(gameMenu);\r\n      gameMenu.add(bAnswer);\r\n      bAnswer.setBorder(border);\r\n      bAnswer.setBackground(Color.BLACK);\r\n      bAnswer.setFont(headlineFont);\r\n      bAnswer.setForeground(Color.WHITE);\r\n      bAnswer.setBounds(10,10,130,50);\r\n      gameMenu.add(bNext);\r\n      bNext.setBorder(border);\r\n      bNext.setBackground(Color.BLACK);\r\n      bNext.setFont(headlineFont);\r\n      bNext.setForeground(Color.WHITE);\r\n      bNext.setBounds(150,10,130,50);\r\n      bNext.setEnabled(false);\r\n      gameMenu.add(bExit);\r\n      bExit.setBorder(border);\r\n      bExit.setBackground(Color.BLACK);\r\n      bExit.setFont(headlineFont);\r\n      bExit.setForeground(Color.WHITE);\r\n      bExit.setBounds(150,70,130,50);\r\n   }\r\n   \r\n   public void randomMath()\r\n   {\r\n      typeQ = (int) (Math.random() * 4) + 1;\r\n      number1 = (int) (Math.random() * 10) + 10;\r\n      number2 = (int) (Math.random() * 10) + 10;\r\n      number3 = (int) (Math.random() * 10) + 10;\r\n      mathQuestion.setFont(headlineFont);\r\n      mathQuestion.setBounds(10,10,290,15);\r\n      mathQuestion.setForeground(Color.WHITE);\r\n      gameText.add(mathQuestion);\r\n      answer.setFont(headlineFont);\r\n      answer.setBorder(unborder);\r\n      answer.setBackground(Color.BLACK);\r\n      answer.setForeground(Color.WHITE);\r\n      startText.setBounds(10,35,20,20);\r\n      answer.setBounds(25,35,250,20);\r\n      gameText.add(answer);\r\n      result.setFont(headlineFont);\r\n      result.setBorder(unborder);\r\n      result.setBackground(Color.BLACK);\r\n      result.setForeground(Color.WHITE);\r\n      result.setBounds(25,65,250,20);\r\n      result.setEditable(false);     \r\n      startText1.setBounds(10,65,20,20);\r\n      gameText.add(result);\r\n      \r\n      if((life_point&lt;=200)&amp;&amp;(life_point&gt;100))\r\n      { \r\n         if(typeQ==1)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; + &quot; + number2 + &quot; ?&quot;);\r\n         }\r\n         else if(typeQ==2)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; - &quot; + number2 + &quot; ?&quot;);\r\n         }\r\n         else if(typeQ==3)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; ?&quot;);\r\n         }\r\n         else if(typeQ==4)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; ?&quot;);\r\n         }\r\n      }\r\n      else if(life_point&lt;=100)\r\n      {\r\n         if(typeQ==1)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; + &quot; + number3 + &quot; ?&quot;);\r\n         }\r\n         else if(typeQ==2)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; - &quot; + number3 + &quot; ?&quot;); \r\n         }\r\n         else if(typeQ==3)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; + &quot; + number3 + &quot; ?&quot;);\r\n         }\r\n         else if(typeQ==4)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; - &quot; + number3 + &quot; ?&quot;);\r\n         }\r\n      }\r\n        \r\n   }\r\n   \r\n   public void paint(Graphics gr)\r\n   {\r\n      Color c1 = new Color(r, g, b);\r\n      Color c2 = new Color(r1, g1, b1);\r\n      super.paint(gr);\r\n      gr.setColor(c1);\r\n      gr.fillRect(212, 40, life_point, 30);\r\n      gr.setColor(c2);\r\n      gr.fillRect(212, 400, player_lp, 30);\r\n   }\r\n   \r\n   public void actionPerformed(ActionEvent e)\r\n   {\r\n      if(e.getSource()==bAnswer)\r\n      {\r\n         try\r\n         {\r\n            int kotae = Integer.parseInt(answer.getText());\r\n            \r\n            if((life_point&lt;=200)&amp;&amp;(life_point&gt;100))\r\n            {\r\n               if(typeQ==1)\r\n               {\r\n                  if ((number1 + number2) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n                  else if ((number1 + number2) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);\r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint(); \r\n                  }\r\n               }\r\n                  \r\n               else if(typeQ==2)\r\n               {\r\n                  if ((number1 - number2) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n                     \r\n                  else if ((number1 - number2) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);\r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint();\r\n                  }  \r\n               }\r\n                  \r\n               else if(typeQ==3)\r\n               {\r\n                  if ((number1 * number2) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n                     \r\n                  else if ((number1 * number2) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false); \r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false); \r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint(); \r\n                  }\r\n                  \r\n               }\r\n                  \r\n               else if(typeQ==4)\r\n               {\r\n                  if ((number1*number2 / number2) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n                  else if ((number1*number2 / number2) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);  \r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n               }\r\n            }\r\n            \r\n            if(life_point&lt;=100)\r\n            {\r\n               if(typeQ==1)\r\n               {\r\n                  if ((number1 * number2 + number3) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     //bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n                     \r\n                  else if ((number1 * number2 + number3) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);\r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint(); \r\n                  }\r\n               }\r\n               \r\n               else if(typeQ==2)\r\n               {\r\n                  if ((number1 * number2 - number3) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     //bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n                     \r\n                  else if ((number1 * number2 - number3) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);\r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint(); \r\n                  }\r\n               }\r\n               \r\n               else if(typeQ==3)\r\n               {\r\n                  if ((number1*number2 / number2 + number3) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     //bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n                     \r\n                  else if ((number1*number2 / number2 + number3) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);\r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint(); \r\n                  }\r\n               }\r\n               \r\n               else if(typeQ==4)\r\n               {\r\n                  if ((number1*number2 / number2 - number3) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     //bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }               \r\n                  else if ((number1*number2 / number2 - number3) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);\r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint(); \r\n                  }\r\n               }\r\n            }\r\n         }\r\n         catch(Exception ex)\r\n         {\r\n            JOptionPane.showMessageDialog(null,&quot;&lt;html&gt;&lt;font face=&#39;Comic Sans MS&#39; size=&#39;3&#39;&gt;INTEGER ONLY, KIDDO&quot;);\r\n         }       \r\n      }\r\n      \r\n      else if(e.getSource()==bNext)\r\n      {\r\n          typeQ = (int) (Math.random() * 4) + 1;\r\n          number1 = (int) (Math.random() * 10) + 10;\r\n          number2 = (int) (Math.random() * 10) + 10;\r\n          result.setText(&quot;&quot;);\r\n          answer.setText(&quot;&quot;);\r\n          answer.setEditable(true);\r\n          bNext.setEnabled(false);\r\n          bAnswer.setEnabled(true);\r\n          if(typeQ==1)\r\n          {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; + &quot; + number2 + &quot; ?&quot;);\r\n          }\r\n          else if(typeQ==2)\r\n          {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; - &quot; + number2 + &quot; ?&quot;);\r\n          }\r\n          else if(typeQ==3)\r\n          {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; ?&quot;);\r\n          }\r\n          else if(typeQ==4)\r\n          {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; ?&quot;);\r\n          }\r\n      }\r\n      \r\n      else\r\n      {\r\n         System.exit(0);\r\n      }\r\n   }\r\n      \r\n   public static void main(String[] args)\r\n   {\r\n      MATHfighter fight = new MATHfighter();\r\n      fight.setSize(625,600);\r\n      fight.setVisible(true);\r\n   }\r\n}\r\n```\r\nThis is the continuation from my last question and I did change while loop to if-else, thank you to others who helped me.\r\n\r\nMy new problems are that I want a bunch of middle level questions to appear when enemy life point become 100 and below but the problem is my GUI became like this after I answered the fifth question:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eYTpZ.jpg\r\n\r\nthere is a chance that my mathQuestion.setText are not working after I used these code:\r\n\r\n```\r\nelse if(life_point&lt;=100)\r\n      {\r\n         if(typeQ==1)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; + &quot; + number3 + &quot; ?&quot;);\r\n         }\r\n         else if(typeQ==2)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; - &quot; + number3 + &quot; ?&quot;); \r\n         }\r\n         else if(typeQ==3)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; + &quot; + number3 + &quot; ?&quot;);\r\n         }\r\n         else if(typeQ==4)\r\n         {\r\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; - &quot; + number3 + &quot; ?&quot;);\r\n         }\r\n      }\r\n```\r\nand\r\n```\r\n if(life_point&lt;=100)\r\n            {\r\n               if(typeQ==1)\r\n               {\r\n                  if ((number1 * number2 + number3) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     //bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n\r\n                  else if ((number1 * number2 + number3) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);\r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint(); \r\n                  }\r\n               }\r\n\r\n               else if(typeQ==2)\r\n               {\r\n                  if ((number1 * number2 - number3) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     //bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n\r\n                  else if ((number1 * number2 - number3) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);\r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint(); \r\n                  }\r\n               }\r\n\r\n               else if(typeQ==3)\r\n               {\r\n                  if ((number1*number2 / number2 + number3) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     //bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }\r\n\r\n                  else if ((number1*number2 / number2 + number3) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);\r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint(); \r\n                  }\r\n               }\r\n\r\n               else if(typeQ==4)\r\n               {\r\n                  if ((number1*number2 / number2 - number3) != kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\r\n                     //bNext.setEnabled(false);\r\n                     player_lp = player_lp - 20;\r\n                     if(player_lp == 100)\r\n                     {\r\n                        r1=204;\r\n                     }\r\n                     else if(player_lp == 40)\r\n                     {\r\n                        g1=0;\r\n                     }\r\n                     repaint();\r\n                  }               \r\n                  else if ((number1*number2 / number2 - number3) == kotae) \r\n                  {\r\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\r\n                     answer.setEditable(false);\r\n                     bNext.setEnabled(true);\r\n                     bAnswer.setEnabled(false);\r\n                     life_point = life_point - 20;\r\n                     if(life_point == 100)\r\n                     {\r\n                        r=204;\r\n                     }\r\n                     else if(life_point == 40)\r\n                     {\r\n                        g=0;\r\n                     }\r\n                     repaint(); \r\n                  }\r\n               }\r\n```\r\nI really hope that someone can help me about these problem","title":"Why I can&#39;t get medium level for math questions to appear?","body":"<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.Color;\nimport javax.swing.border.*;\nimport java.awt.event.*;\npublic class MATHfighter extends JFrame implements ActionListener\n{\n   Border border = new LineBorder(Color.WHITE, 3, true);\n   Border unborder = new LineBorder(Color.BLACK, 1, true);\n   Container c = getContentPane();\n   JPanel gameText = new JPanel();\n   JPanel gameMenu = new JPanel();\n   JTextField answer = new JTextField(12);\n   JTextField result = new JTextField(12);\n   JButton bAnswer = new JButton(&quot;Answer&quot;);\n   JButton bNext = new JButton(&quot;Next&quot;);\n   JButton bExit = new JButton(&quot;Exit&quot;);\n   int score = 0;\n   JLabel mathQuestion = new JLabel();\n   JLabel startText = new JLabel(&quot;&gt;&quot;);\n   JLabel startText1 = new JLabel(&quot;&gt;&quot;);\n   Font headlineFont = new Font(&quot;Comic Sans MS&quot;,Font.BOLD, 15);\n   int typeQ;        \n   int number1;\n   int number2;\n   int number3;\n   int life_point = 200;\n   int player_lp = 200;\n   int r = 0;\n   int g = 204;\n   int b = 0;\n   int r1 = 0;\n   int g1 = 204;\n   int b1 = 0;\n   \n   public MATHfighter()\n   {\n      setLayout(null);\n      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n      c.setBackground(Color.BLACK); \n      textGame();\n      menuGame();\n      bAnswer.addActionListener(this);\n      bNext.addActionListener(this);\n      bExit.addActionListener(this);\n   }\n   \n   public void textGame()\n   {\n      gameText.setLayout(null);\n      gameText.setBorder(border);\n      gameText.setBounds(10,410,290,140);\n      gameText.setVisible(true);\n      gameText.setBackground(Color.BLACK);\n      gameText.add(startText);\n      gameText.add(startText1);\n      startText.setForeground(Color.WHITE);\n      startText1.setForeground(Color.WHITE);\n      startText.setFont(headlineFont);\n      startText1.setFont(headlineFont);\n      add(gameText);\n      randomMath();\n   }\n   \n   public void menuGame()\n   {\n      gameMenu.setLayout(null);\n      gameMenu.setBorder(border);\n      gameMenu.setBounds(305,410,290,140);\n      gameMenu.setVisible(true);\n      gameMenu.setBackground(Color.BLACK);\n      add(gameMenu);\n      gameMenu.add(bAnswer);\n      bAnswer.setBorder(border);\n      bAnswer.setBackground(Color.BLACK);\n      bAnswer.setFont(headlineFont);\n      bAnswer.setForeground(Color.WHITE);\n      bAnswer.setBounds(10,10,130,50);\n      gameMenu.add(bNext);\n      bNext.setBorder(border);\n      bNext.setBackground(Color.BLACK);\n      bNext.setFont(headlineFont);\n      bNext.setForeground(Color.WHITE);\n      bNext.setBounds(150,10,130,50);\n      bNext.setEnabled(false);\n      gameMenu.add(bExit);\n      bExit.setBorder(border);\n      bExit.setBackground(Color.BLACK);\n      bExit.setFont(headlineFont);\n      bExit.setForeground(Color.WHITE);\n      bExit.setBounds(150,70,130,50);\n   }\n   \n   public void randomMath()\n   {\n      typeQ = (int) (Math.random() * 4) + 1;\n      number1 = (int) (Math.random() * 10) + 10;\n      number2 = (int) (Math.random() * 10) + 10;\n      number3 = (int) (Math.random() * 10) + 10;\n      mathQuestion.setFont(headlineFont);\n      mathQuestion.setBounds(10,10,290,15);\n      mathQuestion.setForeground(Color.WHITE);\n      gameText.add(mathQuestion);\n      answer.setFont(headlineFont);\n      answer.setBorder(unborder);\n      answer.setBackground(Color.BLACK);\n      answer.setForeground(Color.WHITE);\n      startText.setBounds(10,35,20,20);\n      answer.setBounds(25,35,250,20);\n      gameText.add(answer);\n      result.setFont(headlineFont);\n      result.setBorder(unborder);\n      result.setBackground(Color.BLACK);\n      result.setForeground(Color.WHITE);\n      result.setBounds(25,65,250,20);\n      result.setEditable(false);     \n      startText1.setBounds(10,65,20,20);\n      gameText.add(result);\n      \n      if((life_point&lt;=200)&amp;&amp;(life_point&gt;100))\n      { \n         if(typeQ==1)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; + &quot; + number2 + &quot; ?&quot;);\n         }\n         else if(typeQ==2)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; - &quot; + number2 + &quot; ?&quot;);\n         }\n         else if(typeQ==3)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; ?&quot;);\n         }\n         else if(typeQ==4)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; ?&quot;);\n         }\n      }\n      else if(life_point&lt;=100)\n      {\n         if(typeQ==1)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; + &quot; + number3 + &quot; ?&quot;);\n         }\n         else if(typeQ==2)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; - &quot; + number3 + &quot; ?&quot;); \n         }\n         else if(typeQ==3)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; + &quot; + number3 + &quot; ?&quot;);\n         }\n         else if(typeQ==4)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; - &quot; + number3 + &quot; ?&quot;);\n         }\n      }\n        \n   }\n   \n   public void paint(Graphics gr)\n   {\n      Color c1 = new Color(r, g, b);\n      Color c2 = new Color(r1, g1, b1);\n      super.paint(gr);\n      gr.setColor(c1);\n      gr.fillRect(212, 40, life_point, 30);\n      gr.setColor(c2);\n      gr.fillRect(212, 400, player_lp, 30);\n   }\n   \n   public void actionPerformed(ActionEvent e)\n   {\n      if(e.getSource()==bAnswer)\n      {\n         try\n         {\n            int kotae = Integer.parseInt(answer.getText());\n            \n            if((life_point&lt;=200)&amp;&amp;(life_point&gt;100))\n            {\n               if(typeQ==1)\n               {\n                  if ((number1 + number2) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }\n                  else if ((number1 + number2) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);\n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint(); \n                  }\n               }\n                  \n               else if(typeQ==2)\n               {\n                  if ((number1 - number2) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }\n                     \n                  else if ((number1 - number2) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);\n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint();\n                  }  \n               }\n                  \n               else if(typeQ==3)\n               {\n                  if ((number1 * number2) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }\n                     \n                  else if ((number1 * number2) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false); \n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false); \n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint(); \n                  }\n                  \n               }\n                  \n               else if(typeQ==4)\n               {\n                  if ((number1*number2 / number2) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }\n                  else if ((number1*number2 / number2) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);  \n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint();\n                  }\n               }\n            }\n            \n            if(life_point&lt;=100)\n            {\n               if(typeQ==1)\n               {\n                  if ((number1 * number2 + number3) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     //bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }\n                     \n                  else if ((number1 * number2 + number3) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);\n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint(); \n                  }\n               }\n               \n               else if(typeQ==2)\n               {\n                  if ((number1 * number2 - number3) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     //bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }\n                     \n                  else if ((number1 * number2 - number3) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);\n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint(); \n                  }\n               }\n               \n               else if(typeQ==3)\n               {\n                  if ((number1*number2 / number2 + number3) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     //bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }\n                     \n                  else if ((number1*number2 / number2 + number3) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);\n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint(); \n                  }\n               }\n               \n               else if(typeQ==4)\n               {\n                  if ((number1*number2 / number2 - number3) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     //bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }               \n                  else if ((number1*number2 / number2 - number3) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);\n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint(); \n                  }\n               }\n            }\n         }\n         catch(Exception ex)\n         {\n            JOptionPane.showMessageDialog(null,&quot;&lt;html&gt;&lt;font face='Comic Sans MS' size='3'&gt;INTEGER ONLY, KIDDO&quot;);\n         }       \n      }\n      \n      else if(e.getSource()==bNext)\n      {\n          typeQ = (int) (Math.random() * 4) + 1;\n          number1 = (int) (Math.random() * 10) + 10;\n          number2 = (int) (Math.random() * 10) + 10;\n          result.setText(&quot;&quot;);\n          answer.setText(&quot;&quot;);\n          answer.setEditable(true);\n          bNext.setEnabled(false);\n          bAnswer.setEnabled(true);\n          if(typeQ==1)\n          {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; + &quot; + number2 + &quot; ?&quot;);\n          }\n          else if(typeQ==2)\n          {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; - &quot; + number2 + &quot; ?&quot;);\n          }\n          else if(typeQ==3)\n          {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; ?&quot;);\n          }\n          else if(typeQ==4)\n          {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; ?&quot;);\n          }\n      }\n      \n      else\n      {\n         System.exit(0);\n      }\n   }\n      \n   public static void main(String[] args)\n   {\n      MATHfighter fight = new MATHfighter();\n      fight.setSize(625,600);\n      fight.setVisible(true);\n   }\n}\n</code></pre>\n<p>This is the continuation from my last question and I did change while loop to if-else, thank you to others who helped me.</p>\n<p>My new problems are that I want a bunch of middle level questions to appear when enemy life point become 100 and below but the problem is my GUI became like this after I answered the fifth question:</p>\n<p><a href=\"https://i.stack.imgur.com/eYTpZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eYTpZ.jpg\" alt=\"enter image description here\" /></a></p>\n<p>there is a chance that my mathQuestion.setText are not working after I used these code:</p>\n<pre><code>else if(life_point&lt;=100)\n      {\n         if(typeQ==1)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; + &quot; + number3 + &quot; ?&quot;);\n         }\n         else if(typeQ==2)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1 + &quot; * &quot; + number2 + &quot; - &quot; + number3 + &quot; ?&quot;); \n         }\n         else if(typeQ==3)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; + &quot; + number3 + &quot; ?&quot;);\n         }\n         else if(typeQ==4)\n         {\n            mathQuestion.setText(&quot;&gt; What is &quot; + number1*number2 + &quot; / &quot; + number2 + &quot; - &quot; + number3 + &quot; ?&quot;);\n         }\n      }\n</code></pre>\n<p>and</p>\n<pre><code> if(life_point&lt;=100)\n            {\n               if(typeQ==1)\n               {\n                  if ((number1 * number2 + number3) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     //bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }\n\n                  else if ((number1 * number2 + number3) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);\n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint(); \n                  }\n               }\n\n               else if(typeQ==2)\n               {\n                  if ((number1 * number2 - number3) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     //bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }\n\n                  else if ((number1 * number2 - number3) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);\n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint(); \n                  }\n               }\n\n               else if(typeQ==3)\n               {\n                  if ((number1*number2 / number2 + number3) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     //bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }\n\n                  else if ((number1*number2 / number2 + number3) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);\n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint(); \n                  }\n               }\n\n               else if(typeQ==4)\n               {\n                  if ((number1*number2 / number2 - number3) != kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Incorrect&quot;));\n                     //bNext.setEnabled(false);\n                     player_lp = player_lp - 20;\n                     if(player_lp == 100)\n                     {\n                        r1=204;\n                     }\n                     else if(player_lp == 40)\n                     {\n                        g1=0;\n                     }\n                     repaint();\n                  }               \n                  else if ((number1*number2 / number2 - number3) == kotae) \n                  {\n                     result.setText(&quot;&quot; + String.format(&quot;%s&quot;,&quot;Correct&quot;));\n                     answer.setEditable(false);\n                     bNext.setEnabled(true);\n                     bAnswer.setEnabled(false);\n                     life_point = life_point - 20;\n                     if(life_point == 100)\n                     {\n                        r=204;\n                     }\n                     else if(life_point == 40)\n                     {\n                        g=0;\n                     }\n                     repaint(); \n                  }\n               }\n</code></pre>\n<p>I really hope that someone can help me about these problem</p>\n"},{"tags":["java","html","jasper-reports"],"answers":[{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1224521275,"creation_date":1224521275,"answer_id":219119,"question_id":219009,"body_markdown":"That&#39;s odd code, the `&lt;br /&gt;` tags are XHTML-style, while the unclosed `a` tags are good old HTML, like the upper case tag names. If you serve such page with plain HTML header/content-type, perhaps IE will be happy.\r\n\r\nWhen you write that Firefox closes the tag, I suppose you mean it correctly doesn&#39;t extend the hyperlink span over block tags. Note that FF&#39;s view source can display closing tags that are not there when you save the page to disk!\r\n\r\nFrankly, I don&#39;t know if you can get rid of these anchors with some config. If nobody comes with a real solution, maybe you can download Jasper&#39;s source code and search JR_PAGE_ANCHOR in it, looking if the code generating it is conditionally driven.\r\n\r\nOr, if you can, you can apply post-processing of the generated code.","title":"Jasper report generating bad HTML","body":"<p>That's odd code, the <code>&lt;br /&gt;</code> tags are XHTML-style, while the unclosed <code>a</code> tags are good old HTML, like the upper case tag names. If you serve such page with plain HTML header/content-type, perhaps IE will be happy.</p>\n\n<p>When you write that Firefox closes the tag, I suppose you mean it correctly doesn't extend the hyperlink span over block tags. Note that FF's view source can display closing tags that are not there when you save the page to disk!</p>\n\n<p>Frankly, I don't know if you can get rid of these anchors with some config. If nobody comes with a real solution, maybe you can download Jasper's source code and search JR_PAGE_ANCHOR in it, looking if the code generating it is conditionally driven.</p>\n\n<p>Or, if you can, you can apply post-processing of the generated code.</p>\n"},{"tags":[],"owner":{"account_id":1921,"reputation":185672,"user_id":2648,"accept_rate":52,"display_name":"D&#243;nal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1224526616,"creation_date":1224526616,"answer_id":219362,"question_id":219009,"body_markdown":"I took Phil&#39;s advice and dove into the Jasper source code. I&#39;ve fixed the problem and submitted it to the project. Details of the cause and resolution are available [here][1].\r\n\r\n\r\n  [1]: http://jasperforge.org/tracker/index.php?func=detail&amp;aid=3180&amp;group_id=102&amp;atid=611&amp;action=edit","title":"Jasper report generating bad HTML","body":"<p>I took Phil's advice and dove into the Jasper source code. I've fixed the problem and submitted it to the project. Details of the cause and resolution are available <a href=\"http://jasperforge.org/tracker/index.php?func=detail&amp;aid=3180&amp;group_id=102&amp;atid=611&amp;action=edit\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":11906277,"reputation":93,"user_id":8712753,"display_name":"ebey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656494779,"creation_date":1656494779,"answer_id":72798989,"question_id":219009,"body_markdown":"In excel export A1 cell transfor to JR_PAGE_ANCHOR_0_1.Some of tips are setting IS_ONE_PAGE_PER_SHEET property doing true, IS_DETECT_CELL_TYPE doing true but these are not working for me.\r\nTo avoid from this situation , configure your xlsx report configuration is worked for me (set ignore anchor is key point);\r\n\r\n     private final SimpleXlsxReportConfiguration xlsxReportConfiguration;\r\n     JRAbstractExporter exporter;\r\n    \r\n     this.xlsxReportConfiguration = new SimpleXlsxReportConfiguration();      \r\n     ...\r\n     xlsxReportConfiguration.setIgnoreAnchors(true);\r\n     ...\r\n    \r\n     exporter = new JRXlsxExporter();\r\n     exporter.setConfiguration(xlsxReportConfiguration);\r\n\r\n","title":"Jasper report generating bad HTML","body":"<p>In excel export A1 cell transfor to JR_PAGE_ANCHOR_0_1.Some of tips are setting IS_ONE_PAGE_PER_SHEET property doing true, IS_DETECT_CELL_TYPE doing true but these are not working for me.\nTo avoid from this situation , configure your xlsx report configuration is worked for me (set ignore anchor is key point);</p>\n<pre><code> private final SimpleXlsxReportConfiguration xlsxReportConfiguration;\n JRAbstractExporter exporter;\n\n this.xlsxReportConfiguration = new SimpleXlsxReportConfiguration();      \n ...\n xlsxReportConfiguration.setIgnoreAnchors(true);\n ...\n\n exporter = new JRXlsxExporter();\n exporter.setConfiguration(xlsxReportConfiguration);\n</code></pre>\n"}],"owner":{"account_id":1921,"reputation":185672,"user_id":2648,"accept_rate":52,"display_name":"D&#243;nal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4510,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1656494779,"creation_date":1224519324,"question_id":219009,"body_markdown":"If I view the HTML generated by one of my Jasper reports in IE7 I see the following: \r\n\r\n    &lt;BR /&gt;&lt;BR /&gt;\r\n    &lt;A name=&quot;JR_PAGE_ANCHOR_0_1&quot;&gt;\r\n    &lt;TABLE style=&quot;WIDTH: 1000px&quot; cellSpacing=&quot;0&quot; cellPadding=&quot;0&quot; bgColor=&quot;#ffffff&quot; border=&quot;0&quot;&gt;\r\n    &lt;-- table body omitted --&gt;\r\n    &lt;/TABLE&gt;\r\n\r\nThe two BR tags are added via the JRHtmlExporterParameter.HTML_HEADER parameter. After these tags and before the beginning of the report table that there&#39;s an unclosed anchor tag that is generated by Jasper reports. The fact that this tag is not correctly closed is messing up the formatting of my report because IE is hyperlinking the entire report TABLE. I&#39;m not using this anchor tag, so if I could prevent Jasper from generating it, that would solve my problem.\r\n\r\nIncidentally, this problem only occurs in IE, in Firefox everything works fine because the anchor tag is properly closed.\r\n\r\nThanks in advance,\r\nDon","title":"Jasper report generating bad HTML","body":"<p>If I view the HTML generated by one of my Jasper reports in IE7 I see the following: </p>\n\n<pre><code>&lt;BR /&gt;&lt;BR /&gt;\n&lt;A name=\"JR_PAGE_ANCHOR_0_1\"&gt;\n&lt;TABLE style=\"WIDTH: 1000px\" cellSpacing=\"0\" cellPadding=\"0\" bgColor=\"#ffffff\" border=\"0\"&gt;\n&lt;-- table body omitted --&gt;\n&lt;/TABLE&gt;\n</code></pre>\n\n<p>The two BR tags are added via the JRHtmlExporterParameter.HTML_HEADER parameter. After these tags and before the beginning of the report table that there's an unclosed anchor tag that is generated by Jasper reports. The fact that this tag is not correctly closed is messing up the formatting of my report because IE is hyperlinking the entire report TABLE. I'm not using this anchor tag, so if I could prevent Jasper from generating it, that would solve my problem.</p>\n\n<p>Incidentally, this problem only occurs in IE, in Firefox everything works fine because the anchor tag is properly closed.</p>\n\n<p>Thanks in advance,\nDon</p>\n"},{"tags":["java","git","docker"],"answers":[{"tags":[],"owner":{"account_id":1387645,"reputation":7926,"user_id":1319284,"accept_rate":69,"display_name":"kutschkem"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1656493341,"creation_date":1656493341,"answer_id":72798636,"question_id":72798121,"body_markdown":"I don&#39;t know git builder and so can&#39;t provide the solution, but what I **can** is tell you what the problem is. I hope this gets you halfway to solve your problem.\r\n\r\n```\r\nCaused by: java.io.IOException: Cannot run program &quot;ssh-agent bash -c &#39;chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; &quot;: error=2, No such file or directory\r\n```\r\nThis indicates it is trying to run `&quot;ssh-agent bash -c &#39;chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; &quot;` **without separating the arguments**. It literally looks for the path &quot;ssh-agent bash -c &#39;chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; &quot;\r\n\r\nSo, you probably either just need to add\r\n\r\n```\r\nstub.add(&quot;bash&quot;);\r\nstub.add(&quot;-c&quot;);\r\n```\r\n\r\nor separate the arguments into their own stub.add calls. Experiment to get it right. I hope this helps understanding this error message and similar ones in the future.","title":"Git clone via ssh inside Docker not working","body":"<p>I don't know git builder and so can't provide the solution, but what I <strong>can</strong> is tell you what the problem is. I hope this gets you halfway to solve your problem.</p>\n<pre><code>Caused by: java.io.IOException: Cannot run program &quot;ssh-agent bash -c 'chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; &quot;: error=2, No such file or directory\n</code></pre>\n<p>This indicates it is trying to run <code>&quot;ssh-agent bash -c 'chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; &quot;</code> <strong>without separating the arguments</strong>. It literally looks for the path &quot;ssh-agent bash -c 'chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; &quot;</p>\n<p>So, you probably either just need to add</p>\n<pre><code>stub.add(&quot;bash&quot;);\nstub.add(&quot;-c&quot;);\n</code></pre>\n<p>or separate the arguments into their own stub.add calls. Experiment to get it right. I hope this helps understanding this error message and similar ones in the future.</p>\n"}],"owner":{"account_id":9522301,"reputation":101,"user_id":7076740,"display_name":"Se Br"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1656494742,"creation_date":1656491123,"question_id":72798121,"body_markdown":"I&#39;m trying to clone git repository via ssh from Java (that runs in Docker), but cloning fails. If I try to run with docker exec inside container it works pretty fine. So I don&#39;t understand why git clone not works.\r\nI&#39;ve tried to put breakpoint before the command start by process builder and check that all files are exists.\r\nP.S.\r\nI need to pass ssh key only once when git clone exec, I don&#39;t need to store it for a long time, because this app can clone from different vcs with different ssh keys.\r\n\r\nJava output:\r\n\r\n    backend-server-1    | 2022-06-29 08:17:53,186 INFO c.s.i.g.s.RepoInfo [pool-4-thread-1] Directory for files from repository and extra created.\r\n    backend-server-1    | Path to files = /opt/backend/files/b/145/.src\r\n    backend-server-1    | Path to extra = /usr/local/tomcat/temp/git5370745586107281269/repo {}\r\n    backend-server-1    | 2022-06-29 08:17:53,191 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] Trying to get sources from git repository via branch with &#39;.git&#39; suffix {}\r\n    backend-server-1    | 2022-06-29 08:17:53,194 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] Trying to clone via link: &#39;git@github.com:BrezhnevSA/launch_in_netns.git&#39; {}\r\n    backend-server-1    | 2022-06-29 08:17:53,216 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] tempFile.getAbsolutePath() {}\r\n    backend-server-1    | 2022-06-29 08:17:53,217 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] /usr/local/tomcat/temp/ssh_key_17036759532395112843.pub {}\r\n    backend-server-1    | 2022-06-29 08:17:53,229 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] ssh-agent bash -c &#39;chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;;  /usr/bin/git clone --recurse-submodules --separate-git-dir=&quot;/usr/local/tomcat/temp/git5370745586107281269/repo&quot; git@github.com:BrezhnevSA/launch_in_netns.git /opt/backend/files/b/145/.src&#39; {}\r\n    backend-server-1    | 2022-06-29 08:17:53,231 INFO c.s.i.u.c.CmdRunner [pool-4-thread-1] Starting ssh-agent... {}\r\n    backend-server-1    | 2022-06-29 08:17:53,250 ERROR c.s.i.g.s.Analysis [pool-4-thread-1] Failed to save task to FS {}\r\n    backend-server-1    | java.lang.RuntimeException: Couldn&#39;t execute git command &#39;Cmd [ssh-agent bash -c &#39;chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;;  /usr/bin/git clone --recurse-submodules --separate-git-dir=&quot;/usr/local/tomcat/temp/git5370745586107281269/repo&quot; git@github.com:BrezhnevSA/launch_in_netns.git /opt/backend/files/b/145/.src&#39;]&#39;\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.getProcessResult(GitCommandRunner.java:398) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.clone(GitCommandRunner.java:338) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:188) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:138) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:89) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.start.RepoInfo.saveToFs(RepoInfo.java:57) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.start.RepoSource.saveToFs(RepoSource.java:40) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.start.Analysis.prepareSources(Analysis.java:102) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.start.Analysis.run(Analysis.java:84) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.utils.PreservingStackExecutorService.lambda$runnableWithStack$2(PreservingStackExecutorService.java:123) ~[utils-3.12.0-SNAPSHOT.jar:?]\r\n    backend-server-1    | \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n    backend-server-1    | \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n    backend-server-1    | \tat java.lang.Thread.run(Thread.java:834) ~[?:?]\r\n    backend-server-1    | Caused by: java.io.IOException: Cannot run program &quot;ssh-agent bash -c &#39;chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; &quot;: error=2, No such file or directory\r\n    backend-server-1    | \tat java.lang.ProcessBuilder.start(ProcessBuilder.java:1128) ~[?:?]\r\n    backend-server-1    | \tat java.lang.ProcessBuilder.start(ProcessBuilder.java:1071) ~[?:?]\r\n    backend-server-1    | \tat com.smartdec.incode.utils.cmd.CmdRunner.start(CmdRunner.java:244) ~[utils-3.12.0-SNAPSHOT.jar:?]\r\n    backend-server-1    | \tat com.smartdec.incode.utils.cmd.CmdRunner.runWithTimeout(CmdRunner.java:96) ~[utils-3.12.0-SNAPSHOT.jar:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.getProcessResult(GitCommandRunner.java:375) ~[classes/:?]\r\n    backend-server-1    | \t... 12 more\r\n    backend-server-1    | Caused by: java.io.IOException: error=2, No such file or directory\r\n    backend-server-1    | \tat java.lang.ProcessImpl.forkAndExec(Native Method) ~[?:?]\r\n    backend-server-1    | \tat java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:340) ~[?:?]\r\n    backend-server-1    | \tat java.lang.ProcessImpl.start(ProcessImpl.java:271) ~[?:?]\r\n    backend-server-1    | \tat java.lang.ProcessBuilder.start(ProcessBuilder.java:1107) ~[?:?]\r\n    backend-server-1    | \tat java.lang.ProcessBuilder.start(ProcessBuilder.java:1071) ~[?:?]\r\n    backend-server-1    | \tat com.smartdec.incode.utils.cmd.CmdRunner.start(CmdRunner.java:244) ~[utils-3.12.0-SNAPSHOT.jar:?]\r\n    backend-server-1    | \tat com.smartdec.incode.utils.cmd.CmdRunner.runWithTimeout(CmdRunner.java:96) ~[utils-3.12.0-SNAPSHOT.jar:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.getProcessResult(GitCommandRunner.java:375) ~[classes/:?]\r\n    backend-server-1    | \t... 12 more\r\n\r\nJava git builder:\r\n\r\n       if (isSsh(link) &amp;&amp; filePath != null) {\r\n            stub.add(&quot;ssh-agent bash -c &#39;chmod 600 \\&quot;&quot;\r\n                    + filePath + &quot;\\&quot;; ssh-add \\&quot;&quot; + filePath + &quot;\\&quot;; &quot;);\r\n        }\r\n        stub.add(getGitPath());\r\n        stub.add(&quot;clone&quot;);\r\n        stub.add(&quot;--recurse-submodules&quot;);\r\n        if (StringUtils.isNotBlank(branch)) {\r\n            stub.add(&quot;--single-branch&quot;);\r\n            stub.add(&quot;--branch&quot;);\r\n            stub.add(branch);\r\n        }\r\n        stub.add(&quot;--separate-git-dir=\\&quot;&quot; + gitDir.toString() + &quot;\\&quot;&quot;);\r\n        if (depth &gt; 0) {\r\n            stub.add(&quot;--depth&quot;);\r\n            stub.add(Integer.toString(depth));\r\n        }\r\n        stub.add(addOrRemoveSuffix(link, withGitSuffix));\r\n        stub.add(out.toString() + (isSsh(link) &amp;&amp; filePath != null ?  &quot;&#39;&quot; : &quot;&quot;));\r\n\r\nHow I run with docker exec:\r\n\r\n    docker exec backend-server-1 bash -c &quot;ssh-agent bash -c &#39;chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;;  /usr/bin/git clone --recurse-submodules --separate-git-dir=&quot;/usr/local/tomcat/temp/git5370745586107281269/repo&quot; git@github.com:BrezhnevSA/launch_in_netns.git /opt/backend/files/b/145/.src&#39;&quot;\r\n\r\nUPD:\r\n\r\nI&#39;ve changed git builder. Previous error solved, but still command not runs properly\r\n\r\nJava git builder:\r\n\r\n    if (isSsh(link) &amp;&amp; filePath != null) {\r\n        stub.add(&quot;ssh-agent&quot;);\r\n        stub.add(&quot;bash&quot;);\r\n        stub.add(&quot;-c&quot;);\r\n        stub.add(&quot;&#39;chmod 600 \\&quot;&quot;\r\n                + filePath + &quot;\\&quot;; ssh-add \\&quot;&quot; + filePath + &quot;\\&quot;; &quot;\r\n                + getGitPath() + &quot; clone --recurse-submodules &quot;\r\n                + (StringUtils.isNotBlank(branch)\r\n                    ? &quot;--single-branch --branch &quot; + branch + &quot; &quot;\r\n                    : &quot; &quot;\r\n                  )\r\n                + &quot;--separate-git-dir=\\&quot;&quot; + gitDir.toString() + &quot;\\&quot; &quot;\r\n                + (depth &gt; 0 ? &quot;--depth&quot; + depth + &quot; &quot; : &quot; &quot;)\r\n                + addOrRemoveSuffix(link, withGitSuffix) + &quot; &quot;\r\n                + out.toString() + &quot;&#39;&quot;\r\n        );\r\n    } else {\r\n        stub.add(getGitPath());\r\n        stub.add(&quot;clone&quot;);\r\n        stub.add(&quot;--recurse-submodules&quot;);\r\n        if (StringUtils.isNotBlank(branch)) {\r\n            stub.add(&quot;--single-branch&quot;);\r\n            stub.add(&quot;--branch&quot;);\r\n            stub.add(branch);\r\n        }\r\n        stub.add(&quot;--separate-git-dir=&quot; + gitDir.toString());\r\n        if (depth &gt; 0) {\r\n            stub.add(&quot;--depth&quot;);\r\n            stub.add(Integer.toString(depth));\r\n        }\r\n        stub.add(addOrRemoveSuffix(link, withGitSuffix));\r\n        stub.add(out.toString());\r\n    }\r\n\r\nJava output:\r\n\r\n    backend-server-1    | 2022-06-29 09:20:54,856 INFO c.s.i.g.s.RepoInfo [pool-4-thread-1] Directory for files from repository and extra created.\r\n    backend-server-1    | Path to files = /opt/backend/files/b/151/.src\r\n    backend-server-1    | Path to extra = /usr/local/tomcat/temp/git890193757531557497/repo {}\r\n    backend-server-1    | 2022-06-29 09:20:54,858 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] Trying to get sources from git repository via branch with &#39;.git&#39; suffix {}\r\n    backend-server-1    | 2022-06-29 09:20:54,863 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] Trying to clone via link: &#39;git@github.com:BrezhnevSA/launch_in_netns.git&#39; {}\r\n    backend-server-1    | 2022-06-29 09:20:54,866 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] tempFile.getAbsolutePath() {}\r\n    backend-server-1    | 2022-06-29 09:20:54,867 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] /usr/local/tomcat/temp/ssh_key_6005337260985981392.pub {}\r\n    backend-server-1    | 2022-06-29 09:20:54,898 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] ssh-agent bash -c &#39;chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_6005337260985981392.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_6005337260985981392.pub&quot;; /usr/bin/git clone --recurse-submodules  --separate-git-dir=&quot;/usr/local/tomcat/temp/git890193757531557497/repo&quot;  git@github.com:BrezhnevSA/launch_in_netns.git /opt/backend/files/b/151/.src&#39; {}\r\n    backend-server-1    | 2022-06-29 09:20:54,899 INFO c.s.i.u.c.CmdRunner [pool-4-thread-1] Starting ssh-agent... {}\r\n    backend-server-1    | 2022-06-29 09:20:54,936 INFO c.s.i.u.c.CmdRunner [pool-4-thread-1] Waiting for result of process &#39;ssh-agent&#39; for &#39;ssh-agent bash -c &#39;chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_6005337260985981392.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_6005337260985981392.pub&quot;; /usr/bin/git clone --recurse-submodules  --separate-git-dir=&quot;/usr/local/tomcat/temp/git890193757531557497/repo&quot;  git@github.com:BrezhnevSA/launch_in_netns.git /opt/backend/files/b/151/.src&#39;&#39; {}\r\n    backend-server-1    | 2022-06-29 09:20:54,936 INFO c.s.i.u.c.CmdRunner [pool-4-thread-1] Process for &#39;ssh-agent&#39; executed unsuccessfully, standard output: &#39;&#39;, error output: &#39;&#39; {}\r\n    backend-server-1    | 2022-06-29 09:20:54,960 ERROR c.s.i.g.s.Analysis [pool-4-thread-1] Failed to save task to FS {}\r\n    backend-server-1    | java.lang.RuntimeException: Couldn&#39;t parse git error output. Result: &#39;CmdResult{type=ERROR, output=&#39;&#39;, error=&#39;&#39;}&#39;\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.getProcessResult(GitCommandRunner.java:393) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.clone(GitCommandRunner.java:337) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:188) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:138) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:89) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.start.RepoInfo.saveToFs(RepoInfo.java:57) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.start.RepoSource.saveToFs(RepoSource.java:40) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.start.Analysis.prepareSources(Analysis.java:102) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.gui.start.Analysis.run(Analysis.java:84) ~[classes/:?]\r\n    backend-server-1    | \tat com.smartdec.incode.utils.PreservingStackExecutorService.lambda$runnableWithStack$2(PreservingStackExecutorService.java:123) ~[utils-3.12.0-SNAPSHOT.jar:?]\r\n    backend-server-1    | \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n    backend-server-1    | \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n    backend-server-1    | \tat java.lang.Thread.run(Thread.java:834) ~[?:?]\r\n\r\n","title":"Git clone via ssh inside Docker not working","body":"<p>I'm trying to clone git repository via ssh from Java (that runs in Docker), but cloning fails. If I try to run with docker exec inside container it works pretty fine. So I don't understand why git clone not works.\nI've tried to put breakpoint before the command start by process builder and check that all files are exists.\nP.S.\nI need to pass ssh key only once when git clone exec, I don't need to store it for a long time, because this app can clone from different vcs with different ssh keys.</p>\n<p>Java output:</p>\n<pre><code>backend-server-1    | 2022-06-29 08:17:53,186 INFO c.s.i.g.s.RepoInfo [pool-4-thread-1] Directory for files from repository and extra created.\nbackend-server-1    | Path to files = /opt/backend/files/b/145/.src\nbackend-server-1    | Path to extra = /usr/local/tomcat/temp/git5370745586107281269/repo {}\nbackend-server-1    | 2022-06-29 08:17:53,191 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] Trying to get sources from git repository via branch with '.git' suffix {}\nbackend-server-1    | 2022-06-29 08:17:53,194 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] Trying to clone via link: 'git@github.com:BrezhnevSA/launch_in_netns.git' {}\nbackend-server-1    | 2022-06-29 08:17:53,216 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] tempFile.getAbsolutePath() {}\nbackend-server-1    | 2022-06-29 08:17:53,217 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] /usr/local/tomcat/temp/ssh_key_17036759532395112843.pub {}\nbackend-server-1    | 2022-06-29 08:17:53,229 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] ssh-agent bash -c 'chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;;  /usr/bin/git clone --recurse-submodules --separate-git-dir=&quot;/usr/local/tomcat/temp/git5370745586107281269/repo&quot; git@github.com:BrezhnevSA/launch_in_netns.git /opt/backend/files/b/145/.src' {}\nbackend-server-1    | 2022-06-29 08:17:53,231 INFO c.s.i.u.c.CmdRunner [pool-4-thread-1] Starting ssh-agent... {}\nbackend-server-1    | 2022-06-29 08:17:53,250 ERROR c.s.i.g.s.Analysis [pool-4-thread-1] Failed to save task to FS {}\nbackend-server-1    | java.lang.RuntimeException: Couldn't execute git command 'Cmd [ssh-agent bash -c 'chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;;  /usr/bin/git clone --recurse-submodules --separate-git-dir=&quot;/usr/local/tomcat/temp/git5370745586107281269/repo&quot; git@github.com:BrezhnevSA/launch_in_netns.git /opt/backend/files/b/145/.src']'\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.getProcessResult(GitCommandRunner.java:398) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.clone(GitCommandRunner.java:338) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:188) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:138) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:89) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.start.RepoInfo.saveToFs(RepoInfo.java:57) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.start.RepoSource.saveToFs(RepoSource.java:40) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.start.Analysis.prepareSources(Analysis.java:102) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.start.Analysis.run(Analysis.java:84) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.utils.PreservingStackExecutorService.lambda$runnableWithStack$2(PreservingStackExecutorService.java:123) ~[utils-3.12.0-SNAPSHOT.jar:?]\nbackend-server-1    |   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\nbackend-server-1    |   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\nbackend-server-1    |   at java.lang.Thread.run(Thread.java:834) ~[?:?]\nbackend-server-1    | Caused by: java.io.IOException: Cannot run program &quot;ssh-agent bash -c 'chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; &quot;: error=2, No such file or directory\nbackend-server-1    |   at java.lang.ProcessBuilder.start(ProcessBuilder.java:1128) ~[?:?]\nbackend-server-1    |   at java.lang.ProcessBuilder.start(ProcessBuilder.java:1071) ~[?:?]\nbackend-server-1    |   at com.smartdec.incode.utils.cmd.CmdRunner.start(CmdRunner.java:244) ~[utils-3.12.0-SNAPSHOT.jar:?]\nbackend-server-1    |   at com.smartdec.incode.utils.cmd.CmdRunner.runWithTimeout(CmdRunner.java:96) ~[utils-3.12.0-SNAPSHOT.jar:?]\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.getProcessResult(GitCommandRunner.java:375) ~[classes/:?]\nbackend-server-1    |   ... 12 more\nbackend-server-1    | Caused by: java.io.IOException: error=2, No such file or directory\nbackend-server-1    |   at java.lang.ProcessImpl.forkAndExec(Native Method) ~[?:?]\nbackend-server-1    |   at java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:340) ~[?:?]\nbackend-server-1    |   at java.lang.ProcessImpl.start(ProcessImpl.java:271) ~[?:?]\nbackend-server-1    |   at java.lang.ProcessBuilder.start(ProcessBuilder.java:1107) ~[?:?]\nbackend-server-1    |   at java.lang.ProcessBuilder.start(ProcessBuilder.java:1071) ~[?:?]\nbackend-server-1    |   at com.smartdec.incode.utils.cmd.CmdRunner.start(CmdRunner.java:244) ~[utils-3.12.0-SNAPSHOT.jar:?]\nbackend-server-1    |   at com.smartdec.incode.utils.cmd.CmdRunner.runWithTimeout(CmdRunner.java:96) ~[utils-3.12.0-SNAPSHOT.jar:?]\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.getProcessResult(GitCommandRunner.java:375) ~[classes/:?]\nbackend-server-1    |   ... 12 more\n</code></pre>\n<p>Java git builder:</p>\n<pre><code>   if (isSsh(link) &amp;&amp; filePath != null) {\n        stub.add(&quot;ssh-agent bash -c 'chmod 600 \\&quot;&quot;\n                + filePath + &quot;\\&quot;; ssh-add \\&quot;&quot; + filePath + &quot;\\&quot;; &quot;);\n    }\n    stub.add(getGitPath());\n    stub.add(&quot;clone&quot;);\n    stub.add(&quot;--recurse-submodules&quot;);\n    if (StringUtils.isNotBlank(branch)) {\n        stub.add(&quot;--single-branch&quot;);\n        stub.add(&quot;--branch&quot;);\n        stub.add(branch);\n    }\n    stub.add(&quot;--separate-git-dir=\\&quot;&quot; + gitDir.toString() + &quot;\\&quot;&quot;);\n    if (depth &gt; 0) {\n        stub.add(&quot;--depth&quot;);\n        stub.add(Integer.toString(depth));\n    }\n    stub.add(addOrRemoveSuffix(link, withGitSuffix));\n    stub.add(out.toString() + (isSsh(link) &amp;&amp; filePath != null ?  &quot;'&quot; : &quot;&quot;));\n</code></pre>\n<p>How I run with docker exec:</p>\n<pre><code>docker exec backend-server-1 bash -c &quot;ssh-agent bash -c 'chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_17036759532395112843.pub&quot;;  /usr/bin/git clone --recurse-submodules --separate-git-dir=&quot;/usr/local/tomcat/temp/git5370745586107281269/repo&quot; git@github.com:BrezhnevSA/launch_in_netns.git /opt/backend/files/b/145/.src'&quot;\n</code></pre>\n<p>UPD:</p>\n<p>I've changed git builder. Previous error solved, but still command not runs properly</p>\n<p>Java git builder:</p>\n<pre><code>if (isSsh(link) &amp;&amp; filePath != null) {\n    stub.add(&quot;ssh-agent&quot;);\n    stub.add(&quot;bash&quot;);\n    stub.add(&quot;-c&quot;);\n    stub.add(&quot;'chmod 600 \\&quot;&quot;\n            + filePath + &quot;\\&quot;; ssh-add \\&quot;&quot; + filePath + &quot;\\&quot;; &quot;\n            + getGitPath() + &quot; clone --recurse-submodules &quot;\n            + (StringUtils.isNotBlank(branch)\n                ? &quot;--single-branch --branch &quot; + branch + &quot; &quot;\n                : &quot; &quot;\n              )\n            + &quot;--separate-git-dir=\\&quot;&quot; + gitDir.toString() + &quot;\\&quot; &quot;\n            + (depth &gt; 0 ? &quot;--depth&quot; + depth + &quot; &quot; : &quot; &quot;)\n            + addOrRemoveSuffix(link, withGitSuffix) + &quot; &quot;\n            + out.toString() + &quot;'&quot;\n    );\n} else {\n    stub.add(getGitPath());\n    stub.add(&quot;clone&quot;);\n    stub.add(&quot;--recurse-submodules&quot;);\n    if (StringUtils.isNotBlank(branch)) {\n        stub.add(&quot;--single-branch&quot;);\n        stub.add(&quot;--branch&quot;);\n        stub.add(branch);\n    }\n    stub.add(&quot;--separate-git-dir=&quot; + gitDir.toString());\n    if (depth &gt; 0) {\n        stub.add(&quot;--depth&quot;);\n        stub.add(Integer.toString(depth));\n    }\n    stub.add(addOrRemoveSuffix(link, withGitSuffix));\n    stub.add(out.toString());\n}\n</code></pre>\n<p>Java output:</p>\n<pre><code>backend-server-1    | 2022-06-29 09:20:54,856 INFO c.s.i.g.s.RepoInfo [pool-4-thread-1] Directory for files from repository and extra created.\nbackend-server-1    | Path to files = /opt/backend/files/b/151/.src\nbackend-server-1    | Path to extra = /usr/local/tomcat/temp/git890193757531557497/repo {}\nbackend-server-1    | 2022-06-29 09:20:54,858 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] Trying to get sources from git repository via branch with '.git' suffix {}\nbackend-server-1    | 2022-06-29 09:20:54,863 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] Trying to clone via link: 'git@github.com:BrezhnevSA/launch_in_netns.git' {}\nbackend-server-1    | 2022-06-29 09:20:54,866 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] tempFile.getAbsolutePath() {}\nbackend-server-1    | 2022-06-29 09:20:54,867 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] /usr/local/tomcat/temp/ssh_key_6005337260985981392.pub {}\nbackend-server-1    | 2022-06-29 09:20:54,898 INFO c.s.i.g.u.v.GitCommandRunner [pool-4-thread-1] ssh-agent bash -c 'chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_6005337260985981392.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_6005337260985981392.pub&quot;; /usr/bin/git clone --recurse-submodules  --separate-git-dir=&quot;/usr/local/tomcat/temp/git890193757531557497/repo&quot;  git@github.com:BrezhnevSA/launch_in_netns.git /opt/backend/files/b/151/.src' {}\nbackend-server-1    | 2022-06-29 09:20:54,899 INFO c.s.i.u.c.CmdRunner [pool-4-thread-1] Starting ssh-agent... {}\nbackend-server-1    | 2022-06-29 09:20:54,936 INFO c.s.i.u.c.CmdRunner [pool-4-thread-1] Waiting for result of process 'ssh-agent' for 'ssh-agent bash -c 'chmod 600 &quot;/usr/local/tomcat/temp/ssh_key_6005337260985981392.pub&quot;; ssh-add &quot;/usr/local/tomcat/temp/ssh_key_6005337260985981392.pub&quot;; /usr/bin/git clone --recurse-submodules  --separate-git-dir=&quot;/usr/local/tomcat/temp/git890193757531557497/repo&quot;  git@github.com:BrezhnevSA/launch_in_netns.git /opt/backend/files/b/151/.src'' {}\nbackend-server-1    | 2022-06-29 09:20:54,936 INFO c.s.i.u.c.CmdRunner [pool-4-thread-1] Process for 'ssh-agent' executed unsuccessfully, standard output: '', error output: '' {}\nbackend-server-1    | 2022-06-29 09:20:54,960 ERROR c.s.i.g.s.Analysis [pool-4-thread-1] Failed to save task to FS {}\nbackend-server-1    | java.lang.RuntimeException: Couldn't parse git error output. Result: 'CmdResult{type=ERROR, output='', error=''}'\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.getProcessResult(GitCommandRunner.java:393) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.clone(GitCommandRunner.java:337) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:188) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:138) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.utils.vcs.GitCommandRunner.cloneRepositoryViaBranch(GitCommandRunner.java:89) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.start.RepoInfo.saveToFs(RepoInfo.java:57) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.start.RepoSource.saveToFs(RepoSource.java:40) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.start.Analysis.prepareSources(Analysis.java:102) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.gui.start.Analysis.run(Analysis.java:84) ~[classes/:?]\nbackend-server-1    |   at com.smartdec.incode.utils.PreservingStackExecutorService.lambda$runnableWithStack$2(PreservingStackExecutorService.java:123) ~[utils-3.12.0-SNAPSHOT.jar:?]\nbackend-server-1    |   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\nbackend-server-1    |   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\nbackend-server-1    |   at java.lang.Thread.run(Thread.java:834) ~[?:?]\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8767,"page":1225,"page_size":100}
