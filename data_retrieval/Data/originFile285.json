{"items":[{"tags":["java","kotlin","flyway","spring-boot-test"],"answers":[{"tags":[],"owner":{"account_id":20565689,"reputation":135,"user_id":15095135,"display_name":"sho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690383017,"creation_date":1690383017,"answer_id":76772540,"question_id":76770885,"body_markdown":"New migration files were committed to my remote base branch, but I was unaware of this. As a result, my branch&#39;s migration file and the base branch&#39;s migration file are now in conflict.","title":"org.flywaydb.core.api.FlywayException at CompositeMigrationResolver.java:147","body":"<p>New migration files were committed to my remote base branch, but I was unaware of this. As a result, my branch's migration file and the base branch's migration file are now in conflict.</p>\n"}],"owner":{"account_id":20565689,"reputation":135,"user_id":15095135,"display_name":"sho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690383017,"creation_date":1690371583,"question_id":76770885,"body_markdown":"The following error has occurred: \r\n\r\n```\r\norg.flywaydb.core.api.FlywayException at CompositeMigrationResolver.java:147. \r\n```\r\n\r\nThis error is occurring on Github Actions. \r\n\r\nPlease note that we are using Flyway version 6.4.0, and from what we can see in [the source code](https://github.com/flyway/flyway/blob/flyway-6.4.0/flyway-core/src/main/java/org/flywaydb/core/internal/resolver/CompositeMigrationResolver.java#L147), it appears to be an error that occurs when versions are duplicated.（This is just my opinion, so I can&#39;t guarantee it&#39;s correct but...）\r\n\r\nOf course, I&#39;ve checked the migration files and confirmed that the versions are not duplicated.\r\n\r\nIn addition, this error occurs when tests fail in @SpringBootTest. The error logs output for each failed test are as follows:\r\n```\r\njava.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:132\r\nCaused by: org.springframework.beans.factory.BeanCreationException at AbstractAutowireCapableBeanFactory.java:1804\r\nCaused by: java.lang.reflect.InvocationTargetException at NativeMethodAccessorImpl.java:-2\r\nCaused by: org.flywaydb.core.api.FlywayException at CompositeMigrationResolver.java:147&quot;\r\n```\r\n\r\nWould anyone happen to know something about this error? I would greatly appreciate it if someone who understands could respond.","title":"org.flywaydb.core.api.FlywayException at CompositeMigrationResolver.java:147","body":"<p>The following error has occurred:</p>\n<pre><code>org.flywaydb.core.api.FlywayException at CompositeMigrationResolver.java:147. \n</code></pre>\n<p>This error is occurring on Github Actions.</p>\n<p>Please note that we are using Flyway version 6.4.0, and from what we can see in <a href=\"https://github.com/flyway/flyway/blob/flyway-6.4.0/flyway-core/src/main/java/org/flywaydb/core/internal/resolver/CompositeMigrationResolver.java#L147\" rel=\"nofollow noreferrer\">the source code</a>, it appears to be an error that occurs when versions are duplicated.（This is just my opinion, so I can't guarantee it's correct but...）</p>\n<p>Of course, I've checked the migration files and confirmed that the versions are not duplicated.</p>\n<p>In addition, this error occurs when tests fail in @SpringBootTest. The error logs output for each failed test are as follows:</p>\n<pre><code>java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:132\nCaused by: org.springframework.beans.factory.BeanCreationException at AbstractAutowireCapableBeanFactory.java:1804\nCaused by: java.lang.reflect.InvocationTargetException at NativeMethodAccessorImpl.java:-2\nCaused by: org.flywaydb.core.api.FlywayException at CompositeMigrationResolver.java:147&quot;\n</code></pre>\n<p>Would anyone happen to know something about this error? I would greatly appreciate it if someone who understands could respond.</p>\n"},{"tags":["java","recursion","tree","logic","b-tree"],"comments":[{"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"score":0,"creation_date":1690316586,"post_id":76766247,"comment_id":135335921,"body_markdown":"One reasonable implementation of a B-tree node is a fixed-size array of references, some of which may be null. That fixed size would not be two, which would cause your method to always return false. \n\nBy the way, consider whether `(true &amp;&amp; X)` would differ from simply `X`.","body":"One reasonable implementation of a B-tree node is a fixed-size array of references, some of which may be null. That fixed size would not be two, which would cause your method to always return false.   By the way, consider whether <code>(true &amp;&amp; X)</code> would differ from simply <code>X</code>."},{"owner":{"account_id":1706785,"reputation":48162,"user_id":1565698,"accept_rate":38,"display_name":"Sylwester"},"score":0,"creation_date":1690317968,"post_id":76766247,"comment_id":135336166,"body_markdown":"How are the leafs in this tree?","body":"How are the leafs in this tree?"}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690382898,"creation_date":1690316538,"answer_id":76766278,"question_id":76766247,"body_markdown":"Your function could only return true if the tree would have no leaf-nodes. B-Trees obviously have leaves.\r\n\r\nYour `(node.children.length != 2)` condition suggests that you are working with dynamically sized `children` arrays, so I&#39;ll assume that when there are no children, the `children.length` is zero. \r\n\r\nSo change to this:\r\n\r\n```\r\nprivate boolean isBinary(BNode node) {\r\n    if (node.children.length == 0)\r\n        return true; // Leaves are OK.\r\n    if (node.children.length != 2)\r\n        return false;\r\n    else\r\n        return (isBinary(node.children[0]) &amp;&amp; isBinary(node.children[1]));\r\n}\r\n```\r\n\r\nOf course, if you have a different way to identify leaves, like with a different class that does not have a `children` field, then test for that condition instead. The essence is that you should detect when you are at a leaf and then always return true.","title":"In Java, how do I write a recursive method that checks whether or not a B-Tree is binary (every child node has no more than 2 children)?","body":"<p>Your function could only return true if the tree would have no leaf-nodes. B-Trees obviously have leaves.</p>\n<p>Your <code>(node.children.length != 2)</code> condition suggests that you are working with dynamically sized <code>children</code> arrays, so I'll assume that when there are no children, the <code>children.length</code> is zero.</p>\n<p>So change to this:</p>\n<pre><code>private boolean isBinary(BNode node) {\n    if (node.children.length == 0)\n        return true; // Leaves are OK.\n    if (node.children.length != 2)\n        return false;\n    else\n        return (isBinary(node.children[0]) &amp;&amp; isBinary(node.children[1]));\n}\n</code></pre>\n<p>Of course, if you have a different way to identify leaves, like with a different class that does not have a <code>children</code> field, then test for that condition instead. The essence is that you should detect when you are at a leaf and then always return true.</p>\n"}],"owner":{"account_id":27735415,"reputation":15,"user_id":21173114,"display_name":"grecode97"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1690382898,"creation_date":1690316225,"question_id":76766247,"body_markdown":"This is what I tried, but it always returns false. Maybe my B-Tree is bad, but how do I solve this?\r\n\r\nBoth of these methods are in the BTree class, therefore root is the starting node.\r\n\r\nI assumed that it is not necessary to check whether or not any possible children are null, since only the length of the children array matters.\r\n\r\n    public boolean isBinary() {\r\n\t\treturn isBinary(root);\r\n\t}\r\n\r\n\tprivate boolean isBinary(BNode node) {\r\n\t\tif (node.children.length != 2)\r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\treturn (true &amp;&amp; isBinary(node.children[0]) &amp;&amp; isBinary(node.children[1]));\r\n\t\t\t\t\r\n\t}","title":"In Java, how do I write a recursive method that checks whether or not a B-Tree is binary (every child node has no more than 2 children)?","body":"<p>This is what I tried, but it always returns false. Maybe my B-Tree is bad, but how do I solve this?</p>\n<p>Both of these methods are in the BTree class, therefore root is the starting node.</p>\n<p>I assumed that it is not necessary to check whether or not any possible children are null, since only the length of the children array matters.</p>\n<pre><code>public boolean isBinary() {\n    return isBinary(root);\n}\n\nprivate boolean isBinary(BNode node) {\n    if (node.children.length != 2)\n        return false;\n    else\n        return (true &amp;&amp; isBinary(node.children[0]) &amp;&amp; isBinary(node.children[1]));\n            \n}\n</code></pre>\n"},{"tags":["java","java-8","inputstream"],"comments":[{"owner":{"account_id":8838381,"reputation":1306,"user_id":6601614,"accept_rate":64,"display_name":"Shankha057"},"score":0,"creation_date":1574766062,"post_id":59049358,"comment_id":104339299,"body_markdown":"[`InputStream.readAllBytes`](https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#readAllBytes--) is since Java 9+","body":"<a href=\"https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#readAllBytes--\" rel=\"nofollow noreferrer\"><code>InputStream.readAllBytes</code></a> is since Java 9+"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1574789009,"post_id":59049358,"comment_id":104352115,"body_markdown":"Usually when someone wants to do this, it’s an [XY problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378).  Why do you need all of the bytes in memory?","body":"Usually when someone wants to do this, it’s an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378\">XY problem</a>.  Why do you need all of the bytes in memory?"}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1690382608,"creation_date":1574766063,"answer_id":59049461,"question_id":59049358,"body_markdown":"`InputStream.readAllBytes()` is available since java 9 not java 7...\r\n\r\nOther than that you can (no thirdparties):\r\n\r\n~~~\r\ninputStream.reset();\r\nbyte[] bytes = new byte[inputStream.available()];\r\nDataInputStream dataInputStream = new DataInputStream(inputStream);\r\ndataInputStream.readFully(bytes);\r\n~~~\r\n\r\nOr if you don&#39;t mind using thirdparties (Commons IO):\r\n\r\n~~~\r\n\r\nbyte[] bytes = IOUtils.toByteArray(is);\r\n~~~\r\n\r\nGuava also helps:\r\n\r\n~~~\r\nbyte[] bytes = ByteStreams.toByteArray(inputStream);\r\n~~~","title":"Java 1.8 and below equivalent for InputStream.readAllBytes()","body":"<p><code>InputStream.readAllBytes()</code> is available since java 9 not java 7...</p>\n<p>Other than that you can (no thirdparties):</p>\n<pre><code>inputStream.reset();\nbyte[] bytes = new byte[inputStream.available()];\nDataInputStream dataInputStream = new DataInputStream(inputStream);\ndataInputStream.readFully(bytes);\n</code></pre>\n<p>Or if you don't mind using thirdparties (Commons IO):</p>\n<pre><code>\nbyte[] bytes = IOUtils.toByteArray(is);\n</code></pre>\n<p>Guava also helps:</p>\n<pre><code>byte[] bytes = ByteStreams.toByteArray(inputStream);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8838381,"reputation":1306,"user_id":6601614,"accept_rate":64,"display_name":"Shankha057"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1574785124,"creation_date":1574766177,"answer_id":59049496,"question_id":59049358,"body_markdown":"You can use the good old [`read`][1] method like this:  \r\n  \r\n\r\n       public static byte[] readAllBytes(InputStream inputStream) throws IOException {\r\n        final int bufLen = 1024;\r\n        byte[] buf = new byte[bufLen];\r\n        int readLen;\r\n        IOException exception = null;\r\n\r\n        try {\r\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n\r\n            while ((readLen = inputStream.read(buf, 0, bufLen)) != -1)\r\n                outputStream.write(buf, 0, readLen);\r\n\r\n            return outputStream.toByteArray();\r\n        } catch (IOException e) {\r\n            exception = e;\r\n            throw e;\r\n        } finally {\r\n            if (exception == null) inputStream.close();\r\n            else try {\r\n                inputStream.close();\r\n            } catch (IOException e) {\r\n                exception.addSuppressed(e);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html","title":"Java 1.8 and below equivalent for InputStream.readAllBytes()","body":"<p>You can use the good old <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html\" rel=\"noreferrer\"><code>read</code></a> method like this:  </p>\n\n<pre><code>   public static byte[] readAllBytes(InputStream inputStream) throws IOException {\n    final int bufLen = 1024;\n    byte[] buf = new byte[bufLen];\n    int readLen;\n    IOException exception = null;\n\n    try {\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n\n        while ((readLen = inputStream.read(buf, 0, bufLen)) != -1)\n            outputStream.write(buf, 0, readLen);\n\n        return outputStream.toByteArray();\n    } catch (IOException e) {\n        exception = e;\n        throw e;\n    } finally {\n        if (exception == null) inputStream.close();\n        else try {\n            inputStream.close();\n        } catch (IOException e) {\n            exception.addSuppressed(e);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16388247,"reputation":307,"user_id":11837685,"display_name":"Flontis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21781,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"accepted_answer_id":59049461,"answer_count":2,"score":14,"last_activity_date":1690382608,"creation_date":1574765746,"question_id":59049358,"body_markdown":"I wrote a program that gets all bytes from an `InputStream` in **Java 9** with\r\n\r\n    InputStream.readAllBytes()\r\n\r\nNow, I want to export it to **Java 1.8 and below**. Is there an equivalent function? Couldn&#39;t find one.","title":"Java 1.8 and below equivalent for InputStream.readAllBytes()","body":"<p>I wrote a program that gets all bytes from an <code>InputStream</code> in <strong>Java 9</strong> with</p>\n\n<pre><code>InputStream.readAllBytes()\n</code></pre>\n\n<p>Now, I want to export it to <strong>Java 1.8 and below</strong>. Is there an equivalent function? Couldn't find one.</p>\n"},{"tags":["java","ldap","unboundid"],"answers":[{"tags":[],"owner":{"account_id":20740,"reputation":13570,"user_id":49849,"display_name":"user1686"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690382493,"creation_date":1690382493,"answer_id":76772459,"question_id":76771064,"body_markdown":"Not possible with basic LDAP &amp;ndash; &#39;Add&#39; operation results do not return any data from the server to client, only a success/error code.\r\n\r\nThere are LDAP extensions, namely the &quot;postRead&quot; control, that would allow this &amp;ndash; an add/modify operation with the postRead control would return the whole resulting entry &amp;ndash; but Active Directory does not support them. (I think only OpenLDAP does.) As you&#39;re talking about ObjectGUID rather than entryUUID, I assume you&#39;re using AD rather than OpenLDAP.\r\n\r\nSo you will need to make a separate search for the DN that you just added and retrieve the objectGUID that way.","title":"Is there way to get ObjectGUID from `LDAPResult ` object?","body":"<p>Not possible with basic LDAP – 'Add' operation results do not return any data from the server to client, only a success/error code.</p>\n<p>There are LDAP extensions, namely the &quot;postRead&quot; control, that would allow this – an add/modify operation with the postRead control would return the whole resulting entry – but Active Directory does not support them. (I think only OpenLDAP does.) As you're talking about ObjectGUID rather than entryUUID, I assume you're using AD rather than OpenLDAP.</p>\n<p>So you will need to make a separate search for the DN that you just added and retrieve the objectGUID that way.</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76772459,"answer_count":1,"score":0,"last_activity_date":1690382493,"creation_date":1690372856,"question_id":76771064,"body_markdown":"I have a code like this for user creation:\r\n\r\n    AddRequest addRequest = new AddRequest(...\r\n    ...\r\n    LDAPResult addResult = ldapConnectionPool.add(addRequest)\r\n\r\nIs there way to get [ObjectGUID][1] from `addResult` field ? \r\n\r\nOr maybe there is a way to generate this `ObjectGUID` on the client side and send as an argument ?\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows/win32/ad/using-objectguid-to-bind-to-an-object","title":"Is there way to get ObjectGUID from `LDAPResult ` object?","body":"<p>I have a code like this for user creation:</p>\n<pre><code>AddRequest addRequest = new AddRequest(...\n...\nLDAPResult addResult = ldapConnectionPool.add(addRequest)\n</code></pre>\n<p>Is there way to get <a href=\"https://learn.microsoft.com/en-us/windows/win32/ad/using-objectguid-to-bind-to-an-object\" rel=\"nofollow noreferrer\">ObjectGUID</a> from <code>addResult</code> field ?</p>\n<p>Or maybe there is a way to generate this <code>ObjectGUID</code> on the client side and send as an argument ?</p>\n"},{"tags":["java","hibernate","unit-testing","quarkus","bootstrapping"],"answers":[{"tags":[],"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690382064,"creation_date":1690381817,"answer_id":76772363,"question_id":76771938,"body_markdown":"Quarkus `dev mode` doesn&#39;t use any of files under `src/test`.&lt;br/&gt;\r\nIf you want to have entities and Hibernate available only during test just add `&lt;scope&gt;test&lt;/scope&gt;` to `io.quarkus:quarkus-hibernate-orm` dependency in pom.xml and all should be solved.\r\n","title":"Use Hibernate entities only on test classpath in Quarkus","body":"<p>Quarkus <code>dev mode</code> doesn't use any of files under <code>src/test</code>.<br/>\nIf you want to have entities and Hibernate available only during test just add <code>&lt;scope&gt;test&lt;/scope&gt;</code> to <code>io.quarkus:quarkus-hibernate-orm</code> dependency in pom.xml and all should be solved.</p>\n"}],"owner":{"account_id":302741,"reputation":3662,"user_id":611274,"display_name":"Martijn Dashorst"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76772363,"answer_count":1,"score":0,"last_activity_date":1690382064,"creation_date":1690378961,"question_id":76771938,"body_markdown":"I have a project that will do plain, rather generic SQL in the main code for merging two equivalent tenant databases (e.g. having the same schema but different data). I want to be able to test this application and generate schema&#39;s and data in the (unit) tests and use Hibernate for that, so I create a mini JPA model in `src/test/java/entities`, but when I run `quarkus dev`, Hibernate complains that it is disabled because it can&#39;t find any entities:\r\n```\r\nWARN  [io.qua.hib.orm.dep.HibernateOrmProcessor] (build-27) Hibernate ORM is disabled because no JPA entities were found\r\n```\r\n\r\nI don&#39;t want to pollute my application with these model classes that exist purely for testing purposes. Is there a way to bind the Hibernate bootstrap to the test class path?\r\n\r\nSearching for the usual terms (e.g. `hibernate quarkus test class path`) give no relevant results.","title":"Use Hibernate entities only on test classpath in Quarkus","body":"<p>I have a project that will do plain, rather generic SQL in the main code for merging two equivalent tenant databases (e.g. having the same schema but different data). I want to be able to test this application and generate schema's and data in the (unit) tests and use Hibernate for that, so I create a mini JPA model in <code>src/test/java/entities</code>, but when I run <code>quarkus dev</code>, Hibernate complains that it is disabled because it can't find any entities:</p>\n<pre><code>WARN  [io.qua.hib.orm.dep.HibernateOrmProcessor] (build-27) Hibernate ORM is disabled because no JPA entities were found\n</code></pre>\n<p>I don't want to pollute my application with these model classes that exist purely for testing purposes. Is there a way to bind the Hibernate bootstrap to the test class path?</p>\n<p>Searching for the usual terms (e.g. <code>hibernate quarkus test class path</code>) give no relevant results.</p>\n"},{"tags":["java","apache","tomcat","grails","grails-2.5"],"comments":[{"owner":{"account_id":1548991,"reputation":2937,"user_id":1441835,"accept_rate":82,"display_name":"Balkrishna"},"score":0,"creation_date":1470236989,"post_id":38730073,"comment_id":64868584,"body_markdown":"After digging into more on this issue I realized on of the following jar causing this trouble, digging more. Now tomcat is running.\n\n    spring-boot-1.3.1.RELEASE.jar                \n    spring-boot-autoconfigure-1.3.1.RELEASE.jar  \n    spring-boot-cli-1.3.1.RELEASE.jar            \n    spring-boot-loader-tools-1.3.1.RELEASE.jar","body":"After digging into more on this issue I realized on of the following jar causing this trouble, digging more. Now tomcat is running.      spring-boot-1.3.1.RELEASE.jar                     spring-boot-autoconfigure-1.3.1.RELEASE.jar       spring-boot-cli-1.3.1.RELEASE.jar                 spring-boot-loader-tools-1.3.1.RELEASE.jar"}],"answers":[{"tags":[],"owner":{"account_id":1548991,"reputation":2937,"user_id":1441835,"accept_rate":82,"display_name":"Balkrishna"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1470240272,"creation_date":1470238888,"answer_id":38748133,"question_id":38730073,"body_markdown":"Finally realized `spring-boot-cli-1.3.1.RELEASE.jar` jar causing this trouble. Which is I think downloaded as a part of following dependencies.\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.grails&lt;/groupId&gt;\r\n       &lt;artifactId&gt;gorm-hibernate4-spring-boot&lt;/artifactId&gt;\r\n       &lt;version&gt;5.0.8.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nChanging above to following resolved the issue.\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.grails&lt;/groupId&gt;\r\n       &lt;artifactId&gt;gorm-hibernate4-spring-boot&lt;/artifactId&gt;\r\n       &lt;version&gt;5.0.8.RELEASE&lt;/version&gt;\r\n       &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI think this jar is conflicting with tomcat boot process. For more information follow following threads.\r\n\r\nhttps://stackoverflow.com/questions/28102134/a-child-container-failed-during-start-java-util-concurrent-executionexception\r\n\r\nhttps://stackoverflow.com/questions/10556201/java-lang-classnotfoundexception-httpservletrequest","title":"grails run-app works but not run-war (war deployment fails)","body":"<p>Finally realized <code>spring-boot-cli-1.3.1.RELEASE.jar</code> jar causing this trouble. Which is I think downloaded as a part of following dependencies.</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.grails&lt;/groupId&gt;\n   &lt;artifactId&gt;gorm-hibernate4-spring-boot&lt;/artifactId&gt;\n   &lt;version&gt;5.0.8.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Changing above to following resolved the issue.</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.grails&lt;/groupId&gt;\n   &lt;artifactId&gt;gorm-hibernate4-spring-boot&lt;/artifactId&gt;\n   &lt;version&gt;5.0.8.RELEASE&lt;/version&gt;\n   &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I think this jar is conflicting with tomcat boot process. For more information follow following threads.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/28102134/a-child-container-failed-during-start-java-util-concurrent-executionexception\">A child container failed during start java.util.concurrent.ExecutionException</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/10556201/java-lang-classnotfoundexception-httpservletrequest\">java.lang.ClassNotFoundException: HttpServletRequest</a></p>\n"},{"tags":[],"owner":{"account_id":10807011,"reputation":2216,"user_id":15016163,"display_name":"Maicon Mauricio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690381830,"creation_date":1690381830,"answer_id":76772364,"question_id":38730073,"body_markdown":"If you encounter this error with Grails 5 and above due to the `grails-shell` dependency conflicting with `spring-boot-cli` while initializing the war in Tomcat, you can resolve this issue by making the following changes to your `build.gradle`:\r\n\r\n#### 1. Using `rootSpec.exclude`:\r\n```groovy\r\nbootWar {\r\n    rootSpec.exclude(&quot;**/spring-boot-cli-*.jar&quot;)\r\n}\r\n```\r\n\r\n#### 2. Classpath filtering:\r\n```groovy\r\nbootWar {\r\n    classpath = classpath.filter { !it.name.startsWith(&quot;spring-boot-cli&quot;) }\r\n}\r\n```\r\n\r\n#### 3. Using `configurations exclude` with a flag property:\r\n\r\nFirst, set the deploy property (`-Pdeploy`) as a flag in your build command. Then, use the following code block to exclude the problematic dependency:\r\n\r\n```groovy\r\nif (hasProperty(&#39;deploy&#39;)) {\r\n    configurations.configureEach {\r\n        exclude group: &quot;org.grails&quot;, module: &quot;grails-shell&quot;\r\n    }\r\n}\r\n```\r\n\r\nThese changes should help resolve the dependency conflict and allow your application to work smoothly with Grails 5 and above. Make sure to apply these changes to your `build.gradle` file and rebuild your project to see the effect.","title":"grails run-app works but not run-war (war deployment fails)","body":"<p>If you encounter this error with Grails 5 and above due to the <code>grails-shell</code> dependency conflicting with <code>spring-boot-cli</code> while initializing the war in Tomcat, you can resolve this issue by making the following changes to your <code>build.gradle</code>:</p>\n<h4>1. Using <code>rootSpec.exclude</code>:</h4>\n<pre><code>bootWar {\n    rootSpec.exclude(&quot;**/spring-boot-cli-*.jar&quot;)\n}\n</code></pre>\n<h4>2. Classpath filtering:</h4>\n<pre><code>bootWar {\n    classpath = classpath.filter { !it.name.startsWith(&quot;spring-boot-cli&quot;) }\n}\n</code></pre>\n<h4>3. Using <code>configurations exclude</code> with a flag property:</h4>\n<p>First, set the deploy property (<code>-Pdeploy</code>) as a flag in your build command. Then, use the following code block to exclude the problematic dependency:</p>\n<pre><code>if (hasProperty('deploy')) {\n    configurations.configureEach {\n        exclude group: &quot;org.grails&quot;, module: &quot;grails-shell&quot;\n    }\n}\n</code></pre>\n<p>These changes should help resolve the dependency conflict and allow your application to work smoothly with Grails 5 and above. Make sure to apply these changes to your <code>build.gradle</code> file and rebuild your project to see the effect.</p>\n"}],"owner":{"account_id":1548991,"reputation":2937,"user_id":1441835,"accept_rate":82,"display_name":"Balkrishna"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":557,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":38748133,"answer_count":2,"score":0,"last_activity_date":1690381830,"creation_date":1470170481,"question_id":38730073,"body_markdown":"I am seeing the following error message while trying to execute `grails run-war`. It works fine with `grails run-app`. Later I realized it is not only related to grails. Even if I create war and deploy it on tomcat, I am seeing the same error message. But not sure how to debug more. Looks like some kinds of conflict with tomcat default jar.\r\n\r\n```\r\nGrails version: 2.5.2\r\nTomcat Version: `build &quot;:tomcat:7.0.55.3&quot;`\r\n|Done creating WAR target/ROOT.war\r\n|Running Grails application\r\n    A child container failed during start\r\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[/sms]]\r\n\tat java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:192)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:816)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1575)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1565)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[/sms]]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\r\n\t... 6 more\r\n    Caused by: java.lang.NullPointerException\r\n\tat org.springframework.boot.cli.app.SpringApplicationWebApplicationInitializer.getSources(SpringApplicationWebApplicationInitializer.java:62)\r\n\tat org.springframework.boot.cli.app.SpringApplicationWebApplicationInitializer.onStartup(SpringApplicationWebApplicationInitializer.java:48)\r\n\tat org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:175)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5479)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n\t... 6 more\r\n    A child container failed during start\r\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost]]\r\n\tat java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:192)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:300)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:739)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n\tat org.apache.catalina.startup.Tomcat.start(Tomcat.java:341)\r\n\tat org.grails.plugins.tomcat.fork.TomcatWarRunner.doStart(TomcatWarRunner.groovy:114)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:210)\r\n\tat org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:59)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:52)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:154)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:182)\r\n\tat org.grails.plugins.tomcat.TomcatServer.start(TomcatServer.groovy:141)\r\n\tat grails.web.container.EmbeddableServer$start.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:133)\r\n\tat org.grails.plugins.tomcat.fork.ForkedTomcatServer.runInternal(ForkedTomcatServer.groovy:86)\r\n\tat org.grails.plugins.tomcat.fork.ForkedTomcatServer.run(ForkedTomcatServer.groovy:66)\r\n\tat org.grails.plugins.tomcat.fork.ForkedTomcatServer$run.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)\r\n\tat org.grails.plugins.tomcat.fork.ForkedTomcatServer.main(ForkedTomcatServer.groovy:60)\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost]]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1575)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1565)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:816)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n\t... 6 more\r\n    | Error Error loading Tomcat: Failed to start component [StandardServer[-1]] (Use --stacktrace to see the full trace)\r\n    Error |\r\n    Forked Grails VM exited with error\r\n```\r\n","title":"grails run-app works but not run-war (war deployment fails)","body":"<p>I am seeing the following error message while trying to execute <code>grails run-war</code>. It works fine with <code>grails run-app</code>. Later I realized it is not only related to grails. Even if I create war and deploy it on tomcat, I am seeing the same error message. But not sure how to debug more. Looks like some kinds of conflict with tomcat default jar.</p>\n<pre><code>Grails version: 2.5.2\nTomcat Version: `build &quot;:tomcat:7.0.55.3&quot;`\n|Done creating WAR target/ROOT.war\n|Running Grails application\n    A child container failed during start\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[/sms]]\n    at java.util.concurrent.FutureTask.report(FutureTask.java:122)\n    at java.util.concurrent.FutureTask.get(FutureTask.java:192)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:816)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1575)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1565)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[/sms]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\n    ... 6 more\n    Caused by: java.lang.NullPointerException\n    at org.springframework.boot.cli.app.SpringApplicationWebApplicationInitializer.getSources(SpringApplicationWebApplicationInitializer.java:62)\n    at org.springframework.boot.cli.app.SpringApplicationWebApplicationInitializer.onStartup(SpringApplicationWebApplicationInitializer.java:48)\n    at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:175)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5479)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 6 more\n    A child container failed during start\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost]]\n    at java.util.concurrent.FutureTask.report(FutureTask.java:122)\n    at java.util.concurrent.FutureTask.get(FutureTask.java:192)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:300)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:739)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:341)\n    at org.grails.plugins.tomcat.fork.TomcatWarRunner.doStart(TomcatWarRunner.groovy:114)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:210)\n    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:59)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:52)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:154)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:182)\n    at org.grails.plugins.tomcat.TomcatServer.start(TomcatServer.groovy:141)\n    at grails.web.container.EmbeddableServer$start.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:133)\n    at org.grails.plugins.tomcat.fork.ForkedTomcatServer.runInternal(ForkedTomcatServer.groovy:86)\n    at org.grails.plugins.tomcat.fork.ForkedTomcatServer.run(ForkedTomcatServer.groovy:66)\n    at org.grails.plugins.tomcat.fork.ForkedTomcatServer$run.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)\n    at org.grails.plugins.tomcat.fork.ForkedTomcatServer.main(ForkedTomcatServer.groovy:60)\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1575)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1565)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n    Caused by: org.apache.catalina.LifecycleException: A child container failed during start\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:816)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 6 more\n    | Error Error loading Tomcat: Failed to start component [StandardServer[-1]] (Use --stacktrace to see the full trace)\n    Error |\n    Forked Grails VM exited with error\n</code></pre>\n"},{"tags":["java","linux","maven","jenkins","jenkins-pipeline"],"comments":[{"owner":{"account_id":148947,"reputation":7935,"user_id":361089,"accept_rate":63,"display_name":"Technext"},"score":0,"creation_date":1567654199,"post_id":57797759,"comment_id":102028757,"body_markdown":"Check this out: https://stackoverflow.com/questions/57692448/using-multiple-jdks-in-single-scripted-pipeline/57696917#57696917","body":"Check this out: <a href=\"https://stackoverflow.com/questions/57692448/using-multiple-jdks-in-single-scripted-pipeline/57696917#57696917\" title=\"using multiple jdks in single scripted pipeline\">stackoverflow.com/questions/57692448/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1580301024,"creation_date":1567654082,"answer_id":57798052,"question_id":57797759,"body_markdown":"To configure Java home for a Jenkins job you need the following\r\n\r\n1. Configure a JDK in Jenkins Global Tools. Go to `Manage -Jenkins -&gt; Global Tool Configuration` in JDK section add a JDK.\r\n\r\n   [![enter image description here][1]][1]\r\n    \r\n   **Note** JAVA_HOME should be a valid JDK not a JRE.\r\n2. You can set the JAVA_HOME using the following snippet.\r\n       ```groovy\r\n       env.JAVA_HOME=&quot;${tool &#39;jdk1.8.0_181&#39;}&quot;\r\n       ```\r\n\r\nThis should use the `/jdks/jdk1.8.0_181` as `JAVA_HOME` \r\n\r\n  [1]: https://i.stack.imgur.com/se5Lz.jpg","title":"Jenkins maven has other java version. How to solve it?","body":"<p>To configure Java home for a Jenkins job you need the following</p>\n\n<ol>\n<li><p>Configure a JDK in Jenkins Global Tools. Go to <code>Manage -Jenkins -&gt; Global Tool Configuration</code> in JDK section add a JDK.</p>\n\n<p><a href=\"https://i.stack.imgur.com/se5Lz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/se5Lz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Note</strong> JAVA_HOME should be a valid JDK not a JRE.</p></li>\n<li>You can set the JAVA_HOME using the following snippet.\n\n<pre><code>env.JAVA_HOME=\"${tool 'jdk1.8.0_181'}\"\n</code></pre></li>\n</ol>\n\n<p>This should use the <code>/jdks/jdk1.8.0_181</code> as <code>JAVA_HOME</code> </p>\n"},{"tags":[],"owner":{"account_id":5733229,"reputation":546,"user_id":4528146,"display_name":"Tasos Zervos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690381191,"creation_date":1690381191,"answer_id":76772263,"question_id":57797759,"body_markdown":"To expand further on the answer by @seenukarthi, this shows how to use it in a scripted pipeline:\r\n```\r\nnode {\r\n  jdk = tool name: &#39;JDK17&#39;\r\n  env.JAVA_HOME = &quot;${jdk}&quot;\r\n\r\n  echo &quot;jdk installation path is: ${jdk}&quot;\r\n  [...]\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.cloudbees.com/docs/cloudbees-ci-kb/latest/client-and-managed-controllers/how-to-specify-a-specific-jdk-in-pipeline","title":"Jenkins maven has other java version. How to solve it?","body":"<p>To expand further on the answer by @seenukarthi, this shows how to use it in a scripted pipeline:</p>\n<pre><code>node {\n  jdk = tool name: 'JDK17'\n  env.JAVA_HOME = &quot;${jdk}&quot;\n\n  echo &quot;jdk installation path is: ${jdk}&quot;\n  [...]\n}\n</code></pre>\n"}],"owner":{"account_id":14322281,"reputation":467,"user_id":10345277,"display_name":"윤현구"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3271,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":57798052,"answer_count":2,"score":0,"last_activity_date":1690381191,"creation_date":1567651292,"question_id":57797759,"body_markdown":"I&#39;m writing a new Jenkinsfile to work with my pipeline, and I&#39;m trying to build with Maven.\r\n\r\nThe Jenkinsfile I wrote looks like this:\r\n```\r\nnode {\r\n    stage(&#39;Mvn clean install&#39;) {\r\n        echo &#39;Start to : mvn clean install&#39;\r\n        def mvnHome = tool name: &#39;mvn_3.6.1&#39;, type: &#39;maven&#39;\r\n        sh &quot;${mvnHome}/bin/mvn -version&quot;\r\n        sh &quot;${mvnHome}/bin/mvn clean install -P sonar&quot;\r\n    }\r\n}\r\n```\r\n\r\nThe errors that occurred during the build are:\r\n```\r\n[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ jmsight-management ---\r\n[INFO] Changes detected - recompiling the module!\r\n[INFO] Compiling 119 source files to /var/lib/jenkins/workspace/jmsight-management-pipeline/target/classes\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  2.009 s\r\n[INFO] Finished at: 2019-09-04T17:32:13+09:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project jmsight-management: Fatal error compiling: invalid target release: 11 -&gt; [Help 1]\r\n```\r\n\r\n\r\nThe point is that the results of running ```mvn -version``` on the server and on Jenkins are different.\r\n\r\nCheck out my Jenkins console output.\r\n\r\n```\r\n[Pipeline] }\r\n[Pipeline] // stage\r\n[Pipeline] stage\r\n[Pipeline] { (Mvn clean install)\r\n[Pipeline] echo\r\nStart to : mvn clean install\r\n[Pipeline] tool\r\n[Pipeline] sh\r\n+ /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/mvn_3.6.1/bin/mvn -version\r\nApache Maven 3.6.1 (d66c9c0b3152b2e69ee9bac180bb8fcc8e6af555; 2019-04-05T04:00:29+09:00)\r\nMaven home: /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/mvn_3.6.1\r\nJava version: 1.8.0_222, vendor: Oracle Corporation, runtime: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.222.b10-0.el7_6.x86_64/jre\r\nDefault locale: ko_KR, platform encoding: UTF-8\r\nOS name: &quot;linux&quot;, version: &quot;3.10.0-957.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\r\n```\r\nAnd when I run ```mvn -version``` directly on the server.\r\n```\r\n[jmuser@cicd-vm-dev01 usr]$ /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/mvn_3.6.1/bin/mvn -version\r\nApache Maven 3.6.1 (d66c9c0b3152b2e69ee9bac180bb8fcc8e6af555; 2019-04-05T04:00:29+09:00)\r\nMaven home: /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/mvn_3.6.1\r\nJava version: 11.0.4, vendor: Oracle Corporation, runtime: /usr/lib/jvm/java-11-openjdk-11.0.4.11-0.el7_6.x86_64\r\nDefault locale: ko_KR, platform encoding: UTF-8\r\nOS name: &quot;linux&quot;, version: &quot;3.10.0-957.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\r\n```\r\n\r\n\r\nThe java version is displaying differently. What am I doing wrong?\r\n","title":"Jenkins maven has other java version. How to solve it?","body":"<p>I'm writing a new Jenkinsfile to work with my pipeline, and I'm trying to build with Maven.</p>\n\n<p>The Jenkinsfile I wrote looks like this:</p>\n\n<pre><code>node {\n    stage('Mvn clean install') {\n        echo 'Start to : mvn clean install'\n        def mvnHome = tool name: 'mvn_3.6.1', type: 'maven'\n        sh \"${mvnHome}/bin/mvn -version\"\n        sh \"${mvnHome}/bin/mvn clean install -P sonar\"\n    }\n}\n</code></pre>\n\n<p>The errors that occurred during the build are:</p>\n\n<pre><code>[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ jmsight-management ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 119 source files to /var/lib/jenkins/workspace/jmsight-management-pipeline/target/classes\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  2.009 s\n[INFO] Finished at: 2019-09-04T17:32:13+09:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project jmsight-management: Fatal error compiling: invalid target release: 11 -&gt; [Help 1]\n</code></pre>\n\n<p>The point is that the results of running <code>mvn -version</code> on the server and on Jenkins are different.</p>\n\n<p>Check out my Jenkins console output.</p>\n\n<pre><code>[Pipeline] }\n[Pipeline] // stage\n[Pipeline] stage\n[Pipeline] { (Mvn clean install)\n[Pipeline] echo\nStart to : mvn clean install\n[Pipeline] tool\n[Pipeline] sh\n+ /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/mvn_3.6.1/bin/mvn -version\nApache Maven 3.6.1 (d66c9c0b3152b2e69ee9bac180bb8fcc8e6af555; 2019-04-05T04:00:29+09:00)\nMaven home: /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/mvn_3.6.1\nJava version: 1.8.0_222, vendor: Oracle Corporation, runtime: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.222.b10-0.el7_6.x86_64/jre\nDefault locale: ko_KR, platform encoding: UTF-8\nOS name: \"linux\", version: \"3.10.0-957.el7.x86_64\", arch: \"amd64\", family: \"unix\"\n</code></pre>\n\n<p>And when I run <code>mvn -version</code> directly on the server.</p>\n\n<pre><code>[jmuser@cicd-vm-dev01 usr]$ /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/mvn_3.6.1/bin/mvn -version\nApache Maven 3.6.1 (d66c9c0b3152b2e69ee9bac180bb8fcc8e6af555; 2019-04-05T04:00:29+09:00)\nMaven home: /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/mvn_3.6.1\nJava version: 11.0.4, vendor: Oracle Corporation, runtime: /usr/lib/jvm/java-11-openjdk-11.0.4.11-0.el7_6.x86_64\nDefault locale: ko_KR, platform encoding: UTF-8\nOS name: \"linux\", version: \"3.10.0-957.el7.x86_64\", arch: \"amd64\", family: \"unix\"\n</code></pre>\n\n<p>The java version is displaying differently. What am I doing wrong?</p>\n"},{"tags":["java","spring-boot","log4j","logback","spring-logback"],"owner":{"account_id":3761893,"reputation":193,"user_id":3126580,"display_name":"hehe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690381132,"creation_date":1690381132,"question_id":76772253,"body_markdown":"my java project use log4j 1.x，and it&#39;s a strong dependency. \r\n\r\nmy log4j configuration like this:\r\n\r\n```\r\nlog4j.rootLogger=INFO, Console\r\n\r\nLOG_PATH=logs\r\n#log4j.appender.Console=org.apache.log4j.ConsoleAppender\r\nlog4j.appender.Console=org.apache.log4j.DailyRollingFileAppender\r\nlog4j.appender.Console.DatePattern=&#39;.&#39;yyyy-MM-dd\r\nlog4j.appender.Console.File=${LOG_PATH}/console.log\r\nlog4j.appender.Console.layout=org.apache.log4j.EnhancedPatternLayout\r\nlog4j.appender.Console.layout.ConversionPattern=%d{yyyy/MM/dd HH:mm:ss.SSS Z} %p [%c{1}] [Thread-%t] %m%n\r\n\r\n```\r\n\r\n\r\nI have an other module `task-exec` use logback SiftingAppender to print log to different files. and I add `task-exec` module to my project, it work will.\r\n\r\nmy logback configuration like this:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;configuration debug=&quot;false&quot; scan=&quot;true&quot; scanPeriod=&quot;60 seconds&quot;&gt;\r\n    \r\n    &lt;property name=&quot;CHARSET&quot; value=&quot;UTF-8&quot;/&gt;\r\n    \r\n    &lt;property name=&quot;PATTERN_DEF&quot; value=&quot;[%d{yyyy-MM-dd HH:mm:ss SSS}] [%-5p] [%thread] [%logger{50}] [%M:%line] - %m%n&quot;/&gt;\r\n    \r\n    &lt;appender name=&quot;console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;charset&gt;${CHARSET}&lt;/charset&gt;\r\n            &lt;pattern&gt;${PATTERN_DEF}&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n        &lt;target&gt;System.out&lt;/target&gt; &lt;!-- System.out|System.err --&gt;\r\n    &lt;/appender&gt;\r\n    &lt;appender name=&quot;log_classify&quot; class=&quot;ch.qos.logback.classic.sift.SiftingAppender&quot;&gt;\r\n\r\n        &lt;discriminator&gt;\r\n            &lt;key&gt;MDC_LOG_FILE&lt;/key&gt; \r\n            &lt;defaultValue&gt;other.log&lt;/defaultValue&gt; \r\n        &lt;/discriminator&gt;\r\n        &lt;sift&gt;\r\n           &lt;appender name=&quot;${MDC_LOG_FILE}&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n                &lt;file&gt;${MDC_LOG_FILE}&lt;/file&gt;\r\n                &lt;maxFileSize&gt;20MB&lt;/maxFileSize&gt;\r\n                &lt;encoder&gt;\r\n                    &lt;charset&gt;${CHARSET}&lt;/charset&gt;\r\n                    &lt;pattern&gt;${PATTERN_DEF}&lt;/pattern&gt;\r\n                &lt;/encoder&gt;\r\n            &lt;/appender&gt;\r\n        &lt;/sift&gt;\r\n    &lt;/appender&gt;\r\n    &lt;logger name=&quot;mdcTaskLogger&quot; level=&quot;info&quot; additivity=&quot;true&quot;&gt;\r\n        &lt;appender-ref ref=&quot;log_classify&quot;/&gt;\r\n    &lt;/logger&gt;\r\n&lt;/configuration&gt;\r\n\r\n\r\n```\r\n\r\n\r\n\r\nnow, I want to add spring-boot-starter-data-jpa into the project. and I found that spring bean&#39;s logs will not output, only print a springboot banner.\r\n\r\nI modify spring properties file like application.properties, but it is not work.\r\n\r\nI add logback-spring.xml into jvm classpath, but it is also not work.\r\n\r\nI add system property -Dlogback.debug=true, it only print `task-exec` load configuration, nothing about springboot.\r\n\r\n```\r\n21:44:50,299 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@301434fb - URL [jar:file:/usr/lib/task-exec-1.3.33-SNAPSHOT.jar!/logback.xml] is not of type file\r\n21:44:50,305 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - Will scan for changes in [jar:file:/usr/lib/task-exec-1.3.33-SNAPSHOT.jar!/logback.xml]\r\n21:44:50,306 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - Setting ReconfigureOnChangeTask scanning period to 1 minutes\r\n21:44:50,306 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]\r\n21:44:50,306 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [console]\r\n21:44:50,306 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property\r\n21:44:50,307 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]\r\n21:44:50,308 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [rolling_file]\r\n21:44:50,308 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1231160694 - No compression will be used\r\n```\r\n\r\n\r\n\r\nCan logback and log4j really not coexist?\r\n\r\n\r\nhow can I modify the configuration, can make them coexist?\r\n\r\n\r\nmy springboot version 2.7.13, logback version 1.2.12\r\n\r\nmy `task-exec` use logback version is also 1.2.12\r\n\r\nmy main project log4j version is 1.2.17\r\n","title":"How to Coexist Logback and Log4j in a Java Project","body":"<p>my java project use log4j 1.x，and it's a strong dependency.</p>\n<p>my log4j configuration like this:</p>\n<pre><code>log4j.rootLogger=INFO, Console\n\nLOG_PATH=logs\n#log4j.appender.Console=org.apache.log4j.ConsoleAppender\nlog4j.appender.Console=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.Console.DatePattern='.'yyyy-MM-dd\nlog4j.appender.Console.File=${LOG_PATH}/console.log\nlog4j.appender.Console.layout=org.apache.log4j.EnhancedPatternLayout\nlog4j.appender.Console.layout.ConversionPattern=%d{yyyy/MM/dd HH:mm:ss.SSS Z} %p [%c{1}] [Thread-%t] %m%n\n\n</code></pre>\n<p>I have an other module <code>task-exec</code> use logback SiftingAppender to print log to different files. and I add <code>task-exec</code> module to my project, it work will.</p>\n<p>my logback configuration like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration debug=&quot;false&quot; scan=&quot;true&quot; scanPeriod=&quot;60 seconds&quot;&gt;\n    \n    &lt;property name=&quot;CHARSET&quot; value=&quot;UTF-8&quot;/&gt;\n    \n    &lt;property name=&quot;PATTERN_DEF&quot; value=&quot;[%d{yyyy-MM-dd HH:mm:ss SSS}] [%-5p] [%thread] [%logger{50}] [%M:%line] - %m%n&quot;/&gt;\n    \n    &lt;appender name=&quot;console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder&gt;\n            &lt;charset&gt;${CHARSET}&lt;/charset&gt;\n            &lt;pattern&gt;${PATTERN_DEF}&lt;/pattern&gt;\n        &lt;/encoder&gt;\n        &lt;target&gt;System.out&lt;/target&gt; &lt;!-- System.out|System.err --&gt;\n    &lt;/appender&gt;\n    &lt;appender name=&quot;log_classify&quot; class=&quot;ch.qos.logback.classic.sift.SiftingAppender&quot;&gt;\n\n        &lt;discriminator&gt;\n            &lt;key&gt;MDC_LOG_FILE&lt;/key&gt; \n            &lt;defaultValue&gt;other.log&lt;/defaultValue&gt; \n        &lt;/discriminator&gt;\n        &lt;sift&gt;\n           &lt;appender name=&quot;${MDC_LOG_FILE}&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\n                &lt;file&gt;${MDC_LOG_FILE}&lt;/file&gt;\n                &lt;maxFileSize&gt;20MB&lt;/maxFileSize&gt;\n                &lt;encoder&gt;\n                    &lt;charset&gt;${CHARSET}&lt;/charset&gt;\n                    &lt;pattern&gt;${PATTERN_DEF}&lt;/pattern&gt;\n                &lt;/encoder&gt;\n            &lt;/appender&gt;\n        &lt;/sift&gt;\n    &lt;/appender&gt;\n    &lt;logger name=&quot;mdcTaskLogger&quot; level=&quot;info&quot; additivity=&quot;true&quot;&gt;\n        &lt;appender-ref ref=&quot;log_classify&quot;/&gt;\n    &lt;/logger&gt;\n&lt;/configuration&gt;\n\n\n</code></pre>\n<p>now, I want to add spring-boot-starter-data-jpa into the project. and I found that spring bean's logs will not output, only print a springboot banner.</p>\n<p>I modify spring properties file like application.properties, but it is not work.</p>\n<p>I add logback-spring.xml into jvm classpath, but it is also not work.</p>\n<p>I add system property -Dlogback.debug=true, it only print <code>task-exec</code> load configuration, nothing about springboot.</p>\n<pre><code>21:44:50,299 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@301434fb - URL [jar:file:/usr/lib/task-exec-1.3.33-SNAPSHOT.jar!/logback.xml] is not of type file\n21:44:50,305 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - Will scan for changes in [jar:file:/usr/lib/task-exec-1.3.33-SNAPSHOT.jar!/logback.xml]\n21:44:50,306 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - Setting ReconfigureOnChangeTask scanning period to 1 minutes\n21:44:50,306 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]\n21:44:50,306 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [console]\n21:44:50,306 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property\n21:44:50,307 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]\n21:44:50,308 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [rolling_file]\n21:44:50,308 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1231160694 - No compression will be used\n</code></pre>\n<p>Can logback and log4j really not coexist?</p>\n<p>how can I modify the configuration, can make them coexist?</p>\n<p>my springboot version 2.7.13, logback version 1.2.12</p>\n<p>my <code>task-exec</code> use logback version is also 1.2.12</p>\n<p>my main project log4j version is 1.2.17</p>\n"},{"tags":["java","ldap","identifier","unboundid-ldap-sdk","dn"],"answers":[{"tags":[],"owner":{"account_id":20740,"reputation":13570,"user_id":49849,"display_name":"user1686"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690380765,"creation_date":1690380765,"answer_id":76772205,"question_id":76769514,"body_markdown":"That looks fine; performance shouldn&#39;t be an issue.\r\n\r\n 1. LDAP does not actually have a &quot;get entry by DN&quot; operation in the first place &amp;ndash; under the hood, your LDAP client emulates it by [performing a search][1] with SearchScope.BASE and with the DN as base. So you&#39;re not changing anything in that regard; you had a search returning 1 entry previously, and you have a search returning 1 entry now.\r\n\r\n 2. The objectGUID attribute is indexed &amp;ndash; the server will optimize the search query into a fast index lookup and will instantly retrieve the matching entry. It doesn&#39;t need to actually scan the entire subtree for this.\r\n\r\n[1]: https://github.com/pingidentity/ldapsdk/blob/master/src/com/unboundid/ldap/sdk/LDAPConnection.java#L1898","title":"Is there way to use ObjectGuid instead of dn in ldap api?","body":"<p>That looks fine; performance shouldn't be an issue.</p>\n<ol>\n<li><p>LDAP does not actually have a &quot;get entry by DN&quot; operation in the first place – under the hood, your LDAP client emulates it by <a href=\"https://github.com/pingidentity/ldapsdk/blob/master/src/com/unboundid/ldap/sdk/LDAPConnection.java#L1898\" rel=\"nofollow noreferrer\">performing a search</a> with SearchScope.BASE and with the DN as base. So you're not changing anything in that regard; you had a search returning 1 entry previously, and you have a search returning 1 entry now.</p>\n</li>\n<li><p>The objectGUID attribute is indexed – the server will optimize the search query into a fast index lookup and will instantly retrieve the matching entry. It doesn't need to actually scan the entire subtree for this.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76772205,"answer_count":1,"score":2,"last_activity_date":1690380765,"creation_date":1690361618,"question_id":76769514,"body_markdown":"We have an application which use ldap protocol. We use unboundId library for that \r\n\r\n    // ldap\r\n    implementation(&quot;com.unboundid:unboundid-ldapsdk:6.0.9&quot;)\r\n\r\n \r\nWe found out that most api calls use `dn` as argument. \r\n\r\nFor example:\r\n\r\n    ldapConnectionPool.getEntry(dn)\r\n\r\nBut we also found out that `dn` is not immutable identifier (it could be changed if we move the object from one location to another one or if we rename it (change CN) but it is not good to have mutable identifiers for many reasons. So we started to look for immutable identifier and found out [objectGuid][1].\r\n\r\nBut the problem here that I can&#39;t find any method which allow me to \r\n 1. Get entry by objectGuid\r\n\r\nI&#39;ve found only this way but I am not sure about performance:\r\n\r\n    SearchRequest searchRequest = new SearchRequest(\r\n                    searchBase, \r\n                    SearchScope.SUB, \r\n                    Filter.createEqualityFilter(&quot;objectGuid&quot;, objectGuid)\r\n            );\r\n\r\n\r\n 2. Extract `objectGuid` from creation request:\r\n\r\n```\r\n    LDAPResult addResult = ldapConnectionPool.add(addRequest)\r\n```\r\n\r\nSo my question is:\r\n\r\nIs it a good idea to use `objectGuid` as identifier in our application or not ? performance matters.\r\n\r\nFrom the first glance it looks really attractive but looks like library is not designed for that. What do you think ?\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows/win32/ad/using-objectguid-to-bind-to-an-object\r\n\r\n\r\n\r\n","title":"Is there way to use ObjectGuid instead of dn in ldap api?","body":"<p>We have an application which use ldap protocol. We use unboundId library for that</p>\n<pre><code>// ldap\nimplementation(&quot;com.unboundid:unboundid-ldapsdk:6.0.9&quot;)\n</code></pre>\n<p>We found out that most api calls use <code>dn</code> as argument.</p>\n<p>For example:</p>\n<pre><code>ldapConnectionPool.getEntry(dn)\n</code></pre>\n<p>But we also found out that <code>dn</code> is not immutable identifier (it could be changed if we move the object from one location to another one or if we rename it (change CN) but it is not good to have mutable identifiers for many reasons. So we started to look for immutable identifier and found out <a href=\"https://learn.microsoft.com/en-us/windows/win32/ad/using-objectguid-to-bind-to-an-object\" rel=\"nofollow noreferrer\">objectGuid</a>.</p>\n<p>But the problem here that I can't find any method which allow me to</p>\n<ol>\n<li>Get entry by objectGuid</li>\n</ol>\n<p>I've found only this way but I am not sure about performance:</p>\n<pre><code>SearchRequest searchRequest = new SearchRequest(\n                searchBase, \n                SearchScope.SUB, \n                Filter.createEqualityFilter(&quot;objectGuid&quot;, objectGuid)\n        );\n</code></pre>\n<ol start=\"2\">\n<li>Extract <code>objectGuid</code> from creation request:</li>\n</ol>\n<pre><code>    LDAPResult addResult = ldapConnectionPool.add(addRequest)\n</code></pre>\n<p>So my question is:</p>\n<p>Is it a good idea to use <code>objectGuid</code> as identifier in our application or not ? performance matters.</p>\n<p>From the first glance it looks really attractive but looks like library is not designed for that. What do you think ?</p>\n"},{"tags":["java","apache-flink","mqtt","flink-streaming"],"comments":[{"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1690171561,"post_id":76751203,"comment_id":135310898,"body_markdown":"What&#39;s deprecated are the cases where keyBy and maxBy that have to use reflection. E.g., instead of `keyBy(&quot;id&quot;)` use `keyBy(event -&gt; event.id)`.","body":"What&#39;s deprecated are the cases where keyBy and maxBy that have to use reflection. E.g., instead of <code>keyBy(&quot;id&quot;)</code> use <code>keyBy(event -&gt; event.id)</code>."},{"owner":{"account_id":24792239,"reputation":413,"user_id":18675173,"display_name":"lant"},"score":0,"creation_date":1690172038,"post_id":76751203,"comment_id":135310939,"body_markdown":"Before you want to implement your function, it is recommended that you learn how to use various operators","body":"Before you want to implement your function, it is recommended that you learn how to use various operators"}],"answers":[{"tags":[],"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690221242,"creation_date":1690171999,"answer_id":76751367,"question_id":76751203,"body_markdown":"The way that you&#39;ve tried to structure your application isn&#39;t going to work. As a stream processor, Flink is designed to process unbounded streams of data, and to process each event once. There&#39;s no way to determine the max and min elements of the stream without pre-processing the entire stream (whatever that means for an unbounded stream), so excluding the outliers is tricky business.\r\n\r\nYou could, instead, keep track of the max and min _seen so far in the input stream_, but excluding those won&#39;t make sense either.\r\n\r\nFor this particular application, perhaps you&#39;d rather execute it in batch mode, in which case these issues will go away, and then the expected result will be well defined. ","title":"Flink method undefined for certain type","body":"<p>The way that you've tried to structure your application isn't going to work. As a stream processor, Flink is designed to process unbounded streams of data, and to process each event once. There's no way to determine the max and min elements of the stream without pre-processing the entire stream (whatever that means for an unbounded stream), so excluding the outliers is tricky business.</p>\n<p>You could, instead, keep track of the max and min <em>seen so far in the input stream</em>, but excluding those won't make sense either.</p>\n<p>For this particular application, perhaps you'd rather execute it in batch mode, in which case these issues will go away, and then the expected result will be well defined.</p>\n"},{"tags":[],"owner":{"account_id":82425,"reputation":8270,"user_id":231762,"display_name":"kkrugler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690380385,"creation_date":1690380385,"answer_id":76772147,"question_id":76751203,"body_markdown":"As David noted, you can&#39;t find the min or max in an unbounded stream. If you must run this as a streaming job, you can use [Apache DataSketches][1] to calculate a streaming/approximate quantile, and exclude values that are out-of-bounds. There is the boot-strapping problem, where you&#39;d want to process and accumulate some number of values before you start filtering, to avoid false positives.\r\n\r\n\r\n  [1]: https://datasketches.apache.org/","title":"Flink method undefined for certain type","body":"<p>As David noted, you can't find the min or max in an unbounded stream. If you must run this as a streaming job, you can use <a href=\"https://datasketches.apache.org/\" rel=\"nofollow noreferrer\">Apache DataSketches</a> to calculate a streaming/approximate quantile, and exclude values that are out-of-bounds. There is the boot-strapping problem, where you'd want to process and accumulate some number of values before you start filtering, to avoid false positives.</p>\n"}],"owner":{"account_id":26978112,"reputation":1,"user_id":20542929,"display_name":"Reungu Ju"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690380385,"creation_date":1690168703,"question_id":76751203,"body_markdown":"I am a super newbie learning Apache Flink recently, I would like to build a program that achieves:\r\n\r\nWhen I boardcast a string of number for example: 39 40 35 12 36 36 37 52 in Mqtt.fx (configuration code not shown, works fine), the java program I wrote below can exclude the outliers, here is 12 and 52, and then calculate the average number, this is my code:\r\n\r\n```\r\npublic static void main(String[] args) throws Exception {\r\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n        env.setParallelism(1);\r\n\r\n        DataStream&lt;String&gt; stream = env.addSource(new MqttConsumer());\r\n\r\n        DataStream&lt;Integer&gt; dataStream = stream.flatMap(new FlatMapFunction&lt;String, Integer&gt;() {\r\n            @Override\r\n            public void flatMap(String value, Collector&lt;Integer&gt; out) throws Exception {\r\n                String[] str = value.split(&quot; &quot;);\r\n                int temperature = Integer.parseInt(str[1]);\r\n                out.collect(temperature);\r\n            }\r\n        }).setParallelism(1);\r\n\r\n        \r\n\r\n        DataStream&lt;Integer&gt; filteredDataStream = dataStream\r\n                .filter(temperature -&gt; temperature != findMaxTemperature(dataStream) &amp;&amp; temperature != findMinTemperature(dataStream))\r\n                .setParallelism(1);\r\n\r\n        DataStream&lt;Double&gt; averageDataStream = filteredDataStream\r\n                .map(temperature -&gt; (double) temperature)\r\n                .reduce(( t1,  t2) -&gt;  t1 + t2)\r\n                .map(sum -&gt; sum / filteredDataStream.count())\r\n                .setParallelism(1);\r\n\r\n        averageDataStream.print();\r\n        env.execute();\r\n    }\r\n\r\n    private static int findMaxTemperature(DataStream&lt;Integer&gt; dataStream) throws Exception {\r\n        return dataStream.max(1).collect().get(0).getField(0);\r\n    }\r\n\r\n    private static int findMinTemperature(DataStream&lt;Integer&gt; dataStream) throws Exception {\r\n        return dataStream.min(1).collect().get(0).getField(0);\r\n    }\r\n```\r\n\r\nI also imported these pacakges:\r\n\r\n```\r\nimport org.apache.flink.api.common.functions.FlatMapFunction;\r\nimport org.apache.flink.api.java.tuple.Tuple2;\r\nimport org.apache.flink.streaming.api.datastream.DataStream;\r\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\r\nimport org.apache.flink.util.Collector;\r\n``` \r\n\r\nHowever, under `reduce`, there is an error: `The method reduce((&lt;no type&gt; t1, &lt;no type&gt; t2) -&gt; {}) is undefined for the type SingleOutputStreamOperator&lt;Double&gt;`\r\n\r\nUnder `min` and `max`, it says: `The method max(int) is undefined for the type DataStream&lt;Integer&gt;`. \r\n\r\nIt seems to be some type converting problem, but I tried to revise it, I also tried to use `keyBy()`, which is said to be deprecated, and `maxBy()`, which also doesn&#39;t work. Can anyone help me with that? ","title":"Flink method undefined for certain type","body":"<p>I am a super newbie learning Apache Flink recently, I would like to build a program that achieves:</p>\n<p>When I boardcast a string of number for example: 39 40 35 12 36 36 37 52 in Mqtt.fx (configuration code not shown, works fine), the java program I wrote below can exclude the outliers, here is 12 and 52, and then calculate the average number, this is my code:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        env.setParallelism(1);\n\n        DataStream&lt;String&gt; stream = env.addSource(new MqttConsumer());\n\n        DataStream&lt;Integer&gt; dataStream = stream.flatMap(new FlatMapFunction&lt;String, Integer&gt;() {\n            @Override\n            public void flatMap(String value, Collector&lt;Integer&gt; out) throws Exception {\n                String[] str = value.split(&quot; &quot;);\n                int temperature = Integer.parseInt(str[1]);\n                out.collect(temperature);\n            }\n        }).setParallelism(1);\n\n        \n\n        DataStream&lt;Integer&gt; filteredDataStream = dataStream\n                .filter(temperature -&gt; temperature != findMaxTemperature(dataStream) &amp;&amp; temperature != findMinTemperature(dataStream))\n                .setParallelism(1);\n\n        DataStream&lt;Double&gt; averageDataStream = filteredDataStream\n                .map(temperature -&gt; (double) temperature)\n                .reduce(( t1,  t2) -&gt;  t1 + t2)\n                .map(sum -&gt; sum / filteredDataStream.count())\n                .setParallelism(1);\n\n        averageDataStream.print();\n        env.execute();\n    }\n\n    private static int findMaxTemperature(DataStream&lt;Integer&gt; dataStream) throws Exception {\n        return dataStream.max(1).collect().get(0).getField(0);\n    }\n\n    private static int findMinTemperature(DataStream&lt;Integer&gt; dataStream) throws Exception {\n        return dataStream.min(1).collect().get(0).getField(0);\n    }\n</code></pre>\n<p>I also imported these pacakges:</p>\n<pre><code>import org.apache.flink.api.common.functions.FlatMapFunction;\nimport org.apache.flink.api.java.tuple.Tuple2;\nimport org.apache.flink.streaming.api.datastream.DataStream;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.util.Collector;\n</code></pre>\n<p>However, under <code>reduce</code>, there is an error: <code>The method reduce((&lt;no type&gt; t1, &lt;no type&gt; t2) -&gt; {}) is undefined for the type SingleOutputStreamOperator&lt;Double&gt;</code></p>\n<p>Under <code>min</code> and <code>max</code>, it says: <code>The method max(int) is undefined for the type DataStream&lt;Integer&gt;</code>.</p>\n<p>It seems to be some type converting problem, but I tried to revise it, I also tried to use <code>keyBy()</code>, which is said to be deprecated, and <code>maxBy()</code>, which also doesn't work. Can anyone help me with that?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1690104828,"post_id":76747371,"comment_id":135304170,"body_markdown":"&quot;My experience of that explanation is that the method does nothing.&quot; Really? You&#39;ve never experienced a method that does something and returns `void`. Or do you just mean &#39;my guess&#39;?","body":"&quot;My experience of that explanation is that the method does nothing.&quot; Really? You&#39;ve never experienced a method that does something and returns <code>void</code>. Or do you just mean &#39;my guess&#39;?"}],"answers":[{"tags":[],"owner":{"account_id":28758112,"reputation":401,"user_id":22024689,"display_name":"Iman Hosseinzadeh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690104471,"creation_date":1690104471,"answer_id":76747508,"question_id":76747371,"body_markdown":"void method doesn&#39;t mean that it doesn&#39;t do anything, it means that its work is done without having to return a result.\r\n\r\nThis method **performs a task** but it does **not give anything back**.\r\n\r\nfor example, setter methods are good examples.\r\nin this example, `setFirstname` is a method that assigns a value to the first name filed.\r\n\r\n    public class Person {\r\n        private String firstname;\r\n    \r\n        public void setFirstname(String s) {\r\n            firstname = s;\r\n        }\r\n    \r\n        public String getFirstname() {\r\n            return firstname;\r\n        }\r\n    }\r\n\r\nLet&#39;s use it\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Person person = new Person();\r\n            person.setFirstname(&quot;Ali&quot;);\r\n            String personFirstname = person.getFirstname();\r\n            System.out.println(personFirstname);\r\n        }\r\n    }\r\n\r\nthe output will be:\r\n\r\n&gt; Ali\r\n\r\nAs you can see, when we use the getFirstname method and print its return value, it is clear that **the firstname field has changed**.\r\n\r\nWho performs this task?\r\n`setFirstname` method.\r\n\r\nAlthough this method did not have a specific output, **it did something important**.","title":"Void type for method in Java OOP","body":"<p>void method doesn't mean that it doesn't do anything, it means that its work is done without having to return a result.</p>\n<p>This method <strong>performs a task</strong> but it does <strong>not give anything back</strong>.</p>\n<p>for example, setter methods are good examples.\nin this example, <code>setFirstname</code> is a method that assigns a value to the first name filed.</p>\n<pre><code>public class Person {\n    private String firstname;\n\n    public void setFirstname(String s) {\n        firstname = s;\n    }\n\n    public String getFirstname() {\n        return firstname;\n    }\n}\n</code></pre>\n<p>Let's use it</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Person person = new Person();\n        person.setFirstname(&quot;Ali&quot;);\n        String personFirstname = person.getFirstname();\n        System.out.println(personFirstname);\n    }\n}\n</code></pre>\n<p>the output will be:</p>\n<blockquote>\n<p>Ali</p>\n</blockquote>\n<p>As you can see, when we use the getFirstname method and print its return value, it is clear that <strong>the firstname field has changed</strong>.</p>\n<p>Who performs this task?\n<code>setFirstname</code> method.</p>\n<p>Although this method did not have a specific output, <strong>it did something important</strong>.</p>\n"},{"tags":[],"owner":{"account_id":29063704,"reputation":26,"user_id":22263786,"display_name":"Ian Dancan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690380271,"creation_date":1690108626,"answer_id":76747783,"question_id":76747371,"body_markdown":"In simple terms, when we say that a method does not return anything, this implies that the method does not yield a value that can be assigned to a variable or be used in expressions.\r\nThe following is an example of such:\r\n```java\r\npublic class SumOfNumbers {\r\n    public static void main(String[] args) {\r\n        //you can choose to first initialize the numbers\r\n        int num1 = 10;\r\n        int num2 = 15;\r\n        //call the method to add the two numbers\r\n        add(num1,num2);\r\n\r\n        //alternatively call the method and pass the numbers direct\r\n        System.out.println();//to print new line between the two solutions\r\n        add(10, 15);\r\n    }\r\n\r\n    //the method takes two numbers, finds the sum, prints the sum\r\n    public static void add(int a, int b){\r\n        int sum = a + b;\r\n\r\n        //print the sum\r\n        System.out.println(&quot;The sum of &quot; + a +  &quot; and &quot;  + b + &quot; is &quot; + sum);\r\n    }\r\n}\r\n```\r\nnote that in the main method, there is need for the output system as the method already has the output statement. the output system used in this code is to differentiate the two outputs i.e where we first initialise the numbers and when we pass the number direct to the method.","title":"Void type for method in Java OOP","body":"<p>In simple terms, when we say that a method does not return anything, this implies that the method does not yield a value that can be assigned to a variable or be used in expressions.\nThe following is an example of such:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SumOfNumbers {\n    public static void main(String[] args) {\n        //you can choose to first initialize the numbers\n        int num1 = 10;\n        int num2 = 15;\n        //call the method to add the two numbers\n        add(num1,num2);\n\n        //alternatively call the method and pass the numbers direct\n        System.out.println();//to print new line between the two solutions\n        add(10, 15);\n    }\n\n    //the method takes two numbers, finds the sum, prints the sum\n    public static void add(int a, int b){\n        int sum = a + b;\n\n        //print the sum\n        System.out.println(&quot;The sum of &quot; + a +  &quot; and &quot;  + b + &quot; is &quot; + sum);\n    }\n}\n</code></pre>\n<p>note that in the main method, there is need for the output system as the method already has the output statement. the output system used in this code is to differentiate the two outputs i.e where we first initialise the numbers and when we pass the number direct to the method.</p>\n"}],"owner":{"account_id":29073194,"reputation":1,"user_id":22270990,"display_name":"Sergej Lav Bojanić 2022"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76747783,"answer_count":2,"score":-2,"last_activity_date":1690380271,"creation_date":1690102277,"question_id":76747371,"body_markdown":"I&#39;ve had a problem for a few days now, I can&#39;t figure out what the Void method type is. What is the purpose of a method that does not return a value (what does it mean that the method does not have a return value of the method, my experience of that explanation is that the method does nothing)? I need it for the programming exam that is coming soon, and in the books it is always written the same way &quot;Void method does not return a value&quot;.\r\n\r\nI thought that methods with this type of return value only serve to redefine themselves. Maybe I have a problem because I associate the term &quot;Does not return a value&quot; with Mathlab, because in Mathlab if I put a colon at the end of the command, the command will be executed but will not return anything.\r\n\r\nMatlab e.g.:\r\n\r\n```matlab\r\nx = [ 90 0 0 ];\r\ns=sin(x);\r\n```\r\n","title":"Void type for method in Java OOP","body":"<p>I've had a problem for a few days now, I can't figure out what the Void method type is. What is the purpose of a method that does not return a value (what does it mean that the method does not have a return value of the method, my experience of that explanation is that the method does nothing)? I need it for the programming exam that is coming soon, and in the books it is always written the same way &quot;Void method does not return a value&quot;.</p>\n<p>I thought that methods with this type of return value only serve to redefine themselves. Maybe I have a problem because I associate the term &quot;Does not return a value&quot; with Mathlab, because in Mathlab if I put a colon at the end of the command, the command will be executed but will not return anything.</p>\n<p>Matlab e.g.:</p>\n<pre class=\"lang-matlab prettyprint-override\"><code>x = [ 90 0 0 ];\ns=sin(x);\n</code></pre>\n"},{"tags":["java","spring-boot","gradle","openapi","openapi-generator-maven-plugin"],"comments":[{"owner":{"account_id":2767223,"reputation":21433,"user_id":2382650,"accept_rate":92,"display_name":"Cisco"},"score":1,"creation_date":1690325666,"post_id":76764563,"comment_id":135337132,"body_markdown":"No, that is the way the Gradle plugin is designed to work. It starts your Spring Boot application in order for [springdoc&#39;s](https://springdoc.org/) Spring auto-configuration to take effect. Underneath, it just makes a HTTP request to the configured `/v3/api-docs` URL for the specification file then just writes it to a file as the task output.","body":"No, that is the way the Gradle plugin is designed to work. It starts your Spring Boot application in order for <a href=\"https://springdoc.org/\" rel=\"nofollow noreferrer\">springdoc&#39;s</a> Spring auto-configuration to take effect. Underneath, it just makes a HTTP request to the configured <code>&#47;v3&#47;api-docs</code> URL for the specification file then just writes it to a file as the task output."},{"owner":{"account_id":12046191,"reputation":31,"user_id":8811103,"display_name":"DenseMage"},"score":1,"creation_date":1690379429,"post_id":76764563,"comment_id":135345395,"body_markdown":"Is there a way to maybe add the command to an integration test to run it while the Spring Boot Application is running?","body":"Is there a way to maybe add the command to an integration test to run it while the Spring Boot Application is running?"}],"owner":{"account_id":12046191,"reputation":31,"user_id":8811103,"display_name":"DenseMage"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690379480,"creation_date":1690301128,"question_id":76764563,"body_markdown":"I can run `./gradlew generateOpenApiDocs` to generate an OpenApi spec using the `springdoc.openapi-gradle-plugin`. This however starts the Spring Boot application in the background using a forkedSpringBootRun task.\r\n\r\nI was wondering if there was:\r\n 1. A way to generate the spec without running the Spring Boot Application and if that doesn&#39;t work\r\n 2. Make it so that the command runs every time the Spring Boot Application is run without having to run the command itself\r\n3. Maybe add the command as part of an integration test that runs when the Spring Boot Application runs and generates the spec that way\r\n\r\nNote: I am using this plugin because my app uses Spring WebFlux. I am open to other plugin suggestions that could generate docs without running the app if you have any.","title":"Is there a way to generate an OpenApi Spec from a Spring App without having to run the Spring Boot Application?","body":"<p>I can run <code>./gradlew generateOpenApiDocs</code> to generate an OpenApi spec using the <code>springdoc.openapi-gradle-plugin</code>. This however starts the Spring Boot application in the background using a forkedSpringBootRun task.</p>\n<p>I was wondering if there was:</p>\n<ol>\n<li>A way to generate the spec without running the Spring Boot Application and if that doesn't work</li>\n<li>Make it so that the command runs every time the Spring Boot Application is run without having to run the command itself</li>\n<li>Maybe add the command as part of an integration test that runs when the Spring Boot Application runs and generates the spec that way</li>\n</ol>\n<p>Note: I am using this plugin because my app uses Spring WebFlux. I am open to other plugin suggestions that could generate docs without running the app if you have any.</p>\n"},{"tags":["java","mysql","hibernate"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690452374,"post_id":76771787,"comment_id":135357095,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1690454546,"post_id":76771787,"comment_id":135357541,"body_markdown":"Does this answer your question? [Hibernate hbm2ddl.auto, possible values, and what they do](https://stackoverflow.com/questions/18077327/hibernate-hbm2ddl-auto-possible-values-and-what-they-do)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/18077327/hibernate-hbm2ddl-auto-possible-values-and-what-they-do\">Hibernate hbm2ddl.auto, possible values, and what they do</a>"}],"answers":[{"tags":[],"owner":{"account_id":12330201,"reputation":54,"user_id":8996469,"display_name":"Nick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690378700,"creation_date":1690378700,"answer_id":76771904,"question_id":76771787,"body_markdown":"The tables won&#39;t get created by themselves.  \r\nYou need to create them in your DB unless you are using Spring Boot or something else that can automate table creation?  ","title":"The Application is running just fine and also creating the instances of the classes User,Category and product but not creating any tables in database","body":"<p>The tables won't get created by themselves.<br />\nYou need to create them in your DB unless you are using Spring Boot or something else that can automate table creation?</p>\n"}],"owner":{"account_id":26846980,"reputation":3,"user_id":20432593,"display_name":"P I Y U S H D A S I L A"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76771904,"answer_count":1,"score":0,"last_activity_date":1690378700,"creation_date":1690377792,"question_id":76771787,"body_markdown":"    **This is the pom.xml file**\r\n\r\n    ` &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;\r\n            &lt;version&gt;7.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\r\n        &lt;dependency&gt;\r\n         &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n         &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n         &lt;version&gt;5.4.24.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/com.mysql/mysql-connector-j --&gt;\r\n        &lt;dependency&gt;\r\n         &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n         &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n         &lt;version&gt;8.0.33&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n     \r\n      &lt;/dependencies&gt; `\r\n\r\n\r\n    **This is my hibernate.cfg.xml file**\r\n        \r\n\r\n       ` &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n         &lt;!DOCTYPE hibernate-configuration SYSTEM\r\n\t &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n        \r\n           &lt;hibernate-configuration&gt;\r\n            &lt;session-factory&gt;\r\n               &lt;property name=&quot;connection.driver_class&quot; &gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n               &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/mycart&lt;/property&gt;\r\n               &lt;property name=&quot;connection.username&quot; &gt;root&lt;/property&gt;\r\n               &lt;property name=&quot;connection.password&quot;&gt;@DIKDIKHATK&lt;/property&gt;\r\n               &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\r\n               &lt;property name=&quot;hibernate.hdm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n               &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n               &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\r\n               &lt;property name=&quot;use_sql_comments&quot;&gt;true&lt;/property&gt;\r\n\r\n               &lt;mapping class=&quot;com.resumeproject.indicart.entities.User&quot;/&gt;\r\n               &lt;mapping class=&quot;com.resumeproject.indicart.entities.Category&quot;/&gt;\r\n               &lt;mapping class=&quot;com.resumeproject.indicart.entities.Product&quot;/&gt;\r\n              \r\n\r\n                   \r\n               \r\n             &lt;/session-factory&gt;\r\n            &lt;/hibernate-configuration&gt;`\r\n\r\n\r\n    **This is the user entity**\r\n    \r\n     `package com.resumeproject.indicart.entities;\r\n\r\n     import javax.persistence.Column;\r\n     import javax.persistence.Entity;\r\n     import javax.persistence.GeneratedValue;\r\n     import javax.persistence.GenerationType;\r\n     import javax.persistence.Id;\r\n\r\n\r\n      @Entity\r\n     public class User {\r\n       @Id\r\n       @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n       @Column(length=10,name=&quot;user_id&quot;)\r\n       private int userId;\r\n       @Column(length=100,name=&quot;user_name&quot;)\r\n       private String userNamme;\r\n       @Column(length=100,name=&quot;user_email&quot;)\r\n       private String userEmail;\r\n       @Column(length=100,name=&quot;user_password&quot;)\r\n       private String userPassword;\r\n       @Column(length=12,name=&quot;user_phone&quot;)\r\n       private String userPhone;\r\n       @Column(length=1500,name=&quot;user_pic&quot;)\r\n       private String userPic;\r\n       @Column(length=1500,name=&quot;user__address&quot;)\r\n       private String userAddress;\r\n\r\n        public User(int userId, String userNamme, String userEmail, String userPassword,String                 userPhone,String userPic, String userAddress) {\r\n        this.userId = userId;\r\n        this.userNamme = userNamme;\r\n        this.userEmail = userEmail;\r\n        this.userPassword = userPassword;\r\n        this.userPhone = userPhone;\r\n        this.userPic = userPic;\r\n        this.userAddress = userAddress;\r\n    }\r\n\r\n    public User(String userNamme, String userEmail, String userPassword, String userPhone, String    userPic, String userAddress) {\r\n        this.userNamme = userNamme;\r\n        this.userEmail = userEmail;\r\n        this.userPassword = userPassword;\r\n        this.userPhone = userPhone;\r\n        this.userPic = userPic;\r\n        this.userAddress = userAddress;\r\n    }\r\n\r\n    public User() {\r\n    }\r\n\r\n    public int getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public void setUserId(int userId) {\r\n        this.userId = userId;\r\n    }\r\n    \r\n    public String getUserNamme() {\r\n        return userNamme;\r\n    }\r\n\r\n    public void setUserNamme(String userNamme) {\r\n        this.userNamme = userNamme;\r\n    }\r\n\r\n    public String getUserEmail() {\r\n        return userEmail;\r\n    }\r\n\r\n    public void setUserEmail(String userEmail) {\r\n        this.userEmail = userEmail;\r\n    }\r\n\r\n    public String getUserPassword() {\r\n        return userPassword;\r\n    }\r\n\r\n    public void setUserPassword(String userPassword) {\r\n        this.userPassword = userPassword;\r\n    }\r\n\r\n    public String getUserPhone() {\r\n        return userPhone;\r\n    }\r\n\r\n    public void setUserPhone(String userPhone) {\r\n        this.userPhone = userPhone;\r\n    }\r\n\r\n    public String getUserPic() {\r\n        return userPic;\r\n    }\r\n\r\n    public void setUserPic(String userPic) {\r\n        this.userPic = userPic;\r\n    }\r\n\r\n    public String getUserAddress() {\r\n        return userAddress;\r\n    }\r\n\r\n    public void setUserAddress(String userAddress) {\r\n        this.userAddress = userAddress;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;User{&quot; + &quot;userId=&quot; + userId + &quot;, userNamme=&quot; + userNamme + &quot;, userEmail=&quot; +   userEmail + &quot;, userPassword=&quot; + userPassword + &quot;, userPhone=&quot; + userPhone + &quot;, userPic=&quot; + userPic + &quot;, userAddress=&quot; + userAddress + &#39;}&#39;;\r\n    }\r\n    \r\n    \r\n    \r\n}`\r\n\r\n    **This is my Category entity**\r\n      `package com.resumeproject.indicart.entities;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.OneToMany;\r\n\r\n\r\n    @Entity\r\n    public class Category {\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    private int categoryId;\r\n    private String categoryTitle;\r\n    private String categoryDescription;\r\n    @OneToMany(mappedBy=&quot;category&quot;)\r\n    private List&lt;Product&gt; products=new ArrayList&lt;&gt;();\r\n    \r\n    public Category(int categoryId, String categoryTitle, String categoryDescription) {\r\n        this.categoryId = categoryId;\r\n        this.categoryTitle = categoryTitle;\r\n        this.categoryDescription = categoryDescription;\r\n    }\r\n\r\n    public Category() {\r\n    }\r\n\r\n    public Category(String categoryTitle, String categoryDescription,List&lt;Product&gt; products) {\r\n        this.categoryTitle = categoryTitle;\r\n        this.categoryDescription = categoryDescription;\r\n        this.products=products;\r\n    }\r\n    \r\n\r\n    public int getCategoryId() {\r\n        return categoryId;\r\n    }\r\n\r\n    public void setCategoryId(int categoryId) {\r\n        this.categoryId = categoryId;\r\n    }\r\n\r\n    public String getCategoryTitle() {\r\n        return categoryTitle;\r\n    }\r\n\r\n    public void setCategoryTitle(String categoryTitle) {\r\n        this.categoryTitle = categoryTitle;\r\n    }\r\n\r\n    public String getCategoryDescription() {\r\n        return categoryDescription;\r\n    }\r\n\r\n    public void setCategoryDescription(String categoryDescription) {\r\n        this.categoryDescription = categoryDescription;\r\n    }\r\n\r\n    public List&lt;Product&gt; getProducts() {\r\n        return products;\r\n    }\r\n\r\n    public void setProducts(List&lt;Product&gt; products) {\r\n        this.products = products;\r\n    }\r\n        \r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Category{&quot; + &quot;categoryId=&quot; + categoryId + &quot;, categoryTitle=&quot; + categoryTitle + &quot;, categoryDescription=&quot; + categoryDescription + &#39;}&#39;;\r\n    }\r\n    \r\n    \r\n}\r\n`\r\n    **This is my Product Entity**\r\n    \r\n     `package com.resumeproject.indicart.entities;\r\n\r\n      import javax.persistence.Column;\r\n      import javax.persistence.Entity;\r\n      import javax.persistence.GeneratedValue;\r\n      import javax.persistence.GenerationType; \r\n      import javax.persistence.Id;\r\n      import javax.persistence.ManyToOne;\r\n\r\n\r\n      @Entity\r\n      public class Product {\r\n      @Id\r\n      @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n      private int pId;\r\n      private String pMame;\r\n      @Column(length=3000)\r\n      private String pDesc;\r\n      private String pPhoto;\r\n      private int pPrice;\r\n      private int pDicsount;\r\n      private int pQuantity;\r\n      @ManyToOne\r\n      private Category category;\r\n    \r\n    \r\n      public Product() {\r\n      }\r\n\r\n      public Product(String pMame, String pDesc, String pPhoto, int pPrice, int pDicsount, int pQuantity,Category category) {\r\n        this.pMame = pMame;\r\n        this.pDesc = pDesc;\r\n        this.pPhoto = pPhoto;\r\n        this.pPrice = pPrice;\r\n        this.pDicsount = pDicsount;\r\n        this.pQuantity = pQuantity;\r\n        this.category=category;\r\n    }\r\n\r\n    public int getpId() {\r\n        return pId;\r\n    }\r\n\r\n    public void setpId(int pId) {\r\n        this.pId = pId;\r\n    }\r\n\r\n    public String getpMame() {\r\n        return pMame;\r\n    }\r\n\r\n    public void setpMame(String pMame) {\r\n        this.pMame = pMame;\r\n    }\r\n\r\n    public String getpDesc() {\r\n        return pDesc;\r\n    }\r\n\r\n    public void setpDesc(String pDesc) {\r\n        this.pDesc = pDesc;\r\n    }\r\n\r\n    public String getpPhoto() {\r\n        return pPhoto;\r\n    }\r\n\r\n    public void setpPhoto(String pPhoto) {\r\n        this.pPhoto = pPhoto;\r\n    }\r\n\r\n    public int getpPrice() {\r\n        return pPrice;\r\n    }\r\n\r\n    public void setpPrice(int pPrice) {\r\n        this.pPrice = pPrice;\r\n    }\r\n\r\n    public int getpDicsount() {\r\n        return pDicsount;\r\n    }\r\n\r\n    public void setpDicsount(int pDicsount) {\r\n        this.pDicsount = pDicsount;\r\n    }\r\n\r\n    public int getpQuantity() {\r\n        return pQuantity;\r\n    }\r\n\r\n    public void setpQuantity(int pQuantity) {\r\n        this.pQuantity = pQuantity;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Product{&quot; + &quot;pId=&quot; + pId + &quot;, pMame=&quot; + pMame + &quot;, pDesc=&quot; + pDesc + &quot;, pPhoto=&quot; +   pPhoto + &quot;, pPrice=&quot; + pPrice + &quot;, pDicsount=&quot; + pDicsount + &quot;, pQuantity=&quot; + pQuantity + &#39;}&#39;;\r\n    }\r\n    \r\n    \r\n}\r\n`\r\n \r\n\r\n [project directory overview](https://i.stack.imgur.com/8Puys.png)\r\n\r\n\r\nThis is the code for my java application. I tried to change some dependencies and some configuration in the hibernate config file but could not achieve what I wanted to with the database.  Please tell me what am I missing. \r\n\r\nI could not find anything on the console as well regarding the Mysql queries.\r\n\r\n     ","title":"The Application is running just fine and also creating the instances of the classes User,Category and product but not creating any tables in database","body":"<pre><code>**This is the pom.xml file**\n\n` &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax&lt;/groupId&gt;\n        &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;\n        &lt;version&gt;7.0&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n    &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\n    &lt;dependency&gt;\n     &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n     &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n     &lt;version&gt;5.4.24.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/com.mysql/mysql-connector-j --&gt;\n    &lt;dependency&gt;\n     &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n     &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n     &lt;version&gt;8.0.33&lt;/version&gt;\n    &lt;/dependency&gt;\n \n  &lt;/dependencies&gt; `\n\n\n**This is my hibernate.cfg.xml file**\n    \n\n   ` &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n     &lt;!DOCTYPE hibernate-configuration SYSTEM\n &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n    \n       &lt;hibernate-configuration&gt;\n        &lt;session-factory&gt;\n           &lt;property name=&quot;connection.driver_class&quot; &gt;com.mysql.jdbc.Driver&lt;/property&gt;\n           &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/mycart&lt;/property&gt;\n           &lt;property name=&quot;connection.username&quot; &gt;root&lt;/property&gt;\n           &lt;property name=&quot;connection.password&quot;&gt;@DIKDIKHATK&lt;/property&gt;\n           &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\n           &lt;property name=&quot;hibernate.hdm2ddl.auto&quot;&gt;update&lt;/property&gt;\n           &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n           &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\n           &lt;property name=&quot;use_sql_comments&quot;&gt;true&lt;/property&gt;\n\n           &lt;mapping class=&quot;com.resumeproject.indicart.entities.User&quot;/&gt;\n           &lt;mapping class=&quot;com.resumeproject.indicart.entities.Category&quot;/&gt;\n           &lt;mapping class=&quot;com.resumeproject.indicart.entities.Product&quot;/&gt;\n          \n\n               \n           \n         &lt;/session-factory&gt;\n        &lt;/hibernate-configuration&gt;`\n\n\n**This is the user entity**\n\n `package com.resumeproject.indicart.entities;\n\n import javax.persistence.Column;\n import javax.persistence.Entity;\n import javax.persistence.GeneratedValue;\n import javax.persistence.GenerationType;\n import javax.persistence.Id;\n\n\n  @Entity\n public class User {\n   @Id\n   @GeneratedValue(strategy=GenerationType.IDENTITY)\n   @Column(length=10,name=&quot;user_id&quot;)\n   private int userId;\n   @Column(length=100,name=&quot;user_name&quot;)\n   private String userNamme;\n   @Column(length=100,name=&quot;user_email&quot;)\n   private String userEmail;\n   @Column(length=100,name=&quot;user_password&quot;)\n   private String userPassword;\n   @Column(length=12,name=&quot;user_phone&quot;)\n   private String userPhone;\n   @Column(length=1500,name=&quot;user_pic&quot;)\n   private String userPic;\n   @Column(length=1500,name=&quot;user__address&quot;)\n   private String userAddress;\n\n    public User(int userId, String userNamme, String userEmail, String userPassword,String                 userPhone,String userPic, String userAddress) {\n    this.userId = userId;\n    this.userNamme = userNamme;\n    this.userEmail = userEmail;\n    this.userPassword = userPassword;\n    this.userPhone = userPhone;\n    this.userPic = userPic;\n    this.userAddress = userAddress;\n}\n\npublic User(String userNamme, String userEmail, String userPassword, String userPhone, String    userPic, String userAddress) {\n    this.userNamme = userNamme;\n    this.userEmail = userEmail;\n    this.userPassword = userPassword;\n    this.userPhone = userPhone;\n    this.userPic = userPic;\n    this.userAddress = userAddress;\n}\n\npublic User() {\n}\n\npublic int getUserId() {\n    return userId;\n}\n\npublic void setUserId(int userId) {\n    this.userId = userId;\n}\n\npublic String getUserNamme() {\n    return userNamme;\n}\n\npublic void setUserNamme(String userNamme) {\n    this.userNamme = userNamme;\n}\n\npublic String getUserEmail() {\n    return userEmail;\n}\n\npublic void setUserEmail(String userEmail) {\n    this.userEmail = userEmail;\n}\n\npublic String getUserPassword() {\n    return userPassword;\n}\n\npublic void setUserPassword(String userPassword) {\n    this.userPassword = userPassword;\n}\n\npublic String getUserPhone() {\n    return userPhone;\n}\n\npublic void setUserPhone(String userPhone) {\n    this.userPhone = userPhone;\n}\n\npublic String getUserPic() {\n    return userPic;\n}\n\npublic void setUserPic(String userPic) {\n    this.userPic = userPic;\n}\n\npublic String getUserAddress() {\n    return userAddress;\n}\n\npublic void setUserAddress(String userAddress) {\n    this.userAddress = userAddress;\n}\n\n@Override\npublic String toString() {\n    return &quot;User{&quot; + &quot;userId=&quot; + userId + &quot;, userNamme=&quot; + userNamme + &quot;, userEmail=&quot; +   userEmail + &quot;, userPassword=&quot; + userPassword + &quot;, userPhone=&quot; + userPhone + &quot;, userPic=&quot; + userPic + &quot;, userAddress=&quot; + userAddress + '}';\n}\n</code></pre>\n<p>}`</p>\n<pre><code>**This is my Category entity**\n  `package com.resumeproject.indicart.entities;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.OneToMany;\n\n\n@Entity\npublic class Category {\n@Id\n@GeneratedValue(strategy=GenerationType.IDENTITY)\nprivate int categoryId;\nprivate String categoryTitle;\nprivate String categoryDescription;\n@OneToMany(mappedBy=&quot;category&quot;)\nprivate List&lt;Product&gt; products=new ArrayList&lt;&gt;();\n\npublic Category(int categoryId, String categoryTitle, String categoryDescription) {\n    this.categoryId = categoryId;\n    this.categoryTitle = categoryTitle;\n    this.categoryDescription = categoryDescription;\n}\n\npublic Category() {\n}\n\npublic Category(String categoryTitle, String categoryDescription,List&lt;Product&gt; products) {\n    this.categoryTitle = categoryTitle;\n    this.categoryDescription = categoryDescription;\n    this.products=products;\n}\n\n\npublic int getCategoryId() {\n    return categoryId;\n}\n\npublic void setCategoryId(int categoryId) {\n    this.categoryId = categoryId;\n}\n\npublic String getCategoryTitle() {\n    return categoryTitle;\n}\n\npublic void setCategoryTitle(String categoryTitle) {\n    this.categoryTitle = categoryTitle;\n}\n\npublic String getCategoryDescription() {\n    return categoryDescription;\n}\n\npublic void setCategoryDescription(String categoryDescription) {\n    this.categoryDescription = categoryDescription;\n}\n\npublic List&lt;Product&gt; getProducts() {\n    return products;\n}\n\npublic void setProducts(List&lt;Product&gt; products) {\n    this.products = products;\n}\n    \n\n@Override\npublic String toString() {\n    return &quot;Category{&quot; + &quot;categoryId=&quot; + categoryId + &quot;, categoryTitle=&quot; + categoryTitle + &quot;, categoryDescription=&quot; + categoryDescription + '}';\n}\n</code></pre>\n<p>}\n`\n<strong>This is my Product Entity</strong></p>\n<pre><code> `package com.resumeproject.indicart.entities;\n\n  import javax.persistence.Column;\n  import javax.persistence.Entity;\n  import javax.persistence.GeneratedValue;\n  import javax.persistence.GenerationType; \n  import javax.persistence.Id;\n  import javax.persistence.ManyToOne;\n\n\n  @Entity\n  public class Product {\n  @Id\n  @GeneratedValue(strategy=GenerationType.IDENTITY)\n  private int pId;\n  private String pMame;\n  @Column(length=3000)\n  private String pDesc;\n  private String pPhoto;\n  private int pPrice;\n  private int pDicsount;\n  private int pQuantity;\n  @ManyToOne\n  private Category category;\n\n\n  public Product() {\n  }\n\n  public Product(String pMame, String pDesc, String pPhoto, int pPrice, int pDicsount, int pQuantity,Category category) {\n    this.pMame = pMame;\n    this.pDesc = pDesc;\n    this.pPhoto = pPhoto;\n    this.pPrice = pPrice;\n    this.pDicsount = pDicsount;\n    this.pQuantity = pQuantity;\n    this.category=category;\n}\n\npublic int getpId() {\n    return pId;\n}\n\npublic void setpId(int pId) {\n    this.pId = pId;\n}\n\npublic String getpMame() {\n    return pMame;\n}\n\npublic void setpMame(String pMame) {\n    this.pMame = pMame;\n}\n\npublic String getpDesc() {\n    return pDesc;\n}\n\npublic void setpDesc(String pDesc) {\n    this.pDesc = pDesc;\n}\n\npublic String getpPhoto() {\n    return pPhoto;\n}\n\npublic void setpPhoto(String pPhoto) {\n    this.pPhoto = pPhoto;\n}\n\npublic int getpPrice() {\n    return pPrice;\n}\n\npublic void setpPrice(int pPrice) {\n    this.pPrice = pPrice;\n}\n\npublic int getpDicsount() {\n    return pDicsount;\n}\n\npublic void setpDicsount(int pDicsount) {\n    this.pDicsount = pDicsount;\n}\n\npublic int getpQuantity() {\n    return pQuantity;\n}\n\npublic void setpQuantity(int pQuantity) {\n    this.pQuantity = pQuantity;\n}\n\n@Override\npublic String toString() {\n    return &quot;Product{&quot; + &quot;pId=&quot; + pId + &quot;, pMame=&quot; + pMame + &quot;, pDesc=&quot; + pDesc + &quot;, pPhoto=&quot; +   pPhoto + &quot;, pPrice=&quot; + pPrice + &quot;, pDicsount=&quot; + pDicsount + &quot;, pQuantity=&quot; + pQuantity + '}';\n}\n</code></pre>\n<p>}\n`</p>\n<p><a href=\"https://i.stack.imgur.com/8Puys.png\" rel=\"nofollow noreferrer\">project directory overview</a></p>\n<p>This is the code for my java application. I tried to change some dependencies and some configuration in the hibernate config file but could not achieve what I wanted to with the database.  Please tell me what am I missing.</p>\n<p>I could not find anything on the console as well regarding the Mysql queries.</p>\n"},{"tags":["java","docker"],"answers":[{"tags":[],"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690378477,"creation_date":1690378477,"answer_id":76771869,"question_id":76771312,"body_markdown":"The [Docker API documentation](https://docs.docker.com/engine/api/v1.43/#tag/Container/operation/ContainerStats) states:\r\n\r\n&gt; On a cgroup v2 host, the following fields are not set\r\n&gt;\r\n&gt; * `cpu_stats`: `cpu_usage.percpu_usage`\r\n\r\nThis is a low-level property of the host setup and not something your application can control at all.\r\n\r\nYou should still be able to get the total CPU usage and that&#39;s probably more useful for most applications.  The assignment of process threads to physical CPUs is managed by the Linux kernel and is somewhat arbitrary; it shouldn&#39;t usually matter which core you&#39;re running on.","title":"Java Docker API CPU Calculation","body":"<p>The <a href=\"https://docs.docker.com/engine/api/v1.43/#tag/Container/operation/ContainerStats\" rel=\"nofollow noreferrer\">Docker API documentation</a> states:</p>\n<blockquote>\n<p>On a cgroup v2 host, the following fields are not set</p>\n<ul>\n<li><code>cpu_stats</code>: <code>cpu_usage.percpu_usage</code></li>\n</ul>\n</blockquote>\n<p>This is a low-level property of the host setup and not something your application can control at all.</p>\n<p>You should still be able to get the total CPU usage and that's probably more useful for most applications.  The assignment of process threads to physical CPUs is managed by the Linux kernel and is somewhat arbitrary; it shouldn't usually matter which core you're running on.</p>\n"}],"owner":{"account_id":29095401,"reputation":1,"user_id":22288381,"display_name":"cohaa100"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690378477,"creation_date":1690374447,"question_id":76771312,"body_markdown":"i am using the Docker Java API and want to see the usage of the cpu.\r\nBut every time \r\n\r\n`stats.getCpuStats().getCpuUsage().getPercpuUsage()` is null and i need it for the calculating. Does anybody know why it’s always null? \r\n\r\nCode:\r\n\r\n    `float cpuPercent = 0.0f;\r\n\r\n    float cpuDelta = stats.getCpuStats().getCpuUsage().getTotalUsage().floatValue() - stats.getPreCpuStats().getCpuUsage().getTotalUsage().floatValue();\r\n    float systemDelta = stats.getCpuStats().getSystemCpuUsage().floatValue() - stats.getPreCpuStats().getSystemCpuUsage().floatValue();\r\n\r\n    if (cpuDelta &gt; 0.0 &amp;&amp; systemDelta &gt; 0.0) {\r\n        cpuPercent = (cpuDelta - systemDelta) * (stats.getCpuStats().getCpuUsage().getPercpuUsage().size() * 100F);\r\n    }`\r\n\r\n\r\n\r\n\r\nI searched for other solutions but nothing helped.","title":"Java Docker API CPU Calculation","body":"<p>i am using the Docker Java API and want to see the usage of the cpu.\nBut every time</p>\n<p><code>stats.getCpuStats().getCpuUsage().getPercpuUsage()</code> is null and i need it for the calculating. Does anybody know why it’s always null?</p>\n<p>Code:</p>\n<pre><code>`float cpuPercent = 0.0f;\n\nfloat cpuDelta = stats.getCpuStats().getCpuUsage().getTotalUsage().floatValue() - stats.getPreCpuStats().getCpuUsage().getTotalUsage().floatValue();\nfloat systemDelta = stats.getCpuStats().getSystemCpuUsage().floatValue() - stats.getPreCpuStats().getSystemCpuUsage().floatValue();\n\nif (cpuDelta &gt; 0.0 &amp;&amp; systemDelta &gt; 0.0) {\n    cpuPercent = (cpuDelta - systemDelta) * (stats.getCpuStats().getCpuUsage().getPercpuUsage().size() * 100F);\n}`\n</code></pre>\n<p>I searched for other solutions but nothing helped.</p>\n"},{"tags":["java","scala","akka","akka-http"],"comments":[{"owner":{"account_id":9145961,"reputation":4103,"user_id":6802156,"display_name":"Emiliano Martinez"},"score":0,"creation_date":1690370210,"post_id":76770059,"comment_id":135343137,"body_markdown":"In the Scala case you must execute Await on the Future that is created after unmarshall the entity your application to wait until the future is completed","body":"In the Scala case you must execute Await on the Future that is created after unmarshall the entity your application to wait until the future is completed"},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":0,"creation_date":1690370458,"post_id":76770059,"comment_id":135343191,"body_markdown":"@EmilianoMartinez do you have an example?","body":"@EmilianoMartinez do you have an example?"}],"answers":[{"tags":[],"owner":{"account_id":9145961,"reputation":4103,"user_id":6802156,"display_name":"Emiliano Martinez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690378153,"creation_date":1690378153,"answer_id":76771831,"question_id":76770059,"body_markdown":"Simple HttpRequest in Scala 3 to get the html string as response:\r\n\r\n    object HttpTest {\r\n    \r\n      given system: ActorSystem[_] = ActorSystem(Behaviors.empty, &quot;SingleRequest&quot;)\r\n      // needed for the future flatMap/onComplete in the end\r\n      given executionContext: ExecutionContext = system.executionContext\r\n      \r\n\r\n      @main def httpExample() = {\r\n        val result = Http().singleRequest(HttpRequest(uri = &quot;https://stackoverflow.com&quot;, method = HttpMethods.GET))\r\n    \r\n        val str = result.map(e =&gt; {\r\n            Unmarshal(e.entity).to[String]\r\n          }).flatten\r\n    \r\n        println(Await.result(str, 10.seconds))\r\n      }\r\n    }","title":"Akka - Extract response body as plain string value in Java","body":"<p>Simple HttpRequest in Scala 3 to get the html string as response:</p>\n<pre><code>object HttpTest {\n\n  given system: ActorSystem[_] = ActorSystem(Behaviors.empty, &quot;SingleRequest&quot;)\n  // needed for the future flatMap/onComplete in the end\n  given executionContext: ExecutionContext = system.executionContext\n  \n\n  @main def httpExample() = {\n    val result = Http().singleRequest(HttpRequest(uri = &quot;https://stackoverflow.com&quot;, method = HttpMethods.GET))\n\n    val str = result.map(e =&gt; {\n        Unmarshal(e.entity).to[String]\n      }).flatten\n\n    println(Await.result(str, 10.seconds))\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690378153,"creation_date":1690365515,"question_id":76770059,"body_markdown":"I am facing trouble of extracting the response body as a string value from a http response in Java. I did an attempt with the answers here: https://stackoverflow.com/questions/32315789/akka-httpresponse-read-body-as-string-scala however I could not find something which would work out. By trail-and-error I came up to the following snippet, however I don&#39;t think it should be this difficult. So I am seeking for a simple way to do this. The current code snippet which I am using is:\r\n\r\n```java\r\nimport akka.actor.ActorSystem;\r\nimport akka.http.javadsl.Http;\r\nimport akka.http.javadsl.model.HttpRequest;\r\nimport akka.http.javadsl.model.HttpResponse;\r\nimport akka.stream.javadsl.Sink;\r\nimport akka.util.ByteString;\r\nimport com.typesafe.config.ConfigFactory;\r\n\r\npublic class App {\r\n\r\n    public static void main(String[] args) {\r\n        ActorSystem actorSystem = ActorSystem.create(ClientConfig.class.getSimpleName(), ConfigFactory.defaultApplication(App.class.getClassLoader()));\r\n        Http httpClient = akka.http.javadsl.Http.get(actorSystem);\r\n        HttpRequest httpRequest = HttpRequest.create(&quot;https://stackoverflow.com&quot;);\r\n\r\n        String responseBody = httpClient.singleRequest(httpRequest)\r\n                .thenApply((HttpResponse httpResponse) -&gt;\r\n                        httpResponse.entity()\r\n                                .getDataBytes()\r\n                                .fold(ByteString.emptyByteString(), ByteString::concat)\r\n                                .map(ByteString::utf8String)\r\n                                .runWith(Sink.head(), actorSystem)\r\n                                .toCompletableFuture()\r\n                                .join())\r\n                .toCompletableFuture()\r\n                .join();\r\n\r\n        System.out.println(responseBody);\r\n    }\r\n\r\n}\r\n```\r\n\r\nI am just wondering whether the body of the thenApply to transform the entity to a string needs to be this complex or are there other ways within the Akka library itself to simplify it.","title":"Akka - Extract response body as plain string value in Java","body":"<p>I am facing trouble of extracting the response body as a string value from a http response in Java. I did an attempt with the answers here: <a href=\"https://stackoverflow.com/questions/32315789/akka-httpresponse-read-body-as-string-scala\">akka HttpResponse read body as String scala</a> however I could not find something which would work out. By trail-and-error I came up to the following snippet, however I don't think it should be this difficult. So I am seeking for a simple way to do this. The current code snippet which I am using is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import akka.actor.ActorSystem;\nimport akka.http.javadsl.Http;\nimport akka.http.javadsl.model.HttpRequest;\nimport akka.http.javadsl.model.HttpResponse;\nimport akka.stream.javadsl.Sink;\nimport akka.util.ByteString;\nimport com.typesafe.config.ConfigFactory;\n\npublic class App {\n\n    public static void main(String[] args) {\n        ActorSystem actorSystem = ActorSystem.create(ClientConfig.class.getSimpleName(), ConfigFactory.defaultApplication(App.class.getClassLoader()));\n        Http httpClient = akka.http.javadsl.Http.get(actorSystem);\n        HttpRequest httpRequest = HttpRequest.create(&quot;https://stackoverflow.com&quot;);\n\n        String responseBody = httpClient.singleRequest(httpRequest)\n                .thenApply((HttpResponse httpResponse) -&gt;\n                        httpResponse.entity()\n                                .getDataBytes()\n                                .fold(ByteString.emptyByteString(), ByteString::concat)\n                                .map(ByteString::utf8String)\n                                .runWith(Sink.head(), actorSystem)\n                                .toCompletableFuture()\n                                .join())\n                .toCompletableFuture()\n                .join();\n\n        System.out.println(responseBody);\n    }\n\n}\n</code></pre>\n<p>I am just wondering whether the body of the thenApply to transform the entity to a string needs to be this complex or are there other ways within the Akka library itself to simplify it.</p>\n"},{"tags":["java","hibernate","kotlin","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1690377705,"post_id":76771709,"comment_id":135345007,"body_markdown":"Is it intentional that your `Foo` inherits from `BaseActivity` rather than from `Base`?","body":"Is it intentional that your <code>Foo</code> inherits from <code>BaseActivity</code> rather than from <code>Base</code>?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1690377925,"post_id":76771709,"comment_id":135345050,"body_markdown":"Do you have the Base marked as a MappedSuperclass or Entity so it knows to pick it up for annotation processing?","body":"Do you have the Base marked as a MappedSuperclass or Entity so it knows to pick it up for annotation processing?"},{"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"score":0,"creation_date":1690378054,"post_id":76771709,"comment_id":135345071,"body_markdown":"@JohnBollinger nope, that was a typo. I corrected.","body":"@JohnBollinger nope, that was a typo. I corrected."}],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690377955,"creation_date":1690377955,"answer_id":76771805,"question_id":76771709,"body_markdown":"&gt; But the `id` is defined in `Base`. Why is it complaining?\r\n\r\n&lt;s&gt;Possibly because `Foo` does not appear to inherit from `Base`.  But even if it did inherit from `Base`,&lt;/s&gt; annotations on the superclass and its members are of interest to JPA only if the superclass is a `@MappedSuperclass` or an `@Entity` itself.","title":"Why initialize id when is inherited from super class in JPA Hibernate","body":"<blockquote>\n<p>But the <code>id</code> is defined in <code>Base</code>. Why is it complaining?</p>\n</blockquote>\n<p><s>Possibly because <code>Foo</code> does not appear to inherit from <code>Base</code>.  But even if it did inherit from <code>Base</code>,</s> annotations on the superclass and its members are of interest to JPA only if the superclass is a <code>@MappedSuperclass</code> or an <code>@Entity</code> itself.</p>\n"}],"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76771805,"answer_count":1,"score":0,"last_activity_date":1690378039,"creation_date":1690377169,"question_id":76771709,"body_markdown":"I have this super-class\r\n\r\n\r\n    open class Base(\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY) var id: Long = 0,\r\n        @Column var userId: Long? = 0,\r\n        @Column var created: Date = Date(),\r\n        @Column var updated: Date = Date(),\r\n        @Column var currency: String = &quot;&quot;\r\n    )\r\n\r\nwhich I then inherit in the following class\r\n\r\n    @Entity\r\n    @Table(name = &quot;foo&quot;)\r\n    class Foo(\r\n        @Column var name: String = &quot;&quot;,\r\n    ) : Base()\r\n\r\nNow the compiler complains\r\n\r\n&gt; Persistent entity &#39;Foo&#39; should have primary key \r\n\r\nBut the `id` is defined in `Base`. Why is it complaining?","title":"Why initialize id when is inherited from super class in JPA Hibernate","body":"<p>I have this super-class</p>\n<pre><code>open class Base(\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY) var id: Long = 0,\n    @Column var userId: Long? = 0,\n    @Column var created: Date = Date(),\n    @Column var updated: Date = Date(),\n    @Column var currency: String = &quot;&quot;\n)\n</code></pre>\n<p>which I then inherit in the following class</p>\n<pre><code>@Entity\n@Table(name = &quot;foo&quot;)\nclass Foo(\n    @Column var name: String = &quot;&quot;,\n) : Base()\n</code></pre>\n<p>Now the compiler complains</p>\n<blockquote>\n<p>Persistent entity 'Foo' should have primary key</p>\n</blockquote>\n<p>But the <code>id</code> is defined in <code>Base</code>. Why is it complaining?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1690374760,"post_id":76771339,"comment_id":135344181,"body_markdown":"Please edit your question to show the code you have so far, and explain exactly where you are stuck. What were the &quot;problems with converting from ArrayNode to ObjectNode&quot;?","body":"Please edit your question to show the code you have so far, and explain exactly where you are stuck. What were the &quot;problems with converting from ArrayNode to ObjectNode&quot;?"},{"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"score":0,"creation_date":1690375762,"post_id":76771339,"comment_id":135344519,"body_markdown":"this is not a valid json, I am assuming it is an array of cards ?","body":"this is not a valid json, I am assuming it is an array of cards ?"}],"answers":[{"tags":[],"owner":{"account_id":49908,"reputation":4336,"user_id":148736,"accept_rate":63,"display_name":"Andrew Arrow"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690374854,"creation_date":1690374854,"answer_id":76771377,"question_id":76771339,"body_markdown":"You can iterate through the JSONArray, extract the individual values, and add them as separate fields in the existing JSON objects:\r\n\r\n```\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\npublic class JSONArrayToJSONFields {\r\n    public static void main(String[] args) {\r\n        String jsonInput = &quot;{\\n&quot; +\r\n                &quot;  \\&quot;carId\\&quot;: 1001,\\n&quot; +\r\n                &quot;  \\&quot;driverIndex\\&quot;: 0,\\n&quot; +\r\n                &quot;  \\&quot;laptime\\&quot;: 173001,\\n&quot; +\r\n                &quot;  \\&quot;isValidForBest\\&quot;: false,\\n&quot; +\r\n                &quot;  \\&quot;splits\\&quot;: [\\n&quot; +\r\n                &quot;    91851,\\n&quot; +\r\n                &quot;    52002,\\n&quot; +\r\n                &quot;    29147\\n&quot; +\r\n                &quot;  ]\\n&quot; +\r\n                &quot;}&quot;;\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        try {\r\n            JsonNode rootNode = mapper.readTree(jsonInput);\r\n```","title":"How to parse JSONArray to JSON fields?","body":"<p>You can iterate through the JSONArray, extract the individual values, and add them as separate fields in the existing JSON objects:</p>\n<pre><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic class JSONArrayToJSONFields {\n    public static void main(String[] args) {\n        String jsonInput = &quot;{\\n&quot; +\n                &quot;  \\&quot;carId\\&quot;: 1001,\\n&quot; +\n                &quot;  \\&quot;driverIndex\\&quot;: 0,\\n&quot; +\n                &quot;  \\&quot;laptime\\&quot;: 173001,\\n&quot; +\n                &quot;  \\&quot;isValidForBest\\&quot;: false,\\n&quot; +\n                &quot;  \\&quot;splits\\&quot;: [\\n&quot; +\n                &quot;    91851,\\n&quot; +\n                &quot;    52002,\\n&quot; +\n                &quot;    29147\\n&quot; +\n                &quot;  ]\\n&quot; +\n                &quot;}&quot;;\n\n        ObjectMapper mapper = new ObjectMapper();\n        try {\n            JsonNode rootNode = mapper.readTree(jsonInput);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690377688,"creation_date":1690377688,"answer_id":76771769,"question_id":76771339,"body_markdown":"assuming that the input is an Array of cards \r\n\r\n```\r\nJsonNode root = new ObjectMapper().readTree(jsonString);\r\nroot.forEach(\r\n        card -&gt; {\r\n            ObjectNode cardObject = (ObjectNode) card;\r\n            ArrayNode splits = (ArrayNode) cardObject.remove(&quot;splits&quot;);\r\n            for(int i=0; i &lt; splits.size(); i++) {\r\n                cardObject.put(&quot;sector&quot;+i, splits.get(i));\r\n            }\r\n        }\r\n);\r\nreturn root;\r\n```","title":"How to parse JSONArray to JSON fields?","body":"<p>assuming that the input is an Array of cards</p>\n<pre><code>JsonNode root = new ObjectMapper().readTree(jsonString);\nroot.forEach(\n        card -&gt; {\n            ObjectNode cardObject = (ObjectNode) card;\n            ArrayNode splits = (ArrayNode) cardObject.remove(&quot;splits&quot;);\n            for(int i=0; i &lt; splits.size(); i++) {\n                cardObject.put(&quot;sector&quot;+i, splits.get(i));\n            }\n        }\n);\nreturn root;\n</code></pre>\n"}],"owner":{"account_id":29095231,"reputation":9,"user_id":22288234,"display_name":"Kowal998"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1690377902,"creation_date":1690374619,"question_id":76771339,"body_markdown":"As shown in title, I want to convert JSONArray (defined in &quot;splits&quot; field) to JSON fields using Java. I couldn&#39;t find a similar topic here, if I missed something please let me know.\r\n\r\nBit of my JSON is shown below:\r\n\r\n```json\r\n{\r\n  &quot;carId&quot;: 1001,\r\n  &quot;driverIndex&quot;: 0,\r\n  &quot;laptime&quot;: 173001,\r\n  &quot;isValidForBest&quot;: false,\r\n  &quot;splits&quot;: [\r\n    91851,\r\n    52002,\r\n    29147\r\n  ]\r\n},\r\n{\r\n  &quot;carId&quot;: 1001,\r\n  &quot;driverIndex&quot;: 0,\r\n  &quot;laptime&quot;: 107270,\r\n  &quot;isValidForBest&quot;: true,\r\n  &quot;splits&quot;: [\r\n    26295,\r\n    51960,\r\n    29015\r\n  ]\r\n}\r\n```\r\n\r\n\r\nI want to achieve something like this:\r\n\r\n```json\r\n{\r\n  &quot;carId&quot;: 1001,\r\n  &quot;driverIndex&quot;: 0,\r\n  &quot;laptime&quot;: 173001,\r\n  &quot;isValidForBest&quot;: false,\r\n  &quot;sector1&quot;: 91851,\r\n  &quot;sector2&quot;: 52002,\r\n  &quot;sector3&quot;: 29147\r\n},\r\n{\r\n  &quot;carId&quot;: 1001,\r\n  &quot;driverIndex&quot;: 0,\r\n  &quot;laptime&quot;: 107270,\r\n  &quot;isValidForBest&quot;: true,\r\n  &quot;sector1&quot;: 26295,\r\n  &quot;sector2&quot;: 51960,\r\n  &quot;sector3&quot;: 29015\r\n}\r\n```\r\n\r\nI found some ways to solve it by parsing array to a new object, but I don&#39;t want to create it if possible, because another object would make further code much more complicated and I want it to be as simple as possible. Values in &quot;splits&quot; field are also not used anywhere else. \r\n\r\nI tried using JsonNode and ObjectNode from package com.fasterxml.jackson.databind, but there were problems with converting from ArrayNode to ObjectNode and nothing found on web was helpful.","title":"How to parse JSONArray to JSON fields?","body":"<p>As shown in title, I want to convert JSONArray (defined in &quot;splits&quot; field) to JSON fields using Java. I couldn't find a similar topic here, if I missed something please let me know.</p>\n<p>Bit of my JSON is shown below:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;carId&quot;: 1001,\n  &quot;driverIndex&quot;: 0,\n  &quot;laptime&quot;: 173001,\n  &quot;isValidForBest&quot;: false,\n  &quot;splits&quot;: [\n    91851,\n    52002,\n    29147\n  ]\n},\n{\n  &quot;carId&quot;: 1001,\n  &quot;driverIndex&quot;: 0,\n  &quot;laptime&quot;: 107270,\n  &quot;isValidForBest&quot;: true,\n  &quot;splits&quot;: [\n    26295,\n    51960,\n    29015\n  ]\n}\n</code></pre>\n<p>I want to achieve something like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;carId&quot;: 1001,\n  &quot;driverIndex&quot;: 0,\n  &quot;laptime&quot;: 173001,\n  &quot;isValidForBest&quot;: false,\n  &quot;sector1&quot;: 91851,\n  &quot;sector2&quot;: 52002,\n  &quot;sector3&quot;: 29147\n},\n{\n  &quot;carId&quot;: 1001,\n  &quot;driverIndex&quot;: 0,\n  &quot;laptime&quot;: 107270,\n  &quot;isValidForBest&quot;: true,\n  &quot;sector1&quot;: 26295,\n  &quot;sector2&quot;: 51960,\n  &quot;sector3&quot;: 29015\n}\n</code></pre>\n<p>I found some ways to solve it by parsing array to a new object, but I don't want to create it if possible, because another object would make further code much more complicated and I want it to be as simple as possible. Values in &quot;splits&quot; field are also not used anywhere else.</p>\n<p>I tried using JsonNode and ObjectNode from package com.fasterxml.jackson.databind, but there were problems with converting from ArrayNode to ObjectNode and nothing found on web was helpful.</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":8628424,"reputation":91,"user_id":6460906,"display_name":"Dmitrii Podlesnykh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690377245,"creation_date":1690377245,"answer_id":76771718,"question_id":76771391,"body_markdown":"You can modify your Spring Security configuration.\r\nThe main idea: we are able to configure endpoints permission separately.\r\n\r\n - HTTPS is for &quot;*/receiveFile*&quot; endpoint\r\n - HTTP is for all other endpoint\r\n\r\nSolution might look like this:  \r\n\r\n\r\n    @Configuration\r\n        public class SslWebSecurityConfigurerAdapter extends WebSecurityConfigurerAdapter {\r\n        \r\n        \t@Override\r\n        \tprotected void configure(HttpSecurity http) throws Exception {\r\n                    http.defaultSuccessUrl(&quot;/app/dashboard&quot;)\r\n                      .and().requiresChannel().antMatchers(&quot;/receiveFile&quot;).requiresSecure();\r\n     \r\n        \t}\r\n        \r\n        }\r\n\r\n\r\nMore details: [Baeldung: 5. Mixing HTTP and HTTPS][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-channel-security-https#mixing","title":"How can i enable specific pathes to work with http","body":"<p>You can modify your Spring Security configuration.\nThe main idea: we are able to configure endpoints permission separately.</p>\n<ul>\n<li>HTTPS is for &quot;<em>/receiveFile</em>&quot; endpoint</li>\n<li>HTTP is for all other endpoint</li>\n</ul>\n<p>Solution might look like this:</p>\n<pre><code>@Configuration\n    public class SslWebSecurityConfigurerAdapter extends WebSecurityConfigurerAdapter {\n    \n        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n                http.defaultSuccessUrl(&quot;/app/dashboard&quot;)\n                  .and().requiresChannel().antMatchers(&quot;/receiveFile&quot;).requiresSecure();\n \n        }\n    \n    }\n</code></pre>\n<p>More details: <a href=\"https://www.baeldung.com/spring-channel-security-https#mixing\" rel=\"nofollow noreferrer\">Baeldung: 5. Mixing HTTP and HTTPS</a></p>\n"}],"owner":{"account_id":13372240,"reputation":51,"user_id":9650262,"display_name":"INFORMATIKER IM ALL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690377245,"creation_date":1690374980,"question_id":76771391,"body_markdown":"i have a spring boot application with the following settings:\r\n\r\n    # The format used for the keystore\r\n    server.ssl.key-store-type=PKCS12\r\n    # The path to the keystore containing the certificate\r\n    server.ssl.key-store=classpath:keystore/localhost.p12\r\n    # The password used to generate the certificate\r\n    server.ssl.key-store-password=passwort\r\n    # The alias mapped to the certificate\r\n    server.ssl.key-alias=localhost\r\n    #only accepting ssl requests\r\n    server.ssl.enabled=true\r\n\r\n\r\nNow i have a couple of Restendpoints.\r\nI just want one specific Endpoint like &quot;receiveFile(&quot;/receiveFile&quot;)&quot; to only allow ssl secured connection like &quot;https://&quot;. all the other should accept normal http request like &quot;http://l....&quot;\r\n\r\nHow can i get this done?","title":"How can i enable specific pathes to work with http","body":"<p>i have a spring boot application with the following settings:</p>\n<pre><code># The format used for the keystore\nserver.ssl.key-store-type=PKCS12\n# The path to the keystore containing the certificate\nserver.ssl.key-store=classpath:keystore/localhost.p12\n# The password used to generate the certificate\nserver.ssl.key-store-password=passwort\n# The alias mapped to the certificate\nserver.ssl.key-alias=localhost\n#only accepting ssl requests\nserver.ssl.enabled=true\n</code></pre>\n<p>Now i have a couple of Restendpoints.\nI just want one specific Endpoint like &quot;receiveFile(&quot;/receiveFile&quot;)&quot; to only allow ssl secured connection like &quot;https://&quot;. all the other should accept normal http request like &quot;http://l....&quot;</p>\n<p>How can i get this done?</p>\n"},{"tags":["java","metadata","apache-beam","avro"],"owner":{"account_id":24528234,"reputation":1,"user_id":18440422,"display_name":"Cameron Mathis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690377227,"creation_date":1690307502,"question_id":76765351,"body_markdown":"I am unable to write custom Metadata to Avro files in Java via writeCustomTypeToGenericRecords.\r\n\r\nI have the following code that I am using to write Avro files in an Apache Beam pipeline:\r\n\r\n```Java\r\nprivate &lt;T&gt; WriteFilesResult&lt;String&gt; writeAvroFiles(PCollection&lt;T&gt; pcollection, DynamicAvroWriter&lt;T&gt; dynamicAvroWriter) {\r\n    return pcollection.apply(&quot;Write .avro files&quot;, AvroIO.&lt;T&gt;writeCustomTypeToGenericRecords()\r\n        .to(dynamicAvroWriter)\r\n        .withTempDirectory(tempDirectory)\r\n        .withMetadata(ImmutableMap.of(&quot;modelVersion&quot;, MODEL_VERSION))\r\n        .withSuffix(AVRO_SUFFIX));\r\n}\r\n```\r\n\r\nThe code writes the files without throwing any errors. But when I am trying to read the metadata, I only see the reserved metadata (avro.schema and avro.codec). Can anyone help me with this? Below is the code I am using to read the Avro files:\r\n\r\n```JAVA\r\npublic String read(String inputFile, String outputFile) {\r\n    DatumReader&lt;GenericRecord&gt; datumReader = new GenericDatumReader&lt;&gt;();\r\n    \r\n    try (DataFileReader&lt;GenericRecord&gt; dataFileReader = new DataFileReader&lt;&gt;(new File(inputFile), datumReader); PrintWriter outputStream = new PrintWriter(new FileWriter(outputFile))) {\r\n        outputStream.println(&quot;Model Version: &quot; + dataFileReader.getMetaString(&quot;modelVersion&quot;));\r\n        outputStream.println(&quot;Schema: &quot; + dataFileReader.getSchema());\r\n        int recordCount = 0;\r\n        GenericRecord genericRecord = null;\r\n        while (dataFileReader.hasNext()) {\r\n            genericRecord = dataFileReader.next(genericRecord);\r\n            outputStream.println(&quot;Record: &quot; + genericRecord.toString());\r\n            recordCount++;\r\n        }\r\n        outputStream.println(&quot;Total Record Count: &quot; + recordCount);\r\n    } catch (IOException ioException) {\r\n        ioException.printStackTrace();\r\n    }\r\n    \r\n    return &quot;Successfully wrote &quot; + outputFile;\r\n}\r\n```","title":"How to write metaData to an Avro file in Java via writeCustomTypeToGenericRecords?","body":"<p>I am unable to write custom Metadata to Avro files in Java via writeCustomTypeToGenericRecords.</p>\n<p>I have the following code that I am using to write Avro files in an Apache Beam pipeline:</p>\n<pre><code>private &lt;T&gt; WriteFilesResult&lt;String&gt; writeAvroFiles(PCollection&lt;T&gt; pcollection, DynamicAvroWriter&lt;T&gt; dynamicAvroWriter) {\n    return pcollection.apply(&quot;Write .avro files&quot;, AvroIO.&lt;T&gt;writeCustomTypeToGenericRecords()\n        .to(dynamicAvroWriter)\n        .withTempDirectory(tempDirectory)\n        .withMetadata(ImmutableMap.of(&quot;modelVersion&quot;, MODEL_VERSION))\n        .withSuffix(AVRO_SUFFIX));\n}\n</code></pre>\n<p>The code writes the files without throwing any errors. But when I am trying to read the metadata, I only see the reserved metadata (avro.schema and avro.codec). Can anyone help me with this? Below is the code I am using to read the Avro files:</p>\n<pre><code>public String read(String inputFile, String outputFile) {\n    DatumReader&lt;GenericRecord&gt; datumReader = new GenericDatumReader&lt;&gt;();\n    \n    try (DataFileReader&lt;GenericRecord&gt; dataFileReader = new DataFileReader&lt;&gt;(new File(inputFile), datumReader); PrintWriter outputStream = new PrintWriter(new FileWriter(outputFile))) {\n        outputStream.println(&quot;Model Version: &quot; + dataFileReader.getMetaString(&quot;modelVersion&quot;));\n        outputStream.println(&quot;Schema: &quot; + dataFileReader.getSchema());\n        int recordCount = 0;\n        GenericRecord genericRecord = null;\n        while (dataFileReader.hasNext()) {\n            genericRecord = dataFileReader.next(genericRecord);\n            outputStream.println(&quot;Record: &quot; + genericRecord.toString());\n            recordCount++;\n        }\n        outputStream.println(&quot;Total Record Count: &quot; + recordCount);\n    } catch (IOException ioException) {\n        ioException.printStackTrace();\n    }\n    \n    return &quot;Successfully wrote &quot; + outputFile;\n}\n</code></pre>\n"},{"tags":["java","generics","wildcard"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1690377063,"post_id":76771646,"comment_id":135344870,"body_markdown":"BTW: `carMap.forEach((key, value) -&gt; { ... })` is a neater way to iterate the entry set.","body":"BTW: <code>carMap.forEach((key, value) -&gt; { ... })</code> is a neater way to iterate the entry set."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690377005,"creation_date":1690377005,"answer_id":76771683,"question_id":76771646,"body_markdown":"&gt; They extends the same class\r\n\r\nNo, each occurrence of `? extends Car` is considered to be a different type, because they could be different types. The signature of `doSomething` requires them to be the same.\r\n\r\nUnless there&#39;s a good reason for `doSomething` to require both Class and List to be bounded by the exact same type, you could simply use a wildcard there:\r\n\r\n```\r\nprivate void doSomething(final Map&lt;Class&lt;? extends Car&gt;, List&lt;? extends Car&gt;&gt; carMap) {\r\n```","title":"Compilation error passing wildcards to generics method","body":"<blockquote>\n<p>They extends the same class</p>\n</blockquote>\n<p>No, each occurrence of <code>? extends Car</code> is considered to be a different type, because they could be different types. The signature of <code>doSomething</code> requires them to be the same.</p>\n<p>Unless there's a good reason for <code>doSomething</code> to require both Class and List to be bounded by the exact same type, you could simply use a wildcard there:</p>\n<pre><code>private void doSomething(final Map&lt;Class&lt;? extends Car&gt;, List&lt;? extends Car&gt;&gt; carMap) {\n</code></pre>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76771683,"answer_count":1,"score":0,"last_activity_date":1690377005,"creation_date":1690376679,"question_id":76771646,"body_markdown":"I would like to understand why it is not possible to pass wildcards to generics, and what is the best solution for that.\r\n\r\nI will use a simple reproducible example, but the code is more complex.\r\n\r\nI have a method that takes as a parameter a map of Class&lt;GENERIC_TYPE&gt; as key and List&lt;GENERIC_TYPE&gt; as value.\r\n\r\n    private &lt;CAR extends Car&gt; void doSomething(final Map&lt;Class&lt;CAR&gt;, List&lt;CAR&gt;&gt; carMap) {\r\n        carMap.entrySet().stream().forEach(entry -&gt; {\r\n    \t\tSystem.out.println(&quot;\\n&quot; + entry.getKey().getSimpleName() + &quot;\\n&quot; + entry.getValue() + &quot;\\n&quot;);\r\n    \t});\r\n    }\r\n\r\nThe method that is in charge of passing the map to the method &quot;doSomething&quot; doesn&#39;t have generics (and I cannot add bounded generics because is overriding a method of an interface) \r\n\r\nso the Map is declared using wildcards:\r\n\r\n    @Override\r\n    public void doSomethingPowerfull() {\r\n    \tBmw bmwM1 = new Bmw(&quot;BMW&quot;, &quot;M1&quot;);\r\n    \tBmw bmwM3 = new Bmw(&quot;BMW&quot;, &quot;M3&quot;);\r\n    \tBmw bmwM5 = new Bmw(&quot;BMW&quot;, &quot;M5&quot;);\r\n    \tList&lt;Bmw&gt; bmw = List.of(bmwM1, bmwM3, bmwM5);\r\n    \r\n    \tAudi audiS1 = new Audi(&quot;Audi&quot;, &quot;S1&quot;);\r\n    \tAudi audiS3 = new Audi(&quot;Audi&quot;, &quot;S3&quot;);\r\n    \tAudi audiS5 = new Audi(&quot;Audi&quot;, &quot;S5&quot;);\r\n    \tList&lt;Audi&gt; audi = List.of(audiS1, audiS3, audiS5);\r\n    \r\n    \tMap&lt;Class&lt;? extends Car&gt;, List&lt;? extends Car&gt;&gt; carMap = new HashMap&lt;&gt;();\r\n    \tcarMap.put(Audi.class, audi);\r\n    \tcarMap.put(Bmw.class, bmw);\r\n    \r\n    \tdoSomething(carMap); // COMPILATION ERROR\r\n        // The method doSomething(Map&lt;Class&lt;CAR&gt;,List&lt;CAR&gt;&gt;) in the type TestWildCardGenerics is not applicable for the arguments (Map&lt;Class&lt;? extends TestWildCardGenerics.Car&gt;,List&lt;? extends TestWildCardGenerics.Car&gt;&gt;)\r\n    }\r\n\r\nThey extends the same class, so why I&#39;m not able to pass this map?\r\n\r\nHere is the complete test class:\r\n\r\n    public class TestWildCardGenerics {\r\n    \r\n    \tpublic void test() {\r\n    \t\tBmw bmwM1 = new Bmw(&quot;M1&quot;);\r\n    \t\tBmw bmwM3 = new Bmw(&quot;M3&quot;);\r\n    \t\tBmw bmwM5 = new Bmw(&quot;M5&quot;);\r\n    \t\tList&lt;Bmw&gt; bmw = List.of(bmwM1, bmwM3, bmwM5);\r\n    \r\n    \t\tAudi audiS1 = new Audi(&quot;S1&quot;);\r\n    \t\tAudi audiS3 = new Audi(&quot;S3&quot;);\r\n    \t\tAudi audiS5 = new Audi(&quot;S5&quot;);\r\n    \t\tList&lt;Audi&gt; audi = List.of(audiS1, audiS3, audiS5);\r\n    \r\n    \t\tMap&lt;Class&lt;? extends Car&gt;, List&lt;? extends Car&gt;&gt; carMap = new HashMap&lt;&gt;();\r\n    \t\tcarMap.put(Audi.class, audi);\r\n    \t\tcarMap.put(Bmw.class, bmw);\r\n    \r\n    \t\tdoSomething(carMap);\r\n    \t}\r\n    \r\n    \tprivate &lt;CAR extends Car&gt; void doSomething(final Map&lt;Class&lt;CAR&gt;, List&lt;CAR&gt;&gt; carMap) {\r\n    \t\tcarMap.entrySet().stream().forEach(entry -&gt; {\r\n    \t\t\tSystem.out.println(&quot;\\n&quot; + entry.getKey().getSimpleName() + &quot;\\n&quot; + entry.getValue() + &quot;\\n&quot;);\r\n    \t\t});\r\n    \t}\r\n    \r\n    \t@Data\r\n    \t@AllArgsConstructor\r\n    \tpublic abstract class Car {\r\n    \t\tprotected String name;\r\n    \t}\r\n    \r\n    \t@Data\r\n    \t@ToString(callSuper = true)\r\n    \tpublic class Audi extends Car {\r\n    \t\tprivate String sModel;\r\n    \r\n    \t\tpublic Audi(final String sModel) {\r\n    \t\t\tsuper(&quot;Audi&quot;);\r\n    \t\t\tthis.sModel = sModel;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Data\r\n    \t@ToString(callSuper = true)\r\n    \tpublic class Bmw extends Car {\r\n    \t\tprivate String mModel;\r\n    \r\n    \t\tpublic Bmw(final String mModel) {\r\n    \t\t\tsuper(&quot;BMW&quot;);\r\n    \t\t\tthis.mModel = mModel;\r\n    \t\t}\r\n    \t}\r\n    \r\n    }","title":"Compilation error passing wildcards to generics method","body":"<p>I would like to understand why it is not possible to pass wildcards to generics, and what is the best solution for that.</p>\n<p>I will use a simple reproducible example, but the code is more complex.</p>\n<p>I have a method that takes as a parameter a map of Class&lt;GENERIC_TYPE&gt; as key and List&lt;GENERIC_TYPE&gt; as value.</p>\n<pre><code>private &lt;CAR extends Car&gt; void doSomething(final Map&lt;Class&lt;CAR&gt;, List&lt;CAR&gt;&gt; carMap) {\n    carMap.entrySet().stream().forEach(entry -&gt; {\n        System.out.println(&quot;\\n&quot; + entry.getKey().getSimpleName() + &quot;\\n&quot; + entry.getValue() + &quot;\\n&quot;);\n    });\n}\n</code></pre>\n<p>The method that is in charge of passing the map to the method &quot;doSomething&quot; doesn't have generics (and I cannot add bounded generics because is overriding a method of an interface)</p>\n<p>so the Map is declared using wildcards:</p>\n<pre><code>@Override\npublic void doSomethingPowerfull() {\n    Bmw bmwM1 = new Bmw(&quot;BMW&quot;, &quot;M1&quot;);\n    Bmw bmwM3 = new Bmw(&quot;BMW&quot;, &quot;M3&quot;);\n    Bmw bmwM5 = new Bmw(&quot;BMW&quot;, &quot;M5&quot;);\n    List&lt;Bmw&gt; bmw = List.of(bmwM1, bmwM3, bmwM5);\n\n    Audi audiS1 = new Audi(&quot;Audi&quot;, &quot;S1&quot;);\n    Audi audiS3 = new Audi(&quot;Audi&quot;, &quot;S3&quot;);\n    Audi audiS5 = new Audi(&quot;Audi&quot;, &quot;S5&quot;);\n    List&lt;Audi&gt; audi = List.of(audiS1, audiS3, audiS5);\n\n    Map&lt;Class&lt;? extends Car&gt;, List&lt;? extends Car&gt;&gt; carMap = new HashMap&lt;&gt;();\n    carMap.put(Audi.class, audi);\n    carMap.put(Bmw.class, bmw);\n\n    doSomething(carMap); // COMPILATION ERROR\n    // The method doSomething(Map&lt;Class&lt;CAR&gt;,List&lt;CAR&gt;&gt;) in the type TestWildCardGenerics is not applicable for the arguments (Map&lt;Class&lt;? extends TestWildCardGenerics.Car&gt;,List&lt;? extends TestWildCardGenerics.Car&gt;&gt;)\n}\n</code></pre>\n<p>They extends the same class, so why I'm not able to pass this map?</p>\n<p>Here is the complete test class:</p>\n<pre><code>public class TestWildCardGenerics {\n\n    public void test() {\n        Bmw bmwM1 = new Bmw(&quot;M1&quot;);\n        Bmw bmwM3 = new Bmw(&quot;M3&quot;);\n        Bmw bmwM5 = new Bmw(&quot;M5&quot;);\n        List&lt;Bmw&gt; bmw = List.of(bmwM1, bmwM3, bmwM5);\n\n        Audi audiS1 = new Audi(&quot;S1&quot;);\n        Audi audiS3 = new Audi(&quot;S3&quot;);\n        Audi audiS5 = new Audi(&quot;S5&quot;);\n        List&lt;Audi&gt; audi = List.of(audiS1, audiS3, audiS5);\n\n        Map&lt;Class&lt;? extends Car&gt;, List&lt;? extends Car&gt;&gt; carMap = new HashMap&lt;&gt;();\n        carMap.put(Audi.class, audi);\n        carMap.put(Bmw.class, bmw);\n\n        doSomething(carMap);\n    }\n\n    private &lt;CAR extends Car&gt; void doSomething(final Map&lt;Class&lt;CAR&gt;, List&lt;CAR&gt;&gt; carMap) {\n        carMap.entrySet().stream().forEach(entry -&gt; {\n            System.out.println(&quot;\\n&quot; + entry.getKey().getSimpleName() + &quot;\\n&quot; + entry.getValue() + &quot;\\n&quot;);\n        });\n    }\n\n    @Data\n    @AllArgsConstructor\n    public abstract class Car {\n        protected String name;\n    }\n\n    @Data\n    @ToString(callSuper = true)\n    public class Audi extends Car {\n        private String sModel;\n\n        public Audi(final String sModel) {\n            super(&quot;Audi&quot;);\n            this.sModel = sModel;\n        }\n    }\n\n    @Data\n    @ToString(callSuper = true)\n    public class Bmw extends Car {\n        private String mModel;\n\n        public Bmw(final String mModel) {\n            super(&quot;BMW&quot;);\n            this.mModel = mModel;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":13352626,"reputation":335,"user_id":9637371,"display_name":"Bestows In Constructing"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690376938,"creation_date":1595485025,"answer_id":63048030,"question_id":61598288,"body_markdown":"Here is a code\r\n\r\n\r\n    public class EncodingUtils {\r\n        private EncodingUtils() {\r\n        }\r\n    \r\n        public static String decodeKoi8r(String text) {\r\n            String decode;\r\n            try {\r\n                decode = MimeUtility.decodeText(text);\r\n            } catch (UnsupportedEncodingException e) {\r\n                decode = text;\r\n            }\r\n    \r\n            if (isQuotedKoi8r(decode)) {\r\n                decode = decode(text, &quot;KOI8-R&quot;, &quot;quoted-printable&quot;, &quot;KOI8-R&quot;);\r\n            }\r\n            return decode;\r\n        }\r\n    \r\n        public static boolean isQuotedKoi8r(String text) {\r\n            return text.contains(&quot;=&quot;) || text.toLowerCase().contains(&quot;koi8-r&quot;);\r\n        }\r\n    \r\n        public static String decode(String text, String textEncoding, String encoding, String resultCharset) {\r\n            if (text.length() == 0) {\r\n                return text;\r\n            }\r\n    \r\n            try {\r\n                byte[] bytes = text.getBytes(textEncoding);\r\n                InputStream decodedStream = MimeUtility.decode(new ByteArrayInputStream(bytes), encoding);\r\n                byte[] tmp = new byte[bytes.length];\r\n                int n = decodedStream.read(tmp);\r\n                byte[] res = new byte[n];\r\n                System.arraycopy(tmp, 0, res, 0, n);\r\n                return new String(res, resultCharset);\r\n            } catch (IOException | MessagingException e) {\r\n                return text;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nAnd test:\r\n\r\n    public class EncodingUtilsTest {\r\n        @Test\r\n        public void koi8r() {\r\n            String input = &quot;=?koi8-r?Q?11=5F=F4=ED=5F21=2E05=2Erar?=&quot;;\r\n            String decode = EncodingUtils.decodeKoi8r(input);\r\n            Assertions.assertEquals(&quot;11_ТМ_21.05.rar&quot;, decode);\r\n        }\r\n    \r\n        @Test\r\n        public void koi8rWithoutStartTag() {\r\n            String input = &quot;=CF=D4=C4=C5=CC=D8=CE=D9=CD =D4=D2=C1=CE=DB=C5=CD =D2=C5=DA=C0=CD=.eml&quot;;\r\n            String decode = EncodingUtils.decodeKoi8r(input);\r\n            //Тут знак &quot;=&quot; вконце, это битые исходныые данные, если заменить исходную строку на =CF=D4=C4=C5=CC=D8=CE=D9=CD =D4=D2=C1=CE=DB=C5=CD =D2=C5=DA=C0=CD=C5.eml будет нормальное слово &quot;резюме&quot;\r\n            Assertions.assertEquals(&quot;отдельным траншем резюм=.eml&quot;, decode);\r\n        }\r\n    }\r\n\r\nGood day!","title":"Decode koi8-r string and quoted-printable in java","body":"<p>Here is a code</p>\n<pre><code>public class EncodingUtils {\n    private EncodingUtils() {\n    }\n\n    public static String decodeKoi8r(String text) {\n        String decode;\n        try {\n            decode = MimeUtility.decodeText(text);\n        } catch (UnsupportedEncodingException e) {\n            decode = text;\n        }\n\n        if (isQuotedKoi8r(decode)) {\n            decode = decode(text, &quot;KOI8-R&quot;, &quot;quoted-printable&quot;, &quot;KOI8-R&quot;);\n        }\n        return decode;\n    }\n\n    public static boolean isQuotedKoi8r(String text) {\n        return text.contains(&quot;=&quot;) || text.toLowerCase().contains(&quot;koi8-r&quot;);\n    }\n\n    public static String decode(String text, String textEncoding, String encoding, String resultCharset) {\n        if (text.length() == 0) {\n            return text;\n        }\n\n        try {\n            byte[] bytes = text.getBytes(textEncoding);\n            InputStream decodedStream = MimeUtility.decode(new ByteArrayInputStream(bytes), encoding);\n            byte[] tmp = new byte[bytes.length];\n            int n = decodedStream.read(tmp);\n            byte[] res = new byte[n];\n            System.arraycopy(tmp, 0, res, 0, n);\n            return new String(res, resultCharset);\n        } catch (IOException | MessagingException e) {\n            return text;\n        }\n    }\n}\n</code></pre>\n<p>And test:</p>\n<pre><code>public class EncodingUtilsTest {\n    @Test\n    public void koi8r() {\n        String input = &quot;=?koi8-r?Q?11=5F=F4=ED=5F21=2E05=2Erar?=&quot;;\n        String decode = EncodingUtils.decodeKoi8r(input);\n        Assertions.assertEquals(&quot;11_ТМ_21.05.rar&quot;, decode);\n    }\n\n    @Test\n    public void koi8rWithoutStartTag() {\n        String input = &quot;=CF=D4=C4=C5=CC=D8=CE=D9=CD =D4=D2=C1=CE=DB=C5=CD =D2=C5=DA=C0=CD=.eml&quot;;\n        String decode = EncodingUtils.decodeKoi8r(input);\n        //Тут знак &quot;=&quot; вконце, это битые исходныые данные, если заменить исходную строку на =CF=D4=C4=C5=CC=D8=CE=D9=CD =D4=D2=C1=CE=DB=C5=CD =D2=C5=DA=C0=CD=C5.eml будет нормальное слово &quot;резюме&quot;\n        Assertions.assertEquals(&quot;отдельным траншем резюм=.eml&quot;, decode);\n    }\n}\n</code></pre>\n<p>Good day!</p>\n"}],"owner":{"account_id":13352626,"reputation":335,"user_id":9637371,"display_name":"Bestows In Constructing"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":487,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63048030,"answer_count":1,"score":0,"last_activity_date":1690376938,"creation_date":1588613861,"question_id":61598288,"body_markdown":"I got a .eml file, and some attachments inside\r\n\r\none of attachments - is .rar file\r\n\r\nI using Tika to extract this rar, but sometimes Tika cant correctly convert some names of files, for example - such a name\r\n\r\n    =?koi8-r?Q?6=5F=F4=ED=5F15=2E05=2Erar?=\r\n\r\nSo i was looking for an answer, how to convert such a string to correctly readed value\r\n\r\nIs there any libraries in java, to do this?\r\n\r\nI guess it happends cause string got `=?koi8-r?Q?` in the start, so maybe, if i convert string to something like this, i will get move convertable value, like this `6=5F=F4=ED=5F15=2E05=2E`, but if i will do so, i finnaly couldnt find a solution to convert\r\n\r\nDoes anybody know how to convert such a string correctly?\r\n\r\nI spend a lot of time to make it, but still - no results...","title":"Decode koi8-r string and quoted-printable in java","body":"<p>I got a .eml file, and some attachments inside</p>\n\n<p>one of attachments - is .rar file</p>\n\n<p>I using Tika to extract this rar, but sometimes Tika cant correctly convert some names of files, for example - such a name</p>\n\n<pre><code>=?koi8-r?Q?6=5F=F4=ED=5F15=2E05=2Erar?=\n</code></pre>\n\n<p>So i was looking for an answer, how to convert such a string to correctly readed value</p>\n\n<p>Is there any libraries in java, to do this?</p>\n\n<p>I guess it happends cause string got <code>=?koi8-r?Q?</code> in the start, so maybe, if i convert string to something like this, i will get move convertable value, like this <code>6=5F=F4=ED=5F15=2E05=2E</code>, but if i will do so, i finnaly couldnt find a solution to convert</p>\n\n<p>Does anybody know how to convert such a string correctly?</p>\n\n<p>I spend a lot of time to make it, but still - no results...</p>\n"},{"tags":["java","html","spring-boot","web","thymeleaf"],"comments":[{"owner":{"account_id":18391609,"reputation":87,"user_id":13397146,"display_name":"Josselin Beaud&#39;huy"},"score":0,"creation_date":1690388763,"post_id":76771665,"comment_id":135347626,"body_markdown":"Try #ctx.session.car.products","body":"Try #ctx.session.car.products"},{"owner":{"account_id":18391609,"reputation":87,"user_id":13397146,"display_name":"Josselin Beaud&#39;huy"},"score":0,"creation_date":1690389638,"post_id":76771665,"comment_id":135347852,"body_markdown":"What&#39;s your thymeleaf version ?","body":"What&#39;s your thymeleaf version ?"},{"owner":{"account_id":24960092,"reputation":3,"user_id":22288620,"display_name":"IvanD"},"score":0,"creation_date":1690390713,"post_id":76771665,"comment_id":135348115,"body_markdown":"@JosselinBeaud&#39;huy I use spring boot starter: spring-boot-starter-thymeleaf","body":"@JosselinBeaud&#39;huy I use spring boot starter: spring-boot-starter-thymeleaf"},{"owner":{"account_id":24960092,"reputation":3,"user_id":22288620,"display_name":"IvanD"},"score":0,"creation_date":1690391046,"post_id":76771665,"comment_id":135348190,"body_markdown":"@JosselinBeaud&#39;huy #ctx.session.car.products not works","body":"@JosselinBeaud&#39;huy #ctx.session.car.products not works"},{"owner":{"account_id":18391609,"reputation":87,"user_id":13397146,"display_name":"Josselin Beaud&#39;huy"},"score":0,"creation_date":1690394324,"post_id":76771665,"comment_id":135348933,"body_markdown":"What&#39;s your spirngboot version ? Maybe a bug. I tried on my env and it works","body":"What&#39;s your spirngboot version ? Maybe a bug. I tried on my env and it works"},{"owner":{"account_id":24960092,"reputation":3,"user_id":22288620,"display_name":"IvanD"},"score":0,"creation_date":1690398388,"post_id":76771665,"comment_id":135349680,"body_markdown":"My parent spring boot starter parent is 3.1.2","body":"My parent spring boot starter parent is 3.1.2"},{"owner":{"account_id":18391609,"reputation":87,"user_id":13397146,"display_name":"Josselin Beaud&#39;huy"},"score":0,"creation_date":1690404080,"post_id":76771665,"comment_id":135350685,"body_markdown":"Can you post full html ?","body":"Can you post full html ?"},{"owner":{"account_id":24960092,"reputation":3,"user_id":22288620,"display_name":"IvanD"},"score":0,"creation_date":1690405107,"post_id":76771665,"comment_id":135350825,"body_markdown":"Full cart.html without css and js links is presented in post. Or what do you mean? @JosselinBeaud&#39;huy","body":"Full cart.html without css and js links is presented in post. Or what do you mean? @JosselinBeaud&#39;huy"}],"owner":{"account_id":24960092,"reputation":3,"user_id":22288620,"display_name":"IvanD"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690376839,"creation_date":1690376839,"question_id":76771665,"body_markdown":"i got some issue with my Spring boot project. When i try to open product cart page, i got exception `org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: &quot;session.cart.getProducts()&quot; (template: &quot;cart&quot; - line 14, col 11)`.\r\nMy cart.html page, where i try to get list:\r\n\r\n```\r\n&lt;/head&gt;\r\n&lt;body class=&quot;body&quot;&gt;\r\n&lt;div th:replace=&quot;header :: header_fragment&quot;&gt;&lt;/div&gt;\r\n&lt;th:block th:each=&quot;cartProduct : ${session.cart.getProducts()}&quot;&gt;\r\n  &lt;div class=&quot;row p-2 bg-white border rounded mt-2&quot;&gt;\r\n    &lt;div class=&quot;col-md-3 mt-1&quot;&gt;&lt;img class=&quot;img-fluid img-responsive rounded product-image&quot; th:src=&quot;@{/${cartProduct.imagepath}}&quot;&gt;&lt;/div&gt;\r\n    &lt;div class=&quot;col-md-6 mt-1&quot;&gt;\r\n      &lt;h5 th:text=&quot;${cartProduct.name}&quot;&gt;&lt;/h5&gt;\r\n      &lt;div class=&quot;d-flex flex-row&quot;&gt;\r\n        &lt;div class=&quot;ratings mr-2&quot;&gt;&lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt;&lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt;&lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt;&lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt;&lt;/div&gt;\r\n        &lt;span&gt;310&lt;/span&gt;\r\n      &lt;/div&gt;\r\n      &lt;p class=&quot;text-justify text-truncate para mb-0&quot; th:text=&quot;${cartProduct.description}&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\r\n    &lt;/div&gt;\r\n    &lt;div class=&quot;align-items-center align-content-center col-md-3 border-left mt-1&quot;&gt;\r\n      &lt;div class=&quot;d-flex flex-row align-items-center&quot;&gt;\r\n        &lt;h4 class=&quot;mr-1&quot; th:text=&quot;${cartProduct.price} + &#39;$&#39;&quot;&gt;&lt;/h4&gt;\r\n      &lt;/div&gt;\r\n      &lt;h6 class=&quot;text-success&quot;&gt;Available&lt;/h6&gt;\r\n      &lt;div class=&quot;d-flex flex-column mt-4&quot;&gt;\r\n        &lt;a class=&quot;btn btn-primary btn-sm&quot; type=&quot;button&quot; th:href=&quot;@{/cart/remove/{productid}(productid=${cartProduct.id})}&quot;&gt;Delete form cart&lt;/a&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/th:block&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nAnd my Cart object in session:\r\n\r\n```\r\npublic class Cart {\r\n\r\n    private final Map&lt;Integer, Product&gt; products;\r\n    private float totalPrice;\r\n\r\n    public Cart() {\r\n        this.products = new HashMap&lt;&gt;();\r\n        this.totalPrice = 0;\r\n    }\r\n\r\n    public void addProduct(Product product) {\r\n        products.put(product.getId(), product);\r\n        totalPrice += product.getPrice();\r\n    }\r\n\r\n    public void removeProduct(int productId) {\r\n        Product product = products.get(productId);\r\n        products.remove(productId);\r\n        totalPrice -= product.getPrice();\r\n    }\r\n\r\n    public static Cart checkCart(Product product, Cart cart){\r\n        if (cart != null) {\r\n            cart.addProduct(product);\r\n        } else {\r\n            cart = new Cart();\r\n            cart.addProduct(product);\r\n        }\r\n        return cart;\r\n    }\r\n\r\n    public List&lt;Product&gt; getProducts() {\r\n        return new ArrayList&lt;&gt;(products.values());\r\n    }\r\n\r\n    public float getTotalPrice() {\r\n        return totalPrice;\r\n    }\r\n\r\n    public int getTotalSize() {\r\n        return products.size();\r\n    }\r\n\r\n    public void setTotalPrice(float totalPrice) {\r\n        this.totalPrice = totalPrice;\r\n    }\r\n\r\n    public void clear() {\r\n        products.clear();\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nHere i tried to get access to product list, where cart is object in session, which contains Map&lt;Integer, Product&gt;, and method getProducts() returns a transformed Map into ArrayList. I alse expect, that if my cart is null, there should be 0 iterations of loop. But as a result i got 500 error and a white page. \r\nI also tries to write like this `session.cart.products` or `session.cart[&#39;products&#39;]` expecting that map will be automatically converted to List.","title":"Template parsing exception in thymeleaf while iterating Map","body":"<p>i got some issue with my Spring boot project. When i try to open product cart page, i got exception <code>org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: &quot;session.cart.getProducts()&quot; (template: &quot;cart&quot; - line 14, col 11)</code>.\nMy cart.html page, where i try to get list:</p>\n<pre><code>&lt;/head&gt;\n&lt;body class=&quot;body&quot;&gt;\n&lt;div th:replace=&quot;header :: header_fragment&quot;&gt;&lt;/div&gt;\n&lt;th:block th:each=&quot;cartProduct : ${session.cart.getProducts()}&quot;&gt;\n  &lt;div class=&quot;row p-2 bg-white border rounded mt-2&quot;&gt;\n    &lt;div class=&quot;col-md-3 mt-1&quot;&gt;&lt;img class=&quot;img-fluid img-responsive rounded product-image&quot; th:src=&quot;@{/${cartProduct.imagepath}}&quot;&gt;&lt;/div&gt;\n    &lt;div class=&quot;col-md-6 mt-1&quot;&gt;\n      &lt;h5 th:text=&quot;${cartProduct.name}&quot;&gt;&lt;/h5&gt;\n      &lt;div class=&quot;d-flex flex-row&quot;&gt;\n        &lt;div class=&quot;ratings mr-2&quot;&gt;&lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt;&lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt;&lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt;&lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt;&lt;/div&gt;\n        &lt;span&gt;310&lt;/span&gt;\n      &lt;/div&gt;\n      &lt;p class=&quot;text-justify text-truncate para mb-0&quot; th:text=&quot;${cartProduct.description}&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;align-items-center align-content-center col-md-3 border-left mt-1&quot;&gt;\n      &lt;div class=&quot;d-flex flex-row align-items-center&quot;&gt;\n        &lt;h4 class=&quot;mr-1&quot; th:text=&quot;${cartProduct.price} + '$'&quot;&gt;&lt;/h4&gt;\n      &lt;/div&gt;\n      &lt;h6 class=&quot;text-success&quot;&gt;Available&lt;/h6&gt;\n      &lt;div class=&quot;d-flex flex-column mt-4&quot;&gt;\n        &lt;a class=&quot;btn btn-primary btn-sm&quot; type=&quot;button&quot; th:href=&quot;@{/cart/remove/{productid}(productid=${cartProduct.id})}&quot;&gt;Delete form cart&lt;/a&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/th:block&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>And my Cart object in session:</p>\n<pre><code>public class Cart {\n\n    private final Map&lt;Integer, Product&gt; products;\n    private float totalPrice;\n\n    public Cart() {\n        this.products = new HashMap&lt;&gt;();\n        this.totalPrice = 0;\n    }\n\n    public void addProduct(Product product) {\n        products.put(product.getId(), product);\n        totalPrice += product.getPrice();\n    }\n\n    public void removeProduct(int productId) {\n        Product product = products.get(productId);\n        products.remove(productId);\n        totalPrice -= product.getPrice();\n    }\n\n    public static Cart checkCart(Product product, Cart cart){\n        if (cart != null) {\n            cart.addProduct(product);\n        } else {\n            cart = new Cart();\n            cart.addProduct(product);\n        }\n        return cart;\n    }\n\n    public List&lt;Product&gt; getProducts() {\n        return new ArrayList&lt;&gt;(products.values());\n    }\n\n    public float getTotalPrice() {\n        return totalPrice;\n    }\n\n    public int getTotalSize() {\n        return products.size();\n    }\n\n    public void setTotalPrice(float totalPrice) {\n        this.totalPrice = totalPrice;\n    }\n\n    public void clear() {\n        products.clear();\n    }\n\n}\n</code></pre>\n<p>Here i tried to get access to product list, where cart is object in session, which contains Map&lt;Integer, Product&gt;, and method getProducts() returns a transformed Map into ArrayList. I alse expect, that if my cart is null, there should be 0 iterations of loop. But as a result i got 500 error and a white page.\nI also tries to write like this <code>session.cart.products</code> or <code>session.cart['products']</code> expecting that map will be automatically converted to List.</p>\n"},{"tags":["java","spring-boot","bazel","spring-boot-test","bazel-java"],"comments":[{"owner":{"account_id":7394006,"reputation":5031,"user_id":5626568,"display_name":"ℛɑƒ&#230;Ŀᴿᴹᴿ"},"score":0,"creation_date":1689872271,"post_id":76732060,"comment_id":135278201,"body_markdown":"Does this answer your question? [Spring boot: How to read resource from classpath in unit test](https://stackoverflow.com/questions/43428305/spring-boot-how-to-read-resource-from-classpath-in-unit-test)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/43428305/spring-boot-how-to-read-resource-from-classpath-in-unit-test\">Spring boot: How to read resource from classpath in unit test</a>"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1689872448,"post_id":76732060,"comment_id":135278243,"body_markdown":"When you deploy the application, you won&#39;t have a `src` folder either. So `src/test/resources/configs` is definitely wrong there.","body":"When you deploy the application, you won&#39;t have a <code>src</code> folder either. So <code>src&#47;test&#47;resources&#47;configs</code> is definitely wrong there."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689884752,"post_id":76732060,"comment_id":135280549,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":17601943,"reputation":91,"user_id":12771724,"display_name":"Enes Birisik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690376719,"creation_date":1690376719,"answer_id":76771653,"question_id":76732060,"body_markdown":"Can you try this code ? \r\n\r\napplication.yml\r\n\r\n    spring:\r\n      config:\r\n        import:\r\n          - optional:configtree:classpath:configs/\r\n\r\nProductConverterConfiguration class\r\n\r\n    @Configuration\r\n    public class ProductConverterConfiguration {\r\n    \r\n        @Value(&quot;${products}&quot;) \r\n        private String productsYamlFile;\r\n    \r\n        @PostConstruct\r\n        public void init() {\r\n            System.out.println(&quot;Got the file as: &quot; + productsYamlFile);\r\n        }\r\n    }\r\n\r\n(can you chare product.yml if it doesn&#39;t work)","title":"How to access a file from resources folder in test in springboot","body":"<p>Can you try this code ?</p>\n<p>application.yml</p>\n<pre><code>spring:\n  config:\n    import:\n      - optional:configtree:classpath:configs/\n</code></pre>\n<p>ProductConverterConfiguration class</p>\n<pre><code>@Configuration\npublic class ProductConverterConfiguration {\n\n    @Value(&quot;${products}&quot;) \n    private String productsYamlFile;\n\n    @PostConstruct\n    public void init() {\n        System.out.println(&quot;Got the file as: &quot; + productsYamlFile);\n    }\n}\n</code></pre>\n<p>(can you chare product.yml if it doesn't work)</p>\n"}],"owner":{"account_id":12259393,"reputation":13,"user_id":19695061,"display_name":"Dattebayo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690376719,"creation_date":1689871797,"question_id":76732060,"body_markdown":"My file &quot;products.yml&quot; is located in src/test/resources/configs folder. I have defined config import in my application.yml in springboot \r\n\r\n    spring:\r\n      config:\r\n        import:\r\n          - optional:configtree:src/test/resources/configs/\r\n\r\nI am trying to get this &quot;products.yml&quot; filepath using @Value annotation in my configuration class\r\n\r\n    @Configuration\r\n    public class ProductConverterConfiguration {\r\n    \r\n    @Value(&quot;${products}&quot;) \r\n    private String productsYamlFile;\r\n    \r\n    System.out.Println(&quot;Got the file as: &quot; + productsYamlFile);\r\n    }\r\n\r\nSpringboot is unable to see that file when I try to run bazel test for that class it fails with null pointer exception.\r\n\r\nI tried giving absolute path in the application.yaml and it works. \r\nBut I need the relative path since I wont have the same host when I deploy this application. Can someone help me with this? ","title":"How to access a file from resources folder in test in springboot","body":"<p>My file &quot;products.yml&quot; is located in src/test/resources/configs folder. I have defined config import in my application.yml in springboot</p>\n<pre><code>spring:\n  config:\n    import:\n      - optional:configtree:src/test/resources/configs/\n</code></pre>\n<p>I am trying to get this &quot;products.yml&quot; filepath using @Value annotation in my configuration class</p>\n<pre><code>@Configuration\npublic class ProductConverterConfiguration {\n\n@Value(&quot;${products}&quot;) \nprivate String productsYamlFile;\n\nSystem.out.Println(&quot;Got the file as: &quot; + productsYamlFile);\n}\n</code></pre>\n<p>Springboot is unable to see that file when I try to run bazel test for that class it fails with null pointer exception.</p>\n<p>I tried giving absolute path in the application.yaml and it works.\nBut I need the relative path since I wont have the same host when I deploy this application. Can someone help me with this?</p>\n"},{"tags":["java","email","jakarta-mail","micronaut"],"comments":[{"owner":{"account_id":930977,"reputation":8260,"user_id":960875,"accept_rate":98,"display_name":"saw303"},"score":0,"creation_date":1690375200,"post_id":76770868,"comment_id":135344313,"body_markdown":"how does the raw email looks like, that your sending to the SMTP?","body":"how does the raw email looks like, that your sending to the SMTP?"},{"owner":{"account_id":5124081,"reputation":253,"user_id":4106800,"display_name":"Gobanit"},"score":0,"creation_date":1690376503,"post_id":76770868,"comment_id":135344739,"body_markdown":"I pasted it to the question. It is downloaded from Outlook after receiving it.","body":"I pasted it to the question. It is downloaded from Outlook after receiving it."}],"owner":{"account_id":5124081,"reputation":253,"user_id":4106800,"display_name":"Gobanit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690376649,"creation_date":1690371474,"question_id":76770868,"body_markdown":"I am using Micronaut for web application and I need to send emails. We use velocity template for the email body and we need to include an image in the text. I found out there are 3 ways:\r\n1. Base64 encoded image\r\n2. Content Id attachments\r\n3. Global url link\r\n\r\nSince Base64 encoded images in html are not supported by most of the mail clients and since the provided image is not publicly available, I tried the content id attachment. But I couldn&#39;t make it work with Micronaut.\r\n\r\nHere is a simplified code snippet I have:\r\n```java\r\nMap&lt;String, String&gt; modelMap = new HashMap&lt;&gt;();\r\nmodelMap.put(&quot;xyz&quot;, &quot;aaaaaaa&quot;);\r\nTemplateBody&lt;Map&lt;String, String&gt;&gt; body =\r\n    new TemplateBody&lt;&gt;(&quot;mail/mail-body.vm&quot;, modelMap);\r\n\r\nbyte[] image = IOUtils.resourceToByteArray(&quot;logo.png&quot;, getClass().getClassLoader());\r\nAttachment logoAttachment = Attachment.builder()\r\n    .id(&quot;logo&quot;)\r\n    .filename(&quot;something.png&quot;)\r\n    .contentType(MediaType.IMAGE_PNG)\r\n    .content(image)\r\n    .build();\r\n\r\nEmail.Builder emailBuilder = Email.builder()\r\n    .from(sender)\r\n    .to(recipient)\r\n    .subject(&quot;some-subject&quot;)\r\n    .body(body)\r\n    .attachment(createLogoAttachment());\r\n\r\nemailSender.send(emailBuilder);\r\n```\r\n\r\nThe velocity html template looks like this:\r\n```html\r\n&lt;div&gt;\r\n    &lt;p&gt;\r\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed \r\n    &lt;/p&gt;\r\n    &lt;p&gt;\r\n         do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad\r\n    &lt;/p&gt;\r\n    &lt;p&gt;\r\n        minim veniam\r\n    &lt;/p&gt;\r\n    &lt;p&gt;\r\n        quis nostrud exercitation ullamco laboris nisi ut - ${xyz}\r\n    &lt;/p&gt;\r\n    &lt;img src=&quot;cid:logo&quot; alt=&quot;this is logo image&quot;/&gt;\r\n&lt;/div&gt;\r\n\r\n```\r\n\r\n\r\nBut this way, the image is only a regular attachment, not embedded in html content. The alternative text is shown instead. How can I tell Micronaut that this attachment should be inline? It seems that the **id** attribute I provided is not used at all and the html body does not see the attachment.\r\n\r\nThe raw mail looks like this:\r\n\r\n```\r\nMIME-Version: 1.0\r\n\r\n------=_Part_0_2107679308.1690376383642\r\nContent-Type: multipart/alternative; \r\n\tboundary=&quot;----=_Part_1_706751112.1690376383646&quot;\r\n\r\n------=_Part_1_706751112.1690376383646\r\nContent-Type: text/html; charset=UTF-8\r\nContent-Transfer-Encoding: 7bit\r\n\r\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;&lt;div&gt;\r\n    &lt;p&gt;\r\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed\r\n    &lt;/p&gt;\r\n    &lt;p&gt;\r\n        do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad\r\n    &lt;/p&gt;\r\n    &lt;p&gt;\r\n        minim veniam\r\n    &lt;/p&gt;\r\n    &lt;p&gt;\r\n        quis nostrud exercitation ullamco laboris nisi ut - aaaaaaa\r\n    &lt;/p&gt;\r\n    &lt;img src=&quot;cid:logo&quot; alt=&quot;this is logo image&quot;&gt;\r\n&lt;/div&gt;\r\n\r\n------=_Part_1_706751112.1690376383646--\r\n\r\n------=_Part_0_2107679308.1690376383642\r\nContent-Type: image/png; name=something.png\r\nContent-Transfer-Encoding: base64\r\nContent-Disposition: attachment; filename=something.png\r\n\r\niVBORw0KGgoAAAANSUhEUgAABCkAAAFkCAYAAAANCGFyAAAAAXNSR0IArs4c6QAAAARnQU1BAACx ... \r\n\r\n------=_Part_0_2107679308.1690376383642--\r\n```\r\n\r\nI didn`t paste the whole base64 image","title":"How to add inline image in html email with Micronaut","body":"<p>I am using Micronaut for web application and I need to send emails. We use velocity template for the email body and we need to include an image in the text. I found out there are 3 ways:</p>\n<ol>\n<li>Base64 encoded image</li>\n<li>Content Id attachments</li>\n<li>Global url link</li>\n</ol>\n<p>Since Base64 encoded images in html are not supported by most of the mail clients and since the provided image is not publicly available, I tried the content id attachment. But I couldn't make it work with Micronaut.</p>\n<p>Here is a simplified code snippet I have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, String&gt; modelMap = new HashMap&lt;&gt;();\nmodelMap.put(&quot;xyz&quot;, &quot;aaaaaaa&quot;);\nTemplateBody&lt;Map&lt;String, String&gt;&gt; body =\n    new TemplateBody&lt;&gt;(&quot;mail/mail-body.vm&quot;, modelMap);\n\nbyte[] image = IOUtils.resourceToByteArray(&quot;logo.png&quot;, getClass().getClassLoader());\nAttachment logoAttachment = Attachment.builder()\n    .id(&quot;logo&quot;)\n    .filename(&quot;something.png&quot;)\n    .contentType(MediaType.IMAGE_PNG)\n    .content(image)\n    .build();\n\nEmail.Builder emailBuilder = Email.builder()\n    .from(sender)\n    .to(recipient)\n    .subject(&quot;some-subject&quot;)\n    .body(body)\n    .attachment(createLogoAttachment());\n\nemailSender.send(emailBuilder);\n</code></pre>\n<p>The velocity html template looks like this:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div&gt;\n    &lt;p&gt;\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed \n    &lt;/p&gt;\n    &lt;p&gt;\n         do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad\n    &lt;/p&gt;\n    &lt;p&gt;\n        minim veniam\n    &lt;/p&gt;\n    &lt;p&gt;\n        quis nostrud exercitation ullamco laboris nisi ut - ${xyz}\n    &lt;/p&gt;\n    &lt;img src=&quot;cid:logo&quot; alt=&quot;this is logo image&quot;/&gt;\n&lt;/div&gt;\n\n</code></pre>\n<p>But this way, the image is only a regular attachment, not embedded in html content. The alternative text is shown instead. How can I tell Micronaut that this attachment should be inline? It seems that the <strong>id</strong> attribute I provided is not used at all and the html body does not see the attachment.</p>\n<p>The raw mail looks like this:</p>\n<pre><code>MIME-Version: 1.0\n\n------=_Part_0_2107679308.1690376383642\nContent-Type: multipart/alternative; \n    boundary=&quot;----=_Part_1_706751112.1690376383646&quot;\n\n------=_Part_1_706751112.1690376383646\nContent-Type: text/html; charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;&lt;div&gt;\n    &lt;p&gt;\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed\n    &lt;/p&gt;\n    &lt;p&gt;\n        do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad\n    &lt;/p&gt;\n    &lt;p&gt;\n        minim veniam\n    &lt;/p&gt;\n    &lt;p&gt;\n        quis nostrud exercitation ullamco laboris nisi ut - aaaaaaa\n    &lt;/p&gt;\n    &lt;img src=&quot;cid:logo&quot; alt=&quot;this is logo image&quot;&gt;\n&lt;/div&gt;\n\n------=_Part_1_706751112.1690376383646--\n\n------=_Part_0_2107679308.1690376383642\nContent-Type: image/png; name=something.png\nContent-Transfer-Encoding: base64\nContent-Disposition: attachment; filename=something.png\n\niVBORw0KGgoAAAANSUhEUgAABCkAAAFkCAYAAAANCGFyAAAAAXNSR0IArs4c6QAAAARnQU1BAACx ... \n\n------=_Part_0_2107679308.1690376383642--\n</code></pre>\n<p>I didn`t paste the whole base64 image</p>\n"},{"tags":["java","spring","apache-kafka","kafka-consumer-api","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690376585,"creation_date":1689787559,"answer_id":76723835,"question_id":76723657,"body_markdown":"With reactor-kafka, use the `addAssignListener` receiver option.\r\n\r\nThen, when partitions are assigned, you can call `seekToEnd()` on each `ReceiverPartition` (the listener gets a collection of them).\r\n\r\nSee [the documentation](https://projectreactor.io/docs/kafka/release/reference/#_controlling_start_offsets_for_consuming_records).\r\n\r\nIn the configuration mentioned in the question, the place for the configuration code is here:\r\n\r\n``` lang-java\r\n@Bean\r\npublic ReactiveKafkaConsumerTemplate&lt;UUID, MyEvent&gt; createConsumer(@Autowired KafkaProperties properties) {\r\n    return new ReactiveKafkaConsumerTemplate&lt;&gt;(\r\n        ReceiverOptions.&lt;UUID, MyEvent&gt;create(new HashMap&lt;&gt;(properties.buildConsumerProperties()))\r\n            //==================================================\r\n            .addAssignListener(partitions -&gt;\r\n                partitions.forEach(ReceiverPartition::seekToEnd))\r\n            //==================================================\r\n            .subscription(List.of(&quot;MY-TOPIC&quot;)));\r\n}\r\n```","title":"Make a service after restart to skip unread Kafka messages, but use the same consumer group as before","body":"<p>With reactor-kafka, use the <code>addAssignListener</code> receiver option.</p>\n<p>Then, when partitions are assigned, you can call <code>seekToEnd()</code> on each <code>ReceiverPartition</code> (the listener gets a collection of them).</p>\n<p>See <a href=\"https://projectreactor.io/docs/kafka/release/reference/#_controlling_start_offsets_for_consuming_records\" rel=\"nofollow noreferrer\">the documentation</a>.</p>\n<p>In the configuration mentioned in the question, the place for the configuration code is here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic ReactiveKafkaConsumerTemplate&lt;UUID, MyEvent&gt; createConsumer(@Autowired KafkaProperties properties) {\n    return new ReactiveKafkaConsumerTemplate&lt;&gt;(\n        ReceiverOptions.&lt;UUID, MyEvent&gt;create(new HashMap&lt;&gt;(properties.buildConsumerProperties()))\n            //==================================================\n            .addAssignListener(partitions -&gt;\n                partitions.forEach(ReceiverPartition::seekToEnd))\n            //==================================================\n            .subscription(List.of(&quot;MY-TOPIC&quot;)));\n}\n</code></pre>\n"}],"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76723835,"answer_count":1,"score":0,"last_activity_date":1690376585,"creation_date":1689786191,"question_id":76723657,"body_markdown":"We have a reactive Kafka consumer configured like this:\r\n``` lang-properties\r\nspring.kafka.consumer.group-id=MY-CONSUMER-GROUP\r\n```\r\n\r\n``` lang-java\r\n@Bean\r\npublic ReactiveKafkaConsumerTemplate&lt;UUID, MyEvent&gt; createConsumer(@Autowired KafkaProperties properties) {\r\n    return new ReactiveKafkaConsumerTemplate&lt;&gt;(\r\n        ReceiverOptions.&lt;UUID, MyEvent&gt;create(new HashMap&lt;&gt;(properties.buildConsumerProperties()))\r\n            .consumerProperty(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;latest&quot;)\r\n            .subscription(List.of(&quot;MY-TOPIC&quot;)));\r\n}\r\n```\r\n\r\nThis ensures that **when the consumer is created the first time**, it doesn&#39;t read all the messages from the beginning, but reads only the new messages, see e.g. [here][1].\r\n\r\nWe&#39;d like to have this behaviour always, after each restart of the service. The messages are relevant for the service only if they are produced while the service is running.\r\n\r\nHowever, the documentation says:\r\n\r\n&gt; Once a consumer group has an offset written then this configuration parameter no longer applies. If the consumers in the consumer group are **stopped and then restarted**, they would pick up consuming **from the last offset**.\r\n\r\nHowever, when our service is down for a while, we want it to **skip** the messages which were produced into the topic in the meantime, we want it to read from the same consumer group, but also **from the end** only, not from the last offset.\r\n\r\nHow to achieve it?\r\n\r\nWe use the consumer like this:\r\n\r\n``` lang-java\r\n@EventListener(value = ApplicationReadyEvent.class)\r\npublic void listen() {\r\n    consumerTemplate\r\n        .receiveAutoAck()\r\n        .concatMap(consumerRecord -&gt; handleEvent(consumerRecord.key(), consumerRecord.value())\r\n            .onErrorResume(__ -&gt; Mono.empty())\r\n        )\r\n        .subscribe();\r\n}\r\n\r\nprivate Mono&lt;MyEvent&gt; handleEvent(@NonNull UUID key, @NonNull MyEvent event) {\r\n    ....\r\n}\r\n```\r\n\r\nI found a method with a promising name [`seekToEnd()`][2], but:\r\n 1. I am not sure if it does what I want :)\r\n 2. As it returns `void`, I have no clue how to use it in the reactive call chain.\r\n\r\n\r\n  [1]: https://www.lydtechconsulting.com/blog-kafka-auto-offset-reset.html\r\n  [2]: https://kafka.apache.org/35/javadoc/org/apache/kafka/clients/consumer/KafkaConsumer.html#seekToEnd(java.util.Collection)","title":"Make a service after restart to skip unread Kafka messages, but use the same consumer group as before","body":"<p>We have a reactive Kafka consumer configured like this:</p>\n<pre class=\"lang-properties prettyprint-override\"><code>spring.kafka.consumer.group-id=MY-CONSUMER-GROUP\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic ReactiveKafkaConsumerTemplate&lt;UUID, MyEvent&gt; createConsumer(@Autowired KafkaProperties properties) {\n    return new ReactiveKafkaConsumerTemplate&lt;&gt;(\n        ReceiverOptions.&lt;UUID, MyEvent&gt;create(new HashMap&lt;&gt;(properties.buildConsumerProperties()))\n            .consumerProperty(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;latest&quot;)\n            .subscription(List.of(&quot;MY-TOPIC&quot;)));\n}\n</code></pre>\n<p>This ensures that <strong>when the consumer is created the first time</strong>, it doesn't read all the messages from the beginning, but reads only the new messages, see e.g. <a href=\"https://www.lydtechconsulting.com/blog-kafka-auto-offset-reset.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>We'd like to have this behaviour always, after each restart of the service. The messages are relevant for the service only if they are produced while the service is running.</p>\n<p>However, the documentation says:</p>\n<blockquote>\n<p>Once a consumer group has an offset written then this configuration parameter no longer applies. If the consumers in the consumer group are <strong>stopped and then restarted</strong>, they would pick up consuming <strong>from the last offset</strong>.</p>\n</blockquote>\n<p>However, when our service is down for a while, we want it to <strong>skip</strong> the messages which were produced into the topic in the meantime, we want it to read from the same consumer group, but also <strong>from the end</strong> only, not from the last offset.</p>\n<p>How to achieve it?</p>\n<p>We use the consumer like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EventListener(value = ApplicationReadyEvent.class)\npublic void listen() {\n    consumerTemplate\n        .receiveAutoAck()\n        .concatMap(consumerRecord -&gt; handleEvent(consumerRecord.key(), consumerRecord.value())\n            .onErrorResume(__ -&gt; Mono.empty())\n        )\n        .subscribe();\n}\n\nprivate Mono&lt;MyEvent&gt; handleEvent(@NonNull UUID key, @NonNull MyEvent event) {\n    ....\n}\n</code></pre>\n<p>I found a method with a promising name <a href=\"https://kafka.apache.org/35/javadoc/org/apache/kafka/clients/consumer/KafkaConsumer.html#seekToEnd(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>seekToEnd()</code></a>, but:</p>\n<ol>\n<li>I am not sure if it does what I want :)</li>\n<li>As it returns <code>void</code>, I have no clue how to use it in the reactive call chain.</li>\n</ol>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1690376816,"post_id":76771577,"comment_id":135344817,"body_markdown":"Is `ExperimentVariable` used for anything else, or can you define the class and the way it works to tailor it specifically only for Registry and Kit?","body":"Is <code>ExperimentVariable</code> used for anything else, or can you define the class and the way it works to tailor it specifically only for Registry and Kit?"},{"owner":{"account_id":10422024,"reputation":579,"user_id":7684427,"accept_rate":60,"display_name":"Shrikant"},"score":0,"creation_date":1690377764,"post_id":76771577,"comment_id":135345021,"body_markdown":"Yes, it is used by many classes &amp; modules","body":"Yes, it is used by many classes &amp; modules"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1690391262,"post_id":76771577,"comment_id":135348234,"body_markdown":"You will have to modify the `ExperimentVariable` design significantly to make this possible.","body":"You will have to modify the <code>ExperimentVariable</code> design significantly to make this possible."},{"owner":{"account_id":27028764,"reputation":561,"user_id":20585541,"display_name":"Ben the Coder"},"score":0,"creation_date":1690391540,"post_id":76771577,"comment_id":135348296,"body_markdown":"@Shrikant What does this have to do with Java?","body":"@Shrikant What does this have to do with Java?"}],"owner":{"account_id":10422024,"reputation":579,"user_id":7684427,"accept_rate":60,"display_name":"Shrikant"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690376244,"creation_date":1690376244,"question_id":76771577,"body_markdown":"I have below methods with takes certain arguments\r\n\r\n    interface Kit {\r\n        fun observe(experimentsVariable: ExperimentVariable): Observable&lt;String&gt;\r\n    \r\n        fun get(experimentsVariable: ExperimentVariable): String\r\n    }\r\n\r\nAlong with this I have defined a file which has some constants\r\n\r\n    object Registry {\r\n        val SOME_KEY = ExperimentVariable.Builder&lt;Boolean&gt;()\r\n            .setKey(&quot;some_key&quot;)\r\n            .setEnabled(true)\r\n            .setDefaultValue(false)\r\n            .setSource(&quot;remote&quot;)\r\n            .build()\r\n\r\n\r\n        val SOME_KEY_1 = ExperimentVariable.Builder&lt;String&gt;()\r\n            .setKey(&quot;some_key&quot;)\r\n            .setEnabled(true)\r\n            .setDefaultValue(&quot;some_string&quot;)\r\n            .setSource(&quot;remote&quot;)\r\n            .build()\r\n\r\n        .....\r\n    }\r\n\r\nHere the `build` function returns instance of `ExperimentVariable`.\r\n\r\nNow if some class tries to call `kit.observe(Registry.SOME_KEY)` this should be allowed. But if the call is like this `kit.observe(AnotherRegistry.Another_Key)`, it should result in compile-time error or warning.\r\n\r\nBasically I want to write my `observe` function such that it will only accept arguments of `Registry` type &amp; nothing else. \r\n\r\nHow can I achieve this behaviour?","title":"Allow function to accept certain type of argument?","body":"<p>I have below methods with takes certain arguments</p>\n<pre><code>interface Kit {\n    fun observe(experimentsVariable: ExperimentVariable): Observable&lt;String&gt;\n\n    fun get(experimentsVariable: ExperimentVariable): String\n}\n</code></pre>\n<p>Along with this I have defined a file which has some constants</p>\n<pre><code>object Registry {\n    val SOME_KEY = ExperimentVariable.Builder&lt;Boolean&gt;()\n        .setKey(&quot;some_key&quot;)\n        .setEnabled(true)\n        .setDefaultValue(false)\n        .setSource(&quot;remote&quot;)\n        .build()\n\n\n    val SOME_KEY_1 = ExperimentVariable.Builder&lt;String&gt;()\n        .setKey(&quot;some_key&quot;)\n        .setEnabled(true)\n        .setDefaultValue(&quot;some_string&quot;)\n        .setSource(&quot;remote&quot;)\n        .build()\n\n    .....\n}\n</code></pre>\n<p>Here the <code>build</code> function returns instance of <code>ExperimentVariable</code>.</p>\n<p>Now if some class tries to call <code>kit.observe(Registry.SOME_KEY)</code> this should be allowed. But if the call is like this <code>kit.observe(AnotherRegistry.Another_Key)</code>, it should result in compile-time error or warning.</p>\n<p>Basically I want to write my <code>observe</code> function such that it will only accept arguments of <code>Registry</code> type &amp; nothing else.</p>\n<p>How can I achieve this behaviour?</p>\n"},{"tags":["java","tomcat","applet","document-management"],"comments":[{"owner":{"account_id":12402093,"reputation":19,"user_id":9038848,"display_name":"user9038848"},"score":0,"creation_date":1673350229,"post_id":74518945,"comment_id":132474039,"body_markdown":"I saw the jason-johnston answer here https://stackoverflow.com/a/31749818/9038848  Can anyone say if this does the job?","body":"I saw the jason-johnston answer here <a href=\"https://stackoverflow.com/a/31749818/9038848\">stackoverflow.com/a/31749818/9038848</a>  Can anyone say if this does the job?"},{"owner":{"account_id":12402093,"reputation":19,"user_id":9038848,"display_name":"user9038848"},"score":0,"creation_date":1679915441,"post_id":74518945,"comment_id":133800605,"body_markdown":"I saw the Reza Ahmadi answer here https://stackoverflow.com/questions/30479338/alternatives-to-java-applet-to-launch-microsoft-office-applications I will try this approach for now","body":"I saw the Reza Ahmadi answer here <a href=\"https://stackoverflow.com/questions/30479338/alternatives-to-java-applet-to-launch-microsoft-office-applications\" title=\"alternatives to java applet to launch microsoft office applications\">stackoverflow.com/questions/30479338/&hellip;</a> I will try this approach for now"}],"owner":{"account_id":12402093,"reputation":19,"user_id":9038848,"display_name":"user9038848"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690376130,"creation_date":1669033757,"question_id":74518945,"body_markdown":"The company I work for, provides a Java webapplication deployed on Tomcat for public office processes automation. \r\n\r\nFor a faster and user-friendly file modification of attachments loaded into the application, the system I describe is used.\r\n\r\nThe user of the application clicks on a button to open the attachment whose description he reads on the webapp. A codesigned Java applet downloaded via jnlp, downloads the selected blob file (eg myfile.doc). A completion progress bar is showed until the download process is ended. The local path is saved fot the later upload.\r\n\r\nTo open the file automatically, the Operating System uses the MIME-TYPE related software on the client (eg MS Word for myfile.doc). When the user ends file modifications, the application uploads it again from saved local path to the same db record using an upload servlet triggered by a click on a button. A completion progress bar is showed until the upload process is ended. \r\n\r\nThis system avoids users to go through the related boring manual operations. Unfortunately, now it only works correctly in old browser MS Explorer. \r\n\r\nI&#39;m looking for a modern cross-platform solution.\r\nI&#39;m evaluating to substitute the applet with a client side little application to do the job. \r\nDo you have any suggestions?","title":"Automating download and upload documents from a java webapplication","body":"<p>The company I work for, provides a Java webapplication deployed on Tomcat for public office processes automation.</p>\n<p>For a faster and user-friendly file modification of attachments loaded into the application, the system I describe is used.</p>\n<p>The user of the application clicks on a button to open the attachment whose description he reads on the webapp. A codesigned Java applet downloaded via jnlp, downloads the selected blob file (eg myfile.doc). A completion progress bar is showed until the download process is ended. The local path is saved fot the later upload.</p>\n<p>To open the file automatically, the Operating System uses the MIME-TYPE related software on the client (eg MS Word for myfile.doc). When the user ends file modifications, the application uploads it again from saved local path to the same db record using an upload servlet triggered by a click on a button. A completion progress bar is showed until the upload process is ended.</p>\n<p>This system avoids users to go through the related boring manual operations. Unfortunately, now it only works correctly in old browser MS Explorer.</p>\n<p>I'm looking for a modern cross-platform solution.\nI'm evaluating to substitute the applet with a client side little application to do the job.\nDo you have any suggestions?</p>\n"},{"tags":["java","android","android-drawable"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1390279899,"post_id":21249411,"comment_id":32011743,"body_markdown":"where is your runtime code - show us what you have tried.","body":"where is your runtime code - show us what you have tried."},{"owner":{"account_id":2525345,"reputation":689,"user_id":2194831,"display_name":"Krrishnaaaa"},"score":0,"creation_date":1390279956,"post_id":21249411,"comment_id":32011760,"body_markdown":"Similar question has been answered here http://stackoverflow.com/questions/5940825/android-change-shape-color-in-runtime","body":"Similar question has been answered here <a href=\"http://stackoverflow.com/questions/5940825/android-change-shape-color-in-runtime\" title=\"android change shape color in runtime\">stackoverflow.com/questions/5940825/&hellip;</a>"},{"owner":{"account_id":3056199,"reputation":3841,"user_id":2589738,"accept_rate":80,"display_name":"Samantha Withanage"},"score":0,"creation_date":1390281205,"post_id":21249411,"comment_id":32012177,"body_markdown":"@ user2310289 I just edited background color of the cell. In this case a text view was in the cell.","body":"@ user2310289 I just edited background color of the cell. In this case a text view was in the cell."}],"answers":[{"tags":[],"owner":{"account_id":2010922,"reputation":6503,"user_id":1799355,"display_name":"Digvesh Patel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1390280000,"creation_date":1390280000,"answer_id":21249451,"question_id":21249411,"body_markdown":"    ShapeDrawable sd1 = new ShapeDrawable(new RectShape());\r\n    \t\t\t\t\t\tsd1.getPaint().setColor(CommonUtilities.color);\r\n    \t\t\t\t\t\tsd1.getPaint().setStyle(Style.STROKE);\r\n    \t\t\t\t\t\tsd1.getPaint().setStrokeWidth(CommonUtilities.stroke);\r\n    \t\t\t\t\t\tsd1.setPadding(15, 10, 15, 10);\r\n    \r\n    \t\t\t\t\t\tsd1.getPaint().setPathEffect(\r\n    \t\t\t\t\t\t\t\tnew CornerPathEffect(CommonUtilities.corner));\r\n    \t\t\t\t\t\tln_back.setBackgroundDrawable(sd1);","title":"Android - Change drawable color in runtime","body":"<pre><code>ShapeDrawable sd1 = new ShapeDrawable(new RectShape());\n                        sd1.getPaint().setColor(CommonUtilities.color);\n                        sd1.getPaint().setStyle(Style.STROKE);\n                        sd1.getPaint().setStrokeWidth(CommonUtilities.stroke);\n                        sd1.setPadding(15, 10, 15, 10);\n\n                        sd1.getPaint().setPathEffect(\n                                new CornerPathEffect(CommonUtilities.corner));\n                        ln_back.setBackgroundDrawable(sd1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1186131,"reputation":6203,"user_id":1160045,"accept_rate":0,"display_name":"Md Abdul Gafur"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390280048,"creation_date":1390280048,"answer_id":21249463,"question_id":21249411,"body_markdown":"Use `selector` of the Table Cell background to change state of the table cell when user click it. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    \r\n        \r\n        &lt;!-- selected --&gt;\r\n        &lt;item android:drawable=&quot;@drawable/red_drawable&quot; android:state_selected=&quot;true&quot;/&gt;\r\n        &lt;!-- focused --&gt;\r\n        &lt;item android:drawable=&quot;@drawable/gray_drawable&quot;/&gt;\r\n        &lt;!-- default --&gt;\r\n    \r\n    &lt;/selector&gt; ","title":"Android - Change drawable color in runtime","body":"<p>Use <code>selector</code> of the Table Cell background to change state of the table cell when user click it. </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n\n    &lt;!-- selected --&gt;\n    &lt;item android:drawable=\"@drawable/red_drawable\" android:state_selected=\"true\"/&gt;\n    &lt;!-- focused --&gt;\n    &lt;item android:drawable=\"@drawable/gray_drawable\"/&gt;\n    &lt;!-- default --&gt;\n\n&lt;/selector&gt; \n</code></pre>\n"}],"owner":{"account_id":3056199,"reputation":3841,"user_id":2589738,"accept_rate":80,"display_name":"Samantha Withanage"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1624,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":21249451,"answer_count":2,"score":0,"last_activity_date":1690375501,"creation_date":1390279779,"question_id":21249411,"body_markdown":"I&#39;&#39;m using a **drawable** for the cells in my **table layout** in my Android application. I want to change the cell colors on click event. Is it possible to change the color of the drawable in run time. my drawable is,\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;shape\r\n      xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:shape= &quot;rectangle&quot;  &gt;\r\n            &lt;solid android:color=&quot;#FFFFFF&quot;/&gt;\r\n            &lt;stroke android:width=&quot;1dp&quot;  android:color=&quot;#483D8B&quot;/&gt;\r\n    &lt;/shape&gt;\r\n\r\nAnd I want to change the white color &quot;#FFFFFF&quot; with the click event. Can Java edit the color in the XML drawable file? I just edited the background color and it dispersers the borders of the drawable.\r\n\r\n    String StatusColor=GetColor(Retailer_x.getStatus());\r\n    Stts.setBackgroundColor(Color.parseColor(StatusColor));\r\n","title":"Android - Change drawable color in runtime","body":"<p>I''m using a <strong>drawable</strong> for the cells in my <strong>table layout</strong> in my Android application. I want to change the cell colors on click event. Is it possible to change the color of the drawable in run time. my drawable is,</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;shape\n  xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:shape= &quot;rectangle&quot;  &gt;\n        &lt;solid android:color=&quot;#FFFFFF&quot;/&gt;\n        &lt;stroke android:width=&quot;1dp&quot;  android:color=&quot;#483D8B&quot;/&gt;\n&lt;/shape&gt;\n</code></pre>\n<p>And I want to change the white color &quot;#FFFFFF&quot; with the click event. Can Java edit the color in the XML drawable file? I just edited the background color and it dispersers the borders of the drawable.</p>\n<pre><code>String StatusColor=GetColor(Retailer_x.getStatus());\nStts.setBackgroundColor(Color.parseColor(StatusColor));\n</code></pre>\n"},{"tags":["java","android","windows","android-studio","gradle"],"answers":[{"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690375399,"creation_date":1690375399,"answer_id":76771455,"question_id":76768576,"body_markdown":"You can move the folders and create a soft-link at the old position in file-system that points to the new directory. The only requirement is that C: and D: do use NTFS file-system. \r\n\r\n1. Make sure there are no Java gradle daemon process running (this could prevent you from moving the `.gradle` folder. Or you simple reboot Windows. \r\n\r\n2. Move the complete directory to the new location, e.g. `.gradle` to `D:\\Android\\.gradle`.\r\n\r\n3. Execute `mklink /D D:\\Android\\.gradle C:\\Users\\%username%\\.gradle`\r\n\r\nAfterwards you should see a `.gradle` folder in your user home directory that shows the content of the folder located on the D: drive.\r\n\r\nIf your have a fast and not volume limited internet connection you can simply delete `.gradle` folder in step 2 instead of moving it. Then create an empty `.gradle` folder on D: drive. Next time you compile an Android Studio project gradle will automatically download everything that is required.\r\n","title":"Move .android and .gradle file from folder C: to folder D:","body":"<p>You can move the folders and create a soft-link at the old position in file-system that points to the new directory. The only requirement is that C: and D: do use NTFS file-system.</p>\n<ol>\n<li><p>Make sure there are no Java gradle daemon process running (this could prevent you from moving the <code>.gradle</code> folder. Or you simple reboot Windows.</p>\n</li>\n<li><p>Move the complete directory to the new location, e.g. <code>.gradle</code> to <code>D:\\Android\\.gradle</code>.</p>\n</li>\n<li><p>Execute <code>mklink /D D:\\Android\\.gradle C:\\Users\\%username%\\.gradle</code></p>\n</li>\n</ol>\n<p>Afterwards you should see a <code>.gradle</code> folder in your user home directory that shows the content of the folder located on the D: drive.</p>\n<p>If your have a fast and not volume limited internet connection you can simply delete <code>.gradle</code> folder in step 2 instead of moving it. Then create an empty <code>.gradle</code> folder on D: drive. Next time you compile an Android Studio project gradle will automatically download everything that is required.</p>\n"}],"owner":{"account_id":29092797,"reputation":11,"user_id":22286250,"display_name":"M Akmal Fathurrahman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690375399,"creation_date":1690353125,"question_id":76768576,"body_markdown":"Is there any way to move .android and .gradle folder from folder C: to folder D:? Both file takes a lot of memory in folder C:\r\n\r\nIf there is a safe way to move it, I hope you can answer my question. Thank you!!!\r\n\r\nI already try to move Android/Sdk folder from folder C: to folder D: and it&#39;s safe. I can use my Android Studio as usual. But, in this case, I want to know is there any way to move .android and .gradle folder? Because it really takes a lot memory on my laptop","title":"Move .android and .gradle file from folder C: to folder D:","body":"<p>Is there any way to move .android and .gradle folder from folder C: to folder D:? Both file takes a lot of memory in folder C:</p>\n<p>If there is a safe way to move it, I hope you can answer my question. Thank you!!!</p>\n<p>I already try to move Android/Sdk folder from folder C: to folder D: and it's safe. I can use my Android Studio as usual. But, in this case, I want to know is there any way to move .android and .gradle folder? Because it really takes a lot memory on my laptop</p>\n"},{"tags":["java","spring-boot","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":9772576,"reputation":77,"user_id":7374236,"display_name":"Lilia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690375029,"creation_date":1690375029,"answer_id":76771404,"question_id":76770841,"body_markdown":"Is a cron task does not fit your requirement? If so, why? Like run it every 5 minutes and get a list of records that should be sent? \r\n\r\nThe other solution may be remember deadline_time in memory after saving, sort them by deadline_time in queue and work with the ordered queue?","title":"Solution for alerting users from time to time","body":"<p>Is a cron task does not fit your requirement? If so, why? Like run it every 5 minutes and get a list of records that should be sent?</p>\n<p>The other solution may be remember deadline_time in memory after saving, sort them by deadline_time in queue and work with the ordered queue?</p>\n"}],"owner":{"account_id":22070829,"reputation":49,"user_id":16331833,"display_name":"sonnv0812"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690375029,"creation_date":1690371288,"question_id":76770841,"body_markdown":"I would like to ask for **information**, **documentation**, **method**, or **solution** for a case as follows:\r\n\r\n1 table A, there is a lot of data. A record in table A has 2 fields: *created_time* (record creation time) and *deadline_time* (record processing time).\r\n\r\n**How can I send a notification to the user, when the other record&#39;s due date is nearing, or processing is overdue?**\r\n\r\nThe system I have is using kafka to handle event-based messages, and send them to the user. But in the other case of static data, no other events are generated.\r\n\r\nI was thinking of a solution that would be to use a continuous scan and send kafka if a message is near critical or out of date. But that doesn&#39;t seem very good, because to ensure load balance, I use many processes on many modules running at the same time, which will conflict with each other. Is there another solution to this problem?\r\n\r\nThanks so much for the help","title":"Solution for alerting users from time to time","body":"<p>I would like to ask for <strong>information</strong>, <strong>documentation</strong>, <strong>method</strong>, or <strong>solution</strong> for a case as follows:</p>\n<p>1 table A, there is a lot of data. A record in table A has 2 fields: <em>created_time</em> (record creation time) and <em>deadline_time</em> (record processing time).</p>\n<p><strong>How can I send a notification to the user, when the other record's due date is nearing, or processing is overdue?</strong></p>\n<p>The system I have is using kafka to handle event-based messages, and send them to the user. But in the other case of static data, no other events are generated.</p>\n<p>I was thinking of a solution that would be to use a continuous scan and send kafka if a message is near critical or out of date. But that doesn't seem very good, because to ensure load balance, I use many processes on many modules running at the same time, which will conflict with each other. Is there another solution to this problem?</p>\n<p>Thanks so much for the help</p>\n"},{"tags":["java","spring-boot","docker","kubernetes","eclipse-temurin"],"owner":{"account_id":231589,"reputation":6295,"user_id":495906,"accept_rate":73,"display_name":"anujprashar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690374974,"creation_date":1690374974,"question_id":76771390,"body_markdown":"I updated container base image from `openjdk:8-jdk-alpine` to `eclipse-temurin:8-jdk` in Dockerfile. No other change is done. When I created pods using updated Docker file. I am getting below error:\r\n\r\n    ]org.springframework.boot.SpringApplication:  Application run failed \r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name \r\n    &#39;MyClassService&#39;: Injection of autowired dependencies failed; nested exception is \r\n    java.lang.IllegalArgumentException: Could not resolve placeholder \r\n\r\nFrom above error it is clear that application not able to find autowired properties. I have defined those properties in pods yaml file and it is working fine with openjdk image.\r\n\r\nWhy after updating to `eclipse-temurin:8-jdk` I am getting this error.\r\n","title":"Spring boot - Getting error after updating base image for java","body":"<p>I updated container base image from <code>openjdk:8-jdk-alpine</code> to <code>eclipse-temurin:8-jdk</code> in Dockerfile. No other change is done. When I created pods using updated Docker file. I am getting below error:</p>\n<pre><code>]org.springframework.boot.SpringApplication:  Application run failed \norg.springframework.beans.factory.BeanCreationException: Error creating bean with name \n'MyClassService': Injection of autowired dependencies failed; nested exception is \njava.lang.IllegalArgumentException: Could not resolve placeholder \n</code></pre>\n<p>From above error it is clear that application not able to find autowired properties. I have defined those properties in pods yaml file and it is working fine with openjdk image.</p>\n<p>Why after updating to <code>eclipse-temurin:8-jdk</code> I am getting this error.</p>\n"},{"tags":["java","mapstruct","aws-sdk-java-2.0"],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1638985916,"creation_date":1638985916,"answer_id":70279563,"question_id":70275381,"body_markdown":"MapStruct provides a way to define whether a certain method is a getter or a setter through its `AccessorNamingStrategy`.\r\n\r\nIn theory you can write a custom `AccessorNamingStrategy` that would be able to detect the methods from the AWS SDK Java 2 as getters. Keep in mind that plainly returning every method with a return type and no parameters as a getter might lead to false positives.\r\n\r\nIdeally the methods should be annotated by AWS SDK and you can then use that to detect if a method is a getter or not. The SDK currently does not do this. You could request this, but I am not sure whether the AWS team will be willing to do such a thing. ","title":"MapStruct with AWS SDk V2 Builder","body":"<p>MapStruct provides a way to define whether a certain method is a getter or a setter through its <code>AccessorNamingStrategy</code>.</p>\n<p>In theory you can write a custom <code>AccessorNamingStrategy</code> that would be able to detect the methods from the AWS SDK Java 2 as getters. Keep in mind that plainly returning every method with a return type and no parameters as a getter might lead to false positives.</p>\n<p>Ideally the methods should be annotated by AWS SDK and you can then use that to detect if a method is a getter or not. The SDK currently does not do this. You could request this, but I am not sure whether the AWS team will be willing to do such a thing.</p>\n"},{"tags":[],"owner":{"account_id":7125787,"reputation":771,"user_id":5448746,"display_name":"Ondřej Stašek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690374961,"creation_date":1690296439,"answer_id":76763880,"question_id":70275381,"body_markdown":"This naming strategy is working for me for AWS ADK v2 ver 2.20.103:\r\n\r\n```java\r\n    public class AwsSdkAccessorNamingStrategy extends DefaultAccessorNamingStrategy {\r\n    \r\n        private final Set&lt;String&gt; NOT_GETTER = Set.of(&quot;toString&quot;, &quot;hashCode&quot;, &quot;sdkFields&quot;, &quot;builder&quot;, &quot;toBuilder&quot;, &quot;serializableBuilderClass&quot;);\r\n    \r\n        @Override\r\n        public boolean isGetterMethod(ExecutableElement method) {\r\n            if (isAwsPackage(method)) {\r\n                String name = method.getSimpleName().toString();\r\n                return method.getParameters().isEmpty() &amp;&amp; !name.startsWith(&quot;has&quot;) &amp;&amp; !NOT_GETTER.contains(name);\r\n            }\r\n            return super.isGetterMethod(method);\r\n        }\r\n    \r\n        @Override\r\n        public String getPropertyName(ExecutableElement method) {\r\n            return isAwsPackage(method) ? method.getSimpleName().toString() : super.getPropertyName(method);\r\n        }\r\n    \r\n        private boolean isAwsPackage(ExecutableElement method) {\r\n            return elementUtils.getPackageOf(method).getQualifiedName().toString().startsWith(&quot;software.amazon.awssdk&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nHow to actually use naming strategy for MapStruct see [MapStruct reference][1] and example at [mapstruct-examples][2]\r\n\r\nIt looks what is the actual class package so it won&#39;t break your existing mappers and if class from AWS SDK is found, use any method that does not have parameters, does not start with &#39;has&#39; and is not one of non-getter methods. Feel free to improve on this.\r\n\r\n**Edit:** this works for mapping AWS SDK v2 classes as source. For mapping those classes as target, you just add new builder naming strategy class.\r\n\r\n  [1]: https://mapstruct.org/documentation/stable/reference/html/#_custom_accessor_naming_strategy\r\n  [2]: https://github.com/mapstruct/mapstruct-examples/blob/main/mapstruct-spi-accessor-naming/spi-impl/pom.xml","title":"MapStruct with AWS SDk V2 Builder","body":"<p>This naming strategy is working for me for AWS ADK v2 ver 2.20.103:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class AwsSdkAccessorNamingStrategy extends DefaultAccessorNamingStrategy {\n    \n        private final Set&lt;String&gt; NOT_GETTER = Set.of(&quot;toString&quot;, &quot;hashCode&quot;, &quot;sdkFields&quot;, &quot;builder&quot;, &quot;toBuilder&quot;, &quot;serializableBuilderClass&quot;);\n    \n        @Override\n        public boolean isGetterMethod(ExecutableElement method) {\n            if (isAwsPackage(method)) {\n                String name = method.getSimpleName().toString();\n                return method.getParameters().isEmpty() &amp;&amp; !name.startsWith(&quot;has&quot;) &amp;&amp; !NOT_GETTER.contains(name);\n            }\n            return super.isGetterMethod(method);\n        }\n    \n        @Override\n        public String getPropertyName(ExecutableElement method) {\n            return isAwsPackage(method) ? method.getSimpleName().toString() : super.getPropertyName(method);\n        }\n    \n        private boolean isAwsPackage(ExecutableElement method) {\n            return elementUtils.getPackageOf(method).getQualifiedName().toString().startsWith(&quot;software.amazon.awssdk&quot;);\n        }\n    }\n</code></pre>\n<p>How to actually use naming strategy for MapStruct see <a href=\"https://mapstruct.org/documentation/stable/reference/html/#_custom_accessor_naming_strategy\" rel=\"nofollow noreferrer\">MapStruct reference</a> and example at <a href=\"https://github.com/mapstruct/mapstruct-examples/blob/main/mapstruct-spi-accessor-naming/spi-impl/pom.xml\" rel=\"nofollow noreferrer\">mapstruct-examples</a></p>\n<p>It looks what is the actual class package so it won't break your existing mappers and if class from AWS SDK is found, use any method that does not have parameters, does not start with 'has' and is not one of non-getter methods. Feel free to improve on this.</p>\n<p><strong>Edit:</strong> this works for mapping AWS SDK v2 classes as source. For mapping those classes as target, you just add new builder naming strategy class.</p>\n"}],"owner":{"account_id":315157,"reputation":787,"user_id":630769,"accept_rate":64,"display_name":"asvignesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76763880,"answer_count":2,"score":1,"last_activity_date":1690374961,"creation_date":1638968188,"question_id":70275381,"body_markdown":"For internal mapping, I created the POJO / DTO for the AWS SDK Models V2\r\n\r\nTo map the variables I am using the MapStruct using the Mapper annotation but the Implementation generated during the annotation processing is not using any getters, but the setter with the builder is added properly but with null \r\n\r\n\r\n    @Mapper\r\n    public interface Ec2Mapper {\r\n    LaunchTemplateBlockDeviceMappingModel mapLaunchTemplateBlockDeviceMappingModel(\r\n          LaunchTemplateBlockDeviceMapping launchTemplateBlockDeviceMapping);\r\n    }\r\n\r\n\r\n    @Generated(\r\n        value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\r\n        date = &quot;2021-12-08T15:58:00+0530&quot;,\r\n        comments = &quot;version: 1.4.2.Final, compiler: IncrementalProcessingEnvironment from gradle-language-java-6.4.1.jar, environment: Java 1.8.0_292 (AdoptOpenJDK)&quot;\r\n    )\r\n    public class Ec2MapperImpl implements Ec2Mapper {\r\n    \r\n        @Override\r\n        public LaunchTemplateBlockDeviceMappingModel mapLaunchTemplateBlockDeviceMappingModel(LaunchTemplateBlockDeviceMapping launchTemplateBlockDeviceMapping) {\r\n            if ( launchTemplateBlockDeviceMapping == null ) {\r\n                return null;\r\n            }\r\n    \r\n            String deviceName = null;\r\n            String virtualName = null;\r\n            LaunchTemplateEbsBlockDeviceModel ebs = null;\r\n            String noDevice = null;\r\n    \r\n            LaunchTemplateBlockDeviceMappingModel launchTemplateBlockDeviceMappingModel = new LaunchTemplateBlockDeviceMappingModel( deviceName, virtualName, ebs, noDevice );\r\n    \r\n            return launchTemplateBlockDeviceMappingModel;\r\n        }\r\n    }\r\n\r\n\r\nAWS SDK V2 Models don&#39;t have getters with the prefix get, it directly the name of the variable, how to configure the map struct for this scenario.\r\n","title":"MapStruct with AWS SDk V2 Builder","body":"<p>For internal mapping, I created the POJO / DTO for the AWS SDK Models V2</p>\n<p>To map the variables I am using the MapStruct using the Mapper annotation but the Implementation generated during the annotation processing is not using any getters, but the setter with the builder is added properly but with null</p>\n<pre><code>@Mapper\npublic interface Ec2Mapper {\nLaunchTemplateBlockDeviceMappingModel mapLaunchTemplateBlockDeviceMappingModel(\n      LaunchTemplateBlockDeviceMapping launchTemplateBlockDeviceMapping);\n}\n\n\n@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    date = &quot;2021-12-08T15:58:00+0530&quot;,\n    comments = &quot;version: 1.4.2.Final, compiler: IncrementalProcessingEnvironment from gradle-language-java-6.4.1.jar, environment: Java 1.8.0_292 (AdoptOpenJDK)&quot;\n)\npublic class Ec2MapperImpl implements Ec2Mapper {\n\n    @Override\n    public LaunchTemplateBlockDeviceMappingModel mapLaunchTemplateBlockDeviceMappingModel(LaunchTemplateBlockDeviceMapping launchTemplateBlockDeviceMapping) {\n        if ( launchTemplateBlockDeviceMapping == null ) {\n            return null;\n        }\n\n        String deviceName = null;\n        String virtualName = null;\n        LaunchTemplateEbsBlockDeviceModel ebs = null;\n        String noDevice = null;\n\n        LaunchTemplateBlockDeviceMappingModel launchTemplateBlockDeviceMappingModel = new LaunchTemplateBlockDeviceMappingModel( deviceName, virtualName, ebs, noDevice );\n\n        return launchTemplateBlockDeviceMappingModel;\n    }\n}\n</code></pre>\n<p>AWS SDK V2 Models don't have getters with the prefix get, it directly the name of the variable, how to configure the map struct for this scenario.</p>\n"},{"tags":["java","json","spring-boot","jackson","aws-sdk"],"answers":[{"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1560885323,"creation_date":1560885323,"answer_id":56655655,"question_id":56653978,"body_markdown":"Problem is with [Bucket][1] class. `Jackson` by default treats all provided objects like `POJO`-s. Each `POJO` should have list of `getters`/`setters`. In case, class does not have them object is treated as empty. If you want to serialise classes like this you can:\r\n\r\n 1. Create extra `POJO` class with `getters` and map it from raw `AWS`\r\n    class to this `POJO`.\r\n 2. Implement and register serialiser for this class.\r\n 3. Convert `AWS` model to `Map`-s and `List`-s manually and serialise them.\r\n\r\nSee also:\r\n\r\n - [How to return N1qlQueryResult as the response of REST API for Couchbase databse?][2]\r\n\r\n\r\n  [1]: https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/s3/model/Bucket.html\r\n  [2]: https://stackoverflow.com/questions/55179768/how-to-return-n1qlqueryresult-as-the-response-of-rest-api-for-couchbase-databse","title":"No serializer found for class in custom Java AWS application","body":"<p>Problem is with <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/s3/model/Bucket.html\" rel=\"nofollow noreferrer\">Bucket</a> class. <code>Jackson</code> by default treats all provided objects like <code>POJO</code>-s. Each <code>POJO</code> should have list of <code>getters</code>/<code>setters</code>. In case, class does not have them object is treated as empty. If you want to serialise classes like this you can:</p>\n\n<ol>\n<li>Create extra <code>POJO</code> class with <code>getters</code> and map it from raw <code>AWS</code>\nclass to this <code>POJO</code>.</li>\n<li>Implement and register serialiser for this class.</li>\n<li>Convert <code>AWS</code> model to <code>Map</code>-s and <code>List</code>-s manually and serialise them.</li>\n</ol>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/55179768/how-to-return-n1qlqueryresult-as-the-response-of-rest-api-for-couchbase-databse\">How to return N1qlQueryResult as the response of REST API for Couchbase databse?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":14179237,"reputation":164,"user_id":10243472,"display_name":"WiscoRadio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560890310,"creation_date":1560890310,"answer_id":56656716,"question_id":56653978,"body_markdown":"In addition to the accepted answer above, another method of solving this problem is to extract the parts of the list and insert them as their separated, respective lists into the prebuilt POJO. \r\n\r\nIn this example, I took the ```name()``` and ```creationDate()``` functions and put them in their own list in the S3 Class. This allows Jackson to read the S3 Class and get the required information without having to build an extra POJO for the ```Bucket``` class. Not entirely sure which way is actually cleaner or more effective but this also worked for what I was doing.\r\n\r\n**S3 Construction Class**\r\n\r\n```\r\n@Component\r\npublic class S3 {\r\n    private ArrayList&lt;String&gt; bucketList;\r\n    private ArrayList&lt;Instant&gt; bucketCreationDate;\r\n\r\n    public ArrayList&lt;Instant&gt; getBucketCreationDate() {\r\n        return bucketCreationDate;\r\n    }\r\n\r\n    public void setBucketCreationDate(ArrayList&lt;Instant&gt; bucketCreationDate) {\r\n        this.bucketCreationDate = bucketCreationDate;\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; getBucketList() {\r\n        return bucketList;\r\n    }\r\n\r\n    public void setBucketList(ArrayList&lt;String&gt; bucketList) {\r\n        this.bucketList = bucketList;\r\n    }\r\n}\r\n```\r\n\r\n**Access Class**\r\n\r\n```\r\n@Repository\r\npublic class S3Access implements S3Repository {\r\n\r\n    @Autowired\r\n    private S3 s3Instance;\r\n\r\n    private Region region = Region.US_EAST_1;\r\n    private S3Client s3Client = S3Client.builder().region(region).build();\r\n    private ArrayList &lt;String&gt; bucketNameList = new ArrayList&lt;&gt;();\r\n    private ArrayList &lt;Instant&gt; bucketCreationDate = new ArrayList&lt;&gt;();\r\n\r\n    @Override\r\n    public S3 listBucket() {\r\n        ListBucketsRequest listBucketsRequest = ListBucketsRequest.builder().build();\r\n        ListBucketsResponse listBucketsResponse = s3Client.listBuckets(listBucketsRequest);\r\n\r\n        // Adding Bucket Names to Array List\r\n        for (int i = 0; i &lt; listBucketsResponse.buckets().size() ; i++) {\r\n            bucketNameList.add(listBucketsResponse.buckets().get(i).name());\r\n        }\r\n\r\n        // Adding Bucket Creation Dates to Array List\r\n        for (int i = 0; i &lt; listBucketsResponse.buckets().size() ; i++) {\r\n            bucketCreationDate.add(listBucketsResponse.buckets().get(i).creationDate());\r\n        }\r\n\r\n        // Setting the lists in the S3 Class\r\n        s3Instance.setBucketCreationDate(bucketCreationDate);\r\n        s3Instance.setBucketList(bucketNameList);\r\n\r\n        return s3Instance;\r\n\r\n","title":"No serializer found for class in custom Java AWS application","body":"<p>In addition to the accepted answer above, another method of solving this problem is to extract the parts of the list and insert them as their separated, respective lists into the prebuilt POJO. </p>\n\n<p>In this example, I took the <code>name()</code> and <code>creationDate()</code> functions and put them in their own list in the S3 Class. This allows Jackson to read the S3 Class and get the required information without having to build an extra POJO for the <code>Bucket</code> class. Not entirely sure which way is actually cleaner or more effective but this also worked for what I was doing.</p>\n\n<p><strong>S3 Construction Class</strong></p>\n\n<pre><code>@Component\npublic class S3 {\n    private ArrayList&lt;String&gt; bucketList;\n    private ArrayList&lt;Instant&gt; bucketCreationDate;\n\n    public ArrayList&lt;Instant&gt; getBucketCreationDate() {\n        return bucketCreationDate;\n    }\n\n    public void setBucketCreationDate(ArrayList&lt;Instant&gt; bucketCreationDate) {\n        this.bucketCreationDate = bucketCreationDate;\n    }\n\n    public ArrayList&lt;String&gt; getBucketList() {\n        return bucketList;\n    }\n\n    public void setBucketList(ArrayList&lt;String&gt; bucketList) {\n        this.bucketList = bucketList;\n    }\n}\n</code></pre>\n\n<p><strong>Access Class</strong></p>\n\n<pre><code>@Repository\npublic class S3Access implements S3Repository {\n\n    @Autowired\n    private S3 s3Instance;\n\n    private Region region = Region.US_EAST_1;\n    private S3Client s3Client = S3Client.builder().region(region).build();\n    private ArrayList &lt;String&gt; bucketNameList = new ArrayList&lt;&gt;();\n    private ArrayList &lt;Instant&gt; bucketCreationDate = new ArrayList&lt;&gt;();\n\n    @Override\n    public S3 listBucket() {\n        ListBucketsRequest listBucketsRequest = ListBucketsRequest.builder().build();\n        ListBucketsResponse listBucketsResponse = s3Client.listBuckets(listBucketsRequest);\n\n        // Adding Bucket Names to Array List\n        for (int i = 0; i &lt; listBucketsResponse.buckets().size() ; i++) {\n            bucketNameList.add(listBucketsResponse.buckets().get(i).name());\n        }\n\n        // Adding Bucket Creation Dates to Array List\n        for (int i = 0; i &lt; listBucketsResponse.buckets().size() ; i++) {\n            bucketCreationDate.add(listBucketsResponse.buckets().get(i).creationDate());\n        }\n\n        // Setting the lists in the S3 Class\n        s3Instance.setBucketCreationDate(bucketCreationDate);\n        s3Instance.setBucketList(bucketNameList);\n\n        return s3Instance;\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16352234,"reputation":1,"user_id":11810420,"display_name":"Kedir Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657949282,"creation_date":1657948363,"answer_id":73001696,"question_id":56653978,"body_markdown":"apparently  the builder class is serializable (since they have public getters).I have tried it on the findings returned by getFindigs API for GuardDuty in a restController class and it did serialize the object successfully. so just call toBuilder() method on the returned pojo objects and return that instead of copying stuff over .\r\n \r\n\r\n        List&lt;Finding.Builder&gt; findingResult = findings.stream().map(finding -&gt; finding.toBuilder())\r\n                        .collect(Collectors.toList());\r\n        return findingResult;","title":"No serializer found for class in custom Java AWS application","body":"<p>apparently  the builder class is serializable (since they have public getters).I have tried it on the findings returned by getFindigs API for GuardDuty in a restController class and it did serialize the object successfully. so just call toBuilder() method on the returned pojo objects and return that instead of copying stuff over .</p>\n<pre><code>    List&lt;Finding.Builder&gt; findingResult = findings.stream().map(finding -&gt; finding.toBuilder())\n                    .collect(Collectors.toList());\n    return findingResult;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18730483,"reputation":191,"user_id":13655996,"display_name":"xaiweiyi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687148793,"creation_date":1687148793,"answer_id":76503602,"question_id":56653978,"body_markdown":"1) It&#39;s caused by lacking of `getter` and `setter` methods in an amazon object bean.\r\n2) By default , a setter method should start with `set` like `setPropName()`,but its&#39;not in amazon object bean.\r\n3) Meanwhile ,Jackson-json required the getter/setter methods in the pattern of `getPropName`| `setPropName`. And this&#39;s where the crash happens.\r\n\r\n4) How to fix this ?\r\nAssuming we got an amazon object bean, `software.amazon.awssdk.services.organizations.model.Account`.\r\n\r\n```java\r\nfinal List&lt;Account&gt; accounts = response.accounts();\r\n// call its toBuilder() method,\r\n// and it returns a BuilderImpl ,which dose have standard getter/setter methods\r\nList&lt;Account.Builder&gt; list = accounts.stream().map(a -&gt; a.toBuilder()).collect(Collectors.toList());\r\n// this list now can be jackson serialized properly \r\nreturn list;\r\n```\r\n[![enter image description here][1]][1]\r\n\r\n5) finally ,test it with postman.As you can see,the result is fine\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/A8KmT.png\r\n  [2]: https://i.stack.imgur.com/v3pQK.png","title":"No serializer found for class in custom Java AWS application","body":"<ol>\n<li><p>It's caused by lacking of <code>getter</code> and <code>setter</code> methods in an amazon object bean.</p>\n</li>\n<li><p>By default , a setter method should start with <code>set</code> like <code>setPropName()</code>,but its'not in amazon object bean.</p>\n</li>\n<li><p>Meanwhile ,Jackson-json required the getter/setter methods in the pattern of <code>getPropName</code>| <code>setPropName</code>. And this's where the crash happens.</p>\n</li>\n<li><p>How to fix this ?\nAssuming we got an amazon object bean, <code>software.amazon.awssdk.services.organizations.model.Account</code>.</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>final List&lt;Account&gt; accounts = response.accounts();\n// call its toBuilder() method,\n// and it returns a BuilderImpl ,which dose have standard getter/setter methods\nList&lt;Account.Builder&gt; list = accounts.stream().map(a -&gt; a.toBuilder()).collect(Collectors.toList());\n// this list now can be jackson serialized properly \nreturn list;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/A8KmT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A8KmT.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"5\">\n<li>finally ,test it with postman.As you can see,the result is fine</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/v3pQK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v3pQK.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":7125787,"reputation":771,"user_id":5448746,"display_name":"Ondřej Stašek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690374479,"creation_date":1690374479,"answer_id":76771316,"question_id":56653978,"body_markdown":"Seems that all you need to do is set field visibility to any, as AWS SDK v2 classes have private fields and getters without &quot;get&quot; that are unrecognized. Serializing using private fields seems to work.\r\n\r\nIf you are using spring boot, add to your **application.yml** file this:\r\n\r\n    spring:\r\n      jackson:\r\n        visibility:\r\n          field: any\r\n","title":"No serializer found for class in custom Java AWS application","body":"<p>Seems that all you need to do is set field visibility to any, as AWS SDK v2 classes have private fields and getters without &quot;get&quot; that are unrecognized. Serializing using private fields seems to work.</p>\n<p>If you are using spring boot, add to your <strong>application.yml</strong> file this:</p>\n<pre><code>spring:\n  jackson:\n    visibility:\n      field: any\n</code></pre>\n"}],"owner":{"account_id":14179237,"reputation":164,"user_id":10243472,"display_name":"WiscoRadio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4782,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":56655655,"answer_count":5,"score":2,"last_activity_date":1690374479,"creation_date":1560877664,"question_id":56653978,"body_markdown":"I am creating a Spring application where in it calls information from the AWS API and converts it to JSON for a front end application to digest and display. I am currently trying to return a list out all of the current S3 buckets on an account but am running into an issue where the JSON response is:\r\n\r\n&gt;status&quot;: 500,\r\n&gt;&quot;error&quot;: &quot;Internal Server Error&quot;,\r\n&gt;&quot;message&quot;: &quot;Type definition error: [simple type, class software.amazon.awssdk.services.s3.model.Bucket]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class software.amazon.awssdk.services.s3.model.Bucket and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.landsend.clouddashboard.data.Class.S3[\\&quot;bucketList\\&quot;]-java.util.Collections$UnmodifiableRandomAccessList[0])&quot;,\r\n&gt;&quot;path&quot;: &quot;/api/s3/buckets&quot;\r\n\r\nI have created a class called S3 that has private variables. One of them being a List&lt;Bucket&gt; type with the name bucketList. This class has the representative getters and setters as well associated with those variables. \r\n\r\nI have also tried adding this to the applications.properties file:\r\n\r\n```\r\nspring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false\r\n```\r\n\r\nThis did result in the error disappearing but I ended up with an empty JSON file.\r\n\r\n**Controller Class**\r\n\r\n```\r\n@RestController\r\n@RequestMapping(value=&quot;/api&quot;)\r\npublic class S3Controller {\r\n\r\n    @Autowired\r\n    private S3Service s3Service;\r\n    \r\n    @RequestMapping(method= RequestMethod.GET, value=&quot;/s3/buckets&quot;)\r\n    public S3 ListBuckets(){\r\n        return s3Service.listBucket();\r\n    }\r\n}\r\n```\r\n\r\n**Service Class**\r\n\r\n```\r\n@Service\r\npublic class S3Service {\r\n\r\n    private S3Access s3Access;\r\n\r\n    @Autowired\r\n    public S3Service(S3Access s3Access){\r\n        this.s3Access = s3Access;\r\n    }\r\n    public S3 listBucket(){\r\n        //Any Additional business logic would go here\r\n        return s3Access.listBucket();\r\n    }\r\n}\r\n```\r\n\r\n**Access Class**\r\n\r\n```\r\n@Repository\r\npublic class S3Access implements S3Repository {\r\n\r\n    @Autowired\r\n    private S3 s3Instance;\r\n\r\n    private Region region = Region.US_EAST_1;\r\n    private S3Client s3Client = \r\n                     S3Client.builder().region(region).build();\r\n\r\n    @Override\r\n    public S3 listBucket() {\r\n        ListBucketsRequest listBucketsRequest = ListBucketsRequest.builder().build();\r\n        ListBucketsResponse listBucketsResponse = s3Client.listBuckets(listBucketsRequest);\r\n        s3Instance.setBucketList(listBucketsResponse.buckets());\r\n        return s3Instance;\r\n    }\r\n}\r\n```\r\n\r\n**S3 Constructor Class**\r\n\r\n```\r\n@Component\r\npublic class S3 {\r\n    private String fileName;\r\n    private String bucketName;\r\n    private int bucketSize;\r\n    private List&lt;Bucket&gt; bucketList;\r\n\r\n    public List&lt;Bucket&gt; getBucketList() {\r\n        return bucketList;\r\n    }\r\n\r\n    public void setBucketList(List&lt;Bucket&gt; bucketList) {\r\n        this.bucketList = bucketList;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nAny thoughts on why this isn&#39;t working is appreciated.","title":"No serializer found for class in custom Java AWS application","body":"<p>I am creating a Spring application where in it calls information from the AWS API and converts it to JSON for a front end application to digest and display. I am currently trying to return a list out all of the current S3 buckets on an account but am running into an issue where the JSON response is:</p>\n\n<blockquote>\n  <p>status\": 500,\n  \"error\": \"Internal Server Error\",\n  \"message\": \"Type definition error: [simple type, class software.amazon.awssdk.services.s3.model.Bucket]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class software.amazon.awssdk.services.s3.model.Bucket and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.landsend.clouddashboard.data.Class.S3[\\\"bucketList\\\"]-java.util.Collections$UnmodifiableRandomAccessList[0])\",\n  \"path\": \"/api/s3/buckets\"</p>\n</blockquote>\n\n<p>I have created a class called S3 that has private variables. One of them being a List type with the name bucketList. This class has the representative getters and setters as well associated with those variables. </p>\n\n<p>I have also tried adding this to the applications.properties file:</p>\n\n<pre><code>spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false\n</code></pre>\n\n<p>This did result in the error disappearing but I ended up with an empty JSON file.</p>\n\n<p><strong>Controller Class</strong></p>\n\n<pre><code>@RestController\n@RequestMapping(value=\"/api\")\npublic class S3Controller {\n\n    @Autowired\n    private S3Service s3Service;\n\n    @RequestMapping(method= RequestMethod.GET, value=\"/s3/buckets\")\n    public S3 ListBuckets(){\n        return s3Service.listBucket();\n    }\n}\n</code></pre>\n\n<p><strong>Service Class</strong></p>\n\n<pre><code>@Service\npublic class S3Service {\n\n    private S3Access s3Access;\n\n    @Autowired\n    public S3Service(S3Access s3Access){\n        this.s3Access = s3Access;\n    }\n    public S3 listBucket(){\n        //Any Additional business logic would go here\n        return s3Access.listBucket();\n    }\n}\n</code></pre>\n\n<p><strong>Access Class</strong></p>\n\n<pre><code>@Repository\npublic class S3Access implements S3Repository {\n\n    @Autowired\n    private S3 s3Instance;\n\n    private Region region = Region.US_EAST_1;\n    private S3Client s3Client = \n                     S3Client.builder().region(region).build();\n\n    @Override\n    public S3 listBucket() {\n        ListBucketsRequest listBucketsRequest = ListBucketsRequest.builder().build();\n        ListBucketsResponse listBucketsResponse = s3Client.listBuckets(listBucketsRequest);\n        s3Instance.setBucketList(listBucketsResponse.buckets());\n        return s3Instance;\n    }\n}\n</code></pre>\n\n<p><strong>S3 Constructor Class</strong></p>\n\n<pre><code>@Component\npublic class S3 {\n    private String fileName;\n    private String bucketName;\n    private int bucketSize;\n    private List&lt;Bucket&gt; bucketList;\n\n    public List&lt;Bucket&gt; getBucketList() {\n        return bucketList;\n    }\n\n    public void setBucketList(List&lt;Bucket&gt; bucketList) {\n        this.bucketList = bucketList;\n    }\n}\n</code></pre>\n\n<p>Any thoughts on why this isn't working is appreciated.</p>\n"},{"tags":["java","hadoop-yarn","nodemanager"],"answers":[{"tags":[],"owner":{"account_id":49908,"reputation":4336,"user_id":148736,"accept_rate":63,"display_name":"Andrew Arrow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690374476,"creation_date":1690374476,"answer_id":76771315,"question_id":76771284,"body_markdown":"1. look at JAVA_HOME environment variable is set to the appropriate JDK version (JDK 8) that is compatible with Hadoop 3.x.\r\n\r\n2. Remove other JDK installations: To avoid any conflicts, consider uninstalling JDK 11 and JDK 17.\r\n\r\n3. Look at Hadoop configuration files to ensure that they are using the correct JAVA_HOME variable.\r\n\r\n4. Restart Hadoop ","title":"Hadoop can‘t open node manager","body":"<ol>\n<li><p>look at JAVA_HOME environment variable is set to the appropriate JDK version (JDK 8) that is compatible with Hadoop 3.x.</p>\n</li>\n<li><p>Remove other JDK installations: To avoid any conflicts, consider uninstalling JDK 11 and JDK 17.</p>\n</li>\n<li><p>Look at Hadoop configuration files to ensure that they are using the correct JAVA_HOME variable.</p>\n</li>\n<li><p>Restart Hadoop</p>\n</li>\n</ol>\n"}],"owner":{"account_id":29095368,"reputation":13,"user_id":22288353,"display_name":"RussellXiao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76771315,"answer_count":1,"score":1,"last_activity_date":1690374476,"creation_date":1690374264,"question_id":76771284,"body_markdown":"my Hadoop version is 3.x\r\njps shows NameNode,SecondaryNameNode,ResourceManager but no NodeManager.\r\nlog shows like\r\n\r\n\r\n**ERROR org.apache.hadoop.yarn.server.nodemanager.NodeManager: Error starting NodeManagerjava.lang.ExceptionInInitializerErrorat com.google.inject.internal.cglib.reflect.$FastClassEmitter.&lt;init&gt;(FastClassEmitter.java:67)at com.google.inject.internal.cglib.reflect.$FastClass$Generator.generateClass(FastClass.java:72)at com.google.inject.internal.cglib.core.$DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)at com.google.inject.internal.cglib.core.$AbstractClassGenerator.create(AbstractClassGenerator.java:216)at com.google.inject.internal.cglib.reflect.$FastClass$Generator.create(FastClass.java:64)at com.google.inject.internal.BytecodeGen.newFastClass(BytecodeGen.java:204)at com.google.inject.internal.ProviderMethod$FastClassProviderMethod.&lt;init&gt;(ProviderMethod.java:256)at com.google.inject.internal.ProviderMethod.create(ProviderMethod.java:71)at com.google.inject.internal.ProviderMethodsModule.createProviderMethod(ProviderMethodsModule.java:275)at com.google.inject.internal.ProviderMethodsModule.getProviderMethods(ProviderMethodsModule.java:144)at com.google.inject.internal.ProviderMethodsModule.configure(ProviderMethodsModule.java:123)at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:340)at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:349)at com.google.inject.AbstractModule.install(AbstractModule.java:122)at com.google.inject.servlet.ServletModule.configure(ServletModule.java:52)at com.google.inject.AbstractModule.configure(AbstractModule.java:62)at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:340)at com.google.inject.spi.Elements.getElements(Elements.java:110)at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:138)at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:104)at com.google.inject.Guice.createInjector(Guice.java:96)at com.google.inject.Guice.createInjector(Guice.java:73)at com.google.inject.Guice.createInjector(Guice.java:62)at org.apache.hadoop.yarn.webapp.WebApps$Builder.build(WebApps.java:417)at org.apache.hadoop.yarn.webapp.WebApps$Builder.start(WebApps.java:465)at org.apache.hadoop.yarn.webapp.WebApps$Builder.start(WebApps.java:461)at org.apache.hadoop.yarn.server.nodemanager.webapp.WebServer.serviceStart(WebServer.java:125)at org.apache.hadoop.service.AbstractService.start(AbstractService.java:194)at org.apache.hadoop.service.CompositeService.serviceStart(CompositeService.java:122)at org.apache.hadoop.service.AbstractService.start(AbstractService.java:194)at org.apache.hadoop.yarn.server.nodemanager.NodeManager.initAndStartNodeManager(NodeManager.java:963)at org.apache.hadoop.yarn.server.nodemanager.NodeManager.main(NodeManager.java:1042)Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @58ecb515at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)at java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)at java.base/java.lang.reflect.Method.setAccessible(Method.java:193)at com.google.inject.internal.cglib.core.$ReflectUtils$2.run(ReflectUtils.java:56)at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)at com.google.inject.internal.cglib.core.$ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:46)... 32 more**\r\n\r\n\r\nits my yarn-site.xml\r\n\r\n\r\n\r\n    &lt;configuration&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;yarn.resourcemanager.hostsname&lt;/name&gt;\r\n            &lt;value&gt;127.0.0.1&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;\r\n            &lt;value&gt;mapreduce_shuffle&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;yarn.nodemanager.resource.cpu-vcores&lt;/name&gt;\r\n            &lt;value&gt;8&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;\r\n            &lt;value&gt;8192&lt;/value&gt;\r\n        &lt;/property&gt;\r\n            &lt;property&gt;\r\n            &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;\r\n            &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_HOME,PATH,LANG,TZ,HADOOP_MAPRED_HOME&lt;/value&gt;\r\n        &lt;/property&gt;\r\n    &lt;/configuration&gt;\r\n\r\nmy core-site.xml\r\n\r\n&lt;!--    --&gt;\r\n\r\n&lt;!--        hadoop.tmp.dir--&gt;\r\n\r\n&lt;!--        /opt/hadoopTmp--&gt;\r\n\r\n&lt;!--        A base for other temporary directories.--&gt;\r\n\r\n \r\n\r\n    &lt; configuration&gt;\r\n    &lt;property&gt;\r\n        &lt;name&gt;fs.default.name&lt;/name&gt;\r\n        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;\r\n    &lt;/property&gt;\r\n    &lt;/configuration&gt;\r\n\r\nmy mapped-site.xml\r\n\r\n```\r\n&lt;configuration&gt;\r\n    &lt;property&gt;\r\n        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;\r\n        &lt;value&gt;yarn&lt;/value&gt;\r\n    &lt;/property&gt;\r\n    &lt;property&gt;\r\n        &lt;name&gt;mapreduce.application.classpath&lt;/name&gt;\r\n        &lt;value&gt;$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*&lt;/value&gt;\r\n    &lt;/property&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\n     \r\n\r\nmy Hdfs-site.xml\r\n\r\n```\r\n&lt;configuration&gt;\r\n    &lt;property&gt;\r\n        &lt;name&gt;dfs.replication&lt;/name&gt;\r\n        &lt;value&gt;1&lt;/value&gt;\r\n    &lt;/property&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\n   \r\n\r\nI tried to change the configuration of these four files a lot, but none of them worked. My log file shows that the error is the above. I have encountered this problem. It seems to be a jdk version problem. I have jdk8 and jdk11 on my computer. jdk17 but my javahome setting is jdk8, I installed it through brew and did not configure the environment.","title":"Hadoop can‘t open node manager","body":"<p>my Hadoop version is 3.x\njps shows NameNode,SecondaryNameNode,ResourceManager but no NodeManager.\nlog shows like</p>\n<p><strong>ERROR org.apache.hadoop.yarn.server.nodemanager.NodeManager: Error starting NodeManagerjava.lang.ExceptionInInitializerErrorat com.google.inject.internal.cglib.reflect.$FastClassEmitter.(FastClassEmitter.java:67)at com.google.inject.internal.cglib.reflect.$FastClass$Generator.generateClass(FastClass.java:72)at com.google.inject.internal.cglib.core.$DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)at com.google.inject.internal.cglib.core.$AbstractClassGenerator.create(AbstractClassGenerator.java:216)at com.google.inject.internal.cglib.reflect.$FastClass$Generator.create(FastClass.java:64)at com.google.inject.internal.BytecodeGen.newFastClass(BytecodeGen.java:204)at com.google.inject.internal.ProviderMethod$FastClassProviderMethod.(ProviderMethod.java:256)at com.google.inject.internal.ProviderMethod.create(ProviderMethod.java:71)at com.google.inject.internal.ProviderMethodsModule.createProviderMethod(ProviderMethodsModule.java:275)at com.google.inject.internal.ProviderMethodsModule.getProviderMethods(ProviderMethodsModule.java:144)at com.google.inject.internal.ProviderMethodsModule.configure(ProviderMethodsModule.java:123)at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:340)at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:349)at com.google.inject.AbstractModule.install(AbstractModule.java:122)at com.google.inject.servlet.ServletModule.configure(ServletModule.java:52)at com.google.inject.AbstractModule.configure(AbstractModule.java:62)at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:340)at com.google.inject.spi.Elements.getElements(Elements.java:110)at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:138)at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:104)at com.google.inject.Guice.createInjector(Guice.java:96)at com.google.inject.Guice.createInjector(Guice.java:73)at com.google.inject.Guice.createInjector(Guice.java:62)at org.apache.hadoop.yarn.webapp.WebApps$Builder.build(WebApps.java:417)at org.apache.hadoop.yarn.webapp.WebApps$Builder.start(WebApps.java:465)at org.apache.hadoop.yarn.webapp.WebApps$Builder.start(WebApps.java:461)at org.apache.hadoop.yarn.server.nodemanager.webapp.WebServer.serviceStart(WebServer.java:125)at org.apache.hadoop.service.AbstractService.start(AbstractService.java:194)at org.apache.hadoop.service.CompositeService.serviceStart(CompositeService.java:122)at org.apache.hadoop.service.AbstractService.start(AbstractService.java:194)at org.apache.hadoop.yarn.server.nodemanager.NodeManager.initAndStartNodeManager(NodeManager.java:963)at org.apache.hadoop.yarn.server.nodemanager.NodeManager.main(NodeManager.java:1042)Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @58ecb515at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)at java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)at java.base/java.lang.reflect.Method.setAccessible(Method.java:193)at com.google.inject.internal.cglib.core.$ReflectUtils$2.run(ReflectUtils.java:56)at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)at com.google.inject.internal.cglib.core.$ReflectUtils.(ReflectUtils.java:46)... 32 more</strong></p>\n<p>its my yarn-site.xml</p>\n<pre><code>&lt;configuration&gt;\n    &lt;property&gt;\n        &lt;name&gt;yarn.resourcemanager.hostsname&lt;/name&gt;\n        &lt;value&gt;127.0.0.1&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;\n        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;yarn.nodemanager.resource.cpu-vcores&lt;/name&gt;\n        &lt;value&gt;8&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;\n        &lt;value&gt;8192&lt;/value&gt;\n    &lt;/property&gt;\n        &lt;property&gt;\n        &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;\n        &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_HOME,PATH,LANG,TZ,HADOOP_MAPRED_HOME&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>my core-site.xml</p>\n\n\n\n\n<pre><code>&lt; configuration&gt;\n&lt;property&gt;\n    &lt;name&gt;fs.default.name&lt;/name&gt;\n    &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;\n&lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>my mapped-site.xml</p>\n<pre><code>&lt;configuration&gt;\n    &lt;property&gt;\n        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;\n        &lt;value&gt;yarn&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;mapreduce.application.classpath&lt;/name&gt;\n        &lt;value&gt;$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>my Hdfs-site.xml</p>\n<pre><code>&lt;configuration&gt;\n    &lt;property&gt;\n        &lt;name&gt;dfs.replication&lt;/name&gt;\n        &lt;value&gt;1&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>I tried to change the configuration of these four files a lot, but none of them worked. My log file shows that the error is the above. I have encountered this problem. It seems to be a jdk version problem. I have jdk8 and jdk11 on my computer. jdk17 but my javahome setting is jdk8, I installed it through brew and did not configure the environment.</p>\n"},{"tags":["java","spring","spring-security"],"owner":{"account_id":20123535,"reputation":110,"user_id":14757560,"display_name":"christianGen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690374129,"creation_date":1690179963,"question_id":76751884,"body_markdown":"We have multiple `SecurityFilterChain`s.\r\n\r\nUsers of our `*.jsp` UI must be authenticated with `oauth2`:\r\n\r\n```java\r\n    @Bean\r\n    @Order(1)\r\n    public SecurityFilterChain filterChainJsps(HttpSecurity http) throws Exception {\r\n        http.requestMatchers((requestMatchers) -&gt; requestMatchers.antMatchers(&quot;/*.jsp&quot;, &quot;/oauth2/**&quot;, &quot;/login/**&quot;))\r\n            .authorizeHttpRequests(authorizeHttpRequests -&gt; authorizeHttpRequests\r\n                    .anyRequest().authenticated())\r\n            .oauth2Login(withDefaults());\r\n        return http.build();\r\n    }\r\n```\r\n\r\nFor oauth2 to work the oauth2 urls `&quot;/oauth2/**&quot;` and `&quot;/login/**&quot;` must be included in the `requestMatchers.antMatchers` list, otherwise users will get an 404 error.\r\n\r\nAdding the oauth2 urls manually is error-prone.  This example is for instance missing the `&quot;/logout&quot;` url.\r\n  \r\n**Is there an easier way to include all oauth2 urls?  \r\nIf not, how do I get a list of oauth2 urls which must be matched?**\r\n","title":"Permit oauth2 urls in SecurityFilterChain&#39;s requestMatchers","body":"<p>We have multiple <code>SecurityFilterChain</code>s.</p>\n<p>Users of our <code>*.jsp</code> UI must be authenticated with <code>oauth2</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    @Order(1)\n    public SecurityFilterChain filterChainJsps(HttpSecurity http) throws Exception {\n        http.requestMatchers((requestMatchers) -&gt; requestMatchers.antMatchers(&quot;/*.jsp&quot;, &quot;/oauth2/**&quot;, &quot;/login/**&quot;))\n            .authorizeHttpRequests(authorizeHttpRequests -&gt; authorizeHttpRequests\n                    .anyRequest().authenticated())\n            .oauth2Login(withDefaults());\n        return http.build();\n    }\n</code></pre>\n<p>For oauth2 to work the oauth2 urls <code>&quot;/oauth2/**&quot;</code> and <code>&quot;/login/**&quot;</code> must be included in the <code>requestMatchers.antMatchers</code> list, otherwise users will get an 404 error.</p>\n<p>Adding the oauth2 urls manually is error-prone.  This example is for instance missing the <code>&quot;/logout&quot;</code> url.</p>\n<p><strong>Is there an easier way to include all oauth2 urls?<br />\nIf not, how do I get a list of oauth2 urls which must be matched?</strong></p>\n"},{"tags":["java","android","kotlin","browser-history"],"comments":[{"owner":{"account_id":905177,"reputation":8322,"user_id":940217,"accept_rate":77,"display_name":"Kyle Falconer"},"score":1,"creation_date":1398953331,"post_id":23409365,"comment_id":35869682,"body_markdown":"What exactly are you having trouble with? Code would help.","body":"What exactly are you having trouble with? Code would help."}],"answers":[{"tags":[],"owner":{"account_id":3624061,"reputation":1801,"user_id":3022173,"display_name":"mttdbrd"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1398954135,"creation_date":1398954135,"answer_id":23409626,"question_id":23409365,"body_markdown":"You could use a doubly-linked LinkedList to maintain a history, but WebView already contains methods to deal with forward and back history.\r\n\r\n    void\t goBack()\r\n\r\n&gt; Goes back in the history of this WebView.\r\n\r\n    void\t goBackOrForward(int steps)\r\n\r\n&gt; Goes to the history item that is the number of steps away from the\r\n&gt; current item.\r\n\r\n    void\t goForward()\r\n\r\n&gt; Goes forward in the history of this WebView.\r\n\r\nFrom the docs: https://developer.android.com/reference/android/webkit/WebView.html","title":"Is there really a way to save history of visited sites so that when user comes back(reopens app) he has the list of visited sites on back press","body":"<p>You could use a doubly-linked LinkedList to maintain a history, but WebView already contains methods to deal with forward and back history.</p>\n\n<pre><code>void     goBack()\n</code></pre>\n\n<blockquote>\n  <p>Goes back in the history of this WebView.</p>\n</blockquote>\n\n<pre><code>void     goBackOrForward(int steps)\n</code></pre>\n\n<blockquote>\n  <p>Goes to the history item that is the number of steps away from the\n  current item.</p>\n</blockquote>\n\n<pre><code>void     goForward()\n</code></pre>\n\n<blockquote>\n  <p>Goes forward in the history of this WebView.</p>\n</blockquote>\n\n<p>From the docs: <a href=\"https://developer.android.com/reference/android/webkit/WebView.html\" rel=\"nofollow\">https://developer.android.com/reference/android/webkit/WebView.html</a></p>\n"},{"tags":[],"owner":{"account_id":4138046,"reputation":26,"user_id":3394213,"display_name":"user3394213"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1398956211,"creation_date":1398954326,"answer_id":23409670,"question_id":23409365,"body_markdown":"    // put this in your xml file...\r\n    \r\n    &lt;WebView\r\n        android:id=&quot;@+id/web_view&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:layout_height=&quot;fill_parent&quot; /&gt;\r\n\r\n    // then in your code\r\n    \r\n    WebView webView = (WebView) findViewById(R.id.web_view);\r\n    webView.getSettings().setJavaScriptEnabled(true);\r\n    webView.setWebViewClient(new WebViewClient()\r\n    {\r\n        // Links clicked will be shown on the webview\r\n        @Override\r\n        public boolean shouldOverrideUrlLoading(WebView view, String url)\r\n        {\r\n            return super.shouldOverrideUrlLoading(view, url);\r\n        }\r\n    }\r\n\r\n    // Then to load the webpage from edit text would be\r\n    webView.loadUrl(--Edit Text URL here);\r\n\r\n    // To go back to your previous page, call this method\r\n    webView.goBack();\r\n\r\n    // To go to your next page would be\r\n    webView.goForward();","title":"Is there really a way to save history of visited sites so that when user comes back(reopens app) he has the list of visited sites on back press","body":"<pre><code>// put this in your xml file...\n\n&lt;WebView\n    android:id=\"@+id/web_view\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"fill_parent\" /&gt;\n\n// then in your code\n\nWebView webView = (WebView) findViewById(R.id.web_view);\nwebView.getSettings().setJavaScriptEnabled(true);\nwebView.setWebViewClient(new WebViewClient()\n{\n    // Links clicked will be shown on the webview\n    @Override\n    public boolean shouldOverrideUrlLoading(WebView view, String url)\n    {\n        return super.shouldOverrideUrlLoading(view, url);\n    }\n}\n\n// Then to load the webpage from edit text would be\nwebView.loadUrl(--Edit Text URL here);\n\n// To go back to your previous page, call this method\nwebView.goBack();\n\n// To go to your next page would be\nwebView.goForward();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2927452,"reputation":2038,"user_id":2508481,"accept_rate":82,"display_name":"Richard Lindhout"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1398954613,"creation_date":1398954613,"answer_id":23409745,"question_id":23409365,"body_markdown":"Perhaps you could look to an open source project like the Zirco Browser -&gt; https://code.google.com/p/zirco-browser/\r\n\r\n\r\nSome code like this &gt; https://code.google.com/p/zirco-browser/source/browse/branches/tint-browser-old2/src/org/tint/controllers/BookmarksHistoryController.java\r\n\r\n       /**\r\n             * Get a Cursor the history, e.g. records wich have a visits count &gt; 0. Sorted by last visited date.\r\n             * @param currentActivity The parent activity.\r\n             * @return A Cursor to history records.\r\n             * @see Cursor\r\n             */\r\n            public Cursor getHistory(Activity currentActivity) {\r\n                    String whereClause = Browser.BookmarkColumns.VISITS + &quot; &gt; 0&quot;;\r\n                    String orderClause = Browser.BookmarkColumns.DATE + &quot; DESC&quot;;\r\n                    \r\n                    return currentActivity.managedQuery(android.provider.Browser.BOOKMARKS_URI, Browser.HISTORY_PROJECTION, whereClause, null, orderClause);\r\n            }\r\n\r\nPerhaps you could copy some code and use it for your project. ","title":"Is there really a way to save history of visited sites so that when user comes back(reopens app) he has the list of visited sites on back press","body":"<p>Perhaps you could look to an open source project like the Zirco Browser -> <a href=\"https://code.google.com/p/zirco-browser/\" rel=\"nofollow\">https://code.google.com/p/zirco-browser/</a></p>\n\n<p>Some code like this > <a href=\"https://code.google.com/p/zirco-browser/source/browse/branches/tint-browser-old2/src/org/tint/controllers/BookmarksHistoryController.java\" rel=\"nofollow\">https://code.google.com/p/zirco-browser/source/browse/branches/tint-browser-old2/src/org/tint/controllers/BookmarksHistoryController.java</a></p>\n\n<pre><code>   /**\n         * Get a Cursor the history, e.g. records wich have a visits count &gt; 0. Sorted by last visited date.\n         * @param currentActivity The parent activity.\n         * @return A Cursor to history records.\n         * @see Cursor\n         */\n        public Cursor getHistory(Activity currentActivity) {\n                String whereClause = Browser.BookmarkColumns.VISITS + \" &gt; 0\";\n                String orderClause = Browser.BookmarkColumns.DATE + \" DESC\";\n\n                return currentActivity.managedQuery(android.provider.Browser.BOOKMARKS_URI, Browser.HISTORY_PROJECTION, whereClause, null, orderClause);\n        }\n</code></pre>\n\n<p>Perhaps you could copy some code and use it for your project. </p>\n"}],"owner":{"account_id":4404768,"reputation":82,"user_id":3589491,"display_name":"Kunal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3213,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1501698392,"accepted_answer_id":23409745,"answer_count":3,"score":-1,"last_activity_date":1690373705,"creation_date":1398953238,"question_id":23409365,"body_markdown":"I am just making a simple browser with history management. \r\n","title":"Is there really a way to save history of visited sites so that when user comes back(reopens app) he has the list of visited sites on back press","body":"<p>I am just making a simple browser with history management.</p>\n"},{"tags":["java","completable-future","elapsedtime"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1690284536,"post_id":76762229,"comment_id":135328912,"body_markdown":"Just add `CompletionStages` in the beginning, between calls and the end that set start, intermediate and end times, respectively?","body":"Just add <code>CompletionStages</code> in the beginning, between calls and the end that set start, intermediate and end times, respectively?"},{"owner":{"account_id":17491509,"reputation":133,"user_id":12683575,"display_name":"Stranger95"},"score":0,"creation_date":1690290406,"post_id":76762229,"comment_id":135330304,"body_markdown":"would it be possible to show any example?","body":"would it be possible to show any example?"}],"answers":[{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690373614,"creation_date":1690295497,"answer_id":76763764,"question_id":76762229,"body_markdown":"You can keep a `Map&lt;Call, Instant&gt; timestamps` with an enum `Call`\r\n\r\n```\r\nenum Call {\r\n START,\r\n API_CALL_1,\r\n API_CALL_2,\r\n API_CALL_3,\r\n END\r\n}\r\n```\r\nso in the end you have something like\r\n\r\n```\r\nSTART -&gt; 12:17:01.123\r\nAPI_CALL_1 -&gt; 12:17:01.124\r\nAPI_CALL_2 -&gt; 12:17:03.242\r\nAPI_CALL_3 -&gt; 12:17:04.530\r\nEND -&gt; 12:17:05.124\r\n```\r\nwhich will allow you to see how long each call took as well as the overall thing.\r\n\r\nTo do this, you can create something like a `CallTimer` which allows you to wrap each individual `CompletableFuture` into the associated enum value, like\r\n\r\n```\r\nclass CallTimer {\r\n // use an EnumMap here but I&#39;m too lazy to look up how to create one\r\n Map&lt;Call, Instant&gt; callTimes = new HashMap&lt;&gt;(); \r\n\r\n public CallTimer() {\r\n  callTimes.put(START, Instant.now());\r\n }\r\n\r\n // put start time into the map, but return the result of the actual call\r\n &lt;T&gt; CompletableFuture&lt;T&gt; wrap(CompletableFuture&lt;T&gt; call, Call id) {\r\n   return CompletableFuture.completedFuture(Instant.now())\r\n          .thenCompose(timestamp -&gt; {\r\n            calltimes.put(id, timestamp); \r\n            return call;\r\n          });\r\n }\r\n\r\n void finished() {\r\n  callTimes.put(END, Instant.now());\r\n }\r\n\r\n Map&lt;Call, Instant&gt; callTimes() {\r\n  return Collections.unmodifiableMap(callTimes);\r\n }\r\n}\r\n```\r\n\r\nand then for each call you perform in the main function, you use the timer&#39;s `wrap` instead.\r\n\r\n```\r\npublic static void main(String[] args) throws ExecutionException, InterruptedException {\r\n    CallTimer timer = new CallTimer();\r\n    var chain = timer.wrap(apiCall1(), API_CALL_1)\r\n            .thenCompose(result1 -&gt; {\r\n                if (result1.isEmpty()) {\r\n                    return timer.wrap(apiCall2(), API_CALL_2);\r\n                } else {\r\n                    return CompletableFuture.completedFuture(result1);\r\n                }\r\n            })\r\n            .thenCompose(result2 -&gt; {\r\n                if (result2.isEmpty()) {\r\n                    return timer.wrap(apiCall3(), API_CALL_3);\r\n                } else {\r\n                    return CompletableFuture.completedFuture(result2);\r\n                }\r\n            })\r\n            .thenApply(r -&gt; {\r\n               var result = finalMapping(r);\r\n               timer.finished();\r\n               return result;\r\n             );\r\n    System.out.println(chain.get()); // return result\r\n    System.out.println(timer.callTimes()); // print times\r\n}\r\n```\r\n\r\nI have not actually run or even compiled this so there&#39;s probably going to be some issues, but the general concept should be sound. You can also extend the `enum` and `wrap()` to track `API_CALL_1_START` and `API_CALL_1_END` by adding another `thenApply()` to put the end time after call completion.","title":"Calculate elapsed time in a completable future chain","body":"<p>You can keep a <code>Map&lt;Call, Instant&gt; timestamps</code> with an enum <code>Call</code></p>\n<pre><code>enum Call {\n START,\n API_CALL_1,\n API_CALL_2,\n API_CALL_3,\n END\n}\n</code></pre>\n<p>so in the end you have something like</p>\n<pre><code>START -&gt; 12:17:01.123\nAPI_CALL_1 -&gt; 12:17:01.124\nAPI_CALL_2 -&gt; 12:17:03.242\nAPI_CALL_3 -&gt; 12:17:04.530\nEND -&gt; 12:17:05.124\n</code></pre>\n<p>which will allow you to see how long each call took as well as the overall thing.</p>\n<p>To do this, you can create something like a <code>CallTimer</code> which allows you to wrap each individual <code>CompletableFuture</code> into the associated enum value, like</p>\n<pre><code>class CallTimer {\n // use an EnumMap here but I'm too lazy to look up how to create one\n Map&lt;Call, Instant&gt; callTimes = new HashMap&lt;&gt;(); \n\n public CallTimer() {\n  callTimes.put(START, Instant.now());\n }\n\n // put start time into the map, but return the result of the actual call\n &lt;T&gt; CompletableFuture&lt;T&gt; wrap(CompletableFuture&lt;T&gt; call, Call id) {\n   return CompletableFuture.completedFuture(Instant.now())\n          .thenCompose(timestamp -&gt; {\n            calltimes.put(id, timestamp); \n            return call;\n          });\n }\n\n void finished() {\n  callTimes.put(END, Instant.now());\n }\n\n Map&lt;Call, Instant&gt; callTimes() {\n  return Collections.unmodifiableMap(callTimes);\n }\n}\n</code></pre>\n<p>and then for each call you perform in the main function, you use the timer's <code>wrap</code> instead.</p>\n<pre><code>public static void main(String[] args) throws ExecutionException, InterruptedException {\n    CallTimer timer = new CallTimer();\n    var chain = timer.wrap(apiCall1(), API_CALL_1)\n            .thenCompose(result1 -&gt; {\n                if (result1.isEmpty()) {\n                    return timer.wrap(apiCall2(), API_CALL_2);\n                } else {\n                    return CompletableFuture.completedFuture(result1);\n                }\n            })\n            .thenCompose(result2 -&gt; {\n                if (result2.isEmpty()) {\n                    return timer.wrap(apiCall3(), API_CALL_3);\n                } else {\n                    return CompletableFuture.completedFuture(result2);\n                }\n            })\n            .thenApply(r -&gt; {\n               var result = finalMapping(r);\n               timer.finished();\n               return result;\n             );\n    System.out.println(chain.get()); // return result\n    System.out.println(timer.callTimes()); // print times\n}\n</code></pre>\n<p>I have not actually run or even compiled this so there's probably going to be some issues, but the general concept should be sound. You can also extend the <code>enum</code> and <code>wrap()</code> to track <code>API_CALL_1_START</code> and <code>API_CALL_1_END</code> by adding another <code>thenApply()</code> to put the end time after call completion.</p>\n"}],"owner":{"account_id":17491509,"reputation":133,"user_id":12683575,"display_name":"Stranger95"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690373614,"creation_date":1690284248,"question_id":76762229,"body_markdown":"I have several async api calls combined together in a completable futures chain. Each stage depends on the previous stage, i.e. if the previous call returned non-empty data, then we skip next call or make a call otherwise.\r\n\r\nI want to measure not only the total time spent on the whole chain execution but also time spent on each api call individually.\r\n\r\nHow one can achieve that?\r\n\r\n    import java.util.concurrent.CompletableFuture;\r\n    import java.util.concurrent.ExecutionException;\r\n    \r\n    public class CompletableFutureApiCallsExample {\r\n\r\n    public static void main(String[] args) throws ExecutionException, InterruptedException {\r\n        var chain = apiCall1()\r\n                .thenCompose(result1 -&gt; {\r\n                    if (result1.isEmpty()) {\r\n                        return apiCall2();\r\n                    } else {\r\n                        return CompletableFuture.completedFuture(result1);\r\n                    }\r\n                })\r\n                .thenCompose(result2 -&gt; {\r\n                    if (result2.isEmpty()) {\r\n                        return apiCall3();\r\n                    } else {\r\n                        return CompletableFuture.completedFuture(result2);\r\n                    }\r\n                })\r\n                .thenApply(CompletableFutureApiCallsExample::finalMapping);\r\n        System.out.println(chain.get()); // return result\r\n    }\r\n\r\n    private static CompletableFuture&lt;String&gt; apiCall1() {\r\n        return CompletableFuture.supplyAsync(() -&gt; &quot;API Call 1 result&quot;);\r\n    }\r\n\r\n    private static CompletableFuture&lt;String&gt; apiCall2() {\r\n        return CompletableFuture.supplyAsync(() -&gt; &quot;API Call 2 result&quot;);\r\n    }\r\n\r\n    private static CompletableFuture&lt;String&gt; apiCall3() {\r\n        return CompletableFuture.supplyAsync(() -&gt; &quot;API Call 3 result&quot;);\r\n    }\r\n\r\n    private static String finalMapping(String result) {\r\n        // do mapping and return result;\r\n        return &quot;Final result&quot;;\r\n    }\r\n\r\n","title":"Calculate elapsed time in a completable future chain","body":"<p>I have several async api calls combined together in a completable futures chain. Each stage depends on the previous stage, i.e. if the previous call returned non-empty data, then we skip next call or make a call otherwise.</p>\n<p>I want to measure not only the total time spent on the whole chain execution but also time spent on each api call individually.</p>\n<p>How one can achieve that?</p>\n<pre><code>import java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.ExecutionException;\n\npublic class CompletableFutureApiCallsExample {\n\npublic static void main(String[] args) throws ExecutionException, InterruptedException {\n    var chain = apiCall1()\n            .thenCompose(result1 -&gt; {\n                if (result1.isEmpty()) {\n                    return apiCall2();\n                } else {\n                    return CompletableFuture.completedFuture(result1);\n                }\n            })\n            .thenCompose(result2 -&gt; {\n                if (result2.isEmpty()) {\n                    return apiCall3();\n                } else {\n                    return CompletableFuture.completedFuture(result2);\n                }\n            })\n            .thenApply(CompletableFutureApiCallsExample::finalMapping);\n    System.out.println(chain.get()); // return result\n}\n\nprivate static CompletableFuture&lt;String&gt; apiCall1() {\n    return CompletableFuture.supplyAsync(() -&gt; &quot;API Call 1 result&quot;);\n}\n\nprivate static CompletableFuture&lt;String&gt; apiCall2() {\n    return CompletableFuture.supplyAsync(() -&gt; &quot;API Call 2 result&quot;);\n}\n\nprivate static CompletableFuture&lt;String&gt; apiCall3() {\n    return CompletableFuture.supplyAsync(() -&gt; &quot;API Call 3 result&quot;);\n}\n\nprivate static String finalMapping(String result) {\n    // do mapping and return result;\n    return &quot;Final result&quot;;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","graphql-java","spring-graphql"],"comments":[{"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"score":0,"creation_date":1688638189,"post_id":76619024,"comment_id":135101888,"body_markdown":"can you elaborate on why you&#39;re trying to do this? The context object is garbage collected after the request, so there should be nothing to clear.","body":"can you elaborate on why you&#39;re trying to do this? The context object is garbage collected after the request, so there should be nothing to clear."}],"answers":[{"tags":[],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690373407,"creation_date":1690373407,"answer_id":76771149,"question_id":76619024,"body_markdown":"By default the context is already per-request. You made a separate context that is a field on the controller itself, so it&#39;s no different from any other property on a singleton bean (it isn&#39;t even managed by Spring). Don&#39;t do that. A properly scoped context is already provided to you implicitly, and can be injected into your resolvers:\r\n\r\n    @Controller\r\n    public class OrderInfoController {\r\n    \r\n        @QueryMapping\r\n        public String prepareName(@Argument String orderId, GraphQLContext context) {\r\n            context.put(&quot;name&quot;, &quot;Darren&quot;);\r\n            return &quot; welcome !&quot;;\r\n        }\r\n    \r\n        @SchemaMapping\r\n        public String getName(@Argument OrderInfo orderInfo, GraphQLContext context) {\r\n            context.get(&quot;name&quot;);\r\n            return &quot;hello darren&quot;;\r\n        }\r\n    \r\n    }\r\n\r\nYou could use a [`WebGraphQlInterceptor`](https://docs.spring.io/spring-graphql/docs/current/reference/html/#server.interception) to execute logic around the request, but it doesn&#39;t sound like that&#39;s what you need here.","title":"clear spring for GraphQLContext content after request finished","body":"<p>By default the context is already per-request. You made a separate context that is a field on the controller itself, so it's no different from any other property on a singleton bean (it isn't even managed by Spring). Don't do that. A properly scoped context is already provided to you implicitly, and can be injected into your resolvers:</p>\n<pre><code>@Controller\npublic class OrderInfoController {\n\n    @QueryMapping\n    public String prepareName(@Argument String orderId, GraphQLContext context) {\n        context.put(&quot;name&quot;, &quot;Darren&quot;);\n        return &quot; welcome !&quot;;\n    }\n\n    @SchemaMapping\n    public String getName(@Argument OrderInfo orderInfo, GraphQLContext context) {\n        context.get(&quot;name&quot;);\n        return &quot;hello darren&quot;;\n    }\n\n}\n</code></pre>\n<p>You could use a <a href=\"https://docs.spring.io/spring-graphql/docs/current/reference/html/#server.interception\" rel=\"nofollow noreferrer\"><code>WebGraphQlInterceptor</code></a> to execute logic around the request, but it doesn't sound like that's what you need here.</p>\n"}],"owner":{"account_id":9939720,"reputation":105,"user_id":7356739,"accept_rate":50,"display_name":"george jiang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690373494,"creation_date":1688549731,"question_id":76619024,"body_markdown":"I am using spring boot 3.1.1 to develop GraphQL application, also included spring-boot-starter-graphql, code as below, I want to delete all content from context after the request is done, how can I implement it? Beside GraphQLContext, is there any other way to cache the data? Thanks.\r\n```\r\npublic class OrderInfoController {\r\n    private final GraphQLContext context;\r\n\r\n    public OrderInfoController() {\r\n        this.context = GraphQLContext.newContext().build();\r\n    }\r\n\r\n    @QueryMapping\r\n    public String prepareName(@Argument String orderId) {\r\n        context.put(&quot;name&quot;, &quot;Darren&quot;);\r\n        return &quot; welcome !&quot;;\r\n    }\r\n\r\n    @SchemaMapping\r\n    public String getName(@Argument OrderInfo orderInfo) {\r\n        context.get(&quot;name&quot;);\r\n        return &quot;hello darren&quot;;\r\n    }\r\n\r\n}\r\n```","title":"clear spring for GraphQLContext content after request finished","body":"<p>I am using spring boot 3.1.1 to develop GraphQL application, also included spring-boot-starter-graphql, code as below, I want to delete all content from context after the request is done, how can I implement it? Beside GraphQLContext, is there any other way to cache the data? Thanks.</p>\n<pre><code>public class OrderInfoController {\n    private final GraphQLContext context;\n\n    public OrderInfoController() {\n        this.context = GraphQLContext.newContext().build();\n    }\n\n    @QueryMapping\n    public String prepareName(@Argument String orderId) {\n        context.put(&quot;name&quot;, &quot;Darren&quot;);\n        return &quot; welcome !&quot;;\n    }\n\n    @SchemaMapping\n    public String getName(@Argument OrderInfo orderInfo) {\n        context.get(&quot;name&quot;);\n        return &quot;hello darren&quot;;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":109369,"reputation":3006,"user_id":289827,"accept_rate":47,"display_name":"Martin Ždila"},"score":3,"creation_date":1432220412,"post_id":8986593,"comment_id":48844446,"body_markdown":"Isn&#39;t there some &quot;native&quot; solution already in Spring 4?","body":"Isn&#39;t there some &quot;native&quot; solution already in Spring 4?"},{"owner":{"account_id":1145947,"reputation":1878,"user_id":1128712,"accept_rate":50,"display_name":"SourceVisor"},"score":0,"creation_date":1467559396,"post_id":8986593,"comment_id":63769862,"body_markdown":"Please help with my similar question here http://stackoverflow.com/questions/38171022/how-to-map-multiple-parameter-names-to-pojo-when-binding-spring-mvc-command-obje?noredirect=1#comment63769223_38171022","body":"Please help with my similar question here <a href=\"http://stackoverflow.com/questions/38171022/how-to-map-multiple-parameter-names-to-pojo-when-binding-spring-mvc-command-obje?noredirect=1#comment63769223_38171022\" title=\"how to map multiple parameter names to pojo when binding spring mvc command obje\">stackoverflow.com/questions/38171022/&hellip;</a>"},{"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":0,"creation_date":1644154571,"post_id":8986593,"comment_id":125525212,"body_markdown":"Upstream bug: [Add @FormAttribute attributes to customize x-www-form-urlencoded SPR-13433](https://github.com/spring-projects/spring-framework/issues/18012)","body":"Upstream bug: <a href=\"https://github.com/spring-projects/spring-framework/issues/18012\" rel=\"nofollow noreferrer\">Add @FormAttribute attributes to customize x-www-form-urlencoded SPR-13433</a>"}],"answers":[{"tags":[],"owner":{"account_id":104911,"reputation":119202,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1327413250,"creation_date":1327408725,"answer_id":8986936,"question_id":8986593,"body_markdown":"I would like to point you to another direction. *But I do not know if it works*.\r\n\r\nI would try to manipulate the binding itself.\r\n\r\nIt is done by `WebDataBinder` and will be invoked from `HandlerMethodInvoker` method `Object[] resolveHandlerArguments(Method handlerMethod, Object handler, NativeWebRequest webRequest, ExtendedModelMap implicitModel) throws Exception`\r\n\r\nI have no deep look in Spring 3.1, but what I have seen, is that this part of Spring has been changed a lot. So it is may possible to exchange the WebDataBinder. In Spring 3.0 it seams not possible without overriding the `HandlerMethodInvoker`.","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>I would like to point you to another direction. <em>But I do not know if it works</em>.</p>\n\n<p>I would try to manipulate the binding itself.</p>\n\n<p>It is done by <code>WebDataBinder</code> and will be invoked from <code>HandlerMethodInvoker</code> method <code>Object[] resolveHandlerArguments(Method handlerMethod, Object handler, NativeWebRequest webRequest, ExtendedModelMap implicitModel) throws Exception</code></p>\n\n<p>I have no deep look in Spring 3.1, but what I have seen, is that this part of Spring has been changed a lot. So it is may possible to exchange the WebDataBinder. In Spring 3.0 it seams not possible without overriding the <code>HandlerMethodInvoker</code>.</p>\n"},{"tags":[],"owner":{"account_id":136706,"reputation":12442,"user_id":340390,"accept_rate":81,"display_name":"Bitmap"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1327425545,"creation_date":1327409563,"answer_id":8987122,"question_id":8986593,"body_markdown":"Try intercepting request using *`InterceptorAdaptor`*, and then using simple checking mechanism decide whether to foward the request to the controller handler. Also wrap `HttpServletRequestWrapper` around the request, to enable you override the requests `getParameter()`.\r\n\r\nThis way you can repass the actual parameter name and its value back to the request to be seen by the controller.\r\n\r\nExample option:\r\n\r\n    public class JobInterceptor extends HandlerInterceptorAdapter {\r\n     private static final String requestLocations[]={&quot;rt&quot;, &quot;jobType&quot;};\r\n     \r\n     private boolean isEmpty(String arg)\r\n     {\r\n       return (arg !=null &amp;&amp; arg.length() &gt; 0);\r\n     }\r\n\r\n     public boolean preHandle(HttpServletRequest request,\r\n       HttpServletResponse response, Object handler) throws Exception {\r\n     \r\n       //Maybe something like this\r\n       if(!isEmpty(request.getParameter(requestLocations[0]))|| !isEmpty(request.getParameter(requestLocations[1]))\r\n       {\r\n        final String value =\r\n           !isEmpty(request.getParameter(requestLocations[0])) ? request.getParameter(requestLocations[0]) : !isEmpty(request\r\n            .getParameter(requestLocations[1])) ? request.getParameter(requestLocations[1]) : null;\r\n\r\n        HttpServletRequest wrapper = new HttpServletRequestWrapper(request)\r\n        {\r\n         public String getParameter(String name)\r\n         {\r\n          super.getParameterMap().put(&quot;JobType&quot;, value);\r\n          return super.getParameter(name);\r\n         }\r\n        };\r\n\r\n        //Accepted request - Handler should carry on.\r\n        return super.preHandle(request, response, handler);\r\n       }\r\n\r\n       //Ignore request if above condition was false\r\n       return false;\r\n       }\r\n     }\r\n\r\nFinally wrap the `HandlerInterceptorAdaptor` around your controller handler as shown below. The `SelectedAnnotationHandlerMapping` allows you to specify which handler will be interecepted.\r\n\r\n    &lt;bean id=&quot;jobInterceptor&quot; class=&quot;mypackage.JobInterceptor&quot;/&gt;\r\n    &lt;bean id=&quot;publicMapper&quot; class=&quot;org.springplugins.web.SelectedAnnotationHandlerMapping&quot;&gt;\r\n    \t&lt;property name=&quot;urls&quot;&gt;\r\n    \t\t&lt;list&gt;\r\n    \t\t\t&lt;value&gt;/foo&lt;/value&gt;\r\n    \t\t&lt;/list&gt;\r\n    \t&lt;/property&gt;\r\n    \t&lt;property name=&quot;interceptors&quot;&gt;\r\n    \t\t&lt;list&gt;\r\n    \t\t\t&lt;ref bean=&quot;jobInterceptor&quot;/&gt;\r\n    \t\t&lt;/list&gt;\r\n    \t&lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n**EDITED**.","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>Try intercepting request using <em><code>InterceptorAdaptor</code></em>, and then using simple checking mechanism decide whether to foward the request to the controller handler. Also wrap <code>HttpServletRequestWrapper</code> around the request, to enable you override the requests <code>getParameter()</code>.</p>\n\n<p>This way you can repass the actual parameter name and its value back to the request to be seen by the controller.</p>\n\n<p>Example option:</p>\n\n<pre><code>public class JobInterceptor extends HandlerInterceptorAdapter {\n private static final String requestLocations[]={\"rt\", \"jobType\"};\n\n private boolean isEmpty(String arg)\n {\n   return (arg !=null &amp;&amp; arg.length() &gt; 0);\n }\n\n public boolean preHandle(HttpServletRequest request,\n   HttpServletResponse response, Object handler) throws Exception {\n\n   //Maybe something like this\n   if(!isEmpty(request.getParameter(requestLocations[0]))|| !isEmpty(request.getParameter(requestLocations[1]))\n   {\n    final String value =\n       !isEmpty(request.getParameter(requestLocations[0])) ? request.getParameter(requestLocations[0]) : !isEmpty(request\n        .getParameter(requestLocations[1])) ? request.getParameter(requestLocations[1]) : null;\n\n    HttpServletRequest wrapper = new HttpServletRequestWrapper(request)\n    {\n     public String getParameter(String name)\n     {\n      super.getParameterMap().put(\"JobType\", value);\n      return super.getParameter(name);\n     }\n    };\n\n    //Accepted request - Handler should carry on.\n    return super.preHandle(request, response, handler);\n   }\n\n   //Ignore request if above condition was false\n   return false;\n   }\n }\n</code></pre>\n\n<p>Finally wrap the <code>HandlerInterceptorAdaptor</code> around your controller handler as shown below. The <code>SelectedAnnotationHandlerMapping</code> allows you to specify which handler will be interecepted.</p>\n\n<pre><code>&lt;bean id=\"jobInterceptor\" class=\"mypackage.JobInterceptor\"/&gt;\n&lt;bean id=\"publicMapper\" class=\"org.springplugins.web.SelectedAnnotationHandlerMapping\"&gt;\n    &lt;property name=\"urls\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;/foo&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"interceptors\"&gt;\n        &lt;list&gt;\n            &lt;ref bean=\"jobInterceptor\"/&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p><strong>EDITED</strong>.</p>\n"},{"tags":[],"owner":{"account_id":52723,"reputation":7596,"user_id":157591,"accept_rate":62,"display_name":"Peter Szanto"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1343301191,"creation_date":1327425515,"answer_id":8991152,"question_id":8986593,"body_markdown":"there is no nice built in way to do it, you can only choose which workaround you apply. The difference between handling\r\n\r\n    @RequestMapping(&quot;/foo&quot;)\r\n    public String doSomethingWithJob(Job job)\r\n\r\nand\r\n\r\n    @RequestMapping(&quot;/foo&quot;)\r\n    public String doSomethingWithJob(String stringjob)\r\n\r\nis that job is a bean and stringjob isn&#39;t (no surprise so far). The real difference is that beans are resolved with the standard Spring bean resolver mechanism, while string params are resolved by spring MVC that knows the concept of the @RequestParam annotation. To make the long story short there is no way in the standard spring bean resolution (that is using classes like PropertyValues, PropertyValue, GenericTypeAwarePropertyDescriptor) to resolve &quot;jt&quot; to a property called &quot;jobType&quot; or at least I dont know about it.\r\n\r\nThe workarounds coud be as others suggested to add a custom PropertyEditor or a filter, but I think it just messes up the code. In my opinion the cleanest solution would be to declare a class like this :\r\n\r\n\r\n    public class JobParam extends Job {\r\n        public String getJt() {\r\n             return super.job;\r\n        }\r\n    \r\n        public void setJt(String jt) {\r\n             super.job = jt;\r\n        }\r\n    \r\n    }\r\n\r\nthen use that in your controller\r\n\r\n    @RequestMapping(&quot;/foo&quot;)\r\n    public String doSomethingWithJob(JobParam job) {\r\n       ...\r\n    }\r\n\r\n**UPDATE :** \r\n\r\nA slightly simpler option is to not to extend, just add the extra getters, setters to the original class\r\n\r\n    public class Job {\r\n\r\n        private String jobType;\r\n        private String location;\r\n\r\n        public String getJt() {\r\n             return jobType;\r\n        }\r\n    \r\n        public void setJt(String jt) {\r\n             jobType = jt;\r\n        }\r\n\r\n    }\r\n","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>there is no nice built in way to do it, you can only choose which workaround you apply. The difference between handling</p>\n\n<pre><code>@RequestMapping(\"/foo\")\npublic String doSomethingWithJob(Job job)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@RequestMapping(\"/foo\")\npublic String doSomethingWithJob(String stringjob)\n</code></pre>\n\n<p>is that job is a bean and stringjob isn't (no surprise so far). The real difference is that beans are resolved with the standard Spring bean resolver mechanism, while string params are resolved by spring MVC that knows the concept of the @RequestParam annotation. To make the long story short there is no way in the standard spring bean resolution (that is using classes like PropertyValues, PropertyValue, GenericTypeAwarePropertyDescriptor) to resolve \"jt\" to a property called \"jobType\" or at least I dont know about it.</p>\n\n<p>The workarounds coud be as others suggested to add a custom PropertyEditor or a filter, but I think it just messes up the code. In my opinion the cleanest solution would be to declare a class like this :</p>\n\n<pre><code>public class JobParam extends Job {\n    public String getJt() {\n         return super.job;\n    }\n\n    public void setJt(String jt) {\n         super.job = jt;\n    }\n\n}\n</code></pre>\n\n<p>then use that in your controller</p>\n\n<pre><code>@RequestMapping(\"/foo\")\npublic String doSomethingWithJob(JobParam job) {\n   ...\n}\n</code></pre>\n\n<p><strong>UPDATE :</strong> </p>\n\n<p>A slightly simpler option is to not to extend, just add the extra getters, setters to the original class</p>\n\n<pre><code>public class Job {\n\n    private String jobType;\n    private String location;\n\n    public String getJt() {\n         return jobType;\n    }\n\n    public void setJt(String jt) {\n         jobType = jt;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":1,"up_vote_count":16,"is_accepted":true,"score":15,"last_activity_date":1327497163,"creation_date":1327497163,"answer_id":9003314,"question_id":8986593,"body_markdown":"Here&#39;s what I got working:\r\n\r\nFirst, a parameter resolver:\r\n\r\n    /**\r\n     * This resolver handles command objects annotated with @SupportsAnnotationParameterResolution\r\n     * that are passed as parameters to controller methods.\r\n     * \r\n     * It parses @CommandPerameter annotations on command objects to\r\n     * populate the Binder with the appropriate values (that is, the filed names\r\n     * corresponding to the GET parameters)\r\n     * \r\n     * In order to achieve this, small pieces of code are copied from spring-mvc\r\n     * classes (indicated in-place). The alternative to the copied lines would be to\r\n     * have a decorator around the Binder, but that would be more tedious, and still\r\n     * some methods would need to be copied.\r\n     * \r\n     * @author bozho\r\n     * \r\n     */\r\n    public class AnnotationServletModelAttributeResolver extends ServletModelAttributeMethodProcessor {\r\n    \t\r\n    \t/**\r\n    \t * A map caching annotation definitions of command objects (@CommandParameter-to-fieldname mappings)\r\n    \t */\r\n    \tprivate ConcurrentMap&lt;Class&lt;?&gt;, Map&lt;String, String&gt;&gt; definitionsCache = Maps.newConcurrentMap();\r\n    \t\r\n    \tpublic AnnotationServletModelAttributeResolver(boolean annotationNotRequired) {\r\n    \t\tsuper(annotationNotRequired);\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic boolean supportsParameter(MethodParameter parameter) {\r\n    \t\tif (parameter.getParameterType().isAnnotationPresent(SupportsAnnotationParameterResolution.class)) {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\treturn false;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tprotected void bindRequestParameters(WebDataBinder binder, NativeWebRequest request) {\r\n    \t\tServletRequest servletRequest = request.getNativeRequest(ServletRequest.class);\r\n    \t\tServletRequestDataBinder servletBinder = (ServletRequestDataBinder) binder;\r\n    \t\tbind(servletRequest, servletBinder);\r\n    \t}\r\n    \t\r\n    \t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \tpublic void bind(ServletRequest request, ServletRequestDataBinder binder) {\r\n    \t\tMap&lt;String, ?&gt; propertyValues = parsePropertyValues(request, binder);\r\n    \t\tMutablePropertyValues mpvs = new MutablePropertyValues(propertyValues);\r\n    \t\tMultipartRequest multipartRequest = WebUtils.getNativeRequest(request, MultipartRequest.class);\r\n    \t\tif (multipartRequest != null) {\r\n    \t\t\tbindMultipart(multipartRequest.getMultiFileMap(), mpvs);\r\n    \t\t}\r\n    \t\t\r\n    \t\t// two lines copied from ExtendedServletRequestDataBinder\r\n    \t\tString attr = HandlerMapping.URI_TEMPLATE_VARIABLES_ATTRIBUTE;\r\n    \t\tmpvs.addPropertyValues((Map&lt;String, String&gt;) request.getAttribute(attr));\r\n    \t\tbinder.bind(mpvs);\r\n    \t}\r\n    \r\n    \tprivate Map&lt;String, ?&gt; parsePropertyValues(ServletRequest request, ServletRequestDataBinder binder) {\r\n    \t\t\r\n    \t\t// similar to WebUtils.getParametersStartingWith(..) (prefixes not supported)\r\n    \t\tMap&lt;String, Object&gt; params = Maps.newTreeMap();\r\n    \t\tAssert.notNull(request, &quot;Request must not be null&quot;);\r\n    \t\tEnumeration&lt;?&gt; paramNames = request.getParameterNames();\r\n    \t\tMap&lt;String, String&gt; parameterMappings = getParameterMappings(binder);\r\n    \t\twhile (paramNames != null &amp;&amp; paramNames.hasMoreElements()) {\r\n    \t\t\tString paramName = (String) paramNames.nextElement();\r\n    \t\t\tString[] values = request.getParameterValues(paramName);\r\n    \t\t\t\r\n    \t\t\tString fieldName = parameterMappings.get(paramName);\r\n    \t\t\t// no annotation exists, use the default - the param name=field name\r\n    \t\t\tif (fieldName == null) {\r\n    \t\t\t\tfieldName = paramName;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif (values == null || values.length == 0) {\r\n    \t\t\t\t// Do nothing, no values found at all.\r\n    \t\t\t} else if (values.length &gt; 1) {\r\n    \t\t\t\tparams.put(fieldName, values);\r\n    \t\t\t} else {\r\n    \t\t\t\tparams.put(fieldName, values[0]);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn params;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Gets a mapping between request parameter names and field names.\r\n    \t * If no annotation is specified, no entry is added\r\n    \t * @return\r\n    \t */\r\n    \tprivate Map&lt;String, String&gt; getParameterMappings(ServletRequestDataBinder binder) {\r\n    \t\tClass&lt;?&gt; targetClass = binder.getTarget().getClass();\r\n    \t\tMap&lt;String, String&gt; map = definitionsCache.get(targetClass);\r\n    \t\tif (map == null) {\r\n    \t\t\tField[] fields = targetClass.getDeclaredFields();\r\n    \t\t\tmap = Maps.newHashMapWithExpectedSize(fields.length);\r\n    \t\t\tfor (Field field : fields) {\r\n    \t\t\t\tCommandParameter annotation = field.getAnnotation(CommandParameter.class);\r\n    \t\t\t\tif (annotation != null &amp;&amp; !annotation.value().isEmpty()) {\r\n    \t\t\t\t\tmap.put(annotation.value(), field.getName());\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tdefinitionsCache.putIfAbsent(targetClass, map);\r\n    \t\t\treturn map;\r\n    \t\t} else {\r\n    \t\t\treturn map;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * Copied from WebDataBinder.\r\n    \t * \r\n    \t * @param multipartFiles\r\n    \t * @param mpvs\r\n    \t */\r\n    \tprotected void bindMultipart(Map&lt;String, List&lt;MultipartFile&gt;&gt; multipartFiles, MutablePropertyValues mpvs) {\r\n    \t\tfor (Map.Entry&lt;String, List&lt;MultipartFile&gt;&gt; entry : multipartFiles.entrySet()) {\r\n    \t\t\tString key = entry.getKey();\r\n    \t\t\tList&lt;MultipartFile&gt; values = entry.getValue();\r\n    \t\t\tif (values.size() == 1) {\r\n    \t\t\t\tMultipartFile value = values.get(0);\r\n    \t\t\t\tif (!value.isEmpty()) {\r\n    \t\t\t\t\tmpvs.add(key, value);\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\tmpvs.add(key, values);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nAnd then registering the parameter resolver using a post-processor. It should be registered as a `&lt;bean&gt;`:\r\n\r\n\r\n    /**\r\n     * Post-processor to be used if any modifications to the handler adapter need to be made\r\n     * \r\n     * @author bozho\r\n     *\r\n     */\r\n    public class AnnotationHandlerMappingPostProcessor implements BeanPostProcessor {\r\n    \r\n    \t@Override\r\n    \tpublic Object postProcessAfterInitialization(Object bean, String arg1)\r\n    \t\t\tthrows BeansException {\r\n    \t\treturn bean;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Object postProcessBeforeInitialization(Object bean, String arg1)\r\n    \t\t\tthrows BeansException {\r\n    \t\tif (bean instanceof RequestMappingHandlerAdapter) {\r\n    \t\t\tRequestMappingHandlerAdapter adapter = (RequestMappingHandlerAdapter) bean;\r\n    \t\t\tList&lt;HandlerMethodArgumentResolver&gt; resolvers = adapter.getCustomArgumentResolvers();\r\n    \t\t\tif (resolvers == null) {\r\n    \t\t\t\tresolvers = Lists.newArrayList();\r\n    \t\t\t}\r\n    \t\t\tresolvers.add(new AnnotationServletModelAttributeResolver(false));\r\n    \t\t\tadapter.setCustomArgumentResolvers(resolvers);\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn bean;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>Here's what I got working:</p>\n\n<p>First, a parameter resolver:</p>\n\n<pre><code>/**\n * This resolver handles command objects annotated with @SupportsAnnotationParameterResolution\n * that are passed as parameters to controller methods.\n * \n * It parses @CommandPerameter annotations on command objects to\n * populate the Binder with the appropriate values (that is, the filed names\n * corresponding to the GET parameters)\n * \n * In order to achieve this, small pieces of code are copied from spring-mvc\n * classes (indicated in-place). The alternative to the copied lines would be to\n * have a decorator around the Binder, but that would be more tedious, and still\n * some methods would need to be copied.\n * \n * @author bozho\n * \n */\npublic class AnnotationServletModelAttributeResolver extends ServletModelAttributeMethodProcessor {\n\n    /**\n     * A map caching annotation definitions of command objects (@CommandParameter-to-fieldname mappings)\n     */\n    private ConcurrentMap&lt;Class&lt;?&gt;, Map&lt;String, String&gt;&gt; definitionsCache = Maps.newConcurrentMap();\n\n    public AnnotationServletModelAttributeResolver(boolean annotationNotRequired) {\n        super(annotationNotRequired);\n    }\n\n    @Override\n    public boolean supportsParameter(MethodParameter parameter) {\n        if (parameter.getParameterType().isAnnotationPresent(SupportsAnnotationParameterResolution.class)) {\n            return true;\n        }\n        return false;\n    }\n\n    @Override\n    protected void bindRequestParameters(WebDataBinder binder, NativeWebRequest request) {\n        ServletRequest servletRequest = request.getNativeRequest(ServletRequest.class);\n        ServletRequestDataBinder servletBinder = (ServletRequestDataBinder) binder;\n        bind(servletRequest, servletBinder);\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    public void bind(ServletRequest request, ServletRequestDataBinder binder) {\n        Map&lt;String, ?&gt; propertyValues = parsePropertyValues(request, binder);\n        MutablePropertyValues mpvs = new MutablePropertyValues(propertyValues);\n        MultipartRequest multipartRequest = WebUtils.getNativeRequest(request, MultipartRequest.class);\n        if (multipartRequest != null) {\n            bindMultipart(multipartRequest.getMultiFileMap(), mpvs);\n        }\n\n        // two lines copied from ExtendedServletRequestDataBinder\n        String attr = HandlerMapping.URI_TEMPLATE_VARIABLES_ATTRIBUTE;\n        mpvs.addPropertyValues((Map&lt;String, String&gt;) request.getAttribute(attr));\n        binder.bind(mpvs);\n    }\n\n    private Map&lt;String, ?&gt; parsePropertyValues(ServletRequest request, ServletRequestDataBinder binder) {\n\n        // similar to WebUtils.getParametersStartingWith(..) (prefixes not supported)\n        Map&lt;String, Object&gt; params = Maps.newTreeMap();\n        Assert.notNull(request, \"Request must not be null\");\n        Enumeration&lt;?&gt; paramNames = request.getParameterNames();\n        Map&lt;String, String&gt; parameterMappings = getParameterMappings(binder);\n        while (paramNames != null &amp;&amp; paramNames.hasMoreElements()) {\n            String paramName = (String) paramNames.nextElement();\n            String[] values = request.getParameterValues(paramName);\n\n            String fieldName = parameterMappings.get(paramName);\n            // no annotation exists, use the default - the param name=field name\n            if (fieldName == null) {\n                fieldName = paramName;\n            }\n\n            if (values == null || values.length == 0) {\n                // Do nothing, no values found at all.\n            } else if (values.length &gt; 1) {\n                params.put(fieldName, values);\n            } else {\n                params.put(fieldName, values[0]);\n            }\n        }\n\n        return params;\n    }\n\n    /**\n     * Gets a mapping between request parameter names and field names.\n     * If no annotation is specified, no entry is added\n     * @return\n     */\n    private Map&lt;String, String&gt; getParameterMappings(ServletRequestDataBinder binder) {\n        Class&lt;?&gt; targetClass = binder.getTarget().getClass();\n        Map&lt;String, String&gt; map = definitionsCache.get(targetClass);\n        if (map == null) {\n            Field[] fields = targetClass.getDeclaredFields();\n            map = Maps.newHashMapWithExpectedSize(fields.length);\n            for (Field field : fields) {\n                CommandParameter annotation = field.getAnnotation(CommandParameter.class);\n                if (annotation != null &amp;&amp; !annotation.value().isEmpty()) {\n                    map.put(annotation.value(), field.getName());\n                }\n            }\n            definitionsCache.putIfAbsent(targetClass, map);\n            return map;\n        } else {\n            return map;\n        }\n    }\n\n    /**\n     * Copied from WebDataBinder.\n     * \n     * @param multipartFiles\n     * @param mpvs\n     */\n    protected void bindMultipart(Map&lt;String, List&lt;MultipartFile&gt;&gt; multipartFiles, MutablePropertyValues mpvs) {\n        for (Map.Entry&lt;String, List&lt;MultipartFile&gt;&gt; entry : multipartFiles.entrySet()) {\n            String key = entry.getKey();\n            List&lt;MultipartFile&gt; values = entry.getValue();\n            if (values.size() == 1) {\n                MultipartFile value = values.get(0);\n                if (!value.isEmpty()) {\n                    mpvs.add(key, value);\n                }\n            } else {\n                mpvs.add(key, values);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And then registering the parameter resolver using a post-processor. It should be registered as a <code>&lt;bean&gt;</code>:</p>\n\n<pre><code>/**\n * Post-processor to be used if any modifications to the handler adapter need to be made\n * \n * @author bozho\n *\n */\npublic class AnnotationHandlerMappingPostProcessor implements BeanPostProcessor {\n\n    @Override\n    public Object postProcessAfterInitialization(Object bean, String arg1)\n            throws BeansException {\n        return bean;\n    }\n\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String arg1)\n            throws BeansException {\n        if (bean instanceof RequestMappingHandlerAdapter) {\n            RequestMappingHandlerAdapter adapter = (RequestMappingHandlerAdapter) bean;\n            List&lt;HandlerMethodArgumentResolver&gt; resolvers = adapter.getCustomArgumentResolvers();\n            if (resolvers == null) {\n                resolvers = Lists.newArrayList();\n            }\n            resolvers.add(new AnnotationServletModelAttributeResolver(false));\n            adapter.setCustomArgumentResolvers(resolvers);\n        }\n\n        return bean;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":222410,"reputation":4950,"user_id":480980,"display_name":"Rossen Stoyanchev"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1327956282,"creation_date":1327956282,"answer_id":9070515,"question_id":8986593,"body_markdown":"In Spring 3.1, ServletRequestDataBinder provides a hook for additional bind values:\r\n\r\n    protected void addBindValues(MutablePropertyValues mpvs, ServletRequest request) {\r\n    }\r\n\r\nThe ExtendedServletRequestDataBinder subclass uses it to add URI template variables as binding values. You could extend it further to make it possible to add command-specific field aliases.\r\n\r\nYou can override RequestMappingHandlerAdapter.createDataBinderFactory(..) to provide a custom WebDataBinder instance. From a controller&#39;s perspective it could look like this:\r\n\r\n    @InitBinder\r\n    public void initBinder(MyWebDataBinder binder) {\r\n       binder.addFieldAlias(&quot;jobType&quot;, &quot;jt&quot;);\r\n       // ...\r\n    }\r\n\r\n\r\n","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>In Spring 3.1, ServletRequestDataBinder provides a hook for additional bind values:</p>\n\n<pre><code>protected void addBindValues(MutablePropertyValues mpvs, ServletRequest request) {\n}\n</code></pre>\n\n<p>The ExtendedServletRequestDataBinder subclass uses it to add URI template variables as binding values. You could extend it further to make it possible to add command-specific field aliases.</p>\n\n<p>You can override RequestMappingHandlerAdapter.createDataBinderFactory(..) to provide a custom WebDataBinder instance. From a controller's perspective it could look like this:</p>\n\n<pre><code>@InitBinder\npublic void initBinder(MyWebDataBinder binder) {\n   binder.addFieldAlias(\"jobType\", \"jt\");\n   // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1259811,"reputation":693,"user_id":1218443,"display_name":"jkee"},"down_vote_count":1,"up_vote_count":40,"is_accepted":false,"score":39,"last_activity_date":1368541757,"creation_date":1368442547,"answer_id":16520399,"question_id":8986593,"body_markdown":"This solution more concise but requires using RequestMappingHandlerAdapter, which Spring use when `&lt;mvc:annotation-driven /&gt;` enabled.\r\nHope it will help somebody.\r\nThe idea is to extend ServletRequestDataBinder like this:\r\n\r\n     /**\r\n     * ServletRequestDataBinder which supports fields renaming using {@link ParamName}\r\n     *\r\n     * @author jkee\r\n     */\r\n    public class ParamNameDataBinder extends ExtendedServletRequestDataBinder {\r\n    \r\n        private final Map&lt;String, String&gt; renameMapping;\r\n    \r\n        public ParamNameDataBinder(Object target, String objectName, Map&lt;String, String&gt; renameMapping) {\r\n            super(target, objectName);\r\n            this.renameMapping = renameMapping;\r\n        }\r\n    \r\n        @Override\r\n        protected void addBindValues(MutablePropertyValues mpvs, ServletRequest request) {\r\n            super.addBindValues(mpvs, request);\r\n            for (Map.Entry&lt;String, String&gt; entry : renameMapping.entrySet()) {\r\n                String from = entry.getKey();\r\n                String to = entry.getValue();\r\n                if (mpvs.contains(from)) {\r\n                    mpvs.add(to, mpvs.getPropertyValue(from).getValue());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nAppropriate processor:\r\n\r\n    /**\r\n     * Method processor supports {@link ParamName} parameters renaming\r\n     *\r\n     * @author jkee\r\n     */\r\n    \r\n    public class RenamingProcessor extends ServletModelAttributeMethodProcessor {\r\n    \r\n        @Autowired\r\n        private RequestMappingHandlerAdapter requestMappingHandlerAdapter;\r\n\r\n        //Rename cache\r\n        private final Map&lt;Class&lt;?&gt;, Map&lt;String, String&gt;&gt; replaceMap = new ConcurrentHashMap&lt;Class&lt;?&gt;, Map&lt;String, String&gt;&gt;();\r\n    \r\n        public RenamingProcessor(boolean annotationNotRequired) {\r\n            super(annotationNotRequired);\r\n        }\r\n    \r\n        @Override\r\n        protected void bindRequestParameters(WebDataBinder binder, NativeWebRequest nativeWebRequest) {\r\n            Object target = binder.getTarget();\r\n            Class&lt;?&gt; targetClass = target.getClass();\r\n            if (!replaceMap.containsKey(targetClass)) {\r\n                Map&lt;String, String&gt; mapping = analyzeClass(targetClass);\r\n                replaceMap.put(targetClass, mapping);\r\n            }\r\n            Map&lt;String, String&gt; mapping = replaceMap.get(targetClass);\r\n            ParamNameDataBinder paramNameDataBinder = new ParamNameDataBinder(target, binder.getObjectName(), mapping);\r\n            requestMappingHandlerAdapter.getWebBindingInitializer().initBinder(paramNameDataBinder, nativeWebRequest);\r\n            super.bindRequestParameters(paramNameDataBinder, nativeWebRequest);\r\n        }\r\n    \r\n        private static Map&lt;String, String&gt; analyzeClass(Class&lt;?&gt; targetClass) {\r\n            Field[] fields = targetClass.getDeclaredFields();\r\n            Map&lt;String, String&gt; renameMap = new HashMap&lt;String, String&gt;();\r\n            for (Field field : fields) {\r\n                ParamName paramNameAnnotation = field.getAnnotation(ParamName.class);\r\n                if (paramNameAnnotation != null &amp;&amp; !paramNameAnnotation.value().isEmpty()) {\r\n                    renameMap.put(paramNameAnnotation.value(), field.getName());\r\n                }\r\n            }\r\n            if (renameMap.isEmpty()) return Collections.emptyMap();\r\n            return renameMap;\r\n        }\r\n    }\r\n\r\nAnnotation: \r\n\r\n    /**\r\n     * Overrides parameter name\r\n     * @author jkee\r\n     */\r\n    \r\n    @Target(ElementType.FIELD)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Documented\r\n    public @interface ParamName {\r\n    \r\n        /**\r\n         * The name of the request parameter to bind to.\r\n         */\r\n        String value();\r\n    \r\n    }\r\n\r\nSpring config:\r\n\r\n    &lt;mvc:annotation-driven&gt;\r\n        &lt;mvc:argument-resolvers&gt;\r\n            &lt;bean class=&quot;ru.yandex.metrika.util.params.RenamingProcessor&quot;&gt;\r\n                &lt;constructor-arg name=&quot;annotationNotRequired&quot; value=&quot;true&quot;/&gt;\r\n            &lt;/bean&gt;\r\n        &lt;/mvc:argument-resolvers&gt;\r\n    &lt;/mvc:annotation-driven&gt; \r\n\r\nAnd finally, usage (like Bozho solution):\r\n\r\n    public class Job {\r\n        @ParamName(&quot;job-type&quot;)\r\n        private String jobType;\r\n        @ParamName(&quot;loc&quot;)\r\n        private String location;\r\n    }","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>This solution more concise but requires using RequestMappingHandlerAdapter, which Spring use when <code>&lt;mvc:annotation-driven /&gt;</code> enabled.\nHope it will help somebody.\nThe idea is to extend ServletRequestDataBinder like this:</p>\n\n<pre><code> /**\n * ServletRequestDataBinder which supports fields renaming using {@link ParamName}\n *\n * @author jkee\n */\npublic class ParamNameDataBinder extends ExtendedServletRequestDataBinder {\n\n    private final Map&lt;String, String&gt; renameMapping;\n\n    public ParamNameDataBinder(Object target, String objectName, Map&lt;String, String&gt; renameMapping) {\n        super(target, objectName);\n        this.renameMapping = renameMapping;\n    }\n\n    @Override\n    protected void addBindValues(MutablePropertyValues mpvs, ServletRequest request) {\n        super.addBindValues(mpvs, request);\n        for (Map.Entry&lt;String, String&gt; entry : renameMapping.entrySet()) {\n            String from = entry.getKey();\n            String to = entry.getValue();\n            if (mpvs.contains(from)) {\n                mpvs.add(to, mpvs.getPropertyValue(from).getValue());\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Appropriate processor:</p>\n\n<pre><code>/**\n * Method processor supports {@link ParamName} parameters renaming\n *\n * @author jkee\n */\n\npublic class RenamingProcessor extends ServletModelAttributeMethodProcessor {\n\n    @Autowired\n    private RequestMappingHandlerAdapter requestMappingHandlerAdapter;\n\n    //Rename cache\n    private final Map&lt;Class&lt;?&gt;, Map&lt;String, String&gt;&gt; replaceMap = new ConcurrentHashMap&lt;Class&lt;?&gt;, Map&lt;String, String&gt;&gt;();\n\n    public RenamingProcessor(boolean annotationNotRequired) {\n        super(annotationNotRequired);\n    }\n\n    @Override\n    protected void bindRequestParameters(WebDataBinder binder, NativeWebRequest nativeWebRequest) {\n        Object target = binder.getTarget();\n        Class&lt;?&gt; targetClass = target.getClass();\n        if (!replaceMap.containsKey(targetClass)) {\n            Map&lt;String, String&gt; mapping = analyzeClass(targetClass);\n            replaceMap.put(targetClass, mapping);\n        }\n        Map&lt;String, String&gt; mapping = replaceMap.get(targetClass);\n        ParamNameDataBinder paramNameDataBinder = new ParamNameDataBinder(target, binder.getObjectName(), mapping);\n        requestMappingHandlerAdapter.getWebBindingInitializer().initBinder(paramNameDataBinder, nativeWebRequest);\n        super.bindRequestParameters(paramNameDataBinder, nativeWebRequest);\n    }\n\n    private static Map&lt;String, String&gt; analyzeClass(Class&lt;?&gt; targetClass) {\n        Field[] fields = targetClass.getDeclaredFields();\n        Map&lt;String, String&gt; renameMap = new HashMap&lt;String, String&gt;();\n        for (Field field : fields) {\n            ParamName paramNameAnnotation = field.getAnnotation(ParamName.class);\n            if (paramNameAnnotation != null &amp;&amp; !paramNameAnnotation.value().isEmpty()) {\n                renameMap.put(paramNameAnnotation.value(), field.getName());\n            }\n        }\n        if (renameMap.isEmpty()) return Collections.emptyMap();\n        return renameMap;\n    }\n}\n</code></pre>\n\n<p>Annotation: </p>\n\n<pre><code>/**\n * Overrides parameter name\n * @author jkee\n */\n\n@Target(ElementType.FIELD)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\npublic @interface ParamName {\n\n    /**\n     * The name of the request parameter to bind to.\n     */\n    String value();\n\n}\n</code></pre>\n\n<p>Spring config:</p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n    &lt;mvc:argument-resolvers&gt;\n        &lt;bean class=\"ru.yandex.metrika.util.params.RenamingProcessor\"&gt;\n            &lt;constructor-arg name=\"annotationNotRequired\" value=\"true\"/&gt;\n        &lt;/bean&gt;\n    &lt;/mvc:argument-resolvers&gt;\n&lt;/mvc:annotation-driven&gt; \n</code></pre>\n\n<p>And finally, usage (like Bozho solution):</p>\n\n<pre><code>public class Job {\n    @ParamName(\"job-type\")\n    private String jobType;\n    @ParamName(\"loc\")\n    private String location;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6119678,"reputation":157,"user_id":4773603,"display_name":"Demel"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1498729705,"creation_date":1486113420,"answer_id":42020690,"question_id":8986593,"body_markdown":"You can use Jackson com.fasterxml.jackson.databind.ObjectMapper to convert any map to your DTO/POJO class with nested props. You need annotate your POJOs with @JsonUnwrapped on nested object. Like this:\r\n\r\n    public class MyRequest {\r\n\r\n    \t@JsonUnwrapped\r\n    \tprivate NestedObject nested;\r\n    \r\n    \tpublic NestedObject getNested() {\r\n    \t\treturn nested;\r\n    \t}\r\n    }\r\nAnd than use it like this:\r\n\r\n\t@RequestMapping(method = RequestMethod.GET, value = &quot;/myMethod&quot;)\r\n\t@ResponseBody\r\n\tpublic Object myMethod(@RequestParam Map&lt;String, Object&gt; allRequestParams) {\r\n\r\n\t\tMyRequest request = new ObjectMapper().convertValue(allRequestParams, MyRequest.class);\r\n        ...\r\n    }\r\n\r\nThat&#39;s all. A little coding. Also, you **can give any names to your props** usign @JsonProperty.","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>You can use Jackson com.fasterxml.jackson.databind.ObjectMapper to convert any map to your DTO/POJO class with nested props. You need annotate your POJOs with @JsonUnwrapped on nested object. Like this:</p>\n\n<pre><code>public class MyRequest {\n\n    @JsonUnwrapped\n    private NestedObject nested;\n\n    public NestedObject getNested() {\n        return nested;\n    }\n}\n</code></pre>\n\n<p>And than use it like this:</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.GET, value = \"/myMethod\")\n@ResponseBody\npublic Object myMethod(@RequestParam Map&lt;String, Object&gt; allRequestParams) {\n\n    MyRequest request = new ObjectMapper().convertValue(allRequestParams, MyRequest.class);\n    ...\n}\n</code></pre>\n\n<p>That's all. A little coding. Also, you <strong>can give any names to your props</strong> usign @JsonProperty.</p>\n"},{"tags":[],"owner":{"account_id":6870231,"reputation":121,"user_id":5280899,"display_name":"Jack"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1488092658,"creation_date":1488092658,"answer_id":42465707,"question_id":8986593,"body_markdown":"There is a simple way, you can just add one more setter method, like &quot;setLoc,setJt&quot;.","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>There is a simple way, you can just add one more setter method, like \"setLoc,setJt\".</p>\n"},{"tags":[],"owner":{"account_id":4807317,"reputation":153,"user_id":8018590,"display_name":"Allen Kerr"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1530334965,"creation_date":1530334965,"answer_id":51111890,"question_id":8986593,"body_markdown":"Thanks the answer of @jkee .  \r\nHere is my solution.  \r\nFirst, a custom annotation:\r\n\r\n    @Inherited\r\n    @Documented\r\n    @Target(ElementType.FIELD)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface ParamName {\r\n    \r\n      /**\r\n       * The name of the request parameter to bind to.\r\n       */\r\n      String value();\r\n    \r\n    }\r\nA customer DataBinder:\r\n\r\n    public class ParamNameDataBinder extends ExtendedServletRequestDataBinder {\r\n    \r\n      private final Map&lt;String, String&gt; paramMappings;\r\n    \r\n      public ParamNameDataBinder(Object target, String objectName, Map&lt;String, String&gt; paramMappings) {\r\n        super(target, objectName);\r\n        this.paramMappings = paramMappings;\r\n      }\r\n    \r\n      @Override\r\n      protected void addBindValues(MutablePropertyValues mutablePropertyValues, ServletRequest request) {\r\n        super.addBindValues(mutablePropertyValues, request);\r\n        for (Map.Entry&lt;String, String&gt; entry : paramMappings.entrySet()) {\r\n          String paramName = entry.getKey();\r\n          String fieldName = entry.getValue();\r\n          if (mutablePropertyValues.contains(paramName)) {\r\n            mutablePropertyValues.add(fieldName, mutablePropertyValues.getPropertyValue(paramName).getValue());\r\n          }\r\n        }\r\n      }\r\n    \r\n    }\r\nA parameter resolver:\r\n\r\n    public class ParamNameProcessor extends ServletModelAttributeMethodProcessor {\r\n    \r\n      @Autowired\r\n      private RequestMappingHandlerAdapter requestMappingHandlerAdapter;\r\n    \r\n      private static final Map&lt;Class&lt;?&gt;, Map&lt;String, String&gt;&gt; PARAM_MAPPINGS_CACHE = new ConcurrentHashMap&lt;&gt;(256);\r\n    \r\n      public ParamNameProcessor() {\r\n        super(false);\r\n      }\r\n    \r\n      @Override\r\n      public boolean supportsParameter(MethodParameter parameter) {\r\n        return parameter.hasParameterAnnotation(RequestParam.class)\r\n            &amp;&amp; !BeanUtils.isSimpleProperty(parameter.getParameterType())\r\n            &amp;&amp; Arrays.stream(parameter.getParameterType().getDeclaredFields())\r\n            .anyMatch(field -&gt; field.getAnnotation(ParamName.class) != null);\r\n      }\r\n    \r\n      @Override\r\n      protected void bindRequestParameters(WebDataBinder binder, NativeWebRequest nativeWebRequest) {\r\n        Object target = binder.getTarget();\r\n        Map&lt;String, String&gt; paramMappings = this.getParamMappings(target.getClass());\r\n        ParamNameDataBinder paramNameDataBinder = new ParamNameDataBinder(target, binder.getObjectName(), paramMappings);\r\n        requestMappingHandlerAdapter.getWebBindingInitializer().initBinder(paramNameDataBinder, nativeWebRequest);\r\n        super.bindRequestParameters(paramNameDataBinder, nativeWebRequest);\r\n      }\r\n    \r\n      /**\r\n       * Get param mappings.\r\n       * Cache param mappings in memory.\r\n       *\r\n       * @param targetClass\r\n       * @return {@link Map&lt;String, String&gt;}\r\n       */\r\n      private Map&lt;String, String&gt; getParamMappings(Class&lt;?&gt; targetClass) {\r\n        if (PARAM_MAPPINGS_CACHE.containsKey(targetClass)) {\r\n          return PARAM_MAPPINGS_CACHE.get(targetClass);\r\n        }\r\n        Field[] fields = targetClass.getDeclaredFields();\r\n        Map&lt;String, String&gt; paramMappings = new HashMap&lt;&gt;(32);\r\n        for (Field field : fields) {\r\n          ParamName paramName = field.getAnnotation(ParamName.class);\r\n          if (paramName != null &amp;&amp; !paramName.value().isEmpty()) {\r\n            paramMappings.put(paramName.value(), field.getName());\r\n          }\r\n        }\r\n        PARAM_MAPPINGS_CACHE.put(targetClass, paramMappings);\r\n        return paramMappings;\r\n      }\r\n    \r\n    }\r\nFinally, a bean configuration for adding ParamNameProcessor into the first of argument resolvers:\r\n\r\n    @Configuration\r\n    public class WebConfig {\r\n    \r\n      /**\r\n       * Processor for annotation {@link ParamName}.\r\n       *\r\n       * @return ParamNameProcessor\r\n       */\r\n      @Bean\r\n      protected ParamNameProcessor paramNameProcessor() {\r\n        return new ParamNameProcessor();\r\n      }\r\n    \r\n      /**\r\n       * Custom {@link BeanPostProcessor} for adding {@link ParamNameProcessor} into the first of\r\n       * {@link RequestMappingHandlerAdapter#argumentResolvers}.\r\n       *\r\n       * @return BeanPostProcessor\r\n       */\r\n      @Bean\r\n      public BeanPostProcessor beanPostProcessor() {\r\n        return new BeanPostProcessor() {\r\n    \r\n          @Override\r\n          public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\r\n            return bean;\r\n          }\r\n    \r\n          @Override\r\n          public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\r\n            if (bean instanceof RequestMappingHandlerAdapter) {\r\n              RequestMappingHandlerAdapter adapter = (RequestMappingHandlerAdapter) bean;\r\n              List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers = new ArrayList&lt;&gt;(adapter.getArgumentResolvers());\r\n              argumentResolvers.add(0, paramNameProcessor());\r\n              adapter.setArgumentResolvers(argumentResolvers);\r\n            }\r\n            return bean;\r\n          }\r\n        };\r\n      }\r\n    \r\n    }\r\n\r\nParam pojo:\r\n\r\n    @Data\r\n    public class Foo {\r\n    \r\n      private Integer id;\r\n    \r\n      @ParamName(&quot;first_name&quot;)\r\n      private String firstName;\r\n    \r\n      @ParamName(&quot;last_name&quot;)\r\n      private String lastName;\r\n    \r\n      @ParamName(&quot;created_at&quot;)\r\n      @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n      private Date createdAt;\r\n    \r\n    }\r\nController method:\r\n\r\n    @GetMapping(&quot;/foos&quot;)\r\n    public ResponseEntity&lt;List&lt;Foo&gt;&gt; listFoos(@RequestParam Foo foo, @PageableDefault(sort = &quot;id&quot;) Pageable pageable) {\r\n      List&lt;Foo&gt; foos = fooService.listFoos(foo, pageable);\r\n      return ResponseEntity.ok(foos);\r\n    }\r\n\r\nThat&#39;s all.","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>Thanks the answer of @jkee .<br>\nHere is my solution.<br>\nFirst, a custom annotation:</p>\n\n<pre><code>@Inherited\n@Documented\n@Target(ElementType.FIELD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface ParamName {\n\n  /**\n   * The name of the request parameter to bind to.\n   */\n  String value();\n\n}\n</code></pre>\n\n<p>A customer DataBinder:</p>\n\n<pre><code>public class ParamNameDataBinder extends ExtendedServletRequestDataBinder {\n\n  private final Map&lt;String, String&gt; paramMappings;\n\n  public ParamNameDataBinder(Object target, String objectName, Map&lt;String, String&gt; paramMappings) {\n    super(target, objectName);\n    this.paramMappings = paramMappings;\n  }\n\n  @Override\n  protected void addBindValues(MutablePropertyValues mutablePropertyValues, ServletRequest request) {\n    super.addBindValues(mutablePropertyValues, request);\n    for (Map.Entry&lt;String, String&gt; entry : paramMappings.entrySet()) {\n      String paramName = entry.getKey();\n      String fieldName = entry.getValue();\n      if (mutablePropertyValues.contains(paramName)) {\n        mutablePropertyValues.add(fieldName, mutablePropertyValues.getPropertyValue(paramName).getValue());\n      }\n    }\n  }\n\n}\n</code></pre>\n\n<p>A parameter resolver:</p>\n\n<pre><code>public class ParamNameProcessor extends ServletModelAttributeMethodProcessor {\n\n  @Autowired\n  private RequestMappingHandlerAdapter requestMappingHandlerAdapter;\n\n  private static final Map&lt;Class&lt;?&gt;, Map&lt;String, String&gt;&gt; PARAM_MAPPINGS_CACHE = new ConcurrentHashMap&lt;&gt;(256);\n\n  public ParamNameProcessor() {\n    super(false);\n  }\n\n  @Override\n  public boolean supportsParameter(MethodParameter parameter) {\n    return parameter.hasParameterAnnotation(RequestParam.class)\n        &amp;&amp; !BeanUtils.isSimpleProperty(parameter.getParameterType())\n        &amp;&amp; Arrays.stream(parameter.getParameterType().getDeclaredFields())\n        .anyMatch(field -&gt; field.getAnnotation(ParamName.class) != null);\n  }\n\n  @Override\n  protected void bindRequestParameters(WebDataBinder binder, NativeWebRequest nativeWebRequest) {\n    Object target = binder.getTarget();\n    Map&lt;String, String&gt; paramMappings = this.getParamMappings(target.getClass());\n    ParamNameDataBinder paramNameDataBinder = new ParamNameDataBinder(target, binder.getObjectName(), paramMappings);\n    requestMappingHandlerAdapter.getWebBindingInitializer().initBinder(paramNameDataBinder, nativeWebRequest);\n    super.bindRequestParameters(paramNameDataBinder, nativeWebRequest);\n  }\n\n  /**\n   * Get param mappings.\n   * Cache param mappings in memory.\n   *\n   * @param targetClass\n   * @return {@link Map&lt;String, String&gt;}\n   */\n  private Map&lt;String, String&gt; getParamMappings(Class&lt;?&gt; targetClass) {\n    if (PARAM_MAPPINGS_CACHE.containsKey(targetClass)) {\n      return PARAM_MAPPINGS_CACHE.get(targetClass);\n    }\n    Field[] fields = targetClass.getDeclaredFields();\n    Map&lt;String, String&gt; paramMappings = new HashMap&lt;&gt;(32);\n    for (Field field : fields) {\n      ParamName paramName = field.getAnnotation(ParamName.class);\n      if (paramName != null &amp;&amp; !paramName.value().isEmpty()) {\n        paramMappings.put(paramName.value(), field.getName());\n      }\n    }\n    PARAM_MAPPINGS_CACHE.put(targetClass, paramMappings);\n    return paramMappings;\n  }\n\n}\n</code></pre>\n\n<p>Finally, a bean configuration for adding ParamNameProcessor into the first of argument resolvers:</p>\n\n<pre><code>@Configuration\npublic class WebConfig {\n\n  /**\n   * Processor for annotation {@link ParamName}.\n   *\n   * @return ParamNameProcessor\n   */\n  @Bean\n  protected ParamNameProcessor paramNameProcessor() {\n    return new ParamNameProcessor();\n  }\n\n  /**\n   * Custom {@link BeanPostProcessor} for adding {@link ParamNameProcessor} into the first of\n   * {@link RequestMappingHandlerAdapter#argumentResolvers}.\n   *\n   * @return BeanPostProcessor\n   */\n  @Bean\n  public BeanPostProcessor beanPostProcessor() {\n    return new BeanPostProcessor() {\n\n      @Override\n      public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n        return bean;\n      }\n\n      @Override\n      public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n        if (bean instanceof RequestMappingHandlerAdapter) {\n          RequestMappingHandlerAdapter adapter = (RequestMappingHandlerAdapter) bean;\n          List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers = new ArrayList&lt;&gt;(adapter.getArgumentResolvers());\n          argumentResolvers.add(0, paramNameProcessor());\n          adapter.setArgumentResolvers(argumentResolvers);\n        }\n        return bean;\n      }\n    };\n  }\n\n}\n</code></pre>\n\n<p>Param pojo:</p>\n\n<pre><code>@Data\npublic class Foo {\n\n  private Integer id;\n\n  @ParamName(\"first_name\")\n  private String firstName;\n\n  @ParamName(\"last_name\")\n  private String lastName;\n\n  @ParamName(\"created_at\")\n  @DateTimeFormat(pattern = \"yyyy-MM-dd\")\n  private Date createdAt;\n\n}\n</code></pre>\n\n<p>Controller method:</p>\n\n<pre><code>@GetMapping(\"/foos\")\npublic ResponseEntity&lt;List&lt;Foo&gt;&gt; listFoos(@RequestParam Foo foo, @PageableDefault(sort = \"id\") Pageable pageable) {\n  List&lt;Foo&gt; foos = fooService.listFoos(foo, pageable);\n  return ResponseEntity.ok(foos);\n}\n</code></pre>\n\n<p>That's all.</p>\n"},{"tags":[],"owner":{"account_id":8447886,"reputation":95,"user_id":6337832,"display_name":"Gene Parmon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1545047421,"creation_date":1545047120,"answer_id":53814583,"question_id":8986593,"body_markdown":"There&#39;s a little improvement to jkee&#39;s answer. \r\n\r\nIn order to support inheritance you should also analyze parent classes.\r\n\r\n    /**\r\n     * ServletRequestDataBinder which supports fields renaming using {@link ParamName}\r\n     *\r\n     * @author jkee\r\n     * @author Yauhen Parmon\r\n     */\r\n    public class ParamRenamingProcessor extends ServletModelAttributeMethodProcessor {\r\n            \r\n        @Autowired\r\n        private RequestMappingHandlerAdapter requestMappingHandlerAdapter;\r\n            \r\n        //Rename cache\r\n        private final Map&lt;Class&lt;?&gt;, Map&lt;String, String&gt;&gt; replaceMap = new ConcurrentHashMap&lt;&gt;();\r\n            \r\n        public ParamRenamingProcessor(boolean annotationNotRequired) {\r\n           super(annotationNotRequired);\r\n        }\r\n            \r\n        @Override\r\n        protected void bindRequestParameters(WebDataBinder binder, NativeWebRequest nativeWebRequest) {\r\n            Object target = binder.getTarget();\r\n            Class&lt;?&gt; targetClass = Objects.requireNonNull(target).getClass();\r\n            if (!replaceMap.containsKey(targetClass)) {\r\n                replaceMap.put(targetClass, analyzeClass(targetClass));\r\n            }\r\n            Map&lt;String, String&gt; mapping = replaceMap.get(targetClass);\r\n            ParamNameDataBinder paramNameDataBinder = new ParamNameDataBinder(target, binder.getObjectName(), mapping);\r\n            Objects.requireNonNull(requestMappingHandlerAdapter.getWebBindingInitializer())\r\n                    .initBinder(paramNameDataBinder);    \r\n            super.bindRequestParameters(paramNameDataBinder, nativeWebRequest);\r\n        }\r\n            \r\n        private Map&lt;String, String&gt; analyzeClass(Class&lt;?&gt; targetClass) {\r\n            Map&lt;String, String&gt; renameMap = new HashMap&lt;&gt;();\r\n            for (Field field : targetClass.getDeclaredFields()) {\r\n                ParamName paramNameAnnotation = field.getAnnotation(ParamName.class);\r\n                if (paramNameAnnotation != null &amp;&amp; !paramNameAnnotation.value().isEmpty()) {\r\n                   renameMap.put(paramNameAnnotation.value(), field.getName());\r\n                }\r\n            }\r\n            if (targetClass.getSuperclass() != Object.class) {\r\n                renameMap.putAll(analyzeClass(targetClass.getSuperclass()));\r\n            }\r\n            return renameMap;\r\n        }\r\n    }\r\n\r\nThis processor will analyze fields of superclasses annotated with @ParamName. It also doesn&#39;t use `initBinder` method with 2 parameters which is deprecated as of Spring 5.0. All the rest in jkee&#39;s answer is OK. ","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>There's a little improvement to jkee's answer. </p>\n\n<p>In order to support inheritance you should also analyze parent classes.</p>\n\n<pre><code>/**\n * ServletRequestDataBinder which supports fields renaming using {@link ParamName}\n *\n * @author jkee\n * @author Yauhen Parmon\n */\npublic class ParamRenamingProcessor extends ServletModelAttributeMethodProcessor {\n\n    @Autowired\n    private RequestMappingHandlerAdapter requestMappingHandlerAdapter;\n\n    //Rename cache\n    private final Map&lt;Class&lt;?&gt;, Map&lt;String, String&gt;&gt; replaceMap = new ConcurrentHashMap&lt;&gt;();\n\n    public ParamRenamingProcessor(boolean annotationNotRequired) {\n       super(annotationNotRequired);\n    }\n\n    @Override\n    protected void bindRequestParameters(WebDataBinder binder, NativeWebRequest nativeWebRequest) {\n        Object target = binder.getTarget();\n        Class&lt;?&gt; targetClass = Objects.requireNonNull(target).getClass();\n        if (!replaceMap.containsKey(targetClass)) {\n            replaceMap.put(targetClass, analyzeClass(targetClass));\n        }\n        Map&lt;String, String&gt; mapping = replaceMap.get(targetClass);\n        ParamNameDataBinder paramNameDataBinder = new ParamNameDataBinder(target, binder.getObjectName(), mapping);\n        Objects.requireNonNull(requestMappingHandlerAdapter.getWebBindingInitializer())\n                .initBinder(paramNameDataBinder);    \n        super.bindRequestParameters(paramNameDataBinder, nativeWebRequest);\n    }\n\n    private Map&lt;String, String&gt; analyzeClass(Class&lt;?&gt; targetClass) {\n        Map&lt;String, String&gt; renameMap = new HashMap&lt;&gt;();\n        for (Field field : targetClass.getDeclaredFields()) {\n            ParamName paramNameAnnotation = field.getAnnotation(ParamName.class);\n            if (paramNameAnnotation != null &amp;&amp; !paramNameAnnotation.value().isEmpty()) {\n               renameMap.put(paramNameAnnotation.value(), field.getName());\n            }\n        }\n        if (targetClass.getSuperclass() != Object.class) {\n            renameMap.putAll(analyzeClass(targetClass.getSuperclass()));\n        }\n        return renameMap;\n    }\n}\n</code></pre>\n\n<p>This processor will analyze fields of superclasses annotated with @ParamName. It also doesn't use <code>initBinder</code> method with 2 parameters which is deprecated as of Spring 5.0. All the rest in jkee's answer is OK. </p>\n"},{"tags":[],"owner":{"account_id":537054,"reputation":32561,"user_id":905762,"accept_rate":77,"display_name":"John B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690373246,"creation_date":1690373246,"answer_id":76771124,"question_id":8986593,"body_markdown":"I tried the above but found that I was missing some configured functionality of the WebBinder so instead I created a solution that uses Jackson instead.\r\n\r\nFirst I implemented an `ArgumentResolver` that looks for a specific class-level annotation `UsingJacksonMapping` to determine if it should be responsible for arguments of this type.\r\n\r\n```\r\n\r\npublic class ObjectMapperParameterArgumentHandler implements HandlerMethodArgumentResolver {\r\n\r\n  /**\r\n   * Marks a Spring method argument parameter class as being marshalled via Jackson INSTEAD of\r\n   * Spring&#39;s standard WebBinder. This can be helpful in order to use Jackson annotations for\r\n   * property names and format. To use the argument resolver must be registered.\r\n   *\r\n   * &lt;pre&gt;\r\n   * &amp;#064;ObjectMapperParameterArgumentHandler.UsingJacksonMapping\r\n   * &lt;/pre&gt;\r\n   */\r\n  @Target(ElementType.TYPE)\r\n  @Retention(RetentionPolicy.RUNTIME)\r\n  @Documented\r\n  public @interface UsingJacksonMapping {}\r\n\r\n  private static final ObjectMapper OBJECT_MAPPER = ObjectMapperUtils.createObjectMapper();\r\n\r\n  static {\r\n    OBJECT_MAPPER.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n    OBJECT_MAPPER.configure(DeserializationFeature.UNWRAP_SINGLE_VALUE_ARRAYS, true);\r\n  }\r\n\r\n  @Override\r\n  public boolean supportsParameter(MethodParameter parameter) {\r\n    Class&lt;?&gt; parameterType = parameter.getParameterType();\r\n    boolean result = markedWithUsingJacksonMapping(parameterType);\r\n    if (result) {\r\n      log.debug(&quot;Using Jackson mapping for {}&quot;, parameterType.getName());\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private boolean markedWithUsingJacksonMapping(Class&lt;?&gt; type) {\r\n    if (type.equals(Object.class)) {\r\n      return false;\r\n    } else if (type.getAnnotation(UsingJacksonMapping.class) != null) {\r\n      return true;\r\n    } else {\r\n      return markedWithUsingJacksonMapping(type.getSuperclass());\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public Object resolveArgument(\r\n      MethodParameter parameter,\r\n      ModelAndViewContainer mavContainer,\r\n      NativeWebRequest webRequest,\r\n      WebDataBinderFactory binderFactory) {\r\n    Map&lt;String, String[]&gt; parameterMap = webRequest.getParameterMap();\r\n    log.trace(&quot;Converting params {}&quot;, parameterMap);\r\n\r\n    Class&lt;?&gt; parameterType = parameter.getParameterType();\r\n    Object result = OBJECT_MAPPER.convertValue(parameterMap, parameterType);\r\n    log.debug(&quot;Result {}&quot;, result);\r\n    return result;\r\n  }\r\n}\r\n```\r\n\r\nNext I add it as an argumentResolver:\r\n```\r\n@Configuration\r\npublic class ObjectMapperParameterArgumentResolverConfiguration extends WebMvcConfigurationSupport {\r\n\r\n  @Override\r\n  protected void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) {\r\n    argumentResolvers.add(new ObjectMapperParameterArgumentHandler());\r\n  }\r\n}\r\n```\r\n\r\nThis now allows for the following using Jackson annotations. It also allow for `final` fields (which would require `initDirectFieldAccess` using Spring):\r\n```\r\n\r\n@Value\r\n@NoArgsConstructor(force = true)\r\n@ObjectMapperParameterArgumentHandler.UsingJacksonMapping\r\npublic class DateBasedQueryParamDto  {\r\n\r\n  @Nullable\r\n  @JsonProperty(&quot;startDate&quot;)\r\n  @JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n  @Parameter(\r\n      required = false,\r\n      description =\r\n          &quot;Oldest UTC time in ISO date time format (eq 2022-07-08). Mutually exclusive to&quot;\r\n              + &quot; daysPast&quot;)\r\n  private final LocalDate startDate;\r\n\r\n  @Nullable\r\n  @JsonProperty(&quot;endDate&quot;)\r\n  @JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n  @Parameter(\r\n      required = false,\r\n      description =\r\n          &quot;Latest UTC time in ISO date time format (eq 2022-07-08). Mutually exclusive to &quot;\r\n              + &quot;daysPast.&quot;)\r\n  private final LocalDate endDate;\r\n}\r\n\r\n```","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>I tried the above but found that I was missing some configured functionality of the WebBinder so instead I created a solution that uses Jackson instead.</p>\n<p>First I implemented an <code>ArgumentResolver</code> that looks for a specific class-level annotation <code>UsingJacksonMapping</code> to determine if it should be responsible for arguments of this type.</p>\n<pre><code>\npublic class ObjectMapperParameterArgumentHandler implements HandlerMethodArgumentResolver {\n\n  /**\n   * Marks a Spring method argument parameter class as being marshalled via Jackson INSTEAD of\n   * Spring's standard WebBinder. This can be helpful in order to use Jackson annotations for\n   * property names and format. To use the argument resolver must be registered.\n   *\n   * &lt;pre&gt;\n   * &amp;#064;ObjectMapperParameterArgumentHandler.UsingJacksonMapping\n   * &lt;/pre&gt;\n   */\n  @Target(ElementType.TYPE)\n  @Retention(RetentionPolicy.RUNTIME)\n  @Documented\n  public @interface UsingJacksonMapping {}\n\n  private static final ObjectMapper OBJECT_MAPPER = ObjectMapperUtils.createObjectMapper();\n\n  static {\n    OBJECT_MAPPER.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n    OBJECT_MAPPER.configure(DeserializationFeature.UNWRAP_SINGLE_VALUE_ARRAYS, true);\n  }\n\n  @Override\n  public boolean supportsParameter(MethodParameter parameter) {\n    Class&lt;?&gt; parameterType = parameter.getParameterType();\n    boolean result = markedWithUsingJacksonMapping(parameterType);\n    if (result) {\n      log.debug(&quot;Using Jackson mapping for {}&quot;, parameterType.getName());\n    }\n    return result;\n  }\n\n  private boolean markedWithUsingJacksonMapping(Class&lt;?&gt; type) {\n    if (type.equals(Object.class)) {\n      return false;\n    } else if (type.getAnnotation(UsingJacksonMapping.class) != null) {\n      return true;\n    } else {\n      return markedWithUsingJacksonMapping(type.getSuperclass());\n    }\n  }\n\n  @Override\n  public Object resolveArgument(\n      MethodParameter parameter,\n      ModelAndViewContainer mavContainer,\n      NativeWebRequest webRequest,\n      WebDataBinderFactory binderFactory) {\n    Map&lt;String, String[]&gt; parameterMap = webRequest.getParameterMap();\n    log.trace(&quot;Converting params {}&quot;, parameterMap);\n\n    Class&lt;?&gt; parameterType = parameter.getParameterType();\n    Object result = OBJECT_MAPPER.convertValue(parameterMap, parameterType);\n    log.debug(&quot;Result {}&quot;, result);\n    return result;\n  }\n}\n</code></pre>\n<p>Next I add it as an argumentResolver:</p>\n<pre><code>@Configuration\npublic class ObjectMapperParameterArgumentResolverConfiguration extends WebMvcConfigurationSupport {\n\n  @Override\n  protected void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) {\n    argumentResolvers.add(new ObjectMapperParameterArgumentHandler());\n  }\n}\n</code></pre>\n<p>This now allows for the following using Jackson annotations. It also allow for <code>final</code> fields (which would require <code>initDirectFieldAccess</code> using Spring):</p>\n<pre><code>\n@Value\n@NoArgsConstructor(force = true)\n@ObjectMapperParameterArgumentHandler.UsingJacksonMapping\npublic class DateBasedQueryParamDto  {\n\n  @Nullable\n  @JsonProperty(&quot;startDate&quot;)\n  @JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)\n  @Parameter(\n      required = false,\n      description =\n          &quot;Oldest UTC time in ISO date time format (eq 2022-07-08). Mutually exclusive to&quot;\n              + &quot; daysPast&quot;)\n  private final LocalDate startDate;\n\n  @Nullable\n  @JsonProperty(&quot;endDate&quot;)\n  @JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)\n  @Parameter(\n      required = false,\n      description =\n          &quot;Latest UTC time in ISO date time format (eq 2022-07-08). Mutually exclusive to &quot;\n              + &quot;daysPast.&quot;)\n  private final LocalDate endDate;\n}\n\n</code></pre>\n"}],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73469,"favorite_count":0,"down_vote_count":0,"up_vote_count":97,"accepted_answer_id":9003314,"answer_count":11,"score":97,"last_activity_date":1690373246,"creation_date":1327407140,"question_id":8986593,"body_markdown":"I have a command object:\r\n\r\n    public class Job {\r\n        private String jobType;\r\n        private String location;\r\n    }\r\n\r\nWhich is bound by spring-mvc:\r\n\r\n    @RequestMapping(&quot;/foo&quot;)\r\n    public String doSomethingWithJob(Job job) {\r\n       ...\r\n    }\r\n\r\nWhich works fine for `http://example.com/foo?jobType=permanent&amp;location=Stockholm`. But now I need to make it work for the following url instead:   \r\n\r\n    http://example.com/foo?jt=permanent&amp;loc=Stockholm\r\n\r\nObviously, I don&#39;t want to change my command object, because the field names have to remain long (as they are used in the code). How can I customize that? Is there an option to do something like this:\r\n\r\n    public class Job {\r\n        @RequestParam(&quot;jt&quot;)\r\n        private String jobType;\r\n        @RequestParam(&quot;loc&quot;)\r\n        private String location;\r\n    }\r\n\r\nThis doesn&#39;t work (`@RequestParam` can&#39;t be applied to fields).\r\n\r\nThe thing I&#39;m thinking about is a custom message converter similar to `FormHttpMessageConverter` and read a custom annotation on the target object","title":"How to customize parameter names when binding Spring MVC command objects?","body":"<p>I have a command object:</p>\n<pre><code>public class Job {\n    private String jobType;\n    private String location;\n}\n</code></pre>\n<p>Which is bound by spring-mvc:</p>\n<pre><code>@RequestMapping(&quot;/foo&quot;)\npublic String doSomethingWithJob(Job job) {\n   ...\n}\n</code></pre>\n<p>Which works fine for <code>http://example.com/foo?jobType=permanent&amp;location=Stockholm</code>. But now I need to make it work for the following url instead:</p>\n<pre><code>http://example.com/foo?jt=permanent&amp;loc=Stockholm\n</code></pre>\n<p>Obviously, I don't want to change my command object, because the field names have to remain long (as they are used in the code). How can I customize that? Is there an option to do something like this:</p>\n<pre><code>public class Job {\n    @RequestParam(&quot;jt&quot;)\n    private String jobType;\n    @RequestParam(&quot;loc&quot;)\n    private String location;\n}\n</code></pre>\n<p>This doesn't work (<code>@RequestParam</code> can't be applied to fields).</p>\n<p>The thing I'm thinking about is a custom message converter similar to <code>FormHttpMessageConverter</code> and read a custom annotation on the target object</p>\n"},{"tags":["javascript","java","spring","spring-mvc","apache-commons-csv"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690372874,"post_id":76770987,"comment_id":135343722,"body_markdown":"I don&#39;t quite get it - if you download a csv file in a browser, it happens asynchronously and is handled by the browser...","body":"I don&#39;t quite get it - if you download a csv file in a browser, it happens asynchronously and is handled by the browser..."},{"owner":{"account_id":23902843,"reputation":39,"user_id":17900785,"display_name":"Evgeniy Zelenskiy"},"score":0,"creation_date":1690373587,"post_id":76770987,"comment_id":135343892,"body_markdown":"Yes, and I don&#39;t quite get it. Where am I doing wrong, application side or client side","body":"Yes, and I don&#39;t quite get it. Where am I doing wrong, application side or client side"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690376052,"post_id":76770987,"comment_id":135344612,"body_markdown":"Actually, I might have to think about what I just said. It&#39;s possible that what I have witnessed in the past is a product of deliberate asynchronous programming","body":"Actually, I might have to think about what I just said. It&#39;s possible that what I have witnessed in the past is a product of deliberate asynchronous programming"}],"owner":{"account_id":23902843,"reputation":39,"user_id":17900785,"display_name":"Evgeniy Zelenskiy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690372258,"creation_date":1690372258,"question_id":76770987,"body_markdown":"**Hi all!**\r\n\r\n\r\nI want to solve the following problem. The java method unloads data from the database and writes the data to the writer. Since you don’t want to store this object in memory and don’t wait on the client side until the entire report is completely generated, then transfer the data loading to the stream and generate a file on the client side.\r\n\r\nI have my java code:\r\n\r\n        public void generateIntervalReportCsv(Appendable fileOutputStream, String dateFrom, String dateTo, String searchType) throws Exception {\r\n            try (Printer csvPrinter = new PrinterCsvAdapter(new CSVPrinter(fileOutputStream, CSVFormat.EXCEL.builder().setDelimiter(&quot;;&quot;).setHeader(&quot;PERIOD&quot;, &quot;STATUS&quot;, &quot;RECORDS COUNT&quot;) .build()))) {\r\n                generateIntervalReport(csvPrinter, dateFrom, dateTo, searchType);\r\n            }\r\n      }\r\n\r\nRest-controller:\r\n\r\n    @GetMapping(&quot;/interval-report-file-csv&quot;)\r\n    public ResponseEntity&lt;StreamingResponseBody&gt; generateReport(@RequestParam String dateFrom,\r\n                                        @RequestParam String dateTo,\r\n                                        @RequestParam String period,\r\n                                        HttpServletResponse response) {\r\n        response.setHeader(\r\n                &quot;Content-Disposition&quot;,\r\n                &quot;attachment;filename=My-Report.csv&quot;);\r\n    \r\n        StreamingResponseBody stream = out -&gt; {\r\n            try {\r\n                processService.generateIntervalReportCsv(new OutputStreamWriter(out), dateFrom, dateTo, period);\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(&quot;Error - &quot;, e);\r\n            }\r\n        };\r\n    \r\n        return ResponseEntity.ok(stream);\r\n    }\r\n\r\nJavascript:\r\n\r\n    function downloadCsvReport() {\r\n          const minutesToAbort = 5;\r\n          const awaiting_response_time_in_ms = 1000 * 60 * minutesToAbort;\r\n    \r\n          if (!is_downloadIntervalReport_alreadyPushed) {\r\n            is_downloadIntervalReport_alreadyPushed = true;\r\n            let dateFrom = document.getElementById(&quot;periodStartDate&quot;).value;\r\n            let dateTo = document.getElementById(&quot;periodEndDate&quot;).value;\r\n            let searchType = document.getElementById(&quot;period&quot;).value;\r\n            let buttonStyle = document.getElementById(&quot;csvButtonId&quot;).style;\r\n            buttonStyle.backgroundColor = &quot;gray&quot;;\r\n            let url = &quot;/audit-migrator/process/interval-report-file-csv&quot; + &quot;?dateFrom=&quot; + dateFrom + &quot;&amp;dateTo=&quot; + dateTo + &quot;&amp;period=&quot; + searchType;\r\n    \r\n            downloadIntervalReport_timeOfStartRequest = new Date();\r\n            fetch(url, {signal: AbortSignal.timeout(awaiting_response_time_in_ms)})\r\n              .then(async (res) =&gt; {\r\n                if (res.status &gt;= 200 &amp;&amp; res.status &lt; 300) {\r\n                  return res;\r\n                } else {\r\n                  throw new Error(await res.text());\r\n                }\r\n              })\r\n              .then(res =&gt; {\r\n                res.blob().then(file =&gt; {\r\n                  let tempUrl = URL.createObjectURL(file);\r\n                  const aTag = document.createElement(&quot;a&quot;);\r\n                  aTag.href = tempUrl;\r\n                  aTag.download = decodeURI(res.headers.get(&#39;Content-Disposition&#39;).split(&#39;UTF-8\\&#39;\\&#39;&#39;)[1]);\r\n                  document.body.appendChild(aTag);\r\n                  aTag.click();\r\n                  URL.revokeObjectURL(tempUrl);\r\n                  aTag.remove();\r\n                });\r\n              }).catch((reason) =&gt; {\r\n                if (reason.name === &quot;AbortError&quot;) {\r\n                  console.log(&quot;Request aborted&quot;);\r\n                } else {\r\n                  console.error(reason.message);\r\n                }\r\n              }).finally(() =&gt; {\r\n                is_downloadIntervalReport_alreadyPushed = false;\r\n                buttonStyle.backgroundColor = &quot;#d17b2e&quot;;\r\n              });\r\n          }\r\n        }\r\n    \r\n    I have written the following javascript function in my html page:\r\n    \r\n        function downloadCsvReport() {\r\n              const minutesToAbort = 5;\r\n              const awaiting_response_time_in_ms = 1000 * 60 * minutesToAbort;\r\n        \r\n              if (!is_downloadIntervalReport_alreadyPushed) {\r\n                is_downloadIntervalReport_alreadyPushed = true;\r\n                let dateFrom = document.getElementById(&quot;periodStartDate&quot;).value;\r\n                let dateTo = document.getElementById(&quot;periodEndDate&quot;).value;\r\n                let searchType = document.getElementById(&quot;period&quot;).value;\r\n                let buttonStyle = document.getElementById(&quot;csvButtonId&quot;).style;\r\n                buttonStyle.backgroundColor = &quot;gray&quot;;\r\n                let url = &quot;/interval-report-file-csv&quot; + &quot;?dateFrom=&quot; + dateFrom + &quot;&amp;dateTo=&quot; + dateTo + &quot;&amp;period=&quot; + searchType;\r\n        \r\n                downloadIntervalReport_timeOfStartRequest = new Date();\r\n                fetch(url, {signal: AbortSignal.timeout(awaiting_response_time_in_ms)})\r\n                  .then(async (res) =&gt; {\r\n                    if (res.status &gt;= 200 &amp;&amp; res.status &lt; 300) {\r\n                      return res;\r\n                    } else {\r\n                      throw new Error(await res.text());\r\n                    }\r\n                  })\r\n                  .then(res =&gt; {\r\n                    res.blob().then(file =&gt; {\r\n                      let tempUrl = URL.createObjectURL(file);\r\n                      const aTag = document.createElement(&quot;a&quot;);\r\n                      aTag.href = tempUrl;\r\n                      aTag.download = decodeURI(res.headers.get(&#39;Content-Disposition&#39;).split(&#39;UTF-8\\&#39;\\&#39;&#39;)[1]);\r\n                      document.body.appendChild(aTag);\r\n                      aTag.click();\r\n                      URL.revokeObjectURL(tempUrl);\r\n                      aTag.remove();\r\n                    });\r\n                  }).catch((reason) =&gt; {\r\n                    if (reason.name === &quot;AbortError&quot;) {\r\n                      console.log(&quot;Request aborted&quot;);\r\n                    } else {\r\n                      console.error(reason.message);\r\n                    }\r\n                  }).finally(() =&gt; {\r\n                    is_downloadIntervalReport_alreadyPushed = false;\r\n                    buttonStyle.backgroundColor = &quot;#d17b2e&quot;;\r\n                  });\r\n              }\r\n            }\r\n\r\nWhen you click on the report download button, an empty file with the name undefined.txt starts to load.\r\n\r\nIn html debugging, this happens on the line :\r\n\r\n    fetch(url, {signal: AbortSignal.timeout(awaiting_response_time_in_ms)})\r\n\r\nWhat am I doing wrong?","title":"Loading a file via JavaScript from a stream","body":"<p><strong>Hi all!</strong></p>\n<p>I want to solve the following problem. The java method unloads data from the database and writes the data to the writer. Since you don’t want to store this object in memory and don’t wait on the client side until the entire report is completely generated, then transfer the data loading to the stream and generate a file on the client side.</p>\n<p>I have my java code:</p>\n<pre><code>    public void generateIntervalReportCsv(Appendable fileOutputStream, String dateFrom, String dateTo, String searchType) throws Exception {\n        try (Printer csvPrinter = new PrinterCsvAdapter(new CSVPrinter(fileOutputStream, CSVFormat.EXCEL.builder().setDelimiter(&quot;;&quot;).setHeader(&quot;PERIOD&quot;, &quot;STATUS&quot;, &quot;RECORDS COUNT&quot;) .build()))) {\n            generateIntervalReport(csvPrinter, dateFrom, dateTo, searchType);\n        }\n  }\n</code></pre>\n<p>Rest-controller:</p>\n<pre><code>@GetMapping(&quot;/interval-report-file-csv&quot;)\npublic ResponseEntity&lt;StreamingResponseBody&gt; generateReport(@RequestParam String dateFrom,\n                                    @RequestParam String dateTo,\n                                    @RequestParam String period,\n                                    HttpServletResponse response) {\n    response.setHeader(\n            &quot;Content-Disposition&quot;,\n            &quot;attachment;filename=My-Report.csv&quot;);\n\n    StreamingResponseBody stream = out -&gt; {\n        try {\n            processService.generateIntervalReportCsv(new OutputStreamWriter(out), dateFrom, dateTo, period);\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;Error - &quot;, e);\n        }\n    };\n\n    return ResponseEntity.ok(stream);\n}\n</code></pre>\n<p>Javascript:</p>\n<pre><code>function downloadCsvReport() {\n      const minutesToAbort = 5;\n      const awaiting_response_time_in_ms = 1000 * 60 * minutesToAbort;\n\n      if (!is_downloadIntervalReport_alreadyPushed) {\n        is_downloadIntervalReport_alreadyPushed = true;\n        let dateFrom = document.getElementById(&quot;periodStartDate&quot;).value;\n        let dateTo = document.getElementById(&quot;periodEndDate&quot;).value;\n        let searchType = document.getElementById(&quot;period&quot;).value;\n        let buttonStyle = document.getElementById(&quot;csvButtonId&quot;).style;\n        buttonStyle.backgroundColor = &quot;gray&quot;;\n        let url = &quot;/audit-migrator/process/interval-report-file-csv&quot; + &quot;?dateFrom=&quot; + dateFrom + &quot;&amp;dateTo=&quot; + dateTo + &quot;&amp;period=&quot; + searchType;\n\n        downloadIntervalReport_timeOfStartRequest = new Date();\n        fetch(url, {signal: AbortSignal.timeout(awaiting_response_time_in_ms)})\n          .then(async (res) =&gt; {\n            if (res.status &gt;= 200 &amp;&amp; res.status &lt; 300) {\n              return res;\n            } else {\n              throw new Error(await res.text());\n            }\n          })\n          .then(res =&gt; {\n            res.blob().then(file =&gt; {\n              let tempUrl = URL.createObjectURL(file);\n              const aTag = document.createElement(&quot;a&quot;);\n              aTag.href = tempUrl;\n              aTag.download = decodeURI(res.headers.get('Content-Disposition').split('UTF-8\\'\\'')[1]);\n              document.body.appendChild(aTag);\n              aTag.click();\n              URL.revokeObjectURL(tempUrl);\n              aTag.remove();\n            });\n          }).catch((reason) =&gt; {\n            if (reason.name === &quot;AbortError&quot;) {\n              console.log(&quot;Request aborted&quot;);\n            } else {\n              console.error(reason.message);\n            }\n          }).finally(() =&gt; {\n            is_downloadIntervalReport_alreadyPushed = false;\n            buttonStyle.backgroundColor = &quot;#d17b2e&quot;;\n          });\n      }\n    }\n\nI have written the following javascript function in my html page:\n\n    function downloadCsvReport() {\n          const minutesToAbort = 5;\n          const awaiting_response_time_in_ms = 1000 * 60 * minutesToAbort;\n    \n          if (!is_downloadIntervalReport_alreadyPushed) {\n            is_downloadIntervalReport_alreadyPushed = true;\n            let dateFrom = document.getElementById(&quot;periodStartDate&quot;).value;\n            let dateTo = document.getElementById(&quot;periodEndDate&quot;).value;\n            let searchType = document.getElementById(&quot;period&quot;).value;\n            let buttonStyle = document.getElementById(&quot;csvButtonId&quot;).style;\n            buttonStyle.backgroundColor = &quot;gray&quot;;\n            let url = &quot;/interval-report-file-csv&quot; + &quot;?dateFrom=&quot; + dateFrom + &quot;&amp;dateTo=&quot; + dateTo + &quot;&amp;period=&quot; + searchType;\n    \n            downloadIntervalReport_timeOfStartRequest = new Date();\n            fetch(url, {signal: AbortSignal.timeout(awaiting_response_time_in_ms)})\n              .then(async (res) =&gt; {\n                if (res.status &gt;= 200 &amp;&amp; res.status &lt; 300) {\n                  return res;\n                } else {\n                  throw new Error(await res.text());\n                }\n              })\n              .then(res =&gt; {\n                res.blob().then(file =&gt; {\n                  let tempUrl = URL.createObjectURL(file);\n                  const aTag = document.createElement(&quot;a&quot;);\n                  aTag.href = tempUrl;\n                  aTag.download = decodeURI(res.headers.get('Content-Disposition').split('UTF-8\\'\\'')[1]);\n                  document.body.appendChild(aTag);\n                  aTag.click();\n                  URL.revokeObjectURL(tempUrl);\n                  aTag.remove();\n                });\n              }).catch((reason) =&gt; {\n                if (reason.name === &quot;AbortError&quot;) {\n                  console.log(&quot;Request aborted&quot;);\n                } else {\n                  console.error(reason.message);\n                }\n              }).finally(() =&gt; {\n                is_downloadIntervalReport_alreadyPushed = false;\n                buttonStyle.backgroundColor = &quot;#d17b2e&quot;;\n              });\n          }\n        }\n</code></pre>\n<p>When you click on the report download button, an empty file with the name undefined.txt starts to load.</p>\n<p>In html debugging, this happens on the line :</p>\n<pre><code>fetch(url, {signal: AbortSignal.timeout(awaiting_response_time_in_ms)})\n</code></pre>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":22566541,"reputation":407,"user_id":16753477,"display_name":"Cleiton Freitas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690372237,"creation_date":1689877695,"question_id":76732774,"body_markdown":"I have a `/tree-list` endpoint that returns a list of the `Group` class where one of its attributes returns data from the `Person` class in tree format, this works with one record in the list, but when the list has more of a record, the `Person` tree nodes are duplicated, what should I do to prevent this from happening?\r\n\r\n**List with a record:**\r\n\r\n    [\r\n        {\r\n            &quot;id&quot;: 1,\r\n            &quot;name&quot;: &quot;Group 1&quot;,\r\n            &quot;personList&quot;: [\r\n                {\r\n                    &quot;id&quot;: 1,\r\n                    &quot;fullName&quot;: &quot;William&quot;,\r\n                    &quot;children&quot;: [\r\n                        {\r\n                            &quot;id&quot;: 2,\r\n                            &quot;fullName&quot;: &quot;Henry&quot;,\r\n                            &quot;children&quot;: [\r\n                                {\r\n                                    &quot;id&quot;: 3,\r\n                                    &quot;fullName&quot;: &quot;Matt&quot;,\r\n                                    &quot;children&quot;: [\r\n                                        {\r\n                                            &quot;id&quot;: 7,\r\n                                            &quot;fullName&quot;: &quot;Sophi&quot;,\r\n                                            &quot;children&quot;: [],\r\n                                            &quot;rootParentId&quot;: 1\r\n                                        }\r\n                                    ],\r\n                                    &quot;rootParentId&quot;: 1\r\n                                },\r\n                                {\r\n                                    &quot;id&quot;: 4,\r\n                                    &quot;fullName&quot;: &quot;Alisa&quot;,\r\n                                    &quot;children&quot;: [\r\n                                        {\r\n                                            &quot;id&quot;: 6,\r\n                                            &quot;fullName&quot;: &quot;Alexa&quot;,\r\n                                            &quot;children&quot;: [],\r\n                                            &quot;rootParentId&quot;: 1\r\n                                        }\r\n                                    ],\r\n                                    &quot;rootParentId&quot;: 1\r\n                                }\r\n                            ],\r\n                            &quot;rootParentId&quot;: 1\r\n                        },\r\n                        {\r\n                            &quot;id&quot;: 5,\r\n                            &quot;fullName&quot;: &quot;May&quot;,\r\n                            &quot;children&quot;: [],\r\n                            &quot;rootParentId&quot;: 1\r\n                        }\r\n                    ],\r\n                    &quot;rootParentId&quot;: 1\r\n                },\r\n                {\r\n                    &quot;id&quot;: 8,\r\n                    &quot;fullName&quot;: &quot;Olivia&quot;,\r\n                    &quot;children&quot;: [\r\n                        {\r\n                            &quot;id&quot;: 9,\r\n                            &quot;fullName&quot;: &quot;John&quot;,\r\n                            &quot;children&quot;: [\r\n                                {\r\n                                    &quot;id&quot;: 11,\r\n                                    &quot;fullName&quot;: &quot;Oliver&quot;,\r\n                                    &quot;children&quot;: [],\r\n                                    &quot;rootParentId&quot;: 8\r\n                                },\r\n                                {\r\n                                    &quot;id&quot;: 12,\r\n                                    &quot;fullName&quot;: &quot;Mia&quot;,\r\n                                    &quot;children&quot;: [],\r\n                                    &quot;rootParentId&quot;: 8\r\n                                }\r\n                            ],\r\n                            &quot;rootParentId&quot;: 8\r\n                        },\r\n                        {\r\n                            &quot;id&quot;: 10,\r\n                            &quot;fullName&quot;: &quot;Mary&quot;,\r\n                            &quot;children&quot;: [\r\n                                {\r\n                                    &quot;id&quot;: 13,\r\n                                    &quot;fullName&quot;: &quot;Evelyn&quot;,\r\n                                    &quot;children&quot;: [],\r\n                                    &quot;rootParentId&quot;: 8\r\n                                }\r\n                            ],\r\n                            &quot;rootParentId&quot;: 8\r\n                        }\r\n                    ],\r\n                    &quot;rootParentId&quot;: 8\r\n                },\r\n                {\r\n                    &quot;id&quot;: 14,\r\n                    &quot;fullName&quot;: &quot;Eric&quot;,\r\n                    &quot;children&quot;: [],\r\n                    &quot;rootParentId&quot;: null\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n\r\n**List with more records:**\r\n\r\n    [\r\n        {\r\n            &quot;id&quot;: 1,\r\n            &quot;name&quot;: &quot;Group 1&quot;,\r\n            &quot;personList&quot;: [\r\n                {\r\n                    &quot;id&quot;: 1,\r\n                    &quot;fullName&quot;: &quot;William&quot;,\r\n                    &quot;children&quot;: [\r\n                        {\r\n                            &quot;id&quot;: 2,\r\n                            &quot;fullName&quot;: &quot;Henry&quot;,\r\n                            &quot;children&quot;: [\r\n                                {\r\n                                    &quot;id&quot;: 3,\r\n                                    &quot;fullName&quot;: &quot;Matt&quot;,\r\n                                    &quot;children&quot;: [\r\n                                        {\r\n                                            &quot;id&quot;: 7,\r\n                                            &quot;fullName&quot;: &quot;Sophi&quot;,\r\n                                            &quot;children&quot;: [],\r\n                                            &quot;rootParentId&quot;: 1\r\n                                        },\r\n                                        {\r\n                                            &quot;id&quot;: 7,\r\n                                            &quot;fullName&quot;: &quot;Sophi&quot;,\r\n                                            &quot;children&quot;: [],\r\n                                            &quot;rootParentId&quot;: 1\r\n                                        }\r\n                                    ],\r\n                                    &quot;rootParentId&quot;: 1\r\n                                },\r\n                                {\r\n                                    &quot;id&quot;: 4,\r\n                                    &quot;fullName&quot;: &quot;Alisa&quot;,\r\n                                    &quot;children&quot;: [\r\n                                        {\r\n                                            &quot;id&quot;: 6,\r\n                                            &quot;fullName&quot;: &quot;Alexa&quot;,\r\n                                            &quot;children&quot;: [],\r\n                                            &quot;rootParentId&quot;: 1\r\n                                        },\r\n                                        {\r\n                                            &quot;id&quot;: 6,\r\n                                            &quot;fullName&quot;: &quot;Alexa&quot;,\r\n                                            &quot;children&quot;: [],\r\n                                            &quot;rootParentId&quot;: 1\r\n                                        }\r\n                                    ],\r\n                                    &quot;rootParentId&quot;: 1\r\n                                }\r\n        \r\n    ....\r\n    \r\n        ]\r\n\r\n**Full response:** \r\n\r\n    [{&quot;id&quot;:1,&quot;name&quot;:&quot;Group 1&quot;,&quot;personList&quot;:[{&quot;id&quot;:1,&quot;fullName&quot;:&quot;William&quot;,&quot;children&quot;:[{&quot;id&quot;:2,&quot;fullName&quot;:&quot;Henry&quot;,&quot;children&quot;:[{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:5,&quot;fullName&quot;:&quot;May&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:2,&quot;fullName&quot;:&quot;Henry&quot;,&quot;children&quot;:[{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:5,&quot;fullName&quot;:&quot;May&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:8,&quot;fullName&quot;:&quot;Olivia&quot;,&quot;children&quot;:[{&quot;id&quot;:9,&quot;fullName&quot;:&quot;John&quot;,&quot;children&quot;:[{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:10,&quot;fullName&quot;:&quot;Mary&quot;,&quot;children&quot;:[{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:9,&quot;fullName&quot;:&quot;John&quot;,&quot;children&quot;:[{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:10,&quot;fullName&quot;:&quot;Mary&quot;,&quot;children&quot;:[{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:14,&quot;fullName&quot;:&quot;Eric&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:null}]},{&quot;id&quot;:2,&quot;name&quot;:&quot;Group 2&quot;,&quot;personList&quot;:[{&quot;id&quot;:1,&quot;fullName&quot;:&quot;William&quot;,&quot;children&quot;:[{&quot;id&quot;:2,&quot;fullName&quot;:&quot;Henry&quot;,&quot;children&quot;:[{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:5,&quot;fullName&quot;:&quot;May&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:2,&quot;fullName&quot;:&quot;Henry&quot;,&quot;children&quot;:[{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:5,&quot;fullName&quot;:&quot;May&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:8,&quot;fullName&quot;:&quot;Olivia&quot;,&quot;children&quot;:[{&quot;id&quot;:9,&quot;fullName&quot;:&quot;John&quot;,&quot;children&quot;:[{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:10,&quot;fullName&quot;:&quot;Mary&quot;,&quot;children&quot;:[{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:9,&quot;fullName&quot;:&quot;John&quot;,&quot;children&quot;:[{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:10,&quot;fullName&quot;:&quot;Mary&quot;,&quot;children&quot;:[{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:14,&quot;fullName&quot;:&quot;Eric&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:null}]}]\r\n\r\n**My Classes**\r\n\r\n**Models**\r\n\r\n    @Entity\r\n    @JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\r\n    @EqualsAndHashCode(onlyExplicitlyIncluded = true)\r\n    public class Person {\r\n    \r\n        @Id\r\n        @Getter\r\n        @Setter\r\n        @EqualsAndHashCode.Include\r\n        private Long id;\r\n    \r\n        @Getter\r\n        @Setter\r\n        private String fullName;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @Getter\r\n        @Setter\r\n        @JsonIgnore\r\n        private Person parent;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @Getter\r\n        @Setter\r\n        @JsonIgnore\r\n        private Person rootParent;\r\n    \r\n        @Transient\r\n        @Getter\r\n        @Setter\r\n        public List&lt;Person&gt; children = new ArrayList&lt;&gt;();\r\n    \r\n        public Long getRootParentId() {\r\n            if (parent != null) {\r\n                return parent.getRootParentId();\r\n            } else if (children != null &amp;&amp; !children.isEmpty()) {\r\n                return id;\r\n            } else return null;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n    @Entity\r\n        @JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\r\n        @EqualsAndHashCode(onlyExplicitlyIncluded = true)\r\n        public class Group {\r\n        \r\n            @Id\r\n            @Getter\r\n            @Setter\r\n            @EqualsAndHashCode.Include\r\n            private Long id;\r\n        \r\n            @Getter\r\n            @Setter\r\n            private String name;\r\n        \r\n        }\r\n\r\n**DTO**\r\n\r\n    @Data\r\n    @Builder\r\n    @JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\r\n    public class GroupDTO {\r\n    \r\n        private Long id;\r\n        private String name;\r\n        private List&lt;Person&gt; personList;\r\n    \r\n        public GroupDTO(Group group) {\r\n            this.id = group.getId();\r\n            this.name = group.getName();\r\n        }\r\n    \r\n        public GroupDTO(Long id, String name, List&lt;Person&gt; personList) {\r\n            this.id = id;\r\n            this.name = name;\r\n            this.personList = personList;\r\n        }\r\n    }\r\n\r\n**Repository**\r\n\r\n    @Repository\r\n    public interface PersonRepo extends JpaRepository&lt;Person, Long&gt; {\r\n    \r\n        @Query(&quot;SELECT p FROM Person p &quot;\r\n                + &quot; WHERE p.parent.id IS NULL&quot;)\r\n        List&lt;Person&gt; findRoots();\r\n    \r\n        @Query(&quot;SELECT p FROM Person p&quot;\r\n                + &quot; WHERE p.rootParent.id IN :rootIds &quot;)\r\n        List&lt;Person&gt; findChildrenInRoots(@Param(&quot;rootIds&quot;) List&lt;Long&gt; rootIds);\r\n    \r\n    }\r\n\r\n**Controller**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/v1/person&quot;)\r\n    public class PersonController {\r\n    \r\n        private final PersonRepo personRepo;\r\n    \r\n        public PersonController(PersonRepo personRepo) {\r\n            this.personRepo = personRepo;\r\n        }\r\n        \r\n        @GetMapping(&quot;/tree-list&quot;)\r\n        @Transactional(readOnly = true)\r\n        public List&lt;GroupDTO&gt; getChildrenList() {\r\n            List&lt;Group&gt; groupEntityList = new ArrayList&lt;&gt;();\r\n            for (int i = 1; i &lt;= 2; i++) {\r\n                Group group = new Group();\r\n                group.setId((long) i);\r\n                group.setName(&quot;Group &quot; + i);\r\n                groupEntityList.add(group);\r\n            }\r\n            List&lt;GroupDTO&gt; groupList = groupEntityList.stream().map(GroupDTO::new).collect(Collectors.toList());\r\n    \r\n            groupList.forEach(group -&gt; {\r\n                        List&lt;Person&gt; rootNodes = new ArrayList&lt;&gt;(personRepo.findRoots());\r\n    \r\n                        List&lt;Long&gt; rootNodesIds = rootNodes.stream().map(Person::getId).collect(Collectors.toList());\r\n    \r\n                        List&lt;Person&gt; children = new ArrayList&lt;&gt;(personRepo.findChildrenInRoots(rootNodesIds));\r\n    \r\n                        children.forEach(subCategory -&gt; subCategory.getParent().getChildren().add(subCategory));\r\n                        group.setPersonList(rootNodes);\r\n                    }\r\n            );\r\n            return groupList;\r\n        }\r\n    }\r\n\r\n**Tree data**\r\n\r\n    insert into PERSON values (1,&#39;William&#39;,null, null);\r\n    insert into PERSON values (2,&#39;Henry&#39;,1,1);\r\n    insert into PERSON values (3,&#39;Matt&#39;,2,1);\r\n    insert into PERSON values (4,&#39;Alisa&#39;,2,1);\r\n    insert into PERSON values (5,&#39;May&#39;,1,1);\r\n    insert into PERSON values (6,&#39;Alexa&#39;,4,1);\r\n    insert into PERSON values (7,&#39;Sophi&#39;,3,1);\r\n    insert into PERSON values (8,&#39;Olivia&#39;,null,null);\r\n    insert into PERSON values (9,&#39;John&#39;,8,8);\r\n    insert into PERSON values (10,&#39;Mary&#39;,8,8);\r\n    insert into PERSON values (11,&#39;Oliver&#39;,9,8);\r\n    insert into PERSON values (12,&#39;Mia&#39;,9,8);\r\n    insert into PERSON values (13,&#39;Evelyn&#39;,10,8);\r\n    insert into PERSON values (14,&#39;Eric&#39;,null,null);","title":"Remove duplicate nodes in tree","body":"<p>I have a <code>/tree-list</code> endpoint that returns a list of the <code>Group</code> class where one of its attributes returns data from the <code>Person</code> class in tree format, this works with one record in the list, but when the list has more of a record, the <code>Person</code> tree nodes are duplicated, what should I do to prevent this from happening?</p>\n<p><strong>List with a record:</strong></p>\n<pre><code>[\n    {\n        &quot;id&quot;: 1,\n        &quot;name&quot;: &quot;Group 1&quot;,\n        &quot;personList&quot;: [\n            {\n                &quot;id&quot;: 1,\n                &quot;fullName&quot;: &quot;William&quot;,\n                &quot;children&quot;: [\n                    {\n                        &quot;id&quot;: 2,\n                        &quot;fullName&quot;: &quot;Henry&quot;,\n                        &quot;children&quot;: [\n                            {\n                                &quot;id&quot;: 3,\n                                &quot;fullName&quot;: &quot;Matt&quot;,\n                                &quot;children&quot;: [\n                                    {\n                                        &quot;id&quot;: 7,\n                                        &quot;fullName&quot;: &quot;Sophi&quot;,\n                                        &quot;children&quot;: [],\n                                        &quot;rootParentId&quot;: 1\n                                    }\n                                ],\n                                &quot;rootParentId&quot;: 1\n                            },\n                            {\n                                &quot;id&quot;: 4,\n                                &quot;fullName&quot;: &quot;Alisa&quot;,\n                                &quot;children&quot;: [\n                                    {\n                                        &quot;id&quot;: 6,\n                                        &quot;fullName&quot;: &quot;Alexa&quot;,\n                                        &quot;children&quot;: [],\n                                        &quot;rootParentId&quot;: 1\n                                    }\n                                ],\n                                &quot;rootParentId&quot;: 1\n                            }\n                        ],\n                        &quot;rootParentId&quot;: 1\n                    },\n                    {\n                        &quot;id&quot;: 5,\n                        &quot;fullName&quot;: &quot;May&quot;,\n                        &quot;children&quot;: [],\n                        &quot;rootParentId&quot;: 1\n                    }\n                ],\n                &quot;rootParentId&quot;: 1\n            },\n            {\n                &quot;id&quot;: 8,\n                &quot;fullName&quot;: &quot;Olivia&quot;,\n                &quot;children&quot;: [\n                    {\n                        &quot;id&quot;: 9,\n                        &quot;fullName&quot;: &quot;John&quot;,\n                        &quot;children&quot;: [\n                            {\n                                &quot;id&quot;: 11,\n                                &quot;fullName&quot;: &quot;Oliver&quot;,\n                                &quot;children&quot;: [],\n                                &quot;rootParentId&quot;: 8\n                            },\n                            {\n                                &quot;id&quot;: 12,\n                                &quot;fullName&quot;: &quot;Mia&quot;,\n                                &quot;children&quot;: [],\n                                &quot;rootParentId&quot;: 8\n                            }\n                        ],\n                        &quot;rootParentId&quot;: 8\n                    },\n                    {\n                        &quot;id&quot;: 10,\n                        &quot;fullName&quot;: &quot;Mary&quot;,\n                        &quot;children&quot;: [\n                            {\n                                &quot;id&quot;: 13,\n                                &quot;fullName&quot;: &quot;Evelyn&quot;,\n                                &quot;children&quot;: [],\n                                &quot;rootParentId&quot;: 8\n                            }\n                        ],\n                        &quot;rootParentId&quot;: 8\n                    }\n                ],\n                &quot;rootParentId&quot;: 8\n            },\n            {\n                &quot;id&quot;: 14,\n                &quot;fullName&quot;: &quot;Eric&quot;,\n                &quot;children&quot;: [],\n                &quot;rootParentId&quot;: null\n            }\n        ]\n    }\n]\n</code></pre>\n<p><strong>List with more records:</strong></p>\n<pre><code>[\n    {\n        &quot;id&quot;: 1,\n        &quot;name&quot;: &quot;Group 1&quot;,\n        &quot;personList&quot;: [\n            {\n                &quot;id&quot;: 1,\n                &quot;fullName&quot;: &quot;William&quot;,\n                &quot;children&quot;: [\n                    {\n                        &quot;id&quot;: 2,\n                        &quot;fullName&quot;: &quot;Henry&quot;,\n                        &quot;children&quot;: [\n                            {\n                                &quot;id&quot;: 3,\n                                &quot;fullName&quot;: &quot;Matt&quot;,\n                                &quot;children&quot;: [\n                                    {\n                                        &quot;id&quot;: 7,\n                                        &quot;fullName&quot;: &quot;Sophi&quot;,\n                                        &quot;children&quot;: [],\n                                        &quot;rootParentId&quot;: 1\n                                    },\n                                    {\n                                        &quot;id&quot;: 7,\n                                        &quot;fullName&quot;: &quot;Sophi&quot;,\n                                        &quot;children&quot;: [],\n                                        &quot;rootParentId&quot;: 1\n                                    }\n                                ],\n                                &quot;rootParentId&quot;: 1\n                            },\n                            {\n                                &quot;id&quot;: 4,\n                                &quot;fullName&quot;: &quot;Alisa&quot;,\n                                &quot;children&quot;: [\n                                    {\n                                        &quot;id&quot;: 6,\n                                        &quot;fullName&quot;: &quot;Alexa&quot;,\n                                        &quot;children&quot;: [],\n                                        &quot;rootParentId&quot;: 1\n                                    },\n                                    {\n                                        &quot;id&quot;: 6,\n                                        &quot;fullName&quot;: &quot;Alexa&quot;,\n                                        &quot;children&quot;: [],\n                                        &quot;rootParentId&quot;: 1\n                                    }\n                                ],\n                                &quot;rootParentId&quot;: 1\n                            }\n    \n....\n\n    ]\n</code></pre>\n<p><strong>Full response:</strong></p>\n<pre><code>[{&quot;id&quot;:1,&quot;name&quot;:&quot;Group 1&quot;,&quot;personList&quot;:[{&quot;id&quot;:1,&quot;fullName&quot;:&quot;William&quot;,&quot;children&quot;:[{&quot;id&quot;:2,&quot;fullName&quot;:&quot;Henry&quot;,&quot;children&quot;:[{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:5,&quot;fullName&quot;:&quot;May&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:2,&quot;fullName&quot;:&quot;Henry&quot;,&quot;children&quot;:[{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:5,&quot;fullName&quot;:&quot;May&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:8,&quot;fullName&quot;:&quot;Olivia&quot;,&quot;children&quot;:[{&quot;id&quot;:9,&quot;fullName&quot;:&quot;John&quot;,&quot;children&quot;:[{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:10,&quot;fullName&quot;:&quot;Mary&quot;,&quot;children&quot;:[{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:9,&quot;fullName&quot;:&quot;John&quot;,&quot;children&quot;:[{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:10,&quot;fullName&quot;:&quot;Mary&quot;,&quot;children&quot;:[{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:14,&quot;fullName&quot;:&quot;Eric&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:null}]},{&quot;id&quot;:2,&quot;name&quot;:&quot;Group 2&quot;,&quot;personList&quot;:[{&quot;id&quot;:1,&quot;fullName&quot;:&quot;William&quot;,&quot;children&quot;:[{&quot;id&quot;:2,&quot;fullName&quot;:&quot;Henry&quot;,&quot;children&quot;:[{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:5,&quot;fullName&quot;:&quot;May&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:2,&quot;fullName&quot;:&quot;Henry&quot;,&quot;children&quot;:[{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:3,&quot;fullName&quot;:&quot;Matt&quot;,&quot;children&quot;:[{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:7,&quot;fullName&quot;:&quot;Sophi&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:4,&quot;fullName&quot;:&quot;Alisa&quot;,&quot;children&quot;:[{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1},{&quot;id&quot;:6,&quot;fullName&quot;:&quot;Alexa&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:5,&quot;fullName&quot;:&quot;May&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:1}],&quot;rootParentId&quot;:1},{&quot;id&quot;:8,&quot;fullName&quot;:&quot;Olivia&quot;,&quot;children&quot;:[{&quot;id&quot;:9,&quot;fullName&quot;:&quot;John&quot;,&quot;children&quot;:[{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:10,&quot;fullName&quot;:&quot;Mary&quot;,&quot;children&quot;:[{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:9,&quot;fullName&quot;:&quot;John&quot;,&quot;children&quot;:[{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:11,&quot;fullName&quot;:&quot;Oliver&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:12,&quot;fullName&quot;:&quot;Mia&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:10,&quot;fullName&quot;:&quot;Mary&quot;,&quot;children&quot;:[{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8},{&quot;id&quot;:13,&quot;fullName&quot;:&quot;Evelyn&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8}],&quot;rootParentId&quot;:8},{&quot;id&quot;:14,&quot;fullName&quot;:&quot;Eric&quot;,&quot;children&quot;:[],&quot;rootParentId&quot;:null}]}]\n</code></pre>\n<p><strong>My Classes</strong></p>\n<p><strong>Models</strong></p>\n<pre><code>@Entity\n@JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\npublic class Person {\n\n    @Id\n    @Getter\n    @Setter\n    @EqualsAndHashCode.Include\n    private Long id;\n\n    @Getter\n    @Setter\n    private String fullName;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @Getter\n    @Setter\n    @JsonIgnore\n    private Person parent;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @Getter\n    @Setter\n    @JsonIgnore\n    private Person rootParent;\n\n    @Transient\n    @Getter\n    @Setter\n    public List&lt;Person&gt; children = new ArrayList&lt;&gt;();\n\n    public Long getRootParentId() {\n        if (parent != null) {\n            return parent.getRootParentId();\n        } else if (children != null &amp;&amp; !children.isEmpty()) {\n            return id;\n        } else return null;\n    }\n\n}\n\n\n@Entity\n    @JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\n    @EqualsAndHashCode(onlyExplicitlyIncluded = true)\n    public class Group {\n    \n        @Id\n        @Getter\n        @Setter\n        @EqualsAndHashCode.Include\n        private Long id;\n    \n        @Getter\n        @Setter\n        private String name;\n    \n    }\n</code></pre>\n<p><strong>DTO</strong></p>\n<pre><code>@Data\n@Builder\n@JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\npublic class GroupDTO {\n\n    private Long id;\n    private String name;\n    private List&lt;Person&gt; personList;\n\n    public GroupDTO(Group group) {\n        this.id = group.getId();\n        this.name = group.getName();\n    }\n\n    public GroupDTO(Long id, String name, List&lt;Person&gt; personList) {\n        this.id = id;\n        this.name = name;\n        this.personList = personList;\n    }\n}\n</code></pre>\n<p><strong>Repository</strong></p>\n<pre><code>@Repository\npublic interface PersonRepo extends JpaRepository&lt;Person, Long&gt; {\n\n    @Query(&quot;SELECT p FROM Person p &quot;\n            + &quot; WHERE p.parent.id IS NULL&quot;)\n    List&lt;Person&gt; findRoots();\n\n    @Query(&quot;SELECT p FROM Person p&quot;\n            + &quot; WHERE p.rootParent.id IN :rootIds &quot;)\n    List&lt;Person&gt; findChildrenInRoots(@Param(&quot;rootIds&quot;) List&lt;Long&gt; rootIds);\n\n}\n</code></pre>\n<p><strong>Controller</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/v1/person&quot;)\npublic class PersonController {\n\n    private final PersonRepo personRepo;\n\n    public PersonController(PersonRepo personRepo) {\n        this.personRepo = personRepo;\n    }\n    \n    @GetMapping(&quot;/tree-list&quot;)\n    @Transactional(readOnly = true)\n    public List&lt;GroupDTO&gt; getChildrenList() {\n        List&lt;Group&gt; groupEntityList = new ArrayList&lt;&gt;();\n        for (int i = 1; i &lt;= 2; i++) {\n            Group group = new Group();\n            group.setId((long) i);\n            group.setName(&quot;Group &quot; + i);\n            groupEntityList.add(group);\n        }\n        List&lt;GroupDTO&gt; groupList = groupEntityList.stream().map(GroupDTO::new).collect(Collectors.toList());\n\n        groupList.forEach(group -&gt; {\n                    List&lt;Person&gt; rootNodes = new ArrayList&lt;&gt;(personRepo.findRoots());\n\n                    List&lt;Long&gt; rootNodesIds = rootNodes.stream().map(Person::getId).collect(Collectors.toList());\n\n                    List&lt;Person&gt; children = new ArrayList&lt;&gt;(personRepo.findChildrenInRoots(rootNodesIds));\n\n                    children.forEach(subCategory -&gt; subCategory.getParent().getChildren().add(subCategory));\n                    group.setPersonList(rootNodes);\n                }\n        );\n        return groupList;\n    }\n}\n</code></pre>\n<p><strong>Tree data</strong></p>\n<pre><code>insert into PERSON values (1,'William',null, null);\ninsert into PERSON values (2,'Henry',1,1);\ninsert into PERSON values (3,'Matt',2,1);\ninsert into PERSON values (4,'Alisa',2,1);\ninsert into PERSON values (5,'May',1,1);\ninsert into PERSON values (6,'Alexa',4,1);\ninsert into PERSON values (7,'Sophi',3,1);\ninsert into PERSON values (8,'Olivia',null,null);\ninsert into PERSON values (9,'John',8,8);\ninsert into PERSON values (10,'Mary',8,8);\ninsert into PERSON values (11,'Oliver',9,8);\ninsert into PERSON values (12,'Mia',9,8);\ninsert into PERSON values (13,'Evelyn',10,8);\ninsert into PERSON values (14,'Eric',null,null);\n</code></pre>\n"},{"tags":["java","java-8","migration","java-11","noclassdeffounderror"],"comments":[{"owner":{"account_id":8818198,"reputation":1021,"user_id":6588943,"display_name":"Melvin"},"score":0,"creation_date":1604399988,"post_id":64660619,"comment_id":114330083,"body_markdown":"Most of the time you have just to recompile your source. It means during execution a class which you use hasn&#39;t been found. By moving from Java8 to Java11 class could also be deprecated and therefore are not useable anymore.","body":"Most of the time you have just to recompile your source. It means during execution a class which you use hasn&#39;t been found. By moving from Java8 to Java11 class could also be deprecated and therefore are not useable anymore."},{"owner":{"account_id":14739810,"reputation":21,"user_id":10644717,"display_name":"Vikas Aghav"},"score":0,"creation_date":1604401555,"post_id":64660619,"comment_id":114330772,"body_markdown":"@Melvin - I am moving from java8 to openjdk11 not  java11. Also I recompiled it but it didn&#39;t work.","body":"@Melvin - I am moving from java8 to openjdk11 not  java11. Also I recompiled it but it didn&#39;t work."},{"owner":{"account_id":8818198,"reputation":1021,"user_id":6588943,"display_name":"Melvin"},"score":0,"creation_date":1604577901,"post_id":64660619,"comment_id":114392048,"body_markdown":"OpenJDK11 is Java 11.","body":"OpenJDK11 is Java 11."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1604400815,"creation_date":1604400815,"answer_id":64661427,"question_id":64660619,"body_markdown":"The class `ConstructorAccessorImpl` still exists in the Java 11 codebase, but it is now hidden from access by the modules system.\r\n\r\nYou should look at your codebase to figure out what is using it.  If it is not in your codebase, it might be in a library you are using.  In the latter case, the first thing to check is whether the library version supports Java 9+.","title":"NoClassDefFoundError for ConstructorAccessorImpl in Java 11","body":"<p>The class <code>ConstructorAccessorImpl</code> still exists in the Java 11 codebase, but it is now hidden from access by the modules system.</p>\n<p>You should look at your codebase to figure out what is using it.  If it is not in your codebase, it might be in a library you are using.  In the latter case, the first thing to check is whether the library version supports Java 9+.</p>\n"}],"owner":{"account_id":14739810,"reputation":21,"user_id":10644717,"display_name":"Vikas Aghav"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4224,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1690372191,"creation_date":1604397785,"question_id":64660619,"body_markdown":"I am migrating from java8 to openjdk11 and I am getting following error in compilation\r\n\r\njava.lang.NoClassDefFoundError: jdk/internal/reflect/ConstructorAccessorImpl","title":"NoClassDefFoundError for ConstructorAccessorImpl in Java 11","body":"<p>I am migrating from java8 to openjdk11 and I am getting following error in compilation</p>\n<p>java.lang.NoClassDefFoundError: jdk/internal/reflect/ConstructorAccessorImpl</p>\n"},{"tags":["java","validation","spring-rest","multipartfile"],"answers":[{"tags":[],"owner":{"account_id":4510098,"reputation":83,"user_id":3666482,"display_name":"jokernoel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690371888,"creation_date":1690371888,"answer_id":76770930,"question_id":76770886,"body_markdown":"To validate the elements of a List&lt;MultipartFile&gt;, you&#39;ll need to implement a custom validator. You can achieve this by creating a custom validator that validates each element of the list individually. Here&#39;s an example of how you could do this using Spring&#39;s Validator interface:\r\n\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.validation.Errors;\r\n    import org.springframework.validation.ValidationUtils;\r\n    import org.springframework.validation.Validator;\r\n    import org.springframework.web.multipart.MultipartFile;\r\n    \r\n    @Component\r\n    public class MultipartFileListValidator implements Validator {\r\n    \r\n        private static final int MIN_SIZE = 1;\r\n        private static final int MAX_SIZE = 2;\r\n    \r\n        @Override\r\n        public boolean supports(Class&lt;?&gt; clazz) {\r\n            return List.class.isAssignableFrom(clazz);\r\n        }\r\n    \r\n        @Override\r\n        public void validate(Object target, Errors errors) {\r\n            List&lt;MultipartFile&gt; files = (List&lt;MultipartFile&gt;) target;\r\n            ValidationUtils.rejectIfEmptyOrWhitespace(errors, &quot;files&quot;, &quot;files.empty&quot;, &quot;Files must not be empty&quot;);\r\n    \r\n            if (files.size() &lt; MIN_SIZE || files.size() &gt; MAX_SIZE) {\r\n                errors.rejectValue(&quot;files&quot;, &quot;files.size&quot;, &quot;Invalid number of files&quot;);\r\n            }\r\n    \r\n            for (int i = 0; i &lt; files.size(); i++) {\r\n                MultipartFile file = files.get(i);\r\n                if (file.isEmpty()) {\r\n                    errors.rejectValue(&quot;files[&quot; + i + &quot;]&quot;, &quot;files.empty&quot;, &quot;File must not be empty&quot;);\r\n                }\r\n                // Add additional checks for individual file properties if needed\r\n            }\r\n        }\r\n    }\r\n    \r\n    @RestController\r\n    public class MyController {\r\n    \r\n        private final MultipartFileListValidator validator;\r\n    \r\n        @Autowired\r\n        public MyController(MultipartFileListValidator validator) {\r\n            this.validator = validator;\r\n        }\r\n    \r\n        @PostMapping(&quot;/upload&quot;)\r\n        public ResponseEntity&lt;String&gt; handleFileUpload(@RequestPart(&quot;files&quot;) @Valid List&lt;MultipartFile&gt; files) {\r\n            // Your code to handle file upload\r\n        }\r\n    \r\n        @InitBinder(&quot;files&quot;)\r\n        protected void initBinder(WebDataBinder binder) {\r\n            binder.addValidators(validator);\r\n        }\r\n    }","title":"Validate MultipartFile list size","body":"<p>To validate the elements of a List, you'll need to implement a custom validator. You can achieve this by creating a custom validator that validates each element of the list individually. Here's an example of how you could do this using Spring's Validator interface:</p>\n<pre><code>import org.springframework.stereotype.Component;\nimport org.springframework.validation.Errors;\nimport org.springframework.validation.ValidationUtils;\nimport org.springframework.validation.Validator;\nimport org.springframework.web.multipart.MultipartFile;\n\n@Component\npublic class MultipartFileListValidator implements Validator {\n\n    private static final int MIN_SIZE = 1;\n    private static final int MAX_SIZE = 2;\n\n    @Override\n    public boolean supports(Class&lt;?&gt; clazz) {\n        return List.class.isAssignableFrom(clazz);\n    }\n\n    @Override\n    public void validate(Object target, Errors errors) {\n        List&lt;MultipartFile&gt; files = (List&lt;MultipartFile&gt;) target;\n        ValidationUtils.rejectIfEmptyOrWhitespace(errors, &quot;files&quot;, &quot;files.empty&quot;, &quot;Files must not be empty&quot;);\n\n        if (files.size() &lt; MIN_SIZE || files.size() &gt; MAX_SIZE) {\n            errors.rejectValue(&quot;files&quot;, &quot;files.size&quot;, &quot;Invalid number of files&quot;);\n        }\n\n        for (int i = 0; i &lt; files.size(); i++) {\n            MultipartFile file = files.get(i);\n            if (file.isEmpty()) {\n                errors.rejectValue(&quot;files[&quot; + i + &quot;]&quot;, &quot;files.empty&quot;, &quot;File must not be empty&quot;);\n            }\n            // Add additional checks for individual file properties if needed\n        }\n    }\n}\n\n@RestController\npublic class MyController {\n\n    private final MultipartFileListValidator validator;\n\n    @Autowired\n    public MyController(MultipartFileListValidator validator) {\n        this.validator = validator;\n    }\n\n    @PostMapping(&quot;/upload&quot;)\n    public ResponseEntity&lt;String&gt; handleFileUpload(@RequestPart(&quot;files&quot;) @Valid List&lt;MultipartFile&gt; files) {\n        // Your code to handle file upload\n    }\n\n    @InitBinder(&quot;files&quot;)\n    protected void initBinder(WebDataBinder binder) {\n        binder.addValidators(validator);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16228733,"reputation":26,"user_id":11718232,"display_name":"tabool"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690371888,"creation_date":1690371599,"question_id":76770886,"body_markdown":"I need to limit the number of MultipartFiles sent to Spring Rest API. The annotations from jakarta.validation.constraints don&#39;t work for `List&lt;MultipartFile&gt; files` for some reason, but they do work for lists of other objects, such as `List&lt;String&gt; strings` for example.\r\n\r\n```\r\n        @Valid\r\n        @Size(min = 1, max = 2, message = &quot;files.size&quot;)\r\n        @RequestPart(name = &quot;files&quot;)\r\n        List&lt;MultipartFile&gt; files,\r\n        @Valid\r\n        @Size(min = 1, max = 2, message = &quot;strings.size&quot;)\r\n        @RequestParam(name = &quot;strings&quot;)\r\n        List&lt;String&gt; strings,\r\n```\r\nIn the above example, more than 2 strings are not allowed by validation, but more than 2 files are allowed.\r\n\r\nPlease tell me how, preferably, using annotations to limit the number of files in list for the endpoint","title":"Validate MultipartFile list size","body":"<p>I need to limit the number of MultipartFiles sent to Spring Rest API. The annotations from jakarta.validation.constraints don't work for <code>List&lt;MultipartFile&gt; files</code> for some reason, but they do work for lists of other objects, such as <code>List&lt;String&gt; strings</code> for example.</p>\n<pre><code>        @Valid\n        @Size(min = 1, max = 2, message = &quot;files.size&quot;)\n        @RequestPart(name = &quot;files&quot;)\n        List&lt;MultipartFile&gt; files,\n        @Valid\n        @Size(min = 1, max = 2, message = &quot;strings.size&quot;)\n        @RequestParam(name = &quot;strings&quot;)\n        List&lt;String&gt; strings,\n</code></pre>\n<p>In the above example, more than 2 strings are not allowed by validation, but more than 2 files are allowed.</p>\n<p>Please tell me how, preferably, using annotations to limit the number of files in list for the endpoint</p>\n"},{"tags":["java","vert.x","quarkus"],"comments":[{"owner":{"account_id":385127,"reputation":6284,"user_id":742081,"display_name":"Ladicek"},"score":0,"creation_date":1589350926,"post_id":61756842,"comment_id":109255173,"body_markdown":"What makes you think the `WebClient.create()` call will return an instance of your class? I&#39;m no Vert.x expert, but from what I see in your code (and briefly looking at the `io.vertx.mutiny.ext.web.client.WebClient` generated source code), there&#39;s no way how `WebClient` could instantiate you class.","body":"What makes you think the <code>WebClient.create()</code> call will return an instance of your class? I&#39;m no Vert.x expert, but from what I see in your code (and briefly looking at the <code>io.vertx.mutiny.ext.web.client.WebClient</code> generated source code), there&#39;s no way how <code>WebClient</code> could instantiate you class."},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":1,"creation_date":1589366059,"post_id":61756842,"comment_id":109262740,"body_markdown":"Are you sure you need to subclass WebClient? Maybe using some WebClient related components (listener, observers or other similar things) you can get the desidered result.","body":"Are you sure you need to subclass WebClient? Maybe using some WebClient related components (listener, observers or other similar things) you can get the desidered result."},{"owner":{"account_id":450907,"reputation":1342,"user_id":846488,"accept_rate":56,"display_name":"maxday"},"score":0,"creation_date":1589375529,"post_id":61756842,"comment_id":109268423,"body_markdown":"Actually I want to perform some header manipulation to each request which will go out. for instance Uni&lt;JsonObject&gt; notificationData = usersApiClient.get(&quot;/hello&quot;).send() .For now I am using HttpRequest&lt;Buffer&gt; request = usersApiClient.get(&quot;/hello&quot;) then I do header manipulation in the request object and finally I send it with send(). The thing is don&#39;t want to do this each time for each query. That&#39;s why I am looking for doing this automatically using subclass I want to do an extra step (header manipulation) when instantiating or sending request. Hope this is more clear :)","body":"Actually I want to perform some header manipulation to each request which will go out. for instance Uni&lt;JsonObject&gt; notificationData = usersApiClient.get(&quot;/hello&quot;).send() .For now I am using HttpRequest&lt;Buffer&gt; request = usersApiClient.get(&quot;/hello&quot;) then I do header manipulation in the request object and finally I send it with send(). The thing is don&#39;t want to do this each time for each query. That&#39;s why I am looking for doing this automatically using subclass I want to do an extra step (header manipulation) when instantiating or sending request. Hope this is more clear :)"},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1589437864,"post_id":61756842,"comment_id":109295004,"body_markdown":"Does this answer your question? [How can I add an http interceptor to a Quarkus application?](https://stackoverflow.com/questions/56448061/how-can-i-add-an-http-interceptor-to-a-quarkus-application)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/56448061/how-can-i-add-an-http-interceptor-to-a-quarkus-application\">How can I add an http interceptor to a Quarkus application?</a>"},{"owner":{"account_id":450907,"reputation":1342,"user_id":846488,"accept_rate":56,"display_name":"maxday"},"score":0,"creation_date":1589466137,"post_id":61756842,"comment_id":109310684,"body_markdown":"No :/ since it&#39;s outgoing traffic, those outgoing request does not go through this kind of interceptors","body":"No :/ since it&#39;s outgoing traffic, those outgoing request does not go through this kind of interceptors"},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1589524275,"post_id":61756842,"comment_id":109333691,"body_markdown":"Maybe https://dennis-xlc.gitbooks.io/restful-java-with-jax-rs-2-0-2rd-edition/en/part1/chapter12/reader_and_writer_interceptors.html ?","body":"Maybe <a href=\"https://dennis-xlc.gitbooks.io/restful-java-with-jax-rs-2-0-2rd-edition/en/part1/chapter12/reader_and_writer_interceptors.html\" rel=\"nofollow noreferrer\">dennis-xlc.gitbooks.io/restful-java-with-jax-rs-2-0-2rd-edit&zwnj;&#8203;ion/&hellip;</a> ?"}],"owner":{"account_id":450907,"reputation":1342,"user_id":846488,"accept_rate":56,"display_name":"maxday"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690371656,"creation_date":1589300812,"question_id":61756842,"body_markdown":"I am using vert.x extension with Quarkus and I want to subclass the WebClient\r\n\r\n    @Inject\r\n    Vertx vertx;\r\n\r\n    private CustomWebClient usersApiClient;\r\n    \r\n    @PostConstruct\r\n    void initialize() {\r\n        this.usersApiClient = (CustomWebClient) WebClient.create(vertx, new WebClientOptions()....)\r\n    }\r\n\r\nFor now the CustomWebClient is empty and just extends the web client\r\n\r\n    public class CustomWebClient extends io.vertx.mutiny.ext.web.client.WebClient {\r\n\r\nBut I get a ClassCastException at runtime (in quarkus:dev for instance) \r\n\r\n    Caused by: java.lang.ClassCastException: class io.vertx.mutiny.ext.web.client.WebClient\r\n    cannot be cast to class xxx.CustomWebClient (io.vertx.mutiny.ext.web.client.WebClient is in\r\n    unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @760f1081; \r\n    xxx.CustomWebClient is in unnamed module of loader.\r\n    io.quarkus.bootstrap.classloading.QuarkusClassLoader @55be9b4e)\r\n\r\nDo I need to register this class in the class loader or something ?\r\n","title":"Quarkus + subclass + ClassCastException","body":"<p>I am using vert.x extension with Quarkus and I want to subclass the WebClient</p>\n\n<pre><code>@Inject\nVertx vertx;\n\nprivate CustomWebClient usersApiClient;\n\n@PostConstruct\nvoid initialize() {\n    this.usersApiClient = (CustomWebClient) WebClient.create(vertx, new WebClientOptions()....)\n}\n</code></pre>\n\n<p>For now the CustomWebClient is empty and just extends the web client</p>\n\n<pre><code>public class CustomWebClient extends io.vertx.mutiny.ext.web.client.WebClient {\n</code></pre>\n\n<p>But I get a ClassCastException at runtime (in quarkus:dev for instance) </p>\n\n<pre><code>Caused by: java.lang.ClassCastException: class io.vertx.mutiny.ext.web.client.WebClient\ncannot be cast to class xxx.CustomWebClient (io.vertx.mutiny.ext.web.client.WebClient is in\nunnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @760f1081; \nxxx.CustomWebClient is in unnamed module of loader.\nio.quarkus.bootstrap.classloading.QuarkusClassLoader @55be9b4e)\n</code></pre>\n\n<p>Do I need to register this class in the class loader or something ?</p>\n"},{"tags":["java","ssl-certificate","keystore","keytool"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1690374500,"post_id":76770870,"comment_id":135344108,"body_markdown":"Copy all the certificates (the PEM files) into one PEM file, you can simply append them. And then use the second command of https://stackoverflow.com/a/21144736/150978","body":"Copy all the certificates (the PEM files) into one PEM file, you can simply append them. And then use the second command of <a href=\"https://stackoverflow.com/a/21144736/150978\">stackoverflow.com/a/21144736/150978</a>"}],"owner":{"account_id":1660178,"reputation":5986,"user_id":1562574,"accept_rate":57,"display_name":"Dipak Panchal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690371498,"creation_date":1690371498,"question_id":76770870,"body_markdown":"I am new to configure SSL certification. \r\nI have following file.\r\n- root.pem\r\n- intermediate.pem\r\n- domain.pem\r\n- domain.key\r\n\r\nI want to PKCS12 with four files using OPENSSL tool.\r\nI search many things but I did not get it. Can you please help me how to generate PKCS12 using above 4 files.","title":"How to create PKCS12 From PEM file and Key File","body":"<p>I am new to configure SSL certification.\nI have following file.</p>\n<ul>\n<li>root.pem</li>\n<li>intermediate.pem</li>\n<li>domain.pem</li>\n<li>domain.key</li>\n</ul>\n<p>I want to PKCS12 with four files using OPENSSL tool.\nI search many things but I did not get it. Can you please help me how to generate PKCS12 using above 4 files.</p>\n"},{"tags":["java","swagger","microservices","spark-java"],"comments":[{"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"score":0,"creation_date":1498584019,"post_id":44785105,"comment_id":76553346,"body_markdown":"Can you give us more information about the method that are you applying this Swagger annotations?","body":"Can you give us more information about the method that are you applying this Swagger annotations?"},{"owner":{"account_id":11000564,"reputation":1469,"user_id":8081281,"accept_rate":100,"display_name":"utkarsh31"},"score":0,"creation_date":1498584624,"post_id":44785105,"comment_id":76553664,"body_markdown":"Just updated...should i give u the code also?","body":"Just updated...should i give u the code also?"}],"answers":[{"tags":[],"owner":{"account_id":8064636,"reputation":101,"user_id":6079221,"display_name":"Vinicius de Almeida"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1498648390,"creation_date":1498585559,"answer_id":44786713,"question_id":44785105,"body_markdown":"According to this GitHub [issue][1] on Swagger core project, if you add the annotation `@ApiImplicitParam` should resolve your problem.\r\n\r\n    @ApiImplicitParams({\r\n        @ApiImplicitParam(\r\n            required = true,\r\n            dataType = &quot;com.example.SomeObjectDto&quot;,\r\n            paramType = &quot;body&quot;\r\n        )\r\n    })\r\n\r\nBut normally if you just add the class on your method signature it&#39;ll work.\r\n\r\n    private Object retrieveByName(SomeObjectDto someObjectDto) {\r\n        someCode();\r\n    }\r\n\r\nAlso SomeObjectDto class should contain &quot;get&quot; methods for your variables like.\r\n\r\n    class SomeObjectDto {\r\n        private String info;\r\n\r\n        getInfo(){\r\n            return info;\r\n        }\r\n    }\r\n\r\nWill produce the following JSon.\r\n\r\n&gt; { info: &quot;string&quot; }\r\n\r\n\r\n  [1]: https://github.com/swagger-api/swagger-core/issues/1559#issuecomment-261943276","title":"Swagger datatype not generating docs","body":"<p>According to this GitHub <a href=\"https://github.com/swagger-api/swagger-core/issues/1559#issuecomment-261943276\" rel=\"nofollow noreferrer\">issue</a> on Swagger core project, if you add the annotation <code>@ApiImplicitParam</code> should resolve your problem.</p>\n\n<pre><code>@ApiImplicitParams({\n    @ApiImplicitParam(\n        required = true,\n        dataType = \"com.example.SomeObjectDto\",\n        paramType = \"body\"\n    )\n})\n</code></pre>\n\n<p>But normally if you just add the class on your method signature it'll work.</p>\n\n<pre><code>private Object retrieveByName(SomeObjectDto someObjectDto) {\n    someCode();\n}\n</code></pre>\n\n<p>Also SomeObjectDto class should contain \"get\" methods for your variables like.</p>\n\n<pre><code>class SomeObjectDto {\n    private String info;\n\n    getInfo(){\n        return info;\n    }\n}\n</code></pre>\n\n<p>Will produce the following JSon.</p>\n\n<blockquote>\n  <p>{ info: \"string\" }</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":435422,"reputation":147,"user_id":821990,"display_name":"danidacila"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566920349,"creation_date":1566919908,"answer_id":57678042,"question_id":44785105,"body_markdown":"`ApiImplicitParam` can map a parameter to a correct type, but the type must be detected by swagger, so must be a valid reference.\r\nThe only way I could make this working is by using `additionalModels` method.\r\n\r\nExample in spring-boot:  \r\nconfigure swagger\r\n    \r\n    import springfox.documentation.spring.web.plugins.Docket;\r\n    import com.fasterxml.classmate.TypeResolver;\r\n    ...\r\n\r\n    @Bean\r\n    public Docket api(TypeResolver typeResolver) {\r\n      return new Docket(DocumentationType.SWAGGER_2)\r\n        .groupName(&quot;your-group-rest-api&quot;)\r\n        .select()\r\n        .apis(RequestHandlerSelectors.basePackage(&quot;your.package&quot;))\r\n        .paths(PathSelectors.any())\r\n        .build()\r\n        .additionalModels(typeResolver.resolve(YourModel.class))\r\n        .apiInfo(apiInfo());\r\n    }\r\n\r\ncontroller\r\n    \r\n    @ApiOperation...\r\n    @ApiImplicitParams(\r\n      @ApiImplicitParam(dataType = &quot;YourModel&quot;, name = &quot;requestJson&quot;, paramType = &quot;body&quot;))\r\n    @ApiResponses...\r\n    @RequestMapping...\r\n    public void yourMethod(@RequestBody String requestJson,...)\r\n\r\nOf course, you could have an InputStream parameter for the request and map that to your model.","title":"Swagger datatype not generating docs","body":"<p><code>ApiImplicitParam</code> can map a parameter to a correct type, but the type must be detected by swagger, so must be a valid reference.\nThe only way I could make this working is by using <code>additionalModels</code> method.</p>\n\n<p>Example in spring-boot:<br>\nconfigure swagger</p>\n\n<pre><code>import springfox.documentation.spring.web.plugins.Docket;\nimport com.fasterxml.classmate.TypeResolver;\n...\n\n@Bean\npublic Docket api(TypeResolver typeResolver) {\n  return new Docket(DocumentationType.SWAGGER_2)\n    .groupName(\"your-group-rest-api\")\n    .select()\n    .apis(RequestHandlerSelectors.basePackage(\"your.package\"))\n    .paths(PathSelectors.any())\n    .build()\n    .additionalModels(typeResolver.resolve(YourModel.class))\n    .apiInfo(apiInfo());\n}\n</code></pre>\n\n<p>controller</p>\n\n<pre><code>@ApiOperation...\n@ApiImplicitParams(\n  @ApiImplicitParam(dataType = \"YourModel\", name = \"requestJson\", paramType = \"body\"))\n@ApiResponses...\n@RequestMapping...\npublic void yourMethod(@RequestBody String requestJson,...)\n</code></pre>\n\n<p>Of course, you could have an InputStream parameter for the request and map that to your model.</p>\n"},{"tags":[],"owner":{"account_id":25181248,"reputation":43,"user_id":19022728,"display_name":"alex90bar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690371395,"creation_date":1690371395,"answer_id":76770859,"question_id":44785105,"body_markdown":"I faced the same problem with `ApiImplicitParam`, and after 2 hours of app rebuilding I found out one more solution))\r\n\r\nIt doesn&#39;t look very logical, but it works:\r\n\r\n```\r\n@ApiOperation(value = &quot;Запрос...&quot;, response = Request.class)\r\n    @ApiImplicitParams({\r\n       @ApiImplicitParam(name = &quot;request&quot;, value = &quot;DTO Запрос...&quot;, required = true, \r\n    dataType = &quot;Request&quot;, dataTypeClass = Request.class, paramType = &quot;body&quot;)\r\n    })\r\n    @ApiResponses(value = {\r\n        @ApiResponse(code = 200, message = &quot;Успешный запрос&quot;, response = Response.class),\r\n        @ApiResponse(code = 400, message = &quot;Ошибка в запросе&quot;),\r\n        @ApiResponse(code = 500, message = &quot;Внутренняя ошибка сервера&quot;)\r\n    })\r\n    public Response processRequest(@ApiParam(hidden = true)\r\n    @RequestBody Object request) {\r\n            return service.processRequest(request);\r\n    }\r\n```\r\n\r\nThe key is to set the class of your request DTO in `@ApiOperation` response field, and at the same time to set `@ApiResponses` group of annotations. \r\n\r\nIt seems it helps swagger to detect the type of request correctly.\r\nAnd response is being displayed correctly by swagger as well:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4XVoT.png\r\n\r\nBut of course when I found the solution posted by @danidacila I&#39;ve used it in my app, because it looks much more preferrable and smart and it works as well.","title":"Swagger datatype not generating docs","body":"<p>I faced the same problem with <code>ApiImplicitParam</code>, and after 2 hours of app rebuilding I found out one more solution))</p>\n<p>It doesn't look very logical, but it works:</p>\n<pre><code>@ApiOperation(value = &quot;Запрос...&quot;, response = Request.class)\n    @ApiImplicitParams({\n       @ApiImplicitParam(name = &quot;request&quot;, value = &quot;DTO Запрос...&quot;, required = true, \n    dataType = &quot;Request&quot;, dataTypeClass = Request.class, paramType = &quot;body&quot;)\n    })\n    @ApiResponses(value = {\n        @ApiResponse(code = 200, message = &quot;Успешный запрос&quot;, response = Response.class),\n        @ApiResponse(code = 400, message = &quot;Ошибка в запросе&quot;),\n        @ApiResponse(code = 500, message = &quot;Внутренняя ошибка сервера&quot;)\n    })\n    public Response processRequest(@ApiParam(hidden = true)\n    @RequestBody Object request) {\n            return service.processRequest(request);\n    }\n</code></pre>\n<p>The key is to set the class of your request DTO in <code>@ApiOperation</code> response field, and at the same time to set <code>@ApiResponses</code> group of annotations.</p>\n<p>It seems it helps swagger to detect the type of request correctly.\nAnd response is being displayed correctly by swagger as well:</p>\n<p><a href=\"https://i.stack.imgur.com/4XVoT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4XVoT.png\" alt=\"enter image description here\" /></a></p>\n<p>But of course when I found the solution posted by @danidacila I've used it in my app, because it looks much more preferrable and smart and it works as well.</p>\n"}],"owner":{"account_id":11000564,"reputation":1469,"user_id":8081281,"accept_rate":100,"display_name":"utkarsh31"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6153,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44786713,"answer_count":3,"score":1,"last_activity_date":1690371395,"creation_date":1498579834,"question_id":44785105,"body_markdown":"I have the below code in Swagger,\r\n\r\n    @Path(&quot;/v1&quot;)\r\n        @ApiOperation(value = &quot;POST - Some Value&quot;, nickname = &quot;post-funtion&quot;, consumes = &quot;application/json&quot;, produces = &quot;text/html; charset=UTF-8&quot;, tags = {\r\n        \t\t&quot;Some Controller&quot; })\r\n        @ApiImplicitParams({\r\n        \t\t@ApiImplicitParam(name = &quot;Authorization&quot;, paramType = &quot;header&quot;, dataType = &quot;string&quot;, format = &quot;JWT&quot;, required = false, value = &quot;A User Service JWT&quot;),\r\n        \t\t@ApiImplicitParam(name = &quot;Request&quot;, value = &quot;Request Object&quot;, paramType = &quot;body&quot;, dataType = &quot;org.pkg.SomeRequest&quot;, required = true) })\r\n        @ApiResponses({\r\n        \t\t@ApiResponse(code = 200, message = &quot;Value Added&quot;, response = SomeResponse.class) })\r\n    private Object retrieveByName(Request request, Response response)\r\n    {\r\n    \treturn new RetrieveByNameRqstHandler(catalogService, request, response).handle();\r\n    }\r\n\r\nThe code is supposed to automatically generate default json request depending upon the datatype which in this case is `&quot;org.pkg.SomeRequest&quot;` but there is nothing generated. On the contrary if I change the &quot;org.pkg.SomeRequest&quot; with `&quot;org.pkg.SomeResponse&quot;` there is a default JSON generated for this. Can anybody help me please?\r\n\r\nConsider both classes SomeRequest,SomeResponse have the same code.\r\nThis is the image where I use `&quot;org.pkg.SomeRequest&quot;` in the dataType\r\n[![This is the image where I use `&quot;org.pkg.SomeRequest&quot;` in the dataType][1]][1]\r\n[![This is the image where I use `&quot;org.pkg.SomeResponse&quot;` in the dataType][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4hHCi.png\r\n\r\nThis is the image where I use `&quot;org.pkg.SomeResponse&quot;` in the dataType\r\n  [2]: https://i.stack.imgur.com/BGpCE.png","title":"Swagger datatype not generating docs","body":"<p>I have the below code in Swagger,</p>\n\n<pre><code>@Path(\"/v1\")\n    @ApiOperation(value = \"POST - Some Value\", nickname = \"post-funtion\", consumes = \"application/json\", produces = \"text/html; charset=UTF-8\", tags = {\n            \"Some Controller\" })\n    @ApiImplicitParams({\n            @ApiImplicitParam(name = \"Authorization\", paramType = \"header\", dataType = \"string\", format = \"JWT\", required = false, value = \"A User Service JWT\"),\n            @ApiImplicitParam(name = \"Request\", value = \"Request Object\", paramType = \"body\", dataType = \"org.pkg.SomeRequest\", required = true) })\n    @ApiResponses({\n            @ApiResponse(code = 200, message = \"Value Added\", response = SomeResponse.class) })\nprivate Object retrieveByName(Request request, Response response)\n{\n    return new RetrieveByNameRqstHandler(catalogService, request, response).handle();\n}\n</code></pre>\n\n<p>The code is supposed to automatically generate default json request depending upon the datatype which in this case is <code>\"org.pkg.SomeRequest\"</code> but there is nothing generated. On the contrary if I change the \"org.pkg.SomeRequest\" with <code>\"org.pkg.SomeResponse\"</code> there is a default JSON generated for this. Can anybody help me please?</p>\n\n<p>Consider both classes SomeRequest,SomeResponse have the same code.\nThis is the image where I use <code>\"org.pkg.SomeRequest\"</code> in the dataType\n<a href=\"https://i.stack.imgur.com/4hHCi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4hHCi.png\" alt=\"This is the image where I use &lt;code&gt;&quot;org.pkg.SomeRequest&quot;&lt;/code&gt; in the dataType\"></a>\n<a href=\"https://i.stack.imgur.com/BGpCE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BGpCE.png\" alt=\"This is the image where I use &lt;code&gt;&quot;org.pkg.SomeResponse&quot;&lt;/code&gt; in the dataType\"></a></p>\n\n<p>This is the image where I use <code>\"org.pkg.SomeResponse\"</code> in the dataType</p>\n"},{"tags":["java","antlr","antlr4","java-11"],"comments":[{"owner":{"account_id":6290626,"reputation":19,"user_id":4888455,"display_name":"user4888455"},"score":0,"creation_date":1690205419,"post_id":76754186,"comment_id":135316886,"body_markdown":"@user2340612 Already checked the link you suggested but its not clear on what is the exact issue and how can we resolve it?","body":"@user2340612 Already checked the link you suggested but its not clear on what is the exact issue and how can we resolve it?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1690208093,"post_id":76754186,"comment_id":135317500,"body_markdown":"The exact issue is that on Java 11, user code no longer permitted to access internal JDK classes **unless** you &quot;open&quot; the module via a command line option.  This is explained in the duplink **and** a workaround is given.","body":"The exact issue is that on Java 11, user code no longer permitted to access internal JDK classes <b>unless</b> you &quot;open&quot; the module via a command line option.  This is explained in the duplink <b>and</b> a workaround is given."},{"owner":{"account_id":6290626,"reputation":19,"user_id":4888455,"display_name":"user4888455"},"score":0,"creation_date":1690210660,"post_id":76754186,"comment_id":135318064,"body_markdown":"@StephenC  I did not understand  the workaround you referred to could you please let me know. How can we resolve this?","body":"@StephenC  I did not understand  the workaround you referred to could you please let me know. How can we resolve this?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1690211798,"post_id":76754186,"comment_id":135318335,"body_markdown":"Well you first need to figure out what is loading that internal class.  I suspect it is a dependency of Antlr that has been included the &quot;antlr4-4.9.2-complete.jar&quot;.  Or ... you could just check that you have updated the Antfile to &gt;use&lt; the newer version of the JAR file that you downloaded.","body":"Well you first need to figure out what is loading that internal class.  I suspect it is a dependency of Antlr that has been included the &quot;antlr4-4.9.2-complete.jar&quot;.  Or ... you could just check that you have updated the Antfile to &gt;use&lt; the newer version of the JAR file that you downloaded."},{"owner":{"account_id":6290626,"reputation":19,"user_id":4888455,"display_name":"user4888455"},"score":0,"creation_date":1690302922,"post_id":76754186,"comment_id":135333317,"body_markdown":"Checked the whole codebase and also i am seeing that jdk.internal.reflect.ConstructorAccessorImpl is their in openjdk11 too      \nBinary file bin/jre-11/lib/server/libjvm.so matches\nbin/jre-11/lib/classlist:jdk/internal/reflect/ConstructorAccessorImpl\nBinary file bin/jre11/lib/server/libjvm.so matches\nbin/jre11/lib/classlist:jdk/internal/reflect/ConstructorAccessorImpl\nBinary file jmods/java.base.jmod matches\nBinary file lib/modules matches\nBinary file lib/src.zip matches\nBinary file lib/server/libjvm.so matches\nlib/classlist:jdk/internal/reflect/ConstructorAccessorImpl,\nstill error?","body":"Checked the whole codebase and also i am seeing that jdk.internal.reflect.ConstructorAccessorImpl is their in openjdk11 too       Binary file bin/jre-11/lib/server/libjvm.so matches bin/jre-11/lib/classlist:jdk/internal/reflect/ConstructorAcc&zwnj;&#8203;essorImpl Binary file bin/jre11/lib/server/libjvm.so matches bin/jre11/lib/classlist:jdk/internal/reflect/ConstructorAcce&zwnj;&#8203;ssorImpl Binary file jmods/java.base.jmod matches Binary file lib/modules matches Binary file lib/src.zip matches Binary file lib/server/libjvm.so matches lib/classlist:jdk/internal/reflect/ConstructorAccessorImpl, still error?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1690327663,"post_id":76754186,"comment_id":135337334,"body_markdown":"That&#39;s not the point.  Only the Java SE code should be using (i.e. naming) that class.  But *something else* is apparently attempting to use it too.  That attempt is what is leading to the class loading error.  There should be some trace of this in either your code, the Antlr JAR or some other 3rd-party dependency you are using.  And (possibly) in the full stacktrace for the classloader error as well.","body":"That&#39;s not the point.  Only the Java SE code should be using (i.e. naming) that class.  But <i>something else</i> is apparently attempting to use it too.  That attempt is what is leading to the class loading error.  There should be some trace of this in either your code, the Antlr JAR or some other 3rd-party dependency you are using.  And (possibly) in the full stacktrace for the classloader error as well."},{"owner":{"account_id":6290626,"reputation":19,"user_id":4888455,"display_name":"user4888455"},"score":0,"creation_date":1690356218,"post_id":76754186,"comment_id":135340243,"body_markdown":"Added full stack trace of the error.","body":"Added full stack trace of the error."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690371329,"creation_date":1690370106,"answer_id":76770681,"question_id":76754186,"body_markdown":"OK ... my initial diagnosis (in the comments) was wrong.  \r\n\r\nI think that the actual problem is in the Ant tool.  Specifically, Ant&#39;s custom classloader is triggering an old JDK bug: https://bugs.openjdk.org/browse/JDK-6265952.  As you can see from the report, it is a long standing bug that only occurs in obscure circumstances. \r\n\r\nThe Ant issue is: https://bz.apache.org/bugzilla/show_bug.cgi?id=59556\r\n\r\nFortunately, the fix for you should be simple.  Upgrade to Ant 1.9.8 or 1.10.0 or later.   (The version of Antlr won&#39;t matter for this ... probably.)\r\n\r\n","title":"After migrating from JDK1.8 to openjdk11 getting java.lang.NoClassDefFoundError: jdk/internal/reflect/ConstructorAccessorImpl error","body":"<p>OK ... my initial diagnosis (in the comments) was wrong.</p>\n<p>I think that the actual problem is in the Ant tool.  Specifically, Ant's custom classloader is triggering an old JDK bug: <a href=\"https://bugs.openjdk.org/browse/JDK-6265952\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-6265952</a>.  As you can see from the report, it is a long standing bug that only occurs in obscure circumstances.</p>\n<p>The Ant issue is: <a href=\"https://bz.apache.org/bugzilla/show_bug.cgi?id=59556\" rel=\"nofollow noreferrer\">https://bz.apache.org/bugzilla/show_bug.cgi?id=59556</a></p>\n<p>Fortunately, the fix for you should be simple.  Upgrade to Ant 1.9.8 or 1.10.0 or later.   (The version of Antlr won't matter for this ... probably.)</p>\n"}],"owner":{"account_id":6290626,"reputation":19,"user_id":4888455,"display_name":"user4888455"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1690450286,"answer_count":1,"score":0,"last_activity_date":1690371329,"creation_date":1690199312,"question_id":76754186,"body_markdown":"while generating parser using antlr4-4.9.2-complete.jar,I am getting the below error\r\n\r\n   \r\n\r\n&gt;      [java] java.lang.NoClassDefFoundError: jdk/internal/reflect/ConstructorAccessorImpl\r\n&gt;     [java] \tat org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:194)\r\n&gt;     [java] \tat org.apache.tools.ant.taskdefs.Java.run(Java.java:771)\r\n&gt;     [java] \tat org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:221)\r\n&gt;     [java] \tat org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135)\r\n&gt;     [java] \tat org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)\r\n&gt;     [java] \tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)\r\n&gt;     [java] \tat jdk.internal.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt;     [java] \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n&gt;     [java] \tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\r\n&gt;     [java] \tat org.apache.tools.ant.Task.perform(Task.java:348)\r\n&gt;     [java] \tat org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)\r\n&gt;     [java] \tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)\r\n&gt;     [java] \tat jdk.internal.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt;     [java] \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n&gt;     [java] \tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\r\n&gt;     [java] \tat org.apache.tools.ant.Task.perform(Task.java:348)\r\n&gt;     [java] \tat org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:396)\r\n&gt;     [java] \tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)\r\n&gt;     [java] \tat jdk.internal.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt;     [java] \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n&gt;     [java] \tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\r\n&gt;     [java] \tat org.apache.tools.ant.Task.perform(Task.java:348)\r\n&gt;     [java] \tat org.apache.tools.ant.Target.execute(Target.java:435)\r\n&gt;     [java] \tat org.apache.tools.ant.Target.performTasks(Target.java:456)\r\n&gt;     [java] \tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1393)\r\n&gt;     [java] \tat org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)\r\n&gt;     [java] \tat org.apache.tools.ant.Project.executeTargets(Project.java:1248)\r\n&gt;     [java] \tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:440)\r\n&gt;     [java] \tat org.apache.tools.ant.AntBridge.call(AntBridge.java:61)\r\n&gt;     [java] \tat org.apache.tools.ant.AntBridge.call(AntBridge.java:17)\r\n&gt;     [java] \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n&gt;     [java] \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n&gt;     [java] \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n&gt;     [java] \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n&gt;     [java] Caused by: java.lang.NoClassDefFoundError: jdk/internal/reflect/ConstructorAccessorImpl\r\n&gt;     [java] \tat java.base/jdk.internal.misc.Unsafe.defineClass0(Native Method)\r\n&gt;     [java] \tat java.base/jdk.internal.misc.Unsafe.defineClass(Unsafe.java:1192)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.ClassDefiner.defineClass(ClassDefiner.java:63)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.MethodAccessorGenerator$1.run(MethodAccessorGenerator.java:400)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.MethodAccessorGenerator$1.run(MethodAccessorGenerator.java:394)\r\n&gt;     [java] \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.MethodAccessorGenerator.generate(MethodAccessorGenerator.java:393)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.MethodAccessorGenerator.generateConstructor(MethodAccessorGenerator.java:92)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:55)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n&gt;     [java] \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n&gt;     [java] \tat org.antlr.v4.automata.ParserATNFactory.newState(ParserATNFactory.java:724)\r\n&gt;     [java] \tat org.antlr.v4.automata.ParserATNFactory.createRuleStartAndStopATNStates(ParserATNFactory.java:663)\r\n&gt;     [java] \tat org.antlr.v4.automata.ParserATNFactory._createATN(ParserATNFactory.java:157)\r\n&gt;     [java] \tat org.antlr.v4.automata.LexerATNFactory.createATN(LexerATNFactory.java:105)\r\n&gt;     [java] \tat org.antlr.v4.Tool.processNonCombinedGrammar(Tool.java:384)\r\n&gt;     [java] \tat org.antlr.v4.Tool.process(Tool.java:359)\r\n&gt;     [java] \tat org.antlr.v4.Tool.processGrammarsOnCommandLine(Tool.java:318)\r\n&gt;     [java] \tat org.antlr.v4.Tool.main(Tool.java:162)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\r\n&gt; Method)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt;     [java] \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt;     [java] \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n&gt;     [java] \tat org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:217)\r\n&gt;     [java] \tat org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:152)\r\n&gt;     [java] \t... 36 more\r\n&gt;     [java] Caused by: java.lang.ClassNotFoundException: jdk.internal.reflect.ConstructorAccessorImpl\r\n&gt;     [java] \tat org.apache.tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1366)\r\n&gt;     [java] \tat org.apache.tools.ant.AntClassLoader.findClass(AntClassLoader.java:1315)\r\n&gt;     [java] \tat org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:1074)\r\n&gt;     [java] \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n&gt;     [java] \t... 61 more\r\n&gt;     [java] Java Result: -1\r\n&gt;     [copy] error(114): TopoExpressionParser.g4:3:23: cannot find tokens file\r\n&gt; /home/patana1/workspace/trunk-build-java11/src/java/com/grammar/DefaultLexer.tokens\r\n\r\n    for the code\r\n    \r\n    &lt;macrodef name=&quot;generate-parser&quot;&gt;\r\n                &lt;attribute name=&quot;grammar&quot;/&gt;\r\n                &lt;sequential&gt;\r\n                    &lt;property name=&quot;src.grammar.dir&quot; location=&quot;${src.java.dir}/grammar&quot; /&gt;\r\n                    &lt;property name=&quot;src.grammar.generated.dir&quot; location=&quot;${src.java.generated.dir}/grammar&quot; /&gt;\r\n        \r\n                    &lt;java classname=&quot;org.antlr.v4.Tool&quot; &gt;\r\n                        &lt;classpath&gt;\r\n                            &lt;pathelement path=&quot;${libs.dir}/antlr4-4.9.2-complete.jar&quot; /&gt;\r\n                        &lt;/classpath&gt;\r\n                        &lt;arg value=&quot;-o&quot; /&gt;\r\n                        &lt;arg value=&quot;${src.grammar.generated.dir}&quot; /&gt;\r\n                        &lt;arg value=&quot;${src.grammar.dir}/@{grammar}.g4&quot; /&gt;\r\n                    &lt;/java&gt;\r\n                &lt;/sequential&gt;\r\n            &lt;/macrodef&gt;\r\n    \r\n    &lt;target name=&quot;generate-all-parsers&quot;&gt;\r\n            &lt;generate-parser grammar=&quot;DefaultLexer&quot;/&gt;\r\n    &lt;/target&gt;\r\n\r\nTried with latest antlr-4.13.0-complete.jar too but still same error can anyone please assist?\r\n","title":"After migrating from JDK1.8 to openjdk11 getting java.lang.NoClassDefFoundError: jdk/internal/reflect/ConstructorAccessorImpl error","body":"<p>while generating parser using antlr4-4.9.2-complete.jar,I am getting the below error</p>\n<blockquote>\n<pre><code> [java] java.lang.NoClassDefFoundError: jdk/internal/reflect/ConstructorAccessorImpl\n[java]    at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:194)\n[java]    at org.apache.tools.ant.taskdefs.Java.run(Java.java:771)\n[java]    at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:221)\n[java]    at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135)\n[java]    at org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)\n[java]    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)\n[java]    at jdk.internal.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n[java]    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[java]    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n[java]    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n[java]    at org.apache.tools.ant.Task.perform(Task.java:348)\n[java]    at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)\n[java]    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)\n[java]    at jdk.internal.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n[java]    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[java]    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n[java]    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n[java]    at org.apache.tools.ant.Task.perform(Task.java:348)\n[java]    at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:396)\n[java]    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)\n[java]    at jdk.internal.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n[java]    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[java]    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n[java]    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n[java]    at org.apache.tools.ant.Task.perform(Task.java:348)\n[java]    at org.apache.tools.ant.Target.execute(Target.java:435)\n[java]    at org.apache.tools.ant.Target.performTasks(Target.java:456)\n[java]    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1393)\n[java]    at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)\n[java]    at org.apache.tools.ant.Project.executeTargets(Project.java:1248)\n[java]    at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:440)\n[java]    at org.apache.tools.ant.AntBridge.call(AntBridge.java:61)\n[java]    at org.apache.tools.ant.AntBridge.call(AntBridge.java:17)\n[java]    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n[java]    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n[java]    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n[java]    at java.base/java.lang.Thread.run(Thread.java:834)\n[java] Caused by: java.lang.NoClassDefFoundError: jdk/internal/reflect/ConstructorAccessorImpl\n[java]    at java.base/jdk.internal.misc.Unsafe.defineClass0(Native Method)\n[java]    at java.base/jdk.internal.misc.Unsafe.defineClass(Unsafe.java:1192)\n[java]    at java.base/jdk.internal.reflect.ClassDefiner.defineClass(ClassDefiner.java:63)\n[java]    at java.base/jdk.internal.reflect.MethodAccessorGenerator$1.run(MethodAccessorGenerator.java:400)\n[java]    at java.base/jdk.internal.reflect.MethodAccessorGenerator$1.run(MethodAccessorGenerator.java:394)\n[java]    at java.base/java.security.AccessController.doPrivileged(Native Method)\n[java]    at java.base/jdk.internal.reflect.MethodAccessorGenerator.generate(MethodAccessorGenerator.java:393)\n[java]    at java.base/jdk.internal.reflect.MethodAccessorGenerator.generateConstructor(MethodAccessorGenerator.java:92)\n[java]    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:55)\n[java]    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n[java]    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n[java]    at org.antlr.v4.automata.ParserATNFactory.newState(ParserATNFactory.java:724)\n[java]    at org.antlr.v4.automata.ParserATNFactory.createRuleStartAndStopATNStates(ParserATNFactory.java:663)\n[java]    at org.antlr.v4.automata.ParserATNFactory._createATN(ParserATNFactory.java:157)\n[java]    at org.antlr.v4.automata.LexerATNFactory.createATN(LexerATNFactory.java:105)\n[java]    at org.antlr.v4.Tool.processNonCombinedGrammar(Tool.java:384)\n[java]    at org.antlr.v4.Tool.process(Tool.java:359)\n[java]    at org.antlr.v4.Tool.processGrammarsOnCommandLine(Tool.java:318)\n[java]    at org.antlr.v4.Tool.main(Tool.java:162)\n[java]    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\n</code></pre>\n<p>Method)\n[java]    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n[java]    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[java]    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n[java]    at org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:217)\n[java]    at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:152)\n[java]    ... 36 more\n[java] Caused by: java.lang.ClassNotFoundException: jdk.internal.reflect.ConstructorAccessorImpl\n[java]    at org.apache.tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1366)\n[java]    at org.apache.tools.ant.AntClassLoader.findClass(AntClassLoader.java:1315)\n[java]    at org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:1074)\n[java]    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n[java]    ... 61 more\n[java] Java Result: -1\n[copy] error(114): TopoExpressionParser.g4:3:23: cannot find tokens file\n/home/patana1/workspace/trunk-build-java11/src/java/com/grammar/DefaultLexer.tokens</p>\n</blockquote>\n<pre><code>for the code\n\n&lt;macrodef name=&quot;generate-parser&quot;&gt;\n            &lt;attribute name=&quot;grammar&quot;/&gt;\n            &lt;sequential&gt;\n                &lt;property name=&quot;src.grammar.dir&quot; location=&quot;${src.java.dir}/grammar&quot; /&gt;\n                &lt;property name=&quot;src.grammar.generated.dir&quot; location=&quot;${src.java.generated.dir}/grammar&quot; /&gt;\n    \n                &lt;java classname=&quot;org.antlr.v4.Tool&quot; &gt;\n                    &lt;classpath&gt;\n                        &lt;pathelement path=&quot;${libs.dir}/antlr4-4.9.2-complete.jar&quot; /&gt;\n                    &lt;/classpath&gt;\n                    &lt;arg value=&quot;-o&quot; /&gt;\n                    &lt;arg value=&quot;${src.grammar.generated.dir}&quot; /&gt;\n                    &lt;arg value=&quot;${src.grammar.dir}/@{grammar}.g4&quot; /&gt;\n                &lt;/java&gt;\n            &lt;/sequential&gt;\n        &lt;/macrodef&gt;\n\n&lt;target name=&quot;generate-all-parsers&quot;&gt;\n        &lt;generate-parser grammar=&quot;DefaultLexer&quot;/&gt;\n&lt;/target&gt;\n</code></pre>\n<p>Tried with latest antlr-4.13.0-complete.jar too but still same error can anyone please assist?</p>\n"},{"tags":["java","mongodb","micronaut"],"comments":[{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1690291419,"post_id":76762838,"comment_id":135330563,"body_markdown":"Edit you code please, also the answer is there is no bean of MongoRepositoryOperation in you IOC coctainner.","body":"Edit you code please, also the answer is there is no bean of MongoRepositoryOperation in you IOC coctainner."},{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1690291497,"post_id":76762838,"comment_id":135330583,"body_markdown":"Also see here https://stackoverflow.com/questions/70113424/application-wont-start-as-mongooperations-bean-is-not-defined please.","body":"Also see here <a href=\"https://stackoverflow.com/questions/70113424/application-wont-start-as-mongooperations-bean-is-not-defined\" title=\"application wont start as mongooperations bean is not defined\">stackoverflow.com/questions/70113424/&hellip;</a> please."}],"owner":{"account_id":26417951,"reputation":1,"user_id":22282281,"display_name":"Thiago Felizardo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690370060,"creation_date":1690289095,"question_id":76762838,"body_markdown":"No bean of type [io.micronaut.data.mongodb.operations.MongoRepositoryOperations] exists. Make sure the bean is not disabled by bean requirements (enable trace logging for &#39;io.micronaut.context.condition&#39; to check) and if the bean is enabled then ensure the class is declared a bean and annotation processing is enabled (for Java and Kotlin the &#39;micronaut-inject-java&#39; dependency should be configured as an annotation processor). \r\nI&#39;m using MongoDB as a database raised in docker as a container here are my codes with pom xml and docker compose \r\n\r\nI already tried to put some dependencies but I couldn&#39;t run it, it will always give this error when I make a request in postman\r\n\r\n\r\n`Entity`\r\n\r\n```\r\npackage br.com.entity;\r\n\r\nimport io.micronaut.core.annotation.Creator;\r\nimport io.micronaut.core.annotation.Introspected;\r\nimport io.micronaut.data.annotation.GeneratedValue;\r\nimport io.micronaut.data.annotation.Id;\r\nimport io.micronaut.data.annotation.MappedEntity;\r\nimport io.micronaut.serde.annotation.Serdeable;\r\nimport jakarta.validation.constraints.NotBlank;\r\nimport jakarta.validation.constraints.NotEmpty;\r\nimport jakarta.validation.constraints.NotNull;\r\nimport org.bson.types.ObjectId;\r\n\r\n\r\n@Introspected\r\n@MappedEntity(&quot;Person&quot;)\r\n@Serdeable\r\npublic class Person {\r\n\r\n    @Id\r\n    @GeneratedValue(GeneratedValue.Type.IDENTITY)\r\n    private ObjectId id;\r\n    @NotNull\r\n    @NotBlank\r\n    private String name;\r\n    @NotNull\r\n    @NotBlank\r\n    private int age;\r\n    @NotNull\r\n    @NotEmpty\r\n    private String gender;\r\n\r\n    @Creator\r\n    public Person(@NotNull String name,\r\n                  @NotNull int age,\r\n                  @NotEmpty String gender) {\r\n        this.name = name;\r\n        this.age = age;\r\n        this.gender = gender;\r\n    }\r\n    public Person(){\r\n    }\r\n    public String getName() {\r\n        return name;\r\n    }\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n    public ObjectId getId() {\r\n        return id;\r\n    }\r\n    public void setId(ObjectId id) {\r\n        this.id = id;\r\n    }\r\n    public int getAge() {\r\n        return age;\r\n    }\r\n    public void setAge(int age) {\r\n        this.age = age;\r\n    }\r\n    public String getGender() {\r\n        return gender;\r\n    }\r\n    public void setGender(String gender) {\r\n        this.gender = gender;\r\n    }\r\n}\r\n```\r\n`Repository`\r\n\r\n```\r\npackage br.com.repository;\r\n\r\nimport br.com.entity.Person;\r\nimport io.micronaut.data.mongodb.annotation.MongoRepository;\r\nimport io.micronaut.data.repository.CrudRepository;\r\nimport org.bson.types.ObjectId;\r\n\r\n\r\n\r\n@MongoRepository\r\npublic interface PersonRepository extends CrudRepository&lt;Person, ObjectId&gt; {\r\n}\r\n\r\n\r\n```\r\n\r\n`Service`\r\n```\r\npackage br.com.service;\r\n\r\nimport br.com.Person;\r\nimport jakarta.validation.constraints.NotEmpty;\r\nimport jakarta.validation.constraints.NotNull;\r\nimport org.bson.types.ObjectId;\r\n\r\nimport java.util.Optional;\r\n\r\n\r\npublic interface PersonService {\r\n\r\n    Optional&lt;Person&gt; findById(@NotNull ObjectId id);\r\n\r\n    Person save(@NotNull Person person);\r\n\r\n    void deleteById(ObjectId id);\r\n\r\n    Iterable&lt;Person&gt;  findAll();\r\n\r\n    Person update(@NotNull ObjectId id, @NotEmpty Person updatedPerson);\r\n}\r\n\r\n```\r\n\r\n`Service implent`\r\n\r\n```\r\npackage br.com.service;\r\n\r\nimport br.com.entity.Person;\r\nimport br.com.repository.PersonRepository;\r\nimport io.micronaut.core.annotation.NonNull;\r\nimport io.micronaut.data.exceptions.EmptyResultException;\r\nimport jakarta.inject.Inject;\r\nimport jakarta.inject.Singleton;\r\nimport jakarta.validation.constraints.NotEmpty;\r\nimport jakarta.validation.constraints.NotNull;\r\nimport org.bson.types.ObjectId;\r\nimport java.util.Optional;\r\n\r\n\r\n\r\n@Singleton\r\npublic class PersonServiceImpl implements PersonService {\r\n\r\n    @Inject\r\n    private PersonRepository personRepository;\r\n\r\n    public PersonServiceImpl(PersonRepository personRepository) {\r\n        this.personRepository = personRepository;\r\n    }\r\n\r\n    public Optional&lt;Person&gt; findById(@NonNull ObjectId personId) {\r\n        return personRepository.findById(personId);\r\n    }\r\n\r\n    public Person save(Person person) {\r\n        return personRepository.save(person);\r\n    }\r\n\r\n\r\n    public void deleteById(ObjectId personId) {\r\n        personRepository.deleteById(personId);\r\n    }\r\n\r\n    public Iterable&lt;Person&gt; findAll() {\r\n        return personRepository.findAll();\r\n    }\r\n\r\n    public Person update(@NotNull ObjectId id, @NotEmpty Person updatedPerson) {\r\n\r\n        Optional&lt;Person&gt; optionalPerson = findById(id);\r\n\r\n        if (optionalPerson.isPresent()) {\r\n\r\n            Person existingPerson = optionalPerson.get();\r\n\r\n            existingPerson.setName(updatedPerson.getName());\r\n            existingPerson.setAge(updatedPerson.getAge());\r\n            existingPerson.setGender(updatedPerson.getGender());\r\n            return personRepository.update(existingPerson);\r\n        } else {\r\n            throw new EmptyResultException();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n`Controller`\r\n```\r\npackage br.com.controller;\r\n\r\nimport br.com.entity.Person;\r\nimport br.com.service.PersonServiceImpl;\r\nimport io.micronaut.http.HttpResponse;\r\nimport io.micronaut.http.annotation.*;\r\nimport jakarta.validation.Valid;\r\nimport org.bson.types.ObjectId;\r\nimport java.util.Optional;\r\n\r\n\r\n@Controller(&quot;/api/person&quot;)\r\npublic class PersonController {\r\n\r\n    private PersonServiceImpl personService;\r\n\r\n    public PersonController(PersonServiceImpl personService) {\r\n        this.personService = personService;\r\n    }\r\n\r\n    @Get(&quot;/{personId}&quot;)\r\n    public HttpResponse&lt;Person&gt; findById(@PathVariable @Valid ObjectId personId) {\r\n        Optional&lt;Person&gt; person = personService.findById(personId);\r\n        return person.map(HttpResponse::ok).orElseGet(HttpResponse::notFound);\r\n    }\r\n\r\n    @Post\r\n    public HttpResponse&lt;Person&gt; save(@Body Person person) {\r\n        Person savedPerson = personService.save(person);\r\n        return HttpResponse.created(savedPerson);\r\n    }\r\n\r\n    @Delete(&quot;/{personId}&quot;)\r\n    public HttpResponse&lt;?&gt; deleteById(@PathVariable ObjectId personId) {\r\n        personService.deleteById(personId);\r\n        return HttpResponse.noContent();\r\n    }\r\n\r\n    @Get\r\n    public HttpResponse&lt;Iterable&lt;Person&gt;&gt; findAll() {\r\n        Iterable&lt;Person&gt; persons = personService.findAll();\r\n        return HttpResponse.ok(persons);\r\n    }\r\n\r\n    @Put(&quot;/{id}&quot;)\r\n    public HttpResponse&lt;Person&gt; update(@PathVariable ObjectId id, @Body @Valid Person updatedPerson) {\r\n        Person updated = personService.update(id, updatedPerson);\r\n        return HttpResponse.ok(updated);\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n\r\n    micronaut:\r\n      application:\r\n        name: AtividadeCrud\r\n        logging:\r\n          level:\r\n            io.micronaut.context.condition: TRACE\r\n\r\n    datasources:\r\n      default:\r\n        url: mongodb://127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+1.10.1\r\n        database: atividadeDB\r\n        driver-class-name: io.micronaut.configuration.mongo.sync.MongoSyncDriver\r\n\r\n    mongodb:\r\n      uri: mongodb://127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+1.10.1\r\n      databases:\r\n        mongodb-uri: mongodb://127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+1.10.1\r\n        database: atividadeDB\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;br.com&lt;/groupId&gt;\r\n  &lt;artifactId&gt;AtividadeCrud&lt;/artifactId&gt;\r\n  &lt;version&gt;0.1&lt;/version&gt;\r\n  &lt;packaging&gt;${packaging}&lt;/packaging&gt;\r\n\r\n  &lt;parent&gt;\r\n    &lt;groupId&gt;io.micronaut.platform&lt;/groupId&gt;\r\n    &lt;artifactId&gt;micronaut-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.0&lt;/version&gt;\r\n  &lt;/parent&gt;\r\n  &lt;properties&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;jdk.version&gt;17&lt;/jdk.version&gt;\r\n    &lt;release.version&gt;17&lt;/release.version&gt;\r\n    &lt;micronaut.version&gt;4.0.0&lt;/micronaut.version&gt;\r\n    &lt;micronaut.aot.enabled&gt;false&lt;/micronaut.aot.enabled&gt;\r\n    &lt;micronaut.aot.packageName&gt;br.com.aot.generated&lt;/micronaut.aot.packageName&gt;\r\n    &lt;micronaut.data.version&gt;4.0.1&lt;/micronaut.data.version&gt;\r\n    &lt;micronaut.runtime&gt;netty&lt;/micronaut.runtime&gt;\r\n    &lt;exec.mainClass&gt;br.com.Application&lt;/exec.mainClass&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;repositories&gt;\r\n    &lt;repository&gt;\r\n      &lt;id&gt;sonatype-snapshots&lt;/id&gt;\r\n      &lt;url&gt;https://s01.oss.sonatype.org/content/repositories/snapshots/&lt;/url&gt;\r\n      &lt;snapshots&gt;\r\n        &lt;enabled&gt;true&lt;/enabled&gt;\r\n      &lt;/snapshots&gt;\r\n      &lt;releases&gt;\r\n        &lt;enabled&gt;false&lt;/enabled&gt;\r\n      &lt;/releases&gt;\r\n    &lt;/repository&gt;\r\n    &lt;repository&gt;\r\n      &lt;id&gt;central&lt;/id&gt;\r\n      &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\r\n    &lt;/repository&gt;\r\n  &lt;/repositories&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n      &lt;artifactId&gt;micronaut-http-server-netty&lt;/artifactId&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.micronaut.data&lt;/groupId&gt;\r\n      &lt;artifactId&gt;micronaut-data-mongodb&lt;/artifactId&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.micronaut.mongodb&lt;/groupId&gt;\r\n      &lt;artifactId&gt;micronaut-mongo-sync&lt;/artifactId&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.micronaut.serde&lt;/groupId&gt;\r\n      &lt;artifactId&gt;micronaut-serde-jackson&lt;/artifactId&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.micronaut.validation&lt;/groupId&gt;\r\n      &lt;artifactId&gt;micronaut-validation&lt;/artifactId&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;jakarta.validation&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n      &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n      &lt;artifactId&gt;micronaut-http-client&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.micronaut.test&lt;/groupId&gt;\r\n      &lt;artifactId&gt;micronaut-test-junit5&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mongodb&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n      &lt;artifactId&gt;testcontainers&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mongodb-driver-reactivestreams&lt;/artifactId&gt;\r\n      &lt;version&gt;4.10.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;io.micronaut.maven&lt;/groupId&gt;\r\n        &lt;artifactId&gt;micronaut-maven-plugin&lt;/artifactId&gt;\r\n          &lt;configuration&gt;\r\n            &lt;configFile&gt;aot-${packaging}.properties&lt;/configFile&gt;\r\n          &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;!-- Uncomment to enable incremental compilation --&gt;\r\n          &lt;!-- &lt;useIncrementalCompilation&gt;false&lt;/useIncrementalCompilation&gt; --&gt;\r\n\r\n          &lt;annotationProcessorPaths combine.self=&quot;override&quot;&gt;\r\n\r\n\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n              &lt;artifactId&gt;micronaut-inject-java&lt;/artifactId&gt;\r\n              &lt;version&gt;${micronaut.core.version}&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;io.micronaut.data&lt;/groupId&gt;\r\n              &lt;artifactId&gt;micronaut-data-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${micronaut.data.version}&lt;/version&gt;\r\n              &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                  &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;micronaut-inject&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n              &lt;/exclusions&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;io.micronaut.data&lt;/groupId&gt;\r\n              &lt;artifactId&gt;micronaut-data-document-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${micronaut.data.version}&lt;/version&gt;\r\n              &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                  &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;micronaut-inject&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n              &lt;/exclusions&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n              &lt;artifactId&gt;micronaut-graal&lt;/artifactId&gt;\r\n              &lt;version&gt;${micronaut.core.version}&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n              &lt;artifactId&gt;micronaut-http-validation&lt;/artifactId&gt;\r\n              &lt;version&gt;${micronaut.version}&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;io.micronaut.serde&lt;/groupId&gt;\r\n              &lt;artifactId&gt;micronaut-serde-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${micronaut.serialization.version}&lt;/version&gt;\r\n              &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                  &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;micronaut-inject&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n              &lt;/exclusions&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;io.micronaut.validation&lt;/groupId&gt;\r\n              &lt;artifactId&gt;micronaut-validation-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${micronaut.validation.version}&lt;/version&gt;\r\n              &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                  &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;micronaut-inject&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n              &lt;/exclusions&gt;\r\n            &lt;/path&gt;\r\n          &lt;/annotationProcessorPaths&gt;\r\n          &lt;compilerArgs&gt;\r\n            &lt;arg&gt;-Amicronaut.processing.group=br.com.phoebus&lt;/arg&gt;\r\n            &lt;arg&gt;-Amicronaut.processing.module=AtividadeCrud&lt;/arg&gt;\r\n          &lt;/compilerArgs&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n","title":"No bean of type [io.micronaut.data.mongodb.operations.MongoRepositoryOperations] exists","body":"<p>No bean of type [io.micronaut.data.mongodb.operations.MongoRepositoryOperations] exists. Make sure the bean is not disabled by bean requirements (enable trace logging for 'io.micronaut.context.condition' to check) and if the bean is enabled then ensure the class is declared a bean and annotation processing is enabled (for Java and Kotlin the 'micronaut-inject-java' dependency should be configured as an annotation processor).\nI'm using MongoDB as a database raised in docker as a container here are my codes with pom xml and docker compose</p>\n<p>I already tried to put some dependencies but I couldn't run it, it will always give this error when I make a request in postman</p>\n<p><code>Entity</code></p>\n<pre><code>package br.com.entity;\n\nimport io.micronaut.core.annotation.Creator;\nimport io.micronaut.core.annotation.Introspected;\nimport io.micronaut.data.annotation.GeneratedValue;\nimport io.micronaut.data.annotation.Id;\nimport io.micronaut.data.annotation.MappedEntity;\nimport io.micronaut.serde.annotation.Serdeable;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotEmpty;\nimport jakarta.validation.constraints.NotNull;\nimport org.bson.types.ObjectId;\n\n\n@Introspected\n@MappedEntity(&quot;Person&quot;)\n@Serdeable\npublic class Person {\n\n    @Id\n    @GeneratedValue(GeneratedValue.Type.IDENTITY)\n    private ObjectId id;\n    @NotNull\n    @NotBlank\n    private String name;\n    @NotNull\n    @NotBlank\n    private int age;\n    @NotNull\n    @NotEmpty\n    private String gender;\n\n    @Creator\n    public Person(@NotNull String name,\n                  @NotNull int age,\n                  @NotEmpty String gender) {\n        this.name = name;\n        this.age = age;\n        this.gender = gender;\n    }\n    public Person(){\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public ObjectId getId() {\n        return id;\n    }\n    public void setId(ObjectId id) {\n        this.id = id;\n    }\n    public int getAge() {\n        return age;\n    }\n    public void setAge(int age) {\n        this.age = age;\n    }\n    public String getGender() {\n        return gender;\n    }\n    public void setGender(String gender) {\n        this.gender = gender;\n    }\n}\n</code></pre>\n<p><code>Repository</code></p>\n<pre><code>package br.com.repository;\n\nimport br.com.entity.Person;\nimport io.micronaut.data.mongodb.annotation.MongoRepository;\nimport io.micronaut.data.repository.CrudRepository;\nimport org.bson.types.ObjectId;\n\n\n\n@MongoRepository\npublic interface PersonRepository extends CrudRepository&lt;Person, ObjectId&gt; {\n}\n\n\n</code></pre>\n<p><code>Service</code></p>\n<pre><code>package br.com.service;\n\nimport br.com.Person;\nimport jakarta.validation.constraints.NotEmpty;\nimport jakarta.validation.constraints.NotNull;\nimport org.bson.types.ObjectId;\n\nimport java.util.Optional;\n\n\npublic interface PersonService {\n\n    Optional&lt;Person&gt; findById(@NotNull ObjectId id);\n\n    Person save(@NotNull Person person);\n\n    void deleteById(ObjectId id);\n\n    Iterable&lt;Person&gt;  findAll();\n\n    Person update(@NotNull ObjectId id, @NotEmpty Person updatedPerson);\n}\n\n</code></pre>\n<p><code>Service implent</code></p>\n<pre><code>package br.com.service;\n\nimport br.com.entity.Person;\nimport br.com.repository.PersonRepository;\nimport io.micronaut.core.annotation.NonNull;\nimport io.micronaut.data.exceptions.EmptyResultException;\nimport jakarta.inject.Inject;\nimport jakarta.inject.Singleton;\nimport jakarta.validation.constraints.NotEmpty;\nimport jakarta.validation.constraints.NotNull;\nimport org.bson.types.ObjectId;\nimport java.util.Optional;\n\n\n\n@Singleton\npublic class PersonServiceImpl implements PersonService {\n\n    @Inject\n    private PersonRepository personRepository;\n\n    public PersonServiceImpl(PersonRepository personRepository) {\n        this.personRepository = personRepository;\n    }\n\n    public Optional&lt;Person&gt; findById(@NonNull ObjectId personId) {\n        return personRepository.findById(personId);\n    }\n\n    public Person save(Person person) {\n        return personRepository.save(person);\n    }\n\n\n    public void deleteById(ObjectId personId) {\n        personRepository.deleteById(personId);\n    }\n\n    public Iterable&lt;Person&gt; findAll() {\n        return personRepository.findAll();\n    }\n\n    public Person update(@NotNull ObjectId id, @NotEmpty Person updatedPerson) {\n\n        Optional&lt;Person&gt; optionalPerson = findById(id);\n\n        if (optionalPerson.isPresent()) {\n\n            Person existingPerson = optionalPerson.get();\n\n            existingPerson.setName(updatedPerson.getName());\n            existingPerson.setAge(updatedPerson.getAge());\n            existingPerson.setGender(updatedPerson.getGender());\n            return personRepository.update(existingPerson);\n        } else {\n            throw new EmptyResultException();\n        }\n    }\n}\n\n</code></pre>\n<p><code>Controller</code></p>\n<pre><code>package br.com.controller;\n\nimport br.com.entity.Person;\nimport br.com.service.PersonServiceImpl;\nimport io.micronaut.http.HttpResponse;\nimport io.micronaut.http.annotation.*;\nimport jakarta.validation.Valid;\nimport org.bson.types.ObjectId;\nimport java.util.Optional;\n\n\n@Controller(&quot;/api/person&quot;)\npublic class PersonController {\n\n    private PersonServiceImpl personService;\n\n    public PersonController(PersonServiceImpl personService) {\n        this.personService = personService;\n    }\n\n    @Get(&quot;/{personId}&quot;)\n    public HttpResponse&lt;Person&gt; findById(@PathVariable @Valid ObjectId personId) {\n        Optional&lt;Person&gt; person = personService.findById(personId);\n        return person.map(HttpResponse::ok).orElseGet(HttpResponse::notFound);\n    }\n\n    @Post\n    public HttpResponse&lt;Person&gt; save(@Body Person person) {\n        Person savedPerson = personService.save(person);\n        return HttpResponse.created(savedPerson);\n    }\n\n    @Delete(&quot;/{personId}&quot;)\n    public HttpResponse&lt;?&gt; deleteById(@PathVariable ObjectId personId) {\n        personService.deleteById(personId);\n        return HttpResponse.noContent();\n    }\n\n    @Get\n    public HttpResponse&lt;Iterable&lt;Person&gt;&gt; findAll() {\n        Iterable&lt;Person&gt; persons = personService.findAll();\n        return HttpResponse.ok(persons);\n    }\n\n    @Put(&quot;/{id}&quot;)\n    public HttpResponse&lt;Person&gt; update(@PathVariable ObjectId id, @Body @Valid Person updatedPerson) {\n        Person updated = personService.update(id, updatedPerson);\n        return HttpResponse.ok(updated);\n    }\n}\n\n\n</code></pre>\n\n<pre><code>micronaut:\n  application:\n    name: AtividadeCrud\n    logging:\n      level:\n        io.micronaut.context.condition: TRACE\n\ndatasources:\n  default:\n    url: mongodb://127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+1.10.1\n    database: atividadeDB\n    driver-class-name: io.micronaut.configuration.mongo.sync.MongoSyncDriver\n\nmongodb:\n  uri: mongodb://127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+1.10.1\n  databases:\n    mongodb-uri: mongodb://127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+1.10.1\n    database: atividadeDB\n</code></pre>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;br.com&lt;/groupId&gt;\n  &lt;artifactId&gt;AtividadeCrud&lt;/artifactId&gt;\n  &lt;version&gt;0.1&lt;/version&gt;\n  &lt;packaging&gt;${packaging}&lt;/packaging&gt;\n\n  &lt;parent&gt;\n    &lt;groupId&gt;io.micronaut.platform&lt;/groupId&gt;\n    &lt;artifactId&gt;micronaut-parent&lt;/artifactId&gt;\n    &lt;version&gt;4.0.0&lt;/version&gt;\n  &lt;/parent&gt;\n  &lt;properties&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;jdk.version&gt;17&lt;/jdk.version&gt;\n    &lt;release.version&gt;17&lt;/release.version&gt;\n    &lt;micronaut.version&gt;4.0.0&lt;/micronaut.version&gt;\n    &lt;micronaut.aot.enabled&gt;false&lt;/micronaut.aot.enabled&gt;\n    &lt;micronaut.aot.packageName&gt;br.com.aot.generated&lt;/micronaut.aot.packageName&gt;\n    &lt;micronaut.data.version&gt;4.0.1&lt;/micronaut.data.version&gt;\n    &lt;micronaut.runtime&gt;netty&lt;/micronaut.runtime&gt;\n    &lt;exec.mainClass&gt;br.com.Application&lt;/exec.mainClass&gt;\n  &lt;/properties&gt;\n\n  &lt;repositories&gt;\n    &lt;repository&gt;\n      &lt;id&gt;sonatype-snapshots&lt;/id&gt;\n      &lt;url&gt;https://s01.oss.sonatype.org/content/repositories/snapshots/&lt;/url&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;true&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n      &lt;releases&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/releases&gt;\n    &lt;/repository&gt;\n    &lt;repository&gt;\n      &lt;id&gt;central&lt;/id&gt;\n      &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\n    &lt;/repository&gt;\n  &lt;/repositories&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n      &lt;artifactId&gt;micronaut-http-server-netty&lt;/artifactId&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.micronaut.data&lt;/groupId&gt;\n      &lt;artifactId&gt;micronaut-data-mongodb&lt;/artifactId&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.micronaut.mongodb&lt;/groupId&gt;\n      &lt;artifactId&gt;micronaut-mongo-sync&lt;/artifactId&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.micronaut.serde&lt;/groupId&gt;\n      &lt;artifactId&gt;micronaut-serde-jackson&lt;/artifactId&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.micronaut.validation&lt;/groupId&gt;\n      &lt;artifactId&gt;micronaut-validation&lt;/artifactId&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;jakarta.validation&lt;/groupId&gt;\n      &lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n      &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n      &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n      &lt;artifactId&gt;micronaut-http-client&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.micronaut.test&lt;/groupId&gt;\n      &lt;artifactId&gt;micronaut-test-junit5&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n      &lt;artifactId&gt;mongodb&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n      &lt;artifactId&gt;testcontainers&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n      &lt;artifactId&gt;mongodb-driver-reactivestreams&lt;/artifactId&gt;\n      &lt;version&gt;4.10.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;io.micronaut.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;micronaut-maven-plugin&lt;/artifactId&gt;\n          &lt;configuration&gt;\n            &lt;configFile&gt;aot-${packaging}.properties&lt;/configFile&gt;\n          &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;!-- Uncomment to enable incremental compilation --&gt;\n          &lt;!-- &lt;useIncrementalCompilation&gt;false&lt;/useIncrementalCompilation&gt; --&gt;\n\n          &lt;annotationProcessorPaths combine.self=&quot;override&quot;&gt;\n\n\n            &lt;path&gt;\n              &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n              &lt;artifactId&gt;micronaut-inject-java&lt;/artifactId&gt;\n              &lt;version&gt;${micronaut.core.version}&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;io.micronaut.data&lt;/groupId&gt;\n              &lt;artifactId&gt;micronaut-data-processor&lt;/artifactId&gt;\n              &lt;version&gt;${micronaut.data.version}&lt;/version&gt;\n              &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                  &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n                  &lt;artifactId&gt;micronaut-inject&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n              &lt;/exclusions&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;io.micronaut.data&lt;/groupId&gt;\n              &lt;artifactId&gt;micronaut-data-document-processor&lt;/artifactId&gt;\n              &lt;version&gt;${micronaut.data.version}&lt;/version&gt;\n              &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                  &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n                  &lt;artifactId&gt;micronaut-inject&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n              &lt;/exclusions&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n              &lt;artifactId&gt;micronaut-graal&lt;/artifactId&gt;\n              &lt;version&gt;${micronaut.core.version}&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n              &lt;artifactId&gt;micronaut-http-validation&lt;/artifactId&gt;\n              &lt;version&gt;${micronaut.version}&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;io.micronaut.serde&lt;/groupId&gt;\n              &lt;artifactId&gt;micronaut-serde-processor&lt;/artifactId&gt;\n              &lt;version&gt;${micronaut.serialization.version}&lt;/version&gt;\n              &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                  &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n                  &lt;artifactId&gt;micronaut-inject&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n              &lt;/exclusions&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;io.micronaut.validation&lt;/groupId&gt;\n              &lt;artifactId&gt;micronaut-validation-processor&lt;/artifactId&gt;\n              &lt;version&gt;${micronaut.validation.version}&lt;/version&gt;\n              &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                  &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n                  &lt;artifactId&gt;micronaut-inject&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n              &lt;/exclusions&gt;\n            &lt;/path&gt;\n          &lt;/annotationProcessorPaths&gt;\n          &lt;compilerArgs&gt;\n            &lt;arg&gt;-Amicronaut.processing.group=br.com.phoebus&lt;/arg&gt;\n            &lt;arg&gt;-Amicronaut.processing.module=AtividadeCrud&lt;/arg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java","connection-pooling","apache-httpclient-5.x"],"comments":[{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1690358521,"post_id":76769107,"comment_id":135340694,"body_markdown":"Please ask only one question per question. Your last question is a separate concern and should be asked in a separate question.","body":"Please ask only one question per question. Your last question is a separate concern and should be asked in a separate question."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1690361861,"post_id":76769107,"comment_id":135341363,"body_markdown":"This is not clear question. Why do you think the documentation is contradictory?","body":"This is not clear question. Why do you think the documentation is contradictory?"}],"answers":[{"tags":[],"owner":{"account_id":27810413,"reputation":456,"user_id":21232911,"display_name":"nischal sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690358524,"creation_date":1690358524,"answer_id":76769143,"question_id":76769107,"body_markdown":"the points are not contradicting, creating a new instance of `CloseableHttpClient` is expensive, but it is also fully thread-safe, so multiple threads can use the same instance of `CloseableHttpClient` to execute multiple requests concurrently.\r\n\r\nTo change credentials for different requests that use the same client, you can use the `CredentialsProvider` class to manage your credentials. \r\n\r\n```python\r\nimport org.apache.http.auth.AuthScope\r\nimport org.apache.http.auth.UsernamePasswordCredentials\r\nimport org.apache.http.client.CredentialsProvider\r\nimport org.apache.http.impl.client.BasicCredentialsProvider\r\nimport org.apache.http.impl.client.CloseableHttpClient\r\nimport org.apache.http.impl.client.HttpClients\r\n\r\n# Create a credentials provider and set the credentials for a specific AuthScope\r\ncreds_provider = BasicCredentialsProvider()\r\ncreds_provider.set_credentials(AuthScope(&quot;localhost&quot;, 8080), UsernamePasswordCredentials(&quot;user1&quot;, &quot;password1&quot;))\r\n\r\n# Create an HttpClientBuilder and set the credentials provider\r\nhttp_client_builder = HttpClients.custom().setDefaultCredentialsProvider(creds_provider)\r\n\r\n# Build the CloseableHttpClient instance\r\nhttp_client = http_client_builder.build()\r\n\r\n# Use the CloseableHttpClient instance to execute your requests\r\nresponse1 = http_client.execute(request1)\r\nresponse2 = http_client.execute(request2)\r\n\r\n# Set different credentials for a different AuthScope\r\ncreds_provider.set_credentials(AuthScope(&quot;localhost&quot;, 8081), UsernamePasswordCredentials(&quot;user2&quot;, &quot;password2&quot;))\r\n\r\n# Use the same CloseableHttpClient instance to execute another request with different credentials\r\nresponse3 = http_client.execute(request3)\r\n```\r\n","title":"httpclient5 with connection pooling in java","body":"<p>the points are not contradicting, creating a new instance of <code>CloseableHttpClient</code> is expensive, but it is also fully thread-safe, so multiple threads can use the same instance of <code>CloseableHttpClient</code> to execute multiple requests concurrently.</p>\n<p>To change credentials for different requests that use the same client, you can use the <code>CredentialsProvider</code> class to manage your credentials.</p>\n<pre class=\"lang-py prettyprint-override\"><code>import org.apache.http.auth.AuthScope\nimport org.apache.http.auth.UsernamePasswordCredentials\nimport org.apache.http.client.CredentialsProvider\nimport org.apache.http.impl.client.BasicCredentialsProvider\nimport org.apache.http.impl.client.CloseableHttpClient\nimport org.apache.http.impl.client.HttpClients\n\n# Create a credentials provider and set the credentials for a specific AuthScope\ncreds_provider = BasicCredentialsProvider()\ncreds_provider.set_credentials(AuthScope(&quot;localhost&quot;, 8080), UsernamePasswordCredentials(&quot;user1&quot;, &quot;password1&quot;))\n\n# Create an HttpClientBuilder and set the credentials provider\nhttp_client_builder = HttpClients.custom().setDefaultCredentialsProvider(creds_provider)\n\n# Build the CloseableHttpClient instance\nhttp_client = http_client_builder.build()\n\n# Use the CloseableHttpClient instance to execute your requests\nresponse1 = http_client.execute(request1)\nresponse2 = http_client.execute(request2)\n\n# Set different credentials for a different AuthScope\ncreds_provider.set_credentials(AuthScope(&quot;localhost&quot;, 8081), UsernamePasswordCredentials(&quot;user2&quot;, &quot;password2&quot;))\n\n# Use the same CloseableHttpClient instance to execute another request with different credentials\nresponse3 = http_client.execute(request3)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5613556,"reputation":2315,"user_id":4445625,"accept_rate":50,"display_name":"Marc Stroebel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690369619,"creation_date":1690369619,"answer_id":76770606,"question_id":76769107,"body_markdown":"depends on your auth type... for e.g. basic auth just set the header manually for each request\r\n\r\n    final HttpGet request = new HttpGet(URL_SECURED_BY_BASIC_AUTHENTICATION);\r\n    final String auth = DEFAULT_USER + &quot;:&quot; + DEFAULT_PASS;\r\n    final byte[] encodedAuth = Base64.encodeBase64(auth.getBytes(StandardCharsets.ISO_8859_1));\r\n    final String authHeader = &quot;Basic &quot; + new String(encodedAuth);\r\n    request.setHeader(HttpHeaders.AUTHORIZATION, authHeader);\r\n\r\nhttps://www.baeldung.com/httpclient-basic-authentication","title":"httpclient5 with connection pooling in java","body":"<p>depends on your auth type... for e.g. basic auth just set the header manually for each request</p>\n<pre><code>final HttpGet request = new HttpGet(URL_SECURED_BY_BASIC_AUTHENTICATION);\nfinal String auth = DEFAULT_USER + &quot;:&quot; + DEFAULT_PASS;\nfinal byte[] encodedAuth = Base64.encodeBase64(auth.getBytes(StandardCharsets.ISO_8859_1));\nfinal String authHeader = &quot;Basic &quot; + new String(encodedAuth);\nrequest.setHeader(HttpHeaders.AUTHORIZATION, authHeader);\n</code></pre>\n<p><a href=\"https://www.baeldung.com/httpclient-basic-authentication\" rel=\"nofollow noreferrer\">https://www.baeldung.com/httpclient-basic-authentication</a></p>\n"}],"owner":{"account_id":27891295,"reputation":25,"user_id":21297617,"display_name":"ketan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1690369619,"creation_date":1690358173,"question_id":76769107,"body_markdown":"I am trying to use httpclient5 with connection pooling. Below are some of the points mentioned in documentation:\r\n\r\n&gt; `CloseableHttpClient` instances should be closed when no longer needed\r\n&gt; or about to go out of score.\r\n&gt; \r\n&gt; IMPORTANT: Always re-use `CloseableHttpClient` instances. They are\r\n&gt; expensive to create, but they are also fully thread safe, so multiple\r\n&gt; threads can use the same instance of `CloseableHttpClient` to execute\r\n&gt; multiple requests concurrently taking full advantage of persistent\r\n&gt; connection re-use and connection pooling.\r\n\r\nI feel both of them feels contradictory. How should I proceed with this? \r\nAlso in case if I am reusing `CloseableHttpClient` instances how can I change credentials for different requests which uses same client?","title":"httpclient5 with connection pooling in java","body":"<p>I am trying to use httpclient5 with connection pooling. Below are some of the points mentioned in documentation:</p>\n<blockquote>\n<p><code>CloseableHttpClient</code> instances should be closed when no longer needed\nor about to go out of score.</p>\n<p>IMPORTANT: Always re-use <code>CloseableHttpClient</code> instances. They are\nexpensive to create, but they are also fully thread safe, so multiple\nthreads can use the same instance of <code>CloseableHttpClient</code> to execute\nmultiple requests concurrently taking full advantage of persistent\nconnection re-use and connection pooling.</p>\n</blockquote>\n<p>I feel both of them feels contradictory. How should I proceed with this?\nAlso in case if I am reusing <code>CloseableHttpClient</code> instances how can I change credentials for different requests which uses same client?</p>\n"},{"tags":["java","performance","spring-boot","express"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1579536039,"post_id":59826877,"comment_id":105790563,"body_markdown":"Does https://dzone.com/articles/web-development-comparison-springboot-vs-expressjs help you?","body":"Does <a href=\"https://dzone.com/articles/web-development-comparison-springboot-vs-expressjs\" rel=\"nofollow noreferrer\">dzone.com/articles/&hellip;</a> help you?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1579536114,"post_id":59826877,"comment_id":105790600,"body_markdown":"Or https://www.techempower.com/benchmarks/#section=data-r9 or https://github.com/networknt/microservices-framework-benchmark/blob/master/README.md","body":"Or <a href=\"https://www.techempower.com/benchmarks/#section=data-r9\" rel=\"nofollow noreferrer\">techempower.com/benchmarks/#section=data-r9</a> or <a href=\"https://github.com/networknt/microservices-framework-benchmark/blob/master/README.md\" rel=\"nofollow noreferrer\">github.com/networknt/microservices-framework-benchmark/blob/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":432092,"reputation":689868,"user_id":816620,"accept_rate":64,"display_name":"jfriend00"},"score":0,"creation_date":1579545086,"post_id":59826877,"comment_id":105794708,"body_markdown":"Oh, and node.js does have threads, both internally and for you to program with - [WorkerThreads](https://nodejs.org/api/worker_threads.html).  Also, you would code for scale differently in node.js than other environments so one can&#39;t really evaluate two environments if you&#39;re using the exact same approach for scaling with both.  You have to know each environment and code to its strength to successfully evaluate what it is capable of.  Also watch out for the memory usage and CPU effectiveness with purely threaded solutions as the number of requests in flight at the same time increases.","body":"Oh, and node.js does have threads, both internally and for you to program with - <a href=\"https://nodejs.org/api/worker_threads.html\" rel=\"nofollow noreferrer\">WorkerThreads</a>.  Also, you would code for scale differently in node.js than other environments so one can&#39;t really evaluate two environments if you&#39;re using the exact same approach for scaling with both.  You have to know each environment and code to its strength to successfully evaluate what it is capable of.  Also watch out for the memory usage and CPU effectiveness with purely threaded solutions as the number of requests in flight at the same time increases."}],"answers":[{"tags":[],"owner":{"account_id":15544168,"reputation":15,"user_id":11213967,"display_name":"PARV_GOUR"},"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1631122392,"creation_date":1631122065,"answer_id":69107377,"question_id":59826877,"body_markdown":"Yes, the similar thing I have observed express is much slower as compared to Spring Boot, Spring boot gives the best performance because it is powered by Java, (JVM - architecture) which uses Just In Time compiler to boost the performance...\r\n\r\nYou can definitely go for Spring Boot, which is the beast !!","title":"Can anybody confirm that ExpressJS is slower than Spring Boot?","body":"<p>Yes, the similar thing I have observed express is much slower as compared to Spring Boot, Spring boot gives the best performance because it is powered by Java, (JVM - architecture) which uses Just In Time compiler to boost the performance...</p>\n<p>You can definitely go for Spring Boot, which is the beast !!</p>\n"},{"tags":[],"owner":{"account_id":28974987,"reputation":1,"user_id":22194311,"display_name":"L&#234; C&#244;ng Kỳ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690369597,"creation_date":1688805104,"answer_id":76642052,"question_id":59826877,"body_markdown":"I use autocannon (npm) to loadtest and the result:\r\n\r\n**Express.js**\r\n\r\nRunning 10s test @ http://localhost:3000/&lt;br /&gt;\r\n10 connections\r\n\r\n| Stat     | 2.5% | 50% | 97.5% | 99% | Avg     | Stdev   | Max   |\r\n|----------|------|-----|-------|-----|---------|---------|-------|\r\n| Latency  | 0 ms | 1 ms| 4 ms  | 7 ms| 1.16 ms | 1.25 ms | 20 ms |\r\n\r\n\r\n| Stat      | 1%     | 2.5%   | 50%     | 97.5%  | Avg     | Stdev  | Min    |\r\n|-----------|--------|--------|---------|--------|---------|--------|--------|\r\n| Req/Sec   | 5011   | 5011   | 6351    | 6671   | 6024.91 | 640.58 | 5010   |\r\n| Bytes/Sec | 1.2 MB | 1.2 MB | 1.52 MB | 1.6 MB | 1.45 MB | 154 kB | 1.2 MB |\r\n\r\n\r\nReq/Bytes counts sampled once per second.&lt;br /&gt;\r\n\\# of samples: 11&lt;br /&gt;\r\n66k requests in 11.03s, 15.9 MB read\r\n\r\n---\r\n\r\n**Springboot**\r\n\r\nRunning 10s test @ http://localhost:8080/employee&lt;br /&gt;\r\n10 connections\r\n\r\n| Stat    | 2.5% | 50%   | 97.5%  | 99%    | Avg     | Stdev    | Max    |\r\n|---------|------|-------|--------|--------|---------|----------|--------|\r\n| Latency | 2 ms | 42 ms | 131 ms | 142 ms | 51.6 ms | 38.29 ms | 207 ms |\r\n\r\n\r\n| Stat      | 1%      | 2.5%    | 50%     | 97.5%   | Avg     | Stdev   | Min     |\r\n|-----------|---------|---------|---------|---------|---------|---------|---------|\r\n| Req/Sec   | 10455   | 10455   | 12959   | 17199   | 14020   | 2638.61 | 10454   |\r\n| Bytes/Sec | 1.26 MB | 1.26 MB | 1.56 MB | 2.07 MB | 1.69 MB | 319 kB  | 1.26 MB |\r\n\r\n\r\nReq/Bytes counts sampled once per second.&lt;br /&gt;\r\n\\# of samples: 10&lt;br /&gt;\r\n142k requests in 10.04s, 16.9 MB read","title":"Can anybody confirm that ExpressJS is slower than Spring Boot?","body":"<p>I use autocannon (npm) to loadtest and the result:</p>\n<p><strong>Express.js</strong></p>\n<p>Running 10s test @ http://localhost:3000/<br />\n10 connections</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Stat</th>\n<th>2.5%</th>\n<th>50%</th>\n<th>97.5%</th>\n<th>99%</th>\n<th>Avg</th>\n<th>Stdev</th>\n<th>Max</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Latency</td>\n<td>0 ms</td>\n<td>1 ms</td>\n<td>4 ms</td>\n<td>7 ms</td>\n<td>1.16 ms</td>\n<td>1.25 ms</td>\n<td>20 ms</td>\n</tr>\n</tbody>\n</table>\n</div><div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Stat</th>\n<th>1%</th>\n<th>2.5%</th>\n<th>50%</th>\n<th>97.5%</th>\n<th>Avg</th>\n<th>Stdev</th>\n<th>Min</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Req/Sec</td>\n<td>5011</td>\n<td>5011</td>\n<td>6351</td>\n<td>6671</td>\n<td>6024.91</td>\n<td>640.58</td>\n<td>5010</td>\n</tr>\n<tr>\n<td>Bytes/Sec</td>\n<td>1.2 MB</td>\n<td>1.2 MB</td>\n<td>1.52 MB</td>\n<td>1.6 MB</td>\n<td>1.45 MB</td>\n<td>154 kB</td>\n<td>1.2 MB</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Req/Bytes counts sampled once per second.<br />\n# of samples: 11<br />\n66k requests in 11.03s, 15.9 MB read</p>\n<hr />\n<p><strong>Springboot</strong></p>\n<p>Running 10s test @ http://localhost:8080/employee<br />\n10 connections</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Stat</th>\n<th>2.5%</th>\n<th>50%</th>\n<th>97.5%</th>\n<th>99%</th>\n<th>Avg</th>\n<th>Stdev</th>\n<th>Max</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Latency</td>\n<td>2 ms</td>\n<td>42 ms</td>\n<td>131 ms</td>\n<td>142 ms</td>\n<td>51.6 ms</td>\n<td>38.29 ms</td>\n<td>207 ms</td>\n</tr>\n</tbody>\n</table>\n</div><div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Stat</th>\n<th>1%</th>\n<th>2.5%</th>\n<th>50%</th>\n<th>97.5%</th>\n<th>Avg</th>\n<th>Stdev</th>\n<th>Min</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Req/Sec</td>\n<td>10455</td>\n<td>10455</td>\n<td>12959</td>\n<td>17199</td>\n<td>14020</td>\n<td>2638.61</td>\n<td>10454</td>\n</tr>\n<tr>\n<td>Bytes/Sec</td>\n<td>1.26 MB</td>\n<td>1.26 MB</td>\n<td>1.56 MB</td>\n<td>2.07 MB</td>\n<td>1.69 MB</td>\n<td>319 kB</td>\n<td>1.26 MB</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Req/Bytes counts sampled once per second.<br />\n# of samples: 10<br />\n142k requests in 10.04s, 16.9 MB read</p>\n"}],"owner":{"account_id":11068321,"reputation":293,"user_id":8127396,"accept_rate":50,"display_name":"Defarine"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2644,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1690369597,"creation_date":1579535886,"question_id":59826877,"body_markdown":"we are currently investigating whether ExpressJS (Nodejs) or SpringBoot (Java) is better suited for backend operation. We wrote some &quot;equivalent&quot; code with Rest interfaces, some accessing databases (eg MongoDB) and making some transforms. Both applications run on the same server instance.\r\n\r\nWhen it comes to load testing, we observe that avg response time is longer for ExpressJS even in small-load operation and becomes even worse when scaling up to 40 parallel requests.... \r\n\r\n\r\nCan you guys confirm that observation - do we have to say in general that expressjs/nodejs web application backends are not as fast as using springboot/java? Or is that a result of missing multithreading in expressjs?\r\n\r\nThanks!\r\n\r\n\r\n","title":"Can anybody confirm that ExpressJS is slower than Spring Boot?","body":"<p>we are currently investigating whether ExpressJS (Nodejs) or SpringBoot (Java) is better suited for backend operation. We wrote some \"equivalent\" code with Rest interfaces, some accessing databases (eg MongoDB) and making some transforms. Both applications run on the same server instance.</p>\n\n<p>When it comes to load testing, we observe that avg response time is longer for ExpressJS even in small-load operation and becomes even worse when scaling up to 40 parallel requests.... </p>\n\n<p>Can you guys confirm that observation - do we have to say in general that expressjs/nodejs web application backends are not as fast as using springboot/java? Or is that a result of missing multithreading in expressjs?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","messaging","archive","snapshot","aeron"],"answers":[{"tags":[],"owner":{"account_id":463937,"reputation":81,"user_id":867136,"display_name":"pcdv"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1665760910,"creation_date":1665760910,"answer_id":74071464,"question_id":74056545,"body_markdown":"You can use class `RecordingLog` to inspect the various entries (logs, snapshots) belonging to the Consensus Module (CM) and clustered service(s).\r\n\r\nOnce you identified which snapshots are safe to delete (according to your business requirements), you can delete the corresponding recordings from the archive and invalidate the entries in the recording log.\r\n\r\nThe next thing you have to do is purge the CM log to the position of the oldest CM snapshot you kept. There is a snippet in Aeron project that you can take inspiration from: `io.aeron.test.cluster.TestCluster#purgeLogToLastSnapshot()`.\r\n","title":"How to purge Aeron expired archives and snapshot files?","body":"<p>You can use class <code>RecordingLog</code> to inspect the various entries (logs, snapshots) belonging to the Consensus Module (CM) and clustered service(s).</p>\n<p>Once you identified which snapshots are safe to delete (according to your business requirements), you can delete the corresponding recordings from the archive and invalidate the entries in the recording log.</p>\n<p>The next thing you have to do is purge the CM log to the position of the oldest CM snapshot you kept. There is a snippet in Aeron project that you can take inspiration from: <code>io.aeron.test.cluster.TestCluster#purgeLogToLastSnapshot()</code>.</p>\n"},{"tags":[],"owner":{"account_id":20436213,"reputation":21,"user_id":14993996,"display_name":"Anton"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690369319,"creation_date":1690369319,"answer_id":76770570,"question_id":74056545,"body_markdown":"There are 2 system tests within the aeron repo that are demonstrating different ways on how to purge Aeron archive data and reclaim more disk space.\r\n\r\nIn the first test the connection to Aeron cluster is made to purge Log to the latest snapshot: test name is `shouldRecoverWhenFollowerWithInitialSnapshotAndArchivePurgeThenIsMultipleTermsBehind` [within ClusterTest class][1]\r\n\r\nThe other way is described in test class [StartFromTruncatedRecordingLogTest][2] where the RecordingLog is inspected and unnecessary files are removed. My understanding is that for that case the cluster should be shutdown as the recording log is adjusted and then replaced.\r\n\r\nHowever, once the data in archive is purged, it&#39;s not clear to me how the fresh new cluster node without any data could join the cluster. When I&#39;m trying to do that I&#39;m getting the following error:\r\n```\r\nio.aeron.archive.client.ArchiveException: ERROR - response for correlationId=270, error: requested replay start position=0 is less than recording start position=134217728 for recording 0\r\n```\r\n\r\n\r\n  [1]: https://github.com/real-logic/aeron/blob/bbce2f7f312a4ec8c0853896ea4005c40e81b0d6/aeron-system-tests/src/test/java/io/aeron/cluster/ClusterTest.java#L1248\r\n  [2]: https://github.com/real-logic/aeron/blob/b7dd10f0520de20b6d9f595ce6d824bce99cccc8/aeron-system-tests/src/test/java/io/aeron/cluster/StartFromTruncatedRecordingLogTest.java#L49","title":"How to purge Aeron expired archives and snapshot files?","body":"<p>There are 2 system tests within the aeron repo that are demonstrating different ways on how to purge Aeron archive data and reclaim more disk space.</p>\n<p>In the first test the connection to Aeron cluster is made to purge Log to the latest snapshot: test name is <code>shouldRecoverWhenFollowerWithInitialSnapshotAndArchivePurgeThenIsMultipleTermsBehind</code> <a href=\"https://github.com/real-logic/aeron/blob/bbce2f7f312a4ec8c0853896ea4005c40e81b0d6/aeron-system-tests/src/test/java/io/aeron/cluster/ClusterTest.java#L1248\" rel=\"nofollow noreferrer\">within ClusterTest class</a></p>\n<p>The other way is described in test class <a href=\"https://github.com/real-logic/aeron/blob/b7dd10f0520de20b6d9f595ce6d824bce99cccc8/aeron-system-tests/src/test/java/io/aeron/cluster/StartFromTruncatedRecordingLogTest.java#L49\" rel=\"nofollow noreferrer\">StartFromTruncatedRecordingLogTest</a> where the RecordingLog is inspected and unnecessary files are removed. My understanding is that for that case the cluster should be shutdown as the recording log is adjusted and then replaced.</p>\n<p>However, once the data in archive is purged, it's not clear to me how the fresh new cluster node without any data could join the cluster. When I'm trying to do that I'm getting the following error:</p>\n<pre><code>io.aeron.archive.client.ArchiveException: ERROR - response for correlationId=270, error: requested replay start position=0 is less than recording start position=134217728 for recording 0\n</code></pre>\n"}],"owner":{"account_id":3116681,"reputation":51,"user_id":2637297,"display_name":"Vahid Sadeghi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1690369319,"creation_date":1665667519,"question_id":74056545,"body_markdown":"What is best and save solution to remove expired archive files after taking snapshots and also remove invalid snapshot files in frequency?\r\n","title":"How to purge Aeron expired archives and snapshot files?","body":"<p>What is best and save solution to remove expired archive files after taking snapshots and also remove invalid snapshot files in frequency?</p>\n"},{"tags":["java","hazelcast","circular-buffer"],"answers":[{"tags":[],"owner":{"account_id":7268261,"reputation":194,"user_id":5878559,"display_name":"Nikhil Pandit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690368939,"creation_date":1690368939,"answer_id":76770512,"question_id":76770392,"body_markdown":"I have never used Hazelcast but as a Java developer got interest in this question.\r\nI checked the Hazelcast documentation page and found a section where they refer to reading data in batches, you can try that.\r\n\r\nBelow method will help you in acheiving that:\r\n\r\n    CompletionStage&lt;ReadResultSet&lt;E&gt;&gt; readManyAsync(\r\n        long startSequence,\r\n        int minCount,\r\n        int maxCount,\r\n        IFunction&lt;E, Boolean&gt; filter);\r\n\r\nMeaning of the arguments of this method are explained in more detail on the reference link of documentation.\r\n\r\n    long sequence = rb.headSequence();\r\n    for(;;) {\r\n        CompletionStage&lt;ReadResultSet&lt;String&gt;&gt; f = rb.readManyAsync(sequence, 1, 10, null);\r\n        CompletionStage&lt;Integer&gt; readCountStage = f.thenApplyAsync(rs -&gt; {\r\n            for (String s : rs) {\r\n                System.out.println(s);\r\n            }\r\n            return rs.readCount();\r\n        });\r\n        sequence += readCountStage.toCompletableFuture().join();\r\n    }\r\n\r\nThis one also provides a filter which can be used to filter data while fetching from ringbuffer. \r\nWhere as in readOne method you fetch the data and filter after it.\r\n\r\nReference link: https://docs.hazelcast.com/hazelcast/5.3/data-structures/ringbuffer#reading-batched-items","title":"How to speed up data imports from ring buffers in a java client?","body":"<p>I have never used Hazelcast but as a Java developer got interest in this question.\nI checked the Hazelcast documentation page and found a section where they refer to reading data in batches, you can try that.</p>\n<p>Below method will help you in acheiving that:</p>\n<pre><code>CompletionStage&lt;ReadResultSet&lt;E&gt;&gt; readManyAsync(\n    long startSequence,\n    int minCount,\n    int maxCount,\n    IFunction&lt;E, Boolean&gt; filter);\n</code></pre>\n<p>Meaning of the arguments of this method are explained in more detail on the reference link of documentation.</p>\n<pre><code>long sequence = rb.headSequence();\nfor(;;) {\n    CompletionStage&lt;ReadResultSet&lt;String&gt;&gt; f = rb.readManyAsync(sequence, 1, 10, null);\n    CompletionStage&lt;Integer&gt; readCountStage = f.thenApplyAsync(rs -&gt; {\n        for (String s : rs) {\n            System.out.println(s);\n        }\n        return rs.readCount();\n    });\n    sequence += readCountStage.toCompletableFuture().join();\n}\n</code></pre>\n<p>This one also provides a filter which can be used to filter data while fetching from ringbuffer.\nWhere as in readOne method you fetch the data and filter after it.</p>\n<p>Reference link: <a href=\"https://docs.hazelcast.com/hazelcast/5.3/data-structures/ringbuffer#reading-batched-items\" rel=\"nofollow noreferrer\">https://docs.hazelcast.com/hazelcast/5.3/data-structures/ringbuffer#reading-batched-items</a></p>\n"}],"owner":{"account_id":256642,"reputation":6092,"user_id":537503,"accept_rate":42,"display_name":"Andy Dufresne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690368939,"creation_date":1690367861,"question_id":76770392,"body_markdown":"We have a third party application producing data at a very high speed and storing it in multiple ring buffers (hazelcast cluster). \r\n\r\nThe consumer application (another third party app) uses this java hazelcast library to read ring buffer data. It calls `final byte[] item = ringbuffer.readOne(sequence)` api for reads. This turns out to be very slow. The consumer takes more than a day to read all data during peak loads.\r\n\r\nWhat are general strategies to concurrently read data from hazelcast cluster? Are there any java references that I can look into?\r\n\r\nThanks.","title":"How to speed up data imports from ring buffers in a java client?","body":"<p>We have a third party application producing data at a very high speed and storing it in multiple ring buffers (hazelcast cluster).</p>\n<p>The consumer application (another third party app) uses this java hazelcast library to read ring buffer data. It calls <code>final byte[] item = ringbuffer.readOne(sequence)</code> api for reads. This turns out to be very slow. The consumer takes more than a day to read all data during peak loads.</p>\n<p>What are general strategies to concurrently read data from hazelcast cluster? Are there any java references that I can look into?</p>\n<p>Thanks.</p>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"score":0,"creation_date":1690364462,"post_id":76769720,"comment_id":135341954,"body_markdown":"can you show AppUserRoles class","body":"can you show AppUserRoles class"},{"owner":{"account_id":10827831,"reputation":143,"user_id":7963227,"display_name":"Sametcey"},"score":0,"creation_date":1690364872,"post_id":76769720,"comment_id":135342043,"body_markdown":"i post the AppUserRoles class in my Question","body":"i post the AppUserRoles class in my Question"},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1690367685,"post_id":76769720,"comment_id":135342656,"body_markdown":"*&quot;BUT when i try to save (insert) a user with a username which exists in Database&quot;* - The username is the ID in your entity, so if you have an entity with that ID set and the ID exists in the database, it is no more than logical that Hibernate/JPA will treat it as an update of an existing record instead of an insert.","body":"<i>&quot;BUT when i try to save (insert) a user with a username which exists in Database&quot;</i> - The username is the ID in your entity, so if you have an entity with that ID set and the ID exists in the database, it is no more than logical that Hibernate/JPA will treat it as an update of an existing record instead of an insert."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1690378419,"post_id":76769720,"comment_id":135345155,"body_markdown":"The issue is you are passing in an instance that represents data already in the database. If you want to maintain the integrity of the appuserroles without having to pass them into the request, you must read in the APPUser and merge in the changes you want to make to it yourself - JPA cannot decide that it should ignore the null appuserroles when that is a perfectly valid state for the appuserroles collection, and means something. Other answers should already have explained that the FK/ID of APPUserroles is controlled by this unidirectional 1:M mapping which may not be what you want to do.","body":"The issue is you are passing in an instance that represents data already in the database. If you want to maintain the integrity of the appuserroles without having to pass them into the request, you must read in the APPUser and merge in the changes you want to make to it yourself - JPA cannot decide that it should ignore the null appuserroles when that is a perfectly valid state for the appuserroles collection, and means something. Other answers should already have explained that the FK/ID of APPUserroles is controlled by this unidirectional 1:M mapping which may not be what you want to do."}],"answers":[{"tags":[],"owner":{"account_id":4031141,"reputation":26,"user_id":3317192,"display_name":"Francesco Poli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690365947,"creation_date":1690365947,"answer_id":76770112,"question_id":76769720,"body_markdown":"Have you tried setting the cascade attribute in the @OneToMany annotation? I think that, if you need to keep these entities stricty tied with che user, you need to inform the jpa mapping that every operation is done to the &quot;parent&quot; (i.e. the user) needs to be propagated to the children (i.e. the roles).\r\n\r\nTry setting:\r\n\r\n    @OneToMany(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE})\r\n\r\nOr, at most:\r\n\r\n    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n\r\nTo cover all cases.\r\n","title":"JPA Save Data will try to Update Lazy Field when ID Exists","body":"<p>Have you tried setting the cascade attribute in the @OneToMany annotation? I think that, if you need to keep these entities stricty tied with che user, you need to inform the jpa mapping that every operation is done to the &quot;parent&quot; (i.e. the user) needs to be propagated to the children (i.e. the roles).</p>\n<p>Try setting:</p>\n<pre><code>@OneToMany(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE})\n</code></pre>\n<p>Or, at most:</p>\n<pre><code>@OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n</code></pre>\n<p>To cover all cases.</p>\n"},{"tags":[],"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690368893,"creation_date":1690368893,"answer_id":76770506,"question_id":76769720,"body_markdown":"**Problem** is that you are having AppUserRole.userName as both **primary key** and **foreign key**. why is this a problem? from [hibernate docs][1]\r\n&gt; when managing the collection(roles list) persistence state. Every element(role) removal only requires a single update (in which the foreign key column(AppUserRoles.userName) is set to NULL)\r\n\r\nso for hibernate to update appUser removing roles &quot;setting roles List to null&quot; it breaks the relationship by setting the foreign key of the roles table to null which happens to be also the primary key and primary keys do not accept null.\r\n\r\n**SOLUTION**:\r\ndo not make username the primary key of role table.\r\n\r\n**NOTE**: if you have `spring.jpa.hibernate.ddl-auto=update` you may need to update the primaryKey directly from Mysql workbench \r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#associations-one-to-many:~:text=when%20managing%20the%20collection%20persistence%20state.%20Every%20element%20removal%20only%20requires%20a%20single%20update%20(in%20which%20the%20foreign%20key%20column%20is%20set%20to%20NULL)","title":"JPA Save Data will try to Update Lazy Field when ID Exists","body":"<p><strong>Problem</strong> is that you are having AppUserRole.userName as both <strong>primary key</strong> and <strong>foreign key</strong>. why is this a problem? from <a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#associations-one-to-many:%7E:text=when%20managing%20the%20collection%20persistence%20state.%20Every%20element%20removal%20only%20requires%20a%20single%20update%20(in%20which%20the%20foreign%20key%20column%20is%20set%20to%20NULL)\" rel=\"nofollow noreferrer\">hibernate docs</a></p>\n<blockquote>\n<p>when managing the collection(roles list) persistence state. Every element(role) removal only requires a single update (in which the foreign key column(AppUserRoles.userName) is set to NULL)</p>\n</blockquote>\n<p>so for hibernate to update appUser removing roles &quot;setting roles List to null&quot; it breaks the relationship by setting the foreign key of the roles table to null which happens to be also the primary key and primary keys do not accept null.</p>\n<p><strong>SOLUTION</strong>:\ndo not make username the primary key of role table.</p>\n<p><strong>NOTE</strong>: if you have <code>spring.jpa.hibernate.ddl-auto=update</code> you may need to update the primaryKey directly from Mysql workbench</p>\n"}],"owner":{"account_id":10827831,"reputation":143,"user_id":7963227,"display_name":"Sametcey"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690368893,"creation_date":1690363301,"question_id":76769720,"body_markdown":"I am very frustrated at the moment. I spend hours of hours to get JPA + Hibernate work.\r\n\r\nMy Problem is - I have this Entity:\r\n\r\n    @Entity\r\n    public class APPUser implements UserDetails{\r\n        \r\n        @Id\r\n        private String username;\r\n        \r\n        private String vorname;\r\n        private String nachname;\r\n        private Date geburtstag;\r\n        private String email;\r\n        private int locked;\r\n        private String passwort;\r\n        private String passwortresetkey;\r\n        private Timestamp passwortresettimestamp;\r\n        private String lastloginip;\r\n        \r\n        /*@ElementCollection(targetClass = APPUserRoles.class, fetch = FetchType.LAZY)\r\n        @CollectionTable( \r\n                name = &quot;appuserroles&quot;,\r\n                joinColumns = @JoinColumn (name = &quot;username&quot;, referencedColumnName = &quot;username&quot;)\r\n            )\r\n        @Enumerated(EnumType.STRING)*/\r\n        @OneToMany(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;username&quot;)\r\n        private List&lt;APPUserroles&gt; appuserroles;\r\n        \r\n        @OneToMany(mappedBy=&quot;user&quot;, fetch = FetchType.LAZY)\r\n        private List&lt;APPToken&gt; tokens;\r\n\r\nHow you see i have `private List&lt;APPUserroles&gt; appuserroles;` defined as LAZY. \r\n\r\nNow i call the Save Method from Respository to Save a new User (Insert):\r\n\r\n    public void saveNewUserinDatabase(RegisterRequest request) {\r\n            String remoteAddr = &quot;&quot;;\r\n    \r\n            APPUser appuser = new APPUser(\r\n                    request.getUsername(),\r\n                    request.getVorname(),\r\n                    request.getNachname(),\r\n                    request.getGeburtstag(),\r\n                    request.getEmail(),\r\n                    request.getLocked(),\r\n                    passwordEncoder.encode(request.getPasswort()),\r\n                    &quot;&quot;,\r\n                    remoteAddr\r\n            );\r\n            userRepository.save(appuser);\r\n        }\r\n\r\nso this is easy ...\r\n\r\nIn the Constructor i dont pass any appuserroles so it is null.\r\n\r\nWHEN i try to save a user with a new username so all is working fine\r\n\r\nBUT when i try to save (insert) a user with a username which exists in Database so JPA/Hibernate will try to UPDATE the APPUserRoles Table in Database - BUT WHY? How can i get Hibernate to ONLY SAVE the User table? and dont try to Update the AppUserRoles table?\r\n\r\nThis is the Error i get:\r\n\r\n    com.microsoft.sqlserver.jdbc.SQLServerException: Cannot insert NULL value into username column, SLAPPS.dbo.APPUserRoles table. The column does not allow NULL values. UPDATE failed.\r\n\r\ni also see he try to update the Column:\r\n\r\n    Hibernate: \r\n        update\r\n            appuserroles \r\n        set\r\n            username=null \r\n        where\r\n            username=?\r\n\r\n\r\nThe AppUserRoles class:\r\n\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Entity\r\n    public class APPUserroles {\r\n        \r\n        @Id\r\n        private String username;\r\n        \r\n        private String rolename;\r\n    }\r\n\r\n\r\n**is realy the only Solution to make a own Query in JPARepository With an Insert Statement??**\r\n\r\n","title":"JPA Save Data will try to Update Lazy Field when ID Exists","body":"<p>I am very frustrated at the moment. I spend hours of hours to get JPA + Hibernate work.</p>\n<p>My Problem is - I have this Entity:</p>\n<pre><code>@Entity\npublic class APPUser implements UserDetails{\n    \n    @Id\n    private String username;\n    \n    private String vorname;\n    private String nachname;\n    private Date geburtstag;\n    private String email;\n    private int locked;\n    private String passwort;\n    private String passwortresetkey;\n    private Timestamp passwortresettimestamp;\n    private String lastloginip;\n    \n    /*@ElementCollection(targetClass = APPUserRoles.class, fetch = FetchType.LAZY)\n    @CollectionTable( \n            name = &quot;appuserroles&quot;,\n            joinColumns = @JoinColumn (name = &quot;username&quot;, referencedColumnName = &quot;username&quot;)\n        )\n    @Enumerated(EnumType.STRING)*/\n    @OneToMany(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;username&quot;)\n    private List&lt;APPUserroles&gt; appuserroles;\n    \n    @OneToMany(mappedBy=&quot;user&quot;, fetch = FetchType.LAZY)\n    private List&lt;APPToken&gt; tokens;\n</code></pre>\n<p>How you see i have <code>private List&lt;APPUserroles&gt; appuserroles;</code> defined as LAZY.</p>\n<p>Now i call the Save Method from Respository to Save a new User (Insert):</p>\n<pre><code>public void saveNewUserinDatabase(RegisterRequest request) {\n        String remoteAddr = &quot;&quot;;\n\n        APPUser appuser = new APPUser(\n                request.getUsername(),\n                request.getVorname(),\n                request.getNachname(),\n                request.getGeburtstag(),\n                request.getEmail(),\n                request.getLocked(),\n                passwordEncoder.encode(request.getPasswort()),\n                &quot;&quot;,\n                remoteAddr\n        );\n        userRepository.save(appuser);\n    }\n</code></pre>\n<p>so this is easy ...</p>\n<p>In the Constructor i dont pass any appuserroles so it is null.</p>\n<p>WHEN i try to save a user with a new username so all is working fine</p>\n<p>BUT when i try to save (insert) a user with a username which exists in Database so JPA/Hibernate will try to UPDATE the APPUserRoles Table in Database - BUT WHY? How can i get Hibernate to ONLY SAVE the User table? and dont try to Update the AppUserRoles table?</p>\n<p>This is the Error i get:</p>\n<pre><code>com.microsoft.sqlserver.jdbc.SQLServerException: Cannot insert NULL value into username column, SLAPPS.dbo.APPUserRoles table. The column does not allow NULL values. UPDATE failed.\n</code></pre>\n<p>i also see he try to update the Column:</p>\n<pre><code>Hibernate: \n    update\n        appuserroles \n    set\n        username=null \n    where\n        username=?\n</code></pre>\n<p>The AppUserRoles class:</p>\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\npublic class APPUserroles {\n    \n    @Id\n    private String username;\n    \n    private String rolename;\n}\n</code></pre>\n<p><strong>is realy the only Solution to make a own Query in JPARepository With an Insert Statement??</strong></p>\n"},{"tags":["java","maven","tomcat","maven-plugin"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1690356798,"post_id":76768939,"comment_id":135340342,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551) Instead, [edit] your question to include the code as properly formatted text.","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Instead, <a href=\"https://stackoverflow.com/posts/76768939/edit\">edit</a> your question to include the code as properly formatted text."},{"owner":{"account_id":26958733,"reputation":1,"user_id":20526707,"display_name":"SpywithJava"},"score":0,"creation_date":1690357065,"post_id":76768939,"comment_id":135340392,"body_markdown":"OK, I&#39;m new here, aha","body":"OK, I&#39;m new here, aha"},{"owner":{"account_id":2157438,"reputation":1216,"user_id":1912318,"display_name":"ishimwe"},"score":0,"creation_date":1690361077,"post_id":76768939,"comment_id":135341186,"body_markdown":"Could you edit and share the full error stack?","body":"Could you edit and share the full error stack?"},{"owner":{"account_id":26958733,"reputation":1,"user_id":20526707,"display_name":"SpywithJava"},"score":0,"creation_date":1690368974,"post_id":76768939,"comment_id":135342896,"body_markdown":"OK, the full error stack is \nError: \ncan&#39;t initialize the main class: com.itranswarp.learnjava.Main Cause:java.lang.NoClassDefFoundError:org/apache/catalina/WebResourceRoot","body":"OK, the full error stack is  Error:  can&#39;t initialize the main class: com.itranswarp.learnjava.Main Cause:java.lang.NoClassDefFoundError:org/apache/catalina/Web&zwnj;&#8203;ResourceRoot"}],"owner":{"account_id":26958733,"reputation":1,"user_id":20526707,"display_name":"SpywithJava"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690368892,"creation_date":1690356726,"question_id":76768939,"body_markdown":"I&#39;ve run an instance of MVC development of liaoxuefeng:      (https://www.liaoxuefeng.com/wiki/1252599548343744/1337408645759009)\r\n    Here is a link to download the package at the end of the web page\r\n    But when I run the Main Class, there is a mistake\r\n``\r\nError: can&#39;t initialize the main class: com.itranswarp.learnjava.Main\r\nCause:java.lang.NoClassDefFoundError:org/apache/catalina/WebResourceRoot\r\n``\r\n\r\n    Here is my pom.xml:\r\n\r\n``\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.itranswarp.learnjava&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;web-mvc&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\r\n\t\t&lt;jackson.version&gt;2.12.7.1&lt;/jackson.version&gt;\r\n\t\t&lt;pebble.version&gt;3.1.6&lt;/pebble.version&gt;\r\n\t\t&lt;tomcat.version&gt;10.1.6&lt;/tomcat.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.pebbletemplates&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;pebble&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${pebble.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins\r\n&#39;&#39;&#39;\r\n    I don&#39;t know why such error happens\r\n\r\n    I try to update my tomcat and plugins in pom.xml and download and use jdk17 to keep pace with the original maven, but I still can&#39;t save the problem\r\n    I just want to know how to solve the problem\r\nHere is my Main Class\r\n``\r\n    package com.itranswarp.learnjava;\r\n\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Tomcat tomcat = new Tomcat();\r\n        tomcat.setPort(Integer.getInteger(&quot;port&quot;, 8080));\r\n        tomcat.getConnector();\r\n        Context ctx = tomcat.addWebapp(&quot;&quot;, new File(&quot;src/main/webapp&quot;).getAbsolutePath());\r\n        WebResourceRoot resources = new StandardRoot(ctx);\r\n        resources.addPreResources(new DirResourceSet(resources, &quot;/WEB-INF/classes&quot;, new File(&quot;target/classes&quot;).getAbsolutePath(), &quot;/&quot;));\r\n        ctx.setResources(resources);\r\n        tomcat.start();\r\n        tomcat.getServer().await();\r\n    }\r\n}\r\n``","title":"can&#39;t initialize main class com.itranswarp.learnjava.Main","body":"<p>I've run an instance of MVC development of liaoxuefeng:      (<a href=\"https://www.liaoxuefeng.com/wiki/1252599548343744/1337408645759009\" rel=\"nofollow noreferrer\">https://www.liaoxuefeng.com/wiki/1252599548343744/1337408645759009</a>)\nHere is a link to download the package at the end of the web page\nBut when I run the Main Class, there is a mistake\n<code>Error: can't initialize the main class: com.itranswarp.learnjava.Main Cause:java.lang.NoClassDefFoundError:org/apache/catalina/WebResourceRoot</code></p>\n<pre><code>Here is my pom.xml:\n</code></pre>\n<p>``\n\n4.0.0</p>\n<pre><code>&lt;groupId&gt;com.itranswarp.learnjava&lt;/groupId&gt;\n&lt;artifactId&gt;web-mvc&lt;/artifactId&gt;\n&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n\n    &lt;jackson.version&gt;2.12.7.1&lt;/jackson.version&gt;\n    &lt;pebble.version&gt;3.1.6&lt;/pebble.version&gt;\n    &lt;tomcat.version&gt;10.1.6&lt;/tomcat.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;${jackson.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.pebbletemplates&lt;/groupId&gt;\n        &lt;artifactId&gt;pebble&lt;/artifactId&gt;\n        &lt;version&gt;${pebble.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\n        &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n        &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins\n</code></pre>\n<p>'''\nI don't know why such error happens</p>\n<pre><code>I try to update my tomcat and plugins in pom.xml and download and use jdk17 to keep pace with the original maven, but I still can't save the problem\nI just want to know how to solve the problem\n</code></pre>\n<p>Here is my Main Class\n``\npackage com.itranswarp.learnjava;</p>\n<p>public class Main {</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    Tomcat tomcat = new Tomcat();\n    tomcat.setPort(Integer.getInteger(&quot;port&quot;, 8080));\n    tomcat.getConnector();\n    Context ctx = tomcat.addWebapp(&quot;&quot;, new File(&quot;src/main/webapp&quot;).getAbsolutePath());\n    WebResourceRoot resources = new StandardRoot(ctx);\n    resources.addPreResources(new DirResourceSet(resources, &quot;/WEB-INF/classes&quot;, new File(&quot;target/classes&quot;).getAbsolutePath(), &quot;/&quot;));\n    ctx.setResources(resources);\n    tomcat.start();\n    tomcat.getServer().await();\n}\n</code></pre>\n<p>}\n``</p>\n"},{"tags":["java","kotlin","apache-beam","avro"],"answers":[{"tags":[],"owner":{"account_id":14402680,"reputation":312,"user_id":10403784,"display_name":"Vadim Yemelyanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690323302,"creation_date":1690323302,"answer_id":76766832,"question_id":76766134,"body_markdown":"Not really familiar with Pardo but Im pretty sure that you have to manually cast return types to Map or GenericRecord\r\n\r\n    ((Map)((Map) input.element().getAsGenericRecord(&quot;event&quot;).get(&quot;group&quot;)).get(&quot;details&quot;)).get(&quot;owner&quot;)\r\n    \r\n","title":"How to read/update values in a nested Avro Generic Record?","body":"<p>Not really familiar with Pardo but Im pretty sure that you have to manually cast return types to Map or GenericRecord</p>\n<pre><code>((Map)((Map) input.element().getAsGenericRecord(&quot;event&quot;).get(&quot;group&quot;)).get(&quot;details&quot;)).get(&quot;owner&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1412218,"reputation":9144,"user_id":1338588,"accept_rate":64,"display_name":"Kulasangar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690365639,"creation_date":1690365639,"answer_id":76770076,"question_id":76766134,"body_markdown":"I was able to achieve this by three approaches. \r\n\r\n1st Approach is to convert the Avro `Generic Record` to `JsonObject` and then access the nested fields\r\n\r\n    val jsonObj = JSONObject(newElement.getAsGenericRecord(&quot;event&quot;)?.get(&quot;group&quot;).toString())\r\n    val bannerJsonObject = jsonObj.getJSONObject(&quot;details&quot;).getJSONObject(&quot;nested&quot;)\r\n    if (bannerJsonObject.get(&quot;abc&quot;).toString() == &quot;null&quot;){\r\n        bannerJsonObject.put(&quot;abc&quot;,&quot;dummy&quot;)\r\n    }\r\n\r\n2nd Approach was to cast the values into `Generic Record`:\r\n\r\n    val dataNestedObjGroup = newElement.getAsGenericRecord(&quot;event&quot;)?.get(&quot;group&quot;) as GenericRecord\r\n    val dataNestedObjDetails = dataNestedObjGroup.getAsGenericRecord(&quot;details&quot;)?.get(&quot;nested&quot;) as GenericRecord\r\n    \r\n    if (dataNestedObjDetails.get(&quot;abc&quot;) == null){\r\n        dataNestedObjDetails.put(&quot;abc&quot;,&quot;dummy&quot;)\r\n    }\r\n\r\n\r\n3rd approach was to navigate through the nested level:\r\n\r\n    val event = newElement.getAsGenericRecord(&quot;event&quot;)\r\n    val group = event?.getAsGenericRecord(&quot;group&quot;)\r\n    val details = group?.getAsGenericRecord(&quot;details&quot;)\r\n    val nested = details?.getAsGenericRecord(&quot;nested&quot;)\r\n    \r\n    if (nested?.get(&quot;abc&quot;) == null){\r\n        nested?.put(&quot;abc&quot;,&quot;dummy&quot;)\r\n    }\r\n\r\n","title":"How to read/update values in a nested Avro Generic Record?","body":"<p>I was able to achieve this by three approaches.</p>\n<p>1st Approach is to convert the Avro <code>Generic Record</code> to <code>JsonObject</code> and then access the nested fields</p>\n<pre><code>val jsonObj = JSONObject(newElement.getAsGenericRecord(&quot;event&quot;)?.get(&quot;group&quot;).toString())\nval bannerJsonObject = jsonObj.getJSONObject(&quot;details&quot;).getJSONObject(&quot;nested&quot;)\nif (bannerJsonObject.get(&quot;abc&quot;).toString() == &quot;null&quot;){\n    bannerJsonObject.put(&quot;abc&quot;,&quot;dummy&quot;)\n}\n</code></pre>\n<p>2nd Approach was to cast the values into <code>Generic Record</code>:</p>\n<pre><code>val dataNestedObjGroup = newElement.getAsGenericRecord(&quot;event&quot;)?.get(&quot;group&quot;) as GenericRecord\nval dataNestedObjDetails = dataNestedObjGroup.getAsGenericRecord(&quot;details&quot;)?.get(&quot;nested&quot;) as GenericRecord\n\nif (dataNestedObjDetails.get(&quot;abc&quot;) == null){\n    dataNestedObjDetails.put(&quot;abc&quot;,&quot;dummy&quot;)\n}\n</code></pre>\n<p>3rd approach was to navigate through the nested level:</p>\n<pre><code>val event = newElement.getAsGenericRecord(&quot;event&quot;)\nval group = event?.getAsGenericRecord(&quot;group&quot;)\nval details = group?.getAsGenericRecord(&quot;details&quot;)\nval nested = details?.getAsGenericRecord(&quot;nested&quot;)\n\nif (nested?.get(&quot;abc&quot;) == null){\n    nested?.put(&quot;abc&quot;,&quot;dummy&quot;)\n}\n</code></pre>\n"}],"owner":{"account_id":1412218,"reputation":9144,"user_id":1338588,"accept_rate":64,"display_name":"Kulasangar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76770076,"answer_count":2,"score":0,"last_activity_date":1690368479,"creation_date":1690314993,"question_id":76766134,"body_markdown":"I&#39;m trying to access a nested field in [Avro Generic Record][1] using Apache Beam [Pardo][2].\r\n\r\nI can get into the first level, but I can&#39;t figure out how to access fields that are even further.\r\n\r\nFor if you consider the `Generic Record` value like this:\r\n\r\n    {\r\n        &quot;eventTargetType&quot;: &quot;GROUP&quot;,\r\n        &quot;id&quot;: &quot;1234&quot;,\r\n        &quot;group&quot;:\r\n        {\r\n            &quot;details&quot;:\r\n            {\r\n               \r\n                &quot;triggers&quot;:\r\n                [],\r\n                &quot;attributes&quot;:\r\n                []\r\n            },\r\n            &quot;groupRole&quot;:\r\n            {\r\n                &quot;algorithmResults&quot;:\r\n                []\r\n            },\r\n            &quot;activeTests&quot;:\r\n            []\r\n        }\r\n    }\r\n\r\nI&#39;m able to get to the group level by doing this:\r\n\r\n    @ProcessElement\r\n    fun processElement(input: ProcessContext, output: OutputReceiver&lt;GenericRecord&gt;) {\r\n        input.element().getAsGenericRecord(&quot;event&quot;).get(&quot;group&quot;)\r\n    }\r\n\r\nand this returns value which is a data type of (org.apache.avro.generic.GenericData$Record):\r\n\r\n    {\r\n        &quot;event&quot;: &quot;RENDER&quot;,\r\n        &quot;details&quot;:\r\n        {\r\n            &quot;ow&quot;: null,\r\n            &quot;ty&quot;: null,\r\n            &quot;na&quot;: null,\r\n            &quot;attributes&quot;:[],\r\n        },\r\n        &quot;loc&quot;: null,\r\n        &quot;pos&quot;: null\r\n    }\r\n    \r\nNow I want to get the field `attributes` which is inside `details`. I can&#39;t do another `get()` since it doesn&#39;t allow. Any ideas on how can I approach this? \r\n\r\n\r\n  [1]: https://avro.apache.org/docs/current/api/java/org/apache/avro/generic/GenericRecord.html\r\n  [2]: https://beam.apache.org/documentation/transforms/java/elementwise/pardo/","title":"How to read/update values in a nested Avro Generic Record?","body":"<p>I'm trying to access a nested field in <a href=\"https://avro.apache.org/docs/current/api/java/org/apache/avro/generic/GenericRecord.html\" rel=\"nofollow noreferrer\">Avro Generic Record</a> using Apache Beam <a href=\"https://beam.apache.org/documentation/transforms/java/elementwise/pardo/\" rel=\"nofollow noreferrer\">Pardo</a>.</p>\n<p>I can get into the first level, but I can't figure out how to access fields that are even further.</p>\n<p>For if you consider the <code>Generic Record</code> value like this:</p>\n<pre><code>{\n    &quot;eventTargetType&quot;: &quot;GROUP&quot;,\n    &quot;id&quot;: &quot;1234&quot;,\n    &quot;group&quot;:\n    {\n        &quot;details&quot;:\n        {\n           \n            &quot;triggers&quot;:\n            [],\n            &quot;attributes&quot;:\n            []\n        },\n        &quot;groupRole&quot;:\n        {\n            &quot;algorithmResults&quot;:\n            []\n        },\n        &quot;activeTests&quot;:\n        []\n    }\n}\n</code></pre>\n<p>I'm able to get to the group level by doing this:</p>\n<pre><code>@ProcessElement\nfun processElement(input: ProcessContext, output: OutputReceiver&lt;GenericRecord&gt;) {\n    input.element().getAsGenericRecord(&quot;event&quot;).get(&quot;group&quot;)\n}\n</code></pre>\n<p>and this returns value which is a data type of (org.apache.avro.generic.GenericData$Record):</p>\n<pre><code>{\n    &quot;event&quot;: &quot;RENDER&quot;,\n    &quot;details&quot;:\n    {\n        &quot;ow&quot;: null,\n        &quot;ty&quot;: null,\n        &quot;na&quot;: null,\n        &quot;attributes&quot;:[],\n    },\n    &quot;loc&quot;: null,\n    &quot;pos&quot;: null\n}\n</code></pre>\n<p>Now I want to get the field <code>attributes</code> which is inside <code>details</code>. I can't do another <code>get()</code> since it doesn't allow. Any ideas on how can I approach this?</p>\n"},{"tags":["java","sql","postgresql","spring-boot","jpql"],"answers":[{"tags":[],"owner":{"account_id":19175790,"reputation":290,"user_id":14008536,"display_name":"Boorsuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690368411,"creation_date":1690363242,"answer_id":76769713,"question_id":76768695,"body_markdown":"The problem with your query is that if you pass string which contain more than 1 word then all of your conditions will return FALSE\r\n\r\n    SELECT &#39;JOHN&#39; LIKE &#39;%JOHN DOE%&#39;; -- FALSE\r\n    SELECT &#39;JOHN&#39; LIKE &#39;%JOHN%&#39;; -- TRUE\r\n\r\ntry this\r\n\r\n    SELECT distinct c.*\r\n    FROM Contacts c, unnest(array[c.firstName, c.supplierNo, ...more columns]) key\r\n        INNER JOIN unnest(string_to_array(&#39;:filter&#39;, &#39; &#39;)) f ON key LIKE &#39;%&#39; || f || &#39;%&#39;;\r\n\r\nSQL code that i tested \r\n\r\n    CREATE TABLE mytable(col1 text, col2 text, col3 text);\r\n    INSERT INTO mytable VALUES(&#39;HELLO&#39;, &#39;WORLD&#39;, &#39;TEST&#39;);\r\n    INSERT INTO mytable VALUES(&#39;FOO&#39;, &#39;BAR&#39;, &#39;DOG&#39;);\r\n    INSERT INTO mytable VALUES(&#39;CAT&#39;, &#39;FISH&#39;, &#39;PARROT&#39;);\r\n    \r\n    SELECT distinct c.*\r\n    FROM mytable c, unnest(array[c.col1, c.col2, c.col3]) key\r\n        INNER JOIN unnest(string_to_array(&#39;HELLO PARROT&#39;, &#39; &#39;)) f ON key LIKE &#39;%&#39; || f || &#39;%&#39;;","title":"Query which searches in multiple columns for filter string","body":"<p>The problem with your query is that if you pass string which contain more than 1 word then all of your conditions will return FALSE</p>\n<pre><code>SELECT 'JOHN' LIKE '%JOHN DOE%'; -- FALSE\nSELECT 'JOHN' LIKE '%JOHN%'; -- TRUE\n</code></pre>\n<p>try this</p>\n<pre><code>SELECT distinct c.*\nFROM Contacts c, unnest(array[c.firstName, c.supplierNo, ...more columns]) key\n    INNER JOIN unnest(string_to_array(':filter', ' ')) f ON key LIKE '%' || f || '%';\n</code></pre>\n<p>SQL code that i tested</p>\n<pre><code>CREATE TABLE mytable(col1 text, col2 text, col3 text);\nINSERT INTO mytable VALUES('HELLO', 'WORLD', 'TEST');\nINSERT INTO mytable VALUES('FOO', 'BAR', 'DOG');\nINSERT INTO mytable VALUES('CAT', 'FISH', 'PARROT');\n\nSELECT distinct c.*\nFROM mytable c, unnest(array[c.col1, c.col2, c.col3]) key\n    INNER JOIN unnest(string_to_array('HELLO PARROT', ' ')) f ON key LIKE '%' || f || '%';\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27310150,"reputation":1678,"user_id":20825414,"display_name":"ValNik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690365495,"creation_date":1690365495,"answer_id":76770055,"question_id":76768695,"body_markdown":"You can improve your query for 2 words case.  \r\n\r\nIf filter contains 1 word:  \r\nfilter1=word  \r\nfilter2=word  \r\n\r\nIf filter contains 2 words:  \r\nfilter1=word1  \r\nfilter2=word2\r\n\r\nUpdated query  \r\n```\r\n@Query(\r\n    &quot;SELECT c FROM Contacts c &quot; +\r\n    &quot;WHERE LOWER(CAST(c.supplierNo AS string)) LIKE %:filter% &quot;\r\n    +&quot; OR LOWER(c.firstName) LIKE    %:filter1%&quot;\r\n    +&quot; OR LOWER(c.lastName) LIKE %:filter2% &quot;\r\n    +&quot; OR LOWER(c.supplierName) LIKE %:filter%&quot;\r\n      )\r\n    List&lt;Contacts&gt; findByFilter(String filter);\r\n```","title":"Query which searches in multiple columns for filter string","body":"<p>You can improve your query for 2 words case.</p>\n<p>If filter contains 1 word:<br />\nfilter1=word<br />\nfilter2=word</p>\n<p>If filter contains 2 words:<br />\nfilter1=word1<br />\nfilter2=word2</p>\n<p>Updated query</p>\n<pre><code>@Query(\n    &quot;SELECT c FROM Contacts c &quot; +\n    &quot;WHERE LOWER(CAST(c.supplierNo AS string)) LIKE %:filter% &quot;\n    +&quot; OR LOWER(c.firstName) LIKE    %:filter1%&quot;\n    +&quot; OR LOWER(c.lastName) LIKE %:filter2% &quot;\n    +&quot; OR LOWER(c.supplierName) LIKE %:filter%&quot;\n      )\n    List&lt;Contacts&gt; findByFilter(String filter);\n</code></pre>\n"}],"owner":{"account_id":29085713,"reputation":1,"user_id":22280648,"display_name":"meralex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690368411,"creation_date":1690354585,"question_id":76768695,"body_markdown":"Using Postgresql and Spring.\r\nThe Backend gets User Input from the frontend which is called &quot;filter&quot;. I want the database &quot;contacts&quot; to be checked in multiple columns:\r\n\r\n```\r\n\r\n@Query(&quot;SELECT c FROM Contacts c &quot; +\r\n            &quot;WHERE LOWER(CAST(c.supplierNo AS string)) LIKE %:filter% OR LOWER(c.firstName) LIKE    %:filter%&quot; +\r\n            &quot;OR LOWER(c.lastName) LIKE %:filter% OR LOWER(c.supplierName) LIKE %:filter%&quot;)\r\n    List&lt;Contacts&gt; findByFilter(String filter);\r\n```\r\n\r\n\r\nThis works for single-word-filters. But I would want the user to enter for example: &quot;John Smith&quot;(firstName SPACE lastName), or maybe Smith Foodmarket(lastName SPACE supplierName) or Foodmarket Smith. You get the idea. How would I go about this?\r\n\r\nWHAT I TRIED:\r\n\r\n1\r\nhttps://stackoverflow.com/questions/10071867/find-search-term-in-multiple-columns\r\nThis  is not it, since I want to be able to search in multiple cols at once.\r\n\r\n2\r\nhttps://stackoverflow.com/questions/31684531/search-single-value-in-multiple-columns\r\nI tried this like shown:\r\n```\r\n    @Query(&quot;SELECT c FROM Contacts c &quot; +\r\n            &quot;WHERE LOWER(CAST(c.supplierNo AS string)) LIKE CONCAT(&#39;%&#39;, :filter, &#39;%&#39;) OR LOWER(c.firstName) LIKE CONCAT(&#39;%&#39;, :filter, &#39;%&#39;)&quot; +\r\n            &quot;OR LOWER(c.lastName) LIKE CONCAT(&#39;%&#39;, :filter, &#39;%&#39;) OR LOWER(c.supplierName) LIKE CONCAT(&#39;%&#39;, :filter, &#39;%&#39;)&quot;)\r\n    List&lt;Contacts&gt; findByFilter(String filter);\r\n```\r\n\r\nIt is entirely possible that I translated sql -&gt; jpql the wrong way, but this solution does not work as intended\r\n\r\n3\r\nMultiple permutations of this, but to no success.","title":"Query which searches in multiple columns for filter string","body":"<p>Using Postgresql and Spring.\nThe Backend gets User Input from the frontend which is called &quot;filter&quot;. I want the database &quot;contacts&quot; to be checked in multiple columns:</p>\n<pre><code>\n@Query(&quot;SELECT c FROM Contacts c &quot; +\n            &quot;WHERE LOWER(CAST(c.supplierNo AS string)) LIKE %:filter% OR LOWER(c.firstName) LIKE    %:filter%&quot; +\n            &quot;OR LOWER(c.lastName) LIKE %:filter% OR LOWER(c.supplierName) LIKE %:filter%&quot;)\n    List&lt;Contacts&gt; findByFilter(String filter);\n</code></pre>\n<p>This works for single-word-filters. But I would want the user to enter for example: &quot;John Smith&quot;(firstName SPACE lastName), or maybe Smith Foodmarket(lastName SPACE supplierName) or Foodmarket Smith. You get the idea. How would I go about this?</p>\n<p>WHAT I TRIED:</p>\n<p>1\n<a href=\"https://stackoverflow.com/questions/10071867/find-search-term-in-multiple-columns\">Find search term in multiple columns</a>\nThis  is not it, since I want to be able to search in multiple cols at once.</p>\n<p>2\n<a href=\"https://stackoverflow.com/questions/31684531/search-single-value-in-multiple-columns\">Search Single Value In Multiple Columns</a>\nI tried this like shown:</p>\n<pre><code>    @Query(&quot;SELECT c FROM Contacts c &quot; +\n            &quot;WHERE LOWER(CAST(c.supplierNo AS string)) LIKE CONCAT('%', :filter, '%') OR LOWER(c.firstName) LIKE CONCAT('%', :filter, '%')&quot; +\n            &quot;OR LOWER(c.lastName) LIKE CONCAT('%', :filter, '%') OR LOWER(c.supplierName) LIKE CONCAT('%', :filter, '%')&quot;)\n    List&lt;Contacts&gt; findByFilter(String filter);\n</code></pre>\n<p>It is entirely possible that I translated sql -&gt; jpql the wrong way, but this solution does not work as intended</p>\n<p>3\nMultiple permutations of this, but to no success.</p>\n"},{"tags":["java","xml","soap","wsdl"],"owner":{"account_id":28160907,"reputation":1,"user_id":21520865,"display_name":"KarolWegrzyn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690368268,"creation_date":1690362007,"question_id":76769564,"body_markdown":"I am writing a web application at work that uses database resources that we have in Azure SQL on an external server and for this purpose I downloaded the drivers, uploaded the appropriate code to pom.xml and everything works, but I still need to connect to our &quot;IDOSELL&quot; application it has tab for developers. I was looking for information there, everything seemed fine for communication I used wsdl (which contains soap) and something is going on here, from what the compiler spit out everything indicates that some class is missing, which is why specific object / method definitions are underlined with the information &quot;cannot be resolved to a type&quot;. The question is do you have any ideas what I could have done wrong? \r\n\r\n(Below I attach the necessary code and a fragment of the pom.xml file)\r\n\r\n```\r\npackage app_008;\r\n   \r\nimport java.io.UnsupportedEncodingException;    \r\nimport java.security.MessageDigest;            \r\nimport java.security.NoSuchAlgorithmException;  \r\nimport java.text.SimpleDateFormat;             \r\nimport java.util.Date;                         \r\nimport java.net.MalformedURLException;        \r\nimport java.net.URL;                          \r\nimport javax.xml.namespace.QName;              \r\nimport javax.xml.ws.Service;    \r\n\r\npublic class App \r\n{\r\n    public static String generateKey(String hashedPassword) \r\n    {\r\n       ........\r\n    }\r\n\r\n    public static String hashPassword(String password) \r\n    {\r\n       ........\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception \r\n    {\r\n        try \r\n        {\r\n            // Creating a web service client for an API service\r\n            URL wsdlURL = new URL(&quot;https://instalator/api/?wsdl&quot;);\r\n            QName serviceName = new QName(&quot;http://instalator/api/&quot;,                                                  &quot;ApiOrdersService&quot;);\r\n            Service service = Service.create(wsdlURL, serviceName);\r\n    \r\n            //Get Port API\r\n            ApiOrdersPortType apiPort = service.getPort(ApiOrdersPortType.class);\r\n    \r\n            // Credential setting\r\n            String userLogin = &quot;userLogin&quot;;\r\n            String authenticateKey = &quot;authenticateKey&quot;;\r\n    \r\n            // Session key generation based on password hash and date\r\n            String hashedPassword = hashPassword(&quot;yourPassword&quot;);\r\n            String sessionKey = generateKey(hashedPassword);\r\n    \r\n            // Sending an API request\r\n            GetPackagesRequestType request = new GetPackagesRequestType();\r\n            request.setAuthenticate(new AuthenticateType());\r\n            request.getAuthenticate().setUserLogin(userLogin);\r\n            request.getAuthenticate().setAuthenticateKey(authenticateKey);\r\n    \r\n            //Adding other request parameters\r\n            ParamsType params = new ParamsType();\r\n            params.setDeliveryPackageNumbers(new String[] { &quot;deliveryPackageNumbers&quot; });\r\n            params.setEvents(new GetPackagesSystemItemRequestTypes[] { new  GetPackagesSystemItemRequestTypes() });\r\n            params.getEvents()[0].setEventType(EventType.ORDER);\r\n            params.getEvents()[0].setEventsIds(new int[] { 1 });\r\n            params.setReturnLabels(true);\r\n            request.setParams(params);\r\n    \r\n            // API method call\r\n            GetPackagesResponseType response = apiPort.getPackages(request);\r\n    \r\n            // Response processing\r\n            // ...\r\n        } \r\n        catch (MalformedURLException e)\r\n        {\r\n            e.printStackTrace();\r\n        }       \r\n```\r\n\r\n\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n      &lt;artifactId&gt;cxf-rt-transports-http&lt;/artifactId&gt;\r\n      &lt;version&gt;2.7.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n      &lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt;\r\n      &lt;version&gt;2.0.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.xml.ws/jaxws-api --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nThis is a list of errors from the compiler:\r\n\r\n![enter image description here](https://i.stack.imgur.com/bFB7I.png)\r\n\r\nP.S\r\n\r\nPassword encryption methods and login details have been changed for the needs of the question :)\r\n\r\n","title":"Is there any specific library to fetch port API?","body":"<p>I am writing a web application at work that uses database resources that we have in Azure SQL on an external server and for this purpose I downloaded the drivers, uploaded the appropriate code to pom.xml and everything works, but I still need to connect to our &quot;IDOSELL&quot; application it has tab for developers. I was looking for information there, everything seemed fine for communication I used wsdl (which contains soap) and something is going on here, from what the compiler spit out everything indicates that some class is missing, which is why specific object / method definitions are underlined with the information &quot;cannot be resolved to a type&quot;. The question is do you have any ideas what I could have done wrong?</p>\n<p>(Below I attach the necessary code and a fragment of the pom.xml file)</p>\n<pre><code>package app_008;\n   \nimport java.io.UnsupportedEncodingException;    \nimport java.security.MessageDigest;            \nimport java.security.NoSuchAlgorithmException;  \nimport java.text.SimpleDateFormat;             \nimport java.util.Date;                         \nimport java.net.MalformedURLException;        \nimport java.net.URL;                          \nimport javax.xml.namespace.QName;              \nimport javax.xml.ws.Service;    \n\npublic class App \n{\n    public static String generateKey(String hashedPassword) \n    {\n       ........\n    }\n\n    public static String hashPassword(String password) \n    {\n       ........\n    }\n\n    public static void main(String[] args) throws Exception \n    {\n        try \n        {\n            // Creating a web service client for an API service\n            URL wsdlURL = new URL(&quot;https://instalator/api/?wsdl&quot;);\n            QName serviceName = new QName(&quot;http://instalator/api/&quot;,                                                  &quot;ApiOrdersService&quot;);\n            Service service = Service.create(wsdlURL, serviceName);\n    \n            //Get Port API\n            ApiOrdersPortType apiPort = service.getPort(ApiOrdersPortType.class);\n    \n            // Credential setting\n            String userLogin = &quot;userLogin&quot;;\n            String authenticateKey = &quot;authenticateKey&quot;;\n    \n            // Session key generation based on password hash and date\n            String hashedPassword = hashPassword(&quot;yourPassword&quot;);\n            String sessionKey = generateKey(hashedPassword);\n    \n            // Sending an API request\n            GetPackagesRequestType request = new GetPackagesRequestType();\n            request.setAuthenticate(new AuthenticateType());\n            request.getAuthenticate().setUserLogin(userLogin);\n            request.getAuthenticate().setAuthenticateKey(authenticateKey);\n    \n            //Adding other request parameters\n            ParamsType params = new ParamsType();\n            params.setDeliveryPackageNumbers(new String[] { &quot;deliveryPackageNumbers&quot; });\n            params.setEvents(new GetPackagesSystemItemRequestTypes[] { new  GetPackagesSystemItemRequestTypes() });\n            params.getEvents()[0].setEventType(EventType.ORDER);\n            params.getEvents()[0].setEventsIds(new int[] { 1 });\n            params.setReturnLabels(true);\n            request.setParams(params);\n    \n            // API method call\n            GetPackagesResponseType response = apiPort.getPackages(request);\n    \n            // Response processing\n            // ...\n        } \n        catch (MalformedURLException e)\n        {\n            e.printStackTrace();\n        }       \n</code></pre>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n      &lt;artifactId&gt;cxf-rt-transports-http&lt;/artifactId&gt;\n      &lt;version&gt;2.7.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n      &lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt;\n      &lt;version&gt;2.0.9&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;!-- https://mvnrepository.com/artifact/javax.xml.ws/jaxws-api --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2.6&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>This is a list of errors from the compiler:</p>\n<p><img src=\"https://i.stack.imgur.com/bFB7I.png\" alt=\"enter image description here\" /></p>\n<p>P.S</p>\n<p>Password encryption methods and login details have been changed for the needs of the question :)</p>\n"},{"tags":["java","spring","spring-boot","gradle","jar"],"answers":[{"tags":[],"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1566839229,"creation_date":1566839229,"answer_id":57662128,"question_id":57662024,"body_markdown":"Disable **bootJar** in your `build.gradle`\r\n\r\n    bootJar {\r\n       enabled = false\r\n    }","title":"Gradle building Spring Boot library without Main Class","body":"<p>Disable <strong>bootJar</strong> in your <code>build.gradle</code></p>\n\n<pre><code>bootJar {\n   enabled = false\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16297526,"reputation":193,"user_id":11769408,"display_name":"Geoffrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690368098,"creation_date":1690368098,"answer_id":76770423,"question_id":57662024,"body_markdown":"In my case by using `gradle kotlin dsl`:\r\n\r\n\r\n    import org.jetbrains.kotlin.gradle.tasks.KotlinCompile\r\n    import org.springframework.boot.gradle.tasks.bundling.BootJar\r\n    \r\n    tasks.getByName&lt;BootJar&gt;(&quot;bootJar&quot;) {\r\n        enabled = false\r\n    }\r\n    \r\n    tasks.getByName&lt;Jar&gt;(&quot;jar&quot;) {\r\n        enabled = true\r\n    }\r\n\r\nSolved the issue.\r\n\r\nsource:\r\nhttps://github.com/spring-projects/spring-boot/issues/10238#issuecomment-544227301\r\n\r\n","title":"Gradle building Spring Boot library without Main Class","body":"<p>In my case by using <code>gradle kotlin dsl</code>:</p>\n<pre><code>import org.jetbrains.kotlin.gradle.tasks.KotlinCompile\nimport org.springframework.boot.gradle.tasks.bundling.BootJar\n\ntasks.getByName&lt;BootJar&gt;(&quot;bootJar&quot;) {\n    enabled = false\n}\n\ntasks.getByName&lt;Jar&gt;(&quot;jar&quot;) {\n    enabled = true\n}\n</code></pre>\n<p>Solved the issue.</p>\n<p>source:\n<a href=\"https://github.com/spring-projects/spring-boot/issues/10238#issuecomment-544227301\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/10238#issuecomment-544227301</a></p>\n"}],"owner":{"account_id":880958,"reputation":5860,"user_id":222676,"accept_rate":76,"display_name":"Richard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13051,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":57662128,"answer_count":2,"score":21,"last_activity_date":1690368098,"creation_date":1566838707,"question_id":57662024,"body_markdown":"I am trying to build a Spring Boot/Gradle project and create a jar without a main class. My purpose is that this project is a library that will be pulled in by other projects therefore the library project does not require a main class to run. Unfortunately, no matter what kind of gradle config I write I keep getting errors when I try to `build install` about not having a main class or not being able to find the `bootJar` task.\r\n\r\nHere&#39;s what my gradle file looks like:\r\n\r\n    plugins {\r\n        id &#39;org.springframework.boot&#39; version &#39;2.1.7.RELEASE&#39; apply false\r\n    }\r\n    \r\n    apply plugin: &#39;io.spring.dependency-management&#39;\r\n    apply plugin: &#39;maven&#39;\r\n    \r\n    dependencyManagement {\r\n        imports {\r\n            mavenBom org.springframework.boot.gradle.plugin.SpringBootPlugin.BOM_COORDINATES\r\n        }\r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    jar {\r\n        enabled = true\r\n    }\r\n    \r\n    bootJar.dependsOn fooTask\r\n\r\nBut when I run this I get the following error:\r\n\r\n&gt; Could not get unknown property &#39;bootJar&#39; for root project\r\n&gt; &#39;foo-library&#39; of type org.gradle.api.Project.\r\n\r\nWhat in my configuration needs to change?","title":"Gradle building Spring Boot library without Main Class","body":"<p>I am trying to build a Spring Boot/Gradle project and create a jar without a main class. My purpose is that this project is a library that will be pulled in by other projects therefore the library project does not require a main class to run. Unfortunately, no matter what kind of gradle config I write I keep getting errors when I try to <code>build install</code> about not having a main class or not being able to find the <code>bootJar</code> task.</p>\n\n<p>Here's what my gradle file looks like:</p>\n\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.1.7.RELEASE' apply false\n}\n\napply plugin: 'io.spring.dependency-management'\napply plugin: 'maven'\n\ndependencyManagement {\n    imports {\n        mavenBom org.springframework.boot.gradle.plugin.SpringBootPlugin.BOM_COORDINATES\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\njar {\n    enabled = true\n}\n\nbootJar.dependsOn fooTask\n</code></pre>\n\n<p>But when I run this I get the following error:</p>\n\n<blockquote>\n  <p>Could not get unknown property 'bootJar' for root project\n  'foo-library' of type org.gradle.api.Project.</p>\n</blockquote>\n\n<p>What in my configuration needs to change?</p>\n"},{"tags":["java","jvm","interpreter","jit"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1655306201,"post_id":72633781,"comment_id":128302519,"body_markdown":"JIT means “just in time”. So the only thing that determines whether a compiler is a JIT compiler, is the time it does its work. None of the other properties are relevant for this classification.","body":"JIT means “just in time”. So the only thing that determines whether a compiler is a JIT compiler, is the time it does its work. None of the other properties are relevant for this classification."},{"owner":{"account_id":15541750,"reputation":31,"user_id":19345692,"display_name":"A_Weierstrass"},"score":0,"creation_date":1655382635,"post_id":72633781,"comment_id":128322458,"body_markdown":"Thanks for the comment. So if a JIT compiler compiles source code on the fly, and runs the compiled object code, why is a template interpreter not a JIT compiler? The quote says that the template interpreter &quot;translates code from the language into native calls one opcode at a time&quot;.","body":"Thanks for the comment. So if a JIT compiler compiles source code on the fly, and runs the compiled object code, why is a template interpreter not a JIT compiler? The quote says that the template interpreter &quot;translates code from the language into native calls one opcode at a time&quot;."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1655385324,"post_id":72633781,"comment_id":128323401,"body_markdown":"Mind that the cite starts with “*Making the distinction between compilers and interpreters yet again even more vague…*”. There is no clear line that everyone agrees on. More than often, the classification depends on what you are comparing with. An author having the HotSpot JVM in mind, where a template interpreter and a “real” JIT compiler exists, tends to insist that the former is not a compiler. I’ve seen the opposite in the past, a BASIC dialect that had a classical interpreter and a template based translator and its users tended to call the latter “compiler”, for obvious reasons.","body":"Mind that the cite starts with “<i>Making the distinction between compilers and interpreters yet again even more vague…</i>”. There is no clear line that everyone agrees on. More than often, the classification depends on what you are comparing with. An author having the HotSpot JVM in mind, where a template interpreter and a “real” JIT compiler exists, tends to insist that the former is not a compiler. I’ve seen the opposite in the past, a BASIC dialect that had a classical interpreter and a template based translator and its users tended to call the latter “compiler”, for obvious reasons."},{"owner":{"account_id":15541750,"reputation":31,"user_id":19345692,"display_name":"A_Weierstrass"},"score":0,"creation_date":1655396348,"post_id":72633781,"comment_id":128327830,"body_markdown":"So what are the key differences between them within HS JVM? Is the following interpretation correct?\n\nBytecode is interpreted, stats recorded, and repeated or slow methods are sent to the JIT compiler for translation and saved in an array, which is used by the interpreter. So what makes it a _template_ interpreter is that first checks the array for translated code, and then parses like a &quot;normal&quot; interpretator if the bytecode is not mapped there? So then in fact it is not making the translation per se, and thus the bold part above (&quot;translates code from the language...&quot;) is a bit misleading?","body":"So what are the key differences between them within HS JVM? Is the following interpretation correct?  Bytecode is interpreted, stats recorded, and repeated or slow methods are sent to the JIT compiler for translation and saved in an array, which is used by the interpreter. So what makes it a <i>template</i> interpreter is that first checks the array for translated code, and then parses like a &quot;normal&quot; interpretator if the bytecode is not mapped there? So then in fact it is not making the translation per se, and thus the bold part above (&quot;translates code from the language...&quot;) is a bit misleading?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1655452545,"post_id":72633781,"comment_id":128340458,"body_markdown":"Honestly, I never dug that deep into the interpreter, to find out whether it does actually translate to a series of native calls into the templates or still has a “read IR, call template” loop. I know that there are templates and that there’s dynamic code generation involved (your can print the result using `-XX:+UnlockDiagnosticVMOptions -XX:+PrintInterpreter`). They cover all instructions and even additional non-standard instructions which are generated during the execution to optimize. So there’s definitely translation going on, but not necessarily translation to native code.","body":"Honestly, I never dug that deep into the interpreter, to find out whether it does actually translate to a series of native calls into the templates or still has a “read IR, call template” loop. I know that there are templates and that there’s dynamic code generation involved (your can print the result using <code>-XX:+UnlockDiagnosticVMOptions -XX:+PrintInterpreter</code>). They cover all instructions and even additional non-standard instructions which are generated during the execution to optimize. So there’s definitely translation going on, but not necessarily translation to native code."}],"answers":[{"tags":[],"owner":{"account_id":25345227,"reputation":157,"user_id":19163024,"display_name":"Владислав Король"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690368025,"creation_date":1690368025,"answer_id":76770414,"question_id":72633781,"body_markdown":"The powerful advantage of Just-in-Time compilers is that they possess access to the runtime data and therefore can generate machine code tailored to the specific needs. The path to performance promise JIT compilers hold is being specific: the more specific and situational your case is, the more tailored code you can generate that could squeeze more performance. This is the reason why big projects like Chromium reject standard containers in the STL but create their own: the more general your code needs to be and serve multitude of cases, the least assumptions you can make about it that would allow you to perform better optimisations. If you are more curious what a difference JITs can make, I recommend [this video][1] that describes how an engineer accelerated hashmaps by 100 times compared to standard C++ and Rust hashtables by making more and more assumptions about it.\r\n\r\nSo, the whole purpose of JIT compilers is to generate code that will accomodated to the very situational conditions in the runtime. To do this, they gather profiling data as the code is executed and use it to perform a verity of [profile-guided optimisations][2] that can yield quite impressive boosts. In case of template interpreters, they don&#39;t really do any of these but they are aimed to reduce the overhead of instruction dispatching: normally if you would pass each instruction through a switch statement, you get a high degree of [branch unpredictability][3]. Over time, it accumulates and results in substential linear overhead of dispatching instrucitons alone. \r\n\r\nYou may say that compilers can optimise switch statements into jumptables by grouping the code into the cases as function pointers/labels and plugging the value into the array, and that&#39;s indeed what template interpreters do. They contain all of the implementations of their instructions as host&#39;s machine code that they retrieve using the instruction itself as a key. If instructions are represented as enum values, this allows to efficiently plugging it into the array as the index essentially taking only 2 CPU instructions to dispatch the code. However, template interpreters are preferred over switch statements because they are explicit and you don&#39;t depend on compiler optimising it, and they allow you to control the process of interpretation on the low level. As an example, if your functions that you call for run the instructions are stored as the raw machine code object, then they make take different sizes, and then you could make your own hashing function to access the proper fragment irregularly, allowing template intepreters to be more flexible and independent off specific compiler. \r\n\r\nSo far it seems that templates are alike reusable compilers, but you can notice a significant difference between them: they don&#39;t do any optimisations and only call pre-compiled handlers for each instruction. JIT compilers, aside from allocating and prepolating the memory with the same code, would also see profiling data and transform this code dynamically based on the runtime needs. On top of that, since the code is stored separately in the memory, you could adapt it as the conditions change and transform on the fly, which you cannot do with interpreters.\r\n\r\nIn conclusion, template interpreters are used only to run individula bytecode/IR instructions on themselves, and due to their simplicity they cannot do much aside from that. The task of interpreter is to minimise the overhead of itnerpreting the code and call the next handler as quickly as possible. On the other hand, JIT compilers are intended to be able to optimise the code on the fly, hence they allocate the memory where it&#39;s stored and can be manipulated.  \r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=DMQ_HcNSOAI\r\n  [2]: https://en.wikipedia.org/wiki/Profile-guided_optimization\r\n  [3]: https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array","title":"Difference between template interpreter and JIT compiler","body":"<p>The powerful advantage of Just-in-Time compilers is that they possess access to the runtime data and therefore can generate machine code tailored to the specific needs. The path to performance promise JIT compilers hold is being specific: the more specific and situational your case is, the more tailored code you can generate that could squeeze more performance. This is the reason why big projects like Chromium reject standard containers in the STL but create their own: the more general your code needs to be and serve multitude of cases, the least assumptions you can make about it that would allow you to perform better optimisations. If you are more curious what a difference JITs can make, I recommend <a href=\"https://www.youtube.com/watch?v=DMQ_HcNSOAI\" rel=\"nofollow noreferrer\">this video</a> that describes how an engineer accelerated hashmaps by 100 times compared to standard C++ and Rust hashtables by making more and more assumptions about it.</p>\n<p>So, the whole purpose of JIT compilers is to generate code that will accomodated to the very situational conditions in the runtime. To do this, they gather profiling data as the code is executed and use it to perform a verity of <a href=\"https://en.wikipedia.org/wiki/Profile-guided_optimization\" rel=\"nofollow noreferrer\">profile-guided optimisations</a> that can yield quite impressive boosts. In case of template interpreters, they don't really do any of these but they are aimed to reduce the overhead of instruction dispatching: normally if you would pass each instruction through a switch statement, you get a high degree of <a href=\"https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array\">branch unpredictability</a>. Over time, it accumulates and results in substential linear overhead of dispatching instrucitons alone.</p>\n<p>You may say that compilers can optimise switch statements into jumptables by grouping the code into the cases as function pointers/labels and plugging the value into the array, and that's indeed what template interpreters do. They contain all of the implementations of their instructions as host's machine code that they retrieve using the instruction itself as a key. If instructions are represented as enum values, this allows to efficiently plugging it into the array as the index essentially taking only 2 CPU instructions to dispatch the code. However, template interpreters are preferred over switch statements because they are explicit and you don't depend on compiler optimising it, and they allow you to control the process of interpretation on the low level. As an example, if your functions that you call for run the instructions are stored as the raw machine code object, then they make take different sizes, and then you could make your own hashing function to access the proper fragment irregularly, allowing template intepreters to be more flexible and independent off specific compiler.</p>\n<p>So far it seems that templates are alike reusable compilers, but you can notice a significant difference between them: they don't do any optimisations and only call pre-compiled handlers for each instruction. JIT compilers, aside from allocating and prepolating the memory with the same code, would also see profiling data and transform this code dynamically based on the runtime needs. On top of that, since the code is stored separately in the memory, you could adapt it as the conditions change and transform on the fly, which you cannot do with interpreters.</p>\n<p>In conclusion, template interpreters are used only to run individula bytecode/IR instructions on themselves, and due to their simplicity they cannot do much aside from that. The task of interpreter is to minimise the overhead of itnerpreting the code and call the next handler as quickly as possible. On the other hand, JIT compilers are intended to be able to optimise the code on the fly, hence they allocate the memory where it's stored and can be manipulated.</p>\n"}],"owner":{"account_id":15541750,"reputation":31,"user_id":19345692,"display_name":"A_Weierstrass"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1690368025,"creation_date":1655305737,"question_id":72633781,"body_markdown":"Below is an excerpt from Wikipedia text on [interpreters](https://en.wikipedia.org/w/index.php?title=Interpreter_(computing)&amp;oldid=1089309070#Template_Interpreter), specifically the section on template interpreter. The answer to my question is technically there, in bold. But I still do not quite understand the difference, probably because I have very low-level knowledge of low-level processes, pun intended (sorry). \r\n\r\nIt is saying that the JIT compiler creates sequences of CPU-executable instructions from the entire code segment. What do they mean by &quot;from the entire code segment&quot;? To me, this sounds like a normal compiler. I thought JIT compilation meant that an interpretor is run (parsing and executing statement-by-statement) and then repeated instructions are kept track of and translated into native machine code to be used next time it is needed, like a compiler does. But this sounds like the template interpreter to me, which I interpret as translating often-appearing statements and saving the statements and respective translations as key-value mappings in an array. So wherein lies the difference? Is it how the JIT saves the native machine instructions compiled from bytecode-sections (i.e. not in an array with mappings, then if so how is it saved)? Is it the way that the blocks of bytecode that are compiled into native machine code are partitioned; i.e. that they are translated and saved as mappings by opcode (if i understood this correctly) vs by something else? etc\r\n\r\n&gt; &quot;Making the distinction between compilers and interpreters yet again even more vague is a special interpreter design known as a template interpreter. Rather than implement the execution of code by virtue of a large switch statement containing every possible bytecode, while operating on a software stack or a tree walk, a template interpreter maintains a large array of bytecode (or any efficient intermediate representation) mapped directly to corresponding native machine instructions that can be executed on the host hardware as key value pairs,[15][16] known as a &quot;Template&quot;. When the particular code segment is executed the interpreter simply loads the opcode mapping in the template and directly runs it on the hardware.[17][18] **Due to its design, the template interpreter very strongly resembles a just-in-time compiler rather than a traditional interpreter, however it is technically not a JIT due to the fact that it merely translates code from the language into native calls one opcode at a time rather than creating optimized sequences of CPU executable instructions from the entire code segment.** Due to the interpreter&#39;s simple design of simply passing calls directly to the hardware rather than implementing them directly, it is much faster than every other type, even bytecode interpreters, and to an extent less prone to bugs, but as a tradeoff is more difficult to maintain due to the interpreter having to support translation to multiple different architectures instead of a platform independent virtual machine/stack. To date, the only template interpreter implementation of a language to exist is the interpreter within the HotSpot/OpenJDK Java Virtual Machine reference implementation.[15]&quot;","title":"Difference between template interpreter and JIT compiler","body":"<p>Below is an excerpt from Wikipedia text on <a href=\"https://en.wikipedia.org/w/index.php?title=Interpreter_(computing)&amp;oldid=1089309070#Template_Interpreter\" rel=\"nofollow noreferrer\">interpreters</a>, specifically the section on template interpreter. The answer to my question is technically there, in bold. But I still do not quite understand the difference, probably because I have very low-level knowledge of low-level processes, pun intended (sorry).</p>\n<p>It is saying that the JIT compiler creates sequences of CPU-executable instructions from the entire code segment. What do they mean by &quot;from the entire code segment&quot;? To me, this sounds like a normal compiler. I thought JIT compilation meant that an interpretor is run (parsing and executing statement-by-statement) and then repeated instructions are kept track of and translated into native machine code to be used next time it is needed, like a compiler does. But this sounds like the template interpreter to me, which I interpret as translating often-appearing statements and saving the statements and respective translations as key-value mappings in an array. So wherein lies the difference? Is it how the JIT saves the native machine instructions compiled from bytecode-sections (i.e. not in an array with mappings, then if so how is it saved)? Is it the way that the blocks of bytecode that are compiled into native machine code are partitioned; i.e. that they are translated and saved as mappings by opcode (if i understood this correctly) vs by something else? etc</p>\n<blockquote>\n<p>&quot;Making the distinction between compilers and interpreters yet again even more vague is a special interpreter design known as a template interpreter. Rather than implement the execution of code by virtue of a large switch statement containing every possible bytecode, while operating on a software stack or a tree walk, a template interpreter maintains a large array of bytecode (or any efficient intermediate representation) mapped directly to corresponding native machine instructions that can be executed on the host hardware as key value pairs,[15][16] known as a &quot;Template&quot;. When the particular code segment is executed the interpreter simply loads the opcode mapping in the template and directly runs it on the hardware.[17][18] <strong>Due to its design, the template interpreter very strongly resembles a just-in-time compiler rather than a traditional interpreter, however it is technically not a JIT due to the fact that it merely translates code from the language into native calls one opcode at a time rather than creating optimized sequences of CPU executable instructions from the entire code segment.</strong> Due to the interpreter's simple design of simply passing calls directly to the hardware rather than implementing them directly, it is much faster than every other type, even bytecode interpreters, and to an extent less prone to bugs, but as a tradeoff is more difficult to maintain due to the interpreter having to support translation to multiple different architectures instead of a platform independent virtual machine/stack. To date, the only template interpreter implementation of a language to exist is the interpreter within the HotSpot/OpenJDK Java Virtual Machine reference implementation.[15]&quot;</p>\n</blockquote>\n"},{"tags":["java","android","mvvm"],"owner":{"account_id":16022005,"reputation":13,"user_id":11611483,"display_name":"Mustafa Shama"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690367896,"creation_date":1690367896,"question_id":76770402,"body_markdown":"I have my TransActionsRepository class that conrains method of insert, delete, getall that have access to database. I am using foregroundservice that I need to get access to database into the foregroundservice class, but I can&#39;t seem to find a way to make an instance of TransActionsRepository inside foregroundservice so I can use it&#39;s method to access the database. \r\n\r\nAny idea on how to do that? \r\nkeep in mind I am using MVVM architecture \r\n","title":"Android - the connection between foregroundservice and repository in mvvm","body":"<p>I have my TransActionsRepository class that conrains method of insert, delete, getall that have access to database. I am using foregroundservice that I need to get access to database into the foregroundservice class, but I can't seem to find a way to make an instance of TransActionsRepository inside foregroundservice so I can use it's method to access the database.</p>\n<p>Any idea on how to do that?\nkeep in mind I am using MVVM architecture</p>\n"},{"tags":["java","scala","apache-kafka","jvm","java-home"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690276057,"post_id":76761010,"comment_id":135327179,"body_markdown":"`readlink -f &quot;$(which java)&quot;` is what you need to show the real path. The value is the path without `/bin/java`","body":"<code>readlink -f &quot;$(which java)&quot;</code> is what you need to show the real path. The value is the path without <code>&#47;bin&#47;java</code>"},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":1,"creation_date":1690280010,"post_id":76761010,"comment_id":135328029,"body_markdown":"Does this answer your question? [Why can I use javac &amp; java without having JAVA\\_HOME set?](https://stackoverflow.com/questions/69735512/why-can-i-use-javac-java-without-having-java-home-set)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/69735512/why-can-i-use-javac-java-without-having-java-home-set\">Why can I use javac &amp; java without having JAVA_HOME set?</a>"},{"owner":{"account_id":45250,"reputation":2447,"user_id":133330,"display_name":"Darren Bishop"},"score":0,"creation_date":1690367741,"post_id":76761010,"comment_id":135342666,"body_markdown":"I feel the essence of `JAVA_HOME` has been missed: There are many JVM applications that, when built and bundled, ship with a wrapper launch/bootstrap script that have a hard dependency on `JAVA_HOME`; this shifts the responsibility to the user to resolve which Java to use in a very deliberate way; it does not matter how many versions and variants of Java you have installed (or merely downloaded and expanded), if `JAVA_HOME` is not set, the application/service will not start","body":"I feel the essence of <code>JAVA_HOME</code> has been missed: There are many JVM applications that, when built and bundled, ship with a wrapper launch/bootstrap script that have a hard dependency on <code>JAVA_HOME</code>; this shifts the responsibility to the user to resolve which Java to use in a very deliberate way; it does not matter how many versions and variants of Java you have installed (or merely downloaded and expanded), if <code>JAVA_HOME</code> is not set, the application/service will not start"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1690368522,"post_id":76761010,"comment_id":135342821,"body_markdown":"I have run many JVM applications but have never encountered _any_ application that absolutely _needs_ JAVA_HOME set. I have many versions of Java installed, but I don&#39;t define JAVA_HOME. All applications (Gradle, Maven, IDEs, Kafka, Kotlin, etc) will use the `java` command from the PATH. The JAVA_HOME can be set as an _override_ if required.","body":"I have run many JVM applications but have never encountered <i>any</i> application that absolutely <i>needs</i> JAVA_HOME set. I have many versions of Java installed, but I don&#39;t define JAVA_HOME. All applications (Gradle, Maven, IDEs, Kafka, Kotlin, etc) will use the <code>java</code> command from the PATH. The JAVA_HOME can be set as an <i>override</i> if required."},{"owner":{"account_id":45250,"reputation":2447,"user_id":133330,"display_name":"Darren Bishop"},"score":0,"creation_date":1690473565,"post_id":76761010,"comment_id":135362086,"body_markdown":"@g00se that is cool, but don&#39;t think it&#39;s POSIX/portable? And not available on Windows, presumable?","body":"@g00se that is cool, but don&#39;t think it&#39;s POSIX/portable? And not available on Windows, presumable?"},{"owner":{"account_id":45250,"reputation":2447,"user_id":133330,"display_name":"Darren Bishop"},"score":0,"creation_date":1690474644,"post_id":76761010,"comment_id":135362294,"body_markdown":"@k314159 ... &#39;I apologize for the confusion in my previous responses&#39; ;p if `JAVA_HOME` is not set, the Kafka launch script at least picks whatever `java` it can find.","body":"@k314159 ... &#39;I apologize for the confusion in my previous responses&#39; ;p if <code>JAVA_HOME</code> is not set, the Kafka launch script at least picks whatever <code>java</code> it can find."},{"owner":{"account_id":45250,"reputation":2447,"user_id":133330,"display_name":"Darren Bishop"},"score":0,"creation_date":1690474922,"post_id":76761010,"comment_id":135362346,"body_markdown":"@g00se just another note: `readlink` won&#39;t work on shims, as they are not symbolic links, but rather are scripts that - sometimes do some bootstrapping, then - delegate via `exec`","body":"@g00se just another note: <code>readlink</code> won&#39;t work on shims, as they are not symbolic links, but rather are scripts that - sometimes do some bootstrapping, then - delegate via <code>exec</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690474959,"post_id":76761010,"comment_id":135362352,"body_markdown":"[readlink](http://gnu.org/software/coreutils) is a GNU utility, so no, not portable. As for shims, no, it won&#39;t work. But on Unix-based systems, `/usr/bin/java` is normally a link","body":"<a href=\"http://gnu.org/software/coreutils\" rel=\"nofollow noreferrer\">readlink</a> is a GNU utility, so no, not portable. As for shims, no, it won&#39;t work. But on Unix-based systems, <code>&#47;usr&#47;bin&#47;java</code> is normally a link"}],"answers":[{"tags":[],"owner":{"account_id":45250,"reputation":2447,"user_id":133330,"display_name":"Darren Bishop"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1690275106,"creation_date":1690275106,"answer_id":76761011,"question_id":76761010,"body_markdown":"While `alternatives` may remain popular on *nix systems, I mostly use [jenv][1] and occasionally [sdkman][2]; they all introduce a level of indirection, if `/usr/bin/java` was not obscure enough.\r\n\r\nIf you are happy with the version of `java` on your `PATH` (`java -version`), you can query `java` directly for `java.home`:\r\n\r\n```\r\njava -XshowSettings:properties -version |&amp; grep -Po &#39;(?&lt;=java.home = )(.*)&#39;\r\n```\r\n\r\nThis is not available in Java 6:\r\n```\r\ndocker run --rm openjdk:6 java -XshowSettings:properties -version\r\nUnrecognized option: -XshowSettings:properties\r\nCould not create the Java virtual machine.\r\n```\r\n\r\nIt is available since Java 7:\r\n```\r\ndocker run --rm openjdk:7 bash -c &quot;java -XshowSettings:properties -version |&amp; grep -Po &#39;(?&lt;=java.home = |java.home=)(.*)&#39;&quot;\r\n/usr/lib/jvm/java-7-openjdk-armhf/jre\r\n```\r\n\r\nFor ease of use, create an alias:\r\n\r\n```\r\nalias java_home=&quot;java -XshowSettings:properties -version |&amp; grep -Po &#39;(?&lt;=java.home = |java.home=)(.*)&#39; &quot;\r\n```\r\n\r\n### Alternatives:\r\n\r\n#### `jrunscript` or `jshell`\r\n\r\nSome distributions provide `jrunscript` or `jshell`; these can be used to run Java code as script:\r\n\r\n```\r\njrunscript -Dpolyglot.js.nashorn-compat=true -e &#39;java.lang.System.out.println(java.lang.System.getProperty(&quot;java.home&quot;));&#39;\r\n```\r\n\r\nor \r\n\r\n```\r\njshell -J-Dpolyglot.js.nashorn-compat=true - &lt;&lt;&lt;&#39;java.lang.System.out.println(java.lang.System.getProperty(&quot;java.home&quot;));&#39;\r\n```\r\n\r\nNote this approach and these tools are old and should be considered deprecated.\r\n\r\n#### Java as a Source Interpreter\r\n\r\nSince [Java 11][3] you can execute Java source code as a script directly on the `java` binary:\r\n\r\n```\r\ncat &lt;&lt;EOF &gt; ./java-home\r\n#! /usr/bin/java --source 11\r\n\r\npublic class JavaHome {\r\n    public static void main(String[] args) {\r\n        System.out.println(System.getProperty(&quot;java.home&quot;));\r\n    }\r\n}\r\nEOF\r\n\r\nchmod u+x ./java-home\r\n\r\n./java-home\r\n/usr/lib/jvm/java-11-openjdk-arm64\r\n\r\n```\r\n\r\n  [1]: https://www.jenv.be\r\n  [2]: https://sdkman.io\r\n  [3]: https://openjdk.org/jeps/330","title":"Where is Java&#39;s home; what to set JAVA_HOME to","body":"<p>While <code>alternatives</code> may remain popular on *nix systems, I mostly use <a href=\"https://www.jenv.be\" rel=\"nofollow noreferrer\">jenv</a> and occasionally <a href=\"https://sdkman.io\" rel=\"nofollow noreferrer\">sdkman</a>; they all introduce a level of indirection, if <code>/usr/bin/java</code> was not obscure enough.</p>\n<p>If you are happy with the version of <code>java</code> on your <code>PATH</code> (<code>java -version</code>), you can query <code>java</code> directly for <code>java.home</code>:</p>\n<pre><code>java -XshowSettings:properties -version |&amp; grep -Po '(?&lt;=java.home = )(.*)'\n</code></pre>\n<p>This is not available in Java 6:</p>\n<pre><code>docker run --rm openjdk:6 java -XshowSettings:properties -version\nUnrecognized option: -XshowSettings:properties\nCould not create the Java virtual machine.\n</code></pre>\n<p>It is available since Java 7:</p>\n<pre><code>docker run --rm openjdk:7 bash -c &quot;java -XshowSettings:properties -version |&amp; grep -Po '(?&lt;=java.home = |java.home=)(.*)'&quot;\n/usr/lib/jvm/java-7-openjdk-armhf/jre\n</code></pre>\n<p>For ease of use, create an alias:</p>\n<pre><code>alias java_home=&quot;java -XshowSettings:properties -version |&amp; grep -Po '(?&lt;=java.home = |java.home=)(.*)' &quot;\n</code></pre>\n<h3>Alternatives:</h3>\n<h4><code>jrunscript</code> or <code>jshell</code></h4>\n<p>Some distributions provide <code>jrunscript</code> or <code>jshell</code>; these can be used to run Java code as script:</p>\n<pre><code>jrunscript -Dpolyglot.js.nashorn-compat=true -e 'java.lang.System.out.println(java.lang.System.getProperty(&quot;java.home&quot;));'\n</code></pre>\n<p>or</p>\n<pre><code>jshell -J-Dpolyglot.js.nashorn-compat=true - &lt;&lt;&lt;'java.lang.System.out.println(java.lang.System.getProperty(&quot;java.home&quot;));'\n</code></pre>\n<p>Note this approach and these tools are old and should be considered deprecated.</p>\n<h4>Java as a Source Interpreter</h4>\n<p>Since <a href=\"https://openjdk.org/jeps/330\" rel=\"nofollow noreferrer\">Java 11</a> you can execute Java source code as a script directly on the <code>java</code> binary:</p>\n<pre><code>cat &lt;&lt;EOF &gt; ./java-home\n#! /usr/bin/java --source 11\n\npublic class JavaHome {\n    public static void main(String[] args) {\n        System.out.println(System.getProperty(&quot;java.home&quot;));\n    }\n}\nEOF\n\nchmod u+x ./java-home\n\n./java-home\n/usr/lib/jvm/java-11-openjdk-arm64\n\n</code></pre>\n"}],"owner":{"account_id":45250,"reputation":2447,"user_id":133330,"display_name":"Darren Bishop"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76761011,"answer_count":1,"score":0,"last_activity_date":1690367833,"creation_date":1690275106,"question_id":76761010,"body_markdown":"I am trying to run a JVM service and it needs `JAVA_HOME` set.\r\n\r\n`java` is on my `PATH`, but it&#39;s not clear what `JAVA_HOME` should be set to:\r\n\r\n```\r\nwhich java\r\n/usr/bin/java\r\n```","title":"Where is Java&#39;s home; what to set JAVA_HOME to","body":"<p>I am trying to run a JVM service and it needs <code>JAVA_HOME</code> set.</p>\n<p><code>java</code> is on my <code>PATH</code>, but it's not clear what <code>JAVA_HOME</code> should be set to:</p>\n<pre><code>which java\n/usr/bin/java\n</code></pre>\n"},{"tags":["java","spring-boot","powershell","curl"],"comments":[{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1668618087,"post_id":74464313,"comment_id":131450986,"body_markdown":"Did you tried to create proper property with setter and getter? Maybe JSON deserializer doesn&#39;t work with fields?","body":"Did you tried to create proper property with setter and getter? Maybe JSON deserializer doesn&#39;t work with fields?"},{"owner":{"account_id":16136776,"reputation":172,"user_id":11649050,"display_name":"Thibaut B."},"score":0,"creation_date":1668619416,"post_id":74464313,"comment_id":131451515,"body_markdown":"@talex Yes, I just tried making getters and setters and a constructor also but it didn&#39;t fix the issue.","body":"@talex Yes, I just tried making getters and setters and a constructor also but it didn&#39;t fix the issue."},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":1,"creation_date":1668620258,"post_id":74464313,"comment_id":131451809,"body_markdown":"Try to use `@RequestBody String request` and make sure you backend receive correct json","body":"Try to use <code>@RequestBody String request</code> and make sure you backend receive correct json"},{"owner":{"account_id":16136776,"reputation":172,"user_id":11649050,"display_name":"Thibaut B."},"score":0,"creation_date":1668621095,"post_id":74464313,"comment_id":131452088,"body_markdown":"@talex I tried this, and the json seems to be received correctly, so the issue would come from the json parser or the creation of a new object...","body":"@talex I tried this, and the json seems to be received correctly, so the issue would come from the json parser or the creation of a new object..."}],"answers":[{"tags":[],"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668624217,"creation_date":1668624217,"answer_id":74465655,"question_id":74464313,"body_markdown":"There is a small issue in your CURL request. No need to use an escape character with \\&quot;key\\&quot;. You are using a backslash with double quotes (\\\\&quot;) that is not required.\r\n\r\nPlease try this CURL request.\r\n\r\n```\r\ncurl --request POST --header &quot;Content-Type: application/json&quot; --data &#39;{&quot;key&quot;: 5}&#39; http://localhost:8080/request\r\n```\r\n","title":"Curl POST request to Java SpringBoot backend receives all numbers as 0&#39;s","body":"<p>There is a small issue in your CURL request. No need to use an escape character with &quot;key&quot;. You are using a backslash with double quotes (\\&quot;) that is not required.</p>\n<p>Please try this CURL request.</p>\n<pre><code>curl --request POST --header &quot;Content-Type: application/json&quot; --data '{&quot;key&quot;: 5}' http://localhost:8080/request\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6732610,"reputation":21,"user_id":5188393,"display_name":"Vinayak Bansal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690367579,"creation_date":1690367579,"answer_id":76770349,"question_id":74464313,"body_markdown":"Some only CURL will not work we need to mention in below format:\r\n\r\n    curl.exe --request POST --header &quot;Content-Type: application/json&quot; --data &#39;{&quot;key&quot;: 5}&#39; http://localhost:8080/request","title":"Curl POST request to Java SpringBoot backend receives all numbers as 0&#39;s","body":"<p>Some only CURL will not work we need to mention in below format:</p>\n<pre><code>curl.exe --request POST --header &quot;Content-Type: application/json&quot; --data '{&quot;key&quot;: 5}' http://localhost:8080/request\n</code></pre>\n"}],"owner":{"account_id":16136776,"reputation":172,"user_id":11649050,"display_name":"Thibaut B."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":359,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690367579,"creation_date":1668617582,"question_id":74464313,"body_markdown":"I have a Java SpringBoot backend server and I wanted to test the controller classes with curl. However, whenever I send a request with the following format (in a powershell terminal):\r\n```pwsh\r\ncurl --request POST --header &quot;Content-Type: application/json&quot; --data &#39;{\\&quot;key\\&quot;: 5}&#39; http://localhost:8080/request\r\n```\r\nAll the numerical values are changed to zeroes. And if in the DTO class I change them to `Integer` instead of `int`, then they are received as `null`. For strings, everything works perfectly.\r\n\r\nThis is what my controller methodlooks like:\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;/request&quot;)\r\nclass MyController {\r\n    @PostMapping\r\n    public ResponseEntity&lt;MuseumTO&gt; createMuseum(@RequestBody RequestDTO request) {\r\n        System.out.println(request.key);\r\n\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\nAnd the DTO class:\r\n```java\r\nclass RequestDTO {\r\n    public int key\r\n}\r\n```\r\nGET requests work fine, and I&#39;ve tried with two different backends, so I assume my problem is coming from the curl request&#39;s format. However, I&#39;ve looked online and from what I&#39;ve seen this is supposed to work.","title":"Curl POST request to Java SpringBoot backend receives all numbers as 0&#39;s","body":"<p>I have a Java SpringBoot backend server and I wanted to test the controller classes with curl. However, whenever I send a request with the following format (in a powershell terminal):</p>\n<pre><code>curl --request POST --header &quot;Content-Type: application/json&quot; --data '{\\&quot;key\\&quot;: 5}' http://localhost:8080/request\n</code></pre>\n<p>All the numerical values are changed to zeroes. And if in the DTO class I change them to <code>Integer</code> instead of <code>int</code>, then they are received as <code>null</code>. For strings, everything works perfectly.</p>\n<p>This is what my controller methodlooks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/request&quot;)\nclass MyController {\n    @PostMapping\n    public ResponseEntity&lt;MuseumTO&gt; createMuseum(@RequestBody RequestDTO request) {\n        System.out.println(request.key);\n\n        // ...\n    }\n}\n</code></pre>\n<p>And the DTO class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class RequestDTO {\n    public int key\n}\n</code></pre>\n<p>GET requests work fine, and I've tried with two different backends, so I assume my problem is coming from the curl request's format. However, I've looked online and from what I've seen this is supposed to work.</p>\n"},{"tags":["java","spring-boot","prometheus","circuit-breaker","resilience4j"],"comments":[{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1690367605,"post_id":76759689,"comment_id":135342644,"body_markdown":"Hi, I added an answer to the question please consider to upvote and approve it as answer if it address your requirements cause it took around 1 hour of my time :) otherwise feel free to leave comment if you need more help.","body":"Hi, I added an answer to the question please consider to upvote and approve it as answer if it address your requirements cause it took around 1 hour of my time :) otherwise feel free to leave comment if you need more help."}],"answers":[{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690367527,"creation_date":1690367527,"answer_id":76770338,"question_id":76759689,"body_markdown":"&gt; How to change state of [resilience4j][1] circuit breaker ? (Native Resilience4j)\r\n\r\nYou can simply change the state programmatically using the CircuitBreaker interface, for the spring variant check the next, begin by creating a circuit breaker with suitable constructor or static builder that suits you, the call `transitionToOpenState()`.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n    CircuitBreaker circuitBreaker = CircuitBreaker.ofDefaults(&quot;myCircuitBreaker&quot;);\r\n\r\n    circuitBreaker.transitionToOpenState();\r\n    ...\r\n    circuitBreaker.transitionToHalfOpenState();\r\n    circuitBreaker.transitionToClosedState();\r\n\r\n    ...\r\n\r\n\r\n&gt; How to change state of [resilience4j][1] circuit breaker with spring for testing purpose? (Mockito and Spring bean injection)\r\n\r\n\r\nFirst add the proper version of [Resilence4j][2] and [Mockito][3] dependencies to you `.pom` file.\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.github.resilience4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;resilience4j-spring-boot2&lt;/artifactId&gt;\r\n      &lt;version&gt;&#39;suitable-version&#39;&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n      &lt;version&gt;&#39;suitable-version&#39;&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\nThen create a circuit breaker singleton bean with desired configuration in the spring IOC context.\r\n\r\n\r\n\r\n    @Bean\r\n    public CircuitBreaker lunaticCircuitBreaker() {\r\n      CircuitBreakerConfig circuitBreakerConfig = CircuitBreakerConfig.custom()\r\n        .failureRateThreshold(30)\r\n        .waitDurationInOpenState(Duration.ofMillis(5000))\r\n        ...\r\n        .build();\r\n\r\n      return CircuitBreaker.of(&quot;lunaticCircuitBreaker&quot;, circuitBreakerConfig);\r\n    }\r\n\r\nIn the test file, mock the circuit breaker and call `thenReturn()` to define the behavior of the circuit breaker method when it is called some thing like previous quote we had.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n\r\n    @MockBean\r\n    private CircuitBreaker lunaticCircuitBreaker;\r\n\r\n    ...\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    Mockito.when(lunaticCircuitBreaker.transitionToOpenState()).thenReturn(null);\r\n\r\nThen just invoke the method that calls the circuit breaker in your code.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n\r\n    someService.someMethod(...);\r\n    Mockito.verify(lunaticCircuitBreaker, Mockito.times(1)).transitionToOpenState();\r\n\r\n\r\nAlso note that changing the state of a circuit breaker programmatically should be used with caution, cause it affect the behavior of system. It&#39;s generally recommended to rely on the **automatic state transitions** provided by Resilience4j.\r\n\r\n\r\n  [1]: https://resilience4j.readme.io/docs\r\n  [2]: https://mvnrepository.com/artifact/io.github.resilience4j\r\n  [3]: https://mvnrepository.com/artifact/org.mockito/mockito-core","title":"How to change state of circuit breaker for testing purpose using springboot code","body":"<blockquote>\n<p>How to change state of <a href=\"https://resilience4j.readme.io/docs\" rel=\"nofollow noreferrer\">resilience4j</a> circuit breaker ? (Native Resilience4j)</p>\n</blockquote>\n<p>You can simply change the state programmatically using the CircuitBreaker interface, for the spring variant check the next, begin by creating a circuit breaker with suitable constructor or static builder that suits you, the call <code>transitionToOpenState()</code>.</p>\n\n<pre><code>CircuitBreaker circuitBreaker = CircuitBreaker.ofDefaults(&quot;myCircuitBreaker&quot;);\n\ncircuitBreaker.transitionToOpenState();\n...\ncircuitBreaker.transitionToHalfOpenState();\ncircuitBreaker.transitionToClosedState();\n\n...\n</code></pre>\n<blockquote>\n<p>How to change state of <a href=\"https://resilience4j.readme.io/docs\" rel=\"nofollow noreferrer\">resilience4j</a> circuit breaker with spring for testing purpose? (Mockito and Spring bean injection)</p>\n</blockquote>\n<p>First add the proper version of <a href=\"https://mvnrepository.com/artifact/io.github.resilience4j\" rel=\"nofollow noreferrer\">Resilence4j</a> and <a href=\"https://mvnrepository.com/artifact/org.mockito/mockito-core\" rel=\"nofollow noreferrer\">Mockito</a> dependencies to you <code>.pom</code> file.</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.github.resilience4j&lt;/groupId&gt;\n  &lt;artifactId&gt;resilience4j-spring-boot2&lt;/artifactId&gt;\n  &lt;version&gt;'suitable-version'&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n  &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n  &lt;version&gt;'suitable-version'&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then create a circuit breaker singleton bean with desired configuration in the spring IOC context.</p>\n<pre><code>@Bean\npublic CircuitBreaker lunaticCircuitBreaker() {\n  CircuitBreakerConfig circuitBreakerConfig = CircuitBreakerConfig.custom()\n    .failureRateThreshold(30)\n    .waitDurationInOpenState(Duration.ofMillis(5000))\n    ...\n    .build();\n\n  return CircuitBreaker.of(&quot;lunaticCircuitBreaker&quot;, circuitBreakerConfig);\n}\n</code></pre>\n<p>In the test file, mock the circuit breaker and call <code>thenReturn()</code> to define the behavior of the circuit breaker method when it is called some thing like previous quote we had.</p>\n\n<pre><code>@MockBean\nprivate CircuitBreaker lunaticCircuitBreaker;\n\n...\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>Mockito.when(lunaticCircuitBreaker.transitionToOpenState()).thenReturn(null);\n</code></pre>\n<p>Then just invoke the method that calls the circuit breaker in your code.</p>\n\n<pre><code>someService.someMethod(...);\nMockito.verify(lunaticCircuitBreaker, Mockito.times(1)).transitionToOpenState();\n</code></pre>\n<p>Also note that changing the state of a circuit breaker programmatically should be used with caution, cause it affect the behavior of system. It's generally recommended to rely on the <strong>automatic state transitions</strong> provided by Resilience4j.</p>\n"}],"owner":{"account_id":23102929,"reputation":109,"user_id":17212096,"display_name":"Sachin Mankotia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":336,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690367527,"creation_date":1690263093,"question_id":76759689,"body_markdown":"I have a requirement to generate a prometheus alert if state my resilience4j circuit breaker changes to Open. \r\nIn order to test it, I want to change its state forcefully. Like I can create a test Rest API which can take circuit breaker and state which I want to set. ex : &quot;/changeState/myBreaker/open&quot;. (myBreaker is CB name and open is the state).\r\n\r\nIs there a way to achieve this in springboot code?\r\n\r\n","title":"How to change state of circuit breaker for testing purpose using springboot code","body":"<p>I have a requirement to generate a prometheus alert if state my resilience4j circuit breaker changes to Open.\nIn order to test it, I want to change its state forcefully. Like I can create a test Rest API which can take circuit breaker and state which I want to set. ex : &quot;/changeState/myBreaker/open&quot;. (myBreaker is CB name and open is the state).</p>\n<p>Is there a way to achieve this in springboot code?</p>\n"},{"tags":["java","spring","spring-boot","filenotfoundexception","abbyy"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690374223,"post_id":76769973,"comment_id":135344039,"body_markdown":"`class path resource [com/abbyy/FCEngine/IReadStream.class] cannot be opened because it does not exist at ` seems like the error and pretty clear. Not all your classes are available.","body":"<code>class path resource [com&#47;abbyy&#47;FCEngine&#47;IReadStream.class] cannot be opened because it does not exist at </code> seems like the error and pretty clear. Not all your classes are available."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690708033,"post_id":76769973,"comment_id":135388713,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29036119,"reputation":1,"user_id":22241987,"display_name":"Tarique Aziz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690366881,"creation_date":1690364930,"question_id":76769973,"body_markdown":"I am trying to deploy in tomcat server then I am getting this error.\r\n\r\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/socr-microservices]]\r\n\t\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n\t\t... 43 more\r\n\tCaused by: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.my.BackendApplication]; nested exception is java.io.FileNotFoundException: class path resource [com/abbyy/FCEngine/IReadStream.class] cannot be opened because it does not exist\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:331)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247)\r\n\t\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311)\r\n\t\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112)\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746)\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564)\r\n\t\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\r\n\t\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:745)\r\n\t\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:420)\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\r\n\t\tat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\r\n\t\tat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\r\n\t\tat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\r\n\t\tat org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\r\n\t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5219)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\t... 44 more\r\n\tCaused by: java.io.FileNotFoundException: class path resource [com/abbyy/FCEngine/IReadStream.class] cannot be opened because it does not exist\r\n\t\tat org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:199)\r\n\t\tat org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:55)\r\n\t\tat org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:49)\r\n\t\tat org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103)\r\n\t\tat org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.createMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:86)\r\n\t\tat org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.getMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:73)\r\n\t\tat org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:81)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser.asSourceClass(ConfigurationClassParser.java:696)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser$SourceClass.getInterfaces(ConfigurationClassParser.java:1024)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser.processInterfaces(ConfigurationClassParser.java:386)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:332)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:199)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:304)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:207)\r\n\t\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:175)","title":"Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext. Caused by: org.springframework.beans.factory","body":"<p>I am trying to deploy in tomcat server then I am getting this error.</p>\n<p>Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/socr-microservices]]\nat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\nat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n... 43 more\nCaused by: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.my.BackendApplication]; nested exception is java.io.FileNotFoundException: class path resource [com/abbyy/FCEngine/IReadStream.class] cannot be opened because it does not exist\nat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189)\nat org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:331)\nat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247)\nat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311)\nat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112)\nat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564)\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:745)\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:420)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\nat org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\nat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5219)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n... 44 more\nCaused by: java.io.FileNotFoundException: class path resource [com/abbyy/FCEngine/IReadStream.class] cannot be opened because it does not exist\nat org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:199)\nat org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:55)\nat org.springframework.core.type.classreading.SimpleMetadataReader.(SimpleMetadataReader.java:49)\nat org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103)\nat org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.createMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:86)\nat org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.getMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:73)\nat org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:81)\nat org.springframework.context.annotation.ConfigurationClassParser.asSourceClass(ConfigurationClassParser.java:696)\nat org.springframework.context.annotation.ConfigurationClassParser$SourceClass.getInterfaces(ConfigurationClassParser.java:1024)\nat org.springframework.context.annotation.ConfigurationClassParser.processInterfaces(ConfigurationClassParser.java:386)\nat org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:332)\nat org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250)\nat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:199)\nat org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:304)\nat org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250)\nat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:207)\nat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:175)</p>\n"},{"tags":["java","tomcat"],"comments":[{"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1533926134,"post_id":51779801,"comment_id":90541969,"body_markdown":"How is authentication being done? 403 means that either the server (Tomcat) or the application don&#39;t like your credentials.","body":"How is authentication being done? 403 means that either the server (Tomcat) or the application don&#39;t like your credentials."},{"owner":{"account_id":14046961,"reputation":31,"user_id":10146898,"display_name":"Mintu"},"score":0,"creation_date":1533957707,"post_id":51779801,"comment_id":90549596,"body_markdown":"There is no credentials  required. Application is hosted in the server having direct internet connection .No proxy.","body":"There is no credentials  required. Application is hosted in the server having direct internet connection .No proxy."},{"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":1,"creation_date":1533993561,"post_id":51779801,"comment_id":90556499,"body_markdown":"Umm.... your question has the word *Proxy&quot; right in it. Looks like there is a proxy to me.","body":"Umm.... your question has the word *Proxy&quot; right in it. Looks like there is a proxy to me."}],"owner":{"account_id":14046961,"reputation":31,"user_id":10146898,"display_name":"Mintu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12923,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1690366858,"creation_date":1533880283,"question_id":51779801,"body_markdown":"Sometimes I am getting the following error in Tomcat 7  while calling a third-party service through `HttpURLConnection` object.\r\n\r\n```\r\njava.io.IOException: Unable to tunnel through proxy. Proxy returns &quot;HTTP/1.1 403 Forbidden&quot;\r\n\tsun.net.www.protocol.http.HttpURLConnection.doTunneling(Unknown Source)\r\n\tsun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)\r\n\tsun.net.www.protocol.http.HttpURLConnection.getOutputStream0(Unknown Source)\r\n\tsun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source)\r\n\tsun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(Unknown Source)\r\n\tcom.myapp.QueryAPI.SearchDealerTxn.execute(SearchDealerTxn.java:106)\r\n\torg.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:425)\r\n\torg.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)\r\n\torg.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\r\n\torg.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:650)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n```\r\n\r\nAfter restarting Tomcat, the issue got resolved. \r\nAny Idea? please share.\r\n\r\n","title":"Unable to tunnel through proxy. Proxy returns &quot;HTTP/1.1 403 Forbidden&quot; in Tomcat 7","body":"<p>Sometimes I am getting the following error in Tomcat 7  while calling a third-party service through <code>HttpURLConnection</code> object.</p>\n<pre><code>java.io.IOException: Unable to tunnel through proxy. Proxy returns &quot;HTTP/1.1 403 Forbidden&quot;\n    sun.net.www.protocol.http.HttpURLConnection.doTunneling(Unknown Source)\n    sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)\n    sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(Unknown Source)\n    sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source)\n    sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(Unknown Source)\n    com.myapp.QueryAPI.SearchDealerTxn.execute(SearchDealerTxn.java:106)\n    org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:425)\n    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)\n    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\n    org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:650)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:731)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n</code></pre>\n<p>After restarting Tomcat, the issue got resolved.\nAny Idea? please share.</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":8999874,"reputation":345,"user_id":6708879,"display_name":"MissingSemiColon"},"score":1,"creation_date":1689860130,"post_id":76729869,"comment_id":135275305,"body_markdown":"Read this answer: https://stackoverflow.com/questions/64461894/kafka-offset-increments-even-without-reaching-ack . Short answer you ack the message with offset 4, so for kafka you have read all the previous messages.","body":"Read this answer: <a href=\"https://stackoverflow.com/questions/64461894/kafka-offset-increments-even-without-reaching-ack\" title=\"kafka offset increments even without reaching ack\">stackoverflow.com/questions/64461894/&hellip;</a> . Short answer you ack the message with offset 4, so for kafka you have read all the previous messages."},{"owner":{"account_id":26860541,"reputation":75,"user_id":20444128,"display_name":"rev gan"},"score":1,"creation_date":1689867213,"post_id":76729869,"comment_id":135277196,"body_markdown":"thanks. i will go through it","body":"thanks. i will go through it"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1690367672,"post_id":76729869,"comment_id":135342655,"body_markdown":"@MissingSemiColon that question is not the same as this one and its answer is not really relevant. It concerns situations where failing to ack means the same offset is not tried again in the same application run. But the current question is different, it concerns failing to retry the same offset after a restart. And after a restart, it&#39;s the _committed_ offset that matters.","body":"@MissingSemiColon that question is not the same as this one and its answer is not really relevant. It concerns situations where failing to ack means the same offset is not tried again in the same application run. But the current question is different, it concerns failing to retry the same offset after a restart. And after a restart, it&#39;s the <i>committed</i> offset that matters."},{"owner":{"account_id":8999874,"reputation":345,"user_id":6708879,"display_name":"MissingSemiColon"},"score":0,"creation_date":1690454886,"post_id":76729869,"comment_id":135357606,"body_markdown":"True its not the same case sorry. Then maybe a bit more information is required, I would check if your configuration is working. Remove the ack and check that it is not moving your committed offset. Because it is true that if you ack message 2 and restarted you should see message 3. Also try to use MANUAL instead of MANUAL_IMMEDIATE https://docs.spring.io/spring-kafka/api/org/springframework/kafka/listener/ContainerProperties.AckMode.html","body":"True its not the same case sorry. Then maybe a bit more information is required, I would check if your configuration is working. Remove the ack and check that it is not moving your committed offset. Because it is true that if you ack message 2 and restarted you should see message 3. Also try to use MANUAL instead of MANUAL_IMMEDIATE <a href=\"https://docs.spring.io/spring-kafka/api/org/springframework/kafka/listener/ContainerProperties.AckMode.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-kafka/api/org/springframework/kafka/&hellip;</a>"}],"owner":{"account_id":26860541,"reputation":75,"user_id":20444128,"display_name":"rev gan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1690366710,"creation_date":1689856040,"question_id":76729869,"body_markdown":"I have a simple Kafka Spring Boot consumer with one topic, 3 partitions and 1 consumer. \r\nonce messages are read, it is processed and committed back.\r\n\r\nWhen application is stopped/started, the message which was just read but not committed yet is skipped in the next run. I was expecting the message not committed to be read again after restart.\r\n\r\nfor example,\r\n\r\n**run 1**\r\n\r\n 1. offset 1 consumed and committed\r\n 2. offset 2 consumed and committed\r\n 3. offset 3 consumed\r\n\r\n**run 2**\r\n\r\n 4. offset 4 consumed and committed\r\n\r\nif you see the pattern, I was expecting offset 3 as its not committed yet in run2 but it skips 3 and reads 4 instead\r\n\r\nPlease find the code snippet\r\n\r\n 1. kafka config - `enable.auto.commit=false`\r\n 2. Set props - `props.setAckMode(AckMode.MANUAL_IMMEDIATE)`\r\n\r\nconsumer/listener:\r\n\r\n    public void consume(@Payload String message, @Header int partition, @Header int offsets, @Heaader String value, Acknowledgement acknowledgement) {\r\n    \r\n        process(message);\r\n    \r\n        acknowledgement.acknowledge();\r\n    \r\n    }\r\n\r\nkafka picks always the next offset though it never committed if stop and restart. i tried with commitSync as well but same behaviour. any help would be appreciated","title":"Kafka + Spring Boot + Consumer Messages are missed what app is restarted","body":"<p>I have a simple Kafka Spring Boot consumer with one topic, 3 partitions and 1 consumer.\nonce messages are read, it is processed and committed back.</p>\n<p>When application is stopped/started, the message which was just read but not committed yet is skipped in the next run. I was expecting the message not committed to be read again after restart.</p>\n<p>for example,</p>\n<p><strong>run 1</strong></p>\n<ol>\n<li>offset 1 consumed and committed</li>\n<li>offset 2 consumed and committed</li>\n<li>offset 3 consumed</li>\n</ol>\n<p><strong>run 2</strong></p>\n<ol start=\"4\">\n<li>offset 4 consumed and committed</li>\n</ol>\n<p>if you see the pattern, I was expecting offset 3 as its not committed yet in run2 but it skips 3 and reads 4 instead</p>\n<p>Please find the code snippet</p>\n<ol>\n<li>kafka config - <code>enable.auto.commit=false</code></li>\n<li>Set props - <code>props.setAckMode(AckMode.MANUAL_IMMEDIATE)</code></li>\n</ol>\n<p>consumer/listener:</p>\n<pre><code>public void consume(@Payload String message, @Header int partition, @Header int offsets, @Heaader String value, Acknowledgement acknowledgement) {\n\n    process(message);\n\n    acknowledgement.acknowledge();\n\n}\n</code></pre>\n<p>kafka picks always the next offset though it never committed if stop and restart. i tried with commitSync as well but same behaviour. any help would be appreciated</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","orm","hibernate-cascade"],"comments":[{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":0,"creation_date":1690367053,"post_id":76770217,"comment_id":135342533,"body_markdown":"I&#39;d highly recommend to obey everything Vlad Mihalcea and Thorben Janssen suggest. https://vladmihalcea.com/a-beginners-guide-to-jpa-and-hibernate-cascade-types/ You will find tons of great advices on their blogs.","body":"I&#39;d highly recommend to obey everything Vlad Mihalcea and Thorben Janssen suggest. <a href=\"https://vladmihalcea.com/a-beginners-guide-to-jpa-and-hibernate-cascade-types/\" rel=\"nofollow noreferrer\">vladmihalcea.com/&hellip;</a> You will find tons of great advices on their blogs."}],"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1690366597,"creation_date":1690366597,"question_id":76770217,"body_markdown":"I have been working on Spring Boot and JPA for quite some time and this question is raised several times. How should one decide to choose the right cascade types for entity relationships?   \r\nA scenario-  \r\nI have 2 entities-\r\n**User** and **Category**. Now, I want a many-to-many relationship between these entities such that the relationship follows following rules-  \r\n1. When any entity is deleted, the other side is not deleted.\r\n2. The categories are pre-defined in the database, therefore, adding/updating the **user** entity must not add/update the **category** entity.\r\n3. Any updation to **category** must not be propagated to **user** entity.  \r\n\r\n\r\nCan somebody please help me understand that how to decide the right cascade types. In the above scenario, its clear that I don&#39;t have to use **CascadeType.REMOVE**. But, I am not sure about others- **REFRESH, PERSIST** and especially **MERGE** and **DETACH**.   \r\nPlease help!!","title":"How to choose the right cascade types for entity relationshships following best practices: JPA","body":"<p>I have been working on Spring Boot and JPA for quite some time and this question is raised several times. How should one decide to choose the right cascade types for entity relationships?<br />\nA scenario-<br />\nI have 2 entities-\n<strong>User</strong> and <strong>Category</strong>. Now, I want a many-to-many relationship between these entities such that the relationship follows following rules-</p>\n<ol>\n<li>When any entity is deleted, the other side is not deleted.</li>\n<li>The categories are pre-defined in the database, therefore, adding/updating the <strong>user</strong> entity must not add/update the <strong>category</strong> entity.</li>\n<li>Any updation to <strong>category</strong> must not be propagated to <strong>user</strong> entity.</li>\n</ol>\n<p>Can somebody please help me understand that how to decide the right cascade types. In the above scenario, its clear that I don't have to use <strong>CascadeType.REMOVE</strong>. But, I am not sure about others- <strong>REFRESH, PERSIST</strong> and especially <strong>MERGE</strong> and <strong>DETACH</strong>.<br />\nPlease help!!</p>\n"},{"tags":["java","asynchronous","cucumber","gherkin"],"owner":{"account_id":11436907,"reputation":625,"user_id":8384029,"accept_rate":40,"display_name":"Mohamed Aoutir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690366248,"creation_date":1690363107,"question_id":76769690,"body_markdown":"I&#39;m getting an error when end2end testing with cucumber; when I&#39;d like to assert that the responses coming from two different async APIs aren&#39;t null and match the expected contents as described in my gherkin spec.\r\n\r\nGiven two async endpoints one called endpointA and the other one called endpointB.\r\n\r\n    Scenario:\r\n        Given the following streams endpointA and endpointB\r\n        When I get the A message from the endpointA stream\r\n        When I get the B message from the endpointB stream\r\n        Then the response from endpointA should be\r\n          | att1 | att2   | att3 |\r\n          | 11111| 000000 | test |\r\n        And the response from endpointB should be\r\n          | r1        | r2    | r3     | r4     |\r\n          | A00586-00 | 11111 | &lt;null&gt; | OK     |\r\n        Then the responses from both endpoints should match the expectations\r\n\r\nThe step definition for the above gherkin is described below:\r\n\r\n    public class ABStep extends CucumberBootstrap {\r\n    \r\n        private CompletableFuture&lt;GenericMessage&lt;ResponseA&gt;&gt; endpointAFuture;\r\n        private CompletableFuture&lt;GenericMessage&lt;ResponseB&gt;&gt; endpointBFuture;\r\n        ResponseB expectedResponseB;\r\n        ResponseA expectedResponseA;\r\n        @Autowired\r\n        private RestService restService;\r\n        private Executor executor = Executors.newFixedThreadPool(5);\r\n    \r\n        @DataTableType\r\n        public ResponseA responseAEntryTransformer(DataTable dataTable) {\r\n            return dataTable.asMaps(String.class, Object.class).stream()\r\n                    .map(row -&gt;\r\n                            ResponseA.builder()\r\n                                    .r1(valueOf(row.get(&quot;r1&quot;)))\r\n                                    .r2(valueOf(row.get(&quot;r2&quot;)))\r\n                                    .r3(valueOf(row.get(&quot;r3&quot;)))\r\n                                    .r4(valueOf(row.get(&quot;r4&quot;)))\r\n                                    .build()\r\n                    ).findFirst().get();\r\n        }\r\n    \r\n        @Given(&quot;^the following streams (.+) and (.+)$&quot;)\r\n        public void printTheFollowingStreams(String streamIdCreation, String streamIdAck) {\r\n            log.info(&quot;getting from streams {} and {}&quot;, streamIdCreation, streamIdAck);\r\n        }\r\n    \r\n        @When(&quot;^I get the A message from the (.+) stream$&quot;)\r\n        public void callAmpereToA(String streamId) {\r\n            endpointBFuture = CompletableFuture.supplyAsync(() -&gt; restService.getMessage(streamId), executor);\r\n        }\r\n    \r\n        @When(&quot;^I get the B message from the (.+) stream$&quot;)\r\n        public void callAmpereToB(String streamId) {\r\n            endpointAFuture = CompletableFuture.supplyAsync(() -&gt; restService.getMessage(streamId), executor);\r\n        }\r\n    \r\n        @Then(&quot;^the response from endpointA should be$&quot;)\r\n        public void isExpectedToHaveTheFollowingCreationFromAmpere(DataTable row) {\r\n            expectedResponseB = respBEntryTransformer(row);\r\n        }\r\n    \r\n        @And(&quot;^the response from endpointB should be$&quot;)\r\n        public void isExpectedToHaveTheFollowingResponseFromAmpere(DataTable row) {\r\n            expectedResponseA = responseAEntryTransformer(row);\r\n        }\r\n    \r\n        @Then(&quot;^the responses from both endpoints should match the expectations$&quot;)\r\n        public void isActualMatchingExpected() throws JsonProcessingException, ParseException, JSONException {\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            JSONParser parser = new JSONParser();\r\n            AtomicReference&lt;String&gt; respBId = new AtomicReference&lt;&gt;();\r\n            AtomicReference&lt;String&gt; respAId = new AtomicReference&lt;&gt;();\r\n            CompletableFuture&lt;Map&lt;String, Object&gt;&gt; combinedFuture = endpointBFuture.thenCombine(endpointAFuture, (respB, respA) -&gt; {\r\n                respBId.set(respB.getId());\r\n                respAId.set(respA.getId());\r\n                return Map.of(respBId.get(), respB\r\n                        , respAId.get(), respA);\r\n            });\r\n            try {\r\n                Map&lt;String, Object&gt; combinedResults = combinedFuture.get();\r\n                GenericMessage&lt;ResponseB&gt; actualResponseB = (GenericMessage&lt;ResponseB&gt;) combinedResults.get(respBId.get());\r\n                GenericMessage&lt;ResponseA&gt; actualResponseA = (GenericMessage&lt;ResponseA&gt;) combinedResults.get(respAId.get());\r\n                String actualResponseBStr = mapper.writeValueAsString(actualResponseB.getData());\r\n                String expectedResponseBStr = mapper.writeValueAsString(expectedResponseB);\r\n                JSONObject actualResponseBJson = new JSONObject(String.valueOf(parser.parse(actualResponseBStr)));\r\n                JSONAssert.assertEquals(expectedResponseBStr, actualResponseBJson, JSONCompareMode.LENIENT);\r\n                String actualResponseAStr = mapper.writeValueAsString(actualResponseA.getData());\r\n                String expectedResponseAStr = mapper.writeValueAsString(expectedResponseA);\r\n                JSONObject actualResponseAJson = new JSONObject(String.valueOf(parser.parse(actualResponseAStr)));\r\n                JSONAssert.assertEquals(expectedResponseAStr, actualResponseAJson, JSONCompareMode.LENIENT);\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException(e);\r\n            } catch (ExecutionException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\n&gt; java.lang.RuntimeException: java.util.concurrent.ExecutionException:\r\n&gt; java.lang.NullPointerException: Cannot invoke\r\n&gt; &quot;core.models.common.AB.GenericMessage.getId()&quot;\r\n&gt; because &quot;respB&quot; is null \tat\r\n&gt; AB.bdd.stepdefs.ABStep.isActualMatchingExpected(ABStep.java:111)\r\n\r\nAnd sometimes respA is null\r\nI&#39;d like to have a non-null response for both respA and respB\r\n\r\nAny help is appreciated","title":"Cannot get non-null responses from two async REST API in my Cucumber Test simultaneously","body":"<p>I'm getting an error when end2end testing with cucumber; when I'd like to assert that the responses coming from two different async APIs aren't null and match the expected contents as described in my gherkin spec.</p>\n<p>Given two async endpoints one called endpointA and the other one called endpointB.</p>\n<pre><code>Scenario:\n    Given the following streams endpointA and endpointB\n    When I get the A message from the endpointA stream\n    When I get the B message from the endpointB stream\n    Then the response from endpointA should be\n      | att1 | att2   | att3 |\n      | 11111| 000000 | test |\n    And the response from endpointB should be\n      | r1        | r2    | r3     | r4     |\n      | A00586-00 | 11111 | &lt;null&gt; | OK     |\n    Then the responses from both endpoints should match the expectations\n</code></pre>\n<p>The step definition for the above gherkin is described below:</p>\n<pre><code>public class ABStep extends CucumberBootstrap {\n\n    private CompletableFuture&lt;GenericMessage&lt;ResponseA&gt;&gt; endpointAFuture;\n    private CompletableFuture&lt;GenericMessage&lt;ResponseB&gt;&gt; endpointBFuture;\n    ResponseB expectedResponseB;\n    ResponseA expectedResponseA;\n    @Autowired\n    private RestService restService;\n    private Executor executor = Executors.newFixedThreadPool(5);\n\n    @DataTableType\n    public ResponseA responseAEntryTransformer(DataTable dataTable) {\n        return dataTable.asMaps(String.class, Object.class).stream()\n                .map(row -&gt;\n                        ResponseA.builder()\n                                .r1(valueOf(row.get(&quot;r1&quot;)))\n                                .r2(valueOf(row.get(&quot;r2&quot;)))\n                                .r3(valueOf(row.get(&quot;r3&quot;)))\n                                .r4(valueOf(row.get(&quot;r4&quot;)))\n                                .build()\n                ).findFirst().get();\n    }\n\n    @Given(&quot;^the following streams (.+) and (.+)$&quot;)\n    public void printTheFollowingStreams(String streamIdCreation, String streamIdAck) {\n        log.info(&quot;getting from streams {} and {}&quot;, streamIdCreation, streamIdAck);\n    }\n\n    @When(&quot;^I get the A message from the (.+) stream$&quot;)\n    public void callAmpereToA(String streamId) {\n        endpointBFuture = CompletableFuture.supplyAsync(() -&gt; restService.getMessage(streamId), executor);\n    }\n\n    @When(&quot;^I get the B message from the (.+) stream$&quot;)\n    public void callAmpereToB(String streamId) {\n        endpointAFuture = CompletableFuture.supplyAsync(() -&gt; restService.getMessage(streamId), executor);\n    }\n\n    @Then(&quot;^the response from endpointA should be$&quot;)\n    public void isExpectedToHaveTheFollowingCreationFromAmpere(DataTable row) {\n        expectedResponseB = respBEntryTransformer(row);\n    }\n\n    @And(&quot;^the response from endpointB should be$&quot;)\n    public void isExpectedToHaveTheFollowingResponseFromAmpere(DataTable row) {\n        expectedResponseA = responseAEntryTransformer(row);\n    }\n\n    @Then(&quot;^the responses from both endpoints should match the expectations$&quot;)\n    public void isActualMatchingExpected() throws JsonProcessingException, ParseException, JSONException {\n        ObjectMapper mapper = new ObjectMapper();\n        JSONParser parser = new JSONParser();\n        AtomicReference&lt;String&gt; respBId = new AtomicReference&lt;&gt;();\n        AtomicReference&lt;String&gt; respAId = new AtomicReference&lt;&gt;();\n        CompletableFuture&lt;Map&lt;String, Object&gt;&gt; combinedFuture = endpointBFuture.thenCombine(endpointAFuture, (respB, respA) -&gt; {\n            respBId.set(respB.getId());\n            respAId.set(respA.getId());\n            return Map.of(respBId.get(), respB\n                    , respAId.get(), respA);\n        });\n        try {\n            Map&lt;String, Object&gt; combinedResults = combinedFuture.get();\n            GenericMessage&lt;ResponseB&gt; actualResponseB = (GenericMessage&lt;ResponseB&gt;) combinedResults.get(respBId.get());\n            GenericMessage&lt;ResponseA&gt; actualResponseA = (GenericMessage&lt;ResponseA&gt;) combinedResults.get(respAId.get());\n            String actualResponseBStr = mapper.writeValueAsString(actualResponseB.getData());\n            String expectedResponseBStr = mapper.writeValueAsString(expectedResponseB);\n            JSONObject actualResponseBJson = new JSONObject(String.valueOf(parser.parse(actualResponseBStr)));\n            JSONAssert.assertEquals(expectedResponseBStr, actualResponseBJson, JSONCompareMode.LENIENT);\n            String actualResponseAStr = mapper.writeValueAsString(actualResponseA.getData());\n            String expectedResponseAStr = mapper.writeValueAsString(expectedResponseA);\n            JSONObject actualResponseAJson = new JSONObject(String.valueOf(parser.parse(actualResponseAStr)));\n            JSONAssert.assertEquals(expectedResponseAStr, actualResponseAJson, JSONCompareMode.LENIENT);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        } catch (ExecutionException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<blockquote>\n<p>java.lang.RuntimeException: java.util.concurrent.ExecutionException:\njava.lang.NullPointerException: Cannot invoke\n&quot;core.models.common.AB.GenericMessage.getId()&quot;\nbecause &quot;respB&quot; is null   at\nAB.bdd.stepdefs.ABStep.isActualMatchingExpected(ABStep.java:111)</p>\n</blockquote>\n<p>And sometimes respA is null\nI'd like to have a non-null response for both respA and respB</p>\n<p>Any help is appreciated</p>\n"},{"tags":["java","playwright","webautomation","playwright-java"],"answers":[{"tags":[],"owner":{"account_id":2754837,"reputation":19523,"user_id":2373249,"accept_rate":25,"display_name":"hardkoded"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1656514072,"creation_date":1656514072,"answer_id":72803418,"question_id":72803360,"body_markdown":"`textContext` won&#39;t return a value of an input. The same will happen if you try that in the DevTools.  \r\nYou can use [inputValue](https://playwright.dev/java/docs/api/class-elementhandle#element-handle-input-value) instead.  \r\ne.g.\r\n```\r\npage.locator(&quot;#myName&quot;).inputValue();\r\n```","title":"Playwright JAVA: How to get the VALUE of an input field","body":"<p><code>textContext</code> won't return a value of an input. The same will happen if you try that in the DevTools.<br />\nYou can use <a href=\"https://playwright.dev/java/docs/api/class-elementhandle#element-handle-input-value\" rel=\"noreferrer\">inputValue</a> instead.<br />\ne.g.</p>\n<pre><code>page.locator(&quot;#myName&quot;).inputValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5795282,"reputation":17603,"user_id":4571271,"accept_rate":53,"display_name":"Alapan Das"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1656515899,"creation_date":1656515899,"answer_id":72803912,"question_id":72803360,"body_markdown":"In case you want to assert your value you can use the `.hasValue` assertion. You can read more about it from the [playwright docs][1].\r\n```java\r\nassertThat(page.locator(&quot;#myName&quot;)).hasValue(&quot;input-value&quot;);\r\n```\r\n\r\n\r\n  [1]: https://playwright.dev/java/docs/test-assertions#locator-assertions-to-have-value","title":"Playwright JAVA: How to get the VALUE of an input field","body":"<p>In case you want to assert your value you can use the <code>.hasValue</code> assertion. You can read more about it from the <a href=\"https://playwright.dev/java/docs/test-assertions#locator-assertions-to-have-value\" rel=\"nofollow noreferrer\">playwright docs</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>assertThat(page.locator(&quot;#myName&quot;)).hasValue(&quot;input-value&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":321990,"reputation":3258,"user_id":641135,"accept_rate":88,"display_name":"Christian Baumann"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1656570473,"creation_date":1656570473,"answer_id":72811177,"question_id":72803360,"body_markdown":"You could also use the imho more generic `getAttribute`:\r\n```\r\npage.locator(&quot;#myName&quot;).getAttribute(&quot;placeholder&quot;);\r\n```\r\n\r\nDocumentation: https://playwright.dev/docs/api/class-locator#locator-get-attribute","title":"Playwright JAVA: How to get the VALUE of an input field","body":"<p>You could also use the imho more generic <code>getAttribute</code>:</p>\n<pre><code>page.locator(&quot;#myName&quot;).getAttribute(&quot;placeholder&quot;);\n</code></pre>\n<p>Documentation: <a href=\"https://playwright.dev/docs/api/class-locator#locator-get-attribute\" rel=\"nofollow noreferrer\">https://playwright.dev/docs/api/class-locator#locator-get-attribute</a></p>\n"},{"tags":[],"owner":{"account_id":2500437,"reputation":1762,"user_id":2175704,"display_name":"Sameera De Silva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690365998,"creation_date":1690365998,"answer_id":76770122,"question_id":72803360,"body_markdown":"Theory is that\r\n\r\ninputValue() is used to retrieve the value of input elements that you just typed.\r\n\r\ntextContent() is a method that is used to get the visible text content of an element on a web page. it can be a header tag. This method is useful for web scraping and verifying the content of a page.\r\n\r\nHere is a code example\r\n\r\n    page.navigate(&quot;https://the-internet.herokuapp.com/forgot_password&quot;);\r\n    Locator inputTextField=page.locator(&quot;//input[@id=&#39;email&#39;]&quot;);\r\n\r\n\r\n    // Get input text of an element using inputValue();\r\n    String actualInputVal=inputTextField.inputValue();\r\n    System.out.println(&quot;actualInputVal==&quot;+actualInputVal);\r\n    // Assert the value of it using  hasValue\r\n    assertThat(inputTextField).hasValue(&quot;My input&quot;);\r\n\r\n\r\n    Locator forgetPasswordHeader=page.locator(&quot;//h2[text()=&#39;Forgot Password&#39;]&quot;);\r\n    String forgetPasswordHeaderActualText=forgetPasswordHeader.textContent();\r\n    System.out.println(&quot;forgetPasswordHeaderActualText==&quot;+forgetPasswordHeaderActualText);\r\n    // you can&#39;t use hasValue here since  it&#39;s not an input element so use hasText\r\n    assertThat(forgetPasswordHeader).hasText(&quot;Forgot Password&quot;);\r\n\r\n\r\nThis will print\r\n\r\n    actualInputVal==My input\r\n    forgetPasswordHeaderActualText==Forgot Password\r\n\r\n","title":"Playwright JAVA: How to get the VALUE of an input field","body":"<p>Theory is that</p>\n<p>inputValue() is used to retrieve the value of input elements that you just typed.</p>\n<p>textContent() is a method that is used to get the visible text content of an element on a web page. it can be a header tag. This method is useful for web scraping and verifying the content of a page.</p>\n<p>Here is a code example</p>\n<pre><code>page.navigate(&quot;https://the-internet.herokuapp.com/forgot_password&quot;);\nLocator inputTextField=page.locator(&quot;//input[@id='email']&quot;);\n\n\n// Get input text of an element using inputValue();\nString actualInputVal=inputTextField.inputValue();\nSystem.out.println(&quot;actualInputVal==&quot;+actualInputVal);\n// Assert the value of it using  hasValue\nassertThat(inputTextField).hasValue(&quot;My input&quot;);\n\n\nLocator forgetPasswordHeader=page.locator(&quot;//h2[text()='Forgot Password']&quot;);\nString forgetPasswordHeaderActualText=forgetPasswordHeader.textContent();\nSystem.out.println(&quot;forgetPasswordHeaderActualText==&quot;+forgetPasswordHeaderActualText);\n// you can't use hasValue here since  it's not an input element so use hasText\nassertThat(forgetPasswordHeader).hasText(&quot;Forgot Password&quot;);\n</code></pre>\n<p>This will print</p>\n<pre><code>actualInputVal==My input\nforgetPasswordHeaderActualText==Forgot Password\n</code></pre>\n"}],"owner":{"account_id":7936659,"reputation":51,"user_id":5992389,"display_name":"lorenlai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2168,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1690365998,"creation_date":1656513866,"question_id":72803360,"body_markdown":"Hello Playwright experts,\r\n\r\nI have this input field\r\n\r\n    &lt;input id=&quot;myName&quot; placeholder=&quot;e.g. Max&quot; maxlength=&quot;15&quot; class=&quot;xyz&quot;/&gt;\r\n\r\nI have tried this JAVA code:\r\n\r\n    page.locator(&quot;[placeholder=\\&quot;e.g. Max\\&quot;]&quot;).textContent();\r\n\r\nIt does not work :-( but I can fill\r\n\r\n    page.locator(&quot;[placeholder=\\&quot;e.g. Max\\&quot;]&quot;).fill(&quot;Loren&quot;); // this works\r\n\r\nCould you help and has an idea?\r\n\r\nThank you in advance.\r\n\r\n*Cheers*\r\nLoren\r\n","title":"Playwright JAVA: How to get the VALUE of an input field","body":"<p>Hello Playwright experts,</p>\n<p>I have this input field</p>\n<pre><code>&lt;input id=&quot;myName&quot; placeholder=&quot;e.g. Max&quot; maxlength=&quot;15&quot; class=&quot;xyz&quot;/&gt;\n</code></pre>\n<p>I have tried this JAVA code:</p>\n<pre><code>page.locator(&quot;[placeholder=\\&quot;e.g. Max\\&quot;]&quot;).textContent();\n</code></pre>\n<p>It does not work :-( but I can fill</p>\n<pre><code>page.locator(&quot;[placeholder=\\&quot;e.g. Max\\&quot;]&quot;).fill(&quot;Loren&quot;); // this works\n</code></pre>\n<p>Could you help and has an idea?</p>\n<p>Thank you in advance.</p>\n<p><em>Cheers</em>\nLoren</p>\n"},{"tags":["java","textfield","bigdecimal","vaadin8","android-binder"],"comments":[{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":0,"creation_date":1690283846,"post_id":76754076,"comment_id":135328769,"body_markdown":"If your txtAmnt is a `TextField` you need converter as well, `StringToBigDecimalConverter`.","body":"If your txtAmnt is a <code>TextField</code> you need converter as well, <code>StringToBigDecimalConverter</code>."},{"owner":{"account_id":26260150,"reputation":1,"user_id":19931599,"display_name":"Archana"},"score":0,"creation_date":1690356130,"post_id":76754076,"comment_id":135340229,"body_markdown":"can you please explain with an example?","body":"can you please explain with an example?"}],"answers":[{"tags":[],"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690365667,"creation_date":1690365667,"answer_id":76770082,"question_id":76754076,"body_markdown":"If your txtAmnt is a `TextField` you need converter using `withConverter` as well, `StringToBigDecimalConverter`. You need to set converter before the `withValidator` as it assumes `BigDecimal` type, which is not compatible with String emitted by `TextField`.\r\n\r\n    binder.forField(txtAmnt)\r\n        .asRequired(&quot;This field is mandatory&quot;)\r\n        .withConverter(new StringToBigDecimalConverter(&quot;Error converting to \r\n                BigDecimal&quot;)\r\n        .withValidator(new BigDecimalRangeValidator(&quot;Enter an \r\n                amount&quot;,BigDecimal.ZERO,new BigDecimal(&quot;1000&quot;)))\r\n        .bind(amount);","title":"BigDecimalRange validator is not working in vaadin 8 (Binder)","body":"<p>If your txtAmnt is a <code>TextField</code> you need converter using <code>withConverter</code> as well, <code>StringToBigDecimalConverter</code>. You need to set converter before the <code>withValidator</code> as it assumes <code>BigDecimal</code> type, which is not compatible with String emitted by <code>TextField</code>.</p>\n<pre><code>binder.forField(txtAmnt)\n    .asRequired(&quot;This field is mandatory&quot;)\n    .withConverter(new StringToBigDecimalConverter(&quot;Error converting to \n            BigDecimal&quot;)\n    .withValidator(new BigDecimalRangeValidator(&quot;Enter an \n            amount&quot;,BigDecimal.ZERO,new BigDecimal(&quot;1000&quot;)))\n    .bind(amount);\n</code></pre>\n"}],"owner":{"account_id":26260150,"reputation":1,"user_id":19931599,"display_name":"Archana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690365667,"creation_date":1690198570,"question_id":76754076,"body_markdown":"BigDecimalRange validator is not working in vaadin version  **8.4.3** we tried to change to the latest version of vaadin 8 but the problem persist . Error shows withValidator  like *renaming the file* ,What will be the problem and how can I fix this,Iam trying  to change vaadin 7 TextField to  vaadin 8 .In v7 it was working fine. Please help \r\n\r\n```\r\nbinder.forField(txtAmnt)\r\n.asRequired(&quot;This field is mandatory&quot;)\r\n.withValidator(new BigDecimalRangeValidator(&quot;Enter an amount&quot;,BigDecimal.ZERO,new BigDecimal(&quot;1000&quot;)))\r\n.bind(amount);\r\n ```  ","title":"BigDecimalRange validator is not working in vaadin 8 (Binder)","body":"<p>BigDecimalRange validator is not working in vaadin version  <strong>8.4.3</strong> we tried to change to the latest version of vaadin 8 but the problem persist . Error shows withValidator  like <em>renaming the file</em> ,What will be the problem and how can I fix this,Iam trying  to change vaadin 7 TextField to  vaadin 8 .In v7 it was working fine. Please help</p>\n<pre><code>binder.forField(txtAmnt)\n.asRequired(&quot;This field is mandatory&quot;)\n.withValidator(new BigDecimalRangeValidator(&quot;Enter an amount&quot;,BigDecimal.ZERO,new BigDecimal(&quot;1000&quot;)))\n.bind(amount);\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","maven","intellij-idea"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1676883718,"post_id":75507074,"comment_id":133220226,"body_markdown":"Please add your `pom.xml` to the question to see what the issue is. As the issue is probably in your pom.xml and how you declare/use the dependency.","body":"Please add your <code>pom.xml</code> to the question to see what the issue is. As the issue is probably in your pom.xml and how you declare/use the dependency."},{"owner":{"account_id":7292048,"reputation":1570,"user_id":5558122,"display_name":"Vladimir Pligin"},"score":1,"creation_date":1676960205,"post_id":75507074,"comment_id":133236811,"body_markdown":"run mvn dependency tree in order to see where it comes from. https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html","body":"run mvn dependency tree in order to see where it comes from. <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.h&zwnj;&#8203;tml</a>"}],"answers":[{"tags":[],"owner":{"account_id":27830747,"reputation":1,"user_id":21249228,"display_name":"upcycling"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690365645,"creation_date":1690365645,"answer_id":76770079,"question_id":75507074,"body_markdown":"I examined it in detail with Dependency Analyzer, but I could not find where this dependency was added. As a solution, I added the following dependency to the poms of all the modules I have. \r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;version&gt;42.5.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nAnd now when I hover over the &quot;spring.datasource.driverClassName=org.postgresql.Driver&quot; setting in application.properties I see it points to version 42.5.1 and not the old version.","title":"Postgres Driver not pointing to correct jar version on Spring","body":"<p>I examined it in detail with Dependency Analyzer, but I could not find where this dependency was added. As a solution, I added the following dependency to the poms of all the modules I have.</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;version&gt;42.5.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And now when I hover over the &quot;spring.datasource.driverClassName=org.postgresql.Driver&quot; setting in application.properties I see it points to version 42.5.1 and not the old version.</p>\n"}],"owner":{"account_id":27830747,"reputation":1,"user_id":21249228,"display_name":"upcycling"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690365645,"creation_date":1676883166,"question_id":75507074,"body_markdown":"I am in the development team of an application in a monolithic structure.\r\n\r\nTechnical details;\r\nMaven 3.8.1 version\r\nJava 8\r\nPrevious Postgres version: 42.2.16.jre7\r\n\r\n\r\nMy problem is that; \r\nI want to upgrade Postgres version from 42.2.16.jre7 to 42.5.1. \r\nI do this upgrade in the pom file, I can pull the package with maven and I see the jar comes in the .m2 folder. \r\nIn the application.prop file, I use the following definition:\r\nspring.datasource.driverClassName=org.postgresql.Driver\r\nI see Driver still looking at the old version when hovering over it.\r\n\r\nMethods I have tried;\r\n\r\n- Deleting the old version files from the m2 and ensuring that only the version I want remains. I hover over Driver in App.prop and click on the warning &quot;Add library &#39;Driver xxx..&#39; to classpath&quot;. But when I start the application, it downloads the old version and continues to look at it.\r\n\r\n- I removed the old jars from Intellij -&gt; File -&gt; Project -&gt; Project Structure -&gt; Libraries. I re-added the jar I wanted.\r\n\r\nWhen I do these, when I hover over Driver in app.prop, I see that it points to the version I want. But when I start the application, it downloads the old jars again.\r\n\r\nNote: There are pom files under other modules in the application, I checked that it does not pull a different version of postgres in those poms.\r\n\r\nIn summary, how can I make the application look at the version I want?\r\n\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.hx.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;core-spring-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;relativePath&gt;../core-spring-parent/pom.xml&lt;/relativePath&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;core-service&lt;/artifactId&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;hazelcast.version&gt;3.8.3&lt;/hazelcast.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hx.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;core-context&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hx.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hx-address-clean&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-ws-core&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;version&gt;42.5.1&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-envers&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.8.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.8.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-java8&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.9.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hazelcast&lt;/artifactId&gt;\r\n            &lt;version&gt;${hazelcast.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hazelcast-spring&lt;/artifactId&gt;\r\n            &lt;version&gt;${hazelcast.version}&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;hazelcast&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.bitsofinfo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hazelcast-docker-swarm-discovery-spi&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-RC3&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jersey-common&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.19&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.sf.dozer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dozer&lt;/artifactId&gt;\r\n            &lt;version&gt;5.5.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.craftsman&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dozer-jdk8-support&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n            &lt;version&gt;3.17&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-net&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-net&lt;/artifactId&gt;\r\n            &lt;version&gt;3.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.newrelic.agent.java&lt;/groupId&gt;\r\n            &lt;artifactId&gt;newrelic-api&lt;/artifactId&gt;\r\n            &lt;version&gt;5.11.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n            &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.14&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.16&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.lettuce&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hx.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hx-dist-cache&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;libraries-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;18.0.0&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n                &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.15&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;generate-sources&lt;/id&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;sourceRoot&gt;${project.basedir}/src/main/java&lt;/sourceRoot&gt;\r\n                            &lt;wsdlOptions&gt;\r\n                                &lt;wsdlOption&gt;\r\n                                    &lt;wsdl&gt;${project.basedir}/src/main/resources/wsdl/ZsdHxCargoStatuEnt.wsdl&lt;/wsdl&gt;\r\n                                    &lt;wsdlLocation&gt;classpath:wsdl/ZsdHxCargoStatuEnt.wsdl&lt;/wsdlLocation&gt;\r\n                                &lt;/wsdlOption&gt;\r\n                            &lt;/wsdlOptions&gt;\r\n                        &lt;/configuration&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;wsdl2java&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n","title":"Postgres Driver not pointing to correct jar version on Spring","body":"<p>I am in the development team of an application in a monolithic structure.</p>\n<p>Technical details;\nMaven 3.8.1 version\nJava 8\nPrevious Postgres version: 42.2.16.jre7</p>\n<p>My problem is that;\nI want to upgrade Postgres version from 42.2.16.jre7 to 42.5.1.\nI do this upgrade in the pom file, I can pull the package with maven and I see the jar comes in the .m2 folder.\nIn the application.prop file, I use the following definition:\nspring.datasource.driverClassName=org.postgresql.Driver\nI see Driver still looking at the old version when hovering over it.</p>\n<p>Methods I have tried;</p>\n<ul>\n<li><p>Deleting the old version files from the m2 and ensuring that only the version I want remains. I hover over Driver in App.prop and click on the warning &quot;Add library 'Driver xxx..' to classpath&quot;. But when I start the application, it downloads the old version and continues to look at it.</p>\n</li>\n<li><p>I removed the old jars from Intellij -&gt; File -&gt; Project -&gt; Project Structure -&gt; Libraries. I re-added the jar I wanted.</p>\n</li>\n</ul>\n<p>When I do these, when I hover over Driver in app.prop, I see that it points to the version I want. But when I start the application, it downloads the old jars again.</p>\n<p>Note: There are pom files under other modules in the application, I checked that it does not pull a different version of postgres in those poms.</p>\n<p>In summary, how can I make the application look at the version I want?</p>\n<p>\n4.0.0</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;com.hx.core&lt;/groupId&gt;\n    &lt;artifactId&gt;core-spring-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;relativePath&gt;../core-spring-parent/pom.xml&lt;/relativePath&gt;\n&lt;/parent&gt;\n\n&lt;artifactId&gt;core-service&lt;/artifactId&gt;\n\n&lt;properties&gt;\n    &lt;hazelcast.version&gt;3.8.3&lt;/hazelcast.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.hx.core&lt;/groupId&gt;\n        &lt;artifactId&gt;core-context&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.hx.core&lt;/groupId&gt;\n        &lt;artifactId&gt;hx-address-clean&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-ws-core&lt;/artifactId&gt;\n        &lt;version&gt;3.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\n        &lt;version&gt;5.3.8&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;version&gt;42.5.1&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\n        &lt;version&gt;1.9.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\n        &lt;version&gt;2.8.7&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n        &lt;version&gt;2.8.8&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-envers&lt;/artifactId&gt;\n        &lt;version&gt;5.2.8.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;5.2.8.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-java8&lt;/artifactId&gt;\n        &lt;version&gt;5.2.9.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\n        &lt;artifactId&gt;hazelcast&lt;/artifactId&gt;\n        &lt;version&gt;${hazelcast.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\n        &lt;artifactId&gt;hazelcast-spring&lt;/artifactId&gt;\n        &lt;version&gt;${hazelcast.version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\n                &lt;artifactId&gt;hazelcast&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.bitsofinfo&lt;/groupId&gt;\n        &lt;artifactId&gt;hazelcast-docker-swarm-discovery-spi&lt;/artifactId&gt;\n        &lt;version&gt;1.0-RC3&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jersey-common&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n        &lt;version&gt;2.7.19&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;net.sf.dozer&lt;/groupId&gt;\n        &lt;artifactId&gt;dozer&lt;/artifactId&gt;\n        &lt;version&gt;5.5.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.craftsman&lt;/groupId&gt;\n        &lt;artifactId&gt;dozer-jdk8-support&lt;/artifactId&gt;\n        &lt;version&gt;1.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi&lt;/artifactId&gt;\n        &lt;version&gt;3.17&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\n        &lt;version&gt;2.8.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-net&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-net&lt;/artifactId&gt;\n        &lt;version&gt;3.6&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.newrelic.agent.java&lt;/groupId&gt;\n        &lt;artifactId&gt;newrelic-api&lt;/artifactId&gt;\n        &lt;version&gt;5.11.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n        &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\n        &lt;version&gt;1.5.14&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n        &lt;version&gt;1.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\n        &lt;version&gt;2.2.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.16&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.lettuce&lt;/groupId&gt;\n        &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.hx.core&lt;/groupId&gt;\n        &lt;artifactId&gt;hx-dist-cache&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;libraries-bom&lt;/artifactId&gt;\n            &lt;version&gt;18.0.0&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n            &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.15&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;generate-sources&lt;/id&gt;\n                    &lt;phase&gt;generate-sources&lt;/phase&gt;\n                    &lt;configuration&gt;\n                        &lt;sourceRoot&gt;${project.basedir}/src/main/java&lt;/sourceRoot&gt;\n                        &lt;wsdlOptions&gt;\n                            &lt;wsdlOption&gt;\n                                &lt;wsdl&gt;${project.basedir}/src/main/resources/wsdl/ZsdHxCargoStatuEnt.wsdl&lt;/wsdl&gt;\n                                &lt;wsdlLocation&gt;classpath:wsdl/ZsdHxCargoStatuEnt.wsdl&lt;/wsdlLocation&gt;\n                            &lt;/wsdlOption&gt;\n                        &lt;/wsdlOptions&gt;\n                    &lt;/configuration&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;wsdl2java&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n"},{"tags":["java","minecraft","bukkit"],"comments":[{"owner":{"account_id":6768525,"reputation":680,"user_id":5212693,"display_name":"questioner and answerer"},"score":1,"creation_date":1457293614,"post_id":35831619,"comment_id":59330164,"body_markdown":"What do you mean &quot;sometimes&quot; it doesn&#39;t work? What&#39;s the error?","body":"What do you mean &quot;sometimes&quot; it doesn&#39;t work? What&#39;s the error?"},{"owner":{"account_id":6386303,"reputation":1415,"user_id":4954114,"accept_rate":71,"display_name":"NonameSL"},"score":1,"creation_date":1457293730,"post_id":35831619,"comment_id":59330204,"body_markdown":"Side comment: Your package has upper case letters. You should name it `me.nightfighter001.globalsystem.worldeditor` instead","body":"Side comment: Your package has upper case letters. You should name it <code>me.nightfighter001.globalsystem.worldeditor</code> instead"},{"owner":{"account_id":7362546,"reputation":517,"user_id":5605356,"accept_rate":79,"display_name":"LeWimbes"},"score":0,"creation_date":1457294987,"post_id":35831619,"comment_id":59330684,"body_markdown":"The problem is that it sometimes gives wrong solution to me, so there is no error or something like this","body":"The problem is that it sometimes gives wrong solution to me, so there is no error or something like this"}],"answers":[{"tags":[],"owner":{"account_id":6386303,"reputation":1415,"user_id":4954114,"accept_rate":71,"display_name":"NonameSL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457293658,"creation_date":1457293658,"answer_id":35831672,"question_id":35831619,"body_markdown":"You might want to try this:\r\n\r\n    private String getDirection(Player player) {\r\n\t\tdouble rot = (player.getLocation().getYaw() - 90) % 360;\r\n\t\tif (rot &lt; 0) {\r\n\t\t\trot += 360.0;\r\n\t\t}\r\n\t\tif (0 &lt;= rot &amp;&amp; rot &lt; 67.5) {\r\n\t    \treturn &quot;N&quot;;\r\n\t    } else if (67.5 &lt;= rot &amp;&amp; rot &lt; 157.5) {\r\n\t    \treturn &quot;E&quot;;\r\n\t    } else if (157.5 &lt;= rot &amp;&amp; rot &lt;247.5) {\r\n\t    \treturn &quot;S&quot;;\r\n\t    } else if (247.5 &lt;= rot &amp;&amp; rot &lt; 360.0) {\r\n\t    \treturn &quot;W&quot;;\r\n\t    } else {\r\n\t    \treturn null;\r\n\t    }\r\n\t}","title":"Get the direction a Player is looking?","body":"<p>You might want to try this:</p>\n\n<pre><code>private String getDirection(Player player) {\n    double rot = (player.getLocation().getYaw() - 90) % 360;\n    if (rot &lt; 0) {\n        rot += 360.0;\n    }\n    if (0 &lt;= rot &amp;&amp; rot &lt; 67.5) {\n        return \"N\";\n    } else if (67.5 &lt;= rot &amp;&amp; rot &lt; 157.5) {\n        return \"E\";\n    } else if (157.5 &lt;= rot &amp;&amp; rot &lt;247.5) {\n        return \"S\";\n    } else if (247.5 &lt;= rot &amp;&amp; rot &lt; 360.0) {\n        return \"W\";\n    } else {\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6400883,"reputation":1271,"user_id":4963588,"display_name":"Adrian Sohn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1457329750,"creation_date":1457329750,"answer_id":35837014,"question_id":35831619,"body_markdown":"The yaw values can range from -360 to 360, so for values greater than 135 or smaller than -135, your code currently doesn&#39;t display the correct cardinal direction. In your case, as far as I can tell, you can add 360 to any negative yaw values to shorten the code (less checks). The range from 0 - 45 degrees and 315 to 360 degrees is then south, 45 - 135 degrees is west, 135 - 225 degrees is north and 225 - 315 degrees is east. The code would look something like this, I tested this for a little while and it seemed to match the values of the f3 debug menu/screen:\r\n\r\n        public static CardinalDirection get(Player player) {\r\n        float yaw = player.getLocation().getYaw();\r\n        if (yaw &lt; 0) {\r\n            yaw += 360;\r\n        }\r\n        if (yaw &gt;= 315 || yaw &lt; 45) {\r\n            return CardinalDirection.SOUTH;\r\n        } else if (yaw &lt; 135) {\r\n            return CardinalDirection.WEST;\r\n        } else if (yaw &lt; 225) {\r\n            return CardinalDirection.NORTH;\r\n        } else if (yaw &lt; 315) {\r\n            return CardinalDirection.EAST;\r\n        }\r\n        return CardinalDirection.NORTH;\r\n    }","title":"Get the direction a Player is looking?","body":"<p>The yaw values can range from -360 to 360, so for values greater than 135 or smaller than -135, your code currently doesn't display the correct cardinal direction. In your case, as far as I can tell, you can add 360 to any negative yaw values to shorten the code (less checks). The range from 0 - 45 degrees and 315 to 360 degrees is then south, 45 - 135 degrees is west, 135 - 225 degrees is north and 225 - 315 degrees is east. The code would look something like this, I tested this for a little while and it seemed to match the values of the f3 debug menu/screen:</p>\n\n<pre><code>    public static CardinalDirection get(Player player) {\n    float yaw = player.getLocation().getYaw();\n    if (yaw &lt; 0) {\n        yaw += 360;\n    }\n    if (yaw &gt;= 315 || yaw &lt; 45) {\n        return CardinalDirection.SOUTH;\n    } else if (yaw &lt; 135) {\n        return CardinalDirection.WEST;\n    } else if (yaw &lt; 225) {\n        return CardinalDirection.NORTH;\n    } else if (yaw &lt; 315) {\n        return CardinalDirection.EAST;\n    }\n    return CardinalDirection.NORTH;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4708115,"reputation":61,"user_id":3809555,"display_name":"Viktoracri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457383839,"creation_date":1457383839,"answer_id":35853756,"question_id":35831619,"body_markdown":"You can do this:\r\n\r\n\r\n\r\n\r\ngetPlayer().getEyeLocation().getDirection()","title":"Get the direction a Player is looking?","body":"<p>You can do this:</p>\n\n<p>getPlayer().getEyeLocation().getDirection()</p>\n"},{"tags":[],"owner":{"account_id":11002035,"reputation":3342,"user_id":8997916,"display_name":"DownloadPizza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1591476291,"creation_date":1591476291,"answer_id":62237821,"question_id":35831619,"body_markdown":"The answer that was marked as correct works, but in theory the yaw can also have values above 360 degrees (noted in the documentation), so just handling negative values might cause bugs at some point.\r\n\r\nThe code here is your exact code, but it uses a true modulo implementation to get the angle in the 0-360 degree range.\r\n```java\r\npublic static Yaw getYaw(Player p) {\r\n    float yaw = p.getLocation().getYaw();\r\n    yaw = (yaw % 360 + 360) % 360; // true modulo, as javas modulo is weird for negative values\r\n    if (yaw &gt; 135 || yaw &lt; -135) {\r\n        return Yaw.NORTH;\r\n    } else if (yaw &lt; -45) {\r\n        return Yaw.EAST;\r\n    } else if (yaw &gt; 45) {\r\n        return Yaw.WEST;\r\n    } else {\r\n        return Yaw.SOUTH;\r\n    }\r\n}\r\n```","title":"Get the direction a Player is looking?","body":"<p>The answer that was marked as correct works, but in theory the yaw can also have values above 360 degrees (noted in the documentation), so just handling negative values might cause bugs at some point.</p>\n\n<p>The code here is your exact code, but it uses a true modulo implementation to get the angle in the 0-360 degree range.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static Yaw getYaw(Player p) {\n    float yaw = p.getLocation().getYaw();\n    yaw = (yaw % 360 + 360) % 360; // true modulo, as javas modulo is weird for negative values\n    if (yaw &gt; 135 || yaw &lt; -135) {\n        return Yaw.NORTH;\n    } else if (yaw &lt; -45) {\n        return Yaw.EAST;\n    } else if (yaw &gt; 45) {\n        return Yaw.WEST;\n    } else {\n        return Yaw.SOUTH;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2471855,"reputation":29,"user_id":2153514,"display_name":"LorenzoP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681261016,"creation_date":1681261016,"answer_id":75991132,"question_id":35831619,"body_markdown":"There is a player.getFacing() function available, which returns BlockFace. I don&#39;t know when this was added.","title":"Get the direction a Player is looking?","body":"<p>There is a player.getFacing() function available, which returns BlockFace. I don't know when this was added.</p>\n"},{"tags":[],"owner":{"account_id":29094284,"reputation":1,"user_id":22287491,"display_name":"OneKa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690365629,"creation_date":1690365629,"answer_id":76770075,"question_id":35831619,"body_markdown":"There is a getting BlockFace of player looking:\r\n\r\n    public static BlockFace getBlockFacing(Player p) {\r\n        float yaw = p.getLocation().getYaw();\r\n        float pitch = p.getLocation().getPitch();\r\n        if (pitch &gt;= 45) {\r\n            return BlockFace.DOWN;\r\n        } else if (pitch &lt;= -45) {\r\n            return BlockFace.UP;\r\n        } else if (yaw &gt; 45 &amp;&amp; yaw &lt; 135) {\r\n            return BlockFace.WEST;\r\n        } else if (yaw &gt;= 135 || yaw &lt; -135) {\r\n            return BlockFace.NORTH;\r\n        } else if (yaw &gt;= -135 &amp;&amp; yaw &lt; -45) {\r\n            return BlockFace.EAST;\r\n        } else {\r\n            return BlockFace.SOUTH;\r\n        }\r\n    }","title":"Get the direction a Player is looking?","body":"<p>There is a getting BlockFace of player looking:</p>\n<pre><code>public static BlockFace getBlockFacing(Player p) {\n    float yaw = p.getLocation().getYaw();\n    float pitch = p.getLocation().getPitch();\n    if (pitch &gt;= 45) {\n        return BlockFace.DOWN;\n    } else if (pitch &lt;= -45) {\n        return BlockFace.UP;\n    } else if (yaw &gt; 45 &amp;&amp; yaw &lt; 135) {\n        return BlockFace.WEST;\n    } else if (yaw &gt;= 135 || yaw &lt; -135) {\n        return BlockFace.NORTH;\n    } else if (yaw &gt;= -135 &amp;&amp; yaw &lt; -45) {\n        return BlockFace.EAST;\n    } else {\n        return BlockFace.SOUTH;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7362546,"reputation":517,"user_id":5605356,"accept_rate":79,"display_name":"LeWimbes"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10808,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":62237821,"answer_count":6,"score":3,"last_activity_date":1690365629,"creation_date":1457293348,"question_id":35831619,"body_markdown":"I tried to get the direction, like North, South, West, East, of a Players Facing. I created this code, but sometimes it doesn&#39;t work...\r\n\r\n    package me.Nightfighter001.GlobalSystem.WorldEditor;\r\n\r\n    import org.bukkit.entity.Player;\r\n\r\n    public enum Yaw {\r\n        NORTH, SOUTH, EAST, WEST;\r\n\r\n        public static Yaw getYaw(Player p) {\r\n\t\t    float yaw = p.getLocation().getYaw();\r\n\t\t    if (yaw &gt; 135 || yaw &lt; -135) {\r\n\t\t\t    return Yaw.NORTH;\r\n\t\t    } else if (yaw &lt; -45) {\r\n\t\t\t    return Yaw.EAST;\r\n\t\t    } else if (yaw &gt; 45) {\r\n\t\t\t    return Yaw.WEST;\r\n\t\t    } else {\r\n\t\t\t    return Yaw.SOUTH;\r\n\t\t    }\r\n\t    }\r\n    }\r\n\r\nCan someone help me, please? Sorry for my bad English and thank you :)","title":"Get the direction a Player is looking?","body":"<p>I tried to get the direction, like North, South, West, East, of a Players Facing. I created this code, but sometimes it doesn't work...</p>\n\n<pre><code>package me.Nightfighter001.GlobalSystem.WorldEditor;\n\nimport org.bukkit.entity.Player;\n\npublic enum Yaw {\n    NORTH, SOUTH, EAST, WEST;\n\n    public static Yaw getYaw(Player p) {\n        float yaw = p.getLocation().getYaw();\n        if (yaw &gt; 135 || yaw &lt; -135) {\n            return Yaw.NORTH;\n        } else if (yaw &lt; -45) {\n            return Yaw.EAST;\n        } else if (yaw &gt; 45) {\n            return Yaw.WEST;\n        } else {\n            return Yaw.SOUTH;\n        }\n    }\n}\n</code></pre>\n\n<p>Can someone help me, please? Sorry for my bad English and thank you :)</p>\n"},{"tags":["java","spring","spring-boot","gradle","testing"],"answers":[{"tags":[],"owner":{"account_id":10362317,"reputation":106,"user_id":7642429,"display_name":"Amin Nemati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690365341,"creation_date":1690365341,"answer_id":76770021,"question_id":76746611,"body_markdown":"This is my every test class annotation\r\n\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n    class ApplicationTests {}\r\n\r\n_________________\r\n\r\n    ClassLoader.class.getResourceAsStream(&quot;/path/to/your/xml&quot;) and make sure that your compile script is copying the xml file to where in your CLASSPATH. \r\n\r\n___________________\r\n\r\n\r\n\r\nSome of the &quot;getResourceAsStream()&quot; options in this answer didn&#39;t work for me, but this one did:\r\n\r\n    SomeClassWithinYourSourceDir.class.getClassLoader().getResourceAsStream(&quot;yourResource&quot;);\r\n\r\n","title":"SpringBootTest weird behavior when getting resource classpath","body":"<p>This is my every test class annotation</p>\n<pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass ApplicationTests {}\n</code></pre>\n<hr />\n<pre><code>ClassLoader.class.getResourceAsStream(&quot;/path/to/your/xml&quot;) and make sure that your compile script is copying the xml file to where in your CLASSPATH. \n</code></pre>\n<hr />\n<p>Some of the &quot;getResourceAsStream()&quot; options in this answer didn't work for me, but this one did:</p>\n<pre><code>SomeClassWithinYourSourceDir.class.getClassLoader().getResourceAsStream(&quot;yourResource&quot;);\n</code></pre>\n"}],"owner":{"account_id":13954095,"reputation":164,"user_id":10076956,"display_name":"Van Teo Le"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690365341,"creation_date":1690084943,"question_id":76746611,"body_markdown":"So i setup an integration test for Spring Boot like this:\r\n```java\r\n@Tag(TestType.INTEGRATION_TEST)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE, classes = MyApplication.class)\r\n@AutoConfigureEmbeddedDatabase(provider = DatabaseProvider.ZONKY)\r\n@AutoConfigureMockMvc\r\n@ActiveProfiles(&quot;test&quot;)\r\npublic class IntegrationTest {}\r\n```\r\nSo this test will spin up all of my components, one of which in particular, must retrieve a yml file from my classpath. The value of &quot;application.hub-spot.data&quot; is &quot;classpath:/path/to/hubspot/config.yml&quot;.\r\n\r\nBUT, currently that component, during test ONLY, cannot find the resource:\r\n```java\r\n      @Value(&quot;${application.hub-spot.data}&quot;)\r\n    private String path;\r\npublic void example(){\r\n\tnew ClassPathResource(path).getInputStream(); // this will throw an error\r\n}\r\n```\r\n\r\n\r\n\r\nHOWEVER if i change it like this then the resource can be found easily\r\n```java\r\n    @Value(&quot;${application.hub-spot.data}&quot;)\r\n    private Resource rsrc;\r\n    public void example(){\r\n\trsrc.getInputStream(); // this work\r\n}\r\n```\r\n\r\nOne more fact is that if i remove the &quot;classpath:&quot; prefix from the value, then both my current code and the ad-hoc fix one will work perfectly.\r\n\r\nI see no documentation regarding this behaviour, so if anyone has come across this, please let me know!\r\nThank you in advance.","title":"SpringBootTest weird behavior when getting resource classpath","body":"<p>So i setup an integration test for Spring Boot like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Tag(TestType.INTEGRATION_TEST)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE, classes = MyApplication.class)\n@AutoConfigureEmbeddedDatabase(provider = DatabaseProvider.ZONKY)\n@AutoConfigureMockMvc\n@ActiveProfiles(&quot;test&quot;)\npublic class IntegrationTest {}\n</code></pre>\n<p>So this test will spin up all of my components, one of which in particular, must retrieve a yml file from my classpath. The value of &quot;application.hub-spot.data&quot; is &quot;classpath:/path/to/hubspot/config.yml&quot;.</p>\n<p>BUT, currently that component, during test ONLY, cannot find the resource:</p>\n<pre class=\"lang-java prettyprint-override\"><code>      @Value(&quot;${application.hub-spot.data}&quot;)\n    private String path;\npublic void example(){\n    new ClassPathResource(path).getInputStream(); // this will throw an error\n}\n</code></pre>\n<p>HOWEVER if i change it like this then the resource can be found easily</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Value(&quot;${application.hub-spot.data}&quot;)\n    private Resource rsrc;\n    public void example(){\n    rsrc.getInputStream(); // this work\n}\n</code></pre>\n<p>One more fact is that if i remove the &quot;classpath:&quot; prefix from the value, then both my current code and the ad-hoc fix one will work perfectly.</p>\n<p>I see no documentation regarding this behaviour, so if anyone has come across this, please let me know!\nThank you in advance.</p>\n"},{"tags":["java","spring-boot","elasticsearch","mockito","powermock"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":1,"creation_date":1690310395,"post_id":76763772,"comment_id":135334783,"body_markdown":"How do you pass the mocked client to class under test?","body":"How do you pass the mocked client to class under test?"},{"owner":{"account_id":25489160,"reputation":49,"user_id":19284258,"display_name":"ReallyNicePerson"},"score":0,"creation_date":1690363913,"post_id":76763772,"comment_id":135341838,"body_markdown":"@BeforeEach\n    void setUp() {\n        MockitoAnnotations.openMocks(this)\n        client = mock(RestHighLevelClient.class);\n        collectorService = new RulePreviewsCollectorService(someService, someOtherService, xxx, ..., client);\n    }\nI pass it like this in a constructor","body":"@BeforeEach     void setUp() {         MockitoAnnotations.openMocks(this)         client = mock(RestHighLevelClient.class);         collectorService = new RulePreviewsCollectorService(someService, someOtherService, xxx, ..., client);     } I pass it like this in a constructor"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1690364120,"post_id":76763772,"comment_id":135341888,"body_markdown":"I already see that you initialise the client twice - once via openMocks, then via mock - but I cannot find the problem without seeing entire test class (with all annotations, and ideally imports)","body":"I already see that you initialise the client twice - once via openMocks, then via mock - but I cannot find the problem without seeing entire test class (with all annotations, and ideally imports)"},{"owner":{"account_id":25489160,"reputation":49,"user_id":19284258,"display_name":"ReallyNicePerson"},"score":0,"creation_date":1690364268,"post_id":76763772,"comment_id":135341907,"body_markdown":"I will change description, and add everything needed.","body":"I will change description, and add everything needed."},{"owner":{"account_id":25489160,"reputation":49,"user_id":19284258,"display_name":"ReallyNicePerson"},"score":0,"creation_date":1690365089,"post_id":76763772,"comment_id":135342089,"body_markdown":"@Lesiak did change description.","body":"@Lesiak did change description."},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1690366310,"post_id":76763772,"comment_id":135342378,"body_markdown":"Did you debug to check if it is really assigned in the constructor, and iif so, when it changes to null?","body":"Did you debug to check if it is really assigned in the constructor, and iif so, when it changes to null?"},{"owner":{"account_id":25489160,"reputation":49,"user_id":19284258,"display_name":"ReallyNicePerson"},"score":0,"creation_date":1690366613,"post_id":76763772,"comment_id":135342437,"body_markdown":"I did debug and It&#39;s mocking null in a test class is like this: \n~ client = {RestHighLevelClient$MockitoMock$395164400@3320} &quot;Mock for RestHighLevelClient, hashCode: 1697441364&quot;\n&gt; mockitolnterceptor = {MockMethodInterceptor@4198} \nclient = null \n...(every value is null or false )\n featuresClient = null","body":"I did debug and It&#39;s mocking null in a test class is like this:  ~ client = {RestHighLevelClient$MockitoMock$395164400@3320} &quot;Mock for RestHighLevelClient, hashCode: 1697441364&quot; &gt; mockitolnterceptor = {MockMethodInterceptor@4198}  client = null  ...(every value is null or false )  featuresClient = null"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1690372305,"post_id":76763772,"comment_id":135343596,"body_markdown":"This is perfectly normal behaviour for mockito - fields of the mocked class are null. You should be interacting with the mocked object via methods, and not rely on its fields. Looking at `RestHighLevelClient` code all fields are private, and you should not be accessing them. If you use some accessor like `getLowLevelClient` you have to stub it.","body":"This is perfectly normal behaviour for mockito - fields of the mocked class are null. You should be interacting with the mocked object via methods, and not rely on its fields. Looking at <code>RestHighLevelClient</code> code all fields are private, and you should not be accessing them. If you use some accessor like <code>getLowLevelClient</code> you have to stub it."}],"owner":{"account_id":25489160,"reputation":49,"user_id":19284258,"display_name":"ReallyNicePerson"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690365063,"creation_date":1690295554,"question_id":76763772,"body_markdown":"I want to mock RestHighLevelClient like this: `RestHighLevelClient client = mock(RestHighLevelClient.class);`, but when I do, it says that mocked client is null. Like it&#39;s not properly mocking. So when i try: \r\n\r\n```\r\n        ActionsSearchRequest request = ActionsSearchRequest.builder()\r\n                .merchSnapshot(merchSnapshot)\r\n                .siteName(SiteName.COM)\r\n                .searchPhrase(&quot;skirt&quot;)\r\n                .build();\r\n        SearchHit hit1 = new SearchHit(1);\r\n        SearchHit hit2 = new SearchHit(2);\r\n\r\n        SearchHits searchHits = new SearchHits(new SearchHit[]{hit1, hit2}, new TotalHits(2, TotalHits.Relation.EQUAL_TO), 1.0f);\r\n\r\n        SearchResponse searchResponse = mock(SearchResponse.class);\r\n        when(searchResponse.getHits()).thenReturn(searchHits);\r\n        when(searchResponse.getTotalShards()).thenReturn(1);\r\n        when(searchResponse.getSuccessfulShards()).thenReturn(1);\r\n        when(searchResponse.getFailedShards()).thenReturn(0);\r\n        when(searchResponse.getShardFailures()).thenReturn(null);\r\n        when(searchResponse.isTimedOut()).thenReturn(false);\r\n        when(client.search(any(SearchRequest.class), any(RequestOptions.class))).thenReturn(searchResponse);\r\n```\r\n\r\nI get NullPointerException on `SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);` line in class that is being tested. \r\nHere is full test class with annotations and imports, I only skipped names of services used but they are not related and every each of them worked before, the problem started when i needed to change constructor and add rest client and mock it. every other service works. \r\n\r\n```\r\nimport org.apache.lucene.search.TotalHits;\r\nimport org.elasticsearch.action.search.*;\r\nimport org.elasticsearch.client.RequestOptions;\r\nimport org.elasticsearch.client.RestHighLevelClient;\r\nimport org.elasticsearch.common.document.DocumentField;\r\nimport org.elasticsearch.search.SearchHit;\r\nimport org.elasticsearch.search.SearchHits;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.mockito.MockitoAnnotations;\r\nimport org.springframework.test.util.ReflectionTestUtils;\r\n\r\nimport java.io.IOException;\r\nimport java.time.Instant;\r\nimport java.util.*;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.mockito.ArgumentMatchers.any;\r\nimport static org.mockito.Mockito.*;\r\n\r\nclass RulePreviewsCollectorServiceTest {\r\n\r\n    private String comAlias = &quot;com&quot;;\r\n    private String comNAlias = &quot;comN&quot;;\r\n\r\n    RestHighLevelClient client = mock(RestHighLevelClient.class);\r\n\r\n    RulePreviewsCollectorService collectorService = createRulePreviewsCollectorService(Service,\r\n            Service, Service, Service, Service, client);\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        MockitoAnnotations.openMocks(this);\r\n        when(merchSnapshot.getRulesSnapshot()).thenReturn(rulesSnapshot);\r\n        client = mock(RestHighLevelClient.class);\r\n\r\n        collectorService = new RulePreviewsCollectorService(Service, Service, Service,\r\n                Service, Service, new Collector(),\r\n                new Collector(), new Collector(), client);\r\n        ReflectionTestUtils.setField(collectorService, &quot;comAlias&quot;, &quot;com&quot;);\r\n        ReflectionTestUtils.setField(collectorService, &quot;comNAlias&quot;, &quot;comN&quot;);\r\n    }\r\n\r\n    @Test\r\n    void testCollect() throws IOException {\r\n       \r\n       ActionsSearchRequest request = ActionsSearchRequest.builder()\r\n                .merchSnapshot(merchSnapshot)\r\n                .siteName(SiteName.COM)\r\n                .searchPhrase(&quot;skirt&quot;)\r\n                .build();\r\n        SearchHit hit1 = new SearchHit(1);\r\n        SearchHit hit2 = new SearchHit(2);\r\n\r\n        SearchHits searchHits = new SearchHits(new SearchHit[]{hit1, hit2}, new TotalHits(2, TotalHits.Relation.EQUAL_TO), 1.0f);\r\n\r\n        SearchResponse searchResponse = mock(SearchResponse.class);\r\n        when(searchResponse.getHits()).thenReturn(searchHits);\r\n        when(searchResponse.getTotalShards()).thenReturn(1);\r\n        when(searchResponse.getSuccessfulShards()).thenReturn(1);\r\n        when(searchResponse.getFailedShards()).thenReturn(0);\r\n        when(searchResponse.getShardFailures()).thenReturn(null);\r\n        when(searchResponse.isTimedOut()).thenReturn(false);\r\n        when(client.search(any(SearchRequest.class), any(RequestOptions.class))).thenReturn(searchResponse);\r\n                     \r\n    private RulePreviewsCollectorService createRulePreviewsCollectorService(Service Service,\r\n                                                                            Service Service,\r\n                                                                            Service Service,\r\n                                                                            Service Service,\r\n                                                                            Service Service,\r\n                                                                            RestHighLevelClient client) {\r\n\r\n        return new RulePreviewsCollectorService(Service, Service, Service, Service, Service, new Collector(), new Collector(), new Collector(), client);\r\n    }\r\n}\r\n\r\n\r\n```","title":"Mock java elasticsearch RestHighLevelClient","body":"<p>I want to mock RestHighLevelClient like this: <code>RestHighLevelClient client = mock(RestHighLevelClient.class);</code>, but when I do, it says that mocked client is null. Like it's not properly mocking. So when i try:</p>\n<pre><code>        ActionsSearchRequest request = ActionsSearchRequest.builder()\n                .merchSnapshot(merchSnapshot)\n                .siteName(SiteName.COM)\n                .searchPhrase(&quot;skirt&quot;)\n                .build();\n        SearchHit hit1 = new SearchHit(1);\n        SearchHit hit2 = new SearchHit(2);\n\n        SearchHits searchHits = new SearchHits(new SearchHit[]{hit1, hit2}, new TotalHits(2, TotalHits.Relation.EQUAL_TO), 1.0f);\n\n        SearchResponse searchResponse = mock(SearchResponse.class);\n        when(searchResponse.getHits()).thenReturn(searchHits);\n        when(searchResponse.getTotalShards()).thenReturn(1);\n        when(searchResponse.getSuccessfulShards()).thenReturn(1);\n        when(searchResponse.getFailedShards()).thenReturn(0);\n        when(searchResponse.getShardFailures()).thenReturn(null);\n        when(searchResponse.isTimedOut()).thenReturn(false);\n        when(client.search(any(SearchRequest.class), any(RequestOptions.class))).thenReturn(searchResponse);\n</code></pre>\n<p>I get NullPointerException on <code>SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);</code> line in class that is being tested.\nHere is full test class with annotations and imports, I only skipped names of services used but they are not related and every each of them worked before, the problem started when i needed to change constructor and add rest client and mock it. every other service works.</p>\n<pre><code>import org.apache.lucene.search.TotalHits;\nimport org.elasticsearch.action.search.*;\nimport org.elasticsearch.client.RequestOptions;\nimport org.elasticsearch.client.RestHighLevelClient;\nimport org.elasticsearch.common.document.DocumentField;\nimport org.elasticsearch.search.SearchHit;\nimport org.elasticsearch.search.SearchHits;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.MockitoAnnotations;\nimport org.springframework.test.util.ReflectionTestUtils;\n\nimport java.io.IOException;\nimport java.time.Instant;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.*;\n\nclass RulePreviewsCollectorServiceTest {\n\n    private String comAlias = &quot;com&quot;;\n    private String comNAlias = &quot;comN&quot;;\n\n    RestHighLevelClient client = mock(RestHighLevelClient.class);\n\n    RulePreviewsCollectorService collectorService = createRulePreviewsCollectorService(Service,\n            Service, Service, Service, Service, client);\n\n    @BeforeEach\n    void setUp() {\n        MockitoAnnotations.openMocks(this);\n        when(merchSnapshot.getRulesSnapshot()).thenReturn(rulesSnapshot);\n        client = mock(RestHighLevelClient.class);\n\n        collectorService = new RulePreviewsCollectorService(Service, Service, Service,\n                Service, Service, new Collector(),\n                new Collector(), new Collector(), client);\n        ReflectionTestUtils.setField(collectorService, &quot;comAlias&quot;, &quot;com&quot;);\n        ReflectionTestUtils.setField(collectorService, &quot;comNAlias&quot;, &quot;comN&quot;);\n    }\n\n    @Test\n    void testCollect() throws IOException {\n       \n       ActionsSearchRequest request = ActionsSearchRequest.builder()\n                .merchSnapshot(merchSnapshot)\n                .siteName(SiteName.COM)\n                .searchPhrase(&quot;skirt&quot;)\n                .build();\n        SearchHit hit1 = new SearchHit(1);\n        SearchHit hit2 = new SearchHit(2);\n\n        SearchHits searchHits = new SearchHits(new SearchHit[]{hit1, hit2}, new TotalHits(2, TotalHits.Relation.EQUAL_TO), 1.0f);\n\n        SearchResponse searchResponse = mock(SearchResponse.class);\n        when(searchResponse.getHits()).thenReturn(searchHits);\n        when(searchResponse.getTotalShards()).thenReturn(1);\n        when(searchResponse.getSuccessfulShards()).thenReturn(1);\n        when(searchResponse.getFailedShards()).thenReturn(0);\n        when(searchResponse.getShardFailures()).thenReturn(null);\n        when(searchResponse.isTimedOut()).thenReturn(false);\n        when(client.search(any(SearchRequest.class), any(RequestOptions.class))).thenReturn(searchResponse);\n                     \n    private RulePreviewsCollectorService createRulePreviewsCollectorService(Service Service,\n                                                                            Service Service,\n                                                                            Service Service,\n                                                                            Service Service,\n                                                                            Service Service,\n                                                                            RestHighLevelClient client) {\n\n        return new RulePreviewsCollectorService(Service, Service, Service, Service, Service, new Collector(), new Collector(), new Collector(), client);\n    }\n}\n\n\n</code></pre>\n"},{"tags":["java","apache-spark","amazon-emr","java-11"],"comments":[{"owner":{"account_id":7132908,"reputation":189,"user_id":5453550,"display_name":"NLxDoDge"},"score":0,"creation_date":1643375969,"post_id":70886684,"comment_id":125329493,"body_markdown":"Hi this means that your code was compiled on your machine with version 55 (Could be Java 11). But that the machine where you run the code is a lower version, so that won&#39;t work. Update the target machine to the same version.","body":"Hi this means that your code was compiled on your machine with version 55 (Could be Java 11). But that the machine where you run the code is a lower version, so that won&#39;t work. Update the target machine to the same version."},{"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"score":0,"creation_date":1643385329,"post_id":70886684,"comment_id":125333461,"body_markdown":"Yeh, I think this is the reason, but I don&#39;t know how to configure EMR java runtime. Does EMR suport java 11 and how to set up this?","body":"Yeh, I think this is the reason, but I don&#39;t know how to configure EMR java runtime. Does EMR suport java 11 and how to set up this?"},{"owner":{"account_id":4652856,"reputation":276,"user_id":3769220,"display_name":"gbharat"},"score":1,"creation_date":1647557426,"post_id":70886684,"comment_id":126407975,"body_markdown":"Try this\n\nhttps://omkarkulkarni.medium.com/quick-guide-to-bootstrapping-java-11-on-emr-d70f0115efe8","body":"Try this  <a href=\"https://omkarkulkarni.medium.com/quick-guide-to-bootstrapping-java-11-on-emr-d70f0115efe8\" rel=\"nofollow noreferrer\">omkarkulkarni.medium.com/&hellip;</a>"},{"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"score":0,"creation_date":1647619435,"post_id":70886684,"comment_id":126423997,"body_markdown":"This is really good :) I&#39;ll try it","body":"This is really good :) I&#39;ll try it"}],"answers":[{"tags":[],"owner":{"account_id":303644,"reputation":2139,"user_id":612704,"display_name":"Steven"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1690364887,"creation_date":1651218566,"answer_id":72054500,"question_id":70886684,"body_markdown":"In the most recent versions of EMR, java 11 is installed.  To enable it, you can provide the following [configuration](https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-configure-apps.html).\r\n```json\r\n[\r\n    {\r\n        &quot;Classification&quot;: &quot;spark-env&quot;,\r\n        &quot;Configurations&quot;: [\r\n            {\r\n                &quot;Classification&quot;: &quot;export&quot;,\r\n                &quot;Properties&quot;: {\r\n                    &quot;JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        &quot;Classification&quot;: &quot;spark-defaults&quot;,\r\n        &quot;Properties&quot;: {\r\n            &quot;spark.executorEnv.JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\r\n        }\r\n    }\r\n]\r\n```\r\nThis does not seem to be documented.\r\n\r\nThe `defaultJavaOptions` and `extraJavaOptions` might contain incompatible options for java 11 which you still might need to adapt/update.\r\n\r\n**update:**\r\n\r\nFrom EMR 6.12.0 onward there is [official support][1] for multiple jvms, using the methods specified above.\r\n\r\n  [1]: https://docs.aws.amazon.com/emr/latest/ReleaseGuide/configuring-java8.html","title":"How to use java runtime 11 in EMR cluster AWS","body":"<p>In the most recent versions of EMR, java 11 is installed.  To enable it, you can provide the following <a href=\"https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-configure-apps.html\" rel=\"nofollow noreferrer\">configuration</a>.</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {\n        &quot;Classification&quot;: &quot;spark-env&quot;,\n        &quot;Configurations&quot;: [\n            {\n                &quot;Classification&quot;: &quot;export&quot;,\n                &quot;Properties&quot;: {\n                    &quot;JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\n                }\n            }\n        ]\n    },\n    {\n        &quot;Classification&quot;: &quot;spark-defaults&quot;,\n        &quot;Properties&quot;: {\n            &quot;spark.executorEnv.JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\n        }\n    }\n]\n</code></pre>\n<p>This does not seem to be documented.</p>\n<p>The <code>defaultJavaOptions</code> and <code>extraJavaOptions</code> might contain incompatible options for java 11 which you still might need to adapt/update.</p>\n<p><strong>update:</strong></p>\n<p>From EMR 6.12.0 onward there is <a href=\"https://docs.aws.amazon.com/emr/latest/ReleaseGuide/configuring-java8.html\" rel=\"nofollow noreferrer\">official support</a> for multiple jvms, using the methods specified above.</p>\n"},{"tags":[],"owner":{"account_id":6088447,"reputation":954,"user_id":4751598,"accept_rate":62,"display_name":"Matthew Jones"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682266815,"creation_date":1662005782,"answer_id":73564251,"question_id":70886684,"body_markdown":"Here is the full configuration including the necessary JVM options:\r\n```json\r\n[\r\n    {\r\n        &quot;Classification&quot;: &quot;spark-env&quot;,\r\n        &quot;Configurations&quot;: [\r\n            {\r\n                &quot;Classification&quot;: &quot;export&quot;,\r\n                &quot;Properties&quot;: {\r\n                    &quot;JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        &quot;Classification&quot;: &quot;spark-defaults&quot;,\r\n        &quot;Properties&quot;: {\r\n            &quot;spark.executorEnv.JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;,\r\n            &quot;spark.driver.defaultJavaOptions&quot;: &quot;-XX:OnOutOfMemoryError=&#39;kill -9 %p&#39; -XX:MaxHeapFreeRatio=70&quot;,\r\n            &quot;spark.executor.defaultJavaOptions&quot;: &quot;-verbose:gc -Xlog:gc*::time -XX:+PrintGCDetails -XX:OnOutOfMemoryError=&#39;kill -9 %p&#39; -XX:MaxHeapFreeRatio=70 -XX:+IgnoreUnrecognizedVMOptions&quot;\r\n        }\r\n    }\r\n]\r\n```","title":"How to use java runtime 11 in EMR cluster AWS","body":"<p>Here is the full configuration including the necessary JVM options:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {\n        &quot;Classification&quot;: &quot;spark-env&quot;,\n        &quot;Configurations&quot;: [\n            {\n                &quot;Classification&quot;: &quot;export&quot;,\n                &quot;Properties&quot;: {\n                    &quot;JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\n                }\n            }\n        ]\n    },\n    {\n        &quot;Classification&quot;: &quot;spark-defaults&quot;,\n        &quot;Properties&quot;: {\n            &quot;spark.executorEnv.JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;,\n            &quot;spark.driver.defaultJavaOptions&quot;: &quot;-XX:OnOutOfMemoryError='kill -9 %p' -XX:MaxHeapFreeRatio=70&quot;,\n            &quot;spark.executor.defaultJavaOptions&quot;: &quot;-verbose:gc -Xlog:gc*::time -XX:+PrintGCDetails -XX:OnOutOfMemoryError='kill -9 %p' -XX:MaxHeapFreeRatio=70 -XX:+IgnoreUnrecognizedVMOptions&quot;\n        }\n    }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2316007,"reputation":85,"user_id":2033060,"display_name":"Mass Dosage"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673447884,"creation_date":1673447884,"answer_id":75084748,"question_id":70886684,"body_markdown":"For running Spark (3.3.0) on EMR 6 (6.9.0) I had to provide the following (note the additional &quot;hadoop-env&quot; and the empty &quot;Properties&quot; elements):\r\n\r\n    [\r\n    {\r\n        &quot;Classification&quot;: &quot;hadoop-env&quot;, \r\n        &quot;Configurations&quot;: [\r\n            {\r\n                &quot;Classification&quot;: &quot;export&quot;, \r\n                &quot;Configurations&quot;: [], \r\n                &quot;Properties&quot;: {\r\n                    &quot;JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\r\n                }\r\n            }\r\n        ], \r\n        &quot;Properties&quot;: {}\r\n    }, \r\n    {\r\n        &quot;Classification&quot;: &quot;spark-env&quot;,\r\n        &quot;Configurations&quot;: [\r\n            {\r\n                &quot;Classification&quot;: &quot;export&quot;,\r\n                 &quot;Configurations&quot;: [],\r\n                &quot;Properties&quot;: {\r\n                    &quot;JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\r\n                }\r\n            }\r\n        ],\r\n        &quot;Properties&quot;: {}\r\n    },\r\n    {\r\n        &quot;Classification&quot;: &quot;spark-defaults&quot;,\r\n        &quot;Properties&quot;: {\r\n            &quot;spark.executorEnv.JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\r\n        }\r\n    }\r\n]","title":"How to use java runtime 11 in EMR cluster AWS","body":"<p>For running Spark (3.3.0) on EMR 6 (6.9.0) I had to provide the following (note the additional &quot;hadoop-env&quot; and the empty &quot;Properties&quot; elements):</p>\n<pre><code>[\n{\n    &quot;Classification&quot;: &quot;hadoop-env&quot;, \n    &quot;Configurations&quot;: [\n        {\n            &quot;Classification&quot;: &quot;export&quot;, \n            &quot;Configurations&quot;: [], \n            &quot;Properties&quot;: {\n                &quot;JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\n            }\n        }\n    ], \n    &quot;Properties&quot;: {}\n}, \n{\n    &quot;Classification&quot;: &quot;spark-env&quot;,\n    &quot;Configurations&quot;: [\n        {\n            &quot;Classification&quot;: &quot;export&quot;,\n             &quot;Configurations&quot;: [],\n            &quot;Properties&quot;: {\n                &quot;JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\n            }\n        }\n    ],\n    &quot;Properties&quot;: {}\n},\n{\n    &quot;Classification&quot;: &quot;spark-defaults&quot;,\n    &quot;Properties&quot;: {\n        &quot;spark.executorEnv.JAVA_HOME&quot;: &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;\n    }\n}\n</code></pre>\n<p>]</p>\n"},{"tags":[],"owner":{"account_id":5471172,"reputation":76,"user_id":4350509,"display_name":"Sajjan Bhattarai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684152148,"creation_date":1684152148,"answer_id":76253869,"question_id":70886684,"body_markdown":"In EMR 6.10.0, Java 11 is pre-installed. To utilize it in applications, we can simply add a bootstrap action to update the alternative:\r\n\r\n    sudo update-alternatives --set java /usr/lib/jvm/java-11-amazon-corretto.x86_64/bin/java\r\n\r\nWith this, Java 11 will be set as default runtime in EMR nodes. Note that Java 11 doesn&#39;t recognize some options from previous runtime version, so the application or service may fail to start. For Spark, if the containers fail to start JVM, consider passing configuration &quot;-XX:+IgnoreUnrecognizedVMOptions&quot;. Similarly, other service like Hive-hcatalog-server can also fail to start, which can be addressed as below:\r\n\r\n    [\r\n        {\r\n            &quot;classification&quot;: &quot;spark-defaults&quot;,\r\n            &quot;properties&quot;: {\r\n                &quot;spark.executor.extraJavaOptions&quot;: &quot;-XX:+IgnoreUnrecognizedVMOptions&quot;,\r\n                &quot;spark.driver.extraJavaOptions&quot;: &quot;-XX:+IgnoreUnrecognizedVMOptions&quot;\r\n            }\r\n        },\r\n      {\r\n        &quot;Classification&quot;: &quot;hcatalog-env&quot;,\r\n        &quot;Configurations&quot;: [\r\n          {\r\n            &quot;Classification&quot;: &quot;export&quot;,\r\n            &quot;Properties&quot;: {\r\n              &quot;HADOOP_OPTS&quot;: &quot;-XX:+IgnoreUnrecognizedVMOptions&quot;\r\n            }\r\n          }\r\n        ],\r\n        &quot;Properties&quot;: {}\r\n      }\r\n    ]\r\n\r\nHope that helps!","title":"How to use java runtime 11 in EMR cluster AWS","body":"<p>In EMR 6.10.0, Java 11 is pre-installed. To utilize it in applications, we can simply add a bootstrap action to update the alternative:</p>\n<pre><code>sudo update-alternatives --set java /usr/lib/jvm/java-11-amazon-corretto.x86_64/bin/java\n</code></pre>\n<p>With this, Java 11 will be set as default runtime in EMR nodes. Note that Java 11 doesn't recognize some options from previous runtime version, so the application or service may fail to start. For Spark, if the containers fail to start JVM, consider passing configuration &quot;-XX:+IgnoreUnrecognizedVMOptions&quot;. Similarly, other service like Hive-hcatalog-server can also fail to start, which can be addressed as below:</p>\n<pre><code>[\n    {\n        &quot;classification&quot;: &quot;spark-defaults&quot;,\n        &quot;properties&quot;: {\n            &quot;spark.executor.extraJavaOptions&quot;: &quot;-XX:+IgnoreUnrecognizedVMOptions&quot;,\n            &quot;spark.driver.extraJavaOptions&quot;: &quot;-XX:+IgnoreUnrecognizedVMOptions&quot;\n        }\n    },\n  {\n    &quot;Classification&quot;: &quot;hcatalog-env&quot;,\n    &quot;Configurations&quot;: [\n      {\n        &quot;Classification&quot;: &quot;export&quot;,\n        &quot;Properties&quot;: {\n          &quot;HADOOP_OPTS&quot;: &quot;-XX:+IgnoreUnrecognizedVMOptions&quot;\n        }\n      }\n    ],\n    &quot;Properties&quot;: {}\n  }\n]\n</code></pre>\n<p>Hope that helps!</p>\n"}],"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7011,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":72054500,"answer_count":4,"score":6,"last_activity_date":1690364887,"creation_date":1643323062,"question_id":70886684,"body_markdown":"I&#39;m creating a cluter in EMR aws and when spark runs my application I&#39;m getting error below:\r\n\r\n```log\r\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: \r\ncom/example/demodriver/MyClassFromJAR has been compiled by a more recent version of the Java Runtime (class file version 55.0), \r\nthis version of the Java Runtime only recognizes class file versions up to 52.0\r\n```\r\n\r\nI&#39;m using releaseLabel `emr-6.5.0` on clusters and My driver jar is built in java11\r\n\r\nHow run java11 application in EMR? Or this error is about anything else?","title":"How to use java runtime 11 in EMR cluster AWS","body":"<p>I'm creating a cluter in EMR aws and when spark runs my application I'm getting error below:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: \ncom/example/demodriver/MyClassFromJAR has been compiled by a more recent version of the Java Runtime (class file version 55.0), \nthis version of the Java Runtime only recognizes class file versions up to 52.0\n</code></pre>\n<p>I'm using releaseLabel <code>emr-6.5.0</code> on clusters and My driver jar is built in java11</p>\n<p>How run java11 application in EMR? Or this error is about anything else?</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1530534367,"post_id":51136072,"comment_id":89256468,"body_markdown":"How do you do that manually? Relevant HTML, code trials, error (if any)?","body":"How do you do that manually? Relevant HTML, code trials, error (if any)?"},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":0,"creation_date":1530534435,"post_id":51136072,"comment_id":89256513,"body_markdown":"I don&#39;t think you can perform that, without a plugin. Probably if you say us your use case, we can find a solution.","body":"I don&#39;t think you can perform that, without a plugin. Probably if you say us your use case, we can find a solution."},{"owner":{"account_id":9933941,"reputation":1741,"user_id":7352883,"accept_rate":50,"display_name":"Shivam Mishra"},"score":0,"creation_date":1530535919,"post_id":51136072,"comment_id":89257338,"body_markdown":"If you want to zoom page content, refer - https://stackoverflow.com/questions/15024756/selenium-webdriver-zoom-in-out-page-content","body":"If you want to zoom page content, refer - <a href=\"https://stackoverflow.com/questions/15024756/selenium-webdriver-zoom-in-out-page-content\" title=\"selenium webdriver zoom in out page content\">stackoverflow.com/questions/15024756/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":10201069,"reputation":5579,"user_id":8625512,"accept_rate":100,"display_name":"Andrei Suvorkov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530534873,"creation_date":1530534873,"answer_id":51136365,"question_id":51136072,"body_markdown":"You can try `Robot` class:\r\n\r\n    Robot robot = new Robot();\r\n    \r\n    robot.keyPress(KeyEvent.VK_CONTROL);\r\n    robot.keyPress(KeyEvent.VK_PLUS);\r\n    robot.keyRelease(KeyEvent.VK_CONTROL);\r\n    robot.keyRelease(KeyEvent.VK_PLUS);\r\n\r\nThis will simulate `Ctrl + &#39;+&#39;` key press, what is equivalent to zoom in. Also you can get more information in [documentation][1].\r\n\r\n \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html","title":"How to zoom a particular area in selenium?","body":"<p>You can try <code>Robot</code> class:</p>\n\n<pre><code>Robot robot = new Robot();\n\nrobot.keyPress(KeyEvent.VK_CONTROL);\nrobot.keyPress(KeyEvent.VK_PLUS);\nrobot.keyRelease(KeyEvent.VK_CONTROL);\nrobot.keyRelease(KeyEvent.VK_PLUS);\n</code></pre>\n\n<p>This will simulate <code>Ctrl + '+'</code> key press, what is equivalent to zoom in. Also you can get more information in <a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":9562641,"reputation":1275,"user_id":7102875,"display_name":"dangi13"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1530538464,"creation_date":1530538464,"answer_id":51137462,"question_id":51136072,"body_markdown":"If you want to zoom out a particular WebElement then you can use the below code : \r\n\r\n    /** It will zoom the given WebElement\r\n    \t * @param driver\r\n    \t * @param webElement\r\n    \t * @param zoomPercentage e.g 200, 100, 50 etc\r\n    \t */\r\n    \tprivate static void zoomElement(WebDriver driver, WebElement webElement,int zoomPercentage) {\r\n    \t\t((JavascriptExecutor) driver).executeScript(&quot;arguments[0].style.zoom=&#39;&quot; + zoomPercentage + &#39;%&#39; + &quot;&#39; &quot;, webElement);\t\t\r\n    \t}\r\n\r\nhere is the actual javascript without customization : \r\n\r\n    ((JavascriptExecutor) driver).executeScript(&quot;arguments[0].style.zoom=&#39;300%&#39;&quot;, webElement);\r\n\r\nHope it helps you.","title":"How to zoom a particular area in selenium?","body":"<p>If you want to zoom out a particular WebElement then you can use the below code : </p>\n\n<pre><code>/** It will zoom the given WebElement\n     * @param driver\n     * @param webElement\n     * @param zoomPercentage e.g 200, 100, 50 etc\n     */\n    private static void zoomElement(WebDriver driver, WebElement webElement,int zoomPercentage) {\n        ((JavascriptExecutor) driver).executeScript(\"arguments[0].style.zoom='\" + zoomPercentage + '%' + \"' \", webElement);     \n    }\n</code></pre>\n\n<p>here is the actual javascript without customization : </p>\n\n<pre><code>((JavascriptExecutor) driver).executeScript(\"arguments[0].style.zoom='300%'\", webElement);\n</code></pre>\n\n<p>Hope it helps you.</p>\n"}],"owner":{"account_id":13881185,"reputation":11,"user_id":10021517,"display_name":"Jaya Prakash"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":506,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1690364823,"creation_date":1530533908,"question_id":51136072,"body_markdown":"I need to zoom a particular area in my driver. is there any way to do it?\r\nI need not zoom the total browser.","title":"How to zoom a particular area in selenium?","body":"<p>I need to zoom a particular area in my driver. is there any way to do it?\nI need not zoom the total browser.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2085689,"reputation":5357,"user_id":1856738,"accept_rate":82,"display_name":"class stacker"},"score":0,"creation_date":1359992380,"post_id":14690093,"comment_id":20540170,"body_markdown":"What are you missing there? The token?","body":"What are you missing there? The token?"},{"owner":{"account_id":2035621,"reputation":29377,"user_id":1818045,"accept_rate":89,"display_name":"ben75"},"score":0,"creation_date":1359992439,"post_id":14690093,"comment_id":20540206,"body_markdown":"yes the token and so the ability the remove callback to something that was posted with postDelayed","body":"yes the token and so the ability the remove callback to something that was posted with postDelayed"},{"owner":{"account_id":2085689,"reputation":5357,"user_id":1856738,"accept_rate":82,"display_name":"class stacker"},"score":0,"creation_date":1359992511,"post_id":14690093,"comment_id":20540235,"body_markdown":"You can always call `Handler.removeCallbacks()` with your Runnable. Works excellently if you ask me.","body":"You can always call <code>Handler.removeCallbacks()</code> with your Runnable. Works excellently if you ask me."},{"owner":{"account_id":413213,"reputation":35885,"user_id":786718,"accept_rate":87,"display_name":"DeeV"},"score":1,"creation_date":1359993288,"post_id":14690093,"comment_id":20540714,"body_markdown":"That&#39;s a good question. I find it odd that the documentation for what &quot;token&quot; is supposed to be other than an identifier for what Runnables you want to remove.","body":"That&#39;s a good question. I find it odd that the documentation for what &quot;token&quot; is supposed to be other than an identifier for what Runnables you want to remove."}],"answers":[{"tags":[],"owner":{"account_id":1820045,"reputation":2981,"user_id":1654303,"accept_rate":80,"display_name":"psykhi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359992517,"creation_date":1359992517,"answer_id":14690144,"question_id":14690093,"body_markdown":"To remove a postDelayed runnable r from a handler H, just call H.removeCallbacks(r). Why do you need a token?","title":"Handler.postAtTime vs Handler.postDelayed","body":"<p>To remove a postDelayed runnable r from a handler H, just call H.removeCallbacks(r). Why do you need a token?</p>\n"},{"tags":[],"owner":{"account_id":1410211,"reputation":18633,"user_id":2100044,"accept_rate":98,"display_name":"wtsang02"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1359994506,"creation_date":1359994103,"answer_id":14690668,"question_id":14690093,"body_markdown":"After looking at the source code, the token object eventually passes to the Message:\r\n\r\n    public final boolean postAtTime(Runnable r, Object token, long uptimeMillis)\r\n    308    {\r\n    309        return sendMessageAtTime(getPostMessage(r, token), uptimeMillis);\r\n    310    }\r\n\r\n    private static Message getPostMessage(Runnable r, Object token) {\r\n    608        Message m = Message.obtain();\r\n    609        m.obj = token;\r\n\r\nAnd postDelay\r\n\r\n     public final boolean postDelayed(Runnable r, long delayMillis)\r\n    330    {\r\n    331        return sendMessageDelayed(getPostMessage(r), delayMillis);\r\n    332    }\r\n\r\nIf what you want is \r\n\r\n    public final boolean postDelayed (Runnable r, Object token, long delay)\r\n\r\nThen why not just use \r\n\r\n    public final boolean postAtTime (Runnable r, Object token, long uptimeMillis)\r\n\r\nsince its the same.\r\n\r\n**Update, forgot to add this:**\r\n\r\n    public final boolean sendMessageDelayed(Message msg, long delayMillis)\r\n    442    {\r\n    443        if (delayMillis &lt; 0) {\r\n    444            delayMillis = 0;\r\n    445        }\r\n    446        return sendMessageAtTime(msg, SystemClock.uptimeMillis() + delayMillis);\r\n    447    }","title":"Handler.postAtTime vs Handler.postDelayed","body":"<p>After looking at the source code, the token object eventually passes to the Message:</p>\n\n<pre><code>public final boolean postAtTime(Runnable r, Object token, long uptimeMillis)\n308    {\n309        return sendMessageAtTime(getPostMessage(r, token), uptimeMillis);\n310    }\n\nprivate static Message getPostMessage(Runnable r, Object token) {\n608        Message m = Message.obtain();\n609        m.obj = token;\n</code></pre>\n\n<p>And postDelay</p>\n\n<pre><code> public final boolean postDelayed(Runnable r, long delayMillis)\n330    {\n331        return sendMessageDelayed(getPostMessage(r), delayMillis);\n332    }\n</code></pre>\n\n<p>If what you want is </p>\n\n<pre><code>public final boolean postDelayed (Runnable r, Object token, long delay)\n</code></pre>\n\n<p>Then why not just use </p>\n\n<pre><code>public final boolean postAtTime (Runnable r, Object token, long uptimeMillis)\n</code></pre>\n\n<p>since its the same.</p>\n\n<p><strong>Update, forgot to add this:</strong></p>\n\n<pre><code>public final boolean sendMessageDelayed(Message msg, long delayMillis)\n442    {\n443        if (delayMillis &lt; 0) {\n444            delayMillis = 0;\n445        }\n446        return sendMessageAtTime(msg, SystemClock.uptimeMillis() + delayMillis);\n447    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1359995588,"creation_date":1359995588,"answer_id":14691095,"question_id":14690093,"body_markdown":"Looking at Handler source, it appears that there is :\r\n\r\n    private final Message getPostMessage(Runnable r, Object token) {\r\n        Message m = Message.obtain();\r\n        m.obj = token;\r\n        m.callback = r;\r\n        return m;\r\n    }\r\n\r\nWhich can be copied for what you want : Instead of calling `postDelayed`, wrap your runnable in such a message\r\n\r\n    sendMessageDelayed(getPostMessage(r, token), delayMillis);\r\n\r\nyou can then use `removeCallbacks()` with token as param","title":"Handler.postAtTime vs Handler.postDelayed","body":"<p>Looking at Handler source, it appears that there is :</p>\n\n<pre><code>private final Message getPostMessage(Runnable r, Object token) {\n    Message m = Message.obtain();\n    m.obj = token;\n    m.callback = r;\n    return m;\n}\n</code></pre>\n\n<p>Which can be copied for what you want : Instead of calling <code>postDelayed</code>, wrap your runnable in such a message</p>\n\n<pre><code>sendMessageDelayed(getPostMessage(r, token), delayMillis);\n</code></pre>\n\n<p>you can then use <code>removeCallbacks()</code> with token as param</p>\n"},{"tags":[],"owner":{"account_id":9606388,"reputation":5690,"user_id":7132300,"display_name":"algrid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595440720,"creation_date":1595440720,"answer_id":63040457,"question_id":14690093,"body_markdown":"This is an old question, but the `postDelayed` method version taking a token as an argument was added in API **28**: see https://developer.android.com/reference/android/os/Handler#postDelayed(java.lang.Runnable,%20java.lang.Object,%20long)\r\n\r\nFor older API versions one still has to use `postAtTime` if a token is required to remove the callback later.\r\n","title":"Handler.postAtTime vs Handler.postDelayed","body":"<p>This is an old question, but the <code>postDelayed</code> method version taking a token as an argument was added in API <strong>28</strong>: see <a href=\"https://developer.android.com/reference/android/os/Handler#postDelayed(java.lang.Runnable,%20java.lang.Object,%20long)\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/os/Handler#postDelayed(java.lang.Runnable,%20java.lang.Object,%20long)</a></p>\n<p>For older API versions one still has to use <code>postAtTime</code> if a token is required to remove the callback later.</p>\n"}],"owner":{"account_id":2035621,"reputation":29377,"user_id":1818045,"accept_rate":89,"display_name":"ben75"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6988,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":14690668,"answer_count":4,"score":6,"last_activity_date":1690364815,"creation_date":1359992287,"question_id":14690093,"body_markdown":"The android [Handler][1] class contains this method:\r\n\r\n    public final boolean postAtTime (Runnable r, Object token, long uptimeMillis)\r\n\r\nto post a Runnable at a given time. The `token` can be used later to remove the callback to `r` from the message queue thanks to this method:\r\n\r\n    public final void removeCallbacks (Runnable r, Object token)\r\n\r\nThe following method **doesn&#39;t exist** in the Handler class\r\n\r\n    public final boolean postDelayed (Runnable r, Object token, long delay)\r\n\r\nIs there a good reason for not providing such a method?\r\n\r\n\r\n  [1]: http://developer.android.com/reference/android/os/Handler.html","title":"Handler.postAtTime vs Handler.postDelayed","body":"<p>The android <a href=\"http://developer.android.com/reference/android/os/Handler.html\" rel=\"nofollow noreferrer\">Handler</a> class contains this method:</p>\n<pre><code>public final boolean postAtTime (Runnable r, Object token, long uptimeMillis)\n</code></pre>\n<p>to post a Runnable at a given time. The <code>token</code> can be used later to remove the callback to <code>r</code> from the message queue thanks to this method:</p>\n<pre><code>public final void removeCallbacks (Runnable r, Object token)\n</code></pre>\n<p>The following method <strong>doesn't exist</strong> in the Handler class</p>\n<pre><code>public final boolean postDelayed (Runnable r, Object token, long delay)\n</code></pre>\n<p>Is there a good reason for not providing such a method?</p>\n"},{"tags":["java","maven","pom.xml","jacoco","jacoco-maven-plugin"],"owner":{"account_id":5748671,"reputation":347,"user_id":4539129,"accept_rate":44,"display_name":"Mehul Parmar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690364696,"creation_date":1690362935,"question_id":76769668,"body_markdown":"Our Java application has one Integration Test module which only has integration tests which runs in a GCP vm. While running these tests in gcp vm, we use Jacoco(*in GCP vm in server mode*) to calculate Integrated Test code coverage for whole repo. Now we want to specify exlcusion inclusion Jacoco configuration like we do in Jacoco-maven-plugin for UTs. For Unit Tests we are already specifying configuration in each module under Jacoco-maven-plugin. For Integrated Tests, we want to specify the configuration of all modules in Integration Test module in a single xml. These configs are then read by GCP vm Jacoco Agent to get list of all included excluded classes and generate coverage. Basically these configs will not be used by java project itself but will be by pipeline.\r\n\r\nI was thinking of putting configuration in `properties` section of pom.xml of IT module, so that java code can read it but it seems properties are simple key value pair and cant accept xml nodes. What would be ideal way to store these configs?  This is how much config will look like - \r\n\r\n```\r\n&lt;it&gt;\r\n            &lt;servicemodule1&gt;\r\n                &lt;jacocoincludes&gt;\r\n                    &lt;include&gt;**/*.java&lt;/include&gt;\r\n                &lt;/jacocoincludes&gt;\r\n                &lt;jacocoexcludes&gt;\r\n                    &lt;exclude&gt;com/example/**&lt;/exclude&gt;\r\n                &lt;/jacocoexcludes&gt;\r\n            &lt;/servicemodule1&gt;\r\n            &lt;servicemodule2&gt;\r\n                &lt;jacocoincludes&gt;\r\n                    &lt;include&gt;**/*.java&lt;/include&gt;\r\n                &lt;/jacocoincludes&gt;\r\n                &lt;jacocoexcludes&gt;\r\n                    &lt;exclude&gt;com/example/**&lt;/exclude&gt;\r\n                &lt;/jacocoexcludes&gt;\r\n            &lt;/servicemodule2&gt;\r\n            &lt;servicemodule3&gt;\r\n                &lt;jacocoincludes&gt;\r\n                    &lt;include&gt;**/*.java&lt;/include&gt;\r\n                &lt;/jacocoincludes&gt;\r\n                &lt;jacocoexcludes&gt;\r\n                    &lt;exclude&gt;com/example/**&lt;/exclude&gt;\r\n                &lt;/jacocoexcludes&gt;\r\n            &lt;/servicemodule3&gt;\r\n        &lt;/it&gt;\r\n```\r\n\r\nLast option would be to simple create a xml in resources folder but wanted to check if it can be present in pom.xml and pom allows storing config which is not related to any maven plugin. ","title":"Ideal way to define configuration in pom.xml which is not related to any plugin","body":"<p>Our Java application has one Integration Test module which only has integration tests which runs in a GCP vm. While running these tests in gcp vm, we use Jacoco(<em>in GCP vm in server mode</em>) to calculate Integrated Test code coverage for whole repo. Now we want to specify exlcusion inclusion Jacoco configuration like we do in Jacoco-maven-plugin for UTs. For Unit Tests we are already specifying configuration in each module under Jacoco-maven-plugin. For Integrated Tests, we want to specify the configuration of all modules in Integration Test module in a single xml. These configs are then read by GCP vm Jacoco Agent to get list of all included excluded classes and generate coverage. Basically these configs will not be used by java project itself but will be by pipeline.</p>\n<p>I was thinking of putting configuration in <code>properties</code> section of pom.xml of IT module, so that java code can read it but it seems properties are simple key value pair and cant accept xml nodes. What would be ideal way to store these configs?  This is how much config will look like -</p>\n<pre><code>&lt;it&gt;\n            &lt;servicemodule1&gt;\n                &lt;jacocoincludes&gt;\n                    &lt;include&gt;**/*.java&lt;/include&gt;\n                &lt;/jacocoincludes&gt;\n                &lt;jacocoexcludes&gt;\n                    &lt;exclude&gt;com/example/**&lt;/exclude&gt;\n                &lt;/jacocoexcludes&gt;\n            &lt;/servicemodule1&gt;\n            &lt;servicemodule2&gt;\n                &lt;jacocoincludes&gt;\n                    &lt;include&gt;**/*.java&lt;/include&gt;\n                &lt;/jacocoincludes&gt;\n                &lt;jacocoexcludes&gt;\n                    &lt;exclude&gt;com/example/**&lt;/exclude&gt;\n                &lt;/jacocoexcludes&gt;\n            &lt;/servicemodule2&gt;\n            &lt;servicemodule3&gt;\n                &lt;jacocoincludes&gt;\n                    &lt;include&gt;**/*.java&lt;/include&gt;\n                &lt;/jacocoincludes&gt;\n                &lt;jacocoexcludes&gt;\n                    &lt;exclude&gt;com/example/**&lt;/exclude&gt;\n                &lt;/jacocoexcludes&gt;\n            &lt;/servicemodule3&gt;\n        &lt;/it&gt;\n</code></pre>\n<p>Last option would be to simple create a xml in resources folder but wanted to check if it can be present in pom.xml and pom allows storing config which is not related to any maven plugin.</p>\n"},{"tags":["java","spring-boot","spring-integration"],"comments":[{"owner":{"account_id":73540,"reputation":12590,"user_id":211701,"accept_rate":94,"display_name":"Andrei Ciobanu"},"score":0,"creation_date":1476362073,"post_id":40020999,"comment_id":67318915,"body_markdown":"You should start from the `FileSystemWatcher` class and then add `FileChangeListener`(s). Or you can use the `WatchService` introduced with Java 7: http://andreinc.net/2013/12/06/java-7-nio-2-tutorial-writing-a-simple-filefolder-monitor-using-the-watch-service-api/","body":"You should start from the <code>FileSystemWatcher</code> class and then add <code>FileChangeListener</code>(s). Or you can use the <code>WatchService</code> introduced with Java 7: <a href=\"http://andreinc.net/2013/12/06/java-7-nio-2-tutorial-writing-a-simple-filefolder-monitor-using-the-watch-service-api/\" rel=\"nofollow noreferrer\">andreinc.net/2013/12/06/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":5591714,"reputation":283,"user_id":4430717,"display_name":"Sławomir Czaja"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1476362068,"creation_date":1476362068,"answer_id":40021145,"question_id":40020999,"body_markdown":"You can use pure java for this no need for spring https://docs.oracle.com/javase/tutorial/essential/io/notification.html","title":"How to monitor folder/directory in spring?","body":"<p>You can use pure java for this no need for spring <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/notification.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/tutorial/essential/io/notification.html</a></p>\n"},{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1476363919,"creation_date":1476362880,"answer_id":40021464,"question_id":40020999,"body_markdown":"See the [Spring Integration Samples Repo](https://github.com/spring-projects/spring-integration-samples) there&#39;s a file sample under &#39;basic&#39;.\r\n\r\nThere&#39;s a more recent and more sophisticated sample under applications `file-split-ftp` - it uses Spring Boot and Java configuration Vs. the xml used in the older sample.","title":"How to monitor folder/directory in spring?","body":"<p>See the <a href=\"https://github.com/spring-projects/spring-integration-samples\" rel=\"nofollow\">Spring Integration Samples Repo</a> there's a file sample under 'basic'.</p>\n\n<p>There's a more recent and more sophisticated sample under applications <code>file-split-ftp</code> - it uses Spring Boot and Java configuration Vs. the xml used in the older sample.</p>\n"},{"tags":[],"owner":{"account_id":3261103,"reputation":930,"user_id":2746681,"accept_rate":60,"display_name":"s.ijpma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476364859,"creation_date":1476364859,"answer_id":40022215,"question_id":40020999,"body_markdown":"Without giving the details here a few pointers which might help you out.\r\n\r\nYou can take the directory `WatchService` code from Sławomir Czaja&#39;s answer:\r\n\r\n&gt; You can use pure java for this no need for spring https://docs.oracle.com/javase/tutorial/essential/io/notification.html\r\n\r\nand wrap that code into a runnable task. This task can notify your clients of directory change using the `SimpMessagingTemplate` as described here:\r\n[Websocket STOMP handle send][1]\r\n\r\nThen you can create a scheduler like described here: \r\n[Scheduling][2] which handles the start and reaccurance of your task.\r\n\r\nDon&#39;t forget to configure scheduling and websocket support in your mvc-config as well as STOMP support on the client side (further reading here: [STOMP over Websocket][3])\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/websocket.html#websocket-stomp-handle-send\r\n  [2]: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-scheduled\r\n  [3]: http://www.jmesnil.net/stomp-websocket/doc/","title":"How to monitor folder/directory in spring?","body":"<p>Without giving the details here a few pointers which might help you out.</p>\n\n<p>You can take the directory <code>WatchService</code> code from Sławomir Czaja's answer:</p>\n\n<blockquote>\n  <p>You can use pure java for this no need for spring <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/notification.html\" rel=\"nofollow\">https://docs.oracle.com/javase/tutorial/essential/io/notification.html</a></p>\n</blockquote>\n\n<p>and wrap that code into a runnable task. This task can notify your clients of directory change using the <code>SimpMessagingTemplate</code> as described here:\n<a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/websocket.html#websocket-stomp-handle-send\" rel=\"nofollow\">Websocket STOMP handle send</a></p>\n\n<p>Then you can create a scheduler like described here: \n<a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-scheduled\" rel=\"nofollow\">Scheduling</a> which handles the start and reaccurance of your task.</p>\n\n<p>Don't forget to configure scheduling and websocket support in your mvc-config as well as STOMP support on the client side (further reading here: <a href=\"http://www.jmesnil.net/stomp-websocket/doc/\" rel=\"nofollow\">STOMP over Websocket</a>)</p>\n"},{"tags":[],"owner":{"account_id":3329588,"reputation":622,"user_id":2798816,"display_name":"Sanket Mehta"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1566459931,"creation_date":1566459931,"answer_id":57604406,"question_id":40020999,"body_markdown":"Just in case, if somebody is looking for recursive sub-folder watcher, this link may help: https://stackoverflow.com/questions/18701242/how-to-watch-a-folder-and-subfolders-for-changes","title":"How to monitor folder/directory in spring?","body":"<p>Just in case, if somebody is looking for recursive sub-folder watcher, this link may help: <a href=\"https://stackoverflow.com/questions/18701242/how-to-watch-a-folder-and-subfolders-for-changes\">How to watch a folder and subfolders for changes</a></p>\n"},{"tags":[],"owner":{"account_id":323466,"reputation":14771,"user_id":643500,"display_name":"Sully"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1596903980,"creation_date":1582643676,"answer_id":60397791,"question_id":40020999,"body_markdown":"`spring-boot-devtools` has `FileSystemWatcher`\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**FileWatcherConfig**\r\n\r\n    @Configuration\r\n    public class FileWatcherConfig {\r\n    \t@Bean\r\n    \tpublic FileSystemWatcher fileSystemWatcher() {\r\n    \t\tFileSystemWatcher fileSystemWatcher = new FileSystemWatcher(true, Duration.ofMillis(5000L), Duration.ofMillis(3000L));\r\n    \t\tfileSystemWatcher.addSourceFolder(new File(&quot;/path/to/folder&quot;));\r\n    \t\tfileSystemWatcher.addListener(new MyFileChangeListener());\r\n    \t\tfileSystemWatcher.start();\r\n    \t\tSystem.out.println(&quot;started fileSystemWatcher&quot;);\r\n    \t\treturn fileSystemWatcher;\r\n    \t}\r\n\r\n    \t@PreDestroy\r\n        public void onDestroy() throws Exception {\r\n            fileSystemWatcher().stop();\r\n        }\r\n    }\r\n\r\n**MyFileChangeListener**\r\n\r\n    @Component\r\n    public class MyFileChangeListener implements FileChangeListener {\r\n    \r\n    \t@Override\r\n    \tpublic void onChange(Set&lt;ChangedFiles&gt; changeSet) {\r\n    \t\tfor(ChangedFiles cfiles : changeSet) {\r\n    \t\t\tfor(ChangedFile cfile: cfiles.getFiles()) {\r\n    \t\t\t\tif( /* (cfile.getType().equals(Type.MODIFY) \r\n                         || cfile.getType().equals(Type.ADD)  \r\n                         || cfile.getType().equals(Type.DELETE) ) &amp;&amp; */ !isLocked(cfile.getFile().toPath())) {\r\n    \t\t\t\t\tSystem.out.println(&quot;Operation: &quot; + cfile.getType() \r\n                          + &quot; On file: &quot;+ cfile.getFile().getName() + &quot; is done&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tprivate boolean isLocked(Path path) {\r\n    \t\ttry (FileChannel ch = FileChannel.open(path, StandardOpenOption.WRITE); FileLock lock = ch.tryLock()) {\r\n    \t\t\treturn lock == null;\r\n    \t\t} catch (IOException e) {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to monitor folder/directory in spring?","body":"<p><code>spring-boot-devtools</code> has <code>FileSystemWatcher</code></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>FileWatcherConfig</strong></p>\n<pre><code>@Configuration\npublic class FileWatcherConfig {\n    @Bean\n    public FileSystemWatcher fileSystemWatcher() {\n        FileSystemWatcher fileSystemWatcher = new FileSystemWatcher(true, Duration.ofMillis(5000L), Duration.ofMillis(3000L));\n        fileSystemWatcher.addSourceFolder(new File(&quot;/path/to/folder&quot;));\n        fileSystemWatcher.addListener(new MyFileChangeListener());\n        fileSystemWatcher.start();\n        System.out.println(&quot;started fileSystemWatcher&quot;);\n        return fileSystemWatcher;\n    }\n\n    @PreDestroy\n    public void onDestroy() throws Exception {\n        fileSystemWatcher().stop();\n    }\n}\n</code></pre>\n<p><strong>MyFileChangeListener</strong></p>\n<pre><code>@Component\npublic class MyFileChangeListener implements FileChangeListener {\n\n    @Override\n    public void onChange(Set&lt;ChangedFiles&gt; changeSet) {\n        for(ChangedFiles cfiles : changeSet) {\n            for(ChangedFile cfile: cfiles.getFiles()) {\n                if( /* (cfile.getType().equals(Type.MODIFY) \n                     || cfile.getType().equals(Type.ADD)  \n                     || cfile.getType().equals(Type.DELETE) ) &amp;&amp; */ !isLocked(cfile.getFile().toPath())) {\n                    System.out.println(&quot;Operation: &quot; + cfile.getType() \n                      + &quot; On file: &quot;+ cfile.getFile().getName() + &quot; is done&quot;);\n                }\n            }\n        }\n    }\n    \n    private boolean isLocked(Path path) {\n        try (FileChannel ch = FileChannel.open(path, StandardOpenOption.WRITE); FileLock lock = ch.tryLock()) {\n            return lock == null;\n        } catch (IOException e) {\n            return true;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1690364572,"creation_date":1596623233,"answer_id":63263205,"question_id":40020999,"body_markdown":"From Java 7 there is [WatchService](https://www.baeldung.com/java-nio2-watchservice) - it will be the best solution.\r\n\r\nSpring configuration could be like the following:\r\n\r\n    @Slf4j\r\n    @Configuration\r\n    public class MonitoringConfig {\r\n    \r\n        @Value(&quot;${monitoring-folder}&quot;)\r\n        private String folderPath;\r\n    \r\n        @Bean\r\n        public WatchService watchService() {\r\n            log.debug(&quot;MONITORING_FOLDER: {}&quot;, folderPath);\r\n            WatchService watchService = null;\r\n            try {\r\n                watchService = FileSystems.getDefault().newWatchService();\r\n                Path path = Paths.get(folderPath);\r\n    \r\n                if (!Files.isDirectory(path)) {\r\n                    throw new RuntimeException(&quot;incorrect monitoring folder: &quot; + path);\r\n                }\r\n    \r\n                path.register(\r\n                        watchService,\r\n                        StandardWatchEventKinds.ENTRY_DELETE,\r\n                        StandardWatchEventKinds.ENTRY_MODIFY,\r\n                        StandardWatchEventKinds.ENTRY_CREATE\r\n                );\r\n            } catch (IOException e) {\r\n                log.error(&quot;exception for watch service creation:&quot;, e);\r\n            }\r\n            return watchService;\r\n        }\r\n    }\r\n\r\nAnd Bean for launching monitoring itself:\r\n\r\n    @Slf4j\r\n    @Service\r\n    @AllArgsConstructor\r\n    public class MonitoringServiceImpl {\r\n    \r\n        private final WatchService watchService;\r\n    \r\n        @Async\r\n        @PostConstruct\r\n        public void launchMonitoring() {\r\n            log.info(&quot;START_MONITORING&quot;);\r\n            try {\r\n                WatchKey key;\r\n                while ((key = watchService.take()) != null) {\r\n                    for (WatchEvent&lt;?&gt; event : key.pollEvents()) {\r\n                        log.debug(&quot;Event kind: {}; File affected: {}&quot;, event.kind(), event.context());\r\n                    }\r\n                    key.reset();\r\n                }\r\n            } catch (InterruptedException e) {\r\n                log.warn(&quot;interrupted exception for monitoring service&quot;);\r\n            }\r\n        }\r\n    \r\n        @PreDestroy\r\n        public void stopMonitoring() {\r\n            log.info(&quot;STOP_MONITORING&quot;);\r\n    \r\n            if (watchService != null) {\r\n                try {\r\n                    watchService.close();\r\n                } catch (IOException e) {\r\n                    log.error(&quot;exception while closing the monitoring service&quot;);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nAlso, you have to set `@EnableAsync` for your application class (it configuration).\r\n\r\nand snipped from `application.yml`:\r\n\r\n&gt;monitoring-folder: C:\\Users\\user_name\r\n\r\nTested with Spring Boot `2.3.1`.\r\n\r\n---\r\n\r\nAlso used configuration for Async pool:\r\n\r\n    @Slf4j\r\n    @EnableAsync\r\n    @Configuration\r\n    @AllArgsConstructor\r\n    @EnableConfigurationProperties(AsyncProperties.class)\r\n    public class AsyncConfiguration implements AsyncConfigurer {\r\n    \r\n        private final AsyncProperties properties;\r\n    \r\n        @Override\r\n        @Bean(name = &quot;taskExecutor&quot;)\r\n        public Executor getAsyncExecutor() {\r\n            log.debug(&quot;Creating Async Task Executor&quot;);\r\n            ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\r\n            taskExecutor.setCorePoolSize(properties.getCorePoolSize());\r\n            taskExecutor.setMaxPoolSize(properties.getMaxPoolSize());\r\n            taskExecutor.setQueueCapacity(properties.getQueueCapacity());\r\n            taskExecutor.setThreadNamePrefix(properties.getThreadName());\r\n            taskExecutor.initialize();\r\n            return taskExecutor;\r\n        }\r\n    \r\n        @Bean\r\n        public TaskScheduler taskScheduler() {\r\n            return new ConcurrentTaskScheduler();\r\n        }\r\n    \r\n        @Override\r\n        public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {\r\n            return new CustomAsyncExceptionHandler();\r\n        }\r\n    }\r\n\r\nWhere the custom async exception handler is:\r\n\r\n    @Slf4j\r\n    public class CustomAsyncExceptionHandler implements AsyncUncaughtExceptionHandler {\r\n    \r\n        @Override\r\n        public void handleUncaughtException(Throwable throwable, Method method, Object... objects) {\r\n            log.error(&quot;Exception for Async execution: &quot;, throwable);\r\n            log.error(&quot;Method name - {}&quot;, method.getName());\r\n            for (Object param : objects) {\r\n                log.error(&quot;Parameter value - {}&quot;, param);\r\n            }\r\n        }\r\n    }\r\n\r\nConfiguration at properties file:\r\n\r\n```\r\nasync-monitoring:\r\n  core-pool-size: 10\r\n  max-pool-size: 20\r\n  queue-capacity: 1024\r\n  thread-name: &#39;async-ex-&#39;\r\n```\r\n\r\nWhere `AsyncProperties`:\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@ConfigurationProperties(&quot;async-monitoring&quot;)\r\npublic class AsyncProperties {\r\n    @NonNull\r\n    private Integer corePoolSize;\r\n    @NonNull\r\n    private Integer maxPoolSize;\r\n    @NonNull\r\n    private Integer queueCapacity;\r\n    @NonNull\r\n    private String threadName;\r\n}\r\n```\r\n\r\nFor using asynchronous execution I am processing an event like the following:\r\n\r\n``` \r\nvalidatorService.processRecord(recordANPR, zipFullPath);\r\n```\r\n\r\nWhere validator service has a look like:\r\n\r\n```\r\n@Async\r\npublic void processRecord(EvidentialRecordANPR record, String fullFileName) {\r\n```\r\n\r\nThe main idea is that you configure async configuration -&gt; call it from `MonitoringService` -&gt; put `@Async` annotation above method at another service which you called (it should be a method of another bean - initialisation goes through a proxy).\r\n","title":"How to monitor folder/directory in spring?","body":"<p>From Java 7 there is <a href=\"https://www.baeldung.com/java-nio2-watchservice\" rel=\"nofollow noreferrer\">WatchService</a> - it will be the best solution.</p>\n<p>Spring configuration could be like the following:</p>\n<pre><code>@Slf4j\n@Configuration\npublic class MonitoringConfig {\n\n    @Value(&quot;${monitoring-folder}&quot;)\n    private String folderPath;\n\n    @Bean\n    public WatchService watchService() {\n        log.debug(&quot;MONITORING_FOLDER: {}&quot;, folderPath);\n        WatchService watchService = null;\n        try {\n            watchService = FileSystems.getDefault().newWatchService();\n            Path path = Paths.get(folderPath);\n\n            if (!Files.isDirectory(path)) {\n                throw new RuntimeException(&quot;incorrect monitoring folder: &quot; + path);\n            }\n\n            path.register(\n                    watchService,\n                    StandardWatchEventKinds.ENTRY_DELETE,\n                    StandardWatchEventKinds.ENTRY_MODIFY,\n                    StandardWatchEventKinds.ENTRY_CREATE\n            );\n        } catch (IOException e) {\n            log.error(&quot;exception for watch service creation:&quot;, e);\n        }\n        return watchService;\n    }\n}\n</code></pre>\n<p>And Bean for launching monitoring itself:</p>\n<pre><code>@Slf4j\n@Service\n@AllArgsConstructor\npublic class MonitoringServiceImpl {\n\n    private final WatchService watchService;\n\n    @Async\n    @PostConstruct\n    public void launchMonitoring() {\n        log.info(&quot;START_MONITORING&quot;);\n        try {\n            WatchKey key;\n            while ((key = watchService.take()) != null) {\n                for (WatchEvent&lt;?&gt; event : key.pollEvents()) {\n                    log.debug(&quot;Event kind: {}; File affected: {}&quot;, event.kind(), event.context());\n                }\n                key.reset();\n            }\n        } catch (InterruptedException e) {\n            log.warn(&quot;interrupted exception for monitoring service&quot;);\n        }\n    }\n\n    @PreDestroy\n    public void stopMonitoring() {\n        log.info(&quot;STOP_MONITORING&quot;);\n\n        if (watchService != null) {\n            try {\n                watchService.close();\n            } catch (IOException e) {\n                log.error(&quot;exception while closing the monitoring service&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Also, you have to set <code>@EnableAsync</code> for your application class (it configuration).</p>\n<p>and snipped from <code>application.yml</code>:</p>\n<blockquote>\n<p>monitoring-folder: C:\\Users\\user_name</p>\n</blockquote>\n<p>Tested with Spring Boot <code>2.3.1</code>.</p>\n<hr />\n<p>Also used configuration for Async pool:</p>\n<pre><code>@Slf4j\n@EnableAsync\n@Configuration\n@AllArgsConstructor\n@EnableConfigurationProperties(AsyncProperties.class)\npublic class AsyncConfiguration implements AsyncConfigurer {\n\n    private final AsyncProperties properties;\n\n    @Override\n    @Bean(name = &quot;taskExecutor&quot;)\n    public Executor getAsyncExecutor() {\n        log.debug(&quot;Creating Async Task Executor&quot;);\n        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\n        taskExecutor.setCorePoolSize(properties.getCorePoolSize());\n        taskExecutor.setMaxPoolSize(properties.getMaxPoolSize());\n        taskExecutor.setQueueCapacity(properties.getQueueCapacity());\n        taskExecutor.setThreadNamePrefix(properties.getThreadName());\n        taskExecutor.initialize();\n        return taskExecutor;\n    }\n\n    @Bean\n    public TaskScheduler taskScheduler() {\n        return new ConcurrentTaskScheduler();\n    }\n\n    @Override\n    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {\n        return new CustomAsyncExceptionHandler();\n    }\n}\n</code></pre>\n<p>Where the custom async exception handler is:</p>\n<pre><code>@Slf4j\npublic class CustomAsyncExceptionHandler implements AsyncUncaughtExceptionHandler {\n\n    @Override\n    public void handleUncaughtException(Throwable throwable, Method method, Object... objects) {\n        log.error(&quot;Exception for Async execution: &quot;, throwable);\n        log.error(&quot;Method name - {}&quot;, method.getName());\n        for (Object param : objects) {\n            log.error(&quot;Parameter value - {}&quot;, param);\n        }\n    }\n}\n</code></pre>\n<p>Configuration at properties file:</p>\n<pre><code>async-monitoring:\n  core-pool-size: 10\n  max-pool-size: 20\n  queue-capacity: 1024\n  thread-name: 'async-ex-'\n</code></pre>\n<p>Where <code>AsyncProperties</code>:</p>\n<pre><code>@Getter\n@Setter\n@ConfigurationProperties(&quot;async-monitoring&quot;)\npublic class AsyncProperties {\n    @NonNull\n    private Integer corePoolSize;\n    @NonNull\n    private Integer maxPoolSize;\n    @NonNull\n    private Integer queueCapacity;\n    @NonNull\n    private String threadName;\n}\n</code></pre>\n<p>For using asynchronous execution I am processing an event like the following:</p>\n<pre><code>validatorService.processRecord(recordANPR, zipFullPath);\n</code></pre>\n<p>Where validator service has a look like:</p>\n<pre><code>@Async\npublic void processRecord(EvidentialRecordANPR record, String fullFileName) {\n</code></pre>\n<p>The main idea is that you configure async configuration -&gt; call it from <code>MonitoringService</code> -&gt; put <code>@Async</code> annotation above method at another service which you called (it should be a method of another bean - initialisation goes through a proxy).</p>\n"},{"tags":[],"owner":{"account_id":11730920,"reputation":701,"user_id":8586437,"display_name":"Rayon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627820779,"creation_date":1613047917,"answer_id":66155158,"question_id":40020999,"body_markdown":"found a workaround \r\nyou can annotate your task by `@Scheduled(fixedDelay = Long.MAX_VALUE)`\r\n\r\nyou could check code:\r\n\r\n\r\n    @Scheduled(fixedDelay = Long.MAX_VALUE)\r\n    public void watchTask() {\r\n                    this.loadOnStartup();\r\n                    try {\r\n                        WatchService watcher = FileSystems.getDefault().newWatchService();\r\n                        Path file = Paths.get(propertyFile);\r\n                        Path dir = Paths.get(file.getParent().toUri());\r\n                        dir.register(watcher, ENTRY_MODIFY);\r\n                        logger.info(&quot;Watch Service registered for dir: &quot; + dir.getFileName());\r\n        \r\n                        while (true) {\r\n                            WatchKey key;\r\n                            try {\r\n                                key = watcher.take();\r\n                            } catch (InterruptedException ex) {\r\n                                return;\r\n                            }\r\n        \r\n                            for (WatchEvent&lt;?&gt; event : key.pollEvents()) {\r\n                                WatchEvent.Kind&lt;?&gt; kind = event.kind();\r\n        \r\n                                @SuppressWarnings(&quot;unchecked&quot;)\r\n                                WatchEvent&lt;Path&gt; ev = (WatchEvent&lt;Path&gt;) event;\r\n                                Path fileName = ev.context();\r\n                                logger.debug(kind.name() + &quot;: &quot; + fileName);\r\n                                if (kind == ENTRY_MODIFY &amp;&amp;\r\n                                        fileName.toString().equals(file.getFileName().toString())) {\r\n        \t\t\t\t\t\t\t\t//publish event here\r\n                                }\r\n                            }\r\n                            boolean valid = key.reset();\r\n                            if (!valid) {\r\n                                break;\r\n                            }\r\n                        }\r\n                    } catch (Exception ex) {\r\n                        logger.error(ex.getMessage(), ex);\r\n                    }\r\n                }\r\n            }","title":"How to monitor folder/directory in spring?","body":"<p>found a workaround\nyou can annotate your task by <code>@Scheduled(fixedDelay = Long.MAX_VALUE)</code></p>\n<p>you could check code:</p>\n<pre><code>@Scheduled(fixedDelay = Long.MAX_VALUE)\npublic void watchTask() {\n                this.loadOnStartup();\n                try {\n                    WatchService watcher = FileSystems.getDefault().newWatchService();\n                    Path file = Paths.get(propertyFile);\n                    Path dir = Paths.get(file.getParent().toUri());\n                    dir.register(watcher, ENTRY_MODIFY);\n                    logger.info(&quot;Watch Service registered for dir: &quot; + dir.getFileName());\n    \n                    while (true) {\n                        WatchKey key;\n                        try {\n                            key = watcher.take();\n                        } catch (InterruptedException ex) {\n                            return;\n                        }\n    \n                        for (WatchEvent&lt;?&gt; event : key.pollEvents()) {\n                            WatchEvent.Kind&lt;?&gt; kind = event.kind();\n    \n                            @SuppressWarnings(&quot;unchecked&quot;)\n                            WatchEvent&lt;Path&gt; ev = (WatchEvent&lt;Path&gt;) event;\n                            Path fileName = ev.context();\n                            logger.debug(kind.name() + &quot;: &quot; + fileName);\n                            if (kind == ENTRY_MODIFY &amp;&amp;\n                                    fileName.toString().equals(file.getFileName().toString())) {\n                                    //publish event here\n                            }\n                        }\n                        boolean valid = key.reset();\n                        if (!valid) {\n                            break;\n                        }\n                    }\n                } catch (Exception ex) {\n                    logger.error(ex.getMessage(), ex);\n                }\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22235348,"reputation":1,"user_id":16470819,"display_name":"Ponangi Sriram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641155604,"creation_date":1641155604,"answer_id":70559559,"question_id":40020999,"body_markdown":"Apache commons-io is another good alternative to watch changes to files/directories.\r\n\r\nYou can see the overview of pros and cons of using it in this answer:\r\nhttps://stackoverflow.com/a/41013350/16470819\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n        &lt;version&gt;2.11.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n","title":"How to monitor folder/directory in spring?","body":"<p>Apache commons-io is another good alternative to watch changes to files/directories.</p>\n<p>You can see the overview of pros and cons of using it in this answer:\n<a href=\"https://stackoverflow.com/a/41013350/16470819\">https://stackoverflow.com/a/41013350/16470819</a></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;commons-io&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n    &lt;version&gt;2.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":4180023,"reputation":568,"user_id":3425331,"accept_rate":71,"display_name":"amkz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45281,"favorite_count":0,"down_vote_count":2,"up_vote_count":20,"answer_count":8,"score":18,"last_activity_date":1690364572,"creation_date":1476361709,"question_id":40020999,"body_markdown":"I wan&#39;t to write Spring Boot Application in spring which will be monitoring directory in windows, and when I change sub folder or add new one or delete existing one I wanna get information about that.\r\n\r\nHow can i do that?\r\nI have read this one:\r\nhttp://docs.spring.io/spring-integration/reference/html/files.html\r\nand each result under &#39;spring file watcher&#39; in google, \r\nbut I can&#39;t find solution...\r\n\r\nDo you have a good article or example with something like this?\r\nI wan&#39;t it to like like this:\r\n\r\n    @SpringBootApplication\r\n    @EnableIntegration\r\n    public class SpringApp{\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(SpringApp.class, args);\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic WatchService watcherService() {\r\n    \t\t...//define WatchService here\r\n    \t}\r\n    }\r\n\r\nRegards\r\n\r\n","title":"How to monitor folder/directory in spring?","body":"<p>I wan't to write Spring Boot Application in spring which will be monitoring directory in windows, and when I change sub folder or add new one or delete existing one I wanna get information about that.</p>\n\n<p>How can i do that?\nI have read this one:\n<a href=\"http://docs.spring.io/spring-integration/reference/html/files.html\" rel=\"noreferrer\">http://docs.spring.io/spring-integration/reference/html/files.html</a>\nand each result under 'spring file watcher' in google, \nbut I can't find solution...</p>\n\n<p>Do you have a good article or example with something like this?\nI wan't it to like like this:</p>\n\n<pre><code>@SpringBootApplication\n@EnableIntegration\npublic class SpringApp{\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringApp.class, args);\n    }\n\n    @Bean\n    public WatchService watcherService() {\n        ...//define WatchService here\n    }\n}\n</code></pre>\n\n<p>Regards</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":3595277,"reputation":44016,"user_id":3000206,"accept_rate":98,"display_name":"Carcigenicate"},"score":9,"creation_date":1565721670,"post_id":57483619,"comment_id":101438505,"body_markdown":"`add` *doesn&#39;t* modify the objects. The most likely explanation is you&#39;re modifying the object yourself after adding it to the list.","body":"<code>add</code> <i>doesn&#39;t</i> modify the objects. The most likely explanation is you&#39;re modifying the object yourself after adding it to the list."},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":2,"creation_date":1565721714,"post_id":57483619,"comment_id":101438522,"body_markdown":"How is the implementation of `SkEvent` look like?","body":"How is the implementation of <code>SkEvent</code> look like?"},{"owner":{"account_id":4922508,"reputation":1801,"user_id":3964723,"display_name":"austin wernli"},"score":6,"creation_date":1565721774,"post_id":57483619,"comment_id":101438542,"body_markdown":"you are modifying it in `if(existsEvent(clock)){` `add` isn&#39;t modifying it at all","body":"you are modifying it in <code>if(existsEvent(clock)){</code> <code>add</code> isn&#39;t modifying it at all"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1565722742,"post_id":57483619,"comment_id":101438980,"body_markdown":"It *obviously* happens because the 3 times in question enters the `if` block, as shown by the `Event exists.` output, **replacing** the `ret` value with a **single event** named `e`, as returned by the `getEvent(clock)` method. Look at the `getEvent` method to learn why. We certainly cannot tell you, since we can&#39;t see that code.","body":"It <i>obviously</i> happens because the 3 times in question enters the <code>if</code> block, as shown by the <code>Event exists.</code> output, <b>replacing</b> the <code>ret</code> value with a <b>single event</b> named <code>e</code>, as returned by the <code>getEvent(clock)</code> method. Look at the <code>getEvent</code> method to learn why. We certainly cannot tell you, since we can&#39;t see that code."},{"owner":{"account_id":16370659,"reputation":41,"user_id":11824003,"display_name":"Skwead"},"score":1,"creation_date":1565724105,"post_id":57483619,"comment_id":101439502,"body_markdown":"@Carcigenicate I double checked your hypotesis, no I do not change the value after adding it. As you can see in my code I output the `LocalTime` of `ret` right before adding it and right after adding it iterate over the `ArrayList` to see it&#39;s values&#39; `LocalTime`s. I mean the modification that happens when adding the object, not the one before it, because the object I try to add is what I want to add, as seen in the output. I&#39;m now adding the code for the `SkEvent` class and ``getEvent()` method, I didn&#39;t think it would be necessary due to what I just explained. Many thanks for the help.","body":"@Carcigenicate I double checked your hypotesis, no I do not change the value after adding it. As you can see in my code I output the <code>LocalTime</code> of <code>ret</code> right before adding it and right after adding it iterate over the <code>ArrayList</code> to see it&#39;s values&#39; <code>LocalTime</code>s. I mean the modification that happens when adding the object, not the one before it, because the object I try to add is what I want to add, as seen in the output. I&#39;m now adding the code for the <code>SkEvent</code> class and ``getEvent()` method, I didn&#39;t think it would be necessary due to what I just explained. Many thanks for the help."},{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":0,"creation_date":1565724497,"post_id":57483619,"comment_id":101439641,"body_markdown":"Did you try printing `ret` out _right_ before the add AND after the add?  I only see a print after, and a print way before.  Its doubtful the `add` is the problem.","body":"Did you try printing <code>ret</code> out <i>right</i> before the add AND after the add?  I only see a print after, and a print way before.  Its doubtful the <code>add</code> is the problem."},{"owner":{"account_id":16370659,"reputation":41,"user_id":11824003,"display_name":"Skwead"},"score":0,"creation_date":1565724691,"post_id":57483619,"comment_id":101439715,"body_markdown":"I just did it and the LocalTime is exactly the same as after the `add()`, so, what is expected to be in the `ArrayList`. Thanks for the sugestion","body":"I just did it and the LocalTime is exactly the same as after the <code>add()</code>, so, what is expected to be in the <code>ArrayList</code>. Thanks for the sugestion"},{"owner":{"account_id":3595277,"reputation":44016,"user_id":3000206,"accept_rate":98,"display_name":"Carcigenicate"},"score":1,"creation_date":1565726153,"post_id":57483619,"comment_id":101440268,"body_markdown":"@Skwead `add` doesn&#39;t alter the element: [source](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/java/util/ArrayList.java#l442). Mutation of objects after being put into the list and adding the same element repeatedly is the only explanation I can see here.","body":"@Skwead <code>add</code> doesn&#39;t alter the element: <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/java/util/ArrayList.java#l442\" rel=\"nofollow noreferrer\">source</a>. Mutation of objects after being put into the list and adding the same element repeatedly is the only explanation I can see here."},{"owner":{"account_id":16370659,"reputation":41,"user_id":11824003,"display_name":"Skwead"},"score":0,"creation_date":1565727654,"post_id":57483619,"comment_id":101440792,"body_markdown":"I know it doesn&#39;t, I read the docs, but logically it&#39;s what I see that is happening. Right before I add it I printed it, the value is the one I desired. Right after adding it I get it from the table, wich is different. There is no way I could change it before I printed it and after I added it, since there is no code between the `add()` and the iteration. It&#39;s logical to assum the problem is related to the ArrayList itself and the way it handles the `add()` method, since it is where the change occours.","body":"I know it doesn&#39;t, I read the docs, but logically it&#39;s what I see that is happening. Right before I add it I printed it, the value is the one I desired. Right after adding it I get it from the table, wich is different. There is no way I could change it before I printed it and after I added it, since there is no code between the <code>add()</code> and the iteration. It&#39;s logical to assum the problem is related to the ArrayList itself and the way it handles the <code>add()</code> method, since it is where the change occours."}],"answers":[{"tags":[],"owner":{"account_id":16507910,"reputation":86,"user_id":11927491,"display_name":"UniqueHorn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690364194,"creation_date":1565797688,"answer_id":57498071,"question_id":57483619,"body_markdown":"The three unexplained occurrences are:\r\n\r\n    clock: 22:00\r\n    Event exists.\r\n    Added event e at 22:00\r\n    clock: 22:30\r\n    Event exists.\r\n    Added event e at 22:30\r\n    clock: 23:00\r\n    Event exists.\r\n    Added event e at 23:00\r\n\r\nas you can see on your console: for those three events you entered the `if` statement (since there was printed &quot;Event exists.&quot;.). \r\n\r\n    if(existsEvent(clock)){\r\n      System.out.println(&quot;Event exists.&quot;);\r\n      ret = getEvent(clock);\r\n      ret.setLocalDateTime(clock);\r\n    }\r\n\r\nI can only guess what the used functions are doing, but i assume that `existsEvent(clock)` returns true if there exists an `SkEvent` with the same time and date specifiers as `clock` (actual date) (this is obviously true for the three stated cases above). `getEvent(clock)` then retrieves this `SkEvent` and overrides the `ret` variable with it. `ret` is then changed (`ret.setLocalDateTime(clock)`).\r\n\r\n`tableToday.add(ret)` does add a **reference** (pointing to the `SkEvent`) to the list. This means, changing the `SkEvent` object afterwards, will also change its *occurrence on the list*, since it is only a pointer pointing to the actual (now altered) object.\r\n\r\nWhat you do here is adding a reference referring to a new object to the list, then (3 times) retrieving it, changing it, and adding an additional reference to the **same** object to this list again.","title":"Why does ArrayList.add() modify the object added?","body":"<p>The three unexplained occurrences are:</p>\n<pre><code>clock: 22:00\nEvent exists.\nAdded event e at 22:00\nclock: 22:30\nEvent exists.\nAdded event e at 22:30\nclock: 23:00\nEvent exists.\nAdded event e at 23:00\n</code></pre>\n<p>as you can see on your console: for those three events you entered the <code>if</code> statement (since there was printed &quot;Event exists.&quot;.).</p>\n<pre><code>if(existsEvent(clock)){\n  System.out.println(&quot;Event exists.&quot;);\n  ret = getEvent(clock);\n  ret.setLocalDateTime(clock);\n}\n</code></pre>\n<p>I can only guess what the used functions are doing, but i assume that <code>existsEvent(clock)</code> returns true if there exists an <code>SkEvent</code> with the same time and date specifiers as <code>clock</code> (actual date) (this is obviously true for the three stated cases above). <code>getEvent(clock)</code> then retrieves this <code>SkEvent</code> and overrides the <code>ret</code> variable with it. <code>ret</code> is then changed (<code>ret.setLocalDateTime(clock)</code>).</p>\n<p><code>tableToday.add(ret)</code> does add a <strong>reference</strong> (pointing to the <code>SkEvent</code>) to the list. This means, changing the <code>SkEvent</code> object afterwards, will also change its <em>occurrence on the list</em>, since it is only a pointer pointing to the actual (now altered) object.</p>\n<p>What you do here is adding a reference referring to a new object to the list, then (3 times) retrieving it, changing it, and adding an additional reference to the <strong>same</strong> object to this list again.</p>\n"}],"owner":{"account_id":16370659,"reputation":41,"user_id":11824003,"display_name":"Skwead"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":218,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":57498071,"answer_count":1,"score":0,"last_activity_date":1690364194,"creation_date":1565721427,"question_id":57483619,"body_markdown":"When I add an object to an ArrayList it gets chenged.\r\n\r\nI am trying to make a java fx agenda app and so I need to pass an ArrayList with the objects I want in the table to an ObservableList.\r\n\r\nThe problem happens right in this function, at `tableToday.add(ret);`\r\n\r\n```java\r\npublic ArrayList&lt;SkEvent&gt; getTableToday() {\r\n        LocalDateTime clock = LocalDateTime.of(LocalDate.now(), LocalTime.of(0,0));\r\n        while (clock.until(LocalDateTime.of(LocalDate.now(), LocalTime.of(23,59)), ChronoUnit.MINUTES)&gt;0){\r\n            System.out.println(&quot;clock: &quot;+clock.toLocalTime().toString());\r\n\r\n            SkEvent ret = new SkEvent(LocalDate.now(), clock.toLocalTime());\r\n\r\n            if(existsEvent(clock)){\r\n                System.out.println(&quot;Event exists.&quot;);\r\n\r\n                ret = getEvent(clock);\r\n                ret.setLocalDateTime(clock);\r\n            }\r\n\r\n\r\n            tableToday.add(ret);\r\n            System.out.println(&quot;Added event &quot;+ ret.getName() + &quot; at &quot;+ret.getTime().toString());\r\n            LocalDateTime updatedClock = clock.plusMinutes(gap);\r\n            clock = updatedClock;\r\n\r\n        }\r\n```\r\n\r\nThis is a part of the output:\r\n```\r\nclock: 21:00\r\nAdded event  at 21:00\r\nclock: 21:30\r\nAdded event  at 21:30\r\nclock: 22:00\r\nEvent exists.\r\nAdded event e at 22:00\r\nclock: 22:30\r\nEvent exists.\r\nAdded event e at 22:30\r\nclock: 23:00\r\nEvent exists.\r\nAdded event e at 23:00\r\nclock: 23:30\r\nAdded event  at 23:30\r\nTimes in the table: \r\n21:00\r\n21:30\r\n23:00\r\n23:00\r\n23:00\r\n23:30\r\n```\r\nAs you can see I add 3 events at 22:00, 22:30 and 23:00, but outputing the event times on the ArrayList outputs 3 times the 23:00\r\n\r\nIt should output\r\n```\r\nTimes in the table: \r\n21:00\r\n21:30\r\n22:00\r\n22:30\r\n23:00\r\n23:30\r\n```\r\nAlso, here is the `SkEvent` class:\r\n```java\r\npublic class SkEvent{\r\n    private LocalDate date;\r\n    private LocalTime time;\r\n    private String name;\r\n    private String description;\r\n\r\n    public SkEvent(LocalDate date, int hour, int minute, String name, String description) {\r\n        this.date = date;\r\n        this.time = LocalTime.of(hour, minute);\r\n        this.name = name;\r\n        this.description = description;\r\n    }\r\n\r\n    public SkEvent(LocalDate date, LocalTime time){\r\n        this.date = date;\r\n        this.time = time;\r\n        this.name = &quot;&quot;;\r\n        this.description = &quot;&quot;;\r\n    }\r\n\r\n    public LocalDateTime getLocalDateTime(){\r\n        return LocalDateTime.of(getDate(), getTime());\r\n    }\r\n\r\n    public SkEvent setLocalDateTime(LocalDateTime localDateTime){\r\n        this.date = localDateTime.toLocalDate();\r\n        this.time = localDateTime.toLocalTime();\r\n\r\n        return this;\r\n    }\r\n\r\n    public LocalDate getDate() {\r\n        return date;\r\n    }\r\n\r\n    public void setDate(LocalDate date) {\r\n        this.date = date;\r\n    }\r\n\r\n    public LocalTime getTime() {\r\n        return time;\r\n    }\r\n\r\n    public void setTime(LocalTime time) {\r\n        this.time = time;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n}\r\n```\r\nand the `getEvent()` method:\r\n```java\r\nprivate Map&lt;SkEvent, LocalDateTime&gt; actualEvents = new HashMap();\r\n//(...)\r\n    private SkEvent getEvent(LocalDateTime clock) {\r\n        for(Map.Entry&lt;SkEvent, LocalDateTime&gt; entry: actualEvents.entrySet()){\r\n            if(!entry.getKey().getLocalDateTime().isAfter(clock) &amp;&amp; !entry.getValue().isBefore(clock)){\r\n                return entry.getKey();\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n```\r\nMany thanks for the time.","title":"Why does ArrayList.add() modify the object added?","body":"<p>When I add an object to an ArrayList it gets chenged.</p>\n\n<p>I am trying to make a java fx agenda app and so I need to pass an ArrayList with the objects I want in the table to an ObservableList.</p>\n\n<p>The problem happens right in this function, at <code>tableToday.add(ret);</code></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public ArrayList&lt;SkEvent&gt; getTableToday() {\n        LocalDateTime clock = LocalDateTime.of(LocalDate.now(), LocalTime.of(0,0));\n        while (clock.until(LocalDateTime.of(LocalDate.now(), LocalTime.of(23,59)), ChronoUnit.MINUTES)&gt;0){\n            System.out.println(\"clock: \"+clock.toLocalTime().toString());\n\n            SkEvent ret = new SkEvent(LocalDate.now(), clock.toLocalTime());\n\n            if(existsEvent(clock)){\n                System.out.println(\"Event exists.\");\n\n                ret = getEvent(clock);\n                ret.setLocalDateTime(clock);\n            }\n\n\n            tableToday.add(ret);\n            System.out.println(\"Added event \"+ ret.getName() + \" at \"+ret.getTime().toString());\n            LocalDateTime updatedClock = clock.plusMinutes(gap);\n            clock = updatedClock;\n\n        }\n</code></pre>\n\n<p>This is a part of the output:</p>\n\n<pre><code>clock: 21:00\nAdded event  at 21:00\nclock: 21:30\nAdded event  at 21:30\nclock: 22:00\nEvent exists.\nAdded event e at 22:00\nclock: 22:30\nEvent exists.\nAdded event e at 22:30\nclock: 23:00\nEvent exists.\nAdded event e at 23:00\nclock: 23:30\nAdded event  at 23:30\nTimes in the table: \n21:00\n21:30\n23:00\n23:00\n23:00\n23:30\n</code></pre>\n\n<p>As you can see I add 3 events at 22:00, 22:30 and 23:00, but outputing the event times on the ArrayList outputs 3 times the 23:00</p>\n\n<p>It should output</p>\n\n<pre><code>Times in the table: \n21:00\n21:30\n22:00\n22:30\n23:00\n23:30\n</code></pre>\n\n<p>Also, here is the <code>SkEvent</code> class:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class SkEvent{\n    private LocalDate date;\n    private LocalTime time;\n    private String name;\n    private String description;\n\n    public SkEvent(LocalDate date, int hour, int minute, String name, String description) {\n        this.date = date;\n        this.time = LocalTime.of(hour, minute);\n        this.name = name;\n        this.description = description;\n    }\n\n    public SkEvent(LocalDate date, LocalTime time){\n        this.date = date;\n        this.time = time;\n        this.name = \"\";\n        this.description = \"\";\n    }\n\n    public LocalDateTime getLocalDateTime(){\n        return LocalDateTime.of(getDate(), getTime());\n    }\n\n    public SkEvent setLocalDateTime(LocalDateTime localDateTime){\n        this.date = localDateTime.toLocalDate();\n        this.time = localDateTime.toLocalTime();\n\n        return this;\n    }\n\n    public LocalDate getDate() {\n        return date;\n    }\n\n    public void setDate(LocalDate date) {\n        this.date = date;\n    }\n\n    public LocalTime getTime() {\n        return time;\n    }\n\n    public void setTime(LocalTime time) {\n        this.time = time;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n}\n</code></pre>\n\n<p>and the <code>getEvent()</code> method:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private Map&lt;SkEvent, LocalDateTime&gt; actualEvents = new HashMap();\n//(...)\n    private SkEvent getEvent(LocalDateTime clock) {\n        for(Map.Entry&lt;SkEvent, LocalDateTime&gt; entry: actualEvents.entrySet()){\n            if(!entry.getKey().getLocalDateTime().isAfter(clock) &amp;&amp; !entry.getValue().isBefore(clock)){\n                return entry.getKey();\n            }\n        }\n        return null;\n    }\n</code></pre>\n\n<p>Many thanks for the time.</p>\n"},{"tags":["java","ssl","cryptography","jvm","jsse"],"comments":[{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":2,"creation_date":1259111735,"post_id":1793979,"comment_id":1681649,"body_markdown":"If you think your issue is different that this, please clarify: http://stackoverflow.com/questions/1788031/how-can-i-have-multiple-ssl-certificates-for-a-java-server/1788047#1788047","body":"If you think your issue is different that this, please clarify: <a href=\"http://stackoverflow.com/questions/1788031/how-can-i-have-multiple-ssl-certificates-for-a-java-server/1788047#1788047\" title=\"how can i have multiple ssl certificates for a java server\">stackoverflow.com/questions/1788031/&hellip;</a>"},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":0,"creation_date":1259112165,"post_id":1793979,"comment_id":1681674,"body_markdown":"I have added my working code which could be adapted to answer this to my question, referred to by sylvarking.","body":"I have added my working code which could be adapted to answer this to my question, referred to by sylvarking."},{"owner":{"account_id":39698,"reputation":860,"user_id":114601,"display_name":"Raz"},"score":0,"creation_date":1259193362,"post_id":1793979,"comment_id":1688770,"body_markdown":"thanks sylvarking and software monkey. I need to fail over to the Java&#39;s default key/trust store if the custom ones don&#39;t work. I am working on the code you provided, I need to adapt it so that it works with the default JVM key managers.","body":"thanks sylvarking and software monkey. I need to fail over to the Java&#39;s default key/trust store if the custom ones don&#39;t work. I am working on the code you provided, I need to adapt it so that it works with the default JVM key managers."},{"owner":{"account_id":11107193,"reputation":125,"user_id":8154045,"display_name":"KFJK"},"score":0,"creation_date":1551149804,"post_id":1793979,"comment_id":96525300,"body_markdown":"For android developers, you can reference my answer [here](https://stackoverflow.com/a/54877748/8154045).","body":"For android developers, you can reference my answer <a href=\"https://stackoverflow.com/a/54877748/8154045\">here</a>."}],"answers":[{"tags":[],"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1259123618,"creation_date":1259123618,"answer_id":1794647,"question_id":1793979,"body_markdown":"Check out my answer to this question,\r\n\r\nhttps://stackoverflow.com/questions/1788031/how-can-i-have-multiple-ssl-certificates-for-a-java-server\r\n\r\nIf you use the MyKeyManager, you can have multiple keystores or you can use a single keystore for multiple contexts.","title":"Registering multiple keystores in JVM","body":"<p>Check out my answer to this question,</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1788031/how-can-i-have-multiple-ssl-certificates-for-a-java-server\">How can I have multiple SSL certificates for a Java server</a></p>\n\n<p>If you use the MyKeyManager, you can have multiple keystores or you can use a single keystore for multiple contexts.</p>\n"},{"tags":[],"owner":{"account_id":39698,"reputation":860,"user_id":114601,"display_name":"Raz"},"down_vote_count":1,"up_vote_count":21,"is_accepted":true,"score":20,"last_activity_date":1259205614,"creation_date":1259205614,"answer_id":1801362,"question_id":1793979,"body_markdown":"After playing with the code I have received from ZZ Coder, sylvarking and Software Monkey, I have found a solution that works:\r\n\r\n\r\nFirst, I wrote a X509KeyManager that works combines a custom keystore and a default keystore.\r\n\r\n\r\n    class MultiKeyStoreManager implements X509KeyManager {\r\n     private static final Logger logger = Logger.getLogger(MultiKeyStoreManager.class); \r\n     private final X509KeyManager jvmKeyManager;\r\n     private final X509KeyManager customKeyManager;\r\n    \r\n     public MultiKeyStoreManager(X509KeyManager jvmKeyManager, X509KeyManager customKeyManager ) {\r\n      this.jvmKeyManager = jvmKeyManager;\r\n      this.customKeyManager = customKeyManager;  \r\n     }\r\n    \r\n     @Override\r\n     public String chooseClientAlias(String[] keyType, Principal[] issuers, Socket socket) {\r\n      // try the first key manager\r\n      String alias = customKeyManager.chooseClientAlias(keyType, issuers, socket);\r\n      if( alias == null ) {\r\n       alias = jvmKeyManager.chooseClientAlias(keyType, issuers, socket);\r\n       logger.warn(&quot;Reverting to JVM CLIENT alias : &quot; + alias);\r\n      }\r\n      \r\n      return alias;\r\n        \r\n     }\r\n    \r\n     @Override\r\n     public String chooseServerAlias(String keyType, Principal[] issuers, Socket socket) {\r\n      // try the first key manager\r\n      String alias = customKeyManager.chooseServerAlias(keyType, issuers, socket);\r\n      if( alias == null ) {\r\n       alias =  jvmKeyManager.chooseServerAlias(keyType, issuers, socket);\r\n       logger.warn(&quot;Reverting to JVM Server alias : &quot; + alias);\r\n      } \r\n      return alias;\r\n     }\r\n    \r\n     @Override\r\n     public X509Certificate[] getCertificateChain(String alias) {\r\n      X509Certificate[] chain = customKeyManager.getCertificateChain(alias);\r\n      if( chain == null || chain.length == 0) {\r\n       logger.warn(&quot;Reverting to JVM Chain : &quot; + alias);\r\n       return jvmKeyManager.getCertificateChain(alias);\r\n      } else {\r\n       return chain;\r\n      }  \r\n     }\r\n    \r\n     @Override\r\n     public String[] getClientAliases(String keyType, Principal[] issuers) {\r\n      String[] cAliases = customKeyManager.getClientAliases(keyType, issuers);\r\n      String[] jAliases = jvmKeyManager.getClientAliases(keyType, issuers);\r\n      logger.warn(&quot;Supported Client Aliases Custom: &quot; + cAliases.length + &quot; JVM : &quot; + jAliases.length);\r\n      return ArrayUtils.join(cAliases,jAliases);\r\n     }\r\n    \r\n     @Override\r\n     public PrivateKey getPrivateKey(String alias) {\r\n      PrivateKey key = customKeyManager.getPrivateKey(alias);\r\n      if( key == null ) {\r\n       logger.warn(&quot;Reverting to JVM Key : &quot; + alias);\r\n       return jvmKeyManager.getPrivateKey(alias);\r\n      } else {\r\n       return key;\r\n      }\r\n     }\r\n    \r\n     @Override\r\n     public String[] getServerAliases(String keyType, Principal[] issuers) {\r\n      String[] cAliases = customKeyManager.getServerAliases(keyType, issuers);\r\n      String[] jAliases = jvmKeyManager.getServerAliases(keyType, issuers);\r\n      logger.warn(&quot;Supported Server Aliases Custom: &quot; + cAliases.length + &quot; JVM : &quot; + jAliases.length);\r\n      return ArrayUtils.join(cAliases,jAliases);\r\n     }\r\n     \r\n    }\r\n\r\n\r\nThen, you can use this keystore manager when creating an SSL Context or SocketFactory. The code needs some refactoring and tidying up but it works perfectly.\r\n\r\n\r\n     /**\r\n      * Returns an array of KeyManagers, set up to use the required keyStore.\r\n      * This method does the bulk of the work of setting up the custom trust managers.\r\n      * \r\n      * @param props \r\n      * \r\n      * @return an array of KeyManagers set up accordingly.\r\n      */\r\n     private static KeyManager[] getKeyManagers(Properties props) throws IOException, GeneralSecurityException {\r\n      // First, get the default KeyManagerFactory.\r\n      String alg = KeyManagerFactory.getDefaultAlgorithm();\r\n      KeyManagerFactory kmFact = KeyManagerFactory.getInstance(alg);   \r\n      // Next, set up the KeyStore to use. We need to load the file into\r\n      // a KeyStore instance.\r\n      FileInputStream fis = new FileInputStream(props.getProperty(SSL_KEYSTORE));\r\n      logger.info(&quot;Loaded keystore&quot;);\r\n      KeyStore ks = KeyStore.getInstance(&quot;jks&quot;);\r\n      String keyStorePassword = props.getProperty(SSL_KEYSTORE_PASSWORD);\r\n      ks.load(fis, keyStorePassword.toCharArray());\r\n      fis.close();\r\n      // Now we initialise the KeyManagerFactory with this KeyStore\r\n      kmFact.init(ks, keyStorePassword.toCharArray());\r\n      \r\n      // default\r\n      KeyManagerFactory dkmFact = KeyManagerFactory.getInstance(alg); \r\n      dkmFact.init(null,null);  \r\n      \r\n      // Get the first X509KeyManager in the list\r\n      X509KeyManager customX509KeyManager = getX509KeyManager(alg, kmFact);\r\n      X509KeyManager jvmX509KeyManager = getX509KeyManager(alg, dkmFact);\r\n    \r\n      KeyManager[] km = { new MultiKeyStoreManager(jvmX509KeyManager, customX509KeyManager) };   \r\n      logger.debug(&quot;Number of key managers registered:&quot; + km.length);  \r\n      return km;\r\n     }\r\n    \r\n     \r\n     /**\r\n      * Find a X509 Key Manager compatible with a particular algorithm\r\n      * @param algorithm\r\n      * @param kmFact\r\n      * @return\r\n      * @throws NoSuchAlgorithmException\r\n      */\r\n     private static X509KeyManager getX509KeyManager(String algorithm, KeyManagerFactory kmFact)\r\n       throws NoSuchAlgorithmException {\r\n      KeyManager[] keyManagers = kmFact.getKeyManagers();\r\n    \r\n      if (keyManagers == null || keyManagers.length == 0) {\r\n       throw new NoSuchAlgorithmException(&quot;The default algorithm :&quot; + algorithm + &quot; produced no key managers&quot;);\r\n      }\r\n    \r\n      X509KeyManager x509KeyManager = null;\r\n    \r\n      for (int i = 0; i &lt; keyManagers.length; i++) {\r\n       if (keyManagers[i] instanceof X509KeyManager) {\r\n        x509KeyManager = (X509KeyManager) keyManagers[i];\r\n        break;\r\n       }\r\n      }\r\n    \r\n      if (x509KeyManager == null) {\r\n       throw new NoSuchAlgorithmException(&quot;The default algorithm :&quot;+ algorithm + &quot; did not produce a X509 Key manager&quot;);\r\n      }\r\n      return x509KeyManager;\r\n     }\r\n    \r\n    \r\n    \r\n    \r\n     private static void initialiseManager(Properties props) throws IOException, GeneralSecurityException { \r\n      // Next construct and initialise a SSLContext with the KeyStore and\r\n      // the TrustStore. We use the default SecureRandom.\r\n      SSLContext context = SSLContext.getInstance(&quot;SSL&quot;);\r\n      context.init(getKeyManagers(props), getTrustManagers(props), null);\r\n      SSLContext.setDefault(context);\r\n      \r\n     }\r\n\r\nLet me know if anyone has any question or need any demonstration codes.\r\n\r\n","title":"Registering multiple keystores in JVM","body":"<p>After playing with the code I have received from ZZ Coder, sylvarking and Software Monkey, I have found a solution that works:</p>\n\n<p>First, I wrote a X509KeyManager that works combines a custom keystore and a default keystore.</p>\n\n<pre><code>class MultiKeyStoreManager implements X509KeyManager {\n private static final Logger logger = Logger.getLogger(MultiKeyStoreManager.class); \n private final X509KeyManager jvmKeyManager;\n private final X509KeyManager customKeyManager;\n\n public MultiKeyStoreManager(X509KeyManager jvmKeyManager, X509KeyManager customKeyManager ) {\n  this.jvmKeyManager = jvmKeyManager;\n  this.customKeyManager = customKeyManager;  \n }\n\n @Override\n public String chooseClientAlias(String[] keyType, Principal[] issuers, Socket socket) {\n  // try the first key manager\n  String alias = customKeyManager.chooseClientAlias(keyType, issuers, socket);\n  if( alias == null ) {\n   alias = jvmKeyManager.chooseClientAlias(keyType, issuers, socket);\n   logger.warn(\"Reverting to JVM CLIENT alias : \" + alias);\n  }\n\n  return alias;\n\n }\n\n @Override\n public String chooseServerAlias(String keyType, Principal[] issuers, Socket socket) {\n  // try the first key manager\n  String alias = customKeyManager.chooseServerAlias(keyType, issuers, socket);\n  if( alias == null ) {\n   alias =  jvmKeyManager.chooseServerAlias(keyType, issuers, socket);\n   logger.warn(\"Reverting to JVM Server alias : \" + alias);\n  } \n  return alias;\n }\n\n @Override\n public X509Certificate[] getCertificateChain(String alias) {\n  X509Certificate[] chain = customKeyManager.getCertificateChain(alias);\n  if( chain == null || chain.length == 0) {\n   logger.warn(\"Reverting to JVM Chain : \" + alias);\n   return jvmKeyManager.getCertificateChain(alias);\n  } else {\n   return chain;\n  }  \n }\n\n @Override\n public String[] getClientAliases(String keyType, Principal[] issuers) {\n  String[] cAliases = customKeyManager.getClientAliases(keyType, issuers);\n  String[] jAliases = jvmKeyManager.getClientAliases(keyType, issuers);\n  logger.warn(\"Supported Client Aliases Custom: \" + cAliases.length + \" JVM : \" + jAliases.length);\n  return ArrayUtils.join(cAliases,jAliases);\n }\n\n @Override\n public PrivateKey getPrivateKey(String alias) {\n  PrivateKey key = customKeyManager.getPrivateKey(alias);\n  if( key == null ) {\n   logger.warn(\"Reverting to JVM Key : \" + alias);\n   return jvmKeyManager.getPrivateKey(alias);\n  } else {\n   return key;\n  }\n }\n\n @Override\n public String[] getServerAliases(String keyType, Principal[] issuers) {\n  String[] cAliases = customKeyManager.getServerAliases(keyType, issuers);\n  String[] jAliases = jvmKeyManager.getServerAliases(keyType, issuers);\n  logger.warn(\"Supported Server Aliases Custom: \" + cAliases.length + \" JVM : \" + jAliases.length);\n  return ArrayUtils.join(cAliases,jAliases);\n }\n\n}\n</code></pre>\n\n<p>Then, you can use this keystore manager when creating an SSL Context or SocketFactory. The code needs some refactoring and tidying up but it works perfectly.</p>\n\n<pre><code> /**\n  * Returns an array of KeyManagers, set up to use the required keyStore.\n  * This method does the bulk of the work of setting up the custom trust managers.\n  * \n  * @param props \n  * \n  * @return an array of KeyManagers set up accordingly.\n  */\n private static KeyManager[] getKeyManagers(Properties props) throws IOException, GeneralSecurityException {\n  // First, get the default KeyManagerFactory.\n  String alg = KeyManagerFactory.getDefaultAlgorithm();\n  KeyManagerFactory kmFact = KeyManagerFactory.getInstance(alg);   \n  // Next, set up the KeyStore to use. We need to load the file into\n  // a KeyStore instance.\n  FileInputStream fis = new FileInputStream(props.getProperty(SSL_KEYSTORE));\n  logger.info(\"Loaded keystore\");\n  KeyStore ks = KeyStore.getInstance(\"jks\");\n  String keyStorePassword = props.getProperty(SSL_KEYSTORE_PASSWORD);\n  ks.load(fis, keyStorePassword.toCharArray());\n  fis.close();\n  // Now we initialise the KeyManagerFactory with this KeyStore\n  kmFact.init(ks, keyStorePassword.toCharArray());\n\n  // default\n  KeyManagerFactory dkmFact = KeyManagerFactory.getInstance(alg); \n  dkmFact.init(null,null);  \n\n  // Get the first X509KeyManager in the list\n  X509KeyManager customX509KeyManager = getX509KeyManager(alg, kmFact);\n  X509KeyManager jvmX509KeyManager = getX509KeyManager(alg, dkmFact);\n\n  KeyManager[] km = { new MultiKeyStoreManager(jvmX509KeyManager, customX509KeyManager) };   \n  logger.debug(\"Number of key managers registered:\" + km.length);  \n  return km;\n }\n\n\n /**\n  * Find a X509 Key Manager compatible with a particular algorithm\n  * @param algorithm\n  * @param kmFact\n  * @return\n  * @throws NoSuchAlgorithmException\n  */\n private static X509KeyManager getX509KeyManager(String algorithm, KeyManagerFactory kmFact)\n   throws NoSuchAlgorithmException {\n  KeyManager[] keyManagers = kmFact.getKeyManagers();\n\n  if (keyManagers == null || keyManagers.length == 0) {\n   throw new NoSuchAlgorithmException(\"The default algorithm :\" + algorithm + \" produced no key managers\");\n  }\n\n  X509KeyManager x509KeyManager = null;\n\n  for (int i = 0; i &lt; keyManagers.length; i++) {\n   if (keyManagers[i] instanceof X509KeyManager) {\n    x509KeyManager = (X509KeyManager) keyManagers[i];\n    break;\n   }\n  }\n\n  if (x509KeyManager == null) {\n   throw new NoSuchAlgorithmException(\"The default algorithm :\"+ algorithm + \" did not produce a X509 Key manager\");\n  }\n  return x509KeyManager;\n }\n\n\n\n\n private static void initialiseManager(Properties props) throws IOException, GeneralSecurityException { \n  // Next construct and initialise a SSLContext with the KeyStore and\n  // the TrustStore. We use the default SecureRandom.\n  SSLContext context = SSLContext.getInstance(\"SSL\");\n  context.init(getKeyManagers(props), getTrustManagers(props), null);\n  SSLContext.setDefault(context);\n\n }\n</code></pre>\n\n<p>Let me know if anyone has any question or need any demonstration codes.</p>\n"},{"tags":[],"owner":{"account_id":135124,"reputation":5909,"user_id":337735,"accept_rate":50,"display_name":"Cody A. Ray"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1433405446,"creation_date":1366956997,"answer_id":16229909,"question_id":1793979,"body_markdown":"Raz&#39;s answer was a great start, but wasn&#39;t quite flexible enough to meet my needs. The MultiStoreKeyManager explicitly checks the custom KeyManager and then falls back to the jvm KeyManager if an operation fails. I actually want to check jvm certs first; the best solution should be able to handle either case. Additionally, the answer fails to provide a working TrustManager. \r\n\r\nI&#39;ve written a couple more flexible classes, CompositeX509KeyManager and CompositeX509TrustManager, which add support for any number of keystores in an arbitrary order.\r\n\r\n### CompositeX509KeyManager\r\n\r\n    package com.mycompany.ssl;\r\n \r\n    import java.net.Socket;\r\n    import java.security.Principal;\r\n    import java.security.PrivateKey;\r\n    import java.security.cert.X509Certificate;\r\n    import java.util.List;\r\n \r\n    import javax.annotation.Nullable;\r\n    import javax.net.ssl.X509KeyManager;\r\n \r\n    import com.google.common.collect.ImmutableList;\r\n    import com.google.common.collect.Iterables;\r\n \r\n    /**\r\n     * Represents an ordered list of {@link X509KeyManager}s with most-preferred managers first.\r\n     *\r\n     * This is necessary because of the fine-print on {@link SSLContext#init}:\r\n     *     Only the first instance of a particular key and/or trust manager implementation type in the\r\n     *     array is used. (For example, only the first javax.net.ssl.X509KeyManager in the array will be used.)\r\n     *\r\n     * @author codyaray\r\n     * @since 4/22/2013\r\n     * @see http://stackoverflow.com/questions/1793979/registering-multiple-keystores-in-jvm\r\n     */\r\n    public class CompositeX509KeyManager implements X509KeyManager {\r\n \r\n      private final List keyManagers;\r\n \r\n      /**\r\n       * Creates a new {@link CompositeX509KeyManager}.\r\n       *\r\n       * @param keyManagers the X509 key managers, ordered with the most-preferred managers first.\r\n       */\r\n      public CompositeX509KeyManager(List keyManagers) {\r\n        this.keyManagers = ImmutableList.copyOf(keyManagers);\r\n      }\r\n \r\n      /**\r\n       * Chooses the first non-null client alias returned from the delegate\r\n       * {@link X509TrustManagers}, or {@code null} if there are no matches.\r\n       */\r\n      @Override\r\n      public @Nullable String chooseClientAlias(String[] keyType, Principal[] issuers, Socket socket) {\r\n        for (X509KeyManager keyManager : keyManagers) {\r\n          String alias = keyManager.chooseClientAlias(keyType, issuers, socket);\r\n          if (alias != null) {\r\n            return alias;\r\n          }\r\n        }\r\n        return null;\r\n      }\r\n \r\n      /**\r\n       * Chooses the first non-null server alias returned from the delegate\r\n       * {@link X509TrustManagers}, or {@code null} if there are no matches.\r\n       */\r\n      @Override\r\n      public @Nullable String chooseServerAlias(String keyType, Principal[] issuers, Socket socket) {\r\n        for (X509KeyManager keyManager : keyManagers) {\r\n          String alias = keyManager.chooseServerAlias(keyType, issuers, socket);\r\n          if (alias != null) {\r\n            return alias;\r\n          }\r\n        }\r\n        return null;\r\n      }\r\n \r\n      /**\r\n       * Returns the first non-null private key associated with the\r\n       * given alias, or {@code null} if the alias can&#39;t be found.\r\n       */\r\n      @Override\r\n      public @Nullable PrivateKey getPrivateKey(String alias) {\r\n        for (X509KeyManager keyManager : keyManagers) {\r\n          PrivateKey privateKey = keyManager.getPrivateKey(alias);\r\n          if (privateKey != null) {\r\n            return privateKey;\r\n          }\r\n        }\r\n        return null;\r\n      }\r\n \r\n      /**\r\n       * Returns the first non-null certificate chain associated with the\r\n       * given alias, or {@code null} if the alias can&#39;t be found.\r\n       */\r\n      @Override\r\n      public @Nullable X509Certificate[] getCertificateChain(String alias) {\r\n        for (X509KeyManager keyManager : keyManagers) {\r\n          X509Certificate[] chain = keyManager.getCertificateChain(alias);\r\n          if (chain != null &amp;&amp; chain.length &gt; 0) {\r\n            return chain;\r\n          }\r\n        }\r\n        return null;\r\n      }\r\n \r\n      /**\r\n       * Get all matching aliases for authenticating the client side of a\r\n       * secure socket, or {@code null} if there are no matches.\r\n       */\r\n      @Override\r\n      public @Nullable String[] getClientAliases(String keyType, Principal[] issuers) {\r\n        ImmutableList.Builder aliases = ImmutableList.builder();\r\n        for (X509KeyManager keyManager : keyManagers) {\r\n          aliases.add(keyManager.getClientAliases(keyType, issuers));\r\n        }\r\n        return emptyToNull(Iterables.toArray(aliases.build(), String.class));\r\n      }\r\n \r\n      /**\r\n       * Get all matching aliases for authenticating the server side of a\r\n       * secure socket, or {@code null} if there are no matches.\r\n       */\r\n      @Override\r\n      public @Nullable String[] getServerAliases(String keyType, Principal[] issuers) {\r\n        ImmutableList.Builder aliases = ImmutableList.builder();\r\n        for (X509KeyManager keyManager : keyManagers) {\r\n          aliases.add(keyManager.getServerAliases(keyType, issuers));\r\n        }\r\n        return emptyToNull(Iterables.toArray(aliases.build(), String.class));\r\n      }\r\n \r\n      @Nullable\r\n      private static &lt;T&gt; T[] emptyToNull(T[] arr) {\r\n        return (arr.length == 0) ? null : arr;\r\n      }\r\n \r\n    }\r\n\r\n### CompositeX509TrustManager\r\n\r\n    package com.mycompany.ssl;\r\n \r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    import java.util.List;\r\n \r\n    import javax.net.ssl.X509TrustManager;\r\n \r\n    import com.google.common.collect.ImmutableList;\r\n    import com.google.common.collect.Iterables;\r\n \r\n    /**\r\n     * Represents an ordered list of {@link X509TrustManager}s with additive trust. If any one of the\r\n     * composed managers trusts a certificate chain, then it is trusted by the composite manager.\r\n     *\r\n     * This is necessary because of the fine-print on {@link SSLContext#init}:\r\n     *     Only the first instance of a particular key and/or trust manager implementation type in the\r\n     *     array is used. (For example, only the first javax.net.ssl.X509KeyManager in the array will be used.)\r\n     *\r\n     * @author codyaray\r\n     * @since 4/22/2013\r\n     * @see http://stackoverflow.com/questions/1793979/registering-multiple-keystores-in-jvm\r\n     */\r\n    public class CompositeX509TrustManager implements X509TrustManager {\r\n \r\n      private final List trustManagers;\r\n \r\n      public CompositeX509TrustManager(List trustManagers) {\r\n        this.trustManagers = ImmutableList.copyOf(trustManagers);\r\n      }\r\n \r\n      @Override\r\n      public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n        for (X509TrustManager trustManager : trustManagers) {\r\n          try {\r\n            trustManager.checkClientTrusted(chain, authType);\r\n            return; // someone trusts them. success!\r\n          } catch (CertificateException e) {\r\n            // maybe someone else will trust them\r\n          }\r\n        }\r\n        throw new CertificateException(&quot;None of the TrustManagers trust this certificate chain&quot;);\r\n      }\r\n \r\n      @Override\r\n      public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n        for (X509TrustManager trustManager : trustManagers) {\r\n          try {\r\n            trustManager.checkServerTrusted(chain, authType);\r\n            return; // someone trusts them. success!\r\n          } catch (CertificateException e) {\r\n            // maybe someone else will trust them\r\n          }\r\n        }\r\n        throw new CertificateException(&quot;None of the TrustManagers trust this certificate chain&quot;);\r\n      }\r\n \r\n      @Override\r\n      public X509Certificate[] getAcceptedIssuers() {\r\n        ImmutableList.Builder certificates = ImmutableList.builder();\r\n        for (X509TrustManager trustManager : trustManagers) {\r\n          certificates.add(trustManager.getAcceptedIssuers());\r\n        }\r\n        return Iterables.toArray(certificates.build(), X509Certificate.class);\r\n      }\r\n \r\n    }\r\n\r\n### Usage\r\n\r\nFor the standard case of one keystore + jvm keystore, you can wire it up like this. I’m using Guava again, but in a Guicey wrapper this time:\r\n\r\n    @Provides @Singleton\r\n    SSLContext provideSSLContext(KeyStore keystore, char[] password) {\r\n      String defaultAlgorithm = KeyManagerFactory.getDefaultAlgorithm();\r\n      X509KeyManager customKeyManager = getKeyManager(&quot;SunX509&quot;, keystore, password);\r\n      X509KeyManager jvmKeyManager = getKeyManager(defaultAlgorithm, null, null);\r\n      X509TrustManager customTrustManager = getTrustManager(&quot;SunX509&quot;, keystore);\r\n      X509TrustManager jvmTrustManager = getTrustManager(defaultAlgorithm, null);\r\n \r\n      KeyManager[] keyManagers = { new CompositeX509KeyManager(ImmutableList.of(jvmKeyManager, customKeyManager)) };\r\n      TrustManager[] trustManagers = { new CompositeX509TrustManager(ImmutableList.of(jvmTrustManager, customTrustManager)) };\r\n \r\n      SSLContext context = SSLContext.getInstance(&quot;SSL&quot;);\r\n      context.init(keyManagers, trustManagers, null);\r\n      return context;\r\n    }\r\n \r\n    private X509KeyManager getKeyManager(String algorithm, KeyStore keystore, char[] password) {\r\n      KeyManagerFactory factory = KeyManagerFactory.getInstance(algorithm);\r\n      factory.init(keystore, password);\r\n      return Iterables.getFirst(Iterables.filter(\r\n          Arrays.asList(factory.getKeyManagers()), X509KeyManager.class), null);\r\n    }\r\n \r\n    private X509TrustManager getTrustManager(String algorithm, KeyStore keystore) {\r\n      TrustManagerFactory factory = TrustManagerFactory.getInstance(algorithm);\r\n      factory.init(keystore);\r\n      return Iterables.getFirst(Iterables.filter(\r\n          Arrays.asList(factory.getTrustManagers()), X509TrustManager.class), null); \r\n    }\r\n\r\nI extracted this from [my blog post](http://codyaray.com/2013/04/java-ssl-with-multiple-keystores) about this problem which has a bit more detail, motivation, etc. All the code is there though, so its standalone. :)","title":"Registering multiple keystores in JVM","body":"<p>Raz's answer was a great start, but wasn't quite flexible enough to meet my needs. The MultiStoreKeyManager explicitly checks the custom KeyManager and then falls back to the jvm KeyManager if an operation fails. I actually want to check jvm certs first; the best solution should be able to handle either case. Additionally, the answer fails to provide a working TrustManager. </p>\n\n<p>I've written a couple more flexible classes, CompositeX509KeyManager and CompositeX509TrustManager, which add support for any number of keystores in an arbitrary order.</p>\n\n<h3>CompositeX509KeyManager</h3>\n\n<pre><code>package com.mycompany.ssl;\n\nimport java.net.Socket;\nimport java.security.Principal;\nimport java.security.PrivateKey;\nimport java.security.cert.X509Certificate;\nimport java.util.List;\n\nimport javax.annotation.Nullable;\nimport javax.net.ssl.X509KeyManager;\n\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.collect.Iterables;\n\n/**\n * Represents an ordered list of {@link X509KeyManager}s with most-preferred managers first.\n *\n * This is necessary because of the fine-print on {@link SSLContext#init}:\n *     Only the first instance of a particular key and/or trust manager implementation type in the\n *     array is used. (For example, only the first javax.net.ssl.X509KeyManager in the array will be used.)\n *\n * @author codyaray\n * @since 4/22/2013\n * @see http://stackoverflow.com/questions/1793979/registering-multiple-keystores-in-jvm\n */\npublic class CompositeX509KeyManager implements X509KeyManager {\n\n  private final List keyManagers;\n\n  /**\n   * Creates a new {@link CompositeX509KeyManager}.\n   *\n   * @param keyManagers the X509 key managers, ordered with the most-preferred managers first.\n   */\n  public CompositeX509KeyManager(List keyManagers) {\n    this.keyManagers = ImmutableList.copyOf(keyManagers);\n  }\n\n  /**\n   * Chooses the first non-null client alias returned from the delegate\n   * {@link X509TrustManagers}, or {@code null} if there are no matches.\n   */\n  @Override\n  public @Nullable String chooseClientAlias(String[] keyType, Principal[] issuers, Socket socket) {\n    for (X509KeyManager keyManager : keyManagers) {\n      String alias = keyManager.chooseClientAlias(keyType, issuers, socket);\n      if (alias != null) {\n        return alias;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Chooses the first non-null server alias returned from the delegate\n   * {@link X509TrustManagers}, or {@code null} if there are no matches.\n   */\n  @Override\n  public @Nullable String chooseServerAlias(String keyType, Principal[] issuers, Socket socket) {\n    for (X509KeyManager keyManager : keyManagers) {\n      String alias = keyManager.chooseServerAlias(keyType, issuers, socket);\n      if (alias != null) {\n        return alias;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns the first non-null private key associated with the\n   * given alias, or {@code null} if the alias can't be found.\n   */\n  @Override\n  public @Nullable PrivateKey getPrivateKey(String alias) {\n    for (X509KeyManager keyManager : keyManagers) {\n      PrivateKey privateKey = keyManager.getPrivateKey(alias);\n      if (privateKey != null) {\n        return privateKey;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns the first non-null certificate chain associated with the\n   * given alias, or {@code null} if the alias can't be found.\n   */\n  @Override\n  public @Nullable X509Certificate[] getCertificateChain(String alias) {\n    for (X509KeyManager keyManager : keyManagers) {\n      X509Certificate[] chain = keyManager.getCertificateChain(alias);\n      if (chain != null &amp;&amp; chain.length &gt; 0) {\n        return chain;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Get all matching aliases for authenticating the client side of a\n   * secure socket, or {@code null} if there are no matches.\n   */\n  @Override\n  public @Nullable String[] getClientAliases(String keyType, Principal[] issuers) {\n    ImmutableList.Builder aliases = ImmutableList.builder();\n    for (X509KeyManager keyManager : keyManagers) {\n      aliases.add(keyManager.getClientAliases(keyType, issuers));\n    }\n    return emptyToNull(Iterables.toArray(aliases.build(), String.class));\n  }\n\n  /**\n   * Get all matching aliases for authenticating the server side of a\n   * secure socket, or {@code null} if there are no matches.\n   */\n  @Override\n  public @Nullable String[] getServerAliases(String keyType, Principal[] issuers) {\n    ImmutableList.Builder aliases = ImmutableList.builder();\n    for (X509KeyManager keyManager : keyManagers) {\n      aliases.add(keyManager.getServerAliases(keyType, issuers));\n    }\n    return emptyToNull(Iterables.toArray(aliases.build(), String.class));\n  }\n\n  @Nullable\n  private static &lt;T&gt; T[] emptyToNull(T[] arr) {\n    return (arr.length == 0) ? null : arr;\n  }\n\n}\n</code></pre>\n\n<h3>CompositeX509TrustManager</h3>\n\n<pre><code>package com.mycompany.ssl;\n\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\nimport java.util.List;\n\nimport javax.net.ssl.X509TrustManager;\n\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.collect.Iterables;\n\n/**\n * Represents an ordered list of {@link X509TrustManager}s with additive trust. If any one of the\n * composed managers trusts a certificate chain, then it is trusted by the composite manager.\n *\n * This is necessary because of the fine-print on {@link SSLContext#init}:\n *     Only the first instance of a particular key and/or trust manager implementation type in the\n *     array is used. (For example, only the first javax.net.ssl.X509KeyManager in the array will be used.)\n *\n * @author codyaray\n * @since 4/22/2013\n * @see http://stackoverflow.com/questions/1793979/registering-multiple-keystores-in-jvm\n */\npublic class CompositeX509TrustManager implements X509TrustManager {\n\n  private final List trustManagers;\n\n  public CompositeX509TrustManager(List trustManagers) {\n    this.trustManagers = ImmutableList.copyOf(trustManagers);\n  }\n\n  @Override\n  public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n    for (X509TrustManager trustManager : trustManagers) {\n      try {\n        trustManager.checkClientTrusted(chain, authType);\n        return; // someone trusts them. success!\n      } catch (CertificateException e) {\n        // maybe someone else will trust them\n      }\n    }\n    throw new CertificateException(\"None of the TrustManagers trust this certificate chain\");\n  }\n\n  @Override\n  public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n    for (X509TrustManager trustManager : trustManagers) {\n      try {\n        trustManager.checkServerTrusted(chain, authType);\n        return; // someone trusts them. success!\n      } catch (CertificateException e) {\n        // maybe someone else will trust them\n      }\n    }\n    throw new CertificateException(\"None of the TrustManagers trust this certificate chain\");\n  }\n\n  @Override\n  public X509Certificate[] getAcceptedIssuers() {\n    ImmutableList.Builder certificates = ImmutableList.builder();\n    for (X509TrustManager trustManager : trustManagers) {\n      certificates.add(trustManager.getAcceptedIssuers());\n    }\n    return Iterables.toArray(certificates.build(), X509Certificate.class);\n  }\n\n}\n</code></pre>\n\n<h3>Usage</h3>\n\n<p>For the standard case of one keystore + jvm keystore, you can wire it up like this. I’m using Guava again, but in a Guicey wrapper this time:</p>\n\n<pre><code>@Provides @Singleton\nSSLContext provideSSLContext(KeyStore keystore, char[] password) {\n  String defaultAlgorithm = KeyManagerFactory.getDefaultAlgorithm();\n  X509KeyManager customKeyManager = getKeyManager(\"SunX509\", keystore, password);\n  X509KeyManager jvmKeyManager = getKeyManager(defaultAlgorithm, null, null);\n  X509TrustManager customTrustManager = getTrustManager(\"SunX509\", keystore);\n  X509TrustManager jvmTrustManager = getTrustManager(defaultAlgorithm, null);\n\n  KeyManager[] keyManagers = { new CompositeX509KeyManager(ImmutableList.of(jvmKeyManager, customKeyManager)) };\n  TrustManager[] trustManagers = { new CompositeX509TrustManager(ImmutableList.of(jvmTrustManager, customTrustManager)) };\n\n  SSLContext context = SSLContext.getInstance(\"SSL\");\n  context.init(keyManagers, trustManagers, null);\n  return context;\n}\n\nprivate X509KeyManager getKeyManager(String algorithm, KeyStore keystore, char[] password) {\n  KeyManagerFactory factory = KeyManagerFactory.getInstance(algorithm);\n  factory.init(keystore, password);\n  return Iterables.getFirst(Iterables.filter(\n      Arrays.asList(factory.getKeyManagers()), X509KeyManager.class), null);\n}\n\nprivate X509TrustManager getTrustManager(String algorithm, KeyStore keystore) {\n  TrustManagerFactory factory = TrustManagerFactory.getInstance(algorithm);\n  factory.init(keystore);\n  return Iterables.getFirst(Iterables.filter(\n      Arrays.asList(factory.getTrustManagers()), X509TrustManager.class), null); \n}\n</code></pre>\n\n<p>I extracted this from <a href=\"http://codyaray.com/2013/04/java-ssl-with-multiple-keystores\" rel=\"noreferrer\">my blog post</a> about this problem which has a bit more detail, motivation, etc. All the code is there though, so its standalone. :)</p>\n"},{"tags":[],"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690364152,"creation_date":1593813021,"answer_id":62723075,"question_id":1793979,"body_markdown":"Maybe I am 10 years too late to answer this question, but it could be maybe helpful for other developers too. I also ran into the same challenge of loading multiple keystores as keymaterial/trustmaterial. I discovered this page and the answer which Cody A. Ray has provided. After using the same snippet for multiple projects, I thought it would be handy to create a library and also make it publicly available to contribute back to the community. Please have a look here: [Github - SSLContext-Kickstart](https://github.com/Hakky54/sslcontext-kickstart) The code snippet of Cody A. Ray for the CompositeKeyManager and CompositeTrustManager are both included.\r\n\r\nUsage:\r\n```java\r\nimport nl.altindag.ssl.SSLFactory;\r\n\r\nimport javax.net.ssl.SSLContext;\r\n\r\npublic class App {\r\n\r\n    public static void main(String[] args) {\r\n        Path keyStorePathOne = ...;\r\n        Path keyStorePathTwo = ...;\r\n        Path trustStorePathOne = ...;\r\n        Path trustStorePathTwo = ...;\r\n        char[] password = &quot;password&quot;.toCharArray();\r\n\r\n        SSLFactory sslFactory = SSLFactory.builder()\r\n                .withDefaultTrustMaterial() // JDK trusted CA&#39;s\r\n                .withSystemTrustMaterial()  // OS trusted CA&#39;s\r\n                .withIdentityMaterial(keyStorePathOne, password)\r\n                .withIdentityMaterial(keyStorePathTwo, password)\r\n                .withTrustMaterial(trustStorePathOne, password)\r\n                .withTrustMaterial(trustStorePathTwo, password)\r\n                .build();\r\n\r\n        SSLContext sslContext = sslFactory.getSslContext();\r\n        List&lt;X509Certificate&gt; trustedCertificates = sslFactory.getTrustedCertificates();\r\n    }\r\n\r\n}\r\n```\r\n\r\nI wasn&#39;t quite sure if I should post this here, because it could also be seen as a way to promote &quot;my library&quot; but I thought it could be helpful for developers.\r\n\r\nYou can add the dependency with the following snippet:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\r\n    &lt;version&gt;8.1.4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Registering multiple keystores in JVM","body":"<p>Maybe I am 10 years too late to answer this question, but it could be maybe helpful for other developers too. I also ran into the same challenge of loading multiple keystores as keymaterial/trustmaterial. I discovered this page and the answer which Cody A. Ray has provided. After using the same snippet for multiple projects, I thought it would be handy to create a library and also make it publicly available to contribute back to the community. Please have a look here: <a href=\"https://github.com/Hakky54/sslcontext-kickstart\" rel=\"nofollow noreferrer\">Github - SSLContext-Kickstart</a> The code snippet of Cody A. Ray for the CompositeKeyManager and CompositeTrustManager are both included.</p>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import nl.altindag.ssl.SSLFactory;\n\nimport javax.net.ssl.SSLContext;\n\npublic class App {\n\n    public static void main(String[] args) {\n        Path keyStorePathOne = ...;\n        Path keyStorePathTwo = ...;\n        Path trustStorePathOne = ...;\n        Path trustStorePathTwo = ...;\n        char[] password = &quot;password&quot;.toCharArray();\n\n        SSLFactory sslFactory = SSLFactory.builder()\n                .withDefaultTrustMaterial() // JDK trusted CA's\n                .withSystemTrustMaterial()  // OS trusted CA's\n                .withIdentityMaterial(keyStorePathOne, password)\n                .withIdentityMaterial(keyStorePathTwo, password)\n                .withTrustMaterial(trustStorePathOne, password)\n                .withTrustMaterial(trustStorePathTwo, password)\n                .build();\n\n        SSLContext sslContext = sslFactory.getSslContext();\n        List&lt;X509Certificate&gt; trustedCertificates = sslFactory.getTrustedCertificates();\n    }\n\n}\n</code></pre>\n<p>I wasn't quite sure if I should post this here, because it could also be seen as a way to promote &quot;my library&quot; but I thought it could be helpful for developers.</p>\n<p>You can add the dependency with the following snippet:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\n    &lt;version&gt;8.1.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":39698,"reputation":860,"user_id":114601,"display_name":"Raz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84198,"favorite_count":0,"down_vote_count":0,"up_vote_count":57,"closed_date":1656520985,"accepted_answer_id":1801362,"answer_count":4,"score":57,"last_activity_date":1690364152,"creation_date":1259109960,"question_id":1793979,"body_markdown":"I have two applications running in the same java virtual machine, and both use different keystores and truststores.\r\n\r\nA viable option would be use a single keystore and import all the other ones into the shared keystore (e.g. keytool -import), but it would really help my requirements if I could use separate keystores for separate applications running in the same jvm.\r\n\r\nI could set the keystore and truststores to be used as jvm parameters or system properties as follows:\r\n\r\n    java -Djavax.net.ssl.keyStore=serverKeys \r\n    -Djavax.net.ssl.keyStorePassword=password \r\n    -Djavax.net.ssl.trustStore=serverTrust \r\n    -Djavax.net.ssl.trustStorePassword=password SSLApplication\r\n\r\nor\r\n\r\n    System.setProperty(&quot;javax.net.ssl.keyStore&quot;,&quot;serverKeys&quot;)\r\n\r\n\r\nBut the problem with this approach is that it specifies the keystore/truststore to be used at a JVM level, thus all applications running in the same JVM gets the same keystore/truststore.\r\n\r\nI have also tried creating a custom SSLContext and setting it as the default, but it also sets the context for all applications running in the same JVM.\r\n\r\n    SSLContext context = SSLContext.getInstance(&quot;SSL&quot;);\r\n    context.init(kms, tms, null);\r\n    SSLContext.setDefault(context);\r\n\r\nI want to be able use different keystores/truststores without modifying individual application codes. \r\n\r\n**A solution that can *dynamically register multiple key stores* in addition to the default keystore/certs in jre into jvm would be great.**\r\n\r\n    \r\n The solution will work in this way: \r\n    \r\n - When JVM boots, it loads all the default certs/keystores \r\n    from jre/certs folder (default java behaviour when no keystores specified).\r\n - When App 1 loads it registers its keystores, \r\n - then when App 2 loads it registers its keystores...\r\n\r\n\r\nPlease let me know your ideas or solutions.\r\nThanks in advance!","title":"Registering multiple keystores in JVM","body":"<p>I have two applications running in the same java virtual machine, and both use different keystores and truststores.</p>\n\n<p>A viable option would be use a single keystore and import all the other ones into the shared keystore (e.g. keytool -import), but it would really help my requirements if I could use separate keystores for separate applications running in the same jvm.</p>\n\n<p>I could set the keystore and truststores to be used as jvm parameters or system properties as follows:</p>\n\n<pre><code>java -Djavax.net.ssl.keyStore=serverKeys \n-Djavax.net.ssl.keyStorePassword=password \n-Djavax.net.ssl.trustStore=serverTrust \n-Djavax.net.ssl.trustStorePassword=password SSLApplication\n</code></pre>\n\n<p>or</p>\n\n<pre><code>System.setProperty(\"javax.net.ssl.keyStore\",\"serverKeys\")\n</code></pre>\n\n<p>But the problem with this approach is that it specifies the keystore/truststore to be used at a JVM level, thus all applications running in the same JVM gets the same keystore/truststore.</p>\n\n<p>I have also tried creating a custom SSLContext and setting it as the default, but it also sets the context for all applications running in the same JVM.</p>\n\n<pre><code>SSLContext context = SSLContext.getInstance(\"SSL\");\ncontext.init(kms, tms, null);\nSSLContext.setDefault(context);\n</code></pre>\n\n<p>I want to be able use different keystores/truststores without modifying individual application codes. </p>\n\n<p><strong>A solution that can <em>dynamically register multiple key stores</em> in addition to the default keystore/certs in jre into jvm would be great.</strong></p>\n\n<p>The solution will work in this way: </p>\n\n<ul>\n<li>When JVM boots, it loads all the default certs/keystores \nfrom jre/certs folder (default java behaviour when no keystores specified).</li>\n<li>When App 1 loads it registers its keystores, </li>\n<li>then when App 2 loads it registers its keystores...</li>\n</ul>\n\n<p>Please let me know your ideas or solutions.\nThanks in advance!</p>\n"},{"tags":["java","swing","calculator","actionlistener","actionevent"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1690148362,"post_id":76750352,"comment_id":135309272,"body_markdown":"Can you provide a pseudo-code rendering of how the process works?  How is the data stored as the user enters the values, i.e., the _operation_ array, and the _result_ array.","body":"Can you provide a pseudo-code rendering of how the process works?  How is the data stored as the user enters the values, i.e., the <i>operation</i> array, and the <i>result</i> array."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1690148723,"post_id":76750352,"comment_id":135309295,"body_markdown":"To me, this sounds like you need to remove the UI from the equation and debug your algorithm","body":"To me, this sounds like you need to remove the UI from the equation and debug your algorithm"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1690148981,"post_id":76750352,"comment_id":135309315,"body_markdown":"It would help if you could edit your question to show a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"It would help if you could edit your question to show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1690152909,"post_id":76750352,"comment_id":135309599,"body_markdown":"I don&#39;t understand why you re-create the `result` array on each operation (`result=new float[10];`), this seems like a bad idea.  Personally, I&#39;d use a `StringBuilder` and `append` each value/operand and then, when required, convert that to a `char` array (or simply pop each char off the `StringBuilder`, which ever makes sense for you)","body":"I don&#39;t understand why you re-create the <code>result</code> array on each operation (<code>result=new float[10];</code>), this seems like a bad idea.  Personally, I&#39;d use a <code>StringBuilder</code> and <code>append</code> each value/operand and then, when required, convert that to a <code>char</code> array (or simply pop each char off the <code>StringBuilder</code>, which ever makes sense for you)"},{"owner":{"account_id":29054788,"reputation":29,"user_id":22256782,"display_name":"Amalshanth"},"score":0,"creation_date":1690199793,"post_id":76750352,"comment_id":135315591,"body_markdown":"@MadProgrammer can you give an algoritham to fix it!?","body":"@MadProgrammer can you give an algoritham to fix it!?"},{"owner":{"account_id":29054788,"reputation":29,"user_id":22256782,"display_name":"Amalshanth"},"score":0,"creation_date":1690200671,"post_id":76750352,"comment_id":135315783,"body_markdown":"I get the idea of String builder class. But how do make it possible on this situation","body":"I get the idea of String builder class. But how do make it possible on this situation"}],"owner":{"account_id":29054788,"reputation":29,"user_id":22256782,"display_name":"Amalshanth"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690363551,"creation_date":1690146845,"question_id":76750352,"body_markdown":"I created a calculator using **Java swing**.Frame creation and button arrangements were all set.I used **ActionListener interface**.And the program were execute successfully,when i performed a single operation along with two operands(eg:5+2). Working is success so far.But when I try to do multiple operations at same time with more than two operands(eg:10+2-5),it gives me 0.0 as output everytime.But I need my calculator to perform multiple operations at the same time .And should also follow the BODMAS rule.\r\n\r\nI declared a **float array** named result and a **char array** named operation,as global variables.\r\n\r\n    public Calculator implements ActionListener{\r\n    float[] result=new float[10];\r\n    char[] operation=new char[10];\r\n    int i=0;\r\n    isOperationClicked=false;\r\n\r\nHere is one example of operation button(like +,-,/,*) ,defined inside the **actionPerformed** function along with else if ladder.\r\n\r\n    else if(e.getSource()==plusbutton) {\r\n    \t\t\tisOperationClicked=true;\r\n    \t\t\tString oldValue=displaylabel.getText();\r\n    \t\t\tresult=new float[10];\r\n    \t\t\tresult[i]=Float.parseFloat(oldValue);\r\n    \t\t\toperation=new char[10];\r\n    \t\t\toperation[i]= &#39;+&#39;;\r\n    \t\t\ti++;\r\n    \t\t\t}\r\nAlso **equaltobotton** is defined inside the **actionPerformed**  function.Checking each operation symbols with ‘if’ on a ‘while loop’.Here i put one example.\r\n\r\n    else if(e.getSource()==equaltobutton) {\r\n    \t\t\tint m=0;\r\n    \t\t\tString finalvalue=displaylabel.getText();\r\n    \t\t\tfloat finalvalueF=Float.parseFloat(finalvalue);\r\n    \t\t    result[i]=finalvalueF;\r\n    \t\t\twhile(m&lt;i) {\r\n    \t\t\t\tif(operation[m]==&#39;/&#39;) {\r\n    \t\t\t\t\tfloat res=result[m]/result[m+1];\r\n    \t\t\t\t\tresult=removeArrayF(result,m);\r\n    \t\t\t\t\tresult[m]=res;\r\n    \t\t\t\t\toperation=removeArrayC(operation,m);\r\n    \t\t\t\t\ti--;m--;\r\n    \t\t\t\t}\r\n    \t\t\t\tm++;\r\n    \t\t\t}\r\nFor display the result\r\n\r\n    displaylabel.setText(result[0]+&quot;&quot;);\r\nThis **setText** function is also include on the last line of **equaltobutton**&#39;s action\r\n\r\nThe **removearrayF** and the **removearrayC** are two methods defined to remove one element from the array.\r\nThis is what i do .what are the changes i need to do for the proper output for multiple operations at same time?","title":"Multiple operations at same time gives 0.0 as output.Calculator using swing","body":"<p>I created a calculator using <strong>Java swing</strong>.Frame creation and button arrangements were all set.I used <strong>ActionListener interface</strong>.And the program were execute successfully,when i performed a single operation along with two operands(eg:5+2). Working is success so far.But when I try to do multiple operations at same time with more than two operands(eg:10+2-5),it gives me 0.0 as output everytime.But I need my calculator to perform multiple operations at the same time .And should also follow the BODMAS rule.</p>\n<p>I declared a <strong>float array</strong> named result and a <strong>char array</strong> named operation,as global variables.</p>\n<pre><code>public Calculator implements ActionListener{\nfloat[] result=new float[10];\nchar[] operation=new char[10];\nint i=0;\nisOperationClicked=false;\n</code></pre>\n<p>Here is one example of operation button(like +,-,/,*) ,defined inside the <strong>actionPerformed</strong> function along with else if ladder.</p>\n<pre><code>else if(e.getSource()==plusbutton) {\n            isOperationClicked=true;\n            String oldValue=displaylabel.getText();\n            result=new float[10];\n            result[i]=Float.parseFloat(oldValue);\n            operation=new char[10];\n            operation[i]= '+';\n            i++;\n            }\n</code></pre>\n<p>Also <strong>equaltobotton</strong> is defined inside the <strong>actionPerformed</strong>  function.Checking each operation symbols with ‘if’ on a ‘while loop’.Here i put one example.</p>\n<pre><code>else if(e.getSource()==equaltobutton) {\n            int m=0;\n            String finalvalue=displaylabel.getText();\n            float finalvalueF=Float.parseFloat(finalvalue);\n            result[i]=finalvalueF;\n            while(m&lt;i) {\n                if(operation[m]=='/') {\n                    float res=result[m]/result[m+1];\n                    result=removeArrayF(result,m);\n                    result[m]=res;\n                    operation=removeArrayC(operation,m);\n                    i--;m--;\n                }\n                m++;\n            }\n</code></pre>\n<p>For display the result</p>\n<pre><code>displaylabel.setText(result[0]+&quot;&quot;);\n</code></pre>\n<p>This <strong>setText</strong> function is also include on the last line of <strong>equaltobutton</strong>'s action</p>\n<p>The <strong>removearrayF</strong> and the <strong>removearrayC</strong> are two methods defined to remove one element from the array.\nThis is what i do .what are the changes i need to do for the proper output for multiple operations at same time?</p>\n"},{"tags":["java","spring","spring-mvc","thymeleaf"],"comments":[{"owner":{"account_id":11898165,"reputation":82,"user_id":8706905,"display_name":"SteveHu"},"score":0,"creation_date":1690363100,"post_id":76769475,"comment_id":135341646,"body_markdown":"Why not just use `departmentRepository.save(department);` to execute this function in other controllers?","body":"Why not just use <code>departmentRepository.save(department);</code> to execute this function in other controllers?"},{"owner":{"account_id":26831031,"reputation":101,"user_id":20418991,"display_name":"Byb"},"score":0,"creation_date":1690363583,"post_id":76769475,"comment_id":135341760,"body_markdown":"I have a `department-add` form where the user enters information and then clicks `submit` to submit and save this information. The form has a `th:action`, it must have some kind of address, where the completed `th:object` will be sent next. In my case, I make this address on `department-save`. It calls the repository method and redirects to the list of all departments. Where else can I call the repository method to save the newly added department?","body":"I have a <code>department-add</code> form where the user enters information and then clicks <code>submit</code> to submit and save this information. The form has a <code>th:action</code>, it must have some kind of address, where the completed <code>th:object</code> will be sent next. In my case, I make this address on <code>department-save</code>. It calls the repository method and redirects to the list of all departments. Where else can I call the repository method to save the newly added department?"}],"answers":[{"tags":[],"owner":{"account_id":10362317,"reputation":106,"user_id":7642429,"display_name":"Amin Nemati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690363171,"creation_date":1690363171,"answer_id":76769704,"question_id":76769475,"body_markdown":"option 1 : you can use [JWT security setting][1] for forbidding user to call routes\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-security-oauth-jwt\r\n\r\noption 2: you can user user roles or complete other controller for this operation,\r\ni user WebUserController and PanelUserController and add or remove some of the method to prevent others to access or see all routes","title":"How to hide URL in controller methods from user, but allow it for methods of other controllers","body":"<p>option 1 : you can use <a href=\"https://www.baeldung.com/spring-security-oauth-jwt\" rel=\"nofollow noreferrer\">JWT security setting</a> for forbidding user to call routes</p>\n<p>option 2: you can user user roles or complete other controller for this operation,\ni user WebUserController and PanelUserController and add or remove some of the method to prevent others to access or see all routes</p>\n"}],"owner":{"account_id":26831031,"reputation":101,"user_id":20418991,"display_name":"Byb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690363171,"creation_date":1690361315,"question_id":76769475,"body_markdown":"I am writing a Spring MVC application. I&#39;m using Spring 6. I have some controllers that, in addition to giving the user an html page or redirecting to another method, do some intermediate work. For example:\r\n```\r\n@RequestMapping(&quot;/department-save&quot;)\r\npublic String redirectDepartmentsAfterSavingDepartment(Department department) {\r\n    departmentRepository.save(department);\r\n    return &quot;redirect:/departments&quot;;\r\n}\r\n```\r\n\r\nThis method is called after the user clicks the &quot;add&quot; button in the form of adding a department.\r\n\r\nThus, if the user directly types this URL in the address bar, then we will get a completely incorrect operation.\r\n\r\nIs there a way to make the URL inaccessible to the user (regardless of his role in Spring Security), but accessible to other controllers? For example, if you try to access the URL from the browser, there will be a 404 error, but other controllers will be able to use this URL.\r\n\r\nFor example:\r\n```\r\n@RequestMapping(&quot;/department-save&quot;)\r\n@AllowOnlyForControllers\r\npublic String redirectDepartmentsAfterSavingDepartment(Department department) {\r\n    departmentRepository.save(department);\r\n    return &quot;redirect:/departments&quot;;\r\n}\r\n```","title":"How to hide URL in controller methods from user, but allow it for methods of other controllers","body":"<p>I am writing a Spring MVC application. I'm using Spring 6. I have some controllers that, in addition to giving the user an html page or redirecting to another method, do some intermediate work. For example:</p>\n<pre><code>@RequestMapping(&quot;/department-save&quot;)\npublic String redirectDepartmentsAfterSavingDepartment(Department department) {\n    departmentRepository.save(department);\n    return &quot;redirect:/departments&quot;;\n}\n</code></pre>\n<p>This method is called after the user clicks the &quot;add&quot; button in the form of adding a department.</p>\n<p>Thus, if the user directly types this URL in the address bar, then we will get a completely incorrect operation.</p>\n<p>Is there a way to make the URL inaccessible to the user (regardless of his role in Spring Security), but accessible to other controllers? For example, if you try to access the URL from the browser, there will be a 404 error, but other controllers will be able to use this URL.</p>\n<p>For example:</p>\n<pre><code>@RequestMapping(&quot;/department-save&quot;)\n@AllowOnlyForControllers\npublic String redirectDepartmentsAfterSavingDepartment(Department department) {\n    departmentRepository.save(department);\n    return &quot;redirect:/departments&quot;;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1690378663,"post_id":76765387,"comment_id":135345214,"body_markdown":"All foreign keys are 1:M mappings from the other side. The tool is likely looking at the FK only, treating your primary key constraint (and its uniqueness requirement) separate from the mapping multiplicity calculation. PS you can&#39;t have both MapsId AND mark that same ID as a generated value in the ProductDetail class. It needs to be set from either the relationship, or the database assign it a value, but you can&#39;t mark it as set using both. And also remove the @PrimaryKeyJoinColumn from Product&#39;s detail - it only confuses things.","body":"All foreign keys are 1:M mappings from the other side. The tool is likely looking at the FK only, treating your primary key constraint (and its uniqueness requirement) separate from the mapping multiplicity calculation. PS you can&#39;t have both MapsId AND mark that same ID as a generated value in the ProductDetail class. It needs to be set from either the relationship, or the database assign it a value, but you can&#39;t mark it as set using both. And also remove the @PrimaryKeyJoinColumn from Product&#39;s detail - it only confuses things."}],"answers":[{"tags":[],"owner":{"account_id":28758112,"reputation":401,"user_id":22024689,"display_name":"Iman Hosseinzadeh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690362674,"creation_date":1690362674,"answer_id":76769636,"question_id":76765387,"body_markdown":"The problem is maybe MySQL reverse engineering. \r\n\r\nbut try removing `@GeneratedValue(strategy = GenerationType.IDENTITY)` from the Product Details class.When you use product PK as shared primary key you don&#39;t need to generate an id in Product Details again.","title":"Difficulty building a one-to-one relationship in Jpa","body":"<p>The problem is maybe MySQL reverse engineering.</p>\n<p>but try removing <code>@GeneratedValue(strategy = GenerationType.IDENTITY)</code> from the Product Details class.When you use product PK as shared primary key you don't need to generate an id in Product Details again.</p>\n"}],"owner":{"account_id":20586928,"reputation":9,"user_id":15111586,"display_name":"Amirreza Andishmand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690362674,"creation_date":1690307878,"question_id":76765387,"body_markdown":"I have 2 entity with names product and productDetails \r\nAnd there is a one-to-one relationship between them.\r\n\r\nBut when I open my mysql it shows me that they have a one to many relationship?\r\n\r\nWhy is there such a problem?\r\n\r\n\r\n *ProductDetails class*\r\n\r\n```\r\n    @Getter\r\n    \r\n    @Setter\r\n    \r\n    @Entity\r\n    public class ProductDetail {\r\n        @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;product_id&quot;)\r\n        private Integer id;\r\n        private String description;\r\n        private float weight;\r\n        private float length;\r\n        private float height;\r\n        private float width;\r\n    \r\n        @OneToOne\r\n        @JoinColumn(name = &quot;product_id&quot;)\r\n        @MapsId\r\n        private product product;\r\n    }\r\n```\r\n\r\n *Product class*\r\n\r\n```\r\n    @Getter\r\n    @Setter\r\n    @Entity\r\n    public class product {\r\n    \r\n        @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n    \r\n        private String name;\r\n        private float price;\r\n    \r\n        @OneToOne(mappedBy = &quot;product&quot;, cascade = CascadeType.ALL)\r\n        @PrimaryKeyJoinColumn\r\n        private ProductDetail detail;\r\n    \r\n        public product() { }\r\n    \r\n        public product(String name, float price) {\r\n            super();\r\n            this.name = name;\r\n            this.price = price;\r\n        }\r\n```\r\n\r\n&gt; Reverse Enginer in mysql\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[1]: https://i.stack.imgur.com/VOKe8.png\r\n\r\n","title":"Difficulty building a one-to-one relationship in Jpa","body":"<p>I have 2 entity with names product and productDetails\nAnd there is a one-to-one relationship between them.</p>\n<p>But when I open my mysql it shows me that they have a one to many relationship?</p>\n<p>Why is there such a problem?</p>\n<p><em>ProductDetails class</em></p>\n<pre><code>    @Getter\n    \n    @Setter\n    \n    @Entity\n    public class ProductDetail {\n        @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n        @Column(name = &quot;product_id&quot;)\n        private Integer id;\n        private String description;\n        private float weight;\n        private float length;\n        private float height;\n        private float width;\n    \n        @OneToOne\n        @JoinColumn(name = &quot;product_id&quot;)\n        @MapsId\n        private product product;\n    }\n</code></pre>\n<p><em>Product class</em></p>\n<pre><code>    @Getter\n    @Setter\n    @Entity\n    public class product {\n    \n        @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n        private Integer id;\n    \n        private String name;\n        private float price;\n    \n        @OneToOne(mappedBy = &quot;product&quot;, cascade = CascadeType.ALL)\n        @PrimaryKeyJoinColumn\n        private ProductDetail detail;\n    \n        public product() { }\n    \n        public product(String name, float price) {\n            super();\n            this.name = name;\n            this.price = price;\n        }\n</code></pre>\n<blockquote>\n<p>Reverse Enginer in mysql</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/VOKe8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VOKe8.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","css","javafx"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1690154104,"post_id":76750473,"comment_id":135309699,"body_markdown":"Does `.label { -fx-background-color: inherit; }` work in your case (assuming your label&#39;s parent has a background color)?","body":"Does <code>.label { -fx-background-color: inherit; }</code> work in your case (assuming your label&#39;s parent has a background color)?"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1690158589,"post_id":76750473,"comment_id":135309973,"body_markdown":"There is a duplicate to this question out there somewhere. I could not find it.","body":"There is a duplicate to this question out there somewhere. I could not find it."},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690164188,"post_id":76750473,"comment_id":135310378,"body_markdown":"@Slaw good shot, but my parent do not has this css property (and I can&#39;t add it since it will mess up with my application styling )","body":"@Slaw good shot, but my parent do not has this css property (and I can&#39;t add it since it will mess up with my application styling )"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1690172609,"post_id":76750473,"comment_id":135310971,"body_markdown":"I found it! https://stackoverflow.com/questions/14860960/groupbox-titledborder-in-javafx-2","body":"I found it! <a href=\"https://stackoverflow.com/questions/14860960/groupbox-titledborder-in-javafx-2\" title=\"groupbox titledborder in javafx 2\">stackoverflow.com/questions/14860960/&hellip;</a>"},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690205883,"post_id":76750473,"comment_id":135317000,"body_markdown":"@SedJ601 unbelievable how WEAK stack overflow is. I question myself every single week how there&#39;s nothing better than it. Your suggested post is just a hack to achieve what I was looking for, which is nothing else than a very poor workaround (titled pane? border pane? I have thousands of nodes which needs that styling, adding a huge parent node to it is crazy bad). I invite you to read my post again as your suggested &quot;answer&quot; does not meets what I asked for. And please unmark my post as duplicate. It is not.","body":"@SedJ601 unbelievable how WEAK stack overflow is. I question myself every single week how there&#39;s nothing better than it. Your suggested post is just a hack to achieve what I was looking for, which is nothing else than a very poor workaround (titled pane? border pane? I have thousands of nodes which needs that styling, adding a huge parent node to it is crazy bad). I invite you to read my post again as your suggested &quot;answer&quot; does not meets what I asked for. And please unmark my post as duplicate. It is not."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1690206668,"post_id":76750473,"comment_id":135317183,"body_markdown":"@FARS, I did not close this as a duplicate, even though I still believe it&#39;s a duplicate. I am not sure how you got &quot;hack&quot; out of that. Lol, you have a choice. You can use `TitledPane` or do what @jewelsea suggested. You can literally create your own custom node using @jewelsea&#39;s ideas. You can then use your custom node to produce your 1000+ nodes for your project.","body":"@FARS, I did not close this as a duplicate, even though I still believe it&#39;s a duplicate. I am not sure how you got &quot;hack&quot; out of that. Lol, you have a choice. You can use <code>TitledPane</code> or do what @jewelsea suggested. You can literally create your own custom node using @jewelsea&#39;s ideas. You can then use your custom node to produce your 1000+ nodes for your project."},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690207165,"post_id":76750473,"comment_id":135317308,"body_markdown":"@SedJ601 sure, what supports this idea is that all computers has infinite ram to store all these nodes and infinite cpu to load it all very quickly. And yes, indeed it is a hack because ideally you should not add extra logic and java code for very basic visual changes, unless strictly necessary which clearly is not our case here.","body":"@SedJ601 sure, what supports this idea is that all computers has infinite ram to store all these nodes and infinite cpu to load it all very quickly. And yes, indeed it is a hack because ideally you should not add extra logic and java code for very basic visual changes, unless strictly necessary which clearly is not our case here."},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690207270,"post_id":76750473,"comment_id":135317336,"body_markdown":"@SedJ601 just a hint that points out that almost for sure it is possible to achieve the same effect using css only:\n\nhttps://jojorabbitjavafxblog.wordpress.com/2011/07/11/javafx-2-0-css-styling-part-1/","body":"@SedJ601 just a hint that points out that almost for sure it is possible to achieve the same effect using css only:  <a href=\"https://jojorabbitjavafxblog.wordpress.com/2011/07/11/javafx-2-0-css-styling-part-1/\" rel=\"nofollow noreferrer\">jojorabbitjavafxblog.wordpress.com/2011/07/11/&hellip;</a>"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1690207411,"post_id":76750473,"comment_id":135317368,"body_markdown":"In @jewelsea&#39;s answer, he uses three nodes to create `BorderedTitledPane`. I haven&#39;t looked at the code, but I am willing to be `TitledPane` uses at least three nodes too. I am not sure what the issue is here. ????","body":"In @jewelsea&#39;s answer, he uses three nodes to create <code>BorderedTitledPane</code>. I haven&#39;t looked at the code, but I am willing to be <code>TitledPane</code> uses at least three nodes too. I am not sure what the issue is here. ????"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1690207473,"post_id":76750473,"comment_id":135317384,"body_markdown":"Hey, you seem to be the expert here. Good luck!","body":"Hey, you seem to be the expert here. Good luck!"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1690209064,"post_id":76750473,"comment_id":135317709,"body_markdown":"Also, How are you going to display 1000+ of these nodes at once? It sounds like you will need a `TableView`, `ListView`, or `GridView`. Using one of these nodes will help your app be light on memory and loading.","body":"Also, How are you going to display 1000+ of these nodes at once? It sounds like you will need a <code>TableView</code>, <code>ListView</code>, or <code>GridView</code>. Using one of these nodes will help your app be light on memory and loading."},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690209616,"post_id":76750473,"comment_id":135317829,"body_markdown":"@SedJ601 sure, that&#39;s correct. Although it does improve performance, it impacts memory. The &quot;unloaded&quot; nodes -nodes out of the scroll- in these Pane extension nodes you mentioned stores all its nodes in memory, but only request to render then in the graphics context if showing inside the current scroll selection, that&#39;s where it saves memory. I&#39;m more concerned with the unloaded nodes, BorderPane and TitledPane are one of the most heaviest Pane nodes memory wise. Please collaborate improving JFX community by unsetting this question as duplicate. It would greatly benefit if answered.","body":"@SedJ601 sure, that&#39;s correct. Although it does improve performance, it impacts memory. The &quot;unloaded&quot; nodes -nodes out of the scroll- in these Pane extension nodes you mentioned stores all its nodes in memory, but only request to render then in the graphics context if showing inside the current scroll selection, that&#39;s where it saves memory. I&#39;m more concerned with the unloaded nodes, BorderPane and TitledPane are one of the most heaviest Pane nodes memory wise. Please collaborate improving JFX community by unsetting this question as duplicate. It would greatly benefit if answered."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":4,"creation_date":1690225062,"post_id":76750473,"comment_id":135320733,"body_markdown":"@FARS, You are incorrect. If you use one of the views I listed above, memory will only be allocated for the nodes that show on the screen. Those views use [`VirtualFlow`](https://openjfx.io/javadoc/12/javafx.controls/javafx/scene/control/skin/VirtualFlow.html). That&#39;s assuming that you are using the views correctly.","body":"@FARS, You are incorrect. If you use one of the views I listed above, memory will only be allocated for the nodes that show on the screen. Those views use <a href=\"https://openjfx.io/javadoc/12/javafx.controls/javafx/scene/control/skin/VirtualFlow.html\" rel=\"nofollow noreferrer\"><code>VirtualFlow</code></a>. That&#39;s assuming that you are using the views correctly."},{"owner":{"account_id":7717111,"reputation":8764,"user_id":5844477,"display_name":"Sai Dandem"},"score":3,"creation_date":1690242420,"post_id":76750473,"comment_id":135323116,"body_markdown":"@FARS, If you are really more specific with the implementation, at least show us how your code will look like. I mean you can provide a simple [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example) with the structure you are expecting. This will help others to save their time by not providing answers which are not suitable for you.","body":"@FARS, If you are really more specific with the implementation, at least show us how your code will look like. I mean you can provide a simple <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal Reproducible Example</a> with the structure you are expecting. This will help others to save their time by not providing answers which are not suitable for you."},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690289365,"post_id":76750473,"comment_id":135330038,"body_markdown":"@SaiDandem &quot;at least show us how your code will look like.&quot; neither I do, how would I? Besides that, I made it very clear - No costy nodes, only CSS and at the very least, less java code as possible.. sry if that confuses someone, but I really think MRE is not necessary here. Thinking of it, I wonder what MRE I can even place in here. FXML file (a hbox under a label.. which is like 1 minute in Scene Builder)?","body":"@SaiDandem &quot;at least show us how your code will look like.&quot; neither I do, how would I? Besides that, I made it very clear - No costy nodes, only CSS and at the very least, less java code as possible.. sry if that confuses someone, but I really think MRE is not necessary here. Thinking of it, I wonder what MRE I can even place in here. FXML file (a hbox under a label.. which is like 1 minute in Scene Builder)?"},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690289637,"post_id":76750473,"comment_id":135330119,"body_markdown":"@SedJ601 It has to be something more than that, try populating a tableView with 10.000 rows, all columns with some cellFactory logic. I guarantee you the nodes showing in the tableView are not the only ones consuming memory. The ones that don&#39;t show up definitely do consumes memory as well, but much less. Any profiler can tell you that","body":"@SedJ601 It has to be something more than that, try populating a tableView with 10.000 rows, all columns with some cellFactory logic. I guarantee you the nodes showing in the tableView are not the only ones consuming memory. The ones that don&#39;t show up definitely do consumes memory as well, but much less. Any profiler can tell you that"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":2,"creation_date":1690298501,"post_id":76750473,"comment_id":135332305,"body_markdown":"That simply means you are not using `setCellFactory` correctly. It could also mean you are confused about what&#39;s going on behind the scene. Your `TableView&#39;s` model should only contain data. You should not be passing any nodes to the `TableView&#39;s` cell factory.","body":"That simply means you are not using <code>setCellFactory</code> correctly. It could also mean you are confused about what&#39;s going on behind the scene. Your <code>TableView&#39;s</code> model should only contain data. You should not be passing any nodes to the <code>TableView&#39;s</code> cell factory."},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690298935,"post_id":76750473,"comment_id":135332403,"body_markdown":"@SedJ601 sure, how then would I access TableView cells setGraphic()? Also, you&#39;re pretending table cells don&#39;t has any images and/or buttons whatsoever? Your comment just don&#39;t make any sense","body":"@SedJ601 sure, how then would I access TableView cells setGraphic()? Also, you&#39;re pretending table cells don&#39;t has any images and/or buttons whatsoever? Your comment just don&#39;t make any sense"},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":4,"creation_date":1690309930,"post_id":76750473,"comment_id":135334710,"body_markdown":"@FARS you are absolutely misunderstanding/misusing table cells if your profiler is showing thousands of cell nodes.  VirtualFlow instantiates only enough cells to fill the ViewPort plus a couple extra.  Then the cells are reused with new content via your custom setItem() method.  In a properly built TableView, if you put some sort of println() statement in the cell constructor, you should only see slightly more output lines than rows in the viewport.  If you see thousands, then you&#39;re doing it wrong.","body":"@FARS you are absolutely misunderstanding/misusing table cells if your profiler is showing thousands of cell nodes.  VirtualFlow instantiates only enough cells to fill the ViewPort plus a couple extra.  Then the cells are reused with new content via your custom setItem() method.  In a properly built TableView, if you put some sort of println() statement in the cell constructor, you should only see slightly more output lines than rows in the viewport.  If you see thousands, then you&#39;re doing it wrong."},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1690310575,"post_id":76750473,"comment_id":135334820,"body_markdown":"I&#39;m struggling to find a way to do this without at least three Nodes.  You need the container (with the border), the Label (or at least a Text), and you need the content.  That&#39;s three.","body":"I&#39;m struggling to find a way to do this without at least three Nodes.  You need the container (with the border), the Label (or at least a Text), and you need the content.  That&#39;s three."},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":2,"creation_date":1690310624,"post_id":76750473,"comment_id":135334826,"body_markdown":"And what&#39;s with the &quot;in my case it&#39;s not a possibility&quot; to set the background colour of the label the same as the background colour of the container???","body":"And what&#39;s with the &quot;in my case it&#39;s not a possibility&quot; to set the background colour of the label the same as the background colour of the container???"},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690322368,"post_id":76750473,"comment_id":135336787,"body_markdown":"@DaveB somehow I might be failing in communication. Let&#39;s clear up things. &quot;misunderstanding/misusing table cells if your profiler is showing thousands of cell nodes.&quot; it is not, I never said so. I have thousands of nodes is a ListView, tableView was mentioned as an example of how nodes behave when they&#39;re not showing up in scene graph. My profiler is showing thousands of nodes from the ListView, which is correct as my entity class has thousands of entries, so that totally makes sense. No problem here. Second in next comment","body":"@DaveB somehow I might be failing in communication. Let&#39;s clear up things. &quot;misunderstanding/misusing table cells if your profiler is showing thousands of cell nodes.&quot; it is not, I never said so. I have thousands of nodes is a ListView, tableView was mentioned as an example of how nodes behave when they&#39;re not showing up in scene graph. My profiler is showing thousands of nodes from the ListView, which is correct as my entity class has thousands of entries, so that totally makes sense. No problem here. Second in next comment"},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690322545,"post_id":76750473,"comment_id":135336799,"body_markdown":"@DaveB second, I haven&#39;t mentioned anywhere I have a node limit (like 3 nodes), I do have mentioned that it is a necessity to avoid costy nodes. And finally, I just can&#39;t set a background color to my label because the background of my app is an animated css gradient. That&#39;s why setting my label a background color is just not possible. Let me know if I can clarify anything else","body":"@DaveB second, I haven&#39;t mentioned anywhere I have a node limit (like 3 nodes), I do have mentioned that it is a necessity to avoid costy nodes. And finally, I just can&#39;t set a background color to my label because the background of my app is an animated css gradient. That&#39;s why setting my label a background color is just not possible. Let me know if I can clarify anything else"},{"owner":{"account_id":7717111,"reputation":8764,"user_id":5844477,"display_name":"Sai Dandem"},"score":2,"creation_date":1690324299,"post_id":76750473,"comment_id":135336982,"body_markdown":"@FARS It doesn&#39;t matter how minimal the code is. What it matters is, what is your exact use case. If in first place, you created a minimal example with gradient background, and shown the basic layout (your so called `a hbox under a label`) or what you are trying, I believe half of this discussion would not even existed.","body":"@FARS It doesn&#39;t matter how minimal the code is. What it matters is, what is your exact use case. If in first place, you created a minimal example with gradient background, and shown the basic layout (your so called <code>a hbox under a label</code>) or what you are trying, I believe half of this discussion would not even existed."},{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1690328513,"post_id":76750473,"comment_id":135337399,"body_markdown":"@SaiDandem sorry I might be misunderstanding something this time. I though I made it very clear - setting a background color to my label is not an option. Wasn&#39;t that enough? Also you could literally just have asked why, and *that* is pretty much be the reason for our discussion have ever existed. Btw, you would have found another way to point out something wrong in my question instead of trying to do some coding anyways (as most of the people in this platform do nowadays, I don&#39;t blame you - it&#39;s stack overflow fault)","body":"@SaiDandem sorry I might be misunderstanding something this time. I though I made it very clear - setting a background color to my label is not an option. Wasn&#39;t that enough? Also you could literally just have asked why, and <i>that</i> is pretty much be the reason for our discussion have ever existed. Btw, you would have found another way to point out something wrong in my question instead of trying to do some coding anyways (as most of the people in this platform do nowadays, I don&#39;t blame you - it&#39;s stack overflow fault)"},{"owner":{"account_id":7717111,"reputation":8764,"user_id":5844477,"display_name":"Sai Dandem"},"score":2,"creation_date":1690330323,"post_id":76750473,"comment_id":135337546,"body_markdown":"`setting a background color to my label is not an option. Wasn&#39;t that enough?` Yeah definitely not enough. You are seeking help in this platform and you need to provide as much information as possible in first case. So that there will be minimal to and fros.","body":"<code>setting a background color to my label is not an option. Wasn&#39;t that enough?</code> Yeah definitely not enough. You are seeking help in this platform and you need to provide as much information as possible in first case. So that there will be minimal to and fros."},{"owner":{"account_id":7717111,"reputation":8764,"user_id":5844477,"display_name":"Sai Dandem"},"score":0,"creation_date":1690330659,"post_id":76750473,"comment_id":135337580,"body_markdown":"And BTW, no question is asked without attempting. I believe no one is that brilliant to ask you by just seeing a screenshot and three lines of css code.","body":"And BTW, no question is asked without attempting. I believe no one is that brilliant to ask you by just seeing a screenshot and three lines of css code."},{"owner":{"account_id":7717111,"reputation":8764,"user_id":5844477,"display_name":"Sai Dandem"},"score":0,"creation_date":1690332141,"post_id":76750473,"comment_id":135337687,"body_markdown":"As mentioned, this is my [output](https://i.stack.imgur.com/hQeLH.png) I am so far at. Everytime you provide an info, the approach is changed.. so far I have 3 different approaches for this solution. The one in this screenshot is done with 4 nodes and using clipping effect.","body":"As mentioned, this is my <a href=\"https://i.stack.imgur.com/hQeLH.png\" rel=\"nofollow noreferrer\">output</a> I am so far at. Everytime you provide an info, the approach is changed.. so far I have 3 different approaches for this solution. The one in this screenshot is done with 4 nodes and using clipping effect."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":5,"creation_date":1690337343,"post_id":76750473,"comment_id":135338073,"body_markdown":"&quot;_I have thousands of nodes is a ListView_&quot; -- If that means you have a `ListView&lt;SomeNodeType&gt;`, then that is the wrong way to use a `ListView`. You should have a _model_, and then use a custom cell factory to create the view. However, if you&#39;re instead saying your model is so complex that **each _individual_ cell** requires dozens to hundreds of nodes to render it, well... that&#39;s a different issue.","body":"&quot;<i>I have thousands of nodes is a ListView</i>&quot; -- If that means you have a <code>ListView&lt;SomeNodeType&gt;</code>, then that is the wrong way to use a <code>ListView</code>. You should have a <i>model</i>, and then use a custom cell factory to create the view. However, if you&#39;re instead saying your model is so complex that <b>each <i>individual</i> cell</b> requires dozens to hundreds of nodes to render it, well... that&#39;s a different issue."},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1690413190,"post_id":76750473,"comment_id":135351991,"body_markdown":"@FARS TableView or ListView, it&#39;s the same thing. If your viewport has, say, 10 rows you should have no more than about 12 cells instantiated.  They get recycled as you scroll.","body":"@FARS TableView or ListView, it&#39;s the same thing. If your viewport has, say, 10 rows you should have no more than about 12 cells instantiated.  They get recycled as you scroll."},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":1,"creation_date":1690413497,"post_id":76750473,"comment_id":135352020,"body_markdown":"The animated gradient bit changes everything. Now the problem is how to make the border disappear while keeping the background visible. To do that you&#39;ll need to have a container without a border, but with the background. Another the same size, but just the border, and then use another black box the same size and location as the label to use as an opacity mask on the border.","body":"The animated gradient bit changes everything. Now the problem is how to make the border disappear while keeping the background visible. To do that you&#39;ll need to have a container without a border, but with the background. Another the same size, but just the border, and then use another black box the same size and location as the label to use as an opacity mask on the border."}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1690338749,"creation_date":1690338373,"answer_id":76767627,"question_id":76750473,"body_markdown":"This is just a code dump of stuff you can choose to study or ignore.  I may or may not provide additional explanation or answer further questions about it.\r\n\r\n    import javafx.scene.Group;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.LineTo;\r\n    import javafx.scene.shape.MoveTo;\r\n    import javafx.scene.shape.Path;\r\n    import javafx.scene.shape.Rectangle;\r\n    import javafx.scene.text.Font;\r\n    import javafx.scene.text.FontWeight;\r\n    import javafx.scene.text.Text;\r\n    \r\n    public class CustomLabel extends Group {\r\n        public static final double\r\n                LABEL_WIDTH = 200,\r\n                LABEL_HEIGHT = 60;\r\n    \r\n        private static final double\r\n                FONT_SIZE = 15,\r\n                TEXT_BASELINE_LEFT_X = 15,\r\n                TEXT_BASELINE_LEFT_Y = 15,\r\n                BORDER_INSETS = 9,\r\n                BORDER_WIDTH = 2;\r\n    \r\n        private static final Font font = Font.font(\r\n                &quot;monospace&quot;,\r\n                FontWeight.BOLD,\r\n                FONT_SIZE\r\n        );\r\n    \r\n        public CustomLabel(String labelText) {\r\n            Text text = createText(\r\n                    labelText\r\n            );\r\n            final double textWidth = text.getLayoutBounds().getWidth();\r\n    \r\n            Path border = createBorder(\r\n                    textWidth\r\n            );\r\n    \r\n            Rectangle background = new Rectangle(\r\n                    LABEL_WIDTH,\r\n                    LABEL_HEIGHT\r\n            );\r\n            background.setFill(Color.TRANSPARENT);\r\n    \r\n            getChildren().addAll(\r\n                    background,\r\n                    border,\r\n                    text\r\n            );\r\n        }\r\n    \r\n        private static Path createBorder(double textWidth) {\r\n            Path border = new Path(\r\n                    new MoveTo(BORDER_INSETS, BORDER_INSETS),\r\n                    new LineTo(TEXT_BASELINE_LEFT_X, BORDER_INSETS),\r\n                    new MoveTo(TEXT_BASELINE_LEFT_X + textWidth, BORDER_INSETS),\r\n                    new LineTo(LABEL_WIDTH - BORDER_INSETS, BORDER_INSETS),\r\n                    new LineTo(LABEL_WIDTH - BORDER_INSETS, LABEL_HEIGHT - BORDER_INSETS),\r\n                    new LineTo(BORDER_INSETS, LABEL_HEIGHT - BORDER_INSETS),\r\n                    new LineTo(BORDER_INSETS, BORDER_INSETS)\r\n            );\r\n            border.setStrokeWidth(BORDER_WIDTH);\r\n            return border;\r\n        }\r\n    \r\n        private static Text createText(String labelText) {\r\n            Text text = new Text(\r\n                    TEXT_BASELINE_LEFT_X,\r\n                    TEXT_BASELINE_LEFT_Y,\r\n                    &quot; &quot; + labelText + &quot; &quot;\r\n            );\r\n    \r\n            text.setFont(font);\r\n            return text;\r\n        }\r\n    }\r\n\r\n----\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class SingleLabelApp extends Application {\r\n        @Override\r\n        public void start(Stage stage) {\r\n            stage.setScene(new Scene(new CustomLabel(&quot;hello, world&quot;)));\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\n----\r\n\r\n    import javafx.animation.Animation;\r\n    import javafx.animation.KeyFrame;\r\n    import javafx.animation.KeyValue;\r\n    import javafx.animation.Timeline;\r\n    import javafx.application.Application;\r\n    import javafx.beans.property.DoubleProperty;\r\n    import javafx.beans.property.SimpleDoubleProperty;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.Background;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.paint.CycleMethod;\r\n    import javafx.scene.paint.RadialGradient;\r\n    import javafx.scene.paint.Stop;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.Duration;\r\n    \r\n    public class SingleLabelAppWithAnimatedGradient extends Application {\r\n        private static final double GRADIENT_RADIUS = 40;\r\n        private static final Duration ANIMATION_DURATION = Duration.seconds(10);\r\n    \r\n        private DoubleProperty offset = new SimpleDoubleProperty(-GRADIENT_RADIUS);\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            Pane pane = new Pane(\r\n                    new CustomLabel(&quot;hello, world&quot;)\r\n            );\r\n    \r\n            animateBackground(pane);\r\n    \r\n            stage.setScene(new Scene(pane));\r\n            stage.show();\r\n        }\r\n    \r\n        private void animateBackground(Pane pane) {\r\n            offset.addListener(o -&gt; refreshBackground(pane));\r\n    \r\n            Timeline gradientAnimator = new Timeline(\r\n                    new KeyFrame(\r\n                            Duration.seconds(0),\r\n                            new KeyValue(\r\n                                    offset,\r\n                                    - GRADIENT_RADIUS\r\n                            )\r\n                    ),\r\n                    new KeyFrame(\r\n                            ANIMATION_DURATION,\r\n                            new KeyValue(\r\n                                    offset,\r\n                                    GRADIENT_RADIUS + CustomLabel.LABEL_WIDTH\r\n                            )\r\n                    )\r\n            );\r\n            gradientAnimator.setCycleCount(Animation.INDEFINITE);\r\n    \r\n            gradientAnimator.play();\r\n        }\r\n    \r\n        private void refreshBackground(Pane pane) {\r\n            pane.setBackground(\r\n                    Background.fill(\r\n                            createGradient(\r\n                                    offset.get()\r\n                            )\r\n                    )\r\n            );\r\n        }\r\n    \r\n        private static RadialGradient createGradient(double offset) {\r\n            RadialGradient gradient = new RadialGradient(\r\n                    30,\r\n                    .2,\r\n                    offset,\r\n                    GRADIENT_RADIUS / 2,\r\n                    GRADIENT_RADIUS,\r\n                    false,\r\n                    CycleMethod.NO_CYCLE,\r\n                    new Stop(0, Color.SKYBLUE),\r\n                    new Stop(GRADIENT_RADIUS, Color.PINK)\r\n            );\r\n    \r\n            return gradient;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\n----\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Group;\r\n    import javafx.scene.Scene;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class ManyLabelApp extends Application {\r\n        private static final int NUM_LABELS = 1_000;\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            Group lotsaLabels = new Group();\r\n    \r\n            for (int i = 0; i &lt; NUM_LABELS; i++) {\r\n                CustomLabel customLabel = new CustomLabel(\r\n                        &quot;Item %06d&quot;.formatted(i)\r\n                );\r\n                lotsaLabels.getChildren().add(customLabel);\r\n    \r\n                customLabel.setLayoutY(i * CustomLabel.LABEL_HEIGHT);\r\n            }\r\n    \r\n            stage.setScene(new Scene(lotsaLabels));\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\n-----\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ListCell;\r\n    import javafx.scene.control.ListView;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class LabelListAppWithCreatedNodes extends Application {\r\n        private static final int NUM_LABELS = 1_000;\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            List&lt;String&gt; labelStrings = new ArrayList&lt;&gt;(NUM_LABELS);\r\n            for (int i = 0; i &lt; NUM_LABELS; i++) {\r\n                labelStrings.add(&quot;Item %06d&quot;.formatted(i));\r\n            }\r\n    \r\n            ListView&lt;String&gt; labelListView = new ListView&lt;&gt;(\r\n                    FXCollections.observableList(labelStrings)\r\n            );\r\n            labelListView.setCellFactory(param -&gt; new ListCell&lt;&gt;() {\r\n                @Override\r\n                protected void updateItem(String item, boolean empty) {\r\n                    super.updateItem(item, empty);\r\n    \r\n                    if (item == null || empty) {\r\n                        setGraphic(null);\r\n                        return;\r\n                    }\r\n    \r\n                    setGraphic(new CustomLabel(item)); // &lt;- not good.\r\n                }\r\n            });\r\n    \r\n            stage.setScene(new Scene(labelListView));\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\n----\r\n\r\n    import javafx.scene.Group;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.LineTo;\r\n    import javafx.scene.shape.MoveTo;\r\n    import javafx.scene.shape.Path;\r\n    import javafx.scene.shape.Rectangle;\r\n    import javafx.scene.text.Font;\r\n    import javafx.scene.text.FontWeight;\r\n    import javafx.scene.text.Text;\r\n    \r\n    public class ChangeableCustomLabel extends Group {\r\n        public static final double\r\n                LABEL_WIDTH = 200,\r\n                LABEL_HEIGHT = 60;\r\n    \r\n        private static final double\r\n                FONT_SIZE = 15,\r\n                TEXT_BASELINE_LEFT_X = 15,\r\n                TEXT_BASELINE_LEFT_Y = 15,\r\n                BORDER_INSETS = 9,\r\n                BORDER_WIDTH = 2;\r\n    \r\n        private static final Font font = Font.font(\r\n                &quot;monospace&quot;,\r\n                FontWeight.BOLD,\r\n                FONT_SIZE\r\n        );\r\n    \r\n        private final Text text = new Text();\r\n        private final Path border = new Path();\r\n        private final MoveTo textSkipper = new MoveTo();\r\n    \r\n        private static int numCreated = 0;\r\n    \r\n        public ChangeableCustomLabel(String labelText) {\r\n            initText(\r\n                    labelText\r\n            );\r\n            final double textWidth = calculateTextWidth();\r\n    \r\n            initBorder(\r\n                    textWidth\r\n            );\r\n    \r\n            Rectangle background = new Rectangle(\r\n                    LABEL_WIDTH,\r\n                    LABEL_HEIGHT\r\n            );\r\n            background.setFill(Color.TRANSPARENT);\r\n    \r\n            getChildren().addAll(\r\n                    background,\r\n                    border,\r\n                    text\r\n            );\r\n    \r\n            System.out.println(&quot;Num custom labels created: &quot; + ++numCreated);\r\n        }\r\n    \r\n        public void setLabelText(String labelText) {\r\n            text.setText(&quot; &quot; + labelText + &quot; &quot;);\r\n            textSkipper.setX(TEXT_BASELINE_LEFT_X + calculateTextWidth());\r\n        }\r\n    \r\n        private void initBorder(double textWidth) {\r\n            textSkipper.setX(TEXT_BASELINE_LEFT_X + textWidth);\r\n            textSkipper.setY(BORDER_INSETS);\r\n    \r\n            border.getElements().addAll(\r\n                    new MoveTo(BORDER_INSETS, BORDER_INSETS),\r\n                    new LineTo(TEXT_BASELINE_LEFT_X, BORDER_INSETS),\r\n                    textSkipper,\r\n                    new LineTo(LABEL_WIDTH - BORDER_INSETS, BORDER_INSETS),\r\n                    new LineTo(LABEL_WIDTH - BORDER_INSETS, LABEL_HEIGHT - BORDER_INSETS),\r\n                    new LineTo(BORDER_INSETS, LABEL_HEIGHT - BORDER_INSETS),\r\n                    new LineTo(BORDER_INSETS, BORDER_INSETS)\r\n            );\r\n            border.setStrokeWidth(BORDER_WIDTH);\r\n        }\r\n    \r\n        private void initText(String labelText) {\r\n            text.setX(TEXT_BASELINE_LEFT_X);\r\n            text.setY(TEXT_BASELINE_LEFT_Y);\r\n            text.setText(labelText);\r\n            text.setFont(font);\r\n        }\r\n    \r\n        private double calculateTextWidth() {\r\n            return text.getLayoutBounds().getWidth();\r\n        }\r\n    }\r\n\r\n----\r\n\r\n    import javafx.application.Application;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ListCell;\r\n    import javafx.scene.control.ListView;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class LabelListAppWithCachedNodes extends Application {\r\n        private static final int NUM_LABELS = 100_000;\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            List&lt;String&gt; labelStrings = new ArrayList&lt;&gt;(NUM_LABELS);\r\n            for (int i = 0; i &lt; NUM_LABELS; i++) {\r\n                labelStrings.add(&quot;Item %06d&quot;.formatted(i));\r\n            }\r\n    \r\n            ListView&lt;String&gt; labelListView = new ListView&lt;&gt;(\r\n                    FXCollections.observableList(labelStrings)\r\n            );\r\n            labelListView.setCellFactory(param -&gt; new ListCell&lt;&gt;() {\r\n                final ChangeableCustomLabel changeableCustomLabel = new ChangeableCustomLabel(\r\n                        &quot;&quot;\r\n                );\r\n    \r\n                @Override\r\n                protected void updateItem(String item, boolean empty) {\r\n                    super.updateItem(item, empty);\r\n    \r\n                    if (item == null || empty) {\r\n                        setGraphic(null);\r\n                        return;\r\n                    }\r\n    \r\n                    changeableCustomLabel.setLabelText(item);\r\n                    setGraphic(changeableCustomLabel);\r\n                }\r\n            });\r\n    \r\n            stage.setScene(new Scene(labelListView));\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"JavaFX make a node overlay parent node border color","body":"<p>This is just a code dump of stuff you can choose to study or ignore.  I may or may not provide additional explanation or answer further questions about it.</p>\n<pre><code>import javafx.scene.Group;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.LineTo;\nimport javafx.scene.shape.MoveTo;\nimport javafx.scene.shape.Path;\nimport javafx.scene.shape.Rectangle;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\n\npublic class CustomLabel extends Group {\n    public static final double\n            LABEL_WIDTH = 200,\n            LABEL_HEIGHT = 60;\n\n    private static final double\n            FONT_SIZE = 15,\n            TEXT_BASELINE_LEFT_X = 15,\n            TEXT_BASELINE_LEFT_Y = 15,\n            BORDER_INSETS = 9,\n            BORDER_WIDTH = 2;\n\n    private static final Font font = Font.font(\n            &quot;monospace&quot;,\n            FontWeight.BOLD,\n            FONT_SIZE\n    );\n\n    public CustomLabel(String labelText) {\n        Text text = createText(\n                labelText\n        );\n        final double textWidth = text.getLayoutBounds().getWidth();\n\n        Path border = createBorder(\n                textWidth\n        );\n\n        Rectangle background = new Rectangle(\n                LABEL_WIDTH,\n                LABEL_HEIGHT\n        );\n        background.setFill(Color.TRANSPARENT);\n\n        getChildren().addAll(\n                background,\n                border,\n                text\n        );\n    }\n\n    private static Path createBorder(double textWidth) {\n        Path border = new Path(\n                new MoveTo(BORDER_INSETS, BORDER_INSETS),\n                new LineTo(TEXT_BASELINE_LEFT_X, BORDER_INSETS),\n                new MoveTo(TEXT_BASELINE_LEFT_X + textWidth, BORDER_INSETS),\n                new LineTo(LABEL_WIDTH - BORDER_INSETS, BORDER_INSETS),\n                new LineTo(LABEL_WIDTH - BORDER_INSETS, LABEL_HEIGHT - BORDER_INSETS),\n                new LineTo(BORDER_INSETS, LABEL_HEIGHT - BORDER_INSETS),\n                new LineTo(BORDER_INSETS, BORDER_INSETS)\n        );\n        border.setStrokeWidth(BORDER_WIDTH);\n        return border;\n    }\n\n    private static Text createText(String labelText) {\n        Text text = new Text(\n                TEXT_BASELINE_LEFT_X,\n                TEXT_BASELINE_LEFT_Y,\n                &quot; &quot; + labelText + &quot; &quot;\n        );\n\n        text.setFont(font);\n        return text;\n    }\n}\n</code></pre>\n<hr />\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\npublic class SingleLabelApp extends Application {\n    @Override\n    public void start(Stage stage) {\n        stage.setScene(new Scene(new CustomLabel(&quot;hello, world&quot;)));\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<hr />\n<pre><code>import javafx.animation.Animation;\nimport javafx.animation.KeyFrame;\nimport javafx.animation.KeyValue;\nimport javafx.animation.Timeline;\nimport javafx.application.Application;\nimport javafx.beans.property.DoubleProperty;\nimport javafx.beans.property.SimpleDoubleProperty;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.Background;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.paint.Color;\nimport javafx.scene.paint.CycleMethod;\nimport javafx.scene.paint.RadialGradient;\nimport javafx.scene.paint.Stop;\nimport javafx.stage.Stage;\nimport javafx.util.Duration;\n\npublic class SingleLabelAppWithAnimatedGradient extends Application {\n    private static final double GRADIENT_RADIUS = 40;\n    private static final Duration ANIMATION_DURATION = Duration.seconds(10);\n\n    private DoubleProperty offset = new SimpleDoubleProperty(-GRADIENT_RADIUS);\n\n    @Override\n    public void start(Stage stage) {\n        Pane pane = new Pane(\n                new CustomLabel(&quot;hello, world&quot;)\n        );\n\n        animateBackground(pane);\n\n        stage.setScene(new Scene(pane));\n        stage.show();\n    }\n\n    private void animateBackground(Pane pane) {\n        offset.addListener(o -&gt; refreshBackground(pane));\n\n        Timeline gradientAnimator = new Timeline(\n                new KeyFrame(\n                        Duration.seconds(0),\n                        new KeyValue(\n                                offset,\n                                - GRADIENT_RADIUS\n                        )\n                ),\n                new KeyFrame(\n                        ANIMATION_DURATION,\n                        new KeyValue(\n                                offset,\n                                GRADIENT_RADIUS + CustomLabel.LABEL_WIDTH\n                        )\n                )\n        );\n        gradientAnimator.setCycleCount(Animation.INDEFINITE);\n\n        gradientAnimator.play();\n    }\n\n    private void refreshBackground(Pane pane) {\n        pane.setBackground(\n                Background.fill(\n                        createGradient(\n                                offset.get()\n                        )\n                )\n        );\n    }\n\n    private static RadialGradient createGradient(double offset) {\n        RadialGradient gradient = new RadialGradient(\n                30,\n                .2,\n                offset,\n                GRADIENT_RADIUS / 2,\n                GRADIENT_RADIUS,\n                false,\n                CycleMethod.NO_CYCLE,\n                new Stop(0, Color.SKYBLUE),\n                new Stop(GRADIENT_RADIUS, Color.PINK)\n        );\n\n        return gradient;\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<hr />\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Group;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\npublic class ManyLabelApp extends Application {\n    private static final int NUM_LABELS = 1_000;\n\n    @Override\n    public void start(Stage stage) {\n        Group lotsaLabels = new Group();\n\n        for (int i = 0; i &lt; NUM_LABELS; i++) {\n            CustomLabel customLabel = new CustomLabel(\n                    &quot;Item %06d&quot;.formatted(i)\n            );\n            lotsaLabels.getChildren().add(customLabel);\n\n            customLabel.setLayoutY(i * CustomLabel.LABEL_HEIGHT);\n        }\n\n        stage.setScene(new Scene(lotsaLabels));\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<hr />\n<pre><code>import javafx.application.Application;\nimport javafx.collections.FXCollections;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ListCell;\nimport javafx.scene.control.ListView;\nimport javafx.stage.Stage;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class LabelListAppWithCreatedNodes extends Application {\n    private static final int NUM_LABELS = 1_000;\n\n    @Override\n    public void start(Stage stage) {\n        List&lt;String&gt; labelStrings = new ArrayList&lt;&gt;(NUM_LABELS);\n        for (int i = 0; i &lt; NUM_LABELS; i++) {\n            labelStrings.add(&quot;Item %06d&quot;.formatted(i));\n        }\n\n        ListView&lt;String&gt; labelListView = new ListView&lt;&gt;(\n                FXCollections.observableList(labelStrings)\n        );\n        labelListView.setCellFactory(param -&gt; new ListCell&lt;&gt;() {\n            @Override\n            protected void updateItem(String item, boolean empty) {\n                super.updateItem(item, empty);\n\n                if (item == null || empty) {\n                    setGraphic(null);\n                    return;\n                }\n\n                setGraphic(new CustomLabel(item)); // &lt;- not good.\n            }\n        });\n\n        stage.setScene(new Scene(labelListView));\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<hr />\n<pre><code>import javafx.scene.Group;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.LineTo;\nimport javafx.scene.shape.MoveTo;\nimport javafx.scene.shape.Path;\nimport javafx.scene.shape.Rectangle;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\n\npublic class ChangeableCustomLabel extends Group {\n    public static final double\n            LABEL_WIDTH = 200,\n            LABEL_HEIGHT = 60;\n\n    private static final double\n            FONT_SIZE = 15,\n            TEXT_BASELINE_LEFT_X = 15,\n            TEXT_BASELINE_LEFT_Y = 15,\n            BORDER_INSETS = 9,\n            BORDER_WIDTH = 2;\n\n    private static final Font font = Font.font(\n            &quot;monospace&quot;,\n            FontWeight.BOLD,\n            FONT_SIZE\n    );\n\n    private final Text text = new Text();\n    private final Path border = new Path();\n    private final MoveTo textSkipper = new MoveTo();\n\n    private static int numCreated = 0;\n\n    public ChangeableCustomLabel(String labelText) {\n        initText(\n                labelText\n        );\n        final double textWidth = calculateTextWidth();\n\n        initBorder(\n                textWidth\n        );\n\n        Rectangle background = new Rectangle(\n                LABEL_WIDTH,\n                LABEL_HEIGHT\n        );\n        background.setFill(Color.TRANSPARENT);\n\n        getChildren().addAll(\n                background,\n                border,\n                text\n        );\n\n        System.out.println(&quot;Num custom labels created: &quot; + ++numCreated);\n    }\n\n    public void setLabelText(String labelText) {\n        text.setText(&quot; &quot; + labelText + &quot; &quot;);\n        textSkipper.setX(TEXT_BASELINE_LEFT_X + calculateTextWidth());\n    }\n\n    private void initBorder(double textWidth) {\n        textSkipper.setX(TEXT_BASELINE_LEFT_X + textWidth);\n        textSkipper.setY(BORDER_INSETS);\n\n        border.getElements().addAll(\n                new MoveTo(BORDER_INSETS, BORDER_INSETS),\n                new LineTo(TEXT_BASELINE_LEFT_X, BORDER_INSETS),\n                textSkipper,\n                new LineTo(LABEL_WIDTH - BORDER_INSETS, BORDER_INSETS),\n                new LineTo(LABEL_WIDTH - BORDER_INSETS, LABEL_HEIGHT - BORDER_INSETS),\n                new LineTo(BORDER_INSETS, LABEL_HEIGHT - BORDER_INSETS),\n                new LineTo(BORDER_INSETS, BORDER_INSETS)\n        );\n        border.setStrokeWidth(BORDER_WIDTH);\n    }\n\n    private void initText(String labelText) {\n        text.setX(TEXT_BASELINE_LEFT_X);\n        text.setY(TEXT_BASELINE_LEFT_Y);\n        text.setText(labelText);\n        text.setFont(font);\n    }\n\n    private double calculateTextWidth() {\n        return text.getLayoutBounds().getWidth();\n    }\n}\n</code></pre>\n<hr />\n<pre><code>import javafx.application.Application;\nimport javafx.collections.FXCollections;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ListCell;\nimport javafx.scene.control.ListView;\nimport javafx.stage.Stage;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class LabelListAppWithCachedNodes extends Application {\n    private static final int NUM_LABELS = 100_000;\n\n    @Override\n    public void start(Stage stage) {\n        List&lt;String&gt; labelStrings = new ArrayList&lt;&gt;(NUM_LABELS);\n        for (int i = 0; i &lt; NUM_LABELS; i++) {\n            labelStrings.add(&quot;Item %06d&quot;.formatted(i));\n        }\n\n        ListView&lt;String&gt; labelListView = new ListView&lt;&gt;(\n                FXCollections.observableList(labelStrings)\n        );\n        labelListView.setCellFactory(param -&gt; new ListCell&lt;&gt;() {\n            final ChangeableCustomLabel changeableCustomLabel = new ChangeableCustomLabel(\n                    &quot;&quot;\n            );\n\n            @Override\n            protected void updateItem(String item, boolean empty) {\n                super.updateItem(item, empty);\n\n                if (item == null || empty) {\n                    setGraphic(null);\n                    return;\n                }\n\n                changeableCustomLabel.setLabelText(item);\n                setGraphic(changeableCustomLabel);\n            }\n        });\n\n        stage.setScene(new Scene(labelListView));\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7717111,"reputation":8764,"user_id":5844477,"display_name":"Sai Dandem"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1690362662,"creation_date":1690346815,"answer_id":76768103,"question_id":76750473,"body_markdown":"+1 for @jewelsea approach.\r\nMore or less I do also have a similar approach to build the border dynamically using Path (including corner radius). I also have other two approaches, one using `inverse clipping` technique and the other using `border segments` technique. \r\n\r\nI included all three approaches in the below demo. You can choose or ignore. But my main intension to provide a direction if someone is interested with this.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Node;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.layout.*;\r\n    import javafx.scene.shape.*;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class TitledBorderDemo extends Application {\r\n        String sampleText = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&quot;;\r\n    \r\n        @Override\r\n        public void start(final Stage stage) throws Exception {\r\n            VBox root = new VBox(20);\r\n            root.setStyle(&quot;-fx-background-color:linear-gradient(to bottom, pink, yellow);&quot;);\r\n            root.setAlignment(Pos.CENTER);\r\n            root.setPadding(new Insets(15));\r\n    \r\n            buildWithPath(root);\r\n            buildWithClip(root);\r\n            buildWithStyle(root);\r\n    \r\n            Scene scene = new Scene(root, 600, 600);\r\n            scene.getStylesheets().add(getClass().getResource(&quot;titledborder.css&quot;).toExternalForm());\r\n            stage.setScene(scene);\r\n            stage.setTitle(&quot;Titled Border Demo&quot;);\r\n            stage.show();\r\n        }\r\n    \r\n        private void buildWithPath(VBox root) {\r\n            Label content = new Label();\r\n            content.setWrapText(true);\r\n            content.setText(sampleText);\r\n    \r\n            TitledBorderWithPath pane = new TitledBorderWithPath();\r\n            pane.setTitle(&quot;With Path Approach&quot;);\r\n            pane.setContent(content);\r\n            root.getChildren().add(pane);\r\n        }\r\n    \r\n        private void buildWithClip(VBox root) {\r\n            Label content = new Label();\r\n            content.setWrapText(true);\r\n            content.setText(sampleText);\r\n    \r\n            TitledBorderWithClip pane = new TitledBorderWithClip();\r\n            pane.setTitle(&quot;With Clip Approach&quot;);\r\n            pane.setContent(content);\r\n            root.getChildren().add(pane);\r\n        }\r\n    \r\n        private void buildWithStyle(VBox root) {\r\n            Label content = new Label();\r\n            content.setWrapText(true);\r\n            content.setText(sampleText);\r\n    \r\n            TitledBorderWithSegment pane = new TitledBorderWithSegment();\r\n            pane.setTitle(&quot;With Segment Approach&quot;);\r\n            pane.setContent(content);\r\n            root.getChildren().add(pane);\r\n        }\r\n    \r\n        /**\r\n         * Approach by using border segment.\r\n         */\r\n        class TitledBorderWithSegment extends StackPane {\r\n            private final Label titleLabel = new Label();\r\n    \r\n            public TitledBorderWithSegment() {\r\n                getStyleClass().add(&quot;titled-border-segment&quot;);\r\n                titleLabel.getStyleClass().add(&quot;title-label&quot;);\r\n                getChildren().addAll(titleLabel);\r\n                // Position the title label on the top border\r\n                titleLabel.translateYProperty().bind(titleLabel.heightProperty().divide(2).add(titleLabel.layoutYProperty()).multiply(-1));\r\n    \r\n                titleLabel.needsLayoutProperty().addListener((obs, old, needsLayout) -&gt; {\r\n                    if (!needsLayout) {\r\n                        buildStyle();\r\n                    }\r\n                });\r\n    \r\n                widthProperty().addListener(p -&gt; buildStyle());\r\n                heightProperty().addListener(p -&gt; buildStyle());\r\n            }\r\n    \r\n            private void buildStyle() {\r\n                double buffer = 8;\r\n                double r = getBorder().getStrokes().get(0).getRadii().getTopLeftHorizontalRadius();\r\n                double arcLength = Math.round(Math.toRadians(90) * r);\r\n                double w = getWidth();\r\n                double h = getHeight();\r\n                double titleX = titleLabel.getLayoutX() + titleLabel.getTranslateX();\r\n                double titleLength = titleLabel.getWidth();\r\n                double t = (h - (2 * r)) +\r\n                        arcLength +\r\n                        (w - (2 * r)) +\r\n                        arcLength +\r\n                        (h - (2 * r)) +\r\n                        arcLength +\r\n                        (w - titleX - titleLength - r) - buffer;\r\n    \r\n                setStyle(&quot;-fx-border-style: segments(&quot; + t + &quot;, &quot; + titleLength + &quot;) line-cap round;&quot;);\r\n            }\r\n    \r\n            public void setTitle(final String title) {\r\n                this.titleLabel.setText(title);\r\n            }\r\n    \r\n            public void setContent(Node node) {\r\n                getChildren().clear();\r\n                getChildren().addAll(titleLabel, node);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Approach by using Path.\r\n         */\r\n        class TitledBorderWithPath extends StackPane {\r\n            private final Path border = new Path();\r\n            private final StackPane container = new StackPane();\r\n            private final Label titleLabel = new Label();\r\n    \r\n            // Can configure this as a CSS styleable property.\r\n            private final double borderRadius = 8;\r\n    \r\n            public TitledBorderWithPath() {\r\n                getStyleClass().add(&quot;titled-border-path&quot;);\r\n                getChildren().addAll(border, container);\r\n    \r\n                border.getStyleClass().add(&quot;border&quot;);\r\n                border.setManaged(false);\r\n    \r\n                titleLabel.getStyleClass().add(&quot;title-label&quot;);\r\n                // Position the title label on the top border\r\n                titleLabel.translateYProperty().bind(titleLabel.heightProperty().divide(2).add(titleLabel.layoutYProperty()).multiply(-1));\r\n                titleLabel.needsLayoutProperty().addListener((obs, old, needsLayout) -&gt; {\r\n                    if (!needsLayout) {\r\n                        drawBorder();\r\n                    }\r\n                });\r\n    \r\n                container.getStyleClass().add(&quot;container&quot;);\r\n                container.widthProperty().addListener(p -&gt; drawBorder());\r\n                container.heightProperty().addListener(p -&gt; drawBorder());\r\n            }\r\n    \r\n            private void drawBorder() {\r\n                double w = container.getWidth();\r\n                double h = container.getHeight();\r\n                double r = borderRadius;\r\n                double x = titleLabel.getLayoutX() + titleLabel.getTranslateX();\r\n    \r\n                border.getElements().clear();\r\n                border.getElements().addAll(new MoveTo(x, 0),\r\n                        new LineTo(r, 0),\r\n                        arc(0, r), // Top left\r\n                        new LineTo(0, h - r),\r\n                        arc(r, h),  // Bottom left\r\n                        new LineTo(w - r, h),\r\n                        arc(w, h - r), // Bottom right\r\n                        new LineTo(w, r),\r\n                        arc(w - r, 0), // Top right\r\n                        new LineTo(x + titleLabel.getWidth(), 0));\r\n            }\r\n    \r\n            private ArcTo arc(double x, double y) {\r\n                return new ArcTo(borderRadius, borderRadius, 0, x, y, false, false);\r\n            }\r\n    \r\n            public void setTitle(final String title) {\r\n                this.titleLabel.setText(title);\r\n            }\r\n    \r\n            public void setContent(Node node) {\r\n                container.getChildren().clear();\r\n                container.getChildren().addAll(titleLabel, node);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Approach by using clipping.\r\n         */\r\n        class TitledBorderWithClip extends StackPane {\r\n            private Label titleLabel;\r\n    \r\n            final Rectangle clip = new Rectangle();\r\n            final Rectangle inverse = new Rectangle();\r\n    \r\n            final Pane border = new Pane();\r\n            final StackPane container = new StackPane();\r\n    \r\n            public TitledBorderWithClip() {\r\n                getStyleClass().add(&quot;titled-border-clip&quot;);\r\n                titleLabel = new Label();\r\n                titleLabel.getStyleClass().add(&quot;title-label&quot;);\r\n    \r\n                container.getChildren().add(titleLabel);\r\n                container.getStyleClass().add(&quot;container&quot;);\r\n    \r\n                border.getStyleClass().add(&quot;border&quot;);\r\n    \r\n                getChildren().addAll(border, container);\r\n    \r\n    \r\n                border.widthProperty().addListener(p -&gt; setInverseClip(border, clip));\r\n                border.heightProperty().addListener(p -&gt; setInverseClip(border, clip));\r\n    \r\n                // Position the title label on the top border\r\n                titleLabel.translateYProperty().bind(titleLabel.heightProperty().divide(2).add(titleLabel.layoutYProperty()).multiply(-1));\r\n                titleLabel.needsLayoutProperty().addListener((obs, old, needsLayout) -&gt; {\r\n                    if (!needsLayout) {\r\n                        setInverseClip(border, clip);\r\n                    }\r\n                });\r\n            }\r\n    \r\n            public void setTitle(final String title) {\r\n                this.titleLabel.setText(title);\r\n            }\r\n    \r\n            public void setContent(Node node) {\r\n                container.getChildren().clear();\r\n                container.getChildren().addAll(titleLabel, node);\r\n            }\r\n    \r\n            private void setInverseClip(final Pane node, final Rectangle clip) {\r\n                clip.setWidth(titleLabel.getWidth());\r\n                clip.setHeight(titleLabel.getHeight());\r\n                clip.setX(titleLabel.getLayoutX() + titleLabel.getTranslateX());\r\n                clip.setY(titleLabel.getLayoutY() + titleLabel.getTranslateY());\r\n    \r\n                inverse.setWidth(node.getWidth());\r\n                inverse.setHeight(node.getHeight());\r\n                node.setClip(Shape.subtract(inverse, clip));\r\n            }\r\n        }\r\n    }\r\n\r\n*titledborder.css*\r\n\r\n    .title-label{\r\n        -fx-padding: 0px 5px 0px 5px;\r\n        -fx-font-weight: bold;\r\n        -fx-font-size: 14px;\r\n        -fx-translate-x: 5px; /* To adjust the title placement horizontally */\r\n    }\r\n    \r\n    /* With Clip Approach */\r\n    .titled-border-clip {\r\n        -fx-alignment: TOP_LEFT;\r\n    }\r\n    \r\n    .titled-border-clip &gt; .container{\r\n        -fx-padding:10px 5px 5px 5px;\r\n        -fx-alignment: TOP_LEFT;\r\n    }\r\n    \r\n    .titled-border-clip &gt; .border{\r\n        -fx-border-color:red;\r\n        -fx-border-width: 2px;\r\n        -fx-border-radius: 5px;\r\n    }\r\n    \r\n    /* With Path Approach */\r\n    .titled-border-path {\r\n        -fx-alignment: TOP_LEFT;\r\n    }\r\n    \r\n    .titled-border-path &gt; .container{\r\n        -fx-padding:10px 5px 5px 5px;\r\n        -fx-alignment: TOP_LEFT;\r\n    }\r\n    \r\n    .titled-border-path &gt; .border{\r\n        -fx-stroke:red;\r\n        -fx-stroke-width:2px;\r\n    }\r\n    \r\n    /* With Simple Approach */\r\n    .titled-border-simple{\r\n        -fx-background-color:inherit;\r\n        -fx-border-color:red;\r\n        -fx-border-width: 2px;\r\n        -fx-border-radius: 5px;\r\n        -fx-padding:10px 5px 5px 5px;\r\n        -fx-alignment: TOP_LEFT;\r\n    }\r\n    \r\n    .titled-border-simple &gt; .title-label{\r\n        -fx-background-color:inherit;\r\n        -fx-border-color:inherit;\r\n        -fx-border-width:inherit;\r\n        -fx-border-radius:inherit;\r\n    }\r\n    \r\n    /* With Segment Approach */\r\n    .titled-border-segment{\r\n        -fx-border-color:red;\r\n        -fx-border-width: 2px;\r\n        -fx-border-radius: 10px;\r\n        -fx-padding:10px 5px 5px 5px;\r\n        -fx-alignment: TOP_LEFT;\r\n    }\r\n\r\n**For Simple layouts** \r\n\r\nOk, the above approaches may be an overkill for the layouts which **doesn&#39;t** have a dynamic background (like gradients, images.. etc). For simple layouts, as @Slaw mentioned in the first comment, setting `-fx-background-color: inherit;` on both the parent and label should do the trick.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n    class SimpleTitledBorder extends StackPane {\r\n            private final Label titleLabel = new Label();\r\n    \r\n            public SimpleTitledBorder() {\r\n                getStyleClass().add(&quot;titled-border-simple&quot;);\r\n                titleLabel.getStyleClass().add(&quot;title-label&quot;);\r\n                getChildren().addAll(titleLabel);\r\n                // Position the title label on the top border\r\n                titleLabel.translateYProperty().bind(titleLabel.heightProperty().divide(2).add(titleLabel.layoutYProperty()).multiply(-1));\r\n            }\r\n            public void setTitle(final String title) {\r\n                this.titleLabel.setText(title);\r\n            }\r\n    \r\n            public void setContent(Node node) {\r\n                getChildren().clear();\r\n                getChildren().addAll(titleLabel, node);\r\n            }\r\n        }\r\n\r\nCSS Code:\r\n\r\n    /* With Simple Approach */\r\n    .title-label{\r\n        -fx-padding: 0px 5px 0px 5px;\r\n        -fx-font-weight: bold;\r\n        -fx-font-size: 14px;\r\n        -fx-translate-x: 5px; /* To adjust the title placement horizontally */\r\n    }\r\n    .titled-border-simple{\r\n        -fx-background-color:inherit;\r\n        -fx-border-color:red;\r\n        -fx-border-width: 2px;\r\n        -fx-border-radius: 5px;\r\n        -fx-padding:10px 5px 5px 5px;\r\n        -fx-alignment: TOP_LEFT;\r\n    }\r\n    \r\n    .titled-border-simple &gt; .title-label{\r\n        -fx-background-color:inherit;\r\n    }\r\n\r\nAnd inheriting the border properties to label, gives another look to the layout :)\r\n\r\n[![enter image description here][3]][3]\r\n\r\n    .titled-border-simple &gt; .title-label{\r\n        -fx-background-color:inherit;\r\n        -fx-border-color:inherit;\r\n        -fx-border-width:inherit;\r\n        -fx-border-radius:inherit;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SnY6u.gif\r\n  [2]: https://i.stack.imgur.com/8TZfk.gif\r\n  [3]: https://i.stack.imgur.com/lqt97.png","title":"JavaFX make a node overlay parent node border color","body":"<p>+1 for @jewelsea approach.\nMore or less I do also have a similar approach to build the border dynamically using Path (including corner radius). I also have other two approaches, one using <code>inverse clipping</code> technique and the other using <code>border segments</code> technique.</p>\n<p>I included all three approaches in the below demo. You can choose or ignore. But my main intension to provide a direction if someone is interested with this.</p>\n<p><a href=\"https://i.stack.imgur.com/SnY6u.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SnY6u.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.layout.*;\nimport javafx.scene.shape.*;\nimport javafx.stage.Stage;\n\npublic class TitledBorderDemo extends Application {\n    String sampleText = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&quot;;\n\n    @Override\n    public void start(final Stage stage) throws Exception {\n        VBox root = new VBox(20);\n        root.setStyle(&quot;-fx-background-color:linear-gradient(to bottom, pink, yellow);&quot;);\n        root.setAlignment(Pos.CENTER);\n        root.setPadding(new Insets(15));\n\n        buildWithPath(root);\n        buildWithClip(root);\n        buildWithStyle(root);\n\n        Scene scene = new Scene(root, 600, 600);\n        scene.getStylesheets().add(getClass().getResource(&quot;titledborder.css&quot;).toExternalForm());\n        stage.setScene(scene);\n        stage.setTitle(&quot;Titled Border Demo&quot;);\n        stage.show();\n    }\n\n    private void buildWithPath(VBox root) {\n        Label content = new Label();\n        content.setWrapText(true);\n        content.setText(sampleText);\n\n        TitledBorderWithPath pane = new TitledBorderWithPath();\n        pane.setTitle(&quot;With Path Approach&quot;);\n        pane.setContent(content);\n        root.getChildren().add(pane);\n    }\n\n    private void buildWithClip(VBox root) {\n        Label content = new Label();\n        content.setWrapText(true);\n        content.setText(sampleText);\n\n        TitledBorderWithClip pane = new TitledBorderWithClip();\n        pane.setTitle(&quot;With Clip Approach&quot;);\n        pane.setContent(content);\n        root.getChildren().add(pane);\n    }\n\n    private void buildWithStyle(VBox root) {\n        Label content = new Label();\n        content.setWrapText(true);\n        content.setText(sampleText);\n\n        TitledBorderWithSegment pane = new TitledBorderWithSegment();\n        pane.setTitle(&quot;With Segment Approach&quot;);\n        pane.setContent(content);\n        root.getChildren().add(pane);\n    }\n\n    /**\n     * Approach by using border segment.\n     */\n    class TitledBorderWithSegment extends StackPane {\n        private final Label titleLabel = new Label();\n\n        public TitledBorderWithSegment() {\n            getStyleClass().add(&quot;titled-border-segment&quot;);\n            titleLabel.getStyleClass().add(&quot;title-label&quot;);\n            getChildren().addAll(titleLabel);\n            // Position the title label on the top border\n            titleLabel.translateYProperty().bind(titleLabel.heightProperty().divide(2).add(titleLabel.layoutYProperty()).multiply(-1));\n\n            titleLabel.needsLayoutProperty().addListener((obs, old, needsLayout) -&gt; {\n                if (!needsLayout) {\n                    buildStyle();\n                }\n            });\n\n            widthProperty().addListener(p -&gt; buildStyle());\n            heightProperty().addListener(p -&gt; buildStyle());\n        }\n\n        private void buildStyle() {\n            double buffer = 8;\n            double r = getBorder().getStrokes().get(0).getRadii().getTopLeftHorizontalRadius();\n            double arcLength = Math.round(Math.toRadians(90) * r);\n            double w = getWidth();\n            double h = getHeight();\n            double titleX = titleLabel.getLayoutX() + titleLabel.getTranslateX();\n            double titleLength = titleLabel.getWidth();\n            double t = (h - (2 * r)) +\n                    arcLength +\n                    (w - (2 * r)) +\n                    arcLength +\n                    (h - (2 * r)) +\n                    arcLength +\n                    (w - titleX - titleLength - r) - buffer;\n\n            setStyle(&quot;-fx-border-style: segments(&quot; + t + &quot;, &quot; + titleLength + &quot;) line-cap round;&quot;);\n        }\n\n        public void setTitle(final String title) {\n            this.titleLabel.setText(title);\n        }\n\n        public void setContent(Node node) {\n            getChildren().clear();\n            getChildren().addAll(titleLabel, node);\n        }\n    }\n\n    /**\n     * Approach by using Path.\n     */\n    class TitledBorderWithPath extends StackPane {\n        private final Path border = new Path();\n        private final StackPane container = new StackPane();\n        private final Label titleLabel = new Label();\n\n        // Can configure this as a CSS styleable property.\n        private final double borderRadius = 8;\n\n        public TitledBorderWithPath() {\n            getStyleClass().add(&quot;titled-border-path&quot;);\n            getChildren().addAll(border, container);\n\n            border.getStyleClass().add(&quot;border&quot;);\n            border.setManaged(false);\n\n            titleLabel.getStyleClass().add(&quot;title-label&quot;);\n            // Position the title label on the top border\n            titleLabel.translateYProperty().bind(titleLabel.heightProperty().divide(2).add(titleLabel.layoutYProperty()).multiply(-1));\n            titleLabel.needsLayoutProperty().addListener((obs, old, needsLayout) -&gt; {\n                if (!needsLayout) {\n                    drawBorder();\n                }\n            });\n\n            container.getStyleClass().add(&quot;container&quot;);\n            container.widthProperty().addListener(p -&gt; drawBorder());\n            container.heightProperty().addListener(p -&gt; drawBorder());\n        }\n\n        private void drawBorder() {\n            double w = container.getWidth();\n            double h = container.getHeight();\n            double r = borderRadius;\n            double x = titleLabel.getLayoutX() + titleLabel.getTranslateX();\n\n            border.getElements().clear();\n            border.getElements().addAll(new MoveTo(x, 0),\n                    new LineTo(r, 0),\n                    arc(0, r), // Top left\n                    new LineTo(0, h - r),\n                    arc(r, h),  // Bottom left\n                    new LineTo(w - r, h),\n                    arc(w, h - r), // Bottom right\n                    new LineTo(w, r),\n                    arc(w - r, 0), // Top right\n                    new LineTo(x + titleLabel.getWidth(), 0));\n        }\n\n        private ArcTo arc(double x, double y) {\n            return new ArcTo(borderRadius, borderRadius, 0, x, y, false, false);\n        }\n\n        public void setTitle(final String title) {\n            this.titleLabel.setText(title);\n        }\n\n        public void setContent(Node node) {\n            container.getChildren().clear();\n            container.getChildren().addAll(titleLabel, node);\n        }\n    }\n\n    /**\n     * Approach by using clipping.\n     */\n    class TitledBorderWithClip extends StackPane {\n        private Label titleLabel;\n\n        final Rectangle clip = new Rectangle();\n        final Rectangle inverse = new Rectangle();\n\n        final Pane border = new Pane();\n        final StackPane container = new StackPane();\n\n        public TitledBorderWithClip() {\n            getStyleClass().add(&quot;titled-border-clip&quot;);\n            titleLabel = new Label();\n            titleLabel.getStyleClass().add(&quot;title-label&quot;);\n\n            container.getChildren().add(titleLabel);\n            container.getStyleClass().add(&quot;container&quot;);\n\n            border.getStyleClass().add(&quot;border&quot;);\n\n            getChildren().addAll(border, container);\n\n\n            border.widthProperty().addListener(p -&gt; setInverseClip(border, clip));\n            border.heightProperty().addListener(p -&gt; setInverseClip(border, clip));\n\n            // Position the title label on the top border\n            titleLabel.translateYProperty().bind(titleLabel.heightProperty().divide(2).add(titleLabel.layoutYProperty()).multiply(-1));\n            titleLabel.needsLayoutProperty().addListener((obs, old, needsLayout) -&gt; {\n                if (!needsLayout) {\n                    setInverseClip(border, clip);\n                }\n            });\n        }\n\n        public void setTitle(final String title) {\n            this.titleLabel.setText(title);\n        }\n\n        public void setContent(Node node) {\n            container.getChildren().clear();\n            container.getChildren().addAll(titleLabel, node);\n        }\n\n        private void setInverseClip(final Pane node, final Rectangle clip) {\n            clip.setWidth(titleLabel.getWidth());\n            clip.setHeight(titleLabel.getHeight());\n            clip.setX(titleLabel.getLayoutX() + titleLabel.getTranslateX());\n            clip.setY(titleLabel.getLayoutY() + titleLabel.getTranslateY());\n\n            inverse.setWidth(node.getWidth());\n            inverse.setHeight(node.getHeight());\n            node.setClip(Shape.subtract(inverse, clip));\n        }\n    }\n}\n</code></pre>\n<p><em>titledborder.css</em></p>\n<pre><code>.title-label{\n    -fx-padding: 0px 5px 0px 5px;\n    -fx-font-weight: bold;\n    -fx-font-size: 14px;\n    -fx-translate-x: 5px; /* To adjust the title placement horizontally */\n}\n\n/* With Clip Approach */\n.titled-border-clip {\n    -fx-alignment: TOP_LEFT;\n}\n\n.titled-border-clip &gt; .container{\n    -fx-padding:10px 5px 5px 5px;\n    -fx-alignment: TOP_LEFT;\n}\n\n.titled-border-clip &gt; .border{\n    -fx-border-color:red;\n    -fx-border-width: 2px;\n    -fx-border-radius: 5px;\n}\n\n/* With Path Approach */\n.titled-border-path {\n    -fx-alignment: TOP_LEFT;\n}\n\n.titled-border-path &gt; .container{\n    -fx-padding:10px 5px 5px 5px;\n    -fx-alignment: TOP_LEFT;\n}\n\n.titled-border-path &gt; .border{\n    -fx-stroke:red;\n    -fx-stroke-width:2px;\n}\n\n/* With Simple Approach */\n.titled-border-simple{\n    -fx-background-color:inherit;\n    -fx-border-color:red;\n    -fx-border-width: 2px;\n    -fx-border-radius: 5px;\n    -fx-padding:10px 5px 5px 5px;\n    -fx-alignment: TOP_LEFT;\n}\n\n.titled-border-simple &gt; .title-label{\n    -fx-background-color:inherit;\n    -fx-border-color:inherit;\n    -fx-border-width:inherit;\n    -fx-border-radius:inherit;\n}\n\n/* With Segment Approach */\n.titled-border-segment{\n    -fx-border-color:red;\n    -fx-border-width: 2px;\n    -fx-border-radius: 10px;\n    -fx-padding:10px 5px 5px 5px;\n    -fx-alignment: TOP_LEFT;\n}\n</code></pre>\n<p><strong>For Simple layouts</strong></p>\n<p>Ok, the above approaches may be an overkill for the layouts which <strong>doesn't</strong> have a dynamic background (like gradients, images.. etc). For simple layouts, as @Slaw mentioned in the first comment, setting <code>-fx-background-color: inherit;</code> on both the parent and label should do the trick.</p>\n<p><a href=\"https://i.stack.imgur.com/8TZfk.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8TZfk.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>class SimpleTitledBorder extends StackPane {\n        private final Label titleLabel = new Label();\n\n        public SimpleTitledBorder() {\n            getStyleClass().add(&quot;titled-border-simple&quot;);\n            titleLabel.getStyleClass().add(&quot;title-label&quot;);\n            getChildren().addAll(titleLabel);\n            // Position the title label on the top border\n            titleLabel.translateYProperty().bind(titleLabel.heightProperty().divide(2).add(titleLabel.layoutYProperty()).multiply(-1));\n        }\n        public void setTitle(final String title) {\n            this.titleLabel.setText(title);\n        }\n\n        public void setContent(Node node) {\n            getChildren().clear();\n            getChildren().addAll(titleLabel, node);\n        }\n    }\n</code></pre>\n<p>CSS Code:</p>\n<pre><code>/* With Simple Approach */\n.title-label{\n    -fx-padding: 0px 5px 0px 5px;\n    -fx-font-weight: bold;\n    -fx-font-size: 14px;\n    -fx-translate-x: 5px; /* To adjust the title placement horizontally */\n}\n.titled-border-simple{\n    -fx-background-color:inherit;\n    -fx-border-color:red;\n    -fx-border-width: 2px;\n    -fx-border-radius: 5px;\n    -fx-padding:10px 5px 5px 5px;\n    -fx-alignment: TOP_LEFT;\n}\n\n.titled-border-simple &gt; .title-label{\n    -fx-background-color:inherit;\n}\n</code></pre>\n<p>And inheriting the border properties to label, gives another look to the layout :)</p>\n<p><a href=\"https://i.stack.imgur.com/lqt97.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lqt97.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>.titled-border-simple &gt; .title-label{\n    -fx-background-color:inherit;\n    -fx-border-color:inherit;\n    -fx-border-width:inherit;\n    -fx-border-radius:inherit;\n}\n</code></pre>\n"}],"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"comment_count":31,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76768103,"answer_count":2,"score":2,"last_activity_date":1690362662,"creation_date":1690149736,"question_id":76750473,"body_markdown":"I have a node which looks like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oVok7.png\r\n\r\nUsing only css, I want the label to overlay its parent border color, so the portion of the border color under the label gets invisible.\r\n\r\nCss code I used to make this border:\r\n\r\n    -fx-border-color: black;\r\n    -fx-border-width: 3;\r\n    -fx-border-radius: 8;\r\n\r\n**Additional info:** \r\n\r\n**1 -&gt;** It&#39;s possible to achieve the same effect by placing -background-color: white to the label, although in my case it&#39;s not a possibility.\r\n\r\n**2 -&gt;** For performance/arch reasons, it&#39;s not possible to achieve this effect through styled BorderPane or TitledPane nodes as suggested in the commends. Hence the importance of only using CSS or at least the less java code as possible.\r\n\r\n","title":"JavaFX make a node overlay parent node border color","body":"<p>I have a node which looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/oVok7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oVok7.png\" alt=\"enter image description here\" /></a></p>\n<p>Using only css, I want the label to overlay its parent border color, so the portion of the border color under the label gets invisible.</p>\n<p>Css code I used to make this border:</p>\n<pre><code>-fx-border-color: black;\n-fx-border-width: 3;\n-fx-border-radius: 8;\n</code></pre>\n<p><strong>Additional info:</strong></p>\n<p><strong>1 -&gt;</strong> It's possible to achieve the same effect by placing -background-color: white to the label, although in my case it's not a possibility.</p>\n<p><strong>2 -&gt;</strong> For performance/arch reasons, it's not possible to achieve this effect through styled BorderPane or TitledPane nodes as suggested in the commends. Hence the importance of only using CSS or at least the less java code as possible.</p>\n"},{"tags":["java","json","jackson","deserialization","record"],"answers":[{"tags":[],"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684165896,"creation_date":1684165896,"answer_id":76255854,"question_id":76255022,"body_markdown":"The value parameter in your `JsonSetter`s needs to match the field name in the JSON. I assume Jackson recognises that the type is a record and is able to call the constructor if the ctor parameter names line up with the JSON field names.\r\n\r\nI.e., f you change the `JsonSetter` annotations like this:\r\n\r\n     public record Doc(String id,\r\n                      @JsonGetter(&quot;content_t&quot;) @JsonSetter(&quot;content_t&quot;) String content,\r\n                      @JsonGetter(&quot;title_t&quot;) @JsonSetter(&quot;title_t&quot;) String title,\r\n                      @JsonGetter(&quot;media_links_txt&quot;) @JsonSetter(&quot;media_links_txt&quot;) List&lt;String&gt; mediaLinks) {\r\n    }\r\n\r\nthen it seems to work, at least it does for me. This can be further simplified by replacing the `JsonGetter`/`JsonSetter` pairs with a single `JsonProperty` annotation:\r\n\r\n    public record Doc(String id,\r\n                      @JsonProperty(&quot;content_t&quot;) String content,\r\n                      @JsonProperty(&quot;title_t&quot;) String title,\r\n                      @JsonProperty(&quot;media_links_txt&quot;) List&lt;String&gt; mediaLinks) {\r\n    }","title":"Jackson deserialization into Record with List runs into SetterlessProperty issue","body":"<p>The value parameter in your <code>JsonSetter</code>s needs to match the field name in the JSON. I assume Jackson recognises that the type is a record and is able to call the constructor if the ctor parameter names line up with the JSON field names.</p>\n<p>I.e., f you change the <code>JsonSetter</code> annotations like this:</p>\n<pre><code> public record Doc(String id,\n                  @JsonGetter(&quot;content_t&quot;) @JsonSetter(&quot;content_t&quot;) String content,\n                  @JsonGetter(&quot;title_t&quot;) @JsonSetter(&quot;title_t&quot;) String title,\n                  @JsonGetter(&quot;media_links_txt&quot;) @JsonSetter(&quot;media_links_txt&quot;) List&lt;String&gt; mediaLinks) {\n}\n</code></pre>\n<p>then it seems to work, at least it does for me. This can be further simplified by replacing the <code>JsonGetter</code>/<code>JsonSetter</code> pairs with a single <code>JsonProperty</code> annotation:</p>\n<pre><code>public record Doc(String id,\n                  @JsonProperty(&quot;content_t&quot;) String content,\n                  @JsonProperty(&quot;title_t&quot;) String title,\n                  @JsonProperty(&quot;media_links_txt&quot;) List&lt;String&gt; mediaLinks) {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9650010,"reputation":11,"user_id":7161459,"display_name":"Cuizhanming"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690362130,"creation_date":1690109111,"answer_id":76747813,"question_id":76255022,"body_markdown":"Configuring this annotation on the record should make it work:\r\n\r\n    @JsonAutoDetect(fieldVisibility = ANY, getterVisibility = ANY, setterVisibility = ANY, creatorVisibility = ANY)","title":"Jackson deserialization into Record with List runs into SetterlessProperty issue","body":"<p>Configuring this annotation on the record should make it work:</p>\n<pre><code>@JsonAutoDetect(fieldVisibility = ANY, getterVisibility = ANY, setterVisibility = ANY, creatorVisibility = ANY)\n</code></pre>\n"}],"owner":{"account_id":9784898,"reputation":95,"user_id":7251522,"display_name":"MarcelTon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":482,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690362130,"creation_date":1684160229,"question_id":76255022,"body_markdown":"**QUESTION**: How do I capture the (optional) List field `media_links_txt` from the received JSON as either null or its actual value with concise/idiomatic modern Java?\r\n\r\nFunctional wishes are:\r\n\r\n - Some properties have explicit `@JsonGetter` and `@JsonSetter` fieldnames since the Record is used both as deserialization target and response model (API clients demand different field names as incoming JSON)\r\n - The `optionalStuff` field is ... well optionally present in deserialization flow\r\n\r\nCode is as follows:\r\n\r\n```\r\nimport com.fasterxml.jackson.annotation.*;\r\nimport org.springframework.lang.NonNull;\r\n\r\nimport java.util.List;\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic record TestResponse(@NonNull Response response) {\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public record Response(@NonNull List&lt;Doc&gt; docs,\r\n                           @NonNull Integer numFound,\r\n                           @NonNull Integer start) {\r\n\r\n        public record Doc(@NonNull String id,\r\n                              @NonNull @JsonGetter(&quot;content_t&quot;) @JsonSetter(&quot;content&quot;) String content,\r\n                              @NonNull @JsonGetter(&quot;title_t&quot;) @JsonSetter(&quot;title&quot;) String title,\r\n                              @JsonGetter(&quot;media_links_txt&quot;) @JsonSetter(&quot;mediaLinks&quot;) List&lt;String&gt; mediaLinks) {\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhen this code receives JSON that looks like this:\r\n```\r\n{\r\n  &quot;response&quot; : {\r\n    &quot;docs&quot; : [ {\r\n      &quot;content_t&quot; : &quot;Test content 1&quot;,\r\n      &quot;title_t&quot; : &quot;Test title 1&quot;,\r\n      &quot;media_links_txt&quot; : [ &quot;d7810883-42de-4280-a286-5bb14e517ce3&quot;, &quot;fa60db0a-0e28-4c9c-8092-4eafe57251cd&quot; ],\r\n      &quot;id&quot; : &quot;54870dc265c855c516bcd0a2f93f2267&quot;\r\n    }, {\r\n      &quot;content_t&quot; : &quot;Test content 2&quot;,\r\n      &quot;title_t&quot; : &quot;Test content 2&quot;,\r\n      &quot;id&quot; : &quot;a4a38aa64427d63aab0c4412eb659586&quot;\r\n    } ],\r\n    &quot;numFound&quot; : 2,\r\n    &quot;start&quot; : 0\r\n}\r\n```\r\n\r\nIt errs with the following message:\r\n`Should never call set() on setterless property` and points towards `media_links_txt`. This confuses me ...\r\n\r\n - Records don&#39;t have setters to begin with so it tries to use the constructor, which I am currently thinking is fine and desired (it can be assigned a `null` value for `mediaLinks` is what I think I have written)\r\n - But it can construct the `docs` field (also a List) without problem?\r\n\r\nSo I tried to trick it with the following code (maybe it required a non-default type)\r\n\r\n\r\n```\r\nimport com.fasterxml.jackson.annotation.*;\r\nimport org.springframework.lang.NonNull;\r\n\r\nimport java.util.List;\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic record TestResponse(@NonNull Response response) {\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public record Response(@NonNull List&lt;Doc&gt; docs,\r\n                           @NonNull Integer numFound,\r\n                           @NonNull Integer start) {\r\n\r\n        public record Doc(@NonNull String id,\r\n                              @NonNull @JsonGetter(&quot;content_t&quot;) @JsonSetter(&quot;content&quot;) String content,\r\n                              @NonNull @JsonGetter(&quot;title_t&quot;) @JsonSetter(&quot;title&quot;) String title,\r\n                              @JsonGetter(&quot;media_links_txt&quot;) @JsonSetter(&quot;mediaLinks&quot;) List&lt;StringClone&gt; mediaLinks) {\r\n\r\n            public record StringClone(@NonNull String mediaLinksRetry) {\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhich throws:\r\n`Cannot construct instance of StringClone (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value (&#39;d7810883-42de-4280-a286-5bb14e517ce3&#39;)`\r\n\r\n - Wait ... there is no String-argument constructor on a String-only Record? I am fairly sure there should be, but I might be missing something and would like to learn so! \r\n\r\n**QUESTION**: How do I capture the (optional) List field `media_links_txt` from the received JSON as either null or its actual value with concise/idiomatic modern Java?\r\n\r\nUsed versions are:\r\n - jackson-databind 2.13.5\r\n - spring framework 5.3.27 (via spring boot starter 2.7.11)\r\n\r\nI think https://github.com/FasterXML/jackson-databind/issues/2692 might describe the issue, but no proper workaround as of yet.","title":"Jackson deserialization into Record with List runs into SetterlessProperty issue","body":"<p><strong>QUESTION</strong>: How do I capture the (optional) List field <code>media_links_txt</code> from the received JSON as either null or its actual value with concise/idiomatic modern Java?</p>\n<p>Functional wishes are:</p>\n<ul>\n<li>Some properties have explicit <code>@JsonGetter</code> and <code>@JsonSetter</code> fieldnames since the Record is used both as deserialization target and response model (API clients demand different field names as incoming JSON)</li>\n<li>The <code>optionalStuff</code> field is ... well optionally present in deserialization flow</li>\n</ul>\n<p>Code is as follows:</p>\n<pre><code>import com.fasterxml.jackson.annotation.*;\nimport org.springframework.lang.NonNull;\n\nimport java.util.List;\n\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic record TestResponse(@NonNull Response response) {\n\n    @JsonIgnoreProperties(ignoreUnknown = true)\n    public record Response(@NonNull List&lt;Doc&gt; docs,\n                           @NonNull Integer numFound,\n                           @NonNull Integer start) {\n\n        public record Doc(@NonNull String id,\n                              @NonNull @JsonGetter(&quot;content_t&quot;) @JsonSetter(&quot;content&quot;) String content,\n                              @NonNull @JsonGetter(&quot;title_t&quot;) @JsonSetter(&quot;title&quot;) String title,\n                              @JsonGetter(&quot;media_links_txt&quot;) @JsonSetter(&quot;mediaLinks&quot;) List&lt;String&gt; mediaLinks) {\n        }\n    }\n}\n</code></pre>\n<p>When this code receives JSON that looks like this:</p>\n<pre><code>{\n  &quot;response&quot; : {\n    &quot;docs&quot; : [ {\n      &quot;content_t&quot; : &quot;Test content 1&quot;,\n      &quot;title_t&quot; : &quot;Test title 1&quot;,\n      &quot;media_links_txt&quot; : [ &quot;d7810883-42de-4280-a286-5bb14e517ce3&quot;, &quot;fa60db0a-0e28-4c9c-8092-4eafe57251cd&quot; ],\n      &quot;id&quot; : &quot;54870dc265c855c516bcd0a2f93f2267&quot;\n    }, {\n      &quot;content_t&quot; : &quot;Test content 2&quot;,\n      &quot;title_t&quot; : &quot;Test content 2&quot;,\n      &quot;id&quot; : &quot;a4a38aa64427d63aab0c4412eb659586&quot;\n    } ],\n    &quot;numFound&quot; : 2,\n    &quot;start&quot; : 0\n}\n</code></pre>\n<p>It errs with the following message:\n<code>Should never call set() on setterless property</code> and points towards <code>media_links_txt</code>. This confuses me ...</p>\n<ul>\n<li>Records don't have setters to begin with so it tries to use the constructor, which I am currently thinking is fine and desired (it can be assigned a <code>null</code> value for <code>mediaLinks</code> is what I think I have written)</li>\n<li>But it can construct the <code>docs</code> field (also a List) without problem?</li>\n</ul>\n<p>So I tried to trick it with the following code (maybe it required a non-default type)</p>\n<pre><code>import com.fasterxml.jackson.annotation.*;\nimport org.springframework.lang.NonNull;\n\nimport java.util.List;\n\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic record TestResponse(@NonNull Response response) {\n\n    @JsonIgnoreProperties(ignoreUnknown = true)\n    public record Response(@NonNull List&lt;Doc&gt; docs,\n                           @NonNull Integer numFound,\n                           @NonNull Integer start) {\n\n        public record Doc(@NonNull String id,\n                              @NonNull @JsonGetter(&quot;content_t&quot;) @JsonSetter(&quot;content&quot;) String content,\n                              @NonNull @JsonGetter(&quot;title_t&quot;) @JsonSetter(&quot;title&quot;) String title,\n                              @JsonGetter(&quot;media_links_txt&quot;) @JsonSetter(&quot;mediaLinks&quot;) List&lt;StringClone&gt; mediaLinks) {\n\n            public record StringClone(@NonNull String mediaLinksRetry) {\n            }\n        }\n    }\n}\n</code></pre>\n<p>Which throws:\n<code>Cannot construct instance of StringClone (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('d7810883-42de-4280-a286-5bb14e517ce3')</code></p>\n<ul>\n<li>Wait ... there is no String-argument constructor on a String-only Record? I am fairly sure there should be, but I might be missing something and would like to learn so!</li>\n</ul>\n<p><strong>QUESTION</strong>: How do I capture the (optional) List field <code>media_links_txt</code> from the received JSON as either null or its actual value with concise/idiomatic modern Java?</p>\n<p>Used versions are:</p>\n<ul>\n<li>jackson-databind 2.13.5</li>\n<li>spring framework 5.3.27 (via spring boot starter 2.7.11)</li>\n</ul>\n<p>I think <a href=\"https://github.com/FasterXML/jackson-databind/issues/2692\" rel=\"nofollow noreferrer\">https://github.com/FasterXML/jackson-databind/issues/2692</a> might describe the issue, but no proper workaround as of yet.</p>\n"},{"tags":["java","memory","types","final"],"comments":[{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":2,"creation_date":1690050119,"post_id":76745215,"comment_id":135300150,"body_markdown":"Yes, different types use different amount of memory: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html","body":"Yes, different types use different amount of memory: <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/nutsandbolts/&hellip;</a>"},{"owner":{"account_id":25830887,"reputation":41,"user_id":19568102,"display_name":"Jan Hrubec"},"score":0,"creation_date":1690105536,"post_id":76745215,"comment_id":135304257,"body_markdown":"@UnholySheep so here I should use byte? Isn&#39;t there any option that would use only half a byte?","body":"@UnholySheep so here I should use byte? Isn&#39;t there any option that would use only half a byte?"},{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":0,"creation_date":1690106603,"post_id":76745215,"comment_id":135304377,"body_markdown":"Not in Java, no. Also that type of thing sounds like a pre-mature optimization (which would quite likely turn into a pessimization, as reading and writing unaligned/non-byte sized integers is not natively supported on many CPU architectures, requiring a lot of extra instructions to be used)","body":"Not in Java, no. Also that type of thing sounds like a pre-mature optimization (which would quite likely turn into a pessimization, as reading and writing unaligned/non-byte sized integers is not natively supported on many CPU architectures, requiring a lot of extra instructions to be used)"},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1690135563,"post_id":76745215,"comment_id":135307884,"body_markdown":"Not even C or assembly let you do that, as the CPU eventually works with (multiples of) bytes. You can cram more than one variable in one e.g. byte and then use bitwise operations to pull out the 0parts you want, but this will make your code much more complicated for no good reason. The only exception is when you talk to certain hardware or network protocols that require certain memory layouts. Also: before trying to optimize, use a profiler. Citing Knuth: Premature optimization is the root of all evil.","body":"Not even C or assembly let you do that, as the CPU eventually works with (multiples of) bytes. You can cram more than one variable in one e.g. byte and then use bitwise operations to pull out the 0parts you want, but this will make your code much more complicated for no good reason. The only exception is when you talk to certain hardware or network protocols that require certain memory layouts. Also: before trying to optimize, use a profiler. Citing Knuth: Premature optimization is the root of all evil."},{"owner":{"account_id":25830887,"reputation":41,"user_id":19568102,"display_name":"Jan Hrubec"},"score":0,"creation_date":1690189936,"post_id":76745215,"comment_id":135313537,"body_markdown":"@UnholySheep so am I understanding this right that any type uses the amount of memory in the documentation and just fills the unused bits with zeroes? So therefore the closer I can get to the actual size of my variable the more memory I&#39;ll save? So here I should use byte instead of int?","body":"@UnholySheep so am I understanding this right that any type uses the amount of memory in the documentation and just fills the unused bits with zeroes? So therefore the closer I can get to the actual size of my variable the more memory I&#39;ll save? So here I should use byte instead of int?"},{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":0,"creation_date":1690190131,"post_id":76745215,"comment_id":135313576,"body_markdown":"Maybe? It depends entirely on how and where you use these variables. And also whether this tiny memory saving actually benefits the code in any way (as mentioned above, you should always be profiling first).","body":"Maybe? It depends entirely on how and where you use these variables. And also whether this tiny memory saving actually benefits the code in any way (as mentioned above, you should always be profiling first)."},{"owner":{"account_id":25830887,"reputation":41,"user_id":19568102,"display_name":"Jan Hrubec"},"score":0,"creation_date":1690190604,"post_id":76745215,"comment_id":135313692,"body_markdown":"@UnholySheep I need to store about a thousand variables in an array so I guess you&#39;re probably right I wouldn&#39;t save all that much space. Thanks for your help.","body":"@UnholySheep I need to store about a thousand variables in an array so I guess you&#39;re probably right I wouldn&#39;t save all that much space. Thanks for your help."},{"owner":{"account_id":25830887,"reputation":41,"user_id":19568102,"display_name":"Jan Hrubec"},"score":0,"creation_date":1690191017,"post_id":76745215,"comment_id":135313796,"body_markdown":"@UnholySheep Also, could you please write your first comment into an answer so I can accept it. And could you also include that the final keyword doesn&#39;t effect anything?","body":"@UnholySheep Also, could you please write your first comment into an answer so I can accept it. And could you also include that the final keyword doesn&#39;t effect anything?"}],"answers":[{"tags":[],"owner":{"account_id":28557723,"reputation":423,"user_id":21861720,"display_name":"Ronit Pandey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690051658,"creation_date":1690051658,"answer_id":76745335,"question_id":76745215,"body_markdown":"Actually you got the wrong impression of the usage of  the final keyword . \r\n\r\nEach data type is allocated a fixed memory when it is declared and this memory is not permanent It is taken back into ram when the variable is no more used hence saving space.This kind of memory is known as stack.\r\n. \r\n\r\nAnd for the final keyword it stops the user from changing the value of the variable . \r\n\r\nWhen a variable is declared with final keywork say : \r\n\r\n    final int i = 0; \r\n    // Then if I try to give this another value say:\r\n    i = 12;\r\n    // I will get an error on line 3 because I am trying to change the \r\n    // value of a final variable which is not legal\r\n\r\nI will get an error it basically converts a variable into a constant value. \r\n\r\nThis types of variables are widely used in the industry for giving the names to specific values or defining an identity variable which is not meant to be changed","title":"Do datatypes influence how much memory is used? Does the final keyword change it?","body":"<p>Actually you got the wrong impression of the usage of  the final keyword .</p>\n<p>Each data type is allocated a fixed memory when it is declared and this memory is not permanent It is taken back into ram when the variable is no more used hence saving space.This kind of memory is known as stack.\n.</p>\n<p>And for the final keyword it stops the user from changing the value of the variable .</p>\n<p>When a variable is declared with final keywork say :</p>\n<pre><code>final int i = 0; \n// Then if I try to give this another value say:\ni = 12;\n// I will get an error on line 3 because I am trying to change the \n// value of a final variable which is not legal\n</code></pre>\n<p>I will get an error it basically converts a variable into a constant value.</p>\n<p>This types of variables are widely used in the industry for giving the names to specific values or defining an identity variable which is not meant to be changed</p>\n"},{"tags":[],"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690199907,"creation_date":1690199907,"answer_id":76754269,"question_id":76745215,"body_markdown":"Primitive data types use different amounts of memory, as explained in e.g.: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\r\n\r\nHowever, having any object in memory take less than 1 byte would not be helpful, since the hardware cannot work with anything smaller than that, therefore it is not supported. (There are ways of storing multiple different values in any single integer by using bit shifting/masking, but that is a different technique)\r\n\r\nIt is also important to note that before trying to optimize such memory use you need to profile first to see whether there would be any benefit to such an optimization.\r\n\r\nThe `final` keyword also has no effect on how large the memory for a variable will be, since those still have to follow the general rules of the language.","title":"Do datatypes influence how much memory is used? Does the final keyword change it?","body":"<p>Primitive data types use different amounts of memory, as explained in e.g.: <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html</a></p>\n<p>However, having any object in memory take less than 1 byte would not be helpful, since the hardware cannot work with anything smaller than that, therefore it is not supported. (There are ways of storing multiple different values in any single integer by using bit shifting/masking, but that is a different technique)</p>\n<p>It is also important to note that before trying to optimize such memory use you need to profile first to see whether there would be any benefit to such an optimization.</p>\n<p>The <code>final</code> keyword also has no effect on how large the memory for a variable will be, since those still have to follow the general rules of the language.</p>\n"},{"tags":[],"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690361982,"creation_date":1690361637,"answer_id":76769518,"question_id":76745215,"body_markdown":"**Limiting the datatype may indeed limit the space needed to store it.** But your example of 5 bits will still occupy at least 8 bits in memory, it will be rounded up. \r\n\r\nAs a variable (constant or not) in an object, **it will probably be zero padded** so that each property starts on an even &quot;word&quot; address. A word is the preferred integer size, typically 64 bits on a desktop computer or smaller for embedded or iot devices. So 5 properties of 1 byte each will occupy 5x64 bits on a 64 bit computer.\r\n\r\nBut **an array of bytes** (byte = 8 bits) will however only allocate one byte per element (and possibly zero pad at the end of the entire array to become an even word size), so here it will definitely matter when it comes to storage size.\r\n\r\n**constants (static final) will occupy less space** because they are only stored once in metaspace, the static class memory. As you instantiate new objects of your class, constant values are not copied to the object space on the heap. Instead, each time the value is read, it&#39;s just read from the class definition in metaspace.\r\n\r\nWhen it comes to performance, **an array of bytes will also occupy less space in caches** (more data will fit) and that will increase performance. If you are working with a GPU, or the CPU (and compiler) supports [SIMD][1] instructions, you can gain a lot of performance using 8, 16 or 32 bits integers on a 64-bit computer.\r\n\r\nSmall constants, like 2147483000 (31 bits), can actually work a bit if luck outperform a bigger number like 8589934000 (33 bits)! But this is not something that you should define your program architecture at all, but seen more as **fun fact**. &#128578; Reason for the possible extra performance is that in can be embedded directly as a constant in some assembler instructions. The entire instruction must fit in 64 bits. This includes the actual instruction, the result register, and the constant. Example [LDR rd, =const][2]. The const will not fit if its 64 bits, but a 31 bit const will!\r\n\r\n\r\n  [1]: https://en.m.wikipedia.org/wiki/Single_instruction,_multiple_data\r\n  [2]: https://developer.arm.com/documentation/dui0204/j/writing-arm-assembly-language/loading-constants-into-registers/loading-with-ldr-rd---const?lang=en","title":"Do datatypes influence how much memory is used? Does the final keyword change it?","body":"<p><strong>Limiting the datatype may indeed limit the space needed to store it.</strong> But your example of 5 bits will still occupy at least 8 bits in memory, it will be rounded up.</p>\n<p>As a variable (constant or not) in an object, <strong>it will probably be zero padded</strong> so that each property starts on an even &quot;word&quot; address. A word is the preferred integer size, typically 64 bits on a desktop computer or smaller for embedded or iot devices. So 5 properties of 1 byte each will occupy 5x64 bits on a 64 bit computer.</p>\n<p>But <strong>an array of bytes</strong> (byte = 8 bits) will however only allocate one byte per element (and possibly zero pad at the end of the entire array to become an even word size), so here it will definitely matter when it comes to storage size.</p>\n<p><strong>constants (static final) will occupy less space</strong> because they are only stored once in metaspace, the static class memory. As you instantiate new objects of your class, constant values are not copied to the object space on the heap. Instead, each time the value is read, it's just read from the class definition in metaspace.</p>\n<p>When it comes to performance, <strong>an array of bytes will also occupy less space in caches</strong> (more data will fit) and that will increase performance. If you are working with a GPU, or the CPU (and compiler) supports <a href=\"https://en.m.wikipedia.org/wiki/Single_instruction,_multiple_data\" rel=\"nofollow noreferrer\">SIMD</a> instructions, you can gain a lot of performance using 8, 16 or 32 bits integers on a 64-bit computer.</p>\n<p>Small constants, like 2147483000 (31 bits), can actually work a bit if luck outperform a bigger number like 8589934000 (33 bits)! But this is not something that you should define your program architecture at all, but seen more as <strong>fun fact</strong>. 🙂 Reason for the possible extra performance is that in can be embedded directly as a constant in some assembler instructions. The entire instruction must fit in 64 bits. This includes the actual instruction, the result register, and the constant. Example <a href=\"https://developer.arm.com/documentation/dui0204/j/writing-arm-assembly-language/loading-constants-into-registers/loading-with-ldr-rd---const?lang=en\" rel=\"nofollow noreferrer\">LDR rd, =const</a>. The const will not fit if its 64 bits, but a 31 bit const will!</p>\n"}],"owner":{"account_id":25830887,"reputation":41,"user_id":19568102,"display_name":"Jan Hrubec"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76769518,"answer_count":3,"score":1,"last_activity_date":1690361982,"creation_date":1690049731,"question_id":76745215,"body_markdown":"I don&#39;t know much about how memory actually works, but I wanted to know if storing the number 28 (5 bits) takes up different amounts of memory when it&#39;s stored as an int, long, short or byte? Does the final keyword limit the memory usage to only the number of bits required?\r\n\r\nI couldn&#39;t think of a way to test this nor did I find anything about this online.","title":"Do datatypes influence how much memory is used? Does the final keyword change it?","body":"<p>I don't know much about how memory actually works, but I wanted to know if storing the number 28 (5 bits) takes up different amounts of memory when it's stored as an int, long, short or byte? Does the final keyword limit the memory usage to only the number of bits required?</p>\n<p>I couldn't think of a way to test this nor did I find anything about this online.</p>\n"},{"tags":["java","android","reactjs","react-native"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1690435380,"post_id":76440339,"comment_id":135354008,"body_markdown":"Usually a question that someone posts on this website contains a single question only (and not four questions, as you have done).","body":"Usually a question that someone posts on this website contains a single question only (and not four questions, as you have done)."}],"owner":{"account_id":28772656,"reputation":1,"user_id":22036063,"display_name":"Travoozy Tech"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690361822,"creation_date":1686314366,"question_id":76440339,"body_markdown":"How do i integrate the ccavenues payment gateway in react native.\r\n\r\n1. How do encrypt the request using RSA Algorithms?\r\n2. How do decrypt cipher text using AES 128 Algorithms\r\n3. How do  access web services of ccavenue \r\n4. How do integrate it in react native.\r\n\r\nIntegration CCavenue payment gateway in react native","title":"Integration CCavenue PAyment Gateway In React Native","body":"<p>How do i integrate the ccavenues payment gateway in react native.</p>\n<ol>\n<li>How do encrypt the request using RSA Algorithms?</li>\n<li>How do decrypt cipher text using AES 128 Algorithms</li>\n<li>How do  access web services of ccavenue</li>\n<li>How do integrate it in react native.</li>\n</ol>\n<p>Integration CCavenue payment gateway in react native</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":1,"creation_date":1690360380,"post_id":76769137,"comment_id":135341040,"body_markdown":"Please emphasize what the problem is.","body":"Please emphasize what the problem is."}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690360831,"creation_date":1690360831,"answer_id":76769417,"question_id":76769137,"body_markdown":"SharedPreferences are designed to persist data between app executions. However, it doesn&#39;t persist app uninstalls. That means that if a user uninstalls and reinstalls the app, the data is lost. So in your case, SharedPreferences might not sound like the best solution. If you want to know if a user clicked at most 2 times in each level regardless if the app is uninstalled then you should save this information in the database.\r\n\r\nIn my opinion, the best option that you have is to save the number of clicks inside the database. Then you can perform a check each time the user clicks on the &quot;Show Answer&quot; option. If the number of clicks is less than two, then you should display the option, otherwise you can hide it, or display a message.\r\n\r\nSo in a Realtime Database, a structure like this will do the trick:\r\n\r\n    db\r\n    |\r\n    --- $uid\r\n         |\r\n         --- $levelId: 1\r\n\r\nWhere the `levelId` is the ID of a level and `1` is the number of clicks.","title":"Save int with SharedPreferences","body":"<p>SharedPreferences are designed to persist data between app executions. However, it doesn't persist app uninstalls. That means that if a user uninstalls and reinstalls the app, the data is lost. So in your case, SharedPreferences might not sound like the best solution. If you want to know if a user clicked at most 2 times in each level regardless if the app is uninstalled then you should save this information in the database.</p>\n<p>In my opinion, the best option that you have is to save the number of clicks inside the database. Then you can perform a check each time the user clicks on the &quot;Show Answer&quot; option. If the number of clicks is less than two, then you should display the option, otherwise you can hide it, or display a message.</p>\n<p>So in a Realtime Database, a structure like this will do the trick:</p>\n<pre><code>db\n|\n--- $uid\n     |\n     --- $levelId: 1\n</code></pre>\n<p>Where the <code>levelId</code> is the ID of a level and <code>1</code> is the number of clicks.</p>\n"}],"owner":{"account_id":28900230,"reputation":23,"user_id":22135379,"display_name":"Twitch Arşivim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76769417,"answer_count":1,"score":-1,"last_activity_date":1690361339,"creation_date":1690358447,"question_id":76769137,"body_markdown":"I want users to be able to use the &quot;Show Reply&quot; feature at most 2 times per level when they purchase the &quot;Remove Ads&quot; item, and to continue this feature with &quot;SharedPreferensces&quot; when the app is closed and back on.\r\n\r\nIn the game, I ensured that &quot;Show Answer&quot; can be clicked at most 2 times in each level, but when you exit the level and enter back or when the game is closed and opened, this disappears and can be pressed 2 times again.\r\n\r\n```\r\npublic class MainActivity extends Activity implements View.OnClickListener {\r\n    \r\n    SharedPreferences preferences;\r\n    Button revealButton, askButton, doneButton;\r\n    SharedPreferences.Editor editor;\r\n    public static final String SHARED_PREFS = &quot;sharedPrefs&quot;;\r\n    private int clicks;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        preferences = PreferenceManager.getDefaultSharedPreferences(MainActivity.this);\r\n        editor = preferences.edit();\r\n        CurrentQuestion = preferences.getInt(&quot;CurrentQuestion&quot; + code, 0);\r\n        currentLevelQuestion = preferences.getInt(&quot;currentLevelQuestion&quot; + code + &quot;_&quot; + branch, 1);\r\n\r\n        //AdMob Ads\r\n        MobileAds.initialize(this, new OnInitializationCompleteListener() {\r\n            @Override\r\n            public void onInitializationComplete(InitializationStatus initializationStatus) {\r\n            }\r\n        });\r\n        //=======Designed for children==========//\r\n        RequestConfiguration requestConfiguration = MobileAds.getRequestConfiguration()\r\n                .toBuilder().setTagForChildDirectedTreatment(TAG_FOR_CHILD_DIRECTED_TREATMENT_TRUE)\r\n                .setMaxAdContentRating(MAX_AD_CONTENT_RATING_G)\r\n                .build();\r\n        MobileAds.setRequestConfiguration(requestConfiguration);\r\n//=======================================//\r\n\r\n        mAdView = findViewById(R.id.adView);\r\n        String purchasedItem = preferences.getString(&quot;purchased&quot;, null);\r\n        if (purchasedItem == null) {\r\n            AdRequest adRequest = new AdRequest.Builder()\r\n                    .build();\r\n            mAdView.loadAd(adRequest);\r\n        } else {\r\n            mAdView.setVisibility(View.GONE);\r\n        }\r\n\r\n        loadRewardedAd();\r\n        progressBar = findViewById(R.id.progressBar);\r\n\r\n        //Initialize views\r\n        questionNumberTV = findViewById(R.id.questionNumber);\r\n        scoreTV = findViewById(R.id.score);\r\n        questionTV = findViewById(R.id.questionText);\r\n        LevelNumberTV = findViewById(R.id.level_number);\r\n        revealButton = findViewById(R.id.reveal);\r\n        askButton = findViewById(R.id.ask);\r\n        resetButton = findViewById(R.id.reset);\r\n        skipButton = findViewById(R.id.skip);\r\n        doneButton = findViewById(R.id.done);\r\n        questionImage = findViewById(R.id.questionImage);\r\n        voiceImage = findViewById(R.id.voiceImage);\r\n        answerGridview = findViewById(R.id.answerGridview);\r\n        choicesGridview = findViewById(R.id.choicesGridview);\r\n\r\n        //Scroll textView\r\n        questionTV.setMovementMethod(new ScrollingMovementMethod());\r\n        //Initialize the new question\r\n//        LevelNumberTV.setText(getString(R.string.level) + &quot; &quot; + code);\r\n        retrieveQuestionTile();\r\n        retrieveData();\r\n    }\r\n\r\ncase R.id.reveal:\r\n//                NextQuestion();\r\n                clicks++;\r\n                Log.e(&quot;Click+1&quot;, Integer.toString(clicks));\r\n                Log.e(&quot;Test&quot;, &quot;Click test break&quot;);\r\n                if (isRunning == true) {\r\n                    countDownTimer.cancel();\r\n                    if (tickPlayer != null &amp;&amp; tickPlayer.isPlaying()) {\r\n                        tickPlayer.stop();\r\n                    }\r\n                }if (purchasedItem != null &amp;&amp; clicks &gt;= 2){\r\n                    SharedPreferences prefs = getSharedPreferences(SHARED_PREFS, Context.MODE_PRIVATE);\r\n                    SharedPreferences.Editor editor = prefs.edit();\r\n                    editor.putInt(&quot;clicks&quot;, clicks);\r\n                    editor.apply();\r\n                    revealButton.setEnabled(false);\r\n                    Toast.makeText(this, getString(R.string.purchased_warning), Toast.LENGTH_LONG).show();\r\n                }\r\n                if (purchasedItem == null) {\r\n                    Reveal_Answer_Dialog();\r\n                } else {\r\n                    currentLetter = 0;\r\n                    for (int i = 0; i &lt; answer.length; i++) {\r\n                        String Letter = String.valueOf(answer[i]);\r\n                        char compare = Letter.charAt(0);\r\n                        user_submit_answer[currentLetter] = compare;\r\n                        if (currentLetter + 1 &lt; answer.length) {\r\n                            currentLetter = currentLetter + 1;\r\n                        }\r\n\r\n                        //Update UI\r\n                        recyclerAnswersAdapter = new RecyclerAnswersAdapter(user_submit_answer, this);\r\n                        answerGridview.setAdapter(recyclerAnswersAdapter);\r\n                        recyclerAnswersAdapter.notifyDataSetChanged();\r\n                    }\r\n\r\n                }\r\n                break;\r\npublic void Failed_Level_Dialog() {\r\n    wrongPlayer = MediaPlayer.create(MainActivity.this, R.raw.wrong);\r\n}\r\n\r\n    clicks = 0;\r\npublic void Finish_Level_Dialog() {\r\n    editor.putString(&quot;done&quot; + &quot;_&quot; + code + &quot;_&quot; + branch, &quot;yes&quot;);\r\n    editor.apply();\r\n\r\n    clicks = 0;\r\n}\r\n```\r\n\r\n1. I saved the data as int with SharedPreferences, then I read the data in case: by following the click with ++.\r\n\r\n2. I managed to inactivate the button when the button is pressed after 2 in each level, but this resets when the game comes to the homepage or when the game is closed and opened.","title":"Save int with SharedPreferences","body":"<p>I want users to be able to use the &quot;Show Reply&quot; feature at most 2 times per level when they purchase the &quot;Remove Ads&quot; item, and to continue this feature with &quot;SharedPreferensces&quot; when the app is closed and back on.</p>\n<p>In the game, I ensured that &quot;Show Answer&quot; can be clicked at most 2 times in each level, but when you exit the level and enter back or when the game is closed and opened, this disappears and can be pressed 2 times again.</p>\n<pre><code>public class MainActivity extends Activity implements View.OnClickListener {\n    \n    SharedPreferences preferences;\n    Button revealButton, askButton, doneButton;\n    SharedPreferences.Editor editor;\n    public static final String SHARED_PREFS = &quot;sharedPrefs&quot;;\n    private int clicks;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        preferences = PreferenceManager.getDefaultSharedPreferences(MainActivity.this);\n        editor = preferences.edit();\n        CurrentQuestion = preferences.getInt(&quot;CurrentQuestion&quot; + code, 0);\n        currentLevelQuestion = preferences.getInt(&quot;currentLevelQuestion&quot; + code + &quot;_&quot; + branch, 1);\n\n        //AdMob Ads\n        MobileAds.initialize(this, new OnInitializationCompleteListener() {\n            @Override\n            public void onInitializationComplete(InitializationStatus initializationStatus) {\n            }\n        });\n        //=======Designed for children==========//\n        RequestConfiguration requestConfiguration = MobileAds.getRequestConfiguration()\n                .toBuilder().setTagForChildDirectedTreatment(TAG_FOR_CHILD_DIRECTED_TREATMENT_TRUE)\n                .setMaxAdContentRating(MAX_AD_CONTENT_RATING_G)\n                .build();\n        MobileAds.setRequestConfiguration(requestConfiguration);\n//=======================================//\n\n        mAdView = findViewById(R.id.adView);\n        String purchasedItem = preferences.getString(&quot;purchased&quot;, null);\n        if (purchasedItem == null) {\n            AdRequest adRequest = new AdRequest.Builder()\n                    .build();\n            mAdView.loadAd(adRequest);\n        } else {\n            mAdView.setVisibility(View.GONE);\n        }\n\n        loadRewardedAd();\n        progressBar = findViewById(R.id.progressBar);\n\n        //Initialize views\n        questionNumberTV = findViewById(R.id.questionNumber);\n        scoreTV = findViewById(R.id.score);\n        questionTV = findViewById(R.id.questionText);\n        LevelNumberTV = findViewById(R.id.level_number);\n        revealButton = findViewById(R.id.reveal);\n        askButton = findViewById(R.id.ask);\n        resetButton = findViewById(R.id.reset);\n        skipButton = findViewById(R.id.skip);\n        doneButton = findViewById(R.id.done);\n        questionImage = findViewById(R.id.questionImage);\n        voiceImage = findViewById(R.id.voiceImage);\n        answerGridview = findViewById(R.id.answerGridview);\n        choicesGridview = findViewById(R.id.choicesGridview);\n\n        //Scroll textView\n        questionTV.setMovementMethod(new ScrollingMovementMethod());\n        //Initialize the new question\n//        LevelNumberTV.setText(getString(R.string.level) + &quot; &quot; + code);\n        retrieveQuestionTile();\n        retrieveData();\n    }\n\ncase R.id.reveal:\n//                NextQuestion();\n                clicks++;\n                Log.e(&quot;Click+1&quot;, Integer.toString(clicks));\n                Log.e(&quot;Test&quot;, &quot;Click test break&quot;);\n                if (isRunning == true) {\n                    countDownTimer.cancel();\n                    if (tickPlayer != null &amp;&amp; tickPlayer.isPlaying()) {\n                        tickPlayer.stop();\n                    }\n                }if (purchasedItem != null &amp;&amp; clicks &gt;= 2){\n                    SharedPreferences prefs = getSharedPreferences(SHARED_PREFS, Context.MODE_PRIVATE);\n                    SharedPreferences.Editor editor = prefs.edit();\n                    editor.putInt(&quot;clicks&quot;, clicks);\n                    editor.apply();\n                    revealButton.setEnabled(false);\n                    Toast.makeText(this, getString(R.string.purchased_warning), Toast.LENGTH_LONG).show();\n                }\n                if (purchasedItem == null) {\n                    Reveal_Answer_Dialog();\n                } else {\n                    currentLetter = 0;\n                    for (int i = 0; i &lt; answer.length; i++) {\n                        String Letter = String.valueOf(answer[i]);\n                        char compare = Letter.charAt(0);\n                        user_submit_answer[currentLetter] = compare;\n                        if (currentLetter + 1 &lt; answer.length) {\n                            currentLetter = currentLetter + 1;\n                        }\n\n                        //Update UI\n                        recyclerAnswersAdapter = new RecyclerAnswersAdapter(user_submit_answer, this);\n                        answerGridview.setAdapter(recyclerAnswersAdapter);\n                        recyclerAnswersAdapter.notifyDataSetChanged();\n                    }\n\n                }\n                break;\npublic void Failed_Level_Dialog() {\n    wrongPlayer = MediaPlayer.create(MainActivity.this, R.raw.wrong);\n}\n\n    clicks = 0;\npublic void Finish_Level_Dialog() {\n    editor.putString(&quot;done&quot; + &quot;_&quot; + code + &quot;_&quot; + branch, &quot;yes&quot;);\n    editor.apply();\n\n    clicks = 0;\n}\n</code></pre>\n<ol>\n<li><p>I saved the data as int with SharedPreferences, then I read the data in case: by following the click with ++.</p>\n</li>\n<li><p>I managed to inactivate the button when the button is pressed after 2 in each level, but this resets when the game comes to the homepage or when the game is closed and opened.</p>\n</li>\n</ol>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690297192,"post_id":76763373,"comment_id":135332010,"body_markdown":"Switch to POST request. Kidding aside, shouldn&#39;t you just register a new tag provider for prometheus instead o trying to filter the parameters, as that will also obfuscate/hide them for controllers etc. Could you add an example of the prometheus output you want to cleanup?","body":"Switch to POST request. Kidding aside, shouldn&#39;t you just register a new tag provider for prometheus instead o trying to filter the parameters, as that will also obfuscate/hide them for controllers etc. Could you add an example of the prometheus output you want to cleanup?"},{"owner":{"account_id":13611409,"reputation":11,"user_id":9818776,"display_name":"Valentin Kohler"},"score":0,"creation_date":1690354686,"post_id":76763373,"comment_id":135339943,"body_markdown":"Thanks, I forgot to add the desired output.. I edited the first post about this. I will check tag provider but we work with the default values of actuator usually!","body":"Thanks, I forgot to add the desired output.. I edited the first post about this. I will check tag provider but we work with the default values of actuator usually!"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690368158,"post_id":76763373,"comment_id":135342756,"body_markdown":"I think you might want to have a dedicated one for the web, which only does the `uri` without the parameters **or** which obfuscates the values you want. I think the one without parameters in the `uri` is the easiest.","body":"I think you might want to have a dedicated one for the web, which only does the <code>uri</code> without the parameters <b>or</b> which obfuscates the values you want. I think the one without parameters in the <code>uri</code> is the easiest."}],"owner":{"account_id":13611409,"reputation":11,"user_id":9818776,"display_name":"Valentin Kohler"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690361089,"creation_date":1690292738,"question_id":76763373,"body_markdown":"I don&#39;t write here often but I am facing a fun issue.\r\nWe have a spring project 2.5.x with actuator/prometheus enabled.\r\nThere are some get queries that use data we wish to hide(only a subset of the query parameters of a query, not all of them) in /actuator/prometheus as any get request is by default logged with the query parameters (which makes sense). Now I know that all that trouble could be avoided by switching to post but we cannot for the moment.\r\n\r\nHere is what I have right now : \r\n```http_client_requests_seconds_sum{client_name=&quot;client&quot;,method=&quot;GET&quot;,outcome=&quot;SUCCESS&quot;,status=&quot;200&quot;,uri=&quot;/test?query=1234&amp;field1=value2&amp;field2=value3&quot;,} 0.050652838```\r\nAnd here is what I would like to obtain: \r\n```http_client_requests_seconds_sum{client_name=&quot;client&quot;,method=&quot;GET&quot;,outcome=&quot;SUCCESS&quot;,status=&quot;200&quot;,uri=&quot;/test?query=****&amp;field1=value2&amp;field2=value3&quot;,} 0.050652838```\r\n\r\nThe piece I want to hide is always called query.\r\n\r\nWhat I have tried so far : \r\n - Creating a filter that should filter out the query in the logs : this works but actuator still registers the normal query\r\n\r\n```java\r\n@Component\r\n@Order(1)\r\npublic class QueryParameterSanitizationFilter implements Filter {\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n            throws IOException, ServletException {\r\n        if (request instanceof HttpServletRequest) {\r\n            HttpServletRequest httpServletRequest = (HttpServletRequest) request;\r\n            String requestURI = httpServletRequest.getRequestURI();\r\n\r\n            // List of URIs that require query parameter sanitization\r\n            String[] endpointsToSanitize = {&quot;endpoint1&quot;, &quot;/endpoint2&quot;};\r\n\r\n            if (requiresSanitization(requestURI, endpointsToSanitize)) {\r\n                SanitizedRequestWrapper wrappedRequest = new SanitizedRequestWrapper(httpServletRequest);\r\n                chain.doFilter(wrappedRequest, response);\r\n            } else {\r\n                chain.doFilter(request, response);\r\n            }\r\n        } else {\r\n            chain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\n    // Implement a method to check if the URI requires query parameter sanitization\r\n    private boolean requiresSanitization(String requestURI, String[] endpointsToSanitize) {\r\n        for (String endpoint : endpointsToSanitize) {\r\n            if (requestURI.startsWith(endpoint)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Custom wrapper to capture the request and modify query parameters\r\n    private static class SanitizedRequestWrapper extends HttpServletRequestWrapper {\r\n        private String sanitizedQueryString;\r\n\r\n        public SanitizedRequestWrapper(HttpServletRequest request) {\r\n            super(request);\r\n            this.sanitizedQueryString = sanitizeQueryParameters(request.getQueryString());\r\n        }\r\n\r\n        @Override\r\n        public String getQueryString() {\r\n            return sanitizedQueryString;\r\n        }\r\n\r\n        private String sanitizeQueryParameters(String queryString) {\r\n            if (queryString != null) {\r\n                String[] params = queryString.split(&quot;&amp;&quot;);\r\n                for (int i = 0; i &lt; params.length; i++) {\r\n                    String param = params[i];\r\n                    if (param.startsWith(&quot;param=&quot;)) {\r\n                        // If it does, replace the value with &quot;***&quot;\r\n                        params[i] = &quot;param=***&quot;;\r\n                    }\r\n                }\r\n                // Reconstruct the sanitized query string\r\n                return String.join(&quot;&amp;&quot;, params);\r\n            }\r\n            return queryString;\r\n        }\r\n    }\r\n}\r\n```\r\nCreating a custom `HttpServletWrapper`, `HandlerInterceptor` and `HandlerInterceptorAdapter`\r\n\r\n\r\n```java    \r\n\r\npublic class QueryParameterSanitizationInterceptor implements HandlerInterceptor {\r\n\r\n    @Override\r\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)\r\n            throws Exception {\r\n        String requestURI = request.getRequestURI();\r\n\r\n        String[] endpointsToSanitize = {&quot;/endpoint1&quot;,&quot;endpoint2&quot;};\r\n\r\n        if (requiresSanitization(requestURI, endpointsToSanitize)) {\r\n            SanitizedRequestWrapper wrappedRequest = new SanitizedRequestWrapper(request);\r\n            request = wrappedRequest;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private boolean requiresSanitization(String requestURI, String[] endpointsToSanitize) {\r\n        for (String endpoint : endpointsToSanitize) {\r\n            if (requestURI.startsWith(endpoint)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n    \r\n```java    \r\npublic class QueryParameterSanitizationInterceptorAdapter extends HandlerInterceptorAdapter {\r\n\r\n    private final QueryParameterSanitizationInterceptor interceptor;\r\n\r\n    public QueryParameterSanitizationInterceptorAdapter(QueryParameterSanitizationInterceptor interceptor) {\r\n        this.interceptor = interceptor;\r\n    }\r\n\r\n    @Override\r\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)\r\n            throws Exception {\r\n        return interceptor.preHandle(request, response, handler);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java    \r\npublic class SanitizedRequestWrapper extends HttpServletRequestWrapper {\r\n\r\n    private final String sanitizedQueryString;\r\n\r\n    public SanitizedRequestWrapper(HttpServletRequest request) {\r\n        super(request);\r\n        this.sanitizedQueryString = sanitizeQueryParameters(request.getQueryString());\r\n    }\r\n\r\n    @Override\r\n    public String getQueryString() {\r\n        return sanitizedQueryString;\r\n    }\r\n\r\n    private String sanitizeQueryParameters(String queryString) {\r\n        if (queryString != null) {\r\n            // Split the query string into individual parameter-value pairs\r\n            String[] params = queryString.split(&quot;&amp;&quot;);\r\n            for (int i = 0; i &lt; params.length; i++) {\r\n                String param = params[i];\r\n                // Check if the parameter starts with &quot;query=&quot;\r\n                if (param.startsWith(&quot;query=&quot;)) {\r\n                    // If it does, replace the value with &quot;***&quot;\r\n                    params[i] = &quot;query=***&quot;;\r\n                }\r\n            }\r\n            // Reconstruct the sanitized query string\r\n            return String.join(&quot;&amp;&quot;, params);\r\n        }\r\n        return queryString;\r\n    }\r\n}\r\n```\r\n\r\n\r\nThis doesn&#39;t work so well.\r\nAgain I know that everything could be solved if we switched to post requests but for the time being it is not possible.\r\nAnyone has any extra idea?\r\n\r\nThanks in advance\r\n\r\nEdit: \r\n\r\nI fixed the issue by creating a new meterfilter that applies the desired transformation.\r\n","title":"How to override query parameters in actuator/prometheus to hide their values","body":"<p>I don't write here often but I am facing a fun issue.\nWe have a spring project 2.5.x with actuator/prometheus enabled.\nThere are some get queries that use data we wish to hide(only a subset of the query parameters of a query, not all of them) in /actuator/prometheus as any get request is by default logged with the query parameters (which makes sense). Now I know that all that trouble could be avoided by switching to post but we cannot for the moment.</p>\n<p>Here is what I have right now :\n<code>http_client_requests_seconds_sum{client_name=&quot;client&quot;,method=&quot;GET&quot;,outcome=&quot;SUCCESS&quot;,status=&quot;200&quot;,uri=&quot;/test?query=1234&amp;field1=value2&amp;field2=value3&quot;,} 0.050652838</code>\nAnd here is what I would like to obtain:\n<code>http_client_requests_seconds_sum{client_name=&quot;client&quot;,method=&quot;GET&quot;,outcome=&quot;SUCCESS&quot;,status=&quot;200&quot;,uri=&quot;/test?query=****&amp;field1=value2&amp;field2=value3&quot;,} 0.050652838</code></p>\n<p>The piece I want to hide is always called query.</p>\n<p>What I have tried so far :</p>\n<ul>\n<li>Creating a filter that should filter out the query in the logs : this works but actuator still registers the normal query</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Order(1)\npublic class QueryParameterSanitizationFilter implements Filter {\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n            throws IOException, ServletException {\n        if (request instanceof HttpServletRequest) {\n            HttpServletRequest httpServletRequest = (HttpServletRequest) request;\n            String requestURI = httpServletRequest.getRequestURI();\n\n            // List of URIs that require query parameter sanitization\n            String[] endpointsToSanitize = {&quot;endpoint1&quot;, &quot;/endpoint2&quot;};\n\n            if (requiresSanitization(requestURI, endpointsToSanitize)) {\n                SanitizedRequestWrapper wrappedRequest = new SanitizedRequestWrapper(httpServletRequest);\n                chain.doFilter(wrappedRequest, response);\n            } else {\n                chain.doFilter(request, response);\n            }\n        } else {\n            chain.doFilter(request, response);\n        }\n    }\n\n    // Implement a method to check if the URI requires query parameter sanitization\n    private boolean requiresSanitization(String requestURI, String[] endpointsToSanitize) {\n        for (String endpoint : endpointsToSanitize) {\n            if (requestURI.startsWith(endpoint)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    // Custom wrapper to capture the request and modify query parameters\n    private static class SanitizedRequestWrapper extends HttpServletRequestWrapper {\n        private String sanitizedQueryString;\n\n        public SanitizedRequestWrapper(HttpServletRequest request) {\n            super(request);\n            this.sanitizedQueryString = sanitizeQueryParameters(request.getQueryString());\n        }\n\n        @Override\n        public String getQueryString() {\n            return sanitizedQueryString;\n        }\n\n        private String sanitizeQueryParameters(String queryString) {\n            if (queryString != null) {\n                String[] params = queryString.split(&quot;&amp;&quot;);\n                for (int i = 0; i &lt; params.length; i++) {\n                    String param = params[i];\n                    if (param.startsWith(&quot;param=&quot;)) {\n                        // If it does, replace the value with &quot;***&quot;\n                        params[i] = &quot;param=***&quot;;\n                    }\n                }\n                // Reconstruct the sanitized query string\n                return String.join(&quot;&amp;&quot;, params);\n            }\n            return queryString;\n        }\n    }\n}\n</code></pre>\n<p>Creating a custom <code>HttpServletWrapper</code>, <code>HandlerInterceptor</code> and <code>HandlerInterceptorAdapter</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class QueryParameterSanitizationInterceptor implements HandlerInterceptor {\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)\n            throws Exception {\n        String requestURI = request.getRequestURI();\n\n        String[] endpointsToSanitize = {&quot;/endpoint1&quot;,&quot;endpoint2&quot;};\n\n        if (requiresSanitization(requestURI, endpointsToSanitize)) {\n            SanitizedRequestWrapper wrappedRequest = new SanitizedRequestWrapper(request);\n            request = wrappedRequest;\n        }\n\n        return true;\n    }\n\n    private boolean requiresSanitization(String requestURI, String[] endpointsToSanitize) {\n        for (String endpoint : endpointsToSanitize) {\n            if (requestURI.startsWith(endpoint)) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class QueryParameterSanitizationInterceptorAdapter extends HandlerInterceptorAdapter {\n\n    private final QueryParameterSanitizationInterceptor interceptor;\n\n    public QueryParameterSanitizationInterceptorAdapter(QueryParameterSanitizationInterceptor interceptor) {\n        this.interceptor = interceptor;\n    }\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)\n            throws Exception {\n        return interceptor.preHandle(request, response, handler);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class SanitizedRequestWrapper extends HttpServletRequestWrapper {\n\n    private final String sanitizedQueryString;\n\n    public SanitizedRequestWrapper(HttpServletRequest request) {\n        super(request);\n        this.sanitizedQueryString = sanitizeQueryParameters(request.getQueryString());\n    }\n\n    @Override\n    public String getQueryString() {\n        return sanitizedQueryString;\n    }\n\n    private String sanitizeQueryParameters(String queryString) {\n        if (queryString != null) {\n            // Split the query string into individual parameter-value pairs\n            String[] params = queryString.split(&quot;&amp;&quot;);\n            for (int i = 0; i &lt; params.length; i++) {\n                String param = params[i];\n                // Check if the parameter starts with &quot;query=&quot;\n                if (param.startsWith(&quot;query=&quot;)) {\n                    // If it does, replace the value with &quot;***&quot;\n                    params[i] = &quot;query=***&quot;;\n                }\n            }\n            // Reconstruct the sanitized query string\n            return String.join(&quot;&amp;&quot;, params);\n        }\n        return queryString;\n    }\n}\n</code></pre>\n<p>This doesn't work so well.\nAgain I know that everything could be solved if we switched to post requests but for the time being it is not possible.\nAnyone has any extra idea?</p>\n<p>Thanks in advance</p>\n<p>Edit:</p>\n<p>I fixed the issue by creating a new meterfilter that applies the desired transformation.</p>\n"},{"tags":["java","android","mtp"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1690374973,"post_id":76769441,"comment_id":135344245,"body_markdown":"The service that acts as USB-MTP client is part of the Android system and to my knowledge there is no API to communicate with this service or change it&#39;s behavior. Therefore on an unrooted device I don&#39;t think this is possible, unless you create temporary files or something else the MTP client recognizes.","body":"The service that acts as USB-MTP client is part of the Android system and to my knowledge there is no API to communicate with this service or change it&#39;s behavior. Therefore on an unrooted device I don&#39;t think this is possible, unless you create temporary files or something else the MTP client recognizes."}],"owner":{"account_id":3471187,"reputation":743,"user_id":2926815,"accept_rate":83,"display_name":"Charles Lohr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690361016,"creation_date":1690361016,"question_id":76769441,"body_markdown":"I understand that MTPDevice is used when I want to talk to a downstream device, while the local Android system operates as a host.  But, I am trying to do the opposite.  Are there any facilities to allow devices running on an android device to communicate to a host over MTP?  I.e. with MTPEvents, etc. \r\n\r\nMostly, I am looking for a way to communicate data to a host PC (via libusb, etc.) while the Android device remains in MTP mode.  I am trying to avoid reliance on USB Accessory mode because it is not supported on all Android devices, while MTP support is virtually universal.","title":"Android MTP Device mode communciate with host?","body":"<p>I understand that MTPDevice is used when I want to talk to a downstream device, while the local Android system operates as a host.  But, I am trying to do the opposite.  Are there any facilities to allow devices running on an android device to communicate to a host over MTP?  I.e. with MTPEvents, etc.</p>\n<p>Mostly, I am looking for a way to communicate data to a host PC (via libusb, etc.) while the Android device remains in MTP mode.  I am trying to avoid reliance on USB Accessory mode because it is not supported on all Android devices, while MTP support is virtually universal.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":957801,"reputation":3469,"user_id":982786,"accept_rate":89,"display_name":"Nefariis"},"score":2,"creation_date":1454101205,"post_id":35093819,"comment_id":57909734,"body_markdown":"What is your question?","body":"What is your question?"},{"owner":{"account_id":2578349,"reputation":6772,"user_id":2235567,"accept_rate":90,"display_name":"Aseem Bansal"},"score":0,"creation_date":1454105410,"post_id":35093819,"comment_id":57911705,"body_markdown":"http://stackoverflow.com/help/how-to-ask","body":"<a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}],"answers":[{"tags":[],"owner":{"account_id":1132070,"reputation":3595,"user_id":1117934,"accept_rate":85,"display_name":"DominicEU"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454101302,"creation_date":1454101302,"answer_id":35093998,"question_id":35093819,"body_markdown":"There are a number of issues with this piece of code, including the fact that it does not even compile. You&#39;ve got a good number of syntax issues that are causing this.\r\n\r\nFor example, your local variable declarations inside method ```getConverted(double Metricconvert)``` are broken. I&#39;m not sure exactly what the calculation you wanted should look like, however a more correct method definition would look like this (This is of course based off of the fact you have fields ```Ht``` and ```Wt```, and that they should be class variables.\r\n\r\n    public static void getConverted(double Metricconvert) {\r\n        Ht = Metricconvert * kg;\r\n        Wt = Metricconvert * feet;\r\n    }\r\n\r\nAnother example of a syntactic error is an issue with one of your ```String``` return values (This one: ```A BMI below the range 18.5 to 24.9 is considered  underweight```). You&#39;ve ended that return statement with a closing bracket, and it should be closed with a quotation mark ```&quot;```. \r\n\r\nYou should first fix the syntactical errors in this piece of code, and then work on the other issues, such as incorrect output.\r\n","title":"Writing java bmi and bmr calculator use metric conversion","body":"<p>There are a number of issues with this piece of code, including the fact that it does not even compile. You've got a good number of syntax issues that are causing this.</p>\n\n<p>For example, your local variable declarations inside method <code>getConverted(double Metricconvert)</code> are broken. I'm not sure exactly what the calculation you wanted should look like, however a more correct method definition would look like this (This is of course based off of the fact you have fields <code>Ht</code> and <code>Wt</code>, and that they should be class variables.</p>\n\n<pre><code>public static void getConverted(double Metricconvert) {\n    Ht = Metricconvert * kg;\n    Wt = Metricconvert * feet;\n}\n</code></pre>\n\n<p>Another example of a syntactic error is an issue with one of your <code>String</code> return values (This one: <code>A BMI below the range 18.5 to 24.9 is considered  underweight</code>). You've ended that return statement with a closing bracket, and it should be closed with a quotation mark <code>\"</code>. </p>\n\n<p>You should first fix the syntactical errors in this piece of code, and then work on the other issues, such as incorrect output.</p>\n"}],"owner":{"account_id":7633305,"reputation":1,"user_id":5787628,"display_name":"Ryan M Vidler"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1741,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1690360370,"creation_date":1454100637,"question_id":35093819,"body_markdown":"I seem to have gotten my self lost in my own programing. directly below is what the outcome is suppose to look like. I am desperately needing help as am new to java coding and becoming quickly aware I am not very good at. Please fill free to correct the code as needed. I learn better when i know what the mistake is. Thank you for any help you can provide.\r\n\r\nThis program implements a Health Assistance Calculator\r\n\r\nGiven a weight, height, and age, it will compute:\r\n\r\n BMI - body mass index\r\n\r\n Calories needed per day to maintain weight\r\n\r\nPlease enter your weight in pounds: 150\r\n\r\nPlease enter your height in inches: 66\r\n\r\nPlease enter your age in years: 30\r\n\r\nYour BMI is 24.3\r\n\r\nA BMI in the range of 18.5 to 24.9 is considered normal\r\n\r\nTo maintain your current weight:\r\n\r\n Men need 2249 calories per day\r\n\r\n Women need 2018 calories per day\r\n\r\nMethod 1: A method to display an explanation of what the program will do to the user.\r\no This method will not have any parameters or return values.\r\nMethod 2: A method to compute a person’s BMI. This method must:\r\no Have 2 parameters: weight in kgs and height in meters\r\no Use the pow method from in the java.Math class to square the height\r\no Return a double value: the calculated BMI\r\nMethods 3 &amp; 4: Two methods to compute the caloric requirements, one for a man and one for a\r\nwoman. Each of these methods must:\r\no Have 3 parameters: weight in kgs, height in meters, and age\r\no Convert the height to centimeters.\r\no Compute the caloric requirements.\r\no Use one of the rounding methods in the java.Math class to round the answer to a whole\r\nnumber before returning it. Note that you may need to use casting to convert the value\r\nreturned from the java.Math method to an integer.\r\no Return an integer value: the daily calories required to maintain current weight\r\nMethod 5: A method to display the results, with no return value. This method must:\r\no Have 3 parameters: a person’s BMI, men’s calories, and women’s calories\r\no Display a description and the BMI, rounded to one decimal place using the printf method\r\nfrom the System.out class\r\no Display the daily calories required to maintain current weight for men\r\no Display the daily calories required to maintain current weight for women\r\n\r\n\r\n    enter code here\r\n\r\n\r\n    package healthy;\r\n    import java.util.*;\r\n    import java.lang.Math;\r\n    public class Healthy {\r\n\r\n    public static void main(String[] args) {\r\n    Scanner console = new Scanner(System.in);\r\n    printIntroduction(); \r\n    double kg = .453592;\r\n    double feet = .3048;        \r\n    double bmi = BMIinput(console);\r\n    double age = InputAge(console);\r\n    double Wt = InputWeight(console);\r\n    double Ht = InputHeight(console);\r\n    double MetricConvert = Metric();\r\n    String status = getStatus(bmi);\r\n    String converted = getConverted(MetricConvert);\r\n    \r\n    }\r\n    //Prints program description\r\n    public static void printIntroduction(){\r\n    System.out.println(&quot;This program Implements a Health Assistance Calculator&quot;)\r\n    System.out.println(&quot;Given a Weight, Height, and age, it will compute: &quot;);\r\n    System.out.println(&quot;    BMI - body mass index&quot;);\r\n    System.out.println(&quot;    Calories needed per day to maintain weight&quot;);\r\n    System.out.println(&quot;&quot;);\r\n    \r\n    } \r\n    //Prompts user to input weight, height and age.\r\n    public static double BMIinput(Scanner console){\r\n        System.out.println(&quot;Please enter your weight in pounds: &quot;);\r\n        double Inputweight = console.nextDouble();\r\n        System.out.println(&quot;please enter your height in inches: &quot;);\r\n        double Inputheight = console.nextDouble();\r\n        System.out.println(&quot;please enter your age in years: &quot;);\r\n        double InputAge = console.nextDouble();\r\n                return BMIto(weight, height);\r\n    }  \r\n    // Calculates BMI based on user inputs\r\n    public static double BMIto(double weight, double height){\r\n        return weight / Math.pow(height, 2);\r\n    }\r\n    // convert input height and weight to metric\r\n    public static String getConverted(double Metricconvert){\r\n        double Ht * kg;\r\n        double Wt * feet;\r\n        return getConverted;\r\n    }\r\n    // displays Users Health status based off of bmi\r\n    public static String getStatus(double bmi) {\r\n\t\tif (bmi &lt; 18.5) {\r\n\t\treturn &quot;A BMI below the range 18.5 to 24.9 is considered  underweight}\r\n\t\t} else if (bmi &lt; 25) {\r\n\t\t\treturn &quot;A BMI in the range of 18.5 to 24.9 is considered normal&quot;;\r\n\t\t} else if (bmi &lt; 30) {\r\n\t\t\treturn &quot;A BMI above range of 18.5 to 24.9 is considered overweight&quot;;\r\n\t\t} else {\r\n\t\t\treturn &quot;A BMI over 30 is obese&quot;;\r\n\t\t}\t\r\n\t}\r\n    } \r\n    public static double round(double value, int digits) {\r\n\treturn Math.round(value * Math.pow(10, digits)) / Math.pow(10, digits);\r\n    }\r\n\r\n    }\r\n","title":"Writing java bmi and bmr calculator use metric conversion","body":"<p>I seem to have gotten my self lost in my own programing. directly below is what the outcome is suppose to look like. I am desperately needing help as am new to java coding and becoming quickly aware I am not very good at. Please fill free to correct the code as needed. I learn better when i know what the mistake is. Thank you for any help you can provide.</p>\n\n<p>This program implements a Health Assistance Calculator</p>\n\n<p>Given a weight, height, and age, it will compute:</p>\n\n<p>BMI - body mass index</p>\n\n<p>Calories needed per day to maintain weight</p>\n\n<p>Please enter your weight in pounds: 150</p>\n\n<p>Please enter your height in inches: 66</p>\n\n<p>Please enter your age in years: 30</p>\n\n<p>Your BMI is 24.3</p>\n\n<p>A BMI in the range of 18.5 to 24.9 is considered normal</p>\n\n<p>To maintain your current weight:</p>\n\n<p>Men need 2249 calories per day</p>\n\n<p>Women need 2018 calories per day</p>\n\n<p>Method 1: A method to display an explanation of what the program will do to the user.\no This method will not have any parameters or return values.\nMethod 2: A method to compute a person’s BMI. This method must:\no Have 2 parameters: weight in kgs and height in meters\no Use the pow method from in the java.Math class to square the height\no Return a double value: the calculated BMI\nMethods 3 &amp; 4: Two methods to compute the caloric requirements, one for a man and one for a\nwoman. Each of these methods must:\no Have 3 parameters: weight in kgs, height in meters, and age\no Convert the height to centimeters.\no Compute the caloric requirements.\no Use one of the rounding methods in the java.Math class to round the answer to a whole\nnumber before returning it. Note that you may need to use casting to convert the value\nreturned from the java.Math method to an integer.\no Return an integer value: the daily calories required to maintain current weight\nMethod 5: A method to display the results, with no return value. This method must:\no Have 3 parameters: a person’s BMI, men’s calories, and women’s calories\no Display a description and the BMI, rounded to one decimal place using the printf method\nfrom the System.out class\no Display the daily calories required to maintain current weight for men\no Display the daily calories required to maintain current weight for women</p>\n\n<pre><code>enter code here\n\n\npackage healthy;\nimport java.util.*;\nimport java.lang.Math;\npublic class Healthy {\n\npublic static void main(String[] args) {\nScanner console = new Scanner(System.in);\nprintIntroduction(); \ndouble kg = .453592;\ndouble feet = .3048;        \ndouble bmi = BMIinput(console);\ndouble age = InputAge(console);\ndouble Wt = InputWeight(console);\ndouble Ht = InputHeight(console);\ndouble MetricConvert = Metric();\nString status = getStatus(bmi);\nString converted = getConverted(MetricConvert);\n\n}\n//Prints program description\npublic static void printIntroduction(){\nSystem.out.println(\"This program Implements a Health Assistance Calculator\")\nSystem.out.println(\"Given a Weight, Height, and age, it will compute: \");\nSystem.out.println(\"    BMI - body mass index\");\nSystem.out.println(\"    Calories needed per day to maintain weight\");\nSystem.out.println(\"\");\n\n} \n//Prompts user to input weight, height and age.\npublic static double BMIinput(Scanner console){\n    System.out.println(\"Please enter your weight in pounds: \");\n    double Inputweight = console.nextDouble();\n    System.out.println(\"please enter your height in inches: \");\n    double Inputheight = console.nextDouble();\n    System.out.println(\"please enter your age in years: \");\n    double InputAge = console.nextDouble();\n            return BMIto(weight, height);\n}  \n// Calculates BMI based on user inputs\npublic static double BMIto(double weight, double height){\n    return weight / Math.pow(height, 2);\n}\n// convert input height and weight to metric\npublic static String getConverted(double Metricconvert){\n    double Ht * kg;\n    double Wt * feet;\n    return getConverted;\n}\n// displays Users Health status based off of bmi\npublic static String getStatus(double bmi) {\n    if (bmi &lt; 18.5) {\n    return \"A BMI below the range 18.5 to 24.9 is considered  underweight}\n    } else if (bmi &lt; 25) {\n        return \"A BMI in the range of 18.5 to 24.9 is considered normal\";\n    } else if (bmi &lt; 30) {\n        return \"A BMI above range of 18.5 to 24.9 is considered overweight\";\n    } else {\n        return \"A BMI over 30 is obese\";\n    }   \n}\n} \npublic static double round(double value, int digits) {\nreturn Math.round(value * Math.pow(10, digits)) / Math.pow(10, digits);\n}\n\n}\n</code></pre>\n"},{"tags":["java","android","java-native-interface"],"comments":[{"owner":{"account_id":3471187,"reputation":743,"user_id":2926815,"accept_rate":83,"display_name":"Charles Lohr"},"score":0,"creation_date":1689633968,"post_id":76700211,"comment_id":135238661,"body_markdown":"For anyone else wondering - you can sort of get a little closer by calling `Looper.loop()` on your thread with the ALooper.    Still not quite there but much closer.","body":"For anyone else wondering - you can sort of get a little closer by calling <code>Looper.loop()</code> on your thread with the ALooper.    Still not quite there but much closer."},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":0,"creation_date":1689775702,"post_id":76700211,"comment_id":135261514,"body_markdown":"Why dont you want to use jni interface?","body":"Why dont you want to use jni interface?"},{"owner":{"account_id":3471187,"reputation":743,"user_id":2926815,"accept_rate":83,"display_name":"Charles Lohr"},"score":0,"creation_date":1689973533,"post_id":76700211,"comment_id":135293521,"body_markdown":"Because the JNI ALooper_* interface can&#39;t get messages from Java handlers.  (unless I&#39;m missing something)","body":"Because the JNI ALooper_* interface can&#39;t get messages from Java handlers.  (unless I&#39;m missing something)"}],"answers":[{"tags":[],"owner":{"account_id":3471187,"reputation":743,"user_id":2926815,"accept_rate":83,"display_name":"Charles Lohr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690360179,"creation_date":1690306041,"answer_id":76765198,"question_id":76700211,"body_markdown":"This can be done by manually iterating through the messages, by calling `next` on the looper&#39;s `MessageQueue`.  That way you receive the Java objects and callback yourself that would ordinarily be executed.\r\n\r\nFrom there you can extract the payload and do what you wish without calling a null callback, which would cause everything to break.\r\n\r\nInterpreting the MessagePayload is tricker. In some versions of Android, you can access the b for String and c for byte[] fields of MessagePayload and for others yet, you have to back out one more step and you can access the byte array for the MessagePayload Object.\r\n\r\nI have an example of this here:\r\nhttps://github.com/cnlohr/rawdrawandroid/blob/a77293aadb95f59cb3c2e8987bc976c06bee5a65/test.c#L317-L418\r\n\r\n```c\r\n\tjclass LooperClass = env-&gt;FindClass(envptr, &quot;android/os/Looper&quot;);\r\n\tjmethodID myLooperMethod = env-&gt;GetStaticMethodID(envptr, LooperClass, &quot;myLooper&quot;, &quot;()Landroid/os/Looper;&quot;);\r\n\tjobject thisLooper = env-&gt;CallStaticObjectMethod( envptr, LooperClass, myLooperMethod );\r\n\tif( !thisLooper )\r\n\t{\r\n\t\tjmethodID prepareMethod = env-&gt;GetStaticMethodID(envptr, LooperClass, &quot;prepare&quot;, &quot;()V&quot;);\r\n\t\tenv-&gt;CallStaticVoidMethod( envptr, LooperClass, prepareMethod );\r\n\t\tthisLooper = env-&gt;CallStaticObjectMethod( envptr, LooperClass, myLooperMethod );\r\n\t\tg_attachLooper = env-&gt;NewGlobalRef(envptr, thisLooper);\r\n\t}\r\n\r\n\tjmethodID getQueueMethod = env-&gt;GetMethodID( envptr, LooperClass, &quot;getQueue&quot;, &quot;()Landroid/os/MessageQueue;&quot; );\r\n\tjobject   lque = env-&gt;CallObjectMethod( envptr, g_attachLooper, getQueueMethod );\r\n\r\n\tjclass MessageQueueClass = env-&gt;FindClass(envptr, &quot;android/os/MessageQueue&quot;);\r\n\tjmethodID nextMethod = env-&gt;GetMethodID( envptr, MessageQueueClass, &quot;next&quot;, &quot;()Landroid/os/Message;&quot; );\r\n\t\r\n\tjclass MessageClass = env-&gt;FindClass(envptr, &quot;android/os/Message&quot;);\r\n\tjfieldID objid = env-&gt;GetFieldID( envptr, MessageClass, &quot;obj&quot;, &quot;Ljava/lang/Object;&quot; );\r\n\tjclass PairClass = env-&gt;FindClass(envptr, &quot;android/util/Pair&quot;);\r\n\tjfieldID pairfirst  = env-&gt;GetFieldID( envptr, PairClass, &quot;first&quot;, &quot;Ljava/lang/Object;&quot; );\r\n\r\n\twhile(1)\r\n\t{\r\n\t\t// Instead of using Looper::loop(), we just call next on the looper object.\r\n\t\tjobject msg = env-&gt;CallObjectMethod( envptr, lque, nextMethod );\r\n\t\tjobject innerObj = env-&gt;GetObjectField( envptr, msg, objid );\r\n\t\tconst char * name;\r\n\t\tjstring strObj;\r\n\t\tjclass innerClass;\r\n\t\t\r\n\t\t// Check Object Type\r\n\t\t{\r\n\t\t\tinnerClass = env-&gt;GetObjectClass( envptr, innerObj );\r\n\t\t\tjmethodID mid = env-&gt;GetMethodID( envptr, innerClass, &quot;getClass&quot;, &quot;()Ljava/lang/Class;&quot;);\r\n\t\t\tjobject clsObj = env-&gt;CallObjectMethod( envptr, innerObj, mid );\r\n\t\t\tjclass clazzz = env-&gt;GetObjectClass( envptr, clsObj );\r\n\t\t\tmid = env-&gt;GetMethodID(envptr, clazzz, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\r\n\t\t\tstrObj = (jstring)env-&gt;CallObjectMethod( envptr, clsObj, mid);\r\n\t\t\tname = env-&gt;GetStringUTFChars( envptr, strObj, 0);\r\n\t\t\tenv-&gt;DeleteLocalRef( envptr, clsObj );\r\n\t\t\tenv-&gt;DeleteLocalRef( envptr, clazzz );\r\n\t\t}\r\n\r\n\t\tif( strcmp( name, &quot;z5&quot; ) == 0 )\r\n\t\t{\r\n\t\t\t// Special, Some Androids (notably Meta Quest) use a different private message type.\r\n\t\t\tjfieldID mstrf  = env-&gt;GetFieldID( envptr, innerClass, &quot;a&quot;, &quot;[B&quot; );\r\n\t\t\tjbyteArray jba = (jstring)env-&gt;GetObjectField(envptr, innerObj, mstrf );\r\n\t\t\tint len = env-&gt;GetArrayLength( envptr, jba );\r\n\t\t\tjboolean isCopy = 0;\r\n\t\t\tjbyte * bufferPtr = env-&gt;GetByteArrayElements(envptr, jba, &amp;isCopy);\r\n\r\n\t\t\tif( len &gt;= 6 )\r\n\t\t\t{\r\n\t\t\t\tconst char *descr = (const char*)bufferPtr + 6;\r\n\t\t\t\tchar tcpy[len-5];\r\n\t\t\t\tmemcpy( tcpy, descr, len-6 );\r\n\t\t\t\ttcpy[len-6] = 0;\r\n\t\t\t\tsnprintf( fromJSBuffer, sizeof( fromJSBuffer)-1, &quot;WebMessage: %s\\n&quot;, tcpy );\r\n\r\n\t\t\t\tenv-&gt;DeleteLocalRef( envptr, jba );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tjobject MessagePayload = env-&gt;GetObjectField( envptr, innerObj, pairfirst );\r\n\t\t\t// MessagePayload is a org.chromium.content_public.browser.MessagePayload\r\n\r\n\t\t\tjclass mpclass = env-&gt;GetObjectClass( envptr, MessagePayload );\r\n\r\n\t\t\t// Get field &quot;b&quot; which is the web message payload.\r\n\t\t\t// If you are using binary sockets, it will be in `c` and be a byte array.\r\n\t\t\tjfieldID mstrf  = env-&gt;GetFieldID( envptr, mpclass, &quot;b&quot;, &quot;Ljava/lang/String;&quot; );\r\n\t\t\tjstring strObjDescr = (jstring)env-&gt;GetObjectField(envptr, MessagePayload, mstrf );\r\n\r\n\t\t\tconst char *descr = env-&gt;GetStringUTFChars( envptr, strObjDescr, 0);\r\n\t\t\tsnprintf( fromJSBuffer, sizeof( fromJSBuffer)-1, &quot;WebMessage: %s\\n&quot;, descr );\r\n\r\n\t\t\tenv-&gt;ReleaseStringUTFChars(envptr, strObjDescr, descr);\r\n\t\t\tenv-&gt;DeleteLocalRef( envptr, strObjDescr );\r\n\t\t\tenv-&gt;DeleteLocalRef( envptr, MessagePayload );\r\n\t\t\tenv-&gt;DeleteLocalRef( envptr, mpclass );\r\n\t\t}\r\n\t\tenv-&gt;ReleaseStringUTFChars(envptr, strObj, name);\r\n\t\tenv-&gt;DeleteLocalRef( envptr, strObj );\r\n\t\tenv-&gt;DeleteLocalRef( envptr, msg );\r\n\t\tenv-&gt;DeleteLocalRef( envptr, innerObj );\r\n\t\tenv-&gt;DeleteLocalRef( envptr, innerClass );\r\n\t}\r\n}\r\n```\r\n","title":"Android NativeActivity receiving android/os/Handler","body":"<p>This can be done by manually iterating through the messages, by calling <code>next</code> on the looper's <code>MessageQueue</code>.  That way you receive the Java objects and callback yourself that would ordinarily be executed.</p>\n<p>From there you can extract the payload and do what you wish without calling a null callback, which would cause everything to break.</p>\n<p>Interpreting the MessagePayload is tricker. In some versions of Android, you can access the b for String and c for byte[] fields of MessagePayload and for others yet, you have to back out one more step and you can access the byte array for the MessagePayload Object.</p>\n<p>I have an example of this here:\n<a href=\"https://github.com/cnlohr/rawdrawandroid/blob/a77293aadb95f59cb3c2e8987bc976c06bee5a65/test.c#L317-L418\" rel=\"nofollow noreferrer\">https://github.com/cnlohr/rawdrawandroid/blob/a77293aadb95f59cb3c2e8987bc976c06bee5a65/test.c#L317-L418</a></p>\n<pre class=\"lang-c prettyprint-override\"><code>    jclass LooperClass = env-&gt;FindClass(envptr, &quot;android/os/Looper&quot;);\n    jmethodID myLooperMethod = env-&gt;GetStaticMethodID(envptr, LooperClass, &quot;myLooper&quot;, &quot;()Landroid/os/Looper;&quot;);\n    jobject thisLooper = env-&gt;CallStaticObjectMethod( envptr, LooperClass, myLooperMethod );\n    if( !thisLooper )\n    {\n        jmethodID prepareMethod = env-&gt;GetStaticMethodID(envptr, LooperClass, &quot;prepare&quot;, &quot;()V&quot;);\n        env-&gt;CallStaticVoidMethod( envptr, LooperClass, prepareMethod );\n        thisLooper = env-&gt;CallStaticObjectMethod( envptr, LooperClass, myLooperMethod );\n        g_attachLooper = env-&gt;NewGlobalRef(envptr, thisLooper);\n    }\n\n    jmethodID getQueueMethod = env-&gt;GetMethodID( envptr, LooperClass, &quot;getQueue&quot;, &quot;()Landroid/os/MessageQueue;&quot; );\n    jobject   lque = env-&gt;CallObjectMethod( envptr, g_attachLooper, getQueueMethod );\n\n    jclass MessageQueueClass = env-&gt;FindClass(envptr, &quot;android/os/MessageQueue&quot;);\n    jmethodID nextMethod = env-&gt;GetMethodID( envptr, MessageQueueClass, &quot;next&quot;, &quot;()Landroid/os/Message;&quot; );\n    \n    jclass MessageClass = env-&gt;FindClass(envptr, &quot;android/os/Message&quot;);\n    jfieldID objid = env-&gt;GetFieldID( envptr, MessageClass, &quot;obj&quot;, &quot;Ljava/lang/Object;&quot; );\n    jclass PairClass = env-&gt;FindClass(envptr, &quot;android/util/Pair&quot;);\n    jfieldID pairfirst  = env-&gt;GetFieldID( envptr, PairClass, &quot;first&quot;, &quot;Ljava/lang/Object;&quot; );\n\n    while(1)\n    {\n        // Instead of using Looper::loop(), we just call next on the looper object.\n        jobject msg = env-&gt;CallObjectMethod( envptr, lque, nextMethod );\n        jobject innerObj = env-&gt;GetObjectField( envptr, msg, objid );\n        const char * name;\n        jstring strObj;\n        jclass innerClass;\n        \n        // Check Object Type\n        {\n            innerClass = env-&gt;GetObjectClass( envptr, innerObj );\n            jmethodID mid = env-&gt;GetMethodID( envptr, innerClass, &quot;getClass&quot;, &quot;()Ljava/lang/Class;&quot;);\n            jobject clsObj = env-&gt;CallObjectMethod( envptr, innerObj, mid );\n            jclass clazzz = env-&gt;GetObjectClass( envptr, clsObj );\n            mid = env-&gt;GetMethodID(envptr, clazzz, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\n            strObj = (jstring)env-&gt;CallObjectMethod( envptr, clsObj, mid);\n            name = env-&gt;GetStringUTFChars( envptr, strObj, 0);\n            env-&gt;DeleteLocalRef( envptr, clsObj );\n            env-&gt;DeleteLocalRef( envptr, clazzz );\n        }\n\n        if( strcmp( name, &quot;z5&quot; ) == 0 )\n        {\n            // Special, Some Androids (notably Meta Quest) use a different private message type.\n            jfieldID mstrf  = env-&gt;GetFieldID( envptr, innerClass, &quot;a&quot;, &quot;[B&quot; );\n            jbyteArray jba = (jstring)env-&gt;GetObjectField(envptr, innerObj, mstrf );\n            int len = env-&gt;GetArrayLength( envptr, jba );\n            jboolean isCopy = 0;\n            jbyte * bufferPtr = env-&gt;GetByteArrayElements(envptr, jba, &amp;isCopy);\n\n            if( len &gt;= 6 )\n            {\n                const char *descr = (const char*)bufferPtr + 6;\n                char tcpy[len-5];\n                memcpy( tcpy, descr, len-6 );\n                tcpy[len-6] = 0;\n                snprintf( fromJSBuffer, sizeof( fromJSBuffer)-1, &quot;WebMessage: %s\\n&quot;, tcpy );\n\n                env-&gt;DeleteLocalRef( envptr, jba );\n            }\n        }\n        else\n        {\n            jobject MessagePayload = env-&gt;GetObjectField( envptr, innerObj, pairfirst );\n            // MessagePayload is a org.chromium.content_public.browser.MessagePayload\n\n            jclass mpclass = env-&gt;GetObjectClass( envptr, MessagePayload );\n\n            // Get field &quot;b&quot; which is the web message payload.\n            // If you are using binary sockets, it will be in `c` and be a byte array.\n            jfieldID mstrf  = env-&gt;GetFieldID( envptr, mpclass, &quot;b&quot;, &quot;Ljava/lang/String;&quot; );\n            jstring strObjDescr = (jstring)env-&gt;GetObjectField(envptr, MessagePayload, mstrf );\n\n            const char *descr = env-&gt;GetStringUTFChars( envptr, strObjDescr, 0);\n            snprintf( fromJSBuffer, sizeof( fromJSBuffer)-1, &quot;WebMessage: %s\\n&quot;, descr );\n\n            env-&gt;ReleaseStringUTFChars(envptr, strObjDescr, descr);\n            env-&gt;DeleteLocalRef( envptr, strObjDescr );\n            env-&gt;DeleteLocalRef( envptr, MessagePayload );\n            env-&gt;DeleteLocalRef( envptr, mpclass );\n        }\n        env-&gt;ReleaseStringUTFChars(envptr, strObj, name);\n        env-&gt;DeleteLocalRef( envptr, strObj );\n        env-&gt;DeleteLocalRef( envptr, msg );\n        env-&gt;DeleteLocalRef( envptr, innerObj );\n        env-&gt;DeleteLocalRef( envptr, innerClass );\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3471187,"reputation":743,"user_id":2926815,"accept_rate":83,"display_name":"Charles Lohr"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76765198,"answer_count":1,"score":0,"last_activity_date":1690360179,"creation_date":1689537891,"question_id":76700211,"body_markdown":"My goal is to receive a message via `WebMessagePort.setWebMessageCallback( 0, MyHandler )` in JNI land.\r\n\r\nLike a similar mechanism to running code on the UI thread, I am hoping to use `ALooper_addFd` - except - that I don&#39;t see any clear mechanism to get the raw event that is called back on the looper, even when I entangle the ALooper and the thread&#39;s current looper (By creating a Looper object first, then calling `ALooper_forThread()`.\r\n\r\nI am able to create a handler that is attached to the Looper I&#39;ve created in this way, but, I do not seem to be able to have any way to receive the raw `Handler` object in my NativeActivity C code.  \r\n\r\nIt seems strange that you can entangle ALooper&#39;s with Loopers, for instance so you can run codeon the UI thread, but that they remain eerily distant from one another.\r\n\r\nIs there some mechanism to getting the Java side of the Looper to notify the C code of an event&#39;s execution, preferably through the file IO pipes or other activity events? I.e. via the NativeActivity&#39;s callbacks?","title":"Android NativeActivity receiving android/os/Handler","body":"<p>My goal is to receive a message via <code>WebMessagePort.setWebMessageCallback( 0, MyHandler )</code> in JNI land.</p>\n<p>Like a similar mechanism to running code on the UI thread, I am hoping to use <code>ALooper_addFd</code> - except - that I don't see any clear mechanism to get the raw event that is called back on the looper, even when I entangle the ALooper and the thread's current looper (By creating a Looper object first, then calling <code>ALooper_forThread()</code>.</p>\n<p>I am able to create a handler that is attached to the Looper I've created in this way, but, I do not seem to be able to have any way to receive the raw <code>Handler</code> object in my NativeActivity C code.</p>\n<p>It seems strange that you can entangle ALooper's with Loopers, for instance so you can run codeon the UI thread, but that they remain eerily distant from one another.</p>\n<p>Is there some mechanism to getting the Java side of the Looper to notify the C code of an event's execution, preferably through the file IO pipes or other activity events? I.e. via the NativeActivity's callbacks?</p>\n"},{"tags":["java","image","swing","icons"],"comments":[{"owner":{"account_id":1054151,"reputation":24498,"user_id":1057230,"accept_rate":100,"display_name":"nIcE cOw"},"score":0,"creation_date":1392576388,"post_id":21815271,"comment_id":33015302,"body_markdown":"Please have a look at how to [add images to your Project in Java Swing](http://stackoverflow.com/a/9866659/1057230). Hope it might be able to help you in some way :-)","body":"Please have a look at how to <a href=\"http://stackoverflow.com/a/9866659/1057230\">add images to your Project in Java Swing</a>. Hope it might be able to help you in some way :-)"}],"answers":[{"tags":[],"owner":{"account_id":3971442,"reputation":265,"user_id":3275953,"display_name":"Ahmed.ess"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1392575205,"creation_date":1392575151,"answer_id":21815503,"question_id":21815271,"body_markdown":"try this ;)  \r\n\r\n    JLabel lim= new JLabel();\r\n    lim.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/image/images.jpg&quot;)));\r\n\r\n","title":"Pictures are not shown in JLabel in running time","body":"<p>try this ;)  </p>\n\n<pre><code>JLabel lim= new JLabel();\nlim.setIcon(new javax.swing.ImageIcon(getClass().getResource(\"/image/images.jpg\")));\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user3350900"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1393326491,"creation_date":1393326491,"answer_id":22012353,"question_id":21815271,"body_markdown":"\r\npublic class Decompress {\r\n    public static void main(String[] args) throws FileNotFoundException, IOException {\r\n      \r\n     FileOutputStream fout=new FileOutputStream(&quot;D://qq.txt&quot;);\r\n        FileInputStream fin=new FileInputStream(&quot;D://kk.txt&quot;);\r\n        InflaterInputStream in=new InflaterInputStream(fin);\r\n        int i;\r\n        while((i=in.read())!=-1)\r\n        {\r\n            fout.write((byte)i);\r\n            fout.flush();\r\n            \r\n        }\r\n        fout.close();\r\n        fin.close();\r\n        in.close();\r\n    }\r\n    \r\n}\r\n","title":"Pictures are not shown in JLabel in running time","body":"<p>public class Decompress {\n    public static void main(String[] args) throws FileNotFoundException, IOException {</p>\n\n<pre><code> FileOutputStream fout=new FileOutputStream(\"D://qq.txt\");\n    FileInputStream fin=new FileInputStream(\"D://kk.txt\");\n    InflaterInputStream in=new InflaterInputStream(fin);\n    int i;\n    while((i=in.read())!=-1)\n    {\n        fout.write((byte)i);\n        fout.flush();\n\n    }\n    fout.close();\n    fin.close();\n    in.close();\n}\n</code></pre>\n\n<p>}</p>\n"}],"owner":{"account_id":4023525,"reputation":13,"user_id":3312825,"display_name":"Rakan 210"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690360015,"creation_date":1392574047,"question_id":21815271,"body_markdown":"Welcome to you all\r\n\r\nI have a slight problem with adding pictures ta JFrame , I&#39;m trying to add a picture to a JLable. It works fine in the simulater, when I&#39;m using Swing Packet in Eclipcs program. However, when I try to run the program, the image disappear completely?!!\r\n\r\nsee the pic here : http://im33.gulfup.com/yf7PH.jpg \r\n\r\nHere is part of my code :\r\n\r\n    JLabel Pic1 = new JLabel(&quot;&quot;);\r\n\t\tPic1.setIcon(new ImageIcon(&quot;C:\\\\Users\\\\Al- Yamani\\\\Downloads\\\\DSC_0243.bmp&quot;));\r\n\t\tPic1.setHorizontalAlignment(SwingConstants.CENTER);\r\n\t\tPic1.setBounds(290, 11, 75, 42);\r\n\t\tcontentPane.add(Pic1);\r\n\r\n \r\n\r\nI do not know what is the problem?! \r\n\r\nAlso, when I try to add an icon on the title bar, it did not show as well!\r\n\r\n    setIconImage(Toolkit.getDefaultToolkit().getImage(&quot;C:\\\\Users\\\\user\\\\Pictures\\\\gifts-icon.png&quot;));\r\n\r\n^^ Both codes are in my constracter body:  `public JFrameName(){.....}`\r\n\r\n\r\n ","title":"Pictures are not shown in JLabel in running time","body":"<p>Welcome to you all</p>\n\n<p>I have a slight problem with adding pictures ta JFrame , I'm trying to add a picture to a JLable. It works fine in the simulater, when I'm using Swing Packet in Eclipcs program. However, when I try to run the program, the image disappear completely?!!</p>\n\n<p>see the pic here : <a href=\"http://im33.gulfup.com/yf7PH.jpg\" rel=\"nofollow\">http://im33.gulfup.com/yf7PH.jpg</a> </p>\n\n<p>Here is part of my code :</p>\n\n<pre><code>JLabel Pic1 = new JLabel(\"\");\n    Pic1.setIcon(new ImageIcon(\"C:\\\\Users\\\\Al- Yamani\\\\Downloads\\\\DSC_0243.bmp\"));\n    Pic1.setHorizontalAlignment(SwingConstants.CENTER);\n    Pic1.setBounds(290, 11, 75, 42);\n    contentPane.add(Pic1);\n</code></pre>\n\n<p>I do not know what is the problem?! </p>\n\n<p>Also, when I try to add an icon on the title bar, it did not show as well!</p>\n\n<pre><code>setIconImage(Toolkit.getDefaultToolkit().getImage(\"C:\\\\Users\\\\user\\\\Pictures\\\\gifts-icon.png\"));\n</code></pre>\n\n<p>^^ Both codes are in my constracter body:  <code>public JFrameName(){.....}</code></p>\n"},{"tags":["java","spring-boot","automated-tests","junit5","junit-jupiter"],"answers":[{"tags":[],"owner":{"account_id":15361,"reputation":4976,"user_id":32352,"accept_rate":62,"display_name":"johanneslink"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690359532,"creation_date":1690359532,"answer_id":76769271,"question_id":76767749,"body_markdown":"The JUnit API only allows String values as configuration parameters in the launcher. The reason is that discovering and launching tests potentially runs in a different JVM and process than test engine execution. All IDEs I&#39;m aware of do that for instance. \r\n\r\nPassing objects would therefore require some kind of (de-)serialization mechanism in order to transport them from one JVM to another. Sadly, Java has no reliable, generic and safe serialization mechanism.\r\n\r\nWhat you could do:\r\n- Serialize your complex object yourself into a String and use it as configuration parameter.\r\n- Unserialize it in your parameter resolver implementation.\r\n","title":"JUnit 5 when using JUnit Platform Launcher API how to pass a custom object to running test method which is annotated with @TestFactory","body":"<p>The JUnit API only allows String values as configuration parameters in the launcher. The reason is that discovering and launching tests potentially runs in a different JVM and process than test engine execution. All IDEs I'm aware of do that for instance.</p>\n<p>Passing objects would therefore require some kind of (de-)serialization mechanism in order to transport them from one JVM to another. Sadly, Java has no reliable, generic and safe serialization mechanism.</p>\n<p>What you could do:</p>\n<ul>\n<li>Serialize your complex object yourself into a String and use it as configuration parameter.</li>\n<li>Unserialize it in your parameter resolver implementation.</li>\n</ul>\n"}],"owner":{"account_id":2636809,"reputation":393,"user_id":2281246,"accept_rate":40,"display_name":"dnWick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690359532,"creation_date":1690340369,"question_id":76767749,"body_markdown":"I&#39;m trying to run a series of tests dynamically. Imagine a scenario from main class I will be creating a launcher as below,\r\n\r\n        Launcher launcher = LauncherFactory.create();\r\n        \r\n        LauncherDiscoveryRequest request = LauncherDiscoveryRequestBuilder.request().\r\n                                configurationParameter(META_TEST_INFORMATION_KEY, serializedString).\r\n    selectors(selectPackage(&quot;my.package&quot;)).build();\r\n\r\nAs you can see in the configurationParameter(META_TEST_INFORMATION_KEY, serializedString) section right now I have serialize a whole object and sent as it only supports String. But I need to pass a complex object like a FeignClient , JdbcClient etc (Which cannot be serialized) to the test class method below,\r\n\r\n    @ExtendWith(CustomParameterResolver.class)\r\n    public class JUnitTestRunner {\r\n    \r\n        private static final Logger log = LogManager.getLogger(JUnitTestRunner.class);\r\n    \r\n        @TestFactory\r\n        Collection&lt;DynamicTest&gt; dynamicTestCollection(String data) throws TestFrameworkException {\r\n            TestMetaData metaData = deserializeObject(data);\r\n            List&lt;DynamicTest&gt; testList = new ArrayList&lt;&gt;();\r\n    \r\n            for (int i = 0; i &lt; metaData.getGroupedOrderedTestCases().size(); i++) {\r\n    \r\n                TestCaseMetaInfo testCaseMetaInfo = metaData.getMapOfNumberedTestCaseMetaInfo().\r\n                        get(metaData.getGroupedOrderedTestCases().get(i));\r\n                testList.add(DynamicTest.dynamicTest(\r\n                        testCaseMetaInfo.getName(),\r\n                        () -&gt; {\r\n                            log.info(&quot;Running TEST Number &quot; + testCaseMetaInfo.getCaseNumber());\r\n    \r\n                        }));\r\n            }\r\n            return testList;\r\n        }\r\n    \r\n    }\r\n\r\nBelow is my CustomParameterResolver,\r\n\r\n    public class CustomParameterResolver implements ParameterResolver {\r\n    \r\n        private static final Logger log = LogManager.getLogger(CustomParameterResolver.class);\r\n        @Override\r\n        public boolean supportsParameter(ParameterContext parameterContext, ExtensionContext extensionContext) {\r\n            return parameterContext.getParameter().getType() == String.class;\r\n        }\r\n    \r\n        @Override\r\n        public Object resolveParameter(ParameterContext parameterContext, ExtensionContext extensionContext)\r\n                throws ParameterResolutionException {\r\n            return extensionContext.getConfigurationParameter(META_TEST_INFORMATION_KEY).orElse(&quot;&quot;);\r\n        }\r\n    }\r\n\r\nIm not sure whether my approach is wrong but right now I only saw how to pass a string. Not a complex object. My ultimate goal is run series of tests using provided http client and a database client without creating them every time for each series of tests. Can you please help me with this.","title":"JUnit 5 when using JUnit Platform Launcher API how to pass a custom object to running test method which is annotated with @TestFactory","body":"<p>I'm trying to run a series of tests dynamically. Imagine a scenario from main class I will be creating a launcher as below,</p>\n<pre><code>    Launcher launcher = LauncherFactory.create();\n    \n    LauncherDiscoveryRequest request = LauncherDiscoveryRequestBuilder.request().\n                            configurationParameter(META_TEST_INFORMATION_KEY, serializedString).\nselectors(selectPackage(&quot;my.package&quot;)).build();\n</code></pre>\n<p>As you can see in the configurationParameter(META_TEST_INFORMATION_KEY, serializedString) section right now I have serialize a whole object and sent as it only supports String. But I need to pass a complex object like a FeignClient , JdbcClient etc (Which cannot be serialized) to the test class method below,</p>\n<pre><code>@ExtendWith(CustomParameterResolver.class)\npublic class JUnitTestRunner {\n\n    private static final Logger log = LogManager.getLogger(JUnitTestRunner.class);\n\n    @TestFactory\n    Collection&lt;DynamicTest&gt; dynamicTestCollection(String data) throws TestFrameworkException {\n        TestMetaData metaData = deserializeObject(data);\n        List&lt;DynamicTest&gt; testList = new ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; metaData.getGroupedOrderedTestCases().size(); i++) {\n\n            TestCaseMetaInfo testCaseMetaInfo = metaData.getMapOfNumberedTestCaseMetaInfo().\n                    get(metaData.getGroupedOrderedTestCases().get(i));\n            testList.add(DynamicTest.dynamicTest(\n                    testCaseMetaInfo.getName(),\n                    () -&gt; {\n                        log.info(&quot;Running TEST Number &quot; + testCaseMetaInfo.getCaseNumber());\n\n                    }));\n        }\n        return testList;\n    }\n\n}\n</code></pre>\n<p>Below is my CustomParameterResolver,</p>\n<pre><code>public class CustomParameterResolver implements ParameterResolver {\n\n    private static final Logger log = LogManager.getLogger(CustomParameterResolver.class);\n    @Override\n    public boolean supportsParameter(ParameterContext parameterContext, ExtensionContext extensionContext) {\n        return parameterContext.getParameter().getType() == String.class;\n    }\n\n    @Override\n    public Object resolveParameter(ParameterContext parameterContext, ExtensionContext extensionContext)\n            throws ParameterResolutionException {\n        return extensionContext.getConfigurationParameter(META_TEST_INFORMATION_KEY).orElse(&quot;&quot;);\n    }\n}\n</code></pre>\n<p>Im not sure whether my approach is wrong but right now I only saw how to pass a string. Not a complex object. My ultimate goal is run series of tests using provided http client and a database client without creating them every time for each series of tests. Can you please help me with this.</p>\n"},{"tags":["java","timer","scheduling","scheduledexecutorservice"],"comments":[{"owner":{"account_id":2892776,"reputation":3221,"user_id":2481153,"display_name":"HungNM2"},"score":0,"creation_date":1652492309,"post_id":48956511,"comment_id":127626312,"body_markdown":"Timer is an implement Class.  ScheduledExecutorService is an interface without implementation. So we should compare Timer vs ScheduledThreadPoolExecutor which is an implementation class of ScheduledExecutorService interface","body":"Timer is an implement Class.  ScheduledExecutorService is an interface without implementation. So we should compare Timer vs ScheduledThreadPoolExecutor which is an implementation class of ScheduledExecutorService interface"}],"answers":[{"tags":[],"owner":{"account_id":10555285,"reputation":1221,"user_id":7776688,"display_name":"IEE1394"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690359443,"creation_date":1519421886,"answer_id":48956564,"question_id":48956511,"body_markdown":"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay(java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit)\r\n\r\n&gt; Creates and executes a periodic action that becomes enabled first\r\n&gt; after the given initial delay, and subsequently with the given delay\r\n&gt; between the termination of one execution and the commencement of the\r\n&gt; next.\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule(java.util.TimerTask,%20long,%20long)\r\n\r\n&gt; Schedules the specified task for repeated fixed-delay execution,\r\n&gt; beginning after the specified delay. Subsequent executions take place\r\n&gt; at approximately regular intervals separated by the specified period.\r\n\r\nI would say - Yes ;-)","title":"Timer vs. ScheduledExecutorService scheduling","body":"<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay(java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay(java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit)</a></p>\n<blockquote>\n<p>Creates and executes a periodic action that becomes enabled first\nafter the given initial delay, and subsequently with the given delay\nbetween the termination of one execution and the commencement of the\nnext.</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule(java.util.TimerTask,%20long,%20long)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule(java.util.TimerTask,%20long,%20long)</a></p>\n<blockquote>\n<p>Schedules the specified task for repeated fixed-delay execution,\nbeginning after the specified delay. Subsequent executions take place\nat approximately regular intervals separated by the specified period.</p>\n</blockquote>\n<p>I would say - Yes ;-)</p>\n"},{"tags":[],"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649409354,"creation_date":1649409354,"answer_id":71794510,"question_id":48956511,"body_markdown":"[`Timer#schedule(TimerTask, long, long)`][1] has no counterpart in [`ScheduledExecutorService`][2] or its implementation [`ScheduledThreadPoolExecutor`][3]. Although this method is documented as\r\n\r\n&gt; repeated fixed-delay execution,\r\n\r\nit bahaves fundamentally different than [`ScheduledThreadPoolExecutor#scheduleWithFixedDelay(...)`][4] and let alone [`ScheduledThreadPoolExecutor#scheduleAtFixedRate(...)`][5]. I have explained the difference between all these methods more detailed as part of [this answer][6].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Timer.html#schedule(java.util.TimerTask,long,long)\r\n  [2]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\r\n  [3]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ScheduledThreadPoolExecutor.html\r\n  [4]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ScheduledThreadPoolExecutor.html#scheduleWithFixedDelay(java.lang.Runnable,long,long,java.util.concurrent.TimeUnit)\r\n  [5]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ScheduledThreadPoolExecutor.html#scheduleAtFixedRate(java.lang.Runnable,long,long,java.util.concurrent.TimeUnit)\r\n  [6]: https://stackoverflow.com/a/71761712/3882565","title":"Timer vs. ScheduledExecutorService scheduling","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Timer.html#schedule(java.util.TimerTask,long,long)\" rel=\"nofollow noreferrer\"><code>Timer#schedule(TimerTask, long, long)</code></a> has no counterpart in <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\" rel=\"nofollow noreferrer\"><code>ScheduledExecutorService</code></a> or its implementation <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ScheduledThreadPoolExecutor.html\" rel=\"nofollow noreferrer\"><code>ScheduledThreadPoolExecutor</code></a>. Although this method is documented as</p>\n<blockquote>\n<p>repeated fixed-delay execution,</p>\n</blockquote>\n<p>it bahaves fundamentally different than <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ScheduledThreadPoolExecutor.html#scheduleWithFixedDelay(java.lang.Runnable,long,long,java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\"><code>ScheduledThreadPoolExecutor#scheduleWithFixedDelay(...)</code></a> and let alone <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ScheduledThreadPoolExecutor.html#scheduleAtFixedRate(java.lang.Runnable,long,long,java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\"><code>ScheduledThreadPoolExecutor#scheduleAtFixedRate(...)</code></a>. I have explained the difference between all these methods more detailed as part of <a href=\"https://stackoverflow.com/a/71761712/3882565\">this answer</a>.</p>\n"}],"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5364,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1690359443,"creation_date":1519421555,"question_id":48956511,"body_markdown":"One of the recommended uses of the [ScheduledExecutorService][1] is as a direct replacement for the [Timer][2] class, as discussed in numerous `StackOverflow` topics already:\r\n\r\n - [Java Timer vs ExecutorService?][3]\r\n - [Difference between TimerTask and Executors.newScheduledThreadPool(1)][3]\r\n - [What is the difference between schedule and scheduleAtFixedRate?][4]\r\n - [Android Timer schedule vs scheduleAtFixedRate][5]\r\n\r\nHowever, the naming conventions of the methods supported by `ScheduledExecutorService` and `Timer`, are not identical. For example, whereas they both have a `scheduleAtFixedRate()` method, the Timer method\r\n\r\n - schedule​(TimerTask task, long delay, long period)\r\n\r\ndoes not have a namesake counterpart.\r\n\r\nIs the `ScheduledExecutorService` method\r\n\r\n - scheduleWithFixedDelay​(Runnable command, long initialDelay, long delay, TimeUnit unit)\r\n\r\nthe one to use instead?\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/ScheduledExecutorService.html\r\n  [2]: https://docs.oracle.com/javase/9/docs/api/java/util/Timer.html\r\n  [3]: https://stackoverflow.com/questions/409932/java-timer-vs-executorservice\r\n  [4]: https://stackoverflow.com/questions/22486997/what-is-the-difference-between-schedule-and-scheduleatfixedrate\r\n  [5]: https://stackoverflow.com/questions/12684604/android-timer-schedule-vs-scheduleatfixedrate","title":"Timer vs. ScheduledExecutorService scheduling","body":"<p>One of the recommended uses of the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/ScheduledExecutorService.html\" rel=\"nofollow noreferrer\">ScheduledExecutorService</a> is as a direct replacement for the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Timer.html\" rel=\"nofollow noreferrer\">Timer</a> class, as discussed in numerous <code>StackOverflow</code> topics already:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/409932/java-timer-vs-executorservice\">Java Timer vs ExecutorService?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/409932/java-timer-vs-executorservice\">Difference between TimerTask and Executors.newScheduledThreadPool(1)</a></li>\n<li><a href=\"https://stackoverflow.com/questions/22486997/what-is-the-difference-between-schedule-and-scheduleatfixedrate\">What is the difference between schedule and scheduleAtFixedRate?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12684604/android-timer-schedule-vs-scheduleatfixedrate\">Android Timer schedule vs scheduleAtFixedRate</a></li>\n</ul>\n\n<p>However, the naming conventions of the methods supported by <code>ScheduledExecutorService</code> and <code>Timer</code>, are not identical. For example, whereas they both have a <code>scheduleAtFixedRate()</code> method, the Timer method</p>\n\n<ul>\n<li>schedule​(TimerTask task, long delay, long period)</li>\n</ul>\n\n<p>does not have a namesake counterpart.</p>\n\n<p>Is the <code>ScheduledExecutorService</code> method</p>\n\n<ul>\n<li>scheduleWithFixedDelay​(Runnable command, long initialDelay, long delay, TimeUnit unit)</li>\n</ul>\n\n<p>the one to use instead?</p>\n"},{"tags":["java","spring-boot","gradle","environment-variables","jetbrains-fleet"],"answers":[{"tags":[],"owner":{"account_id":6307621,"reputation":309,"user_id":4900235,"display_name":"Jadson Santos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666140280,"creation_date":1666140280,"answer_id":74118779,"question_id":74118778,"body_markdown":"\r\nAfter try a lot, I found a solution:\r\n\r\n - Run -&gt;  Create a run configuration in run.json ...\r\n - Add a &quot;configurations&quot;, then type &quot;gradle&quot; (to Fleet autocomplete it).\r\n - In &quot;tasks&quot; list, type &quot;bootRun&quot;.\r\n - And, at last, incluse the environment object with your variables values.\r\n\r\nThe final run.json file should stay like this:\r\n\r\n```\r\n{\r\n  &quot;configurations&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;run app&quot;,\r\n      &quot;type&quot;: &quot;gradle&quot;,\r\n      &quot;tasks&quot;: [\r\n        &quot;bootRun&quot;\r\n      ],\r\n      &quot;environment&quot;: {\r\n        &quot;DATABASE_URL&quot; : &quot;jdbc:postgresql://localhost:5432/test&quot;,\r\n        &quot;DATABASE_USER&quot; : &quot;Postgres&quot;,\r\n        &quot;DATABASE_PASSWORD&quot; : &quot;Postgres&quot;\r\n      },\r\n    }\r\n  ],\r\n\r\n}\r\n```\r\n\r\n - Now, go to &quot;Run&quot; again and will appear a option &quot;run app&quot; to execute your application using environment variable.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uBLly.png","title":"Run Spring Boot Application in JetBrain Fleet with Environment Variables","body":"<p>After try a lot, I found a solution:</p>\n<ul>\n<li>Run -&gt;  Create a run configuration in run.json ...</li>\n<li>Add a &quot;configurations&quot;, then type &quot;gradle&quot; (to Fleet autocomplete it).</li>\n<li>In &quot;tasks&quot; list, type &quot;bootRun&quot;.</li>\n<li>And, at last, incluse the environment object with your variables values.</li>\n</ul>\n<p>The final run.json file should stay like this:</p>\n<pre><code>{\n  &quot;configurations&quot;: [\n    {\n      &quot;name&quot;: &quot;run app&quot;,\n      &quot;type&quot;: &quot;gradle&quot;,\n      &quot;tasks&quot;: [\n        &quot;bootRun&quot;\n      ],\n      &quot;environment&quot;: {\n        &quot;DATABASE_URL&quot; : &quot;jdbc:postgresql://localhost:5432/test&quot;,\n        &quot;DATABASE_USER&quot; : &quot;Postgres&quot;,\n        &quot;DATABASE_PASSWORD&quot; : &quot;Postgres&quot;\n      },\n    }\n  ],\n\n}\n</code></pre>\n<ul>\n<li>Now, go to &quot;Run&quot; again and will appear a option &quot;run app&quot; to execute your application using environment variable.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/uBLly.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uBLly.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":6307621,"reputation":309,"user_id":4900235,"display_name":"Jadson Santos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2611,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74118779,"answer_count":1,"score":0,"last_activity_date":1690359014,"creation_date":1666140280,"question_id":74118778,"body_markdown":"I am trying to run my spring boot application on new JetBrain Fleet IDE, but I could not find easily a way to do that.\r\n\r\nIn the [documentation page][1] , the JetBrain said:\r\n\r\n&gt;An object that specifies custom environment variables. To define an environment variable, add a property, where the key is the variable name and the value is the value of the variable, for example:\r\n\r\n```\r\n&quot;environment&quot;: {\r\n    &quot;TEMP_DIR&quot;: &quot;/home/user/temp&quot;,\r\n    &quot;GENERATE_RANDOM_PASSWORD&quot;: &quot;true&quot;\r\n} \r\n``` \r\n\r\nBut, they do not show where this &quot;environment&quot; object goes.\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/fleet/run-configs.html#reference","title":"Run Spring Boot Application in JetBrain Fleet with Environment Variables","body":"<p>I am trying to run my spring boot application on new JetBrain Fleet IDE, but I could not find easily a way to do that.</p>\n<p>In the <a href=\"https://www.jetbrains.com/help/fleet/run-configs.html#reference\" rel=\"nofollow noreferrer\">documentation page</a> , the JetBrain said:</p>\n<blockquote>\n<p>An object that specifies custom environment variables. To define an environment variable, add a property, where the key is the variable name and the value is the value of the variable, for example:</p>\n</blockquote>\n<pre><code>&quot;environment&quot;: {\n    &quot;TEMP_DIR&quot;: &quot;/home/user/temp&quot;,\n    &quot;GENERATE_RANDOM_PASSWORD&quot;: &quot;true&quot;\n} \n</code></pre>\n<p>But, they do not show where this &quot;environment&quot; object goes.</p>\n"},{"tags":["java","spring-boot","upload","large-files","embedded-jetty"],"comments":[{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":0,"creation_date":1690354570,"post_id":76768662,"comment_id":135339921,"body_markdown":"hello, Any additional information in the stacktrace? Maybe you could paste it also in your question?","body":"hello, Any additional information in the stacktrace? Maybe you could paste it also in your question?"},{"owner":{"account_id":11382249,"reputation":1662,"user_id":8344860,"display_name":"Anshita Singh"},"score":0,"creation_date":1690356251,"post_id":76768662,"comment_id":135340249,"body_markdown":"I have added a stack trace. Nothing much is showing in the logs. Only `out of memory` is coming and then the app is crashing.","body":"I have added a stack trace. Nothing much is showing in the logs. Only <code>out of memory</code> is coming and then the app is crashing."}],"answers":[{"tags":[],"owner":{"account_id":28581631,"reputation":3,"user_id":21882498,"display_name":"Abolfazl Eijadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690359009,"creation_date":1690359009,"answer_id":76769194,"question_id":76768662,"body_markdown":"I think you have to increase the size of the Heap. \r\n\r\n    1GB as initial heap size [-Xms1024M ]\r\n\r\n    5GB as maximum heap size [-Xmx5120M ]","title":"Springboot large file upload throw &quot;Out Of Memory&quot;","body":"<p>I think you have to increase the size of the Heap.</p>\n<pre><code>1GB as initial heap size [-Xms1024M ]\n\n5GB as maximum heap size [-Xmx5120M ]\n</code></pre>\n"}],"owner":{"account_id":11382249,"reputation":1662,"user_id":8344860,"display_name":"Anshita Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690359009,"creation_date":1690354296,"question_id":76768662,"body_markdown":"I am using **Springboot (2.x) with Jetty Server** and trying to **upload MULTIPLE large files(~2.2GB) PARALLEL** to S3 via direct Streaming, still getting `Out Of Memory` Issue. So, my question is `Is SpringBoot loads InputStream in memory?` Since I am not loading InputStream in memory.\r\n\r\n**Controller Class:**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/v1/{customerId}/{uniqueDocId}/files&quot;)\r\n    \r\n    public class FileController {\r\n    \r\n        @Autowired\r\n        private FileService fileService;\r\n    \r\n        @PostMapping(produces = &quot;application/json&quot;)\r\n        public ResponseEntity&lt;UploadFileResponse&gt; uploadFile(\r\n        @RequestParam InputStream file,\r\n        @RequestHeader(HttpHeaders.CONTENT_LENGTH) final long contentLength) throws IOException {\r\n\r\n        FileUploadInput input =\r\n                FileUploadInput.builder().file(file).contentLength(contentLength).build();\r\n            try{\r\n                return ResponseEntity.ok(fileService.uploadFile(input));\r\n            } finally {\r\n                if(input.getFile() != null) {\r\n                    input.getFile().close();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n**Service Class:**\r\n\r\n    @Servive\r\n    public class FileServiceImpl implements FileService {\r\n    \r\n      @Autowired\r\n      private AmazonS3 s3Client;\r\n    \r\n      @Override\r\n      public void uploadFile(FileUploadInput input) {\r\n        try {\r\n          ObjectMetadata objMetadata = new ObjectMetadata();\r\n          objMetadata.setContentLength(input.getContentLength());\r\n          PutObjectRequest putObjectRequest =\r\n              new PutObjectRequest(bucketName, s3Key, input.getFile(), objMetadata);\r\n          s3Client.putObject(putObjectRequest);\r\n        }\r\n      }\r\n    }\r\n\r\n**application.properties file:**\r\n\r\n    spring.servlet.multipart.max-file-size: 5GB\r\n    spring.servlet.multipart.max-request-size: 5GB\r\n\r\n**Below Hardware Details where I am running my SpringBoot Application:**\r\n\r\n    Memory:3G\r\n    Disk:5G\r\n\r\n**Question:** Even I am directly Streaming from the client to the SpringBoot app to S3. Then Why SpringBoot is throwing `out of memory` even though I have set server multipart properties?\r\n\r\n**I have also tried to change InputStream to Multipart. Still, I am getting the same problem.**\r\n\r\n**Stack Trace:** Only the below logs are visible in the console then the app crashes.\r\n\r\n    2023-07-26T12:51:26.988+05:30 [APP/PROC/WEB/0] [OUT] Exit status 137 (out of memory)\r\n    2023-07-26T12:51:26.990+05:30 [CELL/SSHD/0] [OUT] Exit status 0","title":"Springboot large file upload throw &quot;Out Of Memory&quot;","body":"<p>I am using <strong>Springboot (2.x) with Jetty Server</strong> and trying to <strong>upload MULTIPLE large files(~2.2GB) PARALLEL</strong> to S3 via direct Streaming, still getting <code>Out Of Memory</code> Issue. So, my question is <code>Is SpringBoot loads InputStream in memory?</code> Since I am not loading InputStream in memory.</p>\n<p><strong>Controller Class:</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/v1/{customerId}/{uniqueDocId}/files&quot;)\n\npublic class FileController {\n\n    @Autowired\n    private FileService fileService;\n\n    @PostMapping(produces = &quot;application/json&quot;)\n    public ResponseEntity&lt;UploadFileResponse&gt; uploadFile(\n    @RequestParam InputStream file,\n    @RequestHeader(HttpHeaders.CONTENT_LENGTH) final long contentLength) throws IOException {\n\n    FileUploadInput input =\n            FileUploadInput.builder().file(file).contentLength(contentLength).build();\n        try{\n            return ResponseEntity.ok(fileService.uploadFile(input));\n        } finally {\n            if(input.getFile() != null) {\n                input.getFile().close();\n            }\n        }\n    }\n}\n</code></pre>\n<p><strong>Service Class:</strong></p>\n<pre><code>@Servive\npublic class FileServiceImpl implements FileService {\n\n  @Autowired\n  private AmazonS3 s3Client;\n\n  @Override\n  public void uploadFile(FileUploadInput input) {\n    try {\n      ObjectMetadata objMetadata = new ObjectMetadata();\n      objMetadata.setContentLength(input.getContentLength());\n      PutObjectRequest putObjectRequest =\n          new PutObjectRequest(bucketName, s3Key, input.getFile(), objMetadata);\n      s3Client.putObject(putObjectRequest);\n    }\n  }\n}\n</code></pre>\n<p><strong>application.properties file:</strong></p>\n<pre><code>spring.servlet.multipart.max-file-size: 5GB\nspring.servlet.multipart.max-request-size: 5GB\n</code></pre>\n<p><strong>Below Hardware Details where I am running my SpringBoot Application:</strong></p>\n<pre><code>Memory:3G\nDisk:5G\n</code></pre>\n<p><strong>Question:</strong> Even I am directly Streaming from the client to the SpringBoot app to S3. Then Why SpringBoot is throwing <code>out of memory</code> even though I have set server multipart properties?</p>\n<p><strong>I have also tried to change InputStream to Multipart. Still, I am getting the same problem.</strong></p>\n<p><strong>Stack Trace:</strong> Only the below logs are visible in the console then the app crashes.</p>\n<pre><code>2023-07-26T12:51:26.988+05:30 [APP/PROC/WEB/0] [OUT] Exit status 137 (out of memory)\n2023-07-26T12:51:26.990+05:30 [CELL/SSHD/0] [OUT] Exit status 0\n</code></pre>\n"},{"tags":["java","pcm","mu-law"],"owner":{"account_id":27437875,"reputation":1,"user_id":20933357,"display_name":"SummerBoot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690358572,"creation_date":1690358572,"question_id":76769151,"body_markdown":"Created code to change the PCM file encoded in java to ulaw to Linear PCM in a normal way.\r\nBecause it&#39;s a test code, it&#39;s simple to configure, and when you run it, the ulaw PCM is converted to a specific folder as Linear PCM.\r\nSo I got the file and ran it on a program called Ocean Audio, and the noise gets mixed up too much.\r\nI converted it, but as a result, I couldn&#39;t get the song I wanted.\r\nThere seems to be no problem with Buffered InputStream, making Buffer, converting it to ByteArray\r\nWhy did this happen?\r\n\r\nThe code I tried is as follows.\r\n```\r\npublic static void main(String args[]) throws IOException {\r\n\r\n\t\tString fileName = &quot;ulaw.pcm&quot;;\r\n\t\tFile file = new File(&quot;/home/user/&quot; + fileName);\r\n\t\tFileInputStream fis = new FileInputStream(file);\r\n\t\tint read = 0;\r\n\t\tbyte[] buff = new byte[3200];\r\n\t\tbyte[] audioBytes;\r\n\t\tbyte[] cvtAudioBytes;\r\n\t\tByteArrayOutputStream out = new ByteArrayOutputStream();\r\n\t\tBufferedInputStream in = new BufferedInputStream(fis);\r\n\t\twhile ((read = in.read(buff)) &gt; 0) {\r\n\t\t\tout.write(buff, 0, read);\r\n\t\t}\r\n\r\n\t\taudioBytes = out.toByteArray();\r\n\t\tcvtAudioBytes = Converter.ulaw2Linear(audioBytes);\r\n\t\t\r\n\t\tPath path = Paths.get(&quot;/home/user/convert.pcm&quot;);\r\n\r\n\t\tFiles.write(path, cvtAudioBytes);\r\n\r\n\t\tout.close();\r\n\t\tin.close();\r\n\r\n}\r\n```\r\n\r\nBelow is Converter Class.\r\n```\r\npublic class Converter {\r\n\tpublic static byte[] ulaw2Linear(byte[] ulawBuffer) {\r\n\t\tint ulawSampleSize = ulawBuffer.length;\r\n\t\tint linearSampleSize = ulawSampleSize * 2;\r\n\t\tSystem.out.println(&quot;ulawSampleSize : &quot; + ulawSampleSize);\r\n\t\tSystem.out.println(&quot;linearSampleSize : &quot; + linearSampleSize);\r\n\r\n\t\tbyte[] linearBuffer = new byte[linearSampleSize];\r\n\r\n\t\tfor (int i = 0; i &lt; ulawSampleSize; i++) {\r\n\t\t\tshort sampleValue = ulaw2LinearSample(ulawBuffer[i]);\r\n\t\t\t//System.out.println(sampleValue);\r\n\t\t\tlinearBuffer[i * 2] = (byte) (sampleValue &amp; 0xFF);\r\n\t\t\tlinearBuffer[i * 2 + 1] = (byte) ((sampleValue &gt;&gt; 8) &amp; 0xFF);\r\n\t\t}\r\n\r\n\t\tfor(int i=0; i&lt;linearBuffer.length; i++) {\r\n\t\t\tSystem.out.println(linearBuffer[i]);\r\n\t\t}\r\n\t\treturn linearBuffer;\r\n\t}\r\n\r\n\tprivate static short ulaw2LinearSample(byte ulawSample) {\r\n\t\tint ulawValue = ulawSample &amp; 0xFF;\r\n\t\tulawValue = ulawValue ^ 0xFF; \r\n\t\tint sign = (ulawValue &amp; 0x80) == 0 ? 1 : -1;\r\n\t\tint exponent = (ulawValue &gt;&gt; 4) &amp; 0x07;\r\n\t\tint mantissa = ulawValue &amp; 0x0F;\r\n\t\tint sampleValue = ((1 &lt;&lt; exponent) | (mantissa &lt;&lt; (exponent - 4)) | (1 &lt;&lt; (exponent - 3))) - 33;\r\n\t\treturn (short) (sampleValue * sign);\r\n\t}\r\n\r\n}\r\n```\r\nThe Converter class does not feel wrong because it is a universally converted code. However, the problem with the code used for the main is that\r\nI couldn&#39;t find it. Is there anything lacking in the code?\r\n\r\nThank you.","title":"I&#39;m trying to convert ulaw PCM to Linear PCM in Java","body":"<p>Created code to change the PCM file encoded in java to ulaw to Linear PCM in a normal way.\nBecause it's a test code, it's simple to configure, and when you run it, the ulaw PCM is converted to a specific folder as Linear PCM.\nSo I got the file and ran it on a program called Ocean Audio, and the noise gets mixed up too much.\nI converted it, but as a result, I couldn't get the song I wanted.\nThere seems to be no problem with Buffered InputStream, making Buffer, converting it to ByteArray\nWhy did this happen?</p>\n<p>The code I tried is as follows.</p>\n<pre><code>public static void main(String args[]) throws IOException {\n\n        String fileName = &quot;ulaw.pcm&quot;;\n        File file = new File(&quot;/home/user/&quot; + fileName);\n        FileInputStream fis = new FileInputStream(file);\n        int read = 0;\n        byte[] buff = new byte[3200];\n        byte[] audioBytes;\n        byte[] cvtAudioBytes;\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        BufferedInputStream in = new BufferedInputStream(fis);\n        while ((read = in.read(buff)) &gt; 0) {\n            out.write(buff, 0, read);\n        }\n\n        audioBytes = out.toByteArray();\n        cvtAudioBytes = Converter.ulaw2Linear(audioBytes);\n        \n        Path path = Paths.get(&quot;/home/user/convert.pcm&quot;);\n\n        Files.write(path, cvtAudioBytes);\n\n        out.close();\n        in.close();\n\n}\n</code></pre>\n<p>Below is Converter Class.</p>\n<pre><code>public class Converter {\n    public static byte[] ulaw2Linear(byte[] ulawBuffer) {\n        int ulawSampleSize = ulawBuffer.length;\n        int linearSampleSize = ulawSampleSize * 2;\n        System.out.println(&quot;ulawSampleSize : &quot; + ulawSampleSize);\n        System.out.println(&quot;linearSampleSize : &quot; + linearSampleSize);\n\n        byte[] linearBuffer = new byte[linearSampleSize];\n\n        for (int i = 0; i &lt; ulawSampleSize; i++) {\n            short sampleValue = ulaw2LinearSample(ulawBuffer[i]);\n            //System.out.println(sampleValue);\n            linearBuffer[i * 2] = (byte) (sampleValue &amp; 0xFF);\n            linearBuffer[i * 2 + 1] = (byte) ((sampleValue &gt;&gt; 8) &amp; 0xFF);\n        }\n\n        for(int i=0; i&lt;linearBuffer.length; i++) {\n            System.out.println(linearBuffer[i]);\n        }\n        return linearBuffer;\n    }\n\n    private static short ulaw2LinearSample(byte ulawSample) {\n        int ulawValue = ulawSample &amp; 0xFF;\n        ulawValue = ulawValue ^ 0xFF; \n        int sign = (ulawValue &amp; 0x80) == 0 ? 1 : -1;\n        int exponent = (ulawValue &gt;&gt; 4) &amp; 0x07;\n        int mantissa = ulawValue &amp; 0x0F;\n        int sampleValue = ((1 &lt;&lt; exponent) | (mantissa &lt;&lt; (exponent - 4)) | (1 &lt;&lt; (exponent - 3))) - 33;\n        return (short) (sampleValue * sign);\n    }\n\n}\n</code></pre>\n<p>The Converter class does not feel wrong because it is a universally converted code. However, the problem with the code used for the main is that\nI couldn't find it. Is there anything lacking in the code?</p>\n<p>Thank you.</p>\n"},{"tags":["java","postgresql","hibernate","spring-boot","java-8"],"comments":[{"owner":{"account_id":4271910,"reputation":233,"user_id":3493538,"display_name":"Naveen Kulkarni"},"score":0,"creation_date":1541506824,"post_id":53171685,"comment_id":93233130,"body_markdown":"Why do you want to struggle with this. Just add 2 Fields for you POJO creation date time and updated Date time. It will solve your problem","body":"Why do you want to struggle with this. Just add 2 Fields for you POJO creation date time and updated Date time. It will solve your problem"}],"answers":[{"tags":[],"owner":{"account_id":5342445,"reputation":4807,"user_id":4259032,"accept_rate":56,"display_name":"Alain Cruz"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1541509241,"creation_date":1541509241,"answer_id":53172430,"question_id":53171685,"body_markdown":"Your problem is your Hibernate version. You need to upgrade it to version 5.2.3 in order to use `@CreationTimestamp` and `@UpdateTimestamp` with `LocalDateTime`. For more information, you can check this [blog][1]. Just upgrade your Hibernate and everything should work as expected.\r\n\r\nIf you don&#39;t want to update your Hibernate version, you can change your field types to one of the following.\r\n\r\n- java.util.Date\r\n- java.util.Calendar\r\n- java.sql.Date\r\n- java.sql.Time\r\n- java.sql.Timestamp\r\n\r\n\r\n  [1]: https://www.thoughts-on-java.org/persist-creation-update-timestamps-hibernate/","title":"@CreationTimestamp and @UpdateTimestamp is not working with LocalDateTime","body":"<p>Your problem is your Hibernate version. You need to upgrade it to version 5.2.3 in order to use <code>@CreationTimestamp</code> and <code>@UpdateTimestamp</code> with <code>LocalDateTime</code>. For more information, you can check this <a href=\"https://www.thoughts-on-java.org/persist-creation-update-timestamps-hibernate/\" rel=\"noreferrer\">blog</a>. Just upgrade your Hibernate and everything should work as expected.</p>\n\n<p>If you don't want to update your Hibernate version, you can change your field types to one of the following.</p>\n\n<ul>\n<li>java.util.Date</li>\n<li>java.util.Calendar</li>\n<li>java.sql.Date</li>\n<li>java.sql.Time</li>\n<li>java.sql.Timestamp</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":22560311,"reputation":1,"user_id":16748038,"display_name":"Vidhi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690358349,"creation_date":1690358349,"answer_id":76769127,"question_id":53171685,"body_markdown":"In my case, I was using some other Date import instead of java.utils","title":"@CreationTimestamp and @UpdateTimestamp is not working with LocalDateTime","body":"<p>In my case, I was using some other Date import instead of java.utils</p>\n"}],"owner":{"account_id":6413483,"reputation":1053,"user_id":4972367,"display_name":"Hardik Patel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20239,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":53172430,"answer_count":2,"score":12,"last_activity_date":1690358349,"creation_date":1541506434,"question_id":53171685,"body_markdown":"I am trying to use `@CreationTimestamp` and `@UpdateTimestamp` with `LocalDateTime` type, but it is giving me `org.hibernate.HibernateException:` Unsupported property type for generator annotation `@CreationTimestamp` exception.\r\n\r\nI am using 5.0.12.hibernate version with java 8 `LocalDataTime`, \r\n\r\nIs there any way to use `@UpdateTimestamp` and `@CreationTimestamp` with Java 8 `LocalDateTime` ?\r\n\r\n\r\n     org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unsupported property type for generator annotation @CreationTimestamp\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1628)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1080)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:857)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1118)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1107)\r\n    \tat com.godigit.MotorDataService.main(MotorDataService.java:35)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\n    Caused by: org.hibernate.HibernateException: Unsupported property type for generator annotation @CreationTimestamp\r\n    \tat org.hibernate.tuple.CreationTimestampGeneration.initialize(CreationTimestampGeneration.java:44)\r\n    \tat org.hibernate.tuple.CreationTimestampGeneration.initialize(CreationTimestampGeneration.java:22)\r\n    \tat org.hibernate.cfg.annotations.PropertyBinder.instantiateAndInitializeValueGeneration(PropertyBinder.java:415)\r\n    \tat org.hibernate.cfg.annotations.PropertyBinder.getValueGenerationFromAnnotation(PropertyBinder.java:383)\r\n    \tat org.hibernate.cfg.annotations.PropertyBinder.getValueGenerationFromAnnotations(PropertyBinder.java:348)\r\n    \tat org.hibernate.cfg.annotations.PropertyBinder.determineValueGenerationStrategy(PropertyBinder.java:323)\r\n    \tat org.hibernate.cfg.annotations.PropertyBinder.makeProperty(PropertyBinder.java:269)\r\n    \tat org.hibernate.cfg.annotations.PropertyBinder.makePropertyAndValue(PropertyBinder.java:189)\r\n    \tat org.hibernate.cfg.annotations.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:199)\r\n    \tat org.hibernate.cfg.AnnotationBinder.processElementAnnotations(AnnotationBinder.java:2225)\r\n    \tat org.hibernate.cfg.AnnotationBinder.processIdPropertiesIfNotAlready(AnnotationBinder.java:911)\r\n    \tat org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:738)\r\n    \tat org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:245)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:222)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:265)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:847)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:874)\r\n    \tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:60)\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:360)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:382)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:371)\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:336)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1687)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1624)\r\n    \t... 21 common frames omitted","title":"@CreationTimestamp and @UpdateTimestamp is not working with LocalDateTime","body":"<p>I am trying to use <code>@CreationTimestamp</code> and <code>@UpdateTimestamp</code> with <code>LocalDateTime</code> type, but it is giving me <code>org.hibernate.HibernateException:</code> Unsupported property type for generator annotation <code>@CreationTimestamp</code> exception.</p>\n\n<p>I am using 5.0.12.hibernate version with java 8 <code>LocalDataTime</code>, </p>\n\n<p>Is there any way to use <code>@UpdateTimestamp</code> and <code>@CreationTimestamp</code> with Java 8 <code>LocalDateTime</code> ?</p>\n\n<pre><code> org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unsupported property type for generator annotation @CreationTimestamp\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1628)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1080)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:857)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1118)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1107)\n    at com.godigit.MotorDataService.main(MotorDataService.java:35)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\nCaused by: org.hibernate.HibernateException: Unsupported property type for generator annotation @CreationTimestamp\n    at org.hibernate.tuple.CreationTimestampGeneration.initialize(CreationTimestampGeneration.java:44)\n    at org.hibernate.tuple.CreationTimestampGeneration.initialize(CreationTimestampGeneration.java:22)\n    at org.hibernate.cfg.annotations.PropertyBinder.instantiateAndInitializeValueGeneration(PropertyBinder.java:415)\n    at org.hibernate.cfg.annotations.PropertyBinder.getValueGenerationFromAnnotation(PropertyBinder.java:383)\n    at org.hibernate.cfg.annotations.PropertyBinder.getValueGenerationFromAnnotations(PropertyBinder.java:348)\n    at org.hibernate.cfg.annotations.PropertyBinder.determineValueGenerationStrategy(PropertyBinder.java:323)\n    at org.hibernate.cfg.annotations.PropertyBinder.makeProperty(PropertyBinder.java:269)\n    at org.hibernate.cfg.annotations.PropertyBinder.makePropertyAndValue(PropertyBinder.java:189)\n    at org.hibernate.cfg.annotations.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:199)\n    at org.hibernate.cfg.AnnotationBinder.processElementAnnotations(AnnotationBinder.java:2225)\n    at org.hibernate.cfg.AnnotationBinder.processIdPropertiesIfNotAlready(AnnotationBinder.java:911)\n    at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:738)\n    at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:245)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:222)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:265)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:847)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:874)\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:60)\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:360)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:382)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:371)\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:336)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1687)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1624)\n    ... 21 common frames omitted\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9707,"page":285,"page_size":100}
