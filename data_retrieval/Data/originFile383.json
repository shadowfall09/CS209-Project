{"items":[{"tags":["java","doubly-linked-list"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1686233192,"post_id":76432701,"comment_id":134773449,"body_markdown":"Do you expect `str += temp.getString() + &quot;&quot;;` to add the space? Why or why not? Can you fix it? Then you&#39;ll only need to remove (or not add) the trailing space.","body":"Do you expect <code>str += temp.getString() + &quot;&quot;;</code> to add the space? Why or why not? Can you fix it? Then you&#39;ll only need to remove (or not add) the trailing space."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1686238784,"post_id":76432701,"comment_id":134774821,"body_markdown":"Use a `StringBuilder` and append the space before each item iff it is non-empty.","body":"Use a <code>StringBuilder</code> and append the space before each item iff it is non-empty."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1686244130,"post_id":76432701,"comment_id":134775899,"body_markdown":"There is no sense in doing something like `new String(&quot;&quot;+0)`. The expression `&quot;&quot; + 0` does already produce a `String`, which is by the way exactly the same as `&quot;0&quot;`, passing this string into a `new String(…)` is obsolete. So just use `l.add(&quot;0&quot;);`, `l.add(&quot;1&quot;);`, and `l.add(&quot;2&quot;);` • The simplest approach is to use `StringJoiner`, e.g. `StringJoiner j = new StringJoiner(&quot; &quot;); for(Node node = head; node != null; node = node.next) { j.add(node.getString()); } return j.toString();` Or, to also get the square brackets replace `new StringJoiner(&quot; &quot;)` with `new StringJoiner(&quot; &quot;, &quot;[&quot;, &quot;]&quot;)`","body":"There is no sense in doing something like <code>new String(&quot;&quot;+0)</code>. The expression <code>&quot;&quot; + 0</code> does already produce a <code>String</code>, which is by the way exactly the same as <code>&quot;0&quot;</code>, passing this string into a <code>new String(…)</code> is obsolete. So just use <code>l.add(&quot;0&quot;);</code>, <code>l.add(&quot;1&quot;);</code>, and <code>l.add(&quot;2&quot;);</code> • The simplest approach is to use <code>StringJoiner</code>, e.g. <code>StringJoiner j = new StringJoiner(&quot; &quot;); for(Node node = head; node != null; node = node.next) { j.add(node.getString()); } return j.toString();</code> Or, to also get the square brackets replace <code>new StringJoiner(&quot; &quot;)</code> with <code>new StringJoiner(&quot; &quot;, &quot;[&quot;, &quot;]&quot;)</code>"}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686244340,"post_id":76433593,"comment_id":134775934,"body_markdown":"Or `StringJoiner`, which uses a `StringBuilder` and does the separator logic for you: `StringJoiner j = new StringJoiner(&quot; &quot;); for(Node node = head; node != null; node = node.next) { j.add(node.getString()); } return j.toString();`","body":"Or <code>StringJoiner</code>, which uses a <code>StringBuilder</code> and does the separator logic for you: <code>StringJoiner j = new StringJoiner(&quot; &quot;); for(Node node = head; node != null; node = node.next) { j.add(node.getString()); } return j.toString();</code>"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1686244731,"post_id":76433593,"comment_id":134776003,"body_markdown":"@Holger Thanks. I often use Collectors.joining but I always seem to forget that StringJoiner exists as a separate standalone utility.","body":"@Holger Thanks. I often use Collectors.joining but I always seem to forget that StringJoiner exists as a separate standalone utility."}],"tags":[],"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686244668,"creation_date":1686239043,"answer_id":76433593,"question_id":76432701,"body_markdown":"Use a `StringJoiner` or a `StringBuilder` rather than repeatedly appending strings in a loop. If using a `StringBuilder`, prepend the space if and only if the `StringBuilder` is non-empty.\r\n\r\nExample with `StringJoiner`:\r\n\r\n    @Override\r\n    public String toString() {\r\n        StringJoiner joiner = new StringJoiner(&quot; &quot;);\r\n        \r\n        Node node = head;\r\n        while (node != null) {\r\n            joiner.append(node.getString());\r\n            node = node.next;\r\n        }\r\n        \r\n        return joiner.toString();\r\n    }\r\n\r\nExample with `StringBuilder`:\r\n\r\n    @Override\r\n    public String toString() {\r\n        StringBuilder sb = new StringBuilder();\r\n        \r\n        Node node = head;\r\n        while (node != null) {\r\n            if (!sb.isEmpty()) {\r\n                sb.append(&#39; &#39;);\r\n            }\r\n            sb.append(node.getString());\r\n            node = node.next;\r\n        }\r\n        \r\n        return sb.toString();\r\n    }\r\n\r\nNote: `temp` is a terrible variable name for anything other than temp files and the intermediate value used in a swap.","title":"How do I add spaces between elements in a doubly linked list when concentrating them into a string in Java?","body":"<p>Use a <code>StringJoiner</code> or a <code>StringBuilder</code> rather than repeatedly appending strings in a loop. If using a <code>StringBuilder</code>, prepend the space if and only if the <code>StringBuilder</code> is non-empty.</p>\n<p>Example with <code>StringJoiner</code>:</p>\n<pre><code>@Override\npublic String toString() {\n    StringJoiner joiner = new StringJoiner(&quot; &quot;);\n    \n    Node node = head;\n    while (node != null) {\n        joiner.append(node.getString());\n        node = node.next;\n    }\n    \n    return joiner.toString();\n}\n</code></pre>\n<p>Example with <code>StringBuilder</code>:</p>\n<pre><code>@Override\npublic String toString() {\n    StringBuilder sb = new StringBuilder();\n    \n    Node node = head;\n    while (node != null) {\n        if (!sb.isEmpty()) {\n            sb.append(' ');\n        }\n        sb.append(node.getString());\n        node = node.next;\n    }\n    \n    return sb.toString();\n}\n</code></pre>\n<p>Note: <code>temp</code> is a terrible variable name for anything other than temp files and the intermediate value used in a swap.</p>\n"}],"owner":{"account_id":25076232,"reputation":21,"user_id":18929634,"display_name":"softloftmaria"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76433593,"answer_count":1,"score":-2,"last_activity_date":1686244668,"creation_date":1686233086,"question_id":76432701,"body_markdown":"I&#39;m creating a toString() function that should return a String created by concatenating each Nodes toString(). A single space: ‘ ’ should be inserted between each Nodes toString(). No trailing space should be inserted. \r\n\r\nFor example, if the list contained 3 Node objects, the toString() return value would be [1 2 3], but not [123] or [1 2 3 ].\r\n\r\nThis is what I&#39;ve tried so far and but it does not put a space between the elements (I get [01] when I need [0 1] for example):\r\n\r\n```\r\npublic String toString() {\r\n\t\t\r\n\t\tString str = &quot;&quot;;\r\n\t\t\r\n\t\tNode temp = head;\r\n\t\t\r\n\t\twhile (temp != null) {\r\n\t\t\r\n\t\t\t\tstr += temp.getString() + &quot;&quot;;\r\n\t\t\t\ttemp = temp.next;\r\n\t\t}\r\n\t\t\r\n\t\treturn str;\r\n\r\n\t}\r\n```\r\nHere is the doubly linked list class I have with the add method:\r\n\r\n```\r\npublic class DSEList {\r\n\t\r\n\tpublic Node head;\r\n\tprivate Node tail;\r\n\r\n\tpublic DSEList() {\r\n\t\thead = null;\r\n\t\ttail = null;\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic DSEList(Node head_) {\r\n\t\t\r\n\t\thead = head_;\r\n\t}\r\n\r\npublic boolean add(String obj) {\r\n\t\t\r\n\t\t    Node newNode = new Node(null, null, new String(obj));\r\n\t\t    \r\n\t\t    Boolean success = false;\r\n\t\t\r\n\t        if(head == null) {  \r\n\t            head = tail = newNode;  \r\n\t            head.prev = null;  \r\n\t            tail.next = null;\r\n\t            success = true;\r\n\t        } \r\n\r\n\t        else {  \r\n\t        \t\r\n\t            tail.next = newNode;  \r\n\t            newNode.prev = tail;  \r\n\t            tail = newNode;  \r\n\t            tail.next = null;\r\n\t            success = true;\r\n\t        }  \r\n\t        \r\n\t        return success;\r\n\r\n\t    }  \r\n\t\r\n\r\n```\r\n\r\nHere is the node class I have where the getString() comes from:\r\n\r\n```\r\npublic class Node {\r\n\r\n\tpublic Node next;\r\n\tpublic Node prev;\r\n\t\r\n\tprivate String t;\r\n\r\n\tpublic Node(Node next, Node prev, String token) {\r\n\t\tthis.next = next;\r\n\t\tthis.prev = prev;\r\n\t\tthis.t = token;\r\n\t}\r\n\r\n\tpublic String getString() {\r\n\t\treturn t;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean equals(Object other) {\r\n\t\tif (this == other)\r\n\t\t\treturn true;\r\n\t\tif (other == null)\r\n\t\t\treturn false;\r\n\t\tif (!(other instanceof Node))\r\n\t\t\treturn false;\r\n\r\n\t\treturn t.equals(((Node)other).getString());\r\n\t}\r\n\r\n\t@Override\r\n\tpublic int hashCode() {\r\n\t\tif ( t == null )\r\n\t\t\treturn 0;\r\n\t\treturn t.hashCode();\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nHere is an example of how it would work: \r\n\r\n```\r\nDSEList l = new DSEList();\r\nl.add(new String(&quot;&quot;+0));\r\nl.toString() //this should return [0]\r\nl.add(new String(&quot;&quot;+1));\r\nl.toString() //this should return [0 1]\r\nl.add(new String(&quot;&quot;+2));\r\nl.toString() //this should return [0 1 2]\r\n\r\n```\r\n\r\nThank you!","title":"How do I add spaces between elements in a doubly linked list when concentrating them into a string in Java?","body":"<p>I'm creating a toString() function that should return a String created by concatenating each Nodes toString(). A single space: ‘ ’ should be inserted between each Nodes toString(). No trailing space should be inserted.</p>\n<p>For example, if the list contained 3 Node objects, the toString() return value would be [1 2 3], but not [123] or [1 2 3 ].</p>\n<p>This is what I've tried so far and but it does not put a space between the elements (I get [01] when I need [0 1] for example):</p>\n<pre><code>public String toString() {\n        \n        String str = &quot;&quot;;\n        \n        Node temp = head;\n        \n        while (temp != null) {\n        \n                str += temp.getString() + &quot;&quot;;\n                temp = temp.next;\n        }\n        \n        return str;\n\n    }\n</code></pre>\n<p>Here is the doubly linked list class I have with the add method:</p>\n<pre><code>public class DSEList {\n    \n    public Node head;\n    private Node tail;\n\n    public DSEList() {\n        head = null;\n        tail = null;\n        \n    }\n    \n    public DSEList(Node head_) {\n        \n        head = head_;\n    }\n\npublic boolean add(String obj) {\n        \n            Node newNode = new Node(null, null, new String(obj));\n            \n            Boolean success = false;\n        \n            if(head == null) {  \n                head = tail = newNode;  \n                head.prev = null;  \n                tail.next = null;\n                success = true;\n            } \n\n            else {  \n                \n                tail.next = newNode;  \n                newNode.prev = tail;  \n                tail = newNode;  \n                tail.next = null;\n                success = true;\n            }  \n            \n            return success;\n\n        }  \n    \n\n</code></pre>\n<p>Here is the node class I have where the getString() comes from:</p>\n<pre><code>public class Node {\n\n    public Node next;\n    public Node prev;\n    \n    private String t;\n\n    public Node(Node next, Node prev, String token) {\n        this.next = next;\n        this.prev = prev;\n        this.t = token;\n    }\n\n    public String getString() {\n        return t;\n    }\n\n    @Override\n    public boolean equals(Object other) {\n        if (this == other)\n            return true;\n        if (other == null)\n            return false;\n        if (!(other instanceof Node))\n            return false;\n\n        return t.equals(((Node)other).getString());\n    }\n\n    @Override\n    public int hashCode() {\n        if ( t == null )\n            return 0;\n        return t.hashCode();\n    }\n\n}\n\n</code></pre>\n<p>Here is an example of how it would work:</p>\n<pre><code>DSEList l = new DSEList();\nl.add(new String(&quot;&quot;+0));\nl.toString() //this should return [0]\nl.add(new String(&quot;&quot;+1));\nl.toString() //this should return [0 1]\nl.add(new String(&quot;&quot;+2));\nl.toString() //this should return [0 1 2]\n\n</code></pre>\n<p>Thank you!</p>\n"},{"tags":["java","android","react-native","gradle","android-gradle-plugin"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":1,"creation_date":1686245144,"post_id":76434259,"comment_id":134776085,"body_markdown":"Have you tried to to build with `clean --refresh-dependencies`?","body":"Have you tried to to build with <code>clean --refresh-dependencies</code>?"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1686245559,"post_id":76434259,"comment_id":134776151,"body_markdown":"The path that it&#39;s looking for the file suggests that this is not a downloaded artifact, but a generated one, there might be some task in your project that generates this file, but I have no idea which one.","body":"The path that it&#39;s looking for the file suggests that this is not a downloaded artifact, but a generated one, there might be some task in your project that generates this file, but I have no idea which one."},{"owner":{"account_id":7926965,"reputation":1360,"user_id":5986141,"display_name":"Fotios Tsakiris"},"score":0,"creation_date":1686290271,"post_id":76434259,"comment_id":134781281,"body_markdown":"@yahorbarkouski Yes, I did use `clean --refresh-dependencies`! I forgot to mention it. Thank you!","body":"@yahorbarkouski Yes, I did use <code>clean --refresh-dependencies</code>! I forgot to mention it. Thank you!"}],"owner":{"account_id":7926965,"reputation":1360,"user_id":5986141,"display_name":"Fotios Tsakiris"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686244582,"creation_date":1686244582,"question_id":76434259,"body_markdown":"I cleaned my hard disk because it was full, and I deleted also the `./gradle/caches` folder. Now, one React Native project gives the following error: \r\n\r\nNote: It cannot find: `gradle-test-kit-7.5.1.jar`\r\n\r\n```js\r\n[{\r\n\t&quot;resource&quot;: &quot;/Volumes/code/projects/mobile/appName/node_modules/react-native-gradle-plugin&quot;,\r\n\t&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#4&quot;,\r\n\t&quot;code&quot;: &quot;0&quot;,\r\n\t&quot;severity&quot;: 8,\r\n\t&quot;message&quot;: &quot;The project cannot be built until build path errors are resolved&quot;,\r\n\t&quot;source&quot;: &quot;Java&quot;,\r\n\t&quot;startLineNumber&quot;: 1,\r\n\t&quot;startColumn&quot;: 1,\r\n\t&quot;endLineNumber&quot;: 1,\r\n\t&quot;endColumn&quot;: 1\r\n},{\r\n\t&quot;resource&quot;: &quot;/Volumes/code/projects/mobile/appName/node_modules/react-native-gradle-plugin&quot;,\r\n\t&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#4&quot;,\r\n\t&quot;code&quot;: &quot;964&quot;,\r\n\t&quot;severity&quot;: 8,\r\n\t&quot;message&quot;: &quot;The container &#39;Project and External Dependencies&#39; references non existing library &#39;/Users/userName/.gradle/caches/7.5.1/generated-gradle-jars/gradle-test-kit-7.5.1.jar&#39;&quot;,\r\n\t&quot;source&quot;: &quot;Java&quot;,\r\n\t&quot;startLineNumber&quot;: 1,\r\n\t&quot;startColumn&quot;: 1,\r\n\t&quot;endLineNumber&quot;: 1,\r\n\t&quot;endColumn&quot;: 1\r\n}]\r\n\r\n``` \r\nWhat I&#39;ve tried:\r\n- Use other Gradle Plugin Version and Gradle Version\r\n\r\n- Clean the project: In Android Studio, go to &quot;Build&quot; -&gt; &quot;Clean Project&quot; to clean the build artifacts.\r\n\r\n- Rebuild the project: In Android Studio, go to &quot;Build&quot; -&gt; &quot;Rebuild Project&quot; to rebuild the project from scratch.\r\n\r\n- Invalidate caches and restart: In Android Studio, go to &quot;File&quot; -&gt; &quot;Invalidate Caches / Restart&quot; and select &quot;Invalidate and Restart&quot;. This will clear the Android Studio caches and restart the IDE.\r\n\r\n- Delete Gradle cache: Close Android Studio and delete the Gradle cache manually. You can do this by running the following command in your terminal or command prompt: `rm -rf ~/.gradle/caches`\r\n\r\n- Sync Gradle files: Open your project in Android Studio and click on the &quot;Sync Project with Gradle Files&quot; button to synchronize your Gradle configuration.\r\n\r\nThus the 7.5.1 folder was regenarated with everything inside, but, without the `gradle-test-kit-7.5.1.jar`\r\n\r\nAdditional notes: \r\n\r\n- The `generated-gradle-jars` folder has:\r\n  - `gradle-api-7.5.1.jar`\r\n  - `gradle-kotlin-dsl-extensions-7.5.1.jar`\r\nbut not: `gradle-test-kit-7.5.1.jar`\r\n\r\n- `package.json` has as dependencie:\r\n   - `&quot;react-native-gradle-plugin&quot;: &quot;^0.71.19&quot;,`\r\nand in `node_modules` it gives the above error.\r\n\r\n- When I uploaded the app in google play store the pre-launch report gave:\r\n`java.lang.RuntimeException: Unable to load script. Make sure you&#39;re either running Metro (run &#39;npx react-native start&#39;) or that your bundle &#39;index.android.bundle&#39; is packaged correctly for release.`\r\n","title":"Why gradle-test-kit-7.5.1.jar does not exist?","body":"<p>I cleaned my hard disk because it was full, and I deleted also the <code>./gradle/caches</code> folder. Now, one React Native project gives the following error:</p>\n<p>Note: It cannot find: <code>gradle-test-kit-7.5.1.jar</code></p>\n<pre class=\"lang-js prettyprint-override\"><code>[{\n    &quot;resource&quot;: &quot;/Volumes/code/projects/mobile/appName/node_modules/react-native-gradle-plugin&quot;,\n    &quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#4&quot;,\n    &quot;code&quot;: &quot;0&quot;,\n    &quot;severity&quot;: 8,\n    &quot;message&quot;: &quot;The project cannot be built until build path errors are resolved&quot;,\n    &quot;source&quot;: &quot;Java&quot;,\n    &quot;startLineNumber&quot;: 1,\n    &quot;startColumn&quot;: 1,\n    &quot;endLineNumber&quot;: 1,\n    &quot;endColumn&quot;: 1\n},{\n    &quot;resource&quot;: &quot;/Volumes/code/projects/mobile/appName/node_modules/react-native-gradle-plugin&quot;,\n    &quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#4&quot;,\n    &quot;code&quot;: &quot;964&quot;,\n    &quot;severity&quot;: 8,\n    &quot;message&quot;: &quot;The container 'Project and External Dependencies' references non existing library '/Users/userName/.gradle/caches/7.5.1/generated-gradle-jars/gradle-test-kit-7.5.1.jar'&quot;,\n    &quot;source&quot;: &quot;Java&quot;,\n    &quot;startLineNumber&quot;: 1,\n    &quot;startColumn&quot;: 1,\n    &quot;endLineNumber&quot;: 1,\n    &quot;endColumn&quot;: 1\n}]\n\n</code></pre>\n<p>What I've tried:</p>\n<ul>\n<li><p>Use other Gradle Plugin Version and Gradle Version</p>\n</li>\n<li><p>Clean the project: In Android Studio, go to &quot;Build&quot; -&gt; &quot;Clean Project&quot; to clean the build artifacts.</p>\n</li>\n<li><p>Rebuild the project: In Android Studio, go to &quot;Build&quot; -&gt; &quot;Rebuild Project&quot; to rebuild the project from scratch.</p>\n</li>\n<li><p>Invalidate caches and restart: In Android Studio, go to &quot;File&quot; -&gt; &quot;Invalidate Caches / Restart&quot; and select &quot;Invalidate and Restart&quot;. This will clear the Android Studio caches and restart the IDE.</p>\n</li>\n<li><p>Delete Gradle cache: Close Android Studio and delete the Gradle cache manually. You can do this by running the following command in your terminal or command prompt: <code>rm -rf ~/.gradle/caches</code></p>\n</li>\n<li><p>Sync Gradle files: Open your project in Android Studio and click on the &quot;Sync Project with Gradle Files&quot; button to synchronize your Gradle configuration.</p>\n</li>\n</ul>\n<p>Thus the 7.5.1 folder was regenarated with everything inside, but, without the <code>gradle-test-kit-7.5.1.jar</code></p>\n<p>Additional notes:</p>\n<ul>\n<li><p>The <code>generated-gradle-jars</code> folder has:</p>\n<ul>\n<li><code>gradle-api-7.5.1.jar</code></li>\n<li><code>gradle-kotlin-dsl-extensions-7.5.1.jar</code>\nbut not: <code>gradle-test-kit-7.5.1.jar</code></li>\n</ul>\n</li>\n<li><p><code>package.json</code> has as dependencie:</p>\n<ul>\n<li><code>&quot;react-native-gradle-plugin&quot;: &quot;^0.71.19&quot;,</code>\nand in <code>node_modules</code> it gives the above error.</li>\n</ul>\n</li>\n<li><p>When I uploaded the app in google play store the pre-launch report gave:\n<code>java.lang.RuntimeException: Unable to load script. Make sure you're either running Metro (run 'npx react-native start') or that your bundle 'index.android.bundle' is packaged correctly for release.</code></p>\n</li>\n</ul>\n"},{"tags":["java","spring","tomcat"],"comments":[{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1411510584,"post_id":26005483,"comment_id":40728222,"body_markdown":"Read the Spring Reference Documentation, you are mixing the old configuration together with the new configuration about Spring MVC. Your code is wrong.","body":"Read the Spring Reference Documentation, you are mixing the old configuration together with the new configuration about Spring MVC. Your code is wrong."},{"owner":{"account_id":229363,"reputation":302,"user_id":492274,"accept_rate":93,"display_name":"wonza"},"score":2,"creation_date":1411510978,"post_id":26005483,"comment_id":40728354,"body_markdown":"Can you be a little more specific please?","body":"Can you be a little more specific please?"},{"owner":{"account_id":229363,"reputation":302,"user_id":492274,"accept_rate":93,"display_name":"wonza"},"score":0,"creation_date":1411513691,"post_id":26005483,"comment_id":40729163,"body_markdown":"I&#39;ve updated my question with the latest code from the reference documentation and I still get the same error.","body":"I&#39;ve updated my question with the latest code from the reference documentation and I still get the same error."},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1411516333,"post_id":26005483,"comment_id":40729731,"body_markdown":"Now your configuration *is* correct. The URL `http://api:8080/` has no sense, the URL to test **must be** `http://localhost:8080/CONTEXTROOT/users` where `CONTEXTROOT` is available in your project selected `Right Click -&gt; Properties -&gt; Web Project Settings`. If your project is already deployed in Tomcat, then  the URL must be `http://localhost:8080/projectname/users`","body":"Now your configuration <i>is</i> correct. The URL <code>http:&#47;&#47;api:8080&#47;</code> has no sense, the URL to test <b>must be</b> <code>http:&#47;&#47;localhost:8080&#47;CONTEXTROOT&#47;users</code> where <code>CONTEXTROOT</code> is available in your project selected <code>Right Click -&gt; Properties -&gt; Web Project Settings</code>. If your project is already deployed in Tomcat, then  the URL must be <code>http:&#47;&#47;localhost:8080&#47;projectname&#47;users</code>"},{"owner":{"account_id":229363,"reputation":302,"user_id":492274,"accept_rate":93,"display_name":"wonza"},"score":0,"creation_date":1411520147,"post_id":26005483,"comment_id":40730489,"body_markdown":"I&#39;ve done that but I still get a 404, but I get no error in my console.","body":"I&#39;ve done that but I still get a 404, but I get no error in my console."},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1411558438,"post_id":26005483,"comment_id":40746172,"body_markdown":"Update your first post, share the complete error stack trace. I need more details","body":"Update your first post, share the complete error stack trace. I need more details"},{"owner":{"account_id":229363,"reputation":302,"user_id":492274,"accept_rate":93,"display_name":"wonza"},"score":0,"creation_date":1411567818,"post_id":26005483,"comment_id":40752301,"body_markdown":"Updated, the full stack trace is shown at the top, just those two lines are all I get","body":"Updated, the full stack trace is shown at the top, just those two lines are all I get"},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1411577351,"post_id":26005483,"comment_id":40758334,"body_markdown":"If is only that, could you check your Tomcat&#39;s `log` directory? There should appear more details. check the log files, since there are many according of their roles.","body":"If is only that, could you check your Tomcat&#39;s <code>log</code> directory? There should appear more details. check the log files, since there are many according of their roles."},{"owner":{"account_id":229363,"reputation":302,"user_id":492274,"accept_rate":93,"display_name":"wonza"},"score":0,"creation_date":1411595617,"post_id":26005483,"comment_id":40767688,"body_markdown":"There&#39;s nothing in catalina.out","body":"There&#39;s nothing in catalina.out"}],"answers":[{"comments":[{"owner":{"account_id":229363,"reputation":302,"user_id":492274,"accept_rate":93,"display_name":"wonza"},"score":0,"creation_date":1411520224,"post_id":26006249,"comment_id":40730510,"body_markdown":"I tried that but I had to add:             http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context.xsd to get it working, but I still get the same error","body":"I tried that but I had to add:             <a href=\"http://www.springframework.org/schema/context\" rel=\"nofollow noreferrer\">springframework.org/schema/context</a>  <a href=\"http://www.springframework.org/schema/context/spring-context.xsd\" rel=\"nofollow noreferrer\">springframework.org/schema/context/spring-context.xsd</a> to get it working, but I still get the same error"},{"owner":{"account_id":353742,"reputation":3219,"user_id":691626,"accept_rate":46,"display_name":"Dino Tw"},"score":0,"creation_date":1411579480,"post_id":26006249,"comment_id":40759387,"body_markdown":"In your Java class Users, you need to have the @Controller annotation on the class(you had it before editing).","body":"In your Java class Users, you need to have the @Controller annotation on the class(you had it before editing)."},{"owner":{"account_id":229363,"reputation":302,"user_id":492274,"accept_rate":93,"display_name":"wonza"},"score":0,"creation_date":1411581864,"post_id":26006249,"comment_id":40760632,"body_markdown":"I tried it with and without the @Controller, either work","body":"I tried it with and without the @Controller, either work"},{"owner":{"account_id":353742,"reputation":3219,"user_id":691626,"accept_rate":46,"display_name":"Dino Tw"},"score":0,"creation_date":1411582266,"post_id":26006249,"comment_id":40760851,"body_markdown":"Are you getting noHandlerFound exception or 404 error? If it&#39;s 404, that&#39;s because your controller does not return any object or model. http://stackoverflow.com/questions/7175509/which-is-better-return-modelandview-or-string-on-spring3-controller","body":"Are you getting noHandlerFound exception or 404 error? If it&#39;s 404, that&#39;s because your controller does not return any object or model. <a href=\"http://stackoverflow.com/questions/7175509/which-is-better-return-modelandview-or-string-on-spring3-controller\" title=\"which is better return modelandview or string on spring3 controller\">stackoverflow.com/questions/7175509/&hellip;</a>"},{"owner":{"account_id":229363,"reputation":302,"user_id":492274,"accept_rate":93,"display_name":"wonza"},"score":0,"creation_date":1411595655,"post_id":26006249,"comment_id":40767710,"body_markdown":"I get noHandlerFound in my eclipse console but 404 in the browser","body":"I get noHandlerFound in my eclipse console but 404 in the browser"},{"owner":{"account_id":353742,"reputation":3219,"user_id":691626,"accept_rate":46,"display_name":"Dino Tw"},"score":0,"creation_date":1411661432,"post_id":26006249,"comment_id":40796664,"body_markdown":"The @Autowired annotation causes `java.lang.IllegalStateException: Autowired annotation requires at least one argument: public com.api.Users()`, that needs to be removed. But still cannot reproduce noHandlerFound error.","body":"The @Autowired annotation causes <code>java.lang.IllegalStateException: Autowired annotation requires at least one argument: public com.api.Users()</code>, that needs to be removed. But still cannot reproduce noHandlerFound error."},{"owner":{"account_id":353742,"reputation":3219,"user_id":691626,"accept_rate":46,"display_name":"Dino Tw"},"score":0,"creation_date":1528999667,"post_id":26006249,"comment_id":88729408,"body_markdown":"it&#39;s been so long time ago, cannot recall the details now.","body":"it&#39;s been so long time ago, cannot recall the details now."}],"tags":[],"owner":{"account_id":353742,"reputation":3219,"user_id":691626,"accept_rate":46,"display_name":"Dino Tw"},"comment_count":7,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1411660005,"creation_date":1411514905,"answer_id":26006249,"question_id":26005483,"body_markdown":"change your web.xml to\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app version=&quot;3.1&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;&gt;\r\n\r\n\t  &lt;servlet&gt;\r\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n    \t&lt;load-on-startup&gt;2&lt;/load-on-startup&gt;\r\n      &lt;/servlet&gt;\r\n\t  &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\r\n    \t&lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n\t  &lt;/servlet-mapping&gt;\r\n    &lt;/web-app&gt;\r\n\r\nand dispatch-servlet.xml to\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n      xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\r\n      xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n      xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n      xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n      xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n        http://www.springframework.org/schema/aop\r\n        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\r\n        http://www.springframework.org/schema/mvc\r\n        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&quot;&gt;\r\n\r\n      &lt;context:component-scan base-package=&quot;com.api&quot;/&gt;\r\n    &lt;/beans&gt;\r\n\r\nYou don&#39;t need applicationContext.xml for your code to run","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>change your web.xml to</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"3.1\" xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\"&gt;\n\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>and dispatch-servlet.xml to</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xmlns:p=\"http://www.springframework.org/schema/p\"\n  xmlns:aop=\"http://www.springframework.org/schema/aop\"\n  xmlns:tx=\"http://www.springframework.org/schema/tx\"\n  xmlns:context=\"http://www.springframework.org/schema/context\"\n  xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/aop\n    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\n    http://www.springframework.org/schema/mvc\n    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\"&gt;\n\n  &lt;context:component-scan base-package=\"com.api\"/&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>You don't need applicationContext.xml for your code to run</p>\n"},{"tags":[],"owner":{"account_id":6106028,"reputation":11,"user_id":4763726,"display_name":"Sam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1428494669,"creation_date":1428494010,"answer_id":29513853,"question_id":26005483,"body_markdown":"Need to add the following lines in your spring-context.xml\r\n    \r\n    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n    \t\t&lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/view/&quot; /&gt;\r\n    \t\t&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    Note: property prefix and suffix need to modify based on your application like  .jsp if you are using jsp files.","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>Need to add the following lines in your spring-context.xml</p>\n\n<pre><code>&lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n        &lt;property name=\"prefix\" value=\"/WEB-INF/view/\" /&gt;\n        &lt;property name=\"suffix\" value=\".jsp\" /&gt;\n    &lt;/bean&gt;\n\nNote: property prefix and suffix need to modify based on your application like  .jsp if you are using jsp files.\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5370066,"reputation":3875,"user_id":4278870,"accept_rate":100,"display_name":"Tom Nijs"},"score":0,"creation_date":1510834516,"post_id":47328731,"comment_id":81609416,"body_markdown":"Please format your code properly so the OP can determine what are comments and what is code.","body":"Please format your code properly so the OP can determine what are comments and what is code."}],"tags":[],"owner":{"account_id":11682650,"reputation":77,"user_id":8553746,"display_name":"Nandan"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527684346,"creation_date":1510832370,"answer_id":47328731,"question_id":26005483,"body_markdown":"A common mistake is this\r\nMake sure the group id in pom.xml is the parent of that mentioned in \r\n\r\n\t\t&lt;/context:component-scan&gt;  \r\n\t\t\r\nFor Example\r\nIf  Group `Id-com.cavesofprogramming.spring.web` then\r\n\r\n\t\t&lt;context:component-scan base- package=&quot;com.cavesofprogramming.spring.web.controllers&quot;&gt;\r\n\t\t\t\r\nThe effect is that the controller is not found in the maven build and \r\n\t\tas a result the mapping not done to the correct jsp.","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>A common mistake is this\nMake sure the group id in pom.xml is the parent of that mentioned in </p>\n\n<pre><code>    &lt;/context:component-scan&gt;  \n</code></pre>\n\n<p>For Example\nIf  Group <code>Id-com.cavesofprogramming.spring.web</code> then</p>\n\n<pre><code>    &lt;context:component-scan base- package=\"com.cavesofprogramming.spring.web.controllers\"&gt;\n</code></pre>\n\n<p>The effect is that the controller is not found in the maven build and \n        as a result the mapping not done to the correct jsp.</p>\n"},{"tags":[],"owner":{"account_id":11923567,"reputation":21,"user_id":8725472,"display_name":"Rahul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537045326,"creation_date":1537043848,"answer_id":52348673,"question_id":26005483,"body_markdown":"Cause - Main reason behind this issue is servlet.xml file is not able to find the proper controller that could redirect your request.\r\n\r\nSolution - Ensure few things:\r\n\r\n1. In servlet.xml file your base-package should point to the correct path where the controller class resides.\r\n\r\n2. @Controller should be mentioned over the controller class.\r\n\r\n3. In controller class @RequestMapping value should be as same as the web.xml url-pattern parameter.\r\n\r\n4. In controller class, ModelAndView returns .jsp page should be at the same path which is pointing in the servlet.xml prefix value of ViewResolver.","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>Cause - Main reason behind this issue is servlet.xml file is not able to find the proper controller that could redirect your request.</p>\n\n<p>Solution - Ensure few things:</p>\n\n<ol>\n<li><p>In servlet.xml file your base-package should point to the correct path where the controller class resides.</p></li>\n<li><p>@Controller should be mentioned over the controller class.</p></li>\n<li><p>In controller class @RequestMapping value should be as same as the web.xml url-pattern parameter.</p></li>\n<li><p>In controller class, ModelAndView returns .jsp page should be at the same path which is pointing in the servlet.xml prefix value of ViewResolver.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13501358,"reputation":60,"user_id":9740706,"display_name":"iragond"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538809671,"creation_date":1538809671,"answer_id":52676580,"question_id":26005483,"body_markdown":"I Have also faced the same problem \r\n `org.springframework.web.servlet.DispatcherServlet noHandlerFound`\r\n\r\nI am hitting different url in postman to solve this problem just check your postman which URL you hitting \r\n","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>I Have also faced the same problem \n <code>org.springframework.web.servlet.DispatcherServlet noHandlerFound</code></p>\n\n<p>I am hitting different url in postman to solve this problem just check your postman which URL you hitting </p>\n"},{"comments":[{"owner":{"account_id":3252116,"reputation":396,"user_id":2742092,"display_name":"Faiz Ahmed"},"score":0,"creation_date":1584560463,"post_id":59751830,"comment_id":107477281,"body_markdown":"Thanks, I faced the same problem, now you helped me to solve.","body":"Thanks, I faced the same problem, now you helped me to solve."},{"owner":{"account_id":4815200,"reputation":329,"user_id":3887498,"display_name":"simmmplyAmit"},"score":0,"creation_date":1601449452,"post_id":59751830,"comment_id":113407945,"body_markdown":"Thanks. I created the class and it ended up in the resources folder.","body":"Thanks. I created the class and it ended up in the resources folder."}],"tags":[],"owner":{"account_id":11513704,"reputation":540,"user_id":8437661,"display_name":"Jyot"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1579092676,"creation_date":1579092676,"answer_id":59751830,"question_id":26005483,"body_markdown":"After spending whole day i got to know the solution. \r\nWhen you create maven project, by default it doesn&#39;t create &#39;java&#39; folder under &#39;javaResource/src/main&#39;, which is required to get the controller path. \r\n\r\nMake sure you create java folder first inside &#39;javaResource/src/main&#39;, then create your package and controller.\r\n\r\nScreenshot attached for reference. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/skEkT.png","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>After spending whole day i got to know the solution. \nWhen you create maven project, by default it doesn't create 'java' folder under 'javaResource/src/main', which is required to get the controller path. </p>\n\n<p>Make sure you create java folder first inside 'javaResource/src/main', then create your package and controller.</p>\n\n<p>Screenshot attached for reference. </p>\n\n<p><a href=\"https://i.stack.imgur.com/skEkT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/skEkT.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":17446692,"reputation":456,"user_id":12647580,"display_name":"menoktaokan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586203063,"creation_date":1586184572,"answer_id":61062507,"question_id":26005483,"body_markdown":"I just checked the `servlet.xml` file and solved the problem: \r\n\r\n    &lt;context:component-scan base-package=&quot;com.YOURHOST&quot; /&gt;","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>I just checked the <code>servlet.xml</code> file and solved the problem: </p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.YOURHOST\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18611129,"reputation":11,"user_id":13563504,"display_name":"mainaak"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589755654,"creation_date":1589755654,"answer_id":61859786,"question_id":26005483,"body_markdown":"Here is how I got around this and what I was doing wrong.\r\n\r\nOn creating a maven project with web archetype we do not have the java directory under main. You will have to create it manually and add a directory under it. This directory is the base-package that the servlet.xml wants.\r\n\r\nservlet.xml and the location of the base-package image attached for reference\r\n\r\n[View image for viewing the project][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/573DF.png","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>Here is how I got around this and what I was doing wrong.</p>\n\n<p>On creating a maven project with web archetype we do not have the java directory under main. You will have to create it manually and add a directory under it. This directory is the base-package that the servlet.xml wants.</p>\n\n<p>servlet.xml and the location of the base-package image attached for reference</p>\n\n<p><a href=\"https://i.stack.imgur.com/573DF.png\" rel=\"nofollow noreferrer\">View image for viewing the project</a></p>\n"},{"tags":[],"owner":{"account_id":12151785,"reputation":1,"user_id":8871803,"display_name":"Samuelhuckelson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589955128,"creation_date":1589955128,"answer_id":61906271,"question_id":26005483,"body_markdown":"I have faced similar issue while copying from one project to another. I missed to add the index.jsp\r\n\r\nAdding this resolved my issue. Hope it helps.","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>I have faced similar issue while copying from one project to another. I missed to add the index.jsp</p>\n\n<p>Adding this resolved my issue. Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":4527041,"reputation":11,"user_id":3678536,"display_name":"user3678536"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1597509009,"creation_date":1597509009,"answer_id":63428351,"question_id":26005483,"body_markdown":"in maven ,&#39;java&#39; folder was not created . I created as src/main/java and this issue was resolved .\r\n\r\nit is suggested by jyot also in this post . \r\nhttps://stackoverflow.com/questions/26005483/org-springframework-web-servlet-dispatcherservlet-nohandlerfound/59751830#59751830","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>in maven ,'java' folder was not created . I created as src/main/java and this issue was resolved .</p>\n<p>it is suggested by jyot also in this post .\n<a href=\"https://stackoverflow.com/questions/26005483/org-springframework-web-servlet-dispatcherservlet-nohandlerfound/59751830#59751830\">org.springframework.web.servlet.DispatcherServlet noHandlerFound</a></p>\n"},{"comments":[{"owner":{"account_id":18088193,"reputation":595,"user_id":13148560,"display_name":"Japhei"},"score":0,"creation_date":1657395230,"post_id":72865957,"comment_id":128801947,"body_markdown":"This does not really answer the question. If you have a different question, you can ask it by clicking [Ask Question](https://stackoverflow.com/questions/ask). To get notified when this question gets new answers, you can [follow this question](https://meta.stackexchange.com/q/345661). Once you have enough [reputation](https://stackoverflow.com/help/whats-reputation), you can also [add a bounty](https://stackoverflow.com/help/privileges/set-bounties) to draw more attention to this question. - [From Review](/review/late-answers/32174977)","body":"This does not really answer the question. If you have a different question, you can ask it by clicking <a href=\"https://stackoverflow.com/questions/ask\">Ask Question</a>. To get notified when this question gets new answers, you can <a href=\"https://meta.stackexchange.com/q/345661\">follow this question</a>. Once you have enough <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a>, you can also <a href=\"https://stackoverflow.com/help/privileges/set-bounties\">add a bounty</a> to draw more attention to this question. - <a href=\"/review/late-answers/32174977\">From Review</a>"}],"tags":[],"owner":{"account_id":25729333,"reputation":1,"user_id":19485136,"display_name":"Gagan Thakur"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657008130,"creation_date":1657008130,"answer_id":72865957,"question_id":26005483,"body_markdown":"I faced the same issue and very basic mistake i did was:\r\n\r\n&lt;mvc:annotation-driven /&gt;\r\n    &lt;context:component-scan base-package=&quot;com.test&quot; /&gt;\r\n\r\nwrong package name as it was &quot;com.test&quot; and i had written &quot;com.controller&quot;..\r\n","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>I faced the same issue and very basic mistake i did was:</p>\n<p>&lt;mvc:annotation-driven /&gt;\n&lt;context:component-scan base-package=&quot;com.test&quot; /&gt;</p>\n<p>wrong package name as it was &quot;com.test&quot; and i had written &quot;com.controller&quot;..</p>\n"},{"tags":[],"owner":{"account_id":28742462,"reputation":1,"user_id":22012307,"display_name":"Eshika Verma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686243954,"creation_date":1686243692,"answer_id":76434165,"question_id":26005483,"body_markdown":"In my case I have given the wrong address for the jsp page for which mapping have been done.\r\n\r\nWhat I have given-\r\n\r\n name=&quot;prefix&quot; value=&quot;/WEB-INF/views&quot;\r\n\r\nWhat it should actually be-\r\n\r\nname=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;\r\n\r\nOnly a slight difference of slash(/) cause the error.\r\n\r\nEnsure that all the changes you have made should be saved.","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>In my case I have given the wrong address for the jsp page for which mapping have been done.</p>\n<p>What I have given-</p>\n<p>name=&quot;prefix&quot; value=&quot;/WEB-INF/views&quot;</p>\n<p>What it should actually be-</p>\n<p>name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;</p>\n<p>Only a slight difference of slash(/) cause the error.</p>\n<p>Ensure that all the changes you have made should be saved.</p>\n"}],"owner":{"account_id":229363,"reputation":302,"user_id":492274,"accept_rate":93,"display_name":"wonza"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56746,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":26006249,"answer_count":12,"score":5,"last_activity_date":1686243954,"creation_date":1411510176,"question_id":26005483,"body_markdown":"I get this error when accessing `http://api:8080/users` which 404&#39;s and I get this error in my console:\r\n\r\n\r\n&gt;Sep 23, 2014 5:57:52 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound\r\n    WARNING: No mapping found for HTTP request with URI [/users] in DispatcherServlet with name &#39;dispatcher&#39;\r\n\r\nWhen I access `http://localhost:8080/api/users` I get a 404 in my browser but no error in my console\r\n\r\napplicationContext.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n        xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n        xsi:schemaLocation=&quot;\r\n            http://www.springframework.org/schema/beans\r\n            http://www.springframework.org/schema/beans/spring-beans.xsd\r\n            http://www.springframework.org/schema/context\r\n            http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n    \r\n        &lt;context:component-scan base-package=&quot;com.api&quot;/&gt;\r\n    &lt;/beans&gt;\r\n\r\n\r\ndispatcher-servlet.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n      xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\r\n      xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n      xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n      xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n      xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n        http://www.springframework.org/schema/aop\r\n        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\r\n        http://www.springframework.org/schema/mvc\r\n        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\r\n                http://www.springframework.org/schema/context\r\n                http://www.springframework.org/schema/context/spring-context.xsd\r\n        &quot;&gt;\r\n    \r\n      &lt;context:component-scan base-package=&quot;com.api&quot;/&gt;      \r\n    &lt;/beans&gt;\r\n\r\n\r\nweb.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app version=&quot;3.1&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;&gt;\r\n    \r\n      &lt;servlet&gt;\r\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n        &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;\r\n      &lt;/servlet&gt;\r\n      &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n      &lt;/servlet-mapping&gt;\r\n    &lt;/web-app&gt;\r\n\r\nUsers.java:\r\n\r\n    package com.api;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    @RequestMapping(&quot;/users&quot;)\r\n    public class Users {\r\n    \t @Autowired\r\n    \t public Users() {\r\n    \t\t \r\n    \t }\r\n    \t \r\n    \t@RequestMapping(method = RequestMethod.GET)\r\n        public void getUser() {\r\n            System.out.println(&quot;\\nhere\\n&quot;);\r\n        }\r\n    }\r\n\r\n\r\nIf anyone has any clue I&#39;d greatly appreciate it. I&#39;ve looked up several questions with the same error as I&#39;m getting but common solution was to add &lt;mvc:default-servlet-handler/&gt;    which I have already, so I&#39;m not sure what else to do. Thanks.\r\n\r\nEDIT: I&#39;ve just updated all the code to what the latest reference doc, and I still get the same error.\r\nEDIT: Update to show my current state of files.","title":"org.springframework.web.servlet.DispatcherServlet noHandlerFound","body":"<p>I get this error when accessing <code>http://api:8080/users</code> which 404's and I get this error in my console:</p>\n\n<blockquote>\n  <p>Sep 23, 2014 5:57:52 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound\n      WARNING: No mapping found for HTTP request with URI [/users] in DispatcherServlet with name 'dispatcher'</p>\n</blockquote>\n\n<p>When I access <code>http://localhost:8080/api/users</code> I get a 404 in my browser but no error in my console</p>\n\n<p>applicationContext.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:p=\"http://www.springframework.org/schema/p\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"com.api\"/&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>dispatcher-servlet.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xmlns:p=\"http://www.springframework.org/schema/p\"\n  xmlns:aop=\"http://www.springframework.org/schema/aop\"\n  xmlns:tx=\"http://www.springframework.org/schema/tx\"\n  xmlns:context=\"http://www.springframework.org/schema/context\"\n  xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/aop\n    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\n    http://www.springframework.org/schema/mvc\n    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n            http://www.springframework.org/schema/context\n            http://www.springframework.org/schema/context/spring-context.xsd\n    \"&gt;\n\n  &lt;context:component-scan base-package=\"com.api\"/&gt;      \n&lt;/beans&gt;\n</code></pre>\n\n<p>web.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"3.1\" xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\"&gt;\n\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Users.java:</p>\n\n<pre><code>package com.api;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RequestMapping(\"/users\")\npublic class Users {\n     @Autowired\n     public Users() {\n\n     }\n\n    @RequestMapping(method = RequestMethod.GET)\n    public void getUser() {\n        System.out.println(\"\\nhere\\n\");\n    }\n}\n</code></pre>\n\n<p>If anyone has any clue I'd greatly appreciate it. I've looked up several questions with the same error as I'm getting but common solution was to add     which I have already, so I'm not sure what else to do. Thanks.</p>\n\n<p>EDIT: I've just updated all the code to what the latest reference doc, and I still get the same error.\nEDIT: Update to show my current state of files.</p>\n"},{"tags":["java","user-interface","debugging","jtable","encapsulation"],"owner":{"account_id":28781816,"reputation":1,"user_id":22043269,"display_name":"Einfortunate"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686243952,"creation_date":1686243952,"question_id":76434203,"body_markdown":"I&#39;m using Java and Windows Builder in Eclipse to create the GUI, while also implementing encapsulation to store the information. There are two sides in my appointment system, User and Registar. The user will type in their information at the text field, and then press the button for request. When we switch to the registar&#39;s panel where the table is, there isn&#39;t anything displayed in it.\r\n\r\nHere are my codes.\r\n\r\n```package queuemanagement;\r\n\r\nimport queuemanagement.QueueManagementSystem.AppointmentRequestPanel;\r\n\r\npublic class AppointmentRequest {\r\n\t\r\n    private String firstName;\r\n    private String surname;\r\n    private String middleName;\r\n    private String email;\r\n    private String documentType;\r\n    private String proofOfPayment;\r\n    private String purposeOfAppointment;\r\n    private String trackingCode;\r\n    private AppointmentRequestPanel appointmentReq; \r\n    \r\n    public String getFirstName() {\r\n\t\treturn firstName;\r\n\t}\r\n\r\n\tpublic void setFirstName(String firstName) {\r\n\t\tthis.firstName = firstName;\r\n\t}\r\n\r\n\tpublic String getSurname() {\r\n\t\treturn surname;\r\n\t}\r\n\r\n\tpublic void setSurname(String surname) {\r\n\t\tthis.surname = surname;\r\n\t}\r\n\r\n\tpublic String getMiddleName() {\r\n\t\treturn middleName;\r\n\t}\r\n\r\n\tpublic void setMiddleName(String middleName) {\r\n\t\tthis.middleName = middleName;\r\n\t}\r\n\r\n\tpublic String getEmail() {\r\n\t\treturn email;\r\n\t}\r\n\r\n\tpublic void setEmail(String email) {\r\n\t\tthis.email = email;\r\n\t}\r\n\r\n\tpublic String getDocumentType() {\r\n\t\treturn documentType;\r\n\t}\r\n\r\n\tpublic void setDocumentType(String documentType) {\r\n\t\tthis.documentType = documentType;\r\n\t}\r\n\r\n\tpublic String getProofOfPayment() {\r\n\t\treturn proofOfPayment;\r\n\t}\r\n\r\n\tpublic void setProofOfPayment(String proofOfPayment) {\r\n\t\tthis.proofOfPayment = proofOfPayment;\r\n\t}\r\n\r\n\tpublic String getPurposeOfAppointment() {\r\n\t\treturn purposeOfAppointment;\r\n\t}\r\n\t\r\n\tpublic void RequestAppointmentPanel(AppointmentRequestPanel appointmentReq) {\r\n\t    this.appointmentReq = appointmentReq;\r\n\t}\r\n\r\n\tpublic void setPurposeOfAppointment(String purposeOfAppointment) {\r\n\t\tthis.purposeOfAppointment = purposeOfAppointment;\r\n\t}\r\n\r\n\t\r\n    // Constructor\r\n    public AppointmentRequest(String firstName, String surname, String middleName, String email, String      documentType,\r\n            String proofOfPayment, String purposeOfAppointment) {\r\n    \t\r\n        this.firstName = firstName;\r\n        this.surname = surname;\r\n        this.middleName = middleName;\r\n        this.email = email;\r\n        this.documentType = documentType;\r\n        this.proofOfPayment = proofOfPayment;\r\n        this.purposeOfAppointment = purposeOfAppointment;\r\n\r\n    }\r\n }\r\n```\r\n\r\nHere&#39;s the code for the panel that has the text fields, I also shortened this code because of how long it is with the other labels that aren&#39;t needed for this problem.\r\n\r\n```\r\npublic class RequestAppointmentPanel extends JPanel {\r\n\tpublic RequestAppointmentPanel(DefaultTableModel tableModel) {\r\n\t\t\r\n        this.tableModel = tableModel;\r\n        appointmentRequestPanel = new AppointmentRequestPanel();\r\n\r\n\tprivate AppointmentRequest retrieveAppointmentRequest() {\r\n\t    // Get the values entered by the user\r\n\t    String firstName = textField_firstName.getText();\r\n\t    String surname = textField_surname.getText();\r\n\t    String middleName = textField_middleName.getText();\r\n\t    String email = textField_email.getText();\r\n\t    String purpose = textArea_purposeOfAppointment.getText();\r\n\t    String proofOfPayment = textField_proofOfPayment.getText();\r\n\t    String documentType = comboBox_documentType.getSelectedItem().toString();\r\n\r\n\t    // Create and return an instance of AppointmentRequest\r\n\t    return new AppointmentRequest(firstName, surname, middleName, email, documentType, proofOfPayment, purpose);\r\n\t}\r\n\t\t\r\n\tprivate void addFileRequestButton(JPanel panel) {\r\n\t\t\t\t\r\n\t\tbtnFileRequest = new RoundedButton(&quot;File a Request&quot;);\r\n\t\t\r\n\t\tbtnFileRequest.addActionListener(new ActionListener() {\r\n\t\t\t\r\n\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\t  // Check if required fields are filled\r\n\t\t\t\t\r\n\t            if (isFieldsFilled()) {\t               \r\n\t            \t\r\n\t            \t// Retrieve the appointment request information\r\n\t                AppointmentRequest appointmentRequest = retrieveAppointmentRequest();\r\n\r\n\t                // Pass the appointment request data to the AppointmentRequestPanel\r\n\t                appointmentRequestPanel.addAppointmentRequest(appointmentRequest);\r\n\t                \r\n\t                // Display success message and clear the entered information\r\n\t                JOptionPane.showMessageDialog(null, &quot;File request submitted!&quot;, &quot;Success&quot;, JOptionPane.INFORMATION_MESSAGE);\r\n\t                clearFields();\r\n\t                \t              \t            \t\r\n\t            } else {\r\n\t            \t\r\n\t                // Display an error message or prompt the user to fill in the required fields\r\n    \t                JOptionPane.showMessageDialog(null, &quot;Please fill in all required fields.&quot;,                 &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);\r\n\t                \r\n\t            }        \r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tbtnFileRequest.setText(&quot;File a request&quot;);\r\n\t}\r\n} \r\n```\r\n\r\nLastly, the class that has the table.\r\n\r\n```\r\npublic class AppointmentRequestPanel extends JPanel {\r\n\r\n    private JTable appointmentTable;\r\n    private DefaultTableModel tableModel;\r\n    \r\n    \r\n    public AppointmentRequestPanel() {\r\n    \t\r\n        setSize(1016, 637);\r\n    \tsetBackground(new Color(249, 249, 249));\r\n                \r\n       appointmentTable = new JTable();\r\n       //create the table model with appropriate column names\r\n       tableModel = new DefaultTableModel();\r\n       tableModel.setColumnIdentifiers(new String[] {&quot;Last Name&quot;, &quot;First Name&quot;, &quot;Middle Name&quot;, &quot;Email&quot;, &quot;Document Type&quot;, &quot;Proof of Payment&quot;, &quot;Purpose&quot;});\r\n       setLayout(null);\r\n      \r\n       appointmentTable.setCellSelectionEnabled(true);\r\n       appointmentTable.setColumnSelectionAllowed(true);\r\n       appointmentTable.setFillsViewportHeight(true);\r\n       appointmentTable.setModel(tableModel);\r\n       \r\n       //create and configure the table to display the appointment requests\r\n       JScrollPane scrollPane = new JScrollPane(appointmentTable);\r\n       scrollPane.setBounds(42, 90, 931, 509);\r\n       scrollPane.setViewportView(appointmentTable);\r\n    \r\n       add(scrollPane, BorderLayout.CENTER);\r\n       \r\n       JLabel lblAppointmentRequest = new JLabel(&quot;Appointment Request&quot;);\r\n       lblAppointmentRequest.setForeground(new Color(49, 62, 138));\r\n       lblAppointmentRequest.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 40));\r\n       lblAppointmentRequest.setBounds(42, 0, 406, 91);\r\n       add(lblAppointmentRequest);\r\n       \r\n    }\r\n    \r\n    public void displayAppointmentRequest(AppointmentRequest appointmentRequest) {\r\n        // add the appointment request data to the table model\r\n        Object[] rowData = {\r\n            appointmentRequest.getSurname(),\r\n            appointmentRequest.getFirstName(),\r\n            appointmentRequest.getMiddleName(),\r\n            appointmentRequest.getEmail(),\r\n            appointmentRequest.getDocumentType(),\r\n            appointmentRequest.getProofOfPayment(),\r\n            appointmentRequest.getPurposeOfAppointment()\r\n        };\r\n        tableModel.addRow(rowData);\r\n    }\r\n    \r\n    public void displayRow(Object[] row) {\r\n        tableModel.addRow(row);\r\n    }\r\n    \t\r\n    public DefaultTableModel getTableModel() {\r\n        return tableModel;\r\n    }\r\n\r\n}\\`\\`\\`\r\n```\r\n\r\nI also can&#39;t use database for this. Please tell me if my format for asking a question is wrong, I&#39;m still new to this site. And if my code is messy, sorry about that.","title":"I&#39;m trying to make an appointment system, but the data won&#39;t show up to my Jtable","body":"<p>I'm using Java and Windows Builder in Eclipse to create the GUI, while also implementing encapsulation to store the information. There are two sides in my appointment system, User and Registar. The user will type in their information at the text field, and then press the button for request. When we switch to the registar's panel where the table is, there isn't anything displayed in it.</p>\n<p>Here are my codes.</p>\n<pre><code>\nimport queuemanagement.QueueManagementSystem.AppointmentRequestPanel;\n\npublic class AppointmentRequest {\n    \n    private String firstName;\n    private String surname;\n    private String middleName;\n    private String email;\n    private String documentType;\n    private String proofOfPayment;\n    private String purposeOfAppointment;\n    private String trackingCode;\n    private AppointmentRequestPanel appointmentReq; \n    \n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getSurname() {\n        return surname;\n    }\n\n    public void setSurname(String surname) {\n        this.surname = surname;\n    }\n\n    public String getMiddleName() {\n        return middleName;\n    }\n\n    public void setMiddleName(String middleName) {\n        this.middleName = middleName;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getDocumentType() {\n        return documentType;\n    }\n\n    public void setDocumentType(String documentType) {\n        this.documentType = documentType;\n    }\n\n    public String getProofOfPayment() {\n        return proofOfPayment;\n    }\n\n    public void setProofOfPayment(String proofOfPayment) {\n        this.proofOfPayment = proofOfPayment;\n    }\n\n    public String getPurposeOfAppointment() {\n        return purposeOfAppointment;\n    }\n    \n    public void RequestAppointmentPanel(AppointmentRequestPanel appointmentReq) {\n        this.appointmentReq = appointmentReq;\n    }\n\n    public void setPurposeOfAppointment(String purposeOfAppointment) {\n        this.purposeOfAppointment = purposeOfAppointment;\n    }\n\n    \n    // Constructor\n    public AppointmentRequest(String firstName, String surname, String middleName, String email, String      documentType,\n            String proofOfPayment, String purposeOfAppointment) {\n        \n        this.firstName = firstName;\n        this.surname = surname;\n        this.middleName = middleName;\n        this.email = email;\n        this.documentType = documentType;\n        this.proofOfPayment = proofOfPayment;\n        this.purposeOfAppointment = purposeOfAppointment;\n\n    }\n }\n</code></pre>\n<p>Here's the code for the panel that has the text fields, I also shortened this code because of how long it is with the other labels that aren't needed for this problem.</p>\n<pre><code>public class RequestAppointmentPanel extends JPanel {\n    public RequestAppointmentPanel(DefaultTableModel tableModel) {\n        \n        this.tableModel = tableModel;\n        appointmentRequestPanel = new AppointmentRequestPanel();\n\n    private AppointmentRequest retrieveAppointmentRequest() {\n        // Get the values entered by the user\n        String firstName = textField_firstName.getText();\n        String surname = textField_surname.getText();\n        String middleName = textField_middleName.getText();\n        String email = textField_email.getText();\n        String purpose = textArea_purposeOfAppointment.getText();\n        String proofOfPayment = textField_proofOfPayment.getText();\n        String documentType = comboBox_documentType.getSelectedItem().toString();\n\n        // Create and return an instance of AppointmentRequest\n        return new AppointmentRequest(firstName, surname, middleName, email, documentType, proofOfPayment, purpose);\n    }\n        \n    private void addFileRequestButton(JPanel panel) {\n                \n        btnFileRequest = new RoundedButton(&quot;File a Request&quot;);\n        \n        btnFileRequest.addActionListener(new ActionListener() {\n            \n            public void actionPerformed(ActionEvent e) {\n                  // Check if required fields are filled\n                \n                if (isFieldsFilled()) {                \n                    \n                    // Retrieve the appointment request information\n                    AppointmentRequest appointmentRequest = retrieveAppointmentRequest();\n\n                    // Pass the appointment request data to the AppointmentRequestPanel\n                    appointmentRequestPanel.addAppointmentRequest(appointmentRequest);\n                    \n                    // Display success message and clear the entered information\n                    JOptionPane.showMessageDialog(null, &quot;File request submitted!&quot;, &quot;Success&quot;, JOptionPane.INFORMATION_MESSAGE);\n                    clearFields();\n                                                        \n                } else {\n                    \n                    // Display an error message or prompt the user to fill in the required fields\n                        JOptionPane.showMessageDialog(null, &quot;Please fill in all required fields.&quot;,                 &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);\n                    \n                }        \n                \n            }\n        });\n        \n        btnFileRequest.setText(&quot;File a request&quot;);\n    }\n} \n</code></pre>\n<p>Lastly, the class that has the table.</p>\n<pre><code>public class AppointmentRequestPanel extends JPanel {\n\n    private JTable appointmentTable;\n    private DefaultTableModel tableModel;\n    \n    \n    public AppointmentRequestPanel() {\n        \n        setSize(1016, 637);\n        setBackground(new Color(249, 249, 249));\n                \n       appointmentTable = new JTable();\n       //create the table model with appropriate column names\n       tableModel = new DefaultTableModel();\n       tableModel.setColumnIdentifiers(new String[] {&quot;Last Name&quot;, &quot;First Name&quot;, &quot;Middle Name&quot;, &quot;Email&quot;, &quot;Document Type&quot;, &quot;Proof of Payment&quot;, &quot;Purpose&quot;});\n       setLayout(null);\n      \n       appointmentTable.setCellSelectionEnabled(true);\n       appointmentTable.setColumnSelectionAllowed(true);\n       appointmentTable.setFillsViewportHeight(true);\n       appointmentTable.setModel(tableModel);\n       \n       //create and configure the table to display the appointment requests\n       JScrollPane scrollPane = new JScrollPane(appointmentTable);\n       scrollPane.setBounds(42, 90, 931, 509);\n       scrollPane.setViewportView(appointmentTable);\n    \n       add(scrollPane, BorderLayout.CENTER);\n       \n       JLabel lblAppointmentRequest = new JLabel(&quot;Appointment Request&quot;);\n       lblAppointmentRequest.setForeground(new Color(49, 62, 138));\n       lblAppointmentRequest.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 40));\n       lblAppointmentRequest.setBounds(42, 0, 406, 91);\n       add(lblAppointmentRequest);\n       \n    }\n    \n    public void displayAppointmentRequest(AppointmentRequest appointmentRequest) {\n        // add the appointment request data to the table model\n        Object[] rowData = {\n            appointmentRequest.getSurname(),\n            appointmentRequest.getFirstName(),\n            appointmentRequest.getMiddleName(),\n            appointmentRequest.getEmail(),\n            appointmentRequest.getDocumentType(),\n            appointmentRequest.getProofOfPayment(),\n            appointmentRequest.getPurposeOfAppointment()\n        };\n        tableModel.addRow(rowData);\n    }\n    \n    public void displayRow(Object[] row) {\n        tableModel.addRow(row);\n    }\n        \n    public DefaultTableModel getTableModel() {\n        return tableModel;\n    }\n\n}\\`\\`\\`\n</code></pre>\n<p>I also can't use database for this. Please tell me if my format for asking a question is wrong, I'm still new to this site. And if my code is messy, sorry about that.</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":1600162,"reputation":1885,"user_id":1481345,"display_name":"Ale Zalazar"},"score":0,"creation_date":1686244904,"post_id":76434150,"comment_id":134776030,"body_markdown":"May be possibly a duplicate of https://stackoverflow.com/questions/804514/hibernate-field-id-doesnt-have-a-default-value","body":"May be possibly a duplicate of <a href=\"https://stackoverflow.com/questions/804514/hibernate-field-id-doesnt-have-a-default-value\" title=\"hibernate field id doesnt have a default value\">stackoverflow.com/questions/804514/&hellip;</a>"}],"owner":{"account_id":24379438,"reputation":139,"user_id":18311254,"display_name":"Toms_Hd3z"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686243570,"creation_date":1686243570,"question_id":76434150,"body_markdown":"I am using HIBERNATE version: 5.6.15.Final, to try to generate a UUID when creating a relational table, I have the following definition of class attributes:\r\n\r\n    @Entity\r\n    @Table(name = &quot;Regiones&quot;)\r\n    public class Region implements Serializable {\r\n        private static final long SerialVersionUID = 1L;\r\n    \r\n        @Id\r\n        @GeneratedValue(generator = &quot;UUID&quot;)\r\n        @GenericGenerator(\r\n          name = &quot;UUID&quot;, \r\n          strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\r\n        )\r\n        @Getter\r\n        @Setter\r\n        private UUID Id;\r\n    }\r\n\r\nBut I get a runtime error: java.sql.SQLException: Field &#39;id&#39; doesn&#39;t have a default value and the program stops. Is the strategy path defined in the GenericGenerator different for this version of hibernate? Or am I wrong about something else?\r\n\r\nGradle dependencies: \r\n\r\n    dependencies {\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    \tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n    \tdevelopmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n    \tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n        // https://mvnrepository.com/artifact/mysql/mysql-connector-java\r\n        implementation group: &#39;mysql&#39;, name: &#39;mysql-connector-java&#39;, version: &#39;8.0.33&#39;\r\n    \r\n        // https://mvnrepository.com/artifact/org.hibernate/hibernate-validator\r\n    \timplementation group: &#39;org.hibernate&#39;, name: &#39;hibernate-validator&#39;, version: &#39;7.0.5.Final&#39;\r\n    \r\n    \ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    }","title":"Generic Generator in hibernate to generate a UUID","body":"<p>I am using HIBERNATE version: 5.6.15.Final, to try to generate a UUID when creating a relational table, I have the following definition of class attributes:</p>\n<pre><code>@Entity\n@Table(name = &quot;Regiones&quot;)\npublic class Region implements Serializable {\n    private static final long SerialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(generator = &quot;UUID&quot;)\n    @GenericGenerator(\n      name = &quot;UUID&quot;, \n      strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\n    )\n    @Getter\n    @Setter\n    private UUID Id;\n}\n</code></pre>\n<p>But I get a runtime error: java.sql.SQLException: Field 'id' doesn't have a default value and the program stops. Is the strategy path defined in the GenericGenerator different for this version of hibernate? Or am I wrong about something else?</p>\n<p>Gradle dependencies:</p>\n<pre><code>dependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    annotationProcessor 'org.projectlombok:lombok'\n    // https://mvnrepository.com/artifact/mysql/mysql-connector-java\n    implementation group: 'mysql', name: 'mysql-connector-java', version: '8.0.33'\n\n    // https://mvnrepository.com/artifact/org.hibernate/hibernate-validator\n    implementation group: 'org.hibernate', name: 'hibernate-validator', version: '7.0.5.Final'\n\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n</code></pre>\n"},{"tags":["java","helidon","helidon-webclient"],"answers":[{"tags":[],"owner":{"account_id":59417,"reputation":7474,"user_id":177784,"accept_rate":100,"display_name":"Ashwin Prabhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686243451,"creation_date":1686243451,"answer_id":76434140,"question_id":76423855,"body_markdown":"A similar question was recently answered here. \r\n\r\nRefer:\r\n[https://stackoverflow.com/questions/76111148/accessing-kubernetes-secret-in-helidon-micro-profile-application/76113695#76113695][1]\r\n\r\nAlthough the above topic relates to k8s secrets, the approach you need to follow for config map is pretty much exactly the same. Just replace the references to secrets in the answer with configMap equivalents, such as secretKeyRef -&gt; configMapKeyRef etc, and you should be set.\r\n\r\nLet me know in comments if anything in my linked answer does not translate directly to your problem.\r\n\r\n  [1]: https://stackoverflow.com/questions/76111148/accessing-kubernetes-secret-in-helidon-micro-profile-application/76113695#76113695","title":"Setting up a config map in HelidonMP","body":"<p>A similar question was recently answered here.</p>\n<p>Refer:\n<a href=\"https://stackoverflow.com/questions/76111148/accessing-kubernetes-secret-in-helidon-micro-profile-application/76113695#76113695\">Accessing kubernetes secret in helidon micro profile application</a></p>\n<p>Although the above topic relates to k8s secrets, the approach you need to follow for config map is pretty much exactly the same. Just replace the references to secrets in the answer with configMap equivalents, such as secretKeyRef -&gt; configMapKeyRef etc, and you should be set.</p>\n<p>Let me know in comments if anything in my linked answer does not translate directly to your problem.</p>\n"}],"owner":{"account_id":6494032,"reputation":141,"user_id":5027167,"display_name":"Ramaiah .S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686243451,"creation_date":1686144688,"question_id":76423855,"body_markdown":"Team, i Have been trying to create config map for one helidon MP project. I have mounted application.yaml file into the config map but still it is not been considered in the pod.\r\ndockerfile:\r\nFROM fccm-dev.dockerhub-phx.oci.oraclecorp.com/java/jdk:17.0.2\r\n\r\nARG service=helidon-jpa-sample\r\n\r\nRUN yum clean all\r\n\r\nADD target/helidon-jpa-sample.jar /app/icpxe/target/helidon-jpa-sample.jar\r\nADD target/libs/* /app/icpxe/target/libs/\r\n\r\nVOLUME /app/icpxe/config\r\n\r\nWORKDIR /app/icpxe\r\n\r\nRUN mkdir -p /app/icpxe/logs &amp;&amp; mkdir -p /app/icpxe/wallet\r\n\r\nVOLUME /app/icpxe/${service}/conf\r\nVOLUME /app/icpxe/logs\r\nVOLUME /app/icpxe/wallet\r\n\r\nCMD [&quot;sh&quot;, &quot;-c&quot;, &quot;java -Dconfig.file=/app/icpxe/${service}/conf/application.yaml -jar target/helidon-jpa-sample.jar&quot;]\r\nhow to configure configmap in HelidonMP","title":"Setting up a config map in HelidonMP","body":"<p>Team, i Have been trying to create config map for one helidon MP project. I have mounted application.yaml file into the config map but still it is not been considered in the pod.\ndockerfile:\nFROM fccm-dev.dockerhub-phx.oci.oraclecorp.com/java/jdk:17.0.2</p>\n<p>ARG service=helidon-jpa-sample</p>\n<p>RUN yum clean all</p>\n<p>ADD target/helidon-jpa-sample.jar /app/icpxe/target/helidon-jpa-sample.jar\nADD target/libs/* /app/icpxe/target/libs/</p>\n<p>VOLUME /app/icpxe/config</p>\n<p>WORKDIR /app/icpxe</p>\n<p>RUN mkdir -p /app/icpxe/logs &amp;&amp; mkdir -p /app/icpxe/wallet</p>\n<p>VOLUME /app/icpxe/${service}/conf\nVOLUME /app/icpxe/logs\nVOLUME /app/icpxe/wallet</p>\n<p>CMD [&quot;sh&quot;, &quot;-c&quot;, &quot;java -Dconfig.file=/app/icpxe/${service}/conf/application.yaml -jar target/helidon-jpa-sample.jar&quot;]\nhow to configure configmap in HelidonMP</p>\n"},{"tags":["java","spring","spring-integration","jira-plugin","atlassian-plugin-sdk"],"answers":[{"comments":[{"owner":{"account_id":2422232,"reputation":2985,"user_id":2114952,"accept_rate":71,"display_name":"Oleksandr H"},"score":0,"creation_date":1686236685,"post_id":76433099,"comment_id":134774342,"body_markdown":"Yes, I have this dependency in `pom.xml`","body":"Yes, I have this dependency in <code>pom.xml</code>"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1686243233,"post_id":76433099,"comment_id":134775702,"body_markdown":"See an UPDATE in my answer.","body":"See an UPDATE in my answer."},{"owner":{"account_id":2422232,"reputation":2985,"user_id":2114952,"accept_rate":71,"display_name":"Oleksandr H"},"score":0,"creation_date":1686301310,"post_id":76433099,"comment_id":134783088,"body_markdown":"After adding `spring.schemas` and `spring.handlers` from spring-integration I see `Failed to parse configuration class [com.my.plugin.service.MyChannel]; nested exception is java.io.FileNotFoundException: OSGi resource[classpath:org/springframework/integration/channel/DirectChannel.class|bnd.id=189|bnd.sym=com.my.plugin] cannot be resolved to URL because it does not exist\n[INFO] [talledLocalContainer]                  OSGi resource[classpath:org/springframework/integration/channel/DirectChannel.class|bnd.id=189|bnd.sym=com.my.plugin] cannot be resolved to URL because it does not exist`","body":"After adding <code>spring.schemas</code> and <code>spring.handlers</code> from spring-integration I see <code>Failed to parse configuration class [com.my.plugin.service.MyChannel]; nested exception is java.io.FileNotFoundException: OSGi resource[classpath:org&#47;springframework&#47;integration&#47;channel&#47;D&zwnj;&#8203;irectChannel.class|b&zwnj;&#8203;nd.id=189|bnd.sym=co&zwnj;&#8203;m.my.plugin] cannot be resolved to URL because it does not exist [INFO] [talledLocalContainer]                  OSGi resource[classpath:org&#47;springframework&#47;integration&#47;channel&#47;D&zwnj;&#8203;irectChannel.class|b&zwnj;&#8203;nd.id=189|bnd.sym=co&zwnj;&#8203;m.my.plugin] cannot be resolved to URL because it does not exist</code>"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1686318657,"post_id":76433099,"comment_id":134786567,"body_markdown":"I&#39;m not familiar with OSGi and AFAIK we don&#39;t support it in Spring for years, like 10 or so.","body":"I&#39;m not familiar with OSGi and AFAIK we don&#39;t support it in Spring for years, like 10 or so."}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686243223,"creation_date":1686235805,"answer_id":76433099,"question_id":76432727,"body_markdown":"The error has nothing to do with Spring Integration. It complains that cannot find `http://www.atlassian.com/schema/atlassian-scanner/2` XSD for those Atlassian custom tags. \r\n\r\nYou need to be sure that you have this dependency or so:\r\n\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;com.atlassian.plugin&lt;/groupId&gt;\r\n     &lt;artifactId&gt;atlassian-spring-scanner-annotation&lt;/artifactId&gt;\r\n     &lt;version&gt;${atlassian.spring.scanner.version}&lt;/version&gt;\r\n     &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nSee more info in their documentation: https://bitbucket.org/atlassian/atlassian-spring-scanner/src/master/\r\n\r\n**UPDATE**\r\n\r\nOK. Looking to the error one more time:\r\n\r\n&gt; Unable to locate Spring NamespaceHandler for XML schema namespace\r\n\r\nThe problem is that that `atlassian-spring-scanner-annotation` doesn&#39;t have a `spring.handlers` file in the `/META-INF` alongside with that `spring.schemas`: https://bitbucket.org/atlassian/atlassian-spring-scanner/src/master/atlassian-spring-scanner-annotation/src/main/resources/META-INF/\r\n\r\nSo, this is a bug in that Atlassian Scanner project.\r\nBut at the same time they suggest to move to annotation model from now on: https://developer.atlassian.com/server/framework/atlassian-sdk/spring-java-config-spring-scanner/","title":"Use Spring Integration in Jira Plugin Development","body":"<p>The error has nothing to do with Spring Integration. It complains that cannot find <code>http://www.atlassian.com/schema/atlassian-scanner/2</code> XSD for those Atlassian custom tags.</p>\n<p>You need to be sure that you have this dependency or so:</p>\n<pre><code>&lt;dependency&gt;\n &lt;groupId&gt;com.atlassian.plugin&lt;/groupId&gt;\n &lt;artifactId&gt;atlassian-spring-scanner-annotation&lt;/artifactId&gt;\n &lt;version&gt;${atlassian.spring.scanner.version}&lt;/version&gt;\n &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>See more info in their documentation: <a href=\"https://bitbucket.org/atlassian/atlassian-spring-scanner/src/master/\" rel=\"nofollow noreferrer\">https://bitbucket.org/atlassian/atlassian-spring-scanner/src/master/</a></p>\n<p><strong>UPDATE</strong></p>\n<p>OK. Looking to the error one more time:</p>\n<blockquote>\n<p>Unable to locate Spring NamespaceHandler for XML schema namespace</p>\n</blockquote>\n<p>The problem is that that <code>atlassian-spring-scanner-annotation</code> doesn't have a <code>spring.handlers</code> file in the <code>/META-INF</code> alongside with that <code>spring.schemas</code>: <a href=\"https://bitbucket.org/atlassian/atlassian-spring-scanner/src/master/atlassian-spring-scanner-annotation/src/main/resources/META-INF/\" rel=\"nofollow noreferrer\">https://bitbucket.org/atlassian/atlassian-spring-scanner/src/master/atlassian-spring-scanner-annotation/src/main/resources/META-INF/</a></p>\n<p>So, this is a bug in that Atlassian Scanner project.\nBut at the same time they suggest to move to annotation model from now on: <a href=\"https://developer.atlassian.com/server/framework/atlassian-sdk/spring-java-config-spring-scanner/\" rel=\"nofollow noreferrer\">https://developer.atlassian.com/server/framework/atlassian-sdk/spring-java-config-spring-scanner/</a></p>\n"}],"owner":{"account_id":2422232,"reputation":2985,"user_id":2114952,"accept_rate":71,"display_name":"Oleksandr H"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686243223,"creation_date":1686233338,"question_id":76432727,"body_markdown":"I&#39;m trying to use Spring Integration module in my Jira plugin. When I&#39;m starting it I see following error:\r\n```___ FAILED PLUGIN REPORT _____________________\r\n[INFO] [talledLocalContainer]     \r\n[INFO] [talledLocalContainer]     1 plugin failed to load during JIRA startup.\r\n[INFO] [talledLocalContainer]     \r\n[INFO] [talledLocalContainer]           abcbcbabqbasbsad  failed to load.\r\n[INFO] [talledLocalContainer]                   Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.atlassian.com/schema/atlassian-scanner/2]\r\n[INFO] [talledLocalContainer]     Offending resource: URL [bundle://189.0:0/META-INF/spring/plugin-context.xml]\r\n```\r\n\r\nContent of `META-INF/spring/plugin-context.xml`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:int=&quot;http://www.springframework.org/schema/integration&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xmlns:atlassian-scanner=&quot;http://www.atlassian.com/schema/atlassian-scanner/2&quot;\r\n       xmlns:beans=&quot;http://www.springframework.org/schema/c&quot;\r\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\r\n        http://www.springframework.org/schema/integration\r\n        https://www.springframework.org/schema/integration/spring-integration.xsd\r\n        http://www.atlassian.com/schema/atlassian-scanner/2\r\n        http://www.atlassian.com/schema/atlassian-scanner/2/atlassian-scanner.xsd\r\n        http://www.springframework.org/schema/context\r\n        https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n    &lt;atlassian-scanner:scan-indexes/&gt;\r\n    &lt;context:component-scan base-package=&quot;com.my.plugin&quot;/&gt;\r\n    &lt;beans:bean id=&quot;myMessageGroupStore&quot; class=&quot;com.my.plugin.service.MyMessageGroupStore&quot;/&gt;\r\n&lt;/beans&gt;\r\n``` \r\n\r\n`pom.xml` content:\r\n```\r\n&lt;dependency&gt;\r\n     &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n     &lt;artifactId&gt;spring-integration-core&lt;/artifactId&gt;\r\n     &lt;version&gt;5.2.11.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.atlassian.plugin&lt;/groupId&gt;\r\n    &lt;artifactId&gt;atlassian-spring-scanner-annotation&lt;/artifactId&gt;\r\n    &lt;version&gt;${atlassian.spring.scanner.version}&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nIn my bean `AbstractMessageGroupStore` is abstract class from spring-integration module:\r\n```\r\n@Service\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class ServerMessageGroupStore extends AbstractMessageGroupStore {\r\n\r\n    @Autowired\r\n    private ActiveObjects ao;\r\n...\r\n}\r\n```\r\n\r\nHow to fix this? Is it possible to use spring-integration in jira plugin?\r\n","title":"Use Spring Integration in Jira Plugin Development","body":"<p>I'm trying to use Spring Integration module in my Jira plugin. When I'm starting it I see following error:</p>\n<pre><code>[INFO] [talledLocalContainer]     \n[INFO] [talledLocalContainer]     1 plugin failed to load during JIRA startup.\n[INFO] [talledLocalContainer]     \n[INFO] [talledLocalContainer]           abcbcbabqbasbsad  failed to load.\n[INFO] [talledLocalContainer]                   Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.atlassian.com/schema/atlassian-scanner/2]\n[INFO] [talledLocalContainer]     Offending resource: URL [bundle://189.0:0/META-INF/spring/plugin-context.xml]\n</code></pre>\n<p>Content of <code>META-INF/spring/plugin-context.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:int=&quot;http://www.springframework.org/schema/integration&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:atlassian-scanner=&quot;http://www.atlassian.com/schema/atlassian-scanner/2&quot;\n       xmlns:beans=&quot;http://www.springframework.org/schema/c&quot;\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n        http://www.springframework.org/schema/integration\n        https://www.springframework.org/schema/integration/spring-integration.xsd\n        http://www.atlassian.com/schema/atlassian-scanner/2\n        http://www.atlassian.com/schema/atlassian-scanner/2/atlassian-scanner.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n    &lt;atlassian-scanner:scan-indexes/&gt;\n    &lt;context:component-scan base-package=&quot;com.my.plugin&quot;/&gt;\n    &lt;beans:bean id=&quot;myMessageGroupStore&quot; class=&quot;com.my.plugin.service.MyMessageGroupStore&quot;/&gt;\n&lt;/beans&gt;\n</code></pre>\n<p><code>pom.xml</code> content:</p>\n<pre><code>&lt;dependency&gt;\n     &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-integration-core&lt;/artifactId&gt;\n     &lt;version&gt;5.2.11.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.atlassian.plugin&lt;/groupId&gt;\n    &lt;artifactId&gt;atlassian-spring-scanner-annotation&lt;/artifactId&gt;\n    &lt;version&gt;${atlassian.spring.scanner.version}&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In my bean <code>AbstractMessageGroupStore</code> is abstract class from spring-integration module:</p>\n<pre><code>@Service\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ServerMessageGroupStore extends AbstractMessageGroupStore {\n\n    @Autowired\n    private ActiveObjects ao;\n...\n}\n</code></pre>\n<p>How to fix this? Is it possible to use spring-integration in jira plugin?</p>\n"},{"tags":["java","installation","java-14","jpackage"],"answers":[{"tags":[],"owner":{"account_id":84493,"reputation":1255,"user_id":236152,"display_name":"Anthony"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594298638,"creation_date":1594298638,"answer_id":62815120,"question_id":62675323,"body_markdown":"This may fix the reinstall.\r\n\r\nIn my case, I create the jpackage installer, install it, creates a new installer (based on Inno Setup) and uninstall the jpackage automatically.\r\n\r\nI think what may work in your case is to uninstall the first installation as the installer may detect that it&#39;s already installed with the same version.\r\n\r\nIn my case I do the uninstall automatically with an Ant task\r\n\r\n      &lt;target name=&quot;uninstall&quot; depends=&quot;init&quot;&gt;\r\n        &lt;exec executable=&quot;wmic.exe&quot;&gt;\r\n          &lt;arg value=&quot;product&quot; /&gt;\r\n          &lt;arg value=&quot;where&quot; /&gt;\r\n          &lt;arg value=&quot;description=&#39;${full.name}&#39;&quot; /&gt;\r\n          &lt;arg value=&quot;uninstall&quot; /&gt;\r\n        &lt;/exec&gt;\r\n      &lt;/target&gt;\r\n\r\n","title":"Cannot rerun Java JPackage installer if already installed, second time just exits without warning","body":"<p>This may fix the reinstall.</p>\n<p>In my case, I create the jpackage installer, install it, creates a new installer (based on Inno Setup) and uninstall the jpackage automatically.</p>\n<p>I think what may work in your case is to uninstall the first installation as the installer may detect that it's already installed with the same version.</p>\n<p>In my case I do the uninstall automatically with an Ant task</p>\n<pre><code>  &lt;target name=&quot;uninstall&quot; depends=&quot;init&quot;&gt;\n    &lt;exec executable=&quot;wmic.exe&quot;&gt;\n      &lt;arg value=&quot;product&quot; /&gt;\n      &lt;arg value=&quot;where&quot; /&gt;\n      &lt;arg value=&quot;description='${full.name}'&quot; /&gt;\n      &lt;arg value=&quot;uninstall&quot; /&gt;\n    &lt;/exec&gt;\n  &lt;/target&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1686242138,"creation_date":1594310688,"answer_id":62819060,"question_id":62675323,"body_markdown":"No idea if this helps on Mac or Linux but the Windows installer automatically removes older versions of the application when you run it so you just need to set up a scheme which changes the version number on each build to avoid having to ununstall old version each time.\r\n\r\nTo do this simply you could set the version number as &quot;YY.MM.DDHH&quot; so version number changes each hour and cuts down on uninstalls.\r\n\r\nAnt steps:\r\n\r\n    &lt;tstamp&gt;\r\n        &lt;format property=&quot;appver&quot;     pattern=&quot;yy.MM.ddHH&quot; /&gt;\r\n    &lt;/tstamp&gt;\r\n\r\n    &lt;exec executable=&quot;jpackage&quot;&gt;\r\n      \t&lt;arg line=&quot;--app-version ${appver}&quot;/&gt;\r\n        ...\r\n    &lt;/exec&gt;\r\n\r\nThe CMD version of this:\r\n\r\n    set appver=%date:~6,2%.%date:~3,2%.%date:~0,2%%time:~0,2%\r\n    jpackage --app-version %appver% ...\r\n\r\nLinux:\r\n\r\n    appver=$(date +%y.%m.%d%H)\r\n    jpackage --app-version $appver\r\n\r\n    \r\n","title":"Cannot rerun Java JPackage installer if already installed, second time just exits without warning","body":"<p>No idea if this helps on Mac or Linux but the Windows installer automatically removes older versions of the application when you run it so you just need to set up a scheme which changes the version number on each build to avoid having to ununstall old version each time.</p>\n<p>To do this simply you could set the version number as &quot;YY.MM.DDHH&quot; so version number changes each hour and cuts down on uninstalls.</p>\n<p>Ant steps:</p>\n<pre><code>&lt;tstamp&gt;\n    &lt;format property=&quot;appver&quot;     pattern=&quot;yy.MM.ddHH&quot; /&gt;\n&lt;/tstamp&gt;\n\n&lt;exec executable=&quot;jpackage&quot;&gt;\n    &lt;arg line=&quot;--app-version ${appver}&quot;/&gt;\n    ...\n&lt;/exec&gt;\n</code></pre>\n<p>The CMD version of this:</p>\n<pre><code>set appver=%date:~6,2%.%date:~3,2%.%date:~0,2%%time:~0,2%\njpackage --app-version %appver% ...\n</code></pre>\n<p>Linux:</p>\n<pre><code>appver=$(date +%y.%m.%d%H)\njpackage --app-version $appver\n</code></pre>\n"}],"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1258,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":62819060,"answer_count":2,"score":6,"last_activity_date":1686242138,"creation_date":1593601203,"question_id":62675323,"body_markdown":"Cannot rerun **JPackage** installer if already installed, second time just **seems to exit** without warning, is this correct behaviour on Windows ?\r\n\r\n\r\n\r\nYou may ask why I want to do this anyway?\r\n\r\nWell in my case I am trying to build a JPackage installer for my Java application, so I am building it installing it, then tweaking the settings, rebuilding it and try to reinstall. It took me some time to work out that I couldn&#39;t not reinstall it unless i uninstall the first installation (using Control Panel, Program and Features)\r\n\r\nMy case may not be the usual usecase, but it doesn&#39;t feel correct that it just exits without giving any reason.\r\n\r\nIt also means that if I deploy a new version to customers, and I later need to amend the installer than I would have to modify the version number to let the user reinstall, this may generally be best practise but is something I would not particulary want to do if the application itself had not changed.\r\n\r\n**Update:Since found out by looking at TaskManager it is still running but doesnt seem to be doing anything and gives no indication to user !**","title":"Cannot rerun Java JPackage installer if already installed, second time just exits without warning","body":"<p>Cannot rerun <strong>JPackage</strong> installer if already installed, second time just <strong>seems to exit</strong> without warning, is this correct behaviour on Windows ?</p>\n<p>You may ask why I want to do this anyway?</p>\n<p>Well in my case I am trying to build a JPackage installer for my Java application, so I am building it installing it, then tweaking the settings, rebuilding it and try to reinstall. It took me some time to work out that I couldn't not reinstall it unless i uninstall the first installation (using Control Panel, Program and Features)</p>\n<p>My case may not be the usual usecase, but it doesn't feel correct that it just exits without giving any reason.</p>\n<p>It also means that if I deploy a new version to customers, and I later need to amend the installer than I would have to modify the version number to let the user reinstall, this may generally be best practise but is something I would not particulary want to do if the application itself had not changed.</p>\n<p><strong>Update:Since found out by looking at TaskManager it is still running but doesnt seem to be doing anything and gives no indication to user !</strong></p>\n"},{"tags":["java","jsp","jakarta-ee","servlets"],"answers":[{"comments":[{"owner":{"account_id":42514,"reputation":382,"user_id":123868,"accept_rate":40,"display_name":"Manu"},"score":0,"creation_date":1246460131,"post_id":1069469,"comment_id":881984,"body_markdown":"thanks for replying so quickly.I am planing not to use .jsp suffix in URLs.I&#39;ll try to use a filter.","body":"thanks for replying so quickly.I am planing not to use .jsp suffix in URLs.I&#39;ll try to use a filter."},{"owner":{"account_id":1421349,"reputation":401,"user_id":1345889,"display_name":"brian_wang"},"score":1,"creation_date":1335274962,"post_id":1069469,"comment_id":13253424,"body_markdown":"Please user / as the url-mapping in your frontcontroller.","body":"Please user / as the url-mapping in your frontcontroller."}],"tags":[],"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1246458827,"creation_date":1246458827,"answer_id":1069469,"question_id":1069442,"body_markdown":"Assuming that you&#39;re looking to authenticate just JSP files, you could change the URL:\r\n\r\n    /*.jsp\r\n\r\nI think it&#39;s a better idea to handle your authentication using a filter rather than a servlet. And in a production environment, you should use a front-end webserver for static content.","title":"RequestDispatcher.forward loop","body":"<p>Assuming that you're looking to authenticate just JSP files, you could change the URL:</p>\n\n<pre><code>/*.jsp\n</code></pre>\n\n<p>I think it's a better idea to handle your authentication using a filter rather than a servlet. And in a production environment, you should use a front-end webserver for static content.</p>\n"},{"tags":[],"owner":{"account_id":74156,"reputation":494,"user_id":213213,"display_name":"Punit Raizada"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1258488263,"creation_date":1258488263,"answer_id":1751400,"question_id":1069442,"body_markdown":"In case you cannot use a filter and you have to use a wildcard &#39;*&#39; in the mapping without a extension like &#39;.jsp&#39; then then this  could work for you:\r\n\r\n    if(isResourceFile){\r\n          RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(&quot;/static/&quot; + fileName);\r\n          dispatcher.forward(request, response);\r\n          return; \r\n    }\r\n\r\nAdding the &#39;/&#39; in the beginning of the static directory will give it root context. ","title":"RequestDispatcher.forward loop","body":"<p>In case you cannot use a filter and you have to use a wildcard '*' in the mapping without a extension like '.jsp' then then this  could work for you:</p>\n\n<pre><code>if(isResourceFile){\n      RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(\"/static/\" + fileName);\n      dispatcher.forward(request, response);\n      return; \n}\n</code></pre>\n\n<p>Adding the '/' in the beginning of the static directory will give it root context. </p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686241975,"creation_date":1258501825,"answer_id":1752702,"question_id":1069442,"body_markdown":"The `url-pattern` of `/*`  is better to be used exclusively by `Filter`s, not `Servlet`s. Put all your static files in a certain folder (maybe covered by the `url-pattern` of a more effective [FileServlet][1]?) and let the Filter check it.\r\n\r\nE.g. (pseudo)\r\n\r\n    public void doFilter(request, response, chain) {\r\n        if (requestURI.startsWith(&quot;/static&quot;)) {\r\n            chain.doFilter(request, response); // Just continue. Do nothing.\r\n        } else {\r\n            request.getRequestDispatcher(&quot;/pages&quot;).forward(request, response); // Forward to page controller.\r\n        }\r\n    }\r\n\r\n### See also:\r\n\r\n- https://stackoverflow.com/questions/4140448/difference-between-and-in-servlet-mapping-url-pattern\r\n\r\n  [1]: https://balusc.omnifaces.org/2009/02/fileservlet-supporting-resume-and.html","title":"RequestDispatcher.forward loop","body":"<p>The <code>url-pattern</code> of <code>/*</code>  is better to be used exclusively by <code>Filter</code>s, not <code>Servlet</code>s. Put all your static files in a certain folder (maybe covered by the <code>url-pattern</code> of a more effective <a href=\"https://balusc.omnifaces.org/2009/02/fileservlet-supporting-resume-and.html\" rel=\"nofollow noreferrer\">FileServlet</a>?) and let the Filter check it.</p>\n<p>E.g. (pseudo)</p>\n<pre><code>public void doFilter(request, response, chain) {\n    if (requestURI.startsWith(&quot;/static&quot;)) {\n        chain.doFilter(request, response); // Just continue. Do nothing.\n    } else {\n        request.getRequestDispatcher(&quot;/pages&quot;).forward(request, response); // Forward to page controller.\n    }\n}\n</code></pre>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/4140448/difference-between-and-in-servlet-mapping-url-pattern\">Difference between / and /* in servlet mapping url pattern</a></li>\n</ul>\n"}],"owner":{"account_id":42514,"reputation":382,"user_id":123868,"accept_rate":40,"display_name":"Manu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4286,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":1069469,"answer_count":3,"score":2,"last_activity_date":1686241975,"creation_date":1246458546,"question_id":1069442,"body_markdown":"I am  using\r\n\r\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\nto map all the requests to one sevlet,where i do all the authentication work.\r\nbut I want to skip some static content (like css files).so I tried fowrding them from\r\nthat sevlet to where the resource file is\r\n\r\n    if(isResourceFile){\r\n        RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(&quot;static/&quot; + fileName);\r\n        dispatcher.forward(request, response);\r\n    }\r\nbut this will start a infinite loop because this will again call the same sevlet\r\n\r\nis there any way to work around this without mapping all the resource(css) files in web.xml?","title":"RequestDispatcher.forward loop","body":"<p>I am  using</p>\n\n<pre><code>&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n</code></pre>\n\n<p>to map all the requests to one sevlet,where i do all the authentication work.\nbut I want to skip some static content (like css files).so I tried fowrding them from\nthat sevlet to where the resource file is</p>\n\n<pre><code>if(isResourceFile){\n    RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(\"static/\" + fileName);\n    dispatcher.forward(request, response);\n}\n</code></pre>\n\n<p>but this will start a infinite loop because this will again call the same sevlet</p>\n\n<p>is there any way to work around this without mapping all the resource(css) files in web.xml?</p>\n"},{"tags":["java","android","android-fragments","android-viewpager"],"comments":[{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":0,"creation_date":1685170338,"post_id":76345490,"comment_id":134626926,"body_markdown":"`setOffScreenPageLimit(2)` would usually work fine in this case. You sure you are using it?","body":"<code>setOffScreenPageLimit(2)</code> would usually work fine in this case. You sure you are using it?"},{"owner":{"account_id":8516184,"reputation":272,"user_id":13926345,"display_name":"CODAR747"},"score":0,"creation_date":1685173720,"post_id":76345490,"comment_id":134627189,"body_markdown":"@Darshan Yes its not working for me","body":"@Darshan Yes its not working for me"}],"answers":[{"tags":[],"owner":{"account_id":8362290,"reputation":1926,"user_id":6280156,"accept_rate":80,"display_name":"Ankit Tale"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686241903,"creation_date":1686241903,"answer_id":76433973,"question_id":76345490,"body_markdown":"You need to call setRetainInstance(true) inside onCreate() of your fragments with FragmentPagerAdapter.\r\n\r\nOr\r\n\r\nYou can use limit for it\r\n\r\n     int limit = (adapter.getCount() &gt; 1 ? adapter.getCount() - 1 : 1);\r\n    mViewPager = (ViewPager)findViewById(R.id.pager);\r\n    mViewPager.setOffscreenPageLimit(limit); \r\n\r\n","title":"How to stop refreshing fragment on tab change with FragmentStateAdapter and ViewPager2?","body":"<p>You need to call setRetainInstance(true) inside onCreate() of your fragments with FragmentPagerAdapter.</p>\n<p>Or</p>\n<p>You can use limit for it</p>\n<pre><code> int limit = (adapter.getCount() &gt; 1 ? adapter.getCount() - 1 : 1);\nmViewPager = (ViewPager)findViewById(R.id.pager);\nmViewPager.setOffscreenPageLimit(limit); \n</code></pre>\n"}],"owner":{"account_id":8516184,"reputation":272,"user_id":13926345,"display_name":"CODAR747"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686241903,"creation_date":1685166106,"question_id":76345490,"body_markdown":"I&#39;m using FragementStateAdapter and ViewPager2 in my Android project. But the problem is that my fragment is being reloaded on tab change. I want to stop that how do I do that? I have tried many online methods like specifying the setOffScreenLimit etc but nothing didn&#39;t work for me. Here is my code \r\n\r\nHere is my adapter code \r\n\r\n    public class LandingAdapter extends FragmentStateAdapter {\r\n    \r\n        private final List&lt;Fragment&gt; mFragmentList = new ArrayList&lt;&gt;();\r\n    \r\n        public LandingAdapter(@NonNull FragmentManager fragmentManager, @NonNull Lifecycle lifecycle) {\r\n            super(fragmentManager, lifecycle);\r\n        }\r\n    \r\n        @NonNull\r\n        @Override\r\n        public Fragment createFragment(int position) {\r\n            return mFragmentList.get(position);\r\n        }\r\n    \r\n    \r\n    \r\n        @Override\r\n        public int getItemCount() {\r\n    \r\n            return mFragmentList.size();\r\n        }\r\n    \r\n        public void addFragment(Fragment fragment) {\r\n    \r\n            mFragmentList.add(fragment);\r\n        }\r\n    \r\n        @Override\r\n        public long getItemId(int position) {\r\n    \r\n            return mFragmentList.get(position).hashCode();\r\n        }\r\n    \r\n    }\r\n\r\n\r\nHere is my Activity code\r\n\r\n            ViewPager2 mViewPager = findViewById(R.id.ViewPager);\r\n            TabLayout mTabLayout = findViewById(R.id.TabLayout);\r\n    \r\n    \r\n    \r\n            LandingAdapter mAdapter = new LandingAdapter(getSupportFragmentManager(), getLifecycle());\r\n            mViewPager.setAdapter(mAdapter);\r\n            int savedAppMode = SharedPrefs.getInt(this, &quot;app_mode_checked_item&quot;,0);\r\n            if (savedAppMode == 1) {\r\n                mAdapter.addFragment(new ItemsFrag1());\r\n                mAdapter.addFragment(new ContactsFrag1());\r\n                mAdapter.addFragment(new ImagesFrag1());\r\n            } else {\r\n                mAdapter.addFragment(new ItemsFrag2());\r\n                mAdapter.addFragment(new ContactsFrag2());\r\n                mAdapter.addFragment(new ImagesFrag2());\r\n            }\r\n    \r\n    \r\n            new TabLayoutMediator(mTabLayout, mViewPager, (tab, position) -&gt; {\r\n                switch (position) {\r\n                    case 0:\r\n                        tab.setText(&quot;Items&quot;);\r\n                        tab.setIcon(R.drawable.x_icon_photo);\r\n                        break;\r\n                    case 1:\r\n                        tab.setText(&quot;Contacts&quot;);\r\n                        tab.setIcon(R.drawable.x_icon_video);\r\n                        break;\r\n                    case 2:\r\n                        tab.setText(&quot;Images&quot;);\r\n                        tab.setIcon(R.drawable.x_icon_download);\r\n                        break;\r\n                }\r\n            }).attach();\r\n\r\n","title":"How to stop refreshing fragment on tab change with FragmentStateAdapter and ViewPager2?","body":"<p>I'm using FragementStateAdapter and ViewPager2 in my Android project. But the problem is that my fragment is being reloaded on tab change. I want to stop that how do I do that? I have tried many online methods like specifying the setOffScreenLimit etc but nothing didn't work for me. Here is my code</p>\n<p>Here is my adapter code</p>\n<pre><code>public class LandingAdapter extends FragmentStateAdapter {\n\n    private final List&lt;Fragment&gt; mFragmentList = new ArrayList&lt;&gt;();\n\n    public LandingAdapter(@NonNull FragmentManager fragmentManager, @NonNull Lifecycle lifecycle) {\n        super(fragmentManager, lifecycle);\n    }\n\n    @NonNull\n    @Override\n    public Fragment createFragment(int position) {\n        return mFragmentList.get(position);\n    }\n\n\n\n    @Override\n    public int getItemCount() {\n\n        return mFragmentList.size();\n    }\n\n    public void addFragment(Fragment fragment) {\n\n        mFragmentList.add(fragment);\n    }\n\n    @Override\n    public long getItemId(int position) {\n\n        return mFragmentList.get(position).hashCode();\n    }\n\n}\n</code></pre>\n<p>Here is my Activity code</p>\n<pre><code>        ViewPager2 mViewPager = findViewById(R.id.ViewPager);\n        TabLayout mTabLayout = findViewById(R.id.TabLayout);\n\n\n\n        LandingAdapter mAdapter = new LandingAdapter(getSupportFragmentManager(), getLifecycle());\n        mViewPager.setAdapter(mAdapter);\n        int savedAppMode = SharedPrefs.getInt(this, &quot;app_mode_checked_item&quot;,0);\n        if (savedAppMode == 1) {\n            mAdapter.addFragment(new ItemsFrag1());\n            mAdapter.addFragment(new ContactsFrag1());\n            mAdapter.addFragment(new ImagesFrag1());\n        } else {\n            mAdapter.addFragment(new ItemsFrag2());\n            mAdapter.addFragment(new ContactsFrag2());\n            mAdapter.addFragment(new ImagesFrag2());\n        }\n\n\n        new TabLayoutMediator(mTabLayout, mViewPager, (tab, position) -&gt; {\n            switch (position) {\n                case 0:\n                    tab.setText(&quot;Items&quot;);\n                    tab.setIcon(R.drawable.x_icon_photo);\n                    break;\n                case 1:\n                    tab.setText(&quot;Contacts&quot;);\n                    tab.setIcon(R.drawable.x_icon_video);\n                    break;\n                case 2:\n                    tab.setText(&quot;Images&quot;);\n                    tab.setIcon(R.drawable.x_icon_download);\n                    break;\n            }\n        }).attach();\n</code></pre>\n"},{"tags":["java","android","mysql","bitmap","android-imageview"],"comments":[{"owner":{"account_id":252456,"reputation":2993,"user_id":530513,"accept_rate":100,"display_name":"David O&#39;Meara"},"score":0,"creation_date":1359101528,"post_id":14517066,"comment_id":20240481,"body_markdown":"You said that the image exists as a `blob` on the server side, but my reading indicates that `json_encode` won&#39;t send binary data. are you forgetting to `Base64` encode on the server before sending to the client? I&#39;d also be printing the payload to make sure it contains the expected data.","body":"You said that the image exists as a <code>blob</code> on the server side, but my reading indicates that <code>json_encode</code> won&#39;t send binary data. are you forgetting to <code>Base64</code> encode on the server before sending to the client? I&#39;d also be printing the payload to make sure it contains the expected data."},{"owner":{"account_id":2286167,"reputation":1,"user_id":2010065,"display_name":"Vijay"},"score":0,"creation_date":1359116534,"post_id":14517066,"comment_id":20247082,"body_markdown":"Thank you Altaf and David. Your help helped me figure out a solution. On the server side, I coded as David instructed and java code follows Altaf&#39;s idea.","body":"Thank you Altaf and David. Your help helped me figure out a solution. On the server side, I coded as David instructed and java code follows Altaf&#39;s idea."},{"owner":{"account_id":220659,"reputation":3674,"user_id":478183,"accept_rate":65,"display_name":"GregM"},"score":0,"creation_date":1361128306,"post_id":14517066,"comment_id":20941425,"body_markdown":"Vijay, could you post your code as an answer? - I am doing something almost identical with json_encode, but not sure how I do base64 on just the blob row and not my entire array or do i do it to the entire array?","body":"Vijay, could you post your code as an answer? - I am doing something almost identical with json_encode, but not sure how I do base64 on just the blob row and not my entire array or do i do it to the entire array?"},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1680807908,"post_id":14517066,"comment_id":133964281,"body_markdown":"Note: at the time of writing, the PHP code in this question **has a pretty big SQL injection vulnerability**. Readers are advised not to copy this code.","body":"Note: at the time of writing, the PHP code in this question <b>has a pretty big SQL injection vulnerability</b>. Readers are advised not to copy this code."}],"answers":[{"tags":[],"owner":{"account_id":1413289,"reputation":4397,"user_id":1339473,"accept_rate":35,"display_name":"QuokMoon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359099680,"creation_date":1359099680,"answer_id":14517441,"question_id":14517066,"body_markdown":"    String input;//your pic string \r\n    byte[] decodedByte = Base64.decode(input, 0);\r\n    BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length); ","title":"Bitmap not successfully retrieved from MySQL using Java","body":"<pre><code>String input;//your pic string \nbyte[] decodedByte = Base64.decode(input, 0);\nBitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":26606954,"reputation":7,"user_id":20227628,"display_name":"Edwin Tigor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686241869,"creation_date":1686059663,"answer_id":76415425,"question_id":14517066,"body_markdown":"Put json_encode($data) into an array syntax variable.\r\n\r\nSo Write $data php as an array\r\nFor example, mariadb loop\r\n\r\n    $data = array();\r\n\t\t$dCount =0;\r\n\t\tforeach($contacts as $contact) { \t\t\r\n\r\n\t\t\t$email = $contact-&gt;email;\r\n\t\t\t$dCount++;\r\n\t\t\t\r\n\t\t\t$r1 = $contact-&gt;id;\r\n\t\t\t\r\n\t\t\t$data[&#39;params_name1&#39;][]= array(&quot;name&quot; =&gt; $contact-&gt;name, &quot;age&quot; =&gt; $contact-&gt;age, &quot;username&quot; =&gt; $contact-&gt;username);\r\n\t\t}\r\n\r\n    $data[&#39;params_name2&#39;][] = array(&quot;status&quot; =&gt; $status, &quot;message&quot; =&gt; $message, &quot;row&quot; =&gt; $dCount);\r\n    echo json_encode($data);\r\n    $pdo = null;\r\n    \r\n\r\nYou can replace params_name1 to table\r\nand params_name2 to title.\r\n\r\nThen, on android async task result:\r\nYou can apply image64 to imageview picture, after get string image64:\r\n\r\n    ImageView image1 = (ImageView)findViewById(R.id.imageView1);\r\n\t//after get image64:\r\n\t\t\t\t\tString image64r = image64.substring (image64.indexOf (&quot;,&quot;) +1);)\r\n\t\t\t\t\tbyte [] decodedString = Base64.decode (image64r.getBytes(), Base64.DEFAULT);\r\n\t\t\t\t\tBitmap decodedImage = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length); \r\n\t\t\t\t\timage1.setImageBitmap(decodedImage);\r\n\r\n\r\nYou can save image view picture to bitmap later:\r\n\r\n    public void saveToInternalStorage(Bitmap bitmapImage){\r\n\t\t\r\n\r\n\t\tFile imgFile = new File(Environment.getExternalStorageDirectory() + File.separator + &quot;Profile2.png&quot;);\r\n\r\n        FileOutputStream fos = null;\r\n        try {           \r\n            fos = new FileOutputStream(imgFile);\r\n\t\t\t// Use the compress method on the BitMap object to write image to the OutputStream\r\n            bitmapImage.compress(Bitmap.CompressFormat.PNG, 100, fos);\r\n        } catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n        } finally {\r\n            try {\r\n\t\t\t\t//fos.flush();\r\n\t\t\t\tfos.close();\r\n            } catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\tpublic void saveImageViewBitmap(View view) {\r\n\t\tImageView imageView = (ImageView) findViewById(R.id.imageView1);\r\n\t\tBitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();\r\n\t\tBitmap bitmap = drawable.getBitmap();\r\n\r\n\t\tfloat originalWidth = bitmap.getWidth();\r\n\t\tfloat originalHeight = bitmap.getHeight();\r\n\t\t//Toast.makeText(getBaseContext(),&quot;seattled: w=&quot; + String.valueOf(originalWidth) + &quot; h=&quot; + String.valueOf(originalHeight),Toast.LENGTH_LONG).show();\r\n\t\t\r\n\t\tint targetWidth =200;\r\n\t\tint targetHeight =200;\r\n\t\tfloat percentage = 100;\r\n\t\tif ((originalWidth &gt; 200)&amp;&amp;(originalHeight &gt; 200)) {\r\n\t\t\t//Toast.makeText(getBaseContext(),&quot;A &quot; + String.valueOf(originalWidth) + &quot; &quot; + String.valueOf(originalHeight),Toast.LENGTH_LONG).show();\r\n\t\t\tif (originalWidth &gt; originalHeight) {\r\n\t\t\t\tpercentage = originalWidth/originalHeight;\r\n\t\t\t\ttargetHeight = 200;\r\n\t\t\t\ttargetWidth = Math.round(200*percentage);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tpercentage = originalHeight/originalWidth;\r\n\t\t\t\ttargetWidth = 200;\r\n\t\t\t\ttargetHeight = Math.round(200*percentage);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tDecimalFormat df = new DecimalFormat(&quot;0.00&quot;);\r\n\t\t\tString info = df.format(percentage);\r\n\t\t\t//Toast.makeText(getBaseContext(),&quot;percentage: &quot; + info,Toast.LENGTH_LONG).show();\r\n\r\n\t\t\tbitmap = scaleBitmap(bitmap, targetWidth, targetHeight);\r\n\t\t\timageView.setImageBitmap(bitmap);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tToast.makeText(getBaseContext(),&quot;too small to scaled &quot; + String.valueOf(originalWidth) + &quot; &quot; + String.valueOf(originalHeight),Toast.LENGTH_LONG).show();\r\n\t\t}\r\n\t\tsaveToInternalStorage(bitmap);\r\n        Toast.makeText(getBaseContext(), &quot;saved&quot;, Toast.LENGTH_LONG).show();\r\n\t}","title":"Bitmap not successfully retrieved from MySQL using Java","body":"<p>Put json_encode($data) into an array syntax variable.</p>\n<p>So Write $data php as an array\nFor example, mariadb loop</p>\n<pre><code>$data = array();\n    $dCount =0;\n    foreach($contacts as $contact) {        \n\n        $email = $contact-&gt;email;\n        $dCount++;\n        \n        $r1 = $contact-&gt;id;\n        \n        $data['params_name1'][]= array(&quot;name&quot; =&gt; $contact-&gt;name, &quot;age&quot; =&gt; $contact-&gt;age, &quot;username&quot; =&gt; $contact-&gt;username);\n    }\n\n$data['params_name2'][] = array(&quot;status&quot; =&gt; $status, &quot;message&quot; =&gt; $message, &quot;row&quot; =&gt; $dCount);\necho json_encode($data);\n$pdo = null;\n</code></pre>\n<p>You can replace params_name1 to table\nand params_name2 to title.</p>\n<p>Then, on android async task result:\nYou can apply image64 to imageview picture, after get string image64:</p>\n<pre><code>ImageView image1 = (ImageView)findViewById(R.id.imageView1);\n//after get image64:\n                String image64r = image64.substring (image64.indexOf (&quot;,&quot;) +1);)\n                byte [] decodedString = Base64.decode (image64r.getBytes(), Base64.DEFAULT);\n                Bitmap decodedImage = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length); \n                image1.setImageBitmap(decodedImage);\n</code></pre>\n<p>You can save image view picture to bitmap later:</p>\n<pre><code>public void saveToInternalStorage(Bitmap bitmapImage){\n    \n\n    File imgFile = new File(Environment.getExternalStorageDirectory() + File.separator + &quot;Profile2.png&quot;);\n\n    FileOutputStream fos = null;\n    try {           \n        fos = new FileOutputStream(imgFile);\n        // Use the compress method on the BitMap object to write image to the OutputStream\n        bitmapImage.compress(Bitmap.CompressFormat.PNG, 100, fos);\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        try {\n            //fos.flush();\n            fos.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\npublic void saveImageViewBitmap(View view) {\n    ImageView imageView = (ImageView) findViewById(R.id.imageView1);\n    BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();\n    Bitmap bitmap = drawable.getBitmap();\n\n    float originalWidth = bitmap.getWidth();\n    float originalHeight = bitmap.getHeight();\n    //Toast.makeText(getBaseContext(),&quot;seattled: w=&quot; + String.valueOf(originalWidth) + &quot; h=&quot; + String.valueOf(originalHeight),Toast.LENGTH_LONG).show();\n    \n    int targetWidth =200;\n    int targetHeight =200;\n    float percentage = 100;\n    if ((originalWidth &gt; 200)&amp;&amp;(originalHeight &gt; 200)) {\n        //Toast.makeText(getBaseContext(),&quot;A &quot; + String.valueOf(originalWidth) + &quot; &quot; + String.valueOf(originalHeight),Toast.LENGTH_LONG).show();\n        if (originalWidth &gt; originalHeight) {\n            percentage = originalWidth/originalHeight;\n            targetHeight = 200;\n            targetWidth = Math.round(200*percentage);\n        }\n        else\n        {\n            percentage = originalHeight/originalWidth;\n            targetWidth = 200;\n            targetHeight = Math.round(200*percentage);\n        }\n        \n        DecimalFormat df = new DecimalFormat(&quot;0.00&quot;);\n        String info = df.format(percentage);\n        //Toast.makeText(getBaseContext(),&quot;percentage: &quot; + info,Toast.LENGTH_LONG).show();\n\n        bitmap = scaleBitmap(bitmap, targetWidth, targetHeight);\n        imageView.setImageBitmap(bitmap);\n    }\n    else\n    {\n        Toast.makeText(getBaseContext(),&quot;too small to scaled &quot; + String.valueOf(originalWidth) + &quot; &quot; + String.valueOf(originalHeight),Toast.LENGTH_LONG).show();\n    }\n    saveToInternalStorage(bitmap);\n    Toast.makeText(getBaseContext(), &quot;saved&quot;, Toast.LENGTH_LONG).show();\n}\n</code></pre>\n"}],"owner":{"account_id":2286167,"reputation":1,"user_id":2010065,"display_name":"Vijay"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":737,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686241869,"creation_date":1359097905,"question_id":14517066,"body_markdown":"I&#39;m posting data to a URL from Java, which uses PHP to return a `json_encode(d)` blob from the MySQL field on a web server. \r\n\r\nNow, when I use this returned data (using `InputStream` or `getBytes`) to create a `bitmap` and set a `ImageView` to this bitmap using `setImageBitmap`, I get empty imageview. i.e., `decodeByteArray` or `decodeStream` returns NULL. \r\n\r\nI have no problem retrieving textual details, retrieving images is an issue. Here is the code snipped of Java and PHP.\r\n\r\nThis is my onCreate method of Java:\r\n\r\n    public void onCreate(Bundle icicle) {\r\n\r\n    super.onCreate(icicle);\r\n\r\n    setContentView(R.layout.loginlayout);\r\n    TextView tv1, tv2, tv3, tv4, tv5;\r\n    imageview = (ImageView) findViewById(R.id.imageView1);\r\n\r\n    button  = (Button) findViewById(R.id.button1);\r\n    tv1 = (TextView) findViewById(R.id.dispuser);\r\n    tv2 = (TextView) findViewById(R.id.tv2);\r\n    tv3 = (TextView) findViewById(R.id.tv3);\r\n    tv4 = (TextView) findViewById(R.id.tv4);\r\n    tv5 = (TextView) findViewById(R.id.tv5);\r\n\r\n\r\n    SharedPreferences userDetails = this.getSharedPreferences(&quot;logindetails&quot;,      MODE_PRIVATE);\r\n    String username = userDetails.getString(&quot;username&quot;, &quot;&quot;);\r\n    String password = userDetails.getString(&quot;password&quot;, &quot;&quot;);\r\n\r\n    button.setOnClickListener(this);\r\n\r\n\r\n    httpclient = new DefaultHttpClient();\r\n\r\n    httppost = new HttpPost(&quot;myurl&quot;);\r\n\r\n\r\n    try{\r\n\r\n\tnameValuePairs = new ArrayList&lt;NameValuePair&gt;();\r\n\t\t\t\t\r\n\t\r\n\tnameValuePairs.add(new BasicNameValuePair(&quot;username&quot;, username));\r\n\tnameValuePairs.add(new BasicNameValuePair(&quot;password&quot;, password));\r\n\t\r\n\t\r\n\t\r\n\thttppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));\r\n\t\r\n\tresponse = httpclient.execute(httppost);\r\n\t\r\n\tif(response.getStatusLine().getStatusCode() == 200){\r\n\t\t\r\n\t\tentity = response.getEntity();\r\n\t\t\r\n\t\t\r\n\t\tif(entity != null) {\r\n\t\t\t\r\n\t\t\tInputStream instream = entity.getContent();\r\n\t\t\t\r\n\t\t\tJSONObject jsonResponse = new JSONObject(convertStreamToString(instream));\r\n\t\t\t\r\n\t\t\r\n\r\n\r\n\tString sex = jsonResponse.getString(&quot;Sex&quot;);\r\n\tString age = jsonResponse.getString(&quot;Age&quot;);\r\n\tString name = jsonResponse.getString(&quot;Name&quot;);\r\n\tString phone = jsonResponse.getString(&quot;Phone&quot;);\r\n\tString pic = jsonResponse.getString(&quot;picture&quot;);\r\n\t\r\n\tbyte[] image = Base64.encodeBytesToBytes(pic.getBytes(&quot;UTF-8&quot;));\r\n\t\r\n\timageview.setImageBitmap(BitmapFactory.decodeByteArray(image, 0, image.length));\r\n\t\r\n\t\r\n\t tv1.setText(&quot;Welcome &quot; + username);\r\n\t tv2.setText(&quot;Your  is Name: &quot; + name);\r\n\t tv3.setText(&quot;Your phone &quot; + phone);\r\n\t tv4.setText(&quot;Your a  &quot; + sex );\r\n\t tv5.setText(&quot;Your age is &quot; + age);\r\n\t \r\n\t\r\n    }\r\n    } \r\n\r\n    }\r\n    catch (Exception e) {\r\n\r\n    e.printStackTrace();\r\n\r\n\r\n\r\n    }\r\n    finally {\r\n    httppost.abort();\r\n    }\r\n    }\r\n\r\nand on the PHP side:\r\n\t\t\t\r\n\t\t&lt;?\r\n\t\tinclude &#39;connect.php&#39;;\r\n\r\n\t\t$username = $_POST[&#39;username&#39;];\r\n\t\t$password = $_POST[&#39;password&#39;];\r\n\r\n\t\t$query = mysql_query(&quot;SELECT * FROM applogin WHERE username = &#39;$username&#39; AND password = &#39;$password&#39;&quot;);\r\n\r\n\t\t$num = mysql_num_rows($query);\r\n\r\n\t\tif($num == 1)\r\n\t\t{\r\n\t\twhile($list = mysql_fetch_assoc($query))\r\n\t\t{\r\n\t\t$output = $list;\r\n\t\t}\r\n\t\techo json_encode($output);\r\n\t\tmysql_close();\r\n\t\t}\r\n\t\t?&gt;\r\n\r\n","title":"Bitmap not successfully retrieved from MySQL using Java","body":"<p>I'm posting data to a URL from Java, which uses PHP to return a <code>json_encode(d)</code> blob from the MySQL field on a web server.</p>\n<p>Now, when I use this returned data (using <code>InputStream</code> or <code>getBytes</code>) to create a <code>bitmap</code> and set a <code>ImageView</code> to this bitmap using <code>setImageBitmap</code>, I get empty imageview. i.e., <code>decodeByteArray</code> or <code>decodeStream</code> returns NULL.</p>\n<p>I have no problem retrieving textual details, retrieving images is an issue. Here is the code snipped of Java and PHP.</p>\n<p>This is my onCreate method of Java:</p>\n<pre><code>public void onCreate(Bundle icicle) {\n\nsuper.onCreate(icicle);\n\nsetContentView(R.layout.loginlayout);\nTextView tv1, tv2, tv3, tv4, tv5;\nimageview = (ImageView) findViewById(R.id.imageView1);\n\nbutton  = (Button) findViewById(R.id.button1);\ntv1 = (TextView) findViewById(R.id.dispuser);\ntv2 = (TextView) findViewById(R.id.tv2);\ntv3 = (TextView) findViewById(R.id.tv3);\ntv4 = (TextView) findViewById(R.id.tv4);\ntv5 = (TextView) findViewById(R.id.tv5);\n\n\nSharedPreferences userDetails = this.getSharedPreferences(&quot;logindetails&quot;,      MODE_PRIVATE);\nString username = userDetails.getString(&quot;username&quot;, &quot;&quot;);\nString password = userDetails.getString(&quot;password&quot;, &quot;&quot;);\n\nbutton.setOnClickListener(this);\n\n\nhttpclient = new DefaultHttpClient();\n\nhttppost = new HttpPost(&quot;myurl&quot;);\n\n\ntry{\n\nnameValuePairs = new ArrayList&lt;NameValuePair&gt;();\n            \n\nnameValuePairs.add(new BasicNameValuePair(&quot;username&quot;, username));\nnameValuePairs.add(new BasicNameValuePair(&quot;password&quot;, password));\n\n\n\nhttppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));\n\nresponse = httpclient.execute(httppost);\n\nif(response.getStatusLine().getStatusCode() == 200){\n    \n    entity = response.getEntity();\n    \n    \n    if(entity != null) {\n        \n        InputStream instream = entity.getContent();\n        \n        JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));\n        \n    \n\n\nString sex = jsonResponse.getString(&quot;Sex&quot;);\nString age = jsonResponse.getString(&quot;Age&quot;);\nString name = jsonResponse.getString(&quot;Name&quot;);\nString phone = jsonResponse.getString(&quot;Phone&quot;);\nString pic = jsonResponse.getString(&quot;picture&quot;);\n\nbyte[] image = Base64.encodeBytesToBytes(pic.getBytes(&quot;UTF-8&quot;));\n\nimageview.setImageBitmap(BitmapFactory.decodeByteArray(image, 0, image.length));\n\n\n tv1.setText(&quot;Welcome &quot; + username);\n tv2.setText(&quot;Your  is Name: &quot; + name);\n tv3.setText(&quot;Your phone &quot; + phone);\n tv4.setText(&quot;Your a  &quot; + sex );\n tv5.setText(&quot;Your age is &quot; + age);\n \n\n}\n} \n\n}\ncatch (Exception e) {\n\ne.printStackTrace();\n\n\n\n}\nfinally {\nhttppost.abort();\n}\n}\n</code></pre>\n<p>and on the PHP side:</p>\n<pre><code>    &lt;?\n    include 'connect.php';\n\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    $query = mysql_query(&quot;SELECT * FROM applogin WHERE username = '$username' AND password = '$password'&quot;);\n\n    $num = mysql_num_rows($query);\n\n    if($num == 1)\n    {\n    while($list = mysql_fetch_assoc($query))\n    {\n    $output = $list;\n    }\n    echo json_encode($output);\n    mysql_close();\n    }\n    ?&gt;\n</code></pre>\n"},{"tags":["java","path","global-variables"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1686291104,"post_id":76433697,"comment_id":134781377,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":28780783,"reputation":1,"user_id":22042456,"display_name":"Inoth Vishwajith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686241383,"creation_date":1686241383,"answer_id":76433922,"question_id":76433697,"body_markdown":"\r\nHere are some things you can try to solve the problem of being disconnected from the target VM in IntelliJ IDEA:\r\n\r\n*Check your firewall settings. Make sure that IntelliJ IDEA is not being blocked by your firewall. You can usually do this by adding an exception for IntelliJ IDEA in your firewall settings.\r\n*Use a different port. The default port for debugging is 5005. If another program is using that port, you can try using a different port. To do this, open the Run/Debug configuration and change the port number in the VM Options field.\r\n*Restart IntelliJ IDEA. Sometimes, a simple restart can solve the problem.\r\n*Reinstall Java. If you&#39;ve tried all of the above and you&#39;re still having problems, you can try reinstalling Java.\r\nIf you&#39;re still having problems, you can try searching for help on the IntelliJ IDEA forums or submitting a bug report to JetBrains.\r\n\r\nHere are some additional things to keep in mind:\r\n\r\nMake sure that you&#39;re using the latest version of IntelliJ IDEA.\r\nMake sure that your Java installation is up to date.\r\nMake sure that your code is well-formatted and free of errors.\r\nTry debugging a simpler program to see if you can reproduce the problem.\r\nI hope this helps!","title":"Disconnected from VM","body":"<p>Here are some things you can try to solve the problem of being disconnected from the target VM in IntelliJ IDEA:</p>\n<p>*Check your firewall settings. Make sure that IntelliJ IDEA is not being blocked by your firewall. You can usually do this by adding an exception for IntelliJ IDEA in your firewall settings.\n*Use a different port. The default port for debugging is 5005. If another program is using that port, you can try using a different port. To do this, open the Run/Debug configuration and change the port number in the VM Options field.\n*Restart IntelliJ IDEA. Sometimes, a simple restart can solve the problem.\n*Reinstall Java. If you've tried all of the above and you're still having problems, you can try reinstalling Java.\nIf you're still having problems, you can try searching for help on the IntelliJ IDEA forums or submitting a bug report to JetBrains.</p>\n<p>Here are some additional things to keep in mind:</p>\n<p>Make sure that you're using the latest version of IntelliJ IDEA.\nMake sure that your Java installation is up to date.\nMake sure that your code is well-formatted and free of errors.\nTry debugging a simpler program to see if you can reproduce the problem.\nI hope this helps!</p>\n"}],"owner":{"account_id":28761205,"reputation":1,"user_id":22027062,"display_name":"Pablos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686241383,"creation_date":1686239830,"question_id":76433697,"body_markdown":"Each time that I try to debug a code in Itellij, I have this message: **\r\nDisconnected from the target VM, address: &#39;127.0.0.1:58996&#39;, transport: &#39;socket&#39;**\r\n\r\nHow could I solve it?\r\n\r\nUninstall and dowload Java. Delete and create the code again. Review if the firewall has been blocked the program, and isn&#39;t. \r\n[Intellij IDE](https://i.stack.imgur.com/5DpmI.png)","title":"Disconnected from VM","body":"<p>Each time that I try to debug a code in Itellij, I have this message: **\nDisconnected from the target VM, address: '127.0.0.1:58996', transport: 'socket'**</p>\n<p>How could I solve it?</p>\n<p>Uninstall and dowload Java. Delete and create the code again. Review if the firewall has been blocked the program, and isn't.\n<a href=\"https://i.stack.imgur.com/5DpmI.png\" rel=\"nofollow noreferrer\">Intellij IDE</a></p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","hibernate-validator"],"answers":[{"tags":[],"owner":{"account_id":13536898,"reputation":11,"user_id":9765794,"display_name":"Reion Chan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686241313,"creation_date":1686241313,"answer_id":76433910,"question_id":58024228,"body_markdown":"Same question I want to know. I finally find this:\r\n\r\nIf you use Spring Boot as your application,\r\nSpring Boot&#39;s *autoconfiguration* mechanism give us a Configuration class **ValidationAutoConfiguration**，in this class we can see the LocalValidatorFactoryBean Bean definition:\r\n\r\n    @Bean\r\n\t@Role(BeanDefinition.ROLE_INFRASTRUCTURE)\r\n\t@ConditionalOnMissingBean(Validator.class)\r\n\tpublic static LocalValidatorFactoryBean defaultValidator(ApplicationContext applicationContext,\r\n\t\t\tObjectProvider&lt;ValidationConfigurationCustomizer&gt; customizers) {\r\n\t\tLocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();\r\n\t\tfactoryBean.setConfigurationInitializer((configuration) -&gt; customizers.orderedStream()\r\n\t\t\t.forEach((customizer) -&gt; customizer.customize(configuration)));\r\n\t\tMessageInterpolatorFactory interpolatorFactory = new MessageInterpolatorFactory(applicationContext);\r\n\t\tfactoryBean.setMessageInterpolator(interpolatorFactory.getObject());\r\n\t\treturn factoryBean;\r\n\t}\r\n\r\nSo we can use the **ValidationConfigurationCustomizer** to config the HibernateValidatorConfiguration.","title":"How to properly configure Spring Validator (HibernateValidator)","body":"<p>Same question I want to know. I finally find this:</p>\n<p>If you use Spring Boot as your application,\nSpring Boot's <em>autoconfiguration</em> mechanism give us a Configuration class <strong>ValidationAutoConfiguration</strong>，in this class we can see the LocalValidatorFactoryBean Bean definition:</p>\n<pre><code>@Bean\n@Role(BeanDefinition.ROLE_INFRASTRUCTURE)\n@ConditionalOnMissingBean(Validator.class)\npublic static LocalValidatorFactoryBean defaultValidator(ApplicationContext applicationContext,\n        ObjectProvider&lt;ValidationConfigurationCustomizer&gt; customizers) {\n    LocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();\n    factoryBean.setConfigurationInitializer((configuration) -&gt; customizers.orderedStream()\n        .forEach((customizer) -&gt; customizer.customize(configuration)));\n    MessageInterpolatorFactory interpolatorFactory = new MessageInterpolatorFactory(applicationContext);\n    factoryBean.setMessageInterpolator(interpolatorFactory.getObject());\n    return factoryBean;\n}\n</code></pre>\n<p>So we can use the <strong>ValidationConfigurationCustomizer</strong> to config the HibernateValidatorConfiguration.</p>\n"}],"owner":{"account_id":410790,"reputation":648,"user_id":6108874,"accept_rate":62,"display_name":"Gerard Bosch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":462,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1686241313,"creation_date":1568966358,"question_id":58024228,"body_markdown":"I&#39;m using Spring 4.2.7/Spring Boot 1.3.7 and I think the HibernateValidator is the default implementation that Spring uses in spring-web.\r\n\r\nI would like to apply a configuration on the HibernateValidator like the following:\r\n\r\n```\r\nHibernateValidatorConfiguration configuration = Validation.byProvider( HibernateValidator.class ).configure();\r\n\r\nconfiguration.allowMultipleCascadedValidationOnReturnValues( true )\r\n        .allowOverridingMethodAlterParameterConstraint( true )\r\n        .allowParallelMethodsDefineParameterConstraints( true );\r\n```\r\n\r\ndescribed in here:\r\nhttps://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-method-validation-prerequisite-relaxation\r\n\r\nI&#39;ve tried defining a `@Bean` with something like this:\r\n\r\n```\r\n@Bean\r\n@Primary\r\npublic ValidatorFactory validatorFactory() {\r\n    \r\n    // ... the above snippet\r\n\r\n    return configuration.getValidatorFactory()\r\n}\r\n```\r\n\r\nBut it looks the configuration is not applied.\r\nI also tried defining the `Validator` bean like this:\r\n\r\n```\r\n@Bean\r\n@Primary\r\npublic Validator validator(ValidatorFactory validatorFactory) {\r\n    return validatorFactory.getValidator();\r\n}\r\n```\r\n\r\nBut the defined configuration does not seem to apply to the validator Spring is finally using.\r\n\r\n* I am doing something wrong?\r\n* Which should be the appropriate way to apply a configuration (configure/customize) like the one in the above example to the Spring Hibernate validator?","title":"How to properly configure Spring Validator (HibernateValidator)","body":"<p>I'm using Spring 4.2.7/Spring Boot 1.3.7 and I think the HibernateValidator is the default implementation that Spring uses in spring-web.</p>\n\n<p>I would like to apply a configuration on the HibernateValidator like the following:</p>\n\n<pre><code>HibernateValidatorConfiguration configuration = Validation.byProvider( HibernateValidator.class ).configure();\n\nconfiguration.allowMultipleCascadedValidationOnReturnValues( true )\n        .allowOverridingMethodAlterParameterConstraint( true )\n        .allowParallelMethodsDefineParameterConstraints( true );\n</code></pre>\n\n<p>described in here:\n<a href=\"https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-method-validation-prerequisite-relaxation\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-method-validation-prerequisite-relaxation</a></p>\n\n<p>I've tried defining a <code>@Bean</code> with something like this:</p>\n\n<pre><code>@Bean\n@Primary\npublic ValidatorFactory validatorFactory() {\n\n    // ... the above snippet\n\n    return configuration.getValidatorFactory()\n}\n</code></pre>\n\n<p>But it looks the configuration is not applied.\nI also tried defining the <code>Validator</code> bean like this:</p>\n\n<pre><code>@Bean\n@Primary\npublic Validator validator(ValidatorFactory validatorFactory) {\n    return validatorFactory.getValidator();\n}\n</code></pre>\n\n<p>But the defined configuration does not seem to apply to the validator Spring is finally using.</p>\n\n<ul>\n<li>I am doing something wrong?</li>\n<li>Which should be the appropriate way to apply a configuration (configure/customize) like the one in the above example to the Spring Hibernate validator?</li>\n</ul>\n"},{"tags":["java","json","node.js"],"comments":[{"owner":{"account_id":1967626,"reputation":1413,"user_id":1767424,"accept_rate":0,"display_name":"Karthik"},"score":0,"creation_date":1497888481,"post_id":18898773,"comment_id":76256159,"body_markdown":"https://stackoverflow.com/questions/34427279/how-do-i-pass-this-escaped-json-with-gson-java","body":"<a href=\"https://stackoverflow.com/questions/34427279/how-do-i-pass-this-escaped-json-with-gson-java\" title=\"how do i pass this escaped json with gson java\">stackoverflow.com/questions/34427279/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1046868,"reputation":5163,"user_id":1051677,"accept_rate":100,"display_name":"Silviu Burcea"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379604488,"creation_date":1379604488,"answer_id":18898872,"question_id":18898773,"body_markdown":"Try to replace all the &quot; and &#39; with a \\ before them. Do this just for the msget object(String, I guess). Don&#39;t forget that \\ must be escaped too.","title":"Java escape JSON String?","body":"<p>Try to replace all the \" and ' with a \\ before them. Do this just for the msget object(String, I guess). Don't forget that \\ must be escaped too.</p>\n"},{"tags":[],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1379604497,"creation_date":1379604497,"answer_id":18898875,"question_id":18898773,"body_markdown":"According to the answer [here][1], quotes in values need to be escaped. You can do that with `\\&quot;`\r\n\r\nSo just repalce the quote in your values\r\n\r\n    msget = msget.replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;);\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3020094/how-should-i-escape-strings-in-json","title":"Java escape JSON String?","body":"<p>According to the answer <a href=\"https://stackoverflow.com/questions/3020094/how-should-i-escape-strings-in-json\">here</a>, quotes in values need to be escaped. You can do that with <code>\\\"</code></p>\n\n<p>So just repalce the quote in your values</p>\n\n<pre><code>msget = msget.replace(\"\\\"\", \"\\\\\\\"\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1379604730,"post_id":18898904,"comment_id":27896403,"body_markdown":"I didn&#39;t downvote, but the `replaceAll()` won&#39;t work. You need to use `replace`.","body":"I didn&#39;t downvote, but the <code>replaceAll()</code> won&#39;t work. You need to use <code>replace</code>."},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":1,"creation_date":1379604825,"post_id":18898904,"comment_id":27896484,"body_markdown":"Have you tried the code you posted? It has no effect. Either you use `replace(...)` or `replaceAll(&quot;\\&quot;&quot;, &quot;\\\\\\\\\\&quot;&quot;)`, because the backslash has a special meaning in the replacement string, too. See javadoc.","body":"Have you tried the code you posted? It has no effect. Either you use <code>replace(...)</code> or <code>replaceAll(&quot;\\&quot;&quot;, &quot;\\\\\\\\\\&quot;&quot;)</code>, because the backslash has a special meaning in the replacement string, too. See javadoc."},{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":1,"creation_date":1379604999,"post_id":18898904,"comment_id":27896595,"body_markdown":"I&#39;m biased if i should delete this answer because it&#39;s wrong or if i should let it as is &#39;cause it shows how not to do it?","body":"I&#39;m biased if i should delete this answer because it&#39;s wrong or if i should let it as is &#39;cause it shows how not to do it?"},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":0,"creation_date":1379605040,"post_id":18898904,"comment_id":27896634,"body_markdown":"@DirkLachowski: If I were you, I&#39;d either delete it (when I&#39;m feeling lazy) or fix it.","body":"@DirkLachowski: If I were you, I&#39;d either delete it (when I&#39;m feeling lazy) or fix it."},{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":0,"creation_date":1379606036,"post_id":18898904,"comment_id":27897313,"body_markdown":"@jlordo: I&#39;m afraid you are wrong. The difference between replace() and replaceAll() is that in the former the first arg is a literal string and in the later it&#39;s a regex. The replacement is no regex (but can contain some special chars  in the later). So replaceAll() will work as posted by me - and yes, i&#39;ve tried it now.","body":"@jlordo: I&#39;m afraid you are wrong. The difference between replace() and replaceAll() is that in the former the first arg is a literal string and in the later it&#39;s a regex. The replacement is no regex (but can contain some special chars  in the later). So replaceAll() will work as posted by me - and yes, i&#39;ve tried it now."},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":0,"creation_date":1379608921,"post_id":18898904,"comment_id":27898931,"body_markdown":"@DirkLachowski: You&#39;re right that `replace()` takes a literal and `replaceAll()` takes a regex. But if you use `replaceAll()` you have to use it as I posted in my comment. See http://ideone.com/XhDeaT Yours won&#39;t work.","body":"@DirkLachowski: You&#39;re right that <code>replace()</code> takes a literal and <code>replaceAll()</code> takes a regex. But if you use <code>replaceAll()</code> you have to use it as I posted in my comment. See <a href=\"http://ideone.com/XhDeaT\" rel=\"nofollow noreferrer\">ideone.com/XhDeaT</a> Yours won&#39;t work."},{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":0,"creation_date":1379612170,"post_id":18898904,"comment_id":27900690,"body_markdown":"@jlordo: Thumbs up for getting back on this and for the link to idone.com. Didn&#39;t knowed that before. I got it now, thanks for the lesson.","body":"@jlordo: Thumbs up for getting back on this and for the link to idone.com. Didn&#39;t knowed that before. I got it now, thanks for the lesson."},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":0,"creation_date":1379670042,"post_id":18898904,"comment_id":27921526,"body_markdown":"@DirkLachowski: removed my -1, as the answer is now correct ;)","body":"@DirkLachowski: removed my -1, as the answer is now correct ;)"}],"tags":[],"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"comment_count":8,"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1379612437,"creation_date":1379604566,"answer_id":18898904,"question_id":18898773,"body_markdown":"The best method would be using some JSON library, e.g. Jackson ( http://jackson.codehaus.org ).\r\n\r\nBut if this is not an option simply escape msget before adding it to your string:\r\n\r\nThe wrong way to do this is\r\n\r\n    String msgetEscaped = msget.replaceAll(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;);\r\n\r\nEither use (as recommended in the comments)\r\n\r\n    String msgetEscaped = msget.replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;);\r\n\r\nor\r\n\r\n    String msgetEscaped = msget.replaceAll(&quot;\\&quot;&quot;, &quot;\\\\\\\\\\&quot;&quot;);\r\n\r\nA sample with all three variants can be found here: http://ideone.com/Nt1XzO\r\n ","title":"Java escape JSON String?","body":"<p>The best method would be using some JSON library, e.g. Jackson ( <a href=\"http://jackson.codehaus.org\" rel=\"noreferrer\">http://jackson.codehaus.org</a> ).</p>\n\n<p>But if this is not an option simply escape msget before adding it to your string:</p>\n\n<p>The wrong way to do this is</p>\n\n<pre><code>String msgetEscaped = msget.replaceAll(\"\\\"\", \"\\\\\\\"\");\n</code></pre>\n\n<p>Either use (as recommended in the comments)</p>\n\n<pre><code>String msgetEscaped = msget.replace(\"\\\"\", \"\\\\\\\"\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>String msgetEscaped = msget.replaceAll(\"\\\"\", \"\\\\\\\\\\\"\");\n</code></pre>\n\n<p>A sample with all three variants can be found here: <a href=\"http://ideone.com/Nt1XzO\" rel=\"noreferrer\">http://ideone.com/Nt1XzO</a></p>\n"},{"comments":[{"owner":{"account_id":3116526,"reputation":472,"user_id":2637167,"accept_rate":25,"display_name":"Eaton Emmerich"},"score":0,"creation_date":1678724071,"post_id":18898970,"comment_id":133585016,"body_markdown":"what if I don&#39;t want a builder and just the value string not the entire json?","body":"what if I don&#39;t want a builder and just the value string not the entire json?"}],"tags":[],"owner":{"account_id":1072428,"reputation":14836,"user_id":1071383,"accept_rate":67,"display_name":"jabclab"},"comment_count":1,"down_vote_count":2,"up_vote_count":33,"is_accepted":true,"score":31,"last_activity_date":1379604721,"creation_date":1379604721,"answer_id":18898970,"question_id":18898773,"body_markdown":"I would use a library to create your JSON `String` for you. Some options are:\r\n\r\n- [GSON](http://code.google.com/p/google-gson/)\r\n- [Crockford&#39;s lib](http://www.json.org/javadoc/org/json/package-summary.html)\r\n\r\nThis will make dealing with escaping much easier. An example (using `org.json`) would be:\r\n\r\n    JSONObject obj = new JSONObject();\r\n\r\n    obj.put(&quot;id&quot;, userID);\r\n    obj.put(&quot;type&quot;, methoden);\r\n    obj.put(&quot;msg&quot;, msget);\r\n\r\n    // etc.\r\n\r\n    final String json = obj.toString(); // &lt;-- JSON string\r\n    ","title":"Java escape JSON String?","body":"<p>I would use a library to create your JSON <code>String</code> for you. Some options are:</p>\n\n<ul>\n<li><a href=\"http://code.google.com/p/google-gson/\">GSON</a></li>\n<li><a href=\"http://www.json.org/javadoc/org/json/package-summary.html\">Crockford's lib</a></li>\n</ul>\n\n<p>This will make dealing with escaping much easier. An example (using <code>org.json</code>) would be:</p>\n\n<pre><code>JSONObject obj = new JSONObject();\n\nobj.put(\"id\", userID);\nobj.put(\"type\", methoden);\nobj.put(\"msg\", msget);\n\n// etc.\n\nfinal String json = obj.toString(); // &lt;-- JSON string\n</code></pre>\n"},{"comments":[{"owner":{"account_id":71611,"reputation":26366,"user_id":6998684,"display_name":"IgorGanapolsky"},"score":7,"creation_date":1440013246,"post_id":28386351,"comment_id":52102960,"body_markdown":"There is no such method `escape`.","body":"There is no such method <code>escape</code>."},{"owner":{"account_id":4685587,"reputation":749,"user_id":3793078,"display_name":"Yeongjun Kim"},"score":2,"creation_date":1455164701,"post_id":28386351,"comment_id":58369620,"body_markdown":"[doc](http://alex-public-doc.s3.amazonaws.com/json_simple-1.1/org/json/simple/JSONObject.html#escape(java.lang.String))","body":"<a href=\"http://alex-public-doc.s3.amazonaws.com/json_simple-1.1/org/json/simple/JSONObject.html#escape(java.lang.String)\" rel=\"nofollow noreferrer\">doc</a>"},{"owner":{"account_id":71611,"reputation":26366,"user_id":6998684,"display_name":"IgorGanapolsky"},"score":0,"creation_date":1455198571,"post_id":28386351,"comment_id":58389361,"body_markdown":"See Java JSONObject doc: http://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html","body":"See Java JSONObject doc: <a href=\"http://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javaee/7/api/javax/json/JsonObject.html</a>"},{"owner":{"account_id":4685587,"reputation":749,"user_id":3793078,"display_name":"Yeongjun Kim"},"score":1,"creation_date":1455254804,"post_id":28386351,"comment_id":58417484,"body_markdown":"Not java jsonObject. Look `import` in code. \njson-simple: https://code.google.com/archive/p/json-simple/","body":"Not java jsonObject. Look <code>import</code> in code.  json-simple: <a href=\"https://code.google.com/archive/p/json-simple/\" rel=\"nofollow noreferrer\">code.google.com/archive/p/json-simple</a>"},{"owner":{"account_id":1886396,"reputation":660,"user_id":1705521,"display_name":"Santosh"},"score":2,"creation_date":1462509448,"post_id":28386351,"comment_id":61674849,"body_markdown":"JSONObject.quote(String) does the job.","body":"JSONObject.quote(String) does the job."},{"owner":{"account_id":404344,"reputation":1466,"user_id":772615,"accept_rate":14,"display_name":"ropo"},"score":0,"creation_date":1500033711,"post_id":28386351,"comment_id":77175897,"body_markdown":"JSONObject.quote(String) does the job but adds extra &quot; around the string","body":"JSONObject.quote(String) does the job but adds extra &quot; around the string"},{"owner":{"account_id":4058968,"reputation":391,"user_id":3335999,"accept_rate":29,"display_name":"user3335999"},"score":0,"creation_date":1559241691,"post_id":28386351,"comment_id":99367925,"body_markdown":"maven repository doesn&#39;t exist please remove this answer.","body":"maven repository doesn&#39;t exist please remove this answer."}],"tags":[],"owner":{"account_id":4685587,"reputation":749,"user_id":3793078,"display_name":"Yeongjun Kim"},"comment_count":7,"down_vote_count":3,"up_vote_count":21,"is_accepted":false,"score":18,"last_activity_date":1516771895,"creation_date":1423337057,"answer_id":28386351,"question_id":18898773,"body_markdown":"`org.json.simple.JSONObject.escape()` escapes quotes,, /, \\r, \\n, \\b, \\f, \\t and other control characters.\r\n\r\n\timport org.json.simple.JSONValue;\r\n\tJSONValue.escape(&quot;test string&quot;);\r\n\t\r\n- [`json-simple` home](https://code.google.com/archive/p/json-simple/)\r\n- [document](http://juliusdavies.ca/json-simple-1.1.1-javadocs/org/json/simple/JSONValue.html#escape(java.lang.String))\r\n    \r\nAdd pom.xml when using maven\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n","title":"Java escape JSON String?","body":"<p><code>org.json.simple.JSONObject.escape()</code> escapes quotes,, /, \\r, \\n, \\b, \\f, \\t and other control characters.</p>\n\n<pre><code>import org.json.simple.JSONValue;\nJSONValue.escape(\"test string\");\n</code></pre>\n\n<ul>\n<li><a href=\"https://code.google.com/archive/p/json-simple/\" rel=\"noreferrer\"><code>json-simple</code> home</a></li>\n<li><a href=\"http://juliusdavies.ca/json-simple-1.1.1-javadocs/org/json/simple/JSONValue.html#escape(java.lang.String)\" rel=\"noreferrer\">document</a></li>\n</ul>\n\n<p>Add pom.xml when using maven</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n    &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16817,"reputation":73843,"user_id":37020,"accept_rate":86,"display_name":"orip"},"score":1,"creation_date":1604416394,"post_id":31541395,"comment_id":114337616,"body_markdown":"@slartidan - thx, fixed doc link and added a stable source file link!","body":"@slartidan - thx, fixed doc link and added a stable source file link!"}],"tags":[],"owner":{"account_id":16817,"reputation":73843,"user_id":37020,"accept_rate":86,"display_name":"orip"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604416370,"creation_date":1437487506,"answer_id":31541395,"question_id":18898773,"body_markdown":"Consider [Moshi][1]&#39;s [JsonWriter][2] class ([source][3]). It has a wonderful API and it reduces copying to a minimum, everything is nicely streamed to the OutputStream.\r\n\r\n    OutputStream os = ...;\r\n    JsonWriter json = new JsonWriter(Okio.sink(os));\r\n    json\r\n      .beginObject()\r\n      .name(&quot;id&quot;).value(userID)\r\n      .name(&quot;type&quot;).value(methodn)\r\n      ...\r\n      .endObject();\r\n\r\n\r\n  [1]: https://github.com/square/moshi\r\n  [2]: https://square.github.io/moshi/1.x/moshi/com/squareup/moshi/JsonWriter.html\r\n  [3]: https://github.com/square/moshi/blob/bf72ce8ade0db490136834096e0881d17c87e20a/moshi/src/main/java/com/squareup/moshi/JsonWriter.java","title":"Java escape JSON String?","body":"<p>Consider <a href=\"https://github.com/square/moshi\" rel=\"nofollow noreferrer\">Moshi</a>'s <a href=\"https://square.github.io/moshi/1.x/moshi/com/squareup/moshi/JsonWriter.html\" rel=\"nofollow noreferrer\">JsonWriter</a> class (<a href=\"https://github.com/square/moshi/blob/bf72ce8ade0db490136834096e0881d17c87e20a/moshi/src/main/java/com/squareup/moshi/JsonWriter.java\" rel=\"nofollow noreferrer\">source</a>). It has a wonderful API and it reduces copying to a minimum, everything is nicely streamed to the OutputStream.</p>\n<pre><code>OutputStream os = ...;\nJsonWriter json = new JsonWriter(Okio.sink(os));\njson\n  .beginObject()\n  .name(&quot;id&quot;).value(userID)\n  .name(&quot;type&quot;).value(methodn)\n  ...\n  .endObject();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2644611,"reputation":233,"user_id":2287586,"display_name":"Renato"},"score":0,"creation_date":1680123087,"post_id":32913189,"comment_id":133846279,"body_markdown":"The link is broken, here is a web-archive version of it: https://web.archive.org/web/20151006021420/http://www.json.org/javadoc/org/json/JSONObject.html","body":"The link is broken, here is a web-archive version of it: <a href=\"https://web.archive.org/web/20151006021420/http://www.json.org/javadoc/org/json/JSONObject.html\" rel=\"nofollow noreferrer\">web.archive.org/web/20151006021420/http://www.json.org/javad&zwnj;&#8203;oc/&hellip;</a>"}],"tags":[],"owner":{"account_id":3325848,"reputation":41,"user_id":2795951,"display_name":"rhengles"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1443809057,"creation_date":1443809057,"answer_id":32913189,"question_id":18898773,"body_markdown":"If you want to simply escape a string, not an object or array, use this:\r\n\r\n    String escaped = JSONObject.valueToString(&quot; Quotes \\&quot; &#39; &#39; \\&quot; &quot;);\r\n\r\nhttp://www.json.org/javadoc/org/json/JSONObject.html#valueToString(java.lang.Object)","title":"Java escape JSON String?","body":"<p>If you want to simply escape a string, not an object or array, use this:</p>\n\n<pre><code>String escaped = JSONObject.valueToString(\" Quotes \\\" ' ' \\\" \");\n</code></pre>\n\n<p><a href=\"http://www.json.org/javadoc/org/json/JSONObject.html#valueToString(java.lang.Object)\" rel=\"nofollow\">http://www.json.org/javadoc/org/json/JSONObject.html#valueToString(java.lang.Object)</a></p>\n"},{"tags":[],"owner":{"account_id":7764307,"reputation":875,"user_id":5875960,"display_name":"Ron DeSantis"},"comment_count":0,"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1527229994,"creation_date":1527229994,"answer_id":50522874,"question_id":18898773,"body_markdown":"The JSON specification at https://www.json.org/ is very simple by design. Escaping characters in JSON strings is not hard.  This code works for me:\r\n\r\n    private String escape(String raw) {\r\n    \tString escaped = raw;\r\n    \tescaped = escaped.replace(&quot;\\\\&quot;, &quot;\\\\\\\\&quot;);\r\n    \tescaped = escaped.replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;);\r\n    \tescaped = escaped.replace(&quot;\\b&quot;, &quot;\\\\b&quot;);\r\n    \tescaped = escaped.replace(&quot;\\f&quot;, &quot;\\\\f&quot;);\r\n    \tescaped = escaped.replace(&quot;\\n&quot;, &quot;\\\\n&quot;);\r\n    \tescaped = escaped.replace(&quot;\\r&quot;, &quot;\\\\r&quot;);\r\n    \tescaped = escaped.replace(&quot;\\t&quot;, &quot;\\\\t&quot;);\r\n    \t// TODO: escape other non-printing characters using uXXXX notation\r\n\t\treturn escaped;\r\n    }\r\n\r\n","title":"Java escape JSON String?","body":"<p>The JSON specification at <a href=\"https://www.json.org/\" rel=\"noreferrer\">https://www.json.org/</a> is very simple by design. Escaping characters in JSON strings is not hard.  This code works for me:</p>\n\n<pre><code>private String escape(String raw) {\n    String escaped = raw;\n    escaped = escaped.replace(\"\\\\\", \"\\\\\\\\\");\n    escaped = escaped.replace(\"\\\"\", \"\\\\\\\"\");\n    escaped = escaped.replace(\"\\b\", \"\\\\b\");\n    escaped = escaped.replace(\"\\f\", \"\\\\f\");\n    escaped = escaped.replace(\"\\n\", \"\\\\n\");\n    escaped = escaped.replace(\"\\r\", \"\\\\r\");\n    escaped = escaped.replace(\"\\t\", \"\\\\t\");\n    // TODO: escape other non-printing characters using uXXXX notation\n    return escaped;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13334370,"reputation":1383,"user_id":9624655,"display_name":"kedar kokil"},"score":1,"creation_date":1572854676,"post_id":58689286,"comment_id":103676497,"body_markdown":"It&#39;s Work for me... Great Solution.","body":"It&#39;s Work for me... Great Solution."}],"tags":[],"owner":{"account_id":11062483,"reputation":1111,"user_id":8123203,"display_name":"Sagar Jadhav"},"comment_count":1,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1572854568,"creation_date":1572854568,"answer_id":58689286,"question_id":18898773,"body_markdown":"    public static String ecapse(String jsString) {\r\n\t\tjsString = jsString.replace(&quot;\\\\&quot;, &quot;\\\\\\\\&quot;);\r\n\t\tjsString = jsString.replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;);\r\n\t\tjsString = jsString.replace(&quot;\\b&quot;, &quot;\\\\b&quot;);\r\n\t\tjsString = jsString.replace(&quot;\\f&quot;, &quot;\\\\f&quot;);\r\n\t\tjsString = jsString.replace(&quot;\\n&quot;, &quot;\\\\n&quot;);\r\n\t\tjsString = jsString.replace(&quot;\\r&quot;, &quot;\\\\r&quot;);\r\n\t\tjsString = jsString.replace(&quot;\\t&quot;, &quot;\\\\t&quot;);\r\n\t\tjsString = jsString.replace(&quot;/&quot;, &quot;\\\\/&quot;);\r\n\t\treturn jsString;\r\n\t}","title":"Java escape JSON String?","body":"<pre><code>public static String ecapse(String jsString) {\n    jsString = jsString.replace(\"\\\\\", \"\\\\\\\\\");\n    jsString = jsString.replace(\"\\\"\", \"\\\\\\\"\");\n    jsString = jsString.replace(\"\\b\", \"\\\\b\");\n    jsString = jsString.replace(\"\\f\", \"\\\\f\");\n    jsString = jsString.replace(\"\\n\", \"\\\\n\");\n    jsString = jsString.replace(\"\\r\", \"\\\\r\");\n    jsString = jsString.replace(\"\\t\", \"\\\\t\");\n    jsString = jsString.replace(\"/\", \"\\\\/\");\n    return jsString;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16223118,"reputation":85,"user_id":11714220,"display_name":"Alfredo Morales"},"score":0,"creation_date":1685480223,"post_id":60548455,"comment_id":134665438,"body_markdown":"it is deprecated","body":"it is deprecated"}],"tags":[],"owner":{"account_id":1086954,"reputation":29057,"user_id":1082449,"accept_rate":71,"display_name":"davnicwil"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1583492512,"creation_date":1583421037,"answer_id":60548455,"question_id":18898773,"body_markdown":"Apache Commons\r\n---\r\n\r\nIf you&#39;re already using Apache commons, it provides a static method for this:\r\n\r\n```java\r\nStringEscapeUtils.escapeJson(&quot;some string&quot;)\r\n```\r\n\r\nIt converts any string into one that&#39;s properly escaped for inclusion in JSON\r\n\r\n[See the documentation here][1]\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html","title":"Java escape JSON String?","body":"<h2>Apache Commons</h2>\n\n<p>If you're already using Apache commons, it provides a static method for this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>StringEscapeUtils.escapeJson(\"some string\")\n</code></pre>\n\n<p>It converts any string into one that's properly escaped for inclusion in JSON</p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html\" rel=\"noreferrer\">See the documentation here</a></p>\n"},{"tags":[],"owner":{"account_id":21139400,"reputation":41,"user_id":15542161,"display_name":"Tai Meng"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1624915919,"creation_date":1624915919,"answer_id":68170233,"question_id":18898773,"body_markdown":"In `build.gradle` (if using maven, make similar change) include this dependency:\r\n\r\n    implementation group: &#39;org.apache.avro&#39;, name: &#39;avro-tools&#39;, version: &#39;1.10.2&#39;\r\n\r\nThen:\r\n\r\n    import net.minidev.json.JSONValue;\r\n    String escapedString = JSONValue.escape(yourString);\r\n\r\n\r\n","title":"Java escape JSON String?","body":"<p>In <code>build.gradle</code> (if using maven, make similar change) include this dependency:</p>\n<pre><code>implementation group: 'org.apache.avro', name: 'avro-tools', version: '1.10.2'\n</code></pre>\n<p>Then:</p>\n<pre><code>import net.minidev.json.JSONValue;\nString escapedString = JSONValue.escape(yourString);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3242704,"reputation":13438,"user_id":2735286,"accept_rate":89,"display_name":"gil.fernandes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632682943,"creation_date":1632682943,"answer_id":69338077,"question_id":18898773,"body_markdown":"If you want to do it yourself without any library, you can use this piece of Java code:\r\n\r\n    /**\r\n     * Escapes a string the JSON way.\r\n     *\r\n     * @param text The text to be escaped.\r\n     * @return a string escaped according to the JSON format.\r\n     */\r\n    public static String escape(final CharSequence text) {\r\n\r\n        if (text == null) {\r\n            return &quot;&quot;;\r\n        }\r\n        final StringWriter writer = new StringWriter();\r\n        for (int i = 0, length = text.length(); i &lt; length; i++) {\r\n            final char c = text.charAt(i);\r\n            switch (c) {\r\n                case &#39;&quot;&#39;:\r\n                    writer.write(&quot;\\\\\\&quot;&quot;);\r\n                    break;\r\n                case &#39;\\\\&#39;:\r\n                    writer.write(&quot;\\\\\\\\&quot;);\r\n                    break;\r\n                default:\r\n                    if (c &gt; 0x1f) {\r\n                        writer.write(c);\r\n                    } else {\r\n                        writer.write(&quot;\\\\u&quot;);\r\n                        final String hex = &quot;000&quot; + Integer.toHexString(c);\r\n                        writer.write(hex.substring(hex.length() - 4));\r\n                    }\r\n            }\r\n        }\r\n        return writer.toString();\r\n    }","title":"Java escape JSON String?","body":"<p>If you want to do it yourself without any library, you can use this piece of Java code:</p>\n<pre><code>/**\n * Escapes a string the JSON way.\n *\n * @param text The text to be escaped.\n * @return a string escaped according to the JSON format.\n */\npublic static String escape(final CharSequence text) {\n\n    if (text == null) {\n        return &quot;&quot;;\n    }\n    final StringWriter writer = new StringWriter();\n    for (int i = 0, length = text.length(); i &lt; length; i++) {\n        final char c = text.charAt(i);\n        switch (c) {\n            case '&quot;':\n                writer.write(&quot;\\\\\\&quot;&quot;);\n                break;\n            case '\\\\':\n                writer.write(&quot;\\\\\\\\&quot;);\n                break;\n            default:\n                if (c &gt; 0x1f) {\n                    writer.write(c);\n                } else {\n                    writer.write(&quot;\\\\u&quot;);\n                    final String hex = &quot;000&quot; + Integer.toHexString(c);\n                    writer.write(hex.substring(hex.length() - 4));\n                }\n        }\n    }\n    return writer.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43253,"reputation":367,"user_id":126350,"display_name":"Matthew Bloch"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665411981,"creation_date":1665411981,"answer_id":74016461,"question_id":18898773,"body_markdown":"If you can use slightly more modern Java and don&#39;t want another dependency, this does the job:\r\n\r\n```java\r\n    static String jsonStringQuote(String string) {\r\n        StringBuilder sb = new StringBuilder(&quot;\\&quot;&quot;);\r\n        for (char c : string.toCharArray())\r\n            sb.append(switch (c) {\r\n                case &#39;\\\\&#39;, &#39;&quot;&#39;, &#39;/&#39; -&gt; &quot;\\\\&quot;+c;\r\n                case &#39;\\b&#39; -&gt; &quot;\\\\b&quot;;\r\n                case &#39;\\t&#39; -&gt; &quot;\\\\t&quot;;\r\n                case &#39;\\n&#39; -&gt; &quot;\\\\n&quot;;\r\n                case &#39;\\f&#39; -&gt; &quot;\\\\f&quot;;\r\n                case &#39;\\r&#39; -&gt; &quot;\\\\r&quot;;\r\n                default -&gt; c &lt; &#39; &#39; ? String.format(&quot;\\\\u%04x&quot;, c) : c;\r\n            });\r\n        return sb.append(&#39;&quot;&#39;).toString();\r\n    }\r\n\r\n```\r\n\r\n","title":"Java escape JSON String?","body":"<p>If you can use slightly more modern Java and don't want another dependency, this does the job:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static String jsonStringQuote(String string) {\n        StringBuilder sb = new StringBuilder(&quot;\\&quot;&quot;);\n        for (char c : string.toCharArray())\n            sb.append(switch (c) {\n                case '\\\\', '&quot;', '/' -&gt; &quot;\\\\&quot;+c;\n                case '\\b' -&gt; &quot;\\\\b&quot;;\n                case '\\t' -&gt; &quot;\\\\t&quot;;\n                case '\\n' -&gt; &quot;\\\\n&quot;;\n                case '\\f' -&gt; &quot;\\\\f&quot;;\n                case '\\r' -&gt; &quot;\\\\r&quot;;\n                default -&gt; c &lt; ' ' ? String.format(&quot;\\\\u%04x&quot;, c) : c;\n            });\n        return sb.append('&quot;').toString();\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1664470,"reputation":742,"user_id":1532175,"display_name":"FredG"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686240622,"creation_date":1686240622,"answer_id":76433826,"question_id":18898773,"body_markdown":"On Android (and `org.json`), you could use [JSONObject.quote][1].\r\n\r\n```\r\nimport org.json.JSONObject;\r\nString stringifiedString = JSONObject.quote(data);\r\n```\r\n\r\n  [1]: https://developer.android.com/reference/org/json/JSONObject#quote(java.lang.String)","title":"Java escape JSON String?","body":"<p>On Android (and <code>org.json</code>), you could use <a href=\"https://developer.android.com/reference/org/json/JSONObject#quote(java.lang.String)\" rel=\"nofollow noreferrer\">JSONObject.quote</a>.</p>\n<pre><code>import org.json.JSONObject;\nString stringifiedString = JSONObject.quote(data);\n</code></pre>\n"}],"owner":{"account_id":1970434,"reputation":8861,"user_id":1769543,"accept_rate":46,"display_name":"Alosyius"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175372,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":18898970,"answer_count":14,"score":29,"last_activity_date":1686240622,"creation_date":1379604229,"question_id":18898773,"body_markdown":"I have the following JSON string that i am sending to a NodeJS server:\r\n\r\n    String string = &quot;{\\&quot;id\\&quot;:\\&quot;&quot; + userID + &quot;\\&quot;,\\&quot;type\\&quot;:\\&quot;&quot; + methoden + &quot;\\&quot;,\\&quot;msg\\&quot;:\\&quot;&quot; + msget + &quot;\\&quot;, \\&quot;name\\&quot;:\\&quot;&quot; + namnet + &quot;\\&quot;, \\&quot;channel\\&quot;:\\&quot;&quot; + activeChatChannel + &quot;\\&quot;, \\&quot;visitorNick\\&quot;:\\&quot;\\&quot;, \\&quot;agentID\\&quot;:\\&quot; &quot; + agentID + &quot;\\&quot;}&quot;;\r\n\r\n    PrintWriter pw = new PrintWriter(new OutputStreamWriter(os, &quot;utf-8&quot;));\r\n    pw.println(string);\r\n                            \r\n\r\nThe problem becomes when the string `msget` contains the character `&quot;` and `&#39;`\r\n\r\nOn the NodeJS server i am parsing the JSON like this:\r\n\r\n    var obj = JSON.parse(message);\r\n\r\n\r\nAny ideas how i can manage to send all characters without problems?","title":"Java escape JSON String?","body":"<p>I have the following JSON string that i am sending to a NodeJS server:</p>\n\n<pre><code>String string = \"{\\\"id\\\":\\\"\" + userID + \"\\\",\\\"type\\\":\\\"\" + methoden + \"\\\",\\\"msg\\\":\\\"\" + msget + \"\\\", \\\"name\\\":\\\"\" + namnet + \"\\\", \\\"channel\\\":\\\"\" + activeChatChannel + \"\\\", \\\"visitorNick\\\":\\\"\\\", \\\"agentID\\\":\\\" \" + agentID + \"\\\"}\";\n\nPrintWriter pw = new PrintWriter(new OutputStreamWriter(os, \"utf-8\"));\npw.println(string);\n</code></pre>\n\n<p>The problem becomes when the string <code>msget</code> contains the character <code>\"</code> and <code>'</code></p>\n\n<p>On the NodeJS server i am parsing the JSON like this:</p>\n\n<pre><code>var obj = JSON.parse(message);\n</code></pre>\n\n<p>Any ideas how i can manage to send all characters without problems?</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa"],"owner":{"account_id":3086682,"reputation":1688,"user_id":2613670,"accept_rate":57,"display_name":"Manuelarte"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686240546,"creation_date":1686174425,"question_id":76427298,"body_markdown":"Imagine we have the following tables:\r\n\r\n```\r\n codes\r\n| id | code |\r\n-------------\r\n| 1  | 1111 |\r\n| 2. | 2222 |\r\n\r\n```\r\n```\r\n translations\r\n| id | code_id | language |  name                   |\r\n-----------------------------------------------------\r\n| 1  | 1111    | EN       | Lord of the Rings       |\r\n| 2  | 1111    | ES       | El se&#241;or de los anillos |\r\n| 3  | 1111    | FR       | Le Seigneur des Anneaux |\r\n| 4. | 2222    | EN       | Don Quixote.            |\r\n\r\n```\r\n\r\nAnd I declare my entities like this:\r\n\r\n```\r\npublic class Code {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n\r\n    private Long code.\r\n\r\n    @OneToMany\r\n    private Set&lt;Translation&gt; translations;\r\n\r\n    ...\r\n}\r\n\r\npublic class Translation {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;code&quot;)\r\n    private Code code;\r\n\r\n    private String language;\r\n\r\n    private String name;\r\n\r\n}\r\n```\r\n\r\nI am able to retrieve all the translations for an specific code using my `JpaRepository&lt;Location, Long&gt; findAll`, but, I want to be able to &quot;filter&quot; the translations that I receive based on the language. So, as an example, if I want to retrieve the code 1111 (Lord of the Rings), but for Spanish language, then I would get the Code object with the Translation set with one single value, not with the two translations available in the database. Is it possible to achieve this with Spring Data Jpa?","title":"Filter entities in a one to many relation based on a dynamic value with Spring Data JPA","body":"<p>Imagine we have the following tables:</p>\n<pre><code> codes\n| id | code |\n-------------\n| 1  | 1111 |\n| 2. | 2222 |\n\n</code></pre>\n<pre><code> translations\n| id | code_id | language |  name                   |\n-----------------------------------------------------\n| 1  | 1111    | EN       | Lord of the Rings       |\n| 2  | 1111    | ES       | El señor de los anillos |\n| 3  | 1111    | FR       | Le Seigneur des Anneaux |\n| 4. | 2222    | EN       | Don Quixote.            |\n\n</code></pre>\n<p>And I declare my entities like this:</p>\n<pre><code>public class Code {\n\n    @Id\n    @GeneratedValue\n    private Long id;\n\n    private Long code.\n\n    @OneToMany\n    private Set&lt;Translation&gt; translations;\n\n    ...\n}\n\npublic class Translation {\n\n    @Id\n    @GeneratedValue\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;code&quot;)\n    private Code code;\n\n    private String language;\n\n    private String name;\n\n}\n</code></pre>\n<p>I am able to retrieve all the translations for an specific code using my <code>JpaRepository&lt;Location, Long&gt; findAll</code>, but, I want to be able to &quot;filter&quot; the translations that I receive based on the language. So, as an example, if I want to retrieve the code 1111 (Lord of the Rings), but for Spanish language, then I would get the Code object with the Translation set with one single value, not with the two translations available in the database. Is it possible to achieve this with Spring Data Jpa?</p>\n"},{"tags":["java","android","android-recyclerview","textview"],"answers":[{"tags":[],"owner":{"account_id":19192892,"reputation":69,"user_id":14022279,"display_name":"Longe Tolulope"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686240389,"creation_date":1686240389,"answer_id":76433791,"question_id":60576679,"body_markdown":"use a custom linear layout manager for the recycler view and override the two requestChildRectangleOnScreen this way\r\n```\r\noverride fun requestChildRectangleOnScreen(parent: RecyclerView, child: View, rect: Rect, immediate: Boolean): Boolean {\r\n      return false\r\n    }\r\n\r\n    override fun requestChildRectangleOnScreen(parent: RecyclerView, child: View, rect: Rect, immediate: Boolean, focusedChildVisible: Boolean): Boolean {\r\n      return false\r\n    }\r\n```","title":"RecyclerView jumps up when touching TextView that is selectable","body":"<p>use a custom linear layout manager for the recycler view and override the two requestChildRectangleOnScreen this way</p>\n<pre><code>override fun requestChildRectangleOnScreen(parent: RecyclerView, child: View, rect: Rect, immediate: Boolean): Boolean {\n      return false\n    }\n\n    override fun requestChildRectangleOnScreen(parent: RecyclerView, child: View, rect: Rect, immediate: Boolean, focusedChildVisible: Boolean): Boolean {\n      return false\n    }\n</code></pre>\n"}],"owner":{"account_id":1528686,"reputation":12048,"user_id":1426469,"accept_rate":12,"display_name":"Leo Aso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1686240389,"creation_date":1583577520,"question_id":60576679,"body_markdown":"I have a RecyclerView which is populated with items each containing a TextView. I call `textView.setTextIsSelectable(true)` on the TextView to make its text selectable, but I notice that when I tap on the TextView, or long press it to select text, the RecyclerView suddenly scrolls up so that the whole TextView is visible. I want to know how to disable this behaviour, so that touching or long pressing the TextView does not cause any scrolling.","title":"RecyclerView jumps up when touching TextView that is selectable","body":"<p>I have a RecyclerView which is populated with items each containing a TextView. I call <code>textView.setTextIsSelectable(true)</code> on the TextView to make its text selectable, but I notice that when I tap on the TextView, or long press it to select text, the RecyclerView suddenly scrolls up so that the whole TextView is visible. I want to know how to disable this behaviour, so that touching or long pressing the TextView does not cause any scrolling.</p>\n"},{"tags":["java","jakarta-ee","cdi","open-liberty"],"answers":[{"comments":[{"owner":{"account_id":6628100,"reputation":209,"user_id":5117628,"display_name":"Astonvish32"},"score":0,"creation_date":1684997817,"post_id":76304132,"comment_id":134599824,"body_markdown":"A fine suggestion, indeed. But, for this to work we must qualify the injection point of `SomeClass` with either `@Q1` or `@Q2`. This is achievable if `SomeClass` were directly injected in module X or Y but because it is not, there is no way of adding a qualifier at injection point (also assuming that the module containing `SomeClass` is not modifiable). Think it this way: `SomeClass` is a Dependency of `SomeRepository` which in turn is a dependency `SomeUseCase` which is then injected in module X or Y. This is what I mean by some `SomeClass` is never injected into X or Y directly.","body":"A fine suggestion, indeed. But, for this to work we must qualify the injection point of <code>SomeClass</code> with either <code>@Q1</code> or <code>@Q2</code>. This is achievable if <code>SomeClass</code> were directly injected in module X or Y but because it is not, there is no way of adding a qualifier at injection point (also assuming that the module containing <code>SomeClass</code> is not modifiable). Think it this way: <code>SomeClass</code> is a Dependency of <code>SomeRepository</code> which in turn is a dependency <code>SomeUseCase</code> which is then injected in module X or Y. This is what I mean by some <code>SomeClass</code> is never injected into X or Y directly."},{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":1,"creation_date":1685000316,"post_id":76304132,"comment_id":134600351,"body_markdown":"Hmmm, I see, this is indeed a problem. Can you however extend this pattern to the classes that inject `SomeClass`? I.e. instead of producing `SomeClass`, produce the `ClassThatDependsOnSomeClass`. If the dependency chain is not too long it may work.","body":"Hmmm, I see, this is indeed a problem. Can you however extend this pattern to the classes that inject <code>SomeClass</code>? I.e. instead of producing <code>SomeClass</code>, produce the <code>ClassThatDependsOnSomeClass</code>. If the dependency chain is not too long it may work."},{"owner":{"account_id":6628100,"reputation":209,"user_id":5117628,"display_name":"Astonvish32"},"score":0,"creation_date":1685114225,"post_id":76304132,"comment_id":134620991,"body_markdown":"Yes, this is a solution although it does not feel quite clean. I will implement this for now and hope that cdi will put something in place to deal with this kind of problems (well a other than custom scope). Thank you very much for your help.","body":"Yes, this is a solution although it does not feel quite clean. I will implement this for now and hope that cdi will put something in place to deal with this kind of problems (well a other than custom scope). Thank you very much for your help."}],"tags":[],"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684742602,"creation_date":1684742602,"answer_id":76304132,"question_id":76293162,"body_markdown":"Since you have 2 beans of the same type (the 2 EntityManagers), you have to differentiate them using qualifiers. But how do you define which of the 2 qualified instances of the `EntityManager` get injected into the `SomeClassImpl`?\r\n\r\nFortunately, `SomeClassImpl` uses constructor injection, so you can construct it yourself. I suggest 2 producer methods (can be in the same bean), each providing a manually constructed, qualified instance of the `SomeClassImpl`; assuming `@Q1` and `@Q2` are the qualifiers **AND** that the 2 different `EntityManager`s are also qualified by `@Q1`, `@Q2`:\r\n\r\n```java\r\n@Q1\r\n@Dependent\r\n@Produces\r\npublic SomeClassImpl(@Q1 EntityManager em) {\r\n    return new SomeClassImpl(em);\r\n}\r\n\r\n@Q2\r\n@Dependent\r\n@Produces\r\npublic SomeClassImpl(@Q2 EntityManager em) {\r\n    return new SomeClassImpl(em);\r\n}\r\n```\r\n\r\nCDI will still find an unqualified instance of `SomeClassImpl` and will probably complain about ambiguous dependencies. If so, I would try to exclude the unqualified `SomeClassImpl` from bean discovery using the exclusion mechanism of `beans.xml` (the `&lt;scan&gt;&lt;exclude&gt;` element).","title":"Is it possible to isolate CDI producers within the module where they are defined (in a module application with shared module)","body":"<p>Since you have 2 beans of the same type (the 2 EntityManagers), you have to differentiate them using qualifiers. But how do you define which of the 2 qualified instances of the <code>EntityManager</code> get injected into the <code>SomeClassImpl</code>?</p>\n<p>Fortunately, <code>SomeClassImpl</code> uses constructor injection, so you can construct it yourself. I suggest 2 producer methods (can be in the same bean), each providing a manually constructed, qualified instance of the <code>SomeClassImpl</code>; assuming <code>@Q1</code> and <code>@Q2</code> are the qualifiers <strong>AND</strong> that the 2 different <code>EntityManager</code>s are also qualified by <code>@Q1</code>, <code>@Q2</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Q1\n@Dependent\n@Produces\npublic SomeClassImpl(@Q1 EntityManager em) {\n    return new SomeClassImpl(em);\n}\n\n@Q2\n@Dependent\n@Produces\npublic SomeClassImpl(@Q2 EntityManager em) {\n    return new SomeClassImpl(em);\n}\n</code></pre>\n<p>CDI will still find an unqualified instance of <code>SomeClassImpl</code> and will probably complain about ambiguous dependencies. If so, I would try to exclude the unqualified <code>SomeClassImpl</code> from bean discovery using the exclusion mechanism of <code>beans.xml</code> (the <code>&lt;scan&gt;&lt;exclude&gt;</code> element).</p>\n"},{"comments":[{"owner":{"account_id":6628100,"reputation":209,"user_id":5117628,"display_name":"Astonvish32"},"score":0,"creation_date":1686681479,"post_id":76433623,"comment_id":134831928,"body_markdown":"Unfortunately, this did not work for me because each producer belongs to a different module. Reading about alternative, its seems they only apply to classes defined in the same archive. And my test shows that they are not visible for injection within dependencies of these modules. Please correct me if I am mistaken. Thanks for the suggestion!","body":"Unfortunately, this did not work for me because each producer belongs to a different module. Reading about alternative, its seems they only apply to classes defined in the same archive. And my test shows that they are not visible for injection within dependencies of these modules. Please correct me if I am mistaken. Thanks for the suggestion!"},{"owner":{"account_id":22232,"reputation":2344,"user_id":54645,"accept_rate":100,"display_name":"Benjamin Confino"},"score":0,"creation_date":1686833212,"post_id":76433623,"comment_id":134855685,"body_markdown":"I just tested it locally with the a test app: One ear file. Containing one war file. A lib folder containing two jar files.\n\nBoth JarFiles have a producer that returns a class implementing EntityManager, WarFile has a servlet that injects an EntityManager. \n\nWithout an @Alternative annotation I get an AmbigiousResolutionException, with that annotation on a Producer it works.\n\nCould you be more specific about your application&#39;s structure? The rules for how CDI treats cross archive interactions are surprisingly specific.","body":"I just tested it locally with the a test app: One ear file. Containing one war file. A lib folder containing two jar files.  Both JarFiles have a producer that returns a class implementing EntityManager, WarFile has a servlet that injects an EntityManager.   Without an @Alternative annotation I get an AmbigiousResolutionException, with that annotation on a Producer it works.  Could you be more specific about your application&#39;s structure? The rules for how CDI treats cross archive interactions are surprisingly specific."},{"owner":{"account_id":6628100,"reputation":209,"user_id":5117628,"display_name":"Astonvish32"},"score":0,"creation_date":1687602902,"post_id":76433623,"comment_id":134962038,"body_markdown":"Hi, apologies for the late replay. The difference between what I explained in the set up and your comment is the direction of injection. In your comment, the produces are defined within children module and the injection happens inside a parent module (the war file). In my case as explained in the setup, the producers are defined within the parent modules (two or more jars) and the injection is happening inside a child module (a jar that is a dependency of other jar, within which the producers are defined). My deployment is a single war file with multiple jars.","body":"Hi, apologies for the late replay. The difference between what I explained in the set up and your comment is the direction of injection. In your comment, the produces are defined within children module and the injection happens inside a parent module (the war file). In my case as explained in the setup, the producers are defined within the parent modules (two or more jars) and the injection is happening inside a child module (a jar that is a dependency of other jar, within which the producers are defined). My deployment is a single war file with multiple jars."}],"tags":[],"owner":{"account_id":22232,"reputation":2344,"user_id":54645,"accept_rate":100,"display_name":"Benjamin Confino"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686239258,"creation_date":1686239258,"answer_id":76433623,"question_id":76293162,"body_markdown":"I would use CDI Alternatives for this.\r\n\r\nIn your problem statement you said you have two different producers that produce an EntityManager, annotate one of them with `@Alternative` so you have: \r\n\r\n    package X;\r\n\r\n    public class DefaultProducer {\r\n        @javax.enterprise.inject.Produces\r\n        @javax.enterprise.context.ApplicationScoped //Replace the scope as appropriate\r\n        public EntityManager produceEntityManager {...}\r\n    }\r\n    \r\n    package Y;\r\n\r\n    public class AlternativeProducer {\r\n        @javax.enterprise.inject.Produces\r\n        @javax.enterprise.inject.Alternative\r\n        @javax.enterprise.context.ApplicationScoped //Replace the scope as appropriate\r\n        public EntityManager produceEntityManager {...}\r\n    }\r\n\r\nThis will let you control which producer method is used in which module. If an archive contains a beans.xml with: \r\n\r\n    &lt;beans ... &gt;\r\n        &lt;alternatives&gt;\r\n            &lt;class&gt;Y.AlternativeProducer&lt;/class&gt;\r\n        &lt;/alternatives&gt;\r\n    &lt;/beans&gt;\r\n\r\nThat archive will Inject EntityManager from AlternativeProducer, otherwise it will default to DefaultProducer. Since beans.xml is per archive you&#39;ll be able to use different entity managers in different modules, and since one of them is active by default you can control which entity manager is used in B without modifying that archive.\r\n\r\n-------\r\n\r\nWarning! If you do not have a beans.xml file already, then adding a beans.xml file to an archive can change the rules for bean discovery (depending on the CDI version). \r\n\r\nCDI applications without a beans.xml file run in scanning mode annotated, so if you set that explicitly you&#39;ll avoid changes in behaviour, this works on any CDI version.","title":"Is it possible to isolate CDI producers within the module where they are defined (in a module application with shared module)","body":"<p>I would use CDI Alternatives for this.</p>\n<p>In your problem statement you said you have two different producers that produce an EntityManager, annotate one of them with <code>@Alternative</code> so you have:</p>\n<pre><code>package X;\n\npublic class DefaultProducer {\n    @javax.enterprise.inject.Produces\n    @javax.enterprise.context.ApplicationScoped //Replace the scope as appropriate\n    public EntityManager produceEntityManager {...}\n}\n\npackage Y;\n\npublic class AlternativeProducer {\n    @javax.enterprise.inject.Produces\n    @javax.enterprise.inject.Alternative\n    @javax.enterprise.context.ApplicationScoped //Replace the scope as appropriate\n    public EntityManager produceEntityManager {...}\n}\n</code></pre>\n<p>This will let you control which producer method is used in which module. If an archive contains a beans.xml with:</p>\n<pre><code>&lt;beans ... &gt;\n    &lt;alternatives&gt;\n        &lt;class&gt;Y.AlternativeProducer&lt;/class&gt;\n    &lt;/alternatives&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>That archive will Inject EntityManager from AlternativeProducer, otherwise it will default to DefaultProducer. Since beans.xml is per archive you'll be able to use different entity managers in different modules, and since one of them is active by default you can control which entity manager is used in B without modifying that archive.</p>\n<hr />\n<p>Warning! If you do not have a beans.xml file already, then adding a beans.xml file to an archive can change the rules for bean discovery (depending on the CDI version).</p>\n<p>CDI applications without a beans.xml file run in scanning mode annotated, so if you set that explicitly you'll avoid changes in behaviour, this works on any CDI version.</p>\n"}],"owner":{"account_id":6628100,"reputation":209,"user_id":5117628,"display_name":"Astonvish32"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686239258,"creation_date":1684544495,"question_id":76293162,"body_markdown":"**SETUP**\r\n\r\nSuppose that you have two bean archive modules A and B where A depends on B (we cannot modify B). Within B, suppose that there is a class in which an EntityManager is injected as follows:\r\n\r\n```\r\n@Dependent\r\nclass SomeClassImpl implements SomeClass {\r\n    private EntityManager em;\r\n    \r\n    public SomeClassImpl() {}\r\n\r\n    @Inject\r\n    public SomeClassImpl(EntityManager em) {\r\n        this.em = em;\r\n    }\r\n    \r\n    ...\r\n\r\n}\r\n```\r\n*Note that `SomeClass` interface is never directly injected into A. That is, `SomeClass` is a dependency of `SomeRepository` which in turn is a dependency of `SomeUseCase` and this is what get injected in A.*\r\n\r\nBecause the entity manager is not a cdi bean, we can define its producer within A. This works as expected when deploying in a **WAR** archive.\r\n\r\n**PROBLEM**\r\n\r\nNow, consider the following: you have three bean archive modules X, Y and Z where both X and Y depend on Z as defined above. Because X and Y define a producer for the EntityManager (different in X and Y) and these producers as visible to all modules, we must add qualifier to X and Y&#39;s producer to avoid the unsatisfied dependencies exception.\r\n\r\n**Now, the question is how do we deal with the ambiguity in Z?**\r\n\r\nIf the producers were only visible to the module where defined, then this will be reduced the first scenario. But because they are not, we will get the `org.jboss.weld.exceptions.DeploymentException: WELD-001408: Unsatisfied dependencies for type EntityManager with qualifiers`\r\n\r\nNote: although this can be solved with custom scope, I would prefer to avoid building one if possible as of now.\r\n\r\nIf it were you, how would you go about solving this problem?","title":"Is it possible to isolate CDI producers within the module where they are defined (in a module application with shared module)","body":"<p><strong>SETUP</strong></p>\n<p>Suppose that you have two bean archive modules A and B where A depends on B (we cannot modify B). Within B, suppose that there is a class in which an EntityManager is injected as follows:</p>\n<pre><code>@Dependent\nclass SomeClassImpl implements SomeClass {\n    private EntityManager em;\n    \n    public SomeClassImpl() {}\n\n    @Inject\n    public SomeClassImpl(EntityManager em) {\n        this.em = em;\n    }\n    \n    ...\n\n}\n</code></pre>\n<p><em>Note that <code>SomeClass</code> interface is never directly injected into A. That is, <code>SomeClass</code> is a dependency of <code>SomeRepository</code> which in turn is a dependency of <code>SomeUseCase</code> and this is what get injected in A.</em></p>\n<p>Because the entity manager is not a cdi bean, we can define its producer within A. This works as expected when deploying in a <strong>WAR</strong> archive.</p>\n<p><strong>PROBLEM</strong></p>\n<p>Now, consider the following: you have three bean archive modules X, Y and Z where both X and Y depend on Z as defined above. Because X and Y define a producer for the EntityManager (different in X and Y) and these producers as visible to all modules, we must add qualifier to X and Y's producer to avoid the unsatisfied dependencies exception.</p>\n<p><strong>Now, the question is how do we deal with the ambiguity in Z?</strong></p>\n<p>If the producers were only visible to the module where defined, then this will be reduced the first scenario. But because they are not, we will get the <code>org.jboss.weld.exceptions.DeploymentException: WELD-001408: Unsatisfied dependencies for type EntityManager with qualifiers</code></p>\n<p>Note: although this can be solved with custom scope, I would prefer to avoid building one if possible as of now.</p>\n<p>If it were you, how would you go about solving this problem?</p>\n"},{"tags":["java","gradle","intellij-idea","build.gradle","gradle-plugin"],"comments":[{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1686155372,"post_id":76425293,"comment_id":134761456,"body_markdown":"Doe the issue occur only in IntelliJ IDEA or in the command line Gradle build as well (`./gradlew build`)? There my be some library in your dependencies which targets Java 17. Please provide the full error / steps to reproduce.","body":"Doe the issue occur only in IntelliJ IDEA or in the command line Gradle build as well (<code>.&#47;gradlew build</code>)? There my be some library in your dependencies which targets Java 17. Please provide the full error / steps to reproduce."},{"owner":{"display_name":"user22030129"},"score":0,"creation_date":1686157553,"post_id":76425293,"comment_id":134761882,"body_markdown":"FAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred configuring root project \n\nthats what i got over running from cmd.\nwhich code you asking for? gradle-wrapper.properties or gradle kts?","body":"FAILURE: Build failed with an exception.  * What went wrong: A problem occurred configuring root project   thats what i got over running from cmd. which code you asking for? gradle-wrapper.properties or gradle kts?"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1686157699,"post_id":76425293,"comment_id":134761910,"body_markdown":"Asking for [Minimal, Complete, and Verifiable example](https://stackoverflow.com/help/mcve). As mentioned, there may be some dependency in your project, which requires Java 17.","body":"Asking for <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. As mentioned, there may be some dependency in your project, which requires Java 17."},{"owner":{"display_name":"user22030129"},"score":0,"creation_date":1686231705,"post_id":76425293,"comment_id":134773066,"body_markdown":"i have modified the code in question, you can check it.","body":"i have modified the code in question, you can check it."},{"owner":{"display_name":"user22030129"},"score":0,"creation_date":1686232188,"post_id":76425293,"comment_id":134773207,"body_markdown":"basically i updated my version intellij to 2023.1.2, and set JDK SDK etc to 20, and using gradle 7.6 now, now it&#39;s saying unsupported class major file version 64. am so done with intellij by now.\n\n\nso am adding an edit &quot;after updating intellij version&quot;, check code there","body":"basically i updated my version intellij to 2023.1.2, and set JDK SDK etc to 20, and using gradle 7.6 now, now it&#39;s saying unsupported class major file version 64. am so done with intellij by now.   so am adding an edit &quot;after updating intellij version&quot;, check code there"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1686233959,"post_id":76425293,"comment_id":134773672,"body_markdown":"Probably related bug: https://youtrack.jetbrains.com/issue/IDEA-322008/Gradle-build-fails-on-IntelliJ-IDEA-2023.1.2.","body":"Probably related bug: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-322008/Gradle-build-fails-on-IntelliJ-IDEA-2023.1.2\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-322008/&hellip;</a>."},{"owner":{"display_name":"user22030129"},"score":0,"creation_date":1686237474,"post_id":76425293,"comment_id":134774531,"body_markdown":"The only way it got solved is, using latest intellij version, using latest jdk and using latest gradle version. Maybe it has soething to do with intellij version, as old versions neither let use old gradles nor newer ones. might be some bug or whatever, it was very tiring.","body":"The only way it got solved is, using latest intellij version, using latest jdk and using latest gradle version. Maybe it has soething to do with intellij version, as old versions neither let use old gradles nor newer ones. might be some bug or whatever, it was very tiring."}],"answers":[{"tags":[],"owner":{"display_name":"user22030129"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686239221,"creation_date":1686239221,"answer_id":76433619,"question_id":76425293,"body_markdown":"The only way it got solved is:\r\nUpdated Intellij to the latest version (2023.1.2)\r\nAdded Gradle 8.1.1 (latest gradle version yet)\r\nUsing latest JDK &amp; JVM (20)","title":"Gradle version/ Gradle JVM is compatible with JDK, still receiving Unsupported class major file version 61 error","body":"<p>The only way it got solved is:\nUpdated Intellij to the latest version (2023.1.2)\nAdded Gradle 8.1.1 (latest gradle version yet)\nUsing latest JDK &amp; JVM (20)</p>\n"}],"owner":{"display_name":"user22030129"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76433619,"answer_count":1,"score":0,"last_activity_date":1686239221,"creation_date":1686154548,"question_id":76425293,"body_markdown":"I already have checked this https://stackoverflow.com/questions/71033010/intellij-gradle-project-error-unsupported-class-file-major-version-61\r\nand unfortunately it couldn&#39;t solve my problem.\r\n\r\nI am using Intellij-idea. \r\nI check Oracle documentation to find out that Java 15.0.2 is compatible with Gradle version 6.7, still I am receiving **Unsupported class major file version 61**.\r\n\r\nAlso I was previously using JDK 17 but then I have uninstalled it, and also set Java_Home to JDK 15. \r\n\r\nThe details of Gradle version downloaded on my PC \r\n\r\n```\r\n------------------------------------------------------------\r\nGradle 6.7\r\n------------------------------------------------------------\r\n\r\nBuild time:   2020-10-14 16:13:12 UTC\r\nRevision:     312ba9e0f4f8a02d01854d1ed743b79ed996dfd3\r\n\r\nKotlin:       1.3.72\r\nGroovy:       2.5.12\r\nAnt:          Apache Ant(TM) version 1.10.8 compiled on May 10 2020\r\nJVM:          15.0.2 (Oracle Corporation 15.0.2+7-27)\r\nOS:           Windows 10 10.0 amd64\r\n```\r\n\r\nThe details of JDK am using:\r\n\r\n\r\n```\r\njava version &quot;15.0.2&quot; 2021-01-19\r\nJava(TM) SE Runtime Environment (build 15.0.2+7-27)\r\nJava HotSpot(TM) 64-Bit Server VM (build 15.0.2+7-27, mixed mode, sharing)\r\n```\r\n\r\n\r\nI have Double checked **Project Structure &gt;&gt; Project &gt;&gt; JDK version** am using, it is also 15.\r\n\r\nI also double checked **Settings &gt;&gt; Build Tools &gt;&gt; Gradle &gt;&gt; Gradle JVM** which is also 15.\r\n\r\nI also double checked **gradle &gt;&gt; gradle-wrapper.properties** file to see if version is 6.7 there, it was 7.5.1 but I fixed it to 6.7 (saw this upon searching on stackOverflow, i hope it is right way to do this)\r\n\r\n`distributionUrl=https\\://services.gradle.org/distributions/gradle-6.7-bin.zip`\r\n\r\nI also changed target and source compatability to 15 as following:\r\n\r\n```\r\n // Set the JVM compatibility versions\r\n    withType&lt;JavaCompile&gt; {\r\n        sourceCompatibility = &quot;15&quot;\r\n        targetCompatibility = &quot;15&quot;\r\n```\r\n\r\n\r\nDespite it all, am still receiving this error. How to fix this?\r\n\r\n\r\n**After updating Intellij to 2023.1.2**\r\n\r\n1. Gradle Wrapper properties:\r\n\r\n    distributionBase=GRADLE_USER_HOME\r\n    distributionPath=wrapper/dists \r\n   distributionUrl=https\\://services.gradle.org/distributions/gradle- 7.6-bin.zip\r\n    zipStoreBase=GRADLE_USER_HOME\r\n    zipStorePath=wrapper/dists\r\n\r\n2. **Plugin &amp; dependencies section:**\r\n\r\n    plugins {\r\n        id(&quot;java&quot;)\r\n        id(&quot;org.jetbrains.intellij&quot;) version &quot;1.14.1&quot;\r\n    }\r\n    \r\n    group = &quot;com.plugin&quot;\r\n    version = &quot;1.0-SNAPSHOT&quot;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    // Configure Gradle IntelliJ Plugin\r\n    // Read more: https://plugins.jetbrains.com/docs/intellij/tools-gradle-intellij-plugin.html\r\n    intellij {\r\n        version.set(&quot;2023.1.2&quot;)\r\n        type.set(&quot;IC&quot;) // Target IDE Platform\r\n    \r\n        plugins.set(listOf(/* Plugin Dependencies */))\r\n    }\r\n    \r\n    tasks {\r\n        // Set the JVM compatibility versions\r\n        withType&lt;JavaCompile&gt; {\r\n            sourceCompatibility = &quot;20&quot;\r\n            targetCompatibility = &quot;20&quot;\r\n        }\r\n    \r\n        patchPluginXml {\r\n            sinceBuild.set(&quot;221&quot;)\r\n            untilBuild.set(&quot;231.*&quot;)\r\n        }\r\n    \r\n        signPlugin {\r\n            certificateChain.set(System.getenv(&quot;CERTIFICATE_CHAIN&quot;))\r\n            privateKey.set(System.getenv(&quot;PRIVATE_KEY&quot;))\r\n            password.set(System.getenv(&quot;PRIVATE_KEY_PASSWORD&quot;))\r\n        }\r\n    \r\n        publishPlugin {\r\n            token.set(System.getenv(&quot;PUBLISH_TOKEN&quot;))\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"Gradle version/ Gradle JVM is compatible with JDK, still receiving Unsupported class major file version 61 error","body":"<p>I already have checked this <a href=\"https://stackoverflow.com/questions/71033010/intellij-gradle-project-error-unsupported-class-file-major-version-61\">IntelliJ gradle project error &quot;Unsupported class file major version 61&quot;</a>\nand unfortunately it couldn't solve my problem.</p>\n<p>I am using Intellij-idea.\nI check Oracle documentation to find out that Java 15.0.2 is compatible with Gradle version 6.7, still I am receiving <strong>Unsupported class major file version 61</strong>.</p>\n<p>Also I was previously using JDK 17 but then I have uninstalled it, and also set Java_Home to JDK 15.</p>\n<p>The details of Gradle version downloaded on my PC</p>\n<pre><code>------------------------------------------------------------\nGradle 6.7\n------------------------------------------------------------\n\nBuild time:   2020-10-14 16:13:12 UTC\nRevision:     312ba9e0f4f8a02d01854d1ed743b79ed996dfd3\n\nKotlin:       1.3.72\nGroovy:       2.5.12\nAnt:          Apache Ant(TM) version 1.10.8 compiled on May 10 2020\nJVM:          15.0.2 (Oracle Corporation 15.0.2+7-27)\nOS:           Windows 10 10.0 amd64\n</code></pre>\n<p>The details of JDK am using:</p>\n<pre><code>java version &quot;15.0.2&quot; 2021-01-19\nJava(TM) SE Runtime Environment (build 15.0.2+7-27)\nJava HotSpot(TM) 64-Bit Server VM (build 15.0.2+7-27, mixed mode, sharing)\n</code></pre>\n<p>I have Double checked <strong>Project Structure &gt;&gt; Project &gt;&gt; JDK version</strong> am using, it is also 15.</p>\n<p>I also double checked <strong>Settings &gt;&gt; Build Tools &gt;&gt; Gradle &gt;&gt; Gradle JVM</strong> which is also 15.</p>\n<p>I also double checked <strong>gradle &gt;&gt; gradle-wrapper.properties</strong> file to see if version is 6.7 there, it was 7.5.1 but I fixed it to 6.7 (saw this upon searching on stackOverflow, i hope it is right way to do this)</p>\n<p><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-6.7-bin.zip</code></p>\n<p>I also changed target and source compatability to 15 as following:</p>\n<pre><code> // Set the JVM compatibility versions\n    withType&lt;JavaCompile&gt; {\n        sourceCompatibility = &quot;15&quot;\n        targetCompatibility = &quot;15&quot;\n</code></pre>\n<p>Despite it all, am still receiving this error. How to fix this?</p>\n<p><strong>After updating Intellij to 2023.1.2</strong></p>\n<ol>\n<li><p>Gradle Wrapper properties:</p>\n<p>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https://services.gradle.org/distributions/gradle- 7.6-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists</p>\n</li>\n<li><p><strong>Plugin &amp; dependencies section:</strong></p>\n<p>plugins {\nid(&quot;java&quot;)\nid(&quot;org.jetbrains.intellij&quot;) version &quot;1.14.1&quot;\n}</p>\n<p>group = &quot;com.plugin&quot;\nversion = &quot;1.0-SNAPSHOT&quot;</p>\n<p>repositories {\nmavenCentral()\n}</p>\n<p>// Configure Gradle IntelliJ Plugin\n// Read more: <a href=\"https://plugins.jetbrains.com/docs/intellij/tools-gradle-intellij-plugin.html\" rel=\"nofollow noreferrer\">https://plugins.jetbrains.com/docs/intellij/tools-gradle-intellij-plugin.html</a>\nintellij {\nversion.set(&quot;2023.1.2&quot;)\ntype.set(&quot;IC&quot;) // Target IDE Platform</p>\n<pre><code> plugins.set(listOf(/* Plugin Dependencies */))\n</code></pre>\n<p>}</p>\n<p>tasks {\n// Set the JVM compatibility versions\nwithType {\nsourceCompatibility = &quot;20&quot;\ntargetCompatibility = &quot;20&quot;\n}</p>\n<pre><code> patchPluginXml {\n     sinceBuild.set(&quot;221&quot;)\n     untilBuild.set(&quot;231.*&quot;)\n }\n\n signPlugin {\n     certificateChain.set(System.getenv(&quot;CERTIFICATE_CHAIN&quot;))\n     privateKey.set(System.getenv(&quot;PRIVATE_KEY&quot;))\n     password.set(System.getenv(&quot;PRIVATE_KEY_PASSWORD&quot;))\n }\n\n publishPlugin {\n     token.set(System.getenv(&quot;PUBLISH_TOKEN&quot;))\n }\n</code></pre>\n<p>}</p>\n</li>\n</ol>\n"},{"tags":["java","hibernate","jpa"],"owner":{"account_id":20561213,"reputation":160,"user_id":15091679,"display_name":"Tim Lammarsch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686239138,"creation_date":1686239138,"question_id":76433605,"body_markdown":"I am using Hibernate 6.1.2 as implementation of JPA 3.1.0. In my persistence.xml, I have set\r\n\r\n    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\r\n\r\nThis makes my database being updated or created if necessary. (For final deployment, I am going to change this, but for now, it is supposed to work.)\r\n\r\nDuring startup, I get warnings for unique constraints like\r\n\r\n    WARN: constraint &quot;unique_constraint_name&quot; of relation &quot;table_name&quot; does not exist, skipping\r\n\r\nHowever, afterwards, the constraints do exist. So my theory is that some different part of the code misses them before hibernate.hbm2ddl.auto can create them.\r\n\r\nI tried to read up on that, but I only found posts confirming that the update setting creates everything (including constraints) on demand, which is correct, but not exactly the answer to my questions:\r\n\r\n1. Is my idea that some different part of the code is missing them before they can be created?\r\n2. How can I change the code so that the warning is not needed?","title":"Warning while automatically creating unqiue constraints in Hibernate 6","body":"<p>I am using Hibernate 6.1.2 as implementation of JPA 3.1.0. In my persistence.xml, I have set</p>\n<pre><code>&lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\n</code></pre>\n<p>This makes my database being updated or created if necessary. (For final deployment, I am going to change this, but for now, it is supposed to work.)</p>\n<p>During startup, I get warnings for unique constraints like</p>\n<pre><code>WARN: constraint &quot;unique_constraint_name&quot; of relation &quot;table_name&quot; does not exist, skipping\n</code></pre>\n<p>However, afterwards, the constraints do exist. So my theory is that some different part of the code misses them before hibernate.hbm2ddl.auto can create them.</p>\n<p>I tried to read up on that, but I only found posts confirming that the update setting creates everything (including constraints) on demand, which is correct, but not exactly the answer to my questions:</p>\n<ol>\n<li>Is my idea that some different part of the code is missing them before they can be created?</li>\n<li>How can I change the code so that the warning is not needed?</li>\n</ol>\n"},{"tags":["java","barcode","zxing","datamatrix"],"comments":[{"owner":{"account_id":1313476,"reputation":9843,"user_id":2102779,"display_name":"Leszek Szary"},"score":0,"creation_date":1552661158,"post_id":51795004,"comment_id":97108229,"body_markdown":"I also noticed that some datamatrix barcodes are not recognized by ZXing but libdmtx recognizes them. I think there are different variations of datamatrix format and ZXing does not handle all of them properly so if ZXing does not work with your barcodes then the only option will probably be to use libdmtx in that case.","body":"I also noticed that some datamatrix barcodes are not recognized by ZXing but libdmtx recognizes them. I think there are different variations of datamatrix format and ZXing does not handle all of them properly so if ZXing does not work with your barcodes then the only option will probably be to use libdmtx in that case."}],"answers":[{"comments":[{"owner":{"account_id":7416522,"reputation":15,"user_id":5642124,"display_name":"Neil Philip"},"score":0,"creation_date":1563159197,"post_id":55455706,"comment_id":100594313,"body_markdown":"Totally agree -- went with libdmtx for production.","body":"Totally agree -- went with libdmtx for production."}],"tags":[],"owner":{"account_id":3666242,"reputation":198,"user_id":3054608,"accept_rate":0,"display_name":"Ashish"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1554123469,"creation_date":1554123469,"answer_id":55455706,"question_id":51795004,"body_markdown":"I had similar problem as you but on encoding side. As per my findings Zxing is certainly inferior to Libdmtx. We are using both libraries in house in C++ and Java project. \r\n\r\nThere is a case when Zxing breaks while generating barcode look at my comments here:\r\nhttps://github.com/zxing/zxing/issues/624\r\n\r\nHowever Libdmtx works flowless. The other free options you have in java world are (they are for encoding):\r\n\r\n - barcode4j\r\n - OkapiBarcode\r\n \r\n\r\n","title":"Libdmtx vs ZXing for DataMatrix Decoding?","body":"<p>I had similar problem as you but on encoding side. As per my findings Zxing is certainly inferior to Libdmtx. We are using both libraries in house in C++ and Java project. </p>\n\n<p>There is a case when Zxing breaks while generating barcode look at my comments here:\n<a href=\"https://github.com/zxing/zxing/issues/624\" rel=\"nofollow noreferrer\">https://github.com/zxing/zxing/issues/624</a></p>\n\n<p>However Libdmtx works flowless. The other free options you have in java world are (they are for encoding):</p>\n\n<ul>\n<li>barcode4j</li>\n<li>OkapiBarcode</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":5384764,"reputation":391,"user_id":4289042,"display_name":"R.Damasinoro"},"score":0,"creation_date":1605789957,"post_id":64722726,"comment_id":114763402,"body_markdown":"it looks quite interesting. \nIs it capable of detecting a relatively small datamatrix on a big image ( like a A4 sheet with a keyboard key sized datamatrix in it  ? \nI&#39;ve tried on the WASM live demo but it doesn&#39;t detect it successfuly - but maybe I missed something.","body":"it looks quite interesting.  Is it capable of detecting a relatively small datamatrix on a big image ( like a A4 sheet with a keyboard key sized datamatrix in it  ?  I&#39;ve tried on the WASM live demo but it doesn&#39;t detect it successfuly - but maybe I missed something."},{"owner":{"account_id":2388339,"reputation":1019,"user_id":2088798,"display_name":"axxel"},"score":0,"creation_date":1606404738,"post_id":64722726,"comment_id":114958965,"body_markdown":"That is a limitation of the released library. You&#39;ll find a discussion here: https://github.com/nu-book/zxing-cpp/issues/146. If you can build it yourself, then &#39;un-commenting&#39; the mentioned code line should do the trick. If you still have no success, then please let us know on that github issue.","body":"That is a limitation of the released library. You&#39;ll find a discussion here: <a href=\"https://github.com/nu-book/zxing-cpp/issues/146\" rel=\"nofollow noreferrer\">github.com/nu-book/zxing-cpp/issues/146</a>. If you can build it yourself, then &#39;un-commenting&#39; the mentioned code line should do the trick. If you still have no success, then please let us know on that github issue."}],"tags":[],"owner":{"account_id":2388339,"reputation":1019,"user_id":2088798,"display_name":"axxel"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604704032,"creation_date":1604704032,"answer_id":64722726,"question_id":51795004,"body_markdown":"Another alternative is the relatively new ZXing cpp port here: https://github.com/nu-book/zxing-cpp.\r\n\r\nIt contains a completely new DataMatrix detector that was meant to fix serious limitations of the Java upstream version. It was specifically designed to deal with low resolution images (module size as low as around 2 pixels) and symbols that have just the required 1 module quite zone and a busy background.\r\n\r\nThe following comparison is certainly not &#39;fair&#39; but I just had the `dmtxread` utility of the libdmtx try my test set of images and it missed 3 of 17 samples and took a whooping 300 times as long compared to my code :).","title":"Libdmtx vs ZXing for DataMatrix Decoding?","body":"<p>Another alternative is the relatively new ZXing cpp port here: <a href=\"https://github.com/nu-book/zxing-cpp\" rel=\"nofollow noreferrer\">https://github.com/nu-book/zxing-cpp</a>.</p>\n<p>It contains a completely new DataMatrix detector that was meant to fix serious limitations of the Java upstream version. It was specifically designed to deal with low resolution images (module size as low as around 2 pixels) and symbols that have just the required 1 module quite zone and a busy background.</p>\n<p>The following comparison is certainly not 'fair' but I just had the <code>dmtxread</code> utility of the libdmtx try my test set of images and it missed 3 of 17 samples and took a whooping 300 times as long compared to my code :).</p>\n"},{"tags":[],"owner":{"account_id":16480417,"reputation":25,"user_id":11907336,"display_name":"CBJFan2009"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686239026,"creation_date":1686239026,"answer_id":76433590,"question_id":51795004,"body_markdown":"I know this is an old post, but wanted to throw in my experience dealing with libdmtx and the newer c++ version of zxing (zxing-cpp 2.0), in case it helps anyone else.\r\n\r\nInitially, I was using pyzbar to decode QR codes, but decided that QR was a bit too finicky about printing quality (17,000+/hour print of the barcodes).  Data Matrix (DM) seemed like a logical solution, having better tolerances (from what I&#39;ve read).  I initially built using libdmtx, but found the slowdown was substantial when compared to QR read/decode through pyzbar.  \r\n\r\nI later discovered the ZXing-cpp build, started using that because of decoding most common barcodes using one library, and it&#39;s wicked-fast!\r\nMy only quibble so far with zxing is the DM orientation issue.  I&#39;ve tested using my camera, and orientation of DM causes the detection ROI to be very limited (left-to-right didn&#39;t lose much, but top-to-bottom I lost about 40% of my camera&#39;s FOV for detection -- see image attached).  Note: white bars across are overlay, not part of the camera view.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xvhze.jpg\r\n  [2]: https://i.stack.imgur.com/cjZCc.jpg\r\n  [3]: https://i.stack.imgur.com/Bcr7T.jpg\r\n  [4]: https://i.stack.imgur.com/l9hxl.jpg","title":"Libdmtx vs ZXing for DataMatrix Decoding?","body":"<p>I know this is an old post, but wanted to throw in my experience dealing with libdmtx and the newer c++ version of zxing (zxing-cpp 2.0), in case it helps anyone else.</p>\n<p>Initially, I was using pyzbar to decode QR codes, but decided that QR was a bit too finicky about printing quality (17,000+/hour print of the barcodes).  Data Matrix (DM) seemed like a logical solution, having better tolerances (from what I've read).  I initially built using libdmtx, but found the slowdown was substantial when compared to QR read/decode through pyzbar.</p>\n<p>I later discovered the ZXing-cpp build, started using that because of decoding most common barcodes using one library, and it's wicked-fast!\nMy only quibble so far with zxing is the DM orientation issue.  I've tested using my camera, and orientation of DM causes the detection ROI to be very limited (left-to-right didn't lose much, but top-to-bottom I lost about 40% of my camera's FOV for detection -- see image attached).  Note: white bars across are overlay, not part of the camera view.</p>\n<p><a href=\"https://i.stack.imgur.com/xvhze.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xvhze.jpg\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/cjZCc.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cjZCc.jpg\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Bcr7T.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bcr7T.jpg\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/l9hxl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l9hxl.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":7416522,"reputation":15,"user_id":5642124,"display_name":"Neil Philip"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2725,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":55455706,"answer_count":3,"score":1,"last_activity_date":1686239026,"creation_date":1533942476,"question_id":51795004,"body_markdown":"How reliable is ZXing&#39;s barcode localization for DataMatrix decoding compared to libdmtx?\r\n\r\nI have a set of png image files of stickers (proprietary, so unfortunately I&#39;m not able to share them) containing DataMatrix barcodes. These stickers sit on flat surfaces, have very nice quiet zones and are generally centered in the image, but suffer from inequal lighting conditions and slight dust, likely the largest obstacle to reliable decoding.  \r\n\r\nI&#39;d like to use a modifiable Java library to decode them and it seems that ZXing is the only open-source option (open to other suggestions).  However, upon running these images through the [ZXing online decoder](https://zxing.org/w/decode.jspx), I consistently get NO BARCODE FOUND, even on the cleanest images.  In contrast, when I run the same images through proprietary online decoders, like [Inlite&#39;s Free Online Barcode Reader](https://online-barcode-reader.inliteresearch.com/), I get reliable decodes for all the images. My company has implemented a library in C that also reliable decodes the barcode images by processing them and calling [libdmtx](https://github.com/dmtx/libdmtx). Similarly, this [online DataMatrix decoder](http://boy.co.ua/decode.php) built on libdmtx can also reliably read my image files. \r\n\r\nIs the barcode localization in ZXing significantly inferior to libdmtx? \r\nIf I attempt the same preprocessing on the image files before I run them through ZXing, could I achieve similar results? I have a strong preference for a Java library (ZXing), but I may have no choice but to use libdmtx. Would appreciate any insight, thanks! ","title":"Libdmtx vs ZXing for DataMatrix Decoding?","body":"<p>How reliable is ZXing's barcode localization for DataMatrix decoding compared to libdmtx?</p>\n\n<p>I have a set of png image files of stickers (proprietary, so unfortunately I'm not able to share them) containing DataMatrix barcodes. These stickers sit on flat surfaces, have very nice quiet zones and are generally centered in the image, but suffer from inequal lighting conditions and slight dust, likely the largest obstacle to reliable decoding.  </p>\n\n<p>I'd like to use a modifiable Java library to decode them and it seems that ZXing is the only open-source option (open to other suggestions).  However, upon running these images through the <a href=\"https://zxing.org/w/decode.jspx\" rel=\"nofollow noreferrer\">ZXing online decoder</a>, I consistently get NO BARCODE FOUND, even on the cleanest images.  In contrast, when I run the same images through proprietary online decoders, like <a href=\"https://online-barcode-reader.inliteresearch.com/\" rel=\"nofollow noreferrer\">Inlite's Free Online Barcode Reader</a>, I get reliable decodes for all the images. My company has implemented a library in C that also reliable decodes the barcode images by processing them and calling <a href=\"https://github.com/dmtx/libdmtx\" rel=\"nofollow noreferrer\">libdmtx</a>. Similarly, this <a href=\"http://boy.co.ua/decode.php\" rel=\"nofollow noreferrer\">online DataMatrix decoder</a> built on libdmtx can also reliably read my image files. </p>\n\n<p>Is the barcode localization in ZXing significantly inferior to libdmtx? \nIf I attempt the same preprocessing on the image files before I run them through ZXing, could I achieve similar results? I have a strong preference for a Java library (ZXing), but I may have no choice but to use libdmtx. Would appreciate any insight, thanks! </p>\n"},{"tags":["java","properties","spring-boot"],"comments":[{"owner":{"account_id":1464652,"reputation":12323,"user_id":1377895,"accept_rate":100,"display_name":"Roman Vottner"},"score":0,"creation_date":1438343662,"post_id":31745168,"comment_id":51424430,"body_markdown":"You could try to use Mockito&#39;s [`Whitebox.setInternalState(object, fieldName, value)`](http://docs.mockito.googlecode.com/hg/org/mockito/internal/util/reflection/Whitebox.html) method to &quot;inject&quot; values into an object. [Example](https://code.google.com/p/mockito/source/browse/test/org/mockito/internal/util/reflection/WhiteboxTest.java?r=9772247b067621ed5c3cefc356397b0bde5b89f6)","body":"You could try to use Mockito&#39;s <a href=\"http://docs.mockito.googlecode.com/hg/org/mockito/internal/util/reflection/Whitebox.html\" rel=\"nofollow noreferrer\"><code>Whitebox.setInternalState(object, fieldName, value)</code></a> method to &quot;inject&quot; values into an object. <a href=\"https://code.google.com/p/mockito/source/browse/test/org/mockito/internal/util/reflection/WhiteboxTest.java?r=9772247b067621ed5c3cefc356397b0bde5b89f6\" rel=\"nofollow noreferrer\">Example</a>"},{"owner":{"account_id":1580843,"reputation":13479,"user_id":1466267,"accept_rate":91,"display_name":"SpaceTrucker"},"score":0,"creation_date":1438344178,"post_id":31745168,"comment_id":51424785,"body_markdown":"You could have a look how [`MockitoAnnotations.initMocks(java.lang.Object)`](http://docs.mockito.googlecode.com/hg/org/mockito/MockitoAnnotations.html#initMocks(java.lang.Object)) works and extend that to work for `@ConfigurationProperties` and `@Autowired` (may already work for that, but I&#39;m not sure).","body":"You could have a look how <a href=\"http://docs.mockito.googlecode.com/hg/org/mockito/MockitoAnnotations.html#initMocks(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>MockitoAnnotations.initMocks(java.lang.Object)</code></a> works and extend that to work for <code>@ConfigurationProperties</code> and <code>@Autowired</code> (may already work for that, but I&#39;m not sure)."},{"owner":{"account_id":5684267,"reputation":1025,"user_id":4494324,"accept_rate":100,"display_name":"IndianerJones"},"score":0,"creation_date":1438344485,"post_id":31745168,"comment_id":51424981,"body_markdown":"@Roman Vottner: Thanks for the hint. The issue is, It&#39;s not only one field I want to mock, it&#39;s 10. So it&#39;s would be bit writing effort. That would be nothing to complain about, if it&#39;s only that unit test, but I want to have lots of them, so having a more easy way would be really helpful.","body":"@Roman Vottner: Thanks for the hint. The issue is, It&#39;s not only one field I want to mock, it&#39;s 10. So it&#39;s would be bit writing effort. That would be nothing to complain about, if it&#39;s only that unit test, but I want to have lots of them, so having a more easy way would be really helpful."},{"owner":{"account_id":1464652,"reputation":12323,"user_id":1377895,"accept_rate":100,"display_name":"Roman Vottner"},"score":0,"creation_date":1438344879,"post_id":31745168,"comment_id":51425235,"body_markdown":"If you &quot;inject&quot; the same kind of objects for a couple of tests, just refactor the instruction to a helper method and call this method in those tests. You can also parametreize this method to inject certain objects. You can also think about a kind of builder setup that &quot;injects&quot; default values if no builder specific method is called and sets a concrete inject-value if a respecive builder-method was set.","body":"If you &quot;inject&quot; the same kind of objects for a couple of tests, just refactor the instruction to a helper method and call this method in those tests. You can also parametreize this method to inject certain objects. You can also think about a kind of builder setup that &quot;injects&quot; default values if no builder specific method is called and sets a concrete inject-value if a respecive builder-method was set."},{"owner":{"account_id":304234,"reputation":32207,"user_id":613628,"accept_rate":100,"display_name":"Stephane Nicoll"},"score":0,"creation_date":1438356754,"post_id":31745168,"comment_id":51433615,"body_markdown":"What are you trying to do exactly? From the example I saw it looks like you&#39;re testing the framework (you shouldn&#39;t).  You may be interested by this answer http://stackoverflow.com/questions/31692863/what-is-the-best-way-to-test-that-a-spring-application-context-fails-to-start/31722400#31722400","body":"What are you trying to do exactly? From the example I saw it looks like you&#39;re testing the framework (you shouldn&#39;t).  You may be interested by this answer <a href=\"http://stackoverflow.com/questions/31692863/what-is-the-best-way-to-test-that-a-spring-application-context-fails-to-start/31722400#31722400\" title=\"what is the best way to test that a spring application context fails to start\">stackoverflow.com/questions/31692863/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1464652,"reputation":12323,"user_id":1377895,"accept_rate":100,"display_name":"Roman Vottner"},"score":6,"creation_date":1438353976,"post_id":31748450,"comment_id":51431782,"body_markdown":"There can be a couple of reasons why a Spring context should not be created while unit-testing. One of these is simply the fact, that including a Spring context while testing is not a unit-test but an integration test. Running a test with Spring context (especially if dirties context is set to after each method) needs way more time to execute than a proper unit-test. Furthermore, testing edge-cases like a failed injection for a single test method is harder to setup using an enabled Spring context.","body":"There can be a couple of reasons why a Spring context should not be created while unit-testing. One of these is simply the fact, that including a Spring context while testing is not a unit-test but an integration test. Running a test with Spring context (especially if dirties context is set to after each method) needs way more time to execute than a proper unit-test. Furthermore, testing edge-cases like a failed injection for a single test method is harder to setup using an enabled Spring context."},{"owner":{"account_id":1000824,"reputation":1501,"user_id":1015703,"accept_rate":96,"display_name":"David H"},"score":2,"creation_date":1438356863,"post_id":31748450,"comment_id":51433669,"body_markdown":"@RomanVottner - I agree, but once the OP indicated he is checking whether or not a setting loads correctly from a properties file, I would argue that he has moved into the realm of integration testing and now needs a fuller context.","body":"@RomanVottner - I agree, but once the OP indicated he is checking whether or not a setting loads correctly from a properties file, I would argue that he has moved into the realm of integration testing and now needs a fuller context."},{"owner":{"account_id":192592,"reputation":21571,"user_id":433814,"accept_rate":86,"display_name":"Marcello DeSales"},"score":0,"creation_date":1462846770,"post_id":31748450,"comment_id":61796833,"body_markdown":"I&#39;m getting java.lang.IllegalStateException: Failed to load ApplicationContext\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124","body":"I&#39;m getting java.lang.IllegalStateException: Failed to load ApplicationContext \tat org.springframework.test.context.cache.DefaultCacheAwareCont&zwnj;&#8203;extLoaderDelegate.lo&zwnj;&#8203;adContext(DefaultCac&zwnj;&#8203;heAwareContextLoader&zwnj;&#8203;Delegate.java:124"},{"owner":{"account_id":2437868,"reputation":13395,"user_id":2127277,"accept_rate":66,"display_name":"Dimitri Kopriwa"},"score":1,"creation_date":1497273030,"post_id":31748450,"comment_id":75994003,"body_markdown":"Is it possible to load YML instead of properties ?","body":"Is it possible to load YML instead of properties ?"},{"owner":{"account_id":1457834,"reputation":2843,"user_id":2726028,"accept_rate":35,"display_name":"Olayinka"},"score":0,"creation_date":1545306499,"post_id":31748450,"comment_id":94583158,"body_markdown":"This doesn&#39;t solve the problem posed by the OP, only providing an alternative","body":"This doesn&#39;t solve the problem posed by the OP, only providing an alternative"},{"owner":{"account_id":4440595,"reputation":3869,"user_id":3615207,"accept_rate":73,"display_name":"stinger"},"score":0,"creation_date":1658496743,"post_id":31748450,"comment_id":129072630,"body_markdown":"@RomanVottner how running test with Spring context makes it integration? Testing pyramid and spring context are something not-related. If I test single Spring component (service, repository, etc) and I want to use Spring context features like configuration, it does not make this test integration.","body":"@RomanVottner how running test with Spring context makes it integration? Testing pyramid and spring context are something not-related. If I test single Spring component (service, repository, etc) and I want to use Spring context features like configuration, it does not make this test integration."},{"owner":{"account_id":1464652,"reputation":12323,"user_id":1377895,"accept_rate":100,"display_name":"Roman Vottner"},"score":0,"creation_date":1658565963,"post_id":31748450,"comment_id":129087120,"body_markdown":"@stinger Please review the definition of unit, integration and end-to-end tests. If you have some test code that spins up a Spring context, you defacto test your code&#39;s behavior within the Spring framework and not your code in isolation. That makes the test by definition an integration test and not a unit test. Depending on the stuff you configure it may already be an end-to-end test, i.e. if you spin up or connect to real databases or the like. Sure, in the end it is just a naming thing, though spinning up Spring takes some time which is not always needed to test your component","body":"@stinger Please review the definition of unit, integration and end-to-end tests. If you have some test code that spins up a Spring context, you defacto test your code&#39;s behavior within the Spring framework and not your code in isolation. That makes the test by definition an integration test and not a unit test. Depending on the stuff you configure it may already be an end-to-end test, i.e. if you spin up or connect to real databases or the like. Sure, in the end it is just a naming thing, though spinning up Spring takes some time which is not always needed to test your component"},{"owner":{"account_id":4440595,"reputation":3869,"user_id":3615207,"accept_rate":73,"display_name":"stinger"},"score":0,"creation_date":1660049868,"post_id":31748450,"comment_id":129436757,"body_markdown":"@RomanVottner Spring is just a way of writing and running code (DI framework, basically). You now mixing concepts of integration of business parts of your code (database, APIs, other service layers) with concept of helping you to inject dependencies. Ultimately, you can instantiate test or mock objects using keyword `new`, without Spring, so does this mean you convert test from IT to unit ?","body":"@RomanVottner Spring is just a way of writing and running code (DI framework, basically). You now mixing concepts of integration of business parts of your code (database, APIs, other service layers) with concept of helping you to inject dependencies. Ultimately, you can instantiate test or mock objects using keyword <code>new</code>, without Spring, so does this mean you convert test from IT to unit ?"},{"owner":{"account_id":1464652,"reputation":12323,"user_id":1377895,"accept_rate":100,"display_name":"Roman Vottner"},"score":0,"creation_date":1660052506,"post_id":31748450,"comment_id":129437976,"body_markdown":"@stinger as mentioned before, our discussion spins around nomenclature, but running a real unit-test vs. a Spring-enhanced one will outperform the latter usually by a large margin as spinning up the Spring context usually has its price and may also require certain attention in terms of what is present in that context at which time (-&gt; dirty context and so forth). Even Spring itself recommends for years now to switch to constructor or method injection rather then property injection as such &quot;beans&quot; can be tested without a need for Spring at all","body":"@stinger as mentioned before, our discussion spins around nomenclature, but running a real unit-test vs. a Spring-enhanced one will outperform the latter usually by a large margin as spinning up the Spring context usually has its price and may also require certain attention in terms of what is present in that context at which time (-&gt; dirty context and so forth). Even Spring itself recommends for years now to switch to constructor or method injection rather then property injection as such &quot;beans&quot; can be tested without a need for Spring at all"}],"tags":[],"owner":{"account_id":1000824,"reputation":1501,"user_id":1015703,"accept_rate":96,"display_name":"David H"},"comment_count":9,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1438352441,"creation_date":1438352441,"answer_id":31748450,"question_id":31745168,"body_markdown":"A couple points:\r\n\r\n1. You don&#39;t need a &quot;TestConfiguration&quot; class in your main package, because all it&#39;s doing is configuring the &quot;TestSettings&quot; bean.  You can do this simply by annotating the TestSettings class itself.\r\n\r\n2. Normally you would load the context you need for the test using the **@SpringApplicationConfiguration** annotation, passing the name of your Application class.  However, you said you don&#39;t want to load the whole ApplicationContext (though it&#39;s not clear why), so you need to create a special configuration class to do the loading only for tests.  Below I call it &quot;TestConfigurationNew&quot; to avoid confusion with the TestConfiguration class that you had originally.\r\n\r\n3. In the Spring Boot world, all properties are generally kept in the &quot;application.properties&quot; file; but it is possible to store them elsewhere.  Below, I have specified the &quot;SettingsTest.properties&quot; file that you proposed. Note that you can have two copies of this file, the one in the main/resources folder, and the one in the test/resources folder for testing.\r\n\r\nChange the code as follows:\r\n\r\nTestSettings.java  (in main package)\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(prefix=&quot;test&quot;, locations = &quot;classpath:SettingsTest.properties&quot;)\r\n    public class TestSettings {\r\n    \r\n        private String property;\r\n\r\n        public String getProperty() {\r\n            return property;\r\n        }\r\n\r\n        public void setProperty(String property) {\r\n            this.property = property;\r\n        }\r\n    }\r\n\r\nSettingsTest.java (in test package)\r\n\r\n    @TestPropertySource(locations=&quot;classpath:SettingsTest.properties&quot;)\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @SpringApplicationConfiguration(classes = TestConfigurationNew.class)\r\n    public class SettingsTest {\r\n\r\n        @Autowired\r\n        TestSettings settings;\r\n\r\n        @Test\r\n        public void testConfig(){\r\n            Assert.assertEquals(&quot;TEST_PROPERTY&quot;, settings.getProperty());\r\n        }\r\n    }\r\n\r\nTestConfigurationNew.java (in test package):\r\n\r\n    @EnableAutoConfiguration\r\n    @ComponentScan(basePackages = { &quot;my.package.main&quot; })\r\n    @Configuration\r\n    public class TestConfigurationNew {\r\n    }\r\n\r\n\r\nThis should now work the way you wanted.\r\n\r\n","title":"How to test Classes with @ConfigurationProperties and @Autowired","body":"<p>A couple points:</p>\n\n<ol>\n<li><p>You don't need a \"TestConfiguration\" class in your main package, because all it's doing is configuring the \"TestSettings\" bean.  You can do this simply by annotating the TestSettings class itself.</p></li>\n<li><p>Normally you would load the context you need for the test using the <strong>@SpringApplicationConfiguration</strong> annotation, passing the name of your Application class.  However, you said you don't want to load the whole ApplicationContext (though it's not clear why), so you need to create a special configuration class to do the loading only for tests.  Below I call it \"TestConfigurationNew\" to avoid confusion with the TestConfiguration class that you had originally.</p></li>\n<li><p>In the Spring Boot world, all properties are generally kept in the \"application.properties\" file; but it is possible to store them elsewhere.  Below, I have specified the \"SettingsTest.properties\" file that you proposed. Note that you can have two copies of this file, the one in the main/resources folder, and the one in the test/resources folder for testing.</p></li>\n</ol>\n\n<p>Change the code as follows:</p>\n\n<p>TestSettings.java  (in main package)</p>\n\n<pre><code>@Configuration\n@ConfigurationProperties(prefix=\"test\", locations = \"classpath:SettingsTest.properties\")\npublic class TestSettings {\n\n    private String property;\n\n    public String getProperty() {\n        return property;\n    }\n\n    public void setProperty(String property) {\n        this.property = property;\n    }\n}\n</code></pre>\n\n<p>SettingsTest.java (in test package)</p>\n\n<pre><code>@TestPropertySource(locations=\"classpath:SettingsTest.properties\")\n@RunWith(SpringJUnit4ClassRunner.class)\n@SpringApplicationConfiguration(classes = TestConfigurationNew.class)\npublic class SettingsTest {\n\n    @Autowired\n    TestSettings settings;\n\n    @Test\n    public void testConfig(){\n        Assert.assertEquals(\"TEST_PROPERTY\", settings.getProperty());\n    }\n}\n</code></pre>\n\n<p>TestConfigurationNew.java (in test package):</p>\n\n<pre><code>@EnableAutoConfiguration\n@ComponentScan(basePackages = { \"my.package.main\" })\n@Configuration\npublic class TestConfigurationNew {\n}\n</code></pre>\n\n<p>This should now work the way you wanted.</p>\n"},{"comments":[{"owner":{"account_id":6084504,"reputation":2356,"user_id":4749074,"display_name":"Rib47"},"score":13,"creation_date":1518716301,"post_id":48021713,"comment_id":84629905,"body_markdown":"If you working with Spring Boot and with `*.yml` files, just remove `@TestPropertySource` and add one special initializer  to `@ContextConfiguration` as follows:            \n`@ContextConfiguration(classes = TestConfiguration.class,\n    initializers = ConfigFileApplicationContextInitializer.class)`","body":"If you working with Spring Boot and with <code>*.yml</code> files, just remove <code>@TestPropertySource</code> and add one special initializer  to <code>@ContextConfiguration</code> as follows:             <code>@ContextConfiguration(classes = TestConfiguration.class,     initializers = ConfigFileApplicationContextInitializer.class)</code>"},{"owner":{"account_id":12076581,"reputation":469,"user_id":8829807,"display_name":"Tama"},"score":0,"creation_date":1547388850,"post_id":48021713,"comment_id":95168222,"body_markdown":"never forget to put setter and getters for the collections ;)","body":"never forget to put setter and getters for the collections ;)"},{"owner":{"account_id":2218670,"reputation":354,"user_id":1958683,"accept_rate":57,"display_name":"Tugrul ASLAN"},"score":1,"creation_date":1548690945,"post_id":48021713,"comment_id":95621985,"body_markdown":"https://www.baeldung.com/properties-with-spring section 5.3 has also good example alternatively to the above explanation","body":"<a href=\"https://www.baeldung.com/properties-with-spring\" rel=\"nofollow noreferrer\">baeldung.com/properties-with-spring</a> section 5.3 has also good example alternatively to the above explanation"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":1,"creation_date":1660753955,"post_id":48021713,"comment_id":129609067,"body_markdown":"@Rib47 i think it&#39;s called `@ContextConfiguration(initializers = ConfigDataApplicationContextInitializer.class)` now","body":"@Rib47 i think it&#39;s called <code>@ContextConfiguration(initializers = ConfigDataApplicationContextInitializer.class)</code> now"}],"tags":[],"owner":{"account_id":1453715,"reputation":801,"user_id":5466369,"display_name":"Stepan Kolesnik"},"comment_count":4,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1686238854,"creation_date":1514545997,"answer_id":48021713,"question_id":31745168,"body_markdown":"You need to annotate your `TestConfiguration` class with `@EnableConfigurationProperties` as follows:\r\n\r\n    @EnableConfigurationProperties\r\n    public class TestConfiguration {\r\n\r\n        @Bean\r\n        @ConfigurationProperties(prefix = &quot;test&quot;)\r\n        public TestSettings settings (){\r\n            return new TestSettings();\r\n        }\r\n    }\r\n\r\nAlso you only need to include `TestConfiguration.class` in `@ContextConfiguration` of your `SettingsTest` class:\r\n\r\n    @TestPropertySource(locations = &quot;/SettingsTest.properties&quot;)\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(classes = TestConfiguration.class)\r\n    public class SettingsTest {\r\n    ...","title":"How to test Classes with @ConfigurationProperties and @Autowired","body":"<p>You need to annotate your <code>TestConfiguration</code> class with <code>@EnableConfigurationProperties</code> as follows:</p>\n<pre><code>@EnableConfigurationProperties\npublic class TestConfiguration {\n\n    @Bean\n    @ConfigurationProperties(prefix = &quot;test&quot;)\n    public TestSettings settings (){\n        return new TestSettings();\n    }\n}\n</code></pre>\n<p>Also you only need to include <code>TestConfiguration.class</code> in <code>@ContextConfiguration</code> of your <code>SettingsTest</code> class:</p>\n<pre><code>@TestPropertySource(locations = &quot;/SettingsTest.properties&quot;)\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = TestConfiguration.class)\npublic class SettingsTest {\n...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1062565,"reputation":1464,"user_id":1063882,"accept_rate":60,"display_name":"Oleksandr_DJ"},"score":0,"creation_date":1582706876,"post_id":52508297,"comment_id":106865792,"body_markdown":"&#39;@EnableConfigurationProperties helped in my case. I just using &#39;@RunWith(SpringJUnit4ClassRunner.class) - test runner\n&#39;@TestPropertySource() to redefine properties for test\n&#39;@EnableConfigurationProperties(UnitProperties.class) - to allow initialization of config bean marked with @ConfigurationProperties.","body":"&#39;@EnableConfigurationProperties helped in my case. I just using &#39;@RunWith(SpringJUnit4ClassRunner.class) - test runner &#39;@TestPropertySource() to redefine properties for test &#39;@EnableConfigurationProperties(UnitProperties.class) - to allow initialization of config bean marked with @ConfigurationProperties."}],"tags":[],"owner":{"account_id":2061447,"reputation":526,"user_id":1837878,"display_name":"Jason"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1537921667,"creation_date":1537921667,"answer_id":52508297,"question_id":31745168,"body_markdown":"you can actually just add @EnableConfigurationProperties to your @SpringBootTest directly.  \r\neg:  \r\n\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(classes = TestConfiguration.class)\r\n    @EnableConfigurationProperties\r\n    ...\r\n\r\n","title":"How to test Classes with @ConfigurationProperties and @Autowired","body":"<p>you can actually just add @EnableConfigurationProperties to your @SpringBootTest directly.<br>\neg:  </p>\n\n<pre><code>@ActiveProfiles(\"test\")\n@RunWith(SpringRunner.class)\n@SpringBootTest(classes = TestConfiguration.class)\n@EnableConfigurationProperties\n...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1904407,"reputation":2121,"user_id":1719569,"display_name":"Saljack"},"score":0,"creation_date":1602747354,"post_id":55257551,"comment_id":113819205,"body_markdown":"If you don&#39;t need to everything what `@SpringBootTest` provides you should not use it. And I thinkt that testing properties are this case when is better don&#39;t use it. You can use `@SpringJUnitConfig` instead of it.","body":"If you don&#39;t need to everything what <code>@SpringBootTest</code> provides you should not use it. And I thinkt that testing properties are this case when is better don&#39;t use it. You can use <code>@SpringJUnitConfig</code> instead of it."},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1602750273,"post_id":55257551,"comment_id":113820417,"body_markdown":"The second approach does not use `SpringBootTest`","body":"The second approach does not use <code>SpringBootTest</code>"},{"owner":{"account_id":2392124,"reputation":1068,"user_id":2091779,"display_name":"alban maillere"},"score":1,"creation_date":1618485903,"post_id":55257551,"comment_id":118618350,"body_markdown":"Awesome mass of good information in a so little post ! the key point for me was &quot;And, put the values to load in test/resources/application.yml. Repetition is unavoidable&quot;","body":"Awesome mass of good information in a so little post ! the key point for me was &quot;And, put the values to load in test/resources/application.yml. Repetition is unavoidable&quot;"}],"tags":[],"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1568890869,"creation_date":1553074419,"answer_id":55257551,"question_id":31745168,"body_markdown":"If you use Spring Boot, now you only need:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n\r\n\r\nNo extra `@ContextConfiguration`, no extra class only for tests to `EnableAutoConfiguration` and `EnableConfigurationProperties`. You don&#39;t have to specify the configuration class to load, they will all be loaded.\r\n\r\n**But**, ensure the properties entries you want to read in `main/resources/application.yml` is also present in `test/resources/application.yml`. Repetition is unavoidable. \r\n\r\n---\r\nAnother way is:\r\n\r\n1. Define a class of configuration only for tests, along with `MyApplicationTest.java`, at the same level. This class can be empty.\r\n\r\nLike:\r\n\r\n    @EnableAutoConfiguration\r\n    @EnableConfigurationProperties(value = {\r\n            ConnectionPoolConfig.class\r\n    })\r\n    public class MyApplicationTestConfiguration {\r\n    }\r\n\r\n2. And, in the class to load the autowired configuration.\r\n\r\nLike:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    //@SpringBootTest // the first, easy way\r\n    @ContextConfiguration(classes = MyApplicationTestConfiguration.class,\r\n            initializers = ConfigFileApplicationContextInitializer.class)\r\n    public class ConnectionPoolConfigTest {\r\n    \r\n        @Autowired\r\n        private ConnectionPoolConfig config;\r\n\r\n\r\nBasically, you:\r\n\r\n - use a specific configuration to `@EnableConfigurationProperties` and `@EnableAutoConfiguration`, listing all the `@ConfigurationProperties` files you want to load\r\n - in the test class, you load this configuration file of tests, with an initializer class defined by Spring to load `application.yml` file.\r\n\r\nAnd, put the values to load in `test/resources/application.yml`. Repetition is unavoidable. If you need load another file, use `@TestProperties()` with a location. **Note**: `@TestProperties` only supports `.properties` files.\r\n\r\n---\r\n\r\nBoth way works for configuration class loading values \r\n\r\n - either from `application.yml`/`application.properties`\r\n - or from another properties file, specified by `PropertySource`, like `@PropertySource(value = &quot;classpath:threadpool.properties&quot;)`\r\n\r\n---\r\n\r\n## Important \r\n\r\nLast notes from Spring doc, as per [here](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties)\r\n\r\n&gt; Some people use Project Lombok to add getters and setters automatically. Make sure that Lombok does not generate any particular constructor for such a type, as it is used automatically by the container to instantiate the object.\r\n&gt; \r\n&gt; Finally, only standard Java Bean properties are considered and binding on static properties is not supported.\r\n\r\nThat means, if you have `lombok.@Builder` **without `@NoArgsConstructor` nor `@AllArgsConstructor`**, properties injection will not happen because it only sees the invisible constructor created by `@Builder`. So, be sure to use none, or all of these annotations!","title":"How to test Classes with @ConfigurationProperties and @Autowired","body":"<p>If you use Spring Boot, now you only need:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n</code></pre>\n\n<p>No extra <code>@ContextConfiguration</code>, no extra class only for tests to <code>EnableAutoConfiguration</code> and <code>EnableConfigurationProperties</code>. You don't have to specify the configuration class to load, they will all be loaded.</p>\n\n<p><strong>But</strong>, ensure the properties entries you want to read in <code>main/resources/application.yml</code> is also present in <code>test/resources/application.yml</code>. Repetition is unavoidable. </p>\n\n<hr>\n\n<p>Another way is:</p>\n\n<ol>\n<li>Define a class of configuration only for tests, along with <code>MyApplicationTest.java</code>, at the same level. This class can be empty.</li>\n</ol>\n\n<p>Like:</p>\n\n<pre><code>@EnableAutoConfiguration\n@EnableConfigurationProperties(value = {\n        ConnectionPoolConfig.class\n})\npublic class MyApplicationTestConfiguration {\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>And, in the class to load the autowired configuration.</li>\n</ol>\n\n<p>Like:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n//@SpringBootTest // the first, easy way\n@ContextConfiguration(classes = MyApplicationTestConfiguration.class,\n        initializers = ConfigFileApplicationContextInitializer.class)\npublic class ConnectionPoolConfigTest {\n\n    @Autowired\n    private ConnectionPoolConfig config;\n</code></pre>\n\n<p>Basically, you:</p>\n\n<ul>\n<li>use a specific configuration to <code>@EnableConfigurationProperties</code> and <code>@EnableAutoConfiguration</code>, listing all the <code>@ConfigurationProperties</code> files you want to load</li>\n<li>in the test class, you load this configuration file of tests, with an initializer class defined by Spring to load <code>application.yml</code> file.</li>\n</ul>\n\n<p>And, put the values to load in <code>test/resources/application.yml</code>. Repetition is unavoidable. If you need load another file, use <code>@TestProperties()</code> with a location. <strong>Note</strong>: <code>@TestProperties</code> only supports <code>.properties</code> files.</p>\n\n<hr>\n\n<p>Both way works for configuration class loading values </p>\n\n<ul>\n<li>either from <code>application.yml</code>/<code>application.properties</code></li>\n<li>or from another properties file, specified by <code>PropertySource</code>, like <code>@PropertySource(value = \"classpath:threadpool.properties\")</code></li>\n</ul>\n\n<hr>\n\n<h2>Important</h2>\n\n<p>Last notes from Spring doc, as per <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties\" rel=\"noreferrer\">here</a></p>\n\n<blockquote>\n  <p>Some people use Project Lombok to add getters and setters automatically. Make sure that Lombok does not generate any particular constructor for such a type, as it is used automatically by the container to instantiate the object.</p>\n  \n  <p>Finally, only standard Java Bean properties are considered and binding on static properties is not supported.</p>\n</blockquote>\n\n<p>That means, if you have <code>lombok.@Builder</code> <strong>without <code>@NoArgsConstructor</code> nor <code>@AllArgsConstructor</code></strong>, properties injection will not happen because it only sees the invisible constructor created by <code>@Builder</code>. So, be sure to use none, or all of these annotations!</p>\n"},{"tags":[],"owner":{"account_id":10812177,"reputation":2398,"user_id":7952453,"display_name":"Gustavo Passini"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1601318113,"creation_date":1601318113,"answer_id":64107774,"question_id":31745168,"body_markdown":"# Unit test\r\n\r\nTo avoid having to load a Spring context, we can use the `Binder` class, which is also [used internally][1] by Spring anyway.\r\n\r\n```java\r\n// A map of my properties.\r\nMap&lt;String, String&gt; properties = new HashMap&lt;&gt;();\r\nproperties.put(&quot;my-prefix.first-property&quot;, &quot;foo&quot;);\r\nproperties.put(&quot;my-prefix.second-property&quot;, &quot;bar&quot;);\r\n\r\n// Creates a source backed by my map, you can chose another type of source as needed.\r\nConfigurationPropertySource source = new MapConfigurationPropertySource(properties)\r\n\r\n// Binds my properties to a class that maps them.\r\nBinder binder = new Binder(source);\r\nBindResult&lt;MyConfiguration&gt; result = binder.bind(&quot;my-prefix&quot;, MyConfiguration.class);\r\n\r\n// Should return true if bound successfully.\r\nAssertions.assertTrue(result.isBound);\r\n\r\n// Asserts configuration values.\r\nMyConfiguration config = result.get();\r\nAssertions.assertEquals(&quot;foo&quot;, config.getFirstProperty());\r\nAssertions.assertEquals(&quot;bar&quot;, config.getSecondProperty());\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-loading-yaml","title":"How to test Classes with @ConfigurationProperties and @Autowired","body":"<h1>Unit test</h1>\n<p>To avoid having to load a Spring context, we can use the <code>Binder</code> class, which is also <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-loading-yaml\" rel=\"nofollow noreferrer\">used internally</a> by Spring anyway.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// A map of my properties.\nMap&lt;String, String&gt; properties = new HashMap&lt;&gt;();\nproperties.put(&quot;my-prefix.first-property&quot;, &quot;foo&quot;);\nproperties.put(&quot;my-prefix.second-property&quot;, &quot;bar&quot;);\n\n// Creates a source backed by my map, you can chose another type of source as needed.\nConfigurationPropertySource source = new MapConfigurationPropertySource(properties)\n\n// Binds my properties to a class that maps them.\nBinder binder = new Binder(source);\nBindResult&lt;MyConfiguration&gt; result = binder.bind(&quot;my-prefix&quot;, MyConfiguration.class);\n\n// Should return true if bound successfully.\nAssertions.assertTrue(result.isBound);\n\n// Asserts configuration values.\nMyConfiguration config = result.get();\nAssertions.assertEquals(&quot;foo&quot;, config.getFirstProperty());\nAssertions.assertEquals(&quot;bar&quot;, config.getSecondProperty());\n</code></pre>\n"}],"owner":{"account_id":5684267,"reputation":1025,"user_id":4494324,"accept_rate":100,"display_name":"IndianerJones"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98087,"favorite_count":0,"down_vote_count":0,"up_vote_count":63,"accepted_answer_id":31748450,"answer_count":5,"score":63,"last_activity_date":1686238854,"creation_date":1438342387,"question_id":31745168,"body_markdown":"I want to test small parts of the application that rely on properties loaded with `@Autowired` and `@ConfigurationProperties`. I am looking for a solution loading only the required properties and not always the whole `ApplicationContext`.\r\nHere as reduced example:\r\n\r\n    @TestPropertySource(locations = &quot;/SettingsTest.properties&quot;)\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(classes = {TestSettings.class, TestConfiguration.class})\r\n    public class SettingsTest {\r\n    \t@Autowired\r\n    \tTestConfiguration config;\r\n    \r\n    \t@Test\r\n    \tpublic void testConfig(){\r\n    \t\tAssert.assertEquals(&quot;TEST_PROPERTY&quot;, config.settings().getProperty());\r\n    \t}\r\n    }\r\n\r\nConfiguration Class:\r\n\r\n    public class TestConfiguration {\r\n    \t@Bean\r\n    \t@ConfigurationProperties(prefix = &quot;test&quot;)\r\n    \tpublic TestSettings settings (){\r\n    \t\treturn new TestSettings();\r\n    \t}\r\n    }\r\n\r\nSettings Class:\r\n\r\n    public class TestSettings {\r\n    \tprivate String property;\r\n    \r\n    \tpublic String getProperty() {\r\n    \t\treturn property;\r\n    \t}\r\n    \r\n    \tpublic void setProperty(String property) {\r\n    \t\tthis.property = property;\r\n    \t}\r\n    }\r\n\r\nThe properties file in the resource folder contains the entry:\r\n\r\n    test.property=TEST_PROPERTY\r\n\r\nIn my current setup config is not null, but no fields are available.\r\nThe reason the fields are not field should have something to do with the fact that I am not using Springboot but Spring.\r\nSo what would be the Springboot way to get this running?\r\n\r\n**edit:** \r\nThe reason why I want to do this is: I have a parser that parses Textfiles, the regular expressions used are stored in a properties file. \r\nTo test this I would like to load only the properties needed for this parser which are in the exaple above the *TestSettings*.\r\n\r\nWhile reading the comments I already noticed that this are no Unit tests anymore. However using the full Spring boot configuration for this small test seems a bit too much to me. That&#39;s why I asked if there is a posibilty to load only the one class with properties.\r\n\r\n\r\n","title":"How to test Classes with @ConfigurationProperties and @Autowired","body":"<p>I want to test small parts of the application that rely on properties loaded with <code>@Autowired</code> and <code>@ConfigurationProperties</code>. I am looking for a solution loading only the required properties and not always the whole <code>ApplicationContext</code>.\nHere as reduced example:</p>\n\n<pre><code>@TestPropertySource(locations = \"/SettingsTest.properties\")\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = {TestSettings.class, TestConfiguration.class})\npublic class SettingsTest {\n    @Autowired\n    TestConfiguration config;\n\n    @Test\n    public void testConfig(){\n        Assert.assertEquals(\"TEST_PROPERTY\", config.settings().getProperty());\n    }\n}\n</code></pre>\n\n<p>Configuration Class:</p>\n\n<pre><code>public class TestConfiguration {\n    @Bean\n    @ConfigurationProperties(prefix = \"test\")\n    public TestSettings settings (){\n        return new TestSettings();\n    }\n}\n</code></pre>\n\n<p>Settings Class:</p>\n\n<pre><code>public class TestSettings {\n    private String property;\n\n    public String getProperty() {\n        return property;\n    }\n\n    public void setProperty(String property) {\n        this.property = property;\n    }\n}\n</code></pre>\n\n<p>The properties file in the resource folder contains the entry:</p>\n\n<pre><code>test.property=TEST_PROPERTY\n</code></pre>\n\n<p>In my current setup config is not null, but no fields are available.\nThe reason the fields are not field should have something to do with the fact that I am not using Springboot but Spring.\nSo what would be the Springboot way to get this running?</p>\n\n<p><strong>edit:</strong> \nThe reason why I want to do this is: I have a parser that parses Textfiles, the regular expressions used are stored in a properties file. \nTo test this I would like to load only the properties needed for this parser which are in the exaple above the <em>TestSettings</em>.</p>\n\n<p>While reading the comments I already noticed that this are no Unit tests anymore. However using the full Spring boot configuration for this small test seems a bit too much to me. That's why I asked if there is a posibilty to load only the one class with properties.</p>\n"},{"tags":["java","php","telegram","whatsapp","wechat"],"answers":[{"comments":[{"owner":{"account_id":12428547,"reputation":1112,"user_id":9052139,"display_name":"RagAnt"},"score":0,"creation_date":1581340634,"post_id":60145168,"comment_id":106388307,"body_markdown":"I successfully implemented using HTML parsing","body":"I successfully implemented using HTML parsing"},{"owner":{"account_id":12428547,"reputation":1112,"user_id":9052139,"display_name":"RagAnt"},"score":0,"creation_date":1581340652,"post_id":60145168,"comment_id":106388314,"body_markdown":"How to do this in Telegram and wechat ?","body":"How to do this in Telegram and wechat ?"}],"tags":[],"owner":{"account_id":3868372,"reputation":4436,"user_id":3204335,"display_name":"MD Ruhul Amin"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581316418,"creation_date":1581316418,"answer_id":60145168,"question_id":60145019,"body_markdown":"If you already know the **group id** then you can parse/extract group name and image/icon from the Html content of the group link:\r\n\r\nGroup linK:\r\n```\r\nhttps://chat.whatsapp.com/&lt;group_ID&gt;\r\n```\r\nexample: https://chat.whatsapp.com/Dv2u7cKtGu1Lcg0onb57NV\r\n\r\nYou can also go thorough these whatsapp API: https://developers.facebook.com/docs/whatsapp/api/groups#retrieve\r\n\r\n","title":"How to retrive the banner image and title for a whatsapp , telegram and wechat group from its group link?","body":"<p>If you already know the <strong>group id</strong> then you can parse/extract group name and image/icon from the Html content of the group link:</p>\n\n<p>Group linK:</p>\n\n<pre><code>https://chat.whatsapp.com/&lt;group_ID&gt;\n</code></pre>\n\n<p>example: <a href=\"https://chat.whatsapp.com/Dv2u7cKtGu1Lcg0onb57NV\" rel=\"nofollow noreferrer\">https://chat.whatsapp.com/Dv2u7cKtGu1Lcg0onb57NV</a></p>\n\n<p>You can also go thorough these whatsapp API: <a href=\"https://developers.facebook.com/docs/whatsapp/api/groups#retrieve\" rel=\"nofollow noreferrer\">https://developers.facebook.com/docs/whatsapp/api/groups#retrieve</a></p>\n"}],"owner":{"account_id":12428547,"reputation":1112,"user_id":9052139,"display_name":"RagAnt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":422,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686238481,"creation_date":1581315661,"question_id":60145019,"body_markdown":"I am developing a whatsapp + telegram +wechat group listing app \r\n\r\nIn existing online group listing web sites , like http://groupsor.net , http://wpgroups.net .....\r\n\r\nWhen I enter whatsapp group link in add new group form ,they automatically showing the group banner image and title \r\n\r\n[![banner auto retrived][1]][1]\r\n\r\n\r\nI want to implement this in my app\r\n\r\nIs there any API for this ?\r\n\r\nPlease suggest me a solution for all chat apps ?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/P6g8B.png","title":"How to retrive the banner image and title for a whatsapp , telegram and wechat group from its group link?","body":"<p>I am developing a whatsapp + telegram +wechat group listing app </p>\n\n<p>In existing online group listing web sites , like <a href=\"http://groupsor.net\" rel=\"nofollow noreferrer\">http://groupsor.net</a> , <a href=\"http://wpgroups.net\" rel=\"nofollow noreferrer\">http://wpgroups.net</a> .....</p>\n\n<p>When I enter whatsapp group link in add new group form ,they automatically showing the group banner image and title </p>\n\n<p><a href=\"https://i.stack.imgur.com/P6g8B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P6g8B.png\" alt=\"banner auto retrived\"></a></p>\n\n<p>I want to implement this in my app</p>\n\n<p>Is there any API for this ?</p>\n\n<p>Please suggest me a solution for all chat apps ?</p>\n"},{"tags":["java","io"],"comments":[{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1358516138,"post_id":14400030,"comment_id":20035087,"body_markdown":"Have you actually tried with Guava?","body":"Have you actually tried with Guava?"},{"owner":{"account_id":1685359,"reputation":3562,"user_id":1548788,"accept_rate":77,"display_name":"Robin"},"score":0,"creation_date":1358516488,"post_id":14400030,"comment_id":20035246,"body_markdown":"@nhahtdh No I didn&#39;t tried the Guava one. But I states to Implement the Unix mv, and the mv won&#39;t overwrite without prompt. http://unixhelp.ed.ac.uk/CGI/man-cgi?mv","body":"@nhahtdh No I didn&#39;t tried the Guava one. But I states to Implement the Unix mv, and the mv won&#39;t overwrite without prompt. <a href=\"http://unixhelp.ed.ac.uk/CGI/man-cgi?mv\" rel=\"nofollow noreferrer\">unixhelp.ed.ac.uk/CGI/man-cgi?mv</a>"}],"answers":[{"comments":[{"owner":{"account_id":1685359,"reputation":3562,"user_id":1548788,"accept_rate":77,"display_name":"Robin"},"score":4,"creation_date":1358516589,"post_id":14400084,"comment_id":20035302,"body_markdown":"Thank you, well this was my first implementation, but my files are quite large. So if the Programm will break after you will delete the firstFile, all your data is lost or spread somewhere. Edit: And this Problem appeared, this is why I am asking. So I need to fix this.","body":"Thank you, well this was my first implementation, but my files are quite large. So if the Programm will break after you will delete the firstFile, all your data is lost or spread somewhere. Edit: And this Problem appeared, this is why I am asking. So I need to fix this."},{"owner":{"account_id":360799,"reputation":158,"user_id":702990,"accept_rate":60,"display_name":"Mike"},"score":1,"creation_date":1469712095,"post_id":14400084,"comment_id":64658310,"body_markdown":"I realize this is an old post, but I am currently using this method and it does not overwrite as the author requested, which is also why I&#39;m replacing it","body":"I realize this is an old post, but I am currently using this method and it does not overwrite as the author requested, which is also why I&#39;m replacing it"}],"tags":[],"owner":{"account_id":2141983,"reputation":4309,"user_id":1900417,"accept_rate":75,"display_name":"Donato Szilagyi"},"comment_count":2,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1359535625,"creation_date":1358516150,"answer_id":14400084,"question_id":14400030,"body_markdown":"I use the following method:\r\n\r\n    public static void rename(String oldFileName, String newFileName) {\r\n    \tnew File(newFileName).delete();\r\n    \tFile oldFile = new File(oldFileName);\r\n    \toldFile.renameTo(new File(newFileName));\r\n    }\r\n\r\n","title":"Is there an operation to move and overwrite files?","body":"<p>I use the following method:</p>\n\n<pre><code>public static void rename(String oldFileName, String newFileName) {\n    new File(newFileName).delete();\n    File oldFile = new File(oldFileName);\n    oldFile.renameTo(new File(newFileName));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1685359,"reputation":3562,"user_id":1548788,"accept_rate":77,"display_name":"Robin"},"score":0,"creation_date":1358516650,"post_id":14400166,"comment_id":20035338,"body_markdown":"Thank you for the link, but I was hoping for a existing solutions.","body":"Thank you for the link, but I was hoping for a existing solutions."}],"tags":[],"owner":{"account_id":2255327,"reputation":784,"user_id":1986632,"display_name":"maksim_khokhlov"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358516428,"creation_date":1358516428,"answer_id":14400166,"question_id":14400030,"body_markdown":"In case you will proceed writing your own utility, you may want to take a look at [implementation][1] of the `copy` task in Ant since it supports overwriting.\r\n\r\n\r\n  [1]: http://svn.apache.org/repos/asf/ant/core/tags/ANT_170/src/main/org/apache/tools/ant/taskdefs/Copy.java","title":"Is there an operation to move and overwrite files?","body":"<p>In case you will proceed writing your own utility, you may want to take a look at <a href=\"http://svn.apache.org/repos/asf/ant/core/tags/ANT_170/src/main/org/apache/tools/ant/taskdefs/Copy.java\" rel=\"nofollow\">implementation</a> of the <code>copy</code> task in Ant since it supports overwriting.</p>\n"},{"comments":[{"owner":{"account_id":5858141,"reputation":325,"user_id":4614769,"accept_rate":60,"display_name":"hasnain_ahmad"},"score":0,"creation_date":1573570242,"post_id":14400730,"comment_id":103919181,"body_markdown":"What is `CSVUtils`?","body":"What is <code>CSVUtils</code>?"},{"owner":{"account_id":1685359,"reputation":3562,"user_id":1548788,"accept_rate":77,"display_name":"Robin"},"score":0,"creation_date":1573659099,"post_id":14400730,"comment_id":103954958,"body_markdown":"The name of that class. These are static methods.","body":"The name of that class. These are static methods."}],"tags":[],"owner":{"account_id":1685359,"reputation":3562,"user_id":1548788,"accept_rate":77,"display_name":"Robin"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1358518453,"creation_date":1358518453,"answer_id":14400730,"question_id":14400030,"body_markdown":"I am finished with writing my own Method, for everybody interested in a possible solution, I used the ApacheCommons FileUtils, also this is probably not perfect, but works well enough for me: \r\n\r\n    /**\r\n     * Will move the source File to the destination File.\r\n     * The Method will backup the dest File, copy source to\r\n     * dest, and then will delete the source and the backup.\r\n     * \r\n     * @param source\r\n     *            File to be moved\r\n     * @param dest\r\n     *            File to be overwritten (does not matter if\r\n     *            non existent)\r\n     * @throws IOException\r\n     */\r\n    public static void moveAndOverwrite(File source, File dest) throws IOException {\r\n    \t// Backup the src\r\n    \tFile backup = CSVUtils.getNonExistingTempFile(dest);\r\n    \tFileUtils.copyFile(dest, backup);\r\n    \tFileUtils.copyFile(source, dest);\r\n    \tif (!source.delete()) {\r\n    \t\tthrow new IOException(&quot;Failed to delete &quot; + source.getName());\r\n    \t}\r\n    \tif (!backup.delete()) {\r\n    \t\tthrow new IOException(&quot;Failed to delete &quot; + backup.getName());\r\n    \t}\r\n    }\r\n    \r\n    /**\r\n     * Recursive Method to generate a FileName in the same\r\n     * Folder as the {@code inputFile}, that is not existing\r\n     * and ends with {@code _temp}.\r\n     * \r\n     * @param inputFile\r\n     *            The FileBase to generate a Tempfile\r\n     * @return A non existing File\r\n     */\r\n    public static File getNonExistingTempFile(File inputFile) {\r\n    \tFile tempFile = new File(inputFile.getParentFile(), inputFile.getName() + &quot;_temp&quot;);\r\n    \tif (tempFile.exists()) {\r\n    \t\treturn CSVUtils.getNonExistingTempFile(tempFile);\r\n    \t} else {\r\n    \t\treturn tempFile;\r\n    \t}\r\n    }","title":"Is there an operation to move and overwrite files?","body":"<p>I am finished with writing my own Method, for everybody interested in a possible solution, I used the ApacheCommons FileUtils, also this is probably not perfect, but works well enough for me: </p>\n\n<pre><code>/**\n * Will move the source File to the destination File.\n * The Method will backup the dest File, copy source to\n * dest, and then will delete the source and the backup.\n * \n * @param source\n *            File to be moved\n * @param dest\n *            File to be overwritten (does not matter if\n *            non existent)\n * @throws IOException\n */\npublic static void moveAndOverwrite(File source, File dest) throws IOException {\n    // Backup the src\n    File backup = CSVUtils.getNonExistingTempFile(dest);\n    FileUtils.copyFile(dest, backup);\n    FileUtils.copyFile(source, dest);\n    if (!source.delete()) {\n        throw new IOException(\"Failed to delete \" + source.getName());\n    }\n    if (!backup.delete()) {\n        throw new IOException(\"Failed to delete \" + backup.getName());\n    }\n}\n\n/**\n * Recursive Method to generate a FileName in the same\n * Folder as the {@code inputFile}, that is not existing\n * and ends with {@code _temp}.\n * \n * @param inputFile\n *            The FileBase to generate a Tempfile\n * @return A non existing File\n */\npublic static File getNonExistingTempFile(File inputFile) {\n    File tempFile = new File(inputFile.getParentFile(), inputFile.getName() + \"_temp\");\n    if (tempFile.exists()) {\n        return CSVUtils.getNonExistingTempFile(tempFile);\n    } else {\n        return tempFile;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":319361,"reputation":448,"user_id":637096,"display_name":"Tommy Ng"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1407479344,"creation_date":1407479344,"answer_id":25197237,"question_id":14400030,"body_markdown":"Using Apache Commons FileUtils : \r\n\r\n      try {\t\t\t\r\n\t\t\tFileUtils.moveFile(source, dest);\r\n\t\t\tprint(&quot;------------------------------&quot;);\r\n\t\t\tprint(name\r\n\t\t\t\t\t+ &quot; moved to &quot;\r\n\t\t\t\t\t+ PropertiesUtil\r\n\t\t\t\t\t\t\t.getProperty(PropertiesUtil.COMPLETED_PATH));\r\n\t\t\r\n\t\t} catch (FileExistsException fe){\r\n\t\t\t\r\n\t\t\tif(dest.delete()){\r\n\t\t\t\ttry {\r\n\t\t\t\t\tFileUtils.moveFile(source, dest);\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\tlogger.error(e);\r\n\t\t\t\t}\r\n\t\t\t\tprint(&quot;------------------------------&quot;);\r\n\t\t\t\tprint(name\r\n\t\t\t\t\t\t+ &quot; moved to &quot;\r\n\t\t\t\t\t\t+ PropertiesUtil\r\n\t\t\t\t\t\t\t\t.getProperty(PropertiesUtil.COMPLETED_PATH));\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\r\n\t\t\tlogger.error(e);\r\n\t\t}","title":"Is there an operation to move and overwrite files?","body":"<p>Using Apache Commons FileUtils : </p>\n\n<pre><code>  try {         \n        FileUtils.moveFile(source, dest);\n        print(\"------------------------------\");\n        print(name\n                + \" moved to \"\n                + PropertiesUtil\n                        .getProperty(PropertiesUtil.COMPLETED_PATH));\n\n    } catch (FileExistsException fe){\n\n        if(dest.delete()){\n            try {\n                FileUtils.moveFile(source, dest);\n            } catch (IOException e) {\n                logger.error(e);\n            }\n            print(\"------------------------------\");\n            print(name\n                    + \" moved to \"\n                    + PropertiesUtil\n                            .getProperty(PropertiesUtil.COMPLETED_PATH));\n        }\n    } catch (Exception e) {\n\n        logger.error(e);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":129048,"reputation":1142,"user_id":327335,"display_name":"gersonZaragocin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1623900901,"creation_date":1422487800,"answer_id":28204406,"question_id":14400030,"body_markdown":"A **pure Java nio solution** move with overriding method could be implemented with a pre-delete target as shown\r\n\r\n    public void move(File sourceFile, String targetFileName) {\r\n        Path sourcePath = sourceFile.toPath();\r\n        Path targetPath = Paths.get(targetFileName);\r\n        File file = targetFile.toFile();\r\n        if(file.isFile()){\r\n            Files.delete(targetPath);\r\n        }\r\n        Files.move(sourcePath, targetPath);\r\n    }\r\n","title":"Is there an operation to move and overwrite files?","body":"<p>A <strong>pure Java nio solution</strong> move with overriding method could be implemented with a pre-delete target as shown</p>\n<pre><code>public void move(File sourceFile, String targetFileName) {\n    Path sourcePath = sourceFile.toPath();\n    Path targetPath = Paths.get(targetFileName);\n    File file = targetFile.toFile();\n    if(file.isFile()){\n        Files.delete(targetPath);\n    }\n    Files.move(sourcePath, targetPath);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2533709,"reputation":1497,"user_id":2201382,"accept_rate":93,"display_name":"Abu Sulaiman"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1431526197,"creation_date":1431525815,"answer_id":30217240,"question_id":14400030,"body_markdown":"Apache FileUtils JavaDoc for FileUtils.copyFileToDirectory says, &quot;If the destination file exists, then this method will overwrite it.&quot; After the copy, you could verify before deleting.     \r\n\r\n    public boolean moveFile(File origfile, File destfile)\r\n    {\r\n        boolean fileMoved = false;\r\n        try{\r\n        FileUtils.copyFileToDirectory(origfile,new File(destfile.getParent()),true);\r\n        File newfile = new File(destfile.getParent() + File.separator + origfile.getName());\r\n        if(newfile.exists() &amp;&amp; FileUtils.contentEqualsIgnoreCaseEOL(origfile,newfile,&quot;UTF-8&quot;))\r\n        {\r\n            origfile.delete();\r\n            fileMoved = true;\r\n        }\r\n        else\r\n        {\r\n            System.out.println(&quot;File fail to move successfully!&quot;);\r\n        }\r\n        }catch(Exception e){System.out.println(e);}\r\n        return fileMoved;\r\n    }\r\n","title":"Is there an operation to move and overwrite files?","body":"<p>Apache FileUtils JavaDoc for FileUtils.copyFileToDirectory says, \"If the destination file exists, then this method will overwrite it.\" After the copy, you could verify before deleting.     </p>\n\n<pre><code>public boolean moveFile(File origfile, File destfile)\n{\n    boolean fileMoved = false;\n    try{\n    FileUtils.copyFileToDirectory(origfile,new File(destfile.getParent()),true);\n    File newfile = new File(destfile.getParent() + File.separator + origfile.getName());\n    if(newfile.exists() &amp;&amp; FileUtils.contentEqualsIgnoreCaseEOL(origfile,newfile,\"UTF-8\"))\n    {\n        origfile.delete();\n        fileMoved = true;\n    }\n    else\n    {\n        System.out.println(\"File fail to move successfully!\");\n    }\n    }catch(Exception e){System.out.println(e);}\n    return fileMoved;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7723297,"reputation":1774,"user_id":5848801,"accept_rate":75,"display_name":"Simon Ludwig"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456481085,"creation_date":1456481085,"answer_id":35648710,"question_id":14400030,"body_markdown":"You could also use Tools Like https://xadisk.java.net/ to enable transactional access to existing file systems.\r\n\r\nThere is also an alternative from apache: \r\n\r\nhttps://commons.apache.org/proper/commons-transaction/apidocs/org/apache/commons/transaction/file/FileResourceManager.html","title":"Is there an operation to move and overwrite files?","body":"<p>You could also use Tools Like <a href=\"https://xadisk.java.net/\" rel=\"nofollow\">https://xadisk.java.net/</a> to enable transactional access to existing file systems.</p>\n\n<p>There is also an alternative from apache: </p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-transaction/apidocs/org/apache/commons/transaction/file/FileResourceManager.html\" rel=\"nofollow\">https://commons.apache.org/proper/commons-transaction/apidocs/org/apache/commons/transaction/file/FileResourceManager.html</a></p>\n"},{"comments":[{"owner":{"account_id":1552334,"reputation":113,"user_id":1444446,"display_name":"jmspaggi"},"score":0,"creation_date":1575771610,"post_id":42499985,"comment_id":104676794,"body_markdown":"It&#39;s the same as what the author said above. He can&#39;t delete before moving the file :(","body":"It&#39;s the same as what the author said above. He can&#39;t delete before moving the file :("}],"tags":[],"owner":{"account_id":4295269,"reputation":31,"user_id":3510499,"display_name":"Rajat"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1488254497,"creation_date":1488254497,"answer_id":42499985,"question_id":14400030,"body_markdown":"shortest solution which worked for me :\r\n\r\n    File destFile = new File(destDir, file.getName());\r\n    if(destFile.exists()) {\r\n        destFile.delete();\r\n    }\r\n    FileUtils.moveFileToDirectory(file, destDir, true);\r\n ","title":"Is there an operation to move and overwrite files?","body":"<p>shortest solution which worked for me :</p>\n\n<pre><code>File destFile = new File(destDir, file.getName());\nif(destFile.exists()) {\n    destFile.delete();\n}\nFileUtils.moveFileToDirectory(file, destDir, true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1498838036,"creation_date":1498838036,"answer_id":44850517,"question_id":14400030,"body_markdown":"[Guava][1] [Files.write][2]:\r\n\r\n&gt; Overwrites a file with the contents of a byte array\r\n\r\n    Files.write(bytes, new File(path));\r\n\r\n[Files.copy][3]:\r\n\r\n&gt; Warning: If to represents an existing file, that file will be\r\n&gt; overwritten with the contents of from. If to and from refer to the\r\n&gt; same file, the contents of that file will be deleted.\r\n\r\n[Files.move][4] uses `copy` [under the hood][5]. So its safe to assume it overwrites too.\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://google.github.io/guava/releases/22.0/api/docs/com/google/common/io/Files.html#write-byte:A-java.io.File-\r\n  [3]: https://google.github.io/guava/releases/22.0/api/docs/com/google/common/io/Files.html#copy-java.io.File-java.io.File-\r\n  [4]: https://google.github.io/guava/releases/22.0/api/docs/src-html/com/google/common/io/Files.html#line.489\r\n  [5]: https://github.com/google/guava/blob/master/guava/src/com/google/common/io/Files.java#L489","title":"Is there an operation to move and overwrite files?","body":"<p><a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a> <a href=\"https://google.github.io/guava/releases/22.0/api/docs/com/google/common/io/Files.html#write-byte:A-java.io.File-\" rel=\"nofollow noreferrer\">Files.write</a>:</p>\n\n<blockquote>\n  <p>Overwrites a file with the contents of a byte array</p>\n</blockquote>\n\n<pre><code>Files.write(bytes, new File(path));\n</code></pre>\n\n<p><a href=\"https://google.github.io/guava/releases/22.0/api/docs/com/google/common/io/Files.html#copy-java.io.File-java.io.File-\" rel=\"nofollow noreferrer\">Files.copy</a>:</p>\n\n<blockquote>\n  <p>Warning: If to represents an existing file, that file will be\n  overwritten with the contents of from. If to and from refer to the\n  same file, the contents of that file will be deleted.</p>\n</blockquote>\n\n<p><a href=\"https://google.github.io/guava/releases/22.0/api/docs/src-html/com/google/common/io/Files.html#line.489\" rel=\"nofollow noreferrer\">Files.move</a> uses <code>copy</code> <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/io/Files.java#L489\" rel=\"nofollow noreferrer\">under the hood</a>. So its safe to assume it overwrites too.</p>\n"},{"tags":[],"owner":{"account_id":5938469,"reputation":889,"user_id":4670625,"accept_rate":67,"display_name":"David Marciel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686238411,"creation_date":1686238411,"answer_id":76433505,"question_id":14400030,"body_markdown":"    Files.deleteIfExists(destinationPath);\r\n    Files.move(fileToMove, destinationPath);","title":"Is there an operation to move and overwrite files?","body":"<pre><code>Files.deleteIfExists(destinationPath);\nFiles.move(fileToMove, destinationPath);\n</code></pre>\n"}],"owner":{"account_id":1685359,"reputation":3562,"user_id":1548788,"accept_rate":77,"display_name":"Robin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49413,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":14400730,"answer_count":10,"score":14,"last_activity_date":1686238411,"creation_date":1358515955,"question_id":14400030,"body_markdown":"I am looking for an operation to move and overwrite a File. I know that there is a new Method in [Java7][1], but I was hoping to get around Java7. Also I know about the Methods in [FileUtils][2] and [Guava][3], but the FileUtils won&#39;t overwrite and the Guava one does not document it.\r\n\r\nAlso I am aware, I could write my own Method, well I started, but saw some Problems here and there, so I was hoping for something already done.\r\n\r\nDo you have any suggestions?\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29\r\n  [2]: http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#moveFile%28java.io.File,%20java.io.File%29\r\n  [3]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html#move%28java.io.File,%20java.io.File%29","title":"Is there an operation to move and overwrite files?","body":"<p>I am looking for an operation to move and overwrite a File. I know that there is a new Method in <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29\">Java7</a>, but I was hoping to get around Java7. Also I know about the Methods in <a href=\"http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#moveFile%28java.io.File,%20java.io.File%29\">FileUtils</a> and <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html#move%28java.io.File,%20java.io.File%29\">Guava</a>, but the FileUtils won't overwrite and the Guava one does not document it.</p>\n\n<p>Also I am aware, I could write my own Method, well I started, but saw some Problems here and there, so I was hoping for something already done.</p>\n\n<p>Do you have any suggestions?</p>\n"},{"tags":["java","swing","jtable","jscrollpane","jlayeredpane"],"comments":[{"owner":{"account_id":285919,"reputation":43640,"user_id":584862,"accept_rate":93,"display_name":"mre"},"score":0,"creation_date":1310471380,"post_id":6663591,"comment_id":7878270,"body_markdown":"Why do you want such complicated nesting?","body":"Why do you want such complicated nesting?"},{"owner":{"account_id":3684,"reputation":43315,"user_id":5346,"accept_rate":84,"display_name":"Nick Fortescue"},"score":0,"creation_date":1310471559,"post_id":6663591,"comment_id":7878323,"body_markdown":"I want cells in the JTable to be able to expand to show more information, and for those expansions to stay with the JTable as it scrolls. In the related questions, someone else wanted to be able to lock animations on top of the JTable. When googling other people wanted to use this technique to freeze columns, but that seemed a bit hacky to me, there might be a better way of doing that","body":"I want cells in the JTable to be able to expand to show more information, and for those expansions to stay with the JTable as it scrolls. In the related questions, someone else wanted to be able to lock animations on top of the JTable. When googling other people wanted to use this technique to freeze columns, but that seemed a bit hacky to me, there might be a better way of doing that"},{"owner":{"account_id":9781391,"reputation":358,"user_id":7249306,"display_name":"Denis Abakumov"},"score":0,"creation_date":1686149376,"post_id":6663591,"comment_id":134760083,"body_markdown":"Just throwing in another use case for the topic: a table represents a week calendar, whereas events on the calendar are displayed through the JLayeredPane.","body":"Just throwing in another use case for the topic: a table represents a week calendar, whereas events on the calendar are displayed through the JLayeredPane."}],"answers":[{"tags":[],"owner":{"account_id":3684,"reputation":43315,"user_id":5346,"accept_rate":84,"display_name":"Nick Fortescue"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1686238202,"creation_date":1310471369,"answer_id":6663706,"question_id":6663591,"body_markdown":"Similar but not identical questions which help:\r\nhttps://stackoverflow.com/questions/1456143/java-is-it-possible-to-put-a-jlayeredpane-inside-jscrollpane and https://stackoverflow.com/questions/575782/how-to-display-animation-in-a-jtable-cell and https://stackoverflow.com/questions/4901460/swing-gui-design-with-jscrollpane-and-jlayeredpane.\r\n\r\nTo do this properly there are three separate issues to consider: Sizing, Headers and UI changes.\r\n\r\n&lt;h2&gt; Sizing &lt;/h2&gt;\r\n\r\nTo scroll and paint properly the `JScrollPane` needs to know the size and preferred size of the component inside it, in this case the `JLayeredPane`. But you want the size to be set by the table, as other `Component`s will be floating on top of the table. In this case the easiest way is to make the JLayeredPane delegate size related properties to the `JTable` as follows.\r\n\r\n    final JTable table = new JTable();\r\n    JLayeredPane layers = new JLayeredPane() {\r\n      @Override\r\n      public Dimension getPreferredSize() {\r\n        return table.getPreferredSize();\r\n      }\r\n\r\n      @Override\r\n      public void setSize(int width, int height) {\r\n        super.setSize(width, height);\r\n        table.setSize(width, height);\r\n      }\r\n\r\n      @Override\r\n      public void setSize(Dimension d) {\r\n        super.setSize(d);\r\n        table.setSize(d);\r\n      }\r\n    };\r\n    // NB you must use new Integer() - the int version is a different method\r\n    layers.add(label, new Integer(JLayeredPane.PALETTE_LAYER), 0);\r\n    JScrollPane scrolling = new JScrollPane(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,\r\n                                            JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);\r\n    scrolling.setViewportView(layers);\r\n\r\nIf you didn&#39;t want the `JTable` to be the thing which determines the size of the `JLayeredPane` then it needs to be determined in some other way, and so does the table&#39;s size. Both will need `setPreferredSize()` and `setSize()` called on them explicitly.\r\n\r\n&lt;h2&gt; Headers &lt;/h2&gt;\r\n\r\nAs the JTable is no longer the viewport, you&#39;ll need to link the headers yourself. The following code will work:\r\n\r\n    scrolling.setColumnHeaderView(table.getTableHeader());\r\n    scrolling.setRowHeaderView(rowHeader);\r\n\r\n&lt;h2&gt;UI&lt;/h2&gt;\r\nAlso note that JTable does some nasty code in `configureEnclosingScrollPane()` and `configureEnclosingScrollPaneUI()`. If you want to get UI style changes to work properly, then you&#39;ll have to override these methods, but I haven&#39;t worked out how to do this yet.\r\n\r\n&lt;h2&gt;Code Sample&lt;/h2&gt;\r\n\r\nThe complete code sample is available [over on GitHub][1].\r\n\r\n\r\n  [1]: https://gist.github.com/denisab85/aa08db0132cd21179c0f12f6d5ec5e2d","title":"JTable inside JLayeredPane inside JScrollPane - how do you get it to work?","body":"<p>Similar but not identical questions which help:\n<a href=\"https://stackoverflow.com/questions/1456143/java-is-it-possible-to-put-a-jlayeredpane-inside-jscrollpane\">Java - Is it possible to put a JLayeredPane inside JScrollPane?</a> and <a href=\"https://stackoverflow.com/questions/575782/how-to-display-animation-in-a-jtable-cell\">How to display animation in a JTable cell</a> and <a href=\"https://stackoverflow.com/questions/4901460/swing-gui-design-with-jscrollpane-and-jlayeredpane\">Swing GUI design with JScrollPane and JLayeredPane</a>.</p>\n<p>To do this properly there are three separate issues to consider: Sizing, Headers and UI changes.</p>\n<h2> Sizing </h2>\n<p>To scroll and paint properly the <code>JScrollPane</code> needs to know the size and preferred size of the component inside it, in this case the <code>JLayeredPane</code>. But you want the size to be set by the table, as other <code>Component</code>s will be floating on top of the table. In this case the easiest way is to make the JLayeredPane delegate size related properties to the <code>JTable</code> as follows.</p>\n<pre><code>final JTable table = new JTable();\nJLayeredPane layers = new JLayeredPane() {\n  @Override\n  public Dimension getPreferredSize() {\n    return table.getPreferredSize();\n  }\n\n  @Override\n  public void setSize(int width, int height) {\n    super.setSize(width, height);\n    table.setSize(width, height);\n  }\n\n  @Override\n  public void setSize(Dimension d) {\n    super.setSize(d);\n    table.setSize(d);\n  }\n};\n// NB you must use new Integer() - the int version is a different method\nlayers.add(label, new Integer(JLayeredPane.PALETTE_LAYER), 0);\nJScrollPane scrolling = new JScrollPane(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,\n                                        JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);\nscrolling.setViewportView(layers);\n</code></pre>\n<p>If you didn't want the <code>JTable</code> to be the thing which determines the size of the <code>JLayeredPane</code> then it needs to be determined in some other way, and so does the table's size. Both will need <code>setPreferredSize()</code> and <code>setSize()</code> called on them explicitly.</p>\n<h2> Headers </h2>\n<p>As the JTable is no longer the viewport, you'll need to link the headers yourself. The following code will work:</p>\n<pre><code>scrolling.setColumnHeaderView(table.getTableHeader());\nscrolling.setRowHeaderView(rowHeader);\n</code></pre>\n<h2>UI</h2>\nAlso note that JTable does some nasty code in `configureEnclosingScrollPane()` and `configureEnclosingScrollPaneUI()`. If you want to get UI style changes to work properly, then you'll have to override these methods, but I haven't worked out how to do this yet.\n<h2>Code Sample</h2>\n<p>The complete code sample is available <a href=\"https://gist.github.com/denisab85/aa08db0132cd21179c0f12f6d5ec5e2d\" rel=\"nofollow noreferrer\">over on GitHub</a>.</p>\n"}],"owner":{"account_id":3684,"reputation":43315,"user_id":5346,"accept_rate":84,"display_name":"Nick Fortescue"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1259,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1686238202,"creation_date":1310470728,"question_id":6663591,"body_markdown":"I want to put objects coming out of a JTable, layered on top of it, so using a JLayeredPane seems natural. However, getting this to paint properly, do the headers properly etc is very hard. How do I do this so that:\r\n\r\n  - The Row headers appear and match up when it scrolls\r\n  - The column headers appear and match up when it scrolls\r\n  - The table paints properly\r\n  - resizing doesn&#39;t mess everything up\r\n\r\nNote that because `JDesktopPane` extends `JLayeredPane`, the answers to this question also allow you to have a `JTable` (or any other component) behind a `JDesktopPane`.","title":"JTable inside JLayeredPane inside JScrollPane - how do you get it to work?","body":"<p>I want to put objects coming out of a JTable, layered on top of it, so using a JLayeredPane seems natural. However, getting this to paint properly, do the headers properly etc is very hard. How do I do this so that:</p>\n\n<ul>\n<li>The Row headers appear and match up when it scrolls</li>\n<li>The column headers appear and match up when it scrolls</li>\n<li>The table paints properly</li>\n<li>resizing doesn't mess everything up</li>\n</ul>\n\n<p>Note that because <code>JDesktopPane</code> extends <code>JLayeredPane</code>, the answers to this question also allow you to have a <code>JTable</code> (or any other component) behind a <code>JDesktopPane</code>.</p>\n"},{"tags":["java","math"],"answers":[{"comments":[{"owner":{"account_id":4882426,"reputation":2088,"user_id":3935776,"display_name":"Smith_61"},"score":2,"creation_date":1422477108,"post_id":28201691,"comment_id":44769826,"body_markdown":"Unfortunatly Math.pow only provides a method for doubles. Which isn&#39;t bad when you have doubles, but causes unneeded overhead when using any integer type.","body":"Unfortunatly Math.pow only provides a method for doubles. Which isn&#39;t bad when you have doubles, but causes unneeded overhead when using any integer type."}],"tags":[],"owner":{"account_id":212518,"reputation":43399,"user_id":465378,"accept_rate":85,"display_name":"Alexis King"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1422476578,"creation_date":1422476578,"answer_id":28201691,"question_id":28201656,"body_markdown":"Just maintain a variable and multiply it on each iteration?\r\n\r\n    int x = 1;\r\n    for (int i = 0; i &lt; 5; i++)\r\n    {\r\n        x *= 10;\r\n        // do something with x\r\n    }\r\n\r\n However, I&#39;d recommend using `Math.pow` if you don&#39;t need the intermediate values. It&#39;ll be just as fast as that if not faster for some cases.","title":"Java code increment values by 1, 10, 100, 1000, etc","body":"<p>Just maintain a variable and multiply it on each iteration?</p>\n\n<pre><code>int x = 1;\nfor (int i = 0; i &lt; 5; i++)\n{\n    x *= 10;\n    // do something with x\n}\n</code></pre>\n\n<p>However, I'd recommend using <code>Math.pow</code> if you don't need the intermediate values. It'll be just as fast as that if not faster for some cases.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1422477022,"creation_date":1422477022,"answer_id":28201816,"question_id":28201656,"body_markdown":"You can do plain iteration.\r\n\r\n    for (int i = 1 ; i &lt;= 100000; i *= 10) {\r\n","title":"Java code increment values by 1, 10, 100, 1000, etc","body":"<p>You can do plain iteration.</p>\n\n<pre><code>for (int i = 1 ; i &lt;= 100000; i *= 10) {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28777559,"reputation":1,"user_id":22039825,"display_name":"Manish Patil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686238142,"creation_date":1686222593,"answer_id":76431220,"question_id":28201656,"body_markdown":"```\r\npublic class PrgmSrs20 {\r\n\tpublic static void main(String[] args) {\r\n\t\tfor (int i = 1; i &lt;= 100000; i=i*10) {\r\n\t\t\tSystem.out.print(i+&quot; &quot;);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n","title":"Java code increment values by 1, 10, 100, 1000, etc","body":"<pre><code>public class PrgmSrs20 {\n    public static void main(String[] args) {\n        for (int i = 1; i &lt;= 100000; i=i*10) {\n            System.out.print(i+&quot; &quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":392397,"reputation":28086,"user_id":753632,"accept_rate":57,"display_name":"Johann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5385,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"accepted_answer_id":28201691,"answer_count":3,"score":-1,"last_activity_date":1686238142,"creation_date":1422476485,"question_id":28201656,"body_markdown":"I&#39;m trying to figure out the most efficient way of incrementing a value of a variable by the power of 10 in a loop. For example:\r\n\r\n    int x = 0;\r\n    \r\n    for (int i = 0; i &lt; 5; i++)\r\n    {\r\n      // 1st time x = 1, 2nd time x = 10, 3rd time x = 100, 4th time x = 1000\r\n    } \r\n\r\nI want to avoid using the pow function because that appears to have higher performance than some simpler multiplication method.","title":"Java code increment values by 1, 10, 100, 1000, etc","body":"<p>I'm trying to figure out the most efficient way of incrementing a value of a variable by the power of 10 in a loop. For example:</p>\n\n<pre><code>int x = 0;\n\nfor (int i = 0; i &lt; 5; i++)\n{\n  // 1st time x = 1, 2nd time x = 10, 3rd time x = 100, 4th time x = 1000\n} \n</code></pre>\n\n<p>I want to avoid using the pow function because that appears to have higher performance than some simpler multiplication method.</p>\n"},{"tags":["java","spring","spring-mvc","java-11","java-17"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1686239805,"post_id":76433459,"comment_id":134775015,"body_markdown":"The problem is that Spring uses cglib to rewrite Java bytecode on-the-fly at runtime and, as you said, the internal APIs it uses are protected in more recent versions of the JVM. This is much more than just running &quot;earlier versions of Java code.&quot; I&#39;m pretty sure that newer versions of Spring use newer versions of either cglib or other bytecode-rewriting libraries that do work on newer JVMs. Is there some reason you are stuck on a version of Spring from 2015?","body":"The problem is that Spring uses cglib to rewrite Java bytecode on-the-fly at runtime and, as you said, the internal APIs it uses are protected in more recent versions of the JVM. This is much more than just running &quot;earlier versions of Java code.&quot; I&#39;m pretty sure that newer versions of Spring use newer versions of either cglib or other bytecode-rewriting libraries that do work on newer JVMs. Is there some reason you are stuck on a version of Spring from 2015?"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1686239837,"post_id":76433459,"comment_id":134775022,"body_markdown":"[This question and answer](https://stackoverflow.com/a/67006749/636009) have some additional details that might help to clarify matters.","body":"<a href=\"https://stackoverflow.com/a/67006749/636009\">This question and answer</a> have some additional details that might help to clarify matters."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1686240308,"post_id":76433459,"comment_id":134775109,"body_markdown":"It is not an issue with the target of your project. The spring version you use is not compatible with Java 17.","body":"It is not an issue with the target of your project. The spring version you use is not compatible with Java 17."},{"owner":{"account_id":1714518,"reputation":1611,"user_id":1571903,"accept_rate":72,"display_name":"Ryan Griffith"},"score":0,"creation_date":1686240655,"post_id":76433459,"comment_id":134775187,"body_markdown":"@DavidConrad, upgrading a major Spring version is out of the question. This project is being decommissioned but we&#39;re doing one last upgrade for security reasons.","body":"@DavidConrad, upgrading a major Spring version is out of the question. This project is being decommissioned but we&#39;re doing one last upgrade for security reasons."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1686240871,"post_id":76433459,"comment_id":134775234,"body_markdown":"Unfortunately, then, your question becomes, &quot;How can I run this version of Spring, which is not compatible with Java 17, on Java 17?&quot;","body":"Unfortunately, then, your question becomes, &quot;How can I run this version of Spring, which is not compatible with Java 17, on Java 17?&quot;"},{"owner":{"account_id":1714518,"reputation":1611,"user_id":1571903,"accept_rate":72,"display_name":"Ryan Griffith"},"score":0,"creation_date":1686240971,"post_id":76433459,"comment_id":134775250,"body_markdown":"@DavidConrad, I understand the reason why `cglib` is not working if I were compiling against Java 17. I&#39;m trying to understand the rules about how a newer JDK imposes conditions on earlier versions of Java whether those are conditions **during compilation** against earlier versions or conditions against **running** earlier versions. The confusion comes from my understanding that &quot;Newer versions of Java should be able to run earlier versions of Java&quot;.","body":"@DavidConrad, I understand the reason why <code>cglib</code> is not working if I were compiling against Java 17. I&#39;m trying to understand the rules about how a newer JDK imposes conditions on earlier versions of Java whether those are conditions <b>during compilation</b> against earlier versions or conditions against <b>running</b> earlier versions. The confusion comes from my understanding that &quot;Newer versions of Java should be able to run earlier versions of Java&quot;."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1686240975,"post_id":76433459,"comment_id":134775251,"body_markdown":"The [Wildfly 26 release notes](https://www.wildfly.org/news/2021/12/16/WildFly26-Final-Released/) state that it has been tested on Java 11.","body":"The <a href=\"https://www.wildfly.org/news/2021/12/16/WildFly26-Final-Released/\" rel=\"nofollow noreferrer\">Wildfly 26 release notes</a> state that it has been tested on Java 11."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686243081,"post_id":76433459,"comment_id":134775677,"body_markdown":"I understand &quot;to run earlier versions of Java&quot; as being backwards compatible in execution of Java bytecode compiled with a previous version. That works for sure. However if said code has assumptions on features or standard libraries that have changed over the releases then it may hit issues at execution time. This is exactly what is happening. You are lucky if the issues will happen at compile time. Much easier to detect. This is an execution time issue though.","body":"I understand &quot;to run earlier versions of Java&quot; as being backwards compatible in execution of Java bytecode compiled with a previous version. That works for sure. However if said code has assumptions on features or standard libraries that have changed over the releases then it may hit issues at execution time. This is exactly what is happening. You are lucky if the issues will happen at compile time. Much easier to detect. This is an execution time issue though."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686243242,"post_id":76433459,"comment_id":134775705,"body_markdown":"As an example you can use JDK 17, target JDK 11 and use a class or method only available since JDK 12+. It will compile just fine, and it will execute, but it will throw a class not found/method not found exception when trying to use that missing class/method. That&#39;s because the library it was built to was the newer JDK one. The target is only the bytecode compatibility.","body":"As an example you can use JDK 17, target JDK 11 and use a class or method only available since JDK 12+. It will compile just fine, and it will execute, but it will throw a class not found/method not found exception when trying to use that missing class/method. That&#39;s because the library it was built to was the newer JDK one. The target is only the bytecode compatibility."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":1,"creation_date":1686250319,"post_id":76433459,"comment_id":134777045,"body_markdown":"The backwards compatibility only goes for Java, the specification. Internal APIs are not part of the specification, so they are not included in the backwards compatibility guarantee. Essentially, if a library uses internal APIs, it is tied to a particular JDK build.","body":"The backwards compatibility only goes for Java, the specification. Internal APIs are not part of the specification, so they are not included in the backwards compatibility guarantee. Essentially, if a library uses internal APIs, it is tied to a particular JDK build."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":2,"creation_date":1686250396,"post_id":76433459,"comment_id":134777053,"body_markdown":"@aled &quot;As an example you can use JDK 17, target JDK 11 and use a class or method only available since JDK 12+. It will compile just fine&quot; this depends on whether you&#39;re properly setting the boot class path. The `--release` flag was added to prevent mistakes in that area. So, if you compile using JDK 17 and `--release 11`, then you won&#39;t be able to access Java 12+ APIs.","body":"@aled &quot;As an example you can use JDK 17, target JDK 11 and use a class or method only available since JDK 12+. It will compile just fine&quot; this depends on whether you&#39;re properly setting the boot class path. The <code>--release</code> flag was added to prevent mistakes in that area. So, if you compile using JDK 17 and <code>--release 11</code>, then you won&#39;t be able to access Java 12+ APIs."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686250886,"post_id":76433459,"comment_id":134777106,"body_markdown":"@JornVernee Thanks for pointing that out. More information can be find in the answers to https://stackoverflow.com/questions/43102787/what-is-the-release-flag-in-the-java-9-compiler. I just want to clarify that this only applies to the example I mentioned and would not solve the issue the OP has at execution time.","body":"@JornVernee Thanks for pointing that out. More information can be find in the answers to <a href=\"https://stackoverflow.com/questions/43102787/what-is-the-release-flag-in-the-java-9-compiler\" title=\"what is the release flag in the java 9 compiler\">stackoverflow.com/questions/43102787/&hellip;</a>. I just want to clarify that this only applies to the example I mentioned and would not solve the issue the OP has at execution time."}],"owner":{"account_id":1714518,"reputation":1611,"user_id":1571903,"accept_rate":72,"display_name":"Ryan Griffith"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3338,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686238057,"creation_date":1686238057,"question_id":76433459,"body_markdown":"I have a Spring Framework 4.2 project that I can successfully compile with JDK 11 and run with Wildfly that is utilizing Java 11.\r\n\r\nI&#39;m looking at upgrading to use Wildfly v26 which utilizes Java 17. Seems like it would work since newer versions of Java are supposed to be able to run code compiled against earlier versions of Java.\r\n\r\nMy skepticism about this particular project comes from the fact that if I use JDK 17 and attempt to compile my project against Java 11 (via Maven), I get errors related to `cglib` which is part of Spring Framework.\r\n\r\nFrom what I understand, `cglib` calls internal functions that are not publicly accessible and Java 17 [doesn&#39;t support that][1]. \r\n\r\n**So, I&#39;m lacking some understanding here:** the Java 17 JRE is supposed to be able to run earlier versions of Java code (as far as I understand), however my JDK 17 can&#39;t seem to compile code targeting Java 11. I thought this is a capability we&#39;re supposed to have - compiling code for earlier versions with newer versions of the JDK. Perhaps this is one of those edge case scenarios where the actual issue would require a compilation using JDK 11 and then, and only then, would it be able to run with JRE 17.\r\n\r\n**So, the overarching question is:** Can I get my code targeting Java 11 to run (in ANY way)  with Java 17 given this particular issue? \r\n\r\nBonus question: What about the compatibility between a JDK, compilation target and runability am I misunderstanding here?\r\n\r\n  [1]: https://github.com/cglib/cglib/issues/191","title":"Compatibility between JDK 17 and Java 11 when it comes to running vs. compiling","body":"<p>I have a Spring Framework 4.2 project that I can successfully compile with JDK 11 and run with Wildfly that is utilizing Java 11.</p>\n<p>I'm looking at upgrading to use Wildfly v26 which utilizes Java 17. Seems like it would work since newer versions of Java are supposed to be able to run code compiled against earlier versions of Java.</p>\n<p>My skepticism about this particular project comes from the fact that if I use JDK 17 and attempt to compile my project against Java 11 (via Maven), I get errors related to <code>cglib</code> which is part of Spring Framework.</p>\n<p>From what I understand, <code>cglib</code> calls internal functions that are not publicly accessible and Java 17 <a href=\"https://github.com/cglib/cglib/issues/191\" rel=\"nofollow noreferrer\">doesn't support that</a>.</p>\n<p><strong>So, I'm lacking some understanding here:</strong> the Java 17 JRE is supposed to be able to run earlier versions of Java code (as far as I understand), however my JDK 17 can't seem to compile code targeting Java 11. I thought this is a capability we're supposed to have - compiling code for earlier versions with newer versions of the JDK. Perhaps this is one of those edge case scenarios where the actual issue would require a compilation using JDK 11 and then, and only then, would it be able to run with JRE 17.</p>\n<p><strong>So, the overarching question is:</strong> Can I get my code targeting Java 11 to run (in ANY way)  with Java 17 given this particular issue?</p>\n<p>Bonus question: What about the compatibility between a JDK, compilation target and runability am I misunderstanding here?</p>\n"},{"tags":["java","spring","junit","spring-test"],"answers":[{"comments":[{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1656682947,"post_id":72828708,"comment_id":128638584,"body_markdown":"Glad it worked for you, please consider upvoting answer so that it will be helpful for community.","body":"Glad it worked for you, please consider upvoting answer so that it will be helpful for community."}],"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1656675604,"creation_date":1656675604,"answer_id":72828708,"question_id":72828384,"body_markdown":"It looks like `@SpyBean` is unable to find instance of your service class. Quick alternative for this is just remove `@SpyBean` from `ComicService comicService;` &amp; do following in your `@BeforeEach`:\r\n\r\n\r\n    @BeforeEach\r\n        public void setUp() {\r\n            this.comicService = Mockito.spy(new ComicService(&quot;ae78641e8976ffdf3fd4b71254a3b9bf&quot;, &quot;eb9fd0d8r8745cd0d554fb2c0e7896dab3bb745&quot;, marvelClient));\r\n  \r\n        }\r\n\r\nHere, you are creating spy &amp; then using it inside your test class.\r\n\r\n","title":"How to use @SpyBean in a class that receives arguments by the constructor?","body":"<p>It looks like <code>@SpyBean</code> is unable to find instance of your service class. Quick alternative for this is just remove <code>@SpyBean</code> from <code>ComicService comicService;</code> &amp; do following in your <code>@BeforeEach</code>:</p>\n<pre><code>@BeforeEach\n    public void setUp() {\n        this.comicService = Mockito.spy(new ComicService(&quot;ae78641e8976ffdf3fd4b71254a3b9bf&quot;, &quot;eb9fd0d8r8745cd0d554fb2c0e7896dab3bb745&quot;, marvelClient));\n\n    }\n</code></pre>\n<p>Here, you are creating spy &amp; then using it inside your test class.</p>\n"},{"comments":[{"owner":{"account_id":543600,"reputation":1014,"user_id":2125723,"accept_rate":80,"display_name":"ryanwebjackson"},"score":0,"creation_date":1686140115,"post_id":76399296,"comment_id":134757768,"body_markdown":"Can you provide an example of how to do this?","body":"Can you provide an example of how to do this?"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":1,"creation_date":1686238071,"post_id":76399296,"comment_id":134774662,"body_markdown":"Yes, sure. I updated my answer.","body":"Yes, sure. I updated my answer."}],"tags":[],"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686238020,"creation_date":1685862560,"answer_id":76399296,"question_id":72828384,"body_markdown":"You can use ,@MockBean annotation instead @SpyBean and can use Mockito.when().thenCallRealMethod() as you need to call real method and Mockito.when().thenReturn() at the same time if you want to mock some method. This way have to rid you of all your problems in that case and you can mock as you wanted.\r\n\r\nFor example :\r\n```\r\n@Component\r\nclass MyClass {\r\n\r\npublic String firstMethod(String value){\r\n\treturn value;\r\n}\r\n\r\npublic void secondMethod(String value){\r\n\tsome code\r\n}\r\n\r\n@Component\r\nclass Main {\r\n\t@Autowire\r\n\tprivate MyClass clazz;\r\n\t\r\n\tpublic String getFirstMethod(String value){\r\n\t\tsome code;\r\n\t}\r\n\r\n\tpublic void getSecondMethod(String value){\r\n\t\tclazz.secondMethod(value);\r\n\t}\r\n}\r\n```\r\nIn test class you have to declare a mock bean of your class as below and to mock them as you want. Instead thenReturn() you can use thenAnswer(), thenThrows(), then(), and instead doNothing() for void methods you can use doAnswer(), doThrow(), doReturn():\r\n```\r\n@MockBean(classes={MyClass.class})\r\npublic MainTest {\r\n\r\n@Autowire\r\nprivate Main main\r\n@Autowire\r\nprivat MyClass clazz;\r\n\r\n\t@Test\r\n\tvoid getFirstMethod_mock(){\r\n\t\tString value = &quot;something&quot;;\r\n\t\twhen(clazz.firstMethod(anyString()).thenReturn(&quot;some string value&quot;);\r\n\t\t\r\n\t\tString actual = main.getFirstMethod(value );\r\n\r\n\t\tassertEquals(&quot;some string value&quot;, actual);\r\n\t\r\n\t}\r\n\r\n\t@Test\r\n\tvoid getFirstMethod_realMethod(){\r\n\t\tString value = &quot;something&quot;;\r\n\t\twhen(clazz.firstMethod(anyString()).thenCallRealMethod();\r\n\t\t\r\n\t\tString actual = main.getFirstMethod(value );\r\n\r\n\t\tassertEquals(realResultOfFirstMethod, actual);\r\n\t\r\n\t}\r\n\r\n\t@Test\r\n\tvoid getSecondMethod_mock(){\r\n\t\tString value = &quot;something&quot;;\r\n\t\tdoNothing().when(clazz).secondMethod(anyString());\r\n\t\t\r\n\t\tmain.etSecondMethod(value );\r\n\t\r\n\t}\r\n\r\n\t@Test\r\n\tvoid getSecondMethod_realMethod(){\r\n\t\tString value = &quot;something&quot;;\r\n\t\tdoCallRealMethod().when(clazz).secondMethod(anyString());\r\n\t\t\r\n\t\tmain.etSecondMethod(value );\r\n\t\r\n\t}\r\n\r\n}\r\n```\r\n\r\nIf your class not Bean you can declar it as below :\r\n```\r\nMyClass clazz = mock(MyClass.class);\r\n```\r\nThe methods still stay the same :\r\n when(clazz.method()).then() and for void doNothing().when(clazz).method().","title":"How to use @SpyBean in a class that receives arguments by the constructor?","body":"<p>You can use ,@MockBean annotation instead @SpyBean and can use Mockito.when().thenCallRealMethod() as you need to call real method and Mockito.when().thenReturn() at the same time if you want to mock some method. This way have to rid you of all your problems in that case and you can mock as you wanted.</p>\n<p>For example :</p>\n<pre><code>@Component\nclass MyClass {\n\npublic String firstMethod(String value){\n    return value;\n}\n\npublic void secondMethod(String value){\n    some code\n}\n\n@Component\nclass Main {\n    @Autowire\n    private MyClass clazz;\n    \n    public String getFirstMethod(String value){\n        some code;\n    }\n\n    public void getSecondMethod(String value){\n        clazz.secondMethod(value);\n    }\n}\n</code></pre>\n<p>In test class you have to declare a mock bean of your class as below and to mock them as you want. Instead thenReturn() you can use thenAnswer(), thenThrows(), then(), and instead doNothing() for void methods you can use doAnswer(), doThrow(), doReturn():</p>\n<pre><code>@MockBean(classes={MyClass.class})\npublic MainTest {\n\n@Autowire\nprivate Main main\n@Autowire\nprivat MyClass clazz;\n\n    @Test\n    void getFirstMethod_mock(){\n        String value = &quot;something&quot;;\n        when(clazz.firstMethod(anyString()).thenReturn(&quot;some string value&quot;);\n        \n        String actual = main.getFirstMethod(value );\n\n        assertEquals(&quot;some string value&quot;, actual);\n    \n    }\n\n    @Test\n    void getFirstMethod_realMethod(){\n        String value = &quot;something&quot;;\n        when(clazz.firstMethod(anyString()).thenCallRealMethod();\n        \n        String actual = main.getFirstMethod(value );\n\n        assertEquals(realResultOfFirstMethod, actual);\n    \n    }\n\n    @Test\n    void getSecondMethod_mock(){\n        String value = &quot;something&quot;;\n        doNothing().when(clazz).secondMethod(anyString());\n        \n        main.etSecondMethod(value );\n    \n    }\n\n    @Test\n    void getSecondMethod_realMethod(){\n        String value = &quot;something&quot;;\n        doCallRealMethod().when(clazz).secondMethod(anyString());\n        \n        main.etSecondMethod(value );\n    \n    }\n\n}\n</code></pre>\n<p>If your class not Bean you can declar it as below :</p>\n<pre><code>MyClass clazz = mock(MyClass.class);\n</code></pre>\n<p>The methods still stay the same :\nwhen(clazz.method()).then() and for void doNothing().when(clazz).method().</p>\n"}],"owner":{"account_id":11603822,"reputation":48,"user_id":11713846,"display_name":"Gustavo Cruz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2644,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72828708,"answer_count":2,"score":2,"last_activity_date":1686238020,"creation_date":1656673940,"question_id":72828384,"body_markdown":"I&#39;m creating some unit tests for a Spring Boot application.\r\n\r\nIn a class called **ComicService** there is a method called **getComicByApi** and I want to create a test for that method, but this method accesses another method of the same class called **getHash**.\r\n\r\nI need to configure the behavior of getHash, so I used the **@SpyBean** annotation in creating the **ComicService** object.\r\n\r\nThe problem is that when running the test it gives an error in the part where I use Mockito.when().thenReturn() to configure the behavior of getHash.\r\n\r\nI found that the error is related to the fact that I use **@BeforeEach public void setUp()** to instantiate the annotated class with @SpyBean passing its constructor arguments, but I still don&#39;t know how to solve it.\r\n\r\nDoes anyone know how to solve this problem?\r\n\r\n**ComicService**\r\n\r\n    @Service\r\n    public class ComicService {\r\n        \r\n        private String publicKey;\r\n        \r\n        private String privateKey;\r\n        \r\n        private MarvelClient marvelClient;\r\n        \r\n        public ComicService(@Value(&quot;${marvel.public_key}&quot;)String publicKey, \r\n                @Value(&quot;${marvel.private_key}&quot;) String privateKey, MarvelClient marvelClient) {\r\n            this.publicKey = publicKey;\r\n            this.privateKey = privateKey;\r\n            this.marvelClient = marvelClient;\r\n        }\r\n        \r\n        public MarvelAPIModelDTO getComicByApi(Integer idComicMarvel) {\r\n            String timeStamp = String.valueOf((int)(System.currentTimeMillis() / 1000));\r\n            String hash = getHash(timeStamp);\r\n            \r\n            MarvelAPIModelDTO comic = marvelClient.getComic(idComicMarvel, timeStamp, timeStamp, hash);\r\n            \r\n            return comic;\r\n        }\r\n        \r\n        public String getHash(String timeStemp) {\r\n            String value = timeStemp+privateKey+publicKey;          \r\n            \r\n            MessageDigest md;\r\n            \r\n            try {\r\n                md = MessageDigest.getInstance(&quot;MD5&quot;);\r\n            } catch(NoSuchAlgorithmException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n            \r\n            BigInteger hash = new BigInteger(1, md.digest(value.getBytes()));\r\n        \r\n            return hash.toString(16);\r\n        }\r\n    \r\n    }\r\n\r\n**ComicServiceTest**\r\n\r\n    @ExtendWith(SpringExtension.class)\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    public class ComicServiceTest {\r\n        \r\n        @SpyBean\r\n        ComicService comicService;\r\n        \r\n        @MockBean\r\n        MarvelClient marvelClient;\r\n        \r\n        @BeforeEach\r\n        public void setUp() {\r\n            this.comicService = new ComicService(&quot;ae78641e8976ffdf3fd4b71254a3b9bf&quot;, &quot;eb9fd0d8r8745cd0d554fb2c0e7896dab3bb745&quot;, marvelClient);      \r\n        }\r\n    \r\n        @Test\r\n        public void getComicByApiTest() {\r\n            // Scenario\r\n            MarvelAPIModelDTO foundMarvelAPIModelDTO = createMarvelAPIModelDTO();\r\n            \r\n           //It&#39;s giving an error on this line \r\n            Mockito.when(comicService.getHash(Mockito.anyString())).thenReturn(&quot;c6fc42667498ea8081a22f4570b42d03&quot;); \r\n    \r\n            Mockito.when(marvelClient.getComic(Mockito.anyInt(), Mockito.anyString(), Mockito.anyString(), Mockito.anyString())).thenReturn(foundMarvelAPIModelDTO);\r\n            \r\n            // Execution\r\n            MarvelAPIModelDTO marvelAPIModelDTO = comicService.getComicByApi(1);\r\n            \r\n            // Verification\r\n            Assertions.assertThat(marvelAPIModelDTO.getData().getResults().get(0).getId()).isEqualTo(1);        \r\n        }\r\n    \r\n    }\r\n\r\n**Error**\r\n\r\n    at com.gustavo.comicreviewapi.services.ComicServiceTest.getComicByApiTest(ComicServiceTest.java:58)\r\n    \r\n    You cannot use argument matchers outside of verification or stubbing.\r\n    Examples of correct usage of argument matchers:\r\n        when(mock.get(anyInt())).thenReturn(null);\r\n        doThrow(new RuntimeException()).when(mock).someVoidMethod(any());\r\n        verify(mock).someMethod(contains(&quot;foo&quot;))\r\n    \r\n    This message may appear after an NullPointerException if the last matcher is returning an object \r\n    like any() but the stubbed method signature expect a primitive argument, in this case,\r\n    use primitive alternatives.\r\n        when(mock.get(any())); // bad use, will raise NPE\r\n        when(mock.get(anyInt())); // correct usage use\r\n    \r\n    Also, this error might show up because you use argument matchers with methods that cannot be mocked.\r\n    Following methods *cannot* be stubbed/verified: final/private/equals()/hashCode().\r\n    Mocking methods declared on non-public parent classes is not supported.","title":"How to use @SpyBean in a class that receives arguments by the constructor?","body":"<p>I'm creating some unit tests for a Spring Boot application.</p>\n<p>In a class called <strong>ComicService</strong> there is a method called <strong>getComicByApi</strong> and I want to create a test for that method, but this method accesses another method of the same class called <strong>getHash</strong>.</p>\n<p>I need to configure the behavior of getHash, so I used the <strong>@SpyBean</strong> annotation in creating the <strong>ComicService</strong> object.</p>\n<p>The problem is that when running the test it gives an error in the part where I use Mockito.when().thenReturn() to configure the behavior of getHash.</p>\n<p>I found that the error is related to the fact that I use <strong>@BeforeEach public void setUp()</strong> to instantiate the annotated class with @SpyBean passing its constructor arguments, but I still don't know how to solve it.</p>\n<p>Does anyone know how to solve this problem?</p>\n<p><strong>ComicService</strong></p>\n<pre><code>@Service\npublic class ComicService {\n    \n    private String publicKey;\n    \n    private String privateKey;\n    \n    private MarvelClient marvelClient;\n    \n    public ComicService(@Value(&quot;${marvel.public_key}&quot;)String publicKey, \n            @Value(&quot;${marvel.private_key}&quot;) String privateKey, MarvelClient marvelClient) {\n        this.publicKey = publicKey;\n        this.privateKey = privateKey;\n        this.marvelClient = marvelClient;\n    }\n    \n    public MarvelAPIModelDTO getComicByApi(Integer idComicMarvel) {\n        String timeStamp = String.valueOf((int)(System.currentTimeMillis() / 1000));\n        String hash = getHash(timeStamp);\n        \n        MarvelAPIModelDTO comic = marvelClient.getComic(idComicMarvel, timeStamp, timeStamp, hash);\n        \n        return comic;\n    }\n    \n    public String getHash(String timeStemp) {\n        String value = timeStemp+privateKey+publicKey;          \n        \n        MessageDigest md;\n        \n        try {\n            md = MessageDigest.getInstance(&quot;MD5&quot;);\n        } catch(NoSuchAlgorithmException e) {\n            throw new RuntimeException(e);\n        }\n        \n        BigInteger hash = new BigInteger(1, md.digest(value.getBytes()));\n    \n        return hash.toString(16);\n    }\n\n}\n</code></pre>\n<p><strong>ComicServiceTest</strong></p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@ActiveProfiles(&quot;test&quot;)\npublic class ComicServiceTest {\n    \n    @SpyBean\n    ComicService comicService;\n    \n    @MockBean\n    MarvelClient marvelClient;\n    \n    @BeforeEach\n    public void setUp() {\n        this.comicService = new ComicService(&quot;ae78641e8976ffdf3fd4b71254a3b9bf&quot;, &quot;eb9fd0d8r8745cd0d554fb2c0e7896dab3bb745&quot;, marvelClient);      \n    }\n\n    @Test\n    public void getComicByApiTest() {\n        // Scenario\n        MarvelAPIModelDTO foundMarvelAPIModelDTO = createMarvelAPIModelDTO();\n        \n       //It's giving an error on this line \n        Mockito.when(comicService.getHash(Mockito.anyString())).thenReturn(&quot;c6fc42667498ea8081a22f4570b42d03&quot;); \n\n        Mockito.when(marvelClient.getComic(Mockito.anyInt(), Mockito.anyString(), Mockito.anyString(), Mockito.anyString())).thenReturn(foundMarvelAPIModelDTO);\n        \n        // Execution\n        MarvelAPIModelDTO marvelAPIModelDTO = comicService.getComicByApi(1);\n        \n        // Verification\n        Assertions.assertThat(marvelAPIModelDTO.getData().getResults().get(0).getId()).isEqualTo(1);        \n    }\n\n}\n</code></pre>\n<p><strong>Error</strong></p>\n<pre><code>at com.gustavo.comicreviewapi.services.ComicServiceTest.getComicByApiTest(ComicServiceTest.java:58)\n\nYou cannot use argument matchers outside of verification or stubbing.\nExamples of correct usage of argument matchers:\n    when(mock.get(anyInt())).thenReturn(null);\n    doThrow(new RuntimeException()).when(mock).someVoidMethod(any());\n    verify(mock).someMethod(contains(&quot;foo&quot;))\n\nThis message may appear after an NullPointerException if the last matcher is returning an object \nlike any() but the stubbed method signature expect a primitive argument, in this case,\nuse primitive alternatives.\n    when(mock.get(any())); // bad use, will raise NPE\n    when(mock.get(anyInt())); // correct usage use\n\nAlso, this error might show up because you use argument matchers with methods that cannot be mocked.\nFollowing methods *cannot* be stubbed/verified: final/private/equals()/hashCode().\nMocking methods declared on non-public parent classes is not supported.\n</code></pre>\n"},{"tags":["java","dockerfile","gitlab-ci","gitlab-ci-runner"],"answers":[{"comments":[{"owner":{"account_id":20182483,"reputation":23,"user_id":14802694,"display_name":"Martinxxntfxx"},"score":0,"creation_date":1686321173,"post_id":76433426,"comment_id":134787155,"body_markdown":"Thankyou so much :) \nit worked","body":"Thankyou so much :)  it worked"}],"tags":[],"owner":{"account_id":7575391,"reputation":32369,"user_id":5747944,"display_name":"sytech"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686237911,"creation_date":1686237911,"answer_id":76433426,"question_id":76433148,"body_markdown":"Your image includes `ENTRYPOINT [&quot;/usr/bin/java&quot;]`, which is causing this problem. GitLab CI expects the images used for jobs to either have no `ENTRYPOINT` defined, or have a shell entrypoint.\r\n\r\nYou can either remove the entrypoint from the image or override it in your `.gitlab-ci.yml` configuration:\r\n\r\n```yaml\r\nmyjob:\r\n  image: \r\n    name: my/custom/maven-image\r\n    entrypoint: [&quot;&quot;]\r\n  script:\r\n    - echo &quot;hello gitlab&quot;\r\n```\r\n","title":"During the step script of gitlab Could not find or load main class sh after load docker image","body":"<p>Your image includes <code>ENTRYPOINT [&quot;/usr/bin/java&quot;]</code>, which is causing this problem. GitLab CI expects the images used for jobs to either have no <code>ENTRYPOINT</code> defined, or have a shell entrypoint.</p>\n<p>You can either remove the entrypoint from the image or override it in your <code>.gitlab-ci.yml</code> configuration:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>myjob:\n  image: \n    name: my/custom/maven-image\n    entrypoint: [&quot;&quot;]\n  script:\n    - echo &quot;hello gitlab&quot;\n</code></pre>\n"}],"owner":{"account_id":20182483,"reputation":23,"user_id":14802694,"display_name":"Martinxxntfxx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76433426,"answer_count":1,"score":1,"last_activity_date":1686237911,"creation_date":1686236129,"question_id":76433148,"body_markdown":"`Executing &quot;step_script&quot; stage of the job script 00:01 Using docker image sha256:75eb8c27787ee5c64311d798c9c0d2991a89024b516908 for gitlab-my_repo/maven3-jdk-8-git:V0.1 with digest gitlab-my_repo/maven3-jdk-8-git@sha256:febfe8e272bb8ccbb01116e7a177b979b53c080f11cafc ... Error: Could not find or load main class sh`\r\n\r\n\r\nwhen i use CI_DEBUG_TRACE= true nothing else in the log..\r\nFor me it is a problem of classpath in java but why sh and not src/java/class.main...\r\nOur gitlab runner work with docker Dind and the script of the custom image of maven3-jdk-8-git is :\r\n\r\n\r\n\r\n`    FROM maven:3.6.0-jdk-8\r\n    ENV TZ Europe/Paris\r\n    ENV http_proxy XXXXXXXXXXXXXXXXXXX\r\n    ENV https_proxy XXXXXXXXXXXXXXXXXXXX\r\n    RUN sed -i s/deb.debian.org/archive.debian.org/g /etc/apt/sources.list\r\n    RUN sed -i &#39;s|security.debian.org|archive.debian.org/|g&#39; /etc/apt/sources.list\r\n    RUN sed -i &#39;/stretch-updates/d&#39; /etc/apt/sources.list\r\n    RUN echo &quot;Install Git&quot; &amp;&amp; \\\r\n    apt-get update &amp;&amp; apt-get install -y apt-transport-https ca-certificates apt-utils bzip2 git &amp;&amp; \\\r\n    rm -rf /var/lib/apt/lists/\\* &amp;&amp; \\\r\n    \\# Correction du maven pour supprimer le mirror bloquant\r\n        line=$(grep -n maven-default-http-blocker /usr/share/maven/conf/settings.xml | awk -F: &#39;{print           $1}&#39;) &amp;&amp; \\\r\n    echo sed -i -e &quot;$((line - 1)),$((line+5))d&quot; /usr/share/maven/conf/settings.xml\r\n    COPY ./settings.xml /tmp/settings.xml\r\n    ENTRYPOINT \\[&quot;/usr/bin/java&quot;\\]\r\n`\r\n\r\n\r\n\r\n\r\nI try this line in the dockerfile : `RUN java -classpath /bin/sh sh`\r\nand i have the same error in the build of my dockerfile lol (Could not find or load main class sh)","title":"During the step script of gitlab Could not find or load main class sh after load docker image","body":"<p><code>Executing &quot;step_script&quot; stage of the job script 00:01 Using docker image sha256:75eb8c27787ee5c64311d798c9c0d2991a89024b516908 for gitlab-my_repo/maven3-jdk-8-git:V0.1 with digest gitlab-my_repo/maven3-jdk-8-git@sha256:febfe8e272bb8ccbb01116e7a177b979b53c080f11cafc ... Error: Could not find or load main class sh</code></p>\n<p>when i use CI_DEBUG_TRACE= true nothing else in the log..\nFor me it is a problem of classpath in java but why sh and not src/java/class.main...\nOur gitlab runner work with docker Dind and the script of the custom image of maven3-jdk-8-git is :</p>\n<p><code>   FROM maven:3.6.0-jdk-8 ENV TZ Europe/Paris ENV http_proxy XXXXXXXXXXXXXXXXXXX ENV https_proxy XXXXXXXXXXXXXXXXXXXX RUN sed -i s/deb.debian.org/archive.debian.org/g /etc/apt/sources.list RUN sed -i 's|security.debian.org|archive.debian.org/|g' /etc/apt/sources.list RUN sed -i '/stretch-updates/d' /etc/apt/sources.list RUN echo &quot;Install Git&quot; &amp;&amp; \\ apt-get update &amp;&amp; apt-get install -y apt-transport-https ca-certificates apt-utils bzip2 git &amp;&amp; \\ rm -rf /var/lib/apt/lists/\\* &amp;&amp; \\ \\# Correction du maven pour supprimer le mirror bloquant line=$(grep -n maven-default-http-blocker /usr/share/maven/conf/settings.xml | awk -F: '{print           $1}') &amp;&amp; \\ echo sed -i -e &quot;$((line - 1)),$((line+5))d&quot; /usr/share/maven/conf/settings.xml COPY ./settings.xml /tmp/settings.xml ENTRYPOINT \\[&quot;/usr/bin/java&quot;\\]</code></p>\n<p>I try this line in the dockerfile : <code>RUN java -classpath /bin/sh sh</code>\nand i have the same error in the build of my dockerfile lol (Could not find or load main class sh)</p>\n"},{"tags":["java","model-view-controller","design-patterns","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":24130,"reputation":92890,"user_id":61164,"accept_rate":98,"display_name":"Erik Funkenbusch"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1347646784,"creation_date":1347646449,"answer_id":12429824,"question_id":12429729,"body_markdown":"It largely depends on what flavor of MVC you&#39;re using, and what environment you&#39;re using it in.\r\n\r\nFor example, ASP.NET MVC is entirely a UI pattern, so all three parts are part of presentation.  \r\n\r\nHowever, in most implementations of MVC, the Controller interacts with the user, and thus is part of the UI layer.  It may handle button presses, and keyboard input... but in many cases, the controller is also responsible for connecting the Model and the View together.  \r\n\r\nThe one universal truth is that you should NOT be doing business logic in the controller if you cannot help it.  Where the business logic exists depends on many factors.  It might be part of the model in some implementations, or it may be it&#39;s own separate layer outside of MVC","title":"Controller belongs to the Presentation layer?","body":"<p>It largely depends on what flavor of MVC you're using, and what environment you're using it in.</p>\n\n<p>For example, ASP.NET MVC is entirely a UI pattern, so all three parts are part of presentation.  </p>\n\n<p>However, in most implementations of MVC, the Controller interacts with the user, and thus is part of the UI layer.  It may handle button presses, and keyboard input... but in many cases, the controller is also responsible for connecting the Model and the View together.  </p>\n\n<p>The one universal truth is that you should NOT be doing business logic in the controller if you cannot help it.  Where the business logic exists depends on many factors.  It might be part of the model in some implementations, or it may be it's own separate layer outside of MVC</p>\n"},{"comments":[{"owner":{"account_id":137700,"reputation":8264,"user_id":342073,"accept_rate":64,"display_name":"Ramesh Kotha"},"score":0,"creation_date":1347648918,"post_id":12429904,"comment_id":16711498,"body_markdown":"so controller will be in between UI and service layer right? then how it will be in Presentation Layer?","body":"so controller will be in between UI and service layer right? then how it will be in Presentation Layer?"},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1347657806,"post_id":12429904,"comment_id":16714632,"body_markdown":"UI and presentation are the same thing. The controller is part of the UI, or presentation, layer.","body":"UI and presentation are the same thing. The controller is part of the UI, or presentation, layer."}],"tags":[],"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1589643692,"creation_date":1347646773,"answer_id":12429904,"question_id":12429729,"body_markdown":"The controller controls the presentation layer logic. For all the business code, transactional use cases, persistence, etc., it typically delegates to a service layer.\r\n\r\nA typical way of doing that is to implement transactional services as spring beans and inject those spring beans in controllers. Typical use case: create a new product:\r\n\r\n 1. The controller receives a command bean from the browser\r\n 2. It validates that all the required data is present, and if not, redisplays the product creation page with error messages\r\n 3. It calls a service bean to create the product\r\n 4. The service bean runs in a transaction. It gets the product category from the database, attaches the product to its category, computes the price for the product based on current pricing strategies, sends a JMS message to an external application, and returns the ID of the created product\r\n 5. The controller redirects to the product detail page, using the ID of the created product as a URL parameter.","title":"Controller belongs to the Presentation layer?","body":"<p>The controller controls the presentation layer logic. For all the business code, transactional use cases, persistence, etc., it typically delegates to a service layer.</p>\n\n<p>A typical way of doing that is to implement transactional services as spring beans and inject those spring beans in controllers. Typical use case: create a new product:</p>\n\n<ol>\n<li>The controller receives a command bean from the browser</li>\n<li>It validates that all the required data is present, and if not, redisplays the product creation page with error messages</li>\n<li>It calls a service bean to create the product</li>\n<li>The service bean runs in a transaction. It gets the product category from the database, attaches the product to its category, computes the price for the product based on current pricing strategies, sends a JMS message to an external application, and returns the ID of the created product</li>\n<li>The controller redirects to the product detail page, using the ID of the created product as a URL parameter.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":5448501,"reputation":1780,"user_id":4334162,"display_name":"Arun Raaj"},"score":0,"creation_date":1525648338,"post_id":12442657,"comment_id":87427711,"body_markdown":"great help!  I want to know how do Presentation Layer and Business Layer communicate? I know that UI and Controller interact through REST.  Since Presentation and Business both the layers are in different machines (n -tier arc), does Service layer also accept REST calls?\nI have no real time experience so you may find this question lame, but it would be very nice of you if you educate me about it. Thanks in advance.","body":"great help!  I want to know how do Presentation Layer and Business Layer communicate? I know that UI and Controller interact through REST.  Since Presentation and Business both the layers are in different machines (n -tier arc), does Service layer also accept REST calls? I have no real time experience so you may find this question lame, but it would be very nice of you if you educate me about it. Thanks in advance."},{"owner":{"account_id":381896,"reputation":25949,"user_id":736809,"accept_rate":87,"display_name":"Jimbo"},"score":0,"creation_date":1593106173,"post_id":12442657,"comment_id":110671111,"body_markdown":"A model is not, and has never been, an entity.","body":"A model is not, and has never been, an entity."}],"tags":[],"owner":{"account_id":172480,"reputation":10147,"user_id":400545,"accept_rate":89,"display_name":"Jerome Dalbert"},"comment_count":2,"down_vote_count":1,"up_vote_count":24,"is_accepted":true,"score":23,"last_activity_date":1347796885,"creation_date":1347743797,"answer_id":12442657,"question_id":12429729,"body_markdown":"The presentation layer contains views ***and*** controllers.  \r\nYou must not mistake an MVC architecture for a multitier/layer architecture (especially a 3-tier architecture). Most of the time Model/View/Controller is not the primary design of a web application, it is just a subset of a multitier/layer architecture.\r\n\r\nTake a look at this oversimplified scheme (you could have the DAOs in a dedicated Data Access Layer, but this is not important in this post) :\r\n\r\n![Simplified layers][1]\r\n\r\n\r\nSpring MVC is a **presentation framework** : it deals with controllers and views. But why the &quot;M&quot; in Spring MVC ? Just because, as many other presentation framework, it naturally deals with a representation of a model/entity (&quot;M&quot;). This representation is the one used in your controllers, displayed in your views, submitted in your forms, etc. **That&#39;s why the framework is called Spring MVC, even if the model/entity is not part of the prensentation layer.**\r\n\r\nI think it is a good name for this Framework, because it is really &quot;MVC&quot; oriented. Indeed the representation of a model/entity can be :\r\n\r\n - direct : the framework directly handles the model/entity object\r\n - indirect : the framework handles a form object or DTO, that contains information related to one or multiple entities\r\n\r\n[Spring&#39;s recommendation][2] is to directly use the model/entity (&quot;M&quot;) object :\r\n\r\n&gt; Reusable business code, no need for duplication. Use existing business objects as command or form objects instead of mirroring them to extend a particular framework base class.\r\n\r\nThat&#39;s why I say the framework is very &quot;MVC&quot; oriented, compared to others, like Struts, where you have to use different form objects.\r\n\r\nSome interesting links :\r\n\r\n - [Comparison between Multitier and MVC architecture][3], from Wikipedia\r\n - [This blog post about 3-tier architecture][4] in ASP.NET\r\n - [This blog image of a 3-tier architecture][5]\r\n - [DispatcherServlet chapter][6] from Spring&#39;s documentation\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/OpWgt.png\r\n  [2]: http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-features\r\n  [3]: http://en.wikipedia.org/wiki/Multitier_architecture#Comparison_with_the_MVC_architecture\r\n  [4]: http://geekswithblogs.net/edison/archive/2009/04/05/a-simple-3-tier-layers-application-in-asp.net.aspx\r\n  [5]: http://hugo.ferreira.cc/post/28234548880/the-mvc-and-3-tier-architectures-combined-via-the\r\n  [6]: http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-servlet","title":"Controller belongs to the Presentation layer?","body":"<p>The presentation layer contains views <strong><em>and</em></strong> controllers.<br>\nYou must not mistake an MVC architecture for a multitier/layer architecture (especially a 3-tier architecture). Most of the time Model/View/Controller is not the primary design of a web application, it is just a subset of a multitier/layer architecture.</p>\n\n<p>Take a look at this oversimplified scheme (you could have the DAOs in a dedicated Data Access Layer, but this is not important in this post) :</p>\n\n<p><img src=\"https://i.stack.imgur.com/OpWgt.png\" alt=\"Simplified layers\"></p>\n\n<p>Spring MVC is a <strong>presentation framework</strong> : it deals with controllers and views. But why the \"M\" in Spring MVC ? Just because, as many other presentation framework, it naturally deals with a representation of a model/entity (\"M\"). This representation is the one used in your controllers, displayed in your views, submitted in your forms, etc. <strong>That's why the framework is called Spring MVC, even if the model/entity is not part of the prensentation layer.</strong></p>\n\n<p>I think it is a good name for this Framework, because it is really \"MVC\" oriented. Indeed the representation of a model/entity can be :</p>\n\n<ul>\n<li>direct : the framework directly handles the model/entity object</li>\n<li>indirect : the framework handles a form object or DTO, that contains information related to one or multiple entities</li>\n</ul>\n\n<p><a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-features\" rel=\"noreferrer\">Spring's recommendation</a> is to directly use the model/entity (\"M\") object :</p>\n\n<blockquote>\n  <p>Reusable business code, no need for duplication. Use existing business objects as command or form objects instead of mirroring them to extend a particular framework base class.</p>\n</blockquote>\n\n<p>That's why I say the framework is very \"MVC\" oriented, compared to others, like Struts, where you have to use different form objects.</p>\n\n<p>Some interesting links :</p>\n\n<ul>\n<li><a href=\"http://en.wikipedia.org/wiki/Multitier_architecture#Comparison_with_the_MVC_architecture\" rel=\"noreferrer\">Comparison between Multitier and MVC architecture</a>, from Wikipedia</li>\n<li><a href=\"http://geekswithblogs.net/edison/archive/2009/04/05/a-simple-3-tier-layers-application-in-asp.net.aspx\" rel=\"noreferrer\">This blog post about 3-tier architecture</a> in ASP.NET</li>\n<li><a href=\"http://hugo.ferreira.cc/post/28234548880/the-mvc-and-3-tier-architectures-combined-via-the\" rel=\"noreferrer\">This blog image of a 3-tier architecture</a></li>\n<li><a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-servlet\" rel=\"noreferrer\">DispatcherServlet chapter</a> from Spring's documentation</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10891141,"reputation":1976,"user_id":8006882,"accept_rate":79,"display_name":"Anna Klein"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686237740,"creation_date":1686236398,"answer_id":76433184,"question_id":12429729,"body_markdown":"Where do you get your quote `Spring MVC is used for presentation layer` from?\r\n\r\nI think firstly its important to understand the meaning of **MVC** in context of Spring Boot.\r\n\r\nIn Sprint Boot the **model** represents the data. And therefor you handle any business operations there and not in the controller.\r\nThe **view** represents the user interface!\r\n\r\nThe **controller acts as an intermediary between the model and view**. The controller receives input from the user, **interacts with the necessary services or business logic** to retrieve or manipulate data, and then prepares the response to be displayed by the view. Since that you can already say here, that it does not belong to the business layer since it should not do any operations on the data.\r\n\r\nAnd why the controller belongs then to the presentation layer becomes even more clear since it\r\n\r\n- handles requests &amp; responses\r\n- routes the requests based on their URL/HTTP Methods\r\n- does input validation and transformation","title":"Controller belongs to the Presentation layer?","body":"<p>Where do you get your quote <code>Spring MVC is used for presentation layer</code> from?</p>\n<p>I think firstly its important to understand the meaning of <strong>MVC</strong> in context of Spring Boot.</p>\n<p>In Sprint Boot the <strong>model</strong> represents the data. And therefor you handle any business operations there and not in the controller.\nThe <strong>view</strong> represents the user interface!</p>\n<p>The <strong>controller acts as an intermediary between the model and view</strong>. The controller receives input from the user, <strong>interacts with the necessary services or business logic</strong> to retrieve or manipulate data, and then prepares the response to be displayed by the view. Since that you can already say here, that it does not belong to the business layer since it should not do any operations on the data.</p>\n<p>And why the controller belongs then to the presentation layer becomes even more clear since it</p>\n<ul>\n<li>handles requests &amp; responses</li>\n<li>routes the requests based on their URL/HTTP Methods</li>\n<li>does input validation and transformation</li>\n</ul>\n"}],"owner":{"account_id":137700,"reputation":8264,"user_id":342073,"accept_rate":64,"display_name":"Ramesh Kotha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16539,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":12442657,"answer_count":4,"score":17,"last_activity_date":1686237740,"creation_date":1347645898,"question_id":12429729,"body_markdown":"I heard that controller belongs to the presentation layer. How is it possible?\r\n\r\nI thought that :\r\n\r\n- view is for presentation\r\n- model is for business logic\r\n- controller is for controlling logic\r\n\r\nIs there good link to prove that controller belongs to the presentation layer?\r\n\r\n&quot;Spring MVC is used for presentation layer&quot;: how can we use MVC only in the presentation layer?","title":"Controller belongs to the Presentation layer?","body":"<p>I heard that controller belongs to the presentation layer. How is it possible?</p>\n\n<p>I thought that :</p>\n\n<ul>\n<li>view is for presentation</li>\n<li>model is for business logic</li>\n<li>controller is for controlling logic</li>\n</ul>\n\n<p>Is there good link to prove that controller belongs to the presentation layer?</p>\n\n<p>\"Spring MVC is used for presentation layer\": how can we use MVC only in the presentation layer?</p>\n"},{"tags":["java","jpa","post","jakarta-ee","quarkus"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1685998538,"post_id":76409800,"comment_id":134736576,"body_markdown":"What headers are you using in Postman? What is the return data format you are expecting and returning?","body":"What headers are you using in Postman? What is the return data format you are expecting and returning?"},{"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"score":0,"creation_date":1686034313,"post_id":76409800,"comment_id":134739884,"body_markdown":"@Chris Headers are the default ones. I think the most important one is this one: `Content-type: application/json`. I would expect that the repository returns a `Long` (the ID of the new Drink) and the controller returns a `Response` as you can see on the code examples","body":"@Chris Headers are the default ones. I think the most important one is this one: <code>Content-type: application&#47;json</code>. I would expect that the repository returns a <code>Long</code> (the ID of the new Drink) and the controller returns a <code>Response</code> as you can see on the code examples"},{"owner":{"account_id":19592617,"reputation":1,"user_id":14339315,"display_name":"Altaf Alam Ansari"},"score":0,"creation_date":1686051297,"post_id":76409800,"comment_id":134743251,"body_markdown":"Have you gone through the solutions in this thread?\nhttps://stackoverflow.com/questions/22566433/http-415-unsupported-media-type-error-with-json","body":"Have you gone through the solutions in this thread? <a href=\"https://stackoverflow.com/questions/22566433/http-415-unsupported-media-type-error-with-json\" title=\"http 415 unsupported media type error with json\">stackoverflow.com/questions/22566433/&hellip;</a>"},{"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"score":0,"creation_date":1686073681,"post_id":76409800,"comment_id":134748418,"body_markdown":"@AltafAlamAnsari None of them worked","body":"@AltafAlamAnsari None of them worked"}],"answers":[{"tags":[],"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686237577,"creation_date":1686237577,"answer_id":76433381,"question_id":76409800,"body_markdown":"Solution that worked for me:\r\n\r\nCommenting the `quarkus-resteasy-reactive` dependency in the `pom.xml` and adding this code in the `pom.xml` instead.\r\n\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n      &lt;artifactId&gt;quarkus-resteasy-jsonb&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nDo not forget to reload/rebuild your application","title":"415 Unsupported Media type when doing POST","body":"<p>Solution that worked for me:</p>\n<p>Commenting the <code>quarkus-resteasy-reactive</code> dependency in the <code>pom.xml</code> and adding this code in the <code>pom.xml</code> instead.</p>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-resteasy-jsonb&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Do not forget to reload/rebuild your application</p>\n"}],"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76433381,"answer_count":1,"score":0,"last_activity_date":1686237577,"creation_date":1685997013,"question_id":76409800,"body_markdown":"I have these two classes `Item` and `Drink`. Where `Drink` extends `Item`. Both are PanacheEntities and only consists a few basic fields. Code samples of this part (I left the getters and setters out of it):\r\n\r\n    @Entity\r\n    @Table(name = &quot;t_items&quot;)\r\n    @Inheritance(strategy = InheritanceType.JOINED)\r\n    public class Item extends PanacheEntity {\r\n       @Column(nullable = false)\r\n       private String title;\r\n       @Column\r\n       private String description;\r\n       @Column(nullable = false)\r\n       private float price;\r\n       @Column\r\n       private LocalDateTime lastUpdatedDate;\r\n       @Column(nullable = false)\r\n       private String lastUpdatedUser;\r\n    }\r\n\r\n    @Entity\r\n    @Table(name = &quot;t_drinks&quot;)\r\n    public class Drink extends Item {\r\n        @Column\r\n        private int volume;\r\n    \r\n        @Column\r\n        private boolean containsAlcohol;\r\n    \r\n        @Column\r\n        private float alcoholPercentage;\r\n    }\r\n\r\nI am still in the phase of creating some basic CRUD operations. So I have this POST operation in the controller which I want to test via Postman, but it returns a 415 error code. \r\nThis is the controller function:\r\n\r\n\r\n    @POST\r\n    @Path(&quot;/drinks&quot;)\r\n    public Response addDrink(Drink drink, @Context UriInfo uriInfo) {\r\n        Long drinkId = drinkRepository.persistDrink(drink);\r\n        UriBuilder builder = uriInfo.getAbsolutePathBuilder().path(Long.toString(drinkId));\r\n        Log.info(&quot;drink persist&quot;);\r\n        return Response.created(builder.build()).build();\r\n    }\r\n\r\nAnd this is the repository function that gets called:\r\n\r\n    @Transactional(Transactional.TxType.REQUIRED)\r\n    public Long persistDrink(Drink drink) {\r\n        Drink.persist(drink);\r\n        Log.info(String.valueOf(drink.id));\r\n        return drink.id;\r\n    }\r\n\r\nI do know that there should be a domain layer in between for best practices, but that will be fixed after this problem.\r\n\r\nThis is the body I enter in the Postman call:\r\n\r\n    {\r\n        &quot;title&quot;: &quot;Cola&quot;,\r\n        &quot;description&quot;: &quot;Refreshing soda&quot;,\r\n        &quot;price&quot;: 2.5,\r\n        &quot;lastUpdatedDate&quot;: &quot;2023-06-05T10:00:00&quot;,\r\n        &quot;lastUpdatedUser&quot;: &quot;John Doe&quot;,\r\n        &quot;volume&quot;: 500,\r\n        &quot;containsAlcohol&quot;: false,\r\n        &quot;alcoholPercentage&quot;: 0.0\r\n    }\r\n\r\nWhere is the problem? I already tried to add `@Consumes(MediaType.APPLICATION_JSON)`, but that does not work either.","title":"415 Unsupported Media type when doing POST","body":"<p>I have these two classes <code>Item</code> and <code>Drink</code>. Where <code>Drink</code> extends <code>Item</code>. Both are PanacheEntities and only consists a few basic fields. Code samples of this part (I left the getters and setters out of it):</p>\n<pre><code>@Entity\n@Table(name = &quot;t_items&quot;)\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class Item extends PanacheEntity {\n   @Column(nullable = false)\n   private String title;\n   @Column\n   private String description;\n   @Column(nullable = false)\n   private float price;\n   @Column\n   private LocalDateTime lastUpdatedDate;\n   @Column(nullable = false)\n   private String lastUpdatedUser;\n}\n\n@Entity\n@Table(name = &quot;t_drinks&quot;)\npublic class Drink extends Item {\n    @Column\n    private int volume;\n\n    @Column\n    private boolean containsAlcohol;\n\n    @Column\n    private float alcoholPercentage;\n}\n</code></pre>\n<p>I am still in the phase of creating some basic CRUD operations. So I have this POST operation in the controller which I want to test via Postman, but it returns a 415 error code.\nThis is the controller function:</p>\n<pre><code>@POST\n@Path(&quot;/drinks&quot;)\npublic Response addDrink(Drink drink, @Context UriInfo uriInfo) {\n    Long drinkId = drinkRepository.persistDrink(drink);\n    UriBuilder builder = uriInfo.getAbsolutePathBuilder().path(Long.toString(drinkId));\n    Log.info(&quot;drink persist&quot;);\n    return Response.created(builder.build()).build();\n}\n</code></pre>\n<p>And this is the repository function that gets called:</p>\n<pre><code>@Transactional(Transactional.TxType.REQUIRED)\npublic Long persistDrink(Drink drink) {\n    Drink.persist(drink);\n    Log.info(String.valueOf(drink.id));\n    return drink.id;\n}\n</code></pre>\n<p>I do know that there should be a domain layer in between for best practices, but that will be fixed after this problem.</p>\n<p>This is the body I enter in the Postman call:</p>\n<pre><code>{\n    &quot;title&quot;: &quot;Cola&quot;,\n    &quot;description&quot;: &quot;Refreshing soda&quot;,\n    &quot;price&quot;: 2.5,\n    &quot;lastUpdatedDate&quot;: &quot;2023-06-05T10:00:00&quot;,\n    &quot;lastUpdatedUser&quot;: &quot;John Doe&quot;,\n    &quot;volume&quot;: 500,\n    &quot;containsAlcohol&quot;: false,\n    &quot;alcoholPercentage&quot;: 0.0\n}\n</code></pre>\n<p>Where is the problem? I already tried to add <code>@Consumes(MediaType.APPLICATION_JSON)</code>, but that does not work either.</p>\n"},{"tags":["java","android-studio"],"owner":{"account_id":25144470,"reputation":1,"user_id":18990446,"display_name":"Chamika App"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686236997,"creation_date":1686236997,"question_id":76433300,"body_markdown":"Cause: superclass access check failed: class butterknife.compiler.ButterKnifeProcessor$RScanner (in unnamed module @0x6f19d21b) cannot access class com.sun.tools.javac.tree.TreeScanner (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.tree to unnamed module @0x6f19d21b\r\n\r\nI am trying to use the add to cart option in my app","title":"What might be the reason for the error message indicating a superclass access check failure in a Java program in android studio","body":"<p>Cause: superclass access check failed: class butterknife.compiler.ButterKnifeProcessor$RScanner (in unnamed module @0x6f19d21b) cannot access class com.sun.tools.javac.tree.TreeScanner (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.tree to unnamed module @0x6f19d21b</p>\n<p>I am trying to use the add to cart option in my app</p>\n"},{"tags":["java","android","android-fragments","popupwindow"],"answers":[{"tags":[],"owner":{"account_id":25155166,"reputation":864,"user_id":19000086,"display_name":"zaid khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686128564,"creation_date":1686128564,"answer_id":76421600,"question_id":76418290,"body_markdown":"Instantiating a fragment with fragmentManager would require a container that has to be a part of the activity or fragment, which is not the case with PopUpWindow instead what you should do is use a [DialogFragment][1]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/app/DialogFragment#show%28android.app.FragmentManager,%20java.lang.String%29","title":"ANDROID Instantiate a Fragment Inside a PopupWindow","body":"<p>Instantiating a fragment with fragmentManager would require a container that has to be a part of the activity or fragment, which is not the case with PopUpWindow instead what you should do is use a <a href=\"https://developer.android.com/reference/android/app/DialogFragment#show%28android.app.FragmentManager,%20java.lang.String%29\" rel=\"nofollow noreferrer\">DialogFragment</a></p>\n"},{"tags":[],"owner":{"account_id":1562580,"reputation":343,"user_id":1452121,"display_name":"Rich Morey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686236351,"creation_date":1686236351,"answer_id":76433175,"question_id":76418290,"body_markdown":"I solved my issue by changing my fragment to a custom UI component that extends a FrameLayout. This way I was able to use the address entry control as I had been in other layouts and use it in the PopupWindow without needing to change it to a DialogFragment.","title":"ANDROID Instantiate a Fragment Inside a PopupWindow","body":"<p>I solved my issue by changing my fragment to a custom UI component that extends a FrameLayout. This way I was able to use the address entry control as I had been in other layouts and use it in the PopupWindow without needing to change it to a DialogFragment.</p>\n"}],"owner":{"account_id":1562580,"reputation":343,"user_id":1452121,"display_name":"Rich Morey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686236351,"creation_date":1686083966,"question_id":76418290,"body_markdown":"I have an Android application with a fragment used in multiple places in our app to collect address information. I have the fragment inside FragmentContainerView in the layouts and I access the fragment like this\r\n```\r\nfragAddress = (FragAddressEntry) getChildFragmentManager().findFragmentById(R.id.frag_address_form);\r\n```\r\n\r\nNow I have reason to create a PopupWindow where I want to collect address information and so I want to use the existing FragAddressEntry form. \r\n\r\nHow do I instantiate the FragAddressEntry from inside the PopupWindow since there is no getChildFragmentManager?\r\n\r\nI can&#39;t convert the FragAddressEntry to a DialogFragment because that is not how the fragment is being used elsewhere.\r\n\r\nThanks\r\n\r\nRich\r\n\r\n ","title":"ANDROID Instantiate a Fragment Inside a PopupWindow","body":"<p>I have an Android application with a fragment used in multiple places in our app to collect address information. I have the fragment inside FragmentContainerView in the layouts and I access the fragment like this</p>\n<pre><code>fragAddress = (FragAddressEntry) getChildFragmentManager().findFragmentById(R.id.frag_address_form);\n</code></pre>\n<p>Now I have reason to create a PopupWindow where I want to collect address information and so I want to use the existing FragAddressEntry form.</p>\n<p>How do I instantiate the FragAddressEntry from inside the PopupWindow since there is no getChildFragmentManager?</p>\n<p>I can't convert the FragAddressEntry to a DialogFragment because that is not how the fragment is being used elsewhere.</p>\n<p>Thanks</p>\n<p>Rich</p>\n"},{"tags":["java","spring-webflux","reactor-netty"],"answers":[{"comments":[{"owner":{"account_id":5643501,"reputation":421,"user_id":4466455,"display_name":"bivrantoshakil"},"score":0,"creation_date":1571472127,"post_id":58445460,"comment_id":103259348,"body_markdown":"can you please suggest a way how can I make the service2 call parallel/asynchronous? When I call the Mono.zip method, I want service2 response ready to be used right then.","body":"can you please suggest a way how can I make the service2 call parallel/asynchronous? When I call the Mono.zip method, I want service2 response ready to be used right then."},{"owner":{"account_id":3521854,"reputation":1144,"user_id":2943913,"display_name":"Pratik Bhajankar"},"score":0,"creation_date":1571544256,"post_id":58445460,"comment_id":103273889,"body_markdown":"i think below Yash answer had a same solutions.","body":"i think below Yash answer had a same solutions."},{"owner":{"account_id":133310,"reputation":6104,"user_id":334569,"accept_rate":73,"display_name":"Marco Lackovic"},"score":1,"creation_date":1597045282,"post_id":58445460,"comment_id":111995195,"body_markdown":"Can you please clarify why you used `flatMap` instead of `map` and what does the `Mono.just` do at end, compared to simply returning `&lt;your_response_object&gt;`?","body":"Can you please clarify why you used <code>flatMap</code> instead of <code>map</code> and what does the <code>Mono.just</code> do at end, compared to simply returning <code>&lt;your_response_object&gt;</code>?"},{"owner":{"account_id":6856483,"reputation":1042,"user_id":6895607,"accept_rate":80,"display_name":"Gaudam Thiyagarajan"},"score":3,"creation_date":1605188943,"post_id":58445460,"comment_id":114578533,"body_markdown":"what to do when there is more than 8 mono? the max is 8 for mono.zip","body":"what to do when there is more than 8 mono? the max is 8 for mono.zip"},{"owner":{"account_id":3521854,"reputation":1144,"user_id":2943913,"display_name":"Pratik Bhajankar"},"score":0,"creation_date":1605677888,"post_id":58445460,"comment_id":114721708,"body_markdown":"@GaudamThiyagarajan then you need to call data.getT8() hope it will work. Zip up to 8 elements and request data up to T8().","body":"@GaudamThiyagarajan then you need to call data.getT8() hope it will work. Zip up to 8 elements and request data up to T8()."}],"tags":[],"owner":{"account_id":3521854,"reputation":1144,"user_id":2943913,"display_name":"Pratik Bhajankar"},"comment_count":5,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1597732772,"creation_date":1571381797,"answer_id":58445460,"question_id":58445213,"body_markdown":"Whenever you zip the two mono then the third parameter will be `BiFunction` but with three-parameter, it returns a `flatmap` of `tuple` then in the tuple you will get the response of other Monos. \r\nYou need to modify your code in the below manner.\r\n\r\n    Mono.zip(customMono, booleanMono, stringMono).flatMap(data-&gt;{\r\n     data.getT1();\r\n     data.getT2();\r\n     data.getT3();\r\n     return &lt;your_response_object&gt;;\r\n    });\r\nNow what will be the return type of `getT1()`,`getT2()` and `getT3()` ? \r\n\r\nObusally it will depend on what your **Zip Mono** return.\r\n\r\nHope so it will help you.\r\n","title":"Zip Three Different Mono of Different Type","body":"<p>Whenever you zip the two mono then the third parameter will be <code>BiFunction</code> but with three-parameter, it returns a <code>flatmap</code> of <code>tuple</code> then in the tuple you will get the response of other Monos.\nYou need to modify your code in the below manner.</p>\n<pre><code>Mono.zip(customMono, booleanMono, stringMono).flatMap(data-&gt;{\n data.getT1();\n data.getT2();\n data.getT3();\n return &lt;your_response_object&gt;;\n});\n</code></pre>\n<p>Now what will be the return type of <code>getT1()</code>,<code>getT2()</code> and <code>getT3()</code> ?</p>\n<p>Obusally it will depend on what your <strong>Zip Mono</strong> return.</p>\n<p>Hope so it will help you.</p>\n"},{"comments":[{"owner":{"account_id":5643501,"reputation":421,"user_id":4466455,"display_name":"bivrantoshakil"},"score":0,"creation_date":1571472190,"post_id":58445824,"comment_id":103259363,"body_markdown":"Thank you. can you please suggest a way how can I make the service2 call parallel/asynchronous? When I call the Mono.zip method, I want service2 response ready to be used right then.","body":"Thank you. can you please suggest a way how can I make the service2 call parallel/asynchronous? When I call the Mono.zip method, I want service2 response ready to be used right then."},{"owner":{"account_id":15754783,"reputation":618,"user_id":11368263,"display_name":"yash sugandh"},"score":0,"creation_date":1571513523,"post_id":58445824,"comment_id":103269114,"body_markdown":"you can use service2 response right there by using data.getT2()","body":"you can use service2 response right there by using data.getT2()"}],"tags":[],"owner":{"account_id":15754783,"reputation":618,"user_id":11368263,"display_name":"yash sugandh"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1571383267,"creation_date":1571383267,"answer_id":58445824,"question_id":58445213,"body_markdown":"For your specific condition, you need `Mono.zipWhen()` which will ensure that your 3rd service call will have the data it requires from the response from service call 1\r\n\r\n    Mono.zip(monoResponse1,monoResponse2).zipWhen(data -&gt;serviceCall3(data.getT1())).flatMap(response -&gt;{\r\n    \tresponse.getT1().getT1();//response from mono1\r\n    \tresponse.getT1().getT2();//response from mono 2\r\n    \tresponse.getT2();//response from mono 3\r\n    \treturn {create your mono response here};\r\n    } );","title":"Zip Three Different Mono of Different Type","body":"<p>For your specific condition, you need <code>Mono.zipWhen()</code> which will ensure that your 3rd service call will have the data it requires from the response from service call 1</p>\n\n<pre><code>Mono.zip(monoResponse1,monoResponse2).zipWhen(data -&gt;serviceCall3(data.getT1())).flatMap(response -&gt;{\n    response.getT1().getT1();//response from mono1\n    response.getT1().getT2();//response from mono 2\n    response.getT2();//response from mono 3\n    return {create your mono response here};\n} );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11574148,"reputation":399,"user_id":8480036,"display_name":"Ashish Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686235265,"creation_date":1686235265,"answer_id":76433009,"question_id":58445213,"body_markdown":"I am also in my Reactive programming learning phase. So I started with doing zipWith on 2 method and started thinking what if I want to zip more than 2 methods!\r\n\r\nI found out that I can chain the method with another zipWith.\r\n\r\n    greet().zipWith(name()).map(tuple -&gt; tuple.getT1() + tuple.getT2())\r\n                                            .zipWith(name2()).map(tuple -&gt; tuple.getT1() + tuple.getT2());\r\n    \r\nExplanation: greet() returns a String Mono and I zipped it with name(). Then I again zipped the Mono returned from the 1st map() to the third method name2() and again did a map to get the desired response.\r\n\r\nThis is just another way to zip multiple methods. But, this may not solve all problems.","title":"Zip Three Different Mono of Different Type","body":"<p>I am also in my Reactive programming learning phase. So I started with doing zipWith on 2 method and started thinking what if I want to zip more than 2 methods!</p>\n<p>I found out that I can chain the method with another zipWith.</p>\n<pre><code>greet().zipWith(name()).map(tuple -&gt; tuple.getT1() + tuple.getT2())\n                                        .zipWith(name2()).map(tuple -&gt; tuple.getT1() + tuple.getT2());\n</code></pre>\n<p>Explanation: greet() returns a String Mono and I zipped it with name(). Then I again zipped the Mono returned from the 1st map() to the third method name2() and again did a map to get the desired response.</p>\n<p>This is just another way to zip multiple methods. But, this may not solve all problems.</p>\n"}],"owner":{"account_id":5643501,"reputation":421,"user_id":4466455,"display_name":"bivrantoshakil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48063,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":58445824,"answer_count":3,"score":25,"last_activity_date":1686235265,"creation_date":1571380660,"question_id":58445213,"body_markdown":"I have started a new project using Spring Webflux and I am fairly new to this reactive coding paradigm. So apologies in advance for questioning like newbies.\r\n\r\nMy controller method returns the response as ```Mono&lt;ResponseEntity&lt;String&gt;&gt;``` and I have three different services to call from where I am getting three different ```Mono``` object like this - \r\n\r\n\r\n```\r\nMono&lt;CustomObject&gt; customMono = serivce1.method();\r\nMono&lt;Boolean&gt; booleanMono = service2.method();\r\nMono&lt;String&gt; stringMono = service3.method();\r\n```\r\n\r\nSo in order prepare the response(```Mono&lt;ResponseEntity&lt;String&gt;&gt;```), I need to do something like this - \r\n```\r\nMono.zip(customMono, booleanMono, stringMono, (customData, booleanData, stringData) -&gt; {\r\n------\r\nreturn Mono.just(ResponseEntity.ok().body(&quot;-----&quot;));\r\n});\r\n```\r\n\r\nThe problem is, there are no such ```zip``` method to take 3 ```Mono``` and a function as parameters. I already found thise -\r\nhttps://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#zip-reactor.core.publisher.Mono-reactor.core.publisher.Mono-java.util.function.BiFunction-\r\n\r\nbut it doesn&#39;t fulfil my requirement. So issues I am facing\r\n\r\n- I can not use *Mono.mergeWith* or *Mono.concaWith* method because my Mono object are of different kind.\r\n- I can flatMap/map every Mono and create a chain. But I want service2 to be called parallel in a separate thread as it is not dependent on service1 call. But service3 call is dependent on service1 response.\r\n\r\nIn summary, what I need to do:\r\n\r\n- make service1 call at first\r\n- make service2 call separately on different thread\r\n- make service3 call which is dependent on service1 call data\r\n- generating the final response object (```Mono&lt;ResponseEntity&lt;String&gt;&gt;```) using the data from all the service call.\r\n\r\nThanks in advance. As a newbie, any suggestion is appreciated.","title":"Zip Three Different Mono of Different Type","body":"<p>I have started a new project using Spring Webflux and I am fairly new to this reactive coding paradigm. So apologies in advance for questioning like newbies.</p>\n\n<p>My controller method returns the response as <code>Mono&lt;ResponseEntity&lt;String&gt;&gt;</code> and I have three different services to call from where I am getting three different <code>Mono</code> object like this - </p>\n\n<pre><code>Mono&lt;CustomObject&gt; customMono = serivce1.method();\nMono&lt;Boolean&gt; booleanMono = service2.method();\nMono&lt;String&gt; stringMono = service3.method();\n</code></pre>\n\n<p>So in order prepare the response(<code>Mono&lt;ResponseEntity&lt;String&gt;&gt;</code>), I need to do something like this - </p>\n\n<pre><code>Mono.zip(customMono, booleanMono, stringMono, (customData, booleanData, stringData) -&gt; {\n------\nreturn Mono.just(ResponseEntity.ok().body(\"-----\"));\n});\n</code></pre>\n\n<p>The problem is, there are no such <code>zip</code> method to take 3 <code>Mono</code> and a function as parameters. I already found thise -\n<a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#zip-reactor.core.publisher.Mono-reactor.core.publisher.Mono-java.util.function.BiFunction-\" rel=\"noreferrer\">https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#zip-reactor.core.publisher.Mono-reactor.core.publisher.Mono-java.util.function.BiFunction-</a></p>\n\n<p>but it doesn't fulfil my requirement. So issues I am facing</p>\n\n<ul>\n<li>I can not use <em>Mono.mergeWith</em> or <em>Mono.concaWith</em> method because my Mono object are of different kind.</li>\n<li>I can flatMap/map every Mono and create a chain. But I want service2 to be called parallel in a separate thread as it is not dependent on service1 call. But service3 call is dependent on service1 response.</li>\n</ul>\n\n<p>In summary, what I need to do:</p>\n\n<ul>\n<li>make service1 call at first</li>\n<li>make service2 call separately on different thread</li>\n<li>make service3 call which is dependent on service1 call data</li>\n<li>generating the final response object (<code>Mono&lt;ResponseEntity&lt;String&gt;&gt;</code>) using the data from all the service call.</li>\n</ul>\n\n<p>Thanks in advance. As a newbie, any suggestion is appreciated.</p>\n"},{"tags":["java","spring-boot","spring-boot-starter"],"comments":[{"owner":{"account_id":3779737,"reputation":572,"user_id":3139567,"display_name":"Goikiu"},"score":0,"creation_date":1686238992,"post_id":76432909,"comment_id":134774863,"body_markdown":"Hi, the issue seems here:\n@EnableJpaRepositories(basePackages = {&quot;com.example.starter.repository&quot;})\nit cannot find or load com.example.starter.model.entity.User\nthis file may be not with @entity or not in a folder already loaded","body":"Hi, the issue seems here: @EnableJpaRepositories(basePackages = {&quot;com.example.starter.repository&quot;}) it cannot find or load com.example.starter.model.entity.User this file may be not with @entity or not in a folder already loaded"},{"owner":{"account_id":22915187,"reputation":13,"user_id":17051878,"display_name":"Oleksii Perets"},"score":0,"creation_date":1686241424,"post_id":76432909,"comment_id":134775338,"body_markdown":"Unfortunately com.example.starter.model.entity.User has @Entity and it is in package","body":"Unfortunately com.example.starter.model.entity.User has @Entity and it is in package"},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1686244994,"post_id":76432909,"comment_id":134776049,"body_markdown":"Have you [switched from `META-INF/spring.factories` to `META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports`](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide#auto-configuration-files) to register you auto-configuration classes?","body":"Have you <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide#auto-configuration-files\" rel=\"nofollow noreferrer\">switched from <code>META-INF&#47;spring.factories</code> to <code>META-INF&#47;spring&#47;org.springframework.boot.autoconfigure.AutoC&zwnj;&#8203;onfiguration.imports</code></a> to register you auto-configuration classes?"}],"owner":{"account_id":22915187,"reputation":13,"user_id":17051878,"display_name":"Oleksii Perets"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686234582,"creation_date":1686234582,"question_id":76432909,"body_markdown":"I would like to migrate the custom spring boot starter which has its own entities and repositories from spring boot 2 to 3.\r\n\r\n\r\nI currently have tried the following:\r\n\r\nregistar for entities:\r\n```\r\npublic class StarterEntityRegistrar implements ImportBeanDefinitionRegistrar {\r\n\r\n    @Override\r\n    public void registerBeanDefinitions(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) {\r\n        AutoConfigurationPackages.register(registry, User.class.getPackage().getName());\r\n    }\r\n}\r\n```\r\n\r\nconfiguration class:\r\n```\r\n@Configuration\r\n@AutoConfigureBefore(JpaRepositoriesAutoConfiguration.class)\r\n@EnableJpaRepositories(basePackages = {&quot;com.example.starter.repository&quot;})\r\n@Import(StarterEntityRegistrar.class)\r\npublic class UserManagementAutoConfiguration {\r\n```\r\n\r\nbut unfortunately it doesn&#39;t work with spring boot 3, for spring boot 2 everything is ok.\r\n\r\nWhen I start my spring boot app depending on this custom starter I can see \r\n`Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.example.starter.model.entity.User`\r\n\r\nDo you have ideas how to fix it?","title":"Migrate the custom spring boot starter which has its own entities and repositories from spring boot 2 to 3","body":"<p>I would like to migrate the custom spring boot starter which has its own entities and repositories from spring boot 2 to 3.</p>\n<p>I currently have tried the following:</p>\n<p>registar for entities:</p>\n<pre><code>public class StarterEntityRegistrar implements ImportBeanDefinitionRegistrar {\n\n    @Override\n    public void registerBeanDefinitions(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) {\n        AutoConfigurationPackages.register(registry, User.class.getPackage().getName());\n    }\n}\n</code></pre>\n<p>configuration class:</p>\n<pre><code>@Configuration\n@AutoConfigureBefore(JpaRepositoriesAutoConfiguration.class)\n@EnableJpaRepositories(basePackages = {&quot;com.example.starter.repository&quot;})\n@Import(StarterEntityRegistrar.class)\npublic class UserManagementAutoConfiguration {\n</code></pre>\n<p>but unfortunately it doesn't work with spring boot 3, for spring boot 2 everything is ok.</p>\n<p>When I start my spring boot app depending on this custom starter I can see\n<code>Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.example.starter.model.entity.User</code></p>\n<p>Do you have ideas how to fix it?</p>\n"},{"tags":["java","ajax","groovy","gsp"],"owner":{"account_id":20416928,"reputation":1,"user_id":14978905,"display_name":"Superglu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686234521,"creation_date":1686234521,"question_id":76432898,"body_markdown":"We currently have a customisation deployed on a third party application that uses GSP to accept user input and then sends that to the custom JAVA (Calls REST API) via controller to validate/verify inputs etc.. The GSP uses AJAX to make the calls. \r\n\r\n$.ajax({\r\n                async:false,\r\n                url:&quot;${request.contextPath}/roles/attrs&quot;,\r\n                type:&quot;post&quot;,\r\n                dataType:&quot;html&quot;,\r\n                data:qs,\r\n                success:function (returnData) {\r\n                    returnDataResult=returnData\r\n                },\r\n\r\nAfter an upgrade to the application we are unable to have a custom controller and can only make updates to the GSP and Custom Java. \r\n\r\nI&#39;m trying to find a way to do what was being done above using the controller but without haveing a controller.\r\n\r\nSome use cases:\r\n1. User inputs data to create a new account, the request is pushed to the Java which calls a REST api to check if an account with email already exists, or multiple accounts exist.  The account are then presented back to the user so they can pick one or create a new one.\r\n\r\nThanks in adavance.\r\nOz\r\n\r\nI have tried calling the java directly via scriplets in the GSP. But that doesn&#39;t really help with the interactivness required from th UI.","title":"Best approach for migrating from GSP using Ajax/Controller/Custom Java to Technology/framework that can beused directly from GSP","body":"<p>We currently have a customisation deployed on a third party application that uses GSP to accept user input and then sends that to the custom JAVA (Calls REST API) via controller to validate/verify inputs etc.. The GSP uses AJAX to make the calls.</p>\n<p>$.ajax({\nasync:false,\nurl:&quot;${request.contextPath}/roles/attrs&quot;,\ntype:&quot;post&quot;,\ndataType:&quot;html&quot;,\ndata:qs,\nsuccess:function (returnData) {\nreturnDataResult=returnData\n},</p>\n<p>After an upgrade to the application we are unable to have a custom controller and can only make updates to the GSP and Custom Java.</p>\n<p>I'm trying to find a way to do what was being done above using the controller but without haveing a controller.</p>\n<p>Some use cases:</p>\n<ol>\n<li>User inputs data to create a new account, the request is pushed to the Java which calls a REST api to check if an account with email already exists, or multiple accounts exist.  The account are then presented back to the user so they can pick one or create a new one.</li>\n</ol>\n<p>Thanks in adavance.\nOz</p>\n<p>I have tried calling the java directly via scriplets in the GSP. But that doesn't really help with the interactivness required from th UI.</p>\n"},{"tags":["java","memory","inputstream","unzip"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":1,"creation_date":1686230356,"post_id":76432256,"comment_id":134772718,"body_markdown":"You can&#39;t put **files** into an `Outputstream`, that&#39;s a misnomer. `InputStream` represents the **contents** of the file, not the file itself. If you want to have a particular output file in the end, that is not the responsibility of the code you&#39;re showing, but the responsibility of the code that actually writes the result of your `extractPdfFile` somewhere.","body":"You can&#39;t put <b>files</b> into an <code>Outputstream</code>, that&#39;s a misnomer. <code>InputStream</code> represents the <b>contents</b> of the file, not the file itself. If you want to have a particular output file in the end, that is not the responsibility of the code you&#39;re showing, but the responsibility of the code that actually writes the result of your <code>extractPdfFile</code> somewhere."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686230680,"post_id":76432256,"comment_id":134772792,"body_markdown":"The code you&#39;re showing should properly unzip the file. Why do you think it doesn&#39;t? Like @M.Prokhorov said, you will still need to write the file using the returned `InputStream`.","body":"The code you&#39;re showing should properly unzip the file. Why do you think it doesn&#39;t? Like @M.Prokhorov said, you will still need to write the file using the returned <code>InputStream</code>."},{"owner":{"account_id":1562585,"reputation":21,"user_id":1452125,"display_name":"Rami Khal"},"score":0,"creation_date":1686231668,"post_id":76432256,"comment_id":134773056,"body_markdown":"@Jorn The returned InputStream from the method is in zip format. I sent it into another component, it extracts its name as &quot;.zip&quot;. There might be something wrong here. Could you explain what do you mean by writing the file from the returned InputStream?","body":"@Jorn The returned InputStream from the method is in zip format. I sent it into another component, it extracts its name as &quot;.zip&quot;. There might be something wrong here. Could you explain what do you mean by writing the file from the returned InputStream?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1686231925,"post_id":76432256,"comment_id":134773137,"body_markdown":"@RamiKhal InputStream doesn&#39;t have a name. The other component must be coming up with it itself somehow.","body":"@RamiKhal InputStream doesn&#39;t have a name. The other component must be coming up with it itself somehow."}],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686234477,"creation_date":1686232387,"answer_id":76432586,"question_id":76432256,"body_markdown":"&gt; I have an inputstream that contains a zip file\r\n\r\nNo you do not.  Presumably you mean that you have an `InputStream` from which zip-formatted data can be read.  This is not the same thing, and the distinction can be important.\r\n\r\n&gt; I need to extract a specific file from this zip file, and put the extracted file in an inputstream, with extracted file type and name.\r\n\r\nAnd that&#39;s one of the ways in which it&#39;s important.  The data in a stream do not have an associated filename.  A stream is just a conduit for data.  You may create a stream that provides content from a particular file, but that&#39;s not a recognizable characteristic of the stream itself.  The type of the file&#39;s content is characteristic of the data, of course, but if by &quot;file type&quot; you mean &quot;filename extension&quot; or similar, then no, that just is not part of an `InputStream`.\r\n\r\nA `ZipInputStream` in particular does support a higher level of abstraction over the content, so that you can read it as  a sequence of `ZipEntry`s and their associated data, but that&#39;s a capability enabled by the specific form of the data (zip).  There is no analogue for generic `InputStream`s.\r\n\r\n&gt; I tried the following flow: [...] But it returns the new inputstream in zip format not .pdf.\r\n\r\nImplausible.  The various `ZipInputStream.read()` methods read the *uncompressed* data of an entry.  This is documented, and it has worked correctly for a very long time.  You have implemented an approach that will successfully extract that uncompressed data, and will provide an `InputStream` from which that uncompressed data can then be read.\r\n\r\nBut again, there is no file name or extension associated with the stream that is returned.  It&#39;s not even backed by a file.  The stream just provides a sequence of bytes from an array.  If you want to convey an associated filename then you need to do that separately.  For example, perhaps you want to provide the `ZipEntry` describing the file, along with the `InputStream` from which the data can be read -- almost like `ZipInputStream` does itself.\r\n\r\nYou might, for example, bundle that together like so:\r\n```\r\npublic class UncompressedData {\r\n\r\n    private byte[] bytes;\r\n    private String originalFilename;\r\n    private boolean isDirectory;\r\n    // ...\r\n\r\n    private UncompressedData() {\r\n        // empty\r\n    }\r\n\r\n    /**\r\n     * Creates and returns an UncompressedData object representing the\r\n     * current entry of the specified ZipInputStream, as described by\r\n     * the specified ZipEntry\r\n     */\r\n    public static UncompressedData fromZip(ZipEntry entry, ZipInputStream stream)\r\n            throws MyUncompressedDataException {\r\n        UncompressedData data = new UncompressedData();\r\n\r\n        data.originalFilename = entry.getName();\r\n        data.isDirectory = entry.isDirectory();\r\n\r\n        if (data.isDirectory) {\r\n            data.bytes = new byte[0];\r\n        } else {\r\n            int numToRead = entry.getLength();\r\n\r\n            data.bytes = new byte[numToRead];\r\n            for (int offset = 0; offset &lt; numToRead; ) {\r\n                int numRead = stream.read(data.bytes, offset, numToRead);\r\n                if (numRead &lt; 1) {\r\n                    throw new MyCompressedDataException();\r\n                }\r\n\r\n                offset += numRead;\r\n                numToRead -= numRead;\r\n            }\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    /**\r\n     * Creates and returns an InputStream from which the bytes of this\r\n     * UncompressedData can be read.\r\n     */\r\n    public InputStream asStream() {\r\n        return new ByteArrayInputStream(bytes);\r\n    }\r\n\r\n    /**\r\n     * Returns a filename associated with this UncompressedData.\r\n     * Typically, this will be the name of an original source file from which\r\n     * the data were (somehow) obtained.\r\n     */\r\n    public String getOriginalFilename() {\r\n        return originalFilename;\r\n    }\r\n}\r\n```","title":"Unzip specific file from inputstream into another inputstream with same file name and type in java","body":"<blockquote>\n<p>I have an inputstream that contains a zip file</p>\n</blockquote>\n<p>No you do not.  Presumably you mean that you have an <code>InputStream</code> from which zip-formatted data can be read.  This is not the same thing, and the distinction can be important.</p>\n<blockquote>\n<p>I need to extract a specific file from this zip file, and put the extracted file in an inputstream, with extracted file type and name.</p>\n</blockquote>\n<p>And that's one of the ways in which it's important.  The data in a stream do not have an associated filename.  A stream is just a conduit for data.  You may create a stream that provides content from a particular file, but that's not a recognizable characteristic of the stream itself.  The type of the file's content is characteristic of the data, of course, but if by &quot;file type&quot; you mean &quot;filename extension&quot; or similar, then no, that just is not part of an <code>InputStream</code>.</p>\n<p>A <code>ZipInputStream</code> in particular does support a higher level of abstraction over the content, so that you can read it as  a sequence of <code>ZipEntry</code>s and their associated data, but that's a capability enabled by the specific form of the data (zip).  There is no analogue for generic <code>InputStream</code>s.</p>\n<blockquote>\n<p>I tried the following flow: [...] But it returns the new inputstream in zip format not .pdf.</p>\n</blockquote>\n<p>Implausible.  The various <code>ZipInputStream.read()</code> methods read the <em>uncompressed</em> data of an entry.  This is documented, and it has worked correctly for a very long time.  You have implemented an approach that will successfully extract that uncompressed data, and will provide an <code>InputStream</code> from which that uncompressed data can then be read.</p>\n<p>But again, there is no file name or extension associated with the stream that is returned.  It's not even backed by a file.  The stream just provides a sequence of bytes from an array.  If you want to convey an associated filename then you need to do that separately.  For example, perhaps you want to provide the <code>ZipEntry</code> describing the file, along with the <code>InputStream</code> from which the data can be read -- almost like <code>ZipInputStream</code> does itself.</p>\n<p>You might, for example, bundle that together like so:</p>\n<pre><code>public class UncompressedData {\n\n    private byte[] bytes;\n    private String originalFilename;\n    private boolean isDirectory;\n    // ...\n\n    private UncompressedData() {\n        // empty\n    }\n\n    /**\n     * Creates and returns an UncompressedData object representing the\n     * current entry of the specified ZipInputStream, as described by\n     * the specified ZipEntry\n     */\n    public static UncompressedData fromZip(ZipEntry entry, ZipInputStream stream)\n            throws MyUncompressedDataException {\n        UncompressedData data = new UncompressedData();\n\n        data.originalFilename = entry.getName();\n        data.isDirectory = entry.isDirectory();\n\n        if (data.isDirectory) {\n            data.bytes = new byte[0];\n        } else {\n            int numToRead = entry.getLength();\n\n            data.bytes = new byte[numToRead];\n            for (int offset = 0; offset &lt; numToRead; ) {\n                int numRead = stream.read(data.bytes, offset, numToRead);\n                if (numRead &lt; 1) {\n                    throw new MyCompressedDataException();\n                }\n\n                offset += numRead;\n                numToRead -= numRead;\n            }\n        }\n\n        return data;\n    }\n\n    /**\n     * Creates and returns an InputStream from which the bytes of this\n     * UncompressedData can be read.\n     */\n    public InputStream asStream() {\n        return new ByteArrayInputStream(bytes);\n    }\n\n    /**\n     * Returns a filename associated with this UncompressedData.\n     * Typically, this will be the name of an original source file from which\n     * the data were (somehow) obtained.\n     */\n    public String getOriginalFilename() {\n        return originalFilename;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1562585,"reputation":21,"user_id":1452125,"display_name":"Rami Khal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76432586,"answer_count":1,"score":0,"last_activity_date":1686234477,"creation_date":1686230174,"question_id":76432256,"body_markdown":"I have an inputstream that contains a zip file, I need to extract a specific file from this zip file, and put the extracted file in an inputstream, with extracted file type and name. \r\nExample: zip file in an inputstream, I need to unzip &quot;.pdf&quot; file, and put this &quot;.pdf&quot; file in an inputstream with the &quot;.pdf&quot; file name and type.\r\n\r\n\r\nI tried the following flow:\r\n\r\n```\r\nprivate InputStream extractPdfFile(InputStream zipInputStream) {\r\n        try {\r\n            ZipInputStream zip = new ZipInputStream(zipInputStream);\r\n            ZipEntry entry;\r\n            while ((entry = zip.getNextEntry()) != null) {\r\n                String currentFileName = entry.getName();\r\n                if (currentFileName.endsWith(PP_FILE_EXTENTION)) {\r\n                    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n                    byte[] buffer = new byte[2048];\r\n                    int bytesRead;\r\n                    while ((bytesRead = zip.read(buffer)) != -1) {\r\n                        outputStream.write(buffer, 0, bytesRead);\r\n                    }\r\n                    zip.closeEntry();\r\n                    zip.close();\r\n                    outputStream.close();\r\n                    return new ByteArrayInputStream(outputStream.toByteArray());\r\n                }\r\n                zip.closeEntry();\r\n            }\r\n\r\n            zip.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null; // File not found in the zip\r\n    }\r\n\r\n```\r\n\r\nBut it returns the new inputstream in zip format not .pdf.\r\n\r\nAny idea how to unzip a file from inputstream and return the extracted file unzipped in another inputstream?","title":"Unzip specific file from inputstream into another inputstream with same file name and type in java","body":"<p>I have an inputstream that contains a zip file, I need to extract a specific file from this zip file, and put the extracted file in an inputstream, with extracted file type and name.\nExample: zip file in an inputstream, I need to unzip &quot;.pdf&quot; file, and put this &quot;.pdf&quot; file in an inputstream with the &quot;.pdf&quot; file name and type.</p>\n<p>I tried the following flow:</p>\n<pre><code>private InputStream extractPdfFile(InputStream zipInputStream) {\n        try {\n            ZipInputStream zip = new ZipInputStream(zipInputStream);\n            ZipEntry entry;\n            while ((entry = zip.getNextEntry()) != null) {\n                String currentFileName = entry.getName();\n                if (currentFileName.endsWith(PP_FILE_EXTENTION)) {\n                    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n                    byte[] buffer = new byte[2048];\n                    int bytesRead;\n                    while ((bytesRead = zip.read(buffer)) != -1) {\n                        outputStream.write(buffer, 0, bytesRead);\n                    }\n                    zip.closeEntry();\n                    zip.close();\n                    outputStream.close();\n                    return new ByteArrayInputStream(outputStream.toByteArray());\n                }\n                zip.closeEntry();\n            }\n\n            zip.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null; // File not found in the zip\n    }\n\n</code></pre>\n<p>But it returns the new inputstream in zip format not .pdf.</p>\n<p>Any idea how to unzip a file from inputstream and return the extracted file unzipped in another inputstream?</p>\n"},{"tags":["java","pdf-generation","pdfbox","pdfbox-layout"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1686239530,"post_id":76432825,"comment_id":134774963,"body_markdown":"How is all of this related to &quot;attachment&quot;? From what I understand, you want to change the font in an existing PDF, and add images and tables. (PDF isn&#39;t really made for editing, such changes are incredibly difficult, it&#39;s better to get the original WORD or whatever file)","body":"How is all of this related to &quot;attachment&quot;? From what I understand, you want to change the font in an existing PDF, and add images and tables. (PDF isn&#39;t really made for editing, such changes are incredibly difficult, it&#39;s better to get the original WORD or whatever file)"},{"owner":{"account_id":10001806,"reputation":253,"user_id":7397485,"accept_rate":45,"display_name":"Rosa Mystica"},"score":0,"creation_date":1686241121,"post_id":76432825,"comment_id":134775283,"body_markdown":"@TilmanHausherr Currently I have an api which generate the customers report pdf using pdfBox . I want to add an attachment file of pdf format to the same customers report pdf with some content on it. Most of the time the content inside the attachment is some plain text. What I want is to change the color and font type of attachment  as I do it for the main pdf document ( pdPageContentStream.setFont(PDType1Font.COURIER_BOLD_OBLIQUE, 35) )","body":"@TilmanHausherr Currently I have an api which generate the customers report pdf using pdfBox . I want to add an attachment file of pdf format to the same customers report pdf with some content on it. Most of the time the content inside the attachment is some plain text. What I want is to change the color and font type of attachment  as I do it for the main pdf document ( pdPageContentStream.setFont(PDType1Font.COURIER_BOLD_OBLIQUE&zwnj;&#8203;, 35) )"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1686293241,"post_id":76432825,"comment_id":134781689,"body_markdown":"For starters, have you tried to change `PDType1Font.COURIER_BOLD_OBLIQUE` to something else, e.g. `PDType1Font.HELVETICA` and set the color with `setNonStrokingColor(Color.red)`? I still don&#39;t see how this is related to &quot;attachment&quot;.","body":"For starters, have you tried to change <code>PDType1Font.COURIER_BOLD_OBLIQUE</code> to something else, e.g. <code>PDType1Font.HELVETICA</code> and set the color with <code>setNonStrokingColor(Color.red)</code>? I still don&#39;t see how this is related to &quot;attachment&quot;."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1686311837,"post_id":76432825,"comment_id":134784990,"body_markdown":"Don&#39;t assume you can simply change font and color of text in an existing pdf. Under certain benign circumstances (the pdf being built in certain ways, the replacement font matching the original one in some aspects) it is possible to some degree but to verify that your pdfs allow that, we&#39;d need representative examples. *Adding* stuff, on the other hand, usually is easy.","body":"Don&#39;t assume you can simply change font and color of text in an existing pdf. Under certain benign circumstances (the pdf being built in certain ways, the replacement font matching the original one in some aspects) it is possible to some degree but to verify that your pdfs allow that, we&#39;d need representative examples. <i>Adding</i> stuff, on the other hand, usually is easy."},{"owner":{"account_id":10001806,"reputation":253,"user_id":7397485,"accept_rate":45,"display_name":"Rosa Mystica"},"score":0,"creation_date":1686329411,"post_id":76432825,"comment_id":134788847,"body_markdown":"@TilmanHausherr I tried by adding the color setNonStrokingColor(Color.red) and font PDType1Font.HELVETICA but it is applicable only in case of the parent document. It will not work for the attachment contents. To answer your question how it is related to attachments even the font color and type is applicable for a pdf attachment as well. I am not sure the issue is coming because the file type in the above code is text/plain. I have an issue related to creating pdf type attachments , sometimes this will fix once fix the issue with pdf attachment -  https://stackoverflow.com/questions/76442124","body":"@TilmanHausherr I tried by adding the color setNonStrokingColor(Color.red) and font PDType1Font.HELVETICA but it is applicable only in case of the parent document. It will not work for the attachment contents. To answer your question how it is related to attachments even the font color and type is applicable for a pdf attachment as well. I am not sure the issue is coming because the file type in the above code is text/plain. I have an issue related to creating pdf type attachments , sometimes this will fix once fix the issue with pdf attachment -  <a href=\"https://stackoverflow.com/questions/76442124\">stackoverflow.com/questions/76442124</a>"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1686335292,"post_id":76432825,"comment_id":134789893,"body_markdown":"Ah, I missed the &quot;text/plain&quot; part. Text files are just that. If you have seen a PDF where the text/plain attachment can be shown in different colors, please upload it somewhere, I&#39;d have a look at it with PDFDebugger.","body":"Ah, I missed the &quot;text/plain&quot; part. Text files are just that. If you have seen a PDF where the text/plain attachment can be shown in different colors, please upload it somewhere, I&#39;d have a look at it with PDFDebugger."},{"owner":{"account_id":10001806,"reputation":253,"user_id":7397485,"accept_rate":45,"display_name":"Rosa Mystica"},"score":0,"creation_date":1686335670,"post_id":76432825,"comment_id":134789949,"body_markdown":"Thank you @TilmanHausherr I assume text/plain cannot be shown with a different font color and type. It will always use the default from the editor we use. And most of the time default is Arial Black with font size 11.  But I am sure it will render with color and specified font type in &#39;application/pdf &#39; file type. But I am not able to render a &#39;application/pdf &#39; document attachment. It is giving some error as you can see in  stackoverflow.com/questions/76442124  Will you able to provide an input on that issue","body":"Thank you @TilmanHausherr I assume text/plain cannot be shown with a different font color and type. It will always use the default from the editor we use. And most of the time default is Arial Black with font size 11.  But I am sure it will render with color and specified font type in &#39;application/pdf &#39; file type. But I am not able to render a &#39;application/pdf &#39; document attachment. It is giving some error as you can see in  stackoverflow.com/questions/76442124  Will you able to provide an input on that issue"}],"owner":{"account_id":10001806,"reputation":253,"user_id":7397485,"accept_rate":45,"display_name":"Rosa Mystica"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686233982,"creation_date":1686233982,"question_id":76432825,"body_markdown":"\r\nI&#39;m currently working on adding an attachment to a PDF using the PDFBox library in Java. While referring to the code snippet,   [Adding a File Attachment][1]\r\n\r\n\r\n  [1]: https://pdfbox.apache.org/1.8/cookbook/workingwithattachments.html#:~:text=Adding%20a%20File%20Attachment,attached%20to%20the%20document%20catalog. \r\nI successfully attached the document created using ByteArrayInputStream to the attachment. However, I noticed that the font type and color of the attachment&#39;s contents remain the same. How to modify the font color and type for the contents of the attachment.\r\n\r\nThe code snippet I used is as below,\r\n\r\n            // create a new tree node and add the embedded file\r\n            PDEmbeddedFilesNameTreeNode efTree = new PDEmbeddedFilesNameTreeNode();\r\n            Map&lt;String, PDComplexFileSpecification&gt; treeNodeMap = new HashMap&lt;&gt;();\r\n\r\n            for (Map.Entry&lt;String, String&gt; entry : keyValueMap.entrySet()) {\r\n\r\n                // first create the file specification, which holds the embedded file\r\n                PDComplexFileSpecification fs = new PDComplexFileSpecification();\r\n                fs.setFile(entry.getKey());\r\n                // create a dummy file stream, this would probably normally be a FileInputStream\r\n                byte[] data = entry.getValue().getBytes();\r\n                ByteArrayInputStream fakeFile = new ByteArrayInputStream(data);              \r\n                // now lets some of the optional parameters\r\n                PDEmbeddedFile ef = new PDEmbeddedFile(doc, fakeFile);\r\n                ef.setSubtype(&quot;text/plain&quot;);\r\n                ef.setSize(data.length);\r\n                ef.setCreationDate(Calendar.getInstance());\r\n                fs.setEmbeddedFile(ef);\r\n                treeNodeMap.put(entry.getKey(), fs);\r\n            }\r\n\r\n            efTree.setNames(treeNodeMap);\r\n\r\n            // add the tree to the document catalog\r\n            PDDocumentNameDictionary names = new PDDocumentNameDictionary(doc.getDocumentCatalog());\r\n            names.setEmbeddedFiles(efTree);\r\n            doc.getDocumentCatalog().setNames(names);\r\nAlso I would like to know if it is possible to add image and tables in the attachment along with other contents using pdfBox library . I am using 2.0.25 version of pdf box","title":"Change the font color and font type of an attachment content using PDFBox","body":"<p>I'm currently working on adding an attachment to a PDF using the PDFBox library in Java. While referring to the code snippet,   <a href=\"https://pdfbox.apache.org/1.8/cookbook/workingwithattachments.html#:%7E:text=Adding%20a%20File%20Attachment,attached%20to%20the%20document%20catalog.\" rel=\"nofollow noreferrer\">Adding a File Attachment</a></p>\n<p>I successfully attached the document created using ByteArrayInputStream to the attachment. However, I noticed that the font type and color of the attachment's contents remain the same. How to modify the font color and type for the contents of the attachment.</p>\n<p>The code snippet I used is as below,</p>\n<pre><code>        // create a new tree node and add the embedded file\n        PDEmbeddedFilesNameTreeNode efTree = new PDEmbeddedFilesNameTreeNode();\n        Map&lt;String, PDComplexFileSpecification&gt; treeNodeMap = new HashMap&lt;&gt;();\n\n        for (Map.Entry&lt;String, String&gt; entry : keyValueMap.entrySet()) {\n\n            // first create the file specification, which holds the embedded file\n            PDComplexFileSpecification fs = new PDComplexFileSpecification();\n            fs.setFile(entry.getKey());\n            // create a dummy file stream, this would probably normally be a FileInputStream\n            byte[] data = entry.getValue().getBytes();\n            ByteArrayInputStream fakeFile = new ByteArrayInputStream(data);              \n            // now lets some of the optional parameters\n            PDEmbeddedFile ef = new PDEmbeddedFile(doc, fakeFile);\n            ef.setSubtype(&quot;text/plain&quot;);\n            ef.setSize(data.length);\n            ef.setCreationDate(Calendar.getInstance());\n            fs.setEmbeddedFile(ef);\n            treeNodeMap.put(entry.getKey(), fs);\n        }\n\n        efTree.setNames(treeNodeMap);\n\n        // add the tree to the document catalog\n        PDDocumentNameDictionary names = new PDDocumentNameDictionary(doc.getDocumentCatalog());\n        names.setEmbeddedFiles(efTree);\n        doc.getDocumentCatalog().setNames(names);\n</code></pre>\n<p>Also I would like to know if it is possible to add image and tables in the attachment along with other contents using pdfBox library . I am using 2.0.25 version of pdf box</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686234891,"post_id":76432807,"comment_id":134773921,"body_markdown":"I suppose, `thenApplyAsync(ignore -&gt; { ... }` is considered fine enough. For example, look at `Map.compute()` javadoc: &quot;For example, to either create or append a String msg to a value mapping:\n `map.compute(key, (k, v) -&gt; (v == null) ? msg : v.concat(msg))`&quot; Here `k` is ignored yet it is an officially proposed solution","body":"I suppose, <code>thenApplyAsync(ignore -&gt; { ... }</code> is considered fine enough. For example, look at <code>Map.compute()</code> javadoc: &quot;For example, to either create or append a String msg to a value mapping:  <code>map.compute(key, (k, v) -&gt; (v == null) ? msg : v.concat(msg))</code>&quot; Here <code>k</code> is ignored yet it is an officially proposed solution"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1686242505,"post_id":76432807,"comment_id":134775546,"body_markdown":"[…and of course the answer is always the same: because no one implemented it. Features start off as unimplemented and only become implemented when people spend effort implementing them: no effort, no feature](https://ericlippert.com/2012/03/09/why-not-automatically-infer-constraints/#:~:text=and%20of%20course%20the%20answer%20is%20always%20the%20same%3A%20because%20no%20one%20implemented%20it.%20Features%20start%20off%20as%20unimplemented%20and%20only%20become%20implemented%20when%20people%20spend%20effort%20implementing%20them%3A%20no%20effort%2C%20no%20feature)","body":"<a href=\"https://ericlippert.com/2012/03/09/why-not-automatically-infer-constraints/#:~:text=and%20of%20course%20the%20answer%20is%20always%20the%20same%3A%20because%20no%20one%20implemented%20it.%20Features%20start%20off%20as%20unimplemented%20and%20only%20become%20implemented%20when%20people%20spend%20effort%20implementing%20them%3A%20no%20effort%2C%20no%20feature\" rel=\"nofollow noreferrer\">…and of course the answer is always the same: because no one implemented it. Features start off as unimplemented and only become implemented when people spend effort implementing them: no effort, no feature</a>"}],"owner":{"account_id":29303,"reputation":10257,"user_id":79111,"accept_rate":87,"display_name":"Ton van den Heuvel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1686233865,"creation_date":1686233865,"question_id":76432807,"body_markdown":"I am using Java 8, and have some completable future of the following form:\r\n\r\n```\r\nCompletableFuture.runAsync(() -&gt; { ... }, executorA).thenRunAsync(() -&gt; { ... }, executorB);\r\n```\r\n\r\nNow I would like to have the second asynchronous operation return some value, and I was expecting to have a function like `thenSupplyAsync` taking a `Supplier`, but alas it does not seem to exist. The following works, but is not very nice:\r\n\r\n\r\n```\r\nCompletableFuture.runAsync(() -&gt; { ... }, executorA).thenApplyAsync(ignore -&gt; { ... }, executorB);\r\n```\r\n\r\nI would like to write:\r\n\r\n\r\n```\r\nCompletableFuture.runAsync(() -&gt; { ... }, executorA).thenSupplyAsync(() -&gt; { ... }, executorB);\r\n```\r\n\r\nIs there a reason why `CompletableFuture.thenSupplyAsync()` does not exist?","title":"Why is there no equivalent to `CompletableFuture.thenSupplyAsync()`","body":"<p>I am using Java 8, and have some completable future of the following form:</p>\n<pre><code>CompletableFuture.runAsync(() -&gt; { ... }, executorA).thenRunAsync(() -&gt; { ... }, executorB);\n</code></pre>\n<p>Now I would like to have the second asynchronous operation return some value, and I was expecting to have a function like <code>thenSupplyAsync</code> taking a <code>Supplier</code>, but alas it does not seem to exist. The following works, but is not very nice:</p>\n<pre><code>CompletableFuture.runAsync(() -&gt; { ... }, executorA).thenApplyAsync(ignore -&gt; { ... }, executorB);\n</code></pre>\n<p>I would like to write:</p>\n<pre><code>CompletableFuture.runAsync(() -&gt; { ... }, executorA).thenSupplyAsync(() -&gt; { ... }, executorB);\n</code></pre>\n<p>Is there a reason why <code>CompletableFuture.thenSupplyAsync()</code> does not exist?</p>\n"},{"tags":["java","file","http","url","blob"],"owner":{"account_id":26516221,"reputation":11,"user_id":20150707,"display_name":"pipo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686233613,"creation_date":1686233613,"question_id":76432766,"body_markdown":"I want to convert a blob to a mp3-audiFile from my own website so i made this testclass. I keep on getting this message, and when i remove &#39;blob:&#39; from the link, i get a FileNotFoundException. How can I solve this? I cannot really find anything on the internet that gives a sollution.\r\n\r\n    import javax.sound.sampled.spi.AudioFileReader;\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.net.MalformedURLException;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    import java.nio.file.Files;\r\n    import java.sql.*;\r\n\r\n    public class Main {\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        class AudioConverter {\r\n\r\n            public static File convertBlobToAudio(String blobLink, String title) throws IOException {\r\n\r\n                URL url = new URL(blobLink);\r\n\r\n                InputStream inputStream = url.openStream();\r\n\r\n                File audioFile = File.createTempFile(title, &quot;.mp3&quot;);\r\n\r\n                Files.copy(inputStream, audioFile.toPath());\r\n\r\n                return audioFile;\r\n\r\n            }\r\n\r\n            public static File getAndOrCreateDirectory(String username) {\r\n\r\n                String directory = &quot;C:\\\\Users\\\\prody\\\\IdeaProjects\\\\testje3\\\\src\\\\instrumentals&quot;;\r\n\r\n                File[] fileList = new File(directory).listFiles();\r\n\r\n                for (File file: fileList) {\r\n                    if (file.getName().equals(username)) {\r\n                        return file;\r\n                    }\r\n                }\r\n\r\n                File newDirectory = new File(directory, username);\r\n\r\n                if (newDirectory.mkdirs()) {\r\n                    return newDirectory;\r\n                }\r\n\r\n                return null;\r\n\r\n            }\r\n\r\n            public static boolean addAudioToDirectory(File audioFile, File directory) {\r\n\r\n                return audioFile.renameTo(directory);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        File audio = AudioConverter.convertBlobToAudio(&quot;http://localhost:8080/cb4f0a31-57ef-407a-b56a-0d9eebf1a82f&quot;, &quot;title&quot;);\r\n        System.out.println(audio);\r\n\r\n        File directory = AudioConverter.getAndOrCreateDirectory(&quot;prodByPieter&quot;);\r\n        System.out.println(directory);\r\n\r\n        boolean succes = AudioConverter.addAudioToDirectory(audio, directory);\r\n        System.out.println(succes);\r\n    }\r\n}\r\n\r\nThis is the message that i get: \r\n\r\n    Exception in thread &quot;main&quot; java.net.MalformedURLException: unknown protocol: blob\r\n\tat java.base/java.net.URL.&lt;init&gt;(URL.java:682)\r\n\tat java.base/java.net.URL.&lt;init&gt;(URL.java:570)\r\n\tat java.base/java.net.URL.&lt;init&gt;(URL.java:517)\r\n\tat Main$1AudioConverter.convertBlobToAudio(Main.java:18)\r\n\tat Main.main(Main.java:60)\r\n\r\n\r\n\r\n\r\n","title":"Cannot get blob","body":"<p>I want to convert a blob to a mp3-audiFile from my own website so i made this testclass. I keep on getting this message, and when i remove 'blob:' from the link, i get a FileNotFoundException. How can I solve this? I cannot really find anything on the internet that gives a sollution.</p>\n<pre><code>import javax.sound.sampled.spi.AudioFileReader;\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.nio.file.Files;\nimport java.sql.*;\n\npublic class Main {\npublic static void main(String[] args) throws IOException {\n\n    class AudioConverter {\n\n        public static File convertBlobToAudio(String blobLink, String title) throws IOException {\n\n            URL url = new URL(blobLink);\n\n            InputStream inputStream = url.openStream();\n\n            File audioFile = File.createTempFile(title, &quot;.mp3&quot;);\n\n            Files.copy(inputStream, audioFile.toPath());\n\n            return audioFile;\n\n        }\n\n        public static File getAndOrCreateDirectory(String username) {\n\n            String directory = &quot;C:\\\\Users\\\\prody\\\\IdeaProjects\\\\testje3\\\\src\\\\instrumentals&quot;;\n\n            File[] fileList = new File(directory).listFiles();\n\n            for (File file: fileList) {\n                if (file.getName().equals(username)) {\n                    return file;\n                }\n            }\n\n            File newDirectory = new File(directory, username);\n\n            if (newDirectory.mkdirs()) {\n                return newDirectory;\n            }\n\n            return null;\n\n        }\n\n        public static boolean addAudioToDirectory(File audioFile, File directory) {\n\n            return audioFile.renameTo(directory);\n\n        }\n\n    }\n\n    File audio = AudioConverter.convertBlobToAudio(&quot;http://localhost:8080/cb4f0a31-57ef-407a-b56a-0d9eebf1a82f&quot;, &quot;title&quot;);\n    System.out.println(audio);\n\n    File directory = AudioConverter.getAndOrCreateDirectory(&quot;prodByPieter&quot;);\n    System.out.println(directory);\n\n    boolean succes = AudioConverter.addAudioToDirectory(audio, directory);\n    System.out.println(succes);\n}\n</code></pre>\n<p>}</p>\n<p>This is the message that i get:</p>\n<pre><code>Exception in thread &quot;main&quot; java.net.MalformedURLException: unknown protocol: blob\nat java.base/java.net.URL.&lt;init&gt;(URL.java:682)\nat java.base/java.net.URL.&lt;init&gt;(URL.java:570)\nat java.base/java.net.URL.&lt;init&gt;(URL.java:517)\nat Main$1AudioConverter.convertBlobToAudio(Main.java:18)\nat Main.main(Main.java:60)\n</code></pre>\n"},{"tags":["java","bufferedimage","graphics2d"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1686080069,"post_id":76416484,"comment_id":134749548,"body_markdown":"One idea is to create an application model made up of lines, circles, and cubes.  The application model is made up of one or more plain Java getter/setter classes.  Your drawing `JPanel` then draws the logical model.","body":"One idea is to create an application model made up of lines, circles, and cubes.  The application model is made up of one or more plain Java getter/setter classes.  Your drawing <code>JPanel</code> then draws the logical model."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1686080430,"post_id":76416484,"comment_id":134749615,"body_markdown":"If you need hit detection I would think it would be better to keep a `List` of `Shape` objects to paint. The Shape can be added to the List in its rotated state. Then when doing hit detection you should be able to just iterate through the List to see in any Shape contains the mouse point. Check out [Playing With Shapes](https://tips4java.wordpress.com/2013/05/13/playing-with-shapes/) for more information.","body":"If you need hit detection I would think it would be better to keep a <code>List</code> of <code>Shape</code> objects to paint. The Shape can be added to the List in its rotated state. Then when doing hit detection you should be able to just iterate through the List to see in any Shape contains the mouse point. Check out <a href=\"https://tips4java.wordpress.com/2013/05/13/playing-with-shapes/\" rel=\"nofollow noreferrer\">Playing With Shapes</a> for more information."},{"owner":{"account_id":16738185,"reputation":25,"user_id":12098648,"display_name":"Gizmo Dailys"},"score":1,"creation_date":1686139789,"post_id":76416484,"comment_id":134757700,"body_markdown":"@camickr this might be exactly what I need. thank you. If you create an actual response i will mark it as the right one for my use.","body":"@camickr this might be exactly what I need. thank you. If you create an actual response i will mark it as the right one for my use."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1686147001,"post_id":76416484,"comment_id":134759429,"body_markdown":"@GizmoDailys, this site doesn&#39;t like to have answers that link to an external site which is why I added it as a comment to give you and idea for the approach.","body":"@GizmoDailys, this site doesn&#39;t like to have answers that link to an external site which is why I added it as a comment to give you and idea for the approach."},{"owner":{"account_id":16738185,"reputation":25,"user_id":12098648,"display_name":"Gizmo Dailys"},"score":0,"creation_date":1686163326,"post_id":76416484,"comment_id":134762989,"body_markdown":"@camickr Ah gotcha welp it worked like a charm. there is wrong code in his classes but is easy to fix.","body":"@camickr Ah gotcha welp it worked like a charm. there is wrong code in his classes but is easy to fix."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1686170689,"post_id":76416484,"comment_id":134764294,"body_markdown":"@GizmoDailys, hmm, sorry about that. That code on my machine has been updated version. Guess I forgot to update the website. The new version is on the website. It also contains a new &quot;translate(...)` method. Thanks for pointing this out.","body":"@GizmoDailys, hmm, sorry about that. That code on my machine has been updated version. Guess I forgot to update the website. The new version is on the website. It also contains a new &quot;translate(...)` method. Thanks for pointing this out."},{"owner":{"account_id":16738185,"reputation":25,"user_id":12098648,"display_name":"Gizmo Dailys"},"score":0,"creation_date":1686225053,"post_id":76416484,"comment_id":134771387,"body_markdown":"@camickr I just realized you are the author of the link you sent me lol. It worked like a charm. the code I was referencing was in the rotation under shapeutils you are rotating about a fixed point not the objects center. I was also wondering if you per chance had an idea as to how to rotate a polygon such as a triangle?","body":"@camickr I just realized you are the author of the link you sent me lol. It worked like a charm. the code I was referencing was in the rotation under shapeutils you are rotating about a fixed point not the objects center. I was also wondering if you per chance had an idea as to how to rotate a polygon such as a triangle?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1686233640,"post_id":76416484,"comment_id":134773586,"body_markdown":"@GizmoDailys how to rotate a polygon such as a triangle? - not sure I understand the question. A pollygon is a Shape. Any Shape can be rotated. See answer below.","body":"@GizmoDailys how to rotate a polygon such as a triangle? - not sure I understand the question. A pollygon is a Shape. Any Shape can be rotated. See answer below."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686233565,"creation_date":1686233238,"answer_id":76432716,"question_id":76416484,"body_markdown":"If you need hit detection you can keep a `List` of `Shape` objects to paint.\r\n\r\n1. in the `paintComponent(...)` method you then iterate through the `List` to paint each `Shape`\r\n2. In the `MouseListener` you iterate through the `List` and invoke the `contains(...)` method on the `Shape`.\r\n\r\nBefore adding the `Shape` to the List you can use the `ShapeUtils.rotate(...)` method to rotate the `Shape` so the `Shape` is painted correctly and hit detection works.\r\n\r\n    import java.awt.Point;\r\n    import java.awt.Polygon;\r\n    import java.awt.Rectangle;\r\n    import java.awt.Shape;\r\n    import java.awt.geom.AffineTransform;\r\n    import java.awt.geom.Path2D;\r\n    import java.awt.geom.GeneralPath;\r\n    \r\n    /**\r\n     *\tCollection of static methods to make working with Shapes easier.\r\n     */\r\n    public class ShapeUtils\r\n    {\r\n    \t/**\r\n    \t *  The points of the Shape are calculated by specifying the radius of each\r\n    \t *  point. You must specify the number of points to be calculated as well\r\n    \t *  as an array (varargs) containing the radius for each point. The\r\n    \t *  calculation of each Point will use the radius modulo array.length.\r\n    \t *  For example you can create Shapes like the following:\r\n    \t *\r\n    \t *  Shape hexagon = ShapeUtils.radiusShape(6, 10);\r\n    \t *  Shape star = ShapeUtils.radiusShape(16, 20, 8);\r\n    \t *  Shape doubleStar = ShapeUtils.radiusShape(16, 20, 8, 14, 8);\r\n    \t *\r\n    \t *  @param point the number of points contained in the Shape\r\n    \t *  @param radii one or more radius used to calculate a specific point\r\n    \t *\r\n    \t *  @returns a Shape containing all the calculated points\r\n    \t */\r\n    \t public static Shape radiusShape(int points, int... radii)\r\n    \t {\r\n    \t\tPolygon polygon = new Polygon();\r\n    \r\n    \t\tfor (int i = 0; i &lt; points; i++)\r\n    \t\t{\r\n    \t\t\tdouble radians = Math.toRadians(i * 360 / points);\r\n    \t\t\tint radius = radii[i % radii.length];\r\n    \r\n    \t\t\tdouble x = Math.cos(radians) * radius;\r\n    \t\t\tdouble y = Math.sin(radians) * radius;\r\n    \r\n    \t\t\tpolygon.addPoint((int)x, (int)y);\r\n    \t\t}\r\n    \r\n    \t\tRectangle bounds = polygon.getBounds();\r\n    \t\tpolygon.translate(-bounds.x, -bounds.y);\r\n    \r\n    \t\treturn polygon;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t *  Rotate a Shape about its center in a clockwise direction by a specified angle\r\n    \t *\r\n    \t *  @param shape the Shape to rotate\r\n    \t *  @param angle the angle in degrees\r\n    \t *\r\n    \t *  @returns a new rotated Shape object\r\n    \t */\r\n    \tpublic static Shape rotate(Shape shape, int angle)\r\n    \t{\r\n    \t\tdouble radians = Math.toRadians( angle );\r\n    \t\tRectangle bounds = shape.getBounds();\r\n    \t\tdouble anchorX = bounds.x + bounds.width / 2;\r\n    \t\tdouble anchorY = bounds.y + bounds.height / 2;\r\n    \t\tAffineTransform at = AffineTransform.getRotateInstance(radians, anchorX, anchorY);\r\n    \t\tShape rotated = at.createTransformedShape(shape);\r\n    \r\n    \t\treturn rotated;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t *  Translate a Shape\r\n    \t *\r\n    \t *  @param shape the Shape to rotate\r\n    \t *  @param point the Point containing the requested translation\r\n    \t *\r\n    \t *  @returns a new translated Shape object\r\n    \t */\r\n    \tpublic static Shape translate(Shape shape, Point point)\r\n    \t{\r\n    \t\tAffineTransform at = AffineTransform.getTranslateInstance(point.x, point.y);\r\n    \t\tShape translated = at.createTransformedShape(shape);\r\n    \r\n    \t\treturn translated;\r\n    \t}\r\n    }\r\n\r\nCheck out: [Drag a Painted Shape](https://stackoverflow.com/a/67443344/131872) for a complete working example.\r\n\r\nNote, I changed code in the above link:\r\n\r\n\t//shapePanel.addShape(barBell, Color.RED);\r\n\tshapePanel.addShape( ShapeUtils.rotate(barBell, 45), Color.RED);\r\n\r\nto demonstrate how to rotate any `Shape`.\r\n\r\nYou can also check out [Playing With Shapes](https://tips4java.wordpress.com/2013/05/13/playing-with-shapes/) for more information and the most current version of the `ShapeUtils` code (in case it changes).","title":"How to translate a bounding box for selection purposes with a bufferedimage rotation","body":"<p>If you need hit detection you can keep a <code>List</code> of <code>Shape</code> objects to paint.</p>\n<ol>\n<li>in the <code>paintComponent(...)</code> method you then iterate through the <code>List</code> to paint each <code>Shape</code></li>\n<li>In the <code>MouseListener</code> you iterate through the <code>List</code> and invoke the <code>contains(...)</code> method on the <code>Shape</code>.</li>\n</ol>\n<p>Before adding the <code>Shape</code> to the List you can use the <code>ShapeUtils.rotate(...)</code> method to rotate the <code>Shape</code> so the <code>Shape</code> is painted correctly and hit detection works.</p>\n<pre><code>import java.awt.Point;\nimport java.awt.Polygon;\nimport java.awt.Rectangle;\nimport java.awt.Shape;\nimport java.awt.geom.AffineTransform;\nimport java.awt.geom.Path2D;\nimport java.awt.geom.GeneralPath;\n\n/**\n *  Collection of static methods to make working with Shapes easier.\n */\npublic class ShapeUtils\n{\n    /**\n     *  The points of the Shape are calculated by specifying the radius of each\n     *  point. You must specify the number of points to be calculated as well\n     *  as an array (varargs) containing the radius for each point. The\n     *  calculation of each Point will use the radius modulo array.length.\n     *  For example you can create Shapes like the following:\n     *\n     *  Shape hexagon = ShapeUtils.radiusShape(6, 10);\n     *  Shape star = ShapeUtils.radiusShape(16, 20, 8);\n     *  Shape doubleStar = ShapeUtils.radiusShape(16, 20, 8, 14, 8);\n     *\n     *  @param point the number of points contained in the Shape\n     *  @param radii one or more radius used to calculate a specific point\n     *\n     *  @returns a Shape containing all the calculated points\n     */\n     public static Shape radiusShape(int points, int... radii)\n     {\n        Polygon polygon = new Polygon();\n\n        for (int i = 0; i &lt; points; i++)\n        {\n            double radians = Math.toRadians(i * 360 / points);\n            int radius = radii[i % radii.length];\n\n            double x = Math.cos(radians) * radius;\n            double y = Math.sin(radians) * radius;\n\n            polygon.addPoint((int)x, (int)y);\n        }\n\n        Rectangle bounds = polygon.getBounds();\n        polygon.translate(-bounds.x, -bounds.y);\n\n        return polygon;\n    }\n\n    /**\n     *  Rotate a Shape about its center in a clockwise direction by a specified angle\n     *\n     *  @param shape the Shape to rotate\n     *  @param angle the angle in degrees\n     *\n     *  @returns a new rotated Shape object\n     */\n    public static Shape rotate(Shape shape, int angle)\n    {\n        double radians = Math.toRadians( angle );\n        Rectangle bounds = shape.getBounds();\n        double anchorX = bounds.x + bounds.width / 2;\n        double anchorY = bounds.y + bounds.height / 2;\n        AffineTransform at = AffineTransform.getRotateInstance(radians, anchorX, anchorY);\n        Shape rotated = at.createTransformedShape(shape);\n\n        return rotated;\n    }\n\n    /**\n     *  Translate a Shape\n     *\n     *  @param shape the Shape to rotate\n     *  @param point the Point containing the requested translation\n     *\n     *  @returns a new translated Shape object\n     */\n    public static Shape translate(Shape shape, Point point)\n    {\n        AffineTransform at = AffineTransform.getTranslateInstance(point.x, point.y);\n        Shape translated = at.createTransformedShape(shape);\n\n        return translated;\n    }\n}\n</code></pre>\n<p>Check out: <a href=\"https://stackoverflow.com/a/67443344/131872\">Drag a Painted Shape</a> for a complete working example.</p>\n<p>Note, I changed code in the above link:</p>\n<pre><code>//shapePanel.addShape(barBell, Color.RED);\nshapePanel.addShape( ShapeUtils.rotate(barBell, 45), Color.RED);\n</code></pre>\n<p>to demonstrate how to rotate any <code>Shape</code>.</p>\n<p>You can also check out <a href=\"https://tips4java.wordpress.com/2013/05/13/playing-with-shapes/\" rel=\"nofollow noreferrer\">Playing With Shapes</a> for more information and the most current version of the <code>ShapeUtils</code> code (in case it changes).</p>\n"}],"owner":{"account_id":16738185,"reputation":25,"user_id":12098648,"display_name":"Gizmo Dailys"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76432716,"answer_count":1,"score":0,"last_activity_date":1686233565,"creation_date":1686067566,"question_id":76416484,"body_markdown":"I am trying to keep a bounding box local to a buffered image after it is being rotated.\r\n\r\nGood day everyone. I am having an issue with a program I am currently working on. I draw an image to a buffered image then that buffered image on to the actual panel. I did it this way because I have multiple objects being drawn and rotated on one jpanel and it seemed easier to keep track of and rotate them to me.\r\n```\r\npublic void draw(Graphics2D g2, JPanel p)\r\n{\r\n\tBufferedImage bufferedImage = new BufferedImage(Width + 40, Height + 40, BufferedImage.TYPE_INT_ARGB); \r\n    Graphics2D g2d = (Graphics2D) bufferedImage.getGraphics();  // Graphics for the first object only\r\n\t    \r\n\tAffineTransform old = g2.getTransform();\r\n\t\t\r\n\tg2d.setStroke(new BasicStroke(2));\r\n\tg2d.setColor(Color.blue);\r\n\t\t\r\n\tif(type.equals(&quot;cone&quot;))\r\n\t{\r\n\t\t\t\r\n\t}\r\n\telse if(type.equals(&quot;cube&quot;))\r\n\t{\r\n\t\tg2d.drawRect(20, 20, Width, Height);\r\n\t}\r\n\telse if(type.equals(&quot;circle&quot;))\r\n\t{\r\n\t\tg2d.drawOval(20, 20, Width, Height);\r\n\t}\r\n\telse if(type.equals(&quot;line&quot;))\r\n\t{\r\n\t\tg2d.drawRect(20, 20, Width, Height);\r\n\t}\r\n\t\t\r\n\tif(isselected)\r\n\t\tdrawbounding(g2d, p);\r\n\t\t\r\n\tg2.rotate((double) rotate, X, Y);\r\n\tg2.drawImage(bufferedImage, X, Y, p);\r\n\t\t\r\n\tg2d.setTransform(old);\r\n}\r\n```\r\nThe above code is the way I draw and rotate everything. I am then using this next code segment to calculate whether a click is inside of a pre determined bounding box.\r\n\r\n```\r\npublic boolean isSelected(int x, int y)\r\n{\r\n\tif(x &gt; X &amp;&amp; x &lt; X + 40 + Width)\r\n\t{\r\n\t\tif(y &gt; Y &amp;&amp; y &lt; Y + 40 + Height)\r\n\t\t{\r\n\t\t\tisselected = true;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\t\t\r\n\tisselected = false;\r\n\treturn false;\r\n}\r\n```\r\nThe issue I am running in to is that when the buffered image gets rotated the bounding box doesnt rotate with it. I know this has to do with the fact that the bounding box uses global x, y coordinates and the buffered image is local coordinates to the buffered image itself. How would i go about rotating the bounding box with the buffered image?","title":"How to translate a bounding box for selection purposes with a bufferedimage rotation","body":"<p>I am trying to keep a bounding box local to a buffered image after it is being rotated.</p>\n<p>Good day everyone. I am having an issue with a program I am currently working on. I draw an image to a buffered image then that buffered image on to the actual panel. I did it this way because I have multiple objects being drawn and rotated on one jpanel and it seemed easier to keep track of and rotate them to me.</p>\n<pre><code>public void draw(Graphics2D g2, JPanel p)\n{\n    BufferedImage bufferedImage = new BufferedImage(Width + 40, Height + 40, BufferedImage.TYPE_INT_ARGB); \n    Graphics2D g2d = (Graphics2D) bufferedImage.getGraphics();  // Graphics for the first object only\n        \n    AffineTransform old = g2.getTransform();\n        \n    g2d.setStroke(new BasicStroke(2));\n    g2d.setColor(Color.blue);\n        \n    if(type.equals(&quot;cone&quot;))\n    {\n            \n    }\n    else if(type.equals(&quot;cube&quot;))\n    {\n        g2d.drawRect(20, 20, Width, Height);\n    }\n    else if(type.equals(&quot;circle&quot;))\n    {\n        g2d.drawOval(20, 20, Width, Height);\n    }\n    else if(type.equals(&quot;line&quot;))\n    {\n        g2d.drawRect(20, 20, Width, Height);\n    }\n        \n    if(isselected)\n        drawbounding(g2d, p);\n        \n    g2.rotate((double) rotate, X, Y);\n    g2.drawImage(bufferedImage, X, Y, p);\n        \n    g2d.setTransform(old);\n}\n</code></pre>\n<p>The above code is the way I draw and rotate everything. I am then using this next code segment to calculate whether a click is inside of a pre determined bounding box.</p>\n<pre><code>public boolean isSelected(int x, int y)\n{\n    if(x &gt; X &amp;&amp; x &lt; X + 40 + Width)\n    {\n        if(y &gt; Y &amp;&amp; y &lt; Y + 40 + Height)\n        {\n            isselected = true;\n            return true;\n        }\n    }\n        \n    isselected = false;\n    return false;\n}\n</code></pre>\n<p>The issue I am running in to is that when the buffered image gets rotated the bounding box doesnt rotate with it. I know this has to do with the fact that the bounding box uses global x, y coordinates and the buffered image is local coordinates to the buffered image itself. How would i go about rotating the bounding box with the buffered image?</p>\n"},{"tags":["java","sorting","collections","atomicinteger"],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1686229950,"post_id":76431319,"comment_id":134772612,"body_markdown":"`flatMap` will flatten all subsequent elements. So if `chldIdx` is equal or greater than the child list, it will continue with the next parent’s children. You have to use `.skip(prntIdx).limit(1)` to avoid this. But it’s far better to use `List.get()` here anyway…","body":"<code>flatMap</code> will flatten all subsequent elements. So if <code>chldIdx</code> is equal or greater than the child list, it will continue with the next parent’s children. You have to use <code>.skip(prntIdx).limit(1)</code> to avoid this. But it’s far better to use <code>List.get()</code> here anyway…"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686233651,"post_id":76431319,"comment_id":134773589,"body_markdown":"Thanks, my bad, have updated the answer. I also agree it&#39;s much better to use `List.get()`","body":"Thanks, my bad, have updated the answer. I also agree it&#39;s much better to use <code>List.get()</code>"},{"owner":{"account_id":16429668,"reputation":81,"user_id":11868833,"display_name":"Andrzej Więcławski"},"score":0,"creation_date":1686242438,"post_id":76431319,"comment_id":134775535,"body_markdown":"So, simple, so good. Thanks for best solution.","body":"So, simple, so good. Thanks for best solution."}],"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686233526,"creation_date":1686223284,"answer_id":76431319,"question_id":76431040,"body_markdown":"You can do it like this:\r\n\r\n    parents.stream()\r\n            .skip(prntIdx)\r\n            .limit(1)\r\n            .map(ParentEntity::getChildEntities)\r\n            .flatMap(Collection::stream)\r\n            .skip(chldIdx)\r\n            .findFirst()\r\n            .orElse(null)\r\n\r\nOr just use `List.get()`:\r\n\r\n    if (prntIdx &lt; parents.size()) {\r\n        List&lt;ChildEntity&gt; children = parents.get(prntIdx).getChildEntities();\r\n        if (chldIdx &lt; children.size()) {\r\n            return children.get(chldIdx);\r\n        }\r\n    }\r\n    return null;","title":"multi level filtering by index of customized list in java 11","body":"<p>You can do it like this:</p>\n<pre><code>parents.stream()\n        .skip(prntIdx)\n        .limit(1)\n        .map(ParentEntity::getChildEntities)\n        .flatMap(Collection::stream)\n        .skip(chldIdx)\n        .findFirst()\n        .orElse(null)\n</code></pre>\n<p>Or just use <code>List.get()</code>:</p>\n<pre><code>if (prntIdx &lt; parents.size()) {\n    List&lt;ChildEntity&gt; children = parents.get(prntIdx).getChildEntities();\n    if (chldIdx &lt; children.size()) {\n        return children.get(chldIdx);\n    }\n}\nreturn null;\n</code></pre>\n"}],"owner":{"account_id":16429668,"reputation":81,"user_id":11868833,"display_name":"Andrzej Więcławski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686233526,"creation_date":1686221126,"question_id":76431040,"body_markdown":"Instead of adding and updating these extra sequential number fields, I found useful two stage solution when processing well sorted multi-level collections for GUI (where row indexes are calculated on fly):\r\n\r\n```\r\nParentEntity filterByParentAndChildListsIndexes(List&lt;ParentEntity&gt; parents, Integer prntIdx, Integer chldIdx){\r\n   AtomicInteger idx = new AtomicInteger(1); // may be &#39;0&#39;\r\n   Optional&lt;ParentEntity&gt; parentOp = parents.stream().filter(p -&gt; idx.getAndIncrement() == prntIdx).findFirst();\r\n   if (parentOp.isPresent()){\r\n      return childFilter(parentOp.get(), chldIdx);\r\n   }\r\n   return null;\r\n}\r\n\r\nChildEntity childFilter(ParentEntity parent, Integer chldIdx){\r\n   AtomicInteger idx = new AtomicInteger(1); // may be &#39;0&#39;\r\n   return parent.getChildEntities().stream().filter(c -&gt; idx.getAndIncrement() == chldIdx).findFirst().orElse(null);\r\n}\r\n\r\n```\r\nbut it seems redundant and not flexible... so, I would be grateful for suggestions on existing solutions or suggestions for recursion of such multilevel filters.\r\n","title":"multi level filtering by index of customized list in java 11","body":"<p>Instead of adding and updating these extra sequential number fields, I found useful two stage solution when processing well sorted multi-level collections for GUI (where row indexes are calculated on fly):</p>\n<pre><code>ParentEntity filterByParentAndChildListsIndexes(List&lt;ParentEntity&gt; parents, Integer prntIdx, Integer chldIdx){\n   AtomicInteger idx = new AtomicInteger(1); // may be '0'\n   Optional&lt;ParentEntity&gt; parentOp = parents.stream().filter(p -&gt; idx.getAndIncrement() == prntIdx).findFirst();\n   if (parentOp.isPresent()){\n      return childFilter(parentOp.get(), chldIdx);\n   }\n   return null;\n}\n\nChildEntity childFilter(ParentEntity parent, Integer chldIdx){\n   AtomicInteger idx = new AtomicInteger(1); // may be '0'\n   return parent.getChildEntities().stream().filter(c -&gt; idx.getAndIncrement() == chldIdx).findFirst().orElse(null);\n}\n\n</code></pre>\n<p>but it seems redundant and not flexible... so, I would be grateful for suggestions on existing solutions or suggestions for recursion of such multilevel filters.</p>\n"},{"tags":["java","spring","spring-webflux","reactive-programming","project-reactor"],"comments":[{"owner":{"account_id":13816660,"reputation":139,"user_id":9973101,"display_name":"Gopikrishna K S"},"score":0,"creation_date":1686238527,"post_id":76431765,"comment_id":134774763,"body_markdown":"I was trying out the answer posted. Before I could complete, it was deleted. Could the respondent please tell why it was deleted?","body":"I was trying out the answer posted. Before I could complete, it was deleted. Could the respondent please tell why it was deleted?"}],"owner":{"account_id":13816660,"reputation":139,"user_id":9973101,"display_name":"Gopikrishna K S"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686233323,"creation_date":1686226527,"question_id":76431765,"body_markdown":"* My use case is to\r\n  * Get an access token\r\n  * Then call a POST API which gives a URL\r\n  * Then call a GET API with that URL.\r\n* I am using spring webflux.\r\n* Using the following references, I could come up with the following code. But the post API is still saying invalid file, I know I am passing the file wrong as the same API is working fine in postman. It would be a great help if someone could please tell what the issue in it is.\r\n\r\nReferences :\r\n1. https://stackoverflow.com/a/70495497/9973101\r\n2. https://stackoverflow.com/a/74829151/9973101\r\n\r\nCode:\r\n```\r\nMono&lt;GetResponse&gt; function(Mono&lt;FilePart&gt; filePartMono) {\r\n    return filePartMono.flatMap(filePart -&gt; {\r\n\r\n        // Get access token\r\n        MultiValueMap&lt;String, String&gt; formData = new LinkedMultiValueMap&lt;&gt;();\r\n        formData.add(&quot;GRANT_TYPE&quot;, &quot;CLIENT_CREDENTIALS&quot;);\r\n        formData.add(&quot;CLIENT_ID&quot;, getClientId());\r\n        formData.add(&quot;CLIENT_SECRET&quot;, getClientSecret());\r\n\r\n        Mono&lt;AccessTokenWrapper&gt; accessTokenWrapperMono = webClient\r\n            .post()\r\n            .uri(getUrl())\r\n            .contentType(MediaType.APPLICATION_FORM_URLENCODED)\r\n            .body(BodyInserters.fromFormData(formData))\r\n            .retrieve()\r\n            .bodyToMono(AccessTokenWrapper.class);\r\n\r\n        \r\n        // Make the POST request using token\r\n        Mono&lt;PostResponse&gt; postResponseMono = accessTokenWrapperMono.flatMap(accessTokenWrapper -&gt; {\r\n            MultipartBodyBuilder multipartBodyBuilder = new MultipartBodyBuilder();\r\n            multipartBodyBuilder.asyncPart(&quot;file&quot;, filePart.content(), DataBuffer.class)\r\n                    .filename(filePart.filename());\r\n\r\n            return Mono.defer(() -&gt; webClient.post()\r\n                    .uri(getBaseUrl() + getPostUrl())\r\n                    .contentType(MediaType.MULTIPART_FORM_DATA)\r\n                    .headers(httpHeaders -&gt; {\r\n                        httpHeaders.setBearerAuth(accessTokenWrapper.getAccessToken());\r\n                    }).body(BodyInserters.fromMultipartData(multipartBodyBuilder.build()))\r\n                    .retrieve()\r\n                    .bodyToMono(UploadResponse.class));\r\n        });\r\n\r\n        // Make the GET request using token and POST response\r\n        return Mono.zip(postResponseMono, accessTokenWrapperMono).flatMap(tuple -&gt; {\r\n            PostResponse postResponse = tuple.getT1();\r\n            AccessTokenWrapper accessTokenWrapper = tuple.getT2();\r\n\r\n            return webClient.get()\r\n                    .uri(getBaseUrl() + postResponse.getGetUrl())\r\n                    .headers(httpHeaders -&gt; {\r\n                        httpHeaders.setBearerAuth(accessTokenWrapper.getAccessToken());\r\n                    }).retrieve()\r\n                    .bodyToMono(GetResponse.class);\r\n        });\r\n\r\n    });\r\n}\r\n\r\n```","title":"Sending a FilePart Mono to an API using WebClient","body":"<ul>\n<li>My use case is to\n<ul>\n<li>Get an access token</li>\n<li>Then call a POST API which gives a URL</li>\n<li>Then call a GET API with that URL.</li>\n</ul>\n</li>\n<li>I am using spring webflux.</li>\n<li>Using the following references, I could come up with the following code. But the post API is still saying invalid file, I know I am passing the file wrong as the same API is working fine in postman. It would be a great help if someone could please tell what the issue in it is.</li>\n</ul>\n<p>References :</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/a/70495497/9973101\">https://stackoverflow.com/a/70495497/9973101</a></li>\n<li><a href=\"https://stackoverflow.com/a/74829151/9973101\">https://stackoverflow.com/a/74829151/9973101</a></li>\n</ol>\n<p>Code:</p>\n<pre><code>Mono&lt;GetResponse&gt; function(Mono&lt;FilePart&gt; filePartMono) {\n    return filePartMono.flatMap(filePart -&gt; {\n\n        // Get access token\n        MultiValueMap&lt;String, String&gt; formData = new LinkedMultiValueMap&lt;&gt;();\n        formData.add(&quot;GRANT_TYPE&quot;, &quot;CLIENT_CREDENTIALS&quot;);\n        formData.add(&quot;CLIENT_ID&quot;, getClientId());\n        formData.add(&quot;CLIENT_SECRET&quot;, getClientSecret());\n\n        Mono&lt;AccessTokenWrapper&gt; accessTokenWrapperMono = webClient\n            .post()\n            .uri(getUrl())\n            .contentType(MediaType.APPLICATION_FORM_URLENCODED)\n            .body(BodyInserters.fromFormData(formData))\n            .retrieve()\n            .bodyToMono(AccessTokenWrapper.class);\n\n        \n        // Make the POST request using token\n        Mono&lt;PostResponse&gt; postResponseMono = accessTokenWrapperMono.flatMap(accessTokenWrapper -&gt; {\n            MultipartBodyBuilder multipartBodyBuilder = new MultipartBodyBuilder();\n            multipartBodyBuilder.asyncPart(&quot;file&quot;, filePart.content(), DataBuffer.class)\n                    .filename(filePart.filename());\n\n            return Mono.defer(() -&gt; webClient.post()\n                    .uri(getBaseUrl() + getPostUrl())\n                    .contentType(MediaType.MULTIPART_FORM_DATA)\n                    .headers(httpHeaders -&gt; {\n                        httpHeaders.setBearerAuth(accessTokenWrapper.getAccessToken());\n                    }).body(BodyInserters.fromMultipartData(multipartBodyBuilder.build()))\n                    .retrieve()\n                    .bodyToMono(UploadResponse.class));\n        });\n\n        // Make the GET request using token and POST response\n        return Mono.zip(postResponseMono, accessTokenWrapperMono).flatMap(tuple -&gt; {\n            PostResponse postResponse = tuple.getT1();\n            AccessTokenWrapper accessTokenWrapper = tuple.getT2();\n\n            return webClient.get()\n                    .uri(getBaseUrl() + postResponse.getGetUrl())\n                    .headers(httpHeaders -&gt; {\n                        httpHeaders.setBearerAuth(accessTokenWrapper.getAccessToken());\n                    }).retrieve()\n                    .bodyToMono(GetResponse.class);\n        });\n\n    });\n}\n\n</code></pre>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":23098975,"reputation":99,"user_id":17208643,"display_name":"hrabrica"},"score":0,"creation_date":1686134219,"post_id":76420919,"comment_id":134756477,"body_markdown":"Can you share a repo at least? This is not enough information. What is the error that you get?","body":"Can you share a repo at least? This is not enough information. What is the error that you get?"},{"owner":{"account_id":28770423,"reputation":1,"user_id":22034299,"display_name":"chia hao"},"score":0,"creation_date":1686153358,"post_id":76420919,"comment_id":134761065,"body_markdown":"I run this many times,it actually can run successfully but it suddenly crush.\nThis is not only file.I have the other file--MainActivity.kt","body":"I run this many times,it actually can run successfully but it suddenly crush. This is not only file.I have the other file--MainActivity.kt"},{"owner":{"account_id":28770423,"reputation":1,"user_id":22034299,"display_name":"chia hao"},"score":0,"creation_date":1686328659,"post_id":76420919,"comment_id":134788727,"body_markdown":"Now,it seems run better than before.It only can show a pattern which has one red worm.","body":"Now,it seems run better than before.It only can show a pattern which has one red worm."}],"owner":{"account_id":28770423,"reputation":1,"user_id":22034299,"display_name":"chia hao"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686233098,"creation_date":1686123411,"question_id":76420919,"body_markdown":"I do an app like SET card game(it is not finished),[I want to show 12 cards on a page from 81 cards I draw.But I try many times it can run successfully through,it crush suddenly.Is there any master can help me?\r\n\r\nthe setcardview is the class that collect 4 different features(number, shape, shading, color). I want to let my cards has base above features,like one purple worm,two green diamond,three orange oval etc.And then random show 12 cards in a page.\r\n&lt;br&gt;MainActivity.kt\r\n```\r\nimport android.graphics.Color\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n\r\n        val cardView = findViewById&lt;SetCardView&gt;(R.id.cardView)\r\n        cardView.color = Color.RED\r\n        cardView.number = 1\r\n        cardView.shape = SetCardView.Shape.WORM\r\n        cardView.shading = SetCardView.Shading.STRIP\r\n    }\r\n}\r\n\r\n```\r\nSetCardView.kt\r\n```\r\nimport android.content.Context\r\nimport android.graphics.Canvas\r\nimport android.graphics.Color\r\nimport android.graphics.Paint\r\nimport android.graphics.Path\r\nimport android.graphics.PointF\r\nimport android.graphics.RectF\r\nimport android.text.TextPaint\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.LinearLayout\r\nimport java.util.Random\r\n\r\nclass SetCardView(context: Context, private val parentLayout: LinearLayout) : View(context) {\r\n    enum class Shape {\r\n        OVAL, DIAMOND, WORM\r\n    }\r\n\r\n    enum class Shading {\r\n        EMPTY, SOLID, STRIP\r\n    }\r\n\r\n    enum class Number {\r\n        ONE, TWO, THREE\r\n    }\r\n\r\n    enum class Colors {\r\n        PURPLE, BLUE, GREEN\r\n    }\r\n\r\n    public var number: Number = Number.ONE\r\n        set(value) {\r\n            field = value\r\n            invalidate()\r\n        }\r\n\r\n    public var shape = Shape.OVAL\r\n        set(value) {\r\n            field = value\r\n            invalidate()\r\n        }\r\n\r\n    public var color = Colors.PURPLE\r\n        set(value) {\r\n            field = value\r\n            invalidate()\r\n        }\r\n\r\n    public var shading = Shading.EMPTY\r\n        set(value) {\r\n            field = value\r\n            invalidate()\r\n        }\r\n\r\n    companion object {\r\n        const val CARD_STANDARD_HEIGHT = 240.0f\r\n        const val CORNER_RADIUS = 12.0f\r\n        const val SYMBOL_WIDTH_SCALE_FACTOR = 0.6f\r\n        const val SYMBOL_HEIGHT_SCALE_FACTOR = 0.125f\r\n        const val STRIP_DISTANCE_SCALE_FACTOR = 0.05f\r\n        const val ROW_COUNT = 9\r\n        const val COLUMN_COUNT = 9\r\n    }\r\n\r\n    private val cornerScaleFactor: Float\r\n        get() = height / CARD_STANDARD_HEIGHT\r\n\r\n    private val cornerRadius: Float\r\n        get() = CORNER_RADIUS * cornerScaleFactor\r\n\r\n    private val mPaint = Paint() // For drawing border and face images\r\n    private val mTextPaint = TextPaint() // for drawing pips (text)\r\n    private val indexCount = Number.values().size * Shape.values().size * Colors.values().size * Shading.values().size\r\n\r\n    init {\r\n        mPaint.isAntiAlias = true\r\n        mPaint.isSubpixelText = true\r\n        mTextPaint.isAntiAlias = true\r\n        mTextPaint.isSubpixelText = true\r\n    }\r\n    private fun drawShapeWithVerticalOffset(canvas: Canvas, voffset: Float) {\r\n        val path = Path()\r\n        val width = width * SYMBOL_WIDTH_SCALE_FACTOR\r\n        val height = height * SYMBOL_HEIGHT_SCALE_FACTOR\r\n\r\n        if (shape == Shape.OVAL) { // OVAL\r\n            val center = PointF((getWidth() / 2).toFloat(), getHeight() / 2 + voffset)\r\n            val left = center.x - width / 2\r\n            val top = center.y - height / 2\r\n            val right = center.x + width / 2\r\n            val bottom = center.y + height / 2\r\n\r\n            val ovalRect = RectF(left, top, right, bottom)\r\n            path.addOval(ovalRect, Path.Direction.CW)\r\n        } else if (shape == Shape.DIAMOND) { // DIAMOND\r\n            val center = PointF((getWidth() / 2).toFloat(), getHeight() / 2 + voffset)\r\n            path.moveTo(center.x, center.y + height / 2)\r\n            path.lineTo(center.x + width / 2, center.y)\r\n            path.lineTo(center.x, center.y - height / 2)\r\n            path.lineTo(center.x - width / 2, center.y)\r\n            path.close()\r\n        } else { // WORM\r\n            val center = PointF((getWidth() / 2).toFloat(), getHeight() / 2 + voffset)\r\n            path.moveTo(center.x - width / 2, center.y + height / 2)\r\n\r\n            val cp1 = PointF(center.x - width / 4, center.y - height * 1.5f)\r\n            val cp2 = PointF(center.x + width / 4, center.y)\r\n            val dst = PointF(center.x + width / 2, center.y - height / 2)\r\n            path.cubicTo(cp1.x, cp1.y, cp2.x, cp2.y, dst.x, dst.y)\r\n\r\n            cp1.x = center.x + width / 2\r\n            cp1.y = center.y + height * 2\r\n            cp2.x = center.x - width / 2\r\n            cp2.y = center.y\r\n\r\n            dst.x = center.x - width / 2\r\n            dst.y = center.y + height / 2\r\n\r\n            path.cubicTo(cp1.x, cp1.y, cp2.x, cp2.y, dst.x, dst.y)\r\n        }\r\n        drawShadingInPath(canvas, path)\r\n        drawShapes(canvas, path)\r\n    }\r\n    private fun drawShapes(canvas: Canvas, path:Path) {\r\n        val width = width * SYMBOL_WIDTH_SCALE_FACTOR\r\n        val height = height * SYMBOL_HEIGHT_SCALE_FACTOR\r\n\r\n        val center = PointF(width / 2, height / 2)\r\n\r\n        for (i in 0 until number.ordinal + 1) { // Draw the specified number of shapes\r\n            val voffset = height / 2 * (i + 1)\r\n            val path = Path()\r\n            when (shape) {\r\n                Shape.OVAL -&gt; {\r\n                    val left = center.x - width / 2\r\n                    val top = center.y - height / 2 + voffset\r\n                    val right = center.x + width / 2\r\n                    val bottom = center.y + height / 2 + voffset\r\n\r\n                    val ovalRect = RectF(left, top, right, bottom)\r\n                    path.addOval(ovalRect, Path.Direction.CW)\r\n                }\r\n\r\n                Shape.DIAMOND -&gt; {\r\n                    path.moveTo(center.x, center.y + height / 2 + voffset)\r\n                    path.lineTo(center.x + width / 2, center.y + voffset)\r\n                    path.lineTo(center.x, center.y - height / 2 + voffset)\r\n                    path.lineTo(center.x - width / 2, center.y + voffset)\r\n                    path.close()\r\n                }\r\n\r\n                Shape.WORM -&gt; {\r\n                    path.moveTo(center.x - width / 2, center.y + height / 2 + voffset)\r\n\r\n                    val cp1 = PointF(center.x - width / 4, center.y - height * 1.5f + voffset)\r\n                    val cp2 = PointF(center.x + width / 4, center.y + voffset)\r\n                    val dst = PointF(center.x + width / 2, center.y - height / 2 + voffset)\r\n                    path.cubicTo(cp1.x, cp1.y, cp2.x, cp2.y, dst.x, dst.y)\r\n\r\n                    cp1.x = center.x + width / 2\r\n                    cp1.y = center.y + height * 2 + voffset\r\n                    cp2.x = center.x - width / 2\r\n                    cp2.y = center.y + voffset\r\n\r\n                    dst.x = center.x - width / 2\r\n                    dst.y = center.y + height / 2 + voffset\r\n\r\n                    path.cubicTo(cp1.x, cp1.y, cp2.x, cp2.y, dst.x, dst.y)\r\n                }\r\n            }\r\n            drawShadingInPath(canvas, path)\r\n        }\r\n    }\r\n    private fun drawShadingInPath(canvas: Canvas, path: Path) {\r\n        mPaint.style = Paint.Style.FILL\r\n        mPaint.color = when (color) {\r\n            Colors.PURPLE -&gt; Color.rgb(154, 18, 179)\r\n            Colors.BLUE -&gt; Color.rgb(18, 106, 179)\r\n            Colors.GREEN -&gt; Color.rgb(18, 179, 31)\r\n        }\r\n\r\n        when (shading) {\r\n            Shading.EMPTY -&gt; {\r\n                canvas.drawPath(path, mPaint)\r\n            }\r\n\r\n            Shading.SOLID -&gt; {\r\n                canvas.drawPath(path, mPaint)\r\n            }\r\n\r\n            Shading.STRIP -&gt; {\r\n                val stripDistance = width * STRIP_DISTANCE_SCALE_FACTOR\r\n                var x = 0f\r\n                while (x &lt; width) {\r\n                    path.moveTo(x, 0f)\r\n                    path.lineTo(x, height.toFloat())\r\n                    x += stripDistance\r\n                }\r\n                canvas.drawPath(path, mPaint)\r\n            }\r\n        }\r\n    }\r\n    override fun onDraw(canvas: Canvas) {\r\n        super.onDraw(canvas)\r\n\r\n        val rect = RectF(0f, 0f, width.toFloat(), height.toFloat())\r\n        val path = Path()\r\n        path.addRoundRect(rect, cornerRadius, cornerRadius, Path.Direction.CW)\r\n\r\n        // fill\r\n        mPaint.style = Paint.Style.FILL\r\n        mPaint.color = Color.WHITE\r\n        canvas.drawPath(path, mPaint)\r\n        // border\r\n        mPaint.style = Paint.Style.STROKE\r\n        mPaint.strokeWidth = 3.0f\r\n        mPaint.color = Color.BLACK\r\n        canvas.drawPath(path, mPaint)\r\n\r\n        val cardWidth = width / COLUMN_COUNT\r\n        val cardHeight = height / ROW_COUNT\r\n\r\n        for (i in 0 until ROW_COUNT) {\r\n            for (j in 0 until COLUMN_COUNT) {\r\n                val cardIndex = i * COLUMN_COUNT + j\r\n                val index = cardIndex % indexCount\r\n\r\n                // Calculate the card properties based on the index\r\n                val number = Number.values()[index % Number.values().size]\r\n                val shape = Shape.values()[(index / Number.values().size) % Shape.values().size]\r\n                val color =\r\n                    Colors.values()[(index / (Number.values().size * Shape.values().size)) % Colors.values().size]\r\n                val shading =\r\n                    Shading.values()[(index / (Number.values().size * Shape.values().size * Colors.values().size)) % Shading.values().size]\r\n\r\n                val left = j * cardWidth + paddingLeft\r\n                val top = i * cardHeight + paddingTop\r\n                val right = left + cardWidth\r\n                val bottom = top + cardHeight\r\n            }\r\n        }\r\n    }\r\n    fun setRandomCards() {\r\n        val cardList = mutableListOf&lt;Pair&lt;Number, Shape&gt;&gt;() // Create a list to hold the card attributes\r\n        val random = Random()\r\n\r\n        // Generate 12 unique random cards\r\n        while (cardList.size &lt; 12) {\r\n            val number = Number.values()[random.nextInt(Number.values().size)]\r\n            val shape = Shape.values()[random.nextInt(Shape.values().size)]\r\n            val pair = Pair(number, shape)\r\n\r\n            if (!cardList.contains(pair)) {\r\n                cardList.add(pair)\r\n            }\r\n        }\r\n        // Shuffle the cardList to display the cards randomly\r\n        cardList.shuffle()\r\n\r\n        // Set the cards in the SetCardView\r\n        for (i in 0 until cardList.size) {\r\n            val number = cardList[i].first\r\n            val shape = cardList[i].second\r\n            val cardView = SetCardView(context, parentLayout)\r\n            cardView.number = number\r\n            cardView.shape = shape\r\n            cardView.color = Colors.PURPLE\r\n            cardView.shading = shading\r\n\r\n            // Calculate the card&#39;s position in the grid\r\n            val cardWidth = width / COLUMN_COUNT\r\n            val cardHeight = height / ROW_COUNT\r\n            val column = i % COLUMN_COUNT\r\n            val row = i / COLUMN_COUNT\r\n            val left = column * cardWidth + paddingLeft\r\n            val top = row * cardHeight + paddingTop\r\n            val right = left + cardWidth\r\n            val bottom = top + cardHeight\r\n\r\n            cardView.layoutParams = LinearLayout.LayoutParams(cardWidth, cardHeight)\r\n            cardView.layout(left, top, right, bottom)\r\n            parentLayout.addView(cardView)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n","title":"How can I get 12 cards in a page?","body":"<p>I do an app like SET card game(it is not finished),[I want to show 12 cards on a page from 81 cards I draw.But I try many times it can run successfully through,it crush suddenly.Is there any master can help me?</p>\n<p>the setcardview is the class that collect 4 different features(number, shape, shading, color). I want to let my cards has base above features,like one purple worm,two green diamond,three orange oval etc.And then random show 12 cards in a page.\n<br>MainActivity.kt</p>\n<pre><code>import android.graphics.Color\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val cardView = findViewById&lt;SetCardView&gt;(R.id.cardView)\n        cardView.color = Color.RED\n        cardView.number = 1\n        cardView.shape = SetCardView.Shape.WORM\n        cardView.shading = SetCardView.Shading.STRIP\n    }\n}\n\n</code></pre>\n<p>SetCardView.kt</p>\n<pre><code>import android.content.Context\nimport android.graphics.Canvas\nimport android.graphics.Color\nimport android.graphics.Paint\nimport android.graphics.Path\nimport android.graphics.PointF\nimport android.graphics.RectF\nimport android.text.TextPaint\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.LinearLayout\nimport java.util.Random\n\nclass SetCardView(context: Context, private val parentLayout: LinearLayout) : View(context) {\n    enum class Shape {\n        OVAL, DIAMOND, WORM\n    }\n\n    enum class Shading {\n        EMPTY, SOLID, STRIP\n    }\n\n    enum class Number {\n        ONE, TWO, THREE\n    }\n\n    enum class Colors {\n        PURPLE, BLUE, GREEN\n    }\n\n    public var number: Number = Number.ONE\n        set(value) {\n            field = value\n            invalidate()\n        }\n\n    public var shape = Shape.OVAL\n        set(value) {\n            field = value\n            invalidate()\n        }\n\n    public var color = Colors.PURPLE\n        set(value) {\n            field = value\n            invalidate()\n        }\n\n    public var shading = Shading.EMPTY\n        set(value) {\n            field = value\n            invalidate()\n        }\n\n    companion object {\n        const val CARD_STANDARD_HEIGHT = 240.0f\n        const val CORNER_RADIUS = 12.0f\n        const val SYMBOL_WIDTH_SCALE_FACTOR = 0.6f\n        const val SYMBOL_HEIGHT_SCALE_FACTOR = 0.125f\n        const val STRIP_DISTANCE_SCALE_FACTOR = 0.05f\n        const val ROW_COUNT = 9\n        const val COLUMN_COUNT = 9\n    }\n\n    private val cornerScaleFactor: Float\n        get() = height / CARD_STANDARD_HEIGHT\n\n    private val cornerRadius: Float\n        get() = CORNER_RADIUS * cornerScaleFactor\n\n    private val mPaint = Paint() // For drawing border and face images\n    private val mTextPaint = TextPaint() // for drawing pips (text)\n    private val indexCount = Number.values().size * Shape.values().size * Colors.values().size * Shading.values().size\n\n    init {\n        mPaint.isAntiAlias = true\n        mPaint.isSubpixelText = true\n        mTextPaint.isAntiAlias = true\n        mTextPaint.isSubpixelText = true\n    }\n    private fun drawShapeWithVerticalOffset(canvas: Canvas, voffset: Float) {\n        val path = Path()\n        val width = width * SYMBOL_WIDTH_SCALE_FACTOR\n        val height = height * SYMBOL_HEIGHT_SCALE_FACTOR\n\n        if (shape == Shape.OVAL) { // OVAL\n            val center = PointF((getWidth() / 2).toFloat(), getHeight() / 2 + voffset)\n            val left = center.x - width / 2\n            val top = center.y - height / 2\n            val right = center.x + width / 2\n            val bottom = center.y + height / 2\n\n            val ovalRect = RectF(left, top, right, bottom)\n            path.addOval(ovalRect, Path.Direction.CW)\n        } else if (shape == Shape.DIAMOND) { // DIAMOND\n            val center = PointF((getWidth() / 2).toFloat(), getHeight() / 2 + voffset)\n            path.moveTo(center.x, center.y + height / 2)\n            path.lineTo(center.x + width / 2, center.y)\n            path.lineTo(center.x, center.y - height / 2)\n            path.lineTo(center.x - width / 2, center.y)\n            path.close()\n        } else { // WORM\n            val center = PointF((getWidth() / 2).toFloat(), getHeight() / 2 + voffset)\n            path.moveTo(center.x - width / 2, center.y + height / 2)\n\n            val cp1 = PointF(center.x - width / 4, center.y - height * 1.5f)\n            val cp2 = PointF(center.x + width / 4, center.y)\n            val dst = PointF(center.x + width / 2, center.y - height / 2)\n            path.cubicTo(cp1.x, cp1.y, cp2.x, cp2.y, dst.x, dst.y)\n\n            cp1.x = center.x + width / 2\n            cp1.y = center.y + height * 2\n            cp2.x = center.x - width / 2\n            cp2.y = center.y\n\n            dst.x = center.x - width / 2\n            dst.y = center.y + height / 2\n\n            path.cubicTo(cp1.x, cp1.y, cp2.x, cp2.y, dst.x, dst.y)\n        }\n        drawShadingInPath(canvas, path)\n        drawShapes(canvas, path)\n    }\n    private fun drawShapes(canvas: Canvas, path:Path) {\n        val width = width * SYMBOL_WIDTH_SCALE_FACTOR\n        val height = height * SYMBOL_HEIGHT_SCALE_FACTOR\n\n        val center = PointF(width / 2, height / 2)\n\n        for (i in 0 until number.ordinal + 1) { // Draw the specified number of shapes\n            val voffset = height / 2 * (i + 1)\n            val path = Path()\n            when (shape) {\n                Shape.OVAL -&gt; {\n                    val left = center.x - width / 2\n                    val top = center.y - height / 2 + voffset\n                    val right = center.x + width / 2\n                    val bottom = center.y + height / 2 + voffset\n\n                    val ovalRect = RectF(left, top, right, bottom)\n                    path.addOval(ovalRect, Path.Direction.CW)\n                }\n\n                Shape.DIAMOND -&gt; {\n                    path.moveTo(center.x, center.y + height / 2 + voffset)\n                    path.lineTo(center.x + width / 2, center.y + voffset)\n                    path.lineTo(center.x, center.y - height / 2 + voffset)\n                    path.lineTo(center.x - width / 2, center.y + voffset)\n                    path.close()\n                }\n\n                Shape.WORM -&gt; {\n                    path.moveTo(center.x - width / 2, center.y + height / 2 + voffset)\n\n                    val cp1 = PointF(center.x - width / 4, center.y - height * 1.5f + voffset)\n                    val cp2 = PointF(center.x + width / 4, center.y + voffset)\n                    val dst = PointF(center.x + width / 2, center.y - height / 2 + voffset)\n                    path.cubicTo(cp1.x, cp1.y, cp2.x, cp2.y, dst.x, dst.y)\n\n                    cp1.x = center.x + width / 2\n                    cp1.y = center.y + height * 2 + voffset\n                    cp2.x = center.x - width / 2\n                    cp2.y = center.y + voffset\n\n                    dst.x = center.x - width / 2\n                    dst.y = center.y + height / 2 + voffset\n\n                    path.cubicTo(cp1.x, cp1.y, cp2.x, cp2.y, dst.x, dst.y)\n                }\n            }\n            drawShadingInPath(canvas, path)\n        }\n    }\n    private fun drawShadingInPath(canvas: Canvas, path: Path) {\n        mPaint.style = Paint.Style.FILL\n        mPaint.color = when (color) {\n            Colors.PURPLE -&gt; Color.rgb(154, 18, 179)\n            Colors.BLUE -&gt; Color.rgb(18, 106, 179)\n            Colors.GREEN -&gt; Color.rgb(18, 179, 31)\n        }\n\n        when (shading) {\n            Shading.EMPTY -&gt; {\n                canvas.drawPath(path, mPaint)\n            }\n\n            Shading.SOLID -&gt; {\n                canvas.drawPath(path, mPaint)\n            }\n\n            Shading.STRIP -&gt; {\n                val stripDistance = width * STRIP_DISTANCE_SCALE_FACTOR\n                var x = 0f\n                while (x &lt; width) {\n                    path.moveTo(x, 0f)\n                    path.lineTo(x, height.toFloat())\n                    x += stripDistance\n                }\n                canvas.drawPath(path, mPaint)\n            }\n        }\n    }\n    override fun onDraw(canvas: Canvas) {\n        super.onDraw(canvas)\n\n        val rect = RectF(0f, 0f, width.toFloat(), height.toFloat())\n        val path = Path()\n        path.addRoundRect(rect, cornerRadius, cornerRadius, Path.Direction.CW)\n\n        // fill\n        mPaint.style = Paint.Style.FILL\n        mPaint.color = Color.WHITE\n        canvas.drawPath(path, mPaint)\n        // border\n        mPaint.style = Paint.Style.STROKE\n        mPaint.strokeWidth = 3.0f\n        mPaint.color = Color.BLACK\n        canvas.drawPath(path, mPaint)\n\n        val cardWidth = width / COLUMN_COUNT\n        val cardHeight = height / ROW_COUNT\n\n        for (i in 0 until ROW_COUNT) {\n            for (j in 0 until COLUMN_COUNT) {\n                val cardIndex = i * COLUMN_COUNT + j\n                val index = cardIndex % indexCount\n\n                // Calculate the card properties based on the index\n                val number = Number.values()[index % Number.values().size]\n                val shape = Shape.values()[(index / Number.values().size) % Shape.values().size]\n                val color =\n                    Colors.values()[(index / (Number.values().size * Shape.values().size)) % Colors.values().size]\n                val shading =\n                    Shading.values()[(index / (Number.values().size * Shape.values().size * Colors.values().size)) % Shading.values().size]\n\n                val left = j * cardWidth + paddingLeft\n                val top = i * cardHeight + paddingTop\n                val right = left + cardWidth\n                val bottom = top + cardHeight\n            }\n        }\n    }\n    fun setRandomCards() {\n        val cardList = mutableListOf&lt;Pair&lt;Number, Shape&gt;&gt;() // Create a list to hold the card attributes\n        val random = Random()\n\n        // Generate 12 unique random cards\n        while (cardList.size &lt; 12) {\n            val number = Number.values()[random.nextInt(Number.values().size)]\n            val shape = Shape.values()[random.nextInt(Shape.values().size)]\n            val pair = Pair(number, shape)\n\n            if (!cardList.contains(pair)) {\n                cardList.add(pair)\n            }\n        }\n        // Shuffle the cardList to display the cards randomly\n        cardList.shuffle()\n\n        // Set the cards in the SetCardView\n        for (i in 0 until cardList.size) {\n            val number = cardList[i].first\n            val shape = cardList[i].second\n            val cardView = SetCardView(context, parentLayout)\n            cardView.number = number\n            cardView.shape = shape\n            cardView.color = Colors.PURPLE\n            cardView.shading = shading\n\n            // Calculate the card's position in the grid\n            val cardWidth = width / COLUMN_COUNT\n            val cardHeight = height / ROW_COUNT\n            val column = i % COLUMN_COUNT\n            val row = i / COLUMN_COUNT\n            val left = column * cardWidth + paddingLeft\n            val top = row * cardHeight + paddingTop\n            val right = left + cardWidth\n            val bottom = top + cardHeight\n\n            cardView.layoutParams = LinearLayout.LayoutParams(cardWidth, cardHeight)\n            cardView.layout(left, top, right, bottom)\n            parentLayout.addView(cardView)\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","cpu","cpu-usage"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1686240199,"post_id":76432682,"comment_id":134775080,"body_markdown":"One thing that occurs to me is that you could use `flatMap` (or, in newer versions of Java, `mapMulti`), and only produce lines that you wanted to include, leaving out all the `Optional` stuff, but that would only reduce the work a bit, not the CPU utilization.","body":"One thing that occurs to me is that you could use <code>flatMap</code> (or, in newer versions of Java, <code>mapMulti</code>), and only produce lines that you wanted to include, leaving out all the <code>Optional</code> stuff, but that would only reduce the work a bit, not the CPU utilization."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1686242991,"post_id":76432682,"comment_id":134775647,"body_markdown":"The first step is to use a profiling tool to find out *why* it is consuming so much CPU or where the time is spent. Then, you can use this information to find out whether you can reduce the CPU consumption. But it’s striking that you apparently read the entire file into the memory first before processing, instead of using, e.g. `Files.lines` to get a `Stream` in the first place and process the lines while reading.","body":"The first step is to use a profiling tool to find out <i>why</i> it is consuming so much CPU or where the time is spent. Then, you can use this information to find out whether you can reduce the CPU consumption. But it’s striking that you apparently read the entire file into the memory first before processing, instead of using, e.g. <code>Files.lines</code> to get a <code>Stream</code> in the first place and process the lines while reading."},{"owner":{"account_id":27698333,"reputation":3,"user_id":21143502,"display_name":"Young Kim"},"score":0,"creation_date":1686319957,"post_id":76432682,"comment_id":134786847,"body_markdown":"Thank you everyone who contributed to this post. \nMartheen That post really helped\n@Holger Thank you for that! I didn&#39;t know that was a bad practice. &quot;Reading entire file into memory first before processing&quot; wasn&#39;t something I thought about before!","body":"Thank you everyone who contributed to this post.  Martheen That post really helped @Holger Thank you for that! I didn&#39;t know that was a bad practice. &quot;Reading entire file into memory first before processing&quot; wasn&#39;t something I thought about before!"}],"owner":{"account_id":27698333,"reputation":3,"user_id":21143502,"display_name":"Young Kim"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1686320053,"answer_count":0,"score":0,"last_activity_date":1686232966,"creation_date":1686232966,"question_id":76432682,"body_markdown":"```\r\nprivate List&lt;String&gt; processLinesWithLogFilter(List&lt;String&gt; lines) {\r\n    return lines.stream()\r\n        .map(logFilter::filter)\r\n        .filter(Optional::isPresent)\r\n        .map(Optional::get)\r\n        .collect(Collectors.toList());\r\n```\r\n\r\nList\\&lt;String\\&gt; lines is a huge list which contains from 300,000 to 1,000,000. My purpose is to filter out the huge log file and be selective on what I would like to be included.\r\n\r\nThe above code is what is causing high CPU utilization in the java application. I would like to reduce it by any method. I do not mind it taking longer than expected as long as CPU utilization is not high.\r\n\r\nThis is what logFilter::filter method contains\r\n\r\n```\r\npublic Optional&lt;String&gt; filter(String log) {\r\nreturn extractor.extract(log).filter(filter::isServiceLog).map(printer::printer);\r\n```\r\n\r\nextract method grabs the log file using StringBuilder, filter method uses Filter object using Matchers.\r\n\r\nIs there a way to lower the CPU Utilization?\r\n\r\nI tried using batch process which divides up the work. It did take longer than the original process but CPU Utilization did not get better.","title":"Lowering CPU utilization of a specific method in a java program that filters 300,000 to 1,000,000","body":"<pre><code>private List&lt;String&gt; processLinesWithLogFilter(List&lt;String&gt; lines) {\n    return lines.stream()\n        .map(logFilter::filter)\n        .filter(Optional::isPresent)\n        .map(Optional::get)\n        .collect(Collectors.toList());\n</code></pre>\n<p>List&lt;String&gt; lines is a huge list which contains from 300,000 to 1,000,000. My purpose is to filter out the huge log file and be selective on what I would like to be included.</p>\n<p>The above code is what is causing high CPU utilization in the java application. I would like to reduce it by any method. I do not mind it taking longer than expected as long as CPU utilization is not high.</p>\n<p>This is what logFilter::filter method contains</p>\n<pre><code>public Optional&lt;String&gt; filter(String log) {\nreturn extractor.extract(log).filter(filter::isServiceLog).map(printer::printer);\n</code></pre>\n<p>extract method grabs the log file using StringBuilder, filter method uses Filter object using Matchers.</p>\n<p>Is there a way to lower the CPU Utilization?</p>\n<p>I tried using batch process which divides up the work. It did take longer than the original process but CPU Utilization did not get better.</p>\n"},{"tags":["java","android"],"owner":{"account_id":28688261,"reputation":33,"user_id":21968069,"display_name":"Anon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686232900,"creation_date":1686232900,"question_id":76432666,"body_markdown":"I want to create tabs that the user swipes left and right between, but the user should also swipe left and right between the views that are within a tab. When the user has swiped to the final view within a tab then the next swipe will take him to the next tab. Here&#39;s an illustration: [Sketch](https://i.stack.imgur.com/EteDK.png)\r\n\r\nI&#39;ve already created an app using the Android Studio Tabs activity template that uses ViewPager and TabLayout. I can&#39;t find any example of how this is supposed to be done. Does anyone have an example or just general idea of how it should be implemented? Thank you.","title":"In Android how do you create Swipeable views inside each tab of a tab layout?","body":"<p>I want to create tabs that the user swipes left and right between, but the user should also swipe left and right between the views that are within a tab. When the user has swiped to the final view within a tab then the next swipe will take him to the next tab. Here's an illustration: <a href=\"https://i.stack.imgur.com/EteDK.png\" rel=\"nofollow noreferrer\">Sketch</a></p>\n<p>I've already created an app using the Android Studio Tabs activity template that uses ViewPager and TabLayout. I can't find any example of how this is supposed to be done. Does anyone have an example or just general idea of how it should be implemented? Thank you.</p>\n"},{"tags":["java","android","pdf"],"owner":{"account_id":3271278,"reputation":65,"user_id":2754606,"display_name":"Jay Ma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686232807,"creation_date":1686232807,"question_id":76432656,"body_markdown":"Currently I have the PDF viewer working through the intent and a local file I want to display from the following code:\r\n\r\n            Intent intent = new Intent(Intent.ACTION_VIEW);\r\n            intent.setDataAndType(uri,&quot;application/pdf&quot;);\r\n            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n            intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n            getApplicationContext().startActivity(intent);\r\n\r\nIs there a way to disable to top menu bar when rendering the PDF through the intent (see picture below)?\r\n\r\n[![top bar][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Atqtu.png","title":"Android Disable Intent PDF Viewer Menu Bar within App","body":"<p>Currently I have the PDF viewer working through the intent and a local file I want to display from the following code:</p>\n<pre><code>        Intent intent = new Intent(Intent.ACTION_VIEW);\n        intent.setDataAndType(uri,&quot;application/pdf&quot;);\n        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\n        getApplicationContext().startActivity(intent);\n</code></pre>\n<p>Is there a way to disable to top menu bar when rendering the PDF through the intent (see picture below)?</p>\n<p><a href=\"https://i.stack.imgur.com/Atqtu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Atqtu.png\" alt=\"top bar\" /></a></p>\n"},{"tags":["java","jcr","jackrabbit-oak"],"owner":{"account_id":3263687,"reputation":755,"user_id":2748659,"accept_rate":50,"display_name":"Wallace Howery"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686232667,"creation_date":1686167329,"question_id":76426675,"body_markdown":"I&#39;m trying to resolve the warning below, happening in an outside dependency of my project. What is a good way to find out what dependency these classes are provided in? I&#39;m using Jackrabbit Oak 1.52.0.\r\n\r\nThe Jackrabbit Oak version I&#39;m using is the most recent available, I&#39;m surprised it would come with warnings. Any other way to resolve this?\r\n\r\nError in the background thread of the persistent cache: java.lang.IllegalStateException: java.lang.AbstractMethodError: \r\nReceiver class org.apache.jackrabbit.oak.plugins.document.persistentCache.KeyDataType \r\ndoes not define or inherit an implementation of the resolved method &#39;abstract void write(org.h2.mvstore.WriteBuffer, java.lang.Object[], int, boolean)&#39; \r\nof interface org.h2.mvstore.type.DataType","title":"How to determine source of a third party dependency to resolve warning","body":"<p>I'm trying to resolve the warning below, happening in an outside dependency of my project. What is a good way to find out what dependency these classes are provided in? I'm using Jackrabbit Oak 1.52.0.</p>\n<p>The Jackrabbit Oak version I'm using is the most recent available, I'm surprised it would come with warnings. Any other way to resolve this?</p>\n<p>Error in the background thread of the persistent cache: java.lang.IllegalStateException: java.lang.AbstractMethodError:\nReceiver class org.apache.jackrabbit.oak.plugins.document.persistentCache.KeyDataType\ndoes not define or inherit an implementation of the resolved method 'abstract void write(org.h2.mvstore.WriteBuffer, java.lang.Object[], int, boolean)'\nof interface org.h2.mvstore.type.DataType</p>\n"},{"tags":["java","arrays","android-studio","nullpointerexception","autocompletetextview"],"comments":[{"owner":{"account_id":944448,"reputation":1094,"user_id":971972,"display_name":"Remc4"},"score":0,"creation_date":1686233043,"post_id":76432611,"comment_id":134773418,"body_markdown":"Can you share the layout file and your activity&#39;s onCreate() code?","body":"Can you share the layout file and your activity&#39;s onCreate() code?"},{"owner":{"account_id":19233037,"reputation":1,"user_id":14054543,"display_name":"Nasir Uddin Vuiya"},"score":0,"creation_date":1686236960,"post_id":76432611,"comment_id":134774410,"body_markdown":"**Here is the code of layout:** `&lt;AutoCompleteTextView\n        android:id=&quot;@+id/autoComplete&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:textSize=&quot;22sp&quot;\n        android:background=&quot;#bf7f7f&quot;\n        android:gravity=&quot;center_horizontal&quot;\n        android:hint=&quot;@string/auto_hint&quot;\n        android:minHeight=&quot;48dp&quot;\n        android:textColor=&quot;#4c3333&quot;\n        tools:ignore=&quot;VisualLintTextFieldSize&quot; /&gt;`","body":"<b>Here is the code of layout:</b> <code>&lt;AutoCompleteTextView         android:id=&quot;@+id&#47;autoComplete&quot;         android:layout_width=&quot;match_parent&quot;         android:layout_height=&quot;wrap_content&quot;         android:layout_marginTop=&quot;20dp&quot;         android:textSize=&quot;22sp&quot;         android:background=&quot;#bf7f7f&quot;         android:gravity=&quot;center_horizontal&quot;         android:hint=&quot;@string&#47;auto_hint&quot;         android:minHeight=&quot;48dp&quot;         android:textColor=&quot;#4c3333&quot;         tools:ignore=&quot;VisualLintTextFieldSize&quot; &#47;&gt;</code>"},{"owner":{"account_id":19233037,"reputation":1,"user_id":14054543,"display_name":"Nasir Uddin Vuiya"},"score":0,"creation_date":1686237100,"post_id":76432611,"comment_id":134774439,"body_markdown":"**Here is the onCreate() method:** `@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        autoView = findViewById(R.id.autoComplete);\n        songAdapter = new ArrayAdapter&lt;&gt;(MainActivity.this, R.layout.spinner, names);\n        autoView.setAdapter(songAdapter);\n        autoView.setThreshold(1);`","body":"<b>Here is the onCreate() method:</b> <code>@Override     protected void onCreate(Bundle savedInstanceState) {         super.onCreate(savedInstanceState);         setContentView(R.layout.activity_main);          autoView = findViewById(R.id.autoComplete);         songAdapter = new ArrayAdapter&lt;&gt;(MainActivity.this, R.layout.spinner, names);         autoView.setAdapter(songAdapter);         autoView.setThreshold(1);</code>"}],"owner":{"account_id":19233037,"reputation":1,"user_id":14054543,"display_name":"Nasir Uddin Vuiya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686232579,"creation_date":1686232579,"question_id":76432611,"body_markdown":"My android app has an AutoCompleteTextView in the activity_main.xml file with an ID &quot;nameACTV&quot;. In the MainActivity.java file, when I try to write AutoCompleteTextView auto=findViewById(R.id.nameACTV) it shows red. When I try to set an adapter to the AutoCompleteTextView, as adapter=new AdapterView() auto.setAdapter(adapter); it says null; What&#39;s wrong?\r\n\r\nI were trying to show some results as listview in the AutoCompleteTextView when the user types something. The listview will use a single line spinner layout and collect data from a StringArray inside the strings.xml file.","title":"AutoCompleteTextView brings null pointer exception","body":"<p>My android app has an AutoCompleteTextView in the activity_main.xml file with an ID &quot;nameACTV&quot;. In the MainActivity.java file, when I try to write AutoCompleteTextView auto=findViewById(R.id.nameACTV) it shows red. When I try to set an adapter to the AutoCompleteTextView, as adapter=new AdapterView() auto.setAdapter(adapter); it says null; What's wrong?</p>\n<p>I were trying to show some results as listview in the AutoCompleteTextView when the user types something. The listview will use a single line spinner layout and collect data from a StringArray inside the strings.xml file.</p>\n"},{"tags":["java","project-loom"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":5,"creation_date":1686232607,"post_id":76432603,"comment_id":134773310,"body_markdown":"You should wait for each of those threads to finish. Currently, your application just exits, taking those still running threads with it.","body":"You should wait for each of those threads to finish. Currently, your application just exits, taking those still running threads with it."},{"owner":{"account_id":7184196,"reputation":129,"user_id":5486863,"display_name":"Mark Rensen"},"score":0,"creation_date":1686234307,"post_id":76432603,"comment_id":134773759,"body_markdown":"Thanks, for the quick response.\nThat makes sense.\nI&#39;ve used join() now and it works","body":"Thanks, for the quick response. That makes sense. I&#39;ve used join() now and it works"}],"owner":{"account_id":7184196,"reputation":129,"user_id":5486863,"display_name":"Mark Rensen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686232543,"creation_date":1686232543,"question_id":76432603,"body_markdown":"I was tinkering with Virtual Threads and made this bit of code: \r\n```\r\n        List&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\r\n\r\n        for(int i = 0; i &lt; 1_000_000; i++){\r\n            var thread = Thread.ofVirtual()\r\n                    .unstarted(()-&gt;{\r\n                            String n = Thread.currentThread().toString();\r\n                        System.out.println(n);\r\n\r\n                    });\r\n            threads.add(thread);\r\n        }\r\n        for (var thread: threads){\r\n            thread.start();\r\n        }\r\n\r\n```\r\nI would expect this to print a million lines that look like `VirtualThread[#31]/runnable@ForkJoinPool-1-worker-2`\r\nHowever, it prints an inconsistent amount of lines like that. Somewhere between 200 and 1000 lines, it varies for each run.\r\n\r\nHow come it doesn&#39;t print a million lines?","title":"Why don&#39;t my 1_000_000 Virtual Threads print a 1_000_000 outcomes?","body":"<p>I was tinkering with Virtual Threads and made this bit of code:</p>\n<pre><code>        List&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\n\n        for(int i = 0; i &lt; 1_000_000; i++){\n            var thread = Thread.ofVirtual()\n                    .unstarted(()-&gt;{\n                            String n = Thread.currentThread().toString();\n                        System.out.println(n);\n\n                    });\n            threads.add(thread);\n        }\n        for (var thread: threads){\n            thread.start();\n        }\n\n</code></pre>\n<p>I would expect this to print a million lines that look like <code>VirtualThread[#31]/runnable@ForkJoinPool-1-worker-2</code>\nHowever, it prints an inconsistent amount of lines like that. Somewhere between 200 and 1000 lines, it varies for each run.</p>\n<p>How come it doesn't print a million lines?</p>\n"},{"tags":["java","scala","inheritance","overriding","traits"],"answers":[{"tags":[],"owner":{"account_id":410963,"reputation":1344,"user_id":783116,"accept_rate":88,"display_name":"josiah"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415401557,"creation_date":1415401557,"answer_id":26811553,"question_id":26811401,"body_markdown":"I&#39;m not sure what the use case would be for this.  Why not just have the User, in Ruby terms, &#39;mixin&#39;, the SecurePasswords trait and override password within it&#39;s class definition?\r\n\r\nComing from Ruby, this might be more difficult to get, but Scala is a compiled language and it&#39;s generally not a good idea to change class definitions dynamically/on-the-fly like this. Think of the type system in Scala as a way of testing your code.  The more you defer code interpretation to runtime, the less testable/safe your code becomes.  This is one of the strengths of Scala/Java/Haskell/... (insert compiled typed language) - the type system can catch a lot of errors at compile time.  Use this to your advantage, don&#39;t fight against it. \r\n\r\nI would look into the use of implicit parameters and how they can relate/be used with traits.\r\n\r\nAlso, without the broader context of what you are trying to accomplish in your code with this pattern, it&#39;s hard to know, but this link might prove useful to you if you are trying to implement some sort of adapter pattern.\r\n\r\nhttp://danielwestheide.com/blog/2013/02/06/the-neophytes-guide-to-scala-part-12-type-classes.html","title":"Scala - override a class method in a trait","body":"<p>I'm not sure what the use case would be for this.  Why not just have the User, in Ruby terms, 'mixin', the SecurePasswords trait and override password within it's class definition?</p>\n\n<p>Coming from Ruby, this might be more difficult to get, but Scala is a compiled language and it's generally not a good idea to change class definitions dynamically/on-the-fly like this. Think of the type system in Scala as a way of testing your code.  The more you defer code interpretation to runtime, the less testable/safe your code becomes.  This is one of the strengths of Scala/Java/Haskell/... (insert compiled typed language) - the type system can catch a lot of errors at compile time.  Use this to your advantage, don't fight against it. </p>\n\n<p>I would look into the use of implicit parameters and how they can relate/be used with traits.</p>\n\n<p>Also, without the broader context of what you are trying to accomplish in your code with this pattern, it's hard to know, but this link might prove useful to you if you are trying to implement some sort of adapter pattern.</p>\n\n<p><a href=\"http://danielwestheide.com/blog/2013/02/06/the-neophytes-guide-to-scala-part-12-type-classes.html\" rel=\"nofollow\">http://danielwestheide.com/blog/2013/02/06/the-neophytes-guide-to-scala-part-12-type-classes.html</a></p>\n"},{"tags":[],"owner":{"account_id":358449,"reputation":42107,"user_id":699224,"accept_rate":67,"display_name":"DNA"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415402571,"creation_date":1415401847,"answer_id":26811603,"question_id":26811401,"body_markdown":"You can provide different password behaviour on a per-instance basis as follows - but you need to provide an explicit trait in each case (default or secure):\r\n\r\n      abstract class User {\r\n        def password(): String\r\n      }\r\n      \r\n      trait SecurePasswords {\r\n        def password(): String = &quot;generating a secure password (non-default)&quot;\r\n      }\r\n      \r\n      trait DefaultPasswords {\r\n        def password(): String = &quot;generating a password (default)&quot;\r\n      }\r\n    \r\n      val a = new User with DefaultPasswords\r\n      val b = new User with SecurePasswords\r\n    \r\n      a.password() // generating a password (default)\r\n      b.password() // generating a secure password (non-default)\r\n\r\nUpdate: However, I think Dan Getz&#39;s answer is probably closer to what you originally asked for","title":"Scala - override a class method in a trait","body":"<p>You can provide different password behaviour on a per-instance basis as follows - but you need to provide an explicit trait in each case (default or secure):</p>\n\n<pre><code>  abstract class User {\n    def password(): String\n  }\n\n  trait SecurePasswords {\n    def password(): String = \"generating a secure password (non-default)\"\n  }\n\n  trait DefaultPasswords {\n    def password(): String = \"generating a password (default)\"\n  }\n\n  val a = new User with DefaultPasswords\n  val b = new User with SecurePasswords\n\n  a.password() // generating a password (default)\n  b.password() // generating a secure password (non-default)\n</code></pre>\n\n<p>Update: However, I think Dan Getz's answer is probably closer to what you originally asked for</p>\n"},{"comments":[{"owner":{"account_id":410963,"reputation":1344,"user_id":783116,"accept_rate":88,"display_name":"josiah"},"score":1,"creation_date":1415402276,"post_id":26811623,"comment_id":42195694,"body_markdown":"After looking at this a bit closer, I think this solution is simpler and more elegant than the one using traits.","body":"After looking at this a bit closer, I think this solution is simpler and more elegant than the one using traits."}],"tags":[],"owner":{"account_id":358449,"reputation":42107,"user_id":699224,"accept_rate":67,"display_name":"DNA"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1415402021,"creation_date":1415402021,"answer_id":26811623,"question_id":26811401,"body_markdown":"In addition to my previous answer - a completely different way to get what you want is to pass the password function into the User class, rather than using traits:\r\n\r\n      class User(pw: ()=&gt;String=default) {\r\n        def password = pw\r\n      }\r\n    \r\n      val default = () =&gt; &quot;generating a password (default)&quot;\r\n      val secure = () =&gt; &quot;generating a secure password (non-default)&quot;\r\n      \r\n      val a = new User()\r\n      val b = new User(secure)\r\n    \r\n      a.password() // generating a password (default)\r\n      b.password() // generating a secure password (non-default)\r\n\r\nAs shown, you can use a default argument to avoid having to specify the password function in the default case.","title":"Scala - override a class method in a trait","body":"<p>In addition to my previous answer - a completely different way to get what you want is to pass the password function into the User class, rather than using traits:</p>\n\n<pre><code>  class User(pw: ()=&gt;String=default) {\n    def password = pw\n  }\n\n  val default = () =&gt; \"generating a password (default)\"\n  val secure = () =&gt; \"generating a secure password (non-default)\"\n\n  val a = new User()\n  val b = new User(secure)\n\n  a.password() // generating a password (default)\n  b.password() // generating a secure password (non-default)\n</code></pre>\n\n<p>As shown, you can use a default argument to avoid having to specify the password function in the default case.</p>\n"},{"tags":[],"owner":{"account_id":3601683,"reputation":8824,"user_id":3004881,"accept_rate":100,"display_name":"Dan Getz"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1415402216,"creation_date":1415402216,"answer_id":26811657,"question_id":26811401,"body_markdown":"The conflict between the two method definitions is because you didn&#39;t make them the &quot;same method&quot;. All you did was make them coincidentally have the same name, arguments, and return type.\r\n\r\nTo make them really the same method, so that one can override the other, define them in the same place:\r\n\r\n    trait HasPassword {\r\n      def password(): String\r\n    }\r\n    \r\n    class User extends HasPassword {\r\n      override def password(): String = &quot;generating a password (default)&quot;\r\n    }\r\n    \r\n    trait SecurePassword extends HasPassword {\r\n      override def password(): String = &quot;generating a password (non-default)&quot;\r\n    }\r\n    \r\n    new User with SecurePassword\r\n\r\nBy being defined in the trait `HasPassword`, and then overridden (instead of doppleganged or duck-typed) in `User` and `SecurePassword`, Scala understands that this is truly the same method being redefined. Thus, when you mix in `SecurePassword`, it can override the `password()` method in `User`.","title":"Scala - override a class method in a trait","body":"<p>The conflict between the two method definitions is because you didn't make them the \"same method\". All you did was make them coincidentally have the same name, arguments, and return type.</p>\n\n<p>To make them really the same method, so that one can override the other, define them in the same place:</p>\n\n<pre><code>trait HasPassword {\n  def password(): String\n}\n\nclass User extends HasPassword {\n  override def password(): String = \"generating a password (default)\"\n}\n\ntrait SecurePassword extends HasPassword {\n  override def password(): String = \"generating a password (non-default)\"\n}\n\nnew User with SecurePassword\n</code></pre>\n\n<p>By being defined in the trait <code>HasPassword</code>, and then overridden (instead of doppleganged or duck-typed) in <code>User</code> and <code>SecurePassword</code>, Scala understands that this is truly the same method being redefined. Thus, when you mix in <code>SecurePassword</code>, it can override the <code>password()</code> method in <code>User</code>.</p>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471968213,"creation_date":1471968213,"answer_id":39105960,"question_id":26811401,"body_markdown":"Note: regarding the error message, there is a pending [issue 128][1] &quot;no ambiguity error when inheriting conflicting member from java default method&quot;\r\n\r\nIt should be resolved in scala 2.12.x by [commit 3a3688f64][2] \r\n\r\n&gt; ## `SD-128` fix override checks for `default` methods\r\n\r\n&gt; The check for inheriting two conflicting members was wrong for default\r\nmethods, leading to a missing error message.\r\n\r\n&gt; We were also not issuing &quot;needs `override&#39; modifier&quot; when overriding a\r\ndefault method.\r\n\r\n\r\n  [1]: https://github.com/scala/scala-dev/issues/128\r\n  [2]: https://github.com/scala/scala/commit/3a3688f64af0755cef5a772d322ac80e08498e54","title":"Scala - override a class method in a trait","body":"<p>Note: regarding the error message, there is a pending <a href=\"https://github.com/scala/scala-dev/issues/128\" rel=\"nofollow\">issue 128</a> \"no ambiguity error when inheriting conflicting member from java default method\"</p>\n\n<p>It should be resolved in scala 2.12.x by <a href=\"https://github.com/scala/scala/commit/3a3688f64af0755cef5a772d322ac80e08498e54\" rel=\"nofollow\">commit 3a3688f64</a> </p>\n\n<blockquote>\n  <h2><code>SD-128</code> fix override checks for <code>default</code> methods</h2>\n  \n  <p>The check for inheriting two conflicting members was wrong for default\n  methods, leading to a missing error message.</p>\n  \n  <p>We were also not issuing \"needs `override' modifier\" when overriding a\n  default method.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":263613,"reputation":1759,"user_id":549296,"accept_rate":80,"display_name":"Michael-7"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686232324,"creation_date":1686231221,"answer_id":76432410,"question_id":26811401,"body_markdown":"I ran into a similar challenge, with the slight difference being I didn&#39;t have control of the `User` class - i.e. it is pulled in from a third-party library. A &quot;self-type&quot; approach worked just fine:\r\n\r\n    class User {\r\n      def password() : String = &quot;generating a password (default)&quot;\r\n    }\r\n    \r\n    trait SecurePasswords { this: User =&gt;\r\n      override def password() : String = &quot;generating a secure password (non-default)&quot;\r\n    }\r\n    \r\n    val a = new User\r\n    val b = new User with SecurePasswords\r\n    \r\n    a.password() // generating a password (default)\r\n    b.password() // generating a secure password (non-default)","title":"Scala - override a class method in a trait","body":"<p>I ran into a similar challenge, with the slight difference being I didn't have control of the <code>User</code> class - i.e. it is pulled in from a third-party library. A &quot;self-type&quot; approach worked just fine:</p>\n<pre><code>class User {\n  def password() : String = &quot;generating a password (default)&quot;\n}\n\ntrait SecurePasswords { this: User =&gt;\n  override def password() : String = &quot;generating a secure password (non-default)&quot;\n}\n\nval a = new User\nval b = new User with SecurePasswords\n\na.password() // generating a password (default)\nb.password() // generating a secure password (non-default)\n</code></pre>\n"}],"owner":{"account_id":107018,"reputation":2451,"user_id":284747,"accept_rate":82,"display_name":"Dmitri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5114,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":26811657,"answer_count":6,"score":7,"last_activity_date":1686232324,"creation_date":1415400549,"question_id":26811401,"body_markdown":"I&#39;m new to Scala (came from Ruby world).\r\n\r\nAnd I was curious about &quot;traits&quot; concept in Scala (which should be ~similar to modules in ruby, if I understand it correctly).\r\n\r\nAnd here&#39;s a use case.\r\n\r\nSuppose I have a class called `User` defined like this:\r\n\r\n    class User {\r\n    \tdef password() : String = &quot;generating a password (default)&quot;\r\n    }\r\n\r\nAnd suppose I have a trait `SecurePasswords` using which I would like to &quot;override&quot; the password method defined in the `User` class.\r\n\r\n    trait SecurePasswords {\r\n    \tdef password() : String = &quot;generating a secure password (non-default)&quot;\r\n    }\r\n\r\nAnd, suppose, I want it to be applicable to instances of the `User` class and not to the entire class itself.\r\n\r\n    val a = new User\r\n    val b = new User with SecurePasswords\r\n    \r\n    a.password() # generating a password (default)\r\n    b.password() # generating a secure password (non-default)\r\n\r\nNow this is an ideal output that I would expect, however, I get different errors like &quot;`anonymous class inherits conflicting members ... (Note: this can be resolved declaring etc etc ...)`&quot;\r\n\r\nCan this be done in Scala or I&#39;m asking too much / doing something really weird?\r\nIs it possible to do w/o any additional class definitions, like `UserWithSecurePassword extends User`\r\n\r\nThank you all in advance!\r\n\r\nP.S In case you are wondering &quot;why?&quot;, just assume that system would contain a lot of entities that require password (and, potentially, secure password), so the trait could be used in a lot of places.","title":"Scala - override a class method in a trait","body":"<p>I'm new to Scala (came from Ruby world).</p>\n\n<p>And I was curious about \"traits\" concept in Scala (which should be ~similar to modules in ruby, if I understand it correctly).</p>\n\n<p>And here's a use case.</p>\n\n<p>Suppose I have a class called <code>User</code> defined like this:</p>\n\n<pre><code>class User {\n    def password() : String = \"generating a password (default)\"\n}\n</code></pre>\n\n<p>And suppose I have a trait <code>SecurePasswords</code> using which I would like to \"override\" the password method defined in the <code>User</code> class.</p>\n\n<pre><code>trait SecurePasswords {\n    def password() : String = \"generating a secure password (non-default)\"\n}\n</code></pre>\n\n<p>And, suppose, I want it to be applicable to instances of the <code>User</code> class and not to the entire class itself.</p>\n\n<pre><code>val a = new User\nval b = new User with SecurePasswords\n\na.password() # generating a password (default)\nb.password() # generating a secure password (non-default)\n</code></pre>\n\n<p>Now this is an ideal output that I would expect, however, I get different errors like \"<code>anonymous class inherits conflicting members ... (Note: this can be resolved declaring etc etc ...)</code>\"</p>\n\n<p>Can this be done in Scala or I'm asking too much / doing something really weird?\nIs it possible to do w/o any additional class definitions, like <code>UserWithSecurePassword extends User</code></p>\n\n<p>Thank you all in advance!</p>\n\n<p>P.S In case you are wondering \"why?\", just assume that system would contain a lot of entities that require password (and, potentially, secure password), so the trait could be used in a lot of places.</p>\n"},{"tags":["java","annotations","micronaut"],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686232121,"creation_date":1686232121,"answer_id":76432552,"question_id":76432524,"body_markdown":"The default (no name specified) argument of an annotation is always the parameter named `value`. So no, they are not equivalent. These are:\r\n\r\n```\r\n@Requires(&quot;environment&quot;)\r\n@Requires(value = &quot;environment&quot;)\r\n```","title":"Micronaut @Requires default declaration","body":"<p>The default (no name specified) argument of an annotation is always the parameter named <code>value</code>. So no, they are not equivalent. These are:</p>\n<pre><code>@Requires(&quot;environment&quot;)\n@Requires(value = &quot;environment&quot;)\n</code></pre>\n"}],"owner":{"account_id":20712417,"reputation":136,"user_id":15208738,"display_name":"frblazquez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76432552,"answer_count":1,"score":1,"last_activity_date":1686232121,"creation_date":1686231977,"question_id":76432524,"body_markdown":"Are `@Requires(&quot;environment&quot;)` and `@Requires(env = &quot;environment&quot;)` equivalent?\r\n\r\nIn case they&#39;re not, which is the behavior of the default declaration of [@Requires][1]?\r\n\r\n\r\n  [1]: https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/Requires.html","title":"Micronaut @Requires default declaration","body":"<p>Are <code>@Requires(&quot;environment&quot;)</code> and <code>@Requires(env = &quot;environment&quot;)</code> equivalent?</p>\n<p>In case they're not, which is the behavior of the default declaration of <a href=\"https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/Requires.html\" rel=\"nofollow noreferrer\">@Requires</a>?</p>\n"},{"tags":["java","junit5","micronaut","graalvm","graalvm-native-image"],"owner":{"account_id":28780685,"reputation":11,"user_id":22042372,"display_name":"karmoffle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686231680,"creation_date":1686231680,"question_id":76432479,"body_markdown":"The Gradle plugin for GraalVM provides the task `nativeTest` for running tests on a native image of the application. In my application, this works on MacOS but not on Windows 10 where the build is successful but the tests are skipped without error messages. Instead, the message\r\n```\r\nde.bugged.NativeTestTest &gt; testItWorks() SKIPPED: Test is not bean. Either the test does not satisfy requirements defined by @Requires or annotation processing is not enabled. If the latter ensure annotation processing is enabled in your IDE.\r\n```\r\nis displayed.\r\n\r\nA fresh Micronaut project with the feature `graalvm` enabled comes with a test `testItWorks` but `nativeTest` on Windows 10 skips the test without error message.","title":"GraalVM &#39;nativeTest&#39; not working on Windows 10","body":"<p>The Gradle plugin for GraalVM provides the task <code>nativeTest</code> for running tests on a native image of the application. In my application, this works on MacOS but not on Windows 10 where the build is successful but the tests are skipped without error messages. Instead, the message</p>\n<pre><code>de.bugged.NativeTestTest &gt; testItWorks() SKIPPED: Test is not bean. Either the test does not satisfy requirements defined by @Requires or annotation processing is not enabled. If the latter ensure annotation processing is enabled in your IDE.\n</code></pre>\n<p>is displayed.</p>\n<p>A fresh Micronaut project with the feature <code>graalvm</code> enabled comes with a test <code>testItWorks</code> but <code>nativeTest</code> on Windows 10 skips the test without error message.</p>\n"},{"tags":["java","gradle","jar","bouncycastle","trivy"],"answers":[{"comments":[{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1686216886,"post_id":76430390,"comment_id":134769844,"body_markdown":"Great solution! But still have one issue running it: `&gt; Could not get unknown property &#39;preBuild&#39; for root project &#39;billing-ap&#39; of type org.gradle.api.Project.`","body":"Great solution! But still have one issue running it: <code>&gt; Could not get unknown property &#39;preBuild&#39; for root project &#39;billing-ap&#39; of type org.gradle.api.Project.</code>"},{"owner":{"account_id":22266993,"reputation":907,"user_id":16497617,"display_name":"Maneesha Indrachapa"},"score":1,"creation_date":1686217474,"post_id":76430390,"comment_id":134769973,"body_markdown":"You can try `project.afterEvaluate` I updated it in the above code","body":"You can try <code>project.afterEvaluate</code> I updated it in the above code"},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1686217761,"post_id":76430390,"comment_id":134770029,"body_markdown":"What could be a reason for failing with the below error on CI CD server only, but not locally? `Could not get unknown property &#39;mavenInstaller&#39; for repository container of type org.gradle.api.internal.artifacts.dsl.DefaultRepositoryHandler.\n* Try:`","body":"What could be a reason for failing with the below error on CI CD server only, but not locally? <code>Could not get unknown property &#39;mavenInstaller&#39; for repository container of type org.gradle.api.internal.artifacts.dsl.DefaultRepositoryHandl&zwnj;&#8203;er. * Try:</code>"},{"owner":{"account_id":22266993,"reputation":907,"user_id":16497617,"display_name":"Maneesha Indrachapa"},"score":1,"creation_date":1686218581,"post_id":76430390,"comment_id":134770181,"body_markdown":"You can add \n`repositories {\n    mavenLocal()\n}`\n\nin the gradle script and try","body":"You can add  <code>repositories {     mavenLocal() }</code>  in the gradle script and try"},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1686219274,"post_id":76430390,"comment_id":134770307,"body_markdown":"how can I set up the putting the bcprov-jdk14-1.61.jar to the specific folder like /build/libs/ during the configuration run, in order to explicitly place /build/libs/ as bcFile parameter?","body":"how can I set up the putting the bcprov-jdk14-1.61.jar to the specific folder like /build/libs/ during the configuration run, in order to explicitly place /build/libs/ as bcFile parameter?"}],"tags":[],"owner":{"account_id":22266993,"reputation":907,"user_id":16497617,"display_name":"Maneesha Indrachapa"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686217453,"creation_date":1686216232,"answer_id":76430390,"question_id":76430284,"body_markdown":"You can do it locally when you have the Jar file. Create a folder named lib in your project directory to store the Bouncy Castle JAR file. Place the `bcprov-jdk14-1.61.jar` file in the lib folder.\r\n\r\nModify your Gradle script (`build.gradle`) to include the following configuration,The `configurations` block defines a custom configuration named `bouncyCastle`\r\n\r\n    configurations {\r\n        bouncyCastle\r\n    }\r\n    \r\n    dependencies {\r\n        // Other dependencies...\r\n        \r\n        bouncyCastle &#39;org.bouncycastle:bcprov-jdk14:1.61&#39;\r\n    }\r\n    \r\n    task installBouncyCastleJar {\r\n        doLast {\r\n            def bcFile = file(&#39;lib/bcprov-jdk14-1.61.jar&#39;)\r\n            def groupId = &#39;bouncycastle&#39;\r\n            def artifactId = &#39;bcprov-jdk14&#39;\r\n            def version = &#39;161&#39;\r\n            def packaging = &#39;jar&#39;\r\n            \r\n            project.repositories.mavenInstaller.install([\r\n                    file: bcFile,\r\n                    groupId: groupId,\r\n                    artifactId: artifactId,\r\n                    version: version,\r\n                    packaging: packaging\r\n            ])\r\n        }\r\n    }\r\n    \r\n    project.afterEvaluate {\r\n       build.dependsOn(installBouncyCastleJar)\r\n    }\r\n\r\n","title":"How we can do mvn install:install-file for in gradle for 3rd party transient dependencies?","body":"<p>You can do it locally when you have the Jar file. Create a folder named lib in your project directory to store the Bouncy Castle JAR file. Place the <code>bcprov-jdk14-1.61.jar</code> file in the lib folder.</p>\n<p>Modify your Gradle script (<code>build.gradle</code>) to include the following configuration,The <code>configurations</code> block defines a custom configuration named <code>bouncyCastle</code></p>\n<pre><code>configurations {\n    bouncyCastle\n}\n\ndependencies {\n    // Other dependencies...\n    \n    bouncyCastle 'org.bouncycastle:bcprov-jdk14:1.61'\n}\n\ntask installBouncyCastleJar {\n    doLast {\n        def bcFile = file('lib/bcprov-jdk14-1.61.jar')\n        def groupId = 'bouncycastle'\n        def artifactId = 'bcprov-jdk14'\n        def version = '161'\n        def packaging = 'jar'\n        \n        project.repositories.mavenInstaller.install([\n                file: bcFile,\n                groupId: groupId,\n                artifactId: artifactId,\n                version: version,\n                packaging: packaging\n        ])\n    }\n}\n\nproject.afterEvaluate {\n   build.dependsOn(installBouncyCastleJar)\n}\n</code></pre>\n"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686231357,"creation_date":1686215346,"question_id":76430284,"body_markdown":"We have Bouncycastle dependencies, coming from one dependency and another one. Sothey are something like that:\r\n\r\n`implementation &#39;org.bouncycastle:bcprov-jdk14:1.61&#39;` &lt;- explicitly added\r\n\r\n`&#39;bouncycastle:bcprov-jdk14:138&#39;` &lt;- taken from another dependency\r\n\r\nThey have the different group name, so I can&#39;t just exclude 138. But I can&#39;t inrement it to `161` too, as is hosts nowhere in the repos.\r\n\r\nCan I set up something to my `Gradle` script to \r\n\r\n1. Take `org.bouncycastle:bcprov-jdk14:1.61 jar`\r\n2. Do something like \r\n\r\n     `mvn install:install-file -Dfile=&lt;path-to-file&gt; -DgroupId=&lt;group-id&gt; -DartifactId=&lt;artifact-id&gt; -Dversion=&lt;version&gt; -Dpackaging=&lt;packaging&gt;`\r\n\r\nbut with `Gradle` where I&#39;ll put the desired format like bouncycastle:bcprov-jdk14:161\r\n\r\n3. Only then do the rest of the build?\r\n\r\nUPD\r\n\r\nFor strange reason even broken version of Maneesha&#39;s answer helped  me. I haven&#39;t succeed with the correct placing of the jar file before installing it, but it worked!\r\n\r\n\r\n    configurations {\r\n        bouncyCastle\r\n    }\r\n    \r\n    dependencies {\r\n        // Other dependencies...\r\n        \r\n        bouncyCastle &#39;org.bouncycastle:bcprov-jdk14:1.61&#39;\r\n    }\r\n    \r\n    task installBouncyCastleJar {\r\n        doLast {\r\n            def bcFile = file(&#39;lib/bcprov-jdk14-1.61.jar&#39;)\r\n            def groupId = &#39;bouncycastle&#39;\r\n            def artifactId = &#39;bcprov-jdk14&#39;\r\n            def version = &#39;161&#39;\r\n            def packaging = &#39;jar&#39;\r\n            \r\n            //project.repositories.mavenInstaller.install([\r\n            //        file: bcFile,\r\n            //        groupId: groupId,\r\n            //        artifactId: artifactId,\r\n            //        version: version,\r\n            //        packaging: packaging\r\n            //])\r\n        }\r\n    }\r\n    \r\n    project.afterEvaluate {\r\n       build.dependsOn(installBouncyCastleJar)\r\n    }\r\n\r\nI don&#39;t know how exactly, but using of \r\n\r\n    bouncyCastle &#39;org.bouncycastle:bcprov-jdk14:1.61&#39;\r\n\r\n and `bouncyCastle ` as separate configuration, made that `bouncycastle:bcprov-jdk14:138` has disappeared from the &quot;effective pom&quot; or how it is called for Gradle and disappeared from the jar&#39;s`/lib` folder. So, no actual maven install was needed. Without adding the configuration, no exclusion helped to remove it. ","title":"How we can do mvn install:install-file for in gradle for 3rd party transient dependencies?","body":"<p>We have Bouncycastle dependencies, coming from one dependency and another one. Sothey are something like that:</p>\n<p><code>implementation 'org.bouncycastle:bcprov-jdk14:1.61'</code> &lt;- explicitly added</p>\n<p><code>'bouncycastle:bcprov-jdk14:138'</code> &lt;- taken from another dependency</p>\n<p>They have the different group name, so I can't just exclude 138. But I can't inrement it to <code>161</code> too, as is hosts nowhere in the repos.</p>\n<p>Can I set up something to my <code>Gradle</code> script to</p>\n<ol>\n<li><p>Take <code>org.bouncycastle:bcprov-jdk14:1.61 jar</code></p>\n</li>\n<li><p>Do something like</p>\n<p><code>mvn install:install-file -Dfile=&lt;path-to-file&gt; -DgroupId=&lt;group-id&gt; -DartifactId=&lt;artifact-id&gt; -Dversion=&lt;version&gt; -Dpackaging=&lt;packaging&gt;</code></p>\n</li>\n</ol>\n<p>but with <code>Gradle</code> where I'll put the desired format like bouncycastle:bcprov-jdk14:161</p>\n<ol start=\"3\">\n<li>Only then do the rest of the build?</li>\n</ol>\n<p>UPD</p>\n<p>For strange reason even broken version of Maneesha's answer helped  me. I haven't succeed with the correct placing of the jar file before installing it, but it worked!</p>\n<pre><code>configurations {\n    bouncyCastle\n}\n\ndependencies {\n    // Other dependencies...\n    \n    bouncyCastle 'org.bouncycastle:bcprov-jdk14:1.61'\n}\n\ntask installBouncyCastleJar {\n    doLast {\n        def bcFile = file('lib/bcprov-jdk14-1.61.jar')\n        def groupId = 'bouncycastle'\n        def artifactId = 'bcprov-jdk14'\n        def version = '161'\n        def packaging = 'jar'\n        \n        //project.repositories.mavenInstaller.install([\n        //        file: bcFile,\n        //        groupId: groupId,\n        //        artifactId: artifactId,\n        //        version: version,\n        //        packaging: packaging\n        //])\n    }\n}\n\nproject.afterEvaluate {\n   build.dependsOn(installBouncyCastleJar)\n}\n</code></pre>\n<p>I don't know how exactly, but using of</p>\n<pre><code>bouncyCastle 'org.bouncycastle:bcprov-jdk14:1.61'\n</code></pre>\n<p>and <code>bouncyCastle </code> as separate configuration, made that <code>bouncycastle:bcprov-jdk14:138</code> has disappeared from the &quot;effective pom&quot; or how it is called for Gradle and disappeared from the jar's<code>/lib</code> folder. So, no actual maven install was needed. Without adding the configuration, no exclusion helped to remove it.</p>\n"},{"tags":["java","swagger","swagger-codegen"],"comments":[{"owner":{"account_id":17505775,"reputation":3076,"user_id":12695027,"display_name":"Scratte"},"score":3,"creation_date":1619525688,"post_id":67281671,"comment_id":118926916,"body_markdown":"What is your Java version? [javax.annotation.Generated](https://docs.oracle.com/javase/10/docs/api/javax/annotation/Generated.html) seems to exists in Java 10, but no longer in Java 11. I expect you&#39;ll need to add either [JSR 250 Common Annotations For The JavaTM Platform](https://mvnrepository.com/artifact/javax.annotation/jsr250-api) or [Javax Annotation API](https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api)","body":"What is your Java version? <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/annotation/Generated.html\" rel=\"nofollow noreferrer\">javax.annotation.Generated</a> seems to exists in Java 10, but no longer in Java 11. I expect you&#39;ll need to add either <a href=\"https://mvnrepository.com/artifact/javax.annotation/jsr250-api\" rel=\"nofollow noreferrer\">JSR 250 Common Annotations For The JavaTM Platform</a> or <a href=\"https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api\" rel=\"nofollow noreferrer\">Javax Annotation API</a>"}],"answers":[{"comments":[{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1666059005,"post_id":67282931,"comment_id":130840305,"body_markdown":"You should accept this (your own) answer :)","body":"You should accept this (your own) answer :)"},{"owner":{"account_id":1850340,"reputation":113,"user_id":1677012,"display_name":"Edd"},"score":7,"creation_date":1673868784,"post_id":67282931,"comment_id":132586055,"body_markdown":"this doesn&#39;t work in new versions (checked on 6.2.0). Timestamp is hidden, but annotation is still generated","body":"this doesn&#39;t work in new versions (checked on 6.2.0). Timestamp is hidden, but annotation is still generated"}],"tags":[],"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1619525989,"creation_date":1619525989,"answer_id":67282931,"question_id":67281671,"body_markdown":"The solution is to run with this command:\r\n\r\n`java -jar swagger-codegen-cli.jar generate -l java -i https://petstore.swagger.io/v2/swagger.json -o petstore\r\n -DhideGenerationTimestamp=true`\r\n\r\nThe option to turn off @javax.annotation.Generated date in Java Classes","title":"Swagger Code Gen - package javax.annotation does not exist","body":"<p>The solution is to run with this command:</p>\n<p><code>java -jar swagger-codegen-cli.jar generate -l java -i https://petstore.swagger.io/v2/swagger.json -o petstore -DhideGenerationTimestamp=true</code></p>\n<p>The option to turn off @javax.annotation.Generated date in Java Classes</p>\n"},{"comments":[{"owner":{"account_id":472248,"reputation":19503,"user_id":880619,"accept_rate":100,"display_name":"Jasper de Vries"},"score":1,"creation_date":1686138767,"post_id":68323341,"comment_id":134757487,"body_markdown":"https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api","body":"<a href=\"https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/javax.annotation/&hellip;</a>"}],"tags":[],"owner":{"account_id":259136,"reputation":3335,"user_id":541796,"accept_rate":82,"display_name":"Baptiste Pernet"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1686231204,"creation_date":1625870671,"answer_id":68323341,"question_id":67281671,"body_markdown":"Formalizing the comment left by [Scratte][1], if you are using jdk11, you need to add the [dependency][2] explicitly in your dependency management tool\r\n\r\nFor example in maven\r\n\r\n```xml\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n      &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n      &lt;version&gt;${javax-annotation-api.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/12695027/scratte\r\n  [2]: https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api","title":"Swagger Code Gen - package javax.annotation does not exist","body":"<p>Formalizing the comment left by <a href=\"https://stackoverflow.com/users/12695027/scratte\">Scratte</a>, if you are using jdk11, you need to add the <a href=\"https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api\" rel=\"nofollow noreferrer\">dependency</a> explicitly in your dependency management tool</p>\n<p>For example in maven</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependency&gt;\n      &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n      &lt;version&gt;${javax-annotation-api.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10914,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1686231204,"creation_date":1619520826,"question_id":67281671,"body_markdown":"Why is swagger-codegen generating project with missing dependencies? \r\n\r\nRunning:\r\n`java -jar swagger-codegen-cli.jar generate -l java -i swagger.json`\r\n\r\nGenerates a project with this for example:\r\n\r\n```java\r\n@javax.annotation.Generated(value = &quot;io.swagger.codegen.languages.JavaClientCodegen&quot;, date = &quot;2021-04-27T18:37:06.211+08:00&quot;)\r\npublic class Table {\r\n  @SerializedName(&quot;requiredIndexColumns&quot;)\r\n  private List&lt;Column&gt; requiredIndexColumns = null;\r\n```\r\n\r\nWhere `javax.annotation.Generate` cannot be resolved. \r\nAnd then compiling the generated project throws: `Error:(33,18) java: package javax.annotation does not exist`\r\n\r\nHere&#39;s how to test this (using a public swagger):\r\n\r\n```\r\nwget https://repo1.maven.org/maven2/io/swagger/swagger-codegen-cli/2.4.19/swagger-codegen-cli-2.4.19.jar -O swagger-codegen-cli.jar\r\n```\r\nThen run:\r\n```\r\njava -jar swagger-codegen-cli.jar generate -l java -i https://petstore.swagger.io/v2/swagger.json -o petstore\r\n```","title":"Swagger Code Gen - package javax.annotation does not exist","body":"<p>Why is swagger-codegen generating project with missing dependencies?</p>\n<p>Running:\n<code>java -jar swagger-codegen-cli.jar generate -l java -i swagger.json</code></p>\n<p>Generates a project with this for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@javax.annotation.Generated(value = &quot;io.swagger.codegen.languages.JavaClientCodegen&quot;, date = &quot;2021-04-27T18:37:06.211+08:00&quot;)\npublic class Table {\n  @SerializedName(&quot;requiredIndexColumns&quot;)\n  private List&lt;Column&gt; requiredIndexColumns = null;\n</code></pre>\n<p>Where <code>javax.annotation.Generate</code> cannot be resolved.\nAnd then compiling the generated project throws: <code>Error:(33,18) java: package javax.annotation does not exist</code></p>\n<p>Here's how to test this (using a public swagger):</p>\n<pre><code>wget https://repo1.maven.org/maven2/io/swagger/swagger-codegen-cli/2.4.19/swagger-codegen-cli-2.4.19.jar -O swagger-codegen-cli.jar\n</code></pre>\n<p>Then run:</p>\n<pre><code>java -jar swagger-codegen-cli.jar generate -l java -i https://petstore.swagger.io/v2/swagger.json -o petstore\n</code></pre>\n"},{"tags":["java","graph","neo4j"],"answers":[{"comments":[{"owner":{"account_id":1419056,"reputation":5266,"user_id":1344070,"accept_rate":100,"display_name":"keisar"},"score":2,"creation_date":1352416257,"post_id":4517014,"comment_id":18136200,"body_markdown":"The above link didn&#39;t work for me, thought I&#39;d share this link http://docs.neo4j.org/chunked/milestone/indexing.html (it&#39;s a starting point...)","body":"The above link didn&#39;t work for me, thought I&#39;d share this link <a href=\"http://docs.neo4j.org/chunked/milestone/indexing.html\" rel=\"nofollow noreferrer\">docs.neo4j.org/chunked/milestone/indexing.html</a> (it&#39;s a starting point...)"}],"tags":[],"owner":{"account_id":4804,"reputation":268589,"user_id":7412,"accept_rate":96,"display_name":"dogbane"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1293093149,"creation_date":1293093149,"answer_id":4517014,"question_id":4516953,"body_markdown":"Take a look at the [Indexing Service][1] which will allow you to index your nodes with key-value pairs. Once you&#39;ve indexed your nodes you can query the graph and retrieve nodes which match a given key-value.\r\n\r\n[1]: http://wiki.neo4j.org/content/Indexing_with_IndexService","title":"how to find a particular node in Neo4j","body":"<p>Take a look at the <a href=\"http://wiki.neo4j.org/content/Indexing_with_IndexService\" rel=\"noreferrer\">Indexing Service</a> which will allow you to index your nodes with key-value pairs. Once you've indexed your nodes you can query the graph and retrieve nodes which match a given key-value.</p>\n"},{"tags":[],"owner":{"account_id":8596267,"reputation":89,"user_id":6439195,"display_name":"Eran.G"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686230640,"creation_date":1686230640,"answer_id":76432318,"question_id":4516953,"body_markdown":"If your node type is a FirstName and its ID is &quot;XYZ&quot; you can do it with:\r\n\r\n    MATCH(n:FirstName {ID: &#39;XYZ&#39;}) return n\r\n\r\nthis will return all the nodes with ID = &quot;XYZ&quot;","title":"how to find a particular node in Neo4j","body":"<p>If your node type is a FirstName and its ID is &quot;XYZ&quot; you can do it with:</p>\n<pre><code>MATCH(n:FirstName {ID: 'XYZ'}) return n\n</code></pre>\n<p>this will return all the nodes with ID = &quot;XYZ&quot;</p>\n"}],"owner":{"account_id":244287,"reputation":3651,"user_id":516982,"accept_rate":68,"display_name":"prassee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5056,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":4517014,"answer_count":2,"score":5,"last_activity_date":1686230640,"creation_date":1293092378,"question_id":4516953,"body_markdown":"how to find the particular node using the Neo4j API.When i refereed the docs i got some code to get all nodes However if i have a node called &quot;XYZ&quot; I would like to know how to obtain ONLY that particular node.","title":"how to find a particular node in Neo4j","body":"<p>how to find the particular node using the Neo4j API.When i refereed the docs i got some code to get all nodes However if i have a node called \"XYZ\" I would like to know how to obtain ONLY that particular node.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"score":0,"creation_date":1686221211,"post_id":76430996,"comment_id":134770652,"body_markdown":"it&#39;s a typo :) my object was a little bit too big :) copy paste isn&#39;t a good practice ... I fix the code sample. the implementation is working ... I just wonder if it can be enhanced","body":"it&#39;s a typo :) my object was a little bit too big :) copy paste isn&#39;t a good practice ... I fix the code sample. the implementation is working ... I just wonder if it can be enhanced"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1686221443,"post_id":76430996,"comment_id":134770699,"body_markdown":"If your code works but you are looking for improvements consider posting it on https://codereview.stackexchange.com/ (note: I am NOT saying it is off-topic here since question may be on-topic on many sites).","body":"If your code works but you are looking for improvements consider posting it on <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> (note: I am NOT saying it is off-topic here since question may be on-topic on many sites)."}],"answers":[{"comments":[{"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"score":0,"creation_date":1686225363,"post_id":76431148,"comment_id":134771469,"body_markdown":"Thanks for your answer. I created a dummy class for testing this code. Actually i&#39;m using this folloging code right now on List of ListItem from SharePoint graph. Maybe should I try using more sets. In my case, with listitems, id is the only value that is not changing.","body":"Thanks for your answer. I created a dummy class for testing this code. Actually i&#39;m using this folloging code right now on List of ListItem from SharePoint graph. Maybe should I try using more sets. In my case, with listitems, id is the only value that is not changing."}],"tags":[],"owner":{"account_id":329814,"reputation":11000,"user_id":653539,"accept_rate":50,"display_name":"Tom&#225;š Z&#225;lusk&#253;"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686222026,"creation_date":1686222026,"answer_id":76431148,"question_id":76430996,"body_markdown":"Your solution seems efficient enough to me, what is elegant might be matter of subject. Developers often use `List` when `Set` is more suitable collection (do you really want to access users by index?).\r\n\r\nIf the collections were `Set`s, `User.equals()` method was based only on the `id` field, and you want to emphasize the data of `updatedUsers` override the base data, you could describe result using set operations (yes, these are not part of standard Java - I borrow them from Guava or you can use any other implementation).\r\n\r\n```java\r\nSet&lt;Users&gt; usersSet = new HashSet&lt;&gt;(users);\r\nSet&lt;Users&gt; updatedUsersSet = new HashSet&lt;&gt;(updatedUsers);\r\nSet&lt;Users&gt; output = Sets.union(updatedUsersSet, Sets.difference(usersSet, updatedUsersSet));\r\n```\r\n\r\nThe problem is shifted to higher level of abstraction which I admit not everyone must like.\r\n","title":"Using stream to merge two list with updated values","body":"<p>Your solution seems efficient enough to me, what is elegant might be matter of subject. Developers often use <code>List</code> when <code>Set</code> is more suitable collection (do you really want to access users by index?).</p>\n<p>If the collections were <code>Set</code>s, <code>User.equals()</code> method was based only on the <code>id</code> field, and you want to emphasize the data of <code>updatedUsers</code> override the base data, you could describe result using set operations (yes, these are not part of standard Java - I borrow them from Guava or you can use any other implementation).</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;Users&gt; usersSet = new HashSet&lt;&gt;(users);\nSet&lt;Users&gt; updatedUsersSet = new HashSet&lt;&gt;(updatedUsers);\nSet&lt;Users&gt; output = Sets.union(updatedUsersSet, Sets.difference(usersSet, updatedUsersSet));\n</code></pre>\n<p>The problem is shifted to higher level of abstraction which I admit not everyone must like.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686229599,"creation_date":1686225238,"answer_id":76431595,"question_id":76430996,"body_markdown":"Streams are very useful in many circumstances.  But they also incur quite a bit of overhead.  Just use a little imperative programming to do the same thing.  \r\n\r\nYou are creating a new user and placing it in a list. The busy work is done. Since the updated user has been created and there is no way to tell if the user is a new user or an updated user, just add it to the map normally. It will either be added as a new user or replace an existing one.\r\n```\r\nMap&lt;Integer, User&gt; userMap = new HashMap&lt;&gt;();\r\n \r\nfor(User user : users) {\r\n    userMap.put(user.getId(), user);\r\n}\r\n       \r\nfor(User user : updatedUsers) {\r\n    userMap.put(user.getId(), user);\r\n}\r\n```\r\nNow you can get the updated map entries by user id.\r\n\r\nNote: You many want to institute some syntax/invariant checking when creating the User instance. For example:\r\n- user id out of range\r\n- email syntax error\r\n\r\nYou can always retrieve the users as a list as follows.\r\n```\r\nList&lt;User&gt; userList = new ArrayList&lt;&gt;(userMap.values());\r\n```\r\nIf for some reason, you need to verify that a user is in the map before taking action, you can see if the user&#39;s id is already there.\r\n```\r\nif (userMap.containsKey(userId)) {\r\n  ...\r\n}","title":"Using stream to merge two list with updated values","body":"<p>Streams are very useful in many circumstances.  But they also incur quite a bit of overhead.  Just use a little imperative programming to do the same thing.</p>\n<p>You are creating a new user and placing it in a list. The busy work is done. Since the updated user has been created and there is no way to tell if the user is a new user or an updated user, just add it to the map normally. It will either be added as a new user or replace an existing one.</p>\n<pre><code>Map&lt;Integer, User&gt; userMap = new HashMap&lt;&gt;();\n \nfor(User user : users) {\n    userMap.put(user.getId(), user);\n}\n       \nfor(User user : updatedUsers) {\n    userMap.put(user.getId(), user);\n}\n</code></pre>\n<p>Now you can get the updated map entries by user id.</p>\n<p>Note: You many want to institute some syntax/invariant checking when creating the User instance. For example:</p>\n<ul>\n<li>user id out of range</li>\n<li>email syntax error</li>\n</ul>\n<p>You can always retrieve the users as a list as follows.</p>\n<pre><code>List&lt;User&gt; userList = new ArrayList&lt;&gt;(userMap.values());\n</code></pre>\n<p>If for some reason, you need to verify that a user is in the map before taking action, you can see if the user's id is already there.</p>\n<pre><code>if (userMap.containsKey(userId)) {\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686226257,"creation_date":1686226257,"answer_id":76431737,"question_id":76430996,"body_markdown":"You could maybe give it a tidier look by `import`ing `static`. Also, rather than iterating each collection to add to a combined `Map`, you could use the combining `Map` as a `Supplier`:\r\n\r\n    Map&lt;Integer, User&gt; updatedUsersMap = updatedUsers.stream().\r\n        collect(toMap(\r\n                    User::getId,\r\n                    identity(),\r\n                    (k, v) -&gt;v,\r\n                    ()-&gt; { return usersMap; }));","title":"Using stream to merge two list with updated values","body":"<p>You could maybe give it a tidier look by <code>import</code>ing <code>static</code>. Also, rather than iterating each collection to add to a combined <code>Map</code>, you could use the combining <code>Map</code> as a <code>Supplier</code>:</p>\n<pre><code>Map&lt;Integer, User&gt; updatedUsersMap = updatedUsers.stream().\n    collect(toMap(\n                User::getId,\n                identity(),\n                (k, v) -&gt;v,\n                ()-&gt; { return usersMap; }));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686230578,"creation_date":1686230578,"answer_id":76432307,"question_id":76430996,"body_markdown":"You can do it in one go without creating intermediate maps if you concat the stream of users and updated users and collecting the second value if you encounter a duplicate key:\r\n\r\n    List&lt;User&gt; result = new ArrayList&lt;&gt;(\r\n            Stream.concat(users.stream(), updatedUsers.stream())\r\n                  .collect(Collectors.toMap(User::getId, \r\n                                            Function.identity(),\r\n                                            (first,second) -&gt; second)).values());","title":"Using stream to merge two list with updated values","body":"<p>You can do it in one go without creating intermediate maps if you concat the stream of users and updated users and collecting the second value if you encounter a duplicate key:</p>\n<pre><code>List&lt;User&gt; result = new ArrayList&lt;&gt;(\n        Stream.concat(users.stream(), updatedUsers.stream())\n              .collect(Collectors.toMap(User::getId, \n                                        Function.identity(),\n                                        (first,second) -&gt; second)).values());\n</code></pre>\n"}],"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":4,"score":0,"last_activity_date":1686230578,"creation_date":1686220735,"question_id":76430996,"body_markdown":"Is there a more elegant way to merge two lists in a 3rd one which take values from one and take values from second if the value is updated ? \r\n\r\nTo be clearer, let&#39;s consider I have 2 lists of users: \r\n\r\n\r\n    List&lt;User&gt; users = Arrays.asList(\r\n            User.builder()\r\n                .id(1).surname(&quot;john&quot;).build(),\r\n            User.builder()\r\n                .id(2).surname(&quot;paul&quot;).build(),\r\n            User.builder()\r\n                .id(3).surname(&quot;george&quot;).build(),\r\n            User.builder()\r\n                .id(4).surname(&quot;walter&quot;).build());\r\n\r\n\r\n    List&lt;User&gt; updatedUsers = Arrays.asList(\r\n            User.builder()\r\n                .id(1).surname(&quot;john&quot;).email(&quot;myEmail@email.com&quot;).build(),\r\n            User.builder()\r\n                .id(2).surname(&quot;paul&quot;).email(&quot;myEmail@email.com&quot;).build());\r\n\r\n\r\nI&#39;m expecting to get a list containing all users and common users replaced by the updated values. \r\n\r\nI used the following code to implement the expected output: \r\n\r\n    Map&lt;Integer, User&gt; usersMap = users.stream()\r\n            .collect(Collectors.toMap(User::getId, Function.identity()));\r\n    Map&lt;Integer, User&gt; updatedUsersMap = updatedUsers.stream()\r\n            .collect(Collectors.toMap(User::getId, Function.identity()));\r\n\r\n\r\n    usersMap.putAll(updatedUsersMap);\r\n    List&lt;User&gt; output = usersMap.values().stream().toList();\r\n\r\nI do have the expected result and I just wonder if there&#39;s another way to do it using stream, more efficient and elegant. \r\nThanks ! ","title":"Using stream to merge two list with updated values","body":"<p>Is there a more elegant way to merge two lists in a 3rd one which take values from one and take values from second if the value is updated ?</p>\n<p>To be clearer, let's consider I have 2 lists of users:</p>\n<pre><code>List&lt;User&gt; users = Arrays.asList(\n        User.builder()\n            .id(1).surname(&quot;john&quot;).build(),\n        User.builder()\n            .id(2).surname(&quot;paul&quot;).build(),\n        User.builder()\n            .id(3).surname(&quot;george&quot;).build(),\n        User.builder()\n            .id(4).surname(&quot;walter&quot;).build());\n\n\nList&lt;User&gt; updatedUsers = Arrays.asList(\n        User.builder()\n            .id(1).surname(&quot;john&quot;).email(&quot;myEmail@email.com&quot;).build(),\n        User.builder()\n            .id(2).surname(&quot;paul&quot;).email(&quot;myEmail@email.com&quot;).build());\n</code></pre>\n<p>I'm expecting to get a list containing all users and common users replaced by the updated values.</p>\n<p>I used the following code to implement the expected output:</p>\n<pre><code>Map&lt;Integer, User&gt; usersMap = users.stream()\n        .collect(Collectors.toMap(User::getId, Function.identity()));\nMap&lt;Integer, User&gt; updatedUsersMap = updatedUsers.stream()\n        .collect(Collectors.toMap(User::getId, Function.identity()));\n\n\nusersMap.putAll(updatedUsersMap);\nList&lt;User&gt; output = usersMap.values().stream().toList();\n</code></pre>\n<p>I do have the expected result and I just wonder if there's another way to do it using stream, more efficient and elegant.\nThanks !</p>\n"},{"tags":["java","performance","apache-spark","spark-streaming","spark-streaming-kafka"],"owner":{"account_id":28780423,"reputation":1,"user_id":22042152,"display_name":"Ivan Murray"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686230343,"creation_date":1686230343,"question_id":76432274,"body_markdown":"We are seeing an issue with executors being evicted on our spark streaming application. We are doing native spark aggregation from a kafka stream using watermarking \r\n\r\n\r\n``` \r\nspark.readStream() \r\n.format(&quot;kafka&quot;) \r\n.withWatermark( &quot;watermarked_timestamp&quot;, LATENESS_THRESHOL) \r\n.dropDuplicates(METADATA_COL_MR_ID, &quot;watermarked_timestamp&quot;); \r\n\r\n.writeStream() \r\n.option(&quot;checkpointLocation&quot;, LOC) \r\n.outputMode(OutputMode.Append()) \r\n.foreachBatch( \r\n``` \r\n\r\nThis is a long running stream, and we are seeing executors being evicted from the app. The executors are marked as KILLED and we get an error code 137 on the driver. We see the memory usage on the executor process, growing over time. We have examined the heap and it seems to be fine – profiling the process, we see nothing untoward and we are not using all the heap, nor are we core-dumping OOM’s. It looks to us like the spark or our kernel on the pod is evicting the executor process after it grows to a certain number. \r\n\r\nHere is the sample profile and we see nothing untoward there:\r\n\r\n[enter image description here](https://i.stack.imgur.com/i3qA1.png)\r\n\r\nThe main problem is the growth in what seems to be memory usage of the executor outside of the heap. We seem to be using a lot more memory by the executor that is outside of the heap and have no idea where that Memory is being used. We grow to 7G even though our XmX on the process is set to 2G. \r\n\r\nThere is a RocksDb native spark implement being used so state directories are being written to disk. Some SST files are being left around as, we believe, when we drop the executor, these SST files are not being cleaned up.","title":"Spark structured stream aggregation - Evicted Executors – does not seem to be heap related","body":"<p>We are seeing an issue with executors being evicted on our spark streaming application. We are doing native spark aggregation from a kafka stream using watermarking</p>\n<pre><code>spark.readStream() \n.format(&quot;kafka&quot;) \n.withWatermark( &quot;watermarked_timestamp&quot;, LATENESS_THRESHOL) \n.dropDuplicates(METADATA_COL_MR_ID, &quot;watermarked_timestamp&quot;); \n\n.writeStream() \n.option(&quot;checkpointLocation&quot;, LOC) \n.outputMode(OutputMode.Append()) \n.foreachBatch( \n</code></pre>\n<p>This is a long running stream, and we are seeing executors being evicted from the app. The executors are marked as KILLED and we get an error code 137 on the driver. We see the memory usage on the executor process, growing over time. We have examined the heap and it seems to be fine – profiling the process, we see nothing untoward and we are not using all the heap, nor are we core-dumping OOM’s. It looks to us like the spark or our kernel on the pod is evicting the executor process after it grows to a certain number.</p>\n<p>Here is the sample profile and we see nothing untoward there:</p>\n<p><a href=\"https://i.stack.imgur.com/i3qA1.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>The main problem is the growth in what seems to be memory usage of the executor outside of the heap. We seem to be using a lot more memory by the executor that is outside of the heap and have no idea where that Memory is being used. We grow to 7G even though our XmX on the process is set to 2G.</p>\n<p>There is a RocksDb native spark implement being used so state directories are being written to disk. Some SST files are being left around as, we believe, when we drop the executor, these SST files are not being cleaned up.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":22649232,"reputation":1287,"user_id":16824146,"display_name":"mr.Penguin"},"score":0,"creation_date":1686221385,"post_id":76430890,"comment_id":134770686,"body_markdown":"could you implement the equals and hashcode for the embedded id and your main entity and try again ?","body":"could you implement the equals and hashcode for the embedded id and your main entity and try again ?"},{"owner":{"account_id":22649232,"reputation":1287,"user_id":16824146,"display_name":"mr.Penguin"},"score":0,"creation_date":1686221838,"post_id":76430890,"comment_id":134770772,"body_markdown":"also I advice you to use Lombok to reduce the amount of boiler plate code you did to create a builder","body":"also I advice you to use Lombok to reduce the amount of boiler plate code you did to create a builder"},{"owner":{"account_id":1451863,"reputation":587,"user_id":1368548,"accept_rate":69,"display_name":"thanili"},"score":1,"creation_date":1686229285,"post_id":76430890,"comment_id":134772410,"body_markdown":"Thanks mr.Penguin for your comments, I have tried it but it doesn&#39;t seem to solve the issue. Annotating my Test class as @Transactional seem to do the work though!","body":"Thanks mr.Penguin for your comments, I have tried it but it doesn&#39;t seem to solve the issue. Annotating my Test class as @Transactional seem to do the work though!"}],"answers":[{"comments":[{"owner":{"account_id":1451863,"reputation":587,"user_id":1368548,"accept_rate":69,"display_name":"thanili"},"score":0,"creation_date":1686229223,"post_id":76431517,"comment_id":134772397,"body_markdown":"Indeed, adding the @Transactional annotation seem to solve the issue","body":"Indeed, adding the @Transactional annotation seem to solve the issue"}],"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686230198,"creation_date":1686224574,"answer_id":76431517,"question_id":76430890,"body_markdown":"While I could not reproduce the issue with spring-boot:3/jakarta.perstistence(,hibernate:6),\r\n\r\nswitching to spring-boot:2/javax.persistence immediately *hit*!\r\n\r\n(Quick) Solution:\r\n```lang-java\r\n@Test\r\n@org.springframework.transaction.annotation.Transactional // !\r\n```\r\n...(tracing) sql and params seemed correct, so the problem must be somewhere in transaction propagation/flushing.\r\n\r\nReasons:\r\n(Well hidden) in the release notes/version diff between spring-boot 2 and 3/ hibernate 5 vs 6... spring(-boot)-test(!)...","title":"Spring boot JPA, entity with @EmbeddedId - findyById method is not working","body":"<p>While I could not reproduce the issue with spring-boot:3/jakarta.perstistence(,hibernate:6),</p>\n<p>switching to spring-boot:2/javax.persistence immediately <em>hit</em>!</p>\n<p>(Quick) Solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\n@org.springframework.transaction.annotation.Transactional // !\n</code></pre>\n<p>...(tracing) sql and params seemed correct, so the problem must be somewhere in transaction propagation/flushing.</p>\n<p>Reasons:\n(Well hidden) in the release notes/version diff between spring-boot 2 and 3/ hibernate 5 vs 6... spring(-boot)-test(!)...</p>\n"}],"owner":{"account_id":1451863,"reputation":587,"user_id":1368548,"accept_rate":69,"display_name":"thanili"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76431517,"answer_count":1,"score":2,"last_activity_date":1686230198,"creation_date":1686219823,"question_id":76430890,"body_markdown":"I am trying to use the CrudRepository&#39;s findById method to get an object from the database by it&#39;s id. The id of the main entity is a composite key, utilized by an @Embeadable class including all the properties.\r\n\r\nHere are the details of my current implementation:\r\n\r\nHere is the main entity class (InitialMoneyCount):\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @EqualsAndHashCode\r\n    public class InitialMoneyCount {\r\n        @EmbeddedId\r\n        @NonNull\r\n        private InitialMoneyCountId initialMoneyCountId;\r\n        @NonNull\r\n        private BigDecimal amount;\r\n        @NonNull\r\n        private BigDecimal amountSystemCurrency;\r\n        @NonNull\r\n        private String currency;\r\n    \r\n        // Default constructor\r\n        public InitialMoneyCount() {\r\n        }\r\n    \r\n        // Constructor with all properties\r\n        public InitialMoneyCount(InitialMoneyCountId initialMoneyCountId, BigDecimal amount,\r\n                                 BigDecimal amountSystemCurrency, String currency) {\r\n            this.initialMoneyCountId = initialMoneyCountId;\r\n            this.amount = amount;\r\n            this.amountSystemCurrency = amountSystemCurrency;\r\n            this.currency = currency;\r\n        }\r\n    \r\n        // Builder\r\n        public static InitialMoneyCountBuilder builder() {\r\n            return new InitialMoneyCountBuilder();\r\n        }\r\n    \r\n        public static class InitialMoneyCountBuilder {\r\n            private InitialMoneyCountId initialMoneyCountId;\r\n            private BigDecimal amount;\r\n            private BigDecimal amountSystemCurrency;\r\n            private String currency;\r\n    \r\n            public InitialMoneyCountBuilder initialMoneyCountId(InitialMoneyCountId initialMoneyCountId) {\r\n                this.initialMoneyCountId = initialMoneyCountId;\r\n                return this;\r\n            }\r\n    \r\n            public InitialMoneyCountBuilder amount(BigDecimal amount) {\r\n                this.amount = amount;\r\n                return this;\r\n            }\r\n    \r\n            public InitialMoneyCountBuilder amountSystemCurrency(BigDecimal amountSystemCurrency) {\r\n                this.amountSystemCurrency = amountSystemCurrency;\r\n                return this;\r\n            }\r\n    \r\n            public InitialMoneyCountBuilder currency(String currency) {\r\n                this.currency = currency;\r\n                return this;\r\n            }\r\n    \r\n            public InitialMoneyCount build() {\r\n                return new InitialMoneyCount(initialMoneyCountId, amount, amountSystemCurrency, currency);\r\n            }\r\n        }\r\n    }\r\n\r\nHere is the primary key @Embeddable class:\r\n\r\n    @EqualsAndHashCode\r\n    @Embeddable\r\n    @Getter\r\n    public class InitialMoneyCountId implements Serializable {\r\n        @NonNull\r\n        private UUID posTerminalId;\r\n        @NonNull\r\n        private UUID cashierId;\r\n        @NonNull\r\n        private UUID cashDrawerId;\r\n        @NonNull\r\n        private LocalDate bookingDate;\r\n        @NonNull\r\n        private Integer bookingPeriod;\r\n        @NonNull\r\n        private UUID paymentMethodId;\r\n    \r\n        // Default constructor\r\n        public InitialMoneyCountId() {\r\n        }\r\n    \r\n        // Constructor with all properties\r\n        public InitialMoneyCountId(UUID posTerminalId, UUID cashierId, UUID cashDrawerId,\r\n                                   LocalDate bookingDate, Integer bookingPeriod, UUID paymentMethodId) {\r\n            this.posTerminalId = posTerminalId;\r\n            this.cashierId = cashierId;\r\n            this.cashDrawerId = cashDrawerId;\r\n            this.bookingDate = bookingDate;\r\n            this.bookingPeriod = bookingPeriod;\r\n            this.paymentMethodId = paymentMethodId;\r\n        }\r\n    \r\n        // Builder\r\n        public static InitialMoneyCountIdBuilder builder() {\r\n            return new InitialMoneyCountIdBuilder();\r\n        }\r\n    \r\n        public static class InitialMoneyCountIdBuilder {\r\n            private UUID posTerminalId;\r\n            private UUID cashierId;\r\n            private UUID cashDrawerId;\r\n            private LocalDate bookingDate;\r\n            private Integer bookingPeriod;\r\n            private UUID paymentMethodId;\r\n    \r\n            public InitialMoneyCountIdBuilder posTerminalId(UUID posTerminalId) {\r\n                this.posTerminalId = posTerminalId;\r\n                return this;\r\n            }\r\n    \r\n            public InitialMoneyCountIdBuilder cashierId(UUID cashierId) {\r\n                this.cashierId = cashierId;\r\n                return this;\r\n            }\r\n    \r\n            public InitialMoneyCountIdBuilder cashDrawerId(UUID cashDrawerId) {\r\n                this.cashDrawerId = cashDrawerId;\r\n                return this;\r\n            }\r\n    \r\n            public InitialMoneyCountIdBuilder bookingDate(LocalDate bookingDate) {\r\n                this.bookingDate = bookingDate;\r\n                return this;\r\n            }\r\n    \r\n            public InitialMoneyCountIdBuilder bookingPeriod(Integer bookingPeriod) {\r\n                this.bookingPeriod = bookingPeriod;\r\n                return this;\r\n            }\r\n    \r\n            public InitialMoneyCountIdBuilder paymentMethodId(UUID paymentMethodId) {\r\n                this.paymentMethodId = paymentMethodId;\r\n                return this;\r\n            }\r\n    \r\n            public InitialMoneyCountId build() {\r\n                return new InitialMoneyCountId(posTerminalId, cashierId, cashDrawerId,\r\n                        bookingDate, bookingPeriod, paymentMethodId);\r\n            }\r\n        }\r\n    }\r\n\r\nHere is the JpaRepository interface definition:\r\n\r\n    @Repository\r\n    public interface InitialMoneyCountRepository extends JpaRepository&lt;InitialMoneyCount, InitialMoneyCountId&gt; {}\r\n\r\nAnd here is a test for findById(InitialMoneyCountId id):\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT, properties = &quot;spring.h2.console.enabled=true&quot;)\r\n    public class InitialMoneyCountRepositoryTest {\r\n        @Autowired\r\n        SampleDataGenerator sampleDataGenerator;\r\n        @Autowired\r\n        InitialMoneyCountRepository initialMoneyCountRepository;\r\n    \r\n        @AfterEach\r\n        public void resetDatabase_AfterEach() {\r\n            initialMoneyCountRepository.deleteAll();\r\n        }\r\n    \r\n        @After\r\n        public void resetDatabase_After() {\r\n            initialMoneyCountRepository.deleteAll();\r\n        }\r\n    \r\n        @Before\r\n        public void resetDatabase_Before() {\r\n            initialMoneyCountRepository.deleteAll();\r\n        }\r\n    \r\n        @Test\r\n        public void findById_sucess() {\r\n            InitialMoneyCountId initialMoneyCountId = InitialMoneyCountId.builder()\r\n                    .posTerminalId(UUID.randomUUID())\r\n                    .cashDrawerId(UUID.randomUUID())\r\n                    .cashierId(UUID.randomUUID())\r\n                    .bookingDate(LocalDate.now())\r\n                    .bookingPeriod(5)\r\n                    .paymentMethodId(UUID.randomUUID())\r\n                    .build();\r\n            InitialMoneyCount initialMoneyCount = InitialMoneyCount.builder()\r\n                    .initialMoneyCountId(initialMoneyCountId)\r\n                    .amount(BigDecimal.valueOf(555.55))\r\n                    .amountSystemCurrency(BigDecimal.valueOf(55.555))\r\n                    .currency(Currency.EUR.value())\r\n                    .build();\r\n            InitialMoneyCount savedInitialMoneyCount = initialMoneyCountRepository.save(initialMoneyCount);\r\n            Optional&lt;InitialMoneyCount&gt; imc = initialMoneyCountRepository.findById(initialMoneyCountId);\r\n            Assertions.assertTrue(imc.isPresent());\r\n        }\r\n    }\r\n\r\nHowever I am not able to find the object by it&#39;s id. This is the exception I am getting:\r\n\r\n    expected: &lt;true&gt; but was: &lt;false&gt;\r\n    Comparison Failure: \r\n    Expected :true\r\n    Actual   :false\r\n    &lt;Click to see difference&gt;\r\n    \r\n    org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from initial_money_count where booking_date=? and booking_period=? and cash_drawer_id=? and cashier_id=? and payment_method_id=? and pos_terminal_id=?; nested exception is org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from initial_money_count where booking_date=? and booking_period=? and cash_drawer_id=? and cashier_id=? and payment_method_id=? and pos_terminal_id=?\r\n\r\nAny ideas of what I am missing here?\r\n\r\nI suppose that CrudRepository&#39;s findById method works for @Embeadable composite Ids, correct?","title":"Spring boot JPA, entity with @EmbeddedId - findyById method is not working","body":"<p>I am trying to use the CrudRepository's findById method to get an object from the database by it's id. The id of the main entity is a composite key, utilized by an @Embeadable class including all the properties.</p>\n<p>Here are the details of my current implementation:</p>\n<p>Here is the main entity class (InitialMoneyCount):</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@EqualsAndHashCode\npublic class InitialMoneyCount {\n    @EmbeddedId\n    @NonNull\n    private InitialMoneyCountId initialMoneyCountId;\n    @NonNull\n    private BigDecimal amount;\n    @NonNull\n    private BigDecimal amountSystemCurrency;\n    @NonNull\n    private String currency;\n\n    // Default constructor\n    public InitialMoneyCount() {\n    }\n\n    // Constructor with all properties\n    public InitialMoneyCount(InitialMoneyCountId initialMoneyCountId, BigDecimal amount,\n                             BigDecimal amountSystemCurrency, String currency) {\n        this.initialMoneyCountId = initialMoneyCountId;\n        this.amount = amount;\n        this.amountSystemCurrency = amountSystemCurrency;\n        this.currency = currency;\n    }\n\n    // Builder\n    public static InitialMoneyCountBuilder builder() {\n        return new InitialMoneyCountBuilder();\n    }\n\n    public static class InitialMoneyCountBuilder {\n        private InitialMoneyCountId initialMoneyCountId;\n        private BigDecimal amount;\n        private BigDecimal amountSystemCurrency;\n        private String currency;\n\n        public InitialMoneyCountBuilder initialMoneyCountId(InitialMoneyCountId initialMoneyCountId) {\n            this.initialMoneyCountId = initialMoneyCountId;\n            return this;\n        }\n\n        public InitialMoneyCountBuilder amount(BigDecimal amount) {\n            this.amount = amount;\n            return this;\n        }\n\n        public InitialMoneyCountBuilder amountSystemCurrency(BigDecimal amountSystemCurrency) {\n            this.amountSystemCurrency = amountSystemCurrency;\n            return this;\n        }\n\n        public InitialMoneyCountBuilder currency(String currency) {\n            this.currency = currency;\n            return this;\n        }\n\n        public InitialMoneyCount build() {\n            return new InitialMoneyCount(initialMoneyCountId, amount, amountSystemCurrency, currency);\n        }\n    }\n}\n</code></pre>\n<p>Here is the primary key @Embeddable class:</p>\n<pre><code>@EqualsAndHashCode\n@Embeddable\n@Getter\npublic class InitialMoneyCountId implements Serializable {\n    @NonNull\n    private UUID posTerminalId;\n    @NonNull\n    private UUID cashierId;\n    @NonNull\n    private UUID cashDrawerId;\n    @NonNull\n    private LocalDate bookingDate;\n    @NonNull\n    private Integer bookingPeriod;\n    @NonNull\n    private UUID paymentMethodId;\n\n    // Default constructor\n    public InitialMoneyCountId() {\n    }\n\n    // Constructor with all properties\n    public InitialMoneyCountId(UUID posTerminalId, UUID cashierId, UUID cashDrawerId,\n                               LocalDate bookingDate, Integer bookingPeriod, UUID paymentMethodId) {\n        this.posTerminalId = posTerminalId;\n        this.cashierId = cashierId;\n        this.cashDrawerId = cashDrawerId;\n        this.bookingDate = bookingDate;\n        this.bookingPeriod = bookingPeriod;\n        this.paymentMethodId = paymentMethodId;\n    }\n\n    // Builder\n    public static InitialMoneyCountIdBuilder builder() {\n        return new InitialMoneyCountIdBuilder();\n    }\n\n    public static class InitialMoneyCountIdBuilder {\n        private UUID posTerminalId;\n        private UUID cashierId;\n        private UUID cashDrawerId;\n        private LocalDate bookingDate;\n        private Integer bookingPeriod;\n        private UUID paymentMethodId;\n\n        public InitialMoneyCountIdBuilder posTerminalId(UUID posTerminalId) {\n            this.posTerminalId = posTerminalId;\n            return this;\n        }\n\n        public InitialMoneyCountIdBuilder cashierId(UUID cashierId) {\n            this.cashierId = cashierId;\n            return this;\n        }\n\n        public InitialMoneyCountIdBuilder cashDrawerId(UUID cashDrawerId) {\n            this.cashDrawerId = cashDrawerId;\n            return this;\n        }\n\n        public InitialMoneyCountIdBuilder bookingDate(LocalDate bookingDate) {\n            this.bookingDate = bookingDate;\n            return this;\n        }\n\n        public InitialMoneyCountIdBuilder bookingPeriod(Integer bookingPeriod) {\n            this.bookingPeriod = bookingPeriod;\n            return this;\n        }\n\n        public InitialMoneyCountIdBuilder paymentMethodId(UUID paymentMethodId) {\n            this.paymentMethodId = paymentMethodId;\n            return this;\n        }\n\n        public InitialMoneyCountId build() {\n            return new InitialMoneyCountId(posTerminalId, cashierId, cashDrawerId,\n                    bookingDate, bookingPeriod, paymentMethodId);\n        }\n    }\n}\n</code></pre>\n<p>Here is the JpaRepository interface definition:</p>\n<pre><code>@Repository\npublic interface InitialMoneyCountRepository extends JpaRepository&lt;InitialMoneyCount, InitialMoneyCountId&gt; {}\n</code></pre>\n<p>And here is a test for findById(InitialMoneyCountId id):</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT, properties = &quot;spring.h2.console.enabled=true&quot;)\npublic class InitialMoneyCountRepositoryTest {\n    @Autowired\n    SampleDataGenerator sampleDataGenerator;\n    @Autowired\n    InitialMoneyCountRepository initialMoneyCountRepository;\n\n    @AfterEach\n    public void resetDatabase_AfterEach() {\n        initialMoneyCountRepository.deleteAll();\n    }\n\n    @After\n    public void resetDatabase_After() {\n        initialMoneyCountRepository.deleteAll();\n    }\n\n    @Before\n    public void resetDatabase_Before() {\n        initialMoneyCountRepository.deleteAll();\n    }\n\n    @Test\n    public void findById_sucess() {\n        InitialMoneyCountId initialMoneyCountId = InitialMoneyCountId.builder()\n                .posTerminalId(UUID.randomUUID())\n                .cashDrawerId(UUID.randomUUID())\n                .cashierId(UUID.randomUUID())\n                .bookingDate(LocalDate.now())\n                .bookingPeriod(5)\n                .paymentMethodId(UUID.randomUUID())\n                .build();\n        InitialMoneyCount initialMoneyCount = InitialMoneyCount.builder()\n                .initialMoneyCountId(initialMoneyCountId)\n                .amount(BigDecimal.valueOf(555.55))\n                .amountSystemCurrency(BigDecimal.valueOf(55.555))\n                .currency(Currency.EUR.value())\n                .build();\n        InitialMoneyCount savedInitialMoneyCount = initialMoneyCountRepository.save(initialMoneyCount);\n        Optional&lt;InitialMoneyCount&gt; imc = initialMoneyCountRepository.findById(initialMoneyCountId);\n        Assertions.assertTrue(imc.isPresent());\n    }\n}\n</code></pre>\n<p>However I am not able to find the object by it's id. This is the exception I am getting:</p>\n<pre><code>expected: &lt;true&gt; but was: &lt;false&gt;\nComparison Failure: \nExpected :true\nActual   :false\n&lt;Click to see difference&gt;\n\norg.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from initial_money_count where booking_date=? and booking_period=? and cash_drawer_id=? and cashier_id=? and payment_method_id=? and pos_terminal_id=?; nested exception is org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from initial_money_count where booking_date=? and booking_period=? and cash_drawer_id=? and cashier_id=? and payment_method_id=? and pos_terminal_id=?\n</code></pre>\n<p>Any ideas of what I am missing here?</p>\n<p>I suppose that CrudRepository's findById method works for @Embeadable composite Ids, correct?</p>\n"},{"tags":["java","android","kotlin","artifactory","worldwind"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1686257090,"post_id":76431425,"comment_id":134778120,"body_markdown":"The documentation seems to be outdated. As the project is hosted on GitHub you could use jitpack.io to use the GitHub repo as artifact if you want the latest snapshot https://github.com/NASAWorldWind/WorldWindAndroid","body":"The documentation seems to be outdated. As the project is hosted on GitHub you could use jitpack.io to use the GitHub repo as artifact if you want the latest snapshot <a href=\"https://github.com/NASAWorldWind/WorldWindAndroid\" rel=\"nofollow noreferrer\">github.com/NASAWorldWind/WorldWindAndroid</a>"}],"answers":[{"tags":[],"owner":{"account_id":16696756,"reputation":1241,"user_id":12737399,"display_name":"Atick Faisal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686230140,"creation_date":1686230140,"answer_id":76432253,"question_id":76431425,"body_markdown":"You can get the 0.8.0 version from `jcenter()`:\r\n```kotlin\r\n// settings.gradle\r\ndependencyResolutionManagement {\r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        jcenter()\r\n    }\r\n}\r\n\r\n// app build.gradle\r\nimplementation(&quot;gov.nasa.worldwind.android:worldwind:0.8.0&quot;)\r\n```\r\nI think the repository has been [discontinued][1].\r\n\r\n\r\n  [1]: https://jfrog.com/blog/into-the-sunset-bintray-jcenter-gocenter-and-chartcenter/","title":"How to import an artifactory repository (ie: worldwind) inside an Android project?","body":"<p>You can get the 0.8.0 version from <code>jcenter()</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// settings.gradle\ndependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        mavenCentral()\n        jcenter()\n    }\n}\n\n// app build.gradle\nimplementation(&quot;gov.nasa.worldwind.android:worldwind:0.8.0&quot;)\n</code></pre>\n<p>I think the repository has been <a href=\"https://jfrog.com/blog/into-the-sunset-bintray-jcenter-gocenter-and-chartcenter/\" rel=\"nofollow noreferrer\">discontinued</a>.</p>\n"}],"owner":{"account_id":7365669,"reputation":5074,"user_id":5607457,"accept_rate":48,"display_name":"Greelings"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76432253,"answer_count":1,"score":0,"last_activity_date":1686230140,"creation_date":1686223988,"question_id":76431425,"body_markdown":"I followed the [documentation][1] to import WorldWind inside my project :\r\n\r\n&gt; repositories {\r\n&gt;     maven {\r\n&gt;         url &#39;https://oss.jfrog.org/artifactory/oss-snapshot-local&#39;\r\n&gt;     } }\r\n&gt; \r\n&gt; ...\r\n&gt; \r\n&gt; compile &#39;gov.nasa.worldwind.android:worldwind:0.9.0-SNAPSHOT&#39;\r\n\r\nHowever it throws me this exception :\r\n\r\n&gt; Caused by:\r\n&gt; org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException:\r\n&gt; Could not resolve all files for configuration\r\n&gt; &#39;:app:debugCompileClasspath&#39;.\r\n\r\nHere is my **settings.gradle** file :\r\n\r\n    pluginManagement {\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n            gradlePluginPortal()\r\n        }\r\n    }\r\n    dependencyResolutionManagement {\r\n        repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n            maven{ url &#39;https://oss.jfrog.org/artifactory/oss-snapshot-local&#39;}\r\n        }\r\n    }\r\n    rootProject.name = &quot;WorldWind&quot;\r\n    include &#39;:app&#39;\r\n\r\nAnd my **build.gradle** file :\r\n\r\n    ...\r\n    \r\n    dependencies {\r\n        implementation &#39;androidx.core:core-ktx:1.10.1&#39;\r\n        implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n        implementation &#39;com.google.android.material:material:1.9.0&#39;\r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    \r\n        implementation &#39;gov.nasa.worldwind.android:worldwind:0.9.0-SNAPSHOT&#39;\r\n    }\r\n\r\nAny idea where this comes from?\r\n\r\n  [1]: https://worldwind.arc.nasa.gov/android/get-started/","title":"How to import an artifactory repository (ie: worldwind) inside an Android project?","body":"<p>I followed the <a href=\"https://worldwind.arc.nasa.gov/android/get-started/\" rel=\"nofollow noreferrer\">documentation</a> to import WorldWind inside my project :</p>\n<blockquote>\n<p>repositories {\nmaven {\nurl 'https://oss.jfrog.org/artifactory/oss-snapshot-local'\n} }</p>\n<p>...</p>\n<p>compile 'gov.nasa.worldwind.android:worldwind:0.9.0-SNAPSHOT'</p>\n</blockquote>\n<p>However it throws me this exception :</p>\n<blockquote>\n<p>Caused by:\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException:\nCould not resolve all files for configuration\n':app:debugCompileClasspath'.</p>\n</blockquote>\n<p>Here is my <strong>settings.gradle</strong> file :</p>\n<pre><code>pluginManagement {\n    repositories {\n        google()\n        mavenCentral()\n        gradlePluginPortal()\n    }\n}\ndependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        mavenCentral()\n        maven{ url 'https://oss.jfrog.org/artifactory/oss-snapshot-local'}\n    }\n}\nrootProject.name = &quot;WorldWind&quot;\ninclude ':app'\n</code></pre>\n<p>And my <strong>build.gradle</strong> file :</p>\n<pre><code>...\n\ndependencies {\n    implementation 'androidx.core:core-ktx:1.10.1'\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.9.0'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n\n    implementation 'gov.nasa.worldwind.android:worldwind:0.9.0-SNAPSHOT'\n}\n</code></pre>\n<p>Any idea where this comes from?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"owner":{"account_id":27266517,"reputation":1,"user_id":20788454,"display_name":"Ruslan Dyakov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":388,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686230083,"creation_date":1686228904,"question_id":76432077,"body_markdown":"I have a website in JavaSpring I use Spring Security to log in to the application I implemented via LinkedIn. When logging in I get this error (http://localhost:8080/login?error=[invalid_request]%20A%20required%20parameter%20%20%22client_secret%22%20is%20missing) I can&#39;t figure out how to solve it I&#39;m 100% sure I specified it correctly in settings (spring.security.oauth2.client.registration.linkedin.client-secret)\r\nPlease tell me how to solve this problem\r\n\r\napplication.properties file:\r\n```\r\nspring.security.oauth2.client.registration.linkedin.client-id=****\r\nspring.security.oauth2.client.registration.linkedin.client-secret=****\r\nspring.security.oauth2.client.registration.linkedin.scope=profile\r\nspring.security.oauth2.client.registration.linkedin.authorization-grant-type=authorization_code\r\nspring.security.oauth2.client.registration.linkedin.redirect-uri=http://localhost:8080/login/oauth2/code/linkedin\r\nspring.security.oauth2.client.registration.linkedin.client-name=LinkedIn\r\nspring.security.oauth2.client.registration.linkedin.provider=linkedin\r\nspring.security.oauth2.client.registration.linkedin.client-authentication-method=post\r\nspring.security.oauth2.client.provider.linkedin.authorization-uri=https://www.linkedin.com/oauth/v2/authorization\r\nspring.security.oauth2.client.provider.linkedin.token-uri=https://www.linkedin.com/oauth/v2/accessToken\r\nspring.security.oauth2.client.provider.linkedin.user-info-uri=https://api.linkedin.com/v2/userinfo\r\nspring.security.oauth2.client.provider.linkedin.jwk-set-uri=\r\nspring.security.oauth2.client.provider.linkedin.user-name-attribute=id\r\nspring.security.oauth2.client.provider.linkedin.user-info-authentication-method=post\r\n```\r\n\r\nclass SpringSecurityConfig: \r\n```\r\n/*..other code..*/\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeHttpRequests((authorize) -&gt; authorize\r\n                            .requestMatchers(&quot;/home&quot;).permitAll()\r\n                            .anyRequest().authenticated()\r\n                    )\r\n                    .oauth2Login(oauth2Login -&gt; oauth2Login\r\n                            .loginPage(&quot;/login&quot;)\r\n                            .defaultSuccessUrl(&quot;/home&quot;)\r\n                            .failureHandler(new OAuth2AuthenticationFailureHandler())\r\n                            .successHandler(oAuth2LoginSuccessHandler)\r\n                            .permitAll()\r\n                    )\r\n/*..other code..*/\r\n```\r\n\r\n\r\nI tried recreating the new application in linked develops, but it did not help","title":"A required parameter &quot;client_secret&quot; is missing","body":"<p>I have a website in JavaSpring I use Spring Security to log in to the application I implemented via LinkedIn. When logging in I get this error (http://localhost:8080/login?error=[invalid_request]%20A%20required%20parameter%20%20%22client_secret%22%20is%20missing) I can't figure out how to solve it I'm 100% sure I specified it correctly in settings (spring.security.oauth2.client.registration.linkedin.client-secret)\nPlease tell me how to solve this problem</p>\n<p>application.properties file:</p>\n<pre><code>spring.security.oauth2.client.registration.linkedin.client-id=****\nspring.security.oauth2.client.registration.linkedin.client-secret=****\nspring.security.oauth2.client.registration.linkedin.scope=profile\nspring.security.oauth2.client.registration.linkedin.authorization-grant-type=authorization_code\nspring.security.oauth2.client.registration.linkedin.redirect-uri=http://localhost:8080/login/oauth2/code/linkedin\nspring.security.oauth2.client.registration.linkedin.client-name=LinkedIn\nspring.security.oauth2.client.registration.linkedin.provider=linkedin\nspring.security.oauth2.client.registration.linkedin.client-authentication-method=post\nspring.security.oauth2.client.provider.linkedin.authorization-uri=https://www.linkedin.com/oauth/v2/authorization\nspring.security.oauth2.client.provider.linkedin.token-uri=https://www.linkedin.com/oauth/v2/accessToken\nspring.security.oauth2.client.provider.linkedin.user-info-uri=https://api.linkedin.com/v2/userinfo\nspring.security.oauth2.client.provider.linkedin.jwk-set-uri=\nspring.security.oauth2.client.provider.linkedin.user-name-attribute=id\nspring.security.oauth2.client.provider.linkedin.user-info-authentication-method=post\n</code></pre>\n<p>class SpringSecurityConfig:</p>\n<pre><code>/*..other code..*/\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n            http\n                    .authorizeHttpRequests((authorize) -&gt; authorize\n                            .requestMatchers(&quot;/home&quot;).permitAll()\n                            .anyRequest().authenticated()\n                    )\n                    .oauth2Login(oauth2Login -&gt; oauth2Login\n                            .loginPage(&quot;/login&quot;)\n                            .defaultSuccessUrl(&quot;/home&quot;)\n                            .failureHandler(new OAuth2AuthenticationFailureHandler())\n                            .successHandler(oAuth2LoginSuccessHandler)\n                            .permitAll()\n                    )\n/*..other code..*/\n</code></pre>\n<p>I tried recreating the new application in linked develops, but it did not help</p>\n"},{"tags":["java","spring","spring-boot","spring-amqp"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686229851,"creation_date":1686229851,"answer_id":76432210,"question_id":76430389,"body_markdown":"Name your bean `RabbitListenerConfigUtils.RABBIT_LISTENER_ANNOTATION_PROCESSOR_BEAN_NAME`\r\n\r\n(`org.springframework.amqp.rabbit.config.internalRabbitListenerAnnotationProcessor`)\r\n\r\nto override the default.\r\n\r\nSee `RabbitBootstrapConfiguration`.","title":"Trying to deactivate the automatic registration of RabbitListener instances so I can manually register my own","body":"<p>Name your bean <code>RabbitListenerConfigUtils.RABBIT_LISTENER_ANNOTATION_PROCESSOR_BEAN_NAME</code></p>\n<p>(<code>org.springframework.amqp.rabbit.config.internalRabbitListenerAnnotationProcessor</code>)</p>\n<p>to override the default.</p>\n<p>See <code>RabbitBootstrapConfiguration</code>.</p>\n"}],"owner":{"account_id":3107449,"reputation":91,"user_id":2629954,"display_name":"Antonis Koursoumis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686229851,"creation_date":1686216225,"question_id":76430389,"body_markdown":"I am upgrading my Spring project from Spring 1.x up to (hopefully) 3.x. That said, I have just finished upgrading everything to 2.0.9 and now tried bumping to 2.1.18. There is an issue I am facing that, because I wanted to auto-register Rabbit queues / factories / listeners I have created a custom configuration class.\r\n\r\nTo achieve that I had to create a custom extension of RabbitListenerAnnotationBeanPostProcessor called ExtendedRabbitListenerAnnotationBeanPostProcessor:\r\n\r\n\r\n```\r\n@Component\r\npublic class ExtendedRabbitListenerAnnotationBeanPostProcessor extends\r\n    RabbitListenerAnnotationBeanPostProcessor {\r\n\r\n    public void processAmqpListener(RabbitListener rabbitListener, Method method, Object bean,\r\n        String beanName) {\r\n        super.processAmqpListener(rabbitListener, method, bean, beanName);\r\n    }\r\n}\r\n```\r\n\r\nso that I can have access to the protected processAmqpListener.\r\nWhile this worked up to 2.0.9, in 2.1.18 it seems that Spring itself is registering the beans ahead of our registration which leads to the app breaking.\r\n\r\nIs there any way I can deactivate the automatic registration of RabbitListeners from Spring&#39;s RabbitListenerAnnotationBeanPostProcessor?\r\n\r\n- I have tried creating custom CustomRabbitListener @interface so that the default BeanPostProcessor has nothing to register but that didn&#39;t work.\r\n- I have tried setting the bean for the ExtendedRabbitListenerAnnotationBeanPostProcessor to @Primary so that it overwrites the Spring one but that doesn&#39;t work because it seems the Spring implementation loads its processor ahead of the registration of my bean (so primary does nothing.\r\nEdit: I have also tried removing the @EnableRabbit annotation but that deactivates everything on runtime as well.","title":"Trying to deactivate the automatic registration of RabbitListener instances so I can manually register my own","body":"<p>I am upgrading my Spring project from Spring 1.x up to (hopefully) 3.x. That said, I have just finished upgrading everything to 2.0.9 and now tried bumping to 2.1.18. There is an issue I am facing that, because I wanted to auto-register Rabbit queues / factories / listeners I have created a custom configuration class.</p>\n<p>To achieve that I had to create a custom extension of RabbitListenerAnnotationBeanPostProcessor called ExtendedRabbitListenerAnnotationBeanPostProcessor:</p>\n<pre><code>@Component\npublic class ExtendedRabbitListenerAnnotationBeanPostProcessor extends\n    RabbitListenerAnnotationBeanPostProcessor {\n\n    public void processAmqpListener(RabbitListener rabbitListener, Method method, Object bean,\n        String beanName) {\n        super.processAmqpListener(rabbitListener, method, bean, beanName);\n    }\n}\n</code></pre>\n<p>so that I can have access to the protected processAmqpListener.\nWhile this worked up to 2.0.9, in 2.1.18 it seems that Spring itself is registering the beans ahead of our registration which leads to the app breaking.</p>\n<p>Is there any way I can deactivate the automatic registration of RabbitListeners from Spring's RabbitListenerAnnotationBeanPostProcessor?</p>\n<ul>\n<li>I have tried creating custom CustomRabbitListener @interface so that the default BeanPostProcessor has nothing to register but that didn't work.</li>\n<li>I have tried setting the bean for the ExtendedRabbitListenerAnnotationBeanPostProcessor to @Primary so that it overwrites the Spring one but that doesn't work because it seems the Spring implementation loads its processor ahead of the registration of my bean (so primary does nothing.\nEdit: I have also tried removing the @EnableRabbit annotation but that deactivates everything on runtime as well.</li>\n</ul>\n"},{"tags":["java","rest","curl","post","nessus"],"answers":[{"tags":[],"owner":{"account_id":4166869,"reputation":1208,"user_id":3488735,"accept_rate":82,"display_name":"Gewure"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1498054217,"creation_date":1498054217,"answer_id":44678523,"question_id":44675898,"body_markdown":"I finally fixed it!\r\n\r\nThe problem was with the format of the data-String that i sent as payload. It was not documented, but the API works with JSON-Requests only. Coincidentally my first POST-Request ( /session ) was valid JSON, while the second ( /scans/{id}/launch) wasn&#39;t. \r\n\r\nso doing valid JSON as POST data-payload did the trick:\r\n\r\n    \tString query = &quot;scans/&quot; + scanId + &quot;/launch&quot;;\r\n\t\tString launchJson = &quot;{\\&quot;scan_id\\&quot;:\\&quot;&quot; +String.valueOf(scanId) + &quot;\\&quot;, \\&quot;alt_targets\\&quot;:[\\&quot;&quot; + ip +&quot;\\&quot;]}&quot;;\r\n\t\t\r\n\t\t/* launch it! */\r\n\t\tResponse respLaunch = null;\r\n\t\ttry {\r\n\t\t\trespLaunch = postRequest(query, launchJson);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n...which results in a valid JSON POST data-payload: `{&quot;scan_id&quot;:&quot;21&quot;, &quot;alt_targets&quot;:[&quot;127.0.0.1&quot;]}`\r\n\r\n...instead of the old one: `scan_id=21&amp;alt_targets=[10.208.65.226]`\r\n\r\n","title":"Nessus RESTful API - Java Problems implementing POST","body":"<p>I finally fixed it!</p>\n\n<p>The problem was with the format of the data-String that i sent as payload. It was not documented, but the API works with JSON-Requests only. Coincidentally my first POST-Request ( /session ) was valid JSON, while the second ( /scans/{id}/launch) wasn't. </p>\n\n<p>so doing valid JSON as POST data-payload did the trick:</p>\n\n<pre><code>    String query = \"scans/\" + scanId + \"/launch\";\n    String launchJson = \"{\\\"scan_id\\\":\\\"\" +String.valueOf(scanId) + \"\\\", \\\"alt_targets\\\":[\\\"\" + ip +\"\\\"]}\";\n\n    /* launch it! */\n    Response respLaunch = null;\n    try {\n        respLaunch = postRequest(query, launchJson);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>...which results in a valid JSON POST data-payload: <code>{\"scan_id\":\"21\", \"alt_targets\":[\"127.0.0.1\"]}</code></p>\n\n<p>...instead of the old one: <code>scan_id=21&amp;alt_targets=[10.208.65.226]</code></p>\n"}],"owner":{"account_id":4166869,"reputation":1208,"user_id":3488735,"accept_rate":82,"display_name":"Gewure"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":862,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":44678523,"answer_count":1,"score":0,"last_activity_date":1686229518,"creation_date":1498047488,"question_id":44675898,"body_markdown":"Im currently tasked to do automation for Nessus.\r\n\r\nWhile almost everything works fine, im biting on rock working with this call (**from API-DOCU**):\r\n\r\n    Request\r\n    HTTP Request\r\n    POST /scans/{scan_id}/launch\r\n    Parameters\r\n\r\n    scan_id \tinteger \tThe id of the scan to launch. \t\r\n\r\n    alt_targets \tarray \tIf specified, these targets will be scanned instead of the default. Value can be an array where each index is a target, or an array with a single index of comma separated targets. \t\r\n\r\n    Response\r\n    Status Code \tDescription\r\n    200 \tReturned if the scan was successfully launched.\r\n    403 \tReturned if the scan is disabled.\r\n    404 \tReturned if the scan does not exist.\r\n\r\ni&#39;ve tested the call(s) with CURL, which works fine:\r\n\r\n    curl -X POST -H &#39;X-Cookie: token=db565871198eec7fd9569dd1e3ffb8b2a60f757329749bc5&#39; -H &#39;Content-Type:application/json&#39; --data &#39;{&quot;scan_id&quot;:&quot;21&quot;, &quot;alt_targets&quot;:[127.0.0.1]}&#39; -k &quot;https://nessusServer:8834/scans/21/launch&quot;\r\n...which gives back the intended result: \r\n\r\n    {&quot;scan_uuid&quot;:&quot;06c4aed8-ee64-c44e-9800-f6aeed1ba94fab8b2ed9c1033626&quot;}\r\n\r\nNow to the heart of the Problem: Doing the Same in Java!\r\n\r\nWhat i get is this: \r\n\r\n    java.io.IOException: Server returned HTTP response code: 400 for URL: https://nessusServer:8834/scans/21/launch\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection$10.run(HttpURLConnection.java:1890)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection$10.run(HttpURLConnection.java:1885)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1884)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1457)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1441)\r\n    \tat sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)\r\n    \tat at.bachmann.se.security.NessusAPI.postRequest(NessusAPI.java:466)\r\n\r\nmy postRequest Method looks like this (*and it works with other calls!*):\r\n\r\n\r\n    /**\r\n     * Sends a post Request\r\n     * \r\n     * @param urlPathAdditional\r\n     *            .. the added part of the path (e.g. /scans/{scanID} )\r\n     * @param headers\r\n     *            .. Map&lt;String, String&gt; the Request Properties\r\n     * \r\n     * @return Response ... Response-Clazz containing String and Code\r\n     * @throws UnsupportedEncodingException\r\n     */\r\n    public Response postRequest(String urlPathAdditional, Map&lt;String, String&gt; headers) throws Exception {\r\n    \tSystem.out.println(&quot;postRequest()......&quot;);\r\n    \r\n    \tStringJoiner sj = new StringJoiner(&quot;&amp;&quot;);\r\n    \tfor (Map.Entry&lt;String, String&gt; entry : headers.entrySet())\r\n    \t\tsj.add(URLEncoder.encode(entry.getKey(), &quot;UTF-8&quot;) + &quot;=&quot; + URLEncoder.encode(entry.getValue(), &quot;UTF-8&quot;));\r\n    \r\n    \tString postData = sj.toString();\r\n    \tSystem.out.println(&quot;postData: &quot; + sj.toString());\r\n    \r\n    \tURL obj;\r\n    \r\n    \tHttpsURLConnection con = null;\r\n    \r\n    \ttry {\r\n    \t\t\r\n    \t\tobj = new URL(apiUrl + urlPathAdditional);\r\n    \t\tcon = (HttpsURLConnection) obj.openConnection();\r\n    \r\n    \t\tTrustModifier.relaxHostChecking(con);  // here&#39;s where the magic happens: SSL is overrated! :)\r\n    \r\n    \t\tcon.setRequestMethod(&quot;POST&quot;);\r\n    \t\t\r\n    \t}  catch (KeyManagementException | NoSuchAlgorithmException | KeyStoreException |IOException e1) {\r\n    \t\te1.printStackTrace();\r\n    \t}\r\n    \r\n    \r\n    \t//con.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n    \tcon.setRequestProperty(&quot;User-Agent&quot;, USER_AGENT);\r\n    \tcon.setRequestProperty(&quot;Accept-Language&quot;, &quot;en-US,en;q=0.5&quot;);\r\n    \t//con.setRequestProperty(&quot;Charset&quot;, &quot;UTF-8&quot;);\r\n    \t//con.setRequestProperty(&quot;Content-Length&quot;, Integer.toString(postData.length()));\r\n    \tcon.setRequestProperty(&quot;X-Cookie&quot;, &quot;token=&quot; + token);\r\n    \tcon.setDoOutput(true);\r\n    \r\n    \r\n    \tint respCode = 0;\r\n    \t/* Send post request */\r\n    \ttry {\r\n    \t\t\r\n    \t\tDataOutputStream wr = new DataOutputStream(con.getOutputStream());\r\n    \t\twr.writeBytes(postData);\r\n    \t\twr.flush();\r\n    \t\twr.close();\r\n    \t\t\r\n    \t} catch (IOException e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    \r\n    \trespCode = con.getResponseCode();\r\n    \r\n    \t/* read response */\r\n    \tBufferedReader in = new BufferedReader(\r\n    \t\t\tnew InputStreamReader(con.getInputStream()));\r\n    \tString inputLine;\r\n    \tStringBuffer response = new StringBuffer();\r\n    \r\n    \twhile ((inputLine = in.readLine()) != null) {\r\n    \t\tresponse.append(inputLine);\r\n    \t}\r\n    \tin.close();\r\n    \r\n    \t\r\n    \treturn new Response(response.toString(), respCode);\r\n    }\r\n\r\n...now what i suspect is that the output `postData: alt_targets=%27127.0.0.1%27&amp;scan_id=21` isn&#39;t valid. \r\nThough i have no idea (and the internet gives *astonishingly few informations*) about what an &quot;array&quot; is in context of a POST request - and how it is encoded into a POST. In CURL it works perfectly - in Java it does not, despite the method being OK for other API-Calls (creating a sessions and retrieving the token works with the same method).\r\n\r\nHere the calling part of the code: \r\n\r\n    /* at this point the server is ready */\r\n\t\t/* so we need to get the ID of the scan-name we want to launch */\r\n\t\tint scanId = getScanIdForName(terminalOrM1 + scanType);\r\n\r\n\t\t/* Scanner is Ready for a new Scan! */\r\n\t\t// 200 Returned if the scan was successfully launched.\r\n\t\t// 403 Returned if the scan is disabled.\r\n\t\t// 404 Returned if the scan does not exist.\r\n\t\tString query = &quot;scans/&quot; + scanId + &quot;/launch&quot;;\r\n\t\tString targets =  &quot;\\&#39;&quot; + ip + &quot;\\&#39;&quot;;   // &lt;= DOESN&#39;T WORK \r\n        //String target = ip; // DOESN&#39;T WORK EITHER   -- so what does?\r\n        //String target = &quot;[&quot; + ip + &quot;]&quot;; // NO WORK\r\n\t\tMap&lt;String, String&gt; headers = new HashMap&lt;&gt;();\r\n\t\theaders.put(&quot;alt_targets&quot;, targets);\r\n\t\theaders.put(&quot;scan_id&quot;, String.valueOf(scanId));\r\n\r\n\t\t/* launch it! */\r\n\t\tResponse respLaunch = null;\r\n\t\ttry {\r\n\t\t\trespLaunch = postRequest(query, headers);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\nThe API-Docu doesn&#39;t help much either, as you can see above. \r\n\r\n**Questions:** \r\n\r\n - how do i correctly submit &quot;array&quot; values in a POST request?\r\n - how can i see/debug/check what is actually sent/how the POST looks?\r\n - how to fix my script?\r\n\r\nThank you!\r\n\r\n","title":"Nessus RESTful API - Java Problems implementing POST","body":"<p>Im currently tasked to do automation for Nessus.</p>\n\n<p>While almost everything works fine, im biting on rock working with this call (<strong>from API-DOCU</strong>):</p>\n\n<pre><code>Request\nHTTP Request\nPOST /scans/{scan_id}/launch\nParameters\n\nscan_id     integer     The id of the scan to launch.   \n\nalt_targets     array   If specified, these targets will be scanned instead of the default. Value can be an array where each index is a target, or an array with a single index of comma separated targets.     \n\nResponse\nStatus Code     Description\n200     Returned if the scan was successfully launched.\n403     Returned if the scan is disabled.\n404     Returned if the scan does not exist.\n</code></pre>\n\n<p>i've tested the call(s) with CURL, which works fine:</p>\n\n<pre><code>curl -X POST -H 'X-Cookie: token=db565871198eec7fd9569dd1e3ffb8b2a60f757329749bc5' -H 'Content-Type:application/json' --data '{\"scan_id\":\"21\", \"alt_targets\":[127.0.0.1]}' -k \"https://nessusServer:8834/scans/21/launch\"\n</code></pre>\n\n<p>...which gives back the intended result: </p>\n\n<pre><code>{\"scan_uuid\":\"06c4aed8-ee64-c44e-9800-f6aeed1ba94fab8b2ed9c1033626\"}\n</code></pre>\n\n<p>Now to the heart of the Problem: Doing the Same in Java!</p>\n\n<p>What i get is this: </p>\n\n<pre><code>java.io.IOException: Server returned HTTP response code: 400 for URL: https://nessusServer:8834/scans/21/launch\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at sun.net.www.protocol.http.HttpURLConnection$10.run(HttpURLConnection.java:1890)\n    at sun.net.www.protocol.http.HttpURLConnection$10.run(HttpURLConnection.java:1885)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1884)\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1457)\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1441)\n    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)\n    at at.bachmann.se.security.NessusAPI.postRequest(NessusAPI.java:466)\n</code></pre>\n\n<p>my postRequest Method looks like this (<em>and it works with other calls!</em>):</p>\n\n<pre><code>/**\n * Sends a post Request\n * \n * @param urlPathAdditional\n *            .. the added part of the path (e.g. /scans/{scanID} )\n * @param headers\n *            .. Map&lt;String, String&gt; the Request Properties\n * \n * @return Response ... Response-Clazz containing String and Code\n * @throws UnsupportedEncodingException\n */\npublic Response postRequest(String urlPathAdditional, Map&lt;String, String&gt; headers) throws Exception {\n    System.out.println(\"postRequest()......\");\n\n    StringJoiner sj = new StringJoiner(\"&amp;\");\n    for (Map.Entry&lt;String, String&gt; entry : headers.entrySet())\n        sj.add(URLEncoder.encode(entry.getKey(), \"UTF-8\") + \"=\" + URLEncoder.encode(entry.getValue(), \"UTF-8\"));\n\n    String postData = sj.toString();\n    System.out.println(\"postData: \" + sj.toString());\n\n    URL obj;\n\n    HttpsURLConnection con = null;\n\n    try {\n\n        obj = new URL(apiUrl + urlPathAdditional);\n        con = (HttpsURLConnection) obj.openConnection();\n\n        TrustModifier.relaxHostChecking(con);  // here's where the magic happens: SSL is overrated! :)\n\n        con.setRequestMethod(\"POST\");\n\n    }  catch (KeyManagementException | NoSuchAlgorithmException | KeyStoreException |IOException e1) {\n        e1.printStackTrace();\n    }\n\n\n    //con.setRequestProperty(\"Content-Type\", \"application/json\");\n    con.setRequestProperty(\"User-Agent\", USER_AGENT);\n    con.setRequestProperty(\"Accept-Language\", \"en-US,en;q=0.5\");\n    //con.setRequestProperty(\"Charset\", \"UTF-8\");\n    //con.setRequestProperty(\"Content-Length\", Integer.toString(postData.length()));\n    con.setRequestProperty(\"X-Cookie\", \"token=\" + token);\n    con.setDoOutput(true);\n\n\n    int respCode = 0;\n    /* Send post request */\n    try {\n\n        DataOutputStream wr = new DataOutputStream(con.getOutputStream());\n        wr.writeBytes(postData);\n        wr.flush();\n        wr.close();\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    respCode = con.getResponseCode();\n\n    /* read response */\n    BufferedReader in = new BufferedReader(\n            new InputStreamReader(con.getInputStream()));\n    String inputLine;\n    StringBuffer response = new StringBuffer();\n\n    while ((inputLine = in.readLine()) != null) {\n        response.append(inputLine);\n    }\n    in.close();\n\n\n    return new Response(response.toString(), respCode);\n}\n</code></pre>\n\n<p>...now what i suspect is that the output <code>postData: alt_targets=%27127.0.0.1%27&amp;scan_id=21</code> isn't valid. \nThough i have no idea (and the internet gives <em>astonishingly few informations</em>) about what an \"array\" is in context of a POST request - and how it is encoded into a POST. In CURL it works perfectly - in Java it does not, despite the method being OK for other API-Calls (creating a sessions and retrieving the token works with the same method).</p>\n\n<p>Here the calling part of the code: </p>\n\n<pre><code>/* at this point the server is ready */\n    /* so we need to get the ID of the scan-name we want to launch */\n    int scanId = getScanIdForName(terminalOrM1 + scanType);\n\n    /* Scanner is Ready for a new Scan! */\n    // 200 Returned if the scan was successfully launched.\n    // 403 Returned if the scan is disabled.\n    // 404 Returned if the scan does not exist.\n    String query = \"scans/\" + scanId + \"/launch\";\n    String targets =  \"\\'\" + ip + \"\\'\";   // &lt;= DOESN'T WORK \n    //String target = ip; // DOESN'T WORK EITHER   -- so what does?\n    //String target = \"[\" + ip + \"]\"; // NO WORK\n    Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\n    headers.put(\"alt_targets\", targets);\n    headers.put(\"scan_id\", String.valueOf(scanId));\n\n    /* launch it! */\n    Response respLaunch = null;\n    try {\n        respLaunch = postRequest(query, headers);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>The API-Docu doesn't help much either, as you can see above. </p>\n\n<p><strong>Questions:</strong> </p>\n\n<ul>\n<li>how do i correctly submit \"array\" values in a POST request?</li>\n<li>how can i see/debug/check what is actually sent/how the POST looks?</li>\n<li>how to fix my script?</li>\n</ul>\n\n<p>Thank you!</p>\n"},{"tags":["java","spring","spring-jdbc","spring-transactions"],"answers":[{"comments":[{"owner":{"account_id":19995680,"reputation":53,"user_id":14655791,"display_name":"Marc B"},"score":0,"creation_date":1605626969,"post_id":64878182,"comment_id":114705009,"body_markdown":"Awesome! this is exactly I was looking for. Appreciate your help!","body":"Awesome! this is exactly I was looking for. Appreciate your help!"},{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":1,"creation_date":1605627256,"post_id":64878182,"comment_id":114705146,"body_markdown":"@JohnA: sure hth. there is more information at https://www.baeldung.com/spring-transactional-propagation-isolation. spring does a lot more than people are aware of and this article does a good job of presenting it.","body":"@JohnA: sure hth. there is more information at <a href=\"https://www.baeldung.com/spring-transactional-propagation-isolation\" rel=\"nofollow noreferrer\">baeldung.com/spring-transactional-propagation-isolation</a>. spring does a lot more than people are aware of and this article does a good job of presenting it."}],"tags":[],"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1605627017,"creation_date":1605626776,"answer_id":64878182,"question_id":64877922,"body_markdown":"If there are no @Transactional annotations in B to tell it otherwise, then the b method uses the transaction established in the call to A.methoda. This is normal for Spring, we have components marked transactional that call DAOs that participate in the current transaction without being marked transactional themselves.\r\n\r\nIf you really want to suspend the current transaction, you can add [this annotation][1] to the b method: \r\n\r\n    @Transactional(propagation = Propagation.NOT_SUPPORTED)\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/annotation/Propagation.html#NOT_SUPPORTED\r\n\r\nThere is a caveat about suspending transactions in the Spring API doc:\r\n\r\n&gt; NOTE: Actual transaction suspension will not work out-of-the-box on all transaction managers. This in particular applies to JtaTransactionManager, which requires the javax.transaction.TransactionManager to be made available to it (which is server-specific in standard Java EE).\r\n","title":"When calling a spring Non-Transactional method from a Transactional Method in another instance, does the transaction get propagated?","body":"<p>If there are no @Transactional annotations in B to tell it otherwise, then the b method uses the transaction established in the call to A.methoda. This is normal for Spring, we have components marked transactional that call DAOs that participate in the current transaction without being marked transactional themselves.</p>\n<p>If you really want to suspend the current transaction, you can add <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/annotation/Propagation.html#NOT_SUPPORTED\" rel=\"noreferrer\">this annotation</a> to the b method:</p>\n<pre><code>@Transactional(propagation = Propagation.NOT_SUPPORTED)\n</code></pre>\n<p>There is a caveat about suspending transactions in the Spring API doc:</p>\n<blockquote>\n<p>NOTE: Actual transaction suspension will not work out-of-the-box on all transaction managers. This in particular applies to JtaTransactionManager, which requires the javax.transaction.TransactionManager to be made available to it (which is server-specific in standard Java EE).</p>\n</blockquote>\n"}],"owner":{"account_id":19995680,"reputation":53,"user_id":14655791,"display_name":"Marc B"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4155,"favorite_count":0,"down_vote_count":2,"up_vote_count":5,"accepted_answer_id":64878182,"answer_count":1,"score":3,"last_activity_date":1686228731,"creation_date":1605625818,"question_id":64877922,"body_markdown":"Sorry if this has been discussed before, but I just could not find the answer in all the related discussions on @Transactional spring java annotation.\r\n\r\nWhat happens if we call a method in another instance that does not have an @Transactional annotation from a method that has an @Transactional annotation? will the transaction from the @Transactaional annotated method be suspended? or would it be propagated?\r\n\r\nI found a lot of discussions on if the call to the 2nd method is from the same instance, but not if the 2nd non-transactional method is in another instance. Thank you for your help!\r\n\r\nLike in the example below, what would happen if methodb() in class B is called from methoda() in class A? Would the transaction from methoda be propagated or would methodb be non-transactional?\r\n\r\nExample code below:\r\n\r\n    public class A {\r\n    \r\n      @Autowired\r\n      B b;\r\n    \r\n      @Transactional\r\n      public void methoda() {\r\n        b.methodb();\r\n      }\r\n    }\r\n    \r\n\r\n\r\n    @Component\r\n    public class B {\r\n\r\n      // this method is non transactional and is called from method A in class A\r\n      public void methodb() {\r\n        //do some db updates\r\n      }\r\n    }","title":"When calling a spring Non-Transactional method from a Transactional Method in another instance, does the transaction get propagated?","body":"<p>Sorry if this has been discussed before, but I just could not find the answer in all the related discussions on @Transactional spring java annotation.</p>\n<p>What happens if we call a method in another instance that does not have an @Transactional annotation from a method that has an @Transactional annotation? will the transaction from the @Transactaional annotated method be suspended? or would it be propagated?</p>\n<p>I found a lot of discussions on if the call to the 2nd method is from the same instance, but not if the 2nd non-transactional method is in another instance. Thank you for your help!</p>\n<p>Like in the example below, what would happen if methodb() in class B is called from methoda() in class A? Would the transaction from methoda be propagated or would methodb be non-transactional?</p>\n<p>Example code below:</p>\n<pre><code>public class A {\n\n  @Autowired\n  B b;\n\n  @Transactional\n  public void methoda() {\n    b.methodb();\n  }\n}\n\n\n\n@Component\npublic class B {\n\n  // this method is non transactional and is called from method A in class A\n  public void methodb() {\n    //do some db updates\n  }\n}\n</code></pre>\n"},{"tags":["java","interface","dry"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1686226613,"post_id":76431757,"comment_id":134771756,"body_markdown":"Do you mean the other filters are all just testing if a particular property of an earthquake is within some range?","body":"Do you mean the other filters are all just testing if a particular property of an earthquake is within some range?"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1686226896,"post_id":76431757,"comment_id":134771825,"body_markdown":"That is **not** how you want to [compare floating point values](https://stackoverflow.com/a/4915891/2970947).","body":"That is <b>not</b> how you want to <a href=\"https://stackoverflow.com/a/4915891/2970947\">compare floating point values</a>."},{"owner":{"account_id":15213144,"reputation":332,"user_id":10977227,"display_name":"Ryan"},"score":0,"creation_date":1686227208,"post_id":76431757,"comment_id":134771910,"body_markdown":"@ElliottFrisch &quot;Comparing for greater/smaller is not really a problem unless you&#39;re working right at the edge of the float/double precision limit.&quot;\n\nI&#39;m not really working at the edge of the preicision limit here so I think double comparisons are fine in this scenario..?","body":"@ElliottFrisch &quot;Comparing for greater/smaller is not really a problem unless you&#39;re working right at the edge of the float/double precision limit.&quot;  I&#39;m not really working at the edge of the preicision limit here so I think double comparisons are fine in this scenario..?"},{"owner":{"account_id":15213144,"reputation":332,"user_id":10977227,"display_name":"Ryan"},"score":0,"creation_date":1686227231,"post_id":76431757,"comment_id":134771918,"body_markdown":"@Sweeper yes that&#39;s right","body":"@Sweeper yes that&#39;s right"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1686227814,"post_id":76431757,"comment_id":134772058,"body_markdown":"@Ryan Your two filters are not comparing for greater/smaller, they only differ by comparing for exact equality.","body":"@Ryan Your two filters are not comparing for greater/smaller, they only differ by comparing for exact equality."}],"answers":[{"comments":[{"owner":{"account_id":15213144,"reputation":332,"user_id":10977227,"display_name":"Ryan"},"score":1,"creation_date":1686227493,"post_id":76431809,"comment_id":134771989,"body_markdown":"Brian this is great thank you! And an honour to hear from you, actually reading your book!","body":"Brian this is great thank you! And an honour to hear from you, actually reading your book!"},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1686227503,"post_id":76431809,"comment_id":134771991,"body_markdown":"I would argue that naming things may still be helpful in reading the code later. Perhaps, defining `interface Filter extends Predicate&lt;Earthquake&gt;` is the best of both worlds.","body":"I would argue that naming things may still be helpful in reading the code later. Perhaps, defining <code>interface Filter extends Predicate&lt;Earthquake&gt;</code> is the best of both worlds."},{"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"score":2,"creation_date":1686228188,"post_id":76431809,"comment_id":134772142,"body_markdown":"@M.Prokhorov As always, it depends.  Sometimes domain-specific names are extremely helpful; sometimes they are just clutter.  It is rare that you will know which when starting out, so don&#39;t spend a lot of time on that up front; wait until you know the shape of your solution.  And in general, inventing domain-specific names for common concepts like Predicate or List is usually more in the latter category; generally best to save the domain-specific names for your actual domain concepts.","body":"@M.Prokhorov As always, it depends.  Sometimes domain-specific names are extremely helpful; sometimes they are just clutter.  It is rare that you will know which when starting out, so don&#39;t spend a lot of time on that up front; wait until you know the shape of your solution.  And in general, inventing domain-specific names for common concepts like Predicate or List is usually more in the latter category; generally best to save the domain-specific names for your actual domain concepts."}],"tags":[],"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686228312,"creation_date":1686226763,"answer_id":76431809,"question_id":76431757,"body_markdown":"Note that your `Filter` is basically identical to `java.util.function.Predicate`, so we can just use that.  You also don&#39;t need a subclass of `Filter`; just use lambdas.\r\n\r\nIn your example, the inclusive/exclusive choice travels with the filter, so all you have to do is define two factories:\r\n\r\n    Predicate&lt;Earthquake&gt; rangeInclusive(double min, double max) { \r\n        return e -&gt; e.magnitude() &gt; min &amp;&amp; e.magnitude() &lt;= max;\r\n    }\r\n\r\n    Predicate&lt;Earthquake&gt; rangeExclusive(double min, double max) { \r\n        return e -&gt; e.magnitude() &gt; min &amp;&amp; e.magnitude() &lt; max;\r\n    }\r\n\r\nIf you want to use data, rather than the method name, to select inclusive/exclusive, you can do that with the switch in just one place:\r\n\r\n    Predicate&lt;Earthquake&gt; range(double min, double max, ComparisonStrategy strat) { \r\n        return switch (strat) { \r\n            case INCLUSIVE -&gt; e -&gt; e.magnitude() &gt; min &amp;&amp; e.magnitude() &lt;= max;\r\n            case EXCLUSIVE -&gt; e -&gt; e.magnitude() &gt; min &amp;&amp; e.magnitude() &lt; max;\r\n    }","title":"How to generalize a comparison in Java code","body":"<p>Note that your <code>Filter</code> is basically identical to <code>java.util.function.Predicate</code>, so we can just use that.  You also don't need a subclass of <code>Filter</code>; just use lambdas.</p>\n<p>In your example, the inclusive/exclusive choice travels with the filter, so all you have to do is define two factories:</p>\n<pre><code>Predicate&lt;Earthquake&gt; rangeInclusive(double min, double max) { \n    return e -&gt; e.magnitude() &gt; min &amp;&amp; e.magnitude() &lt;= max;\n}\n\nPredicate&lt;Earthquake&gt; rangeExclusive(double min, double max) { \n    return e -&gt; e.magnitude() &gt; min &amp;&amp; e.magnitude() &lt; max;\n}\n</code></pre>\n<p>If you want to use data, rather than the method name, to select inclusive/exclusive, you can do that with the switch in just one place:</p>\n<pre><code>Predicate&lt;Earthquake&gt; range(double min, double max, ComparisonStrategy strat) { \n    return switch (strat) { \n        case INCLUSIVE -&gt; e -&gt; e.magnitude() &gt; min &amp;&amp; e.magnitude() &lt;= max;\n        case EXCLUSIVE -&gt; e -&gt; e.magnitude() &gt; min &amp;&amp; e.magnitude() &lt; max;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686228536,"creation_date":1686228120,"answer_id":76431966,"question_id":76431757,"body_markdown":"Seems to me, that the general part of your code is whether the comparison is `INCLUSIVE` or `EXCLUSIVE`, while the wrapper `Filter` is mostly for the property extraction.\r\n\r\nIf I&#39;m correct, then what about doing this:\r\n\r\n    public enum ComparisonStrategy {\r\n      INCLUSIVE() {\r\n        @Override\r\n        public boolean test(double value, double min, double max) {\r\n          return value &gt;= min &amp;&amp; value &lt;= max;\r\n        }\r\n      },\r\n      EXCLUSIVE() {\r\n        @Override\r\n        public boolean test(double value, double min, double max) {\r\n          return value &gt; min &amp;&amp; value &lt; max;\r\n        }\r\n      };\r\n\r\n      public abstract boolean test(double value, double rangeStart, double rangeEnd);\r\n    }\r\n\r\nSo your filter becomes:\r\n\r\n    public final class MagnitudeFilter implements Filter {\r\n\r\n      private final double minimumMagnitude;\r\n      private final double maximumMagnitude;\r\n      private final ComparisonStrategy strategy;\r\n\r\n      public MagnitudeFilter(\r\n          double minimumMagnitude, double maximumMagnitude,\r\n          DoubleComparisonStrategy strategy) {\r\n        this.minimumMagnitude = minimumMagnitude;\r\n        this.maximumMagnitude = maximumMagnitude;\r\n        this.strategy = strategy;\r\n      }\r\n\r\n      @Override\r\n      public boolean satisfies(Earthquake earthquake) {\r\n        return strategy.test(\r\n          earthquake.magnitude(), minimumMagnitude, maximumMagnitude\r\n        );\r\n      }\r\n    }\r\n\r\nObvious downside of this approach is if your `ComparisonStrategy` is used to test for more than just `double` values (i.e. `long`s and `int`s too) - then you either will need to extract separate `DoubleComparisonStrategy`, `LongComparisonStrategy` enum classes, or make many methods like `boolean testDouble(double, double, double)`, `boolean testLong(long, long long)`, etc. in the &quot;main&quot; `ComparisonStrategy` class. It may not even be possible to define a proper comparison for all possible properties you would want to compare - i.e. it&#39;s going to be a lot harder to include a `Comparator&lt;T&gt;` into this mix when going with `enum` approach.\r\n\r\n\r\nUPD: combining with the approach from the [other answer][1], this makes:\r\n\r\n    Predicate&lt;Earthquake&gt; magnitudeInclusive(double min, double max) {\r\n      return e -&gt; ComparisonStrategy.INCLUSIVE.test(e.magnitude(), min, max);\r\n    }\r\n\r\n    Predicate&lt;Earthquake magnitudeExclusive(double min, double max) {\r\n      return e -&gt; ComparisonStrategy.EXCLUSIVE.test(e.magnitude(), min, max);\r\n    }\r\n\r\nAlso, this will look the same if you still want to use `Filter` interface, because that is also a valid lambda target:\r\n\r\n    Filter magnitudeInclusive(double min, double max) {\r\n      return e -&gt; ComparisonStrategy.INCLUSIVE.test(e.magnidute(), min, max);\r\n    }\r\n\r\n\r\n[1]: https://stackoverflow.com/a/76431809/7470253","title":"How to generalize a comparison in Java code","body":"<p>Seems to me, that the general part of your code is whether the comparison is <code>INCLUSIVE</code> or <code>EXCLUSIVE</code>, while the wrapper <code>Filter</code> is mostly for the property extraction.</p>\n<p>If I'm correct, then what about doing this:</p>\n<pre><code>public enum ComparisonStrategy {\n  INCLUSIVE() {\n    @Override\n    public boolean test(double value, double min, double max) {\n      return value &gt;= min &amp;&amp; value &lt;= max;\n    }\n  },\n  EXCLUSIVE() {\n    @Override\n    public boolean test(double value, double min, double max) {\n      return value &gt; min &amp;&amp; value &lt; max;\n    }\n  };\n\n  public abstract boolean test(double value, double rangeStart, double rangeEnd);\n}\n</code></pre>\n<p>So your filter becomes:</p>\n<pre><code>public final class MagnitudeFilter implements Filter {\n\n  private final double minimumMagnitude;\n  private final double maximumMagnitude;\n  private final ComparisonStrategy strategy;\n\n  public MagnitudeFilter(\n      double minimumMagnitude, double maximumMagnitude,\n      DoubleComparisonStrategy strategy) {\n    this.minimumMagnitude = minimumMagnitude;\n    this.maximumMagnitude = maximumMagnitude;\n    this.strategy = strategy;\n  }\n\n  @Override\n  public boolean satisfies(Earthquake earthquake) {\n    return strategy.test(\n      earthquake.magnitude(), minimumMagnitude, maximumMagnitude\n    );\n  }\n}\n</code></pre>\n<p>Obvious downside of this approach is if your <code>ComparisonStrategy</code> is used to test for more than just <code>double</code> values (i.e. <code>long</code>s and <code>int</code>s too) - then you either will need to extract separate <code>DoubleComparisonStrategy</code>, <code>LongComparisonStrategy</code> enum classes, or make many methods like <code>boolean testDouble(double, double, double)</code>, <code>boolean testLong(long, long long)</code>, etc. in the &quot;main&quot; <code>ComparisonStrategy</code> class. It may not even be possible to define a proper comparison for all possible properties you would want to compare - i.e. it's going to be a lot harder to include a <code>Comparator&lt;T&gt;</code> into this mix when going with <code>enum</code> approach.</p>\n<p>UPD: combining with the approach from the <a href=\"https://stackoverflow.com/a/76431809/7470253\">other answer</a>, this makes:</p>\n<pre><code>Predicate&lt;Earthquake&gt; magnitudeInclusive(double min, double max) {\n  return e -&gt; ComparisonStrategy.INCLUSIVE.test(e.magnitude(), min, max);\n}\n\nPredicate&lt;Earthquake magnitudeExclusive(double min, double max) {\n  return e -&gt; ComparisonStrategy.EXCLUSIVE.test(e.magnitude(), min, max);\n}\n</code></pre>\n<p>Also, this will look the same if you still want to use <code>Filter</code> interface, because that is also a valid lambda target:</p>\n<pre><code>Filter magnitudeInclusive(double min, double max) {\n  return e -&gt; ComparisonStrategy.INCLUSIVE.test(e.magnidute(), min, max);\n}\n</code></pre>\n"}],"owner":{"account_id":15213144,"reputation":332,"user_id":10977227,"display_name":"Ryan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76431809,"answer_count":2,"score":1,"last_activity_date":1686228536,"creation_date":1686226437,"question_id":76431757,"body_markdown":"Say I have a `Filter` interface\r\n```java\r\npublic interface Filter {\r\n   public boolean satisfies(Earthquake earthquake)\r\n}\r\n```\r\nWhich can have different implementations (one such below)\r\n```java\r\npublic final class MagnitudeFilter implements Filter {\r\n\r\n    private final double minimumMagnitude;\r\n    private final double maximumMagnitude;\r\n    private final ComparisonStrategy strategy;\r\n\r\n    public MagnitudeFilter(double minimumMagnitude, double maximumMagnitude, ComparisonStrategy strategy) {\r\n        this.minimumMagnitude = minimumMagnitude;\r\n        this.maximumMagnitude = maximumMagnitude;\r\n        this.strategy = strategy;\r\n    }\r\n\r\n    @Override\r\n    public boolean satisfies(Earthquake earthquake) {\r\n        return switch (strategy) {\r\n            case EXCLUSIVE -&gt; earthquake.magnitude() &gt; minimumMagnitude &amp;&amp;\r\n                earthquake.magnitude() &lt; maximumMagnitude;\r\n            case INCLUSIVE -&gt; earthquake.magnitude() &gt;= minimumMagnitude &amp;&amp;\r\n                earthquake.magnitude() &lt;= maximumMagnitude;\r\n        };\r\n    }\r\n}\r\n```\r\nIn some cases I would like to perform an `inclusive` comparison and other times I would like to perform an `exclusive` comparison, however in the above form, I will need to repeat the `switch` expression for every single implementation.\r\n\r\nIs there an alternative way that I can generalize this pattern for all implementations so as not to have to repeat the code in the switch statement?\r\n\r\n\r\n\r\nTried to user another interface but ended up in a loop of repeating code again.","title":"How to generalize a comparison in Java code","body":"<p>Say I have a <code>Filter</code> interface</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Filter {\n   public boolean satisfies(Earthquake earthquake)\n}\n</code></pre>\n<p>Which can have different implementations (one such below)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class MagnitudeFilter implements Filter {\n\n    private final double minimumMagnitude;\n    private final double maximumMagnitude;\n    private final ComparisonStrategy strategy;\n\n    public MagnitudeFilter(double minimumMagnitude, double maximumMagnitude, ComparisonStrategy strategy) {\n        this.minimumMagnitude = minimumMagnitude;\n        this.maximumMagnitude = maximumMagnitude;\n        this.strategy = strategy;\n    }\n\n    @Override\n    public boolean satisfies(Earthquake earthquake) {\n        return switch (strategy) {\n            case EXCLUSIVE -&gt; earthquake.magnitude() &gt; minimumMagnitude &amp;&amp;\n                earthquake.magnitude() &lt; maximumMagnitude;\n            case INCLUSIVE -&gt; earthquake.magnitude() &gt;= minimumMagnitude &amp;&amp;\n                earthquake.magnitude() &lt;= maximumMagnitude;\n        };\n    }\n}\n</code></pre>\n<p>In some cases I would like to perform an <code>inclusive</code> comparison and other times I would like to perform an <code>exclusive</code> comparison, however in the above form, I will need to repeat the <code>switch</code> expression for every single implementation.</p>\n<p>Is there an alternative way that I can generalize this pattern for all implementations so as not to have to repeat the code in the switch statement?</p>\n<p>Tried to user another interface but ended up in a loop of repeating code again.</p>\n"},{"tags":["java","performance","assembly","jvm","profiling"],"comments":[{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":3,"creation_date":1597342202,"post_id":63397711,"comment_id":112109002,"body_markdown":"Indeed, looks like some JIT optimization broke mapping between compiled code and bci. If run JDK 14 with `-XX:MaxInlineLevel=0`, &quot;putfield count&quot; annotation will become visible again.","body":"Indeed, looks like some JIT optimization broke mapping between compiled code and bci. If run JDK 14 with <code>-XX:MaxInlineLevel=0</code>, &quot;putfield count&quot; annotation will become visible again."},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1597350543,"post_id":63397711,"comment_id":112112293,"body_markdown":"@apangin thanks! Should I then report it to `hotspot-compiler-dev` or `jmh-dev` mailing lists? What do you think?","body":"@apangin thanks! Should I then report it to <code>hotspot-compiler-dev</code> or <code>jmh-dev</code> mailing lists? What do you think?"},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1597355628,"post_id":63397711,"comment_id":112114124,"body_markdown":"That&#39;s certainly not a jmh fault. Debug info is missing in `-XX:+PrintAssembly`. So, `hotspot-compiler-dev` will be more appropriate.","body":"That&#39;s certainly not a jmh fault. Debug info is missing in <code>-XX:+PrintAssembly</code>. So, <code>hotspot-compiler-dev</code> will be more appropriate."},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1597400576,"post_id":63397711,"comment_id":112126811,"body_markdown":"@apangin it looks like this won&#39;t be fixed: https://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2020-August/039513.html","body":"@apangin it looks like this won&#39;t be fixed: <a href=\"https://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2020-August/039513.html\" rel=\"nofollow noreferrer\">mail.openjdk.java.net/pipermail/hotspot-compiler-dev/&hellip;</a>"},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1597405378,"post_id":63397711,"comment_id":112128804,"body_markdown":"Yeah, quite expected. I can&#39;t agree with the justification though. While it&#39;s true that it&#39;s hard to maintain the mapping in general, this does not mean it&#39;s absolutely impossible in a particular case. Ignoring such problems with no even minimal investigation will eventually end up in no debug info at all.","body":"Yeah, quite expected. I can&#39;t agree with the justification though. While it&#39;s true that it&#39;s hard to maintain the mapping in general, this does not mean it&#39;s absolutely impossible in a particular case. Ignoring such problems with no even minimal investigation will eventually end up in no debug info at all."},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1633938480,"post_id":63397711,"comment_id":122883603,"body_markdown":"@apangin btw, can this flag `-XX:MaxInlineLevel=0` distort the profile in the way that with disabled inlining some other optimizations can be disabled as well? And if it can, do you know any examples of such behaviour?","body":"@apangin btw, can this flag <code>-XX:MaxInlineLevel=0</code> distort the profile in the way that with disabled inlining some other optimizations can be disabled as well? And if it can, do you know any examples of such behaviour?"},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1633986377,"post_id":63397711,"comment_id":122901269,"body_markdown":"It doesn&#39;t disable other optimizations directly, but definitely makes them less efficient, as the scope where optimizations can be applied gets notably reduced. See https://stackoverflow.com/a/52468276/3448419","body":"It doesn&#39;t disable other optimizations directly, but definitely makes them less efficient, as the scope where optimizations can be applied gets notably reduced. See <a href=\"https://stackoverflow.com/a/52468276/3448419\">stackoverflow.com/a/52468276/3448419</a>"}],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642775912,"creation_date":1642775912,"answer_id":70803040,"question_id":63397711,"body_markdown":"It turned out that you couldn&#39;t use hsdis built for e.g. JDK 8 with JDK 11. For the perfect match you need to build hsdis from JDK sources, then build the JDK itself and run the application on this ad-hoc build.\r\n\r\nThis approach worked perfectly for me when I was investigating https://stackoverflow.com/questions/70272651/missing-bounds-checking-elimination-in-string-constructor/70296859.","title":"LinuxPerfAsmProfiler shows Java code corresponding assembly hot spot for Java 8, but not for Java 14","body":"<p>It turned out that you couldn't use hsdis built for e.g. JDK 8 with JDK 11. For the perfect match you need to build hsdis from JDK sources, then build the JDK itself and run the application on this ad-hoc build.</p>\n<p>This approach worked perfectly for me when I was investigating <a href=\"https://stackoverflow.com/questions/70272651/missing-bounds-checking-elimination-in-string-constructor/70296859\">Missing bounds checking elimination in String constructor?</a>.</p>\n"}],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":70803040,"answer_count":1,"score":6,"last_activity_date":1686228228,"creation_date":1597330342,"question_id":63397711,"body_markdown":"When investigating an issue related to instantiation of Spring&#39;s `org.springframework.util.ConcurrentReferenceHashMap` (as of `spring-core-5.1.3.RELEASE`) I&#39;ve used `LinuxPerfAsmProfiler` shipped along with JMH to profile generated assembly.\r\n\r\nI simply run this\r\n```java\r\n@Benchmark\r\npublic Object measureInit() {\r\n  return new ConcurrentReferenceHashMap&lt;&gt;();\r\n}\r\n```\r\nBenchmarking on JDK 8 allows to identify one of non-obvious hot spots:\r\n```asm\r\n  0.61%        0x00007f32d92772ea: lock addl $0x0,(%rsp)     ;*putfield count\r\n                                                             ; - org.springframework.util.ConcurrentReferenceHashMap$Segment::&amp;lt;init&amp;gt;@11 (line 476)\r\n                                                             ; - org.springframework.util.ConcurrentReferenceHashMap::&amp;lt;init&amp;gt;@141 (line 184)\r\n 15.81%        0x00007f32d92772ef: mov    0x60(%r15),%rdx\r\n```\r\nThis corresponds unnecessary assignment of default value to a volatile field:\r\n```java\r\nprotected final class Segment extends ReentrantLock {\r\n  private volatile int count = 0;\r\n}\r\n```\r\nand `Segment` is in turn instantiated in loop in constructor of `CCRHM`:\r\n```java\r\npublic ConcurrentReferenceHashMap(\r\n  \tint initialCapacity, float loadFactor, int concurrencyLevel, ReferenceType referenceType) {\r\n  this.loadFactor = loadFactor;\r\n  this.shift = calculateShift(concurrencyLevel, MAXIMUM_CONCURRENCY_LEVEL);\r\n  int size = 1 &lt;&lt; this.shift;\r\n  this.referenceType = referenceType;\r\n  int roundedUpSegmentCapacity = (int) ((initialCapacity + size - 1L) / size);\r\n  this.segments = (Segment[]) Array.newInstance(Segment.class, size);\r\n  for (int i = 0; i &lt; this.segments.length; i++) {\r\n   this.segments[i] = new Segment(roundedUpSegmentCapacity);\r\n  }\r\n}\r\n```\r\nSo the instruction is likely to be really hot. Full layout of assembly can be found in my [gist][1]\r\n\r\nThen I run the same benchmark on JDK 14 and again use `LinuxPerfAsmProfiler`, but now I don&#39;t have any explicit pointing to `volatile int count = 0` [in captured assembly][2].\r\n\r\nLooking for `lock addl $0x0` instruction which is assignment of `0` under `lock` prefix I have found this:\r\n```asm\r\n  0.08%                          │  0x00007f3717d46187:   lock addl $0x0,-0x40(%rsp)\r\n 23.74%                          │  0x00007f3717d4618d:   mov    0x120(%r15),%rbx\r\n```\r\nwhich is likely to correspond `volatile int count = 0` because it follows constructor call of `Segment`&#39;s superclass `ReentrantLock`:\r\n```asm\r\n  0.77%                          │  0x00007f3717d46140:   movq   $0x0,0x18(%rax)              ;*new {reexecute=0 rethrow=0 return_oop=0}\r\n                                 │                                                            ; - java.util.concurrent.locks.ReentrantLock::&amp;lt;init&amp;gt;@5 (line 294)\r\n                                 │                                                            ; - org.springframework.util.ConcurrentReferenceHashMap$Segment::&amp;lt;init&amp;gt;@6 (line 484)\r\n                                 │                                                            ; - org.springframework.util.ConcurrentReferenceHashMap::&amp;lt;init&amp;gt;@141 (line 184)\r\n  0.06%                          │  0x00007f3717d46148:   mov    %r8,%rcx\r\n  0.05%                          │  0x00007f3717d4614b:   mov    %rax,%rbx\r\n  0.03%                          │  0x00007f3717d4614e:   shr    $0x3,%rbx\r\n  0.74%                          │  0x00007f3717d46152:   mov    %ebx,0xc(%r8)\r\n  0.06%                          │  0x00007f3717d46156:   mov    %rax,%rbx\r\n  0.05%                          │  0x00007f3717d46159:   xor    %rcx,%rbx\r\n  0.02%                          │  0x00007f3717d4615c:   shr    $0x14,%rbx\r\n  0.72%                          │  0x00007f3717d46160:   test   %rbx,%rbx\r\n                             ╭   │  0x00007f3717d46163:   je     0x00007f3717d4617f\r\n                             │   │  0x00007f3717d46165:   shr    $0x9,%rcx\r\n                             │   │  0x00007f3717d46169:   movabs $0x7f370a872000,%rdi\r\n                             │   │  0x00007f3717d46173:   add    %rcx,%rdi\r\n                             │   │  0x00007f3717d46176:   cmpb   $0x8,(%rdi)\r\n  0.00%                      │   │  0x00007f3717d46179:   jne    0x00007f3717d46509\r\n  0.04%                      ↘   │  0x00007f3717d4617f:   movl   $0x0,0x14(%r8)\r\n  0.08%                          │  0x00007f3717d46187:   lock addl $0x0,-0x40(%rsp)\r\n 23.74%                          │  0x00007f3717d4618d:   mov    0x120(%r15),%rbx\r\n```\r\n\r\nThe problem is that I don&#39;t have any mention of `putfield count` in generated assembly at all.\r\n\r\nCould anyone explain why I don&#39;t see it?\r\n\r\n\r\n  [1]: https://gist.github.com/stsypanov/ff5678987c6f95a2aaf292fa2a3b92a8\r\n  [2]: https://gist.github.com/stsypanov/2e4bd73c39d7465cbdd75ba26d4bc217","title":"LinuxPerfAsmProfiler shows Java code corresponding assembly hot spot for Java 8, but not for Java 14","body":"<p>When investigating an issue related to instantiation of Spring's <code>org.springframework.util.ConcurrentReferenceHashMap</code> (as of <code>spring-core-5.1.3.RELEASE</code>) I've used <code>LinuxPerfAsmProfiler</code> shipped along with JMH to profile generated assembly.</p>\n<p>I simply run this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Benchmark\npublic Object measureInit() {\n  return new ConcurrentReferenceHashMap&lt;&gt;();\n}\n</code></pre>\n<p>Benchmarking on JDK 8 allows to identify one of non-obvious hot spots:</p>\n<pre><code>  0.61%        0x00007f32d92772ea: lock addl $0x0,(%rsp)     ;*putfield count\n                                                             ; - org.springframework.util.ConcurrentReferenceHashMap$Segment::&amp;lt;init&amp;gt;@11 (line 476)\n                                                             ; - org.springframework.util.ConcurrentReferenceHashMap::&amp;lt;init&amp;gt;@141 (line 184)\n 15.81%        0x00007f32d92772ef: mov    0x60(%r15),%rdx\n</code></pre>\n<p>This corresponds unnecessary assignment of default value to a volatile field:</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected final class Segment extends ReentrantLock {\n  private volatile int count = 0;\n}\n</code></pre>\n<p>and <code>Segment</code> is in turn instantiated in loop in constructor of <code>CCRHM</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ConcurrentReferenceHashMap(\n    int initialCapacity, float loadFactor, int concurrencyLevel, ReferenceType referenceType) {\n  this.loadFactor = loadFactor;\n  this.shift = calculateShift(concurrencyLevel, MAXIMUM_CONCURRENCY_LEVEL);\n  int size = 1 &lt;&lt; this.shift;\n  this.referenceType = referenceType;\n  int roundedUpSegmentCapacity = (int) ((initialCapacity + size - 1L) / size);\n  this.segments = (Segment[]) Array.newInstance(Segment.class, size);\n  for (int i = 0; i &lt; this.segments.length; i++) {\n   this.segments[i] = new Segment(roundedUpSegmentCapacity);\n  }\n}\n</code></pre>\n<p>So the instruction is likely to be really hot. Full layout of assembly can be found in my <a href=\"https://gist.github.com/stsypanov/ff5678987c6f95a2aaf292fa2a3b92a8\" rel=\"nofollow noreferrer\">gist</a></p>\n<p>Then I run the same benchmark on JDK 14 and again use <code>LinuxPerfAsmProfiler</code>, but now I don't have any explicit pointing to <code>volatile int count = 0</code> <a href=\"https://gist.github.com/stsypanov/2e4bd73c39d7465cbdd75ba26d4bc217\" rel=\"nofollow noreferrer\">in captured assembly</a>.</p>\n<p>Looking for <code>lock addl $0x0</code> instruction which is assignment of <code>0</code> under <code>lock</code> prefix I have found this:</p>\n<pre><code>  0.08%                          │  0x00007f3717d46187:   lock addl $0x0,-0x40(%rsp)\n 23.74%                          │  0x00007f3717d4618d:   mov    0x120(%r15),%rbx\n</code></pre>\n<p>which is likely to correspond <code>volatile int count = 0</code> because it follows constructor call of <code>Segment</code>'s superclass <code>ReentrantLock</code>:</p>\n<pre><code>  0.77%                          │  0x00007f3717d46140:   movq   $0x0,0x18(%rax)              ;*new {reexecute=0 rethrow=0 return_oop=0}\n                                 │                                                            ; - java.util.concurrent.locks.ReentrantLock::&amp;lt;init&amp;gt;@5 (line 294)\n                                 │                                                            ; - org.springframework.util.ConcurrentReferenceHashMap$Segment::&amp;lt;init&amp;gt;@6 (line 484)\n                                 │                                                            ; - org.springframework.util.ConcurrentReferenceHashMap::&amp;lt;init&amp;gt;@141 (line 184)\n  0.06%                          │  0x00007f3717d46148:   mov    %r8,%rcx\n  0.05%                          │  0x00007f3717d4614b:   mov    %rax,%rbx\n  0.03%                          │  0x00007f3717d4614e:   shr    $0x3,%rbx\n  0.74%                          │  0x00007f3717d46152:   mov    %ebx,0xc(%r8)\n  0.06%                          │  0x00007f3717d46156:   mov    %rax,%rbx\n  0.05%                          │  0x00007f3717d46159:   xor    %rcx,%rbx\n  0.02%                          │  0x00007f3717d4615c:   shr    $0x14,%rbx\n  0.72%                          │  0x00007f3717d46160:   test   %rbx,%rbx\n                             ╭   │  0x00007f3717d46163:   je     0x00007f3717d4617f\n                             │   │  0x00007f3717d46165:   shr    $0x9,%rcx\n                             │   │  0x00007f3717d46169:   movabs $0x7f370a872000,%rdi\n                             │   │  0x00007f3717d46173:   add    %rcx,%rdi\n                             │   │  0x00007f3717d46176:   cmpb   $0x8,(%rdi)\n  0.00%                      │   │  0x00007f3717d46179:   jne    0x00007f3717d46509\n  0.04%                      ↘   │  0x00007f3717d4617f:   movl   $0x0,0x14(%r8)\n  0.08%                          │  0x00007f3717d46187:   lock addl $0x0,-0x40(%rsp)\n 23.74%                          │  0x00007f3717d4618d:   mov    0x120(%r15),%rbx\n</code></pre>\n<p>The problem is that I don't have any mention of <code>putfield count</code> in generated assembly at all.</p>\n<p>Could anyone explain why I don't see it?</p>\n"},{"tags":["java","junit5","wiremock"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1686215132,"post_id":76429546,"comment_id":134769524,"body_markdown":"Unrelated to your issue, but you&#39;ve got an &quot;application/json&quot; header but the content &quot;Hello world&quot; is not valid JSON.","body":"Unrelated to your issue, but you&#39;ve got an &quot;application/json&quot; header but the content &quot;Hello world&quot; is not valid JSON."},{"owner":{"account_id":2481417,"reputation":444,"user_id":2160821,"display_name":"Paul S"},"score":1,"creation_date":1686215462,"post_id":76429546,"comment_id":134769578,"body_markdown":"I just noticed and fixed that, but that was indeed not the issue","body":"I just noticed and fixed that, but that was indeed not the issue"},{"owner":{"account_id":555095,"reputation":1782,"user_id":1262187,"accept_rate":18,"display_name":"simar"},"score":0,"creation_date":1686219347,"post_id":76429546,"comment_id":134770319,"body_markdown":"Are sure you use correct port in browser ? I don&#39;t see port config in code sample. Expected http://localhost:8080/file. Also change log level to debug to see details when WireMock started, of errors presence in there.","body":"Are sure you use correct port in browser ? I don&#39;t see port config in code sample. Expected <a href=\"http://localhost:8080/file\" rel=\"nofollow noreferrer\">localhost:8080/file</a>. Also change log level to debug to see details when WireMock started, of errors presence in there."},{"owner":{"account_id":2481417,"reputation":444,"user_id":2160821,"display_name":"Paul S"},"score":0,"creation_date":1686219987,"post_id":76429546,"comment_id":134770451,"body_markdown":"scroll a bit to the right ;) It was running on 6001 in my example, but I tried different ports as well. There were no errors in the log either, as the server was running just fine but the debug mode made it unaccessible. See my answer below","body":"scroll a bit to the right ;) It was running on 6001 in my example, but I tried different ports as well. There were no errors in the log either, as the server was running just fine but the debug mode made it unaccessible. See my answer below"},{"owner":{"account_id":555095,"reputation":1782,"user_id":1262187,"accept_rate":18,"display_name":"simar"},"score":0,"creation_date":1686220376,"post_id":76429546,"comment_id":134770518,"body_markdown":"Another thing confuses me, that if you run server in debug mode, execution is stopped in current thread in which test is executed and i am not sure if server is using own allocated thread pool. You should use actual junit5 extension which will initialize WireMock before execution of test method. This will ensure that server is up and running when test method is called.","body":"Another thing confuses me, that if you run server in debug mode, execution is stopped in current thread in which test is executed and i am not sure if server is using own allocated thread pool. You should use actual junit5 extension which will initialize WireMock before execution of test method. This will ensure that server is up and running when test method is called."},{"owner":{"account_id":555095,"reputation":1782,"user_id":1262187,"accept_rate":18,"display_name":"simar"},"score":0,"creation_date":1686220571,"post_id":76429546,"comment_id":134770546,"body_markdown":"I advice you to use extension which will ensure initializing server before test method is invoked.","body":"I advice you to use extension which will ensure initializing server before test method is invoked."}],"answers":[{"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":1,"creation_date":1686225902,"post_id":76430886,"comment_id":134771595,"body_markdown":"That&#39;s not surprising. WireMockServer.start() starts running in a separate thread, which is suspended by the debugger while you&#39;re at the breakpoint. While the WireMockServer thread is suspended, it can&#39;t serve your HTTP requests.","body":"That&#39;s not surprising. WireMockServer.start() starts running in a separate thread, which is suspended by the debugger while you&#39;re at the breakpoint. While the WireMockServer thread is suspended, it can&#39;t serve your HTTP requests."},{"owner":{"account_id":2481417,"reputation":444,"user_id":2160821,"display_name":"Paul S"},"score":0,"creation_date":1686228241,"post_id":76430886,"comment_id":134772151,"body_markdown":"Thanks for the help, that was indeed the issue. I updated the answer to work around that as well.","body":"Thanks for the help, that was indeed the issue. I updated the answer to work around that as well."}],"tags":[],"owner":{"account_id":2481417,"reputation":444,"user_id":2160821,"display_name":"Paul S"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686228164,"creation_date":1686219809,"answer_id":76430886,"question_id":76429546,"body_markdown":"After some further investigation, it turns out the debug mode seems to be the problem. When I replace my breakpoint with an indefinite Thread.sleep(), I was able to access the Wiremock server just fine.\r\n\r\nI got the idea from an issue reported to WireMock.Net, a C# project that mimics the Java version WireMock:\r\nhttps://github.com/WireMock-Net/WireMock.Net/issues/510\r\n\r\nAs k314159 pointed out in the comments, the debugger suspends ALL threads of the test, including the one started by WireMock. To avoid this (in IntelliJ at least) you can edit the breakpoint by right-clicking it, and stating that only the current Thread should be suspended.[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jdMfu.png","title":"Wiremock refused to connect while debugging","body":"<p>After some further investigation, it turns out the debug mode seems to be the problem. When I replace my breakpoint with an indefinite Thread.sleep(), I was able to access the Wiremock server just fine.</p>\n<p>I got the idea from an issue reported to WireMock.Net, a C# project that mimics the Java version WireMock:\n<a href=\"https://github.com/WireMock-Net/WireMock.Net/issues/510\" rel=\"nofollow noreferrer\">https://github.com/WireMock-Net/WireMock.Net/issues/510</a></p>\n<p>As k314159 pointed out in the comments, the debugger suspends ALL threads of the test, including the one started by WireMock. To avoid this (in IntelliJ at least) you can edit the breakpoint by right-clicking it, and stating that only the current Thread should be suspended.<a href=\"https://i.stack.imgur.com/jdMfu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jdMfu.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":2481417,"reputation":444,"user_id":2160821,"display_name":"Paul S"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":393,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76430886,"answer_count":1,"score":0,"last_activity_date":1686228164,"creation_date":1686209329,"question_id":76429546,"body_markdown":"I have a problem with connecting to my wiremock server that is started from a test. When I put a breakpoint after the wiremock server is started, and I use my browser to go to the specified url, it states: localhost refused to connect.\r\nI have downgraded the test to the most basic version.\r\n\r\n    import static com.github.tomakehurst.wiremock.client.WireMock.aResponse;\r\n    import static com.github.tomakehurst.wiremock.client.WireMock.get;\r\n    import static com.github.tomakehurst.wiremock.client.WireMock.urlEqualTo;\r\n    import static com.github.tomakehurst.wiremock.core.WireMockConfiguration.options;\r\n    import com.github.tomakehurst.wiremock.WireMockServer;\r\n    import org.junit.jupiter.api.Test;\r\n\r\n    public class MyTest {\r\n\r\n    @Test\r\n    public void test() {\r\n        WireMockServer server = new WireMockServer(options().bindAddress(&quot;127.0.0.1&quot;).port(6001));\r\n        server.stubFor(get(urlEqualTo(&quot;/file&quot;))\r\n                .willReturn(aResponse()\r\n                        .withStatus(200)\r\n                        .withHeader(&quot;Content-Type&quot;, &quot;text/plain&quot;)\r\n                        .withBody(&quot;Hello world&quot;)));\r\n        server.start();\r\n        assertTrue(server.isRunning());\r\n        System.out.println(&quot;I put a breakpoint on this line&quot;);\r\n    }\r\n    }\r\n\r\nI have tried different options with @WireMockTest as well (and tried about every tutorial I could find), with the same result.\r\nWhen I inspect the WireMockServer object in debug mode, it shows: ```server.httpServer.jettyServer = Server@429064e8{STARTED}[9.4.49.v20220914]```\r\n\r\nSo at least it looks like the server is started. Any ideas?\r\n\r\nBtw: When I run wiremock standalone on the same port, it can be accessed just fine.","title":"Wiremock refused to connect while debugging","body":"<p>I have a problem with connecting to my wiremock server that is started from a test. When I put a breakpoint after the wiremock server is started, and I use my browser to go to the specified url, it states: localhost refused to connect.\nI have downgraded the test to the most basic version.</p>\n<pre><code>import static com.github.tomakehurst.wiremock.client.WireMock.aResponse;\nimport static com.github.tomakehurst.wiremock.client.WireMock.get;\nimport static com.github.tomakehurst.wiremock.client.WireMock.urlEqualTo;\nimport static com.github.tomakehurst.wiremock.core.WireMockConfiguration.options;\nimport com.github.tomakehurst.wiremock.WireMockServer;\nimport org.junit.jupiter.api.Test;\n\npublic class MyTest {\n\n@Test\npublic void test() {\n    WireMockServer server = new WireMockServer(options().bindAddress(&quot;127.0.0.1&quot;).port(6001));\n    server.stubFor(get(urlEqualTo(&quot;/file&quot;))\n            .willReturn(aResponse()\n                    .withStatus(200)\n                    .withHeader(&quot;Content-Type&quot;, &quot;text/plain&quot;)\n                    .withBody(&quot;Hello world&quot;)));\n    server.start();\n    assertTrue(server.isRunning());\n    System.out.println(&quot;I put a breakpoint on this line&quot;);\n}\n}\n</code></pre>\n<p>I have tried different options with @WireMockTest as well (and tried about every tutorial I could find), with the same result.\nWhen I inspect the WireMockServer object in debug mode, it shows: <code>server.httpServer.jettyServer = Server@429064e8{STARTED}[9.4.49.v20220914]</code></p>\n<p>So at least it looks like the server is started. Any ideas?</p>\n<p>Btw: When I run wiremock standalone on the same port, it can be accessed just fine.</p>\n"},{"tags":["java","spring","security","spring-security","spring-boot"],"comments":[{"owner":{"account_id":1432415,"reputation":10687,"user_id":1354537,"accept_rate":83,"display_name":"Marged"},"score":0,"creation_date":1435846253,"post_id":31186826,"comment_id":50379131,"body_markdown":"What does not work ? Is the browsers not trying to authenticate you ? Does it ignore the credentials you provide ? By the way: you should also post where you map your user to the admin group, perhaps this is the problematic area.","body":"What does not work ? Is the browsers not trying to authenticate you ? Does it ignore the credentials you provide ? By the way: you should also post where you map your user to the admin group, perhaps this is the problematic area."},{"owner":{"account_id":4474454,"reputation":579,"user_id":3639896,"accept_rate":75,"display_name":"silverhawk"},"score":2,"creation_date":1435846431,"post_id":31186826,"comment_id":50379272,"body_markdown":"The authentication working correctly, but any user with any role have access to &quot;/api/groups&quot;","body":"The authentication working correctly, but any user with any role have access to &quot;/api/groups&quot;"},{"owner":{"account_id":1637644,"reputation":5167,"user_id":1510701,"accept_rate":60,"display_name":"We are Borg"},"score":1,"creation_date":1435846609,"post_id":31186826,"comment_id":50379396,"body_markdown":"Where are you setting the ROLE &#39;ADMIN&#39;, can you show me that??","body":"Where are you setting the ROLE &#39;ADMIN&#39;, can you show me that??"},{"owner":{"account_id":4474454,"reputation":579,"user_id":3639896,"accept_rate":75,"display_name":"silverhawk"},"score":0,"creation_date":1435846653,"post_id":31186826,"comment_id":50379429,"body_markdown":"Despite the fact that role is defined correctly: `org.springframework.security.authentication.UsernamePasswordAuthenticationToken: Principal: SecurityUser; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ADMIN`","body":"Despite the fact that role is defined correctly: <code>org.springframework.security.authentication.UsernamePassword&zwnj;&#8203;AuthenticationToken: Principal: SecurityUser; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ADMIN</code>"},{"owner":{"account_id":241356,"reputation":565,"user_id":512116,"accept_rate":56,"display_name":"pls"},"score":2,"creation_date":1530532413,"post_id":31186826,"comment_id":89255269,"body_markdown":"here you see that authority was actually `ADMIN` and not `ROLE_ADMIN`. Because RoleVoter checks authorities with starting with `ROLE_` it can&#39;t find your authority (which is `ADMIN`) and thus abstains","body":"here you see that authority was actually <code>ADMIN</code> and not <code>ROLE_ADMIN</code>. Because RoleVoter checks authorities with starting with <code>ROLE_</code> it can&#39;t find your authority (which is <code>ADMIN</code>) and thus abstains"}],"answers":[{"comments":[{"owner":{"account_id":1860365,"reputation":3145,"user_id":1685051,"display_name":"Mudassar"},"score":0,"creation_date":1435847852,"post_id":31187395,"comment_id":50380337,"body_markdown":"made the edit for specifically securedEnabled = true","body":"made the edit for specifically securedEnabled = true"},{"owner":{"account_id":4474454,"reputation":579,"user_id":3639896,"accept_rate":75,"display_name":"silverhawk"},"score":0,"creation_date":1435850716,"post_id":31187395,"comment_id":50382350,"body_markdown":"i am try this, but this does not work correctly, ie spring response &quot;Access denied&quot;","body":"i am try this, but this does not work correctly, ie spring response &quot;Access denied&quot;"},{"owner":{"account_id":1860365,"reputation":3145,"user_id":1685051,"display_name":"Mudassar"},"score":0,"creation_date":1435851453,"post_id":31187395,"comment_id":50382878,"body_markdown":"Let&#39;s do some analysis, any surviving reason of adding  @RequestMapping below Secured(&quot;ADMIN&quot;)","body":"Let&#39;s do some analysis, any surviving reason of adding  @RequestMapping below Secured(&quot;ADMIN&quot;)"},{"owner":{"account_id":1860365,"reputation":3145,"user_id":1685051,"display_name":"Mudassar"},"score":0,"creation_date":1435856057,"post_id":31187395,"comment_id":50385780,"body_markdown":"Any progress? Did you try removing that @RequestMapping below @Secured(&quot;ADMIN&quot;)","body":"Any progress? Did you try removing that @RequestMapping below @Secured(&quot;ADMIN&quot;)"},{"owner":{"account_id":1860365,"reputation":3145,"user_id":1685051,"display_name":"Mudassar"},"score":0,"creation_date":1435934129,"post_id":31187395,"comment_id":50420308,"body_markdown":"Kindly let  me know if you made any progress or if the solution is fixed with the help of the proposed solution then kindly close the question by accepting the answer","body":"Kindly let  me know if you made any progress or if the solution is fixed with the help of the proposed solution then kindly close the question by accepting the answer"},{"owner":{"account_id":4474454,"reputation":579,"user_id":3639896,"accept_rate":75,"display_name":"silverhawk"},"score":0,"creation_date":1436171934,"post_id":31187395,"comment_id":50480200,"body_markdown":"i can&#39;t remove `@RequestMapping`, because this method must be  mapped by url","body":"i can&#39;t remove <code>@RequestMapping</code>, because this method must be  mapped by url"},{"owner":{"account_id":1860365,"reputation":3145,"user_id":1685051,"display_name":"Mudassar"},"score":0,"creation_date":1436172226,"post_id":31187395,"comment_id":50480358,"body_markdown":"But did you try to remove the @RequestMapping and see what happens, we are doing this to analyse the problem cause","body":"But did you try to remove the @RequestMapping and see what happens, we are doing this to analyse the problem cause"},{"owner":{"account_id":4474454,"reputation":579,"user_id":3639896,"accept_rate":75,"display_name":"silverhawk"},"score":0,"creation_date":1436173950,"post_id":31187395,"comment_id":50481434,"body_markdown":"1) if i remove `@RequestMapping` the spring response: &quot;status&quot;:405,&quot;error&quot;:&quot;Method Not Allowed&quot;.\n2) the user got role &quot;ADMIN&quot; and what value in annotation @Secured must be: &quot;ADMIN&quot; or &quot;ROLE_ADMIN&quot;?","body":"1) if i remove <code>@RequestMapping</code> the spring response: &quot;status&quot;:405,&quot;error&quot;:&quot;Method Not Allowed&quot;. 2) the user got role &quot;ADMIN&quot; and what value in annotation @Secured must be: &quot;ADMIN&quot; or &quot;ROLE_ADMIN&quot;?"},{"owner":{"account_id":1860365,"reputation":3145,"user_id":1685051,"display_name":"Mudassar"},"score":0,"creation_date":1436176782,"post_id":31187395,"comment_id":50483350,"body_markdown":"Remove it from @RequestMapping from the class level and @RequestMapping(&quot;/api/groups&quot;) at the method level including Secured","body":"Remove it from @RequestMapping from the class level and @RequestMapping(&quot;/api/groups&quot;) at the method level including Secured"},{"owner":{"account_id":1246795,"reputation":421,"user_id":1208060,"accept_rate":100,"display_name":"vinicius gati"},"score":0,"creation_date":1603826173,"post_id":31187395,"comment_id":114158416,"body_markdown":"any way to bypass this on tests?","body":"any way to bypass this on tests?"}],"tags":[],"owner":{"account_id":1860365,"reputation":3145,"user_id":1685051,"display_name":"Mudassar"},"comment_count":10,"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1508386329,"creation_date":1435847470,"answer_id":31187395,"question_id":31186826,"body_markdown":"Kindly add this \r\n\r\n    @EnableGlobalMethodSecurity(securedEnabled = true)\r\n\r\nThis element is used to enable annotation-based security in your application (by setting the appropriate attributes on the element), and also to group together security pointcut declarations which will be applied across your entire application context specifically for `@Secured`.\r\nHence your code should look like this\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(securedEnabled = true)\r\n    public class AppSecurityConfiguration extends WebSecurityConfigurerAdapter{..","title":"Spring Security, Method Security annotation (@Secured ) is not working (java config)","body":"<p>Kindly add this </p>\n\n<pre><code>@EnableGlobalMethodSecurity(securedEnabled = true)\n</code></pre>\n\n<p>This element is used to enable annotation-based security in your application (by setting the appropriate attributes on the element), and also to group together security pointcut declarations which will be applied across your entire application context specifically for <code>@Secured</code>.\nHence your code should look like this</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true)\npublic class AppSecurityConfiguration extends WebSecurityConfigurerAdapter{..\n</code></pre>\n"},{"comments":[{"owner":{"account_id":542733,"reputation":2912,"user_id":911651,"accept_rate":76,"display_name":"AlexLiesenfeld"},"score":2,"creation_date":1570622250,"post_id":31187829,"comment_id":102969465,"body_markdown":"The disadvantage to just use HTTP security is that usually URLs are defined in controllers by using request related annotations (such as `@GetMapping`, `@POST`, etc.). However, URL to role mappings are being placed in a separate HTTP security configuration class. Once a URL changes in a controller, it effectively loses its current role requirements unless you change the URL in your security configuration as well. If methods are annotated, they cannot accidently lose role information.","body":"The disadvantage to just use HTTP security is that usually URLs are defined in controllers by using request related annotations (such as <code>@GetMapping</code>, <code>@POST</code>, etc.). However, URL to role mappings are being placed in a separate HTTP security configuration class. Once a URL changes in a controller, it effectively loses its current role requirements unless you change the URL in your security configuration as well. If methods are annotated, they cannot accidently lose role information."}],"tags":[],"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1435848587,"creation_date":1435848587,"answer_id":31187829,"question_id":31186826,"body_markdown":"There may be many reasons for which method security on a controller does not work.\r\n\r\nFirst because it is never cited as example in Spring Security manual ... joking but it may be tricky to take Spring tools where they do not want to go.\r\n\r\nMore seriously, you should enable method security as already said by @Mudassar. The manual says :\r\n\r\n*We can enable annotation-based security using the `@EnableGlobalMethodSecurity` annotation on any `@Configuration` instance. For example, the following would enable Spring Security’s `@Secured` annotation.*\r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(securedEnabled = true)\r\n    public class MethodSecurityConfig {\r\n       // ...\r\n    }\r\n\r\nNote that Mudassar&#39;s answer is correct till here.\r\n\r\nBut method security is based on AOP, which by default uses JDK proxying on **interfaces**. That&#39;s the reason why all examples applies method security on the service layer, because the service classes are normally injected in controllers as interfaces.\r\n\r\nYou can of course use it on controller layer, but :\r\n\r\n- either all your controllers implement interfaces for you all `@Secured` annotated methods\r\n- or you must switch to class proxying\r\n\r\nThe rule that I try to follow is :\r\n\r\n- if I want to secure an URL, I stick to HTTPSecurity\r\n- if I need to allow finer grained access, I add security at service layer","title":"Spring Security, Method Security annotation (@Secured ) is not working (java config)","body":"<p>There may be many reasons for which method security on a controller does not work.</p>\n\n<p>First because it is never cited as example in Spring Security manual ... joking but it may be tricky to take Spring tools where they do not want to go.</p>\n\n<p>More seriously, you should enable method security as already said by @Mudassar. The manual says :</p>\n\n<p><em>We can enable annotation-based security using the <code>@EnableGlobalMethodSecurity</code> annotation on any <code>@Configuration</code> instance. For example, the following would enable Spring Security’s <code>@Secured</code> annotation.</em></p>\n\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(securedEnabled = true)\npublic class MethodSecurityConfig {\n   // ...\n}\n</code></pre>\n\n<p>Note that Mudassar's answer is correct till here.</p>\n\n<p>But method security is based on AOP, which by default uses JDK proxying on <strong>interfaces</strong>. That's the reason why all examples applies method security on the service layer, because the service classes are normally injected in controllers as interfaces.</p>\n\n<p>You can of course use it on controller layer, but :</p>\n\n<ul>\n<li>either all your controllers implement interfaces for you all <code>@Secured</code> annotated methods</li>\n<li>or you must switch to class proxying</li>\n</ul>\n\n<p>The rule that I try to follow is :</p>\n\n<ul>\n<li>if I want to secure an URL, I stick to HTTPSecurity</li>\n<li>if I need to allow finer grained access, I add security at service layer</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":4086251,"reputation":924,"user_id":3355465,"display_name":"RZet"},"score":2,"creation_date":1569952105,"post_id":31265033,"comment_id":102759400,"body_markdown":"@Secured(&quot;ROLE_ADMIN&quot;) should equally work with the `securedEnabled=true` flag set in `@EnableGlobalMethodSecurity` annotation as per the answer by @user1210708.","body":"@Secured(&quot;ROLE_ADMIN&quot;) should equally work with the <code>securedEnabled=true</code> flag set in <code>@EnableGlobalMethodSecurity</code> annotation as per the answer by @user1210708."},{"owner":{"account_id":234929,"reputation":909,"user_id":501399,"accept_rate":83,"display_name":"vadipp"},"score":0,"creation_date":1642048915,"post_id":31265033,"comment_id":124970225,"body_markdown":"`securedEnabled=true` didn&#39;t work for me: Spring granted access to the controller regardless of the user roles. Instead I used `prePostEnabled = true` and replaced `@Secured` with `@PreAuthorize` and it worked. Magic!","body":"<code>securedEnabled=true</code> didn&#39;t work for me: Spring granted access to the controller regardless of the user roles. Instead I used <code>prePostEnabled = true</code> and replaced <code>@Secured</code> with <code>@PreAuthorize</code> and it worked. Magic!"},{"owner":{"account_id":4020136,"reputation":98,"user_id":3310797,"display_name":"robertant"},"score":0,"creation_date":1665702234,"post_id":31265033,"comment_id":130766809,"body_markdown":"@vadipp make sure you also add the `ROLE_` preffix when setting the authorities. for example: `new SimpleGrantedAuthority(&quot;ROLE_&quot; + role.getName())`.  that worked for me.","body":"@vadipp make sure you also add the <code>ROLE_</code> preffix when setting the authorities. for example: <code>new SimpleGrantedAuthority(&quot;ROLE_&quot; + role.getName())</code>.  that worked for me."}],"tags":[],"owner":{"account_id":4474454,"reputation":579,"user_id":3639896,"accept_rate":75,"display_name":"silverhawk"},"comment_count":3,"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1436262034,"creation_date":1436262034,"answer_id":31265033,"question_id":31186826,"body_markdown":"This issue was solved.\r\n\r\nI add `@EnableGlobalMethodSecurity(prePostEnabled = true)`\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class AppSecurityConfiguration extends WebSecurityConfigurerAdapter{\r\n    }\r\nAnd in controller i changed `@Secured(&quot;ADMIN&quot;)` to `@PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)`\r\n","title":"Spring Security, Method Security annotation (@Secured ) is not working (java config)","body":"<p>This issue was solved.</p>\n\n<p>I add <code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code></p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class AppSecurityConfiguration extends WebSecurityConfigurerAdapter{\n}\n</code></pre>\n\n<p>And in controller i changed <code>@Secured(\"ADMIN\")</code> to <code>@PreAuthorize(\"hasRole('ADMIN')\")</code></p>\n"},{"tags":[],"owner":{"account_id":163827,"reputation":1798,"user_id":386213,"accept_rate":100,"display_name":"digz6666"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462263376,"creation_date":1462263376,"answer_id":36998989,"question_id":31186826,"body_markdown":"Maybe you should register your AppSecurityConfiguration to same context as WebMvcConfig (that extends WebMvcConfigurerAdapter).\r\n\r\n    AnnotationConfigWebApplicationContext mvcContext = new AnnotationConfigWebApplicationContext();      \r\n    mvcContext.register(WebMvcConfig.class, SecurityConfig.class);","title":"Spring Security, Method Security annotation (@Secured ) is not working (java config)","body":"<p>Maybe you should register your AppSecurityConfiguration to same context as WebMvcConfig (that extends WebMvcConfigurerAdapter).</p>\n\n<pre><code>AnnotationConfigWebApplicationContext mvcContext = new AnnotationConfigWebApplicationContext();      \nmvcContext.register(WebMvcConfig.class, SecurityConfig.class);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7279659,"reputation":248,"user_id":5549834,"display_name":"Meg"},"score":0,"creation_date":1561128333,"post_id":39963063,"comment_id":99974713,"body_markdown":"In kotlin you need to have the controller class and the methods open, otherwise you get --&gt; Caused by: java.lang.IllegalArgumentException: Cannot subclass final class","body":"In kotlin you need to have the controller class and the methods open, otherwise you get --&gt; Caused by: java.lang.IllegalArgumentException: Cannot subclass final class"}],"tags":[],"owner":{"account_id":1250157,"reputation":513,"user_id":1210708,"accept_rate":43,"display_name":"user1210708"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1476118467,"creation_date":1476118138,"answer_id":39963063,"question_id":31186826,"body_markdown":"I know this thread is quite old and my answer alludes to portions of the answers by various people in this thread; but here is a list combined list of pitfalls and answers:\r\n\r\n1. When using @Secured, and the role name is (e.g.) ADMIN; this means an annotation of @Secured(&quot;ROLE_ADMIN&quot;).\r\n2. WebSecurityConfigurerAdapter must have @EnableGlobalMethodSecurity(securedEnabled = true)\r\n3. As with most Spring related proxies, make sure that the class and the secured methods are not in any way final.  For Kotlin this means &quot;open&quot; every method as well as the class.\r\n4. When the class and its methods are virtual (&quot;open&quot;), then there is no implied need for an interface.\r\n\r\n\r\nHere is part of a working Kotlin example:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;api/v1&quot;)\r\n    \r\n        open class DiagnosticsController {\r\n            @Autowired\r\n            lateinit var systemDao : SystemDao\r\n        \r\n            @RequestMapping(&quot;ping&quot;, method = arrayOf(RequestMethod.GET))\r\n            @Secured(&quot;ROLE_ADMIN&quot;)\r\n            open fun ping(request : HttpServletRequest, response: HttpServletResponse) : String { ... \r\n        }\r\n\r\nand\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(securedEnabled = true)\r\n    open class WebSecurityConfig : WebSecurityConfigurerAdapter() {\r\n\r\nRegards\r\n","title":"Spring Security, Method Security annotation (@Secured ) is not working (java config)","body":"<p>I know this thread is quite old and my answer alludes to portions of the answers by various people in this thread; but here is a list combined list of pitfalls and answers:</p>\n\n<ol>\n<li>When using @Secured, and the role name is (e.g.) ADMIN; this means an annotation of @Secured(\"ROLE_ADMIN\").</li>\n<li>WebSecurityConfigurerAdapter must have @EnableGlobalMethodSecurity(securedEnabled = true)</li>\n<li>As with most Spring related proxies, make sure that the class and the secured methods are not in any way final.  For Kotlin this means \"open\" every method as well as the class.</li>\n<li>When the class and its methods are virtual (\"open\"), then there is no implied need for an interface.</li>\n</ol>\n\n<p>Here is part of a working Kotlin example:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"api/v1\")\n\n    open class DiagnosticsController {\n        @Autowired\n        lateinit var systemDao : SystemDao\n\n        @RequestMapping(\"ping\", method = arrayOf(RequestMethod.GET))\n        @Secured(\"ROLE_ADMIN\")\n        open fun ping(request : HttpServletRequest, response: HttpServletResponse) : String { ... \n    }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true)\nopen class WebSecurityConfig : WebSecurityConfigurerAdapter() {\n</code></pre>\n\n<p>Regards</p>\n"},{"tags":[],"owner":{"account_id":8487283,"reputation":1292,"user_id":6364956,"accept_rate":86,"display_name":"Sadiq Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489125300,"creation_date":1489125300,"answer_id":42711243,"question_id":31186826,"body_markdown":"   You need to use @secured(ROLE_ADMIN) instead of @secured(ADMIN). You are required to write **&quot;ROLE_&quot;** infront of your role name. Please find the example mentioned below which is making sure only a user with Admin role can access list() method.\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/groups&quot;)\r\n    public class GroupController {\r\n    \r\n        @Autowired\r\n        private GroupService groupService;\r\n    \r\n        @Secured(&quot;ROLE_ADMIN&quot;)\r\n        @RequestMapping\r\n        public List&lt;Group&gt; list() {\r\n            return groupService.findAll();\r\n        }\r\n    \r\n    }\r\n      \r\n\r\n","title":"Spring Security, Method Security annotation (@Secured ) is not working (java config)","body":"<p>You need to use @secured(ROLE_ADMIN) instead of @secured(ADMIN). You are required to write <strong>\"ROLE_\"</strong> infront of your role name. Please find the example mentioned below which is making sure only a user with Admin role can access list() method.</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api/groups\")\npublic class GroupController {\n\n    @Autowired\n    private GroupService groupService;\n\n    @Secured(\"ROLE_ADMIN\")\n    @RequestMapping\n    public List&lt;Group&gt; list() {\n        return groupService.findAll();\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5911593,"reputation":99,"user_id":4651663,"display_name":"Nestoter"},"score":0,"creation_date":1687458737,"post_id":53329693,"comment_id":134943424,"body_markdown":"You are the man. This code works, now @Secured works without ROLE_ preffix.","body":"You are the man. This code works, now @Secured works without ROLE_ preffix."}],"tags":[],"owner":{"account_id":6970541,"reputation":171,"user_id":5347066,"display_name":"Igor"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1542408216,"creation_date":1542327654,"answer_id":53329693,"question_id":31186826,"body_markdown":"I want to share my decision, may be it will be helpful.\r\n\r\nUsed **spring mvc** + **spring security**, version `4.2.9.RELEASE`\r\n\r\nFor example, i have a Service with method annotated @Secured \r\n\r\n    @Secured(&quot;ACTION_USER_LIST_VIEW&quot;)\r\n    List&lt;User&gt; getUsersList();\r\n\r\nBut, it didn&#39;t work, because **GlobalMethodSecurityConfiguration** has inside method.\r\n\r\n    protected AccessDecisionManager accessDecisionManager()\r\nin which initialized the `new RoleVoter()` with default `rolePrefix = &quot;ROLE_&quot;;` *(this makes it impossible to use beans to set your rolePrefix)* that give to us not working annotations, because **RoleVoter** expects annotation value which starts with **&#39;ROLE_&#39;**\r\n\r\nFor resolving this problem i override **GlobalMethodSecurityConfiguration** like this\r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(securedEnabled = true)\r\n    public class AppMethodSecurityConfiguration extends GlobalMethodSecurityConfiguration {\r\n        @Override\r\n        protected AccessDecisionManager accessDecisionManager() {\r\n            List&lt;AccessDecisionVoter&lt;? extends Object&gt;&gt; decisionVoters = new ArrayList&lt;&gt;();\r\n            ExpressionBasedPreInvocationAdvice expressionAdvice = new ExpressionBasedPreInvocationAdvice();\r\n            expressionAdvice.setExpressionHandler(getExpressionHandler());\r\n            decisionVoters.add(getRoleVoter());\r\n            decisionVoters.add(new AuthenticatedVoter());\r\n            return new AffirmativeBased(decisionVoters);\r\n        }\r\n    \r\n        private RoleVoter getRoleVoter() {\r\n            RoleVoter e = new RoleVoter();\r\n            e.setRolePrefix(&quot;&quot;);\r\n            return e;\r\n        }\r\n    }","title":"Spring Security, Method Security annotation (@Secured ) is not working (java config)","body":"<p>I want to share my decision, may be it will be helpful.</p>\n\n<p>Used <strong>spring mvc</strong> + <strong>spring security</strong>, version <code>4.2.9.RELEASE</code></p>\n\n<p>For example, i have a Service with method annotated @Secured </p>\n\n<pre><code>@Secured(\"ACTION_USER_LIST_VIEW\")\nList&lt;User&gt; getUsersList();\n</code></pre>\n\n<p>But, it didn't work, because <strong>GlobalMethodSecurityConfiguration</strong> has inside method.</p>\n\n<pre><code>protected AccessDecisionManager accessDecisionManager()\n</code></pre>\n\n<p>in which initialized the <code>new RoleVoter()</code> with default <code>rolePrefix = \"ROLE_\";</code> <em>(this makes it impossible to use beans to set your rolePrefix)</em> that give to us not working annotations, because <strong>RoleVoter</strong> expects annotation value which starts with <strong>'ROLE_'</strong></p>\n\n<p>For resolving this problem i override <strong>GlobalMethodSecurityConfiguration</strong> like this</p>\n\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(securedEnabled = true)\npublic class AppMethodSecurityConfiguration extends GlobalMethodSecurityConfiguration {\n    @Override\n    protected AccessDecisionManager accessDecisionManager() {\n        List&lt;AccessDecisionVoter&lt;? extends Object&gt;&gt; decisionVoters = new ArrayList&lt;&gt;();\n        ExpressionBasedPreInvocationAdvice expressionAdvice = new ExpressionBasedPreInvocationAdvice();\n        expressionAdvice.setExpressionHandler(getExpressionHandler());\n        decisionVoters.add(getRoleVoter());\n        decisionVoters.add(new AuthenticatedVoter());\n        return new AffirmativeBased(decisionVoters);\n    }\n\n    private RoleVoter getRoleVoter() {\n        RoleVoter e = new RoleVoter();\n        e.setRolePrefix(\"\");\n        return e;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7220387,"reputation":71,"user_id":5511162,"display_name":"Hridesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686227970,"creation_date":1686227970,"answer_id":76431952,"question_id":31186826,"body_markdown":"Spend couple of hours, finally figured out. Method level security work for service layer with spring security version 5.7.8 version.\r\n\r\nI moved @PreAuthorize annotation to service class from controller class then worked for me.","title":"Spring Security, Method Security annotation (@Secured ) is not working (java config)","body":"<p>Spend couple of hours, finally figured out. Method level security work for service layer with spring security version 5.7.8 version.</p>\n<p>I moved @PreAuthorize annotation to service class from controller class then worked for me.</p>\n"}],"owner":{"account_id":4474454,"reputation":579,"user_id":3639896,"accept_rate":75,"display_name":"silverhawk"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47055,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":31265033,"answer_count":8,"score":31,"last_activity_date":1686227970,"creation_date":1435846019,"question_id":31186826,"body_markdown":"I am trying to set up a method security annotation using @Secured(&quot;ADMIN&quot;) (without any XML, only java config, Spring Boot). But access via roles does not work.\r\n\r\nSecurity Config:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class AppSecurityConfiguration extends WebSecurityConfigurerAdapter{\r\n    \r\n    .....\r\n\r\n    @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeRequests()\r\n                    .antMatchers(&quot;/api/**&quot;).fullyAuthenticated().and()\r\n                    .addFilterBefore(tokenAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n        }\r\n\r\n    .....\r\n\r\n    }\r\nI want restrict access to the method of the controller:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/groups&quot;)\r\n    public class GroupController {\r\n    \r\n        @Autowired\r\n        private GroupService groupService;\r\n    \r\n        @Secured(&quot;ADMIN&quot;)\r\n        @RequestMapping\r\n        public List&lt;Group&gt; list() {\r\n            return groupService.findAll();\r\n        }\r\n    \r\n    }\r\nRestrict access by the url is working, with:\r\n\r\n    .antMatchers(&quot;/api/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n\r\nMaybe I forgot to specify that I want restrict by roles?\r\n\r\n**UPD:**\r\nBy the rules, At what layer must be `@PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)` in Controller layer or in Service layer?","title":"Spring Security, Method Security annotation (@Secured ) is not working (java config)","body":"<p>I am trying to set up a method security annotation using @Secured(\"ADMIN\") (without any XML, only java config, Spring Boot). But access via roles does not work.</p>\n\n<p>Security Config:</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class AppSecurityConfiguration extends WebSecurityConfigurerAdapter{\n\n.....\n\n@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests()\n                .antMatchers(\"/api/**\").fullyAuthenticated().and()\n                .addFilterBefore(tokenAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n    }\n\n.....\n\n}\n</code></pre>\n\n<p>I want restrict access to the method of the controller:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api/groups\")\npublic class GroupController {\n\n    @Autowired\n    private GroupService groupService;\n\n    @Secured(\"ADMIN\")\n    @RequestMapping\n    public List&lt;Group&gt; list() {\n        return groupService.findAll();\n    }\n\n}\n</code></pre>\n\n<p>Restrict access by the url is working, with:</p>\n\n<pre><code>.antMatchers(\"/api/**\").hasAuthority(\"ADMIN\")\n</code></pre>\n\n<p>Maybe I forgot to specify that I want restrict by roles?</p>\n\n<p><strong>UPD:</strong>\nBy the rules, At what layer must be <code>@PreAuthorize(\"hasRole('ADMIN')\")</code> in Controller layer or in Service layer?</p>\n"},{"tags":["java","unit-testing","mockito","powermockito"],"comments":[{"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"score":1,"creation_date":1686227216,"post_id":76431832,"comment_id":134771916,"body_markdown":"Can you share a [mcve]?","body":"Can you share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":11345119,"reputation":23,"user_id":8317805,"display_name":"Buntom"},"score":0,"creation_date":1686227664,"post_id":76431832,"comment_id":134772031,"body_markdown":"I updated the initial question","body":"I updated the initial question"}],"owner":{"account_id":11345119,"reputation":23,"user_id":8317805,"display_name":"Buntom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686227642,"creation_date":1686227012,"question_id":76431832,"body_markdown":"I want to test method A, inside there is a call to method B, both in the same class, inside method B are calls to other methods from other classes. I want to mock method B call, but Mockito also executes the inside of method B and gives a NPE.\r\n\r\n\r\n\r\nI tried \r\n```\r\nPowerMockito.when(classA.methodB(arg1, arg2)).thenReturn(true);\r\n```\r\n\r\nBut method B is still executed. How can I overcome this?\r\n\r\nExample:\r\n\r\n```\r\n    protected boolean B(String arg1, String arg2){\r\n        String newString = arg2+arg2;\r\n        return methodFromAnotherClass(newString);\r\n    }\r\n    \r\n    protected boolean A(Integer arg1, String arg2, Double arg3){\r\n        //some code\r\n        if(B(arg2, String.valueOf(arg1))}\r\n            //some code\r\n        else \r\n            //some code\r\n    return true;\r\n    }\r\n```","title":"PowerMockito mocking a method call","body":"<p>I want to test method A, inside there is a call to method B, both in the same class, inside method B are calls to other methods from other classes. I want to mock method B call, but Mockito also executes the inside of method B and gives a NPE.</p>\n<p>I tried</p>\n<pre><code>PowerMockito.when(classA.methodB(arg1, arg2)).thenReturn(true);\n</code></pre>\n<p>But method B is still executed. How can I overcome this?</p>\n<p>Example:</p>\n<pre><code>    protected boolean B(String arg1, String arg2){\n        String newString = arg2+arg2;\n        return methodFromAnotherClass(newString);\n    }\n    \n    protected boolean A(Integer arg1, String arg2, Double arg3){\n        //some code\n        if(B(arg2, String.valueOf(arg1))}\n            //some code\n        else \n            //some code\n    return true;\n    }\n</code></pre>\n"},{"tags":["java","macos","sbt","apple-m1","testcontainers"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1685712074,"post_id":76388869,"comment_id":134703416,"body_markdown":"How you installed docker? which version? version of the JDK? how you installed the JDK? [homebrew](https://brew.sh/)? [sdkman](https://sdkman.io/)? If you check the docs of testcontainer, the section [Junit 5 Quickstart](https://www.testcontainers.org/quickstart/junit_5_quickstart/) assuming you are using that framework test, you also need the junit dependency from testcontainers. Could you edit your post and if it is possible provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"How you installed docker? which version? version of the JDK? how you installed the JDK? <a href=\"https://brew.sh/\" rel=\"nofollow noreferrer\">homebrew</a>? <a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">sdkman</a>? If you check the docs of testcontainer, the section <a href=\"https://www.testcontainers.org/quickstart/junit_5_quickstart/\" rel=\"nofollow noreferrer\">Junit 5 Quickstart</a> assuming you are using that framework test, you also need the junit dependency from testcontainers. Could you edit your post and if it is possible provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"score":0,"creation_date":1685713957,"post_id":76388869,"comment_id":134703897,"body_markdown":"@Gast&#243;nSchabas thanks for your reply. I added the details. Yes sdkman, Java 11 (Zulu). I am using junit4, which shouldn&#39;t need anything in addition. (This works fine on non-m1 platforms, so if there was a missing dependency it would have failed earlier). I will see if I can somehow generate another minimal reproducable example.","body":"@Gast&#243;nSchabas thanks for your reply. I added the details. Yes sdkman, Java 11 (Zulu). I am using junit4, which shouldn&#39;t need anything in addition. (This works fine on non-m1 platforms, so if there was a missing dependency it would have failed earlier). I will see if I can somehow generate another minimal reproducable example."},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1685717532,"post_id":76388869,"comment_id":134704712,"body_markdown":"As you said, looks like an issue related with **JNA** version and **Mac M1**. Here there is an [issue](https://github.com/testcontainers/testcontainers-java/issues/6775) about someone saying that `JNA 5.12.1` didn&#39;t work. You have also [issue 3834](https://github.com/testcontainers/testcontainers-java/issues/3834#issuecomment-788995236) and [issue 3810](https://github.com/testcontainers/testcontainers-java/issues/3810#issuecomment-849512152) where `JNA 5.7.0` worked on Mac M1. Hope that helps","body":"As you said, looks like an issue related with <b>JNA</b> version and <b>Mac M1</b>. Here there is an <a href=\"https://github.com/testcontainers/testcontainers-java/issues/6775\" rel=\"nofollow noreferrer\">issue</a> about someone saying that <code>JNA 5.12.1</code> didn&#39;t work. You have also <a href=\"https://github.com/testcontainers/testcontainers-java/issues/3834#issuecomment-788995236\" rel=\"nofollow noreferrer\">issue 3834</a> and <a href=\"https://github.com/testcontainers/testcontainers-java/issues/3810#issuecomment-849512152\" rel=\"nofollow noreferrer\">issue 3810</a> where <code>JNA 5.7.0</code> worked on Mac M1. Hope that helps"},{"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"score":0,"creation_date":1685960159,"post_id":76388869,"comment_id":134728695,"body_markdown":"@Gast&#243;nSchabas of course I looked around these issues before I asked here. The first issue is saying that JNA 5.12.1 should work (not didn&#39;t work). Issue 3834 is indicating that an older JNA version was pulled by elasticsearch. I used `sbt test:dependencyTree` to check this is not happening. I have other projects using testcontainers 1.16.0 and they work fine. I can&#39;t figure out what&#39;s wrong with this project. I tried to regenerate it with a minimal reproducable example but it works fine. I am trying to figure out what else I could check.","body":"@Gast&#243;nSchabas of course I looked around these issues before I asked here. The first issue is saying that JNA 5.12.1 should work (not didn&#39;t work). Issue 3834 is indicating that an older JNA version was pulled by elasticsearch. I used <code>sbt test:dependencyTree</code> to check this is not happening. I have other projects using testcontainers 1.16.0 and they work fine. I can&#39;t figure out what&#39;s wrong with this project. I tried to regenerate it with a minimal reproducable example but it works fine. I am trying to figure out what else I could check."},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1685978538,"post_id":76388869,"comment_id":134733007,"body_markdown":"I can&#39;t find any comment saying that `JNA 5.12.x` worked. Only [5.7.0](https://github.com/testcontainers/testcontainers-java/issues/3834#issuecomment-997496840), [5.8.0](https://github.com/testcontainers/testcontainers-java/issues/3834#issuecomment-1255224001) and [5.10.x](https://github.com/testcontainers/testcontainers-java/issues/3834#issuecomment-1182636995). There is also a comment about [using mariadb instead of mysql](https://github.com/testcontainers/testcontainers-java/issues/3834#issuecomment-796754296).","body":"I can&#39;t find any comment saying that <code>JNA 5.12.x</code> worked. Only <a href=\"https://github.com/testcontainers/testcontainers-java/issues/3834#issuecomment-997496840\" rel=\"nofollow noreferrer\">5.7.0</a>, <a href=\"https://github.com/testcontainers/testcontainers-java/issues/3834#issuecomment-1255224001\" rel=\"nofollow noreferrer\">5.8.0</a> and <a href=\"https://github.com/testcontainers/testcontainers-java/issues/3834#issuecomment-1182636995\" rel=\"nofollow noreferrer\">5.10.x</a>. There is also a comment about <a href=\"https://github.com/testcontainers/testcontainers-java/issues/3834#issuecomment-796754296\" rel=\"nofollow noreferrer\">using mariadb instead of mysql</a>."},{"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"score":0,"creation_date":1685997998,"post_id":76388869,"comment_id":134736517,"body_markdown":"@Gast&#243;nSchabas well the last comment on that issue was &#39;Can you please try using net.java.dev.jna:jna:5.12.1?&#39; not that it didn&#39;t work. I am starting to suspect that maybe some dependency is including the old JNA classes directly rather than as a separate dependency, which is why I cant see it with dependencyTree. I did try a separate project with testcontainers and mysql and it worked, which is why i am starting to suspect this. Not sure how I can find out easily.","body":"@Gast&#243;nSchabas well the last comment on that issue was &#39;Can you please try using net.java.dev.jna:jna:5.12.1?&#39; not that it didn&#39;t work. I am starting to suspect that maybe some dependency is including the old JNA classes directly rather than as a separate dependency, which is why I cant see it with dependencyTree. I did try a separate project with testcontainers and mysql and it worked, which is why i am starting to suspect this. Not sure how I can find out easily."}],"answers":[{"tags":[],"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686227045,"creation_date":1686227045,"answer_id":76431835,"question_id":76388869,"body_markdown":"For those who encounter the same issue, my problem was that although I was explicitly excluding JNA dependencies from older libraries that had not yet been updated, and made sure that only the latest version of JNA was included, there might still be libraries that have the same classes directly in the JAR file in [&quot;shaded&quot; mode][1]. \r\n\r\nIn my case, the culprit was `io.kamon:kamon-bundle`. \r\n\r\nAlthough shading is by and large considered bad practice, some major libraries still do it, causing these library conflicts, without an easy way to resolve. \r\n\r\nIf you encounter this problem, and updating to the latest `testcontainers` or JNA explicitly doesn&#39;t solve it, and excluding it from other JAR files still fails, you can either use a good IDE like IntelliJ to figure out which JAR files are providing the same class, or otherwise use the `-verbose:class` JVM switch to figure out from where each class is being loaded via the command line. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/49810578/what-is-a-shaded-jar-and-what-is-the-difference-similarities-between-uber-jar-a","title":"testcontainers fails with UnsatisfiedLink error even with JNA 5.12.1 on Mac M1","body":"<p>For those who encounter the same issue, my problem was that although I was explicitly excluding JNA dependencies from older libraries that had not yet been updated, and made sure that only the latest version of JNA was included, there might still be libraries that have the same classes directly in the JAR file in <a href=\"https://stackoverflow.com/questions/49810578/what-is-a-shaded-jar-and-what-is-the-difference-similarities-between-uber-jar-a\">&quot;shaded&quot; mode</a>.</p>\n<p>In my case, the culprit was <code>io.kamon:kamon-bundle</code>.</p>\n<p>Although shading is by and large considered bad practice, some major libraries still do it, causing these library conflicts, without an easy way to resolve.</p>\n<p>If you encounter this problem, and updating to the latest <code>testcontainers</code> or JNA explicitly doesn't solve it, and excluding it from other JAR files still fails, you can either use a good IDE like IntelliJ to figure out which JAR files are providing the same class, or otherwise use the <code>-verbose:class</code> JVM switch to figure out from where each class is being loaded via the command line.</p>\n"}],"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":567,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76431835,"answer_count":1,"score":0,"last_activity_date":1686227045,"creation_date":1685698014,"question_id":76388869,"body_markdown":"I have an sbt-based project that I am trying to build on my Mac M1, and its tests (JUnit 4) based on testcontainers are failing with the error below. Most solutions I found online suggested that the JNA version could be old (pre-5.6.0), so I upgraded test containers to the latest version, which includes an (almost) latest version of JNA 5.12.1: \r\n\r\n```\r\n      &quot;junit&quot; % &quot;junit&quot; % &quot;4.12&quot; % Test,\r\n      &quot;org.testcontainers&quot; % &quot;testcontainers&quot; % &quot;1.18.1&quot; % Test,\r\n      &quot;org.testcontainers&quot; % &quot;mysql&quot; % &quot;1.18.1&quot; % Test\r\n```\r\n\r\nI did `sbt dependencyTree` and `sbt test:dependencyTree` to make sure the old JNA is not included from somewhere else, and the only version included is 5.12.1. \r\n\r\nI even replaced the JNA version in my `.sbt` folder to make sure it isn&#39;t somehow being picked up from there. \r\n\r\nI am running Java 11 (through sdkman!)\r\n```\r\nopenjdk 11.0.18 2023-01-17 LTS\r\nOpenJDK Runtime Environment Zulu11.62+17-CA (build 11.0.18+10-LTS)\r\nOpenJDK 64-Bit Server VM Zulu11.62+17-CA (build 11.0.18+10-LTS, mixed mode)\r\n```\r\n\r\nAt this point I am a bit at a loss what else to try. Existent solutions don&#39;t seem to work. What could be the reason I am still getting this error, even after updating to the latest `testcontainers` and `jna` libraries?\r\n\r\nIs there any workaround I could do to avoid this (maybe not use UnixSockets at all to communicate with Docker)? \r\n\r\n\r\n```\r\n[error] Test com.redacted.my.Test failed: java.lang.UnsatisfiedLinkError: Can&#39;t load library: /Users/myself/Library/Caches/JNA/temp/jna13305103600218314813.tmp, took 0.0 sec\r\n[error]     at java.lang.ClassLoader.loadLibrary(ClassLoader.java:2633)\r\n[error]     at java.lang.Runtime.load0(Runtime.java:768)\r\n[error]     at java.lang.System.load(System.java:1837)\r\n[error]     at com.sun.jna.Native.loadNativeDispatchLibraryFromClasspath(Native.java:1018)\r\n[error]     at com.sun.jna.Native.loadNativeDispatchLibrary(Native.java:988)\r\n[error]     at com.sun.jna.Native.&lt;clinit&gt;(Native.java:195)\r\n[error]     at com.github.dockerjava.transport.DomainSocket.&lt;clinit&gt;(DomainSocket.java:54)\r\n[error]     at com.github.dockerjava.transport.UnixSocket.get(UnixSocket.java:29)\r\n[error]     at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$test$2(DockerClientProviderStrategy.java:175)\r\n[error]     at org.testcontainers.dockerclient.DockerClientProviderStrategy.test(DockerClientProviderStrategy.java:189)\r\n[error]     at org.testcontainers.dockerclient.DockerClientProviderStrategy.tryOutStrategy(DockerClientProviderStrategy.java:266)\r\n[error]     at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$5(DockerClientProviderStrategy.java:245)\r\n[error]     at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:176)\r\n[error]     at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\n[error]     at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\n[error]     at java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1632)\r\n[error]     at java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\r\n[error]     at java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\r\n[error]     at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\r\n[error]     at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n[error]     at java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n[error]     at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n[error]     at java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\r\n[error]     at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:246)\r\n[error]     at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:150)\r\n[error]     at org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:186)\r\n[error]     at org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:104)\r\n[error]     at com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:109)\r\n[error]     at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:321)\r\n...\r\n```","title":"testcontainers fails with UnsatisfiedLink error even with JNA 5.12.1 on Mac M1","body":"<p>I have an sbt-based project that I am trying to build on my Mac M1, and its tests (JUnit 4) based on testcontainers are failing with the error below. Most solutions I found online suggested that the JNA version could be old (pre-5.6.0), so I upgraded test containers to the latest version, which includes an (almost) latest version of JNA 5.12.1:</p>\n<pre><code>      &quot;junit&quot; % &quot;junit&quot; % &quot;4.12&quot; % Test,\n      &quot;org.testcontainers&quot; % &quot;testcontainers&quot; % &quot;1.18.1&quot; % Test,\n      &quot;org.testcontainers&quot; % &quot;mysql&quot; % &quot;1.18.1&quot; % Test\n</code></pre>\n<p>I did <code>sbt dependencyTree</code> and <code>sbt test:dependencyTree</code> to make sure the old JNA is not included from somewhere else, and the only version included is 5.12.1.</p>\n<p>I even replaced the JNA version in my <code>.sbt</code> folder to make sure it isn't somehow being picked up from there.</p>\n<p>I am running Java 11 (through sdkman!)</p>\n<pre><code>openjdk 11.0.18 2023-01-17 LTS\nOpenJDK Runtime Environment Zulu11.62+17-CA (build 11.0.18+10-LTS)\nOpenJDK 64-Bit Server VM Zulu11.62+17-CA (build 11.0.18+10-LTS, mixed mode)\n</code></pre>\n<p>At this point I am a bit at a loss what else to try. Existent solutions don't seem to work. What could be the reason I am still getting this error, even after updating to the latest <code>testcontainers</code> and <code>jna</code> libraries?</p>\n<p>Is there any workaround I could do to avoid this (maybe not use UnixSockets at all to communicate with Docker)?</p>\n<pre><code>[error] Test com.redacted.my.Test failed: java.lang.UnsatisfiedLinkError: Can't load library: /Users/myself/Library/Caches/JNA/temp/jna13305103600218314813.tmp, took 0.0 sec\n[error]     at java.lang.ClassLoader.loadLibrary(ClassLoader.java:2633)\n[error]     at java.lang.Runtime.load0(Runtime.java:768)\n[error]     at java.lang.System.load(System.java:1837)\n[error]     at com.sun.jna.Native.loadNativeDispatchLibraryFromClasspath(Native.java:1018)\n[error]     at com.sun.jna.Native.loadNativeDispatchLibrary(Native.java:988)\n[error]     at com.sun.jna.Native.&lt;clinit&gt;(Native.java:195)\n[error]     at com.github.dockerjava.transport.DomainSocket.&lt;clinit&gt;(DomainSocket.java:54)\n[error]     at com.github.dockerjava.transport.UnixSocket.get(UnixSocket.java:29)\n[error]     at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$test$2(DockerClientProviderStrategy.java:175)\n[error]     at org.testcontainers.dockerclient.DockerClientProviderStrategy.test(DockerClientProviderStrategy.java:189)\n[error]     at org.testcontainers.dockerclient.DockerClientProviderStrategy.tryOutStrategy(DockerClientProviderStrategy.java:266)\n[error]     at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$5(DockerClientProviderStrategy.java:245)\n[error]     at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:176)\n[error]     at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n[error]     at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n[error]     at java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1632)\n[error]     at java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\n[error]     at java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\n[error]     at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\n[error]     at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n[error]     at java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\n[error]     at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n[error]     at java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\n[error]     at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:246)\n[error]     at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:150)\n[error]     at org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:186)\n[error]     at org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:104)\n[error]     at com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:109)\n[error]     at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:321)\n...\n</code></pre>\n"},{"tags":["java","amazon-s3","spring-webflux","zipoutputstream"],"owner":{"account_id":14287770,"reputation":79,"user_id":10320673,"display_name":"Bapt_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686226951,"creation_date":1686226951,"question_id":76431822,"body_markdown":"In my application (Spring MVC) I have a legacy endpoint returning a `ResponseEntity&lt;StreamingResponseBody&gt;`. The `StreamingResponseBody` is basically a `ZipOutputStream` built by fetching a list of documents in a S3 storage.\r\n\r\nOmitting some parts, the code is as below:\r\n\r\n```java\r\n@GetMapping(value = &quot;/zip&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\r\nResponseEntity&lt;StreamingResponseBody&gt; downloadZip() {\r\n\tList&lt;String&gt; keys = getMyKeys();\r\n\r\n\tStreamingResponseBody streamRespBody = outputStream -&gt; {\r\n\t\ttry {\r\n            // In getZipOutputStream() each document is fetched from S3 directly into the\r\n            // outputStream (connected to the client browser through \r\n            // the StreamingResponseBody) so we don&#39;t put everything in memory\r\n\t\t\tthis.documentService.getZipOutputStream(outputStream, keys);\r\n\t\t} catch (S3Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t};\r\n\r\n\treturn ResponseEntity.ok()\r\n\t\t.header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=documents.zip&quot;)\r\n\t\t.contentType(MediaType.APPLICATION_OCTET_STREAM)\r\n\t\t.body(streamRespBody);\r\n}\r\n```\r\n\r\nNow I have to write something equivalent using WebFlux. I have looked around various documentations, resources, tutorials... but I can&#39;t figure a working example.\r\n\r\n\r\nIs is possible to build something equivalent possible with WebFlux, streaming a Zip to a client browser ?\r\n\r\nFor now, I can&#39;t even figure if I should return something like a `Flux&lt;SomeClasse&gt;` or if my endpoint should be a `Mono&lt;void&gt; getZip(HttpServerResponse httpResponse)` and write the `ZipOutputStream` to the client through the httpResponse.","title":"StreamingResponseBody with ZipOutputStream to WebFlux and reactive programming","body":"<p>In my application (Spring MVC) I have a legacy endpoint returning a <code>ResponseEntity&lt;StreamingResponseBody&gt;</code>. The <code>StreamingResponseBody</code> is basically a <code>ZipOutputStream</code> built by fetching a list of documents in a S3 storage.</p>\n<p>Omitting some parts, the code is as below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(value = &quot;/zip&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\nResponseEntity&lt;StreamingResponseBody&gt; downloadZip() {\n    List&lt;String&gt; keys = getMyKeys();\n\n    StreamingResponseBody streamRespBody = outputStream -&gt; {\n        try {\n            // In getZipOutputStream() each document is fetched from S3 directly into the\n            // outputStream (connected to the client browser through \n            // the StreamingResponseBody) so we don't put everything in memory\n            this.documentService.getZipOutputStream(outputStream, keys);\n        } catch (S3Exception e) {\n            throw new RuntimeException(e);\n        }\n    };\n\n    return ResponseEntity.ok()\n        .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=documents.zip&quot;)\n        .contentType(MediaType.APPLICATION_OCTET_STREAM)\n        .body(streamRespBody);\n}\n</code></pre>\n<p>Now I have to write something equivalent using WebFlux. I have looked around various documentations, resources, tutorials... but I can't figure a working example.</p>\n<p>Is is possible to build something equivalent possible with WebFlux, streaming a Zip to a client browser ?</p>\n<p>For now, I can't even figure if I should return something like a <code>Flux&lt;SomeClasse&gt;</code> or if my endpoint should be a <code>Mono&lt;void&gt; getZip(HttpServerResponse httpResponse)</code> and write the <code>ZipOutputStream</code> to the client through the httpResponse.</p>\n"},{"tags":["java","spring","spring-boot","cdi"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":1,"creation_date":1686235300,"post_id":76431744,"comment_id":134774028,"body_markdown":"It sounds like you&#39;re trying to achieve modularity. Have you looked into OSGi?","body":"It sounds like you&#39;re trying to achieve modularity. Have you looked into OSGi?"},{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":1,"creation_date":1686239296,"post_id":76431744,"comment_id":134774926,"body_markdown":"What you&#39;ve done is fine IMO. Is there something specific that is troubling you?","body":"What you&#39;ve done is fine IMO. Is there something specific that is troubling you?"},{"owner":{"account_id":14851115,"reputation":546,"user_id":10725037,"display_name":"Natasha"},"score":0,"creation_date":1686319327,"post_id":76431744,"comment_id":134786707,"body_markdown":"@lane.maxwell Thanks Lane for the tip, but in my case (quite a small application) OSGi would be a bit of a overkill.","body":"@lane.maxwell Thanks Lane for the tip, but in my case (quite a small application) OSGi would be a bit of a overkill."},{"owner":{"account_id":14851115,"reputation":546,"user_id":10725037,"display_name":"Natasha"},"score":0,"creation_date":1686319524,"post_id":76431744,"comment_id":134786748,"body_markdown":"@NikosParaskevopoulos Nikos, what is troubling me is basically the question when to use a dedicated service (plus corresponding interface) and when to use just old-school &quot;new SomeLogic(..., someConfigParam...)&quot;especially when application configuration is involved ... I always tend to use services, but with all those additional interfaces and classes and dependencies in the constructor etc. produces quite a lot of code... I struggle a bit what&#39;s the right way to do in for example the above mentioned zip use case (and a lot of other quite similar use cases)...","body":"@NikosParaskevopoulos Nikos, what is troubling me is basically the question when to use a dedicated service (plus corresponding interface) and when to use just old-school &quot;new SomeLogic(..., someConfigParam...)&quot;especially when application configuration is involved ... I always tend to use services, but with all those additional interfaces and classes and dependencies in the constructor etc. produces quite a lot of code... I struggle a bit what&#39;s the right way to do in for example the above mentioned zip use case (and a lot of other quite similar use cases)..."}],"owner":{"account_id":14851115,"reputation":546,"user_id":10725037,"display_name":"Natasha"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686226777,"creation_date":1686226327,"question_id":76431744,"body_markdown":"My application - a Swing-based desktop application (but I think that doesn&#39;t matter) - uses Spring Boot (but the question would be the same if I&#39;d use CDI or DI container XYZ). The application is capable of updating itself. Therefore it downloads an update zip file from an HTTP server if available, directly unzipping it in a temporary folder.\r\n\r\nI&#39;ve provided this unzip functionality via an injectable `ZipService` which has currently only one method `void unzip(URL url, Path directory) throws IOException`.\r\nThe idea was to provide a simple API and to spare the API client (in my case the API client is just another managed bean) details like &quot;connection timeout&quot; or &quot;read timeout&quot; (both in milliseconds) as this are already provided via app configuration.\r\n\r\nHow do you handle such use cases where you want to provide some API and do not want to bother the client of the API with details (for example configuration parameters) like in the example above? If there are even some known design patterns helpful in such cases then please let me know.","title":"Providing zip/unzip functionalities as a service in Spring/CDI/etc","body":"<p>My application - a Swing-based desktop application (but I think that doesn't matter) - uses Spring Boot (but the question would be the same if I'd use CDI or DI container XYZ). The application is capable of updating itself. Therefore it downloads an update zip file from an HTTP server if available, directly unzipping it in a temporary folder.</p>\n<p>I've provided this unzip functionality via an injectable <code>ZipService</code> which has currently only one method <code>void unzip(URL url, Path directory) throws IOException</code>.\nThe idea was to provide a simple API and to spare the API client (in my case the API client is just another managed bean) details like &quot;connection timeout&quot; or &quot;read timeout&quot; (both in milliseconds) as this are already provided via app configuration.</p>\n<p>How do you handle such use cases where you want to provide some API and do not want to bother the client of the API with details (for example configuration parameters) like in the example above? If there are even some known design patterns helpful in such cases then please let me know.</p>\n"},{"tags":["java","java.util.concurrent"],"comments":[{"owner":{"account_id":2668714,"reputation":1931,"user_id":2306536,"accept_rate":66,"display_name":"ASA"},"score":0,"creation_date":1443076723,"post_id":32719763,"comment_id":53349529,"body_markdown":"2 upvotes, 2 downvotes, 1 fav and one answer with 4 upvotes: Quite a controversial question! Yet I didn&#39;t receive a single comment. Stay classy, Stackoverflow.","body":"2 upvotes, 2 downvotes, 1 fav and one answer with 4 upvotes: Quite a controversial question! Yet I didn&#39;t receive a single comment. Stay classy, Stackoverflow."},{"owner":{"account_id":1413237,"reputation":17260,"user_id":1339429,"accept_rate":89,"display_name":"JeanValjean"},"score":0,"creation_date":1572015835,"post_id":32719763,"comment_id":103441147,"body_markdown":"If there are downvotes here, I have to say that are totally given fore free. Good question indeed.","body":"If there are downvotes here, I have to say that are totally given fore free. Good question indeed."}],"answers":[{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1442932816,"creation_date":1442932816,"answer_id":32719877,"question_id":32719763,"body_markdown":"You could use `compute` instead:\r\n\r\n    map.compute(key, (k, v) -&gt; v == null ? /*absent*/ this::getValue : /*present*/ v);\r\n\r\nand add some logic to check which branch is called.","title":"Check if computeIfAbsent of ConcurrentHashMap changed something","body":"<p>You could use <code>compute</code> instead:</p>\n\n<pre><code>map.compute(key, (k, v) -&gt; v == null ? /*absent*/ this::getValue : /*present*/ v);\n</code></pre>\n\n<p>and add some logic to check which branch is called.</p>\n"},{"tags":[],"owner":{"account_id":482558,"reputation":29193,"user_id":897024,"accept_rate":100,"display_name":"kapex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686226590,"creation_date":1686226590,"answer_id":76431779,"question_id":32719763,"body_markdown":"I think using `compute` is the right way, but checking whether the `mappingFunction` was called  within the compute&#39;s `remappingFunction` may not what be you want. I needed that information outside of the lambda, after `compute` had finished. I used the old array trick to extract the information out of the lambda.\r\n\r\n    final var isAbsent = new boolean[1];\r\n    instances.compute(keys, (k, value) -&gt; {\r\n        isAbsent[0] = (value == null);\r\n        return Objects.requireNonNullElseGet(value, mappingFunction);\r\n    });\r\n    if (isAbsent[0]) {\r\n        // entry was absent\r\n    }\r\n\r\nBy the way, if the map contains `null` values, then the lambda&#39;s `value` parameter can be `null` even though an entry was present. Calling `requireNonNullElseGet` ensures that no `null` values are put into the map here.","title":"Check if computeIfAbsent of ConcurrentHashMap changed something","body":"<p>I think using <code>compute</code> is the right way, but checking whether the <code>mappingFunction</code> was called  within the compute's <code>remappingFunction</code> may not what be you want. I needed that information outside of the lambda, after <code>compute</code> had finished. I used the old array trick to extract the information out of the lambda.</p>\n<pre><code>final var isAbsent = new boolean[1];\ninstances.compute(keys, (k, value) -&gt; {\n    isAbsent[0] = (value == null);\n    return Objects.requireNonNullElseGet(value, mappingFunction);\n});\nif (isAbsent[0]) {\n    // entry was absent\n}\n</code></pre>\n<p>By the way, if the map contains <code>null</code> values, then the lambda's <code>value</code> parameter can be <code>null</code> even though an entry was present. Calling <code>requireNonNullElseGet</code> ensures that no <code>null</code> values are put into the map here.</p>\n"}],"owner":{"account_id":2668714,"reputation":1931,"user_id":2306536,"accept_rate":66,"display_name":"ASA"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":674,"favorite_count":0,"down_vote_count":2,"up_vote_count":8,"accepted_answer_id":32719877,"answer_count":2,"score":6,"last_activity_date":1686226590,"creation_date":1442932530,"question_id":32719763,"body_markdown":"How do you know that the function computeIfAbsent of a ConcurrentHashMap had to call the given generator method (&quot;mappingFunction&quot;)?  \r\nFrom the Javadoc I believe it returns the new value, if one was generated and the old value if one existed. I could set an external flag from a lambda generator function but that would be awkward...","title":"Check if computeIfAbsent of ConcurrentHashMap changed something","body":"<p>How do you know that the function computeIfAbsent of a ConcurrentHashMap had to call the given generator method (\"mappingFunction\")?<br>\nFrom the Javadoc I believe it returns the new value, if one was generated and the old value if one existed. I could set an external flag from a lambda generator function but that would be awkward...</p>\n"},{"tags":["java","curl"],"comments":[{"owner":{"account_id":4972497,"reputation":1593,"user_id":3999808,"accept_rate":0,"display_name":"Zun"},"score":0,"creation_date":1566566600,"post_id":57626667,"comment_id":101707956,"body_markdown":"Use the Retrofit library","body":"Use the Retrofit library"}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1667180738,"creation_date":1566571213,"answer_id":57628454,"question_id":57626667,"body_markdown":"There are three things that your HttpURLConnection needs:\r\n\r\n* The request method.  You can set this with [setRequestMethod](https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29).\r\n* The headers.  You can set them with [setRequestProperty](https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/net/URLConnection.html#setRequestProperty%28java.lang.String,java.lang.String%29).\r\n* The content type.  [The HTML specification requires](https://www.w3.org/TR/html401/interact/forms.html#h-17.13.3.4) that an HTTP request containing a form submission have `application/x-www-form-urlencoded` (or `multipart/form-data`) as its body’s content type.  This is done by setting the `Content-Type` header using the `setRequestProperty` method, just like the other headers.\r\n\r\nIt’s not clear what you’re trying to do here.  As Boris Verkhovskiy points out, curl’s `--form` option includes data as a part of a multipart request.  In your command, the content of that request would be the characters of the URLs themselves.  If you really want to submit URLs, not the images at those locations, you could use an `application/x-www-form-urlencoded` request body to do it.  The body itself needs to URL-encoded, as the content type indicates.  The [URLEncoder class](https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/net/URLEncoder.html) exists for this purpose.\r\n\r\nThe steps look like this:\r\n\r\n    String img1 = &quot;https://cdn.dnaindia.com/sites/default/files/styles/full/public/2018/03/08/658858-577200-katrina-kaif-052217.jpg&quot;;\r\n    String img2 = &quot;https://cdn.somethinghaute.com/wp-content/uploads/2018/07/katrina-kaif.jpg&quot;;\r\n\r\n    con.setRequestMethod(&quot;POST&quot;);\r\n    con.setDoOutput(true);\r\n\r\n    con.setRequestProperty(&quot;user_id&quot;, myid);\r\n    con.setRequestProperty(&quot;user_key&quot;, thekey);\r\n\r\n    con.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n\r\n    String body = \r\n        &quot;img_1=&quot; + URLEncoder.encode(img1, &quot;UTF-8&quot;) + &quot;&amp;&quot; +\r\n        &quot;img_2=&quot; + URLEncoder.encode(img2, &quot;UTF-8&quot;);\r\n\r\n    try (OutputStream os = con.getOutputStream()) {\r\n        byte[] input = body.getBytes(StandardCharsets.UTF_8);\r\n        os.write(input);\r\n    }\r\n\r\nHowever, if you want to submit the actual images, you will need to create a MIME request body.  Java SE cannot do this, but the [MimeMultipart](https://javaee.github.io/javaee-spec/javadocs/javax/mail/internet/MimeMultipart.html) class of [JavaMail](https://javaee.github.io/javamail/), which is part of the Java EE specification, can.\r\n\r\n    Multipart multipart = new MimeMultipart(&quot;form-data&quot;);\r\n    BodyPart part;\r\n    part = new MimeBodyPart();\r\n    part.setDataHandler(new DataHandler(new URL(img1)));\r\n    multipart.addBodyPart(part);\r\n    part = new MimeBodyPart();\r\n    part.setDataHandler(new DataHandler(new URL(img2)));\r\n    multipart.addBodyPart(part);\r\n\r\n    con.setRequestMethod(&quot;POST&quot;);\r\n    con.setDoOutput(true);\r\n\r\n    con.setRequestProperty(&quot;user_id&quot;, myid);\r\n    con.setRequestProperty(&quot;user_key&quot;, thekey);\r\n\r\n    con.setRequestProperty(&quot;Content-Type&quot;, multipart.getContentType());\r\n\r\n    try (OutputStream os = con.getOutputStream()) {\r\n        multipart.writeTo(os);\r\n    }\r\n\r\nYou should remove all `catch` blocks from your code, and amend your method signatures to include `throws IOException` (or `throws IOException, MessagingException`).  You don’t want users of your application to think the operation was successful if in fact it failed, right?\r\n","title":"How to transform a curl command to HTTP POST request using java","body":"<p>There are three things that your HttpURLConnection needs:</p>\n<ul>\n<li>The request method.  You can set this with <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29\" rel=\"nofollow noreferrer\">setRequestMethod</a>.</li>\n<li>The headers.  You can set them with <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/net/URLConnection.html#setRequestProperty%28java.lang.String,java.lang.String%29\" rel=\"nofollow noreferrer\">setRequestProperty</a>.</li>\n<li>The content type.  <a href=\"https://www.w3.org/TR/html401/interact/forms.html#h-17.13.3.4\" rel=\"nofollow noreferrer\">The HTML specification requires</a> that an HTTP request containing a form submission have <code>application/x-www-form-urlencoded</code> (or <code>multipart/form-data</code>) as its body’s content type.  This is done by setting the <code>Content-Type</code> header using the <code>setRequestProperty</code> method, just like the other headers.</li>\n</ul>\n<p>It’s not clear what you’re trying to do here.  As Boris Verkhovskiy points out, curl’s <code>--form</code> option includes data as a part of a multipart request.  In your command, the content of that request would be the characters of the URLs themselves.  If you really want to submit URLs, not the images at those locations, you could use an <code>application/x-www-form-urlencoded</code> request body to do it.  The body itself needs to URL-encoded, as the content type indicates.  The <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/net/URLEncoder.html\" rel=\"nofollow noreferrer\">URLEncoder class</a> exists for this purpose.</p>\n<p>The steps look like this:</p>\n<pre><code>String img1 = &quot;https://cdn.dnaindia.com/sites/default/files/styles/full/public/2018/03/08/658858-577200-katrina-kaif-052217.jpg&quot;;\nString img2 = &quot;https://cdn.somethinghaute.com/wp-content/uploads/2018/07/katrina-kaif.jpg&quot;;\n\ncon.setRequestMethod(&quot;POST&quot;);\ncon.setDoOutput(true);\n\ncon.setRequestProperty(&quot;user_id&quot;, myid);\ncon.setRequestProperty(&quot;user_key&quot;, thekey);\n\ncon.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n\nString body = \n    &quot;img_1=&quot; + URLEncoder.encode(img1, &quot;UTF-8&quot;) + &quot;&amp;&quot; +\n    &quot;img_2=&quot; + URLEncoder.encode(img2, &quot;UTF-8&quot;);\n\ntry (OutputStream os = con.getOutputStream()) {\n    byte[] input = body.getBytes(StandardCharsets.UTF_8);\n    os.write(input);\n}\n</code></pre>\n<p>However, if you want to submit the actual images, you will need to create a MIME request body.  Java SE cannot do this, but the <a href=\"https://javaee.github.io/javaee-spec/javadocs/javax/mail/internet/MimeMultipart.html\" rel=\"nofollow noreferrer\">MimeMultipart</a> class of <a href=\"https://javaee.github.io/javamail/\" rel=\"nofollow noreferrer\">JavaMail</a>, which is part of the Java EE specification, can.</p>\n<pre><code>Multipart multipart = new MimeMultipart(&quot;form-data&quot;);\nBodyPart part;\npart = new MimeBodyPart();\npart.setDataHandler(new DataHandler(new URL(img1)));\nmultipart.addBodyPart(part);\npart = new MimeBodyPart();\npart.setDataHandler(new DataHandler(new URL(img2)));\nmultipart.addBodyPart(part);\n\ncon.setRequestMethod(&quot;POST&quot;);\ncon.setDoOutput(true);\n\ncon.setRequestProperty(&quot;user_id&quot;, myid);\ncon.setRequestProperty(&quot;user_key&quot;, thekey);\n\ncon.setRequestProperty(&quot;Content-Type&quot;, multipart.getContentType());\n\ntry (OutputStream os = con.getOutputStream()) {\n    multipart.writeTo(os);\n}\n</code></pre>\n<p>You should remove all <code>catch</code> blocks from your code, and amend your method signatures to include <code>throws IOException</code> (or <code>throws IOException, MessagingException</code>).  You don’t want users of your application to think the operation was successful if in fact it failed, right?</p>\n"},{"comments":[{"owner":{"account_id":15718721,"reputation":988,"user_id":11342225,"display_name":"alea"},"score":1,"creation_date":1686229103,"post_id":76431731,"comment_id":134772368,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76431731/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":19386171,"reputation":1,"user_id":14175828,"display_name":"Dhaval Zala"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686226214,"creation_date":1686226214,"answer_id":76431731,"question_id":57626667,"body_markdown":"    `    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n\r\n    public class CurlToJavaExample {\r\n    public static void main(String[] args) {\r\n        try {\r\n            // Set the cURL command from Postman\r\n            String curlCommand =&quot;request&quot;;\r\n\r\n            // Extract the URL\r\n            String url = curlCommand.split(&quot;&#39;&quot;)[1];\r\n\r\n            // Create a URL object with the target URL\r\n            URL apiUrl = new URL(url);\r\n\r\n            // Open a connection to the URL\r\n            HttpURLConnection connection = (HttpURLConnection) apiUrl.openConnection();\r\n\r\n            // Set the request method to POST\r\n            connection.setRequestMethod(curlCommand.split(&quot;--request&quot;)[1].split(&quot;&#39;&quot;)[0].trim());\r\n\r\n            // Extract headers from the cURL command\r\n            String[] headers = curlCommand.split(&quot;--header &quot;);\r\n            for (int i = 1; i &lt; headers.length; i++) {\r\n                String header = headers[i].trim().split(&quot;&#39;&quot;)[1];\r\n                String[] keyValue = header.split(&quot;: &quot;);\r\n                connection.setRequestProperty(keyValue[0], keyValue[1]);\r\n            }\r\n\r\n            // Extract the request body from the cURL command\r\n            String requestBody = curlCommand.split(&quot;--data-raw &quot;)[1].trim().split(&quot;&#39;&quot;)[1];\r\n\r\n            // Set the request body\r\n            connection.setDoOutput(true);\r\n            connection.getOutputStream().write(requestBody.getBytes(&quot;UTF-8&quot;));\r\n\r\n            // Get the response code\r\n            int responseCode = connection.getResponseCode();\r\n            System.out.println(&quot;Response Code: &quot; + responseCode);\r\n\r\n            // Read the response\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n            String line;\r\n            StringBuilder response = new StringBuilder();\r\n            while ((line = reader.readLine()) != null) {\r\n                response.append(line);\r\n            }\r\n            reader.close();\r\n\r\n            // Print the response\r\n            System.out.println(&quot;Response: &quot; + response.toString());\r\n\r\n            // Close the connection\r\n            connection.disconnect();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    }\r\n`","title":"How to transform a curl command to HTTP POST request using java","body":"<pre><code>`    import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\n\npublic class CurlToJavaExample {\npublic static void main(String[] args) {\n    try {\n        // Set the cURL command from Postman\n        String curlCommand =&quot;request&quot;;\n\n        // Extract the URL\n        String url = curlCommand.split(&quot;'&quot;)[1];\n\n        // Create a URL object with the target URL\n        URL apiUrl = new URL(url);\n\n        // Open a connection to the URL\n        HttpURLConnection connection = (HttpURLConnection) apiUrl.openConnection();\n\n        // Set the request method to POST\n        connection.setRequestMethod(curlCommand.split(&quot;--request&quot;)[1].split(&quot;'&quot;)[0].trim());\n\n        // Extract headers from the cURL command\n        String[] headers = curlCommand.split(&quot;--header &quot;);\n        for (int i = 1; i &lt; headers.length; i++) {\n            String header = headers[i].trim().split(&quot;'&quot;)[1];\n            String[] keyValue = header.split(&quot;: &quot;);\n            connection.setRequestProperty(keyValue[0], keyValue[1]);\n        }\n\n        // Extract the request body from the cURL command\n        String requestBody = curlCommand.split(&quot;--data-raw &quot;)[1].trim().split(&quot;'&quot;)[1];\n\n        // Set the request body\n        connection.setDoOutput(true);\n        connection.getOutputStream().write(requestBody.getBytes(&quot;UTF-8&quot;));\n\n        // Get the response code\n        int responseCode = connection.getResponseCode();\n        System.out.println(&quot;Response Code: &quot; + responseCode);\n\n        // Read the response\n        BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n        String line;\n        StringBuilder response = new StringBuilder();\n        while ((line = reader.readLine()) != null) {\n            response.append(line);\n        }\n        reader.close();\n\n        // Print the response\n        System.out.println(&quot;Response: &quot; + response.toString());\n\n        // Close the connection\n        connection.disconnect();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n}\n</code></pre>\n<p>`</p>\n"}],"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5235,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":57628454,"answer_count":2,"score":3,"last_activity_date":1686226214,"creation_date":1566564492,"question_id":57626667,"body_markdown":"I would like to run this specific curl command with a `HTTP` `POST` request in `java`\r\n\r\n```\r\ncurl --location --request POST &quot;http://106.51.58.118:5000/compare_faces?face_det=1&quot; \\\r\n  --header &quot;user_id: myid&quot; \\\r\n  --header &quot;user_key: thekey&quot; \\\r\n  --form &quot;img_1=https://cdn.dnaindia.com/sites/default/files/styles/full/public/2018/03/08/658858-577200-katrina-kaif-052217.jpg&quot; \\\r\n  --form &quot;img_2=https://cdn.somethinghaute.com/wp-content/uploads/2018/07/katrina-kaif.jpg&quot;\r\n```\r\n\r\nI only know how to make simple `POST` requests by passing a `JSON` object, But i&#39;ve never tried to `POST` based on the above `curl` command.\r\n\r\nHere is a `POST` example that I&#39;ve made based on this `curl` command:\r\n\r\n```\r\ncurl -X POST TheUrl/sendEmail \r\n-H &#39;Accept: application/json&#39; -H &#39;Content-Type: application/json&#39; \r\n-d &#39;{&quot;emailFrom&quot;: &quot;smth@domain.com&quot;, &quot;emailTo&quot;: \r\n[&quot;smth@gmail.com&quot;], &quot;emailSubject&quot;: &quot;Test email&quot;, &quot;emailBody&quot;:\r\n&quot;708568&quot;, &quot;generateQRcode&quot;: true}&#39; -k \r\n```\r\n\r\nHere is how i did it using `java`\r\n\r\n```java\r\n    public void sendEmail(String url) {\r\n        try {\r\n            URL obj = new URL(url);\r\n            HttpURLConnection con = (HttpURLConnection) obj.openConnection();\r\n\r\n            //add reuqest header\r\n            con.setRequestMethod(&quot;POST&quot;);\r\n            con.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json; utf-8&quot;);\r\n            con.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n            con.setDoOutput(true);\r\n            \r\n            // Send post request\r\n            JSONObject test = new JSONObject();\r\n            test.put(&quot;emailFrom&quot;, emailFrom);\r\n            test.put(&quot;emailTo&quot;, emailTo);\r\n            test.put(&quot;emailSubject&quot;, emailSubject);\r\n            test.put(&quot;emailBody&quot;, emailBody);\r\n            test.put(&quot;generateQRcode&quot;, generateQRcode);\r\n            String jsonInputString = test.toString();\r\n            System.out.println(jsonInputString);\r\n            System.out.println(&quot;Email Response:&quot; + returnResponse(con, jsonInputString));\r\n        } catch (Exception e) {\r\n            System.out.println(e);\r\n        }\r\n        System.out.println(&quot;Mail sent&quot;);\r\n    }\r\n\r\n    public String returnResponse(HttpURLConnection con, String jsonInputString) {\r\n        try (OutputStream os = con.getOutputStream()) {\r\n            byte[] input = jsonInputString.getBytes(&quot;utf-8&quot;);\r\n            os.write(input, 0, input.length);\r\n        } catch (Exception e) {\r\n            System.out.println(e);\r\n        }\r\n        try (BufferedReader br = new BufferedReader(new InputStreamReader(con.getInputStream(), &quot;utf-8&quot;))) {\r\n            StringBuilder response = new StringBuilder();\r\n            String responseLine = null;\r\n            while ((responseLine = br.readLine()) != null) {\r\n                response.append(responseLine.trim());\r\n            }\r\n            return response.toString();\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Couldnt read response from URL&quot;);\r\n            System.out.println(e);\r\n            return null;\r\n        }\r\n    }\r\n```\r\n\r\nI&#39;ve found this useful [link][1] but i can&#39;t really understand how to use it in my example.\r\n\r\nIs it any different from my example? and if yes how can i `POST` the following data?\r\n\r\n**Note:** Required Data\r\n\r\n```\r\n\r\nHEADERS:\r\n\r\nuser_id myid\r\nuser_key mykey\r\n\r\nPARAMS:\r\nface_det 1\r\nboxes 120,150,200,250 (this is optional)\r\n\r\n\r\nBODY:\r\n\r\nimg_1\r\nmultipart/base64 encoded image or remote url of image\r\n\r\nimg_2\r\nmultipart/base64 encoded image or remote url of image\r\n```\r\n\r\nHere is the complete documentation of the [API][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7172784/how-do-i-post-json-data-with-curl-from-a-terminal-commandline-to-test-spring-res\r\n  [2]: https://documenter.getpostman.com/view/5211511/RWaDYCUN?version=latest#49003cb5-55d7-d363-bb64-d202fd8d9cd7","title":"How to transform a curl command to HTTP POST request using java","body":"<p>I would like to run this specific curl command with a <code>HTTP</code> <code>POST</code> request in <code>java</code></p>\n\n<pre><code>curl --location --request POST \"http://106.51.58.118:5000/compare_faces?face_det=1\" \\\n  --header \"user_id: myid\" \\\n  --header \"user_key: thekey\" \\\n  --form \"img_1=https://cdn.dnaindia.com/sites/default/files/styles/full/public/2018/03/08/658858-577200-katrina-kaif-052217.jpg\" \\\n  --form \"img_2=https://cdn.somethinghaute.com/wp-content/uploads/2018/07/katrina-kaif.jpg\"\n</code></pre>\n\n<p>I only know how to make simple <code>POST</code> requests by passing a <code>JSON</code> object, But i've never tried to <code>POST</code> based on the above <code>curl</code> command.</p>\n\n<p>Here is a <code>POST</code> example that I've made based on this <code>curl</code> command:</p>\n\n<pre><code>curl -X POST TheUrl/sendEmail \n-H 'Accept: application/json' -H 'Content-Type: application/json' \n-d '{\"emailFrom\": \"smth@domain.com\", \"emailTo\": \n[\"smth@gmail.com\"], \"emailSubject\": \"Test email\", \"emailBody\":\n\"708568\", \"generateQRcode\": true}' -k \n</code></pre>\n\n<p>Here is how i did it using <code>java</code></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    public void sendEmail(String url) {\n        try {\n            URL obj = new URL(url);\n            HttpURLConnection con = (HttpURLConnection) obj.openConnection();\n\n            //add reuqest header\n            con.setRequestMethod(\"POST\");\n            con.setRequestProperty(\"Content-Type\", \"application/json; utf-8\");\n            con.setRequestProperty(\"Accept\", \"application/json\");\n            con.setDoOutput(true);\n\n            // Send post request\n            JSONObject test = new JSONObject();\n            test.put(\"emailFrom\", emailFrom);\n            test.put(\"emailTo\", emailTo);\n            test.put(\"emailSubject\", emailSubject);\n            test.put(\"emailBody\", emailBody);\n            test.put(\"generateQRcode\", generateQRcode);\n            String jsonInputString = test.toString();\n            System.out.println(jsonInputString);\n            System.out.println(\"Email Response:\" + returnResponse(con, jsonInputString));\n        } catch (Exception e) {\n            System.out.println(e);\n        }\n        System.out.println(\"Mail sent\");\n    }\n\n    public String returnResponse(HttpURLConnection con, String jsonInputString) {\n        try (OutputStream os = con.getOutputStream()) {\n            byte[] input = jsonInputString.getBytes(\"utf-8\");\n            os.write(input, 0, input.length);\n        } catch (Exception e) {\n            System.out.println(e);\n        }\n        try (BufferedReader br = new BufferedReader(new InputStreamReader(con.getInputStream(), \"utf-8\"))) {\n            StringBuilder response = new StringBuilder();\n            String responseLine = null;\n            while ((responseLine = br.readLine()) != null) {\n                response.append(responseLine.trim());\n            }\n            return response.toString();\n        } catch (Exception e) {\n            System.out.println(\"Couldnt read response from URL\");\n            System.out.println(e);\n            return null;\n        }\n    }\n</code></pre>\n\n<p>I've found this useful <a href=\"https://stackoverflow.com/questions/7172784/how-do-i-post-json-data-with-curl-from-a-terminal-commandline-to-test-spring-res\">link</a> but i can't really understand how to use it in my example.</p>\n\n<p>Is it any different from my example? and if yes how can i <code>POST</code> the following data?</p>\n\n<p><strong>Note:</strong> Required Data</p>\n\n<pre><code>\nHEADERS:\n\nuser_id myid\nuser_key mykey\n\nPARAMS:\nface_det 1\nboxes 120,150,200,250 (this is optional)\n\n\nBODY:\n\nimg_1\nmultipart/base64 encoded image or remote url of image\n\nimg_2\nmultipart/base64 encoded image or remote url of image\n</code></pre>\n\n<p>Here is the complete documentation of the <a href=\"https://documenter.getpostman.com/view/5211511/RWaDYCUN?version=latest#49003cb5-55d7-d363-bb64-d202fd8d9cd7\" rel=\"nofollow noreferrer\">API</a></p>\n"},{"tags":["java","apache-flink","flink-streaming","flink-table-api"],"owner":{"account_id":23460519,"reputation":65,"user_id":17515437,"display_name":"Vinay Cheguri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686225886,"creation_date":1686225494,"question_id":76431629,"body_markdown":"await method on TableResult is not working when job is submitted via Session Mode using Apache Flink Operator by creating FlinkSessionJob resource in kubernetes. The same code is working when the job is deployed using the application mode. Here is the sample code snippet\r\n\r\n    TableResult insertQueryResult = tableEnv.executeSql(&quot;SELECT * FROM table&quot;);\r\n    insertQueryResult.await();\r\n\r\nCan someone please help me in resolving the below error?\r\n\r\n    org.apache.flink.util.FlinkRuntimeException: The Job Result cannot be fetched through the Job Client when in Web Submission.\r\n\r\n\r\nWhat is the workaround to execute a fallback function after executeSql? Will there be any possibility of adding await functionality in future releases(in Session mode)?","title":"await method on TableResult is not working when job is submitted via Session Mode using Apache Flink Operator","body":"<p>await method on TableResult is not working when job is submitted via Session Mode using Apache Flink Operator by creating FlinkSessionJob resource in kubernetes. The same code is working when the job is deployed using the application mode. Here is the sample code snippet</p>\n<pre><code>TableResult insertQueryResult = tableEnv.executeSql(&quot;SELECT * FROM table&quot;);\ninsertQueryResult.await();\n</code></pre>\n<p>Can someone please help me in resolving the below error?</p>\n<pre><code>org.apache.flink.util.FlinkRuntimeException: The Job Result cannot be fetched through the Job Client when in Web Submission.\n</code></pre>\n<p>What is the workaround to execute a fallback function after executeSql? Will there be any possibility of adding await functionality in future releases(in Session mode)?</p>\n"},{"tags":["java","spring","spring-boot","arangodb","arangodb-java"],"answers":[{"tags":[],"owner":{"account_id":464362,"reputation":1084,"user_id":867816,"display_name":"Gernot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686225685,"creation_date":1686225685,"answer_id":76431657,"question_id":73066348,"body_markdown":"ArangoDB used exactly what you demand to serialize BigDecimals. But due to a precision loss (my guess) they changed that starting with [ArangoDB 4.4.0 released on April 19th 2018.][1]\r\n\r\nNote: you (may) loose precision when you call Arangos &quot;to_number&quot;. From the [docs][2]:\r\n\r\n&gt; Strings are converted to their numeric equivalent if the string contains a valid representation of a number.\r\n\r\n\r\n  [1]: https://github.com/arangodb/arangodb-java-driver/blob/b0dd98a45dbdfa9ec3ad8cd12cb2022ce06f0568/ChangeLog.md?plain=1#L627\r\n  [2]: https://www.arangodb.com/docs/stable/aql/functions-type-cast.html#to_number","title":"Spring boot w/ arango: Store BigDecimal as number","body":"<p>ArangoDB used exactly what you demand to serialize BigDecimals. But due to a precision loss (my guess) they changed that starting with <a href=\"https://github.com/arangodb/arangodb-java-driver/blob/b0dd98a45dbdfa9ec3ad8cd12cb2022ce06f0568/ChangeLog.md?plain=1#L627\" rel=\"nofollow noreferrer\">ArangoDB 4.4.0 released on April 19th 2018.</a></p>\n<p>Note: you (may) loose precision when you call Arangos &quot;to_number&quot;. From the <a href=\"https://www.arangodb.com/docs/stable/aql/functions-type-cast.html#to_number\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p>Strings are converted to their numeric equivalent if the string contains a valid representation of a number.</p>\n</blockquote>\n"}],"owner":{"account_id":4680460,"reputation":201,"user_id":3789298,"display_name":"Thomas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686225685,"creation_date":1658407097,"question_id":73066348,"body_markdown":"I&#39;m trying to save a BigDecimal to arango db, but it stores it as a String. This creates a problems with sorting - I have to call `to_number`. Is there any possibility to tell arango to store big decimal as normal number?","title":"Spring boot w/ arango: Store BigDecimal as number","body":"<p>I'm trying to save a BigDecimal to arango db, but it stores it as a String. This creates a problems with sorting - I have to call <code>to_number</code>. Is there any possibility to tell arango to store big decimal as normal number?</p>\n"},{"tags":["java","hibernate","hibernate-validator"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1409734220,"post_id":25639950,"comment_id":40061467,"body_markdown":"Just out of curiosity: why is `getPersons()` private? Why is the return type `Integer` if it never can be null? How did you define your entity, are you using field or property access?","body":"Just out of curiosity: why is <code>getPersons()</code> private? Why is the return type <code>Integer</code> if it never can be null? How did you define your entity, are you using field or property access?"},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1409735174,"post_id":25639950,"comment_id":40062020,"body_markdown":"I only created this method for validation purpose. That&#39;s why it&#39;s private, as it should never be accessed. `Integer` was a typo, sorry.","body":"I only created this method for validation purpose. That&#39;s why it&#39;s private, as it should never be accessed. <code>Integer</code> was a typo, sorry."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1409749175,"post_id":25639950,"comment_id":40070264,"body_markdown":"yes private getter, because as I wrote it should not be accessed, but hibernate can only find getters or setters.","body":"yes private getter, because as I wrote it should not be accessed, but hibernate can only find getters or setters."},{"owner":{"account_id":40043,"reputation":18749,"user_id":115835,"display_name":"Hardy"},"score":0,"creation_date":1409821926,"post_id":25639950,"comment_id":40100483,"body_markdown":"It should work. Could you post the full stacktrace? Also how are you triggering validation and which version of Hibernate Validator are you using? Besides of that, I probably would use a custom class level constraints instead of introducing a private method which is not used for anything (except validation).","body":"It should work. Could you post the full stacktrace? Also how are you triggering validation and which version of Hibernate Validator are you using? Besides of that, I probably would use a custom class level constraints instead of introducing a private method which is not used for anything (except validation)."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1409822591,"post_id":25639950,"comment_id":40100837,"body_markdown":"Ok you&#39;re probably right, I will go for the classlevle contraints.","body":"Ok you&#39;re probably right, I will go for the classlevle contraints."}],"answers":[{"comments":[{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":2,"creation_date":1409735295,"post_id":25640103,"comment_id":40062075,"body_markdown":"No, hibernate does not need public methods. For example, try `@AssertTrue private boolean test() { return false; }`, which causes the validator to always fail.","body":"No, hibernate does not need public methods. For example, try <code>@AssertTrue private boolean test() { return false; }</code>, which causes the validator to always fail."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1409740132,"post_id":25640103,"comment_id":40064777,"body_markdown":"@membersound is this true for getters/setters, i.e. property accessors as well? Your example wouldn&#39;t be an accessor method.","body":"@membersound is this true for getters/setters, i.e. property accessors as well? Your example wouldn&#39;t be an accessor method."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1409749126,"post_id":25640103,"comment_id":40070227,"body_markdown":"Sorry, I ment to write `getTest();`.","body":"Sorry, I ment to write <code>getTest();</code>."}],"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1409734668,"creation_date":1409734349,"answer_id":25640103,"question_id":25639950,"body_markdown":"I never used Hibernate Validator, but from what I read, validation only works on public properties (as opposed to field based validation where access type doesn&#39;t seem to matter), i.e. HV can&#39;t access `getPersons()` since it is private. Changing that to public should resolve the issue.\r\n","title":"Hibernate cross-field validation for integers?","body":"<p>I never used Hibernate Validator, but from what I read, validation only works on public properties (as opposed to field based validation where access type doesn't seem to matter), i.e. HV can't access <code>getPersons()</code> since it is private. Changing that to public should resolve the issue.</p>\n"},{"tags":[],"owner":{"account_id":28772032,"reputation":1,"user_id":22035585,"display_name":"Upendra Rai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686225333,"creation_date":1686225146,"answer_id":76431582,"question_id":25639950,"body_markdown":"\r\n        @Range(min = 0, max = 4)\r\n        private int getPersons() {\r\n      if(Objects.nonNull(adults)\r\n      &amp;&amp; Objects.nonNull(children))){\r\n            return adults+children;\r\n          }\r\n         return Objects.nonNull(adults) ? abults: children;\r\n        }\r\n","title":"Hibernate cross-field validation for integers?","body":"<pre><code>    @Range(min = 0, max = 4)\n    private int getPersons() {\n  if(Objects.nonNull(adults)\n  &amp;&amp; Objects.nonNull(children))){\n        return adults+children;\n      }\n     return Objects.nonNull(adults) ? abults: children;\n    }\n</code></pre>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4224,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1686225333,"creation_date":1409733824,"question_id":25639950,"body_markdown":"I&#39;d like to perform cross-field `hibernate` validation on the following class:\r\n\r\n    public class MyClass {\r\n            private int adults;\r\n            private int children;\r\n        \r\n        \t@Range(min = 0, max = 4)\r\n        \tprivate int getPersons() {\r\n        \t\treturn adults + children;\r\n        \t}\r\n    }\r\n\r\n\r\nResult: &quot;HV000090: Unable to access getPersons.&quot;\r\n\r\nWhy can&#39;t I make validations on a method that does not have an explicit class member variable?\r\n","title":"Hibernate cross-field validation for integers?","body":"<p>I'd like to perform cross-field <code>hibernate</code> validation on the following class:</p>\n\n<pre><code>public class MyClass {\n        private int adults;\n        private int children;\n\n        @Range(min = 0, max = 4)\n        private int getPersons() {\n            return adults + children;\n        }\n}\n</code></pre>\n\n<p>Result: \"HV000090: Unable to access getPersons.\"</p>\n\n<p>Why can't I make validations on a method that does not have an explicit class member variable?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":10455349,"reputation":1414,"user_id":7707680,"display_name":"Nebojsa Nebojsa"},"score":0,"creation_date":1686206241,"post_id":76429083,"comment_id":134767905,"body_markdown":"Is this solution to your problem [stackoverflow link](https://stackoverflow.com/questions/68386328/how-do-i-convert-json-nested-array-to-multidimensional-arraylist-in-java)","body":"Is this solution to your problem <a href=\"https://stackoverflow.com/questions/68386328/how-do-i-convert-json-nested-array-to-multidimensional-arraylist-in-java\">stackoverflow link</a>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1686206378,"post_id":76429083,"comment_id":134767928,"body_markdown":"It&#39;s not valid JSON, so you may have to parse it by hand.","body":"It&#39;s not valid JSON, so you may have to parse it by hand."},{"owner":{"account_id":28625477,"reputation":81,"user_id":21917572,"display_name":"abhishek_6198"},"score":0,"creation_date":1686206609,"post_id":76429083,"comment_id":134767976,"body_markdown":"@shmosel How do I do that? Can you please guide me?","body":"@shmosel How do I do that? Can you please guide me?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1686207306,"post_id":76429083,"comment_id":134768115,"body_markdown":"ChatGPT is good at this type of task.","body":"ChatGPT is good at this type of task."}],"answers":[{"tags":[],"owner":{"account_id":28625477,"reputation":81,"user_id":21917572,"display_name":"abhishek_6198"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686223780,"creation_date":1686223780,"answer_id":76431399,"question_id":76429083,"body_markdown":"After finding no other solution, I just iterated over the whole string and appended each element to the arraylist like this:\r\n```\r\nString temp = arr.get(0).get(4).toString();\r\nString details = &quot;&quot;;\r\nArrayList&lt;String&gt; temp1 = new ArrayList&lt;&gt;();\r\nArrayList&lt;ArrayList&lt;String&gt;&gt; final = new ArrayList&lt;&gt;();\r\nfor(int i=2; i&lt;temp.length()-1; i++){\r\n    if(temp.charAt(i) != &#39;,&#39; &amp;&amp; temp.charAt(i) != &#39; &#39; &amp;&amp; temp.charAt(i) != &#39;[&#39;){\r\n        if(temp.charAt(i) != &#39;]&#39;)\r\n            details += temp.charAt(i);\r\n        else{\r\n            temp1.add(details);\r\n            final.add(temp1);\r\n            temp1 = new ArrayList&lt;&gt;();\r\n            details = &quot;&quot;;\r\n        }\r\n    }\r\n    else{\r\n        if(!details.equals(&quot;&quot;)) {\r\n            temp1.add(details);\r\n        }\r\n        details = &quot;&quot;;\r\n    }\r\n}\r\n```","title":"How do I convert a JSONArray to a multidimensional arraylist?","body":"<p>After finding no other solution, I just iterated over the whole string and appended each element to the arraylist like this:</p>\n<pre><code>String temp = arr.get(0).get(4).toString();\nString details = &quot;&quot;;\nArrayList&lt;String&gt; temp1 = new ArrayList&lt;&gt;();\nArrayList&lt;ArrayList&lt;String&gt;&gt; final = new ArrayList&lt;&gt;();\nfor(int i=2; i&lt;temp.length()-1; i++){\n    if(temp.charAt(i) != ',' &amp;&amp; temp.charAt(i) != ' ' &amp;&amp; temp.charAt(i) != '['){\n        if(temp.charAt(i) != ']')\n            details += temp.charAt(i);\n        else{\n            temp1.add(details);\n            final.add(temp1);\n            temp1 = new ArrayList&lt;&gt;();\n            details = &quot;&quot;;\n        }\n    }\n    else{\n        if(!details.equals(&quot;&quot;)) {\n            temp1.add(details);\n        }\n        details = &quot;&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686225298,"creation_date":1686225298,"answer_id":76431605,"question_id":76429083,"body_markdown":"There is a one liner solution. Don&#39;t use json.org library use Jackson Json library. In this case all you veed to do is\r\n\r\n    ObjectMapper om = new ObjectMapper();\r\n    List&lt;Object&gt; myList = om.readValue(response.body(), List.class);\r\n\r\nAlso, there is a JsonUtil class that is a thin wrapper over ObjectMapper that allows you to do the same without instantiating ObjectMapper:\r\n\r\n    List&lt;Object&gt; myList = JsonUtils.readObjectFromJsonString(response.body(), List.class);\r\n\r\nJsonUtils comes with MgntUtils OpenSource library written and maintained by me. You can get it as a [Maven artifact][1] or on [Github][2] (including javadoc and source code). Here is [Javadoc for JsonUtils class][3]\r\n\r\n\r\n  [1]: https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\r\n  [2]: https://github.com/michaelgantman/Mgnt/releases\r\n  [3]: http://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/JsonUtils.html","title":"How do I convert a JSONArray to a multidimensional arraylist?","body":"<p>There is a one liner solution. Don't use json.org library use Jackson Json library. In this case all you veed to do is</p>\n<pre><code>ObjectMapper om = new ObjectMapper();\nList&lt;Object&gt; myList = om.readValue(response.body(), List.class);\n</code></pre>\n<p>Also, there is a JsonUtil class that is a thin wrapper over ObjectMapper that allows you to do the same without instantiating ObjectMapper:</p>\n<pre><code>List&lt;Object&gt; myList = JsonUtils.readObjectFromJsonString(response.body(), List.class);\n</code></pre>\n<p>JsonUtils comes with MgntUtils OpenSource library written and maintained by me. You can get it as a <a href=\"https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\" rel=\"nofollow noreferrer\">Maven artifact</a> or on <a href=\"https://github.com/michaelgantman/Mgnt/releases\" rel=\"nofollow noreferrer\">Github</a> (including javadoc and source code). Here is <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/JsonUtils.html\" rel=\"nofollow noreferrer\">Javadoc for JsonUtils class</a></p>\n"}],"owner":{"account_id":28625477,"reputation":81,"user_id":21917572,"display_name":"abhishek_6198"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1686225298,"creation_date":1686205089,"question_id":76429083,"body_markdown":"My code:\r\n```\r\ntry {\r\n    JSONArray array = new JSONArray(response.body());\r\n    List&lt;JSONArray&gt; arr = new ArrayList&lt;&gt;();\r\n    for (int i = 0; i &lt; array.length(); i++) {\r\n        arr.add(array.getJSONArray(i));\r\n    }\r\n    Log.d(&quot;arr&quot;,arr.toString());\r\n}catch (JSONException e) {\r\n    throw new RuntimeException(e);\r\n} \r\n```\r\nThis is my `arr`:\r\n```\r\n[[&quot;bdbd&quot;,&quot;hdhs&quot;,&quot;hdhd&quot;,&quot;1234567890&quot;,&quot;[[shhs, sbbs, married], [sjsn, snsn, unmarried]]&quot;]]\r\n```\r\nI want to convert the last element inside my `arr` \r\n\r\n&gt; &quot;[[shhs, sbbs, married], [sjsn, snsn, unmarried]]&quot;\r\n\r\nto a multidimensional ArrayList (`ArrayList&lt;ArrayList&lt;String&gt;&gt;`). How do I do this?\r\n","title":"How do I convert a JSONArray to a multidimensional arraylist?","body":"<p>My code:</p>\n<pre><code>try {\n    JSONArray array = new JSONArray(response.body());\n    List&lt;JSONArray&gt; arr = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; array.length(); i++) {\n        arr.add(array.getJSONArray(i));\n    }\n    Log.d(&quot;arr&quot;,arr.toString());\n}catch (JSONException e) {\n    throw new RuntimeException(e);\n} \n</code></pre>\n<p>This is my <code>arr</code>:</p>\n<pre><code>[[&quot;bdbd&quot;,&quot;hdhs&quot;,&quot;hdhd&quot;,&quot;1234567890&quot;,&quot;[[shhs, sbbs, married], [sjsn, snsn, unmarried]]&quot;]]\n</code></pre>\n<p>I want to convert the last element inside my <code>arr</code></p>\n<blockquote>\n<p>&quot;[[shhs, sbbs, married], [sjsn, snsn, unmarried]]&quot;</p>\n</blockquote>\n<p>to a multidimensional ArrayList (<code>ArrayList&lt;ArrayList&lt;String&gt;&gt;</code>). How do I do this?</p>\n"},{"tags":["java","itext","radio-button","radio-group","section508"],"owner":{"account_id":28779921,"reputation":1,"user_id":22041742,"display_name":"jmaydev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686224932,"creation_date":1686224932,"question_id":76431556,"body_markdown":"The issue I am running into is when I create a radio button group and it&#39;s corresponding radio buttons, screen readers like Jaws are refusing to read out the Radio Button Group name/label/value before the radio button value.\r\n\r\nideally a screen reader like JAWS would read the following radio group + radio buttons like this every time a user tabs to a new radio button. Below is a pseudo example of the code.\r\n\r\n\r\nRadiogroup name/label: &quot;Are there any guests coming?&quot;\r\n\r\nradio button one - &quot;Yes&quot;\r\n\r\nradio button two - &quot;No&quot;\r\n\r\nThe above should read like this every time a user tabs to a radio button:\r\n\r\n&quot;Are there any guests coming? radio button yes, one of two radio buttons&quot;\r\n\r\n&quot;Are there any guests coming? radio button no, two of two radio buttons&quot;\r\n\r\nor something along those lines where it&#39;s announcing the name/label of the radio group in addition to the value of the radio buttons + the normal JAWs stuff like identifying what number of radio buttons in the group it&#39;s currently tabbed to.\r\n\r\n\r\n\r\nI have tried iText&#39;s accessibleProperties class and adding &quot;actualText&quot; and &quot;setAlternateDescription&quot; but, I haven&#39;t been able to get anything to pick up in JAWS, the screen reader. \r\n\r\nWhat ends up happening is it just reads the value of the radio button and skips the Radio Group name/Label, and it definately doesn&#39;t mention it when you tab to another radio button, you&#39;re just getting that radio button&#39;s value read out by the screen reader. \r\n\r\nI was expecting when a user tabs to a radio button in the radio group, that the radio group name/label will be read out loud in addition to the radio button value.","title":"how can I create 508 compliant radio groups and radio buttons using iText version 7.0","body":"<p>The issue I am running into is when I create a radio button group and it's corresponding radio buttons, screen readers like Jaws are refusing to read out the Radio Button Group name/label/value before the radio button value.</p>\n<p>ideally a screen reader like JAWS would read the following radio group + radio buttons like this every time a user tabs to a new radio button. Below is a pseudo example of the code.</p>\n<p>Radiogroup name/label: &quot;Are there any guests coming?&quot;</p>\n<p>radio button one - &quot;Yes&quot;</p>\n<p>radio button two - &quot;No&quot;</p>\n<p>The above should read like this every time a user tabs to a radio button:</p>\n<p>&quot;Are there any guests coming? radio button yes, one of two radio buttons&quot;</p>\n<p>&quot;Are there any guests coming? radio button no, two of two radio buttons&quot;</p>\n<p>or something along those lines where it's announcing the name/label of the radio group in addition to the value of the radio buttons + the normal JAWs stuff like identifying what number of radio buttons in the group it's currently tabbed to.</p>\n<p>I have tried iText's accessibleProperties class and adding &quot;actualText&quot; and &quot;setAlternateDescription&quot; but, I haven't been able to get anything to pick up in JAWS, the screen reader.</p>\n<p>What ends up happening is it just reads the value of the radio button and skips the Radio Group name/Label, and it definately doesn't mention it when you tab to another radio button, you're just getting that radio button's value read out by the screen reader.</p>\n<p>I was expecting when a user tabs to a radio button in the radio group, that the radio group name/label will be read out loud in addition to the radio button value.</p>\n"},{"tags":["java","selenium-webdriver","jmeter","performance-testing","load-testing"],"answers":[{"comments":[{"owner":{"account_id":28167452,"reputation":1,"user_id":21526457,"display_name":"zenitsu Agastuma"},"score":0,"creation_date":1686229810,"post_id":76431511,"comment_id":134772569,"body_markdown":"Thank you Dmitri. i have followed your steps. I got ttfb value. Ttfb value like 1686228861999 i need to convert into milli second for example(4678 ms) could you please help me out","body":"Thank you Dmitri. i have followed your steps. I got ttfb value. Ttfb value like 1686228861999 i need to convert into milli second for example(4678 ms) could you please help me out"},{"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"score":0,"creation_date":1686231383,"post_id":76431511,"comment_id":134772991,"body_markdown":"Have you tried to read remaining 2 lines of the code snippet in my response?","body":"Have you tried to read remaining 2 lines of the code snippet in my response?"},{"owner":{"account_id":28167452,"reputation":1,"user_id":21526457,"display_name":"zenitsu Agastuma"},"score":0,"creation_date":1686234235,"post_id":76431511,"comment_id":134773736,"body_markdown":"Yeah it works fine.. could you please give me latency formulas and rendering time application starts load the DOM and complete and readies the DOM.. could you please tell how to code for rendering time","body":"Yeah it works fine.. could you please give me latency formulas and rendering time application starts load the DOM and complete and readies the DOM.. could you please tell how to code for rendering time"}],"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686224532,"creation_date":1686224532,"answer_id":76431511,"question_id":76431187,"body_markdown":"You can get latency from the [Performance Timing API][1], something like: \r\n\r\n\tdef now = System.currentTimeMillis()\r\n\tdef ttfb = WDS.browser.executeScript(&#39;return window.performance.timing.responseStart&#39;) as long\r\n\tWDS.sampleResult.setLatency(now - ttfb)\r\n\r\nI&#39;m not sure what do you mean by &quot;rendering time&quot;, the whole WebDriver Sampler execution time is stored as Elapsed Time and it&#39;s possible to overwrite it with your own value using [JSR223 PostProcessor][2] and [Groovy language][3] but you need to let us know what exactly you&#39;re looking for.  \r\n\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/Performance/Navigation_and_resource_timings\r\n  [2]: https://jmeter.apache.org/usermanual/component_reference.html#JSR223_PostProcessor\r\n  [3]: https://www.blazemeter.com/blog/apache-groovy","title":"How to get Latency, Rendering time using Webdriver sampler in Jmeter","body":"<p>You can get latency from the <a href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/Navigation_and_resource_timings\" rel=\"nofollow noreferrer\">Performance Timing API</a>, something like:</p>\n<pre><code>def now = System.currentTimeMillis()\ndef ttfb = WDS.browser.executeScript('return window.performance.timing.responseStart') as long\nWDS.sampleResult.setLatency(now - ttfb)\n</code></pre>\n<p>I'm not sure what do you mean by &quot;rendering time&quot;, the whole WebDriver Sampler execution time is stored as Elapsed Time and it's possible to overwrite it with your own value using <a href=\"https://jmeter.apache.org/usermanual/component_reference.html#JSR223_PostProcessor\" rel=\"nofollow noreferrer\">JSR223 PostProcessor</a> and <a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">Groovy language</a> but you need to let us know what exactly you're looking for.</p>\n"}],"owner":{"account_id":28167452,"reputation":1,"user_id":21526457,"display_name":"zenitsu Agastuma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686224532,"creation_date":1686222317,"question_id":76431187,"body_markdown":"I need to get the values of latency and rendering time of the web application using Webdriver sampler in jmeter\r\n\r\nCould you please tell me how to get those values and if you provide some sample webdriver sampler codes for get rendering time and latency values ..\r\n\r\n\r\nExpected results:\r\n\r\n1)Get latency\r\n2)Get rendering time","title":"How to get Latency, Rendering time using Webdriver sampler in Jmeter","body":"<p>I need to get the values of latency and rendering time of the web application using Webdriver sampler in jmeter</p>\n<p>Could you please tell me how to get those values and if you provide some sample webdriver sampler codes for get rendering time and latency values ..</p>\n<p>Expected results:</p>\n<p>1)Get latency\n2)Get rendering time</p>\n"},{"tags":["java","spring","file-upload","cloudinary","video-upload"],"comments":[{"owner":{"account_id":555095,"reputation":1782,"user_id":1262187,"accept_rate":18,"display_name":"simar"},"score":0,"creation_date":1686226820,"post_id":76431504,"comment_id":134771804,"body_markdown":"Are you sure that error come from cloudinary not from servlet? May be you limit servlet container of upload file size?  Check spring boot config parameter to increase multipart size of underneath servlet container. Also you code is tricks the error it catches both error types: from container and from cloudinary. If you able to catch exception debug mode pay attention what type of error is it.","body":"Are you sure that error come from cloudinary not from servlet? May be you limit servlet container of upload file size?  Check spring boot config parameter to increase multipart size of underneath servlet container. Also you code is tricks the error it catches both error types: from container and from cloudinary. If you able to catch exception debug mode pay attention what type of error is it."},{"owner":{"account_id":555095,"reputation":1782,"user_id":1262187,"accept_rate":18,"display_name":"simar"},"score":0,"creation_date":1686226874,"post_id":76431504,"comment_id":134771817,"body_markdown":"Replace  LOG.info(e.getMessage()); with \nLOG.error(&quot;&quot;, e);\nthis will also will log type of error, not just generic string message which may be common for both io errors.","body":"Replace  LOG.info(e.getMessage()); with  LOG.error(&quot;&quot;, e); this will also will log type of error, not just generic string message which may be common for both io errors."},{"owner":{"account_id":555095,"reputation":1782,"user_id":1262187,"accept_rate":18,"display_name":"simar"},"score":0,"creation_date":1686227173,"post_id":76431504,"comment_id":134771902,"body_markdown":"Or may be you need to replace &quot;upload&quot; with &quot;uploadLarge&quot;","body":"Or may be you need to replace &quot;upload&quot; with &quot;uploadLarge&quot;"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686228974,"post_id":76431504,"comment_id":134772336,"body_markdown":"Your code doesn&#39;t even execute I would say. The error is thrown by the default file upload handling from Spring Boot which has this limit. Set to a larger limit or disable file upload as a whole and use a streaming approach (which will use less resources).","body":"Your code doesn&#39;t even execute I would say. The error is thrown by the default file upload handling from Spring Boot which has this limit. Set to a larger limit or disable file upload as a whole and use a streaming approach (which will use less resources)."},{"owner":{"account_id":16214902,"reputation":1540,"user_id":11707957,"display_name":"Aleksandar"},"score":0,"creation_date":1686229984,"post_id":76431504,"comment_id":134772626,"body_markdown":"If you could also please retry an upload request and log/print the value of the exact error message returned from Cloudinary API - that would help.","body":"If you could also please retry an upload request and log/print the value of the exact error message returned from Cloudinary API - that would help."},{"owner":{"account_id":26846031,"reputation":1,"user_id":20431758,"display_name":"Šimon Kov&#225;č"},"score":0,"creation_date":1686247365,"post_id":76431504,"comment_id":134776524,"body_markdown":"Thank you guys for your suggestion. In deed the problem was spring. I added the following to application properties spring.servlet.multipart.max-file-size=100MB\nspring.servlet.multipart.max-request-size=100MB. I would like to know more about the streaming approach. Could you tell me more M.Deinum ?","body":"Thank you guys for your suggestion. In deed the problem was spring. I added the following to application properties spring.servlet.multipart.max-file-size=100MB spring.servlet.multipart.max-request-size=100MB. I would like to know more about the streaming approach. Could you tell me more M.Deinum ?"}],"owner":{"account_id":26846031,"reputation":1,"user_id":20431758,"display_name":"Šimon Kov&#225;č"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686224496,"creation_date":1686224496,"question_id":76431504,"body_markdown":"I am using Cloudinary to handle file uploads in my Java Spring application. I have a @PutMapping endpoint that receives a video file using multipart/form-data. However, when I attempt to upload the video file, I receive the following error: **the request was rejected because its size (27838844) exceeds the configured maximum (10485760)**\r\n\r\nIt seems that Cloudinary is treating the file as an image and applying the lower file size limit instead of the expected limit for videos. How can I specify to Cloudinary that the uploaded file is a video, so that the correct file size limit is applied?\r\n\r\n    @PutMapping(value = &quot;/update/{id}&quot;, consumes = &quot;multipart/form-data&quot;)\r\n      public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; UpdateCourse(@RequestParam(&quot;file&quot;MultipartFile file, HttpServletRequest request) throws IOException {\r\n    Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();\r\n    response.put(&quot;filename&quot;, file.getBytes());\r\n\r\n    try {\r\n        Map&lt;String, Object&gt; name = cloudinary.uploader().upload(file.getInputStream(), ObjectUtils.asMap(&quot;resource_type&quot;, &quot;video&quot;));\r\n\r\n        response.put(&quot;message&quot;, &quot;File uploaded successfully&quot;);\r\n        response.put(&quot;url&quot;, name.get(&quot;secure_url&quot;));\r\n    } catch (Exception e) {\r\n        LOG.info(e.getMessage());\r\n    }\r\n\r\n    return ResponseEntity.ok(response);\r\n}\r\n\r\nI have verified that the video file size exceeds the default file size limit for images.\r\nI have also checked my Cloudinary account settings and confirmed that the maximum video file size limit is indeed set to a higher value than the error suggests.\r\nI have tried specifying &quot;resource_type&quot; as &quot;video&quot; in the options passed to cloudinary.uploader().upload(), but the issue persists.\r\nI appreciate any insights or suggestions on how to resolve this issue and correctly specify the file type as a video during the upload process. Thank you!\r\n","title":"Cloudinary upload of video file results in &quot;request rejected due to exceeding maximum size&quot; error","body":"<p>I am using Cloudinary to handle file uploads in my Java Spring application. I have a @PutMapping endpoint that receives a video file using multipart/form-data. However, when I attempt to upload the video file, I receive the following error: <strong>the request was rejected because its size (27838844) exceeds the configured maximum (10485760)</strong></p>\n<p>It seems that Cloudinary is treating the file as an image and applying the lower file size limit instead of the expected limit for videos. How can I specify to Cloudinary that the uploaded file is a video, so that the correct file size limit is applied?</p>\n<pre><code>@PutMapping(value = &quot;/update/{id}&quot;, consumes = &quot;multipart/form-data&quot;)\n  public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; UpdateCourse(@RequestParam(&quot;file&quot;MultipartFile file, HttpServletRequest request) throws IOException {\nMap&lt;String, Object&gt; response = new HashMap&lt;&gt;();\nresponse.put(&quot;filename&quot;, file.getBytes());\n\ntry {\n    Map&lt;String, Object&gt; name = cloudinary.uploader().upload(file.getInputStream(), ObjectUtils.asMap(&quot;resource_type&quot;, &quot;video&quot;));\n\n    response.put(&quot;message&quot;, &quot;File uploaded successfully&quot;);\n    response.put(&quot;url&quot;, name.get(&quot;secure_url&quot;));\n} catch (Exception e) {\n    LOG.info(e.getMessage());\n}\n\nreturn ResponseEntity.ok(response);\n</code></pre>\n<p>}</p>\n<p>I have verified that the video file size exceeds the default file size limit for images.\nI have also checked my Cloudinary account settings and confirmed that the maximum video file size limit is indeed set to a higher value than the error suggests.\nI have tried specifying &quot;resource_type&quot; as &quot;video&quot; in the options passed to cloudinary.uploader().upload(), but the issue persists.\nI appreciate any insights or suggestions on how to resolve this issue and correctly specify the file type as a video during the upload process. Thank you!</p>\n"},{"tags":["java","algorithm","performance","merge","hashmap"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1686181461,"post_id":76427592,"comment_id":134765634,"body_markdown":"If your code is working, the question might be more suitable for [Code Review](https://codereview.stackexchange.com/)","body":"If your code is working, the question might be more suitable for <a href=\"https://codereview.stackexchange.com/\">Code Review</a>"},{"owner":{"account_id":88286,"reputation":198831,"user_id":244296,"accept_rate":86,"display_name":"Cristian"},"score":0,"creation_date":1686182129,"post_id":76427592,"comment_id":134765694,"body_markdown":"Thanks for the suggestion","body":"Thanks for the suggestion"},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1686201842,"post_id":76427592,"comment_id":134767338,"body_markdown":"if：\n`map1   = {root: {a: abc, b: {c: c, d: d}}}`,\n`map2   = {root: {a: qwe, b: {c: x}}`. the result wille be what structure????","body":"if： <code>map1   = {root: {a: abc, b: {c: c, d: d}}}</code>, <code>map2   = {root: {a: qwe, b: {c: x}}</code>. the result wille be what structure????"},{"owner":{"account_id":88286,"reputation":198831,"user_id":244296,"accept_rate":86,"display_name":"Cristian"},"score":0,"creation_date":1686204517,"post_id":76427592,"comment_id":134767657,"body_markdown":"`{root: {a: qwe, b: {c: x, d: d}}`","body":"<code>{root: {a: qwe, b: {c: x, d: d}}</code>"},{"owner":{"account_id":2891308,"reputation":12354,"user_id":2480047,"display_name":"varocarbas"},"score":0,"creation_date":1686206265,"post_id":76427592,"comment_id":134767908,"body_markdown":"This might not be the answer you want to hear, but this is the only one I will ever give to someone having this problem. HashMaps are tremendously inefficient, much more when talking about multidimensionality (lists, nested, etc.). Additionally, if their sizes are so big, it seems clear that you have modelled through code what you should have done via another resource like a DB. In any case, replacing almost any part with a more efficient option such as plain arrays (even 2D or 3D or various of them) would have a noticeable impact on performance and memory usage (out of space)...","body":"This might not be the answer you want to hear, but this is the only one I will ever give to someone having this problem. HashMaps are tremendously inefficient, much more when talking about multidimensionality (lists, nested, etc.). Additionally, if their sizes are so big, it seems clear that you have modelled through code what you should have done via another resource like a DB. In any case, replacing almost any part with a more efficient option such as plain arrays (even 2D or 3D or various of them) would have a noticeable impact on performance and memory usage (out of space)..."},{"owner":{"account_id":2891308,"reputation":12354,"user_id":2480047,"display_name":"varocarbas"},"score":0,"creation_date":1686206535,"post_id":76427592,"comment_id":134767959,"body_markdown":"... (continuation from previous comment) I have done that myself many times. I do tend to rely on multidimensional HashMaps often because they are an easy way to create somehow complex data setups, although never up to the level which you seemed to have reached here. Afterwards, when trying to optimise the code, I gradually replace them with more efficient collections. In this case, I would start with the inner parts, the ones storing the final results. As said, you could replace one single HashMap with various arrays and it would still be very worthy.","body":"... (continuation from previous comment) I have done that myself many times. I do tend to rely on multidimensional HashMaps often because they are an easy way to create somehow complex data setups, although never up to the level which you seemed to have reached here. Afterwards, when trying to optimise the code, I gradually replace them with more efficient collections. In this case, I would start with the inner parts, the ones storing the final results. As said, you could replace one single HashMap with various arrays and it would still be very worthy."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1686218146,"post_id":76427592,"comment_id":134770103,"body_markdown":"On Code Review@SE: [Merge a list of deeply nested HashMaps](https://codereview.stackexchange.com/q/285398/93149).","body":"On Code Review@SE: <a href=\"https://codereview.stackexchange.com/q/285398/93149\">Merge a list of deeply nested HashMaps</a>."}],"answers":[{"comments":[{"owner":{"account_id":88286,"reputation":198831,"user_id":244296,"accept_rate":86,"display_name":"Cristian"},"score":0,"creation_date":1686183621,"post_id":76427853,"comment_id":134765843,"body_markdown":"I am not sure how that would help with the performance of the merging itself.","body":"I am not sure how that would help with the performance of the merging itself."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1686183717,"post_id":76427853,"comment_id":134765852,"body_markdown":"@Cristian, so, the object you&#39;d be creating would be taking up less resources.","body":"@Cristian, so, the object you&#39;d be creating would be taking up less resources."},{"owner":{"account_id":88286,"reputation":198831,"user_id":244296,"accept_rate":86,"display_name":"Cristian"},"score":0,"creation_date":1686183937,"post_id":76427853,"comment_id":134765869,"body_markdown":"So here&#39;s the problem with a map built this way: how do you build a `get(key)` method? You would need to loop through the `list` and check for the existence of the key, which is O(n). Where as in a HashMap, a get operation is O(1).","body":"So here&#39;s the problem with a map built this way: how do you build a <code>get(key)</code> method? You would need to loop through the <code>list</code> and check for the existence of the key, which is O(n). Where as in a HashMap, a get operation is O(1)."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1686184471,"post_id":76427853,"comment_id":134765907,"body_markdown":"@Cristian, I see what you mean.  That, I am unsure of.  I do know though, that decreasing the object&#39;s resources will typically increase performance.  The reduction from the loop may be negated by the increase of using a smaller object.  You would have to implement it and check, which may not be worth the effort.","body":"@Cristian, I see what you mean.  That, I am unsure of.  I do know though, that decreasing the object&#39;s resources will typically increase performance.  The reduction from the loop may be negated by the increase of using a smaller object.  You would have to implement it and check, which may not be worth the effort."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1686184615,"post_id":76427853,"comment_id":134765915,"body_markdown":"@Cristian, as a note, typically, designs that follow this pattern will be implemented in a _node-structure_, as opposed to a nested map.","body":"@Cristian, as a note, typically, designs that follow this pattern will be implemented in a <i>node-structure</i>, as opposed to a nested map."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686183519,"creation_date":1686183519,"answer_id":76427853,"question_id":76427592,"body_markdown":"You could try implementing your own _map_.\r\n\r\nIt would require a re-factor of your code.\r\n\r\nI presume there would be a subtle increase in performance&amp;mdash;possibly negligible.\r\n\r\n```java\r\nabstract class Value {\r\n\r\n}\r\n\r\nclass ScalarNumber extends Value {\r\n    Number value;\r\n}\r\n\r\nclass ScalarBoolean extends Value {\r\n    boolean value;\r\n}\r\n\r\nclass ScalarChar extends Value {\r\n    char value;\r\n}\r\n\r\nclass Values extends Value {\r\n    List&lt;Value&gt; list;\r\n}\r\n\r\nclass Entry extends Value {\r\n    String key;\r\n    Value value;\r\n}","title":"How to efficiently merge a list of deeply nested HashMaps?","body":"<p>You could try implementing your own <em>map</em>.</p>\n<p>It would require a re-factor of your code.</p>\n<p>I presume there would be a subtle increase in performance—possibly negligible.</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class Value {\n\n}\n\nclass ScalarNumber extends Value {\n    Number value;\n}\n\nclass ScalarBoolean extends Value {\n    boolean value;\n}\n\nclass ScalarChar extends Value {\n    char value;\n}\n\nclass Values extends Value {\n    List&lt;Value&gt; list;\n}\n\nclass Entry extends Value {\n    String key;\n    Value value;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1686813042,"post_id":76430538,"comment_id":134851446,"body_markdown":"@Cristian I&#39;ll delete this answer if not helpful, I see that you&#39;ve reposted the question on Code Review instead.","body":"@Cristian I&#39;ll delete this answer if not helpful, I see that you&#39;ve reposted the question on Code Review instead."}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686224296,"creation_date":1686217292,"answer_id":76430538,"question_id":76427592,"body_markdown":"Here are some observations that may or may not help as I&#39;m not in position to test with your datasets. \r\n\r\n`HashMap` might perform rehash of internal tables when number of entries exceeds the maps load factor as you add loop over `other`. You have mostly accounted for this with `Map&lt;String, Object&gt; result = new LinkedHashMap&lt;&gt;(map.size() + other.size());`. In JDK19+ there is a slightly better call which scales up the size by the load factor so there shouldn&#39;t be a rehash event:\r\n\r\n    Map&lt;String, Object&gt; result = LinkedHashMap.newLinkedHashMap(map.size() + other.size());\r\n\r\nYour loop would be simpler using `merge`, so logic like this:\r\n\r\n    public static Map&lt;String, Object&gt; mergeMaps(Map&lt;String, Object&gt; map, Map&lt;String, Object&gt; other) {\r\n        Map&lt;String, Object&gt; result = LinkedHashMap.newLinkedHashMap(map.size() + other.size());\r\n        result.putAll(map);\r\n\r\n        for (Map.Entry&lt;String, Object&gt; entry : other.entrySet()) {\r\n            result.merge(entry.getKey(), entry.getValue(), (val1, val2) -&gt;\r\n                    (val1 instanceof Map &amp;&amp; val2 instanceof Map)\r\n                    ? mergeMaps((Map&lt;String, Object&gt;) val1, (Map&lt;String, Object&gt;) val2)\r\n                    : val2 );\r\n        }\r\n        return result;\r\n    }\r\n\r\nThe stream over config still causes a lot of copying from one map to another and those intermediate maps are lost at each stage. If you used your own `HashMap` as a marker you could avoid some of the new map construction and copying to next when you detect use of a map you&#39;ve already created.\r\n\r\n    class MyHashMap&lt;K,V&gt; extends HashMap&lt;K,V&gt; {// or LinkedHM if prefer \r\n        MyHashMap(int size) {\r\n            super(size);\r\n        }\r\n    }\r\n\r\nThen the first line of mergeMaps can bypass the `putAll` step as `map` parameter already contains what you need to return:\r\n\r\n    public static Map&lt;String, Object&gt; mergeMaps(Map&lt;String, Object&gt; map, Map&lt;String, Object&gt; other) {\r\n        Map&lt;String, Object&gt; result = map;\r\n        if (!(map instanceof MyHashMap)) {\r\n            result = new MyHashMap(map.size() + other.size());\r\n            result.putAll(map);\r\n        }\r\n        ...\r\n    }\r\n\r\nBut be careful with `MyHashMap` approach if you use the final output of the merge in another round of merges as then the input maps will be modified rather than reconstructed as copies.\r\n\r\nIf your original maps are `ConcurrentHashMap` then the `other.entrySet()` constructs new `Map.Entry` for each item, the loop might be better as:\r\n\r\n    for (String key : other.keySet()) {\r\n        result.merge(key, other.get(key), ...\r\n","title":"How to efficiently merge a list of deeply nested HashMaps?","body":"<p>Here are some observations that may or may not help as I'm not in position to test with your datasets.</p>\n<p><code>HashMap</code> might perform rehash of internal tables when number of entries exceeds the maps load factor as you add loop over <code>other</code>. You have mostly accounted for this with <code>Map&lt;String, Object&gt; result = new LinkedHashMap&lt;&gt;(map.size() + other.size());</code>. In JDK19+ there is a slightly better call which scales up the size by the load factor so there shouldn't be a rehash event:</p>\n<pre><code>Map&lt;String, Object&gt; result = LinkedHashMap.newLinkedHashMap(map.size() + other.size());\n</code></pre>\n<p>Your loop would be simpler using <code>merge</code>, so logic like this:</p>\n<pre><code>public static Map&lt;String, Object&gt; mergeMaps(Map&lt;String, Object&gt; map, Map&lt;String, Object&gt; other) {\n    Map&lt;String, Object&gt; result = LinkedHashMap.newLinkedHashMap(map.size() + other.size());\n    result.putAll(map);\n\n    for (Map.Entry&lt;String, Object&gt; entry : other.entrySet()) {\n        result.merge(entry.getKey(), entry.getValue(), (val1, val2) -&gt;\n                (val1 instanceof Map &amp;&amp; val2 instanceof Map)\n                ? mergeMaps((Map&lt;String, Object&gt;) val1, (Map&lt;String, Object&gt;) val2)\n                : val2 );\n    }\n    return result;\n}\n</code></pre>\n<p>The stream over config still causes a lot of copying from one map to another and those intermediate maps are lost at each stage. If you used your own <code>HashMap</code> as a marker you could avoid some of the new map construction and copying to next when you detect use of a map you've already created.</p>\n<pre><code>class MyHashMap&lt;K,V&gt; extends HashMap&lt;K,V&gt; {// or LinkedHM if prefer \n    MyHashMap(int size) {\n        super(size);\n    }\n}\n</code></pre>\n<p>Then the first line of mergeMaps can bypass the <code>putAll</code> step as <code>map</code> parameter already contains what you need to return:</p>\n<pre><code>public static Map&lt;String, Object&gt; mergeMaps(Map&lt;String, Object&gt; map, Map&lt;String, Object&gt; other) {\n    Map&lt;String, Object&gt; result = map;\n    if (!(map instanceof MyHashMap)) {\n        result = new MyHashMap(map.size() + other.size());\n        result.putAll(map);\n    }\n    ...\n}\n</code></pre>\n<p>But be careful with <code>MyHashMap</code> approach if you use the final output of the merge in another round of merges as then the input maps will be modified rather than reconstructed as copies.</p>\n<p>If your original maps are <code>ConcurrentHashMap</code> then the <code>other.entrySet()</code> constructs new <code>Map.Entry</code> for each item, the loop might be better as:</p>\n<pre><code>for (String key : other.keySet()) {\n    result.merge(key, other.get(key), ...\n</code></pre>\n"}],"owner":{"account_id":88286,"reputation":198831,"user_id":244296,"accept_rate":86,"display_name":"Cristian"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1686224296,"creation_date":1686178930,"question_id":76427592,"body_markdown":"Suppose I have a list of hashmaps (`&lt;String, Object&gt;`). Values can be either scalar types or a nested HashMap with the same type.\r\n\r\nI need to merge a list of this maps into a final HashMap, each map in the list has higher precedence than the one before. Also the merge has to be deep: i.e.:\r\n\r\n```\r\nmap1   = {root: {a: a, b: {c: c, d: d}}}\r\nmap2   = {root: {a: a, b: {c: x}}\r\nresult = {root: {a: a, b: {c: x, d: d}}}\r\n```\r\n\r\nIn the previous example, the sub tree `b` in `map2` does not override the whole subtree in `map1`. It just overrides the leaves that are duplicated.\r\n\r\nThe code I have right now looks like this and works ok:\r\n\r\n```java\r\npublic static Map&lt;String, Object&gt; merge(List&lt;Map&lt;String, Object&gt;&gt; configs) {\r\n    return configs.stream()\r\n            .filter(Objects::nonNull)\r\n            .reduce(new LinkedHashMap&lt;&gt;(), ConfigMerger::mergeMaps);\r\n}\r\n\r\npublic static Map&lt;String, Object&gt; mergeMaps(Map&lt;String, Object&gt; map, Map&lt;String, Object&gt; other) {\r\n    Map&lt;String, Object&gt; result = new LinkedHashMap&lt;&gt;(map.size() + other.size());\r\n    result.putAll(map);\r\n\r\n    for (Map.Entry&lt;String, Object&gt; entry : other.entrySet()) {\r\n        String key = entry.getKey();\r\n        Object val2 = entry.getValue();\r\n        Object val1 = result.get(key);\r\n\r\n        if (val1 instanceof Map &amp;&amp; val2 instanceof Map) {\r\n            Map&lt;String, Object&gt; nestedResult = mergeMaps((Map&lt;String, Object&gt;) val1, (Map&lt;String, Object&gt;) val2);\r\n            result.put(key, nestedResult);\r\n        } else {\r\n            result.put(key, val2);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n```\r\n\r\nThe only issue is that `result.putAll(map);` is a bit wasteful. I do that for every nested map in each one of the original maps.\r\n\r\nI tried a slightly more complicated approach, which is around 20% faster, and yet the most expensive method is the `HashSet.addAll`:\r\n\r\n```java\r\n// (assumes the list in reversed order)\r\npublic static Map&lt;String, Object&gt; merge2(List&lt;Map&lt;String, Object&gt;&gt; configs) {\r\n    Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();\r\n    Set&lt;String&gt; allKeys = new HashSet&lt;&gt;();\r\n    for (Map&lt;String, Object&gt; config : configs) {\r\n        allKeys.addAll(config.keySet());\r\n    }\r\n    for (String key : allKeys) {\r\n        if (configs.get(0).get(key) instanceof Map&lt;?, ?&gt;) {\r\n            List&lt;Map&lt;String, Object&gt;&gt; nestedConfigs = new ArrayList&lt;&gt;();\r\n            for (Map&lt;String, Object&gt; config : configs) {\r\n                if (config.get(key) instanceof Map&lt;?, ?&gt;) {\r\n                    nestedConfigs.add((Map&lt;String, Object&gt;) config.get(key));\r\n                }\r\n            }\r\n            result.put(key, merge2(nestedConfigs));\r\n        } else {\r\n            for (Map&lt;String, Object&gt; config : configs) {\r\n                if (config.containsKey(key)) {\r\n                    result.put(key, config.get(key));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n```\r\n\r\nIs there any other approach I could try that could help me squeeze a bit more of performance out of this?\r\n\r\nFor context, the maps are usually huge (hundreds of subtrees) and the nesting level up to fifty sometimes.","title":"How to efficiently merge a list of deeply nested HashMaps?","body":"<p>Suppose I have a list of hashmaps (<code>&lt;String, Object&gt;</code>). Values can be either scalar types or a nested HashMap with the same type.</p>\n<p>I need to merge a list of this maps into a final HashMap, each map in the list has higher precedence than the one before. Also the merge has to be deep: i.e.:</p>\n<pre><code>map1   = {root: {a: a, b: {c: c, d: d}}}\nmap2   = {root: {a: a, b: {c: x}}\nresult = {root: {a: a, b: {c: x, d: d}}}\n</code></pre>\n<p>In the previous example, the sub tree <code>b</code> in <code>map2</code> does not override the whole subtree in <code>map1</code>. It just overrides the leaves that are duplicated.</p>\n<p>The code I have right now looks like this and works ok:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Map&lt;String, Object&gt; merge(List&lt;Map&lt;String, Object&gt;&gt; configs) {\n    return configs.stream()\n            .filter(Objects::nonNull)\n            .reduce(new LinkedHashMap&lt;&gt;(), ConfigMerger::mergeMaps);\n}\n\npublic static Map&lt;String, Object&gt; mergeMaps(Map&lt;String, Object&gt; map, Map&lt;String, Object&gt; other) {\n    Map&lt;String, Object&gt; result = new LinkedHashMap&lt;&gt;(map.size() + other.size());\n    result.putAll(map);\n\n    for (Map.Entry&lt;String, Object&gt; entry : other.entrySet()) {\n        String key = entry.getKey();\n        Object val2 = entry.getValue();\n        Object val1 = result.get(key);\n\n        if (val1 instanceof Map &amp;&amp; val2 instanceof Map) {\n            Map&lt;String, Object&gt; nestedResult = mergeMaps((Map&lt;String, Object&gt;) val1, (Map&lt;String, Object&gt;) val2);\n            result.put(key, nestedResult);\n        } else {\n            result.put(key, val2);\n        }\n    }\n\n    return result;\n}\n</code></pre>\n<p>The only issue is that <code>result.putAll(map);</code> is a bit wasteful. I do that for every nested map in each one of the original maps.</p>\n<p>I tried a slightly more complicated approach, which is around 20% faster, and yet the most expensive method is the <code>HashSet.addAll</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// (assumes the list in reversed order)\npublic static Map&lt;String, Object&gt; merge2(List&lt;Map&lt;String, Object&gt;&gt; configs) {\n    Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();\n    Set&lt;String&gt; allKeys = new HashSet&lt;&gt;();\n    for (Map&lt;String, Object&gt; config : configs) {\n        allKeys.addAll(config.keySet());\n    }\n    for (String key : allKeys) {\n        if (configs.get(0).get(key) instanceof Map&lt;?, ?&gt;) {\n            List&lt;Map&lt;String, Object&gt;&gt; nestedConfigs = new ArrayList&lt;&gt;();\n            for (Map&lt;String, Object&gt; config : configs) {\n                if (config.get(key) instanceof Map&lt;?, ?&gt;) {\n                    nestedConfigs.add((Map&lt;String, Object&gt;) config.get(key));\n                }\n            }\n            result.put(key, merge2(nestedConfigs));\n        } else {\n            for (Map&lt;String, Object&gt; config : configs) {\n                if (config.containsKey(key)) {\n                    result.put(key, config.get(key));\n                    break;\n                }\n            }\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>Is there any other approach I could try that could help me squeeze a bit more of performance out of this?</p>\n<p>For context, the maps are usually huge (hundreds of subtrees) and the nesting level up to fifty sometimes.</p>\n"},{"tags":["java","clojure","javalin"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1686208356,"post_id":76429403,"comment_id":134768298,"body_markdown":"have you read the error message? In the original call you only pass two parameters, in the attempt that doesn&#39;t work, you pass 3","body":"have you read the error message? In the original call you only pass two parameters, in the attempt that doesn&#39;t work, you pass 3"},{"owner":{"account_id":6942061,"reputation":1761,"user_id":5329711,"accept_rate":46,"display_name":"madeinQuant"},"score":0,"creation_date":1686208774,"post_id":76429403,"comment_id":134768379,"body_markdown":"@Stultuske, thank for you reply. I read the error messages, I am not familiar with Clojure, this is why I seek comment how to fix it","body":"@Stultuske, thank for you reply. I read the error messages, I am not familiar with Clojure, this is why I seek comment how to fix it"},{"owner":{"account_id":991688,"reputation":4736,"user_id":1008794,"display_name":"Rulle"},"score":1,"creation_date":1686209224,"post_id":76429403,"comment_id":134768490,"body_markdown":"`Javalin/get` looks like a call to a *static* method. Did you try `(.get app &quot;/&quot; (fn [ctx] (.result ctx &quot;Hello World&quot;)))` instead? You could possibly chain the ops: `(-&gt; (Javalin/create) (.get &quot;/&quot; (fn [ctx] (.result ctx &quot;Hello World&quot;))) (.start 7070))`.","body":"<code>Javalin&#47;get</code> looks like a call to a <i>static</i> method. Did you try <code>(.get app &quot;&#47;&quot; (fn [ctx] (.result ctx &quot;Hello World&quot;)))</code> instead? You could possibly chain the ops: <code>(-&gt; (Javalin&#47;create) (.get &quot;&#47;&quot; (fn [ctx] (.result ctx &quot;Hello World&quot;))) (.start 7070))</code>."}],"answers":[{"comments":[{"owner":{"account_id":311679,"reputation":89831,"user_id":625403,"accept_rate":82,"display_name":"amalloy"},"score":3,"creation_date":1686209521,"post_id":76429535,"comment_id":134768554,"body_markdown":"`Handler` is an interface. Use `reify` for interfaces, and `proxy` only in dire need. Your way works, of course, but `reify` has been better since 2010.","body":"<code>Handler</code> is an interface. Use <code>reify</code> for interfaces, and <code>proxy</code> only in dire need. Your way works, of course, but <code>reify</code> has been better since 2010."},{"owner":{"account_id":6942061,"reputation":1761,"user_id":5329711,"accept_rate":46,"display_name":"madeinQuant"},"score":0,"creation_date":1686281799,"post_id":76429535,"comment_id":134780539,"body_markdown":"amalloy, martin thank you for your comment, Clojure web services; this is a whole new concept to me. I am reading &quot;https://practical.li/clojure-web-services/&quot; to figure out what it is. thank you for your help.","body":"amalloy, martin thank you for your comment, Clojure web services; this is a whole new concept to me. I am reading &quot;<a href=\"https://practical.li/clojure-web-services/\" rel=\"nofollow noreferrer\">practical.li/clojure-web-services</a>&quot; to figure out what it is. thank you for your help."}],"tags":[],"owner":{"account_id":18645516,"reputation":7468,"user_id":13590263,"display_name":"Martin Půda"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1686224082,"creation_date":1686209255,"answer_id":76429535,"question_id":76429403,"body_markdown":"The first issue with your code, is that you are making a call to a non-existent static method of the Javalin class. Your call to `get` approximately translates to:\r\n\r\n```java\r\nJavalin.get(app, &quot;/&quot;, (ctx) -&gt; ctx.result(&quot;Hello World&quot;));\r\n```\r\n\r\nJust as you call `result` on `ctx` with `(.result ctx &quot;Hello World&quot;)`, you need to call `get` the same way: `(.get app &quot;/&quot; (fn ...))`.\r\n\r\nHowever, you will see that you are not getting the appropriate type for the handler function. Use [`reify`][3] to create an instance of [Handler][2] - you just have to add another argument to `handle` (&quot;this&quot;):\r\n```\r\nDependency: [io.javalin/javalin &quot;5.5.0&quot;]\r\n\r\n(ns ...\r\n  (:import (io.javalin Javalin)\r\n           (io.javalin.http Handler))\r\n  (:gen-class))\r\n\r\n(defn -main []\r\n  (doto (Javalin/create)\r\n    (.get &quot;/&quot; (reify Handler\r\n                (handle [_ ctx] (.result ctx &quot;Hello World&quot;))))\r\n    (.start 7070)))\r\n```\r\nYou can also use [`proxy`][1]:\r\n```\r\n(defn -main []\r\n  (doto (Javalin/create)\r\n    (.get &quot;/&quot; (proxy [Handler] []\r\n                (handle [ctx] (.result ctx &quot;Hello World&quot;))))\r\n    (.start 7070)))\r\n```\r\n\r\n\r\n  [1]: https://clojuredocs.org/clojure.core/proxy\r\n  [2]: https://javadoc.io/static/io.javalin/javalin/3.0.0/io/javalin/http/Handler.html\r\n  [3]: https://clojuredocs.org/clojure.core/reify","title":"How to translate a simple web framework in Javalin into Clojure?","body":"<p>The first issue with your code, is that you are making a call to a non-existent static method of the Javalin class. Your call to <code>get</code> approximately translates to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Javalin.get(app, &quot;/&quot;, (ctx) -&gt; ctx.result(&quot;Hello World&quot;));\n</code></pre>\n<p>Just as you call <code>result</code> on <code>ctx</code> with <code>(.result ctx &quot;Hello World&quot;)</code>, you need to call <code>get</code> the same way: <code>(.get app &quot;/&quot; (fn ...))</code>.</p>\n<p>However, you will see that you are not getting the appropriate type for the handler function. Use <a href=\"https://clojuredocs.org/clojure.core/reify\" rel=\"nofollow noreferrer\"><code>reify</code></a> to create an instance of <a href=\"https://javadoc.io/static/io.javalin/javalin/3.0.0/io/javalin/http/Handler.html\" rel=\"nofollow noreferrer\">Handler</a> - you just have to add another argument to <code>handle</code> (&quot;this&quot;):</p>\n<pre><code>Dependency: [io.javalin/javalin &quot;5.5.0&quot;]\n\n(ns ...\n  (:import (io.javalin Javalin)\n           (io.javalin.http Handler))\n  (:gen-class))\n\n(defn -main []\n  (doto (Javalin/create)\n    (.get &quot;/&quot; (reify Handler\n                (handle [_ ctx] (.result ctx &quot;Hello World&quot;))))\n    (.start 7070)))\n</code></pre>\n<p>You can also use <a href=\"https://clojuredocs.org/clojure.core/proxy\" rel=\"nofollow noreferrer\"><code>proxy</code></a>:</p>\n<pre><code>(defn -main []\n  (doto (Javalin/create)\n    (.get &quot;/&quot; (proxy [Handler] []\n                (handle [ctx] (.result ctx &quot;Hello World&quot;))))\n    (.start 7070)))\n</code></pre>\n"}],"owner":{"account_id":6942061,"reputation":1761,"user_id":5329711,"accept_rate":46,"display_name":"madeinQuant"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76429535,"answer_count":1,"score":1,"last_activity_date":1686224082,"creation_date":1686208281,"question_id":76429403,"body_markdown":"There is a simple web framework in Javalin\r\n\r\n    import io.javalin.Javalin;\r\n    \r\n    public class HelloWorld {\r\n        public static void main(String[] args) {\r\n            var app = Javalin.create(/*config*/)\r\n                .get(&quot;/&quot;, ctx -&gt; ctx.result(&quot;Hello World&quot;))\r\n                .start(7070);\r\n        }\r\n    }\r\n\r\nTranslated into Clojure.\r\n=======================\r\n\r\n\r\n    (ns javalin.javalin101)\r\n    \r\n    (import &#39;io.javalin.Javalin)\r\n    \r\n    (defn -main []\r\n      (let [app (Javalin/create)]\r\n        (Javalin/get app &quot;/&quot; (fn [ctx] (.result ctx &quot;Hello World&quot;)))\r\n        (.start app 7070)))\r\n\r\ndeps.edn \r\n========\r\n\r\n    {:paths [&quot;src&quot;]\r\n     :deps\r\n     {org.clojure/clojure {:mvn/version &quot;1.11.1&quot;}\r\n      org.clojure/core.async {:mvn/version &quot;1.6.673&quot;}\r\n      org.clojure/data.json {:mvn/version &quot;2.4.0&quot;}\r\n      clj-time/clj-time {:mvn/version &quot;0.15.2&quot;}\r\n      ;; java \r\n      io.javalin/javalin {:mvn/version &quot;5.5.0&quot;}}}\r\n\r\nWhen I execute with calve-repl, an error encounter \r\n\r\n    ; Syntax error (IllegalArgumentException) compiling . at (src/javalin/javalin101.clj:7:5).\r\n    ; No matching method get found taking 3 args for class io.javalin.Javalin\r\n\r\nPlease feel free to comment how to fix it.\r\n","title":"How to translate a simple web framework in Javalin into Clojure?","body":"<p>There is a simple web framework in Javalin</p>\n<pre><code>import io.javalin.Javalin;\n\npublic class HelloWorld {\n    public static void main(String[] args) {\n        var app = Javalin.create(/*config*/)\n            .get(&quot;/&quot;, ctx -&gt; ctx.result(&quot;Hello World&quot;))\n            .start(7070);\n    }\n}\n</code></pre>\n<h1>Translated into Clojure.</h1>\n<pre><code>(ns javalin.javalin101)\n\n(import 'io.javalin.Javalin)\n\n(defn -main []\n  (let [app (Javalin/create)]\n    (Javalin/get app &quot;/&quot; (fn [ctx] (.result ctx &quot;Hello World&quot;)))\n    (.start app 7070)))\n</code></pre>\n<h1>deps.edn</h1>\n<pre><code>{:paths [&quot;src&quot;]\n :deps\n {org.clojure/clojure {:mvn/version &quot;1.11.1&quot;}\n  org.clojure/core.async {:mvn/version &quot;1.6.673&quot;}\n  org.clojure/data.json {:mvn/version &quot;2.4.0&quot;}\n  clj-time/clj-time {:mvn/version &quot;0.15.2&quot;}\n  ;; java \n  io.javalin/javalin {:mvn/version &quot;5.5.0&quot;}}}\n</code></pre>\n<p>When I execute with calve-repl, an error encounter</p>\n<pre><code>; Syntax error (IllegalArgumentException) compiling . at (src/javalin/javalin101.clj:7:5).\n; No matching method get found taking 3 args for class io.javalin.Javalin\n</code></pre>\n<p>Please feel free to comment how to fix it.</p>\n"},{"tags":["java","windows","spring-boot","sts"],"comments":[{"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"score":1,"creation_date":1617904448,"post_id":67009124,"comment_id":118446988,"body_markdown":"If you can run java inside a terminal, run `java -jar spring-tool-....jar`","body":"If you can run java inside a terminal, run <code>java -jar spring-tool-....jar</code>"},{"owner":{"account_id":555095,"reputation":1782,"user_id":1262187,"accept_rate":18,"display_name":"simar"},"score":0,"creation_date":1686228156,"post_id":67009124,"comment_id":134772136,"body_markdown":"Or just rename, and change extension from &quot;jar&quot; to &quot;zip&quot; and find necessary directory in unzipped sources.","body":"Or just rename, and change extension from &quot;jar&quot; to &quot;zip&quot; and find necessary directory in unzipped sources."}],"answers":[{"tags":[],"owner":{"account_id":15594545,"reputation":160,"user_id":11250492,"display_name":"Prem G"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686224019,"creation_date":1686224019,"answer_id":76431433,"question_id":67009124,"body_markdown":" - Open a terminal in the same directory where jar file is present.\r\n - run `java -jar [jarName].jar`\r\n -  this will extract jar contents in the same directory within a new folder named `sts-4.XX.X.RELEASE`\r\n - go inside that folder and double-click SpringToolSuite4.exe to open STS IDE (Spring Tool Suite - Integrated Development Terminal).\r\n - Start Coding! :)","title":"trying to install SPRING SUITE TOOL(STS) but not able to extract the jar file","body":"<ul>\n<li>Open a terminal in the same directory where jar file is present.</li>\n<li>run <code>java -jar [jarName].jar</code></li>\n<li>this will extract jar contents in the same directory within a new folder named <code>sts-4.XX.X.RELEASE</code></li>\n<li>go inside that folder and double-click SpringToolSuite4.exe to open STS IDE (Spring Tool Suite - Integrated Development Terminal).</li>\n<li>Start Coding! :)</li>\n</ul>\n"}],"owner":{"account_id":20588816,"reputation":519,"user_id":15113029,"display_name":"radhika sharma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1325,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1686224019,"creation_date":1617903295,"question_id":67009124,"body_markdown":"I am very new to java and spring boot. I just need to understand a code in spring boot and for that I am trying to install STS.I tried downloading STS from the site https://spring.io/tools#suite-three which is for windows 64 bit, However, I am not able to extract the jar file and it is seen as below and not the actual file.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI understand the pre requisite for installing STS is java 1.8 which I did the below\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/O8EBk.png\r\n\r\nI also added PATH same as CLASSPATH\r\n\r\nstill not able to extract STS.\r\n\r\nCan anyone help please?\r\n\r\n  [2]: https://i.stack.imgur.com/lvq0M.png","title":"trying to install SPRING SUITE TOOL(STS) but not able to extract the jar file","body":"<p>I am very new to java and spring boot. I just need to understand a code in spring boot and for that I am trying to install STS.I tried downloading STS from the site <a href=\"https://spring.io/tools#suite-three\" rel=\"nofollow noreferrer\">https://spring.io/tools#suite-three</a> which is for windows 64 bit, However, I am not able to extract the jar file and it is seen as below and not the actual file.</p>\n<p><a href=\"https://i.stack.imgur.com/O8EBk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O8EBk.png\" alt=\"enter image description here\" /></a></p>\n<p>I understand the pre requisite for installing STS is java 1.8 which I did the below\n<a href=\"https://i.stack.imgur.com/lvq0M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lvq0M.png\" alt=\"enter image description here\" /></a></p>\n<p>I also added PATH same as CLASSPATH</p>\n<p>still not able to extract STS.</p>\n<p>Can anyone help please?</p>\n"},{"tags":["java","java-17"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1686223715,"post_id":76431337,"comment_id":134771138,"body_markdown":"On linux you can use the &quot;find&quot; program.","body":"On linux you can use the &quot;find&quot; program."},{"owner":{"account_id":555095,"reputation":1782,"user_id":1262187,"accept_rate":18,"display_name":"simar"},"score":0,"creation_date":1686228059,"post_id":76431337,"comment_id":134772114,"body_markdown":"I would add into here the &quot;tree&quot;, &quot;grep&quot; utilities (linux macos)","body":"I would add into here the &quot;tree&quot;, &quot;grep&quot; utilities (linux macos)"}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686223925,"creation_date":1686223539,"answer_id":76431365,"question_id":76431337,"body_markdown":"The top-level directories of Java&#39;s `src.zip` are - since Java 9 - the modules. The package `java.lang` is part of the module `java.base`. You can find the sources of classes in `java.lang` in `java.base/java/lang` inside the zip.\r\n\r\nFor module names, the directory name is the full module name, while for package names, each `.` separated part represents a nested directory (`java.lang` -&gt; `java/lang`, `java.lang.annotation` -&gt; `java/lang/annotation`, etc.). For example, the sources of `java.lang.String` are in the file `java.base/java/lang/String.java`\r\n\r\nDepending on what your end goal is, it might make more sense to clone the GitHub repository of OpenJDK:\r\n\r\n* https://github.com/openjdk/jdk17u for current state of Java 17\r\n* https://github.com/openjdk/jdk for mainline development of Java","title":"How to check source code libraries of openJDK?","body":"<p>The top-level directories of Java's <code>src.zip</code> are - since Java 9 - the modules. The package <code>java.lang</code> is part of the module <code>java.base</code>. You can find the sources of classes in <code>java.lang</code> in <code>java.base/java/lang</code> inside the zip.</p>\n<p>For module names, the directory name is the full module name, while for package names, each <code>.</code> separated part represents a nested directory (<code>java.lang</code> -&gt; <code>java/lang</code>, <code>java.lang.annotation</code> -&gt; <code>java/lang/annotation</code>, etc.). For example, the sources of <code>java.lang.String</code> are in the file <code>java.base/java/lang/String.java</code></p>\n<p>Depending on what your end goal is, it might make more sense to clone the GitHub repository of OpenJDK:</p>\n<ul>\n<li><a href=\"https://github.com/openjdk/jdk17u\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk17u</a> for current state of Java 17</li>\n<li><a href=\"https://github.com/openjdk/jdk\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk</a> for mainline development of Java</li>\n</ul>\n"}],"owner":{"account_id":27826516,"reputation":27,"user_id":21291698,"display_name":"Lucy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"accepted_answer_id":76431365,"answer_count":1,"score":-1,"last_activity_date":1686223925,"creation_date":1686223387,"question_id":76431337,"body_markdown":"I have installed openJDK 17. Then I have unzipped file lib/src.zip. There are a lot of directories and I cannot find packages like java.lang or java.util. How can I find it?\r\n\r\nI have tried to use search and so on. Also, I know that I can use IntelJ or Eclipse for it, but I want to do it without IDEs","title":"How to check source code libraries of openJDK?","body":"<p>I have installed openJDK 17. Then I have unzipped file lib/src.zip. There are a lot of directories and I cannot find packages like java.lang or java.util. How can I find it?</p>\n<p>I have tried to use search and so on. Also, I know that I can use IntelJ or Eclipse for it, but I want to do it without IDEs</p>\n"},{"tags":["java","android","gradle"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686223598,"post_id":76431341,"comment_id":134771116,"body_markdown":"Don&#39;t. Most logging frameworks have checks you can do like `isDebugEnabled`. Calling those consistently is enough.","body":"Don&#39;t. Most logging frameworks have checks you can do like <code>isDebugEnabled</code>. Calling those consistently is enough."},{"owner":{"account_id":251690,"reputation":695,"user_id":1014752,"display_name":"Ramsay Domloge"},"score":0,"creation_date":1686224309,"post_id":76431341,"comment_id":134771251,"body_markdown":"Why not use logger configuration to turn off logging instead?","body":"Why not use logger configuration to turn off logging instead?"}],"owner":{"account_id":28779710,"reputation":1,"user_id":22041571,"display_name":"Gapcoder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686223610,"creation_date":1686223425,"question_id":76431341,"body_markdown":"I usually write codes with some log method calls. As you know, it is conveniently to debug.\r\n\r\n```\r\nvoid action(){\r\n    Log.i(&quot;TAG&quot;,&quot;something&quot;);\r\n    ...\r\n}\r\n```\r\n\r\nI want to use ASM gradle plugin to automatically delete those log method calls  and their parameters.\r\n\r\nOf course，I can return null in a `MethodVisitor` when calling the log method. But I don not know how to delete those useless parameters because I can not confirm these code boundary.","title":"how can delete a method call such as log.i completely with ASM？","body":"<p>I usually write codes with some log method calls. As you know, it is conveniently to debug.</p>\n<pre><code>void action(){\n    Log.i(&quot;TAG&quot;,&quot;something&quot;);\n    ...\n}\n</code></pre>\n<p>I want to use ASM gradle plugin to automatically delete those log method calls  and their parameters.</p>\n<p>Of course，I can return null in a <code>MethodVisitor</code> when calling the log method. But I don not know how to delete those useless parameters because I can not confirm these code boundary.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":434040,"reputation":17358,"user_id":819742,"accept_rate":69,"display_name":"randominstanceOfLivingThing"},"score":0,"creation_date":1407814021,"post_id":25248494,"comment_id":39349852,"body_markdown":"You need to look at the effective POM to check the final dependencies.","body":"You need to look at the effective POM to check the final dependencies."}],"answers":[{"comments":[{"owner":{"account_id":2823210,"reputation":508,"user_id":2426445,"display_name":"kosgeinsky"},"score":0,"creation_date":1559655894,"post_id":25251169,"comment_id":99483919,"body_markdown":"This doesn&#39;t work now (for me at least for Springboot 2.0.5) if I don&#39;t explicitly denote in the `executions` tag that the plugin must run in `repackage` phase.","body":"This doesn&#39;t work now (for me at least for Springboot 2.0.5) if I don&#39;t explicitly denote in the <code>executions</code> tag that the plugin must run in <code>repackage</code> phase."}],"tags":[],"owner":{"account_id":3404429,"reputation":507,"user_id":2855872,"accept_rate":67,"display_name":"tleveque"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1407786402,"creation_date":1407786402,"answer_id":25251169,"question_id":25248494,"body_markdown":"The problem was that my parent pom was dependent on Spring 3.2.5.\r\nAnd I find out that Spring-Boot 1.5.x needs at least Spring 4.\r\nThis is not clearly defined on the Spring-Boot page.","title":"Using Spring Boot without the parent POM doesn&#39;t work","body":"<p>The problem was that my parent pom was dependent on Spring 3.2.5.\nAnd I find out that Spring-Boot 1.5.x needs at least Spring 4.\nThis is not clearly defined on the Spring-Boot page.</p>\n"},{"comments":[{"owner":{"account_id":485709,"reputation":346,"user_id":902182,"accept_rate":25,"display_name":"khong07"},"score":0,"creation_date":1492678826,"post_id":40117663,"comment_id":74083026,"body_markdown":"you must specify the version of spring in the maven properties, without it, it doesn&#39;t work.\n`&lt;spring.version&gt;a_version_of_spring&lt;/spring.version&gt;`","body":"you must specify the version of spring in the maven properties, without it, it doesn&#39;t work. <code>&lt;spring.version&gt;a_version_of_spring&lt;&#47;spring.version&gt;</code>"}],"tags":[],"owner":{"account_id":419303,"reputation":161,"user_id":796398,"accept_rate":33,"display_name":"Chethan"},"comment_count":1,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1686223541,"creation_date":1476823151,"answer_id":40117663,"question_id":25248494,"body_markdown":"I may be late but I am sure it will be helpful to everyone who wants to run **SpringBoot without inheriting from parent**. It was very frustrating to figure the following but it finally it worked for me!\r\n\r\nBasically,\r\n\r\n 1. Intellij maven auto-import was turned off. Enabled it.\r\n 2. I have to add spring-boot dependencies manually. i.e if you just inherit spring-boot as parent, you will be given a default set of dependencies to work on. But when you don&#39;t inherit you have to declare those dependencies manually in pom.xml\r\n 3. If you observe pom.xml, &quot;spring-boot-dependencies&quot; has to be in its own `&lt;dependencyManagement&gt;` tag. If you combine all of the dependencies in a single `&lt;dependencies&gt;`, then references are lost in the code!\r\n 4. See the following example:\r\n\r\npom.xml\r\n&lt;!-- language: xml --&gt;\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;parent&gt;\r\n            &lt;artifactId&gt;Chethan&lt;/artifactId&gt;\r\n            &lt;groupId&gt;groupId&lt;/groupId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;artifactId&gt;myspringbootwithoutparent&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;!-- Import dependency management from Spring Boot --&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.4.1.RELEASE&lt;/version&gt;\r\n                    &lt;type&gt;pom&lt;/type&gt;\r\n                    &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-batch&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt; &lt;/project&gt;\r\n\r\n\r\nApplicationWithoutParentPom.java\r\n&lt;!-- language: java--&gt;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    /**\r\n     * Created by chethanshankar on 10/18/16.\r\n     */\r\n    @RestController\r\n    @EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\r\n    public class ApplicationWithoutParentPom {\r\n        @RequestMapping(&quot;/&quot;)\r\n        String home() {\r\n            return &quot;Hello World without SPRING BOOT AS PARENT!!!&quot;;\r\n        }\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            SpringApplication.run(ApplicationWithoutParentPom.class, args);\r\n        }\r\n    }\r\n\r\n\r\n### Errors\r\n\r\n#### java: error: release version 5 not supported\r\n\r\nWhen compiling the project you may get this error\r\n\r\n```\r\njava: error: release version 5 not supported\r\n\r\nModule todolist SDK 17 does not support source version 1.5. \r\nPossible solutions:\r\n- Downgrade Project SDK in settings to 1.5 or compatible. Open project settings.\r\n- Upgrade language version in Maven build file to 17. Update pom.xml and reload the project.\r\n```\r\n\r\nYou can fix by adding inside the `&lt;properties&gt;` the maven compiler version, in my case for Java 17\r\n&lt;!-- language: xml --&gt;\r\n```\r\n &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n&lt;/properties&gt;\r\n```\r\n\r\n\r\n","title":"Using Spring Boot without the parent POM doesn&#39;t work","body":"<p>I may be late but I am sure it will be helpful to everyone who wants to run <strong>SpringBoot without inheriting from parent</strong>. It was very frustrating to figure the following but it finally it worked for me!</p>\n<p>Basically,</p>\n<ol>\n<li>Intellij maven auto-import was turned off. Enabled it.</li>\n<li>I have to add spring-boot dependencies manually. i.e if you just inherit spring-boot as parent, you will be given a default set of dependencies to work on. But when you don't inherit you have to declare those dependencies manually in pom.xml</li>\n<li>If you observe pom.xml, &quot;spring-boot-dependencies&quot; has to be in its own <code>&lt;dependencyManagement&gt;</code> tag. If you combine all of the dependencies in a single <code>&lt;dependencies&gt;</code>, then references are lost in the code!</li>\n<li>See the following example:</li>\n</ol>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;Chethan&lt;/artifactId&gt;\n        &lt;groupId&gt;groupId&lt;/groupId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;artifactId&gt;myspringbootwithoutparent&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;!-- Import dependency management from Spring Boot --&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;1.4.1.RELEASE&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-batch&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt; &lt;/project&gt;\n</code></pre>\n<p>ApplicationWithoutParentPom.java</p>\n\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n/**\n * Created by chethanshankar on 10/18/16.\n */\n@RestController\n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\npublic class ApplicationWithoutParentPom {\n    @RequestMapping(&quot;/&quot;)\n    String home() {\n        return &quot;Hello World without SPRING BOOT AS PARENT!!!&quot;;\n    }\n\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(ApplicationWithoutParentPom.class, args);\n    }\n}\n</code></pre>\n<h3>Errors</h3>\n<h4>java: error: release version 5 not supported</h4>\n<p>When compiling the project you may get this error</p>\n<pre><code>java: error: release version 5 not supported\n\nModule todolist SDK 17 does not support source version 1.5. \nPossible solutions:\n- Downgrade Project SDK in settings to 1.5 or compatible. Open project settings.\n- Upgrade language version in Maven build file to 17. Update pom.xml and reload the project.\n</code></pre>\n<p>You can fix by adding inside the <code>&lt;properties&gt;</code> the maven compiler version, in my case for Java 17</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n"}],"owner":{"account_id":3404429,"reputation":507,"user_id":2855872,"accept_rate":67,"display_name":"tleveque"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11808,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":25251169,"answer_count":2,"score":5,"last_activity_date":1686223541,"creation_date":1407776215,"question_id":25248494,"body_markdown":"I am trying the simple sample from the SpringBoot QuickStart (http://projects.spring.io/spring-boot/#quick-start). \r\nUsing the spring-boot-starter-parent as the parent is working fine. I can run the sample without any problems.\r\nBut I absolutely need to use my own parent pom. So I read the documentation : \r\nhttp://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#using-boot-maven-without-a-parent\r\n\r\nI tried it. It compiled fine. But crashes at run time.\r\nHere is my configuration.\r\nIn my parent pom:\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n        ....\r\n            &lt;dependency&gt;\r\n                &lt;!-- Import dependency management from Spring Boot --&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1.5.RELEASE&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        ....\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\nIn my pom:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nBut when I run the application, I get this:\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;\r\n    2014-08-11 12:50:29.275 ERROR 28474 --- [           main] o.s.boot.SpringApplication               : Application startup failed\r\n\r\njava.lang.IllegalStateException: Failed to introspect annotations: class com.imetrik.oaas.tool.application.springboottest.SampleController.SampleController\r\n\tat org.springframework.core.annotation.AnnotatedElementUtils.process(AnnotatedElementUtils.java:169)\r\n\tat org.springframework.core.annotation.AnnotatedElementUtils.isAnnotated(AnnotatedElementUtils.java:75)\r\n\tat org.springframework.core.type.StandardAnnotationMetadata.isAnnotated(StandardAnnotationMetadata.java:102)\r\n\tat org.springframework.context.annotation.AnnotatedBeanDefinitionReader.registerBean(AnnotatedBeanDefinitionReader.java:138)\r\n\tat org.springframework.context.annotation.AnnotatedBeanDefinitionReader.registerBean(AnnotatedBeanDefinitionReader.java:128)\r\n\tat org.springframework.context.annotation.AnnotatedBeanDefinitionReader.register(AnnotatedBeanDefinitionReader.java:123)\r\n\tat org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:159)\r\n\tat org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:135)\r\n\tat org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:127)\r\n\tat org.springframework.boot.SpringApplication.load(SpringApplication.java:620)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:314)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:952)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:941)\r\n\tat com.imetrik.oaas.tool.application.springboottest.SampleController.SampleController.main(SampleController.java:25)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)\r\nCaused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy\r\n\tat sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:673)\r\n\tat sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:480)\r\n\tat sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:306)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:241)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:88)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:70)\r\n\tat java.lang.Class.initAnnotationsIfNecessary(Class.java:3178)\r\n\tat java.lang.Class.getAnnotations(Class.java:3158)\r\n\tat org.springframework.core.annotation.AnnotatedElementUtils.doProcess(AnnotatedElementUtils.java:195)\r\n\tat org.springframework.core.annotation.AnnotatedElementUtils.doProcess(AnnotatedElementUtils.java:212)\r\n\tat org.springframework.core.annotation.AnnotatedElementUtils.process(AnnotatedElementUtils.java:165)\r\n\t... 18 common frames omitted\r\n\r\nException in thread &quot;main&quot; java.lang.IllegalStateException: Failed to introspect annotations: class com.imetrik.oaas.tool.application.springboottest.SampleController.SampleController\r\n\tat org.springframework.core.annotation.AnnotatedElementUtils.process(AnnotatedElementUtils.java:169)\r\n\tat org.springframework.core.annotation.AnnotatedElementUtils.isAnnotated(AnnotatedElementUtils.java:75)\r\n\tat org.springframework.core.type.StandardAnnotationMetadata.isAnnotated(StandardAnnotationMetadata.java:102)\r\n\tat org.springframework.context.annotation.AnnotatedBeanDefinitionReader.registerBean(AnnotatedBeanDefinitionReader.java:138)\r\n\tat org.springframework.context.annotation.AnnotatedBeanDefinitionReader.registerBean(AnnotatedBeanDefinitionReader.java:128)\r\n\tat org.springframework.context.annotation.AnnotatedBeanDefinitionReader.register(AnnotatedBeanDefinitionReader.java:123)\r\n\tat org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:159)\r\n\tat org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:135)\r\n\tat org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:127)\r\n\tat org.springframework.boot.SpringApplication.load(SpringApplication.java:620)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:314)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:952)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:941)\r\n\tat com.imetrik.oaas.tool.application.springboottest.SampleController.SampleController.main(SampleController.java:25)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)\r\nCaused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy\r\n\tat sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:673)\r\n\tat sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:480)\r\n\tat sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:306)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:241)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:88)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:70)\r\n\tat java.lang.Class.initAnnotationsIfNecessary(Class.java:3178)\r\n\tat java.lang.Class.getAnnotations(Class.java:3158)\r\n\tat org.springframework.core.annotation.AnnotatedElementUtils.doProcess(AnnotatedElementUtils.java:195)\r\n\tat org.springframework.core.annotation.AnnotatedElementUtils.doProcess(AnnotatedElementUtils.java:212)\r\n\tat org.springframework.core.annotation.AnnotatedElementUtils.process(AnnotatedElementUtils.java:165)\r\n\t... 18 more\r\n\r\nProcess finished with exit code 1\r\n&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nI have no clue how to solve this. I tried putting the dependencyManagement directly in my pom (not in the parent). Same result.\r\nI did search here on stackoverflow and elsewhere, but I cannot find a single working example.\r\nWe are using Maven 3.0.4 and Java 1.7U51","title":"Using Spring Boot without the parent POM doesn&#39;t work","body":"<p>I am trying the simple sample from the SpringBoot QuickStart (<a href=\"http://projects.spring.io/spring-boot/#quick-start\" rel=\"nofollow noreferrer\">http://projects.spring.io/spring-boot/#quick-start</a>). \nUsing the spring-boot-starter-parent as the parent is working fine. I can run the sample without any problems.\nBut I absolutely need to use my own parent pom. So I read the documentation : \n<a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#using-boot-maven-without-a-parent\" rel=\"nofollow noreferrer\">http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#using-boot-maven-without-a-parent</a></p>\n\n<p>I tried it. It compiled fine. But crashes at run time.\nHere is my configuration.\nIn my parent pom:</p>\n\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n    ....\n        &lt;dependency&gt;\n            &lt;!-- Import dependency management from Spring Boot --&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;1.1.5.RELEASE&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    ....\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n\n<p>In my pom:</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>But when I run the application, I get this:</p>\n\n<pre>\n<code>\n    2014-08-11 12:50:29.275 ERROR 28474 --- [           main] o.s.boot.SpringApplication               : Application startup failed\n\njava.lang.IllegalStateException: Failed to introspect annotations: class com.imetrik.oaas.tool.application.springboottest.SampleController.SampleController\n    at org.springframework.core.annotation.AnnotatedElementUtils.process(AnnotatedElementUtils.java:169)\n    at org.springframework.core.annotation.AnnotatedElementUtils.isAnnotated(AnnotatedElementUtils.java:75)\n    at org.springframework.core.type.StandardAnnotationMetadata.isAnnotated(StandardAnnotationMetadata.java:102)\n    at org.springframework.context.annotation.AnnotatedBeanDefinitionReader.registerBean(AnnotatedBeanDefinitionReader.java:138)\n    at org.springframework.context.annotation.AnnotatedBeanDefinitionReader.registerBean(AnnotatedBeanDefinitionReader.java:128)\n    at org.springframework.context.annotation.AnnotatedBeanDefinitionReader.register(AnnotatedBeanDefinitionReader.java:123)\n    at org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:159)\n    at org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:135)\n    at org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:127)\n    at org.springframework.boot.SpringApplication.load(SpringApplication.java:620)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:314)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:952)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:941)\n    at com.imetrik.oaas.tool.application.springboottest.SampleController.SampleController.main(SampleController.java:25)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)\nCaused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy\n    at sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:673)\n    at sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:480)\n    at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:306)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:241)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:88)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:70)\n    at java.lang.Class.initAnnotationsIfNecessary(Class.java:3178)\n    at java.lang.Class.getAnnotations(Class.java:3158)\n    at org.springframework.core.annotation.AnnotatedElementUtils.doProcess(AnnotatedElementUtils.java:195)\n    at org.springframework.core.annotation.AnnotatedElementUtils.doProcess(AnnotatedElementUtils.java:212)\n    at org.springframework.core.annotation.AnnotatedElementUtils.process(AnnotatedElementUtils.java:165)\n    ... 18 common frames omitted\n\nException in thread \"main\" java.lang.IllegalStateException: Failed to introspect annotations: class com.imetrik.oaas.tool.application.springboottest.SampleController.SampleController\n    at org.springframework.core.annotation.AnnotatedElementUtils.process(AnnotatedElementUtils.java:169)\n    at org.springframework.core.annotation.AnnotatedElementUtils.isAnnotated(AnnotatedElementUtils.java:75)\n    at org.springframework.core.type.StandardAnnotationMetadata.isAnnotated(StandardAnnotationMetadata.java:102)\n    at org.springframework.context.annotation.AnnotatedBeanDefinitionReader.registerBean(AnnotatedBeanDefinitionReader.java:138)\n    at org.springframework.context.annotation.AnnotatedBeanDefinitionReader.registerBean(AnnotatedBeanDefinitionReader.java:128)\n    at org.springframework.context.annotation.AnnotatedBeanDefinitionReader.register(AnnotatedBeanDefinitionReader.java:123)\n    at org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:159)\n    at org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:135)\n    at org.springframework.boot.BeanDefinitionLoader.load(BeanDefinitionLoader.java:127)\n    at org.springframework.boot.SpringApplication.load(SpringApplication.java:620)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:314)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:952)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:941)\n    at com.imetrik.oaas.tool.application.springboottest.SampleController.SampleController.main(SampleController.java:25)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)\nCaused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy\n    at sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:673)\n    at sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:480)\n    at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:306)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:241)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:88)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:70)\n    at java.lang.Class.initAnnotationsIfNecessary(Class.java:3178)\n    at java.lang.Class.getAnnotations(Class.java:3158)\n    at org.springframework.core.annotation.AnnotatedElementUtils.doProcess(AnnotatedElementUtils.java:195)\n    at org.springframework.core.annotation.AnnotatedElementUtils.doProcess(AnnotatedElementUtils.java:212)\n    at org.springframework.core.annotation.AnnotatedElementUtils.process(AnnotatedElementUtils.java:165)\n    ... 18 more\n\nProcess finished with exit code 1\n</code>\n</pre>\n\n<p>I have no clue how to solve this. I tried putting the dependencyManagement directly in my pom (not in the parent). Same result.\nI did search here on stackoverflow and elsewhere, but I cannot find a single working example.\nWe are using Maven 3.0.4 and Java 1.7U51</p>\n"},{"tags":["java","android","linux","appium","adb"],"answers":[{"tags":[],"owner":{"account_id":27500887,"reputation":1,"user_id":20984626,"display_name":"Алексей Демиденко"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674199359,"creation_date":1674199359,"answer_id":75180888,"question_id":75086752,"body_markdown":"As a result, the problem was in the VM settings and, unfortunately, it was not possible to overcome this problem, it was decided to run tests on a physical machine as a separate agent on team city(\r\nGood luck with testing!)","title":"Error executing adbExec. Original error: &#39;Command &#39;adb -P 5037 -s emulator-5554 shell getprop ro.build.version.sdk&#39; timed out after 60000ms&#39;","body":"<p>As a result, the problem was in the VM settings and, unfortunately, it was not possible to overcome this problem, it was decided to run tests on a physical machine as a separate agent on team city(\nGood luck with testing!)</p>\n"}],"owner":{"account_id":27500887,"reputation":1,"user_id":20984626,"display_name":"Алексей Демиденко"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686223348,"creation_date":1673457302,"question_id":75086752,"body_markdown":"When I run the UI autotest, I keep getting an error: &quot;Error executing adbExec&quot;, on various adb commands. \r\nI will be glad for any help!\r\n(Attached logs of one of the errors from appium server)\r\n\r\n```\r\n[Appium] Welcome to Appium v1.22.3\r\n[Appium] Non-default server args:\r\n[Appium]   port: 4724\r\n[Appium] Appium REST http interface listener started on 0.0.0.0:4724\r\n[HTTP] --&gt; GET /wd/hub/status\r\n[HTTP] {}\r\n[debug] [GENERIC] Calling AppiumDriver.getStatus() with args: []\r\n[debug] [GENERIC] Responding to client with driver.getStatus() result: {&quot;build&quot;:{&quot;version&quot;:&quot;1.22.3&quot;}}\r\n[HTTP] &lt;-- GET /wd/hub/status 200 10 ms - 68\r\n[HTTP]\r\n[debug] [HTTP] Request idempotency key: 139d89ca-1ba4-4fca-b461-e4e84d24e12c\r\n[HTTP] --&gt; POST /wd/hub/session\r\n[HTTP] {&quot;capabilities&quot;:{&quot;firstMatch&quot;:[{}],&quot;alwaysMatch&quot;:{&quot;appium:adbExecTimeout&quot;:60000,&quot;appium:app&quot;:&quot;/home/user/workspace/ui-tests/src/test/java/app/test.apk&quot;,&quot;appium:appPackage&quot;:&quot;org.test.debug_test&quot;,&quot;appium:automationName&quot;:&quot;UIAutomator2&quot;,&quot;appium:deviceName&quot;:&quot;Pixel 3 API 31&quot;,&quot;appium:eventTimings&quot;:true,&quot;appium:noReset&quot;:true,&quot;appium:platformVersion&quot;:&quot;12&quot;,&quot;appium:skipUnlock&quot;:true,&quot;appium:udid&quot;:&quot;emulator-5554&quot;,&quot;platformName&quot;:&quot;android&quot;}}}\r\n[debug] [W3C] Calling AppiumDriver.createSession() with args: [null,null,{&quot;firstMatch&quot;:[{}],&quot;alwaysMatch&quot;:{&quot;appium:adbExecTimeout&quot;:60000,&quot;appium:app&quot;:&quot;/home/user/workspace/ui-tests/src/test/java/app/test.apk&quot;,&quot;appium:appPackage&quot;:&quot;org.test.debug_test&quot;,&quot;appium:automationName&quot;:&quot;UIAutomator2&quot;,&quot;appium:deviceName&quot;:&quot;Pixel 3 API 31&quot;,&quot;appium:eventTimings&quot;:true,&quot;appium:noReset&quot;:true,&quot;appium:platformVersion&quot;:&quot;12&quot;,&quot;appium:skipUnlock&quot;:true,&quot;appium:udid&quot;:&quot;emulator-5554&quot;,&quot;platformName&quot;:&quot;android&quot;}}]\r\n[debug] [BaseDriver] Event &#39;newSessionRequested&#39; logged at 1673453270062 (19:07:50 GMT+0300 (Moscow Standard Time))\r\n[Appium] Appium v1.22.3 creating new AndroidUiautomator2Driver (v1.70.1) session\r\n[debug] [BaseDriver] Creating session with W3C capabilities: {\r\n[debug] [BaseDriver]   &quot;alwaysMatch&quot;: {\r\n[debug] [BaseDriver]     &quot;platformName&quot;: &quot;android&quot;,\r\n[debug] [BaseDriver]     &quot;appium:adbExecTimeout&quot;: 60000,\r\n[debug] [BaseDriver]     &quot;appium:app&quot;: &quot;/home/user/workspace/ui-tests/src/test/java/app/test.apk&quot;,\r\n[debug] [BaseDriver]     &quot;appium:appPackage&quot;: &quot;org.test.debug_test&quot;,\r\n[debug] [BaseDriver]     &quot;appium:automationName&quot;: &quot;UIAutomator2&quot;,\r\n[debug] [BaseDriver]     &quot;appium:deviceName&quot;: &quot;Pixel 3 API 31&quot;,\r\n[debug] [BaseDriver]     &quot;appium:eventTimings&quot;: true,\r\n[debug] [BaseDriver]     &quot;appium:noReset&quot;: true,\r\n[debug] [BaseDriver]     &quot;appium:platformVersion&quot;: &quot;12&quot;,\r\n[debug] [BaseDriver]     &quot;appium:skipUnlock&quot;: true,\r\n[debug] [BaseDriver]     &quot;appium:udid&quot;: &quot;emulator-5554&quot;\r\n[debug] [BaseDriver]   },\r\n[debug] [BaseDriver]   &quot;firstMatch&quot;: [\r\n[debug] [BaseDriver]     {}\r\n[debug] [BaseDriver]   ]\r\n[debug] [BaseDriver] }\r\n[BaseDriver] Session created with session id: 355f9950-3bad-4c19-a44a-1770b3280b2b\r\n[BaseDriver] Using local app &#39;/home/user/workspace/ui-tests/src/test/java/app/test.apk&#39;\r\n[debug] [UiAutomator2] Checking whether app is actually present\r\n[ADB] Found 2 &#39;build-tools&#39; folders under &#39;/home/user/dev/Android/Sdk&#39; (newest first):\r\n[ADB]     /home/user/dev/Android/Sdk/build-tools/33.0.1\r\n[ADB]     /home/user/dev/Android/Sdk/build-tools/30.0.3\r\n[ADB] Using &#39;adb&#39; from &#39;/home/user/dev/Android/Sdk/platform-tools/adb&#39;\r\n[debug] [ADB] Running &#39;/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 start-server&#39;\r\n[AndroidDriver] Retrieving device list\r\n[debug] [ADB] Trying to find a connected android device\r\n[debug] [ADB] Getting connected devices\r\n[debug] [ADB] Connected devices: [{&quot;udid&quot;:&quot;emulator-5554&quot;,&quot;state&quot;:&quot;device&quot;}]\r\n[AndroidDriver] Using device: emulator-5554\r\n[ADB] Using &#39;adb&#39; from &#39;/home/user/dev/Android/Sdk/platform-tools/adb&#39;\r\n[debug] [ADB] Running &#39;/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 start-server&#39;\r\n[debug] [ADB] Setting device id to emulator-5554\r\n[debug] [ADB] Running &#39;/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell getprop ro.build.version.sdk&#39;\r\n[debug] [UiAutomator2] Deleting UiAutomator2 session\r\n[debug] [ADB] Running &#39;/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell am force-stop org.test.debug_test&#39;\r\n[UiAutomator2] Unable to force stop app: Error executing adbExec. Original error: &#39;Command &#39;/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell am force-stop org.test.debug_test&#39; timed out after 60000ms&#39;. Try to increase the 60000ms adb execution timeout represented by &#39;adbExecTimeout&#39; capability\r\n[debug] [ADB] Running &#39;/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell getprop ro.build.version.sdk&#39;\r\n[debug] [BaseDriver] Event &#39;newSessionStarted&#39; logged at 1673453450427 (19:10:50 GMT+0300 (Moscow Standard Time))\r\n[debug] [W3C] Encountered internal error running command: Error: Error getting device API level. Original error: Error executing adbExec. Original error: &#39;Command &#39;/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell getprop ro.build.version.sdk&#39; timed out after 60000ms&#39;. Try to increase the 60000ms adb execution timeout represented by &#39;adbExecTimeout&#39; capability\r\n[debug] [W3C]     at ADB.getApiLevel (/usr/lib/node_modules/appium/node_modules/appium-adb/lib/tools/adb-commands.js:159:13)\r\n[debug] [W3C]     at AndroidUiautomator2Driver.deleteSession (/usr/lib/node_modules/appium/node_modules/appium-uiautomator2-driver/lib/driver.js:671:11)\r\n[debug] [W3C]     at AndroidUiautomator2Driver.createSession (/usr/lib/node_modules/appium/node_modules/appium-uiautomator2-driver/lib/driver.js:238:7)\r\n[debug] [W3C]     at AppiumDriver.createSession (/usr/lib/node_modules/appium/lib/appium.js:387:35)\r\n[HTTP] &lt;-- POST /wd/hub/session 500 180448 ms - 1145\r\n[HTTP]\r\n[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 229.336 s &lt;&lt;&lt; FAILURE! - in org.ui.tests.JustTest\r\n[ERROR] org.ui.tests.JustTest  Time elapsed: 229.332 s  &lt;&lt;&lt; ERROR!\r\norg.openqa.selenium.SessionNotCreatedException:\r\nCould not start a new session. Response code 500. Message: An unknown server-side error occurred while processing the command. Original error: Error getting device API level. Original error: Error executing adbExec. Original error: &#39;Command &#39;/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell getprop ro.build.version.sdk&#39; timed out after 60000ms&#39;. Try to increase the 60000ms adb execution timeout represented by &#39;adbExecTimeout&#39; capability\r\nBuild info: version: &#39;4.7.2&#39;, revision: &#39;4d4020c3b7&#39;\r\nSystem info: os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;5.4.0-136-generic&#39;, java.version: &#39;11.0.17&#39;\r\nDriver info: io.appium.java_client.AppiumDriver\r\nCommand: [null, newSession {capabilities=[{appium:noReset=true, appium:udid=emulator-5554, appium:adbExecTimeout=60000, appium:eventTimings=true, appium:skipUnlock=true, appium:deviceName=Pixel 3 API 31, platformName=ANDROID, appium:automationName=UIAutomator2, appium:app=/home/user/workspace/ui-tests/src/test/java/app/test.apk, appium:platformVersion=12, appium:appPackage=org.test.debug_test}], desiredCapabilities=Capabilities {appium:adbExecTimeout: 60000, appium:app: /home/user/workspace/..., appium:appPackage: org.test.debug_test, appium:automationName: UIAutomator2, appium:deviceName: Pixel 3 API 31, appium:eventTimings: true, appium:noReset: true, appium:platformVersion: 12, appium:skipUnlock: true, appium:udid: emulator-5554, platformName: ANDROID}}]\r\nCapabilities {}\r\n        at org.ui.tests.JustTest.setUp(JustTest.java:33)\r\n```\r\n\r\nTried different adb (33.0.2, 33.0.3, 28.0.2) versions and different emulators API (28, 29, 30, 31) versions, but nothing helped I just keep getting an errors.\r\nOn local Windows machine tests run successfully, error reproduced on Linux VM with kvm enabled","title":"Error executing adbExec. Original error: &#39;Command &#39;adb -P 5037 -s emulator-5554 shell getprop ro.build.version.sdk&#39; timed out after 60000ms&#39;","body":"<p>When I run the UI autotest, I keep getting an error: &quot;Error executing adbExec&quot;, on various adb commands.\nI will be glad for any help!\n(Attached logs of one of the errors from appium server)</p>\n<pre><code>[Appium] Welcome to Appium v1.22.3\n[Appium] Non-default server args:\n[Appium]   port: 4724\n[Appium] Appium REST http interface listener started on 0.0.0.0:4724\n[HTTP] --&gt; GET /wd/hub/status\n[HTTP] {}\n[debug] [GENERIC] Calling AppiumDriver.getStatus() with args: []\n[debug] [GENERIC] Responding to client with driver.getStatus() result: {&quot;build&quot;:{&quot;version&quot;:&quot;1.22.3&quot;}}\n[HTTP] &lt;-- GET /wd/hub/status 200 10 ms - 68\n[HTTP]\n[debug] [HTTP] Request idempotency key: 139d89ca-1ba4-4fca-b461-e4e84d24e12c\n[HTTP] --&gt; POST /wd/hub/session\n[HTTP] {&quot;capabilities&quot;:{&quot;firstMatch&quot;:[{}],&quot;alwaysMatch&quot;:{&quot;appium:adbExecTimeout&quot;:60000,&quot;appium:app&quot;:&quot;/home/user/workspace/ui-tests/src/test/java/app/test.apk&quot;,&quot;appium:appPackage&quot;:&quot;org.test.debug_test&quot;,&quot;appium:automationName&quot;:&quot;UIAutomator2&quot;,&quot;appium:deviceName&quot;:&quot;Pixel 3 API 31&quot;,&quot;appium:eventTimings&quot;:true,&quot;appium:noReset&quot;:true,&quot;appium:platformVersion&quot;:&quot;12&quot;,&quot;appium:skipUnlock&quot;:true,&quot;appium:udid&quot;:&quot;emulator-5554&quot;,&quot;platformName&quot;:&quot;android&quot;}}}\n[debug] [W3C] Calling AppiumDriver.createSession() with args: [null,null,{&quot;firstMatch&quot;:[{}],&quot;alwaysMatch&quot;:{&quot;appium:adbExecTimeout&quot;:60000,&quot;appium:app&quot;:&quot;/home/user/workspace/ui-tests/src/test/java/app/test.apk&quot;,&quot;appium:appPackage&quot;:&quot;org.test.debug_test&quot;,&quot;appium:automationName&quot;:&quot;UIAutomator2&quot;,&quot;appium:deviceName&quot;:&quot;Pixel 3 API 31&quot;,&quot;appium:eventTimings&quot;:true,&quot;appium:noReset&quot;:true,&quot;appium:platformVersion&quot;:&quot;12&quot;,&quot;appium:skipUnlock&quot;:true,&quot;appium:udid&quot;:&quot;emulator-5554&quot;,&quot;platformName&quot;:&quot;android&quot;}}]\n[debug] [BaseDriver] Event 'newSessionRequested' logged at 1673453270062 (19:07:50 GMT+0300 (Moscow Standard Time))\n[Appium] Appium v1.22.3 creating new AndroidUiautomator2Driver (v1.70.1) session\n[debug] [BaseDriver] Creating session with W3C capabilities: {\n[debug] [BaseDriver]   &quot;alwaysMatch&quot;: {\n[debug] [BaseDriver]     &quot;platformName&quot;: &quot;android&quot;,\n[debug] [BaseDriver]     &quot;appium:adbExecTimeout&quot;: 60000,\n[debug] [BaseDriver]     &quot;appium:app&quot;: &quot;/home/user/workspace/ui-tests/src/test/java/app/test.apk&quot;,\n[debug] [BaseDriver]     &quot;appium:appPackage&quot;: &quot;org.test.debug_test&quot;,\n[debug] [BaseDriver]     &quot;appium:automationName&quot;: &quot;UIAutomator2&quot;,\n[debug] [BaseDriver]     &quot;appium:deviceName&quot;: &quot;Pixel 3 API 31&quot;,\n[debug] [BaseDriver]     &quot;appium:eventTimings&quot;: true,\n[debug] [BaseDriver]     &quot;appium:noReset&quot;: true,\n[debug] [BaseDriver]     &quot;appium:platformVersion&quot;: &quot;12&quot;,\n[debug] [BaseDriver]     &quot;appium:skipUnlock&quot;: true,\n[debug] [BaseDriver]     &quot;appium:udid&quot;: &quot;emulator-5554&quot;\n[debug] [BaseDriver]   },\n[debug] [BaseDriver]   &quot;firstMatch&quot;: [\n[debug] [BaseDriver]     {}\n[debug] [BaseDriver]   ]\n[debug] [BaseDriver] }\n[BaseDriver] Session created with session id: 355f9950-3bad-4c19-a44a-1770b3280b2b\n[BaseDriver] Using local app '/home/user/workspace/ui-tests/src/test/java/app/test.apk'\n[debug] [UiAutomator2] Checking whether app is actually present\n[ADB] Found 2 'build-tools' folders under '/home/user/dev/Android/Sdk' (newest first):\n[ADB]     /home/user/dev/Android/Sdk/build-tools/33.0.1\n[ADB]     /home/user/dev/Android/Sdk/build-tools/30.0.3\n[ADB] Using 'adb' from '/home/user/dev/Android/Sdk/platform-tools/adb'\n[debug] [ADB] Running '/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 start-server'\n[AndroidDriver] Retrieving device list\n[debug] [ADB] Trying to find a connected android device\n[debug] [ADB] Getting connected devices\n[debug] [ADB] Connected devices: [{&quot;udid&quot;:&quot;emulator-5554&quot;,&quot;state&quot;:&quot;device&quot;}]\n[AndroidDriver] Using device: emulator-5554\n[ADB] Using 'adb' from '/home/user/dev/Android/Sdk/platform-tools/adb'\n[debug] [ADB] Running '/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 start-server'\n[debug] [ADB] Setting device id to emulator-5554\n[debug] [ADB] Running '/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell getprop ro.build.version.sdk'\n[debug] [UiAutomator2] Deleting UiAutomator2 session\n[debug] [ADB] Running '/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell am force-stop org.test.debug_test'\n[UiAutomator2] Unable to force stop app: Error executing adbExec. Original error: 'Command '/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell am force-stop org.test.debug_test' timed out after 60000ms'. Try to increase the 60000ms adb execution timeout represented by 'adbExecTimeout' capability\n[debug] [ADB] Running '/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell getprop ro.build.version.sdk'\n[debug] [BaseDriver] Event 'newSessionStarted' logged at 1673453450427 (19:10:50 GMT+0300 (Moscow Standard Time))\n[debug] [W3C] Encountered internal error running command: Error: Error getting device API level. Original error: Error executing adbExec. Original error: 'Command '/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell getprop ro.build.version.sdk' timed out after 60000ms'. Try to increase the 60000ms adb execution timeout represented by 'adbExecTimeout' capability\n[debug] [W3C]     at ADB.getApiLevel (/usr/lib/node_modules/appium/node_modules/appium-adb/lib/tools/adb-commands.js:159:13)\n[debug] [W3C]     at AndroidUiautomator2Driver.deleteSession (/usr/lib/node_modules/appium/node_modules/appium-uiautomator2-driver/lib/driver.js:671:11)\n[debug] [W3C]     at AndroidUiautomator2Driver.createSession (/usr/lib/node_modules/appium/node_modules/appium-uiautomator2-driver/lib/driver.js:238:7)\n[debug] [W3C]     at AppiumDriver.createSession (/usr/lib/node_modules/appium/lib/appium.js:387:35)\n[HTTP] &lt;-- POST /wd/hub/session 500 180448 ms - 1145\n[HTTP]\n[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 229.336 s &lt;&lt;&lt; FAILURE! - in org.ui.tests.JustTest\n[ERROR] org.ui.tests.JustTest  Time elapsed: 229.332 s  &lt;&lt;&lt; ERROR!\norg.openqa.selenium.SessionNotCreatedException:\nCould not start a new session. Response code 500. Message: An unknown server-side error occurred while processing the command. Original error: Error getting device API level. Original error: Error executing adbExec. Original error: 'Command '/home/user/dev/Android/Sdk/platform-tools/adb -P 5037 -s emulator-5554 shell getprop ro.build.version.sdk' timed out after 60000ms'. Try to increase the 60000ms adb execution timeout represented by 'adbExecTimeout' capability\nBuild info: version: '4.7.2', revision: '4d4020c3b7'\nSystem info: os.name: 'Linux', os.arch: 'amd64', os.version: '5.4.0-136-generic', java.version: '11.0.17'\nDriver info: io.appium.java_client.AppiumDriver\nCommand: [null, newSession {capabilities=[{appium:noReset=true, appium:udid=emulator-5554, appium:adbExecTimeout=60000, appium:eventTimings=true, appium:skipUnlock=true, appium:deviceName=Pixel 3 API 31, platformName=ANDROID, appium:automationName=UIAutomator2, appium:app=/home/user/workspace/ui-tests/src/test/java/app/test.apk, appium:platformVersion=12, appium:appPackage=org.test.debug_test}], desiredCapabilities=Capabilities {appium:adbExecTimeout: 60000, appium:app: /home/user/workspace/..., appium:appPackage: org.test.debug_test, appium:automationName: UIAutomator2, appium:deviceName: Pixel 3 API 31, appium:eventTimings: true, appium:noReset: true, appium:platformVersion: 12, appium:skipUnlock: true, appium:udid: emulator-5554, platformName: ANDROID}}]\nCapabilities {}\n        at org.ui.tests.JustTest.setUp(JustTest.java:33)\n</code></pre>\n<p>Tried different adb (33.0.2, 33.0.3, 28.0.2) versions and different emulators API (28, 29, 30, 31) versions, but nothing helped I just keep getting an errors.\nOn local Windows machine tests run successfully, error reproduced on Linux VM with kvm enabled</p>\n"},{"tags":["java","spring","spring-boot","dto"],"comments":[{"owner":{"account_id":3868372,"reputation":4436,"user_id":3204335,"display_name":"MD Ruhul Amin"},"score":0,"creation_date":1686219757,"post_id":76430795,"comment_id":134770406,"body_markdown":"`modelMapper` might also be an issue. Can you please add the `modelMapper` class/config?","body":"<code>modelMapper</code> might also be an issue. Can you please add the <code>modelMapper</code> class/config?"},{"owner":{"account_id":24800295,"reputation":5,"user_id":18682737,"display_name":"Nouhaila Khaouti"},"score":0,"creation_date":1686221257,"post_id":76430795,"comment_id":134770663,"body_markdown":"i added the modelMapper class","body":"i added the modelMapper class"}],"answers":[{"comments":[{"owner":{"account_id":24800295,"reputation":5,"user_id":18682737,"display_name":"Nouhaila Khaouti"},"score":0,"creation_date":1686220336,"post_id":76430866,"comment_id":134770514,"body_markdown":"still not working","body":"still not working"},{"owner":{"account_id":3868372,"reputation":4436,"user_id":3204335,"display_name":"MD Ruhul Amin"},"score":0,"creation_date":1686220412,"post_id":76430866,"comment_id":134770526,"body_markdown":"modelMapper might also be an issue. Can you please add the `modelMapper` class/config?","body":"modelMapper might also be an issue. Can you please add the <code>modelMapper</code> class/config?"}],"tags":[],"owner":{"account_id":3868372,"reputation":4436,"user_id":3204335,"display_name":"MD Ruhul Amin"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1686219655,"creation_date":1686219655,"answer_id":76430866,"question_id":76430795,"body_markdown":"`@OneToMany()` Default fetch type is Lazy.\r\nTry using `FetchType.EAGER`. \r\n\r\nExample: \r\n```\r\n@OneToMany(fetch = FetchType.EAGER)\r\nprivate List&lt;Student&gt; student;\r\n```","title":"using dto Always getting a null value in a get request , many to one relationship","body":"<p><code>@OneToMany()</code> Default fetch type is Lazy.\nTry using <code>FetchType.EAGER</code>.</p>\n<p>Example:</p>\n<pre><code>@OneToMany(fetch = FetchType.EAGER)\nprivate List&lt;Student&gt; student;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":28779669,"reputation":1,"user_id":22041540,"display_name":"wissal_soudani"},"score":0,"creation_date":1686223330,"post_id":76431317,"comment_id":134771064,"body_markdown":"ty adding @JsonIgnore to ignore any null value coming from the data base, it have always worked for me!","body":"ty adding @JsonIgnore to ignore any null value coming from the data base, it have always worked for me!"}],"tags":[],"owner":{"account_id":28779669,"reputation":1,"user_id":22041540,"display_name":"wissal_soudani"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686223267,"creation_date":1686223267,"answer_id":76431317,"question_id":76430795,"body_markdown":"if you are sure that you&#39;re not having a lazy loading problem as mentioned before, you may check the Circular References: If there are circular references between your entities, it can cause issues during serialization to the DTO. Make sure there are no circular dependencies between the entities, as this can lead to infinite recursion or unexpected results. You can use annotations like @JsonIgnore or @JsonManagedReference and @JsonBackReference to handle circular references properly during serialization.","title":"using dto Always getting a null value in a get request , many to one relationship","body":"<p>if you are sure that you're not having a lazy loading problem as mentioned before, you may check the Circular References: If there are circular references between your entities, it can cause issues during serialization to the DTO. Make sure there are no circular dependencies between the entities, as this can lead to infinite recursion or unexpected results. You can use annotations like @JsonIgnore or @JsonManagedReference and @JsonBackReference to handle circular references properly during serialization.</p>\n"}],"owner":{"account_id":24800295,"reputation":5,"user_id":18682737,"display_name":"Nouhaila Khaouti"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686223267,"creation_date":1686219053,"question_id":76430795,"body_markdown":"this is my first time working with spring and Dto, and i was trying to create two enties, classes and student, my problem is when i try to send a get request of a classes , normaly the response need to be the name , numberS averageC and student related to this classe , but what i get is this {\r\n    &quot;name&quot;: &quot;phonexe&quot;,\r\n    &quot;numberS&quot;: 25,\r\n    &quot;averageC&quot;: 0.0,\r\n    &quot;students&quot;: null\r\n}\r\nthe students list is always null , i checked in the database if the student get inserted with the classe_id , so that&#39;s not the problem\r\nthis is my entities \r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Student {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    private Long id;\r\n    private String codeM;\r\n    private String firstName;\r\n    private String lastName;\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;classes_id&quot;)\r\n    private Classes classes;\r\n    @OneToMany(mappedBy = &quot;student&quot;)\r\n    private List&lt;Notes&gt; notes;\r\n}\r\n```\r\n```\r\n\r\n@Entity\r\n@Data\r\n@NoArgsConstructor(force = true)\r\n@AllArgsConstructor\r\npublic class Classes {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    private long id;\r\n    @NonNull\r\n    @NotBlank(message = &quot;First name must be filled&quot;)\r\n    @Pattern(regexp = &quot;^(?!\\\\s*$).+&quot;, message = &quot;First name must not be blank or contain only spaces&quot;)\r\n    private String name;\r\n    @NonNull\r\n    private Integer numberS;\r\n    private double averageC=0.0;\r\n    @OneToMany\r\n    private List&lt;Student&gt; student;\r\n\r\n}\r\n```\r\nand this is my Dto entities \r\n```\r\n@Data\r\npublic class StudentGetDto {\r\n    @NotNull\r\n    private String codeM;\r\n    private String firstName;\r\n    private String lastName;\r\n    private ClassesGetDto classes;\r\n    private List&lt;NotesGetWithMatiereOnlyDto&gt; notes;\r\n}\r\n```\r\n```\r\n@Data\r\npublic class ClassesGetDto {\r\n    private String name;\r\n    private Integer numberS;\r\n    private Double averageC;\r\n    private List&lt;StudentGetDto&gt; students;\r\n}\r\n```\r\nand this is the controller function \r\n```\r\n    @GetMapping(&quot;/{Name}&quot;)\r\n    public ClassesGetDto findByName(@PathVariable String Name) throws Exception{\r\n        return modelMapper.map(classesService.findByName(Name), ClassesGetDto.class);\r\n    }\r\n```\r\n\r\nthe modelMapper config \r\n```\r\n@Configuration\r\npublic class ModelMapperConfig {\r\n\r\n    @Bean\r\n    public ModelMapper modelMapper() {\r\n        return new ModelMapper();\r\n    }\r\n}\r\n```\r\n","title":"using dto Always getting a null value in a get request , many to one relationship","body":"<p>this is my first time working with spring and Dto, and i was trying to create two enties, classes and student, my problem is when i try to send a get request of a classes , normaly the response need to be the name , numberS averageC and student related to this classe , but what i get is this {\n&quot;name&quot;: &quot;phonexe&quot;,\n&quot;numberS&quot;: 25,\n&quot;averageC&quot;: 0.0,\n&quot;students&quot;: null\n}\nthe students list is always null , i checked in the database if the student get inserted with the classe_id , so that's not the problem\nthis is my entities</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Student {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    private Long id;\n    private String codeM;\n    private String firstName;\n    private String lastName;\n    @ManyToOne\n    @JoinColumn(name = &quot;classes_id&quot;)\n    private Classes classes;\n    @OneToMany(mappedBy = &quot;student&quot;)\n    private List&lt;Notes&gt; notes;\n}\n</code></pre>\n<pre><code>\n@Entity\n@Data\n@NoArgsConstructor(force = true)\n@AllArgsConstructor\npublic class Classes {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    private long id;\n    @NonNull\n    @NotBlank(message = &quot;First name must be filled&quot;)\n    @Pattern(regexp = &quot;^(?!\\\\s*$).+&quot;, message = &quot;First name must not be blank or contain only spaces&quot;)\n    private String name;\n    @NonNull\n    private Integer numberS;\n    private double averageC=0.0;\n    @OneToMany\n    private List&lt;Student&gt; student;\n\n}\n</code></pre>\n<p>and this is my Dto entities</p>\n<pre><code>@Data\npublic class StudentGetDto {\n    @NotNull\n    private String codeM;\n    private String firstName;\n    private String lastName;\n    private ClassesGetDto classes;\n    private List&lt;NotesGetWithMatiereOnlyDto&gt; notes;\n}\n</code></pre>\n<pre><code>@Data\npublic class ClassesGetDto {\n    private String name;\n    private Integer numberS;\n    private Double averageC;\n    private List&lt;StudentGetDto&gt; students;\n}\n</code></pre>\n<p>and this is the controller function</p>\n<pre><code>    @GetMapping(&quot;/{Name}&quot;)\n    public ClassesGetDto findByName(@PathVariable String Name) throws Exception{\n        return modelMapper.map(classesService.findByName(Name), ClassesGetDto.class);\n    }\n</code></pre>\n<p>the modelMapper config</p>\n<pre><code>@Configuration\npublic class ModelMapperConfig {\n\n    @Bean\n    public ModelMapper modelMapper() {\n        return new ModelMapper();\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-alertdialog","nfc","smartcard"],"comments":[{"owner":{"account_id":14283811,"reputation":6405,"user_id":10317684,"display_name":"Ricky Mo"},"score":0,"creation_date":1686218205,"post_id":76430606,"comment_id":134770109,"body_markdown":"Use [setOnDismissListener](https://developer.android.com/reference/android/app/AlertDialog.Builder#setOnDismissListener(android.content.DialogInterface.OnDismissListener)) to put the code you want to run after the dialog is displayed and dismissed in the callback listener.","body":"Use <a href=\"https://developer.android.com/reference/android/app/AlertDialog.Builder#setOnDismissListener(android.content.DialogInterface.OnDismissListener)\" rel=\"nofollow noreferrer\">setOnDismissListener</a> to put the code you want to run after the dialog is displayed and dismissed in the callback listener."}],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686222940,"creation_date":1686222940,"answer_id":76431267,"question_id":76430606,"body_markdown":"The problem is you are handling the incoming NFC data in your main thread loop (against recommendations) and then you adding the AlertDialog to end of the queue of items the main thread loop is to process with the `handler.post(runnable);` \r\n\r\nThus all the code in the `runnable` get run after the rest of the code in `onNewIntent`\r\n\r\nIf you want the user to confirm the &quot;Message&quot; before you `cardAuthenticate` then the flow of the code should go like the below pseudo Code \r\n\r\n - onNewIntent\r\n - Store `Tag` object (a simple global variable can work)\r\n - Connect to Tag and get message\r\n - Ideally Close `Tag` connection\r\n - Display dialog\r\n - In the confirm dialog callback re-connect to the stored Tag object\r\n - call `cardAuthenticate`\r\n\r\nIt&#39;s not ideal to the the old Intent based method working with NFC, using the newer and better `enableReaderMode` automatically handles NFC in a background thread so as to prevent ANR messages due to NFC operations.\r\n\r\nEven with `enableReaderMode` you will still have to store the Tag object for later use by the confirm event from the Dialog.\r\n\r\nNote with Android 12L onwards you should also catch a `SecurityException` for it the Tag object goes out of date while you are using it.\r\n\r\n","title":"Displaying Android AlertDialog immediately","body":"<p>The problem is you are handling the incoming NFC data in your main thread loop (against recommendations) and then you adding the AlertDialog to end of the queue of items the main thread loop is to process with the <code>handler.post(runnable);</code></p>\n<p>Thus all the code in the <code>runnable</code> get run after the rest of the code in <code>onNewIntent</code></p>\n<p>If you want the user to confirm the &quot;Message&quot; before you <code>cardAuthenticate</code> then the flow of the code should go like the below pseudo Code</p>\n<ul>\n<li>onNewIntent</li>\n<li>Store <code>Tag</code> object (a simple global variable can work)</li>\n<li>Connect to Tag and get message</li>\n<li>Ideally Close <code>Tag</code> connection</li>\n<li>Display dialog</li>\n<li>In the confirm dialog callback re-connect to the stored Tag object</li>\n<li>call <code>cardAuthenticate</code></li>\n</ul>\n<p>It's not ideal to the the old Intent based method working with NFC, using the newer and better <code>enableReaderMode</code> automatically handles NFC in a background thread so as to prevent ANR messages due to NFC operations.</p>\n<p>Even with <code>enableReaderMode</code> you will still have to store the Tag object for later use by the confirm event from the Dialog.</p>\n<p>Note with Android 12L onwards you should also catch a <code>SecurityException</code> for it the Tag object goes out of date while you are using it.</p>\n"}],"owner":{"account_id":219520,"reputation":7090,"user_id":476467,"accept_rate":65,"display_name":"thotheolh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76431267,"answer_count":1,"score":0,"last_activity_date":1686222940,"creation_date":1686217716,"question_id":76430606,"body_markdown":"I noticed that AlertDialog in Android does not show immediately. The AlertDialog could be rendered after all the codes have fully run it&#39;s course and the dialog pops up which is too late in the UI process.\r\n\r\nI am trying to build an NFC card reader application for Android and during the NFC communication, the card and phone will exchange cryptographic challenges to each other and the AlertDialog is suppose to display a one-time challenge to allow the end user to physically verify the authenticity of the card they are communicating with.\r\n\r\nI noticed that the AlertDialog will only display the challenge code once all the other main codes have fully executed which defeats the purpose of a challenge code.\r\n\r\nI would like to know if there are certain ways to force rendering of a just-in-time AlertDialog that will render immediately when asked to do so with the appropriate challenge codes to be displayed ?\r\n\r\nHere is a skeleton code of what I am working on:\r\n\r\n```\r\npublic class CardPairingActivity extends AppCompatActivity implements InfoDialogCopyDialog.InfoDialogCopyDialogListener {\r\n\r\n    private static String username = &quot;&quot;;\r\n    private static String password = &quot;&quot;;\r\n    private static final byte role = Constants.USER_KEYMAN;\r\n    private ImageView imageView = null;\r\n    private ProgressBar spinner = null;\r\n    private NfcAdapter nfcAdapter = null;\r\n    private IntentFilter[] intentFiltersArray = null;\r\n    private String[][] techListsArray = null;\r\n    private PendingIntent pendingIntent = null;\r\n    private APDUResult apduRes = null;\r\n    private static Handler handler = new Handler();\r\n    private static Runnable runnable = null;\r\n    private static Context myContext = null;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_card_pairing);\r\n\r\n        myContext = this;\r\n\r\n        NfcManager nfcManager = (NfcManager) getSystemService(Context.NFC_SERVICE);\r\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\r\n\r\n        if (nfcManager != null) {\r\n            System.out.println(&quot;NFC Manager ready ...&quot;);\r\n        }\r\n\r\n        if (nfcAdapter != null) {\r\n            System.out.println(&quot;NFC Adapter ready ...&quot;);\r\n        }\r\n\r\n        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), PendingIntent.FLAG_MUTABLE);\r\n        intentFiltersArray = new IntentFilter[]{new IntentFilter(NfcAdapter.ACTION_TECH_DISCOVERED)};\r\n        techListsArray = new String[][]{new String[]{NfcA.class.getName()}, new String[]{NfcB.class.getName()}, new String[]{IsoDep.class.getName()}};\r\n\r\n        if (android.os.Build.VERSION.SDK_INT &gt; 9) {\r\n            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n            StrictMode.setThreadPolicy(policy);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        Intent intent = new Intent();\r\n        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);\r\n        PendingIntent nfcPendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_MUTABLE);\r\n        if (nfcAdapter != null) {\r\n            nfcAdapter.enableForegroundDispatch(this, pendingIntent, intentFiltersArray, techListsArray);\r\n        }\r\n    }\r\n\r\n    protected void onPause() {\r\n        super.onPause();\r\n\r\n        if (nfcAdapter != null) {\r\n            try {\r\n                nfcAdapter.disableForegroundDispatch(this);\r\n            } catch (IllegalStateException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error disabling NFC foreground dispatch&quot;, ex);\r\n            }\r\n        }\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    @Override\r\n    protected void onNewIntent(Intent intent) {\r\n        super.onNewIntent(intent);\r\n\r\n        System.out.println(&quot;Doing onNewIntent() ...&quot;);\r\n\r\n        // Use NFC to read tag\r\n        Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\r\n        boolean hasIsoDep = false;\r\n\r\n        if (tag != null) {\r\n            System.out.println(&quot;New tag found !!!&quot;);\r\n            System.out.println(&quot;Tag ID: &quot; + BinUtils.toHexString(tag.getId()));\r\n            System.out.println(&quot;\\r\\n&quot;);\r\n            for (String tagTech : tag.getTechList()) {\r\n                System.out.println(&quot;Tech: &quot; + tagTech);\r\n                if (tagTech.equals(&quot;android.nfc.tech.IsoDep&quot;)) {\r\n                    hasIsoDep = true;\r\n                }\r\n            }\r\n        } else {\r\n            System.out.println(&quot;No new tag found !!!&quot;);\r\n        }\r\n\r\n        if (hasIsoDep) {\r\n            try {\r\n                IsoDep iso14443 = IsoDep.get(tag);\r\n                iso14443.connect();\r\n                SharedResource.setIsoDep(iso14443);\r\n                System.out.println(&quot;Selecting KeyVault applet ...&quot;);\r\n                HashMap&lt;String, Object&gt; result = API.adminInit();\r\n                boolean isSuccess = (boolean) result.get(&quot;Success&quot;);\r\n\r\n                if (isSuccess) {\r\n                    String toShow = (String) result.get(&quot;Message&quot;);\r\n                    if (toShow != null) {\r\n                        System.out.println(&quot;Showing Secure Session popup ...&quot;);\r\n\r\n                        runnable = new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                AlertDialog.Builder builder = new AlertDialog.Builder(myContext);\r\n                                builder.setTitle(&quot;Secure Card Session&quot;);\r\n                                builder.setMessage(toShow);\r\n                                AlertDialog alert = builder.create();\r\n                                alert.show();\r\n                            }\r\n                        };\r\n                        handler.post(runnable);\r\n                    }\r\n                    if (API.cardAuthenticate(Constants.USER_KEYMAN, username, password.toCharArray())) {\r\n                        // Login success\r\n                        System.out.println(&quot;[INF] Card Login SUCCESS ...&quot;);                        \r\n                    } else {\r\n                        // Login fail\r\n                        System.out.println(&quot;[ERR] Card Login FAILED ...&quot;);\r\n                        int tries = API.adminCardLoginTriesRemaining(role, null);\r\n                        if (tries != -1) {\r\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed. \\r\\nLogin Retries Left: &quot; + tries, &quot;OK&quot;, this, MainActivity.class);\r\n                        } else {\r\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed.&quot;, &quot;OK&quot;, this, MainActivity.class);\r\n                        }\r\n                    }\r\n                } else {\r\n                    System.out.println(&quot;[ERR] Failed to select applet !!!&quot;);\r\n                }\r\n                iso14443.close();\r\n            } catch (IOException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (InvalidSizeException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (InvalidAlgorithmParameterException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (NoSuchPaddingException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (ShortBufferException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (IllegalBlockSizeException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (NoSuchAlgorithmException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (InvalidParameterSpecException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (InvalidKeySpecException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (BadPaddingException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (InvalidKeyException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (IllegalFormatException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n            } catch (NoSuchProviderException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void setCredentials(String usr, String pass, String authorName, String authorID) {\r\n        username = usr;\r\n        password = pass;\r\n        serverAuthorName = authorName;\r\n        serverAuthorID = authorID;\r\n    }\r\n\r\n    @Override\r\n    public void infoDialogCopyDialog() {\r\n    }\r\n}\r\n```\r\n\r\nWhat can I do to display a challenge-code issued by the card just-in-time before the user proceeds other activities ?","title":"Displaying Android AlertDialog immediately","body":"<p>I noticed that AlertDialog in Android does not show immediately. The AlertDialog could be rendered after all the codes have fully run it's course and the dialog pops up which is too late in the UI process.</p>\n<p>I am trying to build an NFC card reader application for Android and during the NFC communication, the card and phone will exchange cryptographic challenges to each other and the AlertDialog is suppose to display a one-time challenge to allow the end user to physically verify the authenticity of the card they are communicating with.</p>\n<p>I noticed that the AlertDialog will only display the challenge code once all the other main codes have fully executed which defeats the purpose of a challenge code.</p>\n<p>I would like to know if there are certain ways to force rendering of a just-in-time AlertDialog that will render immediately when asked to do so with the appropriate challenge codes to be displayed ?</p>\n<p>Here is a skeleton code of what I am working on:</p>\n<pre><code>public class CardPairingActivity extends AppCompatActivity implements InfoDialogCopyDialog.InfoDialogCopyDialogListener {\n\n    private static String username = &quot;&quot;;\n    private static String password = &quot;&quot;;\n    private static final byte role = Constants.USER_KEYMAN;\n    private ImageView imageView = null;\n    private ProgressBar spinner = null;\n    private NfcAdapter nfcAdapter = null;\n    private IntentFilter[] intentFiltersArray = null;\n    private String[][] techListsArray = null;\n    private PendingIntent pendingIntent = null;\n    private APDUResult apduRes = null;\n    private static Handler handler = new Handler();\n    private static Runnable runnable = null;\n    private static Context myContext = null;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_card_pairing);\n\n        myContext = this;\n\n        NfcManager nfcManager = (NfcManager) getSystemService(Context.NFC_SERVICE);\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\n\n        if (nfcManager != null) {\n            System.out.println(&quot;NFC Manager ready ...&quot;);\n        }\n\n        if (nfcAdapter != null) {\n            System.out.println(&quot;NFC Adapter ready ...&quot;);\n        }\n\n        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), PendingIntent.FLAG_MUTABLE);\n        intentFiltersArray = new IntentFilter[]{new IntentFilter(NfcAdapter.ACTION_TECH_DISCOVERED)};\n        techListsArray = new String[][]{new String[]{NfcA.class.getName()}, new String[]{NfcB.class.getName()}, new String[]{IsoDep.class.getName()}};\n\n        if (android.os.Build.VERSION.SDK_INT &gt; 9) {\n            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n            StrictMode.setThreadPolicy(policy);\n        }\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        Intent intent = new Intent();\n        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);\n        PendingIntent nfcPendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_MUTABLE);\n        if (nfcAdapter != null) {\n            nfcAdapter.enableForegroundDispatch(this, pendingIntent, intentFiltersArray, techListsArray);\n        }\n    }\n\n    protected void onPause() {\n        super.onPause();\n\n        if (nfcAdapter != null) {\n            try {\n                nfcAdapter.disableForegroundDispatch(this);\n            } catch (IllegalStateException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error disabling NFC foreground dispatch&quot;, ex);\n            }\n        }\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.O)\n    @Override\n    protected void onNewIntent(Intent intent) {\n        super.onNewIntent(intent);\n\n        System.out.println(&quot;Doing onNewIntent() ...&quot;);\n\n        // Use NFC to read tag\n        Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\n        boolean hasIsoDep = false;\n\n        if (tag != null) {\n            System.out.println(&quot;New tag found !!!&quot;);\n            System.out.println(&quot;Tag ID: &quot; + BinUtils.toHexString(tag.getId()));\n            System.out.println(&quot;\\r\\n&quot;);\n            for (String tagTech : tag.getTechList()) {\n                System.out.println(&quot;Tech: &quot; + tagTech);\n                if (tagTech.equals(&quot;android.nfc.tech.IsoDep&quot;)) {\n                    hasIsoDep = true;\n                }\n            }\n        } else {\n            System.out.println(&quot;No new tag found !!!&quot;);\n        }\n\n        if (hasIsoDep) {\n            try {\n                IsoDep iso14443 = IsoDep.get(tag);\n                iso14443.connect();\n                SharedResource.setIsoDep(iso14443);\n                System.out.println(&quot;Selecting KeyVault applet ...&quot;);\n                HashMap&lt;String, Object&gt; result = API.adminInit();\n                boolean isSuccess = (boolean) result.get(&quot;Success&quot;);\n\n                if (isSuccess) {\n                    String toShow = (String) result.get(&quot;Message&quot;);\n                    if (toShow != null) {\n                        System.out.println(&quot;Showing Secure Session popup ...&quot;);\n\n                        runnable = new Runnable() {\n                            @Override\n                            public void run() {\n                                AlertDialog.Builder builder = new AlertDialog.Builder(myContext);\n                                builder.setTitle(&quot;Secure Card Session&quot;);\n                                builder.setMessage(toShow);\n                                AlertDialog alert = builder.create();\n                                alert.show();\n                            }\n                        };\n                        handler.post(runnable);\n                    }\n                    if (API.cardAuthenticate(Constants.USER_KEYMAN, username, password.toCharArray())) {\n                        // Login success\n                        System.out.println(&quot;[INF] Card Login SUCCESS ...&quot;);                        \n                    } else {\n                        // Login fail\n                        System.out.println(&quot;[ERR] Card Login FAILED ...&quot;);\n                        int tries = API.adminCardLoginTriesRemaining(role, null);\n                        if (tries != -1) {\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed. \\r\\nLogin Retries Left: &quot; + tries, &quot;OK&quot;, this, MainActivity.class);\n                        } else {\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed.&quot;, &quot;OK&quot;, this, MainActivity.class);\n                        }\n                    }\n                } else {\n                    System.out.println(&quot;[ERR] Failed to select applet !!!&quot;);\n                }\n                iso14443.close();\n            } catch (IOException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (InvalidSizeException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (InvalidAlgorithmParameterException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (NoSuchPaddingException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (ShortBufferException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (IllegalBlockSizeException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (NoSuchAlgorithmException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (InvalidParameterSpecException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (InvalidKeySpecException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (BadPaddingException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (InvalidKeyException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (IllegalFormatException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n            } catch (NoSuchProviderException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n\n    public static void setCredentials(String usr, String pass, String authorName, String authorID) {\n        username = usr;\n        password = pass;\n        serverAuthorName = authorName;\n        serverAuthorID = authorID;\n    }\n\n    @Override\n    public void infoDialogCopyDialog() {\n    }\n}\n</code></pre>\n<p>What can I do to display a challenge-code issued by the card just-in-time before the user proceeds other activities ?</p>\n"},{"tags":["java","azure"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1686220683,"post_id":76430984,"comment_id":134770561,"body_markdown":"What does this have to do with AWS? This is **entirely** about azure. *&quot;using S3 API to Azure&quot;* - what?","body":"What does this have to do with AWS? This is <b>entirely</b> about azure. <i>&quot;using S3 API to Azure&quot;</i> - what?"},{"owner":{"account_id":10323494,"reputation":7,"user_id":7615629,"display_name":"CoderAkki"},"score":0,"creation_date":1686291363,"post_id":76430984,"comment_id":134781408,"body_markdown":"Using an S3proxy for connecting to Azure https://github.com/gaul/s3proxy","body":"Using an S3proxy for connecting to Azure <a href=\"https://github.com/gaul/s3proxy\" rel=\"nofollow noreferrer\">github.com/gaul/s3proxy</a>"}],"answers":[{"tags":[],"owner":{"account_id":3801293,"reputation":2150,"user_id":3154883,"display_name":"Brother"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686222801,"creation_date":1686221146,"answer_id":76431044,"question_id":76430984,"body_markdown":"What you want is a backoff strategy: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/retry/RetryPolicy.BackoffStrategy.html\r\n\r\nYou can choose which one and set like this:\r\n```\r\nRetryPolicy.builder()\r\n        .withBackoffStrategy(new ExponentialBackoffStrategy(100, 2000))\r\n        .build()\r\n```\r\n\r\nOf course this is using AWS and Azure must have similar strategies.\r\n\r\n[updated]\r\n\r\nWith Azure Java SDK, you can have the retry as:\r\n```\r\nRetryPolicy policy = new RetryExponentialRetry(BACKOFF_DELTA, MAX_RETRIES)\r\n```","title":"How to add retry delay in retry policy?","body":"<p>What you want is a backoff strategy: <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/retry/RetryPolicy.BackoffStrategy.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/retry/RetryPolicy.BackoffStrategy.html</a></p>\n<p>You can choose which one and set like this:</p>\n<pre><code>RetryPolicy.builder()\n        .withBackoffStrategy(new ExponentialBackoffStrategy(100, 2000))\n        .build()\n</code></pre>\n<p>Of course this is using AWS and Azure must have similar strategies.</p>\n<p>[updated]</p>\n<p>With Azure Java SDK, you can have the retry as:</p>\n<pre><code>RetryPolicy policy = new RetryExponentialRetry(BACKOFF_DELTA, MAX_RETRIES)\n</code></pre>\n"}],"owner":{"account_id":10323494,"reputation":7,"user_id":7615629,"display_name":"CoderAkki"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":213,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686222801,"creation_date":1686220604,"question_id":76430984,"body_markdown":"I am trying to upload file using S3 API to Azure by using AWS SDK but I am facing intermittent file upload issue and this the error\r\n\r\n```Cannot retry after server error, command is not replayable: [method=org.jclouds.azureblob.AzureBlobClient.public abstract java.lang.String org.jclouds.azureblob.AzureBlobClient.putBlob(java.lang.String,org.jclouds.azureblob.domain.AzureBlob)```\r\n\r\nI have a retry policy in place as well\r\n\r\n    RetryPolicy.builder().numRetries(retries).build()\r\n\r\nwhich retries for 10 times and gives and error was thing of adding a delay between the retries \r\n\r\nAny idea how can i achive it , new to AWS ?","title":"How to add retry delay in retry policy?","body":"<p>I am trying to upload file using S3 API to Azure by using AWS SDK but I am facing intermittent file upload issue and this the error</p>\n<p><code>Cannot retry after server error, command is not replayable: [method=org.jclouds.azureblob.AzureBlobClient.public abstract java.lang.String org.jclouds.azureblob.AzureBlobClient.putBlob(java.lang.String,org.jclouds.azureblob.domain.AzureBlob)</code></p>\n<p>I have a retry policy in place as well</p>\n<pre><code>RetryPolicy.builder().numRetries(retries).build()\n</code></pre>\n<p>which retries for 10 times and gives and error was thing of adding a delay between the retries</p>\n<p>Any idea how can i achive it , new to AWS ?</p>\n"},{"tags":["java","hashcode","primes"],"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":4,"creation_date":1259789986,"post_id":1835976,"comment_id":1728418,"body_markdown":"31 is still good as it doesn&#39;t necessarily involve loading a constant. On an ARM processor (at least one used by around 99.9997% of mobile phones) `*31` can be don in a single instruction. In reality, any odd number whether prime or not is good enough.","body":"31 is still good as it doesn&#39;t necessarily involve loading a constant. On an ARM processor (at least one used by around 99.9997% of mobile phones) <code>*31</code> can be don in a single instruction. In reality, any odd number whether prime or not is good enough."},{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":0,"creation_date":1259821269,"post_id":1835976,"comment_id":1730819,"body_markdown":"I was thinking of desktop programs, where it does not matter whether you choose 31 or 1327144003. Curiously enough, on my machine multiplying with 31 is actually a little slower - probably an optimization gone wrong. 8-)","body":"I was thinking of desktop programs, where it does not matter whether you choose 31 or 1327144003. Curiously enough, on my machine multiplying with 31 is actually a little slower - probably an optimization gone wrong. 8-)"},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":8,"creation_date":1297884636,"post_id":1835976,"comment_id":5614692,"body_markdown":"Primes of form `p = (2^n-1)` lend themselves to optimization of `x * p = (p &lt;&lt; n) - p` which the compiler typically does. From Joshua Bloch, Effective Java, Chapter 3, Item 9. SO question http://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier/299748#299748","body":"Primes of form <code>p = (2^n-1)</code> lend themselves to optimization of <code>x * p = (p &lt;&lt; n) - p</code> which the compiler typically does. From Joshua Bloch, Effective Java, Chapter 3, Item 9. SO question <a href=\"http://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier/299748#299748\" title=\"why does javas hashcode in string use 31 as a multiplier\">stackoverflow.com/questions/299304/&hellip;</a>"},{"owner":{"account_id":32045,"reputation":26603,"user_id":88442,"accept_rate":54,"display_name":"J-16 SDiZ"},"score":0,"creation_date":1417085923,"post_id":1835976,"comment_id":42829167,"body_markdown":"and multiply with integer &lt;128 have extra boost in jvm.. `2^n-1`, prime, smallish .. this give 31.","body":"and multiply with integer &lt;128 have extra boost in jvm.. <code>2^n-1</code>, prime, smallish .. this give 31."},{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":0,"creation_date":1417205325,"post_id":1835976,"comment_id":42875740,"body_markdown":"@corsiKa As I said, for current desktop machines this doesn&#39;t seem to be an optimization anymore - the time is the same. Even worse: on my machine multiplying with 31 was a little slower - maybe the JVM tried to &quot;optimize&quot; it by calculating x &lt;&lt; 5 - x, and this is actually slower than using the hardware multiplier.","body":"@corsiKa As I said, for current desktop machines this doesn&#39;t seem to be an optimization anymore - the time is the same. Even worse: on my machine multiplying with 31 was a little slower - maybe the JVM tried to &quot;optimize&quot; it by calculating x &lt;&lt; 5 - x, and this is actually slower than using the hardware multiplier."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1496546647,"post_id":1835976,"comment_id":75703275,"body_markdown":"@Dr.Hans-PeterSt&#246;rr On i86, there&#39;s a difference, as there&#39;s a mode for a single byte immediate operand. You get a shorter instruction and in a benchmark I wrote years ago it was slightly faster.","body":"@Dr.Hans-PeterSt&#246;rr On i86, there&#39;s a difference, as there&#39;s a mode for a single byte immediate operand. You get a shorter instruction and in a benchmark I wrote years ago it was slightly faster."},{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":2,"creation_date":1504607973,"post_id":1835976,"comment_id":79065128,"body_markdown":"@MarkRotteveel Please notice that this is quite different from [Why does Java&#39;s hashCode() in String use 31 as a multiplier?][1] since this is not about the history of 31, but on what would be a better choice instead of using 31, without using additional libraries or entirely different methods of calculating hashes. None of the answers there adresses that.\n\n  [1]: https://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier","body":"@MarkRotteveel Please notice that this is quite different from [Why does Java&#39;s hashCode() in String use 31 as a multiplier?][1] since this is not about the history of 31, but on what would be a better choice instead of using 31, without using additional libraries or entirely different methods of calculating hashes. None of the answers there adresses that.    [1]: <a href=\"https://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier\" title=\"why does javas hashcode in string use 31 as a multiplier\">stackoverflow.com/questions/299304/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1259790771,"creation_date":1259790771,"answer_id":1836079,"question_id":1835976,"body_markdown":"You need to define your range for i and j.  You could use a prime number for both.\r\n\r\n    public int hashCode() {\r\n       http://primes.utm.edu/curios/ ;)\r\n       return 97654321 * i ^ 12356789 * j;\r\n    }\r\n\r\n","title":"What is a sensible prime for hashcode calculation?","body":"<p>You need to define your range for i and j.  You could use a prime number for both.</p>\n\n<pre><code>public int hashCode() {\n   http://primes.utm.edu/curios/ ;)\n   return 97654321 * i ^ 12356789 * j;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":0,"creation_date":1259822979,"post_id":1836089,"comment_id":1730946,"body_markdown":"Right, the modulo arithmetic makes the problem difficult and interesting. I think I&#39;ll write a little program to search for a good solution. :-)","body":"Right, the modulo arithmetic makes the problem difficult and interesting. I think I&#39;ll write a little program to search for a good solution. :-)"}],"tags":[],"owner":{"account_id":47225,"reputation":79382,"user_id":139746,"accept_rate":92,"display_name":"Pascal Cuoq"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1259790856,"creation_date":1259790856,"answer_id":1836089,"question_id":1835976,"body_markdown":"Actually, if you take a prime so large that it comes close to `INT_MAX`, you have the same problem because of modulo arithmetic. If you expect to hash mostly strings of length 2, perhaps a prime near the square root of `INT_MAX` would be best, if the strings you hash are longer it doesn&#39;t matter so much and collisions are unavoidable anyway...","title":"What is a sensible prime for hashcode calculation?","body":"<p>Actually, if you take a prime so large that it comes close to <code>INT_MAX</code>, you have the same problem because of modulo arithmetic. If you expect to hash mostly strings of length 2, perhaps a prime near the square root of <code>INT_MAX</code> would be best, if the strings you hash are longer it doesn't matter so much and collisions are unavoidable anyway...</p>\n"},{"comments":[{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":2,"creation_date":1259805065,"post_id":1836208,"comment_id":1729861,"body_markdown":"I use the first 1000 primes as a handy source for small prime numbers http://primes.utm.edu/lists/small/1000.txt","body":"I use the first 1000 primes as a handy source for small prime numbers <a href=\"http://primes.utm.edu/lists/small/1000.txt\" rel=\"nofollow noreferrer\">primes.utm.edu/lists/small/1000.txt</a>"},{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":0,"creation_date":1259821011,"post_id":1836208,"comment_id":1730800,"body_markdown":"I don&#39;t think overflowing matters - if the prime is large enough, the result will be large even after the overflow. I was thinking of something like 1327144003.","body":"I don&#39;t think overflowing matters - if the prime is large enough, the result will be large even after the overflow. I was thinking of something like 1327144003."}],"tags":[],"owner":{"account_id":25466,"reputation":36566,"user_id":65464,"accept_rate":93,"display_name":"Erich Kitzmueller"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1259791883,"creation_date":1259791883,"answer_id":1836208,"question_id":1835976,"body_markdown":"I&#39;d choose 7243. Large enough to avoid collissions with small numbers. Doesn&#39;t overflow to small numbers quickly.","title":"What is a sensible prime for hashcode calculation?","body":"<p>I'd choose 7243. Large enough to avoid collissions with small numbers. Doesn't overflow to small numbers quickly.</p>\n"},{"comments":[{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":5,"creation_date":1259821068,"post_id":1836590,"comment_id":1730806,"body_markdown":"Of course it does not matter much, but changing the prime it is an obvious and easy way to improve things. So why not do it?","body":"Of course it does not matter much, but changing the prime it is an obvious and easy way to improve things. So why not do it?"},{"owner":{"account_id":78475,"reputation":12729,"user_id":223339,"accept_rate":100,"display_name":"Romain"},"score":1,"creation_date":1259828097,"post_id":1836590,"comment_id":1731219,"body_markdown":"Agreed. I primarily meant to put a bit of emphasis on the fact using primes is not the *only* way of doing things, as the question ultimately has a very &quot;generic&quot; scope.","body":"Agreed. I primarily meant to put a bit of emphasis on the fact using primes is not the <i>only</i> way of doing things, as the question ultimately has a very &quot;generic&quot; scope."},{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":0,"creation_date":1598439224,"post_id":1836590,"comment_id":112457623,"body_markdown":"BTW: Using &amp;&amp; would be very bad since that tends to decrease the number of bits set after each step. Using ^ is better but, as someone pointed out, using i ^ j would mean the result is 0 if they are equal, which is intuitively also a rather common case.","body":"BTW: Using &amp;&amp; would be very bad since that tends to decrease the number of bits set after each step. Using ^ is better but, as someone pointed out, using i ^ j would mean the result is 0 if they are equal, which is intuitively also a rather common case."}],"tags":[],"owner":{"account_id":78475,"reputation":12729,"user_id":223339,"accept_rate":100,"display_name":"Romain"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1259796052,"creation_date":1259796052,"answer_id":1836590,"question_id":1835976,"body_markdown":"Collisions may not be such a big issue... The primary goal of the hash is to avoid using equals for 1:1 comparisons.\r\nIf you have an implementation where equals is &quot;generally&quot; extremely cheap for objects that have collided hashs, then this is not an issue (at all).\r\n\r\nIn the end, what is the best way of hashing depends on what you are comparing. In the case of an int pair (as in your example), using basic bitwise operators could be sufficient (as using &amp; or ^).","title":"What is a sensible prime for hashcode calculation?","body":"<p>Collisions may not be such a big issue... The primary goal of the hash is to avoid using equals for 1:1 comparisons.\nIf you have an implementation where equals is \"generally\" extremely cheap for objects that have collided hashs, then this is not an issue (at all).</p>\n\n<p>In the end, what is the best way of hashing depends on what you are comparing. In the case of an int pair (as in your example), using basic bitwise operators could be sufficient (as using &amp; or ^).</p>\n"},{"comments":[{"owner":{"account_id":129609,"reputation":3070,"user_id":328304,"display_name":"Jason"},"score":1,"creation_date":1273699254,"post_id":2816747,"comment_id":2863053,"body_markdown":"You&#39;re looking for a magic number for a perfect hash, or a nearly perfect one at any rate.  I&#39;d be more interested in seeing a solution for arbitrary inputs up to the hash size (eg, 4 2-byte values in an 8 byte hashcode), than this particular case of simple transposition.","body":"You&#39;re looking for a magic number for a perfect hash, or a nearly perfect one at any rate.  I&#39;d be more interested in seeing a solution for arbitrary inputs up to the hash size (eg, 4 2-byte values in an 8 byte hashcode), than this particular case of simple transposition."},{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":2,"creation_date":1274172794,"post_id":2816747,"comment_id":2899335,"body_markdown":"8 byte hashcode? At least in Java this is 4 bytes. Anyway: you could just continue the scheme that is used in eclipse hashCode generation: result = prime * result + i; result = prime * result + j; and so forth. For this 92821 is probably a good choice as prime - at least much better than the eclipse default 31.","body":"8 byte hashcode? At least in Java this is 4 bytes. Anyway: you could just continue the scheme that is used in eclipse hashCode generation: result = prime * result + i; result = prime * result + j; and so forth. For this 92821 is probably a good choice as prime - at least much better than the eclipse default 31."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":1,"creation_date":1496546351,"post_id":2816747,"comment_id":75703233,"body_markdown":"Not only is using a small constant wrong, re-using it is also wrong, as you get collisions like `newArrayList(&quot;a&quot;, &quot;bc&quot;).hashCode() == newArrayList(&quot;ab&quot;, &quot;c&quot;).hashCode()` (my example mayn&#39;t work, but something similar does).","body":"Not only is using a small constant wrong, re-using it is also wrong, as you get collisions like <code>newArrayList(&quot;a&quot;, &quot;bc&quot;).hashCode() == newArrayList(&quot;ab&quot;, &quot;c&quot;).hashCode()</code> (my example mayn&#39;t work, but something similar does)."},{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":0,"creation_date":1496728636,"post_id":2816747,"comment_id":75764859,"body_markdown":"@maaartinus You are right that there are many much better hash algorithms out there. I was just trying to point out an easy but worthwhile improvement to an often used simple algorithm. If you want really good properties, there are libraries for that which are much better, but that&#39;s often overkill.","body":"@maaartinus You are right that there are many much better hash algorithms out there. I was just trying to point out an easy but worthwhile improvement to an often used simple algorithm. If you want really good properties, there are libraries for that which are much better, but that&#39;s often overkill."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1496735392,"post_id":2816747,"comment_id":75768455,"body_markdown":"@Dr.Hans-PeterSt&#246;rr What I mean: Even if we call `n` a good constant, using it everywhere can&#39;t be right as it produces needless conflicts in a systematic way. Using one constant for strings and a different one for lists is IMHO better.","body":"@Dr.Hans-PeterSt&#246;rr What I mean: Even if we call <code>n</code> a good constant, using it everywhere can&#39;t be right as it produces needless conflicts in a systematic way. Using one constant for strings and a different one for lists is IMHO better."},{"owner":{"account_id":68306,"reputation":19143,"user_id":199364,"accept_rate":83,"display_name":"ToolmakerSteve"},"score":0,"creation_date":1519871562,"post_id":2816747,"comment_id":85088729,"body_markdown":"@maaartinus - Hmm, interesting hypothesis. However, my instinct is that the nature of the distribution for different types is so different, that the issue you mention isn&#39;t what dominates. I&#39;m more concerned by what I thought you were bringing up: is it dubious to repeat use of the same prime, for each additional input value? I&#39;m thinking one should use *different* primes at each *multiply-add* step.","body":"@maaartinus - Hmm, interesting hypothesis. However, my instinct is that the nature of the distribution for different types is so different, that the issue you mention isn&#39;t what dominates. I&#39;m more concerned by what I thought you were bringing up: is it dubious to repeat use of the same prime, for each additional input value? I&#39;m thinking one should use <i>different</i> primes at each <i>multiply-add</i> step."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1519874496,"post_id":2816747,"comment_id":85089377,"body_markdown":"@ToolmakerSteve Primes aren&#39;t actually any better than other odd numbers (unless you use both small keys and a prime-sized hash table, which you most probably don&#39;t). If you want to use more constants, then you may also replace the *multiply-add* step by *sum of multiples* and [get a factor of nearly three speedup as a bonus](https://stackoverflow.com/q/21745619/581205). If I was to write a generator, I&#39;d derive the multipliers from both the class name and field name (or index). The problem is how to detect a good multiplier. It must be odd, big and have funny bit patterns. ;)","body":"@ToolmakerSteve Primes aren&#39;t actually any better than other odd numbers (unless you use both small keys and a prime-sized hash table, which you most probably don&#39;t). If you want to use more constants, then you may also replace the <i>multiply-add</i> step by <i>sum of multiples</i> and <a href=\"https://stackoverflow.com/q/21745619/581205\">get a factor of nearly three speedup as a bonus</a>. If I was to write a generator, I&#39;d derive the multipliers from both the class name and field name (or index). The problem is how to detect a good multiplier. It must be odd, big and have funny bit patterns. ;)"},{"owner":{"account_id":68306,"reputation":19143,"user_id":199364,"accept_rate":83,"display_name":"ToolmakerSteve"},"score":0,"creation_date":1519876145,"post_id":2816747,"comment_id":85089788,"body_markdown":"@maaartinus - it would surprise me if using different constants for different classes had a significant (&gt; 10%) benefit, except in exceedingly rare situations. But if you were going to do that, don&#39;t try to &quot;detect&quot; a good multiplier: just make a table of 256 of them, and XOR the bytes of the hash of the class name to get index.","body":"@maaartinus - it would surprise me if using different constants for different classes had a significant (&gt; 10%) benefit, except in exceedingly rare situations. But if you were going to do that, don&#39;t try to &quot;detect&quot; a good multiplier: just make a table of 256 of them, and XOR the bytes of the hash of the class name to get index."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":1,"creation_date":1519940973,"post_id":2816747,"comment_id":85123434,"body_markdown":"@ToolmakerSteve I also doubt, 10% is doable. For an application, it&#39;s improbably worth the effort. If we could redesign the whole Java hashing, then 10% might be achievable (avoiding stupid collisions like the `hashCode` being zero for any new Map.Entry with equal key and value, etc.) while even 0.1% being probably a worthy improvement.","body":"@ToolmakerSteve I also doubt, 10% is doable. For an application, it&#39;s improbably worth the effort. If we could redesign the whole Java hashing, then 10% might be achievable (avoiding stupid collisions like the <code>hashCode</code> being zero for any new Map.Entry with equal key and value, etc.) while even 0.1% being probably a worthy improvement."},{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":0,"creation_date":1520024334,"post_id":2816747,"comment_id":85160400,"body_markdown":"@ToolmakerSteve The idea to use multiple primes is surely a good one that costs nothing, though I&#39;m a bit at loss how to tell which are good ones. But perhaps any with more than 16 bits will do just fine.\n\nBy the way, since you care about that topic: could you perhaps vote to reopen the question? Someone wrongly marked this as a duplicate, needlessly preventing any new interesting answers, if there are some.","body":"@ToolmakerSteve The idea to use multiple primes is surely a good one that costs nothing, though I&#39;m a bit at loss how to tell which are good ones. But perhaps any with more than 16 bits will do just fine.  By the way, since you care about that topic: could you perhaps vote to reopen the question? Someone wrongly marked this as a duplicate, needlessly preventing any new interesting answers, if there are some."}],"tags":[],"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"comment_count":10,"down_vote_count":0,"up_vote_count":87,"is_accepted":true,"score":87,"last_activity_date":1427887800,"creation_date":1273649204,"answer_id":2816747,"question_id":1835976,"body_markdown":"I recommend using **92821**. Here&#39;s why.\r\n\r\nTo give a meaningful answer to this you have to know something about the possible values of `i` and `j`. The only thing I can think of in general is, that in many cases small values will be more common than large values. (The odds of 15 appearing as a value in your program are much better than, say, 438281923.) So it seems a good idea to make the smallest hashcode collision as large as possible by choosing an appropriate prime. For 31 this rather bad - already for `i=-1` and `j=31` you have the same hash value as for `i=0` and `j=0`.\r\n\r\nSince this is interesting, I&#39;ve written a little program that searched the whole int range for the best prime in this sense. That is, for each prime I searched for the minimum value of `Math.abs(i) + Math.abs(j)` over all values of `i,j` that have the same hashcode as `0,0`, and then took the prime where this minimum value is as large as possible. \r\n\r\n*Drumroll*: the best prime in this sense is 486187739 (with the smallest collision being `i=-25486, j=67194`). Nearly as good and much easier to remember is 92821 with the smallest collision being `i=-46272 and j=46016`.\r\n\r\nIf you give &quot;small&quot; another meaning and want to be the minimum of `Math.sqrt(i*i+j*j)` for the collision as large as possible, the results are a little different: the best would be 1322837333 with `i=-6815 and j=70091`, but my favourite 92821 (smallest collision `-46272,46016`) is again almost as good as the best value.\r\n\r\nI do acknowledge that it is quite debatable whether these calculation make much sense in practice. But I do think that taking 92821 as prime makes much more sense than 31, unless you have good reasons not to.","title":"What is a sensible prime for hashcode calculation?","body":"<p>I recommend using <strong>92821</strong>. Here's why.</p>\n\n<p>To give a meaningful answer to this you have to know something about the possible values of <code>i</code> and <code>j</code>. The only thing I can think of in general is, that in many cases small values will be more common than large values. (The odds of 15 appearing as a value in your program are much better than, say, 438281923.) So it seems a good idea to make the smallest hashcode collision as large as possible by choosing an appropriate prime. For 31 this rather bad - already for <code>i=-1</code> and <code>j=31</code> you have the same hash value as for <code>i=0</code> and <code>j=0</code>.</p>\n\n<p>Since this is interesting, I've written a little program that searched the whole int range for the best prime in this sense. That is, for each prime I searched for the minimum value of <code>Math.abs(i) + Math.abs(j)</code> over all values of <code>i,j</code> that have the same hashcode as <code>0,0</code>, and then took the prime where this minimum value is as large as possible. </p>\n\n<p><em>Drumroll</em>: the best prime in this sense is 486187739 (with the smallest collision being <code>i=-25486, j=67194</code>). Nearly as good and much easier to remember is 92821 with the smallest collision being <code>i=-46272 and j=46016</code>.</p>\n\n<p>If you give \"small\" another meaning and want to be the minimum of <code>Math.sqrt(i*i+j*j)</code> for the collision as large as possible, the results are a little different: the best would be 1322837333 with <code>i=-6815 and j=70091</code>, but my favourite 92821 (smallest collision <code>-46272,46016</code>) is again almost as good as the best value.</p>\n\n<p>I do acknowledge that it is quite debatable whether these calculation make much sense in practice. But I do think that taking 92821 as prime makes much more sense than 31, unless you have good reasons not to.</p>\n"},{"comments":[{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":3,"creation_date":1476770845,"post_id":40055299,"comment_id":67473401,"body_markdown":"Primes are an easy way to ensure that every hashcode actually occurs, so that you don&#39;t waste any bit if the integer space to distribute them widely. I&#39;m not quite sure whether there are other advandages. But you&#39;re right that 27 probably does that as well. So it&#39;s about equally bad as the original choice 31 - you&#39;ll get very small hash code colissions, too. ;-)","body":"Primes are an easy way to ensure that every hashcode actually occurs, so that you don&#39;t waste any bit if the integer space to distribute them widely. I&#39;m not quite sure whether there are other advandages. But you&#39;re right that 27 probably does that as well. So it&#39;s about equally bad as the original choice 31 - you&#39;ll get very small hash code colissions, too. ;-)"},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1496547084,"post_id":40055299,"comment_id":75703339,"body_markdown":"@Dr.Hans-PeterSt&#246;rr For hash tables of sizes which are powers of two, all you need is an odd multiplier, prime or not. Prime multipliers are important for prime-sized tables as they don&#39;t have any factor in common (unless you&#39;re unlucky enough to use the same prime :D). AFAIK the only use of a prime-sized table in JDK is in `String#intern`.","body":"@Dr.Hans-PeterSt&#246;rr For hash tables of sizes which are powers of two, all you need is an odd multiplier, prime or not. Prime multipliers are important for prime-sized tables as they don&#39;t have any factor in common (unless you&#39;re unlucky enough to use the same prime :D). AFAIK the only use of a prime-sized table in JDK is in <code>String#intern</code>."},{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":0,"creation_date":1496694442,"post_id":40055299,"comment_id":75755203,"body_markdown":"@maaartinus An odd multiplier is needed / sufficient for what exactly? As I discussed, hashcode collisions are bad for the performance and small multipliers generate more hashcode collisions, since small values for the attributes are more likely than large values.","body":"@maaartinus An odd multiplier is needed / sufficient for what exactly? As I discussed, hashcode collisions are bad for the performance and small multipliers generate more hashcode collisions, since small values for the attributes are more likely than large values."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1496695903,"post_id":40055299,"comment_id":75755935,"body_markdown":"@Dr.Hans-PeterSt&#246;rr An odd multiplier is *necessary* in order not to lose information (the worst multipliers are those ending with many zeros in binary). Losing information is obviously bad and trivial to avoid. +++ We agree that small multipliers are also bad. +++ My point was *primarity*. A multiplier like `m = 101*103*107*109` is a disaster for a hash table of size `103` (but nobody uses such sizes). For a power-of-two-sized table it&#39;s most probably much better than `31`. So is it probably for a table of a size co-prime to `m`.","body":"@Dr.Hans-PeterSt&#246;rr An odd multiplier is <i>necessary</i> in order not to lose information (the worst multipliers are those ending with many zeros in binary). Losing information is obviously bad and trivial to avoid. +++ We agree that small multipliers are also bad. +++ My point was <i>primarity</i>. A multiplier like <code>m = 101*103*107*109</code> is a disaster for a hash table of size <code>103</code> (but nobody uses such sizes). For a power-of-two-sized table it&#39;s most probably much better than <code>31</code>. So is it probably for a table of a size co-prime to <code>m</code>."},{"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"score":1,"creation_date":1496728870,"post_id":40055299,"comment_id":75764964,"body_markdown":"@maaartinus Yes, that&#39;s the obvious property the multiplier should satisfy. I was trying to point that you can easily make it better if you look a little further, and reduce the hash code collisions by putting just a little more thought into it. And these hurt performance no matter what the table size is.","body":"@maaartinus Yes, that&#39;s the obvious property the multiplier should satisfy. I was trying to point that you can easily make it better if you look a little further, and reduce the hash code collisions by putting just a little more thought into it. And these hurt performance no matter what the table size is."}],"tags":[],"owner":{"account_id":31516,"reputation":571,"user_id":86600,"accept_rate":0,"display_name":"neoedmund"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476509126,"creation_date":1476509126,"answer_id":40055299,"question_id":1835976,"body_markdown":"I just want to point out that hashcode has nothing to do with prime. \r\nIn JDK implementation \r\n\r\n    for (int i = 0; i &lt; value.length; i++) {\r\n                    h = 31 * h + val[i];\r\n                }\r\n\r\nI found if you replace **31** with **27**, the result are very similar.","title":"What is a sensible prime for hashcode calculation?","body":"<p>I just want to point out that hashcode has nothing to do with prime. \nIn JDK implementation </p>\n\n<pre><code>for (int i = 0; i &lt; value.length; i++) {\n                h = 31 * h + val[i];\n            }\n</code></pre>\n\n<p>I found if you replace <strong>31</strong> with <strong>27</strong>, the result are very similar.</p>\n"}],"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22767,"favorite_count":0,"down_vote_count":0,"up_vote_count":70,"accepted_answer_id":2816747,"answer_count":6,"score":70,"last_activity_date":1686222457,"creation_date":1259789700,"question_id":1835976,"body_markdown":"Eclipse 3.5 has a very nice feature to generate Java hashCode() functions. It would generate for example (slightly shortened:)\r\n\r\n    class HashTest {\r\n        int i;\r\n        int j;        \r\n        public int hashCode() {\r\n            final int prime = 31;\r\n            int result = prime + i;\r\n            result = prime * result + j;\r\n            return result;\r\n        }\r\n    }\r\n\r\n(If you have more attributes in the class, `result = prime * result + attribute.hashCode();` is repeated for each additional attribute. For ints .hashCode() can be omitted.)\r\n\r\nThis seems fine but for the choice 31 for the prime. It is probably taken from the [hashCode implementation of Java String][1], which was used for performance reasons that are long gone after the introduction of hardware multipliers. Here you have many hashcode collisions for small values of i and j: for example (0,0) and (-1,31) have the same value. I think that is a Bad Thing(TM), since small values occur often. For String.hashCode you&#39;ll also find many short strings with the same hashcode, for instance &quot;Ca&quot; and &quot;DB&quot;. If you take a large prime, this problem disappears if you choose the prime right.\r\n\r\nSo my question: what is a good prime to choose? What criteria do you apply to find it? \r\n\r\nThis is meant as a general question - so I do not want to give a range for i and j. But I suppose in most applications relatively small values occur more often than large values. (If you have large values the choice of the prime is probably unimportant.) It might not make much of a difference, but a better choice is an easy and obvious way to improve this - so why not do it? Commons lang [HashCodeBuilder][2] also suggests curiously small values.\r\n\r\n(**Clarification**: this is *not* a duplicate of [Why does Java&#39;s hashCode() in String use 31 as a multiplier?][1] since my question is not concerned with the history of the 31 in the JDK, but on what would be a better value in new code using the same basic template. None of the answers there try to answer that.)\r\n\r\n  [1]: https://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier\r\n  [2]: http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/HashCodeBuilder.html","title":"What is a sensible prime for hashcode calculation?","body":"<p>Eclipse 3.5 has a very nice feature to generate Java hashCode() functions. It would generate for example (slightly shortened:)</p>\n\n<pre><code>class HashTest {\n    int i;\n    int j;        \n    public int hashCode() {\n        final int prime = 31;\n        int result = prime + i;\n        result = prime * result + j;\n        return result;\n    }\n}\n</code></pre>\n\n<p>(If you have more attributes in the class, <code>result = prime * result + attribute.hashCode();</code> is repeated for each additional attribute. For ints .hashCode() can be omitted.)</p>\n\n<p>This seems fine but for the choice 31 for the prime. It is probably taken from the <a href=\"https://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier\">hashCode implementation of Java String</a>, which was used for performance reasons that are long gone after the introduction of hardware multipliers. Here you have many hashcode collisions for small values of i and j: for example (0,0) and (-1,31) have the same value. I think that is a Bad Thing(TM), since small values occur often. For String.hashCode you'll also find many short strings with the same hashcode, for instance \"Ca\" and \"DB\". If you take a large prime, this problem disappears if you choose the prime right.</p>\n\n<p>So my question: what is a good prime to choose? What criteria do you apply to find it? </p>\n\n<p>This is meant as a general question - so I do not want to give a range for i and j. But I suppose in most applications relatively small values occur more often than large values. (If you have large values the choice of the prime is probably unimportant.) It might not make much of a difference, but a better choice is an easy and obvious way to improve this - so why not do it? Commons lang <a href=\"http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/HashCodeBuilder.html\" rel=\"noreferrer\">HashCodeBuilder</a> also suggests curiously small values.</p>\n\n<p>(<strong>Clarification</strong>: this is <em>not</em> a duplicate of <a href=\"https://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier\">Why does Java's hashCode() in String use 31 as a multiplier?</a> since my question is not concerned with the history of the 31 in the JDK, but on what would be a better value in new code using the same basic template. None of the answers there try to answer that.)</p>\n"},{"tags":["javascript","java","html","ajax","restful-url"],"comments":[{"owner":{"account_id":4351726,"reputation":1186,"user_id":3551833,"display_name":"Kai"},"score":0,"creation_date":1686211626,"post_id":76429777,"comment_id":134768874,"body_markdown":"You have an extra slash in: `let parmURL = &#39;http://localhost:8080/LocationWeb/LocCon/listAllLocations/&#39;`. If you remove that, does it resolve your issue? Depending if your router is sensitive to that, it might cause your problem","body":"You have an extra slash in: <code>let parmURL = &#39;http:&#47;&#47;localhost:8080&#47;LocationWeb&#47;LocCon&#47;listAllLocations&#47;&#39;</code>&zwnj;&#8203;. If you remove that, does it resolve your issue? Depending if your router is sensitive to that, it might cause your problem"},{"owner":{"account_id":16555258,"reputation":220,"user_id":11962586,"display_name":"S14321K"},"score":0,"creation_date":1686212029,"post_id":76429777,"comment_id":134768948,"body_markdown":"In deletRecord() itself in xhr.send(); its getting in to that 404 page.","body":"In deletRecord() itself in xhr.send(); its getting in to that 404 page."},{"owner":{"account_id":4351726,"reputation":1186,"user_id":3551833,"display_name":"Kai"},"score":0,"creation_date":1686212434,"post_id":76429777,"comment_id":134769032,"body_markdown":"You mean both functions do the right thing but you get redirected to a 404 page? I see that your anchor link forwards the user to: `href=&quot;deleteLocation?id=${location.id}&quot;`. So it forwards the user to (GET) `/deleteLocation`. Does this path exist? If you want to not forward the user, you could just do `&lt;a href=&quot;#trigger&quot;`. This will trigger the functions, but not update your page.","body":"You mean both functions do the right thing but you get redirected to a 404 page? I see that your anchor link forwards the user to: <code>href=&quot;deleteLocation?id=${location.id}&quot;</code>. So it forwards the user to (GET) <code>&#47;deleteLocation</code>. Does this path exist? If you want to not forward the user, you could just do <code>&lt;a href=&quot;#trigger&quot;</code>. This will trigger the functions, but not update your page."},{"owner":{"account_id":16555258,"reputation":220,"user_id":11962586,"display_name":"S14321K"},"score":0,"creation_date":1686212574,"post_id":76429777,"comment_id":134769052,"body_markdown":"Yeah I can do this way. But I&#39;m trying to go with Ajax call. Let me see whether this href works correctly. Please give me a moment.4","body":"Yeah I can do this way. But I&#39;m trying to go with Ajax call. Let me see whether this href works correctly. Please give me a moment.4"},{"owner":{"account_id":16555258,"reputation":220,"user_id":11962586,"display_name":"S14321K"},"score":0,"creation_date":1686212936,"post_id":76429777,"comment_id":134769109,"body_markdown":"`&lt;td&gt;&lt;a href=&quot;deleteLocation?id=${location.id}&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;` I tried this way now. Didn&#39;t work. Something is wrong with the mappin I guess. Because deletion is happening at the backend.","body":"<code>&lt;td&gt;&lt;a href=&quot;deleteLocation?id=${location.id}&quot;&gt;Delete&lt;&#47;a&gt;&lt;&#47;td&gt;</code> I tried this way now. Didn&#39;t work. Something is wrong with the mappin I guess. Because deletion is happening at the backend."},{"owner":{"account_id":16555258,"reputation":220,"user_id":11962586,"display_name":"S14321K"},"score":0,"creation_date":1686213502,"post_id":76429777,"comment_id":134769217,"body_markdown":"No this  didn&#39;t even delete. I checked the console log. Previous thing made delete function. Only the page was not displayed.","body":"No this  didn&#39;t even delete. I checked the console log. Previous thing made delete function. Only the page was not displayed."}],"owner":{"account_id":16555258,"reputation":220,"user_id":11962586,"display_name":"S14321K"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686221975,"creation_date":1686211113,"question_id":76429777,"body_markdown":"I&#39;m trying to make a ajax call to delete and get a new page in response. But facing 404 error.\r\n\r\n    &lt;c:forEach items=&quot;${listLocation}&quot; var=&quot;location&quot;&gt;\r\n    &lt;tr&gt;\r\n      &lt;td&gt;${location.id}&lt;/td&gt;\r\n      &lt;td&gt;${location.code}&lt;/td&gt;\r\n      &lt;td&gt;${location.name}&lt;/td&gt;\r\n      &lt;td&gt;${location.type}&lt;/td&gt;\r\n      &lt;td&gt;&lt;a href=&quot;deleteLocation?id=${location.id}&quot; id=&quot;locID&quot; onclick=&quot;return deleteRecord(&#39;${location.id}&#39;);&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;/c:forEach&gt;\r\n\r\n\r\n\r\nAjax call\r\n\r\n\r\n\r\n    function deleteRecord(locId) \r\n        {\r\n\t       \tlet contextURL = &#39;http://localhost:8080/LocationWeb/LocCon/deleteLocation/&#39;\r\n\t       \tlet parmURL = contextURL + locId;\r\n\t        var xhr = new XMLHttpRequest();\r\n\t        xhr.open(&quot;DELETE&quot;, parmURL);\r\n\t        xhr.send();\r\n\t        xhr.onload = function() \r\n\t        {\r\n\t            if (xhr.status != 200) \r\n\t            {\r\n\t            \tconsole.log(&#39;ERROR&#39;);\r\n\t            }\r\n\t            else\r\n\t            {\r\n\t              listAllPageCall();\r\n\t            }\r\n            };\r\n\t        xhr.onerror = function()\r\n\t        {\r\n\t          console.log(&#39;NO CONNECTION&#39;);\r\n\t        };\r\n        }\r\n        \r\n\t    function listAllPageCall() \r\n\t    {\r\n\t       \tlet parmURL = &#39;http://localhost:8080/LocationWeb/LocCon/listAllLocations/&#39;\r\n\t        var xhr = new XMLHttpRequest();\r\n\t        xhr.open(&quot;GET&quot;, parmURL);\r\n\t        xhr.send();\r\n\t        xhr.onload = function() \r\n\t        {\r\n\t            if (xhr.status != 200) \r\n\t            {\r\n\t            \tconsole.log(&#39;ERROR&#39;);\r\n\t            }\r\n\t            else\r\n\t            {\r\n\t            \tconsole.log(&#39;Called&#39;);\r\n\t            }\r\n\t        };\r\n\t        xhr.onerror = function()\r\n\t        {\r\n\t          console.log(&#39;NO CONNECTION&#39;);\r\n\t        };\r\n\t    }\r\n\r\n\r\n\r\n**Spring Boot code flow**\r\n\r\nThis is to call the webpage to be displayed\r\n\r\n    @GetMapping(&quot;/listAllLocations&quot;)\r\n    public String displayLocations(ModelMap resModMap)\r\n    {\r\n    \tList&lt;Location&gt; listLocation = locationService.getAllLocation();\r\n        resModMap.addAttribute(&quot;listLocation&quot;, listLocation);\r\n    \treturn &quot;displayAllLocations&quot;;\r\n    }\r\n\r\n\r\nThis is to delete and call the webpage like above one. Both response are same. But still getting the white lable error 404\r\n\r\n    @DeleteMapping(&quot;/deleteLocation/{id}&quot;)\r\n    public String deleteLocation(@PathVariable int id, ModelMap resModMap)\r\n    {\r\n        //Location location = locationService.getLocationByID(id);\r\n        Location location = new Location();\r\n        location.setId(id);\r\n        locationService.deleteLocation(location);\r\n        List&lt;Location&gt; listLocation = locationService.getAllLocation();\r\n        resModMap.addAttribute(&quot;listLocation&quot;, listLocation);\r\n    \treturn &quot;displayAllLocations&quot;;\r\n    }\r\n\r\nDelete is happening. Only the page is not getting displayed on response. Please help me.\r\n\r\nI tried this way. By calling the get function in return. But no luck\r\n\r\n    @DeleteMapping(&quot;/deleteLocation/{id}&quot;)\r\n    public void deleteLocation(@PathVariable int id, ModelMap resModMap)\r\n    {\r\n        //Location location = locationService.getLocationByID(id);\r\n        Location location = new Location();\r\n        location.setId(id);\r\n        locationService.deleteLocation(location);\r\n        displayLocations(resModMap);\r\n    }\r\n\r\n\r\nChecked in debug, its getting into \r\n\r\n    xhr.onerror = function()\r\n    {\r\n       console.log(&#39;NO CONNECTION&#39;);\r\n    };\r\n\r\n[![enter image description here][1]][1]\r\n\r\nShould I get response as webpage? Anything like that should be added?\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nTried @RequestMapping, this works good.\r\n\r\n    @RequestMapping(&quot;deleteLocation&quot;)\r\n    public void deleteLocation(@RequestParam(&quot;id&quot;) int id, ModelMap resModMap)\r\n    {\r\n        //Location location = locationService.getLocationByID(id);\r\n        Location location = new Location();\r\n        location.setId(id);\r\n        locationService.deleteLocation(location);\r\n        List&lt;Location&gt; listLocation = locationService.getAllLocation();\r\n        resModMap.addAttribute(&quot;listLocation&quot;, listLocation);\r\n    \treturn &quot;displayAllLocations&quot;;\r\n    }\r\n\r\nIn jsp\r\n\r\n    &lt;td&gt;&lt;a href=&quot;deleteLocation?id=${location.id}&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xg6QT.png\r\n  [2]: https://i.stack.imgur.com/LtxKp.png","title":"Ajax response 404 for @DeleteMapping","body":"<p>I'm trying to make a ajax call to delete and get a new page in response. But facing 404 error.</p>\n<pre><code>&lt;c:forEach items=&quot;${listLocation}&quot; var=&quot;location&quot;&gt;\n&lt;tr&gt;\n  &lt;td&gt;${location.id}&lt;/td&gt;\n  &lt;td&gt;${location.code}&lt;/td&gt;\n  &lt;td&gt;${location.name}&lt;/td&gt;\n  &lt;td&gt;${location.type}&lt;/td&gt;\n  &lt;td&gt;&lt;a href=&quot;deleteLocation?id=${location.id}&quot; id=&quot;locID&quot; onclick=&quot;return deleteRecord('${location.id}');&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/c:forEach&gt;\n</code></pre>\n<p>Ajax call</p>\n<pre><code>function deleteRecord(locId) \n    {\n        let contextURL = 'http://localhost:8080/LocationWeb/LocCon/deleteLocation/'\n        let parmURL = contextURL + locId;\n        var xhr = new XMLHttpRequest();\n        xhr.open(&quot;DELETE&quot;, parmURL);\n        xhr.send();\n        xhr.onload = function() \n        {\n            if (xhr.status != 200) \n            {\n                console.log('ERROR');\n            }\n            else\n            {\n              listAllPageCall();\n            }\n        };\n        xhr.onerror = function()\n        {\n          console.log('NO CONNECTION');\n        };\n    }\n    \n    function listAllPageCall() \n    {\n        let parmURL = 'http://localhost:8080/LocationWeb/LocCon/listAllLocations/'\n        var xhr = new XMLHttpRequest();\n        xhr.open(&quot;GET&quot;, parmURL);\n        xhr.send();\n        xhr.onload = function() \n        {\n            if (xhr.status != 200) \n            {\n                console.log('ERROR');\n            }\n            else\n            {\n                console.log('Called');\n            }\n        };\n        xhr.onerror = function()\n        {\n          console.log('NO CONNECTION');\n        };\n    }\n</code></pre>\n<p><strong>Spring Boot code flow</strong></p>\n<p>This is to call the webpage to be displayed</p>\n<pre><code>@GetMapping(&quot;/listAllLocations&quot;)\npublic String displayLocations(ModelMap resModMap)\n{\n    List&lt;Location&gt; listLocation = locationService.getAllLocation();\n    resModMap.addAttribute(&quot;listLocation&quot;, listLocation);\n    return &quot;displayAllLocations&quot;;\n}\n</code></pre>\n<p>This is to delete and call the webpage like above one. Both response are same. But still getting the white lable error 404</p>\n<pre><code>@DeleteMapping(&quot;/deleteLocation/{id}&quot;)\npublic String deleteLocation(@PathVariable int id, ModelMap resModMap)\n{\n    //Location location = locationService.getLocationByID(id);\n    Location location = new Location();\n    location.setId(id);\n    locationService.deleteLocation(location);\n    List&lt;Location&gt; listLocation = locationService.getAllLocation();\n    resModMap.addAttribute(&quot;listLocation&quot;, listLocation);\n    return &quot;displayAllLocations&quot;;\n}\n</code></pre>\n<p>Delete is happening. Only the page is not getting displayed on response. Please help me.</p>\n<p>I tried this way. By calling the get function in return. But no luck</p>\n<pre><code>@DeleteMapping(&quot;/deleteLocation/{id}&quot;)\npublic void deleteLocation(@PathVariable int id, ModelMap resModMap)\n{\n    //Location location = locationService.getLocationByID(id);\n    Location location = new Location();\n    location.setId(id);\n    locationService.deleteLocation(location);\n    displayLocations(resModMap);\n}\n</code></pre>\n<p>Checked in debug, its getting into</p>\n<pre><code>xhr.onerror = function()\n{\n   console.log('NO CONNECTION');\n};\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/xg6QT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xg6QT.png\" alt=\"enter image description here\" /></a></p>\n<p>Should I get response as webpage? Anything like that should be added?</p>\n<p><a href=\"https://i.stack.imgur.com/LtxKp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LtxKp.png\" alt=\"enter image description here\" /></a></p>\n<p>Tried @RequestMapping, this works good.</p>\n<pre><code>@RequestMapping(&quot;deleteLocation&quot;)\npublic void deleteLocation(@RequestParam(&quot;id&quot;) int id, ModelMap resModMap)\n{\n    //Location location = locationService.getLocationByID(id);\n    Location location = new Location();\n    location.setId(id);\n    locationService.deleteLocation(location);\n    List&lt;Location&gt; listLocation = locationService.getAllLocation();\n    resModMap.addAttribute(&quot;listLocation&quot;, listLocation);\n    return &quot;displayAllLocations&quot;;\n}\n</code></pre>\n<p>In jsp</p>\n<pre><code>&lt;td&gt;&lt;a href=&quot;deleteLocation?id=${location.id}&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;\n</code></pre>\n"},{"tags":["java","android","crashlytics"],"comments":[{"owner":{"account_id":8980168,"reputation":1529,"user_id":6695655,"display_name":"RajaKumar"},"score":0,"creation_date":1696489901,"post_id":76431063,"comment_id":136160033,"body_markdown":"Did you found any solution for this issue?","body":"Did you found any solution for this issue?"},{"owner":{"account_id":1744671,"reputation":624,"user_id":1595156,"accept_rate":22,"display_name":"Arpit"},"score":0,"creation_date":1696920913,"post_id":76431063,"comment_id":136210788,"body_markdown":"No, I did not find any solution.","body":"No, I did not find any solution."}],"owner":{"account_id":1744671,"reputation":624,"user_id":1595156,"accept_rate":22,"display_name":"Arpit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686221328,"creation_date":1686221328,"question_id":76431063,"body_markdown":"I am getting **java.lang.NullPointerException - Attempt to invoke interface method &#39;void android.app.Application$ActivityLifecycleCallbacks.onActivityPreCreated** on launch of Activity(**SplashActivity**). It is not happening for everyone but for some users on production. I am not able to reproduce at my end. Sharing full Logs for reference, let me know if any other details are needed.\r\n\r\nThanks in advance for the help!!\r\n\r\n&gt; Fatal Exception: java.lang.RuntimeException: Unable to start activity ComponentInfo{ActivityName}: java.lang.NullPointerException: Attempt to invoke interface method &#39;void android.app.Application$ActivityLifecycleCallbacks.onActivityPreCreated(android.app.Activity, android.os.Bundle)&#39; on a null object reference\r\n       at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3454)\r\n       at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3593)\r\n       at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\r\n       at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:140)\r\n       at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:96)\r\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2126)\r\n       at android.os.Handler.dispatchMessage(Handler.java:107)\r\n       at android.os.Looper.loop(Looper.java:264)\r\n       at android.app.ActivityThread.main(ActivityThread.java:7684)\r\n       at java.lang.reflect.Method.invoke(Method.java)\r\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:980)","title":"Application.dispatchActivityPreCreated - java.lang.NullPointerException","body":"<p>I am getting <strong>java.lang.NullPointerException - Attempt to invoke interface method 'void android.app.Application$ActivityLifecycleCallbacks.onActivityPreCreated</strong> on launch of Activity(<strong>SplashActivity</strong>). It is not happening for everyone but for some users on production. I am not able to reproduce at my end. Sharing full Logs for reference, let me know if any other details are needed.</p>\n<p>Thanks in advance for the help!!</p>\n<blockquote>\n<p>Fatal Exception: java.lang.RuntimeException: Unable to start activity ComponentInfo{ActivityName}: java.lang.NullPointerException: Attempt to invoke interface method 'void android.app.Application$ActivityLifecycleCallbacks.onActivityPreCreated(android.app.Activity, android.os.Bundle)' on a null object reference\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3454)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3593)\nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:140)\nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:96)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2126)\nat android.os.Handler.dispatchMessage(Handler.java:107)\nat android.os.Looper.loop(Looper.java:264)\nat android.app.ActivityThread.main(ActivityThread.java:7684)\nat java.lang.reflect.Method.invoke(Method.java)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:980)</p>\n</blockquote>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686311655,"post_id":76429969,"comment_id":134784951,"body_markdown":"First why are you using bracket versions? and why using properties for the dependencies.. does that dependency not offer a bom file ... Is that a multi module build?","body":"First why are you using bracket versions? and why using properties for the dependencies.. does that dependency not offer a bom file ... Is that a multi module build?"},{"owner":{"account_id":2185239,"reputation":600,"user_id":1933783,"accept_rate":17,"display_name":"Indra Yadav"},"score":0,"creation_date":1686563555,"post_id":76429969,"comment_id":134810539,"body_markdown":"yes it is a multi-module build, I am using property because i have to use the same artifacts in different child poms, and during new release, i can change the version directly from Jenkins build instead of changing the pom and creating a new Pull Request every time the version changes","body":"yes it is a multi-module build, I am using property because i have to use the same artifacts in different child poms, and during new release, i can change the version directly from Jenkins build instead of changing the pom and creating a new Pull Request every time the version changes"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686567510,"post_id":76429969,"comment_id":134811361,"body_markdown":"I would suggest to use dependencyManagement instead of properties ... which means single location in your parent in the dependencyManagement single location where change is needed that&#39;s it... Changing the release of the modules which you have inside your multi module build? You should consider using maven-release-pluging or using versions-maven-plugin instead of using properties or alike...","body":"I would suggest to use dependencyManagement instead of properties ... which means single location in your parent in the dependencyManagement single location where change is needed that&#39;s it... Changing the release of the modules which you have inside your multi module build? You should consider using maven-release-pluging or using versions-maven-plugin instead of using properties or alike..."},{"owner":{"account_id":2185239,"reputation":600,"user_id":1933783,"accept_rate":17,"display_name":"Indra Yadav"},"score":0,"creation_date":1686652492,"post_id":76429969,"comment_id":134825258,"body_markdown":"we are using maven-release-plugin with dependency management, in this case itself we need to change the version of artifacts for release, and to do that we want to update that version during Jenkins build instead of physically changing it and making new commits","body":"we are using maven-release-plugin with dependency management, in this case itself we need to change the version of artifacts for release, and to do that we want to update that version during Jenkins build instead of physically changing it and making new commits"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686674034,"post_id":76429969,"comment_id":134830396,"body_markdown":"Why do you need to change that yourself.. that&#39;s what maven-release-plugin does automatically... ...That sounds like there is something wrong in there ... or the setup/configuration of the plugins or alike are wrong..","body":"Why do you need to change that yourself.. that&#39;s what maven-release-plugin does automatically... ...That sounds like there is something wrong in there ... or the setup/configuration of the plugins or alike are wrong.."},{"owner":{"account_id":2185239,"reputation":600,"user_id":1933783,"accept_rate":17,"display_name":"Indra Yadav"},"score":0,"creation_date":1687447272,"post_id":76429969,"comment_id":134941174,"body_markdown":"because maven-release update to latest version but we want a specific version while release so instead of changing pom and commit we want to pass it through jenkins job argument and then update it during jenkins build","body":"because maven-release update to latest version but we want a specific version while release so instead of changing pom and commit we want to pass it through jenkins job argument and then update it during jenkins build"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1687514768,"post_id":76429969,"comment_id":134950916,"body_markdown":"`because maven-release update to latest version but we want a specific version while release` ? I don&#39;t understand that sentence because you can define the new release version via command line property... ?","body":"<code>because maven-release update to latest version but we want a specific version while release</code> ? I don&#39;t understand that sentence because you can define the new release version via command line property... ?"}],"answers":[{"comments":[{"owner":{"account_id":2185239,"reputation":600,"user_id":1933783,"accept_rate":17,"display_name":"Indra Yadav"},"score":0,"creation_date":1686295070,"post_id":76431035,"comment_id":134781986,"body_markdown":"Thanks, i don&#39;t want to run the same set property command multiple times, because we have lots of properties and it may take time, i opened jira issue on the plugin repo they said there is no such feature for the required use case, so maybe i have to go with different plugin","body":"Thanks, i don&#39;t want to run the same set property command multiple times, because we have lots of properties and it may take time, i opened jira issue on the plugin repo they said there is no such feature for the required use case, so maybe i have to go with different plugin"}],"tags":[],"owner":{"account_id":28779188,"reputation":11,"user_id":22041141,"display_name":"jlt"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686221073,"creation_date":1686221073,"answer_id":76431035,"question_id":76429969,"body_markdown":"The versions:set-property command can only update one property at a time. Something like:\r\n\r\n    mvn versions:set-property -Dproperty=myartifact.version -DnewVersion=10.1.1\r\n    mvn versions:set-property -Dproperty=mysecondArtifact.version -DnewVersion=10.5.1\r\n\r\nYou potentially could also want to create a bash script in which you pass 2 parameters and run those two lines above with the values you just passed.\r\n\r\nYou can also set the properties in the pom like this:\r\n\r\n    &lt;properties&gt;\r\n       &lt;myartifact.version&gt;10.1.1&lt;/myartifact.version&gt;\r\n       &lt;mysecondArtifact.version&gt;10.5.1&lt;/mysecondArtifact.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n","title":"How to set/update multiple property in maven during or before maven build","body":"<p>The versions:set-property command can only update one property at a time. Something like:</p>\n<pre><code>mvn versions:set-property -Dproperty=myartifact.version -DnewVersion=10.1.1\nmvn versions:set-property -Dproperty=mysecondArtifact.version -DnewVersion=10.5.1\n</code></pre>\n<p>You potentially could also want to create a bash script in which you pass 2 parameters and run those two lines above with the values you just passed.</p>\n<p>You can also set the properties in the pom like this:</p>\n<pre><code>&lt;properties&gt;\n   &lt;myartifact.version&gt;10.1.1&lt;/myartifact.version&gt;\n   &lt;mysecondArtifact.version&gt;10.5.1&lt;/mysecondArtifact.version&gt;\n&lt;/properties&gt;\n</code></pre>\n"}],"owner":{"account_id":2185239,"reputation":600,"user_id":1933783,"accept_rate":17,"display_name":"Indra Yadav"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686221073,"creation_date":1686212918,"question_id":76429969,"body_markdown":"My pom structure looks like - and i am using org.codehaus.mojo:versions-maven-plugin:2.16.0\r\n\r\n   \r\n\r\n     &lt;dependency&gt;\r\n          &lt;groupId&gt;com.foo.bar&lt;/groupId&gt;\r\n          &lt;artifactId&gt;manchu-core&lt;/artifactId&gt;\r\n          &lt;version&gt;[${myartifact.version}]&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        ...\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.foo.bar&lt;/groupId&gt;\r\n          &lt;artifactId&gt;manchu-extra&lt;/artifactId&gt;\r\n          &lt;version&gt;[${mysecondArtifact.version}]&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\nNow i want to set different versions for the property of both versions during Maven build.\r\ni tried `mvn versions:set-property -Dpropery=myartifact.version -DnewVersion=10.1.1`, but set-propery only set single property and does not set both property values \r\n\r\nif I pass it using comma-separated value, it only takes the last property not both\r\n\r\n    mvn versions:set-property -Dpropery=myartifact.version -DnewVersion=10.1.1, -Dpropery=mysecondartifact.version -DnewVersion=10.5.1\r\n\r\n\r\nis there any other option I can use to update/set multiple properties&#39; values?\r\n\r\n\r\nThanks in advance ","title":"How to set/update multiple property in maven during or before maven build","body":"<p>My pom structure looks like - and i am using org.codehaus.mojo:versions-maven-plugin:2.16.0</p>\n<pre><code> &lt;dependency&gt;\n      &lt;groupId&gt;com.foo.bar&lt;/groupId&gt;\n      &lt;artifactId&gt;manchu-core&lt;/artifactId&gt;\n      &lt;version&gt;[${myartifact.version}]&lt;/version&gt;\n    &lt;/dependency&gt;\n    ...\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.foo.bar&lt;/groupId&gt;\n      &lt;artifactId&gt;manchu-extra&lt;/artifactId&gt;\n      &lt;version&gt;[${mysecondArtifact.version}]&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Now i want to set different versions for the property of both versions during Maven build.\ni tried <code>mvn versions:set-property -Dpropery=myartifact.version -DnewVersion=10.1.1</code>, but set-propery only set single property and does not set both property values</p>\n<p>if I pass it using comma-separated value, it only takes the last property not both</p>\n<pre><code>mvn versions:set-property -Dpropery=myartifact.version -DnewVersion=10.1.1, -Dpropery=mysecondartifact.version -DnewVersion=10.5.1\n</code></pre>\n<p>is there any other option I can use to update/set multiple properties' values?</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","android","nfc"],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686220720,"creation_date":1686220720,"answer_id":76430994,"question_id":76430211,"body_markdown":"One possible problem the `PendingIntent.FLAG_IMMUTABLE` should be `PendingIntent.FLAG_MUTABLE`\r\n\r\nThis is because a `PendingIntent` is an object can be handed to other applications so that they can perform the action you described on your behalf at a later time. \r\n\r\nSo you are handing this to the System NFC service which then adds the NFC data and returns it to at a later time, Thus it has to be changeable (Mutable).\r\n\r\nAlso from the [docs][1] You can see in the example it has to be Mutable.\r\n\r\nAlso note that using `enableForegroundDispatch` is actually not the best way to use NFC using `enableReaderMode` is a newer and much better API to use NFC. `enableReaderMode` does not use Intent&#39;s and gives you more control, it is easy to do NFC operations in a background Thread (which is recommended), for writing to NFC Tag&#39;s it is much more reliable and leads to less errors.\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc#foreground-dispatch","title":"Scanning NFC type v tag","body":"<p>One possible problem the <code>PendingIntent.FLAG_IMMUTABLE</code> should be <code>PendingIntent.FLAG_MUTABLE</code></p>\n<p>This is because a <code>PendingIntent</code> is an object can be handed to other applications so that they can perform the action you described on your behalf at a later time.</p>\n<p>So you are handing this to the System NFC service which then adds the NFC data and returns it to at a later time, Thus it has to be changeable (Mutable).</p>\n<p>Also from the <a href=\"https://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc#foreground-dispatch\" rel=\"nofollow noreferrer\">docs</a> You can see in the example it has to be Mutable.</p>\n<p>Also note that using <code>enableForegroundDispatch</code> is actually not the best way to use NFC using <code>enableReaderMode</code> is a newer and much better API to use NFC. <code>enableReaderMode</code> does not use Intent's and gives you more control, it is easy to do NFC operations in a background Thread (which is recommended), for writing to NFC Tag's it is much more reliable and leads to less errors.</p>\n"}],"owner":{"account_id":28778760,"reputation":13,"user_id":22040799,"display_name":"Justin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76430994,"answer_count":1,"score":1,"last_activity_date":1686220720,"creation_date":1686214714,"question_id":76430211,"body_markdown":"I am developing an application in Android studio that should be to scan for an NFC type v tag. If I can just instantiate the tag object then I can perform further operations with the tag but I am having trouble with scanning the tag. \r\n\r\nAndroidManifest.xml \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-feature\r\n        android:name=&quot;android.hardware.nfc&quot;\r\n        android:required=&quot;true&quot; /&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.NFC&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.NfcTool&quot;\r\n        tools:targetApi=&quot;30&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.nfc.action.TECH_DISCOVERED&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nand here is my MainActivity.java\r\n\r\n```\r\npackage com.example.nfctool;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.PendingIntent;\r\nimport android.content.Intent;\r\nimport android.nfc.NfcAdapter;\r\nimport android.nfc.Tag;\r\nimport android.nfc.tech.NfcV;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private NfcAdapter nfcAdapter;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n\r\n        // Enable NFC foreground dispatch to capture NFC intents\r\n\r\n        // creates an explicit intent to launch the MainActivity when an NFC intent is dispatched.\r\n        Intent intent = new Intent(this, MainActivity.class);\r\n\r\n        // This flag ensures that if the MainActivity is already in the foreground, it will not be recreated and instead receive the NFC intent in its onNewIntent() method.\r\n        intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);\r\n\r\n        // creates a pending intent that wraps the intent we created earlier. It will be used to handle the NFC intent when it arrives.\r\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_IMMUTABLE);\r\n\r\n        // enables the foreground dispatch system for NFC intents\r\n        nfcAdapter.enableForegroundDispatch(this, pendingIntent, null, null);\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n\r\n        // Disable NFC foreground dispatch\r\n        nfcAdapter.disableForegroundDispatch(this);\r\n    }\r\n\r\n    @Override\r\n    protected void onNewIntent(Intent intent) {\r\n        super.onNewIntent(intent);\r\n\r\n        Log.d(&quot;DEBUG&quot;,&quot;###############&quot; + intent.getAction());\r\n\r\n        // Check if the intent has an NFC tag\r\n//        if(intent.getAction() == NfcAdapter.ACTION_TECH_DISCOVERED){\r\n        if (NfcAdapter.ACTION_TECH_DISCOVERED.equals(intent.getAction())){\r\n\r\n            // Get the tag object\r\n            Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\r\n\r\n            // Check if the tag supports NfcV technology\r\n            if (NfcV.get(tag) != null) {\r\n\r\n                // Instantiate the NfcV object with the tag\r\n                NfcV nfcvTag = NfcV.get(tag);\r\n\r\n                // Use the NfcV object for further operations\r\n                // ...\r\n\r\n\r\n                Toast.makeText(this, &quot;NFC tag detected&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n\r\n                Toast.makeText(this, &quot;Unsupported tag technology&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nwhen I log the value of intent.getAction() in the onNewIntent method it logs a null value\r\n`D  ###############null`\r\n\r\nSo I know that the action of the intent is not being set. IF someone could point out where I am going wrong or what I am missing it would be greatly appreciated. \r\n","title":"Scanning NFC type v tag","body":"<p>I am developing an application in Android studio that should be to scan for an NFC type v tag. If I can just instantiate the tag object then I can perform further operations with the tag but I am having trouble with scanning the tag.</p>\n<p>AndroidManifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-feature\n        android:name=&quot;android.hardware.nfc&quot;\n        android:required=&quot;true&quot; /&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.NFC&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.NfcTool&quot;\n        tools:targetApi=&quot;30&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.nfc.action.TECH_DISCOVERED&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>and here is my MainActivity.java</p>\n<pre><code>package com.example.nfctool;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.app.PendingIntent;\nimport android.content.Intent;\nimport android.nfc.NfcAdapter;\nimport android.nfc.Tag;\nimport android.nfc.tech.NfcV;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.widget.Toast;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    private NfcAdapter nfcAdapter;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n\n        // Enable NFC foreground dispatch to capture NFC intents\n\n        // creates an explicit intent to launch the MainActivity when an NFC intent is dispatched.\n        Intent intent = new Intent(this, MainActivity.class);\n\n        // This flag ensures that if the MainActivity is already in the foreground, it will not be recreated and instead receive the NFC intent in its onNewIntent() method.\n        intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);\n\n        // creates a pending intent that wraps the intent we created earlier. It will be used to handle the NFC intent when it arrives.\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_IMMUTABLE);\n\n        // enables the foreground dispatch system for NFC intents\n        nfcAdapter.enableForegroundDispatch(this, pendingIntent, null, null);\n\n\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n\n        // Disable NFC foreground dispatch\n        nfcAdapter.disableForegroundDispatch(this);\n    }\n\n    @Override\n    protected void onNewIntent(Intent intent) {\n        super.onNewIntent(intent);\n\n        Log.d(&quot;DEBUG&quot;,&quot;###############&quot; + intent.getAction());\n\n        // Check if the intent has an NFC tag\n//        if(intent.getAction() == NfcAdapter.ACTION_TECH_DISCOVERED){\n        if (NfcAdapter.ACTION_TECH_DISCOVERED.equals(intent.getAction())){\n\n            // Get the tag object\n            Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\n\n            // Check if the tag supports NfcV technology\n            if (NfcV.get(tag) != null) {\n\n                // Instantiate the NfcV object with the tag\n                NfcV nfcvTag = NfcV.get(tag);\n\n                // Use the NfcV object for further operations\n                // ...\n\n\n                Toast.makeText(this, &quot;NFC tag detected&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n\n                Toast.makeText(this, &quot;Unsupported tag technology&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n}\n</code></pre>\n<p>when I log the value of intent.getAction() in the onNewIntent method it logs a null value\n<code>D  ###############null</code></p>\n<p>So I know that the action of the intent is not being set. IF someone could point out where I am going wrong or what I am missing it would be greatly appreciated.</p>\n"},{"tags":["java","oracle","spring-boot","spring-data"],"answers":[{"comments":[{"owner":{"account_id":5640336,"reputation":59,"user_id":4464403,"display_name":"VPCCP"},"score":0,"creation_date":1686220405,"post_id":76430936,"comment_id":134770525,"body_markdown":"I understand how Transactional works. I am eager to know why executing the procedure that creates a new entity and calling the read database function in the same transaction works, whereas executing an update procedure and calling the read function doesn&#39;t.","body":"I understand how Transactional works. I am eager to know why executing the procedure that creates a new entity and calling the read database function in the same transaction works, whereas executing an update procedure and calling the read function doesn&#39;t."},{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1686226649,"post_id":76430936,"comment_id":134771762,"body_markdown":"if you are using optimistic lock strategy of the ORM, and forgot to update the column used for it, the ORM may consider the row has not been updated and then return the cached one.","body":"if you are using optimistic lock strategy of the ORM, and forgot to update the column used for it, the ORM may consider the row has not been updated and then return the cached one."}],"tags":[],"owner":{"account_id":3868372,"reputation":4436,"user_id":3204335,"display_name":"MD Ruhul Amin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686220509,"creation_date":1686220179,"answer_id":76430936,"question_id":76430634,"body_markdown":"When a method is transactional it does not immediately commit the updates to the database, So immediate read does not reflect the updated values. \r\n\r\nI&#39;m not sure which ORM you are using, but if you really want to read immediately from the database while the transaction is still ongoing, you might consider something similar to `saveAndFlush`. \r\nPlease go through this document to fully understand why its still reading stall data:\r\n\r\n\r\n- [Spring Transaction Management: @Transactional In-Depth][1]\r\n\r\n\r\n  [1]: https://www.marcobehler.com/guides/spring-transaction-management-transactional-in-depth","title":"Updating an entity through database procedure and reading updated entity in spring transaction","body":"<p>When a method is transactional it does not immediately commit the updates to the database, So immediate read does not reflect the updated values.</p>\n<p>I'm not sure which ORM you are using, but if you really want to read immediately from the database while the transaction is still ongoing, you might consider something similar to <code>saveAndFlush</code>.\nPlease go through this document to fully understand why its still reading stall data:</p>\n<ul>\n<li><a href=\"https://www.marcobehler.com/guides/spring-transaction-management-transactional-in-depth\" rel=\"nofollow noreferrer\">Spring Transaction Management: @Transactional In-Depth</a></li>\n</ul>\n"}],"owner":{"account_id":5640336,"reputation":59,"user_id":4464403,"display_name":"VPCCP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686220509,"creation_date":1686217957,"question_id":76430634,"body_markdown":"I have a simple structure Controller - Service - Repository.\r\n\r\nI have an issue with executing Oracle procedure that updates an entity and immediately calling a read database function. The entity that read function returns is an old entity, before it was updated.\r\n\r\nThis is not a problem if the Service method is not annotated with @Transactional, but in that case I can see the updated value in database immediately after executing update procedure.","title":"Updating an entity through database procedure and reading updated entity in spring transaction","body":"<p>I have a simple structure Controller - Service - Repository.</p>\n<p>I have an issue with executing Oracle procedure that updates an entity and immediately calling a read database function. The entity that read function returns is an old entity, before it was updated.</p>\n<p>This is not a problem if the Service method is not annotated with @Transactional, but in that case I can see the updated value in database immediately after executing update procedure.</p>\n"},{"tags":["java","android","react-native","react-native-gesture-handler"],"answers":[{"tags":[],"owner":{"account_id":15263813,"reputation":61,"user_id":11013068,"display_name":"Ali Khajehpour"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686220327,"creation_date":1685873999,"answer_id":76399892,"question_id":75333212,"body_markdown":"According [to this page][1] in the documentation, you have to remove `RNGestureHandlerEnabledRootView` and use the below code in your `MainActivity`\r\n\r\nJava:\r\n```java\r\n@Override\r\nprotected ReactActivityDelegate createReactActivityDelegate() {\r\n    return new MainActivityDelegate(this, getMainComponentName());\r\n}\r\n```\r\n\r\nKotlin:\r\n```kotlin\r\noverride fun createReactActivityDelegate(): ReactActivityDelegate? {\r\n    return MainActivityDelegate(this, getMainComponentName())\r\n}\r\n```\r\n\r\n  [1]: https://docs.swmansion.com/react-native-gesture-handler/docs/guides/migrating-off-rnghenabledroot ","title":"Issue with RNGestureHandlerEnabledRootView not being supported : java.lang.UnsupportedOperationException","body":"<p>According <a href=\"https://docs.swmansion.com/react-native-gesture-handler/docs/guides/migrating-off-rnghenabledroot\" rel=\"nofollow noreferrer\">to this page</a> in the documentation, you have to remove <code>RNGestureHandlerEnabledRootView</code> and use the below code in your <code>MainActivity</code></p>\n<p>Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected ReactActivityDelegate createReactActivityDelegate() {\n    return new MainActivityDelegate(this, getMainComponentName());\n}\n</code></pre>\n<p>Kotlin:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun createReactActivityDelegate(): ReactActivityDelegate? {\n    return MainActivityDelegate(this, getMainComponentName())\n}\n</code></pre>\n"}],"owner":{"account_id":12687682,"reputation":742,"user_id":9218897,"display_name":"Preetika"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":698,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686220327,"creation_date":1675412999,"question_id":75333212,"body_markdown":"I am getting an issue with react-native-gesture-handler library. I have upgraded to the latest version &quot;^2.9.0&quot;. I am not able to run my build as it crashes on opening the app giving me a summary:- java.lang.UnsupportedOperationException: Your application is configured to use RNGestureHandlerEnabledRootView which is no longer supported. \r\n\r\nI have read the documentation for migrating off RNGHEnabledRootView but that too doesn&#39;t solve the problem. I have changed MainActivity.java file by editing :\r\n\r\n```\r\nimport com.swmansion.gesturehandler.RNGestureHandlerPackage;\r\n```\r\n\r\nBut getting issue with :\r\n\r\n```\r\n@Override\r\n    protected ReactActivityDelegate createReactActivityDelegate() {\r\n        return new ReactActivityDelegateWrapper(this, new ReactActivityDelegate(this, getMainComponentName()) {\r\n            @Override\r\n            protected ReactRootView createRootView() {\r\n                return new RNGestureHandlerEnabledRootView(MainActivity.this);\r\n            }\r\n        });\r\n    }\r\n```\r\n\r\nerror: cannot find symbol\r\n                return new RNGestureHandlerEnabledRootView(MainActivity.this);\r\n                           ^\r\n  symbol: class RNGestureHandlerEnabledRootView\r\n\r\n\r\nExecution failed for task &#39;:app:compileDebugJavaWithJavac&#39;.","title":"Issue with RNGestureHandlerEnabledRootView not being supported : java.lang.UnsupportedOperationException","body":"<p>I am getting an issue with react-native-gesture-handler library. I have upgraded to the latest version &quot;^2.9.0&quot;. I am not able to run my build as it crashes on opening the app giving me a summary:- java.lang.UnsupportedOperationException: Your application is configured to use RNGestureHandlerEnabledRootView which is no longer supported.</p>\n<p>I have read the documentation for migrating off RNGHEnabledRootView but that too doesn't solve the problem. I have changed MainActivity.java file by editing :</p>\n<pre><code>import com.swmansion.gesturehandler.RNGestureHandlerPackage;\n</code></pre>\n<p>But getting issue with :</p>\n<pre><code>@Override\n    protected ReactActivityDelegate createReactActivityDelegate() {\n        return new ReactActivityDelegateWrapper(this, new ReactActivityDelegate(this, getMainComponentName()) {\n            @Override\n            protected ReactRootView createRootView() {\n                return new RNGestureHandlerEnabledRootView(MainActivity.this);\n            }\n        });\n    }\n</code></pre>\n<p>error: cannot find symbol\nreturn new RNGestureHandlerEnabledRootView(MainActivity.this);\n^\nsymbol: class RNGestureHandlerEnabledRootView</p>\n<p>Execution failed for task ':app:compileDebugJavaWithJavac'.</p>\n"},{"tags":["java","apache-nifi","startup"],"answers":[{"tags":[],"owner":{"account_id":26590,"reputation":9895,"user_id":69346,"accept_rate":73,"display_name":"codecowboy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686220210,"creation_date":1686219864,"answer_id":76430897,"question_id":76420871,"body_markdown":"The error log you posted indicates that Apache NiFi failed to start due to an issue with the `nifi.web.https` configuration in `nifi.properties`. More specifically, the error message states, &quot;The truststore properties are not valid&quot;, which suggests a problem with the truststore configuration.\r\n\r\nNiFi uses the truststore and keystore for its HTTPS configuration. The truststore contains certificates from other parties that NiFi should trust, while the keystore contains the private and public key for NiFi itself.\r\n\r\nHere are a few things you can check:\r\n\r\n1. **Check the path and password**: Verify the truststore path and password in your `nifi.properties` file. The entries should look something like this:\r\n\r\n   ```\r\n   nifi.security.truststore=./conf/truststore.jks\r\n   nifi.security.truststoreType=jks\r\n   nifi.security.truststorePasswd=yourTrustStorePassword\r\n   ```\r\n\r\n   Make sure the path points to the correct file and the password is correct. \r\n\r\n2. **Check the truststore file**: Confirm that your truststore file (e.g., `truststore.jks`) exists and is accessible. The path should be reachable from NiFi&#39;s point of view, and the file should have the correct permissions.\r\n\r\n3. **Confirm the truststore type**: NiFi supports multiple types of truststore files, such as JKS, PKCS12, and others. Make sure the truststore type specified in the properties file matches the actual type of the truststore file.\r\n\r\n4. **Ensure the truststore is not corrupted**: Try opening the truststore with a tool like `keytool` or `Keystore Explorer` to ensure it&#39;s not corrupted.\r\n\r\n5. **Verify certificates**: Ensure the truststore contains the necessary certificates. This error can occur if the truststore doesn&#39;t include the appropriate trusted certificates.\r\n\r\nIn short, this error suggests a problem with the truststore setup. Verify your truststore file, its path, its password, and its contents to resolve this error.\r\n\r\nI would also recommend that you do an audit of your Apache Nifi infrastructure as per this recent Malware warning : https://www.scmagazine.com/brief/cybercrime/apache-nifi-targeted-in-cryptomining-attacks\r\n","title":"Nifi is NOT starting up after the VM restart","body":"<p>The error log you posted indicates that Apache NiFi failed to start due to an issue with the <code>nifi.web.https</code> configuration in <code>nifi.properties</code>. More specifically, the error message states, &quot;The truststore properties are not valid&quot;, which suggests a problem with the truststore configuration.</p>\n<p>NiFi uses the truststore and keystore for its HTTPS configuration. The truststore contains certificates from other parties that NiFi should trust, while the keystore contains the private and public key for NiFi itself.</p>\n<p>Here are a few things you can check:</p>\n<ol>\n<li><p><strong>Check the path and password</strong>: Verify the truststore path and password in your <code>nifi.properties</code> file. The entries should look something like this:</p>\n<pre><code>nifi.security.truststore=./conf/truststore.jks\nnifi.security.truststoreType=jks\nnifi.security.truststorePasswd=yourTrustStorePassword\n</code></pre>\n<p>Make sure the path points to the correct file and the password is correct.</p>\n</li>\n<li><p><strong>Check the truststore file</strong>: Confirm that your truststore file (e.g., <code>truststore.jks</code>) exists and is accessible. The path should be reachable from NiFi's point of view, and the file should have the correct permissions.</p>\n</li>\n<li><p><strong>Confirm the truststore type</strong>: NiFi supports multiple types of truststore files, such as JKS, PKCS12, and others. Make sure the truststore type specified in the properties file matches the actual type of the truststore file.</p>\n</li>\n<li><p><strong>Ensure the truststore is not corrupted</strong>: Try opening the truststore with a tool like <code>keytool</code> or <code>Keystore Explorer</code> to ensure it's not corrupted.</p>\n</li>\n<li><p><strong>Verify certificates</strong>: Ensure the truststore contains the necessary certificates. This error can occur if the truststore doesn't include the appropriate trusted certificates.</p>\n</li>\n</ol>\n<p>In short, this error suggests a problem with the truststore setup. Verify your truststore file, its path, its password, and its contents to resolve this error.</p>\n<p>I would also recommend that you do an audit of your Apache Nifi infrastructure as per this recent Malware warning : <a href=\"https://www.scmagazine.com/brief/cybercrime/apache-nifi-targeted-in-cryptomining-attacks\" rel=\"nofollow noreferrer\">https://www.scmagazine.com/brief/cybercrime/apache-nifi-targeted-in-cryptomining-attacks</a></p>\n"}],"owner":{"account_id":2880357,"reputation":39,"user_id":12132466,"display_name":"vasanth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1686220210,"creation_date":1686123011,"question_id":76420871,"body_markdown":"Nifi version 1.19.0 was working fine in our VM until the VM had to be restarted due to a suspension of our cloud provider account. \r\nPost this the contents of the VM were replicated exactly using the snapshot of the VM.\r\nAfter this nifi is failing to start with error in the logs:\r\n    \r\n\r\n&gt; enter c2023-06-07 04:24:19,502 WARN [main]\r\n&gt; org.apache.nifi.web.server.JettyServer Failed to start web server...\r\n&gt; shutting down. java.lang.IllegalStateException: Invalid nifi.web.https\r\n&gt; configuration in nifi.properties\r\n&gt;         at org.apache.nifi.web.server.connector.FrameworkServerConnectorFactory.&lt;init&gt;(FrameworkServerConnectorFactory.java:89)\r\n&gt;         at org.apache.nifi.web.server.JettyServer.configureConnectors(JettyServer.java:738)\r\n&gt;         at org.apache.nifi.web.server.JettyServer.init(JettyServer.java:207)\r\n&gt;         at org.apache.nifi.web.server.JettyServer.initialize(JettyServer.java:1072)\r\n&gt;         at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:164)\r\n&gt;         at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:83)\r\n&gt;         at org.apache.nifi.NiFi.main(NiFi.java:332) Caused by: org.apache.nifi.security.util.TlsException: The truststore properties\r\n&gt; are not valid\r\n&gt;         at org.apache.nifi.security.util.SslContextFactory.getTrustManagers(SslContextFactory.java:181)\r\n&gt;         at org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:67)\r\n&gt;         at org.apache.nifi.web.server.connector.FrameworkServerConnectorFactory.&lt;init&gt;(FrameworkServerConnectorFactory.java:86)\r\n&gt;         ... 6 common frames omitted 2023-06-07 04:24:19,503 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown startedode\r\n&gt; here\r\n\r\nThings we have already checked:\r\n1. If there is any other application running in the same port as 8443.\r\n2. We emptied the content and provenance repos as mentioned in:https://stackoverflow.com/questions/44924289/apache-nifi-is-not-starting-up\r\n3. We changed the java version to 8 from 11.\r\n4. We tried to reboot nifi from a working flow.xml.gz and flow.json from a different machine.\r\n5. Tried to restart with a completely new nifi installation folder.\r\n\r\nHowever, so far I am getting the same error. Any help is appreciated.","title":"Nifi is NOT starting up after the VM restart","body":"<p>Nifi version 1.19.0 was working fine in our VM until the VM had to be restarted due to a suspension of our cloud provider account.\nPost this the contents of the VM were replicated exactly using the snapshot of the VM.\nAfter this nifi is failing to start with error in the logs:</p>\n<blockquote>\n<p>enter c2023-06-07 04:24:19,502 WARN [main]\norg.apache.nifi.web.server.JettyServer Failed to start web server...\nshutting down. java.lang.IllegalStateException: Invalid nifi.web.https\nconfiguration in nifi.properties\nat org.apache.nifi.web.server.connector.FrameworkServerConnectorFactory.(FrameworkServerConnectorFactory.java:89)\nat org.apache.nifi.web.server.JettyServer.configureConnectors(JettyServer.java:738)\nat org.apache.nifi.web.server.JettyServer.init(JettyServer.java:207)\nat org.apache.nifi.web.server.JettyServer.initialize(JettyServer.java:1072)\nat org.apache.nifi.NiFi.(NiFi.java:164)\nat org.apache.nifi.NiFi.(NiFi.java:83)\nat org.apache.nifi.NiFi.main(NiFi.java:332) Caused by: org.apache.nifi.security.util.TlsException: The truststore properties\nare not valid\nat org.apache.nifi.security.util.SslContextFactory.getTrustManagers(SslContextFactory.java:181)\nat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:67)\nat org.apache.nifi.web.server.connector.FrameworkServerConnectorFactory.(FrameworkServerConnectorFactory.java:86)\n... 6 common frames omitted 2023-06-07 04:24:19,503 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown startedode\nhere</p>\n</blockquote>\n<p>Things we have already checked:</p>\n<ol>\n<li>If there is any other application running in the same port as 8443.</li>\n<li>We emptied the content and provenance repos as mentioned in:<a href=\"https://stackoverflow.com/questions/44924289/apache-nifi-is-not-starting-up\">Apache nifi is not starting up</a></li>\n<li>We changed the java version to 8 from 11.</li>\n<li>We tried to reboot nifi from a working flow.xml.gz and flow.json from a different machine.</li>\n<li>Tried to restart with a completely new nifi installation folder.</li>\n</ol>\n<p>However, so far I am getting the same error. Any help is appreciated.</p>\n"},{"tags":["java","unit-testing","mockito","quarkus"],"answers":[{"tags":[],"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686208223,"creation_date":1686208223,"answer_id":76429401,"question_id":76427256,"body_markdown":"You can write a resource visible only for your test(s); no need to mock `@Context` objects because during test all is working as in a real http call\r\nPS: I suspect this type of objects can&#39;t be mocked,but someone from Quarkus team can give you a precise answer about that.\r\n\r\n```\r\n@QuarkusTest\r\n@TestHttpEndpoint(TestResource.class)\r\nclass CLASS_ApiMetrics_UT_Test {\r\n  @Inject\r\n  ApiMetrics apiMetrics;\r\n\r\n  @Test\r\n  void test() {\r\n    RestAssured.given().get().then().statusCode(200);\r\n    assertCondition(expected, apiMetrics.propertyToTest);\r\n  }\r\n\r\n  @Path(&quot;api-metrics-test&quot;)\r\n  public static class TestResource {\r\n    @Path(&quot;&quot;)\r\n    @GET\r\n    public void doSomething() {...}\r\n  }\r\n}\r\n```","title":"ResourceInfo @Mock not working, throwing NPE in QuarkusTest","body":"<p>You can write a resource visible only for your test(s); no need to mock <code>@Context</code> objects because during test all is working as in a real http call\nPS: I suspect this type of objects can't be mocked,but someone from Quarkus team can give you a precise answer about that.</p>\n<pre><code>@QuarkusTest\n@TestHttpEndpoint(TestResource.class)\nclass CLASS_ApiMetrics_UT_Test {\n  @Inject\n  ApiMetrics apiMetrics;\n\n  @Test\n  void test() {\n    RestAssured.given().get().then().statusCode(200);\n    assertCondition(expected, apiMetrics.propertyToTest);\n  }\n\n  @Path(&quot;api-metrics-test&quot;)\n  public static class TestResource {\n    @Path(&quot;&quot;)\n    @GET\n    public void doSomething() {...}\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1115215,"reputation":10877,"user_id":1104727,"display_name":"Holly Cummins"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686220180,"creation_date":1686212683,"answer_id":76429939,"question_id":76427256,"body_markdown":"The `resourceInfo` and `httpServerRequest` fields should be annotated with `@InjectMock`, not `@Mock`. \r\n\r\n\r\nThe `@Mock` annotation doesn&#39;t actually mark an injection point, which is why nothing is getting injected and you&#39;re seeing the NPE. `io.quarkus.test.Mock` is intended to be applied to an actual mock implementation, not the injection point. It defines a global mock which would be used everywhere something used `@Inject`, in test mode. \r\n\r\n## Test with `@InjectMock`\r\n\r\nHere&#39;s what your test should look like \r\n\r\n```\r\n@QuarkusTest\r\nclass CLASS_ApiMetrics_UT_Test {\r\n\r\n    @Inject\r\n    ApiMetrics apiMetrics;\r\n\r\n    @InjectMock\r\n    ResourceInfo resourceInfo;\r\n\r\n    @InjectMock\r\n    HttpServerRequest httpServerRequest;\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n       when(resourceInfo.getResourceMethod()).thenReturn(method);       \r\n       when(httpServerRequest.getFormAttribute(BODY_REQUESTER_ID)).thenReturn(expectedRequesterId);\r\n    }\r\n```\r\n\r\n## Using `@Mock`\r\nIf you wanted to use the global `@Mock` approach instead, you would do something like \r\n\r\n```\r\n@Inject\r\nResourceInfo resourceInfo;\r\n```\r\n\r\nin the test class (note that it&#39;s just a normal `@Inject`). Then you&#39;d manually define a mock implementation class:\r\n\r\n```\r\n@Mock\r\npublic class MockResourceInfo implements ResourceInfo {\r\n\r\n    public void doAThing() {\r\n       // mock implementation goes here\r\n    }\r\n\r\n    public void notifyInvoiceAlreadySent(Invoice invoice) {\r\n\r\n    }\r\n}\r\n```\r\n\r\nThat way of doing it is sometimes handy, but it has the disadvantage that Mockito can&#39;t help you define the mock, and the same mock implementations is used in all test classes. So generally `@InjectMock` is better.\r\n\r\nThe [Quarkus docs](https://quarkus.io/blog/mocking/) have more explanation of the different mock annotations.","title":"ResourceInfo @Mock not working, throwing NPE in QuarkusTest","body":"<p>The <code>resourceInfo</code> and <code>httpServerRequest</code> fields should be annotated with <code>@InjectMock</code>, not <code>@Mock</code>.</p>\n<p>The <code>@Mock</code> annotation doesn't actually mark an injection point, which is why nothing is getting injected and you're seeing the NPE. <code>io.quarkus.test.Mock</code> is intended to be applied to an actual mock implementation, not the injection point. It defines a global mock which would be used everywhere something used <code>@Inject</code>, in test mode.</p>\n<h2>Test with <code>@InjectMock</code></h2>\n<p>Here's what your test should look like</p>\n<pre><code>@QuarkusTest\nclass CLASS_ApiMetrics_UT_Test {\n\n    @Inject\n    ApiMetrics apiMetrics;\n\n    @InjectMock\n    ResourceInfo resourceInfo;\n\n    @InjectMock\n    HttpServerRequest httpServerRequest;\n\n    @BeforeEach\n    public void setup() {\n       when(resourceInfo.getResourceMethod()).thenReturn(method);       \n       when(httpServerRequest.getFormAttribute(BODY_REQUESTER_ID)).thenReturn(expectedRequesterId);\n    }\n</code></pre>\n<h2>Using <code>@Mock</code></h2>\n<p>If you wanted to use the global <code>@Mock</code> approach instead, you would do something like</p>\n<pre><code>@Inject\nResourceInfo resourceInfo;\n</code></pre>\n<p>in the test class (note that it's just a normal <code>@Inject</code>). Then you'd manually define a mock implementation class:</p>\n<pre><code>@Mock\npublic class MockResourceInfo implements ResourceInfo {\n\n    public void doAThing() {\n       // mock implementation goes here\n    }\n\n    public void notifyInvoiceAlreadySent(Invoice invoice) {\n\n    }\n}\n</code></pre>\n<p>That way of doing it is sometimes handy, but it has the disadvantage that Mockito can't help you define the mock, and the same mock implementations is used in all test classes. So generally <code>@InjectMock</code> is better.</p>\n<p>The <a href=\"https://quarkus.io/blog/mocking/\" rel=\"nofollow noreferrer\">Quarkus docs</a> have more explanation of the different mock annotations.</p>\n"}],"owner":{"account_id":9182102,"reputation":115,"user_id":6825571,"accept_rate":50,"display_name":"Vanshaj Behl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1686220180,"creation_date":1686173754,"question_id":76427256,"body_markdown":"I am trying to create unit test for my interceptor class ApiMetrics\r\n\r\n    @Provider\r\n    public class ApiMetrics implements ContainerRequestFilter, ContainerResponseFilter {\r\n\r\n    @Context\r\n    ResourceInfo resourceInfo;\r\n\r\n    @Context\r\n    HttpServerRequest httpServerRequest;\r\n    ....\r\n    }\r\n\r\nMy Test Class is as follows, but on using @Mock annotation i&#39;m getting NPE on resourceInfo and httpServerRequest when trying to mock any of their methods (getResourceMethod). Also, I tried @Inject, @InjectMock as I&#39;m not sure how to mock a @context field but got dependency error.\r\n\r\n    \r\n    @QuarkusTest\r\n    class CLASS_ApiMetrics_UT_Test {\r\n\r\n    @Inject\r\n    ApiMetrics apiMetrics;\r\n\r\n    @Mock\r\n    ResourceInfo resourceInfo;\r\n\r\n    @Mock\r\n    HttpServerRequest httpServerRequest;\r\n    ....\r\n    }\r\n\r\nAlso if I use the following for mocking, \r\n    \r\n    ResourceInfo resourceInfo = Mockito.mock(ResourceInfo.class);\r\n    HttpServerRequest httpServerRequest = Mockito.mock(HttpServerRequest.class);\r\n    when(resourceInfo.getResourceMethod()).thenReturn(method);\r\n    when(httpServerRequest.getFormAttribute(BODY_REQUESTER_ID)).thenReturn(expectedRequesterId);\r\n    \r\nI get this error for the mocked Classes\r\nMethod threw &#39;org.jboss.resteasy.spi.LoggableFailure&#39; exception. Cannot evaluate com.sun.proxy.$Proxy141.toString()\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9pF1d.jpg","title":"ResourceInfo @Mock not working, throwing NPE in QuarkusTest","body":"<p>I am trying to create unit test for my interceptor class ApiMetrics</p>\n<pre><code>@Provider\npublic class ApiMetrics implements ContainerRequestFilter, ContainerResponseFilter {\n\n@Context\nResourceInfo resourceInfo;\n\n@Context\nHttpServerRequest httpServerRequest;\n....\n}\n</code></pre>\n<p>My Test Class is as follows, but on using @Mock annotation i'm getting NPE on resourceInfo and httpServerRequest when trying to mock any of their methods (getResourceMethod). Also, I tried @Inject, @InjectMock as I'm not sure how to mock a @context field but got dependency error.</p>\n<pre><code>@QuarkusTest\nclass CLASS_ApiMetrics_UT_Test {\n\n@Inject\nApiMetrics apiMetrics;\n\n@Mock\nResourceInfo resourceInfo;\n\n@Mock\nHttpServerRequest httpServerRequest;\n....\n}\n</code></pre>\n<p>Also if I use the following for mocking,</p>\n<pre><code>ResourceInfo resourceInfo = Mockito.mock(ResourceInfo.class);\nHttpServerRequest httpServerRequest = Mockito.mock(HttpServerRequest.class);\nwhen(resourceInfo.getResourceMethod()).thenReturn(method);\nwhen(httpServerRequest.getFormAttribute(BODY_REQUESTER_ID)).thenReturn(expectedRequesterId);\n</code></pre>\n<p>I get this error for the mocked Classes\nMethod threw 'org.jboss.resteasy.spi.LoggableFailure' exception. Cannot evaluate com.sun.proxy.$Proxy141.toString()</p>\n<p><a href=\"https://i.stack.imgur.com/9pF1d.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9pF1d.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","hibernate","validation","annotations"],"answers":[{"comments":[{"owner":{"account_id":14941157,"reputation":737,"user_id":10787804,"display_name":"Chris Garsonn"},"score":0,"creation_date":1544731310,"post_id":53769199,"comment_id":94390325,"body_markdown":"thank you very much. yes it is working like as you said, but, i need a primitive type, what can i do about changing dto class without touching model class ?(like not defining it as notnull etc.) if it is not possible then i can change model class.","body":"thank you very much. yes it is working like as you said, but, i need a primitive type, what can i do about changing dto class without touching model class ?(like not defining it as notnull etc.) if it is not possible then i can change model class."},{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1544731427,"post_id":53769199,"comment_id":94390357,"body_markdown":"Why do you need a primitive type? The primitive type is by default `false` and might be `true` is set. If you restrict the `Boolean` to be not `null`, it behaves the same. Moreover, you can work with `Boolean` the same as it is a `boolean`.","body":"Why do you need a primitive type? The primitive type is by default <code>false</code> and might be <code>true</code> is set. If you restrict the <code>Boolean</code> to be not <code>null</code>, it behaves the same. Moreover, you can work with <code>Boolean</code> the same as it is a <code>boolean</code>."},{"owner":{"account_id":14941157,"reputation":737,"user_id":10787804,"display_name":"Chris Garsonn"},"score":0,"creation_date":1544732250,"post_id":53769199,"comment_id":94390717,"body_markdown":"by the way i have dto class also. does it matter boolean or Boolean in my dto class ?","body":"by the way i have dto class also. does it matter boolean or Boolean in my dto class ?"},{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1544732352,"post_id":53769199,"comment_id":94390770,"body_markdown":"Nope, it really doesn&#39;t matter. See [Boolean vs. boolean](https://stackoverflow.com/questions/3728616/boolean-vs-boolean-in-java).","body":"Nope, it really doesn&#39;t matter. See <a href=\"https://stackoverflow.com/questions/3728616/boolean-vs-boolean-in-java\">Boolean vs. boolean</a>."},{"owner":{"account_id":14941157,"reputation":737,"user_id":10787804,"display_name":"Chris Garsonn"},"score":0,"creation_date":1544732901,"post_id":53769199,"comment_id":94390992,"body_markdown":"by the way it did not work. i thought it works when i change model class boolean to Boolean but not. and there is no error message.","body":"by the way it did not work. i thought it works when i change model class boolean to Boolean but not. and there is no error message."},{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1544732936,"post_id":53769199,"comment_id":94391005,"body_markdown":"What does mean &quot;it didn&#39;t work&quot;. What error message is shown?","body":"What does mean &quot;it didn&#39;t work&quot;. What error message is shown?"},{"owner":{"account_id":14941157,"reputation":737,"user_id":10787804,"display_name":"Chris Garsonn"},"score":0,"creation_date":1544733285,"post_id":53769199,"comment_id":94391147,"body_markdown":"same error: \nSEVERE: Servlet.service() for servlet [services] in context with path [] threw exception [Request processing failed; nested exception is javax.validation.UnexpectedTypeException: HV000030: No validator could be found for constraint &#39;org.hibernate.validator.constraints.NotBlank&#39; validating type &#39;java.lang.Boolean&#39;. Check configuration for &#39;disabled&#39;]","body":"same error:  SEVERE: Servlet.service() for servlet [services] in context with path [] threw exception [Request processing failed; nested exception is javax.validation.UnexpectedTypeException: HV000030: No validator could be found for constraint &#39;org.hibernate.validator.constraints.NotBlank&#39; validating type &#39;java.lang.Boolean&#39;. Check configuration for &#39;disabled&#39;]"},{"owner":{"account_id":11627789,"reputation":379,"user_id":8517040,"display_name":"Andres Rincon"},"score":0,"creation_date":1544733942,"post_id":53769199,"comment_id":94391423,"body_markdown":"remember changing NotBlank to NotNull and boolean to Boolean, because in the message I am still seeing &#39;org.hibernate.validator.constraints.NotBlank&#39;","body":"remember changing NotBlank to NotNull and boolean to Boolean, because in the message I am still seeing &#39;org.hibernate.validator.constraints.NotBlank&#39;"}],"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":8,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1544731833,"creation_date":1544730979,"answer_id":53769199,"question_id":53769165,"body_markdown":"You should use the [`@NotNull`][1] annotation.\r\n\r\nYour `boolean` is a primitive type, not an object type (`Boolean`) hence the constraint [`@NotNull`][1] cannot be applied since the primitive type cannot be `null`. The annotation performs the following validation (formatting added by me):\r\n\r\n&gt; The annotated element must not be `null`. Accepts any type.\r\n\r\nUse the object type:\r\n\r\n    @NotNull\r\n    @Column(name = &quot;DISABLE&quot;, nullable = false)\r\n    private Boolean disabled;\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/javax/validation/constraints/NotNull.html","title":"Java hibernate No validator could be found for boolean","body":"<p>You should use the <a href=\"http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/javax/validation/constraints/NotNull.html\" rel=\"noreferrer\"><code>@NotNull</code></a> annotation.</p>\n\n<p>Your <code>boolean</code> is a primitive type, not an object type (<code>Boolean</code>) hence the constraint <a href=\"http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/javax/validation/constraints/NotNull.html\" rel=\"noreferrer\"><code>@NotNull</code></a> cannot be applied since the primitive type cannot be <code>null</code>. The annotation performs the following validation (formatting added by me):</p>\n\n<blockquote>\n  <p>The annotated element must not be <code>null</code>. Accepts any type.</p>\n</blockquote>\n\n<p>Use the object type:</p>\n\n<pre><code>@NotNull\n@Column(name = \"DISABLE\", nullable = false)\nprivate Boolean disabled;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7437263,"reputation":1080,"user_id":5656255,"display_name":"Alexis Pavlidis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604023168,"creation_date":1544731189,"answer_id":53769246,"question_id":53769165,"body_markdown":"to solve this error you MUST use correct annotations. In the above problem, `@NotBlank` annotation must be applied to any String field only.\r\n\r\nTo validate boolean type field, use annotation `@NotNull` or use `Boolean` boxed type","title":"Java hibernate No validator could be found for boolean","body":"<p>to solve this error you MUST use correct annotations. In the above problem, <code>@NotBlank</code> annotation must be applied to any String field only.</p>\n<p>To validate boolean type field, use annotation <code>@NotNull</code> or use <code>Boolean</code> boxed type</p>\n"},{"tags":[],"owner":{"account_id":28772032,"reputation":1,"user_id":22035585,"display_name":"Upendra Rai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686219710,"creation_date":1686219121,"answer_id":76430806,"question_id":53769165,"body_markdown":"    If(Boolean.TRUE.equals(disabled)){\r\n    \r\n    //If you check this type of any Boolean value then check null value and also false both field}\r\n ","title":"Java hibernate No validator could be found for boolean","body":"<pre><code>If(Boolean.TRUE.equals(disabled)){\n\n//If you check this type of any Boolean value then check null value and also false both field}\n</code></pre>\n"}],"owner":{"account_id":14941157,"reputation":737,"user_id":10787804,"display_name":"Chris Garsonn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9995,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":53769199,"answer_count":3,"score":2,"last_activity_date":1686219710,"creation_date":1544730822,"question_id":53769165,"body_markdown":"I have a service method that tries to add an object with `store()` method of hibernate. get method is working for this DAO and service class whereas adding not working. In console there is no error.\r\n\r\n\tUrlWhiteListDaoImpl urlDao;\r\n\r\n\tMapperFacade mapper;\r\n\r\n\t@Autowired\r\n\tpublic UrlWhiteListingServiceImpl(UrlWhiteListDao urlWhiteListDao, MapperFacade mapper, UrlWhiteListDaoImpl urlDao) {\r\n\t\tthis.urlDao = urlDao;\r\n\t\tthis.urlWhiteListDao = urlWhiteListDao;\r\n\t\tthis.mapper = mapper;\r\n\t}\r\n\r\n    @Override\r\n    public UrlWhiteListDto addUrlWhiteListItem(UrlWhiteListDto urlWhiteListDto) throws Exception {\r\n      \tString domainUrlToBeAdded = parseUrl(urlWhiteListDto.getDomain());\r\n    \tif (isDomainExistbyName(domainUrlToBeAdded)) {\r\n    \t\tthrow new Exception(&quot;Already existed domain is tried to be added&quot;);\r\n    \t}\r\n    \tUrlWhitelist urlModel = mapper.map(urlWhiteListDto,UrlWhitelist.class);\r\n    \turlDao.store(urlModel);\r\n    \treturn urlWhiteListDto;\r\n}\r\n\r\nMy model class is:\r\n\r\n    @Entity\r\n    @Table(name = UrlWhitelist.TABLE_NAME)\r\n    public class UrlWhitelist implements EntityBean { \r\n\r\n        public static final String TABLE_NAME = &quot;URL_WHITE_LIST&quot;;\r\n\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;ID&quot;, nullable = false)\r\n        private Long id;\r\n\r\n        @NotBlank\r\n        @Column(name = &quot;DOMAIN&quot;, nullable = false)\r\n        private String domain;\r\n\r\n        @NotBlank\r\n        @Column(name = &quot;DISABLE&quot;, nullable = false)\r\n        private boolean disabled;\r\n\r\n        // getters &amp; setters omitted\r\n    }\r\n\r\nAnd DAO implementation class is:\r\n\r\n    public class UrlWhiteListDaoImpl extends EntityDaoImpl&lt;UrlWhitelist, Long&gt; implements UrlWhiteListDao {\r\n\r\n    \tprotected UrlWhiteListDaoImpl() {\r\n    \t\tsuper(UrlWhitelist.class);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic List&lt;UrlWhitelist&gt; getByDomainName(String name) {\r\n    \t\tDetachedCriteria criteria = DetachedCriteria.forClass(UrlWhitelist.class);\r\n    \t\tcriteria.add(Restrictions.eq(&quot;domain&quot;, name));\r\n    \t\treturn getAllByCriteria(criteria);\r\n    \t}\r\n    }\r\n\r\nIn console there is no error but in server log it says:\r\n\r\n&gt;  SEVERE: Servlet.service() for servlet [services] in context with path [] threw exception [Request processing failed; nested exception is javax.validation.UnexpectedTypeException: HV000030: No validator could be found for constraint &#39;org.hibernate.validator.constraints.NotBlank&#39; validating type &#39;java.lang.Boolean&#39;. Check configuration for &#39;disabled&#39;] with root cause\r\n    javax.validation.UnexpectedTypeException: HV000030: No validator could be found for constraint &#39;org.hibernate.validator.constraints.NotBlank&#39; validating type &#39;java.lang.Boolean&#39;. Check configuration for &#39;disabled&#39;\r\n\r\nI thought there is something wrong with mapping between to and model class, but, then why get method is working and only `store()` is not working? What is the solution ?","title":"Java hibernate No validator could be found for boolean","body":"<p>I have a service method that tries to add an object with <code>store()</code> method of hibernate. get method is working for this DAO and service class whereas adding not working. In console there is no error.</p>\n\n<pre><code>UrlWhiteListDaoImpl urlDao;\n\nMapperFacade mapper;\n\n@Autowired\npublic UrlWhiteListingServiceImpl(UrlWhiteListDao urlWhiteListDao, MapperFacade mapper, UrlWhiteListDaoImpl urlDao) {\n    this.urlDao = urlDao;\n    this.urlWhiteListDao = urlWhiteListDao;\n    this.mapper = mapper;\n}\n\n@Override\npublic UrlWhiteListDto addUrlWhiteListItem(UrlWhiteListDto urlWhiteListDto) throws Exception {\n    String domainUrlToBeAdded = parseUrl(urlWhiteListDto.getDomain());\n    if (isDomainExistbyName(domainUrlToBeAdded)) {\n        throw new Exception(\"Already existed domain is tried to be added\");\n    }\n    UrlWhitelist urlModel = mapper.map(urlWhiteListDto,UrlWhitelist.class);\n    urlDao.store(urlModel);\n    return urlWhiteListDto;\n</code></pre>\n\n<p>}</p>\n\n<p>My model class is:</p>\n\n<pre><code>@Entity\n@Table(name = UrlWhitelist.TABLE_NAME)\npublic class UrlWhitelist implements EntityBean { \n\n    public static final String TABLE_NAME = \"URL_WHITE_LIST\";\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"ID\", nullable = false)\n    private Long id;\n\n    @NotBlank\n    @Column(name = \"DOMAIN\", nullable = false)\n    private String domain;\n\n    @NotBlank\n    @Column(name = \"DISABLE\", nullable = false)\n    private boolean disabled;\n\n    // getters &amp; setters omitted\n}\n</code></pre>\n\n<p>And DAO implementation class is:</p>\n\n<pre><code>public class UrlWhiteListDaoImpl extends EntityDaoImpl&lt;UrlWhitelist, Long&gt; implements UrlWhiteListDao {\n\n    protected UrlWhiteListDaoImpl() {\n        super(UrlWhitelist.class);\n    }\n\n    @Override\n    public List&lt;UrlWhitelist&gt; getByDomainName(String name) {\n        DetachedCriteria criteria = DetachedCriteria.forClass(UrlWhitelist.class);\n        criteria.add(Restrictions.eq(\"domain\", name));\n        return getAllByCriteria(criteria);\n    }\n}\n</code></pre>\n\n<p>In console there is no error but in server log it says:</p>\n\n<blockquote>\n  <p>SEVERE: Servlet.service() for servlet [services] in context with path [] threw exception [Request processing failed; nested exception is javax.validation.UnexpectedTypeException: HV000030: No validator could be found for constraint 'org.hibernate.validator.constraints.NotBlank' validating type 'java.lang.Boolean'. Check configuration for 'disabled'] with root cause\n      javax.validation.UnexpectedTypeException: HV000030: No validator could be found for constraint 'org.hibernate.validator.constraints.NotBlank' validating type 'java.lang.Boolean'. Check configuration for 'disabled'</p>\n</blockquote>\n\n<p>I thought there is something wrong with mapping between to and model class, but, then why get method is working and only <code>store()</code> is not working? What is the solution ?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9842,"page":383,"page_size":100}
