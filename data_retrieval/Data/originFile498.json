{"items":[{"tags":["java","image","io","gif"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1681595341,"post_id":76024849,"comment_id":134082708,"body_markdown":"searching for  `[java] create animated gif` (field on the very top of this page) shows *some* [topics](https://stackoverflow.com/search?q=%5Bjava%5D+create+animated+gif)","body":"searching for  <code>[java] create animated gif</code> (field on the very top of this page) shows <i>some</i> <a href=\"https://stackoverflow.com/search?q=%5Bjava%5D+create+animated+gif\">topics</a>"}],"answers":[{"tags":[],"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681596941,"creation_date":1681596941,"answer_id":76025016,"question_id":76024849,"body_markdown":"You can use `ImageWriter.writeToSequence`. The `saveAnimatedGIF` method in the following example illustrates how.\r\n\r\n    import javax.imageio.*;\r\n    import javax.imageio.metadata.IIOMetadata;\r\n    import javax.imageio.stream.ImageOutputStream;\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.*;\r\n    import java.util.*;\r\n\r\n    public class GifWriter {\r\n\r\n        private static final int WIDTH = 1024;\r\n        private static final int HEIGHT = 1024;\r\n\r\n        private static final int MAX_FRAMES = 64;\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            final List&lt;BufferedImage&gt; frames = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; MAX_FRAMES; ++i) {\r\n                frames.add(createDummyBufferedImage(i, MAX_FRAMES, WIDTH, HEIGHT));\r\n            }\r\n\r\n            try (FileOutputStream fos = new FileOutputStream(&quot;out.gif&quot;)) {\r\n                saveAnimatedGIF(fos, frames);\r\n            }\r\n        }\r\n\r\n        // Generate a dummy image for testing.\r\n        private static BufferedImage createDummyBufferedImage(int i, int maxI, int w, int h) {\r\n            final BufferedImage image = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);\r\n            for (int y = 0; y &lt; h; ++y) {\r\n                for (int x = 0; x &lt; w; ++x) {\r\n                    final double dx = (2.0 * x - w) / w;\r\n                    final double dy = (2.0 * y - h) / h;\r\n\r\n                    final int r = scale((dx + 1.0) / 2.0);\r\n                    final int g = scale((dy + 1.0) / 2.0);\r\n                    final int b = scale(Math.sqrt(dx*dx + dy*dy + (double)i / maxI));\r\n\r\n                    final int rgb = (r &lt;&lt; 16) | (g &lt;&lt; 8) | b;\r\n                    image.setRGB(x, y, rgb);\r\n                }\r\n            }\r\n\r\n            return image;\r\n        }\r\n\r\n        private static int scale(double d) {\r\n            final double d256 = d * 256.0;\r\n            if (d &lt; 0) {\r\n                return 0;\r\n            } else if (d &gt;= 256.0) {\r\n                return 255;\r\n            } else {\r\n                return (int)d256;\r\n            }\r\n        }\r\n\r\n        public static void saveAnimatedGIF(OutputStream out, List&lt;BufferedImage&gt; frames) throws Exception {\r\n            final ImageWriter iw = ImageIO.getImageWritersByFormatName(&quot;gif&quot;).next();\r\n\r\n            try (final ImageOutputStream ios = ImageIO.createImageOutputStream(out)) {\r\n\r\n            iw.setOutput(ios);\r\n            iw.prepareWriteSequence(null);\r\n\r\n            for (BufferedImage frame : frames) {\r\n                final ImageWriteParam iwp = iw.getDefaultWriteParam();\r\n                final IIOMetadata metadata = iw.getDefaultImageMetadata(new ImageTypeSpecifier(frame), iwp);\r\n\r\n                final IIOImage ii = new IIOImage(frame, null, metadata);\r\n                iw.writeToSequence(ii, null);\r\n            }\r\n\r\n            iw.endWriteSequence();}\r\n        }\r\n    }","title":"How to save a .gif file in Java?","body":"<p>You can use <code>ImageWriter.writeToSequence</code>. The <code>saveAnimatedGIF</code> method in the following example illustrates how.</p>\n<pre><code>import javax.imageio.*;\nimport javax.imageio.metadata.IIOMetadata;\nimport javax.imageio.stream.ImageOutputStream;\nimport java.awt.image.BufferedImage;\nimport java.io.*;\nimport java.util.*;\n\npublic class GifWriter {\n\n    private static final int WIDTH = 1024;\n    private static final int HEIGHT = 1024;\n\n    private static final int MAX_FRAMES = 64;\n\n    public static void main(String[] args) throws Exception {\n        final List&lt;BufferedImage&gt; frames = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; MAX_FRAMES; ++i) {\n            frames.add(createDummyBufferedImage(i, MAX_FRAMES, WIDTH, HEIGHT));\n        }\n\n        try (FileOutputStream fos = new FileOutputStream(&quot;out.gif&quot;)) {\n            saveAnimatedGIF(fos, frames);\n        }\n    }\n\n    // Generate a dummy image for testing.\n    private static BufferedImage createDummyBufferedImage(int i, int maxI, int w, int h) {\n        final BufferedImage image = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);\n        for (int y = 0; y &lt; h; ++y) {\n            for (int x = 0; x &lt; w; ++x) {\n                final double dx = (2.0 * x - w) / w;\n                final double dy = (2.0 * y - h) / h;\n\n                final int r = scale((dx + 1.0) / 2.0);\n                final int g = scale((dy + 1.0) / 2.0);\n                final int b = scale(Math.sqrt(dx*dx + dy*dy + (double)i / maxI));\n\n                final int rgb = (r &lt;&lt; 16) | (g &lt;&lt; 8) | b;\n                image.setRGB(x, y, rgb);\n            }\n        }\n\n        return image;\n    }\n\n    private static int scale(double d) {\n        final double d256 = d * 256.0;\n        if (d &lt; 0) {\n            return 0;\n        } else if (d &gt;= 256.0) {\n            return 255;\n        } else {\n            return (int)d256;\n        }\n    }\n\n    public static void saveAnimatedGIF(OutputStream out, List&lt;BufferedImage&gt; frames) throws Exception {\n        final ImageWriter iw = ImageIO.getImageWritersByFormatName(&quot;gif&quot;).next();\n\n        try (final ImageOutputStream ios = ImageIO.createImageOutputStream(out)) {\n\n        iw.setOutput(ios);\n        iw.prepareWriteSequence(null);\n\n        for (BufferedImage frame : frames) {\n            final ImageWriteParam iwp = iw.getDefaultWriteParam();\n            final IIOMetadata metadata = iw.getDefaultImageMetadata(new ImageTypeSpecifier(frame), iwp);\n\n            final IIOImage ii = new IIOImage(frame, null, metadata);\n            iw.writeToSequence(ii, null);\n        }\n\n        iw.endWriteSequence();}\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20376718,"reputation":3,"user_id":14947702,"display_name":"BlockManBlue"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1681601240,"answer_count":1,"score":-4,"last_activity_date":1681596941,"creation_date":1681594107,"question_id":76024849,"body_markdown":"I want to make a skin creator to make skins easier for my games but I only know how to make a .png or similar and save it. Is there some way I can have multiple ```BufferedImage```s and save them into a .gif file with a specified FPS?","title":"How to save a .gif file in Java?","body":"<p>I want to make a skin creator to make skins easier for my games but I only know how to make a .png or similar and save it. Is there some way I can have multiple <code>BufferedImage</code>s and save them into a .gif file with a specified FPS?</p>\n"},{"tags":["java","apache-flink","stream-processing"],"answers":[{"tags":[],"owner":{"account_id":82425,"reputation":8270,"user_id":231762,"display_name":"kkrugler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681596626,"creation_date":1681596626,"answer_id":76024998,"question_id":76015448,"body_markdown":"1. Call `collector.collect()`. Though I&#39;m not sure why your ProcessFunction is generating a list of `byte[][]` values, since it seems like you always have a single result.\r\n2. Not sure what you mean by &quot;... access the output from the main file&quot;. What main file?","title":"How to access the results from ProcessFunction?","body":"<ol>\n<li>Call <code>collector.collect()</code>. Though I'm not sure why your ProcessFunction is generating a list of <code>byte[][]</code> values, since it seems like you always have a single result.</li>\n<li>Not sure what you mean by &quot;... access the output from the main file&quot;. What main file?</li>\n</ol>\n"}],"owner":{"account_id":23669032,"reputation":51,"user_id":17696091,"display_name":"newbie5050"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681596626,"creation_date":1681477754,"question_id":76015448,"body_markdown":"I am running a query against two topics and calculating the results.\r\nIn the main class:\r\n\r\n    tableEnv.createTemporaryView(&quot;tbl1&quot;, stream1);\r\n    tableEnv.createTemporaryView(&quot;tbl2&quot;, stream2);\r\n    String data_query = &quot;select ....&quot;;\r\n    Table raw_table = tableEnv.sqlQuery(data_query);\r\n    DataStream&lt;Row&gt; mystream = tableEnv.toDataStream(raw_table);\r\n    mystream.process(new DataProcessor()).setParallelism(4);\r\n\r\nIn ProcessFucntion class:\r\n\r\n    public class DataProcessor extends ProcessFunction&lt;Row, List&lt;byte[][]&gt;&gt; {\r\n    public void processElement(Row row, ProcessFunction&lt;Row, List&lt;byte[][]&gt;&gt;.Context context, Collector&lt;List&lt;byte[][]&gt;&gt; collector) throws Exception {\r\n            int id = Integer.parseInt(&quot;&quot; + row.getField(0));\r\n            String data1 = ((String) (row.getField(1)));\r\n            String data2 = ((String) (row.getField(2)));\r\n    byte[][] results = DataUtils.compute(id, data1, data2);\r\n    }\r\nMy questions:\r\n1. How to send the results to the output?\r\n2. How to access the output from the main file?","title":"How to access the results from ProcessFunction?","body":"<p>I am running a query against two topics and calculating the results.\nIn the main class:</p>\n<pre><code>tableEnv.createTemporaryView(&quot;tbl1&quot;, stream1);\ntableEnv.createTemporaryView(&quot;tbl2&quot;, stream2);\nString data_query = &quot;select ....&quot;;\nTable raw_table = tableEnv.sqlQuery(data_query);\nDataStream&lt;Row&gt; mystream = tableEnv.toDataStream(raw_table);\nmystream.process(new DataProcessor()).setParallelism(4);\n</code></pre>\n<p>In ProcessFucntion class:</p>\n<pre><code>public class DataProcessor extends ProcessFunction&lt;Row, List&lt;byte[][]&gt;&gt; {\npublic void processElement(Row row, ProcessFunction&lt;Row, List&lt;byte[][]&gt;&gt;.Context context, Collector&lt;List&lt;byte[][]&gt;&gt; collector) throws Exception {\n        int id = Integer.parseInt(&quot;&quot; + row.getField(0));\n        String data1 = ((String) (row.getField(1)));\n        String data2 = ((String) (row.getField(2)));\nbyte[][] results = DataUtils.compute(id, data1, data2);\n}\n</code></pre>\n<p>My questions:</p>\n<ol>\n<li>How to send the results to the output?</li>\n<li>How to access the output from the main file?</li>\n</ol>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7358121,"reputation":4925,"user_id":5602214,"display_name":"Prashant"},"score":1,"creation_date":1654168010,"post_id":72475016,"comment_id":128029274,"body_markdown":"You should be creating an array of JCheckBox","body":"You should be creating an array of JCheckBox"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1654169790,"post_id":72475016,"comment_id":128029900,"body_markdown":"In Java, you can&#39;t dynamically declare variables from strings. I don&#39;t know [PHP](https://en.wikipedia.org/wiki/PHP) but I do know that it is a scripting language whereas Java is not. Hence you cannot do things in Java that you can in PHP. You can create a [Map](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html) where the &quot;key&quot; is a string, e.g. `ck01` and the &quot;value&quot; is a [JCheckBox](https://docs.oracle.com/javase/tutorial/uiswing/components/button.html) or you could simply create an array of `JCheckBox` and access each one via its [array] index.","body":"In Java, you can&#39;t dynamically declare variables from strings. I don&#39;t know <a href=\"https://en.wikipedia.org/wiki/PHP\" rel=\"nofollow noreferrer\">PHP</a> but I do know that it is a scripting language whereas Java is not. Hence you cannot do things in Java that you can in PHP. You can create a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html\" rel=\"nofollow noreferrer\">Map</a> where the &quot;key&quot; is a string, e.g. <code>ck01</code> and the &quot;value&quot; is a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/button.html\" rel=\"nofollow noreferrer\">JCheckBox</a> or you could simply create an array of <code>JCheckBox</code> and access each one via its [array] index."},{"owner":{"account_id":14295423,"reputation":403,"user_id":10326250,"display_name":"JohnnyD"},"score":0,"creation_date":1654173747,"post_id":72475016,"comment_id":128031402,"body_markdown":"yeah @Abra in php it&#39;s easy, you use `${&quot;Variable_name&quot;.5}` and it&#39;s done :P","body":"yeah @Abra in php it&#39;s easy, you use <code>${&quot;Variable_name&quot;.5}</code> and it&#39;s done :P"}],"answers":[{"tags":[],"owner":{"account_id":249565,"reputation":9766,"user_id":525725,"accept_rate":67,"display_name":"Emmanuel Bourg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681596568,"creation_date":1681596568,"answer_id":76024995,"question_id":72475016,"body_markdown":"You need an array or a List for the labels, and another one for the checkboxes. For example:\r\n\r\n    String[] checkboxLabels = {&quot;ck01&quot;, &quot;ck02&quot;, &quot;ck03&quot;, &quot;ck04&quot;};\r\n    JCheckBox[] checkboxes = new JCheckBox[checkboxLabels.length];\r\n    \r\n    for (int i = 0; i &lt; checkboxLabels.length; i++) {\r\n        checkboxes[i] = new JCheckBox(checkboxLabels[i]);\r\n    }","title":"Dynamic JCheckBox names using strings from an array in Java","body":"<p>You need an array or a List for the labels, and another one for the checkboxes. For example:</p>\n<pre><code>String[] checkboxLabels = {&quot;ck01&quot;, &quot;ck02&quot;, &quot;ck03&quot;, &quot;ck04&quot;};\nJCheckBox[] checkboxes = new JCheckBox[checkboxLabels.length];\n\nfor (int i = 0; i &lt; checkboxLabels.length; i++) {\n    checkboxes[i] = new JCheckBox(checkboxLabels[i]);\n}\n</code></pre>\n"}],"owner":{"account_id":14295423,"reputation":403,"user_id":10326250,"display_name":"JohnnyD"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76024995,"answer_count":1,"score":0,"last_activity_date":1681596568,"creation_date":1654167104,"question_id":72475016,"body_markdown":"Hello guys I have searched before I write here. I wasn&#39;t able to find something that could help me out, though I am not really familiar with java so I might have missed something.\r\n\r\nAn ex-colligue created a java program using Netbeans. \r\n\r\nThese are just some of the lines for the checkboxes (they are more than 40) for only this window. And there are always more. \r\n\r\n    ck01 = new javax.swing.JCheckBox();\r\n    ck02 = new javax.swing.JCheckBox();\r\n    ck03 = new javax.swing.JCheckBox();\r\n    ck04 = new javax.swing.JCheckBox();\r\n    ck05 = new javax.swing.JCheckBox();\r\n    ck06 = new javax.swing.JCheckBox();\r\n    ck07 = new javax.swing.JCheckBox();\r\n    ck08 = new javax.swing.JCheckBox();\r\n    ck09 = new javax.swing.JCheckBox();\r\n    ck10 = new javax.swing.JCheckBox();\r\n\r\nI managed to pull videos using an array so I thought I could use a `for` in order to create the checkboxes as well.\r\n\r\n    String [] checks = {&quot;ck01&quot;, &quot;ck02&quot;, &quot;ck03&quot;, &quot;ck04&quot;, &quot;ck05&quot;, &quot;ck06&quot;, &quot;ck07&quot;, &quot;ck08&quot;, &quot;ck09&quot;, &quot;ck10&quot;, &quot;ck11&quot;, &quot;ck12&quot;, &quot;ck13&quot;, &quot;ck14&quot;, &quot;ck15&quot;, &quot;ck16&quot;, &quot;ck17&quot;, &quot;ck18&quot;, &quot;ck19&quot;, &quot;ck20&quot;, &quot;ck21&quot;, &quot;ck22&quot;, &quot;ck23&quot;, &quot;ck24&quot;, &quot;ck25&quot;, &quot;ck26&quot;, &quot;ck27&quot;, &quot;ck28&quot;, &quot;ck29&quot;, &quot;ck30&quot;, &quot;ck31&quot;, &quot;ck32&quot;, &quot;ck33&quot;, &quot;ck34&quot;, &quot;ck35&quot;, &quot;ck36&quot;, &quot;ck37&quot;, &quot;ck38&quot;, &quot;ck39&quot;, &quot;ck40&quot;, &quot;ck41&quot;, &quot;ck42&quot;, &quot;ck43&quot;, &quot;ck44&quot;, &quot;ck45&quot;, &quot;ck46&quot;, &quot;ck47&quot;, &quot;ck48&quot;, &quot;ck49&quot;};\r\n    \t\tfor (int l = 0; l &lt; checks.length; l++){\r\n    \t\t\tchecks[l] = new javax.swing.JCheckBox();\r\n    \t\t}\r\n\r\nI have added this but I am getting an error `incompatible types: JCheckBox cannot be converted to String` is there a way to edit the code or should I leave it as it is? \r\nIt seems to be different from php sadly","title":"Dynamic JCheckBox names using strings from an array in Java","body":"<p>Hello guys I have searched before I write here. I wasn't able to find something that could help me out, though I am not really familiar with java so I might have missed something.</p>\n<p>An ex-colligue created a java program using Netbeans.</p>\n<p>These are just some of the lines for the checkboxes (they are more than 40) for only this window. And there are always more.</p>\n<pre><code>ck01 = new javax.swing.JCheckBox();\nck02 = new javax.swing.JCheckBox();\nck03 = new javax.swing.JCheckBox();\nck04 = new javax.swing.JCheckBox();\nck05 = new javax.swing.JCheckBox();\nck06 = new javax.swing.JCheckBox();\nck07 = new javax.swing.JCheckBox();\nck08 = new javax.swing.JCheckBox();\nck09 = new javax.swing.JCheckBox();\nck10 = new javax.swing.JCheckBox();\n</code></pre>\n<p>I managed to pull videos using an array so I thought I could use a <code>for</code> in order to create the checkboxes as well.</p>\n<pre><code>String [] checks = {&quot;ck01&quot;, &quot;ck02&quot;, &quot;ck03&quot;, &quot;ck04&quot;, &quot;ck05&quot;, &quot;ck06&quot;, &quot;ck07&quot;, &quot;ck08&quot;, &quot;ck09&quot;, &quot;ck10&quot;, &quot;ck11&quot;, &quot;ck12&quot;, &quot;ck13&quot;, &quot;ck14&quot;, &quot;ck15&quot;, &quot;ck16&quot;, &quot;ck17&quot;, &quot;ck18&quot;, &quot;ck19&quot;, &quot;ck20&quot;, &quot;ck21&quot;, &quot;ck22&quot;, &quot;ck23&quot;, &quot;ck24&quot;, &quot;ck25&quot;, &quot;ck26&quot;, &quot;ck27&quot;, &quot;ck28&quot;, &quot;ck29&quot;, &quot;ck30&quot;, &quot;ck31&quot;, &quot;ck32&quot;, &quot;ck33&quot;, &quot;ck34&quot;, &quot;ck35&quot;, &quot;ck36&quot;, &quot;ck37&quot;, &quot;ck38&quot;, &quot;ck39&quot;, &quot;ck40&quot;, &quot;ck41&quot;, &quot;ck42&quot;, &quot;ck43&quot;, &quot;ck44&quot;, &quot;ck45&quot;, &quot;ck46&quot;, &quot;ck47&quot;, &quot;ck48&quot;, &quot;ck49&quot;};\n        for (int l = 0; l &lt; checks.length; l++){\n            checks[l] = new javax.swing.JCheckBox();\n        }\n</code></pre>\n<p>I have added this but I am getting an error <code>incompatible types: JCheckBox cannot be converted to String</code> is there a way to edit the code or should I leave it as it is?\nIt seems to be different from php sadly</p>\n"},{"tags":["java","join","state","apache-flink","flink-streaming"],"answers":[{"tags":[],"owner":{"account_id":82425,"reputation":8270,"user_id":231762,"display_name":"kkrugler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681596295,"creation_date":1681596295,"answer_id":76024982,"question_id":76010345,"body_markdown":"You can take the output of the join and send it through a `ProcessFunction` with state, where you forward the join result as a regular event, and create a timer based on some TTL value. When the timer fires, you send out a retraction (deletion) event.\r\n\r\nThis stream is then broadcast, and you can use it to update the broadcast state used in the subsequent filtering operation.","title":"Apache Flink: Using a BroadcastStream for an infinite amount of values","body":"<p>You can take the output of the join and send it through a <code>ProcessFunction</code> with state, where you forward the join result as a regular event, and create a timer based on some TTL value. When the timer fires, you send out a retraction (deletion) event.</p>\n<p>This stream is then broadcast, and you can use it to update the broadcast state used in the subsequent filtering operation.</p>\n"}],"owner":{"account_id":2554005,"reputation":4023,"user_id":2216414,"accept_rate":67,"display_name":"Cristian Meneses"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681596295,"creation_date":1681425595,"question_id":76010345,"body_markdown":"Flink newbie here, currently trying to implement a Flink job that performs a logic such as the following query\r\n\r\n```sql\r\nSELECT *\r\n  FROM EVENT_C c\r\n WHERE c.exclusion_id NOT IN (\r\n    SELECT s.exclusion_id\r\n      FROM EVENT_S s\r\n      JOIN EVENT_A a\r\n        ON s.input_id = a.input_id\r\n     WHERE a.tags = &#39;some-value&#39;\r\n )\r\n```\r\n\r\nSo far I&#39;ve successfully assembled most of the logic. Each `Event` is handled as a separate DataStream. Then I use a JoinFunction with a TimeWindow to perform the EVENT_S + EVENT_A join.\r\n\r\nThe challenge is performing the `NOT IN` part of the logic. \r\nCurrently I am trying to use a `BroadcastStream` for the `exclusion_id` values that were collected on the tumbling window. Then I&#39;ll broadcast these values into a `KeyedBroadcastProcessFunction` that will receive both the `EVENT_C` records and the `exclusion_id` values. \r\n\r\n```java\r\n\r\n// Join EventS with EventA, broadcast the results\r\nBroadcastStream&lt;String&gt; exclusionIdBroadcastStream = sStream\r\n        .join(aStream)\r\n        .where(new KeySelector&lt;EventS, Object&gt;() {\r\n            @Override\r\n            public Object getKey(EventS value) throws Exception {\r\n                return value.getInputId();\r\n            }\r\n        })\r\n        .equalTo(new KeySelector&lt;EventA, Object&gt;() {\r\n            @Override\r\n            public Object getKey(EventA value) throws Exception {\r\n                return value.getInputId();\r\n            }\r\n        })\r\n        .window(TumblingEventTimeWindows.of(Time.minutes(5)))\r\n        .apply(new JoinFunction&lt;EventS, EventA, String&gt;() {\r\n            @Override\r\n            public String join(EventS first, EventA second) throws Exception {\r\n                return first.getTurnId();\r\n            }\r\n        })\r\n        .broadcast(turnIdStateDescriptor);\r\n\r\n// Process EventC by performing a NOT IN with the broadcast ids\r\ncStream\r\n        .keyBy(new KeySelector&lt;EventC, String&gt;() {\r\n            @Override\r\n            public String getKey(EventC value) throws Exception {\r\n                return value.getUniqueId();\r\n            }\r\n        })\r\n        .connect(exclusionIdBroadcastStream)\r\n        .process(new EventFilterBroadcastProcessFunction())\r\n        .addSink(s3Sink);\r\n```\r\n\r\nThis is the ProcessFunction implementation, which caches the EventC record and sets an EventTime timer to perform the filtering.\r\n\r\n```java\r\npublic class EventFilterBroadcastProcessFunction extends KeyedBroadcastProcessFunction&lt;String, EventC, String, OutputEvent&gt; {\r\n\r\n    private static final MapStateDescriptor&lt;String, String&gt; BROADCAST_DESCRIPTOR =\r\n            new MapStateDescriptor&lt;&gt;(&quot;ExclusuionIdBroadcastState&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO);\r\n\r\n    private static final ListStateDescriptor&lt;EventC&gt; EVENT_C_DESCRIPTOR =\r\n            new ListStateDescriptor&lt;EventC&gt;(&quot;CustomerIdEvents&quot;, TypeInformation.of(EventC.class));\r\n\r\n    private transient ListState&lt;EventC&gt; eventsToReprocessState;\r\n\r\n    @Override\r\n    public void open(Configuration parameters) throws Exception {\r\n        super.open(parameters);\r\n        this.eventsToReprocessState = this.getRuntimeContext().getListState(EVENT_C_DESCRIPTOR);\r\n    }\r\n\r\n    @Override\r\n    public void processElement(EventC event, ReadOnlyContext context, Collector&lt;OutputEvent&gt; out) throws Exception {\r\n        final String turnId = context.getBroadcastState(BROADCAST_DESCRIPTOR).get(event.getTurnId());\r\n        final long expirationTimestamp = nextTimeoutWindow(context.timestamp(), Time.minutes(1));\r\n\r\n        if (turnId == null) {\r\n            // Maybe the event is safe to collect, or the turnId has not been broadcast yet. Save it for later.\r\n            this.eventsToReprocessState.add(event);\r\n\r\n            context.timerService().registerEventTimeTimer(expirationTimestamp);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public void processBroadcastElement(String turnId, Context context, Collector&lt;OutputEvent&gt; out) throws Exception {\r\n        context.getBroadcastState(BROADCAST_DESCRIPTOR).put(turnId, turnId);\r\n    }\r\n\r\n    @Override\r\n    public void onTimer(long timestamp, OnTimerContext ctx, Collector&lt;OutputEvent&gt; out) throws Exception {\r\n        super.onTimer(timestamp, ctx, out);\r\n        int count = 0;\r\n        int size = 0;\r\n        final Iterable&lt;EventC&gt; eventsToReprocess = this.eventsToReprocessState.get();\r\n        if (eventsToReprocess != null) {\r\n            for (EventC event: eventsToReprocess) {\r\n                size++;\r\n                if (!ctx.getBroadcastState(BROADCAST_DESCRIPTOR).contains(event.getTurnId())) {\r\n                    final OutputEvent OutputEvent = generateOutputEvent(event);\r\n                    out.collect(OutputEvent);\r\n                    count++;\r\n                }\r\n            }\r\n            eventsToReprocessState.clear();\r\n        }\r\n\r\n    }\r\n\r\n    private OutputEvent generateOutputEvent(final EventC event) {\r\n        return OutputEvent.builder()\r\n                ...\r\n                .build();\r\n    }\r\n\r\n    public static long nextTimeoutWindow(final long timestamp, final Time interval) {\r\n        return endOfWindow(timestamp, interval) + interval.toMilliseconds();\r\n    }\r\n\r\n    public static long beginningOfWindow(final long timestamp, final Time interval) {\r\n        return timestamp - (timestamp % interval.toMilliseconds());\r\n    }\r\n\r\n    public static long endOfWindow(final long timestamp, final Time interval) {\r\n        return beginningOfWindow(timestamp, interval) + interval.toMilliseconds();\r\n    }\r\n```\r\n\r\nWe are experimenting with a BroadcastStream because we can treat `exclusion_id` as a rule, and increase the parallelism of this task by having all parallel executions perform the `NOT IN` over the same set of rules. The problem with this approach is that Broadcast state is read-only, meaning it will only grow over time, and I cannot remove items from the map. This causes the snapshots to grow over time, and CPU usage also increases due to the state becoming larger. Also Broadcast state is kept on Heap, so memory usage also increases over time.\r\n\r\nIs there any way to clean the broadcast state when the `onTimer` method fires ?\r\nOr is there a better strategy to achieve such a &quot;join/not in&quot; logic instead of using a Broadcast function?\r\n\r\nCurrently using **Flink v1.11** over Kinesis Data Analytics, running on **JDK 11**.\r\n\r\nThanks in advance!","title":"Apache Flink: Using a BroadcastStream for an infinite amount of values","body":"<p>Flink newbie here, currently trying to implement a Flink job that performs a logic such as the following query</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\n  FROM EVENT_C c\n WHERE c.exclusion_id NOT IN (\n    SELECT s.exclusion_id\n      FROM EVENT_S s\n      JOIN EVENT_A a\n        ON s.input_id = a.input_id\n     WHERE a.tags = 'some-value'\n )\n</code></pre>\n<p>So far I've successfully assembled most of the logic. Each <code>Event</code> is handled as a separate DataStream. Then I use a JoinFunction with a TimeWindow to perform the EVENT_S + EVENT_A join.</p>\n<p>The challenge is performing the <code>NOT IN</code> part of the logic.\nCurrently I am trying to use a <code>BroadcastStream</code> for the <code>exclusion_id</code> values that were collected on the tumbling window. Then I'll broadcast these values into a <code>KeyedBroadcastProcessFunction</code> that will receive both the <code>EVENT_C</code> records and the <code>exclusion_id</code> values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n// Join EventS with EventA, broadcast the results\nBroadcastStream&lt;String&gt; exclusionIdBroadcastStream = sStream\n        .join(aStream)\n        .where(new KeySelector&lt;EventS, Object&gt;() {\n            @Override\n            public Object getKey(EventS value) throws Exception {\n                return value.getInputId();\n            }\n        })\n        .equalTo(new KeySelector&lt;EventA, Object&gt;() {\n            @Override\n            public Object getKey(EventA value) throws Exception {\n                return value.getInputId();\n            }\n        })\n        .window(TumblingEventTimeWindows.of(Time.minutes(5)))\n        .apply(new JoinFunction&lt;EventS, EventA, String&gt;() {\n            @Override\n            public String join(EventS first, EventA second) throws Exception {\n                return first.getTurnId();\n            }\n        })\n        .broadcast(turnIdStateDescriptor);\n\n// Process EventC by performing a NOT IN with the broadcast ids\ncStream\n        .keyBy(new KeySelector&lt;EventC, String&gt;() {\n            @Override\n            public String getKey(EventC value) throws Exception {\n                return value.getUniqueId();\n            }\n        })\n        .connect(exclusionIdBroadcastStream)\n        .process(new EventFilterBroadcastProcessFunction())\n        .addSink(s3Sink);\n</code></pre>\n<p>This is the ProcessFunction implementation, which caches the EventC record and sets an EventTime timer to perform the filtering.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class EventFilterBroadcastProcessFunction extends KeyedBroadcastProcessFunction&lt;String, EventC, String, OutputEvent&gt; {\n\n    private static final MapStateDescriptor&lt;String, String&gt; BROADCAST_DESCRIPTOR =\n            new MapStateDescriptor&lt;&gt;(&quot;ExclusuionIdBroadcastState&quot;, BasicTypeInfo.STRING_TYPE_INFO, BasicTypeInfo.STRING_TYPE_INFO);\n\n    private static final ListStateDescriptor&lt;EventC&gt; EVENT_C_DESCRIPTOR =\n            new ListStateDescriptor&lt;EventC&gt;(&quot;CustomerIdEvents&quot;, TypeInformation.of(EventC.class));\n\n    private transient ListState&lt;EventC&gt; eventsToReprocessState;\n\n    @Override\n    public void open(Configuration parameters) throws Exception {\n        super.open(parameters);\n        this.eventsToReprocessState = this.getRuntimeContext().getListState(EVENT_C_DESCRIPTOR);\n    }\n\n    @Override\n    public void processElement(EventC event, ReadOnlyContext context, Collector&lt;OutputEvent&gt; out) throws Exception {\n        final String turnId = context.getBroadcastState(BROADCAST_DESCRIPTOR).get(event.getTurnId());\n        final long expirationTimestamp = nextTimeoutWindow(context.timestamp(), Time.minutes(1));\n\n        if (turnId == null) {\n            // Maybe the event is safe to collect, or the turnId has not been broadcast yet. Save it for later.\n            this.eventsToReprocessState.add(event);\n\n            context.timerService().registerEventTimeTimer(expirationTimestamp);\n        }\n\n    }\n\n    @Override\n    public void processBroadcastElement(String turnId, Context context, Collector&lt;OutputEvent&gt; out) throws Exception {\n        context.getBroadcastState(BROADCAST_DESCRIPTOR).put(turnId, turnId);\n    }\n\n    @Override\n    public void onTimer(long timestamp, OnTimerContext ctx, Collector&lt;OutputEvent&gt; out) throws Exception {\n        super.onTimer(timestamp, ctx, out);\n        int count = 0;\n        int size = 0;\n        final Iterable&lt;EventC&gt; eventsToReprocess = this.eventsToReprocessState.get();\n        if (eventsToReprocess != null) {\n            for (EventC event: eventsToReprocess) {\n                size++;\n                if (!ctx.getBroadcastState(BROADCAST_DESCRIPTOR).contains(event.getTurnId())) {\n                    final OutputEvent OutputEvent = generateOutputEvent(event);\n                    out.collect(OutputEvent);\n                    count++;\n                }\n            }\n            eventsToReprocessState.clear();\n        }\n\n    }\n\n    private OutputEvent generateOutputEvent(final EventC event) {\n        return OutputEvent.builder()\n                ...\n                .build();\n    }\n\n    public static long nextTimeoutWindow(final long timestamp, final Time interval) {\n        return endOfWindow(timestamp, interval) + interval.toMilliseconds();\n    }\n\n    public static long beginningOfWindow(final long timestamp, final Time interval) {\n        return timestamp - (timestamp % interval.toMilliseconds());\n    }\n\n    public static long endOfWindow(final long timestamp, final Time interval) {\n        return beginningOfWindow(timestamp, interval) + interval.toMilliseconds();\n    }\n</code></pre>\n<p>We are experimenting with a BroadcastStream because we can treat <code>exclusion_id</code> as a rule, and increase the parallelism of this task by having all parallel executions perform the <code>NOT IN</code> over the same set of rules. The problem with this approach is that Broadcast state is read-only, meaning it will only grow over time, and I cannot remove items from the map. This causes the snapshots to grow over time, and CPU usage also increases due to the state becoming larger. Also Broadcast state is kept on Heap, so memory usage also increases over time.</p>\n<p>Is there any way to clean the broadcast state when the <code>onTimer</code> method fires ?\nOr is there a better strategy to achieve such a &quot;join/not in&quot; logic instead of using a Broadcast function?</p>\n<p>Currently using <strong>Flink v1.11</strong> over Kinesis Data Analytics, running on <strong>JDK 11</strong>.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","swing","checkbox","combobox"],"answers":[{"tags":[],"owner":{"account_id":249565,"reputation":9766,"user_id":525725,"accept_rate":67,"display_name":"Emmanuel Bourg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681596143,"creation_date":1681596143,"answer_id":76024966,"question_id":74179645,"body_markdown":"If you want to do a menu with checkboxes, it&#39;s better to use a JMenu with JCheckBoxMenuItems, or rather JRadioMenuItems if the choices are mutually exclusives:\r\n\r\n    JMenu menu = new JMenu(&quot;Difficulty&quot;);\r\n    JRadioButtonMenuItem item1 = new JRadioButtonMenuItem(&quot;Easy&quot;);\r\n    JRadioButtonMenuItem item2 = new JRadioButtonMenuItem(&quot;Normal&quot;);\r\n    JRadioButtonMenuItem item3 = new JRadioButtonMenuItem(&quot;Hard&quot;);\r\n\r\n    ButtonGroup group = new ButtonGroup();\r\n    group.add(item1);\r\n    group.add(item2);\r\n    group.add(item3);\r\n\r\n    menu.add(item1);\r\n    menu.add(item2);\r\n    menu.add(item3);","title":"HOW TO ADD JCHECKBOX TO A JCOMBOBOX","body":"<p>If you want to do a menu with checkboxes, it's better to use a JMenu with JCheckBoxMenuItems, or rather JRadioMenuItems if the choices are mutually exclusives:</p>\n<pre><code>JMenu menu = new JMenu(&quot;Difficulty&quot;);\nJRadioButtonMenuItem item1 = new JRadioButtonMenuItem(&quot;Easy&quot;);\nJRadioButtonMenuItem item2 = new JRadioButtonMenuItem(&quot;Normal&quot;);\nJRadioButtonMenuItem item3 = new JRadioButtonMenuItem(&quot;Hard&quot;);\n\nButtonGroup group = new ButtonGroup();\ngroup.add(item1);\ngroup.add(item2);\ngroup.add(item3);\n\nmenu.add(item1);\nmenu.add(item2);\nmenu.add(item3);\n</code></pre>\n"}],"owner":{"account_id":26614005,"reputation":1,"user_id":20233751,"display_name":"D&#233;bora Jesus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681596170,"creation_date":1666606591,"question_id":74179645,"body_markdown":"I need to do a menu with checkboxes inside, I cant do it! I checked all the java api documentation and dont exist examples. Help... \r\n\r\n\r\n       JComboBox&lt;JCheckBox&gt; cb = new JComboBox&lt;JCheckBox&gt;();\r\n   \r\n       cb.add(cbEasy = new JCheckBox(&quot;EASY&quot;, false));\r\n       cb.add(cbDifficult = new JCheckBox(&quot;DIFFICULT&quot;, false));\r\nIn the interface its empty the combobox...\r\n","title":"HOW TO ADD JCHECKBOX TO A JCOMBOBOX","body":"<p>I need to do a menu with checkboxes inside, I cant do it! I checked all the java api documentation and dont exist examples. Help...</p>\n<pre><code>   JComboBox&lt;JCheckBox&gt; cb = new JComboBox&lt;JCheckBox&gt;();\n\n   cb.add(cbEasy = new JCheckBox(&quot;EASY&quot;, false));\n   cb.add(cbDifficult = new JCheckBox(&quot;DIFFICULT&quot;, false));\n</code></pre>\n<p>In the interface its empty the combobox...</p>\n"},{"tags":["java","unicode","fonts"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1670346972,"post_id":74706568,"comment_id":131853615,"body_markdown":"I would just simplify things and find a font that will do all your languages","body":"I would just simplify things and find a font that will do all your languages"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1670347759,"post_id":74706568,"comment_id":131853926,"body_markdown":"Modern OSes automatically fallback to other fonts when the default font lacks needed glyphs. No need for you to do anything. macOS does this beautifully, and I expect Windows and Linux to perform adequately as well. On a platform where Swing makes use of the host OS’s text rendering, then all should go well. Be sure to use the latest version of Java, either current or most recent LTS version.","body":"Modern OSes automatically fallback to other fonts when the default font lacks needed glyphs. No need for you to do anything. macOS does this beautifully, and I expect Windows and Linux to perform adequately as well. On a platform where Swing makes use of the host OS’s text rendering, then all should go well. Be sure to use the latest version of Java, either current or most recent LTS version."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1670348126,"post_id":74706568,"comment_id":131854052,"body_markdown":"No such thing as a “Unicode” font. All modern font systems support Unicode, afaik.","body":"No such thing as a “Unicode” font. All modern font systems support Unicode, afaik."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1670349370,"post_id":74706568,"comment_id":131854442,"body_markdown":"[This](https://www.unifoundry.com/unifont/index.html) claims to have a massive number of glyphs","body":"<a href=\"https://www.unifoundry.com/unifont/index.html\" rel=\"nofollow noreferrer\">This</a> claims to have a massive number of glyphs"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1670371590,"post_id":74706568,"comment_id":131860596,"body_markdown":"@g00se Unifont will render all characters in the BMP. For example, it can display [Latin, Japanese and Hindi text](https://stackoverflow.com/a/73970038/2985643). A potential issue with using it is the quality of the rendering for certain glyphs, and it is also fixed width. [Wikipedia also documents some other limitations](https://en.wikipedia.org/wiki/GNU_Unifont). But if none of that is a concern your approach seems reasonable (even though it does not directly address the OP&#39;s question).","body":"@g00se Unifont will render all characters in the BMP. For example, it can display <a href=\"https://stackoverflow.com/a/73970038/2985643\">Latin, Japanese and Hindi text</a>. A potential issue with using it is the quality of the rendering for certain glyphs, and it is also fixed width. <a href=\"https://en.wikipedia.org/wiki/GNU_Unifont\" rel=\"nofollow noreferrer\">Wikipedia also documents some other limitations</a>. But if none of that is a concern your approach seems reasonable (even though it does not directly address the OP&#39;s question)."},{"owner":{"account_id":27087210,"reputation":23,"user_id":20635538,"display_name":"JavaUser"},"score":0,"creation_date":1670577721,"post_id":74706568,"comment_id":131911020,"body_markdown":"I tried setting default font for JTable as unifont, but that font doesn&#39;t create compound glyphs. Including Arial Unicode font will mess up licensing terms. The default font (Segoe UI in Windows and Liberation Sans in Linux) aren&#39;t falling back to the appropriate font either.","body":"I tried setting default font for JTable as unifont, but that font doesn&#39;t create compound glyphs. Including Arial Unicode font will mess up licensing terms. The default font (Segoe UI in Windows and Liberation Sans in Linux) aren&#39;t falling back to the appropriate font either."}],"answers":[{"tags":[],"owner":{"account_id":249565,"reputation":9766,"user_id":525725,"accept_rate":67,"display_name":"Emmanuel Bourg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681595580,"creation_date":1681595580,"answer_id":76024926,"question_id":74706568,"body_markdown":"Assuming the text appears in a JTable, you can write a custom cell renderer that will switch the font depending on the text to be displayed.\r\n\r\nFor example:\r\n\r\n    JTable table = new JTable();\r\n    table.setModel(model);\r\n    table.setDefaultRenderer(String.class, new DefaultTableCellRenderer() {\r\n        @Override\r\n        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n            Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n            \r\n            String text = (String) value;\r\n            \r\n            if (text.matches(&quot;.*[\\\\u3040-\\\\u30FF]+.*&quot;)) { // Japaneese\r\n                c.setFont(font1);\r\n            } else if (text.matches(&quot;.*[\\\\u0B80-\\\\u0BFF]+.*&quot;)) { // Tamil\r\n                c.setFont(font2);\r\n            } else if (text.matches(&quot;.*[\\\\u0590-\\\\u05FF]+.*&quot;)) { // Hebrew\r\n                c.setFont(font3);\r\n            } else {\r\n                c.setFont(table.getFont());\r\n            }\r\n            \r\n            return c;\r\n        }\r\n    });\r\n\r\n\r\nCustom renderers can be used for other components as well (JList, JTree, JComboBox).","title":"Use font based on the language in Java","body":"<p>Assuming the text appears in a JTable, you can write a custom cell renderer that will switch the font depending on the text to be displayed.</p>\n<p>For example:</p>\n<pre><code>JTable table = new JTable();\ntable.setModel(model);\ntable.setDefaultRenderer(String.class, new DefaultTableCellRenderer() {\n    @Override\n    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n        Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n        \n        String text = (String) value;\n        \n        if (text.matches(&quot;.*[\\\\u3040-\\\\u30FF]+.*&quot;)) { // Japaneese\n            c.setFont(font1);\n        } else if (text.matches(&quot;.*[\\\\u0B80-\\\\u0BFF]+.*&quot;)) { // Tamil\n            c.setFont(font2);\n        } else if (text.matches(&quot;.*[\\\\u0590-\\\\u05FF]+.*&quot;)) { // Hebrew\n            c.setFont(font3);\n        } else {\n            c.setFont(table.getFont());\n        }\n        \n        return c;\n    }\n});\n</code></pre>\n<p>Custom renderers can be used for other components as well (JList, JTree, JComboBox).</p>\n"}],"owner":{"account_id":27087210,"reputation":23,"user_id":20635538,"display_name":"JavaUser"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76024926,"answer_count":1,"score":0,"last_activity_date":1681595580,"creation_date":1670346845,"question_id":74706568,"body_markdown":"I&#39;m trying to create a cross-platform swing application, and will include at least 3 Unicode fonts (say Japanese, Tamil and Hebrew, all belonging to different families). They&#39;re supposed to be used in a component (say JTable) when there is either Japanese, Tamil or Hebrew font (none of the two will be present simultaneously in cells). Is there any way to detect glyph and set font family accordingly?","title":"Use font based on the language in Java","body":"<p>I'm trying to create a cross-platform swing application, and will include at least 3 Unicode fonts (say Japanese, Tamil and Hebrew, all belonging to different families). They're supposed to be used in a component (say JTable) when there is either Japanese, Tamil or Hebrew font (none of the two will be present simultaneously in cells). Is there any way to detect glyph and set font family accordingly?</p>\n"},{"tags":["java","kotlin","design-patterns"],"comments":[{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1681590481,"post_id":76024181,"comment_id":134082160,"body_markdown":"I&#39;m not exactly sure what do you ask. Implementation of the above using Kotlin coroutines would be something like: `val dicedMangos = async { dice(peel(mangos)) }; val dicedBananas = async { dice(peel(bananas)) }; val smoothie = blend(dicedMangos.await(), dicedBananas.await, yoghurt, milk)`. You can pretty easily adapt this to your `Handler` interface. But it looks like you need some kind of a graph framework or something.","body":"I&#39;m not exactly sure what do you ask. Implementation of the above using Kotlin coroutines would be something like: <code>val dicedMangos = async { dice(peel(mangos)) }; val dicedBananas = async { dice(peel(bananas)) }; val smoothie = blend(dicedMangos.await(), dicedBananas.await, yoghurt, milk)</code>. You can pretty easily adapt this to your <code>Handler</code> interface. But it looks like you need some kind of a graph framework or something."},{"owner":{"account_id":1210340,"reputation":1432,"user_id":1179018,"accept_rate":41,"display_name":"scabbage"},"score":0,"creation_date":1681594922,"post_id":76024181,"comment_id":134082654,"body_markdown":"@broot Yes, that&#39;s what I&#39;m asking. Updated the post to elaborate more.","body":"@broot Yes, that&#39;s what I&#39;m asking. Updated the post to elaborate more."},{"owner":{"account_id":1455702,"reputation":15662,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":0,"creation_date":1681598000,"post_id":76024181,"comment_id":134082943,"body_markdown":"What you&#39;re describing initially is the [pipes-and-filters](https://www.enterpriseintegrationpatterns.com/patterns/messaging/PipesAndFilters.html) architecture. Totally unrelated to the Chain of Responsibility pattern. In CoR, only _one_ &quot;link&quot; handles each request. The pattern is _not_ a pipeline.","body":"What you&#39;re describing initially is the <a href=\"https://www.enterpriseintegrationpatterns.com/patterns/messaging/PipesAndFilters.html\" rel=\"nofollow noreferrer\">pipes-and-filters</a> architecture. Totally unrelated to the Chain of Responsibility pattern. In CoR, only <i>one</i> &quot;link&quot; handles each request. The pattern is <i>not</i> a pipeline."}],"owner":{"account_id":1210340,"reputation":1432,"user_id":1179018,"accept_rate":41,"display_name":"scabbage"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681594888,"creation_date":1681584856,"question_id":76024181,"body_markdown":"I understand that the CoR pattern is used when we have a sequence of tasks that need to be carried out, each takes the previous output as input and produces some new output.\r\n\r\nNow I would like to see if I can apply this pattern to create non-linear pipelines. I have something like this in Kotlin:\r\n\r\n```kotlin\r\ninterface Handler&lt;I, O&gt; {\r\n    fun handle(input: I): Result&lt;*&gt;\r\n}\r\n```\r\n\r\nHow can I make it so that I can implement something like the following with concurrent execution path?\r\n\r\n```\r\nPeel mangos (Mango -&gt; PeeledMango)\r\n|\r\nDice mangos (PeeledMango -&gt; DicedMango)\r\n|    \r\n|\r\n|    Peel bananas (Banana -&gt; PeeledBanana)\r\n|    |\r\n|    Dice bananas (PeeledBanana -&gt; DicedBanana)\r\n|  /\r\n|/\r\n|\r\nBlend (DicedMango, DicedBanana, Yogurt, Milk -&gt; MangoBananaSmoothie)\r\n```\r\n\r\nUPDATE:\r\nTo elaborate a little bit more. What I&#39;m looking for is a DAG graph-like framework, in which a Handler could depend on outputs of more than one Handlers.\r\n\r\nIf we are making a mango-only smoothie, I can do the following easily:\r\n```kotlin\r\n// Construct the chain in reverse\r\nval blender = Blender()\r\nval addYogurtHandler = AddYogurtHandler(next = blender)\r\nval addMilkHandler = AddMilkHandler(next = addYogurtHandler)\r\nval diceMangoHandler = DiceMangoHandler(next = addMilkHandler)\r\nval peelMangoHandler = PeelMangoHandler(next = diceMangoHandler)\r\n\r\n// Kick off the chain\r\nval smoothie = peelMangoHandler.handle(mango)\r\n```\r\n\r\nBut I cannot seem to find an easy way to extend this pattern to add more extra dependencies.","title":"Is Chain of Responsibilities suitable for creating DAG like pipelines?","body":"<p>I understand that the CoR pattern is used when we have a sequence of tasks that need to be carried out, each takes the previous output as input and produces some new output.</p>\n<p>Now I would like to see if I can apply this pattern to create non-linear pipelines. I have something like this in Kotlin:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>interface Handler&lt;I, O&gt; {\n    fun handle(input: I): Result&lt;*&gt;\n}\n</code></pre>\n<p>How can I make it so that I can implement something like the following with concurrent execution path?</p>\n<pre><code>Peel mangos (Mango -&gt; PeeledMango)\n|\nDice mangos (PeeledMango -&gt; DicedMango)\n|    \n|\n|    Peel bananas (Banana -&gt; PeeledBanana)\n|    |\n|    Dice bananas (PeeledBanana -&gt; DicedBanana)\n|  /\n|/\n|\nBlend (DicedMango, DicedBanana, Yogurt, Milk -&gt; MangoBananaSmoothie)\n</code></pre>\n<p>UPDATE:\nTo elaborate a little bit more. What I'm looking for is a DAG graph-like framework, in which a Handler could depend on outputs of more than one Handlers.</p>\n<p>If we are making a mango-only smoothie, I can do the following easily:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Construct the chain in reverse\nval blender = Blender()\nval addYogurtHandler = AddYogurtHandler(next = blender)\nval addMilkHandler = AddMilkHandler(next = addYogurtHandler)\nval diceMangoHandler = DiceMangoHandler(next = addMilkHandler)\nval peelMangoHandler = PeelMangoHandler(next = diceMangoHandler)\n\n// Kick off the chain\nval smoothie = peelMangoHandler.handle(mango)\n</code></pre>\n<p>But I cannot seem to find an easy way to extend this pattern to add more extra dependencies.</p>\n"},{"tags":["java","spring","spring-boot","exception","exceptionhandler"],"owner":{"account_id":23415793,"reputation":174,"user_id":17476759,"display_name":"Abdullah &#199;i&#231;ekli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681594440,"creation_date":1681594440,"question_id":76024868,"body_markdown":"I am developing a project using Spring Boot. I have created a general error handler for error management. However, despite throwing my BusinessException, the @ExceptionHandler is catching the Exception instead of the intended one. Where could I be making a mistake?\r\n\r\n**RegisterController**\r\n````\r\npublic Boolean register(RegisterRequest request)\r\n    {\r\n        Optional&lt;User&gt; user = userDao.findByUsername(request.getUsername());\r\n        if (user.isPresent())\r\n        {\r\n            throw new BusinessException(BusinessExceptionReason.USER_ALREADY_EXIST);\r\n        }\r\n        userDetailService.createUserDetail(user);\r\n        userDao.save(user);\r\n        return true;\r\n    }\r\n````\r\n\r\n**BusinessExceptionReason**\r\n````\r\n@Getter\r\n@AllArgsConstructor\r\npublic enum BusinessExceptionReason implements BusinessExceptionPolicy\r\n{\r\n\r\n    USER_ALREADY_EXIST(&quot;1001&quot;,&quot;User Already Exist.!&quot;, HttpStatus.BAD_REQUEST);\r\n\r\n    private final String code;\r\n    private final String message;\r\n    private final HttpStatus httpStatus;\r\n\r\n}\r\n````\r\n\r\n**GlobalApiExceptionHandler**\r\n``` package com.settodo.settodoapp.error;\r\n\r\nimport static com.settodo.settodoapp.error.util.ErrorResponseUtil.build;\r\n\r\nimport org.springframework.core.Ordered;\r\nimport org.springframework.core.annotation.Order;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.ControllerAdvice;\r\nimport org.springframework.web.bind.annotation.ExceptionHandler;\r\nimport org.springframework.web.context.request.ServletWebRequest;\r\nimport org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler;\r\n\r\nimport com.settodo.settodoapp.error.dto.ErrorResponseDTO;\r\n\r\n@ControllerAdvice\r\n@Order(Ordered.HIGHEST_PRECEDENCE)\r\npublic class GlobalApiExceptionHandler extends ResponseEntityExceptionHandler\r\n{\r\n\r\n    @ExceptionHandler(BusinessException.class)\r\n    public ResponseEntity&lt;Object&gt; handleCustomUncaughtBusinessException(final BusinessException ex,\r\n                                                                        final ServletWebRequest request)\r\n    {\r\n        final ErrorResponseDTO errorResponseDto = build(ex.getCode(), ex.getMessage(), ex.getHttpStatus());\r\n        return ResponseEntity.status(ex.getHttpStatus()).body(errorResponseDto);\r\n    }\r\n\r\n    @ExceptionHandler(value = {Exception.class})\r\n    public ResponseEntity&lt;Object&gt; handleUncaughtException(final Exception ex, final ServletWebRequest request)\r\n    {\r\n        final ErrorResponseDTO errorResponseDto = build(Exception.class.getSimpleName(),\r\n                HttpStatus.INTERNAL_SERVER_ERROR.getReasonPhrase(),\r\n                HttpStatus.INTERNAL_SERVER_ERROR);\r\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(errorResponseDto);\r\n    }\r\n\r\n}\r\n```\r\n\r\n**BusinessException**\r\n\r\n```package com.settodo.settodoapp.error;\r\n\r\nimport static java.lang.String.format;\r\n\r\nimport org.springframework.http.HttpStatus;\r\n\r\nimport com.settodo.settodoapp.error.policy.BusinessExceptionPolicy;\r\n\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\n@Getter\r\n@Setter\r\npublic class BusinessException extends RuntimeException implements BusinessExceptionPolicy\r\n{\r\n\r\n    protected final String code;\r\n    protected final String message;\r\n    protected final HttpStatus httpStatus;\r\n\r\n    public BusinessException(final BusinessExceptionReason reason) {\r\n        this.code = reason.getCode();\r\n        this.message = reason.getMessage();\r\n        this.httpStatus = reason.getHttpStatus();\r\n    }\r\n\r\n    public BusinessException(final BusinessExceptionReason reason, final HttpStatus overridingHttpStatus) {\r\n        this.code = reason.getCode();\r\n        this.message = reason.getMessage();\r\n        this.httpStatus = overridingHttpStatus;\r\n    }\r\n\r\n    public BusinessException(final BusinessExceptionReason reason, final Object... parameters) {\r\n        if (parameters != null) {\r\n            this.message = format(reason.getMessage(), parameters);\r\n        } else {\r\n            this.message = reason.getMessage();\r\n        }\r\n\r\n        this.code = reason.getCode();\r\n        this.httpStatus = reason.getHttpStatus();\r\n    }\r\n\r\n    @Override\r\n    public String getLocalizedMessage() {\r\n        return getMessage();\r\n    }\r\n\r\n    public String toString() {\r\n        return format(&quot;BusinessException(code=%s, message=%s, httpStatus=%s)&quot;, this.getCode(), this.getMessage(),\r\n                this.getHttpStatus().value());\r\n    }\r\n}\r\n```\r\n\r\n*The **@ExceptionHandler** is functioning, but it is unable to catch the error as desired.*","title":"I requested for the @ExceptionHandler to catch the error, but it seems to be failing to do so","body":"<p>I am developing a project using Spring Boot. I have created a general error handler for error management. However, despite throwing my BusinessException, the @ExceptionHandler is catching the Exception instead of the intended one. Where could I be making a mistake?</p>\n<p><strong>RegisterController</strong></p>\n<pre><code>public Boolean register(RegisterRequest request)\n    {\n        Optional&lt;User&gt; user = userDao.findByUsername(request.getUsername());\n        if (user.isPresent())\n        {\n            throw new BusinessException(BusinessExceptionReason.USER_ALREADY_EXIST);\n        }\n        userDetailService.createUserDetail(user);\n        userDao.save(user);\n        return true;\n    }\n</code></pre>\n<p><strong>BusinessExceptionReason</strong></p>\n<pre><code>@Getter\n@AllArgsConstructor\npublic enum BusinessExceptionReason implements BusinessExceptionPolicy\n{\n\n    USER_ALREADY_EXIST(&quot;1001&quot;,&quot;User Already Exist.!&quot;, HttpStatus.BAD_REQUEST);\n\n    private final String code;\n    private final String message;\n    private final HttpStatus httpStatus;\n\n}\n</code></pre>\n<p><strong>GlobalApiExceptionHandler</strong></p>\n<pre><code>\nimport static com.settodo.settodoapp.error.util.ErrorResponseUtil.build;\n\nimport org.springframework.core.Ordered;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.context.request.ServletWebRequest;\nimport org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler;\n\nimport com.settodo.settodoapp.error.dto.ErrorResponseDTO;\n\n@ControllerAdvice\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class GlobalApiExceptionHandler extends ResponseEntityExceptionHandler\n{\n\n    @ExceptionHandler(BusinessException.class)\n    public ResponseEntity&lt;Object&gt; handleCustomUncaughtBusinessException(final BusinessException ex,\n                                                                        final ServletWebRequest request)\n    {\n        final ErrorResponseDTO errorResponseDto = build(ex.getCode(), ex.getMessage(), ex.getHttpStatus());\n        return ResponseEntity.status(ex.getHttpStatus()).body(errorResponseDto);\n    }\n\n    @ExceptionHandler(value = {Exception.class})\n    public ResponseEntity&lt;Object&gt; handleUncaughtException(final Exception ex, final ServletWebRequest request)\n    {\n        final ErrorResponseDTO errorResponseDto = build(Exception.class.getSimpleName(),\n                HttpStatus.INTERNAL_SERVER_ERROR.getReasonPhrase(),\n                HttpStatus.INTERNAL_SERVER_ERROR);\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(errorResponseDto);\n    }\n\n}\n</code></pre>\n<p><strong>BusinessException</strong></p>\n<pre><code>\nimport static java.lang.String.format;\n\nimport org.springframework.http.HttpStatus;\n\nimport com.settodo.settodoapp.error.policy.BusinessExceptionPolicy;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\n@Getter\n@Setter\npublic class BusinessException extends RuntimeException implements BusinessExceptionPolicy\n{\n\n    protected final String code;\n    protected final String message;\n    protected final HttpStatus httpStatus;\n\n    public BusinessException(final BusinessExceptionReason reason) {\n        this.code = reason.getCode();\n        this.message = reason.getMessage();\n        this.httpStatus = reason.getHttpStatus();\n    }\n\n    public BusinessException(final BusinessExceptionReason reason, final HttpStatus overridingHttpStatus) {\n        this.code = reason.getCode();\n        this.message = reason.getMessage();\n        this.httpStatus = overridingHttpStatus;\n    }\n\n    public BusinessException(final BusinessExceptionReason reason, final Object... parameters) {\n        if (parameters != null) {\n            this.message = format(reason.getMessage(), parameters);\n        } else {\n            this.message = reason.getMessage();\n        }\n\n        this.code = reason.getCode();\n        this.httpStatus = reason.getHttpStatus();\n    }\n\n    @Override\n    public String getLocalizedMessage() {\n        return getMessage();\n    }\n\n    public String toString() {\n        return format(&quot;BusinessException(code=%s, message=%s, httpStatus=%s)&quot;, this.getCode(), this.getMessage(),\n                this.getHttpStatus().value());\n    }\n}\n</code></pre>\n<p><em>The <strong>@ExceptionHandler</strong> is functioning, but it is unable to catch the error as desired.</em></p>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1681593875,"post_id":76024802,"comment_id":134082544,"body_markdown":"Step through your code with the debugger. That will allow you to either fix the problem or edit your question to explain what&#39;s going wrong.","body":"Step through your code with the debugger. That will allow you to either fix the problem or edit your question to explain what&#39;s going wrong."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1681594255,"post_id":76024802,"comment_id":134082599,"body_markdown":"You certainly need to go past those strings and *then* start collecting double values. I would probably not use parallel arrays though","body":"You certainly need to go past those strings and <i>then</i> start collecting double values. I would probably not use parallel arrays though"},{"owner":{"account_id":23659651,"reputation":104,"user_id":17687406,"display_name":"mi1000"},"score":0,"creation_date":1681594580,"post_id":76024802,"comment_id":134082628,"body_markdown":"What is the problem exactly ? What error does your console shows ? Did you try to add a separator for your scanner ?","body":"What is the problem exactly ? What error does your console shows ? Did you try to add a separator for your scanner ?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1681594603,"post_id":76024802,"comment_id":134082631,"body_markdown":"Your question is mutating ;) Now we see it&#39;s CSV-like...","body":"Your question is mutating ;) Now we see it&#39;s CSV-like..."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1681595067,"post_id":76024802,"comment_id":134082675,"body_markdown":"`Scanner scan = new Scanner(bean).useDelimiter(&quot;\\\\s*,\\\\s*&quot;);while(scan.hasNextDouble()) { coordinatesList.add(new Coordinates(scan.nextDouble(), scan.nextDouble()); }` is the sort of thing you should probably be doing","body":"<code>Scanner scan = new Scanner(bean).useDelimiter(&quot;\\\\s*,\\\\s*&quot;);while(scan.hasNextDo&zwnj;&#8203;uble()) { coordinatesList.add(new Coordinates(scan.nextDouble(), scan.nextDouble()); }</code> is the sort of thing you should probably be doing"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1681627268,"post_id":76024802,"comment_id":134084809,"body_markdown":"`Scanner scan = new Scanner(bean).useDelimiter(&quot;,\\\\s+|\\\\s+&quot;);`. Don&#39;t forget to close your reader (`scan`).","body":"<code>Scanner scan = new Scanner(bean).useDelimiter(&quot;,\\\\s+|\\\\s+&quot;);</code>. Don&#39;t forget to close your reader (<code>scan</code>)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1681642711,"post_id":76024802,"comment_id":134086460,"body_markdown":"Quite right. Try-with-resources is your friend","body":"Quite right. Try-with-resources is your friend"}],"owner":{"account_id":26527726,"reputation":23,"user_id":20160436,"display_name":"Liam Horton"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681594327,"creation_date":1681593411,"question_id":76024802,"body_markdown":"\r\ni need to read a very large file for a project that has x and y values. i was given a file with the data and i need to read the values from it to do the necessary calculations. currently im just trying to read the data into 2 arrays and print it as i go just to confirm it&#39;s being read.\r\n\r\n```\r\nimport java.util.Scanner;\r\nimport java.io.File;\r\nimport java.util.*;\r\n\r\nclass Main {\r\n  public static void main(String[] args) throws Exception {\r\n    File bean = new File(&quot;BeanDataset.txt&quot;);\r\n    Scanner scan = new Scanner(bean);\r\n    double[] minor = new double[13611];\r\n    double[] major = new double[13611];\r\n    Double num;\r\n    int current = 0, minorcount=0, majorcount=0;\r\n\r\n    while(scan.hasNextDouble()) {\r\n      num = scan.nextDouble();\r\n\r\n      if(current==0) {\r\n        minor[minorcount] = num;\r\n        minorcount++;\r\n        current = 1;\r\n      }\r\n      else {\r\n        major[majorcount] = num;\r\n        majorcount++;\r\n        current = 0;\r\n      }\r\n      System.out.println(num);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nthis is the first 20 lines of the data (the file is 267 pages long with 13611 entries) where the numbers alternate between minor and major \r\n\r\n173.888747,      208.1781167\r\n182.7344194,     200.5247957\r\n175.9311426,     212.8261299\r\n182.5165157,     210.557999\r\n190.2792788,     201.8478822\r\n181.5101816,     212.5605564\r\n184.0390501,     211.0501553\r\n182.7372038,     212.9967551\r\n183.1571463,     213.5341452\r\n180.8974686,     217.2278128\r\n184.4398709,     213.5600894\r\n188.3268476,     210.4862549\r\n184.9692526,     214.6485485\r\n183.6443122,     216.4848362\r\n187.1929601,     212.0669751\r\n186.5620882,     212.9759252\r\n184.4716842,     215.6406947\r\n184.8748759,     215.067737\r\n187.535939,      212.4503189","title":"i&#39;m trying to read 2 sets of data from a file and store them in respective arrays but it doesn&#39;t seem like the file is being read","body":"<p>i need to read a very large file for a project that has x and y values. i was given a file with the data and i need to read the values from it to do the necessary calculations. currently im just trying to read the data into 2 arrays and print it as i go just to confirm it's being read.</p>\n<pre><code>import java.util.Scanner;\nimport java.io.File;\nimport java.util.*;\n\nclass Main {\n  public static void main(String[] args) throws Exception {\n    File bean = new File(&quot;BeanDataset.txt&quot;);\n    Scanner scan = new Scanner(bean);\n    double[] minor = new double[13611];\n    double[] major = new double[13611];\n    Double num;\n    int current = 0, minorcount=0, majorcount=0;\n\n    while(scan.hasNextDouble()) {\n      num = scan.nextDouble();\n\n      if(current==0) {\n        minor[minorcount] = num;\n        minorcount++;\n        current = 1;\n      }\n      else {\n        major[majorcount] = num;\n        majorcount++;\n        current = 0;\n      }\n      System.out.println(num);\n    }\n  }\n}\n</code></pre>\n<p>this is the first 20 lines of the data (the file is 267 pages long with 13611 entries) where the numbers alternate between minor and major</p>\n<p>173.888747,      208.1781167\n182.7344194,     200.5247957\n175.9311426,     212.8261299\n182.5165157,     210.557999\n190.2792788,     201.8478822\n181.5101816,     212.5605564\n184.0390501,     211.0501553\n182.7372038,     212.9967551\n183.1571463,     213.5341452\n180.8974686,     217.2278128\n184.4398709,     213.5600894\n188.3268476,     210.4862549\n184.9692526,     214.6485485\n183.6443122,     216.4848362\n187.1929601,     212.0669751\n186.5620882,     212.9759252\n184.4716842,     215.6406947\n184.8748759,     215.067737\n187.535939,      212.4503189</p>\n"},{"tags":["java","spring","spring-security","apereo"],"owner":{"account_id":28196385,"reputation":11,"user_id":21550950,"display_name":"justAUser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681594207,"creation_date":1681594207,"question_id":76024857,"body_markdown":"I have the following directories and files structure:\r\n\r\n- **src**\r\n\r\n  - **main**\r\n\r\n    - **java**\r\n\r\n      - **casSecuredApp**\r\n\r\n        - **config**\r\n\r\n          - WebSecurityConfig.java\r\n\r\n        - **controller**\r\n\r\n          - AuthController.java\r\n\r\n          - IndexController.java\r\n\r\n          - SecuredController.java\r\n\r\n        - CasSecuredAppApplication.java\r\n\r\nWebSecurityConfig:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig {\r\n\r\n    private Logger logger = LoggerFactory.getLogger(WebSecurityConfig.class);\r\n    private Filter singleSignOutFilter;\r\n    private LogoutFilter logoutFilter;\r\n    private CasAuthenticationProvider casAuthenticationProvider;\r\n    private ServiceProperties serviceProperties;\r\n\r\n    @Autowired\r\n    public WebSecurityConfig(Filter singleSignOutFilter, LogoutFilter logoutFilter,\r\n                             CasAuthenticationProvider casAuthenticationProvider,\r\n                             ServiceProperties serviceProperties) {\r\n        this.logoutFilter = logoutFilter;\r\n        this.singleSignOutFilter = singleSignOutFilter;\r\n        this.serviceProperties = serviceProperties;\r\n        this.casAuthenticationProvider = casAuthenticationProvider;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.authorizeHttpRequests().requestMatchers( &quot;/secured&quot;, &quot;/login&quot;).authenticated()\r\n                .and()\r\n                .exceptionHandling().authenticationEntryPoint(authenticationEntryPoint())\r\n                .and()\r\n                .addFilterBefore(singleSignOutFilter, CasAuthenticationFilter.class)\r\n                .addFilterBefore(logoutFilter, LogoutFilter.class)\r\n                .csrf().ignoringRequestMatchers(&quot;/exit/cas&quot;);\r\n        return http.build();\r\n    }\r\n\r\n    @Autowired\r\n    void registerProvider(AuthenticationManagerBuilder auth) {\r\n        auth.authenticationProvider(casAuthenticationProvider);\r\n    }\r\n\r\n    @Bean\r\n    AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n    public AuthenticationEntryPoint authenticationEntryPoint() {\r\n        CasAuthenticationEntryPoint entryPoint = new CasAuthenticationEntryPoint();\r\n        entryPoint.setLoginUrl(&quot;https://localhost:8443/cas/login&quot;);\r\n        entryPoint.setServiceProperties(serviceProperties);\r\n        return entryPoint;\r\n    }\r\n}\r\n```\r\n\r\nCasSecuredAppApplication\r\n\r\n```\r\n@SpringBootApplication\r\npublic class CasSecuredAppApplication {\r\n\r\n\tprivate static final Logger logger = LoggerFactory.getLogger(CasSecuredAppApplication.class);\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(CasSecuredAppApplication.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic CasAuthenticationFilter casAuthenticationFilter(\r\n\t\t\tAuthenticationManager authenticationManager,\r\n\t\t\tServiceProperties serviceProperties) throws Exception {\r\n\t\tCasAuthenticationFilter filter = new CasAuthenticationFilter();\r\n\t\tfilter.setAuthenticationManager(authenticationManager);\r\n\t\tfilter.setServiceProperties(serviceProperties);\r\n\t\treturn filter;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic ServiceProperties serviceProperties() {\r\n\t\tlogger.info(&quot;service properties&quot;);\r\n\t\tServiceProperties serviceProperties = new ServiceProperties();\r\n\t\tserviceProperties.setService(&quot;http://cas-client:8900/login/cas&quot;);\r\n\t\tserviceProperties.setSendRenew(false);\r\n\t\treturn serviceProperties;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic TicketValidator ticketValidator() {\r\n\t\treturn new Cas30ServiceTicketValidator(&quot;https://localhost:8443&quot;);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic CasAuthenticationProvider casAuthenticationProvider(\r\n\t\t\tTicketValidator ticketValidator,\r\n\t\t\tServiceProperties serviceProperties) {\r\n\t\tCasAuthenticationProvider provider = new CasAuthenticationProvider();\r\n\t\tprovider.setServiceProperties(serviceProperties);\r\n\t\tprovider.setTicketValidator(ticketValidator);\r\n\t\tprovider.setUserDetailsService(\r\n\t\t\t\ts -&gt; new User(&quot;test&quot;, &quot;test&quot;, true, true, true, true,\r\n\t\t\t\t\t\tAuthorityUtils.createAuthorityList(&quot;ROLE_ADMIN&quot;)));\r\n\t\tprovider.setKey(&quot;CAS_PROVIDER_LOCALHOST_8900&quot;);\r\n\t\treturn provider;\r\n\t}\r\n\r\n\r\n\t@Bean\r\n\tpublic SecurityContextLogoutHandler securityContextLogoutHandler() {\r\n\t\treturn new SecurityContextLogoutHandler();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic LogoutFilter logoutFilter() {\r\n\t\tLogoutFilter logoutFilter = new LogoutFilter(&quot;https://localhost:8443/logout&quot;, securityContextLogoutHandler());\r\n\t\tlogoutFilter.setFilterProcessesUrl(&quot;/logout/cas&quot;);\r\n\t\treturn logoutFilter;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic SingleSignOutFilter singleSignOutFilter() {\r\n\t\tSingleSignOutFilter singleSignOutFilter = new SingleSignOutFilter();\r\n\t\tsingleSignOutFilter.setLogoutCallbackPath(&quot;/exit/cas&quot;);\r\n\t\tsingleSignOutFilter.setIgnoreInitConfiguration(true);\r\n\t\treturn singleSignOutFilter;\r\n\t}\r\n}\r\n```\r\n\r\nI am not able to start and use this spring boot application, because I always get different exceptions.\r\n\r\nThe current problem that I have is the following error message:\r\n\r\n```\r\nParameter 0 of constructor in casSecuredApp.casSecuredApp.config.WebSecurityConfig required a single bean, but 6 were found:\r\n\t- springSecurityFilterChain: defined by method &#39;springSecurityFilterChain&#39; in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]\r\n\t- casAuthenticationFilter: defined by method &#39;casAuthenticationFilter&#39; in casSecuredApp.CasSecuredAppApplication\r\n\t- logoutFilter: defined by method &#39;logoutFilter&#39; in casSecuredApp.CasSecuredAppApplication\r\n\t- requestContextFilter: defined by method &#39;requestContextFilter&#39; in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]\r\n\t- formContentFilter: defined by method &#39;formContentFilter&#39; in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration.class]\r\n\t- characterEncodingFilter: defined by method &#39;characterEncodingFilter&#39; in class path resource [org/springframework/boot/autoconfigure/web/servlet/HttpEncodingAutoConfiguratio\r\n```\r\n\r\nWhat do I need to change in the above code to remove this error message?","title":"Spring Security - WebSecurityConfig required a single bean, but 6 were found","body":"<p>I have the following directories and files structure:</p>\n<ul>\n<li><p><strong>src</strong></p>\n<ul>\n<li><p><strong>main</strong></p>\n<ul>\n<li><p><strong>java</strong></p>\n<ul>\n<li><p><strong>casSecuredApp</strong></p>\n<ul>\n<li><p><strong>config</strong></p>\n<ul>\n<li>WebSecurityConfig.java</li>\n</ul>\n</li>\n<li><p><strong>controller</strong></p>\n<ul>\n<li><p>AuthController.java</p>\n</li>\n<li><p>IndexController.java</p>\n</li>\n<li><p>SecuredController.java</p>\n</li>\n</ul>\n</li>\n<li><p>CasSecuredAppApplication.java</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>WebSecurityConfig:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    private Logger logger = LoggerFactory.getLogger(WebSecurityConfig.class);\n    private Filter singleSignOutFilter;\n    private LogoutFilter logoutFilter;\n    private CasAuthenticationProvider casAuthenticationProvider;\n    private ServiceProperties serviceProperties;\n\n    @Autowired\n    public WebSecurityConfig(Filter singleSignOutFilter, LogoutFilter logoutFilter,\n                             CasAuthenticationProvider casAuthenticationProvider,\n                             ServiceProperties serviceProperties) {\n        this.logoutFilter = logoutFilter;\n        this.singleSignOutFilter = singleSignOutFilter;\n        this.serviceProperties = serviceProperties;\n        this.casAuthenticationProvider = casAuthenticationProvider;\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests().requestMatchers( &quot;/secured&quot;, &quot;/login&quot;).authenticated()\n                .and()\n                .exceptionHandling().authenticationEntryPoint(authenticationEntryPoint())\n                .and()\n                .addFilterBefore(singleSignOutFilter, CasAuthenticationFilter.class)\n                .addFilterBefore(logoutFilter, LogoutFilter.class)\n                .csrf().ignoringRequestMatchers(&quot;/exit/cas&quot;);\n        return http.build();\n    }\n\n    @Autowired\n    void registerProvider(AuthenticationManagerBuilder auth) {\n        auth.authenticationProvider(casAuthenticationProvider);\n    }\n\n    @Bean\n    AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    public AuthenticationEntryPoint authenticationEntryPoint() {\n        CasAuthenticationEntryPoint entryPoint = new CasAuthenticationEntryPoint();\n        entryPoint.setLoginUrl(&quot;https://localhost:8443/cas/login&quot;);\n        entryPoint.setServiceProperties(serviceProperties);\n        return entryPoint;\n    }\n}\n</code></pre>\n<p>CasSecuredAppApplication</p>\n<pre><code>@SpringBootApplication\npublic class CasSecuredAppApplication {\n\n    private static final Logger logger = LoggerFactory.getLogger(CasSecuredAppApplication.class);\n\n    public static void main(String[] args) {\n        SpringApplication.run(CasSecuredAppApplication.class, args);\n    }\n\n    @Bean\n    public CasAuthenticationFilter casAuthenticationFilter(\n            AuthenticationManager authenticationManager,\n            ServiceProperties serviceProperties) throws Exception {\n        CasAuthenticationFilter filter = new CasAuthenticationFilter();\n        filter.setAuthenticationManager(authenticationManager);\n        filter.setServiceProperties(serviceProperties);\n        return filter;\n    }\n\n    @Bean\n    public ServiceProperties serviceProperties() {\n        logger.info(&quot;service properties&quot;);\n        ServiceProperties serviceProperties = new ServiceProperties();\n        serviceProperties.setService(&quot;http://cas-client:8900/login/cas&quot;);\n        serviceProperties.setSendRenew(false);\n        return serviceProperties;\n    }\n\n    @Bean\n    public TicketValidator ticketValidator() {\n        return new Cas30ServiceTicketValidator(&quot;https://localhost:8443&quot;);\n    }\n\n    @Bean\n    public CasAuthenticationProvider casAuthenticationProvider(\n            TicketValidator ticketValidator,\n            ServiceProperties serviceProperties) {\n        CasAuthenticationProvider provider = new CasAuthenticationProvider();\n        provider.setServiceProperties(serviceProperties);\n        provider.setTicketValidator(ticketValidator);\n        provider.setUserDetailsService(\n                s -&gt; new User(&quot;test&quot;, &quot;test&quot;, true, true, true, true,\n                        AuthorityUtils.createAuthorityList(&quot;ROLE_ADMIN&quot;)));\n        provider.setKey(&quot;CAS_PROVIDER_LOCALHOST_8900&quot;);\n        return provider;\n    }\n\n\n    @Bean\n    public SecurityContextLogoutHandler securityContextLogoutHandler() {\n        return new SecurityContextLogoutHandler();\n    }\n\n    @Bean\n    public LogoutFilter logoutFilter() {\n        LogoutFilter logoutFilter = new LogoutFilter(&quot;https://localhost:8443/logout&quot;, securityContextLogoutHandler());\n        logoutFilter.setFilterProcessesUrl(&quot;/logout/cas&quot;);\n        return logoutFilter;\n    }\n\n    @Bean\n    public SingleSignOutFilter singleSignOutFilter() {\n        SingleSignOutFilter singleSignOutFilter = new SingleSignOutFilter();\n        singleSignOutFilter.setLogoutCallbackPath(&quot;/exit/cas&quot;);\n        singleSignOutFilter.setIgnoreInitConfiguration(true);\n        return singleSignOutFilter;\n    }\n}\n</code></pre>\n<p>I am not able to start and use this spring boot application, because I always get different exceptions.</p>\n<p>The current problem that I have is the following error message:</p>\n<pre><code>Parameter 0 of constructor in casSecuredApp.casSecuredApp.config.WebSecurityConfig required a single bean, but 6 were found:\n    - springSecurityFilterChain: defined by method 'springSecurityFilterChain' in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]\n    - casAuthenticationFilter: defined by method 'casAuthenticationFilter' in casSecuredApp.CasSecuredAppApplication\n    - logoutFilter: defined by method 'logoutFilter' in casSecuredApp.CasSecuredAppApplication\n    - requestContextFilter: defined by method 'requestContextFilter' in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]\n    - formContentFilter: defined by method 'formContentFilter' in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration.class]\n    - characterEncodingFilter: defined by method 'characterEncodingFilter' in class path resource [org/springframework/boot/autoconfigure/web/servlet/HttpEncodingAutoConfiguratio\n</code></pre>\n<p>What do I need to change in the above code to remove this error message?</p>\n"},{"tags":["java","arrays","recursion","global-variables"],"comments":[{"owner":{"account_id":4541793,"reputation":26875,"user_id":3689450,"display_name":"VLAZ"},"score":0,"creation_date":1681503075,"post_id":76018594,"comment_id":134072671,"body_markdown":"You only modify `start` and `end` *after* the recursive call that uses them...","body":"You only modify <code>start</code> and <code>end</code> <i>after</i> the recursive call that uses them..."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1681505317,"post_id":76018594,"comment_id":134073048,"body_markdown":"Right, for `backwardArray()` to see new global values they&#39;d have to be modified before the call.","body":"Right, for <code>backwardArray()</code> to see new global values they&#39;d have to be modified before the call."}],"answers":[{"tags":[],"owner":{"account_id":27910787,"reputation":33,"user_id":21313034,"display_name":"JustSomeProgrammer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681592344,"creation_date":1681592344,"answer_id":76024735,"question_id":76018594,"body_markdown":"After learning that using global variables is extremely risky and not to be desired in the way I am using them here, I have found that using a helper method is more beneficial. The revision works much better:\r\n\r\n```    \r\npublic int[] backwardArray(int[] myArray) {\r\n\t\treturn backwardArray(myArray,0,myArray.length-1);\r\n\t}\r\n\tpublic static int[] backwardArray(int[] myArray, int start, int end) {\r\n\t\tif(start&lt;end){\r\n\t\t       int temp = myArray[start];\r\n\t\t       myArray[start] = myArray[end];\r\n\t\t       myArray[end] = temp;\r\n\t\t       return backwardArray(myArray, ++start, --end);\r\n\t\t    }\r\n\t\treturn myArray;   \r\n\t}\r\n ```\r\n(Admittedly, this took me way too long realize, but) the System.out.println() would look like: \r\n```public class goingBackward{\r\n\tpublic static void main(String[] args) {\r\n\t\tgoingBackward y = new goingBackward();\r\n\t\tint [] x= {1,5,8,3,15,35};\r\n        System.out.println(Arrays.toString(y.backwardArray(x)));\r\n\t\t}\r\n","title":"Recursively Reverse an Array using Global Variables","body":"<p>After learning that using global variables is extremely risky and not to be desired in the way I am using them here, I have found that using a helper method is more beneficial. The revision works much better:</p>\n<pre><code>public int[] backwardArray(int[] myArray) {\n        return backwardArray(myArray,0,myArray.length-1);\n    }\n    public static int[] backwardArray(int[] myArray, int start, int end) {\n        if(start&lt;end){\n               int temp = myArray[start];\n               myArray[start] = myArray[end];\n               myArray[end] = temp;\n               return backwardArray(myArray, ++start, --end);\n            }\n        return myArray;   \n    }\n</code></pre>\n<p>(Admittedly, this took me way too long realize, but) the System.out.println() would look like:</p>\n<pre><code>    public static void main(String[] args) {\n        goingBackward y = new goingBackward();\n        int [] x= {1,5,8,3,15,35};\n        System.out.println(Arrays.toString(y.backwardArray(x)));\n        }\n</code></pre>\n"}],"owner":{"account_id":27910787,"reputation":33,"user_id":21313034,"display_name":"JustSomeProgrammer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681592344,"creation_date":1681502948,"question_id":76018594,"body_markdown":"I&#39;m not too sure how I can modify start and end when they&#39;re not in the recursive method? \r\n\r\nFor this example, I&#39;m trying to reverse an array. \r\n\r\nUsually end up getting StackOverflow Error for my test so far. Is there anything I should be doing instead?\r\n   ```\r\n        int start =0;\r\n\tint end =0;\r\n\tpublic int[] backwardArray(int[] myArray) {\r\n\t\tend = myArray.length-1;\r\n\t\tif (start &lt; end) {\r\n\t\t\tint temp = myArray[start];\r\n\t\t    myArray[start] = myArray[end];\r\n\t\t    myArray[end] = temp;\r\n\t\t    backwardArray(myArray);\r\n\t\t    end--;\r\n\t\t    start++;\r\n\t\t }\r\n\t\t return myArray;\r\n\t}\r\n```","title":"Recursively Reverse an Array using Global Variables","body":"<p>I'm not too sure how I can modify start and end when they're not in the recursive method?</p>\n<p>For this example, I'm trying to reverse an array.</p>\n<p>Usually end up getting StackOverflow Error for my test so far. Is there anything I should be doing instead?</p>\n<pre><code>     int start =0;\n int end =0;\n public int[] backwardArray(int[] myArray) {\n     end = myArray.length-1;\n     if (start &lt; end) {\n         int temp = myArray[start];\n         myArray[start] = myArray[end];\n         myArray[end] = temp;\n         backwardArray(myArray);\n         end--;\n         start++;\n      }\n      return myArray;\n }\n</code></pre>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681511089,"post_id":76017138,"comment_id":134073906,"body_markdown":"Kafka includes `reload4j` as an optional dependency (a replacement for log4j 1.x) after a recent update, not logback","body":"Kafka includes <code>reload4j</code> as an optional dependency (a replacement for log4j 1.x) after a recent update, not logback"}],"answers":[{"tags":[],"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681510743,"creation_date":1681510743,"answer_id":76019321,"question_id":76017138,"body_markdown":"Kafka uses Slf4j as the logging facade. This library allows you to choose which logging implementation you want to use, so you just need to add a dependency onto the appropriate slf4j adaptor library, as described [here][1].\r\n\r\nYour pom.xml is using log4j (v2) as the logging implementation and appears to be using the correct logging adaptor (log4j-slf4j2-impl) as described [here][2].\r\n\r\n  [1]: https://www.slf4j.org/manual.html#swapping\r\n  [2]: https://logging.apache.org/log4j/2.x/log4j-slf4j-impl.html","title":"Kafka how to enable logging in Java","body":"<p>Kafka uses Slf4j as the logging facade. This library allows you to choose which logging implementation you want to use, so you just need to add a dependency onto the appropriate slf4j adaptor library, as described <a href=\"https://www.slf4j.org/manual.html#swapping\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Your pom.xml is using log4j (v2) as the logging implementation and appears to be using the correct logging adaptor (log4j-slf4j2-impl) as described <a href=\"https://logging.apache.org/log4j/2.x/log4j-slf4j-impl.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681590320,"creation_date":1681511218,"answer_id":76019359,"question_id":76017138,"body_markdown":"&gt; these logging frameworks define an interface library\r\n\r\nYes. Slf4j is the interface. The others are 2 implementations, but there are others like `java.util.logging` (JUL). \r\n\r\nYou also need a [binding library](https://slf4j.org/manual.html#swapping) for a specific implentation. \r\n\r\n&gt; There is conflicting information available online. Some articles suggest log4j is used, some suggest slf4j\r\n\r\nBoth are accurate. log4j **1.x** (not 2, like you&#39;ve added) / reload4j is the implementation that Kafka uses, but uses it via the slf4j interfaces. \r\n\r\n&gt; Hence it is very hard to search for information, because the word &quot;log&quot; is used for multiple purposes\r\n\r\nWriting to Console stdout/stderr, files, or Kafka is done with [&quot;appenders&quot;](https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/mom/kafka/KafkaAppender.html) in log4j terms, not a &quot;logger&quot;. \r\n\r\n&gt; there is a failure, I would expect to be able to see some logging information printed to stdout\r\n\r\nOnly if you have a valid log _file_. Java does not include one for you. \r\n\r\nFor example, you would need `src/main/resources/log4j2.xml` (create resources directory in your Maven project if not exists) to have the log4j2 library you&#39;ve added to log anything, anywhere.  \r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;WARN&quot;&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\r\n        &lt;/Console&gt;\r\n    &lt;/Appenders&gt;\r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;DEBUG&quot;&gt; &lt;!-- everything as debug --&gt;\r\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n        &lt;/Root&gt;\r\n        &lt;Logger name=&quot;org.apache.kafka&quot; level=&quot;INFO&quot;/&gt;  &lt;!-- except internal kafka packages --&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```","title":"Kafka how to enable logging in Java","body":"<blockquote>\n<p>these logging frameworks define an interface library</p>\n</blockquote>\n<p>Yes. Slf4j is the interface. The others are 2 implementations, but there are others like <code>java.util.logging</code> (JUL).</p>\n<p>You also need a <a href=\"https://slf4j.org/manual.html#swapping\" rel=\"nofollow noreferrer\">binding library</a> for a specific implentation.</p>\n<blockquote>\n<p>There is conflicting information available online. Some articles suggest log4j is used, some suggest slf4j</p>\n</blockquote>\n<p>Both are accurate. log4j <strong>1.x</strong> (not 2, like you've added) / reload4j is the implementation that Kafka uses, but uses it via the slf4j interfaces.</p>\n<blockquote>\n<p>Hence it is very hard to search for information, because the word &quot;log&quot; is used for multiple purposes</p>\n</blockquote>\n<p>Writing to Console stdout/stderr, files, or Kafka is done with <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/mom/kafka/KafkaAppender.html\" rel=\"nofollow noreferrer\">&quot;appenders&quot;</a> in log4j terms, not a &quot;logger&quot;.</p>\n<blockquote>\n<p>there is a failure, I would expect to be able to see some logging information printed to stdout</p>\n</blockquote>\n<p>Only if you have a valid log <em>file</em>. Java does not include one for you.</p>\n<p>For example, you would need <code>src/main/resources/log4j2.xml</code> (create resources directory in your Maven project if not exists) to have the log4j2 library you've added to log anything, anywhere.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\n        &lt;/Console&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;DEBUG&quot;&gt; &lt;!-- everything as debug --&gt;\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n        &lt;/Root&gt;\n        &lt;Logger name=&quot;org.apache.kafka&quot; level=&quot;INFO&quot;/&gt;  &lt;!-- except internal kafka packages --&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n"}],"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":793,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681590320,"creation_date":1681489355,"question_id":76017138,"body_markdown":"I have written a test application to experiment with Kafka. I am now trying to enable logging.\r\n\r\nI don&#39;t know too much about how logging is done in Java applications, but my understanding is that typically, a framework would be used. Some examples include:\r\n\r\n- log4j\r\n- slf4j\r\n- logback\r\n\r\nMy understanding is that, in most cases, these logging frameworks define an interface library as well as an implementation library, so that they can be mixed and matched.\r\n\r\nFor example, if Kafka uses `logging-api-A`, then it would be possible to use `logging-impl-B` for the actual implementation, while maintaining compatibility with the Kafka implementation code which calls the API defined for `logging-api-A`.\r\n\r\nFurther, my understanding is that typically a library would be required to &quot;glue together&quot; one logging API framework with one logging implementation framework. This library is an adapter of some kind which enables interoperability.\r\n\r\n----\r\n\r\n# How can I enable logging in my client Java code which uses Kafka?\r\n\r\nIf I call Kafka code from my Java program, and there is a failure, I would expect to be able to see some logging information printed to `stdout`. Even in the case where there is no failure, I would still expect to be able to configure logging so that info or debug messages are shown logging details of what is being done. (Eg: sending messages to Kafka should produce some kind of log, so should consuming messages. Connecting or disconnecting, etc...)\r\n\r\nAt the moment I don&#39;t know which framework Kafka uses for logging. There is conflicting information available online. Some articles suggest log4j is used, some suggest slf4j and some suggest logback is used after a recent update. So I&#39;m confused about how logging is actually done by Kafka.\r\n\r\nThis information is made harder to find, because Kafka itself can be used as an output for logging. For example, you might write an application, and rather than dumping logs to a file, you might want that logging information to be dumped to a Kafka topic instead. Hence it is very hard to search for information, because the word &quot;log&quot; is used for multiple purposes.\r\n\r\n----\r\n\r\n# Test Code\r\n\r\nThis isn&#39;t especially relevant, but here&#39;s some test code I have been using if it helps.\r\n\r\n```\r\npackage com.myname.kafkaexample.KafkaExample;\r\n\r\nimport java.util.Properties;\r\n\r\nimport org.apache.kafka.clients.producer.KafkaProducer;\r\nimport org.apache.kafka.clients.producer.ProducerRecord;\r\n\r\n\r\npublic class Main {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tProperties properties = new Properties();\r\n\t\tproperties.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:29092&quot;);\r\n\t\tproperties.setProperty(&quot;default.topic&quot;, &quot;hello-world-topic&quot;);\r\n\t\tproperties.setProperty(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n\t\tproperties.setProperty(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n\t\t\r\n\t\tKafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(properties);\r\n\t\t\r\n\t\tString topicName = &quot;hello-world-topic&quot;;\r\n\t\tString key = &quot;testkey&quot;;\r\n\t\tString message = &quot;Hello Kafka! (Message String)&quot;;\r\n\t\t\r\n\t\tProducerRecord&lt;String, String&gt; producerRecord = new ProducerRecord&lt;&gt;(topicName, key, message);\r\n\t\tproducer.send(producerRecord);\r\n\t\tproducer.close();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAnd the `pom.xml`...\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.myname.kafkaexample&lt;/groupId&gt;\r\n  &lt;artifactId&gt;KafkaExample&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;name&gt;KafkaExample&lt;/name&gt;\r\n  &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;4.11&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.20.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n      &lt;version&gt;2.20.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;2.20.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.lmax&lt;/groupId&gt;\r\n      &lt;artifactId&gt;disruptor&lt;/artifactId&gt;\r\n      &lt;version&gt;3.3.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.kafka/kafka --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n      &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\r\n      &lt;version&gt;3.4.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n      &lt;plugins&gt;\r\n        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.22.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        \r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n            &lt;archive&gt;\r\n              &lt;manifest&gt;\r\n                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                &lt;mainClass&gt;com.myname.kafkaexample.KafkaExample.Main&lt;/mainClass&gt;\r\n              &lt;/manifest&gt;\r\n            &lt;/archive&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n      \r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.5.0&lt;/version&gt;\r\n          &lt;executions&gt;\r\n            &lt;execution&gt;\r\n              &lt;phase&gt;package&lt;/phase&gt;\r\n              &lt;goals&gt;\r\n                &lt;goal&gt;single&lt;/goal&gt;\r\n              &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n          &lt;/executions&gt;\r\n        &lt;/plugin&gt;\r\n        \r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.8.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.7.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n\r\n    &lt;plugins&gt;\r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.5.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;descriptorRefs&gt;\r\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n          &lt;/descriptorRefs&gt;\r\n          &lt;archive&gt;\r\n            &lt;manifest&gt;\r\n              &lt;mainClass&gt;com.myname.kafkaexample.KafkaExample.Main&lt;/mainClass&gt;\r\n            &lt;/manifest&gt;\r\n          &lt;/archive&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\n    &lt;/plugins&gt;\r\n\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```","title":"Kafka how to enable logging in Java","body":"<p>I have written a test application to experiment with Kafka. I am now trying to enable logging.</p>\n<p>I don't know too much about how logging is done in Java applications, but my understanding is that typically, a framework would be used. Some examples include:</p>\n<ul>\n<li>log4j</li>\n<li>slf4j</li>\n<li>logback</li>\n</ul>\n<p>My understanding is that, in most cases, these logging frameworks define an interface library as well as an implementation library, so that they can be mixed and matched.</p>\n<p>For example, if Kafka uses <code>logging-api-A</code>, then it would be possible to use <code>logging-impl-B</code> for the actual implementation, while maintaining compatibility with the Kafka implementation code which calls the API defined for <code>logging-api-A</code>.</p>\n<p>Further, my understanding is that typically a library would be required to &quot;glue together&quot; one logging API framework with one logging implementation framework. This library is an adapter of some kind which enables interoperability.</p>\n<hr />\n<h1>How can I enable logging in my client Java code which uses Kafka?</h1>\n<p>If I call Kafka code from my Java program, and there is a failure, I would expect to be able to see some logging information printed to <code>stdout</code>. Even in the case where there is no failure, I would still expect to be able to configure logging so that info or debug messages are shown logging details of what is being done. (Eg: sending messages to Kafka should produce some kind of log, so should consuming messages. Connecting or disconnecting, etc...)</p>\n<p>At the moment I don't know which framework Kafka uses for logging. There is conflicting information available online. Some articles suggest log4j is used, some suggest slf4j and some suggest logback is used after a recent update. So I'm confused about how logging is actually done by Kafka.</p>\n<p>This information is made harder to find, because Kafka itself can be used as an output for logging. For example, you might write an application, and rather than dumping logs to a file, you might want that logging information to be dumped to a Kafka topic instead. Hence it is very hard to search for information, because the word &quot;log&quot; is used for multiple purposes.</p>\n<hr />\n<h1>Test Code</h1>\n<p>This isn't especially relevant, but here's some test code I have been using if it helps.</p>\n<pre><code>package com.myname.kafkaexample.KafkaExample;\n\nimport java.util.Properties;\n\nimport org.apache.kafka.clients.producer.KafkaProducer;\nimport org.apache.kafka.clients.producer.ProducerRecord;\n\n\npublic class Main {\n\n    public static void main(String[] args) {\n        \n        Properties properties = new Properties();\n        properties.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:29092&quot;);\n        properties.setProperty(&quot;default.topic&quot;, &quot;hello-world-topic&quot;);\n        properties.setProperty(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n        properties.setProperty(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n        \n        KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(properties);\n        \n        String topicName = &quot;hello-world-topic&quot;;\n        String key = &quot;testkey&quot;;\n        String message = &quot;Hello Kafka! (Message String)&quot;;\n        \n        ProducerRecord&lt;String, String&gt; producerRecord = new ProducerRecord&lt;&gt;(topicName, key, message);\n        producer.send(producerRecord);\n        producer.close();\n    }\n\n}\n</code></pre>\n<p>And the <code>pom.xml</code>...</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.myname.kafkaexample&lt;/groupId&gt;\n  &lt;artifactId&gt;KafkaExample&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;KafkaExample&lt;/name&gt;\n  &lt;!-- FIXME change it to the project's website --&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n      &lt;version&gt;2.20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n      &lt;version&gt;2.20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n      &lt;version&gt;2.20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.lmax&lt;/groupId&gt;\n      &lt;artifactId&gt;disruptor&lt;/artifactId&gt;\n      &lt;version&gt;3.3.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.kafka/kafka --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n      &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n      &lt;version&gt;3.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        \n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n          &lt;configuration&gt;\n            &lt;archive&gt;\n              &lt;manifest&gt;\n                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                &lt;mainClass&gt;com.myname.kafkaexample.KafkaExample.Main&lt;/mainClass&gt;\n              &lt;/manifest&gt;\n            &lt;/archive&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n      \n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.5.0&lt;/version&gt;\n          &lt;executions&gt;\n            &lt;execution&gt;\n              &lt;phase&gt;package&lt;/phase&gt;\n              &lt;goals&gt;\n                &lt;goal&gt;single&lt;/goal&gt;\n              &lt;/goals&gt;\n            &lt;/execution&gt;\n          &lt;/executions&gt;\n        &lt;/plugin&gt;\n        \n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n\n    &lt;plugins&gt;\n\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.5.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n          &lt;/descriptorRefs&gt;\n          &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;mainClass&gt;com.myname.kafkaexample.KafkaExample.Main&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n          &lt;/archive&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":1,"creation_date":1681590364,"post_id":76024506,"comment_id":134082141,"body_markdown":"Many Java annotations, including Transactional, require a proxy to be setup on the method. This requires that the method is called from another class.","body":"Many Java annotations, including Transactional, require a proxy to be setup on the method. This requires that the method is called from another class."}],"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1681590647,"answer_count":0,"score":1,"last_activity_date":1681589932,"creation_date":1681589108,"question_id":76024506,"body_markdown":"based on this article https://thorben-janssen.com/spring-data-jpa-save-saveandflush-and-saveall/ I understand that calling a save for a managed entity is waste or resources and not actually required, and I tried this in my local and it works as expected. e.g:\r\n```java\r\n\r\n@Override\r\n@Transactional\r\npublic UserEntity update(User user){\r\nUserEntity e = userRepo.findById(user.getId());\r\ne.setName(&quot;test&quot;);\r\nreturn e;\r\n}\r\n```\r\n\r\nwithout calling the `save` method the update query is called.\r\n\r\nbut when I call it from an inner method ,i.e\r\n\r\n```java\r\n\r\n@Override\r\npublic UserEntity update(User user){\r\nreturn performUpdate(user);\r\n}\r\n\r\n@Transactional\r\npublic UserEntity performUpdate(User user){\r\nUserEntity e = userRepo.findById(user.getId());\r\ne.setName(&quot;test&quot;);\r\nreturn e;\r\n}\r\n```\r\n\r\nNow for some reason the update query is not being called at all, can someone explain me why this is happening and how can I fix this?","title":"JPA managed entity not saving as expected","body":"<p>based on this article <a href=\"https://thorben-janssen.com/spring-data-jpa-save-saveandflush-and-saveall/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/spring-data-jpa-save-saveandflush-and-saveall/</a> I understand that calling a save for a managed entity is waste or resources and not actually required, and I tried this in my local and it works as expected. e.g:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Override\n@Transactional\npublic UserEntity update(User user){\nUserEntity e = userRepo.findById(user.getId());\ne.setName(&quot;test&quot;);\nreturn e;\n}\n</code></pre>\n<p>without calling the <code>save</code> method the update query is called.</p>\n<p>but when I call it from an inner method ,i.e</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Override\npublic UserEntity update(User user){\nreturn performUpdate(user);\n}\n\n@Transactional\npublic UserEntity performUpdate(User user){\nUserEntity e = userRepo.findById(user.getId());\ne.setName(&quot;test&quot;);\nreturn e;\n}\n</code></pre>\n<p>Now for some reason the update query is not being called at all, can someone explain me why this is happening and how can I fix this?</p>\n"},{"tags":["java","raspberry-pi","libgdx","pi4j"],"comments":[{"owner":{"account_id":62234,"reputation":19819,"user_id":185034,"accept_rate":100,"display_name":"Paul"},"score":2,"creation_date":1681590363,"post_id":76024497,"comment_id":134082140,"body_markdown":"Performance should be the least concerning aspect of a game with root privileges.","body":"Performance should be the least concerning aspect of a game with root privileges."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1681601356,"post_id":76024497,"comment_id":134083224,"body_markdown":"A library that insists on using a hack like that probably isn’t a good library.","body":"A library that insists on using a hack like that probably isn’t a good library."}],"answers":[{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681589878,"creation_date":1681589878,"answer_id":76024558,"question_id":76024497,"body_markdown":"Based purely on the message and some trivial googling - it means   \r\n\r\n1. a programmer wants to call getCallerClass  \r\n\r\n2. it has been determined that it&#39;s not possible- since that call was removed in Java 8 \r\n\r\n3. the program that wanted to use it is telling you, uselessly, that it may underperform\r\n\r\nSee also [this question](https://stackoverflow.com/questions/23808803/sun-reflect-reflection-getcallerclass-alternative).\r\n\r\n","title":"WARNING: &quot;sun.reflect.Reflection.getCallerClass is not supported. This will impact performance&quot;","body":"<p>Based purely on the message and some trivial googling - it means</p>\n<ol>\n<li><p>a programmer wants to call getCallerClass</p>\n</li>\n<li><p>it has been determined that it's not possible- since that call was removed in Java 8</p>\n</li>\n<li><p>the program that wanted to use it is telling you, uselessly, that it may underperform</p>\n</li>\n</ol>\n<p>See also <a href=\"https://stackoverflow.com/questions/23808803/sun-reflect-reflection-getcallerclass-alternative\">this question</a>.</p>\n"}],"owner":{"account_id":27664854,"reputation":153,"user_id":21116910,"display_name":"Alexander Gorodilov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9753,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1681589878,"creation_date":1681589001,"question_id":76024497,"body_markdown":"I receive this warning message in the output of my videogame. The game was tested on Raspberry Pi 3 with 32-bit Raspberry Pi OS and Raspberry Pi 4b with 64-bit Raspberry Pi OS.\r\nThe game uses Java 11 and root privileges. The game was created using LibGDX framework and Pi4j library. What is that and how can this message affect the performance?","title":"WARNING: &quot;sun.reflect.Reflection.getCallerClass is not supported. This will impact performance&quot;","body":"<p>I receive this warning message in the output of my videogame. The game was tested on Raspberry Pi 3 with 32-bit Raspberry Pi OS and Raspberry Pi 4b with 64-bit Raspberry Pi OS.\nThe game uses Java 11 and root privileges. The game was created using LibGDX framework and Pi4j library. What is that and how can this message affect the performance?</p>\n"},{"tags":["java","database","hibernate","criteria"],"answers":[{"tags":[],"owner":{"account_id":539671,"reputation":25438,"user_id":907590,"accept_rate":57,"display_name":"Parvin Gasimzade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681589564,"creation_date":1681589564,"answer_id":76024540,"question_id":76024464,"body_markdown":"You can also add `FetchType.LAZY` to the books object in the Author class to lazy load books.\r\n\r\n    @OneToMany(fetch = FetchType.LAZY)\r\n    private List&lt;Book&gt; books = new ArrayList&lt;&gt;();\r\n\r\n","title":"Hibernate join without loding the join entity by default","body":"<p>You can also add <code>FetchType.LAZY</code> to the books object in the Author class to lazy load books.</p>\n<pre><code>@OneToMany(fetch = FetchType.LAZY)\nprivate List&lt;Book&gt; books = new ArrayList&lt;&gt;();\n</code></pre>\n"}],"owner":{"account_id":21205930,"reputation":11,"user_id":15595541,"display_name":"AppDeveloper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681589564,"creation_date":1681588585,"question_id":76024464,"body_markdown":"I want to use a join without loding the join entity by default.\r\n\r\n```\r\n@Entity \r\npublic class Author { \r\n  @Id \r\n  private Long id; \r\n  private String name; \r\n  private String genre; \r\n  private int age; \r\n   \r\n  @OneToMany \r\n  private List&lt;Book&gt; books = new ArrayList&lt;&gt;(); \r\n  ...\r\n}\r\n\r\n\r\n@Entity \r\npublic class Book { \r\n  @Id private Long id; \r\n  private String title; \r\n  private String isbn; \r\n\r\n  @ManyToOne(fetch = FetchType.LAZY) \r\n  @JoinColumn(name = &quot;author_id&quot;) \r\n  private Author author; \r\n  ... \r\n}\r\n```\r\n\r\nIf I load the authors with criteria api via\r\n```\r\ncriteriaQuery.select(rootAuthor)\r\n```\r\n\r\nall books to all authors were loaded.\r\n\r\nHow can I prevent loading the joined entities by default and only load them when addressing the entity?","title":"Hibernate join without loding the join entity by default","body":"<p>I want to use a join without loding the join entity by default.</p>\n<pre><code>@Entity \npublic class Author { \n  @Id \n  private Long id; \n  private String name; \n  private String genre; \n  private int age; \n   \n  @OneToMany \n  private List&lt;Book&gt; books = new ArrayList&lt;&gt;(); \n  ...\n}\n\n\n@Entity \npublic class Book { \n  @Id private Long id; \n  private String title; \n  private String isbn; \n\n  @ManyToOne(fetch = FetchType.LAZY) \n  @JoinColumn(name = &quot;author_id&quot;) \n  private Author author; \n  ... \n}\n</code></pre>\n<p>If I load the authors with criteria api via</p>\n<pre><code>criteriaQuery.select(rootAuthor)\n</code></pre>\n<p>all books to all authors were loaded.</p>\n<p>How can I prevent loading the joined entities by default and only load them when addressing the entity?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":9500256,"reputation":983,"user_id":7061661,"display_name":"P&#233;ter Veres"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548298977,"creation_date":1548298977,"answer_id":54338806,"question_id":54338297,"body_markdown":"I was facing a similar problem recently and I came up with these three possible solutions:\r\n\r\n 1. Designate a &quot;housekeeper&quot; role that can be assumed by at most one instance whose responsibility would be complete the scheduled job. But for this the housekeeper would have to send a heartbeat to the others (through the load balancer..) and if it stops then the remaining instances must elect a new one so it seems to be an interesting but way more complex approach that I might play with later.\r\n 2. Have a single-instance external service that would run scheduled tasks and will generate the weekly csv for you\r\n 3. Have a single-instance external service that only has the capacity to make scheduled api calls and that would call your original service through the load balancer. I prefer this solution as all the resources to complete the task are already present at the original service and it preserves the functionality. It is also flexible as the scheduler service can be replaced by more light weight cron job with a curl call or merged to another service in the future..etc.","title":"How can I execute a command line task for a Spring Boot application like a Rake task?","body":"<p>I was facing a similar problem recently and I came up with these three possible solutions:</p>\n\n<ol>\n<li>Designate a \"housekeeper\" role that can be assumed by at most one instance whose responsibility would be complete the scheduled job. But for this the housekeeper would have to send a heartbeat to the others (through the load balancer..) and if it stops then the remaining instances must elect a new one so it seems to be an interesting but way more complex approach that I might play with later.</li>\n<li>Have a single-instance external service that would run scheduled tasks and will generate the weekly csv for you</li>\n<li>Have a single-instance external service that only has the capacity to make scheduled api calls and that would call your original service through the load balancer. I prefer this solution as all the resources to complete the task are already present at the original service and it preserves the functionality. It is also flexible as the scheduler service can be replaced by more light weight cron job with a curl call or merged to another service in the future..etc.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":49931,"reputation":25463,"user_id":148844,"accept_rate":67,"display_name":"Chloe"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1548300354,"creation_date":1548300354,"answer_id":54338959,"question_id":54338297,"body_markdown":"I hacked a solution. Suggestions welcome.\r\n\r\n    package com.example.tasks;\r\n\r\n    @Component\r\n    public class WeeklyReport implements CommandLineRunner {\r\n    \r\n    \t@Override\r\n    \tpublic void run(String... args) throws Exception {\r\n    \t\tArrays.asList(args).stream().forEach(a -&gt; System.out.println(a));\r\n    \t\tif (!(args.length &gt; 0 &amp;&amp; args[0].equals(&quot;-task report:weekly&quot;))) return;\r\n    \t\tSystem.out.println(&quot;weekly report&quot;);\r\n    \t\tSystem.exit(0);\r\n    \t}\r\n\r\nAnd running it from a &#39;cron&#39; job with\r\n\r\n    $ mvn spring-boot:run -Drun.arguments=&quot;-task report:weekly&quot;\r\n\r\n\r\nhttps://docs.spring.io/spring-boot/docs/1.5.19.RELEASE/reference/htmlsingle/#boot-features-command-line-runner\r\n\r\nhttps://www.baeldung.com/spring-boot-command-line-arguments\r\n\r\nhttps://therealdanvega.com/blog/2017/04/07/spring-boot-command-line-runner\r\n","title":"How can I execute a command line task for a Spring Boot application like a Rake task?","body":"<p>I hacked a solution. Suggestions welcome.</p>\n\n<pre><code>package com.example.tasks;\n\n@Component\npublic class WeeklyReport implements CommandLineRunner {\n\n    @Override\n    public void run(String... args) throws Exception {\n        Arrays.asList(args).stream().forEach(a -&gt; System.out.println(a));\n        if (!(args.length &gt; 0 &amp;&amp; args[0].equals(\"-task report:weekly\"))) return;\n        System.out.println(\"weekly report\");\n        System.exit(0);\n    }\n</code></pre>\n\n<p>And running it from a 'cron' job with</p>\n\n<pre><code>$ mvn spring-boot:run -Drun.arguments=\"-task report:weekly\"\n</code></pre>\n\n<p><a href=\"https://docs.spring.io/spring-boot/docs/1.5.19.RELEASE/reference/htmlsingle/#boot-features-command-line-runner\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/1.5.19.RELEASE/reference/htmlsingle/#boot-features-command-line-runner</a></p>\n\n<p><a href=\"https://www.baeldung.com/spring-boot-command-line-arguments\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-command-line-arguments</a></p>\n\n<p><a href=\"https://therealdanvega.com/blog/2017/04/07/spring-boot-command-line-runner\" rel=\"nofollow noreferrer\">https://therealdanvega.com/blog/2017/04/07/spring-boot-command-line-runner</a></p>\n"},{"tags":[],"owner":{"account_id":229551,"reputation":1600,"user_id":492575,"accept_rate":75,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681589362,"creation_date":1681579965,"answer_id":76023742,"question_id":54338297,"body_markdown":"One way to accomplish this goal is to consider each task as a separate application. That allows you to run them in the same JAR but have different configuration:\r\n\r\n * `Application.java`: This is the default web application\r\n * `FooApplication.java` This is the &quot;Foo&quot; task application\r\n\r\nThe directory structure looks something like the following:\r\n\r\n```\r\nsrc/\r\n  main/java/com/example/\r\n    Application.java\r\n    FooApplication.java\r\n  resources/\r\n    application.yml\r\n    foo-application.yml\r\n```\r\n\r\nFor a task you want to ensure the web application type is set to `none` so that an embedded web server isn&#39;t started:\r\n\r\n**foo-application.yml**\r\n```\r\nspring:\r\n  main:\r\n    web-application-type: none\r\n```\r\n\r\nTo define the application:\r\n\r\n**FooApplication.java**\r\n```\r\npackage com.example\r\n\r\nimport com.example.runner.BootstrapContentfulRunner;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\n@ComponentScan(excludeFilters={@ComponentScan.Filter(type=FilterType.ASSIGNABLE_TYPE, value=Application.class)})\r\npublic class FooApplication {\r\n    public static void main(String[] args) {\r\n        System.exit(SpringApplication.exit(\r\n            SpringApplication.run(FooRunner.class, args)\r\n        ));\r\n    }\r\n\r\n    @EventListener(ApplicationReadyEvent.class)\r\n    public void foo() {\r\n        // Do your task here\r\n        System.out.println(&quot;Foo task complete!&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThen, in order to run the task application:\r\n\r\n```\r\nmvn spring-boot:run \\\r\n  -Dspring-boot.run.main-class=&#39;com.example.FooApplication&#39; \\\r\n  -Dspring-boot.run.jvmArguments=&#39;-Dspring.config.name=foo-application&#39;\r\n```","title":"How can I execute a command line task for a Spring Boot application like a Rake task?","body":"<p>One way to accomplish this goal is to consider each task as a separate application. That allows you to run them in the same JAR but have different configuration:</p>\n<ul>\n<li><code>Application.java</code>: This is the default web application</li>\n<li><code>FooApplication.java</code> This is the &quot;Foo&quot; task application</li>\n</ul>\n<p>The directory structure looks something like the following:</p>\n<pre><code>src/\n  main/java/com/example/\n    Application.java\n    FooApplication.java\n  resources/\n    application.yml\n    foo-application.yml\n</code></pre>\n<p>For a task you want to ensure the web application type is set to <code>none</code> so that an embedded web server isn't started:</p>\n<p><strong>foo-application.yml</strong></p>\n<pre><code>spring:\n  main:\n    web-application-type: none\n</code></pre>\n<p>To define the application:</p>\n<p><strong>FooApplication.java</strong></p>\n<pre><code>package com.example\n\nimport com.example.runner.BootstrapContentfulRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\n@ComponentScan(excludeFilters={@ComponentScan.Filter(type=FilterType.ASSIGNABLE_TYPE, value=Application.class)})\npublic class FooApplication {\n    public static void main(String[] args) {\n        System.exit(SpringApplication.exit(\n            SpringApplication.run(FooRunner.class, args)\n        ));\n    }\n\n    @EventListener(ApplicationReadyEvent.class)\n    public void foo() {\n        // Do your task here\n        System.out.println(&quot;Foo task complete!&quot;);\n    }\n\n}\n</code></pre>\n<p>Then, in order to run the task application:</p>\n<pre><code>mvn spring-boot:run \\\n  -Dspring-boot.run.main-class='com.example.FooApplication' \\\n  -Dspring-boot.run.jvmArguments='-Dspring.config.name=foo-application'\n</code></pre>\n"}],"owner":{"account_id":49931,"reputation":25463,"user_id":148844,"accept_rate":67,"display_name":"Chloe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2871,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":54338959,"answer_count":3,"score":5,"last_activity_date":1681589362,"creation_date":1548294673,"question_id":54338297,"body_markdown":"How can I run a task from the command line for long-running jobs like reports from Jenkins in Spring Boot? I&#39;m looking for something similar to Ruby on Rails Rake tasks. Rake tasks execute the code from the command line in the same application context as the web server so that you can re-use code. \r\n\r\n* I found [Spring Batch](https://spring.io/projects/spring-batch#overview) but it sounded more like [Resque](https://github.com/resque/resque). \r\n* I found [command line runners](https://therealdanvega.com/blog/2017/04/07/spring-boot-command-line-runner) but it said that they all run before the web server starts, so I can&#39;t *not* run it or only run one task. \r\n* I found [scheduled tasks](https://spring.io/guides/gs/scheduling-tasks/) which sounds *perfect*, but my app is load balanced with many instances so I would not want it running multiple times at once!\r\n\r\nI have a report where the query takes more than 30s to run, and generates a CSV file I would like to mail. I want it to run automatically each week with cron or Jenkins. ","title":"How can I execute a command line task for a Spring Boot application like a Rake task?","body":"<p>How can I run a task from the command line for long-running jobs like reports from Jenkins in Spring Boot? I'm looking for something similar to Ruby on Rails Rake tasks. Rake tasks execute the code from the command line in the same application context as the web server so that you can re-use code. </p>\n\n<ul>\n<li>I found <a href=\"https://spring.io/projects/spring-batch#overview\" rel=\"noreferrer\">Spring Batch</a> but it sounded more like <a href=\"https://github.com/resque/resque\" rel=\"noreferrer\">Resque</a>. </li>\n<li>I found <a href=\"https://therealdanvega.com/blog/2017/04/07/spring-boot-command-line-runner\" rel=\"noreferrer\">command line runners</a> but it said that they all run before the web server starts, so I can't <em>not</em> run it or only run one task. </li>\n<li>I found <a href=\"https://spring.io/guides/gs/scheduling-tasks/\" rel=\"noreferrer\">scheduled tasks</a> which sounds <em>perfect</em>, but my app is load balanced with many instances so I would not want it running multiple times at once!</li>\n</ul>\n\n<p>I have a report where the query takes more than 30s to run, and generates a CSV file I would like to mail. I want it to run automatically each week with cron or Jenkins. </p>\n"},{"tags":["java","spring","spring-boot","spring-cloud","netflix-eureka"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1612913283,"post_id":66128036,"comment_id":116914117,"body_markdown":"can you show the versions?","body":"can you show the versions?"},{"owner":{"account_id":2205877,"reputation":601,"user_id":1949114,"accept_rate":75,"display_name":"Diego Nieto"},"score":0,"creation_date":1612913854,"post_id":66128036,"comment_id":116914270,"body_markdown":"All apps were created using Spring Boot Version 2.4.2","body":"All apps were created using Spring Boot Version 2.4.2"},{"owner":{"account_id":1206734,"reputation":3867,"user_id":1176178,"accept_rate":100,"display_name":"Zack"},"score":0,"creation_date":1612914650,"post_id":66128036,"comment_id":116914414,"body_markdown":"I don&#39;t believe bootstrap.properties can use ${...} references since those come from the application.properties and the bootstrap is loaded before the app.properties. What happens when you set eureka.instance.instance-id=client?","body":"I don&#39;t believe bootstrap.properties can use ${...} references since those come from the application.properties and the bootstrap is loaded before the app.properties. What happens when you set eureka.instance.instance-id=client?"},{"owner":{"account_id":2205877,"reputation":601,"user_id":1949114,"accept_rate":75,"display_name":"Diego Nieto"},"score":0,"creation_date":1612915141,"post_id":66128036,"comment_id":116914550,"body_markdown":"@Zack Already tried that, with the same result.","body":"@Zack Already tried that, with the same result."},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":6,"creation_date":1613003286,"post_id":66128036,"comment_id":116945581,"body_markdown":"By default (without knowing your dependencies) bootstrap is no longer read in spring cloud 2020.0. Either move the configuration to application.properties or add spring cloud starter bootstrap","body":"By default (without knowing your dependencies) bootstrap is no longer read in spring cloud 2020.0. Either move the configuration to application.properties or add spring cloud starter bootstrap"},{"owner":{"account_id":2605706,"reputation":1336,"user_id":2256913,"accept_rate":29,"display_name":"Mrinal Bhattacharjee"},"score":0,"creation_date":1649810247,"post_id":66128036,"comment_id":126968585,"body_markdown":"This should be the answer","body":"This should be the answer"}],"answers":[{"tags":[],"owner":{"account_id":925468,"reputation":361,"user_id":956341,"display_name":"Raki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668839195,"creation_date":1668835202,"answer_id":74497744,"question_id":66128036,"body_markdown":"I am using Spring cloud version\r\n\r\n    &lt;spring-cloud.version&gt;2021.0.5&lt;/spring-cloud.version&gt;\r\nand spring boot version \r\n\r\n    &lt;version&gt;2.7.5&lt;/version&gt;\r\n\r\nIn application.properties, add the following lines to resolve the error:\r\n\r\n    eureka.client.register-with-eureka=false\r\n    eureka.client.fetch-registry=false\r\n\r\nBy default, the Eureka Server registers itself into the discovery. The following 2 lines will tell eureka server that there is only one eureka server present in this context. \r\n\r\nin the absence of these, our Eureka Server will try to find and register itself on other Eureka Servers in the context and throw a discovery client exception. i.e our own system.\r\n\r\n&gt; If you encounter the below errors after adding the above properties only you need to add the below properties.\r\n\r\nWe must add this to the `properties`, if configuration is not required. \r\n\r\n    spring.cloud.config.enabled=false\r\n\r\n Otherwise application will throw below exception.\r\n\r\n    No spring.config.import property has been defined\r\n \r\n   (or) If you have a other server, such as any configuration server we can add this optional server configuration to  `application.properties`, \r\n\r\n    spring.config.import=optional:configserver: Your server url\r\n\r\n&gt;  Spring Cloud Config provides server and client-side support for\r\n&gt; externalized configuration in a distributed system","title":"Spring Boot Application shown as UNKNOWN in Eureka server","body":"<p>I am using Spring cloud version</p>\n<pre><code>&lt;spring-cloud.version&gt;2021.0.5&lt;/spring-cloud.version&gt;\n</code></pre>\n<p>and spring boot version</p>\n<pre><code>&lt;version&gt;2.7.5&lt;/version&gt;\n</code></pre>\n<p>In application.properties, add the following lines to resolve the error:</p>\n<pre><code>eureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\n</code></pre>\n<p>By default, the Eureka Server registers itself into the discovery. The following 2 lines will tell eureka server that there is only one eureka server present in this context.</p>\n<p>in the absence of these, our Eureka Server will try to find and register itself on other Eureka Servers in the context and throw a discovery client exception. i.e our own system.</p>\n<blockquote>\n<p>If you encounter the below errors after adding the above properties only you need to add the below properties.</p>\n</blockquote>\n<p>We must add this to the <code>properties</code>, if configuration is not required.</p>\n<pre><code>spring.cloud.config.enabled=false\n</code></pre>\n<p>Otherwise application will throw below exception.</p>\n<pre><code>No spring.config.import property has been defined\n</code></pre>\n<p>(or) If you have a other server, such as any configuration server we can add this optional server configuration to  <code>application.properties</code>,</p>\n<pre><code>spring.config.import=optional:configserver: Your server url\n</code></pre>\n<blockquote>\n<p>Spring Cloud Config provides server and client-side support for\nexternalized configuration in a distributed system</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":24487855,"reputation":1,"user_id":18405296,"display_name":"Soe Thandar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681588451,"creation_date":1681588451,"answer_id":76024453,"question_id":66128036,"body_markdown":"Here&#39;s the solution. Move spring.application.name=config-client-app in application.properties, not in bootstrap.properties.\r\nI had the same issue.","title":"Spring Boot Application shown as UNKNOWN in Eureka server","body":"<p>Here's the solution. Move spring.application.name=config-client-app in application.properties, not in bootstrap.properties.\nI had the same issue.</p>\n"}],"owner":{"account_id":2205877,"reputation":601,"user_id":1949114,"accept_rate":75,"display_name":"Diego Nieto"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2368,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681588451,"creation_date":1612908973,"question_id":66128036,"body_markdown":"I&#39;m running an application with Spring (as Discovery Client app), also have a Discovery Server with Eureka, and Spring Cloud Config Server. When the client app is started it&#39;s registered as &quot;UNKNOWN&quot; in Eureka, despite its status is set to&quot;UP&quot;, isn&#39;t able to get the properties from the configuration server. \r\n\r\n**Client App, Eureka server,and Config Server Spring Boot Version: 2.4.2**\r\n\r\n**Client bootstrap.properties:**\r\n\r\n    spring.application.name=config-client-app\r\n    spring.cloud.config.discovery.enabled=true\r\n    eureka.client.service-url.defaultZone=http://localhost:8761/eureka\r\n    eureka.instance.instance-id=${spring.application.name}\r\n\r\n**Client application.properties file:**\r\n\r\n    logging.level.=debug\r\n    server.port=8900\r\n    eureka.client.healthcheck.enabled=true\r\n\r\n**Client Application Class:**\r\n\r\n    @SpringBootApplication\r\n    @EnableDiscoveryClient\r\n    @RestController\r\n    public class ConfigClientAppApplication {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(ConfigClientAppApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n**Eureka Serverproperties file:**\r\n\r\n    spring.application.name=discovery-server\r\n    server.port=8761\r\n    eureka.client.register-with-eureka=false\r\n    eureka.client.fetch-registry=false\r\n\r\n**Eureka Application class:**\r\n\r\n    @EnableEurekaServer\r\n    @SpringBootApplication\r\n    public class DiscoveryServerApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(DiscoveryServerApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n**The log info:**\r\n \r\n\r\n    restartedMain] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4\r\n    2021-02-09 16:02:50.388  INFO 2845 --- [  restartedMain] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1612904570388 with initial instances count: 1\r\n    2021-02-09 16:02:50.390  INFO 2845 --- [  restartedMain] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application UNKNOWN with eureka with status UP\r\n    2021-02-09 16:02:50.391  INFO 2845 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1612904570391, current=UP, previous=STARTING]\r\n    2021-02-09 16:02:50.391  INFO 2845 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_UNKNOWN/192.168.10.22:8900: registering service...\r\n    2021-02-09 16:02:50.391  WARN 2845 --- [  restartedMain] c.n.discovery.InstanceInfoReplicator     : Ignoring onDemand update due to rate limiter\r\n    2021-02-09 16:02:50.393  INFO 2845 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8900 (http) with context path &#39;&#39;\r\n    2021-02-09 16:02:50.394  INFO 2845 --- [  restartedMain] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 8900\r\n    2021-02-09 16:02:50.413  INFO 2845 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_UNKNOWN/192.168.10.22:8900 - registration status: 204","title":"Spring Boot Application shown as UNKNOWN in Eureka server","body":"<p>I'm running an application with Spring (as Discovery Client app), also have a Discovery Server with Eureka, and Spring Cloud Config Server. When the client app is started it's registered as &quot;UNKNOWN&quot; in Eureka, despite its status is set to&quot;UP&quot;, isn't able to get the properties from the configuration server.</p>\n<p><strong>Client App, Eureka server,and Config Server Spring Boot Version: 2.4.2</strong></p>\n<p><strong>Client bootstrap.properties:</strong></p>\n<pre><code>spring.application.name=config-client-app\nspring.cloud.config.discovery.enabled=true\neureka.client.service-url.defaultZone=http://localhost:8761/eureka\neureka.instance.instance-id=${spring.application.name}\n</code></pre>\n<p><strong>Client application.properties file:</strong></p>\n<pre><code>logging.level.=debug\nserver.port=8900\neureka.client.healthcheck.enabled=true\n</code></pre>\n<p><strong>Client Application Class:</strong></p>\n<pre><code>@SpringBootApplication\n@EnableDiscoveryClient\n@RestController\npublic class ConfigClientAppApplication {\n    \n    public static void main(String[] args) {\n        SpringApplication.run(ConfigClientAppApplication.class, args);\n    }\n}\n</code></pre>\n<p><strong>Eureka Serverproperties file:</strong></p>\n<pre><code>spring.application.name=discovery-server\nserver.port=8761\neureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\n</code></pre>\n<p><strong>Eureka Application class:</strong></p>\n<pre><code>@EnableEurekaServer\n@SpringBootApplication\npublic class DiscoveryServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DiscoveryServerApplication.class, args);\n    }\n}\n</code></pre>\n<p><strong>The log info:</strong></p>\n<pre><code>restartedMain] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4\n2021-02-09 16:02:50.388  INFO 2845 --- [  restartedMain] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1612904570388 with initial instances count: 1\n2021-02-09 16:02:50.390  INFO 2845 --- [  restartedMain] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application UNKNOWN with eureka with status UP\n2021-02-09 16:02:50.391  INFO 2845 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1612904570391, current=UP, previous=STARTING]\n2021-02-09 16:02:50.391  INFO 2845 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_UNKNOWN/192.168.10.22:8900: registering service...\n2021-02-09 16:02:50.391  WARN 2845 --- [  restartedMain] c.n.discovery.InstanceInfoReplicator     : Ignoring onDemand update due to rate limiter\n2021-02-09 16:02:50.393  INFO 2845 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8900 (http) with context path ''\n2021-02-09 16:02:50.394  INFO 2845 --- [  restartedMain] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 8900\n2021-02-09 16:02:50.413  INFO 2845 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_UNKNOWN/192.168.10.22:8900 - registration status: 204\n</code></pre>\n"},{"tags":["java","spring","web"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1681572559,"post_id":76023075,"comment_id":134079787,"body_markdown":"A 404 shows that the process is running on the port but little more. Looks like you are using Thymeleaf. Please add pom.xml and application.properties. Also, add a method that returns a ResponseEntity&lt;String&gt; and see if that 404s.","body":"A 404 shows that the process is running on the port but little more. Looks like you are using Thymeleaf. Please add pom.xml and application.properties. Also, add a method that returns a ResponseEntity&lt;String&gt; and see if that 404s."},{"owner":{"account_id":28196061,"reputation":1,"user_id":21650812,"display_name":"Carlos Daniel Portela"},"score":0,"creation_date":1681580151,"post_id":76023075,"comment_id":134080815,"body_markdown":"done! The pom.xml and the photo of the new terminal are there. The web browse displayed &quot;Page not found&quot;. I did not download the thymeleaf dependencys","body":"done! The pom.xml and the photo of the new terminal are there. The web browse displayed &quot;Page not found&quot;. I did not download the thymeleaf dependencys"}],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681586956,"creation_date":1681586956,"answer_id":76024354,"question_id":76023075,"body_markdown":"There are a number of issues - the fact that a controller method that returns a ResponsEntity gave a 404 indicates that basic functions are failing.\r\n\r\nChange the spring boot starter parent to 3.0.4.\r\n\r\nAdd the following dependency to get Thymeleaf to work.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAdd the main @SpringbootApplication class to the question.","title":"Problem on Spring... Error 404, unmapped HTML page. How to proceed?","body":"<p>There are a number of issues - the fact that a controller method that returns a ResponsEntity gave a 404 indicates that basic functions are failing.</p>\n<p>Change the spring boot starter parent to 3.0.4.</p>\n<p>Add the following dependency to get Thymeleaf to work.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Add the main @SpringbootApplication class to the question.</p>\n"}],"owner":{"account_id":28196061,"reputation":1,"user_id":21650812,"display_name":"Carlos Daniel Portela"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681586956,"creation_date":1681570997,"question_id":76023075,"body_markdown":"The HTML page does not load (error 404), even though the server is working and starting normally. I&#39;ve tried with RequestMapping(&quot;/&quot;) as well. Here is the code, the project structure image and the terminal image after spring initialization\r\n\r\nproject structure: [structure](https://i.stack.imgur.com/PN0sP.png)\r\n\r\nindexController.java:\r\n```\r\npackage com.anotherversion.maven.controller;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\n@Controller\r\npublic class indexController {\r\n    \r\n    @GetMapping(&quot;/&quot;)\r\n    public String index(){\r\n        return &quot;index&quot;;\r\n    }\r\n}\r\n```\r\n\r\nindex.html:\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;\r\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\r\n    &lt;title&gt;Index page&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;h1&gt;Ol&#225; mundo com spring boot&lt;/h1&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\npom.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.0-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.anotherversion&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;maven&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\t&lt;pluginRepositories&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t&lt;/pluginRepositories&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nterminal: [enter image description here](https://i.stack.imgur.com/Kng0c.png)\r\n\r\nnew terminal photo: [enter image description here][1]\r\n\r\nI tried showing a simple html page with spring boot. I believe the page was not properly mapped\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Egtoi.png","title":"Problem on Spring... Error 404, unmapped HTML page. How to proceed?","body":"<p>The HTML page does not load (error 404), even though the server is working and starting normally. I've tried with RequestMapping(&quot;/&quot;) as well. Here is the code, the project structure image and the terminal image after spring initialization</p>\n<p>project structure: <a href=\"https://i.stack.imgur.com/PN0sP.png\" rel=\"nofollow noreferrer\">structure</a></p>\n<p>indexController.java:</p>\n<pre><code>package com.anotherversion.maven.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\n\n@Controller\npublic class indexController {\n    \n    @GetMapping(&quot;/&quot;)\n    public String index(){\n        return &quot;index&quot;;\n    }\n}\n</code></pre>\n<p>index.html:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    &lt;title&gt;Index page&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Olá mundo com spring boot&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0-SNAPSHOT&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.anotherversion&lt;/groupId&gt;\n    &lt;artifactId&gt;maven&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;maven&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/releases&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/releases&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>terminal: <a href=\"https://i.stack.imgur.com/Kng0c.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>new terminal photo: <a href=\"https://i.stack.imgur.com/Egtoi.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I tried showing a simple html page with spring boot. I believe the page was not properly mapped</p>\n"},{"tags":["java","android","lottie"],"comments":[{"owner":{"account_id":12857539,"reputation":191,"user_id":9300428,"display_name":"Amitoj"},"score":0,"creation_date":1642943970,"post_id":69138774,"comment_id":125202971,"body_markdown":"Were you able to find a way around?","body":"Were you able to find a way around?"}],"answers":[{"tags":[],"owner":{"account_id":16967123,"reputation":3285,"user_id":12272687,"display_name":"Mori"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681586788,"creation_date":1681586788,"answer_id":76024343,"question_id":69138774,"body_markdown":"    **java.lang.IllegalStateException: Unable to parse composition**\r\n\r\nDue to these codes, try to **Replace** it\r\n\r\n    app:lottie_rawRes=&quot;@raw/confetti&quot;\r\n\r\n**with** \r\n\r\n    app:lottie_fileName=&quot;confetti.json&quot;\r\n\r\nLottie looks by default in the `src/main/assets` folder.\r\n\r\n\r\n","title":"Lottie error java.lang.IllegalStateException: Unable to parse composition","body":"<pre><code>**java.lang.IllegalStateException: Unable to parse composition**\n</code></pre>\n<p>Due to these codes, try to <strong>Replace</strong> it</p>\n<pre><code>app:lottie_rawRes=&quot;@raw/confetti&quot;\n</code></pre>\n<p><strong>with</strong></p>\n<pre><code>app:lottie_fileName=&quot;confetti.json&quot;\n</code></pre>\n<p>Lottie looks by default in the <code>src/main/assets</code> folder.</p>\n"}],"owner":{"account_id":13881658,"reputation":29,"user_id":10021884,"display_name":"anne"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2333,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1681586788,"creation_date":1631315179,"question_id":69138774,"body_markdown":"Trying to integrate Lottie animation file into my Android Studio project.I have done and rechecked all the integration steps.\r\n\r\n1. in build.gradle I added the latest version:\r\n\r\n       implementation &quot;com.airbnb.android:lottie:4.1.0&quot;\r\n\r\n2. brought the exported JSON file (from lottiefiles.com) into the res/raw folder. (I also tried the /asset folder but it still does not work)\r\n\r\n3. in one of my layout files I refer to it with:  \r\n\r\n       &lt;com.airbnb.lottie.LottieAnimationView\r\n          android:id=&quot;@+id/animationView&quot;\r\n          android:layout_width=&quot;300dp&quot;\r\n          android:layout_height=&quot;300dp&quot;\r\n          app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n          app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n          app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n          app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n          app:lottie_rawRes=&quot;@raw/confetti&quot;\r\n          app:lottie_autoPlay=&quot;true&quot;\r\n          app:lottie_loop=&quot;true&quot;\r\n       /&gt;\r\n\r\nWeirdly, the Design Interface shows the error: \r\n\r\n&gt; Unexpected resource type: raw.&lt;br&gt;\r\n&gt; Expected: string. \r\n\r\nThis error is not shown in the XML Interface code, but only in the Design Interface. \r\n\r\nThe image showing the layout error when using Lottie file:\r\n![The image showing the layout error when using Lottie file][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4CHFM.jpg\r\n\r\nConsequently, when running the project the app crashes and I get this error:\r\n \r\n```\r\n--------- beginning of crash\r\n `2021-09-11 01:17:13.538 13479-13479/com.intelligentemo.dialogoengkor E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.intelligentemo.dialogoengkor, PID: 13479\r\n    **java.lang.IllegalStateException: Unable to parse composition**\r\n        at com.airbnb.lottie.LottieAnimationView$1.onResult(LottieAnimationView.java:79)\r\n        at com.airbnb.lottie.LottieAnimationView$1.onResult(LottieAnimationView.java:72)\r\n        at com.airbnb.lottie.LottieAnimationView$3.onResult(LottieAnimationView.java:96)\r\n        at com.airbnb.lottie.LottieAnimationView$3.onResult(LottieAnimationView.java:89)\r\n        at com.airbnb.lottie.LottieTask.notifyFailureListeners(LottieTask.java:162)\r\n        at com.airbnb.lottie.LottieTask.access$200(LottieTask.java:28)\r\n        at com.airbnb.lottie.LottieTask$1.run(LottieTask.java:137)\r\n        at android.os.Handler.handleCallback(Handler.java:888)\r\n        at android.os.Handler.dispatchMessage(Handler.java:100)\r\n        at android.os.Looper.loop(Looper.java:213)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8178)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:513)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1101)\r\n     **Caused by: java.lang.StringIndexOutOfBoundsException: length=0; index=0**\r\n        at java.lang.String.charAt(Native Method)\r\n        at android.graphics.Color.parseColor(Color.java:1384)\r\n        at com.airbnb.lottie.parser.LayerParser.parse(LayerParser.java:136)\r\n        at com.airbnb.lottie.parser.LottieCompositionMoshiParser.parseLayers(LottieCompositionMoshiParser.java:120)\r\n        at com.airbnb.lottie.parser.LottieCompositionMoshiParser.parse(LottieCompositionMoshiParser.java:86)\r\n        at com.airbnb.lottie.LottieCompositionFactory.fromJsonReaderSyncInternal(LottieCompositionFactory.java:390)\r\n        at com.airbnb.lottie.LottieCompositionFactory.fromJsonReaderSync(LottieCompositionFactory.java:383)\r\n        at com.airbnb.lottie.LottieCompositionFactory.fromJsonInputStreamSync(LottieCompositionFactory.java:313)\r\n        at com.airbnb.lottie.LottieCompositionFactory.fromJsonInputStreamSync(LottieCompositionFactory.java:306)\r\n        at com.airbnb.lottie.LottieCompositionFactory.fromRawResSync(LottieCompositionFactory.java:269)\r\n        at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:234)\r\n        at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:229)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n        at java.lang.Thread.run(Thread.java:929)\r\n```\r\n\r\nHave checked so many resources and tutorials, but no one seem to have had this issue yet...","title":"Lottie error java.lang.IllegalStateException: Unable to parse composition","body":"<p>Trying to integrate Lottie animation file into my Android Studio project.I have done and rechecked all the integration steps.</p>\n<ol>\n<li><p>in build.gradle I added the latest version:</p>\n<pre><code>implementation &quot;com.airbnb.android:lottie:4.1.0&quot;\n</code></pre>\n</li>\n<li><p>brought the exported JSON file (from lottiefiles.com) into the res/raw folder. (I also tried the /asset folder but it still does not work)</p>\n</li>\n<li><p>in one of my layout files I refer to it with:</p>\n<pre><code>&lt;com.airbnb.lottie.LottieAnimationView\n   android:id=&quot;@+id/animationView&quot;\n   android:layout_width=&quot;300dp&quot;\n   android:layout_height=&quot;300dp&quot;\n   app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n   app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n   app:layout_constraintStart_toStartOf=&quot;parent&quot;\n   app:layout_constraintTop_toTopOf=&quot;parent&quot;\n   app:lottie_rawRes=&quot;@raw/confetti&quot;\n   app:lottie_autoPlay=&quot;true&quot;\n   app:lottie_loop=&quot;true&quot;\n/&gt;\n</code></pre>\n</li>\n</ol>\n<p>Weirdly, the Design Interface shows the error:</p>\n<blockquote>\n<p>Unexpected resource type: raw.<br>\nExpected: string.</p>\n</blockquote>\n<p>This error is not shown in the XML Interface code, but only in the Design Interface.</p>\n<p>The image showing the layout error when using Lottie file:\n<img src=\"https://i.stack.imgur.com/4CHFM.jpg\" alt=\"The image showing the layout error when using Lottie file\" /></p>\n<p>Consequently, when running the project the app crashes and I get this error:</p>\n<pre><code>--------- beginning of crash\n `2021-09-11 01:17:13.538 13479-13479/com.intelligentemo.dialogoengkor E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.intelligentemo.dialogoengkor, PID: 13479\n    **java.lang.IllegalStateException: Unable to parse composition**\n        at com.airbnb.lottie.LottieAnimationView$1.onResult(LottieAnimationView.java:79)\n        at com.airbnb.lottie.LottieAnimationView$1.onResult(LottieAnimationView.java:72)\n        at com.airbnb.lottie.LottieAnimationView$3.onResult(LottieAnimationView.java:96)\n        at com.airbnb.lottie.LottieAnimationView$3.onResult(LottieAnimationView.java:89)\n        at com.airbnb.lottie.LottieTask.notifyFailureListeners(LottieTask.java:162)\n        at com.airbnb.lottie.LottieTask.access$200(LottieTask.java:28)\n        at com.airbnb.lottie.LottieTask$1.run(LottieTask.java:137)\n        at android.os.Handler.handleCallback(Handler.java:888)\n        at android.os.Handler.dispatchMessage(Handler.java:100)\n        at android.os.Looper.loop(Looper.java:213)\n        at android.app.ActivityThread.main(ActivityThread.java:8178)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:513)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1101)\n     **Caused by: java.lang.StringIndexOutOfBoundsException: length=0; index=0**\n        at java.lang.String.charAt(Native Method)\n        at android.graphics.Color.parseColor(Color.java:1384)\n        at com.airbnb.lottie.parser.LayerParser.parse(LayerParser.java:136)\n        at com.airbnb.lottie.parser.LottieCompositionMoshiParser.parseLayers(LottieCompositionMoshiParser.java:120)\n        at com.airbnb.lottie.parser.LottieCompositionMoshiParser.parse(LottieCompositionMoshiParser.java:86)\n        at com.airbnb.lottie.LottieCompositionFactory.fromJsonReaderSyncInternal(LottieCompositionFactory.java:390)\n        at com.airbnb.lottie.LottieCompositionFactory.fromJsonReaderSync(LottieCompositionFactory.java:383)\n        at com.airbnb.lottie.LottieCompositionFactory.fromJsonInputStreamSync(LottieCompositionFactory.java:313)\n        at com.airbnb.lottie.LottieCompositionFactory.fromJsonInputStreamSync(LottieCompositionFactory.java:306)\n        at com.airbnb.lottie.LottieCompositionFactory.fromRawResSync(LottieCompositionFactory.java:269)\n        at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:234)\n        at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:229)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n        at java.lang.Thread.run(Thread.java:929)\n</code></pre>\n<p>Have checked so many resources and tutorials, but no one seem to have had this issue yet...</p>\n"},{"tags":["java","android","lottie"],"answers":[{"tags":[],"owner":{"account_id":12534693,"reputation":56,"user_id":9121690,"display_name":"Evgeny Valavin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608310923,"creation_date":1608310923,"answer_id":65361005,"question_id":65360311,"body_markdown":"Check what the heart_beat.json file&#39;s encoding is.\r\nIs it &quot;UTF-8 with BOM&quot;?\r\n\r\nMy project targets Xamarin.Android. There&#39;s an active issue since Lottie moved to AndroidX libraries. The app crashes when json file is UTF-8 with BOM encoded.","title":"Lottie error: &quot;java.lang.IllegalStateException: Unable to parse composition&quot;","body":"<p>Check what the heart_beat.json file's encoding is.\nIs it &quot;UTF-8 with BOM&quot;?</p>\n<p>My project targets Xamarin.Android. There's an active issue since Lottie moved to AndroidX libraries. The app crashes when json file is UTF-8 with BOM encoded.</p>\n"},{"tags":[],"owner":{"account_id":6939742,"reputation":133,"user_id":5326524,"display_name":"Tonton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1608399498,"creation_date":1608399498,"answer_id":65372661,"question_id":65360311,"body_markdown":"Got it. In build.gradle(Module:app) I excluded &#39;okio&#39; and &#39;okhttp&#39; modules for some reason. That leaded to the exception. \r\n\r\n    configurations {\r\n        all*.exclude module: &#39;okhttp&#39;\r\n        all*.exclude module: &#39;okio&#39;\r\n    }","title":"Lottie error: &quot;java.lang.IllegalStateException: Unable to parse composition&quot;","body":"<p>Got it. In build.gradle(Module:app) I excluded 'okio' and 'okhttp' modules for some reason. That leaded to the exception.</p>\n<pre><code>configurations {\n    all*.exclude module: 'okhttp'\n    all*.exclude module: 'okio'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11694388,"reputation":372,"user_id":8561486,"display_name":"ilham suaib"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1624522505,"creation_date":1624522505,"answer_id":68111995,"question_id":65360311,"body_markdown":"If you want to just avoid crash, you can set the lottie failure listener instead of default one before set the animation.\r\n\r\n    lottieView.setFailureListener { t -&gt;\r\n        //do on error\r\n    }\r\n    lottieView.setAnimation(...)","title":"Lottie error: &quot;java.lang.IllegalStateException: Unable to parse composition&quot;","body":"<p>If you want to just avoid crash, you can set the lottie failure listener instead of default one before set the animation.</p>\n<pre><code>lottieView.setFailureListener { t -&gt;\n    //do on error\n}\nlottieView.setAnimation(...)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2106041,"reputation":2316,"user_id":1872349,"display_name":"Raphael C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635960529,"creation_date":1635960529,"answer_id":69829246,"question_id":65360311,"body_markdown":"in my case this happened when the lottie json file was simply corrupted. worked fine with any other lottie files.","title":"Lottie error: &quot;java.lang.IllegalStateException: Unable to parse composition&quot;","body":"<p>in my case this happened when the lottie json file was simply corrupted. worked fine with any other lottie files.</p>\n"},{"tags":[],"owner":{"account_id":16967123,"reputation":3285,"user_id":12272687,"display_name":"Mori"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681586510,"creation_date":1681586510,"answer_id":76024320,"question_id":65360311,"body_markdown":"Look just **Replace** to fix it\r\n\r\n    app:lottie_rawRes=&quot;@raw/heart_beat&quot;\r\n\r\n**with** \r\n\r\n    app:lottie_fileName=&quot;heart_beat.json&quot;\r\n\r\nLottie looks by default in the `src/main/assets` folder.\r\n\r\nBut due to that **Error** , maybe your code problem is about this \r\n\r\n    class &quot;okio.Okio&quot; \r\n\r\n","title":"Lottie error: &quot;java.lang.IllegalStateException: Unable to parse composition&quot;","body":"<p>Look just <strong>Replace</strong> to fix it</p>\n<pre><code>app:lottie_rawRes=&quot;@raw/heart_beat&quot;\n</code></pre>\n<p><strong>with</strong></p>\n<pre><code>app:lottie_fileName=&quot;heart_beat.json&quot;\n</code></pre>\n<p>Lottie looks by default in the <code>src/main/assets</code> folder.</p>\n<p>But due to that <strong>Error</strong> , maybe your code problem is about this</p>\n<pre><code>class &quot;okio.Okio&quot; \n</code></pre>\n"}],"owner":{"account_id":6939742,"reputation":133,"user_id":5326524,"display_name":"Tonton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9167,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":65372661,"answer_count":5,"score":3,"last_activity_date":1681586510,"creation_date":1608307875,"question_id":65360311,"body_markdown":"I am trying to add LottieAnimationView to my xml layout in my project but getting this exception: &quot;java.lang.IllegalStateException: Unable to parse composition&quot;.\r\n\r\n    java.lang.IllegalStateException: Unable to parse composition\r\n        at com.airbnb.lottie.LottieAnimationView$1.onResult(LottieAnimationView.java:78)\r\n        at com.airbnb.lottie.LottieAnimationView$1.onResult(LottieAnimationView.java:71)\r\n        at com.airbnb.lottie.LottieAnimationView$3.onResult(LottieAnimationView.java:95)\r\n        at com.airbnb.lottie.LottieAnimationView$3.onResult(LottieAnimationView.java:88)\r\n        at com.airbnb.lottie.LottieTask.notifyFailureListeners(LottieTask.java:158)\r\n        at com.airbnb.lottie.LottieTask.access$200(LottieTask.java:27)\r\n        at com.airbnb.lottie.LottieTask$1.run(LottieTask.java:133)\r\n        at android.os.Handler.handleCallback(Handler.java:883)\r\n        at android.os.Handler.dispatchMessage(Handler.java:100)\r\n        at android.os.Looper.loop(Looper.java:237)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7860)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1075)\r\n     Caused by: java.util.concurrent.ExecutionException: java.lang.NoClassDefFoundError: Failed resolution of: Lokio/Okio;\r\n        at java.util.concurrent.FutureTask.report(FutureTask.java:123)\r\n        at java.util.concurrent.FutureTask.get(FutureTask.java:193)\r\n        at com.airbnb.lottie.LottieTask$LottieFutureTask.done(LottieTask.java:175)\r\n        at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:383)\r\n        at java.util.concurrent.FutureTask.setException(FutureTask.java:252)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:271)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n        at java.lang.Thread.run(Thread.java:919)\r\n     Caused by: java.lang.NoClassDefFoundError: Failed resolution of: Lokio/Okio;\r\n        at com.airbnb.lottie.LottieCompositionFactory.fromRawResSync(LottieCompositionFactory.java:265)\r\n        at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:234)\r\n        at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:229)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)&#160;\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)&#160;\r\n        at java.lang.Thread.run(Thread.java:919)&#160;\r\n     Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;okio.Okio&quot; on path: DexPathList[[zip file &quot;/data/app/com.create.loop-D3ZAa0jgAPGefDD0MoGI3A==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.create.loop-D3ZAa0jgAPGefDD0MoGI3A==/lib/arm, /system/lib, /vendor/lib, /system/product/lib]]\r\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:196)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n        at com.airbnb.lottie.LottieCompositionFactory.fromRawResSync(LottieCompositionFactory.java:265)&#160;\r\n        at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:234)&#160;\r\n        at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:229)&#160;\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)&#160;\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)&#160;\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)&#160;\r\n        at java.lang.Thread.run(Thread.java:919)&#160;\r\n\r\nPart of XML layout: \r\n\r\n        &lt;com.airbnb.lottie.LottieAnimationView\r\n        android:id=&quot;@+id/animationView&quot;\r\n        android:layout_width=&quot;50dp&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:lottie_autoPlay=&quot;true&quot;\r\n        app:lottie_loop=&quot;true&quot;\r\n        app:lottie_rawRes=&quot;@raw/heart_beat&quot; /&gt;\r\n\r\nWhat is interesting is that when I created a new test project and paste the above code to the newly created activity_main.xml everything works perfectly in the new project. \r\n\r\nI tried to replase `app:lottie_rawRes=&quot;@raw/heart_beat&quot;` with `app:lottie_fileName=&quot;heart_beat.json&quot;` (from assets folder) but still no result.\r\nHow can I resolve this issue? Thank you.","title":"Lottie error: &quot;java.lang.IllegalStateException: Unable to parse composition&quot;","body":"<p>I am trying to add LottieAnimationView to my xml layout in my project but getting this exception: &quot;java.lang.IllegalStateException: Unable to parse composition&quot;.</p>\n<pre><code>java.lang.IllegalStateException: Unable to parse composition\n    at com.airbnb.lottie.LottieAnimationView$1.onResult(LottieAnimationView.java:78)\n    at com.airbnb.lottie.LottieAnimationView$1.onResult(LottieAnimationView.java:71)\n    at com.airbnb.lottie.LottieAnimationView$3.onResult(LottieAnimationView.java:95)\n    at com.airbnb.lottie.LottieAnimationView$3.onResult(LottieAnimationView.java:88)\n    at com.airbnb.lottie.LottieTask.notifyFailureListeners(LottieTask.java:158)\n    at com.airbnb.lottie.LottieTask.access$200(LottieTask.java:27)\n    at com.airbnb.lottie.LottieTask$1.run(LottieTask.java:133)\n    at android.os.Handler.handleCallback(Handler.java:883)\n    at android.os.Handler.dispatchMessage(Handler.java:100)\n    at android.os.Looper.loop(Looper.java:237)\n    at android.app.ActivityThread.main(ActivityThread.java:7860)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1075)\n Caused by: java.util.concurrent.ExecutionException: java.lang.NoClassDefFoundError: Failed resolution of: Lokio/Okio;\n    at java.util.concurrent.FutureTask.report(FutureTask.java:123)\n    at java.util.concurrent.FutureTask.get(FutureTask.java:193)\n    at com.airbnb.lottie.LottieTask$LottieFutureTask.done(LottieTask.java:175)\n    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:383)\n    at java.util.concurrent.FutureTask.setException(FutureTask.java:252)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:271)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n    at java.lang.Thread.run(Thread.java:919)\n Caused by: java.lang.NoClassDefFoundError: Failed resolution of: Lokio/Okio;\n    at com.airbnb.lottie.LottieCompositionFactory.fromRawResSync(LottieCompositionFactory.java:265)\n    at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:234)\n    at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:229)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167) \n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641) \n    at java.lang.Thread.run(Thread.java:919) \n Caused by: java.lang.ClassNotFoundException: Didn't find class &quot;okio.Okio&quot; on path: DexPathList[[zip file &quot;/data/app/com.create.loop-D3ZAa0jgAPGefDD0MoGI3A==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.create.loop-D3ZAa0jgAPGefDD0MoGI3A==/lib/arm, /system/lib, /vendor/lib, /system/product/lib]]\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:196)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n    at com.airbnb.lottie.LottieCompositionFactory.fromRawResSync(LottieCompositionFactory.java:265) \n    at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:234) \n    at com.airbnb.lottie.LottieCompositionFactory$3.call(LottieCompositionFactory.java:229) \n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) \n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167) \n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641) \n    at java.lang.Thread.run(Thread.java:919) \n</code></pre>\n<p>Part of XML layout:</p>\n<pre><code>    &lt;com.airbnb.lottie.LottieAnimationView\n    android:id=&quot;@+id/animationView&quot;\n    android:layout_width=&quot;50dp&quot;\n    android:layout_height=&quot;50dp&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    app:lottie_autoPlay=&quot;true&quot;\n    app:lottie_loop=&quot;true&quot;\n    app:lottie_rawRes=&quot;@raw/heart_beat&quot; /&gt;\n</code></pre>\n<p>What is interesting is that when I created a new test project and paste the above code to the newly created activity_main.xml everything works perfectly in the new project.</p>\n<p>I tried to replase <code>app:lottie_rawRes=&quot;@raw/heart_beat&quot;</code> with <code>app:lottie_fileName=&quot;heart_beat.json&quot;</code> (from assets folder) but still no result.\nHow can I resolve this issue? Thank you.</p>\n"},{"tags":["java","math"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1681585462,"post_id":76024220,"comment_id":134081505,"body_markdown":"Well, what&#39;s (74 * 0.556) - 32? That looks like 9.144 to me... so I&#39;m unsurprised by the result. You should look more carefully at the conversion formula you&#39;re meant to be implementing... (Hint: subtracting 32 *after* the multiplication is very different from subtracting 32 *before* the multiplication...)","body":"Well, what&#39;s (74 * 0.556) - 32? That looks like 9.144 to me... so I&#39;m unsurprised by the result. You should look more carefully at the conversion formula you&#39;re meant to be implementing... (Hint: subtracting 32 <i>after</i> the multiplication is very different from subtracting 32 <i>before</i> the multiplication...)"},{"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"score":0,"creation_date":1681585471,"post_id":76024220,"comment_id":134081509,"body_markdown":"This is not a Java or a programming problem ─ if you calculate `(74 * 0.556) - 32.00` then you will see that 9.144 is the correct result. If you want 23.3 to be the result then you need to do a different calculation.","body":"This is not a Java or a programming problem ─ if you calculate <code>(74 * 0.556) - 32.00</code> then you will see that 9.144 is the correct result. If you want 23.3 to be the result then you need to do a different calculation."},{"owner":{"account_id":21268452,"reputation":397,"user_id":15648344,"display_name":"Cosemuckel"},"score":1,"creation_date":1681585515,"post_id":76024220,"comment_id":134081520,"body_markdown":"The correct formula should be `tempC = (tempF - 32) * 5/9;`","body":"The correct formula should be <code>tempC = (tempF - 32) * 5&#47;9;</code>"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1681586396,"post_id":76024220,"comment_id":134081634,"body_markdown":"You input nextInt. You might consider nextDouble. Also consider `System.out.printf(&quot;%0.2f&#176;C%n&quot;, tempC);`","body":"You input nextInt. You might consider nextDouble. Also consider <code>System.out.printf(&quot;%0.2f&#176;C%n&quot;, tempC);</code>"},{"owner":{"account_id":28300417,"reputation":9,"user_id":21639182,"display_name":"dietCokeIsTheDevil"},"score":0,"creation_date":1681587898,"post_id":76024220,"comment_id":134081820,"body_markdown":"That is correct, stepping away from the computer for a bit I can&#39;t believe i didn&#39;t realize this","body":"That is correct, stepping away from the computer for a bit I can&#39;t believe i didn&#39;t realize this"}],"answers":[{"tags":[],"owner":{"account_id":539671,"reputation":25438,"user_id":907590,"accept_rate":57,"display_name":"Parvin Gasimzade"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681585417,"creation_date":1681585417,"answer_id":76024231,"question_id":76024220,"body_markdown":"The formula to convert Fahrenheit to Celcius is not correct in your code. \r\n\r\nYou are using below formula:\r\n\r\n    tempC = ((tempF * 0.556) - 32.00);\r\n\r\nBut it should be:\r\n\r\n    tempC = (tempF - 32.0) * 5.0 / 9.0;\r\n\r\nUpdating the formula should fix the issue. \r\n\r\n\r\n","title":"Simple math not returning expected value in java?","body":"<p>The formula to convert Fahrenheit to Celcius is not correct in your code.</p>\n<p>You are using below formula:</p>\n<pre><code>tempC = ((tempF * 0.556) - 32.00);\n</code></pre>\n<p>But it should be:</p>\n<pre><code>tempC = (tempF - 32.0) * 5.0 / 9.0;\n</code></pre>\n<p>Updating the formula should fix the issue.</p>\n"}],"owner":{"account_id":28300417,"reputation":9,"user_id":21639182,"display_name":"dietCokeIsTheDevil"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1681585461,"creation_date":1681585218,"question_id":76024220,"body_markdown":"I&#39;m just making a temperature converter as one of the first small projects I&#39;m writing myself. I&#39;m unsure what I&#39;m doing that&#39;s leading to this error but when I run my program, 74 degrees F gets converted to 9.144 degrees celcius, which my formula shouldn&#39;t be returning. Anybody got any ideas what I&#39;ve done here that&#39;s giving me this issue?\r\n\r\nHere&#39;s my code:\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class TempConverter {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n    \r\n        Scanner input = new Scanner(System.in);\r\n        System.out.print(&quot;What&#39;s the tempurature outside?&quot;);\r\n    \r\n    \r\n        double tempF = input.nextInt();\r\n    \r\n            if (tempF &lt; 45.00) {\r\n    \r\n                System.out.println(tempF + &quot; degrees? Oh it&#39;s a little chilly out there&quot;);\r\n            } else {\r\n    \r\n                System.out.println(&quot;Unless it&#39;s raining, sounds like a beautiful day!&quot;);\r\n            }\r\n    \r\n        System.out.println(&quot;We use a bit of an outdated measurement system over here stubborn as we are. Let&#39;s convert that to a measurement you&#39;re more familiar with&quot;);\r\n    \r\n         double tempC;\r\n         \r\n         tempC = ((tempF * 0.556) - 32.00);\r\n    \r\n         System.out.println(tempF + &quot; degrees fahrenheit here in the States should feel like &quot; + tempC + &quot; Celsius back home. Give or take some humidity depending on where that is exactly :)&quot;);\r\n         \r\n    \r\n       \r\n        }\r\n    }\r\n\r\nI&#39;ve tried messing with the formula a few times but keep getting the same result. It should be converting to about 23.3 degrees C, and I&#39;m very confused where the 9.144 keeps coming from","title":"Simple math not returning expected value in java?","body":"<p>I'm just making a temperature converter as one of the first small projects I'm writing myself. I'm unsure what I'm doing that's leading to this error but when I run my program, 74 degrees F gets converted to 9.144 degrees celcius, which my formula shouldn't be returning. Anybody got any ideas what I've done here that's giving me this issue?</p>\n<p>Here's my code:</p>\n<pre><code>import java.util.Scanner;\n\npublic class TempConverter {\n\n    public static void main(String[] args) {\n\n\n    Scanner input = new Scanner(System.in);\n    System.out.print(&quot;What's the tempurature outside?&quot;);\n\n\n    double tempF = input.nextInt();\n\n        if (tempF &lt; 45.00) {\n\n            System.out.println(tempF + &quot; degrees? Oh it's a little chilly out there&quot;);\n        } else {\n\n            System.out.println(&quot;Unless it's raining, sounds like a beautiful day!&quot;);\n        }\n\n    System.out.println(&quot;We use a bit of an outdated measurement system over here stubborn as we are. Let's convert that to a measurement you're more familiar with&quot;);\n\n     double tempC;\n     \n     tempC = ((tempF * 0.556) - 32.00);\n\n     System.out.println(tempF + &quot; degrees fahrenheit here in the States should feel like &quot; + tempC + &quot; Celsius back home. Give or take some humidity depending on where that is exactly :)&quot;);\n     \n\n   \n    }\n}\n</code></pre>\n<p>I've tried messing with the formula a few times but keep getting the same result. It should be converting to about 23.3 degrees C, and I'm very confused where the 9.144 keeps coming from</p>\n"},{"tags":["java","spring-boot","gradle"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1681583631,"post_id":76023485,"comment_id":134081263,"body_markdown":"The classloader will generally load the resource  fine with the classpath url path of `&quot;/config.properties&quot;`","body":"The classloader will generally load the resource  fine with the classpath url path of <code>&quot;&#47;config.properties&quot;</code>"},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1681585773,"post_id":76023485,"comment_id":134081563,"body_markdown":"Assuming you&#39;re running from a jar, there IS NO project directory. You can use `/` as the root of the `src/main/resources`, which is where people usually put stuff that end up at the root of the jar.","body":"Assuming you&#39;re running from a jar, there IS NO project directory. You can use <code>&#47;</code> as the root of the <code>src&#47;main&#47;resources</code>, which is where people usually put stuff that end up at the root of the jar."}],"owner":{"account_id":219074,"reputation":2048,"user_id":475747,"accept_rate":78,"display_name":"ViV"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":448,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681585203,"creation_date":1681576522,"question_id":76023485,"body_markdown":"I have a spring boot project that has a custom file at the project root level. I need to set a configuration to point to the root directory, without which the app won&#39;t start.\r\nThis is required by an external dependency that I need to use.\r\n\r\nI can easily do this in build.gradle at the bootrun task as follows\r\n\r\n    bootRun {\r\n    \tjvmArgs = [\r\n    \t\t\t&quot;-Dapp.config=${projectDir}&quot;\r\n    \t]\r\n    }\r\n\r\nBut how can I set app.config to point to the project root in application.properties file.\r\n\r\nBy setting it in bootrun, I can successfully start the application but I cannot run controller tests as this value is required at start up. ","title":"Set project root directory path in .properties file","body":"<p>I have a spring boot project that has a custom file at the project root level. I need to set a configuration to point to the root directory, without which the app won't start.\nThis is required by an external dependency that I need to use.</p>\n<p>I can easily do this in build.gradle at the bootrun task as follows</p>\n<pre><code>bootRun {\n    jvmArgs = [\n            &quot;-Dapp.config=${projectDir}&quot;\n    ]\n}\n</code></pre>\n<p>But how can I set app.config to point to the project root in application.properties file.</p>\n<p>By setting it in bootrun, I can successfully start the application but I cannot run controller tests as this value is required at start up.</p>\n"},{"tags":["java","testing","mockito"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1681661035,"post_id":76023676,"comment_id":134088928,"body_markdown":"What is `capturedObjectRequest`?","body":"What is <code>capturedObjectRequest</code>?"}],"answers":[{"tags":[],"owner":{"account_id":539671,"reputation":25438,"user_id":907590,"accept_rate":57,"display_name":"Parvin Gasimzade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681584911,"creation_date":1681584911,"answer_id":76024187,"question_id":76023676,"body_markdown":"It means the argument passed to the `setRequestObject()` method when it was actually invoked during the test does not match the argument that was expected by the test. \r\n\r\nMemory address of the expected and actual objects are different (164a62bf and 11ebb1b6). The difference in memory addresses means that the expected and actual objects are not the same instance, even though they may have the same properties.","title":"How to check if a method is called with a specific object in mockito","body":"<p>It means the argument passed to the <code>setRequestObject()</code> method when it was actually invoked during the test does not match the argument that was expected by the test.</p>\n<p>Memory address of the expected and actual objects are different (164a62bf and 11ebb1b6). The difference in memory addresses means that the expected and actual objects are not the same instance, even though they may have the same properties.</p>\n"}],"owner":{"account_id":16206688,"reputation":607,"user_id":11701675,"display_name":"natyus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681584911,"creation_date":1681579122,"question_id":76023676,"body_markdown":"I have a test which looks like following:\r\n\r\n     @Test\r\n        public void testMessKonzepteValues() throws Exception {\r\n            String generateTest = generateTest( &quot;String&quot;, &quot;String&quot;, &quot;String&quot; );\r\n            verify(mockOnlineClient,times(1)).setRequestObject(capturedObjectRequest.capture());\r\n    \r\n        }\r\n\r\nThe generateTest method calls the setRequestObject method. I want to verivy with a argumentcaptor from mockito if the Object is called with a specific object but I am getting the following error:\r\n\r\n\r\n    Argument(s) are different! Wanted:\r\n    gMOnlineClient.setRequestObject(\r\n        OnlineServiceStub$ObjectRequest@164a62bf\r\n    );\r\n    -&gt; at integrations_test_architecture.OnlineMassInfostIntegrationsTest2.testKonzepteValues(OnlineMassInfostIntegrationsTest2.java:101)\r\n    Actual invocation has different arguments:\r\n    gMOnlineClient.setRequestObject(\r\n        OnlineServiceStub$ObjectRequest@11ebb1b6\r\n    );\r\n    -&gt; at punkt.sendObjectMethod(punkt.java:3063)\r\n\r\n\r\nWhat does this error say? I just said that it should catch the object after being called nothing more. Can someone explain it to me\r\n\r\n","title":"How to check if a method is called with a specific object in mockito","body":"<p>I have a test which looks like following:</p>\n<pre><code> @Test\n    public void testMessKonzepteValues() throws Exception {\n        String generateTest = generateTest( &quot;String&quot;, &quot;String&quot;, &quot;String&quot; );\n        verify(mockOnlineClient,times(1)).setRequestObject(capturedObjectRequest.capture());\n\n    }\n</code></pre>\n<p>The generateTest method calls the setRequestObject method. I want to verivy with a argumentcaptor from mockito if the Object is called with a specific object but I am getting the following error:</p>\n<pre><code>Argument(s) are different! Wanted:\ngMOnlineClient.setRequestObject(\n    OnlineServiceStub$ObjectRequest@164a62bf\n);\n-&gt; at integrations_test_architecture.OnlineMassInfostIntegrationsTest2.testKonzepteValues(OnlineMassInfostIntegrationsTest2.java:101)\nActual invocation has different arguments:\ngMOnlineClient.setRequestObject(\n    OnlineServiceStub$ObjectRequest@11ebb1b6\n);\n-&gt; at punkt.sendObjectMethod(punkt.java:3063)\n</code></pre>\n<p>What does this error say? I just said that it should catch the object after being called nothing more. Can someone explain it to me</p>\n"},{"tags":["java","arrays","loops","char","switch-statement"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1681583851,"post_id":76023948,"comment_id":134081293,"body_markdown":"`return` will return from the main method (exit). Replace `return;` by `continue;`. https://www.w3schools.com/java/java_break.asp","body":"<code>return</code> will return from the main method (exit). Replace <code>return;</code> by <code>continue;</code>. <a href=\"https://www.w3schools.com/java/java_break.asp\" rel=\"nofollow noreferrer\">w3schools.com/java/java_break.asp</a>"}],"answers":[{"tags":[],"owner":{"account_id":1249654,"reputation":159460,"user_id":1210329,"display_name":"geocodezip"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1681584699,"creation_date":1681584699,"answer_id":76024165,"question_id":76023948,"body_markdown":"One option would be to change your input processing to check for an empty string before doing `.char(0)`\r\n\r\n    displayMenu();\r\n                \r\n    // convert to char for user input\r\n\tuserInput = scnr.nextLine();\r\n\tif (userInput.isEmpty()) {\r\n\t\tinput = &#39;?&#39;; // initialize input\r\n\t\tSystem.out.println(&quot;Please make a valid selection&quot;);\r\n\t\tcontinue; // bad input, start loop again...\r\n\t}\r\n    input = userInput.charAt(0);\r\n    // process input character","title":"Is there a way to print error message when a user presses the &quot;enter&quot; key instead of throwing an exception or a primitive type error(char to str)?","body":"<p>One option would be to change your input processing to check for an empty string before doing <code>.char(0)</code></p>\n<pre><code>displayMenu();\n            \n// convert to char for user input\nuserInput = scnr.nextLine();\nif (userInput.isEmpty()) {\n    input = '?'; // initialize input\n    System.out.println(&quot;Please make a valid selection&quot;);\n    continue; // bad input, start loop again...\n}\ninput = userInput.charAt(0);\n// process input character\n</code></pre>\n"}],"owner":{"account_id":25706070,"reputation":33,"user_id":19465322,"display_name":"K_B"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76024165,"answer_count":1,"score":-1,"last_activity_date":1681584699,"creation_date":1681582246,"question_id":76023948,"body_markdown":"I am currently working on a project in my first Java class. I am writing a program for a mock company that allows for various user inputs depending on user need for animal registration. The info packet we&#39;re provided with has our &quot;Menu Options&quot; pre-coded as 1-6 and &#39;q&#39; for quit. This makes things difficult since my switch case statement then had to be **char** instead of something more pliable. When I try to input a validation statement that prints an error message for if a user presses &#39;enter&#39; insead of a valid menu option, it tells me it&#39;s incompatible with primative type char. I&#39;ve tried various ways of converting the char to string, string to char etc, and nothing is working.\r\n\r\nBelow is the code for my main method without validation that functions fairly well, except for if the user enters incorrect options:\r\n\r\n```\r\n    // initialize dog and monkey lists\r\n    public static void main(String[] args){\r\n            initializeDogList();\r\n            initializeMonkeyList();\r\n            char input;\r\n            String userInput;\r\n            \r\n            \r\n            // get user input selection\r\n            Scanner scnr = new Scanner(System.in);\r\n            \r\n            // switch case implemented to run through menu options\r\n            do {\r\n            \tdisplayMenu();\r\n            \t\r\n            \t// convert to char for user input\r\n            \tinput = scnr.nextLine().charAt(0);\r\n            \t\r\n            \tswitch(input) {\r\n                \tcase &#39;1&#39;:\r\n                \t\tintakeNewDog(scnr);\r\n                \t\tbreak;\r\n                \tcase &#39;2&#39;:\r\n                \t\tintakeNewMonkey(scnr);\r\n                \t\tbreak;\r\n                \tcase &#39;3&#39;:\r\n                \t\treserveAnimal(scnr);\r\n                \t\tbreak;\r\n                \tcase &#39;4&#39;:\r\n                \t\tprintAnimals(&#39;4&#39;);\r\n                \t\tbreak;\r\n                \tcase &#39;5&#39;:\r\n                \t\tprintAnimals(&#39;5&#39;);\r\n                \t\tbreak;\r\n                \tcase &#39;6&#39;:\r\n                \t\tprintAnimals(&#39;6&#39;);\r\n                \t\tbreak;\r\n                \tcase &#39;q&#39;:\r\n                \t\tSystem.out.println(&quot;Rescue Animal System is now closed&quot;);\r\n                \t\tbreak;\r\n                \tdefault:\r\n                \t\tSystem.out.println(&quot;Invalid entry&quot;);\r\n                \t\t\r\n            \t}\r\n            }       \r\n            while(input != &#39;q&#39;);\r\n```\r\n\r\n\r\n\r\nWhen I add the code below to account for when a user presses the &#39;enter&#39; key, it will print my error message, but won&#39;t do anything else. I tried placing it in multiple spots, but placing it below &#39;displaymenu()&#39; was the only way that got it to run at all, but not correctly. Is there a different way to approach this issue that my class just hasn&#39;t taught us yet?\r\n\r\n```\r\n\r\n            \t//check input for empty entry\r\n            \tuserInput = scnr.nextLine();\r\n            \twhile (userInput.trim().isEmpty()) {\r\n            \t\tinput = &#39;?&#39;;\r\n            \t\tSystem.out.println(&quot;Please make a valid selection&quot;);\r\n            \t\treturn;\t\r\n            \t}\r\n            \t\r\n```\r\n","title":"Is there a way to print error message when a user presses the &quot;enter&quot; key instead of throwing an exception or a primitive type error(char to str)?","body":"<p>I am currently working on a project in my first Java class. I am writing a program for a mock company that allows for various user inputs depending on user need for animal registration. The info packet we're provided with has our &quot;Menu Options&quot; pre-coded as 1-6 and 'q' for quit. This makes things difficult since my switch case statement then had to be <strong>char</strong> instead of something more pliable. When I try to input a validation statement that prints an error message for if a user presses 'enter' insead of a valid menu option, it tells me it's incompatible with primative type char. I've tried various ways of converting the char to string, string to char etc, and nothing is working.</p>\n<p>Below is the code for my main method without validation that functions fairly well, except for if the user enters incorrect options:</p>\n<pre><code>    // initialize dog and monkey lists\n    public static void main(String[] args){\n            initializeDogList();\n            initializeMonkeyList();\n            char input;\n            String userInput;\n            \n            \n            // get user input selection\n            Scanner scnr = new Scanner(System.in);\n            \n            // switch case implemented to run through menu options\n            do {\n                displayMenu();\n                \n                // convert to char for user input\n                input = scnr.nextLine().charAt(0);\n                \n                switch(input) {\n                    case '1':\n                        intakeNewDog(scnr);\n                        break;\n                    case '2':\n                        intakeNewMonkey(scnr);\n                        break;\n                    case '3':\n                        reserveAnimal(scnr);\n                        break;\n                    case '4':\n                        printAnimals('4');\n                        break;\n                    case '5':\n                        printAnimals('5');\n                        break;\n                    case '6':\n                        printAnimals('6');\n                        break;\n                    case 'q':\n                        System.out.println(&quot;Rescue Animal System is now closed&quot;);\n                        break;\n                    default:\n                        System.out.println(&quot;Invalid entry&quot;);\n                        \n                }\n            }       \n            while(input != 'q');\n</code></pre>\n<p>When I add the code below to account for when a user presses the 'enter' key, it will print my error message, but won't do anything else. I tried placing it in multiple spots, but placing it below 'displaymenu()' was the only way that got it to run at all, but not correctly. Is there a different way to approach this issue that my class just hasn't taught us yet?</p>\n<pre><code>\n                //check input for empty entry\n                userInput = scnr.nextLine();\n                while (userInput.trim().isEmpty()) {\n                    input = '?';\n                    System.out.println(&quot;Please make a valid selection&quot;);\n                    return; \n                }\n                \n</code></pre>\n"},{"tags":["java","camera","libgdx"],"owner":{"account_id":18341423,"reputation":63,"user_id":13357589,"display_name":"EpicOweo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681584586,"creation_date":1681584586,"question_id":76024148,"body_markdown":"In my game, I&#39;m dividing my map into &quot;sections&quot;, sort of like the way Celeste does it. However, when I move into a new section of my map, the camera is doing a weird &quot;double-lerp&quot;-looking thing. How can I fix this so that the camera just moves smoothly into the next sect of my map?\r\n\r\nSorry for the external link but its hard to explain so here&#39;s a video: https://youtu.be/rlNzvIwYfj4\r\n\r\nHere&#39;s my code for moving the camera:\r\n```\r\n\tprivate void moveCamera(boolean changingSect) {\r\n\t\t\r\n\t\tfloat playerCenterX = player.getRect().x + 0.5f * player.getRect().width;\r\n\t\tfloat playerCenterY = player.getRect().y + 0.5f * player.getRect().height;\r\n\t\t\r\n\t\tif(map.cameraAttachPlayer || map.mapSections.size == 0) { // just follow the player\r\n\t\t\tcamera.position.lerp(new Vector3(playerCenterX, playerCenterY, 0), 0.1f);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tRectangle mapSect = player.sectIn;\r\n\t\t\r\n\t\tVector2 sectCenter = new Vector2();\r\n\t\tmapSect.getCenter(sectCenter);\r\n\t\t\r\n\t\t//if sect is completely on screen, just look at the middle of the sect\r\n\t\tif(sectFitsScreen(mapSect)) {\r\n\t\t\tcamera.position.lerp(new Vector3(sectCenter.x, sectCenter.y, 0), 0.1f);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\telse if(sectFitsVertically(mapSect, true)) {\r\n\t\t\t//if left is visible, stop moving left and vice versa\r\n\t\t\t//right visible\r\n\t\t\tif(camera.position.x + camera.viewportWidth/2 &gt; mapSect.x+mapSect.width) {\r\n\t\t\t\tif(playerInHThird(false)) { // if in bottom third\r\n\t\t\t\t\tcamera.position.lerp(new Vector3(playerCenterX, sectCenter.y, 0), 0.1f);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcamera.position.lerp(new Vector3(mapSect.x+mapSect.width-camera.viewportWidth/2, sectCenter.y, 0), 0.1f);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//left visible\r\n\t\t\telse if(camera.position.x - camera.viewportWidth/2 &lt; mapSect.x) {\r\n\t\t\t\tif(playerInHThird(true)) { // if in top third\r\n\t\t\t\t\tcamera.position.lerp(new Vector3(playerCenterX, sectCenter.y, 0), 0.1f);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcamera.position.lerp(new Vector3(mapSect.x+camera.viewportWidth/2, sectCenter.y, 0), 0.1f);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//neither visible\r\n\t\t\telse {\r\n\t\t\t\tcamera.position.lerp(new Vector3(playerCenterX, sectCenter.y, 0), 0.1f);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else if(sectFitsHorizontally(mapSect, true)) {\r\n\t\t\t//if ceiling is visible, stop moving up and vice versa\r\n\t\t\t//ceiling visible\r\n\t\t\tif(camera.position.y + camera.viewportHeight/2 &gt; mapSect.y+mapSect.height) {\r\n\t\t\t\tif(playerInVThird(false)) { // if in bottom third\r\n\t\t\t\t\tcamera.position.lerp(new Vector3(sectCenter.x, playerCenterY, 0), 0.1f);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcamera.position.lerp(new Vector3(sectCenter.x, mapSect.y+mapSect.height-camera.viewportHeight/2, 0), 0.1f);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//floor visible\r\n\t\t\telse if(camera.position.y - camera.viewportHeight/2 &lt; mapSect.y) {\r\n\t\t\t\tif(playerInVThird(true)) { // if in top third\r\n\t\t\t\t\tcamera.position.lerp(new Vector3(sectCenter.x, playerCenterY, 0), 0.1f);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcamera.position.lerp(new Vector3(sectCenter.x, mapSect.y+camera.viewportHeight/2, 0), 0.1f);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//neither visible\r\n\t\t\telse {\r\n\t\t\t\tcamera.position.lerp(new Vector3(sectCenter.x, playerCenterY, 0), 0.1f);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else { //neither at all\r\n\t\t\t\r\n\t\t\tboolean ceilingVisible = camera.position.y + camera.viewportHeight/2 &gt; mapSect.y+mapSect.height;\r\n\t\t\tboolean floorVisible = camera.position.y - camera.viewportHeight/2 &lt; mapSect.y;\r\n\t\t\tboolean leftVisible = camera.position.x - camera.viewportWidth/2 &lt; mapSect.x;\r\n\t\t\tboolean rightVisible = camera.position.x + camera.viewportWidth/2 &gt; mapSect.x+mapSect.width;\r\n\t\t\t\r\n\t\t\tfloat lerpX = playerCenterX;\r\n\t\t\tfloat lerpY = playerCenterY;\r\n\t\t\t\r\n\t\t\t//none visible\r\n\t\t\tif(!ceilingVisible &amp;&amp; !floorVisible &amp;&amp; !leftVisible &amp;&amp; !rightVisible) {\r\n\t\t\t\tcamera.position.lerp(new Vector3(lerpX, lerpY, 0), 0.1f);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(ceilingVisible) {\r\n\t\t\t\tif(!playerInVThird(false)) { // if in bottom third\r\n\t\t\t\t\tlerpY = mapSect.y+mapSect.height-camera.viewportHeight/2;\r\n\t\t\t\t}\r\n\t\t\t} else if(floorVisible) {\r\n\t\t\t\tif(!playerInVThird(true)) { // if in top third\r\n\t\t\t\t\tlerpY = mapSect.y+camera.viewportHeight/2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(rightVisible) {\r\n\t\t\t\tif(!playerInHThird(false)) { // if in left third\r\n\t\t\t\t\tlerpX = mapSect.x+mapSect.width-camera.viewportWidth/2;\r\n\t\t\t\t}\r\n\t\t\t} else if(leftVisible) {\r\n\t\t\t\tif(!playerInHThird(true)) { // if in right third\r\n\t\t\t\t\tlerpX = mapSect.x+camera.viewportWidth/2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcamera.position.lerp(new Vector3(lerpX, lerpY, 0), 0.1f);\r\n\t\t}\r\n```","title":"My camera is &quot;double lerping&quot; when I enter a new section of my map in LibGDX","body":"<p>In my game, I'm dividing my map into &quot;sections&quot;, sort of like the way Celeste does it. However, when I move into a new section of my map, the camera is doing a weird &quot;double-lerp&quot;-looking thing. How can I fix this so that the camera just moves smoothly into the next sect of my map?</p>\n<p>Sorry for the external link but its hard to explain so here's a video: <a href=\"https://youtu.be/rlNzvIwYfj4\" rel=\"nofollow noreferrer\">https://youtu.be/rlNzvIwYfj4</a></p>\n<p>Here's my code for moving the camera:</p>\n<pre><code>    private void moveCamera(boolean changingSect) {\n        \n        float playerCenterX = player.getRect().x + 0.5f * player.getRect().width;\n        float playerCenterY = player.getRect().y + 0.5f * player.getRect().height;\n        \n        if(map.cameraAttachPlayer || map.mapSections.size == 0) { // just follow the player\n            camera.position.lerp(new Vector3(playerCenterX, playerCenterY, 0), 0.1f);\n            return;\n        }\n        \n        Rectangle mapSect = player.sectIn;\n        \n        Vector2 sectCenter = new Vector2();\n        mapSect.getCenter(sectCenter);\n        \n        //if sect is completely on screen, just look at the middle of the sect\n        if(sectFitsScreen(mapSect)) {\n            camera.position.lerp(new Vector3(sectCenter.x, sectCenter.y, 0), 0.1f);\n            return;\n        }\n        \n        else if(sectFitsVertically(mapSect, true)) {\n            //if left is visible, stop moving left and vice versa\n            //right visible\n            if(camera.position.x + camera.viewportWidth/2 &gt; mapSect.x+mapSect.width) {\n                if(playerInHThird(false)) { // if in bottom third\n                    camera.position.lerp(new Vector3(playerCenterX, sectCenter.y, 0), 0.1f);\n                } else {\n                    camera.position.lerp(new Vector3(mapSect.x+mapSect.width-camera.viewportWidth/2, sectCenter.y, 0), 0.1f);\n                }\n                return;\n            }\n            \n            //left visible\n            else if(camera.position.x - camera.viewportWidth/2 &lt; mapSect.x) {\n                if(playerInHThird(true)) { // if in top third\n                    camera.position.lerp(new Vector3(playerCenterX, sectCenter.y, 0), 0.1f);\n                } else {\n                    camera.position.lerp(new Vector3(mapSect.x+camera.viewportWidth/2, sectCenter.y, 0), 0.1f);\n                }\n                return;\n            }\n\n            //neither visible\n            else {\n                camera.position.lerp(new Vector3(playerCenterX, sectCenter.y, 0), 0.1f);\n                return;\n            }\n        } else if(sectFitsHorizontally(mapSect, true)) {\n            //if ceiling is visible, stop moving up and vice versa\n            //ceiling visible\n            if(camera.position.y + camera.viewportHeight/2 &gt; mapSect.y+mapSect.height) {\n                if(playerInVThird(false)) { // if in bottom third\n                    camera.position.lerp(new Vector3(sectCenter.x, playerCenterY, 0), 0.1f);\n                } else {\n                    camera.position.lerp(new Vector3(sectCenter.x, mapSect.y+mapSect.height-camera.viewportHeight/2, 0), 0.1f);\n                }\n                return;\n            }\n            \n            //floor visible\n            else if(camera.position.y - camera.viewportHeight/2 &lt; mapSect.y) {\n                if(playerInVThird(true)) { // if in top third\n                    camera.position.lerp(new Vector3(sectCenter.x, playerCenterY, 0), 0.1f);\n                } else {\n                    camera.position.lerp(new Vector3(sectCenter.x, mapSect.y+camera.viewportHeight/2, 0), 0.1f);\n                }\n                return;\n            }\n            \n            //neither visible\n            else {\n                camera.position.lerp(new Vector3(sectCenter.x, playerCenterY, 0), 0.1f);\n                return;\n            }\n            \n        } else { //neither at all\n            \n            boolean ceilingVisible = camera.position.y + camera.viewportHeight/2 &gt; mapSect.y+mapSect.height;\n            boolean floorVisible = camera.position.y - camera.viewportHeight/2 &lt; mapSect.y;\n            boolean leftVisible = camera.position.x - camera.viewportWidth/2 &lt; mapSect.x;\n            boolean rightVisible = camera.position.x + camera.viewportWidth/2 &gt; mapSect.x+mapSect.width;\n            \n            float lerpX = playerCenterX;\n            float lerpY = playerCenterY;\n            \n            //none visible\n            if(!ceilingVisible &amp;&amp; !floorVisible &amp;&amp; !leftVisible &amp;&amp; !rightVisible) {\n                camera.position.lerp(new Vector3(lerpX, lerpY, 0), 0.1f);\n                return;\n            }\n            \n            if(ceilingVisible) {\n                if(!playerInVThird(false)) { // if in bottom third\n                    lerpY = mapSect.y+mapSect.height-camera.viewportHeight/2;\n                }\n            } else if(floorVisible) {\n                if(!playerInVThird(true)) { // if in top third\n                    lerpY = mapSect.y+camera.viewportHeight/2;\n                }\n            }\n            \n            if(rightVisible) {\n                if(!playerInHThird(false)) { // if in left third\n                    lerpX = mapSect.x+mapSect.width-camera.viewportWidth/2;\n                }\n            } else if(leftVisible) {\n                if(!playerInHThird(true)) { // if in right third\n                    lerpX = mapSect.x+camera.viewportWidth/2;\n                }\n            }\n            \n            camera.position.lerp(new Vector3(lerpX, lerpY, 0), 0.1f);\n        }\n</code></pre>\n"},{"tags":["java","assertion"],"comments":[{"owner":{"account_id":28947,"reputation":90759,"user_id":77779,"accept_rate":89,"display_name":"Yishai"},"score":11,"creation_date":1272897227,"post_id":2758224,"comment_id":2790398,"body_markdown":"In real life you almost never see them. Conjecture: If you use assertions you have to think about three states: Assert passes, assert fails, assert is turned off, instead of just two. And assert is turned off by default so that is the most likely state, and it is hard to ensure that it is enabled for your code. What that adds up to is that asserts are a premature optimization that would be of limited use. As you see in @Bjorn&#39;s answer, it is even hard to come up with a use case where you would not want to fail an assert all the time.","body":"In real life you almost never see them. Conjecture: If you use assertions you have to think about three states: Assert passes, assert fails, assert is turned off, instead of just two. And assert is turned off by default so that is the most likely state, and it is hard to ensure that it is enabled for your code. What that adds up to is that asserts are a premature optimization that would be of limited use. As you see in @Bjorn&#39;s answer, it is even hard to come up with a use case where you would not want to fail an assert all the time."},{"owner":{"account_id":474651,"reputation":14676,"user_id":884463,"accept_rate":89,"display_name":"David Tonhofer"},"score":43,"creation_date":1390484471,"post_id":2758224,"comment_id":32117360,"body_markdown":"@Yishai:  _&quot;you have to think about ... assert is turned off&quot;_  If you need to do that, you are doing it wrong. _&quot;asserts are a premature optimization of limited use&quot;_ This is pretty much off the rails. Here is Sun&#39;s take on this: &quot;[Using Assertions in Java Technology](http://www.oracle.com/us/technologies/java/assertions-139853.html)&quot; and this is also good to read: &quot;[The benefits of programming with assertions (a.k.a. assert statements)](http://www.pgbovine.net/programming-with-asserts.htm)&quot;","body":"@Yishai:  <i>&quot;you have to think about ... assert is turned off&quot;</i>  If you need to do that, you are doing it wrong. <i>&quot;asserts are a premature optimization of limited use&quot;</i> This is pretty much off the rails. Here is Sun&#39;s take on this: &quot;<a href=\"http://www.oracle.com/us/technologies/java/assertions-139853.html\" rel=\"nofollow noreferrer\">Using Assertions in Java Technology</a>&quot; and this is also good to read: &quot;<a href=\"http://www.pgbovine.net/programming-with-asserts.htm\" rel=\"nofollow noreferrer\">The benefits of programming with assertions (a.k.a. assert statements)</a>&quot;"},{"owner":{"account_id":28947,"reputation":90759,"user_id":77779,"accept_rate":89,"display_name":"Yishai"},"score":6,"creation_date":1390486940,"post_id":2758224,"comment_id":32119183,"body_markdown":"@DavidTonhofer, in real life you almost never see them. This is verifiable. Check as many open source projects as you like. I&#39;m not saying you don&#39;t validate invariants. That isn&#39;t the same thing. Put another way. If asserts are so important, why are they off by default?","body":"@DavidTonhofer, in real life you almost never see them. This is verifiable. Check as many open source projects as you like. I&#39;m not saying you don&#39;t validate invariants. That isn&#39;t the same thing. Put another way. If asserts are so important, why are they off by default?"},{"owner":{"account_id":474651,"reputation":14676,"user_id":884463,"accept_rate":89,"display_name":"David Tonhofer"},"score":3,"creation_date":1390525731,"post_id":2758224,"comment_id":32140865,"body_markdown":"@Yishai: This unfortunately says more about the people doing the programming than about the assertions: a lack of basic programming hygiene. I say this because I have seen tons of code where the programmer was unable or unwilling to add an assertion because _he simply didn&#39;t know what he was doing in the first place_, leaving lots of edge cases uncovered and entering demented inner state like an off-road vehicle with taped-over windows. Lots of code I saw also evoked lengthy &quot;huh? did he think about this case...&quot; reflections which could have dispelled in an instant by an appropriate &quot;assert&quot;.","body":"@Yishai: This unfortunately says more about the people doing the programming than about the assertions: a lack of basic programming hygiene. I say this because I have seen tons of code where the programmer was unable or unwilling to add an assertion because <i>he simply didn&#39;t know what he was doing in the first place</i>, leaving lots of edge cases uncovered and entering demented inner state like an off-road vehicle with taped-over windows. Lots of code I saw also evoked lengthy &quot;huh? did he think about this case...&quot; reflections which could have dispelled in an instant by an appropriate &quot;assert&quot;."},{"owner":{"account_id":474651,"reputation":14676,"user_id":884463,"accept_rate":89,"display_name":"David Tonhofer"},"score":20,"creation_date":1390525853,"post_id":2758224,"comment_id":32140908,"body_markdown":"A reference, FWIW: [The relationship between software assertions and code quality](http://www.embedded.com/electrical-engineer-community/general/4416085/The-relationship-between-software-assertions-and-code-quality): _&quot;We also compare the efficacy of assertions against that of popular bug finding techniques like source code static analysis tools. We observe from our case study that with an increase in the assertion density in a file there is a statistically significant decrease in fault density.&quot;_","body":"A reference, FWIW: <a href=\"http://www.embedded.com/electrical-engineer-community/general/4416085/The-relationship-between-software-assertions-and-code-quality\" rel=\"nofollow noreferrer\">The relationship between software assertions and code quality</a>: <i>&quot;We also compare the efficacy of assertions against that of popular bug finding techniques like source code static analysis tools. We observe from our case study that with an increase in the assertion density in a file there is a statistically significant decrease in fault density.&quot;</i>"},{"owner":{"account_id":28947,"reputation":90759,"user_id":77779,"accept_rate":89,"display_name":"Yishai"},"score":0,"creation_date":1390573440,"post_id":2758224,"comment_id":32162288,"body_markdown":"@DavidTonhofer, You aren&#39;t defending asserts which you do not want to fail all the time, which is all the assert keyword is good for.","body":"@DavidTonhofer, You aren&#39;t defending asserts which you do not want to fail all the time, which is all the assert keyword is good for."},{"owner":{"account_id":474651,"reputation":14676,"user_id":884463,"accept_rate":89,"display_name":"David Tonhofer"},"score":2,"creation_date":1390809380,"post_id":2758224,"comment_id":32235544,"body_markdown":"@Yiashai That is the point of &quot;assert&quot;. It &quot;asserts&quot; that something is true at some point in the program state, so it expresses an assumption about how the program is supposed to work. **If the assertion is violated, you are in presence of a fatal error**. If you mean to say that it is not powerful enough, and that you want Contracts (like C4J), I can agree with that.","body":"@Yiashai That is the point of &quot;assert&quot;. It &quot;asserts&quot; that something is true at some point in the program state, so it expresses an assumption about how the program is supposed to work. <b>If the assertion is violated, you are in presence of a fatal error</b>. If you mean to say that it is not powerful enough, and that you want Contracts (like C4J), I can agree with that."},{"owner":{"account_id":374056,"reputation":2187,"user_id":724051,"accept_rate":81,"display_name":"nightograph"},"score":6,"creation_date":1401983792,"post_id":2758224,"comment_id":37107577,"body_markdown":"@DavidTonhofer David, i think your love for assertion is for a very specific type of programming that you guys are doing, in my field which works with web applications exiting out of the program for ANY reason is the biggest NO NO - i have personally never used assert other than unit/integ testing","body":"@DavidTonhofer David, i think your love for assertion is for a very specific type of programming that you guys are doing, in my field which works with web applications exiting out of the program for ANY reason is the biggest NO NO - i have personally never used assert other than unit/integ testing"},{"owner":{"account_id":474651,"reputation":14676,"user_id":884463,"accept_rate":89,"display_name":"David Tonhofer"},"score":0,"creation_date":1402072266,"post_id":2758224,"comment_id":37147942,"body_markdown":"@nightograph For sure, I do not like the thrown Error and have been using a catchable RuntimeException myself. In case of webapps, I caughteverything at the servlet level and invoked default behaviour when SHTF, which of course should not happen in production code (if a serious problem occurs when transferring money from one account to another, say, I consider it best to ferry the user to an excuse&amp;login screen... YMMV). Of course, if the problem occurs in the servlet engine, uglyness ensues regardless.","body":"@nightograph For sure, I do not like the thrown Error and have been using a catchable RuntimeException myself. In case of webapps, I caughteverything at the servlet level and invoked default behaviour when SHTF, which of course should not happen in production code (if a serious problem occurs when transferring money from one account to another, say, I consider it best to ferry the user to an excuse&amp;login screen... YMMV). Of course, if the problem occurs in the servlet engine, uglyness ensues regardless."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":7,"creation_date":1451841453,"post_id":2758224,"comment_id":56903372,"body_markdown":"Assertions can be turned off.  This mean you are not guaranteed that they will &quot;fire&quot; in production, which is where you need it most.","body":"Assertions can be turned off.  This mean you are not guaranteed that they will &quot;fire&quot; in production, which is where you need it most."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1571958768,"post_id":2758224,"comment_id":103421282,"body_markdown":"@Yiashai Assertions are off by default so they will most likely be off in production, which is the right way to use them. They&#39;re strictly a development phase tool. They&#39;re very helpful in catching bugs in development, which is where you&#39;re most likely to see bugs.","body":"@Yiashai Assertions are off by default so they will most likely be off in production, which is the right way to use them. They&#39;re strictly a development phase tool. They&#39;re very helpful in catching bugs in development, which is where you&#39;re most likely to see bugs."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1571959334,"post_id":2758224,"comment_id":103421398,"body_markdown":"In web applications, where exiting for any reason is the biggest NO NO, assertions are still useful. First of all, any of today&#39;s web frameworks will catch the AssertionError and return a 500-InternalServerError result, then will continue servicing requests. Second, you should leave them off in production anyway, so they can&#39;t get triggered. I find assertions very useful in web development. I turn them on when I&#39;m testing my changes and running my unit tests. I&#39;m very finicky, so I even run my unit tests again with Assertions turned off before I check my code in, but that may be overkill.","body":"In web applications, where exiting for any reason is the biggest NO NO, assertions are still useful. First of all, any of today&#39;s web frameworks will catch the AssertionError and return a 500-InternalServerError result, then will continue servicing requests. Second, you should leave them off in production anyway, so they can&#39;t get triggered. I find assertions very useful in web development. I turn them on when I&#39;m testing my changes and running my unit tests. I&#39;m very finicky, so I even run my unit tests again with Assertions turned off before I check my code in, but that may be overkill."},{"owner":{"account_id":2229408,"reputation":865,"user_id":1967402,"accept_rate":33,"display_name":"Micha&#235;l Benjamin Saerens"},"score":2,"creation_date":1592471464,"post_id":2758224,"comment_id":110439147,"body_markdown":"Assertions are disabled by default because prior to Java 1.4 it was perfectly legal to use the word “assert” for naming variables, methods, etc. This potentially creates a naming clash when using an older code with newer JVM versions. Therefore, for backward compatibility, the JVM disables assertion validation by default.","body":"Assertions are disabled by default because prior to Java 1.4 it was perfectly legal to use the word “assert” for naming variables, methods, etc. This potentially creates a naming clash when using an older code with newer JVM versions. Therefore, for backward compatibility, the JVM disables assertion validation by default."},{"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"score":0,"creation_date":1693333087,"post_id":2758224,"comment_id":135746024,"body_markdown":"In case you are searching for `@Nullable` annotations, see https://stackoverflow.com/a/76999389/873282 for a sketch - and https://stackoverflow.com/q/4963300/873282 for a general discussion.","body":"In case you are searching for <code>@Nullable</code> annotations, see <a href=\"https://stackoverflow.com/a/76999389/873282\">stackoverflow.com/a/76999389/873282</a> for a sketch - and <a href=\"https://stackoverflow.com/q/4963300/873282\">stackoverflow.com/q/4963300/873282</a> for a general discussion."}],"answers":[{"tags":[],"owner":{"account_id":25166,"reputation":29119,"user_id":64495,"accept_rate":67,"display_name":"Bj&#246;rn"},"down_vote_count":12,"up_vote_count":20,"is_accepted":false,"score":8,"last_activity_date":1516385205,"creation_date":1272892624,"answer_id":2758262,"question_id":2758224,"body_markdown":"A real world example, from a Stack-class (from [Assertion in Java Articles][1])\r\n\r\n    public int pop() {\r\n       // precondition\r\n       assert !isEmpty() : &quot;Stack is empty&quot;;\r\n       return stack[--num];\r\n    }\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/articles/javase/assertions-139853.html","title":"What are assertions in Java and when should they be used?","body":"<p>A real world example, from a Stack-class (from <a href=\"http://www.oracle.com/technetwork/articles/javase/assertions-139853.html\" rel=\"nofollow noreferrer\">Assertion in Java Articles</a>)</p>\n\n<pre><code>public int pop() {\n   // precondition\n   assert !isEmpty() : \"Stack is empty\";\n   return stack[--num];\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":114848,"reputation":134179,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1272892645,"creation_date":1272892645,"answer_id":2758267,"question_id":2758224,"body_markdown":"Assertions are used to check post-conditions and &quot;should never fail&quot; pre-conditions. Correct code should never fail an assertion; when they trigger, they should indicate a bug (hopefully at a place that is close to where the actual locus of the problem is).\r\n\r\nAn example of an assertion might be to check that a particular group of methods is called in the right order (e.g., that `hasNext()` is called before `next()` in an `Iterator`).","title":"What are assertions in Java and when should they be used?","body":"<p>Assertions are used to check post-conditions and \"should never fail\" pre-conditions. Correct code should never fail an assertion; when they trigger, they should indicate a bug (hopefully at a place that is close to where the actual locus of the problem is).</p>\n\n<p>An example of an assertion might be to check that a particular group of methods is called in the right order (e.g., that <code>hasNext()</code> is called before <code>next()</code> in an <code>Iterator</code>).</p>\n"},{"tags":[],"owner":{"account_id":44204,"reputation":9823,"user_id":129599,"accept_rate":100,"display_name":"Ophidian"},"down_vote_count":4,"up_vote_count":486,"is_accepted":true,"score":482,"last_activity_date":1681581785,"creation_date":1272896092,"answer_id":2758645,"question_id":2758224,"body_markdown":"[Assertions](http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.10) (by way of the `assert` keyword) were added in Java 1.4.  They are used to verify the correctness of an invariant in the code.  They should never be triggered in production code, and are indicative of a bug or misuse of a code path.  They can be activated at run-time by way of the `-ea` option on the `java` command, but are not turned on by default.\r\n\r\nAn example:\r\n```java\r\npublic Foo acquireFoo(int id) {\r\n    Foo result = (id &gt; 50) ? fooService.read(id) : new Foo(id);\r\n\r\n    assert result != null;\r\n\r\n    return result;\r\n}\r\n```","title":"What are assertions in Java and when should they be used?","body":"<p><a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.10\" rel=\"noreferrer\">Assertions</a> (by way of the <code>assert</code> keyword) were added in Java 1.4.  They are used to verify the correctness of an invariant in the code.  They should never be triggered in production code, and are indicative of a bug or misuse of a code path.  They can be activated at run-time by way of the <code>-ea</code> option on the <code>java</code> command, but are not turned on by default.</p>\n<p>An example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Foo acquireFoo(int id) {\n    Foo result = (id &gt; 50) ? fooService.read(id) : new Foo(id);\n\n    assert result != null;\n\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1491309,"reputation":709,"user_id":1398333,"display_name":"SBTec"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1518026013,"creation_date":1339401567,"answer_id":10976329,"question_id":2758224,"body_markdown":"Assertion are basically used to debug the application or it is used in replacement of exception handling for some application to check the validity of an application.\r\n\r\nAssertion works at run time. A simple example, that can explain the whole concept very simply, is herein - *[What does the assert keyword do in Java?][1]* (WikiAnswers).\r\n\r\n  [1]: http://wiki.answers.com/Q/What_does_the_assert_keyword_do_in_Java\r\n","title":"What are assertions in Java and when should they be used?","body":"<p>Assertion are basically used to debug the application or it is used in replacement of exception handling for some application to check the validity of an application.</p>\n\n<p>Assertion works at run time. A simple example, that can explain the whole concept very simply, is herein - <em><a href=\"http://wiki.answers.com/Q/What_does_the_assert_keyword_do_in_Java\" rel=\"nofollow noreferrer\">What does the assert keyword do in Java?</a></em> (WikiAnswers).</p>\n"},{"tags":[],"owner":{"account_id":2680882,"reputation":11,"user_id":2316297,"display_name":"pavani"},"down_vote_count":16,"up_vote_count":4,"is_accepted":false,"score":-12,"last_activity_date":1450882755,"creation_date":1366817489,"answer_id":16196119,"question_id":2758224,"body_markdown":"`assert` is a keyword. It was introduced in JDK 1.4. The are two types of `assert`s\r\n\r\n1. Very simple `assert` statements\r\n2. Simple `assert` statements.\r\n\r\nBy default all `assert` statements will not be executed. If an `assert` statement receives false, then it will automatically raise an assertion error.","title":"What are assertions in Java and when should they be used?","body":"<p><code>assert</code> is a keyword. It was introduced in JDK 1.4. The are two types of <code>assert</code>s</p>\n\n<ol>\n<li>Very simple <code>assert</code> statements</li>\n<li>Simple <code>assert</code> statements.</li>\n</ol>\n\n<p>By default all <code>assert</code> statements will not be executed. If an <code>assert</code> statement receives false, then it will automatically raise an assertion error.</p>\n"},{"tags":[],"owner":{"account_id":3328940,"reputation":13909,"user_id":2798291,"accept_rate":53,"display_name":"TwoThe"},"down_vote_count":4,"up_vote_count":379,"is_accepted":false,"score":375,"last_activity_date":1523681594,"creation_date":1382009488,"answer_id":19425549,"question_id":2758224,"body_markdown":"Let&#39;s assume that you are supposed to write a program to control a nuclear power-plant. It is pretty obvious that even the most minor mistake could have catastrophic results, therefore your code __has to be__ bug-free (assuming that the JVM is bug-free for the sake of the argument).\r\n\r\nJava is not a verifiable language, which means: you cannot calculate that the result of your operation will be perfect. The main reason for this are pointers: they can point anywhere or nowhere, therefore they cannot be calculated to be of this exact value, at least not within a reasonable span of code. Given this problem, there is no way to prove that your code is correct at a whole. But what you can do is to prove that you at least find every bug when it happens.\r\n\r\nThis idea is based on the [Design-by-Contract][1] (DbC) paradigm: you first define (with mathematical precision) what your method is supposed to do, and then verify this by testing it during actual execution. Example:\r\n\r\n    // Calculates the sum of a (int) + b (int) and returns the result (int).\r\n    int sum(int a, int b) {\r\n      return a + b;\r\n    }\r\n\r\nWhile this is pretty obvious to work fine, most programmers will not see the hidden bug inside this one (hint: the Ariane V crashed because of a similar bug). Now DbC defines that you must _always_ check the input and output of a function to verify that it worked correctly. Java can do this through assertions:\r\n\r\n    // Calculates the sum of a (int) + b (int) and returns the result (int).\r\n    int sum(int a, int b) {\r\n        assert (Integer.MAX_VALUE - a &gt;= b) : &quot;Value of &quot; + a + &quot; + &quot; + b + &quot; is too large to add.&quot;;\r\n      final int result = a + b;\r\n        assert (result - a == b) : &quot;Sum of &quot; + a + &quot; + &quot; + b + &quot; returned wrong sum &quot; + result;\r\n      return result;\r\n    }\r\n\r\nShould this function now ever fail, you will notice it. You will know that there is a problem in your code, you know where it is and you know what caused it (similar to Exceptions). And what is even more important: you stop executing right when it happens to prevent any further code to work with wrong values and potentially cause damage to whatever it controls.\r\n\r\nJava Exceptions are a similar concept, but they fail to verify everything. If you want even more checks (at the cost of execution speed) you need to use assertions. Doing so will bloat your code, but you can in the end deliver a product at a surprisingly short development time (the earlier you fix a bug, the lower the cost). And in addition: if there is any bug inside your code, you will detect it. There is no way of a bug slipping-through and cause issues later.\r\n\r\nThis still is not a guarantee for bug-free code, but it is much closer to that, than usual programs.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Design_by_contract","title":"What are assertions in Java and when should they be used?","body":"<p>Let's assume that you are supposed to write a program to control a nuclear power-plant. It is pretty obvious that even the most minor mistake could have catastrophic results, therefore your code <strong>has to be</strong> bug-free (assuming that the JVM is bug-free for the sake of the argument).</p>\n\n<p>Java is not a verifiable language, which means: you cannot calculate that the result of your operation will be perfect. The main reason for this are pointers: they can point anywhere or nowhere, therefore they cannot be calculated to be of this exact value, at least not within a reasonable span of code. Given this problem, there is no way to prove that your code is correct at a whole. But what you can do is to prove that you at least find every bug when it happens.</p>\n\n<p>This idea is based on the <a href=\"http://en.wikipedia.org/wiki/Design_by_contract\" rel=\"noreferrer\">Design-by-Contract</a> (DbC) paradigm: you first define (with mathematical precision) what your method is supposed to do, and then verify this by testing it during actual execution. Example:</p>\n\n<pre><code>// Calculates the sum of a (int) + b (int) and returns the result (int).\nint sum(int a, int b) {\n  return a + b;\n}\n</code></pre>\n\n<p>While this is pretty obvious to work fine, most programmers will not see the hidden bug inside this one (hint: the Ariane V crashed because of a similar bug). Now DbC defines that you must <em>always</em> check the input and output of a function to verify that it worked correctly. Java can do this through assertions:</p>\n\n<pre><code>// Calculates the sum of a (int) + b (int) and returns the result (int).\nint sum(int a, int b) {\n    assert (Integer.MAX_VALUE - a &gt;= b) : \"Value of \" + a + \" + \" + b + \" is too large to add.\";\n  final int result = a + b;\n    assert (result - a == b) : \"Sum of \" + a + \" + \" + b + \" returned wrong sum \" + result;\n  return result;\n}\n</code></pre>\n\n<p>Should this function now ever fail, you will notice it. You will know that there is a problem in your code, you know where it is and you know what caused it (similar to Exceptions). And what is even more important: you stop executing right when it happens to prevent any further code to work with wrong values and potentially cause damage to whatever it controls.</p>\n\n<p>Java Exceptions are a similar concept, but they fail to verify everything. If you want even more checks (at the cost of execution speed) you need to use assertions. Doing so will bloat your code, but you can in the end deliver a product at a surprisingly short development time (the earlier you fix a bug, the lower the cost). And in addition: if there is any bug inside your code, you will detect it. There is no way of a bug slipping-through and cause issues later.</p>\n\n<p>This still is not a guarantee for bug-free code, but it is much closer to that, than usual programs.</p>\n"},{"tags":[],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1389943748,"creation_date":1389943748,"answer_id":21180198,"question_id":2758224,"body_markdown":"Here&#39;s the most common use case. Suppose you&#39;re switching on an enum value:\r\n\r\n    switch (fruit) {\r\n      case apple:\r\n        // do something\r\n        break;\r\n      case pear:\r\n        // do something\r\n        break;\r\n      case banana:\r\n        // do something\r\n        break;\r\n    }\r\n\r\nAs long as you handle every case, you&#39;re fine. But someday, somebody will add fig to your enum and forget to add it to your switch statement. This produces a bug that may get tricky to catch, because the effects won&#39;t be felt until after you&#39;ve left the switch statement. But if you write your switch like this, you can catch it immediately:\r\n\r\n    switch (fruit) {\r\n      case apple:\r\n        // do something\r\n        break;\r\n      case pear:\r\n        // do something\r\n        break;\r\n      case banana:\r\n        // do something\r\n        break;\r\n      default:\r\n        assert false : &quot;Missing enum value: &quot; + fruit;\r\n    }","title":"What are assertions in Java and when should they be used?","body":"<p>Here's the most common use case. Suppose you're switching on an enum value:</p>\n\n<pre><code>switch (fruit) {\n  case apple:\n    // do something\n    break;\n  case pear:\n    // do something\n    break;\n  case banana:\n    // do something\n    break;\n}\n</code></pre>\n\n<p>As long as you handle every case, you're fine. But someday, somebody will add fig to your enum and forget to add it to your switch statement. This produces a bug that may get tricky to catch, because the effects won't be felt until after you've left the switch statement. But if you write your switch like this, you can catch it immediately:</p>\n\n<pre><code>switch (fruit) {\n  case apple:\n    // do something\n    break;\n  case pear:\n    // do something\n    break;\n  case banana:\n    // do something\n    break;\n  default:\n    assert false : \"Missing enum value: \" + fruit;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"down_vote_count":0,"up_vote_count":84,"is_accepted":false,"score":84,"last_activity_date":1478076431,"creation_date":1389993493,"answer_id":21196051,"question_id":2758224,"body_markdown":"Assertions are a development-phase tool to catch bugs in your code. They&#39;re designed to be easily removed, so they won&#39;t exist in production code. So assertions are not part of the &quot;solution&quot; that you deliver to the customer. They&#39;re internal checks to make sure that the assumptions you&#39;re making are correct. The most common example is to test for null. Many methods are written like this:\r\n\r\n    void doSomething(Widget widget) {\r\n      if (widget != null) {\r\n        widget.someMethod(); // ...\r\n        ... // do more stuff with this widget\r\n      }\r\n    }\r\n\r\nVery often in a method like this, the widget should simply never be null. So if it&#39;s null, there&#39;s a bug in your code somewhere that you need to track down. But the code above will never tell you this. So in a well-intentioned effort to write &quot;safe&quot; code, you&#39;re also hiding a bug. It&#39;s much better to write code like this:\r\n\r\n    /**\r\n     * @param Widget widget Should never be null\r\n     */\r\n    void doSomething(Widget widget) {\r\n      assert widget != null;\r\n      widget.someMethod(); // ...\r\n        ... // do more stuff with this widget\r\n    }\r\n\r\nThis way, you will be sure to catch this bug early. (It&#39;s also useful to specify in the contract that this parameter should never be null.) Be sure to turn assertions on when you test your code during development. (And persuading your colleagues to do this, too is often difficult, which I find very annoying.)\r\n\r\nNow, some of your colleagues will object to this code, arguing that you should still put in the null check to prevent an exception in production. In that case, the assertion is still useful. You can write it like this: \r\n    \r\n    void doSomething(Widget widget) {\r\n      assert widget != null;\r\n      if (widget != null) {\r\n        widget.someMethod(); // ...\r\n        ... // do more stuff with this widget\r\n      }\r\n    }\r\n\r\nThis way, your colleagues will be happy that the null check is there for production code, but during development, you&#39;re no longer hiding the bug when widget is null.\r\n\r\nHere&#39;s a real-world example: I once wrote a method that compared two arbitrary values for equality, where either value could be null:\r\n\r\n    /**\r\n     * Compare two values using equals(), after checking for null.\r\n     * @param thisValue (may be null)\r\n     * @param otherValue (may be null)\r\n     * @return True if they are both null or if equals() returns true\r\n     */\r\n    public static boolean compare(final Object thisValue, final Object otherValue) {\r\n      boolean result;\r\n      if (thisValue == null) {\r\n        result = otherValue == null;\r\n      } else {\r\n        result = thisValue.equals(otherValue);\r\n      }\r\n      return result;\r\n    }\r\n\r\nThis code delegates the work of the `equals()` method in the case where thisValue is not null. But it assumes the `equals()` method correctly fulfills the contract of `equals()` by properly handling a null parameter. \r\n\r\nA colleague objected to my code, telling me that many of our classes have buggy `equals()` methods that don&#39;t test for null, so I should put that check into this method. It&#39;s debatable if this is wise, or if we should force the error, so we can spot it and fix it, but I deferred to my colleague and put in a null check, which I&#39;ve marked with a comment:\r\n\r\n\r\n    public static boolean compare(final Object thisValue, final Object otherValue) {\r\n      boolean result;\r\n      if (thisValue == null) {\r\n        result = otherValue == null;\r\n      } else {\r\n        result = otherValue != null &amp;&amp; thisValue.equals(otherValue); // questionable null check\r\n      }\r\n      return result;\r\n    }\r\n\r\nThe additional check here, `other != null`, is only necessary if the `equals()` method fails to check for null as required by its contract. \r\n\r\nRather than engage in a fruitless debate with my colleague about the wisdom of letting the buggy code stay in our code base, I simply put two assertions in the code. These assertions will let me know, during the development phase, if one of our classes fails to implement `equals()` properly, so I can fix it:\r\n\r\n    public static boolean compare(final Object thisValue, final Object otherValue) {\r\n      boolean result;\r\n      if (thisValue == null) {\r\n        result = otherValue == null;\r\n        assert otherValue == null || otherValue.equals(null) == false;\r\n      } else {\r\n        result = otherValue != null &amp;&amp; thisValue.equals(otherValue);\r\n        assert thisValue.equals(null) == false;\r\n      }\r\n      return result;\r\n    }\r\n\r\nThe important points to keep in mind are these:\r\n\r\n1. Assertions are development-phase tools only.\r\n\r\n2. The point of an assertion is to let you know if there&#39;s a bug, not just in your code, but in your *code base*. (The assertions here will actually flag bugs in other classes.)\r\n\r\n3. Even if my colleague was confident that our classes were properly written, the assertions here would still be useful. New classes will be added that might fail to test for null, and this method can flag those bugs for us.\r\n\r\n4. In development, you should always turn assertions on, even if the code you&#39;ve written doesn&#39;t use assertions. My IDE is set to always do this by default for any new executable.\r\n\r\n5. The assertions don&#39;t change the behavior of the code in production, so my colleague is happy that the null check is there, and that this method will execute properly even if the `equals()` method is buggy. I&#39;m happy because I will catch any buggy `equals()` method in development.\r\n\r\nAlso, you should test your assertion policy by putting in a temporary assertion that will fail, so you can be certain that you are notified, either through the log file or a stack trace in the output stream. ","title":"What are assertions in Java and when should they be used?","body":"<p>Assertions are a development-phase tool to catch bugs in your code. They're designed to be easily removed, so they won't exist in production code. So assertions are not part of the \"solution\" that you deliver to the customer. They're internal checks to make sure that the assumptions you're making are correct. The most common example is to test for null. Many methods are written like this:</p>\n\n<pre><code>void doSomething(Widget widget) {\n  if (widget != null) {\n    widget.someMethod(); // ...\n    ... // do more stuff with this widget\n  }\n}\n</code></pre>\n\n<p>Very often in a method like this, the widget should simply never be null. So if it's null, there's a bug in your code somewhere that you need to track down. But the code above will never tell you this. So in a well-intentioned effort to write \"safe\" code, you're also hiding a bug. It's much better to write code like this:</p>\n\n<pre><code>/**\n * @param Widget widget Should never be null\n */\nvoid doSomething(Widget widget) {\n  assert widget != null;\n  widget.someMethod(); // ...\n    ... // do more stuff with this widget\n}\n</code></pre>\n\n<p>This way, you will be sure to catch this bug early. (It's also useful to specify in the contract that this parameter should never be null.) Be sure to turn assertions on when you test your code during development. (And persuading your colleagues to do this, too is often difficult, which I find very annoying.)</p>\n\n<p>Now, some of your colleagues will object to this code, arguing that you should still put in the null check to prevent an exception in production. In that case, the assertion is still useful. You can write it like this: </p>\n\n<pre><code>void doSomething(Widget widget) {\n  assert widget != null;\n  if (widget != null) {\n    widget.someMethod(); // ...\n    ... // do more stuff with this widget\n  }\n}\n</code></pre>\n\n<p>This way, your colleagues will be happy that the null check is there for production code, but during development, you're no longer hiding the bug when widget is null.</p>\n\n<p>Here's a real-world example: I once wrote a method that compared two arbitrary values for equality, where either value could be null:</p>\n\n<pre><code>/**\n * Compare two values using equals(), after checking for null.\n * @param thisValue (may be null)\n * @param otherValue (may be null)\n * @return True if they are both null or if equals() returns true\n */\npublic static boolean compare(final Object thisValue, final Object otherValue) {\n  boolean result;\n  if (thisValue == null) {\n    result = otherValue == null;\n  } else {\n    result = thisValue.equals(otherValue);\n  }\n  return result;\n}\n</code></pre>\n\n<p>This code delegates the work of the <code>equals()</code> method in the case where thisValue is not null. But it assumes the <code>equals()</code> method correctly fulfills the contract of <code>equals()</code> by properly handling a null parameter. </p>\n\n<p>A colleague objected to my code, telling me that many of our classes have buggy <code>equals()</code> methods that don't test for null, so I should put that check into this method. It's debatable if this is wise, or if we should force the error, so we can spot it and fix it, but I deferred to my colleague and put in a null check, which I've marked with a comment:</p>\n\n<pre><code>public static boolean compare(final Object thisValue, final Object otherValue) {\n  boolean result;\n  if (thisValue == null) {\n    result = otherValue == null;\n  } else {\n    result = otherValue != null &amp;&amp; thisValue.equals(otherValue); // questionable null check\n  }\n  return result;\n}\n</code></pre>\n\n<p>The additional check here, <code>other != null</code>, is only necessary if the <code>equals()</code> method fails to check for null as required by its contract. </p>\n\n<p>Rather than engage in a fruitless debate with my colleague about the wisdom of letting the buggy code stay in our code base, I simply put two assertions in the code. These assertions will let me know, during the development phase, if one of our classes fails to implement <code>equals()</code> properly, so I can fix it:</p>\n\n<pre><code>public static boolean compare(final Object thisValue, final Object otherValue) {\n  boolean result;\n  if (thisValue == null) {\n    result = otherValue == null;\n    assert otherValue == null || otherValue.equals(null) == false;\n  } else {\n    result = otherValue != null &amp;&amp; thisValue.equals(otherValue);\n    assert thisValue.equals(null) == false;\n  }\n  return result;\n}\n</code></pre>\n\n<p>The important points to keep in mind are these:</p>\n\n<ol>\n<li><p>Assertions are development-phase tools only.</p></li>\n<li><p>The point of an assertion is to let you know if there's a bug, not just in your code, but in your <em>code base</em>. (The assertions here will actually flag bugs in other classes.)</p></li>\n<li><p>Even if my colleague was confident that our classes were properly written, the assertions here would still be useful. New classes will be added that might fail to test for null, and this method can flag those bugs for us.</p></li>\n<li><p>In development, you should always turn assertions on, even if the code you've written doesn't use assertions. My IDE is set to always do this by default for any new executable.</p></li>\n<li><p>The assertions don't change the behavior of the code in production, so my colleague is happy that the null check is there, and that this method will execute properly even if the <code>equals()</code> method is buggy. I'm happy because I will catch any buggy <code>equals()</code> method in development.</p></li>\n</ol>\n\n<p>Also, you should test your assertion policy by putting in a temporary assertion that will fail, so you can be certain that you are notified, either through the log file or a stack trace in the output stream. </p>\n"},{"tags":[],"owner":{"account_id":101404,"reputation":141,"user_id":272858,"accept_rate":57,"display_name":"John White"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1391589191,"creation_date":1391588537,"answer_id":21571971,"question_id":2758224,"body_markdown":"Assert is *very* useful when developing.  You use it when something just *cannot* happen if your code is working correctly.  It&#39;s easy to use, and can stay in the code for ever, because it will be turned off in real life.\r\n\r\nIf there is any chance that the condition can occur in real life, then you must handle it.\r\n\r\nI love it, but don&#39;t know how to turn it on in Eclipse/Android/ADT .  It seems to be off even when debugging.  (There is a thread on this, but it refers to the &#39;Java vm&#39;, which does not appear in the ADT Run Configuration).","title":"What are assertions in Java and when should they be used?","body":"<p>Assert is <em>very</em> useful when developing.  You use it when something just <em>cannot</em> happen if your code is working correctly.  It's easy to use, and can stay in the code for ever, because it will be turned off in real life.</p>\n\n<p>If there is any chance that the condition can occur in real life, then you must handle it.</p>\n\n<p>I love it, but don't know how to turn it on in Eclipse/Android/ADT .  It seems to be off even when debugging.  (There is a thread on this, but it refers to the 'Java vm', which does not appear in the ADT Run Configuration).</p>\n"},{"tags":[],"owner":{"display_name":"user891193"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1518026382,"creation_date":1392014174,"answer_id":21670520,"question_id":2758224,"body_markdown":"Basically, &quot;assert true&quot; will pass and &quot;assert false&quot; will fail. Let&#39;s looks at how this will work:\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        String s1 = &quot;Hello&quot;;\r\n        assert checkInteger(s1);\r\n    }\r\n        \r\n    private static boolean checkInteger(String s)\r\n    {\r\n        try {\r\n            Integer.parseInt(s);\r\n            return true;\r\n        }\r\n        catch(Exception e)\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n","title":"What are assertions in Java and when should they be used?","body":"<p>Basically, \"assert true\" will pass and \"assert false\" will fail. Let's looks at how this will work:</p>\n\n<pre><code>public static void main(String[] args)\n{\n    String s1 = \"Hello\";\n    assert checkInteger(s1);\n}\n\nprivate static boolean checkInteger(String s)\n{\n    try {\n        Integer.parseInt(s);\n        return true;\n    }\n    catch(Exception e)\n    {\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":481416,"reputation":355314,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1436605177,"creation_date":1428094438,"answer_id":29439538,"question_id":2758224,"body_markdown":"&gt; What does the assert keyword in Java do?\r\n\r\n**Let&#39;s look at the compiled bytecode.**\r\n\r\nWe will conclude that:\r\n\r\n    public class Assert {\r\n        public static void main(String[] args) {\r\n            assert System.currentTimeMillis() == 0L;\r\n        }\r\n    }\r\n\r\ngenerates almost the exact same bytecode as:\r\n\r\n    public class Assert {\r\n        static final boolean $assertionsDisabled =\r\n            !Assert.class.desiredAssertionStatus();\r\n        public static void main(String[] args) {\r\n            if (!$assertionsDisabled) {\r\n                if (System.currentTimeMillis() != 0L) {\r\n                    throw new AssertionError();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nwhere `Assert.class.desiredAssertionStatus()` is `true` when `-ea` is passed on the command line, and false otherwise.\r\n\r\nWe use `System.currentTimeMillis()` to ensure that it won&#39;t get optimized away (`assert true;` did).\r\n\r\nThe synthetic field is generated so that Java only needs to call `Assert.class.desiredAssertionStatus()` once at load time, and it then caches the result there. See also: https://stackoverflow.com/questions/5223268/what-is-the-meaning-of-static-synthetic\r\n\r\nWe can verify that with:\r\n\r\n    javac Assert.java\r\n    javap -c -constants -private -verbose Assert.class\r\n\r\nWith Oracle JDK 1.8.0_45, a synthetic static field was generated (see also: &lt;https://stackoverflow.com/questions/5223268/what-is-the-meaning-of-static-synthetic&gt;):\r\n\r\n    static final boolean $assertionsDisabled;\r\n      descriptor: Z\r\n      flags: ACC_STATIC, ACC_FINAL, ACC_SYNTHETIC\r\n\r\ntogether with a static initializer:\r\n\r\n     0: ldc           #6                  // class Assert\r\n     2: invokevirtual #7                  // Method java/lang Class.desiredAssertionStatus:()Z\r\n     5: ifne          12\r\n     8: iconst_1\r\n     9: goto          13\r\n    12: iconst_0\r\n    13: putstatic     #2                  // Field $assertionsDisabled:Z\r\n    16: return\r\n\r\nand the main method is:\r\n\r\n     0: getstatic     #2                  // Field $assertionsDisabled:Z\r\n     3: ifne          22\r\n     6: invokestatic  #3                  // Method java/lang/System.currentTimeMillis:()J\r\n     9: lconst_0\r\n    10: lcmp\r\n    11: ifeq          22\r\n    14: new           #4                  // class java/lang/AssertionError\r\n    17: dup\r\n    18: invokespecial #5                  // Method java/lang/AssertionError.&quot;&lt;init&gt;&quot;:()V\r\n    21: athrow\r\n    22: return\r\n\r\nWe conclude that:\r\n\r\n- there is no bytecode level support for `assert`: it is a Java language concept\r\n- `assert` could be emulated pretty well with system properties `-Pcom.me.assert=true` to replace `-ea` on the command line, and a `throw new AssertionError()`.\r\n","title":"What are assertions in Java and when should they be used?","body":"<blockquote>\n  <p>What does the assert keyword in Java do?</p>\n</blockquote>\n\n<p><strong>Let's look at the compiled bytecode.</strong></p>\n\n<p>We will conclude that:</p>\n\n<pre><code>public class Assert {\n    public static void main(String[] args) {\n        assert System.currentTimeMillis() == 0L;\n    }\n}\n</code></pre>\n\n<p>generates almost the exact same bytecode as:</p>\n\n<pre><code>public class Assert {\n    static final boolean $assertionsDisabled =\n        !Assert.class.desiredAssertionStatus();\n    public static void main(String[] args) {\n        if (!$assertionsDisabled) {\n            if (System.currentTimeMillis() != 0L) {\n                throw new AssertionError();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>where <code>Assert.class.desiredAssertionStatus()</code> is <code>true</code> when <code>-ea</code> is passed on the command line, and false otherwise.</p>\n\n<p>We use <code>System.currentTimeMillis()</code> to ensure that it won't get optimized away (<code>assert true;</code> did).</p>\n\n<p>The synthetic field is generated so that Java only needs to call <code>Assert.class.desiredAssertionStatus()</code> once at load time, and it then caches the result there. See also: <a href=\"https://stackoverflow.com/questions/5223268/what-is-the-meaning-of-static-synthetic\">What is the meaning of &quot;static synthetic&quot;?</a></p>\n\n<p>We can verify that with:</p>\n\n<pre><code>javac Assert.java\njavap -c -constants -private -verbose Assert.class\n</code></pre>\n\n<p>With Oracle JDK 1.8.0_45, a synthetic static field was generated (see also: <a href=\"https://stackoverflow.com/questions/5223268/what-is-the-meaning-of-static-synthetic\">What is the meaning of &quot;static synthetic&quot;?</a>):</p>\n\n<pre><code>static final boolean $assertionsDisabled;\n  descriptor: Z\n  flags: ACC_STATIC, ACC_FINAL, ACC_SYNTHETIC\n</code></pre>\n\n<p>together with a static initializer:</p>\n\n<pre><code> 0: ldc           #6                  // class Assert\n 2: invokevirtual #7                  // Method java/lang Class.desiredAssertionStatus:()Z\n 5: ifne          12\n 8: iconst_1\n 9: goto          13\n12: iconst_0\n13: putstatic     #2                  // Field $assertionsDisabled:Z\n16: return\n</code></pre>\n\n<p>and the main method is:</p>\n\n<pre><code> 0: getstatic     #2                  // Field $assertionsDisabled:Z\n 3: ifne          22\n 6: invokestatic  #3                  // Method java/lang/System.currentTimeMillis:()J\n 9: lconst_0\n10: lcmp\n11: ifeq          22\n14: new           #4                  // class java/lang/AssertionError\n17: dup\n18: invokespecial #5                  // Method java/lang/AssertionError.\"&lt;init&gt;\":()V\n21: athrow\n22: return\n</code></pre>\n\n<p>We conclude that:</p>\n\n<ul>\n<li>there is no bytecode level support for <code>assert</code>: it is a Java language concept</li>\n<li><code>assert</code> could be emulated pretty well with system properties <code>-Pcom.me.assert=true</code> to replace <code>-ea</code> on the command line, and a <code>throw new AssertionError()</code>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":157752,"reputation":19944,"user_id":375929,"display_name":"Ivan Bartsov"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1436355610,"creation_date":1431774556,"answer_id":30274891,"question_id":2758224,"body_markdown":"In addition to all the great answers provided here, the official Java SE 7 programming guide has a pretty concise manual on using `assert`; with several spot-on examples of when it&#39;s a good (and, importantly, bad) idea to use assertions, and how it&#39;s different from throwing exceptions.\r\n\r\n[**Link**][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html","title":"What are assertions in Java and when should they be used?","body":"<p>In addition to all the great answers provided here, the official Java SE 7 programming guide has a pretty concise manual on using <code>assert</code>; with several spot-on examples of when it's a good (and, importantly, bad) idea to use assertions, and how it's different from throwing exceptions.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html\" rel=\"noreferrer\"><strong>Link</strong></a></p>\n"},{"tags":[],"owner":{"account_id":5863393,"reputation":2293,"user_id":4618272,"accept_rate":100,"display_name":"Chandan Purohit"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1518129161,"creation_date":1445610093,"answer_id":33304681,"question_id":2758224,"body_markdown":"Assertions are disabled by default. To enable them we must run the program with `-ea` options (granularity can be varied). For example, `java -ea AssertionsDemo`.\r\n\r\nThere are two formats for using assertions:\r\n\r\n1. Simple: eg. `assert 1==2; // This will raise an AssertionError`.\r\n2. Better: `assert 1==2: &quot;no way.. 1 is not equal to 2&quot;;`\r\nThis will raise an AssertionError with the message given displayed too and is thus better. Although the actual syntax is `assert expr1:expr2` where expr2 can be any expression returning a value, I have used it more often just to print a message.\r\n","title":"What are assertions in Java and when should they be used?","body":"<p>Assertions are disabled by default. To enable them we must run the program with <code>-ea</code> options (granularity can be varied). For example, <code>java -ea AssertionsDemo</code>.</p>\n\n<p>There are two formats for using assertions:</p>\n\n<ol>\n<li>Simple: eg. <code>assert 1==2; // This will raise an AssertionError</code>.</li>\n<li>Better: <code>assert 1==2: \"no way.. 1 is not equal to 2\";</code>\nThis will raise an AssertionError with the message given displayed too and is thus better. Although the actual syntax is <code>assert expr1:expr2</code> where expr2 can be any expression returning a value, I have used it more often just to print a message.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"down_vote_count":8,"up_vote_count":38,"is_accepted":false,"score":30,"last_activity_date":1626796936,"creation_date":1464928183,"answer_id":37605954,"question_id":2758224,"body_markdown":"# When should Assert be used?\r\n\r\nA lot of good answers explaining what the `assert` keyword does, but few answering the real question, *&quot;when should the `assert` keyword be used in real life?&quot;* The answer: \r\n### **Almost never** ###\r\n\r\nAssertions, as a concept, are wonderful. Good code has lots of `if (...) throw ...` statements (and their relatives like `Objects.requireNonNull` and `Math.addExact`). However, certain design decisions have greatly limited the utility of the `assert` **keyword** itself.\r\n\r\nThe driving idea behind the `assert` keyword is premature optimization, and the main feature is being able to easily turn off all checks. In fact, *the `assert` checks are turned off by default.*\r\n\r\nHowever, it is critically important that invariant checks continue to be done in production. This is because perfect test coverage is impossible, and all production code will have bugs which assertions should help to diagnose and mitigate.\r\n\r\nTherefore, the use of `if (...) throw ...` should be preferred, just as it is required for checking parameter values of public methods and for throwing `IllegalArgumentException`.\r\n\r\nOccasionally, one might be tempted to write an invariant check that does take an undesirably long time to process (and is called often enough for it to matter). However, such checks will slow down testing which is also undesirable. Such time-consuming checks are usually written as unit tests. Nevertheless, it may sometimes make sense to use `assert` for this reason.\r\n\r\nDo not use `assert` simply because it is cleaner and prettier than `if (...) throw ...` (and I say that with great pain, because I like clean and pretty). If you just cannot help yourself, and can control how your application is launched, then feel free to use `assert` but **always enable assertions in production.** Admittedly, this is what I tend to do. I am pushing for a lombok annotation that will cause `assert` to act more like `if (...) throw ...`. [Vote for it here.](https://github.com/rzwitserloot/lombok/issues/1122)\r\n\r\n(Rant: the JVM devs were a bunch of awful, prematurely optimizing coders. That is why you hear about so many security issues in the Java plugin and JVM. They refused to include basic checks and assertions in production code, and we are continuing to pay the price.)","title":"What are assertions in Java and when should they be used?","body":"<h1 id=\"when-should-assert-be-used-ifj5\">When should Assert be used?</h1>\n<p>A lot of good answers explaining what the <code>assert</code> keyword does, but few answering the real question, <em>&quot;when should the <code>assert</code> keyword be used in real life?&quot;</em> The answer:</p>\n<h3 id=\"almost-never-8by1\"><strong>Almost never</strong></h3>\n<p>Assertions, as a concept, are wonderful. Good code has lots of <code>if (...) throw ...</code> statements (and their relatives like <code>Objects.requireNonNull</code> and <code>Math.addExact</code>). However, certain design decisions have greatly limited the utility of the <code>assert</code> <strong>keyword</strong> itself.</p>\n<p>The driving idea behind the <code>assert</code> keyword is premature optimization, and the main feature is being able to easily turn off all checks. In fact, <em>the <code>assert</code> checks are turned off by default.</em></p>\n<p>However, it is critically important that invariant checks continue to be done in production. This is because perfect test coverage is impossible, and all production code will have bugs which assertions should help to diagnose and mitigate.</p>\n<p>Therefore, the use of <code>if (...) throw ...</code> should be preferred, just as it is required for checking parameter values of public methods and for throwing <code>IllegalArgumentException</code>.</p>\n<p>Occasionally, one might be tempted to write an invariant check that does take an undesirably long time to process (and is called often enough for it to matter). However, such checks will slow down testing which is also undesirable. Such time-consuming checks are usually written as unit tests. Nevertheless, it may sometimes make sense to use <code>assert</code> for this reason.</p>\n<p>Do not use <code>assert</code> simply because it is cleaner and prettier than <code>if (...) throw ...</code> (and I say that with great pain, because I like clean and pretty). If you just cannot help yourself, and can control how your application is launched, then feel free to use <code>assert</code> but <strong>always enable assertions in production.</strong> Admittedly, this is what I tend to do. I am pushing for a lombok annotation that will cause <code>assert</code> to act more like <code>if (...) throw ...</code>. <a href=\"https://github.com/rzwitserloot/lombok/issues/1122\" rel=\"noreferrer\">Vote for it here.</a></p>\n<p>(Rant: the JVM devs were a bunch of awful, prematurely optimizing coders. That is why you hear about so many security issues in the Java plugin and JVM. They refused to include basic checks and assertions in production code, and we are continuing to pay the price.)</p>\n"},{"tags":[],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1495135424,"creation_date":1495135424,"answer_id":44056242,"question_id":2758224,"body_markdown":"Here&#39;s an assertion I wrote in a server for a Hibernate/SQL project. An entity bean had two effectively-boolean properties, called isActive and isDefault. Each could have a value of &quot;Y&quot; or &quot;N&quot; or null, which was treated as &quot;N&quot;. We want to make sure the browser client is limited to these three values. So, in my setters for these two properties, I added this assertion: \r\n\r\n\tassert new HashSet&lt;String&gt;(Arrays.asList(&quot;Y&quot;, &quot;N&quot;, null)).contains(value) : value;\r\n\r\nNotice the following.\r\n\r\n 1. This assertion is for the development phase only. If the client sends a bad value, we will catch that early and fix it, long before we reach production. Assertions are for defects that you can catch early.\r\n\r\n 2. This assertion is slow and inefficient. That&#39;s okay. Assertions are free to be slow. We don&#39;t care because they&#39;re development-only tools. This won&#39;t slow down the production code because assertions will be disabled. (There&#39;s some disagreement on this point, which I&#39;ll get to later.) This leads to my next point.\r\n\r\n 3. This assertion has no side effects. I could have tested my value against an unmodifiable static final Set, but that set would have stayed around in production, where it would never get used.\r\n\r\n 4. This assertion exists to verify the proper operation of the client. So by the time we reach production, we will be sure that the client is operating properly, so we can safely turn the assertion off.\r\n\r\n 5. Some people ask this: If the assertion isn&#39;t needed in production, why not just take them out when you&#39;re done? Because you&#39;ll still need them when you start working on the next version.\r\n\r\nSome people have argued that you should never use assertions, because you can never be sure that all the bugs are gone, so you need to keep them around even in production. And so there&#39;s no point in using the assert statement, since the only advantage to asserts is that you can turn them off. Hence, according to this thinking, you should (almost) never use asserts. I disagree. It&#39;s certainly true that if a test belongs in production, you should not use an assert. But this test does **not** belong in production. This one is for catching a bug that&#39;s not likely to ever reach production, so it may safely be turned off when you&#39;re done.\r\n\r\nBTW, I could have written it like this:\r\n\r\n    assert value == null || value.equals(&quot;Y&quot;) || value.equals(&quot;N&quot;) : value;\r\n\r\nThis is fine for only three values, but if the number of possible values gets bigger, the HashSet version becomes more convenient. I chose the HashSet version to make my point about efficiency.","title":"What are assertions in Java and when should they be used?","body":"<p>Here's an assertion I wrote in a server for a Hibernate/SQL project. An entity bean had two effectively-boolean properties, called isActive and isDefault. Each could have a value of \"Y\" or \"N\" or null, which was treated as \"N\". We want to make sure the browser client is limited to these three values. So, in my setters for these two properties, I added this assertion: </p>\n\n<pre><code>assert new HashSet&lt;String&gt;(Arrays.asList(\"Y\", \"N\", null)).contains(value) : value;\n</code></pre>\n\n<p>Notice the following.</p>\n\n<ol>\n<li><p>This assertion is for the development phase only. If the client sends a bad value, we will catch that early and fix it, long before we reach production. Assertions are for defects that you can catch early.</p></li>\n<li><p>This assertion is slow and inefficient. That's okay. Assertions are free to be slow. We don't care because they're development-only tools. This won't slow down the production code because assertions will be disabled. (There's some disagreement on this point, which I'll get to later.) This leads to my next point.</p></li>\n<li><p>This assertion has no side effects. I could have tested my value against an unmodifiable static final Set, but that set would have stayed around in production, where it would never get used.</p></li>\n<li><p>This assertion exists to verify the proper operation of the client. So by the time we reach production, we will be sure that the client is operating properly, so we can safely turn the assertion off.</p></li>\n<li><p>Some people ask this: If the assertion isn't needed in production, why not just take them out when you're done? Because you'll still need them when you start working on the next version.</p></li>\n</ol>\n\n<p>Some people have argued that you should never use assertions, because you can never be sure that all the bugs are gone, so you need to keep them around even in production. And so there's no point in using the assert statement, since the only advantage to asserts is that you can turn them off. Hence, according to this thinking, you should (almost) never use asserts. I disagree. It's certainly true that if a test belongs in production, you should not use an assert. But this test does <strong>not</strong> belong in production. This one is for catching a bug that's not likely to ever reach production, so it may safely be turned off when you're done.</p>\n\n<p>BTW, I could have written it like this:</p>\n\n<pre><code>assert value == null || value.equals(\"Y\") || value.equals(\"N\") : value;\n</code></pre>\n\n<p>This is fine for only three values, but if the number of possible values gets bigger, the HashSet version becomes more convenient. I chose the HashSet version to make my point about efficiency.</p>\n"},{"tags":[],"owner":{"account_id":6052716,"reputation":1842,"user_id":4859182,"accept_rate":92,"display_name":"solomkinmv"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1530305889,"creation_date":1497373417,"answer_id":44527555,"question_id":2758224,"body_markdown":"An assertion allows for detecting defects in the code. You can turn on assertions for testing and debugging while leaving them off when your program is in production.\r\n\r\nWhy assert something when you know it is true? It is only true when everything is working properly. If the program has a defect, it might not actually be true. Detecting this earlier in the process lets you know something is wrong.\r\n\r\nAn `assert` statement contains this statement along with an optional `String` message.\r\n\r\nThe syntax for an assert statement has two forms:\r\n\r\n    assert boolean_expression;\r\n    assert boolean_expression: error_message;\r\n\r\nHere are some basic rules which govern where assertions should be used and where they should not be used. Assertions **should** be used for: \r\n\r\n1. Validating input parameters of a private method. **NOT** for public methods. `public` methods should throw regular exceptions when passed bad parameters. \r\n\r\n2. Anywhere in the program to ensure the validity of a fact which is almost certainly true. \r\n\r\nFor example, if you are sure that it will only be either 1 or 2, you can use an assertion like this:\r\n\r\n    ...\r\n    if (i == 1) &#160;&#160;&#160;{\r\n        ...\r\n    }\r\n    else if (i == 2) &#160;&#160;&#160;{\r\n        ...\r\n    } else {\r\n        assert false : &quot;cannot happen. i is &quot; + i;\r\n    }\r\n    ...\r\n\r\n3. Validating post conditions at the end of any method. This means, after executing the business logic, you can use assertions to ensure that the internal state of your variables or results is consistent with what you expect. For example, a method that opens a socket or a file can use an assertion at the end to ensure that the socket or the file is indeed opened. \r\n\r\nAssertions **should not** be used for: \r\n\r\n1. Validating input parameters of a public method. Since assertions may not always be executed, the regular exception mechanism should be used. \r\n\r\n2. Validating constraints on something that is input by the user. Same as above. \r\n\r\n3. Should not be used for side effects. \r\n\r\nFor example this is not a proper use because here the assertion is used for its side effect of calling of the `doSomething()` method.\r\n\r\n\r\n    public boolean doSomething() {\r\n    ... &#160;&#160;&#160;\r\n    }\r\n    public void someMethod() { &#160;&#160;&#160;&#160;&#160;&#160;\r\n    assert doSomething(); \r\n    }\r\n\r\nThe only case where this could be justified is when you are trying to find out whether or not assertions are enabled in your code:   &#160;&#160;\r\n\r\n    boolean enabled = false; &#160;&#160;&#160;\r\n    assert enabled = true; &#160;&#160;&#160;\r\n    if (enabled) {\r\n        System.out.println(&quot;Assertions are enabled&quot;);\r\n    } else {\r\n        System.out.println(&quot;Assertions are disabled&quot;);\r\n    }\r\n","title":"What are assertions in Java and when should they be used?","body":"<p>An assertion allows for detecting defects in the code. You can turn on assertions for testing and debugging while leaving them off when your program is in production.</p>\n\n<p>Why assert something when you know it is true? It is only true when everything is working properly. If the program has a defect, it might not actually be true. Detecting this earlier in the process lets you know something is wrong.</p>\n\n<p>An <code>assert</code> statement contains this statement along with an optional <code>String</code> message.</p>\n\n<p>The syntax for an assert statement has two forms:</p>\n\n<pre><code>assert boolean_expression;\nassert boolean_expression: error_message;\n</code></pre>\n\n<p>Here are some basic rules which govern where assertions should be used and where they should not be used. Assertions <strong>should</strong> be used for: </p>\n\n<ol>\n<li><p>Validating input parameters of a private method. <strong>NOT</strong> for public methods. <code>public</code> methods should throw regular exceptions when passed bad parameters. </p></li>\n<li><p>Anywhere in the program to ensure the validity of a fact which is almost certainly true. </p></li>\n</ol>\n\n<p>For example, if you are sure that it will only be either 1 or 2, you can use an assertion like this:</p>\n\n<pre><code>...\nif (i == 1)    {\n    ...\n}\nelse if (i == 2)    {\n    ...\n} else {\n    assert false : \"cannot happen. i is \" + i;\n}\n...\n</code></pre>\n\n<ol start=\"3\">\n<li>Validating post conditions at the end of any method. This means, after executing the business logic, you can use assertions to ensure that the internal state of your variables or results is consistent with what you expect. For example, a method that opens a socket or a file can use an assertion at the end to ensure that the socket or the file is indeed opened. </li>\n</ol>\n\n<p>Assertions <strong>should not</strong> be used for: </p>\n\n<ol>\n<li><p>Validating input parameters of a public method. Since assertions may not always be executed, the regular exception mechanism should be used. </p></li>\n<li><p>Validating constraints on something that is input by the user. Same as above. </p></li>\n<li><p>Should not be used for side effects. </p></li>\n</ol>\n\n<p>For example this is not a proper use because here the assertion is used for its side effect of calling of the <code>doSomething()</code> method.</p>\n\n<pre><code>public boolean doSomething() {\n...    \n}\npublic void someMethod() {       \nassert doSomething(); \n}\n</code></pre>\n\n<p>The only case where this could be justified is when you are trying to find out whether or not assertions are enabled in your code:     </p>\n\n<pre><code>boolean enabled = false;    \nassert enabled = true;    \nif (enabled) {\n    System.out.println(\"Assertions are enabled\");\n} else {\n    System.out.println(\"Assertions are disabled\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1887489,"reputation":8619,"user_id":4811873,"accept_rate":6,"display_name":"Mike Robinson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1501524343,"creation_date":1501524343,"answer_id":45422538,"question_id":2758224,"body_markdown":"To recap *(and this is true of many languages not just Java):*\r\n\r\n&quot;assert&quot; is primarily used as a debugging aid by software developers during the debugging process. Assert-messages should never appear. Many languages provide a compile-time option that will cause all &quot;asserts&quot; to be ignored, for use in generating &quot;production&quot; code.\r\n\r\n&quot;exceptions&quot; are a handy way to handle all kinds of error conditions, whether or not they represent logic errors, because, if you run into an error-condition such that you cannot continue, you can simply &quot;throw them up into the air,&quot; from wherever you are, expecting someone else out there to be ready to &quot;catch&quot; them. Control is transferred in one step, straight from the code that threw the exception, straight to the catcher&#39;s mitt. *(And the catcher can see the complete backtrace of calls that had taken place.)* \r\n\r\nFurthermore, callers of that subroutine don&#39;t have to check to see if the subroutine succeeded: *&quot;if we&#39;re here now, it must have succeeded, because otherwise it would have thrown an exception and we wouldn&#39;t be here now!&quot;* This simple strategy makes code-design and debugging much, much easier.\r\n\r\nExceptions conveniently allow fatal-error conditions to be what they are: &quot;exceptions to the rule.&quot; And, for them to be handled by a code-path that is also &quot;an exception to the rule ... *&quot;fly ball!&quot;*","title":"What are assertions in Java and when should they be used?","body":"<p>To recap <em>(and this is true of many languages not just Java):</em></p>\n\n<p>\"assert\" is primarily used as a debugging aid by software developers during the debugging process. Assert-messages should never appear. Many languages provide a compile-time option that will cause all \"asserts\" to be ignored, for use in generating \"production\" code.</p>\n\n<p>\"exceptions\" are a handy way to handle all kinds of error conditions, whether or not they represent logic errors, because, if you run into an error-condition such that you cannot continue, you can simply \"throw them up into the air,\" from wherever you are, expecting someone else out there to be ready to \"catch\" them. Control is transferred in one step, straight from the code that threw the exception, straight to the catcher's mitt. <em>(And the catcher can see the complete backtrace of calls that had taken place.)</em> </p>\n\n<p>Furthermore, callers of that subroutine don't have to check to see if the subroutine succeeded: <em>\"if we're here now, it must have succeeded, because otherwise it would have thrown an exception and we wouldn't be here now!\"</em> This simple strategy makes code-design and debugging much, much easier.</p>\n\n<p>Exceptions conveniently allow fatal-error conditions to be what they are: \"exceptions to the rule.\" And, for them to be handled by a code-path that is also \"an exception to the rule ... <em>\"fly ball!\"</em></p>\n"},{"tags":[],"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1572386661,"creation_date":1540146339,"answer_id":52918492,"question_id":2758224,"body_markdown":"Assertions are checks which may get switched off. They&#39;re rarely used. Why?\r\n\r\n- They must not be used for checking public method arguments as you have no control over them.\r\n- They should not be used for simple checks like `result != null` as such checks are very fast and there&#39;s hardly anything to save.\r\n\r\nSo, what&#39;s left? *Expensive* checks for conditions really *expected* to be true. A good example would be the invariants of a data structure like RB-tree. Actually, in `ConcurrentHashMap` of JDK8, there are a few such meaningful asserts for the `TreeNodes`.\r\n\r\n- You really don&#39;t want to switch them on in production as they could easily dominate the run time.\r\n- You may want to switch them on or off during tests.\r\n- You definitely want to switch them on when working on the code.\r\n\r\n___\r\n\r\nSometimes, the check is not really expensive, but at the same time, you&#39;re pretty sure, it&#39;ll pass. In my code, there&#39;s e.g.,\r\n\r\n    assert Sets.newHashSet(userIds).size() == userIds.size();\r\n\r\nwhere I&#39;m pretty sure that the list I just created has unique elements, but I wanted to document and double check it.","title":"What are assertions in Java and when should they be used?","body":"<p>Assertions are checks which may get switched off. They're rarely used. Why?</p>\n\n<ul>\n<li>They must not be used for checking public method arguments as you have no control over them.</li>\n<li>They should not be used for simple checks like <code>result != null</code> as such checks are very fast and there's hardly anything to save.</li>\n</ul>\n\n<p>So, what's left? <em>Expensive</em> checks for conditions really <em>expected</em> to be true. A good example would be the invariants of a data structure like RB-tree. Actually, in <code>ConcurrentHashMap</code> of JDK8, there are a few such meaningful asserts for the <code>TreeNodes</code>.</p>\n\n<ul>\n<li>You really don't want to switch them on in production as they could easily dominate the run time.</li>\n<li>You may want to switch them on or off during tests.</li>\n<li>You definitely want to switch them on when working on the code.</li>\n</ul>\n\n<hr>\n\n<p>Sometimes, the check is not really expensive, but at the same time, you're pretty sure, it'll pass. In my code, there's e.g.,</p>\n\n<pre><code>assert Sets.newHashSet(userIds).size() == userIds.size();\n</code></pre>\n\n<p>where I'm pretty sure that the list I just created has unique elements, but I wanted to document and double check it.</p>\n"},{"tags":[],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1602847398,"creation_date":1602846121,"answer_id":64387889,"question_id":2758224,"body_markdown":"Here&#39;s another example. I wrote a method that finds the median of the values in two sorted arrays. The method assumes the arrays are already sorted. For performance reasons, it should NOT sort the arrays first, or even check to ensure they&#39;re sorted. However, it&#39;s a serious bug to call this method with unsorted data, and we want those bugs to get caught early, in the development phase. So here&#39;s how I handled those seemingly conflicting goals:\r\n\r\n    public static int medianOf(int[] a, int[] b) {\r\n      assert assertionOnlyIsSorted(a);      // Assertion is order n\r\n      assert assertionOnlyIsSorted(b);\r\n      ... // rest of implementation goes here. Algorithm is order log(n)\r\n    }\r\n\r\n    public static boolean assertionOnlyIsSorted(int[] array) {\r\n      for (int i=1; i&lt;array.length; ++i) {\r\n        if (array[i] &lt; array[i-1]) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n    }\r\n\r\nThis way, the test, which is slow, is only performed during the development phase, where speed is less important than catching bugs. You want the `medianOf()` method to have log(n) performance, but the &quot;is sorted&quot; test is order n. So I put it inside an assertion, to limit its use to the development phase, and I give it a name that makes it clear it&#39;s not suitable for production.\r\n\r\nThis way I have the best of both worlds. In development, I know that any method that calls this incorrectly will get caught and fixed. And I know that the slow test to do so won&#39;t affect performance in production. (It&#39;s also a good illustration of why you want to leave assertions off in production, but turn them on in development.)","title":"What are assertions in Java and when should they be used?","body":"<p>Here's another example. I wrote a method that finds the median of the values in two sorted arrays. The method assumes the arrays are already sorted. For performance reasons, it should NOT sort the arrays first, or even check to ensure they're sorted. However, it's a serious bug to call this method with unsorted data, and we want those bugs to get caught early, in the development phase. So here's how I handled those seemingly conflicting goals:</p>\n<pre><code>public static int medianOf(int[] a, int[] b) {\n  assert assertionOnlyIsSorted(a);      // Assertion is order n\n  assert assertionOnlyIsSorted(b);\n  ... // rest of implementation goes here. Algorithm is order log(n)\n}\n\npublic static boolean assertionOnlyIsSorted(int[] array) {\n  for (int i=1; i&lt;array.length; ++i) {\n    if (array[i] &lt; array[i-1]) {\n      return false;\n    }\n    return true;\n  }\n}\n</code></pre>\n<p>This way, the test, which is slow, is only performed during the development phase, where speed is less important than catching bugs. You want the <code>medianOf()</code> method to have log(n) performance, but the &quot;is sorted&quot; test is order n. So I put it inside an assertion, to limit its use to the development phase, and I give it a name that makes it clear it's not suitable for production.</p>\n<p>This way I have the best of both worlds. In development, I know that any method that calls this incorrectly will get caught and fixed. And I know that the slow test to do so won't affect performance in production. (It's also a good illustration of why you want to leave assertions off in production, but turn them on in development.)</p>\n"},{"tags":[],"owner":{"account_id":1911430,"reputation":2483,"user_id":1725151,"accept_rate":67,"display_name":"Guildenstern"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653059529,"creation_date":1653059529,"answer_id":72321218,"question_id":2758224,"body_markdown":"I don’t know what the history is behind this feature in Java. But I have an idea about what `assert` can be used for that I don’t think has been brought up in this thread.\r\n\r\nSay you have an enum which you switch on:(†)\r\n\r\n    public enum Veggie {\r\n        CAULIFLOWER,\r\n        CARROT,\r\n    }\r\n\r\n    // Another class\r\n    switch (veggie) {\r\n        case CAULIFLOWER: value = 5;\r\n        case CARROT: value = 3;\r\n    }\r\n\r\n---\r\n\r\n†: Maybe good Java compilers/tooling will catch missing enum values statically. In that case just imagine that you find some bug and you fix it. Then you can add a regression test in the code proper using the technique described below.\r\n\r\n---\r\n\r\nThere’s no good _default_ case for this. So you really want to make sure that you cover all values. You want to make sure that you update the switch block whenever you add a new enum variant:\r\n\r\n    public enum Veggie {\r\n        CAULIFLOWER,\r\n        CARROT,\r\n        TOMATO,\r\n    }\r\n\r\nBut it turns out that this code is called right when the user loads a particular view in your web application. And the view can persist in spite of this error: it would be a bug but it’s not worth interfering with the loading of the view (let’s say that the user is just presented with a few wrong numbers). So you just log a warning:\r\n\r\n    switch (veggie) {\r\n        case CAULIFLOWER: value = 5;\r\n        case CARROT: value = 3;\r\n        default: nonExhaustiveMatchOnEnum();\r\n    // […]\r\n    public static void nonExhaustiveMatchOnEnum() {\r\n        String errorMessage: &quot;Missing veggie&quot;;\r\n        logger.warn(errorMessage);\r\n    }\r\n\r\nBut you _do_ want this fail immediately when you are developing the code—you the developer can fix such a bug in five minutes, unlike the users of your web application.\r\n\r\nSo you can just add an `assert false`:\r\n\r\n    public static void nonExhaustiveMatchOnEnum() {\r\n        String errorMessage: &quot;Missing veggie&quot;;\r\n        assert false : errorMessage;\r\n        logger.warn(errorMessage);\r\n    }\r\n\r\nNow the app will crash locally but only log a warning on production (assuming you use `java -ea` locally but not in production).","title":"What are assertions in Java and when should they be used?","body":"<p>I don’t know what the history is behind this feature in Java. But I have an idea about what <code>assert</code> can be used for that I don’t think has been brought up in this thread.</p>\n<p>Say you have an enum which you switch on:(†)</p>\n<pre><code>public enum Veggie {\n    CAULIFLOWER,\n    CARROT,\n}\n\n// Another class\nswitch (veggie) {\n    case CAULIFLOWER: value = 5;\n    case CARROT: value = 3;\n}\n</code></pre>\n<hr />\n<p>†: Maybe good Java compilers/tooling will catch missing enum values statically. In that case just imagine that you find some bug and you fix it. Then you can add a regression test in the code proper using the technique described below.</p>\n<hr />\n<p>There’s no good <em>default</em> case for this. So you really want to make sure that you cover all values. You want to make sure that you update the switch block whenever you add a new enum variant:</p>\n<pre><code>public enum Veggie {\n    CAULIFLOWER,\n    CARROT,\n    TOMATO,\n}\n</code></pre>\n<p>But it turns out that this code is called right when the user loads a particular view in your web application. And the view can persist in spite of this error: it would be a bug but it’s not worth interfering with the loading of the view (let’s say that the user is just presented with a few wrong numbers). So you just log a warning:</p>\n<pre><code>switch (veggie) {\n    case CAULIFLOWER: value = 5;\n    case CARROT: value = 3;\n    default: nonExhaustiveMatchOnEnum();\n// […]\npublic static void nonExhaustiveMatchOnEnum() {\n    String errorMessage: &quot;Missing veggie&quot;;\n    logger.warn(errorMessage);\n}\n</code></pre>\n<p>But you <em>do</em> want this fail immediately when you are developing the code—you the developer can fix such a bug in five minutes, unlike the users of your web application.</p>\n<p>So you can just add an <code>assert false</code>:</p>\n<pre><code>public static void nonExhaustiveMatchOnEnum() {\n    String errorMessage: &quot;Missing veggie&quot;;\n    assert false : errorMessage;\n    logger.warn(errorMessage);\n}\n</code></pre>\n<p>Now the app will crash locally but only log a warning on production (assuming you use <code>java -ea</code> locally but not in production).</p>\n"}],"owner":{"account_id":98821,"reputation":90665,"user_id":267269,"accept_rate":86,"display_name":"Praveen"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":586649,"favorite_count":0,"down_vote_count":5,"up_vote_count":727,"accepted_answer_id":2758645,"answer_count":20,"score":722,"last_activity_date":1681581885,"creation_date":1272892316,"question_id":2758224,"body_markdown":"What are some **real life examples** to understand the key role of the Java `assert` keyword?","title":"What are assertions in Java and when should they be used?","body":"<p>What are some <strong>real life examples</strong> to understand the key role of the Java <code>assert</code> keyword?</p>\n"},{"tags":["java","android","data-binding","android-edittext"],"owner":{"account_id":6024811,"reputation":351,"user_id":5518907,"accept_rate":30,"display_name":"Сергей Соколов"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681580782,"creation_date":1681580782,"question_id":76023807,"body_markdown":"I have an activity, with EditText fields. A use data binding, so I can get String value from EditText like this:\r\n\r\n    binding.printWidth.getText().toString()\r\n\r\nIs there a way to get all id&#39;s and values from all EditText in activity? Something like:\r\n\r\n    for (int a=0;a&lt;binding.EditCount;a++)\r\n    {\r\n    list.add(binding.edit(a).id,binding.edit(a).value);\r\n    }\r\nI understand, that I can use classic way, like:\r\n\r\n    ArrayList&lt;EditText&gt; myEditTextList = new ArrayList&lt;EditText&gt;();\r\n    for( int i = 0; i &lt; myLayout.getChildCount(); i++ )\r\n      if( myLayout.getChildAt( i ) instanceof EditText )\r\n        myEditTextList.add( (EditText) myLayout.getChildAt( i ) );\r\nBut is tere a way to do something like this with databinding?","title":"Android binding - get all EditText values","body":"<p>I have an activity, with EditText fields. A use data binding, so I can get String value from EditText like this:</p>\n<pre><code>binding.printWidth.getText().toString()\n</code></pre>\n<p>Is there a way to get all id's and values from all EditText in activity? Something like:</p>\n<pre><code>for (int a=0;a&lt;binding.EditCount;a++)\n{\nlist.add(binding.edit(a).id,binding.edit(a).value);\n}\n</code></pre>\n<p>I understand, that I can use classic way, like:</p>\n<pre><code>ArrayList&lt;EditText&gt; myEditTextList = new ArrayList&lt;EditText&gt;();\nfor( int i = 0; i &lt; myLayout.getChildCount(); i++ )\n  if( myLayout.getChildAt( i ) instanceof EditText )\n    myEditTextList.add( (EditText) myLayout.getChildAt( i ) );\n</code></pre>\n<p>But is tere a way to do something like this with databinding?</p>\n"},{"tags":["java","spring","cookies","axios","subdomain"],"owner":{"account_id":21023381,"reputation":23,"user_id":15449203,"display_name":"Johni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681580246,"creation_date":1681580246,"question_id":76023759,"body_markdown":"I have a front-end application running on `app.mywebsite.com` and a backend API running on `api.mywebsite.com`. I&#39;m trying to send a cookie from the front-end to the backend using axios, but the cookie is not being sent in the request. My setup is as follows:\r\n\r\nI&#39;m making a request using axios with withCredentials: true:\r\n\r\n    axios\r\n      .get(authConfig.refreshTokenEndpoint, { withCredentials: true })\r\n      .then((res) =&gt; {\r\n        console.log(&quot;Got new access token&quot;, res.data);\r\n        setAccessToken(res.data.access_token);\r\n        if (requestNewUserInfo) {\r\n          requestUpdatedUserInfo();\r\n        }\r\n      })\r\n      .catch(() =&gt; handleLogout());\r\n\r\nI have a CORS configuration that allows the front-end subdomain and credentials:\r\n\r\n    @Configuration\r\n    public class CorsConfiguration {\r\n        @Value(&quot;${navaship.webapp.url}&quot;)\r\n        private String webAppUrl;\r\n    \r\n        @Bean\r\n        public WebMvcConfigurer corsConfigurer() {\r\n            return new WebMvcConfigurer() {\r\n                @Override\r\n                public void addCorsMappings(CorsRegistry registry) {\r\n                    registry.addMapping(&quot;/api/v*/auth/refresh-token&quot;)\r\n                            .allowedOrigins(webAppUrl)\r\n                            .allowedMethods(&quot;GET&quot;)\r\n                            .allowCredentials(true);\r\n    \r\n                    registry.addMapping(&quot;/api/v*/**&quot;)\r\n                            .allowedOrigins(webAppUrl)\r\n                            .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\nThe SameSite attribute is set to &quot;None&quot; for production, and both the front-end and backend applications are served over HTTPS:\r\n\r\n    private String getRefreshTokenCookie(String refreshToken) {\r\n        boolean isProdProfile = profileHelper.isProdProfileActive();\r\n        return ResponseCookie.from(REFRESH_TOKEN_COOKIE_KEY, refreshToken)\r\n                .maxAge(refreshTokenExpirationMs / 1000)\r\n                .httpOnly(true)\r\n                .sameSite(&quot;None&quot;)\r\n                .secure(isProdProfile)\r\n                .path(&quot;/api/v1/auth/refresh-token&quot;)\r\n                .build().toString();\r\n    }\r\n\r\nDespite this setup, the cookie is not being sent to the backend. I have checked the browser console for error messages and warnings related to cookies or CORS but found nothing. I have also verified that the cookie is created with the correct attributes.\r\n\r\nIn the backend, when trying to access the cookie from the request, the headerRefreshToken variable is null:\r\n\r\n    @GetMapping(&quot;/refresh-token&quot;)\r\n    public ResponseEntity&lt;RefreshTokenResponse&gt; refreshToken(HttpServletRequest request, HttpServletResponse response) {\r\n        Cookie[] cookies = request.getCookies();\r\n        String headerRefreshToken = null;\r\n    \r\n        if (cookies != null) {\r\n            for (Cookie cookie : cookies) {\r\n                if (REFRESH_TOKEN_COOKIE_KEY.equals(cookie.getName())) {\r\n                    headerRefreshToken = cookie.getValue();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nHow can I resolve this issue and ensure the cookie is sent from the front-end to the backend?\r\n\r\n","title":"Cookie not being sent to the backend in a cross-subdomain setup with axios and Spring Boot","body":"<p>I have a front-end application running on <code>app.mywebsite.com</code> and a backend API running on <code>api.mywebsite.com</code>. I'm trying to send a cookie from the front-end to the backend using axios, but the cookie is not being sent in the request. My setup is as follows:</p>\n<p>I'm making a request using axios with withCredentials: true:</p>\n<pre><code>axios\n  .get(authConfig.refreshTokenEndpoint, { withCredentials: true })\n  .then((res) =&gt; {\n    console.log(&quot;Got new access token&quot;, res.data);\n    setAccessToken(res.data.access_token);\n    if (requestNewUserInfo) {\n      requestUpdatedUserInfo();\n    }\n  })\n  .catch(() =&gt; handleLogout());\n</code></pre>\n<p>I have a CORS configuration that allows the front-end subdomain and credentials:</p>\n<pre><code>@Configuration\npublic class CorsConfiguration {\n    @Value(&quot;${navaship.webapp.url}&quot;)\n    private String webAppUrl;\n\n    @Bean\n    public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry.addMapping(&quot;/api/v*/auth/refresh-token&quot;)\n                        .allowedOrigins(webAppUrl)\n                        .allowedMethods(&quot;GET&quot;)\n                        .allowCredentials(true);\n\n                registry.addMapping(&quot;/api/v*/**&quot;)\n                        .allowedOrigins(webAppUrl)\n                        .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;);\n            }\n        };\n    }\n}\n</code></pre>\n<p>The SameSite attribute is set to &quot;None&quot; for production, and both the front-end and backend applications are served over HTTPS:</p>\n<pre><code>private String getRefreshTokenCookie(String refreshToken) {\n    boolean isProdProfile = profileHelper.isProdProfileActive();\n    return ResponseCookie.from(REFRESH_TOKEN_COOKIE_KEY, refreshToken)\n            .maxAge(refreshTokenExpirationMs / 1000)\n            .httpOnly(true)\n            .sameSite(&quot;None&quot;)\n            .secure(isProdProfile)\n            .path(&quot;/api/v1/auth/refresh-token&quot;)\n            .build().toString();\n}\n</code></pre>\n<p>Despite this setup, the cookie is not being sent to the backend. I have checked the browser console for error messages and warnings related to cookies or CORS but found nothing. I have also verified that the cookie is created with the correct attributes.</p>\n<p>In the backend, when trying to access the cookie from the request, the headerRefreshToken variable is null:</p>\n<pre><code>@GetMapping(&quot;/refresh-token&quot;)\npublic ResponseEntity&lt;RefreshTokenResponse&gt; refreshToken(HttpServletRequest request, HttpServletResponse response) {\n    Cookie[] cookies = request.getCookies();\n    String headerRefreshToken = null;\n\n    if (cookies != null) {\n        for (Cookie cookie : cookies) {\n            if (REFRESH_TOKEN_COOKIE_KEY.equals(cookie.getName())) {\n                headerRefreshToken = cookie.getValue();\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n<p>How can I resolve this issue and ensure the cookie is sent from the front-end to the backend?</p>\n"},{"tags":["java","android","zebra-printers","zpl"],"owner":{"account_id":3206417,"reputation":21,"user_id":3274619,"display_name":"Edmar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681580057,"creation_date":1674788387,"question_id":75253700,"body_markdown":"Is there a way in Android/Java to convert/replace ZPL commands after printing on a Zebra printer and create a new file without the ZPL commands?\r\n\r\nExample zpl:\r\n```\r\n^XA\r\n^CF0,30\r\n^FO220,115^FDReceipt No: 1000^FS\r\n^FO220,155^FDTesting: 1234^FS\r\n^FO220,195^FDResult: 1234^FS\r\n^XZ\r\n```\r\nDesired result:\r\n```\r\nReceipt No: 1000\r\nTesting: 1234\r\nResult: 1234\r\n```\r\n\r\n\r\nResult should be without ZPL commands ","title":"Convert or remove ZPL commands to a text file using Android or Java?","body":"<p>Is there a way in Android/Java to convert/replace ZPL commands after printing on a Zebra printer and create a new file without the ZPL commands?</p>\n<p>Example zpl:</p>\n<pre><code>^XA\n^CF0,30\n^FO220,115^FDReceipt No: 1000^FS\n^FO220,155^FDTesting: 1234^FS\n^FO220,195^FDResult: 1234^FS\n^XZ\n</code></pre>\n<p>Desired result:</p>\n<pre><code>Receipt No: 1000\nTesting: 1234\nResult: 1234\n</code></pre>\n<p>Result should be without ZPL commands</p>\n"},{"tags":["java","server","terminal","centos","minecraft-forge"],"owner":{"account_id":27182064,"reputation":1,"user_id":20717144,"display_name":"Leonardo Gallo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682250538,"answer_count":0,"score":0,"last_activity_date":1681579128,"creation_date":1681579128,"question_id":76023677,"body_markdown":"I do infact have jdk-20 installed. Below is the result of executing ./run.sh\r\n\r\n[13:06:00] [main/WARN] [ne.mi.fm.lo.mo.ModFileParser/LOADING]: Mod file /home/lgallo/Minecraft_Server/Server/libraries/net/minecraftforge/fmlcore/1.18.2-40.2.1/fmlcore-1.18.2-40.2.1.jar is missing mods.toml file\r\n[13:06:00] [main/WARN] [ne.mi.fm.lo.mo.ModFileParser/LOADING]: Mod file /home/lgallo/Minecraft_Server/Server/libraries/net/minecraftforge/javafmllanguage/1.18.2-40.2.1/javafmllanguage-1.18.2-40.2.1.jar is missing mods.toml file\r\n[13:06:00] [main/WARN] [ne.mi.fm.lo.mo.ModFileParser/LOADING]: Mod file /home/lgallo/Minecraft_Server/Server/libraries/net/minecraftforge/lowcodelanguage/1.18.2-40.2.1/lowcodelanguage-1.18.2-40.2.1.jar is missing mods.toml file\r\n[13:06:00] [main/WARN] [ne.mi.fm.lo.mo.ModFileParser/LOADING]: Mod file /home/lgallo/Minecraft_Server/Server/libraries/net/minecraftforge/mclanguage/1.18.2-40.2.1/mclanguage-1.18.2-40.2.1.jar is missing mods.toml file\r\n[13:06:00] [main/INFO] [ne.mi.fm.lo.mo.JarInJarDependencyLocator/]: Found 1 dependencies adding them to mods collection\r\n[13:06:00] [main/ERROR] [ne.mi.fm.lo.ModSorter/LOADING]: Missing or unsupported mandatory dependencies:\r\n\tMod ID: &#39;forge&#39;, Requested by: &#39;chunky&#39;, Expected range: &#39;[41,)&#39;, Actual version: &#39;40.2.1&#39;\r\n\tMod ID: &#39;minecraft&#39;, Requested by: &#39;chunky&#39;, Expected range: &#39;[1.19.3,1.20)&#39;, Actual version: &#39;1.18.2&#39;\r\n[13:06:04] [main/INFO] [mixin/]: Compatibility level set to JAVA_17\r\n[13:06:04] [main/ERROR] [mixin/]: Mixin config pmmo.mixins.json does not specify &quot;minVersion&quot; property\r\n[13:06:04] [main/ERROR] [mixin/]: Mixin config rei-jei-internals-workaround.mixins.json does not specify &quot;minVersion&quot; property\r\n[13:06:04] [main/ERROR] [mixin/]: Mixin config itshallnottick.mixins.json does not specify &quot;minVersion&quot; property\r\n[13:06:04] [main/ERROR] [mixin/]: Mixin config polylib.mixins.json does not specify &quot;minVersion&quot; property\r\n[13:06:05] [main/ERROR] [mixin/]: Mixin config rei.mixins.json does not specify &quot;minVersion&quot; property\r\n[13:06:05] [main/INFO] [mixin/]: Successfully loaded Mixin Connector [com.sonicether.soundphysics.MixinConnector]\r\n[13:06:05] [main/INFO] [mixin/]: Successfully loaded Mixin Connector [tictim.paraglider.MixinConnector]\r\n[13:06:05] [main/INFO] [mixin/]: Successfully loaded Mixin Connector [ca.spottedleaf.starlight.mixin.MixinConnector]\r\n[13:06:05] [main/INFO] [cp.mo.mo.LaunchServiceHandler/MODLAUNCHER]: Launching target &#39;forgeserver&#39; with arguments []\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;wildbackport-forge-refmap.json&#39; for wildbackport.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;yungsbridges.refmap.json&#39; for yungsbridges.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;yungsbridges.refmap.json&#39; for yungsbridges_forge.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;yungsextras.refmap.json&#39; for yungsextras.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;yungsextras.refmap.json&#39; for yungsextras_forge.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;untamedwilds.refmap.json&#39; for untamedwilds.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;thirst.refmap.json&#39; for villagercomfort.mixin.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;idas.refmap.json&#39; for idas.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;antiqueatlas-forge-refmap.json&#39; for antiqueatlas.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;insanelib.refmap.json&#39; for insanelib.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;piglinproliferation.refmap.json&#39; for piglinproliferation.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;polylib-common-refmap.json&#39; for polylib.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;creativecore.mixins.refmap.json&#39; for creativecore.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:05] [main/WARN] [mixin/]: Reference map &#39;nethersdelight.refmap.json&#39; for nethersdelight.mixins.json could not be read. If this is a development environment you can ignore this message\r\n[13:06:06] [main/WARN] [mixin/]: Error loading class: net/minecraft/client/model/IronGolemModel (java.lang.ClassNotFoundException: net.minecraft.client.model.IronGolemModel)\r\n[13:06:06] [main/WARN] [mixin/]: @Mixin target net.minecraft.client.model.IronGolemModel was not found strawgolem.mixins.json:IronGolemModelMixin\r\n[13:06:06] [main/WARN] [mixin/]: Error loading class: net/minecraft/client/model/geom/ModelPart (java.lang.ClassNotFoundException: net.minecraft.client.model.geom.ModelPart)\r\n[13:06:06] [main/WARN] [mixin/]: @Mixin target net.minecraft.client.model.geom.ModelPart was not found wildbackport-common.mixins.json:access.ModelPartAccessor\r\n[13:06:06] [main/FATAL] [ne.mi.fm.lo.RuntimeDistCleaner/DISTXFORM]: Attempted to load class net/minecraft/client/renderer/RenderType for invalid dist DEDICATED_SERVER\r\n[13:06:06] [main/WARN] [mixin/]: Error loading class: net/minecraft/client/renderer/RenderType (java.lang.RuntimeException: Attempted to load class net/minecraft/client/renderer/RenderType for invalid dist DEDICATED_SERVER)\r\n[13:06:06] [main/WARN] [mixin/]: @Mixin target net.minecraft.client.renderer.RenderType was not found wildbackport-common.mixins.json:access.RenderTypeAccessor\r\n[13:06:06] [main/FATAL] [ne.mi.fm.lo.RuntimeDistCleaner/DISTXFORM]: Attempted to load class net/minecraft/client/renderer/Sheets for invalid dist DEDICATED_SERVER\r\n[13:06:06] [main/WARN] [mixin/]: Error loading class: net/minecraft/client/renderer/Sheets (java.lang.RuntimeException: Attempted to load class net/minecraft/client/renderer/Sheets for invalid dist DEDICATED_SERVER)\r\n[13:06:06] [main/WARN] [mixin/]: @Mixin target net.minecraft.client.renderer.Sheets was not found wildbackport-common.mixins.json:access.SheetsAccessor\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/List (java.lang.IllegalArgumentException: Unsupported class file major version 64)\r\nException in thread &quot;main&quot; org.spongepowered.asm.mixin.transformer.throwables.MixinTransformerError: An unexpected critical error was encountered\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinProcessor.applyMixins(MixinProcessor.java:392)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinTransformer.transformClass(MixinTransformer.java:250)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.service.modlauncher.MixinTransformationHandler.processClass(MixinTransformationHandler.java:131)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.launch.MixinLaunchPluginLegacy.processClass(MixinLaunchPluginLegacy.java:131)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.serviceapi.ILaunchPluginService.processClassWithFlags(ILaunchPluginService.java:156)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.LaunchPluginHandler.offerClassNodeToPlugins(LaunchPluginHandler.java:88)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.ClassTransformer.transform(ClassTransformer.java:120)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.TransformingClassLoader.maybeTransformClassBytes(TransformingClassLoader.java:50)\r\n\tat cpw.mods.securejarhandler@1.0.3/cpw.mods.cl.ModuleClassLoader.readerToClass(ModuleClassLoader.java:110)\r\n\tat cpw.mods.securejarhandler@1.0.3/cpw.mods.cl.ModuleClassLoader.lambda$findClass$16(ModuleClassLoader.java:216)\r\n\tat cpw.mods.securejarhandler@1.0.3/cpw.mods.cl.ModuleClassLoader.loadFromModule(ModuleClassLoader.java:226)\r\n\tat cpw.mods.securejarhandler@1.0.3/cpw.mods.cl.ModuleClassLoader.findClass(ModuleClassLoader.java:216)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:633)\r\n\tat java.base/java.lang.Class.forName(Class.java:585)\r\n\tat java.base/java.lang.Class.forName(Class.java:560)\r\n\tat MC-BOOTSTRAP/fmlloader@1.18.2-40.2.1/net.minecraftforge.fml.loading.targets.CommonServerLaunchHandler.lambda$launchService$0(CommonServerLaunchHandler.java:32)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.LaunchServiceHandlerDecorator.launch(LaunchServiceHandlerDecorator.java:37)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.LaunchServiceHandler.launch(LaunchServiceHandler.java:53)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.LaunchServiceHandler.launch(LaunchServiceHandler.java:71)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.Launcher.run(Launcher.java:106)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.Launcher.main(Launcher.java:77)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.BootstrapLaunchConsumer.accept(BootstrapLaunchConsumer.java:26)\r\n\tat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.BootstrapLaunchConsumer.accept(BootstrapLaunchConsumer.java:23)\r\n\tat cpw.mods.bootstraplauncher@1.0.0/cpw.mods.bootstraplauncher.BootstrapLauncher.main(BootstrapLauncher.java:149)\r\nCaused by: org.spongepowered.asm.mixin.throwables.ClassMetadataNotFoundException: java.util.List\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinPreProcessorStandard.transformMethod(MixinPreProcessorStandard.java:754)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinPreProcessorStandard.transform(MixinPreProcessorStandard.java:739)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinPreProcessorStandard.attach(MixinPreProcessorStandard.java:310)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinPreProcessorStandard.createContextFor(MixinPreProcessorStandard.java:280)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinInfo.createContextFor(MixinInfo.java:1288)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinApplicatorStandard.apply(MixinApplicatorStandard.java:292)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.TargetClassContext.apply(TargetClassContext.java:383)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.TargetClassContext.applyMixins(TargetClassContext.java:365)\r\n\tat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinProcessor.applyMixins(MixinProcessor.java:363)\r\n\t... 23 more\r\n\r\n\r\nI tried uninstalling and reinstalling jdk, I completely reinstalled my OS to start from scratch with a gui to get the correct files for sure and I ended up with the same results as last time.","title":"Starting a forge minecraft server with the dawncraft modpack issues on Linux CentOS stream 9:","body":"<p>I do infact have jdk-20 installed. Below is the result of executing ./run.sh</p>\n<p>[13:06:00] [main/WARN] [ne.mi.fm.lo.mo.ModFileParser/LOADING]: Mod file /home/lgallo/Minecraft_Server/Server/libraries/net/minecraftforge/fmlcore/1.18.2-40.2.1/fmlcore-1.18.2-40.2.1.jar is missing mods.toml file\n[13:06:00] [main/WARN] [ne.mi.fm.lo.mo.ModFileParser/LOADING]: Mod file /home/lgallo/Minecraft_Server/Server/libraries/net/minecraftforge/javafmllanguage/1.18.2-40.2.1/javafmllanguage-1.18.2-40.2.1.jar is missing mods.toml file\n[13:06:00] [main/WARN] [ne.mi.fm.lo.mo.ModFileParser/LOADING]: Mod file /home/lgallo/Minecraft_Server/Server/libraries/net/minecraftforge/lowcodelanguage/1.18.2-40.2.1/lowcodelanguage-1.18.2-40.2.1.jar is missing mods.toml file\n[13:06:00] [main/WARN] [ne.mi.fm.lo.mo.ModFileParser/LOADING]: Mod file /home/lgallo/Minecraft_Server/Server/libraries/net/minecraftforge/mclanguage/1.18.2-40.2.1/mclanguage-1.18.2-40.2.1.jar is missing mods.toml file\n[13:06:00] [main/INFO] [ne.mi.fm.lo.mo.JarInJarDependencyLocator/]: Found 1 dependencies adding them to mods collection\n[13:06:00] [main/ERROR] [ne.mi.fm.lo.ModSorter/LOADING]: Missing or unsupported mandatory dependencies:\nMod ID: 'forge', Requested by: 'chunky', Expected range: '[41,)', Actual version: '40.2.1'\nMod ID: 'minecraft', Requested by: 'chunky', Expected range: '[1.19.3,1.20)', Actual version: '1.18.2'\n[13:06:04] [main/INFO] [mixin/]: Compatibility level set to JAVA_17\n[13:06:04] [main/ERROR] [mixin/]: Mixin config pmmo.mixins.json does not specify &quot;minVersion&quot; property\n[13:06:04] [main/ERROR] [mixin/]: Mixin config rei-jei-internals-workaround.mixins.json does not specify &quot;minVersion&quot; property\n[13:06:04] [main/ERROR] [mixin/]: Mixin config itshallnottick.mixins.json does not specify &quot;minVersion&quot; property\n[13:06:04] [main/ERROR] [mixin/]: Mixin config polylib.mixins.json does not specify &quot;minVersion&quot; property\n[13:06:05] [main/ERROR] [mixin/]: Mixin config rei.mixins.json does not specify &quot;minVersion&quot; property\n[13:06:05] [main/INFO] [mixin/]: Successfully loaded Mixin Connector [com.sonicether.soundphysics.MixinConnector]\n[13:06:05] [main/INFO] [mixin/]: Successfully loaded Mixin Connector [tictim.paraglider.MixinConnector]\n[13:06:05] [main/INFO] [mixin/]: Successfully loaded Mixin Connector [ca.spottedleaf.starlight.mixin.MixinConnector]\n[13:06:05] [main/INFO] [cp.mo.mo.LaunchServiceHandler/MODLAUNCHER]: Launching target 'forgeserver' with arguments []\n[13:06:05] [main/WARN] [mixin/]: Reference map 'wildbackport-forge-refmap.json' for wildbackport.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'yungsbridges.refmap.json' for yungsbridges.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'yungsbridges.refmap.json' for yungsbridges_forge.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'yungsextras.refmap.json' for yungsextras.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'yungsextras.refmap.json' for yungsextras_forge.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'untamedwilds.refmap.json' for untamedwilds.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'thirst.refmap.json' for villagercomfort.mixin.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'idas.refmap.json' for idas.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'antiqueatlas-forge-refmap.json' for antiqueatlas.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'insanelib.refmap.json' for insanelib.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'piglinproliferation.refmap.json' for piglinproliferation.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'polylib-common-refmap.json' for polylib.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'creativecore.mixins.refmap.json' for creativecore.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:05] [main/WARN] [mixin/]: Reference map 'nethersdelight.refmap.json' for nethersdelight.mixins.json could not be read. If this is a development environment you can ignore this message\n[13:06:06] [main/WARN] [mixin/]: Error loading class: net/minecraft/client/model/IronGolemModel (java.lang.ClassNotFoundException: net.minecraft.client.model.IronGolemModel)\n[13:06:06] [main/WARN] [mixin/]: @Mixin target net.minecraft.client.model.IronGolemModel was not found strawgolem.mixins.json:IronGolemModelMixin\n[13:06:06] [main/WARN] [mixin/]: Error loading class: net/minecraft/client/model/geom/ModelPart (java.lang.ClassNotFoundException: net.minecraft.client.model.geom.ModelPart)\n[13:06:06] [main/WARN] [mixin/]: @Mixin target net.minecraft.client.model.geom.ModelPart was not found wildbackport-common.mixins.json:access.ModelPartAccessor\n[13:06:06] [main/FATAL] [ne.mi.fm.lo.RuntimeDistCleaner/DISTXFORM]: Attempted to load class net/minecraft/client/renderer/RenderType for invalid dist DEDICATED_SERVER\n[13:06:06] [main/WARN] [mixin/]: Error loading class: net/minecraft/client/renderer/RenderType (java.lang.RuntimeException: Attempted to load class net/minecraft/client/renderer/RenderType for invalid dist DEDICATED_SERVER)\n[13:06:06] [main/WARN] [mixin/]: @Mixin target net.minecraft.client.renderer.RenderType was not found wildbackport-common.mixins.json:access.RenderTypeAccessor\n[13:06:06] [main/FATAL] [ne.mi.fm.lo.RuntimeDistCleaner/DISTXFORM]: Attempted to load class net/minecraft/client/renderer/Sheets for invalid dist DEDICATED_SERVER\n[13:06:06] [main/WARN] [mixin/]: Error loading class: net/minecraft/client/renderer/Sheets (java.lang.RuntimeException: Attempted to load class net/minecraft/client/renderer/Sheets for invalid dist DEDICATED_SERVER)\n[13:06:06] [main/WARN] [mixin/]: @Mixin target net.minecraft.client.renderer.Sheets was not found wildbackport-common.mixins.json:access.SheetsAccessor\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/Map$Entry (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/lang/invoke/MethodHandles$Lookup (java.lang.IllegalArgumentException: Unsupported class file major version 64)\n[13:06:07] [main/WARN] [mixin/]: Error loading class: java/util/List (java.lang.IllegalArgumentException: Unsupported class file major version 64)\nException in thread &quot;main&quot; org.spongepowered.asm.mixin.transformer.throwables.MixinTransformerError: An unexpected critical error was encountered\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinProcessor.applyMixins(MixinProcessor.java:392)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinTransformer.transformClass(MixinTransformer.java:250)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.service.modlauncher.MixinTransformationHandler.processClass(MixinTransformationHandler.java:131)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.launch.MixinLaunchPluginLegacy.processClass(MixinLaunchPluginLegacy.java:131)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.serviceapi.ILaunchPluginService.processClassWithFlags(ILaunchPluginService.java:156)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.LaunchPluginHandler.offerClassNodeToPlugins(LaunchPluginHandler.java:88)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.ClassTransformer.transform(ClassTransformer.java:120)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.TransformingClassLoader.maybeTransformClassBytes(TransformingClassLoader.java:50)\nat cpw.mods.securejarhandler@1.0.3/cpw.mods.cl.ModuleClassLoader.readerToClass(ModuleClassLoader.java:110)\nat cpw.mods.securejarhandler@1.0.3/cpw.mods.cl.ModuleClassLoader.lambda$findClass$16(ModuleClassLoader.java:216)\nat cpw.mods.securejarhandler@1.0.3/cpw.mods.cl.ModuleClassLoader.loadFromModule(ModuleClassLoader.java:226)\nat cpw.mods.securejarhandler@1.0.3/cpw.mods.cl.ModuleClassLoader.findClass(ModuleClassLoader.java:216)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:633)\nat java.base/java.lang.Class.forName(Class.java:585)\nat java.base/java.lang.Class.forName(Class.java:560)\nat MC-BOOTSTRAP/fmlloader@1.18.2-40.2.1/net.minecraftforge.fml.loading.targets.CommonServerLaunchHandler.lambda$launchService$0(CommonServerLaunchHandler.java:32)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.LaunchServiceHandlerDecorator.launch(LaunchServiceHandlerDecorator.java:37)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.LaunchServiceHandler.launch(LaunchServiceHandler.java:53)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.LaunchServiceHandler.launch(LaunchServiceHandler.java:71)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.Launcher.run(Launcher.java:106)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.Launcher.main(Launcher.java:77)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.BootstrapLaunchConsumer.accept(BootstrapLaunchConsumer.java:26)\nat MC-BOOTSTRAP/cpw.mods.modlauncher@9.1.3/cpw.mods.modlauncher.BootstrapLaunchConsumer.accept(BootstrapLaunchConsumer.java:23)\nat cpw.mods.bootstraplauncher@1.0.0/cpw.mods.bootstraplauncher.BootstrapLauncher.main(BootstrapLauncher.java:149)\nCaused by: org.spongepowered.asm.mixin.throwables.ClassMetadataNotFoundException: java.util.List\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinPreProcessorStandard.transformMethod(MixinPreProcessorStandard.java:754)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinPreProcessorStandard.transform(MixinPreProcessorStandard.java:739)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinPreProcessorStandard.attach(MixinPreProcessorStandard.java:310)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinPreProcessorStandard.createContextFor(MixinPreProcessorStandard.java:280)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinInfo.createContextFor(MixinInfo.java:1288)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinApplicatorStandard.apply(MixinApplicatorStandard.java:292)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.TargetClassContext.apply(TargetClassContext.java:383)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.TargetClassContext.applyMixins(TargetClassContext.java:365)\nat MC-BOOTSTRAP/org.spongepowered.mixin/org.spongepowered.asm.mixin.transformer.MixinProcessor.applyMixins(MixinProcessor.java:363)\n... 23 more</p>\n<p>I tried uninstalling and reinstalling jdk, I completely reinstalled my OS to start from scratch with a gui to get the correct files for sure and I ended up with the same results as last time.</p>\n"},{"tags":["java","concurrency","deadlock"],"comments":[{"owner":{"account_id":23428052,"reputation":6895,"user_id":17487348,"display_name":"Mushroomator"},"score":0,"creation_date":1681567160,"post_id":76022641,"comment_id":134079062,"body_markdown":"A deadlock can only occur when these [four conditions](https://en.wikipedia.org/wiki/Deadlock#Individually_necessary_and_jointly_sufficient_conditions_for_deadlock) are met. If any of them is not met, there&#39;s no deadlock. So you can check for yourself using these conditions","body":"A deadlock can only occur when these <a href=\"https://en.wikipedia.org/wiki/Deadlock#Individually_necessary_and_jointly_sufficient_conditions_for_deadlock\" rel=\"nofollow noreferrer\">four conditions</a> are met. If any of them is not met, there&#39;s no deadlock. So you can check for yourself using these conditions"},{"owner":{"account_id":19845884,"reputation":11,"user_id":14537546,"display_name":"Official Designer-"},"score":0,"creation_date":1681570272,"post_id":76022641,"comment_id":134079451,"body_markdown":"Well, the synchronise keyword enforces mutual exclusion therefore it cannot lead to deadlock however incorrect use of locks can lead to deadlock i.e by calling the single synchronised method  in the program again recursively. So the statement is false no? or am i confusing myself –","body":"Well, the synchronise keyword enforces mutual exclusion therefore it cannot lead to deadlock however incorrect use of locks can lead to deadlock i.e by calling the single synchronised method  in the program again recursively. So the statement is false no? or am i confusing myself –"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681576401,"post_id":76022641,"comment_id":134080316,"body_markdown":"One way to disprove the proposition that deadlock is impossible is to write an application with one `synchronized` method that can deadlock.  Hints:  1) consider a recursive method, 2) you need two locks (i.e. two objects) and two threads to get a deadlock.","body":"One way to disprove the proposition that deadlock is impossible is to write an application with one <code>synchronized</code> method that can deadlock.  Hints:  1) consider a recursive method, 2) you need two locks (i.e. two objects) and two threads to get a deadlock."},{"owner":{"account_id":19845884,"reputation":11,"user_id":14537546,"display_name":"Official Designer-"},"score":0,"creation_date":1681576937,"post_id":76022641,"comment_id":134080391,"body_markdown":"@StephenC yes i guess my statement &quot;f i was to have a java program with only a single synchronised method it cannot possibly deadlock right&quot; is false as a recursive method in the synchronised method can cause a deadlock","body":"@StephenC yes i guess my statement &quot;f i was to have a java program with only a single synchronised method it cannot possibly deadlock right&quot; is false as a recursive method in the synchronised method can cause a deadlock"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681577488,"creation_date":1681577488,"answer_id":76023552,"question_id":76022641,"body_markdown":"&gt; If i was to have a java program with only a single `synchronized` method it cannot possibly deadlock right?\r\n\r\nIncorrect.  Here is a counter example.\r\n\r\n     public class Demo {\r\n\r\n         public synchronized void op(Demo other) {\r\n             try {\r\n                 Thread.sleep(2000);\r\n             } catch (InterruptedException e) { \r\n                 // ignore\r\n             }\r\n             if (other != null) {\r\n                 other.op(null);\r\n             } else {\r\n                 System.out.println(&quot;I have both locks!&quot;);\r\n             }\r\n         }\r\n\r\n         public static void main(String[] args) throws Exception {\r\n             Demo d1 = new Demo();\r\n             Demo d2 = new Demo();\r\n             new Thread(() -&gt; d1.op(d2)).start();\r\n             new Thread(() -&gt; d2.op(d1)).start();\r\n         }\r\n     }\r\n\r\nIt is not the number of methods that matter.  It is the number of locks and the number of threads.  For instance methods that are `synchronized`, the lock is the instance that you are calling the method on.\r\n\r\nSo the above example has two threads and two locks ... and I have arranged that the two threads attempt to acquire both locks, but in a different order.  (With a `sleep` call to make sure that the two threads overlap in time.)","title":"Java programming deadlock","body":"<blockquote>\n<p>If i was to have a java program with only a single <code>synchronized</code> method it cannot possibly deadlock right?</p>\n</blockquote>\n<p>Incorrect.  Here is a counter example.</p>\n<pre><code> public class Demo {\n\n     public synchronized void op(Demo other) {\n         try {\n             Thread.sleep(2000);\n         } catch (InterruptedException e) { \n             // ignore\n         }\n         if (other != null) {\n             other.op(null);\n         } else {\n             System.out.println(&quot;I have both locks!&quot;);\n         }\n     }\n\n     public static void main(String[] args) throws Exception {\n         Demo d1 = new Demo();\n         Demo d2 = new Demo();\n         new Thread(() -&gt; d1.op(d2)).start();\n         new Thread(() -&gt; d2.op(d1)).start();\n     }\n }\n</code></pre>\n<p>It is not the number of methods that matter.  It is the number of locks and the number of threads.  For instance methods that are <code>synchronized</code>, the lock is the instance that you are calling the method on.</p>\n<p>So the above example has two threads and two locks ... and I have arranged that the two threads attempt to acquire both locks, but in a different order.  (With a <code>sleep</code> call to make sure that the two threads overlap in time.)</p>\n"}],"owner":{"account_id":19845884,"reputation":11,"user_id":14537546,"display_name":"Official Designer-"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1681577488,"creation_date":1681566496,"question_id":76022641,"body_markdown":"Problem: My question is regarding the synchronise keyword and deadlocks. If i was to have a java program with only a single synchronised method it cannot possibly  deadlock right?\r\n\r\nExplanation of my Answer: Well, i am coming to the conclusion that this statement is false as the only scenario i can think of is that what about if the synchronised method calls for another method which locks and waits for the synchronised method to release its lock\r\n\r\nHowever on the other hand, i have said that the program contains a single synchronised method.Therefore there are not other method so it cannot possibly deadlock","title":"Java programming deadlock","body":"<p>Problem: My question is regarding the synchronise keyword and deadlocks. If i was to have a java program with only a single synchronised method it cannot possibly  deadlock right?</p>\n<p>Explanation of my Answer: Well, i am coming to the conclusion that this statement is false as the only scenario i can think of is that what about if the synchronised method calls for another method which locks and waits for the synchronised method to release its lock</p>\n<p>However on the other hand, i have said that the program contains a single synchronised method.Therefore there are not other method so it cannot possibly deadlock</p>\n"},{"tags":["java","spring-boot","rest","http-headers","resttemplate"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1681580003,"post_id":76021861,"comment_id":134080798,"body_markdown":"Call NSE with Postman. Copy the working curl (in Postman, on the right under ‘&lt;/&gt;’) into the question.","body":"Call NSE with Postman. Copy the working curl (in Postman, on the right under ‘&lt;/&gt;’) into the question."},{"owner":{"account_id":14450502,"reputation":314,"user_id":10438187,"display_name":"Poklakni"},"score":0,"creation_date":1681587172,"post_id":76021861,"comment_id":134081735,"body_markdown":"the response is too big see https://stackoverflow.com/questions/63678089/read-timed-out-on-spring-resttemplate-call","body":"the response is too big see <a href=\"https://stackoverflow.com/questions/63678089/read-timed-out-on-spring-resttemplate-call\" title=\"read timed out on spring resttemplate call\">stackoverflow.com/questions/63678089/&hellip;</a>"},{"owner":{"account_id":5876779,"reputation":1572,"user_id":4627382,"accept_rate":27,"display_name":"sparsh610"},"score":0,"creation_date":1681592138,"post_id":76021861,"comment_id":134082355,"body_markdown":"I used the feign client and now i am getting response, but difficult to understand this behaviour","body":"I used the feign client and now i am getting response, but difficult to understand this behaviour"}],"owner":{"account_id":5876779,"reputation":1572,"user_id":4627382,"accept_rate":27,"display_name":"sparsh610"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681576704,"creation_date":1681556699,"question_id":76021861,"body_markdown":"I am trying to fetch data from NSE using the below code\r\n\r\n        final String url = &quot;https://www.nseindia.com/api/option-chain-indices?symbol=FINNIFTY&quot;;\r\n\r\n        Map&lt;String, String&gt; headerMap = new HashMap&lt;String, String&gt;();\r\n\r\n        String nsit = &quot;nsit=wes0AwEKvByjMnl-g3c3IxnU;&quot;;\r\n        String nseappid = &quot;nseappid=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcGkubnNlIiwiYXVkIjoiYXBpLm5zZSIsImlhdCI6MTY0MDI2NzQ2MCwiZXhwIjoxNjQwMjcxMDYwfQ.-ehe3ZqLvItmdZ4j3A3aQYhY6kU4Bue0sBOFa5LA4ak;&quot;;\r\n        String bmsv = &quot;bm_sv=E5E08013E7D777B541D939ECF19145D7~YAAQ1SdzaPz0Dm+HAQAAj6/VgxN/Q4sEL9dnAzIGprsBvfEeCH/zwVWkga6fWsb9u1vqHNn0A0CoxdO4pjo1TKRXhAeUrzs+gkcJjyHA9MtsvkciVf6ZEpbhFbcJHRsYxFnjav24oIUCDkEse6ws0lWOaFJm7N6ixnraD+hJDtU01qDdKdErRbjcgNrK1Q01zSpVwq1YbmEwIpeE8gFBnHu/bxlsxhFzdVHaXFtzQ7wfPWKgp4qKuXytrxwDtA1wpJ4=~1&quot;;\r\n\r\n        String cookies =nsit + nseappid +bmsv;\r\n        headerMap.put(&quot;accept-language&quot;, &quot;en-US,en;q=0.9&quot;);\r\n        headerMap.put(&quot;referer&quot;, &quot;https://www.nseindia.com/option-chain&quot;);\r\n        headerMap.put(&quot;accept-encoding&quot;, &quot;identity&quot;);\r\n        headerMap.put(&quot;user-agent&quot;, &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.93 Safari/537.36&quot;);\r\n        headerMap.put(&quot;cookie&quot;, cookies);\r\n\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        System.out.println(&quot;about to call nse&quot;);\r\n        ResponseEntity&lt;String&gt; response = restTemplate.exchange(url,\r\n                GET,\r\n                new HttpEntity&lt;&gt;(headerMap),\r\n                String.class);\r\n        System.out.println(&quot;finished call nse&quot;);\r\n        System.out.println(response);\r\n\r\nI am getting &quot;about to call nse&quot; in console but after that it&#39;s long waiting time. no error but no response as well. it seems like it&#39;s issue with headers but not sure how to fix it.\r\n\r\non adding logs\r\n\r\n    2023-04-15T17:50:27.943+05:30 DEBUG 14552 --- [nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://www.nseindia.com/api/option-chain-indices?symbol=NIFTY\r\n    2023-04-15T17:50:28.170+05:30 DEBUG 14552 --- [nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]\r\n    2023-04-15T17:50:28.186+05:30 DEBUG 14552 --- [nio-8080-exec-2] o.s.web.client.RestTemplate              : Writing [{referer=https://www.nseindia.com/option-chain, accept-language=en-US,en;q=0.9, cookie=_ga=GA1.1.1569929550.1680665131; defaultLang=en; AKA_A2=A; nsit=GoqcdfzwhFsjo9BmYC-6pW6V; nseappid=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcGkubnNlIiwiYXVkIjoiYXBpLm5zZSIsImlhdCI6MTY4MTU2MDY3NCwiZXhwIjoxNjgxNTY3ODc0fQ.9kjpVJD3OUvzX2lFBAjuMtacVyZ8Nx5eyHrWt9bB90A; bm_mi=E59DD6D95B6D984F88F7D8FDBE8DBC55~YAAQdSdzaLsG5nGHAQAAEqHThBMO3B4EiZ/BYywOjqpeP4PjlFJ6Eob2KgtwLE018axXk1/e1LhJ6lNzs/hLKLetmG6qj//xrxwL6hN8POajY94JBcJ9oUIDj5p11NH788ZzomJU8q6YqcyfLWqb9o9m92PCxrmf7bgxSTfdv/EvYmRf9eGpc24Jd2HeJUt7zV5amT/rFjQgNzoLADtsUGha7tSkS006wN/qTwVgvX7N0sxM2VvmnH8QhpZLt3cgSNwZUfRVzQf0V0wbgMd8CZXNzrKEZbS2I5U/zK/8KcZHbtUMaYwIhHsgPg4W2vznPPHSsVKoy+8urVg=~1; ak_bmsc=A483AE3F73E34D9E070999585E9599A4~000000000000000000000000000000~YAAQdSdzaKgH5nGHAQAAv8nThBOaWt3ZIw4Ve/n0fkQTznBywcMT2biLMl3Ut+46a8gW8WAJGihI56hPpQGAZcn622s/t5aX5T72k8F6Enc53cnuUYMER2QkhP6Xn0X9u+z8ee1mUrsQ+DP7QpDJxrGaDBDTf/Wx96ioNISNeTsCXspz3Uvsv9K1gRSA8H9Ahbs66mcEGYCPUdptS3ZqS078fxLYco00kl4B/FosPPgOeIzMJfhiJsnBmR495puUTnVl+tLHYqhXTO7y8YOlvbNWGqXQ2TyKlXaShjLkOz01HizZLpobB/R2tmAAnwX7PaLDtgsu4tQF/U35UCYdU8+4xzftzX34aB1e3HZTi2nZgVS91pzyxjTjo5xE785n96SIgLESEVyy7Ccp7WwffdwbwMIVJyRVQkJbXYbf7AYynF2cmE4uDC3k; RT=&quot;z=1&amp;dm=nseindia.com&amp;si=de8cce89-1ec7-45df-bb44-ee99440306f7&amp;ss=lghxt4ey&amp;sl=1&amp;tt=205&amp;bcn=//684d0d45.akstat.io/&amp;ld=3h0&amp;nu=kpaxjfo&amp;cl=1b4h&quot;; _ga_PJSKY6CFJH=GS1.1.1681560676.28.1.1681560735.1.0.0; bm_sv=99CE5413752CA0E1E86514D062274698~YAAQrCdzaPqaV1GHAQAAoo/UhBPT+3H6G8vI1AEnvhCDhMWX8Bm+NmXlVBkvGOzv0hGhK1nxvClrGboOZuZaEmGfcYq9X/a6A0dxm56oXJPDRhtQ3fsrmzHvzXy3cmxagXDuW7TKLQFekUkHRIbLgTVuABeQIUvUY+e2YUoCATSpL7js4RQrqc9tpTyXVFuyzOOvXxDXmvTRalrEFS4XFSn4COToXHYU2K2uIJQ1ZsbHdcJBCPESqVpkJHR7vdofI0pH~1, :path=/api/option-chain-indices?symbol=NIFTY, accept-encoding=gzip, deflate, br, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\r\n\r\nPlease help.\r\n\r\n\r\n","title":"Springboot: how to fetch data from NSE using RestTemplate","body":"<p>I am trying to fetch data from NSE using the below code</p>\n<pre><code>    final String url = &quot;https://www.nseindia.com/api/option-chain-indices?symbol=FINNIFTY&quot;;\n\n    Map&lt;String, String&gt; headerMap = new HashMap&lt;String, String&gt;();\n\n    String nsit = &quot;nsit=wes0AwEKvByjMnl-g3c3IxnU;&quot;;\n    String nseappid = &quot;nseappid=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcGkubnNlIiwiYXVkIjoiYXBpLm5zZSIsImlhdCI6MTY0MDI2NzQ2MCwiZXhwIjoxNjQwMjcxMDYwfQ.-ehe3ZqLvItmdZ4j3A3aQYhY6kU4Bue0sBOFa5LA4ak;&quot;;\n    String bmsv = &quot;bm_sv=E5E08013E7D777B541D939ECF19145D7~YAAQ1SdzaPz0Dm+HAQAAj6/VgxN/Q4sEL9dnAzIGprsBvfEeCH/zwVWkga6fWsb9u1vqHNn0A0CoxdO4pjo1TKRXhAeUrzs+gkcJjyHA9MtsvkciVf6ZEpbhFbcJHRsYxFnjav24oIUCDkEse6ws0lWOaFJm7N6ixnraD+hJDtU01qDdKdErRbjcgNrK1Q01zSpVwq1YbmEwIpeE8gFBnHu/bxlsxhFzdVHaXFtzQ7wfPWKgp4qKuXytrxwDtA1wpJ4=~1&quot;;\n\n    String cookies =nsit + nseappid +bmsv;\n    headerMap.put(&quot;accept-language&quot;, &quot;en-US,en;q=0.9&quot;);\n    headerMap.put(&quot;referer&quot;, &quot;https://www.nseindia.com/option-chain&quot;);\n    headerMap.put(&quot;accept-encoding&quot;, &quot;identity&quot;);\n    headerMap.put(&quot;user-agent&quot;, &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.93 Safari/537.36&quot;);\n    headerMap.put(&quot;cookie&quot;, cookies);\n\n    RestTemplate restTemplate = new RestTemplate();\n    System.out.println(&quot;about to call nse&quot;);\n    ResponseEntity&lt;String&gt; response = restTemplate.exchange(url,\n            GET,\n            new HttpEntity&lt;&gt;(headerMap),\n            String.class);\n    System.out.println(&quot;finished call nse&quot;);\n    System.out.println(response);\n</code></pre>\n<p>I am getting &quot;about to call nse&quot; in console but after that it's long waiting time. no error but no response as well. it seems like it's issue with headers but not sure how to fix it.</p>\n<p>on adding logs</p>\n<pre><code>2023-04-15T17:50:27.943+05:30 DEBUG 14552 --- [nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://www.nseindia.com/api/option-chain-indices?symbol=NIFTY\n2023-04-15T17:50:28.170+05:30 DEBUG 14552 --- [nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]\n2023-04-15T17:50:28.186+05:30 DEBUG 14552 --- [nio-8080-exec-2] o.s.web.client.RestTemplate              : Writing [{referer=https://www.nseindia.com/option-chain, accept-language=en-US,en;q=0.9, cookie=_ga=GA1.1.1569929550.1680665131; defaultLang=en; AKA_A2=A; nsit=GoqcdfzwhFsjo9BmYC-6pW6V; nseappid=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhcGkubnNlIiwiYXVkIjoiYXBpLm5zZSIsImlhdCI6MTY4MTU2MDY3NCwiZXhwIjoxNjgxNTY3ODc0fQ.9kjpVJD3OUvzX2lFBAjuMtacVyZ8Nx5eyHrWt9bB90A; bm_mi=E59DD6D95B6D984F88F7D8FDBE8DBC55~YAAQdSdzaLsG5nGHAQAAEqHThBMO3B4EiZ/BYywOjqpeP4PjlFJ6Eob2KgtwLE018axXk1/e1LhJ6lNzs/hLKLetmG6qj//xrxwL6hN8POajY94JBcJ9oUIDj5p11NH788ZzomJU8q6YqcyfLWqb9o9m92PCxrmf7bgxSTfdv/EvYmRf9eGpc24Jd2HeJUt7zV5amT/rFjQgNzoLADtsUGha7tSkS006wN/qTwVgvX7N0sxM2VvmnH8QhpZLt3cgSNwZUfRVzQf0V0wbgMd8CZXNzrKEZbS2I5U/zK/8KcZHbtUMaYwIhHsgPg4W2vznPPHSsVKoy+8urVg=~1; ak_bmsc=A483AE3F73E34D9E070999585E9599A4~000000000000000000000000000000~YAAQdSdzaKgH5nGHAQAAv8nThBOaWt3ZIw4Ve/n0fkQTznBywcMT2biLMl3Ut+46a8gW8WAJGihI56hPpQGAZcn622s/t5aX5T72k8F6Enc53cnuUYMER2QkhP6Xn0X9u+z8ee1mUrsQ+DP7QpDJxrGaDBDTf/Wx96ioNISNeTsCXspz3Uvsv9K1gRSA8H9Ahbs66mcEGYCPUdptS3ZqS078fxLYco00kl4B/FosPPgOeIzMJfhiJsnBmR495puUTnVl+tLHYqhXTO7y8YOlvbNWGqXQ2TyKlXaShjLkOz01HizZLpobB/R2tmAAnwX7PaLDtgsu4tQF/U35UCYdU8+4xzftzX34aB1e3HZTi2nZgVS91pzyxjTjo5xE785n96SIgLESEVyy7Ccp7WwffdwbwMIVJyRVQkJbXYbf7AYynF2cmE4uDC3k; RT=&quot;z=1&amp;dm=nseindia.com&amp;si=de8cce89-1ec7-45df-bb44-ee99440306f7&amp;ss=lghxt4ey&amp;sl=1&amp;tt=205&amp;bcn=//684d0d45.akstat.io/&amp;ld=3h0&amp;nu=kpaxjfo&amp;cl=1b4h&quot;; _ga_PJSKY6CFJH=GS1.1.1681560676.28.1.1681560735.1.0.0; bm_sv=99CE5413752CA0E1E86514D062274698~YAAQrCdzaPqaV1GHAQAAoo/UhBPT+3H6G8vI1AEnvhCDhMWX8Bm+NmXlVBkvGOzv0hGhK1nxvClrGboOZuZaEmGfcYq9X/a6A0dxm56oXJPDRhtQ3fsrmzHvzXy3cmxagXDuW7TKLQFekUkHRIbLgTVuABeQIUvUY+e2YUoCATSpL7js4RQrqc9tpTyXVFuyzOOvXxDXmvTRalrEFS4XFSn4COToXHYU2K2uIJQ1ZsbHdcJBCPESqVpkJHR7vdofI0pH~1, :path=/api/option-chain-indices?symbol=NIFTY, accept-encoding=gzip, deflate, br, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36}] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\n</code></pre>\n<p>Please help.</p>\n"},{"tags":["java","android","android-studio","facebook"],"comments":[{"owner":{"account_id":19400960,"reputation":1653,"user_id":14187529,"display_name":"Kamal Nayan"},"score":0,"creation_date":1681570967,"post_id":76022514,"comment_id":134079547,"body_markdown":"Check facebook developer console. In the error message it is mentioned that your app is not active.","body":"Check facebook developer console. In the error message it is mentioned that your app is not active."}],"owner":{"account_id":28313283,"reputation":1,"user_id":21650232,"display_name":"Helloit&#39;sme"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681576241,"creation_date":1681564687,"question_id":76022514,"body_markdown":"Android Studio; Java. \r\nAfter entering data and authorization, it displays such a window. Authorization takes place in chrome on the emulator, all permissions are approved (including cookies). All the actions of the instructions on the developer&#39;s website did.\r\n\r\n![enter image description here](https://i.stack.imgur.com/xG4z0l.png)\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    private CallbackManager callbackManager;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        callbackManager = CallbackManager.Factory.create();\r\n\r\n        LoginButton loginButton = findViewById(R.id.login_button);\r\n        loginButton.setPermissions(&quot;email&quot;);\r\n\r\n        loginButton.registerCallback(callbackManager, new FacebookCallback&lt;LoginResult&gt;() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                AccessToken accessToken = loginResult.getAccessToken();\r\n                boolean isLoggedIn = accessToken != null &amp;&amp; !accessToken.isExpired();\r\n\r\n                if (isLoggedIn) {\r\n                    GraphRequest request = GraphRequest.newMeRequest(accessToken, new GraphRequest.GraphJSONObjectCallback() {\r\n                        @Override\r\n                        public void onCompleted(JSONObject object, GraphResponse response) {\r\n                            try {\r\n                                String name = object.getString(&quot;name&quot;);\r\n\r\n                                Intent intent = new Intent(MainActivity.this, SecondActivity.class);\r\n                                intent.putExtra(&quot;name&quot;, name);\r\n                                startActivity(intent);\r\n                            } catch (JSONException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    Bundle parameters = new Bundle();\r\n                    parameters.putString(&quot;fields&quot;, &quot;name&quot;);\r\n                    request.setParameters(parameters);\r\n                    request.executeAsync();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        callbackManager.onActivityResult(requestCode, resultCode, data);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class SecondActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_second);\r\n\r\n        TextView nameTextView = findViewById(R.id.tv_name);\r\n        String name = getIntent().getStringExtra(&quot;name&quot;);\r\n        nameTextView.setText(&quot;Welcome, &quot; + name + &quot;!&quot;);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nHere&#39;s result:\r\n[enter image description here](https://i.stack.imgur.com/gSA5t.png)\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    private CallbackManager callbackManager;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        callbackManager = CallbackManager.Factory.create();\r\n\r\n        LoginButton loginButton = findViewById(R.id.login_button);\r\n        loginButton.setPermissions(&quot;email&quot;);\r\n\r\n        loginButton.registerCallback(callbackManager, new FacebookCallback&lt;LoginResult&gt;() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                AccessToken accessToken = loginResult.getAccessToken();\r\n                boolean isLoggedIn = accessToken != null &amp;&amp; !accessToken.isExpired();\r\n\r\n                if (isLoggedIn) {\r\n                    GraphRequest request = GraphRequest.newMeRequest(accessToken, new GraphRequest.GraphJSONObjectCallback() {\r\n                        @Override\r\n                        public void onCompleted(JSONObject object, GraphResponse response) {\r\n                            try {\r\n                                String name = object.getString(&quot;name&quot;);\r\n\r\n                                Intent intent = new Intent(MainActivity.this, SecondActivity.class);\r\n                                intent.putExtra(&quot;name&quot;, name);\r\n                                startActivity(intent);\r\n                            } catch (JSONException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    Bundle parameters = new Bundle();\r\n                    parameters.putString(&quot;fields&quot;, &quot;name&quot;);\r\n                    request.setParameters(parameters);\r\n                    request.executeAsync();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        callbackManager.onActivityResult(requestCode, resultCode, data);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class SecondActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_second);\r\n\r\n        TextView nameTextView = findViewById(R.id.tv_name);\r\n        String name = getIntent().getStringExtra(&quot;name&quot;);\r\n        nameTextView.setText(&quot;Welcome, &quot; + name + &quot;!&quot;);\r\n    }\r\n}\r\n```","title":"Why does such a window appear after authorization and how to fix it, maybe someone came across?","body":"<p>Android Studio; Java.\nAfter entering data and authorization, it displays such a window. Authorization takes place in chrome on the emulator, all permissions are approved (including cookies). All the actions of the instructions on the developer's website did.</p>\n<p><img src=\"https://i.stack.imgur.com/xG4z0l.png\" alt=\"enter image description here\" /></p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    private CallbackManager callbackManager;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        callbackManager = CallbackManager.Factory.create();\n\n        LoginButton loginButton = findViewById(R.id.login_button);\n        loginButton.setPermissions(&quot;email&quot;);\n\n        loginButton.registerCallback(callbackManager, new FacebookCallback&lt;LoginResult&gt;() {\n            @Override\n            public void onSuccess(LoginResult loginResult) {\n                AccessToken accessToken = loginResult.getAccessToken();\n                boolean isLoggedIn = accessToken != null &amp;&amp; !accessToken.isExpired();\n\n                if (isLoggedIn) {\n                    GraphRequest request = GraphRequest.newMeRequest(accessToken, new GraphRequest.GraphJSONObjectCallback() {\n                        @Override\n                        public void onCompleted(JSONObject object, GraphResponse response) {\n                            try {\n                                String name = object.getString(&quot;name&quot;);\n\n                                Intent intent = new Intent(MainActivity.this, SecondActivity.class);\n                                intent.putExtra(&quot;name&quot;, name);\n                                startActivity(intent);\n                            } catch (JSONException e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    });\n\n                    Bundle parameters = new Bundle();\n                    parameters.putString(&quot;fields&quot;, &quot;name&quot;);\n                    request.setParameters(parameters);\n                    request.executeAsync();\n                }\n            }\n\n            @Override\n            public void onCancel() {\n\n            }\n\n            @Override\n            public void onError(FacebookException error) {\n\n            }\n        });\n\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        callbackManager.onActivityResult(requestCode, resultCode, data);\n    }\n}\n</code></pre>\n<pre><code>public class SecondActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_second);\n\n        TextView nameTextView = findViewById(R.id.tv_name);\n        String name = getIntent().getStringExtra(&quot;name&quot;);\n        nameTextView.setText(&quot;Welcome, &quot; + name + &quot;!&quot;);\n    }\n}\n</code></pre>\n<p>Here's result:\n<a href=\"https://i.stack.imgur.com/gSA5t.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    private CallbackManager callbackManager;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        callbackManager = CallbackManager.Factory.create();\n\n        LoginButton loginButton = findViewById(R.id.login_button);\n        loginButton.setPermissions(&quot;email&quot;);\n\n        loginButton.registerCallback(callbackManager, new FacebookCallback&lt;LoginResult&gt;() {\n            @Override\n            public void onSuccess(LoginResult loginResult) {\n                AccessToken accessToken = loginResult.getAccessToken();\n                boolean isLoggedIn = accessToken != null &amp;&amp; !accessToken.isExpired();\n\n                if (isLoggedIn) {\n                    GraphRequest request = GraphRequest.newMeRequest(accessToken, new GraphRequest.GraphJSONObjectCallback() {\n                        @Override\n                        public void onCompleted(JSONObject object, GraphResponse response) {\n                            try {\n                                String name = object.getString(&quot;name&quot;);\n\n                                Intent intent = new Intent(MainActivity.this, SecondActivity.class);\n                                intent.putExtra(&quot;name&quot;, name);\n                                startActivity(intent);\n                            } catch (JSONException e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    });\n\n                    Bundle parameters = new Bundle();\n                    parameters.putString(&quot;fields&quot;, &quot;name&quot;);\n                    request.setParameters(parameters);\n                    request.executeAsync();\n                }\n            }\n\n            @Override\n            public void onCancel() {\n\n            }\n\n            @Override\n            public void onError(FacebookException error) {\n\n            }\n        });\n\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        callbackManager.onActivityResult(requestCode, resultCode, data);\n    }\n}\n</code></pre>\n<pre><code>public class SecondActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_second);\n\n        TextView nameTextView = findViewById(R.id.tv_name);\n        String name = getIntent().getStringExtra(&quot;name&quot;);\n        nameTextView.setText(&quot;Welcome, &quot; + name + &quot;!&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","jitsi-meet"],"answers":[{"tags":[],"owner":{"account_id":9666798,"reputation":21,"user_id":7173050,"display_name":"Joey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681476000,"creation_date":1681475518,"answer_id":76015118,"question_id":76012579,"body_markdown":"the newest version of the jitis-meet-sdk requires an icon for a notification, because the sdk uses Notification.\r\n\r\nSo just add this in your res/drawable directory (name: ic_notification):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:width=&quot;24dp&quot;\r\n        android:height=&quot;24dp&quot;\r\n        android:viewportWidth=&quot;26.086956&quot;\r\n        android:viewportHeight=&quot;26.086956&quot;\r\n        android:tint=&quot;#FFFFFF&quot;&gt;\r\n        &lt;group android:translateX=&quot;1.0434783&quot;\r\n            android:translateY=&quot;1.0434783&quot;&gt;\r\n            &lt;path\r\n                android:fillColor=&quot;#FF000000&quot;\r\n                android:pathData=&quot;M6,18c0,0.55 0.45,1 1,1h1v3.5c0,0.83\r\n                0.67,1.5 1.5,1.5s1.5,-0.67 1.5,-1.5L11,19h2v3.5c0,0.83\r\n                0.67,1.5 1.5,1.5s1.5,-0.67 1.5,-1.5L16,19h1c0.55,0 1,-0.45\r\n                1,-1L18,8L6,8v10zM3.5,8C2.67,8 2,8.67 2,9.5v7c0,0.83\r\n                0.67,1.5 1.5,1.5S5,17.33 5,16.5v-7C5,8.67 4.33,8\r\n                3.5,8zM20.5,8c-0.83,0 -1.5,0.67 -1.5,1.5v7c0,0.83 0.67,1.5\r\n                1.5,1.5s1.5,-0.67 1.5,-1.5v-7c0,-0.83 -0.67,-1.5 -1.5,\r\n                1.5zM15.53,2.16l1.3,-1.3c0.2,-0.2 0.2,-0.51 0,-0.71\r\n                -0.2,-0.2 -0.51,-0.2 -0.71,0l-1.48,1.48C13.85,1.23 12.95,1\r\n                12,1c-0.96,0 -1.86,0.23 -2.66,0.63L7.85,0.15c-0.2,-0.2\r\n                -0.51,-0.2 -0.71,0 -0.2,0.2 -0.2,0.51\r\n                0,0.71l1.31,1.31C6.97,3.26 6,5.01 6,7h12c0,-1.99 -0.97,-3.75\r\n                -2.47,-4.84zM10,5L9,5L9,4h1v1zM15,5h-1L14,4h1v1z&quot;/&gt;\r\n        &lt;/group&gt;\r\n    &lt;/vector&gt;\r\n\r\nThat should solve your problem.\r\n\r\n\r\nEDIT:\r\nI forgot, there is a quicker way for the icon:\r\n\r\n 1. Right click on res folder in android project and choose image asset from new section.\r\n 2. Create icon with following config\r\n    Name: ic_notification\r\n    Icon Type: Notification Icons\r\n\r\n\r\nSources:\r\nhttps://github.com/jitsi/jitsi-meet/issues/11847\r\n\r\nhttps://stackoverflow.com/questions/74121094/jitsi-android-sdk-crashes-version-6-1-0-after-joining-call\r\n","title":"App is crashing when jitsi meet sdk starts. Unable detect issue","body":"<p>the newest version of the jitis-meet-sdk requires an icon for a notification, because the sdk uses Notification.</p>\n<p>So just add this in your res/drawable directory (name: ic_notification):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:width=&quot;24dp&quot;\n    android:height=&quot;24dp&quot;\n    android:viewportWidth=&quot;26.086956&quot;\n    android:viewportHeight=&quot;26.086956&quot;\n    android:tint=&quot;#FFFFFF&quot;&gt;\n    &lt;group android:translateX=&quot;1.0434783&quot;\n        android:translateY=&quot;1.0434783&quot;&gt;\n        &lt;path\n            android:fillColor=&quot;#FF000000&quot;\n            android:pathData=&quot;M6,18c0,0.55 0.45,1 1,1h1v3.5c0,0.83\n            0.67,1.5 1.5,1.5s1.5,-0.67 1.5,-1.5L11,19h2v3.5c0,0.83\n            0.67,1.5 1.5,1.5s1.5,-0.67 1.5,-1.5L16,19h1c0.55,0 1,-0.45\n            1,-1L18,8L6,8v10zM3.5,8C2.67,8 2,8.67 2,9.5v7c0,0.83\n            0.67,1.5 1.5,1.5S5,17.33 5,16.5v-7C5,8.67 4.33,8\n            3.5,8zM20.5,8c-0.83,0 -1.5,0.67 -1.5,1.5v7c0,0.83 0.67,1.5\n            1.5,1.5s1.5,-0.67 1.5,-1.5v-7c0,-0.83 -0.67,-1.5 -1.5,\n            1.5zM15.53,2.16l1.3,-1.3c0.2,-0.2 0.2,-0.51 0,-0.71\n            -0.2,-0.2 -0.51,-0.2 -0.71,0l-1.48,1.48C13.85,1.23 12.95,1\n            12,1c-0.96,0 -1.86,0.23 -2.66,0.63L7.85,0.15c-0.2,-0.2\n            -0.51,-0.2 -0.71,0 -0.2,0.2 -0.2,0.51\n            0,0.71l1.31,1.31C6.97,3.26 6,5.01 6,7h12c0,-1.99 -0.97,-3.75\n            -2.47,-4.84zM10,5L9,5L9,4h1v1zM15,5h-1L14,4h1v1z&quot;/&gt;\n    &lt;/group&gt;\n&lt;/vector&gt;\n</code></pre>\n<p>That should solve your problem.</p>\n<p>EDIT:\nI forgot, there is a quicker way for the icon:</p>\n<ol>\n<li>Right click on res folder in android project and choose image asset from new section.</li>\n<li>Create icon with following config\nName: ic_notification\nIcon Type: Notification Icons</li>\n</ol>\n<p>Sources:\n<a href=\"https://github.com/jitsi/jitsi-meet/issues/11847\" rel=\"nofollow noreferrer\">https://github.com/jitsi/jitsi-meet/issues/11847</a></p>\n<p><a href=\"https://stackoverflow.com/questions/74121094/jitsi-android-sdk-crashes-version-6-1-0-after-joining-call\">Jitsi Android SDK crashes (version 6.1.0) after joining call</a></p>\n"}],"owner":{"account_id":28301873,"reputation":1,"user_id":21640445,"display_name":"P. Shanmukha Sai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":663,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681575581,"creation_date":1681457419,"question_id":76012579,"body_markdown":"App is crashing when jitsi meet sdk starts.I am using jitsi sdk to prepare a meeting app.\r\nwhenever i click start meetign button, app crashes.\r\nI am attaching video and code of it below.\r\n[video here](https://stackoverflow.com)\r\n\r\n\r\n\r\n```\r\npackage com.appsbypss.psmeet2023;\r\n\r\nimport static android.content.ContentValues.TAG;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.NotificationCompat;\r\nimport androidx.localbroadcastmanager.content.LocalBroadcastManager;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.ads.AdRequest;\r\nimport com.google.android.gms.ads.LoadAdError;\r\nimport com.google.android.gms.ads.MobileAds;\r\nimport com.google.android.gms.ads.initialization.InitializationStatus;\r\nimport com.google.android.gms.ads.initialization.OnInitializationCompleteListener;\r\nimport com.google.android.gms.ads.interstitial.InterstitialAd;\r\nimport com.google.android.gms.ads.interstitial.InterstitialAdLoadCallback;\r\n\r\nimport org.jitsi.meet.sdk.BroadcastEvent;\r\nimport org.jitsi.meet.sdk.BroadcastIntentHelper;\r\nimport android.content.BroadcastReceiver;\r\nimport org.jitsi.meet.sdk.JitsiMeet;\r\nimport org.jitsi.meet.sdk.JitsiMeetActivity;\r\nimport org.jitsi.meet.sdk.JitsiMeetActivityDelegate;\r\nimport org.jitsi.meet.sdk.JitsiMeetConferenceOptions;\r\nimport org.jitsi.meet.sdk.JitsiMeetView;\r\n\r\nimport androidx.localbroadcastmanager.content.LocalBroadcastManager;\r\n\r\nimport java.net.MalformedURLException;\r\nimport java.net.URL;\r\n\r\nimport timber.log.Timber;\r\n\r\npublic class MeetingRooms extends AppCompatActivity {\r\n\r\n\r\n    private InterstitialAd mInterstitialAd;\r\n\r\n\r\n    public final BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            onBroadcastReceived(intent);\r\n        }\r\n    };\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_meeting_rooms);\r\n//        broadcastReceiver = new BroadcastReceiver() {\r\n//            @Override\r\n//            public void onReceive(Context context, Intent intent) {\r\n//                // As new restrictions including server URL are received,\r\n//                // conference should be restarted with new configuration.\r\n//            onBroadcastReceived(intent);\r\n//            }\r\n//        };\r\n\r\n\r\n\r\n\r\n        Intent intent = getIntent();\r\n        String meeting_id = intent.getStringExtra(&quot;meeting_id&quot;);\r\n\r\n        Toast.makeText(this, meeting_id, Toast.LENGTH_SHORT).show();\r\n\r\n\r\n        URL serverURL;\r\n        try {\r\n            // When using JaaS, replace &quot;https://meet.jit.si&quot; with the proper serverURL\r\n            serverURL = new URL(&quot;https://meet.jit.si&quot;);\r\n        } catch (MalformedURLException e) {\r\n            e.printStackTrace();\r\n            throw new RuntimeException(&quot;Invalid server URL!&quot;);\r\n        }\r\n        JitsiMeetConferenceOptions defaultOptions\r\n                = new JitsiMeetConferenceOptions.Builder()\r\n                .setServerURL(serverURL)\r\n                // When using JaaS, set the obtained JWT here\r\n                //.setToken(&quot;MyJWT&quot;)\r\n                // Different features flags can be set\r\n                // .setFeatureFlag(&quot;toolbox.enabled&quot;, false)\r\n                // .setFeatureFlag(&quot;filmstrip.enabled&quot;, false)\r\n                .setFeatureFlag(&quot;welcomepage.enabled&quot;, false)\r\n                .build();\r\n        JitsiMeet.setDefaultConferenceOptions(defaultOptions);\r\n\r\n        registerForBroadcastMessages();\r\n\r\n\r\n        if (meeting_id != null || meeting_id != &quot;&quot;) {\r\n            // Build options object for joining the conference. The SDK will merge the default\r\n            // one we set earlier and this one when joining.\r\n            JitsiMeetConferenceOptions options\r\n                    = new JitsiMeetConferenceOptions.Builder()\r\n                    .setRoom(meeting_id)\r\n                    .setFeatureFlag(&quot;welcomepage.enabled&quot;, false)\r\n\r\n//                 Settings for audio and video\r\n                    .setAudioMuted(true)\r\n                    .setVideoMuted(true)\r\n                    .build();\r\n            // Launch the new activity with the given options. The launch() method takes care\r\n            // of creating the required Intent and passing the options.\r\n            JitsiMeetActivity.launch(this, options);\r\n\r\n        }\r\n\r\n        MobileAds.initialize(this, new OnInitializationCompleteListener() {\r\n            @Override\r\n            public void onInitializationComplete(InitializationStatus initializationStatus) {}\r\n        });\r\n        AdRequest adRequest = new AdRequest.Builder().build();\r\n\r\n        InterstitialAd.load(this,&quot;ca-app-pub-1433551814483417/5546969054&quot;, adRequest,\r\n                new InterstitialAdLoadCallback() {\r\n                    @Override\r\n                    public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\r\n                        // The mInterstitialAd reference will be null until\r\n                        // an ad is loaded.\r\n                        mInterstitialAd = interstitialAd;\r\n                        Log.i(TAG, &quot;onAdLoaded&quot;);\r\n                    }\r\n                    @Override\r\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\r\n                        // Handle the error\r\n                        Log.i(TAG, loadAdError.getMessage());\r\n                        mInterstitialAd = null;\r\n                    }\r\n\r\n\r\n                });\r\n\r\n\r\n    }\r\n\r\n    private void registerForBroadcastMessages() {\r\n        IntentFilter intentFilter = new IntentFilter();\r\n\r\n        /* This registers for every possible event sent from JitsiMeetSDK\r\n           If only some of the events are needed, the for loop can be replaced\r\n           with individual statements:\r\n           ex:  intentFilter.addAction(BroadcastEvent.Type.AUDIO_MUTED_CHANGED.getAction());\r\n                intentFilter.addAction(BroadcastEvent.Type.CONFERENCE_TERMINATED.getAction());\r\n                ... other events\r\n         */\r\n        for (BroadcastEvent.Type type : BroadcastEvent.Type.values()) {\r\n            intentFilter.addAction(type.getAction());\r\n        }\r\n\r\n        LocalBroadcastManager.getInstance(this).registerReceiver(broadcastReceiver, intentFilter);\r\n    }\r\n    private void gotoHome() {\r\n        startActivity(new Intent(this, Home.class));\r\n        finish();\r\n        if (mInterstitialAd != null) {\r\n            mInterstitialAd.show(this);\r\n\r\n        } else {\r\n            Log.d(&quot;TAG&quot;, &quot;The interstitial ad wasn&#39;t ready yet.&quot;);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        LocalBroadcastManager.getInstance(this).unregisterReceiver(broadcastReceiver);\r\n\r\n        super.onDestroy();\r\n        hangUp();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // Example for handling different JitsiMeetSDK events\r\n    private void onBroadcastReceived(Intent intent) {\r\n        if (intent != null) {\r\n            BroadcastEvent event = new BroadcastEvent(intent);\r\n\r\n            switch (event.getType()) {\r\n                case CONFERENCE_TERMINATED:\r\n\r\n                    new Handler().postDelayed(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            gotoHome();\r\n                        }\r\n                    }, 3000);\r\n\r\n                    break;\r\n                case CONFERENCE_JOINED:\r\n                    Timber.i(&quot;Conference Joined with url%s&quot;, event.getData().get(&quot;url&quot;));\r\n                    break;\r\n                case PARTICIPANT_JOINED:\r\n                    Timber.i(&quot;Participant joined%s&quot;, event.getData().get(&quot;name&quot;));\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Example for sending actions to JitsiMeetSDK\r\n    private void hangUp() {\r\n        Intent hangupBroadcastIntent = BroadcastIntentHelper.buildHangUpIntent();\r\n        LocalBroadcastManager.getInstance(getApplicationContext()).sendBroadcast(hangupBroadcastIntent);\r\n    }\r\n}\r\n```\r\n\r\nand below is my logcat\r\n\r\n```\r\n\r\n    Set &#39;android:enableOnBackInvokedCallback=&quot;true&quot;&#39; in the application manifest.\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nD/InsetsController: show(ime(), fromIme=true)\r\nD/DecorView[]: onWindowFocusChanged hasWindowFocus false\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\n    java.lang.RuntimeException: Unable to start service org.jitsi.meet.sdk.JitsiMeetOngoingConferenceService@cbde6f8 with Intent { cmp=com.appsbypss.psmeet2023/org.jitsi.meet.sdk.JitsiMeetOngoingConferenceService (has extras) }: java.lang.IllegalArgumentException: Invalid notification (no valid small icon): Notification(channel=JitsiOngoingConferenceChannel shortcut=null contentView=null vibrate=null sound=null defaults=0x0 flags=0xa color=0x00000000 category=call actions=2 vis=PUBLIC)\r\n        at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:4844)\r\n        at android.app.ActivityThread.-$$Nest$mhandleServiceArgs(Unknown Source:0)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2275)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loopOnce(Looper.java:210)\r\n        at android.os.Looper.loop(Looper.java:299)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8136)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:580)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1028)\r\n     Caused by: java.lang.IllegalArgumentException: Invalid notification (no valid small icon): Notification(channel=JitsiOngoingConferenceChannel shortcut=null contentView=null vibrate=null sound=null defaults=0x0 flags=0xa color=0x00000000 category=call actions=2 vis=PUBLIC)\r\n        at android.app.NotificationManager.fixNotification(NotificationManager.java:700)\r\n        at android.app.NotificationManager.notifyAsUser(NotificationManager.java:679)\r\n        at android.app.NotificationManager.notify(NotificationManager.java:628)\r\n        at android.app.NotificationManager.notify(NotificationManager.java:604)\r\n        at org.jitsi.meet.sdk.JitsiMeetOngoingConferenceService.onStartCommand(JitsiMeetOngoingConferenceService.java:135)\r\n        at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:4826)\r\n        at android.app.ActivityThread.-$$Nest$mhandleServiceArgs(Unknown Source:0)&#160;\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2275)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n        at android.os.Looper.loopOnce(Looper.java:210)&#160;\r\n        at android.os.Looper.loop(Looper.java:299)&#160;\r\n        at android.app.ActivityThread.main(ActivityThread.java:8136)&#160;\r\n        at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:580)&#160;\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1028)&#160;\r\nI/JitsiMeetSDK: JitsiConnectionService onAbort F44D7602-71D0-4B03-9503-CC4CA9682113\r\nD/JitsiMeetSDK: JitsiConnectionService onStateChanged: DISCONNECTED F44D7602-71D0-4B03-9503-CC4CA9682113\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nE/gralloc4: Empty SMPTE 2094-40 data\r\nI/Process: Process is going to kill itself!\r\n    java.lang.Exception\r\n        at android.os.Process.killProcess(Process.java:1330)\r\n        at com.android.internal.os.RuntimeInit$KillApplicationHandler.uncaughtException(RuntimeInit.java:202)\r\n        at org.jitsi.meet.sdk.JitsiMeetUncaughtExceptionHandler.uncaughtException(JitsiMeetUncaughtExceptionHandler.java:48)\r\n        at org.chromium.base.JavaExceptionReporter.uncaughtException(chromium-TrichromeWebViewGoogle6432.aab-stable-556311634:17)\r\n        at java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:1073)\r\n        at java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:1068)\r\n        at java.lang.Thread.dispatchUncaughtException(Thread.java:2306)\r\nI/Process: Sending signal. PID: 957 SIG: 9\r\n```\r\n\r\n\r\n\r\nI got to know that this is due to invalid notification image so I tried making it valid.\r\nI clean built the project. But there was not change. So please give me solution to this issue as soon as possible.\r\nThankyou.","title":"App is crashing when jitsi meet sdk starts. Unable detect issue","body":"<p>App is crashing when jitsi meet sdk starts.I am using jitsi sdk to prepare a meeting app.\nwhenever i click start meetign button, app crashes.\nI am attaching video and code of it below.\n<a href=\"https://stackoverflow.com\">video here</a></p>\n<pre><code>package com.appsbypss.psmeet2023;\n\nimport static android.content.ContentValues.TAG;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.NotificationCompat;\nimport androidx.localbroadcastmanager.content.LocalBroadcastManager;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.util.Log;\nimport android.widget.Toast;\n\nimport com.google.android.gms.ads.AdRequest;\nimport com.google.android.gms.ads.LoadAdError;\nimport com.google.android.gms.ads.MobileAds;\nimport com.google.android.gms.ads.initialization.InitializationStatus;\nimport com.google.android.gms.ads.initialization.OnInitializationCompleteListener;\nimport com.google.android.gms.ads.interstitial.InterstitialAd;\nimport com.google.android.gms.ads.interstitial.InterstitialAdLoadCallback;\n\nimport org.jitsi.meet.sdk.BroadcastEvent;\nimport org.jitsi.meet.sdk.BroadcastIntentHelper;\nimport android.content.BroadcastReceiver;\nimport org.jitsi.meet.sdk.JitsiMeet;\nimport org.jitsi.meet.sdk.JitsiMeetActivity;\nimport org.jitsi.meet.sdk.JitsiMeetActivityDelegate;\nimport org.jitsi.meet.sdk.JitsiMeetConferenceOptions;\nimport org.jitsi.meet.sdk.JitsiMeetView;\n\nimport androidx.localbroadcastmanager.content.LocalBroadcastManager;\n\nimport java.net.MalformedURLException;\nimport java.net.URL;\n\nimport timber.log.Timber;\n\npublic class MeetingRooms extends AppCompatActivity {\n\n\n    private InterstitialAd mInterstitialAd;\n\n\n    public final BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            onBroadcastReceived(intent);\n        }\n    };\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_meeting_rooms);\n//        broadcastReceiver = new BroadcastReceiver() {\n//            @Override\n//            public void onReceive(Context context, Intent intent) {\n//                // As new restrictions including server URL are received,\n//                // conference should be restarted with new configuration.\n//            onBroadcastReceived(intent);\n//            }\n//        };\n\n\n\n\n        Intent intent = getIntent();\n        String meeting_id = intent.getStringExtra(&quot;meeting_id&quot;);\n\n        Toast.makeText(this, meeting_id, Toast.LENGTH_SHORT).show();\n\n\n        URL serverURL;\n        try {\n            // When using JaaS, replace &quot;https://meet.jit.si&quot; with the proper serverURL\n            serverURL = new URL(&quot;https://meet.jit.si&quot;);\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n            throw new RuntimeException(&quot;Invalid server URL!&quot;);\n        }\n        JitsiMeetConferenceOptions defaultOptions\n                = new JitsiMeetConferenceOptions.Builder()\n                .setServerURL(serverURL)\n                // When using JaaS, set the obtained JWT here\n                //.setToken(&quot;MyJWT&quot;)\n                // Different features flags can be set\n                // .setFeatureFlag(&quot;toolbox.enabled&quot;, false)\n                // .setFeatureFlag(&quot;filmstrip.enabled&quot;, false)\n                .setFeatureFlag(&quot;welcomepage.enabled&quot;, false)\n                .build();\n        JitsiMeet.setDefaultConferenceOptions(defaultOptions);\n\n        registerForBroadcastMessages();\n\n\n        if (meeting_id != null || meeting_id != &quot;&quot;) {\n            // Build options object for joining the conference. The SDK will merge the default\n            // one we set earlier and this one when joining.\n            JitsiMeetConferenceOptions options\n                    = new JitsiMeetConferenceOptions.Builder()\n                    .setRoom(meeting_id)\n                    .setFeatureFlag(&quot;welcomepage.enabled&quot;, false)\n\n//                 Settings for audio and video\n                    .setAudioMuted(true)\n                    .setVideoMuted(true)\n                    .build();\n            // Launch the new activity with the given options. The launch() method takes care\n            // of creating the required Intent and passing the options.\n            JitsiMeetActivity.launch(this, options);\n\n        }\n\n        MobileAds.initialize(this, new OnInitializationCompleteListener() {\n            @Override\n            public void onInitializationComplete(InitializationStatus initializationStatus) {}\n        });\n        AdRequest adRequest = new AdRequest.Builder().build();\n\n        InterstitialAd.load(this,&quot;ca-app-pub-1433551814483417/5546969054&quot;, adRequest,\n                new InterstitialAdLoadCallback() {\n                    @Override\n                    public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\n                        // The mInterstitialAd reference will be null until\n                        // an ad is loaded.\n                        mInterstitialAd = interstitialAd;\n                        Log.i(TAG, &quot;onAdLoaded&quot;);\n                    }\n                    @Override\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\n                        // Handle the error\n                        Log.i(TAG, loadAdError.getMessage());\n                        mInterstitialAd = null;\n                    }\n\n\n                });\n\n\n    }\n\n    private void registerForBroadcastMessages() {\n        IntentFilter intentFilter = new IntentFilter();\n\n        /* This registers for every possible event sent from JitsiMeetSDK\n           If only some of the events are needed, the for loop can be replaced\n           with individual statements:\n           ex:  intentFilter.addAction(BroadcastEvent.Type.AUDIO_MUTED_CHANGED.getAction());\n                intentFilter.addAction(BroadcastEvent.Type.CONFERENCE_TERMINATED.getAction());\n                ... other events\n         */\n        for (BroadcastEvent.Type type : BroadcastEvent.Type.values()) {\n            intentFilter.addAction(type.getAction());\n        }\n\n        LocalBroadcastManager.getInstance(this).registerReceiver(broadcastReceiver, intentFilter);\n    }\n    private void gotoHome() {\n        startActivity(new Intent(this, Home.class));\n        finish();\n        if (mInterstitialAd != null) {\n            mInterstitialAd.show(this);\n\n        } else {\n            Log.d(&quot;TAG&quot;, &quot;The interstitial ad wasn't ready yet.&quot;);\n        }\n\n\n    }\n\n    @Override\n    protected void onDestroy() {\n        LocalBroadcastManager.getInstance(this).unregisterReceiver(broadcastReceiver);\n\n        super.onDestroy();\n        hangUp();\n    }\n\n\n\n\n\n\n\n\n    // Example for handling different JitsiMeetSDK events\n    private void onBroadcastReceived(Intent intent) {\n        if (intent != null) {\n            BroadcastEvent event = new BroadcastEvent(intent);\n\n            switch (event.getType()) {\n                case CONFERENCE_TERMINATED:\n\n                    new Handler().postDelayed(new Runnable() {\n                        @Override\n                        public void run() {\n                            gotoHome();\n                        }\n                    }, 3000);\n\n                    break;\n                case CONFERENCE_JOINED:\n                    Timber.i(&quot;Conference Joined with url%s&quot;, event.getData().get(&quot;url&quot;));\n                    break;\n                case PARTICIPANT_JOINED:\n                    Timber.i(&quot;Participant joined%s&quot;, event.getData().get(&quot;name&quot;));\n                    break;\n            }\n        }\n    }\n\n    // Example for sending actions to JitsiMeetSDK\n    private void hangUp() {\n        Intent hangupBroadcastIntent = BroadcastIntentHelper.buildHangUpIntent();\n        LocalBroadcastManager.getInstance(getApplicationContext()).sendBroadcast(hangupBroadcastIntent);\n    }\n}\n</code></pre>\n<p>and below is my logcat</p>\n<pre><code>\n    Set 'android:enableOnBackInvokedCallback=&quot;true&quot;' in the application manifest.\nE/gralloc4: Empty SMPTE 2094-40 data\nD/InsetsController: show(ime(), fromIme=true)\nD/DecorView[]: onWindowFocusChanged hasWindowFocus false\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\n    java.lang.RuntimeException: Unable to start service org.jitsi.meet.sdk.JitsiMeetOngoingConferenceService@cbde6f8 with Intent { cmp=com.appsbypss.psmeet2023/org.jitsi.meet.sdk.JitsiMeetOngoingConferenceService (has extras) }: java.lang.IllegalArgumentException: Invalid notification (no valid small icon): Notification(channel=JitsiOngoingConferenceChannel shortcut=null contentView=null vibrate=null sound=null defaults=0x0 flags=0xa color=0x00000000 category=call actions=2 vis=PUBLIC)\n        at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:4844)\n        at android.app.ActivityThread.-$$Nest$mhandleServiceArgs(Unknown Source:0)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2275)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loopOnce(Looper.java:210)\n        at android.os.Looper.loop(Looper.java:299)\n        at android.app.ActivityThread.main(ActivityThread.java:8136)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:580)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1028)\n     Caused by: java.lang.IllegalArgumentException: Invalid notification (no valid small icon): Notification(channel=JitsiOngoingConferenceChannel shortcut=null contentView=null vibrate=null sound=null defaults=0x0 flags=0xa color=0x00000000 category=call actions=2 vis=PUBLIC)\n        at android.app.NotificationManager.fixNotification(NotificationManager.java:700)\n        at android.app.NotificationManager.notifyAsUser(NotificationManager.java:679)\n        at android.app.NotificationManager.notify(NotificationManager.java:628)\n        at android.app.NotificationManager.notify(NotificationManager.java:604)\n        at org.jitsi.meet.sdk.JitsiMeetOngoingConferenceService.onStartCommand(JitsiMeetOngoingConferenceService.java:135)\n        at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:4826)\n        at android.app.ActivityThread.-$$Nest$mhandleServiceArgs(Unknown Source:0) \n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2275) \n        at android.os.Handler.dispatchMessage(Handler.java:106) \n        at android.os.Looper.loopOnce(Looper.java:210) \n        at android.os.Looper.loop(Looper.java:299) \n        at android.app.ActivityThread.main(ActivityThread.java:8136) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:580) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1028) \nI/JitsiMeetSDK: JitsiConnectionService onAbort F44D7602-71D0-4B03-9503-CC4CA9682113\nD/JitsiMeetSDK: JitsiConnectionService onStateChanged: DISCONNECTED F44D7602-71D0-4B03-9503-CC4CA9682113\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\nE/gralloc4: Empty SMPTE 2094-40 data\nI/Process: Process is going to kill itself!\n    java.lang.Exception\n        at android.os.Process.killProcess(Process.java:1330)\n        at com.android.internal.os.RuntimeInit$KillApplicationHandler.uncaughtException(RuntimeInit.java:202)\n        at org.jitsi.meet.sdk.JitsiMeetUncaughtExceptionHandler.uncaughtException(JitsiMeetUncaughtExceptionHandler.java:48)\n        at org.chromium.base.JavaExceptionReporter.uncaughtException(chromium-TrichromeWebViewGoogle6432.aab-stable-556311634:17)\n        at java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:1073)\n        at java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:1068)\n        at java.lang.Thread.dispatchUncaughtException(Thread.java:2306)\nI/Process: Sending signal. PID: 957 SIG: 9\n</code></pre>\n<p>I got to know that this is due to invalid notification image so I tried making it valid.\nI clean built the project. But there was not change. So please give me solution to this issue as soon as possible.\nThankyou.</p>\n"},{"tags":["java","multithreading","locking"],"comments":[{"owner":{"account_id":6277349,"reputation":311,"user_id":4879651,"display_name":"Manash Ranjan Dakua"},"score":0,"creation_date":1527836948,"post_id":3718148,"comment_id":88285742,"body_markdown":"The Class Level Lock is for static method of your class.suppose one class is there MyThread which is having static m1() here MtThread thread got an class level lock for accessing m1() because m1() is static but in other case if MyThread class having static or instace level m2() and any other thread wants to execute for m2() that will allow for m2().","body":"The Class Level Lock is for static method of your class.suppose one class is there MyThread which is having static m1() here MtThread thread got an class level lock for accessing m1() because m1() is static but in other case if MyThread class having static or instace level m2() and any other thread wants to execute for m2() that will allow for m2()."}],"answers":[{"tags":[],"owner":{"account_id":80775,"reputation":80356,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1284558713,"creation_date":1284557934,"answer_id":3718160,"question_id":3718148,"body_markdown":"No, it doesn&#39;t mean that.  The &quot;class level lock&quot; is just a regular lock on a different object, namely `SomeClass.class`.  The &quot;object level lock&quot; locks on `this`.  \r\n\r\n**Edit:** Just to make sure I&#39;m following your understanding of the terminology, you&#39;re wondering if m1 and m2 can be run concurrently as they are defined below:\r\n\r\n    public class SomeClass {\r\n        public synchronized static void m1() {\r\n           //do something\r\n        }\r\n        \r\n        public synchronized void m2() {\r\n           //do something\r\n        }\r\n    }\r\n\r\nAnd the answer is yes, m1 and m2 can be run concurrently.  It is functionally equivalent to this:\r\n\r\n    public class SomeClass {\r\n        public static void m1() {\r\n            synchronized (SomeClass.class) {\r\n               //do something\r\n            }\r\n        }\r\n        public void m2() {\r\n            synchronized (this) {\r\n               //do something\r\n            }\r\n        }\r\n    }\r\n\r\nSince they are synchronizing on completely different objects, they are not mutually exclusive.","title":"Java class level lock vs. object level lock","body":"<p>No, it doesn't mean that.  The \"class level lock\" is just a regular lock on a different object, namely <code>SomeClass.class</code>.  The \"object level lock\" locks on <code>this</code>.  </p>\n\n<p><strong>Edit:</strong> Just to make sure I'm following your understanding of the terminology, you're wondering if m1 and m2 can be run concurrently as they are defined below:</p>\n\n<pre><code>public class SomeClass {\n    public synchronized static void m1() {\n       //do something\n    }\n\n    public synchronized void m2() {\n       //do something\n    }\n}\n</code></pre>\n\n<p>And the answer is yes, m1 and m2 can be run concurrently.  It is functionally equivalent to this:</p>\n\n<pre><code>public class SomeClass {\n    public static void m1() {\n        synchronized (SomeClass.class) {\n           //do something\n        }\n    }\n    public void m2() {\n        synchronized (this) {\n           //do something\n        }\n    }\n}\n</code></pre>\n\n<p>Since they are synchronizing on completely different objects, they are not mutually exclusive.</p>\n"},{"tags":[],"owner":{"account_id":1490856,"reputation":1033,"user_id":1397969,"accept_rate":20,"display_name":"Himanshu Mohta"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1421652558,"creation_date":1337326644,"answer_id":10648577,"question_id":3718148,"body_markdown":"In java there are two types of locks:\r\n\r\n 1. Class Level\r\n 2. Object Level\r\n        \r\nIn case of Static methods the lock is always checked on class\r\n     but in case of instance methods the lock is always checked on object.\r\n        \r\n**Example:**\r\n\r\n`show1()` is *non static* and `show()` is *static*.\r\nNow, `show()` is called by class name (or by object) and \r\n`show1()` is called by object, then both methods can accessed\r\nsimultaneously by two threads.\r\n        \r\n\tclass Shared{\r\n\t\tstatic int x;\r\n\t\tstatic synchronized void show(String s,int a){\r\n\t\t\tx=a;\r\n\t\t\tSystem.out.println(&quot;Starting in method &quot;+s+&quot; &quot;+x);\r\n\t\t\ttry{\r\n\t\t\t\tThread.sleep(2000);\r\n\t\t\t}\r\n\t\t\tcatch(Exception e){ }\r\n\t\t\tSystem.out.println(&quot;Ending from method &quot;+s+&quot; &quot;+x);\r\n\t\t}\r\n\t\tsynchronized void show1(String s,int a){\r\n\t\t\tx=a;\r\n\t\t\tSystem.out.println(&quot;Starting show1 &quot;+s);\r\n\t\t\ttry{\r\n\t\t\t\tThread.sleep(2000);\r\n\t\t\t}\r\n\t\t\tcatch(Exception e){ }\r\n\t\t\tSystem.out.println(&quot;Ending from show1 &quot;+s);\r\n\t\t}\r\n\t}\r\n\tclass CustomThread extends Thread{\r\n\t\tShared s;\r\n\t\tpublic CustomThread(Shared s,String str){\r\n\t\t\tsuper(str);\r\n\t\t\tthis.s=s;\r\n\t\t\tstart();\r\n\t\t}\r\n\t\tpublic void run(){\r\n\t\t\tShared.show(Thread.currentThread().getName(),10);\r\n\t\t}\r\n\t}\r\n\tclass CustomThread1 extends Thread{\r\n\t\tShared s;\r\n\t\tpublic CustomThread1(Shared s,String str){\r\n\t\t\tsuper(str);\r\n\t\t\tthis.s=s;\r\n\t\t\tstart();\r\n\t\t}\r\n\t\tpublic void run(){\r\n\t\t\ts.show1(Thread.currentThread().getName(),20);\r\n\t\t}\r\n\t}\r\n\tpublic class RunSync {\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tShared sh=new Shared();\r\n\t\t\tCustomThread t1=new CustomThread(sh,&quot;one&quot;);\r\n\t\t\tCustomThread1 t2=new CustomThread1(sh,&quot;two&quot;);\r\n\t\t}\r\n\t}\r\n        \r\n        \r\nOutput:\r\n\r\n    Starting in method one 10\r\n    Starting show1 two\r\n    Ending from method one 20\r\n    Ending from show1 two        \r\n\r\n\r\n","title":"Java class level lock vs. object level lock","body":"<p>In java there are two types of locks:</p>\n\n<ol>\n<li>Class Level</li>\n<li>Object Level</li>\n</ol>\n\n<p>In case of Static methods the lock is always checked on class\n     but in case of instance methods the lock is always checked on object.</p>\n\n<p><strong>Example:</strong></p>\n\n<p><code>show1()</code> is <em>non static</em> and <code>show()</code> is <em>static</em>.\nNow, <code>show()</code> is called by class name (or by object) and \n<code>show1()</code> is called by object, then both methods can accessed\nsimultaneously by two threads.</p>\n\n<pre><code>class Shared{\n    static int x;\n    static synchronized void show(String s,int a){\n        x=a;\n        System.out.println(\"Starting in method \"+s+\" \"+x);\n        try{\n            Thread.sleep(2000);\n        }\n        catch(Exception e){ }\n        System.out.println(\"Ending from method \"+s+\" \"+x);\n    }\n    synchronized void show1(String s,int a){\n        x=a;\n        System.out.println(\"Starting show1 \"+s);\n        try{\n            Thread.sleep(2000);\n        }\n        catch(Exception e){ }\n        System.out.println(\"Ending from show1 \"+s);\n    }\n}\nclass CustomThread extends Thread{\n    Shared s;\n    public CustomThread(Shared s,String str){\n        super(str);\n        this.s=s;\n        start();\n    }\n    public void run(){\n        Shared.show(Thread.currentThread().getName(),10);\n    }\n}\nclass CustomThread1 extends Thread{\n    Shared s;\n    public CustomThread1(Shared s,String str){\n        super(str);\n        this.s=s;\n        start();\n    }\n    public void run(){\n        s.show1(Thread.currentThread().getName(),20);\n    }\n}\npublic class RunSync {\n    public static void main(String[] args) {\n        Shared sh=new Shared();\n        CustomThread t1=new CustomThread(sh,\"one\");\n        CustomThread1 t2=new CustomThread1(sh,\"two\");\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Starting in method one 10\nStarting show1 two\nEnding from method one 20\nEnding from show1 two        \n</code></pre>\n"},{"tags":[],"owner":{"account_id":490572,"reputation":3429,"user_id":1792003,"accept_rate":62,"display_name":"Snehal Masne"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1390590200,"creation_date":1390590200,"answer_id":21340399,"question_id":3718148,"body_markdown":"Object level locking: \r\n=====================\r\n\r\nObject level locking is mechanism when you want to synchronize a non-static method or non-static code block such that only one thread will be able to execute the code block on given instance of the class. This should always be done to make instance level data thread safe. This can be done as below : \r\n\r\n    public class DemoClass \r\n    { \r\n      public synchronized void demoMethod(){} \r\n    } \r\n    \r\n    or \r\n    \r\n    public class DemoClass \r\n    { \r\n      public void demoMethod(){ \r\n      synchronized (this) \r\n      { \r\n       //other thread safe code \r\n      } \r\n     } \r\n    } \r\n    \r\n    or \r\n    \r\n    public class DemoClass \r\n    { \r\n      private final Object lock = new Object(); \r\n      public void demoMethod(){ \r\n      synchronized (lock) \r\n     { \r\n      //other thread safe code \r\n     } \r\n    } \r\n\r\n---------------------------------------------------------------------- \r\n\r\nClass level locking: \r\n====================\r\n\r\nClass level locking prevents multiple threads to enter in synchronized block in any of all available instances on runtime. This means if in runtime there are 100 instances of DemoClass, then only one thread will be able to execute demoMethod() in any one of instance at a time, and all other instances will be locked for other threads. This should always be done to make static data thread safe. \r\n\r\n    public class DemoClass \r\n    { \r\n      public synchronized static void demoMethod(){} \r\n    } \r\n    \r\n    or \r\n    \r\n    public class DemoClass \r\n    { \r\n      public void demoMethod(){ \r\n      synchronized (DemoClass.class) \r\n      { \r\n       //other thread safe code \r\n      } \r\n     } \r\n    } \r\n    \r\n    or \r\n    \r\n    public class DemoClass \r\n    { \r\n     private final static Object lock = new Object(); \r\n     public void demoMethod(){ \r\n     synchronized (lock) \r\n      { \r\n       //other thread safe code \r\n      } \r\n     } \r\n    }\r\n","title":"Java class level lock vs. object level lock","body":"<h1>Object level locking:</h1>\n\n<p>Object level locking is mechanism when you want to synchronize a non-static method or non-static code block such that only one thread will be able to execute the code block on given instance of the class. This should always be done to make instance level data thread safe. This can be done as below : </p>\n\n<pre><code>public class DemoClass \n{ \n  public synchronized void demoMethod(){} \n} \n\nor \n\npublic class DemoClass \n{ \n  public void demoMethod(){ \n  synchronized (this) \n  { \n   //other thread safe code \n  } \n } \n} \n\nor \n\npublic class DemoClass \n{ \n  private final Object lock = new Object(); \n  public void demoMethod(){ \n  synchronized (lock) \n { \n  //other thread safe code \n } \n} \n</code></pre>\n\n<hr>\n\n<h1>Class level locking:</h1>\n\n<p>Class level locking prevents multiple threads to enter in synchronized block in any of all available instances on runtime. This means if in runtime there are 100 instances of DemoClass, then only one thread will be able to execute demoMethod() in any one of instance at a time, and all other instances will be locked for other threads. This should always be done to make static data thread safe. </p>\n\n<pre><code>public class DemoClass \n{ \n  public synchronized static void demoMethod(){} \n} \n\nor \n\npublic class DemoClass \n{ \n  public void demoMethod(){ \n  synchronized (DemoClass.class) \n  { \n   //other thread safe code \n  } \n } \n} \n\nor \n\npublic class DemoClass \n{ \n private final static Object lock = new Object(); \n public void demoMethod(){ \n synchronized (lock) \n  { \n   //other thread safe code \n  } \n } \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2579581,"reputation":761,"user_id":2236549,"accept_rate":29,"display_name":"Subha Chandra"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1435223056,"creation_date":1435223056,"answer_id":31045814,"question_id":3718148,"body_markdown":"\r\n&gt; Example to understand Object and Class level locks in Java\r\n\r\n**1) Object Level lock example**\r\n\r\n    package com.test;\r\n    \r\n    public class Foo implements Runnable {\r\n        \r\n        @Override\r\n        public void run() {\r\n            Lock();\r\n        }\r\n        public void Lock() {\r\n            System.out.println(Thread.currentThread().getName());\r\n            synchronized(this) {\r\n                System.out.println(&quot;in block &quot; + Thread.currentThread().getName());\r\n                System.out.println(&quot;in block &quot; + Thread.currentThread().getName() + &quot; end&quot;);\r\n            }\r\n        }\r\n     \r\n        public static void main(String[] args) {\r\n            Foo b1 = new Foo();\r\n            Thread t1 = new Thread(b1);\r\n            Thread t2 = new Thread(b1);             \r\n            Foo b2 = new Foo();\r\n            Thread t3 = new Thread(b2);             \r\n            t1.setName(&quot;t1&quot;);\r\n            t2.setName(&quot;t2&quot;);\r\n            t3.setName(&quot;t3&quot;);             \r\n            t1.start();\r\n            t2.start();\r\n            t3.start();\r\n        }\r\n    }\r\n  \r\n&gt;   output:\r\n\r\n   \r\n\r\n        t1\r\n        t3\r\n        t2\r\n        in block t3\r\n        in block t1\r\n        in block t3 end\r\n        in block t1 end\r\n        in block t2\r\n\r\nNote that t3 will not block when threads t1 and t2 block. Because the lock is placed on this object and thread **t3 has different this object** than thread t1,t2\r\n\r\n**2) Class Level lock example**\r\n\r\nThe code in object level lock, only Foo.class is added in synchronized block.\r\nAll the threads are getting created using object of Foo class will get blocked.\r\n\r\n    package com.test;    \r\n    public class Foo implements Runnable {        \r\n        @Override\r\n        public void run() {\r\n            Lock();\r\n        }\r\n         \r\n        public void Lock() {\r\n            System.out.println(Thread.currentThread().getName());\r\n            synchronized(Foo.class) {\r\n                System.out.println(&quot;in block &quot; + Thread.currentThread().getName());\r\n                System.out.println(&quot;in block &quot; + Thread.currentThread().getName() + &quot; end&quot;);\r\n            }\r\n        }\r\n     \r\n        public static void main(String[] args) {\r\n            Foo b1 = new Foo();\r\n            Thread t1 = new Thread(b1);\r\n            Thread t2 = new Thread(b1);             \r\n            Foo b2 = new Foo();\r\n            Thread t3 = new Thread(b2);             \r\n            t1.setName(&quot;t1&quot;);\r\n            t2.setName(&quot;t2&quot;);\r\n            t3.setName(&quot;t3&quot;);             \r\n            t1.start();\r\n            t2.start();\r\n            t3.start();\r\n        }\r\n    }\r\n\r\n&gt; output:\r\n\r\n    t1\r\n    t3\r\n    in block t1\r\n    in block t1 end\r\n    t2\r\n    in block t3\r\n    in block t3 end\r\n    in block t2\r\n    in block t2 end\r\n\r\nSynchronized block is going to be executed for the same thread.","title":"Java class level lock vs. object level lock","body":"<blockquote>\n  <p>Example to understand Object and Class level locks in Java</p>\n</blockquote>\n\n<p><strong>1) Object Level lock example</strong></p>\n\n<pre><code>package com.test;\n\npublic class Foo implements Runnable {\n\n    @Override\n    public void run() {\n        Lock();\n    }\n    public void Lock() {\n        System.out.println(Thread.currentThread().getName());\n        synchronized(this) {\n            System.out.println(\"in block \" + Thread.currentThread().getName());\n            System.out.println(\"in block \" + Thread.currentThread().getName() + \" end\");\n        }\n    }\n\n    public static void main(String[] args) {\n        Foo b1 = new Foo();\n        Thread t1 = new Thread(b1);\n        Thread t2 = new Thread(b1);             \n        Foo b2 = new Foo();\n        Thread t3 = new Thread(b2);             \n        t1.setName(\"t1\");\n        t2.setName(\"t2\");\n        t3.setName(\"t3\");             \n        t1.start();\n        t2.start();\n        t3.start();\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>output:</p>\n</blockquote>\n\n<pre><code>    t1\n    t3\n    t2\n    in block t3\n    in block t1\n    in block t3 end\n    in block t1 end\n    in block t2\n</code></pre>\n\n<p>Note that t3 will not block when threads t1 and t2 block. Because the lock is placed on this object and thread <strong>t3 has different this object</strong> than thread t1,t2</p>\n\n<p><strong>2) Class Level lock example</strong></p>\n\n<p>The code in object level lock, only Foo.class is added in synchronized block.\nAll the threads are getting created using object of Foo class will get blocked.</p>\n\n<pre><code>package com.test;    \npublic class Foo implements Runnable {        \n    @Override\n    public void run() {\n        Lock();\n    }\n\n    public void Lock() {\n        System.out.println(Thread.currentThread().getName());\n        synchronized(Foo.class) {\n            System.out.println(\"in block \" + Thread.currentThread().getName());\n            System.out.println(\"in block \" + Thread.currentThread().getName() + \" end\");\n        }\n    }\n\n    public static void main(String[] args) {\n        Foo b1 = new Foo();\n        Thread t1 = new Thread(b1);\n        Thread t2 = new Thread(b1);             \n        Foo b2 = new Foo();\n        Thread t3 = new Thread(b2);             \n        t1.setName(\"t1\");\n        t2.setName(\"t2\");\n        t3.setName(\"t3\");             \n        t1.start();\n        t2.start();\n        t3.start();\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>output:</p>\n</blockquote>\n\n<pre><code>t1\nt3\nin block t1\nin block t1 end\nt2\nin block t3\nin block t3 end\nin block t2\nin block t2 end\n</code></pre>\n\n<p>Synchronized block is going to be executed for the same thread.</p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71911,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477499339,"creation_date":1435648175,"answer_id":31131792,"question_id":3718148,"body_markdown":"&gt;It’s possible that both static synchronized and non static synchronized method can run simultaneously or concurrently because they lock on different object.\r\n\r\n[Courtesy][1]\r\n\r\n\r\n  [1]: http://howtodoinjava.com/2013/03/08/thread-synchronization-object-level-locking-and-class-level-locking/","title":"Java class level lock vs. object level lock","body":"<blockquote>\n  <p>It’s possible that both static synchronized and non static synchronized method can run simultaneously or concurrently because they lock on different object.</p>\n</blockquote>\n\n<p><a href=\"http://howtodoinjava.com/2013/03/08/thread-synchronization-object-level-locking-and-class-level-locking/\" rel=\"nofollow\">Courtesy</a></p>\n"},{"tags":[],"owner":{"account_id":8719312,"reputation":33,"user_id":6522935,"display_name":"aayush mohanka"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1474183254,"creation_date":1474183254,"answer_id":39555133,"question_id":3718148,"body_markdown":"Class level lock is achieved by keyword &quot;Static Synchronized,where as object level is achieved only by synchronized keyword.\r\nObject level lock is achieved to restrict same object to operate through different thread,where as class level lock is achieved to restrict any object to operate.\r\n\r\n","title":"Java class level lock vs. object level lock","body":"<p>Class level lock is achieved by keyword \"Static Synchronized,where as object level is achieved only by synchronized keyword.\nObject level lock is achieved to restrict same object to operate through different thread,where as class level lock is achieved to restrict any object to operate.</p>\n"},{"tags":[],"owner":{"account_id":2342901,"reputation":169,"user_id":2053813,"display_name":"Manjunath"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492663116,"creation_date":1492663116,"answer_id":43510311,"question_id":3718148,"body_markdown":"Different ways of class level locking:\r\n1)\r\npublic class DemoClass {\r\n\r\n\tpublic static synchronized void demoMethod(){\r\n\t\t//dosomething\r\n\t}\r\n\r\n}\r\n\r\n2)\r\n\r\npublic class DemoClass {\r\n\r\n\tpublic void demoMethod(){\r\n\r\n\t\tsynchronized(DemoClass.class){\r\n\t\t\t//dosomething\r\n\t\t} \r\n\t}\r\n\r\n}\r\n\r\n3)\r\n\r\npublic class DemoClass {\r\n\r\n\tprivate final static Object lock = new Object(); \r\n\tpublic void demoMethod(){\r\n\r\n\t\tsynchronized(lock){\r\n\t\t\t//dosomething\r\n\t\t} \r\n\t}\r\n\r\n}","title":"Java class level lock vs. object level lock","body":"<p>Different ways of class level locking:\n1)\npublic class DemoClass {</p>\n\n<pre><code>public static synchronized void demoMethod(){\n    //dosomething\n}\n</code></pre>\n\n<p>}</p>\n\n<p>2)</p>\n\n<p>public class DemoClass {</p>\n\n<pre><code>public void demoMethod(){\n\n    synchronized(DemoClass.class){\n        //dosomething\n    } \n}\n</code></pre>\n\n<p>}</p>\n\n<p>3)</p>\n\n<p>public class DemoClass {</p>\n\n<pre><code>private final static Object lock = new Object(); \npublic void demoMethod(){\n\n    synchronized(lock){\n        //dosomething\n    } \n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":4801411,"reputation":189,"user_id":3912385,"accept_rate":55,"display_name":"rajvineet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1495880894,"creation_date":1495880894,"answer_id":44215736,"question_id":3718148,"body_markdown":"Class level lock and instance level lock both are different. Both don’t interfere each other lock status. If one instance of a class has already got locked by a thread then another thread can’t get lock for that instance until unless lock is freed by first thread.\r\nSame behaviour is there for class level lock.\r\n\r\nBut if a thread acquires Class level lock then another thread can acquire lock on one of its instance. Both can work parallel.`\r\n\r\n    package lock;\r\n    \r\n    class LockA implements Runnable {\r\n        @Override\r\n        public void run() {\r\n            synchronized (LockA.class) {\r\n                System.out.println(&quot;Class&quot;);\r\n                try {\r\n                    Thread.sleep(60 * 1000);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    public class TestClassVsInstanceLock {\r\n        public static void main(String[] args) {\r\n            final LockA a = new LockA();\r\n            final LockA b = new LockA();\r\n            try {\r\n                Thread t = new Thread(a);\r\n                Thread t1 = new Thread() {\r\n                    @Override\r\n                    public void run() {\r\n                        synchronized (b) {\r\n                            System.out.println(&quot;Instance 1&quot;+ currentThread().currentThread().holdsLock(b));\r\n                            try {\r\n                                Thread.sleep(10 * 1000);\r\n                            } catch (InterruptedException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n                t.start();\r\n                t1.start();\r\n                synchronized (a) {\r\n                    System.out.println(&quot;Instance2&quot;);\r\n                    Thread.sleep(10 * 1000);\r\n                }\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n`\r\n\r\n\r\nThis will print : -\r\nInstance2\r\nClass\r\nInstance 1true \r\n   \r\nAll will get printed instantly without any pause.\r\n\r\n\r\n\r\n","title":"Java class level lock vs. object level lock","body":"<p>Class level lock and instance level lock both are different. Both don’t interfere each other lock status. If one instance of a class has already got locked by a thread then another thread can’t get lock for that instance until unless lock is freed by first thread.\nSame behaviour is there for class level lock.</p>\n\n<p>But if a thread acquires Class level lock then another thread can acquire lock on one of its instance. Both can work parallel.`</p>\n\n<pre><code>package lock;\n\nclass LockA implements Runnable {\n    @Override\n    public void run() {\n        synchronized (LockA.class) {\n            System.out.println(\"Class\");\n            try {\n                Thread.sleep(60 * 1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\npublic class TestClassVsInstanceLock {\n    public static void main(String[] args) {\n        final LockA a = new LockA();\n        final LockA b = new LockA();\n        try {\n            Thread t = new Thread(a);\n            Thread t1 = new Thread() {\n                @Override\n                public void run() {\n                    synchronized (b) {\n                        System.out.println(\"Instance 1\"+ currentThread().currentThread().holdsLock(b));\n                        try {\n                            Thread.sleep(10 * 1000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                }\n            };\n            t.start();\n            t1.start();\n            synchronized (a) {\n                System.out.println(\"Instance2\");\n                Thread.sleep(10 * 1000);\n            }\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>`</p>\n\n<p>This will print : -\nInstance2\nClass\nInstance 1true </p>\n\n<p>All will get printed instantly without any pause.</p>\n"},{"tags":[],"owner":{"display_name":"user4811324"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1561527416,"creation_date":1561527416,"answer_id":56765885,"question_id":3718148,"body_markdown":"Nope, both can execute concurrently.\r\n1.When class level lock is applied on one method **synchronized(SomeClass.class)** and on other method object level lock is applied **synchronized(this)** then, both can execute at same time.\r\n\r\nonly when class level lock is applied on both methods then there is no concurrent execution.\r\n\r\nReason being: for class, jvm creates object for java.lang.Class, i.e. in short everything in java is object. So, when class level lock is applied on 2 methods, common lock is applied on class object and every object has single lock so, every thread waits, but when different instance is used to invoke the 2nd method and instance level lock is applied at that time, this object lock is applied which is different from class object lock and so concurrent execution is possible.","title":"Java class level lock vs. object level lock","body":"<p>Nope, both can execute concurrently.\n1.When class level lock is applied on one method <strong>synchronized(SomeClass.class)</strong> and on other method object level lock is applied <strong>synchronized(this)</strong> then, both can execute at same time.</p>\n\n<p>only when class level lock is applied on both methods then there is no concurrent execution.</p>\n\n<p>Reason being: for class, jvm creates object for java.lang.Class, i.e. in short everything in java is object. So, when class level lock is applied on 2 methods, common lock is applied on class object and every object has single lock so, every thread waits, but when different instance is used to invoke the 2nd method and instance level lock is applied at that time, this object lock is applied which is different from class object lock and so concurrent execution is possible.</p>\n"},{"tags":[],"owner":{"account_id":9959452,"reputation":2037,"user_id":7369238,"display_name":"ABHAY JOHRI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576497892,"creation_date":1576497892,"answer_id":59356292,"question_id":3718148,"body_markdown":"**Instance Level Locking**, Only single thread is allowed to execute at a time using instance level locking.\r\n  \r\n\r\n     public class Refactor implements Runnable {\r\n        \tprivate Object obj;\r\n        \t\r\n        \tpublic Refactor(Object obj)\r\n        \t{\r\n        \t\tthis.obj = obj;\r\n        \t}\r\n        \r\n        \tpublic void run() {\r\n        \r\n        \t\tif (Thread.currentThread().getName().equalsIgnoreCase(&quot;Test1&quot;)) {\r\n        \t\t\ttest1();\r\n        \t\t} else {\r\n        \t\t\ttest2();\r\n        \t\t}\r\n        \r\n        \t}\r\n        \r\n        \tpublic void test1() {\r\n        \t\tsynchronized (obj) {\r\n        \t\t\tSystem.out.println(&quot;Test1&quot;);\r\n        \t\t}\r\n        \t}\r\n        \r\n        \tpublic synchronized void test2() {\r\n        \t\tsynchronized (obj) {\r\n        \t\t\tSystem.out.println(&quot;Test2&quot;);\r\n        \t\t}\r\n        \t}\r\n        \r\n        \tpublic static void main(String[] args) {\r\n        \t\tObject obj = new Object();\r\n        \t\tThread t1 = new Thread(new Refactor(obj));\r\n        \t\tt1.setName(&quot;Test1&quot;);\r\n        \t\tt1.start();\r\n        \t\tThread t2 = new Thread(new Refactor(obj));\r\n        \t\tt2.setName(&quot;Test2&quot;);\r\n        \t\tt2.start();\r\n        \t}\r\n        \r\n        }\r\n**Class Level Locking**, Only single thread is allowed to execute at a time using class level locking.\r\n\r\n\r\n    public class Refactor implements Runnable {\r\n    \tprivate Object obj;\r\n    \t\r\n    \tpublic Refactor(Object obj)\r\n    \t{\r\n    \t\tthis.obj = obj;\r\n    \t}\r\n    \r\n    \tpublic void run() {\r\n    \r\n    \t\tif (Thread.currentThread().getName().equalsIgnoreCase(&quot;Test1&quot;)) {\r\n    \t\t\ttest1();\r\n    \t\t} else {\r\n    \t\t\ttest2();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic static void test1() {\r\n    \t\tsynchronized (Refactor.class) {\r\n    \t\t\tSystem.out.println(&quot;Test1&quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static synchronized void test2() {\r\n    \t\tsynchronized (Refactor.class) {\r\n    \t\t\tSystem.out.println(&quot;Test2&quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tObject obj = new Object();\r\n    \t\tThread t1 = new Thread(new Refactor(obj));\r\n    \t\tt1.setName(&quot;Test1&quot;);\r\n    \t\tt1.start();\r\n    \t\tThread t2 = new Thread(new Refactor(obj));\r\n    \t\tt2.setName(&quot;Test2&quot;);\r\n    \t\tt2.start();\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Java class level lock vs. object level lock","body":"<p><strong>Instance Level Locking</strong>, Only single thread is allowed to execute at a time using instance level locking.</p>\n\n<pre><code> public class Refactor implements Runnable {\n        private Object obj;\n\n        public Refactor(Object obj)\n        {\n            this.obj = obj;\n        }\n\n        public void run() {\n\n            if (Thread.currentThread().getName().equalsIgnoreCase(\"Test1\")) {\n                test1();\n            } else {\n                test2();\n            }\n\n        }\n\n        public void test1() {\n            synchronized (obj) {\n                System.out.println(\"Test1\");\n            }\n        }\n\n        public synchronized void test2() {\n            synchronized (obj) {\n                System.out.println(\"Test2\");\n            }\n        }\n\n        public static void main(String[] args) {\n            Object obj = new Object();\n            Thread t1 = new Thread(new Refactor(obj));\n            t1.setName(\"Test1\");\n            t1.start();\n            Thread t2 = new Thread(new Refactor(obj));\n            t2.setName(\"Test2\");\n            t2.start();\n        }\n\n    }\n</code></pre>\n\n<p><strong>Class Level Locking</strong>, Only single thread is allowed to execute at a time using class level locking.</p>\n\n<pre><code>public class Refactor implements Runnable {\n    private Object obj;\n\n    public Refactor(Object obj)\n    {\n        this.obj = obj;\n    }\n\n    public void run() {\n\n        if (Thread.currentThread().getName().equalsIgnoreCase(\"Test1\")) {\n            test1();\n        } else {\n            test2();\n        }\n\n    }\n\n    public static void test1() {\n        synchronized (Refactor.class) {\n            System.out.println(\"Test1\");\n        }\n    }\n\n    public static synchronized void test2() {\n        synchronized (Refactor.class) {\n            System.out.println(\"Test2\");\n        }\n    }\n\n    public static void main(String[] args) {\n        Object obj = new Object();\n        Thread t1 = new Thread(new Refactor(obj));\n        t1.setName(\"Test1\");\n        t1.start();\n        Thread t2 = new Thread(new Refactor(obj));\n        t2.setName(\"Test2\");\n        t2.start();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":653630,"reputation":421,"user_id":448463,"display_name":"kgi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68625,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"answer_count":10,"score":42,"last_activity_date":1681575350,"creation_date":1284557883,"question_id":3718148,"body_markdown":"If a thread T1 enters a method m1 by obtaining the class level lock, does this mean another thread T2 cannot run a different method m2 by obtaining the object level lock?\r\n","title":"Java class level lock vs. object level lock","body":"<p>If a thread T1 enters a method m1 by obtaining the class level lock, does this mean another thread T2 cannot run a different method m2 by obtaining the object level lock?</p>\n"},{"tags":["java","selenium-webdriver","radio-button"],"answers":[{"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681575129,"creation_date":1681575129,"answer_id":76023386,"question_id":76021327,"body_markdown":"There are a few common situations you may be running into that are causing your issue:\r\n\r\n1. You need to add a wait. It&#39;s possible the page loads slowly and your code is attempting to find the element on the page before it actually appears.\r\n\r\n1. The button is in an IFRAME. See [the docs](https://www.selenium.dev/documentation/webdriver/interactions/frames/) on how to handle this.\r\n\r\n1. The button is in a shadow-root. See https://stackoverflow.com/q/75931152/2386774 for info on how to handle this.\r\n\r\nGiven the HTML you provided, the locator below should work. I&#39;ve added a wait.\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\r\n    wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//span[@class=&#39;cmp-answer-label&#39;]/p[text()=&#39;Anwer No 1&#39;]&quot;))).click();\r\n","title":"Selenium Java - Find Element for Radio Button","body":"<p>There are a few common situations you may be running into that are causing your issue:</p>\n<ol>\n<li><p>You need to add a wait. It's possible the page loads slowly and your code is attempting to find the element on the page before it actually appears.</p>\n</li>\n<li><p>The button is in an IFRAME. See <a href=\"https://www.selenium.dev/documentation/webdriver/interactions/frames/\" rel=\"nofollow noreferrer\">the docs</a> on how to handle this.</p>\n</li>\n<li><p>The button is in a shadow-root. See <a href=\"https://stackoverflow.com/q/75931152/2386774\">java.lang.NullPointerException error when trying to locate a shadow element with Selenium</a> for info on how to handle this.</p>\n</li>\n</ol>\n<p>Given the HTML you provided, the locator below should work. I've added a wait.</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\nwait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//span[@class='cmp-answer-label']/p[text()='Anwer No 1']&quot;))).click();\n</code></pre>\n"}],"owner":{"account_id":28301919,"reputation":15,"user_id":21640486,"display_name":"Jocken"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76023386,"answer_count":1,"score":1,"last_activity_date":1681575129,"creation_date":1681549891,"question_id":76021327,"body_markdown":"I am dealing with Selenium-Java. For that I need to perform an automatization on a web page.\r\n\r\nAfter recieving very good feedback last time I do have the challenge to find one of the objects I would like to click on.\r\n\r\nThe following HTML code defines the structure on the page:\r\n\r\n    &lt;div class=&quot;cmp-answers&quot; data-evaluation=&quot;0&quot; data-style=&quot;sc&quot; data-submit-on-answer-click=&quot;0&quot; data-columns=&quot;1&quot;&gt;\r\n    \t&lt;label class=&quot;cmp-answer correct disabled&quot;&gt;\r\n    \t\t&lt;input type=&quot;radio&quot; name=&quot;answer3425&quot; data-question-id=&quot;3425&quot; data-answer-id=&quot;16882&quot; value=&quot;1&quot; checked=&quot;&quot; disabled=&quot;&quot; data-misc-answer=&quot;0&quot; autocomplete=&quot;off&quot;&gt;\r\n    \t\t&lt;div class=&quot;cmp-answer-ui&quot;&gt;\r\n    \t\t\t&lt;span class=&quot;cmp-answer-label&quot;&gt;&lt;p&gt;Anwer No 1&lt;/p&gt;&lt;/span&gt;\r\n    \t\t\t&lt;span class=&quot;cmp-answer-feedback&quot;&gt;&lt;/span&gt;\r\n    \t\t&lt;/div&gt;\r\n    \t&lt;/label&gt;\r\n    \t&lt;label class=&quot;cmp-answer  disabled&quot;&gt;\t\r\n    \t\t&lt;input type=&quot;radio&quot; name=&quot;answer3425&quot; data-question-id=&quot;3425&quot; data-answer-id=&quot;16884&quot; value=&quot;1&quot; disabled=&quot;&quot; data-misc-answer=&quot;0&quot; autocomplete=&quot;off&quot;&gt;\r\n    \t\t\t&lt;div class=&quot;cmp-answer-ui&quot;&gt;\t\t\r\n    \t\t\t\t&lt;span class=&quot;cmp-answer-label&quot;&gt;&lt;p&gt;Answer No 2&lt;/p&gt;&lt;/span&gt;\r\n    \t\t\t\t&lt;span class=&quot;cmp-answer-feedback&quot;&gt;&lt;/span&gt;\r\n    \t\t\t&lt;/div&gt;\r\n    \t&lt;/label&gt;\r\n    \t&lt;label class=&quot;cmp-answer  disabled&quot;&gt;\r\n    \t\t&lt;input type=&quot;radio&quot; name=&quot;answer3425&quot; data-question-id=&quot;3425&quot; data-answer-id=&quot;16883&quot; value=&quot;1&quot; disabled=&quot;&quot; data-misc-answer=&quot;0&quot; autocomplete=&quot;off&quot;&gt;\r\n    \t\t\t&lt;div class=&quot;cmp-answer-ui&quot;&gt;\r\n    \t\t\t\t&lt;span class=&quot;cmp-answer-label&quot;&gt;&lt;p&gt;Answer No 3&lt;/p&gt;&lt;/span&gt;\r\n    \t\t\t\t&lt;span class=&quot;cmp-answer-feedback&quot;&gt;&lt;/span&gt;\r\n    \t\t\t&lt;/div&gt;\r\n    \t&lt;/label&gt;\r\n    &lt;/div&gt;\r\n\r\n\r\nThese kindes of radio buttons provide three different options to choose:\r\n- `Answer No1`\r\n- `Answer No2`\r\n- `Answer No3`\r\n\r\nFor test reasons I would do the automatic click on `Answer No1`.\r\n\r\nVia the html analysis I copied the `xPath` as well as the CSS finder information.\r\n\r\nI used this information within the `findElement` method like: \r\n\r\n    driver.findElement(By.cssSelector(...));`\r\n\r\nor \r\n\r\n    driver.findElement(By.xpath(...));`\r\n\r\nI copied the `xPath` for different objects defined by the HTML code shown above and used it within the `findElement` method.\r\nUnfortunately none of these options leads to the fact that I was able to find or indicate the object via Selenium.\r\n\r\nTherefore, my question.\r\nIs anyone of you experienced with that or faced the same or similar chalange?\r\nIs there any advice or solution how I can find the object via Selenium an (in the next step) click on that button.\r\n\r\nThank you in advance for any help.\r\n\r\nAs arguments I used the output of the html analysis (copy-\\&gt;xpath / copy-\\&gt; css).\r\n\r\nMoreover, in the next step I would like to execute `click()` after finding the element itself.","title":"Selenium Java - Find Element for Radio Button","body":"<p>I am dealing with Selenium-Java. For that I need to perform an automatization on a web page.</p>\n<p>After recieving very good feedback last time I do have the challenge to find one of the objects I would like to click on.</p>\n<p>The following HTML code defines the structure on the page:</p>\n<pre><code>&lt;div class=&quot;cmp-answers&quot; data-evaluation=&quot;0&quot; data-style=&quot;sc&quot; data-submit-on-answer-click=&quot;0&quot; data-columns=&quot;1&quot;&gt;\n    &lt;label class=&quot;cmp-answer correct disabled&quot;&gt;\n        &lt;input type=&quot;radio&quot; name=&quot;answer3425&quot; data-question-id=&quot;3425&quot; data-answer-id=&quot;16882&quot; value=&quot;1&quot; checked=&quot;&quot; disabled=&quot;&quot; data-misc-answer=&quot;0&quot; autocomplete=&quot;off&quot;&gt;\n        &lt;div class=&quot;cmp-answer-ui&quot;&gt;\n            &lt;span class=&quot;cmp-answer-label&quot;&gt;&lt;p&gt;Anwer No 1&lt;/p&gt;&lt;/span&gt;\n            &lt;span class=&quot;cmp-answer-feedback&quot;&gt;&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/label&gt;\n    &lt;label class=&quot;cmp-answer  disabled&quot;&gt;    \n        &lt;input type=&quot;radio&quot; name=&quot;answer3425&quot; data-question-id=&quot;3425&quot; data-answer-id=&quot;16884&quot; value=&quot;1&quot; disabled=&quot;&quot; data-misc-answer=&quot;0&quot; autocomplete=&quot;off&quot;&gt;\n            &lt;div class=&quot;cmp-answer-ui&quot;&gt;     \n                &lt;span class=&quot;cmp-answer-label&quot;&gt;&lt;p&gt;Answer No 2&lt;/p&gt;&lt;/span&gt;\n                &lt;span class=&quot;cmp-answer-feedback&quot;&gt;&lt;/span&gt;\n            &lt;/div&gt;\n    &lt;/label&gt;\n    &lt;label class=&quot;cmp-answer  disabled&quot;&gt;\n        &lt;input type=&quot;radio&quot; name=&quot;answer3425&quot; data-question-id=&quot;3425&quot; data-answer-id=&quot;16883&quot; value=&quot;1&quot; disabled=&quot;&quot; data-misc-answer=&quot;0&quot; autocomplete=&quot;off&quot;&gt;\n            &lt;div class=&quot;cmp-answer-ui&quot;&gt;\n                &lt;span class=&quot;cmp-answer-label&quot;&gt;&lt;p&gt;Answer No 3&lt;/p&gt;&lt;/span&gt;\n                &lt;span class=&quot;cmp-answer-feedback&quot;&gt;&lt;/span&gt;\n            &lt;/div&gt;\n    &lt;/label&gt;\n&lt;/div&gt;\n</code></pre>\n<p>These kindes of radio buttons provide three different options to choose:</p>\n<ul>\n<li><code>Answer No1</code></li>\n<li><code>Answer No2</code></li>\n<li><code>Answer No3</code></li>\n</ul>\n<p>For test reasons I would do the automatic click on <code>Answer No1</code>.</p>\n<p>Via the html analysis I copied the <code>xPath</code> as well as the CSS finder information.</p>\n<p>I used this information within the <code>findElement</code> method like:</p>\n<pre><code>driver.findElement(By.cssSelector(...));`\n</code></pre>\n<p>or</p>\n<pre><code>driver.findElement(By.xpath(...));`\n</code></pre>\n<p>I copied the <code>xPath</code> for different objects defined by the HTML code shown above and used it within the <code>findElement</code> method.\nUnfortunately none of these options leads to the fact that I was able to find or indicate the object via Selenium.</p>\n<p>Therefore, my question.\nIs anyone of you experienced with that or faced the same or similar chalange?\nIs there any advice or solution how I can find the object via Selenium an (in the next step) click on that button.</p>\n<p>Thank you in advance for any help.</p>\n<p>As arguments I used the output of the html analysis (copy-&gt;xpath / copy-&gt; css).</p>\n<p>Moreover, in the next step I would like to execute <code>click()</code> after finding the element itself.</p>\n"},{"tags":["java","spring-boot","quarkus","azure-data-explorer","kql"],"answers":[{"tags":[],"owner":{"account_id":10679216,"reputation":23682,"user_id":7861807,"display_name":"Yoni L."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681484643,"creation_date":1681484643,"answer_id":76016501,"question_id":76011696,"body_markdown":"there are client libraries provided in multiple programming languages you can use as part of your automation: https://learn.microsoft.com/en-us/azure/data-explorer/kusto/api/client-libraries\r\n\r\nyou can also use the Kusto.Cli tool: https://learn.microsoft.com/en-us/azure/data-explorer/kusto/tools/kusto-cli","title":"Is there a way to Automate Kustos Queries (KQL) files to run?","body":"<p>there are client libraries provided in multiple programming languages you can use as part of your automation: <a href=\"https://learn.microsoft.com/en-us/azure/data-explorer/kusto/api/client-libraries\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/data-explorer/kusto/api/client-libraries</a></p>\n<p>you can also use the Kusto.Cli tool: <a href=\"https://learn.microsoft.com/en-us/azure/data-explorer/kusto/tools/kusto-cli\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/data-explorer/kusto/tools/kusto-cli</a></p>\n"},{"tags":[],"owner":{"account_id":3620288,"reputation":991,"user_id":3019198,"accept_rate":57,"display_name":"TheFunk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681575020,"creation_date":1681575020,"answer_id":76023382,"question_id":76011696,"body_markdown":"There is a Java library provided by Microsoft for this called azure-kusto-java.\r\n\r\nIt is available on Maven Central as two separate packages.\r\n\r\nOne for queries:\r\nhttps://mvnrepository.com/artifact/com.microsoft.azure.kusto/kusto-data\r\n\r\nAnd one for ingestion:\r\nhttps://mvnrepository.com/artifact/com.microsoft.azure.kusto/kusto-ingest\r\n\r\n[Here&#39;s the GitHub repo.][1]\r\n\r\nAdditionally, I just wrapped up work on a Quarkus extension to simplify the process, however I need to get it approved for release into the wild.\r\n\r\n  [1]: https://github.com/Azure/azure-kusto-java","title":"Is there a way to Automate Kustos Queries (KQL) files to run?","body":"<p>There is a Java library provided by Microsoft for this called azure-kusto-java.</p>\n<p>It is available on Maven Central as two separate packages.</p>\n<p>One for queries:\n<a href=\"https://mvnrepository.com/artifact/com.microsoft.azure.kusto/kusto-data\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.microsoft.azure.kusto/kusto-data</a></p>\n<p>And one for ingestion:\n<a href=\"https://mvnrepository.com/artifact/com.microsoft.azure.kusto/kusto-ingest\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.microsoft.azure.kusto/kusto-ingest</a></p>\n<p><a href=\"https://github.com/Azure/azure-kusto-java\" rel=\"nofollow noreferrer\">Here's the GitHub repo.</a></p>\n<p>Additionally, I just wrapped up work on a Quarkus extension to simplify the process, however I need to get it approved for release into the wild.</p>\n"}],"owner":{"account_id":5011208,"reputation":127,"user_id":4027455,"accept_rate":83,"display_name":"sam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76023382,"answer_count":2,"score":2,"last_activity_date":1681575020,"creation_date":1681447918,"question_id":76011696,"body_markdown":"I am trying to find any solutions or reference where I can run the bunch of KQL files which has the unit test via automated script? What is the best way to automate the KQL unit test? Currently am running it manually these unit test cases but want to convert it to automation. I can create a microservice in spring boot or quarkus but how to read this in the java and automate it? Not just with java any other way to automate this?","title":"Is there a way to Automate Kustos Queries (KQL) files to run?","body":"<p>I am trying to find any solutions or reference where I can run the bunch of KQL files which has the unit test via automated script? What is the best way to automate the KQL unit test? Currently am running it manually these unit test cases but want to convert it to automation. I can create a microservice in spring boot or quarkus but how to read this in the java and automate it? Not just with java any other way to automate this?</p>\n"},{"tags":["java","algorithm","kotlin","recursion","dependency-injection"],"comments":[{"owner":{"account_id":21554207,"reputation":93,"user_id":15889782,"display_name":"underflow"},"score":0,"creation_date":1681575124,"post_id":76023347,"comment_id":134080145,"body_markdown":"Note that I am trying to take inspiration from Guice on that, but I have a feeling that this can be implemented or at least _explained_ in much simpler terms than in case of Guice.","body":"Note that I am trying to take inspiration from Guice on that, but I have a feeling that this can be implemented or at least <i>explained</i> in much simpler terms than in case of Guice."},{"owner":{"account_id":21554207,"reputation":93,"user_id":15889782,"display_name":"underflow"},"score":0,"creation_date":1681575162,"post_id":76023347,"comment_id":134080155,"body_markdown":"[SingletonScope.java](https://github.com/google/guice/blob/e960b66d3d5931b9cb1aebd49e452e2c489a921e/core/src/com/google/inject/internal/SingletonScope.java)\n[Initializer.java](https://github.com/google/guice/blob/e960b66d3d5931b9cb1aebd49e452e2c489a921e/core/src/com/google/inject/internal/Initializer.java)\n[CycleDetectingLock.java](https://github.com/google/guice/blob/e960b66d3d5931b9cb1aebd49e452e2c489a921e/core/src/com/google/inject/internal/CycleDetectingLock.java)","body":"<a href=\"https://github.com/google/guice/blob/e960b66d3d5931b9cb1aebd49e452e2c489a921e/core/src/com/google/inject/internal/SingletonScope.java\" rel=\"nofollow noreferrer\">SingletonScope.java</a> <a href=\"https://github.com/google/guice/blob/e960b66d3d5931b9cb1aebd49e452e2c489a921e/core/src/com/google/inject/internal/Initializer.java\" rel=\"nofollow noreferrer\">Initializer.java</a> <a href=\"https://github.com/google/guice/blob/e960b66d3d5931b9cb1aebd49e452e2c489a921e/core/src/com/google/inject/internal/CycleDetectingLock.java\" rel=\"nofollow noreferrer\">CycleDetectingLock.java</a>"}],"owner":{"account_id":21554207,"reputation":93,"user_id":15889782,"display_name":"underflow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681574566,"creation_date":1681574566,"question_id":76023347,"body_markdown":"I am implementing a dependency injection library, and so far I finished the library as far as running applications without recursive dependency problems.  \r\nI am looking to implement protections against cycles so the app could be stopped as soon as a problem is detected, ideally with a helpful message on which classes cause the cycle.\r\n\r\nA typical contract for most DI libraries is this:  \r\nFor each type you can request a `Provider&lt;T&gt;` with a `get()` method.  \r\n(all constructor injection etc. is just a syntax sugar on top if this contract)\r\n\r\nThey should be thread-safe and support concurrency at all times.\r\n\r\nTwo types of bindings, one is a &quot;factory&quot; creating objects on demand, and the second is &quot;singleton&quot; which can only be initialized once.\r\n\r\nIf I am correct there are two separate kind of problems to handle:  \r\n\r\n```kotlin\r\n@Singleton \r\nclass A(val dep: B)\r\n@Singleton\r\nclass B(val dep: A)\r\n```\r\n\r\nAs singleton construction is synchronized on the binding object, that should result in a classic deadlock.\r\n\r\n```kotlin\r\nclass A(val dep: B)\r\nclass B(val dep: A)\r\n```\r\n\r\nThat to me should result in a StackOverflowError.\r\n\r\nWhat&#39;s the best way to detect these cycles and provide useful exceptions pointing to source of the cycle?\r\nDo you think there&#39;s a 3rd type of recursive problem to handle that cannot be generalized to these 2 cases?\r\n","title":"What types of cycle/recursive dependency problems can occur with dependency injection systems?","body":"<p>I am implementing a dependency injection library, and so far I finished the library as far as running applications without recursive dependency problems.<br />\nI am looking to implement protections against cycles so the app could be stopped as soon as a problem is detected, ideally with a helpful message on which classes cause the cycle.</p>\n<p>A typical contract for most DI libraries is this:<br />\nFor each type you can request a <code>Provider&lt;T&gt;</code> with a <code>get()</code> method.<br />\n(all constructor injection etc. is just a syntax sugar on top if this contract)</p>\n<p>They should be thread-safe and support concurrency at all times.</p>\n<p>Two types of bindings, one is a &quot;factory&quot; creating objects on demand, and the second is &quot;singleton&quot; which can only be initialized once.</p>\n<p>If I am correct there are two separate kind of problems to handle:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Singleton \nclass A(val dep: B)\n@Singleton\nclass B(val dep: A)\n</code></pre>\n<p>As singleton construction is synchronized on the binding object, that should result in a classic deadlock.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class A(val dep: B)\nclass B(val dep: A)\n</code></pre>\n<p>That to me should result in a StackOverflowError.</p>\n<p>What's the best way to detect these cycles and provide useful exceptions pointing to source of the cycle?\nDo you think there's a 3rd type of recursive problem to handle that cannot be generalized to these 2 cases?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":1,"creation_date":1681572581,"post_id":76023185,"comment_id":134079791,"body_markdown":"what is the issue with the code? Are you not getting desired results?","body":"what is the issue with the code? Are you not getting desired results?"}],"owner":{"account_id":27928720,"reputation":35,"user_id":21327269,"display_name":"koderkodo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681573590,"creation_date":1681572369,"question_id":76023185,"body_markdown":"I have a wallet app, and right now I&#39;m working on updating the initial value field on the wallet. So this is an example and I will provide all code down below.\r\n\r\nThe user creates a wallet with an initial balance of 300\r\n\r\nThen user creates an income transaction of 30\r\n\r\nThen user creates an expense transaction of 15\r\n\r\nSo now the wallet balance is 315, right?\r\n\r\nNow, when I go to update my wallet, I can see the value of 300 as the initial balance, I change it to 400, and now the wallet balance should be 415, right? Because I had income - expense 15 as result plus new initial value as 400 that is 415. And now, if user again want to update initial value, the value in field should be 400, then if user change it to 500, wallet balance should be 515\r\n\r\nHow I can achieve that from this example?\r\n\r\n`Wallet entity`\r\n\r\n    @Entity\r\n    @Table(name = &quot;wallet&quot;)\r\n    public class Wallet {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;wallet_id&quot;)\r\n    private Long id;\r\n\r\n    @NotBlank(message = &quot;Please, insert a wallet name&quot;)\r\n    private String walletName;\r\n\r\n    @NotNull(message = &quot;Please, insert a amount&quot;)\r\n    private Double initialBalance;\r\n\r\n    private Double walletBalance;\r\n\r\n    private Double totalBalance;\r\n\r\n`Save income and save expense services`\r\n\r\n    @Override\r\n    public void saveExpense(Transaction transaction, Long walletId, Long userId) {\r\n        Wallet wallet = walletService.getWalletById(walletId);\r\n\r\n        double amount = transaction.getAmount();\r\n        amount = (wallet.getWalletBalance() == null ? wallet.getInitialBalance(): wallet.getWalletBalance()) - amount;\r\n        wallet.setWalletBalance(amount);\r\n\r\n        System.out.println(&quot;Wallet balance after expense &quot; + wallet.getWalletBalance());\r\n\r\n        transaction.setTransactionType(TransactionType.EXPENSE);\r\n\r\n        this.transactionRepository.save(transaction);\r\n    }\r\n\r\n    @Override\r\n    public void saveIncome(Transaction transaction, Long walletId, Long userId) {\r\n        Wallet wallet = walletService.getWalletById(walletId);\r\n\r\n        double amount = transaction.getAmount();\r\n        amount += wallet.getWalletBalance() == null ? wallet.getInitialBalance(): wallet.getWalletBalance();\r\n        wallet.setWalletBalance(amount);\r\n\r\n        System.out.println(&quot;Wallet balance after income &quot; + wallet.getWalletBalance());\r\n\r\n        transaction.setTransactionType(TransactionType.INCOME);\r\n\r\n        this.transactionRepository.save(transaction);\r\n    }","title":"How to update field with initial value","body":"<p>I have a wallet app, and right now I'm working on updating the initial value field on the wallet. So this is an example and I will provide all code down below.</p>\n<p>The user creates a wallet with an initial balance of 300</p>\n<p>Then user creates an income transaction of 30</p>\n<p>Then user creates an expense transaction of 15</p>\n<p>So now the wallet balance is 315, right?</p>\n<p>Now, when I go to update my wallet, I can see the value of 300 as the initial balance, I change it to 400, and now the wallet balance should be 415, right? Because I had income - expense 15 as result plus new initial value as 400 that is 415. And now, if user again want to update initial value, the value in field should be 400, then if user change it to 500, wallet balance should be 515</p>\n<p>How I can achieve that from this example?</p>\n<p><code>Wallet entity</code></p>\n<pre><code>@Entity\n@Table(name = &quot;wallet&quot;)\npublic class Wallet {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = &quot;wallet_id&quot;)\nprivate Long id;\n\n@NotBlank(message = &quot;Please, insert a wallet name&quot;)\nprivate String walletName;\n\n@NotNull(message = &quot;Please, insert a amount&quot;)\nprivate Double initialBalance;\n\nprivate Double walletBalance;\n\nprivate Double totalBalance;\n</code></pre>\n<p><code>Save income and save expense services</code></p>\n<pre><code>@Override\npublic void saveExpense(Transaction transaction, Long walletId, Long userId) {\n    Wallet wallet = walletService.getWalletById(walletId);\n\n    double amount = transaction.getAmount();\n    amount = (wallet.getWalletBalance() == null ? wallet.getInitialBalance(): wallet.getWalletBalance()) - amount;\n    wallet.setWalletBalance(amount);\n\n    System.out.println(&quot;Wallet balance after expense &quot; + wallet.getWalletBalance());\n\n    transaction.setTransactionType(TransactionType.EXPENSE);\n\n    this.transactionRepository.save(transaction);\n}\n\n@Override\npublic void saveIncome(Transaction transaction, Long walletId, Long userId) {\n    Wallet wallet = walletService.getWalletById(walletId);\n\n    double amount = transaction.getAmount();\n    amount += wallet.getWalletBalance() == null ? wallet.getInitialBalance(): wallet.getWalletBalance();\n    wallet.setWalletBalance(amount);\n\n    System.out.println(&quot;Wallet balance after income &quot; + wallet.getWalletBalance());\n\n    transaction.setTransactionType(TransactionType.INCOME);\n\n    this.transactionRepository.save(transaction);\n}\n</code></pre>\n"},{"tags":["java","multithreading","keyword","volatile"],"answers":[{"tags":[],"owner":{"account_id":3370,"reputation":7124,"user_id":4857,"accept_rate":96,"display_name":"Ande Turner"},"down_vote_count":4,"up_vote_count":224,"is_accepted":false,"score":220,"last_activity_date":1573999782,"creation_date":1221872368,"answer_id":106641,"question_id":106591,"body_markdown":"*“… the volatile modifier guarantees that any thread that reads a field will see the most recently written value.”* **- Josh Bloch**&lt;br&gt;&lt;br&gt;\r\nIf you are thinking about using `volatile`, read up on the package [`java.util.concurrent`][1] which deals with atomic behaviour.&lt;br&gt;&lt;br&gt;\r\nThe Wikipedia post on a [Singleton Pattern][2] shows volatile in use.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html\r\n  [2]: https://en.wikipedia.org/wiki/Singleton_pattern#Lazy_initialization","title":"What is the volatile keyword useful for?","body":"<p><em>“… the volatile modifier guarantees that any thread that reads a field will see the most recently written value.”</em> <strong>- Josh Bloch</strong><br><br>\nIf you are thinking about using <code>volatile</code>, read up on the package <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html\" rel=\"noreferrer\"><code>java.util.concurrent</code></a> which deals with atomic behaviour.<br><br>\nThe Wikipedia post on a <a href=\"https://en.wikipedia.org/wiki/Singleton_pattern#Lazy_initialization\" rel=\"noreferrer\">Singleton Pattern</a> shows volatile in use.</p>\n"},{"tags":[],"owner":{"account_id":5990,"reputation":26373,"user_id":9897,"accept_rate":50,"display_name":"dgvid"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1325860128,"creation_date":1221875975,"answer_id":106771,"question_id":106591,"body_markdown":"Absolutely, yes. (And not just in Java, but also in C#.) There are times when you need to get or set a value that is guaranteed to be an atomic operation on your given platform, an int or boolean, for example, but do not require the overhead of thread locking. The volatile keyword allows you to ensure that when you read the value that you get the _current_ value and not a cached value that was just made obsolete by a write on another thread.","title":"What is the volatile keyword useful for?","body":"<p>Absolutely, yes. (And not just in Java, but also in C#.) There are times when you need to get or set a value that is guaranteed to be an atomic operation on your given platform, an int or boolean, for example, but do not require the overhead of thread locking. The volatile keyword allows you to ensure that when you read the value that you get the <em>current</em> value and not a cached value that was just made obsolete by a write on another thread.</p>\n"},{"tags":[],"owner":{"account_id":7913,"reputation":33220,"user_id":13940,"accept_rate":58,"display_name":"Greg Mattes"},"down_vote_count":1,"up_vote_count":865,"is_accepted":true,"score":864,"last_activity_date":1494488680,"creation_date":1221876591,"answer_id":106787,"question_id":106591,"body_markdown":"`volatile` has semantics for memory visibility. Basically, the value of a `volatile` field becomes visible to all readers (other threads in particular) after a write operation completes on it. Without `volatile`, readers could see some non-updated value.\r\n\r\nTo answer your question: Yes, I use a `volatile` variable to control whether some code continues a loop. The loop tests the `volatile` value and continues if it is `true`. The condition can be set to `false` by calling a &quot;stop&quot; method. The loop sees `false` and terminates when it tests the value after the stop method completes execution.\r\n\r\nThe book &quot;[Java Concurrency in Practice][1],&quot; which I highly recommend, gives a good explanation of `volatile`. This book is written by the same person who wrote the IBM article that is referenced in the question (in fact, he cites his book at the bottom of that article). My use of `volatile` is what his article calls the &quot;pattern 1 status flag.&quot;\r\n\r\nIf you want to learn more about how [`volatile`][2] works under the hood, read up on [the Java memory model][3]. If you want to go beyond that level, check out a good computer architecture book like [Hennessy &amp;amp; Patterson][4] and read about cache coherence and cache consistency.\r\n\r\n\r\n  [1]: http://jcip.net\r\n  [2]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.3.1.4\r\n  [3]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html\r\n  [4]: https://www.elsevier.com/books/computer-architecture/hennessy/978-0-12-383872-8","title":"What is the volatile keyword useful for?","body":"<p><code>volatile</code> has semantics for memory visibility. Basically, the value of a <code>volatile</code> field becomes visible to all readers (other threads in particular) after a write operation completes on it. Without <code>volatile</code>, readers could see some non-updated value.</p>\n\n<p>To answer your question: Yes, I use a <code>volatile</code> variable to control whether some code continues a loop. The loop tests the <code>volatile</code> value and continues if it is <code>true</code>. The condition can be set to <code>false</code> by calling a \"stop\" method. The loop sees <code>false</code> and terminates when it tests the value after the stop method completes execution.</p>\n\n<p>The book \"<a href=\"http://jcip.net\" rel=\"noreferrer\">Java Concurrency in Practice</a>,\" which I highly recommend, gives a good explanation of <code>volatile</code>. This book is written by the same person who wrote the IBM article that is referenced in the question (in fact, he cites his book at the bottom of that article). My use of <code>volatile</code> is what his article calls the \"pattern 1 status flag.\"</p>\n\n<p>If you want to learn more about how <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.3.1.4\" rel=\"noreferrer\"><code>volatile</code></a> works under the hood, read up on <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html\" rel=\"noreferrer\">the Java memory model</a>. If you want to go beyond that level, check out a good computer architecture book like <a href=\"https://www.elsevier.com/books/computer-architecture/hennessy/978-0-12-383872-8\" rel=\"noreferrer\">Hennessy &amp; Patterson</a> and read about cache coherence and cache consistency.</p>\n"},{"tags":[],"owner":{"account_id":2241,"reputation":44197,"user_id":3093,"accept_rate":83,"display_name":"Dave L."},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1221883201,"creation_date":1221883201,"answer_id":107040,"question_id":106591,"body_markdown":"One common example for using `volatile` is to use a `volatile boolean` variable as a flag to terminate a thread.  If you&#39;ve started a thread, and you want to be able to safely interrupt it from a different thread, you can have the thread periodically check a flag.  To stop it, set the flag to true.  By making the flag `volatile`, you can ensure that the thread that is checking it will see it has been set the next time it checks it without having to even use a `synchronized` block.","title":"What is the volatile keyword useful for?","body":"<p>One common example for using <code>volatile</code> is to use a <code>volatile boolean</code> variable as a flag to terminate a thread.  If you've started a thread, and you want to be able to safely interrupt it from a different thread, you can have the thread periodically check a flag.  To stop it, set the flag to true.  By making the flag <code>volatile</code>, you can ensure that the thread that is checking it will see it has been set the next time it checks it without having to even use a <code>synchronized</code> block.</p>\n"},{"tags":[],"owner":{"account_id":6055,"reputation":14786,"user_id":10026,"accept_rate":68,"display_name":"ykaganovich"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1221884790,"creation_date":1221884790,"answer_id":107102,"question_id":106591,"body_markdown":"Yes, volatile must be used whenever you want a mutable variable to be accessed by multiple threads. It is not very common usecase because typically you need to perform more than a single atomic operation (e.g. check the variable state before modifying it), in which case you would use a synchronized block instead.","title":"What is the volatile keyword useful for?","body":"<p>Yes, volatile must be used whenever you want a mutable variable to be accessed by multiple threads. It is not very common usecase because typically you need to perform more than a single atomic operation (e.g. check the variable state before modifying it), in which case you would use a synchronized block instead.</p>\n"},{"tags":[],"owner":{"account_id":9900,"reputation":247,"user_id":18467,"display_name":"Rudi Adianto"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1341943364,"creation_date":1221894852,"answer_id":107490,"question_id":106591,"body_markdown":"You&#39;ll need to use &#39;volatile&#39; keyword, or &#39;synchronized&#39; and any other concurrency control tools and techniques you might have at your disposal if you are developing a multithreaded application. Example of such application is desktop apps.\r\n\r\nIf you are developing an application that would be deployed to application server (Tomcat, JBoss AS, Glassfish, etc) you don&#39;t have to handle concurrency control yourself as it already addressed by the application server. In fact, if I remembered correctly the Java EE standard prohibit any concurrency control in servlets and EJBs, since it is part of the &#39;infrastructure&#39; layer which you supposed to be freed from handling it. You only do concurrency control in such app if you&#39;re implementing singleton objects. This even already addressed if you knit your components using frameworkd like Spring.\r\n\r\nSo, in most cases of Java development where the application is a web application and using IoC framework like Spring or EJB, you wouldn&#39;t need to use &#39;volatile&#39;.\r\n","title":"What is the volatile keyword useful for?","body":"<p>You'll need to use 'volatile' keyword, or 'synchronized' and any other concurrency control tools and techniques you might have at your disposal if you are developing a multithreaded application. Example of such application is desktop apps.</p>\n\n<p>If you are developing an application that would be deployed to application server (Tomcat, JBoss AS, Glassfish, etc) you don't have to handle concurrency control yourself as it already addressed by the application server. In fact, if I remembered correctly the Java EE standard prohibit any concurrency control in servlets and EJBs, since it is part of the 'infrastructure' layer which you supposed to be freed from handling it. You only do concurrency control in such app if you're implementing singleton objects. This even already addressed if you knit your components using frameworkd like Spring.</p>\n\n<p>So, in most cases of Java development where the application is a web application and using IoC framework like Spring or EJB, you wouldn't need to use 'volatile'.</p>\n"},{"tags":[],"owner":{"account_id":7006,"reputation":7395,"user_id":11961,"accept_rate":62,"display_name":"MB."},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1221908868,"creation_date":1221908868,"answer_id":107907,"question_id":106591,"body_markdown":"Yes, I use it quite a lot - it can be very useful for multi-threaded code.  The article you pointed to is a good one.  Though there are two important things to bear in mind:\r\n\r\n 1. You should only use volatile if you\r\n    completely understand what it does\r\n    and how it differs to synchronized. \r\n    In many situations volatile appears,\r\n    on the surface, to be a simpler more\r\n    performant alternative to\r\n    synchronized, when often a better\r\n    understanding of volatile would make\r\n    clear that synchronized is the only\r\n    option that would work.\r\n 2. volatile doesn&#39;t actually work in a\r\n    lot of older JVMs, although\r\n    synchronized does.  I remember seeing a document that referenced the various levels of support in different JVMs but unfortunately I can&#39;t find it now.  Definitely look into it if you&#39;re using Java pre 1.5 or if you don&#39;t have control over the JVMs that your program will be running on.\r\n\r\n","title":"What is the volatile keyword useful for?","body":"<p>Yes, I use it quite a lot - it can be very useful for multi-threaded code.  The article you pointed to is a good one.  Though there are two important things to bear in mind:</p>\n\n<ol>\n<li>You should only use volatile if you\ncompletely understand what it does\nand how it differs to synchronized. \nIn many situations volatile appears,\non the surface, to be a simpler more\nperformant alternative to\nsynchronized, when often a better\nunderstanding of volatile would make\nclear that synchronized is the only\noption that would work.</li>\n<li>volatile doesn't actually work in a\nlot of older JVMs, although\nsynchronized does.  I remember seeing a document that referenced the various levels of support in different JVMs but unfortunately I can't find it now.  Definitely look into it if you're using Java pre 1.5 or if you don't have control over the JVMs that your program will be running on.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"down_vote_count":1,"up_vote_count":68,"is_accepted":false,"score":67,"last_activity_date":1583901548,"creation_date":1222295379,"answer_id":130320,"question_id":106591,"body_markdown":"`volatile` is very useful to stop threads.\r\n\r\nNot that you should be writing your own threads, Java 1.6 has a lot of nice thread pools.  But if you are sure you need a thread, you&#39;ll need to know how to stop it.\r\n\r\nThe pattern I use for threads is:\r\n\r\n    public class Foo extends Thread {\r\n\r\n      private volatile boolean close = false;\r\n\r\n      public void run() {\r\n        while(!close) {\r\n          // do work\r\n        }\r\n      }\r\n      public void close() {\r\n        close = true;\r\n        // interrupt here if needed\r\n      }\r\n    }\r\n\r\nIn the above code segment, the thread reading `close` in the while loop is different from the one that calls `close()`. Without volatile, the thread running the loop may never see the change to close.\r\n\r\nNotice how there&#39;s no need for synchronization","title":"What is the volatile keyword useful for?","body":"<p><code>volatile</code> is very useful to stop threads.</p>\n\n<p>Not that you should be writing your own threads, Java 1.6 has a lot of nice thread pools.  But if you are sure you need a thread, you'll need to know how to stop it.</p>\n\n<p>The pattern I use for threads is:</p>\n\n<pre><code>public class Foo extends Thread {\n\n  private volatile boolean close = false;\n\n  public void run() {\n    while(!close) {\n      // do work\n    }\n  }\n  public void close() {\n    close = true;\n    // interrupt here if needed\n  }\n}\n</code></pre>\n\n<p>In the above code segment, the thread reading <code>close</code> in the while loop is different from the one that calls <code>close()</code>. Without volatile, the thread running the loop may never see the change to close.</p>\n\n<p>Notice how there's no need for synchronization</p>\n"},{"tags":[],"owner":{"account_id":2318227,"reputation":959,"user_id":2034733,"accept_rate":69,"display_name":"fatih tekin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1471532774,"creation_date":1362258463,"answer_id":15179454,"question_id":106591,"body_markdown":"`volatile` only guarantees that all threads, even themselves, are incrementing. For example: a counter sees the same face of the variable at the same time. It is not used instead of synchronized or atomic or other stuff, it completely makes the reads synchronized. Please do not compare it with other java keywords. As the example shows below volatile variable operations are also atomic they fail or succeed at once.\r\n    \r\n    \r\n    package io.netty.example.telnet;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class Main {\r\n    \t\r\n    \tpublic static volatile  int a = 0;\r\n    \tpublic static void main(String args[]) throws InterruptedException{\r\n    \t\t\r\n    \t\tList&lt;Thread&gt; list = new  ArrayList&lt;Thread&gt;();\r\n    \t\tfor(int i = 0 ; i&lt;11 ;i++){\r\n    \t\t\tlist.add(new Pojo());\r\n    \t\t}\r\n    \t\t\r\n    \t\tfor (Thread thread : list) {\r\n    \t\t\tthread.start();\r\n    \t\t}\r\n    \r\n    \t\tThread.sleep(20000);\r\n    \t\tSystem.out.println(a);\r\n    \t}\r\n    }\r\n    class Pojo extends Thread{\r\n    \tint a = 10001;\r\n    \tpublic void run() {\r\n    \t\twhile(a--&gt;0){\r\n    \t\t\ttry {\r\n    \t\t\t\tThread.sleep(1);\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t\tMain.a++;\r\n    \t\t\tSystem.out.println(&quot;a = &quot;+Main.a);\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n   \r\n\r\nEven you put volatile or not results will always differ. But if you use AtomicInteger as below results will be always same. This is same with synchronized also.\r\n    \r\n        package io.netty.example.telnet;\r\n        \r\n        import java.util.ArrayList;\r\n        import java.util.List;\r\n        import java.util.concurrent.atomic.AtomicInteger;\r\n        \r\n        public class Main {\r\n        \t\r\n        \tpublic static volatile  AtomicInteger a = new AtomicInteger(0);\r\n        \tpublic static void main(String args[]) throws InterruptedException{\r\n        \t\t\r\n        \t\tList&lt;Thread&gt; list = new  ArrayList&lt;Thread&gt;();\r\n        \t\tfor(int i = 0 ; i&lt;11 ;i++){\r\n        \t\t\tlist.add(new Pojo());\r\n        \t\t}\r\n        \t\t\r\n        \t\tfor (Thread thread : list) {\r\n        \t\t\tthread.start();\r\n        \t\t}\r\n        \r\n        \t\tThread.sleep(20000);\r\n        \t\tSystem.out.println(a.get());\r\n        \r\n        \t}\r\n        }\r\n        class Pojo extends Thread{\r\n        \tint a = 10001;\r\n        \tpublic void run() {\r\n        \t\twhile(a--&gt;0){\r\n        \t\t\ttry {\r\n        \t\t\t\tThread.sleep(1);\r\n        \t\t\t} catch (InterruptedException e) {\r\n        \t\t\t\te.printStackTrace();\r\n        \t\t\t}\r\n        \t\t\tMain.a.incrementAndGet();\r\n        \t\t\tSystem.out.println(&quot;a = &quot;+Main.a);\r\n        \t\t}\r\n        \t}\r\n        }\r\n\r\n","title":"What is the volatile keyword useful for?","body":"<p><code>volatile</code> only guarantees that all threads, even themselves, are incrementing. For example: a counter sees the same face of the variable at the same time. It is not used instead of synchronized or atomic or other stuff, it completely makes the reads synchronized. Please do not compare it with other java keywords. As the example shows below volatile variable operations are also atomic they fail or succeed at once.</p>\n\n<pre><code>package io.netty.example.telnet;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Main {\n\n    public static volatile  int a = 0;\n    public static void main(String args[]) throws InterruptedException{\n\n        List&lt;Thread&gt; list = new  ArrayList&lt;Thread&gt;();\n        for(int i = 0 ; i&lt;11 ;i++){\n            list.add(new Pojo());\n        }\n\n        for (Thread thread : list) {\n            thread.start();\n        }\n\n        Thread.sleep(20000);\n        System.out.println(a);\n    }\n}\nclass Pojo extends Thread{\n    int a = 10001;\n    public void run() {\n        while(a--&gt;0){\n            try {\n                Thread.sleep(1);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            Main.a++;\n            System.out.println(\"a = \"+Main.a);\n        }\n    }\n}\n</code></pre>\n\n<p>Even you put volatile or not results will always differ. But if you use AtomicInteger as below results will be always same. This is same with synchronized also.</p>\n\n<pre><code>    package io.netty.example.telnet;\n\n    import java.util.ArrayList;\n    import java.util.List;\n    import java.util.concurrent.atomic.AtomicInteger;\n\n    public class Main {\n\n        public static volatile  AtomicInteger a = new AtomicInteger(0);\n        public static void main(String args[]) throws InterruptedException{\n\n            List&lt;Thread&gt; list = new  ArrayList&lt;Thread&gt;();\n            for(int i = 0 ; i&lt;11 ;i++){\n                list.add(new Pojo());\n            }\n\n            for (Thread thread : list) {\n                thread.start();\n            }\n\n            Thread.sleep(20000);\n            System.out.println(a.get());\n\n        }\n    }\n    class Pojo extends Thread{\n        int a = 10001;\n        public void run() {\n            while(a--&gt;0){\n                try {\n                    Thread.sleep(1);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                Main.a.incrementAndGet();\n                System.out.println(\"a = \"+Main.a);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2784842,"reputation":67271,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1569948351,"creation_date":1393319847,"answer_id":22009557,"question_id":106591,"body_markdown":"In my opinion, two important scenarios other than stopping thread in which volatile keyword is used are:\r\n\r\n 1. [Double-checked locking mechanism][1]. Used often in Singleton design\r\n    pattern. In this the **singleton object needs to be declared volatile**.\r\n 2. [Spurious Wakeups][2]. Thread may sometimes wake up from wait call even if no notify call has been issued. This behavior is called spurious wakeup. This can be countered by using a conditional variable (boolean flag). Put the wait() call in a while loop as long as the flag is true. So if thread wakes up from wait call due to any reasons other than Notify/NotifyAll then it encounters flag is still true and hence calls wait again. Prior to calling notify set this flag to true. In this case the **boolean flag is declared as volatile**.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Double-checked_locking\r\n  [2]: http://tutorials.jenkov.com/java-concurrency/thread-signaling.html#spuriouswakeups","title":"What is the volatile keyword useful for?","body":"<p>In my opinion, two important scenarios other than stopping thread in which volatile keyword is used are:</p>\n\n<ol>\n<li><a href=\"http://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"nofollow noreferrer\">Double-checked locking mechanism</a>. Used often in Singleton design\npattern. In this the <strong>singleton object needs to be declared volatile</strong>.</li>\n<li><a href=\"http://tutorials.jenkov.com/java-concurrency/thread-signaling.html#spuriouswakeups\" rel=\"nofollow noreferrer\">Spurious Wakeups</a>. Thread may sometimes wake up from wait call even if no notify call has been issued. This behavior is called spurious wakeup. This can be countered by using a conditional variable (boolean flag). Put the wait() call in a while loop as long as the flag is true. So if thread wakes up from wait call due to any reasons other than Notify/NotifyAll then it encounters flag is still true and hence calls wait again. Prior to calling notify set this flag to true. In this case the <strong>boolean flag is declared as volatile</strong>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3779710,"reputation":352,"user_id":3139543,"accept_rate":60,"display_name":"tstuber"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1407774432,"creation_date":1407774432,"answer_id":25247983,"question_id":106591,"body_markdown":"Every thread accessing a volatile field will read its current value before continuing, instead of (potentially) using a cached value.\r\n\r\nOnly member variable can be volatile or transient.","title":"What is the volatile keyword useful for?","body":"<p>Every thread accessing a volatile field will read its current value before continuing, instead of (potentially) using a cached value.</p>\n\n<p>Only member variable can be volatile or transient.</p>\n"},{"tags":[],"owner":{"account_id":5000597,"reputation":161,"user_id":4019758,"display_name":"Donatello Boccaforno"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1423666289,"creation_date":1423666289,"answer_id":28457295,"question_id":106591,"body_markdown":"No one has mentioned the treatment of read and write operation for long and double variable type. Reads and writes are atomic operations for reference variables and for most primitive variables, except for long and double variable types, which must use the volatile keyword to be atomic operations. [@link][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7","title":"What is the volatile keyword useful for?","body":"<p>No one has mentioned the treatment of read and write operation for long and double variable type. Reads and writes are atomic operations for reference variables and for most primitive variables, except for long and double variable types, which must use the volatile keyword to be atomic operations. <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7\" rel=\"noreferrer\">@link</a></p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71911,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"down_vote_count":3,"up_vote_count":195,"is_accepted":false,"score":192,"last_activity_date":1656437932,"creation_date":1450475566,"answer_id":34364511,"question_id":106591,"body_markdown":"**Volatile**(vɒlətʌɪl):  Easily evaporated at normal temperatures   \r\n\r\n**Important point about `volatile`:** \r\n\r\n 1. Synchronization in Java is possible by using Java keywords `synchronized` and `volatile` and locks.\r\n 2. In Java, we can not have `synchronized` variable. Using `synchronized` keyword with a variable is illegal and will result in compilation error. Instead of using the `synchronized` variable in Java, you can use the java `volatile` variable, which will instruct JVM threads to read the value of `volatile` variable from main memory and don’t cache it locally.\r\n 3. If a variable is not shared between multiple threads then there is no need to use the `volatile` keyword.\r\n\r\n[source][1]\r\n\r\n**Example usage of `volatile`:**\r\n\r\n    public class Singleton {\r\n    \tprivate static volatile Singleton _instance; // volatile variable\r\n    \tpublic static Singleton getInstance() {\r\n    \t\tif (_instance == null) {\r\n    \t\t\tsynchronized (Singleton.class) {\r\n    \t\t\t\tif (_instance == null)\r\n    \t\t\t\t\t_instance = new Singleton();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn _instance;\r\n    \t}\r\n    }\r\n\r\nWe are creating instance lazily at the time the first request comes.\r\n\r\nIf we do not make the `_instance` variable `volatile` then the Thread which is creating the instance of `Singleton` is not able to communicate to the other thread. So if Thread A is creating Singleton instance and just after creation, the CPU corrupts etc, all other threads will not be able to see the value of `_instance` as not null and they will believe it is still assigned null.  \r\n\r\nWhy does this happen? Because reader threads are not doing any locking and until the writer thread comes out of a synchronized block, the memory will not be synchronized and value of `_instance` will not be updated in main memory. With the Volatile keyword in Java, this is handled by Java itself and such updates will be visible by all reader threads.  \r\n\r\n&gt;**Conclusion**: `volatile` keyword is also used to communicate the content of memory between threads.  \r\n\r\n**Example usage of without volatile:**\r\n\r\n    public class Singleton {    \r\n        private static Singleton _instance;   //without volatile variable\r\n        public static Singleton getInstance() {   \r\n            if (_instance == null) {  \r\n                synchronized(Singleton.class) {  \r\n                    if (_instance == null) \r\n                        _instance = new Singleton(); \r\n                } \r\n            }\r\n            return _instance;  \r\n        }\r\n    }\r\n\r\nThe code above is not thread-safe. Although it checks the value of instance once again within the synchronized block (for performance reasons), the JIT compiler can rearrange the bytecode in a way that the reference to the instance is set before the constructor has finished its execution. This means the method getInstance() returns an object that may not have been initialized completely. To make the code thread-safe, the keyword volatile can be used since Java 5 for the instance variable. Variables that are marked as volatile get only visible to other threads once the constructor of the object has finished its execution completely.  \r\n[Source][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n**`volatile` usage in Java**:\r\n\r\nThe fail-fast iterators are *typically* implemented using a `volatile` counter on the list object.\r\n\r\n  - When the list is updated, the counter is incremented.  \r\n  - When an `Iterator` is created, the current value of the counter is embedded in the `Iterator` object.\r\n  - When an `Iterator` operation is performed, the method compares the two counter values and throws a `ConcurrentModificationException` if they are different.\r\n\r\nThe implementation of fail-safe iterators is typically light-weight.  They typically rely on properties of the specific list implementation&#39;s data structures.  There is no general pattern.   \r\n\r\n\r\n  [1]: http://javarevisited.blogspot.sg/2011/06/volatile-keyword-java-example-tutorial.html\r\n  [2]: http://www.javacodegeeks.com/2014/11/multithreading-concurrency-interview-questions-answers.html#36\r\n  [3]: http://i.stack.imgur.com/bgHrU.png","title":"What is the volatile keyword useful for?","body":"<p><strong>Volatile</strong>(vɒlətʌɪl):  Easily evaporated at normal temperatures</p>\n<p><strong>Important point about <code>volatile</code>:</strong></p>\n<ol>\n<li>Synchronization in Java is possible by using Java keywords <code>synchronized</code> and <code>volatile</code> and locks.</li>\n<li>In Java, we can not have <code>synchronized</code> variable. Using <code>synchronized</code> keyword with a variable is illegal and will result in compilation error. Instead of using the <code>synchronized</code> variable in Java, you can use the java <code>volatile</code> variable, which will instruct JVM threads to read the value of <code>volatile</code> variable from main memory and don’t cache it locally.</li>\n<li>If a variable is not shared between multiple threads then there is no need to use the <code>volatile</code> keyword.</li>\n</ol>\n<p><a href=\"http://javarevisited.blogspot.sg/2011/06/volatile-keyword-java-example-tutorial.html\" rel=\"noreferrer\">source</a></p>\n<p><strong>Example usage of <code>volatile</code>:</strong></p>\n<pre><code>public class Singleton {\n    private static volatile Singleton _instance; // volatile variable\n    public static Singleton getInstance() {\n        if (_instance == null) {\n            synchronized (Singleton.class) {\n                if (_instance == null)\n                    _instance = new Singleton();\n            }\n        }\n        return _instance;\n    }\n}\n</code></pre>\n<p>We are creating instance lazily at the time the first request comes.</p>\n<p>If we do not make the <code>_instance</code> variable <code>volatile</code> then the Thread which is creating the instance of <code>Singleton</code> is not able to communicate to the other thread. So if Thread A is creating Singleton instance and just after creation, the CPU corrupts etc, all other threads will not be able to see the value of <code>_instance</code> as not null and they will believe it is still assigned null.</p>\n<p>Why does this happen? Because reader threads are not doing any locking and until the writer thread comes out of a synchronized block, the memory will not be synchronized and value of <code>_instance</code> will not be updated in main memory. With the Volatile keyword in Java, this is handled by Java itself and such updates will be visible by all reader threads.</p>\n<blockquote>\n<p><strong>Conclusion</strong>: <code>volatile</code> keyword is also used to communicate the content of memory between threads.</p>\n</blockquote>\n<p><strong>Example usage of without volatile:</strong></p>\n<pre><code>public class Singleton {    \n    private static Singleton _instance;   //without volatile variable\n    public static Singleton getInstance() {   \n        if (_instance == null) {  \n            synchronized(Singleton.class) {  \n                if (_instance == null) \n                    _instance = new Singleton(); \n            } \n        }\n        return _instance;  \n    }\n}\n</code></pre>\n<p>The code above is not thread-safe. Although it checks the value of instance once again within the synchronized block (for performance reasons), the JIT compiler can rearrange the bytecode in a way that the reference to the instance is set before the constructor has finished its execution. This means the method getInstance() returns an object that may not have been initialized completely. To make the code thread-safe, the keyword volatile can be used since Java 5 for the instance variable. Variables that are marked as volatile get only visible to other threads once the constructor of the object has finished its execution completely.<br />\n<a href=\"http://www.javacodegeeks.com/2014/11/multithreading-concurrency-interview-questions-answers.html#36\" rel=\"noreferrer\">Source</a></p>\n<p><a href=\"https://i.stack.imgur.com/bgHrU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bgHrU.png\" alt=\"enter image description here\" /></a></p>\n<p><strong><code>volatile</code> usage in Java</strong>:</p>\n<p>The fail-fast iterators are <em>typically</em> implemented using a <code>volatile</code> counter on the list object.</p>\n<ul>\n<li>When the list is updated, the counter is incremented.</li>\n<li>When an <code>Iterator</code> is created, the current value of the counter is embedded in the <code>Iterator</code> object.</li>\n<li>When an <code>Iterator</code> operation is performed, the method compares the two counter values and throws a <code>ConcurrentModificationException</code> if they are different.</li>\n</ul>\n<p>The implementation of fail-safe iterators is typically light-weight.  They typically rely on properties of the specific list implementation's data structures.  There is no general pattern.</p>\n"},{"tags":[],"owner":{"account_id":5440121,"reputation":1551,"user_id":4537618,"accept_rate":100,"display_name":"Java Main"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1450975281,"creation_date":1450975281,"answer_id":34455651,"question_id":106591,"body_markdown":"The     volatile key when used with a variable, will make sure that threads reading this variable will see the same value . Now if you have multiple threads reading and writing to a variable, making the variable volatile will not be enough and data will be corrupted . Image threads have read the same value but each one has done some chages (say incremented a counter) , when writing back to the memory, data integrity is violated . That is why it is necessary to make the varible synchronized (diffrent ways are possible)\r\n\r\nIf the changes are done by 1 thread and the others need just to read this value, the volatile will be suitable.","title":"What is the volatile keyword useful for?","body":"<p>The     volatile key when used with a variable, will make sure that threads reading this variable will see the same value . Now if you have multiple threads reading and writing to a variable, making the variable volatile will not be enough and data will be corrupted . Image threads have read the same value but each one has done some chages (say incremented a counter) , when writing back to the memory, data integrity is violated . That is why it is necessary to make the varible synchronized (diffrent ways are possible)</p>\n\n<p>If the changes are done by 1 thread and the others need just to read this value, the volatile will be suitable.</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462800274,"creation_date":1462800274,"answer_id":37116960,"question_id":106591,"body_markdown":"From oracle documentation [page][1], the need for volatile variable arises to fix memory consistency issues:\r\n\r\n&gt; Using volatile variables reduces the risk of memory consistency errors, because any write to a volatile variable establishes a happens-before relationship with subsequent reads of that same variable. \r\n\r\nThis means that changes to a `volatile` variable are always visible to other threads. It also means that when a thread reads a volatile variable, it sees not just the latest change to the `volatile`, but also the side effects of the code that led up the change.\r\n\r\nAs explained in `Peter Parker` answer, in absence of `volatile` modifier, each thread&#39;s stack may have their own copy of variable. By making the variable as `volatile`, memory consistency issues have been fixed. \r\n\r\nHave a look at [jenkov][2] tutorial page for better understanding. \r\n\r\nHave a look at related SE question for some more details on volatile &amp; use cases to use volatile:\r\n\r\nhttps://stackoverflow.com/questions/3519664/difference-between-volatile-and-synchronized-in-java/\r\n\r\n\r\nOne practical use case:\r\n\r\nYou have many threads, which need to print current time in a particular format for example : `java.text.SimpleDateFormat(&quot;HH-mm-ss&quot;)`. Yon can have one class, which converts current time into `SimpleDateFormat` and updated the variable for every one second. All other threads can simply use this volatile variable to print current time in log files.  \r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\r\n  [2]: http://tutorials.jenkov.com/java-concurrency/volatile.html","title":"What is the volatile keyword useful for?","body":"<p>From oracle documentation <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\" rel=\"nofollow noreferrer\">page</a>, the need for volatile variable arises to fix memory consistency issues:</p>\n\n<blockquote>\n  <p>Using volatile variables reduces the risk of memory consistency errors, because any write to a volatile variable establishes a happens-before relationship with subsequent reads of that same variable. </p>\n</blockquote>\n\n<p>This means that changes to a <code>volatile</code> variable are always visible to other threads. It also means that when a thread reads a volatile variable, it sees not just the latest change to the <code>volatile</code>, but also the side effects of the code that led up the change.</p>\n\n<p>As explained in <code>Peter Parker</code> answer, in absence of <code>volatile</code> modifier, each thread's stack may have their own copy of variable. By making the variable as <code>volatile</code>, memory consistency issues have been fixed. </p>\n\n<p>Have a look at <a href=\"http://tutorials.jenkov.com/java-concurrency/volatile.html\" rel=\"nofollow noreferrer\">jenkov</a> tutorial page for better understanding. </p>\n\n<p>Have a look at related SE question for some more details on volatile &amp; use cases to use volatile:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3519664/difference-between-volatile-and-synchronized-in-java/\">Difference between volatile and synchronized in Java</a></p>\n\n<p>One practical use case:</p>\n\n<p>You have many threads, which need to print current time in a particular format for example : <code>java.text.SimpleDateFormat(\"HH-mm-ss\")</code>. Yon can have one class, which converts current time into <code>SimpleDateFormat</code> and updated the variable for every one second. All other threads can simply use this volatile variable to print current time in log files.  </p>\n"},{"tags":[],"owner":{"account_id":7950684,"reputation":492,"user_id":6001605,"display_name":"Neha Vari"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1517921826,"creation_date":1467976097,"answer_id":38265184,"question_id":106591,"body_markdown":"Volatile Variables are light-weight synchronization. When visibility of latest data among all threads is requirement and atomicity can be compromised , in such situations Volatile Variables must be preferred. Read on volatile variables always return most recent write done by any thread since they are neither cached in registers nor in caches where other processors can not see. Volatile is Lock-Free. I use volatile, when scenario meets criteria as mentioned above. ","title":"What is the volatile keyword useful for?","body":"<p>Volatile Variables are light-weight synchronization. When visibility of latest data among all threads is requirement and atomicity can be compromised , in such situations Volatile Variables must be preferred. Read on volatile variables always return most recent write done by any thread since they are neither cached in registers nor in caches where other processors can not see. Volatile is Lock-Free. I use volatile, when scenario meets criteria as mentioned above. </p>\n"},{"tags":[],"owner":{"account_id":1468909,"reputation":4795,"user_id":1380968,"display_name":"Mohan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1488444177,"creation_date":1488444177,"answer_id":42550536,"question_id":106591,"body_markdown":"There are two different uses of volatile keyword.\r\n\r\n 1. Prevents JVM from reading values from register (assume as cache), and forces its value to be read from memory.\r\n 2. Reduces the risk of memory in-consistency errors.\r\n\r\n&gt; Prevents JVM from reading values in register, and forces its\r\n&gt; value to be read from memory.\r\n\r\nA *busy flag* is used to prevent a thread from continuing while the device is busy and the flag is not protected by a lock:\r\n\r\n    while (busy) {\r\n        /* do something else */\r\n    }\r\nThe testing thread will continue when another thread turns off the *busy flag*:\r\n\r\n    busy = 0;\r\nHowever, since busy is accessed frequently in the testing thread, the JVM may optimize the test by placing the value of busy in a register, then test the contents of the register without reading the value of busy in memory before every test. The testing thread would never see busy change and the other thread would only change the value of busy in memory, resulting in deadlock. Declaring the *busy flag* as volatile forces its value to be read before each test.\r\n\r\n\r\n\r\n\r\n&gt; Reduces the risk of memory consistency errors.\r\n\r\nUsing volatile variables reduces the risk of **memory consistency errors**, because any write to a volatile variable establishes a\r\n*&quot;happens-before&quot;* relationship with subsequent reads of that same variable. This means that changes to a volatile variable are always visible to other threads.\r\n\r\nThe technique of reading, writing without memory consistency errors is called **atomic action**.\r\n\r\nAn atomic action is one that effectively happens all at once. An atomic action cannot stop in the middle: it either happens completely, or it doesn&#39;t happen at all. No side effects of an atomic action are visible until the action is complete.\r\n\r\nBelow are actions you can specify that are atomic:\r\n\r\n - Reads and writes are atomic for reference variables and for most\r\n   primitive variables (all types except long and double).\r\n - Reads and writes are atomic for all variables declared **volatile**\r\n   (including long and double variables).\r\n\r\n\r\nCheers!","title":"What is the volatile keyword useful for?","body":"<p>There are two different uses of volatile keyword.</p>\n\n<ol>\n<li>Prevents JVM from reading values from register (assume as cache), and forces its value to be read from memory.</li>\n<li>Reduces the risk of memory in-consistency errors.</li>\n</ol>\n\n<blockquote>\n  <p>Prevents JVM from reading values in register, and forces its\n  value to be read from memory.</p>\n</blockquote>\n\n<p>A <em>busy flag</em> is used to prevent a thread from continuing while the device is busy and the flag is not protected by a lock:</p>\n\n<pre><code>while (busy) {\n    /* do something else */\n}\n</code></pre>\n\n<p>The testing thread will continue when another thread turns off the <em>busy flag</em>:</p>\n\n<pre><code>busy = 0;\n</code></pre>\n\n<p>However, since busy is accessed frequently in the testing thread, the JVM may optimize the test by placing the value of busy in a register, then test the contents of the register without reading the value of busy in memory before every test. The testing thread would never see busy change and the other thread would only change the value of busy in memory, resulting in deadlock. Declaring the <em>busy flag</em> as volatile forces its value to be read before each test.</p>\n\n<blockquote>\n  <p>Reduces the risk of memory consistency errors.</p>\n</blockquote>\n\n<p>Using volatile variables reduces the risk of <strong>memory consistency errors</strong>, because any write to a volatile variable establishes a\n<em>\"happens-before\"</em> relationship with subsequent reads of that same variable. This means that changes to a volatile variable are always visible to other threads.</p>\n\n<p>The technique of reading, writing without memory consistency errors is called <strong>atomic action</strong>.</p>\n\n<p>An atomic action is one that effectively happens all at once. An atomic action cannot stop in the middle: it either happens completely, or it doesn't happen at all. No side effects of an atomic action are visible until the action is complete.</p>\n\n<p>Below are actions you can specify that are atomic:</p>\n\n<ul>\n<li>Reads and writes are atomic for reference variables and for most\nprimitive variables (all types except long and double).</li>\n<li>Reads and writes are atomic for all variables declared <strong>volatile</strong>\n(including long and double variables).</li>\n</ul>\n\n<p>Cheers!</p>\n"},{"tags":[],"owner":{"account_id":7525670,"reputation":12194,"user_id":5715934,"accept_rate":95,"display_name":"Supun Wijerathne"},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1567664740,"creation_date":1520187874,"answer_id":49098807,"question_id":106591,"body_markdown":"A variable declared with `volatile` keyword, has two main qualities which make it special.\r\n\r\n 1. If we have a volatile variable, it cannot be cached into the computer&#39;s(microprocessor) cache memory by any thread. Access always happened from main memory.\r\n\r\n 2. If there is a ***write operation*** going on a volatile variable, and suddenly a ***read operation*** is requested, it is guaranteed that the ***write operation will be finished prior to the read operation***.\r\n \r\nTwo above qualities deduce that\r\n\r\n- All the threads reading a volatile variable will definitely read the latest value. Because no cached value can pollute it. And also the read request will be granted only after the completion of the current write operation.\r\n\r\nAnd on the other hand,\r\n\r\n- If we further investigate the **#2** that I have mentioned, we can see that `volatile` keyword is an ideal way to maintain a shared variable which has ***&#39;n&#39; number of reader threads and only one writer thread*** to access it. Once we add the `volatile` keyword, it is done. No any other overhead about thread safety.\r\n\r\nConversly, \r\n\r\nWe ***can&#39;t*** make use of `volatile` keyword solely, to satisfy a shared variable which has ***more than one writer thread accessing it***.\r\n ","title":"What is the volatile keyword useful for?","body":"<p>A variable declared with <code>volatile</code> keyword, has two main qualities which make it special.</p>\n\n<ol>\n<li><p>If we have a volatile variable, it cannot be cached into the computer's(microprocessor) cache memory by any thread. Access always happened from main memory.</p></li>\n<li><p>If there is a <strong><em>write operation</em></strong> going on a volatile variable, and suddenly a <strong><em>read operation</em></strong> is requested, it is guaranteed that the <strong><em>write operation will be finished prior to the read operation</em></strong>.</p></li>\n</ol>\n\n<p>Two above qualities deduce that</p>\n\n<ul>\n<li>All the threads reading a volatile variable will definitely read the latest value. Because no cached value can pollute it. And also the read request will be granted only after the completion of the current write operation.</li>\n</ul>\n\n<p>And on the other hand,</p>\n\n<ul>\n<li>If we further investigate the <strong>#2</strong> that I have mentioned, we can see that <code>volatile</code> keyword is an ideal way to maintain a shared variable which has <strong><em>'n' number of reader threads and only one writer thread</em></strong> to access it. Once we add the <code>volatile</code> keyword, it is done. No any other overhead about thread safety.</li>\n</ul>\n\n<p>Conversly, </p>\n\n<p>We <strong><em>can't</em></strong> make use of <code>volatile</code> keyword solely, to satisfy a shared variable which has <strong><em>more than one writer thread accessing it</em></strong>.</p>\n"},{"tags":[],"owner":{"account_id":13684630,"reputation":101,"user_id":9874027,"display_name":"sankar banerjee"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527747823,"creation_date":1527747823,"answer_id":50617902,"question_id":106591,"body_markdown":"Volatile does following.\r\n\r\n1&gt; Read and write of volatile variables by different threads are always from memory, not from thread&#39;s own cache or cpu register. So each thread always deals with the latest value.\r\n2&gt; When 2 different threads work with same instance or static variables in heap, one may see other&#39;s actions as out of order. See jeremy manson&#39;s blog on this. But volatile helps here.\r\n\r\nFollowing fully running code shows how a number of threads can execute in predefined order and print outputs without using synchronized keyword.\r\n\r\n    thread 0 prints 0\r\n    thread 1 prints 1\r\n    thread 2 prints 2\r\n    thread 3 prints 3\r\n    thread 0 prints 0\r\n    thread 1 prints 1\r\n    thread 2 prints 2\r\n    thread 3 prints 3\r\n    thread 0 prints 0\r\n    thread 1 prints 1\r\n    thread 2 prints 2\r\n    thread 3 prints 3\r\n\r\nTo achieve this we may use the following full fledged running code.\r\n\r\n    public class Solution {\r\n        static volatile int counter = 0;\r\n        static int print = 0;\r\n        public static void main(String[] args) {\r\n            // TODO Auto-generated method stub\r\n            Thread[] ths = new Thread[4];\r\n            for (int i = 0; i &lt; ths.length; i++) {\r\n                ths[i] = new Thread(new MyRunnable(i, ths.length));\r\n                ths[i].start();\r\n            }\r\n        }\r\n        static class MyRunnable implements Runnable {\r\n            final int thID;\r\n            final int total;\r\n            public MyRunnable(int id, int total) {\r\n                thID = id;\r\n                this.total = total;\r\n            }\r\n            @Override\r\n            public void run() {\r\n                // TODO Auto-generated method stub\r\n                while (true) {\r\n                    if (thID == counter) {\r\n                        System.out.println(&quot;thread &quot; + thID + &quot; prints &quot; + print);\r\n                        print++;\r\n                        if (print == total)\r\n                            print = 0;\r\n                        counter++;\r\n                        if (counter == total)\r\n                            counter = 0;\r\n                    } else {\r\n                        try {\r\n                            Thread.sleep(30);\r\n                        } catch (InterruptedException e) {\r\n                            // log it\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThe following github link has a readme, which gives proper explanation.\r\nhttps://github.com/sankar4git/volatile_thread_ordering","title":"What is the volatile keyword useful for?","body":"<p>Volatile does following.</p>\n\n<p>1> Read and write of volatile variables by different threads are always from memory, not from thread's own cache or cpu register. So each thread always deals with the latest value.\n2> When 2 different threads work with same instance or static variables in heap, one may see other's actions as out of order. See jeremy manson's blog on this. But volatile helps here.</p>\n\n<p>Following fully running code shows how a number of threads can execute in predefined order and print outputs without using synchronized keyword.</p>\n\n<pre><code>thread 0 prints 0\nthread 1 prints 1\nthread 2 prints 2\nthread 3 prints 3\nthread 0 prints 0\nthread 1 prints 1\nthread 2 prints 2\nthread 3 prints 3\nthread 0 prints 0\nthread 1 prints 1\nthread 2 prints 2\nthread 3 prints 3\n</code></pre>\n\n<p>To achieve this we may use the following full fledged running code.</p>\n\n<pre><code>public class Solution {\n    static volatile int counter = 0;\n    static int print = 0;\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        Thread[] ths = new Thread[4];\n        for (int i = 0; i &lt; ths.length; i++) {\n            ths[i] = new Thread(new MyRunnable(i, ths.length));\n            ths[i].start();\n        }\n    }\n    static class MyRunnable implements Runnable {\n        final int thID;\n        final int total;\n        public MyRunnable(int id, int total) {\n            thID = id;\n            this.total = total;\n        }\n        @Override\n        public void run() {\n            // TODO Auto-generated method stub\n            while (true) {\n                if (thID == counter) {\n                    System.out.println(\"thread \" + thID + \" prints \" + print);\n                    print++;\n                    if (print == total)\n                        print = 0;\n                    counter++;\n                    if (counter == total)\n                        counter = 0;\n                } else {\n                    try {\n                        Thread.sleep(30);\n                    } catch (InterruptedException e) {\n                        // log it\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The following github link has a readme, which gives proper explanation.\n<a href=\"https://github.com/sankar4git/volatile_thread_ordering\" rel=\"nofollow noreferrer\">https://github.com/sankar4git/volatile_thread_ordering</a></p>\n"},{"tags":[],"owner":{"account_id":136651,"reputation":8180,"user_id":340290,"accept_rate":78,"display_name":"manikanta"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1559626486,"creation_date":1550123285,"answer_id":54683948,"question_id":106591,"body_markdown":"Below is a very simple code to demonstrate the requirement of `volatile` for variable which is used to control the Thread execution from other thread (this is one scenario where `volatile` is required).\r\n\r\n```java\r\n// Code to prove importance of &#39;volatile&#39; when state of one thread is being mutated from another thread.\r\n// Try running this class with and without &#39;volatile&#39; for &#39;state&#39; property of Task class.\r\npublic class VolatileTest {\r\n    public static void main(String[] a) throws Exception {\r\n        Task task = new Task();\r\n        new Thread(task).start();\r\n\r\n        Thread.sleep(500);\r\n        long stoppedOn = System.nanoTime();\r\n\r\n        task.stop(); // -----&gt; do this to stop the thread\r\n\r\n        System.out.println(&quot;Stopping on: &quot; + stoppedOn);\r\n    }\r\n}\r\n\r\nclass Task implements Runnable {\r\n    // Try running with and without &#39;volatile&#39; here\r\n    private volatile boolean state = true;\r\n    private int i = 0;\r\n\r\n    public void stop() {\r\n        state = false;\r\n    } \r\n\r\n    @Override\r\n    public void run() {\r\n        while(state) {\r\n            i++;\r\n        }\r\n        System.out.println(i + &quot;&gt; Stopped on: &quot; + System.nanoTime());\r\n    }\r\n}\r\n\r\n```\r\n**When `volatile` is not used:** you&#39;ll never see &#39;*Stopped on: xxx*&#39; message even after &#39;*Stopping on: xxx*&#39;, and the program continues to run.\r\n```\r\nStopping on: 1895303906650500\r\n```\r\n**When `volatile` used:** you&#39;ll see the &#39;*Stopped on: xxx*&#39; immediately.\r\n```\r\nStopping on: 1895285647980000\r\n324565439&gt; Stopped on: 1895285648087300\r\n```\r\n\r\nDemo: https://repl.it/repls/SilverAgonizingObjectcode","title":"What is the volatile keyword useful for?","body":"<p>Below is a very simple code to demonstrate the requirement of <code>volatile</code> for variable which is used to control the Thread execution from other thread (this is one scenario where <code>volatile</code> is required).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Code to prove importance of 'volatile' when state of one thread is being mutated from another thread.\n// Try running this class with and without 'volatile' for 'state' property of Task class.\npublic class VolatileTest {\n    public static void main(String[] a) throws Exception {\n        Task task = new Task();\n        new Thread(task).start();\n\n        Thread.sleep(500);\n        long stoppedOn = System.nanoTime();\n\n        task.stop(); // -----&gt; do this to stop the thread\n\n        System.out.println(\"Stopping on: \" + stoppedOn);\n    }\n}\n\nclass Task implements Runnable {\n    // Try running with and without 'volatile' here\n    private volatile boolean state = true;\n    private int i = 0;\n\n    public void stop() {\n        state = false;\n    } \n\n    @Override\n    public void run() {\n        while(state) {\n            i++;\n        }\n        System.out.println(i + \"&gt; Stopped on: \" + System.nanoTime());\n    }\n}\n\n</code></pre>\n\n<p><strong>When <code>volatile</code> is not used:</strong> you'll never see '<em>Stopped on: xxx</em>' message even after '<em>Stopping on: xxx</em>', and the program continues to run.</p>\n\n<pre><code>Stopping on: 1895303906650500\n</code></pre>\n\n<p><strong>When <code>volatile</code> used:</strong> you'll see the '<em>Stopped on: xxx</em>' immediately.</p>\n\n<pre><code>Stopping on: 1895285647980000\n324565439&gt; Stopped on: 1895285648087300\n</code></pre>\n\n<p>Demo: <a href=\"https://repl.it/repls/SilverAgonizingObjectcode\" rel=\"nofollow noreferrer\">https://repl.it/repls/SilverAgonizingObjectcode</a></p>\n"},{"tags":[],"owner":{"account_id":5282761,"reputation":154,"user_id":4517590,"display_name":"Niyaz Ahamad"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1558090818,"creation_date":1558090818,"answer_id":56185079,"question_id":106591,"body_markdown":"volatile variable is basically used for instant update (flush) in main shared cache line once it updated, so that changes reflected to all worker threads immediately.","title":"What is the volatile keyword useful for?","body":"<p>volatile variable is basically used for instant update (flush) in main shared cache line once it updated, so that changes reflected to all worker threads immediately.</p>\n"},{"tags":[],"owner":{"account_id":6115775,"reputation":30435,"user_id":4770877,"display_name":"yoAlex5"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1681573250,"creation_date":1577438473,"answer_id":59498520,"question_id":106591,"body_markdown":"**Java Volatile**\r\n\r\n`volatile` -&gt; `synchronized`[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][1]\r\n\r\n`volatile` says for a programmer that the value always will be up to date. The problem is that the value can be saved on different types of hardware memory. For example it can be CPU registers, CPU cache, RAM... СPU registers and CPU cache belong to CPU and can not share a data unlike of RAM which is on the rescue in multithreading envirompment \r\n\r\n[![enter image description here][2]][2]\r\n\r\n`volatile` keyword says that a variable will be **read and written** from/to RAM memory **directly**. It has some computation footprint\r\n\r\n`Java 5` extended `volatile` by supporting `happens-before`[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][3]\r\n\r\n&gt;A write to a volatile field happens-before every subsequent read of that field.\r\n\r\n```\r\nRead is after write\r\n```\r\n\r\n`volatile` keyword **does not cure** a `race condition`[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][4] situation to sove it use `synchronized` keyword[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][1]\r\n\r\nAs a result it safety only when **one** thread **writes** and others just read the `volatile` value\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/59500618/4770877\r\n  [2]: https://i.stack.imgur.com/1EPWG.png\r\n  [3]: https://stackoverflow.com/a/59491099/4770877\r\n  [4]: https://stackoverflow.com/a/75134842/4770877","title":"What is the volatile keyword useful for?","body":"<p><strong>Java Volatile</strong></p>\n<p><code>volatile</code> -&gt; <code>synchronized</code><a href=\"https://stackoverflow.com/a/59500618/4770877\"><sup>[About]</sup></a></p>\n<p><code>volatile</code> says for a programmer that the value always will be up to date. The problem is that the value can be saved on different types of hardware memory. For example it can be CPU registers, CPU cache, RAM... СPU registers and CPU cache belong to CPU and can not share a data unlike of RAM which is on the rescue in multithreading envirompment</p>\n<p><a href=\"https://i.stack.imgur.com/1EPWG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1EPWG.png\" alt=\"enter image description here\" /></a></p>\n<p><code>volatile</code> keyword says that a variable will be <strong>read and written</strong> from/to RAM memory <strong>directly</strong>. It has some computation footprint</p>\n<p><code>Java 5</code> extended <code>volatile</code> by supporting <code>happens-before</code><a href=\"https://stackoverflow.com/a/59491099/4770877\"><sup>[About]</sup></a></p>\n<blockquote>\n<p>A write to a volatile field happens-before every subsequent read of that field.</p>\n</blockquote>\n<pre><code>Read is after write\n</code></pre>\n<p><code>volatile</code> keyword <strong>does not cure</strong> a <code>race condition</code><a href=\"https://stackoverflow.com/a/75134842/4770877\"><sup>[About]</sup></a> situation to sove it use <code>synchronized</code> keyword<a href=\"https://stackoverflow.com/a/59500618/4770877\"><sup>[About]</sup></a></p>\n<p>As a result it safety only when <strong>one</strong> thread <strong>writes</strong> and others just read the <code>volatile</code> value</p>\n"},{"tags":[],"owner":{"account_id":12279199,"reputation":2595,"user_id":9494420,"display_name":"Abhishek Luthra"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1599316105,"creation_date":1599313743,"answer_id":63754630,"question_id":106591,"body_markdown":"While I see many good Theoretical explanations in the answers mentioned here, I am adding a practical example with an explanation here:\r\n\r\n 1. \r\n\r\n**CODE RUN WITHOUT VOLATILE USE**\r\n\r\n    public class VisibilityDemonstration {\r\n\r\n    private static int sCount = 0;\r\n\r\n    public static void main(String[] args) {\r\n        new Consumer().start();\r\n        try {\r\n            Thread.sleep(100);\r\n        } catch (InterruptedException e) {\r\n            return;\r\n        }\r\n        new Producer().start();\r\n    }\r\n\r\n    static class Consumer extends Thread {\r\n        @Override\r\n        public void run() {\r\n            int localValue = -1;\r\n            while (true) {\r\n                if (localValue != sCount) {\r\n                    System.out.println(&quot;Consumer: detected count change &quot; + sCount);\r\n                    localValue = sCount;\r\n                }\r\n                if (sCount &gt;= 5) {\r\n                    break;\r\n                }\r\n            }\r\n            System.out.println(&quot;Consumer: terminating&quot;);\r\n        }\r\n    }\r\n\r\n    static class Producer extends Thread {\r\n        @Override\r\n        public void run() {\r\n            while (sCount &lt; 5) {\r\n                int localValue = sCount;\r\n                localValue++;\r\n                System.out.println(&quot;Producer: incrementing count to &quot; + localValue);\r\n                sCount = localValue;\r\n                try {\r\n                    Thread.sleep(1000);\r\n                } catch (InterruptedException e) {\r\n                    return;\r\n                }\r\n            }\r\n            System.out.println(&quot;Producer: terminating&quot;);\r\n        }\r\n    }\r\n    }\r\nIn the above code, there are two threads - Producer and Consumer. \r\n\r\nThe producer thread iterates over the loop 5 times (with a sleep of 1000 milliSecond or 1 Sec) in between. In every iteration, the producer thread increases the value of sCount variable by 1. So, the producer changes the value of sCount from 0 to 5 in all iterations\r\n\r\nThe consumer thread is in a constant loop and print whenever the value of sCount changes until the value reaches 5 where it ends. \r\n\r\nBoth the loops are started at the same time. So both the producer and consumer should print the value of sCount 5 times.\r\n\r\n**OUTPUT**\r\n\r\n    Consumer: detected count change 0\r\n    Producer: incrementing count to 1\r\n    Producer: incrementing count to 2\r\n    Producer: incrementing count to 3\r\n    Producer: incrementing count to 4\r\n    Producer: incrementing count to 5\r\n    Producer: terminating\r\n\r\n**ANALYSIS**\r\n\r\nIn the above program, when the producer thread updates the value of sCount, it does update the value of the variable in the main memory(memory from where every thread is going to initially read the value of variable). But the consumer thread reads the value of sCount only the first time from this main memory and then caches the value of that variable inside its own memory. So, even if the value of original sCount in main memory has been updated by the producer thread, the consumer thread is reading from its cached value which is not updated. This is called **VISIBILITY PROBLEM** .\r\n\r\n 2. \r\n     \r\n**CODE RUN WITH VOLATILE USE**\r\n\r\nIn the above code, replace the line of code where sCount is declared by the following :\r\n\r\n    private volatile  static int sCount = 0;\r\n\r\n**OUTPUT**\r\n\r\n    Consumer: detected count change 0\r\n    Producer: incrementing count to 1\r\n    Consumer: detected count change 1\r\n    Producer: incrementing count to 2\r\n    Consumer: detected count change 2\r\n    Producer: incrementing count to 3\r\n    Consumer: detected count change 3\r\n    Producer: incrementing count to 4\r\n    Consumer: detected count change 4\r\n    Producer: incrementing count to 5\r\n    Consumer: detected count change 5\r\n    Consumer: terminating\r\n    Producer: terminating\r\n\r\n**ANALYSIS**\r\n\r\nWhen we declare a variable volatile, it means that all reads and all writes to this variable or from this variable will go directly into the main memory. The values of these variables will never be cached.\r\n\r\nAs the value of the sCount variable is never cached by any thread, the consumer always reads the original value of sCount from the main memory(where it is being updated by producer thread). So, In this case the output is correct where both the threads prints the different values of sCount 5 times.\r\n\r\nIn this way, the volatile keyword solves the **VISIBILITY PROBLEM** .\r\n\r\n\r\n\r\n","title":"What is the volatile keyword useful for?","body":"<p>While I see many good Theoretical explanations in the answers mentioned here, I am adding a practical example with an explanation here:</p>\n<p>1.</p>\n<p><strong>CODE RUN WITHOUT VOLATILE USE</strong></p>\n<pre><code>public class VisibilityDemonstration {\n\nprivate static int sCount = 0;\n\npublic static void main(String[] args) {\n    new Consumer().start();\n    try {\n        Thread.sleep(100);\n    } catch (InterruptedException e) {\n        return;\n    }\n    new Producer().start();\n}\n\nstatic class Consumer extends Thread {\n    @Override\n    public void run() {\n        int localValue = -1;\n        while (true) {\n            if (localValue != sCount) {\n                System.out.println(&quot;Consumer: detected count change &quot; + sCount);\n                localValue = sCount;\n            }\n            if (sCount &gt;= 5) {\n                break;\n            }\n        }\n        System.out.println(&quot;Consumer: terminating&quot;);\n    }\n}\n\nstatic class Producer extends Thread {\n    @Override\n    public void run() {\n        while (sCount &lt; 5) {\n            int localValue = sCount;\n            localValue++;\n            System.out.println(&quot;Producer: incrementing count to &quot; + localValue);\n            sCount = localValue;\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                return;\n            }\n        }\n        System.out.println(&quot;Producer: terminating&quot;);\n    }\n}\n}\n</code></pre>\n<p>In the above code, there are two threads - Producer and Consumer.</p>\n<p>The producer thread iterates over the loop 5 times (with a sleep of 1000 milliSecond or 1 Sec) in between. In every iteration, the producer thread increases the value of sCount variable by 1. So, the producer changes the value of sCount from 0 to 5 in all iterations</p>\n<p>The consumer thread is in a constant loop and print whenever the value of sCount changes until the value reaches 5 where it ends.</p>\n<p>Both the loops are started at the same time. So both the producer and consumer should print the value of sCount 5 times.</p>\n<p><strong>OUTPUT</strong></p>\n<pre><code>Consumer: detected count change 0\nProducer: incrementing count to 1\nProducer: incrementing count to 2\nProducer: incrementing count to 3\nProducer: incrementing count to 4\nProducer: incrementing count to 5\nProducer: terminating\n</code></pre>\n<p><strong>ANALYSIS</strong></p>\n<p>In the above program, when the producer thread updates the value of sCount, it does update the value of the variable in the main memory(memory from where every thread is going to initially read the value of variable). But the consumer thread reads the value of sCount only the first time from this main memory and then caches the value of that variable inside its own memory. So, even if the value of original sCount in main memory has been updated by the producer thread, the consumer thread is reading from its cached value which is not updated. This is called <strong>VISIBILITY PROBLEM</strong> .</p>\n<p>2.</p>\n<p><strong>CODE RUN WITH VOLATILE USE</strong></p>\n<p>In the above code, replace the line of code where sCount is declared by the following :</p>\n<pre><code>private volatile  static int sCount = 0;\n</code></pre>\n<p><strong>OUTPUT</strong></p>\n<pre><code>Consumer: detected count change 0\nProducer: incrementing count to 1\nConsumer: detected count change 1\nProducer: incrementing count to 2\nConsumer: detected count change 2\nProducer: incrementing count to 3\nConsumer: detected count change 3\nProducer: incrementing count to 4\nConsumer: detected count change 4\nProducer: incrementing count to 5\nConsumer: detected count change 5\nConsumer: terminating\nProducer: terminating\n</code></pre>\n<p><strong>ANALYSIS</strong></p>\n<p>When we declare a variable volatile, it means that all reads and all writes to this variable or from this variable will go directly into the main memory. The values of these variables will never be cached.</p>\n<p>As the value of the sCount variable is never cached by any thread, the consumer always reads the original value of sCount from the main memory(where it is being updated by producer thread). So, In this case the output is correct where both the threads prints the different values of sCount 5 times.</p>\n<p>In this way, the volatile keyword solves the <strong>VISIBILITY PROBLEM</strong> .</p>\n"},{"tags":[],"owner":{"account_id":13778635,"reputation":615,"user_id":9944300,"display_name":"Amin Soheyli"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1607001718,"creation_date":1607000656,"answer_id":65126556,"question_id":106591,"body_markdown":"Assume that a thread modifies the value of a shared variable, if you didn&#39;t use `volatile` modifier for that variable. When other threads want to read this variable&#39;s value, they don&#39;t see the updated value because they read the variable&#39;s value from the CPU&#39;s cache instead of RAM memory. This problem also known as `Visibility Problem`.\r\n\r\nBy declaring the shared variable `volatile`, all writes to the counter variable will be written back to main memory immediately. Also, all reads of the counter variable will be read directly from main memory.\r\n\r\n    public class SharedObject {\r\n        public volatile int sharedVariable = 0;\r\n    }\r\n\r\nWith non-volatile variables there are no guarantees about when the Java Virtual Machine (JVM) reads data from main memory into CPU caches, or writes data from CPU caches to main memory. This can cause several problems which I will explain in the following sections.\r\n\r\n\r\n----------\r\n\r\n\r\n**Example:** \r\n\r\nImagine a situation in which two or more threads have access to a shared object which contains a counter variable declared like this:\r\n\r\n    public class SharedObject {\r\n        public int counter = 0;\r\n    }\r\n\r\nImagine too, that only Thread 1 increments the counter variable, but both Thread 1 and Thread 2 may read the counter variable from time to time.\r\n\r\nIf the counter variable is not declared volatile there is no guarantee about when the value of the counter variable is written from the CPU cache back to main memory. This means, that the counter variable value in the CPU cache may not be the same as in main memory. This situation is illustrated here:\r\n\r\n[![volatile][1]][1]\r\n\r\nThe problem with threads not seeing the latest value of a variable because it has not yet been written back to main memory by another thread, is called a &quot;visibility&quot; problem. The updates of one thread are not visible to other threads.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/L57nd.png","title":"What is the volatile keyword useful for?","body":"<p>Assume that a thread modifies the value of a shared variable, if you didn't use <code>volatile</code> modifier for that variable. When other threads want to read this variable's value, they don't see the updated value because they read the variable's value from the CPU's cache instead of RAM memory. This problem also known as <code>Visibility Problem</code>.</p>\n<p>By declaring the shared variable <code>volatile</code>, all writes to the counter variable will be written back to main memory immediately. Also, all reads of the counter variable will be read directly from main memory.</p>\n<pre><code>public class SharedObject {\n    public volatile int sharedVariable = 0;\n}\n</code></pre>\n<p>With non-volatile variables there are no guarantees about when the Java Virtual Machine (JVM) reads data from main memory into CPU caches, or writes data from CPU caches to main memory. This can cause several problems which I will explain in the following sections.</p>\n<hr />\n<p><strong>Example:</strong></p>\n<p>Imagine a situation in which two or more threads have access to a shared object which contains a counter variable declared like this:</p>\n<pre><code>public class SharedObject {\n    public int counter = 0;\n}\n</code></pre>\n<p>Imagine too, that only Thread 1 increments the counter variable, but both Thread 1 and Thread 2 may read the counter variable from time to time.</p>\n<p>If the counter variable is not declared volatile there is no guarantee about when the value of the counter variable is written from the CPU cache back to main memory. This means, that the counter variable value in the CPU cache may not be the same as in main memory. This situation is illustrated here:</p>\n<p><a href=\"https://i.stack.imgur.com/L57nd.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/L57nd.png\" alt=\"volatile\" /></a></p>\n<p>The problem with threads not seeing the latest value of a variable because it has not yet been written back to main memory by another thread, is called a &quot;visibility&quot; problem. The updates of one thread are not visible to other threads.</p>\n"},{"tags":[],"owner":{"account_id":14206439,"reputation":38683,"user_id":10262805,"display_name":"Yilmaz"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1662875231,"creation_date":1662875231,"answer_id":73677124,"question_id":106591,"body_markdown":"If you have a multithread system and these multiple threads work on some shared data, those threads will load data in their own cache. If we do not lock the resource, any change made in one thread is NOT gonna be available in another thread. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nWith a locking mechanism, we add read/write access to the data source. If one thread modifies the data source, that data will be stored in the main memory instead of in its cache. When others threads need this data, they will read it from the main memory. This will increase the latency dramatically. \r\n\r\nTo reduce the latency, we declare variables as `volatile`. It means that whenever the value of the variable is modified in any of the processors, the other threads will be forced to read it. It still has some delays but better than reading from the main memory.\r\n\r\n  [1]: https://i.stack.imgur.com/za62k.png","title":"What is the volatile keyword useful for?","body":"<p>If you have a multithread system and these multiple threads work on some shared data, those threads will load data in their own cache. If we do not lock the resource, any change made in one thread is NOT gonna be available in another thread.</p>\n<p><a href=\"https://i.stack.imgur.com/za62k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/za62k.png\" alt=\"enter image description here\" /></a></p>\n<p>With a locking mechanism, we add read/write access to the data source. If one thread modifies the data source, that data will be stored in the main memory instead of in its cache. When others threads need this data, they will read it from the main memory. This will increase the latency dramatically.</p>\n<p>To reduce the latency, we declare variables as <code>volatile</code>. It means that whenever the value of the variable is modified in any of the processors, the other threads will be forced to read it. It still has some delays but better than reading from the main memory.</p>\n"}],"owner":{"account_id":9137,"reputation":10022,"user_id":16759,"accept_rate":70,"display_name":"Richard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":345045,"favorite_count":0,"down_vote_count":2,"up_vote_count":807,"accepted_answer_id":106787,"answer_count":25,"score":805,"last_activity_date":1681573250,"creation_date":1221871262,"question_id":106591,"body_markdown":"At work today, I came across the `volatile` keyword in Java. Not being very familiar with it, I found [this explanation](http://web.archive.org/web/20210221170926/https://www.ibm.com/developerworks/java/library/j-jtp06197/). \r\n\r\nGiven the detail in which that article explains the keyword in question, do you ever use it or could you ever see a case in which you could use this keyword in the correct manner?","title":"What is the volatile keyword useful for?","body":"<p>At work today, I came across the <code>volatile</code> keyword in Java. Not being very familiar with it, I found <a href=\"http://web.archive.org/web/20210221170926/https://www.ibm.com/developerworks/java/library/j-jtp06197/\" rel=\"noreferrer\">this explanation</a>.</p>\n<p>Given the detail in which that article explains the keyword in question, do you ever use it or could you ever see a case in which you could use this keyword in the correct manner?</p>\n"},{"tags":["java","operators"],"answers":[{"tags":[],"owner":{"account_id":43462,"reputation":60851,"user_id":127059,"accept_rate":90,"display_name":"Femaref"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1285152924,"creation_date":1285152924,"answer_id":3768510,"question_id":3768499,"body_markdown":"It is a shorthand for: \r\n\r\n    result = result | add(e);\r\n\r\nWhere the `|` is the bitwise OR operator.","title":"Java |= operator question","body":"<p>It is a shorthand for: </p>\n\n<pre><code>result = result | add(e);\n</code></pre>\n\n<p>Where the <code>|</code> is the bitwise OR operator.</p>\n"},{"tags":[],"owner":{"account_id":141652,"reputation":1916,"user_id":348852,"accept_rate":82,"display_name":"Sagar V"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1285152981,"creation_date":1285152981,"answer_id":3768518,"question_id":3768499,"body_markdown":"It is a bitwise OR-ing of `result` and `add(e)` and assigning it back to result. Shorthand notation instead of writing `result = result | add(e)`","title":"Java |= operator question","body":"<p>It is a bitwise OR-ing of <code>result</code> and <code>add(e)</code> and assigning it back to result. Shorthand notation instead of writing <code>result = result | add(e)</code></p>\n"},{"tags":[],"owner":{"account_id":170758,"reputation":4261,"user_id":397707,"accept_rate":50,"display_name":"Raoul Duke"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1285152985,"creation_date":1285152985,"answer_id":3768519,"question_id":3768499,"body_markdown":"it&#39;s shorthand for result = result | add(e). The pipe is the [bitwise or][1] operator.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Bitwise_operation#OR","title":"Java |= operator question","body":"<p>it's shorthand for result = result | add(e). The pipe is the <a href=\"http://en.wikipedia.org/wiki/Bitwise_operation#OR\" rel=\"nofollow noreferrer\">bitwise or</a> operator.</p>\n"},{"tags":[],"owner":{"account_id":114848,"reputation":134179,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1285153904,"creation_date":1285153904,"answer_id":3768622,"question_id":3768499,"body_markdown":"The or-assign operator (`|=`) sets the variable on the LHS to the value it previously contained OR-ed with the result of evaluating the RHS. For boolean types (as in this example) it changes the variable to contain true when the value is true (and otherwise has no net effect). It does *not* short-circuit evaluate.\r\n\r\nThe overall effect of the method is to call the current object&#39;s `add` method for each element of the argument collection, and to return true if any of those calls to `add` return true (i.e., if anything actually got added, under reasonable assumptions about the meaning of the result of `add`…)","title":"Java |= operator question","body":"<p>The or-assign operator (<code>|=</code>) sets the variable on the LHS to the value it previously contained OR-ed with the result of evaluating the RHS. For boolean types (as in this example) it changes the variable to contain true when the value is true (and otherwise has no net effect). It does <em>not</em> short-circuit evaluate.</p>\n\n<p>The overall effect of the method is to call the current object's <code>add</code> method for each element of the argument collection, and to return true if any of those calls to <code>add</code> return true (i.e., if anything actually got added, under reasonable assumptions about the meaning of the result of <code>add</code>…)</p>\n"},{"tags":[],"owner":{"account_id":2288,"reputation":191195,"user_id":3171,"accept_rate":92,"display_name":"David Webb"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1681573145,"creation_date":1285154881,"answer_id":3768734,"question_id":3768499,"body_markdown":"The code is adding all members of a `Collection` using the `add()` method which returns a `boolean`, indicating if the `add()` succeeded or not. What the `addAll` method does is return `true` if any of the adds succeeded and `false` if all of them failed. (This does seem odd to me, since I&#39;d only return `true` if all the adds were succesful, but I digress.)\r\n\r\nSo you could do it like this:\r\n\r\n    @Override\r\n    public boolean addAll(Collection&lt;? extends E&gt; c) {\r\n        boolean result = false;\r\n        for (E e : c) {\r\n            if (add(e)) {\r\n               result = true;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\nBut that&#39;s a little verbose as you can act on the `result` variable more directly:\r\n\r\n    @Override\r\n    public boolean addAll(Collection&lt;? extends E&gt; c) {\r\n        boolean result = false;\r\n        for (E e : c) {\r\n            result = add(e) || result;\r\n        }\r\n        return result;\r\n    }\r\n\r\nSo we&#39;re logically OR-ing the old value of `result` with the return value of `add` to get the new value. (Note: we want `result` to be on the right hand side of the `||`; this is because `||` &quot;shortcircuits&quot; and doesn&#39;t bother checking the right hand side of an `||` if the left side is `true`). So if `add(e)` and `result` were the other way around, it would not evaluate the right hand side — i.e. not run the `add()` method — once `result` were `true`.) \r\n\r\nWhoever wrote that method decided they wanted to be as terse as possible so they changed:\r\n\r\n    result = add(e) || result;\r\n\r\nto:\r\n\r\n    result |= add(e);\r\n\r\nwhich is the same as:\r\n\r\n    result = result | add(e);\r\n\r\nThe [`|` operator is a bitwise OR][1] which is not the same as a logical OR, except for booleans where the effect is basically the same, the only difference being the `|` not having the shortcircuit behaviour mentioned above.\r\n\r\nThere is no `||=` syntax in Java which is why the bitwise OR is being used, although even if it did, it would probably have the same shortcircuit problem mentioned above.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/java/nutsandbolts/op3.html","title":"Java |= operator question","body":"<p>The code is adding all members of a <code>Collection</code> using the <code>add()</code> method which returns a <code>boolean</code>, indicating if the <code>add()</code> succeeded or not. What the <code>addAll</code> method does is return <code>true</code> if any of the adds succeeded and <code>false</code> if all of them failed. (This does seem odd to me, since I'd only return <code>true</code> if all the adds were succesful, but I digress.)</p>\n<p>So you could do it like this:</p>\n<pre><code>@Override\npublic boolean addAll(Collection&lt;? extends E&gt; c) {\n    boolean result = false;\n    for (E e : c) {\n        if (add(e)) {\n           result = true;\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>But that's a little verbose as you can act on the <code>result</code> variable more directly:</p>\n<pre><code>@Override\npublic boolean addAll(Collection&lt;? extends E&gt; c) {\n    boolean result = false;\n    for (E e : c) {\n        result = add(e) || result;\n    }\n    return result;\n}\n</code></pre>\n<p>So we're logically OR-ing the old value of <code>result</code> with the return value of <code>add</code> to get the new value. (Note: we want <code>result</code> to be on the right hand side of the <code>||</code>; this is because <code>||</code> &quot;shortcircuits&quot; and doesn't bother checking the right hand side of an <code>||</code> if the left side is <code>true</code>). So if <code>add(e)</code> and <code>result</code> were the other way around, it would not evaluate the right hand side — i.e. not run the <code>add()</code> method — once <code>result</code> were <code>true</code>.)</p>\n<p>Whoever wrote that method decided they wanted to be as terse as possible so they changed:</p>\n<pre><code>result = add(e) || result;\n</code></pre>\n<p>to:</p>\n<pre><code>result |= add(e);\n</code></pre>\n<p>which is the same as:</p>\n<pre><code>result = result | add(e);\n</code></pre>\n<p>The <a href=\"http://download.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\" rel=\"nofollow noreferrer\"><code>|</code> operator is a bitwise OR</a> which is not the same as a logical OR, except for booleans where the effect is basically the same, the only difference being the <code>|</code> not having the shortcircuit behaviour mentioned above.</p>\n<p>There is no <code>||=</code> syntax in Java which is why the bitwise OR is being used, although even if it did, it would probably have the same shortcircuit problem mentioned above.</p>\n"}],"owner":{"account_id":204598,"reputation":91,"user_id":452915,"display_name":"user452915"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":985,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"closed_date":1451578291,"accepted_answer_id":3768734,"answer_count":5,"score":8,"last_activity_date":1681573145,"creation_date":1285152856,"question_id":3768499,"body_markdown":"I need help about this strange operator `|=`. Can you explain to me what this code does ?\r\n\r\n    @Override\r\n    public boolean addAll(Collection&lt;? extends E&gt; c) {\r\n        boolean result = false;\r\n        for (E e : c) {\r\n            result |= add(e);\r\n        }\r\n        return result;\r\n    }","title":"Java |= operator question","body":"<p>I need help about this strange operator <code>|=</code>. Can you explain to me what this code does ?</p>\n\n<pre><code>@Override\npublic boolean addAll(Collection&lt;? extends E&gt; c) {\n    boolean result = false;\n    for (E e : c) {\n        result |= add(e);\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":["java","if-statement","time-complexity"],"comments":[{"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":1,"creation_date":1508620803,"post_id":46864182,"comment_id":80683652,"body_markdown":"What gets executed in each of the &quot;do something&quot; or &quot;do something else&quot; blocks? That will influence the time complexity of the code.","body":"What gets executed in each of the &quot;do something&quot; or &quot;do something else&quot; blocks? That will influence the time complexity of the code."}],"answers":[{"tags":[],"owner":{"account_id":2097932,"reputation":905,"user_id":1866301,"display_name":"vaibhav kumar"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1508668628,"creation_date":1508668628,"answer_id":46873092,"question_id":46864182,"body_markdown":"Time complexity (worst case) will be O(m+n). It will check m conditions for outer else ifs and upon finding the true condition, will check n conditions for the inner else ifs.","title":"Time complexity of nested IF statements","body":"<p>Time complexity (worst case) will be O(m+n). It will check m conditions for outer else ifs and upon finding the true condition, will check n conditions for the inner else ifs.</p>\n"},{"tags":[],"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680706109,"creation_date":1680706109,"answer_id":75940892,"question_id":46864182,"body_markdown":"The time complexity is **O(1)** (constant time).\r\n\r\nIn this example, you have *m* * *n* conditionals checked, but those are fixed numbers of conditionals that are hardcoded into the program.  There&#39;s no processing of data with size *m* or *n*, such as a loop.  If the data doubles in size, there will still be the same constant number of if statements.  Thus, the time complexity is constant, or O(1).","title":"Time complexity of nested IF statements","body":"<p>The time complexity is <strong>O(1)</strong> (constant time).</p>\n<p>In this example, you have <em>m</em> * <em>n</em> conditionals checked, but those are fixed numbers of conditionals that are hardcoded into the program.  There's no processing of data with size <em>m</em> or <em>n</em>, such as a loop.  If the data doubles in size, there will still be the same constant number of if statements.  Thus, the time complexity is constant, or O(1).</p>\n"},{"tags":[],"owner":{"account_id":4672576,"reputation":11,"user_id":15238891,"display_name":"boo lean - Go FAT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681573075,"creation_date":1681572287,"answer_id":76023182,"question_id":46864182,"body_markdown":"\r\n\r\nThe Big-O notation of this is NOT O(m+n).\r\n\r\n(also, you&#39;ve managed to explain a nested loop scenario, but used if statements as your code..)\r\n\r\nIf you&#39;re at an apple orchard and you have to check how many apples are hanging in the orchard, but there was a storm and some of the trees may have fallen over during the night...\r\n\r\nThen, you&#39;d have to first walk around and check if each tree was up. Each time you got to a tree that was standing - you counted its apples. The trees are the outer loop (btw you explained nested loops but wrote if statements) and the apples are the inner loop....\r\n\r\nBig-O analyzes the UPPER BOUND LIMIT of an equation... aka - bigO would be an assessment that assumes every tree is standing and every tree has the maximum amt of apples a tree can possibly hold.\r\n\r\nEven though you wrote half your code in English rather than using loops, the answer to your question is Big-O(N^2)\r\n\r\nIt is NOT (m+n) ... First off - you don&#39;t keep both variables, you just use n. Second, it is NOT the two added together. If there were 20 trees in the orchard, none had fallen, and each tree was full of apples and each one could bear a maximum of 50 apples... (would there be 70 apples in the orchard??? No.) There would be 1000 apples.\r\n\r\n\r\n(The Big-O is not technically constant - ACCORDING TO THE CODE written, yes, it is. However, the paragraph makes for a bit of logic that suggests loops SHOULD be in the code - taking the words &quot;if we have M outer if statements&quot; into account shows it&#39;s n^2. The code that&#39;s written as an example DOESN&#39;T have multiple outer if statements, though).","title":"Time complexity of nested IF statements","body":"<p>The Big-O notation of this is NOT O(m+n).</p>\n<p>(also, you've managed to explain a nested loop scenario, but used if statements as your code..)</p>\n<p>If you're at an apple orchard and you have to check how many apples are hanging in the orchard, but there was a storm and some of the trees may have fallen over during the night...</p>\n<p>Then, you'd have to first walk around and check if each tree was up. Each time you got to a tree that was standing - you counted its apples. The trees are the outer loop (btw you explained nested loops but wrote if statements) and the apples are the inner loop....</p>\n<p>Big-O analyzes the UPPER BOUND LIMIT of an equation... aka - bigO would be an assessment that assumes every tree is standing and every tree has the maximum amt of apples a tree can possibly hold.</p>\n<p>Even though you wrote half your code in English rather than using loops, the answer to your question is Big-O(N^2)</p>\n<p>It is NOT (m+n) ... First off - you don't keep both variables, you just use n. Second, it is NOT the two added together. If there were 20 trees in the orchard, none had fallen, and each tree was full of apples and each one could bear a maximum of 50 apples... (would there be 70 apples in the orchard??? No.) There would be 1000 apples.</p>\n<p>(The Big-O is not technically constant - ACCORDING TO THE CODE written, yes, it is. However, the paragraph makes for a bit of logic that suggests loops SHOULD be in the code - taking the words &quot;if we have M outer if statements&quot; into account shows it's n^2. The code that's written as an example DOESN'T have multiple outer if statements, though).</p>\n"}],"owner":{"account_id":11637464,"reputation":521,"user_id":8523169,"accept_rate":82,"display_name":"Aayush Taneja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7633,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":46873092,"answer_count":3,"score":0,"last_activity_date":1681573075,"creation_date":1508595386,"question_id":46864182,"body_markdown":"If we have &#39;`m`&#39; outer IF-ELSE statements and **each** outer IF-ELSE statement contains &#39;`n`&#39; IF-ELSE statements, **then what would be the time complexity of the code?**\r\n\r\nFor Example:\r\n\r\n    if(Condition 1){\r\n        if(Condition 2){\r\n            //Do something\r\n        }\r\n        .\r\n        .    //&#39;n&#39; inner IF-ELSE statements\r\n        .    \r\n        else{\r\n            //Do something else\r\n        }\r\n    }\r\n    .\r\n    .  //&#39;m&#39; outer IF-ELSE Statements\r\n    .\r\n    else{\r\n        //Do something else\r\n    }\r\n\r\n\r\n    \r\n","title":"Time complexity of nested IF statements","body":"<p>If we have '<code>m</code>' outer IF-ELSE statements and <strong>each</strong> outer IF-ELSE statement contains '<code>n</code>' IF-ELSE statements, <strong>then what would be the time complexity of the code?</strong></p>\n\n<p>For Example:</p>\n\n<pre><code>if(Condition 1){\n    if(Condition 2){\n        //Do something\n    }\n    .\n    .    //'n' inner IF-ELSE statements\n    .    \n    else{\n        //Do something else\n    }\n}\n.\n.  //'m' outer IF-ELSE Statements\n.\nelse{\n    //Do something else\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","location"],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681573065,"creation_date":1681573065,"answer_id":76023239,"question_id":76023174,"body_markdown":"&gt; How come it does not matter whether I enable or disable the location service?\r\n\r\nThe location service is what supplies data to `LocationManager`, from GPS and so on.\r\n\r\nHowever, the location *permissions* cover not only that, but other technologies that could be used to determine a device&#39;s location, such as scanning for WiFi access points or, reminiscent of your case, detecting BLE beacons.","title":"How can Android APP give location permissions if location service is disabled","body":"<blockquote>\n<p>How come it does not matter whether I enable or disable the location service?</p>\n</blockquote>\n<p>The location service is what supplies data to <code>LocationManager</code>, from GPS and so on.</p>\n<p>However, the location <em>permissions</em> cover not only that, but other technologies that could be used to determine a device's location, such as scanning for WiFi access points or, reminiscent of your case, detecting BLE beacons.</p>\n"}],"owner":{"account_id":21973697,"reputation":336,"user_id":16249829,"display_name":"TheBestPlayer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":539,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681573065,"creation_date":1681572199,"question_id":76023174,"body_markdown":"I am newbie at developing Android apps. My goal is to create a BLE app for my custom device that I have created. In order to create BLE app, I must first learn how to enable location service as BLE needs to have this enabled.\r\n\r\nI have read and followed instructions from:\r\nhttps://developer.android.com/training/location/permissions and\r\nhttps://developer.android.com/training/permissions/requesting#java\r\n\r\n**How I prepare my project:**\r\n\r\n 1. Create brand new Java project Minimum SDK (API 25:Android 7.1.1 (Nougat)\r\n \r\n\r\n 2. Add permissions in AndroidManifest\r\n```\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\r\n```\r\n\r\n 3. Add libraries in build.gradle (Module:app) as described in (https://developer.android.com/training/permissions/requesting#allow-system-manage-request-code)\r\n\r\n ```\r\n    implementation &quot;androidx.fragment:fragment:1.5.6&quot;\r\n    implementation &quot;androidx.activity:activity:1.7.0&quot;\r\n ```\r\n\r\n 4. Copied the example code provided in https://developer.android.com/training/permissions/requesting#java on how to request and handle request response to my project.\r\n\r\n**Full MainActivity.java code:**\r\n\r\n```\r\npackage com.example.location_test_v2;\r\n\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport androidx.core.content.ContextCompat;\r\n\r\n\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        if (ContextCompat.checkSelfPermission(MainActivity.this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {\r\n            Log.e(&quot;INFO&quot;, &quot;PERMISSION ALREADY GRANTED: &quot;);\r\n        }\r\n\r\n        else {\r\n            Log.e(&quot;INFO&quot;, &quot;PERMISSION IS NOT GRANTED: &quot;);\r\n            locationPermissionRequest.launch(new String[] {\r\n                    android.Manifest.permission.ACCESS_FINE_LOCATION,\r\n                    android.Manifest.permission.ACCESS_COARSE_LOCATION\r\n            });\r\n        }\r\n\r\n    }\r\n    \r\n    private ActivityResultLauncher&lt;String[]&gt; locationPermissionRequest =\r\n            registerForActivityResult(new ActivityResultContracts.RequestMultiplePermissions(), result -&gt; {\r\n                        Boolean fineLocationGranted = result.getOrDefault(android.Manifest.permission.ACCESS_FINE_LOCATION, false);\r\n                        Boolean coarseLocationGranted = result.getOrDefault(android.Manifest.permission.ACCESS_COARSE_LOCATION,false);\r\n                        if (fineLocationGranted != null &amp;&amp; fineLocationGranted) {\r\n                            Log.e(&quot;INFO&quot;, &quot;PRECISE LOCATION GRANTED&quot; );\r\n                        } \r\n                        else if (coarseLocationGranted != null &amp;&amp; coarseLocationGranted) {\r\n                            Log.e(&quot;INFO&quot;, &quot;APPROXIMATAE LOCATION GRANTED&quot; );\r\n                        } \r\n                        else {\r\n                            Log.e(&quot;INFO&quot;, &quot;NO LOCATION GRANTED&quot; );\r\n                        }\r\n                    }\r\n            );\r\n    \r\n\r\n}\r\n```\r\n\r\nI have paired my physical device to android studio via WiFi and simulating the app on my Samsung Flip 4.\r\n\r\n\r\nImagine a scenario where I havent previously installed this app on my phone (lets say it is downloaded for the first time), obviously the location permissions will not be given to this app yet. When the app is opened for the first time, I am prompted to enable location sharing as shown in the image below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAfter choosing the precise or approximate location, everything seems to be fine. I can go to my Settings-&gt;Location-&gt;App Permissions-&gt;Location_test_v2 (my app name) and I can see that the location permissions are given to the app.\r\n\r\n**My question:**\r\n\r\nMy only concern is how is it possible to give location permission to the app if the location service is Off on my phone. How come it does not matter whether I enable or disable the location service?\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tbWIX.png","title":"How can Android APP give location permissions if location service is disabled","body":"<p>I am newbie at developing Android apps. My goal is to create a BLE app for my custom device that I have created. In order to create BLE app, I must first learn how to enable location service as BLE needs to have this enabled.</p>\n<p>I have read and followed instructions from:\n<a href=\"https://developer.android.com/training/location/permissions\" rel=\"nofollow noreferrer\">https://developer.android.com/training/location/permissions</a> and\n<a href=\"https://developer.android.com/training/permissions/requesting#java\" rel=\"nofollow noreferrer\">https://developer.android.com/training/permissions/requesting#java</a></p>\n<p><strong>How I prepare my project:</strong></p>\n<ol>\n<li><p>Create brand new Java project Minimum SDK (API 25:Android 7.1.1 (Nougat)</p>\n</li>\n<li><p>Add permissions in AndroidManifest</p>\n</li>\n</ol>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\n</code></pre>\n<ol start=\"3\">\n<li>Add libraries in build.gradle (Module:app) as described in (<a href=\"https://developer.android.com/training/permissions/requesting#allow-system-manage-request-code\" rel=\"nofollow noreferrer\">https://developer.android.com/training/permissions/requesting#allow-system-manage-request-code</a>)</li>\n</ol>\n<pre><code>   implementation &quot;androidx.fragment:fragment:1.5.6&quot;\n   implementation &quot;androidx.activity:activity:1.7.0&quot;\n</code></pre>\n<ol start=\"4\">\n<li>Copied the example code provided in <a href=\"https://developer.android.com/training/permissions/requesting#java\" rel=\"nofollow noreferrer\">https://developer.android.com/training/permissions/requesting#java</a> on how to request and handle request response to my project.</li>\n</ol>\n<p><strong>Full MainActivity.java code:</strong></p>\n<pre><code>package com.example.location_test_v2;\n\nimport androidx.activity.result.ActivityResultLauncher;\nimport androidx.activity.result.contract.ActivityResultContracts;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport androidx.core.content.ContextCompat;\n\n\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.util.Log;\n\npublic class MainActivity extends AppCompatActivity {\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        if (ContextCompat.checkSelfPermission(MainActivity.this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {\n            Log.e(&quot;INFO&quot;, &quot;PERMISSION ALREADY GRANTED: &quot;);\n        }\n\n        else {\n            Log.e(&quot;INFO&quot;, &quot;PERMISSION IS NOT GRANTED: &quot;);\n            locationPermissionRequest.launch(new String[] {\n                    android.Manifest.permission.ACCESS_FINE_LOCATION,\n                    android.Manifest.permission.ACCESS_COARSE_LOCATION\n            });\n        }\n\n    }\n    \n    private ActivityResultLauncher&lt;String[]&gt; locationPermissionRequest =\n            registerForActivityResult(new ActivityResultContracts.RequestMultiplePermissions(), result -&gt; {\n                        Boolean fineLocationGranted = result.getOrDefault(android.Manifest.permission.ACCESS_FINE_LOCATION, false);\n                        Boolean coarseLocationGranted = result.getOrDefault(android.Manifest.permission.ACCESS_COARSE_LOCATION,false);\n                        if (fineLocationGranted != null &amp;&amp; fineLocationGranted) {\n                            Log.e(&quot;INFO&quot;, &quot;PRECISE LOCATION GRANTED&quot; );\n                        } \n                        else if (coarseLocationGranted != null &amp;&amp; coarseLocationGranted) {\n                            Log.e(&quot;INFO&quot;, &quot;APPROXIMATAE LOCATION GRANTED&quot; );\n                        } \n                        else {\n                            Log.e(&quot;INFO&quot;, &quot;NO LOCATION GRANTED&quot; );\n                        }\n                    }\n            );\n    \n\n}\n</code></pre>\n<p>I have paired my physical device to android studio via WiFi and simulating the app on my Samsung Flip 4.</p>\n<p>Imagine a scenario where I havent previously installed this app on my phone (lets say it is downloaded for the first time), obviously the location permissions will not be given to this app yet. When the app is opened for the first time, I am prompted to enable location sharing as shown in the image below:</p>\n<p><a href=\"https://i.stack.imgur.com/tbWIX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tbWIX.png\" alt=\"enter image description here\" /></a></p>\n<p>After choosing the precise or approximate location, everything seems to be fine. I can go to my Settings-&gt;Location-&gt;App Permissions-&gt;Location_test_v2 (my app name) and I can see that the location permissions are given to the app.</p>\n<p><strong>My question:</strong></p>\n<p>My only concern is how is it possible to give location permission to the app if the location service is Off on my phone. How come it does not matter whether I enable or disable the location service?</p>\n"},{"tags":["java","spring","spring-mvc","scheduled-tasks","scheduler"],"comments":[{"owner":{"account_id":4171037,"reputation":573,"user_id":3418791,"accept_rate":25,"display_name":"Warrior"},"score":3,"creation_date":1495044862,"post_id":44032059,"comment_id":75090727,"body_markdown":"Are you sure the run() method returns?","body":"Are you sure the run() method returns?"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1681572594,"creation_date":1495044942,"answer_id":44032149,"question_id":44032059,"body_markdown":"See this longer [Answer](https://stackoverflow.com/a/24902026/642706) of mine on a similar Question.\r\n\r\n# Wrap `run` code with `try catch`\r\n\r\nJust a guess: An exception is being thrown. A `ScheduledExecutorService` halts silently if it encounters an Exception, with no further scheduled work performed.\r\n\r\nThe `run` method’s code should always be surrounded by a try-catch to handle and absorb any thrown Exception.\r\n\r\nBy the way, the terribly flawed `Date` class has been supplanted by the modern *java.time* classes. Specifically replaced by `Instant`. \r\n\r\n     @Override\r\n     public void run() {\r\n        try {  // Let no Exception reach the ScheduledExecutorService.\r\n            Instant instant = Instant.now() ;\r\n            System.out.println(&quot;Running scheduled update check &quot; + instant );\r\n            updateSubscriberService.checkForUpdates();\r\n        } catch ( Exception e ) {\r\n            System.out.println( &quot;ERROR - unexpected exception&quot; );\r\n        }\r\n    }\r\n\r\n# Stub out `run` method\r\n\r\nTake baby steps. Begin with a `run` method that does nothing but a `System.out.println`.","title":"ScheduledExecutorService only runs once","body":"<p>See this longer <a href=\"https://stackoverflow.com/a/24902026/642706\">Answer</a> of mine on a similar Question.</p>\n<h1>Wrap <code>run</code> code with <code>try catch</code></h1>\n<p>Just a guess: An exception is being thrown. A <code>ScheduledExecutorService</code> halts silently if it encounters an Exception, with no further scheduled work performed.</p>\n<p>The <code>run</code> method’s code should always be surrounded by a try-catch to handle and absorb any thrown Exception.</p>\n<p>By the way, the terribly flawed <code>Date</code> class has been supplanted by the modern <em>java.time</em> classes. Specifically replaced by <code>Instant</code>.</p>\n<pre><code> @Override\n public void run() {\n    try {  // Let no Exception reach the ScheduledExecutorService.\n        Instant instant = Instant.now() ;\n        System.out.println(&quot;Running scheduled update check &quot; + instant );\n        updateSubscriberService.checkForUpdates();\n    } catch ( Exception e ) {\n        System.out.println( &quot;ERROR - unexpected exception&quot; );\n    }\n}\n</code></pre>\n<h1>Stub out <code>run</code> method</h1>\n<p>Take baby steps. Begin with a <code>run</code> method that does nothing but a <code>System.out.println</code>.</p>\n"},{"tags":[],"owner":{"account_id":404833,"reputation":1416,"user_id":773371,"accept_rate":82,"display_name":"gcdev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576164696,"creation_date":1576164696,"answer_id":59308000,"question_id":44032059,"body_markdown":"Just in case you are ever in a position where the code MUST run once every-so-many-seconds even if the last run hasn&#39;t completed yet (which can be very dangerous if not managed properly), you can launch your process inside a different thread inside the timer. Here is sample code.\r\n\r\n    ScheduledExecutorService scheduledExecService = newSingleThreadScheduledExecutor();\r\n    scheduledExecService.scheduleWithFixedDelay(new Runnable()\r\n    {\r\n        @Override\r\n        public void run()\r\n        {\r\n            // This should be in a try-catch because any error here\r\n            // will stop the recurrence\r\n            try\r\n            {\r\n                // The timer will only repeat if the last run is finished. So\r\n                // we put each new process in a different thread than the timer\r\n                // itself, so the last timer call &quot;finishes&quot; as soon as the process\r\n                // leaves the timer&#39;s thread.\r\n                Thread t = new Thread(new Runnable()\r\n                {\r\n                    public void run()\r\n                    {\r\n                        try\r\n                        {\r\n                            android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);\r\n                            MyProcessThatShouldRunEverySoManySecondsNoMatterWhat();\r\n                        }\r\n                        catch (Exception erTimerThread)\r\n                        {\r\n                            Log.e(&quot;Error&quot;, erTimerThread.toString());\r\n                        }\r\n                    }\r\n                });\r\n                t.setPriority(2);\r\n                t.start();\r\n            }\r\n            catch (Exception erTimer)\r\n            {\r\n                Log.e(&quot;Error&quot;, erTimer.toString());\r\n            }\r\n        }\r\n    }, 0, 60, java.util.concurrent.TimeUnit.SECONDS);","title":"ScheduledExecutorService only runs once","body":"<p>Just in case you are ever in a position where the code MUST run once every-so-many-seconds even if the last run hasn't completed yet (which can be very dangerous if not managed properly), you can launch your process inside a different thread inside the timer. Here is sample code.</p>\n\n<pre><code>ScheduledExecutorService scheduledExecService = newSingleThreadScheduledExecutor();\nscheduledExecService.scheduleWithFixedDelay(new Runnable()\n{\n    @Override\n    public void run()\n    {\n        // This should be in a try-catch because any error here\n        // will stop the recurrence\n        try\n        {\n            // The timer will only repeat if the last run is finished. So\n            // we put each new process in a different thread than the timer\n            // itself, so the last timer call \"finishes\" as soon as the process\n            // leaves the timer's thread.\n            Thread t = new Thread(new Runnable()\n            {\n                public void run()\n                {\n                    try\n                    {\n                        android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);\n                        MyProcessThatShouldRunEverySoManySecondsNoMatterWhat();\n                    }\n                    catch (Exception erTimerThread)\n                    {\n                        Log.e(\"Error\", erTimerThread.toString());\n                    }\n                }\n            });\n            t.setPriority(2);\n            t.start();\n        }\n        catch (Exception erTimer)\n        {\n            Log.e(\"Error\", erTimer.toString());\n        }\n    }\n}, 0, 60, java.util.concurrent.TimeUnit.SECONDS);\n</code></pre>\n"}],"owner":{"account_id":8776200,"reputation":1508,"user_id":6561404,"accept_rate":89,"display_name":"MMAdams"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7362,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":44032149,"answer_count":2,"score":11,"last_activity_date":1681572594,"creation_date":1495044632,"question_id":44032059,"body_markdown":"I want a process to run after I start my webservice, and then every 30 minutes or so afterwards, (I&#39;m testing it with a smaller delay for now, just to see if it works), but my process never runs more than once. What am I doing wrong?\r\n\r\nHere is my code:\r\n\r\n    @WebListener\r\n    public class SchedulerService implements ServletContextListener{\r\n\t\r\n\t    @Autowired\r\n\t    UpdateSubscriberService updateSubscriberService;\r\n\t\r\n\t    ScheduledExecutorService scheduledExecService;\r\n\r\n\t\tpublic SchedulerService(){\r\n\t\t\tscheduledExecService = Executors.newSingleThreadScheduledExecutor();\r\n\t\t}\r\n\t\r\n\t    @Override\r\n\t    public void contextDestroyed(ServletContextEvent arg0) {\r\n\t    \tscheduledExecService.shutdown();\r\n\t    }\r\n\r\n    \t@Override\r\n    \tpublic void contextInitialized(ServletContextEvent arg0) {\r\n\t    \tscheduledExecService.scheduleWithFixedDelay(new Runnable(){\r\n\t    \t\t@Override\r\n\t\t    \tpublic void run() {\r\n\t\t\t    \tDate date = new Date(System.currentTimeMillis());\r\n\t\t\t\t    System.out.println(&quot;Running scheduled update check &quot; + date.toString());\r\n\t\t\t\t    updateSubscriberService.checkForUpdates();\r\n\t\t\t    }\r\n\t    \t}, 60, 30, TimeUnit.SECONDS);\r\n\t    }\r\n    }\r\n\r\n","title":"ScheduledExecutorService only runs once","body":"<p>I want a process to run after I start my webservice, and then every 30 minutes or so afterwards, (I'm testing it with a smaller delay for now, just to see if it works), but my process never runs more than once. What am I doing wrong?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>@WebListener\npublic class SchedulerService implements ServletContextListener{\n\n    @Autowired\n    UpdateSubscriberService updateSubscriberService;\n\n    ScheduledExecutorService scheduledExecService;\n\n    public SchedulerService(){\n        scheduledExecService = Executors.newSingleThreadScheduledExecutor();\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent arg0) {\n        scheduledExecService.shutdown();\n    }\n\n    @Override\n    public void contextInitialized(ServletContextEvent arg0) {\n        scheduledExecService.scheduleWithFixedDelay(new Runnable(){\n            @Override\n            public void run() {\n                Date date = new Date(System.currentTimeMillis());\n                System.out.println(\"Running scheduled update check \" + date.toString());\n                updateSubscriberService.checkForUpdates();\n            }\n        }, 60, 30, TimeUnit.SECONDS);\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring","hibernate"],"comments":[{"owner":{"account_id":9150413,"reputation":4837,"user_id":6805190,"display_name":"dassum"},"score":0,"creation_date":1583076365,"post_id":60476521,"comment_id":106987012,"body_markdown":"check 3306 port is open or not? try telnet on 3306 or try to connect to the database using some client.","body":"check 3306 port is open or not? try telnet on 3306 or try to connect to the database using some client."}],"answers":[{"tags":[],"owner":{"account_id":16832467,"reputation":7,"user_id":12170088,"display_name":"Mayank karn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583140334,"creation_date":1583140334,"answer_id":60485603,"question_id":60476521,"body_markdown":"  String url = &quot;jdbc:mysql://localhost:8889/db_name&quot;;\r\n\r\nConnection conn = DriverManager.getConnection(url, dbUsername, dbPassword);","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>String url = \"jdbc:mysql://localhost:8889/db_name\";</p>\n\n<p>Connection conn = DriverManager.getConnection(url, dbUsername, dbPassword);</p>\n"},{"tags":[],"owner":{"account_id":17735444,"reputation":105,"user_id":12876920,"display_name":"discription"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1583161811,"creation_date":1583161811,"answer_id":60491672,"question_id":60476521,"body_markdown":"I was too obsessed with port permits. This was my big mistake. I was missing mysql setup file.\r\n\r\nMysql&#39;s address was tied locally. I annotated this part and solved the problem.\r\n\r\n**/etc/mysql/mysql.conf.d/mysqld.cnf**\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8AE6d.png","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>I was too obsessed with port permits. This was my big mistake. I was missing mysql setup file.</p>\n\n<p>Mysql's address was tied locally. I annotated this part and solved the problem.</p>\n\n<p><strong>/etc/mysql/mysql.conf.d/mysqld.cnf</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/8AE6d.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":9660877,"reputation":11,"user_id":7169004,"display_name":"Mr.Nestorjava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655902027,"creation_date":1655902027,"answer_id":72715809,"question_id":60476521,"body_markdown":"For those having this issue on MAC using XAMPP, the problem is that XAMPP is not listening on port 3306 which is the default port of  mysql.\r\n\r\nTo solve this, simply add and enable this port forwarding on XAMPP\r\n\r\n[Add the port forwarding for mysql as shown][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/R7Zl1.png","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>For those having this issue on MAC using XAMPP, the problem is that XAMPP is not listening on port 3306 which is the default port of  mysql.</p>\n<p>To solve this, simply add and enable this port forwarding on XAMPP</p>\n<p><a href=\"https://i.stack.imgur.com/R7Zl1.png\" rel=\"nofollow noreferrer\">Add the port forwarding for mysql as shown</a></p>\n"},{"tags":[],"owner":{"account_id":22938461,"reputation":538,"user_id":17071589,"display_name":"abdella"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663259076,"creation_date":1663259076,"answer_id":73734550,"question_id":60476521,"body_markdown":"If **host**, **port**, **DB name**, **user** and **password** are correct, but failed to connect check Security group rules in your Db instance inbound is allow every IP address for **AWS RDS** for example looks like as:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xkkbw.png","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>If <strong>host</strong>, <strong>port</strong>, <strong>DB name</strong>, <strong>user</strong> and <strong>password</strong> are correct, but failed to connect check Security group rules in your Db instance inbound is allow every IP address for <strong>AWS RDS</strong> for example looks like as:\n<a href=\"https://i.stack.imgur.com/xkkbw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xkkbw.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":28314182,"reputation":1,"user_id":21651002,"display_name":"Nirodha Sandanuwan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681572432,"creation_date":1681572432,"answer_id":76023187,"question_id":60476521,"body_markdown":"First of all you must need to check your mySql server is running or not . Got to your services and check that .","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>First of all you must need to check your mySql server is running or not . Got to your services and check that .</p>\n"}],"owner":{"account_id":17735444,"reputation":105,"user_id":12876920,"display_name":"discription"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60491672,"answer_count":5,"score":0,"last_activity_date":1681572432,"creation_date":1583075571,"question_id":60476521,"body_markdown":"I used a DB that was already local, but now I want to connect it to a DB that is on a cloud server. However, the connection fails. What&#39;s the problem?\r\n\r\n**application.yml**\r\n\r\n~~~yml\r\nspring:\r\n  datasource:\r\n      drive-class-name: com.mysql.cj.jdbc.Driver\r\n#      url: jdbc:mysql://localhost:3306/sys?serverTimezone=UTC&amp;characterEncoding=UTF-8\r\n      url: jdbc:mysql://00.00.00.00:3306/sys?serverTimezone=UTC&amp;characterEncoding=UTF-8\r\n      username: root\r\n      password: &quot;thispassword&quot;\r\n  jpa:\r\n    database: mysql\r\n    database-platform: org.hibernate.dialect.MySQL5InnoDBDialect\r\n    general-ddl: true\r\n    show-sql: true\r\n    hibernate:\r\n      format_sql: true\r\n      ddl-auto: create\r\n~~~\r\n\r\nThe db server can access the server through ssh.\r\n\r\n**About IP area settings for my cloud DB server**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nMy Error Log\r\n~~~\r\n\r\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:836) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:456) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:197) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:354) ~[HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202) ~[HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:473) [HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:554) [HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) [HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) [HikariCP-3.4.2.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource$$FastClassBySpringCGLIB$$eeb1ae86.invoke(&lt;generated&gt;) [HikariCP-3.4.2.jar:na]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat com.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$d5afa861.getConnection(&lt;generated&gt;) [HikariCP-3.4.2.jar:na]\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:152) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:176) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:118) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1202) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1233) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\r\n\tat com.springboard.backend.Application.main(Application.java:20) ~[main/:na]\r\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_241]\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_241]\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_241]\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_241]\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:91) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.NativeSession.connect(NativeSession.java:144) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:956) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:826) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\t... 60 common frames omitted\r\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\r\n\tat java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_241]\r\n\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_241]\r\n\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_241]\r\n\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_241]\r\n\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_241]\r\n\tat java.net.Socket.connect(Socket.java:606) ~[na:1.8.0_241]\r\n\tat com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:65) ~[mysql-connector-java-8.0.19.jar:8.0.19]\r\n\t... 63 common frames omitted\r\n\r\n2020-03-01 22:02:54.281  WARN 2612 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000342: Could not obtain connection to query metadata : Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n2020-03-01 22:02:54.287  INFO 2612 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect\r\nHibernate: alter table user_role drop foreign key FKj345gk1bovqvfame88rcx7yyx\r\n2020-03-01 22:02:54.698  INFO 2612 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2020-03-01 22:02:55.711 ERROR 2612 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\r\n\r\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n~~~\r\n\r\nAfter I set up the IP of the db server, I added the error information that I saw when I built it.\r\n\r\n&gt; NOTE: The `&#39;00.00.00.00&#39;` in my question is not the address I entered.\r\n&gt; I did not enter the question because it is my private authorized IP.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sVykw.png","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure in JPA project","body":"<p>I used a DB that was already local, but now I want to connect it to a DB that is on a cloud server. However, the connection fails. What's the problem?</p>\n\n<p><strong>application.yml</strong></p>\n\n<pre><code>spring:\n  datasource:\n      drive-class-name: com.mysql.cj.jdbc.Driver\n#      url: jdbc:mysql://localhost:3306/sys?serverTimezone=UTC&amp;characterEncoding=UTF-8\n      url: jdbc:mysql://00.00.00.00:3306/sys?serverTimezone=UTC&amp;characterEncoding=UTF-8\n      username: root\n      password: \"thispassword\"\n  jpa:\n    database: mysql\n    database-platform: org.hibernate.dialect.MySQL5InnoDBDialect\n    general-ddl: true\n    show-sql: true\n    hibernate:\n      format_sql: true\n      ddl-auto: create\n</code></pre>\n\n<p>The db server can access the server through ssh.</p>\n\n<p><strong>About IP area settings for my cloud DB server</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/sVykw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sVykw.png\" alt=\"enter image description here\"></a></p>\n\n<p>My Error Log</p>\n\n<pre><code>\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:836) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:456) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:197) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:354) ~[HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202) ~[HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:473) [HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:554) [HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) [HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) [HikariCP-3.4.2.jar:na]\n    at com.zaxxer.hikari.HikariDataSource$$FastClassBySpringCGLIB$$eeb1ae86.invoke(&lt;generated&gt;) [HikariCP-3.4.2.jar:na]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689) [spring-aop-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at com.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$d5afa861.getConnection(&lt;generated&gt;) [HikariCP-3.4.2.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:152) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:176) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:118) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1202) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1233) [hibernate-core-5.4.12.Final.jar:5.4.12.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) [spring-orm-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) [spring-beans-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550) ~[spring-context-5.2.3.RELEASE.jar:5.2.3.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) ~[spring-boot-2.2.4.RELEASE.jar:2.2.4.RELEASE]\n    at com.springboard.backend.Application.main(Application.java:20) ~[main/:na]\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_241]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_241]\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_241]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_241]\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:91) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.NativeSession.connect(NativeSession.java:144) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:956) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:826) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    ... 60 common frames omitted\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\n    at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_241]\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_241]\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_241]\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_241]\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_241]\n    at java.net.Socket.connect(Socket.java:606) ~[na:1.8.0_241]\n    at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:65) ~[mysql-connector-java-8.0.19.jar:8.0.19]\n    ... 63 common frames omitted\n\n2020-03-01 22:02:54.281  WARN 2612 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000342: Could not obtain connection to query metadata : Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n2020-03-01 22:02:54.287  INFO 2612 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect\nHibernate: alter table user_role drop foreign key FKj345gk1bovqvfame88rcx7yyx\n2020-03-01 22:02:54.698  INFO 2612 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2020-03-01 22:02:55.711 ERROR 2612 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\n\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n</code></pre>\n\n<p>After I set up the IP of the db server, I added the error information that I saw when I built it.</p>\n\n<blockquote>\n  <p>NOTE: The <code>'00.00.00.00'</code> in my question is not the address I entered.\n  I did not enter the question because it is my private authorized IP.</p>\n</blockquote>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3471610,"reputation":15218,"user_id":2905768,"accept_rate":80,"display_name":"PMF"},"score":3,"creation_date":1681570329,"post_id":76022968,"comment_id":134079461,"body_markdown":"Please post the exact error message you get.","body":"Please post the exact error message you get."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1681570340,"post_id":76022968,"comment_id":134079463,"body_markdown":"&quot;*doesn&#39;t compile*&quot; like there is an error, or what? If you got an error, please include the error message in question - helpful information (most often)","body":"&quot;<i>doesn&#39;t compile</i>&quot; like there is an error, or what? If you got an error, please include the error message in question - helpful information (most often)"},{"owner":{"account_id":261035,"reputation":6348,"user_id":544963,"accept_rate":100,"display_name":"fireshadow52"},"score":0,"creation_date":1681570614,"post_id":76022968,"comment_id":134079496,"body_markdown":"Looks like you&#39;re trying to instantiate a `ValueWriter`, which you can&#39;t do because it&#39;s an interface, not a class.","body":"Looks like you&#39;re trying to instantiate a <code>ValueWriter</code>, which you can&#39;t do because it&#39;s an interface, not a class."},{"owner":{"account_id":6014302,"reputation":75,"user_id":4723717,"display_name":"Tanse"},"score":0,"creation_date":1681570862,"post_id":76022968,"comment_id":134079531,"body_markdown":"Edited to add the exact error message","body":"Edited to add the exact error message"},{"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"score":0,"creation_date":1681571871,"post_id":76022968,"comment_id":134079688,"body_markdown":"Your type says the writer need only accept some unknown subtype of `Value`, so how do you know that the value you&#39;re giving it is of the subtype it accepts? If you want a `ValueWriter` to accept any type of `Value`, then there is no need for it to be generic.","body":"Your type says the writer need only accept some unknown subtype of <code>Value</code>, so how do you know that the value you&#39;re giving it is of the subtype it accepts? If you want a <code>ValueWriter</code> to accept any type of <code>Value</code>, then there is no need for it to be generic."},{"owner":{"account_id":6014302,"reputation":75,"user_id":4723717,"display_name":"Tanse"},"score":0,"creation_date":1681571973,"post_id":76022968,"comment_id":134079704,"body_markdown":"@kaya3 - What I&#39;m passing is by definition a subtype of `Value`, shouldn&#39;t that be enough?","body":"@kaya3 - What I&#39;m passing is by definition a subtype of <code>Value</code>, shouldn&#39;t that be enough?"},{"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"score":0,"creation_date":1681572109,"post_id":76022968,"comment_id":134079726,"body_markdown":"A cat is a kind of animal and so is a dog. A `ValueWriter&lt;Dog&gt;` need not accept anything that isn&#39;t a dog. So what happens when you try to give it a cat?","body":"A cat is a kind of animal and so is a dog. A <code>ValueWriter&lt;Dog&gt;</code> need not accept anything that isn&#39;t a dog. So what happens when you try to give it a cat?"}],"answers":[{"tags":[],"owner":{"account_id":17823878,"reputation":1064,"user_id":12945569,"display_name":"Fr&#233;d&#233;ric LOYER"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1681572204,"creation_date":1681572204,"answer_id":76023176,"question_id":76022968,"body_markdown":"When you write:\r\n\r\n```java\r\nValueWriter&lt;? extends Value&gt; valueWriter = writer.getValue();\r\n```\r\n\r\n`valueWriter` may be a type `ValueWriter&lt;A&gt;` where `A` extends `Value`.\r\n\r\nThen `valueWriter.write` expect something of type `A`... and you give `v` of type `Value`. The compiler can&#39;t assure `v` is a type `A` (depending of the actual `valueWriter` type).\r\n\r\nYou should rewrite the program using something like:\r\n\r\n```java\r\nValueWriter&lt;A&gt; valueWriter = writer.getValue();\r\n```\r\n\r\nWhere `A` extends `Value`, and set `A`as the type of `v`. `A` should be introduced somewhere by the program.\r\n","title":"Why does my use of Java generics extends not work?","body":"<p>When you write:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ValueWriter&lt;? extends Value&gt; valueWriter = writer.getValue();\n</code></pre>\n<p><code>valueWriter</code> may be a type <code>ValueWriter&lt;A&gt;</code> where <code>A</code> extends <code>Value</code>.</p>\n<p>Then <code>valueWriter.write</code> expect something of type <code>A</code>... and you give <code>v</code> of type <code>Value</code>. The compiler can't assure <code>v</code> is a type <code>A</code> (depending of the actual <code>valueWriter</code> type).</p>\n<p>You should rewrite the program using something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ValueWriter&lt;A&gt; valueWriter = writer.getValue();\n</code></pre>\n<p>Where <code>A</code> extends <code>Value</code>, and set <code>A</code>as the type of <code>v</code>. <code>A</code> should be introduced somewhere by the program.</p>\n"}],"owner":{"account_id":6014302,"reputation":75,"user_id":4723717,"display_name":"Tanse"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76023176,"answer_count":1,"score":0,"last_activity_date":1681572204,"creation_date":1681570125,"question_id":76022968,"body_markdown":"This code doesn&#39;t compile and I have a hard time understanding why:\r\n```\r\nprivate final Map&lt;String, ValueWriter&lt;? extends Value&gt;&gt; valueWriters = new HashMap&lt;&gt;();\r\n\r\npublic void write(CompositeValue value) throws IOException {\r\n    for (Entry&lt;String, ValueWriter&lt;? extends Value&gt;&gt; writer : valueWriters.entrySet()) {\r\n        Value v = value.getValue().get(writer.getKey());\r\n        ValueWriter&lt;? extends Value&gt; valueWriter = writer.getValue();\r\n        valueWriter.write(v);\r\n    }\r\n}\r\n```\r\n\r\nThis gives me the following compilation error at `valueWriter.write(v)`: \r\n```\r\nincompatible types: Value cannot be converted to capture#1 of ? extends Value\r\n```\r\n\r\nWhere ValueWriter is implemented as follows:\r\n\r\n```\r\npublic interface ValueWriter&lt;T extends Value&gt; {\r\n    void write(T value) throws IOException;\r\n    void delete(Key key) throws IOException;\r\n}\r\n```\r\n\r\nBasically, I would expect `valueWriter` to accept any class implementing the interface Value. Why doesn&#39;t this work, and how can I implement it so that it does?\r\n\r\n\r\nMinimal reproducible example:\r\n\r\n```\r\npublic class Main {\r\n    private ValueWriter&lt;? extends Value&gt; writer;\r\n\r\n    public void write(Value v) {\r\n        writer.write(v);\r\n    }\r\n    \r\n    interface Value {\r\n        \r\n    }\r\n    interface ValueWriter&lt;T extends Value&gt; {\r\n        void write(T v);\r\n    }\r\n}\r\n```","title":"Why does my use of Java generics extends not work?","body":"<p>This code doesn't compile and I have a hard time understanding why:</p>\n<pre><code>private final Map&lt;String, ValueWriter&lt;? extends Value&gt;&gt; valueWriters = new HashMap&lt;&gt;();\n\npublic void write(CompositeValue value) throws IOException {\n    for (Entry&lt;String, ValueWriter&lt;? extends Value&gt;&gt; writer : valueWriters.entrySet()) {\n        Value v = value.getValue().get(writer.getKey());\n        ValueWriter&lt;? extends Value&gt; valueWriter = writer.getValue();\n        valueWriter.write(v);\n    }\n}\n</code></pre>\n<p>This gives me the following compilation error at <code>valueWriter.write(v)</code>:</p>\n<pre><code>incompatible types: Value cannot be converted to capture#1 of ? extends Value\n</code></pre>\n<p>Where ValueWriter is implemented as follows:</p>\n<pre><code>public interface ValueWriter&lt;T extends Value&gt; {\n    void write(T value) throws IOException;\n    void delete(Key key) throws IOException;\n}\n</code></pre>\n<p>Basically, I would expect <code>valueWriter</code> to accept any class implementing the interface Value. Why doesn't this work, and how can I implement it so that it does?</p>\n<p>Minimal reproducible example:</p>\n<pre><code>public class Main {\n    private ValueWriter&lt;? extends Value&gt; writer;\n\n    public void write(Value v) {\n        writer.write(v);\n    }\n    \n    interface Value {\n        \n    }\n    interface ValueWriter&lt;T extends Value&gt; {\n        void write(T v);\n    }\n}\n</code></pre>\n"},{"tags":["python","java","algorithm","jwt"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1681539249,"post_id":76020607,"comment_id":134075929,"body_markdown":"`secret = &#39;abcdefghijklmnopqrstuvwxyz&#39;;` isn&#39;t valid Java.","body":"<code>secret = &#39;abcdefghijklmnopqrstuvwxyz&#39;;</code> isn&#39;t valid Java."},{"owner":{"account_id":9658840,"reputation":4274,"user_id":7167572,"accept_rate":100,"display_name":"Tatranskymedved"},"score":0,"creation_date":1681541874,"post_id":76020607,"comment_id":134076143,"body_markdown":"There are some more details at this [web about JSON web tokens in python](https://elc.github.io/python-security/chapters/10_JSON_Web_Tokens.html). However, my best shot would be that the encoding for those characters would be different in Python/Java, thus generating different results. I&#39;m not native to either language, so idk exactly how they behave.","body":"There are some more details at this <a href=\"https://elc.github.io/python-security/chapters/10_JSON_Web_Tokens.html\" rel=\"nofollow noreferrer\">web about JSON web tokens in python</a>. However, my best shot would be that the encoding for those characters would be different in Python/Java, thus generating different results. I&#39;m not native to either language, so idk exactly how they behave."},{"owner":{"account_id":27963662,"reputation":71,"user_id":21354950,"display_name":"takaki"},"score":0,"creation_date":1681568437,"post_id":76020607,"comment_id":134079212,"body_markdown":"Thank you for your answer, yes i see what you mean, i just wanted to express that the result is different when the key is the same.","body":"Thank you for your answer, yes i see what you mean, i just wanted to express that the result is different when the key is the same."}],"answers":[{"tags":[],"owner":{"account_id":5209321,"reputation":116,"user_id":4166251,"display_name":"Stanimir Stamenkov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681571204,"creation_date":1681545558,"answer_id":76021020,"question_id":76020607,"body_markdown":"Reading the API docs:\r\n\r\n-    [`jwt.encode(payload, key, algorithm=&quot;HS256&quot;, headers=None, json_encoder=None)`](https://pyjwt.readthedocs.io/en/stable/api.html?highlight=jwt#jwt.encode) (Python)\r\n-    [`JwtBuilder.signWith(SignatureAlgorithm alg, String base64EncodedSecretKey)`](https://javadoc.io/static/io.jsonwebtoken/jjwt-api/0.11.5/io/jsonwebtoken/JwtBuilder.html#signWith(io.jsonwebtoken.SignatureAlgorithm,%20java.lang.String)) (Java)\r\n\r\nI&#39;m speculating you need to be using:\r\n\r\n-   [`JwtBuilder.signWith(SignatureAlgorithm alg, byte[] secretKey)`](https://javadoc.io/static/io.jsonwebtoken/jjwt-api/0.11.5/io/jsonwebtoken/JwtBuilder.html#signWith(io.jsonwebtoken.SignatureAlgorithm,%20byte[])) (Java)\r\n\r\n```java\r\n    String secret = &quot;...&quot;; // The same as with Python\r\n    ...\r\n    String jwttoken = Jwts.builder()\r\n            ...\r\n            .signWith(SignatureAlgorithm.HS512, secret.getBytes())\r\n            .compact();\r\n```\r\n\r\nAlternatively, if your Java result is already as intended, you might need to change the Python code like:\r\n\r\n```python\r\nimport base64\r\n...\r\nencoded_jwt = jwt.encode(payload, base64.b64decode(secret), algorithm=&#39;HS512&#39;, headers=headers)\r\n```\r\n\r\n_Disclaimer:_ I don&#39;t have any Python experience.","title":"why Java code and Python code generate different signature of encode_jwt","body":"<p>Reading the API docs:</p>\n<ul>\n<li><a href=\"https://pyjwt.readthedocs.io/en/stable/api.html?highlight=jwt#jwt.encode\" rel=\"nofollow noreferrer\"><code>jwt.encode(payload, key, algorithm=&quot;HS256&quot;, headers=None, json_encoder=None)</code></a> (Python)</li>\n<li><a href=\"https://javadoc.io/static/io.jsonwebtoken/jjwt-api/0.11.5/io/jsonwebtoken/JwtBuilder.html#signWith(io.jsonwebtoken.SignatureAlgorithm,%20java.lang.String)\" rel=\"nofollow noreferrer\"><code>JwtBuilder.signWith(SignatureAlgorithm alg, String base64EncodedSecretKey)</code></a> (Java)</li>\n</ul>\n<p>I'm speculating you need to be using:</p>\n<ul>\n<li><a href=\"https://javadoc.io/static/io.jsonwebtoken/jjwt-api/0.11.5/io/jsonwebtoken/JwtBuilder.html#signWith(io.jsonwebtoken.SignatureAlgorithm,%20byte%5B%5D)\" rel=\"nofollow noreferrer\"><code>JwtBuilder.signWith(SignatureAlgorithm alg, byte[] secretKey)</code></a> (Java)</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>    String secret = &quot;...&quot;; // The same as with Python\n    ...\n    String jwttoken = Jwts.builder()\n            ...\n            .signWith(SignatureAlgorithm.HS512, secret.getBytes())\n            .compact();\n</code></pre>\n<p>Alternatively, if your Java result is already as intended, you might need to change the Python code like:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import base64\n...\nencoded_jwt = jwt.encode(payload, base64.b64decode(secret), algorithm='HS512', headers=headers)\n</code></pre>\n<p><em>Disclaimer:</em> I don't have any Python experience.</p>\n"}],"owner":{"account_id":27963662,"reputation":71,"user_id":21354950,"display_name":"takaki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1681571204,"creation_date":1681538078,"question_id":76020607,"body_markdown":"#1. python code:\r\n```\r\npayload = {&quot;login_user_key&quot;: &quot;b7c5443c-5395-46b0-b6c1-d940fd686880&quot;}\r\nsecret = &#39;abcdefghijklmnopqrstuvwxyz&#39;\r\nheaders = {&quot;alg&quot;: &quot;HS512&quot;, &quot;typ&quot;: &quot;JWT&quot;}\r\nencoded_jwt = jwt.encode(payload, secret, algorithm=&#39;HS512&#39;, headers=headers)\r\nprint(encoded_jwt)\r\n```\r\n#result:eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJsb2dpbl91c2VyX2tleSI6ImI3YzU0NDNjLTUzOTUtNDZiMC1iNmMxLWQ5NDBmZDY4Njg4MCJ9.fmhdCmM4BJBOASK_UXtRoszP0Q614mDlQ3iDU9_ZFCr--jh--OHG8o5aCG4Zgpcpmsry9NH1LY-4Bd_NN0mmQQ\r\n\r\n\r\n//2. java code:\r\n```\r\n        String secret = &quot;abcdefghijklmnopqrstuvwxyz&quot;;\r\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n        claims.put(&quot;login_user_key&quot;, &quot;b7c5443c-5395-46b0-b6c1-d940fd686880&quot;);\r\n        String jwttoken = Jwts.builder()\r\n                .setHeaderParam(&quot;alg&quot;, &quot;HS512&quot;)\r\n                .setHeaderParam(&quot;typ&quot;, &quot;JWT&quot;)\r\n                .setClaims(claims)\r\n                .signWith(SignatureAlgorithm.HS512, secret).compact();\r\n        System.out.println(jwttoken);\r\n```\r\n//result:eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJsb2dpbl91c2VyX2tleSI6ImI3YzU0NDNjLTUzOTUtNDZiMC1iNmMxLWQ5NDBmZDY4Njg4MCJ9.Gat6BTTXtwC_XWN4pZjqC-x4Bw24xfpNXmLIMSysa3FJaPvpnXcjO0wp6FBlKtrfYyqZRQARQbE4rGwhAOY_eg\r\n\r\n\r\nplease tell me that Java code and Python code generate different signature of encode_jwt ,and modify the python code to make the final generated jwt the same. please....\r\n\r\n\r\nI tried to use chatgpt to give an answer, but it didn&#39;t work, it may not be a problem with key encoding, maybe a problem with json data or string data?","title":"why Java code and Python code generate different signature of encode_jwt","body":"<p>#1. python code:</p>\n<pre><code>payload = {&quot;login_user_key&quot;: &quot;b7c5443c-5395-46b0-b6c1-d940fd686880&quot;}\nsecret = 'abcdefghijklmnopqrstuvwxyz'\nheaders = {&quot;alg&quot;: &quot;HS512&quot;, &quot;typ&quot;: &quot;JWT&quot;}\nencoded_jwt = jwt.encode(payload, secret, algorithm='HS512', headers=headers)\nprint(encoded_jwt)\n</code></pre>\n<p>#result:eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJsb2dpbl91c2VyX2tleSI6ImI3YzU0NDNjLTUzOTUtNDZiMC1iNmMxLWQ5NDBmZDY4Njg4MCJ9.fmhdCmM4BJBOASK_UXtRoszP0Q614mDlQ3iDU9_ZFCr--jh--OHG8o5aCG4Zgpcpmsry9NH1LY-4Bd_NN0mmQQ</p>\n<p>//2. java code:</p>\n<pre><code>        String secret = &quot;abcdefghijklmnopqrstuvwxyz&quot;;\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        claims.put(&quot;login_user_key&quot;, &quot;b7c5443c-5395-46b0-b6c1-d940fd686880&quot;);\n        String jwttoken = Jwts.builder()\n                .setHeaderParam(&quot;alg&quot;, &quot;HS512&quot;)\n                .setHeaderParam(&quot;typ&quot;, &quot;JWT&quot;)\n                .setClaims(claims)\n                .signWith(SignatureAlgorithm.HS512, secret).compact();\n        System.out.println(jwttoken);\n</code></pre>\n<p>//result:eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJsb2dpbl91c2VyX2tleSI6ImI3YzU0NDNjLTUzOTUtNDZiMC1iNmMxLWQ5NDBmZDY4Njg4MCJ9.Gat6BTTXtwC_XWN4pZjqC-x4Bw24xfpNXmLIMSysa3FJaPvpnXcjO0wp6FBlKtrfYyqZRQARQbE4rGwhAOY_eg</p>\n<p>please tell me that Java code and Python code generate different signature of encode_jwt ,and modify the python code to make the final generated jwt the same. please....</p>\n<p>I tried to use chatgpt to give an answer, but it didn't work, it may not be a problem with key encoding, maybe a problem with json data or string data?</p>\n"},{"tags":["java","itext"],"owner":{"account_id":8760132,"reputation":11,"user_id":6550288,"accept_rate":0,"display_name":"Nitin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":317,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681571138,"creation_date":1681276493,"question_id":75992104,"body_markdown":"Below is Java code, where I try to convert a HTML file into PDF using Java with iText.\r\n\r\n```java\r\npublic static void generatePDFTestThree() {\r\n\ttry {\r\n\t\t String dirPath=&quot;F:\\\\Nitin\\\\ppi\\\\GPR\\\\form_pdf&quot;;\r\n        //Setting destination \r\n        FileInputStream fileInputStream = new FileInputStream(new File(dirPath+&quot;/PagePdf.html&quot;));\r\n        FileOutputStream fileOutputStream = new FileOutputStream(new File(dirPath + &quot;/PageHtmlToPdf.pdf&quot;));\r\n        \r\n        PdfWriter pdfWriter = new PdfWriter(fileOutputStream);\r\n        ConverterProperties converterProperties = new ConverterProperties();\r\n        converterProperties.setLimitOfLayouts(4);\r\n        PdfDocument pdfDocument = new PdfDocument(pdfWriter);\r\n        converterProperties.setBaseUri(&quot;src/resources/images&quot;);\r\n        //For setting the PAGE SIZE\r\n        pdfDocument.setDefaultPageSize(new PageSize(PageSize.LETTER));\r\n        \r\n        Document document = HtmlConverter.convertToDocument(fileInputStream, pdfDocument, converterProperties);\r\n        document.close();\r\n    } \r\n    catch (Exception e) {\r\n         e.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\nBelow is my HTML file which I try to convert to PDF.\r\n\r\n```html\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;utf-8&quot;/&gt;\r\n&lt;meta name=&quot;generator&quot; content=&quot;pdf2htmlEX&quot;/&gt;\r\n&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;/&gt;\r\n&lt;style type=&quot;text/css&quot;&gt;\r\n#sidebar{position:absolute;top:0;left:0;bottom:0;width:250px;padding:0;margin:0;overflow:auto}#page-container{position:absolute;top:0;left:0;margin:0;padding:0;border:0}@media screen{#sidebar.opened+#page-container{left:250px}#page-container{bottom:0;right:0;overflow:auto}.loading-indicator{display:none}.loading-indicator.active{display:block;position:absolute;width:64px;height:64px;top:50%;left:50%;margin-top:-32px;margin-left:-32px}.loading-indicator img{position:absolute;top:0;left:0;bottom:0;right:0}}@media print{@page{margin:0}html{margin:0}body{text-align:left;margin:0;-webkit-print-color-adjust:exact}#sidebar{display:none}#page-container{width:auto;height:auto;overflow:visible;background-color:transparent}.d{display:none}}.pf{position:relative;background-color:white;overflow:hidden;margin:0;border:0}.pc{position:absolute;border:0;padding:0;margin:0;top:0;left:0;width:100%;height:100%;overflow:hidden;display:block;transform-origin:0 0;-ms-transform-origin:0 0;-webkit-transform-origin:0 0}.pc.opened{display:block}.bf{position:absolute;border:0;margin:0;top:0;bottom:0;width:100%;height:100%;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none}.bi{position:absolute;border:0;margin:0;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none}@media print{.pf{margin:0;box-shadow:none;page-break-after:always;page-break-inside:avoid}#fff}.pc{overflow:visible}}}.c{position:absolute;border:0;padding:0;margin:0;overflow:hidden;display:block}.t{position:absolute;white-space:pre;font-size:1px;transform-origin:0 100%;-ms-transform-origin:0 100%;-webkit-transform-origin:0 100%;unicode-bidi:bidi-override;-moz-font-feature-settings:&quot;liga&quot; 0}.t:after{content:&#39;&#39;}.t:before{content:&#39;&#39;}.t span{position:relative;unicode-bidi:bidi-override}._{color:transparent;z-index:-1}::selection{background:rgba(127,255,255,0.4)}::-moz-selection{background:rgba(127,255,255,0.4)}.pi{display:none}.d{position:absolute;transform-origin:0 100%;-ms-transform-origin:0 100%;-webkit-transform-origin:0 100%}.it{border:0;background-color:rgba(255,255,255,0.0)}.ir:hover{cursor:pointer}&lt;/style&gt;\r\n&lt;style type=&quot;text/css&quot;&gt;\r\n/*! \r\n * Fancy styles for pdf2htmlEX\r\n * Copyright 2012,2013 Lu Wang &lt;coolwanglu@gmail.com&gt; \r\n * https://github.com/pdf2htmlEX/pdf2htmlEX/blob/master/share/LICENSE\r\n */@media screen{#sidebar{background-color:#2f3236;background-image:url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjNDAzYzNmIj48L3JlY3Q+CjxwYXRoIGQ9Ik0wIDBMNCA0Wk00IDBMMCA0WiIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2U9IiMxZTI5MmQiPjwvcGF0aD4KPC9zdmc+&quot;)}#outline{font-family:Georgia,Times,&quot;Times New Roman&quot;,serif;font-size:13px;margin:2em 1em}#outline ul{padding:0}#outline li{list-style-type:none;margin:1em 0}#outline li&gt;ul{margin-left:1em}#outline a,#outline a:visited,#outline a:hover,#outline a:active{line-height:1.2;color:#e8e8e8;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;display:block;overflow:hidden;outline:0}#outline a:hover{color:#0cf}#page-container{background-color:#9e9e9e;background-image:url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjOWU5ZTllIj48L3JlY3Q+CjxwYXRoIGQ9Ik0wIDVMNSAwWk02IDRMNCA2Wk0tMSAxTDEgLTFaIiBzdHJva2U9IiM4ODgiIHN0cm9rZS13aWR0aD0iMSI+PC9wYXRoPgo8L3N2Zz4=&quot;);-webkit-transition:left 500ms;transition:left 500ms}.pf{margin:13px auto;box-shadow:1px 1px 3px 1px #333;border-collapse:separate}.pc.opened{-webkit-animation:fadein 100ms;animation:fadein 100ms}.loading-indicator.active{-webkit-animation:swing 1.5s ease-in-out .01s infinite alternate none;animation:swing 1.5s ease-in-out .01s infinite alternate none}.checked{background:no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3goQDSYgDiGofgAAAslJREFUOMvtlM9LFGEYx7/vvOPM6ywuuyPFihWFBUsdNnA6KLIh+QPx4KWExULdHQ/9A9EfUodYmATDYg/iRewQzklFWxcEBcGgEplDkDtI6sw4PzrIbrOuedBb9MALD7zv+3m+z4/3Bf7bZS2bzQIAcrmcMDExcTeXy10DAFVVAQDksgFUVZ1ljD3yfd+0LOuFpmnvVVW9GHhkZAQcxwkNDQ2FSCQyRMgJxnVdy7KstKZpn7nwha6urqqfTqfPBAJAuVymlNLXoigOhfd5nmeiKL5TVTV+lmIKwAOA7u5u6Lped2BsbOwjY6yf4zgQQkAIAcedaPR9H67r3uYBQFEUFItFtLe332lpaVkUBOHK3t5eRtf1DwAwODiIubk5DA8PM8bYW1EU+wEgCIJqsCAIQAiB7/u253k2BQDDMJBKpa4mEon5eDx+UxAESJL0uK2t7XosFlvSdf0QAEmlUnlRFJ9Waho2Qghc1/U9z3uWz+eX+Wr+lL6SZfleEAQIggA8z6OpqSknimIvYyybSCReMsZ6TislhCAIAti2Dc/zejVNWwCAavN8339j27YbTg0AGGM3WltbP4WhlRWq6Q/btrs1TVsYHx+vNgqKoqBUKn2NRqPFxsbGJzzP05puUlpt0ukyOI6z7zjOwNTU1OLo6CgmJyf/gA3DgKIoWF1d/cIY24/FYgOU0pp0z/Ityzo8Pj5OTk9PbwHA+vp6zWghDC+VSiuRSOQgGo32UErJ38CO42wdHR09LBQK3zKZDDY2NupmFmF4R0cHVlZWlmRZ/iVJUn9FeWWcCCE4ODjYtG27Z2Zm5juAOmgdGAB2d3cBADs7O8uSJN2SZfl+WKlpmpumaT6Yn58vn/fs6XmbhmHMNjc3tzDGFI7jYJrm5vb29sDa2trPC/9aiqJUy5pOp4f6+vqeJ5PJBAB0dnZe/t8NBajx/z37Df5OGX8d13xzAAAAAElFTkSuQmCC)}}&lt;/style&gt;\r\n&lt;style type=&quot;text/css&quot;&gt;\r\n.ff0{font-family:sans-serif;visibility:hidden;}\r\n.ff3{font-family:ff3;line-height:1.037000;font-style:normal;font-weight:normal;visibility:visible;}\r\n.m1{transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);-ms-transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);-webkit-transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);}\r\n.m0{transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);-ms-transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);-webkit-transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);}\r\n.v0{vertical-align:0.000000px;}\r\n.ls2{letter-spacing:0.000000px;}\r\n.ls1{letter-spacing:0.144000px;}\r\n.ls0{letter-spacing:0.376320px;}\r\n.sc_{text-shadow:none;}\r\n.sc1{text-shadow:-0.015em 0 transparent,0 0.015em transparent,0.015em 0 transparent,0 -0.015em  transparent;}\r\n.sc0{text-shadow:-0.015em 0 rgb(36,63,144),0 0.015em rgb(36,63,144),0.015em 0 rgb(36,63,144),0 -0.015em  rgb(36,63,144);}\r\n@media screen and (-webkit-min-device-pixel-ratio:0){\r\n.sc_{-webkit-text-stroke:0px transparent;}\r\n.sc1{-webkit-text-stroke:0.015em transparent;text-shadow:none;}\r\n.sc0{-webkit-text-stroke:0.015em rgb(36,63,144);text-shadow:none;}\r\n}\r\n.ws1{word-spacing:-9.600000px;}\r\n.ws0{word-spacing:-7.968000px;}\r\n.ws2{word-spacing:0.000000px;}\r\n._b{margin-left:-6.208000px;}\r\n._8{margin-left:-4.408000px;}\r\n._3{margin-left:-1.067040px;}\r\n._7{width:1.160000px;}\r\n._c{width:21.224000px;}\r\n._4{width:23.032000px;}\r\n._e{width:32.640000px;}\r\n._9{width:35.432000px;}\r\n._f{width:41.816000px;}\r\n._d{width:47.416000px;}\r\n._11{width:49.784000px;}\r\n._10{width:61.376000px;}\r\n._12{width:104.600000px;}\r\n._6{width:110.936000px;}\r\n._a{width:127.184000px;}\r\n._5{width:134.400000px;}\r\n._0{width:514.392000px;}\r\n._1{width:751.592000px;}\r\n._2{width:1934.320000px;}\r\n.fc3{color:transparent;}\r\n.fc2{color:rgb(30,30,30);}\r\n.fc1{color:rgb(0,0,0);}\r\n.fc0{color:rgb(36,63,144);}\r\n.fs4{font-size:20.160000px;}\r\n.fs1{font-size:32.160000px;}\r\n.fs5{font-size:33.899278px;}\r\n.fs0{font-size:39.840000px;}\r\n.fs2{font-size:48.000000px;}\r\n.fs3{font-size:56.160000px;}\r\n.y0{bottom:-0.500000px;}\r\n.y1{bottom:0.000000px;}\r\n.y4{bottom:40.320000px;}\r\n.y24{bottom:52.320000px;}\r\n.y22{bottom:80.280000px;}\r\n.y21{bottom:104.900000px;}\r\n.y20{bottom:129.500000px;}\r\n.y1f{bottom:154.100000px;}\r\n.y1e{bottom:175.460000px;}\r\n.y1d{bottom:193.100000px;}\r\n.y1c{bottom:214.460000px;}\r\n.y1b{bottom:235.100000px;}\r\n.y1a{bottom:259.700000px;}\r\n.y19{bottom:284.330000px;}\r\n.y18{bottom:308.930000px;}\r\n.y17{bottom:333.530000px;}\r\n.y16{bottom:358.130000px;}\r\n.y15{bottom:382.730000px;}\r\n.y14{bottom:407.330000px;}\r\n.y13{bottom:431.950000px;}\r\n.y12{bottom:456.550000px;}\r\n.y11{bottom:481.150000px;}\r\n.y10{bottom:505.750000px;}\r\n.yf{bottom:530.350000px;}\r\n.ye{bottom:554.950000px;}\r\n.yd{bottom:579.550000px;}\r\n.y23{bottom:595.180000px;}\r\n.yc{bottom:604.180000px;}\r\n.yb{bottom:628.780000px;}\r\n.ya{bottom:653.380000px;}\r\n.y9{bottom:677.980000px;}\r\n.y8{bottom:702.580000px;}\r\n.y7{bottom:721.540000px;}\r\n.y6{bottom:733.420000px;}\r\n.y5{bottom:752.860000px;}\r\n.y3{bottom:773.400000px;}\r\n.y2{bottom:783.480000px;}\r\n.h7{height:16.894080px;}\r\n.h3{height:27.432480px;}\r\n.h8{height:29.390674px;}\r\n.h2{height:33.983520px;}\r\n.h6{height:40.224000px;}\r\n.h4{height:41.616000px;}\r\n.h5{height:47.062080px;}\r\n.h9{height:112.800000px;}\r\n.h0{height:841.920000px;}\r\n.h1{height:842.500000px;}\r\n.w3{width:120.020000px;}\r\n.w2{width:595.319991px;}\r\n.w0{width:595.320000px;}\r\n.w1{width:596.000000px;}\r\n.x0{left:0.000000px;}\r\n.x5{left:17.760000px;}\r\n.x2{left:53.999991px;}\r\n.x1{left:157.459991px;}\r\n.x3{left:212.209991px;}\r\n.x4{left:435.100000px;}\r\n@media print{\r\n.v0{vertical-align:0.000000pt;}\r\n.ls2{letter-spacing:0.000000pt;}\r\n.ls1{letter-spacing:0.192000pt;}\r\n.ls0{letter-spacing:0.501760pt;}\r\n.ws1{word-spacing:-12.800000pt;}\r\n.ws0{word-spacing:-10.624000pt;}\r\n.ws2{word-spacing:0.000000pt;}\r\n._b{margin-left:-8.277333pt;}\r\n._8{margin-left:-5.877333pt;}\r\n._3{margin-left:-1.422720pt;}\r\n._7{width:1.546667pt;}\r\n._c{width:28.298667pt;}\r\n._4{width:30.709333pt;}\r\n._e{width:43.520000pt;}\r\n._9{width:47.242667pt;}\r\n._f{width:55.754667pt;}\r\n._d{width:63.221333pt;}\r\n._11{width:66.378667pt;}\r\n._10{width:81.834667pt;}\r\n._12{width:139.466667pt;}\r\n._6{width:147.914667pt;}\r\n._a{width:169.578667pt;}\r\n._5{width:179.200000pt;}\r\n._0{width:685.856000pt;}\r\n._1{width:1002.122667pt;}\r\n._2{width:2579.093333pt;}\r\n.fs4{font-size:26.880000pt;}\r\n.fs1{font-size:42.880000pt;}\r\n.fs5{font-size:45.199037pt;}\r\n.fs0{font-size:53.120000pt;}\r\n.fs2{font-size:64.000000pt;}\r\n.fs3{font-size:74.880000pt;}\r\n.y0{bottom:-0.666667pt;}\r\n.y1{bottom:0.000000pt;}\r\n.y4{bottom:53.760000pt;}\r\n.y24{bottom:69.760000pt;}\r\n.y22{bottom:107.040000pt;}\r\n.y21{bottom:139.866667pt;}\r\n.y20{bottom:172.666667pt;}\r\n.y1f{bottom:205.466667pt;}\r\n.y1e{bottom:233.946667pt;}\r\n.y1d{bottom:257.466667pt;}\r\n.y1c{bottom:285.946667pt;}\r\n.y1b{bottom:313.466667pt;}\r\n.y1a{bottom:346.266667pt;}\r\n.y19{bottom:379.106667pt;}\r\n.y18{bottom:411.906667pt;}\r\n.y17{bottom:444.706667pt;}\r\n.y16{bottom:477.506667pt;}\r\n.y15{bottom:510.306667pt;}\r\n.y14{bottom:543.106667pt;}\r\n.y13{bottom:575.933333pt;}\r\n.y12{bottom:608.733333pt;}\r\n.y11{bottom:641.533333pt;}\r\n.y10{bottom:674.333333pt;}\r\n.yf{bottom:707.133333pt;}\r\n.ye{bottom:739.933333pt;}\r\n.yd{bottom:772.733333pt;}\r\n.y23{bottom:793.573333pt;}\r\n.yc{bottom:805.573333pt;}\r\n.yb{bottom:838.373333pt;}\r\n.ya{bottom:871.173333pt;}\r\n.y9{bottom:903.973333pt;}\r\n.y8{bottom:936.773333pt;}\r\n.y7{bottom:962.053333pt;}\r\n.y6{bottom:977.893333pt;}\r\n.y5{bottom:1003.813333pt;}\r\n.y3{bottom:1031.200000pt;}\r\n.y2{bottom:1044.640000pt;}\r\n.h7{height:22.525440pt;}\r\n.h3{height:36.576640pt;}\r\n.h8{height:39.187565pt;}\r\n.h2{height:45.311360pt;}\r\n.h6{height:53.632000pt;}\r\n.h4{height:55.488000pt;}\r\n.h5{height:62.749440pt;}\r\n.h9{height:150.400000pt;}\r\n.h0{height:1122.560000pt;}\r\n.h1{height:1123.333333pt;}\r\n.w3{width:160.026667pt;}\r\n.w2{width:793.759988pt;}\r\n.w0{width:793.760000pt;}\r\n.w1{width:794.666667pt;}\r\n.x0{left:0.000000pt;}\r\n.x5{left:23.680000pt;}\r\n.x2{left:71.999988pt;}\r\n.x1{left:209.946655pt;}\r\n.x3{left:282.946655pt;}\r\n.x4{left:580.133333pt;}\r\n}\r\n&lt;/style&gt;\r\n&lt;script&gt;\r\n/*\r\n Copyright 2012 Mozilla Foundation \r\n Copyright 2013 Lu Wang &lt;coolwanglu@gmail.com&gt;\r\n Apachine License Version 2.0 \r\n*/\r\n(function(){function b(a,b,e,f){var c=(a.className||&quot;&quot;).split(/\\s+/g);&quot;&quot;===c[0]&amp;&amp;c.shift();var d=c.indexOf(b);0&gt;d&amp;&amp;e&amp;&amp;c.push(b);0&lt;=d&amp;&amp;f&amp;&amp;c.splice(d,1);a.className=c.join(&quot; &quot;);return 0&lt;=d}if(!(&quot;classList&quot;in document.createElement(&quot;div&quot;))){var e={add:function(a){b(this.element,a,!0,!1)},contains:function(a){return b(this.element,a,!1,!1)},remove:function(a){b(this.element,a,!1,!0)},toggle:function(a){b(this.element,a,!0,!0)}};Object.defineProperty(HTMLElement.prototype,&quot;classList&quot;,{get:function(){if(this._classList)return this._classList;\r\nvar a=Object.create(e,{element:{value:this,writable:!1,enumerable:!0}});Object.defineProperty(this,&quot;_classList&quot;,{value:a,writable:!1,enumerable:!1});return a},enumerable:!0})}})();\r\n&lt;/script&gt;\r\n&lt;script&gt;\r\n(function(){/*\r\n pdf2htmlEX.js: Core UI functions for pdf2htmlEX \r\n Copyright 2012,2013 Lu Wang &lt;coolwanglu@gmail.com&gt; and other contributors \r\n https://github.com/pdf2htmlEX/pdf2htmlEX/blob/master/share/LICENSE \r\n*/\r\n{page_frame:&quot;pf&quot;,page_content_box:&quot;pc&quot;,page_data:&quot;pi&quot;,background_image:&quot;bi&quot;,link:&quot;l&quot;,input_radio:&quot;ir&quot;,__dummy__:&quot;no comma&quot;},DEFAULT_CONFIG={container_id:&quot;page-container&quot;,sidebar_id:&quot;sidebar&quot;,outline_id:&quot;outline&quot;,loading_indicator_cls:&quot;loading-indicator&quot;,preload_pages:3,render_timeout:100,scale_step:0.9,key_handler:!0,hashchange_handler:!0,view_history_handler:!0,__dummy__:&quot;no comma&quot;},EPS=1E-6;\r\nfunction invert(a){var b=a[0]*a[3]-a[1]*a[2];return[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[3]*a[4])/b,(a[1]*a[4]-a[0]*a[5])/b]}function transform(a,b){return[a[0]*b[0]+a[2]*b[1]+a[4],a[1]*b[0]+a[3]*b[1]+a[5]]}function get_page_number(a){return parseInt(a.getAttribute(&quot;data-page-no&quot;),16)}function disable_dragstart(a){for(var b=0,c=a.length;b&lt;c;++b)a[b].addEventListener(&quot;dragstart&quot;,function(){return!1},!1)}\r\nfunction clone_and_extend_objs(a){for(var b={},c=0,e=arguments.length;c&lt;e;++c){var h=arguments[c],d;for(d in h)h.hasOwnProperty(d)&amp;&amp;(b[d]=h[d])}return b}\r\nfunction Page(a){if(a){this.shown=this.loaded=!1;this.page=a;this.num=get_page_number(a);this.original_height=a.clientHeight;this.original_width=a.clientWidth;var b=a.getElementsByClassName(CSS_CLASS_NAMES.page_content_box)[0];b&amp;&amp;(this.content_box=b,this.original_scale=this.cur_scale=this.original_height/b.clientHeight,this.page_data=JSON.parse(a.getElementsByClassName(CSS_CLASS_NAMES.page_data)[0].getAttribute(&quot;data-data&quot;)),this.ctm=this.page_data.ctm,this.ictm=invert(this.ctm),this.loaded=!0)}}\r\nPage.prototype={hide:function(){this.loaded&amp;&amp;this.shown&amp;&amp;(this.content_box.classList.remove(&quot;opened&quot;),this.shown=!1)},show:function(){this.loaded&amp;&amp;!this.shown&amp;&amp;(this.content_box.classList.add(&quot;opened&quot;),this.shown=!0)},rescale:function(a){this.cur_scale=0===a?this.original_scale:a;this.loaded&amp;&amp;(a=this.content_box.style,a.msTransform=a.webkitTransform=a.transform=&quot;scale(&quot;+this.cur_scale.toFixed(3)+&quot;)&quot;);a=this.page.style;a.height=this.original_height*this.cur_scale+&quot;px&quot;;a.width=this.original_width*this.cur_scale+\r\n&quot;px&quot;},view_position:function(){var a=this.page,b=a.parentNode;return[b.scrollLeft-a.offsetLeft-a.clientLeft,b.scrollTop-a.offsetTop-a.clientTop]},height:function(){return this.page.clientHeight},width:function(){return this.page.clientWidth}};function Viewer(a){this.config=clone_and_extend_objs(DEFAULT_CONFIG,0&lt;arguments.length?a:{});this.pages_loading=[];this.init_before_loading_content();var b=this;document.addEventListener(&quot;DOMContentLoaded&quot;,function(){b.init_after_loading_content()},!1)}\r\nViewer.prototype={scale:1,cur_page_idx:0,first_page_idx:0,init_before_loading_content:function(){this.pre_hide_pages()},initialize_radio_button:function(){for(var a=document.getElementsByClassName(CSS_CLASS_NAMES.input_radio),b=0;b&lt;a.length;b++)a[b].addEventListener(&quot;click&quot;,function(){this.classList.toggle(&quot;checked&quot;)})},init_after_loading_content:function(){this.sidebar=document.getElementById(this.config.sidebar_id);this.outline=document.getElementById(this.config.outline_id);this.container=document.getElementById(this.config.container_id);\r\nthis.loading_indicator=document.getElementsByClassName(this.config.loading_indicator_cls)[0];for(var a=!0,b=this.outline.childNodes,c=0,e=b.length;c&lt;e;++c)if(&quot;ul&quot;===b[c].nodeName.toLowerCase()){a=!1;break}a||this.sidebar.classList.add(&quot;opened&quot;);this.find_pages();if(0!=this.pages.length){disable_dragstart(document.getElementsByClassName(CSS_CLASS_NAMES.background_image));this.config.key_handler&amp;&amp;this.register_key_handler();var h=this;this.config.hashchange_handler&amp;&amp;window.addEventListener(&quot;hashchange&quot;,\r\nfunction(a){h.navigate_to_dest(document.location.hash.substring(1))},!1);this.config.view_history_handler&amp;&amp;window.addEventListener(&quot;popstate&quot;,function(a){a.state&amp;&amp;h.navigate_to_dest(a.state)},!1);this.container.addEventListener(&quot;scroll&quot;,function(){h.update_page_idx();h.schedule_render(!0)},!1);[this.container,this.outline].forEach(function(a){a.addEventListener(&quot;click&quot;,h.link_handler.bind(h),!1)});this.initialize_radio_button();this.render()}},find_pages:function(){for(var a=[],b={},c=this.container.childNodes,\r\ne=0,h=c.length;e&lt;h;++e){var d=c[e];d.nodeType===Node.ELEMENT_NODE&amp;&amp;d.classList.contains(CSS_CLASS_NAMES.page_frame)&amp;&amp;(d=new Page(d),a.push(d),b[d.num]=a.length-1)}this.pages=a;this.page_map=b},load_page:function(a,b,c){var e=this.pages;if(!(a&gt;=e.length||(e=e[a],e.loaded||this.pages_loading[a]))){var e=e.page,h=e.getAttribute(&quot;data-page-url&quot;);if(h){this.pages_loading[a]=!0;var d=e.getElementsByClassName(this.config.loading_indicator_cls)[0];&quot;undefined&quot;===typeof d&amp;&amp;(d=this.loading_indicator.cloneNode(!0),\r\nd.classList.add(&quot;active&quot;),e.appendChild(d));var f=this,g=new XMLHttpRequest;g.open(&quot;GET&quot;,h,!0);g.onload=function(){if(200===g.status||0===g.status){var b=document.createElement(&quot;div&quot;);b.innerHTML=g.responseText;for(var d=null,b=b.childNodes,e=0,h=b.length;e&lt;h;++e){var p=b[e];if(p.nodeType===Node.ELEMENT_NODE&amp;&amp;p.classList.contains(CSS_CLASS_NAMES.page_frame)){d=p;break}}b=f.pages[a];f.container.replaceChild(d,b.page);b=new Page(d);f.pages[a]=b;b.hide();b.rescale(f.scale);disable_dragstart(d.getElementsByClassName(CSS_CLASS_NAMES.background_image));\r\nf.schedule_render(!1);c&amp;&amp;c(b)}delete f.pages_loading[a]};g.send(null)}void 0===b&amp;&amp;(b=this.config.preload_pages);0&lt;--b&amp;&amp;(f=this,setTimeout(function(){f.load_page(a+1,b)},0))}},pre_hide_pages:function(){var a=&quot;@media screen{.&quot;+CSS_CLASS_NAMES.page_content_box+&quot;{display:none;}}&quot;,b=document.createElement(&quot;style&quot;);b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));document.head.appendChild(b)},render:function(){for(var a=this.container,b=a.scrollTop,c=a.clientHeight,a=b-c,b=\r\nb+c+c,c=this.pages,e=0,h=c.length;e&lt;h;++e){var d=c[e],f=d.page,g=f.offsetTop+f.clientTop,f=g+f.clientHeight;g&lt;=b&amp;&amp;f&gt;=a?d.loaded?d.show():this.load_page(e):d.hide()}},update_page_idx:function(){var a=this.pages,b=a.length;if(!(2&gt;b)){for(var c=this.container,e=c.scrollTop,c=e+c.clientHeight,h=-1,d=b,f=d-h;1&lt;f;){var g=h+Math.floor(f/2),f=a[g].page;f.offsetTop+f.clientTop+f.clientHeight&gt;=e?d=g:h=g;f=d-h}this.first_page_idx=d;for(var g=h=this.cur_page_idx,k=0;d&lt;b;++d){var f=a[d].page,l=f.offsetTop+f.clientTop,\r\nf=f.clientHeight;if(l&gt;c)break;f=(Math.min(c,l+f)-Math.max(e,l))/f;if(d===h&amp;&amp;Math.abs(f-1)&lt;=EPS){g=h;break}f&gt;k&amp;&amp;(k=f,g=d)}this.cur_page_idx=g}},schedule_render:function(a){if(void 0!==this.render_timer){if(!a)return;clearTimeout(this.render_timer)}var b=this;this.render_timer=setTimeout(function(){delete b.render_timer;b.render()},this.config.render_timeout)},register_key_handler:function(){var a=this;window.addEventListener(&quot;DOMMouseScroll&quot;,function(b){if(b.ctrlKey){b.preventDefault();var c=a.container,\r\ne=c.getBoundingClientRect(),c=[b.clientX-e.left-c.clientLeft,b.clientY-e.top-c.clientTop];a.rescale(Math.pow(a.config.scale_step,b.detail),!0,c)}},!1);window.addEventListener(&quot;keydown&quot;,function(b){var c=!1,e=b.ctrlKey||b.metaKey,h=b.altKey;switch(b.keyCode){case 61:case 107:case 187:e&amp;&amp;(a.rescale(1/a.config.scale_step,!0),c=!0);break;case 173:case 109:case 189:e&amp;&amp;(a.rescale(a.config.scale_step,!0),c=!0);break;case 48:e&amp;&amp;(a.rescale(0,!1),c=!0);break;case 33:h?a.scroll_to(a.cur_page_idx-1):a.container.scrollTop-=\r\na.container.clientHeight;c=!0;break;case 34:h?a.scroll_to(a.cur_page_idx+1):a.container.scrollTop+=a.container.clientHeight;c=!0;break;case 35:a.container.scrollTop=a.container.scrollHeight;c=!0;break;case 36:a.container.scrollTop=0,c=!0}c&amp;&amp;b.preventDefault()},!1)},rescale:function(a,b,c){var e=this.scale;this.scale=a=0===a?1:b?e*a:a;c||(c=[0,0]);b=this.container;c[0]+=b.scrollLeft;c[1]+=b.scrollTop;for(var h=this.pages,d=h.length,f=this.first_page_idx;f&lt;d;++f){var g=h[f].page;if(g.offsetTop+g.clientTop&gt;=\r\nc[1])break}g=f-1;0&gt;g&amp;&amp;(g=0);var g=h[g].page,k=g.clientWidth,f=g.clientHeight,l=g.offsetLeft+g.clientLeft,m=c[0]-l;0&gt;m?m=0:m&gt;k&amp;&amp;(m=k);k=g.offsetTop+g.clientTop;c=c[1]-k;0&gt;c?c=0:c&gt;f&amp;&amp;(c=f);for(f=0;f&lt;d;++f)h[f].rescale(a);b.scrollLeft+=m/e*a+g.offsetLeft+g.clientLeft-m-l;b.scrollTop+=c/e*a+g.offsetTop+g.clientTop-c-k;this.schedule_render(!0)},fit_width:function(){var a=this.cur_page_idx;this.rescale(this.container.clientWidth/this.pages[a].width(),!0);this.scroll_to(a)},fit_height:function(){var a=this.cur_page_idx;\r\nthis.rescale(this.container.clientHeight/this.pages[a].height(),!0);this.scroll_to(a)},get_containing_page:function(a){for(;a;){if(a.nodeType===Node.ELEMENT_NODE&amp;&amp;a.classList.contains(CSS_CLASS_NAMES.page_frame)){a=get_page_number(a);var b=this.page_map;return a in b?this.pages[b[a]]:null}a=a.parentNode}return null},link_handler:function(a){var b=a.target,c=b.getAttribute(&quot;data-dest-detail&quot;);if(c){if(this.config.view_history_handler)try{var e=this.get_current_view_hash();window.history.replaceState(e,\r\n&quot;&quot;,&quot;#&quot;+e);window.history.pushState(c,&quot;&quot;,&quot;#&quot;+c)}catch(h){}this.navigate_to_dest(c,this.get_containing_page(b));a.preventDefault()}},navigate_to_dest:function(a,b){try{var c=JSON.parse(a)}catch(e){return}if(c instanceof Array){var h=c[0],d=this.page_map;if(h in d){for(var f=d[h],h=this.pages[f],d=2,g=c.length;d&lt;g;++d){var k=c[d];if(null!==k&amp;&amp;&quot;number&quot;!==typeof k)return}for(;6&gt;c.length;)c.push(null);var g=b||this.pages[this.cur_page_idx],d=g.view_position(),d=transform(g.ictm,[d[0],g.height()-d[1]]),\r\ng=this.scale,l=[0,0],m=!0,k=!1,n=this.scale;switch(c[1]){case &quot;XYZ&quot;:l=[null===c[2]?d[0]:c[2]*n,null===c[3]?d[1]:c[3]*n];g=c[4];if(null===g||0===g)g=this.scale;k=!0;break;case &quot;Fit&quot;:case &quot;FitB&quot;:l=[0,0];k=!0;break;case &quot;FitH&quot;:case &quot;FitBH&quot;:l=[0,null===c[2]?d[1]:c[2]*n];k=!0;break;case &quot;FitV&quot;:case &quot;FitBV&quot;:l=[null===c[2]?d[0]:c[2]*n,0];k=!0;break;case &quot;FitR&quot;:l=[c[2]*n,c[5]*n],m=!1,k=!0}if(k){this.rescale(g,!1);var p=this,c=function(a){l=transform(a.ctm,l);m&amp;&amp;(l[1]=a.height()-l[1]);p.scroll_to(f,l)};h.loaded?\r\nc(h):(this.load_page(f,void 0,c),this.scroll_to(f))}}}},scroll_to:function(a,b){var c=this.pages;if(!(0&gt;a||a&gt;=c.length)){c=c[a].view_position();void 0===b&amp;&amp;(b=[0,0]);var e=this.container;e.scrollLeft+=b[0]-c[0];e.scrollTop+=b[1]-c[1]}},get_current_view_hash:function(){var a=[],b=this.pages[this.cur_page_idx];a.push(b.num);a.push(&quot;XYZ&quot;);var c=b.view_position(),c=transform(b.ictm,[c[0],b.height()-c[1]]);a.push(c[0]/this.scale);a.push(c[1]/this.scale);a.push(this.scale);return JSON.stringify(a)}};\r\npdf2htmlEX.Viewer=Viewer;})();\r\n&lt;/script&gt;\r\n&lt;script&gt;\r\ntry{\r\npdf2htmlEX.defaultViewer = new pdf2htmlEX.Viewer({});\r\n}catch(e){}\r\n&lt;/script&gt;\r\n&lt;title&gt;&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;div id=&quot;sidebar&quot;&gt;\r\n&lt;div id=&quot;outline&quot;&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div id=&quot;page-container&quot;&gt;\r\n&lt;div class=&quot;c x0 y1 w2 h0&quot;&gt;&lt;div class=&quot;t m0 x1 h2 y2 ff1 fs0 fc0 sc0 ls2 ws2&quot;&gt; &lt;span class=&quot;_ _0&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;sc1&quot;&gt;Page &lt;/span&gt;&lt;span class=&quot;ls0&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;sc1&quot;&gt; of &lt;/span&gt;&lt;span class=&quot;ws0&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;fs1 sc1&quot;&gt; &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h3 y3 ff1 fs1 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y4 ff2 fs2 fc1 sc1 ls2 ws2&quot;&gt; &lt;span class=&quot;_ _2&quot;&gt; &lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x3 h5 y5 ff3 fs3 fc0 sc1 ls2 ws2&quot;&gt;Customer Applicat&lt;span class=&quot;_ _3&quot;&gt;&lt;/span&gt;ion Form &lt;/div&gt;&lt;div class=&quot;t m0 x2 h6 y6 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h7 y7 ff3 fs4 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y8 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Product Name*: &lt;span class=&quot;ff2 fc1&quot;&gt;Euronet Gift &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y9 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Application No.*: &lt;span class=&quot;ff2 fc1&quot;&gt;EN0000112233 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 ya ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Customer Reference Number/ID*: &lt;span class=&quot;ff2 fc1&quot;&gt;1234567890 &lt;span class=&quot;_ _4&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fc3 sc1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fc3 sc1&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yb ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Card Personalization*: &lt;span class=&quot;ff2 fc1&quot;&gt;Personalized &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yc ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Card Number*: &lt;span class=&quot;ff2 fc1 ws1&quot;&gt;1234-56xx-&lt;span class=&quot;ls1&quot;&gt;xxxx&lt;/span&gt;&lt;span class=&quot;ws2&quot;&gt;-1234 &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yd ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Insta Card Reference/Kit Number*: &lt;span class=&quot;ff2 fc1&quot;&gt;INST0000112233 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 ye ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;KYC Status*: &lt;span class=&quot;ff2 fc1&quot;&gt;Full KYC &lt;span class=&quot;_ _6&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yf ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;KYC Verification Date &amp;amp; Time*&lt;span class=&quot;_ _7&quot;&gt;&lt;/span&gt;: &lt;span class=&quot;ff2 fc1&quot;&gt;31/01/2023 13:00:00 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y10 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Full Name*: &lt;span class=&quot;ff2 fc1&quot;&gt;Mr. Rashid Abdul Khan &lt;span class=&quot;_ _8&quot;&gt;&lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;ff3 fc0&quot;&gt;Date of Birth*: &lt;/span&gt;31/01/1990 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y11 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Mobile Number*: &lt;span class=&quot;ff2 fc1&quot;&gt;+91-9891231231 &lt;span class=&quot;_ _9&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;/span&gt;Email ID: &lt;span class=&quot;ff2 fc1&quot;&gt;rakhan90@rediffmail.com &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y12 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Gender*: &lt;span class=&quot;ff2 fc1&quot;&gt;Male \r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nI&#39;m getting following output PDF with right alignment text, which should be left align.\r\n\r\n[![Below is the pdf output:][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3QGeo.png\r\n\r\nI&#39;m also getting following warning/errors in console:\r\n\r\n```none\r\nUnable to retrieve font:\r\n @font-face {\r\n    font-family: ff1;\r\n    src: url(&#39;data:application/font-woff;base64,d09GRgABAAAAACV8AA8AAAAAWxgAAQ...\r\n\r\n10:22:13.682 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - Unable to retrieve font:\r\n @font-face {\r\n    font-family: ff2;\r\n    src: url(&#39;data:application/font-woff;base64,d09GRgABAAAAAEcYAA8AAAAAl9wAAQGY..\r\n\r\n[main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\r\n10:22:13.854 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\r\n10:22:13.854 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\r\n10:22:14.135 [main] ERROR com.itextpdf.layout.renderer.AbstractRenderer - Occupied area has not been initialized. Absolute positioning might be applied incorrectly.\r\n10:22:14.182 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\r\n10:22:14.182 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\r\n10:22:14.198 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\r\ngeneratePDFTestThree Completed\r\n```\r\n\r\nI tried to set text alignment using below line in Java:\r\n\r\n```java\r\nDocument document = HtmlConverter.convertToDocument(fileInputStream, pdfDocument, converterProperties);\r\ndocument.setTextAlignment(TextAlignment.LEFT);\r\n```\r\n\r\nHowever, this does not change the output. Please suggest the changes required to make this work.","title":"PDF text alignment issue in iText","body":"<p>Below is Java code, where I try to convert a HTML file into PDF using Java with iText.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void generatePDFTestThree() {\n    try {\n         String dirPath=&quot;F:\\\\Nitin\\\\ppi\\\\GPR\\\\form_pdf&quot;;\n        //Setting destination \n        FileInputStream fileInputStream = new FileInputStream(new File(dirPath+&quot;/PagePdf.html&quot;));\n        FileOutputStream fileOutputStream = new FileOutputStream(new File(dirPath + &quot;/PageHtmlToPdf.pdf&quot;));\n        \n        PdfWriter pdfWriter = new PdfWriter(fileOutputStream);\n        ConverterProperties converterProperties = new ConverterProperties();\n        converterProperties.setLimitOfLayouts(4);\n        PdfDocument pdfDocument = new PdfDocument(pdfWriter);\n        converterProperties.setBaseUri(&quot;src/resources/images&quot;);\n        //For setting the PAGE SIZE\n        pdfDocument.setDefaultPageSize(new PageSize(PageSize.LETTER));\n        \n        Document document = HtmlConverter.convertToDocument(fileInputStream, pdfDocument, converterProperties);\n        document.close();\n    } \n    catch (Exception e) {\n         e.printStackTrace();\n    }\n}\n</code></pre>\n<p>Below is my HTML file which I try to convert to PDF.</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;utf-8&quot;/&gt;\n&lt;meta name=&quot;generator&quot; content=&quot;pdf2htmlEX&quot;/&gt;\n&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;/&gt;\n&lt;style type=&quot;text/css&quot;&gt;\n#sidebar{position:absolute;top:0;left:0;bottom:0;width:250px;padding:0;margin:0;overflow:auto}#page-container{position:absolute;top:0;left:0;margin:0;padding:0;border:0}@media screen{#sidebar.opened+#page-container{left:250px}#page-container{bottom:0;right:0;overflow:auto}.loading-indicator{display:none}.loading-indicator.active{display:block;position:absolute;width:64px;height:64px;top:50%;left:50%;margin-top:-32px;margin-left:-32px}.loading-indicator img{position:absolute;top:0;left:0;bottom:0;right:0}}@media print{@page{margin:0}html{margin:0}body{text-align:left;margin:0;-webkit-print-color-adjust:exact}#sidebar{display:none}#page-container{width:auto;height:auto;overflow:visible;background-color:transparent}.d{display:none}}.pf{position:relative;background-color:white;overflow:hidden;margin:0;border:0}.pc{position:absolute;border:0;padding:0;margin:0;top:0;left:0;width:100%;height:100%;overflow:hidden;display:block;transform-origin:0 0;-ms-transform-origin:0 0;-webkit-transform-origin:0 0}.pc.opened{display:block}.bf{position:absolute;border:0;margin:0;top:0;bottom:0;width:100%;height:100%;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none}.bi{position:absolute;border:0;margin:0;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none}@media print{.pf{margin:0;box-shadow:none;page-break-after:always;page-break-inside:avoid}#fff}.pc{overflow:visible}}}.c{position:absolute;border:0;padding:0;margin:0;overflow:hidden;display:block}.t{position:absolute;white-space:pre;font-size:1px;transform-origin:0 100%;-ms-transform-origin:0 100%;-webkit-transform-origin:0 100%;unicode-bidi:bidi-override;-moz-font-feature-settings:&quot;liga&quot; 0}.t:after{content:''}.t:before{content:''}.t span{position:relative;unicode-bidi:bidi-override}._{color:transparent;z-index:-1}::selection{background:rgba(127,255,255,0.4)}::-moz-selection{background:rgba(127,255,255,0.4)}.pi{display:none}.d{position:absolute;transform-origin:0 100%;-ms-transform-origin:0 100%;-webkit-transform-origin:0 100%}.it{border:0;background-color:rgba(255,255,255,0.0)}.ir:hover{cursor:pointer}&lt;/style&gt;\n&lt;style type=&quot;text/css&quot;&gt;\n/*! \n * Fancy styles for pdf2htmlEX\n * Copyright 2012,2013 Lu Wang &lt;coolwanglu@gmail.com&gt; \n * https://github.com/pdf2htmlEX/pdf2htmlEX/blob/master/share/LICENSE\n */@media screen{#sidebar{background-color:#2f3236;background-image:url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjNDAzYzNmIj48L3JlY3Q+CjxwYXRoIGQ9Ik0wIDBMNCA0Wk00IDBMMCA0WiIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2U9IiMxZTI5MmQiPjwvcGF0aD4KPC9zdmc+&quot;)}#outline{font-family:Georgia,Times,&quot;Times New Roman&quot;,serif;font-size:13px;margin:2em 1em}#outline ul{padding:0}#outline li{list-style-type:none;margin:1em 0}#outline li&gt;ul{margin-left:1em}#outline a,#outline a:visited,#outline a:hover,#outline a:active{line-height:1.2;color:#e8e8e8;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;display:block;overflow:hidden;outline:0}#outline a:hover{color:#0cf}#page-container{background-color:#9e9e9e;background-image:url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjOWU5ZTllIj48L3JlY3Q+CjxwYXRoIGQ9Ik0wIDVMNSAwWk02IDRMNCA2Wk0tMSAxTDEgLTFaIiBzdHJva2U9IiM4ODgiIHN0cm9rZS13aWR0aD0iMSI+PC9wYXRoPgo8L3N2Zz4=&quot;);-webkit-transition:left 500ms;transition:left 500ms}.pf{margin:13px auto;box-shadow:1px 1px 3px 1px #333;border-collapse:separate}.pc.opened{-webkit-animation:fadein 100ms;animation:fadein 100ms}.loading-indicator.active{-webkit-animation:swing 1.5s ease-in-out .01s infinite alternate none;animation:swing 1.5s ease-in-out .01s infinite alternate none}.checked{background:no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3goQDSYgDiGofgAAAslJREFUOMvtlM9LFGEYx7/vvOPM6ywuuyPFihWFBUsdNnA6KLIh+QPx4KWExULdHQ/9A9EfUodYmATDYg/iRewQzklFWxcEBcGgEplDkDtI6sw4PzrIbrOuedBb9MALD7zv+3m+z4/3Bf7bZS2bzQIAcrmcMDExcTeXy10DAFVVAQDksgFUVZ1ljD3yfd+0LOuFpmnvVVW9GHhkZAQcxwkNDQ2FSCQyRMgJxnVdy7KstKZpn7nwha6urqqfTqfPBAJAuVymlNLXoigOhfd5nmeiKL5TVTV+lmIKwAOA7u5u6Lped2BsbOwjY6yf4zgQQkAIAcedaPR9H67r3uYBQFEUFItFtLe332lpaVkUBOHK3t5eRtf1DwAwODiIubk5DA8PM8bYW1EU+wEgCIJqsCAIQAiB7/u253k2BQDDMJBKpa4mEon5eDx+UxAESJL0uK2t7XosFlvSdf0QAEmlUnlRFJ9Waho2Qghc1/U9z3uWz+eX+Wr+lL6SZfleEAQIggA8z6OpqSknimIvYyybSCReMsZ6TislhCAIAti2Dc/zejVNWwCAavN8339j27YbTg0AGGM3WltbP4WhlRWq6Q/btrs1TVsYHx+vNgqKoqBUKn2NRqPFxsbGJzzP05puUlpt0ukyOI6z7zjOwNTU1OLo6CgmJyf/gA3DgKIoWF1d/cIY24/FYgOU0pp0z/Ityzo8Pj5OTk9PbwHA+vp6zWghDC+VSiuRSOQgGo32UErJ38CO42wdHR09LBQK3zKZDDY2NupmFmF4R0cHVlZWlmRZ/iVJUn9FeWWcCCE4ODjYtG27Z2Zm5juAOmgdGAB2d3cBADs7O8uSJN2SZfl+WKlpmpumaT6Yn58vn/fs6XmbhmHMNjc3tzDGFI7jYJrm5vb29sDa2trPC/9aiqJUy5pOp4f6+vqeJ5PJBAB0dnZe/t8NBajx/z37Df5OGX8d13xzAAAAAElFTkSuQmCC)}}&lt;/style&gt;\n&lt;style type=&quot;text/css&quot;&gt;\n.ff0{font-family:sans-serif;visibility:hidden;}\n.ff3{font-family:ff3;line-height:1.037000;font-style:normal;font-weight:normal;visibility:visible;}\n.m1{transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);-ms-transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);-webkit-transform:matrix(0.237173,0.000000,-0.079050,0.237173,0,0);}\n.m0{transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);-ms-transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);-webkit-transform:matrix(0.250000,0.000000,0.000000,0.250000,0,0);}\n.v0{vertical-align:0.000000px;}\n.ls2{letter-spacing:0.000000px;}\n.ls1{letter-spacing:0.144000px;}\n.ls0{letter-spacing:0.376320px;}\n.sc_{text-shadow:none;}\n.sc1{text-shadow:-0.015em 0 transparent,0 0.015em transparent,0.015em 0 transparent,0 -0.015em  transparent;}\n.sc0{text-shadow:-0.015em 0 rgb(36,63,144),0 0.015em rgb(36,63,144),0.015em 0 rgb(36,63,144),0 -0.015em  rgb(36,63,144);}\n@media screen and (-webkit-min-device-pixel-ratio:0){\n.sc_{-webkit-text-stroke:0px transparent;}\n.sc1{-webkit-text-stroke:0.015em transparent;text-shadow:none;}\n.sc0{-webkit-text-stroke:0.015em rgb(36,63,144);text-shadow:none;}\n}\n.ws1{word-spacing:-9.600000px;}\n.ws0{word-spacing:-7.968000px;}\n.ws2{word-spacing:0.000000px;}\n._b{margin-left:-6.208000px;}\n._8{margin-left:-4.408000px;}\n._3{margin-left:-1.067040px;}\n._7{width:1.160000px;}\n._c{width:21.224000px;}\n._4{width:23.032000px;}\n._e{width:32.640000px;}\n._9{width:35.432000px;}\n._f{width:41.816000px;}\n._d{width:47.416000px;}\n._11{width:49.784000px;}\n._10{width:61.376000px;}\n._12{width:104.600000px;}\n._6{width:110.936000px;}\n._a{width:127.184000px;}\n._5{width:134.400000px;}\n._0{width:514.392000px;}\n._1{width:751.592000px;}\n._2{width:1934.320000px;}\n.fc3{color:transparent;}\n.fc2{color:rgb(30,30,30);}\n.fc1{color:rgb(0,0,0);}\n.fc0{color:rgb(36,63,144);}\n.fs4{font-size:20.160000px;}\n.fs1{font-size:32.160000px;}\n.fs5{font-size:33.899278px;}\n.fs0{font-size:39.840000px;}\n.fs2{font-size:48.000000px;}\n.fs3{font-size:56.160000px;}\n.y0{bottom:-0.500000px;}\n.y1{bottom:0.000000px;}\n.y4{bottom:40.320000px;}\n.y24{bottom:52.320000px;}\n.y22{bottom:80.280000px;}\n.y21{bottom:104.900000px;}\n.y20{bottom:129.500000px;}\n.y1f{bottom:154.100000px;}\n.y1e{bottom:175.460000px;}\n.y1d{bottom:193.100000px;}\n.y1c{bottom:214.460000px;}\n.y1b{bottom:235.100000px;}\n.y1a{bottom:259.700000px;}\n.y19{bottom:284.330000px;}\n.y18{bottom:308.930000px;}\n.y17{bottom:333.530000px;}\n.y16{bottom:358.130000px;}\n.y15{bottom:382.730000px;}\n.y14{bottom:407.330000px;}\n.y13{bottom:431.950000px;}\n.y12{bottom:456.550000px;}\n.y11{bottom:481.150000px;}\n.y10{bottom:505.750000px;}\n.yf{bottom:530.350000px;}\n.ye{bottom:554.950000px;}\n.yd{bottom:579.550000px;}\n.y23{bottom:595.180000px;}\n.yc{bottom:604.180000px;}\n.yb{bottom:628.780000px;}\n.ya{bottom:653.380000px;}\n.y9{bottom:677.980000px;}\n.y8{bottom:702.580000px;}\n.y7{bottom:721.540000px;}\n.y6{bottom:733.420000px;}\n.y5{bottom:752.860000px;}\n.y3{bottom:773.400000px;}\n.y2{bottom:783.480000px;}\n.h7{height:16.894080px;}\n.h3{height:27.432480px;}\n.h8{height:29.390674px;}\n.h2{height:33.983520px;}\n.h6{height:40.224000px;}\n.h4{height:41.616000px;}\n.h5{height:47.062080px;}\n.h9{height:112.800000px;}\n.h0{height:841.920000px;}\n.h1{height:842.500000px;}\n.w3{width:120.020000px;}\n.w2{width:595.319991px;}\n.w0{width:595.320000px;}\n.w1{width:596.000000px;}\n.x0{left:0.000000px;}\n.x5{left:17.760000px;}\n.x2{left:53.999991px;}\n.x1{left:157.459991px;}\n.x3{left:212.209991px;}\n.x4{left:435.100000px;}\n@media print{\n.v0{vertical-align:0.000000pt;}\n.ls2{letter-spacing:0.000000pt;}\n.ls1{letter-spacing:0.192000pt;}\n.ls0{letter-spacing:0.501760pt;}\n.ws1{word-spacing:-12.800000pt;}\n.ws0{word-spacing:-10.624000pt;}\n.ws2{word-spacing:0.000000pt;}\n._b{margin-left:-8.277333pt;}\n._8{margin-left:-5.877333pt;}\n._3{margin-left:-1.422720pt;}\n._7{width:1.546667pt;}\n._c{width:28.298667pt;}\n._4{width:30.709333pt;}\n._e{width:43.520000pt;}\n._9{width:47.242667pt;}\n._f{width:55.754667pt;}\n._d{width:63.221333pt;}\n._11{width:66.378667pt;}\n._10{width:81.834667pt;}\n._12{width:139.466667pt;}\n._6{width:147.914667pt;}\n._a{width:169.578667pt;}\n._5{width:179.200000pt;}\n._0{width:685.856000pt;}\n._1{width:1002.122667pt;}\n._2{width:2579.093333pt;}\n.fs4{font-size:26.880000pt;}\n.fs1{font-size:42.880000pt;}\n.fs5{font-size:45.199037pt;}\n.fs0{font-size:53.120000pt;}\n.fs2{font-size:64.000000pt;}\n.fs3{font-size:74.880000pt;}\n.y0{bottom:-0.666667pt;}\n.y1{bottom:0.000000pt;}\n.y4{bottom:53.760000pt;}\n.y24{bottom:69.760000pt;}\n.y22{bottom:107.040000pt;}\n.y21{bottom:139.866667pt;}\n.y20{bottom:172.666667pt;}\n.y1f{bottom:205.466667pt;}\n.y1e{bottom:233.946667pt;}\n.y1d{bottom:257.466667pt;}\n.y1c{bottom:285.946667pt;}\n.y1b{bottom:313.466667pt;}\n.y1a{bottom:346.266667pt;}\n.y19{bottom:379.106667pt;}\n.y18{bottom:411.906667pt;}\n.y17{bottom:444.706667pt;}\n.y16{bottom:477.506667pt;}\n.y15{bottom:510.306667pt;}\n.y14{bottom:543.106667pt;}\n.y13{bottom:575.933333pt;}\n.y12{bottom:608.733333pt;}\n.y11{bottom:641.533333pt;}\n.y10{bottom:674.333333pt;}\n.yf{bottom:707.133333pt;}\n.ye{bottom:739.933333pt;}\n.yd{bottom:772.733333pt;}\n.y23{bottom:793.573333pt;}\n.yc{bottom:805.573333pt;}\n.yb{bottom:838.373333pt;}\n.ya{bottom:871.173333pt;}\n.y9{bottom:903.973333pt;}\n.y8{bottom:936.773333pt;}\n.y7{bottom:962.053333pt;}\n.y6{bottom:977.893333pt;}\n.y5{bottom:1003.813333pt;}\n.y3{bottom:1031.200000pt;}\n.y2{bottom:1044.640000pt;}\n.h7{height:22.525440pt;}\n.h3{height:36.576640pt;}\n.h8{height:39.187565pt;}\n.h2{height:45.311360pt;}\n.h6{height:53.632000pt;}\n.h4{height:55.488000pt;}\n.h5{height:62.749440pt;}\n.h9{height:150.400000pt;}\n.h0{height:1122.560000pt;}\n.h1{height:1123.333333pt;}\n.w3{width:160.026667pt;}\n.w2{width:793.759988pt;}\n.w0{width:793.760000pt;}\n.w1{width:794.666667pt;}\n.x0{left:0.000000pt;}\n.x5{left:23.680000pt;}\n.x2{left:71.999988pt;}\n.x1{left:209.946655pt;}\n.x3{left:282.946655pt;}\n.x4{left:580.133333pt;}\n}\n&lt;/style&gt;\n&lt;script&gt;\n/*\n Copyright 2012 Mozilla Foundation \n Copyright 2013 Lu Wang &lt;coolwanglu@gmail.com&gt;\n Apachine License Version 2.0 \n*/\n(function(){function b(a,b,e,f){var c=(a.className||&quot;&quot;).split(/\\s+/g);&quot;&quot;===c[0]&amp;&amp;c.shift();var d=c.indexOf(b);0&gt;d&amp;&amp;e&amp;&amp;c.push(b);0&lt;=d&amp;&amp;f&amp;&amp;c.splice(d,1);a.className=c.join(&quot; &quot;);return 0&lt;=d}if(!(&quot;classList&quot;in document.createElement(&quot;div&quot;))){var e={add:function(a){b(this.element,a,!0,!1)},contains:function(a){return b(this.element,a,!1,!1)},remove:function(a){b(this.element,a,!1,!0)},toggle:function(a){b(this.element,a,!0,!0)}};Object.defineProperty(HTMLElement.prototype,&quot;classList&quot;,{get:function(){if(this._classList)return this._classList;\nvar a=Object.create(e,{element:{value:this,writable:!1,enumerable:!0}});Object.defineProperty(this,&quot;_classList&quot;,{value:a,writable:!1,enumerable:!1});return a},enumerable:!0})}})();\n&lt;/script&gt;\n&lt;script&gt;\n(function(){/*\n pdf2htmlEX.js: Core UI functions for pdf2htmlEX \n Copyright 2012,2013 Lu Wang &lt;coolwanglu@gmail.com&gt; and other contributors \n https://github.com/pdf2htmlEX/pdf2htmlEX/blob/master/share/LICENSE \n*/\n{page_frame:&quot;pf&quot;,page_content_box:&quot;pc&quot;,page_data:&quot;pi&quot;,background_image:&quot;bi&quot;,link:&quot;l&quot;,input_radio:&quot;ir&quot;,__dummy__:&quot;no comma&quot;},DEFAULT_CONFIG={container_id:&quot;page-container&quot;,sidebar_id:&quot;sidebar&quot;,outline_id:&quot;outline&quot;,loading_indicator_cls:&quot;loading-indicator&quot;,preload_pages:3,render_timeout:100,scale_step:0.9,key_handler:!0,hashchange_handler:!0,view_history_handler:!0,__dummy__:&quot;no comma&quot;},EPS=1E-6;\nfunction invert(a){var b=a[0]*a[3]-a[1]*a[2];return[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[3]*a[4])/b,(a[1]*a[4]-a[0]*a[5])/b]}function transform(a,b){return[a[0]*b[0]+a[2]*b[1]+a[4],a[1]*b[0]+a[3]*b[1]+a[5]]}function get_page_number(a){return parseInt(a.getAttribute(&quot;data-page-no&quot;),16)}function disable_dragstart(a){for(var b=0,c=a.length;b&lt;c;++b)a[b].addEventListener(&quot;dragstart&quot;,function(){return!1},!1)}\nfunction clone_and_extend_objs(a){for(var b={},c=0,e=arguments.length;c&lt;e;++c){var h=arguments[c],d;for(d in h)h.hasOwnProperty(d)&amp;&amp;(b[d]=h[d])}return b}\nfunction Page(a){if(a){this.shown=this.loaded=!1;this.page=a;this.num=get_page_number(a);this.original_height=a.clientHeight;this.original_width=a.clientWidth;var b=a.getElementsByClassName(CSS_CLASS_NAMES.page_content_box)[0];b&amp;&amp;(this.content_box=b,this.original_scale=this.cur_scale=this.original_height/b.clientHeight,this.page_data=JSON.parse(a.getElementsByClassName(CSS_CLASS_NAMES.page_data)[0].getAttribute(&quot;data-data&quot;)),this.ctm=this.page_data.ctm,this.ictm=invert(this.ctm),this.loaded=!0)}}\nPage.prototype={hide:function(){this.loaded&amp;&amp;this.shown&amp;&amp;(this.content_box.classList.remove(&quot;opened&quot;),this.shown=!1)},show:function(){this.loaded&amp;&amp;!this.shown&amp;&amp;(this.content_box.classList.add(&quot;opened&quot;),this.shown=!0)},rescale:function(a){this.cur_scale=0===a?this.original_scale:a;this.loaded&amp;&amp;(a=this.content_box.style,a.msTransform=a.webkitTransform=a.transform=&quot;scale(&quot;+this.cur_scale.toFixed(3)+&quot;)&quot;);a=this.page.style;a.height=this.original_height*this.cur_scale+&quot;px&quot;;a.width=this.original_width*this.cur_scale+\n&quot;px&quot;},view_position:function(){var a=this.page,b=a.parentNode;return[b.scrollLeft-a.offsetLeft-a.clientLeft,b.scrollTop-a.offsetTop-a.clientTop]},height:function(){return this.page.clientHeight},width:function(){return this.page.clientWidth}};function Viewer(a){this.config=clone_and_extend_objs(DEFAULT_CONFIG,0&lt;arguments.length?a:{});this.pages_loading=[];this.init_before_loading_content();var b=this;document.addEventListener(&quot;DOMContentLoaded&quot;,function(){b.init_after_loading_content()},!1)}\nViewer.prototype={scale:1,cur_page_idx:0,first_page_idx:0,init_before_loading_content:function(){this.pre_hide_pages()},initialize_radio_button:function(){for(var a=document.getElementsByClassName(CSS_CLASS_NAMES.input_radio),b=0;b&lt;a.length;b++)a[b].addEventListener(&quot;click&quot;,function(){this.classList.toggle(&quot;checked&quot;)})},init_after_loading_content:function(){this.sidebar=document.getElementById(this.config.sidebar_id);this.outline=document.getElementById(this.config.outline_id);this.container=document.getElementById(this.config.container_id);\nthis.loading_indicator=document.getElementsByClassName(this.config.loading_indicator_cls)[0];for(var a=!0,b=this.outline.childNodes,c=0,e=b.length;c&lt;e;++c)if(&quot;ul&quot;===b[c].nodeName.toLowerCase()){a=!1;break}a||this.sidebar.classList.add(&quot;opened&quot;);this.find_pages();if(0!=this.pages.length){disable_dragstart(document.getElementsByClassName(CSS_CLASS_NAMES.background_image));this.config.key_handler&amp;&amp;this.register_key_handler();var h=this;this.config.hashchange_handler&amp;&amp;window.addEventListener(&quot;hashchange&quot;,\nfunction(a){h.navigate_to_dest(document.location.hash.substring(1))},!1);this.config.view_history_handler&amp;&amp;window.addEventListener(&quot;popstate&quot;,function(a){a.state&amp;&amp;h.navigate_to_dest(a.state)},!1);this.container.addEventListener(&quot;scroll&quot;,function(){h.update_page_idx();h.schedule_render(!0)},!1);[this.container,this.outline].forEach(function(a){a.addEventListener(&quot;click&quot;,h.link_handler.bind(h),!1)});this.initialize_radio_button();this.render()}},find_pages:function(){for(var a=[],b={},c=this.container.childNodes,\ne=0,h=c.length;e&lt;h;++e){var d=c[e];d.nodeType===Node.ELEMENT_NODE&amp;&amp;d.classList.contains(CSS_CLASS_NAMES.page_frame)&amp;&amp;(d=new Page(d),a.push(d),b[d.num]=a.length-1)}this.pages=a;this.page_map=b},load_page:function(a,b,c){var e=this.pages;if(!(a&gt;=e.length||(e=e[a],e.loaded||this.pages_loading[a]))){var e=e.page,h=e.getAttribute(&quot;data-page-url&quot;);if(h){this.pages_loading[a]=!0;var d=e.getElementsByClassName(this.config.loading_indicator_cls)[0];&quot;undefined&quot;===typeof d&amp;&amp;(d=this.loading_indicator.cloneNode(!0),\nd.classList.add(&quot;active&quot;),e.appendChild(d));var f=this,g=new XMLHttpRequest;g.open(&quot;GET&quot;,h,!0);g.onload=function(){if(200===g.status||0===g.status){var b=document.createElement(&quot;div&quot;);b.innerHTML=g.responseText;for(var d=null,b=b.childNodes,e=0,h=b.length;e&lt;h;++e){var p=b[e];if(p.nodeType===Node.ELEMENT_NODE&amp;&amp;p.classList.contains(CSS_CLASS_NAMES.page_frame)){d=p;break}}b=f.pages[a];f.container.replaceChild(d,b.page);b=new Page(d);f.pages[a]=b;b.hide();b.rescale(f.scale);disable_dragstart(d.getElementsByClassName(CSS_CLASS_NAMES.background_image));\nf.schedule_render(!1);c&amp;&amp;c(b)}delete f.pages_loading[a]};g.send(null)}void 0===b&amp;&amp;(b=this.config.preload_pages);0&lt;--b&amp;&amp;(f=this,setTimeout(function(){f.load_page(a+1,b)},0))}},pre_hide_pages:function(){var a=&quot;@media screen{.&quot;+CSS_CLASS_NAMES.page_content_box+&quot;{display:none;}}&quot;,b=document.createElement(&quot;style&quot;);b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));document.head.appendChild(b)},render:function(){for(var a=this.container,b=a.scrollTop,c=a.clientHeight,a=b-c,b=\nb+c+c,c=this.pages,e=0,h=c.length;e&lt;h;++e){var d=c[e],f=d.page,g=f.offsetTop+f.clientTop,f=g+f.clientHeight;g&lt;=b&amp;&amp;f&gt;=a?d.loaded?d.show():this.load_page(e):d.hide()}},update_page_idx:function(){var a=this.pages,b=a.length;if(!(2&gt;b)){for(var c=this.container,e=c.scrollTop,c=e+c.clientHeight,h=-1,d=b,f=d-h;1&lt;f;){var g=h+Math.floor(f/2),f=a[g].page;f.offsetTop+f.clientTop+f.clientHeight&gt;=e?d=g:h=g;f=d-h}this.first_page_idx=d;for(var g=h=this.cur_page_idx,k=0;d&lt;b;++d){var f=a[d].page,l=f.offsetTop+f.clientTop,\nf=f.clientHeight;if(l&gt;c)break;f=(Math.min(c,l+f)-Math.max(e,l))/f;if(d===h&amp;&amp;Math.abs(f-1)&lt;=EPS){g=h;break}f&gt;k&amp;&amp;(k=f,g=d)}this.cur_page_idx=g}},schedule_render:function(a){if(void 0!==this.render_timer){if(!a)return;clearTimeout(this.render_timer)}var b=this;this.render_timer=setTimeout(function(){delete b.render_timer;b.render()},this.config.render_timeout)},register_key_handler:function(){var a=this;window.addEventListener(&quot;DOMMouseScroll&quot;,function(b){if(b.ctrlKey){b.preventDefault();var c=a.container,\ne=c.getBoundingClientRect(),c=[b.clientX-e.left-c.clientLeft,b.clientY-e.top-c.clientTop];a.rescale(Math.pow(a.config.scale_step,b.detail),!0,c)}},!1);window.addEventListener(&quot;keydown&quot;,function(b){var c=!1,e=b.ctrlKey||b.metaKey,h=b.altKey;switch(b.keyCode){case 61:case 107:case 187:e&amp;&amp;(a.rescale(1/a.config.scale_step,!0),c=!0);break;case 173:case 109:case 189:e&amp;&amp;(a.rescale(a.config.scale_step,!0),c=!0);break;case 48:e&amp;&amp;(a.rescale(0,!1),c=!0);break;case 33:h?a.scroll_to(a.cur_page_idx-1):a.container.scrollTop-=\na.container.clientHeight;c=!0;break;case 34:h?a.scroll_to(a.cur_page_idx+1):a.container.scrollTop+=a.container.clientHeight;c=!0;break;case 35:a.container.scrollTop=a.container.scrollHeight;c=!0;break;case 36:a.container.scrollTop=0,c=!0}c&amp;&amp;b.preventDefault()},!1)},rescale:function(a,b,c){var e=this.scale;this.scale=a=0===a?1:b?e*a:a;c||(c=[0,0]);b=this.container;c[0]+=b.scrollLeft;c[1]+=b.scrollTop;for(var h=this.pages,d=h.length,f=this.first_page_idx;f&lt;d;++f){var g=h[f].page;if(g.offsetTop+g.clientTop&gt;=\nc[1])break}g=f-1;0&gt;g&amp;&amp;(g=0);var g=h[g].page,k=g.clientWidth,f=g.clientHeight,l=g.offsetLeft+g.clientLeft,m=c[0]-l;0&gt;m?m=0:m&gt;k&amp;&amp;(m=k);k=g.offsetTop+g.clientTop;c=c[1]-k;0&gt;c?c=0:c&gt;f&amp;&amp;(c=f);for(f=0;f&lt;d;++f)h[f].rescale(a);b.scrollLeft+=m/e*a+g.offsetLeft+g.clientLeft-m-l;b.scrollTop+=c/e*a+g.offsetTop+g.clientTop-c-k;this.schedule_render(!0)},fit_width:function(){var a=this.cur_page_idx;this.rescale(this.container.clientWidth/this.pages[a].width(),!0);this.scroll_to(a)},fit_height:function(){var a=this.cur_page_idx;\nthis.rescale(this.container.clientHeight/this.pages[a].height(),!0);this.scroll_to(a)},get_containing_page:function(a){for(;a;){if(a.nodeType===Node.ELEMENT_NODE&amp;&amp;a.classList.contains(CSS_CLASS_NAMES.page_frame)){a=get_page_number(a);var b=this.page_map;return a in b?this.pages[b[a]]:null}a=a.parentNode}return null},link_handler:function(a){var b=a.target,c=b.getAttribute(&quot;data-dest-detail&quot;);if(c){if(this.config.view_history_handler)try{var e=this.get_current_view_hash();window.history.replaceState(e,\n&quot;&quot;,&quot;#&quot;+e);window.history.pushState(c,&quot;&quot;,&quot;#&quot;+c)}catch(h){}this.navigate_to_dest(c,this.get_containing_page(b));a.preventDefault()}},navigate_to_dest:function(a,b){try{var c=JSON.parse(a)}catch(e){return}if(c instanceof Array){var h=c[0],d=this.page_map;if(h in d){for(var f=d[h],h=this.pages[f],d=2,g=c.length;d&lt;g;++d){var k=c[d];if(null!==k&amp;&amp;&quot;number&quot;!==typeof k)return}for(;6&gt;c.length;)c.push(null);var g=b||this.pages[this.cur_page_idx],d=g.view_position(),d=transform(g.ictm,[d[0],g.height()-d[1]]),\ng=this.scale,l=[0,0],m=!0,k=!1,n=this.scale;switch(c[1]){case &quot;XYZ&quot;:l=[null===c[2]?d[0]:c[2]*n,null===c[3]?d[1]:c[3]*n];g=c[4];if(null===g||0===g)g=this.scale;k=!0;break;case &quot;Fit&quot;:case &quot;FitB&quot;:l=[0,0];k=!0;break;case &quot;FitH&quot;:case &quot;FitBH&quot;:l=[0,null===c[2]?d[1]:c[2]*n];k=!0;break;case &quot;FitV&quot;:case &quot;FitBV&quot;:l=[null===c[2]?d[0]:c[2]*n,0];k=!0;break;case &quot;FitR&quot;:l=[c[2]*n,c[5]*n],m=!1,k=!0}if(k){this.rescale(g,!1);var p=this,c=function(a){l=transform(a.ctm,l);m&amp;&amp;(l[1]=a.height()-l[1]);p.scroll_to(f,l)};h.loaded?\nc(h):(this.load_page(f,void 0,c),this.scroll_to(f))}}}},scroll_to:function(a,b){var c=this.pages;if(!(0&gt;a||a&gt;=c.length)){c=c[a].view_position();void 0===b&amp;&amp;(b=[0,0]);var e=this.container;e.scrollLeft+=b[0]-c[0];e.scrollTop+=b[1]-c[1]}},get_current_view_hash:function(){var a=[],b=this.pages[this.cur_page_idx];a.push(b.num);a.push(&quot;XYZ&quot;);var c=b.view_position(),c=transform(b.ictm,[c[0],b.height()-c[1]]);a.push(c[0]/this.scale);a.push(c[1]/this.scale);a.push(this.scale);return JSON.stringify(a)}};\npdf2htmlEX.Viewer=Viewer;})();\n&lt;/script&gt;\n&lt;script&gt;\ntry{\npdf2htmlEX.defaultViewer = new pdf2htmlEX.Viewer({});\n}catch(e){}\n&lt;/script&gt;\n&lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div id=&quot;sidebar&quot;&gt;\n&lt;div id=&quot;outline&quot;&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id=&quot;page-container&quot;&gt;\n&lt;div class=&quot;c x0 y1 w2 h0&quot;&gt;&lt;div class=&quot;t m0 x1 h2 y2 ff1 fs0 fc0 sc0 ls2 ws2&quot;&gt; &lt;span class=&quot;_ _0&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;sc1&quot;&gt;Page &lt;/span&gt;&lt;span class=&quot;ls0&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;sc1&quot;&gt; of &lt;/span&gt;&lt;span class=&quot;ws0&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;fs1 sc1&quot;&gt; &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h3 y3 ff1 fs1 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y4 ff2 fs2 fc1 sc1 ls2 ws2&quot;&gt; &lt;span class=&quot;_ _2&quot;&gt; &lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x3 h5 y5 ff3 fs3 fc0 sc1 ls2 ws2&quot;&gt;Customer Applicat&lt;span class=&quot;_ _3&quot;&gt;&lt;/span&gt;ion Form &lt;/div&gt;&lt;div class=&quot;t m0 x2 h6 y6 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h7 y7 ff3 fs4 fc0 sc1 ls2 ws2&quot;&gt; &lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y8 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Product Name*: &lt;span class=&quot;ff2 fc1&quot;&gt;Euronet Gift &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y9 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Application No.*: &lt;span class=&quot;ff2 fc1&quot;&gt;EN0000112233 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 ya ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Customer Reference Number/ID*: &lt;span class=&quot;ff2 fc1&quot;&gt;1234567890 &lt;span class=&quot;_ _4&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fc3 sc1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fc3 sc1&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yb ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Card Personalization*: &lt;span class=&quot;ff2 fc1&quot;&gt;Personalized &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yc ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Card Number*: &lt;span class=&quot;ff2 fc1 ws1&quot;&gt;1234-56xx-&lt;span class=&quot;ls1&quot;&gt;xxxx&lt;/span&gt;&lt;span class=&quot;ws2&quot;&gt;-1234 &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yd ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Insta Card Reference/Kit Number*: &lt;span class=&quot;ff2 fc1&quot;&gt;INST0000112233 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 ye ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;KYC Status*: &lt;span class=&quot;ff2 fc1&quot;&gt;Full KYC &lt;span class=&quot;_ _6&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 yf ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;KYC Verification Date &amp;amp; Time*&lt;span class=&quot;_ _7&quot;&gt;&lt;/span&gt;: &lt;span class=&quot;ff2 fc1&quot;&gt;31/01/2023 13:00:00 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y10 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Full Name*: &lt;span class=&quot;ff2 fc1&quot;&gt;Mr. Rashid Abdul Khan &lt;span class=&quot;_ _8&quot;&gt;&lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;span class=&quot;ff3 fc0&quot;&gt;Date of Birth*: &lt;/span&gt;31/01/1990 &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y11 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Mobile Number*: &lt;span class=&quot;ff2 fc1&quot;&gt;+91-9891231231 &lt;span class=&quot;_ _9&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt; &lt;span class=&quot;_ _5&quot;&gt; &lt;/span&gt;&lt;/span&gt;Email ID: &lt;span class=&quot;ff2 fc1&quot;&gt;rakhan90@rediffmail.com &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;t m0 x2 h4 y12 ff3 fs2 fc0 sc1 ls2 ws2&quot;&gt;Gender*: &lt;span class=&quot;ff2 fc1&quot;&gt;Male \n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I'm getting following output PDF with right alignment text, which should be left align.</p>\n<p><a href=\"https://i.stack.imgur.com/3QGeo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3QGeo.png\" alt=\"Below is the pdf output:\" /></a></p>\n<p>I'm also getting following warning/errors in console:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Unable to retrieve font:\n @font-face {\n    font-family: ff1;\n    src: url('data:application/font-woff;base64,d09GRgABAAAAACV8AA8AAAAAWxgAAQ...\n\n10:22:13.682 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - Unable to retrieve font:\n @font-face {\n    font-family: ff2;\n    src: url('data:application/font-woff;base64,d09GRgABAAAAAEcYAA8AAAAAl9wAAQGY..\n\n[main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\n10:22:13.854 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\n10:22:13.854 [main] ERROR com.itextpdf.html2pdf.attach.impl.DefaultHtmlProcessor - No worker found for tag script\n10:22:14.135 [main] ERROR com.itextpdf.layout.renderer.AbstractRenderer - Occupied area has not been initialized. Absolute positioning might be applied incorrectly.\n10:22:14.182 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\n10:22:14.182 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\n10:22:14.198 [main] WARN com.itextpdf.layout.renderer.LineRenderer - Inline block element does not fit into parent element and will be clipped\ngeneratePDFTestThree Completed\n</code></pre>\n<p>I tried to set text alignment using below line in Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Document document = HtmlConverter.convertToDocument(fileInputStream, pdfDocument, converterProperties);\ndocument.setTextAlignment(TextAlignment.LEFT);\n</code></pre>\n<p>However, this does not change the output. Please suggest the changes required to make this work.</p>\n"},{"tags":["java","jquery","spring-mvc"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1681572031,"post_id":76023074,"comment_id":134079712,"body_markdown":"401 is Unauthorized. Do you use athentication?","body":"401 is Unauthorized. Do you use athentication?"}],"owner":{"account_id":22980869,"reputation":33,"user_id":17107814,"display_name":"do hai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":399,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681570980,"creation_date":1681570980,"question_id":76023074,"body_markdown":"i have 1 error when i try to use html in jquery to add product quantity to cart but cant add even though click event is caught.when the click event is done, get the value in the APIController with Id &quot;cart-number&quot;, it cannot be called.when i work with ajax the console shows the error:failed to load resource: the server responded with a status of 401 ()\r\nanyone help?\r\nthis is my js code:\r\n```\r\n$(document).ready(function(){\r\n    $(&quot;.cart-btn&quot;).click(function(){\r\n        var color_id = $(this).closest(&quot;tr&quot;).find(&quot;.color&quot;).attr(&quot;data-color&quot;);\r\n        var color_name = $(this).closest(&quot;tr&quot;).find(&quot;.color&quot;).text();\r\n        var quantity = $(this).closest(&quot;tr&quot;).find(&quot;.quantity&quot;).text();\r\n        \r\n        var product_name = $(&quot;#detail-title&quot;).text();\r\n        var product_id = $(&quot;#detail-title&quot;).attr(&quot;data-Id&quot;);\r\n        var price = $(&quot;#detail-price&quot;).attr(&quot;data-value&quot;);\r\n        \r\n           $.ajax({\r\n            url:&quot;/PhoneAccessories/api/addtocart&quot;,\r\n            type:&quot;GET&quot;,\r\n            data:{\r\n                product_id:product_id,\r\n                color_id:color_id,\r\n                quantity:quantity,\r\n                product_name:product_name,\r\n                price:price,\r\n                color_name:color_name\r\n            },\r\n            success: function(value){\r\n                $(&quot;#cart-number&quot;).html(&quot;&lt;span&gt;&quot;+value+&quot;&lt;/span&gt;&quot;);\r\n            }\r\n        })\r\n    \r\n    });\r\n});\r\n```\r\n\r\n\r\nthis is my APIController\r\n```\r\n@Controller\r\n    @RequestMapping(&quot;api/&quot;)\r\n    @SessionAttributes({&quot;email&quot;,&quot;cart&quot;})\r\n    public class APIController {\r\n        @Autowired\r\n        EmployeeService employeeService;\r\n        \r\n        @GetMapping(&quot;addtocart&quot;)\r\n        public String AddToCart(@RequestParam int product_id,@RequestParam int color_id,@RequestParam int quantity,@RequestParam String product_name,@RequestParam String price,@RequestParam String color_name,HttpSession httpSession) {\r\n            \r\n            if(httpSession.getAttribute(&quot;cart&quot;) == null) {\r\n                List&lt;ProductCart&gt; productCarts = new ArrayList&lt;ProductCart&gt;();\r\n                ProductCart carts = new ProductCart();\r\n                carts.setProduct_id(product_id);\r\n                carts.setColor_id(color_id);\r\n                carts.setQuantity(1);\r\n                carts.setProduct_name(product_name);\r\n                carts.setPrice(price);\r\n                carts.setColor_name(color_name);\r\n                productCarts.add(carts);\r\n                httpSession.setAttribute(&quot;cart&quot;, productCarts);\r\n                List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\r\n                return listCart.size()+ &quot;&quot;;\r\n            }else {\r\n                List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\r\n                int location = CheckProductAlreadyExists(product_id, color_id, httpSession);\r\n                if(location == -1) {\r\n                    \r\n                    ProductCart carts = new ProductCart();\r\n                    carts.setProduct_id(product_id);\r\n                    carts.setColor_id(color_id);\r\n                    carts.setQuantity(1);\r\n                    carts.setProduct_name(product_name);\r\n                    carts.setPrice(price);\r\n                    carts.setColor_name(color_name);\r\n                    listCart.add(carts);\r\n                }else {\r\n                    \r\n                    int newQuantity = listCart.get(location).getQuantity()+1;\r\n                    listCart.get(location).setQuantity(newQuantity);\r\n                }\r\n                return listCart.size() +&quot;&quot;;\r\n                \r\n            }\r\n            \r\n            \r\n        }\r\n        private int CheckProductAlreadyExists(int product_id,int color_id,HttpSession httpSession) {\r\n            List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\r\n            for(int i=0;i&lt;listCart.size();i++) {\r\n                if(listCart.get(i).getProduct_id()== product_id &amp;&amp; listCart.get(i).getColor_id() ==color_id ) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n```\r\nthis is the jsp details page:\r\n```\r\n&lt;body&gt;\r\n    &lt;section id=&quot;detail-page&quot;&gt;\r\n\r\n        &lt;nav&gt;\r\n            &lt;div class=&quot;icons&quot;&gt;\r\n                &lt;i class=&quot;fa-solid fa-cart-shopping&quot;&gt;&lt;div id=&quot;cart-number&quot;&gt;&lt;span&gt;${NumberOfProduct}&lt;/span&gt;&lt;/div&gt;&lt;/i&gt; \r\n                &lt;c:choose&gt;\r\n                    &lt;c:when test=&quot;${fc != null}&quot;&gt;\r\n                        &lt;a id=&quot;first-char&quot; href=&quot;login/&quot;&gt; ${fc} &lt;/i&gt;&lt;/a&gt;\r\n                    &lt;/c:when&gt;\r\n                    &lt;c:otherwise&gt;\r\n                        &lt;a href=&quot;/PhoneAccessories/login/&quot;&gt;&lt;i class=&quot;fa-solid fa-user&quot;&gt;&lt;/i&gt;&lt;/a&gt;\r\n                    &lt;/c:otherwise&gt;\r\n                &lt;/c:choose&gt;\r\n\r\n            &lt;/div&gt;\r\n\r\n        &lt;/nav&gt;\r\n\r\n\r\n    &lt;/section&gt;\r\n    \r\n    &lt;!-- Detail Product --&gt;\r\n    \r\n    &lt;div id=&quot;container-detail&quot; class=&quot;container&quot;&gt;\r\n        &lt;div class=&quot;row&quot;&gt;\r\n            &lt;div id=&quot;product-category&quot; class=&quot;col-sm-2 col-md-2&quot;&gt;\r\n            \r\n            &lt;/div&gt;\r\n            \r\n            \r\n            &lt;div class=&quot;col-sm-8 col-md-8&quot;&gt;\r\n                &lt;div class=&quot;row&quot;&gt;\r\n                    &lt;div class=&quot;col-sm-5 col-md-5&quot;&gt;\r\n                        &lt;img id=&quot;image-detail&quot; src=&#39;&lt;c:url value=&quot;/resources/Image/products/${product.getProduct_image()}&quot;/&gt;&#39; /&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;col-sm-7 col-md-7&quot;&gt;\r\n                        &lt;h4 id=&quot;detail-title&quot; data-Id=&quot;${product.getProduct_id()}&quot; &gt;${product.getProduct_name()}&lt;/h4&gt;\r\n                        &lt;h5 id=&quot;detail-price&quot; data-value=&quot;${product.getProduct_price()}&quot; &gt;${product.getProduct_price()}&lt;/h5&gt;\r\n                        &lt;table class=&quot;table&quot;&gt;\r\n                            &lt;thead&gt;\r\n                                &lt;tr&gt;\r\n                                    &lt;td&gt;Color&lt;/td&gt;\r\n                                    &lt;td&gt;Quantity&lt;/td&gt;\r\n                                &lt;/tr&gt;\r\n                            &lt;/thead&gt;\r\n                            &lt;tbody&gt;\r\n                                &lt;c:forEach var=&quot;detailProduct&quot; items=&quot;${product.getProduct_Details()}&quot;&gt;\r\n                                    &lt;tr&gt;\r\n                                        &lt;td class=&quot;color&quot; data-color=&quot;${detailProduct.getProduct_Color().getColor_id()}&quot; &gt;${detailProduct.getProduct_Color().getColor_name()}&lt;/td&gt;\r\n                                        &lt;td class=&quot;quantity&quot; data-quantity=&quot;${detailProduct.getQuantity()}&quot; &gt;${detailProduct.getQuantity()}&lt;/td&gt;\r\n                                        &lt;td&gt;&lt;button id=&quot;product-button&quot; class=&quot;cart-btn&quot;&gt;shop now&lt;/button&gt;&lt;/td&gt;\r\n                                    &lt;/tr&gt;\r\n                                &lt;/c:forEach&gt;\r\n                                \r\n                            &lt;/tbody&gt;\r\n                        &lt;/table&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=&quot;col-sm-2 col-md-2&quot;&gt;\r\n                &lt;h5&gt;Description&lt;/h5&gt;\r\n                &lt;span&gt;${product.getDescription_product()}&lt;/span&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n\r\n\r\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.6.4.js&quot;&gt;&lt;/script&gt;\r\n    &lt;jsp:include page=&quot;footer.jsp&quot; /&gt;\r\n&lt;/body&gt;\r\n```","title":"to load resource: the server responded with a status of 401 ()","body":"<p>i have 1 error when i try to use html in jquery to add product quantity to cart but cant add even though click event is caught.when the click event is done, get the value in the APIController with Id &quot;cart-number&quot;, it cannot be called.when i work with ajax the console shows the error:failed to load resource: the server responded with a status of 401 ()\nanyone help?\nthis is my js code:</p>\n<pre><code>$(document).ready(function(){\n    $(&quot;.cart-btn&quot;).click(function(){\n        var color_id = $(this).closest(&quot;tr&quot;).find(&quot;.color&quot;).attr(&quot;data-color&quot;);\n        var color_name = $(this).closest(&quot;tr&quot;).find(&quot;.color&quot;).text();\n        var quantity = $(this).closest(&quot;tr&quot;).find(&quot;.quantity&quot;).text();\n        \n        var product_name = $(&quot;#detail-title&quot;).text();\n        var product_id = $(&quot;#detail-title&quot;).attr(&quot;data-Id&quot;);\n        var price = $(&quot;#detail-price&quot;).attr(&quot;data-value&quot;);\n        \n           $.ajax({\n            url:&quot;/PhoneAccessories/api/addtocart&quot;,\n            type:&quot;GET&quot;,\n            data:{\n                product_id:product_id,\n                color_id:color_id,\n                quantity:quantity,\n                product_name:product_name,\n                price:price,\n                color_name:color_name\n            },\n            success: function(value){\n                $(&quot;#cart-number&quot;).html(&quot;&lt;span&gt;&quot;+value+&quot;&lt;/span&gt;&quot;);\n            }\n        })\n    \n    });\n});\n</code></pre>\n<p>this is my APIController</p>\n<pre><code>@Controller\n    @RequestMapping(&quot;api/&quot;)\n    @SessionAttributes({&quot;email&quot;,&quot;cart&quot;})\n    public class APIController {\n        @Autowired\n        EmployeeService employeeService;\n        \n        @GetMapping(&quot;addtocart&quot;)\n        public String AddToCart(@RequestParam int product_id,@RequestParam int color_id,@RequestParam int quantity,@RequestParam String product_name,@RequestParam String price,@RequestParam String color_name,HttpSession httpSession) {\n            \n            if(httpSession.getAttribute(&quot;cart&quot;) == null) {\n                List&lt;ProductCart&gt; productCarts = new ArrayList&lt;ProductCart&gt;();\n                ProductCart carts = new ProductCart();\n                carts.setProduct_id(product_id);\n                carts.setColor_id(color_id);\n                carts.setQuantity(1);\n                carts.setProduct_name(product_name);\n                carts.setPrice(price);\n                carts.setColor_name(color_name);\n                productCarts.add(carts);\n                httpSession.setAttribute(&quot;cart&quot;, productCarts);\n                List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\n                return listCart.size()+ &quot;&quot;;\n            }else {\n                List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\n                int location = CheckProductAlreadyExists(product_id, color_id, httpSession);\n                if(location == -1) {\n                    \n                    ProductCart carts = new ProductCart();\n                    carts.setProduct_id(product_id);\n                    carts.setColor_id(color_id);\n                    carts.setQuantity(1);\n                    carts.setProduct_name(product_name);\n                    carts.setPrice(price);\n                    carts.setColor_name(color_name);\n                    listCart.add(carts);\n                }else {\n                    \n                    int newQuantity = listCart.get(location).getQuantity()+1;\n                    listCart.get(location).setQuantity(newQuantity);\n                }\n                return listCart.size() +&quot;&quot;;\n                \n            }\n            \n            \n        }\n        private int CheckProductAlreadyExists(int product_id,int color_id,HttpSession httpSession) {\n            List&lt;ProductCart&gt; listCart = (List&lt;ProductCart&gt;) httpSession.getAttribute(&quot;cart&quot;);\n            for(int i=0;i&lt;listCart.size();i++) {\n                if(listCart.get(i).getProduct_id()== product_id &amp;&amp; listCart.get(i).getColor_id() ==color_id ) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n</code></pre>\n<p>this is the jsp details page:</p>\n<pre><code>&lt;body&gt;\n    &lt;section id=&quot;detail-page&quot;&gt;\n\n        &lt;nav&gt;\n            &lt;div class=&quot;icons&quot;&gt;\n                &lt;i class=&quot;fa-solid fa-cart-shopping&quot;&gt;&lt;div id=&quot;cart-number&quot;&gt;&lt;span&gt;${NumberOfProduct}&lt;/span&gt;&lt;/div&gt;&lt;/i&gt; \n                &lt;c:choose&gt;\n                    &lt;c:when test=&quot;${fc != null}&quot;&gt;\n                        &lt;a id=&quot;first-char&quot; href=&quot;login/&quot;&gt; ${fc} &lt;/i&gt;&lt;/a&gt;\n                    &lt;/c:when&gt;\n                    &lt;c:otherwise&gt;\n                        &lt;a href=&quot;/PhoneAccessories/login/&quot;&gt;&lt;i class=&quot;fa-solid fa-user&quot;&gt;&lt;/i&gt;&lt;/a&gt;\n                    &lt;/c:otherwise&gt;\n                &lt;/c:choose&gt;\n\n            &lt;/div&gt;\n\n        &lt;/nav&gt;\n\n\n    &lt;/section&gt;\n    \n    &lt;!-- Detail Product --&gt;\n    \n    &lt;div id=&quot;container-detail&quot; class=&quot;container&quot;&gt;\n        &lt;div class=&quot;row&quot;&gt;\n            &lt;div id=&quot;product-category&quot; class=&quot;col-sm-2 col-md-2&quot;&gt;\n            \n            &lt;/div&gt;\n            \n            \n            &lt;div class=&quot;col-sm-8 col-md-8&quot;&gt;\n                &lt;div class=&quot;row&quot;&gt;\n                    &lt;div class=&quot;col-sm-5 col-md-5&quot;&gt;\n                        &lt;img id=&quot;image-detail&quot; src='&lt;c:url value=&quot;/resources/Image/products/${product.getProduct_image()}&quot;/&gt;' /&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;col-sm-7 col-md-7&quot;&gt;\n                        &lt;h4 id=&quot;detail-title&quot; data-Id=&quot;${product.getProduct_id()}&quot; &gt;${product.getProduct_name()}&lt;/h4&gt;\n                        &lt;h5 id=&quot;detail-price&quot; data-value=&quot;${product.getProduct_price()}&quot; &gt;${product.getProduct_price()}&lt;/h5&gt;\n                        &lt;table class=&quot;table&quot;&gt;\n                            &lt;thead&gt;\n                                &lt;tr&gt;\n                                    &lt;td&gt;Color&lt;/td&gt;\n                                    &lt;td&gt;Quantity&lt;/td&gt;\n                                &lt;/tr&gt;\n                            &lt;/thead&gt;\n                            &lt;tbody&gt;\n                                &lt;c:forEach var=&quot;detailProduct&quot; items=&quot;${product.getProduct_Details()}&quot;&gt;\n                                    &lt;tr&gt;\n                                        &lt;td class=&quot;color&quot; data-color=&quot;${detailProduct.getProduct_Color().getColor_id()}&quot; &gt;${detailProduct.getProduct_Color().getColor_name()}&lt;/td&gt;\n                                        &lt;td class=&quot;quantity&quot; data-quantity=&quot;${detailProduct.getQuantity()}&quot; &gt;${detailProduct.getQuantity()}&lt;/td&gt;\n                                        &lt;td&gt;&lt;button id=&quot;product-button&quot; class=&quot;cart-btn&quot;&gt;shop now&lt;/button&gt;&lt;/td&gt;\n                                    &lt;/tr&gt;\n                                &lt;/c:forEach&gt;\n                                \n                            &lt;/tbody&gt;\n                        &lt;/table&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;col-sm-2 col-md-2&quot;&gt;\n                &lt;h5&gt;Description&lt;/h5&gt;\n                &lt;span&gt;${product.getDescription_product()}&lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.6.4.js&quot;&gt;&lt;/script&gt;\n    &lt;jsp:include page=&quot;footer.jsp&quot; /&gt;\n&lt;/body&gt;\n</code></pre>\n"},{"tags":["java","android","text-to-speech"],"answers":[{"tags":[],"owner":{"account_id":15477225,"reputation":218,"user_id":11165594,"display_name":"Benjamin Hue"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1681570489,"creation_date":1554827981,"answer_id":55597492,"question_id":55596618,"body_markdown":"Try this out. Make sure to add a text input box and button in your xml layout\r\n````````````````````````````````````````````````````````````````````````````````````\r\nimport java.util.Locale;\r\nimport android.speech.tts.TextToSpeech;\r\n\r\npublic class TextToSpeech {\r\n\r\n    private EditText write;\r\n    private TextToSpeech t1;\r\n    private Button speakbtn;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_text_to_speech);\r\n\r\n        write = (EditText) findViewById(R.id.editText);\r\n        speakbtn = (Button) findViewById(R.id.board);\r\n\r\n        t1 = new TextToSpeech(getApplicationContext(), new TextToSpeech.OnInitListener() {\r\n            @Override\r\n            public void onInit(int status) {\r\n                if (status != TextToSpeech.ERROR) {\r\n                    t1.setLanguage(Locale.ENGLISH);\r\n                }\r\n            }\r\n        });\r\n        speakbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String toSpeak = write.getText().toString();\r\n                Toast.makeText(getApplicationContext(), toSpeak, Toast.LENGTH_SHORT).show();\r\n                t1.speak(toSpeak, TextToSpeech.QUEUE_FLUSH, null);\r\n            }\r\n        });\r\n    }\r\n    \r\n    @Override\r\n    public void onDestroy() {\r\n        // Dont forget to shut down text to speech\r\n        if (t1 != null) {\r\n            t1.stop();\r\n            t1.shutdown();\r\n        }\r\n        super.onDestroy();\r\n    }\r\n}","title":"Text-To-Speech in Android That Works Offline","body":"<p>Try this out. Make sure to add a text input box and button in your xml layout</p>\n<pre><code>import java.util.Locale;\nimport android.speech.tts.TextToSpeech;\n\npublic class TextToSpeech {\n\n    private EditText write;\n    private TextToSpeech t1;\n    private Button speakbtn;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_text_to_speech);\n\n        write = (EditText) findViewById(R.id.editText);\n        speakbtn = (Button) findViewById(R.id.board);\n\n        t1 = new TextToSpeech(getApplicationContext(), new TextToSpeech.OnInitListener() {\n            @Override\n            public void onInit(int status) {\n                if (status != TextToSpeech.ERROR) {\n                    t1.setLanguage(Locale.ENGLISH);\n                }\n            }\n        });\n        speakbtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String toSpeak = write.getText().toString();\n                Toast.makeText(getApplicationContext(), toSpeak, Toast.LENGTH_SHORT).show();\n                t1.speak(toSpeak, TextToSpeech.QUEUE_FLUSH, null);\n            }\n        });\n    }\n    \n    @Override\n    public void onDestroy() {\n        // Dont forget to shut down text to speech\n        if (t1 != null) {\n            t1.stop();\n            t1.shutdown();\n        }\n        super.onDestroy();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14454759,"reputation":63,"user_id":10441291,"display_name":"Ivan Goncharov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4835,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"closed_date":1554837112,"accepted_answer_id":55597492,"answer_count":1,"score":4,"last_activity_date":1681570489,"creation_date":1554824695,"question_id":55596618,"body_markdown":"My friend and I are developing an app that uses deep learning and neural nets to help visually impaired people. We&#39;re looking for a way to bring the information that the neural nets get via the smartphone&#39;s camera back to the user via voice, thus we need to do TextToSpeech. \r\n\r\nHowever, it&#39;s a HUGE, HUGE deal for the users to have the app work offline and as all the other parts of the app are capable of running with no Internet connection (neural nets etc.) we&#39;re looking for a way to do TextToSpeech offline. The app&#39;s also in Russian, so something that can support multiple languages would be great. \r\n\r\nWe&#39;d be SUPER grateful for any hints on where to start with offline TextToSpeech on Android in Android Studio, thanks!","title":"Text-To-Speech in Android That Works Offline","body":"<p>My friend and I are developing an app that uses deep learning and neural nets to help visually impaired people. We're looking for a way to bring the information that the neural nets get via the smartphone's camera back to the user via voice, thus we need to do TextToSpeech. </p>\n\n<p>However, it's a HUGE, HUGE deal for the users to have the app work offline and as all the other parts of the app are capable of running with no Internet connection (neural nets etc.) we're looking for a way to do TextToSpeech offline. The app's also in Russian, so something that can support multiple languages would be great. </p>\n\n<p>We'd be SUPER grateful for any hints on where to start with offline TextToSpeech on Android in Android Studio, thanks!</p>\n"},{"tags":["java","spring","spring-boot","aspectj","autowired"],"comments":[{"owner":{"account_id":11577219,"reputation":818,"user_id":8482133,"accept_rate":75,"display_name":"Kishor Velayutham"},"score":0,"creation_date":1518965736,"post_id":48852955,"comment_id":84709397,"body_markdown":"Please share your code?","body":"Please share your code?"},{"owner":{"account_id":6894566,"reputation":21,"user_id":5296977,"accept_rate":25,"display_name":"193michalll"},"score":0,"creation_date":1518968561,"post_id":48852955,"comment_id":84710301,"body_markdown":"I can&#39;t share whole code but tommorow I could sent code from this class. In Generally I added two autowired field to this aspect class and it&#39;s work but not when i run test for this class. This fields are null then. I don&#39;t even know how i can fix that in theory.","body":"I can&#39;t share whole code but tommorow I could sent code from this class. In Generally I added two autowired field to this aspect class and it&#39;s work but not when i run test for this class. This fields are null then. I don&#39;t even know how i can fix that in theory."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":2,"creation_date":1519001181,"post_id":48852955,"comment_id":84719855,"body_markdown":"You have already received 4 downvotes and 3 close votes, only 2 shy of the question being closed altogether. So please edit your question to be an [MCVE](http://stackoverflow.com/help/mcve). Extract a small, executeable sample from your code base, reproducing the problem, including configuration. This is how StackOverflow works. It is about concrete programming problems and their solutions. People around here tend to be programmers like you, not mediums. With the kind of info you provide only a medium could find out what might be your problem. Sorry, man.","body":"You have already received 4 downvotes and 3 close votes, only 2 shy of the question being closed altogether. So please edit your question to be an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>. Extract a small, executeable sample from your code base, reproducing the problem, including configuration. This is how StackOverflow works. It is about concrete programming problems and their solutions. People around here tend to be programmers like you, not mediums. With the kind of info you provide only a medium could find out what might be your problem. Sorry, man."}],"answers":[{"tags":[],"owner":{"account_id":229930,"reputation":1278,"user_id":493216,"accept_rate":50,"display_name":"BigGinDaHouse"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1519025355,"creation_date":1519025355,"answer_id":48861322,"question_id":48852955,"body_markdown":"well, having in mind the fact that your question is not clear at all, here are some options that you could potentially miss in your test code:\r\n\r\n1. You are not mocking them or mocking them but not injecting\r\n2. You are not using injections in your test code at all\r\n\r\n\r\n**P.S. please read and understand more about dependency injection (@Autowired) of Spring Boot applications**","title":"Autowired fields in aspect class are null in test mode","body":"<p>well, having in mind the fact that your question is not clear at all, here are some options that you could potentially miss in your test code:</p>\n\n<ol>\n<li>You are not mocking them or mocking them but not injecting</li>\n<li>You are not using injections in your test code at all</li>\n</ol>\n\n<p><strong>P.S. please read and understand more about dependency injection (@Autowired) of Spring Boot applications</strong></p>\n"}],"owner":{"account_id":6894566,"reputation":21,"user_id":5296977,"accept_rate":25,"display_name":"193michalll"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":1,"score":-3,"last_activity_date":1681570437,"creation_date":1518965349,"question_id":48852955,"body_markdown":"I use Spring boot and in my aspect class I have two fields which have @Autowired annotation. When I run code then it works fine, but when I run test for this class then these two autowired fields are null.\r\n\r\nCan someone tell what I need to do to fix that? I&#39;m sorry for lack of code but today I don&#39;t have access to this.\r\n\r\n---------------------\r\n\r\nexample (from another [SO question][1]):\r\n\r\nUnit test:\r\n\r\n \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class CompanyServiceImplTest {\r\n        @Test\r\n        public void createCampaignTest() throws Exception {\r\n            when(companyDaoMock.saveCompany(any(Campaign.class))).thenReturn(77L);\r\n    \r\n            Long campaignId = companyService.createCampaign(campaignMock);\r\n    \r\n            assertEquals(Long.valueOf(77L), Long.valueOf(campaignId));\r\n        }\r\n    }\r\n\r\nService method:\r\n\r\n    @Override\r\n    @Transactional\r\n    @EventJournal(type = EventType.CAMPAIGN_CREATE, owner = EventOwner.TERMINAL_USER)\r\n    public Long createCampaign(Campaign campaign) {\r\n        return companyDao.saveCompany(campaign);\r\n    }\r\n\r\nAspect:\r\n\r\n    @Aspect\r\n    public class EventJournalAspect {\r\n    \r\n        @Autowired\r\n        private EventJournalService eventJournalService;\r\n    \r\n        @Pointcut(value=&quot;execution(public * *(..))&quot;)\r\n        public void anyPublicMethod() {}\r\n    \r\n        @Pointcut(&quot;within(com.terminal.service..*)&quot;)\r\n        private void inService() {}\r\n    \r\n    \t@AfterReturning(pointcut = &quot;anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, returning = &quot;id&quot;)\r\n    \tpublic void process(Object id, EventJournal eventJournal, AbstractDomainEntity entity)\r\n    \t\t\tthrows Throwable {\r\n    \t\tif (eventJournal.type() != EventType.CAMPAIGN_PAYMENT || id != null) {\r\n    \t\t\tsaveEvent(eventJournal, EventStatus.SUCCESS, entity, (Long) id);\r\n    \t\t}\r\n    \t}\r\n    \r\n        @AfterThrowing(pointcut = &quot;anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, throwing=&quot;ex&quot;)\r\n        public void processException(EventJournal eventJournal, AbstractDomainEntity entity, Exception ex) throws Throwable {\r\n            saveEvent(eventJournal, EventStatus.FAILURE, entity, null);\r\n        }\r\n    \r\n        private void saveEvent(EventJournal eventJournal, EventStatus status, AbstractDomainEntity entity, Long persistentId)   {\r\n            EventType type = eventJournal.type();\r\n            EventOwner owner = eventJournal.owner();\r\n            eventJournalService.saveEvent(type, owner, EventStatus.SUCCESS, entity, persistentId);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nWhen test executes - `eventJournalService` is null. Thus I see `NullPointerException`\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7433658/disabling-certain-aspects-during-unit-test-runs","title":"Autowired fields in aspect class are null in test mode","body":"<p>I use Spring boot and in my aspect class I have two fields which have @Autowired annotation. When I run code then it works fine, but when I run test for this class then these two autowired fields are null.</p>\n<p>Can someone tell what I need to do to fix that? I'm sorry for lack of code but today I don't have access to this.</p>\n<hr />\n<p>example (from another <a href=\"https://stackoverflow.com/questions/7433658/disabling-certain-aspects-during-unit-test-runs\">SO question</a>):</p>\n<p>Unit test:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class CompanyServiceImplTest {\n    @Test\n    public void createCampaignTest() throws Exception {\n        when(companyDaoMock.saveCompany(any(Campaign.class))).thenReturn(77L);\n\n        Long campaignId = companyService.createCampaign(campaignMock);\n\n        assertEquals(Long.valueOf(77L), Long.valueOf(campaignId));\n    }\n}\n</code></pre>\n<p>Service method:</p>\n<pre><code>@Override\n@Transactional\n@EventJournal(type = EventType.CAMPAIGN_CREATE, owner = EventOwner.TERMINAL_USER)\npublic Long createCampaign(Campaign campaign) {\n    return companyDao.saveCompany(campaign);\n}\n</code></pre>\n<p>Aspect:</p>\n<pre><code>@Aspect\npublic class EventJournalAspect {\n\n    @Autowired\n    private EventJournalService eventJournalService;\n\n    @Pointcut(value=&quot;execution(public * *(..))&quot;)\n    public void anyPublicMethod() {}\n\n    @Pointcut(&quot;within(com.terminal.service..*)&quot;)\n    private void inService() {}\n\n    @AfterReturning(pointcut = &quot;anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, returning = &quot;id&quot;)\n    public void process(Object id, EventJournal eventJournal, AbstractDomainEntity entity)\n            throws Throwable {\n        if (eventJournal.type() != EventType.CAMPAIGN_PAYMENT || id != null) {\n            saveEvent(eventJournal, EventStatus.SUCCESS, entity, (Long) id);\n        }\n    }\n\n    @AfterThrowing(pointcut = &quot;anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, throwing=&quot;ex&quot;)\n    public void processException(EventJournal eventJournal, AbstractDomainEntity entity, Exception ex) throws Throwable {\n        saveEvent(eventJournal, EventStatus.FAILURE, entity, null);\n    }\n\n    private void saveEvent(EventJournal eventJournal, EventStatus status, AbstractDomainEntity entity, Long persistentId)   {\n        EventType type = eventJournal.type();\n        EventOwner owner = eventJournal.owner();\n        eventJournalService.saveEvent(type, owner, EventStatus.SUCCESS, entity, persistentId);\n    }\n\n}\n</code></pre>\n<p>When test executes - <code>eventJournalService</code> is null. Thus I see <code>NullPointerException</code></p>\n"},{"tags":["java","spring","repository"],"comments":[{"owner":{"account_id":2311235,"reputation":2373,"user_id":2029323,"accept_rate":88,"display_name":"veinhorn"},"score":0,"creation_date":1555190911,"post_id":24074150,"comment_id":98026298,"body_markdown":"you can also check https://github.com/VEINHORN/spring-data-sqlfile library if you want load SQL queries from resources.","body":"you can also check <a href=\"https://github.com/VEINHORN/spring-data-sqlfile\" rel=\"nofollow noreferrer\">github.com/VEINHORN/spring-data-sqlfile</a> library if you want load SQL queries from resources."}],"answers":[{"tags":[],"owner":{"account_id":4328396,"reputation":699,"user_id":3534522,"display_name":"Fernando Rincon"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1681570384,"creation_date":1402029624,"answer_id":24074282,"question_id":24074150,"body_markdown":"You can use JPA Named Query. You need to put the query in the orm.xml file like this:\r\n\r\n\r\n     &lt;named-query name=&quot;User.findByLastname&quot;&gt;\r\n        &lt;query&gt;select u from User u where u.lastname = ?1&lt;/query&gt;\r\n     &lt;/named-query&gt;\r\n\r\nFor example and then you just need to declare the method findByLastname in your repository class:\r\n\r\n    public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n      List&lt;User&gt; findByLastname(String lastname);   \r\n    }\r\n\r\nYou can see the documentation in [Spring Data Documentation][1] or for 2023 version of dependency have a look at [Spring Data JPA 3.0.3 Documentation][2].\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-data/jpa/docs/1.6.0.RELEASE/reference/html/jpa.repositories.html#jpa.query-methods.named-queries\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/3.0.3/reference/html/#jpa.query-methods.named-queries","title":"How to read a query from a resource with Spring?","body":"<p>You can use JPA Named Query. You need to put the query in the orm.xml file like this:</p>\n<pre><code> &lt;named-query name=&quot;User.findByLastname&quot;&gt;\n    &lt;query&gt;select u from User u where u.lastname = ?1&lt;/query&gt;\n &lt;/named-query&gt;\n</code></pre>\n<p>For example and then you just need to declare the method findByLastname in your repository class:</p>\n<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n  List&lt;User&gt; findByLastname(String lastname);   \n}\n</code></pre>\n<p>You can see the documentation in <a href=\"http://docs.spring.io/spring-data/jpa/docs/1.6.0.RELEASE/reference/html/jpa.repositories.html#jpa.query-methods.named-queries\" rel=\"nofollow noreferrer\">Spring Data Documentation</a> or for 2023 version of dependency have a look at <a href=\"https://docs.spring.io/spring-data/jpa/docs/3.0.3/reference/html/#jpa.query-methods.named-queries\" rel=\"nofollow noreferrer\">Spring Data JPA 3.0.3 Documentation</a>.</p>\n"}],"owner":{"account_id":150404,"reputation":42099,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1304,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":24074282,"answer_count":1,"score":3,"last_activity_date":1681570384,"creation_date":1402028846,"question_id":24074150,"body_markdown":"Here is my repository:\r\n\r\n    public interface MyObjectRepository extends CrudRepository&lt;MyObject, Long&gt; {\r\n\r\n        @Query(&quot;&lt;a-complex-query&gt;&quot;)\r\n        List&lt;MyObject&gt; doBusinessSpecificComplexQuery();\r\n\r\n    }\r\n\r\nI can type directly my complex query in the `@Query` annotation but the code loose its readability.\r\n\r\nI would like to do something like below instead:\r\n\r\n    public interface MyObjectRepository extends CrudRepository&lt;MyObject, Long&gt; {\r\n\r\n        @Query(load(&quot;classpath:my-complex-query.sql&quot;))\r\n        List&lt;MyObject&gt; doBusinessSpecificComplexQuery();\r\n\r\n    }\r\n\r\nThis won&#39;t work since `@Query` value parameter expects a constant value.\r\n\r\nHow can I read my complex query from a resource ?","title":"How to read a query from a resource with Spring?","body":"<p>Here is my repository:</p>\n\n<pre><code>public interface MyObjectRepository extends CrudRepository&lt;MyObject, Long&gt; {\n\n    @Query(\"&lt;a-complex-query&gt;\")\n    List&lt;MyObject&gt; doBusinessSpecificComplexQuery();\n\n}\n</code></pre>\n\n<p>I can type directly my complex query in the <code>@Query</code> annotation but the code loose its readability.</p>\n\n<p>I would like to do something like below instead:</p>\n\n<pre><code>public interface MyObjectRepository extends CrudRepository&lt;MyObject, Long&gt; {\n\n    @Query(load(\"classpath:my-complex-query.sql\"))\n    List&lt;MyObject&gt; doBusinessSpecificComplexQuery();\n\n}\n</code></pre>\n\n<p>This won't work since <code>@Query</code> value parameter expects a constant value.</p>\n\n<p>How can I read my complex query from a resource ?</p>\n"},{"tags":["java","jvm"],"answers":[{"tags":[],"owner":{"account_id":1429320,"reputation":2884,"user_id":1352098,"display_name":"Ivan Mamontov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1523590545,"creation_date":1523337389,"answer_id":49745810,"question_id":49744966,"body_markdown":"You can use JVM output(via `-XX:+PrintFlagsFinal`) in order to check oop compression \r\n\r\n    java -Xmx32766m -XX:+PrintFlagsFinal 2&gt; /dev/null | grep UseCompressedOops\r\n         bool UseCompressedOops                        := true                                {lp64_product} \r\n\r\nfor heaps larger than `32767m` JVM disables compressed oops:\r\n\r\n    java -Xmx32767m -XX:+PrintFlagsFinal 2&gt; /dev/null | grep UseCompressedOops\r\n         bool UseCompressedOops                         = false                               {lp64_product}\r\n\r\nAnother option is to use diagostic vm options:\r\n\r\n    java -XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode -version\r\n\r\nwhich returns detailed information about oops mode:\r\n\r\n    heap address: 0x0000000082600000, size: 2010 MB, Compressed Oops mode: 32-bit\r\n    Narrow klass base: 0x0000000000000000, Narrow klass shift: 3\r\n    Compressed class space size: 1073741824 Address: 0x0000000100000000 Req Addr: 0x0000000100000000\r\n\r\nAnd the most advanced way is to use [HotSpot Serviceability Agent][1] which allows to check more information about JVM internals:\r\n\r\n    import sun.jvm.hotspot.runtime.VM;\r\n    import sun.jvm.hotspot.tools.Tool;\r\n    \r\n    public class OopsChecker extends Tool {\r\n    \r\n        @Override\r\n        public void run() {\r\n            VM vm = VM.getVM();\r\n            System.out.println(&quot;CompressedOops = &quot; + vm.isCompressedOopsEnabled());\r\n            System.out.println(&quot;CompressedClassPointers = &quot; + vm.isCompressedKlassPointersEnabled());\r\n            System.out.println(&quot;OOP base = 0x&quot; + Long.toHexString(vm.getDebugger().getNarrowOopBase()));\r\n            System.out.println(&quot;OOP shift = &quot; + vm.getDebugger().getNarrowOopShift());\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            new OopsChecker().execute(args);\r\n        }\r\n    }\r\n\r\nYou can play with heap size parameters and check output. The Java classes for SA are placed in `jdk/lib/sa-jdi.jar` so you have to add this jar into your classpath.\r\n\r\n  [1]: http://openjdk.java.net/groups/hotspot/docs/Serviceability.html","title":"Can i find out if the ordinary object pointer is compressed in my current jdk","body":"<p>You can use JVM output(via <code>-XX:+PrintFlagsFinal</code>) in order to check oop compression </p>\n\n<pre><code>java -Xmx32766m -XX:+PrintFlagsFinal 2&gt; /dev/null | grep UseCompressedOops\n     bool UseCompressedOops                        := true                                {lp64_product} \n</code></pre>\n\n<p>for heaps larger than <code>32767m</code> JVM disables compressed oops:</p>\n\n<pre><code>java -Xmx32767m -XX:+PrintFlagsFinal 2&gt; /dev/null | grep UseCompressedOops\n     bool UseCompressedOops                         = false                               {lp64_product}\n</code></pre>\n\n<p>Another option is to use diagostic vm options:</p>\n\n<pre><code>java -XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode -version\n</code></pre>\n\n<p>which returns detailed information about oops mode:</p>\n\n<pre><code>heap address: 0x0000000082600000, size: 2010 MB, Compressed Oops mode: 32-bit\nNarrow klass base: 0x0000000000000000, Narrow klass shift: 3\nCompressed class space size: 1073741824 Address: 0x0000000100000000 Req Addr: 0x0000000100000000\n</code></pre>\n\n<p>And the most advanced way is to use <a href=\"http://openjdk.java.net/groups/hotspot/docs/Serviceability.html\" rel=\"nofollow noreferrer\">HotSpot Serviceability Agent</a> which allows to check more information about JVM internals:</p>\n\n<pre><code>import sun.jvm.hotspot.runtime.VM;\nimport sun.jvm.hotspot.tools.Tool;\n\npublic class OopsChecker extends Tool {\n\n    @Override\n    public void run() {\n        VM vm = VM.getVM();\n        System.out.println(\"CompressedOops = \" + vm.isCompressedOopsEnabled());\n        System.out.println(\"CompressedClassPointers = \" + vm.isCompressedKlassPointersEnabled());\n        System.out.println(\"OOP base = 0x\" + Long.toHexString(vm.getDebugger().getNarrowOopBase()));\n        System.out.println(\"OOP shift = \" + vm.getDebugger().getNarrowOopShift());\n    }\n\n    public static void main(String[] args) {\n        new OopsChecker().execute(args);\n    }\n}\n</code></pre>\n\n<p>You can play with heap size parameters and check output. The Java classes for SA are placed in <code>jdk/lib/sa-jdi.jar</code> so you have to add this jar into your classpath.</p>\n"}],"owner":{"account_id":5201756,"reputation":1971,"user_id":4160889,"accept_rate":74,"display_name":"ForeverLearner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":413,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49745810,"answer_count":1,"score":1,"last_activity_date":1681569532,"creation_date":1523331970,"question_id":49744966,"body_markdown":"I have the below version of jdk currently running:\r\n\r\n    openjdk version &quot;1.8.0_144&quot;\r\n    OpenJDK Runtime Environment (build 1.8.0_144-b01)\r\n    OpenJDK 64-Bit Server VM (build 25.144-b01, mixed mode)\r\n\r\nIs there way to verify if oop compression is supported by this jdk? I am still learning, so please excuse if this sounds very basic.","title":"Can i find out if the ordinary object pointer is compressed in my current jdk","body":"<p>I have the below version of jdk currently running:</p>\n\n<pre><code>openjdk version \"1.8.0_144\"\nOpenJDK Runtime Environment (build 1.8.0_144-b01)\nOpenJDK 64-Bit Server VM (build 25.144-b01, mixed mode)\n</code></pre>\n\n<p>Is there way to verify if oop compression is supported by this jdk? I am still learning, so please excuse if this sounds very basic.</p>\n"},{"tags":["java","elasticsearch","garbage-collection","jvm","heap-memory"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1507281831,"post_id":46597668,"comment_id":80156720,"body_markdown":"Note that the heap doesn’t start at zero in both cases. But in the first case, the sum of start address and heap size is below the 32GiB threshold, which allows zero based addressing. But why is this question tagged with “garbage-collection”?","body":"Note that the heap doesn’t start at zero in both cases. But in the first case, the sum of start address and heap size is below the 32GiB threshold, which allows zero based addressing. But why is this question tagged with “garbage-collection”?"},{"owner":{"account_id":1429320,"reputation":2884,"user_id":1352098,"display_name":"Ivan Mamontov"},"score":0,"creation_date":1507347916,"post_id":46597668,"comment_id":80184578,"body_markdown":"Please provide information about your OS and ES version, if my answer did not help you.","body":"Please provide information about your OS and ES version, if my answer did not help you."},{"owner":{"account_id":1267331,"reputation":2620,"user_id":1224363,"accept_rate":87,"display_name":"Chris Bedford"},"score":0,"creation_date":1507410351,"post_id":46597668,"comment_id":80200691,"body_markdown":"Wow.. great answers. I will review and try out the suggestions tomorrow.  In response to  @Holger - reason for the tag garbage collection is cause we are trying to optimize the setting of our heap size in addition to other garbage collection related tweaks.. thought this topic is relevant for any one else tuning GC.  /thnx","body":"Wow.. great answers. I will review and try out the suggestions tomorrow.  In response to  @Holger - reason for the tag garbage collection is cause we are trying to optimize the setting of our heap size in addition to other garbage collection related tweaks.. thought this topic is relevant for any one else tuning GC.  /thnx"}],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1507274398,"creation_date":1507274398,"answer_id":46600331,"question_id":46597668,"body_markdown":"[HotSpot Serviceability Agent](http://www.javamagazine.mozaicreader.com/JanFeb2017#&amp;pageSet=31&amp;page=0&amp;contentItem=0) can show this on a running JVM process even with no extra command-line flags required.\r\n\r\nRun the following program with the target Java process ID as an argument.\r\n\r\n    import sun.jvm.hotspot.runtime.VM;\r\n    import sun.jvm.hotspot.tools.Tool;\r\n    \r\n    public class CompressedOopsInfo extends Tool {\r\n    \r\n        @Override\r\n        public void run() {\r\n            VM vm = VM.getVM();\r\n            System.out.println(&quot;CompressedOops = &quot; + vm.isCompressedOopsEnabled());\r\n            System.out.println(&quot;CompressedClassPointers = &quot; + vm.isCompressedKlassPointersEnabled());\r\n            System.out.println(&quot;OOP base = 0x&quot; + Long.toHexString(vm.getDebugger().getNarrowOopBase()));\r\n            System.out.println(&quot;OOP shift = &quot; + vm.getDebugger().getNarrowOopShift());\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            new CompressedOopsInfo().execute(args);\r\n        }\r\n    }\r\n\r\nPrior to JDK 9 this requires including `${JDK_HOME}/lib/sa-jdi.jar` in the classpath. The program needs to run under the same JVM version as used to run the target process.","title":"how to determine if Java heap is using compressed pointers and whether or not resides at address 0 in memory?","body":"<p><a href=\"http://www.javamagazine.mozaicreader.com/JanFeb2017#&amp;pageSet=31&amp;page=0&amp;contentItem=0\" rel=\"nofollow noreferrer\">HotSpot Serviceability Agent</a> can show this on a running JVM process even with no extra command-line flags required.</p>\n\n<p>Run the following program with the target Java process ID as an argument.</p>\n\n<pre><code>import sun.jvm.hotspot.runtime.VM;\nimport sun.jvm.hotspot.tools.Tool;\n\npublic class CompressedOopsInfo extends Tool {\n\n    @Override\n    public void run() {\n        VM vm = VM.getVM();\n        System.out.println(\"CompressedOops = \" + vm.isCompressedOopsEnabled());\n        System.out.println(\"CompressedClassPointers = \" + vm.isCompressedKlassPointersEnabled());\n        System.out.println(\"OOP base = 0x\" + Long.toHexString(vm.getDebugger().getNarrowOopBase()));\n        System.out.println(\"OOP shift = \" + vm.getDebugger().getNarrowOopShift());\n    }\n\n    public static void main(String[] args) {\n        new CompressedOopsInfo().execute(args);\n    }\n}\n</code></pre>\n\n<p>Prior to JDK 9 this requires including <code>${JDK_HOME}/lib/sa-jdi.jar</code> in the classpath. The program needs to run under the same JVM version as used to run the target process.</p>\n"},{"tags":[],"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1507314067,"creation_date":1507314067,"answer_id":46611774,"question_id":46597668,"body_markdown":"&gt; However, when I tried those options and grep&#39;d through my application&#39;s (Elastic Search&#39;s) log directory I could find no such messages.\r\n\r\nProbably because it only logs application messages to that directory. You need to log JVM output to a file too or inspect stdout or stderr for those messages.","title":"how to determine if Java heap is using compressed pointers and whether or not resides at address 0 in memory?","body":"<blockquote>\n  <p>However, when I tried those options and grep'd through my application's (Elastic Search's) log directory I could find no such messages.</p>\n</blockquote>\n\n<p>Probably because it only logs application messages to that directory. You need to log JVM output to a file too or inspect stdout or stderr for those messages.</p>\n"},{"tags":[],"owner":{"account_id":1429320,"reputation":2884,"user_id":1352098,"display_name":"Ivan Mamontov"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1507432972,"creation_date":1507347178,"answer_id":46616407,"question_id":46597668,"body_markdown":"Assume you are using Linux and ES with version 5.x and higher.\r\n\r\nThe most efficient way to gather information across the whole cluster is to use [the nodes info API][1]:\r\n\r\n&gt; curl -XGET\r\n&gt; &quot;http://localhost:9200/_nodes/jvm?filter_path=nodes.*.jvm.using_compressed_ordinary_object_pointers&quot;\r\n&gt; \r\n&gt; {&quot;nodes&quot;:{&quot;-jYDCxbpT2SBKc4dTfOYsA&quot;:{&quot;jvm&quot;:{&quot;using_compressed_ordinary_object_pointers&quot;:&quot;true&quot;}}}}\r\n\r\nThe same information is logged into the main log - /var/log/elasticsearch/elasticsearch.log\r\n\r\n&gt; [2017-10-06T23:03:15,223][INFO ][o.e.e.NodeEnvironment    ] [-jYDCxb]\r\n&gt; heap size [1.9gb], compressed ordinary object pointers [true]\r\n\r\nIf you are interested in the real JVM output then you have to know that by default JVM writes it&#39;s messages into standard output and on Linux distributions this output by default is configured to redirect to journalctl. So you have two choices. The first one is to read the journalctl:\r\n\r\n&gt; sudo journalctl -u elasticsearch.service \r\n&gt;\r\n&gt; Narrow klass base: 0x0000000000000000, Narrow klass shift: 3\r\n&gt; Compressed class space size: 1073741824 Address: 0x0000000100000000 Req Addr: 0x0000000100000000\r\n\r\nBut sometimes journalctl disabled by default and you have to change this setting in the daemon config `/usr/lib/systemd/system/elasticsearch.service` by removing `--quite` parameter from ES command line parameters. The second approach is the simplest and cross platform - redirect JVM message to particular GC log output:\r\n\r\n&gt; -XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode -Xloggc:/tmp/vm.log\r\n\r\nNow you can see all GC related output in `/tmp/vm.log`\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html","title":"how to determine if Java heap is using compressed pointers and whether or not resides at address 0 in memory?","body":"<p>Assume you are using Linux and ES with version 5.x and higher.</p>\n\n<p>The most efficient way to gather information across the whole cluster is to use <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html\" rel=\"noreferrer\">the nodes info API</a>:</p>\n\n<blockquote>\n  <p>curl -XGET\n  \"<a href=\"http://localhost:9200/_nodes/jvm?filter_path=nodes\" rel=\"noreferrer\">http://localhost:9200/_nodes/jvm?filter_path=nodes</a>.*.jvm.using_compressed_ordinary_object_pointers\"</p>\n  \n  <p>{\"nodes\":{\"-jYDCxbpT2SBKc4dTfOYsA\":{\"jvm\":{\"using_compressed_ordinary_object_pointers\":\"true\"}}}}</p>\n</blockquote>\n\n<p>The same information is logged into the main log - /var/log/elasticsearch/elasticsearch.log</p>\n\n<blockquote>\n  <p>[2017-10-06T23:03:15,223][INFO ][o.e.e.NodeEnvironment    ] [-jYDCxb]\n  heap size [1.9gb], compressed ordinary object pointers [true]</p>\n</blockquote>\n\n<p>If you are interested in the real JVM output then you have to know that by default JVM writes it's messages into standard output and on Linux distributions this output by default is configured to redirect to journalctl. So you have two choices. The first one is to read the journalctl:</p>\n\n<blockquote>\n  <p>sudo journalctl -u elasticsearch.service </p>\n  \n  <p>Narrow klass base: 0x0000000000000000, Narrow klass shift: 3\n  Compressed class space size: 1073741824 Address: 0x0000000100000000 Req Addr: 0x0000000100000000</p>\n</blockquote>\n\n<p>But sometimes journalctl disabled by default and you have to change this setting in the daemon config <code>/usr/lib/systemd/system/elasticsearch.service</code> by removing <code>--quite</code> parameter from ES command line parameters. The second approach is the simplest and cross platform - redirect JVM message to particular GC log output:</p>\n\n<blockquote>\n  <p>-XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode -Xloggc:/tmp/vm.log</p>\n</blockquote>\n\n<p>Now you can see all GC related output in <code>/tmp/vm.log</code></p>\n"},{"tags":[],"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681569484,"creation_date":1681569484,"answer_id":76022907,"question_id":46597668,"body_markdown":"    boolean compressedOopsEnabled = Boolean.parseBoolean(java.lang.management.ManagementFactory\r\n\t\t.getPlatformMXBean(com.sun.management.HotSpotDiagnosticMXBean.class)\r\n\t\t.getVMOption(&quot;UseCompressedOops&quot;).getValue());","title":"how to determine if Java heap is using compressed pointers and whether or not resides at address 0 in memory?","body":"<pre><code>boolean compressedOopsEnabled = Boolean.parseBoolean(java.lang.management.ManagementFactory\n    .getPlatformMXBean(com.sun.management.HotSpotDiagnosticMXBean.class)\n    .getVMOption(&quot;UseCompressedOops&quot;).getValue());\n</code></pre>\n"}],"owner":{"account_id":1267331,"reputation":2620,"user_id":1224363,"accept_rate":87,"display_name":"Chris Bedford"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2675,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":46600331,"answer_count":4,"score":5,"last_activity_date":1681569484,"creation_date":1507259125,"question_id":46597668,"body_markdown":"I am trying to follow up on some tips in this blog https://www.elastic.co/blog/a-heap-of-trouble#ref5 which discusses the benefits of sizing one&#39;s Java heap so that (a) compressed pointers can be used (for heaps under 32GB) and (b) so that the heap resides at address 0 in memory.  The article details how compressed pointers allow more efficient  use of heap space, and explains that when the heap lives at address zero this  reduces the amount of arithmetic necessary to resolve pointer addresses.    Finally, the article says that if I use JVM options `-XX:+UnlockDiagnosticVMOptions` -`XX:+PrintCompressedOopsMode` I will see log output either like this:  \r\n\r\n` heap address: 0x000000011be00000, size: 27648 MB, zero based Compressed Oops  \r\n`\r\n\r\n which indicates zero-based compressed oops are enabled, or output like this\r\n\r\n`heap address: 0x0000000118400000, size: 28672 MB, Compressed Oops with base: 0x00000001183ff000\r\n`\r\n\r\n Which indicates that the heap begins at an address other than zero, therefore requiring the aforementioned increase amount of arithmetic processing.  \r\n\r\nHowever, when I tried those options and grep&#39;d through my application&#39;s (Elastic Search&#39;s) log directory I could find no such messages. If anyone could advise me on how I can force details of zero-based (or not zero based) compressed pointers to be logged I&#39;d be very grateful.\r\n\r\n\r\nRESOLUTION: \r\n\r\ngreat answers !.. I accepted @apangin&#39;s and I wrapped the java program he provided in a shell script that can run as long as you have java.. which you should if you are looking at Java heap!  here is the script: https://github.com/buildlackey/scripts/blob/master/verify_compressed_pointers_from_zero_offset.sh\r\n","title":"how to determine if Java heap is using compressed pointers and whether or not resides at address 0 in memory?","body":"<p>I am trying to follow up on some tips in this blog <a href=\"https://www.elastic.co/blog/a-heap-of-trouble#ref5\" rel=\"nofollow noreferrer\">https://www.elastic.co/blog/a-heap-of-trouble#ref5</a> which discusses the benefits of sizing one's Java heap so that (a) compressed pointers can be used (for heaps under 32GB) and (b) so that the heap resides at address 0 in memory.  The article details how compressed pointers allow more efficient  use of heap space, and explains that when the heap lives at address zero this  reduces the amount of arithmetic necessary to resolve pointer addresses.    Finally, the article says that if I use JVM options <code>-XX:+UnlockDiagnosticVMOptions</code> -<code>XX:+PrintCompressedOopsMode</code> I will see log output either like this:  </p>\n\n<p><code>heap address: 0x000000011be00000, size: 27648 MB, zero based Compressed Oops\n</code></p>\n\n<p>which indicates zero-based compressed oops are enabled, or output like this</p>\n\n<p><code>heap address: 0x0000000118400000, size: 28672 MB, Compressed Oops with base: 0x00000001183ff000\n</code></p>\n\n<p>Which indicates that the heap begins at an address other than zero, therefore requiring the aforementioned increase amount of arithmetic processing.  </p>\n\n<p>However, when I tried those options and grep'd through my application's (Elastic Search's) log directory I could find no such messages. If anyone could advise me on how I can force details of zero-based (or not zero based) compressed pointers to be logged I'd be very grateful.</p>\n\n<p>RESOLUTION: </p>\n\n<p>great answers !.. I accepted @apangin's and I wrapped the java program he provided in a shell script that can run as long as you have java.. which you should if you are looking at Java heap!  here is the script: <a href=\"https://github.com/buildlackey/scripts/blob/master/verify_compressed_pointers_from_zero_offset.sh\" rel=\"nofollow noreferrer\">https://github.com/buildlackey/scripts/blob/master/verify_compressed_pointers_from_zero_offset.sh</a></p>\n"},{"tags":["java","jpa","eclipselink"],"comments":[{"owner":{"account_id":2005516,"reputation":17831,"user_id":1795530,"accept_rate":100,"display_name":"dic19"},"score":3,"creation_date":1411739015,"post_id":26060940,"comment_id":40829144,"body_markdown":"Are both table records being inserted? OTOH if I was persist an instance of a subclass then I&#39;d expect the `@PrePersist` method of this subclass be called but not the superclass&#39;. After all the subclass is a full entity that will be persisted into two tables but still a single object.","body":"Are both table records being inserted? OTOH if I was persist an instance of a subclass then I&#39;d expect the <code>@PrePersist</code> method of this subclass be called but not the superclass&#39;. After all the subclass is a full entity that will be persisted into two tables but still a single object."},{"owner":{"account_id":2277593,"reputation":484,"user_id":2003481,"accept_rate":69,"display_name":"kraken"},"score":0,"creation_date":1411747702,"post_id":26060940,"comment_id":40834588,"body_markdown":"I have a date field in my parent class, and i want set current time on create a new record in database","body":"I have a date field in my parent class, and i want set current time on create a new record in database"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1412000271,"post_id":26060940,"comment_id":40904276,"body_markdown":"Does it work if you use joined inheritance instead?","body":"Does it work if you use joined inheritance instead?"},{"owner":{"account_id":2277593,"reputation":484,"user_id":2003481,"accept_rate":69,"display_name":"kraken"},"score":0,"creation_date":1412055621,"post_id":26060940,"comment_id":40924970,"body_markdown":"Yes. It works when i use joined inheritance type. I&#39;ve created a test repo https://github.com/SunPj/eclipselink-h2-jpa/tree/master","body":"Yes. It works when i use joined inheritance type. I&#39;ve created a test repo <a href=\"https://github.com/SunPj/eclipselink-h2-jpa/tree/master\" rel=\"nofollow noreferrer\">github.com/SunPj/eclipselink-h2-jpa/tree/master</a>"}],"answers":[{"tags":[],"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1411754850,"creation_date":1411745009,"answer_id":26063003,"question_id":26060940,"body_markdown":"The Book Mastering the Java persistence API notes the following:\r\n\r\n&gt; Inheriting Callback Methods\r\n&gt; \r\n&gt; Callback methods may occur on any entity or mapped superclass, be it\r\n&gt; abstract or concrete. The rule is fairly simple. **It is that every\r\n&gt; callback method for a given event type will be invoked in the order\r\naccording to its place in the hierarchy, most general classes first.**\r\n&gt; Thus, if in our Employee hierarchy that we saw in Figure 10-10 the\r\n&gt; Employee class contains a PrePersist callback method named\r\n&gt; checkName(), and FullTimeEmployee also contains a PrePersist callback\r\n&gt; method named verifyPension(), when the PrePersist event occurs, the\r\n&gt; checkName() method will get invoked, followed by the verifyPension()\r\n&gt; method.\r\n\r\nTherefore if everything else in your original code was correct you should expect to see both onCreateOne() and onCreateTwo() called and in that order.\r\n\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    public class SiteMessage implements Identifiable{\r\n        @PrePersist\r\n        public void onCreateOne(){\r\n            System.out.println(&quot;Executed onCreate1&quot;); //executes first\r\n        }\r\n    }\r\n    \r\n    @Entity\r\n    @Table(name = &quot;feedback&quot;)\r\n    public class Feedback extends SiteMessage {\r\n        @PrePersist\r\n        public void onCreateTwo(){\r\n            System.out.println(&quot;Executed onCreate2&quot;); //executes second\r\n        }\r\n    }\r\n\r\n\r\nIt goes on to note the following so you should be able to set things up exactly as required.\r\n\r\n&gt; We could also have a method on the CompanyEmployee mapped superclass\r\n&gt; that we want to apply to all the entities that subclassed it. If we\r\n&gt; add a PrePersist method named checkVacation() that verifies that the\r\n&gt; vacation carryover is less than a certain amount, it will be executed\r\n&gt; after checkName() and before verifyPension(). It gets more interesting\r\n&gt; if we define a checkVacation() method on the PartTimeEmployee class\r\n&gt; because part-time employees don’t get as much vacation. **Annotating the\r\n&gt; overridden method with PrePersist would cause the\r\n&gt; PartTimeEmployee.checkVacation() method to be invoked instead of the\r\n&gt; one in CompanyEmployee**\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    public class SiteMessage implements Identifiable{\r\n        @PrePersist\r\n        public void onCreate(){\r\n            System.out.println(&quot;Executed onCreate1&quot;); //will not execute\r\n        }\r\n    }\r\n    \r\n    @Entity\r\n    @Table(name = &quot;feedback&quot;)\r\n    public class Feedback extends SiteMessage {\r\n        @PrePersist\r\n        public void onCreate(){\r\n            System.out.println(&quot;Executed onCreate2&quot;); //will execute\r\n        }\r\n    }\r\n\r\n","title":"Jpa prepersist callback not called on parent","body":"<p>The Book Mastering the Java persistence API notes the following:</p>\n\n<blockquote>\n  <p>Inheriting Callback Methods</p>\n  \n  <p>Callback methods may occur on any entity or mapped superclass, be it\n  abstract or concrete. The rule is fairly simple. <strong>It is that every\n  callback method for a given event type will be invoked in the order\n  according to its place in the hierarchy, most general classes first.</strong>\n  Thus, if in our Employee hierarchy that we saw in Figure 10-10 the\n  Employee class contains a PrePersist callback method named\n  checkName(), and FullTimeEmployee also contains a PrePersist callback\n  method named verifyPension(), when the PrePersist event occurs, the\n  checkName() method will get invoked, followed by the verifyPension()\n  method.</p>\n</blockquote>\n\n<p>Therefore if everything else in your original code was correct you should expect to see both onCreateOne() and onCreateTwo() called and in that order.</p>\n\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic class SiteMessage implements Identifiable{\n    @PrePersist\n    public void onCreateOne(){\n        System.out.println(\"Executed onCreate1\"); //executes first\n    }\n}\n\n@Entity\n@Table(name = \"feedback\")\npublic class Feedback extends SiteMessage {\n    @PrePersist\n    public void onCreateTwo(){\n        System.out.println(\"Executed onCreate2\"); //executes second\n    }\n}\n</code></pre>\n\n<p>It goes on to note the following so you should be able to set things up exactly as required.</p>\n\n<blockquote>\n  <p>We could also have a method on the CompanyEmployee mapped superclass\n  that we want to apply to all the entities that subclassed it. If we\n  add a PrePersist method named checkVacation() that verifies that the\n  vacation carryover is less than a certain amount, it will be executed\n  after checkName() and before verifyPension(). It gets more interesting\n  if we define a checkVacation() method on the PartTimeEmployee class\n  because part-time employees don’t get as much vacation. <strong>Annotating the\n  overridden method with PrePersist would cause the\n  PartTimeEmployee.checkVacation() method to be invoked instead of the\n  one in CompanyEmployee</strong></p>\n</blockquote>\n\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic class SiteMessage implements Identifiable{\n    @PrePersist\n    public void onCreate(){\n        System.out.println(\"Executed onCreate1\"); //will not execute\n    }\n}\n\n@Entity\n@Table(name = \"feedback\")\npublic class Feedback extends SiteMessage {\n    @PrePersist\n    public void onCreate(){\n        System.out.println(\"Executed onCreate2\"); //will execute\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":290821,"reputation":742,"user_id":592593,"display_name":"Dante"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592833206,"creation_date":1592833206,"answer_id":62515807,"question_id":26060940,"body_markdown":"You can use the Annotation &quot;@MappedSuperClass&quot; on the Base entity (Parent).\r\nAs I can show:\r\n\r\n    @MappedSuperclass\r\n    public class Base implements Serializable {\r\n    \r\n        @Id\r\n        private UUID id;\r\n    \r\n        @PastOrPresent\r\n        private OffsetDateTime createdAt;\r\n    \r\n        @PastOrPresent\r\n        private OffsetDateTime updatedAt;\r\n    \r\n        //get/set here\r\n    \r\n        @PrePersist\r\n        public void prePersist() {\r\n            createdAt = OffsetDateTime.now();\r\n            updatedAt = OffsetDateTime.now();\r\n        }\r\n    \r\n    }\r\n\r\nInner class:\r\n\r\n    @Entity\r\n    @HasExtendedValidator\r\n    public class Settings extends Base implements Serializable  {\r\n    ..\r\n    }\r\n\r\nWork like a charm!","title":"Jpa prepersist callback not called on parent","body":"<p>You can use the Annotation &quot;@MappedSuperClass&quot; on the Base entity (Parent).\nAs I can show:</p>\n<pre><code>@MappedSuperclass\npublic class Base implements Serializable {\n\n    @Id\n    private UUID id;\n\n    @PastOrPresent\n    private OffsetDateTime createdAt;\n\n    @PastOrPresent\n    private OffsetDateTime updatedAt;\n\n    //get/set here\n\n    @PrePersist\n    public void prePersist() {\n        createdAt = OffsetDateTime.now();\n        updatedAt = OffsetDateTime.now();\n    }\n\n}\n</code></pre>\n<p>Inner class:</p>\n<pre><code>@Entity\n@HasExtendedValidator\npublic class Settings extends Base implements Serializable  {\n..\n}\n</code></pre>\n<p>Work like a charm!</p>\n"},{"tags":[],"owner":{"account_id":211037,"reputation":1635,"user_id":462982,"accept_rate":62,"display_name":"user462982"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681569237,"creation_date":1681569237,"answer_id":76022884,"question_id":26060940,"body_markdown":"According to the answers of @Alan Hay and @Dante, it seems to work if the parent class is annotated with @MappedSuperclass. I did not verify this by myself, however.\r\n\r\nIn my case, I could not use @MappedSuperclass as I still wanted to use the superclass as an @Entity and the @Entity annotation does not work together with @MappedSuperclass.\r\n\r\nAt least with the current Hibernate Version, superclasses of the parent class without @MappedSuperclass do not get registered for callbacks in Hibernate&#39;s internal event callbackRegistry so that&#39;s why it is not working in this case.\r\nThere is another option that works:\r\n\r\nRegister @EntityListeners on the parent @Entity class and it will get triggered for all subclasses too. E.g:\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @EntityListeners(MyListener.class)\r\n    public class SiteMessage implements Identifiable{\r\n       \r\n    }\r\n    \r\n    @Entity\r\n    @Table(name = &quot;feedback&quot;)\r\n    public class Feedback extends SiteMessage {\r\n       \r\n    }\r\n\r\n    class MyListener{\r\n    \r\n        @PrePersist\r\n        public void onCreate(SiteMessage o) {\r\n            System.out.println(&quot;Executed onCreate&quot;)\r\n        }\r\n    }\r\n\r\nIf you can&#39;t make MyListener generic enough to support all your subclasses, create specific Listeners (e.g. MyListener2 ) for those too and register them on the subclasses. Listeners are additive unless sublasses are annotated with @ExcludeSuperclassListeners\r\n","title":"Jpa prepersist callback not called on parent","body":"<p>According to the answers of @Alan Hay and @Dante, it seems to work if the parent class is annotated with @MappedSuperclass. I did not verify this by myself, however.</p>\n<p>In my case, I could not use @MappedSuperclass as I still wanted to use the superclass as an @Entity and the @Entity annotation does not work together with @MappedSuperclass.</p>\n<p>At least with the current Hibernate Version, superclasses of the parent class without @MappedSuperclass do not get registered for callbacks in Hibernate's internal event callbackRegistry so that's why it is not working in this case.\nThere is another option that works:</p>\n<p>Register @EntityListeners on the parent @Entity class and it will get triggered for all subclasses too. E.g:</p>\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@EntityListeners(MyListener.class)\npublic class SiteMessage implements Identifiable{\n   \n}\n\n@Entity\n@Table(name = &quot;feedback&quot;)\npublic class Feedback extends SiteMessage {\n   \n}\n\nclass MyListener{\n\n    @PrePersist\n    public void onCreate(SiteMessage o) {\n        System.out.println(&quot;Executed onCreate&quot;)\n    }\n}\n</code></pre>\n<p>If you can't make MyListener generic enough to support all your subclasses, create specific Listeners (e.g. MyListener2 ) for those too and register them on the subclasses. Listeners are additive unless sublasses are annotated with @ExcludeSuperclassListeners</p>\n"}],"owner":{"account_id":2277593,"reputation":484,"user_id":2003481,"accept_rate":69,"display_name":"kraken"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5906,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1681569237,"creation_date":1411738586,"question_id":26060940,"body_markdown":"My code\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    public class SiteMessage implements Identifiable{\r\n        @PrePersist\r\n        public void onCreate1(){\r\n            System.out.println(&quot;Executed onCreate1&quot;);\r\n        }\r\n    }\r\n    \r\n    @Entity\r\n    @Table(name = &quot;feedback&quot;)\r\n    public class Feedback extends SiteMessage {\r\n        @PrePersist\r\n        public void onCreate2(){\r\n            System.out.println(&quot;Executed onCreate2&quot;);\r\n        }\r\n    }\r\n\r\nWhen i save Feedback entity i expect that i will see: Executed onCreate1 and Executed onCreate2, but i&#39;ve seen only Executed onCreate2\r\n\r\nI use eclipselink v2.5.2","title":"Jpa prepersist callback not called on parent","body":"<p>My code</p>\n\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic class SiteMessage implements Identifiable{\n    @PrePersist\n    public void onCreate1(){\n        System.out.println(\"Executed onCreate1\");\n    }\n}\n\n@Entity\n@Table(name = \"feedback\")\npublic class Feedback extends SiteMessage {\n    @PrePersist\n    public void onCreate2(){\n        System.out.println(\"Executed onCreate2\");\n    }\n}\n</code></pre>\n\n<p>When i save Feedback entity i expect that i will see: Executed onCreate1 and Executed onCreate2, but i've seen only Executed onCreate2</p>\n\n<p>I use eclipselink v2.5.2</p>\n"},{"tags":["javascript","java","jsp","servlets","fetch"],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681568352,"creation_date":1681567643,"answer_id":76022744,"question_id":76020374,"body_markdown":"Since you are using [Fetch API][1], the first parameter it uses an [URL][2] object which you have to build yourself.\r\n\r\n```\r\nlet base_url = &#39;http://localhost:8080/projectname&#39;;\r\nfetch(base_url+&#39;/UserServlet&#39;, {\r\n        method: &#39;POST&#39;,\r\n        headers: {\r\n            &#39;Content-Type&#39;: &#39;application/json&#39;\r\n        },\r\n        body: registrationDataJSON\r\n    }\r\n```\r\n\r\nIf you don&#39;t want to hardcode the base URL, then you can get it either from server or from the [`Window`][3] object property. The `window.location.origin` may be used for the base URL.\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\r\n  [2]: https://developer.mozilla.org/en-US/docs/Web/API/URL\r\n  [3]: https://developer.mozilla.org/en-US/docs/Web/API/Window","title":"Why is my javascript file not recognizing servlet like jsp does?","body":"<p>Since you are using <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\" rel=\"nofollow noreferrer\">Fetch API</a>, the first parameter it uses an <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/URL\" rel=\"nofollow noreferrer\">URL</a> object which you have to build yourself.</p>\n<pre><code>let base_url = 'http://localhost:8080/projectname';\nfetch(base_url+'/UserServlet', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: registrationDataJSON\n    }\n</code></pre>\n<p>If you don't want to hardcode the base URL, then you can get it either from server or from the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window\" rel=\"nofollow noreferrer\"><code>Window</code></a> object property. The <code>window.location.origin</code> may be used for the base URL.</p>\n"}],"owner":{"account_id":24524757,"reputation":11,"user_id":18437338,"display_name":"ctrlCat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681568807,"creation_date":1681533591,"question_id":76020374,"body_markdown":"I have a servlet named like \r\n\r\n`@WebServlet(&quot;/UserServlet&quot;)`, and when I use `action=&quot;UserServlet&quot;` on JSP, it recognizes it, but the JavaScript file does not.\r\nFile Path Info:\r\nServlet is located at `src/main/java/com.name.controller/UserServlet`.\r\nJSPs located at `webapp/view/`\r\nJavaScript file lcoated at `webapp/js/`\r\n\r\nWhen I do this:\r\n\r\n```\r\n    fetch(&#39;/UserServlet&#39;, {\r\n        method: &#39;POST&#39;,\r\n        headers: {\r\n            &#39;Content-Type&#39;: &#39;application/json&#39;\r\n        },\r\n        body: registrationDataJSON\r\n    })\r\n        .then(response =&gt; response.json())\r\n        .then(data =&gt; {\r\n            // handle success or error response\r\n            if (data.status === &#39;success&#39;) {\r\n                // redirect to home page or display success message\r\n            } else {\r\n                // display error message\r\n                alert(data.message);\r\n            }\r\n        })\r\n        .catch(error =&gt; {\r\n            // handle network or server error\r\n            console.error(error);\r\n        });\r\n    return true;\r\n};\r\n```\r\n\r\nThis redirects to `localhost:8080/UserServlet` instead of `localhost:8080/ProjectName/UserServlet`.\r\n\r\nBut when I mention full path to servlet like this:\r\n\r\n```\r\nfetch(&#39;http://localhost:8080/projectname/UserServlet&#39;, {\r\n        method: &#39;POST&#39;,\r\n        headers: {\r\n            &#39;Content-Type&#39;: &#39;application/json&#39;\r\n        },\r\n        body: registrationDataJSON\r\n    }\r\n```\r\n\r\nThen it works, Is there no way I can make it work simply using the Servlet Name and not full path?\r\n","title":"Why is my javascript file not recognizing servlet like jsp does?","body":"<p>I have a servlet named like</p>\n<p><code>@WebServlet(&quot;/UserServlet&quot;)</code>, and when I use <code>action=&quot;UserServlet&quot;</code> on JSP, it recognizes it, but the JavaScript file does not.\nFile Path Info:\nServlet is located at <code>src/main/java/com.name.controller/UserServlet</code>.\nJSPs located at <code>webapp/view/</code>\nJavaScript file lcoated at <code>webapp/js/</code></p>\n<p>When I do this:</p>\n<pre><code>    fetch('/UserServlet', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: registrationDataJSON\n    })\n        .then(response =&gt; response.json())\n        .then(data =&gt; {\n            // handle success or error response\n            if (data.status === 'success') {\n                // redirect to home page or display success message\n            } else {\n                // display error message\n                alert(data.message);\n            }\n        })\n        .catch(error =&gt; {\n            // handle network or server error\n            console.error(error);\n        });\n    return true;\n};\n</code></pre>\n<p>This redirects to <code>localhost:8080/UserServlet</code> instead of <code>localhost:8080/ProjectName/UserServlet</code>.</p>\n<p>But when I mention full path to servlet like this:</p>\n<pre><code>fetch('http://localhost:8080/projectname/UserServlet', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: registrationDataJSON\n    }\n</code></pre>\n<p>Then it works, Is there no way I can make it work simply using the Servlet Name and not full path?</p>\n"},{"tags":["java","node.js","angular","spring-boot","angular-cli"],"comments":[{"owner":{"account_id":8723294,"reputation":16206,"user_id":6525724,"display_name":"Nick"},"score":0,"creation_date":1670360818,"post_id":74709018,"comment_id":131858058,"body_markdown":"Not sure you can. I don&#39;t think they&#39;d add that warning for giggles, they probably truly require a newer version of node.","body":"Not sure you can. I don&#39;t think they&#39;d add that warning for giggles, they probably truly require a newer version of node."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1670360993,"post_id":74709018,"comment_id":131858128,"body_markdown":"Note that even *security* support ended for Node.js v8 at the end of December 2019. Would you *really* want to use that? (And v14 is out of active support and only has 4 months and 3 weeks left of security support...)","body":"Note that even <i>security</i> support ended for Node.js v8 at the end of December 2019. Would you <i>really</i> want to use that? (And v14 is out of active support and only has 4 months and 3 weeks left of security support...)"},{"owner":{"account_id":2019434,"reputation":1508,"user_id":1805974,"accept_rate":73,"display_name":"Henrik B&#248;gelund Lavstsen"},"score":0,"creation_date":1670378732,"post_id":74709018,"comment_id":131861658,"body_markdown":"You probably have a bunch of old packages that needs to be updated as well. Hopefully you dont have too many abandoned old packages. But if you want to run multiple versions of Node to try stuff out. I would suggest getting nvm, then you can switch between versions with commandline.","body":"You probably have a bunch of old packages that needs to be updated as well. Hopefully you dont have too many abandoned old packages. But if you want to run multiple versions of Node to try stuff out. I would suggest getting nvm, then you can switch between versions with commandline."}],"answers":[{"tags":[],"owner":{"account_id":19856060,"reputation":23,"user_id":15786519,"display_name":"CamiCode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672162076,"creation_date":1672158910,"answer_id":74931847,"question_id":74709018,"body_markdown":"Just try to run the command `npm install -g` on your angular project, that may could help","title":"How we can use node js with old version","body":"<p>Just try to run the command <code>npm install -g</code> on your angular project, that may could help</p>\n"},{"tags":[],"owner":{"account_id":6354433,"reputation":43,"user_id":4932292,"display_name":"Dang Anh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681568782,"creation_date":1681568782,"answer_id":76022840,"question_id":74709018,"body_markdown":"The problem occurred because of node-sass was still in old version. So I decided to run the command below \r\n\r\nnpm uninstall -g node-sass &amp;&amp; npm install -g node-sass\r\n\r\nAnd Check node modules in node-sass and only hold 3 folders\r\n\r\nansi-styles\r\nchalk\r\nsupports-color\r\n\r\nAfter deployment, the system is running fine :)","title":"How we can use node js with old version","body":"<p>The problem occurred because of node-sass was still in old version. So I decided to run the command below</p>\n<p>npm uninstall -g node-sass &amp;&amp; npm install -g node-sass</p>\n<p>And Check node modules in node-sass and only hold 3 folders</p>\n<p>ansi-styles\nchalk\nsupports-color</p>\n<p>After deployment, the system is running fine :)</p>\n"}],"owner":{"account_id":6354433,"reputation":43,"user_id":4932292,"display_name":"Dang Anh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681568782,"creation_date":1670360642,"question_id":74709018,"body_markdown":"I already updated nodejs to v14.20.1 that work with Angular CLI but it is not complied with my project (lot of issues).\r\n\r\nSo I decide to use v8.10.0 and how we can keep that version and execute Angular CLI without the note below.\r\n\r\n&quot;Node.js version v8.10.0 detected.\r\nThe Angular CLI requires a minimum Node.js version of either v14.20, v16.13 or v18.10.&quot;\r\n\r\nThank you","title":"How we can use node js with old version","body":"<p>I already updated nodejs to v14.20.1 that work with Angular CLI but it is not complied with my project (lot of issues).</p>\n<p>So I decide to use v8.10.0 and how we can keep that version and execute Angular CLI without the note below.</p>\n<p>&quot;Node.js version v8.10.0 detected.\nThe Angular CLI requires a minimum Node.js version of either v14.20, v16.13 or v18.10.&quot;</p>\n<p>Thank you</p>\n"},{"tags":["java","android","firebase-storage","uri","android-glide"],"owner":{"account_id":28256757,"reputation":11,"user_id":21602108,"display_name":"Yoav Hofstein"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681568399,"creation_date":1681544834,"question_id":76020980,"body_markdown":"i&#39;m trying to get all the urls of a specific folder to an arraylist of urls, and then update them all into a grid view.\r\n\r\n\r\nthis is the code i tried\r\n\r\n```\r\nFirebaseStorage storage = FirebaseStorage.getInstance();\r\n\r\n    StorageReference storageRef = storage.getReference();\r\n    StorageReference storageReference=storage.getReference().child(groupCode);\r\n    \r\n\r\n    storageReference.listAll().addOnSuccessListener(new OnSuccessListener&lt;ListResult&gt;() {\r\n       @Override\r\n       public void onSuccess(ListResult listResult) {\r\n           for(StorageReference fileRef:listResult.getItems()){\r\n               fileRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\r\n                   @Override\r\n                   public void onSuccess(Uri uri) {\r\n                       galleryArrayList.add(new PictureClass(uri));\r\n                       Log.d(&quot;item&quot;, uri.toString());\r\n                   }\r\n               }).addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\r\n                   @Override\r\n                   public void onSuccess(Uri uri) {\r\n                       adaptor=new ImageAdaptor(requireContext(),galleryArrayList);\r\n\r\n                   }\r\n               });\r\n           }\r\n       }\r\n   });\r\n   gridView.setAdapter(adaptor);\r\n}\r\n```\r\n\r\nhowever it has collapsed\r\n\r\n\r\ni also know there are libaries such as glide and picasso, however i dont know how to work with them and i dont want to change ,my image adaptor. what can i do?","title":"getting all the url&#39;s to an arraylist from firebase storage","body":"<p>i'm trying to get all the urls of a specific folder to an arraylist of urls, and then update them all into a grid view.</p>\n<p>this is the code i tried</p>\n<pre><code>FirebaseStorage storage = FirebaseStorage.getInstance();\n\n    StorageReference storageRef = storage.getReference();\n    StorageReference storageReference=storage.getReference().child(groupCode);\n    \n\n    storageReference.listAll().addOnSuccessListener(new OnSuccessListener&lt;ListResult&gt;() {\n       @Override\n       public void onSuccess(ListResult listResult) {\n           for(StorageReference fileRef:listResult.getItems()){\n               fileRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\n                   @Override\n                   public void onSuccess(Uri uri) {\n                       galleryArrayList.add(new PictureClass(uri));\n                       Log.d(&quot;item&quot;, uri.toString());\n                   }\n               }).addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\n                   @Override\n                   public void onSuccess(Uri uri) {\n                       adaptor=new ImageAdaptor(requireContext(),galleryArrayList);\n\n                   }\n               });\n           }\n       }\n   });\n   gridView.setAdapter(adaptor);\n}\n</code></pre>\n<p>however it has collapsed</p>\n<p>i also know there are libaries such as glide and picasso, however i dont know how to work with them and i dont want to change ,my image adaptor. what can i do?</p>\n"},{"tags":["java","android","firebase","firebase-cloud-messaging","android-notifications"],"owner":{"account_id":19321582,"reputation":1,"user_id":14125162,"display_name":"simran inamdar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681568322,"creation_date":1681552049,"question_id":76021485,"body_markdown":"When we generate notification in our app using firebase, android 11 notification content has different data and android 13 notification content different data.\r\n\r\n    public void onMessageReceived(RemoteMessage remoteMessage) {\r\n\t  Map&lt;String, String&gt; body = Collections.emptyMap();\r\n\r\n        // Check if message contains a data payload.\r\n        if (remoteMessage.getData().size() &gt; 0) {\r\n            body = remoteMessage.getData();\r\n            Log.d(TAG, &quot;Message data payload: &quot; + body);\r\n            //messageBody = body.toString();\r\n        }\r\n\r\n      sendNotification(body);\r\n    }\r\n\r\n    \r\n    private void sendNotification(Map&lt;String, String&gt; messageBody) {\r\n        Intent intent = null;\r\n\r\n        notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O){\r\n            createChannel(notificationManager);\r\n        }\r\n\r\n\r\n       String notificationType = messageBody.get(&quot;notificationType&quot;);\r\n        String typeOfPatient = messageBody.get(&quot;&quot;);\r\n\r\n        if ((notificationType != null ) &amp;&amp; (notificationType.equalsIgnoreCase(&quot;chatmessage&quot;))){\r\n            intent = new Intent(this, SplashScreenActivity.class);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n            intent.putExtra(&quot;notify&quot;, true);\r\n        }\r\n\r\n\r\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0  /*Request code*/ , intent,\r\n                PendingIntent.FLAG_IMMUTABLE);\r\n\r\n        String title = &quot;Patient Name &quot; + messageBody.get(&quot;name&quot;);\r\n        String message;\r\n        /*if (messageBody.get(&quot;notificationType&quot;).equalsIgnoreCase(&quot;episode&quot;))\r\n            message = messageBody.get(&quot;message&quot;);\r\n        else\r\n            message = &quot;Lab Date is &quot; + messageBody.get(&quot;labDate&quot;);*/\r\n\r\n\r\n         NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this,getResources().getString(R.string.notification_channel))\r\n                .setSmallIcon(R.mipmap.ic_doctor_logo)\r\n                .setContentTitle(title)\r\n                .setContentInfo(&quot;message&quot;)\r\n                .setAutoCancel(true)\r\n                .setSound(defaultSoundUri)\r\n                .setContentIntent(pendingIntent);\r\n\r\n        NotificationCompat.BigTextStyle bigTextStyle = new NotificationCompat.BigTextStyle();\r\n        bigTextStyle.setBigContentTitle(title);\r\n        bigTextStyle.bigText(&quot;message&quot;);\r\n\r\n        notificationBuilder.setStyle(bigTextStyle);\r\n\r\n        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n        notificationManager.notify(0, notificationBuilder.build());\r\n\r\n\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    private void createChannel(NotificationManager notificationManager) {\r\n        String name = getResources().getString(R.string.notification_channel);\r\n        String description = getResources().getString(R.string.description);\r\n        int importance = NotificationManager.IMPORTANCE_HIGH;\r\n\r\n        NotificationChannel mChannel = new NotificationChannel(name, name, importance);\r\n        mChannel.setDescription(description);\r\n        mChannel.enableLights(true);\r\n        mChannel.setLightColor(Color.BLUE);\r\n        notificationManager.createNotificationChannel(mChannel);\r\n    }\r\n\r\n![enter image description here](https://i.stack.imgur.com/bvmBk.jpg)\r\n\r\n![enter image description here](https://i.stack.imgur.com/hkcYz.jpg)\r\n\r\n\r\n\r\n\r\n","title":"when generating notification on android 11 then notification content format is different and on android 13 notification content format is different","body":"<p>When we generate notification in our app using firebase, android 11 notification content has different data and android 13 notification content different data.</p>\n<pre><code>public void onMessageReceived(RemoteMessage remoteMessage) {\n  Map&lt;String, String&gt; body = Collections.emptyMap();\n\n    // Check if message contains a data payload.\n    if (remoteMessage.getData().size() &gt; 0) {\n        body = remoteMessage.getData();\n        Log.d(TAG, &quot;Message data payload: &quot; + body);\n        //messageBody = body.toString();\n    }\n\n  sendNotification(body);\n}\n\n\nprivate void sendNotification(Map&lt;String, String&gt; messageBody) {\n    Intent intent = null;\n\n    notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O){\n        createChannel(notificationManager);\n    }\n\n\n   String notificationType = messageBody.get(&quot;notificationType&quot;);\n    String typeOfPatient = messageBody.get(&quot;&quot;);\n\n    if ((notificationType != null ) &amp;&amp; (notificationType.equalsIgnoreCase(&quot;chatmessage&quot;))){\n        intent = new Intent(this, SplashScreenActivity.class);\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n        intent.putExtra(&quot;notify&quot;, true);\n    }\n\n\n    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0  /*Request code*/ , intent,\n            PendingIntent.FLAG_IMMUTABLE);\n\n    String title = &quot;Patient Name &quot; + messageBody.get(&quot;name&quot;);\n    String message;\n    /*if (messageBody.get(&quot;notificationType&quot;).equalsIgnoreCase(&quot;episode&quot;))\n        message = messageBody.get(&quot;message&quot;);\n    else\n        message = &quot;Lab Date is &quot; + messageBody.get(&quot;labDate&quot;);*/\n\n\n     NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this,getResources().getString(R.string.notification_channel))\n            .setSmallIcon(R.mipmap.ic_doctor_logo)\n            .setContentTitle(title)\n            .setContentInfo(&quot;message&quot;)\n            .setAutoCancel(true)\n            .setSound(defaultSoundUri)\n            .setContentIntent(pendingIntent);\n\n    NotificationCompat.BigTextStyle bigTextStyle = new NotificationCompat.BigTextStyle();\n    bigTextStyle.setBigContentTitle(title);\n    bigTextStyle.bigText(&quot;message&quot;);\n\n    notificationBuilder.setStyle(bigTextStyle);\n\n    NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n    notificationManager.notify(0, notificationBuilder.build());\n\n\n}\n\n@RequiresApi(api = Build.VERSION_CODES.O)\nprivate void createChannel(NotificationManager notificationManager) {\n    String name = getResources().getString(R.string.notification_channel);\n    String description = getResources().getString(R.string.description);\n    int importance = NotificationManager.IMPORTANCE_HIGH;\n\n    NotificationChannel mChannel = new NotificationChannel(name, name, importance);\n    mChannel.setDescription(description);\n    mChannel.enableLights(true);\n    mChannel.setLightColor(Color.BLUE);\n    notificationManager.createNotificationChannel(mChannel);\n}\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/bvmBk.jpg\" alt=\"enter image description here\" /></p>\n<p><img src=\"https://i.stack.imgur.com/hkcYz.jpg\" alt=\"enter image description here\" /></p>\n"},{"tags":["java","crc","iso","transmission"],"answers":[{"tags":[],"owner":{"account_id":1136690,"reputation":104411,"user_id":1180620,"accept_rate":83,"display_name":"Mark Adler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681495638,"creation_date":1681495638,"answer_id":76017859,"question_id":76013338,"body_markdown":"There are rules in the document about what the CRC (they call it a BCS) is calculated over, and about getting rid of DLE bytes before doing that. As a result, the CRC for the example message starts after the leading `1002` and goes up to the `03` before the CRC, _but_ the DLE (`10`) before the `03` is deleted.\r\n\r\nSo the CRC is calculated over:\r\n\r\n```\r\n220017e11201040c9ebce8003201028149d3d904808d1403\r\n```\r\n\r\nThen the forward CRC with polynomial `0x1021`, zero initial value, and zero final exclusive-or gives the result `0x939c`. You may find that particular 16-bit CRC referred to as [CRC-16/XMODEM][1]. The calculation is:\r\n\r\n```java\r\n    static private int crc16xmodem(byte[] message) {\r\n    \tint crc = 0;\r\n        for (byte octet : message) {\r\n            crc ^= (int)octet &lt;&lt; 8;\r\n            for (int k = 0; k &lt; 8; k++)\r\n                crc = (crc &amp; 0x8000) != 0 ? (crc &lt;&lt; 1) ^ 0x1021 : crc &lt;&lt; 1;\r\n        }\r\n        return crc &amp; 0xffff;\r\n    }\r\n```\r\n\r\nRead the DLE rules. A case that doesn&#39;t occur in your example is: DLE DLE in the message becomes DLE, since that first DLE is an escape so that the second DLE can be transmitted as part of the message.\r\n\r\n  [1]: https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-xmodem","title":"Implementing CRC in Java for a hex string","body":"<p>There are rules in the document about what the CRC (they call it a BCS) is calculated over, and about getting rid of DLE bytes before doing that. As a result, the CRC for the example message starts after the leading <code>1002</code> and goes up to the <code>03</code> before the CRC, <em>but</em> the DLE (<code>10</code>) before the <code>03</code> is deleted.</p>\n<p>So the CRC is calculated over:</p>\n<pre><code>220017e11201040c9ebce8003201028149d3d904808d1403\n</code></pre>\n<p>Then the forward CRC with polynomial <code>0x1021</code>, zero initial value, and zero final exclusive-or gives the result <code>0x939c</code>. You may find that particular 16-bit CRC referred to as <a href=\"https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-xmodem\" rel=\"nofollow noreferrer\">CRC-16/XMODEM</a>. The calculation is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static private int crc16xmodem(byte[] message) {\n        int crc = 0;\n        for (byte octet : message) {\n            crc ^= (int)octet &lt;&lt; 8;\n            for (int k = 0; k &lt; 8; k++)\n                crc = (crc &amp; 0x8000) != 0 ? (crc &lt;&lt; 1) ^ 0x1021 : crc &lt;&lt; 1;\n        }\n        return crc &amp; 0xffff;\n    }\n</code></pre>\n<p>Read the DLE rules. A case that doesn't occur in your example is: DLE DLE in the message becomes DLE, since that first DLE is an escape so that the second DLE can be transmitted as part of the message.</p>\n"}],"owner":{"account_id":23385689,"reputation":3,"user_id":17451097,"display_name":"AliasDan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76017859,"answer_count":1,"score":0,"last_activity_date":1681568124,"creation_date":1681463021,"question_id":76013338,"body_markdown":"I have been tasked with implementing a CRC using Java. I wasn&#39;t given a specs to follow, but I am following this PDF:\r\n\r\nhttps://cdn.standards.iteh.ai/samples/6904/2c02d323a7ae41838de8b8b806cf3725/ISO-2111-1985.pdf\r\n\r\nI was given two sample strings to compare:\r\n\r\nByte Stream (Hex): `220017e11201040c9ebce8003201028149d3d904808d14`\r\n\r\nByte Stream with ISO2111 (Hex): `1002220017e11201040c9ebce8003201028149d3d904808d141003939c`\r\n\r\nThe first string is the raw data that I have received and the second string is how it should look after ISO2111 has been applied (according to the person that made the request).\r\n\r\nAdding the DLEs (1002 at start, 1003 at end) was trivial, but I cannot reproduce the checksum at the end of the transmission (939c).\r\n\r\nI first transform the string into an array of bytes and then pass it in to the below function.\r\n\r\nThe java code I was using to calculate the CRC16 is:\r\n\r\n\r\n```\r\npublic static String calculateCRC16(final byte[] bytes) {\r\n        int CRC = 0xFFFF; // initial CRC value : 0xFFFF -&gt; max value of 65535\r\n        int POLYNOMIAL = 0x1021; // 0x1021 = x^16 + x^12 + x^5 + 1\r\n        for (byte b : bytes) {\r\n            for (int i = 0; i &lt; 8; i++) {\r\n                boolean bit = ((b &gt;&gt; (7 - i) &amp; 1) == 1);\r\n                boolean c15 = ((CRC &gt;&gt; 15 &amp; 1) == 1);\r\n                CRC &lt;&lt;= 1;\r\n                if (c15 ^ bit) {\r\n                    CRC ^= POLYNOMIAL;\r\n                }\r\n            }\r\n        }\r\n\r\n        CRC &amp;= 0xffff;\r\n        return Integer.toHexString(CRC);\r\n    }\r\n```\r\n\r\n\r\nThe problem is that, for the given string, it outputs d806, not 939c. The value d806 seems to be correct according to some online CRC calculators. Am I missing something? Is the data they sent just made up? Have I misinterpreted section 8 in the PDF? This is what it says:\r\n\r\n&gt; 8 Block check sequence (BCS) \r\n&gt; The BCS shall conform to the following rules : \r\n&gt; 8.1 It shall be a 16 bit sequence (two octets). \r\n&gt; \r\n&gt; 8.2 The sequence of information bits contained in the data block to be protected may be represented by a polynomial L(x)  (GF 2): The BCS is the remainder after the division of the polynomial Lfxi IGF2), multiplied by x&lt;sup&gt;16&lt;/sup&gt;, by the generating polynomial p(x) = x&lt;sup&gt;16&lt;/sup&gt; + x&lt;sup&gt;12&lt;/sup&gt; + x&lt;sup&gt;5&lt;/sup&gt; + 1 (GF2). GF2 means that these polynomials have their coefficients in a two element Galois field.\r\n&gt; \r\n&gt; 8.3 The BCS shall be transmitted to the line commencing with the coefficient of the highest term.\r\n&gt; \r\n&gt; 8.4 At the receiver, the serial incoming protected data and the BCS when divided by the generating polynomial results in a zero remainder in the absence of transmission errors.&quot;\r\n\r\nThere is no other info about this anywhere else online as far as I can see.\r\n","title":"Implementing CRC in Java for a hex string","body":"<p>I have been tasked with implementing a CRC using Java. I wasn't given a specs to follow, but I am following this PDF:</p>\n<p><a href=\"https://cdn.standards.iteh.ai/samples/6904/2c02d323a7ae41838de8b8b806cf3725/ISO-2111-1985.pdf\" rel=\"nofollow noreferrer\">https://cdn.standards.iteh.ai/samples/6904/2c02d323a7ae41838de8b8b806cf3725/ISO-2111-1985.pdf</a></p>\n<p>I was given two sample strings to compare:</p>\n<p>Byte Stream (Hex): <code>220017e11201040c9ebce8003201028149d3d904808d14</code></p>\n<p>Byte Stream with ISO2111 (Hex): <code>1002220017e11201040c9ebce8003201028149d3d904808d141003939c</code></p>\n<p>The first string is the raw data that I have received and the second string is how it should look after ISO2111 has been applied (according to the person that made the request).</p>\n<p>Adding the DLEs (1002 at start, 1003 at end) was trivial, but I cannot reproduce the checksum at the end of the transmission (939c).</p>\n<p>I first transform the string into an array of bytes and then pass it in to the below function.</p>\n<p>The java code I was using to calculate the CRC16 is:</p>\n<pre><code>public static String calculateCRC16(final byte[] bytes) {\n        int CRC = 0xFFFF; // initial CRC value : 0xFFFF -&gt; max value of 65535\n        int POLYNOMIAL = 0x1021; // 0x1021 = x^16 + x^12 + x^5 + 1\n        for (byte b : bytes) {\n            for (int i = 0; i &lt; 8; i++) {\n                boolean bit = ((b &gt;&gt; (7 - i) &amp; 1) == 1);\n                boolean c15 = ((CRC &gt;&gt; 15 &amp; 1) == 1);\n                CRC &lt;&lt;= 1;\n                if (c15 ^ bit) {\n                    CRC ^= POLYNOMIAL;\n                }\n            }\n        }\n\n        CRC &amp;= 0xffff;\n        return Integer.toHexString(CRC);\n    }\n</code></pre>\n<p>The problem is that, for the given string, it outputs d806, not 939c. The value d806 seems to be correct according to some online CRC calculators. Am I missing something? Is the data they sent just made up? Have I misinterpreted section 8 in the PDF? This is what it says:</p>\n<blockquote>\n<p>8 Block check sequence (BCS)\nThe BCS shall conform to the following rules :\n8.1 It shall be a 16 bit sequence (two octets).</p>\n<p>8.2 The sequence of information bits contained in the data block to be protected may be represented by a polynomial L(x)  (GF 2): The BCS is the remainder after the division of the polynomial Lfxi IGF2), multiplied by x<sup>16</sup>, by the generating polynomial p(x) = x<sup>16</sup> + x<sup>12</sup> + x<sup>5</sup> + 1 (GF2). GF2 means that these polynomials have their coefficients in a two element Galois field.</p>\n<p>8.3 The BCS shall be transmitted to the line commencing with the coefficient of the highest term.</p>\n<p>8.4 At the receiver, the serial incoming protected data and the BCS when divided by the generating polynomial results in a zero remainder in the absence of transmission errors.&quot;</p>\n</blockquote>\n<p>There is no other info about this anywhere else online as far as I can see.</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore","firebase-security"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1681634003,"post_id":76022649,"comment_id":134085452,"body_markdown":"Where is this error message coming from? As inside onFailure I only see &quot;Error adding user&quot;.","body":"Where is this error message coming from? As inside onFailure I only see &quot;Error adding user&quot;."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1681634022,"post_id":76022649,"comment_id":134085457,"body_markdown":"Besides that, I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-fix-firestore-error-permission-denied-missing-or-insufficient-permissions-777d591f404) will help. If you understand Kotlin, I think that this [resource](https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-email-and-password-in-jetpack-compose-bd70ca56ea91) will help. Here is the corresponding [repo](https://github.com/alexmamo/FirebaseSignInWithEmailAndPassword).","body":"Besides that, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-fix-firestore-error-permission-denied-missing-or-insufficient-permissions-777d591f404\" rel=\"nofollow noreferrer\">resource</a> will help. If you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-email-and-password-in-jetpack-compose-bd70ca56ea91\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/FirebaseSignInWithEmailAndPassword\" rel=\"nofollow noreferrer\">repo</a>."}],"owner":{"account_id":28313514,"reputation":11,"user_id":21650426,"display_name":"Casian Eugen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681567530,"creation_date":1681566602,"question_id":76022649,"body_markdown":"I want to register a new user. The user data consists of a password and a password hint. I want to save the hint in the Firestore document, but any rule I write in the Firestore gives an error:\r\n \r\n&gt; W/Firestore: (24.4.5) [WriteStream]: (4e2f22c) Stream closed with status: Status{code=PERMISSION_DENIED, description=Missing or insufficient permissions., cause=null}.\r\n\r\nThis is my code\r\n\r\n```\r\nFirebaseAuth mAuth = FirebaseAuth.getInstance();\r\nFirebaseFirestore db1 = FirebaseFirestore.getInstance();\r\n\r\nmAuth.createUserWithEmailAndPassword(email, password)\r\n    .addOnCompleteListener(this, task -&gt; {\r\n        if (task.isSuccessful()) {\r\n            FirebaseUser user = mAuth.getCurrentUser();\r\n            Map&lt;String, Object&gt; userMap = new HashMap&lt;&gt;();\r\n            userMap.put(&quot;password_hint&quot;, hint);\r\n            if (user != null) {\r\n                db1.collection(&quot;users&quot;).document(user.getUid())\r\n                        .set(userMap)\r\n                        .addOnSuccessListener(aVoid -&gt; {\r\n                            Intent intent = new Intent(RegisterActivityPass.this, BiometricActivity.class);\r\n                            startActivity(intent);\r\n                            finish();\r\n                        })\r\n                        .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Error adding user&quot;, Toast.LENGTH_SHORT).show());\r\n            } else {\r\n                Toast.makeText(this, &quot;User is not logged in&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    });\r\n```\r\nThis is my Firestore rule\r\n\r\n```\r\nrules_version = &#39;2&#39;;\r\nservice cloud.firestore {\r\n  match /databases/{database}/documents {\r\n  \r\n    // Only authenticated users can access the &#39;users&#39; collection\r\n    match /users/{userId} {\r\n      allow read, write: if request.auth != null &amp;&amp; request.auth.uid == userId;\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\nNo matter what rule i set, the error will appear in any case. ","title":"Firestore PERMISSION_DENIED error in all cases of rules","body":"<p>I want to register a new user. The user data consists of a password and a password hint. I want to save the hint in the Firestore document, but any rule I write in the Firestore gives an error:</p>\n<blockquote>\n<p>W/Firestore: (24.4.5) [WriteStream]: (4e2f22c) Stream closed with status: Status{code=PERMISSION_DENIED, description=Missing or insufficient permissions., cause=null}.</p>\n</blockquote>\n<p>This is my code</p>\n<pre><code>FirebaseAuth mAuth = FirebaseAuth.getInstance();\nFirebaseFirestore db1 = FirebaseFirestore.getInstance();\n\nmAuth.createUserWithEmailAndPassword(email, password)\n    .addOnCompleteListener(this, task -&gt; {\n        if (task.isSuccessful()) {\n            FirebaseUser user = mAuth.getCurrentUser();\n            Map&lt;String, Object&gt; userMap = new HashMap&lt;&gt;();\n            userMap.put(&quot;password_hint&quot;, hint);\n            if (user != null) {\n                db1.collection(&quot;users&quot;).document(user.getUid())\n                        .set(userMap)\n                        .addOnSuccessListener(aVoid -&gt; {\n                            Intent intent = new Intent(RegisterActivityPass.this, BiometricActivity.class);\n                            startActivity(intent);\n                            finish();\n                        })\n                        .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Error adding user&quot;, Toast.LENGTH_SHORT).show());\n            } else {\n                Toast.makeText(this, &quot;User is not logged in&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n</code></pre>\n<p>This is my Firestore rule</p>\n<pre><code>rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n  \n    // Only authenticated users can access the 'users' collection\n    match /users/{userId} {\n      allow read, write: if request.auth != null &amp;&amp; request.auth.uid == userId;\n    }\n  }\n}\n\n</code></pre>\n<p>No matter what rule i set, the error will appear in any case.</p>\n"},{"tags":["java","mysql","hibernate"],"answers":[{"tags":[],"owner":{"account_id":8172423,"reputation":17307,"user_id":6152400,"display_name":"P.Salmon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474009636,"creation_date":1474009636,"answer_id":39525628,"question_id":39525480,"body_markdown":"Nearly there try use sum (case when\r\n\r\n    select count(*) as allCount, \r\n    sum(case when t.status=&#39;Approved&#39; then 1 else 0 end) as approvedCount, \r\n    sum(case when t.status=&#39;Overdue&#39;  then 1 else 0 end) as overdueCount, \r\n    sum(case when t.status=&#39;Rejected&#39; then 1 else 0 end) as rejectedCount, \r\n    sum(case when t.status=&#39;Awaiting Approval&#39; then 1 else 0 end) as awaitingApprovalCount,\r\n    sum(case when t.status=&#39;Not Submitted&#39; then 1 else 0 end) as notSubmittedCount\r\n    from timesheet as t where t.empl_id=2;","title":"Query doesn&#39;t excecute for a select count of a particular column value","body":"<p>Nearly there try use sum (case when</p>\n\n<pre><code>select count(*) as allCount, \nsum(case when t.status='Approved' then 1 else 0 end) as approvedCount, \nsum(case when t.status='Overdue'  then 1 else 0 end) as overdueCount, \nsum(case when t.status='Rejected' then 1 else 0 end) as rejectedCount, \nsum(case when t.status='Awaiting Approval' then 1 else 0 end) as awaitingApprovalCount,\nsum(case when t.status='Not Submitted' then 1 else 0 end) as notSubmittedCount\nfrom timesheet as t where t.empl_id=2;\n</code></pre>\n"}],"owner":{"account_id":7596673,"reputation":27,"user_id":5762662,"accept_rate":0,"display_name":"Ramish Raja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681567473,"creation_date":1474009129,"question_id":39525480,"body_markdown":"    select \r\n        count(*) as allCount, \r\n        sum(t.status=&#39;Approved&#39;) as approvedCount, \r\n        sum(t.status=&#39;Overdue&#39;) as overdueCount, \r\n    \tsum(t.status=&#39;Rejected&#39;) as rejectedCount, \r\n        sum(t.status=&#39;Awaiting Approval&#39;) as awaitingApprovalCount,\r\n    \tsum(t.status=&#39;Not Submitted&#39;) as notSubmittedCount\r\n    from \r\n        timesheet as t \r\n    where \r\n        t.empl_id = 2;\r\n\r\nIn this query it shows a run time exception as \r\n\r\n&gt; org.hibernate.hql.internal.ast.querySyntax.Exception:expecting CLOSE ,found &quot;=&quot; nearline 1,sum(t.status=&quot;Approved&quot;)\r\n\r\n","title":"Query doesn&#39;t excecute for a select count of a particular column value","body":"<pre><code>select \n    count(*) as allCount, \n    sum(t.status='Approved') as approvedCount, \n    sum(t.status='Overdue') as overdueCount, \n    sum(t.status='Rejected') as rejectedCount, \n    sum(t.status='Awaiting Approval') as awaitingApprovalCount,\n    sum(t.status='Not Submitted') as notSubmittedCount\nfrom \n    timesheet as t \nwhere \n    t.empl_id = 2;\n</code></pre>\n<p>In this query it shows a run time exception as</p>\n<blockquote>\n<p>org.hibernate.hql.internal.ast.querySyntax.Exception:expecting CLOSE ,found &quot;=&quot; nearline 1,sum(t.status=&quot;Approved&quot;)</p>\n</blockquote>\n"},{"tags":["java","spring-boot","graalvm","springdoc","spring-native"],"answers":[{"tags":[],"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1681567436,"creation_date":1670687321,"answer_id":74754372,"question_id":74712624,"body_markdown":"You are using correct dependency\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nbut missing the property below \r\n```properties\r\nspringdoc.enable-native-support=true\r\nspringdoc.swagger-ui.path=/swagger-ui\r\n```\r\n[here](https://github.com/ozkanpakdil/spring-examples/tree/master/swagger-boot3-graalvm) the working example. After build you can see swagger ui working at [http://localhost:8080/swagger-ui](http://localhost:8080/swagger-ui) which will redirect to http://localhost:8080/swagger-ui/4.15.5/index.html","title":"Using Springdoc with Spring Boot 3 Native","body":"<p>You are using correct dependency</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>but missing the property below</p>\n<pre><code>springdoc.enable-native-support=true\nspringdoc.swagger-ui.path=/swagger-ui\n</code></pre>\n<p><a href=\"https://github.com/ozkanpakdil/spring-examples/tree/master/swagger-boot3-graalvm\" rel=\"nofollow noreferrer\">here</a> the working example. After build you can see swagger ui working at <a href=\"http://localhost:8080/swagger-ui\" rel=\"nofollow noreferrer\">http://localhost:8080/swagger-ui</a> which will redirect to http://localhost:8080/swagger-ui/4.15.5/index.html</p>\n"},{"tags":[],"owner":{"account_id":27799897,"reputation":1,"user_id":21224525,"display_name":"mark"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676940053,"creation_date":1676529471,"answer_id":75468639,"question_id":74712624,"body_markdown":"I test your project (swagger-boot3-graalvm) , it can be compile and genrate a single executable (by `mvn clean package -Pnative native:compile`), but when I ran the executable, the doc is 404. Then I tested it by:\r\n```lang-none\r\njava -Dspring.aot.enabled=true -jar ./target/demo-1.0-SNAPSHOT.jar\r\n```\r\nthe document is OK. Then I tried to run:\r\n```lang-none\r\njava -agentlib:native-image-agent=config-output-dir=src/main/resources/META-INF/native-image -jar ./target/demo-1.0-SNAPSHOT.jar\r\n```\r\nand package (`mvn clean package -Pnative native:compile`) again. \r\nBut compile error with `Error: Detected a ZipFile object in the image heap.`. \r\nMy Compilation environment list：\r\n```lang-none\r\nApache Maven 3.9.0 (9b58d2bad23a66be161c4664ef21ce219c2c8584)\r\nMaven home: /root/apache-maven-3.9.0\r\nJava version: 17.0.6, vendor: GraalVM Community, runtime: /root/graalvm-ce-java17-22.3.1\r\nDefault locale: en_US, platform encoding: UTF-8\r\nOS name: &quot;linux&quot;, version: &quot;3.10.0-1160.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\r\n```","title":"Using Springdoc with Spring Boot 3 Native","body":"<p>I test your project (swagger-boot3-graalvm) , it can be compile and genrate a single executable (by <code>mvn clean package -Pnative native:compile</code>), but when I ran the executable, the doc is 404. Then I tested it by:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -Dspring.aot.enabled=true -jar ./target/demo-1.0-SNAPSHOT.jar\n</code></pre>\n<p>the document is OK. Then I tried to run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -agentlib:native-image-agent=config-output-dir=src/main/resources/META-INF/native-image -jar ./target/demo-1.0-SNAPSHOT.jar\n</code></pre>\n<p>and package (<code>mvn clean package -Pnative native:compile</code>) again.\nBut compile error with <code>Error: Detected a ZipFile object in the image heap.</code>.\nMy Compilation environment list：</p>\n<pre class=\"lang-none prettyprint-override\"><code>Apache Maven 3.9.0 (9b58d2bad23a66be161c4664ef21ce219c2c8584)\nMaven home: /root/apache-maven-3.9.0\nJava version: 17.0.6, vendor: GraalVM Community, runtime: /root/graalvm-ce-java17-22.3.1\nDefault locale: en_US, platform encoding: UTF-8\nOS name: &quot;linux&quot;, version: &quot;3.10.0-1160.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\n</code></pre>\n"}],"owner":{"account_id":4018287,"reputation":482,"user_id":3309578,"display_name":"Sim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4050,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":74754372,"answer_count":2,"score":4,"last_activity_date":1681567436,"creation_date":1670394869,"question_id":74712624,"body_markdown":"I am trying to use Springdoc v2 with Spring Boot 3. It works fine when running it with the JVM, but not when running the native binary.\r\n\r\nThe Spring boot project is created like this: https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.0&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=native,web,lombok\r\n\r\nI&#39;ve added the Springdoc dependency:\r\n```\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n   &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n   &lt;version&gt;2.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nStarting the jar file, I can browse http://localhost:8080/swagger-ui/index.html, but when I run the native binary, I get a 404.\r\n\r\nAccording to the documentation, it seems to support it out of the box: https://springdoc.org/v2/","title":"Using Springdoc with Spring Boot 3 Native","body":"<p>I am trying to use Springdoc v2 with Spring Boot 3. It works fine when running it with the JVM, but not when running the native binary.</p>\n<p>The Spring boot project is created like this: <a href=\"https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.0&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=native,web,lombok\" rel=\"nofollow noreferrer\">https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.0&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=native,web,lombok</a></p>\n<p>I've added the Springdoc dependency:</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n   &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n   &lt;version&gt;2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Starting the jar file, I can browse http://localhost:8080/swagger-ui/index.html, but when I run the native binary, I get a 404.</p>\n<p>According to the documentation, it seems to support it out of the box: <a href=\"https://springdoc.org/v2/\" rel=\"nofollow noreferrer\">https://springdoc.org/v2/</a></p>\n"},{"tags":["java","sftp"],"answers":[{"tags":[],"owner":{"account_id":3179090,"reputation":1,"user_id":2686251,"display_name":"user2686251"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681567356,"creation_date":1681567356,"answer_id":76022714,"question_id":75445828,"body_markdown":"As I understand it, the use of the IdentifyInfo requires supplying a private key. Assuming your private key is located in &lt;home&gt;/.ssh/id_rsa then:\r\n\r\n    File keyFile = new File(System.getProperty(&quot;user.home&quot;) + &quot;/.ssh/id_rsa&quot;);\r\n    IdentityProvider identityInfo = new IdentityInfo(keyFile);\r\n    builder.setIdentityProvider(opts, identityInfo);\r\n\r\nHowever, whilst I have got this working by specifying authentication with user account name and password, I have not been able to get this method using ssh key to work.","title":"How to use SftpFileSystemConfigBuilder.getInstance().setIdentityProvider()","body":"<p>As I understand it, the use of the IdentifyInfo requires supplying a private key. Assuming your private key is located in /.ssh/id_rsa then:</p>\n<pre><code>File keyFile = new File(System.getProperty(&quot;user.home&quot;) + &quot;/.ssh/id_rsa&quot;);\nIdentityProvider identityInfo = new IdentityInfo(keyFile);\nbuilder.setIdentityProvider(opts, identityInfo);\n</code></pre>\n<p>However, whilst I have got this working by specifying authentication with user account name and password, I have not been able to get this method using ssh key to work.</p>\n"}],"owner":{"account_id":23458279,"reputation":1,"user_id":17513448,"display_name":"Ryan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681567356,"creation_date":1676367059,"question_id":75445828,"body_markdown":"I use Apache vfs2 to connect to SFTP server, but the setIdentities() method is deprecated, so I would like to change to use setIdentities() method, but i got the NullPointerException, how to change my code to fix it? thank you.\r\n\r\n```\r\npublic SFtpUtil(String hostName, String portNo, String userId, String userPwd) {\r\n\t\tsftpUri = getSftpUri(hostName, portNo, userId, userPwd);\r\n\t\tlog.info(&quot;sftpUri=&quot; + sftpUri);\r\n\t\tFileSystemOptions opts = new FileSystemOptions();\r\ntry {\r\n\t\t\t\t\t\t\r\n\tSftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(opts, &quot;no&quot;);\r\n\tSftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, true);\r\n\tSftpFileSystemConfigBuilder.getInstance().setConnectTimeout(opts, Duration.ofSeconds(10000));\r\n\r\n// User setIdentities() method, it works, but deprecated\r\n// SftpFileSystemConfigBuilder.getInstance().setIdentities(opts, new File[0]);\r\n\t\t\t\r\n// I follow the suggestion to use setIdentityProvider()\r\nSftpFileSystemConfigBuilder.getInstance().setIdentityProvider(opts, new IdentityInfo(null));\r\n\t\t\tlog.info(&quot;setting SftpFileSystemConfigBuilder finished.&quot;);\r\n\r\n```\r\n\r\n \r\n```\r\nINFO | setting SftpFileSystemConfigBuilder finished.\r\n INFO | create manager\r\n INFO | manager init.\r\norg.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp://xxxxxxxxxxxxx...../&quot;.\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:72)\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpFileProvider.doCreateFileSystem(SftpFileProvider.java:92)\r\n\tat org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:92)\r\n\tat org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:71)\r\n\tat org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:55)\r\n\tat org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:788)\r\n\tat org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:835)\r\n\tat lab.tmp.RunSftp.main(RunSftp.java:19)\r\nCaused by: java.lang.NullPointerException\r\n\tat com.jcraft.jsch.Util.checkTilde(Util.java:489)\r\n\tat com.jcraft.jsch.Util.fromFile(Util.java:506)\r\n\tat com.jcraft.jsch.KeyPair.load(KeyPair.java:540)\r\n\tat com.jcraft.jsch.IdentityFile.newInstance(IdentityFile.java:40)\r\n\tat com.jcraft.jsch.JSch.addIdentity(JSch.java:423)\r\n\tat org.apache.commons.vfs2.provider.sftp.IdentityInfo.addIdentity(IdentityInfo.java:87)\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpClientFactory.addIdentity(SftpClientFactory.java:117)\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpClientFactory.addIdentities(SftpClientFactory.java:104)\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpClientFactory.createConnection(SftpClientFactory.java:154)\r\n\tat org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:65)\r\n\t... 8 more\r\n```\r\n\r\n\r\nsomeone can help me to fix or tell me how to change my code.","title":"How to use SftpFileSystemConfigBuilder.getInstance().setIdentityProvider()","body":"<p>I use Apache vfs2 to connect to SFTP server, but the setIdentities() method is deprecated, so I would like to change to use setIdentities() method, but i got the NullPointerException, how to change my code to fix it? thank you.</p>\n<pre><code>public SFtpUtil(String hostName, String portNo, String userId, String userPwd) {\n        sftpUri = getSftpUri(hostName, portNo, userId, userPwd);\n        log.info(&quot;sftpUri=&quot; + sftpUri);\n        FileSystemOptions opts = new FileSystemOptions();\ntry {\n                        \n    SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(opts, &quot;no&quot;);\n    SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, true);\n    SftpFileSystemConfigBuilder.getInstance().setConnectTimeout(opts, Duration.ofSeconds(10000));\n\n// User setIdentities() method, it works, but deprecated\n// SftpFileSystemConfigBuilder.getInstance().setIdentities(opts, new File[0]);\n            \n// I follow the suggestion to use setIdentityProvider()\nSftpFileSystemConfigBuilder.getInstance().setIdentityProvider(opts, new IdentityInfo(null));\n            log.info(&quot;setting SftpFileSystemConfigBuilder finished.&quot;);\n\n</code></pre>\n<pre><code>INFO | setting SftpFileSystemConfigBuilder finished.\n INFO | create manager\n INFO | manager init.\norg.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp://xxxxxxxxxxxxx...../&quot;.\n    at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:72)\n    at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.doCreateFileSystem(SftpFileProvider.java:92)\n    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:92)\n    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:71)\n    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:55)\n    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:788)\n    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:835)\n    at lab.tmp.RunSftp.main(RunSftp.java:19)\nCaused by: java.lang.NullPointerException\n    at com.jcraft.jsch.Util.checkTilde(Util.java:489)\n    at com.jcraft.jsch.Util.fromFile(Util.java:506)\n    at com.jcraft.jsch.KeyPair.load(KeyPair.java:540)\n    at com.jcraft.jsch.IdentityFile.newInstance(IdentityFile.java:40)\n    at com.jcraft.jsch.JSch.addIdentity(JSch.java:423)\n    at org.apache.commons.vfs2.provider.sftp.IdentityInfo.addIdentity(IdentityInfo.java:87)\n    at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.addIdentity(SftpClientFactory.java:117)\n    at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.addIdentities(SftpClientFactory.java:104)\n    at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.createConnection(SftpClientFactory.java:154)\n    at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:65)\n    ... 8 more\n</code></pre>\n<p>someone can help me to fix or tell me how to change my code.</p>\n"},{"tags":["java","junit","selenium-webdriver"],"comments":[{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1413323843,"post_id":26371032,"comment_id":41399241,"body_markdown":"Why not simply `assertTrue(orderNumber != ... || orderDate != ...);`?  (Or whatever the logic is.)","body":"Why not simply <code>assertTrue(orderNumber != ... || orderDate != ...);</code>?  (Or whatever the logic is.)"},{"owner":{"account_id":333463,"reputation":6290,"user_id":659354,"accept_rate":81,"display_name":"Raystorm"},"score":0,"creation_date":1413328528,"post_id":26371032,"comment_id":41400709,"body_markdown":"At one point I was doing something like the `assertTrue()` you suggest.  I was just hoping some enterprising individual had created `assertOr(assert, assert)` or `assertOr(object, matcher, object, matcher)` (or something similar) basically I don&#39;t like non-descriptive &quot;AssertionError&quot; granted `assertTrue(&quot;didn&#39;t change&quot;, /* logic here */);` would work, I just prefer matcher errors that include the actual details.","body":"At one point I was doing something like the <code>assertTrue()</code> you suggest.  I was just hoping some enterprising individual had created <code>assertOr(assert, assert)</code> or <code>assertOr(object, matcher, object, matcher)</code> (or something similar) basically I don&#39;t like non-descriptive &quot;AssertionError&quot; granted <code>assertTrue(&quot;didn&#39;t change&quot;, &#47;* logic here *&#47;);</code> would work, I just prefer matcher errors that include the actual details."}],"answers":[{"tags":[],"owner":{"account_id":4878731,"reputation":20470,"user_id":3933089,"accept_rate":67,"display_name":"chiastic-security"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1413324785,"creation_date":1413324785,"answer_id":26371278,"question_id":26371032,"body_markdown":"You can&#39;t do this in a hamcrest style without severe contortions that make it much less readable than falling back to `assertTrue`.\r\n\r\nJust do\r\n\r\n    assertTrue(orderNumber.equals(...) || orderDate.equals(...));\r\n\r\nThe new `assertThat` requires matching against a single object, so you&#39;d have to put them into an array or something in order to get it through.","title":"How can I assert that assertion A or assertion B passes with Junit 4?","body":"<p>You can't do this in a hamcrest style without severe contortions that make it much less readable than falling back to <code>assertTrue</code>.</p>\n\n<p>Just do</p>\n\n<pre><code>assertTrue(orderNumber.equals(...) || orderDate.equals(...));\n</code></pre>\n\n<p>The new <code>assertThat</code> requires matching against a single object, so you'd have to put them into an array or something in order to get it through.</p>\n"},{"tags":[],"owner":{"account_id":333463,"reputation":6290,"user_id":659354,"accept_rate":81,"display_name":"Raystorm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1414706774,"creation_date":1414704678,"answer_id":26663679,"question_id":26371032,"body_markdown":"The answer/comment suggesting `assertTrue(orderNumber.equals(...) || orderDate.equals(...));` is indeed the simplest and most direct solution.  However, I also wanted better error messages than just **AssertionError**\r\n\r\nIn order to do that was not trivial.  I&#39;m working with Selenium WebDriver so the actual data being checked belongs to a `WebDriver` object.\r\n\r\nI found my answer thanks to this: http://www.planetgeek.ch/2012/03/07/create-your-own-matcher/ blog post.\r\n\r\nIt turns out that Hamcrest has a `CombinableMatcher` class and a `CombinableEitherMatcher`\r\n\r\nI ended up copying `CombinableEitherMatcher`&#39;s logic to create my own class `Neither`\r\n\r\n    public class Neither&lt;X&gt; \r\n    {\r\n      /**\r\n       * Creates a matcher that matches when neither of the specified matchers \r\n       * match the examined object.\r\n       * &lt;p/&gt;\r\n       * For example:\r\n       * &lt;pre&gt;\r\n       * assertThat(&quot;fan&quot;, neither(containsString(&quot;a&quot;)).nor(containsString(&quot;b&quot;)))\r\n       * &lt;/pre&gt;\r\n       */\r\n      public static &lt;LHS&gt; Neither&lt;LHS&gt; neither(Matcher&lt;LHS&gt; matcher)\r\n      { return new Neither&lt;LHS&gt;(matcher); }\r\n    \r\n      private final Matcher&lt;X&gt; first;\r\n    \r\n      public Neither(Matcher&lt;X&gt; matcher) { this.first = not(matcher); }\r\n    \r\n      public CombinableMatcher&lt;X&gt; nor(Matcher&lt;X&gt; other)\r\n      { return new CombinableMatcher&lt;X&gt;(first).or(not(other)); }\r\n    \r\n      /**\r\n       *  Helper class to do the heavy lifting and provide a usable error\r\n       *  from: http://www.planetgeek.ch/2012/03/07/create-your-own-matcher/\r\n       */\r\n      private class WebElementCombinableMatcher extends BaseMatcher&lt;WebElement&gt;\r\n      {\r\n         private final List&lt;Matcher&lt;WebElement&gt;&gt; matchers = new ArrayList&lt;Matcher&lt;WebElement&gt;&gt;();\r\n         private final List&lt;Matcher&lt;WebElement&gt;&gt; failed = new ArrayList&lt;Matcher&lt;WebElement&gt;&gt;();\r\n    \r\n         private WebElementCombinableMatcher(final Matcher matcher)\r\n         { matchers.add(matcher); }\r\n    \r\n         public WebElementCombinableMatcher and(final Matcher matcher) \r\n         {\r\n            matchers.add(matcher);\r\n            return this;\r\n         }\r\n    \r\n         @Override\r\n         public boolean matches(final Object item)\r\n         {\r\n            for (final Matcher&lt;WebElement&gt; matcher : matchers)\r\n            {\r\n               if (!matcher.matches(item))\r\n               {\r\n                  failed.add(matcher);\r\n                  return false;\r\n               }\r\n            }\r\n            return true;\r\n         }\r\n    \r\n         @Override\r\n         public void describeTo(final Description description)\r\n         { description.appendList(&quot;(&quot;, &quot; &quot; + &quot;and&quot; + &quot; &quot;, &quot;)&quot;, matchers); }\r\n    \r\n         @Override\r\n         public void describeMismatch(final Object item, final Description description)\r\n         {\r\n            for (final Matcher&lt;WebElement&gt; matcher : failed)\r\n            {\r\n               description.appendDescriptionOf(matcher).appendText(&quot; but &quot;);\r\n               matcher.describeMismatch(item, description);\r\n            }\r\n         }    \r\n       \r\n      }\r\n    \r\n    }\r\n\r\nwhich lets me call \r\n`assertThat(driver, niether(matcher(x)).nor(matcher(y));`  \r\n\r\nSince I&#39;m trying to compare specific WebElements obtainable from driver I had to create matchers that I could use inside of *niether/nor*\r\n\r\nFor Example:  \r\n\r\n    public class WebElementValueMatcher extends FeatureMatcher&lt;WebDriver, String&gt;\r\n    {\r\n       public static Matcher&lt;WebDriver&gt; elementHasValue(final By locator,\r\n                                                        String elementValue)\r\n       { return new WebElementValueMatcher(equalTo(elementValue), locator); }\r\n    \r\n       public static Matcher&lt;WebDriver&gt; elementHasValue(final By locator,\r\n                                                        Matcher&lt;String&gt; matcher)\r\n       { return new WebElementValueMatcher(matcher, locator); }\r\n    \r\n       By locator;\r\n    \r\n       public WebElementValueMatcher(Matcher&lt;String&gt; subMatcher, By locator)\r\n       {\r\n          super(subMatcher, locator.toString(), locator.toString());\r\n          this.locator = locator;\r\n       }\r\n    \r\n       public WebElementValueMatcher(Matcher&lt;String&gt; subMatcher,\r\n                                     String featureDescription, String featureName)\r\n       { super(subMatcher, featureDescription, featureName); }\r\n    \r\n       @Override\r\n       protected String featureValueOf(WebDriver actual)\r\n       { return actual.findElement(locator).getAttribute(&quot;value&quot;); }\r\n    \r\n    }\r\n\r\nI have another very similar one that calls `actual.findElement(locator).getText();` in *featureValueOf*\r\n\r\n\r\nHowever now I can simply call  \r\n\r\n    assertThat(driver, \r\n               niether(elementHasValue(By.id(&quot;foo&quot;),&quot;foo&quot;))\r\n                  .nor(elementHasValue(By.id(&quot;bar&quot;),&quot;bar&quot;)));` \r\n\r\nand get clean syntax in my tests and a usable error message.","title":"How can I assert that assertion A or assertion B passes with Junit 4?","body":"<p>The answer/comment suggesting <code>assertTrue(orderNumber.equals(...) || orderDate.equals(...));</code> is indeed the simplest and most direct solution.  However, I also wanted better error messages than just <strong>AssertionError</strong></p>\n\n<p>In order to do that was not trivial.  I'm working with Selenium WebDriver so the actual data being checked belongs to a <code>WebDriver</code> object.</p>\n\n<p>I found my answer thanks to this: <a href=\"http://www.planetgeek.ch/2012/03/07/create-your-own-matcher/\" rel=\"nofollow\">http://www.planetgeek.ch/2012/03/07/create-your-own-matcher/</a> blog post.</p>\n\n<p>It turns out that Hamcrest has a <code>CombinableMatcher</code> class and a <code>CombinableEitherMatcher</code></p>\n\n<p>I ended up copying <code>CombinableEitherMatcher</code>'s logic to create my own class <code>Neither</code></p>\n\n<pre><code>public class Neither&lt;X&gt; \n{\n  /**\n   * Creates a matcher that matches when neither of the specified matchers \n   * match the examined object.\n   * &lt;p/&gt;\n   * For example:\n   * &lt;pre&gt;\n   * assertThat(\"fan\", neither(containsString(\"a\")).nor(containsString(\"b\")))\n   * &lt;/pre&gt;\n   */\n  public static &lt;LHS&gt; Neither&lt;LHS&gt; neither(Matcher&lt;LHS&gt; matcher)\n  { return new Neither&lt;LHS&gt;(matcher); }\n\n  private final Matcher&lt;X&gt; first;\n\n  public Neither(Matcher&lt;X&gt; matcher) { this.first = not(matcher); }\n\n  public CombinableMatcher&lt;X&gt; nor(Matcher&lt;X&gt; other)\n  { return new CombinableMatcher&lt;X&gt;(first).or(not(other)); }\n\n  /**\n   *  Helper class to do the heavy lifting and provide a usable error\n   *  from: http://www.planetgeek.ch/2012/03/07/create-your-own-matcher/\n   */\n  private class WebElementCombinableMatcher extends BaseMatcher&lt;WebElement&gt;\n  {\n     private final List&lt;Matcher&lt;WebElement&gt;&gt; matchers = new ArrayList&lt;Matcher&lt;WebElement&gt;&gt;();\n     private final List&lt;Matcher&lt;WebElement&gt;&gt; failed = new ArrayList&lt;Matcher&lt;WebElement&gt;&gt;();\n\n     private WebElementCombinableMatcher(final Matcher matcher)\n     { matchers.add(matcher); }\n\n     public WebElementCombinableMatcher and(final Matcher matcher) \n     {\n        matchers.add(matcher);\n        return this;\n     }\n\n     @Override\n     public boolean matches(final Object item)\n     {\n        for (final Matcher&lt;WebElement&gt; matcher : matchers)\n        {\n           if (!matcher.matches(item))\n           {\n              failed.add(matcher);\n              return false;\n           }\n        }\n        return true;\n     }\n\n     @Override\n     public void describeTo(final Description description)\n     { description.appendList(\"(\", \" \" + \"and\" + \" \", \")\", matchers); }\n\n     @Override\n     public void describeMismatch(final Object item, final Description description)\n     {\n        for (final Matcher&lt;WebElement&gt; matcher : failed)\n        {\n           description.appendDescriptionOf(matcher).appendText(\" but \");\n           matcher.describeMismatch(item, description);\n        }\n     }    \n\n  }\n\n}\n</code></pre>\n\n<p>which lets me call \n<code>assertThat(driver, niether(matcher(x)).nor(matcher(y));</code>  </p>\n\n<p>Since I'm trying to compare specific WebElements obtainable from driver I had to create matchers that I could use inside of <em>niether/nor</em></p>\n\n<p>For Example:  </p>\n\n<pre><code>public class WebElementValueMatcher extends FeatureMatcher&lt;WebDriver, String&gt;\n{\n   public static Matcher&lt;WebDriver&gt; elementHasValue(final By locator,\n                                                    String elementValue)\n   { return new WebElementValueMatcher(equalTo(elementValue), locator); }\n\n   public static Matcher&lt;WebDriver&gt; elementHasValue(final By locator,\n                                                    Matcher&lt;String&gt; matcher)\n   { return new WebElementValueMatcher(matcher, locator); }\n\n   By locator;\n\n   public WebElementValueMatcher(Matcher&lt;String&gt; subMatcher, By locator)\n   {\n      super(subMatcher, locator.toString(), locator.toString());\n      this.locator = locator;\n   }\n\n   public WebElementValueMatcher(Matcher&lt;String&gt; subMatcher,\n                                 String featureDescription, String featureName)\n   { super(subMatcher, featureDescription, featureName); }\n\n   @Override\n   protected String featureValueOf(WebDriver actual)\n   { return actual.findElement(locator).getAttribute(\"value\"); }\n\n}\n</code></pre>\n\n<p>I have another very similar one that calls <code>actual.findElement(locator).getText();</code> in <em>featureValueOf</em></p>\n\n<p>However now I can simply call  </p>\n\n<pre><code>assertThat(driver, \n           niether(elementHasValue(By.id(\"foo\"),\"foo\"))\n              .nor(elementHasValue(By.id(\"bar\"),\"bar\")));` \n</code></pre>\n\n<p>and get clean syntax in my tests and a usable error message.</p>\n"},{"tags":[],"owner":{"account_id":9691730,"reputation":1318,"user_id":7189597,"display_name":"Sobhan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681566858,"creation_date":1681566858,"answer_id":76022668,"question_id":26371032,"body_markdown":"The approved answer is complete but I think it is outdated and you need to code a lot. for anyone that is looking for a more simpler solution, you can achieve the same functionality as below:\r\n\r\n1)\r\n\r\n    \r\n    \r\n    assertThat(actual).isIn(expected1, expected2);\r\n\r\n2)\r\n\r\n    assertThat(actual, anyOf(is(expected1), is(expected2)));\r\n\r\n3)\r\n\r\n    assertThat(actual, isOneOf(expected1, expected2));\r\n\r\n4)\r\n\r\n    String expectedTitles[] = {&quot;expected1&quot;,&quot;expected2&quot;};\r\n    List&lt;String&gt; expectedTitlesList = Arrays.asList(expectedTitles);\r\n    \r\n    assertTrue(expectedTitlesList.contains((actual)));","title":"How can I assert that assertion A or assertion B passes with Junit 4?","body":"<p>The approved answer is complete but I think it is outdated and you need to code a lot. for anyone that is looking for a more simpler solution, you can achieve the same functionality as below:</p>\n<p>1)</p>\n<pre><code>assertThat(actual).isIn(expected1, expected2);\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>assertThat(actual, anyOf(is(expected1), is(expected2)));\n</code></pre>\n<ol start=\"3\">\n<li></li>\n</ol>\n<pre><code>assertThat(actual, isOneOf(expected1, expected2));\n</code></pre>\n<ol start=\"4\">\n<li></li>\n</ol>\n<pre><code>String expectedTitles[] = {&quot;expected1&quot;,&quot;expected2&quot;};\nList&lt;String&gt; expectedTitlesList = Arrays.asList(expectedTitles);\n\nassertTrue(expectedTitlesList.contains((actual)));\n</code></pre>\n"}],"owner":{"account_id":333463,"reputation":6290,"user_id":659354,"accept_rate":81,"display_name":"Raystorm"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2550,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":26663679,"answer_count":3,"score":0,"last_activity_date":1681566858,"creation_date":1413323644,"question_id":26371032,"body_markdown":"I&#39;m using Junit 4 w/ Selenium WebDriver for some automated testing.  I have a test that records some values on a page, clicks a button on the page to load the next page and then compares the recorded value to make sure they changed.\r\n\r\nThe problem is it&#39;s a *PAIR* of values and only one of them has to change, not both.\r\n\r\nFor testing it I&#39;ve currently implemented the following code: \r\n\r\n    boolean orderNumberChanged = true;\r\n    try\r\n    {\r\n      assertThat(orderNumber,\r\n                 is(not(getValueForElement(By.name(&quot;updateForm:j_id35&quot;)))));\r\n\r\n    }\r\n    catch (AssertionError ae) { orderNumberChanged = false; }\r\n    try\r\n    {\r\n      assertThat(orderDate,\r\n                 is(not(getValueForElement(By.name(&quot;updateForm:j_id37&quot;)))));\r\n\r\n    }\r\n    catch (AssertionError ae)\r\n    {\r\n      if ( !orderNumberChanged )\r\n      { fail(&quot;OrderNumber and OrderDate didn&#39;t change.&quot;); }\r\n    }\r\n\r\nWhile it should work perfectly fine it just *looks* ugly to me and it seams like there should be some way to assert something like this.\r\n\r\nFor the record `getValueForElement()` is a method I wrote to wrap  \r\n`driver.findElement(locator).getAttribute(&quot;value&quot;);`  ","title":"How can I assert that assertion A or assertion B passes with Junit 4?","body":"<p>I'm using Junit 4 w/ Selenium WebDriver for some automated testing.  I have a test that records some values on a page, clicks a button on the page to load the next page and then compares the recorded value to make sure they changed.</p>\n\n<p>The problem is it's a <em>PAIR</em> of values and only one of them has to change, not both.</p>\n\n<p>For testing it I've currently implemented the following code: </p>\n\n<pre><code>boolean orderNumberChanged = true;\ntry\n{\n  assertThat(orderNumber,\n             is(not(getValueForElement(By.name(\"updateForm:j_id35\")))));\n\n}\ncatch (AssertionError ae) { orderNumberChanged = false; }\ntry\n{\n  assertThat(orderDate,\n             is(not(getValueForElement(By.name(\"updateForm:j_id37\")))));\n\n}\ncatch (AssertionError ae)\n{\n  if ( !orderNumberChanged )\n  { fail(\"OrderNumber and OrderDate didn't change.\"); }\n}\n</code></pre>\n\n<p>While it should work perfectly fine it just <em>looks</em> ugly to me and it seams like there should be some way to assert something like this.</p>\n\n<p>For the record <code>getValueForElement()</code> is a method I wrote to wrap<br>\n<code>driver.findElement(locator).getAttribute(\"value\");</code>  </p>\n"},{"tags":["java","google-maps","javafx","routes"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1681567061,"post_id":76022664,"comment_id":134079053,"body_markdown":"The last time I tried google maps in WebView, or gmapsfx (which relies on google maps in WebView), it did not work.  Google does not support using google maps in WebView.  Once it may have worked, even if unsupported.  Now WebVIew does not provide the functionality required for the current versions of Google Maps to function correctly.","body":"The last time I tried google maps in WebView, or gmapsfx (which relies on google maps in WebView), it did not work.  Google does not support using google maps in WebView.  Once it may have worked, even if unsupported.  Now WebVIew does not provide the functionality required for the current versions of Google Maps to function correctly."},{"owner":{"account_id":21686239,"reputation":19,"user_id":16001648,"display_name":"Kacper Bielak"},"score":0,"creation_date":1682060652,"post_id":76022664,"comment_id":134159254,"body_markdown":"oh, i understand. If so, can you recommend any other library that I can use in JavaFX to display the map? Where will I be able to display markers and define a route between points?","body":"oh, i understand. If so, can you recommend any other library that I can use in JavaFX to display the map? Where will I be able to display markers and define a route between points?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1682073272,"post_id":76022664,"comment_id":134161914,"body_markdown":"No.  Mapping isn&#39;t really my field and recommendations aren&#39;t on topic for StackOverflow.  There are numerous mapping solutions, you can consider.  For instance, perhaps Bing Maps or some other HTML-based mapping would work in WebView where Google Maps currently doesn&#39;t.  Or a Swing-based mapping solution based on OpenStreetMap, like [JMapViewer](https://wiki.openstreetmap.org/wiki/JMapViewer) or maybe something from [ArcGIS](https://developers.arcgis.com/java/sample-code/openstreetmap-layer/), or something else (you would need to search and evaluate).","body":"No.  Mapping isn&#39;t really my field and recommendations aren&#39;t on topic for StackOverflow.  There are numerous mapping solutions, you can consider.  For instance, perhaps Bing Maps or some other HTML-based mapping would work in WebView where Google Maps currently doesn&#39;t.  Or a Swing-based mapping solution based on OpenStreetMap, like <a href=\"https://wiki.openstreetmap.org/wiki/JMapViewer\" rel=\"nofollow noreferrer\">JMapViewer</a> or maybe something from <a href=\"https://developers.arcgis.com/java/sample-code/openstreetmap-layer/\" rel=\"nofollow noreferrer\">ArcGIS</a>, or something else (you would need to search and evaluate)."}],"owner":{"account_id":21686239,"reputation":19,"user_id":16001648,"display_name":"Kacper Bielak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681566802,"creation_date":1681566802,"question_id":76022664,"body_markdown":"how to plot a route between several markers on a map in GMapsFX? I have an application written in Java using JavaFX. There is already implemented map with marked markers. During operation, more markers will be added and it can be generated automatically or, for example, by clicking the button at the end. I&#39;ve been looking for info on this but couldn&#39;t find anything specific. Below is the function that initializes my map.\r\n\r\n     @Override\r\n     public void mapInitialized() {\r\n      MapOptions mapOptions = new MapOptions();\r\n      mapOptions.mapType(MapTypeIdEnum.ROADMAP).zoom(16).keyboardShortcuts(false);\r\n      map = mapView.createMap(mapOptions);\r\n      LatLong latLong = new LatLong(50.0650887,19.9245536);\r\n      MarkerOptions markerOptions=new MarkerOptions();\r\n      marker = new Marker(markerOptions);\r\n      marker.setPosition(latLong);\r\n      map.addMarker(marker);\r\n      map.setCenter(latLong);\r\n     }","title":"How to route between several markers in gmapsfx / JavaFX?","body":"<p>how to plot a route between several markers on a map in GMapsFX? I have an application written in Java using JavaFX. There is already implemented map with marked markers. During operation, more markers will be added and it can be generated automatically or, for example, by clicking the button at the end. I've been looking for info on this but couldn't find anything specific. Below is the function that initializes my map.</p>\n<pre><code> @Override\n public void mapInitialized() {\n  MapOptions mapOptions = new MapOptions();\n  mapOptions.mapType(MapTypeIdEnum.ROADMAP).zoom(16).keyboardShortcuts(false);\n  map = mapView.createMap(mapOptions);\n  LatLong latLong = new LatLong(50.0650887,19.9245536);\n  MarkerOptions markerOptions=new MarkerOptions();\n  marker = new Marker(markerOptions);\n  marker.setPosition(latLong);\n  map.addMarker(marker);\n  map.setCenter(latLong);\n }\n</code></pre>\n"},{"tags":["java","frame","jdialog"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681565949,"creation_date":1342107524,"answer_id":11455446,"question_id":11454687,"body_markdown":"I found this blog entry on the topic: [Making a Custom Frameless Window][1]\r\n\r\nThe key thing is to call `JDialog::setUndecorated(true)` to suppress the frame and titlebar.  You can do the same thing on a `JFrame`.\r\n\r\nThe call should be made when the dialog or frame&#39;s window is not displayed.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20170510191837/http://www.stupidjavatricks.com/2005/09/making-a-custom-frameless-window/","title":"how to make a JDialog frameless?","body":"<p>I found this blog entry on the topic: <a href=\"https://web.archive.org/web/20170510191837/http://www.stupidjavatricks.com/2005/09/making-a-custom-frameless-window/\" rel=\"nofollow noreferrer\">Making a Custom Frameless Window</a></p>\n<p>The key thing is to call <code>JDialog::setUndecorated(true)</code> to suppress the frame and titlebar.  You can do the same thing on a <code>JFrame</code>.</p>\n<p>The call should be made when the dialog or frame's window is not displayed.</p>\n"}],"owner":{"account_id":1555897,"reputation":1193,"user_id":1447011,"accept_rate":14,"display_name":"user1447011"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4060,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681565949,"creation_date":1342105168,"question_id":11454687,"body_markdown":"my dialog example as following:\r\n\r\n\r\n    public class DialogNotify extends JDialog{\r\n       public DialogNotify() {\r\n          setModal(true);\r\n          setSize(200, 100);\r\n          setVisible(true);\r\n       }\r\n    }\r\n\r\nhow to make it shown frameless ? by frameless, I mean with &quot;close&quot; button on top right or menu bar on top left.","title":"how to make a JDialog frameless?","body":"<p>my dialog example as following:</p>\n\n<pre><code>public class DialogNotify extends JDialog{\n   public DialogNotify() {\n      setModal(true);\n      setSize(200, 100);\n      setVisible(true);\n   }\n}\n</code></pre>\n\n<p>how to make it shown frameless ? by frameless, I mean with \"close\" button on top right or menu bar on top left.</p>\n"},{"tags":["java","plugins","server","minecraft","ram"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1681565651,"post_id":76022575,"comment_id":134078883,"body_markdown":"Why do you need to do this while it’s running?","body":"Why do you need to do this while it’s running?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681566212,"post_id":76022575,"comment_id":134078950,"body_markdown":"You can&#39;t change the max heap size while a JVM is running.  It is not possible.","body":"You can&#39;t change the max heap size while a JVM is running.  It is not possible."}],"owner":{"account_id":28313369,"reputation":1,"user_id":21650305,"display_name":"Micha Andre"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681566305,"answer_count":0,"score":0,"last_activity_date":1681565584,"creation_date":1681565584,"question_id":76022575,"body_markdown":"I can&#39;t use the java plugin to set the maximum allocated RAM to the server while it is running, but I need to make the RAM increase or decrease on the server depending on the number of players.\r\n\r\nI tried several ways, via java.args and via runtime. Both methods do not work, it gives a big error to the console.","title":"How to set the maximum allocated RAM for the java server, without stopping the server? (-Xmx)","body":"<p>I can't use the java plugin to set the maximum allocated RAM to the server while it is running, but I need to make the RAM increase or decrease on the server depending on the number of players.</p>\n<p>I tried several ways, via java.args and via runtime. Both methods do not work, it gives a big error to the console.</p>\n"},{"tags":["java","user-interface","javafx","desktop-application"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1628103102,"post_id":68654297,"comment_id":121334565,"body_markdown":"That `JRE System Library [J2SE-1.5]` line is likely the problem.  Java 1.5 does not know what a module descriptor is.  Remove that library from your project.","body":"That <code>JRE System Library [J2SE-1.5]</code> line is likely the problem.  Java 1.5 does not know what a module descriptor is.  Remove that library from your project."},{"owner":{"account_id":19929279,"reputation":35,"user_id":14603176,"display_name":"Ali"},"score":0,"creation_date":1628109509,"post_id":68654297,"comment_id":121336693,"body_markdown":"Finally, it is working, Thanks a lot.","body":"Finally, it is working, Thanks a lot."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1628110469,"post_id":68654297,"comment_id":121336990,"body_markdown":"&quot;_and I can not even delete it_&quot; – I find that strange, given having a module descriptor is not a requirement, even for JavaFX applications.","body":"&quot;<i>and I can not even delete it</i>&quot; – I find that strange, given having a module descriptor is not a requirement, even for JavaFX applications."},{"owner":{"account_id":19929279,"reputation":35,"user_id":14603176,"display_name":"Ali"},"score":0,"creation_date":1628119964,"post_id":68654297,"comment_id":121338948,"body_markdown":"I worked with javaFX for some time, and I never used a module file before. that is the first time I see it","body":"I worked with javaFX for some time, and I never used a module file before. that is the first time I see it"}],"answers":[{"tags":[],"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1628112874,"creation_date":1628102098,"answer_id":68656439,"question_id":68654297,"body_markdown":"The module-info.java file looks pretty typical for modular Java projects (Java 9+). It is usual to require the javafx.controls, and to open your application (here, actually named &quot;application&quot;) to javafx. I think this latter statement pertains to the javafx module needing to be able to look into the module that has the entry point for the program.\r\n\r\nBut the location of the file seems suspect to me. I&#39;m not up on all the complexities, but I do think the file would be better located directly under the /src directory rather than in a default package. Usually the module-info.java file is the top file folder level and the source code for the program is a child folder.\r\n\r\nIn other words, the module-info.java file and the /application package file should be in the same folder. At least, that is how things are set up on my javafx programs and modular java programs.\r\n\r\nEDIT: I noticed that your Build Path is listing Java 1.5! This Java doesn&#39;t support modules. Modules were introduced in Java 9.","title":"error in module-info.java file in javafx project","body":"<p>The module-info.java file looks pretty typical for modular Java projects (Java 9+). It is usual to require the javafx.controls, and to open your application (here, actually named &quot;application&quot;) to javafx. I think this latter statement pertains to the javafx module needing to be able to look into the module that has the entry point for the program.</p>\n<p>But the location of the file seems suspect to me. I'm not up on all the complexities, but I do think the file would be better located directly under the /src directory rather than in a default package. Usually the module-info.java file is the top file folder level and the source code for the program is a child folder.</p>\n<p>In other words, the module-info.java file and the /application package file should be in the same folder. At least, that is how things are set up on my javafx programs and modular java programs.</p>\n<p>EDIT: I noticed that your Build Path is listing Java 1.5! This Java doesn't support modules. Modules were introduced in Java 9.</p>\n"},{"tags":[],"owner":{"account_id":13404313,"reputation":1,"user_id":9672794,"display_name":"shen55"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681565352,"creation_date":1681555275,"answer_id":76021737,"question_id":68654297,"body_markdown":"You have to add the JavaFX library under **Modulepath** as a **user Library**. so the problem will go away. [ see this screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vt1nI.png","title":"error in module-info.java file in javafx project","body":"<p>You have to add the JavaFX library under <strong>Modulepath</strong> as a <strong>user Library</strong>. so the problem will go away. <a href=\"https://i.stack.imgur.com/vt1nI.png\" rel=\"nofollow noreferrer\"> see this screenshot</a></p>\n"}],"owner":{"account_id":19929279,"reputation":35,"user_id":14603176,"display_name":"Ali"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2573,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":68656439,"answer_count":2,"score":-1,"last_activity_date":1681565352,"creation_date":1628091939,"question_id":68654297,"body_markdown":"I have been using javaFX for a while now, but a day ago when I crated a new project I noticed that there is a new file created automatically with the name (module-info.java) in the default package, and I can not even delete it!!. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nthe following code is written there:\r\n```\r\nmodule prog0 {\r\n\trequires javafx.controls;\r\n\t\r\n\topens application to javafx.graphics, javafx.fxml;\r\n}\r\n```\r\nunfortunatily all lines has errors \r\n\r\n1ST line : **Syntax error on token &quot;module&quot;, interface expected**\r\n\r\n2nd line : **Syntax error on token &quot;.&quot;, , expected**\r\n\r\n3rd line : **Multiple markers at this line\r\n\r\n\t- Syntax error on token &quot;to&quot;, = \r\n\t expected\r\n\r\n\t- Syntax error on token &quot;.&quot;, , \r\n\t expected\r\n\r\n\t- Syntax error on token &quot;to&quot;, = \r\n\t expected\r\n\r\n\t- Syntax error on token &quot;.&quot;, , \r\n\t expected**\r\n\r\n\r\nLibraries used:\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lcJKD.png\r\n  [2]: https://i.stack.imgur.com/1fdZd.png","title":"error in module-info.java file in javafx project","body":"<p>I have been using javaFX for a while now, but a day ago when I crated a new project I noticed that there is a new file created automatically with the name (module-info.java) in the default package, and I can not even delete it!!.</p>\n<p><a href=\"https://i.stack.imgur.com/lcJKD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lcJKD.png\" alt=\"enter image description here\" /></a></p>\n<p>the following code is written there:</p>\n<pre><code>module prog0 {\n    requires javafx.controls;\n    \n    opens application to javafx.graphics, javafx.fxml;\n}\n</code></pre>\n<p>unfortunatily all lines has errors</p>\n<p>1ST line : <strong>Syntax error on token &quot;module&quot;, interface expected</strong></p>\n<p>2nd line : <strong>Syntax error on token &quot;.&quot;, , expected</strong></p>\n<p>3rd line : **Multiple markers at this line</p>\n<pre><code>- Syntax error on token &quot;to&quot;, = \n expected\n\n- Syntax error on token &quot;.&quot;, , \n expected\n\n- Syntax error on token &quot;to&quot;, = \n expected\n\n- Syntax error on token &quot;.&quot;, , \n expected**\n</code></pre>\n<p>Libraries used:\n<a href=\"https://i.stack.imgur.com/1fdZd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1fdZd.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","kotlin","intellij-idea"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":2,"creation_date":1681551376,"post_id":76021432,"comment_id":134077128,"body_markdown":"You need to show us some code and error messages.","body":"You need to show us some code and error messages."},{"owner":{"account_id":5299598,"reputation":1176,"user_id":4229716,"accept_rate":12,"display_name":"JITHIN_PATHROSE"},"score":0,"creation_date":1681551764,"post_id":76021432,"comment_id":134077153,"body_markdown":"updated the question with the code. I hope this helps. Thanks","body":"updated the question with the code. I hope this helps. Thanks"},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":1,"creation_date":1681551991,"post_id":76021432,"comment_id":134077176,"body_markdown":"And please include some error messages.","body":"And please include some error messages."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1681552530,"post_id":76021432,"comment_id":134077228,"body_markdown":"The code block after &quot;and I have used this in my java class&quot; does not show that you used the `ListConverter` written in Kotlin. Did you mean to write `public class AConverter extends ListConverter&lt;A&gt;`?","body":"The code block after &quot;and I have used this in my java class&quot; does not show that you used the <code>ListConverter</code> written in Kotlin. Did you mean to write <code>public class AConverter extends ListConverter&lt;A&gt;</code>?"},{"owner":{"account_id":5299598,"reputation":1176,"user_id":4229716,"accept_rate":12,"display_name":"JITHIN_PATHROSE"},"score":0,"creation_date":1681552801,"post_id":76021432,"comment_id":134077259,"body_markdown":"@Sweeper yes, also I have called a method from the super class.","body":"@Sweeper yes, also I have called a method from the super class."},{"owner":{"account_id":13722742,"reputation":16978,"user_id":10134209,"display_name":"gidds"},"score":1,"creation_date":1681554319,"post_id":76021432,"comment_id":134077422,"body_markdown":"Note that the Java-to-Kotlin converter is a bit rough-and-ready; its output usually needs some manual clean-up, and may not even compile. (That doesn&#39;t prevent it being a very useful too, however.)","body":"Note that the Java-to-Kotlin converter is a bit rough-and-ready; its output usually needs some manual clean-up, and may not even compile. (That doesn&#39;t prevent it being a very useful too, however.)"},{"owner":{"account_id":17327133,"reputation":855,"user_id":12551115,"display_name":"vanyochek"},"score":0,"creation_date":1682326671,"post_id":76021432,"comment_id":134191741,"body_markdown":"Can you attach a link to a sample project?","body":"Can you attach a link to a sample project?"}],"owner":{"account_id":5299598,"reputation":1176,"user_id":4229716,"accept_rate":12,"display_name":"JITHIN_PATHROSE"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681564042,"creation_date":1681551302,"question_id":76021432,"body_markdown":"I am using a mix of Java and Kotlin code in my project. I converted some of my new Java classes to Kotlin using the _&quot;convert Java file to Kotlin file&quot;_ option in IntelliJ IDEA.\r\n\r\nWhen I try to Maven build my project, I am getting _&quot;cannot find symbol&quot;_ everywhere I use the new converted files.\r\n\r\nThis is my class converted to Kotlin\r\n\r\n```kotlin\r\nopen class ListConverter&lt;AnyTypeList&gt; {\r\n\r\n    private val objectMapper = ObjectMapper()\r\n        .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS) // ISODate\r\n        .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\r\n        .registerModule(JavaTimeModule())\r\n        .registerModule(ParameterNamesModule())\r\n        .registerModule(Jdk8Module())\r\n        .registerModule(KotlinModule())\r\n\r\n    fun transformToType(attributeValue: AttributeValue): List&lt;AnyTypeList&gt; {\r\n        try {\r\n            val json = attributeValue.s()\r\n            return objectMapper.readValue(json, object : TypeReference&lt;List&lt;AnyTypeList&gt;&gt;() {})\r\n        } catch (e: JsonProcessingException) {\r\n            throw RuntimeException(&quot;Failed to convert AttributeValue to list &quot;, e)\r\n        }\r\n    }\r\n\r\n    fun transformFromType(inputs: List&lt;AnyTypeList&gt;?): AttributeValue {\r\n        return if (inputs == null) {\r\n            AttributeValue.builder().nul(true).build()\r\n        } else try {\r\n            val json = objectMapper.writeValueAsString(inputs)\r\n            AttributeValue.builder().s(json).build()\r\n        } catch (e: JsonProcessingException) {\r\n            throw RuntimeException(&quot;Failed to convert list to AttributeValue&quot;, e)\r\n        }\r\n    } \r\n}\r\n```\r\nI have used this in my Java class\r\n\r\n```java\r\npublic class AConverter extends AnyTypeListConverter&lt;A&gt; {\r\n    \r\n    public List&lt;A&gt; transformTo(B attributeValue) {\r\n        return transformToType(attributeValue);\r\n    } \r\n}\r\n```\r\n\r\nand I am getting errors even at the imports.\r\n\r\n```none\r\n [INFO] -------------------------------------------------------------\r\n [ERROR] COMPILATION ERROR :  [INFO]\r\n -------------------------------------------------------------   \r\n [ERROR] /C:/model/a/AConverter.java:[5,12] cannot find symbol\r\n```\r\n\r\nWhat should I do to resolve this?\r\n\r\n\r\n","title":"Kotlin code not getting compiled in my IntelliJ and getting errors when doing Maven install","body":"<p>I am using a mix of Java and Kotlin code in my project. I converted some of my new Java classes to Kotlin using the <em>&quot;convert Java file to Kotlin file&quot;</em> option in IntelliJ IDEA.</p>\n<p>When I try to Maven build my project, I am getting <em>&quot;cannot find symbol&quot;</em> everywhere I use the new converted files.</p>\n<p>This is my class converted to Kotlin</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>open class ListConverter&lt;AnyTypeList&gt; {\n\n    private val objectMapper = ObjectMapper()\n        .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS) // ISODate\n        .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n        .registerModule(JavaTimeModule())\n        .registerModule(ParameterNamesModule())\n        .registerModule(Jdk8Module())\n        .registerModule(KotlinModule())\n\n    fun transformToType(attributeValue: AttributeValue): List&lt;AnyTypeList&gt; {\n        try {\n            val json = attributeValue.s()\n            return objectMapper.readValue(json, object : TypeReference&lt;List&lt;AnyTypeList&gt;&gt;() {})\n        } catch (e: JsonProcessingException) {\n            throw RuntimeException(&quot;Failed to convert AttributeValue to list &quot;, e)\n        }\n    }\n\n    fun transformFromType(inputs: List&lt;AnyTypeList&gt;?): AttributeValue {\n        return if (inputs == null) {\n            AttributeValue.builder().nul(true).build()\n        } else try {\n            val json = objectMapper.writeValueAsString(inputs)\n            AttributeValue.builder().s(json).build()\n        } catch (e: JsonProcessingException) {\n            throw RuntimeException(&quot;Failed to convert list to AttributeValue&quot;, e)\n        }\n    } \n}\n</code></pre>\n<p>I have used this in my Java class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AConverter extends AnyTypeListConverter&lt;A&gt; {\n    \n    public List&lt;A&gt; transformTo(B attributeValue) {\n        return transformToType(attributeValue);\n    } \n}\n</code></pre>\n<p>and I am getting errors even at the imports.</p>\n<pre class=\"lang-none prettyprint-override\"><code> [INFO] -------------------------------------------------------------\n [ERROR] COMPILATION ERROR :  [INFO]\n -------------------------------------------------------------   \n [ERROR] /C:/model/a/AConverter.java:[5,12] cannot find symbol\n</code></pre>\n<p>What should I do to resolve this?</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1593181,"reputation":5129,"user_id":1476062,"display_name":"Dennis Meng"},"score":0,"creation_date":1381356646,"post_id":19283688,"comment_id":28553909,"body_markdown":"So wait, is it adding `d` and `d1` instead of concatenating them?","body":"So wait, is it adding <code>d</code> and <code>d1</code> instead of concatenating them?"},{"owner":{"account_id":2808454,"reputation":14373,"user_id":2415194,"accept_rate":87,"display_name":"nachokk"},"score":0,"creation_date":1381356659,"post_id":19283688,"comment_id":28553921,"body_markdown":"Your question is too unclear for me.","body":"Your question is too unclear for me."},{"owner":{"account_id":7808,"reputation":24390,"user_id":13687,"display_name":"John Gardner"},"score":1,"creation_date":1381356849,"post_id":19283688,"comment_id":28553988,"body_markdown":"given 2 values, what do you expect to be printed?  right now, for values &quot;1&quot; and &quot;2&quot;, this would print &quot;D=12&quot; (because it is &quot;D=1&quot; + &quot;1&quot; + &quot;2&quot; as strings.)  If you want to add the numbers, you need another set of parens: `&quot;d=&quot; + (d+d1)`","body":"given 2 values, what do you expect to be printed?  right now, for values &quot;1&quot; and &quot;2&quot;, this would print &quot;D=12&quot; (because it is &quot;D=1&quot; + &quot;1&quot; + &quot;2&quot; as strings.)  If you want to add the numbers, you need another set of parens: <code>&quot;d=&quot; + (d+d1)</code>"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1381356871,"post_id":19283688,"comment_id":28553996,"body_markdown":"Could you [[edit]] your question and include example of input data, expected and real output?","body":"Could you [<a href=\"https://stackoverflow.com/posts/19283688/edit\">edit</a>] your question and include example of input data, expected and real output?"},{"owner":{"account_id":3353967,"reputation":1,"user_id":2817384,"display_name":"Isra Souod Rashid"},"score":0,"creation_date":1381359560,"post_id":19283688,"comment_id":28555007,"body_markdown":"um it is the super.paint(g)","body":"um it is the super.paint(g)"},{"owner":{"account_id":3353967,"reputation":1,"user_id":2817384,"display_name":"Isra Souod Rashid"},"score":0,"creation_date":1381359713,"post_id":19283688,"comment_id":28555052,"body_markdown":"after that i put values.paint(g) and it says that the method PaintGraphic is undefined for the type linkedList","body":"after that i put values.paint(g) and it says that the method PaintGraphic is undefined for the type linkedList"},{"owner":{"account_id":3353967,"reputation":1,"user_id":2817384,"display_name":"Isra Souod Rashid"},"score":0,"creation_date":1381359808,"post_id":19283688,"comment_id":28555083,"body_markdown":"and for g.drawString it says that the method drawString is in the type graphics is not applicable for the arguments (Double, int, int)","body":"and for g.drawString it says that the method drawString is in the type graphics is not applicable for the arguments (Double, int, int)"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1381360860,"post_id":19283688,"comment_id":28555387,"body_markdown":"There is no method within the `Graphics` API that can paint a double..","body":"There is no method within the <code>Graphics</code> API that can paint a double.."}],"answers":[{"tags":[],"owner":{"account_id":3217462,"reputation":189,"user_id":2715744,"display_name":"Marin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381357004,"creation_date":1381357004,"answer_id":19283784,"question_id":19283688,"body_markdown":"You can convert Double to String with String.valueOf(d) and then paint it on the graphics with g.drawString method","title":"public void paint( Graphics g ) is not painting for double it is painting for string","body":"<p>You can convert Double to String with String.valueOf(d) and then paint it on the graphics with g.drawString method</p>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1381361329,"creation_date":1381361329,"answer_id":19284552,"question_id":19283688,"body_markdown":"There is very little context to the question, making it difficult to provide a suitable answer.\r\n\r\nFirstly, each time you call `super.paint`, you have the potential of clearing what was previously painted, making the entire loop, worthless...\r\n\r\nSecondly, you should also avoid magic numbers where possible.\r\n\r\nThirdly, doing a double iteration (`it.next`) in the loop could cause a `NoSuchElementException\r\n\r\nFourthly, `Graphics` does not provide any means to paint anything other than a `String`, so you HAVE to convert the `double` value to a `String` value, there is no other choice...\r\n\r\n    public void paint( Graphics g )\r\n    {\r\n        super.paint(g);\r\n        FontMetrics fm = g.getFontMetrics();\r\n        Iterator it = values.iterator();\r\n        int width = getWidth();\r\n        int height = getHeight();   \r\n        int y = height;\r\n        while (it.hasNext())\r\n        {\r\n            double d = (Double)(it.next()); \r\n            y -= fm.getHeight();\r\n            String text = NumberFormatter.getNumberFormat().format(d);\r\n            int x = width - fm.stringWidth(text);\r\n            g.drawString(text, x, y + fm.getAscent());\r\n        }\r\n    }\r\n\r\nYou may wish to take a look at [2D Graphics](http://docs.oracle.com/javase/tutorial/2d/) and [Working with Text APIs](http://docs.oracle.com/javase/tutorial/2d/text/index.html) in particular.\r\n\r\nLastly, you should avoid overriding the `paint` method.  If you&#39;re overriding this from something like `JFrame` or `Frame`, then you should create a custom component (extending from something like `JPanel`) and place you custom painting there.  Apart from anything else, it is double buffered.","title":"public void paint( Graphics g ) is not painting for double it is painting for string","body":"<p>There is very little context to the question, making it difficult to provide a suitable answer.</p>\n\n<p>Firstly, each time you call <code>super.paint</code>, you have the potential of clearing what was previously painted, making the entire loop, worthless...</p>\n\n<p>Secondly, you should also avoid magic numbers where possible.</p>\n\n<p>Thirdly, doing a double iteration (<code>it.next</code>) in the loop could cause a `NoSuchElementException</p>\n\n<p>Fourthly, <code>Graphics</code> does not provide any means to paint anything other than a <code>String</code>, so you HAVE to convert the <code>double</code> value to a <code>String</code> value, there is no other choice...</p>\n\n<pre><code>public void paint( Graphics g )\n{\n    super.paint(g);\n    FontMetrics fm = g.getFontMetrics();\n    Iterator it = values.iterator();\n    int width = getWidth();\n    int height = getHeight();   \n    int y = height;\n    while (it.hasNext())\n    {\n        double d = (Double)(it.next()); \n        y -= fm.getHeight();\n        String text = NumberFormatter.getNumberFormat().format(d);\n        int x = width - fm.stringWidth(text);\n        g.drawString(text, x, y + fm.getAscent());\n    }\n}\n</code></pre>\n\n<p>You may wish to take a look at <a href=\"http://docs.oracle.com/javase/tutorial/2d/\" rel=\"nofollow\">2D Graphics</a> and <a href=\"http://docs.oracle.com/javase/tutorial/2d/text/index.html\" rel=\"nofollow\">Working with Text APIs</a> in particular.</p>\n\n<p>Lastly, you should avoid overriding the <code>paint</code> method.  If you're overriding this from something like <code>JFrame</code> or <code>Frame</code>, then you should create a custom component (extending from something like <code>JPanel</code>) and place you custom painting there.  Apart from anything else, it is double buffered.</p>\n"},{"tags":[],"owner":{"account_id":28136769,"reputation":1,"user_id":21500417,"display_name":"VS Shankar"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1681563515,"creation_date":1680936739,"answer_id":75963751,"question_id":19283688,"body_markdown":"The method `public void paint(Graphics g)` gives us access to an object of the `Graphics` class. Using the object of the `Graphics` class, we can call the `drawString()` method of the `Graphics` class to write a text message in the applet window.","title":"public void paint( Graphics g ) is not painting for double it is painting for string","body":"<p>The method <code>public void paint(Graphics g)</code> gives us access to an object of the <code>Graphics</code> class. Using the object of the <code>Graphics</code> class, we can call the <code>drawString()</code> method of the <code>Graphics</code> class to write a text message in the applet window.</p>\n"}],"owner":{"account_id":3353967,"reputation":1,"user_id":2817384,"display_name":"Isra Souod Rashid"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1086,"favorite_count":0,"down_vote_count":8,"up_vote_count":0,"answer_count":3,"score":-8,"last_activity_date":1681563515,"creation_date":1381356462,"question_id":19283688,"body_markdown":"public void paint( Graphics g ) is not painting for double it is painting for string and i want to convert string to double.\r\n \r\nSo im trying to do a stack calculator and im using linked list to do it with doubles\r\nthe part for paint is not doing what i want. And what i want is that i got buttons to hold the adding and dividing etc.. and im trying to punch in a number and it would paint it right away on my window, and its not doing that. And Im using eclipse. \r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    import NumberTree.Ornament;\r\n    import java.util.Iterator;\r\n    import java.util.LinkedList;\r\n\r\n    public class StackCalc extends JFrame implements ActionListener {\r\n        private   LinkedList&lt;Double&gt; values;\r\n        double value1 , value2 ;\r\n        \r\n        JTextField theTextField;\r\n        JButton boxButton;\r\n        \r\n        public static void main ( String[] args) {\r\n             new StackCalc();\r\n        }\r\n        \r\n        public StackCalc() {\r\n            setDefaultCloseOperation( EXIT_ON_CLOSE );\r\n            \r\n            setLayout( new FlowLayout());\r\n            setTitle(&quot;StackCalc&quot;);\r\n            setSize(new Dimension(600,600));\r\n            \r\n            boxButton = new JButton(&quot;add&quot;);\r\n            add(boxButton);\r\n            boxButton.addActionListener( this );\r\n            boxButton = new JButton(&quot;multi&quot;);\r\n            add(boxButton);\r\n            boxButton.addActionListener( this );\r\n            boxButton = new JButton(&quot;divide&quot;);\r\n            add(boxButton);\r\n            boxButton.addActionListener( this );\r\n            boxButton = new JButton(&quot;subt&quot;);\r\n            add(boxButton);\r\n            boxButton.addActionListener( this );\r\n            \r\n            theTextField = new JTextField(&quot;Write Something &quot;);\r\n            add(theTextField);\r\n            theTextField.addActionListener( this );\r\n            \r\n            values = new LinkedList&lt;Double&gt;(); // make the stack\r\n            setVisible(true);\r\n      }\r\n    \r\n    public void actionPerformed(ActionEvent e) {\r\n        if  ( e.getSource()==theTextField )  {\r\n            value1 = Double.parseDouble(theTextField.getText());\r\n            values.push(value1);\r\n          }\r\n    }\r\n    \r\n    public void add() {//return nothing\r\n        value1=values.pop();\r\n        value2=values.pop();\r\n        values.push (value1 + value2);\r\n    }\r\n\r\n    public void multi() { //return nothing\r\n        value1=values.pop();\r\n        value2=values.pop();\r\n        values.push (value1 * value2);\r\n    }\r\n\r\n    public void divide() {//return nothing\r\n        value1=values.pop();\r\n        value2=values.pop();\r\n        values.push (value1 / value2);\r\n    }\r\n\r\n    public void subt() {//return nothing\r\n        value1=values.pop();\r\n        value2=values.pop();\r\n        values.push (value1 - value2);\r\n    }\r\n\r\n    public void paint( Graphics g ) {\r\n        Iterator it = values.iterator();\r\n        while (it.hasNext()) {\r\n            double d = (Double)(it.next()); \r\n            Double d1 = (Double)(it.next()); \r\n            System.out.println(&quot;d=&quot;+d + d1 );\r\n            \r\n            super.paint(g);\r\n            //((LinkedList) values).paint(g);\r\n            //values = LinkedList.paint(g);\r\n            \r\n            g.create(29, 40, 100, 200); // at the bottom of the screen\r\n            //g.drawString( value2, 50,420 ); \r\n           //g.drawString( values, 50,480 );    \r\n        }\r\n    }\r\n   ","title":"public void paint( Graphics g ) is not painting for double it is painting for string","body":"<p>public void paint( Graphics g ) is not painting for double it is painting for string and i want to convert string to double.</p>\n\n<p>So im trying to do a stack calculator and im using linked list to do it with doubles\nthe part for paint is not doing what i want. And what i want is that i got buttons to hold the adding and dividing etc.. and im trying to punch in a number and it would paint it right away on my window, and its not doing that. And Im using eclipse. </p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport NumberTree.Ornament;\nimport java.util.Iterator;\nimport java.util.LinkedList;\n\npublic class StackCalc extends JFrame implements ActionListener {\n    private   LinkedList&lt;Double&gt; values;\n    double value1 , value2 ;\n\n    JTextField theTextField;\n    JButton boxButton;\n\n    public static void main ( String[] args) {\n         new StackCalc();\n    }\n\n    public StackCalc() {\n        setDefaultCloseOperation( EXIT_ON_CLOSE );\n\n        setLayout( new FlowLayout());\n        setTitle(\"StackCalc\");\n        setSize(new Dimension(600,600));\n\n        boxButton = new JButton(\"add\");\n        add(boxButton);\n        boxButton.addActionListener( this );\n        boxButton = new JButton(\"multi\");\n        add(boxButton);\n        boxButton.addActionListener( this );\n        boxButton = new JButton(\"divide\");\n        add(boxButton);\n        boxButton.addActionListener( this );\n        boxButton = new JButton(\"subt\");\n        add(boxButton);\n        boxButton.addActionListener( this );\n\n        theTextField = new JTextField(\"Write Something \");\n        add(theTextField);\n        theTextField.addActionListener( this );\n\n        values = new LinkedList&lt;Double&gt;(); // make the stack\n        setVisible(true);\n  }\n\npublic void actionPerformed(ActionEvent e) {\n    if  ( e.getSource()==theTextField )  {\n        value1 = Double.parseDouble(theTextField.getText());\n        values.push(value1);\n      }\n}\n\npublic void add() {//return nothing\n    value1=values.pop();\n    value2=values.pop();\n    values.push (value1 + value2);\n}\n\npublic void multi() { //return nothing\n    value1=values.pop();\n    value2=values.pop();\n    values.push (value1 * value2);\n}\n\npublic void divide() {//return nothing\n    value1=values.pop();\n    value2=values.pop();\n    values.push (value1 / value2);\n}\n\npublic void subt() {//return nothing\n    value1=values.pop();\n    value2=values.pop();\n    values.push (value1 - value2);\n}\n\npublic void paint( Graphics g ) {\n    Iterator it = values.iterator();\n    while (it.hasNext()) {\n        double d = (Double)(it.next()); \n        Double d1 = (Double)(it.next()); \n        System.out.println(\"d=\"+d + d1 );\n\n        super.paint(g);\n        //((LinkedList) values).paint(g);\n        //values = LinkedList.paint(g);\n\n        g.create(29, 40, 100, 200); // at the bottom of the screen\n        //g.drawString( value2, 50,420 ); \n       //g.drawString( values, 50,480 );    \n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-manifest","aapt2"],"answers":[{"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681485563,"creation_date":1681485563,"answer_id":76016628,"question_id":76016435,"body_markdown":"Your very first line seems suspect:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot;?&gt;&lt;manifest xmlns:android=&quot;h                                                                                                                                                             ttp://schemas.android.com/apk/res/android&quot; package=&quot;khjjhkghkg.yulyuuyklyuky&quot; pl                                                                                                                                                             atformBuildVersionCode=&quot;1&quot; platformBuildVersionName=&quot;1.0&quot;&gt;\r\n\r\nRemove the absurd amout of spacing between `&quot;h` and `&quot;ttp:...&quot;`, and `pl` and `atform...`","title":"How to fix: AndroidManifest.xml:26: error: attribute &#39;android:name&#39;","body":"<p>Your very first line seems suspect:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot;?&gt;&lt;manifest xmlns:android=&quot;h                                                                                                                                                             ttp://schemas.android.com/apk/res/android&quot; package=&quot;khjjhkghkg.yulyuuyklyuky&quot; pl                                                                                                                                                             atformBuildVersionCode=&quot;1&quot; platformBuildVersionName=&quot;1.0&quot;&gt;\n</code></pre>\n<p>Remove the absurd amout of spacing between <code>&quot;h</code> and <code>&quot;ttp:...&quot;</code>, and <code>pl</code> and <code>atform...</code></p>\n"}],"owner":{"account_id":28305769,"reputation":11,"user_id":21643805,"display_name":"Samael Morningstar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681562490,"creation_date":1681484205,"question_id":76016435,"body_markdown":"To build my APK file I run the following command:\r\n\r\n    /opt/android/build-tools/android-7.0/aapt2 link compiled_res/resources.zip /opt/android/platforms/android-23/android.jar --manifest App-APK/AndroidManifest.xml --java gen -o out/res.apk\r\n\r\nbut I get the following errors on build:\r\n```\r\nApp-APK/AndroidManifest.xml:26: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:32: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:38: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:44: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:49: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:55: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:67: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:77: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:83: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:84: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:85: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:86: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:87: error: attribute &#39;android:name&#39; .\r\nApp-APK/AndroidManifest.xml:88: error: attribute &#39;android:name&#39; .\r\nerror: failed processing manifest.\r\n```\r\n\r\nMy AndroidManifest.xml is as follows:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot;?&gt;&lt;manifest xmlns:android=&quot;h                                                                                                                                                             ttp://schemas.android.com/apk/res/android&quot; package=&quot;khjjhkghkg.yulyuuyklyuky&quot; pl                                                                                                                                                             atformBuildVersionCode=&quot;1&quot; platformBuildVersionName=&quot;1.0&quot;&gt;\r\n    &lt;uses-permission name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.SYSTEM_OVERLAY_WINDOW&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.WAKE_LOCK&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.RECEIVE_SMS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.READ_SMS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.SEND_SMS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.VIBRATE&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.GET_TASKS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIO                                                                                                                                                             NS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.READ_CONTACTS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.WRITE_CONTACTS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission-sdk-23 name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTI                                                                                                                                                             MIZATIONS&quot;/&gt;\r\n    &lt;uses-permission name=&quot;android.permission.CAMERA&quot;/&gt;\r\n    &lt;uses-feature name=&quot;android.hardware.camera&quot;/&gt;\r\n    &lt;uses-feature name=&quot;android.hardware.camera.autofocus&quot;/&gt;\r\n    &lt;uses-feature name=&quot;android.hardware.camera.front&quot; required=&quot;false&quot;/&gt;\r\n    &lt;application allowBackup=&quot;true&quot; debuggable=&quot;true&quot; icon=&quot;@mipmap/ic_launcher&quot;                                                                                                                                                              label=&quot;Google Play&quot; screenOrientation=&quot;portrait&quot; supportsRtl=&quot;true&quot; theme=&quot;@sty                                                                                                                                                             le/Theme.Translucent.NoTitleBar&quot;&gt;\r\n        &lt;activity android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtfuyhtyhrtfrf&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.intent.action.MAIN&quot;/&gt;\r\n                &lt;category name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;receiver enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuu                                                                                                                                                             yklyuky.eryeryeryeryer&quot; permission=&quot;android.permission.BROADCAST_SMS&quot;&gt;\r\n            &lt;intent-filter priority=&quot;999&quot;&gt;\r\n                &lt;action name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\r\n                &lt;action name=&quot;android.provider.Telephony.SMS_RECEIVED&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n        &lt;receiver enabled=&quot;true&quot; exported=&quot;false&quot; android:name=&quot;khjjhkghkg.yulyu                                                                                                                                                             uyklyuky.eryeryeryeryery&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\r\n                &lt;action name=&quot;Alram&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n        &lt;receiver android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtyrtryrtytry&quot; permissi                                                                                                                                                             on=&quot;android.permission.BROADCAST_SMS&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.provider.Telephony.SMS_DELIVER&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n        &lt;receiver android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtuyrturtutrur&quot; permiss                                                                                                                                                             ion=&quot;android.permission.BROADCAST_WAP_PUSH&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.provider.Telephony.WAP_PUSH_DELIVER&quot;/&gt;\r\n                &lt;data mimeType=&quot;application/vnd.wap.mms-message&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n        &lt;activity android:name=&quot;khjjhkghkg.yulyuuyklyuky.uykykuykyukyu&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.intent.action.SEND&quot;/&gt;\r\n                &lt;action name=&quot;android.intent.action.SENDTO&quot;/&gt;\r\n                &lt;category name=&quot;android.intent.category.DEFAULT&quot;/&gt;\r\n                &lt;category name=&quot;android.intent.category.BROWSABLE&quot;/&gt;\r\n                &lt;data scheme=&quot;sms&quot;/&gt;\r\n                &lt;data scheme=&quot;smsto&quot;/&gt;\r\n                &lt;data scheme=&quot;mms&quot;/&gt;\r\n                &lt;data scheme=&quot;mmsto&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.tyiityit                                                                                                                                                             yityi&quot; permission=&quot;android.permission.SEND_RESPOND_VIA_MESSAGE&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.intent.action.RESPOND_VIA_MESSAGE&quot;/&gt;\r\n                &lt;category name=&quot;android.intent.category.DEFAULT&quot;/&gt;\r\n                &lt;data scheme=&quot;sms&quot;/&gt;\r\n                &lt;data scheme=&quot;smsto&quot;/&gt;\r\n                &lt;data scheme=&quot;mms&quot;/&gt;\r\n                &lt;data scheme=&quot;mmsto&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/service&gt;\r\n        &lt;service enabled=&quot;true&quot; exported=&quot;false&quot; label=&quot;Google Play&quot; android:nam                                                                                                                                                             e=&quot;khjjhkghkg.yulyuuyklyuky.gdfgdfgfgfdgd&quot; permission=&quot;android.permission.BIND_A                                                                                                                                                             CCESSIBILITY_SERVICE&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action name=&quot;android.accessibilityservice.AccessibilityService&quot;                                                                                                                                                             /&gt;\r\n            &lt;/intent-filter&gt;\r\n            &lt;meta-data name=&quot;android.accessibilityservice&quot; resource=&quot;@xml/access                                                                                                                                                             ibility_service_config&quot;/&gt;\r\n        &lt;/service&gt;\r\n        &lt;service enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuy                                                                                                                                                             klyuky.rtutrutrurtu&quot; permission=&quot;android.permission.BIND_JOB_SERVICE&quot;/&gt;\r\n        &lt;activity label=&quot;&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.sdfsfsdfsdfs&quot;/                                                                                                                                                             &gt;\r\n        &lt;activity label=&quot;&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.tuityiyttityi&quot;                                                                                                                                                              screenOrientation=&quot;portrait&quot;/&gt;\r\n        &lt;service enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuy                                                                                                                                                             klyuky.urewerwerwe&quot; process=&quot;:cproc&quot;/&gt;\r\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.eryeryer                                                                                                                                                             yeryr&quot;/&gt;\r\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.ityytity                                                                                                                                                             itit&quot;/&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n\r\n```\r\n\r\nI&#39;ve tried renaming `android:name` to `name` and I was expecting the APK to build without any errors but that is not happening. The goal is for `AndroidManifest` to declare `uses-permission` for each permission that my app uses and for `appt2` to build an APK file without any errors.","title":"How to fix: AndroidManifest.xml:26: error: attribute &#39;android:name&#39;","body":"<p>To build my APK file I run the following command:</p>\n<pre><code>/opt/android/build-tools/android-7.0/aapt2 link compiled_res/resources.zip /opt/android/platforms/android-23/android.jar --manifest App-APK/AndroidManifest.xml --java gen -o out/res.apk\n</code></pre>\n<p>but I get the following errors on build:</p>\n<pre><code>App-APK/AndroidManifest.xml:26: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:32: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:38: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:44: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:49: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:55: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:67: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:77: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:83: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:84: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:85: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:86: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:87: error: attribute 'android:name' .\nApp-APK/AndroidManifest.xml:88: error: attribute 'android:name' .\nerror: failed processing manifest.\n</code></pre>\n<p>My AndroidManifest.xml is as follows:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot;?&gt;&lt;manifest xmlns:android=&quot;h                                                                                                                                                             ttp://schemas.android.com/apk/res/android&quot; package=&quot;khjjhkghkg.yulyuuyklyuky&quot; pl                                                                                                                                                             atformBuildVersionCode=&quot;1&quot; platformBuildVersionName=&quot;1.0&quot;&gt;\n    &lt;uses-permission name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.SYSTEM_OVERLAY_WINDOW&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.WAKE_LOCK&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.INTERNET&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.RECEIVE_SMS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.READ_SMS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.SEND_SMS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.VIBRATE&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.GET_TASKS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIO                                                                                                                                                             NS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.READ_CONTACTS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.WRITE_CONTACTS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission-sdk-23 name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTI                                                                                                                                                             MIZATIONS&quot;/&gt;\n    &lt;uses-permission name=&quot;android.permission.CAMERA&quot;/&gt;\n    &lt;uses-feature name=&quot;android.hardware.camera&quot;/&gt;\n    &lt;uses-feature name=&quot;android.hardware.camera.autofocus&quot;/&gt;\n    &lt;uses-feature name=&quot;android.hardware.camera.front&quot; required=&quot;false&quot;/&gt;\n    &lt;application allowBackup=&quot;true&quot; debuggable=&quot;true&quot; icon=&quot;@mipmap/ic_launcher&quot;                                                                                                                                                              label=&quot;Google Play&quot; screenOrientation=&quot;portrait&quot; supportsRtl=&quot;true&quot; theme=&quot;@sty                                                                                                                                                             le/Theme.Translucent.NoTitleBar&quot;&gt;\n        &lt;activity android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtfuyhtyhrtfrf&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.intent.action.MAIN&quot;/&gt;\n                &lt;category name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;receiver enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuu                                                                                                                                                             yklyuky.eryeryeryeryer&quot; permission=&quot;android.permission.BROADCAST_SMS&quot;&gt;\n            &lt;intent-filter priority=&quot;999&quot;&gt;\n                &lt;action name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\n                &lt;action name=&quot;android.provider.Telephony.SMS_RECEIVED&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;receiver enabled=&quot;true&quot; exported=&quot;false&quot; android:name=&quot;khjjhkghkg.yulyu                                                                                                                                                             uyklyuky.eryeryeryeryery&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\n                &lt;action name=&quot;Alram&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;receiver android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtyrtryrtytry&quot; permissi                                                                                                                                                             on=&quot;android.permission.BROADCAST_SMS&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.provider.Telephony.SMS_DELIVER&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;receiver android:name=&quot;khjjhkghkg.yulyuuyklyuky.rtuyrturtutrur&quot; permiss                                                                                                                                                             ion=&quot;android.permission.BROADCAST_WAP_PUSH&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.provider.Telephony.WAP_PUSH_DELIVER&quot;/&gt;\n                &lt;data mimeType=&quot;application/vnd.wap.mms-message&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;activity android:name=&quot;khjjhkghkg.yulyuuyklyuky.uykykuykyukyu&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.intent.action.SEND&quot;/&gt;\n                &lt;action name=&quot;android.intent.action.SENDTO&quot;/&gt;\n                &lt;category name=&quot;android.intent.category.DEFAULT&quot;/&gt;\n                &lt;category name=&quot;android.intent.category.BROWSABLE&quot;/&gt;\n                &lt;data scheme=&quot;sms&quot;/&gt;\n                &lt;data scheme=&quot;smsto&quot;/&gt;\n                &lt;data scheme=&quot;mms&quot;/&gt;\n                &lt;data scheme=&quot;mmsto&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.tyiityit                                                                                                                                                             yityi&quot; permission=&quot;android.permission.SEND_RESPOND_VIA_MESSAGE&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.intent.action.RESPOND_VIA_MESSAGE&quot;/&gt;\n                &lt;category name=&quot;android.intent.category.DEFAULT&quot;/&gt;\n                &lt;data scheme=&quot;sms&quot;/&gt;\n                &lt;data scheme=&quot;smsto&quot;/&gt;\n                &lt;data scheme=&quot;mms&quot;/&gt;\n                &lt;data scheme=&quot;mmsto&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/service&gt;\n        &lt;service enabled=&quot;true&quot; exported=&quot;false&quot; label=&quot;Google Play&quot; android:nam                                                                                                                                                             e=&quot;khjjhkghkg.yulyuuyklyuky.gdfgdfgfgfdgd&quot; permission=&quot;android.permission.BIND_A                                                                                                                                                             CCESSIBILITY_SERVICE&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action name=&quot;android.accessibilityservice.AccessibilityService&quot;                                                                                                                                                             /&gt;\n            &lt;/intent-filter&gt;\n            &lt;meta-data name=&quot;android.accessibilityservice&quot; resource=&quot;@xml/access                                                                                                                                                             ibility_service_config&quot;/&gt;\n        &lt;/service&gt;\n        &lt;service enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuy                                                                                                                                                             klyuky.rtutrutrurtu&quot; permission=&quot;android.permission.BIND_JOB_SERVICE&quot;/&gt;\n        &lt;activity label=&quot;&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.sdfsfsdfsdfs&quot;/                                                                                                                                                             &gt;\n        &lt;activity label=&quot;&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.tuityiyttityi&quot;                                                                                                                                                              screenOrientation=&quot;portrait&quot;/&gt;\n        &lt;service enabled=&quot;true&quot; exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuy                                                                                                                                                             klyuky.urewerwerwe&quot; process=&quot;:cproc&quot;/&gt;\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.eryeryer                                                                                                                                                             yeryr&quot;/&gt;\n        &lt;service exported=&quot;true&quot; android:name=&quot;khjjhkghkg.yulyuuyklyuky.ityytity                                                                                                                                                             itit&quot;/&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n\n</code></pre>\n<p>I've tried renaming <code>android:name</code> to <code>name</code> and I was expecting the APK to build without any errors but that is not happening. The goal is for <code>AndroidManifest</code> to declare <code>uses-permission</code> for each permission that my app uses and for <code>appt2</code> to build an APK file without any errors.</p>\n"},{"tags":["java","sockets","arraylist","serversocket","chatroom"],"comments":[{"owner":{"account_id":1442965,"reputation":133,"user_id":1362492,"accept_rate":60,"display_name":"Bl H"},"score":0,"creation_date":1340004433,"post_id":11078437,"comment_id":14502613,"body_markdown":"By the way, I am quite new to Java- where would I use the flush() method to print it out straight away?","body":"By the way, I am quite new to Java- where would I use the flush() method to print it out straight away?"}],"answers":[{"tags":[],"owner":{"account_id":145570,"reputation":3550,"user_id":355461,"display_name":"Marc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340004835,"creation_date":1340004835,"answer_id":11078603,"question_id":11078437,"body_markdown":"You are having the same problem as [here][1]. System.in doesn&#39;t return anything until the user pressed enter. Then you get the whole line to read.\r\n\r\n  [1]: https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it","title":"how to print out message straight away? java chat room","body":"<p>You are having the same problem as <a href=\"https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it\">here</a>. System.in doesn't return anything until the user pressed enter. Then you get the whole line to read.</p>\n"},{"tags":[],"owner":{"account_id":1144334,"reputation":902,"user_id":1127443,"accept_rate":93,"display_name":"Rahul Thakur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340005709,"creation_date":1340005709,"answer_id":11078777,"question_id":11078437,"body_markdown":"Read on [Socket][1] &amp; [ServerSocket][2]\r\n\r\nBasically you need to establish a `client socket` which connects to a `server socket` then you need to pass the `i/o streams` between the two to print messages from the client to the server &amp; vice-versa.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html","title":"how to print out message straight away? java chat room","body":"<p>Read on <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html\" rel=\"nofollow\">Socket</a> &amp; <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html\" rel=\"nofollow\">ServerSocket</a></p>\n\n<p>Basically you need to establish a <code>client socket</code> which connects to a <code>server socket</code> then you need to pass the <code>i/o streams</code> between the two to print messages from the client to the server &amp; vice-versa.</p>\n"}],"owner":{"account_id":1442965,"reputation":133,"user_id":1362492,"accept_rate":60,"display_name":"Bl H"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681562020,"creation_date":1340004079,"question_id":11078437,"body_markdown":"I have a server/client chat room. When the client connects to the server, and sends a message, the client program prints out the message that it sent, but on another client program that is connected to the server, it does not print out until the user presses the &#39;enter&#39; key.\r\n\r\nOn the client side:\r\n\r\n    \r\n    try {\r\n\t    //Strings to hold messages in and out:\r\n            String userinput, serverinput;\r\n        \r\n            //Getting input from the user:\r\n            BufferedReader input = new BufferedReader(new InputStreamReader(System.in));\r\n            \r\n            //Messages from the server will be printed to the console, messages from console will be sent to the socket:\r\n            while(true) {\r\n                userinput = input.readLine();\r\n                serverout.println(username + &quot;&gt; &quot; + userinput);\r\n                \r\n                serverinput = clientin.readLine();\r\n                System.out.println(serverinput);\r\n            }\r\n        }\r\n\r\nOn the server side:\r\n    \r\n    public void run() {\r\n                PrintWriter output = null;\r\n                BufferedReader input = null;\r\n                String message;\r\n                SchoolRoomServer server = new SchoolRoomServer();;\r\n                try {\r\n                    //i/o for clients:\r\n                    output = new PrintWriter(socket.getOutputStream());\r\n                    input = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n                } catch (IOException ioe) {\r\n                    System.err.println(ioe);\r\n                    System.exit(1);\r\n                }\r\n                \r\n                try {\r\n                    while((message = input.readLine()) != null) {\r\n                        server.showAll(message, output);\r\n                    }\r\n                } catch (IOException ioe) {\r\n                    System.err.println(ioe);\r\n                    System.err.println(&quot;Damn errors.&quot;);\r\n                    System.exit(1);\r\n                }\r\n            }\r\n\r\nBy the way- the server.showAll(message, output); method is this:\r\n    \r\n    public void showAll(String msg, PrintWriter printwriter) {\r\n        for(int i = 0; i &lt; listWriters.size(); i++) {\r\n            if(listWriters.get(i) != printwriter) {\r\n                listWriters.get(i).println(msg);\r\n            }\r\n        }\r\n    }\r\n\r\nlistWriters is an Arraylist of PrintWriters, which gets a PrintWriter associated with a client each time a new thread is made for that client.\r\n\r\nSo, do any ideas on how to immediately print out messages?\r\n","title":"how to print out message straight away? java chat room","body":"<p>I have a server/client chat room. When the client connects to the server, and sends a message, the client program prints out the message that it sent, but on another client program that is connected to the server, it does not print out until the user presses the 'enter' key.</p>\n<p>On the client side:</p>\n<pre><code>try {\n    //Strings to hold messages in and out:\n        String userinput, serverinput;\n    \n        //Getting input from the user:\n        BufferedReader input = new BufferedReader(new InputStreamReader(System.in));\n        \n        //Messages from the server will be printed to the console, messages from console will be sent to the socket:\n        while(true) {\n            userinput = input.readLine();\n            serverout.println(username + &quot;&gt; &quot; + userinput);\n            \n            serverinput = clientin.readLine();\n            System.out.println(serverinput);\n        }\n    }\n</code></pre>\n<p>On the server side:</p>\n<pre><code>public void run() {\n            PrintWriter output = null;\n            BufferedReader input = null;\n            String message;\n            SchoolRoomServer server = new SchoolRoomServer();;\n            try {\n                //i/o for clients:\n                output = new PrintWriter(socket.getOutputStream());\n                input = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            } catch (IOException ioe) {\n                System.err.println(ioe);\n                System.exit(1);\n            }\n            \n            try {\n                while((message = input.readLine()) != null) {\n                    server.showAll(message, output);\n                }\n            } catch (IOException ioe) {\n                System.err.println(ioe);\n                System.err.println(&quot;Damn errors.&quot;);\n                System.exit(1);\n            }\n        }\n</code></pre>\n<p>By the way- the server.showAll(message, output); method is this:</p>\n<pre><code>public void showAll(String msg, PrintWriter printwriter) {\n    for(int i = 0; i &lt; listWriters.size(); i++) {\n        if(listWriters.get(i) != printwriter) {\n            listWriters.get(i).println(msg);\n        }\n    }\n}\n</code></pre>\n<p>listWriters is an Arraylist of PrintWriters, which gets a PrintWriter associated with a client each time a new thread is made for that client.</p>\n<p>So, do any ideas on how to immediately print out messages?</p>\n"},{"tags":["java","concurrency"],"comments":[{"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"score":0,"creation_date":1681488644,"post_id":76016015,"comment_id":134069893,"body_markdown":"bizarre question. please follow the https://stackoverflow.com/help/minimal-reproducible-example","body":"bizarre question. please follow the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"},{"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"score":0,"creation_date":1681496414,"post_id":76016015,"comment_id":134071555,"body_markdown":"@ursa you r right. I will simplify whole code to few lines, and update my question on Monday. I think continuation class is capable of pausing a thread, not killing. If it were, they would have implemented killing it also in joinutil function.","body":"@ursa you r right. I will simplify whole code to few lines, and update my question on Monday. I think continuation class is capable of pausing a thread, not killing. If it were, they would have implemented killing it also in joinutil function."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681561998,"creation_date":1681560930,"answer_id":76022217,"question_id":76016015,"body_markdown":"The `joinUntil` interrupts unfinished tasks but your code is not allowing interrupt properly as you are trapping `InterruptedException` here:\r\n\r\n    try {\r\n        Thread.sleep(1000L);\r\n    } catch (Exception e) {\r\n    }\r\n\r\nJust change above code to re-throw `RuntimeException` or replace `wait.accept(Duration.ofSeconds(1));` by `Thread.sleep(1000L);` so that you don&#39;t ignore `InterruptedException`:\r\n\r\n    Callable&lt;String&gt; callableBlocking = () -&gt; {\r\n        while (true) {\r\n            log.accept(&quot;fetchFail.callableBlocking.while&quot;);\r\n            Thread.sleep(1000L);    \r\n        }\r\n    };\r\n\r\nYou can also simplify the code without shutdown/close as try-with-resources and `.ShutdownOnFailure()` deal with this for you:\r\n\r\n    try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {\r\n        ...\r\n    }\r\n","title":"java StructuredTaskScope.joinUntil is not working for blocking Callable","body":"<p>The <code>joinUntil</code> interrupts unfinished tasks but your code is not allowing interrupt properly as you are trapping <code>InterruptedException</code> here:</p>\n<pre><code>try {\n    Thread.sleep(1000L);\n} catch (Exception e) {\n}\n</code></pre>\n<p>Just change above code to re-throw <code>RuntimeException</code> or replace <code>wait.accept(Duration.ofSeconds(1));</code> by <code>Thread.sleep(1000L);</code> so that you don't ignore <code>InterruptedException</code>:</p>\n<pre><code>Callable&lt;String&gt; callableBlocking = () -&gt; {\n    while (true) {\n        log.accept(&quot;fetchFail.callableBlocking.while&quot;);\n        Thread.sleep(1000L);    \n    }\n};\n</code></pre>\n<p>You can also simplify the code without shutdown/close as try-with-resources and <code>.ShutdownOnFailure()</code> deal with this for you:</p>\n<pre><code>try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76022217,"answer_count":1,"score":0,"last_activity_date":1681561998,"creation_date":1681481579,"question_id":76016015,"body_markdown":"In Java, &lt;br&gt;\r\nCan i input a callable (that runs forever) to a StructuredTaskScope,&lt;br&gt;\r\nand use joinUntil function to set a timeout,&lt;br&gt;\r\nand expect it to be stop automatically? &lt;br&gt;\r\n\r\nPlease see the implementation [here][1]\r\n\r\nHere is the callable that runs forever\r\n```\r\nCallable&lt;String&gt; callableBlocking = () -&gt; {\r\nd.ci(&quot;fetchFail.callableBlocking&quot;, &quot;begin&quot;);\r\n   while (true) {\r\n      d.ci(&quot;fetchFail.callableBlocking&quot;, &quot;while&quot;);\r\n      TS_ThreadWait.of(Duration.ofSeconds(1));\r\n   }\r\n// d.ci(&quot;fetchFail.callableBlocking&quot;, &quot;never ends&quot;);\r\n// return &quot;4&quot;;\r\n};\r\n```\r\n\r\n\r\n----------- UPDATE ---------------------&lt;br&gt;\r\nPlease find the simplified code to recreate the situation\r\n\r\n```\r\nConsumer&lt;String&gt; log = msg -&gt; System.out.println(&quot;log -&gt; &quot; + msg);\r\nConsumer&lt;Duration&gt; wait = duration -&gt; {\r\n    try {\r\n        Thread.sleep(duration);\r\n    } catch (Exception e) {\r\n    }\r\n};\r\nCallable&lt;String&gt; callableBlocking = () -&gt; {\r\n    log.accept(&quot;fetchFail.callableBlocking.begin&quot;);\r\n    while (true) {\r\n        log.accept(&quot;fetchFail.callableBlocking.while&quot;);\r\n        wait.accept(Duration.ofSeconds(1));\r\n    }\r\n//  log.accept(&quot;fetchFail.callableBlocking.neverEnds&quot;);\r\n//  return &quot;never returns&quot;;\r\n};\r\nvar scope = new StructuredTaskScope.ShutdownOnFailure();\r\ntry {\r\n    var future = scope.fork(callableBlocking);\r\n    scope.joinUntil(Instant.now().plusSeconds(1));\r\n    scope.throwIfFailed();\r\n    log.accept(&quot;result: &quot; + future.resultNow());\r\n} catch (InterruptedException | TimeoutException | ExecutionException e) {\r\n    log.accept(e.getClass().getName() + &quot;:&quot; + e.getMessage());\r\n    if (e instanceof TimeoutException) {\r\n        scope.shutdown();\r\n        log.accept(&quot;INFO: shutdown triggered&quot;);\r\n    }\r\n} finally {\r\n    scope.close();\r\n}\r\n```\r\n\r\nCONSOLE:\r\n```\r\ntugal@TULAP /cygdrive/c/me/codes/com.tugalsan/tst/com.tugalsan.tst.thread \r\n$ java --enable-preview --add-modules jdk.incubator.concurrent -jar target/com.tugalsan.tst.thread-1.0-SNAPSHOT-jar-with-dependencies.jar \r\nWARNING: Using incubator modules: jdk.incubator.concurrent \r\nlog -&gt; fetchFail.callableBlocking.begin \r\nlog -&gt; fetchFail.callableBlocking.while \r\nlog -&gt; fetchFail.callableBlocking.while \r\nlog -&gt; java.util.concurrent.TimeoutException:null \r\nlog -&gt; INFO: shutdown triggered\r\nlog -&gt; fetchFail.callableBlocking.while \r\nlog -&gt; fetchFail.callableBlocking.while \r\nlog -&gt; fetchFail.callableBlocking.while \r\nlog -&gt; fetchFail.callableBlocking.while \r\n...\r\n```\r\n\r\n\r\n  [1]: https://github.com/tugalsan/com.tugalsan.tst.thread/blob/main/src/main/java/com/tugalsan/tst/thread/Main.java","title":"java StructuredTaskScope.joinUntil is not working for blocking Callable","body":"<p>In Java, <br>\nCan i input a callable (that runs forever) to a StructuredTaskScope,<br>\nand use joinUntil function to set a timeout,<br>\nand expect it to be stop automatically? <br></p>\n<p>Please see the implementation <a href=\"https://github.com/tugalsan/com.tugalsan.tst.thread/blob/main/src/main/java/com/tugalsan/tst/thread/Main.java\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Here is the callable that runs forever</p>\n<pre><code>Callable&lt;String&gt; callableBlocking = () -&gt; {\nd.ci(&quot;fetchFail.callableBlocking&quot;, &quot;begin&quot;);\n   while (true) {\n      d.ci(&quot;fetchFail.callableBlocking&quot;, &quot;while&quot;);\n      TS_ThreadWait.of(Duration.ofSeconds(1));\n   }\n// d.ci(&quot;fetchFail.callableBlocking&quot;, &quot;never ends&quot;);\n// return &quot;4&quot;;\n};\n</code></pre>\n<p>----------- UPDATE ---------------------<br>\nPlease find the simplified code to recreate the situation</p>\n<pre><code>Consumer&lt;String&gt; log = msg -&gt; System.out.println(&quot;log -&gt; &quot; + msg);\nConsumer&lt;Duration&gt; wait = duration -&gt; {\n    try {\n        Thread.sleep(duration);\n    } catch (Exception e) {\n    }\n};\nCallable&lt;String&gt; callableBlocking = () -&gt; {\n    log.accept(&quot;fetchFail.callableBlocking.begin&quot;);\n    while (true) {\n        log.accept(&quot;fetchFail.callableBlocking.while&quot;);\n        wait.accept(Duration.ofSeconds(1));\n    }\n//  log.accept(&quot;fetchFail.callableBlocking.neverEnds&quot;);\n//  return &quot;never returns&quot;;\n};\nvar scope = new StructuredTaskScope.ShutdownOnFailure();\ntry {\n    var future = scope.fork(callableBlocking);\n    scope.joinUntil(Instant.now().plusSeconds(1));\n    scope.throwIfFailed();\n    log.accept(&quot;result: &quot; + future.resultNow());\n} catch (InterruptedException | TimeoutException | ExecutionException e) {\n    log.accept(e.getClass().getName() + &quot;:&quot; + e.getMessage());\n    if (e instanceof TimeoutException) {\n        scope.shutdown();\n        log.accept(&quot;INFO: shutdown triggered&quot;);\n    }\n} finally {\n    scope.close();\n}\n</code></pre>\n<p>CONSOLE:</p>\n<pre><code>tugal@TULAP /cygdrive/c/me/codes/com.tugalsan/tst/com.tugalsan.tst.thread \n$ java --enable-preview --add-modules jdk.incubator.concurrent -jar target/com.tugalsan.tst.thread-1.0-SNAPSHOT-jar-with-dependencies.jar \nWARNING: Using incubator modules: jdk.incubator.concurrent \nlog -&gt; fetchFail.callableBlocking.begin \nlog -&gt; fetchFail.callableBlocking.while \nlog -&gt; fetchFail.callableBlocking.while \nlog -&gt; java.util.concurrent.TimeoutException:null \nlog -&gt; INFO: shutdown triggered\nlog -&gt; fetchFail.callableBlocking.while \nlog -&gt; fetchFail.callableBlocking.while \nlog -&gt; fetchFail.callableBlocking.while \nlog -&gt; fetchFail.callableBlocking.while \n...\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","itext"],"answers":[{"tags":[],"owner":{"account_id":16768626,"reputation":11,"user_id":12121665,"display_name":"Raul Vitor L"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678223948,"creation_date":1678223879,"answer_id":75667254,"question_id":75666987,"body_markdown":"In that way you just render the byte array in the client side\r\nThe current code works for me, you dont need to put anything in the controller \r\n\r\n        File file = new File(&quot;MYPDFFILE.PDF&quot;);\r\n       \r\n        final myByte[] data = FileUtils.readFileToByteArray(file);\r\n\r\n        final ByteArrayResource resource = new ByteArrayResource(myByte);\r\n        return ResponseEntity\r\n                .ok()\r\n                .contentLength(data.length)\r\n                .header(&quot;Content-type&quot;, &quot;application/octet-stream&quot;)\r\n                .header(&quot;Content-disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + file.getName() + &quot;\\&quot;&quot;)\r\n                .body(resource);\r\n","title":"I can&#39;t download the pdf I created with Java (Springboot). How can I download?","body":"<p>In that way you just render the byte array in the client side\nThe current code works for me, you dont need to put anything in the controller</p>\n<pre><code>    File file = new File(&quot;MYPDFFILE.PDF&quot;);\n   \n    final myByte[] data = FileUtils.readFileToByteArray(file);\n\n    final ByteArrayResource resource = new ByteArrayResource(myByte);\n    return ResponseEntity\n            .ok()\n            .contentLength(data.length)\n            .header(&quot;Content-type&quot;, &quot;application/octet-stream&quot;)\n            .header(&quot;Content-disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + file.getName() + &quot;\\&quot;&quot;)\n            .body(resource);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":266915,"reputation":2035,"user_id":554760,"display_name":"Magnus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678223897,"creation_date":1678223897,"answer_id":75667256,"question_id":75666987,"body_markdown":"Even thou you added the &quot;produces = &quot;application/pdf&quot; you need to set the content-type in the header:\r\n\r\nheaders.add(&quot;Content-type&quot;, &quot;application/pdf&quot;);\r\n\r\nThe produces directive controllers &quot;the mapped handler&quot; for your content, but your code writes raw data, please see: https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-responseentity\r\n\r\n\r\n\r\n    @PostMapping(value = &quot;/download/generateReport/{id}&quot;, produces = &quot;application/pdf&quot;)\r\n    public ResponseEntity&lt;InputStreamResource&gt; generateFavoriteReport(@PathVariable String id) throws Exception {\r\n        ReportRequest reportRequest= this.reportService.findByRequestWithId(id);                    \r\n        ByteArrayInputStream in =  this.reportService.generateFavoriteReport(reportRequest);            \r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=FavoriteReport.pdf&quot;);\r\n        headers.add(&quot;Access-Control-Expose-Headers&quot;, &quot;*&quot;);\r\n        headers.add(&quot;Content-type&quot;, &quot;application/pdf&quot;);  \r\n       \r\n        return ResponseEntity.ok().headers(headers).body(new InputStreamResource(in));\r\n    }","title":"I can&#39;t download the pdf I created with Java (Springboot). How can I download?","body":"<p>Even thou you added the &quot;produces = &quot;application/pdf&quot; you need to set the content-type in the header:</p>\n<p>headers.add(&quot;Content-type&quot;, &quot;application/pdf&quot;);</p>\n<p>The produces directive controllers &quot;the mapped handler&quot; for your content, but your code writes raw data, please see: <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-responseentity\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-responseentity</a></p>\n<pre><code>@PostMapping(value = &quot;/download/generateReport/{id}&quot;, produces = &quot;application/pdf&quot;)\npublic ResponseEntity&lt;InputStreamResource&gt; generateFavoriteReport(@PathVariable String id) throws Exception {\n    ReportRequest reportRequest= this.reportService.findByRequestWithId(id);                    \n    ByteArrayInputStream in =  this.reportService.generateFavoriteReport(reportRequest);            \n    HttpHeaders headers = new HttpHeaders();\n    headers.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=FavoriteReport.pdf&quot;);\n    headers.add(&quot;Access-Control-Expose-Headers&quot;, &quot;*&quot;);\n    headers.add(&quot;Content-type&quot;, &quot;application/pdf&quot;);  \n   \n    return ResponseEntity.ok().headers(headers).body(new InputStreamResource(in));\n}\n</code></pre>\n"}],"owner":{"account_id":27956448,"reputation":11,"user_id":21349173,"display_name":"likepickle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681561993,"creation_date":1678221798,"question_id":75666987,"body_markdown":"When users click the download report button from the front end, I expect the report creation and download section in the backend to work, but it does not download the report even though it generates it.\r\n\r\n    @PostMapping(value = &quot;/download/generateReport/{id}&quot;, produces = &quot;application/pdf&quot;)\r\n    \tpublic ResponseEntity&lt;InputStreamResource&gt; generateFavoriteReport(@PathVariable String id) throws Exception {\r\n    \t\tReportRequest reportRequest= this.reportService.findByRequestWithId(id); \t\t\t\t\t\r\n    \t\tByteArrayInputStream in =  this.reportService.generateFavoriteReport(reportRequest);\t\t\t\r\n    \t\tHttpHeaders headers = new HttpHeaders();\r\n    \t\theaders.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=FavoriteReport.pdf&quot;);\r\n    \t\theaders.add(&quot;Access-Control-Expose-Headers&quot;, &quot;*&quot;);\r\n    \t\treturn ResponseEntity.ok().headers(headers).body(new InputStreamResource(in));\r\n    }\r\n\r\nWhen I try from Postman, I can see the report as output, but when I try it from Chrome or any browser, it appears like this and does not download. How can I download it? I don&#39;t know what I&#39;m missing or doing wrong but I&#39;m about to get fired so I can&#39;t complete this please help :(\r\n\r\nChrome Result : \r\nResponse: 200 OK\r\n\r\n%PDF-1.4\r\n%����\r\n1 0 obj\r\n&lt;&lt;/Type/XObject/Subtype/Image/Width 480/Height 160/Length 15631/ColorSpace/DeviceGray/BitsPerComponent 8/Filter/FlateDecode&gt;&gt;stream\r\nx��]`�֞�%���ʏt &gt;�(*�&quot;X@��`ED��l؟�X��������+*\r\n&quot;����2s���MB����)�|�93�wWJ)tq�:2➒��[�/ށ�*�O�X��pVw�&gt;�CI�W���;��%�*dR������\r\n?k9i{��jE����nHIT+C���U��ZE��$�~�x\r\n�J\r\nI(�B���0�H���@��2Z\r\n�� 5bo&amp;���^�\r\nAIE #&#374068;��١�$���K�q4\r\n�t��2��/x�%���/�ȁV�f&amp;�pJO��%���%Q��@�x&quot;U���t�8،A)�n�Ț`���%]���0�Y5S��BR��67j�q��/��tCb��)�z�a1��]�[�*�lp�&#39;���4��J��$L�֔�����Y/���������Q�F��&#39;�TS�p\t��(|&amp;��3I3�g�[]�\r\n1�c��&#39;�;1X�/��b�����k!#\r\n�w�o@t[��i��\r\n�WH%���.=��n�K.�s����l#�a�-�wؤ���j�իWϮ�������#HM&#39;}���f�$|�F3� D奋*��&quot;�*�#EI2�`4Z@ǗzB�h����Y�� F���E3j�:��U��:}ֻ���{�g&lt;�Ȅ�{��͌��p�&lt;�K�&gt;T��T�����ի����XA���u� �G5�DL(��A�&amp;�Kae���!qpip&amp;Dr�v���̼�Vo�+,.�R\\��c��_����uS�!pT�I�+Y\r\n�n�\t\r\n\r\n\r\n\r\n    headers.add(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=FavoriteReport.pdf&quot;);\r\n    headers.add(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;);\r\n    headers.add(&quot;Pragma&quot;, &quot;no-cache&quot;);\r\n    headers.add(&quot;Expires&quot;, &quot;0&quot;);\r\n\r\n\r\nI also added different methods of headers but it didn&#39;t make any difference.","title":"I can&#39;t download the pdf I created with Java (Springboot). How can I download?","body":"<p>When users click the download report button from the front end, I expect the report creation and download section in the backend to work, but it does not download the report even though it generates it.</p>\n<pre><code>@PostMapping(value = &quot;/download/generateReport/{id}&quot;, produces = &quot;application/pdf&quot;)\n    public ResponseEntity&lt;InputStreamResource&gt; generateFavoriteReport(@PathVariable String id) throws Exception {\n        ReportRequest reportRequest= this.reportService.findByRequestWithId(id);                    \n        ByteArrayInputStream in =  this.reportService.generateFavoriteReport(reportRequest);            \n        HttpHeaders headers = new HttpHeaders();\n        headers.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=FavoriteReport.pdf&quot;);\n        headers.add(&quot;Access-Control-Expose-Headers&quot;, &quot;*&quot;);\n        return ResponseEntity.ok().headers(headers).body(new InputStreamResource(in));\n}\n</code></pre>\n<p>When I try from Postman, I can see the report as output, but when I try it from Chrome or any browser, it appears like this and does not download. How can I download it? I don't know what I'm missing or doing wrong but I'm about to get fired so I can't complete this please help :(</p>\n<p>Chrome Result :\nResponse: 200 OK</p>\n<p>%PDF-1.4\n%����\n1 0 obj\n&lt;&lt;/Type/XObject/Subtype/Image/Width 480/Height 160/Length 15631/ColorSpace/DeviceGray/BitsPerComponent 8/Filter/FlateDecode&gt;&gt;stream\nx��]<code>�֞�%���ʏt &gt;�(*�&quot;X@��</code>ED��l؟�X��������+*\n&quot;����2s���MB����)�|�93�wWJ)tq�:2➒��[�/ށ�<em>�O�X��pVw�&gt;�CI�W���;��%�</em>dR������\n?k9i{��jE����nHIT+C���U��ZE��$�~�x\n�J\nI(�B���0�H���@��2Z\n�� 5bo&amp;���^�\nAIE #񛔴��١�$���K�q4\n�t��2��/x�%���/�ȁV�f&amp;�pJO��%���%Q��@�x&quot;U���t�8،A)�n�Ț<code>���%]���0�Y5S��BR��67j�q��/��tCb��)�z�a1��]�[�*�lp�'���4��J��$L�֔�����Y/���������Q�F��'�TS�p ��(|&amp;��3I3�g�[]� 1�c��'�;1X�/��b�����k!# �w�o@t[��i�� �WH%���.=��n�K.�s����l#�a�-�wؤ���j�իWϮ�������#HM'}���f�$|�F3� D奋*��&quot;�*�#EI2�</code>4Z@ǗzB�h����Y�� F���E3j�:��U��:}ֻ���{�g&lt;�Ȅ�{��͌��p�&lt;�K�&gt;T��T�����ի����XA���u� �G5�DL(��A�&amp;�Kae���!qpip&amp;Dr�v���̼�Vo�+,.�R\\��c��_����uS�!pT�I�+Y\n�n�</p>\n<pre><code>headers.add(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=FavoriteReport.pdf&quot;);\nheaders.add(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;);\nheaders.add(&quot;Pragma&quot;, &quot;no-cache&quot;);\nheaders.add(&quot;Expires&quot;, &quot;0&quot;);\n</code></pre>\n<p>I also added different methods of headers but it didn't make any difference.</p>\n"},{"tags":["java","dependencies","wix","noclassdeffounderror","jpackage"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1681571772,"post_id":76019952,"comment_id":134079671,"body_markdown":"this is not WiX Question. Just Execute Jar.`How to Create an Executable JAR with Maven`(https://www.baeldung.com/executable-jar-with-maven)","body":"this is not WiX Question. Just Execute Jar.<code>How to Create an Executable JAR with Maven</code>(<a href=\"https://www.baeldung.com/executable-jar-with-maven\" rel=\"nofollow noreferrer\">baeldung.com/executable-jar-with-maven</a>)"},{"owner":{"account_id":9158700,"reputation":33,"user_id":6810838,"display_name":"Rodrigo Oliveira"},"score":0,"creation_date":1681844549,"post_id":76019952,"comment_id":134121602,"body_markdown":"Yes, life888888, this works. Thank you! Ididn&#39;t want to use maven before, but I surrender.","body":"Yes, life888888, this works. Thank you! Ididn&#39;t want to use maven before, but I surrender."}],"owner":{"account_id":9158700,"reputation":33,"user_id":6810838,"display_name":"Rodrigo Oliveira"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681844569,"answer_count":0,"score":0,"last_activity_date":1681561975,"creation_date":1681522097,"question_id":76019952,"body_markdown":"I&#39;m working on a project using Flatlaf look and feel.\r\nI&#39;m using NetBeans.\r\nIt runs ok in NetBeans.\r\nI want to build a standalone application for Windows.\r\n\r\nI used WiX to build a standalone application for Windows. WiX builds the msi installer using the command:\r\n\r\n`jpackage --input . --win-console --name MyProj --main-jar myProj-1.0.jar --main-class myname.myproj.MyProj --type msi`\r\n\r\nAfter installed, running the application I read the error:\r\n\r\n`Error: Unable to initialize main class myname.myproj.MyProj\r\nCaused by: java.lang.NoClassDefFoundError: com/formdev/flatlaf/FlatDarkLaf\r\nChild process exited with code 1\r\n`\r\nHere is the simplified code MyProj.java:\r\n\r\n```\r\npackage myname.myproj;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.UIManager;\r\nimport javax.swing.UnsupportedLookAndFeelException;\r\n\r\npublic class MyProj {\r\n\r\n    public static void main(String[] args) throws UnsupportedLookAndFeelException {\r\n        UIManager.setLookAndFeel(new com.formdev.flatlaf.FlatDarkLaf());\r\n        JFrame myFrame = new JFrame(&quot;Frame&quot;);\r\n        myFrame.setSize(333, 333);\r\n        myFrame.setVisible(true);\r\n    }\r\n}\r\n\r\n```\r\n\r\nAnd here is the pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;MyName&lt;/groupId&gt;\r\n    &lt;artifactId&gt;myProj&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.formdev&lt;/groupId&gt;\r\n            &lt;artifactId&gt;flatlaf&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.2&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;18&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;18&lt;/maven.compiler.target&gt;\r\n        &lt;exec.mainClass&gt;myname.myproj.MyProj&lt;/exec.mainClass&gt;\r\n    &lt;/properties&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nEDIT:\r\nIt doesn&#39;t need to be standalone, but I can&#39;t make it work compiling to jar. If someone has a solution about compiling to jar, it will be helpful.","title":"Java - Building executable using WiX won&#39;t load dependencies","body":"<p>I'm working on a project using Flatlaf look and feel.\nI'm using NetBeans.\nIt runs ok in NetBeans.\nI want to build a standalone application for Windows.</p>\n<p>I used WiX to build a standalone application for Windows. WiX builds the msi installer using the command:</p>\n<p><code>jpackage --input . --win-console --name MyProj --main-jar myProj-1.0.jar --main-class myname.myproj.MyProj --type msi</code></p>\n<p>After installed, running the application I read the error:</p>\n<p><code>Error: Unable to initialize main class myname.myproj.MyProj Caused by: java.lang.NoClassDefFoundError: com/formdev/flatlaf/FlatDarkLaf Child process exited with code 1 </code>\nHere is the simplified code MyProj.java:</p>\n<pre><code>package myname.myproj;\n\nimport javax.swing.JFrame;\nimport javax.swing.UIManager;\nimport javax.swing.UnsupportedLookAndFeelException;\n\npublic class MyProj {\n\n    public static void main(String[] args) throws UnsupportedLookAndFeelException {\n        UIManager.setLookAndFeel(new com.formdev.flatlaf.FlatDarkLaf());\n        JFrame myFrame = new JFrame(&quot;Frame&quot;);\n        myFrame.setSize(333, 333);\n        myFrame.setVisible(true);\n    }\n}\n\n</code></pre>\n<p>And here is the pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;MyName&lt;/groupId&gt;\n    &lt;artifactId&gt;myProj&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.formdev&lt;/groupId&gt;\n            &lt;artifactId&gt;flatlaf&lt;/artifactId&gt;\n            &lt;version&gt;2.0.2&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;18&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;18&lt;/maven.compiler.target&gt;\n        &lt;exec.mainClass&gt;myname.myproj.MyProj&lt;/exec.mainClass&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n<p>EDIT:\nIt doesn't need to be standalone, but I can't make it work compiling to jar. If someone has a solution about compiling to jar, it will be helpful.</p>\n"},{"tags":["java","android","memory"],"comments":[{"owner":{"account_id":2157109,"reputation":3274,"user_id":1912077,"accept_rate":62,"display_name":"Renjith"},"score":1,"creation_date":1681569286,"post_id":76022071,"comment_id":134079333,"body_markdown":"Just create a map/list and keep adding strings to it in a big loop. Eventually, you will run out of memory depending on loop size.","body":"Just create a map/list and keep adding strings to it in a big loop. Eventually, you will run out of memory depending on loop size."}],"owner":{"account_id":445732,"reputation":5762,"user_id":838355,"accept_rate":54,"display_name":"ir2pid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1681561403,"creation_date":1681559400,"question_id":76022071,"body_markdown":"I want to make my app use up a lot of memory to experiment with onTrimMemory and garbage collection. What would be an easy way to do this?","title":"What is an effective way to trigger high memory consumption in an app?","body":"<p>I want to make my app use up a lot of memory to experiment with onTrimMemory and garbage collection. What would be an easy way to do this?</p>\n"},{"tags":["java","sql","postgresql","hierarchical-data","recursive-query"],"comments":[{"owner":{"account_id":27974006,"reputation":10316,"user_id":21363224,"display_name":"markalex"},"score":0,"creation_date":1680889619,"post_id":75960638,"comment_id":133976848,"body_markdown":"`FROM` of both part of union should be your table, not cte.","body":"<code>FROM</code> of both part of union should be your table, not cte."}],"answers":[{"tags":[],"owner":{"account_id":14783924,"reputation":217599,"user_id":10676716,"display_name":"GMB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1680890055,"creation_date":1680890055,"answer_id":75960881,"question_id":75960638,"body_markdown":"The problem is that your recursive CTE has the same name as your table (`referral`) - and the database cannot resolve the ambiguity.\r\n\r\nI would recommend using a different alias to the CTE, as in:\r\n\r\n```\r\nWITH RECURSIVE cte AS (\r\n    SELECT * FROM referral WHERE refer_by =:referByUserId\r\n    UNION ALL\r\n    SELECT r.* \r\n    FROM cte c\r\n    INNER JOIN referral r ON r.refer_by = c.refer_to\r\n)\r\nSELECT refer_by, refer_to FROM cte\r\n```","title":"How to get chain information from database?","body":"<p>The problem is that your recursive CTE has the same name as your table (<code>referral</code>) - and the database cannot resolve the ambiguity.</p>\n<p>I would recommend using a different alias to the CTE, as in:</p>\n<pre><code>WITH RECURSIVE cte AS (\n    SELECT * FROM referral WHERE refer_by =:referByUserId\n    UNION ALL\n    SELECT r.* \n    FROM cte c\n    INNER JOIN referral r ON r.refer_by = c.refer_to\n)\nSELECT refer_by, refer_to FROM cte\n</code></pre>\n"}],"owner":{"account_id":448756,"reputation":574,"user_id":7369265,"accept_rate":40,"display_name":"Ranjit Soni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681560398,"creation_date":1680887946,"question_id":75960638,"body_markdown":"I have a table named &quot;referral&quot; and it contains two columns named &quot;refer_by&quot; and &quot;refer_to&quot;. &quot;refer_by&quot; column stores the id of the user, who refer someone, and &quot;refer_to&quot; store the id of the user, who was referred by &quot;refer_by&quot; user.\r\n\r\nFollowing is the stored info.\r\n\r\n| A header | Another header |\r\n| -------- | -------------- |\r\n| 1| 2|\r\n| 1   | 5|\r\n| 2| 6|\r\n| 5   | 7|\r\n| 7| 8|\r\n| 8   | 9|\r\n| 9   | 10|\r\n| 15| 16|\r\n| 18   | 20|\r\n\r\nI want to get all the referral list where refer_by=1. For Example refer_by=1 refer 2 and 5, 2 refer 6, 5 refer7 and so on.\r\n\r\nI am using following query but it is failing with reason &quot;ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: recursive reference to query &quot;referral&quot; must not appear within its non-recursive term&quot;.\r\n\r\n```\r\n@Query(value = &quot;WITH RECURSIVE referral AS &quot; +\r\n\t\t\t&quot;( &quot; +\r\n\t\t\t\t&quot;SELECT ref1.* FROM referral ref1 WHERE ref1.refer_by =:referByUserId &quot; +\r\n\t\t\t\t\t&quot;UNION ALL &quot; +\r\n\t\t\t\t&quot;SELECT ref2.* FROM referral ref2 &quot; +\r\n\t\t\t\t\t&quot;INNER JOIN &quot; +\r\n\t\t\t\t&quot;referral ref3 ON ref2.refer_by = ref3.refer_to &quot; +\r\n\t\t\t&quot;) &quot; +\r\n\t\t\t&quot;SELECT reff.refer_by, reff.refer_to FROM referral reff&quot;, nativeQuery = true)\r\n\tList&lt;Object[]&gt; testt(final Long referByUserId);\r\n```\r\n\r\nPlease help me.\r\nThanks\r\n","title":"How to get chain information from database?","body":"<p>I have a table named &quot;referral&quot; and it contains two columns named &quot;refer_by&quot; and &quot;refer_to&quot;. &quot;refer_by&quot; column stores the id of the user, who refer someone, and &quot;refer_to&quot; store the id of the user, who was referred by &quot;refer_by&quot; user.</p>\n<p>Following is the stored info.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>A header</th>\n<th>Another header</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>2</td>\n</tr>\n<tr>\n<td>1</td>\n<td>5</td>\n</tr>\n<tr>\n<td>2</td>\n<td>6</td>\n</tr>\n<tr>\n<td>5</td>\n<td>7</td>\n</tr>\n<tr>\n<td>7</td>\n<td>8</td>\n</tr>\n<tr>\n<td>8</td>\n<td>9</td>\n</tr>\n<tr>\n<td>9</td>\n<td>10</td>\n</tr>\n<tr>\n<td>15</td>\n<td>16</td>\n</tr>\n<tr>\n<td>18</td>\n<td>20</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I want to get all the referral list where refer_by=1. For Example refer_by=1 refer 2 and 5, 2 refer 6, 5 refer7 and so on.</p>\n<p>I am using following query but it is failing with reason &quot;ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: recursive reference to query &quot;referral&quot; must not appear within its non-recursive term&quot;.</p>\n<pre><code>@Query(value = &quot;WITH RECURSIVE referral AS &quot; +\n            &quot;( &quot; +\n                &quot;SELECT ref1.* FROM referral ref1 WHERE ref1.refer_by =:referByUserId &quot; +\n                    &quot;UNION ALL &quot; +\n                &quot;SELECT ref2.* FROM referral ref2 &quot; +\n                    &quot;INNER JOIN &quot; +\n                &quot;referral ref3 ON ref2.refer_by = ref3.refer_to &quot; +\n            &quot;) &quot; +\n            &quot;SELECT reff.refer_by, reff.refer_to FROM referral reff&quot;, nativeQuery = true)\n    List&lt;Object[]&gt; testt(final Long referByUserId);\n</code></pre>\n<p>Please help me.\nThanks</p>\n"},{"tags":["java","sql","apache-calcite"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1680713372,"post_id":75941028,"comment_id":133946219,"body_markdown":"This sounds like a bug you should report to the Apache Calcite project.","body":"This sounds like a bug you should report to the Apache Calcite project."}],"answers":[{"tags":[],"owner":{"account_id":28166776,"reputation":1,"user_id":21525867,"display_name":"Kirill Kim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681560088,"creation_date":1681204685,"answer_id":75984253,"question_id":75941028,"body_markdown":"I found problem in my code, I created `RelDataType` and had set it to not nullable.\r\n\r\nTherefore, I added to `org.apache.calcite.schema.Table#getRowType` when describing `RelDataType` for column next code:\r\n```\r\nRelDataType sqlType = relDataTypeFactory.createTypeWithNullability(relDataTypeFactory.createSqlType(sqlTypeName), true); \r\n```\r\n\r\nAnd now all works fine, thanks.","title":"Calcite order by nullpointer exception","body":"<p>I found problem in my code, I created <code>RelDataType</code> and had set it to not nullable.</p>\n<p>Therefore, I added to <code>org.apache.calcite.schema.Table#getRowType</code> when describing <code>RelDataType</code> for column next code:</p>\n<pre><code>RelDataType sqlType = relDataTypeFactory.createTypeWithNullability(relDataTypeFactory.createSqlType(sqlTypeName), true); \n</code></pre>\n<p>And now all works fine, thanks.</p>\n"}],"owner":{"account_id":28166776,"reputation":1,"user_id":21525867,"display_name":"Kirill Kim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75984253,"answer_count":1,"score":0,"last_activity_date":1681560088,"creation_date":1680706948,"question_id":75941028,"body_markdown":"I try to perform query over over some table data in Java using Calcite. I try to execute query:\r\n\r\n```sql\r\nselect\r\n    distinct tbl.col1 ,\r\n    tbl.col2  \r\nfrom\r\n    infoset.SUBEKT tbl   \r\norder by\r\n    col1 asc nulls last ,\r\n    col2 asc nulls last\r\n```\r\nAnd the following exception occurs\r\n```none\r\njava.lang.NullPointerException\r\n\tat org.apache.calcite.runtime.Utilities.compare(Utilities.java:202)\r\n\tat Baz$2.compare(ANONYMOUS.java:15)\r\n\tat Baz$2.compare(ANONYMOUS.java:27)\r\n\tat java.util.TreeMap.getEntryUsingComparator(TreeMap.java:376)\r\n\tat java.util.TreeMap.getEntry(TreeMap.java:345)\r\n\tat java.util.TreeMap.get(TreeMap.java:278)\r\n\tat org.apache.calcite.linq4j.EnumerableDefaults.toLookup_(EnumerableDefaults.java:3608)\r\n\tat org.apache.calcite.linq4j.EnumerableDefaults$14.enumerator(EnumerableDefaults.java:2660)\r\n\tat org.apache.calcite.linq4j.AbstractEnumerable.iterator(AbstractEnumerable.java:33)\r\n\tat org.apache.calcite.avatica.MetaImpl.createCursor(MetaImpl.java:90)\r\n\tat org.apache.calcite.avatica.AvaticaResultSet.execute(AvaticaResultSet.java:186)\r\n\tat org.apache.calcite.jdbc.CalciteResultSet.execute(CalciteResultSet.java:64)\r\n\tat org.apache.calcite.jdbc.CalciteResultSet.execute(CalciteResultSet.java:43)\r\n\tat org.apache.calcite.avatica.AvaticaConnection$1.execute(AvaticaConnection.java:669)\r\n\tat org.apache.calcite.jdbc.CalciteMetaImpl.prepareAndExecute(CalciteMetaImpl.java:636)\r\n\tat org.apache.calcite.avatica.AvaticaConnection.prepareAndExecuteInternal(AvaticaConnection.java:677)\r\n\tat org.apache.calcite.avatica.AvaticaStatement.executeInternal(AvaticaStatement.java:157)\r\n\tat org.apache.calcite.avatica.AvaticaStatement.executeQuery(AvaticaStatement.java:228)\r\n\tat ru.spi2.modules.infosetquery.InfosetQueryPlugin.executeQuery(InfosetQueryPlugin.java:101)\r\n```\r\nThe error occurs because col1 has some rows with null values. If I order only by col1 or col2, all works well.\r\n","title":"Calcite order by nullpointer exception","body":"<p>I try to perform query over over some table data in Java using Calcite. I try to execute query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select\n    distinct tbl.col1 ,\n    tbl.col2  \nfrom\n    infoset.SUBEKT tbl   \norder by\n    col1 asc nulls last ,\n    col2 asc nulls last\n</code></pre>\n<p>And the following exception occurs</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.NullPointerException\n    at org.apache.calcite.runtime.Utilities.compare(Utilities.java:202)\n    at Baz$2.compare(ANONYMOUS.java:15)\n    at Baz$2.compare(ANONYMOUS.java:27)\n    at java.util.TreeMap.getEntryUsingComparator(TreeMap.java:376)\n    at java.util.TreeMap.getEntry(TreeMap.java:345)\n    at java.util.TreeMap.get(TreeMap.java:278)\n    at org.apache.calcite.linq4j.EnumerableDefaults.toLookup_(EnumerableDefaults.java:3608)\n    at org.apache.calcite.linq4j.EnumerableDefaults$14.enumerator(EnumerableDefaults.java:2660)\n    at org.apache.calcite.linq4j.AbstractEnumerable.iterator(AbstractEnumerable.java:33)\n    at org.apache.calcite.avatica.MetaImpl.createCursor(MetaImpl.java:90)\n    at org.apache.calcite.avatica.AvaticaResultSet.execute(AvaticaResultSet.java:186)\n    at org.apache.calcite.jdbc.CalciteResultSet.execute(CalciteResultSet.java:64)\n    at org.apache.calcite.jdbc.CalciteResultSet.execute(CalciteResultSet.java:43)\n    at org.apache.calcite.avatica.AvaticaConnection$1.execute(AvaticaConnection.java:669)\n    at org.apache.calcite.jdbc.CalciteMetaImpl.prepareAndExecute(CalciteMetaImpl.java:636)\n    at org.apache.calcite.avatica.AvaticaConnection.prepareAndExecuteInternal(AvaticaConnection.java:677)\n    at org.apache.calcite.avatica.AvaticaStatement.executeInternal(AvaticaStatement.java:157)\n    at org.apache.calcite.avatica.AvaticaStatement.executeQuery(AvaticaStatement.java:228)\n    at ru.spi2.modules.infosetquery.InfosetQueryPlugin.executeQuery(InfosetQueryPlugin.java:101)\n</code></pre>\n<p>The error occurs because col1 has some rows with null values. If I order only by col1 or col2, all works well.</p>\n"},{"tags":["java","xml","postgresql","spring-boot","liquibase"],"comments":[{"owner":{"account_id":5209321,"reputation":116,"user_id":4166251,"display_name":"Stanimir Stamenkov"},"score":0,"creation_date":1681549176,"post_id":76020977,"comment_id":134076895,"body_markdown":"Try setting the [`liquibase.sql.logLevel`](https://docs.liquibase.com/parameters/sql-log-level.html) to `INFO` to see the generated SQL statements.","body":"Try setting the <a href=\"https://docs.liquibase.com/parameters/sql-log-level.html\" rel=\"nofollow noreferrer\"><code>liquibase.sql.logLevel</code></a> to <code>INFO</code> to see the generated SQL statements."}],"answers":[{"tags":[],"owner":{"account_id":101001,"reputation":119798,"user_id":271959,"display_name":"Frank Heikens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681559741,"creation_date":1681545121,"answer_id":76020999,"question_id":76020977,"body_markdown":"The correct syntax is either\r\n\r\n    CURRENT_TIMESTAMP\r\nor\r\n\r\n    CURRENT_TIMESTAMP(&lt;precision&gt;)\r\n\r\nFor example `CURRENT_TIMESTAMP(5)` for 5 fractional digits in the seconds field.","title":"liquibase.exception.DatabaseException: ERROR: syntax error at or near &quot;)&quot;","body":"<p>The correct syntax is either</p>\n<pre><code>CURRENT_TIMESTAMP\n</code></pre>\n<p>or</p>\n<pre><code>CURRENT_TIMESTAMP(&lt;precision&gt;)\n</code></pre>\n<p>For example <code>CURRENT_TIMESTAMP(5)</code> for 5 fractional digits in the seconds field.</p>\n"}],"owner":{"account_id":18328343,"reputation":11,"user_id":16968310,"display_name":"Bohdan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":438,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681559741,"creation_date":1681544769,"question_id":76020977,"body_markdown":" org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;liquibase&#39; defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.MigrationFailedException: Migration failed for changeset liquibase/db.changelog-1.0.xml::1.0.0::bohdan.taran:\r\n     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near &quot;)&quot;\r\n\r\n\r\n```\r\n&lt;changeSet id=&quot;1.0.0&quot; author=&quot;bohdan.taran&quot;&gt;\r\n        &lt;createTable tableName=&quot;users&quot;&gt;\r\n            &lt;column name=&quot;id&quot; type=&quot;BIGINT&quot; autoIncrement=&quot;true&quot;&gt;\r\n                &lt;constraints primaryKey=&quot;true&quot; nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;username&quot; type=&quot;VARCHAR(100)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;email&quot; type=&quot;VARCHAR(255)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;first_name&quot; type=&quot;VARCHAR(100)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;last_name&quot; type=&quot;VARCHAR(100)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;password&quot; type=&quot;VARCHAR(255)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;created&quot; type=&quot;TIMESTAMP&quot; defaultValue=&quot;CURRENT_TIMESTAMP()&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;updated&quot; type=&quot;TIMESTAMP&quot; defaultValue=&quot;CURRENT_TIMESTAMP()&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;status&quot; type=&quot;VARCHAR(25)&quot; defaultValue=&quot;ACTIVE&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n        &lt;/createTable&gt;\r\n    &lt;/changeSet&gt;\r\n```\r\n\r\nI can&#39;t find this problem in my code","title":"liquibase.exception.DatabaseException: ERROR: syntax error at or near &quot;)&quot;","body":"<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.MigrationFailedException: Migration failed for changeset liquibase/db.changelog-1.0.xml::1.0.0::bohdan.taran:\nReason: liquibase.exception.DatabaseException: ERROR: syntax error at or near &quot;)&quot;</p>\n<pre><code>&lt;changeSet id=&quot;1.0.0&quot; author=&quot;bohdan.taran&quot;&gt;\n        &lt;createTable tableName=&quot;users&quot;&gt;\n            &lt;column name=&quot;id&quot; type=&quot;BIGINT&quot; autoIncrement=&quot;true&quot;&gt;\n                &lt;constraints primaryKey=&quot;true&quot; nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;username&quot; type=&quot;VARCHAR(100)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;email&quot; type=&quot;VARCHAR(255)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;first_name&quot; type=&quot;VARCHAR(100)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;last_name&quot; type=&quot;VARCHAR(100)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;password&quot; type=&quot;VARCHAR(255)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;created&quot; type=&quot;TIMESTAMP&quot; defaultValue=&quot;CURRENT_TIMESTAMP()&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;updated&quot; type=&quot;TIMESTAMP&quot; defaultValue=&quot;CURRENT_TIMESTAMP()&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=&quot;status&quot; type=&quot;VARCHAR(25)&quot; defaultValue=&quot;ACTIVE&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n</code></pre>\n<p>I can't find this problem in my code</p>\n"},{"tags":["java","java-8","concurrentlinkedqueue"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1681369108,"post_id":76002435,"comment_id":134045740,"body_markdown":"Well, `queue.add(new Object());` will add an object that your code would never remove so `queue.remove(object);` would always have to look for the the object you just added. When you remove that line then `object` will be at the head of a 1-element queue which makes it way easier to remove.","body":"Well, <code>queue.add(new Object());</code> will add an object that your code would never remove so <code>queue.remove(object);</code> would always have to look for the the object you just added. When you remove that line then <code>object</code> will be at the head of a 1-element queue which makes it way easier to remove."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1681369201,"post_id":76002435,"comment_id":134045764,"body_markdown":"Btw, note that times taken like you did are not directly comparable as there may be many factors influencing the JVM. For such micro benchmarks you should use JMH.","body":"Btw, note that times taken like you did are not directly comparable as there may be many factors influencing the JVM. For such micro benchmarks you should use JMH."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1681369529,"post_id":76002435,"comment_id":134045824,"body_markdown":"On the term &quot;memory leak&quot;: I&#39;d not consider this a real memory leak but in general `remove(Object o)` will use `equals()` to find the object to be removed - and the basic implementation of `Object.equals(...)` will use instance identity. Thus, calling `add(new Object())` will add an instance whose identity you don&#39;t have (as you have no reference to it) so you can&#39;t directly use `remove()` to remove it - you&#39;d need to get the instance from the queue first.","body":"On the term &quot;memory leak&quot;: I&#39;d not consider this a real memory leak but in general <code>remove(Object o)</code> will use <code>equals()</code> to find the object to be removed - and the basic implementation of <code>Object.equals(...)</code> will use instance identity. Thus, calling <code>add(new Object())</code> will add an instance whose identity you don&#39;t have (as you have no reference to it) so you can&#39;t directly use <code>remove()</code> to remove it - you&#39;d need to get the instance from the queue first."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1681370107,"post_id":76002435,"comment_id":134045933,"body_markdown":"IMHO not really a memory leak: there is exactly one element that is added to the queue and stays there. And you could retrieve (and remove) that element anytime you want by calling `queue.poll()`","body":"IMHO not really a memory leak: there is exactly one element that is added to the queue and stays there. And you could retrieve (and remove) that element anytime you want by calling <code>queue.poll()</code>"},{"owner":{"account_id":321401,"reputation":18500,"user_id":640205,"accept_rate":94,"display_name":"JustBeingHelpful"},"score":0,"creation_date":1681374526,"post_id":76002435,"comment_id":134046861,"body_markdown":"What book was it?","body":"What book was it?"},{"owner":{"account_id":1677301,"reputation":2224,"user_id":1542523,"accept_rate":66,"display_name":"flower"},"score":0,"creation_date":1681376293,"post_id":76002435,"comment_id":134047278,"body_markdown":"@MacGyver，ISBN: 9787111657705","body":"@MacGyver，ISBN: 9787111657705"},{"owner":{"account_id":321401,"reputation":18500,"user_id":640205,"accept_rate":94,"display_name":"JustBeingHelpful"},"score":0,"creation_date":1681402016,"post_id":76002435,"comment_id":134054061,"body_markdown":"Not necessarily.  Depending on how concurrency is implemented, dealing with memory on a CPU is often a concern, and that is the focus of improving performance.  Look up the term &quot;context switching&quot;.  That is how multiple processes can share a single CPU.","body":"Not necessarily.  Depending on how concurrency is implemented, dealing with memory on a CPU is often a concern, and that is the focus of improving performance.  Look up the term &quot;context switching&quot;.  That is how multiple processes can share a single CPU."}],"answers":[{"tags":[],"owner":{"account_id":5749769,"reputation":2331,"user_id":4539838,"display_name":"Amit kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1681530381,"creation_date":1681530381,"answer_id":76020248,"question_id":76002435,"body_markdown":"Yes. This will cause memory leak issue.\r\n\r\n**Explanation** :  \r\n 1. `queue.add(new Object())` adds a new object to the `ConcurrentLinkedQueue`, which means queue will hold the reference to that object until it is removed. \r\n 2. But in the code snippet same object is getting added and removed\r\n    repeatedly, via queue.remove(object) in the while loop. \r\n\r\nThis might cause the `ConcurrentLinkedQueue` to keep the reference to the object indefinitely, even when the object is no longer needed, causing memory leak.\r\n\r\n&gt; To fix the memory leak issue, remove the line `queue.add(new\r\n&gt; Object())` and only add the object instance to the queue, which is\r\n&gt; being used in the while loop.\r\n\r\n  \r\n\r\n**Note** : Make sure that the object is removed from the queue after it is no longer needed.","title":"Will the use of ConcurrentLinkedQueue cause memory leak?","body":"<p>Yes. This will cause memory leak issue.</p>\n<p><strong>Explanation</strong> :</p>\n<ol>\n<li><code>queue.add(new Object())</code> adds a new object to the <code>ConcurrentLinkedQueue</code>, which means queue will hold the reference to that object until it is removed.</li>\n<li>But in the code snippet same object is getting added and removed\nrepeatedly, via queue.remove(object) in the while loop.</li>\n</ol>\n<p>This might cause the <code>ConcurrentLinkedQueue</code> to keep the reference to the object indefinitely, even when the object is no longer needed, causing memory leak.</p>\n<blockquote>\n<p>To fix the memory leak issue, remove the line <code>queue.add(new Object())</code> and only add the object instance to the queue, which is\nbeing used in the while loop.</p>\n</blockquote>\n<p><strong>Note</strong> : Make sure that the object is removed from the queue after it is no longer needed.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681559738,"creation_date":1681536542,"answer_id":76020516,"question_id":76002435,"body_markdown":"The problem presented in that the book is actually caused by an OpenJDK Bug:  https://bugs.openjdk.org/browse/JDK-8054446.  \r\n\r\nKudos to @MacGyver for finding this!!\r\n\r\nAccording to the analysis on the bug report:\r\n\r\n&gt; &quot;Reporter is correct - `remove(Object)` will never unlink dead Nodes *if only ever the element at the tail is removed&lt;sup&gt;1&lt;/sup&gt;.*&quot;\r\n\r\n(Emphasis added)\r\n\r\nThe bug report shows that the issue was initially raised against Java 8 in 2014, and was fixed in Java 9 in 2019.  The fix was subsequently backported to Java 8 and Java 7.  \r\n\r\nNote that Java 7 is EOL.  To get a Java 7 release with the fix, I think you will either need an Oracle support contract, or you will need to use a 3rd-party Java 7 release.\r\n\r\n-----------------------------\r\n\r\nSo to you answer your question:\r\n\r\n&gt; Will the use of `ConcurrentLinkedQueue` cause memory leak?\r\n\r\nIf you are using an out-of-date version of Java AND you are repeatedly removing the last element of the queue, then Yes.  Otherwise No.\r\n\r\nSolution: use an up-to-date version of Java 7, 8 or later.\r\n\r\nI should also point out that using `remove(E)` on a `Queue` / `Deque` is kind of a bad idea anyway.  It is an `O(N)` operation compared with `O(1)` for `add(E)`, `offer(E)`, `remove()`, `poll()`, `element()` and `peek()` (and the equivalent `Deque` operations).\r\n\r\n-------------------\r\n\r\n&lt;sup&gt;1 - I didn&#39;t look at the original source code to see if the leak could occur in other circumstances, but I am prepared to take the official analysis at face value.&lt;/sup&gt; ","title":"Will the use of ConcurrentLinkedQueue cause memory leak?","body":"<p>The problem presented in that the book is actually caused by an OpenJDK Bug:  <a href=\"https://bugs.openjdk.org/browse/JDK-8054446\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8054446</a>.</p>\n<p>Kudos to @MacGyver for finding this!!</p>\n<p>According to the analysis on the bug report:</p>\n<blockquote>\n<p>&quot;Reporter is correct - <code>remove(Object)</code> will never unlink dead Nodes <em>if only ever the element at the tail is removed<sup>1</sup>.</em>&quot;</p>\n</blockquote>\n<p>(Emphasis added)</p>\n<p>The bug report shows that the issue was initially raised against Java 8 in 2014, and was fixed in Java 9 in 2019.  The fix was subsequently backported to Java 8 and Java 7.</p>\n<p>Note that Java 7 is EOL.  To get a Java 7 release with the fix, I think you will either need an Oracle support contract, or you will need to use a 3rd-party Java 7 release.</p>\n<hr />\n<p>So to you answer your question:</p>\n<blockquote>\n<p>Will the use of <code>ConcurrentLinkedQueue</code> cause memory leak?</p>\n</blockquote>\n<p>If you are using an out-of-date version of Java AND you are repeatedly removing the last element of the queue, then Yes.  Otherwise No.</p>\n<p>Solution: use an up-to-date version of Java 7, 8 or later.</p>\n<p>I should also point out that using <code>remove(E)</code> on a <code>Queue</code> / <code>Deque</code> is kind of a bad idea anyway.  It is an <code>O(N)</code> operation compared with <code>O(1)</code> for <code>add(E)</code>, <code>offer(E)</code>, <code>remove()</code>, <code>poll()</code>, <code>element()</code> and <code>peek()</code> (and the equivalent <code>Deque</code> operations).</p>\n<hr />\n<p><sup>1 - I didn't look at the original source code to see if the leak could occur in other circumstances, but I am prepared to take the official analysis at face value.</sup></p>\n"}],"owner":{"account_id":1677301,"reputation":2224,"user_id":1542523,"accept_rate":66,"display_name":"flower"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1681559738,"creation_date":1681368578,"question_id":76002435,"body_markdown":"I read from a book that the following code will cause memory leak,and the book tells that we should remove the code `queue.add(new Object());` and it will not cause memory leak. but I don&#39;t know why. Why?\r\n\r\n \r\n\r\n    import com.google.common.base.Stopwatch;\r\n    import java.util.concurrent.ConcurrentLinkedQueue;\r\n    import java.util.concurrent.TimeUnit;\r\n\r\n    public class ConcurrentLinkedQueueMemLeak\r\n     {\r\n    public static void main(String[] args) throws InterruptedException\r\n    {\r\n        ConcurrentLinkedQueue&lt;Object&gt; queue =\r\n                        new ConcurrentLinkedQueue&lt;&gt;();\r\n        queue.add(new Object()); // ① 这一行代码会导致内存泄漏\r\n        Object object = new Object();\r\n\r\n        int loops = 0;\r\n\r\n        // 休眠10秒，方便打开JDK诊断工具，监控执行前后的内存变化\r\n        TimeUnit.SECONDS.sleep(10);\r\n\r\n        Stopwatch watch = Stopwatch.createStarted();\r\n        while (true)\r\n        {\r\n            // 每执行10000次进行一次耗时统计，并且输出\r\n            if (loops % 10000 == 0 &amp;&amp; loops != 0)\r\n            {\r\n                long elapsedMs = watch.stop()\r\n                    .elapsed(TimeUnit.MILLISECONDS);\r\n                System.out.printf(&quot;loops=%d duration=%d MS%n&quot;, loops, elapsedMs);\r\n                watch.reset().start();\r\n            }\r\n            queue.add(object);\r\n            // ② remove方法删除object\r\n            queue.remove(object);\r\n            ++loops;\r\n        }\r\n    }\r\n    }\r\n\r\nbefore remove the code queue.add(new Object()):\r\n\r\n    loops=10000 duration=588 MS\r\n    loops=20000 duration=1881 MS\r\n    loops=30000 duration=3175 MS\r\n    loops=40000 duration=3452 MS\r\n    loops=50000 duration=3784 MS\r\n    loops=60000 duration=4424 MS\r\n    loops=70000 duration=4761 MS\r\n    loops=80000 duration=5733 MS\r\n\r\nafter remove the code queue.add(new Object()):\r\n\r\n    loops=363590000 duration=0 MS\r\n    loops=363600000 duration=0 MS\r\n    loops=363610000 duration=0 MS\r\n    loops=363620000 duration=0 MS\r\n    loops=363630000 duration=1 MS","title":"Will the use of ConcurrentLinkedQueue cause memory leak?","body":"<p>I read from a book that the following code will cause memory leak,and the book tells that we should remove the code <code>queue.add(new Object());</code> and it will not cause memory leak. but I don't know why. Why?</p>\n<pre><code>import com.google.common.base.Stopwatch;\nimport java.util.concurrent.ConcurrentLinkedQueue;\nimport java.util.concurrent.TimeUnit;\n\npublic class ConcurrentLinkedQueueMemLeak\n {\npublic static void main(String[] args) throws InterruptedException\n{\n    ConcurrentLinkedQueue&lt;Object&gt; queue =\n                    new ConcurrentLinkedQueue&lt;&gt;();\n    queue.add(new Object()); // ① 这一行代码会导致内存泄漏\n    Object object = new Object();\n\n    int loops = 0;\n\n    // 休眠10秒，方便打开JDK诊断工具，监控执行前后的内存变化\n    TimeUnit.SECONDS.sleep(10);\n\n    Stopwatch watch = Stopwatch.createStarted();\n    while (true)\n    {\n        // 每执行10000次进行一次耗时统计，并且输出\n        if (loops % 10000 == 0 &amp;&amp; loops != 0)\n        {\n            long elapsedMs = watch.stop()\n                .elapsed(TimeUnit.MILLISECONDS);\n            System.out.printf(&quot;loops=%d duration=%d MS%n&quot;, loops, elapsedMs);\n            watch.reset().start();\n        }\n        queue.add(object);\n        // ② remove方法删除object\n        queue.remove(object);\n        ++loops;\n    }\n}\n}\n</code></pre>\n<p>before remove the code queue.add(new Object()):</p>\n<pre><code>loops=10000 duration=588 MS\nloops=20000 duration=1881 MS\nloops=30000 duration=3175 MS\nloops=40000 duration=3452 MS\nloops=50000 duration=3784 MS\nloops=60000 duration=4424 MS\nloops=70000 duration=4761 MS\nloops=80000 duration=5733 MS\n</code></pre>\n<p>after remove the code queue.add(new Object()):</p>\n<pre><code>loops=363590000 duration=0 MS\nloops=363600000 duration=0 MS\nloops=363610000 duration=0 MS\nloops=363620000 duration=0 MS\nloops=363630000 duration=1 MS\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1441973907,"post_id":32523130,"comment_id":52904216,"body_markdown":"These look like belonging to `\\p{Lo}` category.","body":"These look like belonging to <code>\\p{Lo}</code> category."},{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":0,"creation_date":1441974139,"post_id":32523130,"comment_id":52904376,"body_markdown":"@stribizhev it&#39;s working, but the definition of \\p{Lo} from http://www.regular-expressions.info/unicode.html seems to be saying that it might match characters other than numbers?","body":"@stribizhev it&#39;s working, but the definition of \\p{Lo} from <a href=\"http://www.regular-expressions.info/unicode.html\" rel=\"nofollow noreferrer\">regular-expressions.info/unicode.html</a> seems to be saying that it might match characters other than numbers?"},{"owner":{"display_name":"user319799"},"score":0,"creation_date":1441974386,"post_id":32523130,"comment_id":52904536,"body_markdown":"Is there any (easily automatable) way to tell if this characters are used as digits? Can they be used as non-numeric part of words/text?","body":"Is there any (easily automatable) way to tell if this characters are used as digits? Can they be used as non-numeric part of words/text?"},{"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1441974810,"post_id":32523130,"comment_id":52904810,"body_markdown":"No idea, the only solution that I can think of is just add them all into the character class. Like `&quot;(?U)[\\\\p{N}一二三四五六七八九十百千万萬億亿兆零]+&quot;`.","body":"No idea, the only solution that I can think of is just add them all into the character class. Like <code>&quot;(?U)[\\\\p{N}一二三四五六七八九十百千万萬億亿兆零]+&quot;</code>."},{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":0,"creation_date":1441974967,"post_id":32523130,"comment_id":52904915,"body_markdown":"@stribizhev but this solution would only be able to help support Chinese, how will i be able to do this for all the unsupported languages?\ndo you know of any character which falls under \\\\p{Lo} but isn&#39;t a number?","body":"@stribizhev but this solution would only be able to help support Chinese, how will i be able to do this for all the unsupported languages? do you know of any character which falls under \\\\p{Lo} but isn&#39;t a number?"},{"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1441975126,"post_id":32523130,"comment_id":52905011,"body_markdown":"No, I am afraid that is something I cannot be sure of.","body":"No, I am afraid that is something I cannot be sure of."},{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":0,"creation_date":1441975317,"post_id":32523130,"comment_id":52905138,"body_markdown":"@stribizhev ok, thank you very much for your support :)","body":"@stribizhev ok, thank you very much for your support :)"},{"owner":{"account_id":155533,"reputation":90025,"user_id":372239,"accept_rate":80,"display_name":"Toto"},"score":1,"creation_date":1441975558,"post_id":32523130,"comment_id":52905267,"body_markdown":"I don&#39;t know anything on chinese characters, but are you sure these characters `三十萬零二百五十` are numbers and not literals like `one two three ...`","body":"I don&#39;t know anything on chinese characters, but are you sure these characters <code>三十萬零二百五十</code> are numbers and not literals like <code>one two three ...</code>"},{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":0,"creation_date":1441975687,"post_id":32523130,"comment_id":52905339,"body_markdown":"@Toto i also don&#39;t know Chinese :), but i referred dozens of links, some of them being:\n\nhttp://www.mandarintools.com/numbers.html\nhttps://en.wikibooks.org/wiki/Chinese_%28Mandarin%29/Numbers","body":"@Toto i also don&#39;t know Chinese :), but i referred dozens of links, some of them being:  <a href=\"http://www.mandarintools.com/numbers.html\" rel=\"nofollow noreferrer\">mandarintools.com/numbers.html</a> <a href=\"https://en.wikibooks.org/wiki/Chinese_%28Mandarin%29/Numbers\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Chinese_%28Mandarin%29/Numbers</a>"},{"owner":{"account_id":155533,"reputation":90025,"user_id":372239,"accept_rate":80,"display_name":"Toto"},"score":0,"creation_date":1441976016,"post_id":32523130,"comment_id":52905531,"body_markdown":"I&#39;ve just tried google traduction from english to chinese, for `1` it gives `1`, for `one` it gives `一` same for `3` =&gt; `3` and `three` =&gt; `三`","body":"I&#39;ve just tried google traduction from english to chinese, for <code>1</code> it gives <code>1</code>, for <code>one</code> it gives <code>一</code> same for <code>3</code> =&gt; <code>3</code> and <code>three</code> =&gt; <code>三</code>"},{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":0,"creation_date":1441976112,"post_id":32523130,"comment_id":52905592,"body_markdown":"@Toto yes i have already tried that too, google can&#39;t always be right ;)","body":"@Toto yes i have already tried that too, google can&#39;t always be right ;)"},{"owner":{"account_id":155533,"reputation":90025,"user_id":372239,"accept_rate":80,"display_name":"Toto"},"score":0,"creation_date":1441976202,"post_id":32523130,"comment_id":52905657,"body_markdown":"Sure :) ; waiting for a chinese people that can answer.","body":"Sure :) ; waiting for a chinese people that can answer."},{"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":4,"creation_date":1441978756,"post_id":32523130,"comment_id":52907493,"body_markdown":"If that is only a Chinese issue, you can use the approach I suggested. Also, here is [a nice resource on Chinese numbers](http://www.mandarintools.com/numbers.html). Acc. to that page, the Chinese numbers can be matched with `[\\\\p{N}零一二三四五六七八九十百千萬億万亿壹貳叄肆伍陸柒捌玖拾佰仟贰叁陆]`.","body":"If that is only a Chinese issue, you can use the approach I suggested. Also, here is <a href=\"http://www.mandarintools.com/numbers.html\" rel=\"nofollow noreferrer\">a nice resource on Chinese numbers</a>. Acc. to that page, the Chinese numbers can be matched with <code>[\\\\p{N}零一二三四五六七八九十百千萬億万亿壹貳叄肆伍陸柒捌玖拾佰仟贰叁陆]</code>."},{"owner":{"account_id":6942679,"reputation":10835,"user_id":5328417,"accept_rate":65,"display_name":"Arsen"},"score":0,"creation_date":1442404500,"post_id":32523130,"comment_id":53066596,"body_markdown":"@SarthakMittal can you give more examples? I have written solution below and I want to text it","body":"@SarthakMittal can you give more examples? I have written solution below and I want to text it"},{"owner":{"account_id":6457401,"reputation":583,"user_id":5002324,"display_name":"Christoph S."},"score":0,"creation_date":1666268792,"post_id":32523130,"comment_id":130899322,"body_markdown":"Since when Chinese use Chinese characters for there phone numbers instead of typing arabic numbers? Did you ever write **your** phone number as a word like &quot;onemilliontwohundredthirtyfourthousandfivehundredsixtyseven&quot;? Doesn&#39;t make sense at all. Why should Chinese do so?","body":"Since when Chinese use Chinese characters for there phone numbers instead of typing arabic numbers? Did you ever write <b>your</b> phone number as a word like &quot;onemilliontwohundredthirtyfourthousandfivehundredsixtyseven&zwnj;&#8203;&quot;? Doesn&#39;t make sense at all. Why should Chinese do so?"},{"owner":{"account_id":6457401,"reputation":583,"user_id":5002324,"display_name":"Christoph S."},"score":0,"creation_date":1666268928,"post_id":32523130,"comment_id":130899370,"body_markdown":"`三十萬零二百五十` is normally written as `三十萬零二百五`. By the way: `二百五` (250) means &quot;idiot&quot; in Chinese language.","body":"<code>三十萬零二百五十</code> is normally written as <code>三十萬零二百五</code>. By the way: <code>二百五</code> (250) means &quot;idiot&quot; in Chinese language."}],"answers":[{"tags":[],"owner":{"account_id":2505165,"reputation":827,"user_id":2179112,"display_name":"Heinrich supports Monica"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442682812,"creation_date":1442682812,"answer_id":32671039,"question_id":32523130,"body_markdown":"as some have already pointed out in the comments, these are the words used for numbers, i.e. &quot;one&quot;, &quot;two&quot;, &quot;three&quot; etc.\r\nChina introduced the indo-arabic numbers in the 19th century, so `\\p{N}` should also match Chinese numbers. If you also want the literals, you should include them, as stribizhev suggested.","title":"Regex for matching multilingual numbers not detecting Chinese numbers","body":"<p>as some have already pointed out in the comments, these are the words used for numbers, i.e. \"one\", \"two\", \"three\" etc.\nChina introduced the indo-arabic numbers in the 19th century, so <code>\\p{N}</code> should also match Chinese numbers. If you also want the literals, you should include them, as stribizhev suggested.</p>\n"},{"tags":[],"owner":{"account_id":9911496,"reputation":121,"user_id":7338045,"display_name":"Rahul Brahmbhatt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681558707,"creation_date":1681558707,"answer_id":76022018,"question_id":32523130,"body_markdown":"If you try with javascript it will work with This regex Pattern\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    const stringNumber = &quot;三十萬零二百五十12&quot;;\r\n    const regex = /\\d+/g; \r\n\r\n    const numbers = stringNumber.match(regex);\r\n\r\n    console.log(numbers);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Regex for matching multilingual numbers not detecting Chinese numbers","body":"<p>If you try with javascript it will work with This regex Pattern</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const stringNumber = \"三十萬零二百五十12\";\nconst regex = /\\d+/g; \n\nconst numbers = stringNumber.match(regex);\n\nconsole.log(numbers);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1716,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1681558707,"creation_date":1441973140,"question_id":32523130,"body_markdown":"I have a method which detects whether a String is a number:\r\n\r\n    public static boolean isNumber(String num)\r\n    {\r\n    \treturn num.matches(&quot;(\\\\p{N})+&quot;);\r\n    }\r\n    \r\nThe above method is successfully matching English, Hindi, Arabic numbers but fails to match Chinese numbers:\r\n\r\n三十萬零二百五十 etc.\r\n\r\nIs it possible to create a regex which can match a number from any language(or major languages)? \r\n\r\nedit: the number won&#39;t be a decimal, it will be used to validate a phone number.","title":"Regex for matching multilingual numbers not detecting Chinese numbers","body":"<p>I have a method which detects whether a String is a number:</p>\n\n<pre><code>public static boolean isNumber(String num)\n{\n    return num.matches(\"(\\\\p{N})+\");\n}\n</code></pre>\n\n<p>The above method is successfully matching English, Hindi, Arabic numbers but fails to match Chinese numbers:</p>\n\n<p>三十萬零二百五十 etc.</p>\n\n<p>Is it possible to create a regex which can match a number from any language(or major languages)? </p>\n\n<p>edit: the number won't be a decimal, it will be used to validate a phone number.</p>\n"},{"tags":["java","exception","executorservice","scheduledexecutorservice"],"answers":[{"tags":[],"owner":{"account_id":19136733,"reputation":67,"user_id":16967432,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681558475,"creation_date":1680868284,"answer_id":75958147,"question_id":75957232,"body_markdown":"This worked for me:\r\n```\r\npublic void restart() throws Exception {\r\n    CompletableFuture&lt;?&gt; delayed = new CompletableFuture&lt;&gt;();\r\n    ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();\r\n    executorService.scheduleWithFixedDelay(() -&gt; {\r\n        try {\r\n            throw new RuntimeException(&quot;My exception.&quot;);\r\n        } catch(Exception e) {\r\n            delayed.completeExceptionally(e);\r\n        }\r\n    }, 1000L, 150L, TimeUnit.MILLISECONDS);\r\n\r\n    try {\r\n        delayed.get();\r\n    } catch (ExecutionException e) {\r\n        throw (Exception) e.getCause();\r\n    }\r\n}\r\n```\r\n\r\nIn this modified code, we are calling the ``get()`` method on the delayed ``CompletableFuture``, which blocks until the ``CompletableFuture`` is completed. If the ``CompletableFuture`` is completed exceptionally, ``get()`` throws an ``ExecutionException`` with the original exception as its cause. We then extract the cause and rethrow it as an ``Exception``. This way, the exception is bubbled up to the ``restart()`` method and can be handled appropriately.\r\n\r\nBut if we want to achieve it without using blocking get call, we can use callback `Consumer&lt;Throwable&gt; callback` and if exeption throws, use `callback.accept(e);` like in this snippet:\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        restart((t) -&gt; System.out.println(&quot;Exception occurred: &quot; + t.getMessage()));\r\n    }\r\n\r\n    public static void restart(Consumer&lt;Throwable&gt; callback) {\r\n        CompletableFuture.runAsync(() -&gt; {\r\n            try {\r\n                // Code that may throw an exception goes here\r\n                throw new RuntimeException(&quot;My exception.&quot;);\r\n            } catch (Exception e) {\r\n                callback.accept(e);\r\n            }\r\n        });\r\n    }\r\n\r\n```","title":"How to throw new exception in ScheduledExecutorService?","body":"<p>This worked for me:</p>\n<pre><code>public void restart() throws Exception {\n    CompletableFuture&lt;?&gt; delayed = new CompletableFuture&lt;&gt;();\n    ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();\n    executorService.scheduleWithFixedDelay(() -&gt; {\n        try {\n            throw new RuntimeException(&quot;My exception.&quot;);\n        } catch(Exception e) {\n            delayed.completeExceptionally(e);\n        }\n    }, 1000L, 150L, TimeUnit.MILLISECONDS);\n\n    try {\n        delayed.get();\n    } catch (ExecutionException e) {\n        throw (Exception) e.getCause();\n    }\n}\n</code></pre>\n<p>In this modified code, we are calling the <code>get()</code> method on the delayed <code>CompletableFuture</code>, which blocks until the <code>CompletableFuture</code> is completed. If the <code>CompletableFuture</code> is completed exceptionally, <code>get()</code> throws an <code>ExecutionException</code> with the original exception as its cause. We then extract the cause and rethrow it as an <code>Exception</code>. This way, the exception is bubbled up to the <code>restart()</code> method and can be handled appropriately.</p>\n<p>But if we want to achieve it without using blocking get call, we can use callback <code>Consumer&lt;Throwable&gt; callback</code> and if exeption throws, use <code>callback.accept(e);</code> like in this snippet:</p>\n<pre><code>    public static void main(String[] args) {\n        restart((t) -&gt; System.out.println(&quot;Exception occurred: &quot; + t.getMessage()));\n    }\n\n    public static void restart(Consumer&lt;Throwable&gt; callback) {\n        CompletableFuture.runAsync(() -&gt; {\n            try {\n                // Code that may throw an exception goes here\n                throw new RuntimeException(&quot;My exception.&quot;);\n            } catch (Exception e) {\n                callback.accept(e);\n            }\n        });\n    }\n\n</code></pre>\n"}],"owner":{"account_id":4211959,"reputation":89,"user_id":3449390,"display_name":"BountyHunter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75958147,"answer_count":1,"score":1,"last_activity_date":1681558475,"creation_date":1680860044,"question_id":75957232,"body_markdown":"I have the following code:\r\n\r\n```\r\npublic void restart() throws Exception\r\n{\r\n   CompletableFuture&lt;?&gt; delayed = new CompletableFuture&lt;&gt;(); \r\n   ScheduledExecutorService executorService = \r\n   Executors.newSingleThreadScheduledExecutor();\r\n   executorService.scheduleWithFixedDelay(() -&gt; \r\n   {\r\n      try\r\n      {\r\n         throw new RuntimeException(&quot;My exception.&quot;);\r\n      }\r\n      catch(Exception e)\r\n      {\r\n         delayed.completeExceptionally(e);\r\n      }\r\n   }, 1000L, 150L, TimeUnit.MILLISECONDS));\r\n\r\n   delayed.whenCompleteAsync((r, t) -&gt; {\r\n      if (t != null)\r\n      {\r\n         throw new RuntimeException(t);\r\n      }\r\n   });\r\n}\r\n\r\n```\r\n\r\nI&#39;m trying to bubble up the exception which I&#39;ll catch in my `executorService`. But what happens instead is that the exception is thrown in the try block which is caught and `CompletableFuture` is `completedExceptionally`. Which then rethrows the exception. I was hoping that this way I&#39;d be able to bubble up the exception. \r\n\r\nBut unfortunately, that&#39;s not what&#39;s happening. The `delayed` throws the exception but it doesn&#39;t bubble up. On top of that for some reason, the exception loop starts right after this. Which is try keeps throwing exception and catch keeps catching but of course `completableFuture` has already been completed so it doesn&#39;t come to that.\r\n\r\nThe question is how can we handle and bubble up the exception?","title":"How to throw new exception in ScheduledExecutorService?","body":"<p>I have the following code:</p>\n<pre><code>public void restart() throws Exception\n{\n   CompletableFuture&lt;?&gt; delayed = new CompletableFuture&lt;&gt;(); \n   ScheduledExecutorService executorService = \n   Executors.newSingleThreadScheduledExecutor();\n   executorService.scheduleWithFixedDelay(() -&gt; \n   {\n      try\n      {\n         throw new RuntimeException(&quot;My exception.&quot;);\n      }\n      catch(Exception e)\n      {\n         delayed.completeExceptionally(e);\n      }\n   }, 1000L, 150L, TimeUnit.MILLISECONDS));\n\n   delayed.whenCompleteAsync((r, t) -&gt; {\n      if (t != null)\n      {\n         throw new RuntimeException(t);\n      }\n   });\n}\n\n</code></pre>\n<p>I'm trying to bubble up the exception which I'll catch in my <code>executorService</code>. But what happens instead is that the exception is thrown in the try block which is caught and <code>CompletableFuture</code> is <code>completedExceptionally</code>. Which then rethrows the exception. I was hoping that this way I'd be able to bubble up the exception.</p>\n<p>But unfortunately, that's not what's happening. The <code>delayed</code> throws the exception but it doesn't bubble up. On top of that for some reason, the exception loop starts right after this. Which is try keeps throwing exception and catch keeps catching but of course <code>completableFuture</code> has already been completed so it doesn't come to that.</p>\n<p>The question is how can we handle and bubble up the exception?</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1681581211,"post_id":76021964,"comment_id":134080943,"body_markdown":"so what&#39;s your question?","body":"so what&#39;s your question?"}],"owner":{"account_id":28312618,"reputation":1,"user_id":21649656,"display_name":"user21649656"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681558219,"creation_date":1681558033,"question_id":76021964,"body_markdown":"Error \r\npr 15, 2023 4:46:57 PM org.apache.coyote.http11.Http11Processor service\r\nSEVERE: Error processing request\r\n\r\n\r\n\r\njava.io.UncheckedIOException: Cannot delete C:\\Users\\TANMAY\\Desktop\\TT EE\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp1\\work\\Catalina\\localhost\\Micro\\upload_93202c4e_25ff_4345_a09c_59717f93cba9_00000007.tmp\r\n\tat org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:431)\r\n\tat org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:53)\r\n\tat org.apache.catalina.connector.Request.recycle(Request.java:474)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\nCaused by: java.io.IOException: Cannot delete C:\\Users\\TANMAY\\Desktop\\TT EE\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp1\\work\\Catalina\\localhost\\Micro\\upload_93202c4e_25ff_4345_a09c_59717f93cba9_00000007.tmp\r\n\t... 13 more\r\n\r\n\r\n\r\n","title":"IOException SEVERE: Error processing request","body":"<p>Error\npr 15, 2023 4:46:57 PM org.apache.coyote.http11.Http11Processor service\nSEVERE: Error processing request</p>\n<p>java.io.UncheckedIOException: Cannot delete C:\\Users\\TANMAY\\Desktop\\TT EE.metadata.plugins\\org.eclipse.wst.server.core\\tmp1\\work\\Catalina\\localhost\\Micro\\upload_93202c4e_25ff_4345_a09c_59717f93cba9_00000007.tmp\nat org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:431)\nat org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:53)\nat org.apache.catalina.connector.Request.recycle(Request.java:474)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:1623)\nCaused by: java.io.IOException: Cannot delete C:\\Users\\TANMAY\\Desktop\\TT EE.metadata.plugins\\org.eclipse.wst.server.core\\tmp1\\work\\Catalina\\localhost\\Micro\\upload_93202c4e_25ff_4345_a09c_59717f93cba9_00000007.tmp\n... 13 more</p>\n"},{"tags":["java","filter","java-stream"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1681458066,"post_id":76012604,"comment_id":134062470,"body_markdown":"i m not sure about efficient, but you could probably prettify it by using some sort of chain of responsibility pattern. If the list is not empty, pass it on to next handler until last handler then throw an exception if needed, but it would probably just create more boiler plate code than its worth","body":"i m not sure about efficient, but you could probably prettify it by using some sort of chain of responsibility pattern. If the list is not empty, pass it on to next handler until last handler then throw an exception if needed, but it would probably just create more boiler plate code than its worth"}],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681461028,"creation_date":1681460127,"answer_id":76012947,"question_id":76012604,"body_markdown":"This needs a recursive style implementation.\r\n\r\n```java\r\npublic Object lastRemaining(List&lt;Object&gt; listOfObjects, List&lt; Predicate&lt;Object&gt; &gt; filters, int depth) {\r\n    List&lt;Object&gt; filteredObjects = \r\n        emptyIfNull(listOfObjects).stream()\r\n            .filter(filters.get(depth) // may get index out of bounds if not enough filters\r\n            .collect(Collectors.toList());\r\n\r\n    if (filteredObjects.size() == 1) {\r\n        return filteredObjects.get(0);\r\n    } else if (filteredObjects.isEmpty()) {\r\n        throw new Exception();\r\n    } else {\r\n        return lastRemaining(filteredObjects, filters, ++depth);\r\n    }\r\n}\r\n```\r\n\r\nAnd call it like this:\r\n\r\n```java\r\nPredicate&lt;Object&gt; filter1 = o -&gt; o.hashCode() &gt; 5;\r\nPredicate&lt;Object&gt; filter2 = o -&gt; o.hashCode() &lt; 10;\r\n    \r\nfilters.add(filter1);\r\nfilters.add(filter2);\r\nlastRemaining(getAllObjects(), filters, 0);\r\n```\r\n\r\n\r\n\r\n","title":"How to keep filtering a java stream until there&#39;s only one match?","body":"<p>This needs a recursive style implementation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Object lastRemaining(List&lt;Object&gt; listOfObjects, List&lt; Predicate&lt;Object&gt; &gt; filters, int depth) {\n    List&lt;Object&gt; filteredObjects = \n        emptyIfNull(listOfObjects).stream()\n            .filter(filters.get(depth) // may get index out of bounds if not enough filters\n            .collect(Collectors.toList());\n\n    if (filteredObjects.size() == 1) {\n        return filteredObjects.get(0);\n    } else if (filteredObjects.isEmpty()) {\n        throw new Exception();\n    } else {\n        return lastRemaining(filteredObjects, filters, ++depth);\n    }\n}\n</code></pre>\n<p>And call it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Predicate&lt;Object&gt; filter1 = o -&gt; o.hashCode() &gt; 5;\nPredicate&lt;Object&gt; filter2 = o -&gt; o.hashCode() &lt; 10;\n    \nfilters.add(filter1);\nfilters.add(filter2);\nlastRemaining(getAllObjects(), filters, 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681558129,"creation_date":1681558129,"answer_id":76021972,"question_id":76012604,"body_markdown":"You can simplify your code by not checking for `size() == 0` and have a loop over the filters. A simple method call like this:\r\n\r\n    static Object findOne(List&lt;Object&gt; listOfObjects, Predicate&lt;Object&gt; ... filters) {\r\n        // Ideally use:  Objects.requireNonNull(listOfObjects);\r\n        listOfObjects = emptyIfNull(listOfObjects);\r\n        for (Predicate&lt;Object&gt; filter : filters) {\r\n            listOfObjects = listOfObjects.stream().filter(filter)\r\n                        .collect(Collectors.toList()); // later JDKs: .toList()\r\n            if (listOfObjects.size() == 1) {\r\n                return listOfObjects.get(0);\r\n            }\r\n        }\r\n        throw new RuntimeException(&quot;Not found match&quot;);\r\n    }\r\n    \r\nCall with:\r\n\r\n    Object match = findOne(getAllObjects(), filter1(), filter2(), filter3() /** , ETC */);\r\n\r\n","title":"How to keep filtering a java stream until there&#39;s only one match?","body":"<p>You can simplify your code by not checking for <code>size() == 0</code> and have a loop over the filters. A simple method call like this:</p>\n<pre><code>static Object findOne(List&lt;Object&gt; listOfObjects, Predicate&lt;Object&gt; ... filters) {\n    // Ideally use:  Objects.requireNonNull(listOfObjects);\n    listOfObjects = emptyIfNull(listOfObjects);\n    for (Predicate&lt;Object&gt; filter : filters) {\n        listOfObjects = listOfObjects.stream().filter(filter)\n                    .collect(Collectors.toList()); // later JDKs: .toList()\n        if (listOfObjects.size() == 1) {\n            return listOfObjects.get(0);\n        }\n    }\n    throw new RuntimeException(&quot;Not found match&quot;);\n}\n</code></pre>\n<p>Call with:</p>\n<pre><code>Object match = findOne(getAllObjects(), filter1(), filter2(), filter3() /** , ETC */);\n</code></pre>\n"}],"owner":{"account_id":14968254,"reputation":120,"user_id":10805890,"display_name":"Link"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":473,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681558129,"creation_date":1681457609,"question_id":76012604,"body_markdown":"I have a list of objects and I need to choose the one that matches on most conditions. This means that I need to keep filtering until there&#39;s only one element left or until there&#39;s no elements left - in which case I throw.\r\nI only have 3 levels of filtering as of now, so if by the last filter there&#39;s 0 or more than one matches, I throw too. And yes, the order of the filtering matters.\r\n\r\nI wrote something that works but I wonder if there&#39;s any way of making it prettier or more efficient. Any help appreciated!\r\n\r\n```java\r\nList&lt;Object&gt; listOfObjects = getAllObjects();\r\n\r\nList&lt;Object&gt; filteredObjects1 =\r\n    emptyIfNull(listOfObjects).stream()\r\n        .filter(filter1())\r\n        .collect(Collectors.toList());\r\n\r\nif (filteredObjects1.size() == 1) {\r\n    return filteredObjects1.get(0);\r\n}\r\n\r\nif (filteredObjects1.size() == 0) {\r\n    throw new Exception();\r\n}\r\n\r\nList&lt;Object&gt; filteredObjects2 =\r\n    emptyIfNull(filteredObjects1).stream()\r\n        .filter(filter2())\r\n        .collect(Collectors.toList());\r\n\r\nif (filteredObjects2.size() == 1) {\r\n    return filteredObjects2.get(0);\r\n}\r\n\r\nif (filteredObjects2.size() == 0) {\r\n    throw new Exception();\r\n}\r\n\r\nList&lt;Object&gt; filteredObjects3 =\r\n    emptyIfNull(filteredObjects1).stream()\r\n        .filter(filter3())\r\n        .collect(Collectors.toList());\r\n\r\nif (filteredObjects3.size() == 1) {\r\n    return filteredObjects3.get(0);\r\n} \r\n\r\nthrow new Exception();\r\n```","title":"How to keep filtering a java stream until there&#39;s only one match?","body":"<p>I have a list of objects and I need to choose the one that matches on most conditions. This means that I need to keep filtering until there's only one element left or until there's no elements left - in which case I throw.\nI only have 3 levels of filtering as of now, so if by the last filter there's 0 or more than one matches, I throw too. And yes, the order of the filtering matters.</p>\n<p>I wrote something that works but I wonder if there's any way of making it prettier or more efficient. Any help appreciated!</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Object&gt; listOfObjects = getAllObjects();\n\nList&lt;Object&gt; filteredObjects1 =\n    emptyIfNull(listOfObjects).stream()\n        .filter(filter1())\n        .collect(Collectors.toList());\n\nif (filteredObjects1.size() == 1) {\n    return filteredObjects1.get(0);\n}\n\nif (filteredObjects1.size() == 0) {\n    throw new Exception();\n}\n\nList&lt;Object&gt; filteredObjects2 =\n    emptyIfNull(filteredObjects1).stream()\n        .filter(filter2())\n        .collect(Collectors.toList());\n\nif (filteredObjects2.size() == 1) {\n    return filteredObjects2.get(0);\n}\n\nif (filteredObjects2.size() == 0) {\n    throw new Exception();\n}\n\nList&lt;Object&gt; filteredObjects3 =\n    emptyIfNull(filteredObjects1).stream()\n        .filter(filter3())\n        .collect(Collectors.toList());\n\nif (filteredObjects3.size() == 1) {\n    return filteredObjects3.get(0);\n} \n\nthrow new Exception();\n</code></pre>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1681557918,"post_id":76021919,"comment_id":134077849,"body_markdown":"`Scanner.Sc` would try to reference a nested/inner class called `Sc` inside of `Scanner`. Such a class does not exist. You *probably* meant to write `Scanner Sc` (which would define a variable named `Sc` of type `Scanner`). Also (and that&#39;s not a cause for a problem, but just a good suggestion): the naming convention in Java says that variables should start with a lower case letter, so `Scanner sc` is the more common/widely understood way.","body":"<code>Scanner.Sc</code> would try to reference a nested/inner class called <code>Sc</code> inside of <code>Scanner</code>. Such a class does not exist. You <i>probably</i> meant to write <code>Scanner Sc</code> (which would define a variable named <code>Sc</code> of type <code>Scanner</code>). Also (and that&#39;s not a cause for a problem, but just a good suggestion): the naming convention in Java says that variables should start with a lower case letter, so <code>Scanner sc</code> is the more common/widely understood way."}],"owner":{"account_id":24912938,"reputation":9,"user_id":18782262,"display_name":"Pallavi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1681557836,"answer_count":0,"score":0,"last_activity_date":1681557815,"creation_date":1681557535,"question_id":76021919,"body_markdown":"```\r\nimport java.util.*;\r\npublic class add {\r\n\r\n    public static void main (String args[]){\r\n\r\n        Scanner.Sc = new Scanner(System.in);\r\n        int a = Sc.nextInt();\r\n        int b =  Sc.nextInt();\r\n        int sum=  a+b;\r\n\r\n        System.out.println(sum);\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n    \r\n}\r\n```\r\n\r\nProblem:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \r\n        Sc cannot be resolved or is not a field\r\n        Sc cannot be resolved\r\n        Sc cannot be resolved\r\n\r\n        at add.main(add.java:6)\r\n\r\n\r\n\r\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \r\n        Sc cannot be resolved or is not a field\r\n        Sc cannot be resolved\r\n        Sc cannot be resolved\r\n\r\n        at add.main(add.java:6)\r\n```","title":"Scanner class &#39;SC&#39; Sc cannot be resolved or is not a field","body":"<pre><code>import java.util.*;\npublic class add {\n\n    public static void main (String args[]){\n\n        Scanner.Sc = new Scanner(System.in);\n        int a = Sc.nextInt();\n        int b =  Sc.nextInt();\n        int sum=  a+b;\n\n        System.out.println(sum);\n\n\n\n\n\n    }\n    \n}\n</code></pre>\n<p>Problem:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \n        Sc cannot be resolved or is not a field\n        Sc cannot be resolved\n        Sc cannot be resolved\n\n        at add.main(add.java:6)\n\n\n\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \n        Sc cannot be resolved or is not a field\n        Sc cannot be resolved\n        Sc cannot be resolved\n\n        at add.main(add.java:6)\n</code></pre>\n"},{"tags":["java","lambda","java-8","java-stream"],"comments":[{"owner":{"account_id":2347441,"reputation":67540,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":0,"creation_date":1396115333,"post_id":22725537,"comment_id":34649902,"body_markdown":"After coding a bit with your example, I actually find the explicit version more readable than the one concerning, if it had existed `.flatMap(Optional::toStream)`, with your version you actually see what is going on.","body":"After coding a bit with your example, I actually find the explicit version more readable than the one concerning, if it had existed <code>.flatMap(Optional::toStream)</code>, with your version you actually see what is going on."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":21,"creation_date":1424903449,"post_id":22725537,"comment_id":45747994,"body_markdown":"@skiwi Well, `Optional.stream` exists in JDK 9 now....","body":"@skiwi Well, <code>Optional.stream</code> exists in JDK 9 now...."},{"owner":{"account_id":937438,"reputation":8861,"user_id":966104,"accept_rate":70,"display_name":"Yona Appletree"},"score":0,"creation_date":1425257783,"post_id":22725537,"comment_id":45876182,"body_markdown":"I&#39;m curious where this is documented, and what the process for getting it in was. There are some other methods that really seem like they should exist, and I&#39;m curious where discussion for API changes is taking place.","body":"I&#39;m curious where this is documented, and what the process for getting it in was. There are some other methods that really seem like they should exist, and I&#39;m curious where discussion for API changes is taking place."},{"owner":{"account_id":83010,"reputation":27402,"user_id":233014,"display_name":"Christoffer Hammarstr&#246;m"},"score":3,"creation_date":1426168670,"post_id":22725537,"comment_id":46268463,"body_markdown":"https://bugs.openjdk.java.net/browse/JDK-8050820","body":"<a href=\"https://bugs.openjdk.java.net/browse/JDK-8050820\" rel=\"nofollow noreferrer\">bugs.openjdk.java.net/browse/JDK-8050820</a>"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":12,"creation_date":1435850943,"post_id":22725537,"comment_id":50382510,"body_markdown":"The funny thing is that JDK-8050820 actually refers to this question in its description!","body":"The funny thing is that JDK-8050820 actually refers to this question in its description!"},{"owner":{"account_id":2105809,"reputation":3833,"user_id":1872168,"accept_rate":64,"display_name":"Crystark"},"score":0,"creation_date":1447171703,"post_id":22725537,"comment_id":55042383,"body_markdown":"In a pure performance perspective, I think what you did is just fine. I&#39;m not sure how Java 8 implements `flatMap` but this usually introduces a merge which doesn&#39;t scale as well as some simple `.filter().map()`.","body":"In a pure performance perspective, I think what you did is just fine. I&#39;m not sure how Java 8 implements <code>flatMap</code> but this usually introduces a merge which doesn&#39;t scale as well as some simple <code>.filter().map()</code>."},{"owner":{"account_id":4250230,"reputation":1766,"user_id":3477539,"accept_rate":83,"display_name":"Rostislav V"},"score":0,"creation_date":1570515234,"post_id":22725537,"comment_id":102927632,"body_markdown":"I hope my answer may help you: https://stackoverflow.com/a/58281000/3477539","body":"I hope my answer may help you: <a href=\"https://stackoverflow.com/a/58281000/3477539\">stackoverflow.com/a/58281000/3477539</a>"}],"answers":[{"tags":[],"owner":{"account_id":1285,"reputation":8351,"user_id":1712,"accept_rate":84,"display_name":"Roland Tepp"},"down_vote_count":8,"up_vote_count":3,"is_accepted":false,"score":-5,"last_activity_date":1396055720,"creation_date":1396055720,"answer_id":22725767,"question_id":22725537,"body_markdown":"Most likely You are doing it wrong.\r\n\r\nJava 8 Optional is not meant to be used in this manner. It is usually only reserved for terminal stream operations that may or may not return a value, like find for example.\r\n\r\nIn your case it might be better to first try to find a cheap way to filter out those items that are resolvable and then get the first item as an optional and resolve it as a last operation. Better yet - instead of filtering, find the first resolvable item and resolve it.\r\n\r\n    things.filter(Thing::isResolvable)\r\n          .findFirst()\r\n          .flatMap(this::resolve)\r\n          .get();\r\n\r\nRule of thumb is that you should strive to reduce number of items in the stream before you transform them to something else. YMMV of course.","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>Most likely You are doing it wrong.</p>\n\n<p>Java 8 Optional is not meant to be used in this manner. It is usually only reserved for terminal stream operations that may or may not return a value, like find for example.</p>\n\n<p>In your case it might be better to first try to find a cheap way to filter out those items that are resolvable and then get the first item as an optional and resolve it as a last operation. Better yet - instead of filtering, find the first resolvable item and resolve it.</p>\n\n<pre><code>things.filter(Thing::isResolvable)\n      .findFirst()\n      .flatMap(this::resolve)\n      .get();\n</code></pre>\n\n<p>Rule of thumb is that you should strive to reduce number of items in the stream before you transform them to something else. YMMV of course.</p>\n"},{"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"down_vote_count":1,"up_vote_count":359,"is_accepted":true,"score":358,"last_activity_date":1593073696,"creation_date":1396066205,"answer_id":22726869,"question_id":22725537,"body_markdown":"&lt;h2&gt;Java 9&lt;/h2&gt;\r\n\r\n[`Optional.stream`](https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#stream--) has been added to JDK 9. This enables you to do the following, without the need of any helper method:\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n              .map(this::resolve)\r\n              .flatMap(Optional::stream)\r\n              .findFirst();\r\n\r\n&lt;h2&gt;Java 8&lt;/h2&gt;\r\n\r\nYes, this was a small hole in the API, in that it&#39;s somewhat inconvenient to turn an `Optional&lt;T&gt;` into a zero-or-one length `Stream&lt;T&gt;`. You could do this:\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n              .map(this::resolve)\r\n              .flatMap(o -&gt; o.isPresent() ? Stream.of(o.get()) : Stream.empty())\r\n              .findFirst();\r\n\r\nHaving the ternary operator inside the `flatMap` is a bit cumbersome, though, so it might be better to write a little helper function to do this:\r\n\r\n    /**\r\n     * Turns an Optional&lt;T&gt; into a Stream&lt;T&gt; of length zero or one depending upon\r\n     * whether a value is present.\r\n     */\r\n    static &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\r\n        if (opt.isPresent())\r\n            return Stream.of(opt.get());\r\n        else\r\n            return Stream.empty();\r\n    }\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n              .flatMap(t -&gt; streamopt(resolve(t)))\r\n              .findFirst();\r\n\r\nHere, I&#39;ve inlined the call to `resolve()` instead of having a separate `map()` operation, but this is a matter of taste.","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<h2>Java 9</h2>\n<p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#stream--\" rel=\"noreferrer\"><code>Optional.stream</code></a> has been added to JDK 9. This enables you to do the following, without the need of any helper method:</p>\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n          .map(this::resolve)\n          .flatMap(Optional::stream)\n          .findFirst();\n</code></pre>\n<h2>Java 8</h2>\n<p>Yes, this was a small hole in the API, in that it's somewhat inconvenient to turn an <code>Optional&lt;T&gt;</code> into a zero-or-one length <code>Stream&lt;T&gt;</code>. You could do this:</p>\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n          .map(this::resolve)\n          .flatMap(o -&gt; o.isPresent() ? Stream.of(o.get()) : Stream.empty())\n          .findFirst();\n</code></pre>\n<p>Having the ternary operator inside the <code>flatMap</code> is a bit cumbersome, though, so it might be better to write a little helper function to do this:</p>\n<pre><code>/**\n * Turns an Optional&lt;T&gt; into a Stream&lt;T&gt; of length zero or one depending upon\n * whether a value is present.\n */\nstatic &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\n    if (opt.isPresent())\n        return Stream.of(opt.get());\n    else\n        return Stream.empty();\n}\n\nOptional&lt;Other&gt; result =\n    things.stream()\n          .flatMap(t -&gt; streamopt(resolve(t)))\n          .findFirst();\n</code></pre>\n<p>Here, I've inlined the call to <code>resolve()</code> instead of having a separate <code>map()</code> operation, but this is a matter of taste.</p>\n"},{"tags":[],"owner":{"account_id":2347441,"reputation":67540,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1396118156,"creation_date":1396118156,"answer_id":22735184,"question_id":22725537,"body_markdown":"You cannot do it more concise as you are already doing.\n\nYou claim that you do not want `.filter(Optional::isPresent)` *and* `.map(Optional::get)`.\n\nThis has been resolved by the method @StuartMarks describes, however as a result you now map it to an `Optional&lt;T&gt;`, so now you need to use `.flatMap(this::streamopt)` and a `get()` in the end.\n\nSo it still consists of two statements and you can now get exceptions with the new method! Because, what if every optional is empty? Then the `findFirst()` will return an empty optional and your `get()` will fail!\n\nSo what you have:\n\n    things.stream()\n        .map(this::resolve)\n        .filter(Optional::isPresent)\n        .map(Optional::get)\n        .findFirst();\n\n**is** actually the best way to accomplish what you want, and that is you want to save the result as a `T`, not as an `Optional&lt;T&gt;`.\n\nI took the liberty of creating a `CustomOptional&lt;T&gt;` class that wraps the `Optional&lt;T&gt;` and provides an extra method, `flatStream()`. Note that you cannot extend `Optional&lt;T&gt;`:\n\n    class CustomOptional&lt;T&gt; {\n        private final Optional&lt;T&gt; optional;\n\n        private CustomOptional() {\n            this.optional = Optional.empty();\n        }\n\n        private CustomOptional(final T value) {\n            this.optional = Optional.of(value);\n        }\n\n        private CustomOptional(final Optional&lt;T&gt; optional) {\n            this.optional = optional;\n        }\n\n        public Optional&lt;T&gt; getOptional() {\n            return optional;\n        }\n\n        public static &lt;T&gt; CustomOptional&lt;T&gt; empty() {\n            return new CustomOptional&lt;&gt;();\n        }\n\n        public static &lt;T&gt; CustomOptional&lt;T&gt; of(final T value) {\n            return new CustomOptional&lt;&gt;(value);\n        }\n\n        public static &lt;T&gt; CustomOptional&lt;T&gt; ofNullable(final T value) {\n            return (value == null) ? empty() : of(value);\n        }\n\n        public T get() {\n            return optional.get();\n        }\n\n        public boolean isPresent() {\n            return optional.isPresent();\n        }\n\n        public void ifPresent(final Consumer&lt;? super T&gt; consumer) {\n            optional.ifPresent(consumer);\n        }\n\n        public CustomOptional&lt;T&gt; filter(final Predicate&lt;? super T&gt; predicate) {\n            return new CustomOptional&lt;&gt;(optional.filter(predicate));\n        }\n\n        public &lt;U&gt; CustomOptional&lt;U&gt; map(final Function&lt;? super T, ? extends U&gt; mapper) {\n            return new CustomOptional&lt;&gt;(optional.map(mapper));\n        }\n\n        public &lt;U&gt; CustomOptional&lt;U&gt; flatMap(final Function&lt;? super T, ? extends CustomOptional&lt;U&gt;&gt; mapper) {\n            return new CustomOptional&lt;&gt;(optional.flatMap(mapper.andThen(cu -&gt; cu.getOptional())));\n        }\n\n        public T orElse(final T other) {\n            return optional.orElse(other);\n        }\n\n        public T orElseGet(final Supplier&lt;? extends T&gt; other) {\n            return optional.orElseGet(other);\n        }\n\n        public &lt;X extends Throwable&gt; T orElseThrow(final Supplier&lt;? extends X&gt; exceptionSuppier) throws X {\n            return optional.orElseThrow(exceptionSuppier);\n        }\n\n        public Stream&lt;T&gt; flatStream() {\n            if (!optional.isPresent()) {\n                return Stream.empty();\n            }\n            return Stream.of(get());\n        }\n\n        public T getTOrNull() {\n            if (!optional.isPresent()) {\n                return null;\n            }\n            return get();\n        }\n\n        @Override\n        public boolean equals(final Object obj) {\n            return optional.equals(obj);\n        }\n\n        @Override\n        public int hashCode() {\n            return optional.hashCode();\n        }\n\n        @Override\n        public String toString() {\n            return optional.toString();\n        }\n    }\n\nYou will see that I added `flatStream()`, as here:\n\n    public Stream&lt;T&gt; flatStream() {\n        if (!optional.isPresent()) {\n            return Stream.empty();\n        }\n        return Stream.of(get());\n    }\n\nUsed as:\n\n    String result = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;de&quot;, &quot;fg&quot;, &quot;hij&quot;)\n            .map(this::resolve)\n            .flatMap(CustomOptional::flatStream)\n            .findFirst()\n            .get();\n\nYou *still* will need to return a `Stream&lt;T&gt;` here, as you cannot return `T`, because if `!optional.isPresent()`, then `T == null` if you declare it such, but then your `.flatMap(CustomOptional::flatStream)` would attempt to add `null` to a stream and that is not possible.\n\nAs example:\n\n    public T getTOrNull() {\n        if (!optional.isPresent()) {\n            return null;\n        }\n        return get();\n    }\n\nUsed as:\n\n    String result = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;de&quot;, &quot;fg&quot;, &quot;hij&quot;)\n            .map(this::resolve)\n            .map(CustomOptional::getTOrNull)\n            .findFirst()\n            .get();\n\nWill now throw a `NullPointerException` inside the stream operations.\n\n# Conclusion\n\nThe method you used, is actually the best method.","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>You cannot do it more concise as you are already doing.</p>\n<p>You claim that you do not want <code>.filter(Optional::isPresent)</code> <em>and</em> <code>.map(Optional::get)</code>.</p>\n<p>This has been resolved by the method @StuartMarks describes, however as a result you now map it to an <code>Optional&lt;T&gt;</code>, so now you need to use <code>.flatMap(this::streamopt)</code> and a <code>get()</code> in the end.</p>\n<p>So it still consists of two statements and you can now get exceptions with the new method! Because, what if every optional is empty? Then the <code>findFirst()</code> will return an empty optional and your <code>get()</code> will fail!</p>\n<p>So what you have:</p>\n<pre><code>things.stream()\n    .map(this::resolve)\n    .filter(Optional::isPresent)\n    .map(Optional::get)\n    .findFirst();\n</code></pre>\n<p><strong>is</strong> actually the best way to accomplish what you want, and that is you want to save the result as a <code>T</code>, not as an <code>Optional&lt;T&gt;</code>.</p>\n<p>I took the liberty of creating a <code>CustomOptional&lt;T&gt;</code> class that wraps the <code>Optional&lt;T&gt;</code> and provides an extra method, <code>flatStream()</code>. Note that you cannot extend <code>Optional&lt;T&gt;</code>:</p>\n<pre><code>class CustomOptional&lt;T&gt; {\n    private final Optional&lt;T&gt; optional;\n\n    private CustomOptional() {\n        this.optional = Optional.empty();\n    }\n\n    private CustomOptional(final T value) {\n        this.optional = Optional.of(value);\n    }\n\n    private CustomOptional(final Optional&lt;T&gt; optional) {\n        this.optional = optional;\n    }\n\n    public Optional&lt;T&gt; getOptional() {\n        return optional;\n    }\n\n    public static &lt;T&gt; CustomOptional&lt;T&gt; empty() {\n        return new CustomOptional&lt;&gt;();\n    }\n\n    public static &lt;T&gt; CustomOptional&lt;T&gt; of(final T value) {\n        return new CustomOptional&lt;&gt;(value);\n    }\n\n    public static &lt;T&gt; CustomOptional&lt;T&gt; ofNullable(final T value) {\n        return (value == null) ? empty() : of(value);\n    }\n\n    public T get() {\n        return optional.get();\n    }\n\n    public boolean isPresent() {\n        return optional.isPresent();\n    }\n\n    public void ifPresent(final Consumer&lt;? super T&gt; consumer) {\n        optional.ifPresent(consumer);\n    }\n\n    public CustomOptional&lt;T&gt; filter(final Predicate&lt;? super T&gt; predicate) {\n        return new CustomOptional&lt;&gt;(optional.filter(predicate));\n    }\n\n    public &lt;U&gt; CustomOptional&lt;U&gt; map(final Function&lt;? super T, ? extends U&gt; mapper) {\n        return new CustomOptional&lt;&gt;(optional.map(mapper));\n    }\n\n    public &lt;U&gt; CustomOptional&lt;U&gt; flatMap(final Function&lt;? super T, ? extends CustomOptional&lt;U&gt;&gt; mapper) {\n        return new CustomOptional&lt;&gt;(optional.flatMap(mapper.andThen(cu -&gt; cu.getOptional())));\n    }\n\n    public T orElse(final T other) {\n        return optional.orElse(other);\n    }\n\n    public T orElseGet(final Supplier&lt;? extends T&gt; other) {\n        return optional.orElseGet(other);\n    }\n\n    public &lt;X extends Throwable&gt; T orElseThrow(final Supplier&lt;? extends X&gt; exceptionSuppier) throws X {\n        return optional.orElseThrow(exceptionSuppier);\n    }\n\n    public Stream&lt;T&gt; flatStream() {\n        if (!optional.isPresent()) {\n            return Stream.empty();\n        }\n        return Stream.of(get());\n    }\n\n    public T getTOrNull() {\n        if (!optional.isPresent()) {\n            return null;\n        }\n        return get();\n    }\n\n    @Override\n    public boolean equals(final Object obj) {\n        return optional.equals(obj);\n    }\n\n    @Override\n    public int hashCode() {\n        return optional.hashCode();\n    }\n\n    @Override\n    public String toString() {\n        return optional.toString();\n    }\n}\n</code></pre>\n<p>You will see that I added <code>flatStream()</code>, as here:</p>\n<pre><code>public Stream&lt;T&gt; flatStream() {\n    if (!optional.isPresent()) {\n        return Stream.empty();\n    }\n    return Stream.of(get());\n}\n</code></pre>\n<p>Used as:</p>\n<pre><code>String result = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;de&quot;, &quot;fg&quot;, &quot;hij&quot;)\n        .map(this::resolve)\n        .flatMap(CustomOptional::flatStream)\n        .findFirst()\n        .get();\n</code></pre>\n<p>You <em>still</em> will need to return a <code>Stream&lt;T&gt;</code> here, as you cannot return <code>T</code>, because if <code>!optional.isPresent()</code>, then <code>T == null</code> if you declare it such, but then your <code>.flatMap(CustomOptional::flatStream)</code> would attempt to add <code>null</code> to a stream and that is not possible.</p>\n<p>As example:</p>\n<pre><code>public T getTOrNull() {\n    if (!optional.isPresent()) {\n        return null;\n    }\n    return get();\n}\n</code></pre>\n<p>Used as:</p>\n<pre><code>String result = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;de&quot;, &quot;fg&quot;, &quot;hij&quot;)\n        .map(this::resolve)\n        .map(CustomOptional::getTOrNull)\n        .findFirst()\n        .get();\n</code></pre>\n<p>Will now throw a <code>NullPointerException</code> inside the stream operations.</p>\n<h1>Conclusion</h1>\n<p>The method you used, is actually the best method.</p>\n"},{"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1424903374,"creation_date":1396471276,"answer_id":22822592,"question_id":22725537,"body_markdown":"I&#39;m adding this second answer based on a proposed edit by user [srborlongan][1] to [my other answer][2]. I think the technique proposed was interesting, but it wasn&#39;t really suitable as an edit to my answer. Others agreed and the proposed edit was voted down. (I wasn&#39;t one of the voters.) The technique has merit, though. It would have been best if srborlongan had posted his/her own answer. This hasn&#39;t happened yet, and I didn&#39;t want the technique to be lost in the mists of the StackOverflow rejected edit history, so I decided to surface it as a separate answer myself.\r\n\r\nBasically the technique is to use some of the `Optional` methods in a clever way to avoid having to use a ternary operator (`? :`) or an if/else statement.\r\n\r\nMy inline example would be rewritten this way:\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n              .map(this::resolve)\r\n              .flatMap(o -&gt; o.map(Stream::of).orElseGet(Stream::empty))\r\n              .findFirst();\r\n\r\nAn my example that uses a helper method would be rewritten this way:\r\n\r\n    /**\r\n     * Turns an Optional&lt;T&gt; into a Stream&lt;T&gt; of length zero or one depending upon\r\n     * whether a value is present.\r\n     */\r\n    static &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\r\n        return opt.map(Stream::of)\r\n                  .orElseGet(Stream::empty);\r\n    }\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n              .flatMap(t -&gt; streamopt(resolve(t)))\r\n              .findFirst();\r\n\r\n**COMMENTARY**\r\n\r\nLet&#39;s compare the original vs modified versions directly:\r\n\r\n    // original\r\n    .flatMap(o -&gt; o.isPresent() ? Stream.of(o.get()) : Stream.empty())\r\n\r\n    // modified\r\n    .flatMap(o -&gt; o.map(Stream::of).orElseGet(Stream::empty))\r\n\r\nThe original is a straightforward if workmanlike approach: we get an `Optional&lt;Other&gt;`; if it has a value, we return a stream containing that value, and if it has no value, we return an empty stream. Pretty simple and easy to explain.\r\n\r\nThe modification is clever and has the advantage that it avoids conditionals. (I know that some people dislike the ternary operator. If misused it can indeed make code hard to understand.) However, sometimes things can be too clever. The modified code also starts off with an `Optional&lt;Other&gt;`. Then it calls `Optional.map` which is defined as follows:\r\n\r\n&gt; If a value is present, apply the provided mapping function to it, and if the result is non-null, return an Optional describing the result. Otherwise return an empty Optional.\r\n\r\nThe `map(Stream::of)` call returns an `Optional&lt;Stream&lt;Other&gt;&gt;`. If a value was present in the input Optional, the returned Optional contains a Stream that contains the single Other result. But if the value was not present, the result is an empty Optional.\r\n\r\nNext, the call to `orElseGet(Stream::empty)` returns a value of type `Stream&lt;Other&gt;`. If its input value is present, it gets the value, which is the single-element `Stream&lt;Other&gt;`. Otherwise (if the input value is absent) it returns an empty `Stream&lt;Other&gt;`. So the result is correct, the same as the original conditional code.\r\n\r\nIn the comments discussing on my answer, regarding the rejected edit, I had described this technique as &quot;more concise but also more obscure&quot;. I stand by this. It took me a while to figure out what it was doing, and it also took me a while to write up the above description of what it was doing. The key subtlety is the transformation from `Optional&lt;Other&gt;` to `Optional&lt;Stream&lt;Other&gt;&gt;`. Once you grok this it makes sense, but it wasn&#39;t obvious to me.\r\n\r\nI&#39;ll acknowledge, though, that things that are initially obscure can become idiomatic over time. It might be that this technique ends up being the best way in practice, at least until `Optional.stream` gets added (if it ever does).\r\n\r\n**UPDATE:** `Optional.stream` has been added to JDK 9.\r\n\r\n  [1]: https://stackoverflow.com/users/3475600/srborlongan\r\n  [2]: https://stackoverflow.com/a/22726869/1441122","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>I'm adding this second answer based on a proposed edit by user <a href=\"https://stackoverflow.com/users/3475600/srborlongan\">srborlongan</a> to <a href=\"https://stackoverflow.com/a/22726869/1441122\">my other answer</a>. I think the technique proposed was interesting, but it wasn't really suitable as an edit to my answer. Others agreed and the proposed edit was voted down. (I wasn't one of the voters.) The technique has merit, though. It would have been best if srborlongan had posted his/her own answer. This hasn't happened yet, and I didn't want the technique to be lost in the mists of the StackOverflow rejected edit history, so I decided to surface it as a separate answer myself.</p>\n\n<p>Basically the technique is to use some of the <code>Optional</code> methods in a clever way to avoid having to use a ternary operator (<code>? :</code>) or an if/else statement.</p>\n\n<p>My inline example would be rewritten this way:</p>\n\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n          .map(this::resolve)\n          .flatMap(o -&gt; o.map(Stream::of).orElseGet(Stream::empty))\n          .findFirst();\n</code></pre>\n\n<p>An my example that uses a helper method would be rewritten this way:</p>\n\n<pre><code>/**\n * Turns an Optional&lt;T&gt; into a Stream&lt;T&gt; of length zero or one depending upon\n * whether a value is present.\n */\nstatic &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\n    return opt.map(Stream::of)\n              .orElseGet(Stream::empty);\n}\n\nOptional&lt;Other&gt; result =\n    things.stream()\n          .flatMap(t -&gt; streamopt(resolve(t)))\n          .findFirst();\n</code></pre>\n\n<p><strong>COMMENTARY</strong></p>\n\n<p>Let's compare the original vs modified versions directly:</p>\n\n<pre><code>// original\n.flatMap(o -&gt; o.isPresent() ? Stream.of(o.get()) : Stream.empty())\n\n// modified\n.flatMap(o -&gt; o.map(Stream::of).orElseGet(Stream::empty))\n</code></pre>\n\n<p>The original is a straightforward if workmanlike approach: we get an <code>Optional&lt;Other&gt;</code>; if it has a value, we return a stream containing that value, and if it has no value, we return an empty stream. Pretty simple and easy to explain.</p>\n\n<p>The modification is clever and has the advantage that it avoids conditionals. (I know that some people dislike the ternary operator. If misused it can indeed make code hard to understand.) However, sometimes things can be too clever. The modified code also starts off with an <code>Optional&lt;Other&gt;</code>. Then it calls <code>Optional.map</code> which is defined as follows:</p>\n\n<blockquote>\n  <p>If a value is present, apply the provided mapping function to it, and if the result is non-null, return an Optional describing the result. Otherwise return an empty Optional.</p>\n</blockquote>\n\n<p>The <code>map(Stream::of)</code> call returns an <code>Optional&lt;Stream&lt;Other&gt;&gt;</code>. If a value was present in the input Optional, the returned Optional contains a Stream that contains the single Other result. But if the value was not present, the result is an empty Optional.</p>\n\n<p>Next, the call to <code>orElseGet(Stream::empty)</code> returns a value of type <code>Stream&lt;Other&gt;</code>. If its input value is present, it gets the value, which is the single-element <code>Stream&lt;Other&gt;</code>. Otherwise (if the input value is absent) it returns an empty <code>Stream&lt;Other&gt;</code>. So the result is correct, the same as the original conditional code.</p>\n\n<p>In the comments discussing on my answer, regarding the rejected edit, I had described this technique as \"more concise but also more obscure\". I stand by this. It took me a while to figure out what it was doing, and it also took me a while to write up the above description of what it was doing. The key subtlety is the transformation from <code>Optional&lt;Other&gt;</code> to <code>Optional&lt;Stream&lt;Other&gt;&gt;</code>. Once you grok this it makes sense, but it wasn't obvious to me.</p>\n\n<p>I'll acknowledge, though, that things that are initially obscure can become idiomatic over time. It might be that this technique ends up being the best way in practice, at least until <code>Optional.stream</code> gets added (if it ever does).</p>\n\n<p><strong>UPDATE:</strong> <code>Optional.stream</code> has been added to JDK 9.</p>\n"},{"tags":[],"owner":{"account_id":1212298,"reputation":27075,"user_id":1180621,"accept_rate":100,"display_name":"Andrejs"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1417623756,"creation_date":1417367042,"answer_id":27215810,"question_id":22725537,"body_markdown":"A slightly shorter version using `reduce`:\r\n\r\n    things.stream()\r\n      .map(this::resolve)\r\n      .reduce(Optional.empty(), (a, b) -&gt; a.isPresent() ? a : b );\r\n\r\nYou could also move the reduce function to a static utility method and then it becomes:\r\n\r\n      .reduce(Optional.empty(), Util::firstPresent );\r\n\r\n","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>A slightly shorter version using <code>reduce</code>:</p>\n\n<pre><code>things.stream()\n  .map(this::resolve)\n  .reduce(Optional.empty(), (a, b) -&gt; a.isPresent() ? a : b );\n</code></pre>\n\n<p>You could also move the reduce function to a static utility method and then it becomes:</p>\n\n<pre><code>  .reduce(Optional.empty(), Util::firstPresent );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1122893,"reputation":2272,"user_id":1110815,"display_name":"Daniel Dietrich"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1454436065,"creation_date":1454435483,"answer_id":35160464,"question_id":22725537,"body_markdown":"If you don&#39;t mind to use a third party library you may use [Javaslang][1]. It is like Scala, but implemented in Java.\r\n\r\nIt comes with a complete immutable collection library that is very similar to that known from Scala. These collections replace Java&#39;s collections and Java 8&#39;s Stream. It also has its own implementation of Option.\r\n\r\n    import javaslang.collection.Stream;\r\n    import javaslang.control.Option;\r\n    \r\n    Stream&lt;Option&lt;String&gt;&gt; options = Stream.of(Option.some(&quot;foo&quot;), Option.none(), Option.some(&quot;bar&quot;));\r\n    \r\n    // = Stream(&quot;foo&quot;, &quot;bar&quot;)\r\n    Stream&lt;String&gt; strings = options.flatMap(o -&gt; o);\r\n\r\nHere is a solution for the example of the initial question:\r\n\r\n    import javaslang.collection.Stream;\r\n    import javaslang.control.Option;\r\n    \r\n    public class Test {\r\n        \r\n        void run() {\r\n    \r\n            // = Stream(Thing(1), Thing(2), Thing(3))\r\n            Stream&lt;Thing&gt; things = Stream.of(new Thing(1), new Thing(2), new Thing(3));\r\n    \r\n            // = Some(Other(2))\r\n            Option&lt;Other&gt; others = things.flatMap(this::resolve).headOption();\r\n        }\r\n    \r\n        Option&lt;Other&gt; resolve(Thing thing) {\r\n            Other other = (thing.i % 2 == 0) ? new Other(i + &quot;&quot;) : null;\r\n            return Option.of(other);\r\n        }\r\n    \r\n    }\r\n    \r\n    class Thing {\r\n        final int i;\r\n        Thing(int i) { this.i = i; }\r\n        public String toString() { return &quot;Thing(&quot; + i + &quot;)&quot;; }\r\n    }\r\n    \r\n    class Other {\r\n        final String s;\r\n        Other(String s) { this.s = s; }\r\n        public String toString() { return &quot;Other(&quot; + s + &quot;)&quot;; }\r\n    }\r\n\r\nDisclaimer: I&#39;m the creator of Javaslang.\r\n\r\n  [1]: http://javaslang.com","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>If you don't mind to use a third party library you may use <a href=\"http://javaslang.com\" rel=\"nofollow\">Javaslang</a>. It is like Scala, but implemented in Java.</p>\n\n<p>It comes with a complete immutable collection library that is very similar to that known from Scala. These collections replace Java's collections and Java 8's Stream. It also has its own implementation of Option.</p>\n\n<pre><code>import javaslang.collection.Stream;\nimport javaslang.control.Option;\n\nStream&lt;Option&lt;String&gt;&gt; options = Stream.of(Option.some(\"foo\"), Option.none(), Option.some(\"bar\"));\n\n// = Stream(\"foo\", \"bar\")\nStream&lt;String&gt; strings = options.flatMap(o -&gt; o);\n</code></pre>\n\n<p>Here is a solution for the example of the initial question:</p>\n\n<pre><code>import javaslang.collection.Stream;\nimport javaslang.control.Option;\n\npublic class Test {\n\n    void run() {\n\n        // = Stream(Thing(1), Thing(2), Thing(3))\n        Stream&lt;Thing&gt; things = Stream.of(new Thing(1), new Thing(2), new Thing(3));\n\n        // = Some(Other(2))\n        Option&lt;Other&gt; others = things.flatMap(this::resolve).headOption();\n    }\n\n    Option&lt;Other&gt; resolve(Thing thing) {\n        Other other = (thing.i % 2 == 0) ? new Other(i + \"\") : null;\n        return Option.of(other);\n    }\n\n}\n\nclass Thing {\n    final int i;\n    Thing(int i) { this.i = i; }\n    public String toString() { return \"Thing(\" + i + \")\"; }\n}\n\nclass Other {\n    final String s;\n    Other(String s) { this.s = s; }\n    public String toString() { return \"Other(\" + s + \")\"; }\n}\n</code></pre>\n\n<p>Disclaimer: I'm the creator of Javaslang.</p>\n"},{"tags":[],"owner":{"account_id":1285,"reputation":8351,"user_id":1712,"accept_rate":84,"display_name":"Roland Tepp"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1459935506,"creation_date":1459430813,"answer_id":36334855,"question_id":22725537,"body_markdown":"As my [previous answer](https://stackoverflow.com/a/22725767/1712) appeared not to be very popular, I will give this another go.\r\n\r\nA short answer:\r\n---------------\r\n\r\nYou are mostly on a right track. The shortest code to get to your desired output I could come up with is this:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    things.stream()\r\n          .map(this::resolve)\r\n          .filter(Optional::isPresent)\r\n          .findFirst()\r\n          .flatMap( Function.identity() );\r\n\r\nThis will fit all your requirements: \r\n\r\n1. It will find first response that resolves to a nonempty `Optional&lt;Result&gt;`\r\n2. It calls `this::resolve` lazily as needed\r\n3. `this::resolve` will not be called after first non-empty result\r\n4. It will return `Optional&lt;Result&gt;`\r\n\r\nLonger answer\r\n-------------\r\n\r\nThe only modification compared to OP initial version was that I removed `.map(Optional::get)` before call to `.findFirst()` and added `.flatMap(o -&gt; o)` as the last call in the chain.\r\n\r\nThis has a nice effect of getting rid of the double-Optional, whenever stream finds an actual result.\r\n\r\nYou can&#39;t really go any shorter than this in Java. \r\n\r\nThe alternative snippet of code using the more conventional `for` loop technique is going to be about same number of lines of code and have more or less same order and number of operations you need to perform:\r\n\r\n1. Calling `this.resolve`, \r\n2. filtering based on `Optional.isPresent` \r\n3. returning the result and\r\n4. some way of dealing with negative result (when nothing was found)\r\n\r\n\r\nJust to prove that my solution works as advertised, I wrote a small test program:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class StackOverflow {\r\n\r\n        public static void main( String... args ) {\r\n            try {\r\n                final int integer = Stream.of( args )\r\n                        .peek( s -&gt; System.out.println( &quot;Looking at &quot; + s ) )\r\n                        .map( StackOverflow::resolve )\r\n                        .filter( Optional::isPresent )\r\n                        .findFirst()\r\n                        .flatMap( o -&gt; o )\r\n                        .orElseThrow( NoSuchElementException::new )\r\n                        .intValue();\r\n\r\n                System.out.println( &quot;First integer found is &quot; + integer );\r\n            }\r\n            catch ( NoSuchElementException e ) {\r\n                System.out.println( &quot;No integers provided!&quot; );\r\n            }\r\n        }\r\n\r\n        private static Optional&lt;Integer&gt; resolve( String string ) {\r\n            try {\r\n                return Optional.of( Integer.valueOf( string ) );\r\n            }\r\n            catch ( NumberFormatException e )\r\n            {\r\n                System.out.println( &#39;&quot;&#39; + string + &#39;&quot;&#39; + &quot; is not an integer&quot;);\r\n                return Optional.empty();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n(It does have few extra lines for debugging and verifying that only as many calls to resolve as needed...)\r\n\r\nExecuting this on a command line, I got the following results:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    $ java StackOferflow a b 3 c 4\r\n    Looking at a\r\n    &quot;a&quot; is not an integer\r\n    Looking at b\r\n    &quot;b&quot; is not an integer\r\n    Looking at 3\r\n    First integer found is 3\r\n\r\n","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>As my <a href=\"https://stackoverflow.com/a/22725767/1712\">previous answer</a> appeared not to be very popular, I will give this another go.</p>\n\n<h2>A short answer:</h2>\n\n<p>You are mostly on a right track. The shortest code to get to your desired output I could come up with is this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>things.stream()\n      .map(this::resolve)\n      .filter(Optional::isPresent)\n      .findFirst()\n      .flatMap( Function.identity() );\n</code></pre>\n\n<p>This will fit all your requirements: </p>\n\n<ol>\n<li>It will find first response that resolves to a nonempty <code>Optional&lt;Result&gt;</code></li>\n<li>It calls <code>this::resolve</code> lazily as needed</li>\n<li><code>this::resolve</code> will not be called after first non-empty result</li>\n<li>It will return <code>Optional&lt;Result&gt;</code></li>\n</ol>\n\n<h2>Longer answer</h2>\n\n<p>The only modification compared to OP initial version was that I removed <code>.map(Optional::get)</code> before call to <code>.findFirst()</code> and added <code>.flatMap(o -&gt; o)</code> as the last call in the chain.</p>\n\n<p>This has a nice effect of getting rid of the double-Optional, whenever stream finds an actual result.</p>\n\n<p>You can't really go any shorter than this in Java. </p>\n\n<p>The alternative snippet of code using the more conventional <code>for</code> loop technique is going to be about same number of lines of code and have more or less same order and number of operations you need to perform:</p>\n\n<ol>\n<li>Calling <code>this.resolve</code>, </li>\n<li>filtering based on <code>Optional.isPresent</code> </li>\n<li>returning the result and</li>\n<li>some way of dealing with negative result (when nothing was found)</li>\n</ol>\n\n<p>Just to prove that my solution works as advertised, I wrote a small test program:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class StackOverflow {\n\n    public static void main( String... args ) {\n        try {\n            final int integer = Stream.of( args )\n                    .peek( s -&gt; System.out.println( \"Looking at \" + s ) )\n                    .map( StackOverflow::resolve )\n                    .filter( Optional::isPresent )\n                    .findFirst()\n                    .flatMap( o -&gt; o )\n                    .orElseThrow( NoSuchElementException::new )\n                    .intValue();\n\n            System.out.println( \"First integer found is \" + integer );\n        }\n        catch ( NoSuchElementException e ) {\n            System.out.println( \"No integers provided!\" );\n        }\n    }\n\n    private static Optional&lt;Integer&gt; resolve( String string ) {\n        try {\n            return Optional.of( Integer.valueOf( string ) );\n        }\n        catch ( NumberFormatException e )\n        {\n            System.out.println( '\"' + string + '\"' + \" is not an integer\");\n            return Optional.empty();\n        }\n    }\n\n}\n</code></pre>\n\n<p>(It does have few extra lines for debugging and verifying that only as many calls to resolve as needed...)</p>\n\n<p>Executing this on a command line, I got the following results:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ java StackOferflow a b 3 c 4\nLooking at a\n\"a\" is not an integer\nLooking at b\n\"b\" is not an integer\nLooking at 3\nFirst integer found is 3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1673587155,"creation_date":1480608530,"answer_id":40915317,"question_id":22725537,"body_markdown":"Null is supported by the Stream provided My library [abacus-common][1]. Here is code:\r\n    \r\n    Stream.of(things).map(e -&gt; resolve(e).orNull()).skipNull().first();\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>Null is supported by the Stream provided My library <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a>. Here is code:</p>\n<pre><code>Stream.of(things).map(e -&gt; resolve(e).orNull()).skipNull().first();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11818014,"reputation":51,"user_id":8647812,"display_name":"Ljubopytnov"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1539693509,"creation_date":1505987667,"answer_id":46340850,"question_id":22725537,"body_markdown":"Late to the party, but what about\r\n\r\n    things.stream()\r\n        .map(this::resolve)\r\n        .filter(Optional::isPresent)\r\n        .findFirst().get();\r\n\r\nYou can get rid of the last get() if you create a util method to convert optional to stream manually:\r\n\r\n    things.stream()\r\n        .map(this::resolve)\r\n        .flatMap(Util::optionalToStream)\r\n        .findFirst();\r\n\r\nIf you return stream right away from your resolve function, you save one more line.","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>Late to the party, but what about</p>\n\n<pre><code>things.stream()\n    .map(this::resolve)\n    .filter(Optional::isPresent)\n    .findFirst().get();\n</code></pre>\n\n<p>You can get rid of the last get() if you create a util method to convert optional to stream manually:</p>\n\n<pre><code>things.stream()\n    .map(this::resolve)\n    .flatMap(Util::optionalToStream)\n    .findFirst();\n</code></pre>\n\n<p>If you return stream right away from your resolve function, you save one more line.</p>\n"},{"tags":[],"owner":{"account_id":1135767,"reputation":1478,"user_id":1120854,"display_name":"charlie"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1540904264,"creation_date":1540903899,"answer_id":53064733,"question_id":22725537,"body_markdown":"I&#39;d like to promote **factory methods** for creating helpers for functional APIs:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    Optional&lt;R&gt; result = things.stream()\r\n            .flatMap(streamopt(this::resolve))\r\n            .findFirst();\r\n\r\nThe factory method:\r\n\r\n    &lt;T, R&gt; Function&lt;T, Stream&lt;R&gt;&gt; streamopt(Function&lt;T, Optional&lt;R&gt;&gt; f) {\r\n        return f.andThen(Optional::stream); // or the J8 alternative:\r\n        // return t -&gt; f.apply(t).map(Stream::of).orElseGet(Stream::empty);\r\n    }\r\n\r\nReasoning:\r\n\r\n - As with method references in general, compared to lambda expressions, you can&#39;t accidentaly capture a variable from the accessible scope, like:\r\n\r\n `t -&gt; streamopt(resolve(o))`\r\n\r\n - It&#39;s composable, you can e.g. call `Function::andThen` on the factory method result:\r\n\r\n `streamopt(this::resolve).andThen(...)`\r\n\r\n  Whereas in the case of a lambda, you&#39;d need to cast it first:\r\n\r\n `((Function&lt;T, Stream&lt;R&gt;&gt;) t -&gt; streamopt(resolve(t))).andThen(...)`\r\n","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>I'd like to promote <strong>factory methods</strong> for creating helpers for functional APIs:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Optional&lt;R&gt; result = things.stream()\n        .flatMap(streamopt(this::resolve))\n        .findFirst();\n</code></pre>\n\n<p>The factory method:</p>\n\n<pre><code>&lt;T, R&gt; Function&lt;T, Stream&lt;R&gt;&gt; streamopt(Function&lt;T, Optional&lt;R&gt;&gt; f) {\n    return f.andThen(Optional::stream); // or the J8 alternative:\n    // return t -&gt; f.apply(t).map(Stream::of).orElseGet(Stream::empty);\n}\n</code></pre>\n\n<p>Reasoning:</p>\n\n<ul>\n<li><p>As with method references in general, compared to lambda expressions, you can't accidentaly capture a variable from the accessible scope, like:</p>\n\n<p><code>t -&gt; streamopt(resolve(o))</code></p></li>\n<li><p>It's composable, you can e.g. call <code>Function::andThen</code> on the factory method result:</p>\n\n<p><code>streamopt(this::resolve).andThen(...)</code></p>\n\n<p>Whereas in the case of a lambda, you'd need to cast it first:</p>\n\n<p><code>((Function&lt;T, Stream&lt;R&gt;&gt;) t -&gt; streamopt(resolve(t))).andThen(...)</code></p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":226741,"reputation":14882,"user_id":487946,"accept_rate":100,"display_name":"Nicolas Payette"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1567010772,"creation_date":1567010772,"answer_id":57696853,"question_id":22725537,"body_markdown":"If you&#39;re stuck with Java 8 but have access to Guava 21.0 or newer, you can use [`Streams.stream`](https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Streams.html#stream-com.google.common.base.Optional-) to convert an optional into a stream.\r\n\r\nThus, given\r\n\r\n    import com.google.common.collect.Streams;\r\n\r\nyou can write\r\n\r\n    Optional&lt;Other&gt; result =\r\n        things.stream()\r\n            .map(this::resolve)\r\n            .flatMap(Streams::stream)\r\n            .findFirst();\r\n","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>If you're stuck with Java 8 but have access to Guava 21.0 or newer, you can use <a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Streams.html#stream-com.google.common.base.Optional-\" rel=\"nofollow noreferrer\"><code>Streams.stream</code></a> to convert an optional into a stream.</p>\n\n<p>Thus, given</p>\n\n<pre><code>import com.google.common.collect.Streams;\n</code></pre>\n\n<p>you can write</p>\n\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n        .map(this::resolve)\n        .flatMap(Streams::stream)\n        .findFirst();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4250230,"reputation":1766,"user_id":3477539,"accept_rate":83,"display_name":"Rostislav V"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570515349,"creation_date":1570515349,"answer_id":58281027,"question_id":22725537,"body_markdown":"What about that?\r\n\r\n    private static List&lt;String&gt; extractString(List&lt;Optional&lt;String&gt;&gt; list) {\r\n        List&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n        list.forEach(element -&gt; element.ifPresent(result::add));\r\n        return result;\r\n    }\r\n\r\nhttps://stackoverflow.com/a/58281000/3477539","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>What about that?</p>\n\n<pre><code>private static List&lt;String&gt; extractString(List&lt;Optional&lt;String&gt;&gt; list) {\n    List&lt;String&gt; result = new ArrayList&lt;&gt;();\n    list.forEach(element -&gt; element.ifPresent(result::add));\n    return result;\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/58281000/3477539\">https://stackoverflow.com/a/58281000/3477539</a></p>\n"}],"owner":{"account_id":937438,"reputation":8861,"user_id":966104,"accept_rate":70,"display_name":"Yona Appletree"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255650,"favorite_count":0,"down_vote_count":0,"up_vote_count":309,"accepted_answer_id":22726869,"answer_count":12,"score":309,"last_activity_date":1681557520,"creation_date":1396053721,"question_id":22725537,"body_markdown":"The new Java 8 stream framework and friends make for some very concise Java code, but I have come across a seemingly-simple situation that is tricky to do concisely.\r\n\r\nConsider a `List&lt;Thing&gt; things` and method `Optional&lt;Other&gt; resolve(Thing thing)`. I want to map the `Thing`s to `Optional&lt;Other&gt;`s and get the first `Other`.\r\n\r\nThe obvious solution would be to use `things.stream().flatMap(this::resolve).findFirst()`, but `flatMap` requires that you return a stream, and `Optional` doesn&#39;t have a `stream()` method (or is it a `Collection` or provide a method to convert it to or view it as a `Collection`).\r\n\r\nThe best I can come up with is this:\r\n\r\n    things.stream()\r\n        .map(this::resolve)\r\n        .filter(Optional::isPresent)\r\n        .map(Optional::get)\r\n        .findFirst();\r\n\r\nBut that seems awfully long-winded for what seems like a very common case. \r\n\r\nAnyone have a better idea?","title":"Using Java 8&#39;s Optional with Stream::flatMap","body":"<p>The new Java 8 stream framework and friends make for some very concise Java code, but I have come across a seemingly-simple situation that is tricky to do concisely.</p>\n<p>Consider a <code>List&lt;Thing&gt; things</code> and method <code>Optional&lt;Other&gt; resolve(Thing thing)</code>. I want to map the <code>Thing</code>s to <code>Optional&lt;Other&gt;</code>s and get the first <code>Other</code>.</p>\n<p>The obvious solution would be to use <code>things.stream().flatMap(this::resolve).findFirst()</code>, but <code>flatMap</code> requires that you return a stream, and <code>Optional</code> doesn't have a <code>stream()</code> method (or is it a <code>Collection</code> or provide a method to convert it to or view it as a <code>Collection</code>).</p>\n<p>The best I can come up with is this:</p>\n<pre><code>things.stream()\n    .map(this::resolve)\n    .filter(Optional::isPresent)\n    .map(Optional::get)\n    .findFirst();\n</code></pre>\n<p>But that seems awfully long-winded for what seems like a very common case.</p>\n<p>Anyone have a better idea?</p>\n"},{"tags":["java","string","performance","character","substring"],"answers":[{"tags":[],"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1257324203,"creation_date":1257324203,"answer_id":1672430,"question_id":1672415,"body_markdown":"Does `newFunction` really need to take a `String`? It would be better if you could make `newFunction` take a `char` and call it like this:\r\n\r\n    newFunction(s.charAt(i));\r\n\r\nThat way, you avoid creating a temporary String object.\r\n\r\nTo answer your question: It&#39;s hard to say which one is more efficient. In both examples, a `String` object has to be created which contains only one character. Which is more efficient depends on how exactly `String.substring(...)` and `Character.toString(...)` are implemented on your particular Java implementation. The only way to find it out is running your program through a profiler and seeing which version uses more CPU and/or more memory. Normally, you shouldn&#39;t worry about micro-optimizations like this - only spend time on this when you&#39;ve discovered that this is the cause of a performance and/or memory problem.\r\n","title":"Java charAt() or substring? Which is faster?","body":"<p>Does <code>newFunction</code> really need to take a <code>String</code>? It would be better if you could make <code>newFunction</code> take a <code>char</code> and call it like this:</p>\n\n<pre><code>newFunction(s.charAt(i));\n</code></pre>\n\n<p>That way, you avoid creating a temporary String object.</p>\n\n<p>To answer your question: It's hard to say which one is more efficient. In both examples, a <code>String</code> object has to be created which contains only one character. Which is more efficient depends on how exactly <code>String.substring(...)</code> and <code>Character.toString(...)</code> are implemented on your particular Java implementation. The only way to find it out is running your program through a profiler and seeing which version uses more CPU and/or more memory. Normally, you shouldn't worry about micro-optimizations like this - only spend time on this when you've discovered that this is the cause of a performance and/or memory problem.</p>\n"},{"tags":[],"owner":{"account_id":8670,"reputation":74291,"user_id":15721,"accept_rate":74,"display_name":"Will"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1518051357,"creation_date":1257324451,"answer_id":1672443,"question_id":1672415,"body_markdown":"The answer is: [it doesn&#39;t matter][1].\r\n\r\nProfile your code. Is this your bottleneck?\r\n\r\n  [1]: http://www.codinghorror.com/blog/archives/000061.html\r\n","title":"Java charAt() or substring? Which is faster?","body":"<p>The answer is: <a href=\"http://www.codinghorror.com/blog/archives/000061.html\" rel=\"nofollow noreferrer\">it doesn't matter</a>.</p>\n\n<p>Profile your code. Is this your bottleneck?</p>\n"},{"tags":[],"owner":{"display_name":"Cadet Pirx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1257324588,"creation_date":1257324588,"answer_id":1672454,"question_id":1672415,"body_markdown":"I would first obtain the underlying char[] from the source String using String.toCharArray() and then proceed to call newFunction.\r\n\r\nBut I do agree with Jesper that it would be best if you could just deal with characters and avoid all the String functions...","title":"Java charAt() or substring? Which is faster?","body":"<p>I would first obtain the underlying char[] from the source String using String.toCharArray() and then proceed to call newFunction.</p>\n\n<p>But I do agree with Jesper that it would be best if you could just deal with characters and avoid all the String functions...</p>\n"},{"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1257325388,"creation_date":1257325388,"answer_id":1672510,"question_id":1672415,"body_markdown":"Of the two snippets you&#39;ve posted, I wouldn&#39;t want to say.  I&#39;d agree with Will that it almost certainly is irrelevant in the overall performance of your code - and if it&#39;s not, you can just make the change and determine for yourself which is fastest for your data with your JVM on your hardware.\r\n\r\nThat said, it&#39;s likely that the second snippet would be better if you converted the String into a char array first, and then performed your iterations over the array.  Doing it this way would perform the String overhead once only (converting to the array) instead of every call.  Additionally, you could then pass the array directly to the String constructor with some indices, which is more efficient than taking a char *out* of an array to pass it individually (which then gets turned into a one character array):\r\n\r\n    String s = &quot;abcdefg&quot;;\r\n    char[] chars = s.toCharArray();\r\n    for(int i = 0; i &lt; chars.length; i++) {\r\n        newFunction(String.valueOf(chars, i, 1));\r\n    }\r\n\r\nBut to reinforce my first point, when you look at what you&#39;re actually avoiding on each call of `String.charAt()` - it&#39;s two bounds checks, a (lazy) boolean OR, and an addition.  This is not going to make any noticeable difference.  Neither is the difference in the String constructors.\r\n\r\nEssentially, both idioms are fine in terms of performance (neither is immediately obviously inefficient) so you should not spend any more time working on them unless a profiler shows that this takes up a large amount of your application&#39;s runtime.  And even then you could almost certainly get more performance gains by restructuring your supporting code in this area (e.g. have `newFunction` take the whole string itself); java.lang.String is pretty well optimised by this point.","title":"Java charAt() or substring? Which is faster?","body":"<p>Of the two snippets you've posted, I wouldn't want to say.  I'd agree with Will that it almost certainly is irrelevant in the overall performance of your code - and if it's not, you can just make the change and determine for yourself which is fastest for your data with your JVM on your hardware.</p>\n\n<p>That said, it's likely that the second snippet would be better if you converted the String into a char array first, and then performed your iterations over the array.  Doing it this way would perform the String overhead once only (converting to the array) instead of every call.  Additionally, you could then pass the array directly to the String constructor with some indices, which is more efficient than taking a char <em>out</em> of an array to pass it individually (which then gets turned into a one character array):</p>\n\n<pre><code>String s = \"abcdefg\";\nchar[] chars = s.toCharArray();\nfor(int i = 0; i &lt; chars.length; i++) {\n    newFunction(String.valueOf(chars, i, 1));\n}\n</code></pre>\n\n<p>But to reinforce my first point, when you look at what you're actually avoiding on each call of <code>String.charAt()</code> - it's two bounds checks, a (lazy) boolean OR, and an addition.  This is not going to make any noticeable difference.  Neither is the difference in the String constructors.</p>\n\n<p>Essentially, both idioms are fine in terms of performance (neither is immediately obviously inefficient) so you should not spend any more time working on them unless a profiler shows that this takes up a large amount of your application's runtime.  And even then you could almost certainly get more performance gains by restructuring your supporting code in this area (e.g. have <code>newFunction</code> take the whole string itself); java.lang.String is pretty well optimised by this point.</p>\n"},{"tags":[],"owner":{"account_id":28208,"reputation":14132,"user_id":75126,"accept_rate":100,"display_name":"mhaller"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1284365978,"creation_date":1257325567,"answer_id":1672524,"question_id":1672415,"body_markdown":"As usual: it doesn&#39;t matter but if you insist on spending time on micro-optimization or if you really like to optimize for your very special use case, try this:\r\n\r\n\timport org.junit.Assert;\r\n\timport org.junit.Test;\r\n\t\r\n\tpublic class StringCharTest {\r\n\t\r\n\t\t// Times:\r\n\t\t// 1. Initialization of &quot;s&quot; outside the loop\r\n\t\t// 2. Init of &quot;s&quot; inside the loop\r\n\t\t// 3. newFunction() actually checks the string length,\r\n\t\t// so the function will not be optimized away by the hotstop compiler\r\n\t\r\n\t\t@Test\r\n\t\t// Fastest: 237ms / 562ms / 2434ms\r\n\t\tpublic void testCacheStrings() throws Exception {\r\n\t\t\t// Cache all possible Char strings\r\n\t\t\tString[] char2string = new String[Character.MAX_VALUE];\r\n\t\t\tfor (char i = Character.MIN_VALUE; i &lt; Character.MAX_VALUE; i++) {\r\n\t\t\t\tchar2string[i] = Character.toString(i);\r\n\t\t\t}\r\n\t\r\n\t\t\tfor (int x = 0; x &lt; 10000000; x++) {\r\n\t\t\t\tchar[] s = &quot;abcdefg&quot;.toCharArray();\r\n\t\t\t\tfor (int i = 0; i &lt; s.length; i++) {\r\n\t\t\t\t\tnewFunction(char2string[s[i]]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t@Test\r\n\t\t// Fast: 1687ms / 1725ms / 3382ms\r\n\t\tpublic void testCharToString() throws Exception {\r\n\t\t\tfor (int x = 0; x &lt; 10000000; x++) {\r\n\t\t\t\tString s = &quot;abcdefg&quot;;\r\n\t\t\t\tfor (int i = 0; i &lt; s.length(); i++) {\r\n\t\t\t\t\t// Fast: Creates new String objects, but does not copy an array\r\n\t\t\t\t\tnewFunction(Character.toString(s.charAt(i)));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t@Test\r\n\t\t// Very fast: 1331 ms/ 1414ms / 3190ms\r\n\t\tpublic void testSubstring() throws Exception {\r\n\t\t\tfor (int x = 0; x &lt; 10000000; x++) {\r\n\t\t\t\tString s = &quot;abcdefg&quot;;\r\n\t\t\t\tfor (int i = 0; i &lt; s.length(); i++) {\r\n\t\t\t\t\t// The fastest! Reuses the internal char array\r\n\t\t\t\t\tnewFunction(s.substring(i, i + 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t@Test\r\n\t\t// Slowest: 2525ms / 2961ms / 4703ms\r\n\t\tpublic void testNewString() throws Exception {\r\n\t\t\tchar[] value = new char[1];\r\n\t\t\tfor (int x = 0; x &lt; 10000000; x++) {\r\n\t\t\t\tchar[] s = &quot;abcdefg&quot;.toCharArray();\r\n\t\t\t\tfor (int i = 0; i &lt; s.length; i++) {\r\n\t\t\t\t\tvalue[0] = s[i];\r\n\t\t\t\t\t// Slow! Copies the array\r\n\t\t\t\t\tnewFunction(new String(value));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tprivate void newFunction(String string) {\r\n\t\t\t// Do something with the one-character string\r\n\t\t\tAssert.assertEquals(1, string.length());\r\n\t\t}\r\n\t\r\n\t}\r\n","title":"Java charAt() or substring? Which is faster?","body":"<p>As usual: it doesn't matter but if you insist on spending time on micro-optimization or if you really like to optimize for your very special use case, try this:</p>\n\n<pre><code>import org.junit.Assert;\nimport org.junit.Test;\n\npublic class StringCharTest {\n\n    // Times:\n    // 1. Initialization of \"s\" outside the loop\n    // 2. Init of \"s\" inside the loop\n    // 3. newFunction() actually checks the string length,\n    // so the function will not be optimized away by the hotstop compiler\n\n    @Test\n    // Fastest: 237ms / 562ms / 2434ms\n    public void testCacheStrings() throws Exception {\n        // Cache all possible Char strings\n        String[] char2string = new String[Character.MAX_VALUE];\n        for (char i = Character.MIN_VALUE; i &lt; Character.MAX_VALUE; i++) {\n            char2string[i] = Character.toString(i);\n        }\n\n        for (int x = 0; x &lt; 10000000; x++) {\n            char[] s = \"abcdefg\".toCharArray();\n            for (int i = 0; i &lt; s.length; i++) {\n                newFunction(char2string[s[i]]);\n            }\n        }\n    }\n\n    @Test\n    // Fast: 1687ms / 1725ms / 3382ms\n    public void testCharToString() throws Exception {\n        for (int x = 0; x &lt; 10000000; x++) {\n            String s = \"abcdefg\";\n            for (int i = 0; i &lt; s.length(); i++) {\n                // Fast: Creates new String objects, but does not copy an array\n                newFunction(Character.toString(s.charAt(i)));\n            }\n        }\n    }\n\n    @Test\n    // Very fast: 1331 ms/ 1414ms / 3190ms\n    public void testSubstring() throws Exception {\n        for (int x = 0; x &lt; 10000000; x++) {\n            String s = \"abcdefg\";\n            for (int i = 0; i &lt; s.length(); i++) {\n                // The fastest! Reuses the internal char array\n                newFunction(s.substring(i, i + 1));\n            }\n        }\n    }\n\n    @Test\n    // Slowest: 2525ms / 2961ms / 4703ms\n    public void testNewString() throws Exception {\n        char[] value = new char[1];\n        for (int x = 0; x &lt; 10000000; x++) {\n            char[] s = \"abcdefg\".toCharArray();\n            for (int i = 0; i &lt; s.length; i++) {\n                value[0] = s[i];\n                // Slow! Copies the array\n                newFunction(new String(value));\n            }\n        }\n    }\n\n    private void newFunction(String string) {\n        // Do something with the one-character string\n        Assert.assertEquals(1, string.length());\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15788396,"reputation":55,"user_id":11392406,"display_name":"DimitrisMel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569266181,"creation_date":1569266181,"answer_id":58068813,"question_id":1672415,"body_markdown":"Leetcode seems to prefer the substring option [here][1].\r\n\r\nThis is how I solved that problem:\r\n\r\n    class Solution {\r\n    public int strStr(String haystack, String needle) {\r\n        if(needle.length() == 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t\r\n\t\tif(haystack.length() == 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\t\r\n\t\tfor(int i=0; i&lt;=haystack.length()-needle.length(); i++) {\r\n\t\t\tint count = 0;\r\n\t\t\tfor(int j=0; j&lt;needle.length(); j++) {\r\n\t\t\t\tif(haystack.charAt(i+j) == needle.charAt(j)) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(count == needle.length()) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n    }\r\n}\r\n\r\nAnd this is the optimal solution they give:\r\n\r\n    class Solution {\r\n    public int strStr(String haystack, String needle) {\r\n        int length;\r\n        int n=needle.length();\r\n        int h=haystack.length();\r\n        if(n==0)\r\n            return 0;\r\n        // if(n==h)\r\n        //     length = h;\r\n        // else\r\n            length = h-n;\r\n        if(h==n &amp;&amp; haystack.charAt(0)!=needle.charAt(0))\r\n                return -1;\r\n        for(int i=0; i&lt;=length; i++){\r\n            if(haystack.substring(i, i+needle.length()).equals(needle))\r\n                return i;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nHonestly, I can&#39;t figure out why it would matter.\r\n\r\n\r\n  [1]: https://leetcode.com/problems/implement-strstr/","title":"Java charAt() or substring? Which is faster?","body":"<p>Leetcode seems to prefer the substring option <a href=\"https://leetcode.com/problems/implement-strstr/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>This is how I solved that problem:</p>\n\n<pre><code>class Solution {\npublic int strStr(String haystack, String needle) {\n    if(needle.length() == 0) {\n        return 0;\n    }\n\n    if(haystack.length() == 0) {\n        return -1;\n    }\n\n    for(int i=0; i&lt;=haystack.length()-needle.length(); i++) {\n        int count = 0;\n        for(int j=0; j&lt;needle.length(); j++) {\n            if(haystack.charAt(i+j) == needle.charAt(j)) {\n                count++;\n            }\n        }\n        if(count == needle.length()) {\n            return i;\n        }\n    }\n    return -1;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>And this is the optimal solution they give:</p>\n\n<pre><code>class Solution {\npublic int strStr(String haystack, String needle) {\n    int length;\n    int n=needle.length();\n    int h=haystack.length();\n    if(n==0)\n        return 0;\n    // if(n==h)\n    //     length = h;\n    // else\n        length = h-n;\n    if(h==n &amp;&amp; haystack.charAt(0)!=needle.charAt(0))\n            return -1;\n    for(int i=0; i&lt;=length; i++){\n        if(haystack.substring(i, i+needle.length()).equals(needle))\n            return i;\n    }\n    return -1;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Honestly, I can't figure out why it would matter.</p>\n"}],"owner":{"account_id":881311,"reputation":135,"user_id":198578,"display_name":"estacado"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37447,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":1672524,"answer_count":6,"score":13,"last_activity_date":1681557054,"creation_date":1257323954,"question_id":1672415,"body_markdown":"I want to go through each character in a String and pass each character of the String as a String to another function. \r\n\r\n    String s = &quot;abcdefg&quot;;\r\n    for(int i = 0; i &lt; s.length(); i++){\r\n        newFunction(s.substring(i, i+1));}\r\n\r\nor\r\n\r\n    String s = &quot;abcdefg&quot;;\r\n    for(int i = 0; i &lt; s.length(); i++){\r\n        newFunction(Character.toString(s.charAt(i)));}\r\n\r\nThe final result needs to be a String.  \r\nSo any idea which will be faster or more efficient?","title":"Java charAt() or substring? Which is faster?","body":"<p>I want to go through each character in a String and pass each character of the String as a String to another function.</p>\n<pre><code>String s = &quot;abcdefg&quot;;\nfor(int i = 0; i &lt; s.length(); i++){\n    newFunction(s.substring(i, i+1));}\n</code></pre>\n<p>or</p>\n<pre><code>String s = &quot;abcdefg&quot;;\nfor(int i = 0; i &lt; s.length(); i++){\n    newFunction(Character.toString(s.charAt(i)));}\n</code></pre>\n<p>The final result needs to be a String.<br />\nSo any idea which will be faster or more efficient?</p>\n"},{"tags":["java","json","api","http","httpresponse"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1681394541,"post_id":76006320,"comment_id":134051915,"body_markdown":"Please read https://stackoverflow.com/editing-help and edit your post, using the preview to make sure it&#39;s readable before posting.","body":"Please read <a href=\"https://stackoverflow.com/editing-help\">stackoverflow.com/editing-help</a> and edit your post, using the preview to make sure it&#39;s readable before posting."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1681394594,"post_id":76006320,"comment_id":134051925,"body_markdown":"(I&#39;d also strongly recommend reducing this to a [mcve] - I&#39;d be very surprised if you really need to include fetching from HTTP *and* parsing JSON *and* writing data to a CSV file for a single error.)","body":"(I&#39;d also strongly recommend reducing this to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - I&#39;d be very surprised if you really need to include fetching from HTTP <i>and</i> parsing JSON <i>and</i> writing data to a CSV file for a single error.)"}],"answers":[{"tags":[],"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1681461969,"creation_date":1681403310,"answer_id":76007783,"question_id":76006320,"body_markdown":"okay let&#39;s make it bit simpler. Once you have the jsonString, you can do something like this - \r\n\r\n``` java\r\nList&lt;String&gt; employeeIds = new ArrayList&lt;&gt;();\r\nJSONObject obj = new JSONObject(jsonString);\r\nif (obj.has(&quot;userdetails&quot;)) {\r\n// get the userDetails array object\r\n JSONArray userDetails = obj.getJSONArray(&quot;userdetails&quot;);\r\n\r\n// loop over\r\n for (int i = 0; i &lt; userDetails.length(); i++) {\r\n    JSONObject object = (JSONObject) userDetails.get(i);\r\n    employeeIds.add(object.getString(&quot;employeeid&quot;))\r\n\r\n  }\r\n\r\n}\r\n```\r\n\r\nLater you can write the employeeIds list in any file you want\r\n\r\n**EDITED**\r\n\r\nhere is the code to write in csv file \r\n```java\r\n\r\npublic static void writeInCsv(List&lt;String&gt; employeeIds, String directoryLocation) {\r\n        String fileName = directoryLocation + &quot;/empoyeeIds.csv&quot; ;\r\n        try (BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(fileName), StandardCharsets.UTF_8))) {\r\n            String header = &quot;Employee Ids&quot;;\r\n            bw.write(header);\r\n            bw.newLine();\r\n            for (String id : employeeIds) {\r\n                bw.write(id);\r\n                bw.newLine();\r\n            }\r\n        } catch (UnsupportedEncodingException e) {\r\n            LOG.error(&quot;Unsupported encoding format&quot;, e);\r\n        } catch (FileNotFoundException e) {\r\n            LOG.error(&quot;Error creating the file &quot;, e);\r\n        } catch (IOException e) {\r\n            LOG.error(&quot;Error creating csv file&quot;, e);\r\n        }\r\n    }\r\n\r\n```","title":"Exception in main java.lang.ClassCastException:class java.lang.String can&#39;t be cast to class","body":"<p>okay let's make it bit simpler. Once you have the jsonString, you can do something like this -</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; employeeIds = new ArrayList&lt;&gt;();\nJSONObject obj = new JSONObject(jsonString);\nif (obj.has(&quot;userdetails&quot;)) {\n// get the userDetails array object\n JSONArray userDetails = obj.getJSONArray(&quot;userdetails&quot;);\n\n// loop over\n for (int i = 0; i &lt; userDetails.length(); i++) {\n    JSONObject object = (JSONObject) userDetails.get(i);\n    employeeIds.add(object.getString(&quot;employeeid&quot;))\n\n  }\n\n}\n</code></pre>\n<p>Later you can write the employeeIds list in any file you want</p>\n<p><strong>EDITED</strong></p>\n<p>here is the code to write in csv file</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic static void writeInCsv(List&lt;String&gt; employeeIds, String directoryLocation) {\n        String fileName = directoryLocation + &quot;/empoyeeIds.csv&quot; ;\n        try (BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(fileName), StandardCharsets.UTF_8))) {\n            String header = &quot;Employee Ids&quot;;\n            bw.write(header);\n            bw.newLine();\n            for (String id : employeeIds) {\n                bw.write(id);\n                bw.newLine();\n            }\n        } catch (UnsupportedEncodingException e) {\n            LOG.error(&quot;Unsupported encoding format&quot;, e);\n        } catch (FileNotFoundException e) {\n            LOG.error(&quot;Error creating the file &quot;, e);\n        } catch (IOException e) {\n            LOG.error(&quot;Error creating csv file&quot;, e);\n        }\n    }\n\n</code></pre>\n"}],"owner":{"account_id":28211049,"reputation":21,"user_id":21563306,"display_name":"Sonika Kushwaha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76007783,"answer_count":1,"score":0,"last_activity_date":1681556884,"creation_date":1681394265,"question_id":76006320,"body_markdown":"I am getting the clasCastException while processing the json data. \r\n\r\nI want to get &quot;employeeid&quot; from a JSON response and want to write later the employee IDs in a new Excel file. However, I am getting the class cast exception - String can not be cast into an Object. \r\n\r\nI have pasted my code below as I am new to this so your help will be really appreciated.\r\n\r\nhere is my JSON Response:\r\n```json\r\n\r\n{\r\n    &quot;msg&quot;: &quot;Successful&quot;,\r\n    &quot;displaycount&quot;: &quot;50&quot;,\r\n    &quot;totalcount&quot;: &quot;1294&quot;,\r\n    &quot;userdetails&quot;: [\r\n        {\r\n            &quot;employeeid&quot;: &quot;132421&quot;,\r\n            &quot;userKey&quot;: 17\r\n        },\r\n        {\r\n            &quot;employeeid&quot;: &quot;112342&quot;,\r\n            &quot;userKey&quot;: 18\r\n        },\r\n        {\r\n            &quot;employeeid&quot;: &quot;112341&quot;,\r\n            &quot;userKey&quot;: 19\r\n        },\r\n        {\r\n            &quot;employeeid&quot;: &quot;112343&quot;,\r\n            &quot;userKey&quot;: 20\r\n        },\r\n        {\r\n            &quot;employeeid&quot;: &quot;99954&quot;,\r\n            &quot;userKey&quot;: 21\r\n        },\r\n    ],\r\n    &quot;errorCode&quot;: &quot;0&quot;\r\n}\r\n\r\n```\r\nCode:\r\n\r\n```java \r\npackage api.src;\r\n\r\nimport java.io.FileOutputStream;\r\nimport java.io.FileReader;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\nimport java.io.PrintWriter;\r\nimport java.net.URI;\r\nimport java.net.URISyntaxException;\r\nimport java.net.http.HttpClient;\r\nimport java.net.http.HttpRequest;\r\nimport java.net.http.HttpResponse;\r\nimport com.opencsv.CSVWriter;\r\nimport java.io.*;\r\n\r\nimport org.json.simple.JSONArray;\r\nimport org.json.simple.JSONObject;\r\nimport org.json.simple.parser.JSONParser;\r\nimport org.json.simple.parser.ParseException;\r\n\r\npublic class callAPI {\r\n\r\n\t static String[] finalResult;\r\n\t public static void main(String[] args) throws URISyntaxException, IOException, InterruptedException, ParseException {\r\n\r\n\t\tHttpRequest request = HttpRequest.newBuilder()\r\n\t\t\t.uri(URI.create(&quot;*****&quot;))\r\n\t\t\t.header(&quot;X-RapidAPI-Host&quot;, &quot;***********&quot;)\r\n\t\t\t.header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n\t\t\t.header(&quot;Authorization&quot;,**********)\r\n\t\t\t.method(&quot;POST&quot;, HttpRequest.BodyPublishers.noBody())\r\n\t\t\t.build();\r\n\r\n\tSystem.out.println(&quot;Connected &quot;+request);\r\n\r\n\ttry {\r\n\t\tString path = &quot;D:/Sonika/JARs/httpresponse.json&quot;;\r\n\r\n\t\tHttpResponse&lt;String&gt; response = null;\r\n\t\tresponse = HttpClient.newHttpClient().send(request, \r\n        HttpResponse.BodyHandlers.ofString());\r\n\t\tint statusCode = response.statusCode();\r\n\t\tSystem.out.println(statusCode);\r\n\r\n\t\tSystem.out.println(response.body());\r\n\t\ttry (PrintWriter out = new PrintWriter(new FileWriter(path))) {\r\n\t\t\tout.write(response.body().toString());\r\n\t\t}\r\n\r\n        JSONParser parse = new JSONParser();\r\n\t\tJSONObject jobj = (JSONObject) parse.parse(new FileReader(path));\r\n\t\tJSONArray jsonarr_1 = (JSONArray) jobj.get(&quot;userdetails&quot;);\r\n\r\n\t\t//Get data for userdetails array\r\n\t\tfor (Object element : jsonarr_1) {\r\n\t\t//Store the JSON objects in an array\r\n\t\t//Get the index of the JSON object and print the values as per the index\r\n\t\tJSONObject jsonobj_1 = (JSONObject)element;\r\n\t\tfinalResult =  (String[]) jsonobj_1.get(&quot;employeeid&quot;);\r\n\t\tSystem.out.println(&quot;\\nEmployee ID: &quot;+finalResult);\r\n\r\n\t\t}\t\r\n\t}\r\n\t\r\n\tcatch(IOException e) {\r\n\t    // handle not expected exception\r\n\t    e.printStackTrace();\r\n\t}\r\n\t}\r\n\tpublic void writingCSVFile(){\r\n\t\ttry {\r\n\t\t\tCSVWriter  file = new CSVWriter(new FileWriter(new File(&quot;D:/Sonika/JARs/OutputExcelfile.xlsx&quot;)));\r\n\t\t\tString[] colName = { &quot;Employee ID&quot;};\r\n\t\t\tfile.writeNext(colName);\r\n\t\t\tfile.writeNext(finalResult);\r\n\t\t\tfile.close();\r\n\t\t} \r\n\t\tcatch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\n\r\n","title":"Exception in main java.lang.ClassCastException:class java.lang.String can&#39;t be cast to class","body":"<p>I am getting the clasCastException while processing the json data.</p>\n<p>I want to get &quot;employeeid&quot; from a JSON response and want to write later the employee IDs in a new Excel file. However, I am getting the class cast exception - String can not be cast into an Object.</p>\n<p>I have pasted my code below as I am new to this so your help will be really appreciated.</p>\n<p>here is my JSON Response:</p>\n<pre class=\"lang-json prettyprint-override\"><code>\n{\n    &quot;msg&quot;: &quot;Successful&quot;,\n    &quot;displaycount&quot;: &quot;50&quot;,\n    &quot;totalcount&quot;: &quot;1294&quot;,\n    &quot;userdetails&quot;: [\n        {\n            &quot;employeeid&quot;: &quot;132421&quot;,\n            &quot;userKey&quot;: 17\n        },\n        {\n            &quot;employeeid&quot;: &quot;112342&quot;,\n            &quot;userKey&quot;: 18\n        },\n        {\n            &quot;employeeid&quot;: &quot;112341&quot;,\n            &quot;userKey&quot;: 19\n        },\n        {\n            &quot;employeeid&quot;: &quot;112343&quot;,\n            &quot;userKey&quot;: 20\n        },\n        {\n            &quot;employeeid&quot;: &quot;99954&quot;,\n            &quot;userKey&quot;: 21\n        },\n    ],\n    &quot;errorCode&quot;: &quot;0&quot;\n}\n\n</code></pre>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package api.src;\n\nimport java.io.FileOutputStream;\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.net.URI;\nimport java.net.URISyntaxException;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport com.opencsv.CSVWriter;\nimport java.io.*;\n\nimport org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.json.simple.parser.JSONParser;\nimport org.json.simple.parser.ParseException;\n\npublic class callAPI {\n\n     static String[] finalResult;\n     public static void main(String[] args) throws URISyntaxException, IOException, InterruptedException, ParseException {\n\n        HttpRequest request = HttpRequest.newBuilder()\n            .uri(URI.create(&quot;*****&quot;))\n            .header(&quot;X-RapidAPI-Host&quot;, &quot;***********&quot;)\n            .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n            .header(&quot;Authorization&quot;,**********)\n            .method(&quot;POST&quot;, HttpRequest.BodyPublishers.noBody())\n            .build();\n\n    System.out.println(&quot;Connected &quot;+request);\n\n    try {\n        String path = &quot;D:/Sonika/JARs/httpresponse.json&quot;;\n\n        HttpResponse&lt;String&gt; response = null;\n        response = HttpClient.newHttpClient().send(request, \n        HttpResponse.BodyHandlers.ofString());\n        int statusCode = response.statusCode();\n        System.out.println(statusCode);\n\n        System.out.println(response.body());\n        try (PrintWriter out = new PrintWriter(new FileWriter(path))) {\n            out.write(response.body().toString());\n        }\n\n        JSONParser parse = new JSONParser();\n        JSONObject jobj = (JSONObject) parse.parse(new FileReader(path));\n        JSONArray jsonarr_1 = (JSONArray) jobj.get(&quot;userdetails&quot;);\n\n        //Get data for userdetails array\n        for (Object element : jsonarr_1) {\n        //Store the JSON objects in an array\n        //Get the index of the JSON object and print the values as per the index\n        JSONObject jsonobj_1 = (JSONObject)element;\n        finalResult =  (String[]) jsonobj_1.get(&quot;employeeid&quot;);\n        System.out.println(&quot;\\nEmployee ID: &quot;+finalResult);\n\n        }   \n    }\n    \n    catch(IOException e) {\n        // handle not expected exception\n        e.printStackTrace();\n    }\n    }\n    public void writingCSVFile(){\n        try {\n            CSVWriter  file = new CSVWriter(new FileWriter(new File(&quot;D:/Sonika/JARs/OutputExcelfile.xlsx&quot;)));\n            String[] colName = { &quot;Employee ID&quot;};\n            file.writeNext(colName);\n            file.writeNext(finalResult);\n            file.close();\n        } \n        catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n    \n}\n\n</code></pre>\n"},{"tags":["java","collections","entitymanager"],"comments":[{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1680266054,"post_id":75898542,"comment_id":133873333,"body_markdown":"You should define entity classes for the user and email, and use a standard HQL approach.","body":"You should define entity classes for the user and email, and use a standard HQL approach."}],"answers":[{"tags":[],"owner":{"account_id":14549481,"reputation":1,"user_id":10508824,"display_name":"Anck8"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681488490,"creation_date":1681488490,"answer_id":76017023,"question_id":75898542,"body_markdown":"I got a solution thanks to [this][1] post from awhile back!\r\n\r\nSo, simply put... a Tuple structure can work really well or such queries, and the return object is really easy to manage.\r\n\r\nThen its just a matter of filtering out the values and the key they&#39;re associated with, adding the values to the Map their key is in it already, and adding the key to the list if its not.\r\n\r\nThe code:\r\n\r\n\r\n       List&lt;Tuple&gt; result = query.getResultList();\r\n       Map&lt;Integer, List&lt;String&gt;&gt; finalObject = new HashMap&lt;&gt;();\r\n       List&lt;String&gt; emailsValue;\r\n       BigInteger codeKey;\r\n    \r\n       for (Tuple t : result) {\r\n           if (t.get(&quot;id&quot;, BigInteger.class) != null) {\r\n               codeKey = t.get(&quot;id&quot;, BigInteger.class);\r\n               if (finalObject.containsKey(codeKey.intValue())) {\r\n                   emailsValue = finalObject.get(codeKey.intValue());\r\n                   emailsValue.add(t.get(&quot;email&quot;, String.class));\r\n           } else {\r\n               emailsValue = new ArrayList&lt;&gt;();\r\n               emailsValue.add(t.get(&quot;email&quot;, String.class));\r\n               finalObject.put(codeKey.intValue(), emailsValue);\r\n           }\r\n       }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/29717234/java-adding-another-string-value-to-existing-hashmap-key-without-overwriting\r\n","title":"Populating Map values with multiple parameters from nativeQuery","body":"<p>I got a solution thanks to <a href=\"https://stackoverflow.com/questions/29717234/java-adding-another-string-value-to-existing-hashmap-key-without-overwriting\">this</a> post from awhile back!</p>\n<p>So, simply put... a Tuple structure can work really well or such queries, and the return object is really easy to manage.</p>\n<p>Then its just a matter of filtering out the values and the key they're associated with, adding the values to the Map their key is in it already, and adding the key to the list if its not.</p>\n<p>The code:</p>\n<pre><code>   List&lt;Tuple&gt; result = query.getResultList();\n   Map&lt;Integer, List&lt;String&gt;&gt; finalObject = new HashMap&lt;&gt;();\n   List&lt;String&gt; emailsValue;\n   BigInteger codeKey;\n\n   for (Tuple t : result) {\n       if (t.get(&quot;id&quot;, BigInteger.class) != null) {\n           codeKey = t.get(&quot;id&quot;, BigInteger.class);\n           if (finalObject.containsKey(codeKey.intValue())) {\n               emailsValue = finalObject.get(codeKey.intValue());\n               emailsValue.add(t.get(&quot;email&quot;, String.class));\n       } else {\n           emailsValue = new ArrayList&lt;&gt;();\n           emailsValue.add(t.get(&quot;email&quot;, String.class));\n           finalObject.put(codeKey.intValue(), emailsValue);\n       }\n   }\n</code></pre>\n"}],"owner":{"account_id":14549481,"reputation":1,"user_id":10508824,"display_name":"Anck8"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681556786,"creation_date":1680265787,"question_id":75898542,"body_markdown":"Out of curiosity, I was wondering if it would be possible to populate a ` Map&lt;Integer, ArrayList&lt;String&gt;&gt; ` with my query&#39;s result...\r\n\r\nI have the following query:\r\n\r\n``` sql\r\n SELECT DISTINCT code, email FROM user;\r\n```\r\n\r\nThat results on multiple email records for the same code, as such:\r\n\r\n```\r\n| CODE     | EMAIL                     |\r\n| -------- | --------                  |\r\n| 1        | person@email.com          |\r\n| 1        | otherPerson@email.com     |\r\n| 2        | someOtherPerson@email.com |\r\n```\r\n\r\nAnd the method (that should return something):\r\n\r\n\r\n``` java\r\n    @Override\r\n    public Map&lt;Integer, ArrayList&lt;String&gt;&gt; returnCodeEmail() {\r\n        StringBuilder sql = &quot;SELECT DISTINCT code, email FROM user&quot;;\r\n        return new HashMap();\r\n    }\r\n```\r\n\r\n\r\nI tried:\r\n\r\n``` java\r\n return (Map&lt;Integer, ArrayList&lt;String&gt;&gt;) entityManager\r\n       .createNativeQuery(sql.toString())\r\n       .getResultList()\r\n       .stream()\r\n       .collect(Collectors.toMap(\r\n             t -&gt; ((Tuple) t).get(0), \r\n             t -&gt; ((Tuple) t).get(1)\r\n        ));\r\n```\r\n\r\nBut it doesn&#39;t seem to be able to populate the list as intended...\r\n\r\nHow can I make sure my map has a Key that is the ` code ` and a value list of ` emails` as in the table?\r\n\r\nThanks in advance :)","title":"Populating Map values with multiple parameters from nativeQuery","body":"<p>Out of curiosity, I was wondering if it would be possible to populate a <code>Map&lt;Integer, ArrayList&lt;String&gt;&gt;</code> with my query's result...</p>\n<p>I have the following query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code> SELECT DISTINCT code, email FROM user;\n</code></pre>\n<p>That results on multiple email records for the same code, as such:</p>\n<pre><code>| CODE     | EMAIL                     |\n| -------- | --------                  |\n| 1        | person@email.com          |\n| 1        | otherPerson@email.com     |\n| 2        | someOtherPerson@email.com |\n</code></pre>\n<p>And the method (that should return something):</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    public Map&lt;Integer, ArrayList&lt;String&gt;&gt; returnCodeEmail() {\n        StringBuilder sql = &quot;SELECT DISTINCT code, email FROM user&quot;;\n        return new HashMap();\n    }\n</code></pre>\n<p>I tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code> return (Map&lt;Integer, ArrayList&lt;String&gt;&gt;) entityManager\n       .createNativeQuery(sql.toString())\n       .getResultList()\n       .stream()\n       .collect(Collectors.toMap(\n             t -&gt; ((Tuple) t).get(0), \n             t -&gt; ((Tuple) t).get(1)\n        ));\n</code></pre>\n<p>But it doesn't seem to be able to populate the list as intended...</p>\n<p>How can I make sure my map has a Key that is the <code>code</code> and a value list of <code> emails</code> as in the table?</p>\n<p>Thanks in advance :)</p>\n"},{"tags":["java","linux","eclipse","gradle"],"answers":[{"tags":[],"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455746228,"creation_date":1455746228,"answer_id":35468600,"question_id":35468200,"body_markdown":"Remember:  **packages are folders.**\r\n\r\nIf you have your project broken out into components in that fashion, and you have different packages for each of them, then there at least *should* be a valid reason for that.\r\n\r\nWhile there may be a valid argument to be made on refactoring your components (which I can neither approve of or disapprove of since I don&#39;t know how these components should interact with one another), you should not look to flatten the folder structure simply because one or two developers do not wish to use tools to help them navigate it simpler.\r\n\r\nThe simplest thing to do at this point is to standardize everyone&#39;s development environment.  IDEs may not be to everyone&#39;s liking, but they specifically help mitigate against pain points like this.","title":"Is there a workaround for long folder paths in Eclipse Java projects?","body":"<p>Remember:  <strong>packages are folders.</strong></p>\n\n<p>If you have your project broken out into components in that fashion, and you have different packages for each of them, then there at least <em>should</em> be a valid reason for that.</p>\n\n<p>While there may be a valid argument to be made on refactoring your components (which I can neither approve of or disapprove of since I don't know how these components should interact with one another), you should not look to flatten the folder structure simply because one or two developers do not wish to use tools to help them navigate it simpler.</p>\n\n<p>The simplest thing to do at this point is to standardize everyone's development environment.  IDEs may not be to everyone's liking, but they specifically help mitigate against pain points like this.</p>\n"},{"tags":[],"owner":{"account_id":559428,"reputation":3077,"user_id":921739,"accept_rate":92,"display_name":"Logical Fallacy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1455839085,"creation_date":1455839085,"answer_id":35494735,"question_id":35468200,"body_markdown":"I&#39;ve confirmed that Eclipse only supports source paths that match the package names; alternatives have been [requested](https://bugs.eclipse.org/bugs/show_bug.cgi?id=16209) and marked as &quot;Won&#39;t Fix.&quot;\r\n\r\nI think I&#39;ve [found a suitable workaround](https://sampsonlchen.wordpress.com/2012/09/18/three-shortcuts-to-quickly-change-directories-in-linux/) for Linux developers wishing to do their work from the command line. In your `~/.bashrc` file, add something like this:\r\n\r\n&lt;pre&gt;\r\n\r\n    # Project shortcuts\r\n    export repo=&quot;/path/to/repository/&quot;\r\n    alias repo_root=&quot;cd $repo&quot;\r\n    alias repo_core=&quot;cd $repo/core/src/main/java/com/company/product/component/&quot;\r\n    alias repo_sub1=&quot;cd $repo/sub1/src/main/java/com/company/product/component/subcomponent1&quot;\r\n    alias repo_sub2=&quot;cd $repo/sub2/src/main/java/com/company/product/component/subcomponent2&quot;\r\n\r\n&lt;/pre&gt;\r\n\r\nOnce you have the paths set, start a new terminal instance, and run it like this:\r\n\r\n&lt;pre&gt;\r\n\r\n    bash-4.1$ repo_root\r\n    bash-4.1$ pwd\r\n    /path/to/repository\r\n    bash-4.1$ repo_sub1\r\n    bash-4.1$ pwd\r\n    /path/to/repository/sub1/src/main/java/com/company/product/component/subcomponent1\r\n\r\n&lt;/pre&gt;\r\n\r\nAlternatively, you could use `export` for each of them instead of aliases. Whatever cans your peaches. The point is that you can quickly traverse those paths much faster and do so from anywhere.","title":"Is there a workaround for long folder paths in Eclipse Java projects?","body":"<p>I've confirmed that Eclipse only supports source paths that match the package names; alternatives have been <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=16209\" rel=\"nofollow\">requested</a> and marked as \"Won't Fix.\"</p>\n\n<p>I think I've <a href=\"https://sampsonlchen.wordpress.com/2012/09/18/three-shortcuts-to-quickly-change-directories-in-linux/\" rel=\"nofollow\">found a suitable workaround</a> for Linux developers wishing to do their work from the command line. In your <code>~/.bashrc</code> file, add something like this:</p>\n\n<pre>\n\n    # Project shortcuts\n    export repo=\"/path/to/repository/\"\n    alias repo_root=\"cd $repo\"\n    alias repo_core=\"cd $repo/core/src/main/java/com/company/product/component/\"\n    alias repo_sub1=\"cd $repo/sub1/src/main/java/com/company/product/component/subcomponent1\"\n    alias repo_sub2=\"cd $repo/sub2/src/main/java/com/company/product/component/subcomponent2\"\n\n</pre>\n\n<p>Once you have the paths set, start a new terminal instance, and run it like this:</p>\n\n<pre>\n\n    bash-4.1$ repo_root\n    bash-4.1$ pwd\n    /path/to/repository\n    bash-4.1$ repo_sub1\n    bash-4.1$ pwd\n    /path/to/repository/sub1/src/main/java/com/company/product/component/subcomponent1\n\n</pre>\n\n<p>Alternatively, you could use <code>export</code> for each of them instead of aliases. Whatever cans your peaches. The point is that you can quickly traverse those paths much faster and do so from anywhere.</p>\n"},{"tags":[],"owner":{"account_id":16918448,"reputation":1,"user_id":12235830,"display_name":"Junaid Rahman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681556605,"creation_date":1681188721,"answer_id":75982496,"question_id":35468200,"body_markdown":"not the perfect answer but it might help. In Eclipse, create a &quot;keyboard shortcut&quot; (Preferences -&gt; General -&gt; Keys) for New (Folder) (e.g. Ctrl + Shift + f) . and it opens new folder dialog instantly. \r\n\r\nIn Eclipse, create a &quot;keyboard shortcut&quot; (Preferences -&gt; General -&gt; Keys) for New (Folder):\r\n[![Eclipse][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ztrsU.png","title":"Is there a workaround for long folder paths in Eclipse Java projects?","body":"<p>not the perfect answer but it might help. In Eclipse, create a &quot;keyboard shortcut&quot; (Preferences -&gt; General -&gt; Keys) for New (Folder) (e.g. Ctrl + Shift + f) . and it opens new folder dialog instantly.</p>\n<p>In Eclipse, create a &quot;keyboard shortcut&quot; (Preferences -&gt; General -&gt; Keys) for New (Folder):\n<a href=\"https://i.stack.imgur.com/ztrsU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ztrsU.png\" alt=\"Eclipse\" /></a></p>\n"}],"owner":{"account_id":559428,"reputation":3077,"user_id":921739,"accept_rate":92,"display_name":"Logical Fallacy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":35494735,"answer_count":3,"score":0,"last_activity_date":1681556605,"creation_date":1455744752,"question_id":35468200,"body_markdown":"I have an multi-project Gradle build based on Java code. It&#39;s organized into several projects in order to preserve third party dependencies while still allowing for shared code. (There are main() functions in each subcomponent.) Here&#39;s my project folder structure on disk, which I believe follows all the Gradle and Java best-practices:\r\n\r\n&lt;pre&gt;\r\n\r\n    +---repository_for_component\r\n        +---component\r\n        |   +---src\r\n        |       +---main\r\n        |           +---java\r\n        |                +---com\r\n        |                    +---company\r\n        |                        +---product\r\n        |                            +---component\r\n        |                                +---SharedSource.java\r\n        +---subcomponent1\r\n        |   +---src\r\n        |       +---main\r\n        |           +---java\r\n        |                +---com\r\n        |                    +---company\r\n        |                        +---product\r\n        |                            +---component\r\n        |                                +---subcomponent1\r\n        |                                    +---Source1.java\r\n        +---subcomponent2\r\n        |   +---src\r\n        |       +---main\r\n        |           +---java\r\n        |                +---com\r\n        |                    +---company\r\n        |                        +---product\r\n        |                            +---component\r\n        |                                +---subcomponent2\r\n        |                                    +---Source2.java\r\n        +---build.gradle\r\n        +---settings.gradle\r\n        ...\r\n\r\n&lt;/pre&gt;\r\n\r\nOne of our devs prefers not to use an IDE (terminal only), and this is understandably a huge pain for him to navigate. It&#39;s painful for me too when I have to do anything from the command line or use a file browser.\r\n\r\nBecause this repository is only for the &quot;component&quot; in question, much of the paths are redundant. In particular, this eliminates 4 redundant folders:\r\n\r\n&lt;pre&gt;\r\n\r\n    +---repository_for_component\r\n        +---subcomponent1\r\n        |   +---src\r\n        |       +---main\r\n        |           +---java\r\n        |               +---com.company.product.component.subcomponent1\r\n        |                   +---SharedSource.java\r\n    ...\r\n\r\n&lt;/pre&gt;\r\n\r\nIt&#39;s still a marginal improvement, but it&#39;s something. I&#39;d press my luck farther, but while Gradle builds this project just fine, Eclipse gives the error:\r\n\r\n&gt; The declared package &quot;com.company.product.component.subcomponent&quot; does not match the expected package &quot;&quot;\r\n\r\nAre there any workarounds I can use within Eclipse? Or other suggestions for ways to make this less painful for everyone?","title":"Is there a workaround for long folder paths in Eclipse Java projects?","body":"<p>I have an multi-project Gradle build based on Java code. It's organized into several projects in order to preserve third party dependencies while still allowing for shared code. (There are main() functions in each subcomponent.) Here's my project folder structure on disk, which I believe follows all the Gradle and Java best-practices:</p>\n\n<pre>\n\n    +---repository_for_component\n        +---component\n        |   +---src\n        |       +---main\n        |           +---java\n        |                +---com\n        |                    +---company\n        |                        +---product\n        |                            +---component\n        |                                +---SharedSource.java\n        +---subcomponent1\n        |   +---src\n        |       +---main\n        |           +---java\n        |                +---com\n        |                    +---company\n        |                        +---product\n        |                            +---component\n        |                                +---subcomponent1\n        |                                    +---Source1.java\n        +---subcomponent2\n        |   +---src\n        |       +---main\n        |           +---java\n        |                +---com\n        |                    +---company\n        |                        +---product\n        |                            +---component\n        |                                +---subcomponent2\n        |                                    +---Source2.java\n        +---build.gradle\n        +---settings.gradle\n        ...\n\n</pre>\n\n<p>One of our devs prefers not to use an IDE (terminal only), and this is understandably a huge pain for him to navigate. It's painful for me too when I have to do anything from the command line or use a file browser.</p>\n\n<p>Because this repository is only for the \"component\" in question, much of the paths are redundant. In particular, this eliminates 4 redundant folders:</p>\n\n<pre>\n\n    +---repository_for_component\n        +---subcomponent1\n        |   +---src\n        |       +---main\n        |           +---java\n        |               +---com.company.product.component.subcomponent1\n        |                   +---SharedSource.java\n    ...\n\n</pre>\n\n<p>It's still a marginal improvement, but it's something. I'd press my luck farther, but while Gradle builds this project just fine, Eclipse gives the error:</p>\n\n<blockquote>\n  <p>The declared package \"com.company.product.component.subcomponent\" does not match the expected package \"\"</p>\n</blockquote>\n\n<p>Are there any workarounds I can use within Eclipse? Or other suggestions for ways to make this less painful for everyone?</p>\n"},{"tags":["java","rabbitmq","quarkus","health-check","smallrye-reactive-messaging"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1681666652,"post_id":75745888,"comment_id":134089783,"body_markdown":"if invoyceTypeRequestEmitter is not throwing any exception it means it is working, what error do you get ? or can you explain your problem more clearly ?","body":"if invoyceTypeRequestEmitter is not throwing any exception it means it is working, what error do you get ? or can you explain your problem more clearly ?"}],"owner":{"account_id":17193035,"reputation":1,"user_id":12446463,"display_name":"Lucas Pl&#225;cido"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681556493,"creation_date":1678889425,"question_id":75745888,"body_markdown":"I&#39;m using smallrye healthcheck to check the liveness and readiness of the rabbitmq container.\r\n\r\n```\r\nhttp://localhost:8080/q/health/live\r\n\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n  &lt;artifactId&gt;quarkus-smallrye-health&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\nThe health check does not identify that the container has stopped or when it only identifies after 2 hours. I tried to do a custom health check but it doesn&#39;t pop an error when using the emitter for the specified channel.\r\n\r\n```\r\npackage com.globalcards.adapter.driver.config;\r\n\r\nimport org.eclipse.microprofile.health.HealthCheck;\r\nimport org.eclipse.microprofile.health.HealthCheckResponse;\r\nimport org.eclipse.microprofile.health.Liveness;\r\nimport org.eclipse.microprofile.reactive.messaging.Channel;\r\nimport org.eclipse.microprofile.reactive.messaging.Emitter;\r\nimport org.eclipse.microprofile.reactive.messaging.Message;\r\nimport org.eclipse.microprofile.reactive.messaging.Outgoing;\r\n\r\nimport javax.enterprise.context.ApplicationScoped;\r\n\r\n\r\n@ApplicationScoped\r\n@Liveness\r\npublic class CustomHealthLivenessRabbitMq implements HealthCheck {\r\n     @Channel(&quot;sends&quot;)\r\n     Emitter&lt;String&gt; invoyceTypeRequestEmitter;\r\n    \r\n     @Override\r\n      public HealthCheckResponse call() {\r\n         try {\r\n             invoyceTypeRequestEmitter.send(&quot;healthcheck&quot;);\r\n             return HealthCheckResponse.builder().up().name(&quot;RabbitMQ container is ready &quot;).build();\r\n         } catch (Exception exception) {\r\n               return HealthCheckResponse.builder().down().name(&quot;RabbitMQ container is not readyds&quot;).build();\r\n         }\r\n     }\r\n    \r\n     @Outgoing(&quot;sends&quot;)\r\n     public String outgoing() {\r\n         return &quot;healthcheck&quot;;\r\n     }\r\n}\r\n\r\n```\r\n\r\nCan anyone help me or have you been through this?","title":"How can I make smallrye message health check work for rabbitmq?","body":"<p>I'm using smallrye healthcheck to check the liveness and readiness of the rabbitmq container.</p>\n<pre><code>http://localhost:8080/q/health/live\n\n&lt;dependency&gt;\n  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n  &lt;artifactId&gt;quarkus-smallrye-health&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p>The health check does not identify that the container has stopped or when it only identifies after 2 hours. I tried to do a custom health check but it doesn't pop an error when using the emitter for the specified channel.</p>\n<pre><code>package com.globalcards.adapter.driver.config;\n\nimport org.eclipse.microprofile.health.HealthCheck;\nimport org.eclipse.microprofile.health.HealthCheckResponse;\nimport org.eclipse.microprofile.health.Liveness;\nimport org.eclipse.microprofile.reactive.messaging.Channel;\nimport org.eclipse.microprofile.reactive.messaging.Emitter;\nimport org.eclipse.microprofile.reactive.messaging.Message;\nimport org.eclipse.microprofile.reactive.messaging.Outgoing;\n\nimport javax.enterprise.context.ApplicationScoped;\n\n\n@ApplicationScoped\n@Liveness\npublic class CustomHealthLivenessRabbitMq implements HealthCheck {\n     @Channel(&quot;sends&quot;)\n     Emitter&lt;String&gt; invoyceTypeRequestEmitter;\n    \n     @Override\n      public HealthCheckResponse call() {\n         try {\n             invoyceTypeRequestEmitter.send(&quot;healthcheck&quot;);\n             return HealthCheckResponse.builder().up().name(&quot;RabbitMQ container is ready &quot;).build();\n         } catch (Exception exception) {\n               return HealthCheckResponse.builder().down().name(&quot;RabbitMQ container is not readyds&quot;).build();\n         }\n     }\n    \n     @Outgoing(&quot;sends&quot;)\n     public String outgoing() {\n         return &quot;healthcheck&quot;;\n     }\n}\n\n</code></pre>\n<p>Can anyone help me or have you been through this?</p>\n"},{"tags":["java","intellij-idea","scenebuilder"],"answers":[{"tags":[],"owner":{"account_id":28244335,"reputation":1,"user_id":21591637,"display_name":"Evonix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681556376,"creation_date":1680915374,"answer_id":75962800,"question_id":75961595,"body_markdown":"After lots of troubleshooting, I believe I have figured out the answer to my own question. This is the solution in case there are others who struggle with this.\r\n\r\nYou must set both the padding and the label padding to 0 of the button. Then you must adjust the size of the image in the button after you have made these changes. This is what worked for me.\r\n\r\n\r\n![settings of the button][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4IVYz.png","title":"Scenebuilder: ImageView inside Button is adding extra unwanted width to the button","body":"<p>After lots of troubleshooting, I believe I have figured out the answer to my own question. This is the solution in case there are others who struggle with this.</p>\n<p>You must set both the padding and the label padding to 0 of the button. Then you must adjust the size of the image in the button after you have made these changes. This is what worked for me.</p>\n<p><img src=\"https://i.stack.imgur.com/4IVYz.png\" alt=\"settings of the button\" /></p>\n"}],"owner":{"account_id":28244335,"reputation":1,"user_id":21591637,"display_name":"Evonix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681556376,"creation_date":1680897736,"question_id":75961595,"body_markdown":"Hope you all have been having a nice day. During the development of a chess game in IntelliJ and Scenebuilder, I encountered an issue where an ImageView in a button is causing th button to be stretched out. I am unable to change the width of the button whether it be by dragging the edges or changing the values in the Layout menu.\r\n\r\n(https://i.stack.imgur.com/1EIUn.png)[Button with image]\r\n(https://i.stack.imgur.com/XSoDl.png)[Button dimensions]\r\n\r\n\r\n\r\nI have tried dragging the corners of the button to change the width, but nothing happened. I have tried editing the dimensions in the Layout menu but it did nothing. I have expermented by changing the width using code, but I was unable to find a successful method. ","title":"Scenebuilder: ImageView inside Button is adding extra unwanted width to the button","body":"<p>Hope you all have been having a nice day. During the development of a chess game in IntelliJ and Scenebuilder, I encountered an issue where an ImageView in a button is causing th button to be stretched out. I am unable to change the width of the button whether it be by dragging the edges or changing the values in the Layout menu.</p>\n<p>(<a href=\"https://i.stack.imgur.com/1EIUn.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/1EIUn.png</a>)[Button with image]\n(<a href=\"https://i.stack.imgur.com/XSoDl.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/XSoDl.png</a>)[Button dimensions]</p>\n<p>I have tried dragging the corners of the button to change the width, but nothing happened. I have tried editing the dimensions in the Layout menu but it did nothing. I have expermented by changing the width using code, but I was unable to find a successful method.</p>\n"},{"tags":["java","multithreading","concurrency","java.util.concurrent","concurrenthashmap"],"comments":[{"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1681220300,"post_id":75986151,"comment_id":134018742,"body_markdown":"I confirm that the code as posted exhibits the observed behavior.  `Map&lt;K,V&gt;` has a naive default implementation of `computeIfAbsent()` which could cause this behavior, but it is irrelevant, because `ConcurrentHashMap` provides its own implementation. According to the documentation of `ConcurrentHashMap`, (or at any rate according to my interpretation of that documentation,) the OP should be receiving what he expects, and not what he observes. The implementation of `ConcurrentHashMap.computeIfAbsent()` is waaaay too complex for me to tell whether it is working as intended.","body":"I confirm that the code as posted exhibits the observed behavior.  <code>Map&lt;K,V&gt;</code> has a naive default implementation of <code>computeIfAbsent()</code> which could cause this behavior, but it is irrelevant, because <code>ConcurrentHashMap</code> provides its own implementation. According to the documentation of <code>ConcurrentHashMap</code>, (or at any rate according to my interpretation of that documentation,) the OP should be receiving what he expects, and not what he observes. The implementation of <code>ConcurrentHashMap.computeIfAbsent()</code> is waaaay too complex for me to tell whether it is working as intended."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1681228611,"post_id":75986151,"comment_id":134021227,"body_markdown":"If anyone is interested at taking a look, [here&#39;s the source code for OpenJDK](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1691).","body":"If anyone is interested at taking a look, <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1691\" rel=\"nofollow noreferrer\">here&#39;s the source code for OpenJDK</a>."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681555331,"creation_date":1681218753,"answer_id":75986298,"question_id":75986151,"body_markdown":"Your assumption is wrong, as many different threads could be executing the same mapping function concurrently for different keys.\r\n\r\n`ConcurrentHashMap` is thread-safe but permits concurrent updates to the map. Some callers which are accessing similar parts of the underlying mapping tables may block while waiting for another thread to finish. \r\n\r\nYou won&#39;t find that `computeIfAbsent(someKey,mapFunc)` runs the mapping function for the same key twice, because it is an atomic operation for that key. So second or concurrent caller would see the value of the first call. However another `computeIfAbsent(anotherKey,mapFunc)` could be running at exactly the same time which is why your mapping function may evaluate `size()` to be same value for multiple keys.\r\n\r\nThe javadoc states:\r\n\r\n&gt; The supplied function is invoked exactly once per invocation of this method if the key is absent, else not at all.\r\n\r\n&gt; Some attempted update operations on this map by other threads may be blocked while computation is in progress, so the computation should be short and simple.\r\n\r\nIf you wish to have unique values you could use `AtomicInteger` counter.\r\n\r\n","title":"ComputeIfAbsent wrong map size","body":"<p>Your assumption is wrong, as many different threads could be executing the same mapping function concurrently for different keys.</p>\n<p><code>ConcurrentHashMap</code> is thread-safe but permits concurrent updates to the map. Some callers which are accessing similar parts of the underlying mapping tables may block while waiting for another thread to finish.</p>\n<p>You won't find that <code>computeIfAbsent(someKey,mapFunc)</code> runs the mapping function for the same key twice, because it is an atomic operation for that key. So second or concurrent caller would see the value of the first call. However another <code>computeIfAbsent(anotherKey,mapFunc)</code> could be running at exactly the same time which is why your mapping function may evaluate <code>size()</code> to be same value for multiple keys.</p>\n<p>The javadoc states:</p>\n<blockquote>\n<p>The supplied function is invoked exactly once per invocation of this method if the key is absent, else not at all.</p>\n</blockquote>\n<blockquote>\n<p>Some attempted update operations on this map by other threads may be blocked while computation is in progress, so the computation should be short and simple.</p>\n</blockquote>\n<p>If you wish to have unique values you could use <code>AtomicInteger</code> counter.</p>\n"},{"tags":[],"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681221926,"creation_date":1681221926,"answer_id":75986826,"question_id":75986151,"body_markdown":"Something to note with ConcurrentHashMap is how the size of the map is calculated:\r\n\r\n    public int size() {\r\n        long n = sumCount();\r\n        return ((n &lt; 0L) ? 0 :\r\n                (n &gt; (long)Integer.MAX_VALUE) ? Integer.MAX_VALUE :\r\n                (int)n);\r\n    }\r\n\r\n    final long sumCount() {\r\n        CounterCell[] cs = counterCells;\r\n        long sum = baseCount;\r\n        if (cs != null) {\r\n            for (CounterCell c : cs)\r\n                if (c != null)\r\n                    sum += c.value;\r\n        }\r\n        return sum;\r\n    }\r\n\r\nThese &quot;counter cells&quot; are updated upon a call to `addCount` internally. [At the end](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1775) of the `#computeIfAbsent` method we have:\r\n\r\n    if (val != null)\r\n        addCount(1L, binCount);\r\n    return val;\r\n\r\nHowever, before this code is reached, the lambda expression you are passing will have already been evaluated earlier on in the method. For instance, when we are first adding values, they will synchronize on a `ReservationNode`:\r\n\r\n    Node&lt;K,V&gt; r = new ReservationNode&lt;K,V&gt;();\r\n    synchronized (r) {\r\n        if (casTabAt(tab, i, null, r)) { //compare-and-swap\r\n            binCount = 1;\r\n            Node&lt;K,V&gt; node = null;\r\n            try {\r\n                if ((val = mappingFunction.apply(key)) != null) //runs the mapping function\r\n                    node = new Node&lt;K,V&gt;(h, key, val);\r\n                } finally {\r\n                    setTabAt(tab, i, node);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nsrc: [ConcurrentHashMap#computeIfAbsent](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1701-L1717)\r\n\r\nThe above code is quite suspect to me, and leaves me thinking that nothing would be truly blocked/synchronized on the creation phase here. Later on in the method (once the table entry exists), you&#39;ll see it doing `synchronized(f)` (the hash bucket) in order to compute/put the new values, which then causes the sequential insertion you see above.\r\n\r\nSo, those concurrent updates at the start (when we are first initializing the map) are not only capable of running in parallel, but even with proper synchronization in place could potentially retrieve a `0` for the Map&#39;s size before the end of the `#computeIfAbsent` call.","title":"ComputeIfAbsent wrong map size","body":"<p>Something to note with ConcurrentHashMap is how the size of the map is calculated:</p>\n<pre><code>public int size() {\n    long n = sumCount();\n    return ((n &lt; 0L) ? 0 :\n            (n &gt; (long)Integer.MAX_VALUE) ? Integer.MAX_VALUE :\n            (int)n);\n}\n\nfinal long sumCount() {\n    CounterCell[] cs = counterCells;\n    long sum = baseCount;\n    if (cs != null) {\n        for (CounterCell c : cs)\n            if (c != null)\n                sum += c.value;\n    }\n    return sum;\n}\n</code></pre>\n<p>These &quot;counter cells&quot; are updated upon a call to <code>addCount</code> internally. <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1775\" rel=\"nofollow noreferrer\">At the end</a> of the <code>#computeIfAbsent</code> method we have:</p>\n<pre><code>if (val != null)\n    addCount(1L, binCount);\nreturn val;\n</code></pre>\n<p>However, before this code is reached, the lambda expression you are passing will have already been evaluated earlier on in the method. For instance, when we are first adding values, they will synchronize on a <code>ReservationNode</code>:</p>\n<pre><code>Node&lt;K,V&gt; r = new ReservationNode&lt;K,V&gt;();\nsynchronized (r) {\n    if (casTabAt(tab, i, null, r)) { //compare-and-swap\n        binCount = 1;\n        Node&lt;K,V&gt; node = null;\n        try {\n            if ((val = mappingFunction.apply(key)) != null) //runs the mapping function\n                node = new Node&lt;K,V&gt;(h, key, val);\n            } finally {\n                setTabAt(tab, i, node);\n            }\n        }\n    }\n}\n</code></pre>\n<p>src: <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1701-L1717\" rel=\"nofollow noreferrer\">ConcurrentHashMap#computeIfAbsent</a></p>\n<p>The above code is quite suspect to me, and leaves me thinking that nothing would be truly blocked/synchronized on the creation phase here. Later on in the method (once the table entry exists), you'll see it doing <code>synchronized(f)</code> (the hash bucket) in order to compute/put the new values, which then causes the sequential insertion you see above.</p>\n<p>So, those concurrent updates at the start (when we are first initializing the map) are not only capable of running in parallel, but even with proper synchronization in place could potentially retrieve a <code>0</code> for the Map's size before the end of the <code>#computeIfAbsent</code> call.</p>\n"}],"owner":{"account_id":18610249,"reputation":21,"user_id":13562867,"display_name":"Ahmad Darwich"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1681555331,"creation_date":1681217739,"question_id":75986151,"body_markdown":"I have tried below code in order to have a unique id for each jj.\r\n\r\nAs far as I know, computeIfAbsent is thread-safe but:\r\n\r\n\r\n```\r\n    public static void main(String[] args) throws InterruptedException {\r\n        ExecutorService executorService =\r\n                Executors.newFixedThreadPool(4);\r\n\r\n        final Map&lt;String, ConcurrentHashMap&lt;String, Short&gt;&gt; threadSafeMap = new ConcurrentHashMap&lt;&gt;();\r\n        threadSafeMap.put(&quot;0&quot;, new ConcurrentHashMap&lt;&gt;());\r\n        threadSafeMap.put(&quot;1&quot;, new ConcurrentHashMap&lt;&gt;());\r\n\r\n        for (int i = 1; i &lt;= 10; i++) {\r\n            final int jj = i;\r\n            executorService.submit(() -&gt; {\r\n                int                                key              = jj % 2;\r\n                final ConcurrentMap&lt;String, Short&gt; idByName = threadSafeMap.get(String.valueOf(key));\r\n                return idByName.computeIfAbsent(String.valueOf(jj), x -&gt; (short) idByName.size());\r\n            });\r\n        }\r\n        executorService.shutdown();\r\n        executorService.awaitTermination(5, TimeUnit.SECONDS);\r\n        System.out.println(threadSafeMap);\r\n    }\r\n```\r\n\r\n\r\n\r\nActual value:\r\n{0={2=0, 4=0, 6=2, 8=3, 10=4}, 1={1=0, 3=0, 5=2, 7=3, 9=4}}\r\n\r\nExpected value for example (due to concurrency):\r\n{0={2=0, 4=1, 6=2, 8=3, 10=4}, 1={1=1, 3=0, 5=2, 7=3, 9=4}}\r\n\r\nThe problem is that I have with 2=0 and 4=0, which is wrong values should be unique!\r\n\r\nbtw using interger instead of short solve the issue!\r\nCould you please help?","title":"ComputeIfAbsent wrong map size","body":"<p>I have tried below code in order to have a unique id for each jj.</p>\n<p>As far as I know, computeIfAbsent is thread-safe but:</p>\n<pre><code>    public static void main(String[] args) throws InterruptedException {\n        ExecutorService executorService =\n                Executors.newFixedThreadPool(4);\n\n        final Map&lt;String, ConcurrentHashMap&lt;String, Short&gt;&gt; threadSafeMap = new ConcurrentHashMap&lt;&gt;();\n        threadSafeMap.put(&quot;0&quot;, new ConcurrentHashMap&lt;&gt;());\n        threadSafeMap.put(&quot;1&quot;, new ConcurrentHashMap&lt;&gt;());\n\n        for (int i = 1; i &lt;= 10; i++) {\n            final int jj = i;\n            executorService.submit(() -&gt; {\n                int                                key              = jj % 2;\n                final ConcurrentMap&lt;String, Short&gt; idByName = threadSafeMap.get(String.valueOf(key));\n                return idByName.computeIfAbsent(String.valueOf(jj), x -&gt; (short) idByName.size());\n            });\n        }\n        executorService.shutdown();\n        executorService.awaitTermination(5, TimeUnit.SECONDS);\n        System.out.println(threadSafeMap);\n    }\n</code></pre>\n<p>Actual value:\n{0={2=0, 4=0, 6=2, 8=3, 10=4}, 1={1=0, 3=0, 5=2, 7=3, 9=4}}</p>\n<p>Expected value for example (due to concurrency):\n{0={2=0, 4=1, 6=2, 8=3, 10=4}, 1={1=1, 3=0, 5=2, 7=3, 9=4}}</p>\n<p>The problem is that I have with 2=0 and 4=0, which is wrong values should be unique!</p>\n<p>btw using interger instead of short solve the issue!\nCould you please help?</p>\n"},{"tags":["java","unit-testing","asynchronous","junit"],"comments":[{"owner":{"account_id":1189183,"reputation":367,"user_id":1162452,"display_name":"cs0lar"},"score":0,"creation_date":1358608826,"post_id":631598,"comment_id":20756757,"body_markdown":"You could try JAT (Java Asynchronous Test): https://bitbucket.org/csolar/jat","body":"You could try JAT (Java Asynchronous Test): <a href=\"https://bitbucket.org/csolar/jat\" rel=\"nofollow noreferrer\">bitbucket.org/csolar/jat</a>"},{"owner":{"account_id":176459,"reputation":18762,"user_id":407170,"accept_rate":88,"display_name":"Les Hazlewood"},"score":2,"creation_date":1409775283,"post_id":631598,"comment_id":40085017,"body_markdown":"JAT has 1 watcher and hasn&#39;t been updated in 1.5 years.  Awaitility was  updated just 1 month ago and is on version 1.6 at the time of this writing.  I&#39;m not affiliated with either project, but if I was going to invest in an addition to my project, I&#39;d give more credence to Awaitility at this time.","body":"JAT has 1 watcher and hasn&#39;t been updated in 1.5 years.  Awaitility was  updated just 1 month ago and is on version 1.6 at the time of this writing.  I&#39;m not affiliated with either project, but if I was going to invest in an addition to my project, I&#39;d give more credence to Awaitility at this time."},{"owner":{"account_id":85409,"reputation":89783,"user_id":238134,"accept_rate":73,"display_name":"deamon"},"score":0,"creation_date":1508228752,"post_id":631598,"comment_id":80517607,"body_markdown":"JAT has still no updates: &quot;Last updated 2013-01-19&quot;. Just save the time to follow the link.","body":"JAT has still no updates: &quot;Last updated 2013-01-19&quot;. Just save the time to follow the link."},{"owner":{"account_id":1933692,"reputation":260,"user_id":1742529,"display_name":"user1742529"},"score":1,"creation_date":1565080596,"post_id":631598,"comment_id":101229009,"body_markdown":"@LesHazlewood, one watcher is bad for JAT, but about no updates for years... Just one example. How often do you update low-level TCP stack of your OS, if it just works? Alternative to JAT is answered below https://stackoverflow.com/questions/631598/how-to-use-junit-to-test-asynchronous-processes/3303638#3303638 .","body":"@LesHazlewood, one watcher is bad for JAT, but about no updates for years... Just one example. How often do you update low-level TCP stack of your OS, if it just works? Alternative to JAT is answered below <a href=\"https://stackoverflow.com/questions/631598/how-to-use-junit-to-test-asynchronous-processes/3303638#3303638\" title=\"how to use junit to test asynchronous processes\">stackoverflow.com/questions/631598/&hellip;</a> ."}],"answers":[{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":2,"up_vote_count":27,"is_accepted":false,"score":25,"last_activity_date":1236708769,"creation_date":1236708769,"answer_id":631606,"question_id":631598,"body_markdown":"Start the process off and wait for the result using a [`Future`][1].\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/concurrent/Future.html","title":"How to use JUnit to test asynchronous processes","body":"<p>Start the process off and wait for the result using a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/concurrent/Future.html\" rel=\"noreferrer\"><code>Future</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":2239,"reputation":7171,"user_id":3087,"display_name":"Cem Catikkas"},"down_vote_count":50,"up_vote_count":101,"is_accepted":true,"score":51,"last_activity_date":1236711210,"creation_date":1236711210,"answer_id":631754,"question_id":631598,"body_markdown":"IMHO it&#39;s bad practice to have unit tests create or wait on threads, etc. You&#39;d like these tests to run in split seconds. That&#39;s why I&#39;d like to propose a 2-step approach to testing async processes.\r\n\r\n 1. Test that your async process is submitted properly. You can mock the object that accepts your async requests and make sure that the submitted job has correct properties, etc.\r\n 2. Test that your async callbacks are doing the right things. Here you can mock out the originally submitted job and assume it&#39;s initialized properly and verify that your callbacks are correct.","title":"How to use JUnit to test asynchronous processes","body":"<p>IMHO it's bad practice to have unit tests create or wait on threads, etc. You'd like these tests to run in split seconds. That's why I'd like to propose a 2-step approach to testing async processes.</p>\n\n<ol>\n<li>Test that your async process is submitted properly. You can mock the object that accepts your async requests and make sure that the submitted job has correct properties, etc.</li>\n<li>Test that your async callbacks are doing the right things. Here you can mock out the originally submitted job and assume it's initialized properly and verify that your callbacks are correct.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":63320,"reputation":7119,"user_id":187492,"accept_rate":86,"display_name":"Martin"},"down_vote_count":0,"up_vote_count":230,"is_accepted":false,"score":230,"last_activity_date":1653540300,"creation_date":1259713892,"answer_id":1829949,"question_id":631598,"body_markdown":"**TL;DR;** Unfortunately, there is no built-in solution **yet** (at time of writting, 2022), hence you are free to use and/or implement whatever fits your situation.\r\n\r\n## Example\r\n\r\nAn alternative is to use the [CountDownLatch][1] class. \r\n\r\n    public class DatabaseTest {\r\n    \r\n        /**\r\n         * Data limit\r\n         */\r\n        private static final int DATA_LIMIT = 5;\r\n    \r\n        /**\r\n         * Countdown latch\r\n         */\r\n        private CountDownLatch lock = new CountDownLatch(1);\r\n    \r\n        /**\r\n         * Received data\r\n         */\r\n        private List&lt;Data&gt; receiveddata;\r\n    \r\n        @Test\r\n        public void testDataRetrieval() throws Exception {\r\n            Database db = new MockDatabaseImpl();\r\n            db.getData(DATA_LIMIT, new DataCallback() {\r\n                @Override\r\n                public void onSuccess(List&lt;Data&gt; data) {\r\n                    receiveddata = data;\r\n                    lock.countDown();\r\n                }\r\n            });\r\n    \r\n            lock.await(2000, TimeUnit.MILLISECONDS);\r\n    \r\n            assertNotNull(receiveddata);\r\n            assertEquals(DATA_LIMIT, receiveddata.size());\r\n        }\r\n    }\r\n\r\n**NOTE** you can&#39;t just used **syncronized** with a regular object as a lock, as fast callbacks can release the lock before the lock&#39;s wait method is called. See [this][2] blog post by Joe Walnes.\r\n\r\n**EDIT** Removed syncronized blocks around CountDownLatch thanks to comments from @jtahlborn and @Ring\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html\r\n  [2]: http://joe.truemesh.com/blog/000279.html","title":"How to use JUnit to test asynchronous processes","body":"<p><strong>TL;DR;</strong> Unfortunately, there is no built-in solution <strong>yet</strong> (at time of writting, 2022), hence you are free to use and/or implement whatever fits your situation.</p>\n<h2>Example</h2>\n<p>An alternative is to use the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"noreferrer\">CountDownLatch</a> class.</p>\n<pre><code>public class DatabaseTest {\n\n    /**\n     * Data limit\n     */\n    private static final int DATA_LIMIT = 5;\n\n    /**\n     * Countdown latch\n     */\n    private CountDownLatch lock = new CountDownLatch(1);\n\n    /**\n     * Received data\n     */\n    private List&lt;Data&gt; receiveddata;\n\n    @Test\n    public void testDataRetrieval() throws Exception {\n        Database db = new MockDatabaseImpl();\n        db.getData(DATA_LIMIT, new DataCallback() {\n            @Override\n            public void onSuccess(List&lt;Data&gt; data) {\n                receiveddata = data;\n                lock.countDown();\n            }\n        });\n\n        lock.await(2000, TimeUnit.MILLISECONDS);\n\n        assertNotNull(receiveddata);\n        assertEquals(DATA_LIMIT, receiveddata.size());\n    }\n}\n</code></pre>\n<p><strong>NOTE</strong> you can't just used <strong>syncronized</strong> with a regular object as a lock, as fast callbacks can release the lock before the lock's wait method is called. See <a href=\"http://joe.truemesh.com/blog/000279.html\" rel=\"noreferrer\">this</a> blog post by Joe Walnes.</p>\n<p><strong>EDIT</strong> Removed syncronized blocks around CountDownLatch thanks to comments from @jtahlborn and @Ring</p>\n"},{"tags":[],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"down_vote_count":1,"up_vote_count":96,"is_accepted":false,"score":95,"last_activity_date":1553175216,"creation_date":1279744852,"answer_id":3303638,"question_id":631598,"body_markdown":"You can try using the [Awaitility](https://github.com/awaitility/awaitility) library. It makes it easy to test the systems you&#39;re talking about.","title":"How to use JUnit to test asynchronous processes","body":"<p>You can try using the <a href=\"https://github.com/awaitility/awaitility\" rel=\"noreferrer\">Awaitility</a> library. It makes it easy to test the systems you're talking about.</p>\n"},{"tags":[],"owner":{"account_id":84769,"reputation":18303,"user_id":236743,"accept_rate":69,"display_name":"Dori"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1363263295,"creation_date":1352898765,"answer_id":13379486,"question_id":631598,"body_markdown":"How about calling `SomeObject.wait` and `notifyAll` as described [here][1] OR using **Robotiums** `Solo.waitForCondition(...)` method OR use a [class i wrote][2] to do this (see comments and test class for how to use)\r\n\r\n\r\n  [1]: http://my.safaribooksonline.com/book/programming/java/0596003870/junit/jextprockbk-chp-4-sect-15\r\n  [2]: https://github.com/doridori/AndroidUtilDump/blob/master/android/AndroidUtilDump/src/couk/doridori/android/lib/testing/FutureAsyncTester.java","title":"How to use JUnit to test asynchronous processes","body":"<p>How about calling <code>SomeObject.wait</code> and <code>notifyAll</code> as described <a href=\"http://my.safaribooksonline.com/book/programming/java/0596003870/junit/jextprockbk-chp-4-sect-15\" rel=\"nofollow\">here</a> OR using <strong>Robotiums</strong> <code>Solo.waitForCondition(...)</code> method OR use a <a href=\"https://github.com/doridori/AndroidUtilDump/blob/master/android/AndroidUtilDump/src/couk/doridori/android/lib/testing/FutureAsyncTester.java\" rel=\"nofollow\">class i wrote</a> to do this (see comments and test class for how to use)</p>\n"},{"tags":[],"owner":{"account_id":44022,"reputation":6396,"user_id":128948,"accept_rate":76,"display_name":"Matthew"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1389641517,"creation_date":1389640921,"answer_id":21099588,"question_id":631598,"body_markdown":"One method I&#39;ve found pretty useful for testing asynchronous methods is injecting an `Executor` instance in the object-to-test&#39;s constructor. In production, the executor instance is configured to run asynchronously while in test it can be mocked to run synchronously.\r\n\r\nSo suppose I&#39;m trying to test the asynchronous method `Foo#doAsync(Callback c)`, \r\n\r\n    class Foo {\r\n      private final Executor executor;\r\n      public Foo(Executor executor) {\r\n        this.executor = executor;\r\n      }\r\n\r\n      public void doAsync(Callback c) {\r\n        executor.execute(new Runnable() {\r\n          @Override public void run() {\r\n            // Do stuff here\r\n            c.onComplete(data);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\nIn production, I would construct `Foo` with an `Executors.newSingleThreadExecutor()` Executor instance  while in test I would probably construct it with a synchronous executor that does the following --\r\n\r\n    class SynchronousExecutor implements Executor {\r\n      @Override public void execute(Runnable r) {\r\n        r.run();\r\n      }\r\n    }\r\n\r\nNow my JUnit test of the asynchronous method is pretty clean --\r\n    \r\n    @Test public void testDoAsync() {\r\n      Executor executor = new SynchronousExecutor();\r\n      Foo objectToTest = new Foo(executor);\r\n\r\n      Callback callback = mock(Callback.class);\r\n      objectToTest.doAsync(callback);\r\n\r\n      // Verify that Callback#onComplete was called using Mockito.\r\n      verify(callback).onComplete(any(Data.class));\r\n\r\n      // Assert that we got back the data that we expected.\r\n      assertEquals(expectedData, callback.getData());\r\n    }","title":"How to use JUnit to test asynchronous processes","body":"<p>One method I've found pretty useful for testing asynchronous methods is injecting an <code>Executor</code> instance in the object-to-test's constructor. In production, the executor instance is configured to run asynchronously while in test it can be mocked to run synchronously.</p>\n\n<p>So suppose I'm trying to test the asynchronous method <code>Foo#doAsync(Callback c)</code>, </p>\n\n<pre><code>class Foo {\n  private final Executor executor;\n  public Foo(Executor executor) {\n    this.executor = executor;\n  }\n\n  public void doAsync(Callback c) {\n    executor.execute(new Runnable() {\n      @Override public void run() {\n        // Do stuff here\n        c.onComplete(data);\n      }\n    });\n  }\n}\n</code></pre>\n\n<p>In production, I would construct <code>Foo</code> with an <code>Executors.newSingleThreadExecutor()</code> Executor instance  while in test I would probably construct it with a synchronous executor that does the following --</p>\n\n<pre><code>class SynchronousExecutor implements Executor {\n  @Override public void execute(Runnable r) {\n    r.run();\n  }\n}\n</code></pre>\n\n<p>Now my JUnit test of the asynchronous method is pretty clean --</p>\n\n<pre><code>@Test public void testDoAsync() {\n  Executor executor = new SynchronousExecutor();\n  Foo objectToTest = new Foo(executor);\n\n  Callback callback = mock(Callback.class);\n  objectToTest.doAsync(callback);\n\n  // Verify that Callback#onComplete was called using Mockito.\n  verify(callback).onComplete(any(Data.class));\n\n  // Assert that we got back the data that we expected.\n  assertEquals(expectedData, callback.getData());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":168070,"reputation":1771,"user_id":393274,"display_name":"Matt Sgarlata"},"down_vote_count":0,"up_vote_count":90,"is_accepted":false,"score":90,"last_activity_date":1651906216,"creation_date":1400768066,"answer_id":23809378,"question_id":631598,"body_markdown":"If you use a [CompletableFuture][1] (introduced in Java 8) or a [SettableFuture][2] (from [Google Guava][3]), you can make your test finish as soon as it&#39;s done, rather than waiting a pre-set amount of time.  Your test would look something like this:\r\n\r\n    CompletableFuture&lt;String&gt; future = new CompletableFuture&lt;&gt;();\r\n    executorService.submit(new Runnable() {\t\t\t\r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tfuture.complete(&quot;Hello World!&quot;);\t\t\t\t\r\n    \t}\r\n    });\r\n    assertEquals(&quot;Hello World!&quot;, future.get());\r\n\r\n&gt;**Note** that there is a library which Provides `CompletableFuture` for pre Java-8, which even uses the same names (and provides all related Java-8 classes), like:\r\n&gt;```\r\n&gt;net.sourceforge.streamsupport:streamsupport-minifuture:1.7.4\r\n&gt;```\r\n&gt;This is useful for Android development, where even if we build with JDK-v11, we want to keep codes compatible with pre Android-7 devices.\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\r\n  [2]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/util/concurrent/SettableFuture.html\r\n[3]: https://code.google.com/p/guava-libraries/","title":"How to use JUnit to test asynchronous processes","body":"<p>If you use a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"noreferrer\">CompletableFuture</a> (introduced in Java 8) or a <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/util/concurrent/SettableFuture.html\" rel=\"noreferrer\">SettableFuture</a> (from <a href=\"https://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Google Guava</a>), you can make your test finish as soon as it's done, rather than waiting a pre-set amount of time.  Your test would look something like this:</p>\n<pre><code>CompletableFuture&lt;String&gt; future = new CompletableFuture&lt;&gt;();\nexecutorService.submit(new Runnable() {         \n    @Override\n    public void run() {\n        future.complete(&quot;Hello World!&quot;);                \n    }\n});\nassertEquals(&quot;Hello World!&quot;, future.get());\n</code></pre>\n<blockquote>\n<p><strong>Note</strong> that there is a library which Provides <code>CompletableFuture</code> for pre Java-8, which even uses the same names (and provides all related Java-8 classes), like:</p>\n<pre><code>net.sourceforge.streamsupport:streamsupport-minifuture:1.7.4\n</code></pre>\n<p>This is useful for Android development, where even if we build with JDK-v11, we want to keep codes compatible with pre Android-7 devices.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2445948,"reputation":2966,"user_id":2133335,"accept_rate":82,"display_name":"Paulo"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1476025166,"creation_date":1448989859,"answer_id":34026037,"question_id":631598,"body_markdown":"I prefer use wait and notify. It is simple and clear.\r\n\r\n    @Test\r\n    public void test() throws Throwable {\r\n        final boolean[] asyncExecuted = {false};\r\n        final Throwable[] asyncThrowable= {null};\r\n\r\n        // do anything async\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    // Put your test here.\r\n                    fail(); \r\n                }\r\n                // lets inform the test thread that there is an error.\r\n                catch (Throwable throwable){\r\n                    asyncThrowable[0] = throwable;\r\n                }\r\n                // ensure to release asyncExecuted in case of error.\r\n                finally {\r\n                    synchronized (asyncExecuted){\r\n                        asyncExecuted[0] = true;\r\n                        asyncExecuted.notify();\r\n                    }\r\n                }\r\n            }\r\n        }).start();\r\n\r\n        // Waiting for the test is complete\r\n        synchronized (asyncExecuted){\r\n            while(!asyncExecuted[0]){\r\n                asyncExecuted.wait();\r\n            }\r\n        }\r\n\r\n        // get any async error, including exceptions and assertationErrors\r\n        if(asyncThrowable[0] != null){\r\n            throw asyncThrowable[0];\r\n        }\r\n    }\r\n\r\nBasically, we need to create a final Array reference, to be used inside of anonymous inner class. I would rather create a boolean[], because I can put a value to control if we need to wait(). When everything is done, we just release the asyncExecuted.","title":"How to use JUnit to test asynchronous processes","body":"<p>I prefer use wait and notify. It is simple and clear.</p>\n\n<pre><code>@Test\npublic void test() throws Throwable {\n    final boolean[] asyncExecuted = {false};\n    final Throwable[] asyncThrowable= {null};\n\n    // do anything async\n    new Thread(new Runnable() {\n        @Override\n        public void run() {\n            try {\n                // Put your test here.\n                fail(); \n            }\n            // lets inform the test thread that there is an error.\n            catch (Throwable throwable){\n                asyncThrowable[0] = throwable;\n            }\n            // ensure to release asyncExecuted in case of error.\n            finally {\n                synchronized (asyncExecuted){\n                    asyncExecuted[0] = true;\n                    asyncExecuted.notify();\n                }\n            }\n        }\n    }).start();\n\n    // Waiting for the test is complete\n    synchronized (asyncExecuted){\n        while(!asyncExecuted[0]){\n            asyncExecuted.wait();\n        }\n    }\n\n    // get any async error, including exceptions and assertationErrors\n    if(asyncThrowable[0] != null){\n        throw asyncThrowable[0];\n    }\n}\n</code></pre>\n\n<p>Basically, we need to create a final Array reference, to be used inside of anonymous inner class. I would rather create a boolean[], because I can put a value to control if we need to wait(). When everything is done, we just release the asyncExecuted.</p>\n"},{"tags":[],"owner":{"account_id":2069826,"reputation":646,"user_id":1844551,"display_name":"Nils Rommelfanger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1472458709,"creation_date":1472458709,"answer_id":39201557,"question_id":631598,"body_markdown":"If you want to test the logic just don&#180;t test it asynchronously.\r\n\r\nFor example to test this code which works on results of an asynchronous method.\r\n\r\n    public class Example {\r\n        private Dependency dependency;\r\n        \r\n        public Example(Dependency dependency) {\r\n            this.dependency = dependency;            \r\n        }\r\n        \r\n        public CompletableFuture&lt;String&gt; someAsyncMethod(){\r\n            return dependency.asyncMethod()\r\n                    .handle((r,ex) -&gt; {\r\n                        if(ex != null) {\r\n                            return &quot;got exception&quot;;\r\n                        } else {\r\n                            return r.toString();\r\n                        }\r\n                    });\r\n        }\r\n    }\r\n\r\n    public class Dependency {\r\n        public CompletableFuture&lt;Integer&gt; asyncMethod() {\r\n            // do some async stuff       \r\n        }\r\n    }\r\n\r\nIn the test mock the dependency with synchronous implementation. The unit test is completely synchronous and runs in 150ms.\r\n\r\n    public class DependencyTest {\r\n        private Example sut;\r\n        private Dependency dependency;\r\n        \r\n        public void setup() {\r\n            dependency = Mockito.mock(Dependency.class);;\r\n            sut = new Example(dependency);\r\n        }\r\n        \r\n        @Test public void success() throws InterruptedException, ExecutionException {\r\n            when(dependency.asyncMethod()).thenReturn(CompletableFuture.completedFuture(5));\r\n            \r\n            // When\r\n            CompletableFuture&lt;String&gt; result = sut.someAsyncMethod();\r\n            \r\n            // Then\r\n            assertThat(result.isCompletedExceptionally(), is(equalTo(false)));\r\n            String value = result.get();\r\n            assertThat(value, is(equalTo(&quot;5&quot;)));\r\n        }\r\n    \r\n        @Test public void failed() throws InterruptedException, ExecutionException {\r\n            // Given\r\n            CompletableFuture&lt;Integer&gt; c = new CompletableFuture&lt;Integer&gt;();\r\n            c.completeExceptionally(new RuntimeException(&quot;failed&quot;));\r\n            when(dependency.asyncMethod()).thenReturn(c);\r\n            \r\n            // When\r\n            CompletableFuture&lt;String&gt; result = sut.someAsyncMethod();\r\n            \r\n            // Then\r\n            assertThat(result.isCompletedExceptionally(), is(equalTo(false)));\r\n            String value = result.get();\r\n            assertThat(value, is(equalTo(&quot;got exception&quot;)));\r\n        }\r\n    }\r\n\r\nYou don&#180;t test the async behaviour but you can test if the logic is correct.","title":"How to use JUnit to test asynchronous processes","body":"<p>If you want to test the logic just don´t test it asynchronously.</p>\n\n<p>For example to test this code which works on results of an asynchronous method.</p>\n\n<pre><code>public class Example {\n    private Dependency dependency;\n\n    public Example(Dependency dependency) {\n        this.dependency = dependency;            \n    }\n\n    public CompletableFuture&lt;String&gt; someAsyncMethod(){\n        return dependency.asyncMethod()\n                .handle((r,ex) -&gt; {\n                    if(ex != null) {\n                        return \"got exception\";\n                    } else {\n                        return r.toString();\n                    }\n                });\n    }\n}\n\npublic class Dependency {\n    public CompletableFuture&lt;Integer&gt; asyncMethod() {\n        // do some async stuff       \n    }\n}\n</code></pre>\n\n<p>In the test mock the dependency with synchronous implementation. The unit test is completely synchronous and runs in 150ms.</p>\n\n<pre><code>public class DependencyTest {\n    private Example sut;\n    private Dependency dependency;\n\n    public void setup() {\n        dependency = Mockito.mock(Dependency.class);;\n        sut = new Example(dependency);\n    }\n\n    @Test public void success() throws InterruptedException, ExecutionException {\n        when(dependency.asyncMethod()).thenReturn(CompletableFuture.completedFuture(5));\n\n        // When\n        CompletableFuture&lt;String&gt; result = sut.someAsyncMethod();\n\n        // Then\n        assertThat(result.isCompletedExceptionally(), is(equalTo(false)));\n        String value = result.get();\n        assertThat(value, is(equalTo(\"5\")));\n    }\n\n    @Test public void failed() throws InterruptedException, ExecutionException {\n        // Given\n        CompletableFuture&lt;Integer&gt; c = new CompletableFuture&lt;Integer&gt;();\n        c.completeExceptionally(new RuntimeException(\"failed\"));\n        when(dependency.asyncMethod()).thenReturn(c);\n\n        // When\n        CompletableFuture&lt;String&gt; result = sut.someAsyncMethod();\n\n        // Then\n        assertThat(result.isCompletedExceptionally(), is(equalTo(false)));\n        String value = result.get();\n        assertThat(value, is(equalTo(\"got exception\")));\n    }\n}\n</code></pre>\n\n<p>You don´t test the async behaviour but you can test if the logic is correct.</p>\n"},{"tags":[],"owner":{"account_id":270764,"reputation":4103,"user_id":560902,"accept_rate":80,"display_name":"Jochen Bedersdorfer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1482975338,"creation_date":1482975338,"answer_id":41372052,"question_id":631598,"body_markdown":"This is what I&#39;m using nowadays if the test result is produced asynchronously.\r\n\r\n    public class TestUtil {\r\n    \r\n        public static &lt;R&gt; R await(Consumer&lt;CompletableFuture&lt;R&gt;&gt; completer) {\r\n            return await(20, TimeUnit.SECONDS, completer);\r\n        }\r\n    \r\n        public static &lt;R&gt; R await(int time, TimeUnit unit, Consumer&lt;CompletableFuture&lt;R&gt;&gt; completer) {\r\n            CompletableFuture&lt;R&gt; f = new CompletableFuture&lt;&gt;();\r\n            completer.accept(f);\r\n            try {\r\n                return f.get(time, unit);\r\n            } catch (InterruptedException | TimeoutException e) {\r\n                throw new RuntimeException(&quot;Future timed out&quot;, e);\r\n            } catch (ExecutionException e) {\r\n                throw new RuntimeException(&quot;Future failed&quot;, e.getCause());\r\n            }\r\n        }\r\n    }\r\n\r\nUsing static imports, the test reads kinda nice.\r\n(note, in this example I&#39;m starting a thread to illustrate the idea)\r\n\r\n        @Test\r\n        public void testAsync() {\r\n            String result = await(f -&gt; {\r\n                new Thread(() -&gt; f.complete(&quot;My Result&quot;)).start();\r\n            });\r\n            assertEquals(&quot;My Result&quot;, result);\r\n        }\r\n\r\nIf `f.complete` isn&#39;t called, the test will fail after a timeout. You can also use `f.completeExceptionally` to fail early.\r\n\r\n","title":"How to use JUnit to test asynchronous processes","body":"<p>This is what I'm using nowadays if the test result is produced asynchronously.</p>\n\n<pre><code>public class TestUtil {\n\n    public static &lt;R&gt; R await(Consumer&lt;CompletableFuture&lt;R&gt;&gt; completer) {\n        return await(20, TimeUnit.SECONDS, completer);\n    }\n\n    public static &lt;R&gt; R await(int time, TimeUnit unit, Consumer&lt;CompletableFuture&lt;R&gt;&gt; completer) {\n        CompletableFuture&lt;R&gt; f = new CompletableFuture&lt;&gt;();\n        completer.accept(f);\n        try {\n            return f.get(time, unit);\n        } catch (InterruptedException | TimeoutException e) {\n            throw new RuntimeException(\"Future timed out\", e);\n        } catch (ExecutionException e) {\n            throw new RuntimeException(\"Future failed\", e.getCause());\n        }\n    }\n}\n</code></pre>\n\n<p>Using static imports, the test reads kinda nice.\n(note, in this example I'm starting a thread to illustrate the idea)</p>\n\n<pre><code>    @Test\n    public void testAsync() {\n        String result = await(f -&gt; {\n            new Thread(() -&gt; f.complete(\"My Result\")).start();\n        });\n        assertEquals(\"My Result\", result);\n    }\n</code></pre>\n\n<p>If <code>f.complete</code> isn't called, the test will fail after a timeout. You can also use <code>f.completeExceptionally</code> to fail early.</p>\n"},{"tags":[],"owner":{"account_id":36915,"reputation":3723,"user_id":105408,"accept_rate":75,"display_name":"markthegrea"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1501100077,"creation_date":1488574372,"answer_id":42588241,"question_id":631598,"body_markdown":"There are many answers here but a simple one is to just create a completed CompletableFuture and use it:\r\n\r\n    CompletableFuture.completedFuture(&quot;donzo&quot;)\r\n\r\nSo in my test:\r\n\r\n    this.exactly(2).of(mockEventHubClientWrapper).sendASync(with(any(LinkedList.class)));\r\n    this.will(returnValue(new CompletableFuture&lt;&gt;().completedFuture(&quot;donzo&quot;)));\r\n\r\nI am just making sure all of this stuff gets called anyway.  This technique works if you are using this code:\r\n\r\n    CompletableFuture.allOf(calls.toArray(new CompletableFuture[0])).join();\r\n\r\nIt will zip right through it as all the CompletableFutures are finished!","title":"How to use JUnit to test asynchronous processes","body":"<p>There are many answers here but a simple one is to just create a completed CompletableFuture and use it:</p>\n\n<pre><code>CompletableFuture.completedFuture(\"donzo\")\n</code></pre>\n\n<p>So in my test:</p>\n\n<pre><code>this.exactly(2).of(mockEventHubClientWrapper).sendASync(with(any(LinkedList.class)));\nthis.will(returnValue(new CompletableFuture&lt;&gt;().completedFuture(\"donzo\")));\n</code></pre>\n\n<p>I am just making sure all of this stuff gets called anyway.  This technique works if you are using this code:</p>\n\n<pre><code>CompletableFuture.allOf(calls.toArray(new CompletableFuture[0])).join();\n</code></pre>\n\n<p>It will zip right through it as all the CompletableFutures are finished!</p>\n"},{"tags":[],"owner":{"account_id":3897974,"reputation":6126,"user_id":3226466,"display_name":"Fantasy Fang"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1492397748,"creation_date":1492397748,"answer_id":43444508,"question_id":631598,"body_markdown":"I find an library [socket.io][1] to test asynchronous logic. It looks simple and brief way using [LinkedBlockingQueue][2]. Here is [example][3]:\r\n\r\n        @Test(timeout = TIMEOUT)\r\n    public void message() throws URISyntaxException, InterruptedException {\r\n        final BlockingQueue&lt;Object&gt; values = new LinkedBlockingQueue&lt;Object&gt;();\r\n\r\n        socket = client();\r\n        socket.on(Socket.EVENT_CONNECT, new Emitter.Listener() {\r\n            @Override\r\n            public void call(Object... objects) {\r\n                socket.send(&quot;foo&quot;, &quot;bar&quot;);\r\n            }\r\n        }).on(Socket.EVENT_MESSAGE, new Emitter.Listener() {\r\n            @Override\r\n            public void call(Object... args) {\r\n                values.offer(args);\r\n            }\r\n        });\r\n        socket.connect();\r\n\r\n        assertThat((Object[])values.take(), is(new Object[] {&quot;hello client&quot;}));\r\n        assertThat((Object[])values.take(), is(new Object[] {&quot;foo&quot;, &quot;bar&quot;}));\r\n        socket.disconnect();\r\n    }\r\nUsing LinkedBlockingQueue take API to block until to get result just like synchronous way. And set timeout to avoid assuming too much time to wait the result. \r\n\r\n  [1]: https://github.com/socketio/socket.io-client-java\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html\r\n  [3]: https://github.com/socketio/socket.io-client-java/blob/master/src/test/java/io/socket/client/ServerConnectionTest.java","title":"How to use JUnit to test asynchronous processes","body":"<p>I find an library <a href=\"https://github.com/socketio/socket.io-client-java\" rel=\"nofollow noreferrer\">socket.io</a> to test asynchronous logic. It looks simple and brief way using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html\" rel=\"nofollow noreferrer\">LinkedBlockingQueue</a>. Here is <a href=\"https://github.com/socketio/socket.io-client-java/blob/master/src/test/java/io/socket/client/ServerConnectionTest.java\" rel=\"nofollow noreferrer\">example</a>:</p>\n\n<pre><code>    @Test(timeout = TIMEOUT)\npublic void message() throws URISyntaxException, InterruptedException {\n    final BlockingQueue&lt;Object&gt; values = new LinkedBlockingQueue&lt;Object&gt;();\n\n    socket = client();\n    socket.on(Socket.EVENT_CONNECT, new Emitter.Listener() {\n        @Override\n        public void call(Object... objects) {\n            socket.send(\"foo\", \"bar\");\n        }\n    }).on(Socket.EVENT_MESSAGE, new Emitter.Listener() {\n        @Override\n        public void call(Object... args) {\n            values.offer(args);\n        }\n    });\n    socket.connect();\n\n    assertThat((Object[])values.take(), is(new Object[] {\"hello client\"}));\n    assertThat((Object[])values.take(), is(new Object[] {\"foo\", \"bar\"}));\n    socket.disconnect();\n}\n</code></pre>\n\n<p>Using LinkedBlockingQueue take API to block until to get result just like synchronous way. And set timeout to avoid assuming too much time to wait the result. </p>\n"},{"tags":[],"owner":{"account_id":420454,"reputation":6809,"user_id":798165,"accept_rate":57,"display_name":"eleven"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1508765964,"creation_date":1508765964,"answer_id":46890812,"question_id":631598,"body_markdown":"It&#39;s worth mentioning that there is very useful chapter `Testing Concurrent Programs` in [Concurrency in Practice][1] which describes some unit testing approaches and gives solutions for issues.\r\n\r\n\r\n  [1]: https://www.amazon.com/Java-Concurrency-Practice-Tim-Peierls-ebook/dp/B004V9OA84/","title":"How to use JUnit to test asynchronous processes","body":"<p>It's worth mentioning that there is very useful chapter <code>Testing Concurrent Programs</code> in <a href=\"https://rads.stackoverflow.com/amzn/click/com/B004V9OA84\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Concurrency in Practice</a> which describes some unit testing approaches and gives solutions for issues.</p>\n"},{"tags":[],"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1544877283,"creation_date":1512545236,"answer_id":47669002,"question_id":631598,"body_markdown":"Avoid testing with parallel threads whenever you can (which is most of the time). This will only make your tests flaky (sometimes pass, sometimes fail).\r\n\r\nOnly when you need to call some other library / system, you might have to wait on other threads, in that case always use the [Awaitility](http://code.google.com/p/awaitility/) library instead of `Thread.sleep()`.\r\n\r\nNever just call `get()` or `join()` in your tests, else your tests might run forever on your CI server in case the future never completes. Always assert `isDone()` first in your tests before calling `get()`. For CompletionStage, that is `.toCompletableFuture().isDone()`.\r\n\r\nWhen you test a non-blocking method like this:\r\n\r\n    public static CompletionStage&lt;String&gt; createGreeting(CompletableFuture&lt;String&gt; future) {\r\n        return future.thenApply(result -&gt; &quot;Hello &quot; + result);\r\n    }\r\n\r\n\r\nthen you should not just test the result by passing a completed Future in the test, you should also make sure that your method `doSomething()` does not block by calling `join()` or `get()`. This is important in particular if you use a non-blocking framework.\r\n\r\nTo do that, test with a non-completed future that you set to completed manually:\r\n\r\n    @Test\r\n    public void testDoSomething() throws Exception {\r\n        CompletableFuture&lt;String&gt; innerFuture = new CompletableFuture&lt;&gt;();\r\n        CompletableFuture&lt;String&gt; futureResult = createGreeting(innerFuture).toCompletableFuture();\r\n        assertFalse(futureResult.isDone());\r\n\r\n        // this triggers the future to complete\r\n        innerFuture.complete(&quot;world&quot;);\r\n        assertTrue(futureResult.isDone());\r\n\r\n        // futher asserts about fooResult here\r\n        assertEquals(futureResult.get(), &quot;Hello world&quot;);\r\n    }\r\n\r\n\r\nThat way, if you add `future.join()` to doSomething(), the test will fail.\r\n\r\nIf your Service uses an ExecutorService such as in `thenApplyAsync(..., executorService)`, then in your tests inject a single-threaded ExecutorService, such as the one from guava:\r\n\r\n    ExecutorService executorService = Executors.newSingleThreadExecutor();\r\n\r\nIf your code uses the forkJoinPool such as `thenApplyAsync(...)`, rewrite the code to use an ExecutorService (there are many good reasons), or use Awaitility.\r\n\r\nTo shorten the example, I made BarService a method argument implemented as a Java8 lambda in the test, typically it would be an injected reference that you would mock.","title":"How to use JUnit to test asynchronous processes","body":"<p>Avoid testing with parallel threads whenever you can (which is most of the time). This will only make your tests flaky (sometimes pass, sometimes fail).</p>\n\n<p>Only when you need to call some other library / system, you might have to wait on other threads, in that case always use the <a href=\"http://code.google.com/p/awaitility/\" rel=\"nofollow noreferrer\">Awaitility</a> library instead of <code>Thread.sleep()</code>.</p>\n\n<p>Never just call <code>get()</code> or <code>join()</code> in your tests, else your tests might run forever on your CI server in case the future never completes. Always assert <code>isDone()</code> first in your tests before calling <code>get()</code>. For CompletionStage, that is <code>.toCompletableFuture().isDone()</code>.</p>\n\n<p>When you test a non-blocking method like this:</p>\n\n<pre><code>public static CompletionStage&lt;String&gt; createGreeting(CompletableFuture&lt;String&gt; future) {\n    return future.thenApply(result -&gt; \"Hello \" + result);\n}\n</code></pre>\n\n<p>then you should not just test the result by passing a completed Future in the test, you should also make sure that your method <code>doSomething()</code> does not block by calling <code>join()</code> or <code>get()</code>. This is important in particular if you use a non-blocking framework.</p>\n\n<p>To do that, test with a non-completed future that you set to completed manually:</p>\n\n<pre><code>@Test\npublic void testDoSomething() throws Exception {\n    CompletableFuture&lt;String&gt; innerFuture = new CompletableFuture&lt;&gt;();\n    CompletableFuture&lt;String&gt; futureResult = createGreeting(innerFuture).toCompletableFuture();\n    assertFalse(futureResult.isDone());\n\n    // this triggers the future to complete\n    innerFuture.complete(\"world\");\n    assertTrue(futureResult.isDone());\n\n    // futher asserts about fooResult here\n    assertEquals(futureResult.get(), \"Hello world\");\n}\n</code></pre>\n\n<p>That way, if you add <code>future.join()</code> to doSomething(), the test will fail.</p>\n\n<p>If your Service uses an ExecutorService such as in <code>thenApplyAsync(..., executorService)</code>, then in your tests inject a single-threaded ExecutorService, such as the one from guava:</p>\n\n<pre><code>ExecutorService executorService = Executors.newSingleThreadExecutor();\n</code></pre>\n\n<p>If your code uses the forkJoinPool such as <code>thenApplyAsync(...)</code>, rewrite the code to use an ExecutorService (there are many good reasons), or use Awaitility.</p>\n\n<p>To shorten the example, I made BarService a method argument implemented as a Java8 lambda in the test, typically it would be an injected reference that you would mock.</p>\n"},{"tags":[],"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1585174260,"creation_date":1585173832,"answer_id":60858020,"question_id":631598,"body_markdown":"For all Spring users out there, this is how I usually do my integration tests nowadays, where async behaviour is involved:\r\n\r\nFire an application event in production code, when an async task (such as an I/O call) has finished. Most of the time this event is necessary anyway to handle the response of the async operation in production.\r\n\r\nWith this event in place, you can then use the following strategy in your test case:\r\n\r\n1. Execute the system under test\r\n3. Listen for the event and make sure that the event has fired\r\n3. Do your assertions\r\n\r\nTo break this down, you&#39;ll first need some kind of domain event to fire. I&#39;m using a UUID here to identify the task that has completed, but you&#39;re of course free to use something else as long as it&#39;s unique.\r\n\r\n(Note, that the following code snippets also use [Lombok][1] annotations to get rid of boiler plate code)\r\n\r\n\r\n    @RequiredArgsConstructor\r\n    class TaskCompletedEvent() {\r\n      private final UUID taskId;\r\n      // add more fields containing the result of the task if required\r\n    }\r\n\r\nThe production code itself then typically looks like this:\r\n\r\n    @Component\r\n    @RequiredArgsConstructor\r\n    class Production {\r\n\r\n      private final ApplicationEventPublisher eventPublisher;\r\n\r\n      void doSomeTask(UUID taskId) {\r\n        // do something like calling a REST endpoint asynchronously\r\n        eventPublisher.publishEvent(new TaskCompletedEvent(taskId));\r\n      }\r\n\r\n    }\r\n\r\nI can then use a Spring `@EventListener` to catch the published event in test code. The event listener is a little bit more involved, because it has to handle two cases in a thread safe manner:\r\n\r\n1. Production code is faster than the test case and the event has already fired before the test case checks for the event, or\r\n2. Test case is faster than production code and the test case has to wait for the event.\r\n\r\nA `CountDownLatch` is used for the second case as mentioned in other answers here. Also note, that the `@Order` annotation on the event handler method makes sure, that this event handler method gets called after any other event listeners used in production.\r\n\r\n    @Component\r\n    class TaskCompletionEventListener {\r\n\r\n      private Map&lt;UUID, CountDownLatch&gt; waitLatches = new ConcurrentHashMap&lt;&gt;();\r\n      private List&lt;UUID&gt; eventsReceived = new ArrayList&lt;&gt;();\r\n\r\n      void waitForCompletion(UUID taskId) {\r\n        synchronized (this) {\r\n          if (eventAlreadyReceived(taskId)) {\r\n            return;\r\n          }\r\n          checkNobodyIsWaiting(taskId);\r\n          createLatch(taskId);\r\n        }\r\n        waitForEvent(taskId);\r\n      }\r\n\r\n      private void checkNobodyIsWaiting(UUID taskId) {\r\n        if (waitLatches.containsKey(taskId)) {\r\n          throw new IllegalArgumentException(&quot;Only one waiting test per task ID supported, but another test is already waiting for &quot; + taskId + &quot; to complete.&quot;);\r\n        }\r\n      }\r\n\r\n      private boolean eventAlreadyReceived(UUID taskId) {\r\n        return eventsReceived.remove(taskId);\r\n      }\r\n\r\n      private void createLatch(UUID taskId) {\r\n        waitLatches.put(taskId, new CountDownLatch(1));\r\n      }\r\n\r\n      @SneakyThrows\r\n      private void waitForEvent(UUID taskId) {\r\n        var latch = waitLatches.get(taskId);\r\n        latch.await();\r\n      }\r\n\r\n      @EventListener\r\n      @Order\r\n      void eventReceived(TaskCompletedEvent event) {\r\n        var taskId = event.getTaskId();\r\n        synchronized (this) {\r\n          if (isSomebodyWaiting(taskId)) {\r\n            notifyWaitingTest(taskId);\r\n          } else {\r\n            eventsReceived.add(taskId);\r\n          }\r\n        }\r\n      }\r\n\r\n      private boolean isSomebodyWaiting(UUID taskId) {\r\n        return waitLatches.containsKey(taskId);\r\n      }\r\n\r\n      private void notifyWaitingTest(UUID taskId) {\r\n        var latch = waitLatches.remove(taskId);\r\n        latch.countDown();\r\n      }\r\n\r\n    }\r\n\r\n\r\nLast step is to execute the system under test in a test case. I&#39;m using a SpringBoot test with JUnit 5 here, but this should work the same for all tests using a Spring context.\r\n\r\n    @SpringBootTest\r\n    class ProductionIntegrationTest {\r\n     \r\n      @Autowired\r\n      private Production sut;\r\n\r\n      @Autowired\r\n      private TaskCompletionEventListener listener;\r\n\r\n      @Test\r\n      void thatTaskCompletesSuccessfully() {\r\n        var taskId = UUID.randomUUID();\r\n        sut.doSomeTask(taskId);\r\n        listener.waitForCompletion(taskId);\r\n        // do some assertions like looking into the DB if value was stored successfully\r\n      }\r\n\r\n    }\r\n\r\nNote, that in contrast to other answers here, this solution will also work if you execute your tests in parallel and multiple threads exercise the async code at the same time.\r\n\r\n  [1]: https://projectlombok.org","title":"How to use JUnit to test asynchronous processes","body":"<p>For all Spring users out there, this is how I usually do my integration tests nowadays, where async behaviour is involved:</p>\n\n<p>Fire an application event in production code, when an async task (such as an I/O call) has finished. Most of the time this event is necessary anyway to handle the response of the async operation in production.</p>\n\n<p>With this event in place, you can then use the following strategy in your test case:</p>\n\n<ol>\n<li>Execute the system under test</li>\n<li>Listen for the event and make sure that the event has fired</li>\n<li>Do your assertions</li>\n</ol>\n\n<p>To break this down, you'll first need some kind of domain event to fire. I'm using a UUID here to identify the task that has completed, but you're of course free to use something else as long as it's unique.</p>\n\n<p>(Note, that the following code snippets also use <a href=\"https://projectlombok.org\" rel=\"nofollow noreferrer\">Lombok</a> annotations to get rid of boiler plate code)</p>\n\n<pre><code>@RequiredArgsConstructor\nclass TaskCompletedEvent() {\n  private final UUID taskId;\n  // add more fields containing the result of the task if required\n}\n</code></pre>\n\n<p>The production code itself then typically looks like this:</p>\n\n<pre><code>@Component\n@RequiredArgsConstructor\nclass Production {\n\n  private final ApplicationEventPublisher eventPublisher;\n\n  void doSomeTask(UUID taskId) {\n    // do something like calling a REST endpoint asynchronously\n    eventPublisher.publishEvent(new TaskCompletedEvent(taskId));\n  }\n\n}\n</code></pre>\n\n<p>I can then use a Spring <code>@EventListener</code> to catch the published event in test code. The event listener is a little bit more involved, because it has to handle two cases in a thread safe manner:</p>\n\n<ol>\n<li>Production code is faster than the test case and the event has already fired before the test case checks for the event, or</li>\n<li>Test case is faster than production code and the test case has to wait for the event.</li>\n</ol>\n\n<p>A <code>CountDownLatch</code> is used for the second case as mentioned in other answers here. Also note, that the <code>@Order</code> annotation on the event handler method makes sure, that this event handler method gets called after any other event listeners used in production.</p>\n\n<pre><code>@Component\nclass TaskCompletionEventListener {\n\n  private Map&lt;UUID, CountDownLatch&gt; waitLatches = new ConcurrentHashMap&lt;&gt;();\n  private List&lt;UUID&gt; eventsReceived = new ArrayList&lt;&gt;();\n\n  void waitForCompletion(UUID taskId) {\n    synchronized (this) {\n      if (eventAlreadyReceived(taskId)) {\n        return;\n      }\n      checkNobodyIsWaiting(taskId);\n      createLatch(taskId);\n    }\n    waitForEvent(taskId);\n  }\n\n  private void checkNobodyIsWaiting(UUID taskId) {\n    if (waitLatches.containsKey(taskId)) {\n      throw new IllegalArgumentException(\"Only one waiting test per task ID supported, but another test is already waiting for \" + taskId + \" to complete.\");\n    }\n  }\n\n  private boolean eventAlreadyReceived(UUID taskId) {\n    return eventsReceived.remove(taskId);\n  }\n\n  private void createLatch(UUID taskId) {\n    waitLatches.put(taskId, new CountDownLatch(1));\n  }\n\n  @SneakyThrows\n  private void waitForEvent(UUID taskId) {\n    var latch = waitLatches.get(taskId);\n    latch.await();\n  }\n\n  @EventListener\n  @Order\n  void eventReceived(TaskCompletedEvent event) {\n    var taskId = event.getTaskId();\n    synchronized (this) {\n      if (isSomebodyWaiting(taskId)) {\n        notifyWaitingTest(taskId);\n      } else {\n        eventsReceived.add(taskId);\n      }\n    }\n  }\n\n  private boolean isSomebodyWaiting(UUID taskId) {\n    return waitLatches.containsKey(taskId);\n  }\n\n  private void notifyWaitingTest(UUID taskId) {\n    var latch = waitLatches.remove(taskId);\n    latch.countDown();\n  }\n\n}\n</code></pre>\n\n<p>Last step is to execute the system under test in a test case. I'm using a SpringBoot test with JUnit 5 here, but this should work the same for all tests using a Spring context.</p>\n\n<pre><code>@SpringBootTest\nclass ProductionIntegrationTest {\n\n  @Autowired\n  private Production sut;\n\n  @Autowired\n  private TaskCompletionEventListener listener;\n\n  @Test\n  void thatTaskCompletesSuccessfully() {\n    var taskId = UUID.randomUUID();\n    sut.doSomeTask(taskId);\n    listener.waitForCompletion(taskId);\n    // do some assertions like looking into the DB if value was stored successfully\n  }\n\n}\n</code></pre>\n\n<p>Note, that in contrast to other answers here, this solution will also work if you execute your tests in parallel and multiple threads exercise the async code at the same time.</p>\n"},{"tags":[],"owner":{"account_id":4250230,"reputation":1766,"user_id":3477539,"accept_rate":83,"display_name":"Rostislav V"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599154269,"creation_date":1599154269,"answer_id":63728861,"question_id":631598,"body_markdown":"Let&#39;s say you have this code:\r\n\r\n    public void method() {\r\n            CompletableFuture.runAsync(() -&gt; {\r\n                //logic\r\n                //logic\r\n                //logic\r\n                //logic\r\n            });\r\n        }\r\n\r\nTry to refactor it to something like this:\r\n\r\n    public void refactoredMethod() {\r\n        CompletableFuture.runAsync(this::subMethod);\r\n    }\r\n    \r\n    private void subMethod() {\r\n        //logic\r\n        //logic\r\n        //logic\r\n        //logic\r\n    }\r\n\r\nAfter that, test the subMethod this way:\r\n\r\n    org.powermock.reflect.Whitebox.invokeMethod(classInstance, &quot;subMethod&quot;); \r\n\r\nThis isn&#39;t a perfect solution, but it tests all the logic inside your async execution.\r\n","title":"How to use JUnit to test asynchronous processes","body":"<p>Let's say you have this code:</p>\n<pre><code>public void method() {\n        CompletableFuture.runAsync(() -&gt; {\n            //logic\n            //logic\n            //logic\n            //logic\n        });\n    }\n</code></pre>\n<p>Try to refactor it to something like this:</p>\n<pre><code>public void refactoredMethod() {\n    CompletableFuture.runAsync(this::subMethod);\n}\n\nprivate void subMethod() {\n    //logic\n    //logic\n    //logic\n    //logic\n}\n</code></pre>\n<p>After that, test the subMethod this way:</p>\n<pre><code>org.powermock.reflect.Whitebox.invokeMethod(classInstance, &quot;subMethod&quot;); \n</code></pre>\n<p>This isn't a perfect solution, but it tests all the logic inside your async execution.</p>\n"},{"tags":[],"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1603274179,"creation_date":1603273554,"answer_id":64460897,"question_id":631598,"body_markdown":"JUnit 5 has `Assertions.assertTimeout(Duration, Executable)`/`assertTimeoutPreemptively()`(please read Javadoc of each to understand the difference) and Mockito has `verify(mock, timeout(millisecs).times(x))`. \r\n\r\n    Assertions.assertTimeout(Duration.ofMillis(1000), () -&gt; \r\n        myReactiveService.doSth().subscribe()\r\n    );\r\n\r\nAnd: \r\n\r\n    Mockito.verify(myReactiveService, \r\n        timeout(1000).times(0)).doSth(); // cannot use never() here\r\n\r\nTimeout may be nondeterministic/fragile in pipelines. So be careful. ","title":"How to use JUnit to test asynchronous processes","body":"<p>JUnit 5 has <code>Assertions.assertTimeout(Duration, Executable)</code>/<code>assertTimeoutPreemptively()</code>(please read Javadoc of each to understand the difference) and Mockito has <code>verify(mock, timeout(millisecs).times(x))</code>.</p>\n<pre><code>Assertions.assertTimeout(Duration.ofMillis(1000), () -&gt; \n    myReactiveService.doSth().subscribe()\n);\n</code></pre>\n<p>And:</p>\n<pre><code>Mockito.verify(myReactiveService, \n    timeout(1000).times(0)).doSth(); // cannot use never() here\n</code></pre>\n<p>Timeout may be nondeterministic/fragile in pipelines. So be careful.</p>\n"},{"tags":[],"owner":{"account_id":1848338,"reputation":1157,"user_id":1675502,"accept_rate":42,"display_name":"V&#237;ctor Herraiz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681555037,"creation_date":1681555037,"answer_id":76021715,"question_id":631598,"body_markdown":"The following solution is explained in the code, there are two different approaches depending on your needs.\r\n\r\n```java\r\npackage es.victorherraiz.learningjava;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.*;\r\n\r\nimport java.util.concurrent.CountDownLatch;\r\nimport java.util.concurrent.TimeoutException;\r\nimport java.util.concurrent.atomic.AtomicLong;\r\n\r\nimport static java.util.concurrent.CompletableFuture.delayedExecutor;\r\nimport static java.util.concurrent.TimeUnit.MILLISECONDS;\r\nimport static org.mockito.BDDMockito.then;\r\nimport static org.mockito.Mockito.mock;\r\nimport static org.mockito.Mockito.timeout;\r\n\r\n@ExtendWith(AsyncTest.AsyncExtension.class)\r\npublic class AsyncTest {\r\n\r\n\r\n    /**\r\n     * This first test uses a custom extension, the code is down there.\r\n     * It is useful when there are plenty of async tests\r\n     * @param cb The callback\r\n     */\r\n    @Test\r\n    void test1(AsyncCallback cb) {\r\n        cb.setTimeout(5000);\r\n        delayedExecutor(2000, MILLISECONDS)\r\n            .execute(cb::success);\r\n    }\r\n\r\n    /**\r\n     * This test uses mockito, it is slower to detect signal.\r\n     * Use this when there are only a few async tests.\r\n     */\r\n    @Test\r\n    void test2() {\r\n        var mock = mock(Runnable.class);\r\n        delayedExecutor(2000, MILLISECONDS)\r\n            .execute(mock);\r\n        then(mock).should(timeout(5000)).run();\r\n    }\r\n\r\n    public static final class AsyncCallback {\r\n        private final CountDownLatch latch = new CountDownLatch(1);\r\n        private final AtomicLong timeout = new AtomicLong(5000);\r\n        private Exception exception;\r\n\r\n        private void setTimeout(long timeout) {\r\n            this.timeout.set(timeout);\r\n        }\r\n\r\n        private long getTimeout() {\r\n            return this.timeout.get();\r\n        };\r\n\r\n\r\n        boolean await() throws InterruptedException {\r\n            return latch.await(timeout.get(), MILLISECONDS);\r\n        }\r\n\r\n        Exception getFailure() {\r\n            return exception;\r\n        }\r\n\r\n        public void done(Exception exception) {\r\n            this.exception = exception;\r\n            latch.countDown();\r\n        }\r\n\r\n        public void success() {\r\n            done(null);\r\n        }\r\n\r\n        public void failure(Exception exception) {\r\n            done(exception);\r\n        }\r\n    }\r\n\r\n    // Extract this class to any common package\r\n    public static class AsyncExtension implements ParameterResolver, AfterTestExecutionCallback {\r\n        private static final ExtensionContext.Namespace NAMESPACE =\r\n            ExtensionContext.Namespace.create(AsyncExtension.class);\r\n\r\n        @Override\r\n        public boolean supportsParameter(ParameterContext parameterContext, ExtensionContext extensionContext) {\r\n            return parameterContext.getParameter().getType().equals(AsyncCallback.class);\r\n        }\r\n\r\n        @Override\r\n        public Object resolveParameter(ParameterContext parameterContext, ExtensionContext extensionContext) {\r\n            return extensionContext.getStore(NAMESPACE).getOrComputeIfAbsent(AsyncCallback.class);\r\n        }\r\n\r\n        @Override\r\n        public void afterTestExecution(ExtensionContext extensionContext) throws Exception {\r\n            var callback = (AsyncCallback) extensionContext.getStore(NAMESPACE).get(AsyncCallback.class);\r\n            if (callback != null) {\r\n                if (!callback.await()) {\r\n                    throw new TimeoutException(&quot;Timeout: there was not signal for &quot; + callback.getTimeout() + &quot;ms&quot;);\r\n                }\r\n                var failure = callback.getFailure();\r\n                if (failure != null) {\r\n                    throw failure;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"How to use JUnit to test asynchronous processes","body":"<p>The following solution is explained in the code, there are two different approaches depending on your needs.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package es.victorherraiz.learningjava;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.*;\n\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.TimeoutException;\nimport java.util.concurrent.atomic.AtomicLong;\n\nimport static java.util.concurrent.CompletableFuture.delayedExecutor;\nimport static java.util.concurrent.TimeUnit.MILLISECONDS;\nimport static org.mockito.BDDMockito.then;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.timeout;\n\n@ExtendWith(AsyncTest.AsyncExtension.class)\npublic class AsyncTest {\n\n\n    /**\n     * This first test uses a custom extension, the code is down there.\n     * It is useful when there are plenty of async tests\n     * @param cb The callback\n     */\n    @Test\n    void test1(AsyncCallback cb) {\n        cb.setTimeout(5000);\n        delayedExecutor(2000, MILLISECONDS)\n            .execute(cb::success);\n    }\n\n    /**\n     * This test uses mockito, it is slower to detect signal.\n     * Use this when there are only a few async tests.\n     */\n    @Test\n    void test2() {\n        var mock = mock(Runnable.class);\n        delayedExecutor(2000, MILLISECONDS)\n            .execute(mock);\n        then(mock).should(timeout(5000)).run();\n    }\n\n    public static final class AsyncCallback {\n        private final CountDownLatch latch = new CountDownLatch(1);\n        private final AtomicLong timeout = new AtomicLong(5000);\n        private Exception exception;\n\n        private void setTimeout(long timeout) {\n            this.timeout.set(timeout);\n        }\n\n        private long getTimeout() {\n            return this.timeout.get();\n        };\n\n\n        boolean await() throws InterruptedException {\n            return latch.await(timeout.get(), MILLISECONDS);\n        }\n\n        Exception getFailure() {\n            return exception;\n        }\n\n        public void done(Exception exception) {\n            this.exception = exception;\n            latch.countDown();\n        }\n\n        public void success() {\n            done(null);\n        }\n\n        public void failure(Exception exception) {\n            done(exception);\n        }\n    }\n\n    // Extract this class to any common package\n    public static class AsyncExtension implements ParameterResolver, AfterTestExecutionCallback {\n        private static final ExtensionContext.Namespace NAMESPACE =\n            ExtensionContext.Namespace.create(AsyncExtension.class);\n\n        @Override\n        public boolean supportsParameter(ParameterContext parameterContext, ExtensionContext extensionContext) {\n            return parameterContext.getParameter().getType().equals(AsyncCallback.class);\n        }\n\n        @Override\n        public Object resolveParameter(ParameterContext parameterContext, ExtensionContext extensionContext) {\n            return extensionContext.getStore(NAMESPACE).getOrComputeIfAbsent(AsyncCallback.class);\n        }\n\n        @Override\n        public void afterTestExecution(ExtensionContext extensionContext) throws Exception {\n            var callback = (AsyncCallback) extensionContext.getStore(NAMESPACE).get(AsyncCallback.class);\n            if (callback != null) {\n                if (!callback.await()) {\n                    throw new TimeoutException(&quot;Timeout: there was not signal for &quot; + callback.getTimeout() + &quot;ms&quot;);\n                }\n                var failure = callback.getFailure();\n                if (failure != null) {\n                    throw failure;\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":20392,"reputation":6497,"user_id":48721,"accept_rate":77,"display_name":"Sam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241664,"favorite_count":0,"down_vote_count":0,"up_vote_count":271,"accepted_answer_id":631754,"answer_count":18,"score":271,"last_activity_date":1681555037,"creation_date":1236708571,"question_id":631598,"body_markdown":"How do you test methods that fire asynchronous processes with JUnit?\r\n\r\nI don&#39;t know how to make my test wait for the process to end (it is not exactly a unit test, it is more like an integration test as it involves several classes and not just one).","title":"How to use JUnit to test asynchronous processes","body":"<p>How do you test methods that fire asynchronous processes with JUnit?</p>\n\n<p>I don't know how to make my test wait for the process to end (it is not exactly a unit test, it is more like an integration test as it involves several classes and not just one).</p>\n"},{"tags":["java","data-structures","depth-first-search","breadth-first-search"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681554979,"post_id":76021700,"comment_id":134077491,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":10759610,"reputation":12628,"user_id":7916438,"display_name":"tevemadar"},"score":0,"creation_date":1681556002,"post_id":76021700,"comment_id":134077618,"body_markdown":"You can do how it suggests and it will tell. It wants `adjacency = new LinkedList[v];` to be `adjacency = new LinkedList&lt;Integer&gt;[v];`. But then it won&#39;t work out of the box, see https://stackoverflow.com/questions/529085/how-to-create-a-generic-array-in-java for details. Actually it looks very suspicious that you have a `static` field of an array of linked lists, it may not be what you really want.","body":"You can do how it suggests and it will tell. It wants <code>adjacency = new LinkedList[v];</code> to be <code>adjacency = new LinkedList&lt;Integer&gt;[v];</code>. But then it won&#39;t work out of the box, see <a href=\"https://stackoverflow.com/questions/529085/how-to-create-a-generic-array-in-java\" title=\"how to create a generic array in java\">stackoverflow.com/questions/529085/&hellip;</a> for details. Actually it looks very suspicious that you have a <code>static</code> field of an array of linked lists, it may not be what you really want."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1681556551,"post_id":76021700,"comment_id":134077690,"body_markdown":"That is only a warning? Did .class file get updated? Usually adding some well placed ‘&lt;&gt;’ will fix. Sometimes difficult to fix. Ignore.","body":"That is only a warning? Did .class file get updated? Usually adding some well placed ‘&lt;&gt;’ will fix. Sometimes difficult to fix. Ignore."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681564612,"post_id":76021700,"comment_id":134078732,"body_markdown":"It says: &quot;`Recompile with -Xlint:unchecked for details`&quot;.  Do that!","body":"It says: &quot;<code>Recompile with -Xlint:unchecked for details</code>&quot;.  Do that!"}],"owner":{"account_id":28312255,"reputation":11,"user_id":21649344,"display_name":"Dabhoya Kishan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1681564649,"answer_count":0,"score":1,"last_activity_date":1681554951,"creation_date":1681554851,"question_id":76021700,"body_markdown":"    import java.util.*;\r\n    \r\n    public class q48 {\r\n            public static LinkedList&lt;Integer&gt; adjacency[];\r\n            public q48(int v)\r\n            {\r\n                adjacency = new LinkedList[v];\r\n                for(int i=0; i&lt;v; i++)\r\n                {\r\n                    adjacency[i]=new LinkedList&lt;Integer&gt;();\r\n                }\r\n            }\r\n            public static void implementgraph(int s,int d)\r\n            {\r\n                adjacency[s].add(d);\r\n                adjacency[d].add(s);\r\n            }\r\n            public static void bfs(int source)\r\n            {\r\n                boolean visited_nodes[] = new boolean[adjacency.length];\r\n                int parent_nodes[] =  new int[adjacency.length];\r\n                Queue&lt;Integer&gt; q= new LinkedList&lt;&gt;();\r\n                q.add(source);\r\n                visited_nodes[source]=true;\r\n                parent_nodes[source]=-1;\r\n                while(!q.isEmpty())\r\n                {\r\n                    int p = q.poll();\r\n                    System.out.println(p);\r\n                    for(int i:adjacency[p])\r\n                    {\r\n                        if(visited_nodes[i] != true)\r\n                        {\r\n                            visited_nodes[i] = true;\r\n                            q.add(i);\r\n                            parent_nodes[i]=p;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n            System.out.println(&quot;Enter vertice and edges : &quot;);\r\n            int v = sc.nextInt();\r\n            int e = sc.nextInt();\r\n            q48 g= new q48(v);\r\n            System.out.println(&quot;Enter the edges : &quot;);\r\n            for(int i=0; i&lt;e; i++)\r\n            {\r\n                int s = sc.nextInt();\r\n                int d = sc.nextInt();\r\n                implementgraph(s,d);\r\n            }\r\n            System.out.println(&quot;Enter source node : &quot;);\r\n            int source = sc.nextInt();\r\n            bfs(source);\r\n        }\r\n    }\r\n\r\nwhen I compile same code in VSCode then its working perfectly but when I compile this code with Command prompt gave error\r\n\r\n\r\n","title":"Why I got this error q48.java uses unchecked or unsafe operations. Note: Recompile with -Xlint:unchecked for details","body":"<pre><code>import java.util.*;\n\npublic class q48 {\n        public static LinkedList&lt;Integer&gt; adjacency[];\n        public q48(int v)\n        {\n            adjacency = new LinkedList[v];\n            for(int i=0; i&lt;v; i++)\n            {\n                adjacency[i]=new LinkedList&lt;Integer&gt;();\n            }\n        }\n        public static void implementgraph(int s,int d)\n        {\n            adjacency[s].add(d);\n            adjacency[d].add(s);\n        }\n        public static void bfs(int source)\n        {\n            boolean visited_nodes[] = new boolean[adjacency.length];\n            int parent_nodes[] =  new int[adjacency.length];\n            Queue&lt;Integer&gt; q= new LinkedList&lt;&gt;();\n            q.add(source);\n            visited_nodes[source]=true;\n            parent_nodes[source]=-1;\n            while(!q.isEmpty())\n            {\n                int p = q.poll();\n                System.out.println(p);\n                for(int i:adjacency[p])\n                {\n                    if(visited_nodes[i] != true)\n                    {\n                        visited_nodes[i] = true;\n                        q.add(i);\n                        parent_nodes[i]=p;\n                    }\n                }\n            }\n        }\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter vertice and edges : &quot;);\n        int v = sc.nextInt();\n        int e = sc.nextInt();\n        q48 g= new q48(v);\n        System.out.println(&quot;Enter the edges : &quot;);\n        for(int i=0; i&lt;e; i++)\n        {\n            int s = sc.nextInt();\n            int d = sc.nextInt();\n            implementgraph(s,d);\n        }\n        System.out.println(&quot;Enter source node : &quot;);\n        int source = sc.nextInt();\n        bfs(source);\n    }\n}\n</code></pre>\n<p>when I compile same code in VSCode then its working perfectly but when I compile this code with Command prompt gave error</p>\n"},{"tags":["java","libgdx"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1681499557,"post_id":75998931,"comment_id":134072081,"body_markdown":"It&#39;s unclear what your problem is. The above should work if you&#39;ve set up your batch with the right blend mode and enabled blending on the batch.","body":"It&#39;s unclear what your problem is. The above should work if you&#39;ve set up your batch with the right blend mode and enabled blending on the batch."}],"answers":[{"tags":[],"owner":{"account_id":4018270,"reputation":35,"user_id":3309567,"display_name":"NoUserNoName"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681554895,"creation_date":1681411487,"answer_id":76008834,"question_id":75998931,"body_markdown":"    public void setUpTransparent(float alpha){\r\n        Gdx.gl.glEnable(GL20.GL_BLEND);\r\n        Gdx.gl.glBlendFunc(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);\r\n        batch.begin();\r\n    \r\n        up++;\r\n        rgbBatch = batch.getColor();\r\n        if (up &gt; 100){\r\n            batch.setColor(rgbBatch.r, rgbBatch.g, rgbBatch.b, alpha);\r\n            batch.draw(textureIcon, rectangleIcon.x, rectangleIcon.y);\r\n        }\r\n        batch.end();\r\n        Gdx.gl.glDisable(GL20.GL_BLEND);\r\n    }\r\n\r\n","title":"How do i make the texture transparent?","body":"<pre><code>public void setUpTransparent(float alpha){\n    Gdx.gl.glEnable(GL20.GL_BLEND);\n    Gdx.gl.glBlendFunc(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);\n    batch.begin();\n\n    up++;\n    rgbBatch = batch.getColor();\n    if (up &gt; 100){\n        batch.setColor(rgbBatch.r, rgbBatch.g, rgbBatch.b, alpha);\n        batch.draw(textureIcon, rectangleIcon.x, rectangleIcon.y);\n    }\n    batch.end();\n    Gdx.gl.glDisable(GL20.GL_BLEND);\n}\n</code></pre>\n"}],"owner":{"account_id":27617232,"reputation":1,"user_id":21457902,"display_name":"Outsider"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681554895,"creation_date":1681325980,"question_id":75998931,"body_markdown":"I have the method which increase transparent texture, alpha = 0.3f.\r\n\r\n\r\n```\r\n public void setUpTransparent(float alpha){\r\n        up += 1;\r\n        rgbBatch = batch.getColor();\r\n        if (up &gt; 100){\r\n            batch.setColor(rgbBatch.r, rgbBatch.g, rgbBatch.b, alpha);\r\n            batch.draw(textureIcon, rectangleIcon.x, rectangleIcon.y);\r\n        }\r\n    }\r\n```\r\n\r\nI need do dicrease transparent for texture. How do this ?\r\n\r\n\r\n","title":"How do i make the texture transparent?","body":"<p>I have the method which increase transparent texture, alpha = 0.3f.</p>\n<pre><code> public void setUpTransparent(float alpha){\n        up += 1;\n        rgbBatch = batch.getColor();\n        if (up &gt; 100){\n            batch.setColor(rgbBatch.r, rgbBatch.g, rgbBatch.b, alpha);\n            batch.draw(textureIcon, rectangleIcon.x, rectangleIcon.y);\n        }\n    }\n</code></pre>\n<p>I need do dicrease transparent for texture. How do this ?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1681496432,"post_id":76017651,"comment_id":134071559,"body_markdown":"Since the same key appears in the list, the map might be smaller than the list, right? So that for `[a, b, c, a]`, your `getValues(List)` function returns `[&lt;a, aVal&gt;,&lt;b, bVal&gt;,&lt;c, cVal&gt;]`, since `Map#put` will update on duplicate keys. I&#39;m guessing you try to cache because you might call `getValue(String)` for the same key more than once. Is it correct?","body":"Since the same key appears in the list, the map might be smaller than the list, right? So that for <code>[a, b, c, a]</code>, your <code>getValues(List)</code> function returns <code>[&lt;a, aVal&gt;,&lt;b, bVal&gt;,&lt;c, cVal&gt;]</code>, since <code>Map#put</code> will update on duplicate keys. I&#39;m guessing you try to cache because you might call <code>getValue(String)</code> for the same key more than once. Is it correct?"},{"owner":{"account_id":10572708,"reputation":167,"user_id":7788900,"display_name":"pradhyo"},"score":0,"creation_date":1681497747,"post_id":76017651,"comment_id":134071775,"body_markdown":"sorry - I just updated the sample code to focus more on the problem. Yes, I am trying to cache because `getValue` will be called for the same key more than once.","body":"sorry - I just updated the sample code to focus more on the problem. Yes, I am trying to cache because <code>getValue</code> will be called for the same key more than once."},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1681498460,"post_id":76017651,"comment_id":134071896,"body_markdown":"Ok, if that&#39;s the case, couldn&#39;t you remove the duplicate keys before mapping? That way `getValue` will be called only once per unique key.","body":"Ok, if that&#39;s the case, couldn&#39;t you remove the duplicate keys before mapping? That way <code>getValue</code> will be called only once per unique key."},{"owner":{"account_id":10572708,"reputation":167,"user_id":7788900,"display_name":"pradhyo"},"score":0,"creation_date":1681503923,"post_id":76017651,"comment_id":134072817,"body_markdown":"its more like this dummy code so can&#39;t eliminate duplicates like that\n```java\nMap.of(\n  &quot;key1&quot;, (getValue(&quot;k1&quot;) + getValue(&quot;k2&quot;) + getValue(&quot;k3&quot;)),\n  &quot;key2&quot;, (getValue(&quot;k2&quot;) + getValue(&quot;k1&quot;) + getValue(&quot;k3&quot;)),\n  &quot;key3&quot;, (getValue(&quot;k3&quot;) + getValue(&quot;k2&quot;) + getValue(&quot;k1&quot;))\n);\n```","body":"its more like this dummy code so can&#39;t eliminate duplicates like that <code>java Map.of(   &quot;key1&quot;, (getValue(&quot;k1&quot;) + getValue(&quot;k2&quot;) + getValue(&quot;k3&quot;)),   &quot;key2&quot;, (getValue(&quot;k2&quot;) + getValue(&quot;k1&quot;) + getValue(&quot;k3&quot;)),   &quot;key3&quot;, (getValue(&quot;k3&quot;) + getValue(&quot;k2&quot;) + getValue(&quot;k1&quot;)) ); </code>"},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1681505185,"post_id":76017651,"comment_id":134073026,"body_markdown":"You should definitely add that to your question. I would expect that for every key, a single result is retrieved. I was hoping to help you solve this without a caching mechanism, but with those k&#39;s I no longer see how the relation works. Adding that (What are those k&#39;s and where do they come from) will also be helpful.","body":"You should definitely add that to your question. I would expect that for every key, a single result is retrieved. I was hoping to help you solve this without a caching mechanism, but with those k&#39;s I no longer see how the relation works. Adding that (What are those k&#39;s and where do they come from) will also be helpful."}],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681554648,"creation_date":1681554648,"answer_id":76021676,"question_id":76017651,"body_markdown":"Include the GUID generated in the Controller in the cache key.\r\n\r\n\r\n      @PostMapping(&quot;/logic&quot;)\r\n      public Map&lt;String, String&gt; getValues(\r\n          @RequestBody LogicRequest logicRequest\r\n      ) {\r\n        String uuid = UUID.randomUUID().toString();\r\n        return logicService.getValues(uuid);\r\n      } \r\n\r\n \r\n\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    @Slf4j\r\n    public class LogicService {\r\n    \r\n      Map&lt;String, String&gt; getValues(String uuid) {\r\n        // call getValue hundreds of times to generate output \r\n        // with a lot of calls having the same input\r\n      }\r\n    \r\n      @Cacheable(cacheManager = &quot;requestCacheManager&quot;, cacheNames = &quot;values&quot;)\r\n      String getValue(String uuid, String key) {\r\n        // expensive function\r\n      }\r\n    }\r\n\r\nOn a separate note, the @Cacheable mechanism will not work for your code in the question. The method getValue(String key) must be called from outside the LogicService because java needs to proxy the call.\r\n\r\n","title":"Caching a function (in a singleton service) within a single request to the controller in Java Spring Boot","body":"<p>Include the GUID generated in the Controller in the cache key.</p>\n<pre><code>  @PostMapping(&quot;/logic&quot;)\n  public Map&lt;String, String&gt; getValues(\n      @RequestBody LogicRequest logicRequest\n  ) {\n    String uuid = UUID.randomUUID().toString();\n    return logicService.getValues(uuid);\n  } \n\n\n\n\n@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class LogicService {\n\n  Map&lt;String, String&gt; getValues(String uuid) {\n    // call getValue hundreds of times to generate output \n    // with a lot of calls having the same input\n  }\n\n  @Cacheable(cacheManager = &quot;requestCacheManager&quot;, cacheNames = &quot;values&quot;)\n  String getValue(String uuid, String key) {\n    // expensive function\n  }\n}\n</code></pre>\n<p>On a separate note, the @Cacheable mechanism will not work for your code in the question. The method getValue(String key) must be called from outside the LogicService because java needs to proxy the call.</p>\n"}],"owner":{"account_id":10572708,"reputation":167,"user_id":7788900,"display_name":"pradhyo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":265,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681554648,"creation_date":1681493643,"question_id":76017651,"body_markdown":"For each call to the endpoint below, I have to fetch values for multiple keys from external services so I would like to cache the results of `getValue` but only within each request. `getValue` will be called multiple times for the same input multiple times within a request. The results for the same key will vary across multiple requests.\r\n\r\nSimplified version of my code is provided below.\r\n\r\nI tried using a `CacheManager` with `@Scope(&quot;prototype&quot;)` but its caching the values across requests.\r\nI tried using `@RequestScope(proxyMode = ScopedProxyMode.INTERFACES)` but I get `Scope &#39;request&#39; is not active for the current thread` and the application wouldn&#39;t run.\r\nI&#39;d prefer just creating an empty `HashMap` for each request and cache the values there myself but unsure how to handle that since `LogicService` is a singleton. \r\n\r\n\r\n```java\r\n@RestController\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class LogicController {\r\n  private final LogicService logicService;\r\n\r\n  @PostMapping(&quot;/logic&quot;)\r\n  public Map&lt;String, String&gt; getValues(\r\n      @RequestBody LogicRequest logicRequest\r\n  ) {\r\n    return logicService.getValues();\r\n  }  \r\n}\r\n```\r\n\r\n\r\n```java\r\n@Service\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class LogicService {\r\n\r\n  Map&lt;String, String&gt; getValues() {\r\n    // call getValue hundreds of times to generate output \r\n    // with a lot of calls having the same input\r\n  }\r\n\r\n  // how do I cache the results of this function just within one API call to /logic?\r\n  @Cacheable(cacheManager = &quot;requestCacheManager&quot;, cacheNames = &quot;values&quot;, key = &quot;#key&quot;)\r\n  String getValue(String key) {\r\n    // expensive function\r\n  }\r\n}\r\n```\r\n\r\n```java\r\n@SpringBootConfiguration\r\n@EnableCaching\r\npublic class CacheManagerConfiguration {\r\n  @Bean\r\n  @Scope(&quot;prototype&quot;)\r\n  public CacheManager requestCacheManager() {\r\n    return new ConcurrentMapCacheManager(&quot;values&quot;);\r\n  }\r\n}\r\n```\r\n","title":"Caching a function (in a singleton service) within a single request to the controller in Java Spring Boot","body":"<p>For each call to the endpoint below, I have to fetch values for multiple keys from external services so I would like to cache the results of <code>getValue</code> but only within each request. <code>getValue</code> will be called multiple times for the same input multiple times within a request. The results for the same key will vary across multiple requests.</p>\n<p>Simplified version of my code is provided below.</p>\n<p>I tried using a <code>CacheManager</code> with <code>@Scope(&quot;prototype&quot;)</code> but its caching the values across requests.\nI tried using <code>@RequestScope(proxyMode = ScopedProxyMode.INTERFACES)</code> but I get <code>Scope 'request' is not active for the current thread</code> and the application wouldn't run.\nI'd prefer just creating an empty <code>HashMap</code> for each request and cache the values there myself but unsure how to handle that since <code>LogicService</code> is a singleton.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequiredArgsConstructor\n@Slf4j\npublic class LogicController {\n  private final LogicService logicService;\n\n  @PostMapping(&quot;/logic&quot;)\n  public Map&lt;String, String&gt; getValues(\n      @RequestBody LogicRequest logicRequest\n  ) {\n    return logicService.getValues();\n  }  \n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class LogicService {\n\n  Map&lt;String, String&gt; getValues() {\n    // call getValue hundreds of times to generate output \n    // with a lot of calls having the same input\n  }\n\n  // how do I cache the results of this function just within one API call to /logic?\n  @Cacheable(cacheManager = &quot;requestCacheManager&quot;, cacheNames = &quot;values&quot;, key = &quot;#key&quot;)\n  String getValue(String key) {\n    // expensive function\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootConfiguration\n@EnableCaching\npublic class CacheManagerConfiguration {\n  @Bean\n  @Scope(&quot;prototype&quot;)\n  public CacheManager requestCacheManager() {\n    return new ConcurrentMapCacheManager(&quot;values&quot;);\n  }\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"owner":{"account_id":28252123,"reputation":1,"user_id":21598191,"display_name":"saket chauhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":432,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681554253,"creation_date":1680986443,"question_id":75967580,"body_markdown":"I am trying to launch Chrome with a URL, the browser launches but it does nothing after that.\r\n\r\nSeeing below error in my Eclipse console:\r\n```none\r\nStarting ChromeDriver 112.0.5615.49 (bd2a7bcb881c11e8cfe3078709382934e3916914-refs/branch-heads/5615@{#936}) on port 24598\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: Chrome failed to start: exited normally.\r\n  (unknown error: DevToolsActivePort file doesn&#39;t exist)\r\n  (The process started from chrome location C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \r\nHost info: host: &#39;ITCHAUNOTE&#39;, ip: &#39;192.168.1.15&#39;\r\nBuild info: version: &#39;4.8.3&#39;, revision: &#39;e5e76298c3&#39;\r\nSystem info: **os.name: &#39;Windows 10&#39;**, os.arch: &#39;amd64&#39;, **os.version: &#39;10.0&#39;, java.version: &#39;17.0.6&#39;**\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*], extensions: []}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*], extensions: []}}}]\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:148)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:106)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\r\n\tat org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:88)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:84)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:73)\r\n\tat ChromeTest.main(ChromeTest.java:13)\r\n```\r\nSelenium Code:\r\n```java\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\n\r\npublic class ChromeTest {\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException{\r\n\t\r\n\t\tChromeOptions options = new ChromeOptions();\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Selenium\\\\chromedriver_win32\\\\chromedriver.exe&quot;);\r\n\t\t\r\n\t\tWebDriver driver = new ChromeDriver(options);\r\n\t\t\r\n\t\tdriver.get(&quot;https://www.google.com/travel/flights&quot;);\r\n\t\tThread.sleep(2000);\r\n\t\tdriver.quit();\r\n\r\n\t}\r\n\r\n}\r\n````\r\n\r\nMy configuration:\r\n\r\n- Chrome browser Version: 112.0.5615.49 (Official Build) (64-bit)   \r\n- Chrome Driver: ChromeDriver 112.0.5615.49\r\n- Selenium-Java version: 4.8.3\r\n\r\nNote: Code works fine in other browsers Edge, Firefox but not in Chrome\r\n\r\n- OS: Microsoft Windows 10 Enterprise\r\n- System Type: x64-based PC\r\n\r\nSolution tried so far:\r\n\r\n1. Works fine when using code with setting Chrome options as shown below. But it runs in chomeheadless mode which I don&#39;t want. I want to run my tests only in Chrome browser.\r\n  ```java\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Selenium\\\\chromedriver_win32\\\\chromedriver.exe&quot;);\t\t\r\n    \t    // WebDriverManager.chromedriver().setup();\r\n    \r\n        ChromeOptions options = new ChromeOptions();\r\n        options.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\r\n        options.addArguments(&quot;--headless&quot;);\r\n        options.addArguments(&quot;start-maximized&quot;); // open Browser in maximized mode \r\n        options.addArguments(&quot;disable-infobars&quot;); // disabling infobars\r\n        options.addArguments(&quot;--disable-extensions&quot;); // disabling extensions \r\n        options.addArguments(&quot;--disable-gpu&quot;); // applicable to windows os only \r\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource problems\r\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n        driver = new ChromeDriver(options);\t\t \r\n        driver.get(&quot;https://www.google.com/travel/flights&quot;); \r\n        Thread.sleep(5000); \r\n        driver.quit();\r\n    ```\r\n\r\n2. Have tried older versions of Chrome browser, Chrome driver, and Selenium jar but no luck.","title":"Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: (DevToolsActivePort file doesn&#39;t exist)","body":"<p>I am trying to launch Chrome with a URL, the browser launches but it does nothing after that.</p>\n<p>Seeing below error in my Eclipse console:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Starting ChromeDriver 112.0.5615.49 (bd2a7bcb881c11e8cfe3078709382934e3916914-refs/branch-heads/5615@{#936}) on port 24598\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: Chrome failed to start: exited normally.\n  (unknown error: DevToolsActivePort file doesn't exist)\n  (The process started from chrome location C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \nHost info: host: 'ITCHAUNOTE', ip: '192.168.1.15'\nBuild info: version: '4.8.3', revision: 'e5e76298c3'\nSystem info: **os.name: 'Windows 10'**, os.arch: 'amd64', **os.version: '10.0', java.version: '17.0.6'**\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*], extensions: []}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*], extensions: []}}}]\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:148)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:106)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\n    at org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:88)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:84)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:73)\n    at ChromeTest.main(ChromeTest.java:13)\n</code></pre>\n<p>Selenium Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\n\npublic class ChromeTest {\n\n    public static void main(String[] args) throws InterruptedException{\n    \n        ChromeOptions options = new ChromeOptions();\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Selenium\\\\chromedriver_win32\\\\chromedriver.exe&quot;);\n        \n        WebDriver driver = new ChromeDriver(options);\n        \n        driver.get(&quot;https://www.google.com/travel/flights&quot;);\n        Thread.sleep(2000);\n        driver.quit();\n\n    }\n\n}\n</code></pre>\n<p>My configuration:</p>\n<ul>\n<li>Chrome browser Version: 112.0.5615.49 (Official Build) (64-bit)</li>\n<li>Chrome Driver: ChromeDriver 112.0.5615.49</li>\n<li>Selenium-Java version: 4.8.3</li>\n</ul>\n<p>Note: Code works fine in other browsers Edge, Firefox but not in Chrome</p>\n<ul>\n<li>OS: Microsoft Windows 10 Enterprise</li>\n<li>System Type: x64-based PC</li>\n</ul>\n<p>Solution tried so far:</p>\n<ol>\n<li>Works fine when using code with setting Chrome options as shown below. But it runs in chomeheadless mode which I don't want. I want to run my tests only in Chrome browser.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>  System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Selenium\\\\chromedriver_win32\\\\chromedriver.exe&quot;);        \n          // WebDriverManager.chromedriver().setup();\n  \n      ChromeOptions options = new ChromeOptions();\n      options.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\n      options.addArguments(&quot;--headless&quot;);\n      options.addArguments(&quot;start-maximized&quot;); // open Browser in maximized mode \n      options.addArguments(&quot;disable-infobars&quot;); // disabling infobars\n      options.addArguments(&quot;--disable-extensions&quot;); // disabling extensions \n      options.addArguments(&quot;--disable-gpu&quot;); // applicable to windows os only \n      options.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource problems\n      options.addArguments(&quot;--remote-allow-origins=*&quot;);\n      driver = new ChromeDriver(options);      \n      driver.get(&quot;https://www.google.com/travel/flights&quot;); \n      Thread.sleep(5000); \n      driver.quit();\n  ```\n\n2. Have tried older versions of Chrome browser, Chrome driver, and Selenium jar but no luck.\n</code></pre>\n"},{"tags":["java","android","android-mediasession"],"answers":[{"tags":[],"owner":{"account_id":28159606,"reputation":31,"user_id":21519777,"display_name":"AllahinAskeri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681553853,"creation_date":1680981561,"answer_id":75967238,"question_id":75892486,"body_markdown":"I solved my problem by adding `metadata.putLong(MediaMetadata.METADATA_KEY_DURATION, duration);`. `duration` variable should be `long` and it should always get updated.\r\n\r\n","title":"Android media notification large icon doesn&#39;t change","body":"<p>I solved my problem by adding <code>metadata.putLong(MediaMetadata.METADATA_KEY_DURATION, duration);</code>. <code>duration</code> variable should be <code>long</code> and it should always get updated.</p>\n"}],"owner":{"account_id":28159606,"reputation":31,"user_id":21519777,"display_name":"AllahinAskeri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75967238,"answer_count":1,"score":2,"last_activity_date":1681553853,"creation_date":1680206383,"question_id":75892486,"body_markdown":"I have a media notification and a large icon, my code successfully loads the image first time, but image doesn&#39;t changes second time. My code was working in Android 8.1.0, currently I&#39;m using Android 12 and it doesn&#39;t work.\r\n\r\n```\r\n    mediaSession.setMetadata(new MediaMetadataCompat.Builder()\r\n            .putBitmap(MediaMetadata.METADATA_KEY_ALBUM_ART, image)\r\n            .putBitmap(MediaMetadata.METADATA_KEY_ART, image)\r\n            .putLong(MediaMetadata.METADATA_KEY_DURATION, -1L)\r\n            .putString(MediaMetadata.METADATA_KEY_TITLE,BASLIK)\r\n            .putString(MediaMetadata.METADATA_KEY_ARTIST,ISIM)\r\n            .build());\r\n\r\n    stateBuilder = new PlaybackStateCompat.Builder();\r\n    stateBuilder.setActions(PlaybackStateCompat.ACTION_PLAY_PAUSE | PlaybackStateCompat.ACT\r\n    stateBuilder.setState(PlaybackStateCompat.STATE_PLAYING, 0, 1.0f);\r\n    mediaSession.setPlaybackState(stateBuilder.build());\r\n\r\n    notification = new NotificationCompat.Builder(context, CHANNEL_ID)\r\n            .setContentTitle(BASLIK)\r\n            .setContentText(ISIM)\r\n            .setLargeIcon(image)\r\n            .setSmallIcon(R.drawable.ic_launcher_foreground)\r\n            .addAction(R.drawable.ic_previous, &quot;Previous&quot;, prevPendingIntent)\r\n            .addAction(icon, &quot;Play&quot;, playPendingIntent)\r\n            .addAction(R.drawable.ic_next, &quot;Next&quot;, nextPendingIntent)\r\n            .setOnlyAlertOnce(true)\r\n            .setPriority(Notification.PRIORITY_LOW)\r\n            .setOngoing(true)\r\n            .setShowWhen(false)\r\n            .setVisibility(NotificationCompat.VISIBILITY_PUBLIC)\r\n            .setStyle(new androidx.media.app.NotificationCompat.MediaStyle()\r\n                    .setShowActionsInCompactView(0, 1, 2)\r\n                    .setMediaSession(mediaSession.getSessionToken()));\r\n            \r\n    notificationManager.notify(Integer.parseInt(CHANNEL_ID), notification.build());\r\n```\r\n\r\nI tried removing MediaStyle and it worked, images successfully changed each time but I need to use MediaStyle. I&#39;m sure about updating the notification, title and song name changes but image doesn&#39;t.\r\n","title":"Android media notification large icon doesn&#39;t change","body":"<p>I have a media notification and a large icon, my code successfully loads the image first time, but image doesn't changes second time. My code was working in Android 8.1.0, currently I'm using Android 12 and it doesn't work.</p>\n<pre><code>    mediaSession.setMetadata(new MediaMetadataCompat.Builder()\n            .putBitmap(MediaMetadata.METADATA_KEY_ALBUM_ART, image)\n            .putBitmap(MediaMetadata.METADATA_KEY_ART, image)\n            .putLong(MediaMetadata.METADATA_KEY_DURATION, -1L)\n            .putString(MediaMetadata.METADATA_KEY_TITLE,BASLIK)\n            .putString(MediaMetadata.METADATA_KEY_ARTIST,ISIM)\n            .build());\n\n    stateBuilder = new PlaybackStateCompat.Builder();\n    stateBuilder.setActions(PlaybackStateCompat.ACTION_PLAY_PAUSE | PlaybackStateCompat.ACT\n    stateBuilder.setState(PlaybackStateCompat.STATE_PLAYING, 0, 1.0f);\n    mediaSession.setPlaybackState(stateBuilder.build());\n\n    notification = new NotificationCompat.Builder(context, CHANNEL_ID)\n            .setContentTitle(BASLIK)\n            .setContentText(ISIM)\n            .setLargeIcon(image)\n            .setSmallIcon(R.drawable.ic_launcher_foreground)\n            .addAction(R.drawable.ic_previous, &quot;Previous&quot;, prevPendingIntent)\n            .addAction(icon, &quot;Play&quot;, playPendingIntent)\n            .addAction(R.drawable.ic_next, &quot;Next&quot;, nextPendingIntent)\n            .setOnlyAlertOnce(true)\n            .setPriority(Notification.PRIORITY_LOW)\n            .setOngoing(true)\n            .setShowWhen(false)\n            .setVisibility(NotificationCompat.VISIBILITY_PUBLIC)\n            .setStyle(new androidx.media.app.NotificationCompat.MediaStyle()\n                    .setShowActionsInCompactView(0, 1, 2)\n                    .setMediaSession(mediaSession.getSessionToken()));\n            \n    notificationManager.notify(Integer.parseInt(CHANNEL_ID), notification.build());\n</code></pre>\n<p>I tried removing MediaStyle and it worked, images successfully changed each time but I need to use MediaStyle. I'm sure about updating the notification, title and song name changes but image doesn't.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9494,"page":498,"page_size":100}
